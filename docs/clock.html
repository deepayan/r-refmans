<!DOCTYPE html><html lang="en"><head><title>Help for package clock</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {clock}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#clock-package'><p>clock: Date-Time Types and Tools</p></a></li>
<li><a href='#as_date'><p>Convert to a date</p></a></li>
<li><a href='#as_date_time'><p>Convert to a date-time</p></a></li>
<li><a href='#as_duration'><p>Convert to a duration</p></a></li>
<li><a href='#as_iso_year_week_day'><p>Convert to iso-year-week-day</p></a></li>
<li><a href='#as_naive_time'><p>Convert to a naive-time</p></a></li>
<li><a href='#as_sys_time'><p>Convert to a sys-time</p></a></li>
<li><a href='#as_weekday'><p>Convert to a weekday</p></a></li>
<li><a href='#as_year_day'><p>Convert to year-day</p></a></li>
<li><a href='#as_year_month_day'><p>Convert to year-month-day</p></a></li>
<li><a href='#as_year_month_weekday'><p>Convert to year-month-weekday</p></a></li>
<li><a href='#as_year_quarter_day'><p>Convert to year-quarter-day</p></a></li>
<li><a href='#as_year_week_day'><p>Convert to year-week-day</p></a></li>
<li><a href='#as_zoned_time'><p>Convert to a zoned-time</p></a></li>
<li><a href='#as-zoned-time-Date'><p>Convert to a zoned-time from a date</p></a></li>
<li><a href='#as-zoned-time-naive-time'><p>Convert to a zoned-time from a naive-time</p></a></li>
<li><a href='#as-zoned-time-posixt'><p>Convert to a zoned-time from a date-time</p></a></li>
<li><a href='#as-zoned-time-sys-time'><p>Convert to a zoned-time from a sys-time</p></a></li>
<li><a href='#calendar_group'><p>Group calendar components</p></a></li>
<li><a href='#calendar_leap_year'><p>Is the calendar year a leap year?</p></a></li>
<li><a href='#calendar_month_factor'><p>Convert a calendar to an ordered factor of month names</p></a></li>
<li><a href='#calendar_narrow'><p>Narrow a calendar to a less precise precision</p></a></li>
<li><a href='#calendar_precision'><p>Precision: calendar</p></a></li>
<li><a href='#calendar_spanning_seq'><p>Spanning sequence: calendars</p></a></li>
<li><a href='#calendar_widen'><p>Widen a calendar to a more precise precision</p></a></li>
<li><a href='#calendar-boundary'><p>Boundaries: calendars</p></a></li>
<li><a href='#calendar-count-between'><p>Counting: calendars</p></a></li>
<li><a href='#clock_labels'><p>Create or retrieve date related labels</p></a></li>
<li><a href='#clock_locale'><p>Create a clock locale</p></a></li>
<li><a href='#clock-arithmetic'><p>Clock arithmetic</p></a></li>
<li><a href='#clock-codes'><p>Integer codes</p></a></li>
<li><a href='#clock-getters'><p>Calendar getters</p></a></li>
<li><a href='#clock-invalid'><p>Invalid calendar dates</p></a></li>
<li><a href='#clock-setters'><p>Calendar setters</p></a></li>
<li><a href='#date_build'><p>Building: date</p></a></li>
<li><a href='#date_count_between'><p>Counting: date and date-time</p></a></li>
<li><a href='#date_format'><p>Formatting: date and date-time</p></a></li>
<li><a href='#date_group'><p>Group date and date-time components</p></a></li>
<li><a href='#date_leap_year'><p>Is the year a leap year?</p></a></li>
<li><a href='#date_month_factor'><p>Convert a date or date-time to an ordered factor of month names</p></a></li>
<li><a href='#date_parse'><p>Parsing: date</p></a></li>
<li><a href='#date_seq'><p>Sequences: date and date-time</p></a></li>
<li><a href='#date_spanning_seq'><p>Spanning sequence: date and date-time</p></a></li>
<li><a href='#date_time_build'><p>Building: date-time</p></a></li>
<li><a href='#date_time_info'><p>Info: date-time</p></a></li>
<li><a href='#date_weekday_factor'><p>Convert a date or date-time to a weekday factor</p></a></li>
<li><a href='#date-and-date-time-boundary'><p>Boundaries: date and date-time</p></a></li>
<li><a href='#date-and-date-time-rounding'><p>Date and date-time rounding</p></a></li>
<li><a href='#date-and-date-time-shifting'><p>Shifting: date and date-time</p></a></li>
<li><a href='#Date-arithmetic'><p>Arithmetic: date</p></a></li>
<li><a href='#date-boundary'><p>Boundaries: date</p></a></li>
<li><a href='#date-count-between'><p>Counting: date</p></a></li>
<li><a href='#date-formatting'><p>Formatting: date</p></a></li>
<li><a href='#Date-getters'><p>Getters: date</p></a></li>
<li><a href='#date-group'><p>Group date components</p></a></li>
<li><a href='#date-rounding'><p>Rounding: date</p></a></li>
<li><a href='#date-sequence'><p>Sequences: date</p></a></li>
<li><a href='#Date-setters'><p>Setters: date</p></a></li>
<li><a href='#date-shifting'><p>Shifting: date</p></a></li>
<li><a href='#date-time-parse'><p>Parsing: date-time</p></a></li>
<li><a href='#date-time-zone'><p>Get or set the time zone</p></a></li>
<li><a href='#date-today'><p>Current date and date-time</p></a></li>
<li><a href='#date-zone'><p>Get or set the time zone</p></a></li>
<li><a href='#duration_cast'><p>Cast a duration between precisions</p></a></li>
<li><a href='#duration_precision'><p>Precision: duration</p></a></li>
<li><a href='#duration_spanning_seq'><p>Spanning sequence: duration</p></a></li>
<li><a href='#duration-arithmetic'><p>Arithmetic: duration</p></a></li>
<li><a href='#duration-helper'><p>Construct a duration</p></a></li>
<li><a href='#duration-rounding'><p>Duration rounding</p></a></li>
<li><a href='#format.clock_zoned_time'><p>Formatting: zoned-time</p></a></li>
<li><a href='#is_duration'><p>Is <code>x</code> a duration?</p></a></li>
<li><a href='#is_iso_year_week_day'><p>Is <code>x</code> a iso-year-week-day?</p></a></li>
<li><a href='#is_naive_time'><p>Is <code>x</code> a naive-time?</p></a></li>
<li><a href='#is_sys_time'><p>Is <code>x</code> a sys-time?</p></a></li>
<li><a href='#is_weekday'><p>Is <code>x</code> a weekday?</p></a></li>
<li><a href='#is_year_day'><p>Is <code>x</code> a year-day?</p></a></li>
<li><a href='#is_year_month_day'><p>Is <code>x</code> a year-month-day?</p></a></li>
<li><a href='#is_year_month_weekday'><p>Is <code>x</code> a year-month-weekday?</p></a></li>
<li><a href='#is_year_quarter_day'><p>Is <code>x</code> a year-quarter-day?</p></a></li>
<li><a href='#is_year_week_day'><p>Is <code>x</code> a year-week-day?</p></a></li>
<li><a href='#is_zoned_time'><p>Is <code>x</code> a zoned-time?</p></a></li>
<li><a href='#iso_year_week_day'><p>Calendar: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-arithmetic'><p>Arithmetic: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-boundary'><p>Boundaries: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-count-between'><p>Counting: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-getters'><p>Getters: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-group'><p>Grouping: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-narrow'><p>Narrow: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-setters'><p>Setters: iso-year-week-day</p></a></li>
<li><a href='#iso-year-week-day-widen'><p>Widen: iso-year-week-day</p></a></li>
<li><a href='#naive_time_info'><p>Info: naive-time</p></a></li>
<li><a href='#naive_time_parse'><p>Parsing: naive-time</p></a></li>
<li><a href='#posixt-arithmetic'><p>Arithmetic: date-time</p></a></li>
<li><a href='#posixt-boundary'><p>Boundaries: date-time</p></a></li>
<li><a href='#posixt-count-between'><p>Counting: date-times</p></a></li>
<li><a href='#posixt-formatting'><p>Formatting: date-time</p></a></li>
<li><a href='#posixt-getters'><p>Getters: date-time</p></a></li>
<li><a href='#posixt-group'><p>Group date-time components</p></a></li>
<li><a href='#posixt-rounding'><p>Rounding: date-time</p></a></li>
<li><a href='#posixt-sequence'><p>Sequences: date-time</p></a></li>
<li><a href='#posixt-setters'><p>Setters: date-time</p></a></li>
<li><a href='#posixt-shifting'><p>Shifting: date and date-time</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#seq.clock_duration'><p>Sequences: duration</p></a></li>
<li><a href='#seq.clock_iso_year_week_day'><p>Sequences: iso-year-week-day</p></a></li>
<li><a href='#seq.clock_time_point'><p>Sequences: time points</p></a></li>
<li><a href='#seq.clock_year_day'><p>Sequences: year-day</p></a></li>
<li><a href='#seq.clock_year_month_day'><p>Sequences: year-month-day</p></a></li>
<li><a href='#seq.clock_year_month_weekday'><p>Sequences: year-month-weekday</p></a></li>
<li><a href='#seq.clock_year_quarter_day'><p>Sequences: year-quarter-day</p></a></li>
<li><a href='#seq.clock_year_week_day'><p>Sequences: year-week-day</p></a></li>
<li><a href='#sys_time_info'><p>Info: sys-time</p></a></li>
<li><a href='#sys_time_now'><p>What is the current sys-time?</p></a></li>
<li><a href='#sys-parsing'><p>Parsing: sys-time</p></a></li>
<li><a href='#time_point_cast'><p>Cast a time point between precisions</p></a></li>
<li><a href='#time_point_count_between'><p>Counting: time point</p></a></li>
<li><a href='#time_point_precision'><p>Precision: time point</p></a></li>
<li><a href='#time_point_shift'><p>Shifting: time point</p></a></li>
<li><a href='#time_point_spanning_seq'><p>Spanning sequence: time points</p></a></li>
<li><a href='#time-point-arithmetic'><p>Arithmetic: Time points</p></a></li>
<li><a href='#time-point-rounding'><p>Time point rounding</p></a></li>
<li><a href='#vec_arith.clock_year_day'><p>Support for vctrs arithmetic</p></a></li>
<li><a href='#weekday'><p>Construct a weekday vector</p></a></li>
<li><a href='#weekday_code'><p>Extract underlying weekday codes</p></a></li>
<li><a href='#weekday_factor'><p>Convert a weekday to an ordered factor</p></a></li>
<li><a href='#weekday-arithmetic'><p>Arithmetic: weekday</p></a></li>
<li><a href='#year_day'><p>Calendar: year-day</p></a></li>
<li><a href='#year_month_day'><p>Calendar: year-month-day</p></a></li>
<li><a href='#year_month_day_parse'><p>Parsing: year-month-day</p></a></li>
<li><a href='#year_month_weekday'><p>Calendar: year-month-weekday</p></a></li>
<li><a href='#year_quarter_day'><p>Calendar: year-quarter-day</p></a></li>
<li><a href='#year_week_day'><p>Calendar: year-week-day</p></a></li>
<li><a href='#year-day-arithmetic'><p>Arithmetic: year-day</p></a></li>
<li><a href='#year-day-boundary'><p>Boundaries: year-day</p></a></li>
<li><a href='#year-day-count-between'><p>Counting: year-day</p></a></li>
<li><a href='#year-day-getters'><p>Getters: year-day</p></a></li>
<li><a href='#year-day-group'><p>Grouping: year-day</p></a></li>
<li><a href='#year-day-narrow'><p>Narrow: year-day</p></a></li>
<li><a href='#year-day-setters'><p>Setters: year-day</p></a></li>
<li><a href='#year-day-widen'><p>Widen: year-day</p></a></li>
<li><a href='#year-month-day-arithmetic'><p>Arithmetic: year-month-day</p></a></li>
<li><a href='#year-month-day-boundary'><p>Boundaries: year-month-day</p></a></li>
<li><a href='#year-month-day-count-between'><p>Counting: year-month-day</p></a></li>
<li><a href='#year-month-day-getters'><p>Getters: year-month-day</p></a></li>
<li><a href='#year-month-day-group'><p>Grouping: year-month-day</p></a></li>
<li><a href='#year-month-day-narrow'><p>Narrow: year-month-day</p></a></li>
<li><a href='#year-month-day-setters'><p>Setters: year-month-day</p></a></li>
<li><a href='#year-month-day-widen'><p>Widen: year-month-day</p></a></li>
<li><a href='#year-month-weekday-arithmetic'><p>Arithmetic: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-boundary'><p>Boundaries: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-count-between'><p>Counting: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-getters'><p>Getters: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-group'><p>Grouping: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-narrow'><p>Narrow: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-setters'><p>Setters: year-month-weekday</p></a></li>
<li><a href='#year-month-weekday-widen'><p>Widen: year-month-weekday</p></a></li>
<li><a href='#year-quarter-day-arithmetic'><p>Arithmetic: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-boundary'><p>Boundaries: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-count-between'><p>Counting: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-getters'><p>Getters: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-group'><p>Grouping: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-narrow'><p>Narrow: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-setters'><p>Setters: year-quarter-day</p></a></li>
<li><a href='#year-quarter-day-widen'><p>Widen: year-quarter-day</p></a></li>
<li><a href='#year-week-day-arithmetic'><p>Arithmetic: year-week-day</p></a></li>
<li><a href='#year-week-day-boundary'><p>Boundaries: year-week-day</p></a></li>
<li><a href='#year-week-day-count-between'><p>Counting: year-week-day</p></a></li>
<li><a href='#year-week-day-getters'><p>Getters: year-week-day</p></a></li>
<li><a href='#year-week-day-group'><p>Grouping: year-week-day</p></a></li>
<li><a href='#year-week-day-narrow'><p>Narrow: year-week-day</p></a></li>
<li><a href='#year-week-day-setters'><p>Setters: year-week-day</p></a></li>
<li><a href='#year-week-day-widen'><p>Widen: year-week-day</p></a></li>
<li><a href='#zoned_time_info'><p>Info: zoned-time</p></a></li>
<li><a href='#zoned_time_now'><p>What is the current zoned-time?</p></a></li>
<li><a href='#zoned_time_precision'><p>Precision: zoned-time</p></a></li>
<li><a href='#zoned-parsing'><p>Parsing: zoned-time</p></a></li>
<li><a href='#zoned-zone'><p>Get or set the time zone</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Date-Time Types and Tools</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a comprehensive library for date-time manipulations
    using a new family of orthogonal date-time classes (durations, time
    points, zoned-times, and calendars) that partition responsibilities so
    that the complexities of time zones are only considered when they are
    really needed. Capabilities include: date-time parsing, formatting,
    arithmetic, extraction and updating of components, and rounding.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://clock.r-lib.org">https://clock.r-lib.org</a>, <a href="https://github.com/r-lib/clock">https://github.com/r-lib/clock</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/clock/issues">https://github.com/r-lib/clock/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.6.1), lifecycle (&ge; 1.0.3), rlang (&ge; 1.1.0), tzdb
(&ge; 0.4.0), vctrs (&ge; 0.6.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, magrittr, pillar, rmarkdown, slider (&ge; 0.3.0),
testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>cpp11 (&ge; 0.5.1), tzdb (&ge; 0.4.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/build/compilation-database:</td>
<td>true</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>lubridate, tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-21 22:04:46 UTC; davis</td>
</tr>
<tr>
<td>Author:</td>
<td>Davis Vaughan [aut, cre],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Davis Vaughan &lt;davis@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-21 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='clock-package'>clock: Date-Time Types and Tools</h2><span id='topic+clock'></span><span id='topic+clock-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides a comprehensive library for date-time manipulations using a new family of orthogonal date-time classes (durations, time points, zoned-times, and calendars) that partition responsibilities so that the complexities of time zones are only considered when they are really needed. Capabilities include: date-time parsing, formatting, arithmetic, extraction and updating of components, and rounding.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Davis Vaughan <a href="mailto:davis@posit.co">davis@posit.co</a>
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://clock.r-lib.org">https://clock.r-lib.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/clock">https://github.com/r-lib/clock</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/clock/issues">https://github.com/r-lib/clock/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as_date'>Convert to a date</h2><span id='topic+as_date'></span><span id='topic+as_date.Date'></span><span id='topic+as_date.POSIXt'></span><span id='topic+as_date.clock_calendar'></span><span id='topic+as_date.clock_time_point'></span><span id='topic+as_date.clock_zoned_time'></span>

<h3>Description</h3>

<p><code>as_date()</code> is a generic function that converts its input to a date (Date).
</p>
<p>There are methods for converting date-times (POSIXct), calendars,
time points, and zoned-times to dates.
</p>
<p>For converting to a date-time, see <code><a href="#topic+as_date_time">as_date_time()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_date(x, ...)

## S3 method for class 'Date'
as_date(x, ...)

## S3 method for class 'POSIXt'
as_date(x, ...)

## S3 method for class 'clock_calendar'
as_date(x, ...)

## S3 method for class 'clock_time_point'
as_date(x, ...)

## S3 method for class 'clock_zoned_time'
as_date(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_date_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector.</p>
</td></tr>
<tr><td><code id="as_date_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that clock always assumes that R's Date class is naive, so converting
a POSIXct to a Date will always retain the printed year, month, and day
value.
</p>
<p>This is not a drop-in replacement for <code>as.Date()</code>, as it only converts a
limited set of types to Date. For parsing characters as dates, see
<code><a href="#topic+date_parse">date_parse()</a></code>. For converting numerics to dates, see <code><a href="vctrs.html#topic+new_date">vctrs::new_date()</a></code> or
continue to use <code>as.Date()</code>.
</p>


<h3>Value</h3>

<p>A date with the same length as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_time_parse("2019-01-01 23:02:03", "America/New_York")

# R's `as.Date.POSIXct()` method defaults to changing the printed time
# to UTC before converting, which can result in odd conversions like this:
as.Date(x)

# `as_date()` will never change the printed time before converting
as_date(x)

# Can also convert from other clock types
as_date(year_month_day(2019, 2, 5))
</code></pre>

<hr>
<h2 id='as_date_time'>Convert to a date-time</h2><span id='topic+as_date_time'></span><span id='topic+as_date_time.POSIXt'></span><span id='topic+as_date_time.Date'></span><span id='topic+as_date_time.clock_calendar'></span><span id='topic+as_date_time.clock_sys_time'></span><span id='topic+as_date_time.clock_naive_time'></span><span id='topic+as_date_time.clock_zoned_time'></span>

<h3>Description</h3>

<p><code>as_date_time()</code> is a generic function that converts its input to a date-time
(POSIXct).
</p>
<p>There are methods for converting dates (Date), calendars, time points, and
zoned-times to date-times.
</p>
<p>For converting to a date, see <code><a href="#topic+as_date">as_date()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_date_time(x, ...)

## S3 method for class 'POSIXt'
as_date_time(x, ...)

## S3 method for class 'Date'
as_date_time(x, zone, ..., nonexistent = NULL, ambiguous = NULL)

## S3 method for class 'clock_calendar'
as_date_time(x, zone, ..., nonexistent = NULL, ambiguous = NULL)

## S3 method for class 'clock_sys_time'
as_date_time(x, zone, ...)

## S3 method for class 'clock_naive_time'
as_date_time(x, zone, ..., nonexistent = NULL, ambiguous = NULL)

## S3 method for class 'clock_zoned_time'
as_date_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_date_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector.</p>
</td></tr>
<tr><td><code id="as_date_time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="as_date_time_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The zone to convert to.</p>
</td></tr>
<tr><td><code id="as_date_time_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="as_date_time_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that clock always assumes that R's Date class is naive, so converting
a Date to a POSIXct will always attempt to retain the printed year, month,
and day. Where possible, the resulting time will be at midnight (<code>00:00:00</code>),
but in some rare cases this is not possible due to daylight saving time. If
that issue ever arises, an error will be thrown, which can be resolved by
explicitly supplying <code>nonexistent</code> or <code>ambiguous</code>.
</p>
<p>This is not a drop-in replacement for <code>as.POSIXct()</code>, as it only converts a
limited set of types to POSIXct. For parsing characters as date-times, see
<code><a href="#topic+date_time_parse">date_time_parse()</a></code>. For converting numerics to date-times, see
<code><a href="vctrs.html#topic+new_date">vctrs::new_datetime()</a></code> or continue to use <code>as.POSIXct()</code>.
</p>


<h3>Value</h3>

<p>A date-time with the same length as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")

# `as.POSIXct()` will always treat Date as UTC, but will show the result
# of the conversion in your system time zone, which can be somewhat confusing
if (rlang::is_installed("withr")) {
  withr::with_timezone("UTC", print(as.POSIXct(x)))
  withr::with_timezone("Europe/Paris", print(as.POSIXct(x)))
  withr::with_timezone("America/New_York", print(as.POSIXct(x)))
}

# `as_date_time()` will treat Date as naive, which means that the original
# printed date will attempt to be kept wherever possible, no matter the
# time zone. The time will be set to midnight.
as_date_time(x, "UTC")
as_date_time(x, "Europe/Paris")
as_date_time(x, "America/New_York")

# In some rare cases, this is not possible.
# For example, in Asia/Beirut, there was a DST gap from
# 2021-03-27 23:59:59 -&gt; 2021-03-28 01:00:00,
# skipping the 0th hour entirely.
x &lt;- as.Date("2021-03-28")
try(as_date_time(x, "Asia/Beirut"))

# To resolve this, set a `nonexistent` time resolution strategy
as_date_time(x, "Asia/Beirut", nonexistent = "roll-forward")


# You can also convert to date-time from other clock types
as_date_time(year_month_day(2019, 2, 3, 03), "America/New_York")
</code></pre>

<hr>
<h2 id='as_duration'>Convert to a duration</h2><span id='topic+as_duration'></span>

<h3>Description</h3>

<p>You generally convert to a duration from either a sys-time or a naive-time.
The precision of the input is retained in the returned duration.
</p>
<p>To round an existing duration to another precision, see <code><a href="#topic+duration_floor">duration_floor()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_duration(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_duration_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to convert to a duration.</p>
</td></tr>
<tr><td><code id="as_duration_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A duration with the same precision as <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_sys_time(year_month_day(2019, 01, 01))

# The number of days since 1970-01-01 UTC
as_duration(x)

x &lt;- x + duration_seconds(1)
x

# The number of seconds since 1970-01-01 00:00:00 UTC
as_duration(x)
</code></pre>

<hr>
<h2 id='as_iso_year_week_day'>Convert to iso-year-week-day</h2><span id='topic+as_iso_year_week_day'></span>

<h3>Description</h3>

<p><code>as_iso_year_week_day()</code> converts a vector to the iso-year-week-day
calendar. Time points, Dates, POSIXct, and other calendars can all be
converted to iso-year-week-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_iso_year_week_day(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_iso_year_week_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to iso-year-week-day.</p>
</td></tr>
<tr><td><code id="as_iso_year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A iso-year-week-day vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_iso_year_week_day(as.Date("2019-01-01"))

# From POSIXct, which assumes that the naive time is what should be converted
as_iso_year_week_day(as.POSIXct("2019-01-01 02:30:30", "America/New_York"))

# From other calendars
as_iso_year_week_day(year_quarter_day(2019, quarter = 2, day = 50))
</code></pre>

<hr>
<h2 id='as_naive_time'>Convert to a naive-time</h2><span id='topic+as_naive_time'></span>

<h3>Description</h3>

<p><code>as_naive_time()</code> converts <code>x</code> to a naive-time.
</p>
<p>You can convert to a naive-time from any calendar type, as long as it has
at least day precision. There also must not be any invalid dates. If invalid
dates exist, they must first be resolved with <code><a href="#topic+invalid_resolve">invalid_resolve()</a></code>.
</p>
<p>Converting to a naive-time from a sys-time or zoned-time retains the printed
time, but drops the assumption that the time should be interpreted with any
specific time zone.
</p>
<p>Converting to a naive-time from a duration just wraps the duration in a
naive-time object, there is no assumption about the time zone. The duration
must have at least day precision.
</p>
<p>There are convenience methods for converting to a naive-time from R's
native date and date-time types. Like converting from a zoned-time, these
retain the printed time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_naive_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_naive_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to convert to a naive-time.</p>
</td></tr>
<tr><td><code id="as_naive_time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A naive-time vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")
as_naive_time(x)

ym &lt;- year_month_day(2019, 02)

# A minimum of day precision is required
try(as_naive_time(ym))

ymd &lt;- set_day(ym, 10)
as_naive_time(ymd)
</code></pre>

<hr>
<h2 id='as_sys_time'>Convert to a sys-time</h2><span id='topic+as_sys_time'></span>

<h3>Description</h3>

<p><code>as_sys_time()</code> converts <code>x</code> to a sys-time.
</p>
<p>You can convert to a sys-time from any calendar type, as long as it has
at least day precision. There also must not be any invalid dates. If invalid
dates exist, they must first be resolved with <code><a href="#topic+invalid_resolve">invalid_resolve()</a></code>.
</p>
<p>Converting to a sys-time from a naive-time retains the printed time,
but adds an assumption that the time should be interpreted in the UTC time
zone.
</p>
<p>Converting to a sys-time from a zoned-time retains the underlying duration,
but the printed time is the equivalent UTC time to whatever the zoned-time's
zone happened to be.
</p>
<p>Converting to a sys-time from a duration just wraps the duration in a
sys-time object, adding the assumption that the time should be interpreted
in the UTC time zone. The duration must have at least day precision.
</p>
<p>There are convenience methods for converting to a sys-time from R's
native date and date-time types. Like converting from a zoned-time, these
retain the underlying duration, but will change the printed time if the
zone was not already UTC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_sys_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_sys_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to convert to a sys-time.</p>
</td></tr>
<tr><td><code id="as_sys_time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sys-time vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")

# Dates are assumed to be naive, so the printed time is the same whether
# we convert it to sys-time or naive-time
as_sys_time(x)
as_naive_time(x)

y &lt;- as.POSIXct("2019-01-01 01:00:00", tz = "America/New_York")

# The sys time displays the equivalent time in UTC (5 hours ahead of
# America/New_York at this point in the year)
as_sys_time(y)

ym &lt;- year_month_day(2019, 02)

# A minimum of day precision is required
try(as_sys_time(ym))

ymd &lt;- set_day(ym, 10)
as_sys_time(ymd)
</code></pre>

<hr>
<h2 id='as_weekday'>Convert to a weekday</h2><span id='topic+as_weekday'></span>

<h3>Description</h3>

<p><code>as_weekday()</code> converts to a weekday type. This is normally useful for
converting to a weekday from a sys-time or naive-time. You can use this
function along with the <em>circular arithmetic</em> that weekday implements to
easily get to the &quot;next Monday&quot; or &quot;previous Sunday&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_weekday(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_weekday_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to convert to a weekday. Usually a sys-time or naive-time.</p>
</td></tr>
<tr><td><code id="as_weekday_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A weekday.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_naive_time(year_month_day(2019, 01, 05))

# This is a Saturday!
as_weekday(x)

# See the examples in `?weekday` for more usage.
</code></pre>

<hr>
<h2 id='as_year_day'>Convert to year-day</h2><span id='topic+as_year_day'></span>

<h3>Description</h3>

<p><code>as_year_day()</code> converts a vector to the year-day calendar.
Time points, Dates, POSIXct, and other calendars can all be converted to
year-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_year_day(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_year_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to year-day.</p>
</td></tr>
<tr><td><code id="as_year_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A year-day vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_year_day(as.Date("2019-05-01"))

# From POSIXct, which assumes that the naive time is what should be converted
as_year_day(as.POSIXct("2019-05-01 02:30:30", "America/New_York"))

# From other calendars
as_year_day(year_quarter_day(2019, quarter = 2, day = 50))
</code></pre>

<hr>
<h2 id='as_year_month_day'>Convert to year-month-day</h2><span id='topic+as_year_month_day'></span>

<h3>Description</h3>

<p><code>as_year_month_day()</code> converts a vector to the year-month-day calendar.
Time points, Dates, POSIXct, and other calendars can all be converted to
year-month-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_year_month_day(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_year_month_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to year-month-day.</p>
</td></tr>
<tr><td><code id="as_year_month_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A year-month-day vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_year_month_day(as.Date("2019-01-01"))

# From POSIXct, which assumes that the naive time is what should be converted
as_year_month_day(as.POSIXct("2019-01-01 02:30:30", "America/New_York"))

# From other calendars
as_year_month_day(year_quarter_day(2019, quarter = 2, day = 50))
</code></pre>

<hr>
<h2 id='as_year_month_weekday'>Convert to year-month-weekday</h2><span id='topic+as_year_month_weekday'></span>

<h3>Description</h3>

<p><code>as_year_month_weekday()</code> converts a vector to the year-month-weekday
calendar. Time points, Dates, POSIXct, and other calendars can all be
converted to year-month-weekday.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_year_month_weekday(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_year_month_weekday_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to year-month-weekday.</p>
</td></tr>
<tr><td><code id="as_year_month_weekday_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A year-month-weekday vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_year_month_weekday(as.Date("2019-01-01"))

# From POSIXct, which assumes that the naive time is what should be converted
as_year_month_weekday(as.POSIXct("2019-01-01 02:30:30", "America/New_York"))

# From other calendars
as_year_month_weekday(year_quarter_day(2019, quarter = 2, day = 50))
</code></pre>

<hr>
<h2 id='as_year_quarter_day'>Convert to year-quarter-day</h2><span id='topic+as_year_quarter_day'></span>

<h3>Description</h3>

<p><code>as_year_quarter_day()</code> converts a vector to the year-quarter-day
calendar. Time points, Dates, POSIXct, and other calendars can all be
converted to year-quarter-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_year_quarter_day(x, ..., start = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_year_quarter_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to year-quarter-day.</p>
</td></tr>
<tr><td><code id="as_year_quarter_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="as_year_quarter_day_+3A_start">start</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / NULL]&#8288;</code>
</p>
<p>The month to start the fiscal year in. 1 = January and 12 = December.
</p>
<p>If <code>NULL</code>:
</p>

<ul>
<li><p> If <code>x</code> is a year-quarter-day, it will be returned as is.
</p>
</li>
<li><p> Otherwise, a <code>start</code> of January will be used.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A year-quarter-day vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_year_quarter_day(as.Date("2019-01-01"))
as_year_quarter_day(as.Date("2019-01-01"), start = 3)

# From POSIXct, which assumes that the naive time is what should be converted
as_year_quarter_day(as.POSIXct("2019-01-01 02:30:30", "America/New_York"))

# From other calendars
tuesday &lt;- 3
as_year_quarter_day(year_month_weekday(2019, 2, tuesday, 2))

# Converting between `start`s
x &lt;- year_quarter_day(2019, 01, 01, start = 2)
x

# Default keeps the same start
as_year_quarter_day(x)

# But you can change it
as_year_quarter_day(x, start = 1)
</code></pre>

<hr>
<h2 id='as_year_week_day'>Convert to year-week-day</h2><span id='topic+as_year_week_day'></span>

<h3>Description</h3>

<p><code>as_year_week_day()</code> converts a vector to the year-week-day
calendar. Time points, Dates, POSIXct, and other calendars can all be
converted to year-week-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_year_week_day(x, ..., start = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_year_week_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector]&#8288;</code>
</p>
<p>A vector to convert to year-week-day.</p>
</td></tr>
<tr><td><code id="as_year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="as_year_week_day_+3A_start">start</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / NULL]&#8288;</code>
</p>
<p>The day to consider the start of the week. 1 = Sunday and 7 = Saturday.
</p>
<p>If <code>NULL</code>:
</p>

<ul>
<li><p> If <code>x</code> is a year-week-day, it will be returned as is.
</p>
</li>
<li><p> Otherwise, a <code>start</code> of Sunday will be used.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A year-week-day vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># From Date
as_year_week_day(as.Date("2019-01-01"))
as_year_week_day(as.Date("2019-01-01"), start = clock_weekdays$monday)

# From POSIXct, which assumes that the naive time is what should be converted
as_year_week_day(as.POSIXct("2019-01-01 02:30:30", "America/New_York"))

# From other calendars
as_year_week_day(year_quarter_day(2019, quarter = 2, day = 50))
</code></pre>

<hr>
<h2 id='as_zoned_time'>Convert to a zoned-time</h2><span id='topic+as_zoned_time'></span>

<h3>Description</h3>

<p><code>as_zoned_time()</code> converts <code>x</code> to a zoned-time. You generally convert
to a zoned time from either a sys-time or a naive time. Each are documented
on their own page:
</p>

<ul>
<li> <p><a href="#topic+as-zoned-time-sys-time">sys-time</a>
</p>
</li>
<li> <p><a href="#topic+as-zoned-time-naive-time">naive-time</a>
</p>
</li></ul>

<p>There are also convenience methods for converting to a zoned time from
native R date and date-time types:
</p>

<ul>
<li> <p><a href="#topic+as-zoned-time-Date">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+as-zoned-time-posixt">date-times (POSIXct / POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>as_zoned_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_zoned_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to convert to a zoned-time.</p>
</td></tr>
<tr><td><code id="as_zoned_time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zoned-time vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")
as_zoned_time(x, "Europe/London")

y &lt;- as_naive_time(year_month_day(2019, 2, 1))
as_zoned_time(y, zone = "America/New_York")
</code></pre>

<hr>
<h2 id='as-zoned-time-Date'>Convert to a zoned-time from a date</h2><span id='topic+as-zoned-time-Date'></span><span id='topic+as_zoned_time.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code> generic.
</p>
<p>clock assumes that Dates are <em>naive</em> date-time types. Like naive-times, they
have a yet-to-be-specified time zone. This method allows you to specify that
time zone, keeping the printed time. If possible, the time will be set to
midnight (see Details for the rare case in which this is not possible).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
as_zoned_time(x, zone, ..., nonexistent = NULL, ambiguous = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as-zoned-time-Date_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A Date.</p>
</td></tr>
<tr><td><code id="as-zoned-time-Date_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The zone to convert to.</p>
</td></tr>
<tr><td><code id="as-zoned-time-Date_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="as-zoned-time-Date_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="as-zoned-time-Date_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the rare instance that the specified time zone does not contain a
date-time at midnight due to daylight saving time, <code>nonexistent</code> can be used
to resolve the issue. Similarly, if there are two possible midnight times due
to a daylight saving time fallback, <code>ambiguous</code> can be used.
</p>


<h3>Value</h3>

<p>A zoned-time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")

# The resulting zoned-times have the same printed time, but are in
# different time zones
as_zoned_time(x, "UTC")
as_zoned_time(x, "America/New_York")

# Converting Date -&gt; zoned-time is the same as naive-time -&gt; zoned-time
x &lt;- as_naive_time(year_month_day(2019, 1, 1))
as_zoned_time(x, "America/New_York")

# In Asia/Beirut, there was a DST gap from
# 2021-03-27 23:59:59 -&gt; 2021-03-28 01:00:00,
# skipping the 0th hour entirely. This means there is no midnight value.
x &lt;- as.Date("2021-03-28")
try(as_zoned_time(x, "Asia/Beirut"))

# To resolve this, set a `nonexistent` time resolution strategy
as_zoned_time(x, "Asia/Beirut", nonexistent = "roll-forward")
</code></pre>

<hr>
<h2 id='as-zoned-time-naive-time'>Convert to a zoned-time from a naive-time</h2><span id='topic+as-zoned-time-naive-time'></span><span id='topic+as_zoned_time.clock_naive_time'></span>

<h3>Description</h3>

<p>This is a naive-time method for the <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code> generic.
</p>
<p>Converting to a zoned-time from a naive-time retains the printed time,
but changes the underlying duration, depending on the <code>zone</code> that you choose.
</p>
<p>Naive-times are time points with a yet-to-be-determined time zone. By
converting them to a zoned-time, all you are doing is specifying that
time zone while attempting to keep all other printed information the
same (if possible).
</p>
<p>If you want to retain the underlying duration, try converting to a zoned-time
<a href="#topic+as-zoned-time-sys-time">from a sys-time</a>, which is a time point
interpreted as having a UTC time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_naive_time'
as_zoned_time(x, zone, ..., nonexistent = NULL, ambiguous = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as-zoned-time-naive-time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_naive_time]&#8288;</code>
</p>
<p>A naive-time to convert to a zoned-time.</p>
</td></tr>
<tr><td><code id="as-zoned-time-naive-time_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The zone to convert to.</p>
</td></tr>
<tr><td><code id="as-zoned-time-naive-time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="as-zoned-time-naive-time_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="as-zoned-time-naive-time_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zoned-time vector.
</p>


<h3>Daylight Saving Time</h3>

<p>Converting from a naive-time to a zoned-time is not always possible due to
daylight saving time issues. There are two types of these issues:
</p>
<p><em>Nonexistent</em> times are the result of daylight saving time &quot;gaps&quot;.
For example, in the America/New_York time zone, there was a daylight
saving time gap 1 second after <code>"2020-03-08 01:59:59"</code>, where the clocks
changed from <code>01:59:59 -&gt; 03:00:00</code>, completely skipping the 2 o'clock hour.
This means that if you had a naive time of <code>"2020-03-08 02:30:00"</code>, you
couldn't convert that straight into a zoned-time with this time zone. To
resolve these issues, the <code>nonexistent</code> argument can be used to specify
one of many nonexistent time resolution strategies.
</p>
<p><em>Ambiguous</em> times are the result of daylight saving time &quot;fallbacks&quot;.
For example, in the America/New_York time zone, there was a daylight
saving time fallback 1 second after <code>"2020-11-01 01:59:59 EDT"</code>, at which
point the clocks &quot;fell backwards&quot; by 1 hour, resulting in a printed time of
<code>"2020-11-01 01:00:00 EST"</code> (note the EDT-&gt;EST shift). This resulted in two
1 o'clock hours for this day, so if you had a naive time of
<code>"2020-11-01 01:30:00"</code>, you wouldn't be able to convert that directly
into a zoned-time with this time zone, as there is no way for clock to know
which of the two ambiguous times you wanted. To resolve these issues,
the <code>ambiguous</code> argument can be used to specify one of many ambiguous
time resolution strategies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

x &lt;- as_naive_time(year_month_day(2019, 1, 1))

# Converting a naive-time to a zoned-time generally retains the
# printed time, while changing the underlying duration.
as_zoned_time(x, "America/New_York")
as_zoned_time(x, "America/Los_Angeles")

# ---------------------------------------------------------------------------
# Nonexistent time:

new_york &lt;- "America/New_York"

# There was a daylight saving gap in the America/New_York time zone on
# 2020-03-08 01:59:59 -&gt; 03:00:00, which means that one of these
# naive-times don't exist in that time zone. By default, attempting to
# convert it to a zoned time will result in an error.
nonexistent_time &lt;- year_month_day(2020, 03, 08, c(02, 03), c(45, 30), 00)
nonexistent_time &lt;- as_naive_time(nonexistent_time)
try(as_zoned_time(nonexistent_time, new_york))

# Resolve this by specifying a nonexistent time resolution strategy
as_zoned_time(nonexistent_time, new_york, nonexistent = "roll-forward")
as_zoned_time(nonexistent_time, new_york, nonexistent = "roll-backward")

# Note that rolling backwards will choose the last possible moment in
# time at the current precision of the input
nonexistent_nanotime &lt;- time_point_cast(nonexistent_time, "nanosecond")
nonexistent_nanotime
as_zoned_time(nonexistent_nanotime, new_york, nonexistent = "roll-backward")

# A word of caution - Shifting does not guarantee that the relative ordering
# of the input is maintained
shifted &lt;- as_zoned_time(
  nonexistent_time,
  new_york,
  nonexistent = "shift-forward"
)
shifted

# 02:45:00 &lt; 03:30:00
nonexistent_time[1] &lt; nonexistent_time[2]
# 03:45:00 &gt; 03:30:00 (relative ordering is lost)
shifted[1] &lt; shifted[2]

# ---------------------------------------------------------------------------
# Ambiguous time:

new_york &lt;- "America/New_York"

# There was a daylight saving time fallback in the America/New_York time
# zone on 2020-11-01 01:59:59 EDT -&gt; 2020-11-01 01:00:00 EST, resulting
# in two 1 o'clock hours. This means that the following naive time is
# ambiguous since we don't know which of the two 1 o'clocks it belongs to.
# By default, attempting to convert it to a zoned time will result in an
# error.
ambiguous_time &lt;- year_month_day(2020, 11, 01, 01, 30, 00)
ambiguous_time &lt;- as_naive_time(ambiguous_time)
try(as_zoned_time(ambiguous_time, new_york))

# Resolve this by specifying an ambiguous time resolution strategy
earliest &lt;- as_zoned_time(ambiguous_time, new_york, ambiguous = "earliest")
latest &lt;- as_zoned_time(ambiguous_time, new_york, ambiguous = "latest")
na &lt;- as_zoned_time(ambiguous_time, new_york, ambiguous = "NA")
earliest
latest
na

# Now assume that you were given the following zoned-times, i.e.,
# you didn't build them from scratch so you already know their otherwise
# ambiguous offsets
x &lt;- c(earliest, latest)
x

# To set the seconds to 5 in both, you might try:
x_naive &lt;- x %&gt;%
  as_naive_time() %&gt;%
  as_year_month_day() %&gt;%
  set_second(5) %&gt;%
  as_naive_time()

x_naive

# But this fails because you've "lost" the information about which
# offsets these ambiguous times started in
try(as_zoned_time(x_naive, zoned_time_zone(x)))

# To get around this, you can use that information by specifying
# `ambiguous = x`, which will use the offset from `x` to resolve the
# ambiguity in `x_naive` as long as `x` is also an ambiguous time with the
# same daylight saving time transition point as `x_naive` (i.e. here
# everything has a transition point of `"2020-11-01 01:00:00 EST"`).
as_zoned_time(x_naive, zoned_time_zone(x), ambiguous = x)

# Say you added one more time to `x` that would not be considered ambiguous
# in naive-time
x &lt;- c(x, as_zoned_time(as_sys_time(latest) + 3600, zoned_time_zone(latest)))
x

# Imagine you want to floor this vector to a multiple of 2 hours, with
# an origin of 1am that day. You can do this by subtracting the origin,
# flooring, then adding it back
origin &lt;- year_month_day(2019, 11, 01, 01, 00, 00) %&gt;%
  as_naive_time() %&gt;%
  as_duration()

x_naive &lt;- x %&gt;%
  as_naive_time() %&gt;%
  add_seconds(-origin) %&gt;%
  time_point_floor("hour", n = 2) %&gt;%
  add_seconds(origin)

x_naive

# You again have ambiguous naive-time points, so you might try using
# `ambiguous = x`. It looks like this took care of the first two problems,
# but we have an issue at location 3.
try(as_zoned_time(x_naive, zoned_time_zone(x), ambiguous = x))

# When we floored from 02:30:00 -&gt; 01:00:00, we went from being
# unambiguous -&gt; ambiguous. In clock, this is something you must handle
# explicitly, and cannot be handled by using information from `x`. You can
# handle this while still retaining the behavior for the other two
# time points that were ambiguous before and after the floor by passing a
# list containing `x` and an ambiguous time resolution strategy to use
# when information from `x` can't resolve ambiguities:
as_zoned_time(x_naive, zoned_time_zone(x), ambiguous = list(x, "latest"))
</code></pre>

<hr>
<h2 id='as-zoned-time-posixt'>Convert to a zoned-time from a date-time</h2><span id='topic+as-zoned-time-posixt'></span><span id='topic+as_zoned_time.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct/POSIXlt method for the <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code> generic.
</p>
<p>Converting from one of R's native date-time classes (POSIXct or POSIXlt)
will retain the time zone of that object. There is no <code>zone</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
as_zoned_time(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as-zoned-time-posixt_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time.</p>
</td></tr>
<tr><td><code id="as-zoned-time-posixt_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zoned-time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-01-01", tz = "America/New_York")
as_zoned_time(x)
</code></pre>

<hr>
<h2 id='as-zoned-time-sys-time'>Convert to a zoned-time from a sys-time</h2><span id='topic+as-zoned-time-sys-time'></span><span id='topic+as_zoned_time.clock_sys_time'></span>

<h3>Description</h3>

<p>This is a sys-time method for the <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code> generic.
</p>
<p>Converting to a zoned-time from a sys-time retains the underlying duration,
but changes the printed time, depending on the <code>zone</code> that you choose.
Remember that sys-times are interpreted as UTC.
</p>
<p>If you want to retain the printed time, try converting to a zoned-time
<a href="#topic+as-zoned-time-naive-time">from a naive-time</a>, which is a time point
with a yet-to-be-determined time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_sys_time'
as_zoned_time(x, zone, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as-zoned-time-sys-time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time]&#8288;</code>
</p>
<p>A sys-time to convert to a zoned-time.</p>
</td></tr>
<tr><td><code id="as-zoned-time-sys-time_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The zone to convert to.</p>
</td></tr>
<tr><td><code id="as-zoned-time-sys-time_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A zoned-time vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_sys_time(year_month_day(2019, 02, 01, 02, 30, 00))
x

# Since sys-time is interpreted as UTC, converting to a zoned-time with
# a zone of UTC retains the printed time
x_utc &lt;- as_zoned_time(x, "UTC")
x_utc

# Converting to a different zone results in a different printed time,
# which corresponds to the exact same point in time, just in a different
# part of the work
x_ny &lt;- as_zoned_time(x, "America/New_York")
x_ny
</code></pre>

<hr>
<h2 id='calendar_group'>Group calendar components</h2><span id='topic+calendar_group'></span>

<h3>Description</h3>

<p><code>calendar_group()</code> groups at a multiple of the specified precision. Grouping
alters the value of a single component (i.e. the month component
if grouping by month). Components that are more precise than the precision
being grouped at are dropped altogether (i.e. the day component is dropped
if grouping by month).
</p>
<p>Each calendar has its own help page describing the grouping process in more
detail:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-group">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-group">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-group">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-group">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-group">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-group">year-day</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="calendar_group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
<tr><td><code id="calendar_group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="calendar_group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the calendar specific help pages for more examples
x &lt;- year_month_day(2019, c(1, 1, 2, 2, 3, 3, 4, 4), 1:8)
x

# Group by two months
calendar_group(x, "month", n = 2)

# Group by two days of the month
calendar_group(x, "day", n = 2)
</code></pre>

<hr>
<h2 id='calendar_leap_year'>Is the calendar year a leap year?</h2><span id='topic+calendar_leap_year'></span>

<h3>Description</h3>

<p><code>calendar_leap_year()</code> detects if the calendar year is a leap year - i.e.
does it contain one or more extra components than other years?
</p>
<p>A particular year is a leap year if:
</p>

<ul>
<li> <p><code><a href="#topic+year_month_day">year_month_day()</a></code>: February has 29 days.
</p>
</li>
<li> <p><code><a href="#topic+year_month_weekday">year_month_weekday()</a></code>: February has a weekday that occurs 5 times.
</p>
</li>
<li> <p><code><a href="#topic+year_week_day">year_week_day()</a></code>: There are 53 weeks in the year, resulting in 371
days in the year.
</p>
</li>
<li> <p><code><a href="#topic+iso_year_week_day">iso_year_week_day()</a></code>: There are 53 weeks in the year, resulting in 371
days in the year.
</p>
</li>
<li> <p><code><a href="#topic+year_quarter_day">year_quarter_day()</a></code>: One of the quarters has 1 more day than normal (the
quarter with an extra day depends on the <code>start</code> used, but will always be
the same for a particular <code>start</code>). This aligns with Gregorian leap years
for all <code>start</code>s except February, in which case the leap year is always 1
year after the Gregorian leap year.
</p>
</li>
<li> <p><code><a href="#topic+year_day">year_day()</a></code>: There are 366 days in the year.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_leap_year(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_leap_year_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar type to detect leap years in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector the same size as <code>x</code>. Returns <code>TRUE</code> if in a leap
year, <code>FALSE</code> if not in a leap year, and <code>NA</code> if <code>x</code> is <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(c(2019:2024, NA))
calendar_leap_year(x)

# For year-quarter-day, the leap year typically aligns with the Gregorian
# leap year, unless the `start` is February, in which case the leap year is
# always 1 year after the Gregorian leap year
x &lt;- year_quarter_day(2020:2021, start = clock_months$january)
calendar_leap_year(x)

x &lt;- year_quarter_day(2020:2021, start = clock_months$february)
calendar_leap_year(x)

# With a January start, 2020 has the extra day
get_day(year_quarter_day(2020, 1:4, "last", start = clock_months$january))
get_day(year_quarter_day(2021, 1:4, "last", start = clock_months$january))
get_day(year_quarter_day(2022, 1:4, "last", start = clock_months$january))

# With a February start, 2021 has the extra day
get_day(year_quarter_day(2020, 1:4, "last", start = clock_months$february))
get_day(year_quarter_day(2021, 1:4, "last", start = clock_months$february))
get_day(year_quarter_day(2022, 1:4, "last", start = clock_months$february))
</code></pre>

<hr>
<h2 id='calendar_month_factor'>Convert a calendar to an ordered factor of month names</h2><span id='topic+calendar_month_factor'></span>

<h3>Description</h3>

<p><code>calendar_month_factor()</code> extracts the month values from a calendar and
converts them to an ordered factor of month names. This can be useful in
combination with ggplot2, or for modeling.
</p>
<p>This function is only relevant for calendar types that use a month field,
i.e. <code><a href="#topic+year_month_day">year_month_day()</a></code> and <code><a href="#topic+year_month_weekday">year_month_weekday()</a></code>. The calendar type must
have at least month precision.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calendar_month_factor(x, ..., labels = "en", abbreviate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_month_factor_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="calendar_month_factor_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="calendar_month_factor_+3A_labels">labels</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_labels / character(1)]&#8288;</code>
</p>
<p>Character representations of localized weekday names, month names, and
AM/PM names. Either the language code as string (passed on to
<code><a href="#topic+clock_labels_lookup">clock_labels_lookup()</a></code>), or an object created by <code><a href="#topic+clock_labels">clock_labels()</a></code>.</p>
</td></tr>
<tr><td><code id="calendar_month_factor_+3A_abbreviate">abbreviate</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, the abbreviated month names from <code>labels</code> will be used.
</p>
<p>If <code>FALSE</code>, the full month names from <code>labels</code> will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An ordered factor representing the months.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1:12)

calendar_month_factor(x)
calendar_month_factor(x, abbreviate = TRUE)
calendar_month_factor(x, labels = "fr")
</code></pre>

<hr>
<h2 id='calendar_narrow'>Narrow a calendar to a less precise precision</h2><span id='topic+calendar_narrow'></span>

<h3>Description</h3>

<p><code>calendar_narrow()</code> narrows <code>x</code> to the specified <code>precision</code>. It does so
by dropping components that represent a precision that is finer than
<code>precision</code>.
</p>
<p>Each calendar has its own help page describing the precisions that you
can narrow to:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-narrow">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-narrow">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-narrow">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-narrow">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-narrow">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-narrow">year-day</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="calendar_narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A subsecond precision <code>x</code> cannot be narrowed to another subsecond precision.
You cannot narrow from, say, <code>"nanosecond"</code> to <code>"millisecond"</code> precision.
clock operates under the philosophy that once you have set the subsecond
precision of a calendar, it is &quot;locked in&quot; at that precision. If you
expected this to use integer division to divide the nanoseconds by 1e6 to
get to millisecond precision, you probably want to convert to a time point
first, and use <code><a href="#topic+time_point_floor">time_point_floor()</a></code>.
</p>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision
x &lt;- year_month_day(2019, 1, 3, 4)
x

# Narrowed to day precision
calendar_narrow(x, "day")

# Or month precision
calendar_narrow(x, "month")
</code></pre>

<hr>
<h2 id='calendar_precision'>Precision: calendar</h2><span id='topic+calendar_precision'></span>

<h3>Description</h3>

<p><code>calendar_precision()</code> extracts the precision from a calendar object. It
returns the precision as a single string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calendar_precision(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_precision_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_calendar]&#8288;</code>
</p>
<p>A calendar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single string holding the precision of the calendar.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calendar_precision(year_month_day(2019))
calendar_precision(year_month_day(2019, 1, 1))
calendar_precision(year_quarter_day(2019, 3))
</code></pre>

<hr>
<h2 id='calendar_spanning_seq'>Spanning sequence: calendars</h2><span id='topic+calendar_spanning_seq'></span>

<h3>Description</h3>

<p><code>calendar_spanning_seq()</code> generates a regular sequence along the span of
<code>x</code>, i.e. along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>. The sequence is generated at the
precision of <code>x</code>.
</p>
<p>Importantly, sequences can only be generated if the underlying <code><a href="base.html#topic+seq">seq()</a></code> method
for the calendar in question supports a <code>from</code> and <code>to</code> value at the same
precision as <code>x</code>. For example, you can't compute a day precision spanning
sequence for a <code><a href="#topic+year_month_day">year_month_day()</a></code> calendar (you can only compute a year
and month one). To create a day precision sequence, you'd have to convert to
a time-point first. See the individual <code><a href="base.html#topic+seq">seq()</a></code> method documentation to learn
what precisions are allowed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calendar_spanning_seq(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_spanning_seq_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing values are automatically removed before the sequence is generated.
</p>
<p>If you need more precise sequence generation, call <code><a href="base.html#topic+range">range()</a></code> and <code><a href="base.html#topic+seq">seq()</a></code>
directly.
</p>


<h3>Value</h3>

<p>A sequence along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(c(2019, 2022, 2020), c(2, 5, 3))
x

# Month precision spanning sequence
calendar_spanning_seq(x)

# Quarter precision:
x &lt;- year_quarter_day(c(2005, 2006, 2003), c(4, 2, 3))
calendar_spanning_seq(x)

# Can't generate sequences if `seq()` doesn't allow the precision
x &lt;- year_month_day(2019, c(1, 2, 1), c(20, 3, 25))
try(calendar_spanning_seq(x))

# Generally this means you need to convert to a time point and use
# `time_point_spanning_seq()` instead
time_point_spanning_seq(as_sys_time(x))
</code></pre>

<hr>
<h2 id='calendar_widen'>Widen a calendar to a more precise precision</h2><span id='topic+calendar_widen'></span>

<h3>Description</h3>

<p><code>calendar_widen()</code> widens <code>x</code> to the specified <code>precision</code>. It does so
by setting new components to their smallest value.
</p>
<p>Each calendar has its own help page describing the precisions that you
can widen to:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-widen">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-widen">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-widen">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-widen">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-widen">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-widen">year-day</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar_widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="calendar_widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A subsecond precision <code>x</code> cannot be widened. You cannot widen from, say,
<code>"millisecond"</code> to <code>"nanosecond"</code> precision. clock operates under the
philosophy that once you have set the subsecond precision of a calendar,
it is &quot;locked in&quot; at that precision. If you expected this to multiply
the milliseconds by 1e6 to get to nanosecond precision, you probably
want to convert to a time point first, and use <code><a href="#topic+time_point_cast">time_point_cast()</a></code>.
</p>
<p>Generally, clock treats calendars at a specific precision as a <em>range</em> of
values. For example, a month precision year-month-day is treated as a range
over <code style="white-space: pre;">&#8288;[yyyy-mm-01, yyyy-mm-last]&#8288;</code>, with no assumption about the day of the
month. However, occasionally it is useful to quickly widen a calendar,
assuming that you want the beginning of this range to be used for each
component. This is where <code>calendar_widen()</code> can come in handy.
</p>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Month precision
x &lt;- year_month_day(2019, 1)
x

# Widen to day precision
calendar_widen(x, "day")

# Or second precision
calendar_widen(x, "second")
</code></pre>

<hr>
<h2 id='calendar-boundary'>Boundaries: calendars</h2><span id='topic+calendar-boundary'></span><span id='topic+calendar_start'></span><span id='topic+calendar_end'></span>

<h3>Description</h3>


<ul>
<li> <p><code>calendar_start()</code> computes the start of a calendar at a particular
<code>precision</code>, such as the &quot;start of the quarter&quot;.
</p>
</li>
<li> <p><code>calendar_end()</code> computes the end of a calendar at a particular
<code>precision</code>, such as the &quot;end of the month&quot;.
</p>
</li></ul>

<p>For both <code>calendar_start()</code> and <code>calendar_end()</code>, the precision of <code>x</code> is
always retained.
</p>
<p>Each calendar has its own help page describing the precisions that you
can compute a boundary at:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-boundary">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-boundary">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-boundary">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-boundary">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-boundary">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-boundary">year-day</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_start(x, precision)

calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="calendar-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision
x &lt;- year_month_day(2019, 2:4, 5, 6)
x

# Compute the start of the month
calendar_start(x, "month")

# Or the end of the month, notice that the hour value is adjusted as well
calendar_end(x, "month")
</code></pre>

<hr>
<h2 id='calendar-count-between'>Counting: calendars</h2><span id='topic+calendar-count-between'></span><span id='topic+calendar_count_between'></span>

<h3>Description</h3>

<p><code>calendar_count_between()</code> counts the number of <code>precision</code> units between
<code>start</code> and <code>end</code> (i.e., the number of years or months). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.
</p>
<p>This is suitable for, say, computing the whole number of years or months
between two calendar dates, accounting for the day and time of day.
</p>
<p>Each calendar has its own help page describing the precisions that you can
count at:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-count-between">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-count-between">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-count-between">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-count-between">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-count-between">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-count-between">year-day</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calendar-count-between_+3A_start">start</code>, <code id="calendar-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_calendar]&#8288;</code>
</p>
<p>A pair of calendar vectors. These will be recycled to their common size.</p>
</td></tr>
<tr><td><code id="calendar-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
<tr><td><code id="calendar-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="calendar-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Comparison Direction</h3>

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &lt;= end&#8288;</code>. Similarly, if <code>start &gt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &gt;= end&#8288;</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Number of whole years between these dates
x &lt;- year_month_day(2000, 01, 05)
y &lt;- year_month_day(2005, 01, 04:06)

# Note that `2000-01-05 -&gt; 2005-01-04` is only 4 full years
calendar_count_between(x, y, "year")
</code></pre>

<hr>
<h2 id='clock_labels'>Create or retrieve date related labels</h2><span id='topic+clock_labels'></span><span id='topic+clock_labels_lookup'></span><span id='topic+clock_labels_languages'></span>

<h3>Description</h3>

<p>When parsing and formatting dates, you often need to know how weekdays of
the week and months are represented as text. These functions allow you
to either create your own labels, or look them up from a standard set of
language specific labels. The standard list is derived from ICU
(<a href="https://unicode-org.github.io/icu/">https://unicode-org.github.io/icu/</a>) via the stringi package.
</p>

<ul>
<li> <p><code>clock_labels_lookup()</code> looks up a set of labels from a
given language code.
</p>
</li>
<li> <p><code>clock_labels_languages()</code> lists the language codes that are accepted.
</p>
</li>
<li> <p><code>clock_labels()</code> lets you create your own set of labels. Use this if the
currently supported languages don't meet your needs.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>clock_labels(
  month,
  month_abbrev = month,
  weekday,
  weekday_abbrev = weekday,
  am_pm
)

clock_labels_lookup(language)

clock_labels_languages()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock_labels_+3A_month">month</code>, <code id="clock_labels_+3A_month_abbrev">month_abbrev</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(12)]&#8288;</code>
</p>
<p>Full and abbreviated month names. Starts with January.</p>
</td></tr>
<tr><td><code id="clock_labels_+3A_weekday">weekday</code>, <code id="clock_labels_+3A_weekday_abbrev">weekday_abbrev</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(7)]&#8288;</code>
</p>
<p>Full and abbreviated weekday names. Starts with Sunday.</p>
</td></tr>
<tr><td><code id="clock_labels_+3A_am_pm">am_pm</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(2)]&#8288;</code>
</p>
<p>Names used for AM and PM.</p>
</td></tr>
<tr><td><code id="clock_labels_+3A_language">language</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A BCP 47 locale, generally constructed from a two or three
digit language code. See <code>clock_labels_languages()</code> for a complete list of
available locales.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>"clock_labels"</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clock_labels_lookup("en")
clock_labels_lookup("ko")
clock_labels_lookup("fr")
</code></pre>

<hr>
<h2 id='clock_locale'>Create a clock locale</h2><span id='topic+clock_locale'></span>

<h3>Description</h3>

<p>A clock locale contains the information required to format and parse dates.
The defaults have been chosen to match US English. A clock locale object can
be provided to <code>format()</code> methods or parse functions (like
<code><a href="#topic+year_month_day_parse">year_month_day_parse()</a></code>) to override the defaults.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clock_locale(labels = "en", decimal_mark = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock_locale_+3A_labels">labels</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_labels / character(1)]&#8288;</code>
</p>
<p>Character representations of localized weekday names, month names, and
AM/PM names. Either the language code as string (passed on to
<code><a href="#topic+clock_labels_lookup">clock_labels_lookup()</a></code>), or an object created by <code><a href="#topic+clock_labels">clock_labels()</a></code>.</p>
</td></tr>
<tr><td><code id="clock_locale_+3A_decimal_mark">decimal_mark</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>Symbol used for the decimal place when formatting sub-second date-times.
Either <code>","</code> or <code>"."</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>"clock_locale"</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>clock_locale()
clock_locale(labels = "fr")
</code></pre>

<hr>
<h2 id='clock-arithmetic'>Clock arithmetic</h2><span id='topic+clock-arithmetic'></span><span id='topic+add_years'></span><span id='topic+add_quarters'></span><span id='topic+add_months'></span><span id='topic+add_weeks'></span><span id='topic+add_days'></span><span id='topic+add_hours'></span><span id='topic+add_minutes'></span><span id='topic+add_seconds'></span><span id='topic+add_milliseconds'></span><span id='topic+add_microseconds'></span><span id='topic+add_nanoseconds'></span>

<h3>Description</h3>

<p>This is the landing page for all clock arithmetic functions. There are
specific sub-pages describing how arithmetic works for different calendars
and time points, which is where you should look for more information.
</p>
<p>Calendars are efficient at arithmetic with irregular units of time, such as
month, quarters, or years.
</p>

<ul>
<li> <p><a href="#topic+year-month-day-arithmetic">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-arithmetic">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-arithmetic">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-arithmetic">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-arithmetic">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-arithmetic">year-day</a>
</p>
</li></ul>

<p>Time points, such as naive-times and sys-times, are efficient at arithmetic
with regular, well-defined units of time, such as days, hours, seconds,
or nanoseconds.
</p>

<ul>
<li> <p><a href="#topic+time-point-arithmetic">time-point</a>
</p>
</li></ul>

<p>Durations can use any of these arithmetic functions, and return a new
duration with a precision corresponding to the common type of the
input and the function used.
</p>

<ul>
<li> <p><a href="#topic+duration-arithmetic">duration</a>
</p>
</li></ul>

<p>Weekdays can perform day-based circular arithmetic.
</p>

<ul>
<li> <p><a href="#topic+weekday-arithmetic">weekday</a>
</p>
</li></ul>

<p>There are also convenience methods for doing arithmetic directly on a
native R date or date-time type:
</p>

<ul>
<li> <p><a href="#topic+Date-arithmetic">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-arithmetic">date-times (POSIXct / POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>add_years(x, n, ...)

add_quarters(x, n, ...)

add_months(x, n, ...)

add_weeks(x, n, ...)

add_days(x, n, ...)

add_hours(x, n, ...)

add_minutes(x, n, ...)

add_seconds(x, n, ...)

add_milliseconds(x, n, ...)

add_microseconds(x, n, ...)

add_nanoseconds(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
<tr><td><code id="clock-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="clock-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Months and years are considered &quot;irregular&quot; because some months have more
days then others (28, 29, 30, or 31), and some years have more days than
others (365 or 366).
</p>
<p>Days are considered &quot;regular&quot; because they are defined as 86,400 seconds.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See each sub-page for more specific examples
x &lt;- year_month_day(2019, 2, 1)
add_months(x, 1)
</code></pre>

<hr>
<h2 id='clock-codes'>Integer codes</h2><span id='topic+clock-codes'></span><span id='topic+clock_months'></span><span id='topic+clock_weekdays'></span><span id='topic+clock_iso_weekdays'></span>

<h3>Description</h3>

<p>Objects with useful mappings from month names and weekday names
to integer codes.
</p>


<h4>Month codes (<code>clock_months</code>)</h4>


<ul>
<li> <p><code>january == 1</code>
</p>
</li>
<li> <p><code>february == 2</code>
</p>
</li>
<li> <p><code>march == 3</code>
</p>
</li>
<li> <p><code>april == 4</code>
</p>
</li>
<li> <p><code>may == 5</code>
</p>
</li>
<li> <p><code>june == 6</code>
</p>
</li>
<li> <p><code>july == 7</code>
</p>
</li>
<li> <p><code>august == 8</code>
</p>
</li>
<li> <p><code>september == 9</code>
</p>
</li>
<li> <p><code>october == 10</code>
</p>
</li>
<li> <p><code>november == 11</code>
</p>
</li>
<li> <p><code>december == 12</code>
</p>
</li></ul>




<h4>Weekday codes (<code>clock_weekdays</code>)</h4>


<ul>
<li> <p><code>sunday == 1</code>
</p>
</li>
<li> <p><code>monday == 2</code>
</p>
</li>
<li> <p><code>tuesday == 3</code>
</p>
</li>
<li> <p><code>wednesday == 4</code>
</p>
</li>
<li> <p><code>thursday == 5</code>
</p>
</li>
<li> <p><code>friday == 6</code>
</p>
</li>
<li> <p><code>saturday == 7</code>
</p>
</li></ul>




<h4>ISO weekday codes (<code>clock_iso_weekdays</code>)</h4>


<ul>
<li> <p><code>monday == 1</code>
</p>
</li>
<li> <p><code>tuesday == 2</code>
</p>
</li>
<li> <p><code>wednesday == 3</code>
</p>
</li>
<li> <p><code>thursday == 4</code>
</p>
</li>
<li> <p><code>friday == 5</code>
</p>
</li>
<li> <p><code>saturday == 6</code>
</p>
</li>
<li> <p><code>sunday == 7</code>
</p>
</li></ul>




<h3>Usage</h3>

<pre><code class='language-R'>clock_months

clock_weekdays

clock_iso_weekdays
</code></pre>


<h3>Format</h3>


<ul>
<li> <p><code>clock_months</code>: An environment containing month codes.
</p>
</li></ul>


<ul>
<li> <p><code>clock_weekdays</code>: An environment containing weekday codes.
</p>
</li></ul>


<ul>
<li> <p><code>clock_iso_weekdays</code>: An environment containing ISO weekday codes.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>weekday(clock_weekdays$wednesday)

year_month_weekday(2019, clock_months$april, clock_weekdays$monday, 1:4)

year_week_day(2020, 52, start = clock_weekdays$monday)

iso_year_week_day(2020, 52, clock_iso_weekdays$thursday)
</code></pre>

<hr>
<h2 id='clock-getters'>Calendar getters</h2><span id='topic+clock-getters'></span><span id='topic+get_year'></span><span id='topic+get_quarter'></span><span id='topic+get_month'></span><span id='topic+get_week'></span><span id='topic+get_day'></span><span id='topic+get_hour'></span><span id='topic+get_minute'></span><span id='topic+get_second'></span><span id='topic+get_millisecond'></span><span id='topic+get_microsecond'></span><span id='topic+get_nanosecond'></span><span id='topic+get_index'></span>

<h3>Description</h3>

<p>This family of functions extract fields from a calendar vector. Each
calendar has its own set of supported getters, which are documented on
their own help page:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-getters">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-getters">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-getters">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-getters">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-getters">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-getters">year-day</a>
</p>
</li></ul>

<p>There are also convenience methods for extracting certain components
directly from R's native date and date-time types.
</p>

<ul>
<li> <p><a href="#topic+Date-getters">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-getters">date-times (POSIXct / POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>get_year(x)

get_quarter(x)

get_month(x)

get_week(x)

get_day(x)

get_hour(x)

get_minute(x)

get_second(x)

get_millisecond(x)

get_microsecond(x)

get_nanosecond(x)

get_index(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to get the component from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You cannot extract components directly from a time point type, such as
sys-time or naive-time. Convert it to a calendar type first. Similarly,
a zoned-time must be converted to either a sys-time or naive-time, and
then to a calendar type, to be able to extract components from it.
</p>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1:3, 5:7, 1, 20, 30)
get_month(x)
get_day(x)
get_second(x)
</code></pre>

<hr>
<h2 id='clock-invalid'>Invalid calendar dates</h2><span id='topic+clock-invalid'></span><span id='topic+invalid_detect'></span><span id='topic+invalid_any'></span><span id='topic+invalid_count'></span><span id='topic+invalid_remove'></span><span id='topic+invalid_resolve'></span>

<h3>Description</h3>

<p>This family of functions is for working with <em>invalid</em> calendar dates.
</p>
<p>Invalid dates represent dates made up of valid individual components, which
taken as a whole don't represent valid calendar dates. For example, for
<code><a href="#topic+year_month_day">year_month_day()</a></code> the following component ranges are valid:
<code style="white-space: pre;">&#8288;year: [-32767, 32767]&#8288;</code>, <code style="white-space: pre;">&#8288;month: [1, 12]&#8288;</code>, <code style="white-space: pre;">&#8288;day: [1, 31]&#8288;</code>.
However, the date <code>2019-02-31</code> doesn't exist even though it is made up
of valid components. This is an example of an invalid date.
</p>
<p>Invalid dates are allowed in clock, provided that they are eventually
resolved by using <code>invalid_resolve()</code> or by manually resolving them through
arithmetic or setter functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>invalid_detect(x)

invalid_any(x)

invalid_count(x)

invalid_remove(x)

invalid_resolve(x, ..., invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock-invalid_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[calendar]&#8288;</code>
</p>
<p>A calendar vector.</p>
</td></tr>
<tr><td><code id="clock-invalid_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="clock-invalid_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Invalid dates must be resolved before converting them to a time point.
</p>
<p>It is recommended to use <code>"previous"</code> or <code>"next"</code> for resolving invalid
dates, as these ensure that <em>relative ordering</em> among <code>x</code> is maintained.
This is a often a very important property to maintain when doing time series
data analysis. See the examples for more information.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>invalid_detect()</code>: Returns a logical vector detecting invalid dates.
</p>
</li>
<li> <p><code>invalid_any()</code>: Returns <code>TRUE</code> if any invalid dates are detected.
</p>
</li>
<li> <p><code>invalid_count()</code>: Returns a single integer containing the number of
invalid dates.
</p>
</li>
<li> <p><code>invalid_remove()</code>: Returns <code>x</code> with invalid dates removed.
</p>
</li>
<li> <p><code>invalid_resolve()</code>: Returns <code>x</code> with invalid dates resolved using the
<code>invalid</code> strategy.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Invalid date
x &lt;- year_month_day(2019, 04, 30:31, c(3, 2), 30, 00)
x

invalid_detect(x)

# Previous valid moment in time
x_previous &lt;- invalid_resolve(x, invalid = "previous")
x_previous

# Previous valid day, retaining time of day
x_previous_day &lt;- invalid_resolve(x, invalid = "previous-day")
x_previous_day

# Note that `"previous"` retains the relative ordering in `x`
x[1] &lt; x[2]
x_previous[1] &lt; x_previous[2]

# But `"previous-day"` here does not!
x_previous_day[1] &lt; x_previous_day[2]

# Remove invalid dates entirely
invalid_remove(x)

y &lt;- year_quarter_day(2019, 1, 90:92)
y

# Overflow rolls forward by the number of days between `y` and the previous
# valid date
invalid_resolve(y, invalid = "overflow")
</code></pre>

<hr>
<h2 id='clock-setters'>Calendar setters</h2><span id='topic+clock-setters'></span><span id='topic+set_year'></span><span id='topic+set_quarter'></span><span id='topic+set_month'></span><span id='topic+set_week'></span><span id='topic+set_day'></span><span id='topic+set_hour'></span><span id='topic+set_minute'></span><span id='topic+set_second'></span><span id='topic+set_millisecond'></span><span id='topic+set_microsecond'></span><span id='topic+set_nanosecond'></span><span id='topic+set_index'></span>

<h3>Description</h3>

<p>This family of functions sets fields in a calendar vector. Each
calendar has its own set of supported setters, which are documented on
their own help page:
</p>

<ul>
<li> <p><a href="#topic+year-month-day-setters">year-month-day</a>
</p>
</li>
<li> <p><a href="#topic+year-month-weekday-setters">year-month-weekday</a>
</p>
</li>
<li> <p><a href="#topic+year-week-day-setters">year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+iso-year-week-day-setters">iso-year-week-day</a>
</p>
</li>
<li> <p><a href="#topic+year-quarter-day-setters">year-quarter-day</a>
</p>
</li>
<li> <p><a href="#topic+year-day-setters">year-day</a>
</p>
</li></ul>

<p>There are also convenience methods for setting certain components
directly on R's native date and date-time types.
</p>

<ul>
<li> <p><a href="#topic+Date-setters">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-setters">date-times (POSIXct / POSIXlt)</a>
</p>
</li></ul>

<p>Some general rules about setting components on calendar types:
</p>

<ul>
<li><p> You can only set components that are relevant to the calendar type that
you are working with. For example, you can't set the quarter of a
year-month-day type. You'd have to convert to year-quarter-day first.
</p>
</li>
<li><p> You can set a component that is at the current precision, or one level
of precision more precise than the current precision. For example,
you can set the day field of a month precision year-month-day type,
but not the hour field.
</p>
</li>
<li><p> Setting a component can result in an <em>invalid date</em>, such as
<code>set_day(year_month_day(2019, 02), 31)</code>, as long as it is eventually
resolved either manually or with a strategy from <code><a href="#topic+invalid_resolve">invalid_resolve()</a></code>.
</p>
</li>
<li><p> With sub-second precisions, you can only set the component corresponding
to the precision that you are at. For example, you can set the nanoseconds
of the second while at nanosecond precision, but not milliseconds.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>set_year(x, value, ...)

set_quarter(x, value, ...)

set_month(x, value, ...)

set_week(x, value, ...)

set_day(x, value, ...)

set_hour(x, value, ...)

set_minute(x, value, ...)

set_second(x, value, ...)

set_millisecond(x, value, ...)

set_microsecond(x, value, ...)

set_nanosecond(x, value, ...)

set_index(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clock-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object to set the component for.</p>
</td></tr>
<tr><td><code id="clock-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The value to set the component to.</p>
</td></tr>
<tr><td><code id="clock-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You cannot set components directly on a time point type, such as
sys-time or naive-time. Convert it to a calendar type first. Similarly,
a zoned-time must be converted to either a sys-time or naive-time, and
then to a calendar type, to be able to set components on it.
</p>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1:3)

# Set the day
set_day(x, 12:14)

# Set to the "last" day of the month
set_day(x, "last")
</code></pre>

<hr>
<h2 id='date_build'>Building: date</h2><span id='topic+date_build'></span>

<h3>Description</h3>

<p><code>date_build()</code> builds a Date from it's individual components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_build(year, month = 1L, day = 1L, ..., invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_build_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="date_build_+3A_month">month</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The month. Values <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="date_build_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The day of the month. Values <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last day of the month is returned.</p>
</td></tr>
<tr><td><code id="date_build_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_build_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Components are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p>A Date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date_build(2019)
date_build(2019, 1:3)

# Generating invalid dates will trigger an error
try(date_build(2019, 1:12, 31))

# You can resolve this with `invalid`
date_build(2019, 1:12, 31, invalid = "previous")

# But this particular case (the last day of the month) is better
# specified as:
date_build(2019, 1:12, "last")
</code></pre>

<hr>
<h2 id='date_count_between'>Counting: date and date-time</h2><span id='topic+date_count_between'></span>

<h3>Description</h3>

<p><code>date_count_between()</code> counts the number of <code>precision</code> units between
<code>start</code> and <code>end</code> (i.e., the number of years or months or hours). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.
</p>
<p>This is suitable for, say, computing the whole number of years or months
between two dates, accounting for the day and time of day.
</p>
<p>There are separate help pages for counting for dates and date-times:
</p>

<ul>
<li> <p><a href="#topic+date-count-between">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-count-between">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_count_between_+3A_start">start</code>, <code id="date_count_between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A pair of date or date-time vectors. These will be recycled to their common
size.</p>
</td></tr>
<tr><td><code id="date_count_between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the calendar used.</p>
</td></tr>
<tr><td><code id="date_count_between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_count_between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Comparison Direction</h3>

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &lt;= end&#8288;</code>. Similarly, if <code>start &gt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &gt;= end&#8288;</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See method specific documentation for more examples

start &lt;- date_parse("2000-05-05")
end &lt;- date_parse(c("2020-05-04", "2020-05-06"))

# Age in years
date_count_between(start, end, "year")

# Number of "whole" months between these dates
date_count_between(start, end, "month")
</code></pre>

<hr>
<h2 id='date_format'>Formatting: date and date-time</h2><span id='topic+date_format'></span>

<h3>Description</h3>

<p><code>date_format()</code> formats a date (Date) or date-time (POSIXct/POSIXlt) using
a <code>format</code> string.
</p>
<p>There are separate help pages for formatting dates and date-times:
</p>

<ul>
<li> <p><a href="#topic+date-formatting">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-formatting">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_format(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_format_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date_format_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of the formatted input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See method specific documentation for more examples

x &lt;- as.Date("2019-01-01")
date_format(x, format = "year: %Y, month: %m, day: %d")
</code></pre>

<hr>
<h2 id='date_group'>Group date and date-time components</h2><span id='topic+date_group'></span>

<h3>Description</h3>

<p><code>date_group()</code> groups by a single component of a date-time, such as month
of the year, or day of the month.
</p>
<p>There are separate help pages for grouping dates and date-times:
</p>

<ul>
<li> <p><a href="#topic+date-group">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-group">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date_group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the input used.</p>
</td></tr>
<tr><td><code id="date_group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, grouped at <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See type specific documentation for more examples
date_group(as.Date("2019-01-01") + 0:5, "day", n = 2)
</code></pre>

<hr>
<h2 id='date_leap_year'>Is the year a leap year?</h2><span id='topic+date_leap_year'></span>

<h3>Description</h3>

<p><code>date_leap_year()</code> detects if the year is a leap year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_leap_year(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_leap_year_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time to detect leap years in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector the same size as <code>x</code>. Returns <code>TRUE</code> if in a leap
year, <code>FALSE</code> if not in a leap year, and <code>NA</code> if <code>x</code> is <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")
x &lt;- add_years(x, 0:5)
date_leap_year(x)

y &lt;- as.POSIXct("2019-01-01", "America/New_York")
y &lt;- add_years(y, 0:5)
date_leap_year(y)
</code></pre>

<hr>
<h2 id='date_month_factor'>Convert a date or date-time to an ordered factor of month names</h2><span id='topic+date_month_factor'></span>

<h3>Description</h3>

<p><code>date_month_factor()</code> extracts the month values from a date or date-time and
converts them to an ordered factor of month names. This can be useful in
combination with ggplot2, or for modeling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_month_factor(x, ..., labels = "en", abbreviate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_month_factor_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date_month_factor_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_month_factor_+3A_labels">labels</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_labels / character(1)]&#8288;</code>
</p>
<p>Character representations of localized weekday names, month names, and
AM/PM names. Either the language code as string (passed on to
<code><a href="#topic+clock_labels_lookup">clock_labels_lookup()</a></code>), or an object created by <code><a href="#topic+clock_labels">clock_labels()</a></code>.</p>
</td></tr>
<tr><td><code id="date_month_factor_+3A_abbreviate">abbreviate</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, the abbreviated month names from <code>labels</code> will be used.
</p>
<p>If <code>FALSE</code>, the full month names from <code>labels</code> will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An ordered factor representing the months.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- add_months(as.Date("2019-01-01"), 0:11)

date_month_factor(x)
date_month_factor(x, abbreviate = TRUE)
date_month_factor(x, labels = "fr")
</code></pre>

<hr>
<h2 id='date_parse'>Parsing: date</h2><span id='topic+date_parse'></span>

<h3>Description</h3>

<p><code>date_parse()</code> parses strings into a Date.
</p>
<p>The default <code>format</code> used is <code>"%Y-%m-%d"</code>. This matches the default
result from calling <code>print()</code> or <code>format()</code> on a Date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_parse(x, ..., format = NULL, locale = clock_locale())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_parse_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="date_parse_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_parse_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="date_parse_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em><code>date_parse()</code> ignores both the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands,</em> as clock treats
Date as a <em>naive</em> type, with a yet-to-be-specified time zone.
</p>
<p>Parsing strings with sub-daily components, such as hours, minutes, or
seconds, should generally be done with <code><a href="#topic+date_time_parse">date_time_parse()</a></code>. If you only
need the date components from a string with sub-daily components, choose
one of the following:
</p>

<ul>
<li><p> If the date components are at the front of the string, and you don't want
the time components to affect the date in any way, you can use
<code><a href="#topic+date_parse">date_parse()</a></code> to parse only the date components. For example,
<code>date_parse("2019-01-05 00:01:02", format = "%Y-%m-%d")</code> will parse
through <code>05</code> and then stop.
</p>
</li>
<li><p> If you want the time components to influence the date, then parse the full
string with <code><a href="#topic+date_time_parse">date_time_parse()</a></code>, round to day precision with a
rounding function like <code><a href="#topic+date_round">date_round()</a></code>, and cast to date with <code><a href="#topic+as_date">as_date()</a></code>.
</p>
</li></ul>

<p>Attempting to directly parse all components of a sub-daily string into a
Date is ambiguous and undefined, and is unlikely to work as you might expect.
For example, <code>date_parse("2019-01-05 00:01:02", format = "%Y-%m-%d %H:%M:%S")</code> is not officially supported, even if it works in
some cases.
</p>


<h3>Value</h3>

<p>A Date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date_parse("2020-01-01")

date_parse(
  "January 5, 2020",
  format = "%B %d, %Y"
)

# With a different locale
date_parse(
  "janvier 5, 2020",
  format = "%B %d, %Y",
  locale = clock_locale("fr")
)

# A neat feature of `date_parse()` is the ability to parse
# the ISO year-week-day format
date_parse("2020-W01-2", format = "%G-W%V-%u")

# ---------------------------------------------------------------------------
# Sub-daily components

# If you have a string with sub-daily components, but only require the date,
# first parse them as date-times to fully parse the sub-daily components,
# then round using whatever convention is required for your use case before
# converting to date.
x &lt;- c("2019-01-01 11", "2019-01-01 12")

x &lt;- date_time_parse(x, zone = "UTC", format = "%Y-%m-%d %H")
x

date_floor(x, "day")
date_round(x, "day")

as_date(date_round(x, "day"))
</code></pre>

<hr>
<h2 id='date_seq'>Sequences: date and date-time</h2><span id='topic+date_seq'></span>

<h3>Description</h3>

<p><code>date_seq()</code> generates a date (Date) or date-time (POSIXct/POSIXlt) sequence.
</p>
<p>There are separate help pages for generating sequences for dates and
date-times:
</p>

<ul>
<li> <p><a href="#topic+date-sequence">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-sequence">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_seq(from, ..., to = NULL, by = NULL, total_size = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_seq_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1) / POSIXct(1) / POSIXlt(1)]&#8288;</code>
</p>
<p>A date or date-time to start the sequence from.</p>
</td></tr>
<tr><td><code id="date_seq_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_seq_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1) / POSIXct(1) / POSIXlt(1) / NULL]&#8288;</code>
</p>
<p>A date or date-time to stop the sequence at.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="date_seq_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.</p>
</td></tr>
<tr><td><code id="date_seq_+3A_total_size">total_size</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The size of the resulting sequence.
</p>
<p>If specified alongside <code>to</code>, this must generate a non-fractional sequence
between <code>from</code> and <code>to</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A date or date-time vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See method specific documentation for more examples

x &lt;- as.Date("2019-01-01")
date_seq(x, by = duration_months(2), total_size = 20)
</code></pre>

<hr>
<h2 id='date_spanning_seq'>Spanning sequence: date and date-time</h2><span id='topic+date_spanning_seq'></span>

<h3>Description</h3>

<p><code>date_spanning_seq()</code> generates a regular sequence along the span of
<code>x</code>, i.e. along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>. For dates, this generates a day precision
sequence, and for date-times it generates a second precision sequence.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_spanning_seq(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_spanning_seq_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing and infinite values are automatically removed before the sequence is
generated.
</p>
<p>For date-times, sys-time based sequences are generated, consistent with
<code><a href="#topic+posixt-sequence">date_seq()</a></code> when using a second precision <code>by</code> value.
</p>
<p>If you need more precise sequence generation, call <code><a href="base.html#topic+range">range()</a></code> and <code><a href="#topic+date_seq">date_seq()</a></code>
directly.
</p>


<h3>Value</h3>

<p>A sequence along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_build(2020, c(1, 2, 1), c(10, 5, 12))
date_spanning_seq(x)

# Missing and infinite dates are removed before the sequence is generated
x &lt;- c(x, NA, Inf, -Inf)
x

date_spanning_seq(x)

# For date-times, sequences are generated at second precision
x &lt;- date_time_build(
  2020, 1, 2, 3, c(5, 4, 5), c(10, 48, 12),
  zone = "America/New_York"
)
x

date_spanning_seq(x)
</code></pre>

<hr>
<h2 id='date_time_build'>Building: date-time</h2><span id='topic+date_time_build'></span>

<h3>Description</h3>

<p><code>date_time_build()</code> builds a POSIXct from it's individual components.
</p>
<p>To build a POSIXct, it is required that you specify the <code>zone</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_time_build(
  year,
  month = 1L,
  day = 1L,
  hour = 0L,
  minute = 0L,
  second = 0L,
  ...,
  zone,
  invalid = NULL,
  nonexistent = NULL,
  ambiguous = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_time_build_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_month">month</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The month. Values <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The day of the month. Values <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last day of the month is returned.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A valid time zone name.
</p>
<p>This argument is required, and must be specified by name.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="date_time_build_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Components are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p>A POSIXct.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The zone argument is required!
# clock always requires you to be explicit about your choice of `zone`.
try(date_time_build(2020))

date_time_build(2020, zone = "America/New_York")

# Nonexistent time due to daylight saving time gap from 01:59:59 -&gt; 03:00:00
try(date_time_build(1970, 4, 26, 1:12, 30, zone = "America/New_York"))

# Resolve with a nonexistent time resolution strategy
date_time_build(
  1970, 4, 26, 1:12, 30,
  zone = "America/New_York",
  nonexistent = "roll-forward"
)
</code></pre>

<hr>
<h2 id='date_time_info'>Info: date-time</h2><span id='topic+date_time_info'></span>

<h3>Description</h3>

<p><code>date_time_info()</code> retrieves a set of low-level information generally not
required for most date-time manipulations. It returns a data frame with the
same columns as <code><a href="#topic+sys_time_info">sys_time_info()</a></code>, but the <code>begin</code> and <code>end</code> columns are
date-times with the same time zone as <code>x</code>, and the <code>offset</code> column is an
integer rather than a second based <a href="#topic+duration_seconds">duration</a> column
since this is part of the high-level API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_time_info(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_time_info_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of low level information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_time_build(
  2021, 03, 14, c(01, 03), c(59, 00), c(59, 00),
  zone = "America/New_York"
)

# x[1] is in EST, x[2] is in EDT
x

info &lt;- date_time_info(x)
info

# `end` can be used to iterate through daylight saving time transitions
date_time_info(info$end)
</code></pre>

<hr>
<h2 id='date_weekday_factor'>Convert a date or date-time to a weekday factor</h2><span id='topic+date_weekday_factor'></span>

<h3>Description</h3>

<p><code>date_weekday_factor()</code> converts a date or date-time to an ordered factor
with levels representing the weekday. This can be useful in combination with
ggplot2, or for modeling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_weekday_factor(
  x,
  ...,
  labels = "en",
  abbreviate = TRUE,
  encoding = "western"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date_weekday_factor_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date_weekday_factor_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date_weekday_factor_+3A_labels">labels</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_labels / character(1)]&#8288;</code>
</p>
<p>Character representations of localized weekday names, month names, and
AM/PM names. Either the language code as string (passed on to
<code><a href="#topic+clock_labels_lookup">clock_labels_lookup()</a></code>), or an object created by <code><a href="#topic+clock_labels">clock_labels()</a></code>.</p>
</td></tr>
<tr><td><code id="date_weekday_factor_+3A_abbreviate">abbreviate</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, the abbreviated weekday names from <code>labels</code> will be used.
</p>
<p>If <code>FALSE</code>, the full weekday names from <code>labels</code> will be used.</p>
</td></tr>
<tr><td><code id="date_weekday_factor_+3A_encoding">encoding</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"western"</code>: Encode the weekdays as an ordered factor with levels from
Sunday -&gt; Saturday.
</p>
</li>
<li> <p><code>"iso"</code>: Encode the weekdays as an ordered factor with levels from
Monday -&gt; Sunday.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An ordered factor representing the weekdays.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01") + 0:6

# Default to Sunday -&gt; Saturday
date_weekday_factor(x)

# ISO encoding is Monday -&gt; Sunday
date_weekday_factor(x, encoding = "iso")

# With full names
date_weekday_factor(x, abbreviate = FALSE)

# Or a different language
date_weekday_factor(x, labels = "fr")
</code></pre>

<hr>
<h2 id='date-and-date-time-boundary'>Boundaries: date and date-time</h2><span id='topic+date-and-date-time-boundary'></span><span id='topic+date_start'></span><span id='topic+date_end'></span>

<h3>Description</h3>


<ul>
<li> <p><code>date_start()</code> computes the date at the start of a particular
<code>precision</code>, such as the &quot;start of the year&quot;.
</p>
</li>
<li> <p><code>date_end()</code> computes the date at the end of a particular
<code>precision</code>, such as the &quot;end of the month&quot;.
</p>
</li></ul>

<p>There are separate help pages for computing boundaries for dates and
date-times:
</p>

<ul>
<li> <p><a href="#topic+date-boundary">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-boundary">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_start(x, precision, ...)

date_end(x, precision, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-and-date-time-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date-and-date-time-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the input used.</p>
</td></tr>
<tr><td><code id="date-and-date-time-boundary_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> but with some components altered to be at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See type specific documentation for more examples

x &lt;- date_build(2019, 2:4)

date_end(x, "month")

x &lt;- date_time_build(2019, 2:4, 3:5, 4, 5, zone = "America/New_York")

# Note that the hour, minute, and second components are also adjusted
date_end(x, "month")
</code></pre>

<hr>
<h2 id='date-and-date-time-rounding'>Date and date-time rounding</h2><span id='topic+date-and-date-time-rounding'></span><span id='topic+date_floor'></span><span id='topic+date_ceiling'></span><span id='topic+date_round'></span>

<h3>Description</h3>


<ul>
<li> <p><code>date_floor()</code> rounds a date or date-time down to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_ceiling()</code> rounds a date or date-time up to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_round()</code> rounds up or down depending on what is closer,
rounding up on ties.
</p>
</li></ul>

<p>There are separate help pages for rounding dates and date-times:
</p>

<ul>
<li> <p><a href="#topic+date-rounding">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-rounding">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>

<p>These functions round the underlying duration itself, relative to an
<code>origin</code>. For example, rounding to 15 hours will construct groups of
15 hours, starting from <code>origin</code>, which defaults to a naive time of
1970-01-01 00:00:00.
</p>
<p>If you want to group by components, such as &quot;day of the month&quot;, see
<code><a href="#topic+date_group">date_group()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_floor(x, precision, ..., n = 1L, origin = NULL)

date_ceiling(x, precision, ..., n = 1L, origin = NULL)

date_round(x, precision, ..., n = 1L, origin = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-and-date-time-rounding_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date-and-date-time-rounding_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. Allowed precisions are dependent on the input used.</p>
</td></tr>
<tr><td><code id="date-and-date-time-rounding_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-and-date-time-rounding_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="date-and-date-time-rounding_+3A_origin">origin</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1) / POSIXct(1) / POSIXlt(1) / NULL]&#8288;</code>
</p>
<p>An origin to start counting from. The default <code>origin</code> is
midnight on 1970-01-01 in the time zone of <code>x</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> rounded to the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the type specific documentation for more examples

x &lt;- as.Date("2019-03-31") + 0:5
x

# Flooring by 2 days, note that this is not tied to the current month,
# and instead counts from the specified `origin`.
date_floor(x, "day", n = 2)
</code></pre>

<hr>
<h2 id='date-and-date-time-shifting'>Shifting: date and date-time</h2><span id='topic+date-and-date-time-shifting'></span><span id='topic+date_shift'></span>

<h3>Description</h3>

<p><code>date_shift()</code> shifts <code>x</code> to the <code>target</code> weekday. You can shift to the next
or previous weekday. If <code>x</code> is currently on the <code>target</code> weekday, you can
choose to leave it alone or advance it to the next instance of the <code>target</code>.
</p>
<p>There are separate help pages for shifting dates and date-times:
</p>

<ul>
<li> <p><a href="#topic+date-shifting">dates (Date)</a>
</p>
</li>
<li> <p><a href="#topic+posixt-shifting">date-times (POSIXct/POSIXlt)</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_shift(x, target, ..., which = "next", boundary = "keep")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-and-date-time-shifting_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date / POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date or date-time vector.</p>
</td></tr>
<tr><td><code id="date-and-date-time-shifting_+3A_target">target</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday created from <code><a href="#topic+weekday">weekday()</a></code> to target.
</p>
<p>Generally this is length 1, but can also be the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code id="date-and-date-time-shifting_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-and-date-time-shifting_+3A_which">which</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"next"</code>: Shift to the next instance of the <code>target</code> weekday.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"previous&#8288;</code>: Shift to the previous instance of the <code>target</code> weekday.
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-and-date-time-shifting_+3A_boundary">boundary</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"keep"</code>: If <code>x</code> is currently on the <code>target</code> weekday, return it.
</p>
</li>
<li> <p><code>"advance"</code>: If <code>x</code> is currently on the <code>target</code> weekday, advance it
anyways.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> shifted to the <code>target</code> weekday.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the type specific documentation for more examples

x &lt;- as.Date("2019-01-01") + 0:1

# A Tuesday and Wednesday
as_weekday(x)

monday &lt;- weekday(clock_weekdays$monday)

# Shift to the next Monday
date_shift(x, monday)
</code></pre>

<hr>
<h2 id='Date-arithmetic'>Arithmetic: date</h2><span id='topic+Date-arithmetic'></span><span id='topic+add_years.Date'></span><span id='topic+add_quarters.Date'></span><span id='topic+add_months.Date'></span><span id='topic+add_weeks.Date'></span><span id='topic+add_days.Date'></span>

<h3>Description</h3>

<p>These are Date methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>
<p>Calendrical based arithmetic:
</p>
<p>These functions convert to a year-month-day calendar, perform
the arithmetic, then convert back to a Date.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li>
<li> <p><code>add_months()</code>
</p>
</li></ul>

<p>Time point based arithmetic:
</p>
<p>These functions convert to a time point, perform the arithmetic, then
convert back to a Date.
</p>

<ul>
<li> <p><code>add_weeks()</code>
</p>
</li>
<li> <p><code>add_days()</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
add_years(x, n, ..., invalid = NULL)

## S3 method for class 'Date'
add_quarters(x, n, ..., invalid = NULL)

## S3 method for class 'Date'
add_months(x, n, ..., invalid = NULL)

## S3 method for class 'Date'
add_weeks(x, n, ...)

## S3 method for class 'Date'
add_days(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Date-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A Date vector.</p>
</td></tr>
<tr><td><code id="Date-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="Date-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="Date-arithmetic_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adding a single quarter with <code>add_quarters()</code> is equivalent to adding
3 months.
</p>
<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Only calendrical based arithmetic has the potential to generate invalid
dates. Time point based arithmetic, like adding days, will always generate
a valid date.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")

add_years(x, 1:5)

y &lt;- as.Date("2019-01-31")

# Adding 1 month to `y` generates an invalid date. Unlike year-month-day
# types, R's native Date type cannot handle invalid dates, so you must
# resolve them immediately. If you don't you get an error:
try(add_months(y, 1:2))
add_months(as_year_month_day(y), 1:2)

# Resolve invalid dates by specifying an invalid date resolution strategy
# with the `invalid` argument. Using `"previous"` here sets the date to
# the previous valid date - i.e. the end of the month.
add_months(y, 1:2, invalid = "previous")
</code></pre>

<hr>
<h2 id='date-boundary'>Boundaries: date</h2><span id='topic+date-boundary'></span><span id='topic+date_start.Date'></span><span id='topic+date_end.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+date_start">date_start()</a></code> and <code><a href="#topic+date_end">date_end()</a></code> generics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_start(x, precision, ..., invalid = NULL)

## S3 method for class 'Date'
date_end(x, precision, ..., invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A date vector.</p>
</td></tr>
<tr><td><code id="date-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-boundary_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-boundary_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> but with some components altered to be at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_build(2019:2021, 2:4, 3:5)
x

# Last day of the month
date_end(x, "month")

# Last day of the year
date_end(x, "year")

# First day of the year
date_start(x, "year")
</code></pre>

<hr>
<h2 id='date-count-between'>Counting: date</h2><span id='topic+date-count-between'></span><span id='topic+date_count_between.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+date_count_between">date_count_between()</a></code> generic.
</p>
<p><code>date_count_between()</code> counts the number of <code>precision</code> units between
<code>start</code> and <code>end</code> (i.e., the number of years or months). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.
</p>
<p>This is suitable for, say, computing the whole number of years or months
between two dates, accounting for the day of the month.
</p>
<p><em>Calendrical based counting:</em>
</p>
<p>These precisions convert to a year-month-day calendar and count while in that
type.
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li></ul>

<p><em>Time point based counting:</em>
</p>
<p>These precisions convert to a time point and count while in that type.
</p>

<ul>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>

<p>For dates, whether a calendar or time point is used is not all that
important, but is is fairly important for date-times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-count-between_+3A_start">start</code>, <code id="date-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A pair of date vectors. These will be recycled to their common
size.</p>
</td></tr>
<tr><td><code id="date-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>"quarter"</code> is equivalent to <code>"month"</code> precision with <code>n</code> set to <code>n * 3L</code>.
</p>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Comparison Direction</h3>

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &lt;= end&#8288;</code>. Similarly, if <code>start &gt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &gt;= end&#8288;</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>start &lt;- date_parse("2000-05-05")
end &lt;- date_parse(c("2020-05-04", "2020-05-06"))

# Age in years
date_count_between(start, end, "year")

# Number of "whole" months between these dates. i.e.
# `2000-05-05 -&gt; 2020-04-05` is 239 months
# `2000-05-05 -&gt; 2020-05-05` is 240 months
# Since 2020-05-04 occurs before the 5th of that month,
# it gets a count of 239
date_count_between(start, end, "month")

# Number of "whole" quarters between (same as `"month"` with `n * 3`)
date_count_between(start, end, "quarter")
date_count_between(start, end, "month", n = 3)

# Number of days between
date_count_between(start, end, "day")

# Number of full 3 day periods between these two dates
date_count_between(start, end, "day", n = 3)

# Essentially the truncated value of this
date_count_between(start, end, "day") / 3

# ---------------------------------------------------------------------------

# Breakdown into full years, months, and days between
x &lt;- start

years &lt;- date_count_between(x, end, "year")
x &lt;- add_years(x, years)

months &lt;- date_count_between(x, end, "month")
x &lt;- add_months(x, months)

days &lt;- date_count_between(x, end, "day")
x &lt;- add_days(x, days)

data.frame(
  start = start,
  end = end,
  years = years,
  months = months,
  days = days
)

# Note that when breaking down a date like that, you may need to
# set `invalid` during intermediate calculations
start &lt;- date_build(2019, c(3, 3, 4), c(30, 31, 1))
end &lt;- date_build(2019, 5, 05)

# These are 1 month apart (plus a few days)
months &lt;- date_count_between(start, end, "month")

# But adding that 1 month to `start` results in an invalid date
try(add_months(start, months))

# You can choose various ways to resolve this
start_previous &lt;- add_months(start, months, invalid = "previous")
start_next &lt;- add_months(start, months, invalid = "next")

days_previous &lt;- date_count_between(start_previous, end, "day")
days_next &lt;- date_count_between(start_next, end, "day")

# Resulting in slightly different day values.
# No result is "perfect". Choosing "previous" or "next" both result
# in multiple `start` dates having the same month/day breakdown values.
data.frame(
  start = start,
  end = end,
  months = months,
  days_previous = days_previous,
  days_next = days_next
)
</code></pre>

<hr>
<h2 id='date-formatting'>Formatting: date</h2><span id='topic+date-formatting'></span><span id='topic+date_format.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+date_format">date_format()</a></code> generic.
</p>
<p><code>date_format()</code> formats a date (Date) using a <code>format</code> string.
</p>
<p>If <code>format</code> is <code>NULL</code>, a default format of <code>"%Y-%m-%d"</code> is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_format(x, ..., format = NULL, locale = clock_locale())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-formatting_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A date vector.</p>
</td></tr>
<tr><td><code id="date-formatting_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-formatting_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>If <code>NULL</code>, a default format is used, which depends on the type of the
input.
</p>
<p>Otherwise, a format string which is a combination of:
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The year divided by 100 using floored division. If the result
is a single decimal digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the result is a single
digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. If the result is less than four
digits it is left-padded with <code>0</code> to four digits.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s abbreviated month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%B&#8288;</code>: The <code>locale</code>'s full month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>01</code>. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>: The day of month as a decimal number. If the result is a single
decimal digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>: The <code>locale</code>'s abbreviated weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. If the
result is a single digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. If the result is less
than four digits it is left-padded with <code>0</code> to four digits.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. If the result
is a single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>001</code>. If the
result is less than three digits, it is left-padded with <code>0</code> to three
digits.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minute as a decimal number. If the result is a single digit, it
is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: Seconds as a decimal number. Fractional seconds are printed at the
precision of the input. The character for the decimal point is localized
according to <code>locale</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Nearly equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>, but seconds are always printed
at second precision.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the ISO 8601 format. For example <code>-0430</code>
refers to 4 hours 30 minutes behind UTC. If the offset is zero, <code>+0000</code> is
used. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> inserts a <code>:</code> between the hour and
minutes, like <code>-04:30</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name. If <code>abbreviate_zone</code> is <code>TRUE</code>, the time
zone abbreviation.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Similar to, but not exactly the
same as, <code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: A newline character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: A horizontal-tab character.
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-formatting_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Because a Date is considered to be a <em>naive</em> type in clock, meaning that
it currently has no implied time zone, using the <code style="white-space: pre;">&#8288;%z&#8288;</code> or <code style="white-space: pre;">&#8288;%Z&#8288;</code> format commands
is not allowed and will result in <code>NA</code>.
</p>


<h3>Value</h3>

<p>A character vector of the formatted input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01")

# Default
date_format(x)

date_format(x, format = "year: %Y, month: %m, day: %d")

# With different locales
date_format(x, format = "%A, %B %d, %Y")
date_format(x, format = "%A, %B %d, %Y", locale = clock_locale("fr"))
</code></pre>

<hr>
<h2 id='Date-getters'>Getters: date</h2><span id='topic+Date-getters'></span><span id='topic+get_year.Date'></span><span id='topic+get_month.Date'></span><span id='topic+get_day.Date'></span>

<h3>Description</h3>

<p>These are Date methods for the <a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the Gregorian year.
</p>
</li>
<li> <p><code>get_month()</code> returns the month of the year.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the month.
</p>
</li></ul>

<p>For more advanced component extraction, convert to the calendar type
that you are interested in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
get_year(x)

## S3 method for class 'Date'
get_month(x)

## S3 method for class 'Date'
get_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Date-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A Date to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01") + 0:5
get_day(x)
</code></pre>

<hr>
<h2 id='date-group'>Group date components</h2><span id='topic+date-group'></span><span id='topic+date_group.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+date_group">date_group()</a></code> generic.
</p>
<p><code>date_group()</code> groups by a single component of a Date, such as month
of the year, or day of the month.
</p>
<p>If you need to group by more complex components, like ISO weeks, or quarters,
convert to a calendar type that contains the component you are interested
in grouping by.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_group(x, precision, ..., n = 1L, invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A date vector.</p>
</td></tr>
<tr><td><code id="date-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="date-group_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, grouped at <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01") + -3:5
x

# Group by 2 days of the current month.
# Note that this resets at the beginning of the month, creating day groups
# of [29, 30] [31] [01, 02] [03, 04].
date_group(x, "day", n = 2)

# Group by month
date_group(x, "month")
</code></pre>

<hr>
<h2 id='date-rounding'>Rounding: date</h2><span id='topic+date-rounding'></span><span id='topic+date_floor.Date'></span><span id='topic+date_ceiling.Date'></span><span id='topic+date_round.Date'></span>

<h3>Description</h3>

<p>These are Date methods for the
<a href="#topic+date-and-date-time-rounding">rounding generics</a>.
</p>

<ul>
<li> <p><code>date_floor()</code> rounds a date down to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_ceiling()</code> rounds a date up to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_round()</code> rounds up or down depending on what is closer,
rounding up on ties.
</p>
</li></ul>

<p>The only supported rounding <code>precision</code>s for Dates are <code>"day"</code> and <code>"week"</code>.
You can group by irregular periods such as <code>"month"</code> or <code>"year"</code> by using
<code><a href="#topic+date_group">date_group()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_floor(x, precision, ..., n = 1L, origin = NULL)

## S3 method for class 'Date'
date_ceiling(x, precision, ..., n = 1L, origin = NULL)

## S3 method for class 'Date'
date_round(x, precision, ..., n = 1L, origin = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-rounding_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A date vector.</p>
</td></tr>
<tr><td><code id="date-rounding_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>

<p><code>"week"</code> is an alias for <code>"day"</code> with <code>n * 7</code>.</p>
</td></tr>
<tr><td><code id="date-rounding_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-rounding_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="date-rounding_+3A_origin">origin</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1) / NULL]&#8288;</code>
</p>
<p>An origin to start counting from. The default <code>origin</code> is
1970-01-01.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When rounding by <code>"week"</code>, remember that the <code>origin</code> determines the &quot;week
start&quot;. By default, 1970-01-01 is the implicit origin, which is a
Thursday. If you would like to round by weeks with a different week start,
just supply an origin on the weekday you are interested in.
</p>


<h3>Value</h3>

<p><code>x</code> rounded to the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-03-31") + 0:5
x

# Flooring by 2 days, note that this is not tied to the current month,
# and instead counts from the specified `origin`, so groups can cross
# the month boundary
date_floor(x, "day", n = 2)

# Compare to `date_group()`, which groups by the day of the month
date_group(x, "day", n = 2)

y &lt;- as.Date("2019-01-01") + 0:20
y

# Flooring by week uses an implicit `origin` of 1970-01-01, which
# is a Thursday
date_floor(y, "week")
as_weekday(date_floor(y, "week"))

# If you want to round by weeks with a different week start, supply an
# `origin` that falls on the weekday you care about. This uses a Monday.
origin &lt;- as.Date("1970-01-05")
as_weekday(origin)

date_floor(y, "week", origin = origin)
as_weekday(date_floor(y, "week", origin = origin))
</code></pre>

<hr>
<h2 id='date-sequence'>Sequences: date</h2><span id='topic+date-sequence'></span><span id='topic+date_seq.Date'></span>

<h3>Description</h3>

<p>This is a Date method for the <code><a href="#topic+date_seq">date_seq()</a></code> generic.
</p>
<p><code>date_seq()</code> generates a date (Date) sequence.
</p>
<p>When calling <code>date_seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li> <p><code>total_size</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_seq(from, ..., to = NULL, by = NULL, total_size = NULL, invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-sequence_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1)]&#8288;</code>
</p>
<p>A date to start the sequence from.</p>
</td></tr>
<tr><td><code id="date-sequence_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-sequence_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date(1) / NULL]&#8288;</code>
</p>
<p>A date to stop the sequence at.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.
</p>
<p>If <code>to</code> is supplied along with <code>by</code>, all components of <code>to</code> more precise
than the precision of <code>by</code> must match <code>from</code> exactly. For example, if <code>by = duration_months(1)</code>, the day component of <code>to</code> must match the day component
of <code>from</code>. This ensures that the generated sequence is, at a minimum, a
weakly monotonic sequence of dates.</p>
</td></tr>
<tr><td><code id="date-sequence_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is equivalent to <code>duration_days(by)</code>.
</p>
<p>If <code>by</code> is a duration, it is allowed to have a precision of:
</p>

<ul>
<li><p> year
</p>
</li>
<li><p> quarter
</p>
</li>
<li><p> month
</p>
</li>
<li><p> week
</p>
</li>
<li><p> day
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-sequence_+3A_total_size">total_size</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The size of the resulting sequence.
</p>
<p>If specified alongside <code>to</code>, this must generate a non-fractional sequence
between <code>from</code> and <code>to</code>.</p>
</td></tr>
<tr><td><code id="date-sequence_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A date vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>from &lt;- date_build(2019, 1)
to &lt;- date_build(2019, 4)

# Defaults to daily sequence
date_seq(from, to = to, by = 7)

# Use durations to change to monthly or yearly sequences
date_seq(from, to = to, by = duration_months(1))
date_seq(from, by = duration_years(-2), total_size = 3)

# Note that components of `to` more precise than the precision of `by`
# must match `from` exactly. For example, this is not well defined:
from &lt;- date_build(2019, 5, 2)
to &lt;- date_build(2025, 7, 5)
try(date_seq(from, to = to, by = duration_years(1)))

# The month and day components of `to` must match `from`
to &lt;- date_build(2025, 5, 2)
date_seq(from, to = to, by = duration_years(1))

# ---------------------------------------------------------------------------

# Invalid dates must be resolved with the `invalid` argument
from &lt;- date_build(2019, 1, 31)
to &lt;- date_build(2019, 12, 31)

try(date_seq(from, to = to, by = duration_months(1)))
date_seq(from, to = to, by = duration_months(1), invalid = "previous")

# Compare this to the base R result, which is often a source of confusion
seq(from, to = to, by = "1 month")

# This is equivalent to the overflow invalid resolution strategy
date_seq(from, to = to, by = duration_months(1), invalid = "overflow")

# ---------------------------------------------------------------------------

# Usage of `to` and `total_size` must generate a non-fractional sequence
# between `from` and `to`
from &lt;- date_build(2019, 1, 1)
to &lt;- date_build(2019, 1, 4)

# These are fine
date_seq(from, to = to, total_size = 2)
date_seq(from, to = to, total_size = 4)

# But this is not!
try(date_seq(from, to = to, total_size = 3))
</code></pre>

<hr>
<h2 id='Date-setters'>Setters: date</h2><span id='topic+Date-setters'></span><span id='topic+set_year.Date'></span><span id='topic+set_month.Date'></span><span id='topic+set_day.Date'></span>

<h3>Description</h3>

<p>These are Date methods for the <a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the year.
</p>
</li>
<li> <p><code>set_month()</code> sets the month of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the month. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
set_year(x, value, ..., invalid = NULL)

## S3 method for class 'Date'
set_month(x, value, ..., invalid = NULL)

## S3 method for class 'Date'
set_day(x, value, ..., invalid = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Date-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A Date vector.</p>
</td></tr>
<tr><td><code id="Date-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_day()</code>, this can also be <code>"last"</code> to set the day to the
last day of the month.</p>
</td></tr>
<tr><td><code id="Date-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="Date-setters_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-02-01")

# Set the day
set_day(x, 12:14)

# Set to the "last" day of the month
set_day(x, "last")

# You cannot set a Date to an invalid day like you can with
# a year-month-day. Instead, the default strategy is to error.
try(set_day(x, 31))
set_day(as_year_month_day(x), 31)

# You can resolve these issues while setting the day by specifying
# an invalid date resolution strategy with `invalid`
set_day(x, 31, invalid = "previous")
</code></pre>

<hr>
<h2 id='date-shifting'>Shifting: date</h2><span id='topic+date-shifting'></span><span id='topic+date_shift.Date'></span>

<h3>Description</h3>

<p><code>date_shift()</code> shifts <code>x</code> to the <code>target</code> weekday. You can shift to the next
or previous weekday. If <code>x</code> is currently on the <code>target</code> weekday, you can
choose to leave it alone or advance it to the next instance of the <code>target</code>.
</p>
<p>Weekday shifting is one of the easiest ways to floor by week while
controlling what is considered the first day of the week. You can also
accomplish this with the <code>origin</code> argument of <code><a href="#topic+date_floor">date_floor()</a></code>, but this is
slightly easier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Date'
date_shift(x, target, ..., which = "next", boundary = "keep")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-shifting_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[Date]&#8288;</code>
</p>
<p>A date vector.</p>
</td></tr>
<tr><td><code id="date-shifting_+3A_target">target</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday created from <code><a href="#topic+weekday">weekday()</a></code> to target.
</p>
<p>Generally this is length 1, but can also be the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code id="date-shifting_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-shifting_+3A_which">which</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"next"</code>: Shift to the next instance of the <code>target</code> weekday.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"previous&#8288;</code>: Shift to the previous instance of the <code>target</code> weekday.
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-shifting_+3A_boundary">boundary</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"keep"</code>: If <code>x</code> is currently on the <code>target</code> weekday, return it.
</p>
</li>
<li> <p><code>"advance"</code>: If <code>x</code> is currently on the <code>target</code> weekday, advance it
anyways.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> shifted to the <code>target</code> weekday.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.Date("2019-01-01") + 0:1

# A Tuesday and Wednesday
as_weekday(x)

monday &lt;- weekday(clock_weekdays$monday)

# Shift to the next Monday
date_shift(x, monday)

# Shift to the previous Monday
# This is an easy way to "floor by week" with a target weekday in mind
date_shift(x, monday, which = "previous")

# What about Tuesday?
tuesday &lt;- weekday(clock_weekdays$tuesday)

# Notice that the day that was currently on a Tuesday was not shifted
date_shift(x, tuesday)

# You can force it to `"advance"`
date_shift(x, tuesday, boundary = "advance")
</code></pre>

<hr>
<h2 id='date-time-parse'>Parsing: date-time</h2><span id='topic+date-time-parse'></span><span id='topic+date_time_parse'></span><span id='topic+date_time_parse_complete'></span><span id='topic+date_time_parse_abbrev'></span><span id='topic+date_time_parse_RFC_3339'></span>

<h3>Description</h3>

<p>There are four parsers for parsing strings into POSIXct date-times,
<code>date_time_parse()</code>, <code>date_time_parse_complete()</code>,
<code>date_time_parse_abbrev()</code>, and <code>date_time_parse_RFC_3339()</code>.
</p>


<h4>date_time_parse()</h4>

<p><code>date_time_parse()</code> is useful for strings like <code>"2019-01-01 00:00:00"</code>, where
the UTC offset and full time zone name are not present in the string. The
string is first parsed as a naive-time without any time zone assumptions, and
is then converted to a POSIXct with the supplied <code>zone</code>.
</p>
<p>Because converting from naive-time to POSIXct may result in nonexistent or
ambiguous times due to daylight saving time, these must be resolved
explicitly with the <code>nonexistent</code> and <code>ambiguous</code> arguments.
</p>
<p><code>date_time_parse()</code> completely ignores the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands. The only
time zone specific information that is used is the <code>zone</code>.
</p>
<p>The default <code>format</code> used is <code>"%Y-%m-%d %H:%M:%S"</code>. This matches the default
result from calling <code>format()</code> on a POSIXct date-time.
</p>



<h4>date_time_parse_complete()</h4>

<p><code>date_time_parse_complete()</code> is a parser for <em>complete</em> date-time strings,
like <code>"2019-01-01T00:00:00-05:00[America/New_York]"</code>. A complete date-time
string has both the time zone offset and full time zone name in the string,
which is the only way for the string itself to contain all of the information
required to unambiguously construct a zoned-time. Because of this,
<code>date_time_parse_complete()</code> requires both the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands to be
supplied in the <code>format</code> string.
</p>
<p>The default <code>format</code> used is <code>"%Y-%m-%dT%H:%M:%S%Ez[%Z]"</code>. This matches the
default result from calling <code>date_format()</code> on a POSIXct date-time.
Additionally, this format matches the de-facto standard extension to RFC 3339
for creating completely unambiguous date-times.
</p>



<h4>date_time_parse_abbrev()</h4>

<p><code>date_time_parse_abbrev()</code> is a parser for date-time strings containing only
a time zone abbreviation, like <code>"2019-01-01 00:00:00 EST"</code>. The time zone
abbreviation is not enough to identify the full time zone name that the
date-time belongs to, so the full time zone name must be supplied as the
<code>zone</code> argument. However, the time zone abbreviation can help with resolving
ambiguity around daylight saving time fallbacks.
</p>
<p>For <code>date_time_parse_abbrev()</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> must be supplied and is interpreted as
the time zone abbreviation rather than the full time zone name.
</p>
<p>If used, the <code style="white-space: pre;">&#8288;%z&#8288;</code> command must parse correctly, but its value will be
completely ignored.
</p>
<p>The default <code>format</code> used is <code>"%Y-%m-%d %H:%M:%S %Z"</code>. This matches the
default result from calling <code>print()</code> or <code>format(usetz = TRUE)</code> on a POSIXct
date-time.
</p>



<h4>date_time_parse_RFC_3339()</h4>

<p><code>date_time_parse_RFC_3339()</code> is a parser for date-time strings in the
extremely common date-time format outlined by <a href="https://datatracker.ietf.org/doc/html/rfc3339">RFC 3339</a>. This document outlines
a profile of the ISO 8601 format that is even more restrictive, but
corresponds to the most common formats that are likely to be used in
internet protocols (i.e. through APIs).
</p>
<p>In particular, this function is intended to parse the following three
formats:
</p>
<div class="sourceCode"><pre>2019-01-01T00:00:00Z
2019-01-01T00:00:00+0430
2019-01-01T00:00:00+04:30
</pre></div>
<p>This function defaults to parsing the first of these formats by using
a format string of <code>"%Y-%m-%dT%H:%M:%SZ"</code>.
</p>
<p>If your date-time strings use offsets from UTC rather than <code>"Z"</code>, then set
<code>offset</code> to one of the following:
</p>

<ul>
<li> <p><code>"%z"</code> if the offset is of the form <code>"+0430"</code>.
</p>
</li>
<li> <p><code>"%Ez"</code> if the offset is of the form <code>"+04:30"</code>.
</p>
</li></ul>

<p>The RFC 3339 standard allows for replacing the <code>"T"</code> with a <code>"t"</code> or a space
(<code>" "</code>). Set <code>separator</code> to adjust this as needed.
</p>
<p>The date-times returned by this function will always be in the UTC time zone.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>date_time_parse(
  x,
  zone,
  ...,
  format = NULL,
  locale = clock_locale(),
  nonexistent = NULL,
  ambiguous = NULL
)

date_time_parse_complete(x, ..., format = NULL, locale = clock_locale())

date_time_parse_abbrev(x, zone, ..., format = NULL, locale = clock_locale())

date_time_parse_RFC_3339(x, ..., separator = "T", offset = "Z")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-time-parse_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A full time zone name.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-time-parse_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
<tr><td><code id="date-time-parse_+3A_separator">separator</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The separator between the date and time components of the string. One of:
</p>

<ul>
<li> <p><code>"T"</code>
</p>
</li>
<li> <p><code>"t"</code>
</p>
</li>
<li> <p><code>" "</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="date-time-parse_+3A_offset">offset</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The format of the offset from UTC contained in the string. One of:
</p>

<ul>
<li> <p><code>"Z"</code>
</p>
</li>
<li> <p><code>"z"</code>
</p>
</li>
<li> <p><code>"%z"</code> to parse a numeric offset of the form <code>"+0430"</code>
</p>
</li>
<li> <p><code>"%Ez"</code> to parse a numeric offset of the form <code>"+04:30"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>date_time_parse_complete()</code> is given input that is length zero, all
<code>NA</code>s, or completely fails to parse, then no time zone will be able to be
determined. In that case, the result will use <code>"UTC"</code>.
</p>
<p>If you have strings with sub-second components, then these date-time parsers
are not appropriate for you. Remember that clock treats POSIXct as a second
precision type, so parsing a string with fractional seconds directly into a
POSIXct is ambiguous and undefined. Instead, fully parse the string,
including its fractional seconds, into a clock type that can handle it, such
as a naive-time with <code><a href="#topic+naive_time_parse">naive_time_parse()</a></code>, then round to seconds with
whatever rounding convention is appropriate for your use case, such as
<code><a href="#topic+time_point_floor">time_point_floor()</a></code>, and finally convert that to POSIXct with
<code><a href="#topic+as_date_time">as_date_time()</a></code>. This gives you complete control over how the fractional
seconds are handled when converting to POSIXct.
</p>


<h3>Value</h3>

<p>A POSIXct.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Parse with a known `zone`, even though that information isn't in the string
date_time_parse("2020-01-01 05:06:07", "America/New_York")

# Same time as above, except this is a completely unambiguous parse that
# doesn't require a `zone` argument, because the zone name and offset are
# both present in the string
date_time_parse_complete("2020-01-01T05:06:07-05:00[America/New_York]")

# Only day components
date_time_parse("2020-01-01", "America/New_York", format = "%Y-%m-%d")

# `date_time_parse()` may have issues with ambiguous times due to daylight
# saving time fallbacks. For example, there were two 1'oclock hours here:
x &lt;- date_time_parse("1970-10-25 00:59:59", "America/New_York")

# First (earliest) 1'oclock hour
add_seconds(x, 1)
# Second (latest) 1'oclock hour
add_seconds(x, 3601)

# If you try to parse this ambiguous time directly, you'll get an error:
ambiguous_time &lt;- "1970-10-25 01:00:00"
try(date_time_parse(ambiguous_time, "America/New_York"))

# Resolve it by specifying whether you'd like to use the
# `earliest` or `latest` of the two possible times
date_time_parse(ambiguous_time, "America/New_York", ambiguous = "earliest")
date_time_parse(ambiguous_time, "America/New_York", ambiguous = "latest")

# `date_time_parse_complete()` doesn't have these issues, as it requires
# that the offset and zone name are both in the string, which resolves
# the ambiguity
complete_times &lt;- c(
  "1970-10-25T01:00:00-04:00[America/New_York]",
  "1970-10-25T01:00:00-05:00[America/New_York]"
)
date_time_parse_complete(complete_times)

# `date_time_parse_abbrev()` also doesn't have these issues, since it
# uses the time zone abbreviation name to resolve the ambiguity
abbrev_times &lt;- c(
  "1970-10-25 01:00:00 EDT",
  "1970-10-25 01:00:00 EST"
)
date_time_parse_abbrev(abbrev_times, "America/New_York")

# ---------------------------------------------------------------------------
# RFC 3339

# Typical UTC format
x &lt;- "2019-01-01T00:01:02Z"
date_time_parse_RFC_3339(x)

# With a UTC offset containing a `:`
x &lt;- "2019-01-01T00:01:02+02:30"
date_time_parse_RFC_3339(x, offset = "%Ez")

# With a space between the date and time and no `:` in the offset
x &lt;- "2019-01-01 00:01:02+0230"
date_time_parse_RFC_3339(x, separator = " ", offset = "%z")

# ---------------------------------------------------------------------------
# Sub-second components

# If you have a string with sub-second components, but only require up to
# seconds, first parse them into a clock type that can handle sub-seconds to
# fully capture that information, then round using whatever convention is
# required for your use case before converting to a date-time.
x &lt;- c("2019-01-01T00:00:01.1", "2019-01-01T00:00:01.78")

x &lt;- naive_time_parse(x, precision = "millisecond")
x

time_point_floor(x, "second")
time_point_round(x, "second")

as_date_time(time_point_round(x, "second"), "America/New_York")
</code></pre>

<hr>
<h2 id='date-time-zone'>Get or set the time zone</h2><span id='topic+date-time-zone'></span><span id='topic+date_time_zone'></span><span id='topic+date_time_set_zone'></span>

<h3>Description</h3>


<ul>
<li> <p><code>date_time_zone()</code> gets the time zone.
</p>
</li>
<li> <p><code>date_time_set_zone()</code> sets the time zone. This retains the <em>underlying
duration</em>, but changes the <em>printed time</em> depending on the zone that is
chosen.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_time_zone(x)

date_time_set_zone(x, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-time-zone_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="date-time-zone_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A valid time zone to switch to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is only valid for date-times, as clock treats R's Date class as
a <em>naive</em> type, which always has a yet-to-be-specified time zone.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>date_time_zone()</code> returns a string containing the time zone.
</p>
</li>
<li> <p><code>date_time_set_zone()</code> returns <code>x</code> with an altered printed time. The
underlying duration is not changed.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

# Cannot set or get the zone of Date.
# clock assumes that Dates are naive types, like naive-time.
x &lt;- date_parse("2019-01-01")
try(date_time_zone(x))
try(date_time_set_zone(x, "America/New_York"))

x &lt;- date_time_parse("2019-01-02 01:30:00", "America/New_York")
x

date_time_zone(x)

# If it is 1:30am in New York, what time is it in Los Angeles?
# Same underlying duration, new printed time
date_time_set_zone(x, "America/Los_Angeles")

# If you want to retain the printed time, but change the underlying duration,
# convert to a naive-time to drop the time zone, then convert back to a
# date-time. Be aware that this requires that you handle daylight saving time
# irregularities with the `nonexistent` and `ambiguous` arguments to
# `as_date_time()`!
x %&gt;%
  as_naive_time() %&gt;%
  as_date_time("America/Los_Angeles")

y &lt;- date_time_parse("2021-03-28 03:30:00", "America/New_York")
y

y_nt &lt;- as_naive_time(y)
y_nt

# Helsinki had a daylight saving time gap where they jumped from
# 02:59:59 -&gt; 04:00:00
try(as_date_time(y_nt, "Europe/Helsinki"))

as_date_time(y_nt, "Europe/Helsinki", nonexistent = "roll-forward")
as_date_time(y_nt, "Europe/Helsinki", nonexistent = "roll-backward")
</code></pre>

<hr>
<h2 id='date-today'>Current date and date-time</h2><span id='topic+date-today'></span><span id='topic+date_today'></span><span id='topic+date_now'></span>

<h3>Description</h3>


<ul>
<li> <p><code>date_today()</code> returns the current date in the specified <code>zone</code> as a Date.
</p>
</li>
<li> <p><code>date_now()</code> returns the current date-time in the specified <code>zone</code> as a
POSIXct.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_today(zone)

date_now(zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-today_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A time zone to get the current time for.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>clock assumes that Date is a <em>naive</em> type, like naive-time. This means that
<code>date_today()</code> first looks up the current date-time in the specified <code>zone</code>,
then converts that to a Date, retaining the printed time while dropping any
information about that time zone.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>date_today()</code> a single Date.
</p>
</li>
<li> <p><code>date_now()</code> a single POSIXct.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Current date in the local time zone
date_today("")

# Current date in a specified time zone
date_today("Europe/London")

# Current date-time in that same time zone
date_now("Europe/London")
</code></pre>

<hr>
<h2 id='date-zone'>Get or set the time zone</h2><span id='topic+date-zone'></span><span id='topic+date_zone'></span><span id='topic+date_set_zone'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>

<ul>
<li> <p><code>date_zone()</code> is deprecated in favor of <code><a href="#topic+date_time_zone">date_time_zone()</a></code>.
</p>
</li>
<li> <p><code>date_set_zone()</code> is deprecated in favor of <code><a href="#topic+date_time_set_zone">date_time_set_zone()</a></code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>date_zone(x)

date_set_zone(x, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="date-zone_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="date-zone_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A valid time zone to switch to.</p>
</td></tr>
</table>

<hr>
<h2 id='duration_cast'>Cast a duration between precisions</h2><span id='topic+duration_cast'></span>

<h3>Description</h3>

<p>Casting is one way to change a duration's precision.
</p>
<p>Casting to a less precise precision will completely drop information that
is more precise than the precision that you are casting to. It does so
in a way that makes it round towards zero.
</p>
<p>Casting to a more precise precision is done through a multiplication by
a conversion factor between the current precision and the new precision.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duration_cast(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration_cast_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration]&#8288;</code>
</p>
<p>A duration.</p>
</td></tr>
<tr><td><code id="duration_cast_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>When you want to change to a less precise precision, you often want
<code><a href="#topic+duration_floor">duration_floor()</a></code> instead of <code>duration_cast()</code>, as that rounds towards
negative infinity, which is generally the desired behavior when working with
time points (especially ones pre-1970, which are stored as negative
durations).
</p>


<h3>Value</h3>

<p><code>x</code> cast to the new <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- duration_seconds(c(86401, -86401))

# Casting rounds towards 0
cast &lt;- duration_cast(x, "day")
cast

# Flooring rounds towards negative infinity
floor &lt;- duration_floor(x, "day")
floor

# Flooring is generally more useful when working with time points,
# note that the cast ends up rounding the pre-1970 date up to the next
# day, while the post-1970 date is rounded down.
as_sys_time(x)
as_sys_time(cast)
as_sys_time(floor)

# Casting to a more precise precision
duration_cast(x, "millisecond")
</code></pre>

<hr>
<h2 id='duration_precision'>Precision: duration</h2><span id='topic+duration_precision'></span>

<h3>Description</h3>

<p><code>duration_precision()</code> extracts the precision from a duration object. It
returns the precision as a single string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duration_precision(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration_precision_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration]&#8288;</code>
</p>
<p>A duration.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single string holding the precision of the duration.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>duration_precision(duration_seconds(1))
duration_precision(duration_nanoseconds(2))
duration_precision(duration_quarters(1:5))
</code></pre>

<hr>
<h2 id='duration_spanning_seq'>Spanning sequence: duration</h2><span id='topic+duration_spanning_seq'></span>

<h3>Description</h3>

<p><code>duration_spanning_seq()</code> generates a regular sequence along the span of <code>x</code>,
i.e. along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duration_spanning_seq(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration_spanning_seq_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration]&#8288;</code>
</p>
<p>A duration vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing values are automatically removed before the sequence is generated.
</p>
<p>If you need more precise sequence generation, call <code><a href="base.html#topic+range">range()</a></code> and <code><a href="base.html#topic+seq">seq()</a></code>
directly.
</p>


<h3>Value</h3>

<p>A sequence along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- duration_days(c(1, 5, 2))
duration_spanning_seq(x)

# Missing values are removed before the sequence is created
x &lt;- vctrs::vec_c(NA, x, NA)
duration_spanning_seq(x)
</code></pre>

<hr>
<h2 id='duration-arithmetic'>Arithmetic: duration</h2><span id='topic+duration-arithmetic'></span><span id='topic+add_years.clock_duration'></span><span id='topic+add_quarters.clock_duration'></span><span id='topic+add_months.clock_duration'></span><span id='topic+add_weeks.clock_duration'></span><span id='topic+add_days.clock_duration'></span><span id='topic+add_hours.clock_duration'></span><span id='topic+add_minutes.clock_duration'></span><span id='topic+add_seconds.clock_duration'></span><span id='topic+add_milliseconds.clock_duration'></span><span id='topic+add_microseconds.clock_duration'></span><span id='topic+add_nanoseconds.clock_duration'></span>

<h3>Description</h3>

<p>These are duration methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li>
<li> <p><code>add_months()</code>
</p>
</li>
<li> <p><code>add_weeks()</code>
</p>
</li>
<li> <p><code>add_days()</code>
</p>
</li>
<li> <p><code>add_hours()</code>
</p>
</li>
<li> <p><code>add_minutes()</code>
</p>
</li>
<li> <p><code>add_seconds()</code>
</p>
</li>
<li> <p><code>add_milliseconds()</code>
</p>
</li>
<li> <p><code>add_microseconds()</code>
</p>
</li>
<li> <p><code>add_nanoseconds()</code>
</p>
</li></ul>

<p>When adding to a duration using one of these functions, a second duration
is created based on the function name and <code>n</code>. The two durations are then
added together, and the precision of the result is determined as the
<em>more precise precision</em> of the two durations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_duration'
add_years(x, n, ...)

## S3 method for class 'clock_duration'
add_quarters(x, n, ...)

## S3 method for class 'clock_duration'
add_months(x, n, ...)

## S3 method for class 'clock_duration'
add_weeks(x, n, ...)

## S3 method for class 'clock_duration'
add_days(x, n, ...)

## S3 method for class 'clock_duration'
add_hours(x, n, ...)

## S3 method for class 'clock_duration'
add_minutes(x, n, ...)

## S3 method for class 'clock_duration'
add_seconds(x, n, ...)

## S3 method for class 'clock_duration'
add_milliseconds(x, n, ...)

## S3 method for class 'clock_duration'
add_microseconds(x, n, ...)

## S3 method for class 'clock_duration'
add_nanoseconds(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration]&#8288;</code>
</p>
<p>A duration vector.</p>
</td></tr>
<tr><td><code id="duration-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="duration-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can add calendrical durations to other calendrical durations,
and chronological durations to other chronological durations, but you can't
add a chronological duration to a calendrical duration
(such as adding days and months). For more information, see the
documentation on the <a href="#topic+duration-helper">duration helper</a> page.
</p>
<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic, possibly with a more precise
precision.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- duration_seconds(5)

# Addition in the same precision
add_seconds(x, 1:10)

# Addition with days, defined as 86400 seconds
add_days(x, 1)

# Similarly, if you start with days and add seconds, you get the common
# precision of the two back, which is seconds
y &lt;- duration_days(1)
add_seconds(y, 5)

# But you can't add a chronological duration (days) and
# a calendrical duration (months)
try(add_months(y, 1))

# You can add years to a duration of months, which adds
# an additional 12 months / year
z &lt;- duration_months(5)
add_years(z, 1)
</code></pre>

<hr>
<h2 id='duration-helper'>Construct a duration</h2><span id='topic+duration-helper'></span><span id='topic+duration_years'></span><span id='topic+duration_quarters'></span><span id='topic+duration_months'></span><span id='topic+duration_weeks'></span><span id='topic+duration_days'></span><span id='topic+duration_hours'></span><span id='topic+duration_minutes'></span><span id='topic+duration_seconds'></span><span id='topic+duration_milliseconds'></span><span id='topic+duration_microseconds'></span><span id='topic+duration_nanoseconds'></span>

<h3>Description</h3>

<p>These helpers construct durations of the specified precision. Durations
represent units of time.
</p>
<p>Durations are separated into two categories:
</p>
<p><strong>Calendrical</strong>
</p>

<ul>
<li><p> year
</p>
</li>
<li><p> quarter
</p>
</li>
<li><p> month
</p>
</li></ul>

<p><strong>Chronological</strong>
</p>

<ul>
<li><p> week
</p>
</li>
<li><p> day
</p>
</li>
<li><p> hour
</p>
</li>
<li><p> minute
</p>
</li>
<li><p> second
</p>
</li>
<li><p> millisecond
</p>
</li>
<li><p> microsecond
</p>
</li>
<li><p> nanosecond
</p>
</li></ul>

<p>Calendrical durations are generally used when manipulating calendar types,
like year-month-day. Chronological durations are generally used when
working with time points, like sys-time or naive-time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duration_years(n = integer())

duration_quarters(n = integer())

duration_months(n = integer())

duration_weeks(n = integer())

duration_days(n = integer())

duration_hours(n = integer())

duration_minutes(n = integer())

duration_seconds(n = integer())

duration_milliseconds(n = integer())

duration_microseconds(n = integer())

duration_nanoseconds(n = integer())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration-helper_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The number of units of time to use when creating the duration.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A duration of the specified precision.
</p>


<h3>Internal Representation</h3>

<p>Durations are internally represented as an integer number of &quot;ticks&quot; along
with a ratio describing how it converts to a number of seconds. The
following duration ratios are used in clock:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;1 year == 31556952 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 quarter == 7889238 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 month == 2629746 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 week == 604800 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 day == 86400 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 hour == 3600 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 minute == 60 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 second == 1 second&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 millisecond == 1 / 1000 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 microsecond == 1 / 1000000 seconds&#8288;</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;1 nanosecond == 1 / 1000000000 seconds&#8288;</code>
</p>
</li></ul>

<p>A duration of 1 year is defined to correspond to the
average length of a proleptic Gregorian year, i.e. 365.2425 days.
</p>
<p>A duration of 1 month is defined as exactly 1/12 of a year.
</p>
<p>A duration of 1 quarter is defined as exactly 1/4 of a year.
</p>
<p>A duration of 1 week is defined as exactly 7 days.
</p>
<p>These conversions come into play when doing operations like adding or
flooring durations. Generally, you add two calendrical durations together
to get a new calendrical duration, rather than adding a calendrical and
a chronological duration together. The one exception is <code><a href="#topic+duration_cast">duration_cast()</a></code>,
which can cast durations to any other precision, with a potential loss of
information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>duration_years(1:5)
duration_nanoseconds(1:5)
</code></pre>

<hr>
<h2 id='duration-rounding'>Duration rounding</h2><span id='topic+duration-rounding'></span><span id='topic+duration_floor'></span><span id='topic+duration_ceiling'></span><span id='topic+duration_round'></span>

<h3>Description</h3>


<ul>
<li> <p><code>duration_floor()</code> rounds a duration down to a multiple of the specified
<code>precision</code>.
</p>
</li>
<li> <p><code>duration_ceiling()</code> rounds a duration up to a multiple of the specified
<code>precision</code>.
</p>
</li>
<li> <p><code>duration_round()</code> rounds up or down depending on what is closer,
rounding up on ties.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>duration_floor(x, precision, ..., n = 1L)

duration_ceiling(x, precision, ..., n = 1L)

duration_round(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duration-rounding_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration]&#8288;</code>
</p>
<p>A duration.</p>
</td></tr>
<tr><td><code id="duration-rounding_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision. One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="duration-rounding_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="duration-rounding_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A positive integer specifying the multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can floor calendrical durations to other calendrical durations, and
chronological durations to other chronological durations, but you can't
floor a chronological duration to a calendrical duration (such as flooring
from day to month). For more information, see the documentation on the
<a href="#topic+duration-helper">duration helper</a> page.
</p>


<h3>Value</h3>

<p><code>x</code> rounded to the <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- duration_seconds(c(86399, 86401))

duration_floor(x, "day")
duration_ceiling(x, "day")

# Can't floor from a chronological duration (seconds)
# to a calendrical duration (months)
try(duration_floor(x, "month"))

# Every 2 days, using an origin of day 0
y &lt;- duration_seconds(c(0, 86400, 86400 * 2, 86400 * 3))
duration_floor(y, "day", n = 2)

# Shifting the origin to be day 1
origin &lt;- duration_days(1)
duration_floor(y - origin, "day", n = 2) + origin

# Rounding will round ties up
half_day &lt;- 86400 / 2
half_day_durations &lt;- duration_seconds(c(half_day - 1, half_day, half_day + 1))
duration_round(half_day_durations, "day")

# With larger units
x &lt;- duration_months(c(0, 15, 24))
duration_floor(x, "year")
duration_floor(x, "quarter")
</code></pre>

<hr>
<h2 id='format.clock_zoned_time'>Formatting: zoned-time</h2><span id='topic+format.clock_zoned_time'></span>

<h3>Description</h3>

<p>This is a zoned-time method for the <code><a href="base.html#topic+format">format()</a></code> generic.
</p>
<p>This function allows you to format a zoned-time using a flexible <code>format</code>
string.
</p>
<p>If <code>format</code> is <code>NULL</code>, a default format of <code>"%Y-%m-%dT%H:%M:%S%Ez[%Z]"</code> is
used. This matches the default format that <code><a href="#topic+zoned_time_parse_complete">zoned_time_parse_complete()</a></code>
parses. Additionally, this format matches the de-facto standard extension to
RFC 3339 for creating completely unambiguous date-times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_zoned_time'
format(x, ..., format = NULL, locale = clock_locale(), abbreviate_zone = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.clock_zoned_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_zoned_time]&#8288;</code>
</p>
<p>A zoned-time.</p>
</td></tr>
<tr><td><code id="format.clock_zoned_time_+3A_...">...</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[dots]&#8288;</code>
</p>
<p>Not used, but no error will be thrown if not empty to remain compatible
with usage of the <code>format()</code> generic.</p>
</td></tr>
<tr><td><code id="format.clock_zoned_time_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>If <code>NULL</code>, a default format is used, which depends on the type of the
input.
</p>
<p>Otherwise, a format string which is a combination of:
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The year divided by 100 using floored division. If the result
is a single decimal digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the result is a single
digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. If the result is less than four
digits it is left-padded with <code>0</code> to four digits.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s abbreviated month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%B&#8288;</code>: The <code>locale</code>'s full month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>01</code>. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>: The day of month as a decimal number. If the result is a single
decimal digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>: The <code>locale</code>'s abbreviated weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. If the
result is a single digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. If the result is less
than four digits it is left-padded with <code>0</code> to four digits.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. If the result
is a single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>001</code>. If the
result is less than three digits, it is left-padded with <code>0</code> to three
digits.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minute as a decimal number. If the result is a single digit, it
is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: Seconds as a decimal number. Fractional seconds are printed at the
precision of the input. The character for the decimal point is localized
according to <code>locale</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Nearly equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>, but seconds are always printed
at second precision.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the ISO 8601 format. For example <code>-0430</code>
refers to 4 hours 30 minutes behind UTC. If the offset is zero, <code>+0000</code> is
used. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> inserts a <code>:</code> between the hour and
minutes, like <code>-04:30</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name. If <code>abbreviate_zone</code> is <code>TRUE</code>, the time
zone abbreviation.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Similar to, but not exactly the
same as, <code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: A newline character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: A horizontal-tab character.
</p>
</li></ul>
</td></tr>
<tr><td><code id="format.clock_zoned_time_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
<tr><td><code id="format.clock_zoned_time_+3A_abbreviate_zone">abbreviate_zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> returns an abbreviated time zone name.
</p>
<p>If <code>FALSE</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> returns the full time zone name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of the formatted input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1, 1)
x &lt;- as_zoned_time(as_naive_time(x), "America/New_York")

format(x)
format(x, format = "%B %d, %Y")
format(x, format = "%B %d, %Y", locale = clock_locale("fr"))
</code></pre>

<hr>
<h2 id='is_duration'>Is <code>x</code> a duration?</h2><span id='topic+is_duration'></span>

<h3>Description</h3>

<p>This function determines if the input is a duration object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_duration(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_duration_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>x</code> inherits from <code>"clock_duration"</code>, otherwise <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_duration(1)
is_duration(duration_days(1))
</code></pre>

<hr>
<h2 id='is_iso_year_week_day'>Is <code>x</code> a iso-year-week-day?</h2><span id='topic+is_iso_year_week_day'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a iso-year-week-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_iso_year_week_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_iso_year_week_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_iso_year_week_day"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_iso_year_week_day(iso_year_week_day(2019))
</code></pre>

<hr>
<h2 id='is_naive_time'>Is <code>x</code> a naive-time?</h2><span id='topic+is_naive_time'></span>

<h3>Description</h3>

<p>This function determines if the input is a naive-time object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_naive_time(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_naive_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>x</code> inherits from <code>"clock_naive_time"</code>, otherwise <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_naive_time(1)
is_naive_time(as_naive_time(duration_days(1)))
</code></pre>

<hr>
<h2 id='is_sys_time'>Is <code>x</code> a sys-time?</h2><span id='topic+is_sys_time'></span>

<h3>Description</h3>

<p>This function determines if the input is a sys-time object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_sys_time(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_sys_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>x</code> inherits from <code>"clock_sys_time"</code>, otherwise <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_sys_time(1)
is_sys_time(as_sys_time(duration_days(1)))
</code></pre>

<hr>
<h2 id='is_weekday'>Is <code>x</code> a weekday?</h2><span id='topic+is_weekday'></span>

<h3>Description</h3>

<p>This function determines if the input is a weekday object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_weekday(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_weekday_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>x</code> inherits from <code>"clock_weekday"</code>, otherwise <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_weekday(1)
is_weekday(weekday(1))
</code></pre>

<hr>
<h2 id='is_year_day'>Is <code>x</code> a year-day?</h2><span id='topic+is_year_day'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a year-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_year_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_year_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_year_day"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_year_day(year_day(2019))
</code></pre>

<hr>
<h2 id='is_year_month_day'>Is <code>x</code> a year-month-day?</h2><span id='topic+is_year_month_day'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a year-month-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_year_month_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_year_month_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_year_month_day"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_year_month_day(year_month_day(2019))
</code></pre>

<hr>
<h2 id='is_year_month_weekday'>Is <code>x</code> a year-month-weekday?</h2><span id='topic+is_year_month_weekday'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a year-month-weekday.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_year_month_weekday(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_year_month_weekday_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_year_month_weekday"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_year_month_weekday(year_month_weekday(2019))
</code></pre>

<hr>
<h2 id='is_year_quarter_day'>Is <code>x</code> a year-quarter-day?</h2><span id='topic+is_year_quarter_day'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a year-quarter-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_year_quarter_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_year_quarter_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_year_quarter_day"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_year_quarter_day(year_quarter_day(2019))
</code></pre>

<hr>
<h2 id='is_year_week_day'>Is <code>x</code> a year-week-day?</h2><span id='topic+is_year_week_day'></span>

<h3>Description</h3>

<p>Check if <code>x</code> is a year-week-day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_year_week_day(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_year_week_day_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if <code>x</code> inherits from <code>"clock_year_week_day"</code>,
otherwise returns <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_year_week_day(year_week_day(2019))
</code></pre>

<hr>
<h2 id='is_zoned_time'>Is <code>x</code> a zoned-time?</h2><span id='topic+is_zoned_time'></span>

<h3>Description</h3>

<p>This function determines if the input is a zoned-time object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_zoned_time(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_zoned_time_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[object]&#8288;</code>
</p>
<p>An object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>x</code> inherits from <code>"clock_zoned_time"</code>, otherwise <code>FALSE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_zoned_time(1)
is_zoned_time(zoned_time_now("America/New_York"))
</code></pre>

<hr>
<h2 id='iso_year_week_day'>Calendar: iso-year-week-day</h2><span id='topic+iso_year_week_day'></span>

<h3>Description</h3>

<p><code>iso_year_week_day()</code> constructs a calendar from the ISO year, week number,
and week day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iso_year_week_day(
  year,
  week = NULL,
  day = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso_year_week_day_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The ISO year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_week">week</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last" / NULL]&#8288;</code>
</p>
<p>The ISO week. Values <code style="white-space: pre;">&#8288;[1, 53]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last week of the ISO year is returned.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The day of the week. Values <code style="white-space: pre;">&#8288;[1, 7]&#8288;</code> are allowed, with 1 = Monday
and 7 = Sunday, in accordance with the ISO specifications.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="iso_year_week_day_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A iso-year-week-day calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year-week
x &lt;- iso_year_week_day(2019:2025, 1)
x

# 2nd day of the first ISO week in multiple years
iso_days &lt;- set_day(x, clock_iso_weekdays$tuesday)
iso_days

# What year-month-day is this?
as_year_month_day(iso_days)
</code></pre>

<hr>
<h2 id='iso-year-week-day-arithmetic'>Arithmetic: iso-year-week-day</h2><span id='topic+iso-year-week-day-arithmetic'></span><span id='topic+add_years.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>These are iso-year-week-day methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li></ul>

<p>You cannot add weeks or days to an iso-year-week-day calendar. Adding
days is much more efficiently done by converting to a time point first
by using <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or <code><a href="#topic+as_sys_time">as_sys_time()</a></code>. Adding weeks is equally
as efficient as adding 7 days. Additionally, adding weeks to an invalid
iso-year-week object containing <code>iso_year_week_day(2019, 53)</code> would be
undefined, as the 53rd ISO week of 2019 doesn't exist to begin with.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
add_years(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- iso_year_week_day(2019, 1, 1)
add_years(x, 1:2)
</code></pre>

<hr>
<h2 id='iso-year-week-day-boundary'>Boundaries: iso-year-week-day</h2><span id='topic+iso-year-week-day-boundary'></span><span id='topic+calendar_start.clock_iso_year_week_day'></span><span id='topic+calendar_end.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is an iso-year-week-day method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
calendar_start(x, precision)

## S3 method for class 'clock_iso_year_week_day'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- iso_year_week_day(2019:2020, 5, 6, 10)
x

# Compute the last moment of the last iso week of the year
calendar_end(x, "year")

# Compare that to just setting the week to `"last"`,
# which doesn't affect the other components
set_week(x, "last")
</code></pre>

<hr>
<h2 id='iso-year-week-day-count-between'>Counting: iso-year-week-day</h2><span id='topic+iso-year-week-day-count-between'></span><span id='topic+calendar_count_between.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is an iso-year-week-day method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code>
generic. It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code>
(i.e., the number of ISO years).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-count-between_+3A_start">start</code>, <code id="iso-year-week-day-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A pair of iso-year-week-day vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="iso-year-week-day-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute the number of whole ISO years between two dates
x &lt;- iso_year_week_day(2001, 1, 2)
y &lt;- iso_year_week_day(2021, 1, c(1, 3))
calendar_count_between(x, y, "year")
</code></pre>

<hr>
<h2 id='iso-year-week-day-getters'>Getters: iso-year-week-day</h2><span id='topic+iso-year-week-day-getters'></span><span id='topic+get_year.clock_iso_year_week_day'></span><span id='topic+get_week.clock_iso_year_week_day'></span><span id='topic+get_day.clock_iso_year_week_day'></span><span id='topic+get_hour.clock_iso_year_week_day'></span><span id='topic+get_minute.clock_iso_year_week_day'></span><span id='topic+get_second.clock_iso_year_week_day'></span><span id='topic+get_millisecond.clock_iso_year_week_day'></span><span id='topic+get_microsecond.clock_iso_year_week_day'></span><span id='topic+get_nanosecond.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>These are iso-year-week-day methods for the
<a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the ISO year. Note that this can differ from the
Gregorian year.
</p>
</li>
<li> <p><code>get_week()</code> returns the ISO week of the current ISO year.
</p>
</li>
<li> <p><code>get_day()</code> returns a value between 1-7 indicating the weekday of the
current ISO week, where 1 = Monday and 7 = Sunday, in line with the
ISO standard.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
get_year(x)

## S3 method for class 'clock_iso_year_week_day'
get_week(x)

## S3 method for class 'clock_iso_year_week_day'
get_day(x)

## S3 method for class 'clock_iso_year_week_day'
get_hour(x)

## S3 method for class 'clock_iso_year_week_day'
get_minute(x)

## S3 method for class 'clock_iso_year_week_day'
get_second(x)

## S3 method for class 'clock_iso_year_week_day'
get_millisecond(x)

## S3 method for class 'clock_iso_year_week_day'
get_microsecond(x)

## S3 method for class 'clock_iso_year_week_day'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- iso_year_week_day(2019, 50:52, 1:3)
x

# Get the ISO week
get_week(x)

# Gets the weekday, 1 = Monday, 7 = Sunday
get_day(x)

# Note that the ISO year can differ from the Gregorian year
iso &lt;- iso_year_week_day(2019, 1, 1)
ymd &lt;- as_year_month_day(iso)

get_year(iso)
get_year(ymd)
</code></pre>

<hr>
<h2 id='iso-year-week-day-group'>Grouping: iso-year-week-day</h2><span id='topic+iso-year-week-day-group'></span><span id='topic+calendar_group.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is a iso-year-week-day method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a iso-year-week-day object can be done at any precision, as
long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="iso-year-week-day-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- iso_year_week_day(2019, 1:52)

# Group by 3 ISO weeks
calendar_group(x, "week", n = 3)

y &lt;- iso_year_week_day(2000:2020, 1, 1)

# Group by 2 ISO years
calendar_group(y, "year", n = 2)
</code></pre>

<hr>
<h2 id='iso-year-week-day-narrow'>Narrow: iso-year-week-day</h2><span id='topic+iso-year-week-day-narrow'></span><span id='topic+calendar_narrow.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is a iso-year-week-day method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a iso-year-week-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Day precision
x &lt;- iso_year_week_day(2019, 1, 5)
x

# Narrowed to week precision
calendar_narrow(x, "week")
</code></pre>

<hr>
<h2 id='iso-year-week-day-setters'>Setters: iso-year-week-day</h2><span id='topic+iso-year-week-day-setters'></span><span id='topic+set_year.clock_iso_year_week_day'></span><span id='topic+set_week.clock_iso_year_week_day'></span><span id='topic+set_day.clock_iso_year_week_day'></span><span id='topic+set_hour.clock_iso_year_week_day'></span><span id='topic+set_minute.clock_iso_year_week_day'></span><span id='topic+set_second.clock_iso_year_week_day'></span><span id='topic+set_millisecond.clock_iso_year_week_day'></span><span id='topic+set_microsecond.clock_iso_year_week_day'></span><span id='topic+set_nanosecond.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>These are iso-year-week-day methods for the
<a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the ISO year.
</p>
</li>
<li> <p><code>set_week()</code> sets the ISO week of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 53]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the week. Valid values are in the range of
<code style="white-space: pre;">&#8288;[1, 7]&#8288;</code>, with 1 = Monday, and 7 = Sunday.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
set_year(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_week(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_day(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_hour(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_minute(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_second(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_millisecond(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_microsecond(x, value, ...)

## S3 method for class 'clock_iso_year_week_day'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_week()</code>, this can also be <code>"last"</code> to adjust to the last
week of the current ISO year.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year precision vector
x &lt;- iso_year_week_day(2019:2023)

# Promote to week precision by setting the week
# (Note that some ISO weeks have 52 weeks, and others have 53)
x &lt;- set_week(x, "last")
x

# Set to an invalid week
invalid &lt;- set_week(x, 53)
invalid

# Here are the invalid ones (they only have 52 weeks)
invalid[invalid_detect(invalid)]

# Resolve the invalid dates by choosing the previous/next valid moment
invalid_resolve(invalid, invalid = "previous")
invalid_resolve(invalid, invalid = "next")
</code></pre>

<hr>
<h2 id='iso-year-week-day-widen'>Widen: iso-year-week-day</h2><span id='topic+iso-year-week-day-widen'></span><span id='topic+calendar_widen.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is a iso-year-week-day method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a iso-year-week-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iso-year-week-day-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day]&#8288;</code>
</p>
<p>A iso-year-week-day vector.</p>
</td></tr>
<tr><td><code id="iso-year-week-day-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Week precision
x &lt;- iso_year_week_day(2019, 1)
x

# Widen to day precision
# In the ISO calendar, the first day of the week is a Monday
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec
</code></pre>

<hr>
<h2 id='naive_time_info'>Info: naive-time</h2><span id='topic+naive_time_info'></span>

<h3>Description</h3>

<p><code>naive_time_info()</code> retrieves a set of low-level information generally not
required for most date-time manipulations. It is used implicitly
by <code>as_zoned_time()</code> when converting from a naive-time.
</p>
<p>It returns a data frame with the following columns:
</p>

<ul>
<li> <p><code>type</code>: A character vector containing one of:
</p>

<ul>
<li> <p><code>"unique"</code>: The naive-time maps uniquely to a zoned-time that can be
created with <code>zone</code>.
</p>
</li>
<li> <p><code>"nonexistent"</code>: The naive-time does not exist as a zoned-time that can
be created with <code>zone</code>.
</p>
</li>
<li> <p><code>"ambiguous"</code>: The naive-time exists twice as a zoned-time that can be
created with <code>zone</code>.
</p>
</li></ul>

</li>
<li> <p><code>first</code>: A <code><a href="#topic+sys_time_info">sys_time_info()</a></code> data frame.
</p>
</li>
<li> <p><code>second</code>: A <code><a href="#topic+sys_time_info">sys_time_info()</a></code> data frame.
</p>
</li></ul>



<h4>type == &quot;unique&quot;</h4>


<ul>
<li> <p><code>first</code> will be filled out with sys-info representing daylight saving time
information for that time point in <code>zone</code>.
</p>
</li>
<li> <p><code>second</code> will contain only <code>NA</code> values, as there is no ambiguity to
represent information for.
</p>
</li></ul>




<h4>type == &quot;nonexistent&quot;</h4>


<ul>
<li> <p><code>first</code> will be filled out with the sys-info that ends just prior to <code>x</code>.
</p>
</li>
<li> <p><code>second</code> will be filled out with the sys-info that begins just after <code>x</code>.
</p>
</li></ul>




<h4>type == &quot;ambiguous&quot;</h4>


<ul>
<li> <p><code>first</code> will be filled out with the sys-info that ends just after <code>x</code>.
</p>
</li>
<li> <p><code>second</code> will be filled out with the sys-info that starts just before <code>x</code>.
</p>
</li></ul>




<h3>Usage</h3>

<pre><code class='language-R'>naive_time_info(x, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="naive_time_info_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_naive_time]&#8288;</code>
</p>
<p>A naive-time.</p>
</td></tr>
<tr><td><code id="naive_time_info_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A valid time zone name.
</p>
<p>Unlike most functions in clock, in <code>naive_time_info()</code> <code>zone</code> is vectorized
and is recycled against <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the tibble package is installed, it is recommended to convert the output
to a tibble with <code>as_tibble()</code>, as that will print the df-cols much nicer.
</p>


<h3>Value</h3>

<p>A data frame of low level information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(vctrs)

x &lt;- year_month_day(1970, 04, 26, 02, 30, 00)
x &lt;- as_naive_time(x)

# Maps uniquely to a time in London
naive_time_info(x, "Europe/London")

# This naive-time never existed in New York!
# A DST gap jumped the time from 01:59:59 -&gt; 03:00:00,
# skipping the 2 o'clock hour
zone &lt;- "America/New_York"
info &lt;- naive_time_info(x, zone)
info

# You can recreate various `nonexistent` strategies with this info
as_zoned_time(x, zone, nonexistent = "roll-forward")
as_zoned_time(info$first$end, zone)

as_zoned_time(x, zone, nonexistent = "roll-backward")
as_zoned_time(info$first$end - 1, zone)

as_zoned_time(x, zone, nonexistent = "shift-forward")
as_zoned_time(as_sys_time(x) - info$first$offset, zone)

as_zoned_time(x, zone, nonexistent = "shift-backward")
as_zoned_time(as_sys_time(x) - info$second$offset, zone)

# ---------------------------------------------------------------------------
# Normalizing to UTC

# Imagine you had the following printed times, and knowledge that they
# are to be interpreted as in the corresponding time zones
df &lt;- data_frame(
  x = c("2020-01-05 02:30:00", "2020-06-03 12:20:05"),
  zone = c("America/Los_Angeles", "Europe/London")
)

# The times are assumed to be naive-times, i.e. if you lived in the `zone`
# at the moment the time was recorded, then you would have seen that time
# printed on the clock. Currently, these are strings. To convert them to
# a time based type, you'll have to acknowledge that R only lets you have
# 1 time zone in a vector of date-times at a time. So you'll need to
# normalize these naive-times. The easiest thing to normalize them to
# is UTC.
df$naive &lt;- naive_time_parse(df$x)

# Get info about the naive times using a vector of zones
info &lt;- naive_time_info(df$naive, df$zone)
info

# We'll assume that some system generated these naive-times with no
# chance of them ever being nonexistent or ambiguous. So now all we have
# to do is use the offset to convert the naive-time to a sys-time. The
# relationship used is:
# offset = naive_time - sys_time
df$sys &lt;- as_sys_time(df$naive) - info$first$offset
df

# At this point, both times are in UTC. From here, you can convert them
# both to either America/Los_Angeles or Europe/London as required.
as_zoned_time(df$sys, "America/Los_Angeles")
as_zoned_time(df$sys, "Europe/London")
</code></pre>

<hr>
<h2 id='naive_time_parse'>Parsing: naive-time</h2><span id='topic+naive_time_parse'></span>

<h3>Description</h3>

<p><code>naive_time_parse()</code> is a parser into a naive-time.
</p>
<p><code>naive_time_parse()</code> is useful when you have date-time strings like
<code>"2020-01-01T01:04:30"</code>. If there is no attached UTC offset or time zone
name, then parsing this string as a naive-time is your best option. If
you know that this string should be interpreted in a specific time zone,
parse as a naive-time, then use <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code>.
</p>
<p>The default options assume that <code>x</code> should be parsed at second precision,
using a <code>format</code> string of <code>"%Y-%m-%dT%H:%M:%S"</code>. This matches the default
result from calling <code>format()</code> on a naive-time.
</p>
<p><em><code>naive_time_parse()</code> ignores both the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands.</em>
</p>
<p>If your date-time strings contain a full time zone name and a UTC offset, use
<code><a href="#topic+zoned_time_parse_complete">zoned_time_parse_complete()</a></code>. If they contain a time zone abbreviation, use
<code><a href="#topic+zoned_time_parse_abbrev">zoned_time_parse_abbrev()</a></code>.
</p>
<p>If your date-time strings contain a UTC offset, but not a full time zone
name, use <code><a href="#topic+sys_time_parse">sys_time_parse()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>naive_time_parse(
  x,
  ...,
  format = NULL,
  precision = "second",
  locale = clock_locale()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="naive_time_parse_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="naive_time_parse_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="naive_time_parse_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="naive_time_parse_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision for the resulting time point. One of:
</p>

<ul>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>

<p>Setting the <code>precision</code> determines how much information <code style="white-space: pre;">&#8288;%S&#8288;</code> attempts
to parse.</p>
</td></tr>
<tr><td><code id="naive_time_parse_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A naive-time.
</p>


<h3>Full Precision Parsing</h3>

<p>It is highly recommended to parse all of the information in the date-time
string into a type at least as precise as the string. For example, if your
string has fractional seconds, but you only require seconds, specify a
sub-second <code>precision</code>, then round to seconds manually using whatever
convention is appropriate for your use case. Parsing such a string directly
into a second precision result is ambiguous and undefined, and is unlikely to
work as you might expect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>naive_time_parse("2020-01-01T05:06:07")

# Day precision
naive_time_parse("2020-01-01", precision = "day")

# Nanosecond precision, but using a day based format
naive_time_parse("2020-01-01", format = "%Y-%m-%d", precision = "nanosecond")

# Remember that the `%z` and `%Z` commands are ignored entirely!
naive_time_parse(
  "2020-01-01 -4000 America/New_York",
  format = "%Y-%m-%d %z %Z"
)

# ---------------------------------------------------------------------------
# Fractional seconds and POSIXct

# If you have a string with fractional seconds and want to convert it to
# a POSIXct, remember that clock treats POSIXct as a second precision type.
# Ideally, you'd use a clock type that can support fractional seconds, but
# if you really want to parse it into a POSIXct, the correct way to do so
# is to parse the full fractional time point with the correct `precision`,
# then round to seconds using whatever convention you require, and finally
# convert that to POSIXct.
x &lt;- c("2020-01-01T00:00:00.123", "2020-01-01T00:00:00.555")

# First, parse string with full precision
x &lt;- naive_time_parse(x, precision = "millisecond")
x

# Then round to second with a floor, ceiling, or round to nearest
time_point_floor(x, "second")
time_point_round(x, "second")

# Finally, convert to POSIXct
as_date_time(time_point_round(x, "second"), zone = "UTC")
</code></pre>

<hr>
<h2 id='posixt-arithmetic'>Arithmetic: date-time</h2><span id='topic+posixt-arithmetic'></span><span id='topic+add_years.POSIXt'></span><span id='topic+add_quarters.POSIXt'></span><span id='topic+add_months.POSIXt'></span><span id='topic+add_weeks.POSIXt'></span><span id='topic+add_days.POSIXt'></span><span id='topic+add_hours.POSIXt'></span><span id='topic+add_minutes.POSIXt'></span><span id='topic+add_seconds.POSIXt'></span>

<h3>Description</h3>

<p>These are POSIXct/POSIXlt methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>
<p>Calendrical based arithmetic:
</p>
<p>These functions convert to a naive-time, then to a year-month-day, perform
the arithmetic, then convert back to a date-time.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li>
<li> <p><code>add_months()</code>
</p>
</li></ul>

<p>Naive-time based arithmetic:
</p>
<p>These functions convert to a naive-time, perform the arithmetic, then
convert back to a date-time.
</p>

<ul>
<li> <p><code>add_weeks()</code>
</p>
</li>
<li> <p><code>add_days()</code>
</p>
</li></ul>

<p>Sys-time based arithmetic:
</p>
<p>These functions convert to a sys-time, perform the arithmetic, then
convert back to a date-time.
</p>

<ul>
<li> <p><code>add_hours()</code>
</p>
</li>
<li> <p><code>add_minutes()</code>
</p>
</li>
<li> <p><code>add_seconds()</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
add_years(x, n, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
add_quarters(x, n, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
add_months(x, n, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
add_weeks(x, n, ..., nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
add_days(x, n, ..., nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
add_hours(x, n, ...)

## S3 method for class 'POSIXt'
add_minutes(x, n, ...)

## S3 method for class 'POSIXt'
add_seconds(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="posixt-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-arithmetic_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="posixt-arithmetic_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-arithmetic_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adding a single quarter with <code>add_quarters()</code> is equivalent to adding
3 months.
</p>
<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Calendrical based arithmetic has the potential to generate invalid dates
(like the 31st of February), nonexistent times (due to daylight saving
time gaps), and ambiguous times (due to daylight saving time fallbacks).
</p>
<p>Naive-time based arithmetic will never generate an invalid date, but
may generate a nonexistent or ambiguous time (i.e. you added 1 day and
landed in a daylight saving time gap).
</p>
<p>Sys-time based arithmetic operates in the UTC time zone, which means
that it will never generate any invalid dates or nonexistent / ambiguous
times.
</p>
<p>The conversion from POSIXct/POSIXlt to the corresponding clock type uses
a &quot;best guess&quot; about whether you want to do the arithmetic using a naive-time
or a sys-time. For example, when adding months, you probably want to
retain the printed time when converting to a year-month-day to perform
the arithmetic, so the conversion goes through naive-time. However,
when adding smaller units like seconds, you probably want
<code style="white-space: pre;">&#8288;"2020-03-08 01:59:59" + 1 second&#8288;</code> in the America/New_York time zone to
return <code>"2020-03-08 03:00:00"</code>, taking into account the fact that there
was a daylight saving time gap. This requires doing the arithmetic in
sys-time, so that is what clock converts to. If you disagree with this
heuristic for any reason, you can take control and perform the conversions
yourself. For example, you could convert the previous example to a
naive-time instead of a sys-time manually with <code><a href="#topic+as_naive_time">as_naive_time()</a></code>, add
1 second giving <code>"2020-03-08 02:00:00"</code>, then convert back to a
POSIXct/POSIXlt, dealing with the nonexistent time that gets created by
using the <code>nonexistent</code> argument of <code>as.POSIXct()</code>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Relative ordering</h3>

<p>For the most part, adding time based units to date-times will retain the
relative ordering of the input. For example, if <code>x[1] &lt; x[2]</code> before the
<code style="white-space: pre;">&#8288;add_*()&#8288;</code> call, then it is generally also true of the result. Using
<code>invalid = "previous" / "next"</code> and
<code>nonexistent = "roll-forward" / "roll-backward"</code> ensures that this holds
when invalid and nonexistent issues are encountered.
</p>
<p>That said, with date-times there is an edge case related to ambiguous times
where the relative ordering could change. Consider these three date-times:
</p>
<div class="sourceCode r"><pre>x &lt;- c(
  date_time_build(2012, 4, 1, 2, 30, zone = "Australia/Melbourne", ambiguous = "earliest"),
  date_time_build(2012, 4, 1, 2, 00, zone = "Australia/Melbourne", ambiguous = "latest"),
  date_time_build(2012, 4, 1, 2, 30, zone = "Australia/Melbourne", ambiguous = "latest")
)
x
#&gt; [1] "2012-04-01 02:30:00 AEDT" "2012-04-01 02:00:00 AEST"
#&gt; [3] "2012-04-01 02:30:00 AEST"
</pre></div>
<p>In this case, there was a daylight saving time fallback on <code>2012-04-01</code>
where the clocks went from <code style="white-space: pre;">&#8288;02:59:59 AEDT -&gt; 02:00:00 AEST&#8288;</code>. So the times
above are precisely 30 minutes apart, and they are in increasing order.
</p>
<p>If we add sys-time based units like hours, minutes, or seconds, then the
relative ordering of these date-times will be preserved. However, arithmetic
that goes through naive-time, like adding days or months, won't preserve
the ordering here:
</p>
<div class="sourceCode r"><pre>add_days(x, 1)
#&gt; [1] "2012-04-02 02:30:00 AEST" "2012-04-02 02:00:00 AEST"
#&gt; [3] "2012-04-02 02:30:00 AEST"
add_months(x, 1)
#&gt; [1] "2012-05-01 02:30:00 AEST" "2012-05-01 02:00:00 AEST"
#&gt; [3] "2012-05-01 02:30:00 AEST"
</pre></div>
<p>Note that the 1st and 3rd values of the result are the same, and the 1st
value is no longer before the 2nd value.
</p>
<p>Adding larger units of time in naive-time generally does make more sense
than adding it in sys-time, but it does come with this one edge case to be
aware of when working with date-times (this does not affect dates). If this
has the potential to be an issue, consider only adding sys-time based units
(hours, minutes, and seconds) which can't have these issues.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-01-01", tz = "America/New_York")

add_years(x, 1:5)

y &lt;- as.POSIXct("2019-01-31 00:30:00", tz = "America/New_York")

# Adding 1 month to `y` generates an invalid date. Unlike year-month-day
# types, R's native date-time types cannot handle invalid dates, so you must
# resolve them immediately. If you don't you get an error:
try(add_months(y, 1:2))
add_months(as_year_month_day(y), 1:2)

# Resolve invalid dates by specifying an invalid date resolution strategy
# with the `invalid` argument. Using `"previous"` here sets the date-time to
# the previous valid moment in time - i.e. the end of the month. The
# time is set to the last moment in the day to retain the relative ordering
# within your input. If you are okay with potentially losing this, and
# want to retain your time of day, you can use `"previous-day"` to set the
# date-time to the previous valid day, while keeping the time of day.
add_months(y, 1:2, invalid = "previous")
add_months(y, 1:2, invalid = "previous-day")
</code></pre>

<hr>
<h2 id='posixt-boundary'>Boundaries: date-time</h2><span id='topic+posixt-boundary'></span><span id='topic+date_start.POSIXt'></span><span id='topic+date_end.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct/POSIXlt method for the <code><a href="#topic+date_start">date_start()</a></code> and <code><a href="#topic+date_end">date_end()</a></code>
generics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_start(
  x,
  precision,
  ...,
  invalid = NULL,
  nonexistent = NULL,
  ambiguous = x
)

## S3 method for class 'POSIXt'
date_end(x, precision, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-boundary_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-boundary_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="posixt-boundary_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-boundary_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> but with some components altered to be at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_time_build(2019:2021, 2:4, 3:5, 4, 5, 6, zone = "America/New_York")
x

# Last moment of the month
date_end(x, "month")

# Notice that this is different from just setting the day to `"last"`
set_day(x, "last")

# Last moment of the year
date_end(x, "year")

# First moment of the hour
date_start(x, "hour")
</code></pre>

<hr>
<h2 id='posixt-count-between'>Counting: date-times</h2><span id='topic+posixt-count-between'></span><span id='topic+date_count_between.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct/POSIXlt method for the <code><a href="#topic+date_count_between">date_count_between()</a></code> generic.
</p>
<p><code>date_count_between()</code> counts the number of <code>precision</code> units between
<code>start</code> and <code>end</code> (i.e., the number of years or months). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.
</p>
<p>This is suitable for, say, computing the whole number of years or months
between two dates, accounting for the day of the month and the time of day.
</p>
<p>Internally, the date-time is converted to one of the following three clock
types, and the counting is done directly on that type. The choice of type is
based on the most common interpretation of each precision, but is ultimately
a heuristic. See the examples for more information.
</p>
<p><em>Calendrical based counting:</em>
</p>
<p>These precisions convert to a year-month-day calendar and count while in that
type.
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li></ul>

<p><em>Naive-time based counting:</em>
</p>
<p>These precisions convert to a naive-time and count while in that type.
</p>

<ul>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li></ul>

<p><em>Sys-time based counting:</em>
</p>
<p>These precisions convert to a sys-time and count while in that type.
</p>

<ul>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-count-between_+3A_start">start</code>, <code id="posixt-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A pair of date-time vectors. These will be recycled to their common
size.</p>
</td></tr>
<tr><td><code id="posixt-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>"quarter"</code> is equivalent to <code>"month"</code> precision with <code>n</code> set to <code>n * 3L</code>.
</p>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Comparison Direction</h3>

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &lt;= end&#8288;</code>. Similarly, if <code>start &gt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &gt;= end&#8288;</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>start &lt;- date_time_parse("2000-05-05 02:00:00", zone = "America/New_York")
end &lt;- date_time_parse(
  c("2020-05-05 01:00:00", "2020-05-05 03:00:00"),
  zone = "America/New_York"
)

# Age in years
date_count_between(start, end, "year")

# Number of "whole" months between these dates. i.e.
# `2000-05-05 02:00:00 -&gt; 2020-04-05 02:00:00` is 239 months
# `2000-05-05 02:00:00 -&gt; 2020-05-05 02:00:00` is 240 months
# Since `2020-05-05 01:00:00` occurs before the 2nd hour,
# it gets a count of 239
date_count_between(start, end, "month")

# Number of seconds between
date_count_between(start, end, "second")

# ---------------------------------------------------------------------------
# Naive-time VS Sys-time interpretation

# The difference between whether `start` and `end` are converted to a
# naive-time vs a sys-time comes into play when dealing with daylight
# savings.

# Here are two times around a 1 hour DST gap where clocks jumped from
# 01:59:59 -&gt; 03:00:00
x &lt;- date_time_build(1970, 4, 26, 1, 50, 00, zone = "America/New_York")
y &lt;- date_time_build(1970, 4, 26, 3, 00, 00, zone = "America/New_York")

# When treated like sys-times, these are considered to be 10 minutes apart,
# which is the amount of time that would have elapsed if you were watching
# a clock as it changed between these two times.
date_count_between(x, y, "minute")

# Lets add a 3rd date that is ~1 day ahead of these
z &lt;- date_time_build(1970, 4, 27, 1, 55, 00, zone = "America/New_York")

# When treated like naive-times, `z` is considered to be at least 1 day ahead
# of `x`, because `01:55:00` is after `01:50:00`. This is probably what you
# expected.
date_count_between(x, z, "day")

# If these were interpreted like sys-times, then `z` would not be considered
# to be 1 day ahead. That would look something like this:
date_count_between(x, z, "second")
trunc(date_count_between(x, z, "second") / 86400)

# This is because there have only been 83,100 elapsed seconds since `x`,
# which isn't a full day's worth (86,400 seconds). But we'd generally
# consider `z` to be 1 day ahead of `x` (and ignore the DST gap), so that is
# how it is implemented.

# You can override this by converting directly to sys-time, then using
# `time_point_count_between()`
x_st &lt;- as_sys_time(x)
x_st

z_st &lt;- as_sys_time(z)
z_st

time_point_count_between(x_st, z_st, "day")
</code></pre>

<hr>
<h2 id='posixt-formatting'>Formatting: date-time</h2><span id='topic+posixt-formatting'></span><span id='topic+date_format.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct method for the <code><a href="#topic+date_format">date_format()</a></code> generic.
</p>
<p><code>date_format()</code> formats a date-time (POSIXct) using a <code>format</code> string.
</p>
<p>If <code>format</code> is <code>NULL</code>, a default format of <code>"%Y-%m-%dT%H:%M:%S%Ez[%Z]"</code> is
used. This matches the default format that <code><a href="#topic+date_time_parse_complete">date_time_parse_complete()</a></code>
parses. Additionally, this format matches the de-facto standard extension to
RFC 3339 for creating completely unambiguous date-times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_format(
  x,
  ...,
  format = NULL,
  locale = clock_locale(),
  abbreviate_zone = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-formatting_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-formatting_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-formatting_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>If <code>NULL</code>, a default format is used, which depends on the type of the
input.
</p>
<p>Otherwise, a format string which is a combination of:
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The year divided by 100 using floored division. If the result
is a single decimal digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the result is a single
digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. If the result is less than four
digits it is left-padded with <code>0</code> to four digits.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s abbreviated month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%B&#8288;</code>: The <code>locale</code>'s full month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>01</code>. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>: The day of month as a decimal number. If the result is a single
decimal digit, it is prefixed with <code>0</code>.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>: The <code>locale</code>'s abbreviated weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full weekday name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. If the
result is a single digit it is prefixed by <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. If the result is less
than four digits it is left-padded with <code>0</code> to four digits.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. If the result
is a single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. If the result is a single digit, it is prefixed with
<code>0</code>.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>001</code>. If the
result is less than three digits, it is left-padded with <code>0</code> to three
digits.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. If the result is a
single digit, it is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minute as a decimal number. If the result is a single digit, it
is prefixed with <code>0</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: Seconds as a decimal number. Fractional seconds are printed at the
precision of the input. The character for the decimal point is localized
according to <code>locale</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Nearly equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>, but seconds are always printed
at second precision.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the ISO 8601 format. For example <code>-0430</code>
refers to 4 hours 30 minutes behind UTC. If the offset is zero, <code>+0000</code> is
used. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> inserts a <code>:</code> between the hour and
minutes, like <code>-04:30</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name. If <code>abbreviate_zone</code> is <code>TRUE</code>, the time
zone abbreviation.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Similar to, but not exactly the
same as, <code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: A newline character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: A horizontal-tab character.
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-formatting_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
<tr><td><code id="posixt-formatting_+3A_abbreviate_zone">abbreviate_zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> returns an abbreviated time zone name.
</p>
<p>If <code>FALSE</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> returns the full time zone name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of the formatted input.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- date_time_parse(
  c("1970-04-26 01:30:00", "1970-04-26 03:30:00"),
  zone = "America/New_York"
)

# Default
date_format(x)

# Which is parseable by `date_time_parse_complete()`
date_time_parse_complete(date_format(x))

date_format(x, format = "%B %d, %Y %H:%M:%S")

# By default, `%Z` uses the full zone name, but you can switch to the
# abbreviated name
date_format(x, format = "%z %Z")
date_format(x, format = "%z %Z", abbreviate_zone = TRUE)
</code></pre>

<hr>
<h2 id='posixt-getters'>Getters: date-time</h2><span id='topic+posixt-getters'></span><span id='topic+get_year.POSIXt'></span><span id='topic+get_month.POSIXt'></span><span id='topic+get_day.POSIXt'></span><span id='topic+get_hour.POSIXt'></span><span id='topic+get_minute.POSIXt'></span><span id='topic+get_second.POSIXt'></span>

<h3>Description</h3>

<p>These are POSIXct/POSIXlt methods for the <a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the Gregorian year.
</p>
</li>
<li> <p><code>get_month()</code> returns the month of the year.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the month.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components, up to
a precision of seconds.
</p>
</li></ul>

<p>For more advanced component extraction, convert to the calendar type
that you are interested in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
get_year(x)

## S3 method for class 'POSIXt'
get_month(x)

## S3 method for class 'POSIXt'
get_day(x)

## S3 method for class 'POSIXt'
get_hour(x)

## S3 method for class 'POSIXt'
get_minute(x)

## S3 method for class 'POSIXt'
get_second(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time type to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-01-01", tz = "America/New_York")

x &lt;- add_days(x, 0:5)
x &lt;- set_second(x, 10:15)

get_day(x)
get_second(x)
</code></pre>

<hr>
<h2 id='posixt-group'>Group date-time components</h2><span id='topic+posixt-group'></span><span id='topic+date_group.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct/POSIXlt method for the <code><a href="#topic+date_group">date_group()</a></code> generic.
</p>
<p><code>date_group()</code> groups by a single component of a date-time, such as month
of the year, day of the month, or hour of the day.
</p>
<p>If you need to group by more complex components, like ISO weeks, or quarters,
convert to a calendar type that contains the component you are interested
in grouping by.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_group(
  x,
  precision,
  ...,
  n = 1L,
  invalid = NULL,
  nonexistent = NULL,
  ambiguous = x
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="posixt-group_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="posixt-group_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-group_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, grouped at <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-01-01", "America/New_York")
x &lt;- add_days(x, -3:5)

# Group by 2 days of the current month.
# Note that this resets at the beginning of the month, creating day groups
# of [29, 30] [31] [01, 02] [03, 04].
date_group(x, "day", n = 2)

# Group by month
date_group(x, "month")

# Group by hour of the day
y &lt;- as.POSIXct("2019-12-30", "America/New_York")
y &lt;- add_hours(y, 0:12)
y

date_group(y, "hour", n = 3)
</code></pre>

<hr>
<h2 id='posixt-rounding'>Rounding: date-time</h2><span id='topic+posixt-rounding'></span><span id='topic+date_floor.POSIXt'></span><span id='topic+date_ceiling.POSIXt'></span><span id='topic+date_round.POSIXt'></span>

<h3>Description</h3>

<p>These are POSIXct/POSIXlt methods for the
<a href="#topic+date-and-date-time-rounding">rounding generics</a>.
</p>

<ul>
<li> <p><code>date_floor()</code> rounds a date-time down to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_ceiling()</code> rounds a date-time up to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>date_round()</code> rounds up or down depending on what is closer,
rounding up on ties.
</p>
</li></ul>

<p>You can group by irregular periods such as <code>"month"</code> or <code>"year"</code> by using
<code><a href="#topic+date_group">date_group()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_floor(
  x,
  precision,
  ...,
  n = 1L,
  origin = NULL,
  nonexistent = NULL,
  ambiguous = x
)

## S3 method for class 'POSIXt'
date_ceiling(
  x,
  precision,
  ...,
  n = 1L,
  origin = NULL,
  nonexistent = NULL,
  ambiguous = x
)

## S3 method for class 'POSIXt'
date_round(
  x,
  precision,
  ...,
  n = 1L,
  origin = NULL,
  nonexistent = NULL,
  ambiguous = x
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-rounding_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li></ul>

<p><code>"week"</code> is an alias for <code>"day"</code> with <code>n * 7</code>.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_origin">origin</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct(1) / POSIXlt(1) / NULL]&#8288;</code>
</p>
<p>An origin to start counting from.
</p>
<p><code>origin</code> must have exactly the same time zone as <code>x</code>.
</p>
<p><code>origin</code> will be floored to <code>precision</code>. If information is lost when
flooring, a warning will be thrown.
</p>
<p>If <code>NULL</code>, defaults to midnight on 1970-01-01 in the time zone of <code>x</code>.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-rounding_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When rounding by <code>"week"</code>, remember that the <code>origin</code> determines the &quot;week
start&quot;. By default, 1970-01-01 is the implicit origin, which is a
Thursday. If you would like to round by weeks with a different week start,
just supply an origin on the weekday you are interested in.
</p>


<h3>Value</h3>

<p><code>x</code> rounded to the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-03-31", "America/New_York")
x &lt;- add_days(x, 0:5)

# Flooring by 2 days, note that this is not tied to the current month,
# and instead counts from the specified `origin`, so groups can cross
# the month boundary
date_floor(x, "day", n = 2)

# Compare to `date_group()`, which groups by the day of the month
date_group(x, "day", n = 2)

# Note that daylight saving time gaps can throw off rounding
x &lt;- as.POSIXct("1970-04-26 01:59:59", "America/New_York") + c(0, 1)
x

# Rounding is done in naive-time, which means that rounding by 2 hours
# will attempt to generate a time of 1970-04-26 02:00:00, which doesn't
# exist in this time zone
try(date_floor(x, "hour", n = 2))

# You can handle this by specifying a nonexistent time resolution strategy
date_floor(x, "hour", n = 2, nonexistent = "roll-forward")
</code></pre>

<hr>
<h2 id='posixt-sequence'>Sequences: date-time</h2><span id='topic+posixt-sequence'></span><span id='topic+date_seq.POSIXt'></span>

<h3>Description</h3>

<p>This is a POSIXct method for the <code><a href="#topic+date_seq">date_seq()</a></code> generic.
</p>
<p><code>date_seq()</code> generates a date-time (POSIXct) sequence.
</p>
<p>When calling <code>date_seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li> <p><code>total_size</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_seq(
  from,
  ...,
  to = NULL,
  by = NULL,
  total_size = NULL,
  invalid = NULL,
  nonexistent = NULL,
  ambiguous = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-sequence_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct(1) / POSIXlt(1)]&#8288;</code>
</p>
<p>A date-time to start the sequence from.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct(1) / POSIXlt(1) / NULL]&#8288;</code>
</p>
<p>A date-time to stop the sequence at.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.
</p>
<p>If <code>to</code> is supplied along with <code>by</code>, all components of <code>to</code> more precise
than the precision of <code>by</code> must match <code>from</code> exactly. For example, if <code>by = duration_months(1)</code>, the day, hour, minute, and second components of <code>to</code>
must match the corresponding components of <code>from</code>. This ensures that the
generated sequence is, at a minimum, a weakly monotonic sequence of
date-times.
</p>
<p>The time zone of <code>to</code> must match the time zone of <code>from</code> exactly.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is equivalent to <code>duration_seconds(by)</code>.
</p>
<p>If <code>by</code> is a duration, it is allowed to have a precision of:
</p>

<ul>
<li><p> year
</p>
</li>
<li><p> quarter
</p>
</li>
<li><p> month
</p>
</li>
<li><p> week
</p>
</li>
<li><p> day
</p>
</li>
<li><p> hour
</p>
</li>
<li><p> minute
</p>
</li>
<li><p> second
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_total_size">total_size</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The size of the resulting sequence.
</p>
<p>If specified alongside <code>to</code>, this must generate a non-fractional sequence
between <code>from</code> and <code>to</code>.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-sequence_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A date-time vector.
</p>


<h3>Sequence Generation</h3>

<p>Different methods are used to generate the sequences, depending on the
precision implied by <code>by</code>. They are intended to generate the most intuitive
sequences, especially around daylight saving time gaps and fallbacks.
</p>
<p>See the examples for more details.
</p>


<h4>Calendrical based sequences:</h4>

<p>These convert to a naive-time, then to a year-month-day, generate
the sequence, then convert back to a date-time.
</p>

<ul>
<li> <p><code>by = duration_years()</code>
</p>
</li>
<li> <p><code>by = duration_quarters()</code>
</p>
</li>
<li> <p><code>by = duration_months()</code>
</p>
</li></ul>




<h4>Naive-time based sequences:</h4>

<p>These convert to a naive-time, generate the sequence, then
convert back to a date-time.
</p>

<ul>
<li> <p><code>by = duration_weeks()</code>
</p>
</li>
<li> <p><code>by = duration_days()</code>
</p>
</li></ul>




<h4>Sys-time based sequences:</h4>

<p>These convert to a sys-time, generate the sequence, then
convert back to a date-time.
</p>

<ul>
<li> <p><code>by = duration_hours()</code>
</p>
</li>
<li> <p><code>by = duration_minutes()</code>
</p>
</li>
<li> <p><code>by = duration_seconds()</code>
</p>
</li></ul>




<h3>Examples</h3>

<pre><code class='language-R'>zone &lt;- "America/New_York"

from &lt;- date_time_build(2019, 1, zone = zone)
to &lt;- date_time_build(2019, 1, second = 50, zone = zone)

# Defaults to second precision sequence
date_seq(from, to = to, by = 7)

to &lt;- date_time_build(2019, 1, 5, zone = zone)

# Use durations to change to alternative precisions
date_seq(from, to = to, by = duration_days(1))
date_seq(from, to = to, by = duration_hours(10))
date_seq(from, by = duration_minutes(-2), total_size = 3)

# Note that components of `to` more precise than the precision of `by`
# must match `from` exactly. For example, this is not well defined:
from &lt;- date_time_build(2019, 1, 1, 0, 1, 30, zone = zone)
to &lt;- date_time_build(2019, 1, 1, 5, 2, 20, zone = zone)
try(date_seq(from, to = to, by = duration_hours(1)))

# The minute and second components of `to` must match `from`
to &lt;- date_time_build(2019, 1, 1, 5, 1, 30, zone = zone)
date_seq(from, to = to, by = duration_hours(1))

# ---------------------------------------------------------------------------

# Invalid dates must be resolved with the `invalid` argument
from &lt;- date_time_build(2019, 1, 31, zone = zone)
to &lt;- date_time_build(2019, 12, 31, zone = zone)

try(date_seq(from, to = to, by = duration_months(1)))
date_seq(from, to = to, by = duration_months(1), invalid = "previous-day")

# Compare this to the base R result, which is often a source of confusion
seq(from, to = to, by = "1 month")

# This is equivalent to the overflow invalid resolution strategy
date_seq(from, to = to, by = duration_months(1), invalid = "overflow")

# ---------------------------------------------------------------------------

# This date-time is 2 days before a daylight saving time gap that occurred
# on 2021-03-14 between 01:59:59 -&gt; 03:00:00
from &lt;- as.POSIXct("2021-03-12 02:30:00", "America/New_York")

# So creating a daily sequence lands us in that daylight saving time gap,
# creating a nonexistent time
try(date_seq(from, by = duration_days(1), total_size = 5))

# Resolve the nonexistent time with `nonexistent`. Note that this importantly
# allows times after the gap to retain the `02:30:00` time.
date_seq(from, by = duration_days(1), total_size = 5, nonexistent = "roll-forward")

# Compare this to the base R behavior, where the hour is adjusted from 2-&gt;3
# as you cross the daylight saving time gap, and is never restored. This is
# equivalent to always using sys-time (rather than naive-time, like clock
# uses for daily sequences).
seq(from, by = "1 day", length.out = 5)

# You can replicate this behavior by generating a second precision sequence
# of 86,400 seconds. Seconds always add in sys-time.
date_seq(from, by = duration_seconds(86400), total_size = 5)

# ---------------------------------------------------------------------------

# Usage of `to` and `total_size` must generate a non-fractional sequence
# between `from` and `to`
from &lt;- date_time_build(2019, 1, 1, 0, 0, 0, zone = "America/New_York")
to &lt;- date_time_build(2019, 1, 1, 0, 0, 3, zone = "America/New_York")

# These are fine
date_seq(from, to = to, total_size = 2)
date_seq(from, to = to, total_size = 4)

# But this is not!
try(date_seq(from, to = to, total_size = 3))
</code></pre>

<hr>
<h2 id='posixt-setters'>Setters: date-time</h2><span id='topic+posixt-setters'></span><span id='topic+set_year.POSIXt'></span><span id='topic+set_month.POSIXt'></span><span id='topic+set_day.POSIXt'></span><span id='topic+set_hour.POSIXt'></span><span id='topic+set_minute.POSIXt'></span><span id='topic+set_second.POSIXt'></span>

<h3>Description</h3>

<p>These are POSIXct/POSIXlt methods for the <a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the year.
</p>
</li>
<li> <p><code>set_month()</code> sets the month of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the month. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components, up to
a precision of seconds.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
set_year(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
set_month(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
set_day(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
set_hour(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
set_minute(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)

## S3 method for class 'POSIXt'
set_second(x, value, ..., invalid = NULL, nonexistent = NULL, ambiguous = x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_day()</code>, this can also be <code>"last"</code> to set the day to the
last day of the month.</p>
</td></tr>
<tr><td><code id="posixt-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-setters_+3A_invalid">invalid</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>One of the following invalid date resolution strategies:
</p>

<ul>
<li> <p><code>"previous"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"previous-day"</code>: The previous valid day in time, keeping the time of
day.
</p>
</li>
<li> <p><code>"next"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"next-day"</code>: The next valid day in time, keeping the time of day.
</p>
</li>
<li> <p><code>"overflow"</code>: Overflow by the number of days that the input is invalid
by. Time of day is dropped.
</p>
</li>
<li> <p><code>"overflow-day"</code>: Overflow by the number of days that the input is
invalid by. Time of day is kept.
</p>
</li>
<li> <p><code>"NA"</code>: Replace invalid dates with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on invalid dates.
</p>
</li></ul>

<p>Using either <code>"previous"</code> or <code>"next"</code> is generally recommended, as these
two strategies maintain the <em>relative ordering</em> between elements of the
input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>invalid</code> must be supplied and
cannot be <code>NULL</code>. This is a convenient way to make production code robust
to invalid dates.</p>
</td></tr>
<tr><td><code id="posixt-setters_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-setters_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as.POSIXct("2019-02-01", tz = "America/New_York")

# Set the day
set_day(x, 12:14)

# Set to the "last" day of the month
set_day(x, "last")

# You cannot set a date-time to an invalid date like you can with
# a year-month-day. Instead, the default strategy is to error.
try(set_day(x, 31))
set_day(as_year_month_day(x), 31)

# You can resolve these issues while setting the day by specifying
# an invalid date resolution strategy with `invalid`
set_day(x, 31, invalid = "previous")

y &lt;- as.POSIXct("2020-03-08 01:30:00", tz = "America/New_York")

# Nonexistent and ambiguous times must be resolved immediately when
# working with R's native date-time types. An error is thrown by default.
try(set_hour(y, 2))
set_hour(y, 2, nonexistent = "roll-forward")
set_hour(y, 2, nonexistent = "roll-backward")
</code></pre>

<hr>
<h2 id='posixt-shifting'>Shifting: date and date-time</h2><span id='topic+posixt-shifting'></span><span id='topic+date_shift.POSIXt'></span>

<h3>Description</h3>

<p><code>date_shift()</code> shifts <code>x</code> to the <code>target</code> weekday. You can shift to the next
or previous weekday. If <code>x</code> is currently on the <code>target</code> weekday, you can
choose to leave it alone or advance it to the next instance of the <code>target</code>.
</p>
<p>Shifting with date-times retains the time of day where possible. Be aware
that you can run into daylight saving time issues if you shift into a
daylight saving time gap or fallback period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'POSIXt'
date_shift(
  x,
  target,
  ...,
  which = "next",
  boundary = "keep",
  nonexistent = NULL,
  ambiguous = x
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixt-shifting_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[POSIXct / POSIXlt]&#8288;</code>
</p>
<p>A date-time vector.</p>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_target">target</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday created from <code><a href="#topic+weekday">weekday()</a></code> to target.
</p>
<p>Generally this is length 1, but can also be the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_which">which</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"next"</code>: Shift to the next instance of the <code>target</code> weekday.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"previous&#8288;</code>: Shift to the previous instance of the <code>target</code> weekday.
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_boundary">boundary</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"keep"</code>: If <code>x</code> is currently on the <code>target</code> weekday, return it.
</p>
</li>
<li> <p><code>"advance"</code>: If <code>x</code> is currently on the <code>target</code> weekday, advance it
anyways.
</p>
</li></ul>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_nonexistent">nonexistent</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>One of the following nonexistent time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"roll-forward"</code>: The next valid instant in time.
</p>
</li>
<li> <p><code>"roll-backward"</code>: The previous valid instant in time.
</p>
</li>
<li> <p><code>"shift-forward"</code>: Shift the nonexistent time forward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"shift-backward&#8288;</code>: Shift the nonexistent time backward by the size of
the daylight saving time gap.
</p>
</li>
<li> <p><code>"NA"</code>: Replace nonexistent times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on nonexistent times.
</p>
</li></ul>

<p>Using either <code>"roll-forward"</code> or <code>"roll-backward"</code> is generally
recommended over shifting, as these two strategies maintain the
<em>relative ordering</em> between elements of the input.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>nonexistent</code> must be supplied
and cannot be <code>NULL</code>. This is a convenient way to make production code
robust to nonexistent times.</p>
</td></tr>
<tr><td><code id="posixt-shifting_+3A_ambiguous">ambiguous</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / zoned_time / POSIXct / list(2) / NULL]&#8288;</code>
</p>
<p>One of the following ambiguous time resolution strategies, allowed to be
either length 1, or the same length as the input:
</p>

<ul>
<li> <p><code>"earliest"</code>: Of the two possible times, choose the earliest one.
</p>
</li>
<li> <p><code>"latest"</code>: Of the two possible times, choose the latest one.
</p>
</li>
<li> <p><code>"NA"</code>: Replace ambiguous times with <code>NA</code>.
</p>
</li>
<li> <p><code>"error"</code>: Error on ambiguous times.
</p>
</li></ul>

<p>Alternatively, <code>ambiguous</code> is allowed to be a zoned_time (or POSIXct) that
is either length 1, or the same length as the input. If an ambiguous time
is encountered, the zoned_time is consulted. If the zoned_time corresponds
to a naive_time that is also ambiguous <em>and</em> uses the same daylight saving
time transition point as the original ambiguous time, then the offset of
the zoned_time is used to resolve the ambiguity. If the ambiguity cannot be
resolved by consulting the zoned_time, then this method falls back to
<code>NULL</code>.
</p>
<p>Finally, <code>ambiguous</code> is allowed to be a list of size 2, where the first
element of the list is a zoned_time (as described above), and the second
element of the list is an ambiguous time resolution strategy to use when
the ambiguous time cannot be resolved by consulting the zoned_time.
Specifying a zoned_time on its own is identical to <code style="white-space: pre;">&#8288;list(&lt;zoned_time&gt;, NULL)&#8288;</code>.
</p>
<p>If <code>NULL</code>, defaults to <code>"error"</code>.
</p>
<p>If <code>getOption("clock.strict")</code> is <code>TRUE</code>, <code>ambiguous</code> must be supplied and
cannot be <code>NULL</code>. Additionally, <code>ambiguous</code> cannot be specified as a
zoned_time on its own, as this implies <code>NULL</code> for ambiguous times that the
zoned_time cannot resolve. Instead, it must be specified as a list
alongside an ambiguous time resolution strategy as described above. This is
a convenient way to make production code robust to ambiguous times.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> shifted to the <code>target</code> weekday.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tuesday &lt;- weekday(clock_weekdays$tuesday)

x &lt;- as.POSIXct("1970-04-22 02:30:00", "America/New_York")

# Shift to the next Tuesday
date_shift(x, tuesday)

# Be aware that you can run into daylight saving time issues!
# Here we shift directly into a daylight saving time gap
# from 01:59:59 -&gt; 03:00:00
sunday &lt;- weekday(clock_weekdays$sunday)
try(date_shift(x, sunday))

# You can resolve this with the `nonexistent` argument
date_shift(x, sunday, nonexistent = "roll-forward")
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+tzdb_names'></span><span id='topic+tzdb_version'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>tzdb</dt><dd><p><code><a href="tzdb.html#topic+tzdb_names">tzdb_names</a></code>, <code><a href="tzdb.html#topic+tzdb_version">tzdb_version</a></code></p>
</dd>
</dl>

<hr>
<h2 id='seq.clock_duration'>Sequences: duration</h2><span id='topic+seq.clock_duration'></span>

<h3>Description</h3>

<p>This is a duration method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Using <code>seq()</code> on duration objects always retains the type of <code>from</code>.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_duration'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_duration_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration(1)]&#8288;</code>
</p>
<p>A duration to start the sequence from.</p>
</td></tr>
<tr><td><code id="seq.clock_duration_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_duration(1) / NULL]&#8288;</code>
</p>
<p>A duration to stop the sequence at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_duration_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_duration_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_duration_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_duration_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>from &gt; to</code> and <code>by &gt; 0</code>, then the result will be length 0. This matches
the behavior of <code><a href="rlang.html#topic+seq2">rlang::seq2()</a></code>, and results in nicer theoretical
properties when compared with throwing an error. Similarly, if <code>from &lt; to</code>
and <code>by &lt; 0</code>, then the result will also be length 0.
</p>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>seq(duration_days(0), duration_days(100), by = 5)

# Using a duration `by`. Note that `by` is cast to the type of `from`.
seq(duration_days(0), duration_days(100), by = duration_weeks(1))

# `to` is cast from 5 years to 60 months
# `by` is cast from 1 quarter to 4 months
seq(duration_months(0), duration_years(5), by = duration_quarters(1))

seq(duration_days(20), by = 2, length.out = 5)
</code></pre>

<hr>
<h2 id='seq.clock_iso_year_week_day'>Sequences: iso-year-week-day</h2><span id='topic+seq.clock_iso_year_week_day'></span>

<h3>Description</h3>

<p>This is a iso-year-week-day method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> precision
iso-year-week-day vectors. If you need to generate week-based sequences,
you'll have to convert to a time point first.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_iso_year_week_day'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_iso_year_week_day_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> precision iso-year-week-day to start the sequence
from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_iso_year_week_day_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_iso_year_week_day(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> precision iso-year-week-day to stop the sequence
at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_iso_year_week_day_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_iso_year_week_day_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_iso_year_week_day_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_iso_year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Yearly sequence
x &lt;- seq(iso_year_week_day(2020), iso_year_week_day(2026), by = 2)
x

# Which we can then set the week of.
# Some years have 53 ISO weeks, some have 52.
set_week(x, "last")
</code></pre>

<hr>
<h2 id='seq.clock_time_point'>Sequences: time points</h2><span id='topic+seq.clock_time_point'></span>

<h3>Description</h3>

<p>This is a time point method for the <code><a href="base.html#topic+seq">seq()</a></code> generic. It works for sys-time
and naive-time vectors.
</p>
<p>Sequences can be generated for all valid time point precisions (daily through
nanosecond).
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_time_point'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_time_point_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time(1) / clock_naive_time(1)]&#8288;</code>
</p>
<p>A time point to start the sequence from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_time_point_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time(1) / clock_naive_time(1) / NULL]&#8288;</code>
</p>
<p>A time point to stop the sequence at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_time_point_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_time_point_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_time_point_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_time_point_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Daily sequence
seq(
  as_naive_time(year_month_day(2019, 1, 1)),
  as_naive_time(year_month_day(2019, 2, 4)),
  by = 5
)

# Minutely sequence using minute precision naive-time
x &lt;- as_naive_time(year_month_day(2019, 1, 2, 3, 3))
x

seq(x, by = 4, length.out = 10)

# You can use larger step sizes by using a duration-based `by`
seq(x, by = duration_days(1), length.out = 5)

# Nanosecond sequence
from &lt;- as_naive_time(year_month_day(2019, 1, 1))
from &lt;- time_point_cast(from, "nanosecond")
to &lt;- from + 100
seq(from, to, by = 10)
</code></pre>

<hr>
<h2 id='seq.clock_year_day'>Sequences: year-day</h2><span id='topic+seq.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> precision year-day vectors.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_year_day_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> precision year-day to start the sequence from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_year_day_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> precision year-day to stop the sequence at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_year_day_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_day_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_day_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Yearly sequence
x &lt;- seq(year_day(2020), year_day(2040), by = 2)
x

# Which we can then set the day of to get a sequence of end-of-year values
set_day(x, "last")

# Daily sequences are not allowed. Use a naive-time for this instead.
try(seq(year_day(2019, 1), by = 2, length.out = 2))
as_year_day(seq(as_naive_time(year_day(2019, 1)), by = 2, length.out = 2))
</code></pre>

<hr>
<h2 id='seq.clock_year_month_day'>Sequences: year-month-day</h2><span id='topic+seq.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> and <code>"month"</code> precision
year-month-day vectors.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_year_month_day_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"month"</code> precision year-month-day to start the sequence
from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_day_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"month"</code> precision year-month-day to stop the sequence
at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_day_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_day_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_day_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Monthly sequence
x &lt;- seq(year_month_day(2019, 1), year_month_day(2020, 12), by = 1)
x

# Which we can then set the day of to get a sequence of end-of-month values
set_day(x, "last")

# Daily sequences are not allowed. Use a naive-time for this instead.
try(seq(year_month_day(2019, 1, 1), by = 2, length.out = 2))
seq(as_naive_time(year_month_day(2019, 1, 1)), by = 2, length.out = 2)
</code></pre>

<hr>
<h2 id='seq.clock_year_month_weekday'>Sequences: year-month-weekday</h2><span id='topic+seq.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> and <code>"month"</code> precision
year-month-weekday vectors.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_year_month_weekday_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"month"</code> precision year-month-weekday to start the sequence
from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_weekday_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"month"</code> precision year-month-weekday to stop the sequence
at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_weekday_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_weekday_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_weekday_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_month_weekday_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Monthly sequence
x &lt;- seq(year_month_weekday(2019, 1), year_month_weekday(2020, 12), by = 1)
x

# Which we can then set the indexed weekday of
set_day(x, clock_weekdays$sunday, index = "last")
</code></pre>

<hr>
<h2 id='seq.clock_year_quarter_day'>Sequences: year-quarter-day</h2><span id='topic+seq.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> and <code>"quarter"</code> precision
year-quarter-day vectors.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_year_quarter_day_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"quarter"</code> precision year-quarter-day to start the sequence
from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_year_quarter_day_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> or <code>"quarter"</code> precision year-quarter-day to stop the sequence
at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_year_quarter_day_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_quarter_day_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_quarter_day_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_quarter_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Quarterly sequence
x &lt;- seq(year_quarter_day(2020, 1), year_quarter_day(2026, 3), by = 2)
x

# Which we can then set the day of the quarter of
set_day(x, "last")
</code></pre>

<hr>
<h2 id='seq.clock_year_week_day'>Sequences: year-week-day</h2><span id='topic+seq.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is a year-week-day method for the <code><a href="base.html#topic+seq">seq()</a></code> generic.
</p>
<p>Sequences can only be generated for <code>"year"</code> precision
year-week-day vectors. If you need to generate week-based sequences,
you'll have to convert to a time point first.
</p>
<p>When calling <code>seq()</code>, exactly two of the following must be specified:
</p>

<ul>
<li> <p><code>to</code>
</p>
</li>
<li> <p><code>by</code>
</p>
</li>
<li><p> Either <code>length.out</code> or <code>along.with</code>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
seq(from, to = NULL, by = NULL, length.out = NULL, along.with = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seq.clock_year_week_day_+3A_from">from</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day(1)]&#8288;</code>
</p>
<p>A <code>"year"</code> precision year-week-day to start the sequence
from.
</p>
<p><code>from</code> is always included in the result.</p>
</td></tr>
<tr><td><code id="seq.clock_year_week_day_+3A_to">to</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day(1) / NULL]&#8288;</code>
</p>
<p>A <code>"year"</code> precision year-week-day to stop the sequence
at.
</p>
<p><code>to</code> is cast to the type of <code>from</code>.
</p>
<p><code>to</code> is only included in the result if the resulting sequence divides
the distance between <code>from</code> and <code>to</code> exactly.</p>
</td></tr>
<tr><td><code id="seq.clock_year_week_day_+3A_by">by</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / clock_duration(1) / NULL]&#8288;</code>
</p>
<p>The unit to increment the sequence by.
</p>
<p>If <code>by</code> is an integer, it is transformed into a duration with the
precision of <code>from</code>.
</p>
<p>If <code>by</code> is a duration, it is cast to the type of <code>from</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_week_day_+3A_length.out">length.out</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1) / NULL]&#8288;</code>
</p>
<p>The length of the resulting sequence.
</p>
<p>If specified, <code>along.with</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_week_day_+3A_along.with">along.with</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[vector / NULL]&#8288;</code>
</p>
<p>A vector who's length determines the length of the resulting sequence.
</p>
<p>Equivalent to <code>length.out = vec_size(along.with)</code>.
</p>
<p>If specified, <code>length.out</code> must be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seq.clock_year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sequence with the type of <code>from</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Yearly sequence
x &lt;- seq(year_week_day(2020), year_week_day(2026), by = 2)
x

# Which we can then set the week of.
# Some years have 53 weeks, some have 52.
set_week(x, "last")
</code></pre>

<hr>
<h2 id='sys_time_info'>Info: sys-time</h2><span id='topic+sys_time_info'></span>

<h3>Description</h3>

<p><code>sys_time_info()</code> retrieves a set of low-level information generally not
required for most date-time manipulations. It returns a data frame with the
following columns:
</p>

<ul>
<li> <p><code>begin</code>, <code>end</code>: Second precision sys-times specifying the range of the
current daylight saving time rule. The range is a half-open interval of
<code style="white-space: pre;">&#8288;[begin, end)&#8288;</code>.
</p>
</li>
<li> <p><code>offset</code>: A second precision <code>duration</code> specifying the offset from UTC.
</p>
</li>
<li> <p><code>dst</code>: A logical vector specifying if daylight saving time is currently
active.
</p>
</li>
<li> <p><code>abbreviation</code>: The time zone abbreviation in use throughout this <code>begin</code>
to <code>end</code> range.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>sys_time_info(x, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sys_time_info_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time]&#8288;</code>
</p>
<p>A sys-time.</p>
</td></tr>
<tr><td><code id="sys_time_info_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A valid time zone name.
</p>
<p>Unlike most functions in clock, in <code>sys_time_info()</code> <code>zone</code> is vectorized
and is recycled against <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If there have never been any daylight saving time transitions, the minimum
supported year value is returned for <code>begin</code> (typically, a year value of
<code>-32767</code>).
</p>
<p>If daylight saving time is no longer used in a time zone, the maximum
supported year value is returned for <code>end</code> (typically, a year value of
<code>32767</code>).
</p>
<p>The <code>offset</code> is the bridge between sys-time and naive-time for the <code>zone</code>
being used. The relationship of the three values is:
</p>
<div class="sourceCode"><pre>offset = naive_time - sys_time
</pre></div>


<h3>Value</h3>

<p>A data frame of low level information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(vctrs)

x &lt;- year_month_day(2021, 03, 14, c(01, 03), c(59, 00), c(59, 00))
x &lt;- as_naive_time(x)
x &lt;- as_zoned_time(x, "America/New_York")

# x[1] is in EST, x[2] is in EDT
x

x_sys &lt;- as_sys_time(x)

info &lt;- sys_time_info(x_sys, zoned_time_zone(x))
info

# Convert `begin` and `end` to zoned-times to see the previous and
# next daylight saving time transitions
data_frame(
  x = x,
  begin = as_zoned_time(info$begin, zoned_time_zone(x)),
  end = as_zoned_time(info$end, zoned_time_zone(x))
)

# `end` can be used to iterate through daylight saving time transitions
# by repeatedly calling `sys_time_info()`
sys_time_info(info$end, zoned_time_zone(x))

# Multiple `zone`s can be supplied to look up daylight saving time
# information in different time zones
zones &lt;- c("America/New_York", "America/Los_Angeles")

info2 &lt;- sys_time_info(x_sys[1], zones)
info2

# The offset can be used to display the naive-time (i.e. the printed time)
# in both of those time zones
data_frame(
  zone = zones,
  naive_time = x_sys[1] + info2$offset
)
</code></pre>

<hr>
<h2 id='sys_time_now'>What is the current sys-time?</h2><span id='topic+sys_time_now'></span>

<h3>Description</h3>

<p><code>sys_time_now()</code> returns the current time in UTC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sys_time_now()
</code></pre>


<h3>Details</h3>

<p>The time is returned with a nanosecond precision, but the actual amount
of data returned is OS dependent. Usually, information at at least the
microsecond level is returned, with some platforms returning nanosecond
information.
</p>


<h3>Value</h3>

<p>A sys-time of the current time in UTC.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- sys_time_now()
</code></pre>

<hr>
<h2 id='sys-parsing'>Parsing: sys-time</h2><span id='topic+sys-parsing'></span><span id='topic+sys_time_parse'></span><span id='topic+sys_time_parse_RFC_3339'></span>

<h3>Description</h3>

<p>There are two parsers into a sys-time, <code>sys_time_parse()</code> and
<code>sys_time_parse_RFC_3339()</code>.
</p>


<h4>sys_time_parse()</h4>

<p><code>sys_time_parse()</code> is useful when you have date-time strings like
<code>"2020-01-01T01:04:30"</code> that you know should be interpreted as UTC, or like
<code>"2020-01-01T01:04:30-04:00"</code> with a UTC offset but no zone name. If you find
yourself in the latter situation, then parsing this string as a sys-time
using the <code style="white-space: pre;">&#8288;%Ez&#8288;</code> command to capture the offset is probably your best option.
If you know that this string should be interpreted in a specific time zone,
parse as a sys-time to get the UTC equivalent, then use <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code>.
</p>
<p>The default options assume that <code>x</code> should be parsed at second precision,
using a <code>format</code> string of <code>"%Y-%m-%dT%H:%M:%S"</code>. This matches the default
result from calling <code>format()</code> on a sys-time.
</p>
<p><code>sys_time_parse()</code> is nearly equivalent to <code><a href="#topic+naive_time_parse">naive_time_parse()</a></code>, except for
the fact that the <code style="white-space: pre;">&#8288;%z&#8288;</code> command is actually used. Using <code style="white-space: pre;">&#8288;%z&#8288;</code> assumes that the
rest of the date-time string should be interpreted as a naive-time, which is
then shifted by the UTC offset found in <code style="white-space: pre;">&#8288;%z&#8288;</code>. The returned time can then be
validly interpreted as UTC.
</p>
<p><em><code>sys_time_parse()</code> ignores the <code style="white-space: pre;">&#8288;%Z&#8288;</code> command.</em>
</p>



<h4>sys_time_parse_RFC_3339()</h4>

<p><code>sys_time_parse_RFC_3339()</code> is a wrapper around <code>sys_time_parse()</code> that is
intended to parse the extremely common date-time format outlined by
<a href="https://datatracker.ietf.org/doc/html/rfc3339">RFC 3339</a>. This document
outlines a profile of the ISO 8601 format that is even more restrictive.
</p>
<p>In particular, this function is intended to parse the following three
formats:
</p>
<div class="sourceCode"><pre>2019-01-01T00:00:00Z
2019-01-01T00:00:00+0430
2019-01-01T00:00:00+04:30
</pre></div>
<p>This function defaults to parsing the first of these formats by using
a format string of <code>"%Y-%m-%dT%H:%M:%SZ"</code>.
</p>
<p>If your date-time strings use offsets from UTC rather than <code>"Z"</code>, then set
<code>offset</code> to one of the following:
</p>

<ul>
<li> <p><code>"%z"</code> if the offset is of the form <code>"+0430"</code>.
</p>
</li>
<li> <p><code>"%Ez"</code> if the offset is of the form <code>"+04:30"</code>.
</p>
</li></ul>

<p>The RFC 3339 standard allows for replacing the <code>"T"</code> with a <code>"t"</code> or a space
(<code>" "</code>). Set <code>separator</code> to adjust this as needed.
</p>
<p>For this function, the <code>precision</code> must be at least <code>"second"</code>.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>sys_time_parse(
  x,
  ...,
  format = NULL,
  precision = "second",
  locale = clock_locale()
)

sys_time_parse_RFC_3339(
  x,
  ...,
  separator = "T",
  offset = "Z",
  precision = "second"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sys-parsing_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="sys-parsing_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="sys-parsing_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="sys-parsing_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision for the resulting time point. One of:
</p>

<ul>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>

<p>Setting the <code>precision</code> determines how much information <code style="white-space: pre;">&#8288;%S&#8288;</code> attempts
to parse.</p>
</td></tr>
<tr><td><code id="sys-parsing_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
<tr><td><code id="sys-parsing_+3A_separator">separator</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The separator between the date and time components of the string. One of:
</p>

<ul>
<li> <p><code>"T"</code>
</p>
</li>
<li> <p><code>"t"</code>
</p>
</li>
<li> <p><code>" "</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="sys-parsing_+3A_offset">offset</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>The format of the offset from UTC contained in the string. One of:
</p>

<ul>
<li> <p><code>"Z"</code>
</p>
</li>
<li> <p><code>"z"</code>
</p>
</li>
<li> <p><code>"%z"</code> to parse a numeric offset of the form <code>"+0430"</code>
</p>
</li>
<li> <p><code>"%Ez"</code> to parse a numeric offset of the form <code>"+04:30"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>If your date-time strings contain a full time zone name and a UTC offset, use
<code><a href="#topic+zoned_time_parse_complete">zoned_time_parse_complete()</a></code>. If they contain a time zone abbreviation, use
<code><a href="#topic+zoned_time_parse_abbrev">zoned_time_parse_abbrev()</a></code>.
</p>
<p>If your date-time strings don't contain an offset from UTC and you aren't
sure if they should be treated as UTC or not, you might consider using
<code><a href="#topic+naive_time_parse">naive_time_parse()</a></code>, since the resulting naive-time doesn't come with an
assumption of a UTC time zone.
</p>


<h3>Value</h3>

<p>A sys-time.
</p>


<h3>Full Precision Parsing</h3>

<p>It is highly recommended to parse all of the information in the date-time
string into a type at least as precise as the string. For example, if your
string has fractional seconds, but you only require seconds, specify a
sub-second <code>precision</code>, then round to seconds manually using whatever
convention is appropriate for your use case. Parsing such a string directly
into a second precision result is ambiguous and undefined, and is unlikely to
work as you might expect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sys_time_parse("2020-01-01T05:06:07")

# Day precision
sys_time_parse("2020-01-01", precision = "day")

# Nanosecond precision, but using a day based format
sys_time_parse("2020-01-01", format = "%Y-%m-%d", precision = "nanosecond")

# Multiple format strings are allowed for heterogeneous times
sys_time_parse(
  c("2019-01-01", "2019/1/1"),
  format = c("%Y/%m/%d", "%Y-%m-%d"),
  precision = "day"
)

# The `%z` command shifts the date-time by subtracting the UTC offset so
# that the returned sys-time can be interpreted as UTC
sys_time_parse(
  "2020-01-01 02:00:00 -0400",
  format = "%Y-%m-%d %H:%M:%S %z"
)

# Remember that the `%Z` command is ignored entirely!
sys_time_parse("2020-01-01 America/New_York", format = "%Y-%m-%d %Z")

# ---------------------------------------------------------------------------
# RFC 3339

# Typical UTC format
x &lt;- "2019-01-01T00:01:02Z"
sys_time_parse_RFC_3339(x)

# With a UTC offset containing a `:`
x &lt;- "2019-01-01T00:01:02+02:30"
sys_time_parse_RFC_3339(x, offset = "%Ez")

# With a space between the date and time and no `:` in the offset
x &lt;- "2019-01-01 00:01:02+0230"
sys_time_parse_RFC_3339(x, separator = " ", offset = "%z")
</code></pre>

<hr>
<h2 id='time_point_cast'>Cast a time point between precisions</h2><span id='topic+time_point_cast'></span>

<h3>Description</h3>

<p>Casting is one way to change a time point's precision.
</p>
<p>Casting to a less precise precision will completely drop information that
is more precise than the precision that you are casting to. It does so
in a way that makes it round towards zero. When converting time points
to a less precise precision, you often want <code><a href="#topic+time_point_floor">time_point_floor()</a></code> instead
of <code>time_point_cast()</code>, as that handles pre-1970 dates (which are
stored as negative durations) in a more intuitive manner.
</p>
<p>Casting to a more precise precision is done through a multiplication by
a conversion factor between the current precision and the new precision.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_cast(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_point_cast_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time / clock_naive_time]&#8288;</code>
</p>
<p>A sys-time or naive-time.</p>
</td></tr>
<tr><td><code id="time_point_cast_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A time point precision. One of:
</p>

<ul>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> cast to the new <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision time points
# One is pre-1970, one is post-1970
x &lt;- duration_hours(c(25, -25))
x &lt;- as_naive_time(x)
x

# Casting rounds the underlying duration towards 0
cast &lt;- time_point_cast(x, "day")
cast

# Flooring rounds the underlying duration towards negative infinity,
# which is often more intuitive for time points.
# Note that the cast ends up rounding the pre-1970 date up to the next
# day, while the post-1970 date is rounded down.
floor &lt;- time_point_floor(x, "day")
floor

# Casting to a more precise precision, hour-&gt;millisecond
time_point_cast(x, "millisecond")
</code></pre>

<hr>
<h2 id='time_point_count_between'>Counting: time point</h2><span id='topic+time_point_count_between'></span>

<h3>Description</h3>

<p><code>time_point_count_between()</code> counts the number of <code>precision</code> units
between <code>start</code> and <code>end</code> (i.e., the number of days or hours). This count
corresponds to the <em>whole number</em> of units, and will never return a
fractional value.
</p>
<p>This is suitable for, say, computing the whole number of days between two
time points, accounting for the time of day.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_point_count_between_+3A_start">start</code>, <code id="time_point_count_between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_time_point]&#8288;</code>
</p>
<p>A pair of time points. These will be recycled to their common size.</p>
</td></tr>
<tr><td><code id="time_point_count_between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="time_point_count_between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="time_point_count_between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Remember that <code>time_point_count_between()</code> returns an integer vector.
With extremely fine precisions, such as nanoseconds, the count can quickly
exceed the maximum value that is allowed in an integer. In this case, an
<code>NA</code> will be returned with a warning.
</p>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Comparison Direction</h3>

<p>The computed count has the property that if <code>start &lt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &lt;= end&#8288;</code>. Similarly, if <code>start &gt;= end</code>, then
<code style="white-space: pre;">&#8288;start + &lt;count&gt; &gt;= end&#8288;</code>. In other words, the comparison direction between
<code>start</code> and <code>end</code> will never change after adding the count to <code>start</code>. This
makes this function useful for repeated count computations at
increasingly fine precisions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_naive_time(year_month_day(2019, 2, 3))
y &lt;- as_naive_time(year_month_day(2019, 2, 10))

# Whole number of days or hours between two time points
time_point_count_between(x, y, "day")
time_point_count_between(x, y, "hour")

# Whole number of 2-day units
time_point_count_between(x, y, "day", n = 2)

# Leap years are taken into account
x &lt;- as_naive_time(year_month_day(c(2020, 2021), 2, 28))
y &lt;- as_naive_time(year_month_day(c(2020, 2021), 3, 01))
time_point_count_between(x, y, "day")

# Time of day is taken into account.
# `2020-02-02T04 -&gt; 2020-02-03T03` is not a whole day (because of the hour)
# `2020-02-02T04 -&gt; 2020-02-03T05` is a whole day
x &lt;- as_naive_time(year_month_day(2020, 2, 2, 4))
y &lt;- as_naive_time(year_month_day(2020, 2, 3, c(3, 5)))
time_point_count_between(x, y, "day")
time_point_count_between(x, y, "hour")

# Can compute negative counts (using the same example from above)
time_point_count_between(y, x, "day")
time_point_count_between(y, x, "hour")

# Repeated computation at increasingly fine precisions
x &lt;- as_naive_time(year_month_day(
  2020, 2, 2, 4, 5, 6, 200,
  subsecond_precision = "microsecond"
))
y &lt;- as_naive_time(year_month_day(
  2020, 3, 1, 8, 9, 10, 100,
  subsecond_precision = "microsecond"
))

days &lt;- time_point_count_between(x, y, "day")
x &lt;- x + duration_days(days)

hours &lt;- time_point_count_between(x, y, "hour")
x &lt;- x + duration_hours(hours)

minutes &lt;- time_point_count_between(x, y, "minute")
x &lt;- x + duration_minutes(minutes)

seconds &lt;- time_point_count_between(x, y, "second")
x &lt;- x + duration_seconds(seconds)

microseconds &lt;- time_point_count_between(x, y, "microsecond")
x &lt;- x + duration_microseconds(microseconds)

data.frame(
  days = days,
  hours = hours,
  minutes = minutes,
  seconds = seconds,
  microseconds = microseconds
)
</code></pre>

<hr>
<h2 id='time_point_precision'>Precision: time point</h2><span id='topic+time_point_precision'></span>

<h3>Description</h3>

<p><code>time_point_precision()</code> extracts the precision from a time point, such
as a sys-time or naive-time. It returns the precision as a single string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_precision(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_point_precision_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_time_point]&#8288;</code>
</p>
<p>A time point.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single string holding the precision of the time point.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>time_point_precision(sys_time_now())
time_point_precision(as_naive_time(duration_days(1)))
</code></pre>

<hr>
<h2 id='time_point_shift'>Shifting: time point</h2><span id='topic+time_point_shift'></span>

<h3>Description</h3>

<p><code>time_point_shift()</code> shifts <code>x</code> to the <code>target</code> weekday. You can
shift to the next or previous weekday. If <code>x</code> is currently on the <code>target</code>
weekday, you can choose to leave it alone or advance it to the next instance
of the <code>target</code>.
</p>
<p>Weekday shifting is one of the easiest ways to floor by week while
controlling what is considered the first day of the week. You can also
accomplish this with the <code>origin</code> argument of <code><a href="#topic+time_point_floor">time_point_floor()</a></code>, but
this is slightly easier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_shift(x, target, ..., which = "next", boundary = "keep")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_point_shift_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_time_point]&#8288;</code>
</p>
<p>A time point.</p>
</td></tr>
<tr><td><code id="time_point_shift_+3A_target">target</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday created from <code><a href="#topic+weekday">weekday()</a></code> to target.
</p>
<p>Generally this is length 1, but can also be the same length as <code>x</code>.</p>
</td></tr>
<tr><td><code id="time_point_shift_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="time_point_shift_+3A_which">which</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"next"</code>: Shift to the next instance of the <code>target</code> weekday.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;"previous&#8288;</code>: Shift to the previous instance of the <code>target</code> weekday.
</p>
</li></ul>
</td></tr>
<tr><td><code id="time_point_shift_+3A_boundary">boundary</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"keep"</code>: If <code>x</code> is currently on the <code>target</code> weekday, return it.
</p>
</li>
<li> <p><code>"advance"</code>: If <code>x</code> is currently on the <code>target</code> weekday, advance it
anyways.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> shifted to the <code>target</code> weekday.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_naive_time(year_month_day(2019, 1, 1:2))

# A Tuesday and Wednesday
as_weekday(x)

monday &lt;- weekday(clock_weekdays$monday)

# Shift to the next Monday
time_point_shift(x, monday)

# Shift to the previous Monday
# This is an easy way to "floor by week" with a target weekday in mind
time_point_shift(x, monday, which = "previous")

# What about Tuesday?
tuesday &lt;- weekday(clock_weekdays$tuesday)

# Notice that the day that was currently on a Tuesday was not shifted
time_point_shift(x, tuesday)

# You can force it to `"advance"`
time_point_shift(x, tuesday, boundary = "advance")
</code></pre>

<hr>
<h2 id='time_point_spanning_seq'>Spanning sequence: time points</h2><span id='topic+time_point_spanning_seq'></span>

<h3>Description</h3>

<p><code>time_point_spanning_seq()</code> generates a regular sequence along the span of
<code>x</code>, i.e. along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>. The sequence is generated at the
precision of <code>x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_spanning_seq(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time_point_spanning_seq_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time / clock_naive_time]&#8288;</code>
</p>
<p>A time point vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing values are automatically removed before the sequence is generated.
</p>
<p>If you need more precise sequence generation, call <code><a href="base.html#topic+range">range()</a></code> and <code><a href="base.html#topic+seq">seq()</a></code>
directly.
</p>


<h3>Value</h3>

<p>A sequence along <code style="white-space: pre;">&#8288;[min(x), max(x)]&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_naive_time(year_month_day(2019, c(1, 2, 1, 2), c(15, 4, 12, 2)))
x

time_point_spanning_seq(x)

# The sequence is generated at the precision of `x`
x &lt;- as_naive_time(c(
  year_month_day(2019, 1, 1, 5),
  year_month_day(2019, 1, 2, 10),
  year_month_day(2019, 1, 1, 3)
))
time_point_spanning_seq(x)
</code></pre>

<hr>
<h2 id='time-point-arithmetic'>Arithmetic: Time points</h2><span id='topic+time-point-arithmetic'></span><span id='topic+add_weeks.clock_time_point'></span><span id='topic+add_days.clock_time_point'></span><span id='topic+add_hours.clock_time_point'></span><span id='topic+add_minutes.clock_time_point'></span><span id='topic+add_seconds.clock_time_point'></span><span id='topic+add_milliseconds.clock_time_point'></span><span id='topic+add_microseconds.clock_time_point'></span><span id='topic+add_nanoseconds.clock_time_point'></span>

<h3>Description</h3>

<p>These are naive-time and sys-time methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_weeks()</code>
</p>
</li>
<li> <p><code>add_days()</code>
</p>
</li>
<li> <p><code>add_hours()</code>
</p>
</li>
<li> <p><code>add_minutes()</code>
</p>
</li>
<li> <p><code>add_seconds()</code>
</p>
</li>
<li> <p><code>add_milliseconds()</code>
</p>
</li>
<li> <p><code>add_microseconds()</code>
</p>
</li>
<li> <p><code>add_nanoseconds()</code>
</p>
</li></ul>

<p>When working with zoned times, generally you convert to either sys-time
or naive-time, add the duration, then convert back to zoned time. Typically,
<em>weeks and days</em> are added in <em>naive-time</em>, and <em>hours, minutes, seconds,
and subseconds</em> are added in <em>sys-time</em>.
</p>
<p>If you aren't using zoned times, arithmetic on sys-times and naive-time
is equivalent.
</p>
<p>If you need to add larger irregular units of time, such as months, quarters,
or years, convert to a calendar type with a converter like
<code><a href="#topic+as_year_month_day">as_year_month_day()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_time_point'
add_weeks(x, n, ...)

## S3 method for class 'clock_time_point'
add_days(x, n, ...)

## S3 method for class 'clock_time_point'
add_hours(x, n, ...)

## S3 method for class 'clock_time_point'
add_minutes(x, n, ...)

## S3 method for class 'clock_time_point'
add_seconds(x, n, ...)

## S3 method for class 'clock_time_point'
add_milliseconds(x, n, ...)

## S3 method for class 'clock_time_point'
add_microseconds(x, n, ...)

## S3 method for class 'clock_time_point'
add_nanoseconds(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time-point-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time / clock_naive_time]&#8288;</code>
</p>
<p>A time point vector.</p>
</td></tr>
<tr><td><code id="time-point-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="time-point-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

# Say you started with this zoned time, and you want to add 1 day to it
x &lt;- as_naive_time(year_month_day(1970, 04, 25, 02, 30, 00))
x &lt;- as_zoned_time(x, "America/New_York")
x

# Note that there was a daylight saving time gap on 1970-04-26 where
# we jumped from 01:59:59 -&gt; 03:00:00.

# You can choose to add 1 day in "system time", by first converting to
# sys-time (the equivalent UTC time), adding the day, then converting back to
# zoned time. If you sat still for exactly 86,400 seconds, this is the
# time that you would see after daylight saving time adjusted the clock
# (note that the hour field is shifted forward by the size of the gap)
as_sys_time(x)

x %&gt;%
  as_sys_time() %&gt;%
  add_days(1) %&gt;%
  as_zoned_time(zoned_time_zone(x))

# Alternatively, you can add 1 day in "naive time". Naive time represents
# a clock time with a yet-to-be-specified time zone. It tries to maintain
# smaller units where possible, so adding 1 day would attempt to return
# "1970-04-26T02:30:00" in the America/New_York time zone, but...
as_naive_time(x)

try({
x %&gt;%
  as_naive_time() %&gt;%
  add_days(1) %&gt;%
  as_zoned_time(zoned_time_zone(x))
})

# ...this time doesn't exist in that time zone! It is "nonexistent".
# You can resolve nonexistent times by setting the `nonexistent` argument
# when converting to zoned time. Let's roll forward to the next available
# moment in time.
x %&gt;%
  as_naive_time() %&gt;%
  add_days(1) %&gt;%
  as_zoned_time(zoned_time_zone(x), nonexistent = "roll-forward")
</code></pre>

<hr>
<h2 id='time-point-rounding'>Time point rounding</h2><span id='topic+time-point-rounding'></span><span id='topic+time_point_floor'></span><span id='topic+time_point_ceiling'></span><span id='topic+time_point_round'></span>

<h3>Description</h3>


<ul>
<li> <p><code>time_point_floor()</code> rounds a sys-time or naive-time down to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>time_point_ceiling()</code> rounds a sys-time or naive-time up to a multiple of
the specified <code>precision</code>.
</p>
</li>
<li> <p><code>time_point_round()</code> rounds up or down depending on what is closer,
rounding up on ties.
</p>
</li></ul>

<p>Rounding time points is mainly useful for rounding sub-daily time points
up to daily time points.
</p>
<p>It can also be useful for flooring by a set number of days (like 20) with
respect to some origin. By default, the origin is 1970-01-01 00:00:00.
</p>
<p>If you want to group by components, such as &quot;day of the month&quot;, rather than
by &quot;n days&quot;, see <code><a href="#topic+calendar_group">calendar_group()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_point_floor(x, precision, ..., n = 1L, origin = NULL)

time_point_ceiling(x, precision, ..., n = 1L, origin = NULL)

time_point_round(x, precision, ..., n = 1L, origin = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="time-point-rounding_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time / clock_naive_time]&#8288;</code>
</p>
<p>A sys-time or naive-time.</p>
</td></tr>
<tr><td><code id="time-point-rounding_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A time point precision. One of:
</p>

<ul>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="time-point-rounding_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="time-point-rounding_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A positive integer specifying the multiple of <code>precision</code> to use.</p>
</td></tr>
<tr><td><code id="time-point-rounding_+3A_origin">origin</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_sys_time(1) / clock_naive_time(1) / NULL]&#8288;</code>
</p>
<p>An origin to begin counting from. Mostly useful when <code>n &gt; 1</code> and you
want to control how the rounding groups are created.
</p>
<p>If <code>x</code> is a sys-time, <code>origin</code> must be a sys-time.
</p>
<p>If <code>x</code> is a naive-time, <code>origin</code> must be a naive-time.
</p>
<p>The precision of <code>origin</code> must be equally precise as or less
precise than <code>precision</code>.
</p>
<p>If <code>NULL</code>, a default origin of midnight on 1970-01-01 is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> rounded to the new <code>precision</code>.
</p>


<h3>Boundary Handling</h3>

<p>To understand how flooring and ceiling work, you need to know how they
create their intervals for rounding.
</p>

<ul>
<li> <p><code>time_point_floor()</code> constructs intervals of <code>[lower, upper)</code> that
bound each element of <code>x</code>, then always chooses the <em>left-hand side</em>.
</p>
</li>
<li> <p><code>time_point_ceiling()</code> constructs intervals of <code>(lower, upper]</code> that
bound each element of <code>x</code>, then always chooses the <em>right-hand side</em>.
</p>
</li></ul>

<p>As an easy example, consider 2020-01-02 00:00:05.
</p>
<p>To floor this to the nearest day, the following interval is constructed,
and the left-hand side is returned at day precision:
</p>
<p><code>[2020-01-02 00:00:00, 2020-01-03 00:00:00)</code>
</p>
<p>To ceiling this to the nearest day, the following interval
is constructed, and the right-hand side is returned at day precision:
</p>
<p><code>(2020-01-02 00:00:00, 2020-01-03 00:00:00]</code>
</p>
<p>Here is another example, this time with a time point on a boundary,
2020-01-02 00:00:00.
</p>
<p>To floor this to the nearest day, the following interval is constructed,
and the left-hand side is returned at day precision:
</p>
<p><code>[2020-01-02 00:00:00, 2020-01-03 00:00:00)</code>
</p>
<p>To ceiling this to the nearest day, the following interval
is constructed, and the right-hand side is returned at day precision:
</p>
<p><code>(2020-01-01 00:00:00, 2020-01-02 00:00:00]</code>
</p>
<p>Notice that, regardless of whether you are doing a floor or ceiling, if
the input falls on a boundary then it will be returned as is.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

x &lt;- as_naive_time(year_month_day(2019, 01, 01))
x &lt;- add_days(x, 0:40)
head(x)

# Floor by sets of 20 days
# The implicit origin to start the 20 day counter is 1970-01-01
time_point_floor(x, "day", n = 20)

# You can easily customize the origin by supplying a new one
# as the `origin` argument
origin &lt;- year_month_day(2019, 01, 01) %&gt;%
  as_naive_time()

time_point_floor(x, "day", n = 20, origin = origin)

# For times on the boundary, floor and ceiling both return the input
# at the new precision. Notice how the first element is on the boundary,
# and the second is 1 second after the boundary.
y &lt;- as_naive_time(year_month_day(2020, 01, 02, 00, 00, c(00, 01)))
time_point_floor(y, "day")
time_point_ceiling(y, "day")
</code></pre>

<hr>
<h2 id='vec_arith.clock_year_day'>Support for vctrs arithmetic</h2><span id='topic+vec_arith.clock_year_day'></span><span id='topic+clock-arith'></span><span id='topic+vec_arith.clock_year_month_day'></span><span id='topic+vec_arith.clock_year_month_weekday'></span><span id='topic+vec_arith.clock_iso_year_week_day'></span><span id='topic+vec_arith.clock_naive_time'></span><span id='topic+vec_arith.clock_year_quarter_day'></span><span id='topic+vec_arith.clock_sys_time'></span><span id='topic+vec_arith.clock_year_week_day'></span><span id='topic+vec_arith.clock_weekday'></span>

<h3>Description</h3>

<p>Support for vctrs arithmetic
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_year_month_day'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_year_month_weekday'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_iso_year_week_day'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_naive_time'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_year_quarter_day'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_sys_time'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_year_week_day'
vec_arith(op, x, y, ...)

## S3 method for class 'clock_weekday'
vec_arith(op, x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vec_arith.clock_year_day_+3A_op">op</code></td>
<td>
<p>An arithmetic operator as a string</p>
</td></tr>
<tr><td><code id="vec_arith.clock_year_day_+3A_x">x</code>, <code id="vec_arith.clock_year_day_+3A_y">y</code></td>
<td>
<p>A pair of vectors. For <code>!</code>, unary <code>+</code> and unary <code>-</code>, <code>y</code> will be
a sentinel object of class <code>MISSING</code>, as created by <code>MISSING()</code>.</p>
</td></tr>
<tr><td><code id="vec_arith.clock_year_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of the arithmetic operation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vctrs::vec_arith("+", year_month_day(2019), 1)
</code></pre>

<hr>
<h2 id='weekday'>Construct a weekday vector</h2><span id='topic+weekday'></span>

<h3>Description</h3>

<p>A <code>weekday</code> is a simple type that represents a day of the week.
</p>
<p>The most interesting thing about the weekday type is that it implements
<em>circular arithmetic</em>, which makes determining the &quot;next Monday&quot; or
&quot;previous Tuesday&quot; from a sys-time or naive-time easy to compute.
See the examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weekday(code = integer(), ..., encoding = "western")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weekday_+3A_code">code</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>Integer codes between <code style="white-space: pre;">&#8288;[1, 7]&#8288;</code> representing days of the week. The
interpretation of these values depends on <code>encoding</code>.</p>
</td></tr>
<tr><td><code id="weekday_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="weekday_+3A_encoding">encoding</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"western"</code>: Encode weekdays assuming <code>1 == Sunday</code> and <code>7 == Saturday</code>.
</p>
</li>
<li> <p><code>"iso"</code>: Encode weekdays assuming <code>1 == Monday</code> and <code>7 == Sunday</code>. This
is in line with the ISO standard.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A weekday vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- as_naive_time(year_month_day(2019, 01, 05))

# This is a Saturday!
as_weekday(x)

# Adjust to the next Wednesday
wednesday &lt;- weekday(clock_weekdays$wednesday)

# This returns the number of days until the next Wednesday using
# circular arithmetic
# "Wednesday - Saturday = 4 days until next Wednesday"
wednesday - as_weekday(x)

# Advance to the next Wednesday
x_next_wednesday &lt;- x + (wednesday - as_weekday(x))

as_weekday(x_next_wednesday)

# What about the previous Tuesday?
tuesday &lt;- weekday(clock_weekdays$tuesday)
x - (as_weekday(x) - tuesday)

# What about the next Saturday?
# With an additional condition that if today is a Saturday,
# then advance to the next one.
saturday &lt;- weekday(clock_weekdays$saturday)
x + 1L + (saturday - as_weekday(x + 1L))

# You can supply an ISO coding for `code` as well, where 1 == Monday.
weekday(1:7, encoding = "western")
weekday(1:7, encoding = "iso")
</code></pre>

<hr>
<h2 id='weekday_code'>Extract underlying weekday codes</h2><span id='topic+weekday_code'></span>

<h3>Description</h3>

<p><code>weekday_code()</code> extracts out the integer code for the weekday.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weekday_code(x, ..., encoding = "western")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weekday_code_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday vector.</p>
</td></tr>
<tr><td><code id="weekday_code_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="weekday_code_+3A_encoding">encoding</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"western"</code>: Encode weekdays assuming <code>1 == Sunday</code> and <code>7 == Saturday</code>.
</p>
</li>
<li> <p><code>"iso"</code>: Encode weekdays assuming <code>1 == Monday</code> and <code>7 == Sunday</code>. This
is in line with the ISO standard.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector of codes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Here we supply a western encoding to `weekday()`
x &lt;- weekday(1:7)
x

# We can extract out the codes using different encodings
weekday_code(x, encoding = "western")
weekday_code(x, encoding = "iso")
</code></pre>

<hr>
<h2 id='weekday_factor'>Convert a weekday to an ordered factor</h2><span id='topic+weekday_factor'></span>

<h3>Description</h3>

<p><code>weekday_factor()</code> converts a weekday object to an ordered factor. This
can be useful in combination with ggplot2, or for modeling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weekday_factor(x, ..., labels = "en", abbreviate = TRUE, encoding = "western")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weekday_factor_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[weekday]&#8288;</code>
</p>
<p>A weekday vector.</p>
</td></tr>
<tr><td><code id="weekday_factor_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="weekday_factor_+3A_labels">labels</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_labels / character(1)]&#8288;</code>
</p>
<p>Character representations of localized weekday names, month names, and
AM/PM names. Either the language code as string (passed on to
<code><a href="#topic+clock_labels_lookup">clock_labels_lookup()</a></code>), or an object created by <code><a href="#topic+clock_labels">clock_labels()</a></code>.</p>
</td></tr>
<tr><td><code id="weekday_factor_+3A_abbreviate">abbreviate</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[logical(1)]&#8288;</code>
</p>
<p>If <code>TRUE</code>, the abbreviated weekday names from <code>labels</code> will be used.
</p>
<p>If <code>FALSE</code>, the full weekday names from <code>labels</code> will be used.</p>
</td></tr>
<tr><td><code id="weekday_factor_+3A_encoding">encoding</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"western"</code>: Encode the weekdays as an ordered factor with levels from
Sunday -&gt; Saturday.
</p>
</li>
<li> <p><code>"iso"</code>: Encode the weekdays as an ordered factor with levels from
Monday -&gt; Sunday.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An ordered factor representing the weekdays.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- weekday(1:7)

# Default to Sunday -&gt; Saturday
weekday_factor(x)

# ISO encoding is Monday -&gt; Sunday
weekday_factor(x, encoding = "iso")

# With full names
weekday_factor(x, abbreviate = FALSE)

# Or a different language
weekday_factor(x, labels = "fr")
</code></pre>

<hr>
<h2 id='weekday-arithmetic'>Arithmetic: weekday</h2><span id='topic+weekday-arithmetic'></span><span id='topic+add_days.clock_weekday'></span>

<h3>Description</h3>

<p>These are weekday methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_days()</code>
</p>
</li></ul>

<p>Also check out the examples on the <code><a href="#topic+weekday">weekday()</a></code> page for more advanced
usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_weekday'
add_days(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="weekday-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_weekday]&#8288;</code>
</p>
<p>A weekday vector.</p>
</td></tr>
<tr><td><code id="weekday-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="weekday-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>saturday &lt;- weekday(clock_weekdays$saturday)
saturday

add_days(saturday, 1)
add_days(saturday, 2)
</code></pre>

<hr>
<h2 id='year_day'>Calendar: year-day</h2><span id='topic+year_day'></span>

<h3>Description</h3>

<p><code>year_day()</code> constructs a calendar vector from the Gregorian
year and day of the year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_day(
  year,
  day = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_day_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The day of the year. Values <code style="white-space: pre;">&#8288;[1, 366]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_day_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A year-day calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Just the year
x &lt;- year_day(2019:2025)
x

year_day(2020, 1:10)

# Last day of the year, accounting for leap years
year_day(2019:2021, "last")

# Precision can go all the way out to nanosecond
year_day(2019, 100, 2, 40, 45, 200, subsecond_precision = "nanosecond")
</code></pre>

<hr>
<h2 id='year_month_day'>Calendar: year-month-day</h2><span id='topic+year_month_day'></span>

<h3>Description</h3>

<p><code>year_month_day()</code> constructs the most common calendar type using the
Gregorian year, month, day, and time of day components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_month_day(
  year,
  month = NULL,
  day = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_month_day_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_month">month</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The month. Values <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last" / NULL]&#8288;</code>
</p>
<p>The day of the month. Values <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last day of the month is returned.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_month_day_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A year-month-day calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Just the year
x &lt;- year_month_day(2019:2025)

# Year-month type
year_month_day(2020, 1:12)

# The most common use case involves year, month, and day fields
x &lt;- year_month_day(2020, clock_months$january, 1:5)
x

# Precision can go all the way out to nanosecond
year_month_day(2019, 1, 2, 2, 40, 45, 200, subsecond_precision = "nanosecond")
</code></pre>

<hr>
<h2 id='year_month_day_parse'>Parsing: year-month-day</h2><span id='topic+year_month_day_parse'></span>

<h3>Description</h3>

<p><code>year_month_day_parse()</code> parses strings into a year-month-day.
</p>
<p>The default options assume <code>x</code> should be parsed at day precision, using a
<code>format</code> string of <code>"%Y-%m-%d"</code>.
</p>
<p>If a more precise precision than day is used, then time components will also
be parsed. The default format separates date and time components by a <code>"T"</code>
and the time components by a <code>":"</code>. For example, setting the precision to
<code>"second"</code> will use a default format of <code>"%Y-%m-%dT%H:%M:%S"</code>. This is
aligned with the <code><a href="base.html#topic+format">format()</a></code> method for year-month-day, and with the RFC 3339
standard.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_month_day_parse(
  x,
  ...,
  format = NULL,
  precision = "day",
  locale = clock_locale()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_month_day_parse_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="year_month_day_parse_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_month_day_parse_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="year_month_day_parse_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision for the resulting year-month-day. One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>

<p>Setting the <code>precision</code> determines how much information <code style="white-space: pre;">&#8288;%S&#8288;</code> attempts
to parse.</p>
</td></tr>
<tr><td><code id="year_month_day_parse_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created by <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>year_month_day_parse()</code> completely ignores the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands.
</p>


<h3>Value</h3>

<p>A year-month-day calendar vector. If a parsing fails, <code>NA</code> is
returned.
</p>


<h3>Full Precision Parsing</h3>

<p>It is highly recommended to parse all of the information in the date-time
string into a type at least as precise as the string. For example, if your
string has fractional seconds, but you only require seconds, specify a
sub-second <code>precision</code>, then round to seconds manually using whatever
convention is appropriate for your use case. Parsing such a string directly
into a second precision result is ambiguous and undefined, and is unlikely to
work as you might expect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- "2019-01-01"

# Default parses at day precision
year_month_day_parse(x)

# Can parse at less precise precisions too
year_month_day_parse(x, precision = "month")
year_month_day_parse(x, precision = "year")

# Even invalid dates can be round-tripped through format&lt;-&gt;parse calls
invalid &lt;- year_month_day(2019, 2, 30)
year_month_day_parse(format(invalid))

# Can parse with time of day
year_month_day_parse(
  "2019-01-30T02:30:00.123456789",
  precision = "nanosecond"
)

# Can parse using multiple format strings, which will be tried
# in the order they are provided
x &lt;- c("2019-01-01", "2020-01-01", "2021/2/3")
formats &lt;- c("%Y-%m-%d", "%Y/%m/%d")
year_month_day_parse(x, format = formats)

# Can parse using other format tokens as well
year_month_day_parse(
  "January, 2019",
  format = "%B, %Y",
  precision = "month"
)

# Parsing a French year-month-day
year_month_day_parse(
  "octobre 1, 2000",
  format = "%B %d, %Y",
  locale = clock_locale("fr")
)
</code></pre>

<hr>
<h2 id='year_month_weekday'>Calendar: year-month-weekday</h2><span id='topic+year_month_weekday'></span>

<h3>Description</h3>

<p><code>year_month_weekday()</code> constructs a calendar vector from the Gregorian
year, month, weekday, and index specifying that this is the n-th weekday
of the month.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_month_weekday(
  year,
  month = NULL,
  day = NULL,
  index = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_month_weekday_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_month">month</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The month. Values <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The weekday of the month. Values <code style="white-space: pre;">&#8288;[1, 7]&#8288;</code> are allowed, where <code>1</code> is
Sunday and <code>7</code> is Saturday.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_index">index</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last" / NULL]&#8288;</code>
</p>
<p>The index specifying that <code>day</code> is the n-th weekday of the month.
Values <code style="white-space: pre;">&#8288;[1, 5]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last instance of <code>day</code> in the current month
is returned.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_month_weekday_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A year-month-weekday calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># All Fridays in January, 2019
# Note that there was no 5th Friday in January
x &lt;- year_month_weekday(
  2019,
  clock_months$january,
  clock_weekdays$friday,
  1:5
)
x

invalid_detect(x)

# Resolve this invalid date by using the previous valid date
invalid_resolve(x, invalid = "previous")
</code></pre>

<hr>
<h2 id='year_quarter_day'>Calendar: year-quarter-day</h2><span id='topic+year_quarter_day'></span>

<h3>Description</h3>

<p><code>year_quarter_day()</code> constructs a calendar from the fiscal year, fiscal
quarter, and day of the quarter, along with a value determining which
month the fiscal year <code>start</code>s in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_quarter_day(
  year,
  quarter = NULL,
  day = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  start = NULL,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_quarter_day_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The fiscal year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_quarter">quarter</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The fiscal quarter. Values <code style="white-space: pre;">&#8288;[1, 4]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last" / NULL]&#8288;</code>
</p>
<p>The day of the quarter. Values <code style="white-space: pre;">&#8288;[1, 92]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, the last day of the quarter is returned.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_start">start</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / NULL]&#8288;</code>
</p>
<p>The month to start the fiscal year in. 1 = January and 12 = December.
</p>
<p>If <code>NULL</code>, a <code>start</code> of January will be used.</p>
</td></tr>
<tr><td><code id="year_quarter_day_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A year-quarter-day calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year-quarter type
x &lt;- year_quarter_day(2019, 1:4)
x

add_quarters(x, 2)

# Set the day to the last day of the quarter
x &lt;- set_day(x, "last")
x

# Start the fiscal year in June
june &lt;- 6L
y &lt;- year_quarter_day(2019, 1:4, "last", start = june)

# Compare the year-month-day values that result from having different
# fiscal year start months
as_year_month_day(x)
as_year_month_day(y)
</code></pre>

<hr>
<h2 id='year_week_day'>Calendar: year-week-day</h2><span id='topic+year_week_day'></span>

<h3>Description</h3>

<p><code>year_week_day()</code> constructs a calendar from the year, week number,
week day, and the <code>start</code> of the week.
</p>
<p>Using <code>start = clock_weekdays$monday</code> represents the ISO week calendar and
is equivalent to using <code><a href="#topic+iso_year_week_day">iso_year_week_day()</a></code>.
</p>
<p>Using <code>start = clock_weekdays$sunday</code> is how Epidemiologists encode their
week-based data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>year_week_day(
  year,
  week = NULL,
  day = NULL,
  hour = NULL,
  minute = NULL,
  second = NULL,
  subsecond = NULL,
  ...,
  start = NULL,
  subsecond_precision = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year_week_day_+3A_year">year</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer]&#8288;</code>
</p>
<p>The year. Values <code style="white-space: pre;">&#8288;[-32767, 32767]&#8288;</code> are generally allowed.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_week">week</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last" / NULL]&#8288;</code>
</p>
<p>The week. Values <code style="white-space: pre;">&#8288;[1, 53]&#8288;</code> are allowed.
</p>
<p>If <code>"last"</code>, then the last week of the year is returned.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_day">day</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The day of the week. Values <code style="white-space: pre;">&#8288;[1, 7]&#8288;</code> are allowed, with <code style="white-space: pre;">&#8288;1 = start of week&#8288;</code>
and <code style="white-space: pre;">&#8288;7 = end of week&#8288;</code>, in accordance with <code>start</code>.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_hour">hour</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The hour. Values <code style="white-space: pre;">&#8288;[0, 23]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_minute">minute</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The minute. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_second">second</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The second. Values <code style="white-space: pre;">&#8288;[0, 59]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_subsecond">subsecond</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / NULL]&#8288;</code>
</p>
<p>The subsecond. If specified, <code>subsecond_precision</code> must also be specified
to determine how to interpret the <code>subsecond</code>.
</p>
<p>If using milliseconds, values <code style="white-space: pre;">&#8288;[0, 999]&#8288;</code> are allowed.
</p>
<p>If using microseconds, values <code style="white-space: pre;">&#8288;[0, 999999]&#8288;</code> are allowed.
</p>
<p>If using nanoseconds, values <code style="white-space: pre;">&#8288;[0, 999999999]&#8288;</code> are allowed.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_start">start</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer(1) / NULL]&#8288;</code>
</p>
<p>The day to consider the start of the week. 1 = Sunday and 7 = Saturday.
</p>
<p>Use <a href="#topic+clock_weekdays">clock_weekdays</a> for a readable way to specify the start.
</p>
<p>If <code>NULL</code>, a <code>start</code> of Sunday will be used.</p>
</td></tr>
<tr><td><code id="year_week_day_+3A_subsecond_precision">subsecond_precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1) / NULL]&#8288;</code>
</p>
<p>The precision to interpret <code>subsecond</code> as. One of: <code>"millisecond"</code>,
<code>"microsecond"</code>, or <code>"nanosecond"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fields are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>
<p>Fields are collected in order until the first <code>NULL</code> field is located. No
fields after the first <code>NULL</code> field are used.
</p>


<h3>Value</h3>

<p>A year-week-day calendar vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year-week
x &lt;- year_week_day(2019:2025, "last")
x

# Start the week on Monday
y &lt;- year_week_day(2019:2025, "last", start = clock_weekdays$monday)
y

# Last days of the year
as_year_month_day(set_day(x, 7))
as_year_month_day(set_day(y, 7))
</code></pre>

<hr>
<h2 id='year-day-arithmetic'>Arithmetic: year-day</h2><span id='topic+year-day-arithmetic'></span><span id='topic+add_years.clock_year_day'></span>

<h3>Description</h3>

<p>These are year-day methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li></ul>

<p>Notably, <em>you cannot add days to a year-day</em>. For day-based arithmetic,
first convert to a time point with <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or <code><a href="#topic+as_sys_time">as_sys_time()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
add_years(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="year-day-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_day(2019, 10)

add_years(x, 1:5)

# A valid day in a leap year
y &lt;- year_day(2020, 366)
y

# Adding 1 year to `y` generates an invalid date
y_plus &lt;- add_years(y, 1)
y_plus

# Invalid dates are fine, as long as they are eventually resolved
# by either manually resolving, or by calling `invalid_resolve()`

# Resolve by returning the previous / next valid moment in time
invalid_resolve(y_plus, invalid = "previous")
invalid_resolve(y_plus, invalid = "next")

# Manually resolve by setting to the last day of the year
invalid &lt;- invalid_detect(y_plus)
y_plus[invalid] &lt;- set_day(y_plus[invalid], "last")
y_plus
</code></pre>

<hr>
<h2 id='year-day-boundary'>Boundaries: year-day</h2><span id='topic+year-day-boundary'></span><span id='topic+calendar_start.clock_year_day'></span><span id='topic+calendar_end.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
calendar_start(x, precision)

## S3 method for class 'clock_year_day'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Day precision
x &lt;- year_day(2019:2020, 5)
x

# Compute the last day of the year
calendar_end(x, "year")
</code></pre>

<hr>
<h2 id='year-day-count-between'>Counting: year-day</h2><span id='topic+year-day-count-between'></span><span id='topic+calendar_count_between.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code> generic.
It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code>
(i.e., the number of years).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-count-between_+3A_start">start</code>, <code id="year-day-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A pair of year-day vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="year-day-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-day-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-day-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute an individual's age in years
x &lt;- year_day(2001, 100)
y &lt;- year_day(2021, c(99, 101))

calendar_count_between(x, y, "year")

# Or in a whole number multiple of years
calendar_count_between(x, y, "year", n = 3)
</code></pre>

<hr>
<h2 id='year-day-getters'>Getters: year-day</h2><span id='topic+year-day-getters'></span><span id='topic+get_year.clock_year_day'></span><span id='topic+get_day.clock_year_day'></span><span id='topic+get_hour.clock_year_day'></span><span id='topic+get_minute.clock_year_day'></span><span id='topic+get_second.clock_year_day'></span><span id='topic+get_millisecond.clock_year_day'></span><span id='topic+get_microsecond.clock_year_day'></span><span id='topic+get_nanosecond.clock_year_day'></span>

<h3>Description</h3>

<p>These are year-day methods for the <a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the Gregorian year.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the year.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
get_year(x)

## S3 method for class 'clock_year_day'
get_day(x)

## S3 method for class 'clock_year_day'
get_hour(x)

## S3 method for class 'clock_year_day'
get_minute(x)

## S3 method for class 'clock_year_day'
get_second(x)

## S3 method for class 'clock_year_day'
get_millisecond(x)

## S3 method for class 'clock_year_day'
get_microsecond(x)

## S3 method for class 'clock_year_day'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_day(2019, 101:105, 1, 20, 30)

get_day(x)
get_second(x)

# Cannot extract more precise components
y &lt;- year_day(2019, 1)
try(get_hour(y))

# Cannot extract components that don't exist for this calendar
try(get_quarter(x))
</code></pre>

<hr>
<h2 id='year-day-group'>Grouping: year-day</h2><span id='topic+year-day-group'></span><span id='topic+calendar_group.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a year-day object can be done at any precision, as
long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-day-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-day-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- seq(as_naive_time(year_month_day(2019, 1, 1)), by = 5, length.out = 20)
x &lt;- as_year_day(x)
x

# Group by day of the current year
calendar_group(x, "day", n = 20)
</code></pre>

<hr>
<h2 id='year-day-narrow'>Narrow: year-day</h2><span id='topic+year-day-narrow'></span><span id='topic+calendar_narrow.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a year-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision
x &lt;- year_day(2019, 3, 4)
x

# Narrowed to day precision
calendar_narrow(x, "day")

# Or year precision
calendar_narrow(x, "year")

# Subsecond precision can be narrowed to second precision
milli &lt;- calendar_widen(x, "millisecond")
micro &lt;- calendar_widen(x, "microsecond")
milli
micro

calendar_narrow(milli, "second")
calendar_narrow(micro, "second")

# But once you have "locked in" a subsecond precision, it can't be
# narrowed to another subsecond precision
try(calendar_narrow(micro, "millisecond"))
</code></pre>

<hr>
<h2 id='year-day-setters'>Setters: year-day</h2><span id='topic+year-day-setters'></span><span id='topic+set_year.clock_year_day'></span><span id='topic+set_day.clock_year_day'></span><span id='topic+set_hour.clock_year_day'></span><span id='topic+set_minute.clock_year_day'></span><span id='topic+set_second.clock_year_day'></span><span id='topic+set_millisecond.clock_year_day'></span><span id='topic+set_microsecond.clock_year_day'></span><span id='topic+set_nanosecond.clock_year_day'></span>

<h3>Description</h3>

<p>These are year-day methods for the
<a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the Gregorian year.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 366]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
set_year(x, value, ...)

## S3 method for class 'clock_year_day'
set_day(x, value, ...)

## S3 method for class 'clock_year_day'
set_hour(x, value, ...)

## S3 method for class 'clock_year_day'
set_minute(x, value, ...)

## S3 method for class 'clock_year_day'
set_second(x, value, ...)

## S3 method for class 'clock_year_day'
set_millisecond(x, value, ...)

## S3 method for class 'clock_year_day'
set_microsecond(x, value, ...)

## S3 method for class 'clock_year_day'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_day()</code>, this can also be <code>"last"</code> to set the day to the
last day of the year.</p>
</td></tr>
<tr><td><code id="year-day-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_day(2019)

# Set the day
set_day(x, 12:14)

# Set to the "last" day of the year
set_day(x, "last")

# Set to an invalid day of the year
invalid &lt;- set_day(x, 366)
invalid

# Then resolve the invalid day by choosing the next valid day
invalid_resolve(invalid, invalid = "next")

# Cannot set a component two levels more precise than where you currently are
try(set_hour(x, 5))
</code></pre>

<hr>
<h2 id='year-day-widen'>Widen: year-day</h2><span id='topic+year-day-widen'></span><span id='topic+calendar_widen.clock_year_day'></span>

<h3>Description</h3>

<p>This is a year-day method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a year-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_day'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-day-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_day]&#8288;</code>
</p>
<p>A year-day vector.</p>
</td></tr>
<tr><td><code id="year-day-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year precision
x &lt;- year_day(2019)
x

# Widen to day precision
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec

# Second precision can be widened to subsecond precision
milli &lt;- calendar_widen(sec, "millisecond")
micro &lt;- calendar_widen(sec, "microsecond")
milli
micro

# But once you have "locked in" a subsecond precision, it can't
# be widened again
try(calendar_widen(milli, "microsecond"))
</code></pre>

<hr>
<h2 id='year-month-day-arithmetic'>Arithmetic: year-month-day</h2><span id='topic+year-month-day-arithmetic'></span><span id='topic+add_years.clock_year_month_day'></span><span id='topic+add_quarters.clock_year_month_day'></span><span id='topic+add_months.clock_year_month_day'></span>

<h3>Description</h3>

<p>These are year-month-day methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li>
<li> <p><code>add_months()</code>
</p>
</li></ul>

<p>Notably, <em>you cannot add days to a year-month-day</em>. For day-based arithmetic,
first convert to a time point with <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or <code><a href="#topic+as_sys_time">as_sys_time()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
add_years(x, n, ...)

## S3 method for class 'clock_year_month_day'
add_quarters(x, n, ...)

## S3 method for class 'clock_year_month_day'
add_months(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="year-month-day-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adding a single quarter with <code>add_quarters()</code> is equivalent to adding
3 months.
</p>
<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1, 1)

add_years(x, 1:5)

y &lt;- year_month_day(2019, 1, 31)

# Adding 1 month to `y` generates an invalid date
y_plus &lt;- add_months(y, 1:2)
y_plus

# Invalid dates are fine, as long as they are eventually resolved
# by either manually resolving, or by calling `invalid_resolve()`

# Resolve by returning the previous / next valid moment in time
invalid_resolve(y_plus, invalid = "previous")
invalid_resolve(y_plus, invalid = "next")

# Manually resolve by setting to the last day of the month
invalid &lt;- invalid_detect(y_plus)
y_plus[invalid] &lt;- set_day(y_plus[invalid], "last")
y_plus
</code></pre>

<hr>
<h2 id='year-month-day-boundary'>Boundaries: year-month-day</h2><span id='topic+year-month-day-boundary'></span><span id='topic+calendar_start.clock_year_month_day'></span><span id='topic+calendar_end.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
calendar_start(x, precision)

## S3 method for class 'clock_year_month_day'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision
x &lt;- year_month_day(2019, 2:4, 5, 6)
x

# Compute the start of the month
calendar_start(x, "month")

# Or the end of the month, notice that the hour value is adjusted as well
calendar_end(x, "month")

# Compare that with just setting the day of the month to `"last"`, which
# doesn't adjust any other components
set_day(x, "last")

# You can't compute the start / end at a more precise precision than
# the input is at
try(calendar_start(x, "second"))
</code></pre>

<hr>
<h2 id='year-month-day-count-between'>Counting: year-month-day</h2><span id='topic+year-month-day-count-between'></span><span id='topic+calendar_count_between.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code> generic.
It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code>
(i.e., the number of years or months).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-count-between_+3A_start">start</code>, <code id="year-month-day-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A pair of year-month-day vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="year-month-day-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-month-day-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-month-day-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>"quarter"</code> is equivalent to <code>"month"</code> precision with <code>n</code> set to <code>n * 3L</code>.
</p>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute an individual's age in years
x &lt;- year_month_day(2001, 2, 4)
today &lt;- year_month_day(2021, 11, 30)
calendar_count_between(x, today, "year")

# Compute the number of months between two dates, taking
# into account the day of the month and time of day
x &lt;- year_month_day(2000, 4, 2, 5)
y &lt;- year_month_day(2000, 7, c(1, 2, 2), c(3, 4, 6))
calendar_count_between(x, y, "month")
</code></pre>

<hr>
<h2 id='year-month-day-getters'>Getters: year-month-day</h2><span id='topic+year-month-day-getters'></span><span id='topic+get_year.clock_year_month_day'></span><span id='topic+get_month.clock_year_month_day'></span><span id='topic+get_day.clock_year_month_day'></span><span id='topic+get_hour.clock_year_month_day'></span><span id='topic+get_minute.clock_year_month_day'></span><span id='topic+get_second.clock_year_month_day'></span><span id='topic+get_millisecond.clock_year_month_day'></span><span id='topic+get_microsecond.clock_year_month_day'></span><span id='topic+get_nanosecond.clock_year_month_day'></span>

<h3>Description</h3>

<p>These are year-month-day methods for the <a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the Gregorian year.
</p>
</li>
<li> <p><code>get_month()</code> returns the month of the year.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the month.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
get_year(x)

## S3 method for class 'clock_year_month_day'
get_month(x)

## S3 method for class 'clock_year_month_day'
get_day(x)

## S3 method for class 'clock_year_month_day'
get_hour(x)

## S3 method for class 'clock_year_month_day'
get_minute(x)

## S3 method for class 'clock_year_month_day'
get_second(x)

## S3 method for class 'clock_year_month_day'
get_millisecond(x)

## S3 method for class 'clock_year_month_day'
get_microsecond(x)

## S3 method for class 'clock_year_month_day'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1:3, 5:7, 1, 20, 30)

get_month(x)
get_day(x)
get_second(x)

# Cannot extract more precise components
y &lt;- year_month_day(2019, 1)
try(get_day(y))

# Cannot extract components that don't exist for this calendar
try(get_quarter(x))
</code></pre>

<hr>
<h2 id='year-month-day-group'>Grouping: year-month-day</h2><span id='topic+year-month-day-group'></span><span id='topic+calendar_group.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a year-month-day object can be done at any precision, as
long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-month-day-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-month-day-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>steps &lt;- duration_days(seq(0, 100, by = 5))
x &lt;- year_month_day(2019, 1, 1)
x &lt;- as_naive_time(x) + steps
x &lt;- as_year_month_day(x)
x

# Group by a single month
calendar_group(x, "month")

# Or multiple months
calendar_group(x, "month", n = 2)

# Group 3 days of the month together
y &lt;- year_month_day(2019, 1, 1:12)
calendar_group(y, "day", n = 3)

# Group by 5 nanosecond of the current second
z &lt;- year_month_day(
  2019, 1, 2, 1, 5, 20, 1:20,
  subsecond_precision = "nanosecond"
)
calendar_group(z, "nanosecond", n = 5)
</code></pre>

<hr>
<h2 id='year-month-day-narrow'>Narrow: year-month-day</h2><span id='topic+year-month-day-narrow'></span><span id='topic+calendar_narrow.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a year-month-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Hour precision
x &lt;- year_month_day(2019, 1, 3, 4)
x

# Narrowed to day precision
calendar_narrow(x, "day")

# Or month precision
calendar_narrow(x, "month")

# Subsecond precision can be narrowed to second precision
milli &lt;- calendar_widen(x, "millisecond")
micro &lt;- calendar_widen(x, "microsecond")
milli
micro

calendar_narrow(milli, "second")
calendar_narrow(micro, "second")

# But once you have "locked in" a subsecond precision, it can't be
# narrowed to another subsecond precision
try(calendar_narrow(micro, "millisecond"))
</code></pre>

<hr>
<h2 id='year-month-day-setters'>Setters: year-month-day</h2><span id='topic+year-month-day-setters'></span><span id='topic+set_year.clock_year_month_day'></span><span id='topic+set_month.clock_year_month_day'></span><span id='topic+set_day.clock_year_month_day'></span><span id='topic+set_hour.clock_year_month_day'></span><span id='topic+set_minute.clock_year_month_day'></span><span id='topic+set_second.clock_year_month_day'></span><span id='topic+set_millisecond.clock_year_month_day'></span><span id='topic+set_microsecond.clock_year_month_day'></span><span id='topic+set_nanosecond.clock_year_month_day'></span>

<h3>Description</h3>

<p>These are year-month-day methods for the
<a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the Gregorian year.
</p>
</li>
<li> <p><code>set_month()</code> sets the month of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the month. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 31]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
set_year(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_month(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_day(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_hour(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_minute(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_second(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_millisecond(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_microsecond(x, value, ...)

## S3 method for class 'clock_year_month_day'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_day()</code>, this can also be <code>"last"</code> to set the day to the
last day of the month.</p>
</td></tr>
<tr><td><code id="year-month-day-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1:3)

# Set the day
set_day(x, 12:14)

# Set to the "last" day of the month
set_day(x, "last")

# Set to an invalid day of the month
invalid &lt;- set_day(x, 31)
invalid

# Then resolve the invalid day by choosing the next valid day
invalid_resolve(invalid, invalid = "next")

# Cannot set a component two levels more precise than where you currently are
try(set_hour(x, 5))
</code></pre>

<hr>
<h2 id='year-month-day-widen'>Widen: year-month-day</h2><span id='topic+year-month-day-widen'></span><span id='topic+calendar_widen.clock_year_month_day'></span>

<h3>Description</h3>

<p>This is a year-month-day method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a year-month-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_day'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-day-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_day]&#8288;</code>
</p>
<p>A year-month-day vector.</p>
</td></tr>
<tr><td><code id="year-month-day-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Month precision
x &lt;- year_month_day(2019, 1)
x

# Widen to day precision
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec

# Second precision can be widened to subsecond precision
milli &lt;- calendar_widen(sec, "millisecond")
micro &lt;- calendar_widen(sec, "microsecond")
milli
micro

# But once you have "locked in" a subsecond precision, it can't
# be widened again
try(calendar_widen(milli, "microsecond"))
</code></pre>

<hr>
<h2 id='year-month-weekday-arithmetic'>Arithmetic: year-month-weekday</h2><span id='topic+year-month-weekday-arithmetic'></span><span id='topic+add_years.clock_year_month_weekday'></span><span id='topic+add_quarters.clock_year_month_weekday'></span><span id='topic+add_months.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>These are year-month-weekday methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li>
<li> <p><code>add_months()</code>
</p>
</li></ul>

<p>Notably, <em>you cannot add days to a year-month-weekday</em>. For day-based
arithmetic, first convert to a time point with <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or
<code><a href="#topic+as_sys_time">as_sys_time()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
add_years(x, n, ...)

## S3 method for class 'clock_year_month_weekday'
add_quarters(x, n, ...)

## S3 method for class 'clock_year_month_weekday'
add_months(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="year-month-weekday-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adding a single quarter with <code>add_quarters()</code> is equivalent to adding
3 months.
</p>
<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 2nd Friday in January, 2019
x &lt;- year_month_weekday(2019, 1, clock_weekdays$friday, 2)
x

add_months(x, 1:5)

# These don't necessarily correspond to the same day of the month
as_year_month_day(add_months(x, 1:5))
</code></pre>

<hr>
<h2 id='year-month-weekday-boundary'>Boundaries: year-month-weekday</h2><span id='topic+year-month-weekday-boundary'></span><span id='topic+calendar_start.clock_year_month_weekday'></span><span id='topic+calendar_end.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>
<p>This method is restricted to only <code>"year"</code> and <code>"month"</code> <code>precision</code>s, and
<code>x</code> can't be more precise than month precision. Computing the &quot;start&quot; of
a day precision year-month-weekday object isn't defined because
a year-month-weekday with <code style="white-space: pre;">&#8288;day = 1, index = 1&#8288;</code> doesn't necessarily occur
earlier (chronologically) than <code style="white-space: pre;">&#8288;day = 2, index = 1&#8288;</code>. Because of these
restrictions, this method isn't particularly useful, but is included for
completeness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
calendar_start(x, precision)

## S3 method for class 'clock_year_month_weekday'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Month precision
x &lt;- year_month_weekday(2019, 1:5)
x

# Compute the last month of the year
calendar_end(x, "year")
</code></pre>

<hr>
<h2 id='year-month-weekday-count-between'>Counting: year-month-weekday</h2><span id='topic+year-month-weekday-count-between'></span><span id='topic+calendar_count_between.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code>
generic. It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code>
(i.e., the number of years or months).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-count-between_+3A_start">start</code>, <code id="year-month-weekday-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A pair of year-month-weekday vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="year-month-weekday-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-month-weekday-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-month-weekday-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Remember that year-month-weekday is not comparable when it is <code>"day"</code>
precision or finer, so this method is only defined for <code>"year"</code> and
<code>"month"</code> precision year-month-weekday objects.
</p>
<p><code>"quarter"</code> is equivalent to <code>"month"</code> precision with <code>n</code> set to <code>n * 3L</code>.
</p>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute the number of months between two dates
x &lt;- year_month_weekday(2001, 2)
y &lt;- year_month_weekday(2021, c(1, 3))

calendar_count_between(x, y, "month")

# Remember that day precision or finer year-month-weekday objects
# are not comparable, so this won't work
x &lt;- year_month_weekday(2001, 2, 1, 1)
try(calendar_count_between(x, x, "month"))
</code></pre>

<hr>
<h2 id='year-month-weekday-getters'>Getters: year-month-weekday</h2><span id='topic+year-month-weekday-getters'></span><span id='topic+get_year.clock_year_month_weekday'></span><span id='topic+get_month.clock_year_month_weekday'></span><span id='topic+get_day.clock_year_month_weekday'></span><span id='topic+get_index.clock_year_month_weekday'></span><span id='topic+get_hour.clock_year_month_weekday'></span><span id='topic+get_minute.clock_year_month_weekday'></span><span id='topic+get_second.clock_year_month_weekday'></span><span id='topic+get_millisecond.clock_year_month_weekday'></span><span id='topic+get_microsecond.clock_year_month_weekday'></span><span id='topic+get_nanosecond.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>These are year-month-weekday methods for the
<a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the Gregorian year.
</p>
</li>
<li> <p><code>get_month()</code> returns the month of the year.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the week encoded from 1-7, where 1 = Sunday
and 7 = Saturday.
</p>
</li>
<li> <p><code>get_index()</code> returns a value from 1-5 indicating that the corresponding
weekday is the n-th instance of that weekday in the current month.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
get_year(x)

## S3 method for class 'clock_year_month_weekday'
get_month(x)

## S3 method for class 'clock_year_month_weekday'
get_day(x)

## S3 method for class 'clock_year_month_weekday'
get_index(x)

## S3 method for class 'clock_year_month_weekday'
get_hour(x)

## S3 method for class 'clock_year_month_weekday'
get_minute(x)

## S3 method for class 'clock_year_month_weekday'
get_second(x)

## S3 method for class 'clock_year_month_weekday'
get_millisecond(x)

## S3 method for class 'clock_year_month_weekday'
get_microsecond(x)

## S3 method for class 'clock_year_month_weekday'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>monday &lt;- clock_weekdays$monday
thursday &lt;- clock_weekdays$thursday

x &lt;- year_month_weekday(2019, 1, monday:thursday, 1:4)
x

# Gets the weekday, 1 = Sunday, 7 = Saturday
get_day(x)

# Gets the index indicating which instance of that particular weekday
# it is in the current month (i.e. the "1st Monday of January, 2019")
get_index(x)
</code></pre>

<hr>
<h2 id='year-month-weekday-group'>Grouping: year-month-weekday</h2><span id='topic+year-month-weekday-group'></span><span id='topic+calendar_group.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a year-month-weekday object can be done at any precision except
for <code>"day"</code>, as long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-month-weekday-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-month-weekday-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Grouping by <code>"day"</code> is undefined for a year-month-weekday because there are
two day fields, the weekday and the index, and there is no clear way to
define how to group by that.
</p>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_weekday(2019, 1:12, clock_weekdays$sunday, 1, 00, 05, 05)
x

# Group by 3 months - drops more precise components!
calendar_group(x, "month", n = 3)
</code></pre>

<hr>
<h2 id='year-month-weekday-narrow'>Narrow: year-month-weekday</h2><span id='topic+year-month-weekday-narrow'></span><span id='topic+calendar_narrow.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a year-month-weekday vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Day precision
x &lt;- year_month_weekday(2019, 1, 1, 2)
x

# Narrowed to month precision
calendar_narrow(x, "month")
</code></pre>

<hr>
<h2 id='year-month-weekday-setters'>Setters: year-month-weekday</h2><span id='topic+year-month-weekday-setters'></span><span id='topic+set_year.clock_year_month_weekday'></span><span id='topic+set_month.clock_year_month_weekday'></span><span id='topic+set_day.clock_year_month_weekday'></span><span id='topic+set_index.clock_year_month_weekday'></span><span id='topic+set_hour.clock_year_month_weekday'></span><span id='topic+set_minute.clock_year_month_weekday'></span><span id='topic+set_second.clock_year_month_weekday'></span><span id='topic+set_millisecond.clock_year_month_weekday'></span><span id='topic+set_microsecond.clock_year_month_weekday'></span><span id='topic+set_nanosecond.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>These are year-month-weekday methods for the
<a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the Gregorian year.
</p>
</li>
<li> <p><code>set_month()</code> sets the month of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 12]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the week. Valid values are in the range of
<code style="white-space: pre;">&#8288;[1, 7]&#8288;</code>, with 1 = Sunday, and 7 = Saturday.
</p>
</li>
<li> <p><code>set_index()</code> sets the index indicating that the corresponding
weekday is the n-th instance of that weekday in the current month. Valid
values are in the range of <code style="white-space: pre;">&#8288;[1, 5]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
set_year(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_month(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_day(x, value, ..., index = NULL)

## S3 method for class 'clock_year_month_weekday'
set_index(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_hour(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_minute(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_second(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_millisecond(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_microsecond(x, value, ...)

## S3 method for class 'clock_year_month_weekday'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_index()</code>, this can also be <code>"last"</code> to adjust to the last
instance of the corresponding weekday in that month.</p>
</td></tr>
<tr><td><code id="year-month-weekday-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-month-weekday-setters_+3A_index">index</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[NULL / integer / "last"]&#8288;</code>
</p>
<p>This argument is only used with <code>set_day()</code>, and allows you to set the
index while also setting the weekday.
</p>
<p>If <code>x</code> is a month precision year-month-weekday, <code>index</code> is required to
be set, as you must specify the weekday and the index simultaneously to
promote from month to day precision.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_weekday(2019, 1:3)

set_year(x, 2020:2022)

# Setting the weekday on a month precision year-month-weekday requires
# also setting the `index` to fully specify the day information
x &lt;- set_day(x, clock_weekdays$sunday, index = 1)
x

# Once you have at least day precision, you can set the weekday and
# the index separately
set_day(x, clock_weekdays$monday)
set_index(x, 3)

# Set to the "last" instance of the corresponding weekday in this month
# (Note that some months have 4 Sundays, and others have 5)
set_index(x, "last")

# Set to an invalid index
# January and February of 2019 don't have 5 Sundays!
invalid &lt;- set_index(x, 5)
invalid

# Resolve the invalid dates by choosing the previous/next valid moment
invalid_resolve(invalid, invalid = "previous")
invalid_resolve(invalid, invalid = "next")

# You can also "overflow" the index. This keeps the weekday, but resets
# the index to 1 and increments the month value by 1.
invalid_resolve(invalid, invalid = "overflow")
</code></pre>

<hr>
<h2 id='year-month-weekday-widen'>Widen: year-month-weekday</h2><span id='topic+year-month-weekday-widen'></span><span id='topic+calendar_widen.clock_year_month_weekday'></span>

<h3>Description</h3>

<p>This is a year-month-weekday method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a year-month-weekday vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_month_weekday'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-month-weekday-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_month_weekday]&#8288;</code>
</p>
<p>A year-month-weekday vector.</p>
</td></tr>
<tr><td><code id="year-month-weekday-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"month"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Widening a month precision year-month-weekday to day precision will set
the day and the index to <code>1</code>. This sets the weekday components to the
first Sunday of the month.
</p>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Month precision
x &lt;- year_month_weekday(2019, 1)
x

# Widen to day precision
# Note that this sets both the day and index to 1,
# i.e. the first Sunday of the month.
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec
</code></pre>

<hr>
<h2 id='year-quarter-day-arithmetic'>Arithmetic: year-quarter-day</h2><span id='topic+year-quarter-day-arithmetic'></span><span id='topic+add_years.clock_year_quarter_day'></span><span id='topic+add_quarters.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>These are year-quarter-day methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li>
<li> <p><code>add_quarters()</code>
</p>
</li></ul>

<p>Notably, <em>you cannot add days to a year-quarter-day</em>. For day-based
arithmetic, first convert to a time point with <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or
<code><a href="#topic+as_sys_time">as_sys_time()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
add_years(x, n, ...)

## S3 method for class 'clock_year_quarter_day'
add_quarters(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="year-quarter-day-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_quarter_day(2019, 1:3)
x

add_quarters(x, 2)

# Make the fiscal year start in March
y &lt;- year_quarter_day(2019, 1:2, 1, start = 3)
y

add_quarters(y, 1)

# What year-month-day does this correspond to?
# Note that the fiscal year doesn't necessarily align with the Gregorian
# year!
as_year_month_day(add_quarters(y, 1))
</code></pre>

<hr>
<h2 id='year-quarter-day-boundary'>Boundaries: year-quarter-day</h2><span id='topic+year-quarter-day-boundary'></span><span id='topic+calendar_start.clock_year_quarter_day'></span><span id='topic+calendar_end.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
calendar_start(x, precision)

## S3 method for class 'clock_year_quarter_day'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_quarter_day(2019:2020, 2:3, 5, 6, 7, 8, start = clock_months$march)
x

# Compute the last moment of the fiscal quarter
calendar_end(x, "quarter")

# Compare that to just setting the day to `"last"`,
# which doesn't affect the other components
set_day(x, "last")

# Compute the start of the fiscal year
calendar_start(x, "year")

as_date(calendar_start(x, "year"))
</code></pre>

<hr>
<h2 id='year-quarter-day-count-between'>Counting: year-quarter-day</h2><span id='topic+year-quarter-day-count-between'></span><span id='topic+calendar_count_between.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code> generic.
It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code> (i.e.,
the number of years or quarters).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-count-between_+3A_start">start</code>, <code id="year-quarter-day-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A pair of year-quarter-day vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="year-quarter-day-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-quarter-day-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-quarter-day-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute the number of whole quarters between two dates
x &lt;- year_quarter_day(2020, 3, 91)
y &lt;- year_quarter_day(2025, 4, c(90, 92))
calendar_count_between(x, y, "quarter")

# Note that this is not always the same as the number of whole 3 month
# periods between two dates
x &lt;- as_year_month_day(x)
y &lt;- as_year_month_day(y)
calendar_count_between(x, y, "month", n = 3)
</code></pre>

<hr>
<h2 id='year-quarter-day-getters'>Getters: year-quarter-day</h2><span id='topic+year-quarter-day-getters'></span><span id='topic+get_year.clock_year_quarter_day'></span><span id='topic+get_quarter.clock_year_quarter_day'></span><span id='topic+get_day.clock_year_quarter_day'></span><span id='topic+get_hour.clock_year_quarter_day'></span><span id='topic+get_minute.clock_year_quarter_day'></span><span id='topic+get_second.clock_year_quarter_day'></span><span id='topic+get_millisecond.clock_year_quarter_day'></span><span id='topic+get_microsecond.clock_year_quarter_day'></span><span id='topic+get_nanosecond.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>These are year-quarter-day methods for the
<a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the fiscal year. Note that this can differ from the
Gregorian year if <code>start != 1L</code>.
</p>
</li>
<li> <p><code>get_quarter()</code> returns the fiscal quarter as a value between 1-4.
</p>
</li>
<li> <p><code>get_day()</code> returns the day of the fiscal quarter as a value between 1-92.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
get_year(x)

## S3 method for class 'clock_year_quarter_day'
get_quarter(x)

## S3 method for class 'clock_year_quarter_day'
get_day(x)

## S3 method for class 'clock_year_quarter_day'
get_hour(x)

## S3 method for class 'clock_year_quarter_day'
get_minute(x)

## S3 method for class 'clock_year_quarter_day'
get_second(x)

## S3 method for class 'clock_year_quarter_day'
get_millisecond(x)

## S3 method for class 'clock_year_quarter_day'
get_microsecond(x)

## S3 method for class 'clock_year_quarter_day'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_quarter_day(2020, 1:4)

get_quarter(x)

# Set and then get the last day of the quarter
x &lt;- set_day(x, "last")
get_day(x)

# Start the fiscal year in November and choose the 50th day in
# each quarter of 2020
november &lt;- 11
y &lt;- year_quarter_day(2020, 1:4, 50, start = 11)
y

get_day(y)

# What does that map to in year-month-day?
as_year_month_day(y)
</code></pre>

<hr>
<h2 id='year-quarter-day-group'>Grouping: year-quarter-day</h2><span id='topic+year-quarter-day-group'></span><span id='topic+calendar_group.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a year-quarter-day object can be done at any precision, as
long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-quarter-day-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-quarter-day-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_quarter_day(2019, 1:4)
x &lt;- c(x, set_year(x, 2020))

# Group by 3 quarters
# Note that this is a grouping of 3 quarters of the current year
# (i.e. the count resets at the beginning of the next year)
calendar_group(x, "quarter", n = 3)

# Group by 5 days of the current quarter
y &lt;- year_quarter_day(2019, 1, 1:90)
calendar_group(y, "day", n = 5)
</code></pre>

<hr>
<h2 id='year-quarter-day-narrow'>Narrow: year-quarter-day</h2><span id='topic+year-quarter-day-narrow'></span><span id='topic+calendar_narrow.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a year-quarter-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Day precision
x &lt;- year_quarter_day(2019, 1, 5)
x

# Narrow to quarter precision
calendar_narrow(x, "quarter")
</code></pre>

<hr>
<h2 id='year-quarter-day-setters'>Setters: year-quarter-day</h2><span id='topic+year-quarter-day-setters'></span><span id='topic+set_year.clock_year_quarter_day'></span><span id='topic+set_quarter.clock_year_quarter_day'></span><span id='topic+set_day.clock_year_quarter_day'></span><span id='topic+set_hour.clock_year_quarter_day'></span><span id='topic+set_minute.clock_year_quarter_day'></span><span id='topic+set_second.clock_year_quarter_day'></span><span id='topic+set_millisecond.clock_year_quarter_day'></span><span id='topic+set_microsecond.clock_year_quarter_day'></span><span id='topic+set_nanosecond.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>These are year-quarter-day methods for the
<a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the fiscal year.
</p>
</li>
<li> <p><code>set_quarter()</code> sets the fiscal quarter of the year.
Valid values are in the range of <code style="white-space: pre;">&#8288;[1, 4]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the fiscal quarter.
Valid values are in the range of <code style="white-space: pre;">&#8288;[1, 92]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
set_year(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_quarter(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_day(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_hour(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_minute(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_second(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_millisecond(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_microsecond(x, value, ...)

## S3 method for class 'clock_year_quarter_day'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_day()</code>, this can also be <code>"last"</code> to adjust to the last
day of the current fiscal quarter.</p>
</td></tr>
<tr><td><code id="year-quarter-day-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

# Quarter precision vector
x &lt;- year_quarter_day(2019, 1:4)
x

# Promote to day precision by setting the day
x &lt;- set_day(x, 1)
x

# Or set to the last day of the quarter
x &lt;- set_day(x, "last")
x

# What year-month-day is this?
as_year_month_day(x)

# Set to an invalid day of the quarter
# (not all quarters have 92 days)
invalid &lt;- set_day(x, 92)
invalid

# Here are the invalid ones
invalid[invalid_detect(invalid)]

# Resolve the invalid dates by choosing the previous/next valid moment
invalid_resolve(invalid, invalid = "previous")
invalid_resolve(invalid, invalid = "next")

# Or resolve by "overflowing" by the number of days that you have
# gone past the last valid day
invalid_resolve(invalid, invalid = "overflow")

# This is similar to
days &lt;- get_day(invalid) - 1L
invalid %&gt;%
  set_day(1) %&gt;%
  as_naive_time() %&gt;%
  add_days(days) %&gt;%
  as_year_quarter_day()
</code></pre>

<hr>
<h2 id='year-quarter-day-widen'>Widen: year-quarter-day</h2><span id='topic+year-quarter-day-widen'></span><span id='topic+calendar_widen.clock_year_quarter_day'></span>

<h3>Description</h3>

<p>This is a year-quarter-day method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a year-quarter-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_quarter_day'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-quarter-day-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_quarter_day]&#8288;</code>
</p>
<p>A year-quarter-day vector.</p>
</td></tr>
<tr><td><code id="year-quarter-day-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"quarter"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Quarter precision
x &lt;- year_quarter_day(2019, 1)
x

# Widen to day precision
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec
</code></pre>

<hr>
<h2 id='year-week-day-arithmetic'>Arithmetic: year-week-day</h2><span id='topic+year-week-day-arithmetic'></span><span id='topic+add_years.clock_year_week_day'></span>

<h3>Description</h3>

<p>These are year-week-day methods for the
<a href="#topic+clock-arithmetic">arithmetic generics</a>.
</p>

<ul>
<li> <p><code>add_years()</code>
</p>
</li></ul>

<p>You cannot add weeks or days to a year-week-day calendar. Adding
days is much more efficiently done by converting to a time point first
by using <code><a href="#topic+as_naive_time">as_naive_time()</a></code> or <code><a href="#topic+as_sys_time">as_sys_time()</a></code>. Adding weeks is equally
as efficient as adding 7 days. Additionally, adding weeks to an invalid
year-week object (i.e. one set to the 53rd week, when that doesn't exist)
would be undefined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
add_years(x, n, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-arithmetic_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-arithmetic_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / clock_duration]&#8288;</code>
</p>
<p>An integer vector to be converted to a duration, or a duration
corresponding to the arithmetic function being used. This corresponds
to the number of duration units to add. <code>n</code> may be negative to subtract
units of duration.</p>
</td></tr>
<tr><td><code id="year-week-day-arithmetic_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> and <code>n</code> are recycled against each other using
<a href="vctrs.html#topic+theory-faq-recycling">tidyverse recycling rules</a>.
</p>


<h3>Value</h3>

<p><code>x</code> after performing the arithmetic.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_week_day(2019, 1, 1)
add_years(x, 1:2)
</code></pre>

<hr>
<h2 id='year-week-day-boundary'>Boundaries: year-week-day</h2><span id='topic+year-week-day-boundary'></span><span id='topic+calendar_start.clock_year_week_day'></span><span id='topic+calendar_end.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is an year-week-day method for the <code><a href="#topic+calendar_start">calendar_start()</a></code> and
<code><a href="#topic+calendar_end">calendar_end()</a></code> generics. They adjust components of a calendar to the
start or end of a specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
calendar_start(x, precision)

## S3 method for class 'clock_year_week_day'
calendar_end(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-boundary_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-boundary_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> at the same precision, but with some components altered to be
at the boundary value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_week_day(2019:2020, 5, 6, 10)
x

# Compute the last moment of the last week of the year
calendar_end(x, "year")

# Compare that to just setting the week to `"last"`,
# which doesn't affect the other components
set_week(x, "last")
</code></pre>

<hr>
<h2 id='year-week-day-count-between'>Counting: year-week-day</h2><span id='topic+year-week-day-count-between'></span><span id='topic+calendar_count_between.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is an year-week-day method for the <code><a href="#topic+calendar_count_between">calendar_count_between()</a></code>
generic. It counts the number of <code>precision</code> units between <code>start</code> and <code>end</code>
(i.e., the number of years).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
calendar_count_between(start, end, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-count-between_+3A_start">start</code>, <code id="year-week-day-count-between_+3A_end">end</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A pair of year-week-day vectors. These will be recycled to their
common size.</p>
</td></tr>
<tr><td><code id="year-week-day-count-between_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-week-day-count-between_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-week-day-count-between_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer representing the number of <code>precision</code> units between
<code>start</code> and <code>end</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Compute the number of whole years between two dates
x &lt;- year_week_day(2001, 1, 2)
y &lt;- year_week_day(2021, 1, c(1, 3))
calendar_count_between(x, y, "year")
</code></pre>

<hr>
<h2 id='year-week-day-getters'>Getters: year-week-day</h2><span id='topic+year-week-day-getters'></span><span id='topic+get_year.clock_year_week_day'></span><span id='topic+get_week.clock_year_week_day'></span><span id='topic+get_day.clock_year_week_day'></span><span id='topic+get_hour.clock_year_week_day'></span><span id='topic+get_minute.clock_year_week_day'></span><span id='topic+get_second.clock_year_week_day'></span><span id='topic+get_millisecond.clock_year_week_day'></span><span id='topic+get_microsecond.clock_year_week_day'></span><span id='topic+get_nanosecond.clock_year_week_day'></span>

<h3>Description</h3>

<p>These are year-week-day methods for the
<a href="#topic+clock-getters">getter generics</a>.
</p>

<ul>
<li> <p><code>get_year()</code> returns the year. Note that this can differ from the
Gregorian year.
</p>
</li>
<li> <p><code>get_week()</code> returns the week of the current year.
</p>
</li>
<li> <p><code>get_day()</code> returns a value between 1-7 indicating the weekday of the
current week, where <code style="white-space: pre;">&#8288;1 = start of week&#8288;</code> and <code style="white-space: pre;">&#8288;7 = end of week&#8288;</code>, in line with
the chosen <code>start</code>.
</p>
</li>
<li><p> There are sub-daily getters for extracting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
get_year(x)

## S3 method for class 'clock_year_week_day'
get_week(x)

## S3 method for class 'clock_year_week_day'
get_day(x)

## S3 method for class 'clock_year_week_day'
get_hour(x)

## S3 method for class 'clock_year_week_day'
get_minute(x)

## S3 method for class 'clock_year_week_day'
get_second(x)

## S3 method for class 'clock_year_week_day'
get_millisecond(x)

## S3 method for class 'clock_year_week_day'
get_microsecond(x)

## S3 method for class 'clock_year_week_day'
get_nanosecond(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-getters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day to get the component from.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The component.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_week_day(2019, 50:52, 1:3)
x

# Get the week
get_week(x)

# Gets the weekday
get_day(x)

# Note that the year can differ from the Gregorian year
iso &lt;- year_week_day(2019, 1, 1, start = clock_weekdays$monday)
ymd &lt;- as_year_month_day(iso)

get_year(iso)
get_year(ymd)
</code></pre>

<hr>
<h2 id='year-week-day-group'>Grouping: year-week-day</h2><span id='topic+year-week-day-group'></span><span id='topic+calendar_group.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is a year-week-day method for the <code><a href="#topic+calendar_group">calendar_group()</a></code> generic.
</p>
<p>Grouping for a year-week-day object can be done at any precision, as
long as <code>x</code> is at least as precise as <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
calendar_group(x, precision, ..., n = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-group_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-group_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="year-week-day-group_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="year-week-day-group_+3A_n">n</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[positive integer(1)]&#8288;</code>
</p>
<p>A single positive integer specifying a multiple of <code>precision</code> to use.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> grouped at the specified <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_week_day(2019, 1:52)

# Group by 3 weeks
calendar_group(x, "week", n = 3)

y &lt;- year_week_day(2000:2020, 1, 1)

# Group by 2 years
calendar_group(y, "year", n = 2)
</code></pre>

<hr>
<h2 id='year-week-day-narrow'>Narrow: year-week-day</h2><span id='topic+year-week-day-narrow'></span><span id='topic+calendar_narrow.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is a year-week-day method for the <code><a href="#topic+calendar_narrow">calendar_narrow()</a></code> generic. It
narrows a year-week-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
calendar_narrow(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-narrow_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-narrow_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> narrowed to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Day precision
x &lt;- year_week_day(2019, 1, 5)
x

# Narrowed to week precision
calendar_narrow(x, "week")
</code></pre>

<hr>
<h2 id='year-week-day-setters'>Setters: year-week-day</h2><span id='topic+year-week-day-setters'></span><span id='topic+set_year.clock_year_week_day'></span><span id='topic+set_week.clock_year_week_day'></span><span id='topic+set_day.clock_year_week_day'></span><span id='topic+set_hour.clock_year_week_day'></span><span id='topic+set_minute.clock_year_week_day'></span><span id='topic+set_second.clock_year_week_day'></span><span id='topic+set_millisecond.clock_year_week_day'></span><span id='topic+set_microsecond.clock_year_week_day'></span><span id='topic+set_nanosecond.clock_year_week_day'></span>

<h3>Description</h3>

<p>These are year-week-day methods for the <a href="#topic+clock-setters">setter generics</a>.
</p>

<ul>
<li> <p><code>set_year()</code> sets the year.
</p>
</li>
<li> <p><code>set_week()</code> sets the week of the year. Valid values are in the range
of <code style="white-space: pre;">&#8288;[1, 53]&#8288;</code>.
</p>
</li>
<li> <p><code>set_day()</code> sets the day of the week. Valid values are in the range of
<code style="white-space: pre;">&#8288;[1, 7]&#8288;</code>.
</p>
</li>
<li><p> There are sub-daily setters for setting more precise components.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
set_year(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_week(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_day(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_hour(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_minute(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_second(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_millisecond(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_microsecond(x, value, ...)

## S3 method for class 'clock_year_week_day'
set_nanosecond(x, value, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-setters_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-setters_+3A_value">value</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[integer / "last"]&#8288;</code>
</p>
<p>The value to set the component to.
</p>
<p>For <code>set_week()</code>, this can also be <code>"last"</code> to adjust to the last
week of the current year.</p>
</td></tr>
<tr><td><code id="year-week-day-setters_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with the component set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Year precision vector
x &lt;- year_week_day(2019:2023)

# Promote to week precision by setting the week
# (Note that some weeks have 52 weeks, and others have 53)
x &lt;- set_week(x, "last")
x

# Set to an invalid week
invalid &lt;- set_week(x, 53)
invalid

# Here are the invalid ones (they only have 52 weeks)
invalid[invalid_detect(invalid)]

# Resolve the invalid dates by choosing the previous/next valid moment
invalid_resolve(invalid, invalid = "previous")
invalid_resolve(invalid, invalid = "next")
</code></pre>

<hr>
<h2 id='year-week-day-widen'>Widen: year-week-day</h2><span id='topic+year-week-day-widen'></span><span id='topic+calendar_widen.clock_year_week_day'></span>

<h3>Description</h3>

<p>This is a year-week-day method for the <code><a href="#topic+calendar_widen">calendar_widen()</a></code> generic. It
widens a year-week-day vector to the specified <code>precision</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'clock_year_week_day'
calendar_widen(x, precision)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="year-week-day-widen_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_year_week_day]&#8288;</code>
</p>
<p>A year-week-day vector.</p>
</td></tr>
<tr><td><code id="year-week-day-widen_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>One of:
</p>

<ul>
<li> <p><code>"year"</code>
</p>
</li>
<li> <p><code>"week"</code>
</p>
</li>
<li> <p><code>"day"</code>
</p>
</li>
<li> <p><code>"hour"</code>
</p>
</li>
<li> <p><code>"minute"</code>
</p>
</li>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> widened to the supplied <code>precision</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Week precision
x &lt;- year_week_day(2019, 1, start = clock_weekdays$monday)
x

# Widen to day precision
# In this calendar, the first day of the week is a Monday
calendar_widen(x, "day")

# Or second precision
sec &lt;- calendar_widen(x, "second")
sec
</code></pre>

<hr>
<h2 id='zoned_time_info'>Info: zoned-time</h2><span id='topic+zoned_time_info'></span>

<h3>Description</h3>

<p><code>zoned_time_info()</code> retrieves a set of low-level information generally not
required for most date-time manipulations. It returns a data frame with the
same columns as <code><a href="#topic+sys_time_info">sys_time_info()</a></code>, but the <code>begin</code> and <code>end</code> columns are
zoned-times with the same time zone as <code>x</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoned_time_info(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoned_time_info_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_zoned_time]&#8288;</code>
</p>
<p>A zoned-time.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of low level information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2021, 03, 14, c(01, 03), c(59, 00), c(59, 00))
x &lt;- as_naive_time(x)
x &lt;- as_zoned_time(x, "America/New_York")

# x[1] is in EST, x[2] is in EDT
x

info &lt;- zoned_time_info(x)
info

# `end` can be used to iterate through daylight saving time transitions
zoned_time_info(info$end)
</code></pre>

<hr>
<h2 id='zoned_time_now'>What is the current zoned-time?</h2><span id='topic+zoned_time_now'></span>

<h3>Description</h3>

<p><code>zoned_time_now()</code> returns the current time in the corresponding <code>zone</code>. It
is a wrapper around <code><a href="#topic+sys_time_now">sys_time_now()</a></code> that attaches the time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoned_time_now(zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoned_time_now_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A time zone to get the current time for.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The time is returned with a nanosecond precision, but the actual amount
of data returned is OS dependent. Usually, information at at least the
microsecond level is returned, with some platforms returning nanosecond
information.
</p>


<h3>Value</h3>

<p>A zoned-time of the current time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- zoned_time_now("America/New_York")
</code></pre>

<hr>
<h2 id='zoned_time_precision'>Precision: zoned-time</h2><span id='topic+zoned_time_precision'></span>

<h3>Description</h3>

<p><code>zoned_time_precision()</code> extracts the precision from a zoned-time. It
returns the precision as a single string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zoned_time_precision(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoned_time_precision_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_zoned_time]&#8288;</code>
</p>
<p>A zoned-time.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A single string holding the precision of the zoned-time.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>zoned_time_precision(zoned_time_now("America/New_York"))
</code></pre>

<hr>
<h2 id='zoned-parsing'>Parsing: zoned-time</h2><span id='topic+zoned-parsing'></span><span id='topic+zoned_time_parse_complete'></span><span id='topic+zoned_time_parse_abbrev'></span>

<h3>Description</h3>

<p>There are two parsers into a zoned-time, <code>zoned_time_parse_complete()</code> and
<code>zoned_time_parse_abbrev()</code>.
</p>


<h4>zoned_time_parse_complete()</h4>

<p><code>zoned_time_parse_complete()</code> is a parser for <em>complete</em> date-time strings,
like <code>"2019-01-01T00:00:00-05:00[America/New_York]"</code>. A complete date-time
string has both the time zone offset and full time zone name in the string,
which is the only way for the string itself to contain all of the information
required to construct a zoned-time. Because of this,
<code>zoned_time_parse_complete()</code> requires both the <code style="white-space: pre;">&#8288;%z&#8288;</code> and <code style="white-space: pre;">&#8288;%Z&#8288;</code> commands to be
supplied in the <code>format</code> string.
</p>
<p>The default options assume that <code>x</code> should be parsed at second precision,
using a <code>format</code> string of <code>"%Y-%m-%dT%H:%M:%S%Ez[%Z]"</code>. This matches the
default result from calling <code>format()</code> on a zoned-time. Additionally, this
format matches the de-facto standard extension to RFC 3339 for creating
completely unambiguous date-times.
</p>



<h4>zoned_time_parse_abbrev()</h4>

<p><code>zoned_time_parse_abbrev()</code> is a parser for date-time strings containing only
a time zone abbreviation, like <code>"2019-01-01 00:00:00 EST"</code>. The time zone
abbreviation is not enough to identify the full time zone name that the
date-time belongs to, so the full time zone name must be supplied as the
<code>zone</code> argument. However, the time zone abbreviation can help with resolving
ambiguity around daylight saving time fallbacks.
</p>
<p>For <code>zoned_time_parse_abbrev()</code>, <code style="white-space: pre;">&#8288;%Z&#8288;</code> must be supplied and is interpreted as
the time zone abbreviation rather than the full time zone name.
</p>
<p>If used, the <code style="white-space: pre;">&#8288;%z&#8288;</code> command must parse correctly, but its value will be
completely ignored.
</p>
<p>The default options assume that <code>x</code> should be parsed at second precision,
using a <code>format</code> string of <code>"%Y-%m-%d %H:%M:%S %Z"</code>. This matches the default
result from calling <code>print()</code> or <code>format(usetz = TRUE)</code> on a POSIXct
date-time.
</p>



<h3>Usage</h3>

<pre><code class='language-R'>zoned_time_parse_complete(
  x,
  ...,
  format = NULL,
  precision = "second",
  locale = clock_locale()
)

zoned_time_parse_abbrev(
  x,
  zone,
  ...,
  format = NULL,
  precision = "second",
  locale = clock_locale()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoned-parsing_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character]&#8288;</code>
</p>
<p>A character vector to parse.</p>
</td></tr>
<tr><td><code id="zoned-parsing_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
<tr><td><code id="zoned-parsing_+3A_format">format</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character / NULL]&#8288;</code>
</p>
<p>A format string. A combination of the following commands, or <code>NULL</code>,
in which case a default format string is used.
</p>
<p>A vector of multiple format strings can be supplied. They will be tried in
the order they are provided.
</p>
<p><strong>Year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%C&#8288;</code>: The century as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NC&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%y&#8288;</code>: The last two decimal digits of the year. If the century is not
otherwise specified (e.g. with <code style="white-space: pre;">&#8288;%C&#8288;</code>), values in the range <code style="white-space: pre;">&#8288;[69 - 99]&#8288;</code> are
presumed to refer to the years <code style="white-space: pre;">&#8288;[1969 - 1999]&#8288;</code>, and values in the range
<code style="white-space: pre;">&#8288;[00 - 68]&#8288;</code> are presumed to refer to the years <code style="white-space: pre;">&#8288;[2000 - 2068]&#8288;</code>. The
modified command <code style="white-space: pre;">&#8288;%Ny&#8288;</code>, where <code>N</code> is a positive decimal integer, specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Y&#8288;</code>: The year as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NY&#8288;</code> where <code>N</code>
is a positive decimal integer specifies the maximum number of characters to
read. If not specified, the default is <code>4</code>. Leading zeroes are permitted
but not required.
</p>
</li></ul>

<p><strong>Month</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%b&#8288;</code>, <code style="white-space: pre;">&#8288;%B&#8288;</code>, <code style="white-space: pre;">&#8288;%h&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive
month name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%m&#8288;</code>: The month as a decimal number. January is <code>1</code>. The modified command
<code style="white-space: pre;">&#8288;%Nm&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li></ul>

<p><strong>Day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%d&#8288;</code>, <code style="white-space: pre;">&#8288;%e&#8288;</code>: The day of the month as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%Nd&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Day of the week</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%a&#8288;</code>, <code style="white-space: pre;">&#8288;%A&#8288;</code>: The <code>locale</code>'s full or abbreviated case-insensitive weekday
name.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%w&#8288;</code>: The weekday as a decimal number (<code>0-6</code>), where Sunday is <code>0</code>. The
modified command <code style="white-space: pre;">&#8288;%Nw&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>ISO 8601 week-based year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%g&#8288;</code>: The last two decimal digits of the ISO week-based year. The
modified command <code style="white-space: pre;">&#8288;%Ng&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>2</code>. Leading zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%G&#8288;</code>: The ISO week-based year as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NG&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>4</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%V&#8288;</code>: The ISO week-based week number as a decimal number. The modified
command <code style="white-space: pre;">&#8288;%NV&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum
number of characters to read. If not specified, the default is <code>2</code>. Leading
zeroes are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%u&#8288;</code>: The ISO weekday as a decimal number (<code>1-7</code>), where Monday is <code>1</code>.
The modified command <code style="white-space: pre;">&#8288;%Nu&#8288;</code> where <code>N</code> is a positive decimal integer
specifies the maximum number of characters to read. If not specified, the
default is <code>1</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Week of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%U&#8288;</code>: The week number of the year as a decimal number. The first Sunday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NU&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%W&#8288;</code>: The week number of the year as a decimal number. The first Monday
of the year is the first day of week <code>01</code>. Days of the same year prior to
that are in week <code>00</code>. The modified command <code style="white-space: pre;">&#8288;%NW&#8288;</code> where <code>N</code> is a positive
decimal integer specifies the maximum number of characters to read. If not
specified, the default is <code>2</code>. Leading zeroes are permitted but not
required.
</p>
</li></ul>

<p><strong>Day of the year</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%j&#8288;</code>: The day of the year as a decimal number. January 1 is <code>1</code>. The
modified command <code style="white-space: pre;">&#8288;%Nj&#8288;</code> where <code>N</code> is a positive decimal integer specifies
the maximum number of characters to read. If not specified, the default is
<code>3</code>. Leading zeroes are permitted but not required.
</p>
</li></ul>

<p><strong>Date</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%D&#8288;</code>, <code style="white-space: pre;">&#8288;%x&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%m/%d/%y&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%F&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%Y-%m-%d&#8288;</code>. If modified with a width (like <code style="white-space: pre;">&#8288;%NF&#8288;</code>),
the width is applied to only <code style="white-space: pre;">&#8288;%Y&#8288;</code>.
</p>
</li></ul>

<p><strong>Time of day</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%H&#8288;</code>: The hour (24-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NH&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%I&#8288;</code>: The hour (12-hour clock) as a decimal number. The modified command
<code style="white-space: pre;">&#8288;%NI&#8288;</code> where <code>N</code> is a positive decimal integer specifies the maximum number
of characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%M&#8288;</code>: The minutes as a decimal number. The modified command <code style="white-space: pre;">&#8288;%NM&#8288;</code> where
<code>N</code> is a positive decimal integer specifies the maximum number of
characters to read. If not specified, the default is <code>2</code>. Leading zeroes
are permitted but not required.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%S&#8288;</code>: The seconds as a decimal number. Leading zeroes are permitted but
not required. If encountered, the <code>locale</code> determines the decimal point
character. Generally, the maximum number of characters to read is
determined by the precision that you are parsing at. For example, a
precision of <code>"second"</code> would read a maximum of 2 characters, while a
precision of <code>"millisecond"</code> would read a maximum of 6 (2 for the values
before the decimal point, 1 for the decimal point, and 3 for the values
after it). The modified command <code style="white-space: pre;">&#8288;%NS&#8288;</code>, where <code>N</code> is a positive decimal
integer, can be used to exactly specify the maximum number of characters to
read. This is only useful if you happen to have seconds with more than 1
leading zero.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%p&#8288;</code>: The <code>locale</code>'s equivalent of the AM/PM designations associated with
a 12-hour clock. The command <code style="white-space: pre;">&#8288;%I&#8288;</code> must precede <code style="white-space: pre;">&#8288;%p&#8288;</code> in the format string.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%R&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%T&#8288;</code>, <code style="white-space: pre;">&#8288;%X&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%H:%M:%S&#8288;</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%r&#8288;</code>: Equivalent to <code style="white-space: pre;">&#8288;%I:%M:%S %p&#8288;</code>.
</p>
</li></ul>

<p><strong>Time zone</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%z&#8288;</code>: The offset from UTC in the format <code style="white-space: pre;">&#8288;[+|-]hh[mm]&#8288;</code>. For example
<code>-0430</code> refers to 4 hours 30 minutes behind UTC. And <code>04</code> refers to 4 hours
ahead of UTC. The modified command <code style="white-space: pre;">&#8288;%Ez&#8288;</code> parses a <code>:</code> between the hours and
minutes and leading zeroes on the hour field are optional:
<code style="white-space: pre;">&#8288;[+|-]h[h][:mm]&#8288;</code>. For example <code>-04:30</code> refers to 4 hours 30 minutes behind
UTC. And <code>4</code> refers to 4 hours ahead of UTC.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%Z&#8288;</code>: The full time zone name or the time zone abbreviation, depending on
the function being used. A single word is parsed. This word can only
contain characters that are alphanumeric, or one of <code>'_'</code>, <code>'/'</code>, <code>'-'</code> or
<code>'+'</code>.
</p>
</li></ul>

<p><strong>Miscellaneous</strong>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%c&#8288;</code>: A date and time representation. Equivalent to
<code style="white-space: pre;">&#8288;%a %b %d %H:%M:%S %Y&#8288;</code>.
</p>
</li>
<li> <p><code>%%</code>: A <code style="white-space: pre;">&#8288;%&#8288;</code> character.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%n&#8288;</code>: Matches one white space character. <code style="white-space: pre;">&#8288;%n&#8288;</code>, <code style="white-space: pre;">&#8288;%t&#8288;</code>, and a space can be
combined to match a wide range of white-space patterns. For example <code>"%n "</code>
matches one or more white space characters, and <code>"%n%t%t"</code> matches one to
three white space characters.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%t&#8288;</code>: Matches zero or one white space characters.
</p>
</li></ul>
</td></tr>
<tr><td><code id="zoned-parsing_+3A_precision">precision</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A precision for the resulting zoned-time. One of:
</p>

<ul>
<li> <p><code>"second"</code>
</p>
</li>
<li> <p><code>"millisecond"</code>
</p>
</li>
<li> <p><code>"microsecond"</code>
</p>
</li>
<li> <p><code>"nanosecond"</code>
</p>
</li></ul>

<p>Setting the <code>precision</code> determines how much information <code style="white-space: pre;">&#8288;%S&#8288;</code> attempts
to parse.</p>
</td></tr>
<tr><td><code id="zoned-parsing_+3A_locale">locale</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[clock_locale]&#8288;</code>
</p>
<p>A locale object created from <code><a href="#topic+clock_locale">clock_locale()</a></code>.</p>
</td></tr>
<tr><td><code id="zoned-parsing_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A full time zone name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>zoned_time_parse_complete()</code> is given input that is length zero, all
<code>NA</code>s, or completely fails to parse, then no time zone will be able to be
determined. In that case, the result will use <code>"UTC"</code>.
</p>
<p>If your date-time strings contain time zone offsets (like <code>-04:00</code>), but
not the full time zone name, you might need <code><a href="#topic+sys_time_parse">sys_time_parse()</a></code>.
</p>
<p>If your date-time strings don't contain time zone offsets or the full time
zone name, you might need to use <code><a href="#topic+naive_time_parse">naive_time_parse()</a></code>. From there, if you
know the time zone that the date-times are supposed to be in, you can convert
to a zoned-time with <code><a href="#topic+as_zoned_time">as_zoned_time()</a></code>.
</p>


<h3>Value</h3>

<p>A zoned-time.
</p>


<h3>Full Precision Parsing</h3>

<p>It is highly recommended to parse all of the information in the date-time
string into a type at least as precise as the string. For example, if your
string has fractional seconds, but you only require seconds, specify a
sub-second <code>precision</code>, then round to seconds manually using whatever
convention is appropriate for your use case. Parsing such a string directly
into a second precision result is ambiguous and undefined, and is unlikely to
work as you might expect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(magrittr)

zoned_time_parse_complete("2019-01-01T01:02:03-05:00[America/New_York]")

zoned_time_parse_complete(
  "January 21, 2019 -0500 America/New_York",
  format = "%B %d, %Y %z %Z"
)

# Nanosecond precision
x &lt;- "2019/12/31 01:05:05.123456700-05:00[America/New_York]"
zoned_time_parse_complete(
  x,
  format = "%Y/%m/%d %H:%M:%S%Ez[%Z]",
  precision = "nanosecond"
)

# The `%z` offset must correspond to the true offset that would be used
# if the input was parsed as a naive-time and then converted to a zoned-time
# with `as_zoned_time()`. For example, the time that was parsed above used an
# offset of `-05:00`. We can confirm that this is correct with:
year_month_day(2019, 1, 1, 1, 2, 3) %&gt;%
  as_naive_time() %&gt;%
  as_zoned_time("America/New_York")

# So the following would not parse correctly
zoned_time_parse_complete("2019-01-01T01:02:03-04:00[America/New_York]")

# `%z` is useful for breaking ties in otherwise ambiguous times. For example,
# these two times are on either side of a daylight saving time fallback.
# Without the `%z` offset, you wouldn't be able to tell them apart!
x &lt;- c(
  "1970-10-25T01:30:00-04:00[America/New_York]",
  "1970-10-25T01:30:00-05:00[America/New_York]"
)

zoned_time_parse_complete(x)

# If you have date-time strings with time zone abbreviations,
# `zoned_time_parse_abbrev()` should be able to help. The `zone` must be
# provided, because multiple countries may use the same time zone
# abbreviation. For example:
x &lt;- "1970-01-01 02:30:30 IST"

# IST = India Standard Time
zoned_time_parse_abbrev(x, "Asia/Kolkata")

# IST = Israel Standard Time
zoned_time_parse_abbrev(x, "Asia/Jerusalem")

# The time zone abbreviation is mainly useful for resolving ambiguity
# around daylight saving time fallbacks. Without the abbreviation, these
# date-times would be ambiguous.
x &lt;- c(
  "1970-10-25 01:30:00 EDT",
  "1970-10-25 01:30:00 EST"
)
zoned_time_parse_abbrev(x, "America/New_York")
</code></pre>

<hr>
<h2 id='zoned-zone'>Get or set the time zone</h2><span id='topic+zoned-zone'></span><span id='topic+zoned_time_zone'></span><span id='topic+zoned_time_set_zone'></span>

<h3>Description</h3>


<ul>
<li> <p><code>zoned_time_zone()</code> gets the time zone.
</p>
</li>
<li> <p><code>zoned_time_set_zone()</code> sets the time zone <em>without changing the
underlying instant</em>. This means that the result will represent the equivalent
time in the new time zone.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>zoned_time_zone(x)

zoned_time_set_zone(x, zone)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="zoned-zone_+3A_x">x</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[zoned_time]&#8288;</code>
</p>
<p>A zoned time to get or set the time zone of.</p>
</td></tr>
<tr><td><code id="zoned-zone_+3A_zone">zone</code></td>
<td>
<p><code style="white-space: pre;">&#8288;[character(1)]&#8288;</code>
</p>
<p>A valid time zone to switch to.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>zoned_time_zone()</code> returns a string containing the time zone.
</p>
</li>
<li> <p><code>zoned_time_set_zone()</code> returns <code>x</code> with an altered time zone attribute.
The underlying instant is <em>not</em> changed.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- year_month_day(2019, 1, 1)
x &lt;- as_zoned_time(as_naive_time(x), "America/New_York")
x

zoned_time_zone(x)

# Equivalent UTC time
zoned_time_set_zone(x, "UTC")

# To force a new time zone with the same printed time,
# convert to a naive time that has no implied time zone,
# then convert back to a zoned time in the new time zone.
nt &lt;- as_naive_time(x)
nt
as_zoned_time(nt, "UTC")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
