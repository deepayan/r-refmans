<!DOCTYPE html><html lang="en"><head><title>Help for package geslaR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {geslaR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#download_gesla'><p>Download the GESLA dataset</p></a></li>
<li><a href='#query_gesla'><p>Query the GESLA dataset</p></a></li>
<li><a href='#read_gesla'><p>Read a GESLA dataset</p></a></li>
<li><a href='#run_gesla_app'><p>Run the GESLA Shiny app</p></a></li>
<li><a href='#write_gesla'><p>Write a GESLA dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Get and Manipulate the GESLA Dataset</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0-1</td>
</tr>
<tr>
<td>Description:</td>
<td>Promote access to the GESLA
    <a href="https://gesla787883612.wordpress.com">https://gesla787883612.wordpress.com</a> (Global Extreme Sea Level
    Analysis) dataset, a higher-frequency sea-level record data from all
    over the world. It provides functions to download it entirely, or
    query subsets directly into R, without the need of downloading the
    full dataset. Also, it provides a built-in web-application, so that
    users can apply basic filters to select the data of interest,
    generating informative plots, and showing the selected sites.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/EireExtremes/geslaR">https://github.com/EireExtremes/geslaR</a>,
<a href="https://eireextremes.github.io/geslaR/">https://eireextremes.github.io/geslaR/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/EireExtremes/geslaR/issues">https://github.com/EireExtremes/geslaR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>arrow, dplyr, R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bslib, DT, knitr, leaflet, leafpop, lubridate, patchwork,
plotly, rmarkdown, shiny, shinyalert, shinycssloaders,
shinyWidgets, testthat (&ge; 3.0.0), tidyverse</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>arrow</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-06 17:47:13 UTC; mayer</td>
</tr>
<tr>
<td>Author:</td>
<td>Fernando Mayer <a href="https://orcid.org/0000-0001-5115-338X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Niamh Cahill <a href="https://orcid.org/0000-0003-3086-550X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Fernando Mayer &lt;fernando.mayer@mu.ie&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-09 13:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='download_gesla'>Download the GESLA dataset</h2><span id='topic+download_gesla'></span>

<h3>Description</h3>

<p>This function will download the entire GESLA dataset to
the specified folder. Note that the full dataset is about 7GB in
size, so the total download time may take a few minutes, as it will
depend on internet connection. If you don't need the whole dataset,
you can use the <code><a href="#topic+query_gesla">query_gesla()</a></code> function, to directly import
a subset of it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_gesla(
  dest = "./gesla_dataset",
  ask = TRUE,
  messages = TRUE,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_gesla_+3A_dest">dest</code></td>
<td>
<p>The directory to download the files to. If the directory
doesn't exist, it will be created. Defaults to a folder called
<code>gesla_dataset</code> in the current working directory.</p>
</td></tr>
<tr><td><code id="download_gesla_+3A_ask">ask</code></td>
<td>
<p>Ask for confirmation before downloading? Defaults to
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="download_gesla_+3A_messages">messages</code></td>
<td>
<p>Show informative messages? Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="download_gesla_+3A_overwrite">overwrite</code></td>
<td>
<p>Overwrite the whole dataset (i.e. download again)?
Defaults to <code>FALSE</code>. Note that, if <code>TRUE</code>, it will only overwrite if
the function is called in the same directory where <code>dest</code> is.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function should only be usefull if you want to deal
with all the files from the GESLA dataset. If you need only a
subset, you can use the <code><a href="#topic+query_gesla">query_gesla()</a></code> function, or the
GESLA Shiny app interface, from the <code><a href="#topic+run_gesla_app">run_gesla_app()</a></code>
function.
</p>


<h3>Value</h3>

<p>The whole GESLA dataset, consisting of 5119 files (with
<code>.parquet</code> extension). It should have approximately 7GB in size.
</p>


<h3>Author(s)</h3>

<p>Fernando Mayer <a href="mailto:fernando.mayer@mu.ie">fernando.mayer@mu.ie</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {
    ## Create a temporary directory for downloaded files
    dest &lt;- paste0(tempdir(), "/gesla_dataset")
    ## Download to 'gesla_dataset' folder in the temporary directory
    download_gesla(dest = dest)
    ## To overwrite (download again) on the same location
    download_gesla(dest = dest, overwrite = TRUE)
    ## Don't ask for confirmation before download
    download_gesla(dest = dest, overwrite = TRUE, ask = FALSE)
    ## Don't show informative messages
    download_gesla(dest = dest, overwrite = TRUE, messages = FALSE)
    ## Don't ask for confirmation neither show messages
    download_gesla(dest = dest, overwrite = TRUE,
        ask = FALSE, messages = FALSE)
    ## Remove temporary directory
    unlink(dest, recursive = TRUE)
}
</code></pre>

<hr>
<h2 id='query_gesla'>Query the GESLA dataset</h2><span id='topic+query_gesla'></span>

<h3>Description</h3>

<p>This function will make a query to fetch a subset of
the GESLA dataset. At least a country code and one year must be
specified. Site names can also be specified, but are optional. By
default, the resulting subset will contain only data that were
revised and recommended for analysis, by the GESLA group of
researchers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>query_gesla(
  country,
  year = NULL,
  site_name = NULL,
  use_flag = 1,
  as_data_frame = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="query_gesla_+3A_country">country</code></td>
<td>
<p>A character vector specifying the selected countries,
using the three-letter <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3</a> code. See
Details.</p>
</td></tr>
<tr><td><code id="query_gesla_+3A_year">year</code></td>
<td>
<p>A numeric vector specifying the selected years. If
<code>NULL</code> (the default), all available years will be selected.</p>
</td></tr>
<tr><td><code id="query_gesla_+3A_site_name">site_name</code></td>
<td>
<p>Optional character vector of site names.</p>
</td></tr>
<tr><td><code id="query_gesla_+3A_use_flag">use_flag</code></td>
<td>
<p>The default is <code>1</code>, which means to use only the data
that was revised and usefull for analysis. Can be <code>0</code>, to fetch only
revised and not recommend for analysis, or <code>c(0, 1)</code> to fetch all
the data. See Details.</p>
</td></tr>
<tr><td><code id="query_gesla_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>If <code>FALSE</code> (default), the data will be imported
as an <code>arrow_dplyr_query</code> object. Otherwise, the data will be in a
<code>tbl_df</code> (<code>data.frame</code>) format. See Details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The country codes must follow the three-letter <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3</a> code.
However, note that not all countries are available at the GESLA
dataset. If in doubt, please check the GESLA Shiny app interface
(geslaR-app) online in this <a href="https://rstudio.maths.nuim.ie:3939/content/3258adf1-efbb-4996-9a8a-08a474639e8b/">server</a>, or use the
<code><a href="#topic+run_gesla_app">run_gesla_app()</a></code> function to open the interface locally.
</p>
<p>The <code>use_flag</code> argument must be <code>1</code> or <code>0</code>, or <code>c(0, 1)</code>. The
<code>use_flag</code> is a column at the GESLA dataset thet indicates wehter
the data should be used for analysis or not. The <code>1</code> (default)
indicates it should, and <code>0</code> the otherwise. In a data analysis
scenario, the user must only be interested in using the recommended
data, so this argument shouldn't be changed. However, in same cases,
one must be interested in the non-recommended data, therefore this
option is available. Also, you can specify <code>c(0, 1)</code> to fetch all
the data (usable and not usable). In any case, the <code>use_flag</code> column
will always be present, and it can be used for any post-processing.
Please, see the <a href="https://gesla787883612.wordpress.com/format/">GESLA format</a> documentation
for more details.
</p>
<p>The default argument <code>as_data_frame = FALSE</code> will result in an
object of the <code>arrow_dplyr_query</code> class. The advantage is that,
regardless of the size of the resulting dataset, the object will be
small in (memory) size. Also, as it happens with the Arrow <code>Table</code>
class, it can be manipulated with <code>dplyr</code> verbs. Please, see the
documentation at the <a href="https://arrow.apache.org/docs/r/articles/data_wrangling.html">Arrow website</a>.
</p>
<p>Note that, if the <code>as_data_frame</code> argument is set to <code>TRUE</code>, the
imported R object will vary in size, according to the size of the
subset. In many situations, this can take a long time an may even be
infeasible, since the object can result in a &quot;larger-than-memory&quot;
size, and possibly will make R operations slow or even a session
crash. Therefore, we always recommend to start with <code>as_data_frame = FALSE</code>, and work with the dataset from there.
</p>
<p>Please, see <code>vignette("intro-to-geslaR")</code> for a detailed example.
</p>


<h3>Value</h3>

<p>An object of class <code>arrow_dplyr_query</code> or a <code>tbl_df</code>
(<code>data.frame</code>).
</p>


<h3>Author(s)</h3>

<p>Fernando Mayer <a href="mailto:fernando.mayer@mu.ie">fernando.mayer@mu.ie</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {
    ## Simple query
    da &lt;- query_gesla(country = "IRL")

    ## Select one specific year
    da &lt;- query_gesla(country = "IRL", year = 2015)

    ## Multiple years
    da &lt;- query_gesla(country = "IRL", year = c(2015, 2017))
    da &lt;- query_gesla(country = "IRL", year = 2010:2017)
    da &lt;- query_gesla(country = "IRL", year = c(2010, 2012, 2015))
    da |&gt;
        count(year) |&gt;
        collect()

    ## Multiple countries
    da &lt;- query_gesla(country = c("IRL", "ATA"), year = 2015)
    da &lt;- query_gesla(country = c("IRL", "ATA"), year = 2010:2017)
    da |&gt;
        count(country, year) |&gt;
        collect()

    ## Specifying a site name
    da &lt;- query_gesla(country = "IRL", year = c(2015, 2017),
        site_name = "Dublin_Port")
    da |&gt;
        count(year) |&gt;
        collect()
}
</code></pre>

<hr>
<h2 id='read_gesla'>Read a GESLA dataset</h2><span id='topic+read_gesla'></span>

<h3>Description</h3>

<p>Read a CSV or Parquet file, as exported from the GESLA
Shiny app interface (geslaR-app). A &quot;GESLA dataset file&quot; is a subset
of the GESLA dataset, fetched from the geslaR-app. When using that
app, you can choose to download the selected subset in CSV or
Parquet file formats. Whichever option is chosen this function will
automatically identify the file type and use the appropriate
functions to import the dataset to R.
</p>
<p>This function can be used for exported files from the online
interface (hosted in this
<a href="https://rstudio.maths.nuim.ie:3939/content/3258adf1-efbb-4996-9a8a-08a474639e8b/">server</a>)
or from a local interface, as when using the
<code><a href="#topic+run_gesla_app">run_gesla_app()</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_gesla(file, as_data_frame = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_gesla_+3A_file">file</code></td>
<td>
<p>The file name (must end in <code>.csv</code> or <code>.parquet</code> only)</p>
</td></tr>
<tr><td><code id="read_gesla_+3A_as_data_frame">as_data_frame</code></td>
<td>
<p>If <code>FALSE</code> (default), the data will be imported
as an Arrow <code>Table</code> format. Otherwise, the data will be in a
<code>tbl_df</code> (<code>data.frame</code>) format. See Details.</p>
</td></tr>
<tr><td><code id="read_gesla_+3A_...">...</code></td>
<td>
<p>Other arguments from <code><a href="arrow.html#topic+read_delim_arrow">arrow::read_csv_arrow()</a></code>, and
<code><a href="arrow.html#topic+read_parquet">arrow::read_parquet()</a></code>, from the
<a href="https://arrow.apache.org/docs/r/">arrow</a> package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We highly recommend to export subsets of the GESLA dataset
from the geslaR-app in the Parquet file format. This format has a
much smaller file size when comparred to the CSV format.
</p>
<p>In any case, the only difference between CSV and Parquet files will
be the file size. However, when importing these data to R, both
file types have the option to be imported as an Arrow <code>Table</code>
format, which is the default (argument <code>as_data_frame = FALSE</code>).
This way, the object created in R will have a very small size,
independent of how big the file size is. To deal with this type of
object, you can use <code>dplyr</code> verbs, in the same way as a normal
<code>data.frame</code> (or <code>tbl_df</code>). Some examples can be found in the <a href="https://arrow.apache.org/docs/r/articles/data_wrangling.html">Arrow documentation</a>.
</p>
<p>If the <code>as_data_frame</code> argument is set to <code>TRUE</code>, the imported R
object will vary in size, according to the size of the dataset, and
regardless of the file type. In many situations, this can be
infeasible, since the object can result in a &quot;larger-than-memory&quot;
size, and possibly will make R operations slow or even a session
crash. Therefore, we always recommend to start with <code>as_data_frame = FALSE</code>, and work with the dataset from there.
</p>
<p>See <strong>Examples</strong> below.
</p>


<h3>Value</h3>

<p>An Arrow <code>Table</code> object, or a <code>tbl_df</code> (<code>data.frame</code>)
</p>


<h3>Author(s)</h3>

<p>Fernando Mayer <a href="mailto:fernando.mayer@mu.ie">fernando.mayer@mu.ie</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##------------------------------------------------------------------
## Import an internal example Parquet file
tmp &lt;- tempdir()
file.copy(system.file(
    "extdata", "ireland.parquet", package = "geslaR"), tmp)
da &lt;- read_gesla(paste0(tmp, "/ireland.parquet"))
## Check size in memory
object.size(da)

##------------------------------------------------------------------
## Import an internal example CSV file
tmp &lt;- tempdir()
file.copy(system.file(
    "extdata", "ireland.csv", package = "geslaR"), tmp)
da &lt;- read_gesla(paste0(tmp, "/ireland.csv"))
## Check size in memory
object.size(da)

##------------------------------------------------------------------
## Import an internal example Parquet file as data.frame
tmp &lt;- tempdir()
file.copy(system.file(
    "extdata", "ireland.parquet", package = "geslaR"), tmp)
da &lt;- read_gesla(paste0(tmp, "/ireland.parquet"),
    as_data_frame = TRUE)
## Check size in memory
object.size(da)

##------------------------------------------------------------------
## Import an internal example CSV file as data.frame
tmp &lt;- tempdir()
file.copy(system.file(
    "extdata", "ireland.csv", package = "geslaR"), tmp)
da &lt;- read_gesla(paste0(tmp, "/ireland.csv"),
    as_data_frame = TRUE)
## Check size in memory
object.size(da)

## Remove files from temporary directory
unlink(paste0(tmp, "/ireland.parquet"))
unlink(paste0(tmp, "/ireland.csv"))
</code></pre>

<hr>
<h2 id='run_gesla_app'>Run the GESLA Shiny app</h2><span id='topic+run_gesla_app'></span>

<h3>Description</h3>

<p>Run the GESLA Shiny app (geslaR-app) locally. The first
time this function is called, it will check if the GESLA dataset is
present. If not, it will prompt to download it or not. Please note
that the entire GESLA dataset is about 7GB in size, so make sure
there is enough space for it. The Shiny app will only work with the
entire dataset downloaded locally.
</p>
<p>Note, however, that the dataset needs to be downloaded only once, so
the next time this function is called, the app will open instantly.
</p>
<p>The same application is hosted in an online <a href="https://rstudio.maths.nuim.ie:3939/content/3258adf1-efbb-4996-9a8a-08a474639e8b/">server</a>,
with the exact same capabilities. The advantage of using the
interface locally is primarily because of its speed. If you don't
need the whole GESLA dataset and/or will only use a subset of it, we
recommend to use the online interface to filter the desired subset.
After that, you can use the <code><a href="#topic+read_gesla">read_gesla()</a></code> function to
import it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_gesla_app(
  app_dest = "./gesla_app",
  dest = paste0(app_dest, "/gesla_dataset"),
  overwrite = FALSE,
  open = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_gesla_app_+3A_app_dest">app_dest</code></td>
<td>
<p>The destination directory that will host the app and
the database. It will be created if it doesn't exist. By default, it
will create a directory called <code>gesla_app</code> in the current working
directory.</p>
</td></tr>
<tr><td><code id="run_gesla_app_+3A_dest">dest</code></td>
<td>
<p>The destination directory that will host the GESLA
dataset files. By default, it will create a subdirectory under the
directory defined in <code>app_dest</code>. It's not recommended to change this
argument. If needed, change only the <code>app_dest</code> argument.</p>
</td></tr>
<tr><td><code id="run_gesla_app_+3A_overwrite">overwrite</code></td>
<td>
<p>Overwrite the current dataset? If <code>TRUE</code> and called
on the same directory as the app, it will overwrite (i.e. download
again) the whole dataset. This is usually not necessary, unless the
dataset has really changed.</p>
</td></tr>
<tr><td><code id="run_gesla_app_+3A_open">open</code></td>
<td>
<p>Should the app open in the default browser? Defaults to
<code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The geslaR-app Shiny interface relies on a set of packages,
defined in the Suggests fiels of the package <code>DESCRIPTION</code> file.
When called for the first time, the function will check if all the
packages are available. If one or more are not installed, a message
will show which one of them should be installed. Alternatively, you
can install all of them at once by reinstalling the <code>geslaR</code> package
with <code>devtools::install_github("EireExtremes/geslaR", dependencies = TRUE)</code>. In this case, you will need to restart your R session.
</p>
<p>When downloading the GESLA dataset for the first time, it may take a
few minutes, since it depends on your internet connection and on the
traffic on an Amazon AWS server. Don't stop the process before it
ends completely. Note that this will be needed only the first time.
Once the dataset is downloaded, the other time this function is
called on the same directory, the interface should open in your
browser instantly.
</p>


<h3>Value</h3>

<p>The geslaR-app Shiny interface will open in your default
browser.
</p>


<h3>Author(s)</h3>

<p>Fernando Mayer <a href="mailto:fernando.mayer@mu.ie">fernando.mayer@mu.ie</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if(interactive()) {
    ##------------------------------------------------------------------
    ## This will create a directory called `geslaR_app` on the current
    ## working directory and import the necessary files for the app.
    ## Also, it will create a subdirectory `gesla_app/gesla_dataset`,
    ## where the dataset will be downloaded.
    tmp &lt;- paste0(tempdir(), "/gesla_app")
    run_gesla_app(app_dest = tmp)

    ##------------------------------------------------------------------
    ## This function call on the same directory where the app is hosted,
    ## will overwrite the whole dataset (i.e. it will be downloaded
    ## again). A prompt for confirmation will be issued.
    run_gesla_app(app_dest = tmp, overwrite = TRUE)

    ## Remove files from temporary directory
    unlink(tmp, recursive = TRUE)
}
</code></pre>

<hr>
<h2 id='write_gesla'>Write a GESLA dataset</h2><span id='topic+write_gesla'></span>

<h3>Description</h3>

<p>Write a CSV or Parquet file. Given an object <code>x</code>, this
function will write a file in the appropriate format to store this
object in the hard drive, facilitating it's reading in any other
session.
</p>
<p>The only accepted classes of <code>x</code> are <code>ArrowObject</code> or <code>data.frame</code>.
If <code>x</code> is an <code>ArrowObject</code>, then the resulting file will have the
<code>.parquet</code> extension, in the <a href="https://parquet.apache.org">Apache Parquet</a> file format. If <code>x</code> is a
<code>data.frame</code>, the file will have a standard <code>.csv</code> extension.
</p>
<p>This function is usefull to save objects created by the
<code>query_gesla()</code> function, for example. However, it may be used in
any case where saving a (possible subset) of the GESLA dataset may
be needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_gesla(x, file_name = "gesla-data", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_gesla_+3A_x">x</code></td>
<td>
<p>An object of class <code>ArrowObject</code> or <code>data.frame</code></p>
</td></tr>
<tr><td><code id="write_gesla_+3A_file_name">file_name</code></td>
<td>
<p>The name of the file to be created. Must be
provided without extension, as this will be determined by the class
of <code>x</code>.</p>
</td></tr>
<tr><td><code id="write_gesla_+3A_...">...</code></td>
<td>
<p>Other arguments from <code><a href="arrow.html#topic+write_csv_arrow">arrow::write_csv_arrow()</a></code>, and
<code><a href="arrow.html#topic+write_parquet">arrow::write_parquet()</a></code>, from the
<a href="https://arrow.apache.org/docs/r/">arrow</a> package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We highly recommend to always use the <code>ArrowObject</code> class,
as it will be much more efficient for dealing with it in R. Also,
the resulting file (with <code>.parquet</code> extension) from objects of this
type will be much smaller than CSV files created from <code>data.frame</code>
objects.
</p>


<h3>Value</h3>

<p>A file with extension <code>.csv</code>, if <code>x</code> is a <code>data.frame</code>, or a
file with extension <code>.parquet</code>, if <code>x</code> is an <code>ArrowObject</code>
</p>


<h3>Author(s)</h3>

<p>Fernando Mayer <a href="mailto:fernando.mayer@mu.ie">fernando.mayer@mu.ie</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>##------------------------------------------------------------------
## Import an internal example Parquet file
## Reading file
tmp &lt;- tempdir()
file.copy(system.file(
    "extdata", "ireland.parquet", package = "geslaR"), tmp)
da &lt;- read_gesla(paste0(tmp, "/ireland.parquet"))
## Generates a subset by filtering
db &lt;- da |&gt;
    filter(day == 1) |&gt;
    collect()
## Save filtered data as file
write_gesla(db, file_name = paste0(tmp, "/gesla-data"))

##------------------------------------------------------------------
## Querying some data
## Make the query
if(interactive()) {
    da &lt;- query_gesla(country = "IRL", year = 2019,
        site_name = "Dublin_Port")
    ## Save the resulting query to file
    write_gesla(da, file_name = paste0(tmp, "/gesla-data"))
}

## Remove files from temporary directory
unlink(paste0(tmp, "/gesla-data.csv"))
unlink(paste0(tmp, "/gesla-data.parquet"))
unlink(paste0(tmp, "/ireland.parquet"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
