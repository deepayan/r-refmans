<!DOCTYPE html><html lang="en"><head><title>Help for package twangRDC</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {twangRDC}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bal.table'><p>Balance tables for <code>twangRDC</code></p></a></li>
<li><a href='#get.weights'><p>Exact weights from a ps.xgb object</p></a></li>
<li><a href='#nola_south'><p>An example FSRDC dataset</p></a></li>
<li><a href='#plot.ps.xgb'><p>Plot for a ps.xbg object</p></a></li>
<li><a href='#ps.xgb'><p>Gradient boosted propensity score estimation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-05-10</td>
</tr>
<tr>
<td>Title:</td>
<td>Gradient Boosting for Linkage Failure in FSRDCs</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew Cefalu &lt;Matthew_Cefalu@rand.org&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), xgboost, data.table, ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>MatrixModels</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions for gradient boosted weighting to correct linkage 
    failures or generate comparison groups.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-17 15:44:42 UTC; mcefalu</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew Cefalu [aut, cre],
  John Sullivan [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-17 21:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bal.table'>Balance tables for <code>twangRDC</code></h2><span id='topic+bal.table'></span>

<h3>Description</h3>

<p><code>bal.table</code> calculates balance tables from a <code>ps.xgb</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bal.table(
  x,
  type = "overall",
  n = 10,
  decreasing = TRUE,
  which.sort = "adj",
  include.var = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bal.table_+3A_x">x</code></td>
<td>
<p>A <code>ps.xgb</code> object.</p>
</td></tr>
<tr><td><code id="bal.table_+3A_type">type</code></td>
<td>
<p>An optional character string requesting if balance should be summarized overall (&quot;overall&quot;) or by strata (&quot;strata&quot;). Default: &quot;overall&quot;.</p>
</td></tr>
<tr><td><code id="bal.table_+3A_n">n</code></td>
<td>
<p>An integer specifying the number of rows to print in the balance table. Default: 10.</p>
</td></tr>
<tr><td><code id="bal.table_+3A_decreasing">decreasing</code></td>
<td>
<p>A logical value indicating if the balance table should be sorted in increasing or decreasing order.</p>
</td></tr>
<tr><td><code id="bal.table_+3A_which.sort">which.sort</code></td>
<td>
<p>An optional character string indicating if the balance table
should be sorted by the adjusted (&quot;adj&quot;) or unadjusted (&quot;unadj&quot;) absolute standardized differences. Default: &quot;adj&quot;.</p>
</td></tr>
<tr><td><code id="bal.table_+3A_include.var">include.var</code></td>
<td>
<p>A logical value indicating if the variable corresponding the the maximum absolute standardized difference
within strata should be included in the balance table. Only valid when <code>strata=TRUE</code>. Default: FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See vignette for examples.
  
</code></pre>

<hr>
<h2 id='get.weights'>Exact weights from a ps.xgb object</h2><span id='topic+get.weights'></span>

<h3>Description</h3>

<p>Extracts weights from a ps.xgb object, output with the unique identifier for easy merging.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.weights(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.weights_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+ps.xgb">ps.xgb</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See vignette for examples.

</code></pre>

<hr>
<h2 id='nola_south'>An example FSRDC dataset</h2><span id='topic+nola_south'></span>

<h3>Description</h3>

<p>See vignette for detailed description of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nola_south)
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<ul>
<li><p> tract_id_str. Census tract identifier
</p>
</li>
<li><p> metarea. metropolitan area
</p>
</li>
<li><p> c00_age12. categorical variable for age
</p>
</li>
<li><p> c00_sex. sex
</p>
</li>
<li><p> c00_race. categorical variable for race
</p>
</li>
<li><p> c00_nphu. number of persons in housing unit
</p>
</li>
<li><p> hhid. household identifier
</p>
</li>
<li><p> sim_pik. indicator of PIK assignment
</p>
</li>
<li><p> nola_rec. indicator of record from Orleans Parish
</p>
</li>
<li><p> id. individual identifier
</p>
</li></ul>

<p>A data frame with 18396 rows and 10 variables
</p>

<hr>
<h2 id='plot.ps.xgb'>Plot for a ps.xbg object</h2><span id='topic+plot.ps.xgb'></span>

<h3>Description</h3>

<p><code>ps.xgb.plot</code> produces a figure showing the balance criteria by iteration for a
ps.xgb object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ps.xgb'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.ps.xgb_+3A_x">x</code></td>
<td>
<p>An object of class <a href="#topic+ps.xgb">ps.xgb</a></p>
</td></tr>
<tr><td><code id="plot.ps.xgb_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to other functions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <a href="ggplot2.html#topic+ggplot">ggplot</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See vignette for examples.

</code></pre>

<hr>
<h2 id='ps.xgb'>Gradient boosted propensity score estimation</h2><span id='topic+ps.xgb'></span>

<h3>Description</h3>

<p><code>ps.xgb</code> calculates propensity scores using gradient boosted logistic
regression and diagnoses the resulting propensity scores using a variety of
methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ps.xgb(
  formula = formula(data),
  strata = NULL,
  data,
  params,
  file = NULL,
  max.steps = Inf,
  iters.per.step = 100,
  id.var,
  min.iter = 1000,
  min.width = NULL,
  verbose = TRUE,
  save.model = FALSE,
  weights = NULL,
  linkage = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ps.xgb_+3A_formula">formula</code></td>
<td>
<p>An object of class <a href="stats.html#topic+formula">formula</a>: a symbolic
description of the propensity score model to be fit with the treatment
indicator on the left side of the formula and the
variables to be balanced on the right side.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_strata">strata</code></td>
<td>
<p>An optional factor variable identifying the strata.
If specified, balance is optimized within strata.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_data">data</code></td>
<td>
<p>A dataset.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_params">params</code></td>
<td>
<p><a href="xgboost.html#topic+xgboost">xgboost</a> parameters.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_file">file</code></td>
<td>
<p>An optional character string naming a file to save intermediate results.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_max.steps">max.steps</code></td>
<td>
<p>An integer specifying the maximum number of steps to take.
Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: Inf.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_iters.per.step">iters.per.step</code></td>
<td>
<p>An integer specifying the number of iterations to add
to the model at each step of algorithm. Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: 100.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_id.var">id.var</code></td>
<td>
<p>A variable that uniquely identifies observations.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_min.iter">min.iter</code></td>
<td>
<p>An integer specifying the minimum number of iterations before checking for convergence.
Note that <code>max.steps</code>*<code>iters.per.step</code> must be greater than or equal to <code>min.iter</code>. Default: 1000.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_min.width">min.width</code></td>
<td>
<p>An integer specifying the minimum number of iterations between the current
number of iterations and the optimal value. Default: <code>5*iters.per.step</code>.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_verbose">verbose</code></td>
<td>
<p>A logical value indicating if the function should update
the user on its progres Default: TRUE.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_save.model">save.model</code></td>
<td>
<p>A logical value indicating if the xgboost model be saved as part of the output object. Default: FALSE.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_weights">weights</code></td>
<td>
<p>An optional variable that identifies user defined weights to be incorporated into the optimization.</p>
</td></tr>
<tr><td><code id="ps.xgb_+3A_linkage">linkage</code></td>
<td>
<p>An indicator of whether the weighting should be for linkage failure (or nonresponse) versus comparison group construction.
A value of TRUE requests weighting to account for linkage failure, while a value of FALSE
requests weighting for comparison group construction. Default: TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class <code>ps.xgb</code>, a list containing
</p>

<ul>
<li> <p><code>bal.tab</code> A table summarizing the balance at the optimal number of iterations.
</p>
</li>
<li> <p><code>es</code> A table summarizing the standardized differences within strata at the optimal number of iterations.
</p>
</li>
<li> <p><code>es.max</code> A table summarizing the maximum absolute standardized difference by strata.
</p>
</li>
<li> <p><code>es.mean</code>A table summarizing the mean absolute standardized difference by strata.
</p>
</li>
<li> <p><code>iter.per.step</code> Saves the value of <code>iters.per.step</code> specified by the user.
</p>
</li>
<li> <p><code>opt.iter</code> The optimal number of iterations.
</p>
</li>
<li> <p><code>strata</code> A list of the strata used in the optimization.
</p>
</li>
<li> <p><code>weight.data</code> A dataset containing the unique ID and the optimal weight for each observation.
</p>
</li></ul>



<h3>References</h3>

<p>Dan McCaffrey, G. Ridgeway, Andrew Morral (2004). &quot;Propensity
Score Estimation with Boosted Regression for Evaluating Adolescent
Substance Abuse Treatment&quot;, <em>Psychological Methods</em> 9(4):403-425.
</p>


<h3>See Also</h3>

<p><a href="twang.html#topic+ps">twang::ps</a>, <a href="xgboost.html#topic+xgboost">xgboost</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See the vignette for examples.


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
