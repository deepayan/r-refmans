<!DOCTYPE html><html><head><title>Help for package scales</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {scales}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#alpha'><p>Modify colour transparency</p></a></li>
<li><a href='#breaks_extended'><p>Automatic breaks for numeric axes</p></a></li>
<li><a href='#breaks_log'><p>Breaks for log axes</p></a></li>
<li><a href='#breaks_pretty'><p>Pretty breaks for date/times</p></a></li>
<li><a href='#breaks_timespan'><p>Breaks for timespan data</p></a></li>
<li><a href='#breaks_width'><p>Equally spaced breaks</p></a></li>
<li><a href='#cbreaks'><p>Compute breaks for continuous scale</p></a></li>
<li><a href='#col_numeric'><p>Colour mapping</p></a></li>
<li><a href='#col2hcl'><p>Modify standard R colour in hcl colour space.</p></a></li>
<li><a href='#colour_ramp'><p>Fast colour interpolation</p></a></li>
<li><a href='#comma'><p>Superseded interface to <code>label_number()</code>/<code>label_comma()</code></p></a></li>
<li><a href='#cscale'><p>Continuous scale</p></a></li>
<li><a href='#date_breaks'><p>Regularly spaced dates</p></a></li>
<li><a href='#date_format'><p>Superseded interface to <code>label_date()</code>/<code>label_time()</code></p></a></li>
<li><a href='#demo_continuous'><p>Demonstrate scales functions with ggplot2 code</p></a></li>
<li><a href='#dollar_format'><p>Superseded interface to <code>label_currency()</code></p></a></li>
<li><a href='#dscale'><p>Discrete scale</p></a></li>
<li><a href='#expand_range'><p>Expand a range with a multiplicative or additive constant</p></a></li>
<li><a href='#format_format'><p>Label using <code>format()</code></p></a></li>
<li><a href='#fullseq'><p>Generate sequence of fixed size intervals covering range.</p></a></li>
<li><a href='#label_bytes'><p>Label bytes (1 kB, 2 MB, etc)</p></a></li>
<li><a href='#label_currency'><p>Label currencies ($100, â‚¬2.50, etc)</p></a></li>
<li><a href='#label_date'><p>Label date/times</p></a></li>
<li><a href='#label_log'><p>Label numbers in log format (10^3, 10^6, etc)</p></a></li>
<li><a href='#label_number'><p>Label numbers in decimal format (e.g. 0.12, 1,234)</p></a></li>
<li><a href='#label_number_auto'><p>Label numbers, avoiding scientific notation where possible</p></a></li>
<li><a href='#label_number_si'><p>Label numbers with SI prefixes (2 kg, 5 mm, etc)</p></a></li>
<li><a href='#label_ordinal'><p>Label ordinal numbers (1st, 2nd, 3rd, etc)</p></a></li>
<li><a href='#label_parse'><p>Label with mathematical annotations</p></a></li>
<li><a href='#label_percent'><p>Label percentages (2.5%, 50%, etc)</p></a></li>
<li><a href='#label_pvalue'><p>Label p-values (e.g. &lt;0.001, 0.25, p &gt;= 0.99)</p></a></li>
<li><a href='#label_scientific'><p>Label numbers with scientific notation (e.g. 1e05, 1.5e-02)</p></a></li>
<li><a href='#label_wrap'><p>Label strings by wrapping across multiple lines</p></a></li>
<li><a href='#minor_breaks_width'><p>Minor breaks</p></a></li>
<li><a href='#muted'><p>Mute standard colour</p></a></li>
<li><a href='#new_transform'><p>Create a new transformation object</p></a></li>
<li><a href='#number'><p>A low-level numeric formatter</p></a></li>
<li><a href='#number_bytes_format'><p>Older interface to <code>label_bytes()</code></p></a></li>
<li><a href='#oob'><p>Out of bounds handling</p></a></li>
<li><a href='#ordinal_format'><p>Superseded interface to <code>label_ordinal()</code></p></a></li>
<li><a href='#pal_area'><p>Area palettes (continuous)</p></a></li>
<li><a href='#pal_brewer'><p>Colour Brewer palette (discrete)</p></a></li>
<li><a href='#pal_dichromat'><p>Dichromat (colour-blind) palette (discrete)</p></a></li>
<li><a href='#pal_div_gradient'><p>Diverging colour gradient (continuous).</p></a></li>
<li><a href='#pal_gradient_n'><p>Arbitrary colour gradient palette (continuous)</p></a></li>
<li><a href='#pal_grey'><p>Grey scale palette (discrete)</p></a></li>
<li><a href='#pal_hue'><p>Hue palette (discrete)</p></a></li>
<li><a href='#pal_identity'><p>Identity palette</p></a></li>
<li><a href='#pal_linetype'><p>Line type palette (discrete)</p></a></li>
<li><a href='#pal_manual'><p>Manual palette (discrete)</p></a></li>
<li><a href='#pal_rescale'><p>Rescale palette (continuous)</p></a></li>
<li><a href='#pal_seq_gradient'><p>Sequential colour gradient palette (continuous)</p></a></li>
<li><a href='#pal_shape'><p>Shape palette (discrete)</p></a></li>
<li><a href='#pal_viridis'><p>Viridis palette</p></a></li>
<li><a href='#parse_format'><p>Superseded interface to <code>label_parse()</code>/<code>label_math()</code></p></a></li>
<li><a href='#percent_format'><p>Superseded interface to <code>label_percent()</code></p></a></li>
<li><a href='#pretty_breaks'><p>Superseded interface to <code>breaks_pretty()</code></p></a></li>
<li><a href='#pvalue_format'><p>Superseded interface to <code>label_pvalue()</code></p></a></li>
<li><a href='#Range'><p>Mutable ranges</p></a></li>
<li><a href='#regular_minor_breaks'><p>Minor breaks</p></a></li>
<li><a href='#rescale'><p>Rescale continuous vector to have specified minimum and maximum</p></a></li>
<li><a href='#rescale_max'><p>Rescale numeric vector to have specified maximum</p></a></li>
<li><a href='#rescale_mid'><p>Rescale vector to have specified minimum, midpoint, and maximum</p></a></li>
<li><a href='#rescale_none'><p>Don't perform rescaling</p></a></li>
<li><a href='#scales-package'><p>scales: Scale Functions for Visualization</p></a></li>
<li><a href='#scientific_format'><p>Superseded interface to <code>label_scientific()</code></p></a></li>
<li><a href='#show_col'><p>Show colours</p></a></li>
<li><a href='#train_continuous'><p>Train (update) a continuous scale</p></a></li>
<li><a href='#train_discrete'><p>Train (update) a discrete scale</p></a></li>
<li><a href='#trans_breaks'><p>Pretty breaks on transformed scale</p></a></li>
<li><a href='#trans_format'><p>Format labels after transformation</p></a></li>
<li><a href='#transform_asinh'><p>Inverse Hyperbolic Sine transformation</p></a></li>
<li><a href='#transform_asn'><p>Arc-sin square root transformation</p></a></li>
<li><a href='#transform_atanh'><p>Arc-tangent transformation</p></a></li>
<li><a href='#transform_boxcox'><p>Box-Cox &amp; modulus transformations</p></a></li>
<li><a href='#transform_compose'><p>Compose two or more transformations together</p></a></li>
<li><a href='#transform_date'><p>Transformation for dates (class Date)</p></a></li>
<li><a href='#transform_exp'><p>Exponential transformation (inverse of log transformation)</p></a></li>
<li><a href='#transform_identity'><p>Identity transformation (do nothing)</p></a></li>
<li><a href='#transform_log'><p>Log transformations</p></a></li>
<li><a href='#transform_probability'><p>Probability transformation</p></a></li>
<li><a href='#transform_reciprocal'><p>Reciprocal transformation</p></a></li>
<li><a href='#transform_reverse'><p>Reverse transformation</p></a></li>
<li><a href='#transform_sqrt'><p>Square-root transformation</p></a></li>
<li><a href='#transform_time'><p>Transformation for date-times (class POSIXt)</p></a></li>
<li><a href='#transform_timespan'><p>Transformation for times (class hms)</p></a></li>
<li><a href='#transform_yj'><p>Yeo-Johnson transformation</p></a></li>
<li><a href='#trim_to_domain'><p>Compute range of transformed values</p></a></li>
<li><a href='#unit_format'><p>Unit labels</p></a></li>
<li><a href='#wrap_format'><p>Superseded interface to <code>label_wrap()</code></p></a></li>
<li><a href='#zero_range'><p>Determine if range of vector is close to zero, with a specified tolerance</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Scale Functions for Visualization</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Graphical scales map data to aesthetics, and provide methods
    for automatically determining breaks and labels for axes and legends.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://scales.r-lib.org">https://scales.r-lib.org</a>, <a href="https://github.com/r-lib/scales">https://github.com/r-lib/scales</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-lib/scales/issues">https://github.com/r-lib/scales/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, farver (&ge; 2.0.3), glue, labeling, lifecycle, munsell (&ge;
0.5), R6, RColorBrewer, rlang (&ge; 1.0.0), viridisLite</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bit64, covr, dichromat, ggplot2, hms (&ge; 0.5.0), stringi,
testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-27 20:27:59 UTC; thomas</td>
</tr>
<tr>
<td>Author:</td>
<td>Hadley Wickham [aut],
  Thomas Lin Pedersen <a href="https://orcid.org/0000-0002-5147-4711"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [cre,
    aut],
  Dana Seidel [aut],
  Posit, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Thomas Lin Pedersen &lt;thomas.pedersen@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-28 09:10:06 UTC</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.4.0; ; 2024-01-02 07:46:08 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='alpha'>Modify colour transparency</h2><span id='topic+alpha'></span>

<h3>Description</h3>

<p>Vectorised in both colour and alpha.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alpha(colour, alpha = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="alpha_+3A_colour">colour</code></td>
<td>
<p>colour</p>
</td></tr>
<tr><td><code id="alpha_+3A_alpha">alpha</code></td>
<td>
<p>new alpha level in [0,1].  If alpha is <code>NA</code>,
existing alpha values are preserved.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>alpha("red", 0.1)
alpha(colours(), 0.5)
alpha("red", seq(0, 1, length.out = 10))
alpha(c("first" = "gold", "second" = "lightgray", "third" = "#cd7f32"), .5)
</code></pre>

<hr>
<h2 id='breaks_extended'>Automatic breaks for numeric axes</h2><span id='topic+breaks_extended'></span><span id='topic+extended_breaks'></span>

<h3>Description</h3>

<p>Uses Wilkinson's extended breaks algorithm as implemented in the
<span class="pkg">labeling</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breaks_extended(n = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="breaks_extended_+3A_n">n</code></td>
<td>
<p>Desired number of breaks. You may get slightly more or fewer
breaks that requested.</p>
</td></tr>
<tr><td><code id="breaks_extended_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="labeling.html#topic+extended">labeling::extended()</a></code></p>
</td></tr>
</table>


<h3>References</h3>

<p>Talbot, J., Lin, S., Hanrahan, P. (2010) An Extension of
Wilkinson's Algorithm for Positioning Tick Labels on Axes, InfoVis
2010 <a href="http://vis.stanford.edu/files/2010-TickLabels-InfoVis.pdf">http://vis.stanford.edu/files/2010-TickLabels-InfoVis.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(0, 10))
demo_continuous(c(0, 10), breaks = breaks_extended(3))
demo_continuous(c(0, 10), breaks = breaks_extended(10))
</code></pre>

<hr>
<h2 id='breaks_log'>Breaks for log axes</h2><span id='topic+breaks_log'></span><span id='topic+log_breaks'></span>

<h3>Description</h3>

<p>This algorithm starts by looking for integer powers of <code>base</code>. If that
doesn't provide enough breaks, it then looks for additional intermediate
breaks which are integer multiples of integer powers of base. If that fails
(which it can for very small ranges), we fall back to <code><a href="scales.html#topic+extended_breaks">extended_breaks()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breaks_log(n = 5, base = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="breaks_log_+3A_n">n</code></td>
<td>
<p>desired number of breaks</p>
</td></tr>
<tr><td><code id="breaks_log_+3A_base">base</code></td>
<td>
<p>base of logarithm to use</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The algorithm starts by looking for a set of integer powers of <code>base</code> that
cover the range of the data. If that does not generate at least <code>n - 2</code>
breaks, we look for an integer between 1 and <code>base</code> that splits the interval
approximately in half. For example, in the case of <code>base = 10</code>, this integer
is 3 because <code>log10(3) = 0.477</code>. This leaves 2 intervals: <code>c(1, 3)</code> and
<code>c(3, 10)</code>. If we still need more breaks, we look for another integer
that splits the largest remaining interval (on the log-scale) approximately
in half. For <code>base = 10</code>, this is 5 because <code>log10(5) = 0.699</code>.
</p>
<p>The generic algorithm starts with a set of integers <code>steps</code> containing
only 1 and a set of candidate integers containing all integers larger than 1
and smaller than <code>base</code>. Then for each remaining candidate integer
<code>x</code>, the smallest interval (on the log-scale) in the vector
<code>sort(c(x, steps, base))</code> is calculated. The candidate <code>x</code> which
yields the largest minimal interval is added to <code>steps</code> and removed from
the candidate set. This is repeated until either a sufficient number of
breaks, <code style="white-space: pre;">&#8288;&gt;= n-2&#8288;</code>, are returned or all candidates have been used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_log10(c(1, 1e5))
demo_log10(c(1, 1e6))

# Request more breaks by setting n
demo_log10(c(1, 1e6), breaks = breaks_log(6))

# Some tricky ranges
demo_log10(c(2000, 9000))
demo_log10(c(2000, 14000))
demo_log10(c(2000, 85000), expand = c(0, 0))

# An even smaller range that requires falling back to linear breaks
demo_log10(c(1800, 2000))
</code></pre>

<hr>
<h2 id='breaks_pretty'>Pretty breaks for date/times</h2><span id='topic+breaks_pretty'></span>

<h3>Description</h3>

<p>Uses default R break algorithm as implemented in <code><a href="base.html#topic+pretty">pretty()</a></code>. This is
primarily useful for date/times, as <code><a href="scales.html#topic+extended_breaks">extended_breaks()</a></code> should do a slightly
better job for numeric scales.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breaks_pretty(n = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="breaks_pretty_+3A_n">n</code></td>
<td>
<p>Desired number of breaks. You may get slightly more or fewer
breaks that requested.</p>
</td></tr>
<tr><td><code id="breaks_pretty_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="base.html#topic+pretty">pretty()</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>one_month &lt;- as.POSIXct(c("2020-05-01", "2020-06-01"))
demo_datetime(one_month)
demo_datetime(one_month, breaks = breaks_pretty(2))
demo_datetime(one_month, breaks = breaks_pretty(4))

# Tightly spaced date breaks often need custom labels too
demo_datetime(one_month, breaks = breaks_pretty(12))
demo_datetime(one_month,
  breaks = breaks_pretty(12),
  labels = label_date_short()
)
</code></pre>

<hr>
<h2 id='breaks_timespan'>Breaks for timespan data</h2><span id='topic+breaks_timespan'></span>

<h3>Description</h3>

<p>As timespan units span a variety of bases (1000 below seconds, 60 for second
and minutes, 24 for hours, and 7 for days), the range of the input data
determines the base used for calculating breaks
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breaks_timespan(unit = c("secs", "mins", "hours", "days", "weeks"), n = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="breaks_timespan_+3A_unit">unit</code></td>
<td>
<p>The unit used to interpret numeric data input</p>
</td></tr>
<tr><td><code id="breaks_timespan_+3A_n">n</code></td>
<td>
<p>Desired number of breaks. You may get slightly more or fewer
breaks that requested.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>demo_timespan(seq(0, 100), breaks = breaks_timespan())

</code></pre>

<hr>
<h2 id='breaks_width'>Equally spaced breaks</h2><span id='topic+breaks_width'></span>

<h3>Description</h3>

<p>Useful for numeric, date, and date-time scales.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breaks_width(width, offset = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="breaks_width_+3A_width">width</code></td>
<td>
<p>Distance between each break. Either a number, or for
date/times, a single string of the form <code>"{n} {unit}"</code>, e.g. &quot;1 month&quot;,
&quot;5 days&quot;. Unit can be of one &quot;sec&quot;, &quot;min&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;,
&quot;month&quot;, &quot;year&quot;.</p>
</td></tr>
<tr><td><code id="breaks_width_+3A_offset">offset</code></td>
<td>
<p>Use if you don't want breaks to start at zero, or on a
conventional date or time boundary such as the 1st of January or midnight.
Either a number, or for date/times, a single string of the form
<code>"{n} {unit}"</code>, as for <code>width</code>.
</p>
<p><code>offset</code> can be a vector, which will accumulate in the order given. This
is mostly useful for dates, where e.g. <code>c("3 months", "5 days")</code> will
offset by three months and five days, which is useful for the UK tax year.
Note that due to way that dates are rounded, there's no guarantee that
<code>offset = c(x, y)</code> will give the same result as <code>offset = c(y, x)</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(0, 100))
demo_continuous(c(0, 100), breaks = breaks_width(10))
demo_continuous(c(0, 100), breaks = breaks_width(20, -4))
demo_continuous(c(0, 100), breaks = breaks_width(20, 4))

# This is also useful for dates
one_month &lt;- as.POSIXct(c("2020-05-01", "2020-06-01"))
demo_datetime(one_month)
demo_datetime(one_month, breaks = breaks_width("1 week"))
demo_datetime(one_month, breaks = breaks_width("5 days"))
# This is so useful that scale_x_datetime() has a shorthand:
demo_datetime(one_month, date_breaks = "5 days")

# hms times also work
one_hour &lt;- hms::hms(hours = 0:1)
demo_time(one_hour)
demo_time(one_hour, breaks = breaks_width("15 min"))
demo_time(one_hour, breaks = breaks_width("600 sec"))

# Offets are useful for years that begin on dates other than the 1st of
# January, such as the UK financial year, which begins on the 1st of April.
three_years &lt;- as.POSIXct(c("2020-01-01", "2021-01-01", "2022-01-01"))
demo_datetime(
  three_years,
  breaks = breaks_width("1 year", offset = "3 months")
)

# The offset can be a vector, to create offsets that have compound units,
# such as the UK fiscal (tax) year, which begins on the 6th of April.
demo_datetime(
  three_years,
  breaks = breaks_width("1 year", offset = c("3 months", "5 days"))
)
</code></pre>

<hr>
<h2 id='cbreaks'>Compute breaks for continuous scale</h2><span id='topic+cbreaks'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>This function wraps up the components needed to go from a continuous range
to a set of breaks and labels suitable for display on axes or legends.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cbreaks(range, breaks = extended_breaks(), labels = scientific_format())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cbreaks_+3A_range">range</code></td>
<td>
<p>numeric vector of length 2 giving the range of the underlying
data</p>
</td></tr>
<tr><td><code id="cbreaks_+3A_breaks">breaks</code></td>
<td>
<p>either a vector of break values, or a break function that
will make a vector of breaks when given the range of the data</p>
</td></tr>
<tr><td><code id="cbreaks_+3A_labels">labels</code></td>
<td>
<p>either a vector of labels (character vector or list of
expression) or a format function that will make a vector of labels when
called with a vector of breaks. Labels can only be specified manually if
breaks are - it is extremely dangerous to supply labels if you don't know
what the breaks will be.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>cbreaks(c(0, 100))
cbreaks(c(0, 100), breaks_pretty(3))
cbreaks(c(0, 100), breaks_pretty(10))
cbreaks(c(1, 100), log_breaks())
cbreaks(c(1, 1e4), log_breaks())

cbreaks(c(0, 100), labels = math_format())
cbreaks(c(0, 1), labels = percent_format())
cbreaks(c(0, 1e6), labels = comma_format())
cbreaks(c(0, 1e6), labels = dollar_format())
cbreaks(c(0, 30), labels = dollar_format())

# You can also specify them manually:
cbreaks(c(0, 100), breaks = c(15, 20, 80))
cbreaks(c(0, 100), breaks = c(15, 20, 80), labels = c(1.5, 2.0, 8.0))
cbreaks(c(0, 100),
  breaks = c(15, 20, 80),
  labels = expression(alpha, beta, gamma)
)
</code></pre>

<hr>
<h2 id='col_numeric'>Colour mapping</h2><span id='topic+col_numeric'></span><span id='topic+col_bin'></span><span id='topic+col_quantile'></span><span id='topic+col_factor'></span>

<h3>Description</h3>

<p>Conveniently maps data values (numeric or factor/character) to colours
according to a given palette, which can be provided in a variety of formats.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_numeric(
  palette,
  domain,
  na.color = "#808080",
  alpha = FALSE,
  reverse = FALSE
)

col_bin(
  palette,
  domain,
  bins = 7,
  pretty = TRUE,
  na.color = "#808080",
  alpha = FALSE,
  reverse = FALSE,
  right = FALSE
)

col_quantile(
  palette,
  domain,
  n = 4,
  probs = seq(0, 1, length.out = n + 1),
  na.color = "#808080",
  alpha = FALSE,
  reverse = FALSE,
  right = FALSE
)

col_factor(
  palette,
  domain,
  levels = NULL,
  ordered = FALSE,
  na.color = "#808080",
  alpha = FALSE,
  reverse = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col_numeric_+3A_palette">palette</code></td>
<td>
<p>The colours or colour function that values will be mapped to</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_domain">domain</code></td>
<td>
<p>The possible values that can be mapped.
</p>
<p>For <code>col_numeric</code> and <code>col_bin</code>, this can be a simple numeric
range (e.g. <code>c(0, 100)</code>); <code>col_quantile</code> needs representative
numeric data; and <code>col_factor</code> needs categorical data.
</p>
<p>If <code>NULL</code>, then whenever the resulting colour function is called, the
<code>x</code> value will represent the domain. This implies that if the function
is invoked multiple times, the encoding between values and colours may not
be consistent; if consistency is needed, you must provide a non-<code>NULL</code>
domain.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_na.color">na.color</code></td>
<td>
<p>The colour to return for <code>NA</code> values. Note that
<code>na.color = NA</code> is valid.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_alpha">alpha</code></td>
<td>
<p>Whether alpha channels should be respected or ignored. If <code>TRUE</code>
then colors without explicit alpha information will be treated as fully
opaque.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_reverse">reverse</code></td>
<td>
<p>Whether the colors (or color function) in <code>palette</code> should be
used in reverse order. For example, if the default order of a palette goes
from blue to green, then <code>reverse = TRUE</code> will result in the colors going
from green to blue.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_bins">bins</code></td>
<td>
<p>Either a numeric vector of two or more unique cut points or a
single number (greater than or equal to 2) giving the number of intervals
into which the domain values are to be cut.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_pretty">pretty</code></td>
<td>
<p>Whether to use the function <code><a href="base.html#topic+pretty">pretty()</a></code> to generate
the bins when the argument <code>bins</code> is a single number. When
<code>pretty = TRUE</code>, the actual number of bins may not be the number of
bins you specified. When <code>pretty = FALSE</code>, <code><a href="base.html#topic+seq">seq()</a></code> is used
to generate the bins and the breaks may not be &quot;pretty&quot;.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_right">right</code></td>
<td>
<p>parameter supplied to <code><a href="base.html#topic+cut">base::cut()</a></code>. See Details</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_n">n</code></td>
<td>
<p>Number of equal-size quantiles desired. For more precise control,
use the <code>probs</code> argument instead.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_probs">probs</code></td>
<td>
<p>See <code><a href="stats.html#topic+quantile">stats::quantile()</a></code>. If provided, the <code>n</code>
argument is ignored.</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_levels">levels</code></td>
<td>
<p>An alternate way of specifying levels; if specified, domain is
ignored</p>
</td></tr>
<tr><td><code id="col_numeric_+3A_ordered">ordered</code></td>
<td>
<p>If <code>TRUE</code> and <code>domain</code> needs to be coerced to a
factor, treat it as already in the correct order</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>col_numeric</code> is a simple linear mapping from continuous numeric data
to an interpolated palette.
</p>
<p><code>col_bin</code> also maps continuous numeric data, but performs
binning based on value (see the <code><a href="base.html#topic+cut">base::cut()</a></code> function). <code>col_bin</code>
defaults for the <code>cut</code> function are <code>include.lowest = TRUE</code> and
<code>right = FALSE</code>.
</p>
<p><code>col_quantile</code> similarly bins numeric data, but via the
<code><a href="stats.html#topic+quantile">stats::quantile()</a></code> function.
</p>
<p><code>col_factor</code> maps factors to colours. If the palette is
discrete and has a different number of colours than the number of factors,
interpolation is used.
</p>
<p>The <code>palette</code> argument can be any of the following:
</p>

<ol>
<li><p>A character vector of RGB or named colours. Examples: <code>palette()</code>, <code>c("#000000", "#0000FF", "#FFFFFF")</code>, <code>topo.colors(10)</code>
</p>
</li>
<li><p>The name of an RColorBrewer palette, e.g. <code>"BuPu"</code> or <code>"Greens"</code>.
</p>
</li>
<li><p>The full name of a viridis palette: <code>"viridis"</code>, <code>"magma"</code>, <code>"inferno"</code>, or <code>"plasma"</code>.
</p>
</li>
<li><p>A function that receives a single value between 0 and 1 and returns a colour. Examples: <code>colorRamp(c("#000000", "#FFFFFF"), interpolate="spline")</code>.
</p>
</li></ol>



<h3>Value</h3>

<p>A function that takes a single parameter <code>x</code>; when called with a
vector of numbers (except for <code>col_factor</code>, which expects
factors/characters), #RRGGBB colour strings are returned (unless
<code>alpha = TRUE</code> in which case #RRGGBBAA may also be possible).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pal &lt;- col_bin("Greens", domain = 0:100)
show_col(pal(sort(runif(10, 60, 100))))

# Exponential distribution, mapped continuously
show_col(col_numeric("Blues", domain = NULL)(sort(rexp(16))))
# Exponential distribution, mapped by interval
show_col(col_bin("Blues", domain = NULL, bins = 4)(sort(rexp(16))))
# Exponential distribution, mapped by quantile
show_col(col_quantile("Blues", domain = NULL)(sort(rexp(16))))

# Categorical data; by default, the values being coloured span the gamut...
show_col(col_factor("RdYlBu", domain = NULL)(LETTERS[1:5]))
# ...unless the data is a factor, without droplevels...
show_col(col_factor("RdYlBu", domain = NULL)(factor(LETTERS[1:5], levels = LETTERS)))
# ...or the domain is stated explicitly.
show_col(col_factor("RdYlBu", levels = LETTERS)(LETTERS[1:5]))
</code></pre>

<hr>
<h2 id='col2hcl'>Modify standard R colour in hcl colour space.</h2><span id='topic+col2hcl'></span>

<h3>Description</h3>

<p>Transforms rgb to hcl, sets non-missing arguments and then backtransforms
to rgb.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col2hcl(colour, h = NULL, c = NULL, l = NULL, alpha = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col2hcl_+3A_colour">colour</code></td>
<td>
<p>character vector of colours to be modified</p>
</td></tr>
<tr><td><code id="col2hcl_+3A_h">h</code></td>
<td>
<p>Hue, <code style="white-space: pre;">&#8288;[0, 360]&#8288;</code></p>
</td></tr>
<tr><td><code id="col2hcl_+3A_c">c</code></td>
<td>
<p>Chroma, <code style="white-space: pre;">&#8288;[0, 100]&#8288;</code></p>
</td></tr>
<tr><td><code id="col2hcl_+3A_l">l</code></td>
<td>
<p>Luminance, <code style="white-space: pre;">&#8288;[0, 100]&#8288;</code></p>
</td></tr>
<tr><td><code id="col2hcl_+3A_alpha">alpha</code></td>
<td>
<p>Alpha, <code style="white-space: pre;">&#8288;[0, 1]&#8288;</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>reds &lt;- rep("red", 6)
show_col(col2hcl(reds, h = seq(0, 180, length = 6)))
show_col(col2hcl(reds, c = seq(0, 80, length = 6)))
show_col(col2hcl(reds, l = seq(0, 100, length = 6)))
show_col(col2hcl(reds, alpha = seq(0, 1, length = 6)))
</code></pre>

<hr>
<h2 id='colour_ramp'>Fast colour interpolation</h2><span id='topic+colour_ramp'></span>

<h3>Description</h3>

<p>Returns a function that maps the interval [0,1] to a set of colours.
Interpolation is performed in the CIELAB colour space. Similar to
<code><a href="grDevices.html#topic+colorRamp">colorRamp</a>(space = 'Lab')</code>, but hundreds of
times faster, and provides results in <code>"#RRGGBB"</code> (or
<code>"#RRGGBBAA"</code>) character form instead of RGB colour matrices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>colour_ramp(colors, na.color = NA, alpha = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colour_ramp_+3A_colors">colors</code></td>
<td>
<p>Colours to interpolate; must be a valid argument to
<code><a href="grDevices.html#topic+col2rgb">grDevices::col2rgb()</a></code>. This can be a character vector of
<code>"#RRGGBB"</code> or  <code>"#RRGGBBAA"</code>, colour names from
<code><a href="grDevices.html#topic+colors">grDevices::colors()</a></code>, or a positive integer that indexes into
<code><a href="grDevices.html#topic+palette">grDevices::palette()</a></code>.</p>
</td></tr>
<tr><td><code id="colour_ramp_+3A_na.color">na.color</code></td>
<td>
<p>The colour to map to <code>NA</code> values (for example,
<code>"#606060"</code> for dark grey, or <code>"#00000000"</code> for transparent) and
values outside of [0,1]. Can itself by <code>NA</code>, which will simply cause
an <code>NA</code> to be inserted into the output.</p>
</td></tr>
<tr><td><code id="colour_ramp_+3A_alpha">alpha</code></td>
<td>
<p>Whether to include alpha transparency channels in interpolation.
If <code>TRUE</code> then the alpha information is included in the interpolation.
The returned colours will be provided in <code>"#RRGGBBAA"</code> format when needed,
i.e., in cases where the colour is not fully opaque, so that the <code>"AA"</code>
part is not equal to <code>"FF"</code>. Fully opaque colours will be returned in
<code>"#RRGGBB"</code> format. If <code>FALSE</code>, the alpha information is discarded
before interpolation and colours are always returned as <code>"#RRGGBB"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A function that takes a numeric vector and returns a character vector
of the same length with RGB or RGBA hex colours.
</p>


<h3>See Also</h3>

<p><code><a href="grDevices.html#topic+colorRamp">colorRamp</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ramp &lt;- colour_ramp(c("red", "green", "blue"))
show_col(ramp(seq(0, 1, length = 12)))
</code></pre>

<hr>
<h2 id='comma'>Superseded interface to <code>label_number()</code>/<code>label_comma()</code></h2><span id='topic+comma'></span><span id='topic+number_format'></span><span id='topic+comma_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_number">label_number()</a></code>/<code><a href="scales.html#topic+label_comma">label_comma()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comma(
  x,
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  digits,
  ...
)

number_format(
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = " ",
  decimal.mark = ".",
  style_positive = c("none", "plus", "space"),
  style_negative = c("hyphen", "minus", "parens"),
  scale_cut = NULL,
  trim = TRUE,
  ...
)

comma_format(
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  digits,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="comma_+3A_x">x</code></td>
<td>
<p>A numeric vector to format.</p>
</td></tr>
<tr><td><code id="comma_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="comma_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="comma_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="comma_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="comma_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="comma_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="comma_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="comma_+3A_digits">digits</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Use <code>accuracy</code> instead.</p>
</td></tr>
<tr><td><code id="comma_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
<tr><td><code id="comma_+3A_style_positive">style_positive</code></td>
<td>
<p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</td></tr>
<tr><td><code id="comma_+3A_style_negative">style_negative</code></td>
<td>
<p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="comma_+3A_scale_cut">scale_cut</code></td>
<td>
<p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</td></tr>
</table>

<hr>
<h2 id='cscale'>Continuous scale</h2><span id='topic+cscale'></span>

<h3>Description</h3>

<p>Continuous scale
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cscale(x, palette, na.value = NA_real_, trans = transform_identity())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cscale_+3A_x">x</code></td>
<td>
<p>vector of continuous values to scale</p>
</td></tr>
<tr><td><code id="cscale_+3A_palette">palette</code></td>
<td>
<p>palette to use.
</p>
<p>Built in palettes:
<code><a href="scales.html#topic+pal_area">pal_area</a></code>, <code><a href="scales.html#topic+pal_brewer">pal_brewer</a></code>, <code><a href="scales.html#topic+pal_dichromat">pal_dichromat</a></code>, <code><a href="scales.html#topic+pal_div_gradient">pal_div_gradient</a></code>, <code><a href="scales.html#topic+pal_gradient_n">pal_gradient_n</a></code>, <code><a href="scales.html#topic+pal_grey">pal_grey</a></code>, <code><a href="scales.html#topic+pal_hue">pal_hue</a></code>, <code><a href="scales.html#topic+pal_identity">pal_identity</a></code>, <code><a href="scales.html#topic+pal_linetype">pal_linetype</a></code>, <code><a href="scales.html#topic+pal_manual">pal_manual</a></code>, <code><a href="scales.html#topic+pal_rescale">pal_rescale</a></code>, <code><a href="scales.html#topic+pal_seq_gradient">pal_seq_gradient</a></code>, <code><a href="scales.html#topic+pal_shape">pal_shape</a></code>, <code><a href="scales.html#topic+pal_viridis">pal_viridis</a></code></p>
</td></tr>
<tr><td><code id="cscale_+3A_na.value">na.value</code></td>
<td>
<p>value to use for missing values</p>
</td></tr>
<tr><td><code id="cscale_+3A_trans">trans</code></td>
<td>
<p>transformation object describing the how to transform the
raw data prior to scaling.  Defaults to the identity transformation which
leaves the data unchanged.
</p>
<p>Built in transformations:
<code><a href="scales.html#topic+transform_asinh">transform_asinh</a></code>, <code><a href="scales.html#topic+transform_asn">transform_asn</a></code>, <code><a href="scales.html#topic+transform_atanh">transform_atanh</a></code>, <code><a href="scales.html#topic+transform_boxcox">transform_boxcox</a></code>, <code><a href="scales.html#topic+transform_compose">transform_compose</a></code>, <code><a href="scales.html#topic+transform_date">transform_date</a></code>, <code><a href="scales.html#topic+transform_exp">transform_exp</a></code>, <code><a href="scales.html#topic+transform_hms">transform_hms</a></code>, <code><a href="scales.html#topic+transform_identity">transform_identity</a></code>, <code><a href="scales.html#topic+transform_log">transform_log</a></code>, <code><a href="scales.html#topic+transform_log10">transform_log10</a></code>, <code><a href="scales.html#topic+transform_log1p">transform_log1p</a></code>, <code><a href="scales.html#topic+transform_log2">transform_log2</a></code>, <code><a href="scales.html#topic+transform_logit">transform_logit</a></code>, <code><a href="scales.html#topic+transform_modulus">transform_modulus</a></code>, <code><a href="scales.html#topic+transform_probability">transform_probability</a></code>, <code><a href="scales.html#topic+transform_probit">transform_probit</a></code>, <code><a href="scales.html#topic+transform_pseudo_log">transform_pseudo_log</a></code>, <code><a href="scales.html#topic+transform_reciprocal">transform_reciprocal</a></code>, <code><a href="scales.html#topic+transform_reverse">transform_reverse</a></code>, <code><a href="scales.html#topic+transform_sqrt">transform_sqrt</a></code>, <code><a href="scales.html#topic+transform_time">transform_time</a></code>, <code><a href="scales.html#topic+transform_timespan">transform_timespan</a></code>, <code><a href="scales.html#topic+transform_yj">transform_yj</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>with(mtcars, plot(disp, mpg, cex = cscale(hp, pal_rescale())))
with(mtcars, plot(disp, mpg, cex = cscale(hp, pal_rescale(),
  trans = transform_sqrt()
)))
with(mtcars, plot(disp, mpg, cex = cscale(hp, pal_area())))
with(mtcars, plot(disp, mpg,
  pch = 20, cex = 5,
  col = cscale(hp, pal_seq_gradient("grey80", "black"))
))
</code></pre>

<hr>
<h2 id='date_breaks'>Regularly spaced dates</h2><span id='topic+date_breaks'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>Use <code>breaks_width()</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_breaks(width = "1 month")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date_breaks_+3A_width">width</code></td>
<td>
<p>an interval specification, one of &quot;sec&quot;, &quot;min&quot;, &quot;hour&quot;,
&quot;day&quot;, &quot;week&quot;, &quot;month&quot;, &quot;year&quot;. Can be by an integer and a space, or
followed by &quot;s&quot;. Fractional seconds are supported.</p>
</td></tr>
</table>

<hr>
<h2 id='date_format'>Superseded interface to <code>label_date()</code>/<code>label_time()</code></h2><span id='topic+date_format'></span><span id='topic+time_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to [label_date()/<code><a href="scales.html#topic+label_time">label_time()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_format(format = "%Y-%m-%d", tz = "UTC", locale = NULL)

time_format(format = "%H:%M:%S", tz = "UTC", locale = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date_format_+3A_format">format</code></td>
<td>
<p>For <code>date_format()</code> and <code>time_format()</code> a date/time format
string using standard POSIX specification.  See <code><a href="base.html#topic+strptime">strptime()</a></code> for details.
</p>
<p>For <code>date_short()</code> a character vector of length 4 giving the format
components to use for year, month, day, and hour respectively.</p>
</td></tr>
<tr><td><code id="date_format_+3A_tz">tz</code></td>
<td>
<p>a time zone name, see <code><a href="base.html#topic+timezones">timezones()</a></code>. Defaults
to UTC</p>
</td></tr>
<tr><td><code id="date_format_+3A_locale">locale</code></td>
<td>
<p>Locale to use when for day and month names. The default
uses the current locale. Setting this argument requires stringi, and you
can see a complete list of supported locales with
<code><a href="stringi.html#topic+stri_locale_list">stringi::stri_locale_list()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='demo_continuous'>Demonstrate scales functions with ggplot2 code</h2><span id='topic+demo_continuous'></span><span id='topic+demo_log10'></span><span id='topic+demo_discrete'></span><span id='topic+demo_datetime'></span><span id='topic+demo_time'></span><span id='topic+demo_timespan'></span>

<h3>Description</h3>

<p>These functions generate ggplot2 code needed to use scales functions for
real code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_continuous(x, ...)

demo_log10(x, ...)

demo_discrete(x, ...)

demo_datetime(x, ...)

demo_time(x, ...)

demo_timespan(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_continuous_+3A_x">x</code></td>
<td>
<p>A vector of data</p>
</td></tr>
</table>

<hr>
<h2 id='dollar_format'>Superseded interface to <code>label_currency()</code></h2><span id='topic+dollar_format'></span><span id='topic+dollar'></span><span id='topic+label_dollar'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_currency">label_currency()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dollar_format(
  accuracy = NULL,
  scale = 1,
  prefix = "$",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  largest_with_cents = 1e+05,
  negative_parens = deprecated(),
  ...
)

dollar(
  x,
  accuracy = NULL,
  scale = 1,
  prefix = "$",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  largest_with_cents = 1e+05,
  negative_parens = deprecated(),
  style_negative = c("hyphen", "minus", "parens"),
  scale_cut = NULL,
  ...
)

label_dollar(
  accuracy = NULL,
  scale = 1,
  prefix = "$",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  largest_with_cents = 1e+05,
  negative_parens = deprecated(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dollar_format_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_prefix">prefix</code>, <code id="dollar_format_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_largest_with_cents">largest_with_cents</code></td>
<td>
<p>Like <code>largest_with_fractional()</code> in
<code><a href="scales.html#topic+label_currency">label_currency()</a></code></p>
</td></tr>
<tr><td><code id="dollar_format_+3A_negative_parens">negative_parens</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Use
<code>style_negative = "parens"</code> instead.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
<tr><td><code id="dollar_format_+3A_x">x</code></td>
<td>
<p>A numeric vector</p>
</td></tr>
</table>

<hr>
<h2 id='dscale'>Discrete scale</h2><span id='topic+dscale'></span>

<h3>Description</h3>

<p>Discrete scale
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dscale(x, palette, na.value = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dscale_+3A_x">x</code></td>
<td>
<p>vector of discrete values to scale</p>
</td></tr>
<tr><td><code id="dscale_+3A_palette">palette</code></td>
<td>
<p>aesthetic palette to use</p>
</td></tr>
<tr><td><code id="dscale_+3A_na.value">na.value</code></td>
<td>
<p>aesthetic to use for missing values</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>with(mtcars, plot(disp, mpg,
  pch = 20, cex = 3,
  col = dscale(factor(cyl), pal_brewer())
))
</code></pre>

<hr>
<h2 id='expand_range'>Expand a range with a multiplicative or additive constant</h2><span id='topic+expand_range'></span>

<h3>Description</h3>

<p>Expand a range with a multiplicative or additive constant
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_range(range, mul = 0, add = 0, zero_width = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_range_+3A_range">range</code></td>
<td>
<p>range of data, numeric vector of length 2</p>
</td></tr>
<tr><td><code id="expand_range_+3A_mul">mul</code></td>
<td>
<p>multiplicative constant</p>
</td></tr>
<tr><td><code id="expand_range_+3A_add">add</code></td>
<td>
<p>additive constant</p>
</td></tr>
<tr><td><code id="expand_range_+3A_zero_width">zero_width</code></td>
<td>
<p>distance to use if range has zero width</p>
</td></tr>
</table>

<hr>
<h2 id='format_format'>Label using <code>format()</code></h2><span id='topic+format_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>This function is kept for backward compatiblity; you should either use
<code><a href="scales.html#topic+label_number">label_number()</a></code> or <code><a href="scales.html#topic+label_date">label_date()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_format(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_format_+3A_...">...</code></td>
<td>
<p>Arguments passed on to <code><a href="base.html#topic+format">format()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='fullseq'>Generate sequence of fixed size intervals covering range.</h2><span id='topic+fullseq'></span>

<h3>Description</h3>

<p>Generate sequence of fixed size intervals covering range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fullseq(range, size, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fullseq_+3A_range">range</code></td>
<td>
<p>range</p>
</td></tr>
<tr><td><code id="fullseq_+3A_size">size</code></td>
<td>
<p>interval size</p>
</td></tr>
<tr><td><code id="fullseq_+3A_...">...</code></td>
<td>
<p>other arguments passed on to methods</p>
</td></tr>
</table>

<hr>
<h2 id='label_bytes'>Label bytes (1 kB, 2 MB, etc)</h2><span id='topic+label_bytes'></span>

<h3>Description</h3>

<p>Scale bytes into human friendly units. Can use either SI units (e.g.
kB = 1000 bytes) or binary units (e.g. kiB = 1024 bytes). See
<a href="https://en.wikipedia.org/wiki/Units_of_information">Units of Information</a>
on Wikipedia for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_bytes(units = "auto_si", accuracy = 1, scale = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_bytes_+3A_units">units</code></td>
<td>
<p>Unit to use. Should either one of:
</p>

<ul>
<li><p> &quot;kB&quot;, &quot;MB&quot;, &quot;GB&quot;, &quot;TB&quot;, &quot;PB&quot;, &quot;EB&quot;, &quot;ZB&quot;, and &quot;YB&quot; for
SI units (base 1000).
</p>
</li>
<li><p> &quot;kiB&quot;, &quot;MiB&quot;, &quot;GiB&quot;, &quot;TiB&quot;, &quot;PiB&quot;, &quot;EiB&quot;, &quot;ZiB&quot;, and &quot;YiB&quot; for
binary units (base 1024).
</p>
</li>
<li> <p><code>auto_si</code> or <code>auto_binary</code> to automatically pick the most appropriate
unit for each value.
</p>
</li></ul>
</td></tr>
<tr><td><code id="label_bytes_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="label_bytes_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="label_bytes_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+number">number</a></code>
</p>

<dl>
<dt><code>prefix</code></dt><dd><p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</dd>
<dt><code>suffix</code></dt><dd><p>Additional text to display after the number.</p>
</dd>
<dt><code>big.mark</code></dt><dd><p>Character used between every 3 digits to separate thousands.</p>
</dd>
<dt><code>decimal.mark</code></dt><dd><p>The character to be used to indicate the numeric
decimal point.</p>
</dd>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>scale_cut</code></dt><dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</dd>
<dt><code>trim</code></dt><dd><p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A labeller function that takes a numeric vector of breaks and
returns a character vector of labels.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>
<p>Other labels for log scales: 
<code><a href="scales.html#topic+label_log">label_log</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(1, 1e6))
demo_continuous(c(1, 1e6), labels = label_bytes())

# Auto units are particularly nice on log scales
demo_log10(c(1, 1e7), labels = label_bytes())

# You can also set the units
demo_continuous(c(1, 1e6), labels = label_bytes("kB"))

# You can also use binary units where a megabyte is defined as
# (1024) ^ 2 bytes rather than (1000) ^ 2. You'll need to override
# the default breaks to make this more informative.
demo_continuous(c(1, 1024^2),
  breaks = breaks_width(250 * 1024),
  labels = label_bytes("auto_binary")
)
</code></pre>

<hr>
<h2 id='label_currency'>Label currencies ($100, â‚¬2.50, etc)</h2><span id='topic+label_currency'></span>

<h3>Description</h3>

<p>Format numbers as currency, rounding values to monetary or fractional
monetary using unit a convenient heuristic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_currency(
  accuracy = NULL,
  scale = 1,
  prefix = "$",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  largest_with_fractional = 1e+05,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_currency_+3A_accuracy">accuracy</code>, <code id="label_currency_+3A_largest_with_fractional">largest_with_fractional</code></td>
<td>
<p>Number to round
to. If <code>NULL</code>, the default, values will be rounded to the nearest integer,
unless any of the values has non-zero fractional component (e.g. cents) and
the largest value is less than <code>largest_with_fractional</code> which by default
is 100,000.</p>
</td></tr>
<tr><td><code id="label_currency_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="label_currency_+3A_prefix">prefix</code>, <code id="label_currency_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="label_currency_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="label_currency_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="label_currency_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="label_currency_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+number">number</a></code>
</p>

<dl>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>scale_cut</code></dt><dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(0, 1), labels = label_currency())
demo_continuous(c(1, 100), labels = label_currency())

# Customise currency display with prefix and suffix
demo_continuous(c(1, 100), labels = label_currency(prefix = "USD "))
yen &lt;- label_currency(
  prefix = "Â¥",
  suffix = "",
  big.mark = ".",
  decimal.mark = ","
)
demo_continuous(c(1000, 1100), labels = yen)

# Use style_negative = "parens" for finance style display
demo_continuous(c(-100, 100), labels = label_currency(style_negative = "parens"))

# Use scale_cut to use K/M/B where appropriate
demo_log10(c(1, 1e16),
  breaks = log_breaks(7, 1e3),
  labels = label_currency(scale_cut = cut_short_scale())
)
# cut_short_scale() uses B = one thousand million
# cut_long_scale() uses B = one million million
demo_log10(c(1, 1e16),
  breaks = log_breaks(7, 1e3),
  labels = label_currency(scale_cut = cut_long_scale())
)

# You can also define your own breaks
gbp &lt;- label_currency(
  prefix = "\u00a3",
  scale_cut = c(0, k = 1e3, m = 1e6, bn = 1e9, tn = 1e12)
)
demo_log10(c(1, 1e12), breaks = log_breaks(5, 1e3), labels = gbp)
</code></pre>

<hr>
<h2 id='label_date'>Label date/times</h2><span id='topic+label_date'></span><span id='topic+label_date_short'></span><span id='topic+label_time'></span><span id='topic+label_timespan'></span>

<h3>Description</h3>

<p><code>label_date()</code> and <code>label_time()</code> label date/times using date/time format
strings. <code>label_date_short()</code> automatically constructs a short format string
sufficient to uniquely identify labels. It's inspired by matplotlib's
<a href="https://matplotlib.org/stable/api/dates_api.html#matplotlib.dates.ConciseDateFormatter"><code>ConciseDateFormatter</code></a>,
but uses a slightly different approach: <code>ConciseDateFormatter</code> formats
&quot;firsts&quot; (e.g. first day of month, first day of day) specially;
<code>date_short()</code> formats changes (e.g. new month, new year) specially.
<code>label_timespan()</code> is intended to show time passed and adds common time units
suffix to the input (ns, us, ms, s, m, h, d, w).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_date(format = "%Y-%m-%d", tz = "UTC", locale = NULL)

label_date_short(format = c("%Y", "%b", "%d", "%H:%M"), sep = "\n")

label_time(format = "%H:%M:%S", tz = "UTC", locale = NULL)

label_timespan(
  unit = c("secs", "mins", "hours", "days", "weeks"),
  space = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_date_+3A_format">format</code></td>
<td>
<p>For <code>date_format()</code> and <code>time_format()</code> a date/time format
string using standard POSIX specification.  See <code><a href="base.html#topic+strptime">strptime()</a></code> for details.
</p>
<p>For <code>date_short()</code> a character vector of length 4 giving the format
components to use for year, month, day, and hour respectively.</p>
</td></tr>
<tr><td><code id="label_date_+3A_tz">tz</code></td>
<td>
<p>a time zone name, see <code><a href="base.html#topic+timezones">timezones()</a></code>. Defaults
to UTC</p>
</td></tr>
<tr><td><code id="label_date_+3A_locale">locale</code></td>
<td>
<p>Locale to use when for day and month names. The default
uses the current locale. Setting this argument requires stringi, and you
can see a complete list of supported locales with
<code><a href="stringi.html#topic+stri_locale_list">stringi::stri_locale_list()</a></code>.</p>
</td></tr>
<tr><td><code id="label_date_+3A_sep">sep</code></td>
<td>
<p>Separator to use when combining date formats into a single string.</p>
</td></tr>
<tr><td><code id="label_date_+3A_unit">unit</code></td>
<td>
<p>The unit used to interpret numeric input</p>
</td></tr>
<tr><td><code id="label_date_+3A_space">space</code></td>
<td>
<p>Add a space before the time unit?</p>
</td></tr>
<tr><td><code id="label_date_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+number">number</a></code>
</p>

<dl>
<dt><code>accuracy</code></dt><dd><p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</dd>
<dt><code>scale</code></dt><dd><p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</dd>
<dt><code>prefix</code></dt><dd><p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</dd>
<dt><code>suffix</code></dt><dd><p>Additional text to display after the number.</p>
</dd>
<dt><code>big.mark</code></dt><dd><p>Character used between every 3 digits to separate thousands.</p>
</dd>
<dt><code>decimal.mark</code></dt><dd><p>The character to be used to indicate the numeric
decimal point.</p>
</dd>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>trim</code></dt><dd><p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>date_range &lt;- function(start, days) {
  start &lt;- as.POSIXct(start)
  c(start, start + days * 24 * 60 * 60)
}

two_months &lt;- date_range("2020-05-01", 60)
demo_datetime(two_months)
demo_datetime(two_months, labels = date_format("%m/%d"))
demo_datetime(two_months, labels = date_format("%e %b", locale = "fr"))
demo_datetime(two_months, labels = date_format("%e %B", locale = "es"))
# ggplot2 provides a short-hand:
demo_datetime(two_months, date_labels = "%m/%d")

# An alternative labelling system is label_date_short()
demo_datetime(two_months, date_breaks = "7 days", labels = label_date_short())
# This is particularly effective for dense labels
one_year &lt;- date_range("2020-05-01", 365)
demo_datetime(one_year, date_breaks = "month")
demo_datetime(one_year, date_breaks = "month", labels = label_date_short())
</code></pre>

<hr>
<h2 id='label_log'>Label numbers in log format (10^3, 10^6, etc)</h2><span id='topic+label_log'></span>

<h3>Description</h3>

<p><code>label_log()</code> displays numbers as base^exponent, using superscript formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_log(base = 10, digits = 3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_log_+3A_base">base</code></td>
<td>
<p>Base of logarithm to use</p>
</td></tr>
<tr><td><code id="label_log_+3A_digits">digits</code></td>
<td>
<p>Number of significant digits to show for the exponent. Argument
is passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+breaks_log">breaks_log()</a></code> for the related breaks algorithm.
</p>
<p>Other labels for log scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_log10(c(1, 1e5), labels = label_log())
demo_log10(c(1, 1e5), breaks = breaks_log(base = 2), labels = label_log(base = 2))
</code></pre>

<hr>
<h2 id='label_number'>Label numbers in decimal format (e.g. 0.12, 1,234)</h2><span id='topic+label_number'></span><span id='topic+label_comma'></span>

<h3>Description</h3>

<p>Use <code>label_number()</code> force decimal display of numbers (i.e. don't use
<a href="scales.html#topic+label_scientific">scientific</a> notation). <code>label_comma()</code> is a special case
that inserts a comma every three digits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_number(
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = " ",
  decimal.mark = ".",
  style_positive = c("none", "plus", "space"),
  style_negative = c("hyphen", "minus", "parens"),
  scale_cut = NULL,
  trim = TRUE,
  ...
)

label_comma(
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = ",",
  decimal.mark = ".",
  trim = TRUE,
  digits,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_number_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="label_number_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="label_number_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="label_number_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="label_number_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="label_number_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="label_number_+3A_style_positive">style_positive</code></td>
<td>
<p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</td></tr>
<tr><td><code id="label_number_+3A_style_negative">style_negative</code></td>
<td>
<p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="label_number_+3A_scale_cut">scale_cut</code></td>
<td>
<p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</td></tr>
<tr><td><code id="label_number_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="label_number_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
<tr><td><code id="label_number_+3A_digits">digits</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Use <code>accuracy</code> instead.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
demo_continuous(c(-1e6, 1e6))
demo_continuous(c(-1e6, 1e6), labels = label_number())
demo_continuous(c(-1e6, 1e6), labels = label_comma())

# Use scale to rescale very small or large numbers to generate
# more readable labels
demo_continuous(c(0, 1e6), labels = label_number())
demo_continuous(c(0, 1e6), labels = label_number(scale = 1 / 1e3))
demo_continuous(c(0, 1e-6), labels = label_number())
demo_continuous(c(0, 1e-6), labels = label_number(scale = 1e6))

#' Use scale_cut to automatically add prefixes for large/small numbers
demo_log10(
  c(1, 1e9),
  breaks = log_breaks(10),
  labels = label_number(scale_cut = cut_short_scale())
)
demo_log10(
  c(1, 1e9),
  breaks = log_breaks(10),
  labels = label_number(scale_cut = cut_si("m"))
)
demo_log10(
  c(1e-9, 1),
  breaks = log_breaks(10),
  labels = label_number(scale_cut = cut_si("g"))
)
# use scale and scale_cut when data already uses SI prefix
# for example, if data was stored in kg
demo_log10(
  c(1e-9, 1),
  breaks = log_breaks(10),
  labels = label_number(scale_cut = cut_si("g"), scale = 1e3)
)

#' # Use style arguments to vary the appearance of positive and negative numbers
demo_continuous(c(-1e3, 1e3), labels = label_number(
  style_positive = "plus",
  style_negative = "minus"
))
demo_continuous(c(-1e3, 1e3), labels = label_number(style_negative = "parens"))

# You can use prefix and suffix for other types of display
demo_continuous(c(32, 212), labels = label_number(suffix = "\u00b0F"))
demo_continuous(c(0, 100), labels = label_number(suffix = "\u00b0C"))

</code></pre>

<hr>
<h2 id='label_number_auto'>Label numbers, avoiding scientific notation where possible</h2><span id='topic+label_number_auto'></span>

<h3>Description</h3>

<p>Switches between <code><a href="scales.html#topic+number_format">number_format()</a></code> and <code><a href="scales.html#topic+scientific_format">scientific_format()</a></code> based on a set of
heuristics designed to automatically generate useful labels across a wide
range of inputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_number_auto()
</code></pre>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Very small and very large numbers get scientific notation
demo_continuous(c(0, 1e-6), labels = label_number_auto())
demo_continuous(c(0, 1e9), labels = label_number_auto())

# Other ranges get the numbers printed in full
demo_continuous(c(0, 1e-3), labels = label_number_auto())
demo_continuous(c(0, 1), labels = label_number_auto())
demo_continuous(c(0, 1e3), labels = label_number_auto())
demo_continuous(c(0, 1e6), labels = label_number_auto())

# Transformation is applied individually so you get as little
# scientific notation as possible
demo_log10(c(1, 1e7), labels = label_number_auto())
</code></pre>

<hr>
<h2 id='label_number_si'>Label numbers with SI prefixes (2 kg, 5 mm, etc)</h2><span id='topic+label_number_si'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p><code>label_number_si()</code> is deprecated because the previous unit didn't actually
use SI units, but instead used the so called &quot;short scale&quot;. You can now get the
same results as before with
<code>label_number(scale_cut = cut_short_scale())</code>, or if you want correct SI
units, <code>label_number(scale_cut = cut_si("unit"))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_number_si(unit = "", accuracy = NULL, scale = 1, suffix = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_number_si_+3A_unit">unit</code></td>
<td>
<p>Unit of measurement (e.g. <code>"m"</code> for meter, the SI unit of length).</p>
</td></tr>
<tr><td><code id="label_number_si_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="label_number_si_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is already using an SI
prefix.</p>
</td></tr>
<tr><td><code id="label_number_si_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="label_number_si_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+label_number">label_number</a></code>
</p>

<dl>
<dt><code>prefix</code></dt><dd><p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</dd>
<dt><code>big.mark</code></dt><dd><p>Character used between every 3 digits to separate thousands.</p>
</dd>
<dt><code>decimal.mark</code></dt><dd><p>The character to be used to indicate the numeric
decimal point.</p>
</dd>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>scale_cut</code></dt><dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</dd>
<dt><code>trim</code></dt><dd><p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>
<p>Other labels for log scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_log">label_log</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>

<hr>
<h2 id='label_ordinal'>Label ordinal numbers (1st, 2nd, 3rd, etc)</h2><span id='topic+label_ordinal'></span><span id='topic+ordinal_english'></span><span id='topic+ordinal_french'></span><span id='topic+ordinal_spanish'></span>

<h3>Description</h3>

<p>Round values to integers and then display as ordinal values (e.g. 1st, 2nd,
3rd). Built-in rules are provided for English, French, and Spanish.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_ordinal(
  prefix = "",
  suffix = "",
  big.mark = " ",
  rules = ordinal_english(),
  ...
)

ordinal_english()

ordinal_french(gender = c("masculin", "feminin"), plural = FALSE)

ordinal_spanish()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_ordinal_+3A_prefix">prefix</code>, <code id="label_ordinal_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="label_ordinal_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="label_ordinal_+3A_rules">rules</code></td>
<td>
<p>Named list of regular expressions, matched in order.
Name gives suffix, and value specifies which numbers to match.</p>
</td></tr>
<tr><td><code id="label_ordinal_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+number">number</a></code>
</p>

<dl>
<dt><code>accuracy</code></dt><dd><p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</dd>
<dt><code>scale</code></dt><dd><p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</dd>
<dt><code>decimal.mark</code></dt><dd><p>The character to be used to indicate the numeric
decimal point.</p>
</dd>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>scale_cut</code></dt><dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</dd>
<dt><code>trim</code></dt><dd><p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="label_ordinal_+3A_gender">gender</code></td>
<td>
<p>Masculin or feminin gender for French ordinal.</p>
</td></tr>
<tr><td><code id="label_ordinal_+3A_plural">plural</code></td>
<td>
<p>Plural or singular for French ordinal.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(1, 5))
demo_continuous(c(1, 5), labels = label_ordinal())
demo_continuous(c(1, 5), labels = label_ordinal(rules = ordinal_french()))

# The rules are just a set of regular expressions that are applied in turn
ordinal_french()
ordinal_english()

# Note that ordinal rounds values, so you may need to adjust the breaks too
demo_continuous(c(1, 10))
demo_continuous(c(1, 10), labels = label_ordinal())
demo_continuous(c(1, 10),
  labels = label_ordinal(),
  breaks = breaks_width(2)
)
</code></pre>

<hr>
<h2 id='label_parse'>Label with mathematical annotations</h2><span id='topic+label_parse'></span><span id='topic+label_math'></span>

<h3>Description</h3>

<p><code>label_parse()</code> produces expression from strings by parsing them;
<code>label_math()</code> constructs expressions by replacing the pronoun <code>.x</code>
with each string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_parse()

label_math(expr = 10^.x, format = force)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_parse_+3A_expr">expr</code></td>
<td>
<p>expression to use</p>
</td></tr>
<tr><td><code id="label_parse_+3A_format">format</code></td>
<td>
<p>another format function to apply prior to mathematical
transformation - this makes it easier to use floating point numbers in
mathematical expressions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p><a href="grDevices.html#topic+plotmath">plotmath</a> for the details of mathematical formatting in R.
</p>
<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>
<p>Other labels for discrete scales: 
<code><a href="scales.html#topic+label_wrap">label_wrap</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use label_parse() with discrete scales
greek &lt;- c("alpha", "beta", "gamma")
demo_discrete(greek)
demo_discrete(greek, labels = label_parse())

# Use label_math() with continuous scales
demo_continuous(c(1, 5))
demo_continuous(c(1, 5), labels = label_math(alpha[.x]))
demo_continuous(c(1, 5), labels = label_math())
</code></pre>

<hr>
<h2 id='label_percent'>Label percentages (2.5%, 50%, etc)</h2><span id='topic+label_percent'></span>

<h3>Description</h3>

<p>Label percentages (2.5%, 50%, etc)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_percent(
  accuracy = NULL,
  scale = 100,
  prefix = "",
  suffix = "%",
  big.mark = " ",
  decimal.mark = ".",
  trim = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_percent_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="label_percent_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="label_percent_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="scales.html#topic+label_number">label_number</a></code>
</p>

<dl>
<dt><code>style_positive</code></dt><dd><p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</dd>
<dt><code>style_negative</code></dt><dd><p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</dd>
<dt><code>scale_cut</code></dt><dd><p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(0, 1))
demo_continuous(c(0, 1), labels = label_percent())

# Use prefix and suffix to create your own variants
french_percent &lt;- label_percent(
  decimal.mark = ",",
  suffix = " %"
)
demo_continuous(c(0, .01), labels = french_percent)
</code></pre>

<hr>
<h2 id='label_pvalue'>Label p-values (e.g. &lt;0.001, 0.25, p &gt;= 0.99)</h2><span id='topic+label_pvalue'></span>

<h3>Description</h3>

<p>Formatter for p-values, using &quot;&lt;&quot; and &quot;&gt;&quot; for p-values close to 0 and 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_pvalue(
  accuracy = 0.001,
  decimal.mark = ".",
  prefix = NULL,
  add_p = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_pvalue_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="label_pvalue_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="label_pvalue_+3A_prefix">prefix</code></td>
<td>
<p>A character vector of length 3 giving the prefixes to
put in front of numbers. The default values are <code>c("&lt;", "", "&gt;")</code>
if <code>add_p</code> is <code>TRUE</code> and <code>c("p&lt;", "p=", "p&gt;")</code> if <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="label_pvalue_+3A_add_p">add_p</code></td>
<td>
<p>Add &quot;p=&quot; before the value?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_scientific">label_scientific</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(0, 1))
demo_continuous(c(0, 1), labels = label_pvalue())
demo_continuous(c(0, 1), labels = label_pvalue(accuracy = 0.1))
demo_continuous(c(0, 1), labels = label_pvalue(add_p = TRUE))

# Or provide your own prefixes
prefix &lt;- c("p &lt; ", "p = ", "p &gt; ")
demo_continuous(c(0, 1), labels = label_pvalue(prefix = prefix))
</code></pre>

<hr>
<h2 id='label_scientific'>Label numbers with scientific notation (e.g. 1e05, 1.5e-02)</h2><span id='topic+label_scientific'></span>

<h3>Description</h3>

<p>Label numbers with scientific notation (e.g. 1e05, 1.5e-02)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_scientific(
  digits = 3,
  scale = 1,
  prefix = "",
  suffix = "",
  decimal.mark = ".",
  trim = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_scientific_+3A_digits">digits</code></td>
<td>
<p>Number of digits to show before exponent.</p>
</td></tr>
<tr><td><code id="label_scientific_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="label_scientific_+3A_prefix">prefix</code>, <code id="label_scientific_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="label_scientific_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="label_scientific_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="label_scientific_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for continuous scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_currency">label_currency</a>()</code>,
<code><a href="scales.html#topic+label_number_auto">label_number_auto</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>,
<code><a href="scales.html#topic+label_ordinal">label_ordinal</a>()</code>,
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>,
<code><a href="scales.html#topic+label_percent">label_percent</a>()</code>,
<code><a href="scales.html#topic+label_pvalue">label_pvalue</a>()</code>
</p>
<p>Other labels for log scales: 
<code><a href="scales.html#topic+label_bytes">label_bytes</a>()</code>,
<code><a href="scales.html#topic+label_log">label_log</a>()</code>,
<code><a href="scales.html#topic+label_number_si">label_number_si</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(c(1, 10))
demo_continuous(c(1, 10), labels = label_scientific())
demo_continuous(c(1, 10), labels = label_scientific(digits = 3))

demo_log10(c(1, 1e9))
</code></pre>

<hr>
<h2 id='label_wrap'>Label strings by wrapping across multiple lines</h2><span id='topic+label_wrap'></span>

<h3>Description</h3>

<p>Uses <code><a href="base.html#topic+strwrap">strwrap()</a></code> to split long labels across multiple lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_wrap(width)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_wrap_+3A_width">width</code></td>
<td>
<p>Number of characters per line.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>All <code>label_()</code> functions return a &quot;labelling&quot; function, i.e. a function that
takes a vector <code>x</code> and returns a character vector of <code>length(x)</code> giving a
label for each input value.
</p>
<p>Labelling functions are designed to be used with the <code>labels</code> argument of
ggplot2 scales. The examples demonstrate their use with x scales, but
they work similarly for all scales, including those that generate legends
rather than axes.
</p>


<h3>See Also</h3>

<p>Other labels for discrete scales: 
<code><a href="scales.html#topic+label_parse">label_parse</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c(
  "this is a long label",
  "this is another long label",
  "this a label this is even longer"
)
demo_discrete(x)
demo_discrete(x, labels = label_wrap(10))
demo_discrete(x, labels = label_wrap(20))
</code></pre>

<hr>
<h2 id='minor_breaks_width'>Minor breaks</h2><span id='topic+minor_breaks_width'></span><span id='topic+minor_breaks_n'></span>

<h3>Description</h3>

<p>Generate minor breaks between major breaks either spaced with a fixed width,
or having a fixed number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>minor_breaks_width(width, offset)

minor_breaks_n(n)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="minor_breaks_width_+3A_width">width</code></td>
<td>
<p>Distance between each break. Either a number, or for
date/times, a single string of the form <code>"{n} {unit}"</code>, e.g. &quot;1 month&quot;,
&quot;5 days&quot;. Unit can be of one &quot;sec&quot;, &quot;min&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;,
&quot;month&quot;, &quot;year&quot;.</p>
</td></tr>
<tr><td><code id="minor_breaks_width_+3A_offset">offset</code></td>
<td>
<p>Use if you don't want breaks to start at zero, or on a
conventional date or time boundary such as the 1st of January or midnight.
Either a number, or for date/times, a single string of the form
<code>"{n} {unit}"</code>, as for <code>width</code>.
</p>
<p><code>offset</code> can be a vector, which will accumulate in the order given. This
is mostly useful for dates, where e.g. <code>c("3 months", "5 days")</code> will
offset by three months and five days, which is useful for the UK tax year.
Note that due to way that dates are rounded, there's no guarantee that
<code>offset = c(x, y)</code> will give the same result as <code>offset = c(y, x)</code>.</p>
</td></tr>
<tr><td><code id="minor_breaks_width_+3A_n">n</code></td>
<td>
<p>number of breaks</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>demo_log10(c(1, 1e6))
if (FALSE) {
  # Requires https://github.com/tidyverse/ggplot2/pull/3591
  demo_log10(c(1, 1e6), minor_breaks = minor_breaks_n(10))
}
</code></pre>

<hr>
<h2 id='muted'>Mute standard colour</h2><span id='topic+muted'></span>

<h3>Description</h3>

<p>Mute standard colour
</p>


<h3>Usage</h3>

<pre><code class='language-R'>muted(colour, l = 30, c = 70)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="muted_+3A_colour">colour</code></td>
<td>
<p>character vector of colours to modify</p>
</td></tr>
<tr><td><code id="muted_+3A_l">l</code></td>
<td>
<p>new luminance</p>
</td></tr>
<tr><td><code id="muted_+3A_c">c</code></td>
<td>
<p>new chroma</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>muted("red")
muted("blue")
show_col(c("red", "blue", muted("red"), muted("blue")))
</code></pre>

<hr>
<h2 id='new_transform'>Create a new transformation object</h2><span id='topic+new_transform'></span><span id='topic+trans'></span><span id='topic+trans_new'></span><span id='topic+is.transform'></span><span id='topic+is.trans'></span><span id='topic+as.transform'></span><span id='topic+as.trans'></span>

<h3>Description</h3>

<p>A transformation encapsulates a transformation and its inverse, as well
as the information needed to create pleasing breaks and labels. The <code>breaks()</code>
function is applied on the un-transformed range of the data, and the
<code>format()</code> function takes the output of the <code>breaks()</code> function and returns
well-formatted labels. Transformations may also include the derivatives of the
transformation and its inverse, but are not required to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_transform(
  name,
  transform,
  inverse,
  d_transform = NULL,
  d_inverse = NULL,
  breaks = extended_breaks(),
  minor_breaks = regular_minor_breaks(),
  format = format_format(),
  domain = c(-Inf, Inf)
)

trans_new(
  name,
  transform,
  inverse,
  d_transform = NULL,
  d_inverse = NULL,
  breaks = extended_breaks(),
  minor_breaks = regular_minor_breaks(),
  format = format_format(),
  domain = c(-Inf, Inf)
)

is.transform(x)

is.trans(x)

as.transform(x, arg = deparse(substitute(x)))

as.trans(x, arg = deparse(substitute(x)))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_transform_+3A_name">name</code></td>
<td>
<p>transformation name</p>
</td></tr>
<tr><td><code id="new_transform_+3A_transform">transform</code></td>
<td>
<p>function, or name of function, that performs the
transformation</p>
</td></tr>
<tr><td><code id="new_transform_+3A_inverse">inverse</code></td>
<td>
<p>function, or name of function, that performs the
inverse of the transformation</p>
</td></tr>
<tr><td><code id="new_transform_+3A_d_transform">d_transform</code></td>
<td>
<p>Optional function, or name of function, that gives the
derivative of the transformation. May be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="new_transform_+3A_d_inverse">d_inverse</code></td>
<td>
<p>Optional function, or name of function, that gives the
derivative of the inverse of the transformation. May be <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="new_transform_+3A_breaks">breaks</code></td>
<td>
<p>default breaks function for this transformation. The breaks
function is applied to the un-transformed data.</p>
</td></tr>
<tr><td><code id="new_transform_+3A_minor_breaks">minor_breaks</code></td>
<td>
<p>default minor breaks function for this transformation.</p>
</td></tr>
<tr><td><code id="new_transform_+3A_format">format</code></td>
<td>
<p>default format for this transformation. The format is applied
to breaks generated on the un-transformed data.</p>
</td></tr>
<tr><td><code id="new_transform_+3A_domain">domain</code></td>
<td>
<p>the allowed range of the data to be transformed. The function
in the <code>transform</code> argument is expected to be able to transform the <code>domain</code>
argument.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+transform_asinh">transform_asinh</a></code>, <code><a href="scales.html#topic+transform_asn">transform_asn</a></code>, <code><a href="scales.html#topic+transform_atanh">transform_atanh</a></code>, <code><a href="scales.html#topic+transform_boxcox">transform_boxcox</a></code>, <code><a href="scales.html#topic+transform_compose">transform_compose</a></code>, <code><a href="scales.html#topic+transform_date">transform_date</a></code>, <code><a href="scales.html#topic+transform_exp">transform_exp</a></code>, <code><a href="scales.html#topic+transform_hms">transform_hms</a></code>, <code><a href="scales.html#topic+transform_identity">transform_identity</a></code>, <code><a href="scales.html#topic+transform_log">transform_log</a></code>, <code><a href="scales.html#topic+transform_log10">transform_log10</a></code>, <code><a href="scales.html#topic+transform_log1p">transform_log1p</a></code>, <code><a href="scales.html#topic+transform_log2">transform_log2</a></code>, <code><a href="scales.html#topic+transform_logit">transform_logit</a></code>, <code><a href="scales.html#topic+transform_modulus">transform_modulus</a></code>, <code><a href="scales.html#topic+transform_probability">transform_probability</a></code>, <code><a href="scales.html#topic+transform_probit">transform_probit</a></code>, <code><a href="scales.html#topic+transform_pseudo_log">transform_pseudo_log</a></code>, <code><a href="scales.html#topic+transform_reciprocal">transform_reciprocal</a></code>, <code><a href="scales.html#topic+transform_reverse">transform_reverse</a></code>, <code><a href="scales.html#topic+transform_sqrt">transform_sqrt</a></code>, <code><a href="scales.html#topic+transform_time">transform_time</a></code>, <code><a href="scales.html#topic+transform_timespan">transform_timespan</a></code>, <code><a href="scales.html#topic+transform_yj">transform_yj</a></code>
</p>

<hr>
<h2 id='number'>A low-level numeric formatter</h2><span id='topic+number'></span><span id='topic+cut_short_scale'></span><span id='topic+cut_long_scale'></span><span id='topic+cut_time_scale'></span><span id='topic+cut_si'></span>

<h3>Description</h3>

<p>This function is a low-level helper that powers many of the labelling
functions. You should generally not need to call it directly unless you
are creating your own labelling function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>number(
  x,
  accuracy = NULL,
  scale = 1,
  prefix = "",
  suffix = "",
  big.mark = " ",
  decimal.mark = ".",
  style_positive = c("none", "plus", "space"),
  style_negative = c("hyphen", "minus", "parens"),
  scale_cut = NULL,
  trim = TRUE,
  ...
)

cut_short_scale(space = FALSE)

cut_long_scale(space = FALSE)

cut_time_scale(space = FALSE)

cut_si(unit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="number_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="number_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="number_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="number_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="number_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="number_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="number_+3A_style_positive">style_positive</code></td>
<td>
<p>A string that determines the style of positive numbers:
</p>

<ul>
<li> <p><code>"none"</code> (the default): no change, e.g. <code>1</code>.
</p>
</li>
<li> <p><code>"plus"</code>: preceded by <code>+</code>, e.g. <code>+1</code>.
</p>
</li>
<li> <p><code>"space"</code>: preceded by a Unicode &quot;figure space&quot;, i.e., a space equally
as wide as a number or <code>+</code>. Compared to <code>"none"</code>, adding a figure space
can ensure numbers remain properly aligned when they are left- or
right-justified.
</p>
</li></ul>
</td></tr>
<tr><td><code id="number_+3A_style_negative">style_negative</code></td>
<td>
<p>A string that determines the style of negative numbers:
</p>

<ul>
<li> <p><code>"hyphen"</code> (the default): preceded by a standard hypen <code>-</code>, e.g. <code>-1</code>.
</p>
</li>
<li> <p><code>"minus"</code>, uses a proper Unicode minus symbol. This is a typographical
nicety that ensures <code>-</code> aligns with the horizontal bar of the
the horizontal bar of <code>+</code>.
</p>
</li>
<li> <p><code>"parens"</code>, wrapped in parentheses, e.g. <code>(1)</code>.
</p>
</li></ul>
</td></tr>
<tr><td><code id="number_+3A_scale_cut">scale_cut</code></td>
<td>
<p>Named numeric vector that allows you to rescale large
(or small) numbers and add a prefix. Built-in helpers include:
</p>

<ul>
<li> <p><code>cut_short_scale()</code>: [10^3, 10^6) = K, [10^6, 10^9) = M, [10^9, 10^12) = B, [10^12, Inf) = T.
</p>
</li>
<li> <p><code>cut_long_scale()</code>: [10^3, 10^6) = K, [10^6, 10^12) = M, [10^12, 10^18) = B, [10^18, Inf) = T.
</p>
</li>
<li> <p><code>cut_si(unit)</code>: uses standard SI units.
</p>
</li></ul>

<p>If you supply a vector <code>c(a = 100, b = 1000)</code>, absolute values in the
range <code style="white-space: pre;">&#8288;[0, 100)&#8288;</code> will not be rescaled, absolute values in the range <code style="white-space: pre;">&#8288;[100, 1000)&#8288;</code>
will be divided by 100 and given the suffix &quot;a&quot;, and absolute values in
the range <code style="white-space: pre;">&#8288;[1000, Inf)&#8288;</code> will be divided by 1000 and given the suffix &quot;b&quot;.
If the division creates an irrational value (or one with many digits), the
cut value below will be tried to see if it improves the look of the final
label.</p>
</td></tr>
<tr><td><code id="number_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="number_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
<tr><td><code id="number_+3A_space">space</code></td>
<td>
<p>Add a space before the scale suffix?</p>
</td></tr>
<tr><td><code id="number_+3A_unit">unit</code></td>
<td>
<p>SI unit abbreviation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of <code>length(x)</code>.
</p>

<hr>
<h2 id='number_bytes_format'>Older interface to <code>label_bytes()</code></h2><span id='topic+number_bytes_format'></span><span id='topic+number_bytes'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility, but you should switch
to <code><a href="scales.html#topic+label_bytes">label_bytes()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>number_bytes_format(symbol = "auto", units = "binary", ...)

number_bytes(x, symbol = "auto", units = c("binary", "si"), accuracy = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="number_bytes_format_+3A_symbol">symbol</code></td>
<td>
<p>byte symbol to use. If &quot;auto&quot; the symbol used will be
determined separately for each value of <code>x</code>. Valid symbols are &quot;B&quot;, &quot;kB&quot;,
&quot;MB&quot;, &quot;GB&quot;, &quot;TB&quot;, &quot;PB&quot;, &quot;EB&quot;, &quot;ZB&quot;, and &quot;YB&quot; for SI units, and the &quot;iB&quot;
variants for binary units.</p>
</td></tr>
<tr><td><code id="number_bytes_format_+3A_units">units</code></td>
<td>
<p>which unit base to use, &quot;binary&quot; (1024 base) or &quot;si&quot; (1000 base)</p>
</td></tr>
</table>

<hr>
<h2 id='oob'>Out of bounds handling</h2><span id='topic+oob'></span><span id='topic+oob_censor'></span><span id='topic+oob_censor_any'></span><span id='topic+oob_discard'></span><span id='topic+oob_squish'></span><span id='topic+oob_squish_any'></span><span id='topic+oob_squish_infinite'></span><span id='topic+oob_keep'></span><span id='topic+censor'></span><span id='topic+discard'></span><span id='topic+squish'></span><span id='topic+squish_infinite'></span>

<h3>Description</h3>

<p>This set of functions modify data values outside a given range.
The <code style="white-space: pre;">&#8288;oob_*()&#8288;</code> functions are designed to be passed as the <code>oob</code> argument of
ggplot2 continuous and binned scales, with <code>oob_discard</code> being an exception.
</p>
<p>These functions affect out of bounds values in the following ways:
</p>

<ul>
<li> <p><code>oob_censor()</code> replaces out of bounds values with <code>NA</code>s. This is the
default <code>oob</code> argument for continuous scales.
</p>
</li>
<li> <p><code>oob_censor_any()</code> acts like <code>oob_censor()</code>, but also replaces infinite
values with <code>NA</code>s.
</p>
</li>
<li> <p><code>oob_squish()</code> replaces out of bounds values with the nearest limit. This
is the default <code>oob</code> argument for binned scales.
</p>
</li>
<li> <p><code>oob_squish_any()</code> acts like <code>oob_squish()</code>, but also replaces infinite
values with the nearest limit.
</p>
</li>
<li> <p><code>oob_squish_infinite()</code> only replaces infinite values by the nearest limit.
</p>
</li>
<li> <p><code>oob_keep()</code> does not adjust out of bounds values. In position scales,
behaves as zooming limits without data removal.
</p>
</li>
<li> <p><code>oob_discard()</code> removes out of bounds values from the input. Not suitable
for ggplot2 scales.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>oob_censor(x, range = c(0, 1), only.finite = TRUE)

oob_censor_any(x, range = c(0, 1))

oob_discard(x, range = c(0, 1))

oob_squish(x, range = c(0, 1), only.finite = TRUE)

oob_squish_any(x, range = c(0, 1))

oob_squish_infinite(x, range = c(0, 1))

oob_keep(x, range = c(0, 1))

censor(x, range = c(0, 1), only.finite = TRUE)

discard(x, range = c(0, 1))

squish(x, range = c(0, 1), only.finite = TRUE)

squish_infinite(x, range = c(0, 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="oob_+3A_x">x</code></td>
<td>
<p>A numeric vector of values to modify.</p>
</td></tr>
<tr><td><code id="oob_+3A_range">range</code></td>
<td>
<p>A numeric vector of length two giving the minimum and maximum
limit of the desired output range respectively.</p>
</td></tr>
<tr><td><code id="oob_+3A_only.finite">only.finite</code></td>
<td>
<p>A logical of length one. When <code>TRUE</code>, only finite values
are altered. When <code>FALSE</code>, also infinite values are altered.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>oob_censor_any()</code> and <code>oob_squish_any()</code> functions are the same
as <code>oob_censor()</code> and <code>oob_squish()</code> with the <code>only.finite</code> argument set to
<code>FALSE</code>.
</p>
<p>Replacing position values with <code>NA</code>s, as <code>oob_censor()</code> does, will typically
lead to removal of those datapoints in ggplot.
</p>
<p>Setting ggplot coordinate limits is equivalent to using <code>oob_keep()</code> in
position scales.
</p>


<h3>Value</h3>

<p>Most <code>oob_()</code> functions return a vector of numerical values of the
same length as the <code>x</code> argument, wherein out of bounds values have been
modified. Only <code>oob_discard()</code> returns a vector of less than or of equal
length to the <code>x</code> argument.
</p>


<h3>Old interface</h3>

<p><code>censor()</code>, <code>squish()</code>, <code>squish_infinite()</code> and
<code>discard()</code> are no longer recommended; please use <code>oob_censor()</code>,
<code>oob_squish()</code>, <code>oob_squish_infinite()</code> and <code>oob_discard()</code> instead.
</p>


<h3>Author(s)</h3>

<p><code>oob_squish()</code>: Homer Strong <a href="mailto:homer.strong@gmail.com">homer.strong@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Censoring replaces out of bounds values with NAs
oob_censor(c(-Inf, -1, 0.5, 1, 2, NA, Inf))
oob_censor_any(c(-Inf, -1, 0.5, 1, 2, NA, Inf))

# Squishing replaces out of bounds values with the nearest range limit
oob_squish(c(-Inf, -1, 0.5, 1, 2, NA, Inf))
oob_squish_any(c(-Inf, -1, 0.5, 1, 2, NA, Inf))
oob_squish_infinite(c(-Inf, -1, 0.5, 1, 2, NA, Inf))

# Keeping does not alter values
oob_keep(c(-Inf, -1, 0.5, 1, 2, NA, Inf))

# Discarding will remove out of bounds values
oob_discard(c(-Inf, -1, 0.5, 1, 2, NA, Inf))
</code></pre>

<hr>
<h2 id='ordinal_format'>Superseded interface to <code>label_ordinal()</code></h2><span id='topic+ordinal_format'></span><span id='topic+ordinal'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_ordinal">label_ordinal()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordinal_format(
  prefix = "",
  suffix = "",
  big.mark = " ",
  rules = ordinal_english(),
  ...
)

ordinal(
  x,
  prefix = "",
  suffix = "",
  big.mark = " ",
  rules = ordinal_english(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ordinal_format_+3A_prefix">prefix</code>, <code id="ordinal_format_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="ordinal_format_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="ordinal_format_+3A_rules">rules</code></td>
<td>
<p>Named list of regular expressions, matched in order.
Name gives suffix, and value specifies which numbers to match.</p>
</td></tr>
<tr><td><code id="ordinal_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='pal_area'>Area palettes (continuous)</h2><span id='topic+pal_area'></span><span id='topic+area_pal'></span><span id='topic+abs_area'></span>

<h3>Description</h3>

<p>Area palettes (continuous)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_area(range = c(1, 6))

area_pal(range = c(1, 6))

abs_area(max)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_area_+3A_range">range</code></td>
<td>
<p>Numeric vector of length two, giving range of possible sizes.
Should be greater than 0.</p>
</td></tr>
<tr><td><code id="pal_area_+3A_max">max</code></td>
<td>
<p>A number representing the maximum size.</p>
</td></tr>
</table>

<hr>
<h2 id='pal_brewer'>Colour Brewer palette (discrete)</h2><span id='topic+pal_brewer'></span><span id='topic+brewer_pal'></span>

<h3>Description</h3>

<p>Colour Brewer palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_brewer(type = "seq", palette = 1, direction = 1)

brewer_pal(type = "seq", palette = 1, direction = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_brewer_+3A_type">type</code></td>
<td>
<p>One of &quot;seq&quot; (sequential), &quot;div&quot; (diverging) or &quot;qual&quot;
(qualitative)</p>
</td></tr>
<tr><td><code id="pal_brewer_+3A_palette">palette</code></td>
<td>
<p>If a string, will use that named palette. If a number, will
index into the list of palettes of appropriate <code>type</code></p>
</td></tr>
<tr><td><code id="pal_brewer_+3A_direction">direction</code></td>
<td>
<p>Sets the order of colours in the scale. If 1, the default,
colours are as output by <code><a href="RColorBrewer.html#topic+ColorBrewer">RColorBrewer::brewer.pal()</a></code>. If -1, the
order of colours is reversed.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://colorbrewer2.org">https://colorbrewer2.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_col(pal_brewer()(10))
show_col(pal_brewer("div")(5))
show_col(pal_brewer(palette = "Greens")(5))

# Can use with gradient_n to create a continuous gradient
cols &lt;- pal_brewer("div")(5)
show_col(pal_gradient_n(cols)(seq(0, 1, length.out = 30)))
</code></pre>

<hr>
<h2 id='pal_dichromat'>Dichromat (colour-blind) palette (discrete)</h2><span id='topic+pal_dichromat'></span><span id='topic+dichromat_pal'></span>

<h3>Description</h3>

<p>Dichromat (colour-blind) palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_dichromat(name)

dichromat_pal(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_dichromat_+3A_name">name</code></td>
<td>
<p>Name of colour palette.  One of:
<code>BrowntoBlue.10</code>, <code>BrowntoBlue.12</code>, <code>BluetoDarkOrange.12</code>, <code>BluetoDarkOrange.18</code>, <code>DarkRedtoBlue.12</code>, <code>DarkRedtoBlue.18</code>, <code>BluetoGreen.14</code>, <code>BluetoGray.8</code>, <code>BluetoOrangeRed.14</code>, <code>BluetoOrange.10</code>, <code>BluetoOrange.12</code>, <code>BluetoOrange.8</code>, <code>LightBluetoDarkBlue.10</code>, <code>LightBluetoDarkBlue.7</code>, <code>Categorical.12</code>, <code>GreentoMagenta.16</code>, <code>SteppedSequential.5</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace("dichromat", quietly = TRUE)) {
  show_col(pal_dichromat("BluetoOrange.10")(10))
  show_col(pal_dichromat("BluetoOrange.10")(5))

  # Can use with gradient_n to create a continous gradient
  cols &lt;- pal_dichromat("DarkRedtoBlue.12")(12)
  show_col(pal_gradient_n(cols)(seq(0, 1, length.out = 30)))
}
</code></pre>

<hr>
<h2 id='pal_div_gradient'>Diverging colour gradient (continuous).</h2><span id='topic+pal_div_gradient'></span><span id='topic+div_gradient_pal'></span>

<h3>Description</h3>

<p>Diverging colour gradient (continuous).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_div_gradient(
  low = mnsl("10B 4/6"),
  mid = mnsl("N 8/0"),
  high = mnsl("10R 4/6"),
  space = "Lab"
)

div_gradient_pal(
  low = mnsl("10B 4/6"),
  mid = mnsl("N 8/0"),
  high = mnsl("10R 4/6"),
  space = "Lab"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_div_gradient_+3A_low">low</code></td>
<td>
<p>colour for low end of gradient.</p>
</td></tr>
<tr><td><code id="pal_div_gradient_+3A_mid">mid</code></td>
<td>
<p>colour for mid point</p>
</td></tr>
<tr><td><code id="pal_div_gradient_+3A_high">high</code></td>
<td>
<p>colour for high end of gradient.</p>
</td></tr>
<tr><td><code id="pal_div_gradient_+3A_space">space</code></td>
<td>
<p>colour space in which to calculate gradient. Must be &quot;Lab&quot; -
other values are deprecated.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- seq(-1, 1, length.out = 100)
r &lt;- sqrt(outer(x^2, x^2, "+"))
image(r, col = pal_div_gradient()(seq(0, 1, length.out = 12)))
image(r, col = pal_div_gradient()(seq(0, 1, length.out = 30)))
image(r, col = pal_div_gradient()(seq(0, 1, length.out = 100)))

library(munsell)
pal &lt;- pal_div_gradient(low = mnsl(complement("10R 4/6"), fix = TRUE))
image(r, col = pal(seq(0, 1, length.out = 100)))
</code></pre>

<hr>
<h2 id='pal_gradient_n'>Arbitrary colour gradient palette (continuous)</h2><span id='topic+pal_gradient_n'></span><span id='topic+gradient_n_pal'></span>

<h3>Description</h3>

<p>Arbitrary colour gradient palette (continuous)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_gradient_n(colours, values = NULL, space = "Lab")

gradient_n_pal(colours, values = NULL, space = "Lab")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_gradient_n_+3A_colours">colours</code></td>
<td>
<p>vector of colours</p>
</td></tr>
<tr><td><code id="pal_gradient_n_+3A_values">values</code></td>
<td>
<p>if colours should not be evenly positioned along the gradient
this vector gives the position (between 0 and 1) for each colour in the
<code>colours</code> vector. See <code><a href="plotrix.html#topic+rescale">rescale()</a></code> for a convenience function
to map an arbitrary range to between 0 and 1.</p>
</td></tr>
<tr><td><code id="pal_gradient_n_+3A_space">space</code></td>
<td>
<p>colour space in which to calculate gradient. Must be &quot;Lab&quot; -
other values are deprecated.</p>
</td></tr>
</table>

<hr>
<h2 id='pal_grey'>Grey scale palette (discrete)</h2><span id='topic+pal_grey'></span><span id='topic+grey_pal'></span>

<h3>Description</h3>

<p>Grey scale palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_grey(start = 0.2, end = 0.8)

grey_pal(start = 0.2, end = 0.8)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_grey_+3A_start">start</code></td>
<td>
<p>grey value at low end of palette</p>
</td></tr>
<tr><td><code id="pal_grey_+3A_end">end</code></td>
<td>
<p>grey value at high end of palette</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+pal_seq_gradient">pal_seq_gradient()</a></code> for continuous version
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_col(pal_grey()(25))
show_col(pal_grey(0, 1)(25))
</code></pre>

<hr>
<h2 id='pal_hue'>Hue palette (discrete)</h2><span id='topic+pal_hue'></span><span id='topic+hue_pal'></span>

<h3>Description</h3>

<p>Hue palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_hue(h = c(0, 360) + 15, c = 100, l = 65, h.start = 0, direction = 1)

hue_pal(h = c(0, 360) + 15, c = 100, l = 65, h.start = 0, direction = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_hue_+3A_h">h</code></td>
<td>
<p>range of hues to use, in [0, 360]</p>
</td></tr>
<tr><td><code id="pal_hue_+3A_c">c</code></td>
<td>
<p>chroma (intensity of colour), maximum value varies depending on
combination of hue and luminance.</p>
</td></tr>
<tr><td><code id="pal_hue_+3A_l">l</code></td>
<td>
<p>luminance (lightness), in [0, 100]</p>
</td></tr>
<tr><td><code id="pal_hue_+3A_h.start">h.start</code></td>
<td>
<p>hue to start at</p>
</td></tr>
<tr><td><code id="pal_hue_+3A_direction">direction</code></td>
<td>
<p>direction to travel around the colour wheel,
1 = clockwise, -1 = counter-clockwise</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>show_col(pal_hue()(4))
show_col(pal_hue()(9))
show_col(pal_hue(l = 90)(9))
show_col(pal_hue(l = 30)(9))

show_col(pal_hue()(9))
show_col(pal_hue(direction = -1)(9))
show_col(pal_hue(h.start = 30)(9))
show_col(pal_hue(h.start = 90)(9))

show_col(pal_hue()(9))
show_col(pal_hue(h = c(0, 90))(9))
show_col(pal_hue(h = c(90, 180))(9))
show_col(pal_hue(h = c(180, 270))(9))
show_col(pal_hue(h = c(270, 360))(9))
</code></pre>

<hr>
<h2 id='pal_identity'>Identity palette</h2><span id='topic+pal_identity'></span><span id='topic+identity_pal'></span>

<h3>Description</h3>

<p>Leaves values unchanged - useful when the data is already scaled.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_identity()

identity_pal()
</code></pre>

<hr>
<h2 id='pal_linetype'>Line type palette (discrete)</h2><span id='topic+pal_linetype'></span><span id='topic+linetype_pal'></span>

<h3>Description</h3>

<p>Based on a set supplied by Richard Pearson, University of Manchester
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_linetype()

linetype_pal()
</code></pre>

<hr>
<h2 id='pal_manual'>Manual palette (discrete)</h2><span id='topic+pal_manual'></span><span id='topic+manual_pal'></span>

<h3>Description</h3>

<p>Manual palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_manual(values)

manual_pal(values)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_manual_+3A_values">values</code></td>
<td>
<p>vector of values to be used as a palette.</p>
</td></tr>
</table>

<hr>
<h2 id='pal_rescale'>Rescale palette (continuous)</h2><span id='topic+pal_rescale'></span><span id='topic+rescale_pal'></span>

<h3>Description</h3>

<p>Just rescales the input to the specific output range.  Useful for
alpha, size, and continuous position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_rescale(range = c(0.1, 1))

rescale_pal(range = c(0.1, 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_rescale_+3A_range">range</code></td>
<td>
<p>Numeric vector of length two, giving range of possible
values.  Should be between 0 and 1.</p>
</td></tr>
</table>

<hr>
<h2 id='pal_seq_gradient'>Sequential colour gradient palette (continuous)</h2><span id='topic+pal_seq_gradient'></span><span id='topic+seq_gradient_pal'></span>

<h3>Description</h3>

<p>Sequential colour gradient palette (continuous)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_seq_gradient(low = mnsl("10B 4/6"), high = mnsl("10R 4/6"), space = "Lab")

seq_gradient_pal(low = mnsl("10B 4/6"), high = mnsl("10R 4/6"), space = "Lab")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_seq_gradient_+3A_low">low</code></td>
<td>
<p>colour for low end of gradient.</p>
</td></tr>
<tr><td><code id="pal_seq_gradient_+3A_high">high</code></td>
<td>
<p>colour for high end of gradient.</p>
</td></tr>
<tr><td><code id="pal_seq_gradient_+3A_space">space</code></td>
<td>
<p>colour space in which to calculate gradient. Must be &quot;Lab&quot; -
other values are deprecated.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- seq(0, 1, length.out = 25)
show_col(pal_seq_gradient()(x))
show_col(pal_seq_gradient("white", "black")(x))

library(munsell)
show_col(pal_seq_gradient("white", mnsl("10R 4/6"))(x))
</code></pre>

<hr>
<h2 id='pal_shape'>Shape palette (discrete)</h2><span id='topic+pal_shape'></span><span id='topic+shape_pal'></span>

<h3>Description</h3>

<p>Shape palette (discrete)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_shape(solid = TRUE)

shape_pal(solid = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_shape_+3A_solid">solid</code></td>
<td>
<p>should shapes be solid or not?</p>
</td></tr>
</table>

<hr>
<h2 id='pal_viridis'>Viridis palette</h2><span id='topic+pal_viridis'></span><span id='topic+viridis_pal'></span>

<h3>Description</h3>

<p>Viridis palette
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pal_viridis(alpha = 1, begin = 0, end = 1, direction = 1, option = "D")

viridis_pal(alpha = 1, begin = 0, end = 1, direction = 1, option = "D")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pal_viridis_+3A_alpha">alpha</code></td>
<td>
<p>The alpha transparency, a number in [0,1], see argument alpha in
<code><a href="grDevices.html#topic+hsv">hsv</a></code>.</p>
</td></tr>
<tr><td><code id="pal_viridis_+3A_begin">begin</code>, <code id="pal_viridis_+3A_end">end</code></td>
<td>
<p>The (corrected) hue in <code style="white-space: pre;">&#8288;[0,1]&#8288;</code> at which the color map
begins and ends.</p>
</td></tr>
<tr><td><code id="pal_viridis_+3A_direction">direction</code></td>
<td>
<p>Sets the order of colors in the scale. If 1, the default,
colors are ordered from darkest to lightest. If -1, the order of colors is
reversed.</p>
</td></tr>
<tr><td><code id="pal_viridis_+3A_option">option</code></td>
<td>
<p>A character string indicating the color map option to use.
Eight options are available:
</p>

<ul>
<li> <p><code>"magma"</code> (or <code>"A"</code>)
</p>
</li>
<li> <p><code>"inferno"</code> (or <code>"B"</code>)
</p>
</li>
<li> <p><code>"plasma"</code> (or <code>"C"</code>)
</p>
</li>
<li> <p><code>"viridis"</code> (or <code>"D"</code>)
</p>
</li>
<li> <p><code>"cividis"</code> (or <code>"E"</code>)
</p>
</li>
<li> <p><code>"rocket"</code> (or <code>"F"</code>)
</p>
</li>
<li> <p><code>"mako"</code> (or <code>"G"</code>)
</p>
</li>
<li> <p><code>"turbo"</code> (or <code>"H"</code>)
</p>
</li></ul>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://bids.github.io/colormap/">https://bids.github.io/colormap/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_col(pal_viridis()(10))
show_col(pal_viridis(direction = -1)(6))
show_col(pal_viridis(begin = 0.2, end = 0.8)(4))
show_col(pal_viridis(option = "plasma")(6))
</code></pre>

<hr>
<h2 id='parse_format'>Superseded interface to <code>label_parse()</code>/<code>label_math()</code></h2><span id='topic+parse_format'></span><span id='topic+math_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_parse">label_parse()</a></code>/<code><a href="scales.html#topic+label_math">label_math()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_format()

math_format(expr = 10^.x, format = force)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_format_+3A_expr">expr</code></td>
<td>
<p>expression to use</p>
</td></tr>
<tr><td><code id="parse_format_+3A_format">format</code></td>
<td>
<p>another format function to apply prior to mathematical
transformation - this makes it easier to use floating point numbers in
mathematical expressions.</p>
</td></tr>
</table>

<hr>
<h2 id='percent_format'>Superseded interface to <code>label_percent()</code></h2><span id='topic+percent_format'></span><span id='topic+percent'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_percent">label_percent()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>percent_format(
  accuracy = NULL,
  scale = 100,
  prefix = "",
  suffix = "%",
  big.mark = " ",
  decimal.mark = ".",
  trim = TRUE,
  ...
)

percent(
  x,
  accuracy = NULL,
  scale = 100,
  prefix = "",
  suffix = "%",
  big.mark = " ",
  decimal.mark = ".",
  trim = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="percent_format_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="percent_format_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="percent_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='pretty_breaks'>Superseded interface to <code>breaks_pretty()</code></h2><span id='topic+pretty_breaks'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+breaks_pretty">breaks_pretty()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_breaks(n = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pretty_breaks_+3A_n">n</code></td>
<td>
<p>Desired number of breaks. You may get slightly more or fewer
breaks that requested.</p>
</td></tr>
<tr><td><code id="pretty_breaks_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="base.html#topic+pretty">pretty()</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='pvalue_format'>Superseded interface to <code>label_pvalue()</code></h2><span id='topic+pvalue_format'></span><span id='topic+pvalue'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_pvalue">label_pvalue()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pvalue_format(
  accuracy = 0.001,
  decimal.mark = ".",
  prefix = NULL,
  add_p = FALSE
)

pvalue(x, accuracy = 0.001, decimal.mark = ".", prefix = NULL, add_p = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pvalue_format_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="pvalue_format_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="pvalue_format_+3A_prefix">prefix</code></td>
<td>
<p>A character vector of length 3 giving the prefixes to
put in front of numbers. The default values are <code>c("&lt;", "", "&gt;")</code>
if <code>add_p</code> is <code>TRUE</code> and <code>c("p&lt;", "p=", "p&gt;")</code> if <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="pvalue_format_+3A_add_p">add_p</code></td>
<td>
<p>Add &quot;p=&quot; before the value?</p>
</td></tr>
</table>

<hr>
<h2 id='Range'>Mutable ranges</h2><span id='topic+Range'></span><span id='topic+DiscreteRange'></span><span id='topic+ContinuousRange'></span>

<h3>Description</h3>

<p>Mutable ranges have a two methods (<code>train</code> and <code>reset</code>), and
make it possible to build up complete ranges with multiple passes.
</p>

<hr>
<h2 id='regular_minor_breaks'>Minor breaks</h2><span id='topic+regular_minor_breaks'></span>

<h3>Description</h3>

<p>Places minor breaks between major breaks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regular_minor_breaks(reverse = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regular_minor_breaks_+3A_reverse">reverse</code></td>
<td>
<p>if TRUE, calculates the minor breaks for a reversed scale</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- extended_breaks()(c(1, 10))
regular_minor_breaks()(m, c(1, 10), n = 2)

n &lt;- extended_breaks()(c(0, -9))
regular_minor_breaks(reverse = TRUE)(n, c(0, -9), n = 2)
</code></pre>

<hr>
<h2 id='rescale'>Rescale continuous vector to have specified minimum and maximum</h2><span id='topic+rescale'></span><span id='topic+rescale.numeric'></span><span id='topic+rescale.dist'></span><span id='topic+rescale.logical'></span><span id='topic+rescale.POSIXt'></span><span id='topic+rescale.Date'></span><span id='topic+rescale.integer64'></span><span id='topic+rescale.difftime'></span><span id='topic+rescale.AsIs'></span>

<h3>Description</h3>

<p>Rescale continuous vector to have specified minimum and maximum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale(x, to, from, ...)

## S3 method for class 'numeric'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'dist'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'logical'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'POSIXt'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'Date'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'integer64'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE), ...)

## S3 method for class 'difftime'
rescale(x, to = c(0, 1), from = range(x, na.rm = TRUE, finite = TRUE), ...)

## S3 method for class 'AsIs'
rescale(x, to, from, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_+3A_x">x</code></td>
<td>
<p>continuous vector of values to manipulate.</p>
</td></tr>
<tr><td><code id="rescale_+3A_to">to</code></td>
<td>
<p>output range (numeric vector of length two)</p>
</td></tr>
<tr><td><code id="rescale_+3A_from">from</code></td>
<td>
<p>input range (vector of length two).  If not given, is
calculated from the range of <code>x</code></p>
</td></tr>
<tr><td><code id="rescale_+3A_...">...</code></td>
<td>
<p>other arguments passed on to methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Objects of class <code style="white-space: pre;">&#8288;&lt;AsIs&gt;&#8288;</code> are returned unaltered.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rescale(1:100)
rescale(runif(50))
rescale(1)
</code></pre>

<hr>
<h2 id='rescale_max'>Rescale numeric vector to have specified maximum</h2><span id='topic+rescale_max'></span>

<h3>Description</h3>

<p>Rescale numeric vector to have specified maximum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale_max(x, to = c(0, 1), from = range(x, na.rm = TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_max_+3A_x">x</code></td>
<td>
<p>numeric vector of values to manipulate.</p>
</td></tr>
<tr><td><code id="rescale_max_+3A_to">to</code></td>
<td>
<p>output range (numeric vector of length two)</p>
</td></tr>
<tr><td><code id="rescale_max_+3A_from">from</code></td>
<td>
<p>input range (numeric vector of length two).  If not given, is
calculated from the range of <code>x</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>rescale_max(1:100)
rescale_max(runif(50))
rescale_max(1)
</code></pre>

<hr>
<h2 id='rescale_mid'>Rescale vector to have specified minimum, midpoint, and maximum</h2><span id='topic+rescale_mid'></span><span id='topic+rescale_mid.numeric'></span><span id='topic+rescale_mid.logical'></span><span id='topic+rescale_mid.dist'></span><span id='topic+rescale_mid.POSIXt'></span><span id='topic+rescale_mid.Date'></span><span id='topic+rescale_mid.integer64'></span><span id='topic+rescale_mid.AsIs'></span>

<h3>Description</h3>

<p>Rescale vector to have specified minimum, midpoint, and maximum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale_mid(x, to, from, mid, ...)

## S3 method for class 'numeric'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid = 0, ...)

## S3 method for class 'logical'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid = 0, ...)

## S3 method for class 'dist'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid = 0, ...)

## S3 method for class 'POSIXt'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid, ...)

## S3 method for class 'Date'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid, ...)

## S3 method for class 'integer64'
rescale_mid(x, to = c(0, 1), from = range(x, na.rm = TRUE), mid = 0, ...)

## S3 method for class 'AsIs'
rescale_mid(x, to, from, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_mid_+3A_x">x</code></td>
<td>
<p>vector of values to manipulate.</p>
</td></tr>
<tr><td><code id="rescale_mid_+3A_to">to</code></td>
<td>
<p>output range (numeric vector of length two)</p>
</td></tr>
<tr><td><code id="rescale_mid_+3A_from">from</code></td>
<td>
<p>input range (vector of length two).  If not given, is
calculated from the range of <code>x</code></p>
</td></tr>
<tr><td><code id="rescale_mid_+3A_mid">mid</code></td>
<td>
<p>mid-point of input range</p>
</td></tr>
<tr><td><code id="rescale_mid_+3A_...">...</code></td>
<td>
<p>other arguments passed on to methods</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Objects of class <code style="white-space: pre;">&#8288;&lt;AsIs&gt;&#8288;</code> are returned unaltered.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>rescale_mid(1:100, mid = 50.5)
rescale_mid(runif(50), mid = 0.5)
rescale_mid(1)
</code></pre>

<hr>
<h2 id='rescale_none'>Don't perform rescaling</h2><span id='topic+rescale_none'></span>

<h3>Description</h3>

<p>Don't perform rescaling
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rescale_none(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rescale_none_+3A_x">x</code></td>
<td>
<p>numeric vector of values to manipulate.</p>
</td></tr>
<tr><td><code id="rescale_none_+3A_...">...</code></td>
<td>
<p>all other arguments ignored</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>rescale_none(1:100)
</code></pre>

<hr>
<h2 id='scales-package'>scales: Scale Functions for Visualization</h2><span id='topic+scales'></span><span id='topic+scales-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Graphical scales map data to aesthetics, and provide methods for automatically determining breaks and labels for axes and legends.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Thomas Lin Pedersen <a href="mailto:thomas.pedersen@posit.co">thomas.pedersen@posit.co</a> (<a href="https://orcid.org/0000-0002-5147-4711">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Hadley Wickham <a href="mailto:hadley@posit.co">hadley@posit.co</a>
</p>
</li>
<li><p> Dana Seidel
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://scales.r-lib.org">https://scales.r-lib.org</a>
</p>
</li>
<li> <p><a href="https://github.com/r-lib/scales">https://github.com/r-lib/scales</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-lib/scales/issues">https://github.com/r-lib/scales/issues</a>
</p>
</li></ul>


<hr>
<h2 id='scientific_format'>Superseded interface to <code>label_scientific()</code></h2><span id='topic+scientific_format'></span><span id='topic+scientific'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_scientific">label_scientific()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scientific_format(
  digits = 3,
  scale = 1,
  prefix = "",
  suffix = "",
  decimal.mark = ".",
  trim = TRUE,
  ...
)

scientific(
  x,
  digits = 3,
  scale = 1,
  prefix = "",
  suffix = "",
  decimal.mark = ".",
  trim = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scientific_format_+3A_digits">digits</code></td>
<td>
<p>Number of digits to show before exponent.</p>
</td></tr>
<tr><td><code id="scientific_format_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="scientific_format_+3A_prefix">prefix</code>, <code id="scientific_format_+3A_suffix">suffix</code></td>
<td>
<p>Symbols to display before and after value.</p>
</td></tr>
<tr><td><code id="scientific_format_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="scientific_format_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="scientific_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='show_col'>Show colours</h2><span id='topic+show_col'></span>

<h3>Description</h3>

<p>A quick and dirty way to show colours in a plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_col(colours, labels = TRUE, borders = NULL, cex_label = 1, ncol = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_col_+3A_colours">colours</code></td>
<td>
<p>A character vector of colours</p>
</td></tr>
<tr><td><code id="show_col_+3A_labels">labels</code></td>
<td>
<p>Label each colour with its hex name?</p>
</td></tr>
<tr><td><code id="show_col_+3A_borders">borders</code></td>
<td>
<p>Border colour for each tile. Default uses <code>par("fg")</code>.
Use <code>border = NA</code> to omit borders.</p>
</td></tr>
<tr><td><code id="show_col_+3A_cex_label">cex_label</code></td>
<td>
<p>Size of printed labels, as multiplier of default size.</p>
</td></tr>
<tr><td><code id="show_col_+3A_ncol">ncol</code></td>
<td>
<p>Number of columns. If not supplied, tries to be as square as
possible.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>show_col(pal_hue()(9))
show_col(pal_hue()(9), borders = NA)

show_col(pal_viridis()(16))
show_col(pal_viridis()(16), labels = FALSE)
</code></pre>

<hr>
<h2 id='train_continuous'>Train (update) a continuous scale</h2><span id='topic+train_continuous'></span>

<h3>Description</h3>

<p>Strips attributes and always returns a numeric vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_continuous(new, existing = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="train_continuous_+3A_new">new</code></td>
<td>
<p>New data to add to scale</p>
</td></tr>
<tr><td><code id="train_continuous_+3A_existing">existing</code></td>
<td>
<p>Optional existing scale to update</p>
</td></tr>
</table>

<hr>
<h2 id='train_discrete'>Train (update) a discrete scale</h2><span id='topic+train_discrete'></span>

<h3>Description</h3>

<p>Train (update) a discrete scale
</p>


<h3>Usage</h3>

<pre><code class='language-R'>train_discrete(new, existing = NULL, drop = FALSE, na.rm = FALSE, fct = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="train_discrete_+3A_new">new</code></td>
<td>
<p>New data to add to scale</p>
</td></tr>
<tr><td><code id="train_discrete_+3A_existing">existing</code></td>
<td>
<p>Optional existing scale to update</p>
</td></tr>
<tr><td><code id="train_discrete_+3A_drop">drop</code></td>
<td>
<p><code>TRUE</code>, will drop factor levels not associated with data</p>
</td></tr>
<tr><td><code id="train_discrete_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>TRUE</code>, will remove missing values</p>
</td></tr>
<tr><td><code id="train_discrete_+3A_fct">fct</code></td>
<td>
<p>Treat <code>existing</code> as if it came from a factor (ie. don't sort the range)</p>
</td></tr>
</table>

<hr>
<h2 id='trans_breaks'>Pretty breaks on transformed scale</h2><span id='topic+trans_breaks'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These often do not produce very attractive breaks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trans_breaks(trans, inv, n = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trans_breaks_+3A_trans">trans</code></td>
<td>
<p>function of single variable, <code>x</code>, that given a numeric
vector returns the transformed values</p>
</td></tr>
<tr><td><code id="trans_breaks_+3A_inv">inv</code></td>
<td>
<p>inverse of the transformation function</p>
</td></tr>
<tr><td><code id="trans_breaks_+3A_n">n</code></td>
<td>
<p>desired number of ticks</p>
</td></tr>
<tr><td><code id="trans_breaks_+3A_...">...</code></td>
<td>
<p>other arguments passed on to pretty</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>trans_breaks("log10", function(x) 10^x)(c(1, 1e6))
trans_breaks("sqrt", function(x) x^2)(c(1, 100))
trans_breaks(function(x) 1 / x, function(x) 1 / x)(c(1, 100))
trans_breaks(function(x) -x, function(x) -x)(c(1, 100))
</code></pre>

<hr>
<h2 id='trans_format'>Format labels after transformation</h2><span id='topic+trans_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trans_format(trans, format = scientific_format())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trans_format_+3A_trans">trans</code></td>
<td>
<p>transformation to apply</p>
</td></tr>
<tr><td><code id="trans_format_+3A_format">format</code></td>
<td>
<p>additional formatter to apply after transformation</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a function with single parameter x, a numeric vector, that
returns a character vector of list of expressions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tf &lt;- trans_format("log10", scientific_format())
tf(10^1:6)
</code></pre>

<hr>
<h2 id='transform_asinh'>Inverse Hyperbolic Sine transformation</h2><span id='topic+transform_asinh'></span><span id='topic+asinh_trans'></span>

<h3>Description</h3>

<p>Inverse Hyperbolic Sine transformation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_asinh()

asinh_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_asinh(), xlim = c(-1e2, 1e2))
</code></pre>

<hr>
<h2 id='transform_asn'>Arc-sin square root transformation</h2><span id='topic+transform_asn'></span><span id='topic+asn_trans'></span>

<h3>Description</h3>

<p>This is the variance stabilising transformation for the binomial
distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_asn()

asn_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_asn(), xlim = c(0, 1))
</code></pre>

<hr>
<h2 id='transform_atanh'>Arc-tangent transformation</h2><span id='topic+transform_atanh'></span><span id='topic+atanh_trans'></span>

<h3>Description</h3>

<p>Arc-tangent transformation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_atanh()

atanh_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_atanh(), xlim = c(-1, 1))
</code></pre>

<hr>
<h2 id='transform_boxcox'>Box-Cox &amp; modulus transformations</h2><span id='topic+transform_boxcox'></span><span id='topic+boxcox_trans'></span><span id='topic+transform_modulus'></span><span id='topic+modulus_trans'></span>

<h3>Description</h3>

<p>The Box-Cox transformation is a flexible transformation, often used to
transform data towards normality. The modulus transformation generalises
Box-Cox to also work with negative values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_boxcox(p, offset = 0)

boxcox_trans(p, offset = 0)

transform_modulus(p, offset = 1)

modulus_trans(p, offset = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_boxcox_+3A_p">p</code></td>
<td>
<p>Transformation exponent, <code class="reqn">\lambda</code>.</p>
</td></tr>
<tr><td><code id="transform_boxcox_+3A_offset">offset</code></td>
<td>
<p>Constant offset. 0 for Box-Cox type 1,
otherwise any non-negative constant (Box-Cox type 2). <code>transform_modulus()</code>
sets the default to 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Box-Cox power transformation (type 1) requires strictly positive values and
takes the following form for <code>y &gt; 0</code>:
</p>
<p style="text-align: center;"><code class="reqn">y^{(\lambda)} = \frac{y^\lambda - 1}{\lambda}</code>
</p>

<p>When <code>y = 0</code>, the natural log transform is used.
</p>
<p>The modulus transformation implements a generalisation of the Box-Cox
transformation that works for data with both positive and negative values.
The equation takes the following forms, when <code>y != 0</code> :
</p>
<p style="text-align: center;"><code class="reqn">y^{(\lambda)} = sign(y) * \frac{(|y| + 1)^\lambda - 1}{\lambda}</code>
</p>

<p>and when <code>y = 0</code>: </p>
<p style="text-align: center;"><code class="reqn">y^{(\lambda)} =  sign(y) * \ln(|y| + 1)</code>
</p>



<h3>References</h3>

<p>Box, G. E., &amp; Cox, D. R. (1964). An analysis of transformations.
Journal of the Royal Statistical Society. Series B (Methodological), 211-252.
<a href="https://www.jstor.org/stable/2984418">https://www.jstor.org/stable/2984418</a>
</p>
<p>John, J. A., &amp; Draper, N. R. (1980).
An alternative family of transformations. Applied Statistics, 190-197.
<a href="https://www.jstor.org/stable/2986305">https://www.jstor.org/stable/2986305</a>
</p>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+transform_yj">transform_yj()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_boxcox(-1), xlim = c(0, 10))
plot(transform_boxcox(0), xlim = c(0, 10))
plot(transform_boxcox(1), xlim = c(0, 10))
plot(transform_boxcox(2), xlim = c(0, 10))

plot(transform_modulus(-1), xlim = c(-10, 10))
plot(transform_modulus(0), xlim = c(-10, 10))
plot(transform_modulus(1), xlim = c(-10, 10))
plot(transform_modulus(2), xlim = c(-10, 10))
</code></pre>

<hr>
<h2 id='transform_compose'>Compose two or more transformations together</h2><span id='topic+transform_compose'></span><span id='topic+compose_trans'></span>

<h3>Description</h3>

<p>This transformer provides a general mechanism for composing two or more
transformers together. The most important use case is to combine reverse
with other transformations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_compose(...)

compose_trans(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_compose_+3A_...">...</code></td>
<td>
<p>One or more transformers, either specified with string or
as individual transformer objects.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>demo_continuous(10^c(-2:4), trans = "log10", labels = label_log())
demo_continuous(10^c(-2:4), trans = c("log10", "reverse"), labels = label_log())
</code></pre>

<hr>
<h2 id='transform_date'>Transformation for dates (class Date)</h2><span id='topic+transform_date'></span><span id='topic+date_trans'></span>

<h3>Description</h3>

<p>Transformation for dates (class Date)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_date()

date_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>years &lt;- seq(as.Date("1910/1/1"), as.Date("1999/1/1"), "years")
t &lt;- transform_date()
t$transform(years)
t$inverse(t$transform(years))
t$format(t$breaks(range(years)))
</code></pre>

<hr>
<h2 id='transform_exp'>Exponential transformation (inverse of log transformation)</h2><span id='topic+transform_exp'></span><span id='topic+exp_trans'></span>

<h3>Description</h3>

<p>Exponential transformation (inverse of log transformation)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_exp(base = exp(1))

exp_trans(base = exp(1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_exp_+3A_base">base</code></td>
<td>
<p>Base of logarithm</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_exp(0.5), xlim = c(-2, 2))
plot(transform_exp(1), xlim = c(-2, 2))
plot(transform_exp(2), xlim = c(-2, 2))
plot(transform_exp(), xlim = c(-2, 2))
</code></pre>

<hr>
<h2 id='transform_identity'>Identity transformation (do nothing)</h2><span id='topic+transform_identity'></span><span id='topic+identity_trans'></span>

<h3>Description</h3>

<p>Identity transformation (do nothing)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_identity()

identity_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_identity(), xlim = c(-1, 1))
</code></pre>

<hr>
<h2 id='transform_log'>Log transformations</h2><span id='topic+transform_log'></span><span id='topic+transform_log10'></span><span id='topic+transform_log2'></span><span id='topic+transform_log1p'></span><span id='topic+log_trans'></span><span id='topic+log10_trans'></span><span id='topic+log2_trans'></span><span id='topic+log1p_trans'></span><span id='topic+transform_pseudo_log'></span><span id='topic+pseudo_log_trans'></span>

<h3>Description</h3>


<ul>
<li> <p><code>transform_log()</code>: <code>log(x)</code>
</p>
</li>
<li> <p><code>log1p()</code>: <code>log(x + 1)</code>
</p>
</li>
<li> <p><code>transform_pseudo_log()</code>:  smoothly transition to linear scale around 0.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>transform_log(base = exp(1))

transform_log10()

transform_log2()

transform_log1p()

log_trans(base = exp(1))

log10_trans()

log2_trans()

log1p_trans()

transform_pseudo_log(sigma = 1, base = exp(1))

pseudo_log_trans(sigma = 1, base = exp(1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_log_+3A_base">base</code></td>
<td>
<p>base of logarithm</p>
</td></tr>
<tr><td><code id="transform_log_+3A_sigma">sigma</code></td>
<td>
<p>Scaling factor for the linear part of pseudo-log transformation.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_log2(), xlim = c(0, 5))
plot(transform_log(), xlim = c(0, 5))
plot(transform_log10(), xlim = c(0, 5))

plot(transform_log(), xlim = c(0, 2))
plot(transform_log1p(), xlim = c(-1, 1))

# The pseudo-log is defined for all real numbers
plot(transform_pseudo_log(), xlim = c(-5, 5))
lines(transform_log(), xlim = c(0, 5), col = "red")

# For large positives numbers it's very close to log
plot(transform_pseudo_log(), xlim = c(1, 20))
lines(transform_log(), xlim = c(1, 20), col = "red")
</code></pre>

<hr>
<h2 id='transform_probability'>Probability transformation</h2><span id='topic+transform_probability'></span><span id='topic+transform_logit'></span><span id='topic+transform_probit'></span><span id='topic+probability_trans'></span><span id='topic+logit_trans'></span><span id='topic+probit_trans'></span>

<h3>Description</h3>

<p>Probability transformation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_probability(distribution, ...)

transform_logit()

transform_probit()

probability_trans(distribution, ...)

logit_trans()

probit_trans()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_probability_+3A_distribution">distribution</code></td>
<td>
<p>probability distribution.  Should be standard R
abbreviation so that &quot;p&quot; + distribution is a valid cumulative distribution
function, &quot;q&quot; + distribution is a valid quantile function, and
&quot;d&quot; + distribution is a valid probability density function.</p>
</td></tr>
<tr><td><code id="transform_probability_+3A_...">...</code></td>
<td>
<p>other arguments passed on to distribution and quantile functions</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_logit(), xlim = c(0, 1))
plot(transform_probit(), xlim = c(0, 1))
</code></pre>

<hr>
<h2 id='transform_reciprocal'>Reciprocal transformation</h2><span id='topic+transform_reciprocal'></span><span id='topic+reciprocal_trans'></span>

<h3>Description</h3>

<p>Reciprocal transformation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_reciprocal()

reciprocal_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_reciprocal(), xlim = c(0, 1))
</code></pre>

<hr>
<h2 id='transform_reverse'>Reverse transformation</h2><span id='topic+transform_reverse'></span><span id='topic+reverse_trans'></span>

<h3>Description</h3>

<p>reversing transformation works by multiplying the input with -1. This means
that reverse transformation cannot easily be composed with transformations
that require positive input unless the reversing is done as a final step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_reverse()

reverse_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_reverse(), xlim = c(-1, 1))
</code></pre>

<hr>
<h2 id='transform_sqrt'>Square-root transformation</h2><span id='topic+transform_sqrt'></span><span id='topic+sqrt_trans'></span>

<h3>Description</h3>

<p>This is the variance stabilising transformation for the Poisson
distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_sqrt()

sqrt_trans()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_sqrt(), xlim = c(0, 5))
</code></pre>

<hr>
<h2 id='transform_time'>Transformation for date-times (class POSIXt)</h2><span id='topic+transform_time'></span><span id='topic+time_trans'></span>

<h3>Description</h3>

<p>Transformation for date-times (class POSIXt)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_time(tz = NULL)

time_trans(tz = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_time_+3A_tz">tz</code></td>
<td>
<p>Optionally supply the time zone.  If <code>NULL</code>, the default,
the time zone will be extracted from first input with a non-null tz.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>hours &lt;- seq(ISOdate(2000, 3, 20, tz = ""), by = "hour", length.out = 10)
t &lt;- transform_time()
t$transform(hours)
t$inverse(t$transform(hours))
t$format(t$breaks(range(hours)))
</code></pre>

<hr>
<h2 id='transform_timespan'>Transformation for times (class hms)</h2><span id='topic+transform_timespan'></span><span id='topic+timespan_trans'></span><span id='topic+transform_hms'></span><span id='topic+hms_trans'></span>

<h3>Description</h3>

<p><code>transform_timespan()</code> provides transformations for data encoding time passed
along with breaks and label formatting showing standard unit of time fitting
the range of the data. <code>transform_hms()</code> provides the same but using standard
hms idioms and formatting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_timespan(unit = c("secs", "mins", "hours", "days", "weeks"))

timespan_trans(unit = c("secs", "mins", "hours", "days", "weeks"))

transform_hms()

hms_trans()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_timespan_+3A_unit">unit</code></td>
<td>
<p>The unit used to interpret numeric input</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># transform_timespan allows you to specify the time unit numeric data is
# interpreted in
trans_min &lt;- transform_timespan("mins")
demo_timespan(seq(0, 100), trans = trans_min)
# Input already in difftime format is interpreted correctly
demo_timespan(as.difftime(seq(0, 100), units = "secs"), trans = trans_min)

if (require("hms")) {
  # transform_hms always assumes seconds
  hms &lt;- round(runif(10) * 86400)
  t &lt;- transform_hms()
  t$transform(hms)
  t$inverse(t$transform(hms))
  t$breaks(hms)
  # The break labels also follow the hms format
  demo_timespan(hms, trans = t)
}

</code></pre>

<hr>
<h2 id='transform_yj'>Yeo-Johnson transformation</h2><span id='topic+transform_yj'></span><span id='topic+yj_trans'></span>

<h3>Description</h3>

<p>The Yeo-Johnson transformation is a flexible transformation that is similar
to Box-Cox, <code><a href="scales.html#topic+transform_boxcox">transform_boxcox()</a></code>, but does not require input values to be
greater than zero.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_yj(p)

yj_trans(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_yj_+3A_p">p</code></td>
<td>
<p>Transformation exponent, <code class="reqn">\lambda</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The transformation takes one of four forms depending on the values of <code>y</code> and <code class="reqn">\lambda</code>.
</p>

<ul>
<li> <p><code class="reqn">y \ge 0</code> and <code class="reqn">\lambda \neq 0</code> :
<code class="reqn">y^{(\lambda)} = \frac{(y + 1)^\lambda - 1}{\lambda}</code>
</p>
</li>
<li> <p><code class="reqn">y \ge 0</code> and <code class="reqn">\lambda = 0</code>:
<code class="reqn">y^{(\lambda)} = \ln(y + 1)</code>
</p>
</li>
<li> <p><code class="reqn">y &lt; 0</code> and <code class="reqn">\lambda \neq 2</code>:
<code class="reqn">y^{(\lambda)} = -\frac{(-y + 1)^{(2 - \lambda)} - 1}{2 - \lambda}</code>
</p>
</li>
<li> <p><code class="reqn">y &lt; 0</code> and <code class="reqn">\lambda = 2</code>:
<code class="reqn">y^{(\lambda)} = -\ln(-y + 1)</code>
</p>
</li></ul>



<h3>References</h3>

<p>Yeo, I., &amp; Johnson, R. (2000).
A New Family of Power Transformations to Improve Normality or Symmetry. Biometrika, 87(4), 954-959.
<a href="https://www.jstor.org/stable/2673623">https://www.jstor.org/stable/2673623</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot(transform_yj(-1), xlim = c(-10, 10))
plot(transform_yj(0), xlim = c(-10, 10))
plot(transform_yj(1), xlim = c(-10, 10))
plot(transform_yj(2), xlim = c(-10, 10))
</code></pre>

<hr>
<h2 id='trim_to_domain'>Compute range of transformed values</h2><span id='topic+trim_to_domain'></span><span id='topic+trans_range'></span>

<h3>Description</h3>

<p>Silently drops any ranges outside of the domain of <code>transform</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim_to_domain(transform, x)

trans_range(transform, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trim_to_domain_+3A_transform">transform</code></td>
<td>
<p>a transformation object, or the name of a transformation object
given as a string.</p>
</td></tr>
<tr><td><code id="trim_to_domain_+3A_x">x</code></td>
<td>
<p>a numeric vector to compute the range of</p>
</td></tr>
</table>

<hr>
<h2 id='unit_format'>Unit labels</h2><span id='topic+unit_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>This function is kept for backward compatiblity; you should either use
<code><a href="scales.html#topic+label_number">label_number()</a></code> or <code><a href="scales.html#topic+label_number_si">label_number_si()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unit_format(
  accuracy = NULL,
  scale = 1,
  prefix = "",
  unit = "m",
  sep = " ",
  suffix = paste0(sep, unit),
  big.mark = " ",
  decimal.mark = ".",
  trim = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unit_format_+3A_accuracy">accuracy</code></td>
<td>
<p>A number to round to. Use (e.g.) <code>0.01</code> to show 2 decimal
places of precision. If <code>NULL</code>, the default, uses a heuristic that should
ensure breaks have the minimum number of digits needed to show the
difference between adjacent values.
</p>
<p>Applied to rescaled data.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_scale">scale</code></td>
<td>
<p>A scaling factor: <code>x</code> will be multiplied by <code>scale</code> before
formatting. This is useful if the underlying data is very small or very
large.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_prefix">prefix</code></td>
<td>
<p>Additional text to display before the number. The suffix is
applied to absolute value before <code>style_positive</code> and <code>style_negative</code> are
processed so that <code>prefix = "$"</code> will yield (e.g.) <code style="white-space: pre;">&#8288;-$1&#8288;</code> and <code style="white-space: pre;">&#8288;($1)&#8288;</code>.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_unit">unit</code></td>
<td>
<p>The units to append.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_sep">sep</code></td>
<td>
<p>The separator between the number and the unit label.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_suffix">suffix</code></td>
<td>
<p>Additional text to display after the number.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_big.mark">big.mark</code></td>
<td>
<p>Character used between every 3 digits to separate thousands.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_decimal.mark">decimal.mark</code></td>
<td>
<p>The character to be used to indicate the numeric
decimal point.</p>
</td></tr>
<tr><td><code id="unit_format_+3A_trim">trim</code></td>
<td>
<p>Logical, if <code>FALSE</code>, values are right-justified to a common
width (see <code><a href="base.html#topic+format">base::format()</a></code>).</p>
</td></tr>
<tr><td><code id="unit_format_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <code><a href="base.html#topic+format">base::format()</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Label with units
demo_continuous(c(0, 1), labels = unit_format(unit = "m"))
# Labels in kg, but original data in g
km &lt;- unit_format(unit = "km", scale = 1e-3, digits = 2)
demo_continuous(c(0, 2500), labels = km)
</code></pre>

<hr>
<h2 id='wrap_format'>Superseded interface to <code>label_wrap()</code></h2><span id='topic+wrap_format'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>These functions are kept for backward compatibility; you should switch
to <code><a href="scales.html#topic+label_wrap">label_wrap()</a></code> for new code.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wrap_format(width)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wrap_format_+3A_width">width</code></td>
<td>
<p>Number of characters per line.</p>
</td></tr>
</table>

<hr>
<h2 id='zero_range'>Determine if range of vector is close to zero, with a specified tolerance</h2><span id='topic+zero_range'></span>

<h3>Description</h3>

<p>The machine epsilon is the difference between 1.0 and the next number
that can be represented by the machine. By default, this function
uses epsilon * 1000 as the tolerance. First it scales the values so that
they have a mean of 1, and then it checks if the difference between
them is larger than the tolerance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zero_range(x, tol = 1000 * .Machine$double.eps)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="zero_range_+3A_x">x</code></td>
<td>
<p>numeric range: vector of length 2</p>
</td></tr>
<tr><td><code id="zero_range_+3A_tol">tol</code></td>
<td>
<p>A value specifying the tolerance.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical <code>TRUE</code> if the relative difference of the endpoints of
the range are not distinguishable from 0.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>eps &lt;- .Machine$double.eps
zero_range(c(1, 1 + eps))
zero_range(c(1, 1 + 99 * eps))
zero_range(c(1, 1 + 1001 * eps))
zero_range(c(1, 1 + 2 * eps), tol = eps)

# Scaling up or down all the values has no effect since the values
# are rescaled to 1 before checking against tol
zero_range(100000 * c(1, 1 + eps))
zero_range(100000 * c(1, 1 + 1001 * eps))
zero_range(.00001 * c(1, 1 + eps))
zero_range(.00001 * c(1, 1 + 1001 * eps))

# NA values
zero_range(c(1, NA)) # NA
zero_range(c(1, NaN)) # NA

# Infinite values
zero_range(c(1, Inf)) # FALSE
zero_range(c(-Inf, Inf)) # FALSE
zero_range(c(Inf, Inf)) # TRUE

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
