<!DOCTYPE html><html><head><title>Help for package MLDataR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MLDataR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#care_home_incidents'><p>Care Home Incidents</p></a></li>
<li><a href='#csgo'><p>csgo</p></a></li>
<li><a href='#diabetes_data'><p>Diabetes datasets</p></a></li>
<li><a href='#heartdisease'><p>Heart disease dataset</p></a></li>
<li><a href='#long_stayers'><p>Long stayers dataset</p></a></li>
<li><a href='#PreDiabetes'><p>PreDiabetes dataset</p></a></li>
<li><a href='#stroke_classification'><p>Stroke Classification dataset</p></a></li>
<li><a href='#thyroid_disease'><p>Thyroid disease dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Collection of Machine Learning Datasets for Supervised Machine
Learning</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gary Hutson &lt;hutsons-hacks@outlook.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains a collection of datasets for working with machine learning tasks.
    It will contain datasets for supervised machine learning Jiang (2020)&lt;<a href="https://doi.org/10.1016%2Fj.beth.2020.05.002">doi:10.1016/j.beth.2020.05.002</a>&gt; and will include datasets for classification and regression.
    The aim of this package is to use data generated around health and other domains.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/StatsGary/MLDataR/issues">https://github.com/StatsGary/MLDataR/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ConfusionTableR, dplyr, parsnip, rsample, recipes, workflows,
ranger, caret, varhandle, OddsPlotty, ggplot2</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-03 14:44:47 UTC; garyh</td>
</tr>
<tr>
<td>Author:</td>
<td>Gary Hutson <a href="https://orcid.org/0000-0003-3534-6143"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Asif Laldin [aut],
  Isabella Vel√°squez [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-03 15:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='care_home_incidents'>Care Home Incidents</h2><span id='topic+care_home_incidents'></span>

<h3>Description</h3>

<p>a NHS patient safety incidents dataset: <a href="https://www.england.nhs.uk/patient-safety/report-patient-safety-incident/">https://www.england.nhs.uk/patient-safety/report-patient-safety-incident/</a> dataset that has been synthetically generated against real data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>care_home_incidents
</code></pre>


<h3>Format</h3>

<p>A data frame with 1216 rows and 12 variables:
</p>

<dl>
<dt>CareHomeFail</dt><dd><p>a binary indicator to specify whether a certain care home is failing</p>
</dd>
<dt>WeightLoss</dt><dd><p>aggregation of incidents indicating weight loss in patient</p>
</dd>
<dt>Medication</dt><dd><p>medication missed aggregaation</p>
</dd>
<dt>Falls</dt><dd><p>Recorded number of patient falls</p>
</dd>
<dt>Choking</dt><dd><p>Number of patient choking incidents</p>
</dd>
<dt>UnexpectedDeaths</dt><dd><p>unexpected deaths in the care home</p>
</dd>
<dt>Bruising</dt><dd><p>Number of bruising incidents in the care home</p>
</dd>
<dt>Absconsion</dt><dd><p>Absconding from the care home setting</p>
</dd>
<dt>ResidentAbuseByResident</dt><dd><p>Abuse conducted by one care home resident against another</p>
</dd>
<dt>ResidentAbuseByStaff</dt><dd><p>Incidents of resident abuse by staff</p>
</dd>
<dt>ResidentAbuseOnStaff</dt><dd><p>Incidents of residents abusing staff</p>
</dd>
<dt>Wounds</dt><dd><p>Unexplained wounds against staff</p>
</dd>
</dl>



<h3>Source</h3>

<p>Collected by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Jan-2022
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
data(care_home_incidents)
# Convert diabetes data to factor'
ch_incs &lt;- care_home_incidents %&gt;%
 mutate(CareHomeFail = as.factor(CareHomeFail))
 ch_incs %&gt;% glimpse()
 # Check factor
 factor(ch_incs$CareHomeFail)
</code></pre>

<hr>
<h2 id='csgo'>csgo</h2><span id='topic+csgo'></span>

<h3>Description</h3>

<p>csgo
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csgo
</code></pre>


<h3>Format</h3>

<p>A data frame with 1,133 rows and 17 variables:
</p>

<dl>
<dt>map</dt><dd><p>Map on which the match was played</p>
</dd>
<dt>day</dt><dd><p>Day of the month</p>
</dd>
<dt>month</dt><dd><p>Month of the year</p>
</dd>
<dt>year</dt><dd><p>Year</p>
</dd>
<dt>date</dt><dd><p>Date of match DD/MM/YYYY</p>
</dd>
<dt>wait_time_s</dt><dd><p>Time waited to find match</p>
</dd>
<dt>match_time_s</dt><dd><p>Total match length in seconds</p>
</dd>
<dt>team_a_rounds</dt><dd><p>Number of rounds played as Team A</p>
</dd>
<dt>team_b_rounds</dt><dd><p>Number of rounds played as Team B</p>
</dd>
<dt>ping</dt><dd><p>Maximum ping in milliseconds;the signal that's sent from one computer to another on the same network</p>
</dd>
<dt>kills</dt><dd><p>Number of kills accumulated in match; max 5 per round</p>
</dd>
<dt>assists</dt><dd><p>Number of assists accumulated in a match,inflicting oppononent with more than 50 percent damage,who is then killed by another player accumulated in match max 5 per round</p>
</dd>
<dt>deaths</dt><dd><p>Number of times player died during match;max 1 per round</p>
</dd>
<dt>mvps</dt><dd><p>Most Valuable Player award</p>
</dd>
<dt>hs_percent</dt><dd><p>Percentage of kills that were a result from a shot to opponent's head</p>
</dd>
<dt>points</dt><dd><p>Number of points accumulated during match. Apoints are gained from kills, assists,bomb defuses &amp; bomb plants. Points are lost for sucicide and friendly kills</p>
</dd>
<dt>result</dt><dd><p>The result of the match, Win, Loss, Draw</p>
</dd>
</dl>



<h3>Source</h3>

<p>Extracted by Asif Laldin <a href="mailto:a.laldin@nhs.net">a.laldin@nhs.net</a>, March-2019
</p>

<hr>
<h2 id='diabetes_data'>Diabetes datasets</h2><span id='topic+diabetes_data'></span>

<h3>Description</h3>

<p>Diabetes datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>diabetes_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 520 rows and 17 variables:
</p>

<dl>
<dt>Age</dt><dd><p>age of the patient presenting with diabetes</p>
</dd>
<dt>Gender</dt><dd><p>gender of the patient with diabetes</p>
</dd>
<dt>ExcessUrination</dt><dd><p>if the patient has a history of excessive urination</p>
</dd>
<dt>Polydipsia</dt><dd><p>abnormal thurst, accompanied by the excessive intake of water or fluid</p>
</dd>
<dt>WeightLossSudden</dt><dd><p>Sudden weight loss that has recently occured</p>
</dd>
<dt>Fatigue</dt><dd><p>Fatigue or weakness</p>
</dd>
<dt>Polyphagia</dt><dd><p>excessive or extreme hunger</p>
</dd>
<dt>GenitalThrush</dt><dd><p>patient has thrush fungus on or near their genital region</p>
</dd>
<dt>BlurredVision</dt><dd><p>history of blurred vision</p>
</dd>
<dt>Itching</dt><dd><p>skin itching</p>
</dd>
<dt>Irritability</dt><dd><p>general irritability and mood issues</p>
</dd>
<dt>DelayHealing</dt><dd><p>delayed healing of wounds</p>
</dd>
<dt>PartialPsoriasis</dt><dd><p>partial psoriasis on the body</p>
</dd>
<dt>MuscleStiffness</dt><dd><p>stiffness of the muscles</p>
</dd>
<dt>Alopecia</dt><dd><p>scalp alopecia and hair shedding</p>
</dd>
<dt>Obesity</dt><dd><p>Classified as obese</p>
</dd>
<dt>DiabeticClass</dt><dd><p>Class label to indicate whether the patient is diabetic or not</p>
</dd>
</dl>



<h3>Source</h3>

<p>Collected by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Dec-2021
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
data(diabetes_data)
# Convert diabetes data to factor'
diabetes_data &lt;- diabetes_data %&gt;%
 glimpse() %&gt;%
 mutate(DiabeticClass = as.factor(DiabeticClass))
 is.factor(diabetes_data$DiabeticClass)
</code></pre>

<hr>
<h2 id='heartdisease'>Heart disease dataset</h2><span id='topic+heartdisease'></span>

<h3>Description</h3>

<p>The dataset is to be used with a supervised classification ML model to classify heart disease.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>heartdisease
</code></pre>


<h3>Format</h3>

<p>A data frame with 918 rows and 10 variables:
</p>

<dl>
<dt>Age</dt><dd><p>age of the patient presenting with heart disease</p>
</dd>
<dt>Sex</dt><dd><p>gender of the patient</p>
</dd>
<dt>RestingBP</dt><dd><p>blood pressure for resting heart beat</p>
</dd>
<dt>Cholesterol</dt><dd><p>Cholesterol reading</p>
</dd>
<dt>FastingBS</dt><dd><p>blood sample of glucose after a patient fasts <a href="https://www.diabetes.co.uk/diabetes_care/fasting-blood-sugar-levels.html">https://www.diabetes.co.uk/diabetes_care/fasting-blood-sugar-levels.html</a></p>
</dd>
<dt>RestingECG</dt><dd><p>Resting echocardiography is an indicator of previous myocardial infarction e.g. heart attack</p>
</dd>
<dt>MaxHR</dt><dd><p>Maximum heart rate</p>
</dd>
<dt>Angina</dt><dd><p>chest pain caused by decreased flood flow <a href="https://www.nhs.uk/conditions/angina/">https://www.nhs.uk/conditions/angina/</a></p>
</dd>
<dt>HeartPeakReading</dt><dd><p>reading at the peak of the heart rate</p>
</dd>
<dt>HeartDisease</dt><dd><p>the classification label of whether patient has heart disease or not</p>
</dd>
</dl>



<h3>Source</h3>

<p>Collected by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Dec-2021
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ConfusionTableR)
data(heartdisease)

# Convert diabetes data to factor'
hd &lt;- heartdisease %&gt;%
 glimpse() %&gt;%
 mutate(HeartDisease = as.factor(HeartDisease))
# Check that the label is now a factor
 is.factor(hd$HeartDisease)
 # Dummy encoding
# Get categorical columns
hd_cat &lt;- hd  %&gt;%
 dplyr::select_if(is.character)
 # Dummy encode the categorical variables
 # Specify the columns to encode
 cols &lt;- c("RestingECG", "Angina", "Sex")
 # Dummy encode using dummy_encoder in ConfusionTableR package
 coded &lt;- ConfusionTableR::dummy_encoder(hd_cat, cols, remove_original = TRUE)
coded &lt;- coded %&gt;%
    select(RestingECG_ST, RestingECG_LVH, Angina=Angina_Y,
    Sex=Sex_F)
# Remove column names we have encoded from original data frame
hd_one &lt;- hd[,!names(hd) %in% cols]
# Bind the numerical data on to the categorical data
hd_final &lt;- bind_cols(coded, hd_one)
# Output the final encoded data frame for the ML task
glimpse(hd_final)
</code></pre>

<hr>
<h2 id='long_stayers'>Long stayers dataset</h2><span id='topic+long_stayers'></span>

<h3>Description</h3>

<p>classification dataset of long staying patients.
Contains patients who have been registered as an inpatient for longer than 7 days length of stay <a href="https://www.england.nhs.uk/south/wp-content/uploads/sites/6/2016/12/rig-reviewing-stranded-patients-hospital.pdf">https://www.england.nhs.uk/south/wp-content/uploads/sites/6/2016/12/rig-reviewing-stranded-patients-hospital.pdf</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>long_stayers
</code></pre>


<h3>Format</h3>

<p>A data frame with 768 rows and 9 variables:
</p>

<dl>
<dt>stranded.label</dt><dd><p>binary classification label indicating whether <strong>stranded = 1</strong> or <strong>not stranded=0</strong></p>
</dd>
<dt>age</dt><dd><p>age of the patient</p>
</dd>
<dt>care.home.referral</dt><dd><p>flag indicating whether referred from a private care home - <strong>1=Care Home Referral</strong> and <strong>0=Not a care home referral</strong></p>
</dd>
<dt>medicallysafe</dt><dd><p>flag indicating whether they are medically safe for discharge - <strong>1=Medically safe</strong> and <strong>0=Not medically safe</strong></p>
</dd>
<dt>hcop</dt><dd><p>flag indicating health care for older person triage - <strong>1=Yes triaged from HCOP</strong> and <strong>0=Triaged from different department</strong></p>
</dd>
<dt>mental_health_care</dt><dd><p>flag indicating whether they require mental health care - <strong>1=MH assistance needed</strong> and <strong>0=No history of mental health</strong></p>
</dd>
<dt>periods_of_previous_care</dt><dd><p>Count of the number of times they have been in hospital in last 12 months</p>
</dd>
<dt>admit_date</dt><dd><p>date the patient was admitted as an inpatient</p>
</dd>
<dt>frailty_index</dt><dd><p>indicates the type of frailty - nominal variable</p>
</dd>
</dl>



<h3>Source</h3>

<p>Prepared, acquired and adatped by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Dec-2021. Synthetic data, based off live patient data from various NHS secondary health care trusts.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ggplot2)
library(caret)
library(rsample)
library(varhandle)
data("long_stayers")
glimpse(long_stayers)
# Examine class imbalance
prop.table(table(long_stayers$stranded.label))
# Feature engineering
long_stayers &lt;- long_stayers %&gt;%
dplyr::mutate(stranded.label=factor(stranded.label)) %&gt;%
 dplyr::select(everything(), -c(admit_date))
 # Feature encoding
 cats &lt;- select_if(long_stayers, is.character)
 cat_dummy &lt;- varhandle::to.dummy(cats$frailty_index, "frail_ind")
#Converts the frailty index column to dummy encoding and sets a column called "frail_ind" prefix
cat_dummy &lt;- cat_dummy %&gt;%
 as.data.frame() %&gt;%
 dplyr::select(-frail_ind.No_index_item) #Drop the field of interest
long_stayers &lt;- long_stayers %&gt;%
 dplyr::select(-frailty_index) %&gt;%
 bind_cols(cat_dummy) %&gt;% na.omit(.)
# Split the data
split &lt;- rsample::initial_split(long_stayers, prop = 3/4)
train &lt;- rsample::training(split)
test &lt;- rsample::testing(split)
set.seed(123)
glm_class_mod &lt;- caret::train(factor(stranded.label) ~ ., data = train,
                             method = "glm")
print(glm_class_mod)
# Predict the probabilities
preds &lt;- predict(glm_class_mod, newdata = test) # Predict class
pred_prob &lt;- predict(glm_class_mod, newdata = test, type="prob") #Predict probs

predicted &lt;- data.frame(preds, pred_prob)
test &lt;- test %&gt;%
 bind_cols(predicted) %&gt;%
 dplyr::rename(pred_class=preds)
#Evaluate with ConfusionTableR
library(ConfusionTableR)
cm &lt;- ConfusionTableR::binary_class_cm(test$stranded.label, test$pred_class, positive="Stranded")
cm$record_level_cm
# Visualise odds ration
library(OddsPlotty)
plotty &lt;- OddsPlotty::odds_plot(glm_class_mod$finalModel,
                               title = "Odds Plot ",
                               subtitle = "Showing odds of patient stranded",
                               point_col = "#00f2ff",
                               error_bar_colour = "black",
                               point_size = .5,
                               error_bar_width = .8,
                               h_line_color = "red")
print(plotty)
</code></pre>

<hr>
<h2 id='PreDiabetes'>PreDiabetes dataset</h2><span id='topic+PreDiabetes'></span>

<h3>Description</h3>

<p>PreDiabetes dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PreDiabetes
</code></pre>


<h3>Format</h3>

<p>A data frame with 3059 rows and 9 variables:
</p>

<dl>
<dt>Age</dt><dd><p>age of the patient presenting with diabetes</p>
</dd>
<dt>Sex</dt><dd><p>sex of the patient with diabetes</p>
</dd>
<dt>IMD_Decile</dt><dd><p>Index of Multiple Deprivation Decile</p>
</dd>
<dt>BMI</dt><dd><p>Body Mass Index of patient</p>
</dd>
<dt>Age_PreDiabetes</dt><dd><p>age at pre diabetes diagnosis</p>
</dd>
<dt>HbA1C</dt><dd><p>average blood glucose mmol/mol</p>
</dd>
<dt>Time_Pre_To_Diabetes</dt><dd><p>time in years between pre-diabetes and diabetes diagnosis</p>
</dd>
<dt>Age_Diabetes</dt><dd><p>age at diabetes diagnosis</p>
</dd>
<dt>PreDiabetes_Checks_Before_Diabetes</dt><dd><p>number of pre-diabetes related primary care appointments before diabetes diagnosis</p>
</dd>
</dl>



<h3>Source</h3>

<p>Generated by Asif Laldin <a href="mailto:a.laldin@nhs.net">a.laldin@nhs.net</a>, Jan-2022
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
data(PreDiabetes)
# Convert diabetes data to factor'
diabetes_data &lt;- PreDiabetes %&gt;%
 glimpse()
</code></pre>

<hr>
<h2 id='stroke_classification'>Stroke Classification dataset</h2><span id='topic+stroke_classification'></span>

<h3>Description</h3>

<p>This dataset has been obtained from a Stoke department within the NHS and is a traditional supervised ML classification dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stroke_classification
</code></pre>


<h3>Format</h3>

<p>A data frame with 5110 rows and 11 variables:
</p>

<dl>
<dt>pat_id</dt><dd><p>unique patient identifier index</p>
</dd>
<dt>stroke</dt><dd><p>outcome variable as a flag - 1 for stroke and 0 for no stroke</p>
</dd>
<dt>gender</dt><dd><p>patient gender description</p>
</dd>
<dt>age</dt><dd><p>age of the patient</p>
</dd>
<dt>hypertension</dt><dd><p>binary flag to indicate whether patient has hypertension: <a href="https://www.nhs.uk/conditions/high-blood-pressure-hypertension/">https://www.nhs.uk/conditions/high-blood-pressure-hypertension/</a></p>
</dd>
<dt>heart_disease</dt><dd><p>binary flag to indicate whether patient has heart disease: 1 or no heart disease history: 0</p>
</dd>
<dt>work_related_stress</dt><dd><p>binary flag to indicate whether patient has history of work related stress</p>
</dd>
<dt>urban_residence</dt><dd><p>binary flag indicating whether patient lives in an urban area or not</p>
</dd>
<dt>avg_glucose_level</dt><dd><p>average blood glucose readings of the patient</p>
</dd>
<dt>bmi</dt><dd><p>body mass index of the patient: <a href="https://www.nhs.uk/live-well/healthy-weight/bmi-calculator/">https://www.nhs.uk/live-well/healthy-weight/bmi-calculator/</a></p>
</dd>
<dt>smokes</dt><dd><p>binary flag to indicate if the patient smokes - 1 for current smoker and 0 for smoking cessation</p>
</dd>
</dl>



<h3>Source</h3>

<p>Prepared and compiled by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Apr-2022.
</p>

<hr>
<h2 id='thyroid_disease'>Thyroid disease dataset</h2><span id='topic+thyroid_disease'></span>

<h3>Description</h3>

<p>The dataset is to be used with a supervised classification ML model to classify thyroid disease.
The dataset was sourced and adapted from the UCI Machine Learning repository <a href="https://archive.ics.uci.edu/ml/index.php">https://archive.ics.uci.edu/ml/index.php</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>thyroid_disease
</code></pre>


<h3>Format</h3>

<p>A data frame with 3772 rows and 28 variables:
</p>

<dl>
<dt>ThryroidClass</dt><dd><p>binary classification label indicating whether <strong>sick = 1</strong> or <strong>negative=0</strong></p>
</dd>
<dt>patient_age</dt><dd><p>age of the patient</p>
</dd>
<dt>patient_gender</dt><dd><p>flag indicating gender of patient - <strong>1=Female</strong> and <strong>0=Male</strong></p>
</dd>
<dt>presc_thyroxine</dt><dd><p>flag to indicate whether thyroxine replacement prescribed <strong>1=Thyroxine prescribed</strong></p>
</dd>
<dt>queried_why_on_thyroxine</dt><dd><p>flag to indicate query has been actioned</p>
</dd>
<dt>presc_anthyroid_meds</dt><dd><p>flag to indicate whether anti-thyroid medicine has been prescribed</p>
</dd>
<dt>sick</dt><dd><p>flag to indicate sickness due to thyroxine depletion or over activity</p>
</dd>
<dt>pregnant</dt><dd><p>flag to indicate whether the patient is pregnant</p>
</dd>
<dt>thyroid_surgery</dt><dd><p>flag to indicate whether the patient has had thyroid surgery</p>
</dd>
<dt>radioactive_iodine_therapyI131</dt><dd><p>indicates whether patient has had radioactive iodine treatment: <a href="https://www.nhs.uk/conditions/thyroid-cancer/treatment/">https://www.nhs.uk/conditions/thyroid-cancer/treatment/</a></p>
</dd>
<dt>query_hypothyroid</dt><dd><p>flag to indicate under active thyroid query <a href="https://www.nhs.uk/conditions/underactive-thyroid-hypothyroidism/">https://www.nhs.uk/conditions/underactive-thyroid-hypothyroidism/</a></p>
</dd>
<dt>query_hyperthyroid</dt><dd><p>flag to indicate over active thyroid query <a href="https://www.nhs.uk/conditions/overactive-thyroid-hyperthyroidism/">https://www.nhs.uk/conditions/overactive-thyroid-hyperthyroidism/</a></p>
</dd>
<dt>lithium</dt><dd><p>Lithium carbonate administered to decrease the level of thyroid hormones</p>
</dd>
<dt>goitre</dt><dd><p>flag to indicate swelling of the thyroid gland <a href="https://www.nhs.uk/conditions/goitre/">https://www.nhs.uk/conditions/goitre/</a></p>
</dd>
<dt>tumor</dt><dd><p>flag to indicate a tumor</p>
</dd>
<dt>hypopituitarism</dt><dd><p>flag to indicate a diagnosed under active thyroid</p>
</dd>
<dt>psych_condition</dt><dd><p>indicates whether a patient has a psychological condition</p>
</dd>
<dt>TSH_measured</dt><dd><p>a TSH level lower than normal indicates there is usually more than enough thyroid hormone in the body and may indicate hyperthyroidism</p>
</dd>
<dt>TSH_reading</dt><dd><p>the reading result of the TSH blood test</p>
</dd>
<dt>T3_measured</dt><dd><p>linked to TSH reading - when free triiodothyronine rise above normal this indicates hyperthyroidism</p>
</dd>
<dt>T3_reading</dt><dd><p>the reading result of the T3 blood test looking for above normal levels of free triiodothyronine</p>
</dd>
<dt>T4_measured</dt><dd><p>free thyroxine, also known as T4, is used with T3 and TSH tests to diagnose hyperthyroidism</p>
</dd>
<dt>T4_reading</dt><dd><p>the reading result of th T4 test</p>
</dd>
<dt>thyrox_util_rate_T4U_measured</dt><dd><p>flag indicating the thyroxine utilisation rate <a href="https://pubmed.ncbi.nlm.nih.gov/1685967/">https://pubmed.ncbi.nlm.nih.gov/1685967/</a></p>
</dd>
<dt>thyrox_util_rate_T4U_reading</dt><dd><p>the result of the test</p>
</dd>
<dt>FTI_measured</dt><dd><p>flag to indicate measurement on the Free Thyroxine Index (FTI)<a href="https://endocrinology.testcatalog.org/show/FRTUP">https://endocrinology.testcatalog.org/show/FRTUP</a></p>
</dd>
<dt>FTI_reading</dt><dd><p>the result of the test mentioned above</p>
</dd>
<dt>ref_src</dt><dd><p>[nominal] indicating the referral source of the patient</p>
</dd>
</dl>



<h3>Source</h3>

<p>Prepared and adatped by Gary Hutson <a href="mailto:hutsons-hacks@outlook.com">hutsons-hacks@outlook.com</a>, Dec-2021 and sourced from  Garavan Institute and J. Ross Quinlan.
</p>


<h3>References</h3>

<p>Thyroid disease records supplied by the Garavan Institute and J. Ross Quinlan.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
library(ConfusionTableR)
library(parsnip)
library(rsample)
library(recipes)
library(ranger)
library(workflows)
data("thyroid_disease")
td &lt;- thyroid_disease
# Create a factor of the class label to use in ML model
td$ThryroidClass &lt;- as.factor(td$ThryroidClass)
# Check the structure of the data to make sure factor has been created
str(td)
# Remove missing values, or choose more advaced imputation option
td &lt;- td[complete.cases(td),]
#Drop the column for referral source
td &lt;- td %&gt;%
 dplyr::select(-ref_src)
# Analyse class imbalance
class_imbalance &lt;- prop.table(table(td$ThryroidClass))
class_imbalance
#Divide the data into a training test split
set.seed(123)
split &lt;- rsample::initial_split(td, prop=3/4)
train_data &lt;- rsample::training(split)
test_data &lt;- rsample::testing(split)
# Create recipe to upsample and normalise
set.seed(123)
td_recipe &lt;-
 recipe(ThryroidClass ~ ., data=train_data) %&gt;%
  step_normalize(all_predictors()) %&gt;%
  step_zv(all_predictors())
# Instantiate the model
set.seed(123)
rf_mod &lt;-
  parsnip::rand_forest() %&gt;%
  set_engine("ranger") %&gt;%
  set_mode("classification")
# Create the model workflow
td_wf &lt;-
  workflow() %&gt;%
  workflows::add_model(rf_mod) %&gt;%
  workflows::add_recipe(td_recipe)
# Fit the workflow to our training data
set.seed(123)
td_rf_fit &lt;-
  td_wf %&gt;%
  fit(data = train_data)
# Extract the fitted data
td_fitted &lt;- td_rf_fit %&gt;%
   extract_fit_parsnip()
# Predict the test set on the training set to see model performance
class_pred &lt;- predict(td_rf_fit, test_data)
td_preds &lt;- test_data %&gt;%
bind_cols(class_pred)
# Convert both to factors
td_preds$.pred_class &lt;- as.factor(td_preds$.pred_class)
td_preds$ThryroidClass &lt;- as.factor(td_preds$ThryroidClass)
# Evaluate the data with ConfusionTableR
cm &lt;- ConfusionTableR::binary_class_cm(td_preds$ThryroidClass ,
                                       td_preds$.pred_class,
                                       positive="sick")
#View Confusion matrix
cm$confusion_matrix
#View record level
cm$record_level_cm
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
