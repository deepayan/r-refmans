<!DOCTYPE html><html><head><title>Help for package fastpos</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fastpos}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#create_pop'><p>Creates a population with a specified correlation.</p></a></li>
<li><a href='#fastpos-package'><p>fastpos: Finds the Critical Sequential Point of Stability for a Pearson Correlation</p></a></li>
<li><a href='#find_critical_pos'><p>Find the critical point of stability</p></a></li>
<li><a href='#simulate_pos'><p>Simulate several points of stability</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Finds the Critical Sequential Point of Stability for a Pearson
Correlation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-08-15</td>
</tr>
<tr>
<td>Description:</td>
<td>Finds the critical sample size ("critical point of stability") for a 
    correlation to stabilize in Schoenbrodt and Perugini's definition of 
    sequential stability (see &lt;<a href="https://doi.org/10.1016%2Fj.jrp.2013.05.009">doi:10.1016/j.jrp.2013.05.009</a>&gt;).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, plyr, MASS, lifecycle, tibble, stats, pbmcapply</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo, RcppProgress</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/johannes-titz/fastpos">https://github.com/johannes-titz/fastpos</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/johannes-titz/fastpos/issues">https://github.com/johannes-titz/fastpos/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 2.1.0), covr, microbenchmark</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-15 14:33:37 UTC; jt</td>
</tr>
<tr>
<td>Author:</td>
<td>Johannes Titz <a href="https://orcid.org/0000-0002-1102-5719"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Johannes Titz &lt;johannes.titz@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-15 18:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='create_pop'>Creates a population with a specified correlation.</h2><span id='topic+create_pop'></span>

<h3>Description</h3>

<p>The correlation will be exactly the one specified. The used method is
described here:
https://stats.stackexchange.com/questions/15011/generate-a-random-variable-with-a-defined-correlation-to-an-existing-variables/15040#15040
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_pop(rho, size)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_pop_+3A_rho">rho</code></td>
<td>
<p>Population correlation.</p>
</td></tr>
<tr><td><code id="create_pop_+3A_size">size</code></td>
<td>
<p>Population size.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Two-dimensional population matrix with a specific correlation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pop &lt;- create_pop(rho = 0.5, size = 1e6)
cor(pop)
</code></pre>

<hr>
<h2 id='fastpos-package'>fastpos: Finds the Critical Sequential Point of Stability for a Pearson Correlation</h2><span id='topic+fastpos'></span><span id='topic+fastpos-package'></span>

<h3>Description</h3>

<p>Finds the critical sample size (&quot;critical point of stability&quot;) for a correlation to stabilize in Schoenbrodt and Perugini's definition of sequential stability (see <a href="https://doi.org/10.1016/j.jrp.2013.05.009">doi:10.1016/j.jrp.2013.05.009</a>).
</p>


<h3>Details</h3>

<p>In most cases you will just need the function <code><a href="#topic+find_critical_pos">find_critical_pos()</a></code>
which will you give you the critical point of stability for your specific
parameters. If you are interested in more complicated analysis you might want
to look at the function <code><a href="#topic+simulate_pos">simulate_pos()</a></code>, which is a C++
functions to calculate correlations and return points of stability.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Johannes Titz <a href="mailto:johannes.titz@gmail.com">johannes.titz@gmail.com</a> (<a href="https://orcid.org/0000-0002-1102-5719">ORCID</a>) [copyright holder]
</p>


<h3>References</h3>

<p>Schönbrodt, F. D. &amp; Perugini, M. (2013). At what sample size do
correlations stabilize? <em>Journal of Research in Personality, 47</em>,
609-612. <a href="https://doi.org/10.1016/j.jrp.2013.05.009">doi:10.1016/j.jrp.2013.05.009</a>
</p>
<p>Schönbrodt, F. D. &amp; Perugini, M. (2018) Corrigendum to “At what sample size
do correlations stabilize?” [J. Res. Pers. 47 (2013) 609–612.
https://doi.org/10.1016/j.jrp.2013.05.009]. <em>Journal of Research in
Personality, 74</em>, 194. <a href="https://doi.org/10.1016/j.jrp.2018.02.010">doi:10.1016/j.jrp.2018.02.010</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/johannes-titz/fastpos">https://github.com/johannes-titz/fastpos</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/johannes-titz/fastpos/issues">https://github.com/johannes-titz/fastpos/issues</a>
</p>
</li></ul>


<hr>
<h2 id='find_critical_pos'>Find the critical point of stability</h2><span id='topic+find_critical_pos'></span>

<h3>Description</h3>

<p>Run simulations for one or several population correlations and return the
critical points of stability (POS). The critical point of stability is the
sample size at which a certain percentage of studies will fall into an a
priori specified interval and stay in this interval if the sample size is
increased further.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_critical_pos(
  rho,
  precision_absolute = 0.1,
  confidence_levels = c(0.8, 0.9, 0.95),
  sample_size_min = 20,
  sample_size_max = 1000,
  n_studies = 10000,
  n_cores = 1,
  pop_size = 1e+06,
  replace = TRUE,
  precision_relative = NA,
  lower_limit = NA,
  upper_limit = NA,
  progress = show_progress(),
  precision = lifecycle::deprecated(),
  precision_rel = lifecycle::deprecated(),
  rhos = lifecycle::deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find_critical_pos_+3A_rho">rho</code></td>
<td>
<p>Vector of population correlations (can also be a single correlation).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_precision_absolute">precision_absolute</code></td>
<td>
<p>Precision around the correlation which is acceptable
(defaults to 0.1). The precision will determine the corridor of stability which is
just rho+-precision. Can be a single value or a vector (different values for
different rhos).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_confidence_levels">confidence_levels</code></td>
<td>
<p>Confidence levels for point of stability. This corresponds
to the quantile of the distribution of all found critical sample sizes (defaults
to c(.8, .9, .95)). A single value can also be used. Note that this value is fixed
for all rhos! You cannot specify different levels for different rhos.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_sample_size_min">sample_size_min</code></td>
<td>
<p>Minimum sample size for each study (defaults to 20). A vector
can be used (different values for different rhos).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_sample_size_max">sample_size_max</code></td>
<td>
<p>Maximum sample size for each study (defaults to 1e3). A
vector can be used (different values for different rhos). If you get a warning
that the corridor of stability was not reached, you should increase this value.
But note that this will increase the time for the simulation.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_n_studies">n_studies</code></td>
<td>
<p>Number of studies to run for each rho (defaults to 1e4). A vector
can be used (different values for different rhos).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_n_cores">n_cores</code></td>
<td>
<p>Number of cores to use for simulation. Defaults to 1. Under
Windows only 1 core is supported because forking is used.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_pop_size">pop_size</code></td>
<td>
<p>Population size (defaults to 1e6). This is the size of the
population from which value pairs for correlations are drawn. This value should
usually not be decreased as it can lead to less accurate results.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_replace">replace</code></td>
<td>
<p>Whether drawing samples is with replacement or not. Default is TRUE,
which usually should not be changed. This parameter is mainly of interest for
researchers studying the method in more detail. A vector can be used (different
values for different rhos).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_precision_relative">precision_relative</code></td>
<td>
<p>Relative precision around the correlation
(rho+-rho*precision), if set, it will overwrite precision_absolute. A vector can
be used (different values for different rhos).</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_lower_limit">lower_limit</code></td>
<td>
<p>Lower limit of corridor, overrides precision parameters. A vector
can be used (different values for different rhos). If used, upper_limit must also
be set.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_upper_limit">upper_limit</code></td>
<td>
<p>Upper limit of corridor, overrides precision parameters. A vector
can be used (different values for different rhos). If used, lower_limit must also
be set.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_progress">progress</code></td>
<td>
<p>Should progress bar be displayed? Logical, default is to show
progress when run in interactive mode.</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_precision">precision</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>, use precision_absolute instead</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_precision_rel">precision_rel</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>, use precision_relative
instead</p>
</td></tr>
<tr><td><code id="find_critical_pos_+3A_rhos">rhos</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>, use rho instead</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing all the above information, as well as the critical
points of stability.
</p>
<p>The critical points of stability follow directly after the first column (rho)
and are named pos.confidence-level, e.g. pos.80, pos.90, pos.95 for the
default confidence levels.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>find_critical_pos(rho = 0.5, n_studies = 1e3)
find_critical_pos(rho = c(0.4, 0.5), n_studies = 1e3)
</code></pre>

<hr>
<h2 id='simulate_pos'>Simulate several points of stability</h2><span id='topic+simulate_pos'></span>

<h3>Description</h3>

<p>Runs several simulations and returns the points of stability, which can then
be further processed to calculate the critical point of stability. This
function should only be used if you need the specific points of stability.
For instance, if you want to study the method in more detail and the higher
level functions are not sufficient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_pos(
  x_pop,
  y_pop,
  n_studies,
  sample_size_min,
  sample_size_max,
  replace,
  lower_limit,
  upper_limit,
  progress
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_pos_+3A_x_pop">x_pop</code></td>
<td>
<p>First vector of population.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_y_pop">y_pop</code></td>
<td>
<p>Second vector of population.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_n_studies">n_studies</code></td>
<td>
<p>How many studies to conduct.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_sample_size_min">sample_size_min</code></td>
<td>
<p>Minimum sample size to start in corridor of
stability.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_sample_size_max">sample_size_max</code></td>
<td>
<p>How many participants to draw at maximum.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_replace">replace</code></td>
<td>
<p>Whether drawing samples is with replacement or not.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_lower_limit">lower_limit</code></td>
<td>
<p>Lower limit of corridor of stability.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_upper_limit">upper_limit</code></td>
<td>
<p>Upper limit of corridor of stability.</p>
</td></tr>
<tr><td><code id="simulate_pos_+3A_progress">progress</code></td>
<td>
<p>Should progress bar be displayed? Boolean, default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you just want to calculate a quantile of the distribution, use the main
function of the package <code><a href="#topic+find_critical_pos">find_critical_pos()</a></code>).
</p>


<h3>Value</h3>

<p>Vector of sample sizes at which corridor of stability was reached.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set up a population
pop &lt;- fastpos::create_pop(rho = 0.5, size = 1e6)
# create a distribution of points of stability
pos &lt;- simulate_pos(x_pop = pop[,1], y_pop = pop[,2], n_studies = 100,
                    sample_size_min = 20, sample_size_max = 1e3,
                    replace = TRUE, lower_limit = 0.4, upper_limit = 0.6,
                    progress = TRUE)
# calculate quantiles or any other parameter of the distribution
quantile(pos, c(.8, .9, .95))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
