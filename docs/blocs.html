<!DOCTYPE html><html><head><title>Help for package blocs</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {blocs}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#anes'><p>Sample of 2020 ANES cumulative data file</p></a></li>
<li><a href='#check_vbdf'><p>Validator for class vbdf</p></a></li>
<li><a href='#estimate_density'><p>Estimate density</p></a></li>
<li><a href='#new_vbdf'><p>Constructor for class vbdf</p></a></li>
<li><a href='#new_vbsum'><p>Constructor for vbdf summaries</p></a></li>
<li><a href='#vb_continuous'><p>Continuous voting bloc analysis</p></a></li>
<li><a href='#vb_difference'><p>Calculate differences in bloc contributions</p></a></li>
<li><a href='#vb_discrete'><p>Discrete voting bloc analysis</p></a></li>
<li><a href='#vb_plot'><p>Plot the summary of a voting bloc analysis</p></a></li>
<li><a href='#vb_summary'><p>Summarize uncertainty for a vbdf objects</p></a></li>
<li><a href='#vbdf'><p>Create a vbdf object</p></a></li>
<li><a href='#wtd_table'><p>Weighted frequency table or proportions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimate and Visualize Voting Blocs' Partisan Contributions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cole Tanigawa-Lau &lt;coletl@stanford.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions to combine data on voting blocs' 
    size, turnout, and vote choice to estimate each bloc's
    vote contributions to the Democratic and Republican parties.
    The package also includes functions for uncertainty estimation and
    plotting. Users may define voting blocs along a discrete or continuous variable.
    The package implements methods described in Grimmer, Marble, and Tanigawa-Lau (2023) &lt;<a href="https://doi.org/10.31235%2Fosf.io%2Fc9fkg">doi:10.31235/osf.io/c9fkg</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools (&ge; 2.4.3), questionr (&ge; 0.7.7), reldist (&ge;
1.7.0), testthat (&ge; 3.1.3)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>collapse (&ge; 1.7.6), dplyr (&ge; 1.0.6), ggplot2 (&ge; 3.2.0), ks
(&ge; 1.13.4), mgcv (&ge; 1.8.39), rlang (&ge; 1.0.0), tibble (&ge;
3.0.0)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-02 20:40:51 UTC; cole</td>
</tr>
<tr>
<td>Author:</td>
<td>Justin Grimmer [aut],
  Will Marble <a href="https://orcid.org/0000-0001-9352-5540"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Cole Tanigawa-Lau <a href="https://orcid.org/0000-0002-8656-571X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-02 21:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='anes'>Sample of 2020 ANES cumulative data file</h2><span id='topic+anes'></span>

<h3>Description</h3>

<p>Selected columns from the American National Election Studies' 2020 cumulative data file.
The final column is an example of the three-valued variable for voting behavior,
to be passed to the 'dv_vote3' argument,
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anes
</code></pre>


<h3>Format</h3>

<p>A data frame with 68,224 rows and 13 columns:
</p>

<dl>
<dt>year</dt><dd><p>election year</p>
</dd>
<dt>respid</dt><dd><p>respondent identifier</p>
</dd>
<dt>weight</dt><dd><p>survey weight</p>
</dd>
<dt>race</dt><dd><p>respondent race</p>
</dd>
<dt>gender</dt><dd><p>respondent gender</p>
</dd>
<dt>educ</dt><dd><p>respondent education level</p>
</dd>
<dt>age</dt><dd><p>respondent age</p>
</dd>
<dt>voted</dt><dd><p>respondent's voter turnout</p>
</dd>
<dt>vote_pres</dt><dd><p>respondent's presidential vote</p>
</dd>
<dt>vote_pres_dem</dt><dd><p>flag indicating Democratic presidential vote choice</p>
</dd>
<dt>vote_pres_rep</dt><dd><p>flag indicating Republican presidential vote choice</p>
</dd>
<dt>vote_pres3</dt><dd><p>Three-valued voting behavior DV coded as follows: -1 for Democrat vote choice, 0 for third-party vote, 1 for Republican vote choice, and NA for no vote.
</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://electionstudies.org/data-center/anes-time-series-cumulative-data-file/">https://electionstudies.org/data-center/anes-time-series-cumulative-data-file/</a>
</p>

<hr>
<h2 id='check_vbdf'>Validator for class vbdf</h2><span id='topic+check_vbdf'></span>

<h3>Description</h3>

<p>Validator for class vbdf
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_vbdf(x, tolerance = sqrt(.Machine$double.eps))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_vbdf_+3A_x">x</code></td>
<td>
<p>object to check</p>
</td></tr>
<tr><td><code id="check_vbdf_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance used when checking range of probability estimates</p>
</td></tr>
</table>

<hr>
<h2 id='estimate_density'>Estimate density</h2><span id='topic+estimate_density'></span>

<h3>Description</h3>

<p>Run <a href="ks.html#topic+kde">kde</a> for weighted density estimation
of a  <code>x</code> at <code>n_points</code>
evenly spaced points between <code>min</code> and max.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_density(x, min, max, n_points = 100, w = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate_density_+3A_x">x</code></td>
<td>
<p>numeric vector or matrix</p>
</td></tr>
<tr><td><code id="estimate_density_+3A_min">min</code></td>
<td>
<p>numeric vector giving the lower bound of evaluation points for each variable in <code>x</code></p>
</td></tr>
<tr><td><code id="estimate_density_+3A_max">max</code></td>
<td>
<p>numeric vector giving the upper bound of evaluation points for each variable in <code>x</code></p>
</td></tr>
<tr><td><code id="estimate_density_+3A_n_points">n_points</code></td>
<td>
<p>number of evaluation points (estimates)</p>
</td></tr>
<tr><td><code id="estimate_density_+3A_w">w</code></td>
<td>
<p>vector of weights. Default uses uniform weighting.</p>
</td></tr>
<tr><td><code id="estimate_density_+3A_...">...</code></td>
<td>
<p>further arguments to pass to <a href="ks.html#topic+kde">kde</a></p>
</td></tr>
</table>

<hr>
<h2 id='new_vbdf'>Constructor for class vbdf</h2><span id='topic+new_vbdf'></span>

<h3>Description</h3>

<p>Constructor for class vbdf
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_vbdf(x, bloc_var = character(), var_type = c("discrete", "continuous"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_vbdf_+3A_x">x</code></td>
<td>
<p>a data.frame</p>
</td></tr>
<tr><td><code id="new_vbdf_+3A_bloc_var">bloc_var</code></td>
<td>
<p>character vector naming the variables to define voting blocs</p>
</td></tr>
<tr><td><code id="new_vbdf_+3A_var_type">var_type</code></td>
<td>
<p>string, the type, discrete or continuous</p>
</td></tr>
</table>

<hr>
<h2 id='new_vbsum'>Constructor for vbdf summaries</h2><span id='topic+new_vbsum'></span>

<h3>Description</h3>

<p>Constructor for vbdf summaries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_vbsum(x, bloc_var, var_type, summary_type, resamples)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_vbsum_+3A_x">x</code></td>
<td>
<p>data.frame of uncertainty summary</p>
</td></tr>
<tr><td><code id="new_vbsum_+3A_bloc_var">bloc_var</code></td>
<td>
<p>string, the name of the variable that defines the voting blocs</p>
</td></tr>
<tr><td><code id="new_vbsum_+3A_var_type">var_type</code></td>
<td>
<p>string, the type of variable, discrete or continuous</p>
</td></tr>
<tr><td><code id="new_vbsum_+3A_summary_type">summary_type</code></td>
<td>
<p>string, the type of variable, discrete or continuous</p>
</td></tr>
<tr><td><code id="new_vbsum_+3A_resamples">resamples</code></td>
<td>
<p>numeric, the number of bootstrap resamples</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>vbsum</code> object
</p>

<hr>
<h2 id='vb_continuous'>Continuous voting bloc analysis</h2><span id='topic+vb_continuous'></span>

<h3>Description</h3>

<p>Define voting blocs along a <strong>continuous</strong> variable and estimate their
partisan vote contributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vb_continuous(
  data,
  data_density = data,
  data_turnout = data,
  data_vote = data,
  indep,
  dv_vote3,
  dv_turnout,
  weight = NULL,
  min_val = NULL,
  max_val = NULL,
  n_points = 100,
  boot_iters = FALSE,
  verbose = FALSE,
  tolerance = sqrt(.Machine$double.eps),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vb_continuous_+3A_data">data</code></td>
<td>
<p>default data.frame to use as the source for
density, turnout, and vote choice data.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_data_density">data_density</code></td>
<td>
<p>data.frame of blocs' composition/density data. Must
include any columns named by <code>indep</code> and <code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_data_turnout">data_turnout</code></td>
<td>
<p>data.frame of blocs' turnout data. Must include any
columns named by <code>dv_turnout</code>, <code>indep</code> and
<code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_data_vote">data_vote</code></td>
<td>
<p>data.frame of blocs' vote choice data. Must include any
columns named by <code>dv_vote3</code>, <code>indep</code>, and <code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_indep">indep</code></td>
<td>
<p>string, column name of the independent variable defining
discrete voting blocs.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_dv_vote3">dv_vote3</code></td>
<td>
<p>string, column name of the dependent variable in <code>data_vote</code>, coded as
follows: -1 for Democrat vote choice, 0 for third-party vote, 1 for
Republican vote choice, and NA for no vote.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_dv_turnout">dv_turnout</code></td>
<td>
<p>string, column name of the dependent variable flagging
voter turnout in <code>data_turnout</code>. That column must be coded 0 =  no vote, 1 = voted.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_weight">weight</code></td>
<td>
<p>optional string naming the column of sample weights.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_min_val">min_val</code></td>
<td>
<p>numeric vector of the same length as <code>indep</code>, Lower bound for the density estimation of each respective <code>indep</code>. See
[estimate_density].</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_max_val">max_val</code></td>
<td>
<p>numeric vector of the same length as <code>indep</code>, Upper bound for the density estimation of each respective <code>indep</code>. See
[estimate_density].</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_n_points">n_points</code></td>
<td>
<p>scalar, number of points at which to estimate density. See
[estimate_density].</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_boot_iters">boot_iters</code></td>
<td>
<p>integer, number of bootstrap iterations for uncertainty
estimation. The default <code>FALSE</code> is equivalent to 0 and does not estimate
uncertainty.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_verbose">verbose</code></td>
<td>
<p>logical, whether to print iteration number.</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance used when checking range of probability estimates</p>
</td></tr>
<tr><td><code id="vb_continuous_+3A_...">...</code></td>
<td>
<p>further arguments to pass to <a href="ks.html#topic+kde">kde</a> for density estimation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>vbdf</code> data.frame with columns for the resample, bloc variable,
and, for each resample-bloc combination, four estimates:
probability density, turnout, Republican vote choice conditional on turnout,
and net Republican votes.
</p>

<hr>
<h2 id='vb_difference'>Calculate differences in bloc contributions</h2><span id='topic+vb_difference'></span>

<h3>Description</h3>

<p>Use vbdf output to calculate differences
in blocs' net Republican vote contributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vb_difference(
  vbdf,
  estimates = grep("prob|pr_turnout|pr_votedem|pr_voterep|cond_rep|net_rep",
    names(vbdf), value = TRUE),
  sort_col = "year",
  tolerance = sqrt(.Machine$double.eps)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vb_difference_+3A_vbdf">vbdf</code></td>
<td>
<p>data.frame holding the results of voting bloc analyses.</p>
</td></tr>
<tr><td><code id="vb_difference_+3A_estimates">estimates</code></td>
<td>
<p>character vector naming the column(s) in <code>vbdf</code> with
which to compute differences.</p>
</td></tr>
<tr><td><code id="vb_difference_+3A_sort_col">sort_col</code></td>
<td>
<p>character vector naming the column(s) in <code>vbdf</code> to use
for sorting before calling <a href="base.html#topic+diff">diff</a>.</p>
</td></tr>
<tr><td><code id="vb_difference_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance used when checking range of probability estimates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>vbdf</code> object, plus two types of columns:
for each column named in <code>estimates</code>, a column named <code>diff_*</code> containing the
difference in each estimate across <code>sort_col</code> values,
<code>comp</code>, which contains a string tag for the rows compared (e.g., 2020-2016),
</p>
<p>A <code>vbdf</code> object.
</p>

<hr>
<h2 id='vb_discrete'>Discrete voting bloc analysis</h2><span id='topic+vb_discrete'></span>

<h3>Description</h3>

<p>Define voting blocs along a <strong>discrete</strong> variable and estimate their partisan
vote contributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vb_discrete(
  data,
  data_density = data,
  data_turnout = data,
  data_vote = data,
  indep,
  dv_vote3,
  dv_turnout,
  weight = NULL,
  boot_iters = FALSE,
  verbose = FALSE,
  check_discrete = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vb_discrete_+3A_data">data</code></td>
<td>
<p>default data.frame to use as the source for
density, turnout, and vote choice data.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_data_density">data_density</code></td>
<td>
<p>data.frame of blocs' composition/density data. Must
include any columns named by <code>indep</code> and <code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_data_turnout">data_turnout</code></td>
<td>
<p>data.frame of blocs' turnout data. Must include any
columns named by <code>dv_turnout</code>, <code>indep</code> and
<code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_data_vote">data_vote</code></td>
<td>
<p>data.frame of blocs' vote choice data. Must include any
columns named by <code>dv_vote3</code>, <code>indep</code>, and <code>weight</code>.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_indep">indep</code></td>
<td>
<p>string, column name of the independent variable defining
discrete voting blocs.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_dv_vote3">dv_vote3</code></td>
<td>
<p>string, column name of the dependent variable in <code>data_vote</code>, coded as
follows: -1 for Democrat vote choice, 0 for third-party vote, 1 for
Republican vote choice, and NA for no vote.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_dv_turnout">dv_turnout</code></td>
<td>
<p>string, column name of the dependent variable flagging
voter turnout in <code>data_turnout</code>. That column must be coded 0 =  no vote, 1 = voted.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_weight">weight</code></td>
<td>
<p>optional string naming the column of sample weights.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_boot_iters">boot_iters</code></td>
<td>
<p>integer, number of bootstrap iterations for uncertainty
estimation. The default <code>FALSE</code> is equivalent to 0 and does not estimate
uncertainty.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_verbose">verbose</code></td>
<td>
<p>logical, whether to print iteration number.</p>
</td></tr>
<tr><td><code id="vb_discrete_+3A_check_discrete">check_discrete</code></td>
<td>
<p>logical, whether to check if <code>indep</code> is a discrete variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>vbdf</code> object.
</p>

<hr>
<h2 id='vb_plot'>Plot the summary of a voting bloc analysis</h2><span id='topic+vb_plot'></span>

<h3>Description</h3>

<p>Plot the summary of a voting bloc analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vb_plot(
  data,
  x_col = get_bloc_var(data),
  y_col,
  ymin_col,
  ymax_col,
  discrete = length(unique(data[[x_col]])) &lt; 20
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vb_plot_+3A_data">data</code></td>
<td>
<p>a <code>vbsum</code> data.frame, the result of [vb_summary].</p>
</td></tr>
<tr><td><code id="vb_plot_+3A_x_col">x_col</code></td>
<td>
<p>string naming the column that defines voting blocs.</p>
</td></tr>
<tr><td><code id="vb_plot_+3A_y_col">y_col</code></td>
<td>
<p>string naming the column of point estimates.</p>
</td></tr>
<tr><td><code id="vb_plot_+3A_ymin_col">ymin_col</code></td>
<td>
<p>string naming the column to plot as the lower bound of the confidence interval.</p>
</td></tr>
<tr><td><code id="vb_plot_+3A_ymax_col">ymax_col</code></td>
<td>
<p>string naming the column to plot as the upper bound of the confidence interval.</p>
</td></tr>
<tr><td><code id="vb_plot_+3A_discrete">discrete</code></td>
<td>
<p>logical indicating whether voting blocs are defined along a discrete (not continuous) variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>

<hr>
<h2 id='vb_summary'>Summarize uncertainty for a vbdf objects</h2><span id='topic+vb_summary'></span><span id='topic+vb_uncertainty'></span>

<h3>Description</h3>

<p>Summarize uncertainty for a vbdf objects. Analysis must have run with bootstrap iterations.
<code>vb_uncertainty</code> is just an alias for <code>vb_summary</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vb_summary(
  object,
  type = c("discrete", "continuous", "binned"),
  estimates = grep("prob|pr_turnout|pr_votedem|pr_voterep|cond_rep|net_rep",
    names(object), value = TRUE),
  na.rm = FALSE,
  funcs = c("mean", "median", "low", "high"),
  low_ci = 0.025,
  high_ci = 0.975,
  bin_col,
  tolerance = sqrt(.Machine$double.eps)
)

vb_uncertainty(
  object,
  type = c("discrete", "continuous", "binned"),
  estimates = grep("prob|pr_turnout|pr_votedem|pr_voterep|cond_rep|net_rep",
    names(object), value = TRUE),
  na.rm = FALSE,
  funcs = c("mean", "median", "low", "high"),
  low_ci = 0.025,
  high_ci = 0.975,
  bin_col,
  tolerance = sqrt(.Machine$double.eps)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vb_summary_+3A_object">object</code></td>
<td>
<p>a <code>vbdf</code> object, usually the output of [vb_discrete], [vb_continuous], or [vb_difference].</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_type">type</code></td>
<td>
<p>a string naming the type of independent variable summary. Use
<code>"binned"</code> when using the output of [vb_continuous] plus a binned version of the continuous bloc variable.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_estimates">estimates</code></td>
<td>
<p>character vector naming columns for which to calculate
uncertainty estimates.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_na.rm">na.rm</code></td>
<td>
<p>logical indicating whether to remove <code>NA</code> values in
<code>estimates</code>.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_funcs">funcs</code></td>
<td>
<p>character vector of summary functions to apply to
<code>estimates</code>. Alternatively, supply your own list of functions, which
should accept a numeric vector input and return a scalar.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_low_ci">low_ci</code></td>
<td>
<p>numeric. If you include the string <code>"low"</code> in <code>funcs</code>, then use this argument to control the lower bound of the confidence interval.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_high_ci">high_ci</code></td>
<td>
<p>numeric. If you include the string <code>"high"</code> in <code>funcs</code>, then use this argument to control the upper bound of the confidence interval.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_bin_col">bin_col</code></td>
<td>
<p>character vector naming the column(s) that define the bins. Used only when  <code>type</code> is <code>"binned"</code>.</p>
</td></tr>
<tr><td><code id="vb_summary_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance used when checking range of probability estimates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary object with additional columns for each combination
of <code>estimates</code> and <code>funcs</code>.
</p>

<hr>
<h2 id='vbdf'>Create a vbdf object</h2><span id='topic+vbdf'></span>

<h3>Description</h3>

<p>Create a vbdf object holding bloc-level estimates of composition, turnout,
and/or vote choice. This function is mostly for internal use, but you may
want it to create a <code>vbdf</code> object from your own voting bloc analysis.
A valid <code>vbdf</code> object can be used in [vb_difference] and [vb_plot].
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vbdf(
  data,
  bloc_var,
  var_type = c("discrete", "continuous"),
  tolerance = sqrt(.Machine$double.eps)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vbdf_+3A_data">data</code></td>
<td>
<p>data.frame of voting-bloc results to convert to a <code>vbdf</code> object</p>
</td></tr>
<tr><td><code id="vbdf_+3A_bloc_var">bloc_var</code></td>
<td>
<p>string, the name of the variable that defines the voting blocs</p>
</td></tr>
<tr><td><code id="vbdf_+3A_var_type">var_type</code></td>
<td>
<p>string, the type of variable, discrete or continuous</p>
</td></tr>
<tr><td><code id="vbdf_+3A_tolerance">tolerance</code></td>
<td>
<p>tolerance used when checking range of probability estimates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>vbdf</code> object.
</p>

<hr>
<h2 id='wtd_table'>Weighted frequency table or proportions</h2><span id='topic+wtd_table'></span>

<h3>Description</h3>

<p>Weighted frequency table or proportions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtd_table(
  ...,
  weight = NULL,
  na.rm = FALSE,
  prop = FALSE,
  return_tibble = FALSE,
  normwt = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wtd_table_+3A_...">...</code></td>
<td>
<p>vectors of class factor or character, or a list/data.frame of such vectors.</p>
</td></tr>
<tr><td><code id="wtd_table_+3A_weight">weight</code></td>
<td>
<p>optional vector of weights. The default uses uniform weights of 1.</p>
</td></tr>
<tr><td><code id="wtd_table_+3A_na.rm">na.rm</code></td>
<td>
<p>logical, whether to remove NA values.</p>
</td></tr>
<tr><td><code id="wtd_table_+3A_prop">prop</code></td>
<td>
<p>logical, whether to return proportions or counts. Default returns counts.</p>
</td></tr>
<tr><td><code id="wtd_table_+3A_return_tibble">return_tibble</code></td>
<td>
<p>logical, whether to return a tibble or named vector.</p>
</td></tr>
<tr><td><code id="wtd_table_+3A_normwt">normwt</code></td>
<td>
<p>logical, whether to normalize weights such that they sum to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector or tibble of counts or proportions by group
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
