<!DOCTYPE html><html><head><title>Help for package TransModel</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TransModel}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#PH_examp'><p>Data example for proportional hazard model.</p></a></li>
<li><a href='#plot.predict.TransModel'>
<p>Plot the predicted survival curve with confidence interval/band.</p></a></li>
<li><a href='#PO_examp'><p>Data example for proportional odds model.</p></a></li>
<li><a href='#predict.TransModel'>
<p>Predict survival probabilities with confidence intervals and confidence bands</p></a></li>
<li><a href='#print.summary.TransModel'>
<p>Print method for the summary output of TransModel.</p></a></li>
<li><a href='#print.TransModel'>
<p>Print method for the function TransModel.</p></a></li>
<li><a href='#summary.TransModel'>
<p>Summary results for fitting the linear transformation model</p></a></li>
<li><a href='#TransModel'>
<p>Main function for fitting the linear transformation models for right censored data</p></a></li>
<li><a href='#TransModel-package'>
<p>Fit Linear Transformation Models for Right Censored Data</p></a></li>
<li><a href='#TransModel.default'>
<p>Default method for function TransModel.</p></a></li>
<li><a href='#veteran'><p>Veterans Administration Lung Cancer study</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fit Linear Transformation Models for Right Censored Data</td>
</tr>
<tr>
<td>Version:</td>
<td>2.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-02-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Jie Zhou, Jiajia Zhang, Wenbin Lu</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jie Zhou &lt;zhoujie02569@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A unified estimation procedure for the analysis of right censored data using linear transformation models. An introduction can be found in Jie Zhou et al. (2022) &lt;<a href="https://doi.org/10.18637%2Fjss.v101.i09">doi:10.18637/jss.v101.i09</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>stats,graphics,survival,MASS</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-03 15:11:47 UTC; 18032</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-03 15:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='PH_examp'>Data example for proportional hazard model.</h2><span id='topic+PH_examp'></span>

<h3>Description</h3>

<p>This data set is randomly generated from the proportional hazards transformation model as an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(PH_examp)</code></pre>


<h3>Format</h3>

<p>A data frame containing survival time, right censoring indicator, predictors gender and age, and a trivial variable called error.</p>

<hr>
<h2 id='plot.predict.TransModel'>
Plot the predicted survival curve with confidence interval/band.
</h2><span id='topic+plot.predict.TransModel'></span>

<h3>Description</h3>

<p>Survival curve with confidence interval or confidence band will be plotted for the returned object from predict.TransModel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'predict.TransModel'
plot(x, CI = FALSE, CB = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.predict.TransModel_+3A_x">x</code></td>
<td>

<p>An object from the function predict.TransModel.
</p>
</td></tr>
<tr><td><code id="plot.predict.TransModel_+3A_ci">CI</code></td>
<td>

<p>Whether a 100(1-alpha)% pointwise confidence interval will be added to the survival curve.
</p>
</td></tr>
<tr><td><code id="plot.predict.TransModel_+3A_cb">CB</code></td>
<td>

<p>Whether a 100(1-alpha)% confidence band will be added to the survival curve.
</p>
</td></tr>
<tr><td><code id="plot.predict.TransModel_+3A_...">...</code></td>
<td>

<p>Other plot arguments.
</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Either CI or CB is set to be TRUE in this plot method, the object from predict.TransModel needs to have the
argument CICB.st to be TRUE as well. Otherwise, no confidence interval or band will be added to the plot.
</p>

<hr>
<h2 id='PO_examp'>Data example for proportional odds model.</h2><span id='topic+PO_examp'></span>

<h3>Description</h3>

<p>This data set is randomly generated from the proportional odds transformation model as an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(PO_examp)</code></pre>


<h3>Format</h3>

<p>A data frame containing survival time, right censoring indicator, predictors gender and age, and a trivial variable called error.</p>

<hr>
<h2 id='predict.TransModel'>
Predict survival probabilities with confidence intervals and confidence bands
</h2><span id='topic+predict.TransModel'></span>

<h3>Description</h3>

<p>Calculate survival probabilities, confidence intervals and confidence bands in the estimated 
transformation model. If new time points is not specified, event times in the original data set 
will be used. If no new covariate values are specified, zeros will be used and the baseline 
survival probabilities will be calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TransModel'
predict(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.TransModel_+3A_object">object</code></td>
<td>

<p>An object returned from the function TransModel.
</p>
</td></tr>
<tr><td><code id="predict.TransModel_+3A_...">...</code></td>
<td>

<p>Other arguments including:
</p>
<p>newdata: a vector containing the values for each covariate variables specified in the model. If not specified, 0 will be used for all variables.
</p>
<p>new.time: vector of ordered time points to be used for survival probability calculation. If null, distinct event time points
in the original dataset will be used.
</p>
<p>alpha: used to determine the confidence level of the predicted confidence interval/band for the survival curve. 
The default value is 0.05, corresponding to a 95% confidence level.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>time</code></td>
<td>
<p>ordered time points on which survival probabilities are calculated.</p>
</td></tr>
<tr><td><code>survival</code></td>
<td>
<p>predicted survival probabilities.</p>
</td></tr>
<tr><td><code>low.ci</code></td>
<td>
<p>the lower limit of confidence interval.</p>
</td></tr>
<tr><td><code>up.ci</code></td>
<td>
<p>the upper limit of confidence interval.</p>
</td></tr>
<tr><td><code>low.cb</code></td>
<td>
<p>the lower limit of confidence band. </p>
</td></tr>
<tr><td><code>up.cb</code></td>
<td>
<p>the upper limit of confidence band.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The values low.ci, up.ci, low.cb and up.cb will be returned only if CICB.st=TRUE in the original model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(PH_examp)
mod1&lt;-TransModel(formula=Surv(time,status)~gender+age,data=PH_examp,r=0)
# Predict survival probability
pred1&lt;-predict(mod1,newdata=c(0,1))
pred2&lt;-predict(mod1,newdata=c(1,1))
plot(pred1)
lines(pred2$time,pred2$survival,type="s",col=2)

### Not Run ###
# survival estimate with 95% pointwise CI and overall CB
# mod1&lt;-TransModel(formula=Surv(time,status)~gender+age,data=PH_examp,r=0,CICB.st=TRUE,num.sim=50)
# pred1&lt;-predict(mod1,newdata=c(0,1))
# plot(pred1,lty=1,col=1,CI=TRUE,CB=TRUE)
# Change the confidence level to 90%
# pred1&lt;-predict(mod1,newdata=c(0,1),alpha=0.1)
</code></pre>

<hr>
<h2 id='print.summary.TransModel'>
Print method for the summary output of TransModel.
</h2><span id='topic+print.summary.TransModel'></span>

<h3>Description</h3>

<p>A summary table with coefficient estimates, standard error and p-values will be printed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.TransModel'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.summary.TransModel_+3A_x">x</code></td>
<td>

<p>An object from the function summary.TransModel.
</p>
</td></tr>
<tr><td><code id="print.summary.TransModel_+3A_...">...</code></td>
<td>

<p>Other print arguments.
</p>
</td></tr>
</table>

<hr>
<h2 id='print.TransModel'>
Print method for the function TransModel.
</h2><span id='topic+print.TransModel'></span>

<h3>Description</h3>

<p>Estimated coefficients and covariance matrix will be printed for the fitted linear transformation model
from TransModel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TransModel'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.TransModel_+3A_x">x</code></td>
<td>

<p>An object from the function TransModel.
</p>
</td></tr>
<tr><td><code id="print.TransModel_+3A_...">...</code></td>
<td>

<p>Other auguments to be specified for the print function.
</p>
</td></tr>
</table>

<hr>
<h2 id='summary.TransModel'>
Summary results for fitting the linear transformation model
</h2><span id='topic+summary.TransModel'></span>

<h3>Description</h3>

<p>A summary table contains the coefficient estimates, standard errors, test statistics and p values in the linear
transformation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'TransModel'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.TransModel_+3A_object">object</code></td>
<td>

<p>An object returned from the function TransModel.
</p>
</td></tr>
<tr><td><code id="summary.TransModel_+3A_...">...</code></td>
<td>

<p>Other auguments to be specified for the summary function.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>coefficients</code></td>
<td>
<p>The summary table.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(veteran)
fit&lt;-TransModel(Surv(time,status)~karno+as.factor(celltype),data=veteran,r=0,subset=(prior==0))
summary(fit)

fit0&lt;-TransModel(Surv(time,status)~1,data=veteran,r=0,subset=(prior==0))  #the null model
summary(fit0)
</code></pre>

<hr>
<h2 id='TransModel'>
Main function for fitting the linear transformation models for right censored data
</h2><span id='topic+TransModel'></span>

<h3>Description</h3>

<p>This function is used to fit a linear transformation model, such as the proportional hazards model or 
proportional odds model, to the right censored survival data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TransModel(formula = formula(data), data = parent.frame(), r, CICB.st, subset, 
dx, iter.max, num.sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TransModel_+3A_formula">formula</code></td>
<td>

<p>A survival formula based on the Surv() function, containg survival time, right censoring indicator and coavariates.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_data">data</code></td>
<td>

<p>Data set with all the variables needed in formula.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_r">r</code></td>
<td>

<p>Parameter in the hazard function, used to define different linear models. See details for more information.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_cicb.st">CICB.st</code></td>
<td>

<p>Whether or not the perturbation for deriving the confidence intervals and confidence bands of survival estimates will be done. The default value is FALSE.  
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_subset">subset</code></td>
<td>

<p>Conditions for subsetting the dataset.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_dx">dx</code></td>
<td>

<p>Convergence tolerance. Default is 0.001.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_iter.max">iter.max</code></td>
<td>

<p>Maximum number of iterations before convergence. Default is 100.
</p>
</td></tr>
<tr><td><code id="TransModel_+3A_num.sim">num.sim</code></td>
<td>

<p>The number of perturbation, only works when CICB.st=TRUE. Default is 200.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the linear transformation model H(t)=-b'z+e, the hazard function for error term e is defined as:
h(x)=exp(x)/(1+r*exp(x)), where the parameter r must be a non-negative value and can be changed for different models. For example, r=0 refers to the proportional hazards
model and r=1 refers to a proportional odds model. The default value for r is 0.
</p>


<h3>Value</h3>

<table>
<tr><td><code>coefficients</code></td>
<td>
<p>Estimated coefficients for covariates in the specified linear transformation model.</p>
</td></tr>
<tr><td><code>vcov</code></td>
<td>
<p>Estimated covariance matix for the coefficients.</p>
</td></tr>
<tr><td><code>converged</code></td>
<td>
<p>Convergence status, 0 indicates converged, and number of iterations used for convergence.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Kani Chen, et al., Semiparametric analysis of transformation models with censored data. Biometrika, 
89(3), 659-668, 2002.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>beta0 = c(1,-1)
# Fit proportional hazards model
data(PH_examp)
mod1&lt;-TransModel(formula=Surv(time,status)~gender+age,data=PH_examp,r=0)
print(mod1)
summary(mod1)
mod1$coefficients
mod1$vcov
mod1$converged

# Fit proportional odds model
data(PO_examp)
mod2=TransModel(Surv(time,status)~gender+age,data=PO_examp,r=1)
print(mod2)
summary(mod2)
</code></pre>

<hr>
<h2 id='TransModel-package'>
Fit Linear Transformation Models for Right Censored Data
</h2><span id='topic+TransModel-package'></span>

<h3>Description</h3>

<p>Semiparametric analysis for linear transformation model, such as the proportional hazards model and the proportional odds model, is fitted based on a unified method proposed in Chen(2002) for right censored survival data.
</p>


<h3>Details</h3>

<p>The main function TransModel gives estimates for coefficients and covariance matrix for the predictors in the linear transformation model. Print and summary method can be applied to the returned object.
</p>


<h3>Author(s)</h3>

<p>Jie Zhou, Jiajia Zhang, Wenbin Lu
</p>
<p>Maintainer: Jie Zhou &lt;zhoujie02569@gmail.com&gt;
</p>


<h3>References</h3>

<p>Kani Chen, et al., Semiparametric analysis of transformation models with censored data. Biometrika, 89(3), 659-668, 2002.
</p>
<p>Jie Zhou, Jiajia Zhang, Wenbin Lu. An R Package for Linear Transformation Model with Censored Data. <em>Journal of Statistical Software</em>, 101(1), 1-12, 2022. 
</p>

<hr>
<h2 id='TransModel.default'>
Default method for function TransModel.
</h2><span id='topic+TransModel.default'></span>

<h3>Description</h3>

<p>Default method for function TransModel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Default S3 method:
TransModel(formula = formula(data), data = parent.frame(),r=0,
CICB.st=FALSE,subset,dx=0.001,iter.max=100,num.sim=200)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="TransModel.default_+3A_formula">formula</code></td>
<td>

<p>A survival formula based on Surv function, containg survival time, right censoring indicator and coavariates.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_data">data</code></td>
<td>

<p>Data set with all the variables needed in formula.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_r">r</code></td>
<td>

<p>Parameter in the hazard function, used to define different transformation models. Must be a non-negative value. The default value is 0.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_cicb.st">CICB.st</code></td>
<td>

<p>Whether or not the perturbation for the confidence interval and confidence bands will be done. The default value is FALSE.  
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_subset">subset</code></td>
<td>

<p>Conditions for subsetting the dataset.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_dx">dx</code></td>
<td>

<p>Upbound of convergence limit. Default is 0.001.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_iter.max">iter.max</code></td>
<td>

<p>Maximum number of iterations before convergence. Default is 100.
</p>
</td></tr>
<tr><td><code id="TransModel.default_+3A_num.sim">num.sim</code></td>
<td>

<p>The number of perturbation, only works when CICB.st=TRUE. Default is 200.
</p>
</td></tr>
</table>

<hr>
<h2 id='veteran'>Veterans Administration Lung Cancer study</h2><span id='topic+veteran'></span>

<h3>Description</h3>

<p>Randomised trial of two treatment regimens for lung cancer. This is a standard survival analysis
data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(veteran)</code></pre>


<h3>Format</h3>

<p>trt: 1=standard 2=test
celltype: 1=squamous, 2=smallcell, 3=adeno, 4=large
time: survival time
status: censoring status
karno: Karnofsky performance score (100=good)
diagtime: months from diagnosis to randomisation
age: in years
prior: prior therapy 0=no, 1=yes
</p>


<h3>Source</h3>

<p>D Kalbfleisch and RL Prentice (1980), The Statistical Analysis of Failure Time Data. Wiley, New
York.</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
