<!DOCTYPE html><html lang="en"><head><title>Help for package topics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {topics}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dep_wor_data'><p>Example data about mental health descirptions</p>
.</a></li>
<li><a href='#topicsDtm'><p>Document Term Matrix</p></a></li>
<li><a href='#topicsDtmEval'><p>Summarize and Visualize your Document Term Matrix</p></a></li>
<li><a href='#topicsGrams'><p>N-grams</p></a></li>
<li><a href='#topicsModel'><p>Topic modelling</p></a></li>
<li><a href='#topicsPlot'><p>Plot word clouds</p></a></li>
<li><a href='#topicsPreds'><p>Predict topic distributions</p></a></li>
<li><a href='#topicsScatterLegend'><p>Plot a distribution plot</p></a></li>
<li><a href='#topicsTest'><p>Test topics or n-grams</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Creating and Significance Testing Language Features for
Visualisation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.50</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements differential language analysis with statistical tests and offers various language visualization techniques for n-grams and topics. It also supports the 'text' package. For more information, visit <a href="https://r-topics.org/">https://r-topics.org/</a> and <a href="https://www.r-text.org/">https://www.r-text.org/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://r-topics.org/">https://r-topics.org/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/theharmonylab/topics/issues">https://github.com/theharmonylab/topics/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Archs:</td>
<td>x64</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Python (&gt;= 3.6.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>BuildVignettes:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>textmineR, ggplot2, dplyr, mallet, rJava, ggwordcloud, tibble,
methods, readr, stopwords, Matrix, ngram, stringr, rlang,
tidyr, purrr, data.table</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>text, glmnet, knitr, rmarkdown, testthat, covr, vdiffr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.00)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-09 16:51:35 UTC; oscarkjell</td>
</tr>
<tr>
<td>Author:</td>
<td>Leon Ackermann <a href="https://orcid.org/0009-0008-8583-8748"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Zhuojun Gu <a href="https://orcid.org/0009-0000-1610-4830"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Oscar Kjell <a href="https://orcid.org/0000-0002-2728-6278"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Oscar Kjell &lt;oscar.kjell@psy.lu.se&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-10 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dep_wor_data'>Example data about mental health descirptions
.</h2><span id='topic+dep_wor_data'></span>

<h3>Description</h3>

<p>Example data about mental health descirptions
.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dep_wor_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 500 participants and 13 variables:
</p>

<dl>
<dt>Depselect</dt><dd><p>Words that respondents have selected from a pre-defined list</p>
</dd>
<dt>Worselect</dt><dd><p>Words that respondents have selected from a pre-defined list</p>
</dd>
<dt>Depword</dt><dd><p>Wrods where respondents describe their experience with depression in life</p>
</dd>
<dt>Worword</dt><dd><p>Words where respondents describe their experience with depression in life</p>
</dd>
<dt>Depphrase</dt><dd><p>phrases where respondents describe their experience with depression in life</p>
</dd>
<dt>Worphrase</dt><dd><p>Phrases where respondents describe their experience with anxiety in life</p>
</dd>
<dt>Deptext</dt><dd><p>Text where respondents describe their experience with depression in life</p>
</dd>
<dt>Wortext</dt><dd><p>Text where respondents describe their experience with anxiety in life</p>
</dd>
<dt>Gender</dt><dd><p>Respondents gender 0=male, 1=female</p>
</dd>
<dt>Age</dt><dd><p>respondents age in years</p>
</dd>
<dt>PHQ9tot</dt><dd><p>total score of the respondents PHQ-9</p>
</dd>
<dt>GAD7tot</dt><dd><p>total score of the respondents GAD-7</p>
</dd>
</dl>



<h3>Source</h3>

<p>&lt;https://osf.io/preprints/psyarxiv/p67db&gt;
</p>

<hr>
<h2 id='topicsDtm'>Document Term Matrix</h2><span id='topic+topicsDtm'></span>

<h3>Description</h3>

<p>This function creates a document term matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsDtm(
  data,
  ngram_window = c(1, 3),
  stopwords = stopwords::stopwords("en", source = "snowball"),
  removalword = "",
  pmi_threshold = NULL,
  occurance_rate = 0,
  removal_mode = "percentage",
  removal_rate_most = 0,
  removal_rate_least = 0,
  shuffle = TRUE,
  seed = 42L,
  threads = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsDtm_+3A_data">data</code></td>
<td>
<p>(list) A list containing the text data with each entry belonging to a unique id</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_ngram_window">ngram_window</code></td>
<td>
<p>(list) The minimum and maximum n-gram length, e.g., c(1,3)</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_stopwords">stopwords</code></td>
<td>
<p>(stopwords) The stopwords to remove, e.g., stopwords::stopwords(&quot;en&quot;, source = &quot;snowball&quot;)</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_removalword">removalword</code></td>
<td>
<p>(string) The word to remove</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_pmi_threshold">pmi_threshold</code></td>
<td>
<p>(integer; experimental) Pointwise Mutual Information (PMI) measures the association 
between terms by comparing their co-occurrence probability to their individual probabilities, 
highlighting term pairs that occur together more often than expected by chance; in this implementation,
terms with average PMI below the specified threshold (pmi_threshold) are removed from the document-term matrix.</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_occurance_rate">occurance_rate</code></td>
<td>
<p>(numerical) The occurance rate (0-1) removes words that occur less then in (occurance_rate)*(number of documents). Example: If the training dataset has 1000 documents and the occurrence rate is set to 0.05, the code will remove terms that appear in less than 49 documents.</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_removal_mode">removal_mode</code></td>
<td>
<p>(string) Mode of removal -&gt; one of c(&quot;none&quot;, &quot;frequency&quot;, &quot;term&quot;, &quot;percentage&quot;). frequency removes all words under a certain frequency or over a certain frequency, as indicated by removal_rate_least and removal_rate_most. term removes an absolute number of terms that are most frequent and least frequent. percentage removes the number of terms indicated by removal_rate_least and removal_rate_most relative to the number of terms in the matrix</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_removal_rate_most">removal_rate_most</code></td>
<td>
<p>(integer) The rate of most frequent words to be removed, functionality depends on removal_mode</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_removal_rate_least">removal_rate_least</code></td>
<td>
<p>(integer) The rate of least frequent words to be removed, functionality depends on removal_mode</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_shuffle">shuffle</code></td>
<td>
<p>(boolean) Shuffle the data before analyses</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_seed">seed</code></td>
<td>
<p>(integer) A seed to set for reproducibility</p>
</td></tr>
<tr><td><code id="topicsDtm_+3A_threads">threads</code></td>
<td>
<p>(integer) The number of threads to use; also called cpu in (CreateDtm).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The document term matrix
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Create a Dtm and remove the terms that occur less than 4 times and more than 500 times.

dtm &lt;- topicsDtm(data = dep_wor_data$Depphrase,
                 removal_mode = "frequency",
                 removal_rate_least = 4,
                 removal_rate_most = 500)

# Create Dtm and remove the 1 least and 1 most frequent terms.
dtm &lt;- topicsDtm(data = dep_wor_data$Depphrase,
                 removal_mode = "term",
                 removal_rate_least = 1,
                 removal_rate_most = 1)

# Create Dtm and remove the 1% least frequent and 1% most frequent terms. 
# The percentage values are scaled to values between 0 and 1.
dtm &lt;- topicsDtm(data = dep_wor_data$Depphrase,
                 removal_mode = "percentage",
                 removal_rate_least = 0.01,
                 removal_rate_most = 0.01)


</code></pre>

<hr>
<h2 id='topicsDtmEval'>Summarize and Visualize your Document Term Matrix</h2><span id='topic+topicsDtmEval'></span>

<h3>Description</h3>

<p>This function creates a frequency table of your DTM and generates up to four plots for visualization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsDtmEval(dtm)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsDtmEval_+3A_dtm">dtm</code></td>
<td>
<p>(R_obj) The document term matrix -&gt; output of topicsDtm function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing:
</p>

<dl>
<dt>dtm_summary</dt><dd><p>A dataframe of terms and their frequencies.</p>
</dd>
<dt>frequency_plot</dt><dd><p>A bar plot of all term frequencies with example terms.</p>
</dd>
<dt>frequency_plot_30_least</dt><dd><p>A bar plot of the 30 least frequent terms (if numer of terms &gt; 30).</p>
</dd>
<dt>frequency_plot_30_most</dt><dd><p>A bar plot of the 30 most frequent terms (if numer of terms &gt; 30).</p>
</dd>
<dt>histogram_of_frequencies</dt><dd><p>A histogram of term frequencies (this is the same information as
in the frequency_plot but presented differently).</p>
</dd>
</dl>


<hr>
<h2 id='topicsGrams'>N-grams</h2><span id='topic+topicsGrams'></span>

<h3>Description</h3>

<p>The function computes ngrams from a text
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsGrams(
  data,
  ngram_window = c(1, 3),
  stopwords = stopwords::stopwords("en", source = "snowball"),
  occurance_rate = 0,
  removal_mode = "frequency",
  removal_rate_most = NULL,
  removal_rate_least = NULL,
  pmi_threshold = 0,
  top_frequent = 200
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsGrams_+3A_data">data</code></td>
<td>
<p>(tibble) The data</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_ngram_window">ngram_window</code></td>
<td>
<p>(list) the minimum and maximum n-gram length, e.g. c(1,3)</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_stopwords">stopwords</code></td>
<td>
<p>(stopwords) the stopwords to remove, e.g. stopwords::stopwords(&quot;en&quot;, source = &quot;snowball&quot;)</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_occurance_rate">occurance_rate</code></td>
<td>
<p>(numerical) The occurance rate (0-1) removes words that occur less then in (occurance_rate)*(number of documents). Example: If the training dataset has 1000 documents and the occurrence rate is set to 0.05, the code will remove terms that appear in less than 50 documents.</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_removal_mode">removal_mode</code></td>
<td>
<p>(character) The mode of removal, either &quot;term&quot;, frequency&quot; or &quot;percentage&quot;</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_removal_rate_most">removal_rate_most</code></td>
<td>
<p>(numeric) The rate of most frequent ngrams to remove</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_removal_rate_least">removal_rate_least</code></td>
<td>
<p>(numeric) The rate of least frequent ngrams to remove</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_pmi_threshold">pmi_threshold</code></td>
<td>
<p>(integer) The pmi threshold, if it shall not be used set to 0</p>
</td></tr>
<tr><td><code id="topicsGrams_+3A_top_frequent">top_frequent</code></td>
<td>
<p>(integer) The number of most frequently occuring ngrams to included in the output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing tibble of the ngrams with the frequency and probability and 
a tibble containing the relative frequency of the ngrams for each user
</p>

<hr>
<h2 id='topicsModel'>Topic modelling</h2><span id='topic+topicsModel'></span>

<h3>Description</h3>

<p>The function to create and train and an LDA model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsModel(
  dtm,
  num_topics = 20,
  num_top_words = 10,
  num_iterations = 1000,
  seed = 42
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsModel_+3A_dtm">dtm</code></td>
<td>
<p>(R_obj) The document term matrix -&gt; output of topicsDtm function</p>
</td></tr>
<tr><td><code id="topicsModel_+3A_num_topics">num_topics</code></td>
<td>
<p>(integer) The number of topics to be created</p>
</td></tr>
<tr><td><code id="topicsModel_+3A_num_top_words">num_top_words</code></td>
<td>
<p>(integer) The number of top words to be displayed</p>
</td></tr>
<tr><td><code id="topicsModel_+3A_num_iterations">num_iterations</code></td>
<td>
<p>(integer) The number of iterations to run the model</p>
</td></tr>
<tr><td><code id="topicsModel_+3A_seed">seed</code></td>
<td>
<p>(integer) A seed to set for reproducibility</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing the following elements:
</p>

<dl>
<dt>name</dt><dd><p>Description</p>
</dd>
<dt>instances</dt><dd><p>Java object reference: A list of all documents used for topic modeling, 
in which each document is preprocessed (e.g., tokenized and vectorized). This object is part of 
the Mallet package's internal structure.</p>
</dd>
<dt>inferencer</dt><dd><p>Java object reference: This is the topic inferencer, which allows the inference 
of topic distributions for new, unseen documents based on the trained model.</p>
</dd>
<dt>top_terms_mallet</dt><dd><p>A data frame containing the top terms of each topic, showing which concepts
each topic likely represents. The number of top terms shown here can be adjusted with the argument
num_top_words.</p>
</dd>
<dt>top_terms</dt><dd><p>A data frame containing the top terms of each topic, showing which concepts each 
topic likely represents. The number of top terms shown here can be adjusted with the argument 
num_top_words.</p>
</dd>
<dt>phi</dt><dd><p>A matrix of the topic-word distribution: Each row represents a topic, and each column 
represents a word from the document term matrix. The values show the probability of a word given a 
topic P(word|topic).</p>
</dd>
<dt>topic_docs</dt><dd><p>A matrix of document-topic distribution: Each row represents a document, and each 
column represents a topic. The values show the probability of a topic given a document, P(topic|document).</p>
</dd>
<dt>frequencies</dt><dd><p>A data frame of term frequencies. word = every word in the document term matrix, 
word.freq = the frequency of each word across all documents, doc.freq = the number of documents in which each word appears.</p>
</dd>
<dt>vocabulary</dt><dd><p>A character vector of all unique terms in the document term matrix.</p>
</dd>
<dt>labels</dt><dd><p>A list of topic labels. These short labels are the most representative term for each topic, 
making it easy to identify and understand them.</p>
</dd>
<dt>theta</dt><dd><p>A data frame of document-topic probabilities: each row represents a document, and each column
represents a topic. Similar to topic_docs, this shows the contribution of each topic to each document. 
Each row sums to 1, representing the document’s composition of topics.</p>
</dd>
<dt>prevalence</dt><dd><p>A numeric vector showing the overall prevalence (prominence) of each topic in the corpus.
The prevalences are expressed as percentages relative to the other topics  and add up to 100
Higher values indicate topics that are present in more documents.</p>
</dd>
<dt>coherence</dt><dd><p>A numeric vector showing the coherence of each topic. Coherence scores indicate how
semantically consistent and interpretable the topics are. Higher coherence generally indicates 
better-quality topics.</p>
</dd>
<dt>pred_model</dt><dd><p>A list containing components of the predictive model, including phi
(word-topic probability matrix), theta (document-topic probabilities matrix), alpha (Dirichlet prior of topics), 
gamma (hyperparameters of word-topic assignments), and data (sparse matrix representing the document term matrix.)</p>
</dd>
<dt>dtm_settings</dt><dd><p>A list of settings used for preprocessing and building the document term matrix (dtm), 
including n-gram ranges, stopword removal, frequency thresholds, and random seed settings.</p>
</dd>
<dt>summary</dt><dd><p>A summary data frame comprising of the topic numbers, labels, coherence scores, prevalence scores, and top terms.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create LDA Topic Model 
save_dir_temp &lt;- tempfile()
dtm &lt;- topicsDtm(data = dep_wor_data$Depphrase)

model &lt;- topicsModel(
dtm = dtm, # output of topicsDtm()
num_topics = 20,
num_top_words = 10,
num_iterations = 1000,
seed = 42)

</code></pre>

<hr>
<h2 id='topicsPlot'>Plot word clouds</h2><span id='topic+topicsPlot'></span>

<h3>Description</h3>

<p>This function create word clouds and topic figures
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsPlot(
  model = NULL,
  ngrams = NULL,
  test = NULL,
  p_alpha = 0.05,
  p_adjust_method = "none",
  ngrams_max = 30,
  ngram_select = "prevalence",
  color_scheme = "default",
  highlight_topic_words = NULL,
  scale_size = FALSE,
  plot_topics_idx = NULL,
  allowed_word_overlap = NULL,
  plot_n_most_prevalent_topics = NULL,
  save_dir = NULL,
  figure_format = "svg",
  width = 6,
  height = 5,
  max_size = 10,
  seed = 42,
  scatter_legend_dot_size = c(3, 8),
  scatter_legend_bg_dot_size = c(1, 3),
  scatter_legend_dots_alpha = 0.8,
  scatter_legend_bg_dots_alpha = 0.2,
  scatter_legend_n = c(1, 1, 1, 1, 0, 1, 1, 1, 1),
  scatter_legend_method = c("mean"),
  scatter_legend_specified_topics = NULL,
  scatter_legend_topic_n = FALSE,
  scatter_show_axis_values = TRUE,
  grid_legend_title = "legend_title",
  grid_legend_title_size = 5,
  grid_legend_title_color = "black",
  grid_legend_x_axes_label = "legend_x_axes_label",
  grid_legend_y_axes_label = "legend_y_axes_label",
  grid_legend_number_color = "white",
  grid_legend_number_size = 15
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsPlot_+3A_model">model</code></td>
<td>
<p>(list) A trained topics model, e.g., from topicsModel(). Should be NULL if plotting ngrams.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_ngrams">ngrams</code></td>
<td>
<p>(list) The output from the the topicsGram() function. Should be NULL if plotting topics.
Note 1: it is not possible to plot tags like &lt;place&gt;; so the &lt; are replaced with underscore. 
Note 2: it is not possible to plot dash - alone, it is replaced with '_-_'.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_test">test</code></td>
<td>
<p>(list) The test results; if plotting according to dimension(s) include the object from topicsTest() function.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_p_alpha">p_alpha</code></td>
<td>
<p>(integer) The p-value threshold to use for significance testing.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_p_adjust_method">p_adjust_method</code></td>
<td>
<p>(character) Method to adjust/correct p-values for multiple comparisons (default = &quot;none&quot;; 
see also &quot;holm&quot;, &quot;hochberg&quot;, &quot;hommel&quot;, &quot;bonferroni&quot;, &quot;BH&quot;, &quot;BY&quot;, &quot;fdr&quot;).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_ngrams_max">ngrams_max</code></td>
<td>
<p>(integer) The maximum number of n-grams to plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_ngram_select">ngram_select</code></td>
<td>
<p>(character) Method to select ngrams_max, when using both ngram and test use &quot;prevalence&quot; or &quot;estimate&quot;; 
if you only use ngrams use &quot;pmi&quot;, &quot;frequency&quot;, or &quot;proportion&quot;.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_color_scheme">color_scheme</code></td>
<td>
<p>(string 'default' or vector) The color scheme.
</p>
<p>For plots not including a test, the color_scheme should in clude 2 colours (1 gradient pair), such as:
</p>
<p>c(&quot;lightgray&quot;, &quot;darkblue)
</p>
<p>For 1 dimensional plots of n-grams it should contain 4 colours (2 gradient pairs), such as: 
</p>
<p>c(
&quot;#EAEAEA&quot;, &quot;darkred&quot;, # negative ngrams colors
</p>
<p>&quot;#EAEAEA&quot;, &quot;darkgreen&quot; # positve ngrams colors)
</p>
<p>For 1-dimension plots of topics, it should contain 6 colours (3 gradient pairs), such as 
</p>
<p>c(
&quot;#EAEAEA&quot;, &quot;darkred&quot;,     # negative topics colors
</p>
<p>&quot;#EAEAEA&quot;, &quot;darkgray&quot;,     # colours of topics not significantly associated
</p>
<p>&quot;#EAEAEA&quot;, &quot;darkgreen&quot;     # positve topics colors)
</p>
<p>For 2-dimensional plots of topics, the color scheme should contain 18 colours (9 gradient pairs), such as:
</p>
<p>c(
&quot;lightgray&quot;, &quot;#398CF9&quot;,     # quadrant 1 (upper left corner)
</p>
<p>&quot;lightgray&quot;, &quot;#60A1F7&quot;,     # quadrant 2 
</p>
<p>&quot;lightgray&quot;, &quot;#5dc688&quot;,     # quadrant 3 (upper right corner)
</p>
<p>&quot;lightgray&quot;, &quot;#e07f6a&quot;,     # quadrant 4
</p>
<p>&quot;lightgray&quot;, &quot;darkgray&quot;,     # quadrant 5 (middle square)
</p>
<p>&quot;lightgray&quot;, &quot;#40DD52&quot;,     # quadrant 6 
</p>
<p>&quot;lightgray&quot;, &quot;#FF0000&quot;,     # quadrant 7 (bottom left corner)
</p>
<p>&quot;lightgray&quot;, &quot;#EA7467&quot;,     # quadrant 8 
</p>
<p>&quot;lightgray&quot;, &quot;#85DB8E&quot;)     # quadrant 9 (bottom right corner).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_highlight_topic_words">highlight_topic_words</code></td>
<td>
<p>(named vector) Words to highlight in topics (e.g., negative words). 
The values of the vector determine the color: highlight_topic_words = c(not = &quot;#2d00ff&quot;, never = &quot;#2d00ff&quot;); note that it needs
to be hexa codes, so color naming such as &quot;blue&quot; does not work. The default value is NULL.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scale_size">scale_size</code></td>
<td>
<p>(logical) Whether to scale the size of the words.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_plot_topics_idx">plot_topics_idx</code></td>
<td>
<p>(vector)  The index or indices of the topics to plot 
(look in the model-object for the indices). They can, for example, be c(1, 3:5) to plot topic t_1, t_3, t_4 and t_5) (optional).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_allowed_word_overlap">allowed_word_overlap</code></td>
<td>
<p>(numeric) A filter function determining the maximum number of identical words in the topics to be plotted. 
This filter removes topics within each &quot;color group&quot; and also include removing topics from the distribution and grid legends; 
(Note that the adjustment for multiple comparison is taking place before these are removed; i.e., the adjusted p-values are not affected by this filter).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_plot_n_most_prevalent_topics">plot_n_most_prevalent_topics</code></td>
<td>
<p>(numeric) Plots the n most prevalent topics in a given model.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_save_dir">save_dir</code></td>
<td>
<p>(string) The directory to save the plots.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_figure_format">figure_format</code></td>
<td>
<p>(string) Set the figure format, e.g., &quot;.svg&quot;, or &quot;.png&quot;.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_width">width</code></td>
<td>
<p>(integer) The width of the topic (units = &quot;in&quot;).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_height">height</code></td>
<td>
<p>(integer) The width of the topic (units = &quot;in&quot;).</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_max_size">max_size</code></td>
<td>
<p>(integer) The maximum size of the words.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_seed">seed</code></td>
<td>
<p>(integer) The seed to set for reproducibility.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_dot_size">scatter_legend_dot_size</code></td>
<td>
<p>(integer) The size of dots in the scatter legend. If set to &quot;prevalence&quot;, the size will change accordingly.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_bg_dot_size">scatter_legend_bg_dot_size</code></td>
<td>
<p>(integer) The size of background dots in the scatter legend.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_dots_alpha">scatter_legend_dots_alpha</code></td>
<td>
<p>(numeric) The transparency alphe level of the dots.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_bg_dots_alpha">scatter_legend_bg_dots_alpha</code></td>
<td>
<p>(numeric) The transparency alphe level of the background dots.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_n">scatter_legend_n</code></td>
<td>
<p>(numeric or vector) A vector determining the number of dots to emphasize in each quadrant of the scatter legend.
For example: c(1,1,1,1,0,1,1,1,1) result in one dot in each quadrant except for the middle quadrant.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_method">scatter_legend_method</code></td>
<td>
<p>(string) The method to filter topics to be emphasized in the scatter legend; either &quot;mean&quot;, &quot;max_x&quot;, or &quot;max_y&quot;.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_specified_topics">scatter_legend_specified_topics</code></td>
<td>
<p>(vector) Specify which topic(s) to emphasize in the scatter legend. 
For example, c(&quot;t_1&quot;, &quot;t_2&quot;). If set, scatter_legend_method will have no effect.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_legend_topic_n">scatter_legend_topic_n</code></td>
<td>
<p>(boolean) If TRUE, the topic numbers are shown in the scatter legend.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_scatter_show_axis_values">scatter_show_axis_values</code></td>
<td>
<p>(boolean) If TRUE, the estimate values are shown on the distribution plot axes.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_title">grid_legend_title</code></td>
<td>
<p>Title of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_title_size">grid_legend_title_size</code></td>
<td>
<p>Title size of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_title_color">grid_legend_title_color</code></td>
<td>
<p>Legend title color of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_x_axes_label">grid_legend_x_axes_label</code></td>
<td>
<p>x-axis label of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_y_axes_label">grid_legend_y_axes_label</code></td>
<td>
<p>y-axis label of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_number_color">grid_legend_number_color</code></td>
<td>
<p>Text color in the legend boxes of the grid topic plot.</p>
</td></tr>
<tr><td><code id="topicsPlot_+3A_grid_legend_number_size">grid_legend_number_size</code></td>
<td>
<p>Text size in the legend boxes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function provides a list of topic plots (if there are any significant topics), a legend plot, and a plot showing the topic distribution.
If save_dir is specified, it saves all plots in this directory. 
If you want to show all plots irrespective of the topics' significance, set p_alpha = 1.
</p>

<hr>
<h2 id='topicsPreds'>Predict topic distributions</h2><span id='topic+topicsPreds'></span>

<h3>Description</h3>

<p>The function to predict the topics of a new document with the trained model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsPreds(
  model,
  data,
  num_iterations = 200,
  sampling_interval = 10,
  burn_in = 10,
  seed = 42,
  create_new_dtm = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsPreds_+3A_model">model</code></td>
<td>
<p>(list) The trained model.</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_data">data</code></td>
<td>
<p>(tibble) The text variable for which you want to infer the topic distribution. This can be the same data as used to create the dtm or new data.</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_num_iterations">num_iterations</code></td>
<td>
<p>(integer) The number of iterations to run the model.</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_sampling_interval">sampling_interval</code></td>
<td>
<p>The number of iterations between consecutive samples collected.
during the Gibbs Sampling process. This technique, known as thinning, helps reduce the 
correlation between consecutive samples and improves the quality of the final estimates 
by ensuring they are more independent.
Purpose: By specifying a sampling_interval, you avoid collecting highly correlated samples, which can 
lead to more robust and accurate topic distributions.
Example: If sampling_interval = 10, the algorithm collects a 
sample every 10 iterations (e.g., at iteration 10, 20, 30, etc.).
Typical Values: Default: 10; Range: 5 to 50 (depending on the complexity and size of the data).</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_burn_in">burn_in</code></td>
<td>
<p>The number of initial iterations discarded during the Gibbs Sampling process. 
These early iterations may not be representative of the final sampling distribution because the model is still stabilizing.
Purpose: The burn_in period allows the model to converge to a more stable state before collecting samples, 
improving the quality of the inferred topic distributions.
Example: If burn_in = 50, the first 50 iterations of the Gibbs Sampling process are discarded,
and sampling begins afterward. Typical Values: Default: 50 to 100 
Range: 10 to 1000 (larger datasets or more complex models may require a longer burn-in period).</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_seed">seed</code></td>
<td>
<p>(integer) A seed to set for reproducibility.</p>
</td></tr>
<tr><td><code id="topicsPreds_+3A_create_new_dtm">create_new_dtm</code></td>
<td>
<p>(boolean) If applying the model on new data (not used in training), it can help to make a new dtm.
Currently this is experimental, and using the textmineR::CreateDtm() function rather than the topicsDtm() function, which has more functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of the predictions: The rows represent the documents, and the columns represent the topics. The values in the cells indicate the proportion of each topic within the corresponding document.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Predict topics for new data with the trained model

dtm &lt;- topicsDtm(
data = dep_wor_data$Depphrase)

model &lt;- topicsModel(dtm = dtm, # output of topicsDtm()
                     num_topics = 20,
                     num_top_words = 10,
                     num_iterations = 1000,
                     seed = 42)
                     
preds &lt;- topicsPreds(model = model, # output of topicsModel()
                     data = dep_wor_data$Depphrase)

</code></pre>

<hr>
<h2 id='topicsScatterLegend'>Plot a distribution plot</h2><span id='topic+topicsScatterLegend'></span>

<h3>Description</h3>

<p>Plot a distribution plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsScatterLegend(
  bivariate_color_codes,
  filtered_test,
  num_popout = 1,
  way_popout_topics = "mean",
  user_spec_topics = NULL,
  allow_topic_num_legend = FALSE,
  scatter_show_axis_values = TRUE,
  y_axes_1 = 2,
  cor_var = "",
  label_x_name = "x",
  label_y_name = "y",
  save_dir,
  figure_format = "svg",
  scatter_popout_dot_size = c(1, 5),
  scatter_bg_dot_size = c(1, 5),
  scatter_legend_dots_alpha = 0.8,
  scatter_legend_bg_dots_alpha = 0.2,
  width = 10,
  height = 8,
  seed = 42
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsScatterLegend_+3A_bivariate_color_codes">bivariate_color_codes</code></td>
<td>
<p>A vector of color codes specifying colors for 
different categories in the scatter plot. 
Default: c(&quot;#398CF9&quot;, &quot;#60A1F7&quot;, &quot;#5dc688&quot;, &quot;#e07f6a&quot;, &quot;#EAEAEA&quot;, &quot;#40DD52&quot;, &quot;#FF0000&quot;, &quot;#EA7467&quot;, &quot;#85DB8E&quot;).</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_filtered_test">filtered_test</code></td>
<td>
<p>A data frame containing the input data for the scatter plot. 
Must include columns like 'color_categories' and other variables used in the function.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_num_popout">num_popout</code></td>
<td>
<p>The number of topics to &quot;pop out&quot; in each category. Default: 1.
Can be a single integer (applies to all categories) or a vector for specific categories.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_way_popout_topics">way_popout_topics</code></td>
<td>
<p>The method for selecting pop-out topics. Options: &quot;mean&quot;, &quot;max_y&quot;, or &quot;max_x&quot;. Default: &quot;mean&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_user_spec_topics">user_spec_topics</code></td>
<td>
<p>A vector of user-specified topics to highlight in the scatter plot. Default: NULL.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_allow_topic_num_legend">allow_topic_num_legend</code></td>
<td>
<p>Logical; if TRUE, displays topic numbers in the legend. Default: FALSE.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_scatter_show_axis_values">scatter_show_axis_values</code></td>
<td>
<p>Show values on the axises.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_y_axes_1">y_axes_1</code></td>
<td>
<p>Specifies axis alignment for the scatter legend. Options: 1 (x-axis) or 2 (y-axis). Default: 2.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_cor_var">cor_var</code></td>
<td>
<p>A string used for naming the correlation variable in labels or file names. Default: &quot;&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_label_x_name">label_x_name</code></td>
<td>
<p>Label for the x-axis in the scatter plot. Default: &quot;x&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_label_y_name">label_y_name</code></td>
<td>
<p>Label for the y-axis in the scatter plot. Default: &quot;y&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_save_dir">save_dir</code></td>
<td>
<p>Directory where the scatter legend plot will be saved. Default: &quot;./results&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_figure_format">figure_format</code></td>
<td>
<p>File format for the saved scatter plot. Examples: &quot;svg&quot;, &quot;png&quot;, &quot;pdf&quot;. Default: &quot;svg&quot;.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_scatter_popout_dot_size">scatter_popout_dot_size</code></td>
<td>
<p>Size of the dots for pop-out topics in the scatter legend. Set to &quot;prevalence&quot; for dot size changing based on topic prevalence. Default: 15.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_scatter_bg_dot_size">scatter_bg_dot_size</code></td>
<td>
<p>Size of the dots for background topics in the scatter legend. Default: 9.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_scatter_legend_dots_alpha">scatter_legend_dots_alpha</code></td>
<td>
<p>The transparency of the dots</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_scatter_legend_bg_dots_alpha">scatter_legend_bg_dots_alpha</code></td>
<td>
<p>The transparency of the dots</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_width">width</code></td>
<td>
<p>Width of the saved scatter plot in inches. Default: 10.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_height">height</code></td>
<td>
<p>Height of the saved scatter plot in inches. Default: 8.</p>
</td></tr>
<tr><td><code id="topicsScatterLegend_+3A_seed">seed</code></td>
<td>
<p>Seed for reproducibility, ensuring consistent plot generation. Default: 42.</p>
</td></tr>
</table>

<hr>
<h2 id='topicsTest'>Test topics or n-grams</h2><span id='topic+topicsTest'></span>

<h3>Description</h3>

<p>Statistically test topics or n-grams in relation to one or two other variables using 
regression or t-test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topicsTest(
  data,
  model = NULL,
  preds = NULL,
  ngrams = NULL,
  x_variable = NULL,
  y_variable = NULL,
  controls = c(),
  test_method = "default",
  p_adjust_method = "fdr",
  seed = 42
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topicsTest_+3A_data">data</code></td>
<td>
<p>(tibble) The tibble containing the variables to be tested.</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_model">model</code></td>
<td>
<p>(list) A trained model LDA-model from the topicsModel() function.</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_preds">preds</code></td>
<td>
<p>(tibble) The predictions from the topicsPred() function.</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_ngrams">ngrams</code></td>
<td>
<p>(list) Output of the n-gram function.</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_x_variable">x_variable</code></td>
<td>
<p>(string) The x variable name to be predicted, and to be plotted (only needed for regression or correlation).</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_y_variable">y_variable</code></td>
<td>
<p>(string) The y variable name to be predicted, and to be plotted (only needed for regression or correlation).</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_controls">controls</code></td>
<td>
<p>(vector) The control variables (not supported yet).</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_test_method">test_method</code></td>
<td>
<p>(string) The test method to use. &quot;default&quot; checks if x_variable and y_variable
only contain 0s and 1s, for which it applies logistic regression; otherwise it applies linear regression. 
Alternatively, the user may manually specify either &quot;linear_regression&quot; or &quot;logistic_regression&quot;.</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_p_adjust_method">p_adjust_method</code></td>
<td>
<p>(character) Method to adjust/correct p-values for multiple comparisons
(default = &quot;fdr&quot;; see also &quot;holm&quot;, &quot;hochberg&quot;, &quot;hommel&quot;, &quot;bonferroni&quot;, &quot;BH&quot;, &quot;BY&quot;,  &quot;none&quot;).</p>
</td></tr>
<tr><td><code id="topicsTest_+3A_seed">seed</code></td>
<td>
<p>(integer) The seed to set for reproducibility</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the test results, test method, and prediction variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Test the topic document distribution in respect to a variable

dtm &lt;- topicsDtm(
  data = dep_wor_data$Depphrase)

model &lt;- topicsModel(
  dtm = dtm, # output of topicsDtm()
  num_topics = 20,
  num_top_words = 10,
  num_iterations = 1000,
  seed = 42)
                     
preds &lt;- topicsPreds(
 model = model, # output of topicsModel()
 data = dep_wor_data$Depphrase)
                     
test &lt;- topicsTest(
  model = model, # output of topicsModel()
  data=dep_wor_data,
  preds = preds, # output of topicsPreds()
  test_method = "linear_regression",
  x_variable = "Age")
                 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
