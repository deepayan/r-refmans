<!DOCTYPE html><html><head><title>Help for package APCI</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {APCI}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ageperiod_group'><p>Get the cohort index matrix for any age and period groups</p></a></li>
<li><a href='#apci'><p>Run APC-I model</p></a></li>
<li><a href='#apci.bar'><p>Make barplot for cohort effect</p></a></li>
<li><a href='#apci.plot'><p>Plotting age and period raw scores and APC-I model results</p></a></li>
<li><a href='#apci.plot.heatmap'><p>Plot the heatmap for APC-I model</p></a></li>
<li><a href='#apci.plot.hexagram'><p>Plot the hexagram heatmap</p></a></li>
<li><a href='#apci.plot.raw'><p>Plotting age and period patterns</p></a></li>
<li><a href='#blackmen'>
<p>Black Men</p></a></li>
<li><a href='#blackwomen'>
<p>Black Women</p></a></li>
<li><a href='#cohortdeviation'><p>Calculate cohort deviation</p></a></li>
<li><a href='#compute_xcoordinate'><p>Calculate x coordinate value</p></a></li>
<li><a href='#compute_ycoordinate'><p>Calculate y coordinate value</p></a></li>
<li><a href='#cpsmen'>
<p>Labor force participation data for men from 1990 to 1979 in CPS</p></a></li>
<li><a href='#cpswomen'>
<p>Labor force participation data for women from 1990 to 1979 in CPS</p></a></li>
<li><a href='#maineffect'><p>Estimate age effect and period effect</p></a></li>
<li><a href='#simulation'>
<p>Simulated Dataset</p></a></li>
<li><a href='#temp_model'><p>Estimate APC-I model</p></a></li>
<li><a href='#tests'><p>Local and global F test</p></a></li>
<li><a href='#whitemen'>
<p>White Men</p></a></li>
<li><a href='#whitewomen'>
<p>White Women</p></a></li>
<li><a href='#women9017'><p>women9017</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A New Age-Period-Cohort Model for Describing and Investigating
Inter-Cohort Differences and Life Course Dynamics</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.7</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jiahui Xu &lt;jpx5053@psu.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Description:</td>
<td>It implemented Age-Period-Interaction Model (APC-I Model) proposed in the paper of Liying Luo and James S. Hodges in 2019. A new age-period-cohort model for describing and investigating inter-cohort differences and life course dynamics.</td>
</tr>
<tr>
<td>Imports:</td>
<td>survey, magrittr, dplyr, ggplot2, data.table, ggpubr, stringr,
gee</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-30 06:26:25 UTC; jiahuixu</td>
</tr>
<tr>
<td>Author:</td>
<td>Jiahui Xu [aut, cre],
  Liying Luo [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-30 06:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='ageperiod_group'>Get the cohort index matrix for any age and period groups</h2><span id='topic+ageperiod_group'></span>

<h3>Description</h3>

<p>This function returns the cohort index matrix for any age and period
groups. The cohort index matrix will then be used to extract the cohort
effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ageperiod_group(
  age_range,
  period_range,
  age_interval = NULL,
  period_interval = NULL,
  age_group = NULL,
  period_group = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ageperiod_group_+3A_age_range">age_range</code>, <code id="ageperiod_group_+3A_period_range">period_range</code></td>
<td>
<p>Numeric vector indicating the actual
age and period range (e.g., 10 to 59 years old from 2000 to 2019).</p>
</td></tr>
<tr><td><code id="ageperiod_group_+3A_age_interval">age_interval</code>, <code id="ageperiod_group_+3A_period_interval">period_interval</code>, <code id="ageperiod_group_+3A_age_group">age_group</code>, <code id="ageperiod_group_+3A_period_group">period_group</code></td>
<td>
<p>Numeric
values or character vectors indicating how age and period are
grouped. <code>age_interval</code> and <code>period_interval</code> are numbers
indicating the width of age and period groups respectively.
<code>age_group</code> and <code>period_group</code> are character vectors
explicitly listing all potential age and period groups. Either
<code>age_interval</code>(<code>period_interval</code>) or <code>age_group</code>
(<code>period_group</code>) have to be defined when <code>unequal_interval</code>
is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix respresenting the relationship among age, period,
and cohort groups under the current setting.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## age and period groups have equal width
ageperiod_group(age_range = 10:59, period_range = 2000:2019,
                age_interval = 5, period_interval = 5)
ageperiod_group(age_range = 10:59, period_range = 2000:2019,
                age_group = c("10-14","15-19","20-24","25-29",
                              "30-34","35-39","40-44","45-49",
                              "50-54","55-59"),
                period_group = c("2000-2004","2005-2009","2010-2014",
                                 "2015-2019"))

## age and period groups have unequal width
ageperiod_group(age_range = 10:59, period_range = 2000:2019,
                age_interval = 10, period_interval = 5)
ageperiod_group(age_range = 10:59, period_range = 2000:2019,
                age_group = c("10-19","20-29","30-39","40-49","50-59"),
                period_group = c("2000-2004","2005-2009",
                                 "2010-2014","2015-2019"))

</code></pre>

<hr>
<h2 id='apci'>Run APC-I model</h2><span id='topic+apci'></span>

<h3>Description</h3>

<p>Run APC-I model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci(
  outcome = "inlfc",
  age = "acc",
  period = "pcc",
  cohort = NULL,
  weight = NULL,
  covariate = NULL,
  data,
  family = "quasibinomial",
  dev.test = TRUE,
  print = TRUE,
  gee = FALSE,
  id = NULL,
  corstr = "exchangeable",
  unequal_interval = FALSE,
  age_range = NULL,
  period_range = NULL,
  age_interval = NULL,
  period_interval = NULL,
  age_group = NULL,
  period_group = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci_+3A_outcome">outcome</code></td>
<td>
<p>An object of class character containing the name of the
outcome variable. The outcome variable can be continuous, categorical,
or count.</p>
</td></tr>
<tr><td><code id="apci_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci_+3A_cohort">cohort</code></td>
<td>
<p>An optional object of class character representing cohort
membership index in the data. Usually, the cohort index can be generated
from the age group index and time period index in the data because of the
intrinsic relationship among these three time-related indices.</p>
</td></tr>
<tr><td><code id="apci_+3A_weight">weight</code></td>
<td>
<p>An optional vector of sample weights to be used in the model
fitting process. If non-NULL, the weights will be used in the first step to
estimate the model. Observations with negative weights will be automatically
dropped in modeling.</p>
</td></tr>
<tr><td><code id="apci_+3A_covariate">covariate</code></td>
<td>
<p>An optional vector of characters, representing the name(s)
of the user-specified covariate(s) to be used in the model. If the
variable(s) are not found in data, there will be an error message reminding
the users to check the data again.</p>
</td></tr>
<tr><td><code id="apci_+3A_data">data</code></td>
<td>
<p>A data frame containing the outcome variable, age group
indicator, period group indicator, and covariates to be used in the model.
If the variable(s) are not found in data, there will be an error message
reminding the users to check the input data again.</p>
</td></tr>
<tr><td><code id="apci_+3A_family">family</code></td>
<td>
<p>Used to specify the statistical distribution of the error
term and link function to be used in the model. Usually, it is a character
string naming a family function. For example, family can be &quot;binomial&quot;,
&quot;multinomial&quot;&quot;, or &quot;gaussian&quot;. Users could also check R package glm for
more details of family functions.</p>
</td></tr>
<tr><td><code id="apci_+3A_dev.test">dev.test</code></td>
<td>
<p>Logical, specifying if the global F test should be
implemented before fitting the APC-I model. If <code>TRUE</code>, apci will first run the
global F test and report the test results; otherwise, apci will skip this
step and return NULL. The default setting is <code>TRUE</code>. However, users should be
aware that the algorithm will not automatically stop even if there is no
significant age-by-period interactions based on the global F test.</p>
</td></tr>
<tr><td><code id="apci_+3A_print">print</code></td>
<td>
<p>Logical, specifying if the intermediate results should be
displayed in the console when fitting the model. The default setting is
<code>TRUE</code> to display the results of each procedure.</p>
</td></tr>
<tr><td><code id="apci_+3A_gee">gee</code></td>
<td>
<p>Logical, indicating if the data is cross-sectional data or
longitudinal/panel data. If <code>TRUE</code>, the generalized estimating equation
will be used to correct the standard error estimates. The default is
<code>FALSE</code>, indicating that the data are cross-sectional.</p>
</td></tr>
<tr><td><code id="apci_+3A_id">id</code></td>
<td>
<p>A vector of character, specifying the cluster index in longitudinal
data. It is required when <code>gee</code> is <code>TRUE</code>. The length of the vector
should be the same as the number of observations.</p>
</td></tr>
<tr><td><code id="apci_+3A_corstr">corstr</code></td>
<td>
<p>A character string, specifying a possible correlation
structure in the error terms when <code>gee</code> is <code>TRUE</code>. The following
are allowed: <code>independence</code>, <code>fixed</code>, <code>stat\_M\_dep</code>,
<code>non\_stat\_M\_dep</code>, <code>exchangeable</code>, <code>AR-M</code> and
<code>unstructured</code>. The default value is <code>exchangeable</code>.</p>
</td></tr>
<tr><td><code id="apci_+3A_unequal_interval">unequal_interval</code></td>
<td>
<p>Logical, indicating if age and period groups are
of the same interval width. The default is set as <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="apci_+3A_age_range">age_range</code>, <code id="apci_+3A_period_range">period_range</code></td>
<td>
<p>Numeric vector indicating the actual
age and period range (e.g., 10 to 59 years old from 2000 to 2019).</p>
</td></tr>
<tr><td><code id="apci_+3A_age_interval">age_interval</code>, <code id="apci_+3A_period_interval">period_interval</code>, <code id="apci_+3A_age_group">age_group</code>, <code id="apci_+3A_period_group">period_group</code></td>
<td>
<p>Numeric
values or character vectors indicating how age and period are
grouped. <code>age_interval</code> and <code>period_interval</code> are numbers
indicating the width of age and period groups respectively.
<code>age_group</code> and <code>period_group</code> are character vectors
explicitly listing all potential age and period groups. Either
<code>age_interval</code>(<code>period_interval</code>) or <code>age_group</code>
(<code>period_group</code>) have to be defined when <code>unequal_interval</code>
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="apci_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>model</code></td>
<td>
<p>The fitted generalized linear model.</p>
</td></tr>
<tr><td><code>intercept</code></td>
<td>
<p>The overall intercept.</p>
</td></tr>
<tr><td><code>age_effect</code></td>
<td>
<p>The estimated age main effect.</p>
</td></tr>
<tr><td><code>period_effect</code></td>
<td>
<p>The estimated period main effect.</p>
</td></tr>
<tr><td><code>cohort_average</code></td>
<td>
<p>The estimated inter-cohort average deviations from age
and period main effects.</p>
</td></tr>
<tr><td><code>cohort_slope</code></td>
<td>
<p>The estimated intra-cohort life-course linear slopes.</p>
</td></tr>
<tr><td><code>int_matrix</code></td>
<td>
<p>A matrix containing the estimated coefficients for
age-by-period interactions.</p>
</td></tr>
<tr><td><code>cohort_index</code></td>
<td>
<p>Indices indicating different cohorts.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>Data used for fitting APC-I model.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

# explore the raw data pattern
apci.plot.raw(data = test_data, outcome_var = "inlfc",age = "acc",
              period = "pcc")
## alternatively,
apci.plot(data = test_data, outcome_var = "inlfc", age = "acc",model=APC_I,
          period = "pcc", type = "explore")

# visaulze estimated cohort effects with bar plot
apci.bar(model = APC_I, age = "acc",
         period = "pcc", outcome_var = "inlfc")

# visaulze estimated cohort effects with heatmap plot
apci.plot.heatmap(model = APC_I, age = "acc",period = "pcc")
## alternatively,
apci.plot(data = test_data, outcome_var = "inlfc", age = "acc",model=APC_I,
          period = "pcc")

</code></pre>

<hr>
<h2 id='apci.bar'>Make barplot for cohort effect</h2><span id='topic+apci.bar'></span>

<h3>Description</h3>

<p>Visualize cohort effects estimated by APC-I model with bar plots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci.bar(model, age, period, outcome_var, cohort_label = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci.bar_+3A_model">model</code></td>
<td>
<p>A list recording the results from function <code>apci</code>.</p>
</td></tr>
<tr><td><code id="apci.bar_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci.bar_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci.bar_+3A_outcome_var">outcome_var</code></td>
<td>
<p>An object of class character indicating
the name of the outcome variable used in the model. The
outcome variable can be a continuous, binary, categorical, or count variable.</p>
</td></tr>
<tr><td><code id="apci.bar_+3A_cohort_label">cohort_label</code></td>
<td>
<p>An optional vector, representing the labels of
cohort groups in the x asix.</p>
</td></tr>
<tr><td><code id="apci.bar_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A bar plot visualizing the cohort effects estimated by APC-I model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

## visualizing estimated cohort effects with bar plot
apci.bar(model = APC_I, age = "acc", period = "pcc")
</code></pre>

<hr>
<h2 id='apci.plot'>Plotting age and period raw scores and APC-I model results</h2><span id='topic+apci.plot'></span>

<h3>Description</h3>

<p>Arranging data exploration and model results representation
in a harmonized way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci.plot(
  model,
  age,
  period,
  outcome_var,
  type = "model",
  quantile = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci.plot_+3A_model">model</code></td>
<td>
<p>A list recording the results from function <code>apci</code>.</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_outcome_var">outcome_var</code></td>
<td>
<p>An object of class character indicating
the name of the outcome variable used in the model. The
outcome variable can be a continuous, binary, categorical, or count variable.</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_type">type</code></td>
<td>
<p>Character, &quot;explore&quot; or &quot;model&quot;. If type is &quot;explore&quot;,
plots for age and period raw scores will be generated. If type is
&quot;model&quot;, model results will be plotted. The default setting is &quot;model&quot;.</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_quantile">quantile</code></td>
<td>
<p>A number valued between 0 and 1, representing the
desirable percentiles to be used in visualizing the data or model.
If <code>NULL</code>, the original scale of the outcome variable will be used.</p>
</td></tr>
<tr><td><code id="apci.plot_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot with three panels showing the raw scores or APC-I
model results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

## plot the raw pattern
apci.plot(data = test_data, outcome_var = "inlfc", age = "acc",model=APC_I,
          period = "pcc", type = "explore")
## plot the model results
apci.plot(data = test_data, outcome_var = "inlfc", age = "acc",model=APC_I,
          period = "pcc", type = "model")
</code></pre>

<hr>
<h2 id='apci.plot.heatmap'>Plot the heatmap for APC-I model</h2><span id='topic+apci.plot.heatmap'></span>

<h3>Description</h3>

<p>Plot the heatmap to visualize cohort effects estimated by APC-I model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci.plot.heatmap(
  model,
  age,
  period,
  color_map = NULL,
  color_scale = NULL,
  quantile = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci.plot.heatmap_+3A_model">model</code></td>
<td>
<p>A list recording the results from function <code>apci</code>.</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_color_map">color_map</code></td>
<td>
<p>A vector, representing the color palettes to
be used in the figure. The default setting is greys if color_map is
<code>NULL</code>. Alternations, for example, can be c(&quot;blue&quot;, &quot;yellow&quot;),
blues, etc.</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_color_scale">color_scale</code></td>
<td>
<p>A vector including two numbers
indicating the limit of the values to be plotted. The
first number is the minimum value to be visualized and the
second is the maximum value to be visualized. If NULL, the
algorithm will automatically select the limits from the data
(estimation results) to set up the scale.</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_quantile">quantile</code></td>
<td>
<p>A number valued between 0 and 1, representing the
desirable percentiles to be used in visualizing the data or model.
If <code>NULL</code>, the original scale of the outcome variable will be used.</p>
</td></tr>
<tr><td><code id="apci.plot.heatmap_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A heatmap visualizing cohort effects estimated by APC-I model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

# plot heatmap
apci.plot.heatmap(model=APC_I,age="acc",period="pcc",first_age = 20,
                  first_period = 1940, interval = 5)
</code></pre>

<hr>
<h2 id='apci.plot.hexagram'>Plot the hexagram heatmap</h2><span id='topic+apci.plot.hexagram'></span>

<h3>Description</h3>

<p>Plot the cohort effect in the style of hexagram
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci.plot.hexagram(
  model,
  age,
  period,
  first_age,
  first_period,
  interval,
  first_age_isoline = NULL,
  first_period_isoline = NULL,
  isoline_interval = NULL,
  color_scale = NULL,
  color_map = NULL,
  line_width = 0.5,
  line_color = "grey",
  label_size = 0.5,
  label_color = "black",
  scale_units = "Quintile",
  wrap_cohort_labels = TRUE,
  quantile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci.plot.hexagram_+3A_model">model</code></td>
<td>
<p>A list recording the results from function <code>apci</code>.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_first_age">first_age</code></td>
<td>
<p>The first age group.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_first_period">first_period</code></td>
<td>
<p>The first period group.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_interval">interval</code></td>
<td>
<p>The width of age and period groups.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_first_age_isoline">first_age_isoline</code></td>
<td>
<p>Isoline for the first age group.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_first_period_isoline">first_period_isoline</code></td>
<td>
<p>Isoline for the first period group.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_isoline_interval">isoline_interval</code></td>
<td>
<p>Interval of isoline.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_color_scale">color_scale</code></td>
<td>
<p>A vector including two numbers
indicating the limit of the values to be plotted. The
first number is the minimum value to be visualized and the
second is the maximum value to be visualized. If NULL, the
algorithm will automatically select the limits from the data
(estimation results) to set up the scale.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_color_map">color_map</code></td>
<td>
<p>A vector, representing the color palettes to
be used in the figure. The default setting is greys if color_map is
<code>NULL</code>. Alternations, for example, can be c(&quot;blue&quot;, &quot;yellow&quot;),
blues, etc.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_line_width">line_width</code></td>
<td>
<p>Width of lines. Default is 0.5.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_line_color">line_color</code></td>
<td>
<p>Line colors. Default is grey.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_label_size">label_size</code></td>
<td>
<p>Axis label size. Default is 0.5.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_label_color">label_color</code></td>
<td>
<p>Axis label color. Default is Black.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_scale_units">scale_units</code></td>
<td>
<p>Units of scales.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_wrap_cohort_labels">wrap_cohort_labels</code></td>
<td>
<p>Display the cohort label or not. The default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="apci.plot.hexagram_+3A_quantile">quantile</code></td>
<td>
<p>A number valued between 0 and 1, representing the
desirable percentiles to be used in visualizing the data or model.
If <code>NULL</code>, the original scale of the outcome variable will be used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A hexagram visualizing the APC-I model results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

# plot hexagram
apci.plot.hexagram(model=APC_I,age="acc",period="pcc",first_age = 20,
                   first_period = 1940, interval = 5)
</code></pre>

<hr>
<h2 id='apci.plot.raw'>Plotting age and period patterns</h2><span id='topic+apci.plot.raw'></span>

<h3>Description</h3>

<p>Visualize the age and period patterns by plotting the
raw scores in each age and period square.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apci.plot.raw(data, outcome_var, age, period, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apci.plot.raw_+3A_data">data</code></td>
<td>
<p>A data frame containing the outcome variable, age group
indicator, period group indicator, and covariates to be used in the model.
If the variable(s) are not found in data, there will be an error message
reminding the users to check the input data again.</p>
</td></tr>
<tr><td><code id="apci.plot.raw_+3A_outcome_var">outcome_var</code></td>
<td>
<p>An object of class character indicating
the name of the outcome variable used in the model. The
outcome variable can be a continuous, binary, categorical, or count variable.</p>
</td></tr>
<tr><td><code id="apci.plot.raw_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="apci.plot.raw_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="apci.plot.raw_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot with two panels showing the age and period trends separately.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load package
library("APCI")
# load data
test_data &lt;- APCI::women9017
test_data$acc &lt;- as.factor(test_data$acc)
test_data$pcc &lt;- as.factor(test_data$pcc)
test_data$educc &lt;- as.factor(test_data$educc)
test_data$educr &lt;- as.factor(test_data$educr)

# fit APC-I model
APC_I &lt;- APCI::apci(outcome = "inlfc",
                    age = "acc",
                    period = "pcc",
                    cohort = "ccc",
                    weight = "wt",
                    data = test_data,dev.test=FALSE,
                    print = TRUE,
                    family = "gaussian")
summary(APC_I)

# plot the raw pattern
apci.plot.raw(data = test_data, outcome_var = "inlfc",age = "acc",
              period = "pcc")
</code></pre>

<hr>
<h2 id='blackmen'>
Black Men
</h2><span id='topic+blackmen'></span>

<h3>Description</h3>

<p>the dataset for black men
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("blackmen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code></p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code> <code>7</code> <code>8</code> <code>9</code></p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='blackwomen'>
Black Women
</h2><span id='topic+blackwomen'></span>

<h3>Description</h3>

<p>Dataset for black women
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("blackwomen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups</p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups</p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='cohortdeviation'>Calculate cohort deviation</h2><span id='topic+cohortdeviation'></span>

<h3>Description</h3>

<p>Calculate cohort deviation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohortdeviation(
  A,
  P,
  C,
  model = temp6,
  weight = "wt",
  covariate,
  gee = FALSE,
  unequal_interval = FALSE,
  age_range = NULL,
  period_range = NULL,
  age_interval = NULL,
  period_interval = NULL,
  age_group = NULL,
  period_group = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cohortdeviation_+3A_a">A</code>, <code id="cohortdeviation_+3A_p">P</code>, <code id="cohortdeviation_+3A_c">C</code></td>
<td>
<p>The numbers of age groups, period groups, and cohort groups separately.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_model">model</code></td>
<td>
<p>A generalized linear regression model generated from
the internal function temp_model</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_weight">weight</code></td>
<td>
<p>An optional vector of sample weights to be used in the model
fitting process. If non-NULL, the weights will be used in the first step to
estimate the model. Observations with negative weights will be automatically
dropped in modeling.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_covariate">covariate</code></td>
<td>
<p>An optional vector of characters, representing the name(s)
of the user-specified covariate(s) to be used in the model. If the
variable(s) are not found in data, there will be an error message reminding
the users to check the data again.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_gee">gee</code></td>
<td>
<p>Logical, indicating if the data is cross-sectional data or
longitudinal/panel data. If <code>TRUE</code>, the generalized estimating equation
will be used to correct the standard error estimates. The default is
<code>FALSE</code>, indicating that the data are cross-sectional.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_unequal_interval">unequal_interval</code></td>
<td>
<p>Logical, indicating if age and period groups are
of the same interval width. The default is set as <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_age_range">age_range</code>, <code id="cohortdeviation_+3A_period_range">period_range</code></td>
<td>
<p>Numeric vector indicating the actual
age and period range (e.g., 10 to 59 years old from 2000 to 2019).</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_age_interval">age_interval</code>, <code id="cohortdeviation_+3A_period_interval">period_interval</code>, <code id="cohortdeviation_+3A_age_group">age_group</code>, <code id="cohortdeviation_+3A_period_group">period_group</code></td>
<td>
<p>Numeric
values or character vectors indicating how age and period are
grouped. <code>age_interval</code> and <code>period_interval</code> are numbers
indicating the width of age and period groups respectively.
<code>age_group</code> and <code>period_group</code> are character vectors
explicitly listing all potential age and period groups. Either
<code>age_interval</code>(<code>period_interval</code>) or <code>age_group</code>
(<code>period_group</code>) have to be defined when <code>unequal_interval</code>
is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="cohortdeviation_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>cohort_average</code></td>
<td>
<p>The estimated inter-cohort average deviations from age
and period main effects.</p>
</td></tr>
<tr><td><code>cohort_slope</code></td>
<td>
<p>The estimated intra-cohort life-course linear slopes.</p>
</td></tr>
<tr><td><code>int_matrix</code></td>
<td>
<p>A matrix containing the estimated coefficients for
age-by-period interactions.</p>
</td></tr>
<tr><td><code>cohort_index</code></td>
<td>
<p>Indices indicating different cohorts.</p>
</td></tr>
</table>

<hr>
<h2 id='compute_xcoordinate'>Calculate x coordinate value</h2><span id='topic+compute_xcoordinate'></span>

<h3>Description</h3>

<p>Calculate x coordinate value for plotting hexagram in visualizing APC-I
results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_xcoordinate(p)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_xcoordinate_+3A_p">p</code></td>
<td>
<p>Period value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The coordinate value for x axis.
</p>

<hr>
<h2 id='compute_ycoordinate'>Calculate y coordinate value</h2><span id='topic+compute_ycoordinate'></span>

<h3>Description</h3>

<p>Calculate y coordinate value for plotting hexagram in visualizing APC-I
results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_ycoordinate(p, a)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_ycoordinate_+3A_p">p</code></td>
<td>
<p>Period value</p>
</td></tr>
<tr><td><code id="compute_ycoordinate_+3A_a">a</code></td>
<td>
<p>Age value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The coordinate value for y axis.
</p>

<hr>
<h2 id='cpsmen'>
Labor force participation data for men from 1990 to 1979 in CPS
</h2><span id='topic+cpsmen'></span>

<h3>Description</h3>

<p>the dataset for men
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("cpsmen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code></p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code> <code>7</code> <code>8</code> <code>9</code></p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='cpswomen'>
Labor force participation data for women from 1990 to 1979 in CPS
</h2><span id='topic+cpswomen'></span>

<h3>Description</h3>

<p>the dataset for women
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("cpswomen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code></p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups with levels <code>1</code> <code>2</code> <code>3</code> <code>4</code> <code>5</code> <code>6</code> <code>7</code> <code>8</code> <code>9</code></p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='maineffect'>Estimate age effect and period effect</h2><span id='topic+maineffect'></span>

<h3>Description</h3>

<p>Estimate age and period effect from APCI model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maineffect(A, P, C, model = temp6, data, gee = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maineffect_+3A_a">A</code>, <code id="maineffect_+3A_p">P</code>, <code id="maineffect_+3A_c">C</code></td>
<td>
<p>The numbers of age groups, period groups, and cohort groups separately.</p>
</td></tr>
<tr><td><code id="maineffect_+3A_model">model</code></td>
<td>
<p>A generalized linear regression model generated from
the internal function temp_model</p>
</td></tr>
<tr><td><code id="maineffect_+3A_data">data</code></td>
<td>
<p>A data frame containing the outcome variable, age group
indicator, period group indicator, and covariates to be used in the model.
If the variable(s) are not found in data, there will be an error message
reminding the users to check the input data again.</p>
</td></tr>
<tr><td><code id="maineffect_+3A_gee">gee</code></td>
<td>
<p>Logical, indicating if the data is cross-sectional data or
longitudinal/panel data. If <code>TRUE</code>, the generalized estimating equation
will be used to correct the standard error estimates. The default is
<code>FALSE</code>, indicating that the data are cross-sectional.</p>
</td></tr>
<tr><td><code id="maineffect_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>intercept</code></td>
<td>
<p>The overall intercept.</p>
</td></tr>
<tr><td><code>age_effect</code></td>
<td>
<p>The estimated age main effect.</p>
</td></tr>
<tr><td><code>period_effect</code></td>
<td>
<p>The estimated period main effect.</p>
</td></tr>
</table>

<hr>
<h2 id='simulation'>
Simulated Dataset
</h2><span id='topic+simulation'></span>

<h3>Description</h3>

<p>A simulated dataset for APC-I analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("simulation")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 3 variables.
</p>

<dl>
<dt><code>y</code></dt><dd><p>a numeric</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric</p>
</dd>
<dt><code>period</code></dt><dd><p>a numeric</p>
</dd>
</dl>


<hr>
<h2 id='temp_model'>Estimate APC-I model</h2><span id='topic+temp_model'></span>

<h3>Description</h3>

<p>Estimate the APCI original model. This is a generalized linear regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>temp_model(
  data,
  outcome = "inlfc",
  age = "acc",
  period = "pcc",
  cohort = NULL,
  weight = NULL,
  covariate = NULL,
  family = "quasibinomial",
  gee = FALSE,
  id = NULL,
  corstr = "exchangeable",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="temp_model_+3A_data">data</code></td>
<td>
<p>A data frame containing the outcome variable, age group
indicator, period group indicator, and covariates to be used in the model.
If the variable(s) are not found in data, there will be an error message
reminding the users to check the input data again.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_outcome">outcome</code></td>
<td>
<p>An object of class character containing the name of the
outcome variable. The outcome variable can be continuous, categorical,
or count.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="temp_model_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_cohort">cohort</code></td>
<td>
<p>An optional object of class character representing cohort
membership index in the data. Usually, the cohort index can be generated
from the age group index and time period index in the data because of the
intrinsic relationship among these three time-related indices.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_weight">weight</code></td>
<td>
<p>An optional vector of sample weights to be used in the model
fitting process. If non-NULL, the weights will be used in the first step to
estimate the model. Observations with negative weights will be automatically
dropped in modeling.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_covariate">covariate</code></td>
<td>
<p>An optional vector of characters, representing the name(s)
of the user-specified covariate(s) to be used in the model. If the
variable(s) are not found in data, there will be an error message reminding
the users to check the data again.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_family">family</code></td>
<td>
<p>Used to specify the statistical distribution of the error
term and link function to be used in the model. Usually, it is a character
string naming a family function. For example, family can be &quot;binomial&quot;,
&quot;multinomial&quot;&quot;, or &quot;gaussian&quot;. Users could also check R package glm for
more details of family functions.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_gee">gee</code></td>
<td>
<p>Logical, indicating if the data is cross-sectional data or
longitudinal/panel data. If <code>TRUE</code>, the generalized estimating equation
will be used to correct the standard error estimates. The default is
<code>FALSE</code>, indicating that the data are cross-sectional.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_id">id</code></td>
<td>
<p>A vector of character, specifying the cluster index in longitudinal
data. It is required when <code>gee</code> is <code>TRUE</code>. The length of the vector
should be the same as the number of observations.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_corstr">corstr</code></td>
<td>
<p>A character string, specifying a possible correlation
structure in the error terms when <code>gee</code> is <code>TRUE</code>. The following
are allowed: <code>independence</code>, <code>fixed</code>, <code>stat\_M\_dep</code>,
<code>non\_stat\_M\_dep</code>, <code>exchangeable</code>, <code>AR-M</code> and
<code>unstructured</code>. The default value is <code>exchangeable</code>.</p>
</td></tr>
<tr><td><code id="temp_model_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing:
</p>
<table>
<tr><td><code>A</code></td>
<td>
<p>Age group index.</p>
</td></tr>
<tr><td><code>P</code></td>
<td>
<p>Period group index.</p>
</td></tr>
<tr><td><code>C</code></td>
<td>
<p>Cohort group index.</p>
</td></tr>
<tr><td><code>model</code></td>
<td>
<p>Fitted APCI models of outcome on predictors.</p>
</td></tr>
</table>

<hr>
<h2 id='tests'>Local and global F test</h2><span id='topic+tests'></span>

<h3>Description</h3>

<p>Implement local and global F test for APC-I model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tests(
  model,
  age = "acc",
  period = "pcc",
  cohort = "ccc",
  A,
  P,
  C,
  data,
  weight = "wt",
  family,
  outcome,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tests_+3A_model">model</code></td>
<td>
<p>A generalized linear regression model generated from
the internal function temp_model</p>
</td></tr>
<tr><td><code id="tests_+3A_age">age</code></td>
<td>
<p>An object of class character representing the age group index
taking on a small number of distinct values in the data. Usually, the vector
should be converted to a factor (or the terms of &quot;category&quot; and &quot;enumerated
type&quot;).</p>
</td></tr>
<tr><td><code id="tests_+3A_period">period</code></td>
<td>
<p>An object of class character, similar to the argument of age,
representing the time period index in the data.</p>
</td></tr>
<tr><td><code id="tests_+3A_cohort">cohort</code></td>
<td>
<p>An optional object of class character representing cohort
membership index in the data. Usually, the cohort index can be generated
from the age group index and time period index in the data because of the
intrinsic relationship among these three time-related indices.</p>
</td></tr>
<tr><td><code id="tests_+3A_a">A</code>, <code id="tests_+3A_p">P</code>, <code id="tests_+3A_c">C</code></td>
<td>
<p>The numbers of age groups, period groups, and cohort groups separately.</p>
</td></tr>
<tr><td><code id="tests_+3A_data">data</code></td>
<td>
<p>A data frame containing the outcome variable, age group
indicator, period group indicator, and covariates to be used in the model.
If the variable(s) are not found in data, there will be an error message
reminding the users to check the input data again.</p>
</td></tr>
<tr><td><code id="tests_+3A_weight">weight</code></td>
<td>
<p>An optional vector of sample weights to be used in the model
fitting process. If non-NULL, the weights will be used in the first step to
estimate the model. Observations with negative weights will be automatically
dropped in modeling.</p>
</td></tr>
<tr><td><code id="tests_+3A_family">family</code></td>
<td>
<p>Used to specify the statistical distribution of the error
term and link function to be used in the model. Usually, it is a character
string naming a family function. For example, family can be &quot;binomial&quot;,
&quot;multinomial&quot;&quot;, or &quot;gaussian&quot;. Users could also check R package glm for
more details of family functions.</p>
</td></tr>
<tr><td><code id="tests_+3A_outcome">outcome</code></td>
<td>
<p>An object of class character containing the name of the
outcome variable. The outcome variable can be continuous, categorical,
or count.</p>
</td></tr>
<tr><td><code id="tests_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list displaying the global F test results.
</p>

<hr>
<h2 id='whitemen'>
White Men
</h2><span id='topic+whitemen'></span>

<h3>Description</h3>

<p>A dataset for white men.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("whitemen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups</p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups</p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='whitewomen'>
White Women
</h2><span id='topic+whitewomen'></span>

<h3>Description</h3>

<p>A dataset for white women.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("whitewomen")</code></pre>


<h3>Format</h3>

<p>A data frame with 10000 observations on the following 7 variables.
</p>

<dl>
<dt><code>asecwt</code></dt><dd><p>weight</p>
</dd>
<dt><code>year</code></dt><dd><p>a factor indicating period groups</p>
</dd>
<dt><code>age</code></dt><dd><p>a factor indicating age groups</p>
</dd>
<dt><code>labforce</code></dt><dd><p>labor Force participation rate</p>
</dd>
<dt><code>educ</code></dt><dd><p>education level</p>
</dd>
<dt><code>educr</code></dt><dd><p>education level</p>
</dd>
<dt><code>educc</code></dt><dd><p>education level</p>
</dd>
</dl>


<hr>
<h2 id='women9017'>women9017</h2><span id='topic+women9017'></span>

<h3>Description</h3>

<p>A sample dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>women9017
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 observations on the following 23 variables.
</p>

<dl>
<dt><code>ac</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>acc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>cc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ccc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>cohort</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>educ</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>educc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>educr</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>inlfc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>labforce</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>lfc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>marst</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>marstc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>marstr</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>nc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>ncc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>nchild</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>pc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>pcc</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>wt</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>wtsupp</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>year</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>



<h3>Details</h3>

<p>test
</p>


<h3>Source</h3>

<p>CPS
</p>


<h3>References</h3>

<p>Luo and Hodges (2019)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
