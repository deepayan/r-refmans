<!DOCTYPE html><html lang="en"><head><title>Help for package BayesianMediationA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BayesianMediationA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BayesianMediationA-package'>
<p>Bayesian Mediation Analysis Package</p></a></li>
<li><a href='#bma.bx.cy'>
<p>Bayesian Mediation Analysis</p></a></li>
<li><a href='#data_org'>
<p>Data Organization</p></a></li>
<li><a href='#print.summary.bma'>
<p>Print the results from the summary function.</p></a></li>
<li><a href='#summary.bma.bx.cy'>
<p>Summary function for the bma.bx.cy object</p></a></li>
<li><a href='#weight_behavior'>
<p>Weight_Behavior Data Set</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Mediation Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-09-26</td>
</tr>
<tr>
<td>Author:</td>
<td>Qingzhao Yu [aut, cre, cph],
  Bin Li [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Qingzhao Yu &lt;qyu@lsuhsc.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.1), survival, R2jags, car, gplots,lattice</td>
</tr>
<tr>
<td>Imports:</td>
<td>splines, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>We perform general mediation analysis in the Bayesian setting using the methods described in Yu and Li (2022, ISBN:9780367365479). With the package, the mediation analysis can be performed on different types of outcomes (e.g., continuous, binary, categorical, or time-to-event), with default or user-defined priors and predictive models. The Bayesian estimates and credible sets of mediation effects are reported as analytic results.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=BayesianMediationA">https://cran.r-project.org/package=BayesianMediationA</a>,
<a href="https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html">https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-24 23:20:25 UTC; qyu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-24 23:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='BayesianMediationA-package'>
Bayesian Mediation Analysis Package
</h2><span id='topic+BayesianMediationA-package'></span><span id='topic+BayesianMediationA'></span>

<h3>Description</h3>

<p>Functions in the package are used for Bayesian mediation analysis. Mediation effect refers to the effect conveyed by intervening variables to an observed relationship between an exposure and a response variable (outcome).  In this package, the exposure is called the predictor, the intervening variables are called mediators.  The mediation effects include the total effect, direct effect, and indirect effect, which are defined and the statistical inferences described in Yu et al.(2014). We use four different method for the mediation analysis (Yu et al. 2022a, Yu et al. 2022b).
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a> and Bin Li <a href="mailto:bli@lsu.edu">bli@lsu.edu</a>
</p>
<p>Maintainer: Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q., Fan, Y., and Wu, X. (2014) &lt;doi:10.4172/2155-6180.1000189&gt;. General Multiple Mediation Analysis With an Application to Explore Racial Disparity in Breast Cancer Survival, Journal of Biometrics and Biostatistics, 5(2):189.
</p>
<p>Yu, Q. and Li, B., 2022. Statistical Methods for Mediation, Confounding and Moderation Analysis Using R and SAS. Chapman and Hall/CRC. ISBN 9780367365479.
</p>
<p>Yu, Q., Cao, W., Mercante, D., Wu, X,, and Li, B., 2022. Bayesian Mediation Analysis Methods to Explore Racial/Ethnic Disparities in Anxiety Among Cancer Survivors. Accepted by Behaviormetrika.
</p>

<hr>
<h2 id='bma.bx.cy'>
Bayesian Mediation Analysis
</h2><span id='topic+bma.bx.cy'></span>

<h3>Description</h3>

<p>The function is to perform the Bayesian mediation anlaysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bma.bx.cy(pred, m, y, refy = rep(NA, ncol(data.frame(y))),
predref = rep(NA, ncol(data.frame(pred))),
fpy = NULL, deltap = rep(0.001, ncol(data.frame(pred))), fmy = NULL,
deltam = rep(0.001,ncol(data.frame(m))),
fpm = NULL, mref = rep(NA, ncol(data.frame(m))), cova = NULL, mcov = NULL,
mclist = NULL, inits = NULL, n.chains = 1, n.iter = 1100, n.burnin = 100,
n.thin = 1, mu = NULL,Omega = NULL, Omegac = NULL, muc = NULL,
mucv = NULL, Omegacv = NULL, mu0.1 = NULL, Omega0.1 = NULL,
mu1.1 = NULL, Omega1.1 = NULL, mu0.a = NULL, Omega0.a = NULL,
mu1.a = NULL, Omega1.a = NULL, mu0.b =NULL,
Omega0.b = NULL, mu1.b = NULL, Omega1.b = NULL, mu0.c = NULL,
Omega0.c = NULL, mu1.c = NULL, Omega1.c = NULL, preci = 1e-06,
tmax = Inf, multi = NULL,filename=NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bma.bx.cy_+3A_pred">pred</code></td>
<td>

<p>a vector or matrix of exposure variable(s).
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_m">m</code></td>
<td>

<p>a data frame with all mediators.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_y">y</code></td>
<td>

<p>the response variable.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_refy">refy</code></td>
<td>

<p>the reference group of the response variable if y is binary or categorical.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_predref">predref</code></td>
<td>

<p>the reference group(s) of the exposure variable(s) by the column of pred.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_fpy">fpy</code></td>
<td>

<p>the transformation function expressions on pred in explaining y (eg, list(1,c(&quot;x^2&quot;,&quot;log(x)&quot;))). The first item lists column numbers/variable names of the exposure variable in pred, which needs to be transformed. By that order, each of the rest items of fpy list the transformation functional expressions for each exposure. The exposures not specified in the list will not be transformed in any way in explaining y. For example, list(1,c(&quot;x^2&quot;,&quot;log(x)&quot;)) means that the first column of the pred will be transformed to square and log forms in the function to explain y.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_deltap">deltap</code></td>
<td>

<p>the vector of differences in the exposure variable when calculating the partial differences in methods 2 and 3. The vector is in the order of columns of pred. By default, 0.001 for continuous variables and 1 for binary or categorical exposures.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_fmy">fmy</code></td>
<td>

<p>the transformation function expressions on m in explaining y. The first item lists column numbers/variable names of the mediator in m, which needs to be transformed. By that order, each of the rest items of fmy list the transformation functional expressions for each mediator. The mediators not specified in the list will keep the original formats in explaining y.</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_deltam">deltam</code></td>
<td>

<p>the vector of differences in the mediators in calculating the partial difference in y for method 2. The vector is in the order of columns of m. By default, 0.001 for continuous variables and 1 for binary or categorical mediators.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_fpm">fpm</code></td>
<td>

<p>the transformation-function-expression list on exposure variable(s) (pred) in explaining mediators (m). The first item is a matrix with two columns: the first column is the column numbers of the mediators in m, which should be explained by the transformed predictor(s). The second column indicates the column number of the exposure in pred that will be transformed to explain the mediator identified by the 1st column of the same row. By the order of the rows of the first item, each of the rest items of fpm lists the transformation functional expressions for the exposure (identified by column 2) in explaining each mediator (identified by column 1). The mediators not specified in the list will be explained by the original format of the exposures in pred. For example, fpm=list(matrix(c(1,2,1,1),2,2), &quot;x^2&quot;,c(&quot;x&quot;,&quot;x^2&quot;)) means that pred[,1]^2 is used to explain m[,1], and both pred and pred[,1]^2 are used to explain m[,2].
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mref">mref</code></td>
<td>

<p>the reference group of the mediators in the order of the columns of m.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_cova">cova</code></td>
<td>

<p>the covariates that are used to explain y in addition to pred, m and/or their transformations.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mcov">mcov</code></td>
<td>

<p>the covariates that are used to explain mediators in additon to pred and/or their tranformations.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mclist">mclist</code></td>
<td>

<p>If mclist is NULL (by default), all covariates in mcov are used for all mediators in m. Otherwise, the first item of mclist lists all column numbers/names of mediators in m that are to be explained by covariates in mcov, the following items give the covariates in mcov for the mediators in the order of the first item. Use NA if no mcov is to be used.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_inits">inits</code></td>
<td>

<p>the initial values for parameters in models. For example, inits&lt;-function()list(alpha=0,beta=0,c=0,var1=0.5,r=1,lamda=0.01).
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_n.chains">n.chains</code></td>
<td>

<p>number of Markov chains. By fault, the number is 1.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_n.iter">n.iter</code></td>
<td>

<p>number of total iterations per chain. The default number is 1100.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_n.burnin">n.burnin</code></td>
<td>

<p>length of burn in, i.e. number of iterations to discard at the beginning. Default is 100.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_n.thin">n.thin</code></td>
<td>

<p>thinning rate. Must be a positive integer. Set n.thin &gt; 1 to save memory and computation time if n.iter is large. Default is max(1, floor(n.chains * (n.iter-n.burnin) / 1000)) which will only thin if there are at least 2000 simulations.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu">mu</code></td>
<td>

<p>the prior mean vector (of length P, where P is number of mediators) for coefficients of mediators in the final model for y. By default, all prior mean is 0.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega">Omega</code></td>
<td>

<p>the prior variance-covariance matrix for the coefficients of mediators in the final model for y. The dimension is P*P. By default, all variance-covariance matrix is diagnal with precision term defined by preci.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omegac">Omegac</code></td>
<td>

<p>the prior variance-covariance matrix for the coefficients of exposure(s) in the final model for y. The dimention is c2*c2. c2 is number of expsoure(s) to predict y.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_muc">muc</code></td>
<td>

<p>the prior mean vector (of length p2) for coefficients of exposure(s) in the final model for y.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mucv">mucv</code></td>
<td>

<p>the prior mean vector for coefficients of covariate(s) in the final model for y.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omegacv">Omegacv</code></td>
<td>

<p>the prior variance-covariance matrix for the coefficients of covariate(s) in the final model for y.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu0.1">mu0.1</code></td>
<td>

<p>the prior mean matrix for coefficients of intercept and covariate(s) in the model for predicting mediators. The dimension is P*nmc, where P is the total number of mediators, and nmc is the total number of covariates (1 is a covarite when intercept is fitted). Note that if there are different numbers of covariates for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega0.1">Omega0.1</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of intercept and covariate(s) in the model for predicting mediators. The dimension is nmc*nmc. Note that if there are different numbers of covariates for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu1.1">mu1.1</code></td>
<td>

<p>the prior mean matrix for coefficients of exposure(s) in the model for predicting mediators. The dimension is P*c1, where P is the total number of mediators, and c1 is the total number of original exposure(s). Note that if there are different numbers or transformation of exposure(s) for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega1.1">Omega1.1</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of exposure(s) in the model for predicting mediators. The dimension is c1*c1. Note that if there are different numbers of exposure(s) for coefficients, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu0.a">mu0.a</code></td>
<td>

<p>the prior mean matrix for coefficients of intercept and covariate(s) in the model for predicting continuous mediators. The dimension is p1*nmc, where p1 is the total number of continuous mediators, and nmc is the total number of covariates (1 is a covarite when intercept is fitted). Note that if there are different numbers of covariates for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega0.a">Omega0.a</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of intercept and covariate(s) in the model for predicting continuous mediators. The dimension is nmc*nmc. Note that if there are different number of covariate(s) for different mediators, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu1.a">mu1.a</code></td>
<td>

<p>the prior mean matrix for coefficients of exposure(s) in the model for predicting continuous mediators. The dimension is p1*c1, where p1 is the total number of continuous mediators, and c1 is the total number of original exposure(s). Note that if there are different numbers or transformation of exposure(s) for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega1.a">Omega1.a</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of exposure(s) in the model for predicting continuous mediators. The dimension is c1*c1. Note that if there are different numbers of exposure(s) for each mediator, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu0.b">mu0.b</code></td>
<td>

<p>the prior mean matrix for coefficients of intercept and covariate(s) in the model for predicting binary mediators. The dimension is p2*nmc, where p2 is the total number of binary mediators, and nmc is the total number of covariates (1 is a covarite when intercept is fitted). Note that if there are different numbers of covariates for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega0.b">Omega0.b</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of intercept and covariate(s) in the model for predicting binary mediators. The dimension is nmc*nmc. Note that if there are different number of covariate(s) for different mediators, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu1.b">mu1.b</code></td>
<td>

<p>the prior mean matrix for coefficients of exposure(s) in the model for predicting binary mediators. The dimension is p2*c1, where p2 is the total number of binary mediators, and c1 is the total number of original exposure(s). Note that if there are different numbers or transformation of exposure(s) for different mediators, the priors need to specified in the bug model defined in filename.</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega1.b">Omega1.b</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of exposure(s) in the model for predicting binary mediators. The dimension is c1*c1. Note that if there are different numbers of exposure(s) for each mediator, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu0.c">mu0.c</code></td>
<td>

<p>the prior mean matrix for coefficients of intercept and covariate(s) in the model for predicting categorical mediators. The dimension is p3*cat1*nmc, where p3 is the total number of categorical mediators, cat1 is the biggest number of categories for all categorical mediators, and nmc is the total number of covariates (1 is a covarite when intercept is fitted). Note that if there are different numbers of covariates for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega0.c">Omega0.c</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of intercept and covariate(s) in the model for predicting categorical mediators. The dimension is nmc*nmc. Note that if there are different number of covariate(s) for different mediators, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_mu1.c">mu1.c</code></td>
<td>

<p>the prior mean matrix for coefficients of exposure(s) in the model for predicting categorical mediators. The dimension is p3*c1, where p3 is the total number of categorical mediators, and c1 is the total number of original exposure(s). Note that if there are different numbers or transformation of exposure(s) for different mediators, the priors need to specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_omega1.c">Omega1.c</code></td>
<td>

<p>the prior variance-covariance matrix for coefficients of exposure(s) in the model for predicting categorical mediators. The dimension is c1*c1. Note that if there are different numbers of exposure(s) for each mediator, the priors need to be specified in the bug model defined in filename.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_preci">preci</code></td>
<td>

<p>define the precision term in the diagnoal variance-covariance matrix.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_tmax">tmax</code></td>
<td>

<p>the maximum suvival time if the outcome is time-to-event.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_multi">multi</code></td>
<td>

<p>if true, report the productive effect.
</p>
</td></tr>
<tr><td><code id="bma.bx.cy_+3A_filename">filename</code></td>
<td>

<p>If specified, filename gives the bugs model with folder direction, e.g., &quot;C:/bugs.txt&quot;. If not specified, a bugs model will be generated automatically.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In this function, data_org is called first and then jags is called for a Bayesian model fitting. Finally, three different Bayesian mediation analysis methods are used to make inferences on mediation effects.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>aie1</code></td>
<td>
<p>The average indiect effect from method 1. The dimension is (n.iter-n.burnin)*(# of mediators)*(# of exposures).</p>
</td></tr>
<tr><td><code>ade1</code></td>
<td>
<p>The average diect effect from method 1. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>ate1</code></td>
<td>
<p>The average total effect from method 1. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>aie2</code></td>
<td>
<p>The average indiect effect from method 2. The dimension is (n.iter-n.burnin)*(# of mediators)*(# of exposures).</p>
</td></tr>
<tr><td><code>ade2</code></td>
<td>
<p>The average diect effect from method 2. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>ate2</code></td>
<td>
<p>The average total effect from method 2. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>aie3</code></td>
<td>
<p>The average indiect effect from method 3. The dimension is (n.iter-n.burnin)*(# of mediators)*(# of exposures).</p>
</td></tr>
<tr><td><code>ade3</code></td>
<td>
<p>The average diect effect from method 3. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>ate3</code></td>
<td>
<p>The average total effect from method 3. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>aie4</code></td>
<td>
<p>The average indiect effect from method 4. The dimension is (n.iter-n.burnin)*(# of mediators)*(# of exposures).</p>
</td></tr>
<tr><td><code>ade4</code></td>
<td>
<p>The average diect effect from method 4. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>ate4</code></td>
<td>
<p>The average total effect from method 4. The dimension is (n.iter-n.burnin)*(# of exposures).</p>
</td></tr>
<tr><td><code>sims.list</code></td>
<td>
<p>The Bayesian model fitting results from japs.</p>
</td></tr>
<tr><td><code>data0</code></td>
<td>
<p>The fitting results from data_org.</p>
</td></tr>
<tr><td><code>omu3</code></td>
<td>
<p>When the outcome is time-to-event, omu3 gives the mean survival at the original data for method 3.</p>
</td></tr>
<tr><td><code>omu4</code></td>
<td>
<p>When the outcome is time-to-event, omu4 gives the mean survival at the original data for method 4.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu and Bin Li
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("weight_behavior")
#n.iter and n.burnin are set to be very small, should be adjusted
#binary predictor
test.b.c&lt;- bma.bx.cy(pred=weight_behavior[,3], m=weight_behavior[,c(14,12,13)],
                     y=weight_behavior[,1],n.iter=5,n.burnin = 1)
summary(test.b.c)

#categorical predictor
test.ca.c&lt;- bma.bx.cy(pred=weight_behavior[,4], m=weight_behavior[,12:14],
                     y=weight_behavior[,1],n.iter=5,n.burnin = 1)
summary(test.ca.c)

#use covariate for y
test.b.c.2&lt;- bma.bx.cy(pred=weight_behavior[,3], m=weight_behavior[,12:14],
                     y=weight_behavior[,1],cova=weight_behavior[,2],n.iter=10,n.burnin = 1)
summary(test.b.c.2)

#use covariate for mediators
test.b.c.3&lt;- bma.bx.cy(pred=weight_behavior[,3], m=weight_behavior[,c(9,12:14)],
                       y=weight_behavior[,1],mcov=weight_behavior[,c(2,5)],
                       mclist = list(1,2),n.iter=5,n.burnin = 1)
summary(test.b.c.3)

#use continuous predictor
test.c.c&lt;- bma.bx.cy(pred=weight_behavior[,2], m=weight_behavior[,12:14],
                       y=weight_behavior[,1],n.iter=5,n.burnin = 1)
summary(test.c.c,method=3)

#use transfered continuous predictor for y
test.c.c.2&lt;- bma.bx.cy(pred=weight_behavior[,2], m=weight_behavior[,12:14],
                     y=weight_behavior[,1],fpy=list(1,c("x","x^2")),n.iter=5,n.burnin = 1)
summary(test.c.c.2,method=1)

#multiple predictors
test.m.c&lt;- bma.bx.cy(pred=weight_behavior[,2:4], m=weight_behavior[,12:14],
                     y=weight_behavior[,1],n.iter=10,n.burnin = 1)
summary(test.m.c,method=3)

##binary outcome
test.m.b&lt;- bma.bx.cy(pred=weight_behavior[,2:4], m=weight_behavior[,12:14],
                     y=weight_behavior[,15],cova=weight_behavior[,5],n.iter=5,n.burnin = 1)
summary(test.m.b,method=2)

##time-to-event outcome
#use a simulation
set.seed(1)
N=100

alpha=0.5
x=rnorm(N,0,1)
x=ifelse(x&gt;0,1,0)
e1=rnorm(N,0,1)
M=alpha*x+e1
lambda=0.01
rho=1
beta=1.2
c=-1
rateC=0.001
v=runif(n=N)
Tlat =(- log(v) / (lambda * exp(c*x+M*beta)))^(1 / rho)
C=rexp(n=N, rate=rateC)
time=pmin(Tlat, C)
status &lt;- as.numeric(Tlat &lt;= C)

test.m.t.1&lt;- bma.bx.cy(pred=x, m=M,y=Surv(time,status),inits=function(){
  list(r=1,lambda=0.01)},n.iter=10,n.burnin = 1)
temp1=summary(test.m.t.1)
print(temp1,method=1,RE=FALSE)

##categorical outcome
test.m.c&lt;- bma.bx.cy(pred=weight_behavior[,2:4], m=weight_behavior[,12:13],
                     y=weight_behavior[,14],cova=weight_behavior[,5],n.iter=5,n.burnin = 1)
summary(test.m.c,method=3)
</code></pre>

<hr>
<h2 id='data_org'>
Data Organization
</h2><span id='topic+data_org'></span>

<h3>Description</h3>

<p>The function is used to identify exposure, mediator, covariate, and outcome variables and organize the data into formats usable for the mediaiton analysis. The function is called by bma.bx.cy function before doing the Bayesian mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_org(pred, m, y, refy = rep(NA, ncol(data.frame(y))),
predref = rep(NA, ncol(data.frame(pred))),fpy = NULL,
deltap = rep(0.001, ncol(data.frame(pred))),
fmy = NULL, deltam = rep(0.001,ncol(data.frame(m))),
fpm = NULL, mref = rep(NA, ncol(data.frame(m))), cova = NULL,
mcov = NULL, mclist = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_org_+3A_pred">pred</code></td>
<td>

<p>a vector or matrix of exposure variable(s).
</p>
</td></tr>
<tr><td><code id="data_org_+3A_m">m</code></td>
<td>

<p>a data frame with all mediators.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_y">y</code></td>
<td>

<p>the response variable.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_refy">refy</code></td>
<td>

<p>the reference group of the response variable if y is binary or categorical.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_predref">predref</code></td>
<td>

<p>the reference group(s) of the exposure variable(s) by the column of pred.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_fpy">fpy</code></td>
<td>

<p>the transformation function expressions on pred in explaining y (eg, list(1,c(&quot;x^2&quot;,&quot;log(x)&quot;))). The first item lists column numbers/variable names of the exposure variable in pred, which needs to be transformed. By that order, each of the rest items of fpy list the transformation functional expressions for each exposure. The exposures not specified in the list will not be transformed in any way in explaining y. For example, list(1,c(&quot;x^2&quot;,&quot;log(x)&quot;)) means that the first column of the pred will be transformed to square and log forms in the function to explain y.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_deltap">deltap</code></td>
<td>

<p>the vector of differences in the exposure variable when calculating the partial differences in methods 2 and 3. The vector is in the order of columns of pred. By default, 0.001 for continuous variables and 1 for binary or categorical exposures.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_fmy">fmy</code></td>
<td>

<p>the transformation function expressions on m in explaining y. The first item lists column numbers/variable names of the mediator in m, which needs to be transformed. By that order, each of the rest items of fmy list the transformation functional expressions for each mediator. The mediators not specified in the list will keep the original formats in explaining y.</p>
</td></tr>
<tr><td><code id="data_org_+3A_deltam">deltam</code></td>
<td>

<p>the vector of differences in the mediators in calculating the partial difference in y for method 2. The vector is in the order of columns of m. By default, 0.001 for continuous variables and 1 for binary or categorical mediators.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_fpm">fpm</code></td>
<td>

<p>the transformation-function-expression list on exposure variable(s) (pred) in explaining mediators (m). The first item is a matrix with two columns: the first column is the column numbers of the mediators in m, which should be explained by the transformed predictor(s). The second column indicates the column number of the exposure in pred that will be transformed to explain the mediator identified by the 1st column of the same row. By the order of the rows of the first item, each of the rest items of fpm lists the transformation functional expressions for the exposure (identified by column 2) in explaining each mediator (identified by column 1). The mediators not specified in the list will be explained by the original format of the exposures in pred. For example, fpm=list(matrix(c(1,2,1,1),2,2), &quot;x^2&quot;,c(&quot;x&quot;,&quot;x^2&quot;)) means that pred[,1]^2 is used to explain m[,1], and both pred[,1] and pred[,1]^2 are used to explain m[,2].
</p>
</td></tr>
<tr><td><code id="data_org_+3A_mref">mref</code></td>
<td>

<p>the reference group of the mediators in the order of the columns of m.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_cova">cova</code></td>
<td>

<p>the covariates that are used to explain y in addition to pred, m and/or their transformations.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_mcov">mcov</code></td>
<td>

<p>the covariates that are used to explain mediators in additon to pred and/or their transformations.
</p>
</td></tr>
<tr><td><code id="data_org_+3A_mclist">mclist</code></td>
<td>

<p>If mclist is NULL (by default), all covariates in mcov are used for all mediators in m. Otherwise, the first item of mclist lists all column numbers/names of mediators in m that are to be explained by covariates in mcov, the following items give the covariates in mcov for the mediators in the order of the first item. Use NA if no mcov is to be used.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list with transformed and organized data with the following items:
</p>
<table role = "presentation">
<tr><td><code>N</code></td>
<td>
<p>total number of obserations.</p>
</td></tr>
<tr><td><code>y_type</code></td>
<td>
<p>the data type of y: 1 for continuous, 2 is binary, 3 for categorical, and 4 is time-to-event outcome.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>the response variable.</p>
</td></tr>
<tr><td><code>pred1</code></td>
<td>
<p>exposure variable(s) in original formats, pred.</p>
</td></tr>
<tr><td><code>pred1.0</code></td>
<td>
<p>exposure variable(s) in original formats if continuous, binarized if binary or categorical.</p>
</td></tr>
<tr><td><code>pred2</code></td>
<td>
<p>all the exposure variables with transformations for y.</p>
</td></tr>
<tr><td><code>pred3</code></td>
<td>
<p>all the exposure variables with transformations for y and continuous variable be pred+deltap.</p>
</td></tr>
<tr><td><code>cova</code></td>
<td>
<p>the covariance data frame for explaining y.</p>
</td></tr>
<tr><td><code>pred.cont.der</code></td>
<td>
<p>the derivative functions of the continuous exposure variables to explain y.</p>
</td></tr>
<tr><td><code>binpred2</code></td>
<td>
<p>the column numbers of binary exposures in pred2.</p>
</td></tr>
<tr><td><code>catpred2</code></td>
<td>
<p>the column numbers of categorical exposures in pred2. Each row is for one categorical exposure variable: column 1 is the starting column and column 2 is the ending column in pred2.</p>
</td></tr>
<tr><td><code>contpred2</code></td>
<td>
<p>the column numbers of continuous exposures in pred2. Each row is for one continuous exposure variable: column 1 is the starting column and column 2 is the ending column in pred2.</p>
</td></tr>
<tr><td><code>binpred1</code></td>
<td>
<p>the column numbers of binary exposures in pred1.</p>
</td></tr>
<tr><td><code>catpred1</code></td>
<td>
<p>the column numbers of categorical exposures in pred1.</p>
</td></tr>
<tr><td><code>contpred1</code></td>
<td>
<p>the column numbers of continuous exposures in pred1.</p>
</td></tr>
<tr><td><code>binpred1.0</code></td>
<td>
<p>the column numbers of binary exposures in pred1.0.</p>
</td></tr>
<tr><td><code>catpred1.0</code></td>
<td>
<p>the column numbers of categorical exposures in pred1.0. Each row is for one categorical exposure variable: column 1 is the starting column and column 2 is the ending column in pred2.</p>
</td></tr>
<tr><td><code>contpred1.0</code></td>
<td>
<p>the column numbers of continuous exposures in pred1.0.</p>
</td></tr>
<tr><td><code>contpred3</code></td>
<td>
<p>the column numbers of continuous exposures in pred3 and in pred.cont.der. Each row is for one continuous exposure variable: column 1 is the starting column and column 2 is the ending column in pred3.</p>
</td></tr>
<tr><td><code>npred</code></td>
<td>
<p>the number of exposure variables.</p>
</td></tr>
<tr><td><code>m1</code></td>
<td>
<p>the mediators in their original format.</p>
</td></tr>
<tr><td><code>m2</code></td>
<td>
<p>the mediators all transformed to formats in explaining y.</p>
</td></tr>
<tr><td><code>m3</code></td>
<td>
<p>transformed continuous mediators at the value of mediator+deltam.</p>
</td></tr>
<tr><td><code>m.cont.der</code></td>
<td>
<p>derivative of the transformation functions for continuous mediators.</p>
</td></tr>
<tr><td><code>binm2</code></td>
<td>
<p>the column number of binary mediators in m2.</p>
</td></tr>
<tr><td><code>catm2</code></td>
<td>
<p>the column number of categorical mediators in m2. Each row is for one categorical mediator: column 1 is the starting column and column 2 is the ending column in m2.</p>
</td></tr>
<tr><td><code>contm2</code></td>
<td>
<p>the column number of continuous mediators in m2. Each row is for one continuous mediator: column 1 is the starting column and column 2 is the ending column in m2.</p>
</td></tr>
<tr><td><code>binm1</code></td>
<td>
<p>the column number of binary mediators in m1.</p>
</td></tr>
<tr><td><code>catm1</code></td>
<td>
<p>the column number of categorical mediators in m1.</p>
</td></tr>
<tr><td><code>contm1</code></td>
<td>
<p>the column number of continuous mediators in m1.</p>
</td></tr>
<tr><td><code>contm3</code></td>
<td>
<p>the column numbers of continuous mediators in m3 and in m.cont.der. Each row is for one continuous mediator: column 1 is the starting column and column 2 is the ending column in m3 and m.cont.der.</p>
</td></tr>
<tr><td><code>nm</code></td>
<td>
<p>total number of mediators.</p>
</td></tr>
<tr><td><code>pm</code></td>
<td>
<p>the matrix of exposures with transformations that are used to explain mediators. The first column is all 0s.</p>
</td></tr>
<tr><td><code>pm.der</code></td>
<td>
<p>the derivative matrix of exposures and transformed exposures that are used to explain mediators.</p>
</td></tr>
<tr><td><code>pm.idx</code></td>
<td>
<p>a list, with the ith item gives the column numbers in pm that are used to explain the ith mediator.</p>
</td></tr>
<tr><td><code>pm.ind</code></td>
<td>
<p>a matrix, with the ith row gives the column numbers in pm that are used to explain the ith mediator. </p>
</td></tr>
<tr><td><code>fpm.2</code></td>
<td>
<p>a list similar to fpm. </p>
</td></tr>
<tr><td><code>binp</code></td>
<td>
<p>the column number of binary exposures in pm.</p>
</td></tr>
<tr><td><code>catp</code></td>
<td>
<p>the column number of categorical exposures in pm. Each row is for one categorical exposure: column 1 is the starting column and column 2 is the ending column in pm.</p>
</td></tr>
<tr><td><code>contp</code></td>
<td>
<p>the column number of continuous exposures in pm. Each row is for one continuous exposure: column 1 is the starting column and column 2 is the ending column in pm.</p>
</td></tr>
<tr><td><code>p1</code></td>
<td>
<p>the number of continuous mediators.</p>
</td></tr>
<tr><td><code>p2</code></td>
<td>
<p>the number of binary mediators.</p>
</td></tr>
<tr><td><code>p3</code></td>
<td>
<p>the number of categorical mediators.</p>
</td></tr>
<tr><td><code>mcov</code></td>
<td>
<p>the matrix of all covariates for explaining mediators.</p>
</td></tr>
<tr><td><code>mind</code></td>
<td>
<p>a matrix with the ith row indicate the columns of covariates in mcov that should be used to explain the ith mediator.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu and Bin Li
</p>

<hr>
<h2 id='print.summary.bma'>
Print the results from the summary function.
</h2><span id='topic+print.summary.bma'></span>

<h3>Description</h3>

<p>Print the summary results from summary.bma.bx.cy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary.bma'
print(x, ..., digit = x$digit, method = x$method, RE = x$RE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary.bma_+3A_x">x</code></td>
<td>

<p>the oject from summary.bma.bx.cy.
</p>
</td></tr>
<tr><td><code id="print.summary.bma_+3A_...">...</code></td>
<td>

<p>other arguments.
</p>
</td></tr>
<tr><td><code id="print.summary.bma_+3A_digit">digit</code></td>
<td>

<p>the nubmer of digits to be printed.
</p>
</td></tr>
<tr><td><code id="print.summary.bma_+3A_method">method</code></td>
<td>

<p>the method to be used.
</p>
</td></tr>
<tr><td><code id="print.summary.bma_+3A_re">RE</code></td>
<td>

<p>if ture, print the relative effect
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Print and plot from the summary of bma.bx.cy.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu and Bin Li
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see example at bma.bx.cy.
</code></pre>

<hr>
<h2 id='summary.bma.bx.cy'>
Summary function for the bma.bx.cy object
</h2><span id='topic+summary.bma.bx.cy'></span>

<h3>Description</h3>

<p>Calculate the Bayesian estimates, standard deviations and credible sets for the mediation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bma.bx.cy'
summary(object, ..., plot = TRUE, RE = TRUE,
quant = c(0.025, 0.25, 0.5, 0.75, 0.975), digit = 4, method = 3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.bma.bx.cy_+3A_object">object</code></td>
<td>

<p>The bma.bx.cy object which is the outcome of the function bam.bx.cy.
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_plot">plot</code></td>
<td>

<p>If plot is True (default), plot the estimated (relative) effects with the predicted credit sets, using method specified by method.
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_re">RE</code></td>
<td>

<p>If RE is true, the relative effect plot is drawn.
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_quant">quant</code></td>
<td>

<p>The quantiles of the estimates to be reported. By default, the quantiles are c(0.025, 0.25, 0.5, 0.75, 0.975).
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_digit">digit</code></td>
<td>

<p>The number of digit to print in the result.
</p>
</td></tr>
<tr><td><code id="summary.bma.bx.cy_+3A_method">method</code></td>
<td>

<p>The method is printing to be used for estimation.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns an object that has the following items:
</p>
<table role = "presentation">
<tr><td><code>result1</code></td>
<td>
<p>The result of (in)direct estimates from method 1.</p>
</td></tr>
<tr><td><code>result1.re</code></td>
<td>
<p>The result of relative (in)direct estimates from method 1.</p>
</td></tr>
<tr><td><code>result2</code></td>
<td>
<p>The result of (in)direct estimates from method 2.</p>
</td></tr>
<tr><td><code>result2.re</code></td>
<td>
<p>The result of relative (in)direct estimates from method 2.</p>
</td></tr>
<tr><td><code>result3</code></td>
<td>
<p>The result of (in)direct estimates from method 3.</p>
</td></tr>
<tr><td><code>result3.re</code></td>
<td>
<p>The result of relative (in)direct estimates from method 3.</p>
</td></tr>
<tr><td><code>result4</code></td>
<td>
<p>The result of (in)direct estimates from method 4.</p>
</td></tr>
<tr><td><code>result4.re</code></td>
<td>
<p>The result of relative (in)direct estimates from method 4.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu and Ari Li.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># See examples at bma.bx.cy.
</code></pre>

<hr>
<h2 id='weight_behavior'>
Weight_Behavior Data Set
</h2><span id='topic+weight_behavior'></span>

<h3>Description</h3>

<p>This database was obtained from the Louisiana State University Health Sciences Center, New Orleans, by Dr. Richard Scribner.  He explored the relationship between BMI and kids behavior through a survey at children, teachers and parents in Grenada in 2014.  This data set includes 691 observations and 15 variables. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(weight_behavior)</code></pre>


<h3>Format</h3>

<p>The data set contains the following variables:
</p>
<p>bmi - body mass index, calculated by weight(kg)/height(cm)^2, numeric
</p>
<p>age - children's age in years at the time of survey, numeric
</p>
<p>sex - sex of the children, factor
</p>
<p>race - race of the children, factor
</p>
<p>numpeople - number of people in family, numeric
</p>
<p>car - the number of cars in family, numeric
</p>
<p>gotosch -  the method used to go to school, factor
</p>
<p>snack - eat snack or not in a day, binary
</p>
<p>tvhours - number of hours watching TV per week, numeric
</p>
<p>cmpthours - number of hours using computer per week, numeric
</p>
<p>cellhours - number of hours playing with cell phones per week, numeric
</p>
<p>sports - join in a sport team or not, 1: yes; and 2: no
</p>
<p>exercises - number of hours of exercises per week, numeric
</p>
<p>sweat - number of hours of sweating activities per week, numeric
</p>
<p>overweigh - the child is overweighed or not, binary
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(weight_behavior)
names(weight_behavior)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
