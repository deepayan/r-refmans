<!DOCTYPE html><html><head><title>Help for package webmorphR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {webmorphR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#webmorphR'><p>webmorphR: Reproducible Face Stimuli</p></a></li>
<li><a href='#[.stimlist'><p>Extract stimlist elements</p></a></li>
<li><a href='#[[&lt;-.stimlist'><p>Replace stimlist element</p></a></li>
<li><a href='#add_info'><p>Add Information</p></a></li>
<li><a href='#align'><p>Align templates and images</p></a></li>
<li><a href='#animate'><p>Create an animated gif from a list of stimuli</p></a></li>
<li><a href='#as_ggplot'><p>Convert stimuli to a ggplot</p></a></li>
<li><a href='#as_stimlist'><p>Convert list to stimlist</p></a></li>
<li><a href='#auto_delin'><p>Auto-Delineation</p></a></li>
<li><a href='#average_tem'><p>Average templates</p></a></li>
<li><a href='#avg'><p>Average Images</p></a></li>
<li><a href='#blank'><p>Make blank images</p></a></li>
<li><a href='#bounds'><p>Get template bounds</p></a></li>
<li><a href='#c.stim'><p>Combine stim</p></a></li>
<li><a href='#c.stimlist'><p>Combine stimlists</p></a></li>
<li><a href='#centroid'><p>Get center coordinates</p></a></li>
<li><a href='#change_lines'><p>Change template lines</p></a></li>
<li><a href='#col2lab'><p>Color to Lab Conversion</p></a></li>
<li><a href='#color_conv'><p>Convert colors</p></a></li>
<li><a href='#compare'><p>Image Comparison</p></a></li>
<li><a href='#continuum'><p>Morph between two images</p></a></li>
<li><a href='#convert_tem'><p>Convert templates</p></a></li>
<li><a href='#crop'><p>Crop images and templates</p></a></li>
<li><a href='#crop_tem'><p>Crop to template boundaries and pad</p></a></li>
<li><a href='#delin'><p>Manually delineate images</p></a></li>
<li><a href='#demo_stim'><p>Demo Stimuli</p></a></li>
<li><a href='#draw_tem'><p>Draw template</p></a></li>
<li><a href='#features'><p>Feature Points</p></a></li>
<li><a href='#format_size'><p>Format file size</p></a></li>
<li><a href='#get_imgs'><p>Get Images into List</p></a></li>
<li><a href='#get_info'><p>Get Information</p></a></li>
<li><a href='#get_point'><p>Get Point Coordinates</p></a></li>
<li><a href='#gglabel'><p>Label with ggplot annotations</p></a></li>
<li><a href='#greyscale'><p>Make images greyscale</p></a></li>
<li><a href='#height'><p>Image heights</p></a></li>
<li><a href='#horiz_eyes'><p>Make eyes horizontal</p></a></li>
<li><a href='#image_func'><p>Apply a magick function to each image</p></a></li>
<li><a href='#image_func_types'><p>Possible functions</p></a></li>
<li><a href='#lab2rgb'><p>Lab to RGB Conversion</p></a></li>
<li><a href='#label'><p>Label images</p></a></li>
<li><a href='#list_to_tbl'><p>List format to table format</p></a></li>
<li><a href='#loop'><p>Loop</p></a></li>
<li><a href='#mask'><p>Mask Images with templates</p></a></li>
<li><a href='#mask_oval'><p>Apply an oval mask to images</p></a></li>
<li><a href='#message'><p>WebmorphR Message</p></a></li>
<li><a href='#metrics'><p>Image shape metrics</p></a></li>
<li><a href='#mirror'><p>Mirror templates and images</p></a></li>
<li><a href='#mlabel'><p>Label with magick annotations</p></a></li>
<li><a href='#new_stim'><p>Make a new stim</p></a></li>
<li><a href='#new_stimlist'><p>Make a new stimlist</p></a></li>
<li><a href='#OR'><p>Piped OR</p></a></li>
<li><a href='#pad'><p>Pad images</p></a></li>
<li><a href='#patch'><p>Patch colour</p></a></li>
<li><a href='#plot_rows'><p>Plot in rows</p></a></li>
<li><a href='#plot_stim'><p>Plot stimuli</p></a></li>
<li><a href='#plot.stim'><p>Plot stim</p></a></li>
<li><a href='#plot.stimlist'><p>Plot stimuli</p></a></li>
<li><a href='#print.stim'><p>Print stim</p></a></li>
<li><a href='#print.stimlist'><p>Print stimlist</p></a></li>
<li><a href='#procrustes_coords'><p>Procrustes align templates</p></a></li>
<li><a href='#read_img'><p>Read image file</p></a></li>
<li><a href='#read_stim'><p>Read stimuli</p></a></li>
<li><a href='#read_tem'><p>Read tem file</p></a></li>
<li><a href='#readline_check'><p>Check readline input</p></a></li>
<li><a href='#remove_tem'><p>Remove templates</p></a></li>
<li><a href='#rename_stim'><p>Set stimulus names in a stimlist</p></a></li>
<li><a href='#rep.stim'><p>Repeat stim in a list</p></a></li>
<li><a href='#rep.stimlist'><p>Repeat stim in a list</p></a></li>
<li><a href='#require_tems'><p>Require templates</p></a></li>
<li><a href='#resize'><p>Resize stimuli</p></a></li>
<li><a href='#rotate'><p>Rotate templates and images</p></a></li>
<li><a href='#rotated_size'><p>Image size after rotation</p></a></li>
<li><a href='#same_tems'><p>Check All Templates are the Same</p></a></li>
<li><a href='#social_media_size'><p>Social Media Image Sizes</p></a></li>
<li><a href='#squash_tem'><p>Squash Template Points</p></a></li>
<li><a href='#subset_tem'><p>Subset template points</p></a></li>
<li><a href='#subset.stimlist'><p>Subset Stimulus Lists</p></a></li>
<li><a href='#svgBezier'><p>Construct Bezier Curves from Template Points</p></a></li>
<li><a href='#svgControlPoints'><p>Get Control Points</p></a></li>
<li><a href='#svgCubicTo'><p>SVG Path Quadratic Curve</p></a></li>
<li><a href='#svgLineTo'><p>SVG Path Line</p></a></li>
<li><a href='#svgMoveTo'><p>SVG Path Move</p></a></li>
<li><a href='#svgQuadraticTo'><p>SVG Path Quadratic Curve</p></a></li>
<li><a href='#symmetrize'><p>Symmetrize Images</p></a></li>
<li><a href='#tem_def'><p>Get template definition</p></a></li>
<li><a href='#tem_text'><p>Make text version of a template</p></a></li>
<li><a href='#tems_to_array'><p>Convert stimuli to array for geomorph</p></a></li>
<li><a href='#to_size'><p>Resize and crop/pad images to a specified size</p></a></li>
<li><a href='#trans'><p>Transform Images</p></a></li>
<li><a href='#unique_names'><p>Get unique names</p></a></li>
<li><a href='#viz_tem_def'><p>Visualise a template definition</p></a></li>
<li><a href='#webmorph_up'><p>Check if webmorph.org is available</p></a></li>
<li><a href='#width'><p>Image widths</p></a></li>
<li><a href='#wm_opts'><p>Set/get global webmorph options</p></a></li>
<li><a href='#wm_opts_defaults'><p>WebmorphR default options</p></a></li>
<li><a href='#write_stim'><p>Write images and templates to files</p></a></li>
<li><a href='#write_tps'><p>Create a TPS file from a stimlist</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Reproducible Stimuli</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-01</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Create reproducible image stimuli, 
    specialised for face images with 'psychomorph' or 'webmorph' templates.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://debruine.github.io/webmorphR/">https://debruine.github.io/webmorphR/</a>,
<a href="https://github.com/debruine/webmorphR">https://github.com/debruine/webmorphR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/debruine/webmorphR/issues">https://github.com/debruine/webmorphR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>tools, grDevices, stats, dplyr, jsonlite, magick, geomorph,
httr, progress, rsvg, grid, ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>shiny, shinyjs, shinydashboard, shinyWidgets, DT, gifski,
testthat, usethis, rmarkdown, covr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-01 13:44:17 UTC; lisad</td>
</tr>
<tr>
<td>Author:</td>
<td>Lisa DeBruine <a href="https://orcid.org/0000-0002-7523-5539"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Emily Cunningham [pfr, ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lisa DeBruine &lt;debruine@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-02 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='webmorphR'>webmorphR: Reproducible Face Stimuli</h2><span id='topic+webmorphR'></span><span id='topic+webmorphR-package'></span>

<h3>Description</h3>

<p>Create reproducible image stimuli, specialised for images with webmorph.org templates.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Lisa DeBruine <a href="mailto:debruine@gmail.com">debruine@gmail.com</a> (<a href="https://orcid.org/0000-0002-7523-5539">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Emily Cunningham <a href="mailto:ekc00004@students.stir.ac.uk">ekc00004@students.stir.ac.uk</a> [proofreader, contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://debruine.github.io/webmorphR/">https://debruine.github.io/webmorphR/</a>
</p>
</li>
<li> <p><a href="https://github.com/debruine/webmorphR">https://github.com/debruine/webmorphR</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/debruine/webmorphR/issues">https://github.com/debruine/webmorphR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+5B.stimlist'>Extract stimlist elements</h2><span id='topic++5B.stimlist'></span>

<h3>Description</h3>

<p>Extract stimlist elements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
x[i]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B.stimlist_+3A_x">x</code></td>
<td>
<p>stimlist from which to extract elements</p>
</td></tr>
<tr><td><code id="+2B5B.stimlist_+3A_i">i</code></td>
<td>
<p>indices to be selected</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>

<hr>
<h2 id='+5B+5B+26lt+3B-.stimlist'>Replace stimlist element</h2><span id='topic++5B+5B+3C-.stimlist'></span>

<h3>Description</h3>

<p>Replace stimlist element
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'stimlist'
x[[i]] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B5B+2B5B+2B26lt+2B3B-.stimlist_+3A_x">x</code></td>
<td>
<p>stimlist from which to extract elements</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B26lt+2B3B-.stimlist_+3A_i">i</code></td>
<td>
<p>index to be replaced</p>
</td></tr>
<tr><td><code id="+2B5B+2B5B+2B26lt+2B3B-.stimlist_+3A_value">value</code></td>
<td>
<p>stim element to replace with</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>

<hr>
<h2 id='add_info'>Add Information</h2><span id='topic+add_info'></span>

<h3>Description</h3>

<p>Add info with a data table that contains the info in either the same order as the stimulus list, or matching the stimuli item name with the column specified by <code>.by</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_info(stimuli, ..., .by = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_info_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="add_info_+3A_...">...</code></td>
<td>
<p>data table or named vectors of info to add</p>
</td></tr>
<tr><td><code id="add_info_+3A_.by">.by</code></td>
<td>
<p>the column to use to match info to stimuli names; leave NULL if the data are to be matched by order</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can also add data as named vectors.
</p>


<h3>Value</h3>

<p>list of stimuli with info added
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt;
  add_info(project = "XXX", gender = c("F", "M"))

stimuli$f_multi$info |&gt; str()

</code></pre>

<hr>
<h2 id='align'>Align templates and images</h2><span id='topic+align'></span>

<h3>Description</h3>

<p>Align images so that template points line up. Defaults to two-point alignment of the first two points in your template (usually the eyes) to their mean coordinate position across the stimuli.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>align(
  stimuli,
  pt1 = 0,
  pt2 = 1,
  x1 = NULL,
  y1 = NULL,
  x2 = NULL,
  y2 = NULL,
  width = NULL,
  height = NULL,
  ref_img = NULL,
  fill = wm_opts("fill"),
  procrustes = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="align_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="align_+3A_pt1">pt1</code></td>
<td>
<p>The first point to align (defaults to 0)</p>
</td></tr>
<tr><td><code id="align_+3A_pt2">pt2</code></td>
<td>
<p>The second point to align (defaults to 1)</p>
</td></tr>
<tr><td><code id="align_+3A_x1">x1</code>, <code id="align_+3A_y1">y1</code>, <code id="align_+3A_x2">x2</code>, <code id="align_+3A_y2">y2</code></td>
<td>
<p>The coordinates to align the first and second point to</p>
</td></tr>
<tr><td><code id="align_+3A_width">width</code>, <code id="align_+3A_height">height</code></td>
<td>
<p>The dimensions of the aligned images</p>
</td></tr>
<tr><td><code id="align_+3A_ref_img">ref_img</code></td>
<td>
<p>The reference image to get coordinates and dimensions from if they are NULL</p>
</td></tr>
<tr><td><code id="align_+3A_fill">fill</code></td>
<td>
<p>background color if cropping goes outside the original image, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="align_+3A_procrustes">procrustes</code></td>
<td>
<p>logical; whether to use procrustes alignment</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Setting pt1 the same as pt2 aligns 1 point, but does not resize or rotate images. Setting pt1 and pt2 aligns 2 points, resizing and rotating faces. Setting <code>procrustes = TRUE</code> uses Procrustes analysis to resize and rotate images to be as close as possible to a mean shape.
</p>
<p>You can specify the x and y coordinates to align, and the width and height of the output images, or set them from a reference image. The reference image (<code>ref_img</code>) can be a stim, a 1-item stimlist, or the index or name of a stim in stimuli. It defaults to average of all stimuli if NULL.
</p>
<p>Visualise the template points with <code><a href="#topic+draw_tem">draw_tem()</a></code> to determine which to align, using pt.shape = &quot;index&quot;.
</p>


<h3>Value</h3>

<p>list of stimuli with aligned images and/or templates
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># align eye points to specific x and y coordinates
# in a 300x300 pixel image
demo_unstandard(1:3) |&gt;
  align(pt1 = 0, pt2 = 1,
        x1 = 100, x2 = 200, y1 = 100, y2 = 100, 
        width = 300, height = 300)


orig &lt;- demo_unstandard()

# align to bottom-centre of nose (average position)
align(orig, pt1 = 55, pt2 = 55, fill = "dodgerblue")

# align to pupils of second image
align(orig, ref_img = 2, fill = "dodgerblue")


## Not run: 
# procrustes align to average position
# this requires XQuartz on mac and may not run on linux
align(orig, procrustes = TRUE, fill = "dodgerblue")

## End(Not run)
</code></pre>

<hr>
<h2 id='animate'>Create an animated gif from a list of stimuli</h2><span id='topic+animate'></span>

<h3>Description</h3>

<p>Create an animated gif from a list of stimuli
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animate(stimuli, fps = 1, loop = 0, rev = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="animate_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="animate_+3A_fps">fps</code></td>
<td>
<p>frames per second</p>
</td></tr>
<tr><td><code id="animate_+3A_loop">loop</code></td>
<td>
<p>how many times to loop the animation (0 = infinite)</p>
</td></tr>
<tr><td><code id="animate_+3A_rev">rev</code></td>
<td>
<p>whether to loop back and forth (TRUE) or in one direction (FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>magick image
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# slideshow of images (1/second)
demo_stim() |&gt; animate()

# rotate a face
degrees &lt;- seq(0, 350, 10)
demo_stim(1) |&gt;
  mask() |&gt;
  rep(length(degrees)) |&gt;
  rotate(degrees) |&gt;
  animate(fps = 10)

</code></pre>

<hr>
<h2 id='as_ggplot'>Convert stimuli to a ggplot</h2><span id='topic+as_ggplot'></span>

<h3>Description</h3>

<p>Convert a stimulus or list of stimuli into a ggplot, which can be further used with ggplot functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_ggplot(stimuli, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_ggplot_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="as_ggplot_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <code><a href="#topic+plot_stim">plot_stim()</a></code> if stimuli contains more than 1 image</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object
</p>


<h3>See Also</h3>

<p>Visualisation functions
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
gg &lt;- as_ggplot(stimuli)

# add to ggplot object; coordinates are pixels
# (images are 500x500 each, plus 10px padding)
gg + 
  ggplot2::geom_vline(xintercept = 0, color = "red") +
  ggplot2::geom_vline(xintercept = 1030, color = "blue") +
  ggplot2::geom_hline(yintercept = 0, color = "green") +
  ggplot2::geom_hline(yintercept = 520, color = "purple") +
  ggplot2::annotate("point", x = 515, y = 260, size = 10) +
  ggplot2::labs(
    title = "This is a ggplot!",
    caption = "Made with webmorphR"
  )
</code></pre>

<hr>
<h2 id='as_stimlist'>Convert list to stimlist</h2><span id='topic+as_stimlist'></span>

<h3>Description</h3>

<p>Checks if an object is a stimulus or list of stimuli and repairs common problems.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_stimlist(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_stimlist_+3A_x">x</code></td>
<td>
<p>The object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some webmorphR functions, like <code><a href="graphics.html#topic+plot">plot()</a></code> and <code><a href="base.html#topic+print">print()</a></code> require objects to have a &quot;stimlist&quot; class. If you've processed a list of stimuli with iterator functions like <code><a href="base.html#topic+lapply">lapply()</a></code> or <code><a href="purrr.html#topic+map">purrr::map()</a></code> and the resulting object prints or plots oddly, it is probably unclassed, and this function will fix that.
</p>


<h3>Value</h3>

<p>A stimlist
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt;
  lapply(function(stim) {
    # remove template lines
    stim$lines &lt;- NULL
    return(stim)
  })
  
class(stimuli)

## Not run: 
plot(stimuli) # error

## End(Not run)

s &lt;- as_stimlist(stimuli)
class(s)
plot(s)

</code></pre>

<hr>
<h2 id='auto_delin'>Auto-Delineation</h2><span id='topic+auto_delin'></span>

<h3>Description</h3>

<p>Automatically delineate faces using Face++ (an external service). Since each delineation counts against a daily limit, you need to set up your own Face++ account (see details below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>auto_delin(stimuli, model = c("fpp106", "fpp83"), replace = FALSE, face = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="auto_delin_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="auto_delin_+3A_model">model</code></td>
<td>
<p>Which model (fpp106, fpp83)</p>
</td></tr>
<tr><td><code id="auto_delin_+3A_replace">replace</code></td>
<td>
<p>logical; whether to replace original templates - if FALSE, only gets templates for images with no template</p>
</td></tr>
<tr><td><code id="auto_delin_+3A_face">face</code></td>
<td>
<p>which face to delineate in each image if there is more than 1</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To use Face++ auto-delineation, you need to get your own free API key from https://www.faceplusplus.com. After signing up for an account, go to https://console.faceplusplus.com/app/apikey/list and request a free API key. Add the key and secret to your .Renviron file as follows:
</p>
<p>FACEPLUSPLUS_KEY=&quot;1234567890abcdefghijk&quot;
</p>
<p>FACEPLUSPLUS_SECRET=&quot;1234567890abcdefghijk&quot;
</p>


<h3>Value</h3>

<p>list of stimuli with templates
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# requires an API key in .Renviron
auto_fpp106 &lt;- demo_stim() |&gt;
  auto_delin(model = "fpp106", replace = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='average_tem'>Average templates</h2><span id='topic+average_tem'></span>

<h3>Description</h3>

<p>This function just averages the templates. An average image is returned, but it is just all the images superimposed. To create a template-aware average, see <code><a href="#topic+avg">avg()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>average_tem(stimuli, name = "average")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="average_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="average_tem_+3A_name">name</code></td>
<td>
<p>Name for the average</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli consisting of just the average
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tem_only_avg &lt;- demo_stim() |&gt; average_tem()

# view the average template
draw_tem(tem_only_avg, bg = "white")

# view the superimposed image
tem_only_avg
</code></pre>

<hr>
<h2 id='avg'>Average Images</h2><span id='topic+avg'></span>

<h3>Description</h3>

<p>Create an average from a list of delineated stimuli.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>avg(
  stimuli,
  texture = TRUE,
  norm = c("none", "twopoint", "rigid"),
  normpoint = 0:1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="avg_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli to average</p>
</td></tr>
<tr><td><code id="avg_+3A_texture">texture</code></td>
<td>
<p>logical; whether textured should be averaged</p>
</td></tr>
<tr><td><code id="avg_+3A_norm">norm</code></td>
<td>
<p>how to normalise; see Details</p>
</td></tr>
<tr><td><code id="avg_+3A_normpoint">normpoint</code></td>
<td>
<p>points for twopoint normalisation</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Normalisation options</h4>


<ul>
<li><p> none: averages will have all coordinates as the mathematical average of the coordinates in the component templates
</p>
</li>
<li><p> twopoint: all images are first aligned to the 2 alignment points designated in <code>normpoint</code>. Their position is set to their position in the first image in stimuli
</p>
</li>
<li><p> rigid: procrustes aligns all images to the position of the first image in stimuli
</p>
</li></ul>




<h4>Texture</h4>

<p>This applies a representative texture to the average, resulting in composite images with more realistic texture instead of the very smooth, bland texture most other averaging programs create. See the papers below for methodological details.
</p>
<p>B. Tiddeman, M. Stirrat and D. Perrett (2005). Towards realism in facial prototyping: results of a wavelet MRF method. Theory and Practice of Computer Graphics.
</p>
<p>B. Tiddeman, D.M. Burt and D. Perrett (2001). Computer Graphics in Facial Perception Research. IEEE Computer Graphics and Applications, 21(5), 42-50.
</p>



<h3>Value</h3>

<p>list of stimuli with the average image and template
</p>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+continuum">continuum</a>()</code>,
<code><a href="#topic+loop">loop</a>()</code>,
<code><a href="#topic+symmetrize">symmetrize</a>()</code>,
<code><a href="#topic+trans">trans</a>()</code>,
<code><a href="#topic+webmorph_up">webmorph_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (webmorph_up()) {
  demo_stim() |&gt; avg()
}

</code></pre>

<hr>
<h2 id='blank'>Make blank images</h2><span id='topic+blank'></span>

<h3>Description</h3>

<p>Make blank images
</p>


<h3>Usage</h3>

<pre><code class='language-R'>blank(n = 1, width = 100, height = 100, color = "white", names = "img")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="blank_+3A_n">n</code></td>
<td>
<p>the number of images to return</p>
</td></tr>
<tr><td><code id="blank_+3A_width">width</code>, <code id="blank_+3A_height">height</code></td>
<td>
<p>image dimensions</p>
</td></tr>
<tr><td><code id="blank_+3A_color">color</code></td>
<td>
<p>background color, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="blank_+3A_names">names</code></td>
<td>
<p>names of the images (appended with index if &lt; n)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- blank(5, 100, 250, color = rainbow(5))

label(stimuli, size = 20)
</code></pre>

<hr>
<h2 id='bounds'>Get template bounds</h2><span id='topic+bounds'></span>

<h3>Description</h3>

<p>Get template bounds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bounds(stimuli, each = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bounds_+3A_stimuli">stimuli</code></td>
<td>
<p>A stimlist</p>
</td></tr>
<tr><td><code id="bounds_+3A_each">each</code></td>
<td>
<p>Whether to calculate max and min for the full set (default) or each image separately</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of min and max x and y values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt; bounds() |&gt; str()

demo_stim() |&gt; bounds(each = TRUE)
</code></pre>

<hr>
<h2 id='c.stim'>Combine stim</h2><span id='topic+c.stim'></span>

<h3>Description</h3>

<p>Combine stim
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stim'
c(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c.stim_+3A_...">...</code></td>
<td>
<p>stim to be concatenated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>

<hr>
<h2 id='c.stimlist'>Combine stimlists</h2><span id='topic+c.stimlist'></span>

<h3>Description</h3>

<p>Combine stimlists
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
c(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c.stimlist_+3A_...">...</code></td>
<td>
<p>stimlists to be concatenated</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>

<hr>
<h2 id='centroid'>Get center coordinates</h2><span id='topic+centroid'></span>

<h3>Description</h3>

<p>Get center coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>centroid(stimuli, points = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="centroid_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="centroid_+3A_points">points</code></td>
<td>
<p>which points to include (0-based); if NULL, all points will be used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>named matrix of centroid x and y coordinates
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt; centroid()

# get the centre of the eye points
demo_stim() |&gt; centroid(0:1)
</code></pre>

<hr>
<h2 id='change_lines'>Change template lines</h2><span id='topic+change_lines'></span>

<h3>Description</h3>

<p>Alter, add or remove lines in a template
</p>


<h3>Usage</h3>

<pre><code class='language-R'>change_lines(stimuli, line_id = 1, pts = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="change_lines_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="change_lines_+3A_line_id">line_id</code></td>
<td>
<p>index of the line to change</p>
</td></tr>
<tr><td><code id="change_lines_+3A_pts">pts</code></td>
<td>
<p>vector of points to change the line_idx to (deletes line if NULL)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with altered templates
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get image with dlib70 template and view lines
s &lt;- demo_tems("dlib70")
s[[1]]$lines

# remove all lines
s2 &lt;- change_lines(s, line_id = 1:13, pts = NULL)
s2[[1]]$lines

# visualise point indices
draw_tem(s2, pt.shape = "index", pt.size = 15)

# add a new line
s3 &lt;- change_lines(s2, line_id = "face_outline", 
                   pts = c(2:18, 28:19, 2))
s3[[1]]$lines
draw_tem(s3)
</code></pre>

<hr>
<h2 id='col2lab'>Color to Lab Conversion</h2><span id='topic+col2lab'></span>

<h3>Description</h3>

<p>R color to Lab colourspace conversion. Calculated with Observer. = 2°, Illuminant = D65.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col2lab(col, ref_X = 95.047, ref_Y = 100, ref_Z = 108.883)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col2lab_+3A_col">col</code></td>
<td>
<p>vector of hex or color names</p>
</td></tr>
<tr><td><code id="col2lab_+3A_ref_x">ref_X</code>, <code id="col2lab_+3A_ref_y">ref_Y</code>, <code id="col2lab_+3A_ref_z">ref_Z</code></td>
<td>
<p>Reference values for Observer= 2°, Illuminant= D65</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formulas used to convert from RGB to XYZ and XYZ to Lab are from http://www.easyrgb.com/en/math.php and the reference values are from http://www.brucelindbloom.com/index.html?ColorCheckerCalcHelp.html
</p>


<h3>Value</h3>

<p>vector of L, a and b values
</p>


<h3>See Also</h3>

<p>Other color: 
<code><a href="#topic+color_conv">color_conv</a>()</code>,
<code><a href="#topic+lab2rgb">lab2rgb</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>col2lab("red")
col2lab("#FF0000")

</code></pre>

<hr>
<h2 id='color_conv'>Convert colors</h2><span id='topic+color_conv'></span>

<h3>Description</h3>

<p>Convert from common color inputs to specified output type, adding alpha transparency for output formats that support it (hexa, rgba).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>color_conv(
  color,
  alpha = 1,
  from = c("guess", "col", "hex", "hexa", "hex3", "rgb", "rgba", "lab"),
  to = c("hexa", "hex", "rgba", "rgb", "lab", "hsv")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="color_conv_+3A_color">color</code></td>
<td>
<p>A color in one of the input formats (see Details)</p>
</td></tr>
<tr><td><code id="color_conv_+3A_alpha">alpha</code></td>
<td>
<p>Alpha transparency (values &lt;=1 converted to 0-255); ignored if color has alpha already</p>
</td></tr>
<tr><td><code id="color_conv_+3A_from">from</code>, <code id="color_conv_+3A_to">to</code></td>
<td>
<p>Input and output color spaces, see <code>Details</code> below.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> color: one of the R colours listed in <code><a href="grDevices.html#topic+colors">grDevices::colors()</a></code>, e.g., &quot;red&quot;
</p>
</li>
<li><p> hex: hexadecimal string, e.g., &quot;#FF0000&quot;
</p>
</li>
<li><p> hexa: hexadecimal string with alpha, e.g., &quot;#FF0000FF&quot;
</p>
</li>
<li><p> hex3: abbreviated hexadecimal string, e.g., &quot;#F00&quot;
</p>
</li>
<li><p> rgb: vector of red, green and blue values 0-255, e.g., c(255, 0, 0)
</p>
</li>
<li><p> rgba: vector of red, green, blue and alpha values 0-255, e.g., c(255, 0, 0, 255)
</p>
</li>
<li><p> lab: CIE-Lab color
</p>
</li>
<li><p> hsv: vector of hue, saturation and value values (0-1), e.g., c(h=0, s = 1, v = 1)
</p>
</li></ul>



<h3>Value</h3>

<p>color in <code>to</code> format
</p>


<h3>See Also</h3>

<p>Other color: 
<code><a href="#topic+col2lab">col2lab</a>()</code>,
<code><a href="#topic+lab2rgb">lab2rgb</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># different ways to input red
color_conv("red")
color_conv("#FF0000")
color_conv("#FF0000FF")
color_conv(c(255,0,0))
color_conv("rgb(255,0,0)") # you can use CSS-style text
color_conv(c(255,0,0,255))

# Lab must have names or use text format to be guessed
color_conv(c(l = 53.2, a = 80.1, b = 67.2)) 
color_conv("lab(53.2,80.1,67.2)")

# else, it will be guessed as rgb; fix by setting from explicitly
color_conv(c(53.2, 80.1, 67.2))
color_conv(c(53.2, 80.1, 67.2), from = "lab")

# add 50% alpha transparency to dodgerblue
color_conv("dodgerblue", alpha = 0.5, to = "rgba")

</code></pre>

<hr>
<h2 id='compare'>Image Comparison</h2><span id='topic+compare'></span>

<h3>Description</h3>

<p>This is just a convenient way to use magick::compareare with webmorph stimuli. It defaults to the &quot;MSE&quot; metric, which gives a linearly increasing score to images along a morph continuum.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare(stimuli, ref_stim, metric = "MSE", fuzz = 0, scale = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_+3A_stimuli">stimuli</code></td>
<td>
<p>Stimuli to compare to the ref_stim</p>
</td></tr>
<tr><td><code id="compare_+3A_ref_stim">ref_stim</code></td>
<td>
<p>A stim, 1-item stimlist, or the name or index of the comparison item in stim</p>
</td></tr>
<tr><td><code id="compare_+3A_metric">metric</code></td>
<td>
<p>string with a metric from magick::metric_types(): &quot;Undefined&quot;, &quot;AE&quot;, &quot;Fuzz&quot;, &quot;MAE&quot;, &quot;MEPP&quot;, &quot;MSE&quot;, &quot;NCC&quot;, &quot;PAE&quot;, &quot;PHASH&quot;, &quot;PSNR&quot;, &quot;RMSE&quot;</p>
</td></tr>
<tr><td><code id="compare_+3A_fuzz">fuzz</code></td>
<td>
<p>relative color distance (value between 0 and 100) to be considered similar in the filling algorithm (only useful for AE)</p>
</td></tr>
<tr><td><code id="compare_+3A_scale">scale</code></td>
<td>
<p>whether to scale the values so that the maximum value is 1 and the minimum is 0 (only useful when stim is more than 1 image and includes ref_stim)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Metric Types
</p>

<ul>
<li><p> Undefined: ?
</p>
</li>
<li><p> AE: Absolute Error
</p>
</li>
<li><p> Fuzz: ?
</p>
</li>
<li><p> MAE: Mean Absolute Error
</p>
</li>
<li><p> MEPP: Mean Error Per Pixel
</p>
</li>
<li><p> MSE: Mean Squared Error
</p>
</li>
<li><p> NCC: Normalized Cross Correlation
</p>
</li>
<li><p> PAE: Peak Absolute Error
</p>
</li>
<li><p> PHASH: Perceptual Hash
</p>
</li>
<li><p> PSNR: Peak Signal-to-Noise Ratio
</p>
</li>
<li><p> RMSE: Root Mean Squared Error
</p>
</li></ul>

<p>How these metrics behave when comparing a morph continuum to its first image.
</p>
<p>Increases with morph distance:
</p>

<ul>
<li><p> very strong negative exponential decay at 0 fuzz; more linear with higher fuzz: AE
</p>
</li>
<li><p> strong negative exponential decay: PAE
</p>
</li>
<li><p> slight negative exponential decay: Fuzz, RMSE
</p>
</li>
<li><p> linear: MAE, MEPP, MSE
</p>
</li>
<li><p> no idea: PHASH
</p>
</li></ul>

<p>Decreases with morph distance:
</p>

<ul>
<li><p> linear: NCC, Undefined
</p>
</li>
<li><p> slight exponential decay: PSNR
</p>
</li></ul>



<h3>Value</h3>

<p>Difference metric
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
compare(stimuli, stimuli$m_multi)
compare(stimuli, stimuli$m_multi, "AE")
compare(stimuli, stimuli$m_multi, "AE", fuzz = 5)
</code></pre>

<hr>
<h2 id='continuum'>Morph between two images</h2><span id='topic+continuum'></span>

<h3>Description</h3>

<p>Morph from one image to another in the specified steps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>continuum(from_img, to_img, from = 0, to = 1, by = 0.1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="continuum_+3A_from_img">from_img</code></td>
<td>
<p>image to start at</p>
</td></tr>
<tr><td><code id="continuum_+3A_to_img">to_img</code></td>
<td>
<p>image to end at</p>
</td></tr>
<tr><td><code id="continuum_+3A_from">from</code></td>
<td>
<p>starting percentage</p>
</td></tr>
<tr><td><code id="continuum_+3A_to">to</code></td>
<td>
<p>ending percentage</p>
</td></tr>
<tr><td><code id="continuum_+3A_by">by</code></td>
<td>
<p>step size</p>
</td></tr>
<tr><td><code id="continuum_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code><a href="#topic+trans">trans()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of stimuli containing each step of the continuum
</p>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+avg">avg</a>()</code>,
<code><a href="#topic+loop">loop</a>()</code>,
<code><a href="#topic+symmetrize">symmetrize</a>()</code>,
<code><a href="#topic+trans">trans</a>()</code>,
<code><a href="#topic+webmorph_up">webmorph_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (webmorph_up()) {
  stimuli &lt;- demo_stim()
  cont &lt;- continuum(stimuli$f_multi, stimuli$m_multi)
  
  # create an animated gif
  animate(cont, fps = 10, rev = TRUE)
}

</code></pre>

<hr>
<h2 id='convert_tem'>Convert templates</h2><span id='topic+convert_tem'></span>

<h3>Description</h3>

<p>Convert templates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_tem(
  stimuli,
  from = c("guess", "frl", "fpp106", "fpp83", "dlib70", "dlib7"),
  to = c("frl", "fpp106", "fpp83", "dlib70", "dlib7")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="convert_tem_+3A_from">from</code></td>
<td>
<p>id of template definition of stimlist images</p>
</td></tr>
<tr><td><code id="convert_tem_+3A_to">to</code></td>
<td>
<p>id of template definition to convert to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with converted templates
</p>

<hr>
<h2 id='crop'>Crop images and templates</h2><span id='topic+crop'></span>

<h3>Description</h3>

<p>Remove or add margins to images and templates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crop(
  stimuli,
  width = 1,
  height = 1,
  x_off = NULL,
  y_off = NULL,
  fill = wm_opts("fill")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crop_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="crop_+3A_width">width</code>, <code id="crop_+3A_height">height</code></td>
<td>
<p>dimensions of cropped image in pixels or proportion (&lt;2)</p>
</td></tr>
<tr><td><code id="crop_+3A_x_off">x_off</code>, <code id="crop_+3A_y_off">y_off</code></td>
<td>
<p>offset in pixels or proportion (&lt;1) (NULL centers cropped image)</p>
</td></tr>
<tr><td><code id="crop_+3A_fill">fill</code></td>
<td>
<p>background color if cropping goes outside the original image, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Dimensions and offsets can be set in pixels or proportions. For width and height, values less than 2 will be interpreted as proportions, otherwise pixels. For x_off and y_off, values between -1 and 1 are interpreted as proportions, otherwise pixels.
</p>
<p>Cropping is anchored at the image center (or calculated template centroid if there is no image) unless x_off or y_off are set.
</p>


<h3>Value</h3>

<p>list of stimuli with cropped tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# crop to 60% width and 80% height (centered)
crop(stimuli, width = .60, height = .80)

# crop to upper right quadrant
crop(stimuli, .5, .5, x_off = .5, y_off = 0)


# negative offset with fill
crop(stimuli, 260, 260, 
     x_off = -10, y_off = -10, 
     fill = c("red", "dodgerblue"))

</code></pre>

<hr>
<h2 id='crop_tem'>Crop to template boundaries and pad</h2><span id='topic+crop_tem'></span>

<h3>Description</h3>

<p>Calculate the maximum and minimum x and y coordinates across the stimuli (or for each stimulus) and crop all image to this plus padding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crop_tem(
  stimuli,
  top = 10,
  right = top,
  bottom = top,
  left = right,
  each = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crop_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="crop_tem_+3A_top">top</code>, <code id="crop_tem_+3A_right">right</code>, <code id="crop_tem_+3A_bottom">bottom</code>, <code id="crop_tem_+3A_left">left</code></td>
<td>
<p>numeric; number of pixels or proportion (&lt;1) to pad each side</p>
</td></tr>
<tr><td><code id="crop_tem_+3A_each">each</code></td>
<td>
<p>logical; Whether to calculate bounds for the full set (default) or each image separately</p>
</td></tr>
<tr><td><code id="crop_tem_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to <code><a href="#topic+crop">crop()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
ctem &lt;- crop_tem(stimuli, each = TRUE)
draw_tem(ctem)


# demo with different templates
stimuli &lt;- demo_tems()

# default 10 pixels around maximum template
crop_tem(stimuli) 

# crop specific to each image
crop_tem(stimuli, each = TRUE)


</code></pre>

<hr>
<h2 id='delin'>Manually delineate images</h2><span id='topic+delin'></span>

<h3>Description</h3>

<p>Adjust the templates in a shiny interface. This will overwrite existing templates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delin(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delin_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with new templates
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
# adjust existing delineations
stimuli &lt;- demo_stim() |&gt; delin()

# create new delineations from scratch
stimuli &lt;- demo_stim() |&gt; remove_tems() |&gt; delin()
}
</code></pre>

<hr>
<h2 id='demo_stim'>Demo Stimuli</h2><span id='topic+demo_stim'></span><span id='topic+demo_tems'></span><span id='topic+demo_unstandard'></span>

<h3>Description</h3>

<p>A convenience function to get demo stimuli. See the Details below for citation and license info.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_stim(pattern = NULL)

demo_tems(pattern = NULL)

demo_unstandard(pattern = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_stim_+3A_pattern">pattern</code></td>
<td>
<p>Vector of patterns to use to search for files, or a vector of image indices (e.g., 1:4 selects the first 4 images and their templates)</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li> <p><code><a href="#topic+demo_stim">demo_stim()</a></code>: two composite faces with frl delineations; 500x500 pixels
</p>
</li>
<li> <p><code><a href="#topic+demo_tems">demo_tems()</a></code>: an image with 5 different delineations; 675x900 pixels
</p>
</li>
<li> <p><code><a href="#topic+demo_unstandard">demo_unstandard()</a></code>: a set of 10 composite faces with frl delineations; rotated, resized, and cropped so face position is not standard and each image is a different size (444 to 645 pixels)
</p>
</li></ul>



<h4>Citation</h4>

<p>The images from <code>demo_stim()</code> and <code>demo_unstandard()</code> are usable on a CC-BY license, citing:
</p>
<p>DeBruine, L. (2016).Young adult composite faces (Version1). figshare. <a href="https://doi.org/10.6084/m9.figshare.4055130.v1">doi:10.6084/m9.figshare.4055130.v1</a>
</p>
<p>The image from <code>demo_tems()</code> is Lisa DeBruine (the author of webmorphR) and available on a CC-O license (no attribution needed).
</p>



<h3>Value</h3>

<p>list of stimuli
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt; label()


# visualise templates
demo_tems() |&gt; 
  draw_tem(pt.size = 10) |&gt; 
  label() |&gt;
  plot(maxwidth = 1000)


# visualise keeping relative sizes
demo_unstandard() |&gt; 
  to_size(keep_rels = TRUE) |&gt;
  pad(80, 0, 0, 0) |&gt;
  label() |&gt;
  plot(nrow = 2, maxwidth = 1000)

</code></pre>

<hr>
<h2 id='draw_tem'>Draw template</h2><span id='topic+draw_tem'></span>

<h3>Description</h3>

<p>Visualise a template on an image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draw_tem(
  stimuli,
  pt.color = wm_opts("pt.color"),
  pt.alpha = 0.75,
  pt.size = NULL,
  pt.shape = c("circle", "cross", "index"),
  line.color = wm_opts("line.color"),
  line.alpha = 0.5,
  line.size = NULL,
  bg = "image"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="draw_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="draw_tem_+3A_pt.color">pt.color</code>, <code id="draw_tem_+3A_line.color">line.color</code></td>
<td>
<p>line or point color, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="draw_tem_+3A_pt.alpha">pt.alpha</code>, <code id="draw_tem_+3A_line.alpha">line.alpha</code></td>
<td>
<p>transparency (0-1), ignored if color is a hex value with transparency. Set alpha to 0 to omit lines or points.</p>
</td></tr>
<tr><td><code id="draw_tem_+3A_pt.size">pt.size</code>, <code id="draw_tem_+3A_line.size">line.size</code></td>
<td>
<p>size in pixels (scales to image size if NULL)</p>
</td></tr>
<tr><td><code id="draw_tem_+3A_pt.shape">pt.shape</code></td>
<td>
<p>the shape of the points (&quot;circle&quot;, &quot;cross&quot;, &quot;index&quot;)</p>
</td></tr>
<tr><td><code id="draw_tem_+3A_bg">bg</code></td>
<td>
<p>background color (&quot;image&quot; uses the original image)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Visualising the index of each point isn't great yet and will overlay
</p>


<h3>Value</h3>

<p>list of stimuli with template images
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>
<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get an image with 2 different templates
stimuli &lt;- demo_tems("frl|fpp106")

# default template
draw_tem(stimuli)


# custom template
draw_tem(stimuli, 
         pt.shape = "cross",
         pt.color = "red", 
         pt.alpha = 1,
         pt.size = 15,
         line.color = rgb(0, 0, 0),
         line.alpha = 0.5,
         line.size = 5)

# indexed template
draw_tem(stimuli, 
         pt.shape = "index",
         pt.size = 15, 
         pt.alpha = 1,
         line.alpha = 0)

</code></pre>

<hr>
<h2 id='features'>Feature Points</h2><span id='topic+features'></span>

<h3>Description</h3>

<p>Get point indices for features, usually for use with <code><a href="#topic+subset_tem">subset_tem</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>features(..., tem_id = c("frl", "dlib70"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="features_+3A_...">...</code></td>
<td>
<p>a vector of feature names (see Details)</p>
</td></tr>
<tr><td><code id="features_+3A_tem_id">tem_id</code></td>
<td>
<p>template ID (currently only works for frl and dlib70)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Available features for the frl template are: &quot;gmm&quot;, &quot;oval&quot;, &quot;face&quot;, &quot;mouth&quot;, &quot;nose&quot;, &quot;eyes&quot;, &quot;brows&quot;, &quot;left_eye&quot;, &quot;right_eye&quot;, &quot;left_brow&quot;,  &quot;right_brow&quot;, &quot;ears&quot;, &quot;undereyes&quot;, &quot;teeth&quot;, &quot;smile_lines&quot;, &quot;cheekbones&quot;, &quot;philtrum&quot;, &quot;chin&quot;, &quot;neck&quot;, &quot;halo&quot;.
</p>
<p>Available features for the dlib70 template are: &quot;teeth&quot;, &quot;left_eye&quot;, &quot;right_eye&quot;, &quot;left_brow&quot;, &quot;right_brow&quot;, &quot;nose&quot;, &quot;mouth&quot;, &quot;face&quot;.
</p>


<h3>Value</h3>

<p>vector of corresponding template indices
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>features("mouth")
features("gmm")
features("nose", tem_id = "dlib70")

</code></pre>

<hr>
<h2 id='format_size'>Format file size</h2><span id='topic+format_size'></span>

<h3>Description</h3>

<p>Format file size
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_size(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_size_+3A_x">x</code></td>
<td>
<p>the file size in bytes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>human-readable file size
</p>

<hr>
<h2 id='get_imgs'>Get Images into List</h2><span id='topic+get_imgs'></span>

<h3>Description</h3>

<p>Get Images into List
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_imgs(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_imgs_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of magick images
</p>

<hr>
<h2 id='get_info'>Get Information</h2><span id='topic+get_info'></span>

<h3>Description</h3>

<p>Get Information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_info(stimuli, ..., .rownames = "id")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_info_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="get_info_+3A_...">...</code></td>
<td>
<p>column names to return</p>
</td></tr>
<tr><td><code id="get_info_+3A_.rownames">.rownames</code></td>
<td>
<p>whether to return a table with no rownames (NULL), rownames from the list item names (NA), or as a new column (the column name as a string)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame or vector of the info
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt;
  add_info(project = "test", gender = c("F", "M"))

get_info(stimuli)
get_info(stimuli, "gender")
</code></pre>

<hr>
<h2 id='get_point'>Get Point Coordinates</h2><span id='topic+get_point'></span>

<h3>Description</h3>

<p>Get a data frame of the x and y coordinates of a template point
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_point(stimuli, pt = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_point_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli with templates</p>
</td></tr>
<tr><td><code id="get_point_+3A_pt">pt</code></td>
<td>
<p>point(s) to return</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of x and y coordinates of the specified point(s) for each stimulus
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>
<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt; get_point(0:1)
</code></pre>

<hr>
<h2 id='gglabel'>Label with ggplot annotations</h2><span id='topic+gglabel'></span>

<h3>Description</h3>

<p>Label image using <a href="ggplot2.html#topic+annotate">ggplot2::annotate</a>. All arguments are vectorised over the stimuli and values are recycled or truncated if there are fewer or more than stimuli.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gglabel(stimuli, label = TRUE, x = 0.5, y = 0.95, geom = "text", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gglabel_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="gglabel_+3A_label">label</code></td>
<td>
<p>a vector of the label text(s) or TRUE to use stimlist names</p>
</td></tr>
<tr><td><code id="gglabel_+3A_x">x</code></td>
<td>
<p>x-coordinate for label anchor (left is 0); values &lt;= 1 are interpreted as proportions of width</p>
</td></tr>
<tr><td><code id="gglabel_+3A_y">y</code></td>
<td>
<p>y-coordinate for label anchor (bottom is 0); values &lt;= 1 are interpreted as proportions of height</p>
</td></tr>
<tr><td><code id="gglabel_+3A_geom">geom</code></td>
<td>
<p>the geom to use</p>
</td></tr>
<tr><td><code id="gglabel_+3A_...">...</code></td>
<td>
<p>further arguments to pass to <code><a href="ggplot2.html#topic+annotate">ggplot2::annotate()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with labelled images
</p>


<h3>See Also</h3>

<p><code><a href="#topic+label">label()</a></code> for a labeller using syntax like <a href="magick.html#topic+painting">magick::image_annotate</a>
</p>
<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# label with image names
# the default text size in ggplot is tiny
gglabel(stimuli)

# add a watermark
gglabel(stimuli,
        label = "watermark",
        x = 0.5, 
        y = 0.5,
        geom = "text",
        size = 30,
        color = "black",
        angle = -30,
        alpha = 0.5)

</code></pre>

<hr>
<h2 id='greyscale'>Make images greyscale</h2><span id='topic+greyscale'></span><span id='topic+grayscale'></span>

<h3>Description</h3>

<p>Make images greyscale
</p>


<h3>Usage</h3>

<pre><code class='language-R'>greyscale(stimuli)

grayscale(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="greyscale_+3A_stimuli">stimuli</code></td>
<td>
<p>list of class stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with new images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>
<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
grey_stim &lt;- greyscale(stimuli)
plot(grey_stim)
</code></pre>

<hr>
<h2 id='height'>Image heights</h2><span id='topic+height'></span>

<h3>Description</h3>

<p>Image heights
</p>


<h3>Usage</h3>

<pre><code class='language-R'>height(stimuli, type = c("all", "min", "max", "unique"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="height_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="height_+3A_type">type</code></td>
<td>
<p>whether to return all heights, min, max, or only unique heights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of heights
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
demo_stim() |&gt; height()
</code></pre>

<hr>
<h2 id='horiz_eyes'>Make eyes horizontal</h2><span id='topic+horiz_eyes'></span>

<h3>Description</h3>

<p>Rotate each stimulus so the eye points are horizontal.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>horiz_eyes(stimuli, left_eye = 0, right_eye = 1, fill = wm_opts("fill"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="horiz_eyes_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="horiz_eyes_+3A_left_eye">left_eye</code></td>
<td>
<p>The first point to align (defaults to 0)</p>
</td></tr>
<tr><td><code id="horiz_eyes_+3A_right_eye">right_eye</code></td>
<td>
<p>The second point to align (defaults to 1)</p>
</td></tr>
<tr><td><code id="horiz_eyes_+3A_fill">fill</code></td>
<td>
<p>background color to pass to rotate, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with rotated tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_unstandard(1:3)
horiz_eyes(stimuli, fill = "red")

</code></pre>

<hr>
<h2 id='image_func'>Apply a magick function to each image</h2><span id='topic+image_func'></span>

<h3>Description</h3>

<p>This is a convenience function for applying magick functions that take an image as the first argument and return an image. It's fully vectorised, so you can set separate argument values for each image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_func(stimuli, func, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="image_func_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="image_func_+3A_func">func</code></td>
<td>
<p>the function or a string with the short name of the magick function (see <code><a href="#topic+image_func_types">image_func_types()</a></code>)</p>
</td></tr>
<tr><td><code id="image_func_+3A_...">...</code></td>
<td>
<p>arguments to pass to the function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions only affect the image, not the template. If a function changes the morphology of the image (e.g., &quot;implode&quot;), the template will not alter in the same way.
</p>


<h3>Value</h3>

<p>list of stimuli with new images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt; resize(0.5)

# make a photographic negative version
image_func(stimuli, "negate")

# set different argument values for each image
image_func(stimuli, "implode", factor = c(0.2, -0.2))


# other image functions
image_func(stimuli, "blur", 5, 3)
image_func(stimuli, "contrast", sharpen = 1)
image_func(stimuli, "oilpaint", radius = 5)
image_func(stimuli, "colorize", opacity = 50,
          color = c("hotpink", "dodgerblue"))

# load a logo image and superimpose it on each image
logo &lt;- system.file("extdata/logo.png", package = "webmorphR") |&gt;
  magick::image_read() |&gt;
  magick::image_resize(70)
  
image_func(stimuli, "composite", logo, offset = "+5+10")

# use a self-defined function
testfunc &lt;- function(image) {
  rot &lt;- magick::image_rotate(image, 180)
  c(image, rot) |&gt; magick::image_average()
}
image_func(stimuli, testfunc)

</code></pre>

<hr>
<h2 id='image_func_types'>Possible functions</h2><span id='topic+image_func_types'></span>

<h3>Description</h3>

<p><code><a href="#topic+image_func">image_func</a></code> can take a named function from the magick package, but only functions that return an image that is compatible with the current template (e.g., doesn't change size or shape).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>image_func_types()
</code></pre>


<h3>Value</h3>

<p>list of compatible function names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>image_func_types()
</code></pre>

<hr>
<h2 id='lab2rgb'>Lab to RGB Conversion</h2><span id='topic+lab2rgb'></span>

<h3>Description</h3>

<p>Lab colourspace to RGB conversion. Calculated with Observer. = 2°, Illuminant = D65.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lab2rgb(lab, ref_X = 95.047, ref_Y = 100, ref_Z = 108.883)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lab2rgb_+3A_lab">lab</code></td>
<td>
</td></tr>
<tr><td><code id="lab2rgb_+3A_ref_x">ref_X</code>, <code id="lab2rgb_+3A_ref_y">ref_Y</code>, <code id="lab2rgb_+3A_ref_z">ref_Z</code></td>
<td>
<p>Reference values for Observer= 2°, Illuminant= D65</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The formulas used to convert from Lab to XYZ and XYZ to RGB are from http://www.easyrgb.com/en/math.php and the reference values are from http://www.brucelindbloom.com/index.html?ColorCheckerCalcHelp.html
</p>


<h3>Value</h3>

<p>vector of red, green and blue values
</p>


<h3>See Also</h3>

<p>Other color: 
<code><a href="#topic+col2lab">col2lab</a>()</code>,
<code><a href="#topic+color_conv">color_conv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>lab &lt;- c(100, 0, 0)
lab2rgb(lab)

lab &lt;- col2lab("red")
lab2rgb(lab)
</code></pre>

<hr>
<h2 id='label'>Label images</h2><span id='topic+label'></span>

<h3>Description</h3>

<p>Defaults to <code><a href="#topic+mlabel">mlabel()</a></code> unless you use arguments specific to <code><a href="#topic+gglabel">gglabel()</a></code>. All arguments are vectorised over the stimuli and values are recycled or truncated if there are fewer or more than stimuli.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label(stimuli, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="label_+3A_...">...</code></td>
<td>
<p>arguments to pass on to <code><a href="#topic+mlabel">mlabel()</a></code> or <code><a href="#topic+gglabel">gglabel()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with labelled images
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlabel">mlabel()</a></code>, <code><a href="#topic+gglabel">gglabel()</a></code>
</p>
<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# label with magick::image_annotate
label(stimuli, 
      text = c("CHINWE", "GEORGE"), 
      gravity = c("north", "south"),
      color = "red")

# label with ggplot2::annotate
label(stimuli,
      label = c("CHINWE", "GEORGE"), 
      x = 0.5, 
      y = c(0.99, 0.02),
      vjust = c(1, 0), 
      size = 18,
      color = "red")
</code></pre>

<hr>
<h2 id='list_to_tbl'>List format to table format</h2><span id='topic+list_to_tbl'></span>

<h3>Description</h3>

<p>List format to table format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_to_tbl(list, rownames = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_to_tbl_+3A_list">list</code></td>
<td>
<p>a list of lists</p>
</td></tr>
<tr><td><code id="list_to_tbl_+3A_rownames">rownames</code></td>
<td>
<p>whether to return a table with no rownames (NULL), rownames from the list item names (NA), or as a new column (the column name as a string)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data table
</p>

<hr>
<h2 id='loop'>Loop</h2><span id='topic+loop'></span>

<h3>Description</h3>

<p>Morph between each image in a list of stimuli, looping back to the start.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loop(stimuli, steps = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loop_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli to morph between</p>
</td></tr>
<tr><td><code id="loop_+3A_steps">steps</code></td>
<td>
<p>number of steps from one image to the next</p>
</td></tr>
<tr><td><code id="loop_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code><a href="#topic+trans">trans()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli containing each step of the loop
</p>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+avg">avg</a>()</code>,
<code><a href="#topic+continuum">continuum</a>()</code>,
<code><a href="#topic+symmetrize">symmetrize</a>()</code>,
<code><a href="#topic+trans">trans</a>()</code>,
<code><a href="#topic+webmorph_up">webmorph_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (webmorph_up()) {
  # align and crop images
  stimuli &lt;- demo_unstandard(1:5) |&gt; 
    align() |&gt; crop_tem()
  
  loop &lt;- loop(stimuli, 5)
  
  # create an animated gif
  animate(loop, fps = 10)
}

</code></pre>

<hr>
<h2 id='mask'>Mask Images with templates</h2><span id='topic+mask'></span>

<h3>Description</h3>

<p>Use template points to define the borders of a mask to apply to the images. The image outside of the mask (or inside, if <code>reverse = TRUE</code>) is replaced by the fill color.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mask(
  stimuli,
  mask = "face",
  fill = wm_opts("fill"),
  reverse = FALSE,
  expand = 1,
  tem_id = "frl"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mask_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="mask_+3A_mask">mask</code></td>
<td>
<p>vector of masks or a custom list of template points</p>
</td></tr>
<tr><td><code id="mask_+3A_fill">fill</code></td>
<td>
<p>color to make the mask, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="mask_+3A_reverse">reverse</code></td>
<td>
<p>logical; whether the mask covers the areas outside (FALSE) or inside (TRUE) the mask</p>
</td></tr>
<tr><td><code id="mask_+3A_expand">expand</code></td>
<td>
<p>how many pixels to expand the mask (negative numbers contract the mask)</p>
</td></tr>
<tr><td><code id="mask_+3A_tem_id">tem_id</code></td>
<td>
<p>template ID to pass on to <code><a href="#topic+tem_def">tem_def()</a></code> to get built-in mask definitions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For FRL templates, the argument <code>mask</code> can be a vector with one or more of the following: oval, face, neck, ears (left_ear, right_ear), eyes (left_eye, right_eye), brows (left_brow, right_brow), mouth, teeth, nose.
</p>
<p>For Face++ templates (fpp83 or fpp106), the argument <code>mask</code> can be a vector with one or more of the following: face, eyes (left_eye, right_eye), brows (left_brow, right_brow), mouth, teeth, nose. Because these templates have no forehead points, &quot;face&quot; is usually disappointing.
</p>
<p>Set custom masks using the template points (0-based). View an image with labelled templates using <code>plot(stim, pt.plot = TRUE, pt.shape="index")</code>. Separate points along a line with commas, line segments with semicolons, and mask areas with colons. For example, this would be the custom mask for the eyes in the fpp83 template:
</p>
<p><code>"44,4,56,51,79;79,58,11,25,44:61,67,38,34,40;40,41,17,47,61"</code>
</p>
<p>If you set expand = 0, there is sometimes a thin visible line where multiple components of the mask touch.
</p>


<h3>Value</h3>

<p>list of stimuli with masked images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

mask(stimuli, 
     mask = c("face", "neck", "ears"), 
     fill = "dodgerblue")

mask(stimuli, "face", expand = 30)


# reverse masking masks over the features
stimuli |&gt;
  mask("eyes", "#FFFF00", TRUE) |&gt;
  mask("brows", rgb(0.2, 0.5, 0.5), TRUE) |&gt;
  mask("mouth", "#FF000066", TRUE)
  
# custom mask (list style)
fpp83_eyes &lt;- list(
  left_eye = list(
    c(44,4,56,51,79),
    c(79,58,11,25,44)
  ),
  right_eye = list(
    c(61,67,38,34,40),
    c(40,41,17,47,61)
  )
)

demo_tems("fpp83") |&gt;
  mask(fpp83_eyes, fill = color_conv("dodgerblue", alpha = 0.5))


</code></pre>

<hr>
<h2 id='mask_oval'>Apply an oval mask to images</h2><span id='topic+mask_oval'></span>

<h3>Description</h3>

<p>Superimpose an oval mask on a set of images.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mask_oval(stimuli, bounds = NULL, fill = wm_opts("fill"), each = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mask_oval_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="mask_oval_+3A_bounds">bounds</code></td>
<td>
<p>bounds (t, r, b, l) of oval, calculated from templates if NULL</p>
</td></tr>
<tr><td><code id="mask_oval_+3A_fill">fill</code></td>
<td>
<p>background color for mask, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="mask_oval_+3A_each">each</code></td>
<td>
<p>logical; whether to calculate a mask for each image (default) or just one</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the images have templates and <code>bounds = NULL</code>, the maxiumum and minimum x and y coordinates for each image will be calculated (or the overall max and min if <code>each = FALSE</code>) and an oval with those dimensions and position will be placed over the face.
</p>
<p>If <code>bounds</code> are set to a list of top, right, bottom and left boundaries, these will be used instead of the boundaries derived from templates.
</p>


<h3>Value</h3>

<p>list of stimuli with cropped tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># remove external template points and crop
stimuli &lt;- demo_stim() |&gt; subset_tem(features("face")) |&gt; crop_tem(25)

# three styles of mask
omask1 &lt;- mask_oval(stimuli) |&gt; label("default")
omask2 &lt;- mask_oval(stimuli, each = FALSE) |&gt; label("each = FALSE")
omask3 &lt;- mask_oval(stimuli, bounds = list(t= 50, r = 30, b = 40, l = 30)) |&gt; 
  label("manual bounds")

# visualise masks
c(omask1, omask2, omask3) |&gt; plot(nrow = 2, byrow = FALSE)
</code></pre>

<hr>
<h2 id='message'>WebmorphR Message</h2><span id='topic+message'></span>

<h3>Description</h3>

<p>WebmorphR Message
</p>


<h3>Usage</h3>

<pre><code class='language-R'>message(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="message_+3A_...">...</code></td>
<td>
<p>arguments to pass to base::message()</p>
</td></tr>
</table>

<hr>
<h2 id='metrics'>Image shape metrics</h2><span id='topic+metrics'></span>

<h3>Description</h3>

<p>Get metrics defined by template points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metrics(stimuli, formula = c(0, 1))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metrics_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli with tems</p>
</td></tr>
<tr><td><code id="metrics_+3A_formula">formula</code></td>
<td>
<p>a vector of two points to measure the distance apart, or a string of the formula for the metric</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Reference x and y coordinates by point number like <code>x[0]</code> or <code>y[188]</code>. Use any R functions to process the numbers, as well as <code>pow()</code> (same as <code style="white-space: pre;">&#8288;^()&#8288;</code>, for consistency with webmorph.org). Remember that 0,0 is the top left for images; e.g., <code>min(y[0], y[1])</code> gives your the <em>higher</em> of the two pupil y-coordinates.
</p>


<h3>Value</h3>

<p>named vector of the metric
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

metrics(stimuli, c(0, 1)) # eye-spacing

# face width-to-height ratio
fwh &lt;- "abs(max(x[113],x[112],x[114])-min(x[110],x[111],x[109]))/abs(y[90]-min(y[20],y[25]))"
metrics(stimuli, fwh)

</code></pre>

<hr>
<h2 id='mirror'>Mirror templates and images</h2><span id='topic+mirror'></span>

<h3>Description</h3>

<p>Use tem_id to get the symmetry map for your template. If tem_id is omitted, images and templates will be fully reversed (e.g., if point 1 is the left eye in the original image, it will be the right eye in the mirrored image).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mirror(stimuli, tem_id = NULL, axis = "vertical")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mirror_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="mirror_+3A_tem_id">tem_id</code></td>
<td>
<p>template ID to be passed to <code>tem_def</code> (usually &quot;frl&quot; or &quot;fpp106&quot;) or NULL</p>
</td></tr>
<tr><td><code id="mirror_+3A_axis">axis</code></td>
<td>
<p>vertical or horizontal axis of mirroring</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with mirrored images and templates
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load an image and mirror it
o &lt;- demo_tems("frl") |&gt; resize(0.5)
m &lt;- mirror(o, "frl")

# visualise the face outline points
c(o, m) |&gt;
  subset_tem(features("face")) |&gt;
  draw_tem(pt.shape = "index", pt.size = 15) |&gt;
  label(c("original", "mirrored"))

</code></pre>

<hr>
<h2 id='mlabel'>Label with magick annotations</h2><span id='topic+mlabel'></span>

<h3>Description</h3>

<p>Label image using <a href="magick.html#topic+painting">magick::image_annotate</a>. All arguments are vectorised over the stimuli and values are recycled or truncated if there are fewer or more than stimuli. Setting a font, weight, style only works if your imagemagick is compiled with fontconfig support.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlabel(
  stimuli,
  text = TRUE,
  gravity = "north",
  location = "+0+0",
  degrees = 0,
  size = 0.1,
  font = "sans",
  style = "normal",
  weight = 400,
  kerning = 0,
  decoration = NULL,
  color = "black",
  strokecolor = NULL,
  boxcolor = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mlabel_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="mlabel_+3A_text">text</code></td>
<td>
<p>a vector of the label text(s) or TRUE to use stimlist names</p>
</td></tr>
<tr><td><code id="mlabel_+3A_gravity">gravity</code></td>
<td>
<p>string with gravity value from <code>magick::gravity_types</code>.</p>
</td></tr>
<tr><td><code id="mlabel_+3A_location">location</code></td>
<td>
<p>geometry string with location relative to gravity</p>
</td></tr>
<tr><td><code id="mlabel_+3A_degrees">degrees</code></td>
<td>
<p>rotates text around center point</p>
</td></tr>
<tr><td><code id="mlabel_+3A_size">size</code></td>
<td>
<p>font size in pixels or proportion of image width (if &lt; 1.0)</p>
</td></tr>
<tr><td><code id="mlabel_+3A_font">font</code></td>
<td>
<p>string with font family such as &quot;sans&quot;, &quot;mono&quot;, &quot;serif&quot;, &quot;Times&quot;, &quot;Helvetica&quot;, &quot;Trebuchet&quot;, &quot;Georgia&quot;, &quot;Palatino&quot; or &quot;Comic Sans&quot;.</p>
</td></tr>
<tr><td><code id="mlabel_+3A_style">style</code></td>
<td>
<p>value of <code><a href="magick.html#topic+options">magick::style_types()</a></code>: &quot;Undefined&quot;, &quot;Any&quot;, &quot;Italic&quot;, &quot;Normal&quot;, &quot;Oblique&quot;</p>
</td></tr>
<tr><td><code id="mlabel_+3A_weight">weight</code></td>
<td>
<p>thickness of th e font, 400 is normal and 700 is bold.</p>
</td></tr>
<tr><td><code id="mlabel_+3A_kerning">kerning</code></td>
<td>
<p>increases or decreases whitespace between letters</p>
</td></tr>
<tr><td><code id="mlabel_+3A_decoration">decoration</code></td>
<td>
<p>value of <code><a href="magick.html#topic+options">magick::decoration_types()</a></code>: &quot;LineThrough&quot; &quot;None&quot;, &quot;Overline&quot;, &quot;Underline&quot;</p>
</td></tr>
<tr><td><code id="mlabel_+3A_color">color</code></td>
<td>
<p>a vector of the label colour(s)</p>
</td></tr>
<tr><td><code id="mlabel_+3A_strokecolor">strokecolor</code></td>
<td>
<p>adds a stroke (border around the text)</p>
</td></tr>
<tr><td><code id="mlabel_+3A_boxcolor">boxcolor</code></td>
<td>
<p>adds a background color</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with labelled images
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gglabel">gglabel()</a></code> for a labeller using syntax like <code><a href="ggplot2.html#topic+annotate">ggplot2::annotate()</a></code>
</p>
<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
mlabel(stimuli,
       text = c("CHINWE", "GEORGE"), 
       gravity = c("north", "south"),
       color = "red")
</code></pre>

<hr>
<h2 id='new_stim'>Make a new stim</h2><span id='topic+new_stim'></span>

<h3>Description</h3>

<p>Make a new stim
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_stim(img, path = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_stim_+3A_img">img</code></td>
<td>
<p>Image made by magick</p>
</td></tr>
<tr><td><code id="new_stim_+3A_path">path</code></td>
<td>
<p>Path to image file (or name)</p>
</td></tr>
<tr><td><code id="new_stim_+3A_...">...</code></td>
<td>
<p>Additional items for stim</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with class stim
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>

<hr>
<h2 id='new_stimlist'>Make a new stimlist</h2><span id='topic+new_stimlist'></span>

<h3>Description</h3>

<p>Make a new stimlist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_stimlist(..., .names = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_stimlist_+3A_...">...</code></td>
<td>
<p>Lists with class &quot;stim&quot;</p>
</td></tr>
<tr><td><code id="new_stimlist_+3A_.names">.names</code></td>
<td>
<p>Names for each stimulus</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A stimlist
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>

<hr>
<h2 id='OR'>Piped OR</h2><span id='topic+OR'></span><span id='topic++25+7C+7C+25'></span>

<h3>Description</h3>

<p>LHS if not <code>NULL</code>, otherwise RHS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>l %||% r
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="OR_+3A_l">l</code></td>
<td>
<p>LHS.</p>
</td></tr>
<tr><td><code id="OR_+3A_r">r</code></td>
<td>
<p>RHS.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>LHS if not <code>NULL</code>, otherwise RHS.
</p>

<hr>
<h2 id='pad'>Pad images</h2><span id='topic+pad'></span>

<h3>Description</h3>

<p>Add padding to sides of stimuli. This is a convenience function to calculate offsets for <code><a href="#topic+crop">crop()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pad(stimuli, top = 10, right = top, bottom = top, left = right, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pad_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="pad_+3A_top">top</code>, <code id="pad_+3A_right">right</code>, <code id="pad_+3A_bottom">bottom</code>, <code id="pad_+3A_left">left</code></td>
<td>
<p>number of pixels or proportion (&lt;1) to pad each side</p>
</td></tr>
<tr><td><code id="pad_+3A_...">...</code></td>
<td>
<p>additional arguments to pass to <code><a href="#topic+crop">crop()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The value for top is copied to bottom and right, and the value for right is copied to left, so setting only top produces a consistent border, while setting just top and right sets different borders for top-bottom and right-left. (This convention will be familiar if you use CSS.)
</p>
<p>Padding size values are interpreted as a proportion of width or height if less than  1.
</p>


<h3>Value</h3>

<p>list of stimuli
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# default 10-pixel padding
pad(stimuli, fill = "dodgerblue")


# change pad width and set fill
pad(stimuli, 2, fill = "dodgerblue")

# set top border to 10% height
# different colour for each image
pad(stimuli, 0.1, 1, 1, 1,
    fill = c("hotpink", "dodgerblue"))

</code></pre>

<hr>
<h2 id='patch'>Patch colour</h2><span id='topic+patch'></span>

<h3>Description</h3>

<p>Get the median (or mean or user-defined function) colour value of a specified patch of pixels on an image. This is useful for matching background colours.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>patch(
  stimuli,
  width = 10,
  height = 10,
  x_off = 0,
  y_off = 0,
  color = c("hex", "rgb"),
  func = stats::median
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="patch_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="patch_+3A_width">width</code>, <code id="patch_+3A_height">height</code></td>
<td>
<p>dimensions of the patch in pixels, if &lt;=1, interpreted as proportions of width or height</p>
</td></tr>
<tr><td><code id="patch_+3A_x_off">x_off</code>, <code id="patch_+3A_y_off">y_off</code></td>
<td>
<p>offset in pixels or proportion (&lt;1)</p>
</td></tr>
<tr><td><code id="patch_+3A_color">color</code></td>
<td>
<p>The type of color to return (hex, rgb)</p>
</td></tr>
<tr><td><code id="patch_+3A_func">func</code></td>
<td>
<p>The function to apply to an array of L*ab color values to determine the central colour (defaults to median, but mean, min, or max can also be useful)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The colour values of each pixel in the patch are converted to CIE-Lab values before using the func to calculate the central tendency of the L (lightness), a (red-green axis) and b (blue-yellow axis); see <code><a href="#topic+col2lab">col2lab()</a></code> and <code><a href="#topic+lab2rgb">lab2rgb()</a></code> for more details.
</p>
<p>This excludes transparent pixels, and returns &quot;transparent&quot; if all pixels in the patch are transparent.
</p>


<h3>Value</h3>

<p>a vector of hex or rgba color values
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# get colour from the upper left corder
patch(stimuli)

# get median colour from centre .1 width pixels
patch(stimuli, width = .1, height = .1, 
      x_off = .45, y_off = .45)

# get mean rgb colour from full image
patch(stimuli, width = 1, height = 1, 
      color = "rgb", func = mean)

</code></pre>

<hr>
<h2 id='plot_rows'>Plot in rows</h2><span id='topic+plot_rows'></span>

<h3>Description</h3>

<p>Plot in rows
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_rows(
  ...,
  top_label = NULL,
  maxwidth = wm_opts("plot.maxwidth"),
  maxheight = wm_opts("plot.maxheight")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_rows_+3A_...">...</code></td>
<td>
<p>stimlists (optionally named) and any arguments to pass on to <code><a href="#topic+label">label</a></code></p>
</td></tr>
<tr><td><code id="plot_rows_+3A_top_label">top_label</code></td>
<td>
<p>logical; whether to plot row labels above the row (TRUE) or inside (FALSE), if NULL, then TRUE if stimlists are named</p>
</td></tr>
<tr><td><code id="plot_rows_+3A_maxwidth">maxwidth</code>, <code id="plot_rows_+3A_maxheight">maxheight</code></td>
<td>
<p>maximum width and height of each row in pixels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with plot
</p>


<h3>See Also</h3>

<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>s &lt;- demo_unstandard()
plot_rows(
  female = s[1:3],
  male = s[6:8],
  maxwidth = 600
)
</code></pre>

<hr>
<h2 id='plot_stim'>Plot stimuli</h2><span id='topic+plot_stim'></span>

<h3>Description</h3>

<p>Show all the stimuli in a grid. You can use <code><a href="graphics.html#topic+plot">plot()</a></code> as an alias.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_stim(
  stimuli,
  nrow = NULL,
  ncol = NULL,
  byrow = TRUE,
  padding = 10,
  external_pad = TRUE,
  fill = wm_opts("fill"),
  maxwidth = wm_opts("plot.maxwidth"),
  maxheight = wm_opts("plot.maxheight")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_stim_+3A_stimuli">stimuli</code></td>
<td>
<p>list of class stimlist</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_nrow">nrow</code></td>
<td>
<p>number of rows</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_ncol">ncol</code></td>
<td>
<p>number of columns</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_byrow">byrow</code></td>
<td>
<p>fill grid by rows (first ncol images in the first row); if FALSE, fills by columns (first nrow images in the first column)</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_padding">padding</code></td>
<td>
<p>around each image in pixels</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_external_pad">external_pad</code></td>
<td>
<p>whether to include external padding</p>
</td></tr>
<tr><td><code id="plot_stim_+3A_fill">fill</code></td>
<td>
<p>background color, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="plot_stim_+3A_maxwidth">maxwidth</code>, <code id="plot_stim_+3A_maxheight">maxheight</code></td>
<td>
<p>maximum width and height of grid in pixels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with the plot image (no templates)
</p>


<h3>See Also</h3>

<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt; resize(0.5)
plot_stim(stimuli)


# default padding is 10px internal and external
plot(stimuli, fill = "dodgerblue")
plot(stimuli, external_pad = 0, fill = "dodgerblue")
plot(stimuli, padding = 0, fill = "dodgerblue")

# make 8 numbered images
n &lt;- blank(8, color = grDevices::cm.colors(8)) |&gt; 
  label(1:8, gravity = "center", size = 50)

# 2 rows, allocating by row
plot(n, nrow = 2)

# 2 rows, allocating by column
plot(n, nrow = 2, byrow = FALSE)

</code></pre>

<hr>
<h2 id='plot.stim'>Plot stim</h2><span id='topic+plot.stim'></span>

<h3>Description</h3>

<p>Plot stim
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stim'
plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.stim_+3A_x">x</code></td>
<td>
<p>stim</p>
</td></tr>
<tr><td><code id="plot.stim_+3A_y">y</code></td>
<td>
<p>omitted</p>
</td></tr>
<tr><td><code id="plot.stim_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code><a href="#topic+plot_stim">plot_stim()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>


<h3>See Also</h3>

<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stimlist">plot.stimlist</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>

<hr>
<h2 id='plot.stimlist'>Plot stimuli</h2><span id='topic+plot.stimlist'></span>

<h3>Description</h3>

<p>Plot stimuli
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.stimlist_+3A_x">x</code></td>
<td>
<p>list of class stimlist</p>
</td></tr>
<tr><td><code id="plot.stimlist_+3A_y">y</code></td>
<td>
<p>omitted</p>
</td></tr>
<tr><td><code id="plot.stimlist_+3A_...">...</code></td>
<td>
<p>Arguments to be passed to <code><a href="#topic+plot_stim">plot_stim()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist
</p>


<h3>See Also</h3>

<p>Visualisation functions
<code><a href="#topic+as_ggplot">as_ggplot</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+gglabel">gglabel</a>()</code>,
<code><a href="#topic+label">label</a>()</code>,
<code><a href="#topic+mlabel">mlabel</a>()</code>,
<code><a href="#topic+plot.stim">plot.stim</a>()</code>,
<code><a href="#topic+plot_rows">plot_rows</a>()</code>,
<code><a href="#topic+plot_stim">plot_stim</a>()</code>
</p>

<hr>
<h2 id='print.stim'>Print stim</h2><span id='topic+print.stim'></span>

<h3>Description</h3>

<p>Print stim
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stim'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.stim_+3A_x">x</code></td>
<td>
<p>a list of class stim</p>
</td></tr>
<tr><td><code id="print.stim_+3A_...">...</code></td>
<td>
<p>arguments passed to or from other methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>prints summary info and returns x
</p>

<hr>
<h2 id='print.stimlist'>Print stimlist</h2><span id='topic+print.stimlist'></span>

<h3>Description</h3>

<p>Print stimlist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.stimlist_+3A_x">x</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="print.stimlist_+3A_...">...</code></td>
<td>
<p>arguments passed to or from other methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>prints summary info and returns x
</p>

<hr>
<h2 id='procrustes_coords'>Procrustes align templates</h2><span id='topic+procrustes_coords'></span>

<h3>Description</h3>

<p>Procrustes align templates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>procrustes_coords(data, ref_img = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="procrustes_coords_+3A_data">data</code></td>
<td>
<p>Template points</p>
</td></tr>
<tr><td><code id="procrustes_coords_+3A_ref_img">ref_img</code></td>
<td>
<p>Reference image</p>
</td></tr>
</table>


<h3>Value</h3>

<p>coordinates
</p>

<hr>
<h2 id='read_img'>Read image file</h2><span id='topic+read_img'></span>

<h3>Description</h3>

<p>Read image file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_img(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_img_+3A_imgfile">imgfile</code></td>
<td>
</td></tr>
</table>


<h3>Value</h3>

<p>list of image info
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("extdata/test/f_multi.jpg", 
                    package = "webmorphR")
img &lt;- read_img(path)
</code></pre>

<hr>
<h2 id='read_stim'>Read stimuli</h2><span id='topic+read_stim'></span>

<h3>Description</h3>

<p>Read images and templates from a directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_stim(path, pattern = NULL, breaks = "/")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_stim_+3A_path">path</code></td>
<td>
<p>Path to directory containing image and/or template files (or a single file path)</p>
</td></tr>
<tr><td><code id="read_stim_+3A_pattern">pattern</code></td>
<td>
<p>Vector of patterns to use to search for files, or a vector of image indices (e.g., 1:4 selects the first 4 images and their templates if they exist)</p>
</td></tr>
<tr><td><code id="read_stim_+3A_breaks">breaks</code></td>
<td>
<p>a vector of characters used to determine the stimulus names from the file names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of stimuli
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("extdata/test", package = "webmorphR")

# read in all images and templates in a directory
stimuli &lt;- read_stim(path)

# read in just images and templates with "m_"
m_stimuli &lt;- read_stim(path, "m_")

</code></pre>

<hr>
<h2 id='read_tem'>Read tem file</h2><span id='topic+read_tem'></span>

<h3>Description</h3>

<p>Read tem file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_tem(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_tem_+3A_path">path</code></td>
<td>
<p>path to template file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of template info
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+write_stim">write_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- system.file("extdata/test/f_multi.tem", 
                    package = "webmorphR")
tem &lt;- read_tem(path)
</code></pre>

<hr>
<h2 id='readline_check'>Check readline input</h2><span id='topic+readline_check'></span>

<h3>Description</h3>

<p>Check readline input
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readline_check(
  prompt,
  type = c("numeric", "integer", "length", "grep"),
  min = -Inf,
  max = Inf,
  warning = NULL,
  default = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readline_check_+3A_prompt">prompt</code></td>
<td>
<p>the prompt for readline</p>
</td></tr>
<tr><td><code id="readline_check_+3A_type">type</code></td>
<td>
<p>what type of check to perform, one of  c(&quot;numeric&quot;, &quot;integer&quot;, &quot;length&quot;, &quot;grep&quot;)</p>
</td></tr>
<tr><td><code id="readline_check_+3A_min">min</code></td>
<td>
<p>the minimum value</p>
</td></tr>
<tr><td><code id="readline_check_+3A_max">max</code></td>
<td>
<p>the maximum value</p>
</td></tr>
<tr><td><code id="readline_check_+3A_warning">warning</code></td>
<td>
<p>an optional custom warning message</p>
</td></tr>
<tr><td><code id="readline_check_+3A_default">default</code></td>
<td>
<p>the default option to return if the entry is blank, NULL allows no default, the default value will be displayed after the text in square brackets</p>
</td></tr>
<tr><td><code id="readline_check_+3A_...">...</code></td>
<td>
<p>other arguments to pass to grep</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the validated result of readline
</p>

<hr>
<h2 id='remove_tem'>Remove templates</h2><span id='topic+remove_tem'></span>

<h3>Description</h3>

<p>Remove templates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_tem(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt; remove_tem()
</code></pre>

<hr>
<h2 id='rename_stim'>Set stimulus names in a stimlist</h2><span id='topic+rename_stim'></span>

<h3>Description</h3>

<p>Set stimulus names in a stimlist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename_stim(
  stimuli,
  new_names = NULL,
  prefix = "",
  suffix = "",
  pattern = NULL,
  replacement = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rename_stim_+3A_stimuli">stimuli</code></td>
<td>
<p>A list of stimuli</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_new_names">new_names</code></td>
<td>
<p>Vector of new names - must be the same length as the stimlist</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_prefix">prefix</code></td>
<td>
<p>String to prefix to each name</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_suffix">suffix</code></td>
<td>
<p>String to append to each name</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_pattern">pattern</code></td>
<td>
<p>Pattern for gsub</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_replacement">replacement</code></td>
<td>
<p>Replacement for gsub</p>
</td></tr>
<tr><td><code id="rename_stim_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass on to <code>base::gsub()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of stimuli with the new names
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+width">width</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>demo_stim() |&gt;
  rename_stim(prefix = "new_") |&gt;
  names()
</code></pre>

<hr>
<h2 id='rep.stim'>Repeat stim in a list</h2><span id='topic+rep.stim'></span>

<h3>Description</h3>

<p>Repeat stim in a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stim'
rep(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rep.stim_+3A_x">x</code></td>
<td>
<p>A list of class stim</p>
</td></tr>
<tr><td><code id="rep.stim_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass on to <code>base::rep()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A stimlist
</p>

<hr>
<h2 id='rep.stimlist'>Repeat stim in a list</h2><span id='topic+rep.stimlist'></span>

<h3>Description</h3>

<p>Repeat stim in a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
rep(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rep.stimlist_+3A_x">x</code></td>
<td>
<p>A stimlist</p>
</td></tr>
<tr><td><code id="rep.stimlist_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass on to <code>base::rep()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A stimlist
</p>

<hr>
<h2 id='require_tems'>Require templates</h2><span id='topic+require_tems'></span>

<h3>Description</h3>

<p>Checks a list of stimuli for templates and omits images without a template. If all_same = TRUE, checks that all the templates are the same type. Errors if no images have a template or not all templates are the same (when all_same == TRUE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>require_tems(stimuli, all_same = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="require_tems_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="require_tems_+3A_all_same">all_same</code></td>
<td>
<p>logical; whether all images should have the same template</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with tems
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
have_tems &lt;- require_tems(stimuli)

## Not run: 
# produces an error because no tems
no_tems &lt;- stimuli |&gt; remove_tem()
require_tems(no_tems)

# warns that some images were removed
mix_tems &lt;- c(stimuli, no_tems)
have_tems &lt;- require_tems(mix_tems)

# produces an error because tems are different
demo_tems() |&gt; require_tems(all_same = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='resize'>Resize stimuli</h2><span id='topic+resize'></span>

<h3>Description</h3>

<p>Resize images and templates to the specified width and height.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resize(stimuli, width = NULL, height = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resize_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="resize_+3A_width">width</code>, <code id="resize_+3A_height">height</code></td>
<td>
<p>new dimensions (in pixels or percent if &lt; 10)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with resized tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()

# set width to proportion, height proportional
resize(stimuli, .5) |&gt; draw_tem()

# set width and height separately by pixels
resize(stimuli, 400, 250) |&gt; draw_tem()

</code></pre>

<hr>
<h2 id='rotate'>Rotate templates and images</h2><span id='topic+rotate'></span>

<h3>Description</h3>

<p>Rotate templates and images
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotate(
  stimuli,
  degrees = 0,
  fill = wm_opts("fill"),
  keep_size = TRUE,
  origin = "image"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rotate_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="rotate_+3A_degrees">degrees</code></td>
<td>
<p>degrees to rotate</p>
</td></tr>
<tr><td><code id="rotate_+3A_fill">fill</code></td>
<td>
<p>background color, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="rotate_+3A_keep_size">keep_size</code></td>
<td>
<p>whether to keep the original size or expand images to the new rotated size</p>
</td></tr>
<tr><td><code id="rotate_+3A_origin">origin</code></td>
<td>
<p>The origin of the rotation. Options are:
<code>"image"</code> will rotate around the image center.
</p>
<p><code>"tem"</code> will rotate around the average of all template coordinates.
</p>
<p>A vector of 1 or more point indices (0-based) will rotate around their average position.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with rotated tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+to_size">to_size</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim() |&gt; resize(0.5)

rotate(stimuli, 45, fill = "dodgerblue")
rotate(stimuli, 45, fill = "dodgerblue", keep_size = FALSE)
  

# if images are not in the centre of the image,
# try setting the origin to tem or specific point(s)
offset &lt;- stimuli[1] |&gt; 
  draw_tem() |&gt; 
  pad(0, 250, 0, 0, fill = "dodgerblue")
  
rotate(offset, 45, origin = "image", fill = "pink")
rotate(offset, 45, origin = "tem", fill = "pink")

# rotate around point 0 (left eye)
offset |&gt; crop_tem() |&gt; rep(8) |&gt;
  rotate(seq(0, 325, 45), origin = 0, fill = "pink") |&gt;
  animate(fps = 5)


</code></pre>

<hr>
<h2 id='rotated_size'>Image size after rotation</h2><span id='topic+rotated_size'></span>

<h3>Description</h3>

<p>Image size after rotation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rotated_size(width, height, degrees)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rotated_size_+3A_width">width</code></td>
<td>
<p>Width of the original image</p>
</td></tr>
<tr><td><code id="rotated_size_+3A_height">height</code></td>
<td>
<p>Height of the original image</p>
</td></tr>
<tr><td><code id="rotated_size_+3A_degrees">degrees</code></td>
<td>
<p>Rotation in degreed</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of rotated width and height
</p>

<hr>
<h2 id='same_tems'>Check All Templates are the Same</h2><span id='topic+same_tems'></span>

<h3>Description</h3>

<p>Check All Templates are the Same
</p>


<h3>Usage</h3>

<pre><code class='language-R'>same_tems(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="same_tems_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stim &lt;- demo_stim()
stim2 &lt;- subset_tem(stim, features("gmm"))

same_tems(stim)

c(stim, stim2) |&gt; same_tems()
</code></pre>

<hr>
<h2 id='social_media_size'>Social Media Image Sizes</h2><span id='topic+social_media_size'></span>

<h3>Description</h3>

<p>A convenience function for getting recommended dimensions for images on social media sites.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>social_media_size(platform = c("twitter", "instagram"), type = "default")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="social_media_size_+3A_platform">platform</code></td>
<td>
<p>currently only &quot;twitter&quot;</p>
</td></tr>
<tr><td><code id="social_media_size_+3A_type">type</code></td>
<td>
<p>which type of image</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Twitter:
</p>
<p>link: Image from a Tweet with shared link
one: Tweet sharing a single image (default)
two: Tweet sharing two images
three_left: Tweet sharing three images, Left image
three_tight Tweet sharing three images, Right images
four: Tweet sharing four images
</p>
<p>Instagram:
</p>
<p>feed_large: (default)
feed_small:
stories_large:
stories_small:
</p>


<h3>Value</h3>

<p>named vector of width and height in pixels
</p>


<h3>Examples</h3>

<pre><code class='language-R'>social_media_size("twitter", "link")
social_media_size("twitter", "one")
social_media_size("twitter", "two")

</code></pre>

<hr>
<h2 id='squash_tem'>Squash Template Points</h2><span id='topic+squash_tem'></span>

<h3>Description</h3>

<p>Move template points that are outside the image boundaries (e.g., negative values or larger than image width or height) to the borders of the image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>squash_tem(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="squash_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>nosquash &lt;- demo_stim(1) |&gt; 
  crop(0.4, 0.5)

squash &lt;- demo_stim(1) |&gt; 
  crop(0.4, 0.5) |&gt; 
  squash_tem()

# add padding and visualise templates
c(nosquash, squash) |&gt; 
  pad(50) |&gt;
  draw_tem(pt.size = 5) 
</code></pre>

<hr>
<h2 id='subset_tem'>Subset template points</h2><span id='topic+subset_tem'></span>

<h3>Description</h3>

<p>Keep or delete specified template points. Points will be renumbered and line definitions will be updated. If all points in a line are deleted, the line will be removed. POint indexing is 0-based, so the first two points (usually the pupils) are 0 and 1.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subset_tem(stimuli, ..., keep = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subset_tem_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="subset_tem_+3A_...">...</code></td>
<td>
<p>vectors of points to keep or delete</p>
</td></tr>
<tr><td><code id="subset_tem_+3A_keep">keep</code></td>
<td>
<p>logical; whether to keep or delete the points</p>
</td></tr>
</table>


<h3>Value</h3>

<p>stimlist with altered templates
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># keep just the first two points
demo_stim(1) |&gt;
  subset_tem(0:1) |&gt;
  draw_tem(pt.size = 10)

# remove the last 10 points 
# (produces the 179-point Perception Lab template)
demo_stim(1) |&gt;
  subset_tem(179:188, keep = FALSE) |&gt;
  draw_tem()

# use features() to keep only points from a pre-defined set 
# "gmm" is points used for geometric morphometrics
demo_stim(1) |&gt;
  subset_tem(features("gmm")) |&gt;
  draw_tem()

</code></pre>

<hr>
<h2 id='subset.stimlist'>Subset Stimulus Lists</h2><span id='topic+subset.stimlist'></span>

<h3>Description</h3>

<p>Returns a subset of the stimulus list meeting the condition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'stimlist'
subset(x, subset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subset.stimlist_+3A_x">x</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="subset.stimlist_+3A_subset">subset</code></td>
<td>
<p>a character string to use as a pattern for searching stimulus IDs, or a logical expression indicating elements or rows to keep: missing values are taken as false.</p>
</td></tr>
<tr><td><code id="subset.stimlist_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli
</p>

<hr>
<h2 id='svgBezier'>Construct Bezier Curves from Template Points</h2><span id='topic+svgBezier'></span>

<h3>Description</h3>

<p>Construct Bezier Curves from Template Points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgBezier(v, idx = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgBezier_+3A_v">v</code></td>
<td>
<p>matrix of template points with x and y as rows and point as columns</p>
</td></tr>
<tr><td><code id="svgBezier_+3A_idx">idx</code></td>
<td>
<p>index of line segment within the path</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string with path component
</p>

<hr>
<h2 id='svgControlPoints'>Get Control Points</h2><span id='topic+svgControlPoints'></span>

<h3>Description</h3>

<p>Get Control Points
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgControlPoints(x0, y0, x1, y1, x2, y2, t = 0.3)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgControlPoints_+3A_x0">x0</code>, <code id="svgControlPoints_+3A_y0">y0</code></td>
<td>
<p>coordinates of previous point</p>
</td></tr>
<tr><td><code id="svgControlPoints_+3A_x1">x1</code>, <code id="svgControlPoints_+3A_y1">y1</code></td>
<td>
<p>coordinates of main point</p>
</td></tr>
<tr><td><code id="svgControlPoints_+3A_x2">x2</code>, <code id="svgControlPoints_+3A_y2">y2</code></td>
<td>
<p>coordinates of next point</p>
</td></tr>
<tr><td><code id="svgControlPoints_+3A_t">t</code></td>
<td>
<p>curving factor (0-1)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x- and y-coordinates of control points (x1, y1, x2, y2)
</p>

<hr>
<h2 id='svgCubicTo'>SVG Path Quadratic Curve</h2><span id='topic+svgCubicTo'></span>

<h3>Description</h3>

<p>SVG Path Quadratic Curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgCubicTo(x1, y1, x2, y2, x, y, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgCubicTo_+3A_x1">x1</code>, <code id="svgCubicTo_+3A_y1">y1</code>, <code id="svgCubicTo_+3A_x2">x2</code>, <code id="svgCubicTo_+3A_y2">y2</code></td>
<td>
<p>coordinates of control points</p>
</td></tr>
<tr><td><code id="svgCubicTo_+3A_x">x</code>, <code id="svgCubicTo_+3A_y">y</code></td>
<td>
<p>coordinates of main point</p>
</td></tr>
<tr><td><code id="svgCubicTo_+3A_digits">digits</code></td>
<td>
<p>number of digits to round to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string with Q path component
</p>

<hr>
<h2 id='svgLineTo'>SVG Path Line</h2><span id='topic+svgLineTo'></span>

<h3>Description</h3>

<p>SVG Path Line
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgLineTo(x, y, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgLineTo_+3A_x">x</code>, <code id="svgLineTo_+3A_y">y</code></td>
<td>
<p>coordinates</p>
</td></tr>
<tr><td><code id="svgLineTo_+3A_digits">digits</code></td>
<td>
<p>number of digits to round to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string with L path component
</p>

<hr>
<h2 id='svgMoveTo'>SVG Path Move</h2><span id='topic+svgMoveTo'></span>

<h3>Description</h3>

<p>SVG Path Move
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgMoveTo(x, y, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgMoveTo_+3A_x">x</code>, <code id="svgMoveTo_+3A_y">y</code></td>
<td>
<p>coordinates</p>
</td></tr>
<tr><td><code id="svgMoveTo_+3A_digits">digits</code></td>
<td>
<p>number of digits to round to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string with M path component
</p>

<hr>
<h2 id='svgQuadraticTo'>SVG Path Quadratic Curve</h2><span id='topic+svgQuadraticTo'></span>

<h3>Description</h3>

<p>SVG Path Quadratic Curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svgQuadraticTo(x1, y1, x, y, digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="svgQuadraticTo_+3A_x1">x1</code>, <code id="svgQuadraticTo_+3A_y1">y1</code></td>
<td>
<p>coordinates of control point</p>
</td></tr>
<tr><td><code id="svgQuadraticTo_+3A_x">x</code>, <code id="svgQuadraticTo_+3A_y">y</code></td>
<td>
<p>coordinates of main point</p>
</td></tr>
<tr><td><code id="svgQuadraticTo_+3A_digits">digits</code></td>
<td>
<p>number of digits to round to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>string with Q path component
</p>

<hr>
<h2 id='symmetrize'>Symmetrize Images</h2><span id='topic+symmetrize'></span><span id='topic+symmetrise'></span>

<h3>Description</h3>

<p>Use webmorph.org to make faces symmetric in shape and/or colour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>symmetrize(stimuli, shape = 1, color = 1, tem_id = "frl", ...)

symmetrise(stimuli, shape = 1, color = 1, tem_id = "frl", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="symmetrize_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="symmetrize_+3A_shape">shape</code>, <code id="symmetrize_+3A_color">color</code></td>
<td>
<p>amount of symmetry (0 for none, 1.0 for perfect)</p>
</td></tr>
<tr><td><code id="symmetrize_+3A_tem_id">tem_id</code></td>
<td>
<p>template ID to be passed to <code><a href="#topic+tem_def">tem_def()</a></code> (usually &quot;frl&quot; or &quot;fpp106&quot;)</p>
</td></tr>
<tr><td><code id="symmetrize_+3A_...">...</code></td>
<td>
<p>Additional arguments to pass to <code><a href="#topic+trans">trans()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with symmetrised images and templates
</p>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+avg">avg</a>()</code>,
<code><a href="#topic+continuum">continuum</a>()</code>,
<code><a href="#topic+loop">loop</a>()</code>,
<code><a href="#topic+trans">trans</a>()</code>,
<code><a href="#topic+webmorph_up">webmorph_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (webmorph_up()) {
  stimuli &lt;- demo_stim(1)

  sym_both &lt;- symmetrize(stimuli)
  sym_shape &lt;- symmetrize(stimuli, color = 0)
  sym_color &lt;- symmetrize(stimuli, shape = 0)
  sym_anti &lt;- symmetrize(stimuli, shape = -1.0, color = 0)
}

</code></pre>

<hr>
<h2 id='tem_def'>Get template definition</h2><span id='topic+tem_def'></span>

<h3>Description</h3>

<p>Template definitions are lists that contain information about templates that are needed to do things like symmetrising and masking images. This function is mostly used internally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tem_def(tem_id = "frl", path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tem_def_+3A_tem_id">tem_id</code></td>
<td>
<p>the name of a built-in template (frl, fpp106, fpp83, dlib70, or dlib7) or a numeric ID of a template to retrieve from webmorph.org</p>
</td></tr>
<tr><td><code id="tem_def_+3A_path">path</code></td>
<td>
<p>path of local tem definition file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you have defined a custom template on webmorph.org, you can get its function definition by ID. You can see the ID numbers next to the templates available to you under the <em>Template &gt; Current Template</em> menu.
</p>


<h3>Value</h3>

<p>list with template definition
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+viz_tem_def">viz_tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fpp106 &lt;- tem_def("fpp106")
fpp106$lines |&gt; str()


fpp83 &lt;- tem_def("fpp83")
fpp83$mask |&gt; str()

frl &lt;- tem_def("frl")
frl$points[1:10, ]
viz_tem_def(frl, pt.size = 10, line.size = 5)

</code></pre>

<hr>
<h2 id='tem_text'>Make text version of a template</h2><span id='topic+tem_text'></span>

<h3>Description</h3>

<p>Make text version of a template
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tem_text(stim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tem_text_+3A_stim">stim</code></td>
<td>
<p>A list of class stim (one item in a stimlist)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The text for a .tem file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stimuli &lt;- demo_stim()
f_tem_text &lt;- tem_text(stimuli$f_multi)
</code></pre>

<hr>
<h2 id='tems_to_array'>Convert stimuli to array for geomorph</h2><span id='topic+tems_to_array'></span>

<h3>Description</h3>

<p>Convert stimuli to array for geomorph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tems_to_array(stimuli)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tems_to_array_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
</table>


<h3>Value</h3>

<p>3D array
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- demo_stim() |&gt; tems_to_array()
dim(data)

</code></pre>

<hr>
<h2 id='to_size'>Resize and crop/pad images to a specified size</h2><span id='topic+to_size'></span>

<h3>Description</h3>

<p>Resize and crop/pad images to a specified size
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_size(
  stimuli,
  width = NULL,
  height = NULL,
  fill = wm_opts("fill"),
  crop = FALSE,
  keep_rels = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="to_size_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="to_size_+3A_width">width</code></td>
<td>
<p>the target width (if null, the maximum stimulus width is used)</p>
</td></tr>
<tr><td><code id="to_size_+3A_height">height</code></td>
<td>
<p>the target height (if null, the maximum stimulus height is used)</p>
</td></tr>
<tr><td><code id="to_size_+3A_fill">fill</code></td>
<td>
<p>background color if cropping goes outside the original image, see <code><a href="#topic+color_conv">color_conv()</a></code></p>
</td></tr>
<tr><td><code id="to_size_+3A_crop">crop</code></td>
<td>
<p>whether to crop or pad images to make them the specified size</p>
</td></tr>
<tr><td><code id="to_size_+3A_keep_rels">keep_rels</code></td>
<td>
<p>whether to keep the size relationships between images in the set, or make all the maximum size</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of stimuli with cropped tems and/or images
</p>


<h3>See Also</h3>

<p>Stimulus manipulation functions
<code><a href="#topic+align">align</a>()</code>,
<code><a href="#topic+crop_tem">crop_tem</a>()</code>,
<code><a href="#topic+crop">crop</a>()</code>,
<code><a href="#topic+greyscale">greyscale</a>()</code>,
<code><a href="#topic+horiz_eyes">horiz_eyes</a>()</code>,
<code><a href="#topic+image_func">image_func</a>()</code>,
<code><a href="#topic+mask_oval">mask_oval</a>()</code>,
<code><a href="#topic+mask">mask</a>()</code>,
<code><a href="#topic+mirror">mirror</a>()</code>,
<code><a href="#topic+pad">pad</a>()</code>,
<code><a href="#topic+resize">resize</a>()</code>,
<code><a href="#topic+rotate">rotate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# images with different aspect ratios and sizes
stimuli &lt;- demo_unstandard(c(1:4, 6:9))

to_size(stimuli, 200, 200, fill = "dodgerblue")

</code></pre>

<hr>
<h2 id='trans'>Transform Images</h2><span id='topic+trans'></span>

<h3>Description</h3>

<p>Transform a base image in shape, color, and/or texture by the differences between two images.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trans(
  trans_img = NULL,
  from_img = NULL,
  to_img = NULL,
  shape = 0,
  color = 0,
  texture = 0,
  outname = NULL,
  norm = c("none", "twopoint", "rigid"),
  normpoint = 0:1,
  sample_contours = TRUE,
  warp = c("multiscale", "linear", "multiscalerb")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trans_+3A_trans_img">trans_img</code></td>
<td>
<p>list of stimuli to transform</p>
</td></tr>
<tr><td><code id="trans_+3A_from_img">from_img</code></td>
<td>
<p>negative transform dimension endpoint (0% image)</p>
</td></tr>
<tr><td><code id="trans_+3A_to_img">to_img</code></td>
<td>
<p>positive transform dimension endpoint (100% image)</p>
</td></tr>
<tr><td><code id="trans_+3A_shape">shape</code>, <code id="trans_+3A_color">color</code>, <code id="trans_+3A_texture">texture</code></td>
<td>
<p>amount to change along the vector defined by from_img and to_img (can range from -3 to +3)</p>
</td></tr>
<tr><td><code id="trans_+3A_outname">outname</code></td>
<td>
<p>name to save each image as</p>
</td></tr>
<tr><td><code id="trans_+3A_norm">norm</code></td>
<td>
<p>how to normalise the images; see Details</p>
</td></tr>
<tr><td><code id="trans_+3A_normpoint">normpoint</code></td>
<td>
<p>points for twopoint normalisation</p>
</td></tr>
<tr><td><code id="trans_+3A_sample_contours">sample_contours</code></td>
<td>
<p>whether to sample contours or just points</p>
</td></tr>
<tr><td><code id="trans_+3A_warp">warp</code></td>
<td>
<p>warp type</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Normalisation options</h4>


<ul>
<li><p> none: averages will have all coordinates as the mathematical average of the coordinates in the component templates
</p>
</li>
<li><p> twopoint: all images are first aligned to the 2 alignment points designated in <code>normpoint</code>. Their position is set to their position in the first image in stimuli
</p>
</li>
<li><p> rigid: procrustes aligns all images to the position of the first image in stimuli
</p>
</li></ul>




<h4>Sample contours</h4>

<p>This interpolates more control points along the lines. This can improve the accuracy of averages and transforms. If you see a “feathery” appearance along lines that have many, close-together points, try turning this off.
</p>



<h4>Warp types</h4>


<ul>
<li><p> multiscale: Implements multi-scale affine interpolation for image warping. This is the default, with a good balance between speed and accuracy
</p>
</li>
<li><p> linear: Implements triangulated linear interpolation for image warping. Linear warping is least accurate, often resulting in image artifacts, but is very fast.
</p>
</li>
<li><p> multiscalerb: Implements multi-scale rigid body interpolation for image warping. This decreases image artifacts in some circumstances, but is much slower.
</p>
</li></ul>




<h3>Value</h3>

<p>list of stimuli with transformed images and templates
</p>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+avg">avg</a>()</code>,
<code><a href="#topic+continuum">continuum</a>()</code>,
<code><a href="#topic+loop">loop</a>()</code>,
<code><a href="#topic+symmetrize">symmetrize</a>()</code>,
<code><a href="#topic+webmorph_up">webmorph_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (webmorph_up()) {
  stimuli &lt;- demo_stim()
  sexdim &lt;- trans(stimuli, stimuli$f_multi, stimuli$m_multi,
                  shape = c(fem = -0.5, masc = 0.5))
  
  sexdim |&gt; draw_tem() |&gt; label()
}


</code></pre>

<hr>
<h2 id='unique_names'>Get unique names</h2><span id='topic+unique_names'></span>

<h3>Description</h3>

<p>Get unique names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unique_names(full_names, breaks = "/", remove_ext = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unique_names_+3A_full_names">full_names</code></td>
<td>
<p>a list of full names</p>
</td></tr>
<tr><td><code id="unique_names_+3A_breaks">breaks</code></td>
<td>
<p>regex for breaking up the names into parts. If &quot;&quot;, then each character will be assessed.</p>
</td></tr>
<tr><td><code id="unique_names_+3A_remove_ext">remove_ext</code></td>
<td>
<p>whether to remove the extension before comparing</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list or vector of names with the common beginnings removed
</p>

<hr>
<h2 id='viz_tem_def'>Visualise a template definition</h2><span id='topic+viz_tem_def'></span>

<h3>Description</h3>

<p>Visualise a template definition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viz_tem_def(tem_def, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viz_tem_def_+3A_tem_def">tem_def</code></td>
<td>
<p>the template definition; usually from <code><a href="#topic+tem_def">tem_def()</a></code></p>
</td></tr>
<tr><td><code id="viz_tem_def_+3A_...">...</code></td>
<td>
<p>further arguments to pass to <code><a href="#topic+draw_tem">draw_tem()</a></code>; pt.size and line.size often need to be adjusted</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stimlist with a blank image and the template drawn on it
</p>


<h3>See Also</h3>

<p>Template functions
<code><a href="#topic+auto_delin">auto_delin</a>()</code>,
<code><a href="#topic+average_tem">average_tem</a>()</code>,
<code><a href="#topic+centroid">centroid</a>()</code>,
<code><a href="#topic+change_lines">change_lines</a>()</code>,
<code><a href="#topic+delin">delin</a>()</code>,
<code><a href="#topic+draw_tem">draw_tem</a>()</code>,
<code><a href="#topic+features">features</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+remove_tem">remove_tem</a>()</code>,
<code><a href="#topic+require_tems">require_tems</a>()</code>,
<code><a href="#topic+same_tems">same_tems</a>()</code>,
<code><a href="#topic+squash_tem">squash_tem</a>()</code>,
<code><a href="#topic+subset_tem">subset_tem</a>()</code>,
<code><a href="#topic+tem_def">tem_def</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dlib70 &lt;- tem_def("dlib70")
viz_tem_def(dlib70, pt.size = 5, line.size = 3)
</code></pre>

<hr>
<h2 id='webmorph_up'>Check if webmorph.org is available</h2><span id='topic+webmorph_up'></span>

<h3>Description</h3>

<p>Check if webmorph.org is available
</p>


<h3>Usage</h3>

<pre><code class='language-R'>webmorph_up()
</code></pre>


<h3>See Also</h3>

<p>WebMorph.org functions
<code><a href="#topic+avg">avg</a>()</code>,
<code><a href="#topic+continuum">continuum</a>()</code>,
<code><a href="#topic+loop">loop</a>()</code>,
<code><a href="#topic+symmetrize">symmetrize</a>()</code>,
<code><a href="#topic+trans">trans</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>webmorph_up()
</code></pre>

<hr>
<h2 id='width'>Image widths</h2><span id='topic+width'></span>

<h3>Description</h3>

<p>Image widths
</p>


<h3>Usage</h3>

<pre><code class='language-R'>width(stimuli, type = c("all", "min", "max", "unique"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="width_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="width_+3A_type">type</code></td>
<td>
<p>whether to return all widths, min, max, or only unique widths</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of widths
</p>


<h3>See Also</h3>

<p>Other info: 
<code><a href="#topic+add_info">add_info</a>()</code>,
<code><a href="#topic+compare">compare</a>()</code>,
<code><a href="#topic+get_info">get_info</a>()</code>,
<code><a href="#topic+get_point">get_point</a>()</code>,
<code><a href="#topic+height">height</a>()</code>,
<code><a href="#topic+metrics">metrics</a>()</code>,
<code><a href="#topic+rename_stim">rename_stim</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
demo_stim() |&gt; width()
</code></pre>

<hr>
<h2 id='wm_opts'>Set/get global webmorph options</h2><span id='topic+wm_opts'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+wm_opts_defaults">wm_opts_defaults()</a></code> for explanations of the default options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wm_opts(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wm_opts_+3A_...">...</code></td>
<td>
<p>One of four: (1) nothing, then returns all options as a list; (2) a name of an option element, then returns its value; (3) a name-value pair which sets the corresponding option to the new value (and returns nothing), (4) a list with option-value pairs which sets all the corresponding arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of options, values of an option, or nothing
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wm_opts_defaults">wm_opts_defaults()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
wm_opts() # see all options

wm_opts("verbose") # see value of webmorph.verbose

## Not run: 
# set value of webmorph.verbose
wm_opts(verbose = FALSE) 

# set multiple options
opts &lt;- list(fill = "black",
             pt.color = "white", 
             line.color = "red")
wm_opts(opts)

## End(Not run)

</code></pre>

<hr>
<h2 id='wm_opts_defaults'>WebmorphR default options</h2><span id='topic+wm_opts_defaults'></span>

<h3>Description</h3>

<p>Options set on load (unless they were already set by .Renviron)
</p>

<ul>
<li><p> overwrite (&quot;ask&quot;): Whether to overwrite images saved with <code><a href="#topic+write_stim">write_stim()</a></code> when in interactive mode; possible values are &quot;ask&quot; (ask if filenames exist), TRUE (always overwrite), and FALSE (never overwrite)
</p>
</li>
<li><p> fill (&quot;white&quot;): the colour to use to fill image backgrounds
</p>
</li>
<li><p> pt.color (&quot;green&quot;) : the colour to use for points in <code><a href="#topic+draw_tem">draw_tem()</a></code>
</p>
</li>
<li><p> line.color (&quot;blue&quot;): the colour to use for lines in <code><a href="#topic+draw_tem">draw_tem()</a></code>
</p>
</li>
<li><p> plot (&quot;inline&quot;): whether to plot images inline in R markdown documents (set to any other value to just view them in the viewer)
</p>
</li>
<li><p> plot.maxwidth (2400): The maximum width of images created by <code><a href="graphics.html#topic+plot">plot()</a></code>
</p>
</li>
<li><p> plot.maxheight (2400): The maximum height of images created by <code><a href="graphics.html#topic+plot">plot()</a></code>
</p>
</li>
<li><p> verbose (TRUE): Whether to produce verbose output and progress bars for long functions like <code><a href="#topic+auto_delin">auto_delin()</a></code>, <code><a href="#topic+avg">avg()</a></code> or <code><a href="#topic+trans">trans()</a></code>
</p>
</li>
<li><p> server (&quot;https://webmorph.org&quot;): The server to use for webmorph functions like <code><a href="#topic+avg">avg()</a></code> and <code><a href="#topic+trans">trans()</a></code>; do not change unless you've set up a local server
</p>
</li>
<li><p> connection (stdin()): use internally for testing interactive functions; do not change
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>wm_opts_defaults()
</code></pre>


<h3>Value</h3>

<p>a list of default options
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wm_opts">wm_opts()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>wm_opts_defaults() |&gt; str() # view defaults

## Not run: 
# reset all options to default
wm_opts_defaults() |&gt; wm_opts()

## End(Not run)
</code></pre>

<hr>
<h2 id='write_stim'>Write images and templates to files</h2><span id='topic+write_stim'></span>

<h3>Description</h3>

<p>Write images and templates to files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_stim(
  stimuli,
  dir = ".",
  names = NULL,
  format = "png",
  ...,
  overwrite = wm_opts("overwrite")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_stim_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="write_stim_+3A_dir">dir</code></td>
<td>
<p>Directory to save to</p>
</td></tr>
<tr><td><code id="write_stim_+3A_names">names</code></td>
<td>
<p>A vector of stimulus names or NULL to use names from the stimuli list</p>
</td></tr>
<tr><td><code id="write_stim_+3A_format">format</code></td>
<td>
<p>output format such as &quot;png&quot;, &quot;jpeg&quot;, &quot;gif&quot;; is overridden if names end in .png, .jpg, or .gif</p>
</td></tr>
<tr><td><code id="write_stim_+3A_...">...</code></td>
<td>
<p>other arguments to pass to <a href="magick.html#topic+editing">magick::image_write</a>, such as quality (for jpegs)</p>
</td></tr>
<tr><td><code id="write_stim_+3A_overwrite">overwrite</code></td>
<td>
<p>whether to overwrite existing files (TRUE/FALSE) or &quot;ask&quot; (only in interactive mode)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of saved paths
</p>


<h3>See Also</h3>

<p>Stimulus creating functions
<code><a href="#topic+animate">animate</a>()</code>,
<code><a href="#topic+as_stimlist">as_stimlist</a>()</code>,
<code><a href="#topic+blank">blank</a>()</code>,
<code><a href="#topic+new_stimlist">new_stimlist</a>()</code>,
<code><a href="#topic+new_stim">new_stim</a>()</code>,
<code><a href="#topic+read_img">read_img</a>()</code>,
<code><a href="#topic+read_stim">read_stim</a>()</code>,
<code><a href="#topic+read_tem">read_tem</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# write demo stim as jpegs to directory ./test_faces
demo_stim() |&gt; 
  write_stim("test_faces", format = "jpg")

## End(Not run)
</code></pre>

<hr>
<h2 id='write_tps'>Create a TPS file from a stimlist</h2><span id='topic+write_tps'></span>

<h3>Description</h3>

<p>Create a TPS file from a stimlist
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_tps(stimuli, path_to_tps = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_tps_+3A_stimuli">stimuli</code></td>
<td>
<p>list of stimuli</p>
</td></tr>
<tr><td><code id="write_tps_+3A_path_to_tps">path_to_tps</code></td>
<td>
<p>optional filename to save TPS file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>text of tps file
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set path_to_tps to save to a file
tps &lt;- demo_stim() |&gt;
  write_tps()

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
