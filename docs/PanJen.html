<!DOCTYPE html><html><head><title>Help for package PanJen</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PanJen}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#choose.fform'><p>Compare a number of user-specified  transformations with a semiparametric smoothing and a model without the variable</p></a></li>
<li><a href='#fform'><p>Compare a number of transformations with a semiparametric smoothing and a model without the variable</p></a></li>
<li><a href='#hvidovre'><p>Houseprice data</p></a></li>
<li><a href='#plotff'>
<p>This function plots objects generated by choose.fform or fform</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-11-01</td>
</tr>
<tr>
<td>Title:</td>
<td>A Semi-Parametric Test for Specifying Functional Form</td>
</tr>
<tr>
<td>Author:</td>
<td>Toke Emil Panduro &lt;tepp@ifro.ku.dk&gt;, Cathrine Ulla Jensen &lt;cuj@ifro.ku.dk&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cathrine Ulla Jensen &lt;cuj@ifro.ku.dk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A central decision in a parametric regression is how to specify the relation between an dependent variable and each explanatory variable. This package provides a semi-parametric tool for comparing different transformations of an  explanatory variables in a parametric regression. The functions is relevant in a situation, where you would use a box-cox or Box-Tidwell transformations.  In contrast to the classic power-transformations, the methods in this package allows for  theoretical driven user input and the possibility to compare with a non-parametric transformation.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4), mgcv</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-11-01 14:02:47 UTC; msq431</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-11-01 14:10:26 UTC</td>
</tr>
</table>
<hr>
<h2 id='choose.fform'>Compare a number of user-specified  transformations with a semiparametric smoothing and a model without the variable
</h2><span id='topic+choose.fform'></span>

<h3>Description</h3>

<p>PanJen is built on the idea that the choice of a functional form can be extrapolated from model fit measures. The function provides a  ranking of different transformations according to their Baysian Information Criterion (BIC). The BIC provides a relative goodness-of-fit measure while accounting for the complexity of the model.
The function provides BIC for each transformation, a model without the variable in question and a socalled smoothing of the variable. The models are estimated a Generalized additive model (GAM).A GAM is a special case of the Generalized Linear Model (GLM), where it is possible to include one or more so called smoothing functions. A smoothing function is a non-parametric way to include a continuous independent variable in a parametric model and thus make it semi-parametric. Please see Wood (2006) for an elaboration. 
The printed output is a table with the transformations sorted according to their explanatory power measured by AIC. The table shows both AIC and BIC  for each regression, where BIC penalize for the number of explanatory variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>choose.fform(data,base_form,variable,functionList, distribution=gaussian)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="choose.fform_+3A_data">data</code></td>
<td>

<p>A data.frame
</p>
</td></tr>
<tr><td><code id="choose.fform_+3A_variable">variable</code></td>
<td>

<p>A character-string with the name of the variable to test
</p>
</td></tr>
<tr><td><code id="choose.fform_+3A_base_form">base_form</code></td>
<td>

<p>A formula-object with the regressions without the variable that is tested
</p>
</td></tr>
<tr><td><code id="choose.fform_+3A_functionlist">functionList</code></td>
<td>

<p>A list of transformations. Please see the example for an elaboration
</p>
</td></tr>
<tr><td><code id="choose.fform_+3A_distribution">distribution</code></td>
<td>

<p>Assumed distribution, see mgcv-vignette for an elaboration. Default is gaussian
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>rank.table</code></td>
<td>
<p>The printed table. The transformations are ranked according to their explanatory power measured by AIC. The table shows both the AIC and BIC value, where the BIC value penalizes for the number of variables</p>
</td></tr>
<tr><td><code>models</code></td>
<td>
<p>A list of estimated models</p>
</td></tr>
<tr><td><code>dataset</code></td>
<td>
<p>A dataframe with the dataset</p>
</td></tr>
<tr><td><code>fforms</code></td>
<td>
<p>The formula provided by the user</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Toke Emil Panduro &amp; Cathrine Ulla Jensen
</p>


<h3>References</h3>

<p>Simon Wood, Generalized Additive Models: an introduction with R.,hapman and Hall/CRC,  2006 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Test a linear specification (x), a log (I(log(x))) and a square I(x^2))
library(PanJen) 
data("hvidovre")
form&lt;-formula(lprice ~brick+roof_tile+roof_cemen+rebuild90+rebuild00+y7+y8+y9)
fxlist= list(
  linear = function(x) x,
  sqr = function(x) x^2,
  log=function(x) log(x)
)
  
PanJenAreaC&lt;-choose.fform(data=hvidovre,variable="area",base_form=form, functionList=fxlist) 
</code></pre>

<hr>
<h2 id='fform'>Compare a number of transformations with a semiparametric smoothing and a model without the variable
</h2><span id='topic+fform'></span>

<h3>Description</h3>

<p>PanJen is built on the idea that the choice of a functional form can be extrapolated from model fit measures. The function provides a  ranking of different transformations according to their Baysian Information Criterion (BIC). The BIC provides a relative goodness-of-fit measure while accounting for the complexity of the model.
The function provides BIC for a set of predefined transformations aswell as a model without the variable in question and a socalled smoothing of the variable. The models are estimated a Generalized additive model (GAM).A GAM is a special case of the Generalized Linear Model (GLM), where it is possible to include one or more so called smoothing functions. A smoothing function is a non-parametric way to include a continuous independent variable in a parametric model and thus make it semi-parametric. Please see Wood (2006) for an elaboration. 
The printed output is a table with the transformations sorted according to their explanatory power measured by AIC. The table shows both AIC and BIC  for each regression, where BIC penalize for the number of explanatory variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fform(data,variable,base_form, distribution=gaussian)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fform_+3A_data">data</code></td>
<td>

<p>A data.frame
</p>
</td></tr>
<tr><td><code id="fform_+3A_variable">variable</code></td>
<td>

<p>A character-string with the name of the variable to test
</p>
</td></tr>
<tr><td><code id="fform_+3A_base_form">base_form</code></td>
<td>

<p>A formula-object with the regressions without the variable that is tested
</p>
</td></tr>
<tr><td><code id="fform_+3A_distribution">distribution</code></td>
<td>

<p>Assumed distribution, see mgcv-vignette for an elaboration. Default is gaussian
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>rank.table</code></td>
<td>
<p>The printed table. The transformations are ranked according to their explanatory power measured by AIC. The table shows both the AIC and BIC value, where the BIC value penalizes for the number of variables</p>
</td></tr>
<tr><td><code>models</code></td>
<td>
<p>A list of estimated models</p>
</td></tr>
<tr><td><code>dataset</code></td>
<td>
<p>A dataframe with the dataset</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Toke Emil Panduro &amp; Cathrine Ulla Jensen
</p>


<h3>References</h3>

<p>Simon Wood, Generalized Additive Models: an introduction with R.,hapman and Hall/CRC,  2006 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PanJen) 
data("hvidovre")

form&lt;-formula(lprice ~brick+roof_tile+roof_cemen+rebuild70+rebuild80+rebuild90+rebuild00+y7+y8+y9) 
PanJenArea&lt;-fform(data=hvidovre,variable="area",base_form=form) 
</code></pre>

<hr>
<h2 id='hvidovre'>Houseprice data</h2><span id='topic+hvidovre'></span>

<h3>Description</h3>

<p>A dataset with  trade price and attributes for 900 homes in a Danish munnicipality</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("hvidovre")</code></pre>


<h3>Format</h3>

<p>  A data frame with 901 observations on the following 19 variables
</p>

<dl>
<dt><code>lprice</code></dt><dd><p>a numeric vector, price, log price in 1000 EUR</p>
</dd>
<dt><code>brick</code></dt><dd><p>a numeric vector, dummy, wall made out of brick =1</p>
</dd>
<dt><code>roof_tile</code></dt><dd><p>a numeric vector, roof_tile</p>
</dd></dl>
<p>dummy, roof made out of tiles =1
</p>
<dl>
<dt><code>roof_cemen</code></dt><dd><p>a numeric vector, dummy, roof made out of cement</p>
</dd>
<dt><code>y7</code></dt><dd><p>a numeric vector, home sold in 2007</p>
</dd>
<dt><code>y8</code></dt><dd><p>a numeric vector, home sold in 2008</p>
</dd>
<dt><code>y9</code></dt><dd><p>a numeric vector, home sold in 2009</p>
</dd>
<dt><code>rebuild70</code></dt><dd><p>a numeric vector, home rebuild in 1970's</p>
</dd>
<dt><code>rebuild80</code></dt><dd><p>a numeric vector, home rebuild in 1980's</p>
</dd>
<dt><code>rebuild90</code></dt><dd><p>a numeric vector, home rebuild in 1990's</p>
</dd>
<dt><code>rebuild00</code></dt><dd><p>a numeric vector,home rebuild in 2000's</p>
</dd>
<dt><code>area</code></dt><dd><p>a numeric vector,living area in square meters</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric vector, build year</p>
</dd>
<dt><code>bathrooms</code></dt><dd><p>a numeric vector, number of bathrooms</p>
</dd>
<dt><code>highways</code></dt><dd><p>a numeric vector, distance to nearest highway in meters</p>
</dd>
<dt><code>big_roads</code></dt><dd><p>a numeric vector, distance to nearest large road in meters</p>
</dd>
<dt><code>railways</code></dt><dd><p>a numeric vector, railways</p>
</dd></dl>
<p>distance to nearest railway in meters
</p>
<dl>
<dt><code>nature_SLD</code></dt><dd><p>a numeric vector, nature_SLD</p>
</dd></dl>
<p>distance to nearest nature area in meters
</p>
<dl>
<dt><code>lake_SLD</code></dt><dd><p>a numeric vector,distance to nearest lake in meters</p>
</dd>
</dl>



<h3>Source</h3>

<p>Panduro et al (in review JAERE)
</p>


<h3>References</h3>

<p>Panduro T.E., Jensen, C.U, Lundhede, T.H., von Graevenitz, K. and Thorsen, B.J., Estimating demand schedules in hedonic analysis: The case of urban parks, (in review JAERE)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hvidovre)</code></pre>

<hr>
<h2 id='plotff'>
This function plots objects generated by choose.fform or fform
</h2><span id='topic+plotff'></span>

<h3>Description</h3>

<p>plots the output from fform() and choose.fform()</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotff(input)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotff_+3A_input">input</code></td>
<td>

<p>A PJ-objected produced by fform or choose.fform
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Toke Emil Panduro and Cathrine Ulla Jensen
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(PanJen) 
data("hvidovre")

form&lt;-formula(lprice ~brick+roof_tile+roof_cemen+rebuild90+rebuild00+y7+y8+y9) 
PanJenArea&lt;-fform(data=hvidovre,variable="area",base_form=form) 
plotff(PanJenArea) 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
