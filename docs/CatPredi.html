<!DOCTYPE html><html lang="en"><head><title>Help for package CatPredi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CatPredi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CatPredi-package'>
<p>Categorisation of Continuous Predictor Variables in Regression Models.</p></a></li>
<li><a href='#catpredi'><p>Function to obtain optimal cut points to categorise a continuous predictor variable in a logistic regression model</p></a></li>
<li><a href='#catpredi.survival'><p>Function to obtain optimal cut points to categorise a continuous predictor variable in a Cox proportional hazards regression model</p></a></li>
<li><a href='#comp.cutpoints'>
<p>Selection of optimal number of cut points</p></a></li>
<li><a href='#comp.cutpoints.survival'><p>Selection of optimal number of cut points</p></a></li>
<li><a href='#controlcatpredi'>
<p>Control function</p></a></li>
<li><a href='#controlcatpredi.survival'><p>  Control function</p></a></li>
<li><a href='#plot.catpredi'>
<p>Plot the optimal cut points.</p></a></li>
<li><a href='#plot.catpredi.survival'><p>Plot the optimal cut points.</p></a></li>
<li><a href='#summary.catpredi'>
<p>Summary method for catpredi objects</p></a></li>
<li><a href='#summary.catpredi.survival'>
<p>Summary method for objects of class &quot;catpredi.survival&quot;</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Optimal Categorisation of Continuous Variables in Prediction
Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-01-10</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, rms, rgenoud, mgcv, stats, graphics</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows the user to categorise a continuous predictor variable in a logistic or a Cox proportional hazards regression setting, by maximising the discriminative ability of the model. I Barrio, I Arostegui, MX Rodriguez-Alvarez, JM Quintana (2015) &lt;<a href="https://doi.org/10.1177%2F0962280215601873">doi:10.1177/0962280215601873</a>&gt;. I Barrio,  MX Rodriguez-Alvarez, L Meira-Machado, C Esteban, I Arostegui (2017) <a href="https://www.idescat.cat/sort/sort411/41.1.3.barrio-etal.pdf">https://www.idescat.cat/sort/sort411/41.1.3.barrio-etal.pdf</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-10 11:07:32 UTC; 877613</td>
</tr>
<tr>
<td>Author:</td>
<td>Irantzu Barrio [aut, cre],
  Maria Xose Rodriguez-Alvarez [aut],
  Inmaculada Arostegui [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Irantzu Barrio &lt;irantzu.barrio@ehu.eus&gt;</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-10 12:43:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='CatPredi-package'>
Categorisation of Continuous Predictor Variables in Regression Models.
</h2><span id='topic+CatPredi-package'></span><span id='topic+CatPredi'></span>

<h3>Description</h3>

<p>Allows the user to categorise a continuous predictor variable in a logistic or a Cox proportional hazards regression setting, by maximising the discriminative ability of the model. The categorisation can be done either in a univariate or a multivariate setting.
</p>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>
<p>Maintainer: Irantzu Barrio &lt;irantzu.barrio@ehu.eus&gt;  </p>


<h3>References</h3>

<p>I Barrio, I Arostegui, M.X Rodriguez-Alvarez and  J.M Quintana (2015). A new approach to categorising continuous variables in prediction models: proposal and validation. <em>Statistical Methods in Medical Research</em>, in press. 
</p>
<p>I Barrio,  M.X Rodriguez-Alvarez, L Meira-Machado, C Esteban  and  I Arostegui (2017). Comparison of two discrimination indexes in the categorisation of continuous predictors in time-to-event studies. <em>SORT</em>, 41:73-92
</p>

<hr>
<h2 id='catpredi'>Function to obtain optimal cut points to categorise a continuous predictor variable in a logistic regression model</h2><span id='topic+catpredi'></span>

<h3>Description</h3>

<p>Returns an object with the optimal cut points to categorise a continuous predictor variable in a logistic regression model</p>


<h3>Usage</h3>

<pre><code class='language-R'>catpredi(formula, cat.var, cat.points = 1, data,
method = c("addfor", "genetic"), range = NULL, 
correct.AUC = TRUE, control = controlcatpredi(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catpredi_+3A_formula">formula</code></td>
<td>
<p>An object of class <code><a href="stats.html#topic+formula">formula</a></code> giving the model to be fitted in addition to the continuous covariate
is aimed to categorise. This argument allows the user to specify whether the continuous predictor should
be categorised in a univariable context, or in presence of other covariates or cofounders, i.e in
a multiple logistic regression model. For instance, Y ~ 1 indicates that the categorisation should be done
in a univariable setting, with Y being the response variable. If the predictor variable is aimed to be categorised 
in a multivariable setting, this argument allows to specify whether the covariates should be modelled using linear
or non linear effects. In the latest, the effects are estimated using the <code><a href="mgcv.html#topic+mgcv">mgcv</a></code> package. </p>
</td></tr>
<tr><td><code id="catpredi_+3A_cat.var">cat.var</code></td>
<td>
<p>Name of the continuous variable to categorise.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_cat.points">cat.points</code></td>
<td>
<p>Number of cut points to look for.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_data">data</code></td>
<td>
<p>Data frame containing all needed variables.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_method">method</code></td>
<td>
<p>The algorithm selected to search for the optimal cut points. &quot;addfor&quot; if the AddFor algorithm is choosen and &quot;genetic&quot; otherwise.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_range">range</code></td>
<td>
<p>The range of the continuous variable in which to look for the cut points. By default NULL, i.e, all the range.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_correct.auc">correct.AUC</code></td>
<td>
<p>A logical value. If TRUE the bias corrected AUC is estimated.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_control">control</code></td>
<td>
<p>Output of the controlcatpredi() function.</p>
</td></tr>
<tr><td><code id="catpredi_+3A_...">...</code></td>
<td>
<p>Further arguments for passing on to the function <code><a href="rgenoud.html#topic+genoud">genoud</a></code> of the package <code>rgenoud</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;catpredi&quot; with the following components:
</p>
<table role = "presentation">
<tr><td><code>call</code></td>
<td>
<p>the matched call.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>the algorithm selected in the call.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>an object of class <code><a href="stats.html#topic+formula">formula</a></code> giving the model to be fitted in addition to the continuous covariate
is aimed to categorise.</p>
</td></tr>
<tr><td><code>cat.var</code></td>
<td>
<p>name of the continuous variable to categorise.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>the data frame with the variables used in the call.</p>
</td></tr>
<tr><td><code>correct.AUC</code></td>
<td>
<p>The logical value used in the call.</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>a list with the estimated cut points, AUC and bias corrected AUC.</p>
</td></tr>
<tr><td><code>control</code></td>
<td>
<p>the control parameters used in the call.</p>
</td></tr>
</table>
<p>For each of the methods used in the call, a list with the following components is obtained:
</p>
<table role = "presentation">
<tr><td><code>"cutpoints"</code></td>
<td>
<p>Estimated optimal cut points.</p>
</td></tr>
<tr><td><code>"AUC"</code></td>
<td>
<p>Estimated AUC.</p>
</td></tr>
<tr><td><code>"AUC.cor"</code></td>
<td>
<p>Estimated bias corrected AUC.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>


<h3>References</h3>

<p>I Barrio, I Arostegui, M.X Rodriguez-Alvarez and  J.M Quintana (2015). A new approach to categorising continuous variables in prediction models: proposal and validation. <em>Statistical Methods in Medical Research</em> (in press).
</p>
<p>S.N Wood (2006). Generalized Additive Models: An Introduction with R. Chapman and Hall/CRC.
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+controlcatpredi">controlcatpredi</a></code>, <code><a href="#topic+comp.cutpoints">comp.cutpoints</a></code>, <code><a href="#topic+plot.catpredi">plot.catpredi</a></code>, 
<code><a href="#topic+summary.catpredi">summary.catpredi</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)


set.seed(127)
#Simulate data
  n = 200
  #Predictor variable
  xh &lt;- rnorm(n, mean = 0, sd = 1)
  xd &lt;- rnorm(n, mean = 1.5, sd = 1)
  x &lt;- c(xh, xd)
  #Response
  y &lt;- c(rep(0,n), rep(1,n))
  #Covariate
  zh &lt;- rnorm(n, mean=1.5, sd=1)
  zd &lt;- rnorm(n, mean=1, sd=1)
  z &lt;- c(zh, zd)
  # Data frame
  df &lt;- data.frame(y = y, x = x, z = z)
  
  # Select optimal cut points using the AddFor algorithm
  res.addfor &lt;- catpredi(formula = y ~ z, cat.var = "x", cat.points = 3, 
  data = df, method = "addfor", range=NULL, correct.AUC=FALSE)
 </code></pre>

<hr>
<h2 id='catpredi.survival'>Function to obtain optimal cut points to categorise a continuous predictor variable in a Cox proportional hazards regression model</h2><span id='topic+catpredi.survival'></span>

<h3>Description</h3>

<p>Returns an object with the optimal cut points to categorise a continuous predictor variable in a Cox proportional hazards regression model</p>


<h3>Usage</h3>

<pre><code class='language-R'>catpredi.survival(formula, cat.var, cat.points = 1, data, 
method = c("addfor", "genetic"), conc.index = c("cindex", "cpe"),
range = NULL, correct.index = TRUE, control = controlcatpredi.survival(), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="catpredi.survival_+3A_formula">formula</code></td>
<td>
<p>An object of class <code><a href="stats.html#topic+formula">formula</a></code> giving the model to be fitted in addition to the continuous covariate
is aimed to categorise. The response must be a survival object as returned by the <code><a href="survival.html#topic+Surv">Surv</a></code> function. This argument allows the user to specify whether the continuous predictor should be categorised in a univariable context, or in presence of other covariates or cofounders, i.e in
a multiple Cox proportional hazards regression model. For instance, Surv(SurvT,SurvS)~1 indicates that the categorisation should be done
in a univariable setting.</p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_cat.var">cat.var</code></td>
<td>
<p>Name of the continuous variable to categorise.</p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_cat.points">cat.points</code></td>
<td>
<p>Number of cut points to look for. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_data">data</code></td>
<td>
<p>Data frame containing all needed variables. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_method">method</code></td>
<td>
<p>The algorithm selected to search for the optimal cut points. &quot;addfor&quot; if the AddFor algorithm is choosen and &quot;genetic&quot; otherwise. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_conc.index">conc.index</code></td>
<td>
<p>The concordance probability estimator selected for maximisation purposes. &quot;cindex&quot; if the c-index concordance probability is choosen and &quot;cpe&quot; otherwise. 
The c-index and CPE are estimated using the <code>rms</code> and <code>CPE</code> packages, respectively. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_range">range</code></td>
<td>
<p> The range of the continuous variable in which to look for the cut points. By default NULL, i.e, all the range.</p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_correct.index">correct.index</code></td>
<td>
<p>A logical value. If TRUE the bias corrected concordance probability is estimated. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_control">control</code></td>
<td>
<p>Output of the controlcatpredi.survival() function. </p>
</td></tr>
<tr><td><code id="catpredi.survival_+3A_...">...</code></td>
<td>
<p>Further arguments for passing on to the function <code><a href="rgenoud.html#topic+genoud">genoud</a></code> of the package <code>rgenoud</code>. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;catpredi.survival&quot; with the following components:
</p>
<table role = "presentation">
<tr><td><code>call</code></td>
<td>
<p>the matched call.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>the algorithm selected in the call.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>an object of class <code><a href="stats.html#topic+formula">formula</a></code> giving the model to be fitted in addition to the continuous covariate
is aimed to categorise.</p>
</td></tr>
<tr><td><code>cat.var</code></td>
<td>
<p>name of the continuous variable to categorise.</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>the data frame with the variables used in the call.</p>
</td></tr>
<tr><td><code>correct.index</code></td>
<td>
<p>The logical value used in the call.</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>a list with the estimated cut points, concordance probability and bias corrected concordance probability.</p>
</td></tr>
<tr><td><code>control</code></td>
<td>
<p>the control parameters used in the call.</p>
</td></tr>
</table>
<p>When the c-index concordance probability is choosen, a list with the following components is obtained for each of the methods used in the call:
</p>
<table role = "presentation">
<tr><td><code>"cutpoints"</code></td>
<td>
<p>Estimated optimal cut points.</p>
</td></tr>
<tr><td><code>"Cindex"</code></td>
<td>
<p>Estimated c-index.</p>
</td></tr>
<tr><td><code>"Cindex.cor"</code></td>
<td>
<p>Estimated bias corrected c-index.</p>
</td></tr>
</table>
<p>When the CPE concordance probability is choosen, a list with the following components is obtained for each of the methods used in the call:
</p>
<table role = "presentation">
<tr><td><code>"cutpoints"</code></td>
<td>
<p>Estimated optimal cut points.</p>
</td></tr>
<tr><td><code>"CPE"</code></td>
<td>
<p>Estimated CPE.</p>
</td></tr>
<tr><td><code>"CPE.cor"</code></td>
<td>
<p>Estimated bias corrected CPE.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Irantzu Barrio and Maria Xose Rodriguez-Alvarez
</p>


<h3>References</h3>

<p>I Barrio,  M.X Rodriguez-Alvarez, L Meira-Machado, C Esteban  and  I Arostegui (2017). Comparison of two discrimination indexes in the categorisation of continuous predictors in time-to-event studies. <em>SORT</em>, 41:73-92
</p>
<p>M Gonen and  G Heller (2005). Concordance probability and discriminatory power in  proportional hazards regression. <em>Biometrika</em>, 92:965-970.
</p>
<p>F Harrell (2001). Regression modeling strategies: with applications to linear models, logistic and ordinal regression, and survival analysis. Springer.
</p>


<h3>See Also</h3>

<p>See Also <code><a href="#topic+controlcatpredi.survival">controlcatpredi.survival</a></code>,  <code><a href="#topic+comp.cutpoints.survival">comp.cutpoints.survival</a></code>, <code><a href="#topic+plot.catpredi.survival">plot.catpredi.survival</a></code>, <code><a href="#topic+catpredi">catpredi</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)
library(survival)
set.seed(123)
#Simulate data
  n = 500
  tauc = 1
  X &lt;- rnorm(n=n, mean=0, sd=2)
  SurvT &lt;- exp(2*X + rweibull(n = n, shape=1, scale = 1))   + rnorm(n, mean=0, sd=0.25)
  # Censoring time
  CensTime &lt;- runif(n=n, min=0, max=tauc)
  # Status
  SurvS &lt;- as.numeric(SurvT &lt;= CensTime)
  # Data frame
  dat &lt;- data.frame(X = X, SurvT = pmin(SurvT, CensTime), SurvS = SurvS)
  
  # Select optimal cut points using the AddFor algorithm
  res &lt;- catpredi.survival (formula= Surv(SurvT,SurvS)~1, cat.var="X", cat.points = 2,
   data = dat, method = "addfor", conc.index = "cindex", range = NULL, 
   correct.index = FALSE) 
</code></pre>

<hr>
<h2 id='comp.cutpoints'>
Selection of optimal number of cut points
</h2><span id='topic+comp.cutpoints'></span>

<h3>Description</h3>

<p>Compares two objects of class &quot;catpredi&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>comp.cutpoints(obj1, obj2, V = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="comp.cutpoints_+3A_obj1">obj1</code></td>
<td>
<p>an object inheriting from class &quot;catpredi&quot; for k number of cut points </p>
</td></tr>
<tr><td><code id="comp.cutpoints_+3A_obj2">obj2</code></td>
<td>
<p>an object inheriting from class &quot;catpredi&quot; for k+1 number of cut points </p>
</td></tr>
<tr><td><code id="comp.cutpoints_+3A_v">V</code></td>
<td>
<p>Number of bootstrap resamples. By default V=100</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns an object of class &quot;comp.cutpoints&quot; with the following components: 
</p>
<table role = "presentation">
<tr><td><code>AUC.cor.diff</code></td>
<td>
<p>the difference of the bias corrected AUCs for the two categorical variables.</p>
</td></tr>
<tr><td><code>icb.auc.diff</code></td>
<td>
<p>bootstrap based confidence interval for the bias corrected AUC difference.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>


<h3>References</h3>

<p>I Barrio, I Arostegui, M.X Rodriguez-Alvarez and  J.M Quintana (2015). A new approach to categorising continuous variables in prediction models: proposal and validation. <em>Statistical Methods in Medical Research</em> (in press).
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi">catpredi</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)
set.seed(127)
#Simulate data
  n = 100
  #Predictor variable
  xh &lt;- rnorm(n, mean = 0, sd = 1)
  xd &lt;- rnorm(n, mean = 1.5, sd = 1)
  x &lt;- c(xh, xd)
  #Response
  y &lt;- c(rep(0,n), rep(1,n))
  # Data frame
  df &lt;- data.frame(y = y, x = x)

 
  # Select 2 optimal cut points using the AddFor algorithm. Correct the AUC
  res.addfor.k2 &lt;- catpredi(formula = y ~ 1, cat.var = "x", cat.points = 2, 
  data = df, method = "addfor", range=NULL, correct.AUC=TRUE, 
  control=controlcatpredi(addfor.g=100))
  # Select 3 optimal cut points using the AddFor algorithm. Correct the AUC
  res.addfor.k3 &lt;- catpredi(formula = y ~ 1, cat.var = "x", cat.points = 3, 
  data = df, method = "addfor", range=NULL, correct.AUC=TRUE, 
  control=controlcatpredi(addfor.g=100))     
  # Select optimal number of cut points
  comp &lt;-  comp.cutpoints(res.addfor.k2, res.addfor.k3, V = 100)
</code></pre>

<hr>
<h2 id='comp.cutpoints.survival'>Selection of optimal number of cut points</h2><span id='topic+comp.cutpoints.survival'></span>

<h3>Description</h3>

<p>Compares two objects of class &quot;catpredi.survival&quot;</p>


<h3>Usage</h3>

<pre><code class='language-R'>comp.cutpoints.survival(obj1, obj2, V = 100)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="comp.cutpoints.survival_+3A_obj1">obj1</code></td>
<td>
<p>an object inheriting from class &quot;catpredi.survival&quot; for k number of cut points </p>
</td></tr>
<tr><td><code id="comp.cutpoints.survival_+3A_obj2">obj2</code></td>
<td>
<p>an object inheriting from class &quot;catpredi.survival&quot; for k+1 number of cut points </p>
</td></tr>
<tr><td><code id="comp.cutpoints.survival_+3A_v">V</code></td>
<td>
<p>Number of bootstrap resamples. By default V=100</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns an object of class &quot;comp.cutpoints.survival&quot; with the following components: 
</p>
<table role = "presentation">
<tr><td><code>CI.cor.diff</code></td>
<td>
<p>the difference of the bias corrected concordance probability for the two categorical variables.</p>
</td></tr>
<tr><td><code>icb.CI.diff</code></td>
<td>
<p>bootstrap based confidence interval for the bias corrected concordance probability difference.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Irantzu Barrio and Maria Xose Rodriguez-Alvarez
</p>


<h3>References</h3>

<p>I Barrio,  M.X Rodriguez-Alvarez, L Meira-Machado, C Esteban  and  I Arostegui (2017). Comparison of two discrimination indexes in the categorisation of continuous predictors in time-to-event studies. <em>SORT</em>, 41:73-92
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi.survival">catpredi.survival</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)
library(survival)
set.seed(123)

#Simulate data
  n = 300
  tauc = 1
  X &lt;- rnorm(n=n, mean=0, sd=2)
  SurvT &lt;- exp(2*X + rweibull(n = n, shape=1, scale = 1))   + rnorm(n, mean=0, sd=0.25)
  # Censoring time
  CensTime &lt;- runif(n=n, min=0, max=tauc)
  # Status
  SurvS &lt;- as.numeric(SurvT &lt;= CensTime)
  # Data frame
  dat &lt;- data.frame(X = X, SurvT = pmin(SurvT, CensTime), SurvS = SurvS)
  
  # Select 2 optimal cut points using the AddFor algorithm. Correct the c-index
  res.k2 &lt;- catpredi.survival (formula= Surv(SurvT,SurvS)~1, cat.var="X", cat.points = 2, 
  data = dat, method = "addfor", conc.index = "cindex", range = NULL, correct.index = TRUE) 
  # Select 3 optimal cut points using the AddFor algorithm. Correct the c-index
  res.k3 &lt;- catpredi.survival (formula= Surv(SurvT,SurvS)~1, cat.var="X", cat.points = 3, 
  data = dat, method = "addfor", conc.index = "cindex", range = NULL, correct.index = TRUE) 
    # Select optimal number of cut points
  comp &lt;-  comp.cutpoints.survival(res.k2, res.k3, V = 100)
  
  
    
</code></pre>

<hr>
<h2 id='controlcatpredi'>
Control function
</h2><span id='topic+controlcatpredi'></span>

<h3>Description</h3>

<p>Function used to set several parameters to control the selection of the optimal cut points in a logistic regression model</p>


<h3>Usage</h3>

<pre><code class='language-R'>controlcatpredi(min.p.cat = 1, addfor.g = 100, B = 50, 
b.method = c("ncoutcome", "coutcome"), print.gen = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="controlcatpredi_+3A_min.p.cat">min.p.cat</code></td>
<td>
<p>Set the minimun number of individuals in each category </p>
</td></tr>
<tr><td><code id="controlcatpredi_+3A_addfor.g">addfor.g</code></td>
<td>
<p>Grid size for the AddFor algorithm </p>
</td></tr>
<tr><td><code id="controlcatpredi_+3A_b">B</code></td>
<td>
<p>Number of bootstrap replicates for the AUC bias correction procedure</p>
</td></tr>
<tr><td><code id="controlcatpredi_+3A_b.method">b.method</code></td>
<td>
<p> Allows to specify whether the bootstrap resampling should be done considering or not the outcome variable. 
The option &quot;ncoutcome&quot; indicates that the data is resampled without taking into account the response variable, while &quot;coutcome&quot; indicates that the data is
resampled in regard to the response variable</p>
</td></tr>
<tr><td><code id="controlcatpredi_+3A_print.gen">print.gen</code></td>
<td>
<p>corresponds to the argument print.level of the <code><a href="rgenoud.html#topic+genoud">genoud</a></code> function of the package <code>rgenoud</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with components for each of the possible arguments.
</p>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>


<h3>References</h3>

<p>Mebane Jr, W. R., &amp; Sekhon, J. S. (2011). Genetic optimization using derivatives: the rgenoud package for R. <em>Journal of Statistical Software</em> 42<b>11</b>, 1-26.
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi">catpredi</a></code>.
</p>

<hr>
<h2 id='controlcatpredi.survival'>  Control function</h2><span id='topic+controlcatpredi.survival'></span>

<h3>Description</h3>

<p>Function used to set several parameters to control the selection of the optimal cut points in a Cox proportional hazards regression model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>controlcatpredi.survival(min.p.cat = 5, addfor.g = 100,
B = 50, b.method = c("ncoutcome", "coutcome"), print.gen = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="controlcatpredi.survival_+3A_min.p.cat">min.p.cat</code></td>
<td>
<p> Set the minimun number of individuals in each category.</p>
</td></tr>
<tr><td><code id="controlcatpredi.survival_+3A_addfor.g">addfor.g</code></td>
<td>
<p>Grid size for the AddFor algorithm. </p>
</td></tr>
<tr><td><code id="controlcatpredi.survival_+3A_b">B</code></td>
<td>
<p>Number of bootstrap replicates for the AUC bias correction procedure</p>
</td></tr>
<tr><td><code id="controlcatpredi.survival_+3A_b.method">b.method</code></td>
<td>
<p>Allows to specify whether the bootstrap resampling should be done considering or not the outcome variable. 
The option &quot;ncoutcome&quot; indicates that the data is resampled without taking into account the response variable, while &quot;coutcome&quot; indicates that the data is
resampled in regard to the response variable.</p>
</td></tr>
<tr><td><code id="controlcatpredi.survival_+3A_print.gen">print.gen</code></td>
<td>
<p> Corresponds to the argument print.level of the <code><a href="rgenoud.html#topic+genoud">genoud</a></code> function of the package <code>rgenoud</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with components for each of the possible arguments.
</p>


<h3>Author(s)</h3>

<p> Irantzu Barrio and Maria Xose Rodriguez-Alvarez</p>


<h3>References</h3>

<p>Mebane Jr, W. R., &amp; Sekhon, J. S. (2011). Genetic optimization using derivatives: the rgenoud package for R. <em>Journal of Statistical Software</em> 42<b>11</b>, 1-26.
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi.survival">catpredi.survival</a></code>.
</p>

<hr>
<h2 id='plot.catpredi'>
Plot the optimal cut points.
</h2><span id='topic+plot.catpredi'></span>

<h3>Description</h3>

<p>Plots the relationship between the predictor variable is aimed to categorise and the response variable based on a GAM model. 
Additionally, the optimal cut points obtained with the catpredi() function are drawn on the graph. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'catpredi'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.catpredi_+3A_x">x</code></td>
<td>
<p>An object of type catpredi.</p>
</td></tr>
<tr><td><code id="plot.catpredi_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed on to other functions. Not yet implemented.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the plot of the relationship between the predictor variable and the outcome.
</p>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>


<h3>References</h3>

<p>I Barrio, I Arostegui, M.X Rodriguez-Alvarez and  J.M Quintana (2015). A new approach to categorising continuous variables in prediction models: proposal and validation. <em>Statistical Methods in Medical Research</em> (in press).
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi">catpredi</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library(CatPredi)
  set.seed(127)
  #Simulate data
  n = 100
  #Predictor variable
  xh &lt;- rnorm(n, mean = 0, sd = 1)
  xd &lt;- rnorm(n, mean = 1.5, sd = 1)
  x &lt;- c(xh, xd)
  #Response
  y &lt;- c(rep(0,n), rep(1,n))
  # Data frame
  df &lt;- data.frame(y = y, x = x)
  
  # Select optimal cut points using the AddFor algorithm
  res.addfor &lt;- catpredi(formula = y ~ 1, cat.var = "x", cat.points = 3, 
  				data = df, method = "addfor", range = NULL, correct.AUC = FALSE)
  # Plot
  plot(res.addfor)
</code></pre>

<hr>
<h2 id='plot.catpredi.survival'>Plot the optimal cut points.</h2><span id='topic+plot.catpredi.survival'></span>

<h3>Description</h3>

<p>Plots the functional form of the predictor variable we want to categorise. Additionally, the optimal cut points obtained with
the catpredi.survival() function are drawn on the graph.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'catpredi.survival'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.catpredi.survival_+3A_x">x</code></td>
<td>
<p>An object of type catpredi.survival .</p>
</td></tr>
<tr><td><code id="plot.catpredi.survival_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed on to other functions. Not yet implemented.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns the plot of the relationship between the predictor variable and the outcome.
</p>


<h3>Author(s)</h3>

<p>Irantzu Barrio and Maria Xose Rodriguez-Alvarez 
</p>


<h3>References</h3>

<p>I Barrio,  M.X Rodriguez-Alvarez, L Meira-Machado, C Esteban  and  I Arostegui (2017). Comparison of two discrimination indexes in the categorisation of continuous predictors in time-to-event studies. <em>SORT</em>, 41:73-92
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi.survival">catpredi.survival</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)
library(survival)
set.seed(123)
#Simulate data
  n = 500
  tauc = 1
  X &lt;- rnorm(n=n, mean=0, sd=2)
  SurvT &lt;- exp(2*X + rweibull(n = n, shape=1, scale = 1))   + rnorm(n, mean=0, sd=0.25)
  # Censoring time
  CensTime &lt;- runif(n=n, min=0, max=tauc)
  # Status
  SurvS &lt;- as.numeric(SurvT &lt;= CensTime)
  # Data frame
  dat &lt;- data.frame(X = X, SurvT = pmin(SurvT, CensTime), SurvS = SurvS)
 
  # Select optimal cut points using the AddFor algorithm
  res &lt;- catpredi.survival (formula= Surv(SurvT,SurvS)~1, cat.var="X", cat.points = 2, 
  data = dat, method = "addfor", conc.index = "cindex", range = NULL, 
  correct.index = FALSE) 
  # Plot
  plot(res)
</code></pre>

<hr>
<h2 id='summary.catpredi'>
Summary method for catpredi objects
</h2><span id='topic+summary.catpredi'></span>

<h3>Description</h3>

<p>Produces a summary of a catpredi object. The following are printed: the call to the
catpredi() function; the estimated optimal cut points obtained with the method selected and
the estimated AUC and bias corrected AUC (if the argument correct.AUC is TRUE) for the categorised variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'catpredi'
summary(object, digits = 4, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.catpredi_+3A_object">object</code></td>
<td>
<p>an object of class catpredi as produced by catpredi() </p>
</td></tr>
<tr><td><code id="summary.catpredi_+3A_digits">digits</code></td>
<td>
<p>.</p>
</td></tr>
<tr><td><code id="summary.catpredi_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;summary.catpredi&quot; with the same components as the catpredi
function (see <code><a href="#topic+catpredi">catpredi</a></code>). plus:
</p>
<table role = "presentation">
<tr><td><code>fit.gam</code></td>
<td>
<p>fitted model according to the model specified in the call, based on the function <code><a href="mgcv.html#topic+gam">gam</a></code> of the package <code>mgcv</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Irantzu Barrio, Maria Xose Rodriguez-Alvarez and Inmaculada Arostegui
</p>


<h3>References</h3>

<p>I Barrio, I Arostegui, M.X Rodriguez-Alvarez and  J.M Quintana (2015). A new approach to categorising continuous variables in prediction models: proposal and validation. <em>Statistical Methods in Medical Research</em> (in press).
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi">catpredi</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(CatPredi)
 set.seed(127)
#Simulate data
  n = 200
  #Predictor variable
  xh &lt;- rnorm(n, mean = 0, sd = 1)
  xd &lt;- rnorm(n, mean = 1.5, sd = 1)
  x &lt;- c(xh, xd)
  #Response
  y &lt;- c(rep(0,n), rep(1,n))
  #Covariate
  zh &lt;- rnorm(n, mean=1.5, sd=1)
  zd &lt;- rnorm(n, mean=1, sd=1)
  z &lt;- c(zh, zd)
  # Data frame
  df &lt;- data.frame(y = y, x = x, z = z)
  
  # Select optimal cut points using the AddFor algorithm
  res.addfor &lt;- catpredi(formula = y ~ z, cat.var = "x", cat.points = 2, 
  data = df, method = "addfor", range=NULL, correct.AUC=FALSE)
  # Summary
  summary(res.addfor)
 </code></pre>

<hr>
<h2 id='summary.catpredi.survival'>
Summary method for objects of class &quot;catpredi.survival&quot;
</h2><span id='topic+summary.catpredi.survival'></span>

<h3>Description</h3>

<p>Produces a summary of a &quot;catpredi.survival&quot; object. The following are printed: the call to the
catpredi.survival() function; the estimated optimal cut points obtained with the method and concordance probability estimator selected and
the estimated and bias corrected concordance probability for the categorised variable (whenever the argument correct.index is set to TRUE) .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'catpredi.survival'
summary(object, digits = 4, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.catpredi.survival_+3A_object">object</code></td>
<td>
<p>an object of class &quot;catpredi.survival&quot; as produced by catpredi.survival() </p>
</td></tr>
<tr><td><code id="summary.catpredi.survival_+3A_digits">digits</code></td>
<td>
<p>.</p>
</td></tr>
<tr><td><code id="summary.catpredi.survival_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &quot;summary.catpredi.survival&quot; with the same components as the catpredi.survival
function (see <code><a href="#topic+catpredi.survival">catpredi.survival</a></code>). </p>


<h3>Author(s)</h3>

<p>Irantzu Barrio and Maria Xose Rodriguez-Alvarez
</p>


<h3>References</h3>

<p>I Barrio,  M.X Rodriguez-Alvarez, L Meira-Machado, C Esteban  and  I Arostegui (2017). Comparison of two discrimination indexes in the categorisation of continuous predictors in time-to-event studies. <em>SORT</em>, 41:73-92
</p>


<h3>See Also</h3>

<p>See Also as <code><a href="#topic+catpredi.survival">catpredi.survival</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(CatPredi)
library(survival)
set.seed(123)
#Simulate data
  n = 500
  tauc = 1
  X &lt;- rnorm(n=n, mean=0, sd=2)
  SurvT &lt;- exp(2*X + rweibull(n = n, shape=1, scale = 1))   + rnorm(n, mean=0, sd=0.25)
  # Censoring time
  CensTime &lt;- runif(n=n, min=0, max=tauc)
  # Status
  SurvS &lt;- as.numeric(SurvT &lt;= CensTime)
  # Data frame
  dat &lt;- data.frame(X = X, SurvT = pmin(SurvT, CensTime), SurvS = SurvS)
  
  # Select optimal cut points using the AddFor algorithm
  res &lt;- catpredi.survival (formula= Surv(SurvT,SurvS)~1, cat.var="X", cat.points = 2,
   data = dat, method = "addfor", conc.index = "cindex", range = NULL,
    correct.index = FALSE) 
  # Summary
  summary(res)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
