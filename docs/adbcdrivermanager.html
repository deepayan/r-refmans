<!DOCTYPE html><html><head><title>Help for package adbcdrivermanager</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {adbcdrivermanager}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adbc_connection_get_info'><p>Connection methods</p></a></li>
<li><a href='#adbc_connection_init'><p>Connections</p></a></li>
<li><a href='#adbc_connection_join'><p>Join the lifecycle of a unique parent to its child</p></a></li>
<li><a href='#adbc_database_init'><p>Databases</p></a></li>
<li><a href='#adbc_driver_log'><p>Log calls to another driver</p></a></li>
<li><a href='#adbc_driver_monkey'><p>Monkey see, monkey do!</p></a></li>
<li><a href='#adbc_driver_void'><p>Create ADBC drivers</p></a></li>
<li><a href='#adbc_error_from_array_stream'><p>Get extended error information from an array stream</p></a></li>
<li><a href='#adbc_statement_init'><p>Statements</p></a></li>
<li><a href='#adbc_statement_set_sql_query'><p>Statement methods</p></a></li>
<li><a href='#adbc_xptr_move'><p>Low-level pointer details</p></a></li>
<li><a href='#adbcdrivermanager-package'><p>adbcdrivermanager: 'Arrow' Database Connectivity ('ADBC') Driver Manager</p></a></li>
<li><a href='#read_adbc'><p>Read, write, and execute on ADBC connections</p></a></li>
<li><a href='#with_adbc'><p>Cleanup helpers</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>'Arrow' Database Connectivity ('ADBC') Driver Manager</td>
</tr>
<tr>
<td>Version:</td>
<td>0.10.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a developer-facing interface to 'Arrow' Database
  Connectivity ('ADBC') for the purposes of driver development, driver
  testing, and building high-level database interfaces for users. 'ADBC'
  <a href="https://arrow.apache.org/adbc/">https://arrow.apache.org/adbc/</a> is an API standard for database access
  libraries that uses 'Arrow' for result sets and query parameters.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), withr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/build/bootstrap:</td>
<td>TRUE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/apache/arrow-adbc">https://github.com/apache/arrow-adbc</a>,
<a href="https://arrow.apache.org/adbc/current/r/adbcdrivermanager/">https://arrow.apache.org/adbc/current/r/adbcdrivermanager/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/apache/arrow-adbc/issues">https://github.com/apache/arrow-adbc/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>nanoarrow (&ge; 0.3.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-23 01:02:59 UTC; deweydunnington</td>
</tr>
<tr>
<td>Author:</td>
<td>Dewey Dunnington <a href="https://orcid.org/0000-0002-9415-4582"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Apache Arrow [aut, cph],
  Apache Software Foundation [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dewey Dunnington &lt;dewey@dunnington.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-23 03:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adbc_connection_get_info'>Connection methods</h2><span id='topic+adbc_connection_get_info'></span><span id='topic+adbc_connection_get_objects'></span><span id='topic+adbc_connection_get_table_schema'></span><span id='topic+adbc_connection_get_table_types'></span><span id='topic+adbc_connection_read_partition'></span><span id='topic+adbc_connection_commit'></span><span id='topic+adbc_connection_rollback'></span><span id='topic+adbc_connection_cancel'></span><span id='topic+adbc_connection_get_statistic_names'></span><span id='topic+adbc_connection_get_statistics'></span><span id='topic+adbc_connection_quote_identifier'></span><span id='topic+adbc_connection_quote_string'></span>

<h3>Description</h3>

<p>Connection methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_connection_get_info(connection, info_codes = NULL)

adbc_connection_get_objects(
  connection,
  depth = 0L,
  catalog = NULL,
  db_schema = NULL,
  table_name = NULL,
  table_type = NULL,
  column_name = NULL
)

adbc_connection_get_table_schema(connection, catalog, db_schema, table_name)

adbc_connection_get_table_types(connection)

adbc_connection_read_partition(connection, serialized_partition)

adbc_connection_commit(connection)

adbc_connection_rollback(connection)

adbc_connection_cancel(connection)

adbc_connection_get_statistic_names(connection)

adbc_connection_get_statistics(
  connection,
  catalog,
  db_schema,
  table_name,
  approximate = FALSE
)

adbc_connection_quote_identifier(connection, value, ...)

adbc_connection_quote_string(connection, value, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_connection_get_info_+3A_connection">connection</code></td>
<td>
<p>An <a href="#topic+adbc_connection_init">adbc_connection</a></p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_info_codes">info_codes</code></td>
<td>
<p>A list of metadata codes to fetch, or NULL to fetch all.
Valid values are documented in the adbc.h header.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_depth">depth</code></td>
<td>
<p>The level of nesting to display. If 0, display all levels. If 1,
display only catalogs (i.e., catalog_schemas will be null). If 2, display
only catalogs and schemas (i.e., db_schema_tables will be null). If 3,
display only catalogs, schemas, and tables.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_catalog">catalog</code></td>
<td>
<p>Only show tables in the given catalog. If NULL, do not filter
by catalog. If an empty string, only show tables without a catalog. May be
a search pattern.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_db_schema">db_schema</code></td>
<td>
<p>Only show tables in the given database schema. If NULL, do
not filter by database schema. If an empty string, only show tables without
a database schema. May be a search pattern.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_table_name">table_name</code></td>
<td>
<p>Constrain an object or statistics query for a specific table.
If NULL, do not filter by name. May be a search pattern.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_table_type">table_type</code></td>
<td>
<p>Only show tables matching one of the given table types. If
NULL, show tables of any type. Valid table types can be fetched from
GetTableTypes. Terminate the list with a NULL entry.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_column_name">column_name</code></td>
<td>
<p>Only show columns with the given name. If NULL, do not
filter by name. May be a search pattern.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_serialized_partition">serialized_partition</code></td>
<td>
<p>The partition descriptor.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_approximate">approximate</code></td>
<td>
<p>If <code>FALSE</code>, request exact values of statistics,
else allow for best-effort, approximate, or cached values. The database
may return approximate values regardless, as indicated in the result.
Requesting exact values may be expensive or unsupported.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_value">value</code></td>
<td>
<p>A string or identifier.</p>
</td></tr>
<tr><td><code id="adbc_connection_get_info_+3A_...">...</code></td>
<td>
<p>Driver-specific options. For the default method, these are
named values that are converted to strings.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>adbc_connection_get_info()</code>, <code>adbc_connection_get_objects()</code>,
<code>adbc_connection_get_table_types()</code>, and <code>adbc_connection_read_partition()</code>
return a <a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow_array_stream</a>.
</p>
</li>
<li> <p><code>adbc_connection_get_table_schema()</code> returns a
<a href="nanoarrow.html#topic+as_nanoarrow_schema">nanoarrow_schena</a>
</p>
</li>
<li> <p><code>adbc_connection_commit()</code> and <code>adbc_connection_rollback()</code> return
<code>connection</code>, invisibly.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_void())
con &lt;- adbc_connection_init(db)
# (not implemented by the void driver)
try(adbc_connection_get_info(con, 0))

</code></pre>

<hr>
<h2 id='adbc_connection_init'>Connections</h2><span id='topic+adbc_connection_init'></span><span id='topic+adbc_connection_init_default'></span><span id='topic+adbc_connection_release'></span><span id='topic+adbc_connection_set_options'></span><span id='topic+adbc_connection_get_option'></span><span id='topic+adbc_connection_get_option_bytes'></span><span id='topic+adbc_connection_get_option_int'></span><span id='topic+adbc_connection_get_option_double'></span>

<h3>Description</h3>

<p>Connections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_connection_init(database, ...)

adbc_connection_init_default(database, options = NULL, subclass = character())

adbc_connection_release(connection)

adbc_connection_set_options(connection, options)

adbc_connection_get_option(connection, option)

adbc_connection_get_option_bytes(connection, option)

adbc_connection_get_option_int(connection, option)

adbc_connection_get_option_double(connection, option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_connection_init_+3A_database">database</code></td>
<td>
<p>An <a href="#topic+adbc_database_init">adbc_database</a>.</p>
</td></tr>
<tr><td><code id="adbc_connection_init_+3A_...">...</code></td>
<td>
<p>Driver-specific options. For the default method, these are
named values that are converted to strings.</p>
</td></tr>
<tr><td><code id="adbc_connection_init_+3A_options">options</code></td>
<td>
<p>A named <code>character()</code> or <code>list()</code> whose values are converted
to strings.</p>
</td></tr>
<tr><td><code id="adbc_connection_init_+3A_subclass">subclass</code></td>
<td>
<p>An extended class for an object so that drivers can specify
finer-grained control over behaviour at the R level.</p>
</td></tr>
<tr><td><code id="adbc_connection_init_+3A_connection">connection</code></td>
<td>
<p>An <a href="#topic+adbc_connection_init">adbc_connection</a></p>
</td></tr>
<tr><td><code id="adbc_connection_init_+3A_option">option</code></td>
<td>
<p>A specific option name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class 'adbc_connection'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_void())
adbc_connection_init(db)

</code></pre>

<hr>
<h2 id='adbc_connection_join'>Join the lifecycle of a unique parent to its child</h2><span id='topic+adbc_connection_join'></span><span id='topic+adbc_statement_join'></span>

<h3>Description</h3>

<p>It is occasionally useful to return a connection, statement, or stream
from a function that was created from a unique parent. These helpers
tie the lifecycle of a unique parent object to its child such that the
parent object is released predictably and immediately after the child.
These functions will invalidate all references to the previous R object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_connection_join(connection, database)

adbc_statement_join(statement, connection)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_connection_join_+3A_connection">connection</code></td>
<td>
<p>A connection created with <code><a href="#topic+adbc_connection_init">adbc_connection_init()</a></code></p>
</td></tr>
<tr><td><code id="adbc_connection_join_+3A_database">database</code></td>
<td>
<p>A database created with <code><a href="#topic+adbc_database_init">adbc_database_init()</a></code></p>
</td></tr>
<tr><td><code id="adbc_connection_join_+3A_statement">statement</code></td>
<td>
<p>A statement created with <code><a href="#topic+adbc_statement_init">adbc_statement_init()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use local_adbc to ensure prompt cleanup on error;
# use join functions to return a single object that manages
# the lifecycle of all three.
stmt &lt;- local({
  db &lt;- local_adbc(adbc_database_init(adbc_driver_log()))

  con &lt;- local_adbc(adbc_connection_init(db))
  adbc_connection_join(con, db)

  stmt &lt;- local_adbc(adbc_statement_init(con))
  adbc_statement_join(stmt, con)

  adbc_xptr_move(stmt)
})

# Everything is released immediately when the last object is released
adbc_statement_release(stmt)

</code></pre>

<hr>
<h2 id='adbc_database_init'>Databases</h2><span id='topic+adbc_database_init'></span><span id='topic+adbc_database_init_default'></span><span id='topic+adbc_database_release'></span><span id='topic+adbc_database_set_options'></span><span id='topic+adbc_database_get_option'></span><span id='topic+adbc_database_get_option_bytes'></span><span id='topic+adbc_database_get_option_int'></span><span id='topic+adbc_database_get_option_double'></span>

<h3>Description</h3>

<p>Databases
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_database_init(driver, ...)

adbc_database_init_default(driver, options = NULL, subclass = character())

adbc_database_release(database)

adbc_database_set_options(database, options)

adbc_database_get_option(database, option)

adbc_database_get_option_bytes(database, option)

adbc_database_get_option_int(database, option)

adbc_database_get_option_double(database, option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_database_init_+3A_driver">driver</code></td>
<td>
<p>An <code><a href="#topic+adbc_driver">adbc_driver()</a></code>.</p>
</td></tr>
<tr><td><code id="adbc_database_init_+3A_...">...</code></td>
<td>
<p>Driver-specific options. For the default method, these are
named values that are converted to strings.</p>
</td></tr>
<tr><td><code id="adbc_database_init_+3A_options">options</code></td>
<td>
<p>A named <code>character()</code> or <code>list()</code> whose values are converted
to strings.</p>
</td></tr>
<tr><td><code id="adbc_database_init_+3A_subclass">subclass</code></td>
<td>
<p>An extended class for an object so that drivers can specify
finer-grained control over behaviour at the R level.</p>
</td></tr>
<tr><td><code id="adbc_database_init_+3A_database">database</code></td>
<td>
<p>An <a href="#topic+adbc_database_init">adbc_database</a>.</p>
</td></tr>
<tr><td><code id="adbc_database_init_+3A_option">option</code></td>
<td>
<p>A specific option name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class adbc_database
</p>


<h3>Examples</h3>

<pre><code class='language-R'>adbc_database_init(adbc_driver_void())

</code></pre>

<hr>
<h2 id='adbc_driver_log'>Log calls to another driver</h2><span id='topic+adbc_driver_log'></span>

<h3>Description</h3>

<p>Useful for debugging or ensuring that certain calls occur during
initialization and/or cleanup. The current logging output should not
be considered stable and may change in future releases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_driver_log()
</code></pre>


<h3>Value</h3>

<p>An object of class 'adbc_driver_log'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>drv &lt;- adbc_driver_log()
db &lt;- adbc_database_init(drv, key = "value")
con &lt;- adbc_connection_init(db, key = "value")
stmt &lt;- adbc_statement_init(con, key = "value")
try(adbc_statement_execute_query(stmt))
adbc_statement_release(stmt)
adbc_connection_release(con)
adbc_database_release(db)

</code></pre>

<hr>
<h2 id='adbc_driver_monkey'>Monkey see, monkey do!</h2><span id='topic+adbc_driver_monkey'></span>

<h3>Description</h3>

<p>A driver whose query results are set in advance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_driver_monkey()
</code></pre>


<h3>Value</h3>

<p>An object of class 'adbc_driver_monkey'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_monkey())
con &lt;- adbc_connection_init(db)
stmt &lt;- adbc_statement_init(con, mtcars)
stream &lt;- nanoarrow::nanoarrow_allocate_array_stream()
adbc_statement_execute_query(stmt, stream)
as.data.frame(stream$get_next())

</code></pre>

<hr>
<h2 id='adbc_driver_void'>Create ADBC drivers</h2><span id='topic+adbc_driver_void'></span><span id='topic+adbc_driver'></span>

<h3>Description</h3>

<p>Creates the R object representation of an ADBC driver, which consists of a
name and an initializer function with an optional subclass to control
finer-grained behaviour at the R level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_driver_void()

adbc_driver(x, entrypoint = NULL, ..., subclass = character())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_driver_void_+3A_x">x</code>, <code id="adbc_driver_void_+3A_entrypoint">entrypoint</code></td>
<td>
<p>An ADBC driver may be defined either as an init function
or as an identifier with an entrypoint name. A driver init func
must be an external pointer to a DL_FUNC with the type
<code>AdbcDriverInitFunc</code> specified in the adbc.h header.</p>
</td></tr>
<tr><td><code id="adbc_driver_void_+3A_...">...</code></td>
<td>
<p>Further key/value parameters to store with the (R-level) driver
object.</p>
</td></tr>
<tr><td><code id="adbc_driver_void_+3A_subclass">subclass</code></td>
<td>
<p>An optional subclass for finer-grained control of
behaviour at the R level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class 'adbc_driver'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>adbc_driver_void()

</code></pre>

<hr>
<h2 id='adbc_error_from_array_stream'>Get extended error information from an array stream</h2><span id='topic+adbc_error_from_array_stream'></span>

<h3>Description</h3>

<p>Get extended error information from an array stream
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_error_from_array_stream(stream)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_error_from_array_stream_+3A_stream">stream</code></td>
<td>
<p>A <a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow_array_stream</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code> if stream was not created by a driver that supports
extended error information or a list whose first element is the
status code and second element is the <code>adbc_error</code> object. The
<code>acbc_error</code> must not be accessed if <code>stream</code> is explicitly released.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_monkey())
con &lt;- adbc_connection_init(db)
stmt &lt;- adbc_statement_init(con, mtcars)
stream &lt;- nanoarrow::nanoarrow_allocate_array_stream()
adbc_statement_execute_query(stmt, stream)
adbc_error_from_array_stream(stream)

</code></pre>

<hr>
<h2 id='adbc_statement_init'>Statements</h2><span id='topic+adbc_statement_init'></span><span id='topic+adbc_statement_init_default'></span><span id='topic+adbc_statement_release'></span><span id='topic+adbc_statement_set_options'></span><span id='topic+adbc_statement_get_option'></span><span id='topic+adbc_statement_get_option_bytes'></span><span id='topic+adbc_statement_get_option_int'></span><span id='topic+adbc_statement_get_option_double'></span>

<h3>Description</h3>

<p>Statements
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_statement_init(connection, ...)

adbc_statement_init_default(connection, options = NULL, subclass = character())

adbc_statement_release(statement)

adbc_statement_set_options(statement, options)

adbc_statement_get_option(statement, option)

adbc_statement_get_option_bytes(statement, option)

adbc_statement_get_option_int(statement, option)

adbc_statement_get_option_double(statement, option)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_statement_init_+3A_connection">connection</code></td>
<td>
<p>An <a href="#topic+adbc_connection_init">adbc_connection</a></p>
</td></tr>
<tr><td><code id="adbc_statement_init_+3A_...">...</code></td>
<td>
<p>Driver-specific options. For the default method, these are
named values that are converted to strings.</p>
</td></tr>
<tr><td><code id="adbc_statement_init_+3A_options">options</code></td>
<td>
<p>A named <code>character()</code> or <code>list()</code> whose values are converted
to strings.</p>
</td></tr>
<tr><td><code id="adbc_statement_init_+3A_subclass">subclass</code></td>
<td>
<p>An extended class for an object so that drivers can specify
finer-grained control over behaviour at the R level.</p>
</td></tr>
<tr><td><code id="adbc_statement_init_+3A_statement">statement</code></td>
<td>
<p>An <a href="#topic+adbc_statement_init">adbc_statement</a></p>
</td></tr>
<tr><td><code id="adbc_statement_init_+3A_option">option</code></td>
<td>
<p>A specific option name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class 'adbc_statement'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_void())
con &lt;- adbc_connection_init(db)
adbc_statement_init(con)

</code></pre>

<hr>
<h2 id='adbc_statement_set_sql_query'>Statement methods</h2><span id='topic+adbc_statement_set_sql_query'></span><span id='topic+adbc_statement_set_substrait_plan'></span><span id='topic+adbc_statement_prepare'></span><span id='topic+adbc_statement_get_parameter_schema'></span><span id='topic+adbc_statement_bind'></span><span id='topic+adbc_statement_bind_stream'></span><span id='topic+adbc_statement_execute_query'></span><span id='topic+adbc_statement_execute_schema'></span><span id='topic+adbc_statement_cancel'></span>

<h3>Description</h3>

<p>Statement methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adbc_statement_set_sql_query(statement, query)

adbc_statement_set_substrait_plan(statement, plan)

adbc_statement_prepare(statement)

adbc_statement_get_parameter_schema(statement)

adbc_statement_bind(statement, values, schema = NULL)

adbc_statement_bind_stream(statement, stream, schema = NULL)

adbc_statement_execute_query(
  statement,
  stream = NULL,
  stream_join_parent = FALSE
)

adbc_statement_execute_schema(statement)

adbc_statement_cancel(statement)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_statement_set_sql_query_+3A_statement">statement</code></td>
<td>
<p>An <a href="#topic+adbc_statement_init">adbc_statement</a></p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_query">query</code></td>
<td>
<p>An SQL query as a string</p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_plan">plan</code></td>
<td>
<p>A raw vector representation of a serialized Substrait plan.</p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_values">values</code></td>
<td>
<p>A <a href="nanoarrow.html#topic+as_nanoarrow_array">nanoarrow_array</a> or object
that can be coerced to one.</p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_schema">schema</code></td>
<td>
<p>A <a href="nanoarrow.html#topic+as_nanoarrow_schema">nanoarrow_schema</a> or object
that can be coerced to one.</p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_stream">stream</code></td>
<td>
<p>A <a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow_array_stream</a>
or object that can be coerced to one.</p>
</td></tr>
<tr><td><code id="adbc_statement_set_sql_query_+3A_stream_join_parent">stream_join_parent</code></td>
<td>
<p>Use <code>TRUE</code> to invalidate <code>statement</code> and tie its
lifecycle to <code>stream</code>.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>adbc_statement_set_sql_query()</code>, <code>adbc_statement_set_substrait_plan()</code>,
<code>adbc_statement_prepare()</code>, <code>adbc_statement_bind()</code>,
<code>adbc_statement_bind_stream()</code>, and <code>adbc_statement_execute_query()</code>
return <code>statement</code>, invisibly.
</p>
</li>
<li> <p><code>adbc_statement_get_parameter_schema()</code> returns a
<a href="nanoarrow.html#topic+as_nanoarrow_schema">nanoarrow_schema</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_void())
con &lt;- adbc_connection_init(db)
stmt &lt;- adbc_statement_init(con)
# (not implemented by the void driver)
try(adbc_statement_set_sql_query(stmt, "some query"))

</code></pre>

<hr>
<h2 id='adbc_xptr_move'>Low-level pointer details</h2><span id='topic+adbc_xptr_move'></span><span id='topic+adbc_xptr_is_valid'></span>

<h3>Description</h3>


<ul>
<li> <p><code>adbc_xptr_move()</code> allocates a fresh R object and moves all values pointed
to by <code>x</code> into it. The original R object is invalidated by zeroing its
content. This is useful when returning from a function where
<a href="#topic+with_adbc">lifecycle helpers</a> were used to manage the original
object.
</p>
</li>
<li> <p><code>adbc_xptr_is_valid()</code> provides a means by which to test for an invalidated
pointer.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>adbc_xptr_move(x, check_child_count = TRUE)

adbc_xptr_is_valid(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="adbc_xptr_move_+3A_x">x</code></td>
<td>
<p>An 'adbc_database', 'adbc_connection', 'adbc_statement', or
'nanoarrow_array_stream'</p>
</td></tr>
<tr><td><code id="adbc_xptr_move_+3A_check_child_count">check_child_count</code></td>
<td>
<p>Ensures that <code>x</code> has a zero child count before
performing the move. This should almost always be <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>adbc_xptr_move()</code>: A freshly-allocated R object identical to <code>x</code>
</p>
</li>
<li> <p><code>adbc_xptr_is_valid()</code>: Returns FALSE if the ADBC object pointed to by <code>x</code>
has been invalidated.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>db &lt;- adbc_database_init(adbc_driver_void())
adbc_xptr_is_valid(db)
db_new &lt;- adbc_xptr_move(db)
adbc_xptr_is_valid(db)
adbc_xptr_is_valid(db_new)

</code></pre>

<hr>
<h2 id='adbcdrivermanager-package'>adbcdrivermanager: 'Arrow' Database Connectivity ('ADBC') Driver Manager</h2><span id='topic+adbcdrivermanager'></span><span id='topic+adbcdrivermanager-package'></span>

<h3>Description</h3>

<p>Provides a developer-facing interface to 'Arrow' Database Connectivity ('ADBC') for the purposes of driver development, driver testing, and building high-level database interfaces for users. 'ADBC' <a href="https://arrow.apache.org/adbc/">https://arrow.apache.org/adbc/</a> is an API standard for database access libraries that uses 'Arrow' for result sets and query parameters.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dewey Dunnington <a href="mailto:dewey@dunnington.ca">dewey@dunnington.ca</a> (<a href="https://orcid.org/0000-0002-9415-4582">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Apache Arrow <a href="mailto:dev@arrow.apache.org">dev@arrow.apache.org</a> [copyright holder]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Apache Software Foundation <a href="mailto:dev@arrow.apache.org">dev@arrow.apache.org</a> [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/apache/arrow-adbc">https://github.com/apache/arrow-adbc</a>
</p>
</li>
<li> <p><a href="https://arrow.apache.org/adbc/current/r/adbcdrivermanager/">https://arrow.apache.org/adbc/current/r/adbcdrivermanager/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/apache/arrow-adbc/issues">https://github.com/apache/arrow-adbc/issues</a>
</p>
</li></ul>


<hr>
<h2 id='read_adbc'>Read, write, and execute on ADBC connections</h2><span id='topic+read_adbc'></span><span id='topic+execute_adbc'></span><span id='topic+write_adbc'></span>

<h3>Description</h3>

<p>These are convenience methods useful for testing connections. Note that
S3 dispatch is always on <code>db_or_con</code> (i.e., drivers may provide their own
implementations).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_adbc(db_or_con, query, ..., bind = NULL)

execute_adbc(db_or_con, query, ..., bind = NULL)

write_adbc(
  tbl,
  db_or_con,
  target_table,
  ...,
  mode = c("default", "create", "append"),
  temporary = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_adbc_+3A_db_or_con">db_or_con</code></td>
<td>
<p>An adbc_database or adbc_connection. If a database, a
connection will be opened. For <code>read_adbc()</code>, this connection will
be closed when the resulting stream has been released.</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_query">query</code></td>
<td>
<p>An SQL query</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_...">...</code></td>
<td>
<p>Passed to S3 methods.</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_bind">bind</code></td>
<td>
<p>A data.frame, nanoarrow_array, or nanoarrow_array_stream of
bind parameters or NULL to skip the bind/prepare step.</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_tbl">tbl</code></td>
<td>
<p>A data.frame, <a href="nanoarrow.html#topic+as_nanoarrow_array">nanoarrow_array</a>,
or  <a href="nanoarrow.html#topic+as_nanoarrow_array_stream">nanoarrow_array_stream</a>.</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_target_table">target_table</code></td>
<td>
<p>A target table name to which <code>tbl</code> should be written.</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_mode">mode</code></td>
<td>
<p>One of &quot;create&quot;, &quot;append&quot;, or &quot;default&quot; (error if the schema
is not compatible or append otherwise).</p>
</td></tr>
<tr><td><code id="read_adbc_+3A_temporary">temporary</code></td>
<td>
<p>Use TRUE to create a table as a temporary table.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>read_adbc()</code>: A nanoarrow_array_stream
</p>
</li>
<li> <p><code>execute_adbc()</code>: <code>db_or_con</code>, invisibly.
</p>
</li>
<li> <p><code>write_adbc()</code>: <code>tbl</code>, invisibly.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># On a database, connections are opened and closed
db &lt;- adbc_database_init(adbc_driver_log())
try(read_adbc(db, "some sql"))
try(execute_adbc(db, "some sql"))
try(write_adbc(mtcars, db, "some_table"))

# Also works on a connection
con &lt;- adbc_connection_init(db)
try(read_adbc(con, "some sql"))
try(execute_adbc(con, "some sql"))
try(write_adbc(mtcars, con, "some_table"))

</code></pre>

<hr>
<h2 id='with_adbc'>Cleanup helpers</h2><span id='topic+with_adbc'></span><span id='topic+local_adbc'></span>

<h3>Description</h3>

<p>Managing the lifecycle of databases, connections, and statements can
be complex and error-prone. The R objects that wrap the underlying ADBC
pointers will perform cleanup in the correct order if you rely on garbage
collection (i.e., do nothing and let the objects go out of scope); however
it is good practice to explicitly clean up these objects. These helpers
are designed to make explicit and predictable cleanup easy to accomplish.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_adbc(x, code)

local_adbc(x, .local_envir = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="with_adbc_+3A_x">x</code></td>
<td>
<p>An ADBC database, ADBC connection, ADBC statement, or
nanoarrow_array_stream returned from calls to an ADBC function.</p>
</td></tr>
<tr><td><code id="with_adbc_+3A_code">code</code></td>
<td>
<p>Code to execute before cleaning up the input.</p>
</td></tr>
<tr><td><code id="with_adbc_+3A_.local_envir">.local_envir</code></td>
<td>
<p>The execution environment whose scope should be tied
to the input.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that you can use <code><a href="#topic+adbc_connection_join">adbc_connection_join()</a></code> and <code><a href="#topic+adbc_statement_join">adbc_statement_join()</a></code>
to tie the lifecycle of the parent object to that of the child object.
These functions mark any previous references to the parent object as
released so you can still use local and with helpers to manage the parent
object before it is joined. Use <code>stream_join_parent = TRUE</code> in
<code><a href="#topic+adbc_statement_execute_query">adbc_statement_execute_query()</a></code> to tie the lifecycle of a statement to
the output stream.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>with_adbc()</code> returns the result of <code>code</code>
</p>
</li>
<li> <p><code>local_adbc()</code> returns the input, invisibly.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Using with_adbc():
with_adbc(db &lt;- adbc_database_init(adbc_driver_void()), {
  with_adbc(con &lt;- adbc_connection_init(db), {
    with_adbc(stmt &lt;- adbc_statement_init(con), {
      # adbc_statement_set_sql_query(stmt, "SELECT * FROM foofy")
      # adbc_statement_execute_query(stmt)
      "some result"
    })
  })
})

# Using local_adbc_*() (works best within a function, test, or local())
local({
  db &lt;- local_adbc(adbc_database_init(adbc_driver_void()))
  con &lt;- local_adbc(adbc_connection_init(db))
  stmt &lt;- local_adbc(adbc_statement_init(con))
  # adbc_statement_set_sql_query(stmt, "SELECT * FROM foofy")
  # adbc_statement_execute_query(stmt)
  "some result"
})

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
