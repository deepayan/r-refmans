<!DOCTYPE html><html><head><title>Help for package mrf</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mrf}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mrf-package'><p>Multiresolution Forecasting</p></a></li>
<li><a href='#entsoe'><p>Entsoe DataFrame containing Time Series</p></a></li>
<li><a href='#mrf_elm_forecast'><p>Forecast with Extreme Learning Machines</p></a></li>
<li><a href='#mrf_forecast'><p>Multiresolution Forecast</p></a></li>
<li><a href='#mrf_model_selection'><p>Model selection for Multiresolution Forecasts</p></a></li>
<li><a href='#mrf_multi_step_forecast'><p>Multiresolution Forecast</p></a></li>
<li><a href='#mrf_neuralnet_one_step_forecast'><p>One Step Forecast with Neural Network</p></a></li>
<li><a href='#mrf_nnetar_forecast'><p>Forecast with nnetar</p></a></li>
<li><a href='#mrf_one_step_forecast'><p>mrf_one_step_forecast Step Forecast</p></a></li>
<li><a href='#mrf_regression_lsm_optimization'><p>Least Square Method for Regression</p></a></li>
<li><a href='#mrf_regression_one_step_forecast'><p>One Step Forecast with Regression</p></a></li>
<li><a href='#mrf_requirement'><p>Multiresolution Forecast Requirements</p></a></li>
<li><a href='#mrf_rolling_forecasting_origin'><p>Rolling forecasting origin for Multiresolution Forecasts</p></a></li>
<li><a href='#mrf_train'><p>Multiresolution Forecast</p></a></li>
<li><a href='#wavelet_decomposition'><p>Redundant Haar Wavelet Decomposition</p></a></li>
<li><a href='#wavelet_prediction_equation'><p>One Step Forecast with Regression</p></a></li>
<li><a href='#wavelet_training_equations'><p>Generic Training Scheme for wavelet framework</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Multiresolution Forecasting</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-02-23</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Quirin Stier &lt;research@quirin-stier.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Forecasting of univariate time series using feature extraction with variable prediction methods is provided. Feature extraction is done with a redundant Haar wavelet transform with filter h = (0.5, 0.5). The advantage of the approach compared to typical Fourier based methods is an dynamic adaptation to varying seasonalities. Currently implemented prediction methods based on the selected wavelets levels and scales are a regression and a multi-layer perceptron. Forecasts can be computed for horizon 1 or higher. Model selection is performed with an evolutionary optimization. Selection criteria are currently the AIC criterion, the Mean Absolute Error or the Mean Root Error. The data is split into three parts for model selection: Training, test, and evaluation dataset. The training data is for computing the weights of a parameter set. The test data is for choosing the best parameter set. The evaluation data is for assessing the forecast performance of the best parameter set on new data unknown to the model. This work is published in Stier, Q.; Gehlert, T.; Thrun, M.C. Multiresolution Forecasting for Industrial Applications. Processes 2021, 9, 1697. &lt;<a href="https://doi.org/10.3390%2Fpr9101697">doi:10.3390/pr9101697</a>&gt;.</td>
</tr>
<tr>
<td>Imports:</td>
<td>limSolve, DEoptim, stats, forecast, monmlp, nnfor</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.deepbionics.org">https://www.deepbionics.org</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Quirinms/MRFR/issues">https://github.com/Quirinms/MRFR/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-23 13:29:57 UTC; quirin</td>
</tr>
<tr>
<td>Author:</td>
<td>Quirin Stier [aut, cre, ctr],
  Michael Thrun <a href="https://orcid.org/0000-0001-9542-5543"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ths, cph, rev, fnd, ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-23 13:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mrf-package'>Multiresolution Forecasting</h2><span id='topic+mrf-package'></span>

<h3>Description</h3>

<p>Forecasting of univariate time series using feature extraction with variable prediction methods is provided. Feature extraction is done with a redundant Haar wavelet transform with filter h = (0.5, 0.5). The advantage of the approach compared to typical Fourier based methods is an dynamic adaptation to varying seasonalities. Currently implemented prediction methods based on the selected wavelets levels and scales are a regression and a multi-layer perceptron. Forecasts can be computed for horizon 1 or higher. Model selection is performed with an evolutionary optimization. Selection criteria are currently the AIC criterion, the Mean Absolute Error or the Mean Root Error. The data is split into three parts for model selection: Training, test, and evaluation dataset. The training data is for computing the weights of a parameter set. The test data is for choosing the best parameter set. The evaluation data is for assessing the forecast performance of the best parameter set on new data unknown to the model. This work is published in Stier, Q.; Gehlert, T.; Thrun, M.C. Multiresolution Forecasting for Industrial Applications. Processes 2021, 9, 1697. &lt;doi:10.3390/pr9101697&gt;.
The package consists of a multiresolution forecasting method using a
redundant Haar wavelet transform based on the manuscript [Stier et al., 2021]
which is currently in press.
One-step and multi-step forecasts are computable with this method.
Nested and non-nested cross validation is possible.
</p>


<h3>Details</h3>

<p>Forecasting of univariate time series using feature extraction with variable
prediction methods is provided. Feature extraction is done with a redundant Haar
wavelet transform with filter h = (0.5, 0.5). The advantage of the approach
compared to typical Fourier based methods is an dynamic adaptation to varying
seasonalities. Currently implemented prediction methods based on the selected
wavelets levels and scales are a regression and a multi-layer perceptron.
Forecasts can be computed for horizon 1 or higher. Model selection is performed
with an evolutionary optimization. Selection criterias are currently the AIC
criterion, the Mean Absolute Error or the Mean Root Error. The data is split
into three parts for model selection: Training, test, and evaluation dataset.
The training data is for computing the weights of a parameter set. The test data
is for choosing the best parameter set. The evaluation data is for assessing the
forecast performance of the best parameter set on new data unknown to the model.
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> mrf </td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1.4 </td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-09-20</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> CC BY-NC-SA 4.0</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.; Gehlert, T.; Thrun, M.C. Multiresolution
Forecasting for Industrial Applications. Processes 2021, 9, 1697.
https://doi.org/10.3390/pr9101697
</p>

<hr>
<h2 id='entsoe'>Entsoe DataFrame containing Time Series</h2><span id='topic+entsoe'></span>

<h3>Description</h3>

<p>Data from a European Network of Transmission System Operators for Electricity
Accessed: 2020-08-20, 2019.
Time series contains 3652 data points without missing values.
Data describes electrict load for time range between 2006 and 2015
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(entsoe)
</code></pre>


<h3>Format</h3>

<p>A DataFrame with 3652 rows and 2 columns
</p>


<h3>Source</h3>

<p><a href="https://www.entsoe.eu/data/power-stats/">Archive</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(entsoe)
data = entsoe$value
</code></pre>

<hr>
<h2 id='mrf_elm_forecast'>Forecast with Extreme Learning Machines</h2><span id='topic+mrf_elm_forecast'></span>

<h3>Description</h3>

<p>This function creates a one step forecast using a multi layer perceptron
with one hidden Layer. The number of input is the sum of all coefficients
chosen with the parameter CoefficientCombination. The CoefficientCombination
parameter controls the number of coefficients chosen for each wavelet and smooth
part level individually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_elm_forecast(UnivariateData, Horizon, Aggregation, Threshold="hard",
Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_elm_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_elm_forecast_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
<tr><td><code id="mrf_elm_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_elm_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_elm_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecast</code></td>
<td>
<p>Numerical value with one step forecast</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(AirPassengers)
len_data = length(as.vector(array(AirPassengers)))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
Aggregation = c(2,4)
if(requireNamespace('nnfor', quietly = TRUE)){
forecast = mrf_elm_forecast(UnivariateData, Horizon=1, Aggregation)
true_value = array(AirPassengers)[len_data]
error = true_value - forecast
}

</code></pre>

<hr>
<h2 id='mrf_forecast'>Multiresolution Forecast</h2><span id='topic+mrf_forecast'></span>

<h3>Description</h3>

<p>Creates a multiresolution forecast for a given multiresolution model based on [Stier et al., 2021] which is currently in press.
(mrf_train).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_forecast(Model, Horizon=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_forecast_+3A_model">Model</code></td>
<td>
<p>List containing model specifications from mrf_train().</p>
</td></tr>
<tr><td><code id="mrf_forecast_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>Forecast</code></td>
<td>
<p>[1:Horizon] Numerical vector with forecast of horizon according
to its index.</p>
</td></tr>
<tr><td><code>Model</code></td>
<td>
<p>List containing model specifications from mrf_train().</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
Data = as.vector(AirPassengers)
len_data = length(Data)
Train = Data[1:(len_data-2)]
Test = Data[(len_data-1):len_data]
# One-step forecast (Multiresolution Forecast)
model = mrf_train(Train)
one_step = mrf_forecast(model, Horizon=1)
Error = one_step$Forecast - Test[1]
# Multi-step forecast (Multiresolution Forecast)
# Horizon = 2 =&gt; Forecast with Horizon 1 and 2 as vector
model = mrf_train(Train, Horizon=2)
multi_step = mrf_forecast(model, Horizon=2)
Error = multi_step$Forecast - Test
</code></pre>

<hr>
<h2 id='mrf_model_selection'>Model selection for Multiresolution Forecasts</h2><span id='topic+mrf_model_selection'></span>

<h3>Description</h3>

<p>Evaluates the best coefficient combination for a given aggregation scheme based
on a rolling forecasting origin  based on the manuscript [Stier et al., 2021]
which is currently in press.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_model_selection(UnivariateData, Aggregation, Horizon = 1, Window = 2,
Method = "r", crit = "AIC", itermax = 1, lower_limit = 1, upper_limit = 2,
NumClusters = 1, Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_model_selection_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_window">Window</code></td>
<td>
<p>Number indicating how many points are used for cross validation.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_method">Method</code></td>
<td>
<p>String indicating which method to use. Available methods: 'r'  =
Autoregression. 'nn' = Neural Network. 'elm' = Extreme Learning Machine.
'nnetar' = forecast::nnetar. Default: Method=&quot;r&quot;.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_crit">crit</code></td>
<td>
<p>String with criterion. Available criterions: &quot;AIC&quot; = Akaikes Info.
Crit. &quot;MAE&quot; = Mean Abs. Error. &quot;MRE&quot; = Mean Root Error. Default: crit = &quot;AIC&quot;.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_itermax">itermax</code></td>
<td>
<p>Number of iterations used in the differential evolutionary
optimization algorithm. Default: itermax = 1.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_lower_limit">lower_limit</code></td>
<td>
<p>[1:Scales+1] Numeric vector: Lower limit for coefficients
selected for each level.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_upper_limit">upper_limit</code></td>
<td>
<p>[1:Scales+1] Numeric vector: Higher limit for coefficients
selected for each level.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_numclusters">NumClusters</code></td>
<td>
<p>Number of clusters used for parallel computing. Default:
NumClusters = 1.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_model_selection_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The evaluation function (optimization function) is built with a rolling
forecasting origin (rolling_window function), which computes a h-step ahead
forecast (for h = 1, ..., horizon) for 'Window' many steps.
The input space is searched with an evolutionary optimization method.
The search is restricted to one fixed aggregation scheme (parameter:
'Aggregation').
The deployed forecast method can be an autoregression or a neural network
(multilayer perceptron with one hidden layer).
</p>


<h3>Value</h3>

<table>
<tr><td><code>CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme. Best combination of coefficients
found by the model selection algorithm.</p>
</td></tr>
<tr><td><code>Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series. Best Aggregation
scheme found by the model selection algorithm.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(entsoe)
UnivariateData = entsoe$value
Aggregation = c(2,4)
res = mrf_model_selection(UnivariateData, Aggregation, Horizon = 1, Window = 2,
Method = "r", crit = "AIC", itermax = 1, lower_limit = 1, upper_limit = 2,
NumClusters = 1)
BestCoefficientCombination = res$CoefficientCombination

</code></pre>

<hr>
<h2 id='mrf_multi_step_forecast'>Multiresolution Forecast</h2><span id='topic+mrf_multi_step_forecast'></span>

<h3>Description</h3>

<p>This function creates a multi step forecast for all horizons from 1 to steps
based on the manuscript [Stier et al., 2021] which is currently in press.
The deployed forecast method can be an autoregression or a neural network
(multilayer perceptron with one hidden layer). Multi step forecasts are computed
recursively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_multi_step_forecast(UnivariateData, Horizon, Aggregation,
CoefficientCombination=NULL, Method = "r", Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_multi_step_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_method">Method</code></td>
<td>
<p>String indicating which method to use. Available methods: 'r'  =
Autoregression. 'nn' = Neural Network. 'elm' = Extreme Learning Machine.
'nnetar' = forecast::nnetar. Default: Method=&quot;r&quot;.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_multi_step_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>multistep</code></td>
<td>
<p>[1:Horizon] Numerical vector with forecast of horizon according
to its index.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(array(AirPassengers))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
# One-step forecast (Multiresolution Forecast)
one_step = mrf_multi_step_forecast(UnivariateData = UnivariateData,
                                    Horizon = 2,
                                    CoefficientCombination = c(1,1,1),
                                    Aggregation = c(2,4),
                                    Method="r")
# Multi-step forecast (Multiresolution Forecast)
# Horizon = 2 =&gt; Forecast with Horizon 1 and 2 as vector
multi_step = mrf_multi_step_forecast(UnivariateData = UnivariateData,
                                      Horizon = 2,
                                      CoefficientCombination = c(1,1,1),
                                      Aggregation = c(2,4),
                                      Method="r")
</code></pre>

<hr>
<h2 id='mrf_neuralnet_one_step_forecast'>One Step Forecast with Neural Network</h2><span id='topic+mrf_neuralnet_one_step_forecast'></span>

<h3>Description</h3>

<p>This function creates a one step forecast using a multi layer perceptron
with one hidden Layer. The number of input is the sum of all coefficients
chosen with the parameter CoefficientCombination. The CoefficientCombination
parameter controls the number of coefficients chosen for each wavelet and smooth
part level individually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_neuralnet_one_step_forecast(UnivariateData, CoefficientCombination,
Aggregation, Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_neuralnet_one_step_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_neuralnet_one_step_forecast_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_neuralnet_one_step_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_neuralnet_one_step_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_neuralnet_one_step_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecast</code></td>
<td>
<p>Numerical value with one step forecast</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(as.vector(array(AirPassengers)))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
CoefficientCombination = c(1,1,1)
Aggregation = c(2,4)
if(requireNamespace('monmlp', quietly = TRUE)){
forecast = mrf_neuralnet_one_step_forecast(UnivariateData,
                                           CoefficientCombination,
                                           Aggregation)
true_value = array(AirPassengers)[len_data]
error = true_value - forecast
}
</code></pre>

<hr>
<h2 id='mrf_nnetar_forecast'>Forecast with nnetar</h2><span id='topic+mrf_nnetar_forecast'></span>

<h3>Description</h3>

<p>This function creates a one step forecast using a multi layer perceptron
with one hidden Layer. The number of input is the sum of all coefficients
chosen with the parameter CoefficientCombination. The CoefficientCombination
parameter controls the number of coefficients chosen for each wavelet and smooth
part level individually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_nnetar_forecast(UnivariateData, Horizon, Aggregation, Threshold="hard",
Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_nnetar_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_nnetar_forecast_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
<tr><td><code id="mrf_nnetar_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_nnetar_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_nnetar_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecast</code></td>
<td>
<p>Numerical value with one step forecast</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(as.vector(array(AirPassengers)))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
Aggregation = c(2,4)
if(requireNamespace('nnfor', quietly = TRUE)){
forecast = mrf_nnetar_forecast(UnivariateData, Horizon=1, Aggregation)
true_value = array(AirPassengers)[len_data]
error = true_value - forecast
}
</code></pre>

<hr>
<h2 id='mrf_one_step_forecast'>mrf_one_step_forecast Step Forecast</h2><span id='topic+mrf_one_step_forecast'></span>

<h3>Description</h3>

<p>This function creates a one step forecast using the multiresolution forecasting
framework based on the manuscript [Stier et al., 2021] which is currently in press.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_one_step_forecast(UnivariateData, Aggregation,
CoefficientCombination=NULL,
Method="r", Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_one_step_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_one_step_forecast_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_one_step_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_one_step_forecast_+3A_method">Method</code></td>
<td>
<p>String indicating which method to use. Available methods: 'r'  =
Autoregression. 'nn' = Neural Network. 'elm' = Extreme Learning Machine.
'nnetar' = forecast::nnetar. Default: Method=&quot;r&quot;.</p>
</td></tr>
<tr><td><code id="mrf_one_step_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_one_step_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecast</code></td>
<td>
<p>Numerical value with one step forecast</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(array(AirPassengers))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
forecast = mrf_one_step_forecast(UnivariateData=UnivariateData,
CoefficientCombination=c(1,1,1), Aggregation=c(2,4))
true_value = array(AirPassengers)[len_data]
error = true_value - forecast
</code></pre>

<hr>
<h2 id='mrf_regression_lsm_optimization'>Least Square Method for Regression</h2><span id='topic+mrf_regression_lsm_optimization'></span>

<h3>Description</h3>

<p>This function computes the weights for the autoregression depending
on the given wavelet decomposition.
It uses ordinary least square method for optimizing a linear equation system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_regression_lsm_optimization(points_in_future, lsmatrix)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_regression_lsm_optimization_+3A_points_in_future">points_in_future</code></td>
<td>
<p>n many values of the time series, for which there is an
equation from a prediction scheme.</p>
</td></tr>
<tr><td><code id="mrf_regression_lsm_optimization_+3A_lsmatrix">lsmatrix</code></td>
<td>
<p>Matrix carrying predictive equations associated with a specific
value of the time series.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>weights</code></td>
<td>
<p>Array of weights carrying the solution for a matrix problem,
which was solves with ordinary least squares.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(array(AirPassengers))
CoefficientCombination = c(1,1,1)
Aggregation = c(2,4)
UnivariateData = as.vector(AirPassengers)
# Decomposition
dec_res &lt;- wavelet_decomposition(UnivariateData, Aggregation)
# Training
trs_res &lt;- wavelet_training_equations(UnivariateData,
                                      dec_res$WaveletCoefficients,
                                      dec_res$SmoothCoefficients,
                                      dec_res$Scales,
                                      CoefficientCombination, Aggregation)
arr_future_points = trs_res$points_in_future
matrix = trs_res$lsmatrix
# Optimization method
weights = mrf_regression_lsm_optimization(arr_future_points, matrix)
# Forecast
scheme = wavelet_prediction_equation(dec_res$WaveletCoefficients,
dec_res$SmoothCoefficients, CoefficientCombination, Aggregation)
forecast = weights 
</code></pre>

<hr>
<h2 id='mrf_regression_one_step_forecast'>One Step Forecast with Regression</h2><span id='topic+mrf_regression_one_step_forecast'></span>

<h3>Description</h3>

<p>This function creates a one step forecast using an autoregression method.
The ccps parameter controls the number of coefficients chosen for each wavelet
and smooth part level individually.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_regression_one_step_forecast(UnivariateData, CoefficientCombination,
Aggregation, Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_regression_one_step_forecast_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_regression_one_step_forecast_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_regression_one_step_forecast_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_regression_one_step_forecast_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_regression_one_step_forecast_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>forecast</code></td>
<td>
<p>Numerical value with one step forecast</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(as.vector(array(AirPassengers)))
UnivariateData = as.vector(AirPassengers)[1:(len_data-1)]
CoefficientCombination = c(1,1,1)
Aggregation = c(2,4)
forecast = mrf_regression_one_step_forecast(UnivariateData,
                                            CoefficientCombination,
                                            Aggregation)
true_value = array(AirPassengers)[len_data]
error = true_value - forecast
</code></pre>

<hr>
<h2 id='mrf_requirement'>Multiresolution Forecast Requirements</h2><span id='topic+mrf_requirement'></span>

<h3>Description</h3>

<p>Computes requirements for given model using insights of various published papers
and the manuscript [Stier et al., 2021] which is currently in press.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_requirement(UnivariateData, CoefficientCombination, Aggregation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_requirement_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_requirement_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_requirement_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>MinLen</code></td>
<td>
<p>Integer minimum required length for model.</p>
</td></tr>
<tr><td><code>StartTraining</code></td>
<td>
<p>Integer indicating the index of time series at which the
training equations can be built up.</p>
</td></tr>
<tr><td><code>NumberWeights</code></td>
<td>
<p>Number of weights required for building model.</p>
</td></tr>
<tr><td><code>NumberEquations</code></td>
<td>
<p>Number of equations which can be built with given data.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>
<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(entsoe)
UnivariateData = entsoe$value
mrf_requirement(UnivariateData, c(2,3,4), c(2,4))
</code></pre>

<hr>
<h2 id='mrf_rolling_forecasting_origin'>Rolling forecasting origin for Multiresolution Forecasts</h2><span id='topic+mrf_rolling_forecasting_origin'></span>

<h3>Description</h3>

<p>This function computes a rolling forecasting origin for one- or multi-step
forecasts with a specific method based on the manuscript [Stier  et al., 2021]
which is currently in press. Multi-step forecasts are computed recursively
with the one step forecast method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_rolling_forecasting_origin(UnivariateData, Aggregation,
CoefficientCombination=NULL, Horizon = 2, Window = 3, Method = "r",
NumClusters = 1,
Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating horizon for forecast from 1 to horizon.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_window">Window</code></td>
<td>
<p>Number indicating how many points are used for cross validation.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_method">Method</code></td>
<td>
<p>String indicating which method to use. Available methods: 'r'  =
Autoregression. 'nn' = Neural Network. 'elm' = Extreme Learning Machine.
'nnetar' = forecast::nnetar. Default: Method=&quot;r&quot;.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_numclusters">NumClusters</code></td>
<td>
<p>Number of clusters used for parallel computing.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_rolling_forecasting_origin_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Thus, h-step forecast for h = 1,..., horizon for window_size many steps can be
computed.
The forecasting method can be an autoregression or a neural network (multilayer
perceptron).
The CoefficientCombination parameter controls the number of coefficients chosen for each wavelet
and smooth part level individually.
The NumClusters parameter determines the number of cluster used for parallel
computation. NumClusters = 1 performs a non parallel version.
NumClusters is constrained by the maximum number of clusters available minus one
to prevent the machine to be overchallenged.
</p>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>Error</code></td>
<td>
<p>[1:Window,1:Horizon] Numerical Matrix with 'Window' many row
entries indicating one time point with 'Horizon' many forecast errors.</p>
</td></tr>
<tr><td><code>Forecast</code></td>
<td>
<p>[1:Window,1:Horizon] Numerical Matrix with 'Window' many row
entries indicating one time point with 'Horizon' many forecasts.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
UnivariateData=as.vector(array(AirPassengers))
res = mrf_rolling_forecasting_origin(UnivariateData,
                                 CoefficientCombination = c(10,10,10),
                                 Aggregation = c(2,4),
                                 Horizon = 2, Window = 3, Method = "r",
                                 NumClusters = 1)
Error = res$Error
Forecast = res$Forecast
</code></pre>

<hr>
<h2 id='mrf_train'>Multiresolution Forecast</h2><span id='topic+mrf_train'></span>

<h3>Description</h3>

<p>Creates a multiresolution forecast model which can be used for forecasting with
method 'mrf_forecast' based on the manuscript [Stier et al., 2021] which is
currently in press.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrf_train(Data, Horizon=1, Aggregation="auto", Method = "r",
TimeSteps4ModelSelection=2, crit="AIC", InSample=FALSE, Threshold="hard",
Lambda=0.05, NumClusters=1, itermax=1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mrf_train_+3A_data">Data</code></td>
<td>
<p>[1:n] Numerical vector with n values from the training data.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_horizon">Horizon</code></td>
<td>
<p>Number indicating forecast horizon. Horizon = 1 means one-step
forecast and Horizon &gt; 1 means a one-step forecast and all multi-step forecasts
from horizon 2 to 'Horizon'. Default: Horizon = 1.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series. Default:
Aggregation = &quot;auto&quot;.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_method">Method</code></td>
<td>
<p>String indicating which method to use. Available methods: 'r'  =
Autoregression. 'nn' = Neural Network. 'elm' = Extreme Learning Machine.
'nnetar' = forecast::nnetar. Default: Method=&quot;r&quot;.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_timesteps4modelselection">TimeSteps4ModelSelection</code></td>
<td>
<p>Number of time steps of data (newest part) on
which a model selection is performed. Default: TimeSteps4ModelSelection = 2.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_crit">crit</code></td>
<td>
<p>String with criterion. Available criterions: &quot;AIC&quot; = Akaikes Info.
Crit. &quot;MAE&quot; = Mean Abs. Error. &quot;MRE&quot; = Mean Root Error. Default: crit = &quot;AIC&quot;.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_insample">InSample</code></td>
<td>
<p>Boolean, deciding if in-sample-forecast based on rolling
forecasting origin is computed or not. TRUE = Computation of in-sample-forecast.
FALSE = No computation. Default: InSample = FALSE</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_numclusters">NumClusters</code></td>
<td>
<p>Number of clusters used for parallel computing. Default:
NumClusters = 1.</p>
</td></tr>
<tr><td><code id="mrf_train_+3A_itermax">itermax</code></td>
<td>
<p>Number of iterations used in the differential evolutionary
optimization algorithm. Default: itermax = 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with
</p>
<table>
<tr><td><code>Data</code></td>
<td>
<p>[1:n] Numerical vector with n values from the training data.</p>
</td></tr>
<tr><td><code>Method</code></td>
<td>
<p>String indicating which method to use.</p>
</td></tr>
<tr><td><code>Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code>CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code>Horizon</code></td>
<td>
<p>Number indicating forecast horizon. Horizon = 1 means one-step
forecast and Horizon &gt; 1 means a one-step forecast and all multi-step forecasts
from horizon 2 to 'Horizon'.</p>
</td></tr>
<tr><td><code>ModelError</code></td>
<td>
<p>[1:TimeSteps4ModelSelection, 1:Horizon] Numerical matrix with
one-/multi-steps in columns and the time steps rowwise. The error is according
to the scheme of a rolling forecasting origin. The length depends on the minimum
required length for constructing the wavelet model and the length of data. The
newer part of the data is used for the model fit truncating the oldest data
according to the minimum required length for constructing the model.</p>
</td></tr>
<tr><td><code>ModelMAE</code></td>
<td>
<p>Integer: Mean Absolute Error (MAE) computed for the
in-sample-forecast resulting from a rolling forecasting origin.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>[Stier et al., 2021] Stier, Q.,Gehlert, T. and Thrun, M. C.: Multiresolution Forecasting for
Industrial Applications, Processess, 2021.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
Data = as.vector(AirPassengers)
len_data = length(Data)
Train = Data[1:(len_data-2)]
Test = Data[(len_data-1):len_data]
# One-step forecast (Multiresolution Forecast)
model = mrf_train(Train)
one_step = mrf_forecast(model, Horizon=1)
Error = one_step$Forecast - Test[1]
# Multi-step forecast (Multiresolution Forecast)
# Horizon = 2 =&gt; Forecast with Horizon 1 and 2 as vector
model = mrf_train(Train, Horizon=2)
multi_step = mrf_forecast(model, Horizon=2)
Error = multi_step$Forecast - Test
</code></pre>

<hr>
<h2 id='wavelet_decomposition'>Redundant Haar Wavelet Decomposition</h2><span id='topic+wavelet_decomposition'></span>

<h3>Description</h3>

<p>This function decomposes a time series in its wavelet and smooth coefficients
using the redundant Haar wavelet transform.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wavelet_decomposition(UnivariateData, Aggregation = c(2, 4, 8, 16, 32),
Threshold="hard", Lambda=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wavelet_decomposition_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n time series values</p>
</td></tr>
<tr><td><code id="wavelet_decomposition_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector of length 'Scales' carrying
numbers whose index is associated with the wavelet level. The numbers indicate
the number of values used for aggregation from the original time series.</p>
</td></tr>
<tr><td><code id="wavelet_decomposition_+3A_threshold">Threshold</code></td>
<td>
<p>Character indicating if Thresholding is done on the wavelet
decomposition or not. Default: Threshold=&quot;hard&quot;.
Possible entries:
Threshold=&quot;hard&quot; for hard thresholding.
Threshold=&quot;soft&quot; for soft thresholding.
Any other input indicates no thresholding.</p>
</td></tr>
<tr><td><code id="wavelet_decomposition_+3A_lambda">Lambda</code></td>
<td>
<p>Numeric value indicating the threshold for computing a hard or
soft threshold on the wavelet decomposition.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The resulting wavelet and smooth coefficients are stored in so called wavelet
and smooth part levels.
The smooth part level is created from the original times series by aggregation
(average). This makes the times series in some sense smoother, hence the naming.
Each individual smooth part level can be created from the original time series
by aggregating over different number of values. The different smooth part levels
are ordered, so that the number of values used for aggregation are ascending.
A dyadic scheme is recommended (increasing sequences of the power of two). The
dyadic scheme for 5 levels would require agg_per_lvl = c(2, 4, 8, 16, 32). So
the first smooth part level would be the average of two points of the original
time series, the second smooth part level would be the average of four points,
and so on.
This averaging is applied asymmetrical. That means, that the result of the
average of a sequence of points is obtained for the last point in time of that
sequence. So each smooth part level starts with a certain offset, since no
average can be obtained for the first particular points in time.
The wavelet levels are the differences between the original time series and
the smooth levels. The first wavelet level is the difference of the original
time series and the first smooth part level. The second wavelet level is the
difference of the first and second smooth part level and so on.
</p>


<h3>Value</h3>

<p>List of
</p>
<table>
<tr><td><code>UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n time series values.</p>
</td></tr>
<tr><td><code>WaveletCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many wavelet scales
row-wise with n columns corresponding to the time domain of a time series.</p>
</td></tr>
<tr><td><code>SmoothCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many smooth
approximation scales row-wise with n columns corresponding to the time domain of
a time series.</p>
</td></tr>
<tr><td><code>Scales</code></td>
<td>
<p>Number of wavelet levels.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
plot(AirPassengers, type = "l", col = "black")
UnivariateData = as.vector(array(AirPassengers))
dec_res = wavelet_decomposition(UnivariateData, Aggregation = c(2,4))
plot(dec_res$SmoothCoefficients[2,4:length(dec_res$SmoothCoefficients[2,])],
type = "l", col = "blue")
lines(array(AirPassengers)[4:length(dec_res$SmoothCoefficients[2,])],
col = "black")
</code></pre>

<hr>
<h2 id='wavelet_prediction_equation'>One Step Forecast with Regression</h2><span id='topic+wavelet_prediction_equation'></span>

<h3>Description</h3>

<p>This function delivers the required wavelet and smooth coefficients from the
decomposition based on a prediction scheme.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wavelet_prediction_equation(WaveletCoefficients, SmoothCoefficients,
CoefficientCombination, Aggregation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wavelet_prediction_equation_+3A_waveletcoefficients">WaveletCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many wavelet scales
row-wise with n columns corresponding to the time domain of a time series.</p>
</td></tr>
<tr><td><code id="wavelet_prediction_equation_+3A_smoothcoefficients">SmoothCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many smooth
approximation scales row-wise with n columns corresponding to the time domain of
a time series.</p>
</td></tr>
<tr><td><code id="wavelet_prediction_equation_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="wavelet_prediction_equation_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>future_point</code></td>
<td>
<p>Numerical value carrying one step forecast.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(array(AirPassengers))
CoefficientCombination = c(1,1,1)
Aggregation = c(2,4)
UnivariateData = as.vector(AirPassengers)
# Decomposition
dec_res &lt;- wavelet_decomposition(UnivariateData, Aggregation)
# Training
trs_res &lt;- wavelet_training_equations(UnivariateData,
                                      dec_res$WaveletCoefficients,
                                      dec_res$SmoothCoefficients,
                                      dec_res$Scales,
                                      CoefficientCombination, Aggregation)
arr_future_points = trs_res$points_in_future
matrix = trs_res$lsmatrix
# Optimization method
weights = mrf_regression_lsm_optimization(arr_future_points, matrix)
# Forecast
scheme = wavelet_prediction_equation(dec_res$WaveletCoefficients,
dec_res$SmoothCoefficients, CoefficientCombination, Aggregation)
forecast = weights 
</code></pre>

<hr>
<h2 id='wavelet_training_equations'>Generic Training Scheme for wavelet framework</h2><span id='topic+wavelet_training_equations'></span>

<h3>Description</h3>

<p>This function computes the input for the training phase required for
one step forecasts.
This computational step is required for all one step forecast procedures
contained in this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wavelet_training_equations(UnivariateData, WaveletCoefficients,
SmoothCoefficients, Scales, CoefficientCombination, Aggregation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wavelet_training_equations_+3A_univariatedata">UnivariateData</code></td>
<td>
<p>[1:n] Numerical vector with n values.</p>
</td></tr>
<tr><td><code id="wavelet_training_equations_+3A_waveletcoefficients">WaveletCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many wavelet scales
row-wise with n columns corresponding to the time domain of a time series.</p>
</td></tr>
<tr><td><code id="wavelet_training_equations_+3A_smoothcoefficients">SmoothCoefficients</code></td>
<td>
<p>[Scales, n] Matrix with 'Scales' many smooth
approximation scales row-wise with n columns corresponding to the time domain of
a time series.</p>
</td></tr>
<tr><td><code id="wavelet_training_equations_+3A_scales">Scales</code></td>
<td>
<p>Number of wavelet levels.</p>
</td></tr>
<tr><td><code id="wavelet_training_equations_+3A_coefficientcombination">CoefficientCombination</code></td>
<td>
<p>[1:Scales+1] Numerical vector with numbers which
are associated with wavelet levels. The last number is associated with the
smooth level. Each number determines the number of coefficient used per level.
The selection follows a specific scheme.</p>
</td></tr>
<tr><td><code id="wavelet_training_equations_+3A_aggregation">Aggregation</code></td>
<td>
<p>[1:Scales] Numerical vector carrying numbers whose index is
associated with the wavelet level. The numbers indicate the number of time in
points used for aggregation from the original time series.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>points_in_future</code></td>
<td>
<p>n many values of the time series, for which there is an
equation from a prediction scheme.</p>
</td></tr>
<tr><td><code>lsmatrix</code></td>
<td>
<p>Matrix carrying predictive equations associated with a specific
value of the time series.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quirin Stier
</p>


<h3>References</h3>

<p>Aussem, A., Campbell, J., and Murtagh, F. Waveletbased Feature Extraction
and Decomposition Strategies for Financial Forecasting. International Journal of
Computational Intelligence in Finance, 6,5-12, 1998.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Prediction based on a Multiscale De-
composition. International Journal of Wavelets, Multiresolution and Information
Processing, 1(2):217-232. doi:10.1142/S0219691303000153, 2003.
</p>
<p>Murtagh, F., Starck, J.-L., and Renaud, O. On Neuro-Wavelet Modeling. Decision
Support Systems, 37(4):475-484. doi:10.1016/S0167-9236(03)00092-7, 2004.
</p>
<p>Renaud, O., Starck, J.-L., and Murtagh, F. Wavelet-based combined Signal Filter-
ing and Prediction. IEEE Transactions on Systems, Man, and Cybernetics, Part
B (Cybernetics), 35(6):1241-1251. doi:10.1109/TSMCB.2005.850182, 2005.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(AirPassengers)
len_data = length(array(AirPassengers))
CoefficientCombination = c(1,1,1)
Aggregation = c(2,4)
UnivariateData = as.vector(AirPassengers)
# Decomposition
dec_res &lt;- wavelet_decomposition(UnivariateData, Aggregation)
# Training
trs_res &lt;- wavelet_training_equations(UnivariateData,
                                      dec_res$WaveletCoefficients,
                                      dec_res$SmoothCoefficients,
                                      dec_res$Scales,
                                      CoefficientCombination, Aggregation)
arr_future_points = trs_res$points_in_future
matrix = trs_res$lsmatrix
# Optimization method
weights = mrf_regression_lsm_optimization(arr_future_points, matrix)
# Forecast
scheme = wavelet_prediction_equation(dec_res$WaveletCoefficients,
dec_res$SmoothCoefficients, CoefficientCombination, Aggregation)
forecast = weights 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
