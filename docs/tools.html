<!DOCTYPE html><html lang="en"><head><title>Help for package tools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tools-package'><p>Tools for Package Development</p></a></li>
<li><a href='#.print.via.format'><p>Printing Utilities</p></a></li>
<li><a href='#add_datalist'>
<p>Add a &lsquo;<span class="file">datalist</span>&rsquo; File to a Source Package</p></a></li>
<li><a href='#assertCondition'><p>Asserting Error Conditions</p></a></li>
<li><a href='#basetools'><p>Base Package Tools</p></a></li>
<li><a href='#bibstyle'><p>Select or Define a Bibliography Style</p></a></li>
<li><a href='#buildVignette'><p>Build One Vignette</p></a></li>
<li><a href='#buildVignettes'><p>List and Build Package Vignettes</p></a></li>
<li><a href='#charsets'><p>Conversion Tables between Character Sets</p></a></li>
<li><a href='#check_packages_in_dir'><p>Check Source Packages and Their Reverse Dependencies</p></a></li>
<li><a href='#checkFF'><p>Check Foreign Function Calls</p></a></li>
<li><a href='#checkMD5sums'><p>Check and Create MD5 Checksum Files</p></a></li>
<li><a href='#checkPoFiles'><p>Check Translation Files for Inconsistent Format Strings</p></a></li>
<li><a href='#checkRd'><p> Check an Rd Object</p></a></li>
<li><a href='#checkRdaFiles'>
<p>Report on Details of Saved Images or Re-saves them</p></a></li>
<li><a href='#checkTnF'><p>Check R Packages or Code for T/F</p></a></li>
<li><a href='#checkVignettes'><p>Check Package Vignettes</p></a></li>
<li><a href='#codoc'><p>Check Code/Documentation Consistency</p></a></li>
<li><a href='#compactPDF'>
<p>Compact PDF Files</p></a></li>
<li><a href='#CRANtools'><p>CRAN Package Repository Tools</p></a></li>
<li><a href='#delimMatch'><p>Delimited Pattern Matching</p></a></li>
<li><a href='#dependsOnPkgs'><p>Find Reverse Dependencies</p></a></li>
<li><a href='#doitools'><p>Check Package <abbr>DOI</abbr>s</p></a></li>
<li><a href='#encoded_text_to_latex'><p>Translate non-ASCII Text to LaTeX Escapes</p></a></li>
<li><a href='#fileutils'><p>File Utilities</p></a></li>
<li><a href='#find_gs_cmd'>
<p>Find a GhostScript Executable</p></a></li>
<li><a href='#getVignetteInfo'><p>Get Information on Installed Vignettes</p></a></li>
<li><a href='#HTMLheader'><p>Generate a Standard HTML Header for R Help</p></a></li>
<li><a href='#HTMLlinks'><p>Collect HTML Links from Package Documentation</p></a></li>
<li><a href='#licensetools'><p>License Tools</p></a></li>
<li><a href='#loadRdMacros'><p>Load User-defined Rd Help System Macros</p></a></li>
<li><a href='#make_translations_pkg'><p>Package the Current Translations in the <span class="rlang"><b>R</b></span> Sources</p></a></li>
<li><a href='#makeLazyLoading'><p>Lazy Loading of Packages</p></a></li>
<li><a href='#makevars'><p>User and Site Compilation Variables</p></a></li>
<li><a href='#matchConcordance'>
<p>Concordance between source and target lines</p></a></li>
<li><a href='#md5sum'><p>Compute MD5 Checksums</p></a></li>
<li><a href='#package_dependencies'><p>Computations on the Dependency Hierarchy of Packages</p></a></li>
<li><a href='#package_native_routine_registration_skeleton'>
<p>Write Skeleton for Adding Native Routine Registration to a Package</p></a></li>
<li><a href='#parse_Rd'><p>Parse an Rd File</p></a></li>
<li><a href='#parseLatex'><p>Experimental Functions to Work with LaTeX Code</p></a></li>
<li><a href='#pkg2HTML'><p> Rd Converters</p></a></li>
<li><a href='#pskill'><p>Kill a Process</p></a></li>
<li><a href='#psnice'><p>Get or Set the Priority (Niceness) of a Process</p></a></li>
<li><a href='#QC'><p>QC Checks for R Code and/or Documentation</p></a></li>
<li><a href='#R'><p>Call Function in Inferior R Process</p></a></li>
<li><a href='#Rcmd'><p><code>R CMD</code> Interface</p></a></li>
<li><a href='#Rd2HTML'><p> Rd Converters</p></a></li>
<li><a href='#Rd2txt_options'><p>Set Formatting Options for Text Help</p></a></li>
<li><a href='#Rdiff'><p>Difference R Output Files</p></a></li>
<li><a href='#Rdindex'><p>Generate Index from Rd Files</p></a></li>
<li><a href='#RdTextFilter'><p>Select Text in an Rd File</p></a></li>
<li><a href='#Rdutils'><p>Rd Utilities</p></a></li>
<li><a href='#read.00Index'><p>Read 00Index-style Files</p></a></li>
<li><a href='#sha256sum'><p>Compute <abbr>SHA</abbr>-256 Checksums</p></a></li>
<li><a href='#showNonASCII'><p>Pick Out Non-ASCII Characters</p></a></li>
<li><a href='#startDynamicHelp'><p>Start the Dynamic HTML Help System</p></a></li>
<li><a href='#SweaveTeXFilter'><p>Strip R Code out of Sweave File</p></a></li>
<li><a href='#testInstalledPackage'><p>Test Installed Packages</p></a></li>
<li><a href='#texi2dvi'><p>Compile LaTeX Files</p></a></li>
<li><a href='#toHTML'><p>Display an Object in HTML</p></a></li>
<li><a href='#tools-defunct'><p>Defunct Objects in Package <span class="pkg">tools</span></p></a></li>
<li><a href='#tools-deprecated'><p>Deprecated Objects in Package <span class="pkg">tools</span></p></a></li>
<li><a href='#toRd'><p>Generic Function to Convert Object to a Fragment of Rd Code</p></a></li>
<li><a href='#toTitleCase'><p>Convert Titles to Title Case</p></a></li>
<li><a href='#undoc'><p>Find Undocumented Objects</p></a></li>
<li><a href='#update_PACKAGES'><p>Update Existing PACKAGES Files</p></a></li>
<li><a href='#update_pkg_po'>
<p>Prepare Translations for a Package</p></a></li>
<li><a href='#urltools'><p>Check Package URLs</p></a></li>
<li><a href='#userdir'><p>R User Directories</p></a></li>
<li><a href='#vignetteEngine'><p>Set or Get a Vignette Processing Engine</p></a></li>
<li><a href='#vignetteInfo'><p>Basic Information about a Vignette</p></a></li>
<li><a href='#write_PACKAGES'><p>Generate PACKAGES Files</p></a></li>
<li><a href='#xgettext'><p>Extract Translatable Messages from R Files in a Package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>4.6.0</td>
</tr>
<tr>
<td>Priority:</td>
<td>base</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools for Package Development</td>
</tr>
<tr>
<td>Author:</td>
<td>R Core Team</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>R Core Team &lt;do-use-Contact-address@r-project.org&gt;</td>
</tr>
<tr>
<td>Contact:</td>
<td>R-help mailing list &lt;r-help@r-project.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for package development, administration and documentation.</td>
</tr>
<tr>
<td>License:</td>
<td>Part of R 4.6.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>codetools, methods, xml2, curl, commonmark, knitr, xfun,
mathjaxr, V8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Built:</td>
<td>R 4.6.0; x86_64-apple-darwin22.2.0; 2025-03-20 15:26:16 UTC; unix</td>
</tr>
</table>
<hr>
<h2 id='tools-package'>Tools for Package Development</h2><span id='topic+tools-package'></span><span id='topic+tools'></span>

<h3>Description</h3>

<p>Tools for package development, administration and documentation.
</p>


<h3>Details</h3>

<p>This package contains tools for manipulating R packages and their
documentation.
</p>
<p>For a complete list of functions, use <code>library(help = "tools")</code>.
</p>


<h3>Author(s)</h3>

<p>Kurt Hornik and Friedrich Leisch
</p>
<p>Maintainer: R Core Team <a href="mailto:R-core@r-project.org">R-core@r-project.org</a>
</p>

<hr>
<h2 id='.print.via.format'>Printing Utilities</h2><span id='topic+.print.via.format'></span>

<h3>Description</h3>

<p><code>.print.via.format</code> is a &ldquo;prototype&rdquo; <code><a href="base.html#topic+print">print</a>()</code>
method, useful, at least as a start, by a simple
</p>
<pre>    print.&lt;myS3class&gt;  &lt;-  .print.via.format</pre>


<h3>Usage</h3>

<pre><code class='language-R'>.print.via.format(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".print.via.format_+3A_x">x</code></td>
<td>
<p>object to be printed.</p>
</td></tr>
<tr><td><code id=".print.via.format_+3A_...">...</code></td>
<td>
<p>optional further arguments, passed to <code><a href="base.html#topic+format">format</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, invisibly (by <code><a href="base.html#topic+invisible">invisible</a>()</code>), as
<code><a href="base.html#topic+print">print</a></code> methods should.
</p>


<h3>See Also</h3>

<p>The <code><a href="base.html#topic+print">print</a></code> generic; its default method
<code><a href="base.html#topic+print.default">print.default</a></code> (used for many basic implicit classes such
as <code>"numeric"</code>, <code>"character"</code> and <code><a href="base.html#topic+array">array</a></code>s of
them, <code><a href="base.html#topic+list">list</a></code>s etc).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## The function is simply defined as
 function (x, ...) {
    writeLines(format(x, ...))
    invisible(x)
 }

## is used for simple print methods in R, and as prototype for new methods.
</code></pre>

<hr>
<h2 id='add_datalist'>
Add a &lsquo;<span class="file">datalist</span>&rsquo; File to a Source Package
</h2><span id='topic+add_datalist'></span>

<h3>Description</h3>

<p>The <code><a href="utils.html#topic+data">data</a>()</code> command with no arguments lists all the
datasets available via <code>data</code> in attached packages, and to do so a
per-package list is installed.  Creating that list at install time can
be slow for packages with huge datasets, and can be expedited by a
supplying &lsquo;<span class="file">data/datalist</span>&rsquo; file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_datalist(pkgpath, force = FALSE, small.size = 1024^2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_datalist_+3A_pkgpath">pkgpath</code></td>
<td>
<p>The path to a (source) package.</p>
</td></tr>
<tr><td><code id="add_datalist_+3A_force">force</code></td>
<td>
<p>logical: can an existing &lsquo;<span class="file">data/datalist</span>&rsquo; file be
over-written?</p>
</td></tr>
<tr><td><code id="add_datalist_+3A_small.size">small.size</code></td>
<td>
<p>number: a &lsquo;<span class="file">data/datalist</span>&rsquo; file is created only if
the total size of the data files is larger than <code>small.size</code> bytes.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>R CMD build</code> will call this function to add a data list to
packages with 1MB or more of file in the &lsquo;<span class="file">data</span>&rsquo; directory.
</p>
<p>It can also be also helpful to give a &lsquo;<span class="file">data/datalist</span>&rsquo; file in
packages whose datasets have many dependencies, including loading the
packages itself (and maybe others).
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+data">data</a></code>.
</p>
<p>The &lsquo;Writing R Extensions&rsquo; manual.
</p>

<hr>
<h2 id='assertCondition'>Asserting Error Conditions</h2><span id='topic+assertCondition'></span><span id='topic+assertWarning'></span><span id='topic+assertError'></span>

<h3>Description</h3>

<p>When testing code, it is not sufficient to check that results are correct,
but also that errors or warnings are signalled in appropriate
situations.  The functions described here provide a convenient
facility for doing so.  The three functions check that evaluating the
supplied expression produces an error, a warning or one of a
specified list of conditions, respectively.  If the assertion fails,
an error is signalled.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assertError(expr, classes = "error", verbose = FALSE)
assertWarning(expr, classes = "warning", verbose = FALSE)
assertCondition(expr, ..., .exprString = , verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assertCondition_+3A_expr">expr</code></td>
<td>
<p>an unevaluated <span class="rlang"><b>R</b></span> expression which will be evaluated via
<code><a href="base.html#topic+tryCatch">tryCatch</a>(expr, ..)</code>.</p>
</td></tr>
<tr><td><code id="assertCondition_+3A_classes">classes</code>, <code id="assertCondition_+3A_...">...</code></td>
<td>
<p><code><a href="base.html#topic+character">character</a></code> strings corresponding to the
classes of the conditions that would satisfy the assertion; e.g., <code>"error"</code> or
<code>"warning"</code>.  If none are specified, any condition will
satisfy the assertion.  See the details section. </p>
</td></tr>
<tr><td><code id="assertCondition_+3A_.exprstring">.exprString</code></td>
<td>
<p>The string to be printed corresponding to
<code>expr</code>. By default, the actual <code>expr</code> will be
deparsed.  Will be omitted if the function is supplied with the
actual expression to be tested.  If <code>assertCondition()</code> is
called from another function, with the actual expression passed as
an argument to that function, supply the deparsed version.</p>
</td></tr>
<tr><td><code id="assertCondition_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, a message is printed when the
condition is satisfied.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>assertCondition()</code> uses the general condition mechanism to
check all the conditions generated in evaluating <code>expr</code>.  The
occurrence of any of the supplied condition classes among these satisfies the
assertion regardless of what other conditions may be signalled.
</p>
<p><code>assertError()</code> is a convenience function for asserting errors;
it calls <code>assertCondition()</code>.
</p>
<p><code>assertWarning()</code> asserts that a warning will be signalled, but
<em>not</em> an error, whereas <code>assertCondition(expr, "warning")</code>
will be satisfied even if an error follows the warning.  See the examples.
</p>


<h3>Value</h3>

<p>If the assertion is satisfied, a list of all the condition objects
signalled is returned, invisibly. See <code><a href="base.html#topic+conditionMessage">conditionMessage</a></code> for the
interpretation of these objects.  Note that <em>all</em> conditions
signalled during the evaluation are returned, whether or not they
were among the requirements.
</p>


<h3>Author(s)</h3>

<p>John Chambers and Martin Maechler</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+stop">stop</a></code>, <code><a href="base.html#topic+warning">warning</a></code>;
<code><a href="base.html#topic+signalCondition">signalCondition</a></code>, <code><a href="base.html#topic+tryCatch">tryCatch</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  assertError(sqrt("abc"))
  assertWarning(matrix(1:8, 4,3))

  assertCondition( ""-1 ) # ok, any condition would satisfy this

try( assertCondition(sqrt(2), "warning") )
## .. Failed to get warning in evaluating sqrt(2)
     assertCondition(sqrt("abc"), "error")   # ok
try( assertCondition(sqrt("abc"), "warning") )# -&gt; error: had no warning
     assertCondition(sqrt("abc"), "error")
  ## identical to assertError() call above

assertCondition(matrix(1:5, 2,3), "warning")
try( assertCondition(matrix(1:8, 4,3), "error") )
## .. Failed to get expected error ....

## either warning or worse:
assertCondition(matrix(1:8, 4,3), "error","warning") # OK
assertCondition(matrix(1:8, 4, 3), "warning") # OK

## when both are signalled:
ff &lt;- function() { warning("my warning"); stop("my error") }
    assertCondition(ff(), "warning")
## but assertWarning does not allow an error to follow
try(assertWarning(ff()))
    assertCondition(ff(), "error")          # ok
assertCondition(ff(), "error", "warning") # ok (quietly, catching warning)

## assert that assertC..() does not assert [and use *one* argument only]
assertCondition( assertCondition(sqrt( 2   ), "warning") )
assertCondition( assertCondition(sqrt("abc"), "warning"), "error")
assertCondition( assertCondition(matrix(1:8, 4,3), "error"),
                "error")
</code></pre>

<hr>
<h2 id='basetools'>Base Package Tools</h2><span id='topic+base_aliases_db'></span><span id='topic+base_rdxrefs_db'></span>

<h3>Description</h3>

<p>Tools for obtaining information about base packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>base_aliases_db(verbose = FALSE, Ncpus = getOption("Ncpus", 1L))
base_rdxrefs_db(verbose = FALSE, Ncpus = getOption("Ncpus", 1L))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="basetools_+3A_verbose">verbose</code></td>
<td>
<p>logical.  Should packages be listed as they are
processed?</p>
</td></tr>
<tr><td><code id="basetools_+3A_ncpus">Ncpus</code></td>
<td>
<p>the number of parallel processes to use for processing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>base_aliases_db()</code> returns the Rd aliases in the base
packages, as a nested per-package named list of per-Rd-file named
lists with the aliases.
</p>
<p><code>base_rdxrefs_db()</code> returns the Rd cross-references in the
base packages, as a per-package list of matrices with columns 
<code>"Target"</code>, <code>"Anchor"</code> and <code>"Source"</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+CRAN_aliases_db">CRAN_aliases_db</a>()</code> and <code><a href="#topic+CRAN_rdxrefs_db">CRAN_rdxrefs_db</a>()</code>
for getting the Rd aliases and cross-references in the current CRAN
packages.
</p>

<hr>
<h2 id='bibstyle'>Select or Define a Bibliography Style</h2><span id='topic+bibstyle'></span><span id='topic+getBibstyle'></span>

<h3>Description</h3>

<p>This function defines and registers styles for rendering
<code><a href="utils.html#topic+bibentry">bibentry</a></code> objects into &lsquo;<span class="file">Rd</span>&rsquo; format, for later
conversion to text, HTML, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bibstyle(style, envir, ..., .init = FALSE, .default = TRUE)
getBibstyle(all = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bibstyle_+3A_style">style</code></td>
<td>

<p>A character string naming the style.
</p>
</td></tr>
<tr><td><code id="bibstyle_+3A_envir">envir</code></td>
<td>

<p>(optional) An environment holding the functions to implement the style.
</p>
</td></tr>
<tr><td><code id="bibstyle_+3A_...">...</code></td>
<td>

<p>Named arguments to add to the environment.
</p>
</td></tr>
<tr><td><code id="bibstyle_+3A_.init">.init</code></td>
<td>

<p>Whether to initialize the environment from the default style <code>"JSS"</code>.
</p>
</td></tr>
<tr><td><code id="bibstyle_+3A_.default">.default</code></td>
<td>

<p>Whether to set the specified style as the default style.
</p>
</td></tr>
<tr><td><code id="bibstyle_+3A_all">all</code></td>
<td>

<p>Whether to return the names of all registered styles.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Rendering of <code><a href="utils.html#topic+bibentry">bibentry</a></code> objects may be done using routines
modelled after those used by BibTeX.  This function allows environments
to be created and manipulated to contain those routines.
</p>
<p>There are two ways to create a new style environment.  The easiest
is to set <code>.init = TRUE</code>, in which case the environment will be
initialized with a copy of the default <code>"JSS"</code> environment.  (This style
is modelled after the &lsquo;<span class="file">jss.bst</span>&rsquo; style used by the <em>Journal
of Statistical Software</em>.)  Alternatively, the <code>envir</code> argument
can be used to specify a completely new style environment.
</p>
<p>To find the name of the default style, use <code>getBibstyle()</code>. To
retrieve an existing style without setting it as the default, use
<code>bibstyle(style, .default = FALSE)</code>.  To modify an existing style,
specify <code>style</code> and some named entries via <code>...</code>.
(Modifying the default <code>"JSS"</code> style is discouraged.)  Setting
<code>style</code> to <code>NULL</code> or leaving it missing will retrieve the
default style, but modifications will not be allowed.
</p>
<p>At a minimum, the environment should contain routines to render each
of the 12 types of bibliographic entry supported by
<code><a href="utils.html#topic+bibentry">bibentry</a></code> as well as several other routines
described below.
The former must be named <code>formatArticle</code>,
<code>formatBook</code>, <code>formatInbook</code>, <code>formatIncollection</code>,
<code>formatInProceedings</code>, <code>formatManual</code>,
<code>formatMastersthesis</code>, <code>formatMisc</code>, <code>formatPhdthesis</code>,
<code>formatProceedings</code>, <code>formatTechreport</code> and
<code>formatUnpublished</code>.  Each of these takes one argument, a single
<code><a href="base.html#topic+unclass">unclass</a></code>'ed entry from the <code><a href="utils.html#topic+bibentry">bibentry</a></code> vector
passed to the renderer, and should produce a single element character
vector (possibly containing newlines).
</p>
<p>The other routines are as follows.  <code>sortKeys</code>, a function to
produce a sort key to sort the entries, is passed the original
<code><a href="utils.html#topic+bibentry">bibentry</a></code> vector and should produce a sortable vector of
the same length to define the sort order.  Finally,
the optional function <code>cite</code> should have the same argument list
as <code>utils::<a href="utils.html#topic+cite">cite</a></code>, and should produce a citation to be used
in text.
</p>
<p>The <code><a href="base.html#topic+format">format</a></code> method for <code>"bibentry"</code> objects adds a
field named <code>".index"</code> to each entry after sorting and before
formatting.  This is a 1-based index within the complete object that
can be used in styles that require numbering.  Although the
<code>"JSS"</code> style doesn't use numbers, it includes a
<code>fmtPrefix()</code> stub function that may be used to display them.
See the example below.
</p>


<h3>Value</h3>

<p><code>bibstyle</code> returns the environment which has been selected or created.
</p>
<p><code>getBibstyle</code> returns the name of the default style, or all
style names.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+bibentry">bibentry</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
refs &lt;-
c(bibentry(bibtype = "manual",
    title = "R: A Language and Environment for Statistical Computing",
    author = person("R Core Team"),
    organization = "R Foundation for Statistical Computing",
    address = "Vienna, Austria",
    year = 2013,
    url = "https://www.R-project.org"),
  bibentry(bibtype = "article",
    author = c(person(c("George", "E.", "P."), "Box"),
               person(c("David",  "R."),      "Cox")),
    year = 1964,
    title = "An Analysis of Transformations",
    journal = "Journal of the Royal Statistical Society, Series B",
    volume = 26, number = 2, pages = "211--243",
    doi = "10.1111/j.2517-6161.1964.tb00553.x"))

bibstyle("unsorted", sortKeys = function(refs) seq_along(refs),
    fmtPrefix = function(paper) paste0("[", paper$.index, "]"),
       .init = TRUE)
print(refs, .bibstyle = "unsorted")
</code></pre>

<hr>
<h2 id='buildVignette'>Build One Vignette</h2><span id='topic+buildVignette'></span>

<h3>Description</h3>

<p>Run <code><a href="utils.html#topic+Sweave">Sweave</a></code> (or other custom weave function),
<code><a href="#topic+texi2pdf">texi2pdf</a></code>, and/or <code><a href="utils.html#topic+Stangle">Stangle</a></code> 
(or other custom tangle function) on one vignette.
</p>
<p>This is the workhorse of <code>R CMD Sweave</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>buildVignette(file, dir = ".", weave = TRUE, latex = TRUE, tangle = TRUE, 
              quiet = TRUE, clean = TRUE, keep = character(),
              engine = NULL, buildPkg = NULL, encoding, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="buildVignette_+3A_file">file</code></td>
<td>
<p>character; the vignette source file.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_dir">dir</code></td>
<td>
<p>character; the working directory in which the intermediate and 
output files will be produced.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_weave">weave</code></td>
<td>
<p>logical; should weave be run?</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_latex">latex</code></td>
<td>
<p>logical; should <a href="#topic+texi2pdf">texi2pdf</a> be run if weaving produces a &lsquo;<span class="file">.tex</span>&rsquo; file?</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_tangle">tangle</code></td>
<td>
<p>logical; should tangle be run?</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_quiet">quiet</code></td>
<td>
<p>logical; run in quiet mode?</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_clean">clean</code></td>
<td>
<p>logical; whether to remove some newly created, often
intermediate, files.  See details below.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_keep">keep</code></td>
<td>
<p>a list of file names to keep in any case when cleaning.  Note
that &ldquo;target&rdquo; files are kept anyway.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_engine">engine</code></td>
<td>
<p><code>NULL</code> or character; name of vignette engine to
use.  Overrides any &lsquo;<span class="samp">&#8288;\VignetteEngine{}&#8288;</span>&rsquo; markup in the vignette.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_buildpkg">buildPkg</code></td>
<td>
<p><code>NULL</code> or a character vector; optional packages
in which to find the vignette engine.</p>
</td></tr>
<tr><td><code id="buildVignette_+3A_encoding">encoding</code></td>
<td>
<p>the encoding to assume for the file.  If not
specified, it will be read if possible from the file's contents.
Note that if the vignette is part of a package,
<code><a href="#topic+buildVignettes">buildVignettes</a></code> reads the package's encoding from the
&lsquo;<span class="file">DESCRIPTION</span>&rsquo; file but this function does not.</p>
</td></tr> 
<tr><td><code id="buildVignette_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to weave and tangle.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function determines the vignette engine for the vignette (default
<code>utils::Sweave</code>), then weaves and/or tangles the vignette using
that engine.  Finally, if <code>clean</code> is <code>TRUE</code>, newly created
intermediate files (non &ldquo;targets&rdquo;, where these depend on the engine,
etc, and not any in <code>keep</code>) will be deleted.  If <code>clean</code> is
<code>NA</code>, and <code>weave</code> is true, newly created intermediate output
files (e.g., &lsquo;<span class="file">.tex</span>&rsquo;) will not be deleted even if a &lsquo;<span class="file">.pdf</span>&rsquo;
file has been produced from them.  
</p>
<p>If <code>buildPkg</code> is specified, those packages will be loaded before
the vignette is processed and will be used as the default packages in
the search for a vignette engine, but an explicitly specified package
in the vignette source (e.g., using
&lsquo;<span class="samp">&#8288;\VignetteEngine{utils::Sweave}&#8288;</span>&rsquo; to specify the <code>Sweave</code>
engine in the <span class="pkg">utils</span> package) will override it.  In contrast, if
the <code>engine</code> argument is given, it will override the vignette
source.
</p>


<h3>Value</h3>

<p>A character vector naming the files that have been produced.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson and Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+buildVignettes">buildVignettes</a></code> for building all vignettes in a package.
</p>

<hr>
<h2 id='buildVignettes'>List and Build Package Vignettes</h2><span id='topic+buildVignettes'></span><span id='topic+pkgVignettes'></span>

<h3>Description</h3>

<p>Run <code><a href="utils.html#topic+Sweave">Sweave</a></code> (or other custom weave function)
and <code><a href="#topic+texi2pdf">texi2pdf</a></code> on all vignettes
of a package, or list the vignettes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>buildVignettes(package, dir, lib.loc = NULL, quiet = TRUE,
               clean = TRUE, tangle = FALSE, skip = NULL,
               ser_elibs = NULL)

pkgVignettes(package, dir, subdirs = NULL, lib.loc = NULL,
	     output = FALSE, source = FALSE, check = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="buildVignettes_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.
If given, vignette source files are by default looked for in
subdirectory &lsquo;<span class="file">doc</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory. 
If given, vignette source files are by default looked for in
subdirectory &lsquo;<span class="file">vignettes</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_quiet">quiet</code></td>
<td>
<p>logical.
Weave and run <code><a href="#topic+texi2pdf">texi2pdf</a></code> in quiet mode.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_clean">clean</code></td>
<td>
<p>Remove all files generated by the build, even if there
were copies there before.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_tangle">tangle</code></td>
<td>
<p>logical.
Do tangling as well as weaving.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_skip">skip</code></td>
<td>
<p>a character vector of names of vignettes (without file
extension, matching the <code>names</code> returned from
<code>pkgVignettes</code>) which should be skipped, or <code>TRUE</code>
to skip those with unavailable &lsquo;<span class="samp">&#8288;\VignetteDepends&#8288;</span>&rsquo;
(from <code><a href="#topic+vignetteInfo">vignetteInfo</a></code>).</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_ser_elibs">ser_elibs</code></td>
<td>
<p>For use from <code>R CMD check</code>.</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_subdirs">subdirs</code></td>
<td>
<p>a character vector of subdirectories of <code>dir</code> in
which to look for vignettes.  The first which exists is used.
Defaults to <code>"doc"</code> if <code>package</code> is supplied, otherwise
<code>"vignettes"</code>.</p>
</td></tr> 
<tr><td><code id="buildVignettes_+3A_output">output</code></td>
<td>
<p>logical indicating if the output filenames for each
vignette should be returned (in component <code>outputs</code>).</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_source">source</code></td>
<td>
<p>logical indicating if the <em>tangled</em> output
filenames for each vignette should be returned (in component <code>sources</code>).</p>
</td></tr>
<tr><td><code id="buildVignettes_+3A_check">check</code></td>
<td>
<p>logical.  If <code>TRUE</code>, check whether all files that
have vignette-like filenames have an identifiable vignette engine.
This may be a false positive if a file is not a vignette but has a 
filename matching a pattern defined by one of the vignette engines.</p>
</td></tr> 
</table>


<h3>Details</h3>

<p><code>buildVignettes</code> is used by <code>R CMD build</code> and
<code>R CMD check</code> to (re-)build vignette outputs from their sources. 
</p>
<p>As from <span class="rlang"><b>R</b></span> 3.4.1, both of these functions ignore files that are listed in
the &lsquo;<span class="file">.Rbuildignore</span>&rsquo; file in <code>dir</code>.
</p>


<h3>Value</h3>

<p><code>buildVignettes</code> is called for its side effect of creating the
outputs of all vignettes, and if <code>tangle = TRUE</code>, 
extracting the <span class="rlang"><b>R</b></span> code.
</p>
<p><code>pkgVignettes</code> returns an object of class <code>"pkgVignettes"</code>
if a vignette directory is found, otherwise <code>NULL</code>.  
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gVigns &lt;- pkgVignettes("grid")
str(gVigns)
</code></pre>

<hr>
<h2 id='charsets'>Conversion Tables between Character Sets</h2><span id='topic+Adobe_glyphs'></span><span id='topic+charset_to_Unicode'></span>

<h3>Description</h3>

<p><code>charset_to_Unicode</code> is a matrix of Unicode code points with
columns for the common 8-bit encodings.
</p>
<p><code>Adobe_glyphs</code> is a data frame which gives Adobe glyph names for
Unicode code points.  It has two character columns, <code>"adobe"</code> and
<code>"unicode"</code> (a 4-digit hex representation).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>charset_to_Unicode

Adobe_glyphs
</code></pre>


<h3>Details</h3>

<p><code>charset_to_Unicode</code> is an integer matrix of class
<code>c("<a href="base.html#topic+noquote">noquote</a>", "<a href="base.html#topic+hexmode">hexmode</a>")</code> so prints in hexadecimal.
The mappings are those used by <code>libiconv</code>: there are differences
in the way quotes and minus/hyphen are mapped between sources (and the
postscript encoding files use a different mapping).
</p>
<p><code>Adobe_glyphs</code> includes all the Adobe glyph names which correspond
to single Unicode characters.  It is sorted by Unicode code point and
within a point alphabetically on the glyph (there can be more than one
name for a Unicode code point).  The data are in the file
&lsquo;<span class="file"><var><a href="base.html#topic+R_HOME">R_HOME</a></var>/share/encodings/Adobe_glyphlist</span>&rsquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## find Adobe names for ISOLatin2 chars.
latin2 &lt;- charset_to_Unicode[, "ISOLatin2"]
aUnicode &lt;- as.hexmode(paste0("0x", Adobe_glyphs$unicode))
keep &lt;- aUnicode %in% latin2
aUnicode &lt;- aUnicode[keep]
aAdobe &lt;- Adobe_glyphs[keep, 1]
## first match
aLatin2 &lt;- aAdobe[match(latin2, aUnicode)]
## all matches
bLatin2 &lt;- lapply(1:256, function(x) aAdobe[aUnicode == latin2[x]])
format(bLatin2, justify = "none")
</code></pre>

<hr>
<h2 id='check_packages_in_dir'>Check Source Packages and Their Reverse Dependencies</h2><span id='topic+check_packages_in_dir'></span><span id='topic+summarize_check_packages_in_dir_depends'></span><span id='topic+summarize_check_packages_in_dir_results'></span><span id='topic+summarize_check_packages_in_dir_timings'></span><span id='topic+check_packages_in_dir_changes'></span><span id='topic+check_packages_in_dir_details'></span>

<h3>Description</h3>

<p>Check source packages in a given directory, optionally with their
reverse dependencies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_packages_in_dir(dir,
                      pfiles = Sys.glob("*.tar.gz"),
                      check_args = character(),
                      check_args_db = list(),
                      reverse = NULL,
                      check_env = character(),
                      xvfb = FALSE,
                      Ncpus = getOption("Ncpus", 1L),
                      clean = TRUE,
                      install_args = list(),
                      parallel_args = list(),
                      ...)

summarize_check_packages_in_dir_results(dir, all = TRUE,
                                        full = FALSE, ...)
summarize_check_packages_in_dir_timings(dir, all = FALSE,
                                        full = FALSE)
summarize_check_packages_in_dir_depends(dir, all = FALSE,
                                        which = c("Depends",
                                                  "Imports",
                                                  "LinkingTo"))

check_packages_in_dir_changes(dir, old,
                              outputs = FALSE, sources = FALSE, ...)
check_packages_in_dir_details(dir, logs = NULL, drop_ok = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_packages_in_dir_+3A_dir">dir</code></td>
<td>
<p>a character string giving the path to the directory with
the source &lsquo;<span class="file">.tar.gz</span>&rsquo; files to be checked.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_pfiles">pfiles</code></td>
<td>
<p>(optional) character vector of tarball files to be
checked.  Useful for choosing a subset of the &lsquo;<span class="file">*.tar.gz</span>&rsquo; files in
<code>dir</code>.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_check_args">check_args</code></td>
<td>
<p>a character vector with arguments to be passed to
<code>R CMD check</code>, or a list of length two of such character
vectors to be used for checking packages and reverse dependencies,
respectively.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_check_args_db">check_args_db</code></td>
<td>
<p>a named list of character vectors with arguments
to be passed to <code>R CMD check</code>, with names the respective
package names.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_reverse">reverse</code></td>
<td>
<p>a list with names partially matching <code>"repos"</code>,
<code>"which"</code>, or <code>"recursive"</code>, giving the repositories to
use for locating reverse dependencies (a subset of
<code>getOption("repos")</code>, the default), the types of reverse dependencies
(default: <code>c("Depends", "Imports", "LinkingTo")</code>, with
shorthands <code>"most"</code> and <code>"all"</code> as for
<code><a href="#topic+package_dependencies">package_dependencies</a></code>), and indicating whether to also
check reverse dependencies of reverse dependencies and so on
(default: <code>FALSE</code>), or <code>NULL</code> (default), in which case no
reverse dependencies are checked.</p>
</td></tr> 
<tr><td><code id="check_packages_in_dir_+3A_check_env">check_env</code></td>
<td>
<p>a character vector of name=value strings to set
environment variables for checking, or a list of length two of such
character vectors to be used for checking packages and reverse
dependencies, respectively.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_xvfb">xvfb</code></td>
<td>
<p>a logical indicating whether to perform checking inside a
virtual framebuffer X server (Unix only), or a character vector of
<code>Xvfb</code> options for doing so.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_ncpus">Ncpus</code></td>
<td>
<p>the number of parallel processes to use for parallel
installation and checking.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_clean">clean</code></td>
<td>
<p>a logical indicating whether to remove the downloaded
reverse dependency sources.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_install_args">install_args</code></td>
<td>
<p>list of arguments to be passed to underlying 
<code><a href="utils.html#topic+install.packages">install.packages</a></code> call.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_parallel_args">parallel_args</code></td>
<td>
<p>list of arguments to be passed to underlying calls 
of <code><a href="parallel.html#topic+parLapply">parLapply</a></code> (on Windows) or 
<code><a href="parallel.html#topic+mclapply">mclapply</a></code> (on other OS).</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_...">...</code></td>
<td>
<p>passed to <code><a href="base.html#topic+readLines">readLines</a></code>, e.g. for reading log files 
produced in a different encoding; currently not used by 
<code>check_packages_in_dir</code>.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_all">all</code></td>
<td>
<p>a logical indicating whether to also summarize the reverse
dependencies checked.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_full">full</code></td>
<td>
<p>a logical indicating whether to also give details for
checks with non-ok results, or summarize check example timings (if
available).</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_which">which</code></td>
<td>
<p>see <code><a href="#topic+package_dependencies">package_dependencies</a></code>.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_old">old</code></td>
<td>
<p>a character string giving the path to the directory of a
previous <code>check_packages_in_dir</code> run.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_outputs">outputs</code></td>
<td>
<p>a logical indicating whether to analyze changes in
the outputs of the checks performed, or only (default) the status of
the checks.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_sources">sources</code></td>
<td>
<p>a logical indicating whether to also investigate the
changes in the source files checked (default: <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_logs">logs</code></td>
<td>
<p>a character vector with the paths of &lsquo;<span class="file">00check.log</span>&rsquo; to
analyze.  Only used if <code>dir</code> was not given.</p>
</td></tr>
<tr><td><code id="check_packages_in_dir_+3A_drop_ok">drop_ok</code></td>
<td>
<p>a logical indicating whether to drop checks with
&lsquo;ok&rsquo; status, or a character vector with the &lsquo;ok&rsquo;
status tags to drop.  The default corresponds to tags &lsquo;<span class="samp">&#8288;OK&#8288;</span>&rsquo;,
&lsquo;<span class="samp">&#8288;NONE&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;SKIPPED&#8288;</span>&rsquo;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>check_packages_in_dir</code> allows to conveniently check source
package &lsquo;<span class="file">.tar.gz</span>&rsquo; files in the given directory <code>dir</code>, along
with their reverse dependencies as controlled by <code>reverse</code>.
</p>
<p>The <code>"which"</code> component of <code>reverse</code> can also be a list, in
which case reverse dependencies are obtained for each element of the
list and the corresponding element of the <code>"recursive"</code> component
of <code>reverse</code> (which is recycled as needed).
</p>
<p>If needed, the source &lsquo;<span class="file">.tar.gz</span>&rsquo; files of the reverse dependencies
to be checked as well are downloaded into <code>dir</code> (and removed at
the end if <code>clean</code> is true).  Next, all packages (additionally)
needed for checking are installed to the &lsquo;<span class="file">Library</span>&rsquo; subdirectory
of <code>dir</code>.  Then, all &lsquo;<span class="file">.tar.gz</span>&rsquo; files are checked using the
given arguments and environment variables, with outputs and messages
to files in the &lsquo;<span class="file">Outputs</span>&rsquo; subdirectory of <code>dir</code>.  The
&lsquo;<span class="file">*.Rcheck</span>&rsquo; directories with the check results of the reverse
dependencies are renamed by prefixing their base names with
&lsquo;<span class="samp">&#8288;rdepends_&#8288;</span>&rsquo;.
</p>
<p>Results and timings can conveniently be summarized using
<code>summarize_check_packages_in_dir_results</code> and
<code>summarize_check_packages_in_dir_timings</code>, respectively.
</p>
<p>Installation and checking is performed in parallel if <code>Ncpus</code> is
greater than one: this will use <code><a href="parallel.html#topic+mclapply">mclapply</a></code> on
Unix and <code><a href="parallel.html#topic+parLapply">parLapply</a></code> on Windows.
</p>
<p><code>check_packages_in_dir</code> returns an object inheriting from class
<code>"check_packages_in_dir"</code> which has <code><a href="base.html#topic+print">print</a></code> and
<code><a href="base.html#topic+summary">summary</a></code> methods.
</p>
<p><code>check_packages_in_dir_changes</code> allows to analyze the effect of
changing (some of) the sources.  With <code>dir</code> and <code>old</code> the
paths to the directories with the new and old sources, respectively,
and the corresponding check results, possible changes in the check
results can conveniently be analyzed as controlled via options
<code>outputs</code> and <code>sources</code>.  The changes object returned can be
subscripted according to change in severity from the old to the new
results by using one of <code>"=="</code>, <code>"!="</code>, <code>"&lt;"</code>,
<code>"&lt;="</code>, <code>"&gt;"</code> or <code>"&gt;="</code> as row index.
</p>
<p><code>check_packages_in_dir_details</code> analyzes check log files to
obtain check details as a data frame which can be used for further
processing, providing check name, status and output for every check
performed and not dropped according to status tag (via variables
<code>Check</code>, <code>Status</code> and <code>Output</code>, respectively).
</p>
<p>Environment variable <span class="env">_R_CHECK_ELAPSED_TIMEOUT_</span> can be used to
set a limit on the elapsed time of each <code>check</code> run.  See the
&lsquo;R Internals&rsquo; manual for how the value is interpreted and for
other environment variables which can be used for finer-grained
control on timeouts within a <code>check</code> run.
</p>


<h3>Note</h3>

<p>This functionality is still experimental: interfaces may change in
future versions. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Check packages in dir without reverse dependencies:
check_packages_in_dir(dir)
## Check packages in dir and their reverse dependencies using the
## defaults (all repositories in getOption("repos"), all "strong"
## reverse dependencies, no recursive reverse dependencies):
check_packages_in_dir(dir, reverse = list())
## Check packages in dir with their reverse dependencies from CRAN,
## using all strong reverse dependencies and reverse suggests:
check_packages_in_dir(dir,
                      reverse = list(repos = getOption("repos")["CRAN"],
                                     which = "most"))                   
## Check packages in dir with their reverse dependencies from CRAN,
## using '--as-cran' for the former but not the latter:
check_packages_in_dir(dir,
                      check_args = c("--as-cran", ""),
                      reverse = list(repos = getOption("repos")["CRAN"]))

## End(Not run)
</code></pre>

<hr>
<h2 id='checkFF'>Check Foreign Function Calls</h2><span id='topic+checkFF'></span><span id='topic+print.checkFF'></span>

<h3>Description</h3>

<p>Performs checks on calls to compiled code from R code.  Currently only
checks whether the interface functions such as <code>.C</code> and
<code>.Fortran</code> are called with a <code>"<a href="base.html#topic+NativeSymbolInfo">NativeSymbolInfo</a>"</code>
first argument or with argument <code>PACKAGE</code> specified, which is
highly recommended to avoid name clashes in foreign function calls.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkFF(package, dir, file, lib.loc = NULL,
        registration = FALSE, check_DUP = FALSE,
        verbose = getOption("verbose"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkFF_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.  If
given, the installed R code of the package is checked.</p>
</td></tr>
<tr><td><code id="checkFF_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This should contain the subdirectory &lsquo;<span class="file">R</span>&rsquo;
(for R code).  Only used if <code>package</code> is not given.</p>
</td></tr>
<tr><td><code id="checkFF_+3A_file">file</code></td>
<td>
<p>the name of a file containing R code to be checked.  Used
if neither <code>package</code> nor <code>dir</code> are given.</p>
</td></tr>
<tr><td><code id="checkFF_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="checkFF_+3A_registration">registration</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, checks
the registration information on the call (if available).</p>
</td></tr>
<tr><td><code id="checkFF_+3A_check_dup">check_DUP</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, <code>.C</code> and
<code>.Fortran</code> calls with <code>DUP = FALSE</code> are reported.</p>
</td></tr>
<tr><td><code id="checkFF_+3A_verbose">verbose</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, additional diagnostics are
printed (and the result is returned invisibly).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that we can only check if the <code>name</code> argument is a symbol or
a character string, not what class of object the symbol resolves to
at run-time.
</p>
<p>If the package has a namespace which contains a <code>useDynLib</code>
directive, calls in top-level functions in the package are not
reported as their symbols will be preferentially looked up in the DLL
named in the first <code>useDynLib</code> directive.
</p>
<p>This checks that calls with <code>PACKAGE</code> specified are to the
same package, and reports separately those which are in base packages
and those which are in other packages (and if those packages are
specified in the &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file).
</p>


<h3>Value</h3>

<p>An object of class <code>"checkFF"</code>.
</p>
<p>There are <code><a href="base.html#topic+format">format</a></code> and <code>print</code> methods to display the
information contained in such objects.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+.C">.C</a></code>,
<code><a href="base.html#topic+.Fortran">.Fortran</a></code>;
<code><a href="base.html#topic+Foreign">Foreign</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # order is pretty much random
checkFF(package = "stats", verbose = TRUE)
</code></pre>

<hr>
<h2 id='checkMD5sums'>Check and Create MD5 Checksum Files</h2><span id='topic+checkMD5sums'></span>

<h3>Description</h3>

<p><code>checkMD5sums</code> checks the files against a file &lsquo;<span class="file">MD5</span>&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkMD5sums(package, dir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkMD5sums_+3A_package">package</code></td>
<td>
<p>the name of an installed package</p>
</td></tr>
<tr><td><code id="checkMD5sums_+3A_dir">dir</code></td>
<td>
<p>the path to the top-level directory of an installed
package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The file &lsquo;<span class="file">MD5</span>&rsquo; which is created is in a format which can be
checked by <code>md5sum -c MD5</code> if a suitable command-line version
of <code>md5sum</code> is available.  (For Windows, one is supplied in
the bundle at <a href="https://cran.r-project.org/bin/windows/Rtools/">https://cran.r-project.org/bin/windows/Rtools/</a>.)
</p>
<p>If <code>dir</code> is missing, an installed package of name <code>package</code>
is searched for.
</p>
<p>The private function <code>tools:::.installMD5sums</code> is used to create
<code>MD5</code> files in the Windows build.
</p>


<h3>Value</h3>

<p><code>checkMD5sums</code> returns a logical, <code>NA</code> if there is no
&lsquo;<span class="file">MD5</span>&rsquo; file to be checked.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+md5sum">md5sum</a></code></p>

<hr>
<h2 id='checkPoFiles'>Check Translation Files for Inconsistent Format Strings</h2><span id='topic+checkPoFile'></span><span id='topic+checkPoFiles'></span>

<h3>Description</h3>

<p>These functions compare formats embedded in English messages
with translated strings to check for consistency.  <code>checkPoFile</code>
checks one file, while <code>checkPoFiles</code> checks all files for specified
or all languages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkPoFile(f, strictPlural = FALSE)
checkPoFiles(language, dir = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkPoFiles_+3A_f">f</code></td>
<td>
<p>a character string giving a single filepath.</p>
</td></tr>
<tr><td><code id="checkPoFiles_+3A_strictplural">strictPlural</code></td>
<td>
<p>whether to compare formats of singular and plural
forms in a strict way.</p>
</td></tr>
<tr><td><code id="checkPoFiles_+3A_language">language</code></td>
<td>
<p>a character string giving a language code, or a
&lsquo;<a href="base.html#topic+regexp">regexp</a>&rsquo; (regular expression), to match languages in <code>dir</code>.
Use <code>""</code> to denote all languages in the <code>dir</code> path.</p>
</td></tr>
<tr><td><code id="checkPoFiles_+3A_dir">dir</code></td>
<td>
<p>a path to a directory in which to check files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Part of <span class="rlang"><b>R</b></span>'s internationalization depends on translations of messages
in &lsquo;<span class="file">.po</span>&rsquo; files.  In these files an &lsquo;English&rsquo; message taken
from the <span class="rlang"><b>R</b></span> sources is followed by a translation into another
language.  Many of these messages are format strings for C or <span class="rlang"><b>R</b></span>
<code><a href="base.html#topic+sprintf">sprintf</a></code> and related functions.  In these cases, the
translation must give a compatible format or an error will be
generated when the message is displayed.
</p>
<p>The rules for compatibility differ between C and <span class="rlang"><b>R</b></span> in several ways. C
supports several conversions not supported by <span class="rlang"><b>R</b></span>, namely <code>c</code>,
<code>u</code>, <code>p</code>, <code>n</code>.  It is allowed in C's <code>sprintf()</code>
function to have more arguments than are needed by the format string,
but in <span class="rlang"><b>R</b></span> the counts must match exactly.  <span class="rlang"><b>R</b></span> requires types of
arguments to match, whereas C will do the display whether it makes
sense or not.
</p>
<p>These functions compromise on the testing as follows.  The additional
formats allowed in C are accepted, and all differences in argument
type or count are reported.  As a consequence some reported
differences are not errors.
</p>
<p>If the <code>strictPlural</code> argument is <code>TRUE</code>, then argument
lists must agree exactly between singular and plural forms of messages; if
<code>FALSE</code>, then translations only need to match one or the other
of the two forms.  When <code>checkPoFiles</code> calls <code>checkPoFile</code>,
the <code>strictPlural</code> argument is set to <code>TRUE</code> for files with
names starting &lsquo;<span class="file">R-</span>&rsquo;, and to <code>FALSE</code> otherwise.
</p>
<p>Items marked as &lsquo;fuzzy&rsquo; in the &lsquo;<span class="file">.po</span>&rsquo; file are not
processed (as they are ignored by the message compiler).
</p>
<p>If a difference is found, the translated string is checked for variant
percent signs (e.g., the wide percent sign <code>"\uFF05"</code>).  Such signs
will not be recognized as format specifiers, and are likely to be
errors.
</p>


<h3>Value</h3>

<p>Both functions return an object of S3 class <code>"check_po_files"</code>.  A
<code>print</code> method is defined for this class to display a report on
the differences.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>References</h3>

<p>See the GNU gettext manual for the &lsquo;<span class="file">.po</span>&rsquo; file format:<br />
<a href="https://www.gnu.org/software/gettext/manual/gettext.html">https://www.gnu.org/software/gettext/manual/gettext.html</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+update_pkg_po">update_pkg_po</a>()</code> which calls <code>checkPoFile()</code>;
<code><a href="#topic+xgettext">xgettext</a></code>, <code><a href="base.html#topic+sprintf">sprintf</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
checkPoFiles("de", "/path/to/R/src/directory")

## End(Not run)
</code></pre>

<hr>
<h2 id='checkRd'> Check an Rd Object </h2><span id='topic+checkRd'></span>

<h3>Description</h3>

<p>Check an help file or the output of the <code><a href="#topic+parse_Rd">parse_Rd</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkRd(Rd, defines = .Platform$OS.type, stages = "render",
        unknownOK = TRUE, listOK = TRUE, ..., def_enc = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkRd_+3A_rd">Rd</code></td>
<td>
<p> a filename or <code>Rd</code> object to use as input. </p>
</td></tr>
<tr><td><code id="checkRd_+3A_defines">defines</code></td>
<td>
<p> string(s) to use in <code style="white-space: pre;">&#8288;#ifdef&#8288;</code> tests. </p>
</td></tr>
<tr><td><code id="checkRd_+3A_stages">stages</code></td>
<td>
<p> at which stage (<code>"build"</code>, <code>"install"</code>, or
<code>"render"</code>) should <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> macros be executed? See the
notes below.</p>
</td></tr>
<tr><td><code id="checkRd_+3A_unknownok">unknownOK</code></td>
<td>
<p> unrecognized macros are treated as errors if
<code>FALSE</code>, otherwise warnings. </p>
</td></tr>
<tr><td><code id="checkRd_+3A_listok">listOK</code></td>
<td>
<p> unnecessary non-empty braces (e.g., around text, not as
an argument) are treated as errors if <code>FALSE</code>, otherwise
warnings (&ldquo;Lost braces&rdquo;).</p>
</td></tr>
<tr><td><code id="checkRd_+3A_...">...</code></td>
<td>
<p> additional parameters to pass to <code><a href="#topic+parse_Rd">parse_Rd</a></code> when
<code>Rd</code> is a filename.  One that is often useful is <code>encoding</code>.</p>
</td></tr>
<tr><td><code id="checkRd_+3A_def_enc">def_enc</code></td>
<td>
<p>logical: has the package declared an encoding, so tests
for non-ASCII text are suppressed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>checkRd</code> performs consistency checks on an Rd file, confirming that
required sections are present, etc.
</p>
<p>It accepts a filename for an Rd file, and will use
<code><a href="#topic+parse_Rd">parse_Rd</a></code> to parse it before applying the checks.  If so,
warnings from <code>parse_Rd</code> are collected, together with those from
the internal function <code>prepare_Rd</code>, which does the
<code style="white-space: pre;">&#8288;#ifdef&#8288;</code> and <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> processing, drops sections that
would not be rendered or are duplicated (and should not be) and
removes empty sections.
</p>
<p>An Rd object is passed through <code>prepare_Rd</code>, but it may already
have been (and installed Rd objects have).
</p>
<p>Warnings are given a &lsquo;level&rsquo;: those from <code>prepare_Rd</code> have
level 0.  These include
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> expects R code; found ...</td>
</tr>
<tr>
 <td style="text-align: left;">
    Unprocessed &lsquo;<var>stage</var>&rsquo; macro from <var>stage</var>-stage <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: left;">
    All text must be in a section</td>
</tr>
<tr>
 <td style="text-align: left;">
    Only one <var>tag name</var> section is allowed: the first will be used</td>
</tr>
<tr>
 <td style="text-align: left;">
    docType <var>type</var> is unrecognized</td>
</tr>
<tr>
 <td style="text-align: left;">
    Section <var>name</var> is unrecognized and will be dropped</td>
</tr>
<tr>
 <td style="text-align: left;">
    Dropping empty section <var>name</var></td>
</tr>
<tr>
 <td style="text-align: left;">
  </td>
</tr>

</table>

<p><code>checkRd</code> itself can show
</p>

<table>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Tag <var>tag name</var> not recognized</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Unrecognized format: ...</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\tabular&#8288;</code> format must be simple text</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Unrecognized <code style="white-space: pre;">&#8288;\tabular&#8288;</code> format: ...</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Only <var>n</var> columns allowed in this table</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Tag <var>tag name</var> is invalid in a <var>block name</var> block</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\method&#8288;</code> not valid outside a code block</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Tag <code style="white-space: pre;">&#8288;\method&#8288;</code> is only valid in <code style="white-space: pre;">&#8288;\usage&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Tag <code style="white-space: pre;">&#8288;\dontrun&#8288;</code> is only valid in <code style="white-space: pre;">&#8288;\examples&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Invalid email address: ...</td>
</tr>
<tr>
 <td style="text-align: right;">
    7 </td><td style="text-align: left;"> Invalid URL: ...</td>
</tr>
<tr>
 <td style="text-align: right;">
    5 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\name&#8288;</code> should not contain !, | or @</td>
</tr>
<tr>
 <td style="text-align: right;">
    5 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\item&#8288;</code> in <var>block name</var> must have non-empty label</td>
</tr>
<tr>
 <td style="text-align: right;">
    3 </td><td style="text-align: left;"> Empty section <var>tag name</var></td>
</tr>
<tr>
 <td style="text-align: right;">
    -1 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\name&#8288;</code> should only contain printable ASCII characters</td>
</tr>
<tr>
 <td style="text-align: right;">
    -1 </td><td style="text-align: left;"> Non-ASCII contents without declared encoding</td>
</tr>
<tr>
 <td style="text-align: right;">
    -1 </td><td style="text-align: left;"> Non-ASCII contents in second part of <code style="white-space: pre;">&#8288;\enc&#8288;</code></td>
</tr>
<tr>
 <td style="text-align: right;">
    -1 </td><td style="text-align: left;"> Escaped LaTeX specials: ...</td>
</tr>
<tr>
 <td style="text-align: right;">
 -1|-3 </td><td style="text-align: left;"> Lost braces ...</td>
</tr>
<tr>
 <td style="text-align: right;">
    -3 </td><td style="text-align: left;"> Tag <code style="white-space: pre;">&#8288;\ldots&#8288;</code> is invalid in a code block</td>
</tr>
<tr>
 <td style="text-align: right;">
    -5 </td><td style="text-align: left;"> <code style="white-space: pre;">&#8288;\title&#8288;</code> should not end in a period</td>
</tr>
<tr>
 <td style="text-align: right;">
  </td>
</tr>

</table>

<p>and variations with <code style="white-space: pre;">&#8288;\method&#8288;</code> replaced by <code style="white-space: pre;">&#8288;\S3method&#8288;</code> or
<code style="white-space: pre;">&#8288;\S4method&#8288;</code>, <code style="white-space: pre;">&#8288;\dontrun&#8288;</code> replaced by <code style="white-space: pre;">&#8288;\donttest&#8288;</code>, <code style="white-space: pre;">&#8288;\dontdiff&#8288;</code> or
<code style="white-space: pre;">&#8288;\dontshow&#8288;</code>, and <code style="white-space: pre;">&#8288;\title&#8288;</code> replaced by <code style="white-space: pre;">&#8288;\section&#8288;</code> or
<code style="white-space: pre;">&#8288;\subsection&#8288;</code> name.
&ldquo;Lost braces&rdquo; are uprated to warning level -1 when they match
common markup mistakes, e.g., &lsquo;<span class="samp">&#8288;code{text}&#8288;</span>&rsquo; rendered as
&lsquo;<span class="samp">&#8288;codetext&#8288;</span>&rsquo; due to the missing backslash escape for the macro name.
</p>
<p>Note that both <code>prepare_Rd</code> and <code>checkRd</code> have tests for an
empty section: that in <code>checkRd</code> is stricter (essentially that
nothing is output).
</p>


<h3>Value</h3>

<p>This may fail through an <span class="rlang"><b>R</b></span> error, but otherwise warnings are
collected as returned as an object of class <code>"checkRd"</code>, a
character vector of messages.  This class has a <code>print</code> method
which only prints unique messages, and has argument <code>minlevel</code>
that can be used to select only more serious messages.  (This is set
to <code>-1</code> in <code>R CMD check</code>.)
</p>
<p>Possible fatal errors are those
from <code>!unknownOK</code> or <code>!listOK</code>,
from invalid <code style="white-space: pre;">&#8288;\if&#8288;</code> or <code style="white-space: pre;">&#8288;\ifelse&#8288;</code> conditions,


from running the parser (e.g., a
non-existent file, unclosed quoted string, non-ASCII input without a
specified encoding, an invalid value for an <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> option),
or from <code>prepare_Rd</code> (multiple
<code style="white-space: pre;">&#8288;\Rdversion&#8288;</code> declarations, invalid <code style="white-space: pre;">&#8288;\encoding&#8288;</code> or
<code style="white-space: pre;">&#8288;\docType&#8288;</code> or <code style="white-space: pre;">&#8288;\name&#8288;</code> sections, and missing or duplicate
<code style="white-space: pre;">&#8288;\name&#8288;</code> or <code style="white-space: pre;">&#8288;\title&#8288;</code> sections),
including errors from parsing/running code from <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> macros
(if covered by <code>stages</code>).
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_Rd">parse_Rd</a></code>, <code><a href="#topic+Rd2HTML">Rd2HTML</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## parsed Rd from the installed version of _this_ help file
rd &lt;- Rd_db("tools")[["checkRd.Rd"]]
rd
stopifnot(length(checkRd(rd)) == 0)  # there should be no issues

## make up \tabular issues
bad &lt;- r"(\name{bad}\title{bad}\description{\tabular{p}{1 \tab 2}})"
(res &lt;- checkRd(parse_Rd(textConnection(bad))))
stopifnot(length(res) &gt; 0)
</code></pre>

<hr>
<h2 id='checkRdaFiles'>
Report on Details of Saved Images or Re-saves them
</h2><span id='topic+checkRdaFiles'></span><span id='topic+resaveRdaFiles'></span>

<h3>Description</h3>

<p>This reports for each of the files produced by <code>save</code> the size,
if it was saved in ASCII or XDR binary format, and if it was
compressed (and if so in what format).
</p>
<p>Usually such files have extension &lsquo;<span class="file">.rda</span>&rsquo; or &lsquo;<span class="file">.RData</span>&rsquo;, hence
the name of the function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkRdaFiles(paths)
resaveRdaFiles(paths, compress = c("auto", "gzip", "bzip2", "xz"),
               compression_level, version = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkRdaFiles_+3A_paths">paths</code></td>
<td>
<p>A character vector of paths to <code>save</code> files.  If
this specifies a single directory, it is taken to refer to all
&lsquo;<span class="file">.rda</span>&rsquo; and &lsquo;<span class="file">.RData</span>&rsquo; files in that directory.</p>
</td></tr>
<tr><td><code id="checkRdaFiles_+3A_compress">compress</code>, <code id="checkRdaFiles_+3A_compression_level">compression_level</code></td>
<td>
<p>Type and level of compression: see
<code><a href="base.html#topic+save">save</a></code>.  Values of <code>compress</code> can be abbreviated.</p>
</td></tr>
<tr><td><code id="checkRdaFiles_+3A_version">version</code></td>
<td>
<p>The format to be used when re-saving: see
<code><a href="base.html#topic+save">save</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>compress = "auto"</code> asks <span class="rlang"><b>R</b></span> to choose the compression and ignores
<code>compression_level</code>.  It will try <code>"gzip"</code>, <code>"bzip2"</code>
and if the <code>"gzip"</code> compressed size is over 10Kb, <code>"xz"</code> and
choose the smallest compressed file (but with a 10% bias towards
<code>"gzip"</code>).  This can be slow.
</p>
<p>For back-compatibility, <code>version = NULL</code> is interpreted to mean
version 2: however version-3 files will only be saved as version 3.
</p>


<h3>Value</h3>

<p>For <code>checkRdaFiles</code>, a data frame with rows names <code>paths</code>
and columns
</p>
<table role = "presentation">
<tr><td><code>size</code></td>
<td>
<p>numeric: file size in bytes, <code>NA</code> if the file does
not exist.</p>
</td></tr>
<tr><td><code>ASCII</code></td>
<td>
<p>logical: true for save(ASCII = TRUE), <code>NA</code> if the
format is not that of an <span class="rlang"><b>R</b></span> save file.</p>
</td></tr>
<tr><td><code>compress</code></td>
<td>
<p>character: type of compression.  One of <code>"gzip"</code>,
<code>"bzip2"</code>, <code>"xz"</code>, <code>"none"</code> or <code>"unknown"</code> (which
means that if this is an <span class="rlang"><b>R</b></span> save file it is from a later version of
<span class="rlang"><b>R</b></span>).</p>
</td></tr>
<tr><td><code>version</code></td>
<td>
<p>integer: positive with the version(s) of the
<code><a href="base.html#topic+save">save</a>()</code>, see there on which versions have been default in
which versions of <span class="rlang"><b>R</b></span>, and <code>NA</code> for non-<abbr>Rda</abbr> files.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## from a package top-level source directory
paths &lt;- sort(Sys.glob(c("data/*.rda", "data/*.RData")))
(res &lt;- checkRdaFiles(paths))
## pick out some that may need attention
bad &lt;- is.na(res$ASCII) | res$ASCII | (res$size &gt; 1e4 &amp; res$compress == "none")
res[bad, ]

## End(Not run)</code></pre>

<hr>
<h2 id='checkTnF'>Check R Packages or Code for T/F</h2><span id='topic+checkTnF'></span><span id='topic+print.checkTnF'></span>

<h3>Description</h3>

<p>Checks the specified R package or code file for occurrences of
<code>T</code> or <code>F</code>, and gathers the expression containing these.
This is useful as in R <code>T</code> and <code>F</code> are just variables which
are set to the logicals <code>TRUE</code> and <code>FALSE</code> by default, but
are not reserved words and hence can be overwritten by the user.
Hence, one should always use <code>TRUE</code> and <code>FALSE</code> for the
logicals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkTnF(package, dir, file, lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkTnF_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.  If
given, the installed R code and the examples in the documentation
files of the package are checked.  R code installed as an image file
cannot be checked.</p>
</td></tr>
<tr><td><code id="checkTnF_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectory &lsquo;<span class="file">R</span>&rsquo; (for
R code), and should also contain &lsquo;<span class="file">man</span>&rsquo; (for documentation).
Only used if <code>package</code> is not given.  If used, the R code files
and the examples in the documentation files are checked.</p>
</td></tr>
<tr><td><code id="checkTnF_+3A_file">file</code></td>
<td>
<p>the name of a file containing R code to be checked.  Used
if neither <code>package</code> nor <code>dir</code> are given.</p>
</td></tr>
<tr><td><code id="checkTnF_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>"checkTnF"</code> which is a list containing, for
each file where occurrences of <code>T</code> or <code>F</code> were found, a list
with the expressions containing these occurrences.  The names of the
list are the corresponding file names.
</p>
<p>There is a <code>print</code> method for nicely displaying the information
contained in such objects.
</p>

<hr>
<h2 id='checkVignettes'>Check Package Vignettes</h2><span id='topic+checkVignettes'></span><span id='topic+print.checkVignettes'></span>

<h3>Description</h3>

<p>Check all vignettes of a package by running
<code><a href="utils.html#topic+Sweave">Sweave</a></code> (or other custom weave function) and/or
<code><a href="utils.html#topic+Stangle">Stangle</a></code> (or other custom tangle function) on them.
All R source code files found after the tangling step are
<code><a href="base.html#topic+source">source</a></code>ed to check whether all code can be
executed without errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkVignettes(package, dir, lib.loc = NULL,
               tangle = TRUE, weave = TRUE, latex = FALSE,
               workdir = c("tmp", "src", "cur"),
               keepfiles = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="checkVignettes_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.
If given, vignette source files are looked for in subdirectory
&lsquo;<span class="file">doc</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.
If given, vignette source files are looked for in subdirectory
&lsquo;<span class="file">vignettes</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_tangle">tangle</code></td>
<td>
<p>Perform a tangle and <code><a href="base.html#topic+source">source</a></code> the extracted code?</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_weave">weave</code></td>
<td>
<p>Perform a weave?</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_latex">latex</code></td>
<td>
<p>logical: if <code>weave</code> and <code>latex</code>
are <code>TRUE</code> and there is no &lsquo;<span class="file">Makefile</span>&rsquo; in the vignettes
directory, run the intermediate &lsquo;<span class="file">.tex</span>&rsquo; outputs from weaving
through <code><a href="#topic+texi2pdf">texi2pdf</a></code>.</p>
</td></tr>
<tr><td><code id="checkVignettes_+3A_workdir">workdir</code></td>
<td>
<p>Directory used as working directory while checking the
vignettes. If <code>"tmp"</code> then a temporary directory is created,
this is the default.  If <code>"src"</code> then the directory containing
the vignettes itself is used, if <code>"cur"</code> then the current
working directory of <span class="rlang"><b>R</b></span> is used.</p>
</td></tr>

<tr><td><code id="checkVignettes_+3A_keepfiles">keepfiles</code></td>
<td>
<p>Delete files in the temporary directory?  This option is
ignored when <code>workdir != "tmp"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function first uses <code><a href="#topic+pkgVignettes">pkgVignettes</a></code> to find the
package vignettes, and in particular their vignette engines (see
<code><a href="#topic+vignetteEngine">vignetteEngine</a></code>).
</p>
<p>If <code>tangle</code> is true, it then runs <code><a href="utils.html#topic+Stangle">Stangle</a></code> (or
other custom tangle function provided by the engine) to produce (one
or more) <span class="rlang"><b>R</b></span> code files from each vignette, then <code><a href="base.html#topic+source">source</a></code>s
each code file in turn.
</p>
<p>If <code>weave</code> is true, the vignettes are run through
<code><a href="utils.html#topic+Sweave">Sweave</a></code> (or other custom weave function provided by the
engine).  If <code>latex</code> is also true and there is no &lsquo;<span class="file">Makefile</span>&rsquo;
in the vignettes directory, <code><a href="#topic+texi2pdf">texi2pdf</a></code> is run on the
intermediate &lsquo;<span class="file">.tex</span>&rsquo; files from weaving for those vignettes which
did not give errors in the previous steps.
</p>


<h3>Value</h3>

<p>An object of class <code>"checkVignettes"</code>, which is a list with the
error messages found during the tangle, source, weave and latex steps.
There is a <code>print</code> method for displaying the information
contained in such objects.
</p>

<hr>
<h2 id='codoc'>Check Code/Documentation Consistency</h2><span id='topic+codoc'></span><span id='topic+codocClasses'></span><span id='topic+codocData'></span><span id='topic+print.codoc'></span><span id='topic+print.codocClasses'></span><span id='topic+print.codocData'></span>

<h3>Description</h3>

<p>Find inconsistencies between actual and documented &lsquo;structure&rsquo;
of <span class="rlang"><b>R</b></span> objects in a package.  <code>codoc</code> compares names and
optionally also corresponding positions and default values of the
arguments of functions.  <code>codocClasses</code> and <code>codocData</code>
compare slot names of S4 classes and variable names of data sets,
respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codoc(package, dir, lib.loc = NULL,
      use.values = NULL, verbose = getOption("verbose"))
codocClasses(package, lib.loc = NULL)
codocData(package, lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codoc_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td></tr>
<tr><td><code id="codoc_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectories &lsquo;<span class="file">man</span>&rsquo;
with <span class="rlang"><b>R</b></span> documentation sources (in Rd format) and &lsquo;<span class="file">R</span>&rsquo; with <span class="rlang"><b>R</b></span>
code.  Only used if <code>package</code> is not given.</p>
</td></tr>
<tr><td><code id="codoc_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="codoc_+3A_use.values">use.values</code></td>
<td>
<p>if <code>FALSE</code>, do not use function default values
when comparing code and docs.  Otherwise, compare <em>all</em> default
values if <code>TRUE</code>, and only the ones documented in the usage
otherwise (default).</p>
</td></tr>
<tr><td><code id="codoc_+3A_verbose">verbose</code></td>
<td>
<p>a logical.  If <code>TRUE</code>, additional diagnostics are
printed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The purpose of <code>codoc</code> is to check whether the documented usage
of function objects agrees with their formal arguments as defined in
the <span class="rlang"><b>R</b></span> code.  This is not always straightforward, in particular as the
usage information for methods to generic functions often employs the
name of the generic rather than the method.
</p>
<p>The following algorithm is used.  If an installed package is used, it
is loaded (unless it is the <span class="pkg">base</span> package), after possibly
detaching an already loaded version of the package.  Otherwise, if the
sources are used, the <span class="rlang"><b>R</b></span> code files of the package are collected and
sourced in a new environment.  Then, the usage sections of the Rd
files are extracted and parsed &lsquo;as much as possible&rsquo; to give
the formals documented.  For interpreted functions in the code
environment, the formals are compared between code and documentation
according to the values of the argument <code>use.values</code>.
</p>
<p>If a package has a namespace both exported and unexported objects are
checked, as well as registered S3 methods.  (In the unlikely event of
differences the order is exported objects in the package, registered
S3 methods and finally objects in the namespace and only the first
found is checked.)
</p>
<p>Currently, the R documentation format has no high-level markup for the
basic &lsquo;structure&rsquo; of classes and data sets (similar to the usage
sections for function synopses).  Variable names for data frames in
documentation objects obtained by suitably editing &lsquo;templates&rsquo;
created by <code><a href="utils.html#topic+prompt">prompt</a></code> are recognized by <code>codocData</code>
and used provided that the documentation object is for a single data
frame (i.e., only has one alias).  <code>codocClasses</code> analogously
handles slot names for classes in documentation objects obtained by
editing shells created by <code><a href="methods.html#topic+promptClass">promptClass</a></code>.
</p>
<p>Help files named &lsquo;<span class="file"><var>pkgname</var>-defunct.Rd</span>&rsquo; for the
appropriate <var>pkgname</var> are checked more loosely, as they may
have undocumented arguments.
</p>


<h3>Value</h3>

<p><code>codoc</code> returns an object of class <code>"codoc"</code>.  Currently,
this is a list which, for each Rd object in the package where an
inconsistency was found, contains an element with a list of the
mismatches (which in turn are lists with elements <code>code</code> and
<code>docs</code>, giving the corresponding arguments obtained from the
function's code and documented usage).
</p>
<p><code>codocClasses</code> and <code>codocData</code> return objects of class
<code>"codocClasses"</code> and <code>"codocData"</code>, respectively, with a
structure similar to class <code>"codoc"</code>.
</p>
<p>There are <code>print</code> methods for nicely displaying the information
contained in such objects.
</p>


<h3>Note</h3>

<p>The default for <code>use.values</code> has been changed from
<code>FALSE</code> to <code>NULL</code>, for <span class="rlang"><b>R</b></span> versions 1.9.0 and later.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+undoc">undoc</a></code>, <code><a href="#topic+QC">QC</a></code>
</p>

<hr>
<h2 id='compactPDF'>
Compact PDF Files
</h2><span id='topic+compactPDF'></span><span id='topic+format.compactPDF'></span>

<h3>Description</h3>

<p>Re-save PDF files (especially vignettes) more compactly.
Support function for <code>R CMD build --compact-vignettes</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compactPDF(paths,
           qpdf = Sys.which(Sys.getenv("R_QPDF", "qpdf")),
           gs_cmd = Sys.getenv("R_GSCMD", ""),
           gs_quality = Sys.getenv("GS_QUALITY", "none"),
           gs_extras = character(),
           verbose = FALSE)

## S3 method for class 'compactPDF'
format(x, ratio = 0.9, diff = 1e4, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compactPDF_+3A_paths">paths</code></td>
<td>
<p>A character vector of paths to PDF files, or a length-one
character vector naming a directory, when all &lsquo;<span class="file">.pdf</span>&rsquo; files in
that directory will be used.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_qpdf">qpdf</code></td>
<td>
<p>Character string giving the path to the <code>qpdf</code>
command.  If empty, <code>qpdf</code> will not be used.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_gs_cmd">gs_cmd</code></td>
<td>
<p>Character string giving the path to the GhostScript
executable, if that is to be used.  On Windows this is the path to
&lsquo;<span class="file">gswin32c.exe</span>&rsquo; or &lsquo;<span class="file">gswin64c.exe</span>&rsquo;.  If <code>""</code> (the
default), the function will try to find a platform-specific path to
GhostScript where required.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_gs_quality">gs_quality</code></td>
<td>
<p>A character string indicating the quality required:
the options are <code>"none"</code> (so GhostScript is not used),
<code>"printer"</code> (300dpi), <code>"ebook"</code> (150dpi) and
<code>"screen"</code> (72dpi).  Can be abbreviated.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_gs_extras">gs_extras</code></td>
<td>
<p>An optional character vector of further options to be
passed to GhostScript.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_verbose">verbose</code></td>
<td>
<p><code><a href="base.html#topic+logical">logical</a></code> or non-negative integer indicating if
and how much of the compression utilities' output should be shown.</p>
</td></tr>

<tr><td><code id="compactPDF_+3A_x">x</code></td>
<td>
<p>An object of class <code>"compactPDF"</code>.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_ratio">ratio</code>, <code id="compactPDF_+3A_diff">diff</code></td>
<td>
<p>Limits for reporting: files are only reported whose
sizes are reduced both by a factor of <code>ratio</code> and by
<code>diff</code> bytes.</p>
</td></tr>
<tr><td><code id="compactPDF_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This by default makes use of <code>qpdf</code>, available from
<a href="https://qpdf.sourceforge.io/">https://qpdf.sourceforge.io/</a> (including as a Windows binary) and
included with the CRAN macOS distribution of <span class="rlang"><b>R</b></span>.  If <code>gs_cmd</code>
is non-empty and <code>gs_quality != "none"</code>, GhostScript will used
first, then <code>qpdf</code> if it is available.  If
<code>gs_quality != "none"</code> and <code>gs_cmd</code> is <code>""</code>, an attempt
will be made to find a GhostScript executable.
</p>
<p><code>qpdf</code> and/or <code>gs_cmd</code> are run on all PDF files found,
and those which are reduced in size by at least 10% and 10Kb are
replaced.
</p>
<p>The strategy of our use of <code>qpdf</code> is to (losslessly) compress
both PDF streams and objects.  GhostScript compresses streams and more
(including downsampling and compressing embedded images) and
consequently is much slower and may lose quality (but can also produce
much smaller PDF files).  However, quality <code>"ebook"</code> is perfectly
adequate for screen viewing and printing on laser printers.
</p>
<p>Where PDF files are changed they will become PDF version 1.5 files:
these have been supported by Acrobat Reader since version 6 in 2003,
so this is very unlikely to cause difficulties.
</p>
<p>Stream compression is what most often has large gains.  Most PDF
documents are generated with object compression, but this does not
seem to be the default for MiKTeX's <code>pdflatex</code>.  For some PDF
files (and especially package vignettes), using GhostScript can
dramatically reduce the space taken by embedded images (often
screenshots).
</p>
<p>Where both GhostScript and <code>qpdf</code> are selected (when
<code>gs_quality != "none"</code> and both executables are found), they are
run in that order and the size reductions apply to the total
compression achieved.
</p>


<h3>Value</h3>

<p>An object of class <code>c("compactPDF", "data.frame")</code>.
This has two columns, the old and new sizes in bytes for the files
that were changed.
</p>
<p>There are <code>format</code> and <code>print</code> methods: the latter passes
<code>...</code> to the format method, so will accept <code>ratio</code> and
<code>diff</code> arguments.
</p>


<h3>Note</h3>

<p>The external tools used may change in future releases.
</p>
<p>Frequently, updates to GhostScript have produced better compression (up
to several times better), so if possible use the latest version available.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+resaveRdaFiles">resaveRdaFiles</a></code>.
</p>
<p>For other tools to compact PDF files, see the &lsquo;Writing R
Extensions&rsquo; manual.
</p>

<hr>
<h2 id='CRANtools'>CRAN Package Repository Tools</h2><span id='topic+CRAN_package_db'></span><span id='topic+CRAN_check_results'></span><span id='topic+CRAN_check_details'></span><span id='topic+CRAN_check_issues'></span><span id='topic+summarize_CRAN_check_status'></span><span id='topic+R_CRAN_WEB'></span><span id='topic+R_CRAN_SRC'></span><span id='topic+CRAN_current_db'></span><span id='topic+CRAN_aliases_db'></span><span id='topic+CRAN_rdxrefs_db'></span><span id='topic+CRAN_archive_db'></span><span id='topic+CRAN_authors_db'></span>

<h3>Description</h3>

<p>Tools for obtaining information about current and archived packages in
the <abbr>CRAN</abbr> package repository, and the check status of the
current packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CRAN_package_db()

CRAN_check_results(flavors = NULL)
CRAN_check_details(flavors = NULL)
CRAN_check_issues()
summarize_CRAN_check_status(packages,
                            results = NULL,
                            details = NULL,
                            issues = NULL)

CRAN_current_db()
CRAN_aliases_db()
CRAN_rdxrefs_db()
CRAN_archive_db()

CRAN_authors_db()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CRANtools_+3A_packages">packages</code></td>
<td>
<p>a character vector of package names.</p>
</td></tr>
<tr><td><code id="CRANtools_+3A_flavors">flavors</code></td>
<td>
<p>a character vector of <abbr>CRAN</abbr> check flavor names, or
<code>NULL</code> (default), corresponding to all available flavors.</p>
</td></tr>
<tr><td><code id="CRANtools_+3A_results">results</code></td>
<td>
<p>the return value of <code>CRAN_check_results()</code>
(default), or a subset of this.</p>
</td></tr>
<tr><td><code id="CRANtools_+3A_details">details</code></td>
<td>
<p>the return value of <code>CRAN_check_details()</code>
(default), or a subset of this.</p>
</td></tr>
<tr><td><code id="CRANtools_+3A_issues">issues</code></td>
<td>
<p>the return value of <code>CRAN_check_issues()</code>
(default), or a subset of this.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>CRAN_package_db()</code> returns a data frame with character columns
containing most &lsquo;<span class="file">DESCRIPTION</span>&rsquo; metadata for the current packages
in the CRAN package repository, including in particular the
Description and Maintainer information not provided by
<code>utils::<a href="utils.html#topic+available.packages">available.packages</a>()</code>.
</p>
<p><code>CRAN_check_results()</code> returns a data frame with the basic
<abbr>CRAN</abbr> package check results including timings, with columns
<code>Package</code>, <code>Flavor</code> and <code>Status</code> giving the package
name, check flavor, and overall check status, respectively.
</p>
<p><code>CRAN_check_details()</code> returns a data frame inheriting from class
<code>"check_details"</code> (which has useful <code>print</code> and
<code>format</code> methods) with details on the check results, providing
check name, status and output for every non-OK check (<em>via</em>
columns <code>Check</code>, <code>Status</code> and <code>Output</code>, respectively).
Packages with all-OK checks are indicated via a <code>*</code> <code>Check</code>
wildcard name and OK <code>Status</code>.
</p>
<p><code>CRAN_check_issues()</code> returns a information on additional
check issues (including the memory-access check results made available
from <a href="https://www.stats.ox.ac.uk/pub/bdr/memtests/">https://www.stats.ox.ac.uk/pub/bdr/memtests/</a>) as a
data frame with character variables <code>Package</code>, <code>Version</code>,
<code>kind</code> (an identifier for the issue) and <code>href</code> (a URL with
information on the issue).
</p>
<p><code>CRAN_current_db()</code> returns a data frame with the
<code><a href="base.html#topic+file.info">file.info</a>()</code> of all current package sources in the
<abbr>CRAN</abbr> package repository.
</p>
<p><code>CRAN_aliases_db()</code> returns the Rd aliases in the current
packages, as a nested per-package named list of per-Rd-file named
lists with the aliases.
</p>
<p><code>CRAN_rdxrefs_db()</code> returns the Rd cross-references in the
current packages, as a per-package list of matrices with columns 
<code>"Target"</code>, <code>"Anchor"</code> and <code>"Source"</code>.
</p>
<p><code>CRAN_archive_db()</code> returns the <code><a href="base.html#topic+file.info">file.info</a>()</code> of all
archived packages sources in the <abbr>CRAN</abbr> package repository, as a
per-package named list of data frames.
</p>
<p><code>CRAN_authors_db()</code> returns information on the authors of the
current CRAN packages extracted from the &lsquo;<span class="samp">&#8288;Authors@R&#8288;</span>&rsquo; fields in
the package &lsquo;<span class="file">DESCRIPTION</span>&rsquo; files, as a data frame with character
columns giving the given and family names, email addresses, roles, 
comments, <abbr>ORCID</abbr> and <abbr>ROR</abbr> identifiers of the person
entries, and the corresponding package.
</p>


<h3>Value</h3>

<p>See &lsquo;Details&rsquo;.  Note that the results are collated on
<abbr>CRAN</abbr>: currently this is done in a locale which sorts
<code>aAbB</code> ....
</p>


<h3>Which CRAN?</h3>

<p>Functions
<code>CRAN_package_db()</code>,
<code>CRAN_check_results()</code>,
<code>CRAN_check_details()</code> and
<code>CRAN_check_issues()</code>
access a <abbr>CRAN</abbr> mirror specified by the
environment variable <span class="env">R_CRAN_WEB</span>, defaulting to one specified in
the <code>"repos"</code> option.  Otherwise the entry in the
&lsquo;<span class="file">repositories</span>&rsquo; file (see <code><a href="utils.html#topic+setRepositories">setRepositories</a></code>) is used:
if that specifies &lsquo;<span class="samp">&#8288;@CRAN@&#8288;</span>&rsquo; (the default) or does not contain an
entry for CRAN then <a href="https://CRAN.R-project.org">https://CRAN.R-project.org</a> is used.
</p>
<p>The mirror to be used is reported by
<code>utils::<a href="utils.html#topic+findCRANmirror">findCRANmirror</a>("web")</code>.
</p>
<p>Note that these functions access parts of <abbr>CRAN</abbr> under
&lsquo;<span class="file">web/contrib</span>&rsquo; and &lsquo;<span class="file">web/packages</span>&rsquo; so if you have specified a
mirror of just &lsquo;<span class="file">src/contrib</span>&rsquo; for installing packages you will
need to set <span class="env">R_CRAN_WEB</span> to point to a full mirror.
</p>
<p>Functions
<code>CRAN_current_db()</code>,
<code>CRAN_aliases_db()</code>,
<code>CRAN_rdxrefs_db()</code>,
<code>CRAN_authors_db()</code> and
<code>CRAN_archive_db()</code>
(also used by <code>R CMD check</code>)
use <span class="env">R_CRAN_SRC</span> rather than <span class="env">R_CRAN_WEB</span>.
The mirror to be used is reported by
<code>utils::<a href="utils.html#topic+findCRANmirror">findCRANmirror</a>("src")</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+base_aliases_db">base_aliases_db</a>()</code> and <code><a href="#topic+base_rdxrefs_db">base_rdxrefs_db</a>()</code>
for getting the Rd aliases and cross-references in the base packages.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This can be rather slow  with a non-local CRAN mirror
## and might fail (slowly) without Internet access in that case.

set.seed(11)  # but the packages chosen will change as soon as CRAN does.
pdb &lt;- CRAN_package_db()
dim(pdb)
## DESCRIPTION fields included:
colnames(pdb)
## Summarize publication dates:
summary(as.Date(pdb$Published))
## Summarize numbers of packages according to maintainer:
summary(lengths(split(pdb$Package, pdb$Maintainer)))
## Packages with 'LASSO' in their Description:
pdb$Package[grepl("LASSO", pdb$Description)]

results &lt;- CRAN_check_results()
## Available variables:
names(results)
## Tabulate overall check status according to flavor:
with(results, table(Flavor, Status))

details &lt;- CRAN_check_details()
## Available variables:
names(details)
## Tabulate checks according to their status:
tab &lt;- with(details, table(Check, Status))
## Inspect some installation problems:
bad &lt;- subset(details,
              ((Check == "whether package can be installed") &amp;
               (Status != "OK")))
## Show a random sample of up to 6
head(bad[sample(seq_len(NROW(bad)), NROW(bad)), ])

issues &lt;- CRAN_check_issues()
head(issues)
## Show counts of issues according to kind:
table(issues[, "kind"])

## Summarize CRAN check status for 10 randomly-selected packages
## (reusing the information already read in):
pos &lt;- sample(seq_len(NROW(pdb)), 10L)
summarize_CRAN_check_status(pdb[pos, "Package"],
                            results, details, issues)
</code></pre>

<hr>
<h2 id='delimMatch'>Delimited Pattern Matching</h2><span id='topic+delimMatch'></span>

<h3>Description</h3>

<p>Match delimited substrings in a character vector, with proper nesting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delimMatch(x, delim = c("{", "}"), syntax = "Rd")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="delimMatch_+3A_x">x</code></td>
<td>
<p>a character vector.</p>
</td></tr>
<tr><td><code id="delimMatch_+3A_delim">delim</code></td>
<td>
<p>a character vector of length 2 giving the start and end
delimiters.  Future versions might allow for arbitrary regular
expressions.</p>
</td></tr>
<tr><td><code id="delimMatch_+3A_syntax">syntax</code></td>
<td>
<p>currently, always the string <code>"Rd"</code> indicating Rd
syntax (i.e., &lsquo;<span class="samp">&#8288;%&#8288;</span>&rsquo; starts a comment extending till the end of
the line, and &lsquo;<span class="samp">&#8288;\&#8288;</span>&rsquo; escapes).  Future versions might know about
other syntax, perhaps via &lsquo;syntax tables&rsquo; allowing to
flexibly specify comment, escape, and quote characters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer vector of the same length as <code>x</code> giving the starting
position (in characters) of the first match, or <code class="reqn">-1</code> if there is
none, with attribute <code>"match.length"</code> giving the length (in
characters) of the matched text (or <code class="reqn">-1</code> for no match).
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+regexpr">regexpr</a></code> for &lsquo;simple&rsquo; pattern matching.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("\\value{foo}", "function(bar)")
delimMatch(x)
delimMatch(x, c("(", ")"))
</code></pre>

<hr>
<h2 id='dependsOnPkgs'>Find Reverse Dependencies</h2><span id='topic+dependsOnPkgs'></span>

<h3>Description</h3>

<p>Find &lsquo;reverse&rsquo; dependencies of packages, that is those packages
which depend on this one, and (optionally) so on recursively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dependsOnPkgs(pkgs,
              dependencies = "strong",
              recursive = TRUE, lib.loc = NULL,
              installed =
              utils::installed.packages(lib.loc, fields = "Enhances"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dependsOnPkgs_+3A_pkgs">pkgs</code></td>
<td>
<p>a character vector of package names.</p>
</td></tr>
<tr><td><code id="dependsOnPkgs_+3A_dependencies">dependencies</code></td>
<td>
<p>a character vector listing the types of
dependencies, a subset of
<code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string <code>"all"</code> is shorthand for that vector,
character string <code>"most"</code> for the same vector without
<code>"Enhances"</code>,
character string <code>"strong"</code> (default) for the first three
elements of that vector.</p>
</td></tr>
<tr><td><code id="dependsOnPkgs_+3A_recursive">recursive</code></td>
<td>
<p>logical: should reverse dependencies of reverse
dependencies (and so on) be included?</p>
</td></tr>
<tr><td><code id="dependsOnPkgs_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of <span class="rlang"><b>R</b></span> library trees, or <code>NULL</code>
for all known trees (see <code><a href="base.html#topic+.libPaths">.libPaths</a></code>).</p>
</td></tr>
<tr><td><code id="dependsOnPkgs_+3A_installed">installed</code></td>
<td>
<p>a result of calling <code><a href="utils.html#topic+installed.packages">installed.packages</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of package names, which does not include any from
<code>pkgs</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+package_dependencies">package_dependencies</a>()</code> to get the regular
(&ldquo;forward&rdquo;) dependencies of a package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## there are few dependencies in a vanilla R installation:
## lattice may not be installed
dependsOnPkgs("lattice")
</code></pre>

<hr>
<h2 id='doitools'>Check Package <abbr>DOI</abbr>s</h2><span id='topic+check_package_dois'></span>

<h3>Description</h3>

<p>Check <abbr>DOI</abbr>s in package sources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_package_dois(dir, verbose = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="doitools_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root 
source directory.</p>
</td></tr>
<tr><td><code id="doitools_+3A_verbose">verbose</code></td>
<td>
<p>a logical indicating if output should monitor check
progress.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checking <abbr>DOI</abbr>s is performed in parallel using <a href="https://CRAN.R-project.org/package=curl"><span class="pkg">curl</span></a> (so this
must be installed for checking).
</p>
<p>The <abbr>DOI</abbr>s checked are extracted from the package &lsquo;<span class="file">DESCRIPTION</span>&rsquo;
(&lsquo;<span class="samp">&#8288;&lt;doi:...&gt;&#8288;</span>&rsquo; <abbr>URI</abbr>s in the &lsquo;<span class="samp">&#8288;Description&#8288;</span>&rsquo; field), Rd and
&lsquo;<span class="file">CITATION</span>&rsquo; files.
</p>
<p>The <abbr>DOI</abbr>s are checked via &lsquo;<span class="samp">&#8288;HEAD&#8288;</span>&rsquo; requests to the DOI system Proxy
Server REST API.
</p>


<h3>Value</h3>

<p>A data frame inheriting from class <code>check_doi_db</code> with
information on the DOI check problems found.
</p>


<h3>Note</h3>

<p>This functionality is still experimental: interfaces may change in
future versions. 
</p>

<hr>
<h2 id='encoded_text_to_latex'>Translate non-ASCII Text to LaTeX Escapes</h2><span id='topic+encoded_text_to_latex'></span>

<h3>Description</h3>

<p>Translate non-ASCII characters in text to LaTeX escape sequences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encoded_text_to_latex(x,
                      encoding = c("latin1", "latin2", "latin9",
                                   "UTF-8", "utf8"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="encoded_text_to_latex_+3A_x">x</code></td>
<td>
<p>a character vector.</p>
</td></tr>
<tr><td><code id="encoded_text_to_latex_+3A_encoding">encoding</code></td>
<td>
<p>the encoding to be assumed.  <code>"latin9"</code> is
officially ISO-8859-15 or Latin-9, but known as latin9 to LaTeX's
<code>inputenc</code> package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Non-ASCII characters in <code>x</code> are replaced by an appropriate LaTeX
escape sequence, or &lsquo;<span class="samp">&#8288;?&#8288;</span>&rsquo; if there is no appropriate sequence.
</p>
<p>Even if there is an appropriate sequence, it may not be supported by
the font in use.  Hyphen is mapped to &lsquo;<span class="samp">&#8288;\-&#8288;</span>&rsquo;.
</p>


<h3>Value</h3>

<p>A character vector of the same length as <code>x</code>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+iconv">iconv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- "fran\xE7ais"
encoded_text_to_latex(x, "latin1")
## Not run: 
## create a tex file to show the upper half of 8-bit charsets
x &lt;- rawToChar(as.raw(160:255), multiple = TRUE)
(x &lt;- matrix(x, ncol = 16, byrow = TRUE))
xx &lt;- x
xx[] &lt;- encoded_text_to_latex(x, "latin1") # or latin2 or latin9
xx &lt;- apply(xx, 1, paste, collapse = "&amp;")
con &lt;- file("test-encoding.tex", "w")
header &lt;- c(
"\\documentclass{article}",
"\\usepackage[T1]{fontenc}",
"\\usepackage{Rd}",
"\\begin{document}",
"\\HeaderA{test}{}{test}",
"\\begin{Details}\\relax",
"\\Tabular{cccccccccccccccc}{")
trailer &lt;- c("}", "\\end{Details}", "\\end{document}")
writeLines(header, con)
writeLines(paste0(xx, "\\\\"), con)
writeLines(trailer, con)
close(con)
## and some UTF_8 chars
x &lt;- intToUtf8(as.integer(
    c(160:383,0x0192,0x02C6,0x02C7,0x02CA,0x02D8,
      0x02D9, 0x02DD, 0x200C, 0x2018, 0x2019, 0x201C,
      0x201D, 0x2020, 0x2022, 0x2026, 0x20AC)),
               multiple = TRUE)
x &lt;- matrix(x, ncol = 16, byrow = TRUE)
xx &lt;- x
xx[] &lt;- encoded_text_to_latex(x, "UTF-8")
xx &lt;- apply(xx, 1, paste, collapse = "&amp;")
con &lt;- file("test-utf8.tex", "w")
writeLines(header, con)
writeLines(paste(xx, "\\\\", sep = ""), con)
writeLines(trailer, con)
close(con)

## End(Not run)</code></pre>

<hr>
<h2 id='fileutils'>File Utilities</h2><span id='topic+file_ext'></span><span id='topic+file_path_as_absolute'></span><span id='topic+file_path_sans_ext'></span><span id='topic+list_files_with_exts'></span><span id='topic+list_files_with_type'></span>

<h3>Description</h3>

<p>Utilities for listing files, and manipulating file paths.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>file_ext(x)
file_path_as_absolute(x)
file_path_sans_ext(x, compression = FALSE)

list_files_with_exts(dir, exts, all.files = FALSE,
                     full.names = TRUE)
list_files_with_type(dir, type, all.files = FALSE,
                     full.names = TRUE, OS_subdirs = .OStype())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fileutils_+3A_x">x</code></td>
<td>
<p>character vector giving file paths.</p>
</td></tr>
<tr><td><code id="fileutils_+3A_compression">compression</code></td>
<td>
<p>logical: should compression extension &lsquo;<span class="file">.gz</span>&rsquo;,
&lsquo;<span class="file">.bz2</span>&rsquo; or &lsquo;<span class="file">.xz</span>&rsquo; be removed first?</p>
</td></tr>
<tr><td><code id="fileutils_+3A_dir">dir</code></td>
<td>
<p>a character string with the path name to a directory.</p>
</td></tr>
<tr><td><code id="fileutils_+3A_exts">exts</code></td>
<td>
<p>a character vector of possible file extensions (excluding
the leading dot).</p>
</td></tr>
<tr><td><code id="fileutils_+3A_all.files">all.files</code></td>
<td>
<p>a logical.  If <code>FALSE</code> (default), only visible
files are considered; if <code>TRUE</code>, all files are used.</p>
</td></tr>
<tr><td><code id="fileutils_+3A_full.names">full.names</code></td>
<td>
<p>a logical indicating whether the full paths of the
files found are returned (default), or just the file names.</p>
</td></tr>
<tr><td><code id="fileutils_+3A_type">type</code></td>
<td>
<p>a character string giving the &lsquo;type&rsquo; of the files
to be listed, as characterized by their extensions.  Currently,
possible values are <code>"code"</code> (R code), <code>"data"</code> (data
sets), <code>"demo"</code> (demos), <code>"docs"</code> (R documentation), and
<code>"vignette"</code> (vignettes).</p>
</td></tr>
<tr><td><code id="fileutils_+3A_os_subdirs">OS_subdirs</code></td>
<td>
<p>a character vector with the names of OS-specific
subdirectories to possibly include in the listing of R code and
documentation files.  By default, the value of the environment
variable <span class="env">R_OSTYPE</span>, or if this is empty, the value of
<code><a href="base.html#topic+.Platform">.Platform</a>$OS.type</code>, is used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>file_ext</code> returns the file (name) extensions (excluding the
leading dot).
(Only purely alphanumeric extensions are recognized.)
</p>
<p><code>file_path_as_absolute</code> turns a possibly relative file path
absolute, performing tilde expansion if necessary.  This is a wrapper
for <code><a href="base.html#topic+normalizePath">normalizePath</a></code>.  Currently, <code>x</code> must be a single
existing path.
</p>
<p><code>file_path_sans_ext</code> returns the file paths without extensions
(and the leading dot).
(Only purely alphanumeric extensions are recognized.)
</p>
<p><code>list_files_with_exts</code> returns the paths or names of the files in
directory <code>dir</code> with extension matching one of the elements of
<code>exts</code>.  Note that by default, full paths are returned, and that
only visible files are used.
</p>
<p><code>list_files_with_type</code> returns the paths of the files in <code>dir</code>
of the given &lsquo;type&rsquo;, as determined by the extensions recognized
by <span class="rlang"><b>R</b></span>.  When listing R code and documentation files, files in
OS-specific subdirectories are included if present according to the
value of <code>OS_subdirs</code>.  Note that by default, full paths are
returned, and that only visible files are used.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+file.path">file.path</a></code>,
<code><a href="base.html#topic+file.info">file.info</a></code>,
<code><a href="base.html#topic+list.files">list.files</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dir &lt;- file.path(R.home(), "library", "stats")
list_files_with_exts(file.path(dir, "demo"), "R")
list_files_with_type(file.path(dir, "demo"), "demo") # the same
file_path_sans_ext(list.files(file.path(R.home("modules"))))
</code></pre>

<hr>
<h2 id='find_gs_cmd'>
Find a GhostScript Executable
</h2><span id='topic+find_gs_cmd'></span><span id='topic+R_GSCMD'></span><span id='topic+GSC'></span>

<h3>Description</h3>

<p>Find a GhostScript executable in a cross-platform way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_gs_cmd(gs_cmd = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_gs_cmd_+3A_gs_cmd">gs_cmd</code></td>
<td>
<p>The name, full or partial path of a GhostScript executable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The details differ by platform.
</p>
<p>On a Unix-alike, the GhostScript executable is usually called
<code>gs</code>.  The name (and possibly path) of the command is taken
first from argument <code>gs_cmd</code> then from the environment variable
<span class="env">R_GSCMD</span> and default <code>gs</code>.  This is then looked for on the
system path and the value returned if a match is found.
</p>
<p>On Windows, the name of the command is taken from argument
<code>gs_cmd</code> then from the environment variables <span class="env">R_GSCMD</span> and
<span class="env">GSC</span>.  If neither of those produces a suitable command name,
<code>gswin64c</code> and <code>gswin32c</code> are tried in turn.  In all
cases the command is looked for on the system <span class="env">PATH</span>.
</p>
<p>Note that on Windows (and some other OSes) there are separate
GhostScript executables to display Postscript/PDF files and to
manipulate them: this function looks for the latter.  
</p>


<h3>Value</h3>

<p>A character string giving the full path to a GhostScript executable if
one was found, otherwise an empty string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## Suppose a Solaris system has GhostScript 9.00 on the path and
## 9.07 in /opt/csw/bin.  Then one might set
Sys.setenv(R_GSCMD = "/opt/csw/bin/gs")

## End(Not run)</code></pre>

<hr>
<h2 id='getVignetteInfo'>Get Information on Installed Vignettes</h2><span id='topic+getVignetteInfo'></span>

<h3>Description</h3>

<p>This function gets information on installed vignettes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getVignetteInfo(package = NULL, lib.loc = NULL, all = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getVignetteInfo_+3A_package">package</code></td>
<td>

<p>Which package to look in, or <code>NULL</code> for all packages.
</p>
</td></tr>
<tr><td><code id="getVignetteInfo_+3A_lib.loc">lib.loc</code></td>
<td>

<p>Which library to look in.
</p>
</td></tr>
<tr><td><code id="getVignetteInfo_+3A_all">all</code></td>
<td>

<p>Whether to search all installed packages, or just attached packages.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix with columns
</p>
<table role = "presentation">
<tr><td><code>Package</code></td>
<td>
<p>the name of the package</p>
</td></tr>
<tr><td><code>Dir</code></td>
<td>
<p>the directory where the package is installed</p>
</td></tr>
<tr><td><code>Topic</code></td>
<td>
<p>the name of the vignette</p>
</td></tr>
<tr><td><code>File</code></td>
<td>
<p>the base filename of the source of the vignette</p>
</td></tr>
<tr><td><code>Title</code></td>
<td>
<p>the title of the vignette</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the tangled R source from the vignette</p>
</td></tr>
<tr><td><code>PDF</code></td>
<td>
<p>the PDF or HTML file for display</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The last column of the result is named <code>PDF</code> for historical reasons, 
but it may contain a filename of a PDF or HTML document.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pkgVignettes">pkgVignettes</a></code> is a similar function that can work on
an uninstalled package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
getVignetteInfo("grid")

</code></pre>

<hr>
<h2 id='HTMLheader'>Generate a Standard HTML Header for R Help</h2><span id='topic+HTMLheader'></span>

<h3>Description</h3>

<p>This function generates the standard HTML header used on R help pages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HTMLheader(title = "R", logo = TRUE, up = NULL,
           top = file.path(Rhome, "doc/html/index.html"),
           Rhome = "",
           css = file.path(Rhome, "doc/html/R.css"),
           headerTitle = paste("R:", title),
           outputEncoding = "UTF-8")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="HTMLheader_+3A_title">title</code></td>
<td>

<p>The title to display and use in the HTML headers.  Should have had any
HTML escaping already done.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_logo">logo</code></td>
<td>

<p>Whether to display the <span class="rlang"><b>R</b></span> logo after the title.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_up">up</code></td>
<td>

<p>Which page (if any) to link to on the &ldquo;up&rdquo; button.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_top">top</code></td>
<td>

<p>Which page (if any) to link to on the &ldquo;top&rdquo; button.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_rhome">Rhome</code></td>
<td>

<p>A <b>relative</b> path to the R home directory.  See the &lsquo;Details&rsquo;.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_css">css</code></td>
<td>

<p>The relative URL for the Cascading Style Sheet.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_headertitle">headerTitle</code></td>
<td>

<p>The title used in the headers.
</p>
</td></tr>
<tr><td><code id="HTMLheader_+3A_outputencoding">outputEncoding</code></td>
<td>

<p>The declared encoding for the whole page.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>up</code> and <code>top</code> links should be relative to the current page.
The <code>Rhome</code> path default works with dynamic help; for static help, a
relative path (e.g., &lsquo;<span class="file">../..</span>&rsquo;) to it should be used.
</p>


<h3>Value</h3>

<p>A character vector containing the lines of an HTML header which can be used
to start a page in the R help system.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat(HTMLheader("This is a sample header"), sep="\n")
</code></pre>

<hr>
<h2 id='HTMLlinks'>Collect HTML Links from Package Documentation</h2><span id='topic+findHTMLlinks'></span>

<h3>Description</h3>

<p>Compute relative file paths for URLs to other package's installed HTML
documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findHTMLlinks(pkgDir = "", lib.loc = NULL, level = 0:3)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="HTMLlinks_+3A_pkgdir">pkgDir</code></td>
<td>
<p>the top-level directory of an installed package.  The
default indicates no package.</p>
</td></tr>
<tr><td><code id="HTMLlinks_+3A_lib.loc">lib.loc</code></td>
<td>
<p>character vector describing the location of <span class="rlang"><b>R</b></span> library
trees to scan: the default indicates <code><a href="base.html#topic+.libPaths">.libPaths</a>()</code>.</p>
</td></tr>
<tr><td><code id="HTMLlinks_+3A_level">level</code></td>
<td>
<p>Which level(s) to include.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>findHTMLlinks</code> tries to resolve links from one help page to
another.  It uses in decreasing priority
</p>

<ul>
<li><p> The package in <code>pkgDir</code>: this is used when converting
HTML help for that package (level 0).
</p>
</li>
<li><p> The base and recommended packages (levels 1 and 2).
</p>
</li>
<li><p> Other packages found in the library trees specified by
<code>lib.loc</code> in the order of the trees and alphabetically within a
library tree (level 3).
</p>
</li></ul>



<h3>Value</h3>

<p>A named character vector of file paths, relative to the &lsquo;<span class="file">html</span>&rsquo;
directory of an installed package.  So these are of the form
&lsquo;<span class="file">&quot;../../<var>somepkg</var>/html/<var>sometopic</var>.html&quot;</span>&rsquo;.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley</p>

<hr>
<h2 id='licensetools'>License Tools</h2><span id='topic+analyze_license'></span>

<h3>Description</h3>

<p>Tools for computing on license specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analyze_license(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="licensetools_+3A_x">x</code></td>
<td>
<p>a character string.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>R packages use the &lsquo;<span class="samp">&#8288;License&#8288;</span>&rsquo; field in their &lsquo;<span class="file">DESCRIPTION</span>&rsquo;
file to specify their license in a standardized form described in
section &lsquo;Licenses&rsquo; of the &lsquo;Writing R Extensions&rsquo; manual.
This uses alternatives of individual specifications
(&lsquo;components&rsquo;) which can use version restrictions or give
pointers to &lsquo;<span class="file">LICENSE</span>&rsquo; (or &lsquo;<span class="file">LICENCE</span>&rsquo;) files either
restricting the base license or giving a full license.
</p>
<p>Function <code>analyze_license()</code> checks if a given character string
provides such a standardized license spec (or something recognized as
a historic exception which can be transformed to a standardized spec).
If standardizable, it extracts the individual components and where
these give version ranges the corresponding expansions into components
with fixed versions.  It also indicates whether the license can be
verified to be FOSS
(<a href="https://en.wikipedia.org/wiki/Free_and_open-source_software">https://en.wikipedia.org/wiki/Free_and_open-source_software</a>)
licenses.
</p>


<h3>Value</h3>

<p>a list with elements including
</p>
<table role = "presentation">
<tr><td><code>is_canonical</code></td>
<td>
<p>a logical indicating whether the given string 
is a standardized license spec.</p>
</td></tr>
<tr><td><code>is_standardizable</code></td>
<td>
<p>a logical indicating whether the given string
is a standardized license spec, or can be transformed to one.</p>
</td></tr>
<tr><td><code>standardization</code></td>
<td>
<p>a character string giving the standardized
license spec correponding to the given string if this is
standardizable.</p>
</td></tr>
<tr><td><code>components</code></td>
<td>
<p>the components of the standardized license spec.</p>
</td></tr>
<tr><td><code>expansions</code></td>
<td>
<p>the expansions of the components of the standardized
license spec.</p>
</td></tr>
<tr><td><code>is_verified</code></td>
<td>
<p>a logical indicating whether the given string can
be verified to specify a FOSS license.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from section 'Licenses' of 'Writing R Extensions':
analyze_license("GPL-2")
analyze_license("LGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License")
analyze_license("GPL-2 | file LICENCE")
analyze_license("GPL (&gt;= 2) | BSD_3_clause + file LICENSE")
analyze_license("Artistic-2.0 | AGPL-3 + file LICENSE")
</code></pre>

<hr>
<h2 id='loadRdMacros'>Load User-defined Rd Help System Macros</h2><span id='topic+loadRdMacros'></span><span id='topic+loadPkgRdMacros'></span>

<h3>Description</h3>

<p>Loads macros from an &lsquo;<span class="file">.Rd</span>&rsquo; file, or from several &lsquo;<span class="file">.Rd</span>&rsquo;
files contained in a package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadRdMacros(file, macros = TRUE)
loadPkgRdMacros(pkgdir, macros = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadRdMacros_+3A_file">file</code></td>
<td>

<p>A file in Rd format containing macro definitions.
</p>
</td></tr>
<tr><td><code id="loadRdMacros_+3A_macros">macros</code></td>
<td>

<p>optionally, a previous set of macro definitions, in the format
expected by the <code><a href="#topic+parse_Rd">parse_Rd</a></code> <code>macros</code> argument. 
<code>loadPkgRdMacros</code> loads the system Rd macros by default.
</p>
</td></tr>
<tr><td><code id="loadRdMacros_+3A_pkgdir">pkgdir</code></td>
<td>

<p>The base directory of a source package or an installed package.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Rd files parsed by these functions should contain only macro
definitions; a warning will be issued if anything else other than
comments or white space is found.
</p>
<p>The <code>macros</code> argument may be a filename of a base set of macros,
or the result of a previous call to <code>loadRdMacros</code> or
<code>loadPkgRdMacros</code> in the same session.  These results should be
assumed to be valid only within the current session.
</p>
<p>The <code>loadPkgRdMacros</code> function first looks for an <code>"RdMacros"</code>
entry in the package &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file.  If present, it should
contain a comma-separated list of other package names; their macros
will be loaded before those of the current package.  It will then look
in the current package for &lsquo;<span class="file">.Rd</span>&rsquo; files in the &lsquo;<span class="file">man/macros</span>&rsquo;
or &lsquo;<span class="file">help/macros</span>&rsquo; subdirectories, and load those.
</p>


<h3>Value</h3>

<p>These functions each return an environment containing objects with the
names of the newly defined macros from the last file processed.  The
parent environment will be macros from the previous file, and so on.
The first file processed will have <code><a href="base.html#topic+emptyenv">emptyenv</a>()</code> as its
parent.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>References</h3>

<p>See the &lsquo;Writing R Extensions&rsquo; manual for the syntax of Rd files,
or <a href="https://developer.r-project.org/parseRd.pdf">https://developer.r-project.org/parseRd.pdf</a> for a technical
discussion.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_Rd">parse_Rd</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- tempfile()
writeLines(r"(
\newcommand{\Rlogo}{
  \if{html}{\figure{Rlogo.svg}{options: width=100 alt="R logo"}}
  \if{latex}{\figure{Rlogo.pdf}{options: width=0.5in}}
}
)", f)
m &lt;- loadRdMacros(f)
ls(m)
ls(parent.env(m))
ls(parent.env(parent.env(m)))
parse_Rd(textConnection(r"(\Rlogo)"), fragment = TRUE, macros = m)
</code></pre>

<hr>
<h2 id='make_translations_pkg'>Package the Current Translations in the <span class="rlang"><b>R</b></span> Sources</h2><span id='topic+make_translations_pkg'></span>

<h3>Description</h3>

<p>A utility for R Core members to prepare a package of updated translations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_translations_pkg(srcdir, outDir = ".", append = "-1")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_translations_pkg_+3A_srcdir">srcdir</code></td>
<td>
<p>The <span class="rlang"><b>R</b></span> source directory.</p>
</td></tr>
<tr><td><code id="make_translations_pkg_+3A_outdir">outDir</code></td>
<td>
<p>The directory into which to place the prepared package.</p>
</td></tr>
<tr><td><code id="make_translations_pkg_+3A_append">append</code></td>
<td>
<p>The suffix for the package version number,
e.g. &lsquo;<span class="samp">&#8288;3.0.0-1&#8288;</span>&rsquo; will be the default in <span class="rlang"><b>R</b></span> 3.0.0.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This extracts the translations in a current <span class="rlang"><b>R</b></span> source distribution and
packages them as a source package called <span class="pkg">translations</span> which can
be distributed on CRAN and installed by
<code><a href="utils.html#topic+update.packages">update.packages</a></code>.  This allows e.g. the translations
shipped in <span class="rlang"><b>R</b></span> 3.x.y to be updated to those currently in
&lsquo;<span class="samp">&#8288;R-patched&#8288;</span>&rsquo;, even by a user without administrative privileges.
</p>
<p>The package has a &lsquo;<span class="samp">&#8288;Depends&#8288;</span>&rsquo; field which restricts it to versions
&lsquo;<span class="samp">&#8288;3.x.*&#8288;</span>&rsquo; for a single <code>x</code>.
</p>

<hr>
<h2 id='makeLazyLoading'>Lazy Loading of Packages</h2><span id='topic+makeLazyLoading'></span>

<h3>Description</h3>

<p>Tools for lazy loading of packages from a database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeLazyLoading(package, lib.loc = NULL, compress = TRUE,
                keep.source = getOption("keep.source.pkgs"),
                keep.parse.data = getOption("keep.parse.data.pkgs"),
                set.install.dir = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makeLazyLoading_+3A_package">package</code></td>
<td>
<p>package name string</p>
</td></tr>
<tr><td><code id="makeLazyLoading_+3A_lib.loc">lib.loc</code></td>
<td>
<p>library trees, as in <code>library</code></p>
</td></tr>
<tr><td><code id="makeLazyLoading_+3A_keep.source">keep.source</code></td>
<td>
<p>logical; should sources be kept when saving from source</p>
</td></tr>
<tr><td><code id="makeLazyLoading_+3A_keep.parse.data">keep.parse.data</code></td>
<td>
<p>logical; should parse data be kept with sources
when <code>keep.source</code> is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="makeLazyLoading_+3A_compress">compress</code></td>
<td>
<p>logical; whether to compress entries on the database.</p>
</td></tr>
<tr><td><code id="makeLazyLoading_+3A_set.install.dir">set.install.dir</code></td>
<td>
<p>character or null; if not null, set installation
directory to this value before serializing internal data structures
(for internal use, staged installation)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A tool to set up packages for lazy loading from a database.  For
packages other than <span class="pkg">base</span> you can use
<code>makeLazyLoading(package)</code> to convert them to use lazy loading.
</p>
<p>This is done when a package is installed.
</p>


<h3>Author(s)</h3>

<p>Luke Tierney and Brian Ripley</p>

<hr>
<h2 id='makevars'>User and Site Compilation Variables</h2><span id='topic+makevars_user'></span><span id='topic+makevars_site'></span>

<h3>Description</h3>

<p>Determine the location of the user and site specific &lsquo;<span class="file">Makevars</span>&rsquo;
files for customizing package compilation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makevars_user()
makevars_site()
</code></pre>


<h3>Details</h3>

<p>Package maintainers can use these functions to employ user and site
specific compilation settings also for compilations not using <span class="rlang"><b>R</b></span>'s
mechanisms (in particular, custom compilations in subdirectories of
&lsquo;<span class="file">src</span>&rsquo;), e.g., by adding configure code calling <span class="rlang"><b>R</b></span> with
<code>cat(tools::makevars_user())</code> or
<code>cat(tools::makevars_site())</code>, and if non-empty passing this with
<span class="option">-f</span> to custom Make invocations.
</p>


<h3>Value</h3>

<p>A character string with the path to the user or site specific
&lsquo;<span class="file">Makevars</span>&rsquo; file, or an empty character vector if there is no such
file.
</p>


<h3>See Also</h3>

<p>Section &lsquo;Customizing package compilation&rsquo; in the
&lsquo;R Installation and Administration&rsquo; manual.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
makevars_user()
makevars_site()


</code></pre>

<hr>
<h2 id='matchConcordance'>
Concordance between source and target lines
</h2><span id='topic+matchConcordance'></span><span id='topic+as.character.Rconcordance'></span><span id='topic+as.Rconcordance'></span><span id='topic+as.Rconcordance.default'></span><span id='topic+Rconcordance'></span><span id='topic+activeConcordance'></span><span id='topic+followConcordance'></span>

<h3>Description</h3>

<p>The Rd parser records locations in &lsquo;<span class="file">.Rd</span>&rsquo; files from
which components of the file are read.  Output generators
<code><a href="#topic+Rd2HTML">Rd2HTML</a></code> and <code><a href="#topic+Rd2latex">Rd2latex</a></code> can output
information about these locations as &ldquo;concordances&rdquo; between
source and output lines.  
</p>
<p><code>matchConcordance</code> converts from output locations
to source locations.  The <code>"Rconcordance"</code> method of
<code>as.character</code> produces
strings to embed in output files, and the default method of 
<code>as.Rconcordance</code>
converts these back to objects that can be interpreted
by <code>matchConcordance</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matchConcordance(linenum, concordance)
## S3 method for class 'Rconcordance'
as.character(x, targetfile = "", ...)
as.Rconcordance(x, ...)
followConcordance(concordance, prevConcordance)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="matchConcordance_+3A_linenum">linenum</code></td>
<td>

<p>One or more line numbers being queried.
</p>
</td></tr>
<tr><td><code id="matchConcordance_+3A_concordance">concordance</code></td>
<td>

<p>The concordance data for the file containing the lines: an object
of class <code>"Rconcordance"</code>.
</p>
</td></tr>
<tr><td><code id="matchConcordance_+3A_prevconcordance">prevConcordance</code></td>
<td>

<p>A concordance object retrieved from the current file.
</p>
</td></tr>
<tr><td><code id="matchConcordance_+3A_targetfile">targetfile</code></td>
<td>

<p>The output filename.  
</p>
</td></tr>
<tr><td><code id="matchConcordance_+3A_x">x</code></td>
<td>

<p>The object to convert:  for <code>as.character</code>, an <code>"Rconcordance"</code> object; for <code>as.concordance</code>,
a character vector which contains <code>as.character</code> output, typically in comments.
</p>
</td></tr>
<tr><td><code id="matchConcordance_+3A_...">...</code></td>
<td>

<p>Further arguments passed to other methods.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The correspondence between target lines and source lines 
in Rd file conversion
is not one to one.  Often a single source line can 
lead to the generation of multiple output lines, and 
sometimes more than one source line triggers output
on the same output line.
</p>
<p><code>matchConcordance</code> converts from target lines to
source lines.  This can be used to help in understanding how 
particular output lines
depend on the source, e.g. when an error is found in the 
output file.  When more than one line contributes
to the output, the last one will be returned.
</p>
<p>The <code>"Rconcordance"</code> method of <code>as.character</code> converts a
concordance object
to strings suitable for embedding (e.g. in comments) in an
output file.
</p>
<p>The default method of <code>as.Rconcordance</code> searches for strings matching the
pattern of <code>as.character.Rconcordance</code> output, then converts
those lines back to a single concordance.
</p>
<p><code>followConcordance</code> is used when a file is transformed
more than once.  The first transformation records a
concordance in the file which is read as <code>prevConcordance</code>. 
<code>followConcordance</code> chains this with the current 
<code>concordance</code>, relating the final result to the original
source.
</p>
<p>There are 3 kinds of objects used to hold concordances.  
</p>
<p>Objects of class <code>"activeConcordance"</code> are internal to <span class="pkg">tools</span>; they
are used by <code>Rd2HTML</code> and <code>Rd2latex</code> while building the output
file and saving links to the source file.
</p>
<p>Objects of class <code>"Rconcordance"</code> are visible to users.
They are list objects with the following three fields:
</p>

<dl>
<dt><code>offset</code></dt><dd><p>The number of lines of output before the
first one corresponding to this concordance.</p>
</dd>
<dt><code>srcLine</code></dt><dd><p>For each line of output after the offset,
the corresponding input file line number.  There may be more lines
of output than the length of <code>srcLine</code>, in which case nothing
can be inferred about the source of those lines.</p>
</dd>
<dt><code>srcFile</code></dt><dd><p>A vector of filenames of length 1 or the
same length as <code>srcLine</code> giving the source file(s) for
each output line.</p>
</dd>
</dl>

<p>Concordance strings are produced by the <code>"Rconcordance"</code> method of
<code>as.character</code>; 
they are simply character vectors encoding the concordance data.
The default method of the <code>as.concordance</code> generic function 
converts them to <code>"Rconcordance"</code> objects.
</p>


<h3>Value</h3>

<p><code>matchConcordance</code> returns a character array with one row 
per input <code>linenum</code> entry and
two columns, <code>"srcFile"</code> and <code>"srcLine"</code>.
</p>
<p>For the <code>"Rconcordance"</code> method of <code>as.character</code>, a character
vector used (e.g. in <code><a href="utils.html#topic+Sweave">Sweave</a></code>) to embed 
the concordance in a file.
</p>
<p>For <code>as.concordance</code>, an <code>"Rconcordance"</code> object, or <code>NULL</code>
if no concordance strings are found.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Rd2HTML">Rd2HTML</a></code>, <code><a href="#topic+Rd2latex">Rd2latex</a></code>
</p>

<hr>
<h2 id='md5sum'>Compute MD5 Checksums</h2><span id='topic+md5sum'></span>

<h3>Description</h3>

<p>Compute the 32-byte MD5 hashes of one or more files, or a raw vector of bytes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>md5sum(files, bytes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="md5sum_+3A_files">files</code></td>
<td>
<p>character. The paths of file(s) whose contents are to be hashed.</p>
</td></tr>
<tr><td><code id="md5sum_+3A_bytes">bytes</code></td>
<td>
<p>raw. Bytes to be hashed.
NB: <code>bytes</code> and <code>files</code> are mutually exclusive.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A MD5 &lsquo;hash&rsquo; or &lsquo;checksum&rsquo; or &lsquo;message digest&rsquo; is
a 128-bit summary of the file contents represented by 32 hexadecimal
digits.  Files with different MD5 sums are different: only very
exceptionally (and usually with the intent to deceive) are those with
the same sums different.
</p>
<p>On Windows all files are read in binary mode (as the <code>md5sum</code>
utilities there do): on other OSes the files are read in the default
mode (almost always text mode where there is more than one).
</p>
<p>MD5 sums are used as a check that <span class="rlang"><b>R</b></span> packages have been unpacked
correctly and not subsequently accidentally modified.
</p>


<h3>Value</h3>

<p>If used with <code>files</code>,
a character vector of the same length as <code>files</code>, with names
equal to <code>files</code> (possibly expanded).  The elements will be
<code>NA</code> for non-existent or unreadable files, otherwise a
32-character string of hexadecimal digits.
</p>
<p>For <code>bytes</code> the result is a single 32-character string.
</p>


<h3>Source</h3>

<p>The underlying C code was written by Ulrich Drepper and extracted from
a 2001 release of <code>glibc</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+checkMD5sums">checkMD5sums</a></code>, <code><a href="#topic+sha256sum">sha256sum</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as.vector(md5sum(dir(R.home(), pattern = "^COPY", full.names = TRUE)))
md5sum(bytes=raw())
md5sum(bytes=charToRaw("abc"))
</code></pre>

<hr>
<h2 id='package_dependencies'>Computations on the Dependency Hierarchy of Packages</h2><span id='topic+package_dependencies'></span>

<h3>Description</h3>

<p>Find (recursively) dependencies or reverse dependencies of packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_dependencies(packages = NULL, db = NULL, which = "strong",
	             recursive = FALSE, reverse = FALSE,
                     verbose = getOption("verbose"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="package_dependencies_+3A_packages">packages</code></td>
<td>
<p>a character vector of package names.</p>
</td></tr>
<tr><td><code id="package_dependencies_+3A_db">db</code></td>
<td>
<p>character matrix as from <code><a href="utils.html#topic+available.packages">available.packages</a>()</code>
(with the default <code>NULL</code> the results of this call)
or data frame variants thereof.  Alternatively, a package database
like the one available from
<a href="https://cran.r-project.org/web/packages/packages.rds">https://cran.r-project.org/web/packages/packages.rds</a>.
</p>
</td></tr>
<tr><td><code id="package_dependencies_+3A_which">which</code></td>
<td>
<p>a character vector listing the types of
dependencies, a subset of
<code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string <code>"all"</code> is shorthand for that vector,
character string <code>"most"</code> for the same vector without
<code>"Enhances"</code>,
character string <code>"strong"</code> (default) for the first three
elements of that vector.
</p>
</td></tr>
<tr><td><code id="package_dependencies_+3A_recursive">recursive</code></td>
<td>
<p>a logical indicating whether (reverse) dependencies
of (reverse) dependencies (and so on) should be included, or a
character vector like <code>which</code> indicating the type of (reverse)
dependencies to be added recursively.</p>
</td></tr>
<tr><td><code id="package_dependencies_+3A_reverse">reverse</code></td>
<td>
<p>logical: if <code>FALSE</code> (default), regular
dependencies are calculated, otherwise reverse dependencies.</p>
</td></tr>
<tr><td><code id="package_dependencies_+3A_verbose">verbose</code></td>
<td>
<p>logical indicating if output should monitor the package
search cycles.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Named list with one element for each package in argument <code>packages</code>,
each consists of a character vector naming the (recursive) (reverse) dependencies
of that package.
</p>
<p>For given packages which are not found in the db, <code>NULL</code> entries are returned,
as opposed to <code>character(0)</code> entries which indicate no dependencies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dependsOnPkgs">dependsOnPkgs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
myPkgs &lt;- c("MASS", "Matrix", "KernSmooth", "class", "cluster", "codetools")
pdb &lt;- available.packages(repos = findCRANmirror("web"))
system.time(
dep1 &lt;- package_dependencies(myPkgs, db = pdb) # all arguments at default
) # very fast
utils::str(dep1, vec.len=10)

system.time( ## reverse dependencies, recursively --- takes much longer:
deps &lt;- package_dependencies(myPkgs, db = pdb, which = "most",
                             recursive = TRUE, reverse = TRUE)
) # seen ~ 10 seconds

lengths(deps) # 2020-05-03: all are 16053, but codetools with 16057

## install.packages(dependencies = TRUE) installs 'most' dependencies
## and the strong recursive dependencies of these: these dependencies
## can be obtained using 'which = "most"' and 'recursive = "strong"'.
## To illustrate on the first packages with non-missing Suggests:
packages &lt;- pdb[head(which(!is.na(pdb[, "Suggests"]))), "Package"]
package_dependencies(packages, db = pdb,
                     which = "most", recursive = "strong")

</code></pre>

<hr>
<h2 id='package_native_routine_registration_skeleton'>
Write Skeleton for Adding Native Routine Registration to a Package
</h2><span id='topic+package_native_routine_registration_skeleton'></span>

<h3>Description</h3>

<p>Write a skeleton for adding native routine registration to a package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>package_native_routine_registration_skeleton(dir, con = stdout(),
    align = TRUE, character_only = TRUE, include_declarations = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="package_native_routine_registration_skeleton_+3A_dir">dir</code></td>
<td>

<p>Top-level directory of a package.
</p>
</td></tr>
<tr><td><code id="package_native_routine_registration_skeleton_+3A_con">con</code></td>
<td>

<p>Connection on which to write the skeleton: can be specified as a
file path.
</p>
</td></tr>
<tr><td><code id="package_native_routine_registration_skeleton_+3A_align">align</code></td>
<td>

<p>Logical: should the registration tables be lined up in three
columns each?
</p>
</td></tr>
<tr><td><code id="package_native_routine_registration_skeleton_+3A_character_only">character_only</code></td>
<td>

<p>Logical: should only <code>.NAME</code> arguments specified by character
strings (and not as names of <span class="rlang"><b>R</b></span> objects nor expressions) be extracted?
</p>
</td></tr>
<tr><td><code id="package_native_routine_registration_skeleton_+3A_include_declarations">include_declarations</code></td>
<td>

<p>Logical: should the output include declarations (also known as
&lsquo;prototypes&rsquo;) for the registered routines?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Registration is described in section
&lsquo;Registering native routines&rsquo; of
&lsquo;Writing R Extensions&rsquo;.
This function produces a skeleton of the C code which
needs to be added to enable registration, conventionally as file
&lsquo;<span class="file">src/init.c</span>&rsquo; or appended to the sole C file of the package.
</p>
<p>This function examines the code in the &lsquo;<span class="file">R</span>&rsquo; directory of the
package for calls to <code>.C</code>, <code>.Fortran</code>, <code>.Call</code> and
<code>.External</code> and creates registration information for those it can
make sense of.  If the number of arguments used cannot be determined
it will be recorded as <code>-1</code>: such values should be corrected.
</p>
<p>Optionally the skeleton will include declarations for the registered
routines: they should be checked against the C/Fortran source code,
not least as the number of arguments is taken from the <span class="rlang"><b>R</b></span> code.  For
<code>.Call</code> and <code>.External</code> calls they will often suffice, but
for <code>.C</code> and <code>.Fortran</code> calls the &lsquo;<span class="samp">&#8288;void *&#8288;</span>&rsquo; arguments
would ideally be replaced by the actual types.  Otherwise declarations
need to be included (they may exist earlier in that file if appending
to a file, or in a header file which can be included in
&lsquo;<span class="file">init.c</span>&rsquo;).
</p>
<p>The default value of <code>character_only</code> is appropriate when working
on a package without any existing registration:
<code>character_only = FALSE</code>
can be used to suggest updates for a package which has been
extended since registration.  For the default value, if <code>.NAME</code>
values are found which are not character strings (e.g. names
or expressions) this is noted via a comment in the output.
</p>
<p>Packages which used the earlier form of creating <span class="rlang"><b>R</b></span> objects for native
symbols <em>via</em> additional arguments in a <code>useDynLib</code>
directive will probably most easily be updated to use registration
with <code>character_only = FALSE</code>.
</p>
<p>If an entry point is used with different numbers of arguments in the
package's <span class="rlang"><b>R</b></span> code, an entry in the table (and optionally, a
declaration) is made for each number, and a comment placed in the
output.  This needs to be resolved: only <code>.External</code> calls can
have a variable number of arguments, which should be declared as
<code>-1</code>.
</p>
<p>A surprising number of <abbr>CRAN</abbr> packages had calls in <span class="rlang"><b>R</b></span> code to
native routines not included in the package, which will lead to a
&lsquo;loading failed&rsquo; error during package installation when the
registration C code is added.
</p>
<p>Calls which do not name a routine such as <code>.Call(...)</code> will be
silently ignored.
</p>


<h3>Value</h3>

<p>None: the output is written to the connection <code>con</code>.
</p>


<h3>Extracting C/C++ prototypes</h3>

<p>There are several tools available to extract function declarations
from C or C++ code.
</p>
<p>For C code one can use <code>cproto</code>
(<a href="https://invisible-island.net/cproto/cproto.html">https://invisible-island.net/cproto/cproto.html</a>; Windows
executables are available), for
example
</p>
<pre>
    cproto -I/path/to/R/include -e *.c
  </pre>
<p><code>ctags</code> (commonly distributed with the OS)
covers C and C++., using something like
</p>
<pre>
    ctags -x *.c
  </pre>
<p>to list all function usages.
(The &lsquo;Exuberant&rsquo; version allows a lot more control.)
</p>


<h3>Extracting Fortran prototypes</h3>

<p><code>gfortran</code> 9.2 and later can extract C prototypes for Fortran
subroutines with a special flag:
</p>
<pre>
    gfortran -c -fc-prototypes-external file.f
  </pre>
<p>although ironically not for functions declared <code>bind(C)</code>.
</p>


<h3>Note</h3>

<p>This only examines the &lsquo;<span class="file">R</span>&rsquo; directory: it will not find
e.g. <code>.Call</code> calls used directly in examples, tests <em>etc</em>.
</p>
<p>Static code analysis is used to find the <code>.C</code> etc calls: it
<em>will</em> find those in parts of the <span class="rlang"><b>R</b></span> code &lsquo;commented out&rsquo;
by inclusion in <code>if(FALSE) { ... }</code>.
On the other hand, it will fail to find the entry points in
constructs like
</p>
<pre>
    .Call(if(int) "rle_i" else "rle_d", i, force)
  </pre>
<p>and does not know the value of variables in calls like
</p>
<pre>
    .Call (cfunction, ...)
    .Call(..., PACKAGE="sparseLTSEigen")
  </pre>
<p>(but if <code>character_only</code> is false, will extract the first as
<code>"cfunction"</code>).  Calls which have not been fully resolved will be
noted <em>via</em> comments in the output file.
</p>
<p>Call to entry points in other packages will be ignored if they have an
explicit (character string) <code>PACKAGE</code> argument.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+package.skeleton">package.skeleton</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## with a completed splines/DESCRIPTION file,
tools::package_native_routine_registration_skeleton('splines',,,FALSE)
## produces
#include &lt;R.h&gt;
#include &lt;Rinternals.h&gt;
#include &lt;stdlib.h&gt; // for NULL
#include &lt;R_ext/Rdynload.h&gt;

/* FIXME: 
   Check these declarations against the C/Fortran source code.
*/

/* .Call calls */
extern SEXP spline_basis(SEXP, SEXP, SEXP, SEXP);
extern SEXP spline_value(SEXP, SEXP, SEXP, SEXP, SEXP);

static const R_CallMethodDef CallEntries[] = {
    {"spline_basis", (DL_FUNC) &amp;spline_basis, 4},
    {"spline_value", (DL_FUNC) &amp;spline_value, 5},
    {NULL, NULL, 0}
};

void R_init_splines(DllInfo *dll)
{
    R_registerRoutines(dll, NULL, CallEntries, NULL, NULL);
    R_useDynamicSymbols(dll, FALSE);
}

## End(Not run)</code></pre>

<hr>
<h2 id='parse_Rd'>Parse an Rd File</h2><span id='topic+parse_Rd'></span><span id='topic+print.Rd'></span><span id='topic+as.character.Rd'></span>

<h3>Description</h3>

<p>This function reads an R documentation (Rd) file and parses it, for
processing by other functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_Rd(file, srcfile = NULL, encoding = "unknown",
         verbose = FALSE, fragment = FALSE, warningCalls = TRUE,
	 macros = file.path(R.home("share"), "Rd", "macros", "system.Rd"),
         permissive = FALSE)
## S3 method for class 'Rd'
print(x, deparse = FALSE, ...)
## S3 method for class 'Rd'
as.character(x, deparse = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parse_Rd_+3A_file">file</code></td>
<td>
<p>A filename or text-mode connection.  At present filenames
work best.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_srcfile">srcfile</code></td>
<td>
<p><code>NULL</code>, or a <code>"srcfile"</code> object.  See the
&lsquo;Details&rsquo; section.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_encoding">encoding</code></td>
<td>
<p>Encoding to be assumed for input strings.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_verbose">verbose</code></td>
<td>
<p>Logical indicating whether detailed parsing
information should be printed.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_fragment">fragment</code></td>
<td>
<p>Logical indicating whether file represents a complete
Rd file, or a fragment.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_warningcalls">warningCalls</code></td>
<td>
<p>Logical: should parser warnings include the call?</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_macros">macros</code></td>
<td>
<p>Filename or environment from which to load additional
macros, or a logical value.  See the Details below.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_permissive">permissive</code></td>
<td>
<p>Logical indicating that unrecognized macros
should be treated as text with no warning.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_x">x</code></td>
<td>
<p>An object of class Rd.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_deparse">deparse</code></td>
<td>
<p>If <code>TRUE</code>, attempt to reinstate the escape characters
so that the resulting characters will parse to the same object.</p>
</td></tr>
<tr><td><code id="parse_Rd_+3A_...">...</code></td>
<td>
<p>Further arguments to be passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function parses &lsquo;<span class="file">Rd</span>&rsquo; files according to the specification given
in <a href="https://developer.r-project.org/parseRd.pdf">https://developer.r-project.org/parseRd.pdf</a>.
</p>
<p>It generates a warning for each parse error and attempts to continue
parsing.  In order to continue, it is generally necessary to drop some
parts of the file, so such warnings should not be ignored.
</p>
<p>Files without a marked encoding are by default assumed to be in the
native encoding.  An alternate default can be set using the
<code>encoding</code> argument.  All text in files is translated to the
UTF-8 encoding in the parsed object.
</p>
<p>As from <span class="rlang"><b>R</b></span> version 3.2.0, User-defined macros may be given in a
separate file using &lsquo;<span class="samp">&#8288;\newcommand&#8288;</span>&rsquo; or &lsquo;<span class="samp">&#8288;\renewcommand&#8288;</span>&rsquo;.
An environment may also be given:  it would be produced by
<code><a href="#topic+loadRdMacros">loadRdMacros</a></code>, <code><a href="#topic+loadPkgRdMacros">loadPkgRdMacros</a></code>, or
by a previous call to <code>parse_Rd</code>.  If a logical value
is given, only the default built-in macros will be used;
<code>FALSE</code> indicates that no <code>"macros"</code> attribute
will be returned with the result.
</p>
<p>The <code>permissive</code> argument allows text to be parsed that is
not completely in Rd format.  Typically it would be LaTeX code,
used in an Rd fragment, e.g. in a <code><a href="utils.html#topic+bibentry">bibentry</a></code>.
With <code>permissive = TRUE</code>, this will be passed through as plain
text.  Since <code>parse_Rd</code> doesn't know how many arguments
belong in LaTeX macros, it will guess based on the presence
of braces after the macro; this is not infallible.
</p>


<h3>Value</h3>

<p><code>parse_Rd</code> returns an object of class <code>"Rd"</code>.  The
internal format of this object is subject to change.  The
<code>as.character()</code> and <code>print()</code> methods defined for the
class return character vectors and print them, respectively.
</p>
<p>Unless <code>macros = FALSE</code>, the object will have an attribute
named <code>"macros"</code>, which is an environment containing the
macros defined in <code>file</code>, in a format that can be used for
further <code>parse_Rd</code> calls  in the same session.  It is not
guaranteed to work if saved to a file and reloaded in a different
session.
</p>


<h3>Author(s)</h3>

<p> Duncan Murdoch </p>


<h3>References</h3>

 <p><a href="https://developer.r-project.org/parseRd.pdf">https://developer.r-project.org/parseRd.pdf</a> </p>


<h3>See Also</h3>

<p><code><a href="#topic+Rd2HTML">Rd2HTML</a></code> for the converters that use the output of
<code>parse_Rd()</code>.
</p>

<hr>
<h2 id='parseLatex'>Experimental Functions to Work with LaTeX Code</h2><span id='topic+parseLatex'></span><span id='topic+deparseLatex'></span><span id='topic+latexToUtf8'></span>

<h3>Description</h3>

<p>The <code>parseLatex</code> function parses LaTeX source, producing a
structured object; <code>deparseLatex</code> reverses the process.  The
<code>latexToUtf8</code> function takes a LaTeX object, and processes a number
of different macros to convert them into the corresponding UTF-8
characters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseLatex(text, filename = "text",
           verbose = FALSE,
           verbatim = c("verbatim", "verbatim*",
                        "Sinput", "Soutput"),
           verb = "\\Sexpr",
           defcmd = c("\\newcommand", "\\renewcommand",
                      "\\providecommand", "\\def", "\\let"),
           defenv = c("\\newenvironment",
                      "\\renewenvironment"))
deparseLatex(x, dropBraces = FALSE)
latexToUtf8(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parseLatex_+3A_text">text</code></td>
<td>

<p>A character vector containing LaTeX source code.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_filename">filename</code></td>
<td>

<p>No longer used.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_verbose">verbose</code></td>
<td>

<p>If <code>TRUE</code>, print debug error messages.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_verbatim">verbatim</code></td>
<td>

<p>A character vector containing the names of LaTeX environments holding verbatim text.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_verb">verb</code></td>
<td>

<p>A character vector containing LaTeX macros that should be 
assumed to hold verbatim text.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_defcmd">defcmd</code>, <code id="parseLatex_+3A_defenv">defenv</code></td>
<td>

<p>Character vectors containing LaTeX macros that should be assumed
to define macros or environments respectively.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_x">x</code></td>
<td>

<p>A <code>"LaTeX"</code> object.
</p>
</td></tr>
<tr><td><code id="parseLatex_+3A_dropbraces">dropBraces</code></td>
<td>

<p>Drop unnecessary braces when displaying a <code>"LaTeX"</code> object.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The parser does not recognize all legal LaTeX code, only relatively
simple examples.  It does not associate arguments with macros, that
needs to be done after parsing, with knowledge of the definitions of
each macro.  The main intention for this function is to process simple
LaTeX code used in bibliographic references, not fully general LaTeX
documents.
</p>
<p>Verbose text is allowed in three forms:  the <code style="white-space: pre;">&#8288;\verb&#8288;</code> macro (with
single character delimiters), environments whose names are listed
in the <code>verbatim</code> argument, and other macros (with 
brace delimiters) whose names are listed in the <code>verb</code>
argument.
</p>


<h3>Value</h3>

<p>The <code>parseLatex()</code> function returns a recursive object of class
<code>"LaTeX"</code>.  Each of the entries in this object will have a
<code>"latex_tag"</code> attribute identifying its syntactic role.
</p>
<p>The <code>deparseLatex()</code> function returns a single element character
vector, possibly containing embedded newlines.
</p>
<p>The <code>latexToUtf8()</code> function returns a modified version of the
<code>"LaTeX"</code> object that was passed to it.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
latex &lt;- parseLatex("fran\\c{c}ais")
deparseLatex(latexToUtf8(latex))
</code></pre>

<hr>
<h2 id='pkg2HTML'> Rd Converters </h2><span id='topic+pkg2HTML'></span>

<h3>Description</h3>

<p>Generate a single-page HTML reference manual from the Rd sources
contained in an installed or source R package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkg2HTML(package, dir = NULL, lib.loc = NULL,
         outputEncoding = "UTF-8",
         stylesheet = file.path(R.home("doc"), "html", "R-nav.css"),
         hooks = list(pkg_href = function(pkg) sprintf("%s.html", pkg)),
         texmath = getOption("help.htmlmath"),
         prism = TRUE,
         out = NULL,
         toc_entry = c("title", "name"),
         ...,
         Rhtml = FALSE,
         mathjax_config = file.path(R.home("doc"), "html", "mathjax-config.js"),
         include_description = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pkg2HTML_+3A_package">package</code></td>
<td>
<p> typically a character string giving the name of an
installed package. Can also be a file path or URL pointing to a source
tarball (this feature is experimental).
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_dir">dir</code></td>
<td>
<p> character string giving the path to a directory containing
an installed or source package.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector describing the location of <span class="rlang"><b>R</b></span>
library trees to search through, or <code>NULL</code>. Passed on to
<code><a href="base.html#topic+find.package">find.package</a></code> and <code><a href="#topic+Rd_db">Rd_db</a></code>.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_outputencoding">outputEncoding</code></td>
<td>
<p> character string; see <code><a href="#topic+Rd2HTML">Rd2HTML</a></code>. </p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_stylesheet">stylesheet</code></td>
<td>
<p> character string giving URL containing CSS style
information.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_hooks">hooks</code></td>
<td>
<p>A list of functions controlling details of
output. Currently the only component used is <code>pkg_href</code>, which
is used to determine the output HTML file path given a package name
as input.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_texmath">texmath</code></td>
<td>
<p> character string controlling math rendering library to
be used, either <code>"katex"</code> or <code>"mathjax"</code>. The default is
to use <code>"katex"</code>, unless the package appears to use the
<code><a href="mathjaxr.html#topic+mathjaxr">mathjaxr</a></code> package in at least one of its
documentation files. The support for MathJax is experimental and may
not work well.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_prism">prism</code></td>
<td>
<p> logical flag controlling code highlighting, as described in
<code><a href="#topic+Rd2HTML">Rd2HTML</a></code>.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_out">out</code></td>
<td>
<p>a filename or connection object to which to write the
output.  By default (<code>NULL</code>), the filename is inferred from
<code>hooks$pkg_href</code>, which defaults to &lsquo;<span class="file"><var>pkg</var>.html</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_toc_entry">toc_entry</code></td>
<td>
<p> Determines whether the entry for a help page in the
table of contents is the name of the help page or its title. </p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_...">...</code></td>
<td>
<p>additional arguments, passed on to
<code><a href="#topic+Rd2HTML">Rd2HTML</a></code>. The <code>stages</code> argument, if specified, is
passed on to <code><a href="#topic+Rd_db">Rd_db</a></code>.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_rhtml">Rhtml</code></td>
<td>
<p>logical: whether the output is intended to be a Rhtml
file that can be processed using <a href="https://CRAN.R-project.org/package=knitr"><span class="pkg">knitr</span></a>. If <code>TRUE</code>, the
examples section is wrapped inside a <code>rcode</code> block.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_mathjax_config">mathjax_config</code></td>
<td>
<p> character string giving path of file containing
configuration instructions for MathJax. Relevant only if
<code>texmath = "mathjax"</code>.
</p>
</td></tr>
<tr><td><code id="pkg2HTML_+3A_include_description">include_description</code></td>
<td>
<p> logical flag indicating whether the output
should begin with the contents of the <code>DESCRIPTION</code> file.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>pkg2HTML</code> function is intended to produce a single-page HTML
reference manual for a given package, with links to other
packages. The URLs of links to external packages are controlled by the
provided hooks.
</p>
<p>The handling of <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code>-s are necessarily incomplete, but can be
controlled to some extent by specifying the <code>stages</code>
argument. Best results are likely for installed packages.
</p>


<h3>Value</h3>

<p>The name of the output file (invisibly).
</p>


<h3>Author(s)</h3>

<p>Deepayan Sarkar
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_Rd">parse_Rd</a></code>, <code><a href="#topic+Rd_db">Rd_db</a></code>,
<code><a href="#topic+Rd2HTML">Rd2HTML</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pkg2HTML("tools", out = tempfile(fileext = ".html")) |&gt; browseURL()

</code></pre>

<hr>
<h2 id='pskill'>Kill a Process</h2><span id='topic+pskill'></span><span id='topic+SIGHUP'></span><span id='topic+SIGINT'></span><span id='topic+SIGQUIT'></span><span id='topic+SIGKILL'></span><span id='topic+SIGTERM'></span><span id='topic+SIGSTOP'></span><span id='topic+SIGTSTP'></span><span id='topic+SIGCONT'></span><span id='topic+SIGCHLD'></span><span id='topic+SIGUSR1'></span><span id='topic+SIGUSR2'></span>

<h3>Description</h3>

<p><code>pskill</code> sends a signal to a process, usually to terminate it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pskill(pid, signal = SIGTERM)

SIGHUP
SIGINT
SIGQUIT
SIGKILL
SIGTERM
SIGSTOP
SIGTSTP
SIGCHLD
SIGUSR1
SIGUSR2
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pskill_+3A_pid">pid</code></td>
<td>
<p>positive integers: one or more process IDs as returned by
<code><a href="base.html#topic+Sys.getpid">Sys.getpid</a></code>.</p>
</td></tr>
<tr><td><code id="pskill_+3A_signal">signal</code></td>
<td>
<p>integer, most often one of the symbolic constants.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Signals are a C99 concept, but only a small number are required to be
supported (of those listed, only <code>SIGINT</code> and <code>SIGTERM</code>).
They are much more widely used on POSIX operating systems (which
should define all of those listed here), which also support a
<code>kill</code> system call to send a signal to a process, most often to
terminate it.  Function <code>pskill</code> provides a wrapper: it silently
ignores invalid values of its arguments, including zero or negative
<abbr>pid</abbr>s.
</p>
<p>In normal use on a Unix-alike, <kbd>Ctrl-C</kbd> sends <code>SIGINT</code>,
<kbd>Ctrl-\</kbd> sends <code>SIGQUIT</code> and <kbd>Ctrl-Z</kbd> sends
<code>SIGTSTP</code>: that and <code>SIGSTOP</code> suspend a process which can be
resumed by <code>SIGCONT</code>.
</p>
<p>The signals are small integers, but the actual numeric values are not
standardized (and most do differ between OSes).  The <code>SIG*</code>
objects contain the appropriate integer values for the current platform
(or <code>NA_INTEGER_</code> if the signal is not defined).
</p>
<p>Only <code>SIGINT</code> and <code>SIGTERM</code> will be defined on Windows, and
<code>pskill</code> will always use the Windows system call
<code>TerminateProcess</code>.
</p>


<h3>Value</h3>

<p>A logical vector of the same length as <code>pid</code>,
<code>TRUE</code> (for success) or <code>FALSE</code>, invisibly.
</p>


<h3>See Also</h3>

<p>Package <span class="pkg">parallel</span> has several means to launch child processes
which record the process IDs.
</p>
<p><code><a href="#topic+psnice">psnice</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
pskill(c(237, 245), SIGKILL)

## End(Not run)</code></pre>

<hr>
<h2 id='psnice'>Get or Set the Priority (Niceness) of a Process</h2><span id='topic+psnice'></span>

<h3>Description</h3>

<p>Get or set the &lsquo;niceness&rsquo; of the current process, or one or
more other processes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psnice(pid = Sys.getpid(), value = NA_integer_)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="psnice_+3A_pid">pid</code></td>
<td>
<p>positive integers: the process IDs of one of more
processes: defaults to the <span class="rlang"><b>R</b></span> session process.</p>
</td></tr>
<tr><td><code id="psnice_+3A_value">value</code></td>
<td>
<p>The niceness to be set, or <code>NA</code> for an enquiry.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>POSIX operating systems have a concept of process priorities, usually
from 0 to 39 (or 40) with 20 being a normal priority and (somewhat
confusingly) larger numeric values denoting lower priority.  To add to
the confusion, there is a &lsquo;niceness&rsquo; value, the amount by which
the priority numerically exceeds 20 (which can be negative).
Processes with high niceness will receive less CPU time than those
with normal priority.  On some OSes, processes with niceness
<code>+19</code> are only run when the system would otherwise be idle.
</p>
<p>On many OSes utilities such as <code>top</code> report the priority and
not the niceness.  Niceness is used by the utility
&lsquo;<span class="file">/usr/bin/renice</span>&rsquo;: &lsquo;<span class="file">/usr/bin/nice</span>&rsquo; (and
<code>/usr/bin/renice -n</code>) specifies an <em>increment</em> in niceness.
</p>
<p>Only privileged users (usually super-users) can lower the niceness.
</p>
<p>Windows has a slightly different concept of &lsquo;priority
classes&rsquo;.  We have mapped the idle priority to niceness <code>19</code>,
&lsquo;below normal&rsquo; to <code>15</code>, normal to <code>0</code>, &lsquo;above
normal&rsquo; to <code>-5</code> and &lsquo;realtime&rsquo; to <code>-10</code>.  Unlike
Unix-alikes, a non-privileged user can increase the priority class on
Windows (but using &lsquo;realtime&rsquo; is inadvisable).
</p>


<h3>Value</h3>

<p>An integer vector of <em>previous</em> niceness values,
<code>NA</code> if unknown for any reason.
</p>


<h3>See Also</h3>

<p>Various functions in package <span class="pkg">parallel</span> create child processes
whose priority may need to be changed.
</p>
<p><code><a href="#topic+pskill">pskill</a></code>.
</p>

<hr>
<h2 id='QC'>QC Checks for R Code and/or Documentation</h2><span id='topic+QC'></span><span id='topic+checkDocFiles'></span><span id='topic+checkDocStyle'></span><span id='topic+checkReplaceFuns'></span><span id='topic+checkS3methods'></span><span id='topic+checkRdContents'></span><span id='topic+nonS3methods'></span><span id='topic+langElts'></span><span id='topic+print.checkDocFiles'></span><span id='topic+print.checkDocStyle'></span><span id='topic+print.checkReplaceFuns'></span><span id='topic+print.checkS3methods'></span><span id='topic+print.checkRdContents'></span>

<h3>Description</h3>

<p>Functions for performing various quality control (QC) checks on R code
and documentation, notably on R packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkDocFiles   (package, dir, lib.loc = NULL, chkInternal = NULL)
checkDocStyle   (package, dir, lib.loc = NULL)
checkReplaceFuns(package, dir, lib.loc = NULL)
checkS3methods  (package, dir, lib.loc = NULL)
checkRdContents (package, dir, lib.loc = NULL, chkInternal = NULL)

langElts
nonS3methods(package)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="QC_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td></tr>
<tr><td><code id="QC_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source (or <em>installed</em> in some cases) directory.  This should contain the subdirectories &lsquo;<span class="file">R</span>&rsquo;
(for R code) and &lsquo;<span class="file">man</span>&rsquo; with <span class="rlang"><b>R</b></span> documentation sources (in Rd
format).  Only used if <code>package</code> is not given.</p>
</td></tr>
<tr><td><code id="QC_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="QC_+3A_chkinternal">chkInternal</code></td>
<td>
<p>logical indicating if Rd files marked with keyword
<code>internal</code> should be checked as well.  If <code>NULL</code>
(default), these are checked &ldquo;specially&rdquo;, ignoring missing
documentation of arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>checkDocFiles</code> checks, for all Rd files in a package, whether all
functions shown in the usage section of the Rd file have a corresponding
<code style="white-space: pre;">&#8288;\alias&#8288;</code>,
and all of their arguments are documented in
the arguments section.  It also reports duplicated entries in the
arguments section, and &lsquo;over-documented&rsquo; arguments which are
given in the arguments section but not in the usage.
</p>
<p><code>checkDocStyle</code> investigates how (S3) methods are shown in the
usages of the Rd files in a package.  It reports the methods shown by
their full name rather than using the Rd <code style="white-space: pre;">&#8288;\method&#8288;</code> markup for
indicating S3 methods.  Earlier versions of <span class="rlang"><b>R</b></span> also reported about
methods shown along with their generic, which typically caused
problems for the documentation of the primary argument in the generic
and its methods.  With <code style="white-space: pre;">&#8288;\method&#8288;</code> now being expanded in a way
that class information is preserved, joint documentation is
no longer necessarily a problem.  (The corresponding information is
still contained in the object returned by <code>checkDocStyle</code>.)
</p>
<p><code>checkReplaceFuns</code> checks whether replacement functions or S3/S4
replacement methods in the package R code have their final argument
named <code>value</code>.
</p>
<p><code>checkS3methods</code> checks whether all S3 methods defined in the
package R code have all arguments of the corresponding generic, with
positional arguments of the generics in the same positions for the
method.  As an exception, the first argument of a formula method
<em>may</em> be called <code>formula</code> even if this is not the name used
by the generic.  The rules when <code>...</code> is involved are subtle:
see the source code.  Functions recognized as S3 generics are those
with a call to <code>UseMethod</code> in their body, internal S3 generics
(see <a href="base.html#topic+InternalMethods">InternalMethods</a>), and S3 group generics (see
<code><a href="base.html#topic+S3groupGeneric">Math</a></code>).  Possible dispatch under a
different name is not taken into account.  The generics are sought
first in the given package, then (if given an installed package) in
the package imports, and finally the namespace environment for the
<span class="pkg">base</span> package.
</p>
<p><code>checkRdContents()</code> checks Rd content, e.g., whether arguments of
functions in the usage section have non empty descriptions.
</p>
<p><code>nonS3methods(package)</code> returns a <code><a href="base.html#topic+character">character</a></code> vector with
the names of the functions in <code>package</code> which &lsquo;look&rsquo; like
S3 methods, but are not.  Using <code>package = NULL</code> returns all
known examples.
</p>
<p><code>langElts</code> is a character vector of names of &ldquo;language
elements&rdquo; of <span class="rlang"><b>R</b></span>.  These are implemented as &ldquo;very primitive&rdquo;
functions (no argument list; <code><a href="base.html#topic+print">print</a>()</code>ing as
<code>.Primitive("<var>name</var>")</code>).
</p>
<p>If using an installed package, the checks needing access to all <span class="rlang"><b>R</b></span>
objects of the package will load the package (unless it is the
<span class="pkg">base</span> package), after possibly detaching an already loaded
version of the package.
</p>


<h3>Value</h3>

<p>The functions return objects of class the same as the respective
function names containing the information about problems detected.
There are <code>print</code> methods for nicely displaying the information
contained in such objects.
</p>

<hr>
<h2 id='R'>Call Function in Inferior R Process</h2><span id='topic+R'></span>

<h3>Description</h3>

<p>Call a function with given arguments in a new (&ldquo;inferior&rdquo;) R
process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>R(fun, args = list(), opts = "--no-save --no-restore", 
  env = character(), arch = "", drop = TRUE, timeout = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="R_+3A_fun">fun</code></td>
<td>
<p>a function to call in the inferior R process.</p>
</td></tr>
<tr><td><code id="R_+3A_args">args</code></td>
<td>
<p>a list of arguments to the function call.</p>
</td></tr>
<tr><td><code id="R_+3A_opts">opts</code></td>
<td>
<p>a character vector of command line options to use when
starting the inferior R process.</p>
</td></tr>
<tr><td><code id="R_+3A_env">env</code></td>
<td>
<p>a character vector of name=value strings to set environment
variables to use when starting the inferior R process.</p>
</td></tr>
<tr><td><code id="R_+3A_arch">arch</code></td>
<td>
<p>a character string giving a sub-architecture to use for
the inferior R process.</p>
</td></tr>
<tr><td><code id="R_+3A_drop">drop</code></td>
<td>
<p>a logical controlling what gets returned in case of
&ldquo;success&rdquo; (when there was no error running the inferior R
process and the value of the function call is not a condition
object).  By default, in this case only that value is returned.
If <code>drop = FALSE</code>, a list with that value and status, stdout
and stderr of running the inferior R process.</p>
</td></tr>
<tr><td><code id="R_+3A_timeout">timeout</code></td>
<td>
<p>a timeout in seconds for the inferior R process,
ignored if 0.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The given function and argument list are serialized into a
tempfile.
Then, an inferior R process is run via (a wrapper for)
<code><a href="base.html#topic+system2">system2</a>()</code> as controlled by arguments <code>opts</code>,
<code>env</code>, <code>arch</code> and <code>timeout</code>, the input of which loads
the tempfile and calls the function with the argument list.
It is ensured that an appropriate CRAN mirror is set.
</p>


<h3>Value</h3>

<p>In case of &ldquo;success&rdquo; (see above), the value of the function
call if <code>drop = TRUE</code> (default), or a named list with the value
and the status, stdout and stderr of running the inferior R process.
</p>
<p>Otherwise, currently an error condition object inheriting from
<code>"inferiorCallError"</code> with the result (status, stdout and stderr)
of running the inferior R process, and in case this was successfully
run but the value of the function call is a condition object, that
object in the <code>value</code> element.
</p>
<p>What gets returned in the non-success case may change in the future,
perhaps using two different classes for the two cases of
&ldquo;failure&rdquo; (i.e., failure in running the inferior R process or
calling the function).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Compute cos(0) in an inferior R process.
## By default, only return the value of the function call.
R(cos, list(0))
## If 'drop = FALSE', we also get status, stdout and stderr.

R(cos, list(0), drop = FALSE)
    

## A call giving an error:
(e &lt;- tryCatch(R(stop, list("FOOBAR")), error = identity))
## The inferior R process ran successfully:
e$status
## The function call gave an error:
e$value
</code></pre>

<hr>
<h2 id='Rcmd'><code>R CMD</code> Interface</h2><span id='topic+Rcmd'></span>

<h3>Description</h3>

<p>Invoke <code>R CMD</code> tools from within <span class="rlang"><b>R</b></span>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rcmd(args, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rcmd_+3A_args">args</code></td>
<td>
<p>a character vector of arguments to <code>R CMD</code>.</p>
</td></tr>
<tr><td><code id="Rcmd_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code><a href="base.html#topic+system2">system2</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Provides a portable convenience interface to the <code>R CMD</code>
mechanism by invoking the corresponding system commands (using the
version of <span class="rlang"><b>R</b></span> currently used) via <code><a href="base.html#topic+system2">system2</a></code>.
</p>


<h3>Value</h3>

<p>See section &ldquo;Value&rdquo; in <code><a href="base.html#topic+system2">system2</a></code>.
</p>

<hr>
<h2 id='Rd2HTML'> Rd Converters </h2><span id='topic+Rd2txt'></span><span id='topic+Rd2HTML'></span><span id='topic+Rd2ex'></span><span id='topic+Rd2latex'></span>

<h3>Description</h3>

<p>These functions take the output of <code><a href="#topic+parse_Rd">parse_Rd</a>()</code>, an
<code>Rd</code> object, and produce a help page from it.  As they are mainly
intended for internal use, their interfaces are subject to change.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rd2HTML(Rd, out = "", package = "", defines = .Platform$OS.type,
        Links = NULL, Links2 = NULL,
        stages = "render", outputEncoding = "UTF-8",
        dynamic = FALSE, no_links = FALSE, fragment = FALSE,
        stylesheet = if (dynamic) "/doc/html/R.css" else "R.css",
        texmath = getOption("help.htmlmath"),
        concordance = FALSE,
        standalone = TRUE,
        hooks = list(),
        toc = isTRUE(getOption("help.htmltoc")),
        Rhtml = FALSE,
        ...)

Rd2txt(Rd, out = "", package = "", defines = .Platform$OS.type,
       stages = "render", outputEncoding = "",
       fragment = FALSE, options, ...)

Rd2latex(Rd, out = "", defines = .Platform$OS.type,
         stages = "render", outputEncoding = "UTF-8",
         fragment = FALSE, ..., writeEncoding = outputEncoding != "UTF-8",
         concordance = FALSE)

Rd2ex(Rd, out = "", defines = .Platform$OS.type,
      stages = "render", outputEncoding = "UTF-8",
      commentDontrun = TRUE, commentDonttest = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rd2HTML_+3A_rd">Rd</code></td>
<td>
<p> a filename or <code>Rd</code> object to use as input. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_out">out</code></td>
<td>
<p>a filename or connection object to which to write the
output.  The default <code>out = ""</code> is equivalent to
<code>out = <a href="base.html#topic+stdout">stdout</a>()</code>.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_package">package</code></td>
<td>
<p> the package to list in the output. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_defines">defines</code></td>
<td>
<p> string(s) to use in <code style="white-space: pre;">&#8288;#ifdef&#8288;</code> tests. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_stages">stages</code></td>
<td>
<p> at which stage (<code>"build"</code>, <code>"install"</code>, or
<code>"render"</code>) should <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> macros be executed? See the
notes below.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_outputencoding">outputEncoding</code></td>
<td>
<p> see the &lsquo;Encodings&rsquo; section below.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_dynamic">dynamic</code></td>
<td>
<p>logical: set links for render-time resolution by
dynamic help system.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_no_links">no_links</code></td>
<td>
<p>logical: suppress hyperlinks to other help topics.
Used by <code>R CMD <a href="base.html#topic+Rdconv">Rdconv</a></code>.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_fragment">fragment</code></td>
<td>
<p>logical:  should fragments of Rd files be accepted?  See the
notes below.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_stylesheet">stylesheet</code></td>
<td>
<p>character: a URL for a stylesheet to be used in the header
of the HTML output page.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_texmath">texmath</code></td>
<td>
<p>character: controls how mathematics in <code style="white-space: pre;">&#8288;\eqn&#8288;</code> and
<code style="white-space: pre;">&#8288;\deqn&#8288;</code> commands are typeset in HTML output. Useful values
are <code>"katex"</code> (default) and <code>"mathjax"</code> to use
<a href="https://katex.org/">KaTeX</a> or
<a href="https://www.mathjax.org/">MathJax</a> respectively, otherwise
basic substitutions are used. May be ignored under certain
circumstances, e.g., if the help page already uses macros from the
<code><a href="mathjaxr.html#topic+mathjaxr">mathjaxr</a></code> package.
</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_concordance">concordance</code></td>
<td>
<p>Whether concordance data should be embedded in the
output file and attached to the return value.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_standalone">standalone</code></td>
<td>
<p>logical: whether the output is intended to be a
standalone HTML file. If <code>FALSE</code>, the header and footer are
omitted, so that the output can be combined with other fragments.
</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_hooks">hooks</code></td>
<td>
<p>a list of functions controlling details of
output. Currently the only component used is <code>pkg_href</code>, which
is used by <code>pkg2HTML</code> to determine the output HTML file path
given a package name as input. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_toc">toc</code></td>
<td>
<p>logical: whether the HTML output should include a table
of contents. Ignored unless <code>standalone = TRUE</code>. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_rhtml">Rhtml</code></td>
<td>
<p>logical: whether the output is intended to be a Rhtml
file that can be processed using <a href="https://CRAN.R-project.org/package=knitr"><span class="pkg">knitr</span></a>. If <code>TRUE</code>, the
examples section is wrapped inside a <code>rcode</code> block. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_links">Links</code>, <code id="Rd2HTML_+3A_links2">Links2</code></td>
<td>
<p><code>NULL</code> or a named (by topics) character vector of
links, as returned by <code><a href="#topic+findHTMLlinks">findHTMLlinks</a></code>.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_options">options</code></td>
<td>
<p>an optional named list of options to pass to
<code><a href="#topic+Rd2txt_options">Rd2txt_options</a></code>.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_...">...</code></td>
<td>
<p> additional parameters to pass to <code><a href="#topic+parse_Rd">parse_Rd</a></code> when
<code>Rd</code> is a filename. </p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_writeencoding">writeEncoding</code></td>
<td>
<p>logical: should an <code style="white-space: pre;">&#8288;\inputencoding&#8288;</code> line be written
for non-ASCII encodings? LaTeX release 2018-04-01 and later
default to UTF-8; the declaration is obsolete in that case.</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_commentdontrun">commentDontrun</code></td>
<td>
<p>logical: should <code style="white-space: pre;">&#8288;\dontrun&#8288;</code> sections be commented
out?</p>
</td></tr>
<tr><td><code id="Rd2HTML_+3A_commentdonttest">commentDonttest</code></td>
<td>
<p>logical: should <code style="white-space: pre;">&#8288;\donttest&#8288;</code> sections be commented out?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions convert help documents: <code>Rd2HTML</code> produces HTML,
<code>Rd2txt</code> produces plain text, <code>Rd2latex</code> produces LaTeX.
<code>Rd2ex</code> extracts the examples in the format used by
<code><a href="utils.html#topic+example">example</a></code> and <span class="rlang"><b>R</b></span> utilities.
</p>
<p>Each of the functions accepts a filename for an Rd file, and
will use <code><a href="#topic+parse_Rd">parse_Rd</a></code> to parse it before applying the
conversions or checks.
</p>
<p>The difference between arguments <code>Link</code> and <code>Link2</code> is that
links are looked in them in turn, so lazy-evaluation can be used to
only do a second-level search for links if required.
</p>
<p>Before <span class="rlang"><b>R</b></span> 3.6.0, the default for <code>Rd2latex</code> was <code>outputEncoding = "ASCII"</code>,
including using the second option of <code style="white-space: pre;">&#8288;\enc&#8288;</code> markup, because LaTeX
versions did not provide enough coverage of UTF-8 glyphs for a long time.
</p>
<p><code>Rd2txt</code> will format text paragraphs to a width determined by
<code>width</code>, with appropriate margins.  The default is to be close to
the rendering in versions of <span class="rlang"><b>R</b></span> &lt; 2.10.0.
</p>
<p><code>Rd2txt</code> will use directional quotes (see <code><a href="base.html#topic+sQuote">sQuote</a></code>)
if option <code>"useFancyQuotes"</code> is true (usually the default,
see <code><a href="base.html#topic+sQuote">sQuote</a></code>) and
the current encoding is UTF-8.
</p>
<p>Various aspects of formatting by <code>Rd2txt</code> are controlled by the
<code>options</code> argument, documented with the <code><a href="#topic+Rd2txt_options">Rd2txt_options</a></code>
function.  Changes made using <code>options</code> are temporary, those
made with <code><a href="#topic+Rd2txt_options">Rd2txt_options</a></code> are persistent.
</p>
<p>When <code>fragment = TRUE</code>, the <code>Rd</code> file will be rendered
with no processing of <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> elements or conditional defines
using <code style="white-space: pre;">&#8288;#ifdef&#8288;</code> or <code style="white-space: pre;">&#8288;#ifndef&#8288;</code>.  Normally a fragment represents
text within a section, but if the first element of the fragment
is a section macro, the whole fragment will be rendered as
a series of sections, without the usual sorting.
</p>


<h3>Value</h3>

<p>These functions are executed mainly for the side effect of writing the
converted help page.  Their value is the name of the output file
(invisibly).  For <code>Rd2latex</code>, the output name is given an
attribute <code>"latexEncoding"</code> giving the encoding of the file in a
form suitable for use with the LaTeX &lsquo;<span class="samp">&#8288;inputenc&#8288;</span>&rsquo; package. For
<code>Rd2HTML</code> with <code>standalone = FALSE</code>, an attribute
<code>"info"</code> gives supplementary information such as the contents of
the <code>name</code> and <code>title</code> fields. This is currently
experimental, and the details are subject to change.
</p>
<p>For <code>Rd2HTML</code> and <code>Rd2latex</code> with <code>concordance = TRUE</code>, a 
<code>"concordance"</code> attribute is added, containing an
<code><a href="#topic+Rconcordance">Rconcordance</a></code> object.
</p>


<h3>Encodings</h3>

<p>Rd files are normally intended to be rendered on a wide variety of
systems, so care must be taken in the encoding of non-ASCII
characters.  In general, any such encoding should be declared using
the &lsquo;<span class="samp">&#8288;encoding&#8288;</span>&rsquo; section for there to be any hope of correct
rendering.
</p>
<p>For output, the <code>outputEncoding</code> argument will be used:
<code>outputEncoding = ""</code> will choose the native encoding for the
current system.
</p>
<p>If the text cannot be converted to the <code>outputEncoding</code>, byte
substitution will be used (see <code><a href="base.html#topic+iconv">iconv</a></code>): <code>Rd2latex</code>
and <code>Rd2ex</code> give a warning.
</p>


<h3>Note</h3>

<p>The <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> macro includes
<span class="rlang"><b>R</b></span> code that will be executed at one of three times: <em>build</em> time
(when a package's source code is built into a tarball),
<em>install</em> time (when the package is installed or
built into a binary package), and <em>render</em> time (when the man
page is converted to a readable format).
</p>
<p>For example, this man page was:
</p>

<ol>
<li><p> built on
2025-03-20 at 20:59:37,
</p>
</li>
<li><p> installed on
2025-03-20 at 20:59:37, and
</p>
</li>
<li><p> rendered on
2025-03-21 at 02:22:16.
</p>
</li></ol>



<h3>Author(s)</h3>

<p>Duncan Murdoch, Brian Ripley
</p>


<h3>References</h3>

 <p><a href="https://developer.r-project.org/parseRd.pdf">https://developer.r-project.org/parseRd.pdf</a> </p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_Rd">parse_Rd</a></code>, <code><a href="#topic+checkRd">checkRd</a></code>,
<code><a href="#topic+findHTMLlinks">findHTMLlinks</a></code>, <code><a href="#topic+Rd2txt_options">Rd2txt_options</a></code>,
<code><a href="#topic+matchConcordance">matchConcordance</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Simulate rendering of this (installed) page in HTML and text format
Rd &lt;- Rd_db("tools")[["Rd2HTML.Rd"]]

outfile &lt;- tempfile(fileext = ".html")
Rd2HTML(Rd, outfile, package = "tools") |&gt; browseURL()

outfile &lt;- tempfile(fileext = ".txt")
Rd2txt(Rd, outfile, package = "tools") |&gt; file.show()
</code></pre>

<hr>
<h2 id='Rd2txt_options'>Set Formatting Options for Text Help</h2><span id='topic+Rd2txt_options'></span>

<h3>Description</h3>

<p>This function sets various options for displaying text help.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rd2txt_options(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rd2txt_options_+3A_...">...</code></td>
<td>
<p>A list containing named options, or
options passed as individual named arguments.
See below for currently defined ones.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function persistently sets various formatting options for the
<code><a href="#topic+Rd2txt">Rd2txt</a></code> function which is used in displaying text format
help.  Currently defined options are:
</p>

<dl>
<dt>width</dt><dd><p>(default 80):  The width of the output page.</p>
</dd>
<dt>minIndent</dt><dd><p>(default 10):  The minimum indent to use in a list.</p>
</dd>
<dt>extraIndent</dt><dd><p>(default 4):  The extra indent to use in each
level of nested lists.</p>
</dd>
<dt>sectionIndent</dt><dd><p>(default 5):  The indent level for a section.</p>
</dd>
<dt>sectionExtra</dt><dd><p>(default 2):  The extra indentation for each
nested section level.</p>
</dd>
<dt>itemBullet</dt><dd><p>(default <code>"* "</code>, with the asterisk replaced by a
Unicode bullet in UTF-8 and most Windows locales):
The symbol to use as a bullet in itemized lists.</p>
</dd>
<dt>enumFormat</dt><dd><p>:  A function to format item numbers in enumerated lists.</p>
</dd>
<dt>showURLs</dt><dd><p>(default <code>FALSE</code>):  Whether to show URLs when
expanding <code style="white-space: pre;">&#8288;\href&#8288;</code> tags.</p>
</dd>
<dt>code_quote</dt><dd><p>(default <code>TRUE</code>):  Whether to render
<code style="white-space: pre;">&#8288;\code&#8288;</code> and similar with single quotes.</p>
</dd>
<dt>underline_titles</dt><dd><p>(default <code>TRUE</code>):  Whether to render
section titles with underlines (via backspacing).</p>
</dd>
</dl>



<h3>Value</h3>

<p>If called with no arguments, returns all option settings in a list.
Otherwise, it changes the named settings and invisibly returns their
previous values.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Rd2txt">Rd2txt</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>saveOpts &lt;- Rd2txt_options()
saveOpts
Rd2txt_options(minIndent = 4)
Rd2txt_options()[["minIndent"]]
Rd2txt_options(saveOpts)
stopifnot(identical(Rd2txt_options(), saveOpts))
</code></pre>

<hr>
<h2 id='Rdiff'>Difference R Output Files</h2><span id='topic+Rdiff'></span>

<h3>Description</h3>

<p>Given two <span class="rlang"><b>R</b></span> output files, compute differences ignoring headers,
footers and some other differences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rdiff(from, to, useDiff = FALSE, forEx = FALSE,
      nullPointers = TRUE, Log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rdiff_+3A_from">from</code>, <code id="Rdiff_+3A_to">to</code></td>
<td>
<p>filepaths to be compared</p>
</td></tr>
<tr><td><code id="Rdiff_+3A_usediff">useDiff</code></td>
<td>
<p>should <code>diff</code> be used to compare results?
Overridden to false if the command is not available.</p>
</td></tr>
<tr><td><code id="Rdiff_+3A_forex">forEx</code></td>
<td>
<p>logical: extra pruning for &lsquo;<span class="file">-Ex.Rout</span>&rsquo; files to
exclude headers and footers of examples, code and results for
<span class="option">"--timings"</span>, etc.</p>
</td></tr>
<tr><td><code id="Rdiff_+3A_nullpointers">nullPointers</code></td>
<td>
<p>logical: should the displayed addresses of
pointers be set to <code>0x00000000</code> before comparison?</p>
</td></tr>
<tr><td><code id="Rdiff_+3A_log">Log</code></td>
<td>
<p>logical: should the returned value include a log of
differences found?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <span class="rlang"><b>R</b></span> startup banner and any timing information from <code>R CMD
    BATCH</code> are removed from both files, together with lines about
loading packages.  UTF-8 fancy quotes (see <code><a href="base.html#topic+sQuote">sQuote</a></code>) and
on Windows, Windows' so-called &lsquo;smart quotes&rsquo;, are mapped to
a simple quote.  Addresses of environments, compiled bytecode and
other exotic types expressed as hex addresses
(e.g., &lsquo;<span class="samp">&#8288;&lt;environment: 0x12345678&gt;&#8288;</span>&rsquo;) are mapped to
<code>0x00000000</code>.  The files are then compared line-by-line.  If
there are the same number of lines and <code>useDiff</code> is false, a
simple <code>diff -b</code> -like display of differences is printed
(which ignores trailing spaces and differences in numbers of
consecutive spaces), otherwise <code>diff -bw</code> is called on the
edited files.  (This tries to ignore all differences in whitespace:
note that flag <span class="option">-w</span> is not required by POSIX but is supported
by GNU, Solaris and FreeBSD versions &ndash; macOS uses an old GNU version.)
</p>






<p>There is limited support for comparing PDF files produced by
<code>pdf(compress = FALSE)</code>, mainly for use in <code>make check</code>
&ndash; this requires a <code>diff</code> command and <code>useDiff = TRUE</code>.
</p>
<p>Mainly for use in examples and tests, text from marker
&lsquo;<span class="samp">&#8288;&gt; ## IGNORE_RDIFF_BEGIN&#8288;</span>&rsquo; up to (but not including)
&lsquo;<span class="samp">&#8288;&gt; ## IGNORE_RDIFF_END&#8288;</span>&rsquo; is ignored.
In examples, since <span class="rlang"><b>R</b></span> 4.4.0, the built-in Rd macro <code style="white-space: pre;">&#8288;\dontdiff{}&#8288;</code>
can be used instead.
</p>


<h3>Value</h3>

<p>If <code>Log</code> is true, a list with components <code>status</code> (see
below) and <code>out</code>, a character vector of descriptions of
differences, possibly of zero length.
</p>
<p>Otherwise, a status indicator (invisibly), <code>0L</code> if and only if no
differences were found.
</p>


<h3>See Also</h3>

<p>The shell script run as <code>R CMD Rdiff</code>, which uses
<code>useDiff = TRUE</code>.
</p>

<hr>
<h2 id='Rdindex'>Generate Index from Rd Files</h2><span id='topic+Rdindex'></span>

<h3>Description</h3>

<p>Print a 2-column index table with names and titles from given
R documentation files to a given output file or connection.  The
titles are nicely formatted between two column positions (typically 25
and 72, respectively).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rdindex(RdFiles, outFile = "", type = NULL,
        width = 0.9 * getOption("width"), indent = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rdindex_+3A_rdfiles">RdFiles</code></td>
<td>
<p>a character vector specifying the Rd files to be used
for creating the index, either by giving the paths to the files, or
the path to a single directory with the sources of a package.</p>
</td></tr>
<tr><td><code id="Rdindex_+3A_outfile">outFile</code></td>
<td>
<p>a connection, or a character string naming the output
file to print to.  <code>""</code> (the default) indicates output to the
console.</p>
</td></tr>
<tr><td><code id="Rdindex_+3A_type">type</code></td>
<td>
<p>a character string giving the documentation type of the Rd
files to be included in the index, or <code>NULL</code> (the default).
The type of an Rd file is typically specified via the
<code style="white-space: pre;">&#8288;\docType&#8288;</code> tag; if <code>type</code> is <code>"data"</code>, Rd files
whose <em>only</em> keyword is <code>datasets</code> are included as well.</p>
</td></tr>
<tr><td><code id="Rdindex_+3A_width">width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output.</p>
</td></tr>
<tr><td><code id="Rdindex_+3A_indent">indent</code></td>
<td>
<p>a positive integer specifying the indentation of the
second column.  Must not be greater than <code>width/2</code>, and
defaults to <code>width/3</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a name is not a valid alias, the first alias (or the empty string
if there is none) is used instead.
</p>

<hr>
<h2 id='RdTextFilter'>Select Text in an Rd File</h2><span id='topic+RdTextFilter'></span>

<h3>Description</h3>

<p>This function blanks out all non-text in an Rd file,
for spell checking or other uses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RdTextFilter(ifile, encoding = "unknown", keepSpacing = TRUE,
             drop = character(), keep = character(),
             macros = file.path(R.home("share"), "Rd", "macros", "system.Rd"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RdTextFilter_+3A_ifile">ifile</code></td>
<td>

<p>An input file specified as a filename or connection, or an <code>"Rd"</code> object
from <code><a href="#topic+parse_Rd">parse_Rd</a></code>.
</p>
</td></tr>
<tr><td><code id="RdTextFilter_+3A_encoding">encoding</code></td>
<td>

<p>An encoding name to pass to <code><a href="#topic+parse_Rd">parse_Rd</a></code>.
</p>
</td></tr>
<tr><td><code id="RdTextFilter_+3A_keepspacing">keepSpacing</code></td>
<td>

<p>Whether to try to leave the text in the same lines and columns
as in the original file.
</p>
</td></tr>
<tr><td><code id="RdTextFilter_+3A_drop">drop</code></td>
<td>

<p>Additional sections of the Rd to drop.
</p>
</td></tr>
<tr><td><code id="RdTextFilter_+3A_keep">keep</code></td>
<td>

<p>Sections of the Rd file to keep.
</p>
</td></tr>
<tr><td><code id="RdTextFilter_+3A_macros">macros</code></td>
<td>

<p>Macro definitions to assume when parsing.  See <code><a href="#topic+parse_Rd">parse_Rd</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function parses the Rd file, then walks through it, element by
element.  Items with tag <code>"TEXT"</code> are kept in the same position as
they appeared in the original file, while other parts of the file are
replaced with blanks, so a spell checker such as <code><a href="utils.html#topic+aspell">aspell</a></code>
can check only the text and report the position in the original file.
(If <code>keepSpacing</code> is <code>FALSE</code>, blank filling will not occur,
and text will not be output in its original location.)
</p>
<p>By default, the tags <code style="white-space: pre;">&#8288;\S3method&#8288;</code>, <code style="white-space: pre;">&#8288;\S4method&#8288;</code>,
<code style="white-space: pre;">&#8288;\command&#8288;</code>, <code style="white-space: pre;">&#8288;\docType&#8288;</code>, <code style="white-space: pre;">&#8288;\email&#8288;</code>, <code style="white-space: pre;">&#8288;\encoding&#8288;</code>,
<code style="white-space: pre;">&#8288;\file&#8288;</code>, <code style="white-space: pre;">&#8288;\keyword&#8288;</code>, <code style="white-space: pre;">&#8288;\link&#8288;</code>, <code style="white-space: pre;">&#8288;\linkS4class&#8288;</code>,
<code style="white-space: pre;">&#8288;\method&#8288;</code>, <code style="white-space: pre;">&#8288;\pkg&#8288;</code>, and <code style="white-space: pre;">&#8288;\var&#8288;</code> are skipped.  Additional
tags can be skipped by listing them in the <code>drop</code> argument;
listing tags in the <code>keep</code> argument will stop them from being
skipped.  It is also possible to <code>keep</code> any of the
<code>c("RCODE", "COMMENT", "VERB")</code> tags, which correspond to R-like
code, comments, and verbatim text respectively, or to drop
<code>"TEXT"</code>.
</p>


<h3>Value</h3>

<p>A character vector which if written to a file, one element per line, would
duplicate the text elements of the original Rd file.
</p>


<h3>Note</h3>

<p>The filter attempts to merge text elements into single words when markup in
the Rd file is used to highlight just the start of a word.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+aspell">aspell</a></code>, for which this is an acceptable <code>filter</code>.
</p>

<hr>
<h2 id='Rdutils'>Rd Utilities</h2><span id='topic+Rd_db'></span>

<h3>Description</h3>

<p>Utilities for computing on the information in Rd objects.</p>


<h3>Usage</h3>

<pre><code class='language-R'>Rd_db(package, dir, lib.loc = NULL, stages = "build")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Rdutils_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td></tr>
<tr><td><code id="Rdutils_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This should contain the subdirectory &lsquo;<span class="file">man</span>&rsquo;
with <span class="rlang"><b>R</b></span> documentation sources (in Rd format).  Only used if
<code>package</code> is not given.</p>
</td></tr>
<tr><td><code id="Rdutils_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
<tr><td><code id="Rdutils_+3A_stages">stages</code></td>
<td>
<p>if <code>dir</code> is specified and the database is being
built from source, which stages of <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> processing should be
processed?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>Rd_db</code> builds a simple database of all Rd objects in a package,
as a list of the results of running <code><a href="#topic+parse_Rd">parse_Rd</a></code> on the Rd
source files in the package and processing platform conditionals
and some <code style="white-space: pre;">&#8288;\Sexpr&#8288;</code> macros.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+parse_Rd">parse_Rd</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Build the Rd db for the (installed) base package.
db &lt;- Rd_db("base")

## Keyword metadata per Rd object.
keywords &lt;- lapply(db, tools:::.Rd_get_metadata, "keyword")
## Tabulate the keyword entries.
kw_table &lt;- sort(table(unlist(keywords)))
## The 5 most frequent ones:
rev(kw_table)[1 : 5]
## The "most informative" ones:
kw_table[kw_table == 1]

## Concept metadata per Rd file.
concepts &lt;- lapply(db, tools:::.Rd_get_metadata, "concept")
## How many files already have \concept metadata?
sum(sapply(concepts, length) &gt; 0)
## How many concept entries altogether?
length(unlist(concepts))
</code></pre>

<hr>
<h2 id='read.00Index'>Read 00Index-style Files</h2><span id='topic+read.00Index'></span>

<h3>Description</h3>

<p>Read item/description information from &lsquo;<span class="file">00Index</span>&rsquo;-like files.  Such
files are description lists rendered in tabular form, and currently
used for the &lsquo;<span class="file">INDEX</span>&rsquo; and &lsquo;<span class="file">demo/00Index</span>&rsquo; files of add-on
packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.00Index(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.00Index_+3A_file">file</code></td>
<td>
<p>the name of a file to read data values from.  If the
specified file is <code>""</code>, then input is taken from the keyboard
(in this case input can be terminated by a blank line).
Alternatively, <code>file</code> can be a <code><a href="base.html#topic+connection">connection</a></code>, which
will be opened if necessary, and if so closed at the end of the
function call.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character matrix with 2 columns named <code>"Item"</code> and
<code>"Description"</code> which hold the items and descriptions.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+formatDL">formatDL</a></code> for the inverse operation of creating a
00Index-style file from items and their descriptions.
</p>

<hr>
<h2 id='sha256sum'>Compute <abbr>SHA</abbr>-256 Checksums</h2><span id='topic+sha256sum'></span>

<h3>Description</h3>

<p>Compute the 32-byte <abbr>SHA</abbr>-256 hashes of one or more files, or a raw vector of bytes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sha256sum(files, bytes)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sha256sum_+3A_files">files</code></td>
<td>
<p>character. The paths of file(s) whose contents are to be hashed.</p>
</td></tr>
<tr><td><code id="sha256sum_+3A_bytes">bytes</code></td>
<td>
<p><code><a href="base.html#topic+raw">raw</a></code>. Bytes to be hashed.
NB: <code>bytes</code> and <code>files</code> are mutually exclusive.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <abbr>SHA</abbr>-256 &lsquo;hash&rsquo; or &lsquo;checksum&rsquo; or &lsquo;message digest&rsquo; is
a 256-bit summary of the file contents represented by 64 hexadecimal
digits.
</p>
<p>On Windows all files are read in binary mode (as the <code>sha256sum</code>
utilities there do): on other OSes the files are read in the default
mode (almost always text mode where there is more than one).
</p>


<h3>Value</h3>

<p>If used with <code>files</code>,
a character vector of the same length as <code>files</code>, with names
equal to <code>files</code> (possibly expanded).  The elements will be
<code>NA</code> for non-existent or unreadable files, otherwise a
64-character string of hexadecimal digits.
</p>
<p>For <code>bytes</code> the result is a single 64-character string.
</p>


<h3>Source</h3>

<p>The underlying C code was written by Ulrich Drepper, extracted from
the public domain version &lsquo;<span class="file">SHA-crypt.txt</span>&rsquo; version 0.6 (2016-8-31).
</p>


<h3>See Also</h3>

<p><code><a href="#topic+md5sum">md5sum</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as.vector(sha256sum(dir(R.home(), pattern = "^COPY", full.names = TRUE)))
sha256sum(bytes=raw())
sha256sum(bytes=charToRaw("abc"))
</code></pre>

<hr>
<h2 id='showNonASCII'>Pick Out Non-ASCII Characters</h2><span id='topic+showNonASCII'></span><span id='topic+showNonASCIIfile'></span>

<h3>Description</h3>

<p>This function prints elements of a character vector which contain
non-ASCII bytes, printing such bytes as a escape like &lsquo;<span class="samp">&#8288;&lt;fc&gt;&#8288;</span>&rsquo;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showNonASCII(x)

showNonASCIIfile(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="showNonASCII_+3A_x">x</code></td>
<td>
<p>a character vector.</p>
</td></tr>
<tr><td><code id="showNonASCII_+3A_file">file</code></td>
<td>
<p>path to a file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This was originally written to help detect non-portable text in
files in packages.
</p>
<p>It prints all elements of <code>x</code> which contain non-ASCII characters,
preceded by the element number and with non-ASCII bytes highlighted
<em>via</em> <code><a href="base.html#topic+iconv">iconv</a>(sub = "byte")</code>.
</p>
<p>However, this rendering depends on <code><a href="base.html#topic+iconv">iconv</a>(to = "ASCII")</code>
failing to convert, and macOS 14 no longer does so reliably so for
example permille (&lsquo;<span class="samp">&#8288;\u2030&#8288;</span>&rsquo;) is rendered as <code>o/oo</code>.
</p>


<h3>Value</h3>

<p>The elements of <code>x</code> containing non-ASCII characters will be returned
invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>out &lt;- c(
"fran\xE7ais: test of showNonASCII():",
"\\details{",
"   This is a good line",
"   This has an \xfcmlaut in it.",
"   OK again.",
"}")
f &lt;- tempfile()
cat(out, file = f, sep = "\n")

showNonASCIIfile(f)
unlink(f)
</code></pre>

<hr>
<h2 id='startDynamicHelp'>Start the Dynamic HTML Help System</h2><span id='topic+startDynamicHelp'></span><span id='topic+help.ports'></span><span id='topic+R_DISABLE_HTTPD'></span>

<h3>Description</h3>

<p>This function starts the internal help server, so that HTML help pages
are rendered when requested.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>startDynamicHelp(start = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="startDynamicHelp_+3A_start">start</code></td>
<td>
<p>logical: whether to start or shut down the dynamic help
system.  If <code>NA</code>, the server is started if not already running.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function starts the internal HTTP server, which runs on the
loopback interface (&lsquo;<span class="samp">&#8288;127.0.0.1&#8288;</span>&rsquo;).  If <code>options("help.ports")</code>
is set to a vector of non-zero integer values, <code>startDynamicHelp</code> will try
those ports in order; otherwise, it tries up to 10 random ports to
find one not in use.  It can be disabled by setting the environment
variable <span class="env">R_DISABLE_HTTPD</span> to a non-empty value or <code>options("help.ports")</code>
to <code>0</code>.
</p>
<p><code>startDynamicHelp</code> is called by functions that need to use the
server, so would rarely be called directly by a user.
</p>
<p>Note that <code>options(help_type = "html")</code> must be set to actually
make use of HTML help, although it might be the default for an <span class="rlang"><b>R</b></span>
installation.
</p>
<p>If the server cannot be started or is disabled,
<code><a href="utils.html#topic+help.start">help.start</a></code> will be unavailable and requests for HTML
help will give text help (with a warning).
</p>
<p>The browser in use does need to be able to connect to the loopback
interface: occasionally it is set to use a proxy for HTTP on all
interfaces, which will not work &ndash; the solution is to add an exception
for &lsquo;<span class="samp">&#8288;127.0.0.1&#8288;</span>&rsquo;.
</p>


<h3>Value</h3>

<p>The chosen port number is returned invisibly (which will be <code>0</code>
if the server has been stopped).
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+help.start">help.start</a></code> and <code><a href="utils.html#topic+help">help</a>(help_type = "html")</code>
will attempt to start the HTTP server if required
</p>
<p><code><a href="#topic+Rd2HTML">Rd2HTML</a></code> is used to render the package help pages.
</p>

<hr>
<h2 id='SweaveTeXFilter'>Strip R Code out of Sweave File</h2><span id='topic+SweaveTeXFilter'></span>

<h3>Description</h3>

<p>This function blanks out code chunks and Noweb markup in an Sweave
input file, for spell checking or other uses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SweaveTeXFilter(ifile, encoding = "unknown")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SweaveTeXFilter_+3A_ifile">ifile</code></td>
<td>

<p>Input file or connection.
</p>
</td></tr>
<tr><td><code id="SweaveTeXFilter_+3A_encoding">encoding</code></td>
<td>

<p>Text encoding to pass to <code><a href="base.html#topic+readLines">readLines</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function blanks out all Noweb markup and code chunks from an
Sweave input file, leaving behind the LaTeX source, so that a
LaTeX-aware spelling checker can check it and report errors in their
original locations.
</p>


<h3>Value</h3>

<p>A character vector which if written to a file, one element per line,
would duplicate the text elements of the original Sweave input file.
</p>


<h3>Author(s)</h3>

<p>Duncan Murdoch
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+aspell">aspell</a></code>, for which this is used with <code>filter = "Sweave"</code>.
</p>

<hr>
<h2 id='testInstalledPackage'>Test Installed Packages</h2><span id='topic+testInstalledPackage'></span><span id='topic+testInstalledPackages'></span><span id='topic+testInstalledBasic'></span><span id='topic+TEST_MC_CORES'></span><span id='topic+standard_package_names'></span>

<h3>Description</h3>

<p>These functions allow an installed package to be tested, or all base
and recommended packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>testInstalledPackage(pkg, lib.loc = NULL, outDir = ".",
                     types = c("examples", "tests", "vignettes"),
                     srcdir = NULL, Ropts = "", ...)

testInstalledPackages(outDir = ".", errorsAreFatal = TRUE,
                      scope = c("both", "base", "recommended"),
                      types = c("examples", "tests", "vignettes"),
                      srcdir = NULL, Ropts = "", ...)

testInstalledBasic(scope = c("basic", "devel", "both", "internet", "all"),
                   outDir = file.path(R.home(), "tests"),
                   testSrcdir = getTestSrcdir(outDir))

standard_package_names()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="testInstalledPackage_+3A_pkg">pkg</code></td>
<td>
<p>name of an installed package.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_lib.loc">lib.loc</code></td>
<td>
<p>library path(s) in which to look for the package.  See
<code><a href="base.html#topic+library">library</a></code>.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_outdir">outDir</code></td>
<td>
<p>the directory into which to write the output files: this
should already exist.  The default, <code>"."</code> is the current working
directory.  Often a subdirectory is preferable.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_types">types</code></td>
<td>
<p>type(s) of tests to be done.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_srcdir">srcdir</code></td>
<td>
<p>Optional directory to look for <code>.save</code> files.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_ropts">Ropts</code></td>
<td>
<p>Additional options such as <span class="option">-d valgrind</span> to be
passed to <code>R CMD BATCH</code> when running examples or tests.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_errorsarefatal">errorsAreFatal</code></td>
<td>
<p>logical: should testing terminate at the first
error?</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_scope">scope</code></td>
<td>
<p>a string indicating which set(s) should be tested.
<code>"both"</code> includes <code>"basic"</code> and <code>"devel"</code>; <code>"all"</code>
adds <code>"internet"</code>.  Can be abbreviated.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_...">...</code></td>
<td>
<p>additional arguments use when preparing the files to be
run, e.g. <code>commentDontrun</code> and <code>commentDonttest</code>.</p>
</td></tr>
<tr><td><code id="testInstalledPackage_+3A_testsrcdir">testSrcdir</code></td>
<td>
<p>optional directory where the test <span class="rlang"><b>R</b></span> scripts are found.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>testInstalledPackage{s}()</code> tests depend on having the package
example files installed (which is the default).
</p>
<p>If package-specific tests are found in a
&lsquo;<span class="file">tests</span>&rsquo; directory they can be tested: these are not
installed by default, but will be if
<code>R CMD INSTALL --install-tests</code> was used.  Finally, the <span class="rlang"><b>R</b></span>
code in any vignettes can be extracted and tested.
<br />
The package-specific tests are run in a &lsquo;<span class="file"><var>pkg</var>-tests</span>&rsquo; subdirectory of
&lsquo;<span class="file">outDir</span>&rsquo;, and leave their output there.

</p>
<p><code>testInstalledBasic</code> runs the basic tests, if installed or inside
<code>testSrcdir</code>.  This
should be run with <a href="base.html#topic+LC_COLLATE"><span class="env">LC_COLLATE</span></a> set to &lsquo;<span class="samp">&#8288;C&#8288;</span>&rsquo;:
the function tries to set
this but it may not work on all OSes.  For non-English locales it may
be desirable to set environment variables <span class="env">LANGUAGE</span> to &lsquo;<span class="samp">&#8288;en&#8288;</span>&rsquo;
and <span class="env">LC_TIME</span> to &lsquo;<span class="samp">&#8288;C&#8288;</span>&rsquo; to reduce the number of differences from
reference results.
</p>
<p>Except on Windows, if the environment variable <span class="env">TEST_MC_CORES</span> is
set to an integer greater than one, <code>testInstalledPackages</code> will
run the package tests in parallel using its value as the maximum
number of parallel processes.
</p>
<p>The package-specific tests for the base and recommended packages are
not normally installed, but <code>make install-tests</code> is provided
to do so (as well as the basic tests).
</p>


<h3>Value</h3>

<p>Invisibly <code>0L</code> for success, <code>1L</code> for failure.
</p>
<p><code>standard_package_names()</code> returns a <code><a href="base.html#topic+list">list</a></code> with
components named
</p>
<table role = "presentation">
<tr><td><code>base</code></td>
<td>
<p>a <code>character</code> vector with the &lsquo;base&rsquo; package names.</p>
</td></tr>
<tr><td><code>recommended</code></td>
<td>
<p>a <code>character</code> vector with the
&lsquo;Recommended&rsquo; package names in historical order.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>str(stPkgs &lt;- standard_package_names())

## consistency of packageDescription and standard_package_names :
(pNms &lt;- unlist(stPkgs, FALSE))
(prio &lt;- sapply(as.vector(pNms), packageDescription, fields = "Priority"))
stopifnot(identical(unname(prio),
                    sub("[0-9]+$", '', names(pNms))))

</code></pre>

<hr>
<h2 id='texi2dvi'>Compile LaTeX Files</h2><span id='topic+texi2dvi'></span><span id='topic+texi2pdf'></span>

<h3>Description</h3>

<p>Run <code>latex</code>/<code>pdflatex</code>, <code>makeindex</code> and <code>bibtex</code>
until all cross-references are resolved to create a <abbr>DVI</abbr> or a PDF file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>texi2dvi(file, pdf = FALSE, clean = FALSE, quiet = TRUE,
         texi2dvi = getOption("texi2dvi"),
         texinputs = NULL, index = TRUE)

texi2pdf(file, clean = FALSE, quiet = TRUE,
         texi2dvi = getOption("texi2dvi"),
         texinputs = NULL, index = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="texi2dvi_+3A_file">file</code></td>
<td>
<p>character string.  Name of the LaTeX source file.</p>
</td></tr>
<tr><td><code id="texi2dvi_+3A_pdf">pdf</code></td>
<td>
<p>logical.  If <code>TRUE</code>, a PDF file is produced instead of
the default <abbr>DVI</abbr> file (<code>texi2dvi</code> command line option <span class="option">--pdf</span>).</p>
</td></tr>
<tr><td><code id="texi2dvi_+3A_clean">clean</code></td>
<td>
<p>logical.  If <code>TRUE</code>, all auxiliary files created
during the conversion are removed.</p>
</td></tr>
<tr><td><code id="texi2dvi_+3A_quiet">quiet</code></td>
<td>
<p>logical.  No output unless an error occurs.</p>
</td></tr>
<tr><td><code id="texi2dvi_+3A_texi2dvi">texi2dvi</code></td>
<td>
<p>character string (or <code>NULL</code>).  Script or program
used to compile a TeX file to <abbr>DVI</abbr> or PDF. The default (selected
by <code>""</code> or <code>"texi2dvi"</code> or <code>NULL</code>) is to look
for a program or script named <code>texi2dvi</code> on the path and
otherwise emulate the script with <code>system2</code> calls (which
can be selected by the value <code>"emulation"</code>).  See also
&lsquo;Details&rsquo;.</p>
</td></tr> 
<tr><td><code id="texi2dvi_+3A_texinputs">texinputs</code></td>
<td>
<p><code>NULL</code> or a character vector of paths to prepend to
the LaTeX and BibTeX input search paths.</p>
</td></tr>
<tr><td><code id="texi2dvi_+3A_index">index</code></td>
<td>
<p>logical: should indices be prepared?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>texi2pdf</code> is a wrapper for the common case of
<code>texi2dvi(pdf = TRUE)</code>.
</p>
<p>Despite the name, this is used in <span class="rlang"><b>R</b></span> to compile LaTeX files,
specifically those generated from vignettes and by the
<code><a href="base.html#topic+Rd2pdf">Rd2pdf</a></code> script (used for package reference manuals).  It
ensures that the &lsquo;<span class="file"><var><a href="base.html#topic+R_HOME">R_HOME</a></var>/share/texmf</span>&rsquo; directory is
in the <span class="env">TEXINPUTS</span> path, so <span class="rlang"><b>R</b></span> style files such as &lsquo;<span class="file">Sweave.sty</span>&rsquo;
and &lsquo;<span class="file">Rd.sty</span>&rsquo; will be found.  The TeX search path used is first the
elements of argument <code>texinputs</code>, then the
existing <span class="env">TEXINPUTS</span> setting (or the current directory if unset),
then &lsquo;<span class="file"><var>R_HOME</var>/share/texmf</span>&rsquo; and finally the system paths.
Analogous changes are made to <span class="env">BIBINPUTS</span> and <span class="env">BSTINPUTS</span>
settings.
</p>
<p>The default option for <code>texi2dvi</code> is set from environment variable
<span class="env">R_TEXI2DVICMD</span>, and the default for that is set from environment
variable <span class="env">TEXI2DVI</span> or if that is unset, from a value chosen when
<span class="rlang"><b>R</b></span> is configured.
</p>


<p>A shell script <code>texi2dvi</code> is part of GNU Texinfo.
Several issues have been seen with released versions, so if yours does
not work correctly try <span class="env">R_TEXI2DVICMD=emulation</span>.
</p>
<p>Occasionally indices contain special characters which cause indexing
to fail (particularly when using the &lsquo;<span class="samp">&#8288;hyperref&#8288;</span>&rsquo; LaTeX package)
even on valid input.  The argument <code>index = FALSE</code> is provided to
allow package manuals to be made when this happens: it uses emulation.
</p>


<h3>Value</h3>

<p>Invisible <code>NULL</code>.  Used for the side effect of creating a <abbr>DVI</abbr> or
PDF file in the current working directory (and maybe other files,
especially if <code>clean = FALSE</code>).
</p>


<h3>Note</h3>






<p>There are various versions of the <code>texi2dvi</code> script on
Unix-alikes and quite a number of bugs have been seen, some of which
this <span class="rlang"><b>R</b></span> wrapper works around.
</p>
<p>One that was present with <code>texi2dvi</code> version <code>4.8</code> (as
supplied by macOS) is that it will not work correctly for paths which
contain spaces, nor if the absolute path to a file would contain
spaces.
</p>
<p>The three possible approaches all have their quirks.  For example the
Unix-alike <code>texi2dvi</code> script removes ancillary files that already
exist but the other two approaches do not (and may get confused by
such files).
</p>
<p>Option <span class="option">--max-iterations=20</span>
is used to avoid infinite retries.
</p>
<p>The emulation mode supports <code>quiet = TRUE</code> from <span class="rlang"><b>R</b></span> 3.2.3 only.
Currently <code>clean = TRUE</code> only cleans up in this mode if the
conversion was successful&mdash;this gives users a chance to examine log
files in the event of error.
</p>
<p>All the approaches should respect the values of environment variables
<span class="env">LATEX</span>, <span class="env">PDFLATEX</span>, <span class="env">MAKEINDEX</span> and <span class="env">BIBTEX</span> for the
full paths to the corresponding commands.
</p>


<h3>Author(s)</h3>

<p>Originally Achim Zeileis but largely rewritten by R-core.
</p>

<hr>
<h2 id='toHTML'>Display an Object in HTML</h2><span id='topic+toHTML'></span><span id='topic+toHTML.packageIQR'></span><span id='topic+toHTML.news_db'></span>

<h3>Description</h3>

<p>This generic function generates a complete HTML page from an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toHTML(x, ...)
## S3 method for class 'packageIQR'
toHTML(x, ...)
## S3 method for class 'news_db'
toHTML(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="toHTML_+3A_x">x</code></td>
<td>
<p> An object to display. </p>
</td></tr>
<tr><td><code id="toHTML_+3A_...">...</code></td>
<td>
<p> Optional parameters for methods; the <code>"packageIQR"</code> and
<code>"news_db"</code> methods pass these to <code><a href="#topic+HTMLheader">HTMLheader</a></code>. </p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector to display the object <code>x</code>.  The <code>"packageIQR"</code> method
is designed to display lists in the <span class="rlang"><b>R</b></span> help system.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+HTMLheader">HTMLheader</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat(toHTML(demo(package = "base")), sep = "\n")
</code></pre>

<hr>
<h2 id='tools-defunct'>Defunct Objects in Package <span class="pkg">tools</span></h2><span id='topic+tools-defunct'></span><span id='topic+Rd_parse'></span><span id='topic+readNEWS'></span><span id='topic+checkNEWS'></span><span id='topic+package.dependencies'></span><span id='topic+getDepList'></span><span id='topic+pkgDepends'></span><span id='topic+installFoundDepends'></span><span id='topic+vignetteDepends'></span>

<h3>Description</h3>

<p>The functions or variables listed here are no longer part of <span class="rlang"><b>R</b></span> as
they are not needed (any more).
</p>


<h3>Usage</h3>

<pre><code class='language-R'># Defunct in R 2.10.0, removed in R 3.0.0
Rd_parse(file, text = NULL)

# Defunct in R 3.1.0,  removed in R 4.1.0
readNEWS(file = file.path(R.home(), "NEWS"), trace = FALSE,
         chop = c("first", "1", "par1", "keepAll"))
checkNEWS(file = file.path(R.home(), "NEWS"))

# Defunct in R 4.1.0
package.dependencies(x, check = FALSE,
                     depLevel = c("Depends", "Imports", "Suggests"))
getDepList(depMtrx, instPkgs, recursive = TRUE, local = TRUE,
           reduce = TRUE, lib.loc = NULL)
pkgDepends(pkg, recursive = TRUE, local = TRUE, reduce = TRUE,
           lib.loc = NULL)
installFoundDepends(depPkgList, ...)
vignetteDepends(vignette, recursive = TRUE, reduce = TRUE,
                local = TRUE, lib.loc = NULL)
</code></pre>


<h3>See Also</h3>

<p><code><a href="#topic+tools-deprecated">tools-deprecated</a></code>,
<code><a href="base.html#topic+Deprecated">Deprecated</a></code>,
<code><a href="base.html#topic+Defunct">Defunct</a></code>
</p>

<hr>
<h2 id='tools-deprecated'>Deprecated Objects in Package <span class="pkg">tools</span></h2><span id='topic+tools-deprecated'></span>

<h3>Description</h3>

<p>(Currently none)
</p>
<p>The functions or variables listed here are provided for compatibility
with older versions of <span class="rlang"><b>R</b></span> only, and may be defunct as soon as of the
next release.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+Deprecated">Deprecated</a></code>,
<code><a href="base.html#topic+Defunct">Defunct</a></code>
</p>

<hr>
<h2 id='toRd'>Generic Function to Convert Object to a Fragment of Rd Code</h2><span id='topic+toRd'></span><span id='topic+toRd.default'></span><span id='topic+toRd.bibentry'></span>

<h3>Description</h3>

<p>Methods for this function render their associated classes as a fragment of Rd
code, which can then be rendered into text, HTML, or LaTeX.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toRd(obj, ...)
## S3 method for class 'bibentry'
toRd(obj, style = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="toRd_+3A_obj">obj</code></td>
<td>

<p>The object to be rendered.
</p>
</td></tr>
<tr><td><code id="toRd_+3A_style">style</code></td>
<td>

<p>The style to be used in converting a <code><a href="utils.html#topic+bibentry">bibentry</a></code> object.
</p>
</td></tr>
<tr><td><code id="toRd_+3A_...">...</code></td>
<td>

<p>Additional arguments used by methods.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+bibstyle">bibstyle</a></code> for a discussion of styles.  The default <code>style = NULL</code> value
gives the default style.
</p>


<h3>Value</h3>

<p>Returns a character vector containing a fragment of Rd code that could
be parsed and rendered.  The default method converts <code>obj</code> to mode <code>character</code>,
then escapes any Rd markup within it.  The <code>bibentry</code> method converts an
object of that class to markup appropriate for use in a bibliography.
</p>

<hr>
<h2 id='toTitleCase'>Convert Titles to Title Case</h2><span id='topic+toTitleCase'></span>

<h3>Description</h3>

<p>Convert a character vector to title case for English, especially package titles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toTitleCase(text)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="toTitleCase_+3A_text">text</code></td>
<td>
<p>a character vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is intended for English text only.
</p>
<p>No definition of &lsquo;title case&rsquo; is universally accepted: all agree
that &lsquo;principal&rsquo; words are capitalized and common words like
&lsquo;for&rsquo; are not, but not which words fall into each category.
</p>
<p>Generally words in all capitals are left alone: this implementation
knows about conventional mixed-case words such as &lsquo;LaTeX&rsquo; and
&lsquo;OpenBUGS&rsquo; and a few technical terms which are not usually
capitalized such as &lsquo;jar&rsquo; and &lsquo;xls&rsquo;.  However, unknown
technical terms will be capitalized unless they are single words
enclosed in single quotes: names of packages and libraries should be
quoted in titles.
</p>


<h3>Value</h3>

<p>A character vector of the same length as <code>text</code>, without names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>toTitleCase("bayesian network modeling and analysis")
toTitleCase("ensemble tool for predictions from species distribution models")
## Treatment after "-":
toTitleCase("small- and large-scale analysis") # lowercase "and"

toTitleCase("a small fox is jumping")    # "a Small Fox is .."     (the 'a' may change)% i.e. BUG
toTitleCase("is a small fox jumping?")   # "Is a Small Fox .."     (fine)
## After ":", start a new sentence
toTitleCase("a pangram: the quick brown fox jumps over the lazy dog")
toTitleCase("asking -- 'is a small fox jumping?'") # ".. -- Is a Small ..."     (fine)
</code></pre>

<hr>
<h2 id='undoc'>Find Undocumented Objects</h2><span id='topic+undoc'></span><span id='topic+print.undoc'></span>

<h3>Description</h3>

<p>Finds the objects in a package which are undocumented, in the sense
that they are visible to the user (or data objects or S4 classes
provided by the package), but no documentation entry exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>undoc(package, dir, lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="undoc_+3A_package">package</code></td>
<td>
<p>a character string naming an installed package.</p>
</td></tr>
<tr><td><code id="undoc_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root
source directory.  This must contain the subdirectory &lsquo;<span class="file">man</span>&rsquo;
with <span class="rlang"><b>R</b></span> documentation sources (in Rd format), and at least one of
the &lsquo;<span class="file">R</span>&rsquo; or &lsquo;<span class="file">data</span>&rsquo; subdirectories with <span class="rlang"><b>R</b></span> code or data
objects, respectively.</p>
</td></tr>
<tr><td><code id="undoc_+3A_lib.loc">lib.loc</code></td>
<td>
<p>a character vector of directory names of <span class="rlang"><b>R</b></span> libraries,
or <code>NULL</code>.  The default value of <code>NULL</code> corresponds to all
libraries currently known.  The specified library trees are used to
search for <code>package</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is useful for package maintainers mostly.  In principle,
<em>all</em> user-level <span class="rlang"><b>R</b></span> objects should be documented.
</p>
<p>The <span class="pkg">base</span> package is special as it contains the primitives and
these do not have definitions available at code level.  We provide
equivalent closures in environments <code>.ArgsEnv</code> and
<code>.GenericArgsEnv</code> in the <span class="pkg">base</span> package that are used
for various purposes: <code>undoc("base")</code> checks that all the
primitives that are not language constructs are prototyped in those
environments and no others are.
</p>


<h3>Value</h3>

<p>An object of class <code>"undoc"</code> which is a list of character vectors
containing the names of the undocumented objects split according to
documentation type.
</p>
<p>There is a <code>print</code> method for nicely displaying the information
contained in such objects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+codoc">codoc</a></code>, <code><a href="#topic+QC">QC</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>undoc("tools")                  # Undocumented objects in 'tools'
</code></pre>

<hr>
<h2 id='update_PACKAGES'>Update Existing PACKAGES Files</h2><span id='topic+update_PACKAGES'></span>

<h3>Description</h3>

<p>Update an existing repository by reading the <code>PACKAGES</code>
file, retaining entries which are still valid, removing entries which
are no longer valid, and only processing built package tarballs which do not
match existing entries.
</p>
<p><code>update_PACKAGES</code> can be much faster than
<code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code> for small-moderate changes to large
repository indexes, particularly in non-strict mode (see Details).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_PACKAGES(dir = ".", fields = NULL, type = c("source",
  "mac.binary", "win.binary"), verbose.level = as.integer(dryrun),
  latestOnly = TRUE, addFiles = FALSE, rds_compress = "xz",
  strict = TRUE, dryrun = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_PACKAGES_+3A_dir">dir</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_fields">fields</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_type">type</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_verbose.level">verbose.level</code></td>
<td>
<p>one of {0, 1, 2}, the level of informative messages
displayed throughout the process. Defaults to 0 if
<code>dryrun</code> is <code>FALSE</code> (the default) and 1
otherwise. See Details for more information.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_latestonly">latestOnly</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_addfiles">addFiles</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_rds_compress">rds_compress</code></td>
<td>
<p>see <code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_strict">strict</code></td>
<td>
<p>logical. Should &ldquo;strict mode&rdquo; be used when checking
existing <code>PACKAGES</code> entries. See Details. Defaults to
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="update_PACKAGES_+3A_dryrun">dryrun</code></td>
<td>
<p>logical. Should the updates to existing <code>PACKAGES</code>
files be computed but NOT applied. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Throughout this section, <em>package tarball</em> is defined to mean any
archive file in <code>dir</code> whose name can be interpreted as
&lsquo;<span class="file"><var>package</var>_<var>version</var>.<var>ext</var></span>&rsquo; &ndash; with <var>ext</var> the appropriate
extension for built packages of type <code>type</code> &ndash; (or that is pointed
to by the <code>File</code> field of an existing <code>PACKAGES</code> entry).
<em>Novel package tarballs</em> are those which do not match an existing
<code>PACKAGES</code> file entry.
</p>
<p><code>update_PACKAGES</code> calls directly down to
<code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code> with a warning (and thus all package tarballs
will be processed), if any of the following conditions hold:
</p>

<ul>
<li> <p><code>type</code> is <code>"win.binary"</code> and <code>strict</code> is
<code>TRUE</code> (no MD5 checksums are included in win.binary <code>PACKAGES</code> files)
</p>
</li>
<li><p> No <code>PACKAGES</code> file exists under <code>dir</code>
</p>
</li>
<li><p> A <code>PACKAGES</code> file exists under <code>dir</code> but is empty 
</p>
</li>
<li> <p><code>fields</code> is not <code>NULL</code> and one or more specified fields
are not present in the existing <code>PACKAGES</code> file
</p>
</li></ul>

<p><code>update_PACKAGES</code> avoids (re)processing package tarballs in cases where
a <code>PACKAGES</code> file entry already exists and appears to remain valid. The
logic for detecting still-valid entries is as follows:
</p>
<p>Any package tarball which was last modified more recently than the
existing <code>PACKAGES</code> file is considered novel; existing
<code>PACKAGES</code> entries appearing to correspond to such tarballs are
<em>always</em> considered stale and replaced by newly generated ones.
Similarly, all <code>PACKAGES</code> entries that do not correspond to any
package tarball found in <code>dir</code> are considered invalid and are
excluded from the resulting updated <code>PACKAGES</code> files.
</p>
<p>When <code>strict</code> is <code>TRUE</code>, <code>PACKAGES</code> entries that match a package
tarball (by package name and version) are confirmed via MD5 checksum;
only those that pass are retained as valid. All novel package tarballs
are fully processed by the standard machinery underlying
<code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code> and the resulting entries are
added. Finally, if <code>latestOnly</code> is <code>TRUE</code>, package-version
pruning is performed across the entries.
</p>
<p>When <code>strict</code> is <code>FALSE</code>, package tarballs are assumed to encode
correct metadata in their filenames. <code>PACKAGES</code> entries which
appear to match a package tarball are retained as valid (No MD5 checksum
testing occurs). If <code>latestOnly</code> is <code>TRUE</code>, package-version
pruning is performed across the full set of retained entries and novel package
tarballs <em>before</em> the processing of the novel tarballs, at
significant computational and time savings in some
situations. After the optional pruning, any relevant novel package
tarballs are processed via the standard machinery and added to the
set of retained entries.
</p>
<p>In both cases, after the above process concludes, entries are sorted
alphabetically by the string concatenation of <code>Package</code> and
<code>Version</code>. This should match the entry order <code>write_PACKAGES</code>
outputs.
</p>
<p>The fields within the entries are ordered as follows: canonical fields -
i.e., those appearing as columns when <code>available.packages</code> is
called on a CRAN mirror - appear first in their canonical order,
followed by any non-canonical fields.
</p>
<p>After entry and field reordering, the final database of <code>PACKAGES</code>
entries is written to all three <code>PACKAGES</code> files, overwriting the
existing versions.
</p>
<p>When <code>verbose.level</code> is <code>0</code>, no extra messages are displayed
to the user. When it is <code>1</code>, detailed information about what is
happening is conveyed via messages, but underlying machinery from
<code><a href="#topic+write_PACKAGES">write_PACKAGES</a></code> is invoked with <code>verbose = FALSE</code>.
Behavior when <code>verbose.level</code> is <code>2</code> is identical to
<code>verbose.level</code> <code>1</code> with the exception that underlying
machinery from <code>write_PACKAGES</code> is invoked with
<code>verbose = TRUE</code>, which will individually list every processed
tarball.
</p>


<h3>Note</h3>

<p>While both strict and non-strict modes can offer speedups when updating
small percentages of large repositories, non-strict mode is <em>much</em>
faster and is recommended in situations where the assumption it makes
about tarballs' filenames encoding accurate information is safe.  </p>


<h3>Note</h3>

<p> Users should expect significantly smaller speedups over
<code>write_PACKAGES</code> in the <code>type == "win.binary"</code> case on at
least some operating systems. This is due to <code>write_PACKAGES</code> being
significantly faster in this context, rather than <code>update_PACKAGES</code>
being slower.
</p>


<h3>Author(s)</h3>

<p>Gabriel Becker (adapted from previous, related work by him in the <span class="pkg">switchr</span>
package which is copyright Genentech, Inc.)
</p>


<h3>See Also</h3>

<p><a href="#topic+write_PACKAGES">write_PACKAGES</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write_PACKAGES("c:/myFolder/myRepository") # on Windows
update_PACKAGES("c:/myFolder/myRepository") # on Windows
write_PACKAGES("/pub/RWin/bin/windows/contrib/2.9",
type = "win.binary") # on Linux
update_PACKAGES("/pub/RWin/bin/windows/contrib/2.9",
type = "win.binary") # on Linux

## End(Not run)</code></pre>

<hr>
<h2 id='update_pkg_po'>
Prepare Translations for a Package
</h2><span id='topic+update_pkg_po'></span>

<h3>Description</h3>

<p>Prepare the &lsquo;<span class="file">po</span>&rsquo; directory of a package and optionally compile and install
the translations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_pkg_po(pkgdir, pkg = NULL, version = NULL,
              pot_make = TRUE, mo_make = TRUE,
              verbose = getOption("verbose"),
              mergeOpts = "", copyright, bugs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_pkg_po_+3A_pkgdir">pkgdir</code></td>
<td>
<p>The path to the package directory.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_pkg">pkg</code></td>
<td>
<p>The package name: if <code>NULL</code> it is read from the package's
&lsquo;<span class="file">DESCRIPTION</span>&rsquo; file.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_version">version</code></td>
<td>
<p>The package version: if <code>NULL</code> it is read from the
package's &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_pot_make">pot_make</code>, <code id="update_pkg_po_+3A_mo_make">mo_make</code></td>
<td>
<p><code><a href="base.html#topic+logical">logical</a></code>s indicating if a new
&lsquo;<span class="file">*.pot</span>&rsquo; file or new binary translations &lsquo;<span class="file">*.mo</span>&rsquo; should be
(re)created.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_verbose">verbose</code></td>
<td>
<p><code><a href="base.html#topic+logical">logical</a></code> indicating if extra information
about the updating process should be printed to the console.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_mergeopts">mergeOpts</code></td>
<td>
<p>a string, by default empty, of space-separated options to
<code>msgmerge</code> in addition to <code>"--update"</code>.  Since <span class="rlang"><b>R</b></span> 4.2.0,
<code>"--no-wrap"</code> is used when called from
<code>file.path(R.home("po"), "Makefile")</code>.</p>
</td></tr>
<tr><td><code id="update_pkg_po_+3A_copyright">copyright</code>, <code id="update_pkg_po_+3A_bugs">bugs</code></td>
<td>
<p>optional character strings for the
&lsquo;<span class="samp">&#8288;Copyright&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;Report-Msgid-Bugs-To&#8288;</span>&rsquo; details in the
template files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This performs a series of steps to prepare or update messages in
the package.
</p>

<ul>
<li><p> If the package sources do not already have a &lsquo;<span class="file">po</span>&rsquo;
directory, one is created.
</p>
</li>
<li> <p><code><a href="#topic+xgettext2pot">xgettext2pot</a></code> is called to create/update a file
&lsquo;<span class="file">po/R-<var>pkgname</var>.pot</span>&rsquo; containing the translatable messages
in the package.
</p>
</li>
<li><p> All existing files in directory <code>po</code> with names
&lsquo;<span class="file">R-<var>lang</var>.po</span>&rsquo; are updated from &lsquo;<span class="file">R-<var>pkgname</var>.pot</span>&rsquo;,
<code><a href="#topic+checkPoFile">checkPoFile</a></code> is called on the updated file, and if
there are no problems the file is  compiled and installed under
&lsquo;<span class="file">inst/po</span>&rsquo;.
</p>
</li>
<li><p> In a UTF-8 locale, a &lsquo;translation&rsquo; &lsquo;<span class="file">R-en@quot.po</span>&rsquo;
is created with UTF-8 directional quotes, compiled and installed
under &lsquo;<span class="file">inst/po</span>&rsquo;.
</p>
</li>
<li><p> The remaining steps are done only if file
&lsquo;<span class="file">po/<var>pkgname</var>.pot</span>&rsquo; already exists.  The
&lsquo;<span class="file">src/*.{c,cc,cpp,m,mm}</span>&rsquo; files in the package are examined to
create a file &lsquo;<span class="file">po/<var>pkgname</var>.pot</span>&rsquo; containing the translatable
messages in the C/C++ files.  If there is a <code>src/windows</code>
directory, files within it are also examined.
</p>
</li>
<li><p> All existing files in directory <code>po</code> with names
&lsquo;<span class="file"><var>lang</var>.po</span>&rsquo; are updated from &lsquo;<span class="file"><var>pkgname</var>.pot</span>&rsquo;,
<code><a href="#topic+checkPoFile">checkPoFile</a></code> is called on the updated file, and if
there are no problems the file is  compiled and
installed under &lsquo;<span class="file">inst/po</span>&rsquo;.
</p>
</li>
<li><p> In a UTF-8 locale, a &lsquo;translation&rsquo; &lsquo;<span class="file">en@quot.po</span>&rsquo; is
created with UTF-8 directional quotes, compiled and installed under
&lsquo;<span class="file">inst/po</span>&rsquo;.
</p>
</li></ul>

<p>Note that C/C++ messages are not automatically prepared for
translation as they need to be explicitly marked for translation in
the source files.  Once that has been done, create an empty file
&lsquo;<span class="file">po/<var>pkgname</var>.pot</span>&rsquo; in the package sources and run this
function again.
</p>
<p><code>pkg = "base"</code> is special (and for use by <span class="rlang"><b>R</b></span> developers only):
the C files are not in the package directory but in the main sources.
</p>


<h3>System requirements</h3>

<p>This function requires the following tools from the GNU
<code>gettext-tools</code>: <code>xgettext</code>, <code>msgmerge</code>,
<code>msgfmt</code>, <code>msginit</code> and <code>msgconv</code>.  These are
part of most Linux distributions and easily compiled from the sources
on Unix-alikes (including macOS).  Pre-compiled versions for
Windows are available in
<a href="https://www.stats.ox.ac.uk/pub/Rtools/goodies/gettext-tools.zip">https://www.stats.ox.ac.uk/pub/Rtools/goodies/gettext-tools.zip</a>.
</p>
<p>It will probably not work correctly for <code>en@quot</code> translations
except in a UTF-8 locale, so these are skipped elsewhere.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xgettext2pot">xgettext2pot</a></code>.
</p>

<hr>
<h2 id='urltools'>Check Package URLs</h2><span id='topic+check_package_urls'></span><span id='topic+parse_URI_reference'></span>

<h3>Description</h3>

<p>Check URLs in package sources.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_package_urls(dir, verbose = FALSE)
parse_URI_reference(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="urltools_+3A_dir">dir</code></td>
<td>
<p>a character string specifying the path to a package's root 
source directory.</p>
</td></tr>
<tr><td><code id="urltools_+3A_verbose">verbose</code></td>
<td>
<p>a logical indicating if output should monitor check
progress.</p>
</td></tr>
<tr><td><code id="urltools_+3A_x">x</code></td>
<td>
<p>a character vector of <abbr>URI</abbr>s.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checking URLs is performed in parallel using <a href="https://CRAN.R-project.org/package=curl"><span class="pkg">curl</span></a> (so this
must be installed for checking).
</p>
<p>The URLs checked are extracted from the package &lsquo;<span class="file">DESCRIPTION</span>&rsquo;
(&lsquo;<span class="samp">&#8288;Description&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;URL&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;BugReports&#8288;</span>&rsquo; fields), Rd,
&lsquo;<span class="file">CITATION</span>&rsquo; and &lsquo;<span class="file">NEWS.md</span>&rsquo; files, if package <a href="https://CRAN.R-project.org/package=xml2"><span class="pkg">xml2</span></a> is
installed also from the &lsquo;<span class="file">.html</span>&rsquo; files in &lsquo;<span class="file">inst/doc</span>&rsquo;, and if
additionally <code>pandoc</code> is available on the system the
&lsquo;<span class="file">README.md</span>&rsquo; and &lsquo;<span class="file">NEWS.md</span>&rsquo; files.
</p>
<p>For efficiency reasons, URLs are first checked using &lsquo;<span class="samp">&#8288;HEAD&#8288;</span>&rsquo;
requests, and the ones with non-OK (200) status codes re-checked via
&lsquo;<span class="samp">&#8288;GET&#8288;</span>&rsquo; requests (unfortunately, &lsquo;<span class="samp">&#8288;HEAD&#8288;</span>&rsquo; requests are not
always honored appropriately).
</p>
<p><code>parse_URI_reference()</code> is a helper which splits URI references
into its scheme, authority, path, query and fragment parts.
See RFC 3986 (<a href="https://www.rfc-editor.org/rfc/rfc3986">https://www.rfc-editor.org/rfc/rfc3986</a>) for more
information.
</p>


<h3>Value</h3>

<p>For <code>check_url_db()</code>, a data frame inheriting from class
<code>check_url_db</code> with information on the URL check problems found.
</p>
<p>For <code>parse_URI_reference()</code>, a data frame with character
variables <code>scheme</code>, <code>authority</code>, <code>path</code>, <code>query</code>
and <code>fragment</code>. 
</p>


<h3>Note</h3>

<p>This functionality is still experimental: interfaces may change in
future versions. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Examples from RFC 3986.
parse_URI_reference(c("foo://example.com:8042/over/there?name=ferret#nose",
                      "urn:example:animal:ferret:nose",
                      "mailto:John.Doe@example.com",
                      "tel:+1-816-555-1212"))
</code></pre>

<hr>
<h2 id='userdir'>R User Directories</h2><span id='topic+R_user_dir'></span>

<h3>Description</h3>

<p>Directories for storing R-related user-specific data, configuration
and cache files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>R_user_dir(package, which = c("data", "config", "cache"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="userdir_+3A_package">package</code></td>
<td>
<p>a character string giving the name of an <span class="rlang"><b>R</b></span> package</p>
</td></tr>
<tr><td><code id="userdir_+3A_which">which</code></td>
<td>
<p>a character string indicating the kind of file(s) of
interest.  Can be abbreviated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For desktop environments using X Windows, the freedesktop.org project
(formerly X Desktop Group, <abbr>XDG</abbr>) developed the <abbr>XDG</abbr> Base Directory
Specification
(<a href="https://specifications.freedesktop.org/basedir-spec">https://specifications.freedesktop.org/basedir-spec</a>) for
standardizing the location where certain files should be placed.  CRAN
package <a href="https://CRAN.R-project.org/package=rappdirs"><span class="pkg">rappdirs</span></a> provides these general locations with
appropriate values for all platforms for which <span class="rlang"><b>R</b></span> is available.
</p>
<p><code>R_user_dir</code> specializes the general mechanism to R package
specific locations for user files, by providing package specific
subdirectories inside a &lsquo;<span class="file">R</span>&rsquo; subdirectory inside the &ldquo;base&rdquo;
directories appropriate for user-specific data, configuration and
cache files (see the examples), with the intent that packages will not
interfere if they work within their respective subdirectories.
</p>
<p>The locations of these base directories can be customized via the
specific environment variables
<span class="env">R_USER_DATA_DIR</span>,
<span class="env">R_USER_CONFIG_DIR</span> and
<span class="env">R_USER_CACHE_DIR</span>.
If these are not set, the general <abbr>XDG</abbr>-style environment variables
<span class="env">XDG_DATA_HOME</span>,
<span class="env">XDG_CONFIG_HOME</span> and
<span class="env">XDG_CACHE_HOME</span>
are used if set, and otherwise, defaults appropriate for the <span class="rlang"><b>R</b></span>
platform in use are employed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
R_user_dir("FOO", "cache")

## Create one, platform agnostically, must work if &lt;normal&gt; :
(Rdb &lt;- R_user_dir("base"))
if(newD &lt;- !dir.exists(Rdb)) # should work user specifically:
    newD &lt;- dir.create(Rdb, recursive=TRUE)
dir(Rdb) # typically empty
if(newD) unlink(Rdb) # cleaning up

list.files(R_user_dir("grid"), full.names = TRUE)
</code></pre>

<hr>
<h2 id='vignetteEngine'>Set or Get a Vignette Processing Engine</h2><span id='topic+vignetteEngine'></span>

<h3>Description</h3>

<p>Vignettes are normally processed by <code><a href="utils.html#topic+Sweave">Sweave</a></code>, but package
writers may choose to use a different engine (e.g., one provided by the
<a href="https://CRAN.R-project.org/package=knitr"><span class="pkg">knitr</span></a>, <a href="https://CRAN.R-project.org/package=noweb"><span class="pkg">noweb</span></a> or <a href="https://CRAN.R-project.org/package=R.rsp"><span class="pkg">R.rsp</span></a> packages).  This function
is used by those packages to register their engines, and internally by
<span class="rlang"><b>R</b></span> to retrieve them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vignetteEngine(name, weave, tangle, pattern = NULL,
	       package = NULL, aspell = list())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vignetteEngine_+3A_name">name</code></td>
<td>
<p>the name of the engine.</p>
</td></tr>
<tr><td><code id="vignetteEngine_+3A_weave">weave</code></td>
<td>
<p>a function to convert vignette source files to PDF/HTML or
intermediate LaTeX output.</p>
</td></tr>
<tr><td><code id="vignetteEngine_+3A_tangle">tangle</code></td>
<td>
<p>a function to convert vignette source files to <span class="rlang"><b>R</b></span> code.</p>
</td></tr>
<tr><td><code id="vignetteEngine_+3A_pattern">pattern</code></td>
<td>
<p>a regular expression pattern for the filenames handled
by this engine, or <code>NULL</code> for the default pattern.</p>
</td></tr>
<tr><td><code id="vignetteEngine_+3A_package">package</code></td>
<td>
<p>the package registering the engine.  By default, this
is the package calling <code>vignetteEngine</code>.</p>
</td></tr>
<tr><td><code id="vignetteEngine_+3A_aspell">aspell</code></td>
<td>
<p>a list with element names <code>filter</code> and/or
<code>control</code> giving the respective arguments to be used when spell
checking the text in the vignette source file with
<code><a href="utils.html#topic+aspell">aspell</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>weave</code> is missing, <code>vignetteEngine</code> will return the currently
registered engine matching <code>name</code> and <code>package</code>.
</p>
<p>If <code>weave</code> is <code>NULL</code>, the specified engine will be deleted.
</p>
<p>Other settings define a new engine. The <code>weave</code> and <code>tangle</code>
functions must be defined with argument lists compatible with
<code>function(file, ...)</code>. Currently the <code>...</code> arguments may
include logical argument <code>quiet</code> and character argument
<code>encoding</code>; others may be added in future. These are described in
the documentation for <code><a href="utils.html#topic+Sweave">Sweave</a></code> and <code><a href="utils.html#topic+Stangle">Stangle</a></code>.
</p>
<p>The <code>weave</code> and <code>tangle</code> functions should return the
filename of the output file that has been produced. Currently the
<code>weave</code> function, when operating on a file named
&lsquo;<span class="file">&lt;name&gt;&lt;pattern&gt;</span>&rsquo; must produce a file named
&lsquo;<span class="file">&lt;name&gt;[.](tex|pdf|html)</span>&rsquo;. 
The &lsquo;<span class="file">.tex</span>&rsquo; files will be processed by <code>pdflatex</code> to
produce &lsquo;<span class="file">.pdf</span>&rsquo; output for display to the user; the others will be
displayed as produced.  The <code>tangle</code> function must produce a file
named &lsquo;<span class="file">&lt;name&gt;[.][rRsS]</span>&rsquo; containing the executable <span class="rlang"><b>R</b></span> code from
the vignette.  The <code>tangle</code> function may support a
<code>split = TRUE</code> argument, and then it should produce files named
&lsquo;<span class="file">&lt;name&gt;.*[.][rRsS]</span>&rsquo;.
</p>
<p>The <code>pattern</code> argument gives a regular expression to match the
extensions of files which are to be processed as vignette input files.
If set to <code>NULL</code>, the default pattern <code>"[.][RrSs](nw|tex)$"</code>
is used.
</p>


<h3>Value</h3>

<p>If the engine is being deleted, <code>NULL</code>.  Otherwise a list
containing components
</p>
<table role = "presentation">
<tr><td><code>name</code></td>
<td>
<p>The name of the engine</p>
</td></tr>
<tr><td><code>package</code></td>
<td>
<p>The name of its package</p>
</td></tr>
<tr><td><code>pattern</code></td>
<td>
<p>The pattern for vignette input files</p>
</td></tr>
<tr><td><code>weave</code></td>
<td>
<p>The weave function</p>
</td></tr>
<tr><td><code>tangle</code></td>
<td>
<p>The tangle function</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Duncan Murdoch and Henrik Bengtsson.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+Sweave">Sweave</a></code> and the &lsquo;Writing R Extensions&rsquo; manual.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(vignetteEngine("Sweave"))
</code></pre>

<hr>
<h2 id='vignetteInfo'>Basic Information about a Vignette</h2><span id='topic+vignetteInfo'></span>

<h3>Description</h3>

<p>Extract metadata from a vignette source file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vignetteInfo(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vignetteInfo_+3A_file">file</code></td>
<td>
<p>file name of the vignette.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="base.html#topic+list">list</a></code> with the following
<code><a href="base.html#topic+character">character</a></code> components:
</p>
<table role = "presentation">
<tr><td><code>file</code></td>
<td>
<p>the <code><a href="base.html#topic+basename">basename</a></code> of the file.</p>
</td></tr>
<tr><td><code>title</code></td>
<td>
<p>the vignette title from
&lsquo;<span class="samp">&#8288;\VignetteIndexEntry&#8288;</span>&rsquo;, possibly an empty string.</p>
</td></tr>
<tr><td><code>depends</code></td>
<td>
<p>a vector of package dependencies from
&lsquo;<span class="samp">&#8288;\VignetteDepends&#8288;</span>&rsquo;, possibly of length 0.</p>
</td></tr>
<tr><td><code>keywords</code></td>
<td>
<p>a vector of keywords from
&lsquo;<span class="samp">&#8288;\VignetteKeyword&#8288;</span>&rsquo;, possibly of length 0.</p>
</td></tr>
<tr><td><code>engine</code></td>
<td>
<p>the <code><a href="#topic+vignetteEngine">vignetteEngine</a></code>, such as
<code>"utils::Sweave"</code> or <code>"knitr::knitr"</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+package_dependencies">package_dependencies</a></code> for recursive dependencies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  gridEx &lt;- system.file("doc", "grid.Rnw", package = "grid")
  vi &lt;- vignetteInfo(gridEx)
  str(vi)
</code></pre>

<hr>
<h2 id='write_PACKAGES'>Generate PACKAGES Files</h2><span id='topic+write_PACKAGES'></span>

<h3>Description</h3>

<p>Generate &lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo; and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo;
files for a repository of source or Mac/Windows binary packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_PACKAGES(dir = ".", fields = NULL,
               type = c("source", "mac.binary", "win.binary"),
               verbose = FALSE, unpacked = FALSE, subdirs = FALSE,
               latestOnly = TRUE, addFiles = FALSE, rds_compress = "xz",
               validate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_PACKAGES_+3A_dir">dir</code></td>
<td>
<p>Character vector describing the location of the repository
(directory including source or binary packages) to generate the
&lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo; and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo; files
from and write them to.
</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_fields">fields</code></td>
<td>

<p>a character vector giving the fields to be used in the
&lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo; and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo; files in
addition to the default ones, or <code>NULL</code> (default).
</p>
<p>The default corresponds to
the fields needed by <code><a href="utils.html#topic+available.packages">available.packages</a></code>:
<code>"Package"</code>, <code>"Version"</code>, <code>"Priority"</code>,
<code>"Depends"</code>, <code>"Imports"</code>, <code>"LinkingTo"</code>,
<code>"Suggests"</code>, <code>"Enhances"</code>, <code>"OS_type"</code>,
<code>"License"</code> and <code>"Archs"</code>, and those fields will always
be included, plus
the file name in field <code>"File"</code> if <code>addFile = TRUE</code>
and the path to the subdirectory in field <code>"Path"</code> if subdirectories
are used.
</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_type">type</code></td>
<td>

<p>Type of packages: currently source &lsquo;<span class="file">.tar.{gz,bz2,xz,zstd}</span>&rsquo; archives,
and macOS or Windows binary (&lsquo;<span class="file">.tgz</span>&rsquo; or &lsquo;<span class="file">.zip</span>&rsquo;,
respectively) packages are supported.  Defaults to
<code>"win.binary"</code> on Windows and to <code>"source"</code> otherwise.
</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_verbose">verbose</code></td>
<td>
<p>logical.  Should packages be listed as they are
processed?</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_unpacked">unpacked</code></td>
<td>
<p>a logical indicating whether the package contents are
available in unpacked form or not (default).</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_subdirs">subdirs</code></td>
<td>
<p>either logical (to indicate if subdirectories should be
included, recursively) or a character vector of names of subdirectories
to include (which are not recursed).</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_latestonly">latestOnly</code></td>
<td>
<p>logical: if multiple versions of a package are
available should only the latest version be included?</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_addfiles">addFiles</code></td>
<td>
<p>logical: should the filenames be included as field
&lsquo;<span class="samp">&#8288;File&#8288;</span>&rsquo; in the &lsquo;<span class="file">PACKAGES</span>&rsquo; file.</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_rds_compress">rds_compress</code></td>
<td>
<p>The type of compression to be used for
&lsquo;<span class="file">PACKAGES.rds</span>&rsquo;: see <code><a href="base.html#topic+saveRDS">saveRDS</a></code>.  The default is the
one found to give maximal compression, and is as used on <abbr>CRAN</abbr>.</p>
</td></tr>
<tr><td><code id="write_PACKAGES_+3A_validate">validate</code></td>
<td>
<p>a logical indicating whether &lsquo;<span class="file">DESCRIPTION</span>&rsquo; files
should be validated, and the corresponding packages skipped in case
this finds problems.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>write_PACKAGES</code> scans the named directory for R packages,
extracts information from each package's &lsquo;<span class="file">DESCRIPTION</span>&rsquo; file, and
writes this information into the &lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo;
and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo; files, where the first two represent the
information in DCF format, and the third serializes it via
<code><a href="base.html#topic+saveRDS">saveRDS</a></code>.
</p>
<p>Including non-latest versions of packages is only useful if they have
less constraining version requirements, so for example
<code>latestOnly = FALSE</code> could be used for a source repository when
&lsquo;<span class="samp">&#8288;foo_1.0&#8288;</span>&rsquo; depends on &lsquo;<span class="samp">&#8288;R &gt;= 2.15.0&#8288;</span>&rsquo; but &lsquo;<span class="samp">&#8288;foo_0.9&#8288;</span>&rsquo; is
available which depends on &lsquo;<span class="samp">&#8288;R &gt;= 2.11.0&#8288;</span>&rsquo;.
</p>
<p>Support for repositories with subdirectories and hence for
<code>subdirs != FALSE</code> depends on recording a <code>"Path"</code> field in
the &lsquo;<span class="file">PACKAGES</span>&rsquo; files.
</p>
<p>Support for more general file names (e.g., other types of compression)
<em>via</em> a <code>"File"</code> field in the &lsquo;<span class="file">PACKAGES</span>&rsquo; files can be
used by <code><a href="utils.html#topic+download.packages">download.packages</a></code>.  If the file names are not of
the standard form, use <code>addFiles = TRUE</code>.
</p>
<p><code>type = "win.binary"</code> uses <code><a href="base.html#topic+unz">unz</a></code> connections to read
all &lsquo;<span class="file">DESCRIPTION</span>&rsquo; files contained in the (zipped) binary packages
for Windows in the given directory <code>dir</code>, and builds files
&lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo; and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo; files from
this information.
</p>
<p>For a remote repository there is a tradeoff between download speed and
time spent by <code><a href="utils.html#topic+available.packages">available.packages</a></code> processing the
downloaded file(s).  For large repositories it is likely to be
beneficial to use <code>rds_compress = "xz"</code>.
</p>


<h3>Value</h3>

<p>Invisibly returns the number of packages described in the resulting
&lsquo;<span class="file">PACKAGES</span>&rsquo;, &lsquo;<span class="file">PACKAGES.gz</span>&rsquo; and &lsquo;<span class="file">PACKAGES.rds</span>&rsquo; files.  If
<code>0</code>, no packages were found and no files were written.
</p>


<h3>Note</h3>

<p>Processing &lsquo;<span class="file">.tar.gz</span>&rsquo; archives to extract the &lsquo;<span class="file">DESCRIPTION</span>&rsquo;
files is quite slow.
</p>
<p>This function can be useful on other OSes to prepare a repository to
be accessed by Windows machines, so <code>type = "win.binary"</code> should
work on all OSes.
</p>


<h3>Author(s)</h3>

<p>Uwe Ligges and R-core.
</p>


<h3>See Also</h3>

<p>See <code><a href="base.html#topic+read.dcf">read.dcf</a></code> and <code><a href="base.html#topic+write.dcf">write.dcf</a></code> for reading
&lsquo;<span class="file">DESCRIPTION</span>&rsquo; files and writing the &lsquo;<span class="file">PACKAGES</span>&rsquo; and
&lsquo;<span class="file">PACKAGES.gz</span>&rsquo; files. See <code><a href="#topic+update_PACKAGES">update_PACKAGES</a></code> for
efficiently updating existing &lsquo;<span class="file">PACKAGES</span>&rsquo; and &lsquo;<span class="file">PACKAGES.gz</span>&rsquo;
files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write_PACKAGES("c:/myFolder/myRepository")  # on Windows
write_PACKAGES("/pub/RWin/bin/windows/contrib/2.9",
               type = "win.binary")  # on Linux

## End(Not run)</code></pre>

<hr>
<h2 id='xgettext'>Extract Translatable Messages from R Files in a Package</h2><span id='topic+xgettext'></span><span id='topic+xngettext'></span><span id='topic+xgettext2pot'></span>

<h3>Description</h3>

<p>For each file in the &lsquo;<span class="file">R</span>&rsquo; directory (including system-specific
subdirectories) of a <em>source</em> package, extract the unique arguments passed
to these &ldquo;message generating&rdquo; calls;
</p>

<dl>
<dt>for <code>xgettext()</code>:</dt><dd>
<p>to <code><a href="base.html#topic+stop">stop</a></code>, <code><a href="base.html#topic+warning">warning</a></code>, <code><a href="base.html#topic+message">message</a></code>,
<code><a href="base.html#topic+packageStartupMessage">packageStartupMessage</a></code>, <code><a href="base.html#topic+gettext">gettext</a></code> and
<code><a href="base.html#topic+gettextf">gettextf</a></code>,</p>
</dd>
<dt>for <code>xngettext()</code>:</dt><dd>
<p>to <code><a href="base.html#topic+ngettext">ngettext</a></code>.</p>
</dd>
</dl>

<p><code>xgettext2pot()</code> calls both <code>xgettext()</code> and then <code>xngettext()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xgettext(dir, verbose = FALSE, asCall = TRUE)

xngettext(dir, verbose = FALSE)

xgettext2pot(dir, potFile, name = "R", version, bugs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="xgettext_+3A_dir">dir</code></td>
<td>
<p>the directory of a source package, i.e., with a &lsquo;<span class="file">./R</span>&rsquo; sub
directory.</p>
</td></tr>
<tr><td><code id="xgettext_+3A_verbose">verbose</code></td>
<td>
<p>logical: should each file be listed as it is processed?</p>
</td></tr>
<tr><td><code id="xgettext_+3A_ascall">asCall</code></td>
<td>
<p>logical: if <code>TRUE</code> each argument is converted to
string and returned whole, otherwise the string literals within each
argument are extracted (recursively). See Examples.</p>
</td></tr>
<tr><td><code id="xgettext_+3A_potfile">potFile</code></td>
<td>
<p>name of <code>po</code> template file to be produced.
Defaults to &lsquo;<span class="file">R-<var>pkgname</var>.pot</span>&rsquo; where
<var>pkgname</var> is the basename of &lsquo;<span class="file">dir</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="xgettext_+3A_name">name</code>, <code id="xgettext_+3A_version">version</code>, <code id="xgettext_+3A_bugs">bugs</code></td>
<td>
<p>as recorded in the template file:
<code>version</code> defaults the version number of the currently running
<span class="rlang"><b>R</b></span>, and <code>bugs</code> to <code>"bugs.r-project.org"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Leading and trailing white space (space, tab and linefeed
(aka newline, i.e., &lsquo;<span class="samp">&#8288;\n&#8288;</span>&rsquo;)) is removed
for all the calls extracted by <code>xgettext()</code>, see
&lsquo;Description&rsquo; above,
as it is by the internal code that passes strings for translation.
</p>
<p>We look to see if the matched functions were called with
<code>domain = NA</code>.  If so, when <code>asCall</code> is true, the whole call
is omitted.  Note that a call might contain a nested call
to <code>gettext</code> (or <code>warning</code>, etc.) whose strings would be visible
if <code>asCall</code> is false.
</p>
<p><code>xgettext2pot</code> calls <code>xgettext</code> and then <code>xngettext</code>,
and writes a PO template file (to <code>potFile</code>) for use with the GNU gettext
tools.  This ensures that the strings for simple translation are
unique in the file (as GNU gettext requires), but does not do so
for <code>ngettext</code> calls (and the rules are not stated in the GNU gettext
manual, but <code>msgfmt</code> complains if there is duplication between
the sets.).
</p>
<p>If applied to the <span class="pkg">base</span> package, this also looks in the &lsquo;<span class="file">.R</span>&rsquo;
files in &lsquo;<span class="file"><var><a href="base.html#topic+R_HOME">R_HOME</a></var>/share/R</span>&rsquo;.
</p>


<h3>Value</h3>

<p>For <code>xgettext</code>, a list of objects of class <code>"xgettext"</code>
(which has a <code>print</code> method), one per source file that
contains potentially translatable strings.
</p>
<p>For <code>xngettext</code>, a list of objects of class <code>"xngettext"</code>,
which are themselves lists of length-2 character vectors.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+update_pkg_po">update_pkg_po</a>()</code> which calls <code>xgettext2pot()</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: ## in a source-directory build (not typical!) of R;
## otherwise, download and unpack the R sources, and replace
## R.home()  by  "&lt;my_path_to_source_R&gt;" :
xgettext(file.path(R.home(), "src", "library", "splines"))

## End(Not run)

## Create source package-like  &lt;tmp&gt;/R/foo.R  and get text from it:
tmpPkg &lt;- tempdir()
tmpRDir &lt;- file.path(tmpPkg, "R")
dir.create(tmpRDir, showWarnings = FALSE)
fnChar &lt;- paste(sep = "\n",
  "foo &lt;- function(x) {",
  "  if (x &lt; -1)  stop('too small')",
  "  # messages unduplicated (not so for ngettext)",
  "  if (x &lt; -.5) stop('too small')",
  "  if (x &lt; 0) {",
  "    warning(",
  "      'sqrt(x) is', sqrt(as.complex(x)),",
  "      ', which may be too small'",
  "    )",
  "  }",
  "  # calls with domain=NA are skipped",
  "  if (x == 0) cat(gettext('x is 0!\n', domain=NA))",
  "  # gettext strings may be ignored due to 'outer' domain=NA",
  "  if (x &gt; 10) warning('x is ', gettextf('%.2f', x), domain=NA)",
  "  # using a custom condition class",
  "  if (x == 42)",
  "    stop(errorCondition(gettext('needs Deep Thought'), class='myError'))",
  "  x",
  "}")

writeLines(fnChar, con = file.path(tmpRDir, "foo.R"))

## [[1]] : suppressing (tmpfile) name to make example Rdiff-able
xgettext(tmpPkg, asCall=TRUE )[[1]] # default; shows calls
xgettext(tmpPkg, asCall=FALSE)[[1]] # doesn't ; but then ' %.2f '

unlink(tmpRDir, recursive=TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
