<!DOCTYPE html><html lang="en-GB"><head><title>Help for package optical</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {optical}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#convergenceplot'><p>Convergence plot</p></a></li>
<li><a href='#drawdesign'><p>Graph for (optimal) design</p></a></li>
<li><a href='#efficiency'><p>Efficiency of optimal design</p></a></li>
<li><a href='#optical'><p>Optimal item calibration</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Optimal Item Calibration</td>
</tr>
<tr>
<td>Version:</td>
<td>1.7.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-05-24</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Description:</td>
<td>The restricted optimal design method is implemented to optimally 
 allocate a set of items that require calibration to a group of examinees.
 The optimization process is based on the method described in detail by 
 Ul Hassan and Miller in their works published in (2019) 
 &lt;<a href="https://doi.org/10.1177%2F0146621618824854">doi:10.1177/0146621618824854</a>&gt; and (2021) &lt;<a href="https://doi.org/10.1016%2Fj.csda.2021.107177">doi:10.1016/j.csda.2021.107177</a>&gt;.
 To use the method, preliminary item characteristics must be provided as input.
 These characteristics can either be expert guesses or based on previous
 calibration with a small number of examinees. The item characteristics
 should be described in the form of parameters for an Item Response
 Theory (IRT) model. These models can include the Rasch model, the
 2-parameter logistic model, the 3-parameter logistic model, or a mixture
 of these models. The output consists of a set of rules for each item
 that determine which examinees should be assigned to each item. The
 efficiency or gain achieved through the optimal design is quantified by
 comparing it to a random allocation. This comparison allows for an
 assessment of how much improvement or advantage is gained by using the
 optimal design approach. This work was supported by the Swedish Research Council
 (Vetenskapsr√•det) Grant 2019-02706.</td>
</tr>
<tr>
<td>Author:</td>
<td>Mahmood Ul Hassan <a href="https://orcid.org/0000-0003-2889-0263"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Frank Miller <a href="https://orcid.org/0000-0003-4161-7851"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>License_restricts_use:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mahmood Ul Hassan &lt;scenic555@gmail.com&gt;</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/scenic555/optical/issues">https://github.com/scenic555/optical/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://scenic555.github.io/optical/">https://scenic555.github.io/optical/</a>,
<a href="https://github.com/scenic555/optical">https://github.com/scenic555/optical</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-24 13:46:02 UTC; sceni</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-25 20:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='convergenceplot'>Convergence plot</h2><span id='topic+convergenceplot'></span>

<h3>Description</h3>

<p>Convergence plots displaying efficiency of design, violations of equivalence
theorem, and alpha(Step length used) vs. iteration number. These plot are
suitable for monitoring the convergence of optimal item calibration algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convergenceplot(yyy, refline = c(0.002, 1e-05))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convergenceplot_+3A_yyy">yyy</code></td>
<td>
<p>a <code><a href="#topic+optical">optical</a></code> object; the output of a call <code><a href="#topic+optical">optical()</a></code></p>
</td></tr>
<tr><td><code id="convergenceplot_+3A_refline">refline</code></td>
<td>
<p>reference line</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Convergence plots have three panel.
</p>

<ul>
<li> <p>First panel monitors efficiency of design vs. iteration number
</p>
</li>
<li> <p>Second panel monitors violations of equivalence theorem vs. iteration number
</p>
</li>
<li> <p>Third panel monitors step size used vs. iteration number
</p>
</li></ul>



<h3>Value</h3>

<p>A convergence plot is displayed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawdesign">drawdesign</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 2PL-models for two items; parameters (a, b)=(1.6, -1) and (1.6, 1), respectively
ip &lt;- cbind(c(1.6, 1.6),c(-1, 1))

yyy &lt;- optical(ip)

convergenceplot(yyy, refline=c(0.002, 0.001*0.005/0.45))
</code></pre>

<hr>
<h2 id='drawdesign'>Graph for (optimal) design</h2><span id='topic+drawdesign'></span>

<h3>Description</h3>

<p>Generate plot for optimal design with four possible layouts. All layouts have design
first incl. efficiency vs. random design; then line with item having minimal
directional derivative
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawdesign(
  yyy,
  ip,
  ablim = 7,
  ylowl = -9999999,
  refline = 0.002,
  textout = TRUE,
  itemnum = NA,
  layout = 1,
  colvec = 1:12
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="drawdesign_+3A_yyy">yyy</code></td>
<td>
<p>a <code><a href="#topic+optical">optical</a></code> object; the output of a call <code><a href="#topic+optical">optical()</a></code></p>
</td></tr>
<tr><td><code id="drawdesign_+3A_ip">ip</code></td>
<td>
<p>matrix with item parameters for all items (number of rows
determines number of items; number of column 2 (2PL) or
3 (3PL or mixed 2/3-PL with NA for 2PL-items in third column).</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_ablim">ablim</code></td>
<td>
<p>ability limits; plots will be made in the range [-ablim, ablim]</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_ylowl">ylowl</code></td>
<td>
<p>y low level (minimum value of directional derivative shown in the plot)</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_refline">refline</code></td>
<td>
<p>reference line correspond to desired minimum violation of equivalence theorem</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_textout">textout</code></td>
<td>
<p>If textout=TRUE (default), the item parameters will be printed if number of items $&lt;5$
and the efficiency vs. the random design; if textout=FALSE, no such text is printed</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_itemnum">itemnum</code></td>
<td>
<p>number of items</p>
</td></tr>
<tr><td><code id="drawdesign_+3A_layout">layout</code></td>
<td>
<p>layouts of plots
</p>

<ul>
<li><p>Layout 1: third panel has directional derivatives (cut at ylowl or lowest value of dirdev)
</p>
</li>
<li><p>Layout 2: third panel has violations of equivalence theorem, should be ideally small. Stopping criterion could be &lt;0.002 (refline)
</p>
</li>
<li><p>Layout 3: third panel monitors efficiency of design vs. iteration number
</p>
</li>
<li><p>Layout 4: third panel monitors violations of equivalence theorem vs. iteration number
</p>
</li>
<li><p>Layout 5: third panel shows item characteristic curves
</p>
</li>
<li><p>Layout 0: only one panel with design
</p>
</li></ul>
</td></tr>
<tr><td><code id="drawdesign_+3A_colvec">colvec</code></td>
<td>
<p>vector of color sequence for items (default is the R-default black, red, green, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An optimal design plot is displayed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+convergenceplot">convergenceplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 2PL-models for two items; parameters (a, b)=(1.6, -1) and (1.6, 1), respectively
ip &lt;- cbind(c(1.6, 1.6),c(-1, 1))

yyy &lt;- optical(ip)

drawdesign(yyy=yyy, ip=ip, ylowl=-1000, refline=0.002, layout=1)
</code></pre>

<hr>
<h2 id='efficiency'>Efficiency of optimal design</h2><span id='topic+efficiency'></span>

<h3>Description</h3>

<p>This function computes the efficiency of the D, I, and A optimal designs
compared to the random design.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>efficiency(
  yyy,
  ip,
  uncert = FALSE,
  ipop,
  oc = "D",
  L = NULL,
  items = FALSE,
  integ = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="efficiency_+3A_yyy">yyy</code></td>
<td>
<p>a <code><a href="#topic+optical">optical</a></code> object; the output of a call <code><a href="#topic+optical">optical()</a></code></p>
</td></tr>
<tr><td><code id="efficiency_+3A_ip">ip</code></td>
<td>
<p>matrix with item parameters for all items (number of rows determines number of items;
number of columns is 2 (for 2PL; or 1PL with common a-parameter when NA in first column from second item)
or 3 (for 3PL; or mixed 2/3-PL with NA for 2PL-items in third column)</p>
</td></tr>
<tr><td><code id="efficiency_+3A_uncert">uncert</code></td>
<td>
<p>if false (default), abilities are assumed to be known; if true,
handling of uncertainties of Bjermo et al. (2021) is used.</p>
</td></tr>
<tr><td><code id="efficiency_+3A_ipop">ipop</code></td>
<td>
<p>matrix with item parameters for operational items
(used if uncert=TRUE, only).</p>
</td></tr>
<tr><td><code id="efficiency_+3A_oc">oc</code></td>
<td>
<p>optimality criterion: &quot;D&quot; (D-optimality, default),
&quot;I&quot; (I-optimality with standard normal weight function), &quot;A&quot; (A-optimality).</p>
</td></tr>
<tr><td><code id="efficiency_+3A_l">L</code></td>
<td>
<p>L-matrix (not used for D-optimality)</p>
</td></tr>
<tr><td><code id="efficiency_+3A_items">items</code></td>
<td>
<p>if false (default), only total block efficiency is returned; if true,
criteria for optimal and random and the efficiency
for each item are reported in each column of output. Last column are then
total criteria and efficiency. D-, L-, I-, A-optimality</p>
</td></tr>
<tr><td><code id="efficiency_+3A_integ">integ</code></td>
<td>
<p>if true (default), integrate() is used for computation of partial
information matrices; if false, Riemann rule is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numerical value is displayed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+optical">optical</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 2PL-models for two items; parameters (a, b)=(1.6, -1) and (1.6, 1), respectively
ip &lt;- cbind(c(1.6, 1.6),c(-1, 1))

yyy &lt;- optical(ip)

# Efficiency of A-optimal design compared to random design
efficiency(yyy, ip, oc="A")


# Efficiency of D-optimal design compared to random design
efficiency(yyy, ip, oc="D")

# Efficiency of I-optimal design compared to random design
efficiency(yyy, ip, oc="I")

</code></pre>

<hr>
<h2 id='optical'>Optimal item calibration</h2><span id='topic+optical'></span>

<h3>Description</h3>

<p>Calibrate items following a 2PL, 3PL, mixture of 2PL and 3PL
model, or 2PL with common discrimination for all items (Rasch-type).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optical(
  ip,
  oc = "D",
  uncert = FALSE,
  ipop,
  imf = c(0.005, 0.01, 0.02, 0.05, 0.1, 0.2, 0.45),
  maxiter = rep(300, 6),
  eps = rep(0.002, 6),
  nnn = c(0, 50, 50, 200, 200, 200),
  nsp = c(0.001, 1e-04, 1e-04, 1e-05, 1e-05, 1e-05),
  sss = 0.001,
  falpha = 1.08,
  sdr = TRUE,
  ig = 3,
  ex = 0,
  integ = TRUE,
  show_progress = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="optical_+3A_ip">ip</code></td>
<td>
<p>matrix with item parameters for all items (number of rows determines
number of items; number of column is 2 (2PL or Rasch-type with NA from second
item in first column) or 3 (3PL or mixed 2/3-PL with NA for
2PL-items in third column).</p>
</td></tr>
<tr><td><code id="optical_+3A_oc">oc</code></td>
<td>
<p>optimality criterion: &quot;D&quot; (D-optimality, default),
&quot;I&quot; (I-optimality with standard normal weight function), &quot;A&quot; (A-optimality).</p>
</td></tr>
<tr><td><code id="optical_+3A_uncert">uncert</code></td>
<td>
<p>if false (default), abilities are assumed to be known; if true,
handling of uncertainties of Bjermo et al. (2021) is used.</p>
</td></tr>
<tr><td><code id="optical_+3A_ipop">ipop</code></td>
<td>
<p>matrix with item parameters for operational items
(used if uncert=TRUE, only).</p>
</td></tr>
<tr><td><code id="optical_+3A_imf">imf</code></td>
<td>
<p>the vector of step-lengths; default
c(0.005, 0.01, 0.02, 0.05, 0.1, 0.2, 0.45).</p>
</td></tr>
<tr><td><code id="optical_+3A_maxiter">maxiter</code></td>
<td>
<p>maximal number of iterations in each inner loop, the length
of this vector defines the number of outer loops.</p>
</td></tr>
<tr><td><code id="optical_+3A_eps">eps</code></td>
<td>
<p>convergence criterion (maximum violation of eq.th.), vector with
value for each iteration in the outer loop, but the same number for all
iterations is recommended.</p>
</td></tr>
<tr><td><code id="optical_+3A_nnn">nnn</code></td>
<td>
<p>number of new nodes added at each position in the adaptive grid,
vector with value for each iteration in the outer loop (nnn [1] not used).</p>
</td></tr>
<tr><td><code id="optical_+3A_nsp">nsp</code></td>
<td>
<p>node spacing between new nodes, vector with value for each iteration
in the outer loop (nsp [1] is the spacing between nodes of the starting grid).</p>
</td></tr>
<tr><td><code id="optical_+3A_sss">sss</code></td>
<td>
<p>step size stopping criterion.</p>
</td></tr>
<tr><td><code id="optical_+3A_falpha">falpha</code></td>
<td>
<p>factor alpha for adjusting the step size vector (should be &gt; 1).</p>
</td></tr>
<tr><td><code id="optical_+3A_sdr">sdr</code></td>
<td>
<p>stop if design repeated (flag TRUE/FALSE).</p>
</td></tr>
<tr><td><code id="optical_+3A_ig">ig</code></td>
<td>
<p>inner grid between -ig and ig.</p>
</td></tr>
<tr><td><code id="optical_+3A_ex">ex</code></td>
<td>
<p>intervals of size &lt; ex will be removed (consolidate);
if ex=0, no consolidation will be done.</p>
</td></tr>
<tr><td><code id="optical_+3A_integ">integ</code></td>
<td>
<p>if true (default), integrate() is used for computation of partial
information matrices; if false, Riemann rule is used.</p>
</td></tr>
<tr><td><code id="optical_+3A_show_progress">show_progress</code></td>
<td>
<p>if 1 (default), no output will be printed for each iteration.
If 2, the + symbols will be printed on a line for each Iteration
If 3, some output of the function will be printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Result of this function is a list with following instances:
</p>
<table role = "presentation">
<tr><td><code>dd</code></td>
<td>
<p>directional derivatives of optimal solution.</p>
</td></tr>
<tr><td><code>xi</code></td>
<td>
<p>optimal solution.</p>
</td></tr>
<tr><td><code>t</code></td>
<td>
<p>final grid of ability values which was used.</p>
</td></tr>
<tr><td><code>viomax</code></td>
<td>
<p>largest violation of eq.th. from final solution (if &lt; eps, alg.
has converged, otherwise not).</p>
</td></tr>
<tr><td><code>h1</code></td>
<td>
<p>interval boundaries for optimal solution.</p>
</td></tr>
<tr><td><code>ht</code></td>
<td>
<p>Refined table of interval boundaries for optimal design with
calibrated items and their corresponding probabilities</p>
</td></tr>
<tr><td><code>mooiter</code></td>
<td>
<p>monitoring iterations; information about each iteration to produce
convergence plots.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>running time of algorithm in minutes.</p>
</td></tr>
<tr><td><code>oc</code></td>
<td>
<p>optimality criterion (&quot;D&quot;, &quot;I&quot;, &quot;A&quot;, &quot;L&quot;).</p>
</td></tr>
<tr><td><code>L</code></td>
<td>
<p>L-matrix (not for D-optimality).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Mahmood Ul Hassan (<a href="mailto:scenic555@gmail.com">scenic555@gmail.com</a>);
Frank Miller (<a href="mailto:frank.miller@liu.se">frank.miller@liu.se</a>)
</p>


<h3>References</h3>

<p>Ul Hassan and Miller (2021). <a href="https://www.sciencedirect.com/science/article/pii/S0167947321000116?via%3Dihub">An exchange algorithm for optimal calibration of items in computerized achievement tests</a>.<em>Computational Statistics and
Data Analysis, 157</em>: 107177.
</p>
<p>Ul Hassan and Miller (2019). <a href="https://link.springer.com/article/10.1007/s11336-019-09673-6">Optimal item calibration for computerized achievement tests</a>. Psychometrika, 84, 1101-1128.
</p>
<p>Bjermo, Fackle-Fornius, and Miller (2021). <a href="https://urn.kb.se/resolve?urn=urn%3Anbn%3Ase%3Asu%3Adiva-198065">Optimizing Calibration Designs with Uncertainty in Abilities</a>. Manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+drawdesign">drawdesign</a></code>, <code><a href="#topic+convergenceplot">convergenceplot</a></code>,
<code><a href="#topic+efficiency">efficiency</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 2PL-models for two items; parameters (a, b)=(1.6, -1) and (1.6, 1), respectively

ip &lt;- cbind(c(1.6, 1.6),c(-1, 1))

yyy &lt;- optical(ip)

# Table of interval boundaries for D-optimal design with items and
# probabilities (expected proportion of examinees in this interval)
yyy$ht



# 1PL-models with common discrimination parameter for two items
# (model assumption is that both have same discrimination);
# parameters (a, b)=(1.6, -1) and (1.6, 1), respectively;
# NA for discrimination means that item has same parameter as preceeding item
ip &lt;- cbind(c(1.6, NA), c(-1, 1))

yyy &lt;- optical(ip)

# Table of interval boundaries for D-optimal design with items and
# probabilities (expected proportion of examinees in this interval)
yyy$ht


# 3PL-models for three items; parameters (a, b, c)=(1, 2, 2.5),
# (-1.5, 0.5, 2) and (0.2, 0.1, 0.05), respectively.
ip &lt;- cbind(c(1, 2, 2.5),c(-1.5, 0.5, 2),c(0.2, 0.1, 0.05))

yyy &lt;- optical(ip)

# Table of interval boundaries for D-optimal design with items and
# probabilities (expected proportion of examinees in this interval)
yyy$ht

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
