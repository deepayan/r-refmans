<!DOCTYPE html><html><head><title>Help for package rasterList</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rasterList}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#crop+2CRasterList-method'><p><code>Crop</code> methods for a <code>RasterList-class</code> object.</p></a></li>
<li><a href='#is.RasterList'><p>Is a <code>RasterList-class</code> object ?</p></a></li>
<li><a href='#raster+2CRasterList-method'><p><code>Raster</code> methods for a <code>RasterList-class</code> object.</p></a></li>
<li><a href='#rasterList'><p>Creates a <code>RasterList-class</code>  object</p></a></li>
<li><a href='#RasterList-class'><p>RasterList-class</p></a></li>
<li><a href='#RasterList-Package'><p>RasterList: A package for Rasters Where Cells are Generic Objects</p></a></li>
<li><a href='#RasterListApply'><p>A function for operations among  <code>RasterList-class</code> objects.</p></a></li>
<li><a href='#rasterListFun'><p>Execution of the elements of a <code>RasterList</code></p></a></li>
<li><a href='#stack+2CRasterList-method'><p>Creates a <code>RasterStack-class</code>  object from a <code>RasterList-class</code></p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Title:</td>
<td>A Raster Where Cells are Generic Objects</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Description:</td>
<td>A S4 class has been created such that complex operations can be
    executed on each cell of a raster map. The raster of objects contains a raster map with the addition of a list of generic objects: one
    object for each raster cells. It allows to write few lines of R code for complex
    map algebra. Two environmental applications about frequency analysis of raster
    map of precipitation and creation of a raster map of soil water retention curves
    have been presented.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.20</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-17</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ecor/rasterList">https://github.com/ecor/rasterList</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.0.1),raster,methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>lmom,testthat,sp,sf,soilwater,lubridate,ggplot2,gridExtra,knitcitations,leaflet,lmomPi,stringr,trend,knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-17 13:53:48 UTC; ecor</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-17 15:20:06 UTC</td>
</tr>
<tr>
<td>Author:</td>
<td>Emanuele Cordano [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emanuele Cordano &lt;emanuele.cordano@gmail.com&gt;</td>
</tr>
</table>
<hr>
<h2 id='crop+2CRasterList-method'><code>Crop</code> methods for a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object.</h2><span id='topic+crop+2CRasterList-method'></span><span id='topic+crop'></span>

<h3>Description</h3>

<p><code>Crop</code> methods for a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterList'
crop(x, y, check.RasterList = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crop+2B2CRasterList-method_+3A_x">x</code></td>
<td>
<p>a valid object</p>
</td></tr>
<tr><td><code id="crop+2B2CRasterList-method_+3A_y">y</code></td>
<td>
<p>a Spatial Object or an Extent</p>
</td></tr>
<tr><td><code id="crop+2B2CRasterList-method_+3A_check.rasterlist">check.RasterList</code></td>
<td>
<p>logical value. If it is <code>TRUE</code>, it checks the <code>x</code> <code><a href="#topic+RasterList-class">RasterList-class</a></code> object. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="crop+2B2CRasterList-method_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a &quot;cropped&quot; <code><a href="#topic+RasterList-class">RasterList-class</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

precf &lt;- system.file("map/Mekrou_precipitation.grd", package="rasterList")
prec &lt;- stack(precf)

## Sample L-moments 
if (requireNamespace("lmom",quietly = TRUE)) {
library(lmom)

samlmom &lt;- stack(rasterList(prec,FUN=samlmu))
## Fitting a Random Probability Distribution: it is a 'rasterList' Object
fitdist &lt;- rasterList(samlmom,FUN=pelgam)

##### ZOOM IN 
## set a mask 
mask &lt;-raster( extent(fitdist)/4 )


fitdist_masked &lt;- crop ( x = fitdist,y=mask)
}





</code></pre>

<hr>
<h2 id='is.RasterList'>Is a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object ?</h2><span id='topic+is.RasterList'></span>

<h3>Description</h3>

<p>Is a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object ?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.RasterList(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.RasterList_+3A_x">x</code></td>
<td>
<p>a valid object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a logical variable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
r &lt;- rasterList()
is.RasterList(r)
rr &lt;- raster()
is.RasterList(rr)

f &lt;- system.file("external/test.grd", package="raster")
ra &lt;- rasterList(f)
is.RasterList(rr)



</code></pre>

<hr>
<h2 id='raster+2CRasterList-method'><code>Raster</code> methods for a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object.</h2><span id='topic+raster+2CRasterList-method'></span><span id='topic+raster'></span>

<h3>Description</h3>

<p><code>Raster</code> methods for a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterList'
raster(x, FUN = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster+2B2CRasterList-method_+3A_x">x</code></td>
<td>
<p>a valid <code><a href="#topic+RasterList-class">RasterList-class</a></code> object</p>
</td></tr>
<tr><td><code id="raster+2B2CRasterList-method_+3A_fun">FUN</code></td>
<td>
<p>if it not <code>NULL</code> a function is applied to all elements of the <code>list</code> slot in <code>x</code>.</p>
</td></tr>
<tr><td><code id="raster+2B2CRasterList-method_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="raster.html#topic+RasterLayer-class">RasterLayer-class</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stack">stack</a></code>,<code><a href="#topic+RasterListApply">RasterListApply</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
f &lt;- system.file("external/test.grd", package="raster")
ur &lt;- rasterList(raster(f),FUN=function(x,d){x+0:d},d=10)

r1 &lt;- raster(ur)
r2 &lt;- raster(ur,FUN=function(x){x[2]})

</code></pre>

<hr>
<h2 id='rasterList'>Creates a <code><a href="#topic+RasterList-class">RasterList-class</a></code>  object</h2><span id='topic+rasterList'></span><span id='topic+as.RasterList'></span><span id='topic+rasterList+2CRasterLayer-method'></span><span id='topic+rasterList+2CRasterStack-method'></span><span id='topic+rasterList+2CRasterBrick-method'></span><span id='topic+rasterList+2CRasterList-method'></span>

<h3>Description</h3>

<p>The method <code>rasterList</code> is the constructor of a  <code><a href="#topic+RasterList-class">RasterList-class</a></code> from a generic <code>object</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rasterList(object = NULL, list = NULL, object.name = NA, ...)

as.RasterList(object, ...)

rasterList(object = NULL, list = NULL, object.name = NA, ...)

## S4 method for signature 'RasterLayer'
rasterList(object = NULL, list = NULL, object.name = NA, ...)

## S4 method for signature 'RasterStack'
rasterList(object = NULL, list = NULL, object.name = NA, ...)

## S4 method for signature 'RasterBrick'
rasterList(object = NULL, list = NULL, object.name = NA, ...)

## S4 method for signature 'RasterList'
rasterList(object, list = NULL, object.name = NA, FUN = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rasterList_+3A_object">object</code></td>
<td>
<p>the object to coerce</p>
</td></tr>
<tr><td><code id="rasterList_+3A_list">list</code></td>
<td>
<p>a <code>list</code> object to assign to the raster map.</p>
</td></tr>
<tr><td><code id="rasterList_+3A_object.name">object.name</code></td>
<td>
<p>character string containing the name to assign to <code>object</code>.</p>
</td></tr>
<tr><td><code id="rasterList_+3A_...">...</code></td>
<td>
<p>further arguments for <code><a href="#topic+raster">raster</a></code>(generic) or <code>FUN</code> (<code><a href="#topic+RasterList-class">RasterList-class</a></code>)</p>
</td></tr>
<tr><td><code id="rasterList_+3A_fun">FUN</code></td>
<td>
<p>function that can be used to apply to each element of the list in a <code><a href="#topic+RasterList-class">RasterList-class</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>FUN</code> is useful to create or transform <code><a href="#topic+RasterList-class">RasterList-class</a></code> from other Raster* classes.
</p>


<h3>Value</h3>

<p>a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
f &lt;- system.file("external/test.grd", package="raster")
rr &lt;- rasterList(f) 
rs &lt;- as.RasterList(f)
# The package-provided datasets shall be only used as example datasets. 
precf &lt;- system.file("map/precipitation.grd", package="rasterList")##
## A resampled preciptation raster map based on CHIRS dataset:
## Funk, Chris, Pete Peterson, Martin Landsfeld, Diego Pedreros, James Verdin, 
## Shraddhanand Shukla, Gregory Husak, James Rowland, Laura Harrison, 
## Andrew Hoell and Joel Michaelsen.
## "The climate hazards infrared precipitation with stations - a new environmental 
## record for monitoring extremes". Scientific Data 2, 150066. doi:10.1038/sdata.2015.66 2015. 
## http://chg.geog.ucsb.edu/data/chirps/
##
## Not run: 
if (requireNamespace("lmom",quietly = TRUE) &amp; requireNamespace("lubridate",quietly = TRUE)) {
## Sample L-moments
 library(lmom)
 library(lubridate)
 
prec &lt;- stack(precf)
samlmom &lt;- stack(rasterList(prec,FUN=samlmu))
## Fitting a Random Probability Distribution: it is a 'rasterList' Object
fitdist &lt;- rasterList(samlmom,FUN=pelgam)
}

## End(Not run)

if (requireNamespace("lmom",quietly = TRUE) &amp; requireNamespace("lubridate",quietly = TRUE)) {
library(lmom)
library(lubridate)
precf &lt;- system.file("map/Mekrou_precipitation.grd", package="rasterList")
prec &lt;- stack(precf)
 # Set time
time &lt;- as.Date(names(prec),format="X%Y.%m.%d")
year &lt;- sprintf("X%04d",lubridate::year(time)) ##as.character(time,format="X%Y")

## Compute Annual Precipitation (sum aggregration)
yearlyprec &lt;- stackApply(x=prec,fun=sum,indices=year)
## L-moments
samlmom &lt;- stack(rasterList(yearlyprec,FUN=samlmu))
fitdist &lt;- rasterList(samlmom,FUN=pelgam)

}

</code></pre>

<hr>
<h2 id='RasterList-class'>RasterList-class</h2><span id='topic+RasterList-class'></span>

<h3>Description</h3>

<p>Class <code>RasterList</code>
</p>


<h3>Details</h3>

<p>It contains <code><a href="raster.html#topic+RasterLayer-class">RasterLayer-class</a></code> with the following adjoint slots:
</p>

<dl>
<dt><code>list</code>:</dt><dd><p>a list of generic object whese length corresponds to the number of cells. Each <code>list</code> element for each cell; </p>
</dd>
<dt><code>name</code>:</dt><dd><p>an identification name of the object. Default is <code>NA</code>.</p>
</dd>
</dl>

<p>This class inherits the <code><a href="raster.html#topic+RasterLayer-class">RasterLayer-class</a></code> class considering each pixel of the raster is a generic object.
</p>


<h3>Author(s)</h3>

<p>Emanuele Cordano
</p>


<h3>See Also</h3>

<p><code><a href="#topic+raster">raster</a></code>,<code><a href="raster.html#topic+Raster-class">Raster-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
showClass("RasterList")

</code></pre>

<hr>
<h2 id='RasterList-Package'>RasterList: A package for Rasters Where Cells are Generic Objects</h2><span id='topic+RasterList-Package'></span>

<h3>Description</h3>

<p>The aim of this package is to develop a way to make some complex operations on each
cells of a Raster Maps. Generally raster contains numeric values in each cells and in each band. 
Sometimes complex operation required the definition of particular object, in case such operation should be executed 
for each cell of a raster map, it becomes challanging. Then <code>RasterList-package</code> makes these operations 
easy to be implented with few lines of codes.
</p>


<h3>Details</h3>

<p>The <code><a href="#topic+RasterList-class">RasterList-class</a></code> is a S4 class that inherits the <code><a href="raster.html#topic+RasterLayer-class">RasterLayer-class</a></code> and it  an added slot called <code>list</code>. The <code>list</code> slot is a <code><a href="base.html#topic+list">list</a></code> object of so many elements how many are the cells of the inherited  <code><a href="raster.html#topic+RasterLayer-class">RasterLayer-class</a></code> class,
so that there is bijective corrensponce between a raster cell and a list element.
The 	RasterList package provides three categories of important functions:
</p>
<p><code><a href="#topic+rasterList">rasterList</a></code>: it is the constructor of a  <code><a href="#topic+RasterList-class">RasterList-class</a></code> object from a generic <code>object</code>, it also transforms a <code><a href="#topic+RasterList-class">RasterList-class</a></code> into another one throungh a function argument. 
</p>
<p><code><a href="#topic+rasterListFun">rasterListFun</a></code>: it is a function that constructs  a  particular <code><a href="#topic+RasterList-class">RasterList-class</a></code> object in which the objects are <code>function</code>-type. 
</p>
<p><code><a href="#topic+RasterListApply">RasterListApply</a></code>: it is a function that allows to operate among two or more <code><a href="#topic+RasterList-class">RasterList-class</a></code> objects defined in the same spatial extent through a generic function <code>fun(x,y,...)</code> where <code>x</code> and <code>y</code> are each cell/element of two <code><a href="#topic+RasterList-class">RasterList-class</a></code> objects given as arguments <code>x</code> and <code>y</code> of <code><a href="#topic+RasterListApply">RasterListApply</a></code>.
</p>
<p>Some examples, concerning the fitting of a probability function for each cell of a stack (<code><a href="raster.html#topic+RasterStack-class">RasterStack-class</a></code> object) of precipitation time-series or the estimation of soil water retention curve for each cell of a raster map,   are  shown throughout the package manual. 
The precipitation example dataset in raster format were extracted by the CHIRPS database:
</p>
<p>Funk, Chris, Pete Peterson, Martin Landsfeld, Diego Pedreros, James Verdin, 
Shraddhanand Shukla, Gregory Husak, James Rowland, Laura Harrison, 
Andrew Hoell and Joel Michaelsen.
&quot;The climate hazards infrared precipitation with stations - a new environmental 
record for monitoring extremes&quot;. Scientific Data 2, 150066. doi:10.1038/sdata.2015.66 2015 , 
<a href="https://chc.ucsb.edu/data/chirps">https://chc.ucsb.edu/data/chirps</a>.
</p>
<p>The package-provided datasets shall be only used as example datasets. 
</p>
<p>The development of this package has been sponosored by ACEWATER2 and &quot;Water  for  Growth  and  Poverty Reduction  in  the  Mekrou&quot; projects of the Joint Research Centre of the Europan Commission (<a href="http://aquaknow.jrc.ec.europa.eu">http://aquaknow.jrc.ec.europa.eu</a>).
</p>

<hr>
<h2 id='RasterListApply'>A function for operations among  <code><a href="#topic+RasterList-class">RasterList-class</a></code> objects.</h2><span id='topic+RasterListApply'></span>

<h3>Description</h3>

<p>A function for operations among  <code><a href="#topic+RasterList-class">RasterList-class</a></code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RasterListApply(..., FUN = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="RasterListApply_+3A_...">...</code></td>
<td>
<p>a set of arguments containg the <code><a href="#topic+RasterList-class">RasterList-class</a></code> objects whose lists are operated by <code>FUN</code>.</p>
</td></tr>
<tr><td><code id="RasterListApply_+3A_fun">FUN</code></td>
<td>
<p>a function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="#topic+RasterList-class">RasterList-class</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+mapply">mapply</a></code>,<code><a href="#topic+rasterList">rasterList</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


f &lt;- system.file("external/test.grd", package="raster")

ra &lt;- rasterList(f)
rb &lt;- rasterList(f)

rm &lt;- RasterListApply(x=ra,y=rb,z=10,FUN=function(x,y,z){x+y+z})

### Fitting a probability distribution for precipitation 
### in each cell with "lmon" package (L Moments) 

if (requireNamespace("lmom",quietly = TRUE)) {
library(lmom)


# The package-provided datasets shall be only used as example datasets. 
precf &lt;- system.file("map/Mekrou_precipitation.grd", package="rasterList") ## 
## A resampled preciptation raster map based on CHIRS dataset:
## Funk, Chris, Pete Peterson, Martin Landsfeld, Diego Pedreros, James Verdin, 
## Shraddhanand Shukla, Gregory Husak, James Rowland, Laura Harrison, 
## Andrew Hoell and Joel Michaelsen.
## "The climate hazards infrared precipitation with stations -a new environmental 
## record for monitoring extremes". Scientific Data 2, 150066. doi:10.1038/sdata.2015.66 2015. 
## http://chg.geog.ucsb.edu/data/chirps/
##
prec &lt;- stack(precf)
## Sample L-moments 
samlmom &lt;- stack(rasterList(prec,FUN=samlmu))
## Fitting a Random Probability Distribution: it is a 'rasterList' Object
fitdist &lt;- rasterList(samlmom,FUN=pelgam)

## KS TESTING

kstesting &lt;- RasterListApply(x=rasterList(prec),y="cdfgam",para=fitdist,FUN=ks.test)

## Mapping of p-value 
pval_ks &lt;- raster(kstesting,FUN=function(x){x$p.value})

}

</code></pre>

<hr>
<h2 id='rasterListFun'>Execution of the elements of a <code>RasterList</code></h2><span id='topic+rasterListFun'></span>

<h3>Description</h3>

<p>This fuction transmors a generic  <code><a href="#topic+RasterList-class">RasterList-class</a></code> object into another <code><a href="#topic+RasterList-class">RasterList-class</a></code> object where elemets are all <code>function</code>-type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rasterListFun(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rasterListFun_+3A_object">object</code></td>
<td>
<p>an object to be coerced to <code><a href="#topic+RasterList-class">RasterList-class</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function works with <code>RasterList-class</code>  objects in which all elements of <code>object@list</code> slot are functions. It returns a &quot;global&quot; function that works at &quot;raster&quot; scale. The returned function will have the following usage signature: <code>fun(xval,...)</code> where one <code>xval</code> (if its lengths is different from 1) element is the applied to each element and ... are further common arguments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(sp)
library(rasterList)
library(soilwater)
set.seed(1234)
data(meuse.grid)
data(meuse)
coordinates(meuse.grid) &lt;- ~x+y
coordinates(meuse) &lt;- ~x+y
gridded(meuse.grid) &lt;- TRUE


soilmap &lt;- stack(meuse.grid)[['soil']]
elevmap &lt;- rasterize(x=meuse,y=soilmap,field="elev",fun=mean)
soilparcsv &lt;- system.file("external/soil_data.csv",package="soilwater")
soilpar &lt;- read.table(soilparcsv,stringsAsFactors=FALSE,header=TRUE,sep=",")
## From help(meuse,help_type="html")
##soil type according to the 1:50 000 soil map of the Netherlands. 
## 1 = Rd10A (Calcareous weakly-developed meadow soils, light sandy clay); 
## 2 = Rd90C/VII (Non-calcareous weakly-developed meadow soils, heavy sandy clay to light clay); 
## 3 = Bkd26/VII (Red Brick soil, fine-sandy, silty light clay)
soiltype_id &lt;- c(1,2,3)
soiltype_name &lt;- c("sandy clay","sandy clay","silty clay loam")

meuse.soilrasterlist &lt;- rasterList(soilmap,FUN=function(i,soiltype_name,soilpar){
			
		o &lt;- NULL
		if (!is.na(i)) {
			ii &lt;- which(soilpar$type==soiltype_name[i])	
		    o &lt;- soilpar[ii,]				
			type &lt;- o[["type"]]
			o &lt;- o[names(o)!="type"]
			o &lt;- o[names(o)!="Ks_m_per_hour"]
			names(o)[names(o)=="Ks_m_per_sec"] &lt;- "ks"
			names(o)[names(o)=="swc"] &lt;- "theta_sat"
			names(o)[names(o)=="rwc"] &lt;- "theta_res"
			attr(o,"type") &lt;- type
			## add noise
			noise &lt;- rnorm(length(o))
			o &lt;- o*(1+0.005*noise)
				
			o["m"] &lt;- 1-1/o["n"]
				
				
		} else {
				
			o &lt;- soilpar[which(soilpar$type==soiltype_name[1]),]
			type &lt;- o[["type"]]
			o &lt;- o[names(o)!="type"]
			o &lt;- o[names(o)!="Ks_m_per_hour"]
			names(o)[names(o)=="Ks_m_per_sec"] &lt;- "ks"
			names(o)[names(o)=="swc"] &lt;- "theta_sat"
			names(o)[names(o)=="rwc"] &lt;- "theta_res"
			o[] &lt;- NA
		}
			
		return(o)
},soiltype_name=soiltype_name,soilpar=soilpar)


meuse.swclist &lt;- rasterList(meuse.soilrasterlist,FUN=function(x) {
			
			o &lt;- NA
##			swc       rwc   alpha       n         m           ks
##			9 0.4295507 0.1093227 3.39387 1.39617 0.2837546 2.018317e-07
		
			
			o &lt;- function(psi,...,func="swc"){
				
				args &lt;- c(list(psi=psi,...),as.list(x))
				oo &lt;- do.call(args=args,what=get(func))
				return(oo)
				
			}
			
			
			
			
			
			
			
			return(o)
			
		})


### RasterList with soil water retenction curves (One for each cell!) 

swcfunr &lt;- rasterListFun(meuse.swclist)

## RasterLayer of soil water content assuming a uniformly distrrubted pressure head 
psi &lt;- -0.9
soil_water_content &lt;- raster(swcfunr(psi))
plot(soil_water_content)

## RasterLayer of soil water content from  a generic map of soil water pressure head
psi &lt;- 0.2-(elevmap-(5))
psi[] &lt;- -0.9+0.1*rnorm(ncell(psi[])) ## Alternatively to the values of the previous line!
soil_water_content &lt;- raster(swcfunr(psi))
plot(soil_water_content)

## END 


</code></pre>

<hr>
<h2 id='stack+2CRasterList-method'>Creates a <code><a href="raster.html#topic+RasterStack-class">RasterStack-class</a></code>  object from a <code><a href="#topic+RasterList-class">RasterList-class</a></code></h2><span id='topic+stack+2CRasterList-method'></span><span id='topic+stack'></span>

<h3>Description</h3>

<p>The method transforms a <code><a href="#topic+RasterList-class">RasterList-class</a></code> into a <code><a href="raster.html#topic+RasterStack-class">RasterStack-class</a></code> in case of the list elements are numeric vectors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'RasterList'
stack(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stack+2B2CRasterList-method_+3A_x">x</code></td>
<td>
<p>a <code>rasterList-class</code> object</p>
</td></tr>
<tr><td><code id="stack+2B2CRasterList-method_+3A_...">...</code></td>
<td>
<p>further arguments for <code><a href="#topic+rasterList">rasterList</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="raster.html#topic+RasterStack-class">RasterStack-class</a></code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rasterList">rasterList</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
f &lt;- system.file("external/test.grd", package="raster")

## Creates a simple generic RasterList

rl &lt;- rasterList(f) 

list &lt;- as.list(as.vector(rl))
list &lt;- lapply(X=list,FUN=function (x) {c(x,x+10,x+15)}) 

rl &lt;- rasterList(rl,list=list,object.name="test")

ss &lt;- stack(rl)

il &lt;- 8331
list[[il]] &lt;- numeric(0)
rla &lt;- rasterList(rl,list=list,object.name="test2")
sa &lt;- stack(rla) 
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
