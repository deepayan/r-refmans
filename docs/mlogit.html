<!DOCTYPE html><html lang="en"><head><title>Help for package mlogit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mlogit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mlogit-package'><p>mlogit package: estimation of random utility discrete choice models</p>
by maximum likelihood</a></li>
<li><a href='#Car'><p>Stated Preferences for Car Choice</p></a></li>
<li><a href='#Catsup'><p>Choice of Brand for Catsup</p></a></li>
<li><a href='#cor.mlogit'><p>Correlation structure of the random parameters</p></a></li>
<li><a href='#Cracker'><p>Choice of Brand for Crakers</p></a></li>
<li><a href='#distribution'><p>Functions used to describe the characteristics of estimated random</p>
parameters</a></li>
<li><a href='#effects.mlogit'><p>Marginal effects of the covariates</p></a></li>
<li><a href='#Electricity'><p>Stated preference data for the choice of electricity suppliers</p></a></li>
<li><a href='#Fishing'><p>Choice of Fishing Mode</p></a></li>
<li><a href='#Game'><p>Ranked data for gaming platforms</p></a></li>
<li><a href='#has.intercept'><p>Indicates whether the formula contains an intercept</p></a></li>
<li><a href='#HC'><p>Heating and Cooling System Choice in Newly Built Houses in California</p></a></li>
<li><a href='#Heating'><p>Heating System Choice in California Houses</p></a></li>
<li><a href='#hmftest'><p>Hausman-McFadden Test</p></a></li>
<li><a href='#JapaneseFDI'><p>Japanese Foreign Direct Investment in European Regions</p></a></li>
<li><a href='#logsum'><p>Compute the log-sum or inclusive value/utility</p></a></li>
<li><a href='#miscmethods.mlogit'><p>Methods for mlogit objects</p></a></li>
<li><a href='#mlogit'><p>Multinomial logit model</p></a></li>
<li><a href='#mlogit-deprecated'><p>Some deprecated functions, especially <code>mlogit.data</code>, <code>index</code> and</p>
<code>mFormula</code></a></li>
<li><a href='#mlogit.optim'><p>Non-linear minimization routine</p></a></li>
<li><a href='#Mode'><p>Mode Choice</p></a></li>
<li><a href='#ModeCanada'><p>Mode Choice for the Montreal-Toronto Corridor</p></a></li>
<li><a href='#model.matrix.dfidx_mlogit'><p>Compute the model matrix for RUM</p></a></li>
<li><a href='#NOx'><p>Technologies to reduce NOx emissions</p></a></li>
<li><a href='#plot.mlogit'><p>Plot of the distribution of estimated random parameters</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#RiskyTransport'><p>Risky Transportation Choices</p></a></li>
<li><a href='#rpar'><p>random parameter objects</p></a></li>
<li><a href='#scoretest'><p>The three tests for mlogit models</p></a></li>
<li><a href='#Train'><p>Stated Preferences for Train Traveling</p></a></li>
<li><a href='#vcov.mlogit'><p>vcov method for mlogit objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.1-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-10-01</td>
</tr>
<tr>
<td>Title:</td>
<td>Multinomial Logit Models</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10), dfidx</td>
</tr>
<tr>
<td>Imports:</td>
<td>Formula, zoo, lmtest, statmod, MASS, Rdpack</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, car, nnet, lattice, AER, ggplot2, texreg, rmarkdown</td>
</tr>
<tr>
<td>Description:</td>
<td>Maximum likelihood estimation of random utility discrete
             choice models. The software is described in Croissant (2020)
              &lt;<a href="https://doi.org/10.18637%2Fjss.v095.i11">doi:10.18637/jss.v095.i11</a>&gt; and the underlying methods in
              Train (2009) &lt;<a href="https://doi.org/10.1017%2FCBO9780511805271">doi:10.1017/CBO9780511805271</a>&gt;.</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=mlogit">https://cran.r-project.org/package=mlogit</a>,
<a href="https://r-forge.r-project.org/projects/mlogit/">https://r-forge.r-project.org/projects/mlogit/</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-10-02 10:13:24 UTC; yves</td>
</tr>
<tr>
<td>Author:</td>
<td>Yves Croissant [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yves Croissant &lt;yves.croissant@univ-reunion.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-10-02 12:12:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='mlogit-package'>mlogit package: estimation of random utility discrete choice models
by maximum likelihood</h2><span id='topic+mlogit-package'></span>

<h3>Description</h3>

<p>mlogit provides a model description interface (enhanced
formula-data), a very versatile estimation function and a testing
infrastructure to deal with random utility models.
</p>


<h3>Details</h3>

<p>For a gentle and comprehensive introduction to the
package, see the package's vignettes.
</p>
<p>Croissant Y (2020).
&ldquo;Estimation of Random Utility  Models in R: The mlogit Package&quot;.&rdquo;
<em>Journal of Statistical Software</em>, <b>95</b>(11), 1&ndash;41.
doi: <a href="https://doi.org/10.18637/jss.v095.i11">10.18637/jss.v095.i11</a>.
</p>
<p>Train K (2009).
<em>Discrete Choice Methods with Simulation</em>.
Cambridge University Press.
<a href="https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555">https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555</a>.
</p>

<hr>
<h2 id='Car'>Stated Preferences for Car Choice</h2><span id='topic+Car'></span>

<h3>Description</h3>

<p>a sample of 4654 individuals
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> choice: choice of a vehicule amoung 6 propositions,
</p>
</li>
<li><p> college: college education?,
</p>
</li>
<li><p> hsg2: size of household greater than 2?
</p>
</li>
<li><p> coml5: commulte lower than 5 miles a day?,
</p>
</li>
<li><p> typez: body type, one of regcar (regular car), sportuv (sport utility vehicule), sportcar, stwagon (station wagon), truck, van, for each proposition z from 1 to 6,
</p>
</li>
<li><p> fuelz: fuel for proposition z, one of gasoline, methanol, cng (compressed natural gas), electric.,
</p>
</li>
<li><p> pricez: price of vehicule divided by the logarithme of income,
</p>
</li>
<li><p> rangez: hundreds of miles vehicule can travel between refuelings/rechargings,
</p>
</li>
<li><p> accz: acceleration, tens of seconds required to reach 30 mph from stop,
</p>
</li>
<li><p> speedz: highest attainable speed in hundreds of mph,
</p>
</li>
<li><p> pollutionz: tailpipe emissions as fraction of those for new gas vehicule,
</p>
</li>
<li><p> sizez: 0 for a mini, 1 for a subcompact, 2 for a compact and 3 for a mid&ndash;size or large vehicule,
</p>
</li>
<li><p> spacez: fraction of luggage space in comparable new gas vehicule,
</p>
</li>
<li><p> costz: cost per mile of travel (tens of cents) : home recharging for electric vehicule, station refueling otherwise,
</p>
</li>
<li><p> stationz: fraction of stations that can refuel/recharge vehicule.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://wileyonlinelibrary.com/journal/jae/">Journal of Applied Econometrics data archive</a>.
</p>


<h3>References</h3>

<p>McFadden D, Train K (2000).
&ldquo;Mixed MNL Models for Discrete Response.&rdquo;
<em>Journal of Applied Econometrics</em>, <b>15</b>(5), 447&ndash;470.
ISSN 08837252, 10991255.
</p>

<hr>
<h2 id='Catsup'>Choice of Brand for Catsup</h2><span id='topic+Catsup'></span>

<h3>Description</h3>

<p>a sample of 2798 individuals
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> id: individuals identifiers,
</p>
</li>
<li><p> choice: one of heinz41, heinz32, heinz28, hunts32,
</p>
</li>
<li><p> disp.z: is there a display for brand z ?
</p>
</li>
<li><p> feat.z: is there a newspaper feature advertisement for brand z?
</p>
</li>
<li><p> price.z: price of brand z.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.amstat.org">Journal of Business Economics and Statistics web site</a>.
</p>


<h3>References</h3>

<p>Jain DC, Vilcassim NJ, Chintagunta PK (1994).
&ldquo;A Random-Coefficients Logit Brand-Choice Model Applied to
                  Panel Data.&rdquo;
<em>Journal of Business \&amp; Economic Statistics</em>, <b>12</b>(3), 317-328.
</p>

<hr>
<h2 id='cor.mlogit'>Correlation structure of the random parameters</h2><span id='topic+cor.mlogit'></span><span id='topic+cov.mlogit'></span>

<h3>Description</h3>

<p>Functions that extract the correlation structure of a mlogit object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cor.mlogit(x)

cov.mlogit(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cor.mlogit_+3A_x">x</code></td>
<td>
<p>an <code>mlogit</code> object with random parameters and <code>correlation = TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are deprecated, use <a href="#topic+vcov.mlogit">vcov</a>.
instead.
</p>


<h3>Value</h3>

<p>A numerical matrix which returns either the correlation or
the covariance matrix of the random parameters.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>

<hr>
<h2 id='Cracker'>Choice of Brand for Crakers</h2><span id='topic+Cracker'></span>

<h3>Description</h3>

<p>a sample of 3292 individualscross-section
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> id: individuals identifiers,
</p>
</li>
<li><p> choice: one of sunshine, keebler, nabisco, private,
</p>
</li>
<li><p> disp.z: is there a display for brand z?
</p>
</li>
<li><p> feat.z: is there a newspaper feature advertisement for brand z?
</p>
</li>
<li><p> price.z: price of brand z.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.amstat.org">Journal of Business Economics and Statistics web site</a>.
</p>


<h3>References</h3>

<p>Jain DC, Vilcassim NJ, Chintagunta PK (1994).
&ldquo;A Random-Coefficients Logit Brand-Choice Model Applied to
                  Panel Data.&rdquo;
<em>Journal of Business \&amp; Economic Statistics</em>, <b>12</b>(3), 317-328.
</p>
<p>Paap R, Franses PH (2000).
&ldquo;A dynamic multinomial probit model for brand choice with
                  different long-run and short-run effects of
                  marketing-mix variables.&rdquo;
<em>Journal of Applied Econometrics</em>, <b>15</b>(6), 717-744.
</p>

<hr>
<h2 id='distribution'>Functions used to describe the characteristics of estimated random
parameters</h2><span id='topic+distribution'></span><span id='topic+stdev'></span><span id='topic+med'></span><span id='topic+rg'></span><span id='topic+mean.rpar'></span><span id='topic+med.rpar'></span><span id='topic+stdev.rpar'></span><span id='topic+rg.mlogit'></span><span id='topic+mean.mlogit'></span><span id='topic+med.mlogit'></span><span id='topic+stdev.mlogit'></span><span id='topic+rg.rpar'></span><span id='topic+qrpar'></span><span id='topic+prpar'></span><span id='topic+drpar'></span><span id='topic+qrpar.rpar'></span><span id='topic+prpar.rpar'></span><span id='topic+drpar.rpar'></span><span id='topic+qrpar.mlogit'></span><span id='topic+prpar.mlogit'></span><span id='topic+drpar.mlogit'></span>

<h3>Description</h3>

<p>Functions used to describe the characteristics of estimated random
parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stdev(x, ...)

rg(x, ...)

med(x, ...)

## S3 method for class 'rpar'
mean(x, norm = NULL, ...)

## S3 method for class 'rpar'
med(x, norm = NULL, ...)

## S3 method for class 'rpar'
stdev(x, norm = NULL, ...)

## S3 method for class 'rpar'
rg(x, norm = NULL, ...)

## S3 method for class 'mlogit'
mean(x, par = NULL, norm = NULL, ...)

## S3 method for class 'mlogit'
med(x, par = NULL, norm = NULL, ...)

## S3 method for class 'mlogit'
stdev(x, par = NULL, norm = NULL, ...)

## S3 method for class 'mlogit'
rg(x, par = NULL, norm = NULL, ...)

qrpar(x, ...)

prpar(x, ...)

drpar(x, ...)

## S3 method for class 'rpar'
qrpar(x, norm = NULL, ...)

## S3 method for class 'rpar'
prpar(x, norm = NULL, ...)

## S3 method for class 'rpar'
drpar(x, norm = NULL, ...)

## S3 method for class 'mlogit'
qrpar(x, par = 1, y = NULL, norm = NULL, ...)

## S3 method for class 'mlogit'
prpar(x, par = 1, y = NULL, norm = NULL, ...)

## S3 method for class 'mlogit'
drpar(x, par = 1, y = NULL, norm = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="distribution_+3A_x">x</code></td>
<td>
<p>a <code>mlogit</code> or a <code>rpar</code> object,</p>
</td></tr>
<tr><td><code id="distribution_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
<tr><td><code id="distribution_+3A_norm">norm</code></td>
<td>
<p>the variable used for normalization if any : for the
<code>mlogit</code> method, this should be the name of the parameter, for
the <code>rpar</code> method the absolute value of the parameter,</p>
</td></tr>
<tr><td><code id="distribution_+3A_par">par</code></td>
<td>
<p>the required parameter(s) for the <code>mlogit</code> methods
(either the name or the position of the parameter(s). If
<code>NULL</code>, all the random parameters are used.</p>
</td></tr>
<tr><td><code id="distribution_+3A_y">y</code></td>
<td>
<p>values for which the function has to be evaluated,</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>rpar</code> objects contain all the relevant information about
the distribution of random parameters. These functions enables
to obtain easily descriptive statistics, density, probability
and quantiles of the distribution.
</p>
<p><code>mean</code>, <code>med</code>, <code>stdev</code> and <code>rg</code> compute respectively the mean, the
median, the standard deviation and the range of the random
parameter. <code>qrpar</code>, <code>prpar</code>, <code>drpar</code> return functions that compute
the quantiles, the probability and the density of the random
parameters (note that <code>sd</code> and <code>range</code> are not generic function in
<code>R</code> and that <code>median</code> is, but without <code>...</code>).
</p>


<h3>Value</h3>

<p>a numeric vector for <code>qrpar</code>, <code>drpar</code> and <code>prpar</code>, a
numeric vector for <code>mean</code>, <code>stdev</code> and <code>med</code> and a numeric
matrix for <code>rg</code>.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> for the estimation of random parameters logit
models and <code><a href="#topic+rpar">rpar()</a></code> for the description of <code>rpar</code> objects.
</p>

<hr>
<h2 id='effects.mlogit'>Marginal effects of the covariates</h2><span id='topic+effects.mlogit'></span>

<h3>Description</h3>

<p>The <code>effects</code> method for <code>mlogit</code> objects computes the marginal
effects of the selected covariate on the probabilities of choosing the
alternatives
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlogit'
effects(
  object,
  covariate = NULL,
  type = c("aa", "ar", "rr", "ra"),
  data = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="effects.mlogit_+3A_object">object</code></td>
<td>
<p>a <code>mlogit</code> object,</p>
</td></tr>
<tr><td><code id="effects.mlogit_+3A_covariate">covariate</code></td>
<td>
<p>the name of the covariate for which the effect should be
computed,</p>
</td></tr>
<tr><td><code id="effects.mlogit_+3A_type">type</code></td>
<td>
<p>the effect is a ratio of two marginal variations of the
probability and of the covariate ; these variations can be absolute
<code>"a"</code> or relative <code>"r"</code>. This argument is a string that contains
two letters, the first refers to the probability, the second to the
covariate,</p>
</td></tr>
<tr><td><code id="effects.mlogit_+3A_data">data</code></td>
<td>
<p>a data.frame containing the values for which the effects should
be calculated. The number of lines of this data.frame should be equal to the
number of alternatives,</p>
</td></tr>
<tr><td><code id="effects.mlogit_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the covariate is alternative specific, a <code class="reqn">J \times J</code> matrix is
returned, <code class="reqn">J</code> being the number of alternatives. Each line contains the
marginal effects of the covariate of one alternative on the probability to
choose any alternative. If the covariate is individual specific, a vector of
length <code class="reqn">J</code> is returned.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> for the estimation of multinomial logit
models.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("Fishing", package = "mlogit")
library("zoo")
Fish &lt;- mlogit.data(Fishing, varying = c(2:9), shape = "wide", choice = "mode")
m &lt;- mlogit(mode ~ price | income | catch, data = Fish)
# compute a data.frame containing the mean value of the covariates in
# the sample
z &lt;- with(Fish, data.frame(price = tapply(price, idx(m, 2), mean),
                           catch = tapply(catch, idx(m, 2), mean),
                           income = mean(income)))
# compute the marginal effects (the second one is an elasticity
## IGNORE_RDIFF_BEGIN
effects(m, covariate = "income", data = z)
## IGNORE_RDIFF_END
effects(m, covariate = "price", type = "rr", data = z)
effects(m, covariate = "catch", type = "ar", data = z)
</code></pre>

<hr>
<h2 id='Electricity'>Stated preference data for the choice of electricity suppliers</h2><span id='topic+Electricity'></span>

<h3>Description</h3>

<p>A sample of 2308 households in the United States
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> choice: the choice of the individual, one of 1, 2, 3, 4,
</p>
</li>
<li><p> id: the individual index,
</p>
</li>
<li><p> pfi: fixed price at a stated cents per kWh, with the price
varying over suppliers and experiments, for scenario i=(1, 2, 3,
4),
</p>
</li>
<li><p> cli: the length of contract that the supplier offered, in years
(such as 1 year or 5 years.) During this contract period, the
supplier guaranteed the prices and the buyer would have to pay a
penalty if he/she switched to another supplier. The supplier could
offer no contract in which case either side could stop the
agreement at any time. This is recorded as a contract length of 0,
</p>
</li>
<li><p> loci: is the supplier a local company,
</p>
</li>
<li><p> wki: is the supplier a well-known company,
</p>
</li>
<li><p> todi: a time-of-day rate under which the price is 11 cents per
kWh from 8am to 8pm and 5 cents per kWh from 8pm to 8am. These TOD
prices did not vary over suppliers or experiments: whenever the
supplier was said to offer TOD, the prices were stated as above.
</p>
</li>
<li><p> seasi: a seasonal rate under which the price is 10 cents per kWh
in the summer, 8 cents per kWh in the winter, and 6 cents per kWh
in the spring and fall. Like TOD rates, these prices did not vary.
Note that the price is for the electricity only, not transmission
and distribution, which is supplied by the local regulated utility.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://elsa.berkeley.edu/~train/">Kenneth Train's home page</a>.
</p>


<h3>References</h3>

<p>Huber J, Train K (2000).
&ldquo;On the Similarity of Classical and Bayesian Estimates of Individual Mean Partworths.&rdquo;
<em>Marketing Letters</em>, <b>12</b>, 259&ndash;269.
</p>
<p>Revelt D, Train K (2001).
&ldquo;Customer-Specific Taste Parameters and Mixed Logit: Households' Choice of Electricity Supplier.&rdquo;
Econometrics 0012001, University Library of Munich, Germany.
<a href="https://ideas.repec.org/p/wpa/wuwpem/0012001.html">https://ideas.repec.org/p/wpa/wuwpem/0012001.html</a>.
</p>

<hr>
<h2 id='Fishing'>Choice of Fishing Mode</h2><span id='topic+Fishing'></span>

<h3>Description</h3>

<p>A sample of 1182 individuals in the United-States for the choice of
4 alternative fishing modes.
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> mode: recreation mode choice, one of : beach, pier, boat and
charter,
</p>
</li>
<li><p> price.beach: price for beach mode
</p>
</li>
<li><p> price.pier: price for pier mode,
</p>
</li>
<li><p> price.boat: price for private boat mode,
</p>
</li>
<li><p> price.charter: price for charter boat mode,
</p>
</li>
<li><p> catch.beach: catch rate for beach mode,
</p>
</li>
<li><p> catch.pier: catch rate for pier mode,
</p>
</li>
<li><p> catch.boat: catch rate for private boat mode,
</p>
</li>
<li><p> catch.charter: catch rate for charter boat mode,
</p>
</li>
<li><p> income: monthly income,
</p>
</li></ul>



<h3>Source</h3>

<p>Cameron A, Trivedi P (2005).
<em>Microeconometrics</em>.
Cambridge University Press.
<a href="https://EconPapers.repec.org/RePEc:cup:cbooks:9780521848053">https://EconPapers.repec.org/RePEc:cup:cbooks:9780521848053</a>.
</p>


<h3>References</h3>

<p>Herriges JA, Kling CL (1999).
&ldquo;Nonlinear Income Effects in Random Utility Models.&rdquo;
<em>The Review of Economics and Statistics</em>, <b>81</b>(1), 62-72.
doi: <a href="https://doi.org/10.1162/003465399767923827">10.1162/003465399767923827</a>,  https://doi.org/10.1162/003465399767923827 , <a href="https://doi.org/10.1162/003465399767923827">https://doi.org/10.1162/003465399767923827</a>.
</p>

<hr>
<h2 id='Game'>Ranked data for gaming platforms</h2><span id='topic+Game'></span><span id='topic+Game2'></span>

<h3>Description</h3>

<p>A sample of 91 Dutch individuals
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> ch.Platform: where <code>platform</code> is one of <code>Xbox</code>,
<code>PlayStation</code>, <code>PSPortable</code>, <code>GameCube</code>,
<code>GameBoy</code> and <code>PC</code>. This variables contain the ranking of
the platforms from 1 to 6,
</p>
</li>
<li><p> own.Platform: these 6 variables are dummies which indicate
whether the given plaform is already owned by the respondent,
</p>
</li>
<li><p> age: the age of the respondent,
</p>
</li>
<li><p> hours: hours per week spent on gaming.,
</p>
</li></ul>



<h3>Details</h3>

<p>The data are also provided in long format (use in this case
<code>data(Game2)</code>. In this case, the alternative and the choice
situation are respectively indicated in the <code>platform</code> and
<code>chid</code> variables.
</p>


<h3>Source</h3>

<p><a href="https://wileyonlinelibrary.com/journal/jae/">Journal of Applied Econometrics data archive</a>.
</p>


<h3>References</h3>

<p>Fok D, Paap R, Van Dijk B (2012).
&ldquo;A Rank-Ordered Logit Model With Unobserved Heterogeneity In
                  Ranking Capatibilities.&rdquo;
<em>Journal of Applied Econometrics</em>, <b>27</b>(5), 831-846.
doi: <a href="https://doi.org/10.1002/jae.1223">10.1002/jae.1223</a>, https://onlinelibrary.wiley.com/doi/pdf/10.1002/jae.1223, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/jae.1223">https://onlinelibrary.wiley.com/doi/abs/10.1002/jae.1223</a>.
</p>

<hr>
<h2 id='has.intercept'>Indicates whether the formula contains an intercept</h2><span id='topic+has.intercept'></span><span id='topic+has.intercept.default'></span><span id='topic+has.intercept.formula'></span><span id='topic+has.intercept.Formula'></span><span id='topic+has.intercept.mlogit'></span>

<h3>Description</h3>

<p>This is a generic which provide convenient methods for
formula/Formula object and for specific fitted models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has.intercept(object, ...)

## Default S3 method:
has.intercept(object, ...)

## S3 method for class 'formula'
has.intercept(object, ...)

## S3 method for class 'Formula'
has.intercept(object, rhs = NULL, ...)

## S3 method for class 'mlogit'
has.intercept(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="has.intercept_+3A_object">object</code></td>
<td>
<p>the object</p>
</td></tr>
<tr><td><code id="has.intercept_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
<tr><td><code id="has.intercept_+3A_rhs">rhs</code></td>
<td>
<p>for the Formula method the rhs for which one wants to
know if there is an intercept may be specified</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>

<hr>
<h2 id='HC'>Heating and Cooling System Choice in Newly Built Houses in California</h2><span id='topic+HC'></span>

<h3>Description</h3>

<p>A sample of 250 Californian households
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> depvar: heating system, one of <code>gcc</code> (gas central heat with
cooling), <code>ecc</code> (electric central resistence heat with cooling), <code>erc</code>
(electric room resistence heat with cooling), <code>hpc</code> (electric heat
pump which provides cooling also), <code>gc</code> (gas central heat without
cooling), <code>ec</code> (electric central resistence heat without cooling), <code>er</code>
(electric room resistence heat without cooling),
</p>
</li>
<li><p> ich.z: installation cost of the heating portion of the
system,
</p>
</li>
<li><p> icca: installation cost for cooling,
</p>
</li>
<li><p> och.z: operating cost for the heating portion of the system,
</p>
</li>
<li><p> occa: operating cost for cooling,
</p>
</li>
<li><p> income: annual income of the household.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://elsa.berkeley.edu/~train/">Kenneth Train's home page</a>.
</p>

<hr>
<h2 id='Heating'>Heating System Choice in California Houses</h2><span id='topic+Heating'></span>

<h3>Description</h3>

<p>A sample of 900 Californian households#'
</p>


<h3>Format</h3>

<p>A dataframe containing:
</p>

<ul>
<li><p> idcase: id,
</p>
</li>
<li><p> depvar: heating system, one of gc (gas central), gr (gas room), ec
(electric central), er (electric room), hp (heat pump),
</p>
</li>
<li><p> ic.z: installation cost for heating system z (defined for the
5 heating systems),
</p>
</li>
<li><p> oc.z: annual operating cost for heating system z (defined for
the 5 heating systems),
</p>
</li>
<li><p> pb.z: ratio oc.z/ic.z ,
</p>
</li>
<li><p> income: annual income of the household,
</p>
</li>
<li><p> agehed: age of the household head
</p>
</li>
<li><p> rooms: numbers of rooms in the house,
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://elsa.berkeley.edu/~train/">Kenneth Train's home page</a>.
</p>

<hr>
<h2 id='hmftest'>Hausman-McFadden Test</h2><span id='topic+hmftest'></span><span id='topic+hmftest.formula'></span><span id='topic+hmftest.mlogit'></span>

<h3>Description</h3>

<p>Test the IIA hypothesis (independence of irrelevant alternatives)
for a multinomial logit model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hmftest(x, ...)

## S3 method for class 'formula'
hmftest(x, alt.subset, ...)

## S3 method for class 'mlogit'
hmftest(x, z, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hmftest_+3A_x">x</code></td>
<td>
<p>an object of class <code>mlogit</code> or a formula,</p>
</td></tr>
<tr><td><code id="hmftest_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>mlogit</code> for the <code>formula</code>
method.</p>
</td></tr>
<tr><td><code id="hmftest_+3A_alt.subset">alt.subset</code></td>
<td>
<p>a subset of alternatives,</p>
</td></tr>
<tr><td><code id="hmftest_+3A_z">z</code></td>
<td>
<p>an object of class <code>mlogit</code> or a subset of alternatives
for the <code>mlogit</code> method. This should be the same model as <code>x</code>
estimated on a subset of alternatives,</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an implementation of the Hausman's consistency test for
multinomial logit models. If the independance of irrelevant
alternatives applies, the probability ratio of every two
alternatives depends only on the characteristics of these
alternatives. Consequentely, the results obtained on the estimation
with all the alternatives or only on a subset of them are
consistent, but more efficient in the first case. On the contrary,
only the results obtained from the estimation on a relevant subset
are consistent. To compute this test, one needs a model estimated
with all the alternatives and one model estimated on a subset of
alternatives. This can be done by providing two objects of class
<code>mlogit</code>, one object of class <code>mlogit</code> and a character vector
indicating the subset of alternatives, or a formula and a subset of
alternatives.
</p>


<h3>Value</h3>

<p>an object of class <code>"htest"</code>.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>References</h3>

<p>Hausman, J.A. and D. McFadden (1984), A Specification Test for the
Multinomial Logit Model, <em>Econometrica</em>, <strong>52</strong>, pp.1219&ndash;1240.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## from Greene's Econometric Analysis p. 731

data("TravelMode", package = "AER")
TravelMode &lt;- mlogit.data(TravelMode, choice = "choice", shape = "long",
                          alt.var = "mode", chid.var = "individual",
                          drop.index = FALSE)

## Create a variable of income only for the air mode

TravelMode$avinc &lt;- with(TravelMode, (mode == 'air') * income)

## Estimate the model on all alternatives, with car as the base level
## like in Greene's book.

x &lt;- mlogit(choice ~ wait + gcost + avinc, TravelMode, reflevel = "car")

## Estimate the same model for ground modes only (the variable avinc
## must be dropped because it is 0 for every observation

g &lt;- mlogit(choice ~ wait + gcost, TravelMode, reflevel = "car",
            alt.subset = c("car", "bus", "train"))

## Compute the test

hmftest(x,g)
</code></pre>

<hr>
<h2 id='JapaneseFDI'>Japanese Foreign Direct Investment in European Regions</h2><span id='topic+JapaneseFDI'></span>

<h3>Description</h3>

<p>A sample of 452 Japanese production units in Europe
#'
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> firm: the investment id,
</p>
</li>
<li><p> country: the country,
</p>
</li>
<li><p> region: the region (nuts1 nomenclature),
</p>
</li>
<li><p> choice: a dummy indicating the chosen region ,
</p>
</li>
<li><p> choice.c: the chosen country,
</p>
</li>
<li><p> wage: wage rate in the region,
</p>
</li>
<li><p> unemp: unemployment rate in the region,
</p>
</li>
<li><p> elig: is the country eligible to european subsidies,
</p>
</li>
<li><p> area: the area of the region,
</p>
</li>
<li><p> scrate:  social charge rate (country level),
</p>
</li>
<li><p> ctaxrate: corporate tax rate (country level),
</p>
</li>
<li><p> gdp: regional gdp,
</p>
</li>
<li><p> harris: harris' market potential,
</p>
</li>
<li><p> krugman: krugman's market potential,
</p>
</li>
<li><p> domind: domestic industry count,
</p>
</li>
<li><p> japind: japan industry count,
</p>
</li>
<li><p> network: network count.
</p>
</li></ul>



<h3>Source</h3>

<p>kindly provided by Thierry Mayer
</p>


<h3>References</h3>

<p>Head K, Mayer T (2004).
&ldquo;Market Potential and the Location of Japanese Investment in
                  the European Union.&rdquo;
<em>The Review of Economics and Statistics</em>, <b>86</b>(4), 959-972.
doi: <a href="https://doi.org/10.1162/0034653043125257">10.1162/0034653043125257</a>,  https://doi.org/10.1162/0034653043125257 , <a href="https://doi.org/10.1162/0034653043125257">https://doi.org/10.1162/0034653043125257</a>.
</p>

<hr>
<h2 id='logsum'>Compute the log-sum or inclusive value/utility</h2><span id='topic+logsum'></span>

<h3>Description</h3>

<p>The <code>logsum</code> function computes the inclusive value, or inclusive
utility, which is used to compute the surplus and to estimate the two steps
nested logit model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logsum(
  coef,
  X = NULL,
  formula = NULL,
  data = NULL,
  type = NULL,
  output = c("chid", "obs")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="logsum_+3A_coef">coef</code></td>
<td>
<p>a numerical vector or a <code>mlogit</code> object, from which the
<code>coef</code> vector is extracted,</p>
</td></tr>
<tr><td><code id="logsum_+3A_x">X</code></td>
<td>
<p>a matrix or a <code>mlogit</code> object from which the
<code>model.matrix</code> is extracted,</p>
</td></tr>
<tr><td><code id="logsum_+3A_formula">formula</code></td>
<td>
<p>a formula or a <code>mlogit</code> object from which the
<code>formula</code> is extracted,</p>
</td></tr>
<tr><td><code id="logsum_+3A_data">data</code></td>
<td>
<p>a <code>data.frame</code> or a <code>mlogit</code> object from which the
<code>model.frame</code> is extracted,</p>
</td></tr>
<tr><td><code id="logsum_+3A_type">type</code></td>
<td>
<p>either <code>"group"</code> or <code>"global"</code> : if a <code>group</code>
argument has been provided in the <code>mlogit.data</code>, the inclusive values
are by default computed for every group, otherwise, a unique global
inclusive value is computed for each choice situation,</p>
</td></tr>
<tr><td><code id="logsum_+3A_output">output</code></td>
<td>
<p>the shape of the results: if <code>"chid"</code>, the results is a
vector (if <code>type = "global"</code>) or a matrix (if <code>type = "region"</code>)
with row number equal to the number of choice situation, if <code>"obs"</code> a
vector of length equal to the number of lines of the data in long format is
returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The inclusive value, or inclusive utility, or log-sum is the log of the
denominator of the probabilities of the multinomial logit model. If a
<code>"group"</code> variable is provided in the <code>"mlogit.data"</code> function,
the denominator can either be the one of the multinomial model or those of
the lower model of the nested logit model.
</p>
<p>If only one argument (<code>coef</code>) is provided, it should a <code>mlogit</code>
object and in this case, the <code>coefficients</code> and the <code>model.matrix</code>
are extracted from this model.
</p>
<p>In order to provide a different <code>model.matrix</code>, further arguments could
be used. <code>X</code> is a <code>matrix</code> or a <code>mlogit</code> from which the
<code>model.matrix</code> is extracted. The <code>formula</code>-<code>data</code> interface
can also be used to construct the relevant <code>model.matrix</code>.
</p>


<h3>Value</h3>

<p>either a vector or a matrix.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> for the estimation of a multinomial logit
model.
</p>

<hr>
<h2 id='miscmethods.mlogit'>Methods for mlogit objects</h2><span id='topic+miscmethods.mlogit'></span><span id='topic+residuals.mlogit'></span><span id='topic+df.residual.mlogit'></span><span id='topic+terms.mlogit'></span><span id='topic+model.matrix.mlogit'></span><span id='topic+model.response.mlogit'></span><span id='topic+update.mlogit'></span><span id='topic+print.mlogit'></span><span id='topic+logLik.mlogit'></span><span id='topic+summary.mlogit'></span><span id='topic+print.summary.mlogit'></span><span id='topic+predict.mlogit'></span><span id='topic+fitted.mlogit'></span><span id='topic+coef.mlogit'></span><span id='topic+coef.summary.mlogit'></span><span id='topic+idx.mlogit'></span><span id='topic+idx_name.mlogit'></span>

<h3>Description</h3>

<p>Miscellaneous methods for <code>mlogit</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlogit'
residuals(object, outcome = TRUE, ...)

## S3 method for class 'mlogit'
df.residual(object, ...)

## S3 method for class 'mlogit'
terms(x, ...)

## S3 method for class 'mlogit'
model.matrix(object, ...)

model.response.mlogit(object, ...)

## S3 method for class 'mlogit'
update(object, new, ...)

## S3 method for class 'mlogit'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)

## S3 method for class 'mlogit'
logLik(object, ...)

## S3 method for class 'mlogit'
summary(object, ..., type = c("chol", "cov", "cor"))

## S3 method for class 'summary.mlogit'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)

## S3 method for class 'mlogit'
idx(x, n = NULL, m = NULL)

## S3 method for class 'mlogit'
idx_name(x, n = NULL, m = NULL)

## S3 method for class 'mlogit'
predict(object, newdata = NULL, returnData = FALSE, ...)

## S3 method for class 'mlogit'
fitted(
  object,
  type = c("outcome", "probabilities", "linpred", "parameters"),
  outcome = NULL,
  ...
)

## S3 method for class 'mlogit'
coef(
  object,
  subset = c("all", "iv", "sig", "sd", "sp", "chol"),
  fixed = FALSE,
  ...
)

## S3 method for class 'summary.mlogit'
coef(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="miscmethods.mlogit_+3A_outcome">outcome</code></td>
<td>
<p>a boolean which indicates, for the <code>fitted</code> and the
<code>residuals</code> methods whether a matrix (for each choice, one
value for each alternative) or a vector (for each choice, only
a value for the alternative chosen) should be returned,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_x">x</code>, <code id="miscmethods.mlogit_+3A_object">object</code></td>
<td>
<p>an object of class <code>mlogit</code></p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_new">new</code></td>
<td>
<p>an updated formula for the <code>update</code> method,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_digits">digits</code></td>
<td>
<p>the number of digits,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_width">width</code></td>
<td>
<p>the width of the printing,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_type">type</code></td>
<td>
<p>one of <code>outcome</code> (probability of the chosen
alternative), <code>probabilities</code> (probabilities for all the
alternatives), <code>parameters</code> for individual-level random
parameters for the fitted method, how the correlated random
parameters should be displayed : <code>"chol"</code> for the estimated
parameters (the elements of the Cholesky decomposition matrix),
<code>"cov"</code> for the covariance matrix and <code>"cor"</code> for the
correlation matrix and the standard deviations,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_n">n</code>, <code id="miscmethods.mlogit_+3A_m">m</code></td>
<td>
<p>see <code><a href="dfidx.html#topic+idx">dfidx::idx()</a></code></p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_newdata">newdata</code></td>
<td>
<p>a <code>data.frame</code> for the <code>predict</code> method,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_returndata">returnData</code></td>
<td>
<p>for the <code>predict</code> method, if <code>TRUE</code>, the data is
returned as an attribute,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_subset">subset</code></td>
<td>
<p>an optional vector of coefficients to extract for the
<code>coef</code> method,</p>
</td></tr>
<tr><td><code id="miscmethods.mlogit_+3A_fixed">fixed</code></td>
<td>
<p>if <code>FALSE</code> (the default), constant coefficients are
not returned,</p>
</td></tr>
</table>

<hr>
<h2 id='mlogit'>Multinomial logit model</h2><span id='topic+mlogit'></span>

<h3>Description</h3>

<p>Estimation by maximum likelihood of the multinomial logit model,
with alternative-specific and/or individual specific variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlogit(
  formula,
  data,
  subset,
  weights,
  na.action,
  start = NULL,
  alt.subset = NULL,
  reflevel = NULL,
  nests = NULL,
  un.nest.el = FALSE,
  unscaled = FALSE,
  heterosc = FALSE,
  rpar = NULL,
  probit = FALSE,
  R = 40,
  correlation = FALSE,
  halton = NULL,
  random.nb = NULL,
  panel = FALSE,
  estimate = TRUE,
  seed = 10,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mlogit_+3A_formula">formula</code></td>
<td>
<p>a symbolic description of the model to be estimated,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_data">data</code></td>
<td>
<p>the data: an <code>mlogit.data</code> object or an ordinary
<code>data.frame</code>,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_subset">subset</code></td>
<td>
<p>an optional vector specifying a subset of
observations for <code>mlogit</code>,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_na.action">na.action</code></td>
<td>
<p>a function which indicates what should happen when
the data contains <code>NA</code>s,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_start">start</code></td>
<td>
<p>a vector of starting values,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_alt.subset">alt.subset</code></td>
<td>
<p>a vector of character strings containing the
subset of alternative on which the model should be estimated,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_reflevel">reflevel</code></td>
<td>
<p>the base alternative (the one for which the
coefficients of individual-specific variables are normalized to
0),</p>
</td></tr>
<tr><td><code id="mlogit_+3A_nests">nests</code></td>
<td>
<p>a named list of characters vectors, each names being a
nest, the corresponding vector being the set of alternatives
that belong to this nest,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_un.nest.el">un.nest.el</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the hypothesis of unique
elasticity is imposed for nested logit models,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_unscaled">unscaled</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the unscaled version of the
nested logit model is estimated,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_heterosc">heterosc</code></td>
<td>
<p>a boolean, if <code>TRUE</code>, the heteroscedastic logit
model is estimated,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_rpar">rpar</code></td>
<td>
<p>a named vector whose names are the random parameters
and values the distribution : <code>'n'</code> for normal, <code>'l'</code> for
log-normal, <code>'t'</code> for truncated normal, <code>'u' </code> for uniform,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_probit">probit</code></td>
<td>
<p>if <code>TRUE</code>, a multinomial porbit model is estimated,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_r">R</code></td>
<td>
<p>the number of function evaluation for the gaussian
quadrature method used if <code>heterosc = TRUE</code>, the number of
draws of pseudo-random numbers if <code>rpar</code> is not <code>NULL</code>,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_correlation">correlation</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, if true,
the correlation between random parameters is taken into
account,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_halton">halton</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, if not <code>NULL</code>,
halton sequence is used instead of pseudo-random numbers. If
<code>halton = NA</code>, some default values are used for the prime of
the sequence (actually, the primes are used in order) and for
the number of elements droped. Otherwise, <code>halton</code> should be a
list with elements <code>prime</code> (the primes used) and <code>drop</code> (the
number of elements droped).</p>
</td></tr>
<tr><td><code id="mlogit_+3A_random.nb">random.nb</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code>, a
user-supplied matrix of random,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_panel">panel</code></td>
<td>
<p>only relevant if <code>rpar</code> is not <code>NULL</code> and if the data
are repeated observations of the same unit ; if <code>TRUE</code>, the
mixed-logit model is estimated using panel techniques,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_estimate">estimate</code></td>
<td>
<p>a boolean indicating whether the model should be
estimated or not: if not, the <code>model.frame</code> is returned,</p>
</td></tr>
<tr><td><code id="mlogit_+3A_seed">seed</code></td>
<td>
<p>the seed to use for random numbers (for mixed logit and
probit models),</p>
</td></tr>
<tr><td><code id="mlogit_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>mlogit.data</code> or
<code>mlogit.optim</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For how to use the formula argument, see <code><a href="Formula.html#topic+Formula">Formula()</a></code>.
</p>
<p>The <code>data</code> argument may be an ordinary <code>data.frame</code>. In this case,
some supplementary arguments should be provided and are passed to
<code><a href="#topic+mlogit.data">mlogit.data()</a></code>. Note that it is not necessary to indicate the
choice argument as it is deduced from the formula.
</p>
<p>The model is estimated using the <code><a href="#topic+mlogit.optim">mlogit.optim()</a></code>.
function.
</p>
<p>The basic multinomial logit model and three important extentions of
this model may be estimated.
</p>
<p>If <code>heterosc=TRUE</code>, the heteroscedastic logit model is estimated.
<code>J - 1</code> extra coefficients are estimated that represent the scale
parameter for <code>J - 1</code> alternatives, the scale parameter for the
reference alternative being normalized to 1. The probabilities
don't have a closed form, they are estimated using a gaussian
quadrature method.
</p>
<p>If <code>nests</code> is not <code>NULL</code>, the nested logit model is estimated.
</p>
<p>If <code>rpar</code> is not <code>NULL</code>, the random parameter model is estimated.
The probabilities are approximated using simulations with <code>R</code> draws
and halton sequences are used if <code>halton</code> is not
<code>NULL</code>. Pseudo-random numbers are drawns from a standard normal and
the relevant transformations are performed to obtain numbers drawns
from a normal, log-normal, censored-normal or uniform
distribution. If <code>correlation = TRUE</code>, the correlation between the
random parameters are taken into account by estimating the
components of the cholesky decomposition of the covariance
matrix. With G random parameters, without correlation G standard
deviations are estimated, with correlation G * (G + 1) /2
coefficients are estimated.
</p>


<h3>Value</h3>

<p>An object of class <code>"mlogit"</code>, a list with elements:
</p>

<ul>
<li><p> coefficients: the named vector of coefficients,
</p>
</li>
<li><p> logLik: the value of the log-likelihood,
</p>
</li>
<li><p> hessian: the hessian of the log-likelihood at convergence,
</p>
</li>
<li><p> gradient: the gradient of the log-likelihood at convergence,
</p>
</li>
<li><p> call: the matched call,
</p>
</li>
<li><p> est.stat: some information about the estimation (time used,
optimisation method),
</p>
</li>
<li><p> freq: the frequency of choice,
</p>
</li>
<li><p> residuals: the residuals,
</p>
</li>
<li><p> fitted.values: the fitted values,
</p>
</li>
<li><p> formula: the formula (a <code>Formula</code> object),
</p>
</li>
<li><p> expanded.formula: the formula (a <code>formula</code> object),
</p>
</li>
<li><p> model: the model frame used,
</p>
</li>
<li><p> index: the index of the choice and of the alternatives.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>References</h3>

<p>McFadden D (1973).
&ldquo;Conditional Logit Analysis of Qualitative Choice Behaviour.&rdquo;
In Zarembka P (ed.), <em>Frontiers in Econometrics</em>, 105-142.
Academic Press New York, New York, NY, USA.
</p>
<p>McFadden D (1974).
&ldquo;The measurement of urban travel demand.&rdquo;
<em>Journal of Public Economics</em>, <b>3</b>(4), 303 - 328.
ISSN 0047-2727, <a href="https://www.sciencedirect.com/science/article/pii/0047272774900036">https://www.sciencedirect.com/science/article/pii/0047272774900036</a>.
</p>
<p>Train K (2009).
<em>Discrete Choice Methods with Simulation</em>.
Cambridge University Press.
<a href="https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555">https://EconPapers.repec.org/RePEc:cup:cbooks:9780521766555</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit.data">mlogit.data()</a></code> to shape the data. <code><a href="nnet.html#topic+multinom">nnet::multinom()</a></code> from
package <code>nnet</code> performs the estimation of the multinomial logit
model with individual specific variables. <code><a href="#topic+mlogit.optim">mlogit.optim()</a></code>
details about the optimization function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Cameron and Trivedi's Microeconometrics p.493 There are two
## alternative specific variables : price and catch one individual
## specific variable (income) and four fishing mode : beach, pier, boat,
## charter

data("Fishing", package = "mlogit")
Fish &lt;- dfidx(Fishing, varying = 2:9, shape = "wide", choice = "mode")

## a pure "conditional" model
summary(mlogit(mode ~ price + catch, data = Fish))

## a pure "multinomial model"
summary(mlogit(mode ~ 0 | income, data = Fish))

## which can also be estimated using multinom (package nnet)
summary(nnet::multinom(mode ~ income, data = Fishing))

## a "mixed" model
m &lt;- mlogit(mode ~ price + catch | income, data = Fish)
summary(m)

## same model with charter as the reference level
m &lt;- mlogit(mode ~ price + catch | income, data = Fish, reflevel = "charter")

## same model with a subset of alternatives : charter, pier, beach
m &lt;- mlogit(mode ~ price + catch | income, data = Fish,
            alt.subset = c("charter", "pier", "beach"))

## model on unbalanced data i.e. for some observations, some
## alternatives are missing
# a data.frame in wide format with two missing prices
Fishing2 &lt;- Fishing
Fishing2[1, "price.pier"] &lt;- Fishing2[3, "price.beach"] &lt;- NA
mlogit(mode ~ price + catch | income, Fishing2, shape = "wide", varying = 2:9)

# a data.frame in long format with three missing lines
data("TravelMode", package = "AER")
Tr2 &lt;- TravelMode[-c(2, 7, 9),]
mlogit(choice ~ wait + gcost | income + size, Tr2)

## An heteroscedastic logit model
data("TravelMode", package = "AER")
hl &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode, heterosc = TRUE)

## A nested logit model
TravelMode$avincome &lt;- with(TravelMode, income * (mode == "air"))
TravelMode$time &lt;- with(TravelMode, travel + wait)/60
TravelMode$timeair &lt;- with(TravelMode, time * I(mode == "air"))
TravelMode$income &lt;- with(TravelMode, income / 10)
# Hensher and Greene (2002), table 1 p.8-9 model 5
TravelMode$incomeother &lt;- with(TravelMode, ifelse(mode %in% c('air', 'car'), income, 0))
nl &lt;- mlogit(choice ~ gcost + wait + incomeother, TravelMode,
             nests = list(public = c('train', 'bus'), other = c('car','air')))
             
# same with a comon nest elasticity (model 1)
nl2 &lt;- update(nl, un.nest.el = TRUE)

## a probit model
## Not run: 
pr &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode, probit = TRUE)

## End(Not run)

## a mixed logit model
## Not run: 
rpl &lt;- mlogit(mode ~ price + catch | income, Fishing, varying = 2:9,
              rpar = c(price= 'n', catch = 'n'), correlation = TRUE,
              alton = NA, R = 50)
summary(rpl)
rpar(rpl)
cor.mlogit(rpl)
cov.mlogit(rpl)
rpar(rpl, "catch")
summary(rpar(rpl, "catch"))

## End(Not run)

# a ranked ordered model
data("Game", package = "mlogit")
g &lt;- mlogit(ch ~ own | hours, Game, varying = 1:12, ranked = TRUE,
            reflevel = "PC", idnames = c("chid", "alt"))
</code></pre>

<hr>
<h2 id='mlogit-deprecated'>Some deprecated functions, especially <code>mlogit.data</code>, <code>index</code> and
<code>mFormula</code></h2><span id='topic+mlogit-deprecated'></span><span id='topic+mlogit.data'></span><span id='topic+mFormula'></span><span id='topic+mFormula.formula'></span><span id='topic+mFormula.default'></span><span id='topic+model.matrix.mFormula'></span><span id='topic+is.mFormula'></span><span id='topic+index.dfidx'></span><span id='topic+index.mlogit'></span>

<h3>Description</h3>

<p><code>mlogit.data</code> is deprecated, use <code><a href="dfidx.html#topic+dfidx">dfidx::dfidx()</a></code> instead,
<code>mFormula</code> is replaced by <code><a href="Formula.html#topic+Formula">Formula::Formula()</a></code> and <code><a href="zoo.html#topic+index">zoo::index()</a></code>
by <code>idx</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlogit.data(
  data,
  choice = NULL,
  shape = c("long", "wide"),
  varying = NULL,
  sep = ".",
  alt.var = NULL,
  chid.var = NULL,
  alt.levels = NULL,
  id.var = NULL,
  group.var = NULL,
  opposite = NULL,
  drop.index = FALSE,
  ranked = FALSE,
  subset = NULL,
  ...
)

mFormula(object)

## S3 method for class 'formula'
mFormula(object)

## Default S3 method:
mFormula(object)

## S3 method for class 'mFormula'
model.matrix(object, data, ...)

is.mFormula(object)

## S3 method for class 'dfidx'
index(x, ...)

## S3 method for class 'mlogit'
index(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mlogit-deprecated_+3A_data">data</code></td>
<td>
<p>a <code>data.frame</code>,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_choice">choice</code></td>
<td>
<p>the variable indicating the choice made: it can be
either a logical vector, a numerical vector with 0 where the
alternative is not chosen, a factor with level 'yes' when the
alternative is chosen</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_shape">shape</code></td>
<td>
<p>the shape of the <code>data.frame</code>: whether <code>long</code> if each
row is an alternative or <code>wide</code> if each row is an observation,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_varying">varying</code></td>
<td>
<p>the indexes of the variables that are alternative
specific,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_sep">sep</code></td>
<td>
<p>the seperator of the variable name and the alternative
name (only relevant for a <code>wide</code> <code>data.frame</code>),</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_alt.var">alt.var</code></td>
<td>
<p>the name of the variable that contains the
alternative index (for a <code>long</code> <code>data.frame</code> only) or the name
under which the alternative index will be stored (the default
name is <code>alt</code>),</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_chid.var">chid.var</code></td>
<td>
<p>the name of the variable that contains the choice
index or the name under which the choice index will be stored,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_alt.levels">alt.levels</code></td>
<td>
<p>the name of the alternatives: if null, for a
<code>wide</code> data.frame, they are guessed from the variable names and
the choice variable (both should be the same), for a <code>long</code>
<code>data.frame</code>, they are guessed from the <code>alt.var</code> argument,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_id.var">id.var</code></td>
<td>
<p>the name of the variable that contains the individual
index if any,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_group.var">group.var</code></td>
<td>
<p>the name of the variable that contains the group
index if any,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_opposite">opposite</code></td>
<td>
<p>returns the opposite of the specified variables,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_drop.index">drop.index</code></td>
<td>
<p>should the index variables be dropped from the
<code>data.frame</code>,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_ranked">ranked</code></td>
<td>
<p>a logical value which is true if the response is a
rank,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_subset">subset</code></td>
<td>
<p>a logical expression which defines the subset of
observations to be selected,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>reshape</code>.</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_x">x</code>, <code id="mlogit-deprecated_+3A_object">object</code></td>
<td>
<p>a <code>formula</code>, a <code>dfidx</code> or a <code>mlogit</code> object,</p>
</td></tr>
<tr><td><code id="mlogit-deprecated_+3A_drop">drop</code></td>
<td>
<p>a boolean, equal to <code>FALSE</code> if one wants that a
<code>data.frame</code> is always returned,</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>mlogit.data</code> now returns a <code>dfidx</code> object, <code>mFormula</code>
simply calls <code><a href="Formula.html#topic+Formula">Formula::Formula()</a></code> and returns a <code>Formula</code>
object.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+reshape">stats::reshape()</a></code>
</p>

<hr>
<h2 id='mlogit.optim'>Non-linear minimization routine</h2><span id='topic+mlogit.optim'></span>

<h3>Description</h3>

<p>This function performs efficiently the optimization of the
likelihood functions for multinomial logit models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlogit.optim(
  logLik,
  start,
  method = c("bfgs", "nr", "bhhh"),
  iterlim = 2000,
  tol = 1e-06,
  ftol = 1e-08,
  steptol = 1e-10,
  print.level = 0,
  constPar = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mlogit.optim_+3A_loglik">logLik</code></td>
<td>
<p>the likelihood function to be maximized,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_start">start</code></td>
<td>
<p>the initial value of the vector of coefficients,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_method">method</code></td>
<td>
<p>the method used, one of <code>'nr'</code> for Newton-Ralphson,
<code>'bhhh'</code> for Berndt-Hausman-Hall-Hall and <code>'bfgs'</code>,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_iterlim">iterlim</code></td>
<td>
<p>the maximum number of iterations,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_tol">tol</code></td>
<td>
<p>the value of the criteria for the gradient,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_ftol">ftol</code></td>
<td>
<p>the value of the criteria for the function,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_steptol">steptol</code></td>
<td>
<p>the value of the criteria for the step,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_print.level">print.level</code></td>
<td>
<p>one of (0, 1, 2), the details of the printing
messages.  If <code>'print.level = 0'</code>, no information about the
optimization process is provided, if <code>'print.level = 1'</code> the
value of the likelihood, the step and the stoping criteria is
printing, if <code>'print.level = 2'</code> the vectors of the parameters
and the gradient are also printed.</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_constpar">constPar</code></td>
<td>
<p>a numeric or a character vector which indicates
that some parameters should be treated as constant,</p>
</td></tr>
<tr><td><code id="mlogit.optim_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>f</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The optimization is performed by updating, at each iteration, the
vector of parameters by the amount step * direction, where step is
a positive scalar and direction = H^-1 * g, where g is the gradient
and H^-1 is an estimation of the inverse of the hessian. The choice
of H^-1 depends on the method chosen :
</p>
<p>if <code>method = 'nr'</code>, H is the hessian (<em>i.e.</em> is the second
derivates matrix of the likelihood function),
</p>
<p>if <code>method = 'bhhh'</code>, H is the outer-product of the individual
contributions of each individual to the gradient,
</p>
<p>if <code>method = 'bfgs'</code>, H^-1 is updated at each iteration using a
formula that uses the variations of the vector of parameters and
the gradient. The initial value of the matrix is the inverse of the
outer-product of the gradient (i.e. the bhhh estimator of the
hessian).
</p>
<p>The initial step is 1 and, if the new value of the function is less
than the previous value, it is divided by two, until a higher value
is obtained.
</p>
<p>The routine stops when the gradient is sufficiently close to 0. The
criteria is g * H^-1 * g which is compared to the <code>tol</code>
argument. It also may stops if the number of iterations equals
<code>iterlim</code>.
</p>
<p>The function <code>f</code> has a <code>initial.value</code> argument which is the
initial value of the likelihood. The function is then evaluated a
first time with a step equals to one. If the value is lower than
the initial value, the step is divided by two until the likelihood
increases. The gradient is then computed and the function returns
as attributes the gradient is the step.  This method is more
efficient than other functions available for <code>R</code>:
</p>
<p>For the <code>optim</code> and the <code>maxLik</code> functions, the function and the
gradient should be provided as separate functions. But, for
multinomial logit models, both depends on the probabilities which
are the most time-consuming elements of the model to compute.
</p>
<p>For the <code>nlm</code> function, the fonction returns the gradient as an
attribute. The gradient is therefore computed at each iteration,
even when the function is computed with a step that is unable to
increase the value of the likelihood.
</p>
<p>Previous versions of <code>mlogit</code> depended on the <code>'maxLik'</code> package.
We kept the same interface, namely the <code>start</code>, <code>method</code>,
<code>iterlim</code>, <code>tol</code>, <code>print.level</code> and <code>constPar</code> arguments.
</p>
<p>The default method is <code>'bfgs'</code>, which is known to perform well,
even if the likelihood function is not well behaved and the default
value for <code>print.level = 1</code>, which means moderate printing.
</p>
<p>A special default behavior is performed if a simple multinomial
logit model is estimated. Indeed, for this model, the likelihood
function is concave, the analytical hessian is simple to write and
the optimization is straightforward. Therefore, in this case, the
default method is <code>'nr'</code> and <code>print.level = 0</code>.
</p>


<h3>Value</h3>

<p>a list that contains the followings elements :
</p>

<ul>
<li><p> optimum: the value of the function at the optimum, with
attributes: <code>gradi</code> a matrix that contains the contribution of each
individual to the gradient, <code>gradient</code> the gradient and, if <code style="white-space: pre;">&#8288;method = 'nr', &#8288;</code>hessian' the hessian,
</p>
</li>
<li><p> coefficients: the vector of the parameters at the optimum,
</p>
</li>
<li><p> est.stat: a list that contains some information about the
optimization : <code>'nb.iter'</code> the number of iterations, <code>'eps'</code> the
value of the stoping criteria, <code>'method'</code> the method of
optimization method used, ''message'
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Yves Croissant
</p>

<hr>
<h2 id='Mode'>Mode Choice</h2><span id='topic+Mode'></span>

<h3>Description</h3>

<p>A sample of 453 individuals for 4 transport modes.
</p>


<h3>Format</h3>

<p>A dataframe containing :
</p>

<ul>
<li><p> choice: one of car, carpool, bus or rail,
</p>
</li>
<li><p> cost.z: cost of mode z,
</p>
</li>
<li><p> time.z: time of mode z.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://elsa.berkeley.edu/~train/">Kenneth Train's home page</a>.
</p>

<hr>
<h2 id='ModeCanada'>Mode Choice for the Montreal-Toronto Corridor</h2><span id='topic+ModeCanada'></span>

<h3>Description</h3>

<p>A sample of 3880 travellers for the Montreal-Toronto corridor
</p>


<h3>Format</h3>

<p>A dataframe containing
</p>

<ul>
<li><p> case: the individual index,
</p>
</li>
<li><p> alt: the alternative, one of train, car, bus and air,
</p>
</li>
<li><p> choice: one if the mode is chosen, zero otherwise,
</p>
</li>
<li><p> cost: monetary cost,
</p>
</li>
<li><p> ivt: in vehicule time,
</p>
</li>
<li><p> ovt: out vehicule time,
</p>
</li>
<li><p> frequency: frequency,
</p>
</li>
<li><p> income: income,
</p>
</li>
<li><p> urban: urban,
</p>
</li>
<li><p> noalt: the number of alternatives available.
</p>
</li></ul>



<h3>Source</h3>

<p>kindly provided by S. Koppelman
</p>


<h3>References</h3>

<p>Bhat CR (1995).
&ldquo;A heteroscedastic extreme value model of intercity travel mode choice.&rdquo;
<em>Transportation Research Part B: Methodological</em>, <b>29</b>(6), 471 - 483.
ISSN 0191-2615, <a href="https://www.sciencedirect.com/science/article/pii/0191261595000156">https://www.sciencedirect.com/science/article/pii/0191261595000156</a>.
</p>
<p>Koppelman FS, Wen C (2000).
&ldquo;The paired combinatorial logit model: properties, estimation and application.&rdquo;
<em>Transportation Research Part B: Methodological</em>, <b>34</b>(2), 75 - 89.
ISSN 0191-2615, <a href="https://www.sciencedirect.com/science/article/pii/S0191261599000120">https://www.sciencedirect.com/science/article/pii/S0191261599000120</a>.
</p>
<p>Wen C, Koppelman FS (2001).
&ldquo;The generalized nested logit model.&rdquo;
<em>Transportation Research Part B: Methodological</em>, <b>35</b>(7), 627 - 641.
ISSN 0191-2615, <a href="https://www.sciencedirect.com/science/article/pii/S019126150000045X">https://www.sciencedirect.com/science/article/pii/S019126150000045X</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ModeCanada", package = "mlogit")
bususers &lt;- with(ModeCanada, case[choice == 1 &amp; alt == "bus"])
ModeCanada &lt;- subset(ModeCanada, ! case %in% bususers)
ModeCanada &lt;- subset(ModeCanada, noalt == 4)
ModeCanada &lt;- subset(ModeCanada, alt != "bus")
ModeCanada$alt &lt;- ModeCanada$alt[drop = TRUE]
KoppWen00 &lt;- mlogit.data(ModeCanada, shape='long', chid.var = 'case',
                         alt.var = 'alt', choice = 'choice',
                         drop.index = TRUE)
pcl &lt;- mlogit(choice ~ freq + cost + ivt + ovt, KoppWen00, reflevel = 'car',
              nests = 'pcl', constPar = c('iv:train.air'))

</code></pre>

<hr>
<h2 id='model.matrix.dfidx_mlogit'>Compute the model matrix for RUM</h2><span id='topic+model.matrix.dfidx_mlogit'></span>

<h3>Description</h3>

<p>specific stuff compared to the model.matrix.dfidx method which
simply applies the Formula method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dfidx_mlogit'
model.matrix(object, ..., lhs = NULL, rhs = 1, dot = "separate")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model.matrix.dfidx_mlogit_+3A_object">object</code></td>
<td>
<p>the object</p>
</td></tr>
<tr><td><code id="model.matrix.dfidx_mlogit_+3A_...">...</code>, <code id="model.matrix.dfidx_mlogit_+3A_lhs">lhs</code>, <code id="model.matrix.dfidx_mlogit_+3A_rhs">rhs</code>, <code id="model.matrix.dfidx_mlogit_+3A_dot">dot</code></td>
<td>
<p>see the <code>Formula</code> method</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>

<hr>
<h2 id='NOx'>Technologies to reduce NOx emissions</h2><span id='topic+NOx'></span>

<h3>Description</h3>

<p>A sample of 632 American production units
</p>


<h3>Format</h3>

<p>A dataframe containing:
</p>

<ul>
<li><p> chid: the plant id,
</p>
</li>
<li><p> alt: the alternative,
</p>
</li>
<li><p> id: the owner id,
</p>
</li>
<li><p> choice: the
chosen alternative,
</p>
</li>
<li><p> available: a dummy indicating that the alternative is
available,
</p>
</li>
<li><p> env: the regulatory environment, one of <code>'regulated'</code>,
<code>'deregulated'</code> and <code>'public'</code>,
</p>
</li>
<li><p> post: dummy for post-combustion polution control technology,
</p>
</li>
<li><p> cm: dummy for combustion modification technology,
</p>
</li>
<li><p> lnb: dummy for low NOx burners technology,
</p>
</li>
<li><p> age: age of the plant (in deviation from the mean age).,
</p>
</li>
<li><p> vcost: variable cost,
</p>
</li>
<li><p> kcost: capital cost.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.aeaweb.org/aer/">American Economic Association data archive</a>.
</p>


<h3>References</h3>

<p>Fowlie M (2010).
&ldquo;Emissions Trading, Electricity Restructuring, and Investment
                  in Pollution Abatement.&rdquo;
<em>American Economic Review</em>, <b>100</b>(3), 837-69.
doi: <a href="https://doi.org/10.1257/aer.100.3.837">10.1257/aer.100.3.837</a>, <a href="https://www.aeaweb.org/articles?id=10.1257/aer.100.3.837">https://www.aeaweb.org/articles?id=10.1257/aer.100.3.837</a>.
</p>

<hr>
<h2 id='plot.mlogit'>Plot of the distribution of estimated random parameters</h2><span id='topic+plot.mlogit'></span><span id='topic+plot.rpar'></span>

<h3>Description</h3>

<p>Methods for <code>rpar</code> and <code>mlogit</code> objects which provide a plot of the
distribution of one or all of the estimated random parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlogit'
plot(x, par = NULL, norm = NULL, type = c("density", "probability"), ...)

## S3 method for class 'rpar'
plot(x, norm = NULL, type = c("density", "probability"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.mlogit_+3A_x">x</code></td>
<td>
<p>a <code>mlogit</code> or a <code>rpar</code> object,</p>
</td></tr>
<tr><td><code id="plot.mlogit_+3A_par">par</code></td>
<td>
<p>a subset of the random parameters ; if <code>NULL</code>, all the
parameters are selected,</p>
</td></tr>
<tr><td><code id="plot.mlogit_+3A_norm">norm</code></td>
<td>
<p>the coefficient's name for the <code>mlogit</code> method or the
coefficient's value for the <code>rpar</code> method used for
normalization,</p>
</td></tr>
<tr><td><code id="plot.mlogit_+3A_type">type</code></td>
<td>
<p>the function to be plotted, whether the density or the
probability density function,</p>
</td></tr>
<tr><td><code id="plot.mlogit_+3A_...">...</code></td>
<td>
<p>further arguments, passed to <code>plot.rpar</code> for the
<code>mlogit</code> method and to <code>plot</code> for the <code>rpar</code> method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the <code>rpar</code> method, one plot is drawn. For the <code>mlogit</code> method,
one plot for each selected random parameter is drawn.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> the estimation of random parameters logit
models and <code><a href="#topic+rpar">rpar()</a></code> for the description of <code>rpar</code> objects and
<a href="#topic+distribution">distribution</a> for functions which return informations about
the distribution of random parameters.
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+index'></span><span id='topic+waldtest'></span><span id='topic+lrtest'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>lmtest</dt><dd><p><code><a href="lmtest.html#topic+lrtest">lrtest</a></code>, <code><a href="lmtest.html#topic+waldtest">waldtest</a></code></p>
</dd>
<dt>zoo</dt><dd><p><code><a href="zoo.html#topic+index">index</a></code></p>
</dd>
</dl>

<hr>
<h2 id='RiskyTransport'>Risky Transportation Choices</h2><span id='topic+RiskyTransport'></span>

<h3>Description</h3>

<p>1793 choices by 561 individuals of a transport mode at Freetwon
airport
</p>


<h3>Format</h3>

<p>A dataframe containing:
</p>

<ul>
<li><p> id: individual id,
</p>
</li>
<li><p> choice: 1 for the chosen mode,
</p>
</li>
<li><p> mode: one of <code>Helicopter</code>,<code>WaterTaxi</code>, <code style="white-space: pre;">&#8288;Ferry, and &#8288;</code>Hovercraft',
</p>
</li>
<li><p> cost: the generalised cost of the transport mode,
</p>
</li>
<li><p> risk: the fatality rate, numbers of death per 100,000 trips,
</p>
</li>
<li><p> weight: weights,
</p>
</li>
<li><p> seats: ,
</p>
</li>
<li><p> noise: ,
</p>
</li>
<li><p> crowdness: ,
</p>
</li>
<li><p> convloc: ,
</p>
</li>
<li><p> clientele: ,
</p>
</li>
<li><p> chid: choice situation id,
</p>
</li>
<li><p> african: <code>yes</code> if born in Africa, <code>no</code> otherwise,
</p>
</li>
<li><p> lifeExp: declared life expectancy,
</p>
</li>
<li><p> dwage: declared hourly wage,
</p>
</li>
<li><p> iwage: imputed hourly wage,
</p>
</li>
<li><p> educ: level of education, one of <code>low</code> and <code>high</code>,
</p>
</li>
<li><p> fatalism: self-ranking of the degree of fatalism,
</p>
</li>
<li><p> gender: gender, one of <code>female</code> and <code>male</code>,
</p>
</li>
<li><p> age: age,
</p>
</li>
<li><p> haveChildren: <code>yes</code> if the traveler has children,
<code>no</code> otherwise,
</p>
</li>
<li><p> swim: <code>yes</code> if the traveler knows how to swim, 'no,
otherwise.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.aeaweb.org/aer/">American Economic Association data archive</a>.
</p>


<h3>References</h3>

<p>Len G, Miguel E (2017).
&ldquo;Risky Transportation Choices and the Value of a Statistical Life.&rdquo;
<em>American Economic Journal: Applied Economics</em>, <b>9</b>(1), 202-28.
doi: <a href="https://doi.org/10.1257/app.20160140">10.1257/app.20160140</a>, <a href="https://www.aeaweb.org/articles?id=10.1257/app.20160140">https://www.aeaweb.org/articles?id=10.1257/app.20160140</a>.
</p>

<hr>
<h2 id='rpar'>random parameter objects</h2><span id='topic+rpar'></span><span id='topic+print.rpar'></span><span id='topic+summary.rpar'></span>

<h3>Description</h3>

<p><code>rpar</code> objects contain the relevant information about estimated
random parameters. The homonymous function extract on <code>rpar</code> object
from a <code>mlogit</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rpar(x, par = NULL, norm = NULL, ...)

## S3 method for class 'rpar'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)

## S3 method for class 'rpar'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rpar_+3A_x">x</code>, <code id="rpar_+3A_object">object</code></td>
<td>
<p>a <code>mlogit</code> object,</p>
</td></tr>
<tr><td><code id="rpar_+3A_par">par</code></td>
<td>
<p>the name or the index of the parameters to be extracted
; if <code>NULL</code>, all the parameters are selected,</p>
</td></tr>
<tr><td><code id="rpar_+3A_norm">norm</code></td>
<td>
<p>the coefficient used for normalization if any,</p>
</td></tr>
<tr><td><code id="rpar_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
<tr><td><code id="rpar_+3A_digits">digits</code></td>
<td>
<p>the number of digits</p>
</td></tr>
<tr><td><code id="rpar_+3A_width">width</code></td>
<td>
<p>the width of the printed output</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mlogit</code> objects contain an element called <code>rpar</code> which contain a
list of <code>rpar</code> objects, one for each estimated random
parameter. The <code>print</code> method prints the name of the distribution
and the parameter, the <code>summary</code> behave like the one for numeric
vectors.
</p>


<h3>Value</h3>

<p>a <code>rpar</code> object, which contains:
</p>

<ul>
<li><p> dist: the name of the distribution,
</p>
</li>
<li><p> mean: the first parameter of the distribution,
</p>
</li>
<li><p> sigma: the second parameter of the distribution,
</p>
</li>
<li><p> name: the name of the parameter.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> for the estimation of a random parameters logit
model.
</p>

<hr>
<h2 id='scoretest'>The three tests for mlogit models</h2><span id='topic+scoretest'></span><span id='topic+scoretest.mlogit'></span><span id='topic+scoretest.default'></span><span id='topic+waldtest.mlogit'></span><span id='topic+lrtest.mlogit'></span>

<h3>Description</h3>

<p>Three tests for mlogit models: specific methods for the Wald test
and the likelihood ration test and a new function for the score
test
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scoretest(object, ...)

## S3 method for class 'mlogit'
scoretest(object, ...)

## Default S3 method:
scoretest(object, ...)

## S3 method for class 'mlogit'
waldtest(object, ...)

## S3 method for class 'mlogit'
lrtest(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scoretest_+3A_object">object</code></td>
<td>
<p>an object of class <code>mlogit</code> or a formula,</p>
</td></tr>
<tr><td><code id="scoretest_+3A_...">...</code></td>
<td>
<p>two kinds of arguments can be used. If <code>mlogit</code>
arguments are introduced, initial model is updated using these
arguments. If <code>formula</code> or other <code>mlogit</code> models are
introduced, the standard behavior of <code><a href="lmtest.html#topic+waldtest">lmtest::waldtest()</a></code> and
<code><a href="lmtest.html#topic+lrtest">lmtest::lrtest()</a></code> is followed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>scoretest</code> function and <code>mlogit</code> method for
<code>waldtest</code> and <code>lrtest</code> from the <code>lmtest</code> package provides the
infrastructure to compute the three tests of hypothesis for
<code>mlogit</code> objects.
</p>
<p>The first argument must be a <code>mlogit</code> object. If the second one is a
fitted model or a formula, the behaviour of the three functions is the one
of the default methods of <code>waldtest</code> and <code>lrtest</code>: the two
models provided should be nested and the hypothesis tested is that the
constrained model is the &lsquo;right&rsquo; model.
</p>
<p>If no second model is provided and if the model provided is the
constrained model, some specific arguments of <code>mlogit</code> should be
provided to descibe how the initial model should be updated. If the
first model is the unconstrained model, it is tested versus the
&lsquo;natural&rsquo; constrained model; for example, if the model is a
heteroscedastic logit model, the constrained one is the multinomial
logit model.
</p>


<h3>Value</h3>

<p>an object of class <code>htest</code>.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("mlogit")
library("lmtest")
data("TravelMode", package = "AER")
ml &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode,
             shape = "long", chid.var = "individual", alt.var = "mode")
hl &lt;- mlogit(choice ~ wait + travel + vcost, TravelMode,
             shape = "long", chid.var = "individual", alt.var = "mode",
             method = "bfgs", heterosc = TRUE)
lrtest(ml, hl)
waldtest(hl)
scoretest(ml, heterosc = TRUE)
</code></pre>

<hr>
<h2 id='Train'>Stated Preferences for Train Traveling</h2><span id='topic+Train'></span>

<h3>Description</h3>

<p>A sample of 235 Dutch individuals facing 2929 choice situations
</p>


<h3>Format</h3>

<p>A dataframe containing:
</p>

<ul>
<li><p> id: individual identifient,
</p>
</li>
<li><p> choiceid: choice identifient,
</p>
</li>
<li><p> choice: one of 'A' or 'B',
</p>
</li>
<li><p> price_z: price of proposition z (z = 'A', 'B') in cents of
guilders,
</p>
</li>
<li><p> time_z: travel time of proposition z (z = 'A', 'B') in
minutes,
</p>
</li>
<li><p> comfort_z: comfort of proposition z (z = 'A', 'B'), 0, 1 or
2 in decreasing comfort order,
</p>
</li>
<li><p> change_z: number of changes for proposition z (z = 'A', 'B').
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://wileyonlinelibrary.com/journal/jae/">Journal of Applied Econometrics data archive</a>.
</p>


<h3>References</h3>

<p>Ben-Akiva M, Bolduc D, Bradley M (1993).
&ldquo;Estimation of Travel Choice Models with Randomly Distributed Values of Time.&rdquo;
Papers 9303, Laval - Recherche en Energie.
<a href="https://ideas.repec.org/p/fth/lavaen/9303.html">https://ideas.repec.org/p/fth/lavaen/9303.html</a>.
</p>
<p>Meijer E, Rouwendal J (2006).
&ldquo;Measuring welfare effects in models with random coefficients.&rdquo;
<em>Journal of Applied Econometrics</em>, <b>21</b>(2), 227-244.
doi: <a href="https://doi.org/10.1002/jae.841">10.1002/jae.841</a>, https://onlinelibrary.wiley.com/doi/pdf/10.1002/jae.841, <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/jae.841">https://onlinelibrary.wiley.com/doi/abs/10.1002/jae.841</a>.
</p>

<hr>
<h2 id='vcov.mlogit'>vcov method for mlogit objects</h2><span id='topic+vcov.mlogit'></span><span id='topic+print.vcov.mlogit'></span><span id='topic+summary.vcov.mlogit'></span><span id='topic+print.summary.vcov.mlogit'></span>

<h3>Description</h3>

<p>The <code>vcov</code> method for <code>mlogit</code> objects extract the covariance
matrix of the coefficients, the errors or the random parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlogit'
vcov(
  object,
  what = c("coefficient", "errors", "rpar"),
  subset = c("all", "iv", "sig", "sd", "sp", "chol"),
  type = c("cov", "cor", "sd"),
  reflevel = NULL,
  ...
)

## S3 method for class 'vcov.mlogit'
print(x, ...)

## S3 method for class 'vcov.mlogit'
summary(object, ...)

## S3 method for class 'summary.vcov.mlogit'
print(
  x,
  digits = max(3, getOption("digits") - 2),
  width = getOption("width"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vcov.mlogit_+3A_object">object</code></td>
<td>
<p>a <code>mlogit</code> object (and a <code>vcov.mlogit</code> for the
summary method),</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_what">what</code></td>
<td>
<p>indicates which covariance matrix has to be extracted : the
default value is <code>coefficients</code>, in this case, <code>vcov</code> behaves as
usual. If <code>what</code> equals <code>errors</code> the covariance matrix of the
errors of the model is returned. Finally, if <code>what</code> equals <code>rpar</code>,
the covariance matrix of the random parameters are extracted,</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_subset">subset</code></td>
<td>
<p>the subset of the coefficients that have to be extracted (only
relevant if <code>what</code> <code style="white-space: pre;">&#8288; = "coefficients"&#8288;</code>),</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_type">type</code></td>
<td>
<p>with this argument, the covariance matrix may be returned (the
default) ; the correlation matrix with the standard deviation on the
diagonal may also be extracted,</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_reflevel">reflevel</code></td>
<td>
<p>relevent for the extraction of the errors of a multinomial
probit model ; in this case the covariance matrix is of error differences is
returned and, with this argument, the alternative used for differentiation
is indicated,</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_x">x</code></td>
<td>
<p>a <code>vcov.mlogit</code> or a <code>summary.vcov.mlogit</code> object,</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_digits">digits</code></td>
<td>
<p>the number of digits,</p>
</td></tr>
<tr><td><code id="vcov.mlogit_+3A_width">width</code></td>
<td>
<p>the width of the printing,</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This new interface replaces the <code>cor.mlogit</code> and <code>cov.mlogit</code>
functions which are deprecated.
</p>


<h3>Author(s)</h3>

<p>Yves Croissant
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mlogit">mlogit()</a></code> for the estimation of multinomial logit
models.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
