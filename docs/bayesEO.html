<!DOCTYPE html><html lang="en-US"><head><title>Help for package bayesEO</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bayesEO}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.smooth_gauss_kernel'><p>Compute the 2-D Gaussian kernel</p></a></li>
<li><a href='#bayes_colors'><p>Function to retrieve bayesEO color table</p></a></li>
<li><a href='#bayes_colors_show'><p>Function to show colors in SITS</p></a></li>
<li><a href='#bayes_label'><p>Label probability images to create categorical maps</p></a></li>
<li><a href='#bayes_plot_hist'><p>Plot histogram</p></a></li>
<li><a href='#bayes_plot_map'><p>Plot labelled map</p></a></li>
<li><a href='#bayes_plot_probs'><p>Plot probability  maps</p></a></li>
<li><a href='#bayes_plot_rgb'><p>Plot RGB data cubes</p></a></li>
<li><a href='#bayes_plot_var'><p>Plot variance maps</p></a></li>
<li><a href='#bayes_read_image'><p>Read probability maps</p></a></li>
<li><a href='#bayes_read_probs'><p>Read probability maps</p></a></li>
<li><a href='#bayes_run_examples'><p>Informs if  examples should run</p></a></li>
<li><a href='#bayes_run_tests'><p>Informs if tests should run</p></a></li>
<li><a href='#bayes_smooth'><p>Smooth probability images</p></a></li>
<li><a href='#bayes_summary'><p>Summary of categorical maps</p></a></li>
<li><a href='#bayes_variance'><p>Calculate the variance of a probability cube</p></a></li>
<li><a href='#bilateral_smooth'><p>Smooth probability images with Gaussian filter</p></a></li>
<li><a href='#gaussian_smooth'><p>Smooth probability images with Gaussian filter</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian Smoothing of Remote Sensing Image Classification</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gilberto Camara &lt;gilberto.camara.inpe@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A  Bayesian smoothing method for post-processing of remote 
    sensing image classification which refines the
    labelling in a classified image in order to enhance its classification accuracy.
    Combines pixel-based classification methods with a spatial post-processing
    method to remove outliers and misclassified pixels.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/e-sensing/bayesEO/">https://github.com/e-sensing/bayesEO/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/e-sensing/bayesEO/issues">https://github.com/e-sensing/bayesEO/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, grDevices, purrr, Rcpp, stars, stats, terra,
tibble, tidyr, tmap, yaml</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RcppArmadillo, testthat</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Collate:</td>
<td>'api_check.R' 'bayes_colors.R' 'bayes_label.R' 'bayes_plot.R'
'bayes_read.R' 'bayes_smooth.R' 'bayes_utils.R'
'bayes_variance.R' 'RcppExports.R' 'zzz.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-02 02:25:45 UTC; gilberto</td>
</tr>
<tr>
<td>Author:</td>
<td>Gilberto Camara [aut, cre],
  Renato Assuncao [aut],
  Rolf Simoes [aut],
  Felipe Souza [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-04 09:44:41 UTC</td>
</tr>
</table>
<hr>
<h2 id='.smooth_gauss_kernel'>Compute the 2-D Gaussian kernel</h2><span id='topic+.smooth_gauss_kernel'></span>

<h3>Description</h3>

<p>Compute the 2-D Gaussian kernel
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.smooth_gauss_kernel(window_size, sigma)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id=".smooth_gauss_kernel_+3A_window_size">window_size</code></td>
<td>
<p>Size of the neighbourhood.</p>
</td></tr>
<tr><td><code id=".smooth_gauss_kernel_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation of the spatial Gaussian kernel</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a squared matrix filled with Gaussian function
</p>

<hr>
<h2 id='bayes_colors'>Function to retrieve bayesEO color table</h2><span id='topic+bayes_colors'></span>

<h3>Description</h3>

<p>Returns a color table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_colors()
</code></pre>


<h3>Value</h3>

<p>A tibble with color names and values
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>

<hr>
<h2 id='bayes_colors_show'>Function to show colors in SITS</h2><span id='topic+bayes_colors_show'></span>

<h3>Description</h3>

<p>Shows the default SITS colors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_colors_show()
</code></pre>


<h3>Value</h3>

<p>no return, called for side effects
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>

<hr>
<h2 id='bayes_label'>Label probability images to create categorical maps</h2><span id='topic+bayes_label'></span>

<h3>Description</h3>

<p>Takes a classified image with probabilities, and
labels the image with the pixel of higher probability
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_label(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_label_+3A_x">x</code></td>
<td>
<p>SpatRaster object with probabilities images</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a SpatRaster object from the file
    probs_file &lt;- paste0(data_dir, "/", file)
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # read the probs file
    probs &lt;- bayes_read_probs(probs_file, labels)
    # produce a labelled map
    map &lt;- bayes_label(probs)
    # plot the labelled map
    bayes_plot_map(map)
}

</code></pre>

<hr>
<h2 id='bayes_plot_hist'>Plot histogram</h2><span id='topic+bayes_plot_hist'></span>

<h3>Description</h3>

<p>Plot histogram
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_plot_hist(x, scale = 1, quantile = NULL, sample_size = 15000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_plot_hist_+3A_x">x</code></td>
<td>
<p>SpatRaster to be plotted.</p>
</td></tr>
<tr><td><code id="bayes_plot_hist_+3A_scale">scale</code></td>
<td>
<p>Scale factor for SpatRaster</p>
</td></tr>
<tr><td><code id="bayes_plot_hist_+3A_quantile">quantile</code></td>
<td>
<p>Threshold of values that will be plotted</p>
</td></tr>
<tr><td><code id="bayes_plot_hist_+3A_sample_size">sample_size</code></td>
<td>
<p>Number of samples to extract values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # get the probability file
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # read the probability file into a SpatRaster
    x &lt;- terra::rast(paste0(data_dir, "/", file))
    # include the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # associate the labels to the names of the SpatRaster
    names(x) &lt;- labels
    # calculate the variance
    v &lt;- bayes_variance(x)
    # Plot the variance histogram
    bayes_hist(v, quantile = 0.75)
}

</code></pre>

<hr>
<h2 id='bayes_plot_map'>Plot labelled map</h2><span id='topic+bayes_plot_map'></span>

<h3>Description</h3>

<p>Plot labelled map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_plot_map(
  x,
  legend = NULL,
  palette = "Spectral",
  xmin = NULL,
  xmax = NULL,
  ymin = NULL,
  ymax = NULL,
  tmap_graticules_labels_size = 0.6,
  tmap_legend_title_size = 0.7,
  tmap_legend_text_size = 0.7,
  tmap_legend_bg_color = "white",
  tmap_legend_bg_alpha = 0.5,
  tmap_max_cells = 1e+06
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_plot_map_+3A_x">x</code></td>
<td>
<p>SpatRaster to be plotted.</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_legend">legend</code></td>
<td>
<p>Named vector that associates labels to colors.</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_palette">palette</code></td>
<td>
<p>A sequential RColorBrewer palette</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_xmin">xmin</code></td>
<td>
<p>Subset to be shown (xmin)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_xmax">xmax</code></td>
<td>
<p>Subset to be shown (xmax)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_ymin">ymin</code></td>
<td>
<p>Subset to be shown (ymin)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_ymax">ymax</code></td>
<td>
<p>Subset to be shown (ymax)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_graticules_labels_size">tmap_graticules_labels_size</code></td>
<td>
<p>Size of graticules labels
(default: 0.7)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_legend_title_size">tmap_legend_title_size</code></td>
<td>
<p>Size of legend title (default: 1.5)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_legend_text_size">tmap_legend_text_size</code></td>
<td>
<p>Size of legend text (default: 1.2)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_legend_bg_color">tmap_legend_bg_color</code></td>
<td>
<p>Color of legend backgound
(default: &quot;white&quot;)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_legend_bg_alpha">tmap_legend_bg_alpha</code></td>
<td>
<p>Transparency of legend background
(default: 0.5)</p>
</td></tr>
<tr><td><code id="bayes_plot_map_+3A_tmap_max_cells">tmap_max_cells</code></td>
<td>
<p>Maximum number of cells for tmap
(default = 1e+06)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # Define location of a probability file
    data_dir &lt;- system.file("/extdata/probs",
                package = "bayesEO")
    # list the file
    file &lt;- list.files(data_dir)
    # build the full path
    probs_file &lt;- paste0(data_dir, "/", file)
    # define labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
                "ClearCut_Veg", "Forest", "Wetland")

    probs_image &lt;- bayes_read_probs(probs_file, labels)
    # Label the probs image
    y &lt;- bayes_label(x)
    # produce a map of the labelled image
    bayes_plot_map(y)
}

</code></pre>

<hr>
<h2 id='bayes_plot_probs'>Plot probability  maps</h2><span id='topic+bayes_plot_probs'></span>

<h3>Description</h3>

<p>Plot probability  maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_plot_probs(
  x,
  scale = 1e-04,
  labels = NULL,
  palette = "YlGnBu",
  tmap_scale = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_plot_probs_+3A_x">x</code></td>
<td>
<p>SpatRaster to be plotted.</p>
</td></tr>
<tr><td><code id="bayes_plot_probs_+3A_scale">scale</code></td>
<td>
<p>Scaling factor to apply to the data</p>
</td></tr>
<tr><td><code id="bayes_plot_probs_+3A_labels">labels</code></td>
<td>
<p>Labels to be plotted</p>
</td></tr>
<tr><td><code id="bayes_plot_probs_+3A_palette">palette</code></td>
<td>
<p>An RColorBrewer palette</p>
</td></tr>
<tr><td><code id="bayes_plot_probs_+3A_tmap_scale">tmap_scale</code></td>
<td>
<p>Global scale parameter for map (default: 1.0)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # get the probability file
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # build the full path
    probs_file &lt;- paste0(data_dir, "/", file)
    # include the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # associate the labels to the names of the SpatRaster
    probs &lt;- bayes_read_probs(probs_file, labels)
    # Plot the probability image
    bayes_plot_probs(probs,
                     scale = 0.0001,
                     tmap_scale = 1.0)
}

</code></pre>

<hr>
<h2 id='bayes_plot_rgb'>Plot RGB data cubes</h2><span id='topic+bayes_plot_rgb'></span>

<h3>Description</h3>

<p>Plot RGB raster cube
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_plot_rgb(
  image,
  red,
  green,
  blue,
  xmin = NULL,
  xmax = NULL,
  ymin = NULL,
  ymax = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_plot_rgb_+3A_image">image</code></td>
<td>
<p>Object of class SpatRaster.</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_red">red</code></td>
<td>
<p>Band for red color.</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_green">green</code></td>
<td>
<p>Band for green color.</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_blue">blue</code></td>
<td>
<p>Band for blue color.</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_xmin">xmin</code></td>
<td>
<p>Subset to be shown (xmin)</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_xmax">xmax</code></td>
<td>
<p>Subset to be shown (xmax)</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_ymin">ymin</code></td>
<td>
<p>Subset to be shown (ymin)</p>
</td></tr>
<tr><td><code id="bayes_plot_rgb_+3A_ymax">ymax</code></td>
<td>
<p>Subset to be shown (ymax)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot object with an RGB image
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
# Define location of a RGB files
rgb_dir &lt;- system.file("/extdata/rgb", package = "bayesEO")
# list the file
files &lt;- list.files(rgb_dir)
# build the full path
image_files &lt;- paste0(rgb_dir, "/", files)
rgb_image &lt;- bayes_read_image(image_files)
bayes_plot_rgb(rgb_image, red = "B11", green = "B8A", blue = "B03")
}
</code></pre>

<hr>
<h2 id='bayes_plot_var'>Plot variance maps</h2><span id='topic+bayes_plot_var'></span>

<h3>Description</h3>

<p>Plot variance maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_plot_var(
  x,
  labels = NULL,
  quantile = 0.75,
  n = 15,
  style = "equal",
  palette = "YlGnBu",
  tmap_scale = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_plot_var_+3A_x">x</code></td>
<td>
<p>SpatRaster to be plotted.</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_labels">labels</code></td>
<td>
<p>Labels to be plotted</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_quantile">quantile</code></td>
<td>
<p>Thereshold of values to be plotted</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_n">n</code></td>
<td>
<p>Preferred number of classes</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_style">style</code></td>
<td>
<p>Method to process the color scale</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_palette">palette</code></td>
<td>
<p>An RColorBrewer palette</p>
</td></tr>
<tr><td><code id="bayes_plot_var_+3A_tmap_scale">tmap_scale</code></td>
<td>
<p>Global scale parameter for map (default: 1.5)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # get the probability file
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # build the full path
    probs_file &lt;- paste0(data_dir, "/", file)
    # include the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # associate the labels to the names of the SpatRaster
    probs &lt;- bayes_read_probs(probs_file, labels)
    # calculate the variance
    var &lt;- bayes_variance(probs)
    # Plot the variance image
    bayes_plot_var(var,
        n = 15,
        style = "order",
        quantile = 0.75,
        palette = "YlGn",
        labels = c("Forest", "ClearCut_Veg"))
}

</code></pre>

<hr>
<h2 id='bayes_read_image'>Read probability maps</h2><span id='topic+bayes_read_image'></span>

<h3>Description</h3>

<p>Read probability maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_read_image(files)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_read_image_+3A_files">files</code></td>
<td>
<p>Full path to raster files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
# Define location of a probability file
data_dir &lt;- system.file("/extdata/rgb", package = "bayesEO")
# list the file
files &lt;- list.files(data_dir)
# build the full path
image_files &lt;- paste0(data_dir, "/", files)
rgb_image &lt;- bayes_read_image(image_files)
}
</code></pre>

<hr>
<h2 id='bayes_read_probs'>Read probability maps</h2><span id='topic+bayes_read_probs'></span>

<h3>Description</h3>

<p>Read probability maps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_read_probs(probs_file, labels)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_read_probs_+3A_probs_file">probs_file</code></td>
<td>
<p>Full path to raster multi-band file
containing probability matrices</p>
</td></tr>
<tr><td><code id="bayes_read_probs_+3A_labels">labels</code></td>
<td>
<p>Labels to be assigned to the bands</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
# Define location of a probability file
data_dir &lt;- system.file("/extdata/probs", package = "bayesEO")
# list the file
file &lt;- list.files(data_dir)
# build the full path
probs_file &lt;- paste0(data_dir, "/", file)
# define labels
labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")

probs_image &lt;- bayes_read_probs(probs_file, labels)
}
</code></pre>

<hr>
<h2 id='bayes_run_examples'>Informs if  examples should run</h2><span id='topic+bayes_run_examples'></span>

<h3>Description</h3>

<p>This function informs if examples should run.
To run the examples, set &quot;BAYES_RUN_EXAMPLES&quot; environment
variable to &quot;YES&quot; using
Sys.setenv(&quot;BAYES_RUN_EXAMPLES&quot; = &quot;YES&quot;)
To come back to the default behaviour, please unset
the enviroment variable
Sys.unsetenv(&quot;BAYES_RUN_EXAMPLES&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_run_examples()
</code></pre>


<h3>Value</h3>

<p>A logical value
</p>

<hr>
<h2 id='bayes_run_tests'>Informs if tests should run</h2><span id='topic+bayes_run_tests'></span>

<h3>Description</h3>

<p>This function informs if tests should run.
To run the examples, set &quot;BAYES_RUN_TESTS&quot; environment
variable to &quot;YES&quot; using
Sys.setenv(&quot;BAYES_RUN_TESTS&quot; = &quot;YES&quot;)
To come back to the default behaviour, please unset
the enviroment variable
Sys.unsetenv(&quot;BAYES_RUN_TESTS&quot;)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_run_tests()
</code></pre>


<h3>Value</h3>

<p>TRUE/FALSE
</p>

<hr>
<h2 id='bayes_smooth'>Smooth probability images</h2><span id='topic+bayes_smooth'></span>

<h3>Description</h3>

<p>Takes a classified image with probabilities, and reduces outliers
and smoothens probability according to Bayesian statistics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_smooth(x, window_size = 7, neigh_fraction = 0.5, smoothness = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_smooth_+3A_x">x</code></td>
<td>
<p>SpatRaster object with probabilities images</p>
</td></tr>
<tr><td><code id="bayes_smooth_+3A_window_size">window_size</code></td>
<td>
<p>Size of the neighborhood.</p>
</td></tr>
<tr><td><code id="bayes_smooth_+3A_neigh_fraction">neigh_fraction</code></td>
<td>
<p>Fraction of neighbors with high probabilities
to be used in Bayesian inference.</p>
</td></tr>
<tr><td><code id="bayes_smooth_+3A_smoothness">smoothness</code></td>
<td>
<p>Estimated variance of logit of class probabilities
(Bayesian smoothing parameter). It can be either
a vector or a scalar.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a full path for the file
    probs_file &lt;- paste0(data_dir, "/", file)
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # read the probs file
    probs &lt;- bayes_read_probs(probs_file, labels)
    # smooth the probability image
    probs_smooth &lt;- bayes_smooth(probs,
            window_size = 7,
            smoothness = 20
    )
    # plot the probability image
    bayes_plot_probs(probs_smooth)
}

</code></pre>

<hr>
<h2 id='bayes_summary'>Summary of categorical maps</h2><span id='topic+bayes_summary'></span>

<h3>Description</h3>

<p>Takes a classified image with probabilities, and
labels the image with the pixel of higher probability
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_summary(x, scale = 1, sample_size = 15000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_summary_+3A_x">x</code></td>
<td>
<p>SpatRaster categorical object</p>
</td></tr>
<tr><td><code id="bayes_summary_+3A_scale">scale</code></td>
<td>
<p>Scale to apply to data</p>
</td></tr>
<tr><td><code id="bayes_summary_+3A_sample_size">sample_size</code></td>
<td>
<p>Sample size</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with information
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a SpatRaster object from the file
    probs_file &lt;- paste0(data_dir, "/", file)
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # read the probs file
    probs &lt;- bayes_read_probs(probs_file, labels)
    # produce a labelled map
    map &lt;- bayes_label(probs)
    # plot the labelled map
    bayes_summary(map)
}

</code></pre>

<hr>
<h2 id='bayes_variance'>Calculate the variance of a probability cube</h2><span id='topic+bayes_variance'></span>

<h3>Description</h3>

<p>Takes a probability cube and estimate the local variance
of the logit of the probability,
to support the choice of parameters for Bayesian smoothing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_variance(x, window_size = 9, neigh_fraction = 0.5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_variance_+3A_x">x</code></td>
<td>
<p>SpatRaster object containing probabilities.</p>
</td></tr>
<tr><td><code id="bayes_variance_+3A_window_size">window_size</code></td>
<td>
<p>Size of the neighborhood.</p>
</td></tr>
<tr><td><code id="bayes_variance_+3A_neigh_fraction">neigh_fraction</code></td>
<td>
<p>Fraction of neighbors with highest probability
to be used in Bayesian inference.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A variance SpatRaster object.
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>
<p>Rolf Simoes, <a href="mailto:rolf.simoes@inpe.br">rolf.simoes@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a SpatRaster object from the file
    x &lt;- terra::rast(paste0(data_dir, "/", file))
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # name the layers in the SpatRaster with the labels
    names(x) &lt;- labels
    # calculate the variance
    v &lt;- bayes_variance(x)
    # plot the variance
    bayes_plot_var(v, quantile = 0.75)
}
</code></pre>

<hr>
<h2 id='bilateral_smooth'>Smooth probability images with Gaussian filter</h2><span id='topic+bilateral_smooth'></span>

<h3>Description</h3>

<p>Takes a classified image with probabilities, and reduces outliers
and smoothens probability according to a Gaussian filter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bilateral_smooth(x, window_size = 5, sigma = 8, tau = 0.1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bilateral_smooth_+3A_x">x</code></td>
<td>
<p>SpatRaster object with probabilities images</p>
</td></tr>
<tr><td><code id="bilateral_smooth_+3A_window_size">window_size</code></td>
<td>
<p>Size of the neighborhood.</p>
</td></tr>
<tr><td><code id="bilateral_smooth_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation of the spatial Gaussian kernel</p>
</td></tr>
<tr><td><code id="bilateral_smooth_+3A_tau">tau</code></td>
<td>
<p>Standard deviation of the class probs value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a full path for the file
    probs_file &lt;- paste0(data_dir, "/", file)
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # read the probs file
    probs &lt;- bayes_read(probs_file, labels)
    # smooth the probability image
    bilat &lt;- bilateral_smooth(probs,
                              window_size = 5,
                              sigma = 8,
                              tau = 0.1
    )
    # plot the probability image
    bayes_plot(bilat, scale = 0.0001)
}

</code></pre>

<hr>
<h2 id='gaussian_smooth'>Smooth probability images with Gaussian filter</h2><span id='topic+gaussian_smooth'></span>

<h3>Description</h3>

<p>Takes a classified image with probabilities, and reduces outliers
and smoothens probability according to a Gaussian filter
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gaussian_smooth(x, window_size = 5, sigma = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gaussian_smooth_+3A_x">x</code></td>
<td>
<p>SpatRaster object with probabilities images</p>
</td></tr>
<tr><td><code id="gaussian_smooth_+3A_window_size">window_size</code></td>
<td>
<p>Size of the neighborhood.</p>
</td></tr>
<tr><td><code id="gaussian_smooth_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation of the spatial Gaussian kernel</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>Author(s)</h3>

<p>Gilberto Camara, <a href="mailto:gilberto.camara@inpe.br">gilberto.camara@inpe.br</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (bayes_run_examples()) {
    # select a file with probability values
    data_dir &lt;- system.file("/extdata/probs/", package = "bayesEO")
    file &lt;- list.files(data_dir)
    # create a full path for the file
    probs_file &lt;- paste0(data_dir, "/", file)
    # provide the labels
    labels &lt;- c("Water", "ClearCut_Burn", "ClearCut_Soil",
             "ClearCut_Veg", "Forest", "Wetland")
    # read the probs file
    probs &lt;- bayes_read(probs_file, labels)
    # smooth the probability image
    gauss &lt;- gaussian_smooth(probs,
            window_size = 5,
            sigma = 1
    )
    # plot the probability image
    bayes_plot_probs(gauss)
}

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
