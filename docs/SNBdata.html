<!DOCTYPE html><html><head><title>Help for package SNBdata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SNBdata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SNBdata'>
<p>Download Data from the Swiss National Bank (SNB)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download Data from the Swiss National Bank (SNB)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-12</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Enrico Schumann &lt;es@enricoschumann.net&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Download data (tables and datasets) from the Swiss
     National Bank (SNB; <a href="https://www.snb.ch/en">https://www.snb.ch/en</a>), the Swiss
     central bank.  The package is lightweight and comes with few
     dependencies; suggested packages are used only if data is to
     be transformed into particular data structures, for instance
     into 'zoo' objects.  Downloaded data can optionally be
     cached, to avoid repeated downloads of the same files.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>jsonlite, zoo</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://enricoschumann.net/R/packages/SNBdata/">http://enricoschumann.net/R/packages/SNBdata/</a> ,
<a href="https://git.sr.ht/~enricoschumann/SNBdata">https://git.sr.ht/~enricoschumann/SNBdata</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-12 11:42:11 UTC; es19</td>
</tr>
<tr>
<td>Author:</td>
<td>Enrico Schumann <a href="https://orcid.org/0000-0001-7601-6576"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-12 18:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='SNBdata'>
Download Data from the Swiss National Bank (SNB)
</h2><span id='topic+SNBdata-package'></span><span id='topic+SNBdata'></span><span id='topic+fetch_data'></span><span id='topic+fetch_last_update'></span><span id='topic+fetch_info'></span>

<h3>Description</h3>


<p>Download data (&lsquo;tables&rsquo; and &lsquo;datasets&rsquo;) from the
Swiss National Bank (<abbr><span class="acronym">SNB</span></abbr>) and convert to data-frames.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>
fetch_data(id,
           type = "table", dest.dir = NULL,
           return.class = NULL, verbose = TRUE,
           language = "en",
           name.sep = " :: ",
           method,
           na.drop = TRUE,
           time.series = FALSE, ...)

fetch_last_update(id,
                  type = "table", dest.dir = NULL,
                  verbose = TRUE, language = "en", ...)

fetch_info(id,
           type = "table", dest.dir = NULL,
           verbose = TRUE,
           language = "en",
           name.sep = " :: ",
           method, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SNBdata_+3A_dest.dir">dest.dir</code></td>
<td>

<p>file path: where to store the downloaded files? See Details.
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_id">id</code></td>
<td>

<p>string: identifier of the table/dataset
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_type">type</code></td>
<td>

<p>string: &lsquo;<code>table</code>&rsquo; or &lsquo;<code>dataset</code>&rsquo;
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_method">method</code></td>
<td>

<p>see <code><a href="utils.html#topic+download.file">download.file</a></code>
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_verbose">verbose</code></td>
<td>

<p>logical: print messages, e.g. about download progress?
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_return.class">return.class</code></td>
<td>

<p><code>NULL</code> or character: not yet implemented (but in
future versions, <code><a href="zoo.html#topic+zoo">zoo</a></code> will be supported)
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_language">language</code></td>
<td>

<p>string: <code>en</code>, <code>fr</code> or <code>de</code>
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_...">...</code></td>
<td>

<p>passed on to <code><a href="utils.html#topic+read.table">read.table</a></code>
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_name.sep">name.sep</code></td>
<td>

<p>string used when pasting description hierarchies
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_time.series">time.series</code></td>
<td>

<p>logical. If <code>TRUE</code>, data are transformed into
time-series.
</p>
</td></tr>
<tr><td><code id="SNBdata_+3A_na.drop">na.drop</code></td>
<td>

<p>logical. If <code>TRUE</code>, rows with no finite values at all
are dropped.  Only used if <code>time.series</code> is
<code>TRUE</code>.
</p>
</td></tr>
</table>


<h3>Details</h3>


<p>The Swiss National Bank (<abbr><span class="acronym">SNB</span></abbr>) provides data as either
so-called tables or datasets.  <code>fetch_table</code> can handle
both, but the <code>type</code> argument must be specified.
</p>
<p><code>fetch_table</code> downloads data, which typically are in
<abbr><span class="acronym">csv</span></abbr> format, from the <abbr><span class="acronym">SNB</span></abbr>'s website and
stores them, with a date prefix, in directory <code>dest.dir</code>.
If the latter is <code>NULL</code>, a temporary directory is used
(through <code><a href="base.html#topic+tempdir">tempdir</a></code>); but much better is to use a
more-persistent storage location.  If a file with today's date
exists in <code>dest.dir</code>, that file is read, and nothing is
downloaded.
</p>
<p>For downloading, function <code><a href="utils.html#topic+download.file">download.file</a></code> is used.
See <code><a href="utils.html#topic+download.file">download.file</a></code> for options; in particular, see
the hints about <code>timeout</code> when downloading large files.
</p>
<p>When argument <code>time.series</code> is <code>TRUE</code>,
<code>fetch_table</code> will rearrange the data into time-series.
This requires columns named &ldquo;<code>Date</code>&rdquo; and
&ldquo;<code>Value</code>&rdquo; in the particular dataset/table.  If the
&ldquo;<code>Date</code>&rdquo; column has a <code>YYYY-MM-DD</code> pattern,
it will will be transformed with <code><a href="base.html#topic+as.Date">as.Date</a></code>.
</p>


<h3>Value</h3>


<p>typically a <code><a href="base.html#topic+data.frame">data.frame</a></code>,
potentially with attributes additional attributes:
</p>

<dl>
<dt><code>info</code></dt><dd>
<p>information about identifiers used by the <abbr><span class="acronym">SNB</span></abbr>
</p>
</dd>
<dt><code>columns</code></dt><dd>
<p>if <code>time.series</code> is <code>TRUE</code>, the names of the
columns used for grouping the rows
</p>
</dd>
</dl>

<p>Should the download fail, the function returns
<code><a href="base.html#topic+NULL">NULL</a></code> invisibly.
</p>


<h3>Author(s)</h3>

<p>Enrico Schumann
</p>


<h3>References</h3>

<p><a href="https://data.snb.ch/en">https://data.snb.ch/en</a>
</p>
<p>for <code>help</code> on the <abbr><span class="acronym">API</span></abbr>,
see<a href="https://data.snb.ch/en/help#data_api">https://data.snb.ch/en/help#data_api</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## (Internet connection required)

### set directory for storing the files.  This is
### only an example: Much better is to use a permanent
### storage-location, such as '~/Downloads/SNBdata'
data.dir &lt;- tempdir()

rates &lt;- fetch_data("rendoblim",
                    type = "table",
                    dest.dir = data.dir,
                    language = "en")

### ==&gt; have data transformed into time-series
rates &lt;- fetch_data("rendoblim",
                    type = "table",
                    dest.dir = data.dir,
                    language = "en",
                    time.series = TRUE)

if (!is.null(rates))  ## check: if download failed, results
                      ##        are NULL
    attr(rates, "info")


stock.markets &lt;- fetch_data("capchstocki",
                            type = "table",
                            dest.dir = data.dir,
                            time.series = TRUE)
## e.g.: stock.markets[, "GDR"]  ## total return index
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
