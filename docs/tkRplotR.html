<!DOCTYPE html><html lang="en"><head><title>Help for package tkRplotR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tkRplotR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tkRplotR-package'><p>Display Resizable Plots</p></a></li>
<li><a href='#addTkBind'><p>Add Tk Binds</p></a></li>
<li><a href='#setCoef'><p>Functions to Convert Tk and User Coordinates</p></a></li>
<li><a href='#setVariable'><p>Set, Get, and Remove Variables</p></a></li>
<li><a href='#tkBinds'><p>Define Tk Binds To Allow Automatic Resizing</p></a></li>
<li><a href='#tkLocator'><p>Gives the Position</p></a></li>
<li><a href='#tkRplot'><p>Tk Rplot With Resizing</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1.7</td>
</tr>
<tr>
<td>Title:</td>
<td>Display Resizable Plots</td>
</tr>
<tr>
<td>Author:</td>
<td>Filipe Campelo &lt;fcampelo@ci.uc.pt&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Filipe Campelo &lt;fcampelo@ci.uc.pt&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Display a plot in a Tk canvas.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5), tcltk, grDevices</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Tcl/Tk (&gt;= 8.6)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>no</td>
</tr>
<tr>
<td>LazyData:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-27 09:09:26 UTC; fc</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-27 09:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tkRplotR-package'>Display Resizable Plots</h2><span id='topic+tkRplotR-package'></span><span id='topic+tkRplotR'></span>

<h3>Description</h3>

<p>This package contains functions for ploting in a Tk canvas.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> tkRplotR</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> <abbr><span class="acronym">GPL</span></abbr> (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p><em>Main Functions</em>
</p>

<dl>
<dt><code><a href="#topic+tkRplot">tkRplot</a></code></dt><dd><p> display a plot in a Tk toplevel window </p>
</dd>
<dt><code><a href="#topic+tkRreplot">tkRreplot</a></code></dt><dd><p> refresh the plot created by tkRplot </p>
</dd>
</dl>



<h3>Author(s)</h3>

<p>Filipe Campelo <a href="mailto:fcampelo@ci.uc.pt">fcampelo@ci.uc.pt</a>
</p>

<hr>
<h2 id='addTkBind'>Add Tk Binds</h2><span id='topic+addTkBind'></span>

<h3>Description</h3>

<p>Add binds to previous defined bindings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addTkBind(win, event, fun = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addTkBind_+3A_win">win</code></td>
<td>
<p>window</p>
</td></tr>
<tr><td><code id="addTkBind_+3A_event">event</code></td>
<td>
<p>event</p>
</td></tr>
<tr><td><code id="addTkBind_+3A_fun">fun</code></td>
<td>
<p>a function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function adds a new bind while keeping the previous defined binds.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

tt &lt;- tktoplevel()
tt &lt;- tkRplot(tt, function () plot(1:10))
FUN &lt;- local({
  canPos &lt;-.Tcl(paste(tt$env$canvas, "create text 0 0 "))
    function (x, y) {
        x &lt;- as.numeric(x)
        y &lt;- as.numeric(y)
       tkdelete(tt$env$canvas, tclvalue(canPos))
           xy &lt;- formatC(tk2usr(x, y),
                   digits = 2,
                     format = "f",
                       width = 5)
    canPos &lt;&lt;- .Tcl(
     paste(tt$env$canvas, "create text 40 10 -fill blue -justify left -text { ",
            xy[1], " ", xy[2],
            "} -font {Helvetica -10}"))
  }})

tkbind(tt$env$canvas, "&lt;Motion&gt;", FUN)
tkbind(tt$env$canvas, "&lt;Motion&gt;") #to give current bidings
FUN1 &lt;- function (x,y) print(tk2usr(x,y))
addTkBind(tt$env$canvas, "&lt;Motion&gt;", FUN1)
tkbind(tt$env$canvas, "&lt;Motion&gt;") #to give current bidings

## End(Not run)
</code></pre>

<hr>
<h2 id='setCoef'>Functions to Convert Tk and User Coordinates</h2><span id='topic+setCoef'></span><span id='topic+getCoef'></span><span id='topic+tk2usr'></span><span id='topic+usr2tk'></span>

<h3>Description</h3>

<p>Convert Tk coordinates from/to user coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setCoef(W, width, height)
getCoef(W)
tk2usr(W, x = NULL, y = NULL)
usr2tk(W, x = NULL, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setCoef_+3A_w">W</code></td>
<td>
<p>the window (toplevel). If W is missing the getCoef function returns the coefficients for the last toplevel visited.</p>
</td></tr>
<tr><td><code id="setCoef_+3A_width">width</code></td>
<td>
<p>width of the canvas (image)</p>
</td></tr>
<tr><td><code id="setCoef_+3A_height">height</code></td>
<td>
<p>height of the canvas (image)</p>
</td></tr>
<tr><td><code id="setCoef_+3A_x">x</code></td>
<td>
<p>x position.</p>
</td></tr>
<tr><td><code id="setCoef_+3A_y">y</code></td>
<td>
<p>y position.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

bb &lt;- 1
tt &lt;- tktoplevel()
tt &lt;- tkRplot(tt, function() {
 x &lt;- 1:20 / 20
   plot(
   x,
   x ^ bb,
   col = "#0000ff50",
       xlab = "x",
           ylab = paste0("x^", bb),
               type = "l",
                   axes = FALSE,
                       lwd = 4)
   title(main = bb)
     points(x,
      x ^ bb,
      col = "#ff000050",
      pch = 19,
      cex = 2)
        axis(1)
        axis(2)
          box()
          })

 getCoef()

 tkbind(tt$env$canvas, "&lt;Button-1&gt;", function(x, y)
 print(tk2usr(x, y)))

 # A more complex example
 local({
 canPos &lt;-.Tcl(paste(tt$env$canvas, "create text 0 0 "))
 canPosX &lt;-.Tcl(paste(tt$env$canvas, "create text 0 0 "))
 canPosY &lt;-.Tcl(paste(tt$env$canvas, "create text 0 0 "))
 lineVertical &lt;- .Tcl(paste(tt$env$canvas, "create line 0 0 0 0"))
 lineHorizontal&lt;-.Tcl(paste(tt$env$canvas, "create line 0 0 0 0"))
 tkbind(tt, "&lt;Motion&gt;", function (x, y) {
   x &lt;- as.numeric(x)
     y &lt;- as.numeric(y)
       for (i in c(canPos, lineVertical, lineHorizontal,canPosX,canPosY))
       tkdelete(tt$env$canvas, tclvalue(i))

            xy &lt;- formatC(tk2usr(x, y),
                            digits = 2,
                             format = "f",
                              width = 5)

xRange &lt;- tt$env$plt[1:2] * tt$env$width
  yRange &lt;- (1 - tt$env$plt[4:3]) * tt$env$height
    canPos &lt;&lt;- .Tcl(
 paste(tt$env$canvas, "create text 40 10 -fill blue -justify left -text { ",
     xy[1], " ", xy[2],
     "} -font {Helvetica -10}"))
      if (x &lt; xRange[1] | x &gt; xRange[2])
         return()
         if (y &lt; yRange[1] | y &gt; yRange[2])
           return()
canPosX &lt;&lt;- .Tcl(paste(tt$env$canvas, "create text ", x, yRange[1]-10,
           " -fill blue -justify center -text { ",xy[1],
           "} -font {Helvetica -10}"))
canPosY &lt;&lt;- .Tcl(paste(tt$env$canvas, "create text ",xRange[2]+10, y,
   " -fill blue -justify center -text { ",xy[2], "} -font {Helvetica -10}"))
           lineVertical &lt;&lt;- .Tcl(paste(tt$env$canvas, "create line ",
                 x,      yRange[1],      x,      yRange[2],
                    "-fill blue -dash 4"))
           lineHorizontal &lt;&lt;- .Tcl(paste(tt$env$canvas,
                 "create line ",
                  xRange[1],  y, xRange[2], y,
                        "-fill blue -dash 4"))})
     tkbind(tt$env$canvas, "&lt;Leave&gt;", function (x, y)
     {tkdelete(tt$env$canvas, tclvalue(canPos))})
     } )

 
## End(Not run)
</code></pre>

<hr>
<h2 id='setVariable'>Set, Get, and Remove Variables</h2><span id='topic+setVariable'></span><span id='topic+getVariable'></span><span id='topic+rmVariable'></span>

<h3>Description</h3>

<p>Define, get, and remove variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setVariable(name, value = NULL)
getVariable(name, value = NULL)
rmVariable(name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setVariable_+3A_name">name</code></td>
<td>
<p>name of the variable</p>
</td></tr>
<tr><td><code id="setVariable_+3A_value">value</code></td>
<td>
<p>the value of the variable</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>setVariable("var1", 1)
exists("var1")
getVariable("var1")
rmVariable("var1")
getVariable("var1")
getVariable("tkRplotR_pngType")

</code></pre>

<hr>
<h2 id='tkBinds'>Define Tk Binds To Allow Automatic Resizing</h2><span id='topic+tkBinds'></span>

<h3>Description</h3>

<p>Add binds to automatically resize the graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tkBinds(parent, expose = TRUE, configure = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tkBinds_+3A_parent">parent</code></td>
<td>
<p>parent Tk toplevel window</p>
</td></tr>
<tr><td><code id="tkBinds_+3A_expose">expose</code></td>
<td>
<p>if TRUE update graph when the window is expose</p>
</td></tr>
<tr><td><code id="tkBinds_+3A_configure">configure</code></td>
<td>
<p>if TRUE update the graph when the window is update</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function adds the binds needed to automatically resize the graph
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
tkbb &lt;- tclVar(1)
tt &lt;- tktoplevel()
tt &lt;- tkRplot(tt, function() {
b &lt;- .tcl2num(tkbb)
 x &lt;- 1:20 / 20
   plot(
   x,
   x ^ b,
   col = "#0000ff50",
       xlab = "x",
           ylab = paste0("x^", b),
               type = "l",
                   axes = FALSE,
                       lwd = 4)
   title(main = b)
     points(x,
      x ^ b,
      col = "#ff000050",
      pch = 19,
      cex = 2)
        axis(1)
        axis(2)
          box()
          })

       s &lt;-
       tkscale(
       tt,
       from = 0.05,
       to = 2.00,
       variable = tkbb,
       showvalue = FALSE,
       resolution = 0.05,
       orient = "horiz"
       )

       tkpack(s,
       side = "bottom",
       before = tt$env$canvas,
       expand = FALSE,
       fill = "both")

 # to disable the automatic resizing of the graph
   tkBinds(parent = tt, expose = FALSE, configure = FALSE)

 # to enable again the automatic resising
 # tkBinds(parent = tt, expose = TRUE, configure = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='tkLocator'>Gives the Position</h2><span id='topic+tkLocator'></span>

<h3>Description</h3>

<p>Gives the position when the left mouse button is pressed + &quot;Ctrl&quot; button.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tkLocator(parent, n = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tkLocator_+3A_parent">parent</code></td>
<td>
<p>Tk toplevel window</p>
</td></tr>
<tr><td><code id="tkLocator_+3A_n">n</code></td>
<td>
<p>the number of points to locate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with x and y components which are the coordinates of the identified points.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bb &lt;- 1
tt &lt;- tktoplevel()
tt &lt;- tkRplot(tt, function() {
 x &lt;- 1:20 / 20
   plot(
   x,
   x ^ bb,
   col = "#0000ff50",
       xlab = "x",
           ylab = paste0("x^", bb),
               type = "l",
                   axes = FALSE,
                       lwd = 4)
   title(main = bb)
     points(x,
      x ^ bb,
      col = "#ff000050",
      pch = 19,
      cex = 2)
        axis(1)
        axis(2)
          box()
          })
 tkLocator(tt, 2)
 
## End(Not run)

</code></pre>

<hr>
<h2 id='tkRplot'>Tk Rplot With Resizing</h2><span id='topic+tkRplot'></span><span id='topic+tkRreplot'></span><span id='topic+.tkRreplot'></span>

<h3>Description</h3>

<p>Displays a plot in a Tk toplevel window.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tkRplot(W, fun, width = 490, height = 490, ...)
tkRreplot(W, fun, width, height,  ...)
.tkRreplot(W)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tkRplot_+3A_w">W</code></td>
<td>
<p>Tk toplevel window</p>
</td></tr>
<tr><td><code id="tkRplot_+3A_fun">fun</code></td>
<td>
<p>function to produce the plot</p>
</td></tr>
<tr><td><code id="tkRplot_+3A_width">width</code></td>
<td>
<p>image width</p>
</td></tr>
<tr><td><code id="tkRplot_+3A_height">height</code></td>
<td>
<p>image height</p>
</td></tr>
<tr><td><code id="tkRplot_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
#Example 1 without using tkReplot function (tkRplotR version &gt; 0.1.6)
tk_b &lt;- tclVar(1)
tk_x &lt;- tclVar(10)
tk_main &lt;- tclVar('...')

tt0 &lt;- tktoplevel()
tt0 &lt;- tkRplot(tt0, function(...) {
# get values of tclvariables
  x &lt;- .tcl2num(tk_x)
  x &lt;- 1:x
  b &lt;- .tcl2num(tk_b)
  main &lt;- .tcl2String(tk_main)

  plot(
    x,
    x ^ b ,
    col = "#0000ff50",
    xlab = "x",
    ylab = expression(x^b),
    type = "l",
    axes = FALSE,
    lwd = 4)
  title(main = main)
  points(x,
         x ^ b,
         col = "#ff000050",
         pch = 19,
         cex = 2)
  axis(1)
  axis(2)
  box()
})

s01 &lt;- tkscale(
  tt0,
  #command = function(...) .tkRreplot(tt0),
  from = 10,
  to = 60,
  label = 'x',
  variable = tk_x,
  showvalue = TRUE,
  resolution = 1,
  repeatdelay = 200,
  repeatinterval = 100,
  orient = "hor"
)

s02 &lt;- tkscale(
  tt0,
  #command = function(...) .tkRreplot(tt0),
  from = 0.05,
  to = 2.00,
  label = 'b',
  variable = tk_b,
  showvalue = TRUE,
  resolution = 0.01,
  repeatdelay = 200,
  repeatinterval = 100,
  orient = "ver"
)


e01 &lt;- tkentry(tt0,
              textvariable = tk_main,
              validate = 'all', validatecommand="")
tkpack(s02,
       side = "left",
       expand = FALSE,
       #'anchor = "c",
       before = tt0$env$canvas,
       fill = "both")

tkpack(s01,
       side = "bottom",
       expand = FALSE,
       #'anchor = "c",
       before = tt0$env$canvas,
       fill = "both")

tkpack(e01,
       side = "top",
       expand = FALSE,
       #'anchor = "c",
       before = tt0$env$canvas,
       fill = "both")


#Example 2 using tkReplot function (tkRplotR version &lt; 0.1.7)
bb &lt;- 1
tkbb &lt;- tclVar(1)
tt &lt;- tktoplevel()
f &lt;- function(...) {
 b &lt;- as.numeric(tclvalue(tkbb))
   if (b != bb) {
       bb &lt;&lt;- b
           tkRreplot(tt)
             }
     }

tt &lt;- tkRplot(tt, function() {
 x &lt;- 1:20 / 20
   plot(
   x,
   x ^ bb,
   col = "#0000ff50",
       xlab = "x",
           ylab = paste0("x^", bb),
               type = "l",
                   axes = FALSE,
                       lwd = 4)
   title(main = bb)
     points(x,
      x ^ bb,
      col = "#ff000050",
      pch = 19,
      cex = 2)
        axis(1)
        axis(2)
          box()
          })

  s &lt;- tkscale(
       tt,
       command = f,
       from = 0.05,
       to = 2.00,
       variable = tkbb,
       showvalue = TRUE,
       resolution = 0.01,
       repeatdelay = 50,
       repeatinterval = 100,
       orient = "horiz"
       )

       tkpack(s,
       side = "bottom",
       expand = FALSE,
       before = tt$env$canvas,
       fill = "both")


## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
