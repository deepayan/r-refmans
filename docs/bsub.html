<!DOCTYPE html><html lang="en"><head><title>Help for package bsub</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {bsub}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bconf'>
<p>Print current configuation</p></a></li>
<li><a href='#bjobs'>
<p>Summary of jobs</p></a></li>
<li><a href='#bjobs_barplot'>
<p>Barplot of number of jobs</p></a></li>
<li><a href='#bjobs_done'>
<p>Finished jobs</p></a></li>
<li><a href='#bjobs_exit'>
<p>Failed jobs</p></a></li>
<li><a href='#bjobs_pending'>
<p>Pending jobs</p></a></li>
<li><a href='#bjobs_running'>
<p>Running jobs</p></a></li>
<li><a href='#bjobs_timeline'>
<p>Timeline of jobs</p></a></li>
<li><a href='#bkill'>
<p>Kill jobs</p></a></li>
<li><a href='#brecent'>
<p>Recent jobs from all status</p></a></li>
<li><a href='#bsub_chunk'>
<p>Submit R code</p></a></li>
<li><a href='#bsub_cmd'>
<p>Submit shell commands</p></a></li>
<li><a href='#bsub_opt'>
<p>Parameters for bsub</p></a></li>
<li><a href='#bsub_script'>
<p>Submit R script</p></a></li>
<li><a href='#check_dump_files'>
<p>Check whether there are dump files</p></a></li>
<li><a href='#clear_temp_dir'>
<p>Clear temporary dir</p></a></li>
<li><a href='#get_dependency'>
<p>Get the dependency of current jobs</p></a></li>
<li><a href='#is_job_finished'>
<p>Test whether the jobs are finished</p></a></li>
<li><a href='#job_log'>
<p>Log for the running/finished/failed job</p></a></li>
<li><a href='#job_status_by_id'>
<p>Job status by id</p></a></li>
<li><a href='#job_status_by_name'>
<p>Job status by name</p></a></li>
<li><a href='#monitor'>
<p>A browser-based interactive job monitor</p></a></li>
<li><a href='#plot_dependency'>
<p>Plot the job dependency tree</p></a></li>
<li><a href='#print.bconf'>
<p>Print the configurations</p></a></li>
<li><a href='#print.bjobs'>
<p>Summary of jobs</p></a></li>
<li><a href='#random_job'>
<p>Submit a random job</p></a></li>
<li><a href='#retrieve_var'>
<p>Retrieve saved variable</p></a></li>
<li><a href='#run_cmd'>
<p>Run command on submission node</p></a></li>
<li><a href='#ssh_connect'>
<p>Connect to submisstion via ssh</p></a></li>
<li><a href='#ssh_disconnect'>
<p>Disconnect ssh connection</p></a></li>
<li><a href='#wait_jobs'>
<p>Wait until all jobs are finished</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Submitter and Monitor of the 'LSF Cluster'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-30</td>
</tr>
<tr>
<td>Author:</td>
<td>Zuguang Gu</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zuguang Gu &lt;z.gu@dkfz.de&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>GlobalOptions (&ge; 0.1.1), GetoptLong (&ge; 0.1.8), digest,
utils, stats, clisymbols, crayon, methods, grDevices, graphics</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, ssh, DT (&ge; 0.13), shiny (&ge; 1.0.0), shinyjqui,
igraph, graph, Rgraphviz, ggplot2, rmarkdown, markdown</td>
</tr>
<tr>
<td>biocViews:</td>
<td>Software, Infrastructure</td>
</tr>
<tr>
<td>Description:</td>
<td>It submits R code/R scripts/shell commands to 'LSF cluster' 
  (<a href="https://en.wikipedia.org/wiki/Platform_LSF">https://en.wikipedia.org/wiki/Platform_LSF</a>, the 'bsub' system) without 
  leaving R. There is also an interactive 'shiny' app for monitoring the job status.</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jokergoo/bsub">https://github.com/jokergoo/bsub</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Platform LSF, bsub</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-30 11:54:24 UTC; guz</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-07-01 15:50:10 UTC</td>
</tr>
</table>
<hr>
<h2 id='bconf'>
Print current configuation
</h2><span id='topic+bconf'></span>

<h3>Description</h3>

<p>Print current configuation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bconf
</code></pre>


<h3>Details</h3>

<p>This function is only for printing. Use <code><a href="#topic+bsub_opt">bsub_opt</a></code> to change configurations.
</p>
<p>You simply type <code>bconf</code> (without the brackets) in the interactive R console.
</p>


<h3>Value</h3>

<p>A <code>bconf</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bconf
</code></pre>

<hr>
<h2 id='bjobs'>
Summary of jobs
</h2><span id='topic+bjobs'></span>

<h3>Description</h3>

<p>Summary of jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs(status = c("RUN", "PEND"), max = Inf, filter = NULL, print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_+3A_status">status</code></td>
<td>
<p>Status of the jobs. Use &quot;all&quot; for all jobs.</p>
</td></tr>
<tr><td><code id="bjobs_+3A_max">max</code></td>
<td>
<p>Maximal number of recent jobs.</p>
</td></tr>
<tr><td><code id="bjobs_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
<tr><td><code id="bjobs_+3A_print">print</code></td>
<td>
<p>Whether to print the table.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There is an additional column &quot;RECENT&quot; which is the order
for the job with the same name. 1 means the most recent job.
</p>
<p>You can directly type <code>bjobs</code> without parentheses which runs <code><a href="#topic+bjobs">bjobs</a></code> with defaults.
</p>


<h3>Value</h3>

<p>A data frame with selected job summaries.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+brecent">brecent</a></code> shows the most recent.
</p>
</li>
<li> <p><code><a href="#topic+bjobs_done">bjobs_done</a></code> shows the &quot;DONE&quot; jobs.
</p>
</li>
<li> <p><code><a href="#topic+bjobs_exit">bjobs_exit</a></code> shows the &quot;EXIT&quot; jobs.
</p>
</li>
<li> <p><code><a href="#topic+bjobs_pending">bjobs_pending</a></code> shows the &quot;PEND&quot; jobs.
</p>
</li>
<li> <p><code><a href="#topic+bjobs_running">bjobs_running</a></code> shows the &quot;RUN&quot; jobs.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bjobs # this is the same as bjobs()
bjobs() # all running and pending jobs
bjobs(status = "all") # all jobs
bjobs(status = "RUN") # all running jobs, you can also use `bjobs_running`
bjobs(status = "PEND") # all pending jobs, you can also use `bjobs_pending`
bjobs(status = "DONE") # all done jobs, you can also use `bjobs_done`
bjobs(status = "EXIT") # all exit jobs, you can also use `bjobs_exit`
bjobs(status = "all", max = 20) # last 20 jobs
bjobs(status = "DONE", filter = "example") # done jobs with name '.*example.*'

## End(Not run)
</code></pre>

<hr>
<h2 id='bjobs_barplot'>
Barplot of number of jobs
</h2><span id='topic+bjobs_barplot'></span>

<h3>Description</h3>

<p>Barplot of number of jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_barplot(status = c("RUN", "EXIT", "PEND", "DONE"), filter = NULL, df = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_barplot_+3A_status">status</code></td>
<td>
<p>Status of the jobs. Use &quot;all&quot; for all jobs.</p>
</td></tr>
<tr><td><code id="bjobs_barplot_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
<tr><td><code id="bjobs_barplot_+3A_df">df</code></td>
<td>
<p>Internally used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It draws barplots of number of jobs per day.
</p>


<h3>Value</h3>

<p>A <code>ggplot2</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

<hr>
<h2 id='bjobs_done'>
Finished jobs
</h2><span id='topic+bjobs_done'></span>

<h3>Description</h3>

<p>Finished jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_done(max = Inf, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_done_+3A_max">max</code></td>
<td>
<p>Maximal number of jobs.</p>
</td></tr>
<tr><td><code id="bjobs_done_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can directly type <code>bjobs_done</code> without parentheses which runs <code><a href="#topic+bjobs_done">bjobs_done</a></code> with defaults.
</p>


<h3>Value</h3>

<p>The same output format as <code><a href="#topic+bjobs">bjobs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bjobs_done  # this is the same as `bjobs_done()`
bjobs_done() # all done jobs
bjobs_done(max = 50) # last 50 done jobs
bjobs_done(filter = "example") # done jobs with name ".*example.*"

## End(Not run)
</code></pre>

<hr>
<h2 id='bjobs_exit'>
Failed jobs
</h2><span id='topic+bjobs_exit'></span>

<h3>Description</h3>

<p>Failed jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_exit(max = Inf, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_exit_+3A_max">max</code></td>
<td>
<p>Maximal number of jobs.</p>
</td></tr>
<tr><td><code id="bjobs_exit_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can directly type <code>bjobs_exit</code> without parentheses which runs <code><a href="#topic+bjobs_exit">bjobs_exit</a></code> with defaults.
</p>


<h3>Value</h3>

<p>The same output format as <code><a href="#topic+bjobs">bjobs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bjobs_exit  # this is the same as `bjobs_exit()`
bjobs_exit() # all exit jobs
bjobs_exit(max = 50) # last 50 exit jobs
bjobs_exit(filter = "example") # exit jobs with name ".*example.*"

## End(Not run)
</code></pre>

<hr>
<h2 id='bjobs_pending'>
Pending jobs
</h2><span id='topic+bjobs_pending'></span>

<h3>Description</h3>

<p>Pending jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_pending(max = Inf, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_pending_+3A_max">max</code></td>
<td>
<p>Maximal number of jobs.</p>
</td></tr>
<tr><td><code id="bjobs_pending_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can directly type <code>bjobs_pending</code> without parentheses which runs <code><a href="#topic+bjobs_pending">bjobs_pending</a></code> with defaults.
</p>


<h3>Value</h3>

<p>The same output format as <code><a href="#topic+bjobs">bjobs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bjobs_pending  # this is the same as `bjobs_pending()`
bjobs_pending() # all pending jobs
bjobs_pending(max = 50) # last 50 pending jobs
bjobs_pending(filter = "example") # pending jobs with name ".*example.*"

## End(Not run)
</code></pre>

<hr>
<h2 id='bjobs_running'>
Running jobs
</h2><span id='topic+bjobs_running'></span>

<h3>Description</h3>

<p>Running jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_running(max = Inf, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_running_+3A_max">max</code></td>
<td>
<p>Maximal number of jobs.</p>
</td></tr>
<tr><td><code id="bjobs_running_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can directly type <code>bjobs_running</code> without parentheses which runs <code><a href="#topic+bjobs_running">bjobs_running</a></code> with defaults.
</p>


<h3>Value</h3>

<p>The same output format as <code><a href="#topic+bjobs">bjobs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bjobs_running  # this is the same as `bjobs_running()`
bjobs_running() # all running jobs
bjobs_running(max = 50) # last 50 running jobs
bjobs_running(filter = "example") # running jobs with name ".*example.*"

## End(Not run)
</code></pre>

<hr>
<h2 id='bjobs_timeline'>
Timeline of jobs
</h2><span id='topic+bjobs_timeline'></span>

<h3>Description</h3>

<p>Timeline of jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bjobs_timeline(status = c("RUN", "EXIT", "PEND", "DONE"), filter = NULL, df = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bjobs_timeline_+3A_status">status</code></td>
<td>
<p>Status of the jobs. Use &quot;all&quot; for all jobs.</p>
</td></tr>
<tr><td><code id="bjobs_timeline_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
<tr><td><code id="bjobs_timeline_+3A_df">df</code></td>
<td>
<p>Internally used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It draws segments of duration of jobs. In the plot, each segment represents
a job and the width of the segment correspond to its duration.
</p>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

<hr>
<h2 id='bkill'>
Kill jobs
</h2><span id='topic+bkill'></span>

<h3>Description</h3>

<p>Kill jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bkill(job_id, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bkill_+3A_job_id">job_id</code></td>
<td>
<p>A vector of job ids.</p>
</td></tr>
<tr><td><code id="bkill_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names (only the running and pending jobs).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
job_id = c(10000000, 10000001, 10000002)  # job ids can be get from `bjobs`
bkill(job_id)
# kill all jobs (running and pending) of which the names contain "example"
bkill(filter = "example") 

## End(Not run)
</code></pre>

<hr>
<h2 id='brecent'>
Recent jobs from all status
</h2><span id='topic+brecent'></span>

<h3>Description</h3>

<p>Recent jobs from all status
</p>


<h3>Usage</h3>

<pre><code class='language-R'>brecent(max = 20, filter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="brecent_+3A_max">max</code></td>
<td>
<p>Maximal number of recent jobs.</p>
</td></tr>
<tr><td><code id="brecent_+3A_filter">filter</code></td>
<td>
<p>Regular expression to filter on job names.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can directly type <code>brecent</code> without parentheses which runs <code><a href="#topic+brecent">brecent</a></code> with defaults.
</p>


<h3>Value</h3>

<p>The same output format as <code><a href="#topic+bjobs">bjobs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
brecent  # this is the same as `brecent()`
brecent() # last 20 jobs (from all status)
brecent(max = 50) # last 50 jobs
brecent(filter = "example") # last 20 jobs with name ".*example.*"

## End(Not run)
</code></pre>

<hr>
<h2 id='bsub_chunk'>
Submit R code
</h2><span id='topic+bsub_chunk'></span>

<h3>Description</h3>

<p>Submit R code
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bsub_chunk(code,
    name = NULL,
    packages = bsub_opt$packages,
    image = bsub_opt$image,
    variables = character(),
    share = character(),
    working_dir = bsub_opt$working_dir,
    hours = 1,
    memory = 1,
    cores = 1,
    R_version = bsub_opt$R_version,
    temp_dir = bsub_opt$temp_dir,
    output_dir = bsub_opt$output_dir,
    dependency = NULL,
    enforce = bsub_opt$enforce,
    local = bsub_opt$local,
    script = NULL,
    start = NULL,
    end = NULL,
    save_var = FALSE,
    sh_head = bsub_opt$sh_head)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bsub_chunk_+3A_code">code</code></td>
<td>
<p>The code chunk, it should be embraced by <code>{</code> <code>}</code>.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_name">name</code></td>
<td>
<p>If name is not specified, an internal name calculated by <code><a href="digest.html#topic+digest">digest</a></code> on the chunk is automatically assigned. </p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_packages">packages</code></td>
<td>
<p>A character vector with package names that will be loaded before running the script. There is a special name <code>_in_session_</code> that loads all the packages loaded in current R session.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_image">image</code></td>
<td>
<p>A character vector of RData/rda files that will be loaded before running the script. When <code>image</code> is set to <code>TRUE</code>, all variables in <code>.GlobalEnv</code> will be saved into a temporary file and all attached packages will be recorded. The temporary files will be removed after the job is finished.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_variables">variables</code></td>
<td>
<p>A character vector of variable names that will be loaded before running the script. There is a special name <code>_all_functions_</code> that saves all functions defined in the global environment.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_share">share</code></td>
<td>
<p>A character vector of variables names for which the variables are shared between jobs. Note the temporary .RData files are not deleted automatically.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_working_dir">working_dir</code></td>
<td>
<p>The working directory.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_hours">hours</code></td>
<td>
<p>Running time of the job.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_memory">memory</code></td>
<td>
<p>Memory usage of the job. It is measured in GB.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_cores">cores</code></td>
<td>
<p>Number of cores.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_r_version">R_version</code></td>
<td>
<p>R version.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_temp_dir">temp_dir</code></td>
<td>
<p>Path of temporary folder where the temporary R/bash scripts will be put.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_output_dir">output_dir</code></td>
<td>
<p>Path of output folder where the output/flag files will be put.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_dependency">dependency</code></td>
<td>
<p>A vector of job IDs that current job depends on.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_enforce">enforce</code></td>
<td>
<p>If a flag file for the job is found, whether to enforce to rerun the job.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_local">local</code></td>
<td>
<p>Run job locally (not submitting to the LSF cluster)?</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_script">script</code></td>
<td>
<p>Path of a script where code chunks will be extracted and sent to the cluster.It is always used with <code>start</code> and <code>end</code> arguments.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_start">start</code></td>
<td>
<p>A numeric vector that contains line indices of the starting code chunk or a character vector that contain regular expression to match the start of code chunks.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_end">end</code></td>
<td>
<p>Same setting as <code>start</code>.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_save_var">save_var</code></td>
<td>
<p>Whether save the last variable in the code chunk? Later the variable can be retrieved by <code><a href="#topic+retrieve_var">retrieve_var</a></code>.</p>
</td></tr>
<tr><td><code id="bsub_chunk_+3A_sh_head">sh_head</code></td>
<td>
<p>Commands that are written as head of the sh script.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Job ID.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+bsub_script">bsub_script</a></code> submits R scripts.
</p>
</li>
<li> <p><code><a href="#topic+bsub_cmd">bsub_cmd</a></code>submits shell commands.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bsub_chunk(name = "example", memory = 10, hours = 10, cores = 4,
{
    Sys.sleep(5)
})

## End(Not run)
</code></pre>

<hr>
<h2 id='bsub_cmd'>
Submit shell commands
</h2><span id='topic+bsub_cmd'></span>

<h3>Description</h3>

<p>Submit shell commands
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bsub_cmd(cmd,
    name = NULL,
    hours = 1,
    memory = 1,
    cores = 1,
    temp_dir = bsub_opt$temp_dir,
    output_dir = bsub_opt$output_dir,
    dependency = NULL,
    enforce = bsub_opt$enforce,
    local = bsub_opt$local,
    sh_head = bsub_opt$sh_head,
    ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bsub_cmd_+3A_cmd">cmd</code></td>
<td>
<p>A list of commands.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_name">name</code></td>
<td>
<p>If name is not specified, an internal name calculated by <code><a href="digest.html#topic+digest">digest</a></code> is automatically assigned. </p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_hours">hours</code></td>
<td>
<p>Running time of the job.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_memory">memory</code></td>
<td>
<p>Memory usage of the job. It is measured in GB.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_cores">cores</code></td>
<td>
<p>Number of cores.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_temp_dir">temp_dir</code></td>
<td>
<p>Path of temporary folder where the temporary R/bash scripts will be put.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_output_dir">output_dir</code></td>
<td>
<p>Path of output folder where the output/flag files will be put.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_dependency">dependency</code></td>
<td>
<p>A vector of job IDs that current job depends on.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_enforce">enforce</code></td>
<td>
<p>If a flag file for the job is found, whether to enforce to rerun the job.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_local">local</code></td>
<td>
<p>Run job locally (not submitting to the LSF cluster)?</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_sh_head">sh_head</code></td>
<td>
<p>Commands that are written as head of the sh script.</p>
</td></tr>
<tr><td><code id="bsub_cmd_+3A_...">...</code></td>
<td>
<p>Command-line arguments can also be specified as name-value pairs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Job ID.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+bsub_chunk">bsub_chunk</a></code>submits R code.
</p>
</li>
<li> <p><code><a href="#topic+bsub_script">bsub_script</a></code> submits R scripts.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bsub_cmd("samtools sort ...", name = ..., memory = ..., cores = ..., ...)

## End(Not run)
</code></pre>

<hr>
<h2 id='bsub_opt'>
Parameters for bsub
</h2><span id='topic+bsub_opt'></span>

<h3>Description</h3>

<p>Parameters for bsub
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bsub_opt(..., RESET = FALSE, READ.ONLY = NULL, LOCAL = FALSE, ADD = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bsub_opt_+3A_...">...</code></td>
<td>
<p>Arguments for the parameters, see &quot;details&quot; section</p>
</td></tr>
<tr><td><code id="bsub_opt_+3A_reset">RESET</code></td>
<td>
<p>reset to default values</p>
</td></tr>
<tr><td><code id="bsub_opt_+3A_read.only">READ.ONLY</code></td>
<td>
<p>please ignore</p>
</td></tr>
<tr><td><code id="bsub_opt_+3A_local">LOCAL</code></td>
<td>
<p>please ignore</p>
</td></tr>
<tr><td><code id="bsub_opt_+3A_add">ADD</code></td>
<td>
<p>please ignore</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are following parameters:
</p>

<dl>
<dt><code>packages</code></dt><dd><p>A character vector with package names that will be loaded before running the script.</p>
</dd>
<dt><code>image</code></dt><dd><p>A character vector of RData/rda files that will be loaded before running the script.</p>
</dd>
<dt><code>temp_dir</code></dt><dd><p>Path of temporary folder where the temporary R/bash scripts will be put.</p>
</dd>
<dt><code>output_dir</code></dt><dd><p>Path of output folder where the output/flag files will be put.</p>
</dd>
<dt><code>enforce</code></dt><dd><p>If a flag file for the job is found, whether to enforce to rerun the job.</p>
</dd>
<dt><code>R_version</code></dt><dd><p>The version of R.</p>
</dd>
<dt><code>working_dir</code></dt><dd><p>The working directory.</p>
</dd>
<dt><code>ignore</code></dt><dd><p>Whether ignore <code><a href="#topic+bsub_chunk">bsub_chunk</a></code>, <code><a href="#topic+bsub_script">bsub_script</a></code> and <code><a href="#topic+bsub_cmd">bsub_cmd</a></code>.</p>
</dd>
<dt><code>local</code></dt><dd><p>Run job locally (not submitting to the LSF cluster)?</p>
</dd>
<dt><code>call_Rscript</code></dt><dd><p>How to call <code>Rscript</code> by specifying an R version number.</p>
</dd>
<dt><code>submission_node</code></dt><dd><p>A list of node names for submitting jobs.</p>
</dd>
<dt><code>login_node</code></dt><dd><p>This value basically is the same as <code>submission_node</code> unless the login nodes are different from submission nodes.</p>
</dd>
<dt><code>sh_head</code></dt><dd><p>Commands that are written as head of the sh script.</p>
</dd>
<dt><code>user</code></dt><dd><p>Username on the submission node.</p>
</dd>
<dt><code>group</code></dt><dd><p>The user group</p>
</dd>
<dt><code>ssh_envir</code></dt><dd><p>The commands for setting bash environment for successfully running bjobs, bsub, ...</p>
</dd>
<dt><code>bsub_template</code></dt><dd><p>Template for constructing <code>bsub</code> command.</p>
</dd>
<dt><code>parse_time</code></dt><dd><p>A function that parses time string from the LSF <code>bjobs</code> command to a <code><a href="base.html#topic+POSIXct">POSIXct</a></code> object.</p>
</dd>
<dt><code>verbose</code></dt><dd><p>Whether to print more messages.</p>
</dd>
</dl>

<p><code>ssh_envir</code> should be properly set so that LSF binaries such as <code>bsub</code> or <code>bjobs</code> can be properly found.
There are some environment variables initialized when logging in the bash terminal while they are not initialized with the
ssh connection. Thus, some environment variables should be manually set.
</p>
<p>An example for <code>ssh_envir</code> is as follows. The <code>LSF_ENVDIR</code> and <code>LSF_SERVERDIR</code> should be defined and exported.
</p>
<pre>
    c("source /etc/profile",
      "export LSF_ENVDIR=/opt/lsf/conf",
      "export LSF_SERVERDIR=/opt/lsf/10.1/linux3.10-glibc2.17-x86_64/etc")  </pre>
<p>The values of these two variables can be obtained by entering following commands in your bash terminal (on the submission node):
</p>
<pre>
    echo $LSF_ENVDIR
    echo $LSF_SERVERDIR  </pre>
<p>The time strings by LSF <code>bjobs</code> command might be different for different configurations. The **bsub**
package needs to convert the time strings to <code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> objects for calculating the time difference. Thus, if
the default time string parsing fails, users need to provide a user-defined function and set with <code>parse_time</code>
option in <code><a href="#topic+bsub_opt">bsub_opt</a></code>. The function accepts a vector of time strings and returns a <code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> object. For example,
if the time string returned from <code>bjobs</code> command is in a form of <code>Dec 1 18:00:00 2019</code>, the parsing function
can be defined as:
</p>
<pre>
    bsub_opt$parse_time = function(x) {
        as.POSIXlt(x, format = "\
    }  </pre>


<h3>Value</h3>

<p>The corresponding option values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># The default bsub_opt
bsub_opt
</code></pre>

<hr>
<h2 id='bsub_script'>
Submit R script
</h2><span id='topic+bsub_script'></span>

<h3>Description</h3>

<p>Submit R script
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bsub_script(script,
    argv = "",
    name = NULL,
    hours = 1,
    memory = 1,
    cores = 1,
    R_version = bsub_opt$R_version,
    temp_dir = bsub_opt$temp_dir,
    output_dir = bsub_opt$output_dir,
    dependency = NULL,
    enforce = bsub_opt$enforce,
    local = bsub_opt$local,
    sh_head = bsub_opt$sh_head,
    ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bsub_script_+3A_script">script</code></td>
<td>
<p>The R script.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_argv">argv</code></td>
<td>
<p>A string of command-line arguments.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_name">name</code></td>
<td>
<p>If name is not specified, an internal name calculated by <code><a href="digest.html#topic+digest">digest</a></code> is automatically assigned. </p>
</td></tr>
<tr><td><code id="bsub_script_+3A_hours">hours</code></td>
<td>
<p>Running time of the job.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_memory">memory</code></td>
<td>
<p>Memory usage of the job. It is measured in GB.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_cores">cores</code></td>
<td>
<p>Number of cores.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_r_version">R_version</code></td>
<td>
<p>R version.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_temp_dir">temp_dir</code></td>
<td>
<p>Path of temporary folder where the temporary R/bash scripts will be put.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_output_dir">output_dir</code></td>
<td>
<p>Path of output folder where the output/flag files will be put.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_dependency">dependency</code></td>
<td>
<p>A vector of job IDs that current job depends on.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_enforce">enforce</code></td>
<td>
<p>If a flag file for the job is found, whether to enforce to rerun the job.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_local">local</code></td>
<td>
<p>Run job locally (not submitting to the LSF cluster)?</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_sh_head">sh_head</code></td>
<td>
<p>Commands that are written as head of the sh script.</p>
</td></tr>
<tr><td><code id="bsub_script_+3A_...">...</code></td>
<td>
<p>Command-line arguments can also be specified as name-value pairs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Job ID.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+bsub_chunk">bsub_chunk</a></code> submits R code.
</p>
</li>
<li> <p><code><a href="#topic+bsub_cmd">bsub_cmd</a></code>submits shell commands.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bsub_script("/path/of/foo.R", name = ..., memory = ..., cores = ..., ...)
# with command-line arguments
bsub_script("/path/of/foo.R", argv = "--a 1 --b 3", ...)

## End(Not run)
</code></pre>

<hr>
<h2 id='check_dump_files'>
Check whether there are dump files
</h2><span id='topic+check_dump_files'></span>

<h3>Description</h3>

<p>Check whether there are dump files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dump_files(print = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dump_files_+3A_print">print</code></td>
<td>
<p>Whether to print messages.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the failed jobs, LSF cluster might generate a core dump file and R might generate a .RDataTmp file.
</p>
<p>Note if you manually set working directory in your R code/script, the R dump file can be not caught.
</p>


<h3>Value</h3>

<p>A vector of file names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
check_dump_files()

## End(Not run)
</code></pre>

<hr>
<h2 id='clear_temp_dir'>
Clear temporary dir
</h2><span id='topic+clear_temp_dir'></span>

<h3>Description</h3>

<p>Clear temporary dir
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clear_temp_dir(ask = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clear_temp_dir_+3A_ask">ask</code></td>
<td>
<p>Whether promote.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The temporary files might be used by the running/pending jobs. Deleting them might affect some of the jobs.
You better delete them after all jobs are done.
</p>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
clear_temp_dir()

## End(Not run)
</code></pre>

<hr>
<h2 id='get_dependency'>
Get the dependency of current jobs
</h2><span id='topic+get_dependency'></span>

<h3>Description</h3>

<p>Get the dependency of current jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dependency(job_tb = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_dependency_+3A_job_tb">job_tb</code></td>
<td>
<p>A table from <code><a href="#topic+bjobs">bjobs</a></code>. Optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If there is no dependency of all jobs, it returns <code>NULL</code>. If there are dependencies,
it returns a list of three elements:
</p>

<dl>
<dt><code>dep_mat</code>:</dt><dd><p>a two column matrix containing dependencies from parents to children.</p>
</dd>
<dt><code>id2name</code>:</dt><dd><p>a named vector containing mapping from job IDs to job names.</p>
</dd>
<dt><code>id2stat</code>:</dt><dd><p>a named vector containing mapping from job IDs to job status.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_dependency()

## End(Not run)
</code></pre>

<hr>
<h2 id='is_job_finished'>
Test whether the jobs are finished
</h2><span id='topic+is_job_finished'></span>

<h3>Description</h3>

<p>Test whether the jobs are finished
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_job_finished(job_name, output_dir = bsub_opt$output_dir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_job_finished_+3A_job_name">job_name</code></td>
<td>
<p>A vector of job names.</p>
</td></tr>
<tr><td><code id="is_job_finished_+3A_output_dir">output_dir</code></td>
<td>
<p>Output dir.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It tests whether the &quot;.done&quot; flag files exist
</p>


<h3>Value</h3>

<p>A logical scalar.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

<hr>
<h2 id='job_log'>
Log for the running/finished/failed job
</h2><span id='topic+job_log'></span>

<h3>Description</h3>

<p>Log for the running/finished/failed job
</p>


<h3>Usage</h3>

<pre><code class='language-R'>job_log(job_id, print = TRUE, n_line = 10)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="job_log_+3A_job_id">job_id</code></td>
<td>
<p>The job id. It can be a single job or a vector of job ids.</p>
</td></tr>
<tr><td><code id="job_log_+3A_print">print</code></td>
<td>
<p>Whether print the log message.</p>
</td></tr>
<tr><td><code id="job_log_+3A_n_line">n_line</code></td>
<td>
<p>Number of last lines for each job to show when multiple jobs are queried.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The log message as a vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# a single job
job_id = 1234567  # job ids can be get from `bjobs`
job_log(job_id)
# multiple jobs
job_id = c(10000000, 10000001, 10000002) 
job_log(job_id)  # by  default last 10 lines for each job are printed
job_log(job_id, n_line = 20) # print last 20 lines for each job
# logs for all running jobs
job_log()

## End(Not run)
</code></pre>

<hr>
<h2 id='job_status_by_id'>
Job status by id
</h2><span id='topic+job_status_by_id'></span>

<h3>Description</h3>

<p>Job status by id
</p>


<h3>Usage</h3>

<pre><code class='language-R'>job_status_by_id(job_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="job_status_by_id_+3A_job_id">job_id</code></td>
<td>
<p>The job id.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the job has been deleted from the database, it returns MISSING.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
job_id = 1234567  # job ids can be get from `bjobs`
job_status_by_id(job_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='job_status_by_name'>
Job status by name
</h2><span id='topic+job_status_by_name'></span>

<h3>Description</h3>

<p>Job status by name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>job_status_by_name(job_name, output_dir = bsub_opt$output_dir)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="job_status_by_name_+3A_job_name">job_name</code></td>
<td>
<p>Job name.</p>
</td></tr>
<tr><td><code id="job_status_by_name_+3A_output_dir">output_dir</code></td>
<td>
<p>The output dir.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If the job is finished, it returns DONE/EXIT/MISSING. If the job is running or pending, it returns the corresponding
status. If there are multiple jobs with the same name running or pending, it returns a vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
job_status_by_name("example")

## End(Not run)
</code></pre>

<hr>
<h2 id='monitor'>
A browser-based interactive job monitor
</h2><span id='topic+monitor'></span>

<h3>Description</h3>

<p>A browser-based interactive job monitor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>monitor()
</code></pre>


<h3>Details</h3>

<p>The monitor is implemented as a shiny app.
</p>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# simply run:
monitor
# or
monitor()

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_dependency'>
Plot the job dependency tree
</h2><span id='topic+plot_dependency'></span>

<h3>Description</h3>

<p>Plot the job dependency tree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_dependency(job_id, job_tb = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_dependency_+3A_job_id">job_id</code></td>
<td>
<p>A job ID.</p>
</td></tr>
<tr><td><code id="plot_dependency_+3A_job_tb">job_tb</code></td>
<td>
<p>A table from <code><a href="#topic+bjobs">bjobs</a></code>. Optional.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
job1 = random_job()
job2 = random_job()
job3 = random_job(dependency = c(job1, job2))
plot_dependency(job3)

## End(Not run)
</code></pre>

<hr>
<h2 id='print.bconf'>
Print the configurations
</h2><span id='topic+print.bconf'></span>

<h3>Description</h3>

<p>Print the configurations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bconf'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.bconf_+3A_x">x</code></td>
<td>
<p>A bconf object</p>
</td></tr>
<tr><td><code id="print.bconf_+3A_...">...</code></td>
<td>
<p>Other parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

<hr>
<h2 id='print.bjobs'>
Summary of jobs
</h2><span id='topic+print.bjobs'></span>

<h3>Description</h3>

<p>Summary of jobs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'bjobs'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.bjobs_+3A_x">x</code></td>
<td>
<p>a <code>bjobs</code> class object.</p>
</td></tr>
<tr><td><code id="print.bjobs_+3A_...">...</code></td>
<td>
<p>other arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

<hr>
<h2 id='random_job'>
Submit a random job
</h2><span id='topic+random_job'></span>

<h3>Description</h3>

<p>Submit a random job
</p>


<h3>Usage</h3>

<pre><code class='language-R'>random_job(name = paste0("R_random_job_", digest::digest(runif(1), "crc32")), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="random_job_+3A_name">name</code></td>
<td>
<p>Job name.</p>
</td></tr>
<tr><td><code id="random_job_+3A_...">...</code></td>
<td>
<p>Pass to <code><a href="#topic+bsub_chunk">bsub_chunk</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It only submits <code>Sys.sleep(30)</code>.
</p>


<h3>Value</h3>

<p>The job id.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
random_job()
random_job(name = "test")

## End(Not run)
</code></pre>

<hr>
<h2 id='retrieve_var'>
Retrieve saved variable
</h2><span id='topic+retrieve_var'></span>

<h3>Description</h3>

<p>Retrieve saved variable
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retrieve_var(name, output_dir = bsub_opt$output_dir, wait = 30)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="retrieve_var_+3A_name">name</code></td>
<td>
<p>Job name.</p>
</td></tr>
<tr><td><code id="retrieve_var_+3A_output_dir">output_dir</code></td>
<td>
<p>The output dir set in <code><a href="#topic+bsub_chunk">bsub_chunk</a></code>.</p>
</td></tr>
<tr><td><code id="retrieve_var_+3A_wait">wait</code></td>
<td>
<p>Seconds to wait.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It retrieve the saved variable in <code><a href="#topic+bsub_chunk">bsub_chunk</a></code> when <code>save_rds = TRUE</code> is set.
</p>


<h3>Value</h3>

<p>The retrieved object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
bsub_chunk(name = "example", save_var = TRUE,
{
    Sys.sleep(10)
    1+1
})
retrieve_var("example")

## End(Not run)
</code></pre>

<hr>
<h2 id='run_cmd'>
Run command on submission node
</h2><span id='topic+run_cmd'></span>

<h3>Description</h3>

<p>Run command on submission node
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_cmd(cmd, print = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="run_cmd_+3A_cmd">cmd</code></td>
<td>
<p>A single-line command.</p>
</td></tr>
<tr><td><code id="run_cmd_+3A_print">print</code></td>
<td>
<p>Whether to print output from the command.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If current node is not the submission node, the command is executed via ssh.
</p>


<h3>Value</h3>

<p>The output of the command.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# run pwd on remote node
run_cmd("pwd")

## End(Not run)
</code></pre>

<hr>
<h2 id='ssh_connect'>
Connect to submisstion via ssh
</h2><span id='topic+ssh_connect'></span>

<h3>Description</h3>

<p>Connect to submisstion via ssh
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ssh_connect()
</code></pre>


<h3>Details</h3>

<p>If ssh connection is lost, run this function to reconnect.
</p>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># ssh is automatically connected. To manually connect ssh, run:
## Not run: 
ssh_connect()

## End(Not run)
# where the user name is the one you set in `bsub_opt$user` and
# the node is the one you set in `bsub_opt$login_node`.
</code></pre>

<hr>
<h2 id='ssh_disconnect'>
Disconnect ssh connection
</h2><span id='topic+ssh_disconnect'></span>

<h3>Description</h3>

<p>Disconnect ssh connection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ssh_disconnect()
</code></pre>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Normally you don't need to manually run this function. The ssh is automatically
# disconnected when the package is detached.
# To manually disconnect ssh, run:
## Not run: 
ssh_disconnect()

## End(Not run)
</code></pre>

<hr>
<h2 id='wait_jobs'>
Wait until all jobs are finished
</h2><span id='topic+wait_jobs'></span>

<h3>Description</h3>

<p>Wait until all jobs are finished
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wait_jobs(job_name, output_dir = bsub_opt$output_dir, wait = 30)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wait_jobs_+3A_job_name">job_name</code></td>
<td>
<p>A vector of job names.</p>
</td></tr>
<tr><td><code id="wait_jobs_+3A_output_dir">output_dir</code></td>
<td>
<p>Output dir.</p>
</td></tr>
<tr><td><code id="wait_jobs_+3A_wait">wait</code></td>
<td>
<p>Seconds to wait.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No value is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is no example
NULL
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
