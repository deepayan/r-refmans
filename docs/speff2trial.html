<!DOCTYPE html><html><head><title>Help for package speff2trial</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {speff2trial}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ACTG175'><p>AIDS Clinical Trials Group Study 175</p></a></li>
<li><a href='#modSearch'><p>Internal function for speff()</p></a></li>
<li><a href='#speff'><p>Semiparametric efficient estimation and testing for a two-sample treatment effect with a quantitative or dichotomous endpoint</p></a></li>
<li><a href='#speffSurv'><p>Semiparametric efficient estimation and testing for a two-sample treatment effect with a right-censored</p>
time-to-event endpoint</a></li>
<li><a href='#summary.speff'><p>Summarizing results for semiparametric efficient estimation and testing for a 2-sample treatment effect</p></a></li>
<li><a href='#summary.speffSurv'><p>Summarizing results for semiparametric efficient estimation and testing for a two-sample treatment effect with a</p>
right-censored time-to-event endpoint</a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>Title:</td>
<td>Semiparametric Efficient Estimation for a Two-Sample Treatment
Effect</td>
</tr>
<tr>
<td>Author:</td>
<td>Michal Juraska &lt;mjuraska@fredhutch.org&gt;, with contributions from Peter B. Gilbert &lt;pgilbert@scharp.org&gt;, Xiaomin 
  Lu &lt;xlu2@phhp.ufl.edu&gt;, Min Zhang &lt;mzhangst@umich.edu&gt;, Marie Davidian &lt;davidian@stat.ncsu.edu&gt;, and Anastasios A. Tsiatis &lt;tsiatis@stat.ncsu.edu&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michal Juraska &lt;mjuraska@fredhutch.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs estimation and testing of the treatment effect in a 2-group randomized clinical trial with a quantitative, dichotomous, or right-censored time-to-event endpoint. The method improves efficiency by leveraging baseline predictors of the endpoint. The inverse probability weighting technique of Robins, Rotnitzky, and Zhao (JASA, 1994) is used to provide unbiased estimation when the endpoint is missing at random.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mjuraska/speff2trial">https://github.com/mjuraska/speff2trial</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mjuraska/speff2trial/issues">https://github.com/mjuraska/speff2trial/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>stats, leaps, survival</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-27 23:49:47 UTC; mjuraska</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-31 16:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ACTG175'>AIDS Clinical Trials Group Study 175</h2><span id='topic+ACTG175'></span>

<h3>Description</h3>

<p>ACTG 175 was a randomized clinical trial to compare monotherapy with zidovudine or didanosine with 
combination therapy with zidovudine and didanosine or zidovudine and zalcitabine in adults infected with the human 
immunodeficiency virus type I whose CD4 T cell counts were between 200 and 500 per cubic millimeter.</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ACTG175)</code></pre>


<h3>Format</h3>

<p>A data frame with 2139 observations on the following 27 variables:
</p>

<dl>
<dt><code>pidnum</code></dt><dd><p>patient's ID number</p>
</dd>
<dt><code>age</code></dt><dd><p>age in years at baseline</p>
</dd>
<dt><code>wtkg</code></dt><dd><p>weight in kg at baseline</p>
</dd>
<dt><code>hemo</code></dt><dd><p>hemophilia (0=no, 1=yes)</p>
</dd>
<dt><code>homo</code></dt><dd><p>homosexual activity (0=no, 1=yes)</p>
</dd>
<dt><code>drugs</code></dt><dd><p>history of intravenous drug use (0=no, 1=yes)</p>
</dd>
<dt><code>karnof</code></dt><dd><p>Karnofsky score (on a scale of 0-100)</p>
</dd>
<dt><code>oprior</code></dt><dd><p>non-zidovudine antiretroviral therapy prior to initiation of study treatment (0=no, 1=yes)</p>
</dd>
<dt><code>z30</code></dt><dd><p>zidovudine use in the 30 days prior to treatment initiation (0=no, 1=yes)</p>
</dd>
<dt><code>zprior</code></dt><dd><p>zidovudine use prior to treatment initiation (0=no, 1=yes)</p>
</dd>
<dt><code>preanti</code></dt><dd><p>number of days of previously received antiretroviral therapy</p>
</dd>
<dt><code>race</code></dt><dd><p>race (0=white, 1=non-white)</p>
</dd>
<dt><code>gender</code></dt><dd><p>gender (0=female, 1=male)</p>
</dd>
<dt><code>str2</code></dt><dd><p>antiretroviral history (0=naive, 1=experienced)</p>
</dd>
<dt><code>strat</code></dt><dd><p>antiretroviral history stratification (1='antiretroviral naive', 2='&gt; 1 but <code class="reqn">\leq</code> 52 weeks of prior
antiretroviral therapy', 3='&gt; 52 weeks')</p>
</dd>
<dt><code>symptom</code></dt><dd><p>symptomatic indicator (0=asymptomatic, 1=symptomatic)</p>
</dd>
<dt><code>treat</code></dt><dd><p>treatment indicator (0=zidovudine only, 1=other therapies)</p>
</dd>
<dt><code>offtrt</code></dt><dd><p>indicator of off-treatment before 96<code class="reqn">\pm</code>5 weeks (0=no,1=yes)</p>
</dd>
<dt><code>cd40</code></dt><dd><p>CD4 T cell count at baseline</p>
</dd>
<dt><code>cd420</code></dt><dd><p>CD4 T cell count at 20<code class="reqn">\pm</code>5 weeks</p>
</dd>
<dt><code>cd496</code></dt><dd><p>CD4 T cell count at 96<code class="reqn">\pm</code>5 weeks (=<code>NA</code> if missing)</p>
</dd>
<dt><code>r</code></dt><dd><p>missing CD4 T cell count at 96<code class="reqn">\pm</code>5 weeks (0=missing, 1=observed)</p>
</dd>
<dt><code>cd80</code></dt><dd><p>CD8 T cell count at baseline</p>
</dd>
<dt><code>cd820</code></dt><dd><p>CD8 T cell count at 20<code class="reqn">\pm</code>5 weeks</p>
</dd>
<dt><code>cens</code></dt><dd><p>indicator of observing the event in <code>days</code></p>
</dd>
<dt><code>days</code></dt><dd><p>number of days until the first occurrence of: (i) a decline in CD4 T cell count of at least 50
(ii) an event indicating progression to AIDS, or (iii) death.</p>
</dd>
<dt><code>arms</code></dt><dd><p>treatment arm (0=zidovudine, 1=zidovudine and didanosine, 2=zidovudine and zalcitabine, 
3=didanosine).</p>
</dd>
</dl>



<h3>Details</h3>

<p>The variable <code>days</code> contains right-censored time-to-event observations. The data set includes 
the following post-randomization covariates: CD4 and CD8 T cell count at 20<code class="reqn">\pm</code>5 
weeks and the indicator of whether or not the patient was taken off-treatment before 96<code class="reqn">\pm</code>5 weeks.</p>


<h3>References</h3>

<p>Hammer SM, et al. (1996), &quot;A trial comparing nucleoside monotherapy with combination therapy in 
HIV-infected adults with CD4 cell counts from 200 to 500 per cubic millimeter.&quot;, <em>New England Journal of Medicine</em>, 
335:1081&ndash;1090.</p>

<hr>
<h2 id='modSearch'>Internal function for speff()</h2><span id='topic+modSearch'></span>

<h3>Description</h3>

<p><code>modSearch</code> is used internally by <code>speff</code> to construct an optimal model for 
prediction of the study endpoint or estimation of the missingness mechanism.</p>


<h3>Usage</h3>

<pre><code class='language-R'>modSearch(formula, x, y, endpoint, method, optimal, force.in,
          nvmax)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modSearch_+3A_formula">formula</code></td>
<td>
<p>a formula object with the response on the left of the <code>~</code> operator, and the linear
predictor on the right.</p>
</td></tr>
<tr><td><code id="modSearch_+3A_x">x</code></td>
<td>
<p>a matrix of at least two predictors</p>
</td></tr>
<tr><td><code id="modSearch_+3A_y">y</code></td>
<td>
<p>a response vector</p>
</td></tr>
<tr><td><code id="modSearch_+3A_endpoint">endpoint</code></td>
<td>
<p>a character string specifying the type of the response variable; possible values are 
&quot;<code>quantitative</code>&quot; or &quot;<code>dichotomous</code>&quot;.</p>
</td></tr>
<tr><td><code id="modSearch_+3A_method">method</code></td>
<td>
<p>a character string specifying the type of search technique used in the model selection procedure; 
possible values are &quot;<code>exhaustive</code>&quot;, &quot;<code>forward</code>&quot;, or <br /> &quot;<code>backward</code>&quot;.</p>
</td></tr>
<tr><td><code id="modSearch_+3A_optimal">optimal</code></td>
<td>
<p>specifies the optimization criterion for model selection; possible values are &quot;<code>cp</code>&quot; for 
Mallow's Cp, &quot;<code>bic</code>&quot; for BIC, and &quot;<code>rsq</code>&quot; for R-squared.</p>
</td></tr>
<tr><td><code id="modSearch_+3A_force.in">force.in</code></td>
<td>
<p>a vector of indices to columns of the design matrix that should be included in each regression model.</p>
</td></tr>
<tr><td><code id="modSearch_+3A_nvmax">nvmax</code></td>
<td>
<p>the maximum number of covariates considered for inclusion in a model.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+speff">speff</a></code></p>

<hr>
<h2 id='speff'>Semiparametric efficient estimation and testing for a two-sample treatment effect with a quantitative or dichotomous endpoint</h2><span id='topic+speff'></span>

<h3>Description</h3>

<p><code>speff</code> conducts estimation and testing of the treatment effect in a 2-group randomized
clinical trial with a quantitative or dichotomous endpoint. The method is a special case of Robins, Rotnitzky, and 
Zhao (1994, JASA). It improves efficiency by leveraging baseline predictors of the endpoint. The method uses 
inverse probability weighting to provide unbiased estimation when the endpoint is missing at random.</p>


<h3>Usage</h3>

<pre><code class='language-R'>speff(formula, endpoint=c("quantitative", "dichotomous"), data,
      postrandom=NULL, force.in=NULL, nvmax=9, 
      method=c("exhaustive", "forward", "backward"), 
      optimal=c("cp", "bic", "rsq"), trt.id, conf.level=0.95, 
      missCtrl=NULL, missTreat=NULL, endCtrlPre=NULL, 
      endTreatPre=NULL, endCtrlPost=NULL, endTreatPost=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="speff_+3A_formula">formula</code></td>
<td>
<p>a formula object with the response on the left of the <code>~</code> operator, and the linear
predictor on the right. The linear predictor specifies baseline and postrandomization variables that are 
considered for inclusion by the automated procedure for selecting the best models predicting the endpoint, 
separately for each treatment group. Interactions and variable transformations might also be considered. If predicted 
values for the endpoint are entered explicitly by the user, the formula can be of the form <code>response ~ 1</code>.</p>
</td></tr>
<tr><td><code id="speff_+3A_endpoint">endpoint</code></td>
<td>
<p>a character string specifying the type of the response variable. The option &quot;<code>quantitative</code>&quot; 
(default) classifies the response as quantitative, and the mean difference is the measure of the treatment effect,
whereas &quot;<code>dichotomous</code>&quot; specifies a dichotomous response, and the log odds ratio is the measure of the treatment
effect. Only the first character is necessary.</p>
</td></tr>
<tr><td><code id="speff_+3A_data">data</code></td>
<td>
<p>a data frame in which to interpret the variables named in the <code>formula</code>, <br /> <code>postrandom</code>, and 
<code>trt.id</code>.</p>
</td></tr>
<tr><td><code id="speff_+3A_postrandom">postrandom</code></td>
<td>
<p>a character vector designating postrandomization covariates included in the formula 
(this argument allows to distinguish baseline from postrandomiation covariates).</p>
</td></tr>
<tr><td><code id="speff_+3A_force.in">force.in</code></td>
<td>
<p>a vector of indices to columns of the design matrix that should be included in each regression model.</p>
</td></tr>
<tr><td><code id="speff_+3A_nvmax">nvmax</code></td>
<td>
<p>the maximum number of covariates considered for inclusion in a model. The default is 9.</p>
</td></tr>
<tr><td><code id="speff_+3A_method">method</code></td>
<td>
<p>specifies the type of search technique used in the model selection procedure carried out by the 
<code>regsubsets</code> function. &quot;<code>exhaustive</code>&quot; (default) performs the all-subsets selection, whereas 
&quot;<code>forward</code>&quot; and &quot;<code>backward</code>&quot; execute a forward or backward step-wise selection, respectively.</p>
</td></tr>
<tr><td><code id="speff_+3A_optimal">optimal</code></td>
<td>
<p>specifies the optimization criterion for model selection. The default is &quot;<code>cp</code>&quot;, Mallow's Cp, 
which is equivalent to AIC. The other options are &quot;<code>bic</code>&quot; for BIC and &quot;<code>rsq</code>&quot; for R-squared.</p>
</td></tr>
<tr><td><code id="speff_+3A_trt.id">trt.id</code></td>
<td>
<p>a character string specifying the name of the treatment indicator which can be a character or a
numeric vector. The control and treatment group is defined by the alphanumeric order of labels used in the treatment 
indicator.</p>
</td></tr>
<tr><td><code id="speff_+3A_conf.level">conf.level</code></td>
<td>
<p>the confidence level to be used for confidence intervals reported by <br />
<code><a href="#topic+summary.speff">summary.speff</a></code>.</p>
</td></tr>
<tr><td><code id="speff_+3A_missctrl">missCtrl</code></td>
<td>
<p>estimated probabilities of observing the endpoint based on pre- and postrandomization information 
in the control group</p>
</td></tr>
<tr><td><code id="speff_+3A_misstreat">missTreat</code></td>
<td>
<p>estimated probabilities of observing the endpoint based on pre- and postrandomization information 
in the treatment group</p>
</td></tr>
<tr><td><code id="speff_+3A_endctrlpre">endCtrlPre</code></td>
<td>
<p>predicted values of the endpoint using baseline information in the control group only</p>
</td></tr>
<tr><td><code id="speff_+3A_endtreatpre">endTreatPre</code></td>
<td>
<p>predicted values of the endpoint using baseline information in the treatment group only</p>
</td></tr>
<tr><td><code id="speff_+3A_endctrlpost">endCtrlPost</code></td>
<td>
<p>predicted values of the endpoint using baseline and postrandomization information in the 
control group</p>
</td></tr>
<tr><td><code id="speff_+3A_endtreatpost">endTreatPost</code></td>
<td>
<p>predicted values of the endpoint using baseline and postrandomization information in the 
treatment group</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The treatment effect is represented by the mean difference or the log odds ratio for a quantitative or dichotomous 
endpoint, respectively. Estimates of the treatment effect that ignore baseline covariates (naive) are included in the 
output.
</p>
<p>Using the automated model selection procedure performed by <code>regsubsets</code>, four optimal regression models are 
developed for the study endpoint. Initially, all baseline and postrandomization covariates specified in the formula 
are considered for inclusion by the model selection procedure carried out separately in each treatment group. The 
optimal models are used to construct predicted values of the endpoint. Subsequently, in each treatment group, another 
regression model is fitted that includes only baseline covariates that were selected in the previous optimization. 
Then predicted values of the endpoint are computed based on these models. If missingness occurs in the endpoint 
variable, the model selection procedure is additionally used to determine the optimal models for predicting 
whether a subject has an observed endpoint, separately in each treatment group.
</p>
<p>The function <code>regsubsets</code> conducts optimization of linear regression models only. The following modification 
in the model selection is adopted for a dichotomous variable: initially, a logistic regression model is fitted 
with all baseline and postrandomization covariates included in the formula. Subsequently, an optimal model is 
selected by using a weighted linear regression with weights from the last iteration of the IWLS algorithm. 
The optimal model is then refitted by logistic regression.
</p>
<p>Besides using the built-in model selection algorithms, the user has the option to explicitly enter predicted 
values of the endpoint as well as estimated probabilities of observing the endpoint if it is missing at random.
</p>


<h3>Value</h3>

<p><code>speff</code> returns an object of class &quot;<code>speff</code>&quot; which can be processed by 
<code><a href="#topic+summary.speff">summary.speff</a></code> to obtain or print a summary of the results. An object of class &quot;<code>speff</code>&quot; 
is a list containing the following components:
</p>
<table>
<tr><td><code>coef</code></td>
<td>
<p>a matrix with estimates of treatment-specific mean responses and the treatment effect.</p>
</td></tr>
<tr><td><code>cov</code></td>
<td>
<p>a list with components <code>naive</code> and <code>speff</code>, each storing the covariance matrix of the estimated 
treatment-specific mean responses.</p>
</td></tr>
<tr><td><code>varbeta</code></td>
<td>
<p>a numeric vector of variance estimates of the naive and semiparametric treatment effect estimates.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>a list with components <code>control</code> and <code>treatment</code> containing formula objects for the optimal 
selected regression models. Set to <code>NULL</code> if predicted values are entered explicitly.</p>
</td></tr>
<tr><td><code>rsq</code></td>
<td>
<p>a numeric vector of the R-squared statistics for the optimal selected regression models predicting 
the study endpoint. Set to <code>NULL</code> if predicted values are entered by the user.</p>
</td></tr>
<tr><td><code>endpoint</code></td>
<td>
<p>&quot;<code>quantitative</code>&quot; for a quantitative and &quot;<code>dichotomous</code>&quot; for a dichotomous response.</p>
</td></tr>
<tr><td><code>postrandom</code></td>
<td>
<p>a character vector of postrandomization covariates considered for selection.</p>
</td></tr>
<tr><td><code>predicted</code></td>
<td>
<p>a logical vector; if <code>TRUE</code>, the built-in model selection procedure was employed for 
prediction of the study endpoint in the control and treatment group, respectively.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>confidence level of the confidence intervals reported by <code><a href="#topic+summary.speff">summary.speff</a></code>.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>search technique employed in the model selection procedure.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>number of subjects in each treatment group.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Robins JM, Rotnitzky A, Zhao LP. (1994), &quot;Estimation of regression coefficients when some regressors are not always 
observed.&quot;, <em>Journal of the American Statistical Association</em>, 89:846&ndash;66.
</p>
<p>Tsiatis AA, Davidian M, Zhang M, Lu X. (2007), &quot;Covariate adjustment for two-sample treatment comparisons in 
randomized clinical trials: A principled yet flexible approach.&quot;, <em>Statistics in Medicine</em>, 27:4658&ndash;4677.
</p>
<p>Zhang M, Tsiatis AA, Davidian M. (2008), &quot;Improving efficiency of inferences in randomized clinical trials using 
auxiliary covariates.&quot;, <em>Biometrics</em>, 64:707&ndash;715.
</p>
<p>Davidian M, Tsiatis AA, Leon S. (2005), &quot;Semiparametric estimation of treatment effect in a pretest-posttest study 
with missing data.&quot;, <em>Statistical Science</em>, 20:261&ndash;301.
</p>
<p>Zhang M, Gilbert P. (2009), &quot;Increasing the efficiency of prevential trials by incorporating baseline
covariates.&quot;, manuscript.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.speff">summary.speff</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>str(ACTG175)

### treatment effect estimation with a quantitative endpoint missing
### at random
fit1 &lt;- speff(cd496 ~ age+wtkg+hemo+homo+drugs+karnof+oprior+preanti+
race+gender+str2+strat+symptom+cd40+cd420+cd80+cd820+offtrt, 
postrandom=c("cd420","cd820","offtrt"), data=ACTG175, trt.id="treat")

### 'fit2' adds quadratic effects of CD420 and CD820 and their 
### two-way interaction
fit2 &lt;- speff(cd496 ~ age+wtkg+hemo+homo+drugs+karnof+oprior+preanti+
race+gender+str2+strat+symptom+cd40+cd420+I(cd420^2)+cd80+cd820+
I(cd820^2)+cd420:cd820+offtrt, postrandom=c("cd420","I(cd420^2)",
"cd820","I(cd820^2)","cd420:cd820","offtrt"), data=ACTG175, 
trt.id="treat")

### 'fit3' uses R-squared as the optimization criterion
fit3 &lt;- speff(cd496 ~ age+wtkg+hemo+homo+drugs+karnof+oprior+preanti+
race+gender+str2+strat+symptom+cd40+cd420+cd80+cd820+offtrt, 
postrandom=c("cd420","cd820","offtrt"), data=ACTG175, trt.id="treat", 
optimal="rsq")

### a dichotomous response is created with missing values maintained
ACTG175$cd496bin &lt;- ifelse(ACTG175$cd496 &gt; 250, 1, 0)

### treatment effect estimation with a dichotomous endpoint missing
### at random
fit4 &lt;- speff(cd496bin ~ age+wtkg+hemo+homo+drugs+karnof+oprior+preanti+
race+gender+str2+strat+symptom+cd40+cd420+cd80+cd820+offtrt, 
postrandom=c("cd420","cd820","offtrt"), data=ACTG175, trt.id="treat", 
endpoint="dichotomous")
</code></pre>

<hr>
<h2 id='speffSurv'>Semiparametric efficient estimation and testing for a two-sample treatment effect with a right-censored 
time-to-event endpoint</h2><span id='topic+speffSurv'></span>

<h3>Description</h3>

<p><code>speffSurv</code> conducts estimation and testing of the treatment effect in a two-group randomized
clinical trial with a right-censored time-to-event endpoint. It improves efficiency by leveraging baseline predictors 
of the endpoint.</p>


<h3>Usage</h3>

<pre><code class='language-R'>speffSurv(formula, data, force.in=NULL, nvmax=9,
          method=c("exhaustive", "forward", "backward"), 
          optimal=c("cp", "bic", "rsq"), trt.id, 
          conf.level=0.95, fixed=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="speffSurv_+3A_formula">formula</code></td>
<td>
<p>a formula object with the response variable on the left of the <code>~</code> operator and the linear 
predictor on the right. The response is a survival object of class <code>Surv</code>. The linear predictor specifies 
baseline variables that are considered for inclusion by the automated procedure for selecting the best models 
predicting the endpoint. Interactions and variable transformations might also be considered.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_data">data</code></td>
<td>
<p>a data frame in which to interpret the variables named in the <code>formula</code> and <code>trt.id</code>.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_force.in">force.in</code></td>
<td>
<p>a vector of indices to columns of the design matrix that should be included in each regression model.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_nvmax">nvmax</code></td>
<td>
<p>the maximum number of covariates considered for inclusion in a model. The default is 9.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_method">method</code></td>
<td>
<p>specifies the type of search technique used in the model selection procedure carried out by the
<code>regsubsets</code> function. &quot;<code>exhaustive</code>&quot; (default) performs the all-subsets selection, whereas
&quot;<code>forward</code>&quot; and &quot;<code>backward</code>&quot; execute a forward or backward step-wise selection, respectively.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_optimal">optimal</code></td>
<td>
<p>specifies the optimization criterion for model selection. The default is &quot;<code>cp</code>&quot;, Mallow's Cp,
which is equivalent to AIC. The other options are &quot;<code>bic</code>&quot; for BIC and &quot;<code>rsq</code>&quot; for R-squared.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_trt.id">trt.id</code></td>
<td>
<p>a character string specifying the name of the treatment indicator which can be a character or a
numeric vector. The control and treatment group is defined by the alphanumeric order of labels used in the treatment
indicator.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_conf.level">conf.level</code></td>
<td>
<p>the confidence level to be used for confidence intervals reported by <br />
<code><a href="#topic+summary.speffSurv">summary.speffSurv</a></code>.</p>
</td></tr>
<tr><td><code id="speffSurv_+3A_fixed">fixed</code></td>
<td>
<p>logical value; if <code>FALSE</code> (default), automated selection procedure is used for predicting the 
endpoint. Otherwise, <em>all</em> baseline variables specified in the formula are used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The treatment effect is represented by the (unadjusted) log hazard ratio for the treatment versus control group. 
The estimate of the treatment effect using the (unadjusted) proportional hazards model is included in the output.
</p>
<p>Using the automated model selection procedure performed by <code>regsubsets</code>, two optimal linear regression models 
are developed to characterize the influence function of an estimator that is more efficient
than the maximum partial likelihood estimator. The &quot;efficient&quot; influence function is searched in the space of 
influence functions that determine all regular and asymptotically linear estimators for the treatment effect 
(for definitions see, for example, Tsiatis, 2006). The space of influence functions has three components: the 
estimation space that characterizes all regular and asymptotically linear estimators that do not use baseline 
covariates. The other two subspaces, the randomization and censoring space, use baseline covariates to improve 
the efficiency in the estimation of the treatment effect (Lu, 2008). The automated model selection procedure is 
used to identify functions in the randomization and censoring space that satisfy a prespecified optimality criterion 
and that lead to efficiency gain by using baseline predictors of the outcome.
</p>
<p>The user has the option to avoid the automated variable selection and, instead, use all variables specified in the
formula for the estimation of the treatment effect. This is achieved by setting <code>fixed=TRUE</code>.
</p>
<p><code>speffSurv</code> does not allow missing values in the data.
</p>


<h3>Value</h3>

<p><code>speffSurv</code> returns an object of class &quot;<code>speffSurv</code>&quot; which can be processed by <br />
<code><a href="#topic+summary.speffSurv">summary.speffSurv</a></code> to obtain or print a summary of the results. An object of class &quot;<code>speffSurv</code>&quot;
is a list containing the following components:
</p>
<table>
<tr><td><code>beta</code></td>
<td>
<p>a numeric vector with estimates of the treatment effect from the unadjusted proportional hazards model and 
the semiparametric efficient model using baseline covariates, respectively.</p>
</td></tr>
<tr><td><code>varbeta</code></td>
<td>
<p>a numeric vector of variance estimates for the treatment effect estimates in <code>beta</code>.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>a list with components <code>rndSpace</code> and <code>censSpace</code> containing formula objects for the optimal
selected linear regression models that characterize the optimal elements in the randomization and censoring space,
respectively. Set to <code>NULL</code> if <code>fixed=TRUE</code>.</p>
</td></tr>
<tr><td><code>fixed</code></td>
<td>
<p>a logical value; if <code>TRUE</code>, the efficient estimator utilizes all baseline covariates specified in the
formula. Otherwise, the automated selection procedure is used to identify covariates that ensure optimality.</p>
</td></tr>
<tr><td><code>conf.level</code></td>
<td>
<p>confidence level of the confidence intervals reported by <code><a href="#topic+summary.speffSurv">summary.speffSurv</a></code>.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>search technique employed in the model selection procedure.</p>
</td></tr>
<tr><td><code>n</code></td>
<td>
<p>number of subjects in each treatment group.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Lu X, Tsiatis AA. (2008), &quot;Improving the efficiency of the log-rank test using auxiliary covariates.&quot;, 
<em>Biometrika</em>, 95:679&ndash;694.
</p>
<p>Tsiatis AA. (2006), <em>Semiparametric Theory and Missing Data.</em>, New York: Springer.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.speffSurv">summary.speffSurv</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>str(ACTG175)

data &lt;- na.omit(ACTG175[ACTG175$arms==0 | ACTG175$arms==1, ])
data &lt;- data[1:100, ]

### efficiency-improved estimation of log hazard ratio using
### baseline covariates
### 'fit1' coerces the use of all specified baseline covariates;
### automated selection procedure is skipped
fit1 &lt;- speffSurv(Surv(days,cens) ~ cd40+cd80+age, 
                  data=data, trt.id="arms", fixed=TRUE)


fit2 &lt;- speffSurv(Surv(days,cens) ~ cd40+cd80+age+wtkg+drugs+karnof+z30+
preanti+symptom, data=data, trt.id="arms")

</code></pre>

<hr>
<h2 id='summary.speff'>Summarizing results for semiparametric efficient estimation and testing for a 2-sample treatment effect</h2><span id='topic+summary.speff'></span>

<h3>Description</h3>

<p><code>summary</code> method for an object of class &quot;<code>speff</code>&quot;.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'speff'
summary(object,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.speff_+3A_object">object</code></td>
<td>
<p>an object of class &quot;<code>speff</code>&quot;.</p>
</td></tr>
<tr><td><code id="summary.speff_+3A_...">...</code></td>
<td>
<p>for other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>print.summary.speff</code> prints a formatted summary of results. In the initial section, formulas for the optimal 
selected regression models are printed with pertaining R-squared statistics for each treatment group. 
Further, an inferential table is produced with point and interval estimates of the treatment effect, 
standard error estimates, and Wald test p-values using both the naive and covariate-adjusted estimation methods. 
At least five significant digits are printed.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr><td><code>tab</code></td>
<td>
<p>inferential table for the treatment effect.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>search technique employed in the model selection procedure.</p>
</td></tr>
<tr><td><code>rsq</code></td>
<td>
<p>a numeric vector of the R-squared statistics for the optimal selected regression models predicting 
the study endpoint.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>a list with components <code>control</code> and <code>treatment</code> containing formula objects for 
the optimal selected regression models.</p>
</td></tr>
<tr><td><code>predicted</code></td>
<td>
<p>a logical vector; if <code>TRUE</code>, the built-in model selection procedure was employed for 
prediction of the study endpoint in the control and treatment group, respectively.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+speff">speff</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>### from the example for 'speff':
fit1 &lt;- speff(cd496 ~ age+wtkg+hemo+homo+drugs+karnof+oprior+preanti+
race+gender+str2+strat+symptom+cd40+cd420+cd80+cd820+offtrt,
postrandom=c("cd420","cd820","offtrt"), data=ACTG175, trt.id="treat")

summary(fit1)
</code></pre>

<hr>
<h2 id='summary.speffSurv'>Summarizing results for semiparametric efficient estimation and testing for a two-sample treatment effect with a 
right-censored time-to-event endpoint</h2><span id='topic+summary.speffSurv'></span>

<h3>Description</h3>

<p><code>summary</code> method for an object of class &quot;<code>speffSurv</code>&quot;.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'speffSurv'
summary(object,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.speffSurv_+3A_object">object</code></td>
<td>
<p>an object of class &quot;<code>speffSurv</code>&quot;.</p>
</td></tr>
<tr><td><code id="summary.speffSurv_+3A_...">...</code></td>
<td>
<p>for other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>print.summary.speffSurv</code> prints a formatted summary of results. In the initial section, right-sided formulas 
defining the optimal selected functions in the randomization and censoring space are printed. Further, an inferential 
table is generated with point and interval estimates of the log hazard ratio, standard error estimates, and Wald test 
p-values using both the proportional hazards and covariate-adjusted estimation methods. At least five significant 
digits are printed.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>
<table>
<tr><td><code>tab</code></td>
<td>
<p>inferential table for the treatment effect.</p>
</td></tr>
<tr><td><code>method</code></td>
<td>
<p>search technique employed in the model selection procedure.</p>
</td></tr>
<tr><td><code>formula</code></td>
<td>
<p>a list with components <code>rndSpace</code> and <code>censSpace</code> containing formula objects for the optimal
selected linear regression models that characterize the optimal elements in the randomization and censoring space,
respectively. Set to <code>NULL</code> if <code>fixed=TRUE</code>.</p>
</td></tr>
<tr><td><code>fixed</code></td>
<td>
<p>a logical value; if <code>TRUE</code>, the efficient estimator utilized all baseline covariates specified in the 
formula. Otherwise, the automated selection procedure was used to identify covariates that ensure optimality.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+speffSurv">speffSurv</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>### from the example for 'speffSurv':
data &lt;- na.omit(ACTG175[ACTG175$arms==0 | ACTG175$arms==1, ])
data &lt;- data[1:100, ]

fit1 &lt;- speffSurv(Surv(days,cens) ~ cd40+cd80+age, 
                  data=data, trt.id="arms", fixed=TRUE)

summary(fit1)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
