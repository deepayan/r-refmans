<!DOCTYPE html><html><head><title>Help for package googledrive</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {googledrive}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#as_dribble'><p>Coerce to a <code>dribble</code></p></a></li>
<li><a href='#as_shared_drive'><p>Coerce to shared drive</p></a></li>
<li><a href='#deprecated-team-drive-functions'><p>Deprecated Team Drive functions</p></a></li>
<li><a href='#dribble'><p>dribble object</p></a></li>
<li><a href='#dribble-checks'><p>Check facts about a dribble</p></a></li>
<li><a href='#drive_about'><p>Get info on Drive capabilities</p></a></li>
<li><a href='#drive_auth'><p>Authorize googledrive</p></a></li>
<li><a href='#drive_auth_configure'><p>Edit and view auth configuration</p></a></li>
<li><a href='#drive_browse'><p>Visit Drive file in browser</p></a></li>
<li><a href='#drive_cp'><p>Copy a Drive file</p></a></li>
<li><a href='#drive_create'><p>Create a new blank Drive file</p></a></li>
<li><a href='#drive_deauth'><p>Suspend authorization</p></a></li>
<li><a href='#drive_download'><p>Download a Drive file</p></a></li>
<li><a href='#drive_empty_trash'><p>Empty Drive Trash</p></a></li>
<li><a href='#drive_endpoints'><p>List Drive endpoints</p></a></li>
<li><a href='#drive_examples'><p>Example files</p></a></li>
<li><a href='#drive_extension'><p>Lookup extension from MIME type</p></a></li>
<li><a href='#drive_fields'><p>Request partial resources</p></a></li>
<li><a href='#drive_find'><p>Find files on Google Drive</p></a></li>
<li><a href='#drive_get'><p>Get Drive files by path or id</p></a></li>
<li><a href='#drive_has_token'><p>Is there a token on hand?</p></a></li>
<li><a href='#drive_id'><p><code>drive_id</code> class</p></a></li>
<li><a href='#drive_link'><p>Retrieve Drive file links</p></a></li>
<li><a href='#drive_ls'><p>List contents of a folder or shared drive</p></a></li>
<li><a href='#drive_mime_type'><p>Lookup MIME type</p></a></li>
<li><a href='#drive_mkdir'><p>Create a Drive folder</p></a></li>
<li><a href='#drive_mv'><p>Move a Drive file</p></a></li>
<li><a href='#drive_publish'><p>Publish native Google files</p></a></li>
<li><a href='#drive_put'><p>PUT new media into a Drive file</p></a></li>
<li><a href='#drive_read_string'><p>Read the content of a Drive file</p></a></li>
<li><a href='#drive_rename'><p>Rename a Drive file</p></a></li>
<li><a href='#drive_reveal'><p>Add a new column of Drive file information</p></a></li>
<li><a href='#drive_rm'><p>Delete files from Drive</p></a></li>
<li><a href='#drive_scopes'><p>Produce scopes specific to the Drive API</p></a></li>
<li><a href='#drive_share'><p>Share Drive files</p></a></li>
<li><a href='#drive_token'><p>Produce configured token</p></a></li>
<li><a href='#drive_trash'><p>Move Drive files to or from trash</p></a></li>
<li><a href='#drive_update'><p>Update an existing Drive file</p></a></li>
<li><a href='#drive_upload'><p>Upload into a new Drive file</p></a></li>
<li><a href='#drive_user'><p>Get info on current user</p></a></li>
<li><a href='#expose'><p>An expose object</p></a></li>
<li><a href='#googledrive-configuration'><p>googledrive configuration</p></a></li>
<li><a href='#googledrive-deprecated'><p>Deprecated googledrive functions</p></a></li>
<li><a href='#googledrive-package'><p>googledrive: An Interface to Google Drive</p></a></li>
<li><a href='#request_generate'><p>Build a request for the Google Drive API</p></a></li>
<li><a href='#request_make'><p>Make a request for the Google Drive v3 API</p></a></li>
<li><a href='#shared_drive_create'><p>Create a new shared drive</p></a></li>
<li><a href='#shared_drive_find'><p>Find shared drives</p></a></li>
<li><a href='#shared_drive_get'><p>Get shared drives by name or id</p></a></li>
<li><a href='#shared_drive_rm'><p>Delete shared drives</p></a></li>
<li><a href='#shared_drive_update'><p>Update a shared drive</p></a></li>
<li><a href='#shared_drives'><p>Access shared drives</p></a></li>
<li><a href='#shortcut_create'><p>Create a shortcut to a Drive file</p></a></li>
<li><a href='#shortcut_resolve'><p>Resolve shortcuts to their targets</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>An Interface to Google Drive</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Manage Google Drive files from R.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://googledrive.tidyverse.org">https://googledrive.tidyverse.org</a>,
<a href="https://github.com/tidyverse/googledrive">https://github.com/tidyverse/googledrive</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidyverse/googledrive/issues">https://github.com/tidyverse/googledrive/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.0.0), gargle (&ge; 1.5.0), glue (&ge; 1.4.2), httr,
jsonlite, lifecycle, magrittr, pillar (&ge; 1.9.0), purrr (&ge;
1.0.1), rlang (&ge; 1.0.2), tibble (&ge; 2.0.0), utils, uuid, vctrs
(&ge; 0.3.0), withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, dplyr (&ge; 1.0.0), knitr, mockr, rmarkdown, spelling,
testthat (&ge; 3.1.3)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>tidyverse, tidyverse/tidytemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-11 05:34:24 UTC; jenny</td>
</tr>
<tr>
<td>Author:</td>
<td>Lucy D'Agostino McGowan [aut],
  Jennifer Bryan <a href="https://orcid.org/0000-0002-6983-2759"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Posit Software, PBC [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jennifer Bryan &lt;jenny@posit.co&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-11 19:30:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='as_dribble'>Coerce to a <code>dribble</code></h2><span id='topic+as_dribble'></span>

<h3>Description</h3>

<p>Converts various representations of Google Drive files into a <code><a href="#topic+dribble">dribble</a></code>,
the object used by googledrive to hold Drive file metadata. Files can be
specified via:
</p>

<ul>
<li><p> File path. File name is an important special case.
</p>
</li>
<li><p> File id. Mark with <code><a href="#topic+as_id">as_id()</a></code> to distinguish from file path.
</p>
</li>
<li><p> Data frame or <code><a href="#topic+dribble">dribble</a></code>. Once you've successfully used googledrive to
identify the files of interest, you'll have a <code><a href="#topic+dribble">dribble</a></code>. Pass it into
downstream functions.
</p>
</li>
<li><p> List representing <a href="https://developers.google.com/drive/api/v3/reference/files">Files resource</a>
objects. Mostly for internal use.
</p>
</li></ul>

<p>This is a generic function.
</p>
<p>For maximum clarity, get your files into a <code><a href="#topic+dribble">dribble</a></code> (or capture file id)
as early as possible. When specifying via path, it's best to include the
trailing slash when you're targeting a folder. If you want the folder <code>foo</code>,
say <code style="white-space: pre;">&#8288;foo/&#8288;</code>, not <code>foo</code>.
</p>
<p>Some functions, such as <code><a href="#topic+drive_cp">drive_cp()</a></code>, <code><a href="#topic+drive_mkdir">drive_mkdir()</a></code>, <code><a href="#topic+drive_mv">drive_mv()</a></code>, and
<code><a href="#topic+drive_upload">drive_upload()</a></code>, can accept the new file or folder name as the last part of
<code>path</code>, when <code>name</code> is not given. But if you say <code>a/b/c</code> (no trailing slash)
and a folder <code style="white-space: pre;">&#8288;a/b/c/&#8288;</code> already exists, it's unclear what you want. A file
named <code>c</code> in <code style="white-space: pre;">&#8288;a/b/&#8288;</code> or a file with default name in <code style="white-space: pre;">&#8288;a/b/c/&#8288;</code>? You get an
error and must make your intent clear.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_dribble(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_dribble_+3A_x">x</code></td>
<td>
<p>A vector of Drive file paths, a vector of file ids marked
with <code><a href="#topic+as_id">as_id()</a></code>, a list of Files Resource objects, or a suitable data
frame.</p>
</td></tr>
<tr><td><code id="as_dribble_+3A_...">...</code></td>
<td>
<p>Other arguments passed down to methods. (Not used.)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# create some files for us to re-discover by name or filepath
alfa &lt;- drive_create("alfa", type = "folder")
bravo &lt;- drive_create("bravo", path = alfa)

# as_dribble() can work with file names or paths
as_dribble("alfa")
as_dribble("bravo")
as_dribble("alfa/bravo")
as_dribble(c("alfa", "alfa/bravo"))

# specify the file id (substitute a real file id of your own!)
# as_dribble(as_id("0B0Gh-SuuA2nTOGZVTXZTREgwZ2M"))

# Clean up
drive_find("alfa") %&gt;% drive_rm()

</code></pre>

<hr>
<h2 id='as_shared_drive'>Coerce to shared drive</h2><span id='topic+as_shared_drive'></span>

<h3>Description</h3>

<p>Converts various representations of a shared drive into a
<code><a href="#topic+dribble">dribble</a></code>, the object used by googledrive to hold Drive file metadata.
Shared drives can be specified via
</p>

<ul>
<li><p> Name
</p>
</li>
<li><p> Shared drive id, marked with <code><a href="#topic+as_id">as_id()</a></code> to distinguish from name
</p>
</li>
<li><p> Data frame or <code><a href="#topic+dribble">dribble</a></code> consisting solely of shared drives
</p>
</li>
<li><p> List representing <a href="https://developers.google.com/drive/api/v3/reference/drives#resource-representations">Drives resource</a>
objects (mostly for internal use)
</p>
</li></ul>

<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>
<p>This is a generic function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_shared_drive(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_shared_drive_+3A_x">x</code></td>
<td>
<p>A vector of shared drive names, a vector of shared drive ids marked
with <code><a href="#topic+as_id">as_id()</a></code>, a list of Drives resource objects, or a suitable data
frame.</p>
</td></tr>
<tr><td><code id="as_shared_drive_+3A_...">...</code></td>
<td>
<p>Other arguments passed down to methods. (Not used.)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# specify the name
as_shared_drive("abc")

# specify the id (substitute one of your own!)
as_shared_drive(as_id("0AOPK1X2jaNckUk9PVA"))

## End(Not run)
</code></pre>

<hr>
<h2 id='deprecated-team-drive-functions'>Deprecated Team Drive functions</h2><span id='topic+deprecated-team-drive-functions'></span><span id='topic+team_drive_find'></span><span id='topic+team_drive_get'></span><span id='topic+team_drive_create'></span><span id='topic+team_drive_rm'></span><span id='topic+team_drive_update'></span><span id='topic+as_team_drive'></span><span id='topic+is_team_drive'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>Team Drives have been rebranded as <em>shared drives</em> and, as of googledrive
v2.0.0, all <code style="white-space: pre;">&#8288;team_drive_*()&#8288;</code> functions have been deprecated, in favor of
<code style="white-space: pre;">&#8288;shared_drive_*()&#8288;</code> successors.
</p>
<p>The changes in googledrive reflect that the Team Drives resource collection
has been deprecated in the Drive API v3, in favor of the new (shared) Drives
resource collection. Read more
</p>

<ul>
<li> <p><a href="https://cloud.google.com/blog/products/application-development/upcoming-changes-to-the-google-drive-api-and-google-picker-api">https://cloud.google.com/blog/products/application-development/upcoming-changes-to-the-google-drive-api-and-google-picker-api</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>team_drive_find(pattern = NULL, n_max = Inf, ..., verbose = deprecated())

team_drive_get(name = NULL, id = NULL, verbose = deprecated())

team_drive_create(name, verbose = deprecated())

team_drive_rm(team_drive = NULL, verbose = deprecated())

team_drive_update(team_drive, ..., verbose = deprecated())

as_team_drive(x, ...)

is_team_drive(d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deprecated-team-drive-functions_+3A_pattern">pattern</code></td>
<td>
<p>Character. If provided, only the items whose names match this
regular expression are returned. This is implemented locally on the results
returned by the API.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_n_max">n_max</code></td>
<td>
<p>Integer. An upper bound on the number of items to return. This
applies to the results requested from the API, which may be further
filtered locally, via the <code>pattern</code> argument.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_...">...</code></td>
<td>
<p>Other parameters to pass along in the request, such as <code>pageSize</code>
or <code>useDomainAdminAccess</code>.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_name">name</code></td>
<td>
<p>Character vector of names. A character vector marked with
<code><a href="#topic+as_id">as_id()</a></code> is treated as if it was provided via the <code>id</code> argument.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_id">id</code></td>
<td>
<p>Character vector of shared drive ids or URLs (it is first processed
with <code><a href="#topic+as_id">as_id()</a></code>). If both <code>name</code> and <code>id</code> are non-<code>NULL</code>, <code>id</code> is silently
ignored.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_team_drive">team_drive</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Google Drive and the
Drive API have replaced Team Drives with shared drives.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_x">x</code></td>
<td>
<p>A vector of shared drive names, a vector of shared drive ids marked
with <code><a href="#topic+as_id">as_id()</a></code>, a list of Drives resource objects, or a suitable data
frame.</p>
</td></tr>
<tr><td><code id="deprecated-team-drive-functions_+3A_d">d</code></td>
<td>
<p>A <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per shared drive.
</p>

<hr>
<h2 id='dribble'>dribble object</h2><span id='topic+dribble'></span>

<h3>Description</h3>

<p>googledrive stores the metadata for one or more Drive files or
shared drives as a <code>dribble</code>. It is a &quot;Drive
<a href="tibble.html#topic+tibble-package">tibble</a>&quot; with one row per file or shared drive
and, at a minimum, these columns:
</p>

<ul>
<li> <p><code>name</code>: a character column containing file or shared drive names
</p>
</li>
<li> <p><code>id</code>: a character column of file or shared drive ids
</p>
</li>
<li> <p><code>drive_resource</code>: a list-column, each element of which is either a
<a href="https://developers.google.com/drive/api/v3/reference/files#resource-representations">Files resource</a>
or a <a href="https://developers.google.com/drive/api/v3/reference/drives#resource-representations">Drives resource</a>
object. Note there is no guarantee that all documented fields are always
present. We do check if the <code>kind</code> field is present and equal to one of
<code>drive#file</code> or <code>drive#drive</code>.
</p>
</li></ul>

<p>The <code>dribble</code> format is handy because it exposes the file name,
which is good for humans, but keeps it bundled with the file's unique id
and other metadata, which are needed for API calls.
</p>
<p>In general, the <code>dribble</code> class will be retained even after
manipulation, as long as the required variables are present and of the
correct type. This works best for manipulations via the dplyr and vctrs
packages.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as_dribble">as_dribble()</a></code>
</p>

<hr>
<h2 id='dribble-checks'>Check facts about a dribble</h2><span id='topic+dribble-checks'></span><span id='topic+is_dribble'></span><span id='topic+no_file'></span><span id='topic+single_file'></span><span id='topic+some_files'></span><span id='topic+confirm_dribble'></span><span id='topic+confirm_single_file'></span><span id='topic+confirm_some_files'></span><span id='topic+is_folder'></span><span id='topic+is_shortcut'></span><span id='topic+is_folder_shortcut'></span><span id='topic+is_native'></span><span id='topic+is_parental'></span><span id='topic+is_mine'></span><span id='topic+is_shared_drive'></span>

<h3>Description</h3>

<p>Sometimes you need to check things about a <code><a href="#topic+dribble">dribble</a></code>' or about the files it
represents, such as:
</p>

<ul>
<li><p> Is it even a dribble?
</p>
</li>
<li><p> Size: Does the dribble hold exactly one file? At least one file? No file?
</p>
</li>
<li><p> File type: Is this file a folder?
</p>
</li>
<li><p> File ownership and access: Is it mine? Published? Shared?
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>is_dribble(d)

no_file(d)

single_file(d)

some_files(d)

confirm_dribble(d)

confirm_single_file(d)

confirm_some_files(d)

is_folder(d)

is_shortcut(d)

is_folder_shortcut(d)

is_native(d)

is_parental(d)

is_mine(d)

is_shared_drive(d)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dribble-checks_+3A_d">d</code></td>
<td>
<p>A <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## most of us have multiple files or folders on Google Drive
d &lt;- drive_find()
is_dribble(d)
no_file(d)
single_file(d)
some_files(d)

# this will error
# confirm_single_file(d)

confirm_some_files(d)
is_folder(d)
is_mine(d)

</code></pre>

<hr>
<h2 id='drive_about'>Get info on Drive capabilities</h2><span id='topic+drive_about'></span>

<h3>Description</h3>

<p>Gets information about the user, the user's Drive, and system capabilities.
This function mostly exists to power <code><a href="#topic+drive_user">drive_user()</a></code>, which extracts the most
useful information (the information on current user) and prints it nicely.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_about()
</code></pre>


<h3>Value</h3>

<p>A list representation of a Drive
<a href="https://developers.google.com/drive/api/v3/reference/about">about resource</a>
</p>


<h3>See Also</h3>

<p>Wraps the <code>about.get</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/about/get">https://developers.google.com/drive/api/v3/reference/about/get</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
drive_about()

# explore the export formats available for Drive files, by MIME type
about &lt;- drive_about()
about[["exportFormats"]] %&gt;%
  purrr::map(unlist)

</code></pre>

<hr>
<h2 id='drive_auth'>Authorize googledrive</h2><span id='topic+drive_auth'></span>

<h3>Description</h3>

<p>Authorize googledrive to view and manage your Drive files. This function is a
wrapper around <code><a href="gargle.html#topic+token_fetch">gargle::token_fetch()</a></code>.
</p>
<p>By default, you are directed to a web browser, asked to sign in to your
Google account, and to grant googledrive permission to operate on your
behalf with Google Drive. By default, with your permission, these user
credentials are cached in a folder below your home directory, from where
they can be automatically refreshed, as necessary. Storage at the user
level means the same token can be used across multiple projects and
tokens are less likely to be synced to the cloud by accident.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_auth(
  email = gargle::gargle_oauth_email(),
  path = NULL,
  subject = NULL,
  scopes = "drive",
  cache = gargle::gargle_oauth_cache(),
  use_oob = gargle::gargle_oob_default(),
  token = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_auth_+3A_email">email</code></td>
<td>
<p>Optional. If specified, <code>email</code> can take several different
forms:
</p>

<ul>
<li> <p><code>"jane@gmail.com"</code>, i.e. an actual email address. This allows the user to
target a specific Google identity. If specified, this is used for token
lookup, i.e. to determine if a suitable token is already available in the
cache. If no such token is found, <code>email</code> is used to pre-select the targeted
Google identity in the OAuth chooser. (Note, however, that the email
associated with a token when it's cached is always determined from the token
itself, never from this argument).
</p>
</li>
<li> <p><code>"*@example.com"</code>, i.e. a domain-only glob pattern. This can be helpful if
you need code that &quot;just works&quot; for both <code>alice@example.com</code> and
<code>bob@example.com</code>.
</p>
</li>
<li> <p><code>TRUE</code> means that you are approving email auto-discovery. If exactly one
matching token is found in the cache, it will be used.
</p>
</li>
<li> <p><code>FALSE</code> or <code>NA</code> mean that you want to ignore the token cache and force a
new OAuth dance in the browser.
</p>
</li></ul>

<p>Defaults to the option named <code>"gargle_oauth_email"</code>, retrieved by
<code><a href="gargle.html#topic+gargle_oauth_email">gargle_oauth_email()</a></code> (unless a wrapper package implements different
default behavior).</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_path">path</code></td>
<td>
<p>JSON identifying the service account, in one of the forms
supported for the <code>txt</code> argument of <code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> (typically, a
file path or JSON string).</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_subject">subject</code></td>
<td>
<p>An optional subject claim. Specify this if you wish to use the
service account represented by <code>path</code> to impersonate the <code>subject</code>, who is
a normal user. Before this can work, an administrator must grant the service
account domain-wide authority. Identify the user to impersonate via their
email, e.g. <code>subject = "user@example.com"</code>. Note that gargle automatically
adds the non-sensitive <code>"https://www.googleapis.com/auth/userinfo.email"</code>
scope, so this scope must be enabled for the service account, along with
any other <code>scopes</code> being requested.</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_scopes">scopes</code></td>
<td>
<p>One or more API scopes. Each scope can be specified in full or,
for Drive API-specific scopes, in an abbreviated form that is recognized by
<code><a href="#topic+drive_scopes">drive_scopes()</a></code>:
</p>

<ul>
<li><p> &quot;drive&quot; = &quot;https://www.googleapis.com/auth/drive&quot; (the default)
</p>
</li>
<li><p> &quot;full&quot; = &quot;https://www.googleapis.com/auth/drive&quot; (same as &quot;drive&quot;)
</p>
</li>
<li><p> &quot;drive.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.readonly&quot;
</p>
</li>
<li><p> &quot;drive.file&quot; = &quot;https://www.googleapis.com/auth/drive.file&quot;
</p>
</li>
<li><p> &quot;drive.appdata&quot; = &quot;https://www.googleapis.com/auth/drive.appdata&quot;
</p>
</li>
<li><p> &quot;drive.metadata&quot; = &quot;https://www.googleapis.com/auth/drive.metadata&quot;
</p>
</li>
<li><p> &quot;drive.metadata.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.metadata.readonly&quot;
</p>
</li>
<li><p> &quot;drive.photos.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.photos.readonly&quot;
</p>
</li>
<li><p> &quot;drive.scripts&quot; = &quot;https://www.googleapis.com/auth/drive.scripts
</p>
</li></ul>

<p>See <a href="https://developers.google.com/drive/api/guides/api-specific-auth">https://developers.google.com/drive/api/guides/api-specific-auth</a> for
details on the permissions for each scope.</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_cache">cache</code></td>
<td>
<p>Specifies the OAuth token cache. Defaults to the option named
<code>"gargle_oauth_cache"</code>, retrieved via <code><a href="gargle.html#topic+gargle_oauth_cache">gargle_oauth_cache()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_use_oob">use_oob</code></td>
<td>
<p>Whether to use out-of-band authentication (or, perhaps, a
variant implemented by gargle and known as &quot;pseudo-OOB&quot;) when first
acquiring the token. Defaults to the value returned by
<code><a href="gargle.html#topic+gargle_oob_default">gargle_oob_default()</a></code>. Note that (pseudo-)OOB auth only affects
the initial OAuth dance. If we retrieve (and possibly refresh) a
cached token, <code>use_oob</code> has no effect.
</p>
<p>If the OAuth client is provided implicitly by a wrapper package, its type
probably defaults to the value returned by
<code><a href="gargle.html#topic+gargle_oauth_client_type">gargle_oauth_client_type()</a></code>. You can take control of the client
type by setting <code>options(gargle_oauth_client_type = "web")</code> or
<code>options(gargle_oauth_client_type = "installed")</code>.</p>
</td></tr>
<tr><td><code id="drive_auth_+3A_token">token</code></td>
<td>
<p>A token with class <a href="httr.html#topic+Token-class">Token2.0</a> or an object of
httr's class <code>request</code>, i.e. a token that has been prepared with
<code><a href="httr.html#topic+config">httr::config()</a></code> and has a <a href="httr.html#topic+Token-class">Token2.0</a> in the
<code>auth_token</code> component.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most users, most of the time, do not need to call <code>drive_auth()</code>
explicitly &ndash; it is triggered by the first action that requires
authorization. Even when called, the default arguments often suffice.
</p>
<p>However, when necessary, <code>drive_auth()</code> allows the user to explicitly:
</p>

<ul>
<li><p> Declare which Google identity to use, via an <code>email</code> specification.
</p>
</li>
<li><p> Use a service account token or workload identity federation via
<code>path</code>.
</p>
</li>
<li><p> Bring your own <code>token</code>.
</p>
</li>
<li><p> Customize <code>scopes</code>.
</p>
</li>
<li><p> Use a non-default <code>cache</code> folder or turn caching off.
</p>
</li>
<li><p> Explicitly request out-of-bound (OOB) auth via <code>use_oob</code>.
</p>
</li></ul>

<p>If you are interacting with R within a browser (applies to RStudio
Server, Posit Workbench, Posit Cloud, and Google Colaboratory), you need
OOB auth or the pseudo-OOB variant. If this does not happen
automatically, you can request it explicitly with <code>use_oob = TRUE</code> or,
more persistently, by setting an option via
<code>options(gargle_oob_default = TRUE)</code>.
</p>
<p>The choice between conventional OOB or pseudo-OOB auth is determined
by the type of OAuth client. If the client is of the &quot;installed&quot; type,
<code>use_oob = TRUE</code> results in conventional OOB auth. If the client is of
the &quot;web&quot; type, <code>use_oob = TRUE</code> results in pseudo-OOB auth. Packages
that provide a built-in OAuth client can usually detect which type of
client to use. But if you need to set this explicitly, use the
<code>"gargle_oauth_client_type"</code> option:
</p>
<div class="sourceCode r"><pre>options(gargle_oauth_client_type = "web")       # pseudo-OOB
# or, alternatively
options(gargle_oauth_client_type = "installed") # conventional OOB
</pre></div>
<p>For details on the many ways to find a token, see
<code><a href="gargle.html#topic+token_fetch">gargle::token_fetch()</a></code>. For deeper control over auth, use
<code><a href="#topic+drive_auth_configure">drive_auth_configure()</a></code> to bring your own OAuth client or API key.
To learn more about gargle options, see <a href="gargle.html#topic+gargle_options">gargle::gargle_options</a>.
</p>


<h3>See Also</h3>

<p>Other auth functions: 
<code><a href="#topic+drive_auth_configure">drive_auth_configure</a>()</code>,
<code><a href="#topic+drive_deauth">drive_deauth</a>()</code>,
<code><a href="#topic+drive_scopes">drive_scopes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# load/refresh existing credentials, if available
# otherwise, go to browser for authentication and authorization
drive_auth()

# see user associated with current token
drive_user()

# force use of a token associated with a specific email
drive_auth(email = "jenny@example.com")
drive_user()

# force the OAuth web dance
drive_auth(email = NA)

# use a 'read only' scope, so it's impossible to edit or delete files
drive_auth(scopes = "drive.readonly")

# use a service account token
drive_auth(path = "foofy-83ee9e7c9c48.json")

</code></pre>

<hr>
<h2 id='drive_auth_configure'>Edit and view auth configuration</h2><span id='topic+drive_auth_configure'></span><span id='topic+drive_api_key'></span><span id='topic+drive_oauth_client'></span>

<h3>Description</h3>

<p>These functions give more control over and visibility into the auth
configuration than <code><a href="#topic+drive_auth">drive_auth()</a></code> does. <code>drive_auth_configure()</code>
lets the user specify their own:
</p>

<ul>
<li><p> OAuth client, which is used when obtaining a user token.
</p>
</li>
<li><p> API key. If googledrive is de-authorized via <code><a href="#topic+drive_deauth">drive_deauth()</a></code>, all
requests are sent with an API key in lieu of a token.
</p>
</li></ul>

<p>See the <code>vignette("get-api-credentials", package = "gargle")</code>
for more.
If the user does not configure these settings, internal defaults
are used.
</p>
<p><code>drive_oauth_client()</code> and <code>drive_api_key()</code> retrieve the
currently configured OAuth client and API key, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_auth_configure(client, path, api_key, app = deprecated())

drive_api_key()

drive_oauth_client()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_auth_configure_+3A_client">client</code></td>
<td>
<p>A Google OAuth client, presumably constructed via
<code><a href="gargle.html#topic+gargle_oauth_client_from_json">gargle::gargle_oauth_client_from_json()</a></code>. Note, however, that it is
preferred to specify the client with JSON, using the <code>path</code> argument.</p>
</td></tr>
<tr><td><code id="drive_auth_configure_+3A_path">path</code></td>
<td>
<p>JSON downloaded from <a href="https://console.cloud.google.com">Google Cloud Console</a>, containing a client id and
secret, in one of the forms supported for the <code>txt</code> argument of
<code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> (typically, a file path or JSON string).</p>
</td></tr>
<tr><td><code id="drive_auth_configure_+3A_api_key">api_key</code></td>
<td>
<p>API key.</p>
</td></tr>
<tr><td><code id="drive_auth_configure_+3A_app">app</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Replaced by the <code>client</code>
argument.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>drive_auth_configure()</code>: An object of R6 class
<a href="gargle.html#topic+AuthState-class">gargle::AuthState</a>, invisibly.
</p>
</li>
<li> <p><code>drive_oauth_client()</code>: the current user-configured OAuth client.
</p>
</li>
<li> <p><code>drive_api_key()</code>: the current user-configured API key.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other auth functions: 
<code><a href="#topic+drive_auth">drive_auth</a>()</code>,
<code><a href="#topic+drive_deauth">drive_deauth</a>()</code>,
<code><a href="#topic+drive_scopes">drive_scopes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see and store the current user-configured OAuth client (probaby `NULL`)
(original_client &lt;- drive_oauth_client())

# see and store the current user-configured API key (probaby `NULL`)
(original_api_key &lt;- drive_api_key())

# the preferred way to configure your own client is via a JSON file
# downloaded from Google Developers Console
# this example JSON is indicative, but fake
path_to_json &lt;- system.file(
  "extdata", "client_secret_installed.googleusercontent.com.json",
  package = "gargle"
)
drive_auth_configure(path = path_to_json)

# this is also obviously a fake API key
drive_auth_configure(api_key = "the_key_I_got_for_a_google_API")

# confirm the changes
drive_oauth_client()
drive_api_key()

# restore original auth config
drive_auth_configure(client = original_client, api_key = original_api_key)
</code></pre>

<hr>
<h2 id='drive_browse'>Visit Drive file in browser</h2><span id='topic+drive_browse'></span>

<h3>Description</h3>

<p>Visits a file on Google Drive in your default browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_browse(file = .Last.value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_browse_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of file hyperlinks, from <code><a href="#topic+drive_link">drive_link()</a></code>, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
drive_find(n_max = 1) %&gt;% drive_browse()

</code></pre>

<hr>
<h2 id='drive_cp'>Copy a Drive file</h2><span id='topic+drive_cp'></span>

<h3>Description</h3>

<p>Copies an existing Drive file into a new file id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_cp(
  file,
  path = NULL,
  name = NULL,
  ...,
  overwrite = NA,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_cp_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_cp_+3A_path">path</code></td>
<td>
<p>Specifies target destination for the new file on Google
Drive. Can be an actual path (character), a file id marked with
<code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.
</p>
<p>If <code>path</code> is a shortcut to a folder, it is automatically resolved to its
target folder.
</p>
<p>If <code>path</code> is given as a path (as opposed to a <code>dribble</code> or an id), it is
best to explicitly indicate if it's a folder by including a trailing
slash, since it cannot always be worked out from the context of the call.
By default, the new file has the same parent folder as the
source file.</p>
</td></tr>
<tr><td><code id="drive_cp_+3A_name">name</code></td>
<td>
<p>Character, new file name if not specified as part of
<code>path</code>. This will force <code>path</code> to be interpreted as a folder, even if it
is character and lacks a trailing slash. Defaults to &quot;Copy of <code>FILE-NAME</code>&quot;.</p>
</td></tr>
<tr><td><code id="drive_cp_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_cp_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_cp_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.copy</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/copy">https://developers.google.com/drive/api/v3/reference/files/copy</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Target one of the official example files
(src_file &lt;- drive_example_remote("chicken.txt"))

# Make a "Copy of" copy in your My Drive
cp1 &lt;- drive_cp(src_file)

# Make an explicitly named copy, in a different folder, and star it.
# The starring is an example of providing metadata via `...`.
# `starred` is not an actual argument to `drive_cp()`,
# it just gets passed through to the API.
folder &lt;- drive_mkdir("drive-cp-folder")
cp2 &lt;- drive_cp(
  src_file,
  path = folder,
  name = "chicken-cp.txt",
  starred = TRUE
)
drive_reveal(cp2, "starred")

# `overwrite = FALSE` errors if file already exists at target filepath
# THIS WILL ERROR!
# drive_cp(src_file, name = "Copy of chicken.txt", overwrite = FALSE)

# `overwrite = TRUE` moves an existing file to trash, then proceeds
cp3 &lt;- drive_cp(src_file, name = "Copy of chicken.txt", overwrite = TRUE)

# Delete all of our copies and the new folder!
drive_rm(cp1, cp2, cp3, folder)

# Target an official example file that's a csv file
(csv_file &lt;- drive_example_remote("chicken.csv"))

# copy AND AT THE SAME TIME convert it to a Google Sheet
chicken_sheet &lt;- drive_cp(
  csv_file,
  name = "chicken-sheet-copy",
  mime_type = drive_mime_type("spreadsheet")
)
# is it really a Google Sheet?
drive_reveal(chicken_sheet, "mime_type")$mime_type

# go see the new Sheet in the browser
# drive_browse(chicken_sheet)

# Clean up
drive_rm(chicken_sheet)

</code></pre>

<hr>
<h2 id='drive_create'>Create a new blank Drive file</h2><span id='topic+drive_create'></span>

<h3>Description</h3>

<p>Creates a new blank Drive file. Note there are better options for these
special cases:
</p>

<ul>
<li><p> Creating a folder? Use <code><a href="#topic+drive_mkdir">drive_mkdir()</a></code>.
</p>
</li>
<li><p> Want to upload existing local content into a new Drive file? Use
<code><a href="#topic+drive_upload">drive_upload()</a></code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>drive_create(
  name,
  path = NULL,
  type = NULL,
  ...,
  overwrite = NA,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_create_+3A_name">name</code></td>
<td>
<p>Name for the new file or, optionally, a path that specifies
an existing parent folder, as well as the new file name.</p>
</td></tr>
<tr><td><code id="drive_create_+3A_path">path</code></td>
<td>
<p>Target destination for the new item, i.e. a folder or a
shared drive. Can be given as an actual path (character), a file id or URL
marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. Defaults to your &quot;My Drive&quot; root
folder. If <code>path</code> is a shortcut to a folder, it is automatically resolved
to its target folder.</p>
</td></tr>
<tr><td><code id="drive_create_+3A_type">type</code></td>
<td>
<p>Character. Create a blank Google Doc, Sheet or Slides by
setting <code>type</code> to <code>document</code>, <code>spreadsheet</code>, or <code>presentation</code>,
respectively. All non-<code>NULL</code> values for <code>type</code> are pre-processed with
<code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_create_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_create_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_create_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.create</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/create">https://developers.google.com/drive/api/v3/reference/files/create</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create a blank Google Doc named 'WordStar' in
# your 'My Drive' root folder and star it
wordstar &lt;- drive_create("WordStar", type = "document", starred = TRUE)

# is 'WordStar' really starred? YES
purrr::pluck(wordstar, "drive_resource", 1, "starred")

# Create a blank Google Slides presentation in
# the root folder, and set its description
execuvision &lt;- drive_create(
  "ExecuVision",
  type = "presentation",
  description = "deeply nested bullet lists FTW"
)

# Did we really set the description? YES
purrr::pluck(execuvision, "drive_resource", 1, "description")

# check out the new presentation
drive_browse(execuvision)

# Create folder 'b4xl' in the root folder,
# then create an empty new Google Sheet in it
b4xl &lt;- drive_mkdir("b4xl")
drive_create("VisiCalc", path = b4xl, type = "spreadsheet")

# Another way to create a Google Sheet in the folder 'b4xl'
drive_create("b4xl/SuperCalc", type = "spreadsheet")

# Yet another way to create a new file in a folder,
# this time specifying parent `path` as a character
drive_create("Lotus 1-2-3", path = "b4xl", type = "spreadsheet")

# Did we really create those Sheets in the intended folder? YES
drive_ls("b4xl")

# `overwrite = FALSE` errors if file already exists at target filepath
# THIS WILL ERROR!
drive_create("VisiCalc", path = b4xl, overwrite = FALSE)

# `overwrite = TRUE` moves an existing file to trash, then proceeds
drive_create("VisiCalc", path = b4xl, overwrite = TRUE)

# Clean up
drive_rm(wordstar, b4xl, execuvision)

</code></pre>

<hr>
<h2 id='drive_deauth'>Suspend authorization</h2><span id='topic+drive_deauth'></span>

<h3>Description</h3>

<p>Put googledrive into a de-authorized state. Instead of sending a token,
googledrive will send an API key. This can be used to access public
resources for which no Google sign-in is required. This is handy for using
googledrive in a non-interactive setting to make requests that do not
require a token. It will prevent the attempt to obtain a token
interactively in the browser. The user can configure their own API key
via <code><a href="#topic+drive_auth_configure">drive_auth_configure()</a></code> and retrieve that key via
<code><a href="#topic+drive_api_key">drive_api_key()</a></code>.
In the absence of a user-configured key, a built-in default key is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_deauth()
</code></pre>


<h3>See Also</h3>

<p>Other auth functions: 
<code><a href="#topic+drive_auth_configure">drive_auth_configure</a>()</code>,
<code><a href="#topic+drive_auth">drive_auth</a>()</code>,
<code><a href="#topic+drive_scopes">drive_scopes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
drive_deauth()
drive_user()

# in a deauth'ed state, we can still get metadata on a world-readable file
public_file &lt;- drive_example_remote("chicken.csv")
public_file
# we can still download it too
drive_download(public_file)

</code></pre>

<hr>
<h2 id='drive_download'>Download a Drive file</h2><span id='topic+drive_download'></span>

<h3>Description</h3>

<p>This function downloads a file from Google Drive. Native Google
file types, such as Google Docs, Google Sheets, and Google Slides, must be
exported to a conventional local file type. This can be specified:
</p>

<ul>
<li><p> explicitly via <code>type</code>
</p>
</li>
<li><p> implicitly via the file extension of <code>path</code>
</p>
</li>
<li><p> not at all, i.e. rely on the built-in default
</p>
</li></ul>

<p>To see what export file types are even possible, see the <a href="https://developers.google.com/drive/api/v3/ref-export-formats">Drive API documentation</a>
or the result of <code>drive_about()$exportFormats</code>. The returned dribble
includes a <code>local_path</code> column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_download(
  file,
  path = NULL,
  type = NULL,
  overwrite = FALSE,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_download_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_download_+3A_path">path</code></td>
<td>
<p>Character. Path for output file. If absent, the default file name
is the file's name on Google Drive and the default location is working
directory, possibly with an added file extension.</p>
</td></tr>
<tr><td><code id="drive_download_+3A_type">type</code></td>
<td>
<p>Character. Only consulted if <code>file</code> is a native Google file.
Specifies the desired type of the exported file. Will be processed via
<code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>, so either a file extension like <code>"pdf"</code> or a full MIME
type like <code>"application/pdf"</code> is acceptable.</p>
</td></tr>
<tr><td><code id="drive_download_+3A_overwrite">overwrite</code></td>
<td>
<p>A logical scalar. If local <code>path</code> already exists, do you
want to overwrite it?</p>
</td></tr>
<tr><td><code id="drive_download_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/drive/api/v3/manage-downloads">Download files</a>, in the
Drive API documentation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Target one of the official example files
(src_file &lt;- drive_example_remote("chicken_sheet"))

# Download Sheet as csv, explicit type
downloaded_file &lt;- drive_download(src_file, type = "csv")

# See local path to new file
downloaded_file$local_path

# Download as csv, type implicit in file extension
drive_download(src_file, path = "my_csv_file.csv")

# Download with default name and type (xlsx)
drive_download(src_file)

# Clean up
unlink(c("chicken_sheet.csv", "chicken_sheet.xlsx", "my_csv_file.csv"))

</code></pre>

<hr>
<h2 id='drive_empty_trash'>Empty Drive Trash</h2><span id='topic+drive_empty_trash'></span>

<h3>Description</h3>

<p>Caution, this will permanently delete files in your Drive trash.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_empty_trash(verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_empty_trash_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>

<hr>
<h2 id='drive_endpoints'>List Drive endpoints</h2><span id='topic+drive_endpoints'></span><span id='topic+drive_endpoint'></span>

<h3>Description</h3>

<p>The googledrive package stores a named list of Drive API v3 endpoints (or
&quot;methods&quot;, using Google's vocabulary) internally and these functions expose
this data.
</p>

<ul>
<li> <p><code>drive_endpoint()</code> returns one endpoint, i.e. it uses <code>[[</code>.
</p>
</li>
<li> <p><code>drive_endpoints()</code> returns a list of endpoints, i.e. it uses <code>[</code>.
</p>
</li></ul>

<p>The names of this list (or the <code>id</code> sub-elements) are the nicknames that can
be used to specify an endpoint in <code><a href="#topic+request_generate">request_generate()</a></code>. For each endpoint, we
store its nickname or <code>id</code>, the associated HTTP verb, the <code>path</code>, and details
about the parameters. This list is derived programmatically from the Drive
API v3 Discovery Document
(<code style="white-space: pre;">&#8288;https://www.googleapis.com/discovery/v1/apis/drive/v3/rest&#8288;</code>) using the
approach described in the <a href="https://gargle.r-lib.org/articles/request-helper-functions.html#discovery-documents">Discovery Documents section</a>
of the gargle vignette <a href="https://gargle.r-lib.org/articles/request-helper-functions.html">Request helper functions</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_endpoints(i = NULL)

drive_endpoint(i)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_endpoints_+3A_i">i</code></td>
<td>
<p>The name(s) or integer index(ices) of the endpoints to return. <code>i</code>
is optional for <code>drive_endpoints()</code> and, if not given, the entire list is
returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>One or more of the Drive API v3 endpoints that are used internally by
googledrive.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>str(head(drive_endpoints(), 3), max.level = 2)
drive_endpoint("drive.files.delete")
drive_endpoint(4)
</code></pre>

<hr>
<h2 id='drive_examples'>Example files</h2><span id='topic+drive_examples'></span><span id='topic+drive_examples_local'></span><span id='topic+drive_examples_remote'></span><span id='topic+drive_example_local'></span><span id='topic+drive_example_remote'></span>

<h3>Description</h3>

<p>googledrive makes a variety of example files &ndash; both local and remote &ndash;
available for use in examples and reprexes. These functions help you access
the example files. See <code>vignette("example-files", package = "googledrive")</code>
for more.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_examples_local(matches)

drive_examples_remote(matches)

drive_example_local(matches)

drive_example_remote(matches)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_examples_+3A_matches">matches</code></td>
<td>
<p>A regular expression that matches the name of the desired
example file(s). This argument is optional for the plural forms
(<code>drive_examples_local()</code> and <code>drive_examples_remote()</code>) and, if provided,
multiple matches are allowed. The single forms (<code>drive_example_local()</code> and
<code>drive_example_remote()</code>) require this argument and require that there is
exactly one match.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li><p> For <code>drive_example_local()</code> and <code>drive_examples_local()</code>, one or more local
filepaths.
</p>
</li>
<li><p> For <code>drive_example_remote()</code> and <code>drive_examples_remote()</code>, a <code>dribble</code>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>drive_examples_local() %&gt;% basename()
drive_examples_local("chicken") %&gt;% basename()
drive_example_local("imdb")


drive_examples_remote()
drive_examples_remote("chicken")
drive_example_remote("chicken_doc")

</code></pre>

<hr>
<h2 id='drive_extension'>Lookup extension from MIME type</h2><span id='topic+drive_extension'></span>

<h3>Description</h3>

<p>This is a helper to determinine which extension should be used
for a file. Two types of input are acceptable:
</p>

<ul>
<li><p> MIME types accepted by Google Drive.
</p>
</li>
<li><p> File extensions, such as &quot;pdf&quot;, &quot;csv&quot;, etc. (these are simply passed through).
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>drive_extension(type = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_extension_+3A_type">type</code></td>
<td>
<p>Character. MIME type or file extension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. File extension.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## get the extension for mime type image/jpeg
drive_extension("image/jpeg")

## it's vectorized
drive_extension(c("text/plain", "pdf", "image/gif"))
</code></pre>

<hr>
<h2 id='drive_fields'>Request partial resources</h2><span id='topic+drive_fields'></span><span id='topic+prep_fields'></span>

<h3>Description</h3>

<p>You may be able to improve the performance of your API calls by
requesting only the metadata that you actually need. This function is
primarily for internal use and is currently focused on the <a href="https://developers.google.com/drive/api/v3/reference/files">Files resource</a>. Note
that high-level googledrive functions assume that the <code>name</code>, <code>id</code>, and
<code>kind</code> fields are included, at a bare minimum. Assuming that <code>resource = "files"</code> (the default), input provided via <code>fields</code> is checked for validity
against the known field names and the validated fields are returned. To see
a tibble containing all possible fields and a short description of each,
call <code>drive_fields(expose())</code>.
</p>
<p><code>prep_fields()</code> prepares fields for inclusion as query
parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_fields(fields = NULL, resource = "files")

prep_fields(fields, resource = "files")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_fields_+3A_fields">fields</code></td>
<td>
<p>Character vector of field names. If <code>resource = "files"</code>, they
are checked for validity. Otherwise, they are passed through.</p>
</td></tr>
<tr><td><code id="drive_fields_+3A_resource">resource</code></td>
<td>
<p>Character, naming the API resource of interest. Currently,
only the Files resource is anticipated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>drive_fields()</code>: Character vector of field names. <code>prep_fields()</code>: a
string.
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/drive/api/v3/performance">Improve performance</a>, in
the Drive API documentation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># get a tibble of all fields for the Files resource + indicator of defaults
drive_fields(expose())

# invalid fields are removed and throw warning
drive_fields(c("name", "parents", "ownedByMe", "pancakes!"))

# prepare fields for query
prep_fields(c("name", "parents", "kind"))
</code></pre>

<hr>
<h2 id='drive_find'>Find files on Google Drive</h2><span id='topic+drive_find'></span>

<h3>Description</h3>

<p>This is the closest googledrive function to what you can do at
<a href="https://drive.google.com">https://drive.google.com</a>: by default, you just get a listing of your files.
You can also search in various ways, e.g., filter by file type or ownership
or work with <a href="#topic+shared_drives">shared drives</a>. This is a very powerful
function. Together with the more specific <code><a href="#topic+drive_get">drive_get()</a></code>, this is the main way
to identify files to target for downstream work. If you know you want to
search within a specific folder or shared drive, use <code><a href="#topic+drive_ls">drive_ls()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_find(
  pattern = NULL,
  trashed = FALSE,
  type = NULL,
  n_max = Inf,
  shared_drive = NULL,
  corpus = NULL,
  ...,
  verbose = deprecated(),
  team_drive = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_find_+3A_pattern">pattern</code></td>
<td>
<p>Character. If provided, only the items whose names match this
regular expression are returned. This is implemented locally on the results
returned by the API.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_trashed">trashed</code></td>
<td>
<p>Logical. Whether to search files that are not in the trash
(<code>trashed = FALSE</code>, the default), only files that are in the trash
(<code>trashed = TRUE</code>), or to search regardless of trashed status (<code>trashed = NA</code>).</p>
</td></tr>
<tr><td><code id="drive_find_+3A_type">type</code></td>
<td>
<p>Character. If provided, only files of this type will be returned.
Can be anything that <code><a href="#topic+drive_mime_type">drive_mime_type()</a></code> knows how to handle. This is
processed by googledrive and sent as a query parameter.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_n_max">n_max</code></td>
<td>
<p>Integer. An upper bound on the number of items to return. This
applies to the results requested from the API, which may be further
filtered locally, via the <code>pattern</code> argument.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_shared_drive">shared_drive</code></td>
<td>
<p>Anything that identifies one specific shared drive: its
name, its id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. The value
provided to <code>shared_drive</code> is pre-processed with <code><a href="#topic+as_shared_drive">as_shared_drive()</a></code>. Read
more about <a href="#topic+shared_drives">shared drives</a>.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_corpus">corpus</code></td>
<td>
<p>Character, specifying which collections of items to search.
Relevant to those who work with shared drives and/or Google Workspace
domains. If specified, must be one of <code>"user"</code>, <code>"drive"</code> (requires that
<code>shared_drive</code> also be specified), <code>"allDrives"</code>, or <code>"domain"</code>. Read more
about <a href="#topic+shared_drives">shared drives</a>.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_...">...</code></td>
<td>
<p>Other parameters to pass along in the request. The most likely
candidate is <code>q</code>. See below and the API's
<a href="https://developers.google.com/drive/api/v3/search-files">Search for files and folders guide</a>.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_find_+3A_team_drive">team_drive</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Google Drive and the
Drive API have replaced Team Drives with shared drives.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>File type</h3>

<p>The <code>type</code> argument is pre-processed with <code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>, so you can
use a few shortcuts and file extensions, in addition to full-blown MIME
types. googledrive forms a search clause to pass to <code>q</code>.
</p>


<h3>Search parameters</h3>

<p>Do advanced search on file properties by providing search clauses to the
<code>q</code> parameter that is passed to the API via <code>...</code>. Multiple <code>q</code> clauses or
vector-valued <code>q</code> are combined via 'and'.
</p>


<h3>Trash</h3>

<p>By default, <code>drive_find()</code> sets <code>trashed = FALSE</code> and does not include
files in the trash. Literally, it adds <code>q = "trashed = false"</code> to the
query. To search <em>only</em> the trash, set <code>trashed = TRUE</code>. To see files
regardless of trash status, set <code>trashed = NA</code>, which adds
<code>q = "(trashed = true or trashed = false)"</code> to the query.
</p>


<h3>Sort order</h3>

<p>By default, <code>drive_find()</code> sends <code>orderBy = "recency desc"</code>, so the top
files in your result have high &quot;recency&quot; (whatever that means). To suppress
sending <code>orderBy</code> at all, do <code>drive_find(orderBy = NULL)</code>. The <code>orderBy</code>
parameter accepts sort keys in addition to <code>recency</code>, which are documented
in the <a href="https://developers.google.com/drive/api/v3/reference/files/list"><code>files.list</code> endpoint</a>.
googledrive translates a snake_case specification of <code>order_by</code> into the
lowerCamel form, <code>orderBy</code>.
</p>


<h3>Shared drives and domains</h3>

<p>If you work with shared drives and/or Google Workspace, you can apply your
search query to collections of items beyond those associated with &quot;My
Drive&quot;. Use the <code>shared_drive</code> or <code>corpus</code> arguments to control this.
Read more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.list</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/list">https://developers.google.com/drive/api/v3/reference/files/list</a>
</p>
</li></ul>

<p>Helpful resource for forming your own queries:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/search-files">https://developers.google.com/drive/api/v3/search-files</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# list "My Drive" w/o regard for folder hierarchy
drive_find()

# filter for folders, the easy way and the hard way
drive_find(type = "folder")
drive_find(q = "mimeType = 'application/vnd.google-apps.folder'")

# filter for Google Sheets, the easy way and the hard way
drive_find(type = "spreadsheet")
drive_find(q = "mimeType='application/vnd.google-apps.spreadsheet'")

# files whose names match a regex
# the local, general, sometimes-slow-to-execute version
drive_find(pattern = "ick")
# the server-side, executes-faster version
# NOTE: works only for a pattern at the beginning of file name
drive_find(q = "name contains 'chick'")

# search for files located directly in your root folder
drive_find(q = "'root' in parents")
# FYI: this is equivalent to
drive_ls("~/")

# control page size or cap the number of files returned
drive_find(pageSize = 50)
# all params passed through `...` can be camelCase or snake_case
drive_find(page_size = 50)
drive_find(n_max = 58)
drive_find(page_size = 5, n_max = 15)

# various ways to specify q search clauses
# multiple q's
drive_find(
  q = "name contains 'TEST'",
  q = "modifiedTime &gt; '2020-07-21T12:00:00'"
)
# vector q
drive_find(q = c("starred = true", "visibility = 'anyoneWithLink'"))

# default `trashed = FALSE` excludes files in the trash
# `trashed = TRUE` consults ONLY file in the trash
drive_find(trashed = TRUE)
# `trashed = NA` disregards trash status completely
drive_find(trashed = NA)

# suppress the default sorting on recency
drive_find(order_by = NULL, n_max = 5)

# sort on various keys
drive_find(order_by = "modifiedByMeTime", n_max = 5)
# request descending order
drive_find(order_by = "quotaBytesUsed desc", n_max = 5)

## End(Not run)

</code></pre>

<hr>
<h2 id='drive_get'>Get Drive files by path or id</h2><span id='topic+drive_get'></span>

<h3>Description</h3>

<p>Retrieves metadata for files specified via <code>path</code> or via file <code>id</code>. This
function is quite straightforward if you specify files by <code>id</code>. But there are
some important considerations when you specify your target files by <code>path</code>.
See below for more. If the target files are specified via <code>path</code>, the
returned <code><a href="#topic+dribble">dribble</a></code> will include a <code>path</code> column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_get(
  path = NULL,
  id = NULL,
  shared_drive = NULL,
  corpus = NULL,
  verbose = deprecated(),
  team_drive = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_get_+3A_path">path</code></td>
<td>
<p>Character vector of path(s) to get. Use a trailing slash to
indicate explicitly that a path is a folder, which can disambiguate if
there is a file of the same name (yes this is possible on Drive!). If
<code>path</code> appears to contain Drive URLs or is explicitly marked with
<code><a href="#topic+as_id">as_id()</a></code>, it is treated as if it was provided via the <code>id</code> argument.</p>
</td></tr>
<tr><td><code id="drive_get_+3A_id">id</code></td>
<td>
<p>Character vector of Drive file ids or URLs (it is first processed
with <code><a href="#topic+as_id">as_id()</a></code>). If both <code>path</code> and <code>id</code> are non-<code>NULL</code>, <code>id</code> is silently
ignored.</p>
</td></tr>
<tr><td><code id="drive_get_+3A_shared_drive">shared_drive</code></td>
<td>
<p>Anything that identifies one specific shared drive: its
name, its id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. The value
provided to <code>shared_drive</code> is pre-processed with <code><a href="#topic+as_shared_drive">as_shared_drive()</a></code>. Read
more about <a href="#topic+shared_drives">shared drives</a>.</p>
</td></tr>
<tr><td><code id="drive_get_+3A_corpus">corpus</code></td>
<td>
<p>Character, specifying which collections of items to search.
Relevant to those who work with shared drives and/or Google Workspace
domains. If specified, must be one of <code>"user"</code>, <code>"drive"</code> (requires that
<code>shared_drive</code> also be specified), <code>"allDrives"</code>, or <code>"domain"</code>. Read more
about <a href="#topic+shared_drives">shared drives</a>.</p>
</td></tr>
<tr><td><code id="drive_get_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_get_+3A_team_drive">team_drive</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Google Drive and the
Drive API have replaced Team Drives with shared drives.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
If the target files were specified via <code>path</code>,
there will be a <code>path</code> column.
</p>


<h3>Getting by <code>path</code></h3>

<p>Google Drive does NOT behave like your local file system! File and folder
names need not be unique, even at a given level of the hierarchy. This
means that a single path can describe multiple files (or 0 or exactly 1).
</p>
<p>A single file can also be compatible with multiple paths, i.e. one path
could be more specific than the other. A file located at <code style="white-space: pre;">&#8288;~/alfa/bravo&#8288;</code> can
be found as <code>bravo</code>, <code>alfa/bravo</code>, and <code style="white-space: pre;">&#8288;~/alfa/bravo&#8288;</code>. If all 3 of those
were included in the input <code>path</code>, they would be represented by a
<strong>single</strong> row in the output.
</p>
<p>It's best to think of <code>drive_get()</code> as a setwise operation when using file
paths. Do not assume that the <code>i</code>-th input path corresponds to row <code>i</code> in
the output (although it often does!). If there's not a 1-to-1 relationship
between the input and output, this will be announced in a message.
</p>
<p><code>drive_get()</code> performs just enough path resolution to uniquely identify a
file compatible with each input <code>path</code>, for all <code>path</code>s at once. If you
absolutely want the full canonical path, run the output of <code>drive_get()</code>
through <code><a href="#topic+drive_reveal">drive_reveal(d, &quot;path&quot;)</a></code>'.
</p>


<h3>Files that you don't own</h3>

<p>If you want to get a file via <code>path</code> and it's not necessarily on your My
Drive, you may need to specify the <code>shared_drive</code> or <code>corpus</code> arguments to
search other collections of items. Read more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>See Also</h3>

<p>To add path information to any <code><a href="#topic+dribble">dribble</a></code> that lacks it, use
<code><a href="#topic+drive_reveal">drive_reveal(d, &quot;path&quot;)</a></code>. To list the contents of a
folder, use <code><a href="#topic+drive_ls">drive_ls()</a></code>. For general searching, use <code><a href="#topic+drive_find">drive_find()</a></code>.
</p>
<p>Wraps the <code>files.get</code> endpoint and, if you specify files by name or
path, also calls <code>files.list</code>:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/get">https://developers.google.com/drive/api/v3/reference/files/get</a>
</p>
</li>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/list">https://developers.google.com/drive/api/v3/reference/files/list</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# get info about your "My Drive" root folder
drive_get("~/")
# the API reserves the file id "root" for your root folder
drive_get(id = "root")
drive_get(id = "root") %&gt;% drive_reveal("path")

# set up some files to get by path
alfalfa &lt;- drive_mkdir("alfalfa")
broccoli &lt;- drive_upload(
  drive_example_local("chicken.txt"),
  name = "broccoli", path = alfalfa
)
drive_get("broccoli")
drive_get("alfalfa/broccoli")
drive_get("~/alfalfa/broccoli")
drive_get(c("broccoli", "alfalfa/", "~/alfalfa/broccoli"))

# Clean up
drive_rm(alfalfa)

## Not run: 
# The examples below are indicative of correct syntax.
# But note these will generally result in an error or a
# 0-row dribble, unless you replace the inputs with paths
# or file ids that exist in your Drive.

# multiple names
drive_get(c("abc", "def"))

# multiple names, one of which must be a folder
drive_get(c("abc", "def/"))

# query by file id(s)
drive_get(id = "abcdefgeh123456789")
drive_get(as_id("abcdefgeh123456789"))
drive_get(id = c("abcdefgh123456789", "jklmnopq123456789"))

# apply to a browser URL for, e.g., a Google Sheet
my_url &lt;- "https://docs.google.com/spreadsheets/d/FILE_ID/edit#gid=SHEET_ID"
drive_get(my_url)
drive_get(as_id(my_url))
drive_get(id = my_url)

# access the shared drive named "foo"
# shared_drive params must be specified if getting by path
foo &lt;- shared_drive_get("foo")
drive_get(c("this.jpg", "that-file"), shared_drive = foo)
# shared_drive params are not necessary if getting by id
drive_get(as_id("123456789"))

# search all shared drives and other files user has accessed
drive_get(c("this.jpg", "that-file"), corpus = "allDrives")

## End(Not run)

</code></pre>

<hr>
<h2 id='drive_has_token'>Is there a token on hand?</h2><span id='topic+drive_has_token'></span>

<h3>Description</h3>

<p>Reports whether googledrive has stored a token, ready for use in downstream
requests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_has_token()
</code></pre>


<h3>Value</h3>

<p>Logical.
</p>


<h3>See Also</h3>

<p>Other low-level API functions: 
<code><a href="#topic+drive_token">drive_token</a>()</code>,
<code><a href="#topic+request_generate">request_generate</a>()</code>,
<code><a href="#topic+request_make">request_make</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>drive_has_token()
</code></pre>

<hr>
<h2 id='drive_id'><code>drive_id</code> class</h2><span id='topic+drive_id'></span><span id='topic+as_id'></span>

<h3>Description</h3>

<p><code>drive_id</code> is an S3 class to mark strings as Drive file ids, in order to
distinguish them from Drive file names or paths. <code>as_id()</code> converts various
inputs into an instance of <code>drive_id</code>.
</p>
<p><code>as_id()</code> is a generic function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_id(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_id_+3A_x">x</code></td>
<td>
<p>A character vector of file or shared drive ids or URLs, a
<code><a href="#topic+dribble">dribble</a></code>, or a suitable data frame.</p>
</td></tr>
<tr><td><code id="drive_id_+3A_...">...</code></td>
<td>
<p>Other arguments passed down to methods. (Not used.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector bearing the S3 class <code>drive_id</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
as_id("123abc")
as_id("https://docs.google.com/spreadsheets/d/qawsedrf16273849/edit#gid=12345")

x &lt;- drive_find(n_max = 3)
as_id(x)

</code></pre>

<hr>
<h2 id='drive_link'>Retrieve Drive file links</h2><span id='topic+drive_link'></span>

<h3>Description</h3>

<p>Returns the <code>"webViewLink"</code> for one or more files, which is the &quot;link for
opening the file in a relevant Google editor or viewer in a browser&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_link(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_link_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character vector of file hyperlinks.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# get a few files into a dribble
three_files &lt;- drive_find(n_max = 3)

# get their browser links
drive_link(three_files)

</code></pre>

<hr>
<h2 id='drive_ls'>List contents of a folder or shared drive</h2><span id='topic+drive_ls'></span>

<h3>Description</h3>

<p>List the contents of a folder or shared drive, recursively or not. This is a
thin wrapper around <code><a href="#topic+drive_find">drive_find()</a></code>, that simply adds one constraint: the
search is limited to direct or indirect children of <code>path</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_ls(path = NULL, ..., recursive = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_ls_+3A_path">path</code></td>
<td>
<p>Specifies a single folder on Google Drive whose contents you want
to list. Can be an actual path (character), a file id or URL marked with
<code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. If it is a shared drive or is a folder on a
shared drive, it must be passed as a <code><a href="#topic+dribble">dribble</a></code>. If <code>path</code> is a shortcut
to a folder, it is automatically resolved to its target folder.</p>
</td></tr>
<tr><td><code id="drive_ls_+3A_...">...</code></td>
<td>
<p>Any parameters that are valid for <code><a href="#topic+drive_find">drive_find()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_ls_+3A_recursive">recursive</code></td>
<td>
<p>Logical, indicating if you want only direct children of
<code>path</code> (<code>recursive = FALSE</code>, the default) or all children, including
indirect (<code>recursive = TRUE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get contents of the folder 'abc' (non-recursive)
drive_ls("abc")

# get contents of folder 'abc' whose names contain the letters 'def'
drive_ls(path = "abc", pattern = "def")

# get all Google spreadsheets in folder 'abc'
# whose names contain the letters 'def'
drive_ls(path = "abc", pattern = "def", type = "spreadsheet")

# get all the files below 'abc', recursively, that are starred
drive_ls(path = "abc", q = "starred = true", recursive = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='drive_mime_type'>Lookup MIME type</h2><span id='topic+drive_mime_type'></span>

<h3>Description</h3>

<p>This is a helper to determine which MIME type should be used
for a file. Three types of input are acceptable:
</p>

<ul>
<li><p> Native Google Drive file types. Important examples:
</p>

<ul>
<li><p> &quot;document&quot; for Google Docs
</p>
</li>
<li><p> &quot;folder&quot; for folders
</p>
</li>
<li><p> &quot;presentation&quot; for Google Slides
</p>
</li>
<li><p> &quot;spreadsheet&quot; for Google Sheets
</p>
</li></ul>

</li>
<li><p> File extensions, such as &quot;pdf&quot;, &quot;csv&quot;, etc.
</p>
</li>
<li><p> MIME types accepted by Google Drive (these are simply passed through).
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>drive_mime_type(type = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_mime_type_+3A_type">type</code></td>
<td>
<p>Character. Google Drive file type, file extension, or MIME type.
Pass the sentinel <code><a href="#topic+expose">expose()</a></code> if you want to get the full table used for
validation and lookup, i.e. all MIME types known to be relevant to the
Drive API.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. MIME type.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## get the mime type for Google Spreadsheets
drive_mime_type("spreadsheet")

## get the mime type for jpegs
drive_mime_type("jpeg")

## it's vectorized
drive_mime_type(c("presentation", "pdf", "image/gif"))

## see the internal tibble of MIME types known to the Drive API
drive_mime_type(expose())
</code></pre>

<hr>
<h2 id='drive_mkdir'>Create a Drive folder</h2><span id='topic+drive_mkdir'></span>

<h3>Description</h3>

<p>Creates a new Drive folder. To update the metadata of an existing Drive file,
including a folder, use <code><a href="#topic+drive_update">drive_update()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_mkdir(name, path = NULL, ..., overwrite = NA, verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_mkdir_+3A_name">name</code></td>
<td>
<p>Name for the new folder or, optionally, a path that specifies
an existing parent folder, as well as the new name.</p>
</td></tr>
<tr><td><code id="drive_mkdir_+3A_path">path</code></td>
<td>
<p>Target destination for the new folder, i.e. a folder or a
shared drive. Can be given as an actual path (character), a file id or URL
marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. Defaults to your &quot;My Drive&quot; root
folder. If <code>path</code> is a shortcut to a folder, it is automatically resolved
to its target folder.</p>
</td></tr>
<tr><td><code id="drive_mkdir_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_mkdir_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_mkdir_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.create</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/create">https://developers.google.com/drive/api/v3/reference/files/create</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create folder named 'ghi', then another below named it 'jkl' and star it
ghi &lt;- drive_mkdir("ghi")
jkl &lt;- drive_mkdir("ghi/jkl", starred = TRUE)

# is 'jkl' really starred? YES
purrr::pluck(jkl, "drive_resource", 1, "starred")

# Another way to create folder 'mno' in folder 'ghi'
drive_mkdir("mno", path = "ghi")

# Yet another way to create a folder named 'pqr' in folder 'ghi',
# this time with parent folder stored in a dribble,
# and setting the new folder's description
pqr &lt;- drive_mkdir("pqr", path = ghi, description = "I am a folder")

# Did we really set the description? YES
purrr::pluck(pqr, "drive_resource", 1, "description")

# `overwrite = FALSE` errors if something already exists at target filepath
# THIS WILL ERROR!
drive_create("name-squatter-mkdir", path = ghi)
drive_mkdir("name-squatter-mkdir", path = ghi, overwrite = FALSE)

# `overwrite = TRUE` moves the existing item to trash, then proceeds
drive_mkdir("name-squatter-mkdir", path = ghi, overwrite = TRUE)

# list everything inside 'ghi'
drive_ls("ghi")

# Clean up
drive_rm(ghi)

</code></pre>

<hr>
<h2 id='drive_mv'>Move a Drive file</h2><span id='topic+drive_mv'></span>

<h3>Description</h3>

<p>Move a Drive file to a different folder, give it a different name, or both.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_mv(
  file,
  path = NULL,
  name = NULL,
  overwrite = NA,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_mv_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_mv_+3A_path">path</code></td>
<td>
<p>Specifies target destination for the file on Google
Drive. Can be an actual path (character), a file id marked with
<code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.
</p>
<p>If <code>path</code> is a shortcut to a folder, it is automatically resolved to its
target folder.
</p>
<p>If <code>path</code> is given as a path (as opposed to a <code>dribble</code> or an id), it is
best to explicitly indicate if it's a folder by including a trailing
slash, since it cannot always be worked out from the context of the call.
By default, the file stays in its current folder.</p>
</td></tr>
<tr><td><code id="drive_mv_+3A_name">name</code></td>
<td>
<p>Character, new file name if not specified as part of
<code>path</code>. This will force <code>path</code> to be interpreted as a folder, even if it
is character and lacks a trailing slash. By default, the file keeps its current name.</p>
</td></tr>
<tr><td><code id="drive_mv_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_mv_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Makes a metadata-only request to the <code>files.update</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/update">https://developers.google.com/drive/api/v3/reference/files/update</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# create a file to move
file &lt;- drive_example_remote("chicken.txt") %&gt;%
  drive_cp("chicken-mv.txt")

# rename it, but leave in current folder (root folder, in this case)
file &lt;- drive_mv(file, "chicken-mv-renamed.txt")

# create a folder to move the file into
folder &lt;- drive_mkdir("mv-folder")

# move the file and rename it again,
# specify destination as a dribble
file &lt;- drive_mv(file, path = folder, name = "chicken-mv-re-renamed.txt")

# verify renamed file is now in the folder
drive_ls(folder)

# move the file back to root folder
file &lt;- drive_mv(file, "~/")

# move it again
# specify destination as path with trailing slash
# to ensure we get a move vs. renaming it to "mv-folder"
file &lt;- drive_mv(file, "mv-folder/")

# `overwrite = FALSE` errors if something already exists at target filepath
# THIS WILL ERROR!
drive_create("name-squatter-mv", path = "~/")
drive_mv(file, path = "~/", name = "name-squatter-mv", overwrite = FALSE)

# `overwrite = TRUE` moves the existing item to trash, then proceeds
drive_mv(file, path = "~/", name = "name-squatter-mv", overwrite = TRUE)

# Clean up
drive_rm(file, folder)

</code></pre>

<hr>
<h2 id='drive_publish'>Publish native Google files</h2><span id='topic+drive_publish'></span><span id='topic+drive_unpublish'></span>

<h3>Description</h3>

<p>Publish (or un-publish) native Google files to the web. Native Google files
include Google Docs, Google Sheets, and Google Slides. The returned
<code><a href="#topic+dribble">dribble</a></code> will have extra columns, <code>published</code> and <code>revisions_resource</code>.
Read more in <code><a href="#topic+drive_reveal">drive_reveal()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_publish(file, ..., verbose = deprecated())

drive_unpublish(file, ..., verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_publish_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_publish_+3A_...">...</code></td>
<td>
<p>Name-value pairs to add to the API request body (see API docs
linked below for details). For <code>drive_publish()</code>, we include
<code>publishAuto = TRUE</code> and <code>publishedOutsideDomain = TRUE</code>, if user does not
specify other values.</p>
</td></tr>
<tr><td><code id="drive_publish_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
There will be extra columns, <code>published</code> and
<code>revisions_resource</code>.
</p>


<h3>See Also</h3>

<p>Wraps the <code>revisions.update</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/revisions/update">https://developers.google.com/drive/api/v3/reference/revisions/update</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create a file to publish
file &lt;- drive_example_remote("chicken_sheet") %&gt;%
  drive_cp()

# Publish file
file &lt;- drive_publish(file)
file$published

# Unpublish file
file &lt;- drive_unpublish(file)
file$published

# Clean up
drive_rm(file)

</code></pre>

<hr>
<h2 id='drive_put'>PUT new media into a Drive file</h2><span id='topic+drive_put'></span>

<h3>Description</h3>

<p>PUTs new media into a Drive file, in the HTTP sense:
</p>

<ul>
<li><p> If the file already exists, we replace its content.
</p>
</li>
<li><p> If the file does not already exist, we create a new file.
</p>
</li></ul>

<p>This is a convenience wrapper around <code><a href="#topic+drive_upload">drive_upload()</a></code> and
<code><a href="#topic+drive_update">drive_update()</a></code>. In pseudo-code:
</p>
<div class="sourceCode"><pre>target_filepath &lt;- &lt;determined from `path`, `name`, and `media`&gt;
hits &lt;- &lt;get all Drive files at target_filepath&gt;
if (no hits) {
  drive_upload(media, path, name, type, ...)
} else if (exactly 1 hit) {
  drive_update(hit, media, ...)
} else {
  ERROR
}
</pre></div>


<h3>Usage</h3>

<pre><code class='language-R'>drive_put(
  media,
  path = NULL,
  name = NULL,
  ...,
  type = NULL,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_put_+3A_media">media</code></td>
<td>
<p>Character, path to the local file to upload.</p>
</td></tr>
<tr><td><code id="drive_put_+3A_path">path</code></td>
<td>
<p>Specifies target destination for the new file on Google
Drive. Can be an actual path (character), a file id marked with
<code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.
</p>
<p>If <code>path</code> is a shortcut to a folder, it is automatically resolved to its
target folder.
</p>
<p>If <code>path</code> is given as a path (as opposed to a <code>dribble</code> or an id), it is
best to explicitly indicate if it's a folder by including a trailing
slash, since it cannot always be worked out from the context of the call.
By default, the file is created in the current
user's &quot;My Drive&quot; root folder.</p>
</td></tr>
<tr><td><code id="drive_put_+3A_name">name</code></td>
<td>
<p>Character, new file name if not specified as part of
<code>path</code>. This will force <code>path</code> to be interpreted as a folder, even if it
is character and lacks a trailing slash. Defaults to the file's local name.</p>
</td></tr>
<tr><td><code id="drive_put_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_put_+3A_type">type</code></td>
<td>
<p>Character. If <code>type = NULL</code>, a MIME type is automatically
determined from the file extension, if possible. If the source file is of a
suitable type, you can request conversion to Google Doc, Sheet or Slides by
setting <code>type</code> to <code>document</code>, <code>spreadsheet</code>, or <code>presentation</code>,
respectively. All non-<code>NULL</code> values for <code>type</code> are pre-processed with
<code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_put_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create a local file to work with
local_file &lt;- tempfile("drive_put_", fileext = ".txt")
writeLines(c("beginning", "middle"), local_file)

# PUT to a novel filepath --&gt; drive_put() delegates to drive_upload()
file &lt;- drive_put(local_file)

# update the local file
cat("end", file = local_file, sep = "\n", append = TRUE)

# PUT again --&gt; drive_put() delegates to drive_update()
file &lt;- drive_put(local_file)

# create a second file at this filepath
file2 &lt;- drive_create(basename(local_file))

# PUT again --&gt; ERROR
drive_put(local_file)

# Clean up
drive_find("drive_put_.+[.]txt") %&gt;% drive_rm()
unlink(local_file)

</code></pre>

<hr>
<h2 id='drive_read_string'>Read the content of a Drive file</h2><span id='topic+drive_read_string'></span><span id='topic+drive_read_raw'></span>

<h3>Description</h3>

<p>These functions return the content of a Drive file as either a
string or raw bytes. You will likely need to do additional work to parse
the content into a useful R object.
</p>
<p><code><a href="#topic+drive_download">drive_download()</a></code> is the more generally useful function, but for certain
file types, such as comma-separated values (MIME type <code>text/csv</code>), it can
be handy to read data directly from Google Drive and avoid writing to disk.
</p>
<p>Just as for <code><a href="#topic+drive_download">drive_download()</a></code>, native Google file types, such as Google
Sheets or Docs, must be exported as a conventional MIME type. See the help
for <code><a href="#topic+drive_download">drive_download()</a></code> for more.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_read_string(file, type = NULL, encoding = NULL)

drive_read_raw(file, type = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_read_string_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_read_string_+3A_type">type</code></td>
<td>
<p>Character. Only consulted if <code>file</code> is a native Google file.
Specifies the desired type of the exported file. Will be processed via
<code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>, so either a file extension like <code>"pdf"</code> or a full MIME
type like <code>"application/pdf"</code> is acceptable.</p>
</td></tr>
<tr><td><code id="drive_read_string_+3A_encoding">encoding</code></td>
<td>
<p>Passed along to <code><a href="httr.html#topic+content">httr::content()</a></code>. Describes the encoding of
the <em>input</em> <code>file</code>.</p>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>read_drive_string()</code>: a UTF-8 encoded string
</p>
</li>
<li> <p><code>read_drive_raw()</code>: a <code><a href="base.html#topic+raw">raw()</a></code> vector
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# comma-separated values --&gt; data.frame or tibble
(chicken_csv &lt;- drive_example_remote("chicken.csv"))
chicken_csv %&gt;%
  drive_read_string() %&gt;%
  read.csv(text = .)

# Google Doc --&gt; character vector
(chicken_doc &lt;- drive_example_remote("chicken_doc"))
chicken_doc %&gt;%
  # NOTE: we must specify an export MIME type
  drive_read_string(type = "text/plain") %&gt;%
  strsplit(split = "(\r\n|\r|\n)") %&gt;%
  .[[1]]

</code></pre>

<hr>
<h2 id='drive_rename'>Rename a Drive file</h2><span id='topic+drive_rename'></span>

<h3>Description</h3>

<p>This is a wrapper for <code><a href="#topic+drive_mv">drive_mv()</a></code> that only renames a file.
If you would like to rename AND move the file, see <code><a href="#topic+drive_mv">drive_mv()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_rename(file, name = NULL, overwrite = NA, verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_rename_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_rename_+3A_name">name</code></td>
<td>
<p>Character. Name you would like the file to have.</p>
</td></tr>
<tr><td><code id="drive_rename_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_rename_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a file to rename
file &lt;- drive_create("file-to-rename")

# Rename it
file &lt;- drive_rename(file, name = "renamed-file")

# `overwrite = FALSE` errors if something already exists at target filepath
# THIS WILL ERROR!
drive_create("name-squatter-rename")
drive_rename(file, name = "name-squatter-rename", overwrite = FALSE)

# `overwrite = TRUE` moves the existing item to trash, then proceeds
file &lt;- drive_rename(file, name = "name-squatter-rename", overwrite = TRUE)

# Clean up
drive_rm(file)

</code></pre>

<hr>
<h2 id='drive_reveal'>Add a new column of Drive file information</h2><span id='topic+drive_reveal'></span>

<h3>Description</h3>

<p><code>drive_reveal()</code> adds extra information about your Drive files that is not
readily available in the default <code><a href="#topic+dribble">dribble</a></code> produced by googledrive. Why is
this info not always included in the default <code>dribble</code>?
</p>

<ul>
<li><p> You don't always care about it. There is a lot of esoteric information in
the <code>drive_resource</code> that has little value for most users.
</p>
</li>
<li><p> It might be &quot;expensive&quot; to get this information and put it into a usable
form. For example, revealing a file's <code>"path"</code>, <code>"permissions"</code>, or
<code>"published"</code> status all require additional API calls.
</p>
</li></ul>

<p><code>drive_reveal()</code> can also <strong>hoist</strong> any property out of the <code>drive_resource</code>
list-column, when the property's name is passed as the <code>what</code> argument. The
resulting new column is simplified if it is easy to do so, e.g., if the
individual elements are all string or logical. If <code>what</code> extracts a
date-time, we return <code><a href="base.html#topic+DateTimeClasses">POSIXct</a></code>. Otherwise, you'll get a
list-column. If this makes you sad, consider using <code>tidyr::hoist()</code> instead.
It is more powerful due to a richer &quot;plucking specification&quot; and its <code>ptype</code>
and <code>transform</code> arguments. Another useful function is
<code>tidyr::unnest_wider()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_reveal(file, what = c("path", "permissions", "published", "parent"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_reveal_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_reveal_+3A_what">what</code></td>
<td>
<p>Character, describing the type of info you want to add. These
values get special handling (more details below):
</p>

<ul>
<li> <p><code>path</code>
</p>
</li>
<li> <p><code>permissions</code>
</p>
</li>
<li> <p><code>published</code>
</p>
</li>
<li> <p><code>parent</code>
</p>
</li></ul>

<p>You can also request any property in the <code>drive_resource</code> column by name.
The request can be in <code>camelCase</code> or <code>snake_case</code>, but the new column name
will always be <code>snake_case</code>. Some examples of <code>what</code>:
</p>

<ul>
<li> <p><code>mime_type</code> (or <code>mimeType</code>)
</p>
</li>
<li> <p><code>trashed</code>
</p>
</li>
<li> <p><code>starred</code>
</p>
</li>
<li> <p><code>description</code>
</p>
</li>
<li> <p><code>version</code>
</p>
</li>
<li> <p><code>web_view_link</code> (or <code>webViewLink</code>)
</p>
</li>
<li> <p><code>modified_time</code> (or <code>modifiedTime</code>)
</p>
</li>
<li> <p><code>created_time</code> (or <code>createdTime</code>)
</p>
</li>
<li> <p><code>owned_by_me</code> (or <code>ownedByMe</code>)
</p>
</li>
<li> <p><code>size</code>
</p>
</li>
<li> <p><code>quota_bytes_used</code> (or <code>quotaBytesUsed</code>)
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
The additional info requested via <code>what</code>
appears in one (or more) extra columns.
</p>


<h3>File path</h3>

<p>When <code>what = "path"</code> the <code><a href="#topic+dribble">dribble</a></code> gains a character column holding each
file's path. This can be <em>very slow</em>, so use with caution.
</p>
<p>The example path <code style="white-space: pre;">&#8288;~/a/b/&#8288;</code> illustrates two conventions used in googledrive:
</p>

<ul>
<li><p> The leading <code style="white-space: pre;">&#8288;~/&#8288;</code> means that the folder <code>a</code> is located in the current
user's &quot;My Drive&quot; root folder.
</p>
</li>
<li><p> The trailing <code>/</code> means that <code>b</code>, located in <code>a</code>, is <em>a folder or a folder
shortcut</em>.
</p>
</li></ul>



<h3>Permissions</h3>

<p>When <code>what = "permissions"</code> the <code><a href="#topic+dribble">dribble</a></code> gains a logical column <code>shared</code>
that indicates whether a file is shared and a new list-column
<code>permissions_resource</code> containing lists of
<a href="https://developers.google.com/drive/api/v3/reference/permissions">Permissions resources</a>.
</p>


<h3>Publishing</h3>

<p>When <code>what = "published"</code> the <code><a href="#topic+dribble">dribble</a></code> gains a logical column
<code>published</code> that indicates whether a file is published and a new list-column
<code>revision_resource</code> containing lists of
<a href="https://developers.google.com/drive/api/v3/reference/revisions">Revisions resources</a>.
</p>


<h3>Parent</h3>

<p>When <code>what = "parent"</code> the <code><a href="#topic+dribble">dribble</a></code> gains a character column <code>id_parent</code>
that is the file id of this item's parent folder. This information is
available in the <code>drive_resource</code>, but can't just be hoisted out:
</p>

<ul>
<li><p> Google Drive used to allow files to have multiple parents, but this is no
longer supported and googledrive now assumes this is impossible. However,
we have seen (very old) files that still have &gt;1 parent folder. If we see
this we message about it and drop all but the first parent.
</p>
</li>
<li><p> The <code>parents</code> property in <code>drive_resource</code> has an &quot;extra&quot; layer of nesting
and needs to be flattened.
</p>
</li></ul>

<p>If you really want the raw <code>parents</code> property, call <code>drive_reveal(what = "parents")</code>.
</p>


<h3>See Also</h3>

<p>To learn more about the properties present in the metadata of a
Drive file (which is what's in the <code>drive_resource</code> list-column of a
<code><a href="#topic+dribble">dribble</a></code>), see the API docs:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files#resource-representations">https://developers.google.com/drive/api/v3/reference/files#resource-representations</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Get a few of your files
files &lt;- drive_find(n_max = 10, trashed = NA)

# the "special" cases that require additional API calls and can be slow
drive_reveal(files, "path")
drive_reveal(files, "permissions")
drive_reveal(files, "published")

# a "special" case of digging info out of `drive_resource`, then processing
# a bit
drive_reveal(files, "parent")

# the "simple" cases of digging info out of `drive_resource`
drive_reveal(files, "trashed")
drive_reveal(files, "mime_type")
drive_reveal(files, "starred")
drive_reveal(files, "description")
drive_reveal(files, "version")
drive_reveal(files, "web_view_link")
drive_reveal(files, "modified_time")
drive_reveal(files, "created_time")
drive_reveal(files, "owned_by_me")
drive_reveal(files, "size")
drive_reveal(files, "quota_bytes_used")

# 'root' is a special file id that represents your My Drive root folder
drive_get(id = "root") %&gt;%
  drive_reveal("path")

</code></pre>

<hr>
<h2 id='drive_rm'>Delete files from Drive</h2><span id='topic+drive_rm'></span>

<h3>Description</h3>

<p>Caution: this will permanently delete your files! For a safer, reversible
option, see <code><a href="#topic+drive_trash">drive_trash()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_rm(..., verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_rm_+3A_...">...</code></td>
<td>
<p>One or more Drive files, specified in any valid way, i.e. as a
<code><a href="#topic+dribble">dribble</a></code>, by name or path, or by file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>. Or
any combination thereof. Elements are processed with <code><a href="#topic+as_dribble">as_dribble()</a></code> and
row-bound prior to deletion.</p>
</td></tr>
<tr><td><code id="drive_rm_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector, indicating whether the delete succeeded.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.delete</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/delete">https://developers.google.com/drive/api/v3/reference/files/delete</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Target one of the official example files to copy (then remove)
(src_file &lt;- drive_example_remote("chicken.txt"))

# Create a copy, then remove it by name
src_file %&gt;%
  drive_cp(name = "chicken-rm.txt")
drive_rm("chicken-rm.txt")

# Create several more copies
x1 &lt;- src_file %&gt;%
  drive_cp(name = "chicken-abc.txt")
drive_cp(src_file, name = "chicken-def.txt")
x2 &lt;- src_file %&gt;%
  drive_cp(name = "chicken-ghi.txt")

# Remove the copies all at once, specified in different ways
drive_rm(x1, "chicken-def.txt", as_id(x2))

</code></pre>

<hr>
<h2 id='drive_scopes'>Produce scopes specific to the Drive API</h2><span id='topic+drive_scopes'></span>

<h3>Description</h3>

<p>When called with no arguments, <code>drive_scopes()</code> returns a named character vector
of scopes associated with the Drive API. If <code>drive_scopes(scopes =)</code> is given,
an abbreviated entry such as <code>"drive.readonly"</code> is expanded to a full scope
(<code>"https://www.googleapis.com/auth/drive.readonly"</code> in this case).
Unrecognized scopes are passed through unchanged.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_scopes(scopes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_scopes_+3A_scopes">scopes</code></td>
<td>
<p>One or more API scopes. Each scope can be specified in full or,
for Drive API-specific scopes, in an abbreviated form that is recognized by
<code><a href="#topic+drive_scopes">drive_scopes()</a></code>:
</p>

<ul>
<li><p> &quot;drive&quot; = &quot;https://www.googleapis.com/auth/drive&quot; (the default)
</p>
</li>
<li><p> &quot;full&quot; = &quot;https://www.googleapis.com/auth/drive&quot; (same as &quot;drive&quot;)
</p>
</li>
<li><p> &quot;drive.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.readonly&quot;
</p>
</li>
<li><p> &quot;drive.file&quot; = &quot;https://www.googleapis.com/auth/drive.file&quot;
</p>
</li>
<li><p> &quot;drive.appdata&quot; = &quot;https://www.googleapis.com/auth/drive.appdata&quot;
</p>
</li>
<li><p> &quot;drive.metadata&quot; = &quot;https://www.googleapis.com/auth/drive.metadata&quot;
</p>
</li>
<li><p> &quot;drive.metadata.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.metadata.readonly&quot;
</p>
</li>
<li><p> &quot;drive.photos.readonly&quot; = &quot;https://www.googleapis.com/auth/drive.photos.readonly&quot;
</p>
</li>
<li><p> &quot;drive.scripts&quot; = &quot;https://www.googleapis.com/auth/drive.scripts
</p>
</li></ul>

<p>See <a href="https://developers.google.com/drive/api/guides/api-specific-auth">https://developers.google.com/drive/api/guides/api-specific-auth</a> for
details on the permissions for each scope.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of scopes.
</p>


<h3>See Also</h3>

<p><a href="https://developers.google.com/drive/api/guides/api-specific-auth">https://developers.google.com/drive/api/guides/api-specific-auth</a> for details on
the permissions for each scope.
</p>
<p>Other auth functions: 
<code><a href="#topic+drive_auth_configure">drive_auth_configure</a>()</code>,
<code><a href="#topic+drive_auth">drive_auth</a>()</code>,
<code><a href="#topic+drive_deauth">drive_deauth</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>drive_scopes("full")
drive_scopes("drive.readonly")
drive_scopes()
</code></pre>

<hr>
<h2 id='drive_share'>Share Drive files</h2><span id='topic+drive_share'></span><span id='topic+drive_share_anyone'></span>

<h3>Description</h3>

<p>Grant individuals or other groups access to files, including permission to
read, comment, or edit. The returned <code><a href="#topic+dribble">dribble</a></code> will have extra columns,
<code>shared</code> and <code>permissions_resource</code>. Read more in <code><a href="#topic+drive_reveal">drive_reveal()</a></code>.
</p>
<p><code>drive_share_anyone()</code> is a convenience wrapper for a common special case:
&quot;make this <code>file</code> readable by 'anyone with a link'&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_share(
  file,
  role = c("reader", "commenter", "writer", "fileOrganizer", "owner", "organizer"),
  type = c("user", "group", "domain", "anyone"),
  ...,
  verbose = deprecated()
)

drive_share_anyone(file, verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_share_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_share_+3A_role">role</code></td>
<td>
<p>Character. The role to grant. Must be one of:
</p>

<ul>
<li><p> owner (not allowed in shared drives)
</p>
</li>
<li><p> organizer (applies to shared drives)
</p>
</li>
<li><p> fileOrganizer (applies to shared drives)
</p>
</li>
<li><p> writer
</p>
</li>
<li><p> commenter
</p>
</li>
<li><p> reader
</p>
</li></ul>
</td></tr>
<tr><td><code id="drive_share_+3A_type">type</code></td>
<td>
<p>Character. Describes the grantee. Must be one of:
</p>

<ul>
<li><p> user
</p>
</li>
<li><p> group
</p>
</li>
<li><p> domain
</p>
</li>
<li><p> anyone
</p>
</li></ul>
</td></tr>
<tr><td><code id="drive_share_+3A_...">...</code></td>
<td>
<p>Name-value pairs to add to the API request. This is where you
provide additional information, such as the <code>emailAddress</code> (when grantee
<code>type</code> is <code>"group"</code> or <code>"user"</code>) or the <code>domain</code> (when grantee type is
<code>"domain"</code>). Read the API docs linked below for more details.</p>
</td></tr>
<tr><td><code id="drive_share_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
There will be extra columns, <code>shared</code> and
<code>permissions_resource</code>.
</p>


<h3>See Also</h3>

<p>Wraps the <code>permissions.create</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/permissions/create">https://developers.google.com/drive/api/v3/reference/permissions/create</a>
</p>
</li></ul>

<p>Drive roles and permissions are described here:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/ref-roles">https://developers.google.com/drive/api/v3/ref-roles</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create a file to share
file &lt;- drive_example_remote("chicken_doc") %&gt;%
  drive_cp(name = "chicken-share.txt")

# Let a specific person comment
file &lt;- file %&gt;%
  drive_share(
    role = "commenter",
    type = "user",
    emailAddress = "susan@example.com"
  )

# Let a different specific person edit and customize the email notification
file &lt;- file %&gt;%
  drive_share(
    role = "writer",
    type = "user",
    emailAddress = "carol@example.com",
    emailMessage = "Would appreciate your feedback on this!"
  )

# Let anyone read the file
file &lt;- file %&gt;%
  drive_share(role = "reader", type = "anyone")
# Single-purpose wrapper function for this
drive_share_anyone(file)

# Clean up
drive_rm(file)

</code></pre>

<hr>
<h2 id='drive_token'>Produce configured token</h2><span id='topic+drive_token'></span>

<h3>Description</h3>

<p>For internal use or for those programming around the Drive API.
Returns a token pre-processed with <code><a href="httr.html#topic+config">httr::config()</a></code>. Most users
do not need to handle tokens &quot;by hand&quot; or, even if they need some
control, <code><a href="#topic+drive_auth">drive_auth()</a></code> is what they need. If there is no current
token, <code><a href="#topic+drive_auth">drive_auth()</a></code> is called to either load from cache or
initiate OAuth2.0 flow.
If auth has been deactivated via <code><a href="#topic+drive_deauth">drive_deauth()</a></code>, <code>drive_token()</code>
returns <code>NULL</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_token()
</code></pre>


<h3>Value</h3>

<p>A <code>request</code> object (an S3 class provided by <a href="httr.html#topic+httr-package">httr</a>).
</p>


<h3>See Also</h3>

<p>Other low-level API functions: 
<code><a href="#topic+drive_has_token">drive_has_token</a>()</code>,
<code><a href="#topic+request_generate">request_generate</a>()</code>,
<code><a href="#topic+request_make">request_make</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
req &lt;- request_generate(
  "drive.files.get",
  list(fileId = "abc"),
  token = drive_token()
)
req

</code></pre>

<hr>
<h2 id='drive_trash'>Move Drive files to or from trash</h2><span id='topic+drive_trash'></span><span id='topic+drive_untrash'></span>

<h3>Description</h3>

<p>Move Drive files to or from trash
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_trash(file, verbose = deprecated())

drive_untrash(file, verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_trash_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_trash_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a file and put it in the trash.
file &lt;- drive_example_remote("chicken.txt") %&gt;%
  drive_cp("chicken-trash.txt")
drive_trash("chicken-trash.txt")

# Confirm it's in the trash
drive_find(trashed = TRUE)

# Remove it from the trash and confirm
drive_untrash("chicken-trash.txt")
drive_find(trashed = TRUE)

# Clean up
drive_rm("chicken-trash.txt")

</code></pre>

<hr>
<h2 id='drive_update'>Update an existing Drive file</h2><span id='topic+drive_update'></span>

<h3>Description</h3>

<p>Update an existing Drive file id with new content (&quot;media&quot; in Drive
API-speak), new metadata, or both.  To create a new file or update existing,
depending on whether the Drive file already exists, see <code><a href="#topic+drive_put">drive_put()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_update(file, media = NULL, ..., verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_update_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="drive_update_+3A_media">media</code></td>
<td>
<p>Character, path to the local file to upload.</p>
</td></tr>
<tr><td><code id="drive_update_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_update_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.update</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/update">https://developers.google.com/drive/api/v3/reference/files/update</a>
</p>
</li></ul>

<p>This function supports media upload:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/manage-uploads">https://developers.google.com/drive/api/v3/manage-uploads</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Create a new file, so we can update it
x &lt;- drive_example_remote("chicken.csv") %&gt;%
  drive_cp()

# Update the file with new media
x &lt;- x %&gt;%
  drive_update(drive_example_local("chicken.txt"))

# Update the file with new metadata.
# Notice here `name` is not an argument of `drive_update()`, we are passing
# this to the API via the `...``
x &lt;- x %&gt;%
  drive_update(name = "CHICKENS!")

# Update the file with new media AND new metadata
x &lt;- x %&gt;%
  drive_update(
    drive_example_local("chicken.txt"),
    name = "chicken-poem-again.txt"
  )

# Clean up
drive_rm(x)

</code></pre>

<hr>
<h2 id='drive_upload'>Upload into a new Drive file</h2><span id='topic+drive_upload'></span>

<h3>Description</h3>

<p>Uploads a local file into a new Drive file. To update the content or metadata
of an existing Drive file, use <code><a href="#topic+drive_update">drive_update()</a></code>. To upload or update,
depending on whether the Drive file already exists, see <code><a href="#topic+drive_put">drive_put()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_upload(
  media,
  path = NULL,
  name = NULL,
  type = NULL,
  ...,
  overwrite = NA,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_upload_+3A_media">media</code></td>
<td>
<p>Character, path to the local file to upload.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_path">path</code></td>
<td>
<p>Specifies target destination for the new file on Google
Drive. Can be an actual path (character), a file id marked with
<code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.
</p>
<p>If <code>path</code> is a shortcut to a folder, it is automatically resolved to its
target folder.
</p>
<p>If <code>path</code> is given as a path (as opposed to a <code>dribble</code> or an id), it is
best to explicitly indicate if it's a folder by including a trailing
slash, since it cannot always be worked out from the context of the call.
By default, the file is created in the current
user's &quot;My Drive&quot; root folder.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_name">name</code></td>
<td>
<p>Character, new file name if not specified as part of
<code>path</code>. This will force <code>path</code> to be interpreted as a folder, even if it
is character and lacks a trailing slash. Defaults to the file's local name.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_type">type</code></td>
<td>
<p>Character. If <code>type = NULL</code>, a MIME type is automatically
determined from the file extension, if possible. If the source file is of a
suitable type, you can request conversion to Google Doc, Sheet or Slides by
setting <code>type</code> to <code>document</code>, <code>spreadsheet</code>, or <code>presentation</code>,
respectively. All non-<code>NULL</code> values for <code>type</code> are pre-processed with
<code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_...">...</code></td>
<td>
<p>Named parameters to pass along to the Drive API. Has <a href="rlang.html#topic+dyn-dots">dynamic dots</a> semantics. You can affect the metadata of the target file by
specifying properties of the Files resource via <code>...</code>. Read the &quot;Request
body&quot; section of the Drive API docs for the associated endpoint to learn
about relevant parameters.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
<tr><td><code id="drive_upload_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>

<p>Wraps the <code>files.create</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/files/create">https://developers.google.com/drive/api/v3/reference/files/create</a>
</p>
</li></ul>

<p>MIME types that can be converted to native Google formats:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/manage-uploads#import_to_google_docs_types">https://developers.google.com/drive/api/v3/manage-uploads#import_to_google_docs_types</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# upload a csv file
chicken_csv &lt;- drive_example_local("chicken.csv") %&gt;%
  drive_upload("chicken-upload.csv")

# or convert it to a Google Sheet
chicken_sheet &lt;- drive_example_local("chicken.csv") %&gt;%
  drive_upload(
    name = "chicken-sheet-upload.csv",
    type = "spreadsheet"
  )

# check out the new Sheet!
drive_browse(chicken_sheet)

# Clean up
drive_find("chicken.*upload") %&gt;% drive_rm()

# Upload a file and, at the same time, star it
chicken &lt;- drive_example_local("chicken.jpg") %&gt;%
  drive_upload(starred = "true")

# Is is really starred? YES
purrr::pluck(chicken, "drive_resource", 1, "starred")

# Clean up
drive_rm(chicken)

# `overwrite = FALSE` errors if something already exists at target filepath
# THIS WILL ERROR!
drive_create("name-squatter-upload")
drive_example_local("chicken.jpg") %&gt;%
  drive_upload(
    name = "name-squatter-upload",
    overwrite = FALSE
  )

# `overwrite = TRUE` moves the existing item to trash, then proceeds
chicken &lt;- drive_example_local("chicken.jpg") %&gt;%
  drive_upload(
    name = "name-squatter-upload",
    overwrite = TRUE
  )

# Clean up
drive_rm(chicken)

## Not run: 
# Upload to a shared drive:
#   * Shared drives are only available if your account is associated with a
#     Google Workspace
#   * The shared drive (or shared-drive-hosted folder) MUST be captured as a
#     dribble first and provided via `path`
sd &lt;- shared_drive_get("Marketing")
drive_upload("fascinating.csv", path = sd)

## End(Not run)

</code></pre>

<hr>
<h2 id='drive_user'>Get info on current user</h2><span id='topic+drive_user'></span>

<h3>Description</h3>

<p>Reveals information about the user associated with the current token. This is
a thin wrapper around <code><a href="#topic+drive_about">drive_about()</a></code> that just extracts the most useful
information (the information on current user) and prints it nicely.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_user(verbose = deprecated())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drive_user_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class <code>drive_user</code>.
</p>


<h3>See Also</h3>

<p>Wraps the <code>about.get</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/about/get">https://developers.google.com/drive/api/v3/reference/about/get</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
drive_user()

# more info is returned than is printed
user &lt;- drive_user()
str(user)

</code></pre>

<hr>
<h2 id='expose'>An expose object</h2><span id='topic+expose'></span>

<h3>Description</h3>

<p><code>expose()</code> returns a sentinel object, similar in spirit to <code>NULL</code>, that tells
the calling function to return its internal data structure. googledrive
stores a lot of information about the Drive API, MIME types, etc., internally
and then exploits it in helper functions, like <code><a href="#topic+drive_mime_type">drive_mime_type()</a></code>,
<code><a href="#topic+drive_fields">drive_fields()</a></code>, <code><a href="#topic+drive_endpoints">drive_endpoints()</a></code>, etc. We use these objects to
provide nice defaults, check input validity, or lookup something cryptic,
like MIME type, based on something friendlier, like a file extension. Pass
<code>expose()</code> to such a function if you want to inspect its internal object, in
its full glory. This is inspired by the <code>waiver()</code> object in ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expose()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>drive_mime_type(expose())
drive_fields(expose())
</code></pre>

<hr>
<h2 id='googledrive-configuration'>googledrive configuration</h2><span id='topic+googledrive-configuration'></span><span id='topic+local_drive_quiet'></span><span id='topic+with_drive_quiet'></span>

<h3>Description</h3>

<p>Some aspects of googledrive behaviour can be controlled via an option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_drive_quiet(env = parent.frame())

with_drive_quiet(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="googledrive-configuration_+3A_env">env</code></td>
<td>
<p>The environment to use for scoping</p>
</td></tr>
<tr><td><code id="googledrive-configuration_+3A_code">code</code></td>
<td>
<p>Code to execute quietly</p>
</td></tr>
</table>


<h3>Auth</h3>

<p>Read about googledrive's main auth function, <code><a href="#topic+drive_auth">drive_auth()</a></code>. It is powered
by the gargle package, which consults several options:
</p>

<ul>
<li><p> Default Google user or, more precisely, <code>email</code>: see
<code><a href="gargle.html#topic+gargle_options">gargle::gargle_oauth_email()</a></code>
</p>
</li>
<li><p> Whether or where to cache OAuth tokens: see
<code><a href="gargle.html#topic+gargle_options">gargle::gargle_oauth_cache()</a></code>
</p>
</li>
<li><p> Whether to prefer &quot;out-of-band&quot; auth: see
<code><a href="gargle.html#topic+gargle_options">gargle::gargle_oob_default()</a></code>
</p>
</li>
<li><p> Application Default Credentials: see <code><a href="gargle.html#topic+credentials_app_default">gargle::credentials_app_default()</a></code>
</p>
</li></ul>



<h3>Messages</h3>

<p>The <code>googledrive_quiet</code> option can be used to suppress messages from
googledrive. By default, googledrive always messages, i.e. it is <em>not</em>
quiet.
</p>
<p>Set <code>googledrive_quiet</code> to <code>TRUE</code> to suppress messages, by one of these
means, in order of decreasing scope:
</p>

<ul>
<li><p> Put <code>options(googledrive_quiet = TRUE)</code> in a start-up file, such as
<code>.Rprofile</code>, or at the top of your R script
</p>
</li>
<li><p> Use <code>local_drive_quiet()</code> to silence googledrive in a specific scope
</p>
<div class="sourceCode"><pre>foo &lt;- function() {
  ...
  local_drive_quiet()
  drive_this(...)
  drive_that(...)
  ...
}
</pre></div>
</li>
<li><p> Use <code>with_drive_quiet()</code> to run a small bit of code silently
</p>
<div class="sourceCode"><pre>with_drive_quiet(
  drive_something(...)
)
</pre></div>
</li></ul>

<p><code>local_drive_quiet()</code> and <code>with_drive_quiet()</code> follow the conventions of the
the withr package (<a href="https://withr.r-lib.org">https://withr.r-lib.org</a>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# message: "Created Drive file"
(x &lt;- drive_create("drive-quiet-demo", type = "document"))

# message: "File updated"
x &lt;- drive_update(x, starred = TRUE)
drive_reveal(x, "starred")

# suppress messages for a small amount of code
with_drive_quiet(
  x &lt;- drive_update(x, name = "drive-quiet-works")
)
x$name

# message: "File updated"
x &lt;- drive_update(x, media = drive_example_local("chicken.txt"))

# suppress messages within a specific scope, e.g. function
unstar &lt;- function(y) {
  local_drive_quiet()
  drive_update(y, starred = FALSE)
}
x &lt;- unstar(x)
drive_reveal(x, "starred")

# Clean up
drive_rm(x)

</code></pre>

<hr>
<h2 id='googledrive-deprecated'>Deprecated googledrive functions</h2><span id='topic+googledrive-deprecated'></span><span id='topic+drive_auth_config'></span><span id='topic+drive_oauth_app'></span><span id='topic+drive_example'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drive_auth_config(active, app, path, api_key)

drive_oauth_app()

drive_example(path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="googledrive-deprecated_+3A_app">app</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Replaced by the <code>client</code>
argument.</p>
</td></tr>
<tr><td><code id="googledrive-deprecated_+3A_path">path</code></td>
<td>
<p>JSON downloaded from <a href="https://console.cloud.google.com">Google Cloud Console</a>, containing a client id and
secret, in one of the forms supported for the <code>txt</code> argument of
<code><a href="jsonlite.html#topic+fromJSON">jsonlite::fromJSON()</a></code> (typically, a file path or JSON string).</p>
</td></tr>
<tr><td><code id="googledrive-deprecated_+3A_api_key">api_key</code></td>
<td>
<p>API key.</p>
</td></tr>
</table>


<h3><code>drive_auth_config()</code></h3>

<p>This function is defunct.
</p>

<ul>
<li><p> Use <code><a href="#topic+drive_auth_configure">drive_auth_configure()</a></code> to configure your own OAuth client or API key.
</p>
</li>
<li><p> Use <code><a href="#topic+drive_deauth">drive_deauth()</a></code> to go into a de-authorized state.
</p>
</li>
<li><p> Use <code><a href="#topic+drive_oauth_client">drive_oauth_client()</a></code> to retrieve a user-configured client, if it
exists.
</p>
</li>
<li><p> Use <code><a href="#topic+drive_api_key">drive_api_key()</a></code> to retrieve a user-configured API key, if it exists.
</p>
</li></ul>



<h3><code>drive_oauth_app()</code></h3>

<p>In light of the new <code><a href="gargle.html#topic+gargle_oauth_client_from_json">gargle::gargle_oauth_client()</a></code> constructor and class of
the same name, <code>drive_oauth_app()</code> is being replaced by
<code><a href="#topic+drive_oauth_client">drive_oauth_client()</a></code>.
</p>


<h3><code>drive_example()</code></h3>

<p>This function is defunct. Access example files with <code><a href="#topic+drive_examples_local">drive_examples_local()</a></code>,
<code><a href="#topic+drive_example_local">drive_example_local()</a></code>, <code><a href="#topic+drive_examples_remote">drive_examples_remote()</a></code>, and
<code><a href="#topic+drive_example_remote">drive_example_remote()</a></code>.
</p>

<hr>
<h2 id='googledrive-package'>googledrive: An Interface to Google Drive</h2><span id='topic+googledrive'></span><span id='topic+googledrive-package'></span>

<h3>Description</h3>

<p>googledrive allows you to interact with files on Google Drive
from R.
</p>
<p><code>googledrive::drive_find(n_max = 50)</code> lists up to 50 of the files you see
in <a href="https://drive.google.com">My Drive</a>. You can expect to be sent to your
browser here, to authenticate yourself and authorize the googledrive
package to deal on your behalf with Google Drive.
</p>
<p>Most functions begin with the prefix <code>drive_</code>.
</p>
<p>The goal is to allow Drive access that feels similar to Unix file system
utilities, e.g., <code>find</code>, <code>ls</code>, <code>mv</code>, <code>cp</code>, <code>mkdir</code>, and <code>rm</code>.
</p>
<p>The metadata for one or more Drive files is held in a <code><a href="#topic+dribble">dribble</a></code>, a &quot;Drive
tibble&quot;. This is a data frame with one row per file. A dribble is returned
(and accepted) by almost every function in googledrive. It is designed to
give people what they want (file name), track what the API wants (file id),
and to hold the metadata needed for general file operations.
</p>
<p>googledrive is &quot;pipe-friendly&quot; and, in fact, re-exports <code style="white-space: pre;">&#8288;%&gt;%&#8288;</code>, but does not
require its use.
</p>
<p>Please see the googledrive website for full documentation:
</p>

<ul>
<li> <p><a href="https://googledrive.tidyverse.org/index.html">https://googledrive.tidyverse.org/index.html</a>
</p>
</li></ul>

<p>In addition to function-specific help, there are several articles which are
indexed here:
</p>

<ul>
<li> <p><a href="https://googledrive.tidyverse.org/articles/index.html">Article index</a>
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jennifer Bryan <a href="mailto:jenny@posit.co">jenny@posit.co</a> (<a href="https://orcid.org/0000-0002-6983-2759">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Lucy D'Agostino McGowan
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Posit Software, PBC [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://googledrive.tidyverse.org">https://googledrive.tidyverse.org</a>
</p>
</li>
<li> <p><a href="https://github.com/tidyverse/googledrive">https://github.com/tidyverse/googledrive</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/tidyverse/googledrive/issues">https://github.com/tidyverse/googledrive/issues</a>
</p>
</li></ul>


<hr>
<h2 id='request_generate'>Build a request for the Google Drive API</h2><span id='topic+request_generate'></span>

<h3>Description</h3>

<p>Build a request, using knowledge of the <a href="https://developers.google.com/drive/api/v3/about-sdk">Drive v3 API</a> from its
Discovery Document
(<code style="white-space: pre;">&#8288;https://www.googleapis.com/discovery/v1/apis/drive/v3/rest&#8288;</code>). Most users
should, instead, use higher-level wrappers that facilitate common tasks,
such as uploading or downloading Drive files. The functions here are
intended for internal use and for programming around the Drive API.
</p>
<p><code>request_generate()</code> lets you provide the bare minimum of input.
It takes a nickname for an endpoint and:
</p>

<ul>
<li><p> Uses the API spec to look up the <code>path</code>, <code>method</code>, and base URL.
</p>
</li>
<li><p> Checks <code>params</code> for validity and completeness with respect to the
endpoint. Separates parameters into those destined for the body, the query,
and URL endpoint substitution (which is also enacted).
</p>
</li>
<li><p> Adds an API key to the query if and only if <code>token = NULL</code>.
</p>
</li>
<li><p> Adds <code>supportsAllDrives = TRUE</code> to the query if the endpoint requires.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>request_generate(
  endpoint = character(),
  params = list(),
  key = NULL,
  token = drive_token()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="request_generate_+3A_endpoint">endpoint</code></td>
<td>
<p>Character. Nickname for one of the selected Drive v3 API
endpoints built into googledrive. Learn more in <code><a href="#topic+drive_endpoints">drive_endpoints()</a></code>.</p>
</td></tr>
<tr><td><code id="request_generate_+3A_params">params</code></td>
<td>
<p>Named list. Parameters destined for endpoint URL substitution,
the query, or the body.</p>
</td></tr>
<tr><td><code id="request_generate_+3A_key">key</code></td>
<td>
<p>API key. Needed for requests that don't contain a token. The need
for an API key in the absence of a token is explained in Google's document
&quot;Credentials, access, security, and identity&quot;
(<code style="white-space: pre;">&#8288;https://support.google.com/googleapi/answer/6158857?hl=en&amp;ref_topic=7013279&#8288;</code>).
In order of precedence, these sources are consulted: the formal <code>key</code>
argument, a <code>key</code> parameter in <code>params</code>, a user-configured API key fetched
via <code><a href="#topic+drive_api_key">drive_api_key()</a></code>, a built-in key shipped with googledrive. See
<code><a href="#topic+drive_auth_configure">drive_auth_configure()</a></code> for details on a user-configured key.</p>
</td></tr>
<tr><td><code id="request_generate_+3A_token">token</code></td>
<td>
<p>Drive token. Set to <code>NULL</code> to suppress the inclusion of a token.
Note that, if auth has been de-activated via <code><a href="#topic+drive_deauth">drive_deauth()</a></code>,
<code>drive_token()</code> will actually return <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>list()</code><br /> Components are <code>method</code>, <code>path</code>, <code>query</code>, <code>body</code>,
<code>token</code>, and <code>url</code>, suitable as input for <code><a href="#topic+request_make">request_make()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="gargle.html#topic+request_develop">gargle::request_develop()</a></code>, <code><a href="gargle.html#topic+request_develop">gargle::request_build()</a></code>
</p>
<p>Other low-level API functions: 
<code><a href="#topic+drive_has_token">drive_has_token</a>()</code>,
<code><a href="#topic+drive_token">drive_token</a>()</code>,
<code><a href="#topic+request_make">request_make</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
req &lt;- request_generate(
  "drive.files.get",
  list(fileId = "abc"),
  token = drive_token()
)
req

</code></pre>

<hr>
<h2 id='request_make'>Make a request for the Google Drive v3 API</h2><span id='topic+request_make'></span><span id='topic+do_request'></span><span id='topic+do_paginated_request'></span>

<h3>Description</h3>

<p>Low-level functions to execute one or more Drive API requests and, perhaps,
process the response(s). Most users should, instead, use higher-level
wrappers that facilitate common tasks, such as uploading or downloading Drive
files. The functions here are intended for internal use and for programming
around the Drive API. Three functions are documented here:
</p>

<ul>
<li> <p><code>request_make()</code> does the bare minimum: calls <code><a href="gargle.html#topic+request_make">gargle::request_make()</a></code>,
only adding the googledrive user agent. Typically the input is created
with <code><a href="#topic+request_generate">request_generate()</a></code> and the output is processed with
<code><a href="gargle.html#topic+response_process">gargle::response_process()</a></code>.
</p>
</li>
<li> <p><code>do_request()</code> is simply
<code>gargle::response_process(request_make(x, ...))</code>. It exists only because
we had to make <code>do_paginated_request()</code> and it felt weird to not make the
equivalent for a single request.
</p>
</li>
<li> <p><code>do_paginated_request()</code> executes the input request <strong>with page
traversal</strong>. It is impossible to separate paginated requests into a &quot;make
request&quot; step and a &quot;process request&quot; step, because the token for the
next page must be extracted from the content of the current page.
Therefore this function does both and returns a list of processed
responses, one per page.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>request_make(x, ...)

do_request(x, ...)

do_paginated_request(
  x,
  ...,
  n_max = Inf,
  n = function(res) 1,
  verbose = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="request_make_+3A_x">x</code></td>
<td>
<p>List, holding the components for an HTTP request, presumably created
with <code><a href="#topic+request_generate">request_generate()</a></code> Should contain the <code>method</code>, <code>url</code>, <code>body</code>,
and <code>token</code>.</p>
</td></tr>
<tr><td><code id="request_make_+3A_...">...</code></td>
<td>
<p>Optional arguments passed through to the HTTP method.</p>
</td></tr>
<tr><td><code id="request_make_+3A_n_max">n_max</code></td>
<td>
<p>Maximum number of items to return. Defaults to <code>Inf</code>, i.e. there
is no limit and we keep making requests until we get all items.</p>
</td></tr>
<tr><td><code id="request_make_+3A_n">n</code></td>
<td>
<p>Function that computes the number of items in one response or page.
The default function always returns <code>1</code> and therefore treats each page as
an item. If you know more about the structure of the response, you can
pass another function to count and threshhold, for example, the number of
files or comments.</p>
</td></tr>
<tr><td><code id="request_make_+3A_verbose">verbose</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> This logical argument to
individual googledrive functions is deprecated. To globally suppress
googledrive messaging, use <code>options(googledrive_quiet = TRUE)</code> (the default
behaviour is to emit informational messages). To suppress messaging in a
more limited way, use the helpers <code><a href="#topic+local_drive_quiet">local_drive_quiet()</a></code> or
<code><a href="#topic+with_drive_quiet">with_drive_quiet()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>request_make()</code>: Object of class <code>response</code> from <a href="httr.html#topic+httr">httr</a>.
</p>
<p><code>do_request()</code>: List representing the content returned by a single
request.
</p>
<p><code>do_paginated_request()</code>: List of lists, representing the returned
content, one component per page.
</p>


<h3>See Also</h3>

<p>Other low-level API functions: 
<code><a href="#topic+drive_has_token">drive_has_token</a>()</code>,
<code><a href="#topic+drive_token">drive_token</a>()</code>,
<code><a href="#topic+request_generate">request_generate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# build a request for an endpoint that is:
#   * paginated
#   * NOT privileged in googledrive, i.e. not covered by request_generate()
# "comments" are a great example
# https://developers.google.com/drive/v3/reference/comments
#
# Practice with a target file with &gt; 2 comments
# Note that we request 2 items (comments) per page
req &lt;- gargle::request_build(
  path = "drive/v3/files/{fileId}/comments",
  method = "GET",
  params = list(
    fileId = "your-file-id-goes-here",
    fields = "*",
    pageSize = 2
  ),
  token = googledrive::drive_token()
)
# make the paginated request, but cap it at 1 page
# should get back exactly two comments
do_paginated_request(req, n_max = 1)

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drive_create'>Create a new shared drive</h2><span id='topic+shared_drive_create'></span>

<h3>Description</h3>

<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_drive_create(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shared_drive_create_+3A_name">name</code></td>
<td>
<p>Character. Name of the new shared drive. Must be non-empty and not
entirely whitespace.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per shared drive.
</p>


<h3>See Also</h3>

<p>Wraps the <code>drives.create</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/drives/create">https://developers.google.com/drive/api/v3/reference/drives/create</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
shared_drive_create("my-awesome-shared-drive")

# Clean up
shared_drive_rm("my-awesome-shared-drive")

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drive_find'>Find shared drives</h2><span id='topic+shared_drive_find'></span>

<h3>Description</h3>

<p>This is the closest googledrive function to what you get from
visiting <a href="https://drive.google.com">https://drive.google.com</a> and clicking &quot;Shared drives&quot;.
</p>
<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_drive_find(pattern = NULL, n_max = Inf, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shared_drive_find_+3A_pattern">pattern</code></td>
<td>
<p>Character. If provided, only the items whose names match this
regular expression are returned. This is implemented locally on the results
returned by the API.</p>
</td></tr>
<tr><td><code id="shared_drive_find_+3A_n_max">n_max</code></td>
<td>
<p>Integer. An upper bound on the number of items to return. This
applies to the results requested from the API, which may be further
filtered locally, via the <code>pattern</code> argument.</p>
</td></tr>
<tr><td><code id="shared_drive_find_+3A_...">...</code></td>
<td>
<p>Other parameters to pass along in the request, such as <code>pageSize</code>
or <code>useDomainAdminAccess</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per shared drive.
</p>


<h3>See Also</h3>

<p>Wraps the <code>drives.list</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/drives/list">https://developers.google.com/drive/api/v3/reference/drives/list</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
shared_drive_find()

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drive_get'>Get shared drives by name or id</h2><span id='topic+shared_drive_get'></span>

<h3>Description</h3>

<p>Retrieve metadata for shared drives specified by name or id. Note that Google
Drive does NOT behave like your local file system:
</p>

<ul>
<li><p> You can get zero, one, or more shared drives back for each name! Shared
drive names need not be unique.
</p>
</li></ul>

<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_drive_get(name = NULL, id = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shared_drive_get_+3A_name">name</code></td>
<td>
<p>Character vector of names. A character vector marked with
<code><a href="#topic+as_id">as_id()</a></code> is treated as if it was provided via the <code>id</code> argument.</p>
</td></tr>
<tr><td><code id="shared_drive_get_+3A_id">id</code></td>
<td>
<p>Character vector of shared drive ids or URLs (it is first processed
with <code><a href="#topic+as_id">as_id()</a></code>). If both <code>name</code> and <code>id</code> are non-<code>NULL</code>, <code>id</code> is silently
ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per shared drive.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
shared_drive_get("my-awesome-shared-drive")
shared_drive_get(c("apple", "orange", "banana"))
shared_drive_get(as_id("KCmiHLXUk9PVA-0AJNG"))
shared_drive_get(as_id("https://drive.google.com/drive/u/0/folders/KCmiHLXUk9PVA-0AJNG"))
shared_drive_get(id = "KCmiHLXUk9PVA-0AJNG")
shared_drive_get(id = "https://drive.google.com/drive/u/0/folders/KCmiHLXUk9PVA-0AJNG")

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drive_rm'>Delete shared drives</h2><span id='topic+shared_drive_rm'></span>

<h3>Description</h3>

<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_drive_rm(drive = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shared_drive_rm_+3A_drive">drive</code></td>
<td>
<p>Anything that identifies the shared drive(s) of interest. Can
be a character vector of names, a character vector of file ids or URLs
marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code> consisting only of shared drives.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical vector, indicating whether the delete succeeded.
</p>


<h3>See Also</h3>

<p>Wraps the <code>drives.delete</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/drives/delete">https://developers.google.com/drive/api/v3/reference/drives/delete</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Create shared drives to remove in various ways
shared_drive_create("testdrive-01")
sd02 &lt;- shared_drive_create("testdrive-02")
shared_drive_create("testdrive-03")
sd04 &lt;- shared_drive_create("testdrive-04")

# remove by name
shared_drive_rm("testdrive-01")
# remove by id
shared_drive_rm(as_id(sd02))
# remove by URL (or, rather, id found in URL)
shared_drive_rm(as_id("https://drive.google.com/drive/u/0/folders/Q5DqUk9PVA"))
# remove by dribble
shared_drive_rm(sd04)

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drive_update'>Update a shared drive</h2><span id='topic+shared_drive_update'></span>

<h3>Description</h3>

<p>Update the metadata of an existing shared drive, e.g. its background image or
theme.
</p>
<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives. Learn more about <a href="#topic+shared_drives">shared drives</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shared_drive_update(shared_drive, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shared_drive_update_+3A_shared_drive">shared_drive</code></td>
<td>
<p>Anything that identifies one specific shared drive: its
name, its id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. The value
provided to <code>shared_drive</code> is pre-processed with <code><a href="#topic+as_shared_drive">as_shared_drive()</a></code>. Read
more about <a href="#topic+shared_drives">shared drives</a>.</p>
</td></tr>
<tr><td><code id="shared_drive_update_+3A_...">...</code></td>
<td>
<p>Properties to set in <code>name = value</code> form. See the &quot;Request
body&quot; section of the Drive API docs for this endpoint.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per shared drive.
</p>


<h3>See Also</h3>

<p>Wraps the <code>drives.update</code> endpoint:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/reference/drives/update">https://developers.google.com/drive/api/v3/reference/drives/update</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create a shared drive
sd &lt;- shared_drive_create("I love themes!")

# see the themes available to you
themes &lt;- drive_about()$driveThemes
purrr::map_chr(themes, "id")

# cycle through various themes for this shared drive
sd &lt;- shared_drive_update(sd, themeId = "bok_choy")
sd &lt;- shared_drive_update(sd, themeId = "cocktails")

# Clean up
shared_drive_rm(sd)

## End(Not run)
</code></pre>

<hr>
<h2 id='shared_drives'>Access shared drives</h2><span id='topic+shared_drives'></span>

<h3>Description</h3>

<p>A shared drive supports files owned by an organization rather than an
individual user. Shared drives follow different sharing and ownership models
from a specific user's &quot;My Drive&quot;. Shared drives are the successors to the
earlier concept of Team Drives.
</p>
<p>How to capture a shared drive or files/folders that live on a
shared drive for downstream use:
</p>

<ul>
<li> <p><code><a href="#topic+shared_drive_find">shared_drive_find()</a></code> and <code><a href="#topic+shared_drive_get">shared_drive_get()</a></code> return a <code><a href="#topic+dribble">dribble</a></code> with
metadata on shared drives themselves. You will need this in order to use a
shared drive in certain file operations. For example, you can specify a
shared drive as the parent folder via the <code>path</code> argument for upload, move,
copy, etc. In that context, the id of a shared drive functions like the id of
its top-level or root folder.
</p>
</li>
<li> <p><code><a href="#topic+drive_find">drive_find()</a></code> and <code><a href="#topic+drive_get">drive_get()</a></code> return a <code><a href="#topic+dribble">dribble</a></code> with metadata on
files, including folders. Both can be directed to search for files on shared
drives using the optional arguments <code>shared_drive</code> or <code>corpus</code> (documented
below).
</p>
</li></ul>

<p>Regard the functions mentioned above as the official &quot;port of
entry&quot; for working with shared drives. Use these functions to capture your
target(s) in a <code><a href="#topic+dribble">dribble</a></code> to pass along to other googledrive functions.
The flexibility to refer to files by name or path does not apply as broadly
to shared drives. While it's always a good idea to get things into a
<code><a href="#topic+dribble">dribble</a></code> early, for shared drives it's often required.
</p>


<h3>Specific shared drive</h3>

<p>To search one specific shared drive, pass its name, marked id, or
<code><a href="#topic+dribble">dribble</a></code> to <code>shared_drive</code> somewhere in the call, like so:
</p>
<div class="sourceCode"><pre>drive_find(..., shared_drive = "i_am_a_shared_drive_name")
drive_find(..., shared_drive = as_id("i_am_a_shared_drive_id"))
drive_find(..., shared_drive = i_am_a_shared_drive_dribble)
</pre></div>
<p>The value provided to <code>shared_drive</code> is pre-processed with
<code><a href="#topic+as_shared_drive">as_shared_drive()</a></code>.
</p>


<h3>Other collections</h3>

<p>To search other collections, pass the <code>corpus</code> parameter somewhere in the
call, like so:
</p>
<div class="sourceCode"><pre>drive_find(..., corpus = "user")
drive_find(..., corpus = "allDrives")
drive_find(..., corpus = "domain")
</pre></div>
<p>Possible values of <code>corpus</code> and what they mean:
</p>

<ul>
<li> <p><code>"user"</code>: Queries files that the user has accessed, including both shared
drive and My Drive files.
</p>
</li>
<li> <p><code>"drive"</code>: Queries all items in the shared drive specified via
<code>shared_drive</code>. googledrive automatically fills this in whenever
<code>shared_drive</code> is not <code>NULL</code>.
</p>
</li>
<li> <p><code>"allDrives"</code>: Queries files that the user has accessed and all shared
drives in which they are a member. Note that the response may include
<code>incompleteSearch : true</code>, indicating that some corpora were not searched
for this request (currently, googledrive does not surface this). Prefer
<code>"user"</code> or <code>"drive"</code> to <code>"allDrives"</code> for efficiency.
</p>
</li>
<li> <p><code>"domain"</code>: Queries files that are shared to the domain, including both
shared drive and My Drive files.
</p>
</li></ul>



<h3>Google blogs and docs</h3>

<p>Here is some of the best official Google reading about shared drives:
</p>

<ul>
<li> <p><a href="https://workspaceupdates.googleblog.com/2019/04/shared-drives.html">Team Drives is being renamed to shared drives</a> from Google Workspace blog
</p>
</li>
<li> <p><a href="https://cloud.google.com/blog/products/application-development/upcoming-changes-to-the-google-drive-api-and-google-picker-api">Upcoming changes to the Google Drive API and Google Picker API</a> from the Google Cloud blog
</p>
</li>
<li> <p><a href="https://developers.google.com/drive/api/v3/about-shareddrives">https://developers.google.com/drive/api/v3/about-shareddrives</a>
</p>
</li>
<li> <p><a href="https://developers.google.com/drive/api/v3/shared-drives-diffs">https://developers.google.com/drive/api/v3/shared-drives-diffs</a>
</p>
</li>
<li><p> Get started with shared drives: <code style="white-space: pre;">&#8288;https://support.google.com/a/users/answer/9310351&#8288;</code> from Google Workspace Learning Center
</p>
</li>
<li><p> Best practices for shared drives: <code style="white-space: pre;">&#8288;https://support.google.com/a/users/answer/9310156&#8288;</code> from Google Workspace Learning Center
</p>
</li></ul>



<h3>API docs</h3>

<p>googledrive implements shared drive support as outlined here:
</p>

<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/enable-shareddrives">https://developers.google.com/drive/api/v3/enable-shareddrives</a>
</p>
</li></ul>

<p>Users shouldn't need to know any of this, but here are details for the
curious. The extra information needed to search shared drives consists of the
following query parameters:
</p>

<ul>
<li> <p><code>corpora</code>: Where to search? Formed from googledrive's <code>corpus</code> argument.
</p>
</li>
<li> <p><code>driveId</code>: The id of a specific shared drive. Only allowed &ndash; and also
absolutely required &ndash; when <code>corpora = "drive"</code>. When user specifies a
<code>shared_drive</code>, googledrive sends its id and also infers that <code>corpora</code>
should be set to <code>"drive"</code>.
</p>
</li>
<li> <p><code>includeItemsFromAllDrives</code>: Do you want to see shared drive items?
Obviously, this should be <code>TRUE</code> and googledrive sends this whenever shared
drive parameters are detected.
</p>
</li>
<li> <p><code>supportsAllDrives</code>: Does the sending application (googledrive, in this
case) know about shared drive? Obviously, this should be <code>TRUE</code> and
googledrive sends it for all applicable endpoints, all the time.
</p>
</li></ul>


<hr>
<h2 id='shortcut_create'>Create a shortcut to a Drive file</h2><span id='topic+shortcut_create'></span>

<h3>Description</h3>

<p>Creates a shortcut to the target Drive <code>file</code>, which could be a folder. A
Drive shortcut functions like a symbolic or &quot;soft&quot; link and is primarily
useful for creating a specific Drive user experience in the browser, i.e. to
make a Drive file or folder appear in more than 1 place. Shortcuts are a
relatively new feature in Drive; they were introduced when Drive stopped
allowing a file to have more than 1 parent folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shortcut_create(file, path = NULL, name = NULL, overwrite = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shortcut_create_+3A_file">file</code></td>
<td>
<p>Something that identifies the file of interest on your Google
Drive. Can be a name or path, a file id or URL marked with <code><a href="#topic+as_id">as_id()</a></code>, or a
<code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
<tr><td><code id="shortcut_create_+3A_path">path</code></td>
<td>
<p>Target destination for the new shortcut, i.e. a folder or a
shared drive. Can be given as an actual path (character), a file id or URL
marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>. Defaults to your &quot;My Drive&quot; root
folder. If <code>path</code> is a shortcut to a folder, it is automatically resolved
to its target folder.</p>
</td></tr>
<tr><td><code id="shortcut_create_+3A_name">name</code></td>
<td>
<p>Character, new shortcut name if not specified as part of
<code>path</code>. This will force <code>path</code> to be interpreted as a folder, even if it
is character and lacks a trailing slash. By default, the shortcut starts out with the same name as
the target <code>file</code>. As a consequence, if you want to use
<code>overwrite = TRUE</code> or <code>overwrite = FALSE</code>, you <strong>must</strong> explicitly
specify the shortcut's <code>name</code>.</p>
</td></tr>
<tr><td><code id="shortcut_create_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical, indicating whether to check for a pre-existing file
at the targetted &quot;filepath&quot;. The quotes around &quot;filepath&quot; refer to the fact
that Drive does not impose a 1-to-1 relationship between filepaths and files,
like a typical file system; read more about that in <code><a href="#topic+drive_get">drive_get()</a></code>.
</p>

<ul>
<li> <p><code>NA</code> (default): Just do the operation, even if it results in multiple
files with the same filepath.
</p>
</li>
<li> <p><code>TRUE</code>: Check for a pre-existing file at the filepath. If there is
zero or one, move a pre-existing file to the trash, then carry on. Note
that the new file does not inherit any properties from the old one, such
as sharing or publishing settings. It will have a new file ID. An error is
thrown if two or more pre-existing files are found.
</p>
</li>
<li> <p><code>FALSE</code>: Error if there is any pre-existing file at the filepath.
</p>
</li></ul>

<p>Note that existence checks, based on filepath, are expensive operations, i.e.
they require additional API calls.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
</p>


<h3>See Also</h3>


<ul>
<li> <p><a href="https://developers.google.com/drive/api/v3/shortcuts">https://developers.google.com/drive/api/v3/shortcuts</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Target one of the official example files
(src_file &lt;- drive_example_remote("chicken_sheet"))

# Create a shortcut in the default location with the default name
sc1 &lt;- shortcut_create(src_file)
# This shortcut could now be moved, renamed, etc.

# Create a shortcut in the default location with a custom name
sc2 &lt;- src_file %&gt;%
  shortcut_create(name = "chicken_sheet_second_shortcut")

# Create a folder, then put a shortcut there, with default name
folder &lt;- drive_mkdir("chicken_sheet_shortcut_folder")
sc3 &lt;- src_file %&gt;%
  shortcut_create(folder)

# Look at all these shortcuts
(dat &lt;- drive_find("chicken_sheet", type = "shortcut"))

# Confirm the shortcuts all target the original file
dat &lt;- dat %&gt;%
  drive_reveal("shortcut_details")
purrr::map_chr(dat$shortcut_details, "targetId")
as_id(src_file)

# Clean up
drive_rm(sc1, sc2, sc3, folder)

</code></pre>

<hr>
<h2 id='shortcut_resolve'>Resolve shortcuts to their targets</h2><span id='topic+shortcut_resolve'></span>

<h3>Description</h3>

<p>Retrieves the metadata for the Drive file that a shortcut refers to, i.e. the
shortcut's target. The returned <code><a href="#topic+dribble">dribble</a></code> has the usual columns (<code>name</code>,
<code>id</code>, <code>drive_resource</code>), which refer to the target. It will also include the
columns <code>name_shortcut</code> and <code>id_shortcut</code>, which refer to the original
shortcut. There are 3 possible scenarios:
</p>

<ol>
<li> <p><code>file</code> is a shortcut and user can <code><a href="#topic+drive_get">drive_get()</a></code> the target. All is simple
and well.
</p>
</li>
<li> <p><code>file</code> is a shortcut, but <code><a href="#topic+drive_get">drive_get()</a></code> fails for the target. This can
happen if the user can see the shortcut, but does not have read access
to the target. It can also happen if the target has been trashed or
deleted. In such cases, all of the target's metadata, except for <code>id</code>,
will be missing. Call <code>drive_get()</code> on a problematic <code>id</code> to see the
specific error.
</p>
</li>
<li> <p><code>file</code> is not a shortcut. <code>name_shortcut</code> and <code>id_shortcut</code> will both be
<code>NA</code>.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>shortcut_resolve(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shortcut_resolve_+3A_file">file</code></td>
<td>
<p>Something that identifies the file(s) of interest on your Google
Drive. Can be a character vector of names/paths, a character vector of file
ids or URLs marked with <code><a href="#topic+as_id">as_id()</a></code>, or a <code><a href="#topic+dribble">dribble</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+dribble">dribble</a></code>, a tibble with one row per file.
Extra columns <code>name_shortcut</code> and
<code>id_shortcut</code> refer to the original shortcut.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a file to make a shortcut to
file &lt;- drive_example_remote("chicken_sheet") %&gt;%
  drive_cp(name = "chicken-sheet-for-shortcut")

# Create a shortcut
sc1 &lt;- file %&gt;%
  shortcut_create(name = "shortcut-1")

# Create a second shortcut by copying the first
sc1 &lt;- sc1 %&gt;%
  drive_cp(name = "shortcut-2")

# Get the shortcuts
(sc_dat &lt;- drive_find("-[12]$", type = "shortcut"))

# Resolve them
(resolved &lt;- shortcut_resolve(sc_dat))

resolved$id
file$id

# Delete the target file
drive_rm(file)

# (Try to) resolve the shortcuts again
shortcut_resolve(sc_dat)
# No error, but resolution is unsuccessful due to non-existent target

# Clean up
drive_rm(sc_dat)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
