<!DOCTYPE html><html lang="en"><head><title>Help for package nemsqar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nemsqar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#nemsqar-package'><p>nemsqar: National Emergency Medical Service Quality Alliance Measure Calculations</p></a></li>
<li><a href='#airway_01'><p>Airway-01 Calculation</p></a></li>
<li><a href='#airway_01_population'><p>Airway-01 Population</p></a></li>
<li><a href='#airway_05'><p>Airway-05 Calculation</p></a></li>
<li><a href='#airway_05_population'><p>Airway-05 Population</p></a></li>
<li><a href='#airway_18'><p>Airway-18 Calculation</p></a></li>
<li><a href='#airway_18_population'><p>Airway-18 Populations</p></a></li>
<li><a href='#asthma_01'><p>Asthma-01 Calculation</p></a></li>
<li><a href='#asthma_01_population'><p>Asthma-01 Populations</p></a></li>
<li><a href='#hypoglycemia_01'><p>Hypoglycemia-01</p></a></li>
<li><a href='#hypoglycemia_01_population'><p>Hypoglycemia-01 Populations</p></a></li>
<li><a href='#nemsqa_binomial_confint'><p>Wilson and Clopper-Pearson Confidence Intervals for Binomial</p>
Proportions</a></li>
<li><a href='#nemsqar_airway_table'><p>Synthetic Test Data for eAirway Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_arrest_table'><p>Synthetic Test Data for eArrest Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_disposition_table'><p>Synthetic Test Data for eDisposition Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_exam_table'><p>Synthetic Test Data for eExam Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_injury_table'><p>Synthetic Test Data for eInjury Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_medications_table'><p>Synthetic Test Data for eMedications Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_patient_scene_table'><p>Synthetic ePatient Data from the National Emergency Medical Services</p>
Information System (NEMSIS)</a></li>
<li><a href='#nemsqar_procedures_table'><p>Synthetic eProcedures Data from the National Emergency Medical Services</p>
Information System (NEMSIS)</a></li>
<li><a href='#nemsqar_response_table'><p>Synthetic eResponse Data from the National Emergency Medical Services</p>
Information System (NEMSIS)</a></li>
<li><a href='#nemsqar_situation_table'><p>Synthetic Test Data for eSituation Fields in National EMS Information System</p></a></li>
<li><a href='#nemsqar_vitals_table'><p>Synthetic eVitals Data for NEMSIS from the National Emergency Medical Services</p>
Information System (NEMSIS)</a></li>
<li><a href='#pediatrics_03b'><p>Pediatrics-03B Calculation</p></a></li>
<li><a href='#pediatrics_03b_population'><p>Pediatrics-03B Populations</p></a></li>
<li><a href='#pretty_percent'><p>Format Numeric Variables as Percentages</p></a></li>
<li><a href='#respiratory_01'><p>Respiratory-01 Calculation</p></a></li>
<li><a href='#respiratory_01_population'><p>Respiratory-01 Populations</p></a></li>
<li><a href='#respiratory_02'><p>Respiratory-02 Calculation</p></a></li>
<li><a href='#respiratory_02_population'><p>Respiratory-02 Populations</p></a></li>
<li><a href='#results_summarize'><p>Tabulate Measure Results</p></a></li>
<li><a href='#safety_01'><p>Safety-01 Calculation</p></a></li>
<li><a href='#safety_01_population'><p>Safety-01 Populations</p></a></li>
<li><a href='#safety_02'><p>Safety-02 Calculation</p></a></li>
<li><a href='#safety_02_population'><p>Safety-02 Populations</p></a></li>
<li><a href='#safety_04'><p>Safety-04 Calculation</p></a></li>
<li><a href='#safety_04_population'><p>Safety-04 Populations</p></a></li>
<li><a href='#seizure_02'><p>Seizure-02 Calculation</p></a></li>
<li><a href='#seizure_02_population'><p>Seizure-02 Populations</p></a></li>
<li><a href='#stroke_01'><p>Stroke-01 Calculation</p></a></li>
<li><a href='#stroke_01_population'><p>Stroke-01 Populations</p></a></li>
<li><a href='#summarize_measure'><p>Summarize Measure</p></a></li>
<li><a href='#syncope_01'><p>Syncope-01 Calculation</p></a></li>
<li><a href='#syncope_01_population'><p>Syncope-01 Populations</p></a></li>
<li><a href='#tbi_01'><p>TBI-01 Calculation</p></a></li>
<li><a href='#tbi_01_population'><p>TBI-01 Populations</p></a></li>
<li><a href='#trauma_01'><p>Trauma-01 Calculation</p></a></li>
<li><a href='#trauma_01_population'><p>Trauma-01 Population</p></a></li>
<li><a href='#trauma_03'><p>Trauma-03 Calculation</p></a></li>
<li><a href='#trauma_03_population'><p>Trauma-03 Populations</p></a></li>
<li><a href='#trauma_04'><p>Trauma-04 Calculations</p></a></li>
<li><a href='#trauma_04_population'><p>Trauma-04 Populations</p></a></li>
<li><a href='#trauma_08'><p>Trauma-08 Calculation</p></a></li>
<li><a href='#trauma_08_population'><p>Trauma-08 Populations</p></a></li>
<li><a href='#trauma_14'><p>Trauma-14 Calculation</p></a></li>
<li><a href='#trauma_14_population'><p>Trauma-14 Population</p></a></li>
<li><a href='#ttr_01'><p>TTR-01 Calculation</p></a></li>
<li><a href='#ttr_01_population'><p>TTR-01 Populations</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>National Emergency Medical Service Quality Alliance Measure
Calculations</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Designed to automate the calculation of Emergency Medical Service (EMS) quality metrics, 
             'nemsqar' implements measures defined by the National EMS Quality Alliance (NEMSQA). By providing 
             reliable, evidence-based quality assessments, the package supports EMS agencies, 
             healthcare providers, and researchers in evaluating and improving patient outcomes. 
             Users can find details on all approved NEMSQA measures at <a href="https://www.nemsqa.org/measures">https://www.nemsqa.org/measures</a>. 
             Full technical specifications, including documentation and pseudocode used to develop 
             'nemsqar', are available on the NEMSQA website after creating a user profile at 
             <a href="https://www.nemsqa.org">https://www.nemsqa.org</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), tidyr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bemts-hhs/nemsqar">https://github.com/bemts-hhs/nemsqar</a>,
<a href="https://bemts-hhs.github.io/nemsqar/">https://bemts-hhs.github.io/nemsqar/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bemts-hhs/nemsqar/issues">https://github.com/bemts-hhs/nemsqar/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.6.4), dplyr (&ge; 1.1.4), lifecycle (&ge; 1.0.4),
lubridate (&ge; 1.9.4), rlang (&ge; 1.1.5), stats, tibble (&ge;
3.2.1), tidyselect (&ge; 1.2.1)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>bzip2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-13 16:21:55 UTC; nfoss0</td>
</tr>
<tr>
<td>Author:</td>
<td>Nicolas Foss [aut, cre],
  Samuel Kordik <a href="https://orcid.org/0000-0003-4230-1154"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Alyssa Green [ctb],
  Iowa Department of Health and Human Services [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Nicolas Foss &lt;nicolas.foss@hhs.iowa.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-13 17:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='nemsqar-package'>nemsqar: National Emergency Medical Service Quality Alliance Measure Calculations</h2><span id='topic+nemsqar'></span><span id='topic+nemsqar-package'></span>

<h3>Description</h3>

<p>Designed to automate the calculation of Emergency Medical Service (EMS) quality metrics, 'nemsqar' implements measures defined by the National EMS Quality Alliance (NEMSQA). By providing reliable, evidence-based quality assessments, the package supports EMS agencies, healthcare providers, and researchers in evaluating and improving patient outcomes. Users can find details on all approved NEMSQA measures at <a href="https://www.nemsqa.org/measures">https://www.nemsqa.org/measures</a>. Full technical specifications, including documentation and pseudocode used to develop 'nemsqar', are available on the NEMSQA website after creating a user profile at <a href="https://www.nemsqa.org">https://www.nemsqa.org</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicolas Foss <a href="mailto:nicolas.foss@hhs.iowa.gov">nicolas.foss@hhs.iowa.gov</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Samuel Kordik <a href="mailto:samuel.kordik@utsouthwestern.edu">samuel.kordik@utsouthwestern.edu</a> (<a href="https://orcid.org/0000-0003-4230-1154">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Alyssa Green <a href="mailto:awhim@nemsqa.org">awhim@nemsqa.org</a> [contributor]
</p>
</li>
<li><p> Iowa Department of Health and Human Services [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/bemts-hhs/nemsqar">https://github.com/bemts-hhs/nemsqar</a>
</p>
</li>
<li> <p><a href="https://bemts-hhs.github.io/nemsqar/">https://bemts-hhs.github.io/nemsqar/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bemts-hhs/nemsqar/issues">https://github.com/bemts-hhs/nemsqar/issues</a>
</p>
</li></ul>


<hr>
<h2 id='airway_01'>Airway-01 Calculation</h2><span id='topic+airway_01'></span>

<h3>Description</h3>

<p>Calculates the NEMSQA Airway-01 measure.
</p>
<p>Calculates the proportion of times when the first endotracheal intubation
attempt is successful with no peri-intubation hypoxia or hypotension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  earrest_01_col,
  eresponse_05_col,
  evitals_01_col,
  evitals_06_col,
  evitals_12_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col,
  eprocedures_05_col,
  eprocedures_06_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_01_+3A_df">df</code></td>
<td>
<p>A dataframe or tibble containing EMS data where each row represents
an observation and columns represent features.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient, escene, and earrest.01 fields as a fact table.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data.frame or tibble containing at least the earrest
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A dataframe or tibble containing at least the
eProcedures fields needed.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A dataframe or tibble containing at least the eVitals
fields needed.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minutes&quot;).</p>
</td></tr>
<tr><td><code id="airway_01_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column representing whether or not the patient is in
arrest.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Date-time or POSIXct column containing vital signs
date/time</p>
</td></tr>
<tr><td><code id="airway_01_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Numeric column containing systolic blood pressure
values</p>
</td></tr>
<tr><td><code id="airway_01_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Numeric column containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Date-time or POSIXct column for procedures</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column containing procedure codes with or without
procedure names.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eprocedures_05_col">eprocedures_05_col</code></td>
<td>
<p>Column containing a count for how many times
procedure was attempted.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_eprocedures_06_col">eprocedures_06_col</code></td>
<td>
<p>Column indicating whether or not procedure was
successful.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="airway_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (Adults
and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (Adults and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS, Nicolas Foss Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 22:59:00",
    "2025-01-05 11:58:00", "2025-02-01 18:57:00", "2025-01-01 04:58:00",
    "2025-06-01 12:57:00", "2025-01-01 23:05:00", "2025-01-05 12:04:00",
    "2025-02-01 19:03:00", "2025-01-01 05:02:00", "2025-06-01 13:01:00")),
    evitals_06 = rep(c(90, 100, 102, 103, 104), 2),
    evitals_12 = rep(c(90, 91, 92, 93, 94), 2)

  )

# arrest table
  arrest_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    earrest_01 = rep("No", 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2),
    eprocedures_05 = rep(1, 10),
    eprocedures_06 = rep(9923003, 10)

  )

# Run the function
# Return 95% confidence intervals using the Wilson method
airway_01(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         arrest_table = arrest_table,
         response_table = response_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         eprocedures_05_col = eprocedures_05,
         eprocedures_06_col = eprocedures_06,
         earrest_01_col = earrest_01,
         evitals_01_col = evitals_01,
         evitals_06_col = evitals_06,
         evitals_12_col = evitals_12,
         confidence_interval = TRUE
         )

</code></pre>

<hr>
<h2 id='airway_01_population'>Airway-01 Population</h2><span id='topic+airway_01_population'></span>

<h3>Description</h3>

<p>This function processes and analyzes the dataset to generate the populations
of interest needed to perform calculations to obtain performance data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  earrest_01_col,
  eresponse_05_col,
  evitals_01_col,
  evitals_06_col,
  evitals_12_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col,
  eprocedures_05_col,
  eprocedures_06_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_01_population_+3A_df">df</code></td>
<td>
<p>A dataframe or tibble contianing EMS data where each row represents
an observation and columns represent features.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient, escene, and earrest.01 fields as a fact table.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data.frame or tibble containing at least the earrest
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A dataframe or tibble containing at least the
eProcedures fields needed.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A dataframe or tibble containing at least the eVitals
fields needed.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minutes&quot;).</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column representing whether or not the patient is in
arrest.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Date-time or POSIXct column containing vital signs
date/time</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Numeric column containing systolic blood pressure
values</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Numeric column containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Date-time or POSIXct column for procedures</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column containing procedure codes with or without
procedure names.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eprocedures_05_col">eprocedures_05_col</code></td>
<td>
<p>Column containing a count for how many times
procedure was attempted.</p>
</td></tr>
<tr><td><code id="airway_01_population_+3A_eprocedures_06_col">eprocedures_06_col</code></td>
<td>
<p>Column indicating whether or not procedure was
successful.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS, Nicolas Foss Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 22:59:00",
    "2025-01-05 11:58:00", "2025-02-01 18:57:00", "2025-01-01 04:58:00",
    "2025-06-01 12:57:00", "2025-01-01 23:05:00", "2025-01-05 12:04:00",
    "2025-02-01 19:03:00", "2025-01-01 05:02:00", "2025-06-01 13:01:00")),
    evitals_06 = rep(c(90, 100, 102, 103, 104), 2),
    evitals_12 = rep(c(90, 91, 92, 93, 94), 2)

  )

# arrest table
  arrest_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    earrest_01 = rep("No", 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2),
    eprocedures_05 = rep(1, 10),
    eprocedures_06 = rep(9923003, 10)

  )

# Run the function
result &lt;- airway_01_population(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         arrest_table = arrest_table,
         response_table = response_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         eprocedures_05_col = eprocedures_05,
         eprocedures_06_col = eprocedures_06,
         earrest_01_col = earrest_01,
         evitals_01_col = evitals_01,
         evitals_06_col = evitals_06,
         evitals_12_col = evitals_12
         )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='airway_05'>Airway-05 Calculation</h2><span id='topic+airway_05'></span>

<h3>Description</h3>

<p>Calculates the NEMSQA Airway-05 measure.
</p>
<p>Calculates the proportion of endotracheal intubation attempts with adequate
oxygenation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_05(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  earrest_01_col,
  eresponse_05_col,
  evitals_01_col,
  evitals_12_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_05_+3A_df">df</code></td>
<td>
<p>A dataframe or tibble containing EMS data where each row represents
an observation and columns represent features. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient, escene, and earrest.01 fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data.frame or tibble containing at least the earrest
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A dataframe or tibble containing at least the
eProcedures fields needed. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A dataframe or tibble containing at least the eVitals
fields needed. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minutes&quot;).</p>
</td></tr>
<tr><td><code id="airway_05_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column representing whether or not the patient is in
arrest.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Date-time or POSIXct column containing vital signs
date/time</p>
</td></tr>
<tr><td><code id="airway_05_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Numeric column containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Date-time or POSIXct column for procedures</p>
</td></tr>
<tr><td><code id="airway_05_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column containing procedure codes with or without
procedure names.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="airway_05_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (Adults
and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (Adults and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS, Nicolas Foss Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 22:59:00",
    "2025-01-05 11:58:00", "2025-02-01 18:57:00", "2025-01-01 04:58:00",
    "2025-06-01 12:57:00", "2025-01-01 23:05:00", "2025-01-05 12:04:00",
    "2025-02-01 19:03:00", "2025-01-01 05:02:00", "2025-06-01 13:01:00")),
    evitals_12 = rep(c(94, 95, 96, 97, 98), 2)

  )

# arrest table
  arrest_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    earrest_01 = rep("No", 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2)

  )

# Run the function
# Return 95% confidence intervals using the Wilson method
airway_05(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         arrest_table = arrest_table,
         response_table = response_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         earrest_01_col = earrest_01,
         evitals_01_col = evitals_01,
         evitals_12_col = evitals_12,
         confidence_interval = TRUE
         )

</code></pre>

<hr>
<h2 id='airway_05_population'>Airway-05 Population</h2><span id='topic+airway_05_population'></span>

<h3>Description</h3>

<p>This function processes and analyzes the dataset to generate the populations
of interest needed to perform calculations to obtain performance data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_05_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  earrest_01_col,
  eresponse_05_col,
  evitals_01_col,
  evitals_12_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_05_population_+3A_df">df</code></td>
<td>
<p>A dataframe or tibble contianing EMS data where each row represents
an observation and columns represent features. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient, escene, and earrest.01 fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data.frame or tibble containing at least the earrest
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A dataframe or tibble containing at least the
eProcedures fields needed. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A dataframe or tibble containing at least the eVitals
fields needed. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minutes&quot;).</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column representing whether or not the patient is in
arrest.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Date-time or POSIXct column containing vital signs
date/time</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Numeric column containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Date-time or POSIXct column for procedures</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_05_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column containing procedure codes with or without
procedure names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS, Nicolas Foss Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 22:59:00",
    "2025-01-05 11:58:00", "2025-02-01 18:57:00", "2025-01-01 04:58:00",
    "2025-06-01 12:57:00", "2025-01-01 23:05:00", "2025-01-05 12:04:00",
    "2025-02-01 19:03:00", "2025-01-01 05:02:00", "2025-06-01 13:01:00")),
    evitals_12 = rep(c(90, 91, 92, 93, 94), 2)

  )

# arrest table
  arrest_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    earrest_01 = rep("No", 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2)

  )

# Run the function
result &lt;- airway_05_population(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         arrest_table = arrest_table,
         response_table = response_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         earrest_01_col = earrest_01,
         evitals_01_col = evitals_01,
         evitals_12_col = evitals_12
         )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='airway_18'>Airway-18 Calculation</h2><span id='topic+airway_18'></span>

<h3>Description</h3>

<p>This function processes and analyzes the dataset to calculate the &quot;Airway-18&quot;
NEMSQA metric. It includes cleaning and transforming several columns related
to patient data, airway procedures, and vital signs, and it returns a cleaned
dataset with the relevant calculations. The final calculation is an
assessment of the successful last invasive airway procedures performed during
an EMS response originating from a 911 request in which waveform capnography
is used for tube placement confirmation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_18(
  df = NULL,
  patient_scene_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  airway_table = NULL,
  response_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col,
  eprocedures_06_col,
  eairway_02_col = NULL,
  eairway_04_col = NULL,
  evitals_01_col,
  evitals_16_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_18_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset to be processed.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only ePatient
and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing only the
eProcedures fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the eVitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_airway_table">airway_table</code></td>
<td>
<p>A data frame or tibble containing only the eAirway fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eResponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name containing the unique patient record
identifier.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column name containing the incident date. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column name containing the patient's date of birth.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for patient information (exact purpose
unclear).</p>
</td></tr>
<tr><td><code id="airway_18_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for patient information (exact purpose
unclear).</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for emergency response codes.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Column name for procedure times or other related
data.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name for procedure codes.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eprocedures_06_col">eprocedures_06_col</code></td>
<td>
<p>Column name for procedure success codes.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eairway_02_col">eairway_02_col</code></td>
<td>
<p>Column name for airway procedure data (datetime).
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_eairway_04_col">eairway_04_col</code></td>
<td>
<p>Column name for airway procedure data. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Column name for vital signs data (datetime).</p>
</td></tr>
<tr><td><code id="airway_18_+3A_evitals_16_col">evitals_16_col</code></td>
<td>
<p>Column name for additional vital signs data.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="airway_18_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (Adults
and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (Adults and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS, Samuel Kordik, BBA, BS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 23:02:00",
    "2025-01-05 12:03:00", "2025-02-01 19:04:00", "2025-01-01 05:05:00",
    "2025-06-01 13:01:00", "2025-01-01 23:02:00",
    "2025-01-05 12:03:00", "2025-02-01 19:04:00", "2025-01-01 05:05:00",
    "2025-06-01 13:06:00")),
    evitals_16 = rep(c(5, 6, 7, 8, 9), 2)

  )

  # airway table
  airway_table &lt;- tibble::tibble(
  erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
  eairway_02 = rep(lubridate::as_datetime(c("2025-01-01 23:05:00",
    "2025-01-05 12:02:00", "2025-02-01 19:03:00", "2025-01-01 05:04:00",
    "2025-06-01 13:06:00")), 2),
  eairway_04 = rep(4004019, 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2),
    eprocedures_06 = rep(9923003, 10)

  )

# Run the function
# Return 95% confidence intervals using the Wilson method
airway_18(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         response_table = response_table,
         airway_table = airway_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         eprocedures_06_col = eprocedures_06,
         evitals_01_col = evitals_01,
         evitals_16_col = evitals_16,
         eairway_02_col = eairway_02,
         eairway_04_col = eairway_04,
         confidence_interval = TRUE
         )

</code></pre>

<hr>
<h2 id='airway_18_population'>Airway-18 Populations</h2><span id='topic+airway_18_population'></span>

<h3>Description</h3>

<p>This function processes and analyzes the dataset to generate the populations
of interest needed to perform calculations to obtain performance data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>airway_18_population(
  df = NULL,
  patient_scene_table = NULL,
  procedures_table = NULL,
  vitals_table = NULL,
  airway_table = NULL,
  response_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eprocedures_01_col,
  eprocedures_02_col,
  eprocedures_03_col,
  eprocedures_06_col,
  eairway_02_col = NULL,
  eairway_04_col = NULL,
  evitals_01_col,
  evitals_16_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="airway_18_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset to be processed.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only ePatient
and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing only the
eProcedures fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the eVitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_airway_table">airway_table</code></td>
<td>
<p>A data frame or tibble containing only the eAirway fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eResponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name containing the unique patient record
identifier.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for patient information (exact purpose
unclear).</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for patient information (exact purpose
unclear).</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for emergency response codes.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eprocedures_01_col">eprocedures_01_col</code></td>
<td>
<p>Column name for procedure times or other related
data.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eprocedures_02_col">eprocedures_02_col</code></td>
<td>
<p>Column name for whether or not the procedure was
performed prior to EMS care being provided.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name for procedure codes.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eprocedures_06_col">eprocedures_06_col</code></td>
<td>
<p>Column name for procedure success codes.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eairway_02_col">eairway_02_col</code></td>
<td>
<p>Column name for airway procedure data (datetime).
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_eairway_04_col">eairway_04_col</code></td>
<td>
<p>Column name for airway procedure data. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>Column name for vital signs data (datetime).</p>
</td></tr>
<tr><td><code id="airway_18_population_+3A_evitals_16_col">evitals_16_col</code></td>
<td>
<p>Column name for additional vital signs data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>
<p>Nicolas Foss, Ed.D., MS, Samuel Kordik, BBA, BS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    incident_date = rep(as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")), 2),
    patient_dob = rep(as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
                                "2023-01-01", "1970-06-01")), 2),
    epatient_15 = rep(c(25, 5, 2, 2, 55), 2),  # Ages
    epatient_16 = rep(c("Years", "Years", "Years", "Years", "Years"), 2)

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eresponse_05 = rep(2205001, 10)

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 23:02:00",
    "2025-01-05 12:03:00", "2025-02-01 19:04:00", "2025-01-01 05:05:00",
    "2025-06-01 13:01:00", "2025-01-01 23:02:00",
    "2025-01-05 12:03:00", "2025-02-01 19:04:00", "2025-01-01 05:05:00",
    "2025-06-01 13:06:00")),
    evitals_16 = rep(c(5, 6, 7, 8, 9), 2)

  )

  # airway table
  airway_table &lt;- tibble::tibble(
  erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
  eairway_02 = rep(lubridate::as_datetime(c("2025-01-01 23:05:00",
    "2025-01-05 12:02:00", "2025-02-01 19:03:00", "2025-01-01 05:04:00",
    "2025-06-01 13:06:00")), 2),
  eairway_04 = rep(4004019, 10)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = rep(c("R1", "R2", "R3", "R4", "R5"), 2),
    eprocedures_01 = rep(lubridate::as_datetime(c("2025-01-01 23:00:00",
    "2025-01-05 12:00:00", "2025-02-01 19:00:00", "2025-01-01 05:00:00",
    "2025-06-01 13:00:00")), 2),
    eprocedures_02 = rep("No", 10),
    eprocedures_03 = rep(c(16883004, 112798008, 78121007, 49077009,
                           673005), 2),
    eprocedures_06 = rep(9923003, 10)

  )

# Run the function
result &lt;- airway_18_population(df = NULL,
         patient_scene_table = patient_table,
         procedures_table = procedures_table,
         vitals_table = vitals_table,
         response_table = response_table,
         airway_table = airway_table,
         erecord_01_col = erecord_01,
         incident_date_col = incident_date,
         patient_DOB_col = patient_dob,
         epatient_15_col = epatient_15,
         epatient_16_col = epatient_16,
         eresponse_05_col = eresponse_05,
         eprocedures_01_col = eprocedures_01,
         eprocedures_02_col = eprocedures_02,
         eprocedures_03_col = eprocedures_03,
         eprocedures_06_col = eprocedures_06,
         evitals_01_col = evitals_01,
         evitals_16_col = evitals_16,
         eairway_02_col = eairway_02,
         eairway_04_col = eairway_04
         )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='asthma_01'>Asthma-01 Calculation</h2><span id='topic+asthma_01'></span>

<h3>Description</h3>

<p>Calculates the NEMSQA Asthma-01 measure.
</p>
<p>Calculates key statistics related to asthma-related incidents in an EMS
dataset, specifically focusing on cases where 911 was called for respiratory
distress, and certain medications were administered. This function segments
the data by age into adult and pediatric populations, computing the
proportion of cases that received beta-agonist treatment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asthma_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  emedications_03_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="asthma_01_+3A_df">df</code></td>
<td>
<p>A data.frame or tibble containing EMS data. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
ePatient and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eResponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eSituation fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eMedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minute&quot;).</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column that contains eSituation.11.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column that contains all eSituation.12 values as a
single comma-separated list.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column that contains all eMedications.03 values as
a single comma-separated list.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
test_data &lt;- tibble::tibble(
  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  epatient_15 = c(34, 5, 45, 2, 60),  # Ages
  epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
  eresponse_05 = rep(2205001, 5),
  esituation_11 = c("Respiratory Distress", "Respiratory Distress",
  "Chest Pain", "Respiratory Distress", "Respiratory Distress"),
  esituation_12 = c("Asthma", "Asthma", "Other condition", "Asthma", "Asthma"),
  emedications_03 = c("Albuterol", "Albuterol", "Epinephrine", "None",
  "Albuterol")
)

# Run the function
# Return 95% confidence intervals using the Wilson method
asthma_01(
  df = test_data,
  erecord_01_col = erecord_01,
  epatient_15_col = epatient_15,
  epatient_16_col = epatient_16,
  eresponse_05_col = eresponse_05,
  esituation_11_col = esituation_11,
  esituation_12_col = esituation_12,
  emedications_03_col = emedications_03,
  confidence_interval = TRUE
)

</code></pre>

<hr>
<h2 id='asthma_01_population'>Asthma-01 Populations</h2><span id='topic+asthma_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Asthma-01, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to asthma-related incidents in an EMS
dataset, specifically focusing on cases where 911 was called for respiratory
distress, and certain medications were administered. This function segments
the data by age into adult and pediatric populations, computing the
proportion of cases that received beta-agonist treatment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asthma_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  emedications_03_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="asthma_01_population_+3A_df">df</code></td>
<td>
<p>A data.frame or tibble containing EMS data. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
ePatient and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eResponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eSituation fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eMedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minute&quot;).</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column that contains eResponse.05.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column that contains eSituation.11 provider primary
impression data.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column that contains all eSituation.12 values as
(possible a single comma-separated list), provider secondary impression
data.</p>
</td></tr>
<tr><td><code id="asthma_01_population_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column that contains all eMedications.03 values as
a single comma-separated list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# If you are sourcing your data from a SQL database connection
# or if you have your data in several different tables,
# you can pass table inputs versus a single data.frame or tibble

# create tables to test correct functioning

# patient table
patient_table &lt;- tibble::tibble(

  erecord_01 = 1:3,
  incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01")),
  patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-01-01")),
  epatient_15 = c(25, 5, 2),
  epatient_16 = c("years", "years", "months")

)

# response table
response_table &lt;- tibble::tibble(

  erecord_01 = 1:3,
  eresponse_05 = c("2205001", "2205009", "2205003")

)

# situation table
situation_table &lt;- tibble::tibble(

  erecord_01 = 1:3,
  esituation_11 = c("weakness", "asthma", "bronchospasm"),
  esituation_12 = c("asthma", "weakness", "weakness")
)

# medications table
medications_table &lt;- tibble::tibble(

  erecord_01 = 1:3,
  emedications_03 = c("albuterol", "levalbuterol", "metaproterenol")

)

# test the success of the function
result &lt;- asthma_01_population(patient_scene_table = patient_table,
                               response_table = response_table,
                               situation_table = situation_table,
                               medications_table = medications_table,
                               erecord_01_col = erecord_01,
                               incident_date_col = incident_date,
                               patient_DOB_col = patient_dob,
                               epatient_15_col = epatient_15,
                               epatient_16_col = epatient_16,
                               eresponse_05_col = eresponse_05,
                               esituation_11_col = esituation_11,
                               esituation_12_col = esituation_12,
                               emedications_03_col = emedications_03
                               )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='hypoglycemia_01'>Hypoglycemia-01</h2><span id='topic+hypoglycemia_01'></span>

<h3>Description</h3>

<p>The <code>hypoglycemia_01</code> function calculates the NEMSQA measure evaluating how
often hypoglycemic patients with altered mental status receive hypoglycemia
treatment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hypoglycemia_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  medications_table = NULL,
  procedures_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_18_col,
  evitals_23_col,
  evitals_26_col,
  emedications_03_col,
  eprocedures_03_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hypoglycemia_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing emergency response records.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
ePatient and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eResponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eSituation fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the eVitals
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eMedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eProcedures fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column representing the unique record identifier.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minute&quot;).</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response type codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column for primary impression fields, containing
ICD-10 codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column for secondary impression fields, containing
ICD-10 codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_evitals_18_col">evitals_18_col</code></td>
<td>
<p>Column for blood glucose levels.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column for Glasgow Coma Scale (GCS) scores.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column for AVPU alertness levels.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column for administered medications.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column for procedures performed.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
test_data &lt;- tibble::tibble(
  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  epatient_15 = c(34, 5, 45, 2, 60),  # Ages
  epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
  eresponse_05 = rep(2205001, 5),
  esituation_11 = c(rep("E13.64", 3), rep("E16.2", 2)),
  esituation_12 = c(rep("E13.64", 2), rep("E16.2", 3)),
  emedications_03 = c(372326, 376937,
                      377980, 4850,
                      4832),
  evitals_18 = c(60, 59, 58, 57, 56),
  evitals_23 = c(16, 15, 14, 13, 12),
  evitals_26 = c("Alert", "Painful", "Verbal", "Unresponsive", "Alert"),
  eprocedures_03 = rep("710925007", 5)
)

# Run the function
# Return 95% confidence intervals using the Wilson method
hypoglycemia_01(
  df = test_data,
  erecord_01_col = erecord_01,
  epatient_15_col = epatient_15,
  epatient_16_col = epatient_16,
  eresponse_05_col = eresponse_05,
  esituation_11_col = esituation_11,
  esituation_12_col = esituation_12,
  emedications_03_col = emedications_03,
  evitals_18_col = evitals_18,
  evitals_23_col = evitals_23,
  evitals_26_col = evitals_26,
  eprocedures_03_col = eprocedures_03,
  confidence_interval = TRUE
)

</code></pre>

<hr>
<h2 id='hypoglycemia_01_population'>Hypoglycemia-01 Populations</h2><span id='topic+hypoglycemia_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Hypoglycemia-01, and
categorizes records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to diabetes/hypoglycemia incidents in an
EMS dataset, specifically focusing on cases where 911 was called for
diabetes/hypoglycemia distress, certain medications were administered, and a
weight is taken. This function segments the data into pediatric populations,
computing the proportion of cases that have a documented weight.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hypoglycemia_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  medications_table = NULL,
  procedures_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_18_col,
  evitals_23_col,
  evitals_26_col,
  emedications_03_col,
  eprocedures_03_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="hypoglycemia_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing emergency response records.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
esituation fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the evitals
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
emedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eprocedures fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column representing the unique record identifier.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient's numeric age agnostic
of unit.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column representing the patient's age unit (&quot;Years&quot;,
&quot;Months&quot;, &quot;Days&quot;, &quot;Hours&quot;, or &quot;Minute&quot;).</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response type codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column for primary impression fields, containing
ICD-10 codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column for secondary impression fields, containing
ICD-10 codes.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_evitals_18_col">evitals_18_col</code></td>
<td>
<p>Column for blood glucose levels.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column for Glasgow Coma Scale (GCS) scores.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column for AVPU alertness levels.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column for administered medications.</p>
</td></tr>
<tr><td><code id="hypoglycemia_01_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column for procedures performed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

# patient table
patient_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
  "2025-01-01", "2025-06-01")),
  patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
  "2023-01-01", "1970-06-01")),
  epatient_15 = c(25, 5, 2, 2, 55),  # Ages
  epatient_16 = c("Years", "Years", "Years", "Years", "Years")

)

# response table
response_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  eresponse_05 = rep(2205001, 5)

)

# situation table
situation_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  esituation_11 = c(rep("E13.64", 3), rep("E16.2", 2)),
  esituation_12 = c(rep("E13.64", 2), rep("E16.2", 3))
)

# medications table
medications_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  emedications_03 = c(372326, 376937, 377980, 4850, 4832),

)

# vitals table
vitals_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  evitals_18 = c(60, 59, 58, 57, 56),
  evitals_23 = c(16, 15, 14, 13, 12),
  evitals_26 = c("Alert", "Painful", "Verbal", "Unresponsive", "Alert")

)

# procedures table
procedures_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  eprocedures_03 = rep("710925007", 5)

)

# test the success of the function
result &lt;- hypoglycemia_01_population(patient_scene_table = patient_table,
                            response_table = response_table,
                            situation_table = situation_table,
                            medications_table = medications_table,
                            vitals_table = vitals_table,
                            procedures_table = procedures_table,
                            erecord_01_col = erecord_01,
                            incident_date_col = incident_date,
                            patient_DOB_col = patient_dob,
                            epatient_15_col = epatient_15,
                            epatient_16_col = epatient_16,
                            eresponse_05_col = eresponse_05,
                            esituation_11_col = esituation_11,
                            esituation_12_col = esituation_12,
                            emedications_03_col = emedications_03,
                            evitals_18_col = evitals_18,
                            evitals_23_col = evitals_23,
                            evitals_26_col = evitals_26,
                            eprocedures_03_col = eprocedures_03
                            )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='nemsqa_binomial_confint'>Wilson and Clopper-Pearson Confidence Intervals for Binomial
Proportions</h2><span id='topic+nemsqa_binomial_confint'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Computes confidence intervals for binomial proportions using either the
Wilson or Clopper-Pearson method. This function supports vectorized
operations and allows optional correction for continuity. The Wilson interval
is computed using <code>stats::prop.test()</code>, while the Clopper-Pearson interval is
computed using <code>stats::binom.test()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nemsqa_binomial_confint(
  data = NULL,
  x,
  n,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nemsqa_binomial_confint_+3A_data">data</code></td>
<td>
<p>An optional <code>tibble</code> or <code>data.frame</code> containing the variables <code>x</code>
and <code>n</code>. If provided, <code>x</code> and <code>n</code> should be column names.</p>
</td></tr>
<tr><td><code id="nemsqa_binomial_confint_+3A_x">x</code></td>
<td>
<p>Numeric vector or column name (if <code>data</code> is provided) representing
the number of successes.</p>
</td></tr>
<tr><td><code id="nemsqa_binomial_confint_+3A_n">n</code></td>
<td>
<p>Numeric vector or column name (if <code>data</code> is provided) representing
the total number of trials.</p>
</td></tr>
<tr><td><code id="nemsqa_binomial_confint_+3A_method">method</code></td>
<td>
<p>Character string specifying the confidence interval method.
Must be either &quot;wilson&quot; (default) or &quot;clopper-pearson&quot;.</p>
</td></tr>
<tr><td><code id="nemsqa_binomial_confint_+3A_conf.level">conf.level</code></td>
<td>
<p>Numeric value between 0 and 1 indicating the confidence
level. Defaults to 0.95 (95% confidence interval).</p>
</td></tr>
<tr><td><code id="nemsqa_binomial_confint_+3A_correct">correct</code></td>
<td>
<p>Logical, indicating whether to apply continuity correction for
Wilson intervals. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Wilson confidence interval is calculated using <code>stats::prop.test()</code>,
which provides an improved approximation to the binomial proportion
confidence interval by avoiding the instability of the Wald interval (Wilson,
1927). The Clopper-Pearson interval, computed using <code>stats::binom.test()</code>, is
an exact method based on the cumulative probabilities of the binomial
distribution (Clopper &amp; Pearson, 1934).
</p>
<p>The use of <code>match.arg()</code> within <code>nemsqar::nemsqa_binomial_confint()</code> allows
users to specify the method using partial matching, meaning they can enter
just &quot;w&quot; instead of &quot;wilson&quot; or &quot;c&quot; instead of &quot;clopper-pearson&quot;.
</p>


<h3>Value</h3>

<p>A <code>tibble</code> containing the estimated proportion (<code>prop</code>), lower confidence
interval (<code>lower_ci</code>), upper confidence interval (<code>upper_ci</code>), and a
formatted proportion label (<code>prop_label</code>). If <code>data</code> is provided, these
columns are appended to <code>data</code> via <code>dplyr::bind_cols()</code>.
</p>


<h3>References</h3>

<p>Clopper, C. J. &amp; Pearson, E. S. (1934). The use of confidence or fiducial
limits illustrated in the case of the binomial. Biometrika, 26, 404413.
<a href="doi:10.2307/2331986">doi:10.2307/2331986</a>.
</p>
<p>Wilson, E.B. (1927). Probable inference, the law of succession, and
statistical inference. Journal of the American Statistical Association, 22,
209212. <a href="doi:10.2307/2276774">doi:10.2307/2276774</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example without a data frame
nemsqa_binomial_confint(data = NULL,
                        x = c(5, 10, 20),
                        n = c(50, 100, 200),
                        method = "wilson"
                        )

# Example with a data.frame
data &lt;- data.frame(successes = c(5, 10, 20), trials = c(50, 100, 200))
nemsqa_binomial_confint(data,
                        x = successes,
                        n = trials,
                        method = "clopper-pearson"
                        )

</code></pre>

<hr>
<h2 id='nemsqar_airway_table'>Synthetic Test Data for eAirway Fields in National EMS Information System</h2><span id='topic+nemsqar_airway_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for the airway-related fields
in the National EMS Information System (NEMSIS). It is not specific to any single function
but can be used to test multiple functions in the <code>nemsqar</code> package. Users are encouraged to
experiment with this dataset, but results should not be interpreted as meaningful. Some
outputs may be nonsensical, which is expected since this data is only intended to demonstrate
the expected structure of input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_airway_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 8 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Airway Indications For Invasive Management List (eAirway.01)</dt><dd><p>List of indications for invasive airway management (character).</p>
</dd>
<dt>Airway Device Placement Confirmation Date Time (eAirway.02)</dt><dd><p>Timestamp of airway device placement confirmation (datetime).</p>
</dd>
<dt>Airway Device Being Confirmed (eAirway.03)</dt><dd><p>Type of airway device being confirmed (character).</p>
</dd>
<dt>Patient Airway Device Being Confirmed List (eAirway.03)</dt><dd><p>List of airway devices being confirmed (character).</p>
</dd>
<dt>Airway Device Placement Confirmed Method (eAirway.04)</dt><dd><p>Primary method used to confirm airway device placement (character).</p>
</dd>
<dt>Airway Device Placement Confirmed Method List (eAirway.04)</dt><dd><p>List of methods used to confirm airway device placement (character).</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_airway_table)
head(nemsqar_airway_table)

</code></pre>

<hr>
<h2 id='nemsqar_arrest_table'>Synthetic Test Data for eArrest Fields in National EMS Information System</h2><span id='topic+nemsqar_arrest_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for the cardiac arrest-related fields
in the National EMS Information System (NEMSIS). It is not specific to any single function
but can be used to test multiple functions in the <code>nemsqar</code> package. Users are encouraged to
experiment with this dataset, but results should not be interpreted as meaningful. Some
outputs may be nonsensical, which is expected since this data is only intended to demonstrate
the expected structure of input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_arrest_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 28 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Cardiac Arrest During EMS Event With Code (eArrest.01)</dt><dd><p>Indicates whether cardiac arrest occurred during the EMS event (character).</p>
</dd>
<dt>Cardiac Arrest Etiology With Code (eArrest.02)</dt><dd><p>Suspected cause of the cardiac arrest (character).</p>
</dd>
<dt>Cardiac Arrest Indications Resuscitation Attempted By EMS (eArrest.03)</dt><dd><p>Whether resuscitation was attempted by EMS (character).</p>
</dd>
<dt>Cardiac Arrest Indications Resuscitation Attempted By EMS With Code List (eArrest.03)</dt><dd><p>Detailed reasons for resuscitation decisions (character).</p>
</dd>
<dt>Cardiac Arrest Witnessed By (eArrest.04)</dt><dd><p>Who witnessed the cardiac arrest (character).</p>
</dd>
<dt>Cardiac Arrest Witnessed By List (eArrest.04)</dt><dd><p>List of all witnesses to the cardiac arrest (character).</p>
</dd>
<dt>Cardiac Arrest CPR Provided Prior To EMS Arrival (3.4=eArrest.05/3.5=itArrest.105)</dt><dd><p>Whether CPR was provided before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest Who Provided CPR Prior To EMS (3.4=eArrest.06/3.5=itArrest.106)</dt><dd><p>Who performed CPR before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest Who Provided CPR Prior To EMS Arrival With Code List (3.4=eArrest.06/3.5=itArrest.106)</dt><dd><p>List of responders who provided CPR before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest AED Use Prior To EMS Arrival (eArrest.07)</dt><dd><p>Whether an AED was used before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest Who Used AED Prior To EMS (3.4=eArrest.08/3.5=itArrest.108)</dt><dd><p>Who used the AED before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest Who Used AED Prior To EMS Arrival With Code List (3.4=eArrest.08/3.5=itArrest.108)</dt><dd><p>List of responders who used the AED before EMS arrival (character).</p>
</dd>
<dt>Cardiac Arrest Type Of CPR Provided List (eArrest.09)</dt><dd><p>List of types of CPR performed (character).</p>
</dd>
<dt>Cardiac Arrest First Monitored Arrest Rhythm Of Patient (eArrest.11)</dt><dd><p>First recorded cardiac rhythm during arrest (character).</p>
</dd>
<dt>Cardiac Arrest First Monitored Arrest Rhythm Of Patient With Code (eArrest.11)</dt><dd><p>Coded representation of the first monitored cardiac rhythm (character).</p>
</dd>
<dt>Cardiac Arrest Any Return Of Spontaneous Circulation (eArrest.12)</dt><dd><p>Whether the patient regained spontaneous circulation (character).</p>
</dd>
<dt>Cardiac Arrest Any Return Of Spontaneous Circulation With Code List (eArrest.12)</dt><dd><p>List of codes indicating ROSC status (character).</p>
</dd>
<dt>Cardiac Arrest Date Time (eArrest.14)</dt><dd><p>Timestamp of cardiac arrest occurrence (datetime).</p>
</dd>
<dt>Cardiac Arrest Resuscitation Discontinued Date Time (eArrest.15)</dt><dd><p>Timestamp of resuscitation discontinuation (datetime).</p>
</dd>
<dt>Cardiac Arrest Reason CPR Resuscitation Discontinued (eArrest.16)</dt><dd><p>Reason for discontinuing resuscitation (character).</p>
</dd>
<dt>Cardiac Arrest Rhythm On Arrival At Destination List (eArrest.17)</dt><dd><p>Recorded cardiac rhythm upon arrival at the destination (character).</p>
</dd>
<dt>Cardiac Arrest Patient Outcome At End Of EMS Event (eArrest.18)</dt><dd><p>Patient's condition at the end of the EMS event (character).</p>
</dd>
<dt>Cardiac Arrest Initial CPR Date Time (eArrest.19)</dt><dd><p>Timestamp of initial CPR administration (datetime).</p>
</dd>
<dt>Cardiac Arrest Who Initiated CPR With Code (3.4=itArrest.008/3.5=eArrest.20)</dt><dd><p>Who initiated CPR (character).</p>
</dd>
<dt>Cardiac Who First Applied The AED (3.4=itArrest.015/3.5=eArrest.21)</dt><dd><p>Who first applied the AED (character).</p>
</dd>
<dt>Cardiac Who First Defibrillated The Patient (3.4=itArrest.013/3.5=eArrest.22)</dt><dd><p>Who performed the first defibrillation (character).</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_arrest_table)
head(nemsqar_arrest_table)

</code></pre>

<hr>
<h2 id='nemsqar_disposition_table'>Synthetic Test Data for eDisposition Fields in National EMS Information System</h2><span id='topic+nemsqar_disposition_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for evaluating disposition-related
functions in the <code>nemsqar</code> package. It includes key variables related to patient
disposition, transport mode, hospital capabilities, and team pre-arrival alerts.
The dataset is intended to assist users in testing the expected input structure
for disposition-related measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_disposition_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 13 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Disposition Position Of Patient During Transport List (eDisposition.14)</dt><dd><p>Position of the patient during transport (character).</p>
</dd>
<dt>Disposition Additional Transport Mode Descriptor (eDisposition.18)</dt><dd><p>Additional transport mode details (character).</p>
</dd>
<dt>Disposition Additional Transport Mode Descriptor List (eDisposition.18)</dt><dd><p>List of additional transport mode descriptors (character).</p>
</dd>
<dt>Hospital Capability (3.4=itDisposition.105/3.5=eDisposition.23)</dt><dd><p>Primary hospital capability associated with the incident (character).</p>
</dd>
<dt>Hospital Capability List (3.4=itDisposition.105/3.5=eDisposition.23)</dt><dd><p>List of hospital capabilities at the destination facility (character).</p>
</dd>
<dt>Disposition Team Pre Arrival Alert (eDisposition.24)</dt><dd><p>Indicates whether a pre-arrival alert was triggered for the team (character).</p>
</dd>
<dt>Disposition Destination Team Pre-arrival Alert Activation (eDisposition.24)</dt><dd><p>Indicates the specific type of pre-arrival alert activated (character).</p>
</dd>
<dt>Destination Trauma General Team Pre-arrival Activation (eDisposition.24)</dt><dd><p>Indicates whether a general trauma team was activated pre-arrival (logical).</p>
</dd>
<dt>Patient Evaluation/Care (3.4=itDisposition.100/3.5=eDisposition.28)</dt><dd><p>Evaluation or care provided to the patient (character).</p>
</dd>
<dt>Transport Disposition (3.4=itDisposition.102/3.5=eDisposition.30)</dt><dd><p>Final transport disposition of the patient (character).</p>
</dd>
<dt>Disposition Incident Patient Disposition With Code (3.4=eDisposition.12/3.5=itDisposition.112)</dt><dd><p>Final disposition of the patient, including standardized codes (character).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to test these functions with this dataset, but results
should not be interpreted as meaningful. Some outputs may be nonsensical,
which is expected since this data is only intended to demonstrate the
expected structure of input data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_disposition_table)
head(nemsqar_disposition_table)

</code></pre>

<hr>
<h2 id='nemsqar_exam_table'>Synthetic Test Data for eExam Fields in National EMS Information System</h2><span id='topic+nemsqar_exam_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for evaluating patient
examination-related functions in the <code>nemsqar</code> package. It includes key
variables related to patient weight, assessment findings, lung and chest
examinations, and neurological assessments.
The dataset is intended to assist users in testing the expected input structure
for examination-related measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_exam_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 11 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Patient Weight In Kilograms (eExam.01)</dt><dd><p>Patient's weight in kilograms (numeric).</p>
</dd>
<dt>Patient Length Based Color (eExam.02)</dt><dd><p>Color coding based on patient length for pediatric patients (character).</p>
</dd>
<dt>Patient Assessment Date Time (eExam.03)</dt><dd><p>Timestamp for patient assessment (datetime).</p>
</dd>
<dt>Patient Extremity Assessment Findings List (eExam.16)</dt><dd><p>List of findings related to extremity assessment (character).</p>
</dd>
<dt>Patient Neurological Assessment Findings List (eExam.20)</dt><dd><p>List of neurological assessment findings (character).</p>
</dd>
<dt>Patient Lung Assessment Finding Location (3.4=itExam.099/3.5=eExam.22)</dt><dd><p>Location of lung assessment findings (character).</p>
</dd>
<dt>Patient Lung Assessment Findings List (3.4=itExam.100/3.5=eExam.23)</dt><dd><p>List of lung assessment findings (character).</p>
</dd>
<dt>Patient ChestExclusive Assessment Finding Location (3.4=itExam.101/3.5=eExam.24)</dt><dd><p>Location of chest-exclusive assessment findings (character).</p>
</dd>
<dt>Patient ChestExclusive Assessment Findings List (3.4=itExam.102/3.5=eExam.25)</dt><dd><p>List of chest-exclusive assessment findings (character).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to test these functions with this dataset, but results
should not be interpreted as meaningful. Some outputs may be nonsensical,
which is expected since this data is only intended to demonstrate the
expected structure of input data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_exam_table)
head(nemsqar_exam_table)

</code></pre>

<hr>
<h2 id='nemsqar_injury_table'>Synthetic Test Data for eInjury Fields in National EMS Information System</h2><span id='topic+nemsqar_injury_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for evaluating injury-related
functions in the <code>nemsqar</code> package. It includes key variables related to the
cause of injury, trauma triage criteria, vehicular risk factors, and height of falls.
The dataset is intended to assist users in testing the expected input structure
for injury-related measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_injury_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 8 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Injury Cause of Injury (eInjury.01)</dt><dd><p>General description of the cause of injury (character).</p>
</dd>
<dt>Injury Cause Of Injury Description And Code List (eInjury.01)</dt><dd><p>Detailed description and coding of injury causes (character).</p>
</dd>
<dt>Injury Trauma Center/Triage Criteria (Steps 1 and 2) List (eInjury.03)</dt><dd><p>List of trauma triage criteria met in Steps 1 and 2 (character).</p>
</dd>
<dt>Injury Vehicular Pedestrian Or Other Injury Risk Factor/Triage Criteria (Steps 3 and 4) (eInjury.04)</dt><dd><p>Primary vehicular or other risk factors for injury (character).</p>
</dd>
<dt>Injury Vehicular Pedestrian Or Other Injury Risk Factor/Triage Criteria (Steps 3 and 4) List (eInjury.04)</dt><dd><p>Detailed list of vehicular or pedestrian injury risk factors (character).</p>
</dd>
<dt>Injury Height Of Fall In Feet (eInjury.09)</dt><dd><p>Height of fall in feet when applicable (numeric).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to test these functions with this dataset, but results
should not be interpreted as meaningful. Some outputs may be nonsensical,
which is expected since this data is only intended to demonstrate the
expected structure of input data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_injury_table)
head(nemsqar_injury_table)

</code></pre>

<hr>
<h2 id='nemsqar_medications_table'>Synthetic Test Data for eMedications Fields in National EMS Information System</h2><span id='topic+nemsqar_medications_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for evaluating medication-related
functions in the <code>nemsqar</code> package. It includes key variables related to medication
administration, timing, route, and standardized coding. The dataset is designed to
assist users in testing the expected input structure for medication-related measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_medications_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 8 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Medication Administered Date Time (eMedications.01)</dt><dd><p>Date and time the medication was administered (datetime).</p>
</dd>
<dt>Medication Administered Prior To EMS Unit Care (eMedications.02)</dt><dd><p>Indicator of whether medication was administered before EMS arrival (character).</p>
</dd>
<dt>Medication Given or Administered Description And RXCUI Code (eMedications.03)</dt><dd><p>Name of medication administered with its associated RXCUI code (character).</p>
</dd>
<dt>Patient Medication Given or Administered Description And RXCUI Codes List (eMedications.03)</dt><dd><p>List of all medications administered with RXCUI codes (character).</p>
</dd>
<dt>Medication Administered Route (eMedications.04)</dt><dd><p>Method by which the medication was administered (character).</p>
</dd>
<dt>Medication Administered Route Code (eMedications.04)</dt><dd><p>Standardized code for medication administration route (character).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to test these functions with this dataset, but results
should not be interpreted as meaningful. Some outputs may be nonsensical,
which is expected since this data is only intended to demonstrate the
expected structure of input data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_medications_table)
head(nemsqar_medications_table)

</code></pre>

<hr>
<h2 id='nemsqar_patient_scene_table'>Synthetic ePatient Data from the National Emergency Medical Services
Information System (NEMSIS)</h2><span id='topic+nemsqar_patient_scene_table'></span>

<h3>Description</h3>

<p>This dataset provides synthetic patient information from the
ePatient section of the National Emergency Medical Services Information
System (NEMSIS). It contains example patient demographics and scene-related
details that can be used for testing various functions within the <code>nemsqar</code>
package. Users are encouraged to test these functions with this dataset, but
results should not be interpreted as meaningful. Some outputs may be
nonsensical, which is expected since this data is only intended to
demonstrate the expected structure of input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nemsqar_patient_scene_table
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 6 variables:
</p>

<dl>
<dt><code style="white-space: pre;">&#8288;Incident Patient Care Report Number - PCR (eRecord.01)&#8288;</code></dt><dd><p>(chr) Unique identifier for the patient care report.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Incident Date&#8288;</code></dt><dd><p>(date) The date of the EMS incident.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Patient Age (ePatient.15)&#8288;</code></dt><dd><p>(dbl) Patient's age at the time of the incident.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Patient Age Units (ePatient.16)&#8288;</code></dt><dd><p>(chr) The units of measurement for patient age (e.g., Years, Months, Hours, etc.).</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Patient Date Of Birth (ePatient.17)&#8288;</code></dt><dd><p>(date) The patient's date of birth.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Patient Gender (ePatient.13)&#8288;</code></dt><dd><p>(chr) The patient's gender as recorded in the EMS report.</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data in this table are entirely synthetic and intended solely
for testing purposes. These data do not represent real patients, incidents,
or outcomes and should not be used for research or operational
decision-making.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_patient_scene_table)
dplyr::glimpse(nemsqar_patient_scene_table)

</code></pre>

<hr>
<h2 id='nemsqar_procedures_table'>Synthetic eProcedures Data from the National Emergency Medical Services
Information System (NEMSIS)</h2><span id='topic+nemsqar_procedures_table'></span>

<h3>Description</h3>

<p>This dataset provides synthetic procedure-related information from the
eProcedures section of the National Emergency Medical Services Information
System (NEMSIS). It contains example procedure details that can be used for
testing various functions within the <code>nemsqar</code> package. Users are encouraged
to test these functions with this dataset, but results should not be
interpreted as meaningful. Some outputs may be nonsensical, which is expected
since this data is only intended to demonstrate the expected structure of
input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nemsqar_procedures_table
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 8 variables:
</p>

<dl>
<dt><code style="white-space: pre;">&#8288;Incident Patient Care Report Number - PCR (eRecord.01)&#8288;</code></dt><dd><p>(chr) Unique identifier for the patient care report.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Incident Date&#8288;</code></dt><dd><p>(date) The date of the EMS incident.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Procedure Performed Date Time (eProcedures.01)&#8288;</code></dt><dd><p>(dttm) The date and time the procedure was performed.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Procedure Performed Prior To EMS Care (eProcedures.02)&#8288;</code></dt><dd><p>(chr) Indicates whether the procedure was performed before EMS arrival.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Procedure Performed Description And Code (eProcedures.03)&#8288;</code></dt><dd><p>(chr) Description and code of the performed procedure.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Patient Attempted Procedure Descriptions And Codes List (eProcedures.03)&#8288;</code></dt><dd><p>(chr) List of attempted procedures with descriptions and codes.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Procedure Number Of Attempts (eProcedures.05)&#8288;</code></dt><dd><p>(dbl) Number of attempts made to perform the procedure.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Procedure Successful (eProcedures.06)&#8288;</code></dt><dd><p>(chr) Indicates whether the procedure was successful.</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data in this table are entirely synthetic and intended solely
for testing purposes. These data do not represent real patients, incidents,
or outcomes and should not be used for research or operational
decision-making.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_procedures_table)
dplyr::glimpse(nemsqar_procedures_table)

</code></pre>

<hr>
<h2 id='nemsqar_response_table'>Synthetic eResponse Data from the National Emergency Medical Services
Information System (NEMSIS)</h2><span id='topic+nemsqar_response_table'></span>

<h3>Description</h3>

<p>A synthetic dataset representing the eResponse section of the National
Emergency Medical Services Information System (NEMSIS). This dataset is
intended for testing purposes only and does not contain real patient or
incident data. Users are encouraged to test functions with this dataset, but
results should not be interpreted as meaningful. Some outputs may be
nonsensical, which is expected since this data is only intended to
demonstrate the expected structure of input data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_response_table)
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 5 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Character. Unique identifier for the patient care report.</p>
</dd>
<dt>Incident Date</dt><dd><p>Date. The date of the EMS incident.</p>
</dd>
<dt>Response Type Of Service Requested With Code (eResponse.05)</dt><dd><p>Character. The type of service requested, including a coded value.</p>
</dd>
<dt>Response Type Of Scene Delay List (eResponse.10)</dt><dd><p>Character. A list of delay types encountered at the scene.</p>
</dd>
<dt>Response Additional Response Mode Descriptors List (eResponse.24)</dt><dd><p>Character. A list of additional response mode descriptors.</p>
</dd>
</dl>


<hr>
<h2 id='nemsqar_situation_table'>Synthetic Test Data for eSituation Fields in National EMS Information System</h2><span id='topic+nemsqar_situation_table'></span>

<h3>Description</h3>

<p>This dataset provides completely synthetic test data for evaluating situation-related
functions in the <code>nemsqar</code> package. It includes variables related to patient complaints,
symptoms, injury status, and provider impressions. The dataset is designed to
assist users in testing the expected input structure for situation-related measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nemsqar_situation_table)
</code></pre>


<h3>Format</h3>

<p>A data frame with 10,000 rows and 18 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique identifier for the incident report (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the incident (Date).</p>
</dd>
<dt>Situation Symptom Onset Date Time (eSituation.01)</dt><dd><p>Date and time when symptoms began (datetime).</p>
</dd>
<dt>Situation Possible Injury With Code (eSituation.02)</dt><dd><p>Indicates whether an injury is possible, including coded response (character).</p>
</dd>
<dt>Situation Complaint Type (eSituation.03)</dt><dd><p>Classification of the patient's complaint (character).</p>
</dd>
<dt>Situation Complaint Statement (eSituation.04)</dt><dd><p>Primary complaint reported by the patient (character).</p>
</dd>
<dt>Situation Primary Complaint Statement List (eSituation.04)</dt><dd><p>List of primary complaints (character).</p>
</dd>
<dt>Situation Complaint Duration (eSituation.05)</dt><dd><p>Duration of the complaint (numeric).</p>
</dd>
<dt>Situation Complaint Duration Time Units (eSituation.06)</dt><dd><p>Units of time associated with the complaint duration (character).</p>
</dd>
<dt>Situation Chief Complaint Anatomic Location (eSituation.07)</dt><dd><p>Anatomic location of the primary complaint (character).</p>
</dd>
<dt>Situation Chief Complaint Organ System (eSituation.08)</dt><dd><p>Organ system affected by the chief complaint (character).</p>
</dd>
<dt>Situation Primary Symptom (eSituation.09)</dt><dd><p>Primary symptom reported by the patient, including ICD code (character).</p>
</dd>
<dt>Situation Other Associated Symptom Description (eSituation.10)</dt><dd><p>Description of additional symptoms (character).</p>
</dd>
<dt>Situation Other Associated Symptom ICD Code (eSituation.10)</dt><dd><p>ICD code for associated symptoms (character).</p>
</dd>
<dt>Situation Other Associated Symptoms List (eSituation.10)</dt><dd><p>List of additional symptoms reported (character).</p>
</dd>
<dt>Situation Provider Primary Impression Code And Description (eSituation.11)</dt><dd><p>Primary impression of the provider, including ICD code (character).</p>
</dd>
<dt>Situation Provider Secondary Impression Description And Code (eSituation.12)</dt><dd><p>Secondary provider impression, including ICD code (character).</p>
</dd>
<dt>Situation Provider Secondary Impression Description And Code List (eSituation.12)</dt><dd><p>List of secondary provider impressions (character).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to test these functions with this dataset, but results
should not be interpreted as meaningful. Some outputs may be nonsensical,
which is expected since this data is only intended to demonstrate the
expected structure of input data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_situation_table)
head(nemsqar_situation_table)

</code></pre>

<hr>
<h2 id='nemsqar_vitals_table'>Synthetic eVitals Data for NEMSIS from the National Emergency Medical Services
Information System (NEMSIS)</h2><span id='topic+nemsqar_vitals_table'></span>

<h3>Description</h3>

<p>This dataset contains synthetic data for the eVitals section of the
National Emergency Medical Services Information System (NEMSIS).
It is designed for testing functions within the nemsqar package.
The data structure follows the expected format for eVitals fields
but does not produce meaningful clinical results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nemsqar_vitals_table
</code></pre>


<h3>Format</h3>

<p>A tibble with 10,000 rows and 19 variables:
</p>

<dl>
<dt>Incident Patient Care Report Number - PCR (eRecord.01)</dt><dd><p>Unique incident identifier (character).</p>
</dd>
<dt>Incident Date</dt><dd><p>Date of the EMS incident (Date).</p>
</dd>
<dt>Vitals Signs Taken Date Time (eVitals.01)</dt><dd><p>Timestamp of vital signs measurement (Datetime).</p>
</dd>
<dt>Vitals ECG Type (eVitals.04)</dt><dd><p>ECG type recorded (character).</p>
</dd>
<dt>Vitals Systolic Blood Pressure SBP (eVitals.06)</dt><dd><p>Systolic blood pressure (numeric).</p>
</dd>
<dt>Vitals Diastolic Blood Pressure DBP (eVitals.07)</dt><dd><p>Diastolic blood pressure (numeric).</p>
</dd>
<dt>Vitals Heart Rate (eVitals.10)</dt><dd><p>Heart rate in beats per minute (numeric).</p>
</dd>
<dt>Vitals Pulse Oximetry (eVitals.12)</dt><dd><p>Oxygen saturation percentage (numeric).</p>
</dd>
<dt>Vitals Respiratory Rate (eVitals.14)</dt><dd><p>Respiratory rate in breaths per minute (numeric).</p>
</dd>
<dt>Vitals Respiratory Effort (eVitals.15)</dt><dd><p>Observed respiratory effort (character).</p>
</dd>
<dt>Vitals Carbon Dioxide CO2 (eVitals.16)</dt><dd><p>End-tidal CO2 measurement (numeric).</p>
</dd>
<dt>Vitals Blood Glucose Level (eVitals.18)</dt><dd><p>Blood glucose level in mg/dL (numeric).</p>
</dd>
<dt>Vitals Glasgow Coma Score GCS Motor (eVitals.21)</dt><dd><p>GCS motor response score (character).</p>
</dd>
<dt>Vitals Total Glasgow Coma Score GCS (eVitals.23)</dt><dd><p>Total Glasgow Coma Score (numeric).</p>
</dd>
<dt>Vitals Level Of Responsiveness AVPU (eVitals.26)</dt><dd><p>AVPU scale assessment (character).</p>
</dd>
<dt>Vitals Pain Scale Score (eVitals.27)</dt><dd><p>Pain scale score (numeric).</p>
</dd>
<dt>Vitals Pain Scale Score Range Sort Order (eVitals.27)</dt><dd><p>Sort order for pain scale (numeric).</p>
</dd>
<dt>Vitals Stroke Scale Score (eVitals.29)</dt><dd><p>Stroke scale assessment result (character).</p>
</dd>
<dt>Vitals Stroke Scale Type (eVitals.30)</dt><dd><p>Type of stroke scale used (character).</p>
</dd>
</dl>



<h3>Details</h3>

<p>Users are encouraged to use this dataset to test functions, but
the outputs may be nonsensical, as the data is solely intended to
demonstrate the expected input structure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(nemsqar_vitals_table)
dplyr::glimpse(nemsqar_vitals_table)

</code></pre>

<hr>
<h2 id='pediatrics_03b'>Pediatrics-03B Calculation</h2><span id='topic+pediatrics_03b'></span>

<h3>Description</h3>

<p>The function calculates a pediatric metric focused on EMS responses,
specifically targeting responses that involve patients under 18 years of age,
where certain weight-based medications were administered. This function
filters EMS data to identify relevant 911 responses and further narrows down
the dataset to cases involving children, calculating the proportion of cases
with documented weight among those where weight-based medications were
administered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pediatrics_03b(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  exam_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eexam_01_col,
  eexam_02_col,
  emedications_03_col,
  emedications_04_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pediatrics_03b_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing emergency response records.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only ePatient
and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eResponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_exam_table">exam_table</code></td>
<td>
<p>A data.frame or tibble containing only the eExam fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eMedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column for unique EMS record identifiers.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing the EMS response codes.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_eexam_01_col">eexam_01_col</code></td>
<td>
<p>Column containing documented weight information.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_eexam_02_col">eexam_02_col</code></td>
<td>
<p>Another column for weight documentation, if applicable.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column indicating medication administration.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_emedications_04_col">emedications_04_col</code></td>
<td>
<p>Column listing medications administered.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (Peds)
with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
test_data &lt;- tibble::tibble(
  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
  "2025-06-01", "2025-12-15")),
  patient_dob = as.Date(c("2021-01-01", "2020-01-01", "2022-02-01",
  "2023-06-01", "2019-12-15")),
  epatient_15 = c(4, 5, 3, 2, 6),  # Ages
  epatient_16 = c("Years", "Years", "Years", "Years", "Years"),
  eresponse_05 = rep(2205001, 5),
  emedications_03 = rep("stuff", 5),
  emedications_04 = c("Inhalation", "pill", "liquid", "pill", "liquid"),
  eexam_01 = c(60, 59, 58, 57, 56),
  eexam_02 = c("Red", "Purple", "Grey", "Yellow", "Orange")
)

# Run the function
# Return 95% confidence intervals using the Wilson method
pediatrics_03b(
  df = test_data,
  erecord_01_col = erecord_01,
  incident_date_col = incident_date,
  patient_DOB_col = patient_dob,
  epatient_15_col = epatient_15,
  epatient_16_col = epatient_16,
  eresponse_05_col = eresponse_05,
  emedications_03_col = emedications_03,
  emedications_04_col = emedications_04,
  eexam_01_col = eexam_01,
  eexam_02_col = eexam_02,
  confidence_interval = TRUE
)

</code></pre>

<hr>
<h2 id='pediatrics_03b_population'>Pediatrics-03B Populations</h2><span id='topic+pediatrics_03b_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Pediatrics-03B, and
categorizes records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to diabetes/hypoglycemia incidents in an
EMS dataset, specifically focusing on cases where 911 was called for
diabetes/hypoglycemia distress, certain medications were administered, and a
weight is taken. This function segments the data into pediatric populations,
computing the proportion of cases that have a documented weight.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pediatrics_03b_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  exam_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eexam_01_col,
  eexam_02_col,
  emedications_03_col,
  emedications_04_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pediatrics_03b_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing emergency response records.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only ePatient
and eScene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eResponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_exam_table">exam_table</code></td>
<td>
<p>A data.frame or tibble containing only the eExam fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eMedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column for unique EMS record identifiers.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing the EMS response codes.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_eexam_01_col">eexam_01_col</code></td>
<td>
<p>Column containing documented weight information.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_eexam_02_col">eexam_02_col</code></td>
<td>
<p>Another column for weight documentation, if applicable.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column indicating medication administration.</p>
</td></tr>
<tr><td><code id="pediatrics_03b_population_+3A_emedications_04_col">emedications_04_col</code></td>
<td>
<p>Column listing medications administered.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning
patient_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

)

response_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  eresponse_05 = rep(2205001, 5)

)

exam_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  eexam_01 = c(60, 59, 58, 57, 56),
  eexam_02 = c("Red", "Purple", "Grey", "Yellow", "Orange")
)

medications_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  emedications_03 = rep("stuff", 5),
  emedications_04 = c("Inhalation", "pill", "liquid", "pill", "liquid"),

)

# test the success of the function

result &lt;- pediatrics_03b_population(patient_scene_table = patient_table,
                           response_table = response_table,
                           exam_table = exam_table,
                           medications_table = medications_table,
                           erecord_01_col = erecord_01,
                           incident_date_col = incident_date,
                           patient_DOB_col = patient_dob,
                           epatient_15_col = epatient_15,
                           epatient_16_col = epatient_16,
                           eresponse_05_col = eresponse_05,
                           emedications_03_col = emedications_03,
                           emedications_04_col = emedications_04,
                           eexam_01_col = eexam_01,
                           eexam_02_col = eexam_02
                           )

# show the results of filtering at each step
result$filter_process


</code></pre>

<hr>
<h2 id='pretty_percent'>Format Numeric Variables as Percentages</h2><span id='topic+pretty_percent'></span>

<h3>Description</h3>

<p>This function formats numeric variables as percentages with a specified
number of decimal places. It refines the output by removing unnecessary
trailing zeros after the decimal point and ensures the percentage sign is
correctly applied without extraneous characters, resulting in a polished,
human-readable percentage representation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pretty_percent(variable, n_decimal = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pretty_percent_+3A_variable">variable</code></td>
<td>
<p>A numeric vector representing proportions to format as
percentages. The values are on a scale from 0 to 1.</p>
</td></tr>
<tr><td><code id="pretty_percent_+3A_n_decimal">n_decimal</code></td>
<td>
<p>A numeric value specifying the number of decimal places.
Defaults to <code>1</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing the formatted percentages.
</p>


<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example usage:
pretty_percent(0.12345)  # Default decimal places
pretty_percent(0.12345, n_decimal = 2)  # Two decimal places
pretty_percent(c(0.1, 0.25, 0.3333), n_decimal = 1)  # Vector input

</code></pre>

<hr>
<h2 id='respiratory_01'>Respiratory-01 Calculation</h2><span id='topic+respiratory_01'></span>

<h3>Description</h3>

<p>The <code>respiratory_01</code> function filters and analyzes data related to emergency
911 respiratory distress incidents, providing summary statistics for adult
and pediatric populations. This function uses specific data columns for 911
response codes, primary and secondary impressions, and vital signs to
calculate the proportion of cases with complete vital signs recorded,
stratified by age.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>respiratory_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_12_col,
  evitals_14_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="respiratory_01_+3A_df">df</code></td>
<td>
<p>A data frame containing incident data with each row representing an
observation.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
esituation fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the evitals
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Unique Patient ID</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for 911 response codes (e.g., 2205001,
2205003, 2205009).</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name for primary impression codes related to
respiratory distress.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name for secondary impression codes related
to respiratory distress.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name for the first vital sign measurement.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name for the second vital sign measurement.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="respiratory_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Synthetic test data
test_data &lt;- tibble::tibble(
  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  epatient_15 = c(34, 5, 45, 2, 60),  # Ages
  epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
  eresponse_05 = rep(2205001, 5),
  esituation_11 = c(rep("J80", 3), rep("I50.9", 2)),
  esituation_12 = c(rep("J80", 2), rep("I50.9", 3)),
  evitals_12 = c(60, 59, 58, 57, 56),
  evitals_14 = c(16, 15, 14, 13, 12)
)

# Run the function
# Return 95% confidence intervals using the Wilson method
respiratory_01(
  df = test_data,
  erecord_01_col = erecord_01,
  epatient_15_col = epatient_15,
  epatient_16_col = epatient_16,
  eresponse_05_col = eresponse_05,
  esituation_11_col = esituation_11,
  esituation_12_col = esituation_12,
  evitals_12_col = evitals_12,
  evitals_14_col = evitals_14,
  confidence_interval = TRUE
)

</code></pre>

<hr>
<h2 id='respiratory_01_population'>Respiratory-01 Populations</h2><span id='topic+respiratory_01_population'></span>

<h3>Description</h3>

<p>The <code>respiratory_01_population</code> function filters and analyzes data related to
emergency 911 respiratory distress incidents, providing the adult, pediatric,
and initial populations. This function uses specific data columns for 911
response codes, primary and secondary impressions, and vital signs to filter
a dataset down to the populations of interest.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>respiratory_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_12_col,
  evitals_14_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="respiratory_01_population_+3A_df">df</code></td>
<td>
<p>A data frame containing incident data with each row representing an
observation.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
esituation fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the evitals
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Unique Patient ID</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the
calculated age value.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the
provided age unit value.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for
911 response codes (e.g., 2205001, 2205003, 2205009).</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name for
primary impression codes related to respiratory distress.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name for
secondary impression codes related to respiratory distress.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name for
the first vital sign measurement.</p>
</td></tr>
<tr><td><code id="respiratory_01_population_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name for
the second vital sign measurement.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create tables to test correct functioning

# patient table
patient_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

)

# response table
response_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  eresponse_05 = rep(2205001, 5)

)

# situation table
situation_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  esituation_11 = c(rep("J80", 3), rep("I50.9", 2)),
  esituation_12 = c(rep("J80", 2), rep("I50.9", 3))
)

# vitals table
vitals_table &lt;- tibble::tibble(

  erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
  evitals_12 = c(60, 59, 58, 57, 56),
  evitals_14 = c(16, 15, 14, 13, 12)

)

# Run the function
result &lt;- respiratory_01_population(patient_scene_table = patient_table,
                              response_table = response_table,
                              situation_table = situation_table,
                              vitals_table = vitals_table,
                              erecord_01_col = erecord_01,
                              incident_date_col = incident_date,
                              patient_DOB_col = patient_dob,
                              epatient_15_col = epatient_15,
                              epatient_16_col = epatient_16,
                              eresponse_05_col = eresponse_05,
                              esituation_11_col = esituation_11,
                              esituation_12_col = esituation_12,
                              evitals_12_col = evitals_12,
                              evitals_14_col = evitals_14
                             )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='respiratory_02'>Respiratory-02 Calculation</h2><span id='topic+respiratory_02'></span>

<h3>Description</h3>

<p>The <code>respiratory_02</code> function calculates metrics for pediatric and adult
respiratory populations based on pre-defined criteria, such as low oxygen
saturation and specific medication or procedure codes. It returns a summary
table of the overall, pediatric, and adult populations, showing counts and
proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>respiratory_02(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  vitals_table = NULL,
  medications_table = NULL,
  procedures_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  evitals_12_col,
  emedications_03_col,
  eprocedures_03_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="respiratory_02_+3A_df">df</code></td>
<td>
<p>A data frame containing incident data with each row representing an
observation.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the evitals
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
emedications fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eprocedures fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name for eRecord.01, used to form a unique
patient ID.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>integer Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for response codes (e.g., incident type).</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name for oxygen saturation (SpO2) values.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column name for medication codes.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name for procedure codes.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="respiratory_02_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    emedications_03 = c("Oxygen", "Oxygen", "Oxygen", "Oxygen", "Oxygen"),
    evitals_12 = c(60, 59, 58, 57, 56),
    eprocedures_03 = rep("applicable thing", 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  respiratory_02(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    emedications_03_col = emedications_03,
    evitals_12_col = evitals_12,
    eprocedures_03_col = eprocedures_03,
    confidence_interval = TRUE
  )


</code></pre>

<hr>
<h2 id='respiratory_02_population'>Respiratory-02 Populations</h2><span id='topic+respiratory_02_population'></span>

<h3>Description</h3>

<p>The <code>respiratory_02_population</code> function calculates metrics for pediatric and
adult respiratory populations based on pre-defined criteria, such as low
oxygen saturation and specific medication or procedure codes. It returns a
summary table of the overall, pediatric, and adult populations, showing
counts and proportions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>respiratory_02_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  vitals_table = NULL,
  medications_table = NULL,
  procedures_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  evitals_12_col,
  emedications_03_col,
  eprocedures_03_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="respiratory_02_population_+3A_df">df</code></td>
<td>
<p>A data frame containing incident data with each row representing an
observation.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing at least
epatient and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing at least the
eresponse fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing at least the evitals
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
emedications fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eprocedures fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name for eRecord.01, used to form a unique
patient ID.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>integer Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for response codes (e.g., incident type).</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name for oxygen saturation (SpO2) values.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column name for medication codes.</p>
</td></tr>
<tr><td><code id="respiratory_02_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name for procedure codes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create tables to test correct functioning
# patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # medications table
  medications_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    emedications_03 = c("Oxygen", "Oxygen", "Oxygen", "Oxygen", "Oxygen")

  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_12 = c(60, 59, 58, 57, 56),

  )

  # procedures table
  procedures_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eprocedures_03 = rep("applicable thing", 5)

  )

# Run the function
result &lt;- respiratory_02_population(patient_scene_table = patient_table,
                              response_table = response_table,
                              medications_table = medications_table,
                              vitals_table = vitals_table,
                              procedures_table = procedures_table,
                              erecord_01_col = erecord_01,
                              incident_date_col = incident_date,
                              patient_DOB_col = patient_dob,
                              epatient_15_col = epatient_15,
                              epatient_16_col = epatient_16,
                              eresponse_05_col = eresponse_05,
                              emedications_03_col = emedications_03,
                              evitals_12_col = evitals_12,
                              eprocedures_03_col = eprocedures_03
                             )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='results_summarize'>Tabulate Measure Results</h2><span id='topic+results_summarize'></span>

<h3>Description</h3>

<p>Calculates measure numerator, denominator, and proportions for a NEMSQA
measure and each population (total, adult, and pediatric). The function
returns a summarized result table for the selected populations, with optional
confidence intervals for the proportions.
</p>
<p>This function is used throughout the package to calculate measure results
for different populations (e.g., total population, adults, and pediatric
groups) based on the given input data. Each of the population arguments
(<code>total_population</code>, <code>adult_population</code>, <code>peds_population</code>) defaults to <code>NULL</code>.
If a population argument is <code>NULL</code>, it will be excluded from the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>results_summarize(
  total_population = NULL,
  adult_population = NULL,
  peds_population = NULL,
  measure_name,
  population_names = c("all", "adults", "peds"),
  numerator_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="results_summarize_+3A_total_population">total_population</code></td>
<td>
<p>A dataframe or tibble containing the filtered and
calculated fields for the total population. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_adult_population">adult_population</code></td>
<td>
<p>A dataframe or tibble containing the filtered and
calculated fields for the adult population. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_peds_population">peds_population</code></td>
<td>
<p>A dataframe or tibble containing the filtered and
calculated fields for the pediatric population. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_measure_name">measure_name</code></td>
<td>
<p>A string containing the description of the measure being
calculated.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_population_names">population_names</code></td>
<td>
<p>A vector of strings specifying which populations
(total, adult, peds) to include in the result. Default includes all
populations.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_numerator_col">numerator_col</code></td>
<td>
<p>The tidyselect column containing the numerator data for
the measure (e.g., the number of cases).</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A logical
value indicating whether to include confidence intervals in the result.
Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A string specifying the
method to calculate confidence intervals. Options are &quot;wilson&quot; or
&quot;clopper-pearson&quot;. Default is &quot;wilson&quot;.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A numeric value
indicating the confidence level for the confidence intervals. Default is
0.95 (95% confidence).</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A logical value
specifying whether to apply continuity correction when calculating
confidence intervals. Default is TRUE.</p>
</td></tr>
<tr><td><code id="results_summarize_+3A_...">...</code></td>
<td>
<p>(optional) Additional arguments passed to the <code>summarize_measure</code>
function used for calculating measure results.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the summarized measure results for the selected
populations. The output includes:
</p>

<ul>
<li> <p><code>measure</code>: The measure name.
</p>
</li>
<li> <p><code>pop</code>: The population group (e.g., &quot;All&quot;, &quot;Adults&quot;, &quot;Peds&quot;).
</p>
</li>
<li> <p><code>numerator</code>: The count of qualifying events.
</p>
</li>
<li> <p><code>denominator</code>: The total number of records in the population.
</p>
</li>
<li> <p><code>prop</code>: The proportion of qualifying events.
</p>
</li>
<li> <p><code>prop_label</code>: A formatted percentage representation of <code>prop</code>.
</p>
</li>
<li> <p><code>lower_ci</code>, <code>upper_ci</code>: The lower and upper confidence interval bounds
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>

<p>If multiple populations are specified, their results are combined into a
single tibble using <code>dplyr::bind_rows()</code>.
</p>


<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS
</p>

<hr>
<h2 id='safety_01'>Safety-01 Calculation</h2><span id='topic+safety_01'></span>

<h3>Description</h3>

<p>The <code>safety_01</code> function calculates the proportion of 911 responses where
&quot;lights and sirens&quot; were not used in an EMS dataset. It generates age-based
population summaries, calculating the count and proportion of &quot;lights and
sirens&quot; responses among all incidents, and within adult and pediatric groups.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eresponse_24_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name containing the unique patient record
identifier.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column containing age.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column for age units.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response mode codes (e.g., 911
response codes).</p>
</td></tr>
<tr><td><code id="safety_01_+3A_eresponse_24_col">eresponse_24_col</code></td>
<td>
<p>Column detailing additional response descriptors as
text.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safety_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    eresponse_24 = rep("No Lights or Sirens", 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  safety_01(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    eresponse_24_col = eresponse_24,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='safety_01_population'>Safety-01 Populations</h2><span id='topic+safety_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Safety-01, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to 911 responses where &quot;lights and sirens&quot;
were not used in an EMS dataset. This function segments the data by age into
adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  eresponse_24_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name containing the unique patient record
identifier.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Date or POSIXct column indicating the date of the
incident.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Date or POSIXct column for the patients date of birth</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column containing age.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column for age units.</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response mode codes (e.g., 911
response codes).</p>
</td></tr>
<tr><td><code id="safety_01_population_+3A_eresponse_24_col">eresponse_24_col</code></td>
<td>
<p>Column detailing additional response descriptors as
text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create tables to test correct functioning

# patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5),
    eresponse_24 = rep("No Lights or Sirens", 5)

  )

# Run the function
result &lt;- safety_01_population(patient_scene_table = patient_table,
                              response_table = response_table,
                              erecord_01_col = erecord_01,
                              incident_date_col = incident_date,
                              patient_DOB_col = patient_dob,
                              epatient_15_col = epatient_15,
                              epatient_16_col = epatient_16,
                              eresponse_05_col = eresponse_05,
                              eresponse_24_col = eresponse_24
                        )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='safety_02'>Safety-02 Calculation</h2><span id='topic+safety_02'></span>

<h3>Description</h3>

<p>The <code>safety_02</code> function calculates the Safety-02 metric, evaluating the
proportion of emergency medical calls involving transport where no lights and
sirens were used. This function categorizes the population into adult and
pediatric groups based on their age, and summarizes results with a total
population count as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_02(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  edisposition_18_col,
  edisposition_28_col,
  transport_disposition_cols,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_02_+3A_df">df</code></td>
<td>
<p>A data frame where each row is an observation, and each column
represents a feature.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only epatient
and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eresponse
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column giving response codes, identifying 911
responses.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_edisposition_18_col">edisposition_18_col</code></td>
<td>
<p>Column giving transport mode descriptors,
including possible lights-and-sirens indicators.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>Column giving patient evaluation and care
categories for the EMS response.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_transport_disposition_cols">transport_disposition_cols</code></td>
<td>
<p>One or more unquoted column names (such as
edisposition.12, edisposition.30) containing transport disposition details.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safety_02_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    edisposition_18 = rep(4218015, 5),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = rep(4230001, 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  safety_02(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    edisposition_18_col = edisposition_18,
    edisposition_28_col = edisposition_28,
    transport_disposition_cols = edisposition_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='safety_02_population'>Safety-02 Populations</h2><span id='topic+safety_02_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Safety-02, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to a 911 request during which lights and
sirens were not used during patient transport. This function segments the
data by age into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_02_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  edisposition_18_col,
  edisposition_28_col,
  transport_disposition_cols
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_02_population_+3A_df">df</code></td>
<td>
<p>A data frame where each row is an observation, and each column
represents a feature.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only epatient
and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eresponse
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column giving the calculated age value.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column giving the provided age unit value.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column giving response codes, identifying 911
responses.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_edisposition_18_col">edisposition_18_col</code></td>
<td>
<p>Column giving transport mode descriptors,
including possible lights-and-sirens indicators.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>Column giving patient evaluation and care
categories for the EMS response.</p>
</td></tr>
<tr><td><code id="safety_02_population_+3A_transport_disposition_cols">transport_disposition_cols</code></td>
<td>
<p>One or more unquoted column names (such as
edisposition.12, edisposition.30) containing transport disposition details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_18 = rep(4218015, 5),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = rep(4230001, 5)
  )

  # test the success of the function
  result &lt;- safety_02_population(patient_scene_table = patient_table,
                        response_table = response_table,
                        disposition_table = disposition_table,
                        erecord_01_col = erecord_01,
                        incident_date_col = incident_date,
                        patient_DOB_col = patient_dob,
                        epatient_15_col = epatient_15,
                        epatient_16_col = epatient_16,
                        eresponse_05_col = eresponse_05,
                        edisposition_18_col = edisposition_18,
                        edisposition_28_col = edisposition_28,
                        transport_disposition_cols = edisposition_30
                        )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='safety_04'>Safety-04 Calculation</h2><span id='topic+safety_04'></span>

<h3>Description</h3>

<p>The <code>safety_04</code> function processes EMS incident data for specific safety and
transport criteria, filtering by patient age and incident type to identify
cases that meet specified exclusion or inclusion criteria. This function
accommodates data with various EMS-specific codes, age descriptors, and
procedure identifiers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_04(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  injury_table = NULL,
  procedures_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  earrest_01_col,
  einjury_03_col,
  eprocedures_03_col,
  edisposition_14_col,
  transport_disposition_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_04_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data where each row
represents an individual observation.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing fields from
epatient and escene needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing fields from eresponse
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data frame or tibble containing fields from earrest
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_injury_table">injury_table</code></td>
<td>
<p>A data frame or tibble containing fields from einjury
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing fields from
eprocedures needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing fields from
edisposition needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name indicating the patient age.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for the unit of age (e.g., &quot;Years,&quot;
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="safety_04_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response transport codes.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column with cardiac arrest status information.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column describing traumatic injuries, expected as a
list or text-separated entries.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column listing procedures, assumed to contain
multiple procedure codes/texts in each cell.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_edisposition_14_col">edisposition_14_col</code></td>
<td>
<p>Column for transport dispositions.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Columns for primary and secondary transport
dispositions.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="safety_04_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    earrest_01 = rep("No", 5),
    einjury_03 = rep("non-injury", 5),
    edisposition_14 = rep(4214001, 5),
    edisposition_30 = rep(4230001, 5),
    eprocedures_03 = rep("other response", 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  safety_04(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    earrest_01_col = earrest_01,
    einjury_03_col = einjury_03,
    edisposition_14_col = edisposition_14,
    transport_disposition_col = edisposition_30,
    eprocedures_03_col = eprocedures_03,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='safety_04_population'>Safety-04 Populations</h2><span id='topic+safety_04_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Safety-04, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to a 911 request or interfacility request
for patients less than 8 years of age during which patients are transported
using a pediatric restraint device. This function segments the data by age
into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>safety_04_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  arrest_table = NULL,
  injury_table = NULL,
  procedures_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  earrest_01_col,
  einjury_03_col,
  eprocedures_03_col,
  edisposition_14_col,
  transport_disposition_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="safety_04_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data where each row
represents an individual observation.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing fields from
epatient and escene needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing fields from eresponse
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data frame or tibble containing fields from earrest
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_injury_table">injury_table</code></td>
<td>
<p>A data frame or tibble containing fields from einjury
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing fields from
eprocedures needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing fields from
edisposition needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name indicating the patient age.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for the unit of age (e.g., &quot;Years,&quot;
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response transport codes.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>Column with cardiac arrest status information.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column describing traumatic injuries, expected as a
list or text-separated entries.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column listing procedures, assumed to contain
multiple procedure codes/texts in each cell.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_edisposition_14_col">edisposition_14_col</code></td>
<td>
<p>Column for transport dispositions.</p>
</td></tr>
<tr><td><code id="safety_04_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Columns for primary and secondary transport
dispositions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_14 = rep(4214001, 5),
    edisposition_30 = rep(4230001, 5),
  )

  # arrest table
  arrest_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    earrest_01 = rep("No", 5)
  )

  # injury table
  injury_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    einjury_03 = rep("non-injury", 5)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eprocedures_03 = rep("other response", 5)
  )

  # test the success of the function
  result &lt;- safety_04_population(patient_scene_table = patient_table,
                        response_table = response_table,
                        arrest_table = arrest_table,
                        injury_table = injury_table,
                        procedures_table = procedures_table,
                        disposition_table = disposition_table,
                        erecord_01_col = erecord_01,
                        incident_date_col = incident_date,
                        patient_DOB_col = patient_dob,
                        epatient_15_col = epatient_15,
                        epatient_16_col = epatient_16,
                        eresponse_05_col = eresponse_05,
                        earrest_01_col = earrest_01,
                        einjury_03_col = einjury_03,
                        edisposition_14_col = edisposition_14,
                        transport_disposition_col = edisposition_30,
                        eprocedures_03_col = eprocedures_03
                        )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='seizure_02'>Seizure-02 Calculation</h2><span id='topic+seizure_02'></span>

<h3>Description</h3>

<p>Calculates the NEMSQA Seizure-02 Measure.
</p>
<p>Calculates age-based seizure metrics for a dataset. This function filters
data for patients based on incident information, diagnoses, and administered
medications to assess adherence to Seizure-02 metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seizure_02(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  emedications_03_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seizure_02_+3A_df">df</code></td>
<td>
<p>A data frame where each row is an observation, containing all
necessary columns for analysis.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
emedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for patient age in numeric form.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for age unit (e.g., <code>"Years"</code> or
<code>"Months"</code>).</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for response codes; &quot;911&quot; call codes are
filtered.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name for primary impressions.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name for secondary impressions.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column name for medications administered; ideally
a list column or string with comma-separated values.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_11 = rep("G40", 5),
    esituation_12 = rep("r56", 5),
    emedications_03 = rep(3322, 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  seizure_02(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_11_col = esituation_11,
    esituation_12_col = esituation_12,
    emedications_03_col = emedications_03,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='seizure_02_population'>Seizure-02 Populations</h2><span id='topic+seizure_02_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Seizure-02, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to asthma-related incidents in an EMS
dataset, specifically focusing on cases where 911 was called for respiratory
distress, and certain medications were administered. This function segments
the data by age into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seizure_02_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  medications_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  emedications_03_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="seizure_02_population_+3A_df">df</code></td>
<td>
<p>A data frame where each row is an observation, containing all
necessary columns for analysis.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_medications_table">medications_table</code></td>
<td>
<p>A data.frame or tibble containing only the
emedications fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for patient age in numeric form.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for age unit (e.g., <code>"Years"</code> or
<code>"Months"</code>).</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for response codes; &quot;911&quot; call codes are
filtered.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name for primary impressions.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name for secondary impressions.</p>
</td></tr>
<tr><td><code id="seizure_02_population_+3A_emedications_03_col">emedications_03_col</code></td>
<td>
<p>Column name for medications administered; ideally
a list column or string with comma-separated values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_11 = rep("G40", 5),
    esituation_12 = rep("r56", 5),
  )

  # medications table
  medications_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    emedications_03 = rep(3322, 5)

  )

  # test the success of the function
  result &lt;- seizure_02_population(patient_scene_table = patient_table,
                              response_table = response_table,
                              situation_table = situation_table,
                              medications_table = medications_table,
                              erecord_01_col = erecord_01,
                              incident_date_col = incident_date,
                              patient_DOB_col = patient_dob,
                              epatient_15_col = epatient_15,
                              epatient_16_col = epatient_16,
                              eresponse_05_col = eresponse_05,
                              esituation_11_col = esituation_11,
                              esituation_12_col = esituation_12,
                              emedications_03_col = emedications_03
                         )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='stroke_01'>Stroke-01 Calculation</h2><span id='topic+stroke_01'></span>

<h3>Description</h3>

<p>The <code>stroke_01</code> function processes EMS dataset to identify potential stroke
cases based on specific criteria and calculates the stroke scale measures. It
filters the data for 911 response calls, identifies stroke-related
impressions and scales, and aggregates results by unique patient encounters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stroke_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_23_col,
  evitals_26_col,
  evitals_29_col,
  evitals_30_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stroke_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset. Each row should
represent a unique patient encounter.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column containing EMS response codes, which
should include 911 response codes.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>The column containing the primary impression codes
or descriptions related to the situation.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>The column containing secondary impression codes or
descriptions related to the situation.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>The column containing the Glasgow Coma Scale (GCS)
score.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>The column containing the AVPU (alert, verbal, pain,
unresponsive) scale value.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_evitals_29_col">evitals_29_col</code></td>
<td>
<p>The column containing the stroke scale score achieved
during assessment.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_evitals_30_col">evitals_30_col</code></td>
<td>
<p>The column containing stroke scale type descriptors
(e.g., FAST, NIH, etc.).</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_11 = c(rep("I60", 3), rep("I61", 2)),
    esituation_12 = c(rep("I63", 2), rep("I64", 3)),
    evitals_23 = c(16, 15, 14, 13, 12),
    evitals_26 = c("Alert", "Painful", "Verbal", "Unresponsive", "Alert"),
    evitals_29 = rep("positive", 5),
    evitals_30 = rep("a pain scale", 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  stroke_01(
    df = test_data,
    erecord_01_col = erecord_01,
    eresponse_05_col = eresponse_05,
    esituation_11_col = esituation_11,
    esituation_12_col = esituation_12,
    evitals_23_col = evitals_23,
    evitals_26_col = evitals_26,
    evitals_29_col = evitals_29,
    evitals_30_col = evitals_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='stroke_01_population'>Stroke-01 Populations</h2><span id='topic+stroke_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Stroke-01, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories related to stroke-related incidents in an EMS
dataset, specifically focusing on cases where 911 was called for stroke, and
a stroke scale was administered. .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stroke_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  evitals_23_col,
  evitals_26_col,
  evitals_29_col,
  evitals_30_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stroke_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset. Each row should
represent a unique patient encounter.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column containing EMS response codes, which
should include 911 response codes.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>The column containing the primary impression codes
or descriptions related to the situation.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>The column containing secondary impression codes or
descriptions related to the situation.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>The column containing the Glasgow Coma Scale (GCS)
score.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>The column containing the AVPU (alert, verbal, pain,
unresponsive) scale value.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_evitals_29_col">evitals_29_col</code></td>
<td>
<p>The column containing the stroke scale score achieved
during assessment.</p>
</td></tr>
<tr><td><code id="stroke_01_population_+3A_evitals_30_col">evitals_30_col</code></td>
<td>
<p>The column containing stroke scale type descriptors
(e.g., FAST, NIH, etc.).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_11 = c(rep("I60", 3), rep("I61", 2)),
    esituation_12 = c(rep("I63", 2), rep("I64", 3)),
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_23 = c(16, 15, 14, 13, 12),
    evitals_26 = c("Alert", "Painful", "Verbal", "Unresponsive", "Alert"),
    evitals_29 = rep("positive", 5),
    evitals_30 = rep("a pain scale", 5)
  )

  # test the success of the function
  result &lt;- stroke_01_population(patient_scene_table = patient_table,
                              response_table = response_table,
                              situation_table = situation_table,
                              vitals_table = vitals_table,
                              erecord_01_col = erecord_01,
                              eresponse_05_col = eresponse_05,
                              esituation_11_col = esituation_11,
                              esituation_12_col = esituation_12,
                              evitals_29_col = evitals_29,
                              evitals_23_col = evitals_23,
                              evitals_26_col = evitals_26,
                              evitals_30_col = evitals_30
                              )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='summarize_measure'>Summarize Measure</h2><span id='topic+summarize_measure'></span>

<h3>Description</h3>

<p>Calculates measure numerator, denominator, proportions, and optional
confidence intervals for a NEMSQA measure. This function summarizes the
information for a specified population and measure, returning a tibble with
the calculated values. If requested, the function can also calculate
confidence intervals for the proportions using either the Wilson score
interval or the Clopper-Pearson exact binomial interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarize_measure(
  data,
  measure_name,
  population_name,
  numerator_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summarize_measure_+3A_data">data</code></td>
<td>
<p>A dataframe or tibble containing the filtered and calculated
fields for the population of interest.</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_measure_name">measure_name</code></td>
<td>
<p>A string containing the description of the measure being
calculated (e.g., &quot;Airway-01&quot;).</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_population_name">population_name</code></td>
<td>
<p>A string containing the description of the population
for which the measure is being calculated (e.g., &quot;Adults&quot;, &quot;Peds&quot;, or
&quot;All&quot;).</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_numerator_col">numerator_col</code></td>
<td>
<p>The tidyselect column containing the numerator data for
the measure (e.g., the number of cases).</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A logical
value indicating whether to calculate a confidence interval for the
proportion estimate. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A string specifying the
method to calculate the confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) or <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is allowed (e.g., <code>"w"</code> or <code>"c"</code>). Default is <code>"wilson"</code>.</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A numeric value
indicating the confidence level for the interval, expressed as a proportion
(e.g., 0.95 for a 95% confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> A logical value
specifying whether to apply continuity correction to the Wilson score
interval when <code>method = "wilson"</code>. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="summarize_measure_+3A_...">...</code></td>
<td>
<p>(optional) Additional arguments passed to
<code>nemsqa_binomial_confint</code> when calculating confidence intervals.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summarized data frame containing:
</p>

<ul>
<li> <p><code>measure</code>: The measure name.
</p>
</li>
<li> <p><code>pop</code>: The population group.
</p>
</li>
<li> <p><code>numerator</code>: The count of qualifying events.
</p>
</li>
<li> <p><code>denominator</code>: The total count of records.
</p>
</li>
<li> <p><code>prop</code>: The proportion of qualifying events.
</p>
</li>
<li> <p><code>prop_label</code>: A formatted percentage representation of <code>prop</code>
(when <code>confidence_interval = FALSE</code>).
</p>
</li>
<li> <p><code>lower_ci</code>, <code>upper_ci</code>: The lower and upper confidence interval bounds
(when <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Samuel Kordik, BBA, BS
</p>

<hr>
<h2 id='syncope_01'>Syncope-01 Calculation</h2><span id='topic+syncope_01'></span>

<h3>Description</h3>

<p>The <code>syncope_01</code> function processes EMS dataset to identify potential syncope
(fainting) cases based on specific criteria and calculates related ECG
measures. This function dplyr::filters data for 911 response calls, assesses
primary and associated symptoms for syncope, determines age-based populations
(adult and pediatric), and aggregates results by unique patient encounters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>syncope_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_09_col,
  esituation_10_col,
  esituation_11_col,
  esituation_12_col,
  evitals_04_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="syncope_01_+3A_df">df</code></td>
<td>
<p>Main data frame containing EMS records.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient age (numeric).</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column for the patient age units (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response type codes, specifically
911 codes.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_esituation_09_col">esituation_09_col</code></td>
<td>
<p>Column with primary symptoms associated with the
patient encounter.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_esituation_10_col">esituation_10_col</code></td>
<td>
<p>Column with other associated symptoms.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column for primary impression code.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column for secondary impression codes.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_evitals_04_col">evitals_04_col</code></td>
<td>
<p>Column with ECG information if available.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_09 = c(rep("R55", 3), rep("R40.4", 2)),
    esituation_10 = c(rep("R40.4", 2), rep("R55", 3)),
    esituation_11 = c(rep("R55", 3), rep("R40.4", 2)),
    esituation_12 = c(rep("R40.4", 2), rep("R55", 3)),
    evitals_04 = rep("15 Lead", 5)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  syncope_01(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_09_col = esituation_09,
    esituation_10_col = esituation_10,
    esituation_11_col = esituation_11,
    esituation_12_col = esituation_12,
    evitals_04_col = evitals_04,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='syncope_01_population'>Syncope-01 Populations</h2><span id='topic+syncope_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Syncope-01, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories to identify potential syncope (fainting) cases
based on specific criteria and calculates related ECG measures. This function
segments the data by age into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>syncope_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_09_col,
  esituation_10_col,
  esituation_11_col,
  esituation_12_col,
  evitals_04_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="syncope_01_population_+3A_df">df</code></td>
<td>
<p>Main data frame containing EMS records.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column containing unique record identifiers for
each encounter.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column representing the patient age (numeric).</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column for the patient age units (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column containing response type codes, specifically
911 codes.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_esituation_09_col">esituation_09_col</code></td>
<td>
<p>Column with primary symptoms associated with the
patient encounter.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_esituation_10_col">esituation_10_col</code></td>
<td>
<p>Column with other associated symptoms.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column for primary impression code.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column for secondary impression codes.</p>
</td></tr>
<tr><td><code id="syncope_01_population_+3A_evitals_04_col">evitals_04_col</code></td>
<td>
<p>Column with ECG information if available.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_09 = c(rep("R55", 3), rep("R40.4", 2)),
    esituation_10 = c(rep("R40.4", 2), rep("R55", 3)),
    esituation_11 = c(rep("R55", 3), rep("R40.4", 2)),
    esituation_12 = c(rep("R40.4", 2), rep("R55", 3)),
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_04 = rep("15 Lead", 5)

  )

  # test the success of the function
  result &lt;- syncope_01_population(patient_scene_table = patient_table,
                         response_table = response_table,
                         situation_table = situation_table,
                         vitals_table = vitals_table,
                         erecord_01_col = erecord_01,
                         epatient_15_col = epatient_15,
                         epatient_16_col = epatient_16,
                         eresponse_05_col = eresponse_05,
                         esituation_09_col = esituation_09,
                         esituation_10_col = esituation_10,
                         esituation_11_col = esituation_11,
                         esituation_12_col = esituation_12,
                         evitals_04_col = evitals_04
                         )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='tbi_01'>TBI-01 Calculation</h2><span id='topic+tbi_01'></span>

<h3>Description</h3>

<p>This function screens for potential traumatic brain injury (TBI) cases based
on specific criteria in a patient dataset. It produces a subset of the data
with calculated variables for TBI identification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tbi_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  transport_disposition_col,
  evitals_06_col,
  evitals_12_col,
  evitals_16_col,
  evitals_23_col,
  evitals_26_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tbi_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the patient data.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name in df with the patients unique record ID.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name in df with the patients age value.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name in df with the patients age unit (e.g.,
years, months).</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name in df with response codes for the type of
EMS call.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name in df with the primary provider
impression.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name in df with the secondary provider
impression.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Column name in df with the transport
disposition.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name in df with systolic blood pressure (SBP).</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name in df with pulse oximetry values.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_evitals_16_col">evitals_16_col</code></td>
<td>
<p>Column name in df with ETCO2 values.
values.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column name in df with Glasgow Coma Scale (GCS) scores.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column name in df with AVPU (alert, verbal, painful,
unresponsive) values.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_11 = c(rep("S02", 3), rep("S06", 2)),
    esituation_12 = c(rep("S09.90", 2), rep("S06.0X9", 3)),
    evitals_06 = c(85, 80, 100, 90, 82),
    evitals_12 = c(95, 96, 97, 98, 99),
    evitals_16 = c(35, 36, 37, 38, 39),
    evitals_23 = rep(8, 5),
    evitals_26 = c("Verbal", "Painful", "Unresponsive", "Verbal", "Painful"),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  tbi_01(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_11_col = esituation_11,
    esituation_12_col = esituation_12,
    evitals_06_col = evitals_06,
    evitals_12_col = evitals_12,
    evitals_16_col = evitals_16,
    evitals_23_col = evitals_23,
    evitals_26_col = evitals_26,
    transport_disposition_col = edisposition_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='tbi_01_population'>TBI-01 Populations</h2><span id='topic+tbi_01_population'></span>

<h3>Description</h3>

<p>This function screens for potential traumatic brain injury (TBI) cases based
on specific criteria in a patient dataset. It produces a subset of the data
with calculated variables for TBI identification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tbi_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  esituation_11_col,
  esituation_12_col,
  transport_disposition_col,
  evitals_06_col,
  evitals_12_col,
  evitals_16_col,
  evitals_23_col,
  evitals_26_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tbi_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the patient data.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name in df with the patients unique record ID.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name in df with the patients age value.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name in df with the patients age unit (e.g.,
years, months).</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name in df with response codes for the type of
EMS call.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_esituation_11_col">esituation_11_col</code></td>
<td>
<p>Column name in df with the primary provider
impression.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_esituation_12_col">esituation_12_col</code></td>
<td>
<p>Column name in df with the secondary provider
impression.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Column name in df with the transport
disposition.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name in df with systolic blood pressure (SBP).</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name in df with pulse oximetry values.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_evitals_16_col">evitals_16_col</code></td>
<td>
<p>Column name in df with ETC02 values.
values.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column name in df with Glasgow Coma Scale (GCS) scores.</p>
</td></tr>
<tr><td><code id="tbi_01_population_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column name in df with AVPU (alert, verbal, painful,
unresponsive) values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_11 = c(rep("S02", 3), rep("S06", 2)),
    esituation_12 = c(rep("S09.90", 2), rep("S06.0X9", 3)),
  )


  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_06 = c(85, 80, 100, 90, 82),
    evitals_12 = c(95, 96, 97, 98, 99),
    evitals_16 = c(35, 36, 37, 38, 39),
    evitals_23 = rep(8, 5),
    evitals_26 = c("Verbal", "Painful", "Unresponsive", "Verbal", "Painful")
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

# test the success of the function
  result &lt;- tbi_01_population(patient_scene_table = patient_table,
                         response_table = response_table,
                         situation_table = situation_table,
                         vitals_table = vitals_table,
                         disposition_table = disposition_table,
                         erecord_01_col = erecord_01,
                         epatient_15_col = epatient_15,
                         epatient_16_col = epatient_16,
                         eresponse_05_col = eresponse_05,
                         esituation_11_col = esituation_11,
                         esituation_12_col = esituation_12,
                         evitals_06_col = evitals_06,
                         evitals_12_col = evitals_12,
                         evitals_16_col = evitals_16,
                         evitals_23_col = evitals_23,
                         evitals_26_col = evitals_26,
                         transport_disposition_col = edisposition_30
                     )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='trauma_01'>Trauma-01 Calculation</h2><span id='topic+trauma_01'></span>

<h3>Description</h3>

<p>This function processes EMS data to calculate the Trauma-01 performance
measure, which evaluates the percentage of trauma patients assessed for pain
using a numeric scale. The function filters and summarizes the data based on
specified inclusion criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  evitals_23_col,
  evitals_26_col,
  evitals_27_col,
  edisposition_28_col,
  transport_disposition_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS records. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name representing the EMS record ID.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for the patient's age in numeric format.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for the unit of age (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>Column name indicating if the situation involved an
injury.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for the type of EMS response (e.g., 911
call).</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column name for the Glasgow Coma Scale (GCS) total
score.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column name for AVPU (Alert, Voice, Pain, Unresponsive)
status.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_evitals_27_col">evitals_27_col</code></td>
<td>
<p>Column name for the pain scale assessment.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>Column name for patient care disposition details.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Column name for transport disposition
details.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_02 = rep("Yes", 5),
    evitals_23 = rep(15, 5),
    evitals_26 = rep("Alert", 5),
    evitals_27 = c(0, 2, 4, 6, 8),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

# Run the function
# Return 95% confidence intervals using the Wilson method
  trauma_01(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_02_col = esituation_02,
    evitals_23_col = evitals_23,
    evitals_26_col = evitals_26,
    evitals_27_col = evitals_27,
    edisposition_28_col = edisposition_28,
    transport_disposition_col = edisposition_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='trauma_01_population'>Trauma-01 Population</h2><span id='topic+trauma_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Trauma-08, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories to records that are 911 requests for patients with
injury who were assessed for pain based on specific criteria and calculates
related ECG measures. This function segments the data by age into adult and
pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  evitals_23_col,
  evitals_26_col,
  evitals_27_col,
  edisposition_28_col,
  transport_disposition_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS records. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>Column name representing the EMS record ID.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column name for the incident date. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column name for the patient's date of birth. Default
is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>Column name for the patient's age in numeric format.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>Column name for the unit of age (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>Column name indicating if the situation involved an
injury.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>Column name for the type of EMS response (e.g., 911
call).</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>Column name for the Glasgow Coma Scale (GCS) total
score.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>Column name for AVPU (Alert, Voice, Pain, Unresponsive)
status.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_evitals_27_col">evitals_27_col</code></td>
<td>
<p>Column name for the pain scale assessment.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>Column name for patient care disposition details.</p>
</td></tr>
<tr><td><code id="trauma_01_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>Column name for transport disposition
details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_02 = rep("Yes", 5),
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_23 = rep(15, 5),
    evitals_26 = rep("Alert", 5),
    evitals_27 = c(0, 2, 4, 6, 8)
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

  # test the success of the function
  result &lt;- trauma_01_population(patient_scene_table = patient_table,
                     response_table = response_table,
                     situation_table = situation_table,
                     vitals_table = vitals_table,
                     disposition_table = disposition_table,
                     erecord_01_col = erecord_01,
                     incident_date_col = incident_date,
                     patient_DOB_col = patient_dob,
                     epatient_15_col = epatient_15,
                     epatient_16_col = epatient_16,
                     eresponse_05_col = eresponse_05,
                     esituation_02_col = esituation_02,
                     evitals_23_col = evitals_23,
                     evitals_26_col = evitals_26,
                     evitals_27_col = evitals_27,
                     edisposition_28_col = edisposition_28,
                     transport_disposition_col = edisposition_30
                     )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='trauma_03'>Trauma-03 Calculation</h2><span id='topic+trauma_03'></span>

<h3>Description</h3>

<p>This function calculates the &quot;Trauma-03&quot; measure, which evaluates pain scale
reassessment for trauma patients, using a comprehensive data frame with EMS
records. The function processes input data to create both fact and dimension
tables, identifies eligible patients, and summarizes results for adult and
pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_03(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  edisposition_28_col,
  transport_disposition_col,
  evitals_01_col,
  evitals_27_col = NULL,
  evitals_27_initial_col = NULL,
  evitals_27_last_col = NULL,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_03_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>The column for patient care disposition details.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>The column for the time of pain scale measurement.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_evitals_27_col">evitals_27_col</code></td>
<td>
<p>The column for the full set of pain scale scores.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_evitals_27_initial_col">evitals_27_initial_col</code></td>
<td>
<p>The column for the initial pain scale score.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_evitals_27_last_col">evitals_27_last_col</code></td>
<td>
<p>The column for the last pain scale score.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Synthetic test data
# for testing a single pain scale column
  test_data2 &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_02 = rep("Yes", 5),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 12:00:00", "2025-01-05
    18:00:00", "2025-02-01 06:00:00", "2025-01-01 01:00:00", "2025-06-01
    14:00:00")),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

  # Expand data so each erecord_01 has 2 rows (one for each pain score)
  test_data_expanded2 &lt;- test_data2 |&gt;
    tidyr::uncount(weights = 2) |&gt;  # Duplicate each row twice
    # Assign pain scores
    dplyr::mutate(evitals_27 = c(0, 0, 2, 1, 4, 3, 6, 5, 8, 7)) |&gt;
    dplyr::group_by(erecord_01) |&gt;
    dplyr::mutate(
    # Lower score = later time
      time_offset = dplyr::if_else(dplyr::row_number() == 1, -5, 0),
      evitals_01 = evitals_01 + lubridate::dminutes(time_offset)
    ) |&gt;
    dplyr::ungroup() |&gt;
    dplyr::select(-time_offset)  # Remove temporary column

# Run function with the single pain score column
# Return 95% confidence intervals using the Wilson method
  trauma_03(
    df = test_data_expanded2,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_02_col = esituation_02,
    evitals_01_col = evitals_01,
    evitals_27_initial_col = NULL,
    evitals_27_last_col = NULL,
    evitals_27_col = evitals_27,
    edisposition_28_col = edisposition_28,
    transport_disposition_col = edisposition_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='trauma_03_population'>Trauma-03 Populations</h2><span id='topic+trauma_03_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Trauma-08, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories to records that are 911 request for patients whose
pain score was lowered during the EMS encounter. based on specific criteria
and calculates related ECG measures. This function segments the data by age
into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_03_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  evitals_01_col,
  evitals_27_col = NULL,
  evitals_27_initial_col = NULL,
  evitals_27_last_col = NULL,
  edisposition_28_col,
  transport_disposition_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_03_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_evitals_01_col">evitals_01_col</code></td>
<td>
<p>The column for the time of pain scale measurement.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_evitals_27_col">evitals_27_col</code></td>
<td>
<p>The column for the pain scale score. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_evitals_27_initial_col">evitals_27_initial_col</code></td>
<td>
<p>The column for the initial pain scale score.
Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_evitals_27_last_col">evitals_27_last_col</code></td>
<td>
<p>The column for the last pain scale score. Default
is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_edisposition_28_col">edisposition_28_col</code></td>
<td>
<p>The column for patient care disposition details.</p>
</td></tr>
<tr><td><code id="trauma_03_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)

  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_02 = rep("Yes", 5),
  )

  # vitals table for a single pain scale column
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_01 = lubridate::as_datetime(c("2025-01-01 12:00:00", "2025-01-05
    18:00:00", "2025-02-01 06:00:00", "2025-01-01 01:00:00", "2025-06-01
    14:00:00"))
  ) |&gt;
    tidyr::uncount(weights = 2) |&gt;  # Duplicate each row twice
    # Assign pain scores
    dplyr::mutate(evitals_27 = c(0, 0, 2, 1, 4, 3, 6, 5, 8, 7)) |&gt;
    dplyr::group_by(erecord_01) |&gt;
    dplyr::mutate(
    # Lower score = later time
      time_offset = dplyr::if_else(dplyr::row_number() == 1, -5, 0),
      evitals_01 = evitals_01 + lubridate::dminutes(time_offset)
    ) |&gt;
    dplyr::ungroup() |&gt;
    dplyr::select(-time_offset)  # Remove temporary column

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_28 = rep(4228001, 5),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

# test the success of the function
# use the single pain scale column
  result &lt;- trauma_03_population(patient_scene_table = patient_table,
                        response_table = response_table,
                        situation_table = situation_table,
                        vitals_table = vitals_table,
                        disposition_table = disposition_table,
                        erecord_01_col = erecord_01,
                        incident_date_col = incident_date,
                        patient_DOB_col = patient_dob,
                        epatient_15_col = epatient_15,
                        epatient_16_col = epatient_16,
                        eresponse_05_col = eresponse_05,
                        esituation_02_col = esituation_02,
                        evitals_01_col = evitals_01,
                        evitals_27_initial_col = NULL,
                        evitals_27_last_col = NULL,
                        evitals_27_col = evitals_27,
                        edisposition_28_col = edisposition_28,
                        transport_disposition_col = edisposition_30
                        )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='trauma_04'>Trauma-04 Calculations</h2><span id='topic+trauma_04'></span>

<h3>Description</h3>

<p>This function processes EMS data to generate a set of binary variables
indicating whether specific trauma triage criteria are met. The output is a
data frame enriched with these indicators for further analysis.  The final
outcome is whether or not the EMS record documents the use of a verified
trauma center levels 1-5 in the hospital capability documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_04(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  exam_table = NULL,
  procedures_table = NULL,
  injury_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  eresponse_10_col,
  transport_disposition_col,
  edisposition_23_col,
  evitals_06_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_15_col,
  evitals_21_col,
  eexam_16_col,
  eexam_20_col,
  eexam_23_col,
  eexam_25_col,
  eprocedures_03_col,
  einjury_01_col,
  einjury_03_col,
  einjury_04_col,
  einjury_09_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_04_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only epatient
and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eresponse
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_exam_table">exam_table</code></td>
<td>
<p>A data.frame or tibble containing only the eexam fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eprocedures fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_injury_table">injury_table</code></td>
<td>
<p>A data.frame or tibble containing only the einjury fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eresponse_10_col">eresponse_10_col</code></td>
<td>
<p>Column name containing scene delay information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_edisposition_23_col">edisposition_23_col</code></td>
<td>
<p>Column name containing trauma hospital
verification information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name containing systolic blood pressure (SBP)
values.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>Column name containing heart rate values.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name containing capillary refill information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_15_col">evitals_15_col</code></td>
<td>
<p>Column name containing respiratory effort values.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_evitals_21_col">evitals_21_col</code></td>
<td>
<p>Column name containing Glasgow Coma Scale (GCS) Motor
values.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eexam_16_col">eexam_16_col</code></td>
<td>
<p>Column name containing extremities assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eexam_20_col">eexam_20_col</code></td>
<td>
<p>Column name containing neurological assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eexam_23_col">eexam_23_col</code></td>
<td>
<p>Column name containing lung assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eexam_25_col">eexam_25_col</code></td>
<td>
<p>Column name containing chest assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name containing airway management or
tourniquet usage details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_einjury_01_col">einjury_01_col</code></td>
<td>
<p>Column name containing injury cause details.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column name containing trauma triage steps 1 and 2
information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_einjury_04_col">einjury_04_col</code></td>
<td>
<p>Column name containing trauma triage steps 3 and 4
information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_einjury_09_col">einjury_09_col</code></td>
<td>
<p>Column name containing fall height information.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trauma_04_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    eresponse_10 = rep(2210011, 5),
    esituation_02 = rep("Yes", 5),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_15 = c("apneic", "labored", "rapid", "shallow", "weak/agonal"),
    evitals_21 = c(5, 4, 3, 2, 1),
    eexam_16 = c(3516043, 3516067, 3516043, 3516067, 3516067),
    eexam_20 = c(3520045, 3520043, 3520019, 3520017, 3520017),
    eexam_23 = c(3523011, 3523003, 3523001, 3523011, 3523003),
    eexam_25 = c(3525039, 3525023, 3525005, 3525039, 3525023),
    edisposition_23 = c(9908029, 9908027, 9908025, 9908023, 9908021),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007),
    eprocedures_03 = c(424979004, 427753009, 429705000, 47545007, 243142003),
    einjury_01 = c("V20", "V36", "V86", "V39", "V32"),
    einjury_03 = c(2903011, 2903009, 2903005, 3903003, 2903001),
    einjury_04 = c(2904013, 2904011, 2904009, 2904007, 2904001),
    einjury_09 = c(11, 12, 13, 14, 15)
  )

  # Run function with the first and last pain score columns
  # Return 95% confidence intervals using the Wilson method
  trauma_04(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    eresponse_10_col = eresponse_10,
    esituation_02_col = esituation_02,
    evitals_06_col = evitals_06,
    evitals_10_col = evitals_10,
    evitals_12_col = evitals_12,
    evitals_14_col = evitals_14,
    evitals_15_col = evitals_15,
    evitals_21_col = evitals_21,
    eexam_16_col = eexam_16,
    eexam_20_col = eexam_20,
    eexam_23_col = eexam_23,
    eexam_25_col = eexam_25,
    edisposition_23_col = edisposition_23,
    transport_disposition_col = edisposition_30,
    eprocedures_03_col = eprocedures_03,
    einjury_01_col = einjury_01,
    einjury_03_col = einjury_03,
    einjury_04_col = einjury_04,
    einjury_09_col = einjury_09,
    confidence_interval = TRUE
  )


</code></pre>

<hr>
<h2 id='trauma_04_population'>Trauma-04 Populations</h2><span id='topic+trauma_04_population'></span>

<h3>Description</h3>

<p>This function processes EMS data to generate the population needed to
calculated the Trauma-04 NEMSQA measure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_04_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  exam_table = NULL,
  procedures_table = NULL,
  injury_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  eresponse_10_col,
  transport_disposition_col,
  edisposition_23_col,
  evitals_06_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_15_col,
  evitals_21_col,
  eexam_16_col,
  eexam_20_col,
  eexam_23_col,
  eexam_25_col,
  eprocedures_03_col,
  einjury_01_col,
  einjury_03_col,
  einjury_04_col,
  einjury_09_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_04_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data.frame or tibble containing only epatient
and escene fields as a fact table.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_response_table">response_table</code></td>
<td>
<p>A data.frame or tibble containing only the eresponse
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data.frame or tibble containing only the esituation
fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data.frame or tibble containing only the evitals fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_exam_table">exam_table</code></td>
<td>
<p>A data.frame or tibble containing only the eexam fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data.frame or tibble containing only the
eprocedures fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_injury_table">injury_table</code></td>
<td>
<p>A data.frame or tibble containing only the einjury fields
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data.frame or tibble containing only the
edisposition fields needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>The column indicating the incident date. Must be of
class <code>Date</code> or similar.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>The column representing the patient's date of birth.
Must be of class <code>Date</code> or similar.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eresponse_10_col">eresponse_10_col</code></td>
<td>
<p>Column name containing scene delay information.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_edisposition_23_col">edisposition_23_col</code></td>
<td>
<p>Column name containing trauma hospital
verification information.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name containing systolic blood pressure (SBP)
values.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>Column name containing heart rate values.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name containing capillary refill information.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_15_col">evitals_15_col</code></td>
<td>
<p>Column name containing respiratory effort values.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_evitals_21_col">evitals_21_col</code></td>
<td>
<p>Column name containing Glasgow Coma Scale (GCS) Motor
values.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eexam_16_col">eexam_16_col</code></td>
<td>
<p>Column name containing extremities assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eexam_20_col">eexam_20_col</code></td>
<td>
<p>Column name containing neurological assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eexam_23_col">eexam_23_col</code></td>
<td>
<p>Column name containing lung assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eexam_25_col">eexam_25_col</code></td>
<td>
<p>Column name containing chest assessment details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name containing airway management or
tourniquet usage details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_einjury_01_col">einjury_01_col</code></td>
<td>
<p>Column name containing injury cause details.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column name containing trauma triage steps 1 and 2
information.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_einjury_04_col">einjury_04_col</code></td>
<td>
<p>Column name containing trauma triage steps 3 and 4
information.</p>
</td></tr>
<tr><td><code id="trauma_04_population_+3A_einjury_09_col">einjury_09_col</code></td>
<td>
<p>Column name containing fall height information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05",
                              "2025-02-01", "2025-01-01",
                              "2025-06-01")
                              ),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01",
                            "2023-02-01", "2023-01-01",
                            "1970-06-01")
                            ),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5),
    eresponse_10 = rep(2210011, 5)
  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_02 = rep("Yes", 5),
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_15 = c("apneic", "labored", "rapid", "shallow", "weak/agonal"),
    evitals_21 = c(5, 4, 3, 2, 1)
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_23 = c(9908029, 9908027, 9908025, 9908023, 9908021),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

  # injury table
  injury_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    einjury_01 = c("V20", "V36", "V86", "V39", "V32"),
    einjury_03 = c(2903011, 2903009, 2903005, 3903003, 2903001),
    einjury_04 = c(2904013, 2904011, 2904009, 2904007, 2904001),
    einjury_09 = c(11, 12, 13, 14, 15)
  )

  # exam table
  exam_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eexam_16 = c(3516043, 3516067, 3516043, 3516067, 3516067),
    eexam_20 = c(3520045, 3520043, 3520019, 3520017, 3520017),
    eexam_23 = c(3523011, 3523003, 3523001, 3523011, 3523003),
    eexam_25 = c(3525039, 3525023, 3525005, 3525039, 3525023)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eprocedures_03 = c(424979004, 427753009, 429705000, 47545007, 243142003)
  )

  # test the success of the function
  result &lt;- trauma_04_population(patient_scene_table = patient_table,
                        response_table = response_table,
                        situation_table = situation_table,
                        vitals_table = vitals_table,
                        disposition_table = disposition_table,
                      exam_table = exam_table,
                      injury_table = injury_table,
                      procedures_table = procedures_table,
                      erecord_01_col = erecord_01,
                      incident_date_col = incident_date,
                      patient_DOB_col = patient_dob,
                      epatient_15_col = epatient_15,
                      epatient_16_col = epatient_16,
                      eresponse_05_col = eresponse_05,
                      eresponse_10_col = eresponse_10,
                      esituation_02_col = esituation_02,
                      evitals_06_col = evitals_06,
                      evitals_10_col = evitals_10,
                      evitals_12_col = evitals_12,
                      evitals_14_col = evitals_14,
                      evitals_15_col = evitals_15,
                      evitals_21_col = evitals_21,
                      eexam_16_col = eexam_16,
                      eexam_20_col = eexam_20,
                      eexam_23_col = eexam_23,
                      eexam_25_col = eexam_25,
                      edisposition_23_col = edisposition_23,
                      transport_disposition_col = edisposition_30,
                      eprocedures_03_col = eprocedures_03,
                      einjury_01_col = einjury_01,
                      einjury_03_col = einjury_03,
                      einjury_04_col = einjury_04,
                      einjury_09_col = einjury_09
                      )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='trauma_08'>Trauma-08 Calculation</h2><span id='topic+trauma_08'></span>

<h3>Description</h3>

<p>This function calculates the Trauma-08 measure, which evaluates the
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_08(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  transport_disposition_col,
  evitals_06_col,
  evitals_14_col,
  evitals_23_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_08_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>A column specifying unique patient records.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>A column indicating the patients age in numeric form.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>A column specifying the unit of patient age (e.g.,
&quot;Years&quot;, &quot;Days&quot;).</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>A column containing information about the nature of
the patients condition (e.g., injury type).</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>A column specifying the type of response (e.g., 911
codes).</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>A column specifying transport disposition
for the patient.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>A column containing systolic blood pressure (SBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>A column containing respiratory rate data from initial
vital signs.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>A column containing total Glasgow Coma Scale (GCS)
scores from initial vital signs.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    esituation_02 = rep("Yes", 5),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_23 = c(6, 7, 8, 8, 7),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

  # Run function with the first and last pain score columns
  # Return 95% confidence intervals using the Wilson method
  trauma_08(
    df = test_data,
    erecord_01_col = erecord_01,
    incident_date_col = NULL,
    patient_DOB_col = NULL,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    esituation_02_col = esituation_02,
    evitals_06_col = evitals_06,
    evitals_14_col = evitals_14,
    evitals_23_col = evitals_23,
    transport_disposition_col = edisposition_30,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='trauma_08_population'>Trauma-08 Populations</h2><span id='topic+trauma_08_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for Trauma-08, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories to records that are 911 requests for patients with
trauma during which GCS, systolic blood pressure, and respiratory rate are
documented based on specific criteria and calculates related ECG measures.
This function segments the data by age into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_08_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  transport_disposition_col,
  evitals_06_col,
  evitals_14_col,
  evitals_23_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_08_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing only the esituation
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>A column specifying unique patient records.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>A column indicating the patients age in numeric form.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>A column specifying the unit of patient age (e.g.,
&quot;Years&quot;, &quot;Days&quot;).</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>A column containing information about the nature of
the patients condition (e.g., injury type).</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>A column specifying the type of response (e.g., 911
codes).</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>A column specifying transport disposition
for the patient.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>A column containing systolic blood pressure (SBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>A column containing respiratory rate data from initial
vital signs.</p>
</td></tr>
<tr><td><code id="trauma_08_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>A column containing total Glasgow Coma Scale (GCS)
scores from initial vital signs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
    "2023-01-01", "1970-06-01")),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5)
  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_02 = rep("Yes", 5)
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_23 = c(6, 7, 8, 8, 7),
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

# test the success of the function
  result &lt;- trauma_08_population(patient_scene_table = patient_table,
                      response_table = response_table,
                      situation_table = situation_table,
                      vitals_table = vitals_table,
                      disposition_table = disposition_table,
                      erecord_01_col = erecord_01,
                      incident_date_col = incident_date,
                      patient_DOB_col = patient_dob,
                      epatient_15_col = epatient_15,
                      epatient_16_col = epatient_16,
                      eresponse_05_col = eresponse_05,
                      esituation_02_col = esituation_02,
                      evitals_06_col = evitals_06,
                      evitals_14_col = evitals_14,
                      evitals_23_col = evitals_23,
                      transport_disposition_col = edisposition_30
                      )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='trauma_14'>Trauma-14 Calculation</h2><span id='topic+trauma_14'></span>

<h3>Description</h3>

<p>This function processes EMS data to generate a set of binary variables
indicating whether specific trauma triage criteria are met. The output #' is
a data frame enriched with these indicators for further analysis.  The final
outcome is whether or not the EMS record documents the use of #' a
pre-hospital trauma activation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_14(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  situation_table = NULL,
  vitals_table = NULL,
  exam_table = NULL,
  procedures_table = NULL,
  injury_table = NULL,
  disposition_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  eresponse_10_col,
  transport_disposition_col,
  edisposition_24_col,
  evitals_06_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_15_col,
  evitals_21_col,
  eexam_16_col,
  eexam_20_col,
  eexam_23_col,
  eexam_25_col,
  eprocedures_03_col,
  einjury_01_col,
  einjury_03_col,
  einjury_04_col,
  einjury_09_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_14_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing fields from
epatient and escene needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing fields from eresponse
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing fields from
esituation needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing fields from evitals
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_exam_table">exam_table</code></td>
<td>
<p>A data frame or tibble containing fields from eexam needed
for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing fields from
eprocedures needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_injury_table">injury_table</code></td>
<td>
<p>A data frame or tibble containing fields from einjury
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing fields from
edisposition needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eresponse_10_col">eresponse_10_col</code></td>
<td>
<p>Column name containing scene delay information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_edisposition_24_col">edisposition_24_col</code></td>
<td>
<p>Column name containing pre-hospital trauma alert
information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name containing systolic blood pressure (SBP)
values.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>Column name containing heart rate values.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name containing capillary refill information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_15_col">evitals_15_col</code></td>
<td>
<p>Column name containing respiratory effort values.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_evitals_21_col">evitals_21_col</code></td>
<td>
<p>Column name containing Glasgow Coma Scale (GCS) Motor
values.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eexam_16_col">eexam_16_col</code></td>
<td>
<p>Column name containing extremities assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eexam_20_col">eexam_20_col</code></td>
<td>
<p>Column name containing neurological assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eexam_23_col">eexam_23_col</code></td>
<td>
<p>Column name containing lung assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eexam_25_col">eexam_25_col</code></td>
<td>
<p>Column name containing chest assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name containing airway management or
tourniquet usage details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_einjury_01_col">einjury_01_col</code></td>
<td>
<p>Column name containing injury cause details.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column name containing trauma triage steps 1 and 2
information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_einjury_04_col">einjury_04_col</code></td>
<td>
<p>Column name containing trauma triage steps 3 and 4
information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_einjury_09_col">einjury_09_col</code></td>
<td>
<p>Column name containing fall height information.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="trauma_14_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    eresponse_10 = rep(2210011, 5),
    esituation_02 = rep("Yes", 5),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_15 = c("apneic", "labored", "rapid", "shallow", "weak/agonal"),
    evitals_21 = c(5, 4, 3, 2, 1),
    eexam_16 = c(3516043, 3516067, 3516043, 3516067, 3516067),
    eexam_20 = c(3520045, 3520043, 3520019, 3520017, 3520017),
    eexam_23 = c(3523011, 3523003, 3523001, 3523011, 3523003),
    eexam_25 = c(3525039, 3525023, 3525005, 3525039, 3525023),
    edisposition_24 = c(4224017, 4224003, 4224017, 4224003, 4224017),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007),
    eprocedures_03 = c(424979004, 427753009, 429705000, 47545007, 243142003),
    einjury_01 = c("V20", "V36", "V86", "V39", "V32"),
    einjury_03 = c(2903011, 2903009, 2903005, 3903003, 2903001),
    einjury_04 = c(2904013, 2904011, 2904009, 2904007, 2904001),
    einjury_09 = c(11, 12, 13, 14, 15)
  )

  # Run function with the first and last pain score columns
  # Return 95% confidence intervals using the Wilson method
  trauma_14(
    df = test_data,
    erecord_01_col = erecord_01,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    eresponse_10_col = eresponse_10,
    esituation_02_col = esituation_02,
    evitals_06_col = evitals_06,
    evitals_10_col = evitals_10,
    evitals_12_col = evitals_12,
    evitals_14_col = evitals_14,
    evitals_15_col = evitals_15,
    evitals_21_col = evitals_21,
    eexam_16_col = eexam_16,
    eexam_20_col = eexam_20,
    eexam_23_col = eexam_23,
    eexam_25_col = eexam_25,
    edisposition_24_col = edisposition_24,
    transport_disposition_col = edisposition_30,
    eprocedures_03_col = eprocedures_03,
    einjury_01_col = einjury_01,
    einjury_03_col = einjury_03,
    einjury_04_col = einjury_04,
    einjury_09_col = einjury_09,
    confidence_interval = TRUE
  )

</code></pre>

<hr>
<h2 id='trauma_14_population'>Trauma-14 Population</h2><span id='topic+trauma_14_population'></span>

<h3>Description</h3>

<p>This function processes EMS data to generate the population needed to
calculate the Trauma-14 NEMSQA measure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trauma_14_population(
  df = NULL,
  patient_scene_table = NULL,
  situation_table = NULL,
  response_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  exam_table = NULL,
  procedures_table = NULL,
  injury_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  esituation_02_col,
  eresponse_05_col,
  eresponse_10_col,
  transport_disposition_col,
  edisposition_24_col,
  evitals_06_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_15_col,
  evitals_21_col,
  eexam_16_col,
  eexam_20_col,
  eexam_23_col,
  eexam_25_col,
  eprocedures_03_col,
  einjury_01_col,
  einjury_03_col,
  einjury_04_col,
  einjury_09_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trauma_14_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing EMS data with all relevant
columns.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing fields from
epatient and escene needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_situation_table">situation_table</code></td>
<td>
<p>A data frame or tibble containing fields from
esituation needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing fields from eresponse
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing fields from
edisposition needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing fields from evitals
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_exam_table">exam_table</code></td>
<td>
<p>A data frame or tibble containing fields from eexam needed
for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_procedures_table">procedures_table</code></td>
<td>
<p>A data frame or tibble containing fields from
eprocedures needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_injury_table">injury_table</code></td>
<td>
<p>A data frame or tibble containing fields from einjury
needed for this measure's calculations.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>The column representing the EMS record unique
identifier.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>The column for patient age numeric value.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>The column for patient age unit (e.g., &quot;Years&quot;,
&quot;Months&quot;).</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_esituation_02_col">esituation_02_col</code></td>
<td>
<p>The column containing information on the presence of
injury.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>The column representing the 911 response type.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eresponse_10_col">eresponse_10_col</code></td>
<td>
<p>Column name containing scene delay information.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>The column for patient transport
disposition.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_edisposition_24_col">edisposition_24_col</code></td>
<td>
<p>Column name containing pre-hospital trauma alert
information.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>Column name containing systolic blood pressure (SBP)
values.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>Column name containing heart rate values.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>Column name containing pulse oximetry values.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>Column name containing capillary refill information.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_15_col">evitals_15_col</code></td>
<td>
<p>Column name containing respiratory effort values.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_evitals_21_col">evitals_21_col</code></td>
<td>
<p>Column name containing Glasgow Coma Scale (GCS) Motor
values.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eexam_16_col">eexam_16_col</code></td>
<td>
<p>Column name containing extremities assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eexam_20_col">eexam_20_col</code></td>
<td>
<p>Column name containing neurological assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eexam_23_col">eexam_23_col</code></td>
<td>
<p>Column name containing lung assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eexam_25_col">eexam_25_col</code></td>
<td>
<p>Column name containing chest assessment details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_eprocedures_03_col">eprocedures_03_col</code></td>
<td>
<p>Column name containing airway management or
tourniquet usage details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_einjury_01_col">einjury_01_col</code></td>
<td>
<p>Column name containing injury cause details.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_einjury_03_col">einjury_03_col</code></td>
<td>
<p>Column name containing trauma triage steps 1 and 2
information.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_einjury_04_col">einjury_04_col</code></td>
<td>
<p>Column name containing trauma triage steps 3 and 4
information.</p>
</td></tr>
<tr><td><code id="trauma_14_population_+3A_einjury_09_col">einjury_09_col</code></td>
<td>
<p>Column name containing fall height information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
    "2023-01-01", "1970-06-01")),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5),
    eresponse_10 = rep(2210011, 5)
  )

  # situation table
  situation_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    esituation_02 = rep("Yes", 5),
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_15 = c("apneic", "labored", "rapid", "shallow", "weak/agonal"),
    evitals_21 = c(5, 4, 3, 2, 1)
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_24 = c(4224017, 4224003, 4224017, 4224003, 4224017),
    edisposition_30 = c(4230001, 4230003, 4230001, 4230007, 4230007)
  )

  # injury table
  injury_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    einjury_01 = c("V20", "V36", "V86", "V39", "V32"),
    einjury_03 = c(2903011, 2903009, 2903005, 3903003, 2903001),
    einjury_04 = c(2904013, 2904011, 2904009, 2904007, 2904001),
    einjury_09 = c(11, 12, 13, 14, 15)
  )

  # exam table
  exam_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eexam_16 = c(3516043, 3516067, 3516043, 3516067, 3516067),
    eexam_20 = c(3520045, 3520043, 3520019, 3520017, 3520017),
    eexam_23 = c(3523011, 3523003, 3523001, 3523011, 3523003),
    eexam_25 = c(3525039, 3525023, 3525005, 3525039, 3525023)
  )

  # procedures table
  procedures_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eprocedures_03 = c(424979004, 427753009, 429705000, 47545007, 243142003)
  )

  # test the success of the function
  result &lt;- trauma_14_population(patient_scene_table = patient_table,
                      response_table = response_table,
                      situation_table = situation_table,
                      vitals_table = vitals_table,
                      disposition_table = disposition_table,
                      exam_table = exam_table,
                      injury_table = injury_table,
                      procedures_table = procedures_table,
                      erecord_01_col = erecord_01,
                      incident_date_col = incident_date,
                      patient_DOB_col = patient_dob,
                      epatient_15_col = epatient_15,
                      epatient_16_col = epatient_16,
                      eresponse_05_col = eresponse_05,
                      eresponse_10_col = eresponse_10,
                      esituation_02_col = esituation_02,
                      evitals_06_col = evitals_06,
                      evitals_10_col = evitals_10,
                      evitals_12_col = evitals_12,
                      evitals_14_col = evitals_14,
                      evitals_15_col = evitals_15,
                      evitals_21_col = evitals_21,
                      eexam_16_col = eexam_16,
                      eexam_20_col = eexam_20,
                      eexam_23_col = eexam_23,
                      eexam_25_col = eexam_25,
                      edisposition_24_col = edisposition_24,
                      transport_disposition_col = edisposition_30,
                      eprocedures_03_col = eprocedures_03,
                      einjury_01_col = einjury_01,
                      einjury_03_col = einjury_03,
                      einjury_04_col = einjury_04,
                      einjury_09_col = einjury_09
  )

# show the results of filtering at each step
result$filter_process

</code></pre>

<hr>
<h2 id='ttr_01'>TTR-01 Calculation</h2><span id='topic+ttr_01'></span>

<h3>Description</h3>

<p>This function calculates the TTR-01 measure, which evaluates the completeness
of vitals documentation for patients not experiencing cardiac arrest who were
also not transported during a 911 response. It determines the total
population, adult population, and pediatric population meeting the criteria
for the TTR_01 measure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ttr_01(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  arrest_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  transport_disposition_col,
  earrest_01_col,
  evitals_06_col,
  evitals_07_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_23_col,
  evitals_26_col,
  confidence_interval = FALSE,
  method = c("wilson", "clopper-pearson"),
  conf.level = 0.95,
  correct = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ttr_01_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset to analyze. Default
is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data frame or tibble containing only the earrest fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>A column specifying unique patient records.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>A column indicating the patients age in numeric form.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>A column specifying the unit of patient age (e.g.,
&quot;Years&quot;, &quot;Days&quot;).</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>A column specifying the type of response (e.g., 911
codes).</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>A column specifying transport disposition
for the patient.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>A column containing cardiac arrest data.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>A column containing systolic blood pressure (SBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_07_col">evitals_07_col</code></td>
<td>
<p>A column containing diastolic blood pressure (DBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>A column containing heart rate data from initial vital
signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>A column containing spO2 data from the initial vital
signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>A column containing respiratory rate data from initial
vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>A column containing total Glasgow Coma Scale (GCS)
scores from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>A column containing alert, verbal, painful,
unresponsive (AVPU) vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_confidence_interval">confidence_interval</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Logical. If
<code>TRUE</code>, the function calculates a confidence interval for the proportion
estimate.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_method">method</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Character. Specifies the
method used to calculate confidence intervals. Options are <code>"wilson"</code>
(Wilson score interval) and <code>"clopper-pearson"</code> (exact binomial interval).
Partial matching is supported, so <code>"w"</code> and <code>"c"</code> can be used as shorthand.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_conf.level">conf.level</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Numeric. The confidence
level for the interval, expressed as a proportion (e.g., 0.95 for a 95%
confidence interval). Defaults to 0.95.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_correct">correct</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>Logical. If <code>TRUE</code>,
applies a continuity correction to the Wilson score interval when <code>method = "wilson"</code>. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_+3A_...">...</code></td>
<td>
<p>optional additional arguments to pass onto <code>dplyr::summarize</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame summarizing results for two population groups (All,
Adults and Peds) with the following columns:
</p>

<ul>
<li> <p><code>pop</code>: Population type (All, Adults, and Peds).
</p>
</li>
<li> <p><code>numerator</code>: Count of incidents meeting the measure.
</p>
</li>
<li> <p><code>denominator</code>: Total count of included incidents.
</p>
</li>
<li> <p><code>prop</code>: Proportion of incidents meeting the measure.
</p>
</li>
<li> <p><code>prop_label</code>: Proportion formatted as a percentage with a specified number
of decimal places.
</p>
</li>
<li> <p><code>lower_ci</code>: Lower bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li>
<li> <p><code>upper_ci</code>: Upper bound of the confidence interval for <code>prop</code>
(if <code>confidence_interval = TRUE</code>).
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Synthetic test data
  test_data &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
    "2023-01-01", "1970-06-01")),
    epatient_15 = c(34, 5, 45, 2, 60),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Months", "Years"),
    eresponse_05 = rep(2205001, 5),
    earrest_01 = rep("No", 5),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_07 = c(80, 90, 50, 60, 87),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_23 = c(6, 7, 8, 9, 10),
    evitals_26 = c(3326007, 3326005, 3326003, 3326001, 3326007),
    edisposition_30 = c(4230013, 4230009, 4230013, 4230009, 4230013)
  )

  # Run function with the first and last pain score columns
  # Return 95% confidence intervals using the Wilson method
  ttr_01(
    df = test_data,
    erecord_01_col = erecord_01,
    incident_date_col = incident_date,
    patient_DOB_col = patient_dob,
    epatient_15_col = epatient_15,
    epatient_16_col = epatient_16,
    eresponse_05_col = eresponse_05,
    earrest_01_col = earrest_01,
    evitals_06_col = evitals_06,
    evitals_07_col = evitals_07,
    evitals_10_col = evitals_10,
    evitals_12_col = evitals_12,
    evitals_14_col = evitals_14,
    evitals_23_col = evitals_23,
    evitals_26_col = evitals_26,
    transport_disposition_col = edisposition_30
  )

</code></pre>

<hr>
<h2 id='ttr_01_population'>TTR-01 Populations</h2><span id='topic+ttr_01_population'></span>

<h3>Description</h3>

<p>Filters data down to the target populations for TTR-01, and categorizes
records to identify needed information for the calculations.
</p>
<p>Identifies key categories to records that are 911 requests for patients not
transported by EMS during which a basic set of vital signs is documented
based on specific criteria and calculates related ECG measures. This function
segments the data by age into adult and pediatric populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ttr_01_population(
  df = NULL,
  patient_scene_table = NULL,
  response_table = NULL,
  disposition_table = NULL,
  vitals_table = NULL,
  arrest_table = NULL,
  erecord_01_col,
  incident_date_col = NULL,
  patient_DOB_col = NULL,
  epatient_15_col,
  epatient_16_col,
  eresponse_05_col,
  transport_disposition_col,
  earrest_01_col,
  evitals_06_col,
  evitals_07_col,
  evitals_10_col,
  evitals_12_col,
  evitals_14_col,
  evitals_23_col,
  evitals_26_col
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ttr_01_population_+3A_df">df</code></td>
<td>
<p>A data frame or tibble containing the dataset to analyze. Default
is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_patient_scene_table">patient_scene_table</code></td>
<td>
<p>A data frame or tibble containing only epatient
and escene fields as a fact table. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_response_table">response_table</code></td>
<td>
<p>A data frame or tibble containing only the eresponse
fields needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_disposition_table">disposition_table</code></td>
<td>
<p>A data frame or tibble containing only the
edisposition fields needed for this measure's calculations. Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_vitals_table">vitals_table</code></td>
<td>
<p>A data frame or tibble containing only the evitals fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_arrest_table">arrest_table</code></td>
<td>
<p>A data frame or tibble containing only the earrest fields
needed for this measure's calculations. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_erecord_01_col">erecord_01_col</code></td>
<td>
<p>A column specifying unique patient records.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_incident_date_col">incident_date_col</code></td>
<td>
<p>Column that contains the incident date. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_patient_dob_col">patient_DOB_col</code></td>
<td>
<p>Column that contains the patient's date of birth. This
defaults to <code>NULL</code> as it is optional in case not available due to PII
restrictions.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_epatient_15_col">epatient_15_col</code></td>
<td>
<p>A column indicating the patients age in numeric form.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_epatient_16_col">epatient_16_col</code></td>
<td>
<p>A column specifying the unit of patient age (e.g.,
&quot;Years&quot;, &quot;Days&quot;).</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_eresponse_05_col">eresponse_05_col</code></td>
<td>
<p>A column specifying the type of response (e.g., 911
codes).</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_transport_disposition_col">transport_disposition_col</code></td>
<td>
<p>A column specifying transport disposition
for the patient.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_earrest_01_col">earrest_01_col</code></td>
<td>
<p>A column containing cardiac arrest data.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_06_col">evitals_06_col</code></td>
<td>
<p>A column containing systolic blood pressure (SBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_07_col">evitals_07_col</code></td>
<td>
<p>A column containing diastolic blood pressure (DBP) data
from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_10_col">evitals_10_col</code></td>
<td>
<p>A column containing heart rate data from initial vital
signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_12_col">evitals_12_col</code></td>
<td>
<p>A column containing spO2 data from the initial vital
signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_14_col">evitals_14_col</code></td>
<td>
<p>A column containing respiratory rate data from initial
vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_23_col">evitals_23_col</code></td>
<td>
<p>A column containing total Glasgow Coma Scale (GCS)
scores from initial vital signs.</p>
</td></tr>
<tr><td><code id="ttr_01_population_+3A_evitals_26_col">evitals_26_col</code></td>
<td>
<p>A column containing alert, verbal, painful,
unresponsive (AVPU) vital signs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list that contains the following:
</p>

<ul>
<li><p> a tibble with counts for each filtering step,
</p>
</li>
<li><p> a tibble for each population of interest
</p>
</li>
<li><p> a tibble for the initial population
</p>
</li>
<li><p> a tibble for the total dataset with computations
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Nicolas Foss, Ed.D., MS
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create tables to test correct functioning

  # patient table
  patient_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    incident_date = as.Date(c("2025-01-01", "2025-01-05", "2025-02-01",
    "2025-01-01", "2025-06-01")),
    patient_dob = as.Date(c("2000-01-01", "2020-01-01", "2023-02-01",
    "2023-01-01", "1970-06-01")),
    epatient_15 = c(25, 5, 2, 2, 55),  # Ages
    epatient_16 = c("Years", "Years", "Years", "Years", "Years")

  )

  # response table
  response_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    eresponse_05 = rep(2205001, 5),
  )

  # arrest table
  arrest_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    earrest_01 = rep("No", 5)
  )

  # vitals table
  vitals_table &lt;- tibble::tibble(

    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    evitals_06 = c(100, 90, 80, 70, 85),
    evitals_07 = c(80, 90, 50, 60, 87),
    evitals_10 = c(110, 89, 88, 71, 85),
    evitals_12 = c(50, 60, 70, 80, 75),
    evitals_14 = c(30, 9, 8, 7, 31),
    evitals_23 = c(6, 7, 8, 9, 10),
    evitals_26 = c(3326007, 3326005, 3326003, 3326001, 3326007),
  )

  # disposition table
  disposition_table &lt;- tibble::tibble(
    erecord_01 = c("R1", "R2", "R3", "R4", "R5"),
    edisposition_30 = c(4230013, 4230009, 4230013, 4230009, 4230013)
  )

  # test the success of the function
  result &lt;- ttr_01_population(patient_scene_table = patient_table,
                        response_table = response_table,
                        arrest_table = arrest_table,
                        vitals_table = vitals_table,
                        disposition_table = disposition_table,
                        erecord_01_col = erecord_01,
                        incident_date_col = incident_date,
                        patient_DOB_col = patient_dob,
                        epatient_15_col = epatient_15,
                        epatient_16_col = epatient_16,
                        eresponse_05_col = eresponse_05,
                        earrest_01_col = earrest_01,
                        evitals_06_col = evitals_06,
                        evitals_07_col = evitals_07,
                        evitals_10_col = evitals_10,
                        evitals_12_col = evitals_12,
                        evitals_14_col = evitals_14,
                        evitals_23_col = evitals_23,
                        evitals_26_col = evitals_26,
                        transport_disposition_col = edisposition_30
                   )

# show the results of filtering at each step
result$filter_process

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
