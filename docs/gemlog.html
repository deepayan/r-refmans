<!DOCTYPE html><html><head><title>Help for package gemlog</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gemlog}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gemlog-package'>
<p>File Conversion for 'Gem Infrasound Logger'</p></a></li>
<li><a href='#Convert'><p>Convert raw Gem data to segy</p></a></li>
<li><a href='#gem_metadata'><p>Example Metadata from Gem Logger</p></a></li>
<li><a href='#GemSpecs'><p>Gem specs table</p></a></li>
<li><a href='#PlotMetadata'>
<p>Read and plot Gem metadata</p></a></li>
<li><a href='#ReadGem'>
<p>Read raw Gem data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>File Conversion for 'Gem Infrasound Logger'</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-06-15</td>
</tr>
<tr>
<td>Version:</td>
<td>0.41</td>
</tr>
<tr>
<td>Author:</td>
<td>Jake Anderson</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jake Anderson &lt;ajakef@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Reads data files from the 'Gem infrasound logger' for analysis and converts to segy format (which is convenient for reading with traditional seismic analysis software). The Gem infrasound logger is a low-cost, lightweight, low-power instrument for recording infrasound in field campaigns; email the maintainer for more information.</td>
</tr>
<tr>
<td>Depends:</td>
<td>signal</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-06-15 19:29:15 UTC; jake</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-06-15 20:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='gemlog-package'>
File Conversion for 'Gem Infrasound Logger'
</h2><span id='topic+gemlog-package'></span><span id='topic+gemlog'></span>

<h3>Description</h3>

<p>Reads data files from the 'Gem infrasound logger' for analysis and converts to segy format (which is convenient for reading with traditional seismic analysis software). The Gem infrasound logger is a low-cost, lightweight, low-power instrument for recording infrasound in field campaigns; email the maintainer for more information.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> gemlog</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> File Conversion for 'Gem Infrasound Logger'</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2020-06-15</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.41</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Jake Anderson</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Jake Anderson &lt;ajakef@gmail.com&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> Reads data files from the 'Gem infrasound logger' for analysis and converts to segy format (which is convenient for reading with traditional seismic analysis software). The Gem infrasound logger is a low-cost, lightweight, low-power instrument for recording infrasound in field campaigns; email the maintainer for more information.</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> signal</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL</td>
</tr>
<tr>
 <td style="text-align: left;">
LazyLoad: </td><td style="text-align: left;"> yes</td>
</tr>
<tr>
 <td style="text-align: left;">
Repository: </td><td style="text-align: left;"> CRAN</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
Convert                 Convert raw Gem data to segy
GemSpecs                Gem specs table
PlotMetadata            Read and plot Gem metadata
ReadGem                 Read raw Gem data
gem_metadata            Example Metadata from Gem Logger
gemlog-package          File Conversion for 'Gem Infrasound Logger'
</pre>
<p>~~ An overview of how to use the package, including the most important ~~
~~ functions ~~
</p>


<h3>Author(s)</h3>

<p>Jake Anderson
</p>
<p>Maintainer: Jake Anderson &lt;ajakef@gmail.com&gt;
</p>


<h3>References</h3>

<p>Anderson, JF, JB Johnson, DC Bowman, and TJ Ronan (2018). The Gem Infrasound
Logger and Custom-Built Instrumentation. Seismological Research
Letters 89 (1), 153-164. https://doi.org/10.1785/0220170067
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# define bitweight for 0.5 inch sensor with Rg = 2.2k
sensitivity = 22.014e-6 # 22.014 uV/Pa
Rg = 2.2 # gain-setting resistor value in kilo-ohms
gain = 1 + 49.4/2.2 # amplifier gain
A2D = 0.256/2^15 # volts per count in analog-digital converter
bitweight = A2D / (gain * sensitivity) # conversion from counts to Pa (Pa/count)

# convert files from two Gems (SNs 000 and 001)
Convert('raw/000', bitweight = bitweight)
Convert('raw/001', bitweight = bitweight)

## End(Not run)

## Not run: 
ReadGem(0:1, 'raw/000') # read files raw/000/FILE0000.TXT and raw/000/FILE0001.TXT

## End(Not run)

</code></pre>

<hr>
<h2 id='Convert'>Convert raw Gem data to segy</h2><span id='topic+Convert'></span>

<h3>Description</h3>

<p>Convert takes a directory of raw Gem data files and converts them to PASSCAL segy files, including interpolating time with GPS strings and converting from counts to pressure units. </p>


<h3>Usage</h3>

<pre><code class='language-R'>Convert(rawpath = ".", convertedpath = "converted", metadatapath = "metadata", 
metadatafile = NA, gpspath = "gps", gpsfile = NA, t1 = -Inf, t2 = Inf, nums = NaN, 
SN = character(), bitweight = NaN, units = 'Pa', time_adjustment = 0, blockdays = 1)

</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Convert_+3A_rawpath">rawpath</code></td>
<td>

<p>Directory containing raw data to be converted.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_convertedpath">convertedpath</code></td>
<td>

<p>Directory (to be created, if necessary) where output segy files will be saved.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_metadatapath">metadatapath</code></td>
<td>

<p>Directory (to be created, if necessary) where output metadata file will be saved.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_metadatafile">metadatafile</code></td>
<td>

<p>Filename for output metadata. If set, overrides metadatapath. If unset, Convert creates the next logical filename in metadatapath. 
</p>
</td></tr>
<tr><td><code id="Convert_+3A_gpspath">gpspath</code></td>
<td>

<p>Directory (to be created, if necessary) where output gps file will be saved.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_gpsfile">gpsfile</code></td>
<td>

<p>Filename for output gps data. If set, overrides gpspath. If unset, Convert creates the next logical filename in gpspath. 
</p>
</td></tr>
<tr><td><code id="Convert_+3A_t1">t1</code></td>
<td>

<p>Time at which conversion should start (class POSIXct).
</p>
</td></tr>
<tr><td><code id="Convert_+3A_t2">t2</code></td>
<td>

<p>Time at which conversion should end (class POSIXct).
</p>
</td></tr>
<tr><td><code id="Convert_+3A_nums">nums</code></td>
<td>

<p>File numbers to convert.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_sn">SN</code></td>
<td>

<p>Serial number of Gem data files to convert (to be safe, when data from multiple Gems could be mixed).
</p>
</td></tr>
<tr><td><code id="Convert_+3A_bitweight">bitweight</code></td>
<td>

<p>Conversion factor between counts and output units (e.g., Pa per
count). Leave as NaN to use default value (for logger version,
configuration, and 'units').
</p>
</td></tr>
<tr><td><code id="Convert_+3A_units">units</code></td>
<td>

<p>Units for output: can be 'Pa', 'V', or 'counts'. Only used when
bitweight is left unset and default bitweight is calculated.
</p>
</td></tr>
<tr><td><code id="Convert_+3A_time_adjustment">time_adjustment</code></td>
<td>

<p>Offset to add to output times (usually unnecessary, sometimes +/- 1 s).
</p>
</td></tr>
<tr><td><code id="Convert_+3A_blockdays">blockdays</code></td>
<td>

<p>Amount of data (measured in days) to process at a time. This can be
decreased to 0.5 or 0.25 in case of memory problems.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is the usual function to use when converting data to segy files. To read data directly into R, use ReadGem.
</p>


<h3>Value</h3>

<p>None; writes files only.
</p>


<h3>Note</h3>

<p>A good directory structure might be something like
</p>
<p>projectname
</p>
<p>&mdash;-raw
</p>
<p>&mdash;&mdash;&ndash;010: Directory containing data from Gem SN 010 (e.g.)
</p>
<p>&mdash;&mdash;&ndash;011: Directory containing data from Gem SN 011 (e.g.)
</p>
<p>&mdash;-converted
</p>
<p>&mdash;&mdash;&ndash;segy files
</p>
<p>&mdash;-gps
</p>
<p>&mdash;&mdash;&ndash;010gps_000.txt: GPS file for Gem 010
</p>
<p>&mdash;&mdash;&ndash;011gps_000.txt: GPS file for Gem 011
</p>
<p>&mdash;-metadata
</p>
<p>&mdash;&mdash;&ndash;010metadata_000.txt: Metadata file for Gem 010
</p>
<p>&mdash;&mdash;&ndash;011metadata_000.txt: Metadata file for Gem 011
</p>
<p>&mdash;-projectname_notes.txt
</p>


<h3>Author(s)</h3>

<p>Jake Anderson
</p>


<h3>See Also</h3>

<p>ReadGem
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# define bitweight for 0.5 inch sensor with Rg = 2.2k
sensitivity = 22.014e-6 # 22.014 uV/Pa
Rg = 2.2 # gain-setting resistor value in kilo-ohms
gain = 1 + 49.4/2.2 # amplifier gain
A2D = 0.256/2^15 # volts per count in analog-digital converter
bitweight = A2D / (gain * sensitivity) # conversion from counts to Pa (Pa/count)

# convert files from two Gems (SNs 000 and 001)
Convert('raw/000', bitweight = bitweight)
Convert('raw/001', bitweight = bitweight)

## End(Not run)
</code></pre>

<hr>
<h2 id='gem_metadata'>Example Metadata from Gem Logger</h2><span id='topic+gem_metadata'></span>

<h3>Description</h3>

<p>Metadata (temperature, battery, etc.) from a Gem data logger. Provided
as an example for running PlotMetadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(gem_metadata)</code></pre>


<h3>Format</h3>

<p>List containing vectors (time series) of different metadata types.</p>


<h3>Source</h3>

<p>Recording made by author.</p>


<h3>See Also</h3>

<p>PlotMetadata</p>

<hr>
<h2 id='GemSpecs'>Gem specs table</h2><span id='topic+GemSpecs'></span>

<h3>Description</h3>

<p>Specs table for various Gem versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(GemSpecs)</code></pre>


<h3>Format</h3>

<p>Data frame with following elements:
</p>

<dl>
<dt> version </dt><dd><p> Version number corresponding to following specs
</p>
</dd><dt> bitweight_Pa </dt><dd><p> Pressure resolution for default (high) gain (Pa/count)
</p>
</dd><dt> bitweight_V </dt><dd><p> Voltage resolution for default (high) gain (V/count)
</p>
</dd><dt> min_SN </dt><dd><p> Lowest serial number made for this version
</p>
</dd><dt> max_SN </dt><dd><p> Highest serial number made for this version
</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(GemSpecs)

## determine pressure bitweight for logger 014
i = which(14 &gt;= GemSpecs$min_SN &amp; 14 &lt;= GemSpecs$max_SN)
GemSpecs[i,]$bitweight_Pa

</code></pre>

<hr>
<h2 id='PlotMetadata'>
Read and plot Gem metadata
</h2><span id='topic+PlotMetadata'></span><span id='topic+ScanMetadata'></span>

<h3>Description</h3>

<p>ScanMetadata reads a Gem metadata file produced by Convert.
PlotMetadata plots battery, temperature, GPS metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ScanMetadata(fn, plot = TRUE)
PlotMetadata(M, xlim = range(M$t, na.rm = TRUE))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PlotMetadata_+3A_fn">fn</code></td>
<td>

<p>Filename to read
</p>
</td></tr>
<tr><td><code id="PlotMetadata_+3A_plot">plot</code></td>
<td>

<p>If true, plots metadata after reading the file
</p>
</td></tr>
<tr><td><code id="PlotMetadata_+3A_m">M</code></td>
<td>

<p>Metadata, such as output of ScanMetadata
</p>
</td></tr>
<tr><td><code id="PlotMetadata_+3A_xlim">xlim</code></td>
<td>

<p>Time limits to plot, in fractional days of year
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ScanMetadata: list including metadata from file:
</p>
<table>
<tr><td><code>millis</code></td>
<td>
<p>millis count of metadata sample</p>
</td></tr>
<tr><td><code>batt</code></td>
<td>
<p>battery voltage</p>
</td></tr>
<tr><td><code>temp</code></td>
<td>
<p>temperature in (deg C)</p>
</td></tr>
<tr><td><code>maxWriteTime</code></td>
<td>
<p>maximum time required to write a sample</p>
</td></tr>
<tr><td><code>minFifoFree</code></td>
<td>
<p>minimum number of free sampes in FIFO buffer</p>
</td></tr>
<tr><td><code>maxFifoUsed</code></td>
<td>
<p>maximum number of used samples in FIFO buffer</p>
</td></tr>
<tr><td><code>maxOverruns</code></td>
<td>
<p>maximum number of sample overruns</p>
</td></tr>
<tr><td><code>gpsOnFlag</code></td>
<td>
<p>1 if gps is turned on, 0 otherwise</p>
</td></tr>
<tr><td><code>unusedStack1</code></td>
<td>
<p>free memory in stack 1</p>
</td></tr>
<tr><td><code>unusedStackIdle</code></td>
<td>
<p>free memory in idle stack</p>
</td></tr>
</table>
<p>PlotMetadata: None.
</p>


<h3>Author(s)</h3>

<p>Jake Anderson
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
M = ScanMetadata('metadata/001metadata_000.txt') # scan the first metadata file from Gem SN 001

## End(Not run)

data(gem_metadata)
PlotMetadata(gem_metadata)

</code></pre>

<hr>
<h2 id='ReadGem'>
Read raw Gem data
</h2><span id='topic+ReadGem'></span>

<h3>Description</h3>

<p>Reads raw Gem data into R. To write segy files, use Convert.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ReadGem(nums = 0:9999, path = './', SN = character(), units = 'Pa',
bitweight = NaN, bitweight_V = NaN, bitweight_Pa = NaN, alloutput =
FALSE, verbose = TRUE, requireGPS = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ReadGem_+3A_nums">nums</code></td>
<td>

<p>File numbers to convert.
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_path">path</code></td>
<td>

<p>Directory in which raw data files are contained.
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_sn">SN</code></td>
<td>

<p>If set, only read files of this serial number.
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_units">units</code></td>
<td>

<p>For unit conversions: should the output be in V, Pa, or counts? 
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_bitweight">bitweight</code></td>
<td>

<p>If set, override the default bitweight for this logger in the
current configuration. 
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_bitweight_v">bitweight_V</code></td>
<td>

<p>If set, override the default V bitweight for this logger in the
current configuration. 
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_bitweight_pa">bitweight_Pa</code></td>
<td>

<p>If set, override the default Pa bitweight for this logger in the
current configuration. 
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_alloutput">alloutput</code></td>
<td>

<p>Include raw data in the output, in addition to the processed data.
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_verbose">verbose</code></td>
<td>

<p>Provide verbose output.
</p>
</td></tr>
<tr><td><code id="ReadGem_+3A_requiregps">requireGPS</code></td>
<td>

<p>Require GPS strings to perform the conversion.
</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>t</code></td>
<td>
<p>sample times (POSIXct)</p>
</td></tr>
<tr><td><code>p</code></td>
<td>
<p>samples (in whatever units were set by user)</p>
</td></tr>
</table>

<ul>
<li><p>gps$yryear of gps samples
</p>
</li>
<li><p>gps$dategps sample time, as fractional day of year
</p>
</li>
<li><p>gps$latlatitude
</p>
</li>
<li><p>gps$lonlongitude
</p>
</li></ul>


<ul>
<li><p>metadata$millismillis count of metadata sample
</p>
</li>
<li><p>metadata$battbattery voltage
</p>
</li>
<li><p>metadata$temptemperature in (deg C)
</p>
</li>
<li><p>metadata$maxWriteTimemaximum time required to write a sample
</p>
</li>
<li><p>metadata$minFifoFreeminimum number of free sampes in FIFO buffer
</p>
</li>
<li><p>metadata$maxFifoUsedmaximum number of used samples in FIFO buffer
</p>
</li>
<li><p>metadata$maxOverrunsmaximum number of sample overruns
</p>
</li>
<li><p>metadata$gpsOnFlag1 if gps is turned on, 0 otherwise
</p>
</li>
<li><p>metadata$unusedStack1free memory in stack 1
</p>
</li>
<li><p>metadata$unusedStackIdlefree memory in idle stack
</p>
</li></ul>


<ul>
<li><p>header$filevector of raw file names
</p>
</li>
<li><p>header$SNvector of Gem serial numbers
</p>
</li>
<li><p>header$latmean latitude
</p>
</li>
<li><p>header$lonmean longitude
</p>
</li>
<li><p>header$t1start time
</p>
</li>
<li><p>header$t2end time
</p>
</li>
<li><p>header$alloutputif alloutput == TRUE, list including raw
data
</p>
</li>
<li><p>configconfiguration settings set using Gem configuration
file
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Jake Anderson
</p>


<h3>See Also</h3>

<p>Convert
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ReadGem(nums = 0:1, path = 'raw/', SN = '000') # read files raw/FILE0000.000 and raw/FILE0001.000

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
