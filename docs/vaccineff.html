<!DOCTYPE html><html lang="en-US"><head><title>Help for package vaccineff</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vaccineff}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#vaccineff-package'><p>vaccineff: Estimate Vaccine Effectiveness Based on Different Study Designs</p></a></li>
<li><a href='#adjust_exposure'><p>Adjust Exposure for Static Matching</p></a></li>
<li><a href='#balance_summary'><p>Balance of Vaccinated/Unvaccinated Groups</p></a></li>
<li><a href='#capture_warnings'><p>Capture Warnings</p></a></li>
<li><a href='#check_dataset'><p>Check Correctness of <code>data_set</code></p></a></li>
<li><a href='#check_vaccineff_inputs'><p>Check Correctness of Inputs in <code>make_vaccineff_data</code></p></a></li>
<li><a href='#coh_coverage'><p>Calculate Vaccine Coverage</p></a></li>
<li><a href='#coh_eff_hr'><p>Function to Estimate the Vaccine Effectiveness Using Hazard Ratio</p></a></li>
<li><a href='#cohortdata'><p>Cohort data on vaccineff</p></a></li>
<li><a href='#cox_model'><p>Internal function to calculate Cox-PH model and related metrics.</p></a></li>
<li><a href='#cox_model_prediction'><p>Internal function to calculate prediction from Cox model</p></a></li>
<li><a href='#estimate_vaccineff'><p>Estimate Vaccine Effectiveness (VE)</p></a></li>
<li><a href='#extract_surv_model'><p>Internal function to extract summary output from <code>{survival}</code> models.</p></a></li>
<li><a href='#get_age_group'><p>Construct age-group variable from age column</p></a></li>
<li><a href='#get_censoring_after_match'><p>Create Censoring date by Pairs</p></a></li>
<li><a href='#get_exposure_time'><p>Calculate Exposure Time</p></a></li>
<li><a href='#get_immunization_date'><p>Construct Immunization Date</p></a></li>
<li><a href='#get_immunization_dose'><p>Return Column Name Associated to Immunizing Vaccine</p></a></li>
<li><a href='#get_immunization_vaccine'><p>Construct Vaccine Name Associated to Immunizing Vaccine</p></a></li>
<li><a href='#get_time_to_event_at'><p>Construct Time-to-Event at</p></a></li>
<li><a href='#iterate_match'><p>Iterate Match</p></a></li>
<li><a href='#km_model'><p>Internal function to calculate Kaplan-Meier model and related metrics.</p></a></li>
<li><a href='#make_immunization'><p>Construct Information of Immunization</p></a></li>
<li><a href='#make_vaccineff_data'><p>Construct <code>vaccineff_data</code> Object</p></a></li>
<li><a href='#match_cohort'><p>Match Cohort to Reduce Observational Bias</p></a></li>
<li><a href='#match_cohort_'><p>Match Cohort Using Mahalanobis Distance</p></a></li>
<li><a href='#match_pair_info'><p>Match Information by Pairs</p></a></li>
<li><a href='#match_summary'><p>Constructs Summary with Results from Matching</p></a></li>
<li><a href='#plot_coverage'><p>Plot Vaccine Coverage</p></a></li>
<li><a href='#plot_loglog'><p>Plot Log-Log Test for Proportional Hazards Hypothesis</p></a></li>
<li><a href='#plot_survival'><p>Plot the Survival Probability Based on the Kaplan-Meier Model</p></a></li>
<li><a href='#plot.vaccineff'><p>Function for Extracting Vaccine Effectiveness Plot</p></a></li>
<li><a href='#plot.vaccineff_data'><p>Function for Extracting Vaccineff Data Plot</p></a></li>
<li><a href='#print.summary_vaccineff'><p>Print summary of VE Results</p></a></li>
<li><a href='#print.summary_vaccineff_data'><p>Print Summary of Vaccineff Data</p></a></li>
<li><a href='#rematch_'><p>Rematch Step for Iterative Match</p></a></li>
<li><a href='#set_status'><p>Create Status Column</p></a></li>
<li><a href='#static_match'><p>Static Matching</p></a></li>
<li><a href='#summary.vaccineff'><p>Summarize VE Results</p></a></li>
<li><a href='#summary.vaccineff_data'><p>Summarize Vaccineff Data</p></a></li>
<li><a href='#truncate_from_start_cohort'><p>Internal function to truncate data based on start_cohort</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Estimate Vaccine Effectiveness Based on Different Study Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides tools for estimating vaccine effectiveness and
    related metrics. The 'vaccineff_data' class manages key features for
    preparing, visualizing, and organizing cohort data, as well as
    estimating vaccine effectiveness. The results and model performance
    are assessed using the 'vaccineff' class.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/epiverse-trace/vaccineff">https://github.com/epiverse-trace/vaccineff</a>,
<a href="https://epiverse-trace.github.io/vaccineff/">https://epiverse-trace.github.io/vaccineff/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/epiverse-trace/vaccineff/issues">https://github.com/epiverse-trace/vaccineff/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, ggplot2, linelist, MatchIt, rlang, scales, stats,
survival</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>epiverse-trace/epiversetheme</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-28 15:34:19 UTC; dsquevedovega</td>
</tr>
<tr>
<td>Author:</td>
<td>David Santiago Quevedo
    <a href="https://orcid.org/0000-0003-1583-4262"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Zulma M. Cucunubá <a href="https://orcid.org/0000-0002-8165-3198"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  International Development Research Center (IDRC) [fnd],
  Geraldine Gómez Millán
    <a href="https://orcid.org/0009-0007-8701-0568"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Pratik Gupte <a href="https://orcid.org/0000-0001-5294-7819"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Érika J Cantor <a href="https://orcid.org/0000-0003-3320-6032"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Santiago Loaiza <a href="https://orcid.org/0000-0002-2092-3262"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Jaime Pavlich-Mariscal
    <a href="https://orcid.org/0000-0002-3892-6680"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Hugo Gruson <a href="https://orcid.org/0000-0002-4094-1476"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Chris Hartgerink <a href="https://orcid.org/0000-0003-1050-6809"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Felipe Segundo Abril
    <a href="https://orcid.org/0000-0002-2512-4929"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Joshua W. Lambert <a href="https://orcid.org/0000-0001-5218-3046"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Julian Otero <a href="https://orcid.org/0009-0006-0429-7747"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Pontificia Universidad Javeriana [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zulma M. Cucunubá &lt;tracelacdev@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-29 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='vaccineff-package'>vaccineff: Estimate Vaccine Effectiveness Based on Different Study Designs</h2><span id='topic+vaccineff'></span><span id='topic+vaccineff-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides tools for estimating vaccine effectiveness and related metrics. The 'vaccineff_data' class manages key features for preparing, visualizing, and organizing cohort data, as well as estimating vaccine effectiveness. The results and model performance are assessed using the 'vaccineff' class.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Zulma M. Cucunubá <a href="mailto:tracelacdev@gmail.com">tracelacdev@gmail.com</a> (<a href="https://orcid.org/0000-0002-8165-3198">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> David Santiago Quevedo <a href="mailto:ex-dsquevedo@javeriana.edu.co">ex-dsquevedo@javeriana.edu.co</a> (<a href="https://orcid.org/0000-0003-1583-4262">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> International Development Research Center (IDRC) [funder]
</p>
</li>
<li><p> Geraldine Gómez Millán <a href="mailto:geralidine.gomez@javeriana.edu.co">geralidine.gomez@javeriana.edu.co</a> (<a href="https://orcid.org/0009-0007-8701-0568">ORCID</a>) [contributor]
</p>
</li>
<li><p> Pratik Gupte <a href="mailto:pratik.gupte@lshtm.ac.uk">pratik.gupte@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0001-5294-7819">ORCID</a>) [contributor]
</p>
</li>
<li><p> Érika J Cantor <a href="mailto:erika.cantor@javeriana.edu.co">erika.cantor@javeriana.edu.co</a> (<a href="https://orcid.org/0000-0003-3320-6032">ORCID</a>) [contributor]
</p>
</li>
<li><p> Santiago Loaiza <a href="mailto:santiago.loaiza@javeriana.edu.co">santiago.loaiza@javeriana.edu.co</a> (<a href="https://orcid.org/0000-0002-2092-3262">ORCID</a>) [contributor]
</p>
</li>
<li><p> Jaime Pavlich-Mariscal <a href="mailto:jpavlich@javeriana.edu.co">jpavlich@javeriana.edu.co</a> (<a href="https://orcid.org/0000-0002-3892-6680">ORCID</a>) [contributor]
</p>
</li>
<li><p> Hugo Gruson <a href="mailto:hugo.gruson@data.org">hugo.gruson@data.org</a> (<a href="https://orcid.org/0000-0002-4094-1476">ORCID</a>) [contributor]
</p>
</li>
<li><p> Chris Hartgerink <a href="mailto:chris@data.org">chris@data.org</a> (<a href="https://orcid.org/0000-0003-1050-6809">ORCID</a>) [contributor]
</p>
</li>
<li><p> Felipe Segundo Abril <a href="mailto:fsabrilb@unal.edu.co">fsabrilb@unal.edu.co</a> (<a href="https://orcid.org/0000-0002-2512-4929">ORCID</a>) [contributor]
</p>
</li>
<li><p> Joshua W. Lambert <a href="mailto:joshua.lambert@lshtm.ac.uk">joshua.lambert@lshtm.ac.uk</a> (<a href="https://orcid.org/0000-0001-5218-3046">ORCID</a>) [contributor]
</p>
</li>
<li><p> Julian Otero <a href="mailto:jd.otero10@uniandes.edu.co">jd.otero10@uniandes.edu.co</a> (<a href="https://orcid.org/0009-0006-0429-7747">ORCID</a>) [contributor]
</p>
</li>
<li><p> Pontificia Universidad Javeriana [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/epiverse-trace/vaccineff">https://github.com/epiverse-trace/vaccineff</a>
</p>
</li>
<li> <p><a href="https://epiverse-trace.github.io/vaccineff/">https://epiverse-trace.github.io/vaccineff/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/epiverse-trace/vaccineff/issues">https://github.com/epiverse-trace/vaccineff/issues</a>
</p>
</li></ul>


<hr>
<h2 id='adjust_exposure'>Adjust Exposure for Static Matching</h2><span id='topic+adjust_exposure'></span>

<h3>Description</h3>

<p>This function removes the pairs whose exposure times
do not match. This happens when the outcome of the unvaccinated individual
occurs before the vaccination date of their partner.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjust_exposure(
  matched_cohort,
  outcome_date_col,
  censoring_date_col,
  immunization_date,
  start_cohort,
  end_cohort
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adjust_exposure_+3A_matched_cohort">matched_cohort</code></td>
<td>
<p><code>data.frame</code> with matched cohort from <code>match_cohort_</code>.</p>
</td></tr>
<tr><td><code id="adjust_exposure_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="adjust_exposure_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="adjust_exposure_+3A_start_cohort">start_cohort</code></td>
<td>
<p>Start date of the study.</p>
</td></tr>
<tr><td><code id="adjust_exposure_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with matched population and corrected exposure times.
</p>

<hr>
<h2 id='balance_summary'>Balance of Vaccinated/Unvaccinated Groups</h2><span id='topic+balance_summary'></span>

<h3>Description</h3>

<p>This function creates a summary after matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>balance_summary(
  data_set,
  nearest,
  exact,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="balance_summary_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> to assess matching balance.</p>
</td></tr>
<tr><td><code id="balance_summary_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
<tr><td><code id="balance_summary_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
<tr><td><code id="balance_summary_+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="balance_summary_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.</p>
</td></tr>
<tr><td><code id="balance_summary_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary <code>data.frame</code> with the balance of each variable by
vaccine status. Numeric variables are reported with means, and
categorical/factor variables are reported with proportions.
In both cases, the Standardized Mean Difference (SMD) is calculated.
</p>

<hr>
<h2 id='capture_warnings'>Capture Warnings</h2><span id='topic+capture_warnings'></span>

<h3>Description</h3>

<p>This function captures the warnings generated by an
expression without printing them to the console. It returns both the
result of the expression and the captured warnings. This is useful for
avoiding warnings appearing during routines, such as an iterative process.
To suppress or &quot;muffle&quot; a warning, it uses invokeRestart(&quot;muffleWarning&quot;).
The <code>new.env()</code> function creates a new environment that is isolated from
other environments. This allows the function to store and modify data
(in this case, warnings) without affecting the global environment or
any other environment in the R session.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>capture_warnings(expr, warn_env = new.env())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="capture_warnings_+3A_expr">expr</code></td>
<td>
<p>An expression to evaluate.</p>
</td></tr>
<tr><td><code id="capture_warnings_+3A_warn_env">warn_env</code></td>
<td>
<p>An optional environment to store the warnings.
If not provided, a new environment is created.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing two elements:
</p>
<table role = "presentation">
<tr><td><code>result</code></td>
<td>
<p>The result of evaluating the expression.</p>
</td></tr>
<tr><td><code>warnings</code></td>
<td>
<p>A character vector of the warnings generated during
the evaluation of the expression.</p>
</td></tr>
</table>

<hr>
<h2 id='check_dataset'>Check Correctness of <code>data_set</code></h2><span id='topic+check_dataset'></span>

<h3>Description</h3>

<p>This auxiliary function checks that the type of the object
provided in <code>data_set</code> is a <code>data.frame</code> and that the specified columns
are included in it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_dataset(data_set, columns)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_dataset_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="check_dataset_+3A_columns">columns</code></td>
<td>
<p>A vector of column names that should be present in
<code>data_set</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function does not return a value.
</p>

<hr>
<h2 id='check_vaccineff_inputs'>Check Correctness of Inputs in <code>make_vaccineff_data</code></h2><span id='topic+check_vaccineff_inputs'></span>

<h3>Description</h3>

<p>This auxiliary function checks the correctness of the inputs
provided to <code>make_vaccineff_data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_vaccineff_inputs(
  data_set,
  outcome_date_col,
  censoring_date_col,
  vacc_date_col,
  vacc_name_col,
  vaccinated_status,
  unvaccinated_status,
  immunization_delay,
  end_cohort,
  match,
  exact,
  nearest,
  take_first
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_vaccineff_inputs_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date. NULL by default.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_vacc_name_col">vacc_name_col</code></td>
<td>
<p>Name of the column(s) that contain custom vaccine
names for the vaccines (e.g. brand name, type of vaccine). If provided,
must be of the same length as <code>vacc_date_col</code>.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.
Default is <code>v</code>.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.
Default is <code>u</code>.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune. Default is 0.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_match">match</code></td>
<td>
<p><code>TRUE</code>: cohort matching is performed. Default is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers). Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="check_vaccineff_inputs_+3A_take_first">take_first</code></td>
<td>
<p><code>FALSE</code>: takes the latest vaccine date. <code>TRUE</code>: takes the
earliest vaccine date.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function does not return a value.
</p>

<hr>
<h2 id='coh_coverage'>Calculate Vaccine Coverage</h2><span id='topic+coh_coverage'></span>

<h3>Description</h3>

<p>This function returns the vaccination coverage of a dose along
the cohort study. The coverage can be calculated grouped by year, day, and
month. This must be specified in the parameter <code>unit</code>. If there are no
records for some dates, the function assigns 0 instead of NA to calculate
the cumulative coverage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coh_coverage(
  data_set,
  vacc_date_col,
  unit = c("day", "month", "year"),
  date_interval = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coh_coverage_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="coh_coverage_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine date to
calculate the coverage.</p>
</td></tr>
<tr><td><code id="coh_coverage_+3A_unit">unit</code></td>
<td>
<p>Aggregation unit, must be either &quot;year&quot;, &quot;month&quot;, or &quot;day&quot;.</p>
</td></tr>
<tr><td><code id="coh_coverage_+3A_date_interval">date_interval</code></td>
<td>
<p>If NULL, the function calculates the coverage interval
based on the min() and max() of the <code>vacc_date_col</code>. It is also possible to
pass a custom date interval to truncate or expand the date interval (see
example).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with the number of vaccine doses per date, cumulative
count of doses, and vaccine coverage.
</p>

<hr>
<h2 id='coh_eff_hr'>Function to Estimate the Vaccine Effectiveness Using Hazard Ratio</h2><span id='topic+coh_eff_hr'></span>

<h3>Description</h3>

<p>The function relies on the implementation of the Cox model for
proportional hazards from the package <code>{survival}</code> The proportional hazards
hypothesis is tested using the Schoenfeld test, and the resultant p-value is
provided in the results. Log-log plots are also calculated using the
Kaplan-Meier survival estimator to provide a visual test for the proportional
hazards hypothesis. The function returns a list with the method called, the
estimation of VE (CI95%), the p-value of the Schoenfeld test, and the log-log
plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coh_eff_hr(
  data_set,
  outcome_status_col,
  time_to_event_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status,
  start_cohort,
  end_cohort
)
</code></pre>


<h3>Value</h3>

<p>VE (CI95%),
output from <code>cox_model</code>,
prediction from <code>cox_model</code>,
and output from <code>km_model</code>
</p>

<hr>
<h2 id='cohortdata'>Cohort data on vaccineff</h2><span id='topic+cohortdata'></span>

<h3>Description</h3>

<p>Subset of data from an anonymised, real-world dataset produced as part of
the early stage of the immunization program against COVID-19 in Bogota,
Colombia between February 2021 and December 2021. Cohort dataset contains
registers of homologous schemes for two different brands for adults aged 50
years or older. This cohort received two doses of a vaccine aimed at
reducing the risk of death. All the registers were anonymised and
de-identified to preserve the privacy of data.
The dataset includes disaggregated information on the first and second
vaccine doses (vaccine_date1, vaccine_date2, vaccine1, and vaccine2) for each
participant and relevant demographic details (sex and age).
Additionally, the dataset includes the dates of two outcomes: death
associated with COVID-19 (death_date) and death from other causes
(death_other_causes).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cohortdata
</code></pre>


<h3>Format</h3>



<h4><code>cohortdata</code></h4>


<dl>
<dt>id</dt><dd><p>Anonymous ID of the individual</p>
</dd>
<dt>sex</dt><dd><p>Sex F/M</p>
</dd>
<dt>age</dt><dd><p>Age (50-100)</p>
</dd>
<dt>death_date</dt><dd><p>Registered death by COVID-19</p>
</dd>
<dt>death_other_causes</dt><dd><p>Registered death by other causes</p>
</dd>
<dt>vaccine_date_1</dt><dd><p>Registered date of the first dose</p>
</dd>
<dt>vaccine_date_2</dt><dd><p>Registered date of the second dose</p>
</dd>
<dt>vaccine_1</dt><dd><p>Brand of the first dose</p>
</dd>
<dt>vaccine_2</dt><dd><p>Brand of the second dose</p>
</dd>
</dl>




<h3>Examples</h3>

<pre><code class='language-R'>cohortdata
</code></pre>

<hr>
<h2 id='cox_model'>Internal function to calculate Cox-PH model and related metrics.</h2><span id='topic+cox_model'></span>

<h3>Description</h3>

<p>Internal function to calculate Cox-PH model and related metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cox_model(
  data_set,
  outcome_status_col,
  time_to_event_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status
)
</code></pre>


<h3>Value</h3>

<p>List with data from Cox model:
hr - hazard ratio (CI95%)
p_value
<code>{survival}</code> object with model
<code>{survival}</code> object with Schoenfeld test
</p>

<hr>
<h2 id='cox_model_prediction'>Internal function to calculate prediction from Cox model</h2><span id='topic+cox_model_prediction'></span>

<h3>Description</h3>

<p>Internal function to calculate prediction from Cox model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cox_model_prediction(cox_model, vaccinated_status, unvaccinated_status)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cox_model_prediction_+3A_cox_model">cox_model</code></td>
<td>
<p>Result from <code>cox_model</code> function</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> containing
<code>time</code>: time-to-event until <code>at</code>
<code>logtime</code>: log of time-to-event
<code>hazard</code>: estimated hazard from model
<code>surv</code>: estimated survival probability from model
<code>loglog</code>: -log(-log(survival probability))
<code>strata</code>: vaccinated/unvaccinated status
</p>

<hr>
<h2 id='estimate_vaccineff'>Estimate Vaccine Effectiveness (VE)</h2><span id='topic+estimate_vaccineff'></span>

<h3>Description</h3>

<p>This function provides methods for estimating VE. It relies on
the Kaplan-Meier estimator and the Cox model for proportional hazards
from the <code>{survival}</code> package. Currently, the default method is VE = 1 - HR,
where HR is the Hazard Ratio calculated using the Cox model. The
proportional hazards assumption is tested using the Schoenfeld test,
with the p-value provided in the results. Log-log plots are also generated
using the Kaplan-Meier estimator for a visual test of the proportional
hazards hypothesis. The function uses column names provided in the tags
<code>outcome_status_col</code>, <code>time_to_event_col</code>, and <code>vaccine_status_col</code> of the
<code>linelist</code> object and status names from <code>make_vaccineff_data</code>.
The return is an <code style="white-space: pre;">&#8288;S3 class&#8288;</code> object with the VE (CI95%), results from the Cox
model, and the Kaplan-Meier estimator. This object is compatible with
<code>summary</code> and <code>plot</code> methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_vaccineff(vaccineff_data, at)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_vaccineff_+3A_vaccineff_data">vaccineff_data</code></td>
<td>
<p>Object of the class <code>vaccineff_data</code> with
vaccineff data.</p>
</td></tr>
<tr><td><code id="estimate_vaccineff_+3A_at">at</code></td>
<td>
<p>Number of days at which VE is estimated from the beginning of the
follow-up period.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of the class <code>vaccineff</code>: a list with results from the
estimation of VE.
<code>ve</code>: <code>data.frame</code> with VE(CI95%)
<code>cox_model</code>: <code>survival</code> object with Cox model results
<code>kaplan_meier</code>: <code>survival</code> object with Kaplan-Meier estimator
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example data
data("cohortdata")

# Create `vaccineff_data`
vaccineff_data &lt;- make_vaccineff_data(data_set = cohortdata,
  outcome_date_col = "death_date",
  censoring_date_col = "death_other_causes",
  vacc_date_col = "vaccine_date_2",
  vaccinated_status = "v",
  unvaccinated_status = "u",
  immunization_delay = 15,
  end_cohort = as.Date("2021-12-31"),
  match = TRUE,
  exact = c("age", "sex"),
  nearest = NULL
)

# Estimate the Vaccine Effectiveness (VE)
ve &lt;- estimate_vaccineff(vaccineff_data, 90)

# Print summary of VE
summary(ve)

# Generate loglog plot to check proportional hazards
plot(ve, type = "loglog")

# Generate Survival plot
plot(ve, type = "surv", percentage = FALSE, cumulative = FALSE)

</code></pre>

<hr>
<h2 id='extract_surv_model'>Internal function to extract summary output from <code>{survival}</code> models.</h2><span id='topic+extract_surv_model'></span>

<h3>Description</h3>

<p>Internal function to extract summary output from <code>{survival}</code> models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_surv_model(model, start_cohort, end_cohort)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_surv_model_+3A_model">model</code></td>
<td>
<p><code>{survival}</code> object containing the model</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with survival data
</p>

<hr>
<h2 id='get_age_group'>Construct age-group variable from age column</h2><span id='topic+get_age_group'></span>

<h3>Description</h3>

<p>This method splits an age interval from <code>min_val</code> to <code>max_val</code>
into intervals of size <code>step</code>.
If the method finds ages greater or equal than <code>max_val</code>
it assigns the string <code>"&gt;max_val"</code>.
By default <code>min_val</code> is set to 0, however it can be assigned by
convenience. If the method finds ages lower or equal
than <code>min_val</code> it assigns the string <code>"&lt;min_val-1"</code>.
The function warns when (max_val - min_val) is not an integer multiple of
step. In that case the last interval is truncated to the upper value
closest to max_val for which (closest_upper - min_val) is multiple of step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_age_group(data_set, col_age, max_val, min_val = 0, step)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_age_group_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with at least a column containing the age
information</p>
</td></tr>
<tr><td><code id="get_age_group_+3A_col_age">col_age</code></td>
<td>
<p>Name of the column containing the age
information</p>
</td></tr>
<tr><td><code id="get_age_group_+3A_max_val">max_val</code></td>
<td>
<p>Maximum value of age interval to split</p>
</td></tr>
<tr><td><code id="get_age_group_+3A_min_val">min_val</code></td>
<td>
<p>Minimum value of age interval to split</p>
</td></tr>
<tr><td><code id="get_age_group_+3A_step">step</code></td>
<td>
<p>Step used to split the age interval</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Column of type <code>factor</code> with the same length as the number of rows
in <code>data_set</code>, with levels corresponding to age bins between <code>min_val</code> and
<code>max_val</code>. Ages above <code>max_val</code> are represented as <code style="white-space: pre;">&#8288;&gt;max_val&#8288;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data provided with the package
data(cohortdata)

# assign age groups as a column of the `data.frame`
cohortdata$age_group &lt;- get_age_group(
  data_set = cohortdata,
  col_age = "age",
  max_val = 80,
  step = 10
)

# view the `data.frame` with new column
head(cohortdata)
</code></pre>

<hr>
<h2 id='get_censoring_after_match'>Create Censoring date by Pairs</h2><span id='topic+get_censoring_after_match'></span>

<h3>Description</h3>

<p>This function creates the censoring date of the pairs by
inheriting the minimum date in which any of the partners has a
censoring event. Two conditions are checked to inherit a censoring date
in a pair.
</p>

<ol>
<li><p> Individual censoring occurs before individual event;
</p>
</li>
<li><p> If an outcome happens before the censoring of the partner
no censoring is inherited by the other.
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>get_censoring_after_match(data_set, outcome_date_col, censoring_date_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_censoring_after_match_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_censoring_after_match_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="get_censoring_after_match_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
</table>

<hr>
<h2 id='get_exposure_time'>Calculate Exposure Time</h2><span id='topic+get_exposure_time'></span>

<h3>Description</h3>

<p>This auxiliary function calculates the exposure time of
individuals starting from the t0_follow_up date defined based on whether
a matching strategy is invoked or not. The end of the exposure time
is assigned based on the follow hierarchy
outcome_status -&gt; censoring_date -&gt; end_cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_exposure_time(data_set, outcome_date_col, censoring_date_col, end_cohort)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_exposure_time_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_exposure_time_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="get_exposure_time_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="get_exposure_time_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>column</code> with exposure time per individual.
</p>

<hr>
<h2 id='get_immunization_date'>Construct Immunization Date</h2><span id='topic+get_immunization_date'></span>

<h3>Description</h3>

<p>This function constructs the immunization date per individual
by searching for the vaccine dates that satisfy the condition:
<code>vacc_date_col + immunization_delay &lt;= limit_date</code>, where
<code>limit_date</code> is defined following the hierarchy:
<code>censoring_date_col</code>, <code>outcome_date_col</code>, <code>end_cohort</code>. If a date is not
provided/found the function takes the next one in the hierarchy.
If several columns with vaccine dates are provided, the function selects
by default the closest vaccine date to <code>limit_date</code>. However, it can also
select the first vaccine date by setting <code>take_first = TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_immunization_date(
  data_set,
  outcome_date_col,
  censoring_date_col,
  immunization_delay,
  vacc_date_col,
  end_cohort,
  take_first = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_immunization_date_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="get_immunization_date_+3A_take_first">take_first</code></td>
<td>
<p><code>FALSE</code>: takes the latest vaccine date. <code>TRUE</code>: takes the
earliest vaccine date.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Immunization date
</p>

<hr>
<h2 id='get_immunization_dose'>Return Column Name Associated to Immunizing Vaccine</h2><span id='topic+get_immunization_dose'></span>

<h3>Description</h3>

<p>This function is used in cases where several columns with
vaccine dates are provided by the user. It returns the name of the column
of the vaccine used as immunizing. The parameters are set in agreement with
<code>get_immunization_date</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_immunization_dose(
  data_set,
  immunization_date_col,
  vacc_date_col,
  immunization_delay
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_immunization_dose_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_immunization_dose_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="get_immunization_dose_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Name of the column taken as immunizing vaccine for each register.
</p>

<hr>
<h2 id='get_immunization_vaccine'>Construct Vaccine Name Associated to Immunizing Vaccine</h2><span id='topic+get_immunization_vaccine'></span>

<h3>Description</h3>

<p>This function is used in cases where several columns with
vaccine dates and different names are provided by the user. It returns a
column with the name of the vaccine used as immunizing. The parameters are
set in agreement with <code>get_immunization_date</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_immunization_vaccine(
  data_set,
  immunization_date_col,
  vacc_date_col,
  vacc_name_col,
  immunization_delay
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_immunization_vaccine_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_immunization_vaccine_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="get_immunization_vaccine_+3A_vacc_name_col">vacc_name_col</code></td>
<td>
<p>Name of the column(s) that contain custom vaccine
names for the vaccines (e.g. brand name, type of vaccine)</p>
</td></tr>
<tr><td><code id="get_immunization_vaccine_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Custom vaccine names of the immunizing vaccine.
</p>

<hr>
<h2 id='get_time_to_event_at'>Construct Time-to-Event at</h2><span id='topic+get_time_to_event_at'></span>

<h3>Description</h3>

<p>This function returns both the time-to-event until a
reference number of days, as provided in <code>at</code>, and the outcome status
at the same point. It uses the exposure time as an auxiliary variable
to calculate the time-to-event. The starting point for counting the
time-to-event is <code>t0_follow_up</code>, which is determined based on whether
a matching strategy is used or not. If the event occurs before the
reference date, the end date of the exposure period is used to
calculate the time-to-event. This accounts for whether censoring or an
event occurred. The outcome status is determined based on whether the
outcome date coincides with the end of the follow-up period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_time_to_event_at(
  data_set,
  outcome_date_col,
  censoring_date_col,
  end_cohort,
  at
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_time_to_event_at_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="get_time_to_event_at_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="get_time_to_event_at_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="get_time_to_event_at_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="get_time_to_event_at_+3A_at">at</code></td>
<td>
<p>Time to truncate the follow-up period</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> containing time_to_event and outcome_status
</p>

<hr>
<h2 id='iterate_match'>Iterate Match</h2><span id='topic+iterate_match'></span>

<h3>Description</h3>

<p>This function iterates to re-match registers that were
removed after adjusting exposure times. To avoid generating the
same pairs already removed, each iteration is split in two steps,
one for the removed vaccinated population and the other for the
unvaccinated. A <code>tryCatch</code> validation handles errors when no matches
can be generated due to the lack of treated or untreated individuals.
The threshold for the maximum number of iterations is the total
removed population for the first iteration. The algorithm iterates
until no new adjusted pairs are generated or the maximum number of
iterations is reached.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iterate_match(
  all,
  matched,
  adjusted,
  outcome_date_col,
  censoring_date_col,
  immunization_date_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status,
  exact,
  nearest,
  start_cohort,
  end_cohort
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iterate_match_+3A_all">all</code></td>
<td>
<p><code>data.frame</code> with the entire cohort.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_matched">matched</code></td>
<td>
<p><code>data.frame</code> with the matched cohort.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_adjusted">adjusted</code></td>
<td>
<p><code>data.frame</code> with the adjusted cohort to calculate
removed cases. Default is NULL, which returns 0.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_immunization_date_col">immunization_date_col</code></td>
<td>
<p>Name of the column that contains the
immunization date to set the beginning of the follow-up period
(<code>t0_follow_up</code>).</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_start_cohort">start_cohort</code></td>
<td>
<p>Start date of the study.</p>
</td></tr>
<tr><td><code id="iterate_match_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with adjusted pairs after iterating.
</p>

<hr>
<h2 id='km_model'>Internal function to calculate Kaplan-Meier model and related metrics.</h2><span id='topic+km_model'></span>

<h3>Description</h3>

<p>Internal function to calculate Kaplan-Meier model and related metrics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>km_model(
  data_set,
  outcome_status_col,
  time_to_event_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status,
  start_cohort,
  end_cohort
)
</code></pre>


<h3>Value</h3>

<p><code>data.frame</code> with data from KM model:
&quot;time&quot;, &quot;date&quot;, &quot;strata&quot;,
&quot;n.risk&quot;, &quot;n.event&quot;, &quot;n.censor&quot;,
&quot;surv&quot;, &quot;lower&quot;, &quot;upper&quot;,
&quot;cumincidence&quot;, &quot;cumincidence_lower&quot;, &quot;cumincidence_upper&quot;
</p>

<hr>
<h2 id='make_immunization'>Construct Information of Immunization</h2><span id='topic+make_immunization'></span>

<h3>Description</h3>

<p>This function returns a <code>data.frame</code> with the relevant
information on immunization for the study. An individual is considered
immunized after the characteristic time for the immune response of the
vaccine passes. This time is provided to the function by the parameter
<code>immunization_delay</code>. By default, it is set to 0. The function searches
for vaccine dates based on the end of the follow-up period of each
individual defined by the censoring date (if provided), outcome delay
(if present), and end of the study.
</p>
<p>The function also works with vaccination information spread across several
columns. If this is the case, the parameter <code>vacc_date_col</code> must be passed
as a vector with the names of all the columns to use.
The function uses by default the latest date found. However, it can also
select the first date by setting <code>take_first = TRUE</code>.
</p>
<p>The function returns a column with the immunization date (<code>immunization</code>)
and a vaccine status column (<code>vaccine_status</code>) that is constructed based on
<code>immunization</code>. For several vaccines, the function also returns the name of
the column of the vaccine that was selected as immunizing
(<code>immunizing_dose</code>). If different custom names (e.g., brands) are associated
with each vaccine date, the function can return the custom name of the
vaccine selected as immunizing. This information must be passed in the
parameter <code>vacc_name_col</code>, as a vector in the same order as <code>vacc_date_col</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_immunization(
  data_set,
  outcome_date_col,
  censoring_date_col,
  vacc_date_col,
  vacc_name_col,
  vaccinated_status,
  unvaccinated_status,
  immunization_delay,
  end_cohort,
  take_first = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_immunization_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_vacc_name_col">vacc_name_col</code></td>
<td>
<p>Name of the column(s) that contain custom vaccine
names for the vaccines (e.g. brand name, type of vaccine)</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="make_immunization_+3A_take_first">take_first</code></td>
<td>
<p><code>FALSE</code>: takes the latest vaccine date. <code>TRUE</code>: takes the
earliest vaccine date.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Original <code>data.frame</code> passed in <code>data_set</code> and additional columns
containing information on the immunization.
</p>

<hr>
<h2 id='make_vaccineff_data'>Construct <code>vaccineff_data</code> Object</h2><span id='topic+make_vaccineff_data'></span>

<h3>Description</h3>

<p>This function constructs an S3 object of the class
<code>vaccineff_data</code> that contains all the relevant information for the study.
to estimate the effectiveness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_vaccineff_data(
  data_set,
  outcome_date_col,
  censoring_date_col = NULL,
  vacc_date_col,
  vacc_name_col = NULL,
  vaccinated_status = "v",
  unvaccinated_status = "u",
  immunization_delay = 0,
  end_cohort,
  match = FALSE,
  exact = NULL,
  nearest = NULL,
  take_first = FALSE,
  t0_follow_up = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_vaccineff_data_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date. NULL by default.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_vacc_date_col">vacc_date_col</code></td>
<td>
<p>Name of the column(s) that contain the vaccine dates.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_vacc_name_col">vacc_name_col</code></td>
<td>
<p>Name of the column(s) that contain custom vaccine
names for the vaccines (e.g. brand name, type of vaccine). If provided,
must be of the same length as <code>vacc_date_col</code>.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.
Default is <code>v</code>.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.
Default is <code>u</code>.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_immunization_delay">immunization_delay</code></td>
<td>
<p>Characteristic time in days before the patient
is considered immune. Default is 0.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_match">match</code></td>
<td>
<p><code>TRUE</code>: cohort matching is performed. Default is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching. Default is <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers). Default is
<code>NULL</code>.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_take_first">take_first</code></td>
<td>
<p><code>FALSE</code>: takes the latest vaccine date. <code>TRUE</code>: takes the
earliest vaccine date.</p>
</td></tr>
<tr><td><code id="make_vaccineff_data_+3A_t0_follow_up">t0_follow_up</code></td>
<td>
<p>Column with the initial dates of the follow-up period.
This column is only used if <code>match = FALSE</code>. If not provided, the follow-up
period starts at <code>start_cohort</code>. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S3 object of class <code>vaccineff_data</code> with all the information and
characteristics of the study. <code>data.frames</code> are converted into an object of
class <code>linelist</code> to easily handle with the data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example data
data("cohortdata")

# Create `vaccineff_data`
vaccineff_data &lt;- make_vaccineff_data(data_set = cohortdata,
  outcome_date_col = "death_date",
  censoring_date_col = "death_other_causes",
  vacc_date_col = "vaccine_date_2",
  vaccinated_status = "v",
  unvaccinated_status = "u",
  immunization_delay = 15,
  end_cohort = as.Date("2021-12-31"),
  match = TRUE,
  exact = c("age", "sex"),
  nearest = NULL
)

# Print summary of data
summary(vaccineff_data)

# Plot vaccine coverage
plot(vaccineff_data)

</code></pre>

<hr>
<h2 id='match_cohort'>Match Cohort to Reduce Observational Bias</h2><span id='topic+match_cohort'></span>

<h3>Description</h3>

<p>This function builds pairs of vaccinated and unvaccinated
individuals with similar characteristics. The function relies on the matching
algorithm implemented in the package <code>{MatchIt}</code>, setting, by default,
<code>method = "nearest"</code>, <code>ratio = 1</code>, and <code>distance = "mahalanobis"</code>.
Exact and near characteristics are accepted, passed in the parameters <code>exact</code>
and <code>nearest</code>, respectively. The parameter <code>nearest</code> must be provided
together with the calipers as a named vector (e.g.,
<code>nearest = c(characteristic1 = n1, characteristic2 = n2)</code>, where <code>n1</code>
and <code>n2</code> are the calipers). The default matching <code>method</code> of the function is
<code>static</code>. This means that pairs are matched once, without taking into
account their vaccination, censoring, and outcome dates. After this, the
pairs whose exposure time do not coincide are removed to avoid negative
time-to-events.
The function returns a matched and adjusted by exposure cohort, with
information of the beginning of follow-up period of pairs (<code>t0_follow_up</code>),
corresponding to the vaccination date of the vaccinated individual, the
individual time-to-event (<code>time_to_event</code>) and the outcome status
(<code>outcome_status</code>), both taking into account the right-censoring dates.
Pairs are censored if the vaccinated or unvaccinated partner was previously
censored (i.e., if <code>censoring_date_col</code> is informed) and the censor occurs
before their outcomes. Rolling calendar matching method will be included in
future releases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_cohort(
  data_set,
  outcome_date_col,
  censoring_date_col,
  start_cohort,
  end_cohort,
  nearest,
  exact,
  immunization_date_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_cohort_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_start_cohort">start_cohort</code></td>
<td>
<p>Start date of the study.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_immunization_date_col">immunization_date_col</code></td>
<td>
<p>Name of the column that contains the
immunization date to set the beginning of the follow-up period
(<code>t0_follow_up</code>).</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.</p>
</td></tr>
<tr><td><code id="match_cohort_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of the class <code>match</code>. List with results from static match:
<code>match</code>: <code>data.frame</code> with adjusted cohort,
<code>summary</code>: matching summary,
<code>balance_all</code>: balance of the cohort before matching,
<code>balance_matched</code>: balance of the cohort after matching.
</p>
<p>Four columns are added to the structure provided in <code>data_set</code>:
<code>subclass</code>: ID of, matched pair,
<code>t0_follow_up</code>: beginning of follow-up period for pair,
<code>time_to_event</code>: time to event,
and <code>outcome_status</code>: outcome status
(1:positive, 0: negative).
</p>

<hr>
<h2 id='match_cohort_'>Match Cohort Using Mahalanobis Distance</h2><span id='topic+match_cohort_'></span>

<h3>Description</h3>

<p>This function constructs pairs of vaccinated and unvaccinated
individuals with similar characteristics. It relies on the matching
algorithm implemented in the package <code>{MatchIt}</code>.
By default, the function uses <code>method = "nearest"</code>, <code>ratio = 1</code>, and
<code>distance = "mahalanobis"</code> to perform the matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_cohort_(data_set, vacc_status_col, exact = NULL, nearest = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_cohort__+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="match_cohort__+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="match_cohort__+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
<tr><td><code id="match_cohort__+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with the matched population.
</p>

<hr>
<h2 id='match_pair_info'>Match Information by Pairs</h2><span id='topic+match_pair_info'></span>

<h3>Description</h3>

<p>This function matches numeric/date information of a
pair provided in the column <code>column_to_match</code>. This matching
procedure is required for sharing the censoring information and the
exposure times when adjusting and removing negative exposures
generated by incoherent exposure dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_pair_info(data_set, column_to_match, criteria = c("min", "max"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_pair_info_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="match_pair_info_+3A_column_to_match">column_to_match</code></td>
<td>
<p>The name of the column that contains the information
shared by the pairs.</p>
</td></tr>
<tr><td><code id="match_pair_info_+3A_criteria">criteria</code></td>
<td>
<p>Selection criteria when both individuals provide information.
This can be the minimum (min) or maximum (max) value.</p>
</td></tr>
</table>

<hr>
<h2 id='match_summary'>Constructs Summary with Results from Matching</h2><span id='topic+match_summary'></span>

<h3>Description</h3>

<p>This function creates a summary for the results from
cohort matching. It provides counts grouped by vaccine status for
the entire population, the matched and unmatched populations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match_summary(all, matched, vacc_status_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="match_summary_+3A_all">all</code></td>
<td>
<p><code>data.frame</code> with the entire cohort.</p>
</td></tr>
<tr><td><code id="match_summary_+3A_matched">matched</code></td>
<td>
<p><code>data.frame</code> with the matched cohort.
calculate removed cases. Default is NULL, which returns 0.</p>
</td></tr>
<tr><td><code id="match_summary_+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary <code>data.frame</code> with counts by vaccine status for:
all, matched, unmatched, and removed.
</p>

<hr>
<h2 id='plot_coverage'>Plot Vaccine Coverage</h2><span id='topic+plot_coverage'></span>

<h3>Description</h3>

<p>This function returns a plot of the vaccine coverage or the
cumulative coverage (if cumulative = TRUE). The return is a 2-axis <code>ggplot2</code>
element with the number of vaccines per date on the left axis and the
coverage per date on the right axis. When a matching routine is performed,
the left axis also accounts for the doses of the matched cohort.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_coverage(vaccineff_data, date_interval = NULL, cumulative = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_coverage_+3A_vaccineff_data">vaccineff_data</code></td>
<td>
<p>Object of the class <code>vaccineff_data</code> with
vaccineff data.</p>
</td></tr>
<tr><td><code id="plot_coverage_+3A_date_interval">date_interval</code></td>
<td>
<p>If NULL, the function calculates the coverage interval
based on the min() and max() of the <code>vacc_date_col</code>. It is also possible to
pass a custom date interval to truncate or expand the date interval (see
example).</p>
</td></tr>
<tr><td><code id="plot_coverage_+3A_cumulative">cumulative</code></td>
<td>
<p>If <code>TRUE</code>, returns the cumulative number of doses over the
time window.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>2-axis ggplot2 plot of vaccine coverage and daily doses.
</p>

<hr>
<h2 id='plot_loglog'>Plot Log-Log Test for Proportional Hazards Hypothesis</h2><span id='topic+plot_loglog'></span>

<h3>Description</h3>

<p>This function uses the return from the Cox model
to create a log-log plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_loglog(cox_model_prediction)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_loglog_+3A_cox_model_prediction">cox_model_prediction</code></td>
<td>
<p>Prediction from Cox model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Log-log plot.
</p>

<hr>
<h2 id='plot_survival'>Plot the Survival Probability Based on the Kaplan-Meier Model</h2><span id='topic+plot_survival'></span>

<h3>Description</h3>

<p>This function relies on the implementation of the Kaplan-Meier
model from the package <code>{survival}</code>. It returns a plot of the Survival
Probability or the Cumulative Hazard (if cumulative = TRUE).
The return is a ggplot2 element of the curves with 95% C.I. It is possible
to manipulate the colors, labels, legend, and most of the graphic elements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_survival(km, percentage = TRUE, cumulative = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_survival_+3A_km">km</code></td>
<td>
<p>Kaplan-Meier estimation created with <code>km_model</code>.</p>
</td></tr>
<tr><td><code id="plot_survival_+3A_percentage">percentage</code></td>
<td>
<p>If <code>TRUE</code>, returns probability in percentage.</p>
</td></tr>
<tr><td><code id="plot_survival_+3A_cumulative">cumulative</code></td>
<td>
<p>If <code>TRUE</code>, returns cumulative incidence</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>{ggplot2}</code> object with plot of survival or cumulative incidence.
</p>

<hr>
<h2 id='plot.vaccineff'>Function for Extracting Vaccine Effectiveness Plot</h2><span id='topic+plot.vaccineff'></span>

<h3>Description</h3>

<p>This function creates plots from an object of class
<code>vaccineff</code>. It returns a Log-Log plot when <code>type = "loglog"</code>,
or a Survival curve when <code>type = "surv"</code>. Survival plots can be
shown as cumulative incidence (<code>cumulative = TRUE</code>), and using
percentages (<code>percentage = TRUE</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vaccineff'
plot(
  x,
  type = c("loglog", "surv"),
  cumulative = FALSE,
  percentage = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.vaccineff_+3A_x">x</code></td>
<td>
<p>Object of class <code>vaccineff</code>.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_+3A_type">type</code></td>
<td>
<p>Type of plot. Options are <code>loglog</code> and <code>surv</code>.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_+3A_cumulative">cumulative</code></td>
<td>
<p>If <code>TRUE</code>, the survival curve is shown as cumulative
incidence.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_+3A_percentage">percentage</code></td>
<td>
<p>If <code>TRUE</code>, results are shown on a percentage scale.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plot extracted from <code>vaccineff</code>.
</p>

<hr>
<h2 id='plot.vaccineff_data'>Function for Extracting Vaccineff Data Plot</h2><span id='topic+plot.vaccineff_data'></span>

<h3>Description</h3>

<p>This function returns a plot of the vaccine coverage or the
cumulative coverage (if cumulative = TRUE). The return is a 2-axis <code>ggplot2</code>
element with the number of vaccines per date on the left axis and the
coverage per date on the right axis. When a matching routine is performed,
the left axis also accounts for the doses of the matched cohort.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vaccineff_data'
plot(x, date_interval = NULL, cumulative = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.vaccineff_data_+3A_x">x</code></td>
<td>
<p>Object of class <code>vaccineff_data</code>.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_data_+3A_date_interval">date_interval</code></td>
<td>
<p>If NULL, the function calculates the coverage interval</p>
</td></tr>
<tr><td><code id="plot.vaccineff_data_+3A_cumulative">cumulative</code></td>
<td>
<p>If <code>TRUE</code>, returns the cumulative number of doses over the
time window.</p>
</td></tr>
<tr><td><code id="plot.vaccineff_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plot extracted from <code>vaccineff</code>.
</p>

<hr>
<h2 id='print.summary_vaccineff'>Print summary of VE Results</h2><span id='topic+print.summary_vaccineff'></span>

<h3>Description</h3>

<p>Print summary of <code>vaccineff</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary_vaccineff'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary_vaccineff_+3A_x">x</code></td>
<td>
<p>Object of the class <code>summary.vaccineff</code>.</p>
</td></tr>
<tr><td><code id="print.summary_vaccineff_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='print.summary_vaccineff_data'>Print Summary of Vaccineff Data</h2><span id='topic+print.summary_vaccineff_data'></span>

<h3>Description</h3>

<p>Summarizes the results of <code>make_vaccineff_data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'summary_vaccineff_data'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.summary_vaccineff_data_+3A_x">x</code></td>
<td>
<p>Object of the class <code>summary.vaccineff_data</code>.</p>
</td></tr>
<tr><td><code id="print.summary_vaccineff_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='rematch_'>Rematch Step for Iterative Match</h2><span id='topic+rematch_'></span>

<h3>Description</h3>

<p>This auxiliary function performs the re-matching strategy for
<code>iterate_match()</code>. It rematches the population with status given by
<code>rematch_status</code> and excludes the removed population with status
<code>control_status</code>. A <code>tryCatch</code> validation handles errors when no matches
can be generated due to the lack of treated or untreated individuals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rematch_(
  all,
  adjusted,
  outcome_date_col,
  censoring_date_col,
  immunization_date_col,
  removed_i,
  vacc_status_col,
  rematch_status,
  control_status,
  nearest,
  exact,
  start_cohort,
  end_cohort,
  im
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rematch__+3A_all">all</code></td>
<td>
<p><code>data.frame</code> with the entire cohort.</p>
</td></tr>
<tr><td><code id="rematch__+3A_adjusted">adjusted</code></td>
<td>
<p><code>data.frame</code> with the adjusted cohort to calculate
removed cases. Default is NULL, which returns 0.</p>
</td></tr>
<tr><td><code id="rematch__+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="rematch__+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="rematch__+3A_immunization_date_col">immunization_date_col</code></td>
<td>
<p>Name of the column that contains the
immunization date to set the beginning of the follow-up period
(<code>t0_follow_up</code>).</p>
</td></tr>
<tr><td><code id="rematch__+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="rematch__+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
<tr><td><code id="rematch__+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
<tr><td><code id="rematch__+3A_start_cohort">start_cohort</code></td>
<td>
<p>Start date of the study.</p>
</td></tr>
<tr><td><code id="rematch__+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="rematch__+3A_im">im</code></td>
<td>
<p>Iteration number for error message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List that contains three <code>data.frame</code>:
<code>adjusted</code>: updated adjusted matches
<code>adjusted_i_s</code>: new adjusted matches for <code>rematch_status</code>
<code>matched_i_s</code>: all the new matches for <code>rematch_status</code>
</p>

<hr>
<h2 id='set_status'>Create Status Column</h2><span id='topic+set_status'></span>

<h3>Description</h3>

<p>This function generates a binary status column using the set of
columns passed through the variable <code>col_names</code>. This column must contain the
information of the outcomes or the vaccine dates. It generates a logical
condition using the operators <code>&amp;</code> or <code>|</code>, and evaluates if the registers in
the columns contain or not information. If the logical operator is <code>&amp;</code>, the
function returns a success only if all the columns contain information. On
the other hand, if the logical operator is <code>|</code>, it is enough to find one
column with information indicating success. It is recommended to use this
method when working with several outcomes or several vaccine doses. By
default, it returns a binary column where <code>0</code> means no outcome or no vaccine
and <code>1</code> means the opposite. However, it can also receive custom
options, e.g., <code>c("v", "u")</code> for vaccinated and unvaccinated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_status(data_set, col_names, operator = c("&amp;", "|"), status = c(1, 0))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_status_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with at least one column from which to
generate the status specified in <code>status</code>.</p>
</td></tr>
<tr><td><code id="set_status_+3A_col_names">col_names</code></td>
<td>
<p>Name(s) of the column(s) as a string or a character
vector containing the information from which the status is calculated.</p>
</td></tr>
<tr><td><code id="set_status_+3A_operator">operator</code></td>
<td>
<p>A single logical operator to evaluate the condition.</p>
</td></tr>
<tr><td><code id="set_status_+3A_status">status</code></td>
<td>
<p>A two-element vector specifying the values to be assigned that
indicate whether the individual is vaccinated or not, e.g., <code>c("v","u")</code>. The
first element of the vector must be the status when the condition is
satisfied, i.e., vaccinated, while the second element is the value indicating
that the individual is not vaccinated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Status
</p>

<hr>
<h2 id='static_match'>Static Matching</h2><span id='topic+static_match'></span>

<h3>Description</h3>

<p>This function calls <code>match_cohort_</code> once and then
removes the pairs whose exposure times do not coincide.
It returns the adjusted cohort, a summary of the matching result,
and the balance of the cohort before and after matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>static_match(
  data_set,
  outcome_date_col,
  censoring_date_col,
  immunization_date_col,
  vacc_status_col,
  vaccinated_status,
  unvaccinated_status,
  start_cohort,
  end_cohort,
  nearest,
  exact
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="static_match_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="static_match_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="static_match_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date.</p>
</td></tr>
<tr><td><code id="static_match_+3A_immunization_date_col">immunization_date_col</code></td>
<td>
<p>Name of the column that contains the
immunization date to set the beginning of the follow-up period
(<code>t0_follow_up</code>).</p>
</td></tr>
<tr><td><code id="static_match_+3A_vacc_status_col">vacc_status_col</code></td>
<td>
<p>Name of the column containing the vaccination.</p>
</td></tr>
<tr><td><code id="static_match_+3A_vaccinated_status">vaccinated_status</code></td>
<td>
<p>Status assigned to the vaccinated population.</p>
</td></tr>
<tr><td><code id="static_match_+3A_unvaccinated_status">unvaccinated_status</code></td>
<td>
<p>Status assigned to the unvaccinated population.</p>
</td></tr>
<tr><td><code id="static_match_+3A_start_cohort">start_cohort</code></td>
<td>
<p>Start date of the study.</p>
</td></tr>
<tr><td><code id="static_match_+3A_end_cohort">end_cohort</code></td>
<td>
<p>End date of the study.</p>
</td></tr>
<tr><td><code id="static_match_+3A_nearest">nearest</code></td>
<td>
<p>Named vector with name(s) of column(s) for <code>nearest</code> matching
and caliper(s) for each variable (e.g., <code>nearest = c("characteristic1" = n1, "characteristic2" = n2)</code>, where <code>n1</code> and <code>n2</code> are the calipers).</p>
</td></tr>
<tr><td><code id="static_match_+3A_exact">exact</code></td>
<td>
<p>Name(s) of column(s) for <code>exact</code> matching</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List with results from static match:
<code>match</code>: adjusted cohort, <code>summary</code>: matching summary,
<code>balance_all</code>: balance of the cohort before matching,
<code>balance_matched</code>: balance of the cohort after matching.
</p>

<hr>
<h2 id='summary.vaccineff'>Summarize VE Results</h2><span id='topic+summary.vaccineff'></span>

<h3>Description</h3>

<p>Summarizes the results of <code>vaccineff</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vaccineff'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.vaccineff_+3A_object">object</code></td>
<td>
<p>Object of the class <code>vaccineff</code>.</p>
</td></tr>
<tr><td><code id="summary.vaccineff_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary of the results from <code>estimate_vaccineff</code>.
</p>

<hr>
<h2 id='summary.vaccineff_data'>Summarize Vaccineff Data</h2><span id='topic+summary.vaccineff_data'></span>

<h3>Description</h3>

<p>Summarizes the results of <code>make_vaccineff_data</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'vaccineff_data'
summary(object, warnings_log = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.vaccineff_data_+3A_object">object</code></td>
<td>
<p>Object of the class <code>vaccineff_data</code>.</p>
</td></tr>
<tr><td><code id="summary.vaccineff_data_+3A_warnings_log">warnings_log</code></td>
<td>
<p>If <code>TRUE</code>, prints the warnings log.</p>
</td></tr>
<tr><td><code id="summary.vaccineff_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Summary of the results from vaccineff data
</p>

<hr>
<h2 id='truncate_from_start_cohort'>Internal function to truncate data based on start_cohort</h2><span id='topic+truncate_from_start_cohort'></span>

<h3>Description</h3>

<p>Internal function to truncate data based on start_cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>truncate_from_start_cohort(
  data_set,
  outcome_date_col,
  censoring_date_col,
  start_cohort
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="truncate_from_start_cohort_+3A_data_set">data_set</code></td>
<td>
<p><code>data.frame</code> with cohort information.</p>
</td></tr>
<tr><td><code id="truncate_from_start_cohort_+3A_outcome_date_col">outcome_date_col</code></td>
<td>
<p>Name of the column that contains the outcome dates.</p>
</td></tr>
<tr><td><code id="truncate_from_start_cohort_+3A_censoring_date_col">censoring_date_col</code></td>
<td>
<p>Name of the column that contains the censoring
date. NULL by default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> with truncated data
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
