<!DOCTYPE html><html lang="en-GB"><head><title>Help for package linelist</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {linelist}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#linelist-package'><p>Base Tools for Storing and Handling Case Line Lists</p></a></li>
<li><a href='#+5B.linelist'><p>Subsetting of linelist objects</p></a></li>
<li><a href='#has_tag'><p>A selector function to use in <span class="pkg">tidyverse</span> functions</p></a></li>
<li><a href='#lost_tags_action'><p>Check and set behaviour for lost tags</p></a></li>
<li><a href='#make_linelist'><p>Create a linelist from a data.frame</p></a></li>
<li><a href='#names+26lt+3B-.linelist'><p>Rename columns of a linelist</p></a></li>
<li><a href='#print.linelist'><p>Printing method for linelist objects</p></a></li>
<li><a href='#select_tags'><p>Extract tagged variables of a linelist object</p></a></li>
<li><a href='#select.linelist'><p>Subset columns of a linelist object</p></a></li>
<li><a href='#set_tags'><p>Changes tags of a linelist object</p></a></li>
<li><a href='#tags'><p>Get the list of tags in a linelist</p></a></li>
<li><a href='#tags_defaults'><p>Generate default tags for a linelist</p></a></li>
<li><a href='#tags_df'><p>Extract a data.frame of all tagged variables</p></a></li>
<li><a href='#tags_names'><p>Get the list of tag names used in linelist</p></a></li>
<li><a href='#tags_types'><p>List acceptable variable types for tags</p></a></li>
<li><a href='#validate_linelist'><p>Checks the content of a linelist object</p></a></li>
<li><a href='#validate_tags'><p>Checks the tags of a linelist object</p></a></li>
<li><a href='#validate_types'><p>Check tagged variables are the right class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Tagging and Validating Epidemiological Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides tools to help storing and handling case line list data. The 'linelist' class adds a tagging system to classical 'data.frame' objects to identify key epidemiological data such as dates of symptom onset, epidemiological case definition, age, gender or disease outcome. Once tagged, these variables can be seamlessly used in downstream analyses, making data pipelines more robust and reliable. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://epiverse-trace.github.io/linelist/">https://epiverse-trace.github.io/linelist/</a>,
<a href="https://github.com/epiverse-trace/linelist">https://github.com/epiverse-trace/linelist</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/epiverse-trace/linelist/issues">https://github.com/epiverse-trace/linelist/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Config/Needs/README:</td>
<td>incidence2 (&gt;= 2.1.1), ggplot2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, dplyr, lifecycle, rlang, tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>callr, knitr, magrittr, outbreaks, rmarkdown, spelling,
testthat, tibble</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>r-lib/pkgdown, epiverse-trace/epiversetheme</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-17 13:15:59 UTC; hugo</td>
</tr>
<tr>
<td>Author:</td>
<td>Hugo Gruson <a href="https://orcid.org/0000-0002-4094-1476"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Thibaut Jombart [aut, ccp],
  Tim Taylor [ctb],
  Chris Hartgerink <a href="https://orcid.org/0000-0003-1050-6809"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hugo Gruson &lt;hugo@data.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-17 13:40:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='linelist-package'>Base Tools for Storing and Handling Case Line Lists</h2><span id='topic+linelist-package'></span><span id='topic+linelist'></span>

<h3>Description</h3>

<p>The <em>linelist</em> package provides tools to help storing and handling case line
list data. The <code>linelist</code> class adds a tagging system to classical
<code>data.frame</code> or <code>tibble</code> objects which permits to identify key
epidemiological data such as dates of symptom onset, epi case definition,
age, gender or disease outcome. Once tagged, these variables can be
seamlessly used in downstream analyses, making data pipelines more robust and
reliable.
</p>


<h3>Main functions</h3>


<ul>
<li> <p><code><a href="#topic+make_linelist">make_linelist()</a></code>: to create <code>linelist</code> objects from a <code>data.frame</code> or a
<code>tibble</code>, with the possibility to tag key epi variables
</p>
</li>
<li> <p><code><a href="#topic+set_tags">set_tags()</a></code>: to change or add tagged variables in a <code>linelist</code>
</p>
</li>
<li> <p><code><a href="#topic+tags">tags()</a></code>: to get the list of tags of a <code>linelist</code>
</p>
</li>
<li> <p><code><a href="#topic+tags_df">tags_df()</a></code>: to get a <code>data.frame</code> of all tagged variables
</p>
</li>
<li> <p><code><a href="#topic+lost_tags_action">lost_tags_action()</a></code>: to change the behaviour of actions where tagged
variables are lost (e.g. removing columns storing tagged variables) to
issue warnings, errors, or do nothing
</p>
</li>
<li> <p><code><a href="#topic+get_lost_tags_action">get_lost_tags_action()</a></code>: to check the current behaviour of actions where
tagged variables are lost
</p>
</li></ul>



<h3>Dedicated methods</h3>

<p>Specific methods commonly used to handle <code>data.frame</code> are provided for
<code>linelist</code> objects, typically to help flag or prevent actions which could
alter or lose tagged variables (and may thus break downstream data
pipelines).
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;names() &lt;-&#8288;</code> (and related functions, such as <code><a href="dplyr.html#topic+rename">dplyr::rename()</a></code>) will
rename tags as needed
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;x[...] &lt;-&#8288;</code> and <code style="white-space: pre;">&#8288;x[[...]] &lt;-&#8288;</code> (see <a href="#topic+sub_linelist">sub_linelist</a>): will adopt the
desired behaviour when tagged variables are lost
</p>
</li>
<li> <p><code>print()</code>: prints info about the <code>linelist</code> in addition to the
<code>data.frame</code> or <code>tibble</code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Hugo Gruson <a href="mailto:hugo@data.org">hugo@data.org</a> (<a href="https://orcid.org/0000-0002-4094-1476">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Thibaut Jombart [conceptor]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Tim Taylor [contributor]
</p>
</li>
<li><p> Chris Hartgerink (<a href="https://orcid.org/0000-0003-1050-6809">ORCID</a>) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://epiverse-trace.github.io/linelist/">https://epiverse-trace.github.io/linelist/</a>
</p>
</li>
<li> <p><a href="https://github.com/epiverse-trace/linelist">https://github.com/epiverse-trace/linelist</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/epiverse-trace/linelist/issues">https://github.com/epiverse-trace/linelist/issues</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks)) {
  # using base R style

  ## dataset we'll create a linelist from, only using the first 50 entries
  measles_hagelloch_1861[1:50, ]

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861[1:50, ],
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )
  x

  ## check tagged variables
  tags(x)

  ## robust renaming
  names(x)[1] &lt;- "identifier"
  x

  ## example of dropping tags by mistake - default: warning
  x[, 2:5]

  ## to silence warnings when taggs are dropped
  lost_tags_action("none")
  x[, 2:5]

  ## to trigger errors when taggs are dropped
  # lost_tags_action("error")
  # x[, 2:5]

  ## reset default behaviour
  lost_tags_action()


  # using tidyverse style

  ## example of creating a linelist, adding a new variable, and adding a tag
  ## for it

  if (require(dplyr) &amp;&amp; require(magrittr)) {
    x &lt;- measles_hagelloch_1861 %&gt;%
      tibble() %&gt;%
      make_linelist(
        id = "case_ID",
        date_onset = "date_of_prodrome",
        age = "age",
        gender = "gender"
      ) %&gt;%
      mutate(result = if_else(is.na(date_of_death), "survived", "died")) %&gt;%
      set_tags(outcome = "result") %&gt;%
      rename(identifier = case_ID)

    head(x)

    ## extract tagged variables
    x %&gt;%
      select(has_tag(c("gender", "age")))

    x %&gt;%
      tags()

    x %&gt;%
      select(starts_with("date"))
  }
}

</code></pre>

<hr>
<h2 id='+5B.linelist'>Subsetting of linelist objects</h2><span id='topic++5B.linelist'></span><span id='topic+sub_linelist'></span><span id='topic++5B+3C-.linelist'></span><span id='topic++5B+5B+3C-.linelist'></span><span id='topic++24+3C-.linelist'></span>

<h3>Description</h3>

<p>The <code style="white-space: pre;">&#8288;[]&#8288;</code> and <code style="white-space: pre;">&#8288;[[]]&#8288;</code> operators for <code>linelist</code> objects behaves like for regular
<code>data.frame</code> or <code>tibble</code>, but check that tagged variables are not lost, and
takes the appropriate action if this is the case (warning, error, or ignore,
depending on the general option set via <code><a href="#topic+lost_tags_action">lost_tags_action()</a></code>) .
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'linelist'
x[i, j, drop = FALSE]

## S3 replacement method for class 'linelist'
x[i, j] &lt;- value

## S3 replacement method for class 'linelist'
x[[i, j]] &lt;- value

## S3 replacement method for class 'linelist'
x$name &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B5B.linelist_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="+2B5B.linelist_+3A_i">i</code></td>
<td>
<p>a vector of <code>integer</code> or <code>logical</code> to subset the rows of the
<code>linelist</code></p>
</td></tr>
<tr><td><code id="+2B5B.linelist_+3A_j">j</code></td>
<td>
<p>a vector of <code>character</code>, <code>integer</code>, or <code>logical</code> to subset the
columns of the <code>linelist</code></p>
</td></tr>
<tr><td><code id="+2B5B.linelist_+3A_drop">drop</code></td>
<td>
<p>a <code>logical</code> indicating if, when a single column is selected, the
<code>data.frame</code> class should be dropped to return a simple vector, in which
case the <code>linelist</code> class is lost as well; defaults to <code>FALSE</code></p>
</td></tr>
<tr><td><code id="+2B5B.linelist_+3A_value">value</code></td>
<td>
<p>the replacement to be used for the entries identified in <code>x</code></p>
</td></tr>
<tr><td><code id="+2B5B.linelist_+3A_name">name</code></td>
<td>

<p>a literal character string or a <a href="base.html#topic+name">name</a> (possibly <a href="base.html#topic+backtick">backtick</a>
quoted).  For extraction, this is normally (see under
&lsquo;Environments&rsquo;) partially matched to the <code><a href="base.html#topic+names">names</a></code>
of the object.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If no drop is happening, a <code>linelist</code>. Otherwise an atomic vector.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+lost_tags_action">lost_tags_action()</a></code> to set the behaviour to adopt when tags are
lost through subsetting; default is to issue a warning
</p>
</li>
<li> <p><code><a href="#topic+get_lost_tags_action">get_lost_tags_action()</a></code> to check the current the behaviour
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks) &amp;&amp; require(dplyr) &amp;&amp; require(magrittr)) {
  ## create a linelist
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      date_onset = "date_of_prodrome",
      age = "age",
      gender = "gender"
    ) %&gt;%
    mutate(result = if_else(is.na(date_of_death), "survived", "died")) %&gt;%
    set_tags(outcome = "result") %&gt;%
    rename(identifier = case_ID)
  x

  ## dangerous removal of a tagged column setting it to NULL issues a warning
  x[, 1] &lt;- NULL
  x

  x[[2]] &lt;- NULL
  x

  x$age &lt;- NULL
  x
}
</code></pre>

<hr>
<h2 id='has_tag'>A selector function to use in <span class="pkg">tidyverse</span> functions</h2><span id='topic+has_tag'></span>

<h3>Description</h3>

<p>A selector function to use in <span class="pkg">tidyverse</span> functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>has_tag(tags)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="has_tag_+3A_tags">tags</code></td>
<td>
<p>A character vector of tags listing the variables you want to
operate on</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector containing the position of the columns with the
requested tags
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks) &amp;&amp; require(dplyr)) {

  ## dataset we'll create a linelist from
  measles_hagelloch_1861

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861,
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )
  head(x)

  x %&gt;%
    select(has_tag(c("id", "age"))) %&gt;%
    head()
}
</code></pre>

<hr>
<h2 id='lost_tags_action'>Check and set behaviour for lost tags</h2><span id='topic+lost_tags_action'></span><span id='topic+get_lost_tags_action'></span>

<h3>Description</h3>

<p>This function determines the behaviour to adopt when tagged variables of a
<code>linelist</code> are lost e.g. through subsetting. This is achieved using <code>options</code>
defined for the <code>linelist</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lost_tags_action(action = c("warning", "error", "none"), quiet = FALSE, x)

get_lost_tags_action()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lost_tags_action_+3A_action">action</code></td>
<td>
<p>a <code>character</code> indicating the behaviour to adopt when tagged
variables have been lost: &quot;error&quot; (default) will issue an error; &quot;warning&quot;
will issue a warning; &quot;none&quot; will do nothing</p>
</td></tr>
<tr><td><code id="lost_tags_action_+3A_quiet">quiet</code></td>
<td>
<p>a <code>logical</code> indicating if a message should be displayed; only
used outside pipelines</p>
</td></tr>
<tr><td><code id="lost_tags_action_+3A_x">x</code></td>
<td>
<p>deprecated</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The errors or warnings generated by linelist in case of tagged
variable loss has a custom class of <code>linelist_error</code> and <code>linelist_warning</code>
respectively.
</p>


<h3>Value</h3>

<p>returns <code>NULL</code>; the option itself is set in <code>options("linelist")</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># reset default - done automatically at package loading
lost_tags_action()

# check current value
get_lost_tags_action()

# change to issue errors when tags are lost
lost_tags_action("error")
get_lost_tags_action()

# change to ignore when tags are lost
lost_tags_action("none")
get_lost_tags_action()

# reset to default: warning
lost_tags_action()

</code></pre>

<hr>
<h2 id='make_linelist'>Create a linelist from a data.frame</h2><span id='topic+make_linelist'></span>

<h3>Description</h3>

<p>This function converts a <code>data.frame</code> or a <code>tibble</code> into a <code>linelist</code> object,
where different types of epidemiologically relevant data are tagged. This
includes dates of different events (e.g. onset of symptoms, case reporting),
information on the patient (e.g. age, gender, location) as well as other
information such as the type of case (e.g. confirmed, probable) or the
outcome of the disease. The output will seem to be the same <code>data.frame</code>, but
<code>linelist</code>-aware packages will then be able to automatically use tagged
fields for further data cleaning and analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_linelist(x, ..., allow_extra = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_linelist_+3A_x">x</code></td>
<td>
<p>a <code>data.frame</code> or a <code>tibble</code> containing case line list data, with
cases in rows and variables in columns</p>
</td></tr>
<tr><td><code id="make_linelist_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A series of tags provided as
<code>tag_name = "column_name"</code>, where <code>tag_name</code> indicates any of the known
variables listed in 'Details' and values indicate their name in <code>x</code>; see
details for a list of known variable types and their expected content</p>
</td></tr>
<tr><td><code id="make_linelist_+3A_allow_extra">allow_extra</code></td>
<td>
<p>a <code>logical</code> indicating if additional data tags not
currently recognized by <code>linelist</code> should be allowed; if <code>FALSE</code>, unknown
tags will trigger an error</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Known variable types include:
</p>

<ul>
<li> <p><code>id</code>: a unique case identifier as <code>numeric</code> or <code>character</code>
</p>
</li>
<li> <p><code>date_onset</code>: date of symptom onset (see below for date formats)
</p>
</li>
<li> <p><code>date_reporting</code>: date of case notification (see below for date formats)
</p>
</li>
<li> <p><code>date_admission</code>: date of hospital admission (see below for date formats)
</p>
</li>
<li> <p><code>date_discharge</code>: date of hospital discharge (see below for date formats)
</p>
</li>
<li> <p><code>date_outcome</code>: date of disease outcome (see below for date formats)
</p>
</li>
<li> <p><code>date_death</code>: date of death (see below for date formats)
</p>
</li>
<li> <p><code>gender</code>: a <code>factor</code> or <code>character</code> indicating the gender of the patient
</p>
</li>
<li> <p><code>age</code>: a <code>numeric</code> indicating the age of the patient, in years
</p>
</li>
<li> <p><code>location</code>: a <code>factor</code> or <code>character</code> indicating the location of the
patient
</p>
</li>
<li> <p><code>occupation</code>: a <code>factor</code> or <code>character</code> indicating the professional
activity of the patient
</p>
</li>
<li> <p><code>hcw</code>: a <code>logical</code> indicating if the patient is a health care worker
</p>
</li>
<li> <p><code>outcome</code>: a <code>factor</code> or <code>character</code> indicating the outcome of the disease
(death or survival)
</p>
</li></ul>

<p>Dates can be provided in the following formats/types:
</p>

<ul>
<li> <p><code>Date</code> objects (e.g. using <code>as.Date</code> on a <code>character</code> with a correct date
format); this is the recommended format
</p>
</li>
<li> <p><code>POSIXct/POSIXlt</code> objects (when a finer scale than days is needed)
</p>
</li>
<li> <p><code>numeric</code> values, typically indicating the number of days since the first
case
</p>
</li></ul>



<h3>Value</h3>

<p>The function returns a <code>linelist</code> object.
</p>


<h3>See Also</h3>


<ul>
<li><p> An overview of the <a href="#topic+linelist">linelist</a> package
</p>
</li>
<li> <p><code><a href="#topic+tags_names">tags_names()</a></code>: for a list of known tag names
</p>
</li>
<li> <p><code><a href="#topic+tags_types">tags_types()</a></code>: for the associated accepted types/classes
</p>
</li>
<li> <p><code><a href="#topic+tags">tags()</a></code>: for a list of tagged variables in a <code>linelist</code>
</p>
</li>
<li> <p><code><a href="#topic+set_tags">set_tags()</a></code>: for modifying tags
</p>
</li>
<li> <p><code><a href="#topic+tags_df">tags_df()</a></code>: for selecting variables by tags
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks)) {

  ## dataset we will convert to linelist
  head(measles_hagelloch_1861)

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861,
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )

  ## print result - just first few entries
  head(x)

  ## check tags
  tags(x)

  ## Tags can also be passed as a list with the splice operator (!!!)
  my_tags &lt;- list(
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )
  new_x &lt;- make_linelist(measles_hagelloch_1861, !!!my_tags)

  ## The output is strictly equivalent to the previous one
  identical(x, new_x)
}

</code></pre>

<hr>
<h2 id='names+26lt+3B-.linelist'>Rename columns of a linelist</h2><span id='topic+names+3C-.linelist'></span>

<h3>Description</h3>

<p>This function can be used to rename the columns a <code>linelist</code>, adjusting tags
as needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'linelist'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="names+2B26lt+2B3B-.linelist_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="names+2B26lt+2B3B-.linelist_+3A_value">value</code></td>
<td>
<p>a <code>character</code> vector to set the new names of the columns of <code>x</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>linelist</code> with new column names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks)) {

  ## dataset to create a linelist from
  measles_hagelloch_1861

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861,
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )
  head(x)

  ## change names
  names(x)[1] &lt;- "case_label"

  ## see results: tags have been updated
  head(x)
  tags(x)

 # This also works with using `dplyr::rename()` because it uses names&lt;-()
 # under hood
 if (require(dplyr)) {
   x &lt;- x %&gt;%
     rename(case_id= case_label)
   head(x)
   tags(x)
 }
}
</code></pre>

<hr>
<h2 id='print.linelist'>Printing method for linelist objects</h2><span id='topic+print.linelist'></span>

<h3>Description</h3>

<p>This function prints linelist objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'linelist'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.linelist_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="print.linelist_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to 'print'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks)) {

  ## dataset we'll create a linelist from
  measles_hagelloch_1861

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861,
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )

  ## print object - using only the first few entries
  head(x)

  # version with a tibble
  if (require(tibble) &amp;&amp; require(magrittr)) {
    measles_hagelloch_1861 %&gt;%
      tibble() %&gt;%
      make_linelist(
        id = "case_ID",
        date_onset = "date_of_prodrome",
        age = "age",
        gender = "gender"
      )
  }
}
</code></pre>

<hr>
<h2 id='select_tags'>Extract tagged variables of a linelist object</h2><span id='topic+select_tags'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
This function was  equivalent to running successively <code><a href="#topic+tags_df">tags_df()</a></code> and
<code><a href="dplyr.html#topic+select">dplyr::select()</a></code> on a <code>linelist</code> object.
To encourage users to understand what is going on and in order to follow the
software engineering good practice of providing just one way to do a given
task, this function is now deprecated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_tags(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select_tags_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="select_tags_+3A_...">...</code></td>
<td>
<p>the tagged variables to select, using <code><a href="dplyr.html#topic+select">dplyr::select()</a></code> compatible
terminology; see <code><a href="#topic+tags_names">tags_names()</a></code> for default values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of tagged variables.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+tags">tags()</a></code> for existing tags in a <code>linelist</code>
</p>
</li>
<li> <p><code><a href="#topic+tags_df">tags_df()</a></code> to get a <code>data.frame</code> of all tags
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks)) {

  ## dataset we'll create a linelist from
  measles_hagelloch_1861

  ## create linelist
  x &lt;- make_linelist(measles_hagelloch_1861,
    id = "case_ID",
    date_onset = "date_of_prodrome",
    age = "age",
    gender = "gender"
  )
  head(x)

  ## check tagged variables
  tags(x)

  # DEPRECATED!
  select_tags(x, "gender", "age")

  # Instead, use:
  library(dplyr)
  x %&gt;%
    tags_df() %&gt;%
    select(gender, age)
}

</code></pre>

<hr>
<h2 id='select.linelist'>Subset columns of a linelist object</h2><span id='topic+select.linelist'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#superseded"><img src="../help/figures/lifecycle-superseded.svg" alt='[Superseded]' /></a>
</p>
<p>This function was deprecated to ensure full compatibility with the default
<code><a href="dplyr.html#topic+select">dplyr::select()</a></code> methods. The tag selection feature is now possible via the
<code><a href="#topic+has_tag">has_tag()</a></code> selection helper.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'linelist'
select(.data, ..., tags)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="select.linelist_+3A_.data">.data</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="select.linelist_+3A_...">...</code></td>
<td>
<p>the variables to select, using <code>dplyr</code> compatible syntax</p>
</td></tr>
<tr><td><code id="select.linelist_+3A_tags">tags</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> It is now recommended to
leverage the <code><a href="#topic+has_tag">has_tag()</a></code> selection helper rather than this argument.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a <code>linelist</code> with selected columns.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+tags_df">tags_df()</a></code> to return a <code>data.frame</code> of all tagged variables
</p>
</li></ul>


<hr>
<h2 id='set_tags'>Changes tags of a linelist object</h2><span id='topic+set_tags'></span>

<h3>Description</h3>

<p>This function changes the <code>tags</code> of a <code>linelist</code> object, using the same
syntax as the constructor <code><a href="#topic+make_linelist">make_linelist()</a></code>. If some of the default tags are
missing, they will be added to the final object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_tags(x, ..., allow_extra = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_tags_+3A_x">x</code></td>
<td>
<p>a <code>data.frame</code> or a <code>tibble</code> containing case line list data, with
cases in rows and variables in columns</p>
</td></tr>
<tr><td><code id="set_tags_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A series of tags provided as
<code>tag_name = "column_name"</code>, where <code>tag_name</code> indicates any of the known
variables listed in 'Details' and values indicate their name in <code>x</code>; see
details for a list of known variable types and their expected content</p>
</td></tr>
<tr><td><code id="set_tags_+3A_allow_extra">allow_extra</code></td>
<td>
<p>a <code>logical</code> indicating if additional data tags not
currently recognized by <code>linelist</code> should be allowed; if <code>FALSE</code>, unknown
tags will trigger an error</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a <code>linelist</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make_linelist">make_linelist()</a></code> to create a <code>linelist</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks)) {
  ## create a linelist
  x &lt;- make_linelist(measles_hagelloch_1861, date_onset = "date_of_rash")
  tags(x)

  ## add new tags and fix an existing one
  x &lt;- set_tags(x,
    age = "age",
    gender = "gender",
    date_onset = "date_of_prodrome"
  )
  tags(x)

  ## add non-default tags using allow_extra
  x &lt;- set_tags(x, severe = "complications", allow_extra = TRUE)
  tags(x)

  ## remove tags by setting them to NULL
  old_tags &lt;- tags(x)
  x &lt;- set_tags(x, age = NULL, gender = NULL)
  tags(x)

  ## setting tags providing a list (used to restore old tags here)
  x &lt;- set_tags(x, !!!old_tags)
  tags(x)
}

</code></pre>

<hr>
<h2 id='tags'>Get the list of tags in a linelist</h2><span id='topic+tags'></span>

<h3>Description</h3>

<p>This function returns the list of tags identifying specific variable types in
a <code>linelist</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags(x, show_null = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tags_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="tags_+3A_show_null">show_null</code></td>
<td>
<p>a <code>logical</code> indicating if the complete list of tags,
including <code>NULL</code> ones, should be returned; if <code>FALSE</code>, only tags with a
non-NULL value are returned; defaults to <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Tags are stored as the <code>tags</code> attribute of the object.
</p>


<h3>Value</h3>

<p>The function returns a named <code>list</code> where names indicate generic
types of data, and values indicate which column they correspond to.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks)) {
  ## make a linelist
  x &lt;- make_linelist(measles_hagelloch_1861, date_onset = "date_of_prodrome")

  ## check non-null tags
  tags(x)

  ## get a list of all tags, including NULL ones
  tags(x, TRUE)
}

</code></pre>

<hr>
<h2 id='tags_defaults'>Generate default tags for a linelist</h2><span id='topic+tags_defaults'></span>

<h3>Description</h3>

<p>This function returns a named list providing the default tags for a
<code>linelist</code> object (all default to NULL).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_defaults()
</code></pre>


<h3>Value</h3>

<p>A named <code>list</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tags_defaults()

</code></pre>

<hr>
<h2 id='tags_df'>Extract a data.frame of all tagged variables</h2><span id='topic+tags_df'></span>

<h3>Description</h3>

<p>This function returns a <code>data.frame</code> of all the tagged variables stored in a
<code>linelist</code>. Note that the output is no longer a <code>linelist</code>, but a regular
<code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_df(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tags_df_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of tagged variables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks) &amp;&amp; require(dplyr) &amp;&amp; require(magrittr)) {

  ## create a tibble linelist
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      date_onset = "date_of_prodrome",
      age = "age",
      gender = "gender"
    )
  x

  ## get a data.frame of all tagged variables
  tags_df(x)
}
</code></pre>

<hr>
<h2 id='tags_names'>Get the list of tag names used in linelist</h2><span id='topic+tags_names'></span>

<h3>Description</h3>

<p>This function returns the a <code>character</code> of all tag names used to designate
specific variable types in a <code>linelist</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_names()
</code></pre>


<h3>Value</h3>

<p>The function returns a <code>character</code> vector.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tags_defaults">tags_defaults()</a></code> for a <code>list</code> of default values of the tags
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tags_names()

</code></pre>

<hr>
<h2 id='tags_types'>List acceptable variable types for tags</h2><span id='topic+tags_types'></span>

<h3>Description</h3>

<p>This function returns a named list providing the acceptable data types for
the default tags. If no argument is provided, it returns default
values. Otherwise, provided values will be used to define the defaults.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_types(..., allow_extra = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tags_types_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>&gt; A series of tags provided as
<code>tag_name = "column_name"</code>, where <code>tag_name</code> indicates any of the known
variables listed in 'Details' and values indicate their name in <code>x</code>; see
details for a list of known variable types and their expected content</p>
</td></tr>
<tr><td><code id="tags_types_+3A_allow_extra">allow_extra</code></td>
<td>
<p>a <code>logical</code> indicating if additional data tags not
currently recognized by <code>linelist</code> should be allowed; if <code>FALSE</code>, unknown
tags will trigger an error</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named <code>list</code>.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+tags_defaults">tags_defaults()</a></code> for the default tags
</p>
</li>
<li> <p><code><a href="#topic+validate_types">validate_types()</a></code> uses <code><a href="#topic+tags_types">tags_types()</a></code> for validating tags
</p>
</li>
<li> <p><code><a href="#topic+validate_linelist">validate_linelist()</a></code> uses <code><a href="#topic+tags_types">tags_types()</a></code> for validating tags
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># list default values
tags_types()

# change existing values
tags_types(date_onset = "Date") # impose a Date class

# add new types e.g. to allow genetic sequences using ape's format
tags_types(sequence = "DNAbin", allow_extra = TRUE)

</code></pre>

<hr>
<h2 id='validate_linelist'>Checks the content of a linelist object</h2><span id='topic+validate_linelist'></span>

<h3>Description</h3>

<p>This function evaluates the validity of a <code>linelist</code> object by checking the
object class, its tags, and the types of the tagged variables. It combines
validations checks made by <code><a href="#topic+validate_types">validate_types()</a></code> and <code><a href="#topic+validate_tags">validate_tags()</a></code>. See
'Details' section for more information on the checks performed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_linelist(x, allow_extra = FALSE, ref_types = tags_types())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_linelist_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="validate_linelist_+3A_allow_extra">allow_extra</code></td>
<td>
<p>a <code>logical</code> indicating if additional data tags not
currently recognized by <code>linelist</code> should be allowed; if <code>FALSE</code>, unknown
tags will trigger an error</p>
</td></tr>
<tr><td><code id="validate_linelist_+3A_ref_types">ref_types</code></td>
<td>
<p>a <code>list</code> providing allowed types for all tags, as returned
by <code><a href="#topic+tags_types">tags_types()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following checks are performed:
</p>

<ul>
<li> <p><code>x</code> is a <code>linelist</code> object
</p>
</li>
<li> <p><code>x</code> has a well-formed <code>tags</code> attribute
</p>
</li>
<li><p> all default tags are present (even if <code>NULL</code>)
</p>
</li>
<li><p> all tagged variables correspond to existing columns
</p>
</li>
<li><p> all tagged variables have an acceptable class
</p>
</li>
<li><p> (optional) <code>x</code> has no extra tag beyond the default tags
</p>
</li></ul>



<h3>Value</h3>

<p>If checks pass, a <code>linelist</code> object; otherwise issues an error.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+tags_types">tags_types()</a></code> to change allowed types
</p>
</li>
<li> <p><code><a href="#topic+validate_types">validate_types()</a></code> to check if tagged variables have the right classes
</p>
</li>
<li> <p><code><a href="#topic+validate_tags">validate_tags()</a></code> to perform a series of checks on the tags
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
if (require(outbreaks) &amp;&amp; require(dplyr) &amp;&amp; require(magrittr)) {

  ## create a valid linelist
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      date_onset = "date_of_prodrome",
      age = "age",
      gender = "gender"
    )
  x

  ## validation
  validate_linelist(x)

  ## create an invalid linelist - onset date is a factor
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      date_onset = "gender",
      age = "age"
    )
  x

  ## the below issues an error
  ## note: tryCatch is only used to avoid a genuine error in the example
  tryCatch(validate_linelist(x), error = paste)
}
</code></pre>

<hr>
<h2 id='validate_tags'>Checks the tags of a linelist object</h2><span id='topic+validate_tags'></span>

<h3>Description</h3>

<p>This function evaluates the validity of the tags of a <code>linelist</code> object by
checking that: i) tags are present ii) tags is a <code>list</code> of <code>character</code> iii)
that all default tags are present iv) tagged variables exist v) that no extra
tag exists (if <code>allow_extra</code> is <code>FALSE</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_tags(x, allow_extra = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_tags_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="validate_tags_+3A_allow_extra">allow_extra</code></td>
<td>
<p>a <code>logical</code> indicating if additional data tags not
currently recognized by <code>linelist</code> should be allowed; if <code>FALSE</code>, unknown
tags will trigger an error</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If checks pass, a <code>linelist</code> object; otherwise issues an error.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+validate_types">validate_types()</a></code> to check if tagged variables have
the right classes
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks) &amp;&amp; require(dplyr) &amp;&amp; require(magrittr)) {

  ## create a valid linelist
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      date_onset = "date_of_prodrome",
      age = "age",
      gender = "gender"
    )
  x

  ## validation
  validate_tags(x)

  ## hack to create an invalid tags (missing defaults)
  attr(x, "tags") &lt;- list(id = "case_ID")

  ## the below issues an error
  ## note: tryCatch is only used to avoid a genuine error in the example
  tryCatch(validate_tags(x), error = paste)
}
</code></pre>

<hr>
<h2 id='validate_types'>Check tagged variables are the right class</h2><span id='topic+validate_types'></span>

<h3>Description</h3>

<p>This function checks the class of each tagged variable in a <code>linelist</code>
against pre-defined accepted classes in <code><a href="#topic+tags_types">tags_types()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_types(x, ref_types = tags_types())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_types_+3A_x">x</code></td>
<td>
<p>a <code>linelist</code> object</p>
</td></tr>
<tr><td><code id="validate_types_+3A_ref_types">ref_types</code></td>
<td>
<p>a <code>list</code> providing allowed types for all tags, as returned
by <code><a href="#topic+tags_types">tags_types()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named <code>list</code>.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+tags_types">tags_types()</a></code> to change allowed types
</p>
</li>
<li> <p><code><a href="#topic+validate_tags">validate_tags()</a></code> to perform a series of checks on the tags
</p>
</li>
<li> <p><code><a href="#topic+validate_linelist">validate_linelist()</a></code> to combine <code>validate_tags</code> and <code>validate_types</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if (require(outbreaks) &amp;&amp; require(dplyr) &amp;&amp; require(magrittr)) {

  ## create an invalid linelist - gender is a numeric
  x &lt;- measles_hagelloch_1861 %&gt;%
    tibble() %&gt;%
    make_linelist(
      id = "case_ID",
      gender = "infector"
    )
  x

  ## the below would issue an error
  ## note: tryCatch is only used to avoid a genuine error in the example
  tryCatch(validate_types(x), error = paste)

  ## to allow other types, e.g. gender to be integer, character or factor
  validate_types(x, tags_types(gender = c("integer", "character", "factor")))
}
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
