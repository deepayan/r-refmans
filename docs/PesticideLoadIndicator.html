<!DOCTYPE html><html><head><title>Help for package PesticideLoadIndicator</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PesticideLoadIndicator}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_products_column_names'><p>Check if column names of applied pesticide products dataframe are valid</p></a></li>
<li><a href='#check_substance_column_names'><p>Check if column names of substances dataframe are valid</p></a></li>
<li><a href='#compute_pesticide_load_indicator'><p>Compute Pesticide Load Indicator with user supplied information on pesticide properties</p></a></li>
<li><a href='#compute_risk_score'><p>Calculates the sum of risk scores from a list of H-phrases and expands the table</p></a></li>
<li><a href='#default.load.factors'><p>Default load factors</p></a></li>
<li><a href='#match.ppdb'><p>Expend tables with information on ecotoxicity, fate (and human health) properties from PPDB</p></a></li>
<li><a href='#products.load'><p>load included products.xlsx file</p></a></li>
<li><a href='#products.path'><p>path to  includedexamples products.xlsx file</p></a></li>
<li><a href='#required_columns_products'><p>Computing the Pesticide Load Indicator for pesticide application data</p>
The provided functions will compute the Pesticide Load Indicator (PLI) as described in Kudsk et al. (2018) for pesticide application data provided by the user.
Computing the PLI requires information on applied pesticides in a table format, as well as information on fate, ecotoxicity and human health properties of applied pesticide products, as provided in the Pesticide Properties Database (PPDB) of the University of Hertfordshire. See below for a detailed description.
The PLI can either be computed using user supplied information on pesticide properties or by automatically including the information based on the PPDB. Access to the PPDb requires a license - see http://sitem.herts.ac.uk/aeru/ppdb/.</a></li>
<li><a href='#substances.load'><p>load included substances.xlsx file</p></a></li>
<li><a href='#substances.path'><p>path to included examples substances.xlsx file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Computes Danish Pesticide Load Indicator</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes the Danish Pesticide Load Indicator as described in Kudsk et al. (2018) &lt;<a href="https://doi.org/10.1016%2Fj.landusepol.2017.11.010">doi:10.1016/j.landusepol.2017.11.010</a>&gt; and Moehring et al. (2019) &lt;<a href="https://doi.org/10.1016%2Fj.scitotenv.2018.07.287">doi:10.1016/j.scitotenv.2018.07.287</a>&gt; for pesticide use data. Additionally offers the possibility to directly link pesticide use data to pesticide properties given access to the Pesticide properties database (Lewis et al., 2016) &lt;<a href="https://doi.org/10.1080%2F10807039.2015.1133242">doi:10.1080/10807039.2015.1133242</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>Imports:</td>
<td>readxl, stringr, magrittr, rlang, dplyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-24 15:51:29 UTC; moehring</td>
</tr>
<tr>
<td>Author:</td>
<td>Niklas Moehring <a href="https://orcid.org/0000-0003-0292-4402"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Leonie Vidensky [aut],
  Robert Finger [aut],
  Per Kudsk [aut],
  Lise Nistrup Jørgensen [aut],
  Jens Erik Ørum [aut],
  Uwe Schmitt [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Niklas Moehring &lt;niklas.moehring@mtec.ethz.ch&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-24 16:27:57 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_products_column_names'>Check if column names of applied pesticide products dataframe are valid</h2><span id='topic+check_products_column_names'></span>

<h3>Description</h3>

<p>checks for valid colum names and stops execution if problems are detected
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_products_column_names(products)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_products_column_names_+3A_products">products</code></td>
<td>
<p>Dataframe with raw pesticide application data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>

<hr>
<h2 id='check_substance_column_names'>Check if column names of substances dataframe are valid</h2><span id='topic+check_substance_column_names'></span>

<h3>Description</h3>

<p>checks for valid colum names and stops execution if problems are detected
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_substance_column_names(substances)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_substance_column_names_+3A_substances">substances</code></td>
<td>
<p>Dataframe describing active ingredients of the applied pesticide products.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value
</p>

<hr>
<h2 id='compute_pesticide_load_indicator'>Compute Pesticide Load Indicator with user supplied information on pesticide properties</h2><span id='topic+compute_pesticide_load_indicator'></span>

<h3>Description</h3>

<p>Compute Pesticide Load Indicator with user supplied information on pesticide properties
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_pesticide_load_indicator(substances, products)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_pesticide_load_indicator_+3A_substances">substances</code></td>
<td>
<p>Dataframe describing active ingredients of the applied pesticide products, including their ecotoxicity, fate and human health properties.</p>
</td></tr>
<tr><td><code id="compute_pesticide_load_indicator_+3A_products">products</code></td>
<td>
<p>Dataframe with raw pesticide application data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with pesticide indicators for each pesticide application
indicated in the products dataframe.
Computes Pesticide Load Indicator (L) and its subindicators:
The Human Health Load (HL), Ecotoxicity Load (TL) and Fate Load (FL).
If standard dosages are provided the Standard Treatment Index (STI) and
the Pesticide Load Index (LI=STI*L) are also computed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# A) Compute Pesticide Load indicator for a complete database

# load the dataframe containing the pesticide use data.
products_user &lt;- products.load()
# load the (user-supplied) dataframe with detailed information on used pesticides.
substances_user &lt;- substances.load()

# Compute the Pesticide Load Indicator and its sub-indicators using the user supplied data.
indicators_user &lt;- compute_pesticide_load_indicator(substances = substances_user,
products= products_user)

# B) Compute Pesticide Load Indicator starting from basic data on products used
# Add properties of pesticides with match_ppdb()

# Step1: load the dataframe containing the basic pesticide use data.
products_basic &lt;- products.load()[,c("product","crop","standard.dosage","formula")]
# Step2: Add information on the year in which the product is used.
# (not neccessary if all data is before 2013 - then just insert a dummy year &gt; 2013)
products_basic$Year &lt;- c(2009,2010,2011,2012)

# Step3: load the (user-supplied) dataframe with basic information on used pesticides
substances_basic &lt;- substances.load()[,c("substance","product","concentration")]

# Step4: Add the CAS number of each active ingredient to link to the Pesticide Properties database.
substances_basic$CAS.number &lt;- c("94361-06-5","141517-21-7","111988-49-9","467-69-6",
                                "1918-00-9","94-74-6","21087-64-9","142459-58-3")

# Step5: Add the Load factors as defined in the Danish Pesticide Load indicator.
# These values are supplied in the package.
# Alternatively supply own values for the Load factor.
Load.factors &lt;- c("Load.Factor.SCI","Load.Factor.BCF","Load.Factor.SoilDT50",
       "Load.Factor.Birds","Load.Factor.Mammals","Load.Factor.Fish",
       "Load.Factor.Aquatic.Invertebrates","Load.Factor.Algae","Load.Factor.Aquatic.Plants",
       "Load.Factor.Earthworms","Load.Factor.Bees","Load.Factor.Fish.Chronic",
       "Load.Factor.Aquatic.Invertebrates.Chronic","Load.Factor.Earthworms.Chronic")
for (i in 1:length(Load.factors)){
  substances_basic[,Load.factors[i]]&lt;- rep(times=dim(substances_basic)[[1]],
                                          substances.load()[1,Load.factors[i]])
}

# Step6: Add pesticide properties from the PPDB using the match_ppdb() function
# Indicate the folder containing the "General","Fate", "Human" and "Ecotox" tables of the PPPDB.
# Excel files (under the exact same name, e.g. Human.xlsx) are required.
# Attention, a licensed access to the PPPDB (Lewis et al., 2016) is required.
# Note that the "Fate" table should include a column indicating the "SCI.GROW" values.
folder &lt;- "path"
matched_data &lt;- match.ppdb (substances=substances_basic, products=products_basic, 
                            folder=folder, healthrisk_off=TRUE)
                            
products_complete&lt;- matched_data[[1]]
substances_complete&lt;- matched_data[[2]]

# Step7(optional): change reference values in the substances_complete data_frame if required.

# Step8: Supply the sum of risk scores based on the product label to compute the Human Health Load.
# Add the reference value for the Human Health Load 
products_complete$sum.risk.score &lt;- c(150,25,20,130)
products_complete$reference.sum.risk.scores &lt;- 350                                                        

# Step9: Compute the Pesticide Load Indicator and its sub-indicators 
indicators_user &lt;- compute_pesticide_load_indicator(substances = substances_complete,
products= products_complete)
# Note that from version 1.3.1 on, the optional Pesticide Load Index
# is computed by first standardizing the Pesticide Load with the standard dosage. 

## End(Not run)
</code></pre>

<hr>
<h2 id='compute_risk_score'>Calculates the sum of risk scores from a list of H-phrases and expands the table</h2><span id='topic+compute_risk_score'></span>

<h3>Description</h3>

<p>Calculates the sum of risk scores from a list of H-phrases and expands the table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_risk_score(table, var_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compute_risk_score_+3A_table">table</code></td>
<td>
<p>Dataframe with H-phrases on product level.</p>
</td></tr>
<tr><td><code id="compute_risk_score_+3A_var_name">var_name</code></td>
<td>
<p>Name of the variable that contains the information (string) on H-phrases.
For example &quot;H317; H411&quot; or &quot;H410, H411&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Adds a variable indicating the sum of risk scores
needed to compute the Pesticide Load Indicator
Check national pesticide databases for information on product labels of pesticides
(information on H-phrases of each product).
</p>

<hr>
<h2 id='default.load.factors'>Default load factors</h2><span id='topic+default.load.factors'></span>

<h3>Description</h3>

<p>Default load factors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default.load.factors
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 14.
</p>

<hr>
<h2 id='match.ppdb'>Expend tables with information on ecotoxicity, fate (and human health) properties from PPDB</h2><span id='topic+match.ppdb'></span>

<h3>Description</h3>

<p>Expend tables with information on ecotoxicity, fate (and human health) properties from PPDB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>match.ppdb(substances, products, folder, healthrisk_off = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="match.ppdb_+3A_substances">substances</code></td>
<td>
<p>Dataframe describing active ingredients of the applied pesticide products and their CAS number.</p>
</td></tr>
<tr><td><code id="match.ppdb_+3A_products">products</code></td>
<td>
<p>Dataframe with raw pesticide application data.</p>
</td></tr>
<tr><td><code id="match.ppdb_+3A_folder">folder</code></td>
<td>
<p>Folder with exported xlsx files from PPDB containing information on active ingredient properties.</p>
</td></tr>
<tr><td><code id="match.ppdb_+3A_healthrisk_off">healthrisk_off</code></td>
<td>
<p>Compute the Human Health risk sum score from the PPDb (default off).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Adds Ecotoxicity and Fate properties of active substances
needed to compute the Pesticide Load Indicator
to user-provided substance and product data frames.
Properties are based on information from the Pesticide Properties Database (PPDB),
which has to be provided by the user in Excel format (license required).
Note that the function can optionally also retrieve the
sum of risk scores for Human Health from the PPDB, based on
active ingredient-level risk phrases in the PPDB.
This is not recommended.
Best practice is to compute the sum of risk scores
based on risk phrases of the respective pesticide product
(see Kudsk et al., 2018 for weighing of respective risk phrases).
Product label information cannot be retrieved from the PPDB as labels
might be country-specific. Check national pesticide databases for
this information.
Note that you have to add teh reference value for sum.risk.scores, as follows,
if you select healthrisk_off=TRUE:
products$reference.sum.risk.scores &lt;- 300
</p>

<hr>
<h2 id='products.load'>load included products.xlsx file</h2><span id='topic+products.load'></span>

<h3>Description</h3>

<p>load included products.xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>products.load()
</code></pre>


<h3>Value</h3>

<p>products.xlsx file as data.frame
</p>

<hr>
<h2 id='products.path'>path to  includedexamples products.xlsx file</h2><span id='topic+products.path'></span>

<h3>Description</h3>

<p>path to  includedexamples products.xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>products.path()
</code></pre>


<h3>Value</h3>

<p>path to products.xlsx file
</p>

<hr>
<h2 id='required_columns_products'>Computing the Pesticide Load Indicator for pesticide application data
The provided functions will compute the Pesticide Load Indicator (PLI) as described in Kudsk et al. (2018) for pesticide application data provided by the user.
Computing the PLI requires information on applied pesticides in a table format, as well as information on fate, ecotoxicity and human health properties of applied pesticide products, as provided in the Pesticide Properties Database (PPDB) of the University of Hertfordshire. See below for a detailed description.
The PLI can either be computed using user supplied information on pesticide properties or by automatically including the information based on the PPDB. Access to the PPDb requires a license - see http://sitem.herts.ac.uk/aeru/ppdb/.</h2><span id='topic+required_columns_products'></span>

<h3>Description</h3>

<p>Computing the Pesticide Load Indicator for pesticide application data
The provided functions will compute the Pesticide Load Indicator (PLI) as described in Kudsk et al. (2018) for pesticide application data provided by the user.
Computing the PLI requires information on applied pesticides in a table format, as well as information on fate, ecotoxicity and human health properties of applied pesticide products, as provided in the Pesticide Properties Database (PPDB) of the University of Hertfordshire. See below for a detailed description.
The PLI can either be computed using user supplied information on pesticide properties or by automatically including the information based on the PPDB. Access to the PPDb requires a license - see http://sitem.herts.ac.uk/aeru/ppdb/.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>required_columns_products
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 5.
</p>

<hr>
<h2 id='substances.load'>load included substances.xlsx file</h2><span id='topic+substances.load'></span>

<h3>Description</h3>

<p>load included substances.xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>substances.load()
</code></pre>


<h3>Value</h3>

<p>substances.xlsx file as data.frame
</p>

<hr>
<h2 id='substances.path'>path to included examples substances.xlsx file</h2><span id='topic+substances.path'></span>

<h3>Description</h3>

<p>path to included examples substances.xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>substances.path()
</code></pre>


<h3>Value</h3>

<p>path to substances.xlsx file
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
