<!DOCTYPE html><html><head><title>Help for package RBPcurve</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RBPcurve}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addGoodCalib'><p>Visualizes a measure for good calibration on the RBP curve.</p></a></li>
<li><a href='#addPEV'><p>Visualize the PEV on the RBP curve.</p></a></li>
<li><a href='#addPrevalence'><p>Visualizes the prevalence on the RBP curve.</p></a></li>
<li><a href='#addRates'><p>Visualizes the TPR and FPR on the RBP curve.</p></a></li>
<li><a href='#addWellCalib'><p>Visualizes a measure for well calibration on the RBP curve.</p></a></li>
<li><a href='#makeRBPObj'><p>Create data container for RBP curve.</p></a></li>
<li><a href='#plotRBPCurve'><p>Plot residual-based predictiveness (RBP) curve.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>The Residual-Based Predictiveness Curve</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-05-15</td>
</tr>
<tr>
<td>Author:</td>
<td>Giuseppe Casalicchio, Bernd Bischl</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/giuseppec/RBPcurve">https://github.com/giuseppec/RBPcurve</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/giuseppec/RBPcurve/issues">https://github.com/giuseppec/RBPcurve/issues</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Giuseppe Casalicchio &lt;giuseppe.casalicchio@stat.uni-muenchen.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The RBP curve is a visual tool to assess the
    performance of prediction models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2), mlr (&ge; 2.11)</td>
</tr>
<tr>
<td>Imports:</td>
<td>BBmisc (&ge; 1.11), checkmate (&ge; 1.8.2), shape, TeachingDemos</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, mlbench</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-05-15 19:49:14 UTC; Giuseppe</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-05-15 20:11:16 UTC</td>
</tr>
</table>
<hr>
<h2 id='addGoodCalib'>Visualizes a measure for good calibration on the RBP curve.</h2><span id='topic+addGoodCalib'></span>

<h3>Description</h3>

<p>The integral of the RBP curve is a measure for good calibration.
If the sum of the two integrals (below and above the RBP curve) is close to 0,
good calibration is satisfied and the prevalence is close to the average predicted probabilities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addGoodCalib(obj, plot.values = TRUE, show.info = TRUE,
  col = grDevices::rgb(0, 0, 0, 0.25), border = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addGoodCalib_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="addGoodCalib_+3A_plot.values">plot.values</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Whether the values of the corresponding measure should be added to the plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="addGoodCalib_+3A_show.info">show.info</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Print more information for the respective measure on console?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="addGoodCalib_+3A_col">col</code></td>
<td>
<p>[<code>vector(1)</code>]<br />
Color for filling the polygon, as in <code><a href="graphics.html#topic+polygon">polygon</a></code>.
Default is &ldquo;grey&rdquo;.</p>
</td></tr>
<tr><td><code id="addGoodCalib_+3A_border">border</code></td>
<td>
<p>[<code>vector(1)</code>]<br />
Color to draw the borders, as in <code><a href="graphics.html#topic+polygon">polygon</a></code>.
Default is <code>NA</code> to omit borders.</p>
</td></tr>
<tr><td><code id="addGoodCalib_+3A_...">...</code></td>
<td>
<p>[any]<br />
Passed to <code><a href="graphics.html#topic+polygon">polygon</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>invisible(NULL)</code>].
</p>

<hr>
<h2 id='addPEV'>Visualize the PEV on the RBP curve.</h2><span id='topic+addPEV'></span>

<h3>Description</h3>

<p>The PEV measure is the difference between the conditional expectation of the predicted
probabilities (conditional on the two groups that are determined by the target variable).
The PEV measure can be visually obtained by the RBP curve, namely by the difference of the
two areas that are Highlighted with <code>addPEV</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addPEV(obj, plot.values = TRUE, show.info = TRUE, text.col = "black",
  col = rgb(0, 0, 0, 0.25))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addPEV_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="addPEV_+3A_plot.values">plot.values</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Whether the values of the corresponding measure should be added to the plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="addPEV_+3A_show.info">show.info</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Print more information for the respective measure on console?
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="addPEV_+3A_text.col">text.col</code></td>
<td>
<p>[<code>character(1)</code> | <code>numeric(1)</code>]<br />
Text color, used when <code>plot.values = TRUE</code>, otherwise ignored.
Default is &ldquo;black&rdquo;.</p>
</td></tr>
<tr><td><code id="addPEV_+3A_col">col</code></td>
<td>
<p>[<code>character(1)</code> | <code>numeric(1)</code>]<br />
A specification for the plotting color.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>invisible(NULL)</code>].
</p>

<hr>
<h2 id='addPrevalence'>Visualizes the prevalence on the RBP curve.</h2><span id='topic+addPrevalence'></span>

<h3>Description</h3>

<p>The prevalence is the proportion of a population having a specific condition.
In binary classification, the condition refers to whether the target variable has the value
<code>1</code>, that is, whether the target variable corresponds to the positive class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addPrevalence(obj, plot.values = TRUE, digits = 3L, col = "grey")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addPrevalence_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="addPrevalence_+3A_plot.values">plot.values</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Whether the values of the corresponding measure should be added to the plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="addPrevalence_+3A_digits">digits</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Indicates the number of decimal places for the values that are plotted when 
<code>plot.values = TRUE</code>.
Default is <code>3L</code>.</p>
</td></tr>
<tr><td><code id="addPrevalence_+3A_col">col</code></td>
<td>
<p>[<code>character(1)</code> | <code>numeric(1)</code>]<br />
A specification for the plotting color.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>invisible(NULL)</code>].
</p>

<hr>
<h2 id='addRates'>Visualizes the TPR and FPR on the RBP curve.</h2><span id='topic+addRates'></span>

<h3>Description</h3>

<p>For a given threshold <code>tresh</code>, the true positive rate (TPR) 
and the false positive rate (FPR) can be visually assessed by the RBP curve 
by the intersection of the RBP curve with the horizontal lines at 
<code>-thresh</code> and <code>1 - thresh</code>, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRates(obj, plot.values = TRUE, digits = 3L, col = "black",
  thresh = obj$prev, thresh.label = "thresh")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRates_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="addRates_+3A_plot.values">plot.values</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Whether the values of the corresponding measure should be added to the plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="addRates_+3A_digits">digits</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Indicates the number of decimal places for the values that are plotted when 
<code>plot.values = TRUE</code>.
Default is <code>3L</code>.</p>
</td></tr>
<tr><td><code id="addRates_+3A_col">col</code></td>
<td>
<p>[<code>character(1)</code> | <code>numeric(1)</code>]<br />
A specification for the plotting color.</p>
</td></tr>
<tr><td><code id="addRates_+3A_thresh">thresh</code></td>
<td>
<p>[<code>numeric(1)</code>]<br />
Threshold that is used to compute the true positve and false positive rate.
Default is prevalence.</p>
</td></tr>
<tr><td><code id="addRates_+3A_thresh.label">thresh.label</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The label for the threshold that is plotted when <code>plot.values = TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>[<code>invisible(NULL)</code>].
</p>

<hr>
<h2 id='addWellCalib'>Visualizes a measure for well calibration on the RBP curve.</h2><span id='topic+addWellCalib'></span>

<h3>Description</h3>

<p>A measure for a well calibrated model can be obtained by
grouping the predicted probabilities via deciles yielding 10 groups.
The equally collored areas belong to a specific group. When each of the two  
equally collored areas are similar, the model is well calibrated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addWellCalib(obj, plot.values = TRUE, subplot.control = list(diff = TRUE),
  col = shape::greycol(10L, interval = c(0.3, 1)), pos = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addWellCalib_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="addWellCalib_+3A_plot.values">plot.values</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Whether the values of the corresponding measure should be added to the plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="addWellCalib_+3A_subplot.control">subplot.control</code></td>
<td>
<p>[<code>list</code>]
A named list of arguments that will be passed to <code><a href="graphics.html#topic+barplot">barplot</a></code>.
Additionally, you can set <code>diff = TRUE</code> to plot differences of the 
equally collored areas or <code>diff = FALSE</code> to directly plot the areas 
of the equally collored areas in juxtaposed bars.</p>
</td></tr>
<tr><td><code id="addWellCalib_+3A_col">col</code></td>
<td>
<p>[<code>character</code> | <code>numeric</code>]<br />
A specification for the the plotting color for the areas.</p>
</td></tr>
<tr><td><code id="addWellCalib_+3A_pos">pos</code></td>
<td>
<p>[<code>list</code>] 
A named List that determines the <code>x</code> and <code>y</code> positioning of a subplot that
compares the areas in additional barplots (see <code><a href="Hmisc.html#topic+subplot">subplot</a></code>).
Can be <code>NA</code> for no additional subplot.
Default is <code>pos = NULL</code> for an auto positioning in the topleft quadrant.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix that contains the average of the &ldquo;probabilities within deciles&rdquo;
conditional on Y.
</p>

<hr>
<h2 id='makeRBPObj'>Create data container for RBP curve.</h2><span id='topic+makeRBPObj'></span><span id='topic+RBPObj'></span>

<h3>Description</h3>

<p>Must be created for all subsequent plot function calls.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeRBPObj(pred, y, positive = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeRBPObj_+3A_pred">pred</code></td>
<td>
<p>[<code>numeric</code>]<br />
Predicted probabilities for each observation.</p>
</td></tr>
<tr><td><code id="makeRBPObj_+3A_y">y</code></td>
<td>
<p>[<code>numeric</code> | <code>factor</code>]<br />
Class labels of the target variable.
Either a numeric vector with values <code>0</code> or <code>1</code>, or a factor with two levels.</p>
</td></tr>
<tr><td><code id="makeRBPObj_+3A_positive">positive</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Set positive class label for target variable which is transformed as <code>1</code> to compute.
Only needed when <code>y</code> is a &quot;factor&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object members:
</p>

<dl>
<dt><code>n</code> [<code>numeric(1)</code>]</dt><dd><p>Number of observations.</p>
</dd>
<dt><code>pred</code> [<code>numeric(n)</code>]</dt><dd><p>Predicted probabilities.</p>
</dd>
<dt><code>y</code> [<code>numeric(n)</code>]</dt><dd><p>Target variable having the values 0 and 1.</p>
</dd>
<dt><code>positive</code> [<code>character(1)</code>]</dt><dd><p>Positive class label of traget variable. Only present when <code>y</code> is a factor.</p>
</dd>
<dt><code>e0</code> [<code>numeric(1)</code>]</dt><dd><p>Average of the predicted probabilities conditional on <code>y=0</code>.</p>
</dd>
<dt><code>e1</code> [<code>numeric(1)</code>]</dt><dd><p>Average of the predicted probabilities conditional on <code>y=1</code>.</p>
</dd>
<dt><code>pev</code> [<code>numeric(1)</code>]</dt><dd><p>Proportion of explained variation measure. Computed as <code>e1-e0</code>.</p>
</dd>
<dt><code>tpr</code> [<code>numeric(1)</code>]</dt><dd><p>True positive rate.</p>
</dd>
<dt><code>fpr</code> [<code>numeric(1)</code>]</dt><dd><p>False positive rate.</p>
</dd>
<dt><code>prev</code> [<code>numeric(1)</code>]</dt><dd><p>Prevalence.</p>
</dd>
<dt><code>one.min.prev</code> [<code>numeric(1)</code>]</dt><dd><p>One minus the value of the prevalence.</p>
</dd>
<dt><code>axis.x</code> [<code>numeric(n)</code>]</dt><dd><p>Values for the X-Axis of the RBP curve.</p>
</dd>
<dt><code>axis.y</code> [<code>numeric(n)</code>]</dt><dd><p>Values for the Y-Axis of the RBP curve.</p>
</dd>
</dl>


<hr>
<h2 id='plotRBPCurve'>Plot residual-based predictiveness (RBP) curve.</h2><span id='topic+plotRBPCurve'></span>

<h3>Description</h3>

<p>plots the RBP curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRBPCurve(obj, main = "RBP Curve", xlab = "Cumulative Percentage",
  ylab = "Estimated Residuals", type = "l", ylim = c(-1, 1.2),
  x.adj = c(NA, -0.5), y.adj = c(NA, NA), cond.axis = FALSE,
  title.line = ifelse(cond.axis, 3, 2), add = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotRBPCurve_+3A_obj">obj</code></td>
<td>
<p>[<code><a href="#topic+RBPObj">RBPObj</a></code>]<br />
Data container for RBP curve.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_main">main</code></td>
<td>
<p>[<code>character(1)</code>]<br />
An overall title for the plot.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_xlab">xlab</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Label for X-axis.
Default is &ldquo;Cumulative Percentage&rdquo;.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_ylab">ylab</code></td>
<td>
<p>[<code>character(1)</code>]<br />
Label for Y-axis.
Default is &ldquo;Estimated Residuals&rdquo;.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_type">type</code></td>
<td>
<p>[<code>character(1)</code>]<br />
The plot type that should be drawn, see <code><a href="graphics.html#topic+plot">plot</a></code> for all possible types.
Default is <code>type = "l"</code> for <b>l</b>ines.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_ylim">ylim</code></td>
<td>
<p>[<code>numeric(2)</code>]<br />
Limits for Y-axis.
Default is <code>c(-1, 1.1)</code>.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_x.adj">x.adj</code></td>
<td>
<p>[<code>numeric(2)</code>]<br />
Adjustment for the X-axis.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_y.adj">y.adj</code></td>
<td>
<p>[<code>numeric(2)</code>]<br />
Adjustment for the Y-axis.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_cond.axis">cond.axis</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should an additional axis be plotted reflecting residuals conditional on y?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_title.line">title.line</code></td>
<td>
<p>[<code>integer(1)</code>]<br />
Where to plot the title, see <code><a href="graphics.html#topic+title">title</a></code>.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_add">add</code></td>
<td>
<p>[<code>logical(1)</code>]<br />
Should RBP plot be added to current plot?
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plotRBPCurve_+3A_...">...</code></td>
<td>
<p>[any]<br />
Passed to <code><a href="graphics.html#topic+plot">plot</a></code> or <code><a href="graphics.html#topic+lines">lines</a></code>, depending on <code>add</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download data
mydata = getTaskData(pid.task)
head(mydata)

# Build logit model and plot RBP curve
mylogit &lt;- glm(diabetes ~ ., data = mydata, family = "binomial")
y = mydata$diabetes
pred1 = predict(mylogit, type="response")
obj1 = makeRBPObj(pred1, y)
plotRBPCurve(obj1, cond.axis = TRUE, type = "b")

## Not run: 
# Build logit model using mlr and plot RBP curve
task = pid.task
lrn = makeLearner("classif.logreg", predict.type = "prob")
tr = train(lrn, task)
pred2 = getPredictionProbabilities(predict(tr, task))
obj2 = makeRBPObj(pred2, y)
plotRBPCurve(obj2, cond.axis = TRUE, type = "b", col = 2)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
