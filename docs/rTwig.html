<!DOCTYPE html><html><head><title>Help for package rTwig</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rTwig}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#box_dimension'><p>Box Dimension</p></a></li>
<li><a href='#correct_radii'><p>Correct Radii</p></a></li>
<li><a href='#export_mat'><p>Export MAT</p></a></li>
<li><a href='#export_mesh'><p>Export Mesh</p></a></li>
<li><a href='#import_qsm'><p>Import QSM</p></a></li>
<li><a href='#plot_qsm'><p>Plot QSM</p></a></li>
<li><a href='#plot_stand'><p>Plot Stand</p></a></li>
<li><a href='#qsm_summary'><p>QSM Summary</p></a></li>
<li><a href='#smooth_qsm'><p>Smooth QSM</p></a></li>
<li><a href='#twigs'><p>Twig Database</p></a></li>
<li><a href='#update_cylinders'><p>Update Cylinders</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Realistic Quantitative Structure Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Real Twig is a method to correct branch overestimation in quantitative structure models. Overestimated cylinders are correctly tapered using measured twig diameters of corresponding tree species. Supported quantitative structure modeling software includes 'TreeQSM' and 'SimpleForest'. Also included is a novel database of twig diameters and tools for fractal analysis of point clouds.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>Imports:</td>
<td>igraph, R.matlab, tidytable, data.table, cobs, purrr, foreach,
future, doFuture, progressr, rgl, colourvalues, Morpho, Rdpack,
DescTools, kit, rmatio, Matrix (&ge; 1.6-3), randomcoloR</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, ggplot2, ggpmisc, ggpubr, gt, yardstick,
dplyr, tidyr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-05 22:33:15 UTC; moral169</td>
</tr>
<tr>
<td>Author:</td>
<td>Aidan Morales [aut, cre, cph],
  David W. MacFarlane [aut, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aidan Morales &lt;moral169@msu.edu&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://aidanmorales.github.io/rTwig/">https://aidanmorales.github.io/rTwig/</a>,
<a href="https://github.com/aidanmorales/rTwig">https://github.com/aidanmorales/rTwig</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/aidanmorales/rTwig/issues">https://github.com/aidanmorales/rTwig/issues</a></td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-08 15:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='box_dimension'>Box Dimension</h2><span id='topic+box_dimension'></span>

<h3>Description</h3>

<p>R port of Dominik Seidel's fractal analysis &quot;box-dimension&quot; metric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>box_dimension(
  cloud,
  x = 1,
  y = 2,
  z = 3,
  lowercutoff = 0.01,
  rm_int_box = FALSE,
  plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="box_dimension_+3A_cloud">cloud</code></td>
<td>
<p>A point cloud object</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_x">x</code></td>
<td>
<p>The column name or position of the x coordinates. Defaults to the first column.</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_y">y</code></td>
<td>
<p>The column name or position of the y coordinates. Defaults to the second column.</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_z">z</code></td>
<td>
<p>The column name or position of the x coordinates. Defaults to the third column.</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_lowercutoff">lowercutoff</code></td>
<td>
<p>The smallest box size determined by the point spacing of the cloud in meters. Defaults to 1 cm.</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_rm_int_box">rm_int_box</code></td>
<td>
<p>Remove the initial box as TRUE or FALSE. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="box_dimension_+3A_plot">plot</code></td>
<td>
<p>Plot the results. The user can specify &quot;2D&quot;, &quot;3D&quot;, or &quot;ALL&quot; plots. FALSE disables plotting. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list
</p>


<h3>References</h3>

<p>Arseniou G, MacFarlane DW, Seidel D (2021).
&ldquo;Measuring the Contribution of Leaves to the Structural Complexity of Urban Tree Crowns with Terrestrial Laser Scanning.&rdquo;
<em>Remote Sensing</em>, <b>13</b>(14).
<a href="https://doi.org/10.3390/rs13142773">doi:10.3390/rs13142773</a>.
</p>
<p>Mandelbrot BB (1983).
<em>The fractal geometry of nature</em>.
Freeman.
</p>
<p>Saarinen N, Calders K, Kankare V, Yrttimaa T, Junttila S, Luoma V, Huuskonen S, Hynynen J, Verbeeck H (2021).
&ldquo;Understanding 3D structural complexity of individual Scots pine trees with different management history.&rdquo;
<em>Ecology and Evolution</em>, <b>11</b>(6), 2561-2572.
<a href="https://doi.org/10.1002/ece3.7216">doi:10.1002/ece3.7216</a>.
</p>
<p>Seidel D (2018).
&ldquo;A holistic approach to determine tree structural complexity based on laser scanning data and fractal analysis.&rdquo;
<em>Ecology and Evolution</em>, <b>8</b>(1), 128-134.
<a href="https://doi.org/10.1002/ece3.3661">doi:10.1002/ece3.3661</a>.
</p>
<p>Seidel D, Annighöfer P, Stiers M, Zemp CD, Burkardt K, Ehbrecht M, Willim K, Kreft H, Hölscher D, Ammer C (2019).
&ldquo;How a measure of tree structural complexity relates to architectural benefit-to-cost ratio, light availability, and growth of trees.&rdquo;
<em>Ecology and Evolution</em>, <b>9</b>(12), 7134-7142.
<a href="https://doi.org/10.1002/ece3.5281">doi:10.1002/ece3.5281</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Calculate Box Dimension
file &lt;- system.file("extdata/cloud.txt", package = "rTwig")
cloud &lt;- read.table(file, header = FALSE)
output &lt;- box_dimension(cloud, plot = "ALL")
output

</code></pre>

<hr>
<h2 id='correct_radii'>Correct Radii</h2><span id='topic+correct_radii'></span>

<h3>Description</h3>

<p>Corrects cylinder radii
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correct_radii(cylinder, twigRad, backend = "multisession")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correct_radii_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
<tr><td><code id="correct_radii_+3A_twigrad">twigRad</code></td>
<td>
<p>Twig radius in millimeters</p>
</td></tr>
<tr><td><code id="correct_radii_+3A_backend">backend</code></td>
<td>
<p>Parallel backend for multi-core processing. Defaults to &quot;multisession&quot; (all platforms), but can be set to &quot;multicore&quot; (MacOS &amp; Linux), &quot;cluster&quot; (all platforms), or a &quot;package::backend&quot; string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)
cylinder &lt;- correct_radii(cylinder, twigRad = 4.23)
str(cylinder)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder &lt;- read.csv(file)
cylinder &lt;- update_cylinders(cylinder)
cylinder &lt;- correct_radii(cylinder, twigRad = 4.23)
str(cylinder)



</code></pre>

<hr>
<h2 id='export_mat'>Export MAT</h2><span id='topic+export_mat'></span>

<h3>Description</h3>

<p>Exports the cylinder data to be visualized with TreeQSM's plot_cylinder_model() function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_mat(cylinder, filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_mat_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
<tr><td><code id="export_mat_+3A_filename">filename</code></td>
<td>
<p>Desired name of file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a .mat file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)

filename &lt;- tempfile(pattern = "TreeQSM_QSM.mat")
export_mat(cylinder, filename)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder &lt;- read.csv(file)
cylinder &lt;- update_cylinders(cylinder)

filename &lt;- tempfile(pattern = "SimpleForest_QSM.mat")
export_mat(cylinder, filename)



</code></pre>

<hr>
<h2 id='export_mesh'>Export Mesh</h2><span id='topic+export_mesh'></span>

<h3>Description</h3>

<p>Exports QSM cylinder mesh using the rgl library
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_mesh(
  cylinder,
  filename,
  radius = NULL,
  cyl_color = NULL,
  cyl_palette = NULL,
  cyl_sides = 8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_mesh_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
<tr><td><code id="export_mesh_+3A_filename">filename</code></td>
<td>
<p>Desired name of file. The .ply extension is automatically added.</p>
</td></tr>
<tr><td><code id="export_mesh_+3A_radius">radius</code></td>
<td>
<p>Vector of cylinder radii. Defaults to modified cylinders from the cylinder data frame.</p>
</td></tr>
<tr><td><code id="export_mesh_+3A_cyl_color">cyl_color</code></td>
<td>
<p>Optional cylinder color parameter. Colors must be a single hex color, or a vector or column of hex colors with the same length as the cylinder data frame.</p>
</td></tr>
<tr><td><code id="export_mesh_+3A_cyl_palette">cyl_palette</code></td>
<td>
<p>Optional color palette for numerical data. Palettes include: viridis, inferno, plasma, magma, cividis, and rainbow.</p>
</td></tr>
<tr><td><code id="export_mesh_+3A_cyl_sides">cyl_sides</code></td>
<td>
<p>The number of sides in the polygon cross section. Defaults to 8, but can be increased to improve visual smoothness.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A mesh .ply file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)

filename &lt;- tempfile(pattern = "QSM_mesh")
export_mesh(cylinder, filename)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder2 &lt;- read.csv(file)
cylinder2 &lt;- update_cylinders(cylinder2)

filename2 &lt;- tempfile(pattern = "QSM_mesh2")
export_mesh(cylinder2, filename2)

## All Parameters

filename3 &lt;- tempfile(pattern = "QSM_mesh3")
export_mesh(
  cylinder = cylinder,
  filename = filename3,
  radius = cylinder$UnmodRadius,
  cyl_color = cylinder$GrowthLength,
  cyl_palette = "viridis"
)



</code></pre>

<hr>
<h2 id='import_qsm'>Import QSM</h2><span id='topic+import_qsm'></span>

<h3>Description</h3>

<p>Imports a QSM created by TreeQSM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>import_qsm(file, version = "2.x.x")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="import_qsm_+3A_file">file</code></td>
<td>
<p>a .mat MATLAB file</p>
</td></tr>
<tr><td><code id="import_qsm_+3A_version">version</code></td>
<td>
<p>TreeQSM version. Defaults to 2.x.x. The user can also specify the 2.0 format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list
</p>


<h3>References</h3>

<p>Raumonen P, Kaasalainen M, Åkerblom M, Kaasalainen S, Kaartinen H, Vastaranta M, Holopainen M, Disney M, Lewis P (2013).
&ldquo;Fast Automatic Precision Tree Models from Terrestrial Laser Scanner Data.&rdquo;
<em>Remote Sensing</em>, <b>5</b>(2), 491&ndash;520.
<a href="https://doi.org/10.3390/rs5020491">doi:10.3390/rs5020491</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Read a TreeQSM MATLAB file in the 2.3.x - 2.4.x format
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file, version = "2.x.x")
summary(qsm)

## Read a TreeQSM MATLAB file in the 2.0 format
file &lt;- system.file("extdata/QSM_2.mat", package = "rTwig")
qsm &lt;- import_qsm(file, version = "2.0")
names(qsm)

</code></pre>

<hr>
<h2 id='plot_qsm'>Plot QSM</h2><span id='topic+plot_qsm'></span>

<h3>Description</h3>

<p>Plots QSM cylinders using the rgl library
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_qsm(
  cylinder,
  radius = NULL,
  cyl_color = NULL,
  cyl_palette = NULL,
  cyl_sides = 8,
  cloud = NULL,
  pt_color = NULL,
  pt_size = NULL,
  axes = TRUE,
  hover = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_qsm_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_radius">radius</code></td>
<td>
<p>Vector of cylinder radii. Defaults to modified cylinders from the cylinder data frame.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_cyl_color">cyl_color</code></td>
<td>
<p>Optional cylinder color parameter. Colors must be a single hex color, or a vector or column of hex colors with the same length as the cylinder data frame.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_cyl_palette">cyl_palette</code></td>
<td>
<p>Optional color palette for numerical data. Palettes include: viridis, inferno, plasma, magma, cividis, and rainbow.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_cyl_sides">cyl_sides</code></td>
<td>
<p>The number of sides in the polygon cross section. Defaults to 8, but can be increased to improve visual smoothness.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_cloud">cloud</code></td>
<td>
<p>Point cloud data frame where the first three columns are the x, y, and z coordinates in the same coordinate system as the QSM.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_pt_color">pt_color</code></td>
<td>
<p>Color of the point cloud. Defaults to black.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_pt_size">pt_size</code></td>
<td>
<p>Size of the points as a number. Defaults to 0.1.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_axes">axes</code></td>
<td>
<p>Show plot axes. Defaults to TRUE.</p>
</td></tr>
<tr><td><code id="plot_qsm_+3A_hover">hover</code></td>
<td>
<p>Show cylinder ID and branch on mouse hover. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rgl QSM plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)
cylinder &lt;- correct_radii(cylinder, twigRad = 4.23)
plot_qsm(cylinder)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder2 &lt;- read.csv(file)
cylinder2 &lt;- update_cylinders(cylinder2)
cylinder2 &lt;- correct_radii(cylinder2, twigRad = 4.23)
plot_qsm(cylinder2)

## All Parameters
file2 &lt;- system.file("extdata/cloud.txt", package = "rTwig")
cloud &lt;- read.table(file2, header = FALSE)

plot_qsm(
  cylinder,
  radius = cylinder$UnmodRadius,
  cyl_color = cylinder$GrowthLength,
  cyl_palette = "viridis",
  cyl_sides = 100,
  cloud = cloud,
  pt_color = "white",
  pt_size = 1,
  axes = FALSE,
  hover = TRUE
)



</code></pre>

<hr>
<h2 id='plot_stand'>Plot Stand</h2><span id='topic+plot_stand'></span>

<h3>Description</h3>

<p>Plots multiple QSMs in a forest stand using the rgl library
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_stand(
  qsms,
  radius_type = "modified",
  qsm_colors = NULL,
  cyl_sides = 8,
  clouds = NULL,
  pt_colors = NULL,
  pt_sizes = NULL,
  axes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_stand_+3A_qsms">qsms</code></td>
<td>
<p>A list of QSM cylinder data frames.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_radius_type">radius_type</code></td>
<td>
<p>Radius type as either &quot;modified&quot;, &quot;unmodified&quot;, or &quot;old&quot;. Defaults to &quot;modified&quot;.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_qsm_colors">qsm_colors</code></td>
<td>
<p>Optional qsm color parameters. Colors vector of hex colors with the same length as the qsms list. Defaults to distinct random colors.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_cyl_sides">cyl_sides</code></td>
<td>
<p>The number of sides in the polygon cross section. Defaults to 8, but can be increased to improve visual smoothness.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_clouds">clouds</code></td>
<td>
<p>A list of point cloud data frames where the first three columns are the x, y, and z coordinates in the same coordinate system as the QSMs.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_pt_colors">pt_colors</code></td>
<td>
<p>A vector of hex colors. Defaults to the same random color as the QSM.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_pt_sizes">pt_sizes</code></td>
<td>
<p>Size of the points as a number. Defaults to 0.1.</p>
</td></tr>
<tr><td><code id="plot_stand_+3A_axes">axes</code></td>
<td>
<p>Show plot axes. Defaults to TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A rgl QSM plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Import QSMs
file1 &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file1)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)

# Create a list of QSM cylinder data frames
qsms &lt;- list(cylinder)

# Optionally import and create a list of point clouds
file2 &lt;- system.file("extdata/cloud.txt", package = "rTwig")
cloud &lt;- read.table(file2, header = FALSE)
clouds &lt;- list(cloud)

# Plot QSMs and clouds
plot_stand(qsms = qsms, clouds = clouds)



</code></pre>

<hr>
<h2 id='qsm_summary'>QSM Summary</h2><span id='topic+qsm_summary'></span>

<h3>Description</h3>

<p>Generates summaries of QSM features (e.g. volume, surface area, dbh, etc.) by totals and branch order
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qsm_summary(cylinder, radius = "modified", triangulation = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qsm_summary_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
<tr><td><code id="qsm_summary_+3A_radius">radius</code></td>
<td>
<p>Radius type as either &quot;modified&quot;, &quot;unmodified&quot;, or &quot;old&quot;. Defaults to &quot;modified&quot;.</p>
</td></tr>
<tr><td><code id="qsm_summary_+3A_triangulation">triangulation</code></td>
<td>
<p>QSM triangulation list. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)
qsm_summary(cylinder)

# TreeQSM Triangulation
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)
triangulation &lt;- qsm$triangulation
qsm_summary(cylinder = cylinder, triangulation = triangulation)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder &lt;- read.csv(file)
cylinder &lt;- update_cylinders(cylinder)
qsm_summary(cylinder)

</code></pre>

<hr>
<h2 id='smooth_qsm'>Smooth QSM</h2><span id='topic+smooth_qsm'></span>

<h3>Description</h3>

<p>Visual smoothing of a QSM by ensuring the midpoints of all cylinders are connected
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smooth_qsm(cylinder)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smooth_qsm_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)

## Before Smoothing
plot_qsm(cylinder)

## After Smoothing
cylinder &lt;- smooth_qsm(cylinder)
plot_qsm(cylinder)



</code></pre>

<hr>
<h2 id='twigs'>Twig Database</h2><span id='topic+twigs'></span>

<h3>Description</h3>

<p>Database of twig radii for common North American tree species
</p>


<h3>Usage</h3>

<pre><code class='language-R'>twigs
</code></pre>


<h3>Format</h3>



<h4><code>twigs</code></h4>

<p>A data frame containing twig radii measurements
</p>

<dl>
<dt>scientific.name</dt><dd><p>The tree's genus and species</p>
</dd>
<dt>radius.mm</dt><dd><p>The average twig radius in millimeters</p>
</dd>
<dt>n</dt><dd><p>The twig measurement sample size</p>
</dd>
<dt>min</dt><dd><p>The minimum twig radii from the samples</p>
</dd>
<dt>max</dt><dd><p>The maximum twig radii from the samples</p>
</dd>
<dt>std</dt><dd><p>The standard deviation of twig radii</p>
</dd>
<dt>cv</dt><dd><p>The coefficient of variation of twig radii</p>
</dd>
</dl>



<hr>
<h2 id='update_cylinders'>Update Cylinders</h2><span id='topic+update_cylinders'></span>

<h3>Description</h3>

<p>Updates the QSM cylinder data in preparation for radii correction
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_cylinders(cylinder)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_cylinders_+3A_cylinder">cylinder</code></td>
<td>
<p>QSM cylinder data frame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Updates parent-child branch and cylinder relationships to fill in any gaps.
Three additional useful QSM metrics developed by Jan Hackenberg are also calculated.
Growth length is the length of a parent cylinder, plus the lengths of all of
its child cylinders. The segment is a portion of a branch between two branching nodes.
The reverse branch order assigns twigs as order 1 and works backwards at each
branching junction to the base of the stem, which has the largest reverse branch order.
</p>


<h3>Value</h3>

<p>Returns a data frame
</p>


<h3>References</h3>

<p>Hackenberg J, Spiecker H, Calders K, Disney M, Raumonen P (2015).
&ldquo;SimpleTree —An Efficient Open Source Tool to Build Tree Models from TLS Clouds.&rdquo;
<em>Forests</em>, <b>6</b>(11), 4245&ndash;4294.
<a href="https://doi.org/10.3390/f6114245">doi:10.3390/f6114245</a>.
</p>
<p>Hackenberg J, Bontemps J (2023).
&ldquo;Improving quantitative structure models with filters based on allometric scaling theory.&rdquo;
<em>Applied Geomatics</em>, <b>15</b>.
<a href="https://doi.org/10.1007/s12518-023-00537-4">doi:10.1007/s12518-023-00537-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## TreeQSM Processing Chain
file &lt;- system.file("extdata/QSM.mat", package = "rTwig")
qsm &lt;- import_qsm(file)
cylinder &lt;- qsm$cylinder
cylinder &lt;- update_cylinders(cylinder)
str(cylinder)

## SimpleForest Processing Chain
file &lt;- system.file("extdata/QSM.csv", package = "rTwig")
cylinder &lt;- read.csv(file)
cylinder &lt;- update_cylinders(cylinder)
str(cylinder)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
