<!DOCTYPE html><html lang="en"><head><title>Help for package gratis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gratis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gratis-package'><p>gratis: GeneRAting TIme Series with diverse and controllable characteristics</p></a></li>
<li><a href='#app_gratis'><p>Web Application to generate time series with controllable features.</p></a></li>
<li><a href='#arima_model'><p>Specify parameters for an ARIMA model</p></a></li>
<li><a href='#ets_model'><p>Specify parameters for an ETS model</p></a></li>
<li><a href='#generate_msts'><p>Generate multiple seasonal time series from random parameter spaces of the mixture autoregressive (MAR) models.</p></a></li>
<li><a href='#generate_ts'><p>Generate time series from random parameter spaces of the mixture autoregressive (MAR) models.</p></a></li>
<li><a href='#generate_ts_with_target'><p>Generating time series with controllable features.</p></a></li>
<li><a href='#generate.mar'><p>Generate a tsibble of synthetic data from a Mixture Autoregressive model</p></a></li>
<li><a href='#mar_model'><p>Specify parameters for a Mixture Autoregressive model</p></a></li>
<li><a href='#pi_coefficients'><p>Compute pi coefficients of an AR process from SARIMA coefficients.</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#rmixnorm'><p>Generate random variables from a mixture of multivariate normal distributions</p></a></li>
<li><a href='#rmixnorm_ts'><p>Simulate autoregressive random variables from mixture of normal</p></a></li>
<li><a href='#simulate_target'><p>Generating time series with controllable features using MAR models</p></a></li>
<li><a href='#simulate.mar'><p>Generate synthetic data from a Mixture Autoregressive model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Generating Time Series with Diverse and Controllable
Characteristics</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Generates synthetic time series based on various univariate
    time series models including MAR and ARIMA processes. Kang, Y.,
    Hyndman, R.J., Li, F.(2020) &lt;<a href="https://doi.org/10.1002%2Fsam.11461">doi:10.1002/sam.11461</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/ykang/gratis">https://github.com/ykang/gratis</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ykang/gratis/issues/">https://github.com/ykang/gratis/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>doRNG, dplyr, feasts, fGarch, foreach, forecast (&ge; 8.16), GA,
generics, magrittr, methods, mvtnorm, polynom, purrr, shiny,
stats, tibble, tsfeatures, tsibble, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rlang, rmarkdown, shinydashboard</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-08 01:24:01 UTC; fli</td>
</tr>
<tr>
<td>Author:</td>
<td>Yanfei Kang <a href="https://orcid.org/0000-0001-8769-6650"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Feng Li <a href="https://orcid.org/0000-0002-4248-9778"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Rob Hyndman <a href="https://orcid.org/0000-0002-2140-5352"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Mitchell O'Hara-Wild
    <a href="https://orcid.org/0000-0001-6729-7695"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Bocong Zhao <a href="https://orcid.org/0000-0001-8434-9047"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Feng Li &lt;feng.li@cufe.edu.cn&gt;</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-10 17:10:20 UTC</td>
</tr>
</table>
<hr>
<h2 id='gratis-package'>gratis: GeneRAting TIme Series with diverse and controllable characteristics</h2><span id='topic+gratis'></span><span id='topic+gratis-package'></span>

<h3>Description</h3>

<p>The gratis package generates synthetic time series data based on various
univariate time series models including MAR, ARIMA and ETS processes.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Feng Li <a href="mailto:feng.li@cufe.edu.cn">feng.li@cufe.edu.cn</a> (<a href="https://orcid.org/0000-0002-4248-9778">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Yanfei Kang <a href="mailto:yanfeikang@buaa.edu.cn">yanfeikang@buaa.edu.cn</a> (<a href="https://orcid.org/0000-0001-8769-6650">ORCID</a>)
</p>
</li>
<li><p> Rob Hyndman <a href="mailto:rob.hyndman@monash.edu">rob.hyndman@monash.edu</a> (<a href="https://orcid.org/0000-0002-2140-5352">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Mitchell O'Hara-Wild <a href="mailto:mail@mitchelloharawild.com">mail@mitchelloharawild.com</a> (<a href="https://orcid.org/0000-0001-6729-7695">ORCID</a>) [contributor]
</p>
</li>
<li><p> Bocong Zhao <a href="mailto:bocongzhao@163.com">bocongzhao@163.com</a> (<a href="https://orcid.org/0000-0001-8434-9047">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ykang/gratis">https://github.com/ykang/gratis</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ykang/gratis/issues/">https://github.com/ykang/gratis/issues/</a>
</p>
</li></ul>


<hr>
<h2 id='app_gratis'>Web Application to generate time series with controllable features.</h2><span id='topic+app_gratis'></span>

<h3>Description</h3>

<p>Web Application to generate time series with controllable features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>app_gratis()
</code></pre>

<hr>
<h2 id='arima_model'>Specify parameters for an ARIMA model</h2><span id='topic+arima_model'></span>

<h3>Description</h3>

<p>This function allows the parameters of a Gaussian <code class="reqn">ARIMA(p,d,q)(P,D,Q)[m]</code>
process to be specified. The output can be used in <code><a href="forecast.html#topic+simulate.Arima">simulate.Arima</a>()</code>
and <code><a href="#topic+generate.Arima">generate.Arima</a></code>.
If any argument is <code>NULL</code>, the corresponding parameters are randomly selected.
The AR and MA orders p and q are chosen from {0,1,2,3}, the seasonal AR and MA
orders P and Q are from {0,1,2}, while the order of differencing,
d is in {0,1,2}, and the order of seasonal differencing D is in {0,1}, with the
restriction that <code class="reqn">d+D \le 2</code>. If <code>constant</code> is <code>NULL</code>, it is set to
0 if <code class="reqn">d+D = 2</code>, otherwise it is uniformly sampled on (-3,3).
The model orders and the parameters are uniformly sampled. The AR and MA parameters are selected
to give stationary and invertible processes when <code class="reqn">d=D=0</code>. The noise variance sigma
is uniformly sampled on (1,5). The parameterization is as specified in Hyndman &amp; Athanasopoulos (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arima_model(
  frequency = 1,
  p = NULL,
  d = NULL,
  q = NULL,
  P = NULL,
  D = NULL,
  Q = NULL,
  constant = NULL,
  phi = NULL,
  theta = NULL,
  Phi = NULL,
  Theta = NULL,
  sigma = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="arima_model_+3A_frequency">frequency</code></td>
<td>
<p>The length of the seasonal period (e.g., 12 for monthly data).</p>
</td></tr>
<tr><td><code id="arima_model_+3A_p">p</code></td>
<td>
<p>An integer equal to the non-seasonal autoregressive order</p>
</td></tr>
<tr><td><code id="arima_model_+3A_d">d</code></td>
<td>
<p>An integer equal to the non-seasonal order of differencing</p>
</td></tr>
<tr><td><code id="arima_model_+3A_q">q</code></td>
<td>
<p>An integer equal to the non-seasonal moving average order</p>
</td></tr>
<tr><td><code id="arima_model_+3A_p">P</code></td>
<td>
<p>An integer equal to the seasonal autoregressive order</p>
</td></tr>
<tr><td><code id="arima_model_+3A_d">D</code></td>
<td>
<p>An integer equal to the seasonal order of differencing</p>
</td></tr>
<tr><td><code id="arima_model_+3A_q">Q</code></td>
<td>
<p>An integer equal to the seasonal moving average order</p>
</td></tr>
<tr><td><code id="arima_model_+3A_constant">constant</code></td>
<td>
<p>The intercept term</p>
</td></tr>
<tr><td><code id="arima_model_+3A_phi">phi</code></td>
<td>
<p>A numeric p-vector containing the AR parameters.</p>
</td></tr>
<tr><td><code id="arima_model_+3A_theta">theta</code></td>
<td>
<p>A numeric p-vector containing the MA parameters.</p>
</td></tr>
<tr><td><code id="arima_model_+3A_phi">Phi</code></td>
<td>
<p>A numeric p-vector containing the seasonal AR parameters.</p>
</td></tr>
<tr><td><code id="arima_model_+3A_theta">Theta</code></td>
<td>
<p>A numeric p-vector containing the seasonal MA parameters.</p>
</td></tr>
<tr><td><code id="arima_model_+3A_sigma">sigma</code></td>
<td>
<p>The standard deviation of the noise.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An 'Arima' object as described in the <code><a href="stats.html#topic+arima">arima</a></code> function from the stats package.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p><code><a href="forecast.html#topic+simulate.Arima">simulate.Arima</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># An AR(2) model with random parameters
model1 &lt;- arima_model(p = 2, d = 0, q = 0)
# An AR(2) model with specific parameters
model2 &lt;- arima_model(p = 2, d = 0, q = 0, phi = c(1.34, -0.64), sigma = 15)
# Seasonal ARIMA model with randomly selected parameters
model3 &lt;- arima_model(frequency = 4)
# Simulate from each model and plot the results
library(forecast)
simulate(model1, 100) %&gt;% plot()
simulate(model2, 100) %&gt;% plot()
simulate(model3, 100) %&gt;% plot()
</code></pre>

<hr>
<h2 id='ets_model'>Specify parameters for an ETS model</h2><span id='topic+ets_model'></span>

<h3>Description</h3>

<p>This function allows the parameters of a ETS state space model to be specified.
The output can be used in <code><a href="forecast.html#topic+simulate.ets">simulate.ets</a>()</code>
and <code><a href="#topic+generate.ets">generate.ets</a></code>.
If any argument is <code>NULL</code>, the corresponding parameters are randomly selected.
The error component is chosen from {A,M}, the trend component is chosen from
{N,A,Ad}, and the seasonal component is chosen from {N,A,M}. In all cases,
the component is selected uniformly on the options. The parameters are selected
uniformly on the forecastable parameter space. The noise variance sigma
is uniformly sampled on (1,5) for additive errors, and on (0.0001,0.05) for
multiplicative errors. The initial states are chosen uniformly on (-1,1)
in all cases except for multiplicative seasonal states which are uniform on
(0.5, 1.5), and models with multiplicative errors for which the level is uniform
on (2, 10). The parameterization is as specified in Hyndman &amp; Athanasopoulos (2021).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ets_model(
  frequency = 1,
  error = NULL,
  trend = NULL,
  seasonal = NULL,
  alpha = NULL,
  beta = NULL,
  gamma = NULL,
  phi = NULL,
  level = NULL,
  slope = NULL,
  season = NULL,
  damped = NULL,
  sigma = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ets_model_+3A_frequency">frequency</code></td>
<td>
<p>The length of the seasonal period (e.g., 12 for monthly data).</p>
</td></tr>
<tr><td><code id="ets_model_+3A_error">error</code></td>
<td>
<p>A character string specifying the error part of the ETS model: either &quot;A&quot; or &quot;M&quot;.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_trend">trend</code></td>
<td>
<p>A character string specifying the trend part of the ETS model: either &quot;N&quot;, &quot;A&quot; or &quot;Ad&quot;.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_seasonal">seasonal</code></td>
<td>
<p>A character string specifying the seasonal part of the ETS model: either &quot;N&quot;, &quot;A&quot; or &quot;M&quot;.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_alpha">alpha</code></td>
<td>
<p>A numeric value for the smoothing parameter controlling the level.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_beta">beta</code></td>
<td>
<p>A numeric value for the smoothing parameter controlling the trend.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_gamma">gamma</code></td>
<td>
<p>A numeric value for the smoothing parameter controlling the seasonality.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_phi">phi</code></td>
<td>
<p>A numeric value specifying the damping parameter.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_level">level</code></td>
<td>
<p>A numeric value specifying the initial level <code class="reqn">\ell_0</code>.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_slope">slope</code></td>
<td>
<p>A numeric value specifying the initial slope <code class="reqn">b_0</code></p>
</td></tr>
<tr><td><code id="ets_model_+3A_season">season</code></td>
<td>
<p>A numeric vector specifying the initial states <code class="reqn">s_{1-m},...,s_0</code>.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_damped">damped</code></td>
<td>
<p>A logical value indicating if the trend is damped or not.</p>
</td></tr>
<tr><td><code id="ets_model_+3A_sigma">sigma</code></td>
<td>
<p>The standard deviation of the noise.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An 'ets' object as described in the <code><a href="forecast.html#topic+ets">ets</a></code> function from the forecast package.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p><code><a href="forecast.html#topic+simulate.ets">simulate.ets</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># An ETS(A,A,N) model with random parameters
model1 &lt;- ets_model(error = "A", trend = "A", seasonal = "N")
# An ETS(A,A,N) model with specific parameters
model2 &lt;- ets_model(
  error = "A", trend = "A", seasonal = "N",
  alpha = 0.3, beta = 0.2, level = 0, slope = 1, sigma = 2
)
# A multiplicative quarterly seasonal ETS model with random parameters
model3 &lt;- ets_model(seasonal = "M", frequency = 4)
# Simulate from each model and plot the results
library(forecast)
simulate(model1, 100) %&gt;% plot()
simulate(model2, 100) %&gt;% plot()
simulate(model3, 100) %&gt;% plot()
</code></pre>

<hr>
<h2 id='generate_msts'>Generate multiple seasonal time series from random parameter spaces of the mixture autoregressive (MAR) models.</h2><span id='topic+generate_msts'></span>

<h3>Description</h3>

<p>Deprecated function. Please use <code><a href="#topic+mar_model">mar_model</a>()</code> and <code><a href="#topic+generate.mar">generate.mar</a>()</code> instead.
Generates multiple seasonal time series from random parameter spaces of the mixture autoregressive (MAR) models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_msts(
  seasonal.periods = c(7, 365),
  n = 800,
  nComp = NULL,
  output_format = "list"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_msts_+3A_seasonal.periods">seasonal.periods</code></td>
<td>
<p>a vector of seasonal periods of the time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_msts_+3A_n">n</code></td>
<td>
<p>length of the generated time series.</p>
</td></tr>
<tr><td><code id="generate_msts_+3A_ncomp">nComp</code></td>
<td>
<p>number of mixing components when simulating time series using MAR models.</p>
</td></tr>
<tr><td><code id="generate_msts_+3A_output_format">output_format</code></td>
<td>
<p>An optional argument which allows to choose output format between &quot;list&quot; and &quot;tsibble&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a time series with multiple seasonal periods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- generate_msts(seasonal.periods = c(7, 365), n = 800, nComp = 2, output_format = "list")
forecast::autoplot(x)
</code></pre>

<hr>
<h2 id='generate_ts'>Generate time series from random parameter spaces of the mixture autoregressive (MAR) models.</h2><span id='topic+generate_ts'></span>

<h3>Description</h3>

<p>Deprecated function. Please use <code><a href="#topic+mar_model">mar_model</a>()</code> and <code><a href="#topic+generate.mar">generate.mar</a>()</code> instead.
Generate time series from random parameter spaces of the mixture autoregressive (MAR)
models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_ts(n.ts = 1, freq = 1, nComp = NULL, n = 120, output_format = "list")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_ts_+3A_n.ts">n.ts</code></td>
<td>
<p>number of time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_ts_+3A_freq">freq</code></td>
<td>
<p>seasonal period of the time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_ts_+3A_ncomp">nComp</code></td>
<td>
<p>number of mixing components when simulating time series using MAR models.</p>
</td></tr>
<tr><td><code id="generate_ts_+3A_n">n</code></td>
<td>
<p>length of the generated time series.</p>
</td></tr>
<tr><td><code id="generate_ts_+3A_output_format">output_format</code></td>
<td>
<p>An optional argument which allows to choose output format between &quot;list&quot; and &quot;tsibble&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of time series together with the SARIMA coefficients used in each mixing
component and the corresponding mixing weights.
</p>


<h3>Author(s)</h3>

<p>Yanfei Kang and Feng Li
</p>


<h3>References</h3>

<p>Wong, CS &amp; WK Li (2000).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- generate_ts(n.ts = 2, freq = 12, nComp = 2, n = 120)
x$N1$pars
forecast::autoplot(x$N1$x)
</code></pre>

<hr>
<h2 id='generate_ts_with_target'>Generating time series with controllable features.</h2><span id='topic+generate_ts_with_target'></span>

<h3>Description</h3>

<p>Deprecated function. Please use <code><a href="#topic+generate_target">generate_target</a>()</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generate_ts_with_target(
  n,
  ts.length,
  freq,
  seasonal,
  features,
  selected.features,
  target,
  parallel = TRUE,
  output_format = "list"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate_ts_with_target_+3A_n">n</code></td>
<td>
<p>number of time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_ts.length">ts.length</code></td>
<td>
<p>length of the time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_freq">freq</code></td>
<td>
<p>frequency of the time series to be generated.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_seasonal">seasonal</code></td>
<td>
<p>0 for non-seasonal data, 1 for single-seasonal data, and 2 for multiple seasonal data.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_features">features</code></td>
<td>
<p>a vector of function names.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_selected.features">selected.features</code></td>
<td>
<p>selected features to be controlled.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_target">target</code></td>
<td>
<p>target feature values.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_parallel">parallel</code></td>
<td>
<p>An optional argument which allows to specify if the Genetic Algorithm
should be run sequentially or in parallel.</p>
</td></tr>
<tr><td><code id="generate_ts_with_target_+3A_output_format">output_format</code></td>
<td>
<p>An optional argument which allows to choose output format between 'list' and 'tsibble'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A time-series object of class &quot;ts&quot; or &quot;msts&quot;.
</p>


<h3>Author(s)</h3>

<p>Yanfei Kang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(tsfeatures)
x &lt;- generate_ts_with_target(
  n = 1, ts.length = 60, freq = 1, seasonal = 0,
  features = c("entropy", "stl_features"), selected.features = c("entropy", "trend"),
  target = c(0.6, 0.9), parallel = FALSE
)
forecast::autoplot(x)
</code></pre>

<hr>
<h2 id='generate.mar'>Generate a tsibble of synthetic data from a Mixture Autoregressive model</h2><span id='topic+generate.mar'></span><span id='topic+generate.ets'></span><span id='topic+generate.Arima'></span>

<h3>Description</h3>

<p>This function simulates multiple random sample paths from a mixture of k Gaussian AR(p) processes.
The model is of the form
</p>
<p style="text-align: center;"><code class="reqn">y_t = \phi_{0,i} + \phi_{1,i}y_{t-1} + \dots + \phi_{p,i}y_{t-p} + \sigma_{i,t}\epsilon_t</code>
</p>

<p>with probability <code class="reqn">\alpha_i</code>, where <code class="reqn">\epsilon_t</code> is a N(0,1) variate.
The index of the tsibble is guessed from the MAR model seasonal periods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mar'
generate(x, length = 100, nseries = 10, ...)

## S3 method for class 'ets'
generate(x, length = 100, nseries = 10, ...)

## S3 method for class 'Arima'
generate(x, length = 100, nseries = 10, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="generate.mar_+3A_x">x</code></td>
<td>
<p>A 'mar' object, usually the output of <code><a href="#topic+mar_model">mar_model</a>()</code>.</p>
</td></tr>
<tr><td><code id="generate.mar_+3A_length">length</code></td>
<td>
<p>length of series to generate</p>
</td></tr>
<tr><td><code id="generate.mar_+3A_nseries">nseries</code></td>
<td>
<p>number of series to generate</p>
</td></tr>
<tr><td><code id="generate.mar_+3A_...">...</code></td>
<td>
<p>Other arguments, passed to <code><a href="#topic+simulate.mar">simulate.mar</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'tsibble' object with 'length' rows and 3 columns.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Feng Li, Mattias Villani, and Robert Kohn. (2010). Flexible Modeling of
Conditional Distributions using Smooth Mixtures of Asymmetric Student T Densities,
Journal of Statistical Planning and Inference, 140(12), pp. 3638-3654.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mar_model">mar_model</a></code>, <code><a href="#topic+simulate.mar">simulate.mar</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># MAR model with constant variances
phi &lt;- cbind(c(0, 0.8, 0), c(0, 0.6, 0.3))
weights &lt;- c(0.8, 0.2)
model1 &lt;- mar_model(phi = phi, sigmas = c(1, 2), weights = weights)
generate(model1, nseries = 5)
# MAR model for hourly data with daily and weekly periods
hourly_model &lt;- mar_model(seasonal_periods = c(24, 24*7))
generate(hourly_model)
</code></pre>

<hr>
<h2 id='mar_model'>Specify parameters for a Mixture Autoregressive model</h2><span id='topic+mar_model'></span>

<h3>Description</h3>

<p>This function allows the parameters of a mixture of k Gaussian ARIMA(p,d,0)(P,D,0)[m] processes
to be specified. The output is used in <code><a href="#topic+simulate.mar">simulate.mar</a>()</code> and <code><a href="#topic+generate.mar">generate.mar</a></code>.
The model is of the form
</p>
<p style="text-align: center;"><code class="reqn">(1-B)^{d_i}(1-B^{m_i})^{D_i} (1-\phi_i(B))(1-\Phi_i(B)) y_t = c_i + \sigma_{i,t}\epsilon_t</code>
</p>

<p>with probability <code class="reqn">\alpha_i</code>, where <code class="reqn">B</code> is the backshift operator,
<code class="reqn">m_i</code> is the seasonal period, <code class="reqn">\epsilon_t</code> is a N(0,1) variate, and
<code class="reqn">\phi_i(B)</code> and <code class="reqn">\Phi_i(B)</code> are polynomials in B of
order <code class="reqn">d_i</code> and <code class="reqn">D_i</code> respectively.
If any argument is <code>NULL</code>, the corresponding parameters are randomly selected.
When randomly selected, the AR parameters are uniformly sampled from the stationary region,
p is in {0,1,2,3}, d is in {0,1,2}, P is in {0,1,2} and D is in {0,1}.
The model orders are uniformly sampled. The constants are uniformly sampled on (-3,3).
The sigmas are uniformly sampled on (1,5) and the weights are uniformly sampled on (0,1).
The number of components is uniformly sampled on {1,2,3,4,5}.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mar_model(
  k = NULL,
  p = NULL,
  d = NULL,
  phi = NULL,
  P = NULL,
  D = NULL,
  Phi = NULL,
  constants = NULL,
  sigmas = NULL,
  weights = NULL,
  seasonal_periods = 1L
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mar_model_+3A_k">k</code></td>
<td>
<p>Number of components.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_p">p</code></td>
<td>
<p>Non-negative integer vector giving the orders of non-seasonal AR polynomials <code class="reqn">\phi_i(B)</code>.
Ignored if <code>phi</code> provided.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_d">d</code></td>
<td>
<p>Non-negative integer vector giving the orders of non-seasonal differencing.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_phi">phi</code></td>
<td>
<p>A max(p) x k numeric matrix containing the non-seasonal AR parameters
(<code class="reqn">\phi_{1,i},\dots,\phi_{p,i}</code>), <code class="reqn">i=1,\dots,k</code> for each component.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_p">P</code></td>
<td>
<p>Non-negative integer giving the orders of seasonal AR polynomiasl <code class="reqn">\Phi_i(B)</code>.
Ignored if <code>seasonal.periods==1</code> or <code>Phi</code> provided.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_d">D</code></td>
<td>
<p>Non-negative integer giving the orders of seasonal differencing.
Ignored if <code>seasonal.periods==1</code>.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_phi">Phi</code></td>
<td>
<p>A max(P) x k numeric matrix containing the seasonal AR parameters
(<code class="reqn">\Phi_{1,i},\dots,\phi_{P,i}</code>), <code class="reqn">i=1,\dots,k</code> for each component.
Ignored if <code>seasonal.periods==1</code>.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_constants">constants</code></td>
<td>
<p>A numeric vector of length k containing <code class="reqn">c_1,\dots,c_k</code>.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_sigmas">sigmas</code></td>
<td>
<p>A numeric vector of length k or a list of k GARCH specifications.
If it is a vector, it is assumed <code class="reqn">\sigma_{i,t} = \sigma_i</code> and
<code>sigmas</code> = <code class="reqn">\sigma_1,\dots,\sigma_k</code>.
If it is a list, each element should be the output from <code>fGarch::<a href="fGarch.html#topic+garchSpec">garchSpec</a>()</code>.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_weights">weights</code></td>
<td>
<p>A numeric vector of length k containing the probability of
each of the component processes, <code class="reqn">\alpha_1,\dots,\alpha_k</code>.</p>
</td></tr>
<tr><td><code id="mar_model_+3A_seasonal_periods">seasonal_periods</code></td>
<td>
<p>Either a scalar or a numeric vector of length k containing
the seasonal period of each component.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A 'mar' object containing a list of <code>k</code>, <code>m</code>,
<code>p</code>, <code>d</code>, <code>P</code>, <code>D</code>,
<code>phi</code>, <code>Phi</code>, <code>sigmas</code> and <code>weights</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simulate.mar">simulate.mar</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
n &lt;- 100
# Quarterly MAR model with randomly selected parameters
model1 &lt;- mar_model(seasonal_periods = 4)

# Daily MAR model with randomly selected parameters
model2 &lt;- mar_model(seasonal_periods = c(7, 365))

# MAR model with constant variances
# containing an AR(1) component and an AR(2) component
phi &lt;- cbind(c(0, 0.8, 0), c(0, 0.6, 0.3))
weights &lt;- c(0.8, 0.2)
model3 &lt;- mar_model(phi = phi, d = 0, sigmas = c(1, 2), weights = weights)

# MAR model with heteroskedastic errors
sigmas.spec &lt;- list(
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.06))),
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.05)))
)
model4 &lt;- mar_model(phi = phi, sigmas = sigmas.spec, weights = weights)

</code></pre>

<hr>
<h2 id='pi_coefficients'>Compute pi coefficients of an AR process from SARIMA coefficients.</h2><span id='topic+pi_coefficients'></span>

<h3>Description</h3>

<p>Convert SARIMA coefficients to pi coefficients of an AR process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pi_coefficients(
  ar = 0,
  d = 0L,
  ma = 0,
  sar = 0,
  D = 0L,
  sma = 0,
  m = 1L,
  tol = 1e-07
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pi_coefficients_+3A_ar">ar</code></td>
<td>
<p>AR coefficients in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_d">d</code></td>
<td>
<p>number of differences in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_ma">ma</code></td>
<td>
<p>MA coefficients in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_sar">sar</code></td>
<td>
<p>seasonal AR coefficients in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_d">D</code></td>
<td>
<p>number of seasonal differences in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_sma">sma</code></td>
<td>
<p>seasonal MA coefficients in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_m">m</code></td>
<td>
<p>seasonal period in the SARIMA model.</p>
</td></tr>
<tr><td><code id="pi_coefficients_+3A_tol">tol</code></td>
<td>
<p>tolerance value used. Only return up to last element greater than tolerance.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of AR coefficients.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Not Run
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+generate'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>generics</dt><dd><p><code><a href="generics.html#topic+generate">generate</a></code></p>
</dd>
</dl>

<hr>
<h2 id='rmixnorm'>Generate random variables from a mixture of multivariate normal distributions</h2><span id='topic+rmixnorm'></span>

<h3>Description</h3>

<p>Random variables from a mixture of k multivariate normal distributions, each of dimension q.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmixnorm(n, means, sigmas, weights)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmixnorm_+3A_n">n</code></td>
<td>
<p>an integer for the number of samples to be generated.</p>
</td></tr>
<tr><td><code id="rmixnorm_+3A_means">means</code></td>
<td>
<p>a q x k matrix (or a vector of length k if q=1) containing the means for each component.</p>
</td></tr>
<tr><td><code id="rmixnorm_+3A_sigmas">sigmas</code></td>
<td>
<p>a q x q x k covariance array (or a vector of length k if q=1) for each component.</p>
</td></tr>
<tr><td><code id="rmixnorm_+3A_weights">weights</code></td>
<td>
<p>a vector of length k containing the weights for each component.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An n x q matrix (or a vector if q=1) containing the generated data.
</p>


<h3>Author(s)</h3>

<p>Feng Li, Central University of Finance and Economics.
</p>


<h3>References</h3>

<p>Villani et al 2009.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>out &lt;- rmixnorm(
  n = 1000, means = c(-5, 0, 5), sigmas = c(1, 1, 3),
  weights = c(0.3, 0.4, 0.3)
)
hist(out, breaks = 100, freq = FALSE)
</code></pre>

<hr>
<h2 id='rmixnorm_ts'>Simulate autoregressive random variables from mixture of normal</h2><span id='topic+rmixnorm_ts'></span>

<h3>Description</h3>

<p>This function simulates random samples from a finite mixture of Gaussian distribution
where the mean from each components are AR(p) process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmixnorm_ts(n, means.ar.par.list, sigmas.list, weights, yinit = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rmixnorm_ts_+3A_n">n</code></td>
<td>
<p>number of samples.</p>
</td></tr>
<tr><td><code id="rmixnorm_ts_+3A_means.ar.par.list">means.ar.par.list</code></td>
<td>
<p>parameters in AR(p) within each mixing compoment.</p>
</td></tr>
<tr><td><code id="rmixnorm_ts_+3A_sigmas.list">sigmas.list</code></td>
<td>
<p>variance list.</p>
</td></tr>
<tr><td><code id="rmixnorm_ts_+3A_weights">weights</code></td>
<td>
<p>weight in each list.</p>
</td></tr>
<tr><td><code id="rmixnorm_ts_+3A_yinit">yinit</code></td>
<td>
<p>initial values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of length n follows a mixture distribution.
</p>


<h3>Author(s)</h3>

<p>Feng Li, Central University of Finance and Economics.
</p>


<h3>References</h3>

<p>Feng Li, Mattias Villani, and Robert Kohn. (2010). Flexible Modeling of
Conditional Distributions using Smooth Mixtures of Asymmetric Student T Densities,
Journal of Statistical Planning and Inference, 140(12), pp. 3638-3654.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
n &lt;- 1000
means.ar.par.list &lt;- list(c(0, 0.8), c(0, 0.6, 0.3))
require("fGarch")
sigmas.spec &lt;- list(
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.06)), cond.dist = "norm"),
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.05)), cond.dist = "norm")
)
sigmas.list &lt;- lapply(
  lapply(sigmas.spec, fGarch::garchSim, extended = TRUE, n = n),
  function(x) x$sigma
)
weights &lt;- c(0.8, 0.2)
y &lt;- rmixnorm_ts(
  n = n, means.ar.par.list = means.ar.par.list, sigmas.list = sigmas.list,
  weights = weights
)
plot(y)

</code></pre>

<hr>
<h2 id='simulate_target'>Generating time series with controllable features using MAR models</h2><span id='topic+simulate_target'></span><span id='topic+generate_target'></span>

<h3>Description</h3>

<p><code>simulate_target</code> simulate one time series of length 'length' from a MAR model with target features 
and returns a <code>ts</code> or <code>msts</code> object.
<code>generate_target</code> simulate multiple time series of length 'length' from a MAR model with target features 
and returns a <code>tsibble</code> object. The index of the tsibble is guessed from the seasonal periods.
The specified features should not depend on the scale of the time series as the series is scaled during simulation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_target(
  length = 100,
  seasonal_periods = 1,
  feature_function,
  target,
  k = ifelse(length(seasonal_periods) == 1, 3, length(seasonal_periods)),
  tolerance = 0.05,
  trace = FALSE,
  parallel = FALSE
)

generate_target(
  length = 100,
  nseries = 10,
  seasonal_periods = 1,
  feature_function,
  target,
  k = ifelse(length(seasonal_periods) == 1, 3, length(seasonal_periods)),
  tolerance = 0.05,
  trace = FALSE,
  parallel = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulate_target_+3A_length">length</code></td>
<td>
<p>length of the time series to be generated.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_seasonal_periods">seasonal_periods</code></td>
<td>
<p>Either a scalar or a numeric vector of length k containing
the number of seasonal periods for each component.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_feature_function">feature_function</code></td>
<td>
<p>a function that returns a vector of features from a time series.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_target">target</code></td>
<td>
<p>target feature values of the same length as that returned by <code>feature_function()</code>.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_k">k</code></td>
<td>
<p>integer specifying number of components to use for MAR models. Default is 3
unless there are multiple seasonal periods specified.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_tolerance">tolerance</code></td>
<td>
<p>average tolerance per feature. The genetic algorithm will attempt
to find a solution where the average difference between the series features and target
is less than <code>tolerance</code>. A larger value will give a faster but less precise
solution.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_trace">trace</code></td>
<td>
<p>logical indicating if details of the search should be shown.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_parallel">parallel</code></td>
<td>
<p>An optional argument which allows to specify if the Genetic Algorithm
should be run sequentially or in parallel.</p>
</td></tr>
<tr><td><code id="simulate_target_+3A_nseries">nseries</code></td>
<td>
<p>Number of series to generate</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A time series object of class &quot;ts&quot; or &quot;msts&quot;.
</p>


<h3>Author(s)</h3>

<p>Yanfei Kang and Rob J Hyndman
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1)
library(tsfeatures)
my_features &lt;- function(y) {
  c(entropy(y), acf = acf(y, plot = FALSE)$acf[2:3, 1, 1])
}
# Simulate a ts with specified target features
y &lt;- simulate_target(
  length = 60, feature_function = my_features, target = c(0.5, 0.9, 0.8)
)
my_features(y)
plot(y)
## Not run: 
# Generate a tsibble with specified target features
df &lt;- generate_target(
  length = 60, feature_function = my_features, target = c(0.5, 0.9, 0.8)
)
df %&gt;% 
 as_tibble() %&gt;%
 group_by(key) %&gt;%
 dplyr::summarise(value = my_features(value), 
           feature=c("entropy","acf1", "acf2"),
           .groups = "drop")
autoplot(df)
# Simulate time series similar to an existing series
my_features &lt;- function(y) {
  c(stl_features(y)[c("trend", "seasonal_strength", "peak", "trough")])
}
y &lt;- simulate_target(
  length = length(USAccDeaths),
  seasonal_periods = frequency(USAccDeaths),
  feature_function = my_features, target = my_features(USAccDeaths)
)
tsp(y) &lt;- tsp(USAccDeaths)
plot(cbind(USAccDeaths, y))
cbind(my_features(USAccDeaths), my_features(y))
## End(Not run)
</code></pre>

<hr>
<h2 id='simulate.mar'>Generate synthetic data from a Mixture Autoregressive model</h2><span id='topic+simulate.mar'></span>

<h3>Description</h3>

<p>This function simulates one random sample path from a mixture of k Gaussian AR(p) processes.
The model is of the form
</p>
<p style="text-align: center;"><code class="reqn">y_t = \phi_{0,i} + \phi_{1,i}y_{t-1} + \dots + \phi_{p,i}y_{t-p} + \sigma_{i,t}\epsilon_t</code>
</p>

<p>with probability <code class="reqn">\alpha_i</code>, where <code class="reqn">\epsilon_t</code> is a N(0,1) variate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mar'
simulate(object, nsim = 100, seed = NULL, n.start = 100, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simulate.mar_+3A_object">object</code></td>
<td>
<p>A 'mar' object, usually the output of <code><a href="#topic+mar_model">mar_model</a>()</code>.</p>
</td></tr>
<tr><td><code id="simulate.mar_+3A_nsim">nsim</code></td>
<td>
<p>length of series to generate</p>
</td></tr>
<tr><td><code id="simulate.mar_+3A_seed">seed</code></td>
<td>
<p>Either <code>NULL</code> or an integer that will be used in a call to
<code><a href="base.html#topic+set.seed">set.seed</a></code> before simulating the time series. The default,
<code>NULL</code>, will not change the random generator state.</p>
</td></tr>
<tr><td><code id="simulate.mar_+3A_n.start">n.start</code></td>
<td>
<p>Length of 'burn-in' period.</p>
</td></tr>
<tr><td><code id="simulate.mar_+3A_...">...</code></td>
<td>
<p>Other arguments, not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'ts' object of length <code>nsim</code>.
</p>


<h3>Author(s)</h3>

<p>Rob J Hyndman
</p>


<h3>References</h3>

<p>Feng Li, Mattias Villani, and Robert Kohn. (2010). Flexible Modeling of
Conditional Distributions using Smooth Mixtures of Asymmetric Student T Densities,
Journal of Statistical Planning and Inference, 140(12), pp. 3638-3654.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mar_model">mar_model</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># MAR model with constant variances
phi &lt;- cbind(c(0, 0.8, 0), c(0, 0.6, 0.3))
weights &lt;- c(0.8, 0.2)
model1 &lt;- mar_model(phi = phi, sigmas = c(1, 2), weights = weights)
y &lt;- simulate(model1, 100)
plot(y)

# MAR model with heteroskedastic errors
sigmas.spec &lt;- list(
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.06))),
  fGarch::garchSpec(model = list(alpha = c(0.05, 0.05)))
)
model2 &lt;- mar_model(phi = phi, sigmas = sigmas.spec, weights = weights)
y &lt;- simulate(model2, 100)
plot(y)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
