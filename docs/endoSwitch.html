<!DOCTYPE html><html><head><title>Help for package endoSwitch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {endoSwitch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#calcPar'><p>Endogenous switching regression</p></a></li>
<li><a href='#endoSwitch'><p>Endogenous Switching Regression Models</p></a></li>
<li><a href='#endoSwitch2Stage'><p>Endogenous switching regression</p></a></li>
<li><a href='#ImpactData'><p>A dataset on adoption of conservation agriculture in Zambia</p></a></li>
<li><a href='#summary.endoSwitch'><p>Summarize the endogenous switching regression results.</p></a></li>
<li><a href='#treatmentEffect'><p>Endogenous switching regression</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Endogenous Switching Regression Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Maximum likelihood estimation of endogenous switching regression models from Heckman (1979) &lt;<a href="https://doi.org/10.2307%2F1912352">doi:10.2307/1912352</a>&gt; and estimation of treatment effects.  </td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/cbw1243/endoSwitch">https://github.com/cbw1243/endoSwitch</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.12.2), maxLik (&ge; 1.3-6), stats (&ge; 3.6.1),
msm (&ge; 1.6.7)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-09 22:40:19 UTC; bwchen</td>
</tr>
<tr>
<td>Author:</td>
<td>Bowen Chen <a href="https://orcid.org/0000-0003-0370-2756"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Seong Yun [aut],
  Benjamin Gramig [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bowen Chen &lt;bwchen0719@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-21 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='calcPar'>Endogenous switching regression</h2><span id='topic+calcPar'></span>

<h3>Description</h3>

<p>This R function provides estimates of original distribution parameters (sigma and rho) from the estimates of
transformed distribution parameters using the delta method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcPar(Results)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcPar_+3A_results">Results</code></td>
<td>
<p>A maxLik object that is estimated by the <code>endoSwitch</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A matrix that reports the estimates of original distribution parameters. sigma is standard deviation,
and rho is correlation coefficient.
</p>

<hr>
<h2 id='endoSwitch'>Endogenous Switching Regression Models</h2><span id='topic+endoSwitch'></span>

<h3>Description</h3>

<p>This is the main interface for the endoSwitch package to estimate the endogenous switching regression
models (Heckman, 1979).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>endoSwitch(
  data,
  OutcomeDep,
  SelectDep,
  OutcomeCov,
  SelectCov,
  Weight = NA,
  treatEffect = TRUE,
  method = "BFGS",
  start = NULL,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="endoSwitch_+3A_data">data</code></td>
<td>
<p>a data frame. Data for running the regression analysis.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_outcomedep">OutcomeDep</code></td>
<td>
<p>character. Dependent variable in the outcome equation.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_selectdep">SelectDep</code></td>
<td>
<p>character. Dependent variable in the Selection model. The variable must be binary (0 or 1).</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_outcomecov">OutcomeCov</code></td>
<td>
<p>character vector. Covariates in the outcome equation.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_selectcov">SelectCov</code></td>
<td>
<p>character vector. Covariates in the selection equation.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_weight">Weight</code></td>
<td>
<p>optional character. Name of the weight variable in the dataset, or NA (equal weight).</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_treateffect">treatEffect</code></td>
<td>
<p><code>TRUE</code>/<code>FALSE</code>. If <code>TRUE</code>, average treatment effects will be calculated and returned.
If <code>FALSE</code>, expected outcome values will be calculated and returned.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_method">method</code></td>
<td>
<p>character. Maximization method to be used. The default is &quot;BFGS&quot; (for Broyden-Fletcher-Goldfarb-Shanno).
Other methods can also be used. See <code>maxLik</code>.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_start">start</code></td>
<td>
<p>optional numeric vector. Used as initial values of parameters for maximization purpose.
If NULL, the coefficient estimates from the two-stage estimation will be used.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_verbose">verbose</code></td>
<td>
<p>TRUE/FALSE. Choose to show the status of optimization or not.</p>
</td></tr>
<tr><td><code id="endoSwitch_+3A_...">...</code></td>
<td>
<p>Other parameters to be passed to the selected maximization routine. See <code>maxLik</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function estimates the endogenous switching regression model using the full maximum likelihood estimation
method. In this model, a selection equation sorts observation units over two different regimes (e.g., treated and
not-treated, or adopter and non-adopter), and two outcome equations that determine the
outcome. Estimation of the model relies on joint normality of the error terms in the three-equation system (the selection
equation plus two outcome equations). The model is estimated by maximizing the joint likelihood function that is provided in
Lokshin and Sajaia (2004).
</p>
<p>The <code>endoSwitch</code> uses the <code>maxLik</code> function in the maxLik package to do the optimization. The function automatically
searches for starting values for maximization using the results from two-stage estimation following Maddala (1986, chapter 8).
Though not recommended, users may provide starting values manually. Assume that you have M variables (including the constant) in
the selection equation, and N variables (including the constant) in each outcome equation.
Then you need (M + 2*N + 4) starting values. The first M values are for the variables in the
selection equation (last value for the constant), followed by N values for the outcome equation for the non-treated individuals
(SelectDep = 0), and another N values for the outcome equation for the treated individuals (SelectDep = 1).
The last four values are: sigma in outcome equation for the non-treated, sigma in outcome equation for the treated,
rho in outcome equation for the non-treated, rho in outcome equation for the treated.
</p>
<p>If <code>treatEffect</code> = <code>TRUE</code>, the <code>endoSwitch</code> function will report average treatment effects (for the treated or untreated) as well as heterogeneity effects.
A detailed description of these effects is provided in Di Falco, Veronesi, and Yesuf (2011, p.837). If <code>treatEffect</code> = <code>FALSE</code>,
the <code>endoSwitch</code> function will report expected outcome values in a list of two dataframes:
dataframe EYA1 reports actual (column EY1.A1) and counterfactual (column EY0.A1) expected outcome values for the treated;
dataframe EYA0 reports actual (column EY0.A0) and counterfactual (column EY1.A0) expected outcome values for the untreated.
</p>


<h3>Value</h3>

<p>A list containing three elements. The first element is an object of class &quot;maxLik&quot;, which includes parameters
in the selection equation, parameters in the outcome equations, and the transformed distributional parameters (parameters are
transformed to faciliate maximization, as recommended by Lokshin and Sajaia (2004)). The second element contains the estimates of
original distributional parameters (transformed back via the delta method). The third element contains a table reporting
average treatment effects or a list of expected outcome values, depending on users' choice of <code>treatEffect</code>.
</p>


<h3>References</h3>

<p>Lokshin, Michael, and Roger B. Newson. “Impact of Interventions on Discrete Outcomes: Maximum Likelihood Estimation
of the Binary Choice Models with Binary Endogenous Regressors.” Stata Journal 11, no. 3 (2011): 368–85.
</p>
<p>Heckman, James J. “Sample Selection Bias as a Specification Error.” Econometrica 47, no. 1 (1979): 153–61. https://doi.org/10.2307/1912352.
</p>
<p>Maddala, G. S. “Limited-Dependent and Qualitative Variables in Econometrics.” Cambridge Books. Cambridge University Press, 1986.
</p>
<p>Di Falco, Salvatore, Marcella Veronesi, and Mahmud Yesuf. “Does Adaptation to Climate Change Provide Food Security? A Micro-Perspective from Ethiopia.”
American Journal of Agricultural Economics 93, no. 3 (2011): 829–46. https://doi.org/10.1093/ajae/aar006.
</p>
<p>Abdulai, Abdul Nafeo. “Impact of Conservation Agriculture Technology on Household Welfare in Zambia.”
Agricultural Economics 47, no. 6 (2016): 729–41. https://doi.org/10.1111/agec.12269.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ImpactData) # Data are from Abdulai (2016)
OutcomeDep &lt;- 'Output'
SelectDep &lt;- 'CA'
OutcomeCov &lt;- c('Age')
SelectCov &lt;- c('Age', 'Perception')
endoReg &lt;- endoSwitch(ImpactData, OutcomeDep, SelectDep, OutcomeCov, SelectCov)

summary(endoReg) # Summarize the regression results
</code></pre>

<hr>
<h2 id='endoSwitch2Stage'>Endogenous switching regression</h2><span id='topic+endoSwitch2Stage'></span>

<h3>Description</h3>

<p>This function estimates the endogenous switching regression model via two-stage estimations (Maddala, 1986)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>endoSwitch2Stage(data, OutcomeDep, SelectDep, OutcomeCov, SelectCov)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="endoSwitch2Stage_+3A_data">data</code></td>
<td>
<p>a data frame. Data for running the regression analysis.</p>
</td></tr>
<tr><td><code id="endoSwitch2Stage_+3A_outcomedep">OutcomeDep</code></td>
<td>
<p>character. Dependent variable in the outcome equation.</p>
</td></tr>
<tr><td><code id="endoSwitch2Stage_+3A_selectdep">SelectDep</code></td>
<td>
<p>character. Dependent variable in the Selection model. The variable must be binary (0 or 1).</p>
</td></tr>
<tr><td><code id="endoSwitch2Stage_+3A_outcomecov">OutcomeCov</code></td>
<td>
<p>character vector. Covariates in the outcome equation.</p>
</td></tr>
<tr><td><code id="endoSwitch2Stage_+3A_selectcov">SelectCov</code></td>
<td>
<p>character vector. Covariates in the selection equation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The first stage uses a probit model to estimate the selection equation.
The second stage uses ordinary least squares including the inverse mills ratios computed from the first stage
estimation results to estimate the outcome equations.
</p>


<h3>Value</h3>

<p>A list containing regression results.
</p>


<h3>References</h3>

<p>Maddala, G. S. “Limited-Dependent and Qualitative Variables in Econometrics.” Cambridge Books. Cambridge University Press, 1986.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(ImpactData)
OutcomeDep &lt;- 'Output'
SelectDep &lt;- 'CA'
OutcomeCov &lt;- c('Age')
SelectCov &lt;- c('Age', 'Perception')
Results &lt;- endoSwitch2Stage(ImpactData, OutcomeDep, SelectDep, OutcomeCov, SelectCov)
# First stage regression results
summary(Results$FirstStageReg)
# Second stage regression results -- non-adopter
summary(Results$SecondStageReg.0)
# Second stage regression results -- adopter
summary(Results$SecondStageReg.1)
</code></pre>

<hr>
<h2 id='ImpactData'>A dataset on adoption of conservation agriculture in Zambia</h2><span id='topic+ImpactData'></span>

<h3>Description</h3>

<p>A dataset on adoption of conservation agriculture in Zambia
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ImpactData)
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.table</code> (inherits from <code>data.frame</code>) with 408 rows and 31 columns.</p>


<h3>Source</h3>

<p>Abdulai, Abdul Nafeo. “Impact of Conservation Agriculture Technology on Household Welfare in Zambia.”
Agricultural Economics 47, no. 6 (2016): 729–41. https://doi.org/10.1111/agec.12269.
</p>


<h3>References</h3>

<p>Abdulai, Abdul Nafeo. “Impact of Conservation Agriculture Technology on Household Welfare in Zambia.”
Agricultural Economics 47, no. 6 (2016): 729–41. https://doi.org/10.1111/agec.12269.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ImpactData)
summary(ImpactData)
</code></pre>

<hr>
<h2 id='summary.endoSwitch'>Summarize the endogenous switching regression results.</h2><span id='topic+summary.endoSwitch'></span>

<h3>Description</h3>

<p>Summarize the endogenous switching regression results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'endoSwitch'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.endoSwitch_+3A_object">object</code></td>
<td>
<p>Estimated endogenous switching regression model.</p>
</td></tr>
<tr><td><code id="summary.endoSwitch_+3A_...">...</code></td>
<td>
<p>Other elements.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the key regression results.
</p>

<hr>
<h2 id='treatmentEffect'>Endogenous switching regression</h2><span id='topic+treatmentEffect'></span>

<h3>Description</h3>

<p>This function calculates average treatment effects and heterogeneity effects from an estimated endogenous switching regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>treatmentEffect(
  Results,
  data,
  OutcomeDep,
  SelectDep,
  OutcomeCov,
  SelectCov,
  treatEffect
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="treatmentEffect_+3A_results">Results</code></td>
<td>
<p>Estimated endogenous switching regression model.</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_data">data</code></td>
<td>
<p>a data frame. Data for running the regression analysis.</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_outcomedep">OutcomeDep</code></td>
<td>
<p>character. Dependent variable in the outcome equation.</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_selectdep">SelectDep</code></td>
<td>
<p>character. Dependent variable in the Selection model. The variable must be binary (0 or 1).</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_outcomecov">OutcomeCov</code></td>
<td>
<p>character vector. Covariates in the outcome equation.</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_selectcov">SelectCov</code></td>
<td>
<p>character vector. Covariates in the selection equation.</p>
</td></tr>
<tr><td><code id="treatmentEffect_+3A_treateffect">treatEffect</code></td>
<td>
<p>TRUE/FALSE. Show average treatment effects or expected outcome values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data table that reports the average treatment effects or a list of two tables reporting expected outcome values.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
