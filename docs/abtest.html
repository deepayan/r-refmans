<!DOCTYPE html><html><head><title>Help for package abtest</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {abtest}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ab_test'><p>Bayesian A/B Test</p></a></li>
<li><a href='#ab-methods'><p>Methods for ab objects</p></a></li>
<li><a href='#dprior'><p>Prior Density</p></a></li>
<li><a href='#elicit_prior'><p>Elicit Prior</p></a></li>
<li><a href='#extractors'><p>Extraction functions for ab objects</p></a></li>
<li><a href='#plot_posterior'><p>Plot Posterior</p></a></li>
<li><a href='#plot_prior'><p>Plot Prior</p></a></li>
<li><a href='#plot_robustness'><p>Plot Bayes Factor Robustness Check</p></a></li>
<li><a href='#plot_sequential'><p>Plot Sequential Analysis</p></a></li>
<li><a href='#pprior'><p>Prior Cumulative Distribution Function (CDF)</p></a></li>
<li><a href='#prob_wheel'><p>Plot Probability Wheel</p></a></li>
<li><a href='#qprior'><p>Prior Quantile Function</p></a></li>
<li><a href='#seqdata'><p>Synthetic Sequential Data</p></a></li>
<li><a href='#simulate_priors'><p>Simulate from Parameter Priors</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayesian A/B Testing</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides functions for Bayesian A/B testing including prior elicitation
    options based on Kass and Vaidyanathan (1992) &lt;<a href="https://doi.org/10.1111%2Fj.2517-6161.1992.tb01868.x">doi:10.1111/j.2517-6161.1992.tb01868.x</a>&gt;. 
    Gronau, Raj K. N., &amp; Wagenmakers (2021) &lt;<a href="https://doi.org/10.18637%2Fjss.v100.i17">doi:10.18637/jss.v100.i17</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.14), mvtnorm, sn, qgam, truncnorm, plotrix,
grDevices, RColorBrewer, Matrix, parallel</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-11-22 08:31:59 UTC; quentin</td>
</tr>
<tr>
<td>Author:</td>
<td>Quentin F. Gronau [aut, cre],
  Akash Raj [ctb],
  Eric-Jan Wagenmakers [ths]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Quentin F. Gronau &lt;Quentin.F.Gronau@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-11-22 09:00:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='ab_test'>Bayesian A/B Test</h2><span id='topic+ab_test'></span>

<h3>Description</h3>

<p>Function for conducting a Bayesian A/B test (i.e., test between two
proportions).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ab_test(
  data = NULL,
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  prior_prob = NULL,
  nsamples = 10000,
  is_df = 5,
  posterior = FALSE,
  y = NULL,
  n = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ab_test_+3A_data">data</code></td>
<td>
<p>list or data frame with the data. This list (data frame) needs to
contain the following elements: <code>y1</code> (number of &quot;successes&quot; in the
control condition), <code>n1</code> (number of trials in the control condition),
<code>y2</code> (number of &quot;successes&quot; in the experimental condition), <code>n2</code>
(number of trials in the experimental condition). Each of these elements
needs to be an integer. Alternatively, the user can provide for each of the
elements a vector with a cumulative sequence of &quot;successes&quot;/trials. This
allows the user to produce a sequential plot of the posterior probabilities
for each hypothesis by passing the result object of class <code>"ab"</code> to
the <code><a href="#topic+plot_sequential">plot_sequential</a></code> function. Sequential data can also be
provided in form of a data frame or matrix that has the columns &quot;outcome&quot;
(containing only 0 and 1 to indicate the binary outcome) and &quot;group&quot;
(containing only 1 and 2 to indicate the group membership). Note that the
data can also be provided by specifying the arguments <code>y</code> and
<code>n</code> instead (not possible for sequential data).</p>
</td></tr>
<tr><td><code id="ab_test_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="ab_test_+3A_prior_prob">prior_prob</code></td>
<td>
<p>named vector with prior probabilities for the four
hypotheses <code>"H1"</code>, <code>"H+"</code>, <code>"H-"</code>, and <code>"H0"</code>.
<code>"H1"</code> states that the &quot;success&quot; probability differs between the
control and the experimental condition but does not specify which one is
higher. <code>"H+"</code> states that the &quot;success&quot; proability in the
experimental condition is higher than in the control condition, <code>"H-"</code>
states that the &quot;success&quot; probability in the experimental condition is
lower than in the control condition. <code>"H0"</code> states that the &quot;success&quot;
probability is identical (i.e., there is no effect). The one-sided
hypotheses <code>"H+"</code> and <code>"H-"</code> are obtained by truncating the
normal prior on the log odds ratio so that it assigns prior mass only to
the allowed log odds ratio values (e.g., for <code>"H+"</code> a normal prior
that is truncated from below at 0). If <code>NULL</code> (default) the prior
probabilities are set to <code>c(0, 1/4, 1/4, 1/2)</code>. That is, the default
assigns prior probability .5 to the hypothesis that there is no effect
(i.e., <code>"H0"</code>). The remaining prior probability (i.e., also .5) is
split evenly across the hypothesis that there is a positive effect (i.e.,
<code>"H+"</code>) and the hypothesis that there is a negative effect (i.e.,
<code>"H-"</code>).</p>
</td></tr>
<tr><td><code id="ab_test_+3A_nsamples">nsamples</code></td>
<td>
<p>determines the number of importance samples for obtaining the
log marginal likelihood for <code>"H+"</code> and <code>"H-"</code> and the number of
posterior samples in case <code>posterior = TRUE</code>. The default is
<code>10000</code>.</p>
</td></tr>
<tr><td><code id="ab_test_+3A_is_df">is_df</code></td>
<td>
<p>degrees of freedom of the multivariate t importance sampling
proposal density. The default is <code>5</code>.</p>
</td></tr>
<tr><td><code id="ab_test_+3A_posterior">posterior</code></td>
<td>
<p>Boolean which indicates whether posterior samples should be
returned. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ab_test_+3A_y">y</code></td>
<td>
<p>integer vector of length 2 containing the number of &quot;successes&quot; in
the control and experimental conditon</p>
</td></tr>
<tr><td><code id="ab_test_+3A_n">n</code></td>
<td>
<p>integer vector of length 2 containing the number of trials in
the control and experimental conditon</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The implemented Bayesian A/B test is based on the following model by
Kass and Vaidyanathan (1992, section 3): </p>
<p style="text-align: center;"><code class="reqn">log(p1/(1 - p1)) = \beta -
  \psi/2</code>
</p>
 <p style="text-align: center;"><code class="reqn">log(p2/(1 - p2)) = \beta + \psi/2</code>
</p>
 <p style="text-align: center;"><code class="reqn">y1 ~ Binomial(n1,
  p1)</code>
</p>
 <p style="text-align: center;"><code class="reqn">y2 ~ Binomial(n2, p2).</code>
</p>
 <p><code>"H0"</code> states that <code class="reqn">\psi = 0</code>,
<code>"H1"</code> states that <code class="reqn">\psi != 0</code>, <code>"H+"</code> states that <code class="reqn">\psi
  &gt; 0</code>, and <code>"H-"</code> states that <code class="reqn">\psi &lt; 0</code>. Normal priors are
assigned to the two parameters <code class="reqn">\psi</code> (i.e., the test-relevant log odds
ratio) and <code class="reqn">\beta</code> (i.e., the grand mean of the log odds which is a
nuisance parameter). Log marginal likelihoods for <code>"H0"</code> and
<code>"H1"</code> are obtained via Laplace approximations (see Kass &amp;
Vaidyanathan, 1992) which work well even for very small sample sizes. For
the one-sided hypotheses <code>"H+"</code> and <code>"H-"</code> the log marginal
likelihoods are obtained based on importance sampling which uses as a
proposal a multivariate t distribution with location and scale matrix
obtained via a Laplace approximation to the (log-transformed) posterior. If
<code>posterior = TRUE</code>, posterior samples are obtained using importance
sampling.
</p>


<h3>Value</h3>

<p>returns an object of class <code>"ab"</code> with components: </p>

<ul>
<li> <p><code>input</code>: a list with the input arguments. </p>
</li>
<li> <p><code>post</code>: a
list with parameter posterior samples for the three hypotheses <code>"H1"</code>,
<code>"H+"</code> (in the output called <code>"Hplus"</code>), and <code>"H-"</code> (in the
output called <code>"Hminus"</code>). Only contains samples if <code>posterior =
  TRUE</code>. </p>
</li>
<li> <p><code>laplace</code>: a list with the approximate parameter
posterior mode and variance/covariance matrix for each hypothesis obtained
via a Laplace approximation. </p>
</li>
<li> <p><code>method</code>: character that indicates
the method that has been used to obtain the results. The default is
<code>"log-is"</code> (importance sampling with multivariate t proposal based on
a Laplace approximation to the log transformed posterior). If this method
fails (for the one-sided hypotheses), method <code>"is-sn"</code> is used (i.e.,
importance sampling is used to obtain unconstrained samples, then a
skew-normal distribution is fitted to the samples to obtain the results for
the one-sided hypotheses). If <code>method = "is-sn"</code>, posterior samples
can only be obtained for <code>"H1"</code>. </p>
</li>
<li> <p><code>logml</code>: a list with the
estimated log marginal likelihoods for the hypotheses <code>"H0"</code> (i.e.,
<code>"logml0"</code>), <code>"H1"</code> (i.e., <code>"logml1"</code>), <code>"H+"</code> (i.e.,
<code>"logmlplus"</code>), and <code>"H-"</code> (i.e., <code>"logmlminus"</code>). </p>
</li>
<li>
<p><code>post_prob</code>: a named vector with the posterior probabilities of the
four hypotheses <code>"H1"</code>, <code>"H+"</code>, <code>"H-"</code>, and <code>"H0"</code>.
</p>
</li>
<li> <p><code>logbf</code>: a list with the log Bayes factor in favor of
<code>"H1"</code> over <code>"H0"</code>, the log Bayes factor in favor of <code>"H+"</code>
over <code>"H0"</code>, and the log Bayes factor in favor of <code>"H-"</code> over
<code>"H0"</code>. </p>
</li>
<li> <p><code>bf</code>: a list with the Bayes factor in favor of
<code>"H1"</code> over <code>"H0"</code> (i.e., <code>"bf10"</code>), the Bayes factor in
favor of <code>"H+"</code> over <code>"H0"</code> (i.e., <code>"bfplus0"</code>), and the
Bayes factor in favor of <code>"H-"</code> over <code>"H0"</code> (i.e.,
<code>"bfminus0"</code>).</p>
</li></ul>



<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>References</h3>

<p>Kass, R. E., &amp; Vaidyanathan, S. K. (1992). Approximate Bayes
factors and orthogonal parameters, with application to testing equality of
two binomial proportions. <em>Journal of the Royal Statistical Society,
Series B, 54</em>, 129-144.
doi: <a href="https://doi.org/10.1111/j.2517-6161.1992.tb01868.x">10.1111/j.2517-6161.1992.tb01868.x</a>
</p>
<p>Gronau, Q. F., Raj K. N., A., &amp; Wagenmakers, E.-J. (2021). Informed Bayesian
Inference for the A/B Test. <em>Journal of Statistical Software, 100</em>.
doi: <a href="https://doi.org/10.18637/jss.v100.i17">10.18637/jss.v100.i17</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+elicit_prior">elicit_prior</a></code> allows the user to elicit a prior based
on providing quantiles for either the log odds ratio, the odds ratio, the
relative risk, or the absolute risk. The resulting prior is always
translated to the corresponding normal prior on the log odds ratio. The
<code><a href="#topic+plot_prior">plot_prior</a></code> function allows the user to visualize the prior
distribution. The <code><a href="#topic+simulate_priors">simulate_priors</a></code> function produces samples
from the prior distribution. The prior and posterior probabilities of the
hypotheses can be visualized using the <code><a href="#topic+prob_wheel">prob_wheel</a></code> function.
Parameter posteriors can be visualized using the
<code><a href="#topic+plot_posterior">plot_posterior</a></code> function. The <code><a href="#topic+plot_sequential">plot_sequential</a></code>
function allows the user to sequentially plot the posterior probabilities
of the hypotheses (only possible if the <code>data</code> object contains vectors
with the cumulative &quot;successes&quot;/trials).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># synthetic data
data &lt;- list(y1 = 10, n1 = 28, y2 = 14, n2 = 26)

# Bayesian A/B test with default settings
ab &lt;- ab_test(data = data)
print(ab)

# different prior parameter settings
prior_par &lt;- list(mu_psi = 0.2, sigma_psi = 0.8,
                  mu_beta = 0, sigma_beta = 0.7)
ab2 &lt;- ab_test(data = data, prior_par = prior_par)
print(ab2)

# different prior probabilities
prior_prob &lt;- c(.1, .3, .2, .4)
names(prior_prob) &lt;- c("H1", "H+", "H-", "H0")
ab3 &lt;- ab_test(data = data, prior_prob = prior_prob)
print(ab3)

# also possible to obtain posterior samples
ab4 &lt;- ab_test(data = data, posterior = TRUE)

# plot parameter posterior
plot_posterior(x = ab4, what = "logor")
</code></pre>

<hr>
<h2 id='ab-methods'>Methods for ab objects</h2><span id='topic+ab-methods'></span><span id='topic+summary.ab'></span><span id='topic+print.summary.ab'></span><span id='topic+print.ab'></span><span id='topic+plot.ab'></span>

<h3>Description</h3>

<p>Methods defined for objects returned from the <code><a href="#topic+ab_test">ab_test</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ab'
summary(object, digits = 3, raw = FALSE, ...)

## S3 method for class 'summary.ab'
print(x, ...)

## S3 method for class 'ab'
print(x, ...)

## S3 method for class 'ab'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ab-methods_+3A_object">object</code>, <code id="ab-methods_+3A_x">x</code></td>
<td>
<p>object of class <code>ab</code> as returned from
<code><a href="#topic+ab_test">ab_test</a></code>.</p>
</td></tr>
<tr><td><code id="ab-methods_+3A_digits">digits</code></td>
<td>
<p>number of digits to print for the summary.</p>
</td></tr>
<tr><td><code id="ab-methods_+3A_raw">raw</code></td>
<td>
<p>if <code>TRUE</code>, the raw posterior samples are used to estimate the
mean, sd, and quantiles for the summary of the posterior. If <code>FALSE</code>,
parametric fits to the marginal posteriors are used to obtain the mean, sd,
and quantiles. Specifically, a normal distribution is fitted for <code>psi
(logor)</code> and <code>beta</code>; a log-normal distribution is fitted for <code>or</code>
and <code>rrisk</code>; beta distributions are fitted for <code>p1</code> and
<code>p2</code>; a scaled beta distribution is fitted for <code>arisk</code>. These
distributional fits are also used in <code><a href="#topic+plot_posterior">plot_posterior</a></code>.</p>
</td></tr>
<tr><td><code id="ab-methods_+3A_...">...</code></td>
<td>
<p>further arguments, currently ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>print</code> methods prints the Bayes factors, prior
probabilities of the hypotheses, and posterior probabilities of the
hypotheses (and returns nothing).
</p>
<p>The <code>plot</code> method visualizes the prior probabilities of the hypotheses
and posterior probabilities of the hypotheses (the next plots is obtained
by hitting Return) using the <code><a href="#topic+prob_wheel">prob_wheel</a></code> function.
</p>
<p>The <code>summary</code> methods returns the <code>ab</code> object that is guaranteed
to contain posterior samples (i.e., it adds posterior samples if they were
not included already). Additionally, it adds to the object a posterior
summary matrix (i.e., <code>ab$post$post_summary</code>) for the posterior under
H1 and the arguments <code>digits</code> (used for printing) and <code>raw</code>
(added to <code>ab$input</code>).
</p>

<hr>
<h2 id='dprior'>Prior Density</h2><span id='topic+dprior'></span>

<h3>Description</h3>

<p>Function for evaluating the prior density.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dprior(
  x1,
  x2 = NULL,
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  what = "logor",
  hypothesis = "H1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dprior_+3A_x1">x1</code></td>
<td>
<p>numeric vector with values at which the prior density should be
evaluated.</p>
</td></tr>
<tr><td><code id="dprior_+3A_x2">x2</code></td>
<td>
<p>if <code>what = "p1p2"</code>, value of p2 (i.e., the latent &quot;success&quot;
probability in the experimental condition) at which the joint prior density
should be evaluated. If <code>what = "p2givenp1"</code>, the given value of p1
(i.e., the latent &quot;success&quot; probability in the control condition).</p>
</td></tr>
<tr><td><code id="dprior_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="dprior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity the prior density should
be evaluated. Either <code>"logor"</code> (i.e., log odds ratio) , <code>"or"</code>
(i.e., odds ratio), <code>"p1p2"</code> (i.e., the joint density of the latent
&quot;success&quot; probability in the experimental and control condition),
<code>"p1"</code> (i.e., latent &quot;success&quot; probability in the control condition),
<code>"p2"</code> (i.e., latent &quot;success&quot; probability in the experimental
condition), <code>"p2givenp1"</code> (i.e., conditional distribution of the
latent &quot;success&quot; probability in the experimental condition given a
&quot;success&quot; probability of <code>p1</code> in the control condition),
<code>"rrisk"</code> (i.e., relative risk, the ratio of the &quot;success&quot; probability
in the experimental and the control condition), or <code>"arisk"</code> (i.e.,
absolute risk, the difference of the &quot;success&quot; probability in the
experimental and control condition).</p>
</td></tr>
<tr><td><code id="dprior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to evaluate the two-sided
prior density (i.e., &quot;H1&quot;), the one-sided prior density with lower
truncation point (i.e., &quot;H+&quot;), or the one-sided prior density with upper
truncation point (i.e., &quot;H-&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with the values of the prior density.
</p>


<h3>Note</h3>

<p>Internally, the test-relevant prior is always a normal prior on the log
odds ratio, consequently, if <code>what</code> is not <code>"logor"</code>, the
implied prior density for the quantity is returned.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># prior parameters
prior_par &lt;- list(mu_psi = 0, sigma_psi = 1,
                  mu_beta = 0, sigma_beta = 1)

# prior density
dprior(x1 = 0.1, prior_par = prior_par, what = "logor")
dprior(x1 = 1.1, prior_par = prior_par, what = "or")
dprior(x1 = 0.49, x2 = 0.51, prior_par = prior_par, what = "p1p2")
dprior(x1 = 0.45, prior_par = prior_par, what = "p1")
dprior(x1 = 0.45, prior_par = prior_par, what = "p2")
dprior(x1 = 0.49, x2 = 0.51, prior_par = prior_par, what = "p2givenp1")
dprior(x1 = 1.05, prior_par = prior_par, what = "rrisk")
dprior(x1 = 0.02, prior_par = prior_par, what = "arisk")

# also works for vectors
dprior(x1 = c(-0.1, 0, 0.1, 0.2), prior_par = prior_par, what = "logor")
</code></pre>

<hr>
<h2 id='elicit_prior'>Elicit Prior</h2><span id='topic+elicit_prior'></span>

<h3>Description</h3>

<p>Function for eliciting a prior distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>elicit_prior(
  q,
  prob,
  what = "logor",
  hypothesis = "H1",
  mu_beta = 0,
  sigma_beta = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="elicit_prior_+3A_q">q</code></td>
<td>
<p>vector with quantiles for the quantity of interest.</p>
</td></tr>
<tr><td><code id="elicit_prior_+3A_prob">prob</code></td>
<td>
<p>vector with probabilities corresponding to the quantiles (e.g., for
the median the corresponding element of <code>prob</code> would need to be .5).</p>
</td></tr>
<tr><td><code id="elicit_prior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity a prior should be
elicited. Either <code>"logor"</code> (i.e., log odds ratio) , <code>"or"</code> (i.e.,
odds ratio), <code>"rrisk"</code> (i.e., relative risk, the ratio of the
&quot;success&quot; probability in the experimental and the control condition), or
<code>"arisk"</code> (i.e., absolute risk, the difference of the &quot;success&quot;
probability in the experimental and control condition).</p>
</td></tr>
<tr><td><code id="elicit_prior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether the provided quantiles
correspond to a two-sided prior (i.e., &quot;H1&quot;), a one-sided prior with lower
truncation point (i.e., &quot;H+&quot;), or a one-sided prior with upper truncation
point (i.e., &quot;H-&quot;).</p>
</td></tr>
<tr><td><code id="elicit_prior_+3A_mu_beta">mu_beta</code></td>
<td>
<p>prior mean of the nuisance parameter <code class="reqn">\beta</code> (i.e., the
grand mean of the log odds). The default is 0.</p>
</td></tr>
<tr><td><code id="elicit_prior_+3A_sigma_beta">sigma_beta</code></td>
<td>
<p>prior standard deviation of the nuisance parameter
<code class="reqn">\beta</code> (i.e., the grand mean of the log odds). The default is 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is assumed that the prior on the grand mean of the log odds
(i.e., <code class="reqn">\beta</code>) is not the primary target of prior elicitation and is
fixed (e.g., to a standard normal prior). The reason is that the grand mean
nuisance parameter <code class="reqn">\beta</code> is not the primary target of inference and
changes in the prior on this nuisance parameter do not affect the results
much in most cases (see Kass &amp; Vaidyanathan, 1992). Nevertheless, it should
be emphasized that the implemented approach allows users to set the prior
parameters <code>mu_beta</code> and <code>sigma_beta</code> flexibly; the only
constraint is that this takes place before the prior on the test-relevant
log odds ratio parameter <code class="reqn">\psi</code> is elicited. The <code>elicit_prior</code>
function allows the user to elicit a prior not only in terms of the log
odds ratio parameter <code class="reqn">\psi</code>, but also in terms of the odds ratio, the
relative risk (i.e., the ratio of the &quot;success&quot; probability in the
experimental and the control condition), or the absolute risk (i.e., the
difference of the &quot;success&quot; probability in the experimental and control
condition). In case the prior is not elicited for the log odds ratio
directly, the elicited prior is always translated to the closest
corresponding normal prior on the log odds ratio. The prior parameters
<code>mu_psi</code> and <code>sigma_psi</code> are obtained using least squares
minimization.
</p>


<h3>Value</h3>

<p>list with the elicited prior parameters. Specifically, this list
consists of: </p>
 <ul>
<li><p><code>mu_psi</code> (prior mean for the normal prior
on the test-relevant log odds ratio). </p>
</li>
<li> <p><code>sigma_psi</code> (prior
standard deviation for the normal prior on the test-relevant log odds
ratio), </p>
</li>
<li> <p><code>mu_beta</code> (prior mean for the normal prior on the grand
mean of the log odds), </p>
</li>
<li> <p><code>sigma_beta</code> (prior standard deviation
for the normal prior on the grand mean of the log odds).</p>
</li></ul>
<p> Note that the
prior on the grand mean of the log odds is not part of the elicitation and
is assumed to be fixed by the user (using the arguments <code>mu_beta</code> and
<code>sigma_beta</code>). Consequently, the returned values for <code>mu_beta</code>
and <code>sigma_beta</code> simply correspond to the input values.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>References</h3>

<p>Kass, R. E., &amp; Vaidyanathan, S. K. (1992). Approximate Bayes
factors and orthogonal parameters, with application to testing equality of
two binomial proportions. <em>Journal of the Royal Statistical Society,
Series B, 54</em>, 129-144.
doi: <a href="https://doi.org/10.1111/j.2517-6161.1992.tb01868.x">10.1111/j.2517-6161.1992.tb01868.x</a>
</p>
<p>Gronau, Q. F., Raj K. N., A., &amp; Wagenmakers, E.-J. (2021). Informed
Bayesian Inference for the A/B Test. <em>Journal of Statistical Software,
100</em>. doi: <a href="https://doi.org/10.18637/jss.v100.i17">10.18637/jss.v100.i17</a>
</p>


<h3>See Also</h3>

<p>The <code><a href="#topic+plot_prior">plot_prior</a></code> function allows the user to visualize
the elicited prior distribution.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># elicit prior
prior_par &lt;- elicit_prior(q = c(0.1, 0.3, 0.5),
                          prob = c(.025, .5, .975),
                          what = "arisk")
print(prior_par)

# plot elicited prior (absolute risk)
plot_prior(prior_par = prior_par, what = "arisk")

# plot corresponding normal prior on log odds ratio
plot_prior(prior_par = prior_par, what = "logor")
</code></pre>

<hr>
<h2 id='extractors'>Extraction functions for ab objects</h2><span id='topic+extractors'></span><span id='topic+get_bf'></span><span id='topic+get_prior_prob'></span><span id='topic+get_post_prob'></span><span id='topic+get_post_samples'></span>

<h3>Description</h3>

<p>Extraction functions for objects returned from the <code><a href="#topic+ab_test">ab_test</a></code>
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_bf(x, log = FALSE)

get_prior_prob(x)

get_post_prob(x)

get_post_samples(x, hypothesis = "H1")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="extractors_+3A_x">x</code></td>
<td>
<p>object of class <code>"ab"</code> as returned from <code><a href="#topic+ab_test">ab_test</a></code>.</p>
</td></tr>
<tr><td><code id="extractors_+3A_log">log</code></td>
<td>
<p>determines whether the log Bayes factors are returned.</p>
</td></tr>
<tr><td><code id="extractors_+3A_hypothesis">hypothesis</code></td>
<td>
<p>determines for which hypothesis posterior samples are
returned. Needs to be either &quot;H1&quot;, &quot;H+&quot;, or &quot;H-&quot; (the default is &quot;H1&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>get_bf</code> returns the Bayes factors in favor of &quot;H1&quot;, &quot;H+&quot;, and
&quot;H-&quot; (compared to H0). <code>get_prior_prob</code> returns the prior
probabilities of the hypotheses. <code>get_post_prob</code> returns the posterior
probabilities of the hypotheses. <code>get_post_samples</code> returns posterior
samples for the specified hypothesis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># synthetic data
data &lt;- list(y1 = 10, n1 = 28, y2 = 14, n2 = 26)

# Bayesian A/B test with default settings
ab &lt;- ab_test(data = data, posterior = TRUE)

# extract Bayes factors
get_bf(ab)

# extract prior probabilities
get_prior_prob(ab)

# extract posterior probabilities
get_post_prob(ab)

# extract posterior samples for H1
s &lt;- get_post_samples(ab, hypothesis = "H1")
</code></pre>

<hr>
<h2 id='plot_posterior'>Plot Posterior</h2><span id='topic+plot_posterior'></span>

<h3>Description</h3>

<p>Function for plotting the posterior distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_posterior(
  x,
  what = "logor",
  hypothesis = "H1",
  ci = 0.95,
  p1lab = "p1",
  p2lab = "p2",
  p1adj = 0.44,
  p2adj = 0.56,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_posterior_+3A_x">x</code></td>
<td>
<p>object of class <code>"ab"</code>.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity the posterior should be
plotted. Either <code>"logor"</code> (i.e., log odds ratio) , <code>"or"</code> (i.e.,
odds ratio), <code>"p1p2"</code> (i.e., the marginal posteriors of the latent
&quot;success&quot; probabilities in the experimental and control condition),
<code>"rrisk"</code> (i.e., relative risk, the ratio of the &quot;success&quot; probability
in the experimental and the control condition), or <code>"arisk"</code> (i.e.,
absolute risk, the difference of the &quot;success&quot; probability in the
experimental and control condition).</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to plot the two-sided
posterior distribution (i.e., &quot;H1&quot;), the one-sided posterior distribution
with lower truncation point (i.e., &quot;H+&quot;), or the one-sided posterior
distribution with upper truncation point (i.e., &quot;H-&quot;).</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_ci">ci</code></td>
<td>
<p>numeric value specifying the <code>ci</code>% central credible interval.
The default is 0.95 which yields a 95% central credible interval.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_p1lab">p1lab</code></td>
<td>
<p>determines p1 x-axis label. Only relevant for <code>what =
"p1p2"</code>.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_p2lab">p2lab</code></td>
<td>
<p>determines p2 x-axis label. Only relevant for <code>what =
"p1p2"</code>.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_p1adj">p1adj</code></td>
<td>
<p>determines p1 x-axis label adjustment. Only relevant for
<code>what = "p1p2"</code>.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_p2adj">p2adj</code></td>
<td>
<p>determines p2 x-axis label adjustment. Only relevant for
<code>what = "p1p2"</code>.</p>
</td></tr>
<tr><td><code id="plot_posterior_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The resulting plot displays the posterior density for the quantitiy
of interest and also displays the corresponding prior density. The values
of the posterior median and a <code>ci</code>% central credible interval are
displayed on top of the plot.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># synthetic data
data &lt;- list(y1 = 10, n1 = 28, y2 = 14, n2 = 26)

# Bayesian A/B test with default settings
ab &lt;- ab_test(data = data, posterior = TRUE)

# plot parameter posterior
plot_posterior(x = ab, what = "logor")
plot_posterior(x = ab, what = "or")
plot_posterior(x = ab, what = "p1p2")
plot_posterior(x = ab, what = "rrisk")
plot_posterior(x = ab, what = "arisk")


# example of good width and height values for saving to file
cairo_pdf(file.path(tempdir(), "test_plot.pdf"),
          width = 530 / 72, height = 400 / 72)
plot_posterior(ab, what = "p1p2")
dev.off()

</code></pre>

<hr>
<h2 id='plot_prior'>Plot Prior</h2><span id='topic+plot_prior'></span>

<h3>Description</h3>

<p>Function for plotting parameter prior distributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_prior(
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  what = "logor",
  hypothesis = "H1",
  p1 = 0.5,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_prior_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="plot_prior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity the prior should be
plotted. Either <code>"logor"</code> (i.e., log odds ratio) , <code>"or"</code> (i.e.,
odds ratio), <code>"p1p2"</code> (i.e., plots the joint distribution of the
latent &quot;success&quot; probability in the experimental and control condition),
<code>"p1"</code> (i.e., latent &quot;success&quot; probability in the control condition),
<code>"p2"</code> (i.e., latent &quot;success&quot; probability in the experimental
condition), <code>"p2givenp1"</code> (i.e., plots the conditional distribution of
the latent &quot;success&quot; probability in the experimental condition given a
&quot;success&quot; probability of <code>p1</code> in the control condition),
<code>"rrisk"</code> (i.e., relative risk, the ratio of the &quot;success&quot; probability
in the experimental and the control condition), or <code>"arisk"</code> (i.e.,
absolute risk, the difference of the &quot;success&quot; probability in the
experimental and control condition).</p>
</td></tr>
<tr><td><code id="plot_prior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to plot a two-sided prior
(i.e., &quot;H1&quot;), a one-sided prior with lower truncation point (i.e., &quot;H+&quot;),
or a one-sided prior with upper truncation point (i.e., &quot;H-&quot;).</p>
</td></tr>
<tr><td><code id="plot_prior_+3A_p1">p1</code></td>
<td>
<p>value of the &quot;success&quot; probability in the control condtion. Only
used when <code>what = "p2givenp1"</code>.</p>
</td></tr>
<tr><td><code id="plot_prior_+3A_...">...</code></td>
<td>
<p>further arguments.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>Internally, the test-relevant prior is always a normal prior on the log
odds ratio, however, the <code>plot_prior</code> function also allows one to plot
the implied prior on different quantities.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># prior parameters
prior_par &lt;- list(mu_psi = 0, sigma_psi = 1,
                  mu_beta = 0, sigma_beta = 1)

# plot prior
plot_prior(prior_par = prior_par, what = "logor")
plot_prior(prior_par = prior_par, what = "or")
plot_prior(prior_par = prior_par, what = "p1p2")
plot_prior(prior_par = prior_par, what = "p1")
plot_prior(prior_par = prior_par, what = "p2")
plot_prior(prior_par = prior_par, what = "p2givenp1", p1 = 0.3)
plot_prior(prior_par = prior_par, what = "rrisk")
plot_prior(prior_par = prior_par, what = "arisk")
</code></pre>

<hr>
<h2 id='plot_robustness'>Plot Bayes Factor Robustness Check</h2><span id='topic+plot_robustness'></span>

<h3>Description</h3>

<p>Function for plotting Bayes factor robustness check results (i.e., prior
sensitivity analysis).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_robustness(
  x,
  bftype = "BF10",
  log = FALSE,
  mu_range = c(0, 0.3),
  sigma_range = c(0.25, 1),
  mu_steps = 40,
  sigma_steps = 40,
  cores = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_robustness_+3A_x">x</code></td>
<td>
<p>object of class <code>"ab"</code>.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_bftype">bftype</code></td>
<td>
<p>character that specifies which Bayes factor is plotted. Either
<code>"BF10"</code>, <code>"BF01"</code>, <code>"BF+0"</code>, <code>"BF0+"</code>, <code>"BF-0"</code>,
or <code>"BF0-"</code>.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_log">log</code></td>
<td>
<p>Boolean that specifies whether the log Bayes factor is plotted.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_mu_range">mu_range</code></td>
<td>
<p>numeric vector of length two that specifies the range of
<code>mu_psi</code> values to consider.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_sigma_range">sigma_range</code></td>
<td>
<p>numeric vector of length two that specifies the range of
<code>sigma_psi</code> values to consider.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_mu_steps">mu_steps</code></td>
<td>
<p>numeric value that specifies in how many discrete steps the
interval <code>mu_range</code> is partitioned.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_sigma_steps">sigma_steps</code></td>
<td>
<p>numeric value that specifies in how many discrete steps
the interval <code>sigma_range</code> is partitioned.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_cores">cores</code></td>
<td>
<p>number of cores used for the computations.</p>
</td></tr>
<tr><td><code id="plot_robustness_+3A_...">...</code></td>
<td>
<p>further arguments passed to <code>filled.contour</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plot shows how the Bayes factor changes as a function of the
normal prior location parameter <code>mu_psi</code> and the normal prior scale
parameter <code>sigma_psi</code> (i.e., a prior sensitivity analysis with respect
to the normal prior on the test-relevant log odds ratio).
</p>


<h3>Value</h3>

<p>Returns a <code>data.frame</code> with the <code>mu_psi</code> values,
<code>sigma_psi</code> values, and corresponding (log) Bayes factors.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# synthetic data
data &lt;- list(y1 = 10, n1 = 28, y2 = 14, n2 = 26)

# Bayesian A/B test with default settings
ab &lt;- ab_test(data = data)

# plot robustness check (i.e., prior sensitivity analysis)
p &lt;- plot_robustness(ab)

# returned object contains the Bayes factors for the different prior settings
head(p)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_sequential'>Plot Sequential Analysis</h2><span id='topic+plot_sequential'></span>

<h3>Description</h3>

<p>Function for plotting the posterior probabilities of the hypotheses
sequentially.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_sequential(x, thin = 1, cores = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_sequential_+3A_x">x</code></td>
<td>
<p>object of class <code>"ab"</code>. Note that the <code>"ab"</code> object needs
to contain sequential data.</p>
</td></tr>
<tr><td><code id="plot_sequential_+3A_thin">thin</code></td>
<td>
<p>allows the user to skip every <code class="reqn">k</code>th data point for plotting,
where the number <code class="reqn">k</code> is specified via <code>thin</code>. For instance, in
case <code>thin = 2</code>, only every second element of the data is displayed.</p>
</td></tr>
<tr><td><code id="plot_sequential_+3A_cores">cores</code></td>
<td>
<p>number of cores used for the computations.</p>
</td></tr>
<tr><td><code id="plot_sequential_+3A_...">...</code></td>
<td>
<p>further arguments</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plot shows the posterior probabilities of the hypotheses as a
function of the total number of observations across the experimental and
control group. On top of the plot, probability wheels (see also
<code><a href="#topic+prob_wheel">prob_wheel</a></code>) visualize the prior probabilities of the
hypotheses and the posterior probabilities of the hypotheses after taking
into account all available data.
</p>
<p><strong>N.B.: This plot has been designed to look good in the following
format: In inches, 530 / 72 (width) by 400 / 72 (height); in pixels, 530
(width) by 400 (height).</strong>
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### 1.

# synthetic sequential data (observations alternate between the groups)
# note that the cumulative number of successes and trials need to be provided
data &lt;- list(y1 = c(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 3, 3, 4, 4),
             n1 = c(1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10),
             y2 = c(0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 9),
             n2 = c(0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10))

# conduct Bayesian A/B test with default settings
ab &lt;- ab_test(data = data)
print(ab)


# produce sequential plot of posterior probabilities of the hypotheses
# (using recommended width and height values for saving to file)
cairo_pdf(file.path(tempdir(), "test_plot.pdf"),
          width = 530 / 72, height = 400 / 72)
plot_sequential(ab)
dev.off()


### 2.

# synthetic sequential data (observations alternate between the groups)
# this time provided in the alternative format
data2 &lt;- data.frame(outcome = c(1, 1, 0, 1, 0, 1, 0, 1, 0, 1,
                                0, 1, 0, 1, 1, 1, 1, 1, 1, 0),
                    group = rep(c(1, 2), 10))

# conduct Bayesian A/B test with default settings
ab2 &lt;- ab_test(data = data2)
print(ab2)


# produce sequential plot of posterior probabilities of the hypotheses
# (using recommended width and height values for saving to file)
cairo_pdf(file.path(tempdir(), "test_plot2.pdf"),
          width = 530 / 72, height = 400 / 72)
plot_sequential(ab2)
dev.off()


## Not run: 
### 3.
data(seqdata)

# conduct Bayesian A/B test with default settings
ab3 &lt;- ab_test(data = seqdata)
print(ab3)

# produce sequential plot of posterior probabilities of the hypotheses
# (using recommended width and height values for saving to file)
cairo_pdf(file.path(tempdir(), "test_plot3.pdf"),
          width = 530 / 72, height = 400 / 72)
plot_sequential(ab3, thin = 4)
dev.off()

## End(Not run)
</code></pre>

<hr>
<h2 id='pprior'>Prior Cumulative Distribution Function (CDF)</h2><span id='topic+pprior'></span>

<h3>Description</h3>

<p>Function for evaluating the prior cumulative distribution function (CDF).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pprior(
  q,
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  what = "logor",
  hypothesis = "H1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pprior_+3A_q">q</code></td>
<td>
<p>numeric vector with quantiles.</p>
</td></tr>
<tr><td><code id="pprior_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="pprior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity the prior CDF should be
evaluated. Either <code>"logor"</code> (i.e., log odds ratio) , <code>"or"</code>
(i.e., odds ratio), <code>"rrisk"</code> (i.e., relative risk, the ratio of the
&quot;success&quot; probability in the experimental and the control condition), or
<code>"arisk"</code> (i.e., absolute risk, the difference of the &quot;success&quot;
probability in the experimental and control condition).</p>
</td></tr>
<tr><td><code id="pprior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to evaluate the CDF for a
two-sided prior (i.e., &quot;H1&quot;), a one-sided prior with lower truncation point
(i.e., &quot;H+&quot;), or a one-sided prior with upper truncation point (i.e.,
&quot;H-&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with the values of the prior CDF.
</p>


<h3>Note</h3>

<p>Internally, the test-relevant prior is always a normal prior on the log
odds ratio, consequently, if <code>what</code> is not <code>"logor"</code>, the
implied prior CDF for the quantity is returned.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># prior parameters
prior_par &lt;- list(mu_psi = 0, sigma_psi = 1,
                  mu_beta = 0, sigma_beta = 1)

# evaluate prior CDF
pprior(q = 0.1, prior_par = prior_par, what = "logor")
pprior(q = 1.1, prior_par = prior_par, what = "or")
pprior(q = 1.05, prior_par = prior_par, what = "rrisk")
pprior(q = 0.02, prior_par = prior_par, what = "arisk")

# also works for vectors
pprior(q = c(-0.1, 0, 0.1, 0.2), prior_par = prior_par, what = "logor")
</code></pre>

<hr>
<h2 id='prob_wheel'>Plot Probability Wheel</h2><span id='topic+prob_wheel'></span>

<h3>Description</h3>

<p>Function for visualizing prior and posterior probabilities of the hypotheses
as a probability wheel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prob_wheel(x, type = "posterior")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prob_wheel_+3A_x">x</code></td>
<td>
<p>object of class <code>"ab"</code>.</p>
</td></tr>
<tr><td><code id="prob_wheel_+3A_type">type</code></td>
<td>
<p>character indicating whether to plot a probability wheel
visualizing the prior probabilities of the hypotheses (i.e., <code>type =
"prior"</code>) or the posterior probabilities of the hypotheses (i.e.,
<code>type = "posterior"</code>). The default is <code>"posterior"</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># synthetic data
data &lt;- list(y1 = 10, n1 = 28, y2 = 14, n2 = 26)

# Bayesian A/B test with default settings
ab &lt;- ab_test(data = data)
print(ab)

# visualize prior probabilities of the hypotheses
prob_wheel(ab, type = "prior")

# visualize posterior probabilities of the hypotheses
prob_wheel(ab, type = "posterior")
</code></pre>

<hr>
<h2 id='qprior'>Prior Quantile Function</h2><span id='topic+qprior'></span>

<h3>Description</h3>

<p>Function for evaluating the prior quantile function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qprior(
  p,
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  what = "logor",
  hypothesis = "H1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qprior_+3A_p">p</code></td>
<td>
<p>numeric vector with probabilities.</p>
</td></tr>
<tr><td><code id="qprior_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="qprior_+3A_what">what</code></td>
<td>
<p>character specifying for which quantity the prior quantile
function should be evaluated. Either <code>"logor"</code> (i.e., log odds ratio)
, <code>"or"</code> (i.e., odds ratio), <code>"rrisk"</code> (i.e., relative risk, the
ratio of the &quot;success&quot; probability in the experimental and the control
condition), or <code>"arisk"</code> (i.e., absolute risk, the difference of the
&quot;success&quot; probability in the experimental and control condition).</p>
</td></tr>
<tr><td><code id="qprior_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to evaluate the quantile
function for a two-sided prior (i.e., &quot;H1&quot;), a one-sided prior with lower
truncation point (i.e., &quot;H+&quot;), or a one-sided prior with upper truncation
point (i.e., &quot;H-&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>numeric vector with the values of the prior quantile function.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># prior parameters
prior_par &lt;- list(mu_psi = 0, sigma_psi = 1,
                  mu_beta = 0, sigma_beta = 1)

# evaluate prior quantile function
qprior(p = .1, prior_par = prior_par, what = "logor")
qprior(p = .7, prior_par = prior_par, what = "or")
qprior(p = .9, prior_par = prior_par, what = "rrisk")
qprior(p = .7, prior_par = prior_par, what = "arisk")

# also works for vectors
qprior(p = c(.1, .2, .5, .7, .9), prior_par = prior_par, what = "logor")
</code></pre>

<hr>
<h2 id='seqdata'>Synthetic Sequential Data</h2><span id='topic+seqdata'></span>

<h3>Description</h3>

<p>This data set contains synthetic sequential A/B data (500 observations in
each of the two groups, where the observations are alternating between
groups). <code>y1</code> denotes the number of successes for the first group,
<code>n1</code> denotes the corresponding total number of observations for the
first group. Similarly, <code>y2</code> denotes the number of successes for the
second group and <code>n2</code> denotes the corresponding total number of
observations for the second group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seqdata
</code></pre>


<h3>Format</h3>

<p>A list with 4 elements.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(seqdata)

# conduct Bayesian A/B test with default settings
ab &lt;- ab_test(data = seqdata)
print(ab)

# produce sequential plot of posterior probabilities of the hypotheses
plot_sequential(ab, thin = 4)

# example of good width and height values for saving to file
cairo_pdf(file.path(tempdir(), "test_plot.pdf"),
          width = 530 / 72, height = 400 / 72)
plot_sequential(ab)
dev.off()

</code></pre>

<hr>
<h2 id='simulate_priors'>Simulate from Parameter Priors</h2><span id='topic+simulate_priors'></span>

<h3>Description</h3>

<p>Function for simulating from the parameter prior distributions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_priors(
  nsamples,
  prior_par = list(mu_psi = 0, sigma_psi = 1, mu_beta = 0, sigma_beta = 1),
  hypothesis = "H1"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_priors_+3A_nsamples">nsamples</code></td>
<td>
<p>number of samples.</p>
</td></tr>
<tr><td><code id="simulate_priors_+3A_prior_par">prior_par</code></td>
<td>
<p>list with prior parameters. This list needs to contain the
following elements: <code>mu_psi</code> (prior mean for the normal prior on the
test-relevant log odds ratio), <code>sigma_psi</code> (prior standard deviation
for the normal prior on the test-relevant log odds ratio), <code>mu_beta</code>
(prior mean for the normal prior on the grand mean of the log odds),
<code>sigma_beta</code> (prior standard deviation for the normal prior on the
grand mean of the log odds). Each of the elements needs to be a real number
(the standard deviations need to be positive). The default are standard
normal priors for both the log odds ratio parameter and the grand mean of
the log odds parameter.</p>
</td></tr>
<tr><td><code id="simulate_priors_+3A_hypothesis">hypothesis</code></td>
<td>
<p>character specifying whether to sample from a two-sided
prior (i.e., &quot;H1&quot;), a one-sided prior with lower truncation point (i.e.,
&quot;H+&quot;), or a one-sided prior with upper truncation point (i.e., &quot;H-&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with prior samples for the following quantities (see
<code>?ab_test</code> for a description of the underlying model): </p>
 <ul>
<li>
<p><code>beta</code>: prior samples for the grand mean of the log odds. </p>
</li>
<li>
<p><code>psi</code>: prior samples for the log odds ratio. </p>
</li>
<li> <p><code>p1</code>: prior
samples for the latent &quot;success&quot; probability in the control group. </p>
</li>
<li>
<p><code>p2</code>: prior samples for the latent &quot;success&quot; probability in the
experimental group. </p>
</li>
<li> <p><code>logor</code>: prior samples for the log odds
ratio (identical to <code>psi</code>, only included for easier reference). </p>
</li>
<li>
<p><code>or</code>: prior samples for the odds ratio. </p>
</li>
<li> <p><code>rrisk</code>: prior
samples for the relative risk (i.e., the ratio of the &quot;success&quot; probability
in the experimental and the control condition). </p>
</li>
<li> <p><code>arisk</code>: prior
samples for the absolute risk (i.e., the difference of the &quot;success&quot;
probability in the experimental and control condition)</p>
</li></ul>
<p>.
</p>


<h3>Author(s)</h3>

<p>Quentin F. Gronau
</p>


<h3>Examples</h3>

<pre><code class='language-R'># prior parameters
prior_par &lt;- list(mu_psi = 0, sigma_psi = 1,
                  mu_beta = 0, sigma_beta = 1)

# obtain prior samples
samples &lt;- simulate_priors(nsamples = 1000, prior_par = prior_par)

# plot, e.g., prior samples for absolute risk
hist(samples$arisk)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
