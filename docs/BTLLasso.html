<!DOCTYPE html><html lang="en"><head><title>Help for package BTLLasso</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BTLLasso}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BTLLasso-package'><p>BTLLasso</p></a></li>
<li><a href='#boot.BTLLasso'><p>Bootstrap function for BTLLasso</p></a></li>
<li><a href='#BTLLasso'><p>Function to perform BTLLasso</p></a></li>
<li><a href='#Buli1415'><p>Bundesliga Data 2014/15 (Buli1415)</p></a></li>
<li><a href='#Buli1516'><p>Bundesliga Data 2015/16 (Buli1516)</p></a></li>
<li><a href='#Buli1617'><p>Bundesliga Data 2016/17 (Buli1617)</p></a></li>
<li><a href='#Buli1718'><p>Bundesliga Data 2017/18 (Buli1718)</p></a></li>
<li><a href='#BuliResponse'><p>Bundesliga Data Response Data (BuliResponse)</p></a></li>
<li><a href='#ctrl.BTLLasso'><p>Control function for BTLLasso</p></a></li>
<li><a href='#cv.BTLLasso'><p>Cross-validation function for BTLLasso</p></a></li>
<li><a href='#GLES'><p>German Longitudinal Election Study (GLES)</p></a></li>
<li><a href='#GLESsmall'><p>Subset of the GLES data set with 200 observations and 4 covariates.</p></a></li>
<li><a href='#paths'><p>Plot covariate paths for BTLLasso</p></a></li>
<li><a href='#plot.boot.BTLLasso'><p>Plot bootstrap intervals for BTLLasso</p></a></li>
<li><a href='#plot.BTLLasso'><p>Plot parameter paths for BTLLasso</p></a></li>
<li><a href='#predict.BTLLasso'><p>Predict function for BTLLasso</p></a></li>
<li><a href='#print.boot.BTLLasso'><p>Print function for boot.BTLLasso objects</p></a></li>
<li><a href='#print.BTLLasso'><p>Print function for BTLLasso objects</p></a></li>
<li><a href='#print.cv.BTLLasso'><p>Print function for cv.BTLLasso objects</p></a></li>
<li><a href='#response.BTLLasso'><p>Create response object for BTLLasso</p></a></li>
<li><a href='#SimData'><p>Simulated data set for illustration</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Modelling Heterogeneity in Paired Comparison Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-13</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-12</td>
</tr>
<tr>
<td>Author:</td>
<td>Gunther Schauberger</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gunther Schauberger &lt;gunther.schauberger@tum.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs 'BTLLasso' as described by Schauberger and Tutz (2019) &lt;<a href="https://doi.org/10.18637%2Fjss.v088.i09">doi:10.18637/jss.v088.i09</a>&gt; and Schauberger and Tutz (2017) &lt;<a href="https://doi.org/10.1177%2F1471082X17693086">doi:10.1177/1471082X17693086</a>&gt;. BTLLasso is a method to include different types of variables in paired comparison models and, therefore, to allow for heterogeneity between subjects. Variables can be subject-specific, object-specific and subject-object-specific and can have an influence on the attractiveness/strength of the objects. Suitable L1 penalty terms are used to cluster certain effects and to reduce the complexity of the models.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.11.3), stringr, psychotools</td>
</tr>
<tr>
<td>Depends:</td>
<td>Matrix, parallel</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-12 08:25:53 UTC; ge29weh</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-12 09:20:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='BTLLasso-package'>BTLLasso</h2><span id='topic+BTLLasso-package'></span>

<h3>Description</h3>

<p>Performs BTLLasso, a method to model heterogeneity in paired comparison
data. Different types of covariates are allowd to have an influence on the
attractivity/strength of the objects. Covariates can be subject-specific, 
object-specific or subject-object-specific. L1 penalties are used to reduce the 
complexity of the model by enforcing clusters of equal effects or by elimination of irrelevant
covariates.  Several additional functions are provided, such as
cross-validation, bootstrap intervals, and plot functions.
</p>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='boot.BTLLasso'>Bootstrap function for BTLLasso</h2><span id='topic+boot.BTLLasso'></span>

<h3>Description</h3>

<p>Performs bootstrap for BTLLasso to get bootstrap intervals. Main
input argument is a <code>cv.BTLLasso</code> object. The bootstrap is (recommended to be) 
performed on level of the cross-validation. Therefore, within every bootstrap iteration
the complete cross-validation procedure from the <code>cv.BTLLasso</code> object
is performed. A <code><a href="#topic+plot.boot.BTLLasso">plot</a></code> function can be applied 
to the resulting <code>boot.BTLLasso</code> object to plot bootstrap intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.BTLLasso(
  model,
  B = 500,
  lambda = NULL,
  cores = 1,
  trace = TRUE,
  trace.cv = TRUE,
  with.cv = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="boot.BTLLasso_+3A_model">model</code></td>
<td>
<p>A <code>cv.BTLLasso</code> object.</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_b">B</code></td>
<td>
<p>Number of bootstrap iterations.</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_lambda">lambda</code></td>
<td>
<p>Vector of tuning parameters. If not specified (default),
tuning parameters from <code>cv.BTLLasso</code> object are used. See also details.</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_cores">cores</code></td>
<td>
<p>Number of cores for (parallelized) computation.</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_trace">trace</code></td>
<td>
<p>Should the trace of the BTLLasso algorithm be printed?</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_trace.cv">trace.cv</code></td>
<td>
<p>Should the trace fo the cross-validation be printed? If
parallelized, the trace is not working on Windows machines.</p>
</td></tr>
<tr><td><code id="boot.BTLLasso_+3A_with.cv">with.cv</code></td>
<td>
<p>Should cross-validation be performed separately on every 
bootstrap sample? If <code>FALSE</code>, the tuning parameter is fixed to the value chosen 
in the <code>cv.BTLLasso</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The method can be highly time-consuming, for high numbers of tuning
parameters, high numbers of folds in the cross-validation and high number of
bootstrap iterations B.  The number of tuning parameters can be reduced by
specifying <code>lambda</code> in the <code>boot.BTLLasso</code> function. You can control if
the range of prespecified tuning parameters was to small by looking at the
output values <code>lambda.max.alert</code> and <code>lambda.min.alert</code>. They are
set <code>TRUE</code> if the smallest or largest of the specifed lambda values was
chosen in at least one bootstrap iteration.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>cv.model</code></td>
<td>
<p><code>cv.BTLLasso</code> object</p>
</td></tr> <tr><td><code>estimatesB</code></td>
<td>
<p>Matrix
containing all B estimates for original parameters. For internal use.</p>
</td></tr>
<tr><td><code>estimatesBrepar</code></td>
<td>
<p>Matrix containing all B estimates for reparameterized
(symmetric side constraints) parameters.</p>
</td></tr> <tr><td><code>lambdaB</code></td>
<td>
<p>vector of used
tuning parameters</p>
</td></tr> <tr><td><code>lambda.max.alert</code></td>
<td>
<p>Was the largest value of lambda chosen
in at least one bootstrap iteration?</p>
</td></tr> <tr><td><code>lambda.min.alert</code></td>
<td>
<p>Was the
smallest value of lambda chosen in at least one bootstrap iteration?</p>
</td></tr> <tr><td><code>number.na</code></td>
<td>
<p>Total number
of failed bootstrap iterations.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>,
<code><a href="#topic+plot.boot.BTLLasso">plot.boot.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='BTLLasso'>Function to perform BTLLasso</h2><span id='topic+BTLLasso'></span>

<h3>Description</h3>

<p>Performs BTLLasso, a method to model heterogeneity in paired comparison
data. Different types of covariates are allowed to have an influence on the
attractivity/strength of the objects. Covariates can be subject-specific, 
object-specific or subject-object-specific. L1 penalties are used to reduce the 
complexiy of the model by enforcing clusters of equal effects or by elimination of irrelevant
covariates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BTLLasso(
  Y,
  X = NULL,
  Z1 = NULL,
  Z2 = NULL,
  lambda = NULL,
  control = ctrl.BTLLasso(),
  trace = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BTLLasso_+3A_y">Y</code></td>
<td>
<p>A <code>response.BTLLasso</code> object created by
<code><a href="#topic+response.BTLLasso">response.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_x">X</code></td>
<td>
<p>Matrix containing all <b>subject-specific covariates</b> that are
to be included with <b>object-specific effects</b>. One row represents one
subject, one column represents one covariate. X has to be standardized.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_z1">Z1</code></td>
<td>
<p>Matrix containing all <b>object-subject-specific covariates</b>
that are to be included with <b>object-specific effects</b>. One row
represents one subject, one column represents one combination between
covariate and object. Column names have to follow the scheme
'firstvar.object1',...,'firstvar.objectm',...,'lastvar.objectm'. The object
names 'object1',...,'objectm' have to be identical to the object names used
in the <code>response.BTLLasso</code> object <code>Y</code>. The variable names and the
object names have to be separated by '.'.  The rownames of the matrix',
Z.name, 'have to be equal to the subjects specified in the response object.
Z1 has to be standardized.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_z2">Z2</code></td>
<td>
<p>Matrix containing all <b>object-subject-specific covariates or
object-specific covariates</b> that are to be included with <b>global
effects</b>. One row represents one subject, one column represents one
combination between covariate and object. Column names have to follow the
scheme 'firstvar.object1',...,'firstvar.objectm',...,'lastvar.objectm'. The
object names 'object1',...,'objectm' have to be identical to the object
names used in the <code>response.BTLLasso</code> object <code>Y</code>. The variable
names and the object names have to be separated by '.'.  The rownames of the
matrix', Z.name, 'have to be equal to the subjects specified in the response
object. Z2 has to be standardized.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_lambda">lambda</code></td>
<td>
<p>Vector of tuning parameters. If <code>NULL</code>, automatically a grid
of tuning parameters is created.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_control">control</code></td>
<td>
<p>Function for control arguments, mostly for internal use. See
also <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code id="BTLLasso_+3A_trace">trace</code></td>
<td>
<p>Should the trace of the BTLLasso algorithm be printed?</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>coefs</code></td>
<td>
<p>Matrix containing all (original) coefficients, one row
per tuning parameter, one column per coefficient.</p>
</td></tr> 
<tr><td><code>coefs.repar</code></td>
<td>
<p>Matrix
containing all reparameterized (for symmetric side constraint) coefficients,
one row per tuning parameter, one column per coefficient.</p>
</td></tr>
<tr><td><code>logLik</code></td>
<td>
<p>Vector of log-likelihoods, one value per tuning parameter.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p>List containing design matrix and several additional information like, 
e.g., number and names of covariates.</p>
</td></tr> 
<tr><td><code>Y</code></td>
<td>
<p>Response object.</p>
</td></tr> 
<tr><td><code>penalty</code></td>
<td>
<p>List containing all penalty matrices and some further information on penalties.</p>
</td></tr> 
<tr><td><code>response</code></td>
<td>
<p>Vector containing 0-1 coded
response.</p>
</td></tr> 
<tr><td><code>X</code></td>
<td>
<p>X matrix containing subject-specific covariates.</p>
</td></tr> 
<tr><td><code>Z1</code></td>
<td>
<p>Z1 matrix containing subject-object-specific covariates.</p>
</td></tr> 
<tr><td><code>Z2</code></td>
<td>
<p>Z2 matrix containing (subject)-object-specific covariates.</p>
</td></tr> 
<tr><td><code>lambda</code></td>
<td>
<p>Vector of tuning parameters.</p>
</td></tr> 
<tr><td><code>control</code></td>
<td>
<p>Control argument, specified by <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code>df</code></td>
<td>
<p>Vector containing degrees of freedom for all models along the grid 
of tuning parameters.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>, <code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>, <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>,
<code><a href="#topic+plot.BTLLasso">plot.BTLLasso</a></code>, <code><a href="#topic+paths">paths</a></code>, <code><a href="#topic+print.BTLLasso">print.BTLLasso</a></code>, 
<code><a href="#topic+predict.BTLLasso">predict.BTLLasso</a></code>, <code><a href="stats.html#topic+coef">coef</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='Buli1415'>Bundesliga Data 2014/15 (Buli1415)</h2><span id='topic+Buli1415'></span>

<h3>Description</h3>

<p>Data from the German Bundesliga from the season 2014/15. 
The data contain all 306 matches of the season treated as paired comparisons with 5 (Y5) or 3 (Y3) different 
response categories. Additionally, different match-specific covariates are given as, for example, 
the percentage of ball possession or the total running distance per team and per match.
</p>


<h3>Format</h3>

<p>A list containing data from the German Bundesliga with 306 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y5</dt><dd><p>A response.BTLLasso object with 5 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Y3</dt><dd><p>A response.BTLLasso object with 3 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Z1</dt><dd><p>Matrix containing all team-match-specific covariates
</p>

<ul>
<li><p>Distance: Total amount of km run 
</p>
</li>
<li><p>BallPossession: Percentage of ball possession
</p>
</li>
<li><p>TacklingRate: Rate of won tacklings
</p>
</li>
<li><p>ShotsonGoal: Total number of shots on goal 
</p>
</li>
<li><p>CompletionRate: Percentage of passes reaching teammates 
</p>
</li>
<li><p>FoulsSuffered: Number of fouls suffered 
</p>
</li>
<li><p>Offside: Number of offsides (in attack)
</p>
</li></ul>

</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.kicker.de/">https://www.kicker.de/</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Buli1516">Buli1516</a></code>, <code><a href="#topic+Buli1617">Buli1617</a></code>, <code><a href="#topic+Buli1718">Buli1718</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
op &lt;- par(no.readonly = TRUE)

data(Buli1415)

Y &lt;- Buli1415$Y5
Z1 &lt;- scale(Buli1415$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='Buli1516'>Bundesliga Data 2015/16 (Buli1516)</h2><span id='topic+Buli1516'></span>

<h3>Description</h3>

<p>Data from the German Bundesliga from the season 2015/16. 
The data contain all 306 matches of the season treated as paired comparisons with  5 (Y5) or 3 (Y3) different 
response categories. Additionally, different match-specific covariates are given as, for example, 
the percentage of ball possession or the total running distance per team and per match.
</p>


<h3>Format</h3>

<p>A list containing data from the German Bundesliga with 306 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y5</dt><dd><p>A response.BTLLasso object with 5 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Y3</dt><dd><p>A response.BTLLasso object with 3 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Z1</dt><dd><p>Matrix containing all team-match-specific covariates
</p>

<ul>
<li><p>Distance: Total amount of km run 
</p>
</li>
<li><p>BallPossession: Percentage of ball possession
</p>
</li>
<li><p>TacklingRate: Rate of won tacklings
</p>
</li>
<li><p>ShotsonGoal: Total number of shots on goal 
</p>
</li>
<li><p>CompletionRate: Percentage of passes reaching teammates 
</p>
</li>
<li><p>FoulsSuffered: Number of fouls suffered 
</p>
</li>
<li><p>Offside: Number of offsides (in attack)
</p>
</li></ul>

</dd>
<dt>Z2</dt><dd><p>Matrix containing all the average market values of the teams as a team-specific covariate</p>
</dd> 
</dl>

<p>@references Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>Source</h3>

<p><a href="https://www.kicker.de/">https://www.kicker.de/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Buli1415">Buli1415</a></code>, <code><a href="#topic+Buli1617">Buli1617</a></code>, <code><a href="#topic+Buli1718">Buli1718</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
op &lt;- par(no.readonly = TRUE)

data(Buli1516)

Y &lt;- Buli1516$Y5
Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='Buli1617'>Bundesliga Data 2016/17 (Buli1617)</h2><span id='topic+Buli1617'></span>

<h3>Description</h3>

<p>Data from the German Bundesliga from the season 2016/17. 
The data contain all 306 matches of the season treated as paired comparisons with 5 (Y5) or 3 (Y3) different 
response categories. Additionally, different match-specific covariates are given as, for example, 
the percentage of ball possession or the total running distance per team and per match.
</p>


<h3>Format</h3>

<p>A list containing data from the German Bundesliga with 306 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y5</dt><dd><p>A response.BTLLasso object with 5 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Y3</dt><dd><p>A response.BTLLasso object with 3 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Z1</dt><dd><p>Matrix containing all team-match-specific covariates
</p>

<ul>
<li><p>Distance: Total amount of km run 
</p>
</li>
<li><p>BallPossession: Percentage of ball possession
</p>
</li>
<li><p>TacklingRate: Rate of won tacklings
</p>
</li>
<li><p>ShotsonGoal: Total number of shots on goal 
</p>
</li>
<li><p>CompletionRate: Percentage of passes reaching teammates 
</p>
</li>
<li><p>FoulsSuffered: Number of fouls suffered 
</p>
</li>
<li><p>Offside: Number of offsides (in attack)
</p>
</li>
<li><p>Corners: Number of corners (in attack)
</p>
</li></ul>

</dd>
</dl>

<p>@references Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>Source</h3>

<p><a href="https://www.kicker.de/">https://www.kicker.de/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Buli1415">Buli1415</a></code>, <code><a href="#topic+Buli1516">Buli1516</a></code>, <code><a href="#topic+Buli1718">Buli1718</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
op &lt;- par(no.readonly = TRUE)

data(Buli1617)

Y &lt;- Buli1617$Y5
Z1 &lt;- scale(Buli1617$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='Buli1718'>Bundesliga Data 2017/18 (Buli1718)</h2><span id='topic+Buli1718'></span>

<h3>Description</h3>

<p>Data from the German Bundesliga from the season 2017/18. 
The data contain all 306 matches of the season treated as paired comparisons with 5 (Y5) or 3 (Y3) different 
response categories. Additionally, different match-specific covariates are given as, for example, 
the percentage of ball possession or the total running distance per team and per match.
</p>


<h3>Format</h3>

<p>A list containing data from the German Bundesliga with 306 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y5</dt><dd><p>A response.BTLLasso object with 5 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Y3</dt><dd><p>A response.BTLLasso object with 3 response categories for the Buli1516 data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named team per paired comparison (home team)
</p>
</li>
<li><p>second.object: Vector containing the second-named team per paired comparison (away team)
</p>
</li>
<li><p>subject: Vector containing a match-day identifier per paired comparison
</p>
</li>
<li><p>with.order Vector containing information that each match has to be considered including an order effect.
</p>
</li></ul>
</dd>
<dt>Z1</dt><dd><p>Matrix containing all team-match-specific covariates
</p>

<ul>
<li><p>Distance: Total amount of km run 
</p>
</li>
<li><p>BallPossession: Percentage of ball possession
</p>
</li>
<li><p>TacklingRate: Rate of won tacklings
</p>
</li>
<li><p>ShotsonGoal: Total number of shots on goal 
</p>
</li>
<li><p>CompletionRate: Percentage of passes reaching teammates 
</p>
</li>
<li><p>FoulsSuffered: Number of fouls suffered 
</p>
</li>
<li><p>Offside: Number of offsides (in attack)
</p>
</li>
<li><p>Corners: Number of corners (in attack)
</p>
</li></ul>

</dd>
</dl>

<p>@references Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>Source</h3>

<p><a href="https://www.kicker.de/">https://www.kicker.de/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Buli1415">Buli1415</a></code>, <code><a href="#topic+Buli1516">Buli1516</a></code>, <code><a href="#topic+Buli1617">Buli1617</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
op &lt;- par(no.readonly = TRUE)

data(Buli1718)

Y &lt;- Buli1718$Y5
Z1 &lt;- scale(Buli1718$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='BuliResponse'>Bundesliga Data Response Data (BuliResponse)</h2><span id='topic+BuliResponse'></span>

<h3>Description</h3>

<p>Data from the German Bundesliga from the season 2015/16. The data contain all 
variables from the 306 matches that are necessary to create the respective 
<code>response.BTLLasso</code> object from the data set <code><a href="#topic+Buli1516">Buli1516</a></code>.  The purpose
of the data set is to provide an example how <code>response.BTLLasso</code> objects can be created.
</p>


<h3>Format</h3>

<p>A data set containing all information that is necessary to create a response object
for the Bundesliga data <code>link{Buli1516}</code>
</p>
 
<dl>
<dt>Result</dt><dd><p>Ordinal, 5-categorical results from Bundesliga season 2015/16.</p>
</dd>
<dt>TeamHome</dt><dd><p>Abbreviation of home team.</p>
</dd>
<dt>TeamAway</dt><dd><p>Abbreviation of away team.</p>
</dd>
<dt>Matchday</dt><dd><p>Matchdays from 1 to 34.</p>
</dd>
</dl>

<p>@references Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>Source</h3>

<p><a href="https://www.kicker.de/">https://www.kicker.de/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(BuliResponse)

Y.Buli &lt;- response.BTLLasso(response = BuliResponse$Result, 
                            first.object = BuliResponse$TeamHome,
                            second.object = BuliResponse$TeamAway,
                            subject = BuliResponse$Matchday)

## End(Not run)
</code></pre>

<hr>
<h2 id='ctrl.BTLLasso'>Control function for BTLLasso</h2><span id='topic+ctrl.BTLLasso'></span>

<h3>Description</h3>

<p>Control parameters for different penalty terms and for tuning the fitting algorithm.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ctrl.BTLLasso(
  l.lambda = 30,
  log.lambda = TRUE,
  lambda.min = 0.05,
  adaptive = TRUE,
  scale = TRUE,
  norm = c("L1", "L2"),
  epsilon = 1e-04,
  lambda2 = 1e-04,
  c = 1e-09,
  precision = 3,
  weight.penalties = TRUE,
  include.intercepts = TRUE,
  order.effect = FALSE,
  object.order.effect = FALSE,
  order.center = FALSE,
  name.order = "Order",
  penalize.intercepts = FALSE,
  penalize.X = TRUE,
  penalize.Z2 = FALSE,
  penalize.Z1.absolute = TRUE,
  penalize.Z1.diffs = TRUE,
  penalize.order.effect.absolute = TRUE,
  penalize.order.effect.diffs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ctrl.BTLLasso_+3A_l.lambda">l.lambda</code></td>
<td>
<p>Number of tuning parameters. Applies only if <code>lambda = NULL</code> in the 
main function.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_log.lambda">log.lambda</code></td>
<td>
<p>Should the grid of tuning parameters be created on a logarithmic scale 
rather than equidistant. Applies only if <code>lambda = NULL</code> in the main function.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_lambda.min">lambda.min</code></td>
<td>
<p>Minimal value for tuning parameter. Applies only if <code>lambda = NULL</code> in the 
main function.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_adaptive">adaptive</code></td>
<td>
<p>Should adaptive lasso be used? Default is TRUE.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_scale">scale</code></td>
<td>
<p>Should the covariates be scaled so that they are on comparable scales? Default is TRUE.
Variables will be properly scaled AND centered. Please note that results will refer to scaled covariates.
If <code>adaptive = TRUE</code> scaling is not necessary to keep penalties comparable.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_norm">norm</code></td>
<td>
<p>Specifies the norm used in the penalty term. Currently, only
'L1' and 'L2' are possible. Default is to 'L1', only 'L1' allows for
clustering and variable selection.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_epsilon">epsilon</code></td>
<td>
<p>Threshold value for convergence of the algorithm.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_lambda2">lambda2</code></td>
<td>
<p>Tuning parameter for ridge penalty on all coefficients.
Should be small, only used to stabilize results.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_c">c</code></td>
<td>
<p>Internal parameter for the quadratic approximation of the L1
penalty. Should be sufficiently small.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_precision">precision</code></td>
<td>
<p>Precision for final parameter estimates, specifies number of decimals.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_weight.penalties">weight.penalties</code></td>
<td>
<p>Should the penalties across the different model components 
(i.e. intercepts, order effects, X, Z1, Z2) be weighted according to the number of
penalties included? Default is <code>TRUE</code> to minimize the risk of selection bias
across different model components.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_include.intercepts">include.intercepts</code></td>
<td>
<p>Should intercepts be included in the model?</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_order.effect">order.effect</code></td>
<td>
<p>Should a global order effect (corresponding to home effect
in sports applications) be included in the model?</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_object.order.effect">object.order.effect</code></td>
<td>
<p>Should object-specific order effects (corresponding to home effects
in sports applications) be included in the model?</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_order.center">order.center</code></td>
<td>
<p>Should (in case of object-specific order effects) the order effects be centered
in the design matrix? Centering is equivalent to the coding scheme of effect coding instead of 
dummy coding.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_name.order">name.order</code></td>
<td>
<p>How should the order effect(s) be called in plots or prints.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.intercepts">penalize.intercepts</code></td>
<td>
<p>Should intercepts be penalized? If <code>TRUE</code>,
all pairwise differences between intercepts are penalized.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.x">penalize.X</code></td>
<td>
<p>Should effects from X matrix be penalized? If <code>TRUE</code>,
all pairwise differences corresponding to one covariate are penalized. Can also be used with
a character vector as input. Then, the character vector contains the names of the variables
from X whose parameters should be penalized.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.z2">penalize.Z2</code></td>
<td>
<p>Should absolute values of effects from Z2 matrix be
penalized? Can also be used with
a character vector as input. Then, the character vector contains the names of the variables
from Z2 whose parameters should be penalized.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.z1.absolute">penalize.Z1.absolute</code></td>
<td>
<p>Should absolute values of effects from Z1 matrix
be penalized? Can also be used with
a character vector as input. Then, the character vector contains the names of the variables
from Z1 whose parameters should be penalized.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.z1.diffs">penalize.Z1.diffs</code></td>
<td>
<p>Should differences of effects from Z1 matrix be
penalized? If <code>TRUE</code>, all pairwise differences corresponding to one
covariate are penalized. Can also be used with
a character vector as input. Then, the character vector contains the names of the variables
from Z1 whose parameters should be penalized.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.order.effect.absolute">penalize.order.effect.absolute</code></td>
<td>
<p>Should absolute values of order effect(s) be penalized?
Only relevant if either <code>object.order.effect = TRUE</code> or <code>order.effect = TRUE</code>.</p>
</td></tr>
<tr><td><code id="ctrl.BTLLasso_+3A_penalize.order.effect.diffs">penalize.order.effect.diffs</code></td>
<td>
<p>Should differences of order effects be
penalized? If <code>TRUE</code>, all pairwise differences are penalized. Only relevant if 
<code>object.order.effect = TRUE</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='cv.BTLLasso'>Cross-validation function for BTLLasso</h2><span id='topic+cv.BTLLasso'></span>

<h3>Description</h3>

<p>Performs cross-validation of BTLLasso, including the BTLLasso algorithm for
the whole data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cv.BTLLasso(
  Y,
  X = NULL,
  Z1 = NULL,
  Z2 = NULL,
  folds = 10,
  lambda = NULL,
  control = ctrl.BTLLasso(),
  cores = folds,
  trace = TRUE,
  trace.cv = TRUE,
  cv.crit = c("RPS", "Deviance")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cv.BTLLasso_+3A_y">Y</code></td>
<td>
<p>A <code>response.BTLLasso</code> object created by
<code><a href="#topic+response.BTLLasso">response.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_x">X</code></td>
<td>
<p>Matrix containing all <b>subject-specific covariates</b> that are
to be included with <b>object-specific effects</b>. One row represents one
subject, one column represents one covariate. X has to be standardized.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_z1">Z1</code></td>
<td>
<p>Matrix containing all <b>object-subject-specific covariates</b>
that are to be included with <b>object-specific effects</b>. One row
represents one subject, one column represents one combination between
covariate and object. Column names have to follow the scheme
'firstvar.object1',...,'firstvar.objectm',...,'lastvar.objectm'. The object
names 'object1',...,'objectm' have to be identical to the object names used
in the <code>response.BTLLasso</code> object <code>Y</code>. The variable names and the
object names have to be separated by '.'.  The rownames of the matrix',
Z.name, 'have to be equal to the subjects specified in the response object.
Z1 has to be standardized.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_z2">Z2</code></td>
<td>
<p>Matrix containing all <b>object-subject-specific covariates or
object-specific covariates</b> that are to be included with <b>global
effects</b>. One row represents one subject, one column represents one
combination between covariate and object. Column names have to follow the
scheme 'firstvar.object1',...,'firstvar.objectm',...,'lastvar.objectm'. The
object names 'object1',...,'objectm' have to be identical to the object
names used in the <code>response.BTLLasso</code> object <code>Y</code>. The variable
names and the object names have to be separated by '.'.  The rownames of the
matrix', Z.name, 'have to be equal to the subjects specified in the response
object. Z2 has to be standardized.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_folds">folds</code></td>
<td>
<p>Number of folds for the crossvalidation. Default is 10.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_lambda">lambda</code></td>
<td>
<p>Vector of tuning parameters. If <code>NULL</code>, automatically a grid
of tuning parameters is created.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_control">control</code></td>
<td>
<p>Function for control arguments, mostly for internal use. See
also <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_cores">cores</code></td>
<td>
<p>Number of cores used for (parallelized) cross-validation. By
default, equal to the number of folds.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_trace">trace</code></td>
<td>
<p>Should the trace of the BTLLasso algorithm be printed?</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_trace.cv">trace.cv</code></td>
<td>
<p>Should the trace fo the cross-validation be printed? If
parallelized, the trace is not working on Windows machines.</p>
</td></tr>
<tr><td><code id="cv.BTLLasso_+3A_cv.crit">cv.crit</code></td>
<td>
<p>Which criterion should be used to evaluate cross-validation. Choice is 
between Ranked probability score and deviance. Only <code>RPS</code> considers the ordinal
structure of the response.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cross-validation can be performed parallel, default is 10-fold 
cross-validation on 10 cores. Output is a cv.BTLLasso object which can then be
used for bootstrap intervalls using <code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>coefs</code></td>
<td>
<p>Matrix containing all (original) coefficients, one row
per tuning parameter, one column per coefficient.</p>
</td></tr> 
<tr><td><code>coefs.repar</code></td>
<td>
<p>Matrix
containing all reparameterized (for symmetric side constraint) coefficients,
one row per tuning parameter, one column per coefficient.</p>
</td></tr>
<tr><td><code>logLik</code></td>
<td>
<p>Vector of log-likelihoods, one value per tuning parameter.</p>
</td></tr>
<tr><td><code>design</code></td>
<td>
<p>List containing design matrix and several additional information like, 
e.g., number and names of covariates.</p>
</td></tr> 
<tr><td><code>Y</code></td>
<td>
<p>Response object.</p>
</td></tr> 
<tr><td><code>penalty</code></td>
<td>
<p>List containing all penalty matrices and some further information on penalties</p>
</td></tr> 
<tr><td><code>response</code></td>
<td>
<p>Vector containing 0-1 coded
response.</p>
</td></tr> 
<tr><td><code>X</code></td>
<td>
<p>X matrix containing subject-specific covariates.</p>
</td></tr> 
<tr><td><code>Z1</code></td>
<td>
<p>Z1 matrix containing subject-object-specific covariates.</p>
</td></tr> 
<tr><td><code>Z2</code></td>
<td>
<p>Z2 matrix containing (subject)-object-specific covariates.</p>
</td></tr> 
<tr><td><code>lambda</code></td>
<td>
<p>Vector of tuning parameters.</p>
</td></tr> 
<tr><td><code>control</code></td>
<td>
<p>Control argument, specified by <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>.</p>
</td></tr>
<tr><td><code>criterion</code></td>
<td>
<p>Vector containing values of the chosen cross-validation criterion, 
one value per tuning parameter.</p>
</td></tr>
<tr><td><code>folds</code></td>
<td>
<p>Number of folds in cross validation.</p>
</td></tr> 
<tr><td><code>cv.crit</code></td>
<td>
<p>Cross-validation criterion, either <code>RPS</code> or <code>Deviance</code>.</p>
</td></tr>
<tr><td><code>df</code></td>
<td>
<p>Vector containing degrees of freedom for all models along the grid 
of tuning parameters.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>, <code><a href="#topic+ctrl.BTLLasso">ctrl.BTLLasso</a></code>,
<code><a href="#topic+plot.BTLLasso">plot.BTLLasso</a></code>, <code><a href="#topic+paths">paths</a></code>, <code><a href="#topic+print.cv.BTLLasso">print.cv.BTLLasso</a></code>, 
<code><a href="#topic+predict.BTLLasso">predict.BTLLasso</a></code>, <code><a href="stats.html#topic+coef">coef</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='GLES'>German Longitudinal Election Study (GLES)</h2><span id='topic+GLES'></span>

<h3>Description</h3>

<p>Data from the German Longitudinal Election Study (GLES), see Rattinger et
al. (2014). The GLES is a long-term study of the German electoral process.
It collects pre- and post-election data for several federal elections, the
data used here originate from the pre-election study for 2013.
</p>


<h3>Format</h3>

<p>A list containing data from the German Longitudinal Election Study with 2003 
(partly incomplete) observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y</dt><dd><p>A response.BTLLasso object for the GLES data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named party per paired comparison
</p>
</li>
<li><p>second.object: Vector containing the second-named party per paired comparison
</p>
</li>
<li><p>subject: Vector containing a person identifier per paired comparison
</p>
</li>
<li><p>with.order Automatically generated vector containing information on order effect. Irrelevant, because 
no order effect needs to be included in the analysis of GLES data. 
</p>
</li></ul>
</dd>
<dt>X</dt><dd><p>Matrix containing all eight person-specific covariates
</p>

<ul>
<li><p>Age: Age in years 
</p>
</li>
<li><p>Gender (0: male, 1: female)
</p>
</li>
<li><p>EastWest (0: West Germany, 1: East Germany)
</p>
</li>
<li><p>PersEcon: Personal economic situation, 1: good or very good,
0: else 
</p>
</li>
<li><p>Abitur: School leaving certificate, 1: Abitur/A
levels, 0: else 
</p>
</li>
<li><p>Unemployment: 1: currently unemployed, 0:
else 
</p>
</li>
<li><p>Church: Frequency of attendence in a
church/synagogue/mosque/..., 1: at least once a month, 0: else
</p>
</li>
<li><p>Migration: Are you a migrant / not German since birth? 1: yes,
0: no 
</p>
</li></ul>

</dd>
<dt>Z1</dt><dd><p>Matrix containing all four person-party-specific covariates
</p>

<ul>
<li><p>Climate: Self-perceived distance of each person to all five parties with respect to 
ones attitude towards climate change.
</p>
</li>
<li><p>SocioEcon: Self-perceived distance of each person to all five parties with respect to 
ones attitude towards socio-economic issues.
</p>
</li>
<li><p>Immigration: Self-perceived distance of each person to all five parties with respect to 
ones attitude towards immigration.
</p>
</li></ul>

</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.gesis.org/en/gles/about-gles">https://www.gesis.org/en/gles/about-gles</a>
</p>


<h3>References</h3>

<p>Rattinger, H., S. Rossteutscher, R. Schmitt-Beck, B. Wessels,
and C. Wolf (2014): Pre-election cross section (GLES 2013). <em>GESIS Data
Archive, Cologne ZA5700 Data file Version 2.0.0.</em>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
op &lt;- par(no.readonly = TRUE)

data(GLES)
Y &lt;- GLES$Y
X &lt;- scale(GLES$X, scale = FALSE)

subs &lt;- c("(in years)","female (1); male (0)","East Germany (1); West Germany (0)",
          "(very) good (1); else (0)", "Abitur/A levels (1); else (0)", 
          "currently unemployed (1); else (0)","at least once a month (1); else (0)",
          "yes (1); no (0)")

set.seed(5)
m.gles &lt;- cv.BTLLasso(Y = Y, X = X, control = ctrl.BTLLasso(l.lambda = 50))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles, subs.X = subs)

par(op)

## End(Not run)

</code></pre>

<hr>
<h2 id='GLESsmall'>Subset of the GLES data set with 200 observations and 4 covariates.</h2><span id='topic+GLESsmall'></span>

<h3>Description</h3>

<p>This is a subset of the <code><a href="#topic+GLES">GLES</a></code> data set from the German
Longitudinal Election Study (GLES), see Rattinger et al. (2014). The subset contains 
only 200 of the 2003 observations and only  a small part of the covariates. The GLES is
a long-term study of the German electoral process. It collects pre- and
post-election data for several federal elections, the data used here
originate from the pre-election study for 2013.
</p>


<h3>Format</h3>

<p>A list containing data from the German Longitudinal Election Study with 200 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y</dt><dd><p>A response.BTLLasso object for the GLES data including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named party per paired comparison
</p>
</li>
<li><p>second.object: Vector containing the second-named party per paired comparison
</p>
</li>
<li><p>subject: Vector containing a person identifier per paired comparison
</p>
</li>
<li><p>with.order Automatically generated vector containing information on order effect. Irrelevant, because 
no order effect needs to be included in the analysis of GLES data. 
</p>
</li></ul>
</dd>
<dt>X</dt><dd><p>Matrix containing all eight person-specific covariates
</p>

<ul>
<li><p>Age: Age in years 
</p>
</li>
<li><p>Gender (0: male, 1: female)
</p>
</li></ul>

</dd>
<dt>Z1</dt><dd><p>Matrix containing all four person-party-specific covariates
</p>

<ul>
<li><p>Climate: Self-perceived distance of each person to all five parties with respect to 
ones attitude towards climate change.
</p>
</li>
<li><p>Immigration: Self-perceived distance of each person to all five parties with respect to 
ones attitude towards immigration.
</p>
</li></ul>

</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.gesis.org/en/gles/about-gles">https://www.gesis.org/en/gles/about-gles</a>
</p>


<h3>References</h3>

<p>Rattinger, H., S. Rossteutscher, R. Schmitt-Beck, B. Wessels,
and C. Wolf (2014): Pre-election cross section (GLES 2013). <em>GESIS Data
Archive, Cologne ZA5700 Data file Version 2.0.0.</em>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, to appear
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>


<h3>See Also</h3>

<p><code><a href="#topic+GLES">GLES</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')

par(op)

## End(Not run)

</code></pre>

<hr>
<h2 id='paths'>Plot covariate paths for BTLLasso</h2><span id='topic+paths'></span>

<h3>Description</h3>

<p>Plots paths for every covariate of a BTLLasso object or a cv.BTLLasso
object. In contrast to <code><a href="#topic+plot.BTLLasso">plot.BTLLasso</a></code>, only one plot is created,
every covariate is illustrated by one path. For <code>cv.BTLLasso</code> objects, the
optimal model according to the cross-validation is marked by a vertical
dashed line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paths(model, y.axis = c("penalty", "L2"), x.axis = c("loglambda", "lambda"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="paths_+3A_model">model</code></td>
<td>
<p><code>BTLLasso</code> or <code>cv.BTLLasso</code> object</p>
</td></tr>
<tr><td><code id="paths_+3A_y.axis">y.axis</code></td>
<td>
<p>Two possible values for the y-axis. Variables can either be plotted
with regard to their contribution to the total penalty term (<code>y.axis='penalty'</code>) or
with regard to the $L_2$ norm of the corresponding parameter vector (<code>y.axis='L2'</code>).</p>
</td></tr>
<tr><td><code id="paths_+3A_x.axis">x.axis</code></td>
<td>
<p>Should the paths be plotted against log(lambda+1) or against lambda?'</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>,
<code><a href="#topic+plot.BTLLasso">plot.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.boot.BTLLasso'>Plot bootstrap intervals for BTLLasso</h2><span id='topic+plot.boot.BTLLasso'></span>

<h3>Description</h3>

<p>Plots bootstrap intervals for every single coefficient based on bootstrap estimates 
calculated by <code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>. Bootstrap
intervals are separated by covariates, every covariate is plotted
separately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'boot.BTLLasso'
plot(
  x,
  quantiles = c(0.025, 0.975),
  plots_per_page = 1,
  ask_new = TRUE,
  rescale = FALSE,
  which = "all",
  include.zero = TRUE,
  rows = NULL,
  subs.X = NULL,
  subs.Z1 = NULL,
  main.Z2 = "Obj-spec. Covariates",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.boot.BTLLasso_+3A_x">x</code></td>
<td>
<p>boot.BTLLasso object</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_quantiles">quantiles</code></td>
<td>
<p>Which empirical quantiles of the bootstrap estimates should be plotted?</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_plots_per_page">plots_per_page</code></td>
<td>
<p>Number of plots per page, internally specified by <code>par(mfrow=...)</code>.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_ask_new">ask_new</code></td>
<td>
<p>If TRUE, the user is asked before each plot.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_rescale">rescale</code></td>
<td>
<p>Should the parameter estimates be rescaled for plotting? Only 
applies if <code>scale = TRUE</code> was specified in <code>cv.BTLLasso</code>.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_which">which</code></td>
<td>
<p>Integer vector to specify which parameters/variables to plot.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_include.zero">include.zero</code></td>
<td>
<p>Should all plots contain zero?</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_rows">rows</code></td>
<td>
<p>Optional argument for the number of rows in the plot. 
Only applies if <code>plots_per_page&gt;1</code>.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_subs.x">subs.X</code></td>
<td>
<p>Optional vector of subtitles for variables in <code>X</code>. Can be used
to note the encoding of the single covariates, especially for dummy
variables.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_subs.z1">subs.Z1</code></td>
<td>
<p>Optional vector of subtitles for variables in <code>Z1</code>. Can be used
to note the encoding of the single covariates, especially for dummy
variables.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_main.z2">main.Z2</code></td>
<td>
<p>Optional character containg main for plot
containing intervals for Z2 parameters.</p>
</td></tr>
<tr><td><code id="plot.boot.BTLLasso_+3A_...">...</code></td>
<td>
<p>other parameters to be passed through to plot function.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>, <code><a href="#topic+BTLLasso">BTLLasso</a></code>,
<code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.BTLLasso'>Plot parameter paths for BTLLasso</h2><span id='topic+plot.BTLLasso'></span>

<h3>Description</h3>

<p>Plots single paths for every parameter of a <code>BTLLasso</code> object or a <code>cv.BTLLasso</code>
object. In contrast, to <code><a href="#topic+paths">paths</a></code>, one plot per covariate is
created, every single parameter is illustrated by one path. For <code>cv.BTLLasso</code>
objects, the optimal model according to the cross-validation is marked by a
vertical dashed line.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'BTLLasso'
plot(
  x,
  plots_per_page = 1,
  ask_new = TRUE,
  rescale = FALSE,
  which = "all",
  equal.ranges = FALSE,
  x.axis = c("loglambda", "lambda"),
  rows = NULL,
  subs.X = NULL,
  subs.Z1 = NULL,
  main.Z2 = "Obj-spec. Covariates",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.BTLLasso_+3A_x">x</code></td>
<td>
<p>BTLLasso or cv.BTLLasso object</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_plots_per_page">plots_per_page</code></td>
<td>
<p>Number of plots per page, internally specified by <code>par(mfrow=...)</code>.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_ask_new">ask_new</code></td>
<td>
<p>If TRUE, the user is asked before each plot.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_rescale">rescale</code></td>
<td>
<p>Should the parameter estimates be rescaled for plotting? Only 
applies if <code>scale = TRUE</code> was specified in <code>BTLLasso</code> or <code>cv.BTLLasso</code>.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_which">which</code></td>
<td>
<p>Integer vector to specify which parameters/variables to plot.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_equal.ranges">equal.ranges</code></td>
<td>
<p>Should all single plots (for different covariates) have
equal ranges on the y-axes. FALSE by default.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_x.axis">x.axis</code></td>
<td>
<p>Should the paths be plotted against log(lambda+1) or against lambda?</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_rows">rows</code></td>
<td>
<p>Optional argument for the number of rows in the plot. 
Only applies if <code>plots_per_page&gt;1</code>.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_subs.x">subs.X</code></td>
<td>
<p>Optional vector of subtitles for variables in <code>X</code>. Can be used
to note the encoding of the single covariates, especially for dummy
variables.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_subs.z1">subs.Z1</code></td>
<td>
<p>Optional vector of subtitles for variables in <code>Z1</code>. Can be used
to note the encoding of the single covariates, especially for dummy
variables.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_main.z2">main.Z2</code></td>
<td>
<p>Optional character containg main for plot
containing intervals for Z2 parameters.</p>
</td></tr>
<tr><td><code id="plot.BTLLasso_+3A_...">...</code></td>
<td>
<p>Further plot arguments.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>,
<code><a href="#topic+paths">paths</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='predict.BTLLasso'>Predict function for BTLLasso</h2><span id='topic+predict.BTLLasso'></span>

<h3>Description</h3>

<p>Predict function for a <code>BTLLasso</code> object or a <code>cv.BTLLasso</code>
object. Predictions can be linear predictors, probabilities or the values 
of the latent traits for both competitors in the paired comparisons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'BTLLasso'
predict(object, newdata = list(), type = c("link", "response", "trait"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predict.BTLLasso_+3A_object">object</code></td>
<td>
<p><code>BTLLasso</code> or <code>cv.BTLLasso</code> object</p>
</td></tr>
<tr><td><code id="predict.BTLLasso_+3A_newdata">newdata</code></td>
<td>
<p>List possibly containing slots Y, X, Z1 and Z2 to use new data for prediction.</p>
</td></tr>
<tr><td><code id="predict.BTLLasso_+3A_type">type</code></td>
<td>
<p>Type &quot;link&quot; gives the linear predictors for separate categories, 
type &quot;response&quot; gives the respective probabilities. Type &quot;trait&quot; gives the estimated latent traits
of both competitors/objects in the paired comparisons.</p>
</td></tr>
<tr><td><code id="predict.BTLLasso_+3A_...">...</code></td>
<td>
<p>Further predict arguments.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Results are lists of matrices with prediction for every single tuning parameter 
for <code>BTLLasso</code> objects
and a single matrix for <code>cv.BTLLasso</code> objects.
</p>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='print.boot.BTLLasso'>Print function for boot.BTLLasso objects</h2><span id='topic+print.boot.BTLLasso'></span>

<h3>Description</h3>

<p>Prints the most important output of <code>boot.BTLLasso</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'boot.BTLLasso'
print(x, quantiles = c(0.025, 0.975), rescale = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.boot.BTLLasso_+3A_x">x</code></td>
<td>
<p><code>boot.BTLLasso</code> object</p>
</td></tr>
<tr><td><code id="print.boot.BTLLasso_+3A_quantiles">quantiles</code></td>
<td>
<p>Which empirical quantiles of the bootstrap estimates should be printed?</p>
</td></tr>
<tr><td><code id="print.boot.BTLLasso_+3A_rescale">rescale</code></td>
<td>
<p>Should the parameter estimates be rescaled for plotting? Only 
applies if <code>scale = TRUE</code> was specified in <code>BTLLasso</code> or <code>cv.BTLLasso</code>.</p>
</td></tr>
<tr><td><code id="print.boot.BTLLasso_+3A_...">...</code></td>
<td>
<p>possible further arguments for print command</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+boot.BTLLasso">boot.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='print.BTLLasso'>Print function for BTLLasso objects</h2><span id='topic+print.BTLLasso'></span>

<h3>Description</h3>

<p>Prints the most important output of <code>BTLLasso</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'BTLLasso'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.BTLLasso_+3A_x">x</code></td>
<td>
<p><code>BTLLasso</code> object</p>
</td></tr>
<tr><td><code id="print.BTLLasso_+3A_...">...</code></td>
<td>
<p>possible further arguments for print command</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='print.cv.BTLLasso'>Print function for cv.BTLLasso objects</h2><span id='topic+print.cv.BTLLasso'></span>

<h3>Description</h3>

<p>Prints the most important output of <code>cv.BTLLasso</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cv.BTLLasso'
print(x, rescale = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.cv.BTLLasso_+3A_x">x</code></td>
<td>
<p><code>cv.BTLLasso</code> object</p>
</td></tr>
<tr><td><code id="print.cv.BTLLasso_+3A_rescale">rescale</code></td>
<td>
<p>Should the parameter estimates be rescaled for plotting? Only 
applies if <code>scale = TRUE</code> was specified in <code>BTLLasso</code> or <code>cv.BTLLasso</code>.</p>
</td></tr>
<tr><td><code id="print.cv.BTLLasso_+3A_...">...</code></td>
<td>
<p>possible further arguments for print command</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

##############################
##### Example with simulated data set containing X, Z1 and Z2
##############################
data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)


##############################
##### Example with small version from GLES data set
##############################
data(GLESsmall)

## extract data and center covariates for better interpretability
Y &lt;- GLESsmall$Y
X &lt;- scale(GLESsmall$X, scale = FALSE)
Z1 &lt;- scale(GLESsmall$Z1, scale = FALSE)

## vector of subtitles, containing the coding of the X covariates
subs.X &lt;- c('', 'female (1); male (0)')

## Cross-validate BTLLasso model
m.gles.cv &lt;- cv.BTLLasso(Y = Y, X = X, Z1 = Z1)
m.gles.cv

coef(m.gles.cv)
logLik(m.gles.cv)

head(predict(m.gles.cv, type="response"))
head(predict(m.gles.cv, type="trait"))

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.gles.cv, subs.X = subs.X, plots_per_page = 4, which = 2:5)
paths(m.gles.cv, y.axis = 'L2')


##############################
##### Example with Bundesliga data set
##############################
data(Buli1516)

Y &lt;- Buli1516$Y5

Z1 &lt;- scale(Buli1516$Z1, scale = FALSE)

ctrl.buli &lt;- ctrl.BTLLasso(object.order.effect = TRUE, 
                           name.order = "Home", 
                           penalize.order.effect.diffs = TRUE, 
                           penalize.order.effect.absolute = FALSE,
                           order.center = TRUE, lambda2 = 1e-2)

set.seed(1860)
m.buli &lt;- cv.BTLLasso(Y = Y, Z1 = Z1, control = ctrl.buli)
m.buli

par(xpd = TRUE, mar = c(5,4,4,6))
plot(m.buli)


##############################
##### Example with Topmodel data set
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)
plot(m.models, plots_per_page = 6)

par(op)

## End(Not run)
</code></pre>

<hr>
<h2 id='response.BTLLasso'>Create response object for BTLLasso</h2><span id='topic+response.BTLLasso'></span>

<h3>Description</h3>

<p>Create a response object for <code>BTLLasso</code> and <code>cv.BTLLasso</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>response.BTLLasso(
  response,
  first.object = NULL,
  second.object = NULL,
  subject = NULL,
  with.order = rep(TRUE, length(response))
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="response.BTLLasso_+3A_response">response</code></td>
<td>
<p>Vector containing results (binary or ordinal) of single paired
comparisons. Alternatively, also a  <code><a href="psychotools.html#topic+paircomp">paircomp</a></code> object as defined 
in the package <code>psychotools</code> could be used. In this case, none of the further 
arguments are needed.</p>
</td></tr>
<tr><td><code id="response.BTLLasso_+3A_first.object">first.object</code></td>
<td>
<p>Vector (character or factor, same length as response) indicating the first
object of the respective paired comparison from response.</p>
</td></tr>
<tr><td><code id="response.BTLLasso_+3A_second.object">second.object</code></td>
<td>
<p>Vector (character or factor, same length as response) indicating the second
object of the respective paired comparison from response.</p>
</td></tr>
<tr><td><code id="response.BTLLasso_+3A_subject">subject</code></td>
<td>
<p>Vector (character, same length as response) indicating the subject that
generated the respective paired comparison from response.</p>
</td></tr>
<tr><td><code id="response.BTLLasso_+3A_with.order">with.order</code></td>
<td>
<p>Boolean vector containing indicators for each paired comparison if an order effect was 
present. By default, an order effect is assumed for each comparison. This option is relevant whenever 
only some of the paired comparisons had an order effect and others did not, for example if some matches are
played on neutral ground. This option is only effective if either <code>order.effect = TRUE</code> or <code>object.order.effect = TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Object of class <code>response.BTLLasso</code>
</p>


<h3>Author(s)</h3>

<p>Gunther Schauberger<br /> <a href="mailto:gunther.schauberger@tum.de">gunther.schauberger@tum.de</a>
</p>


<h3>References</h3>

<p>Schauberger, Gunther and Tutz, Gerhard (2019): BTLLasso - A Common Framework and Software 
Package for the Inclusion  and Selection of Covariates in Bradley-Terry Models, <em>Journal of 
Statistical Software</em>, 88(9), 1-29, <a href="https://doi.org/10.18637/jss.v088.i09">doi:10.18637/jss.v088.i09</a>
</p>
<p>Schauberger, Gunther and Tutz, Gerhard (2017): Subject-specific modelling 
of paired comparison data: A lasso-type penalty approach, <em>Statistical Modelling</em>,
17(3), 223 - 243
</p>
<p>Schauberger, Gunther, Groll Andreas and Tutz, Gerhard (2018): 
Analysis of the importance of on-field covariates in the German Bundesliga, 
<em>Journal of Applied Statistics</em>, 45(9), 1561 - 1578
</p>


<h3>See Also</h3>

<p><code><a href="#topic+BTLLasso">BTLLasso</a></code>, <code><a href="#topic+cv.BTLLasso">cv.BTLLasso</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
##############################
##### Example how response object for Bundesliga data Buli1516 was created
##############################

data(BuliResponse)

Y.Buli &lt;- response.BTLLasso(response = BuliResponse$Result, 
                            first.object = BuliResponse$TeamHome,
                            second.object = BuliResponse$TeamAway,
                            subject = BuliResponse$Matchday)


##############################
##### Example to create response object from paircomp object
##############################
data("Topmodel2007", package = "psychotree")

Y.models &lt;- response.BTLLasso(Topmodel2007$preference)
X.models &lt;- scale(model.matrix(preference~., data = Topmodel2007)[,-1])
rownames(X.models) &lt;- paste0("Subject",1:nrow(X.models))
colnames(X.models) &lt;- c("Gender","Age","KnowShow","WatchShow","WatchFinal")

set.seed(5)
m.models &lt;- cv.BTLLasso(Y = Y.models, X = X.models)

## End(Not run)
</code></pre>

<hr>
<h2 id='SimData'>Simulated data set for illustration</h2><span id='topic+SimData'></span>

<h3>Description</h3>

<p>This data set is a simulated data set including all possible types of covariates (X, Z1 and Z2)
and is intended to serve for illustration purpose. The data set contains paired comparisons between
four objects with five different response categories from 200 subjects.
</p>


<h3>Format</h3>

<p>A list containing  simulated data for 200 observations. 
The list contains both information on the response (paired comparisons) and different covariates.
</p>
 
<dl>
<dt>Y</dt><dd><p>A response.BTLLasso object with simulated responses including
</p>

<ul>
<li><p>response: Ordinal paired comparison response vector 
</p>
</li>
<li><p>first.object: Vector containing the first-named object per paired comparison
</p>
</li>
<li><p>second.object: Vector containing the second-named object per paired comparison
</p>
</li>
<li><p>subject: Vector containing a subject identifier per paired comparison
</p>
</li>
<li><p>with.order Automatically generated vector containing information on order effect. Each paired 
comparison is associated with an order effect.
</p>
</li></ul>
</dd>
<dt>X</dt><dd><p>Matrix containing both subject-specific covariates
</p>

<ul>
<li><p>X_var1 
</p>
</li>
<li><p>X_var2
</p>
</li></ul>

</dd>
<dt>Z1</dt><dd><p>Matrix containing both subject-object-specific covariates
</p>

<ul>
<li><p>Z1_var1
</p>
</li>
<li><p>Z1_var2
</p>
</li></ul>

</dd>
<dt>Z2</dt><dd><p>Matrix containing both object-specific covariates
</p>

<ul>
<li><p>Z2_var1
</p>
</li>
<li><p>Z2_var2
</p>
</li></ul>

</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
op &lt;- par(no.readonly = TRUE)

data(SimData)

## Specify control argument
## -&gt; allow for object-specific order effects and penalize intercepts
ctrl &lt;- ctrl.BTLLasso(penalize.intercepts = TRUE, object.order.effect = TRUE,
                      penalize.order.effect.diffs = TRUE)

## Simple BTLLasso model for tuning parameters lambda
m.sim &lt;- BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                  Z2 = SimData$Z2, control = ctrl)
m.sim

par(xpd = TRUE)
plot(m.sim)


## Cross-validate BTLLasso model for tuning parameters lambda
set.seed(1860)
m.sim.cv &lt;- cv.BTLLasso(Y = SimData$Y, X = SimData$X, Z1 = SimData$Z1,
                        Z2 = SimData$Z2, control = ctrl)
m.sim.cv
coef(m.sim.cv)
logLik(m.sim.cv)

head(predict(m.sim.cv, type="response"))
head(predict(m.sim.cv, type="trait"))

plot(m.sim.cv, plots_per_page = 4)


## Example for bootstrap intervals for illustration only
## Don't calculate bootstrap intervals with B = 20!!!!
set.seed(1860)
m.sim.boot &lt;- boot.BTLLasso(m.sim.cv, B = 20, cores = 20)
m.sim.boot
plot(m.sim.boot, plots_per_page = 4)

par(op)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
