<!DOCTYPE html><html lang="en"><head><title>Help for package aihuman</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {aihuman}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aihuman-package'><p>Experimental Evaluation of Algorithm-Assisted Human Decision-Making</p></a></li>
<li><a href='#A_llama'><p>Llama3 Recommendations (internal)</p></a></li>
<li><a href='#AiEvalmcmc'><p>Gibbs sampler for the main analysis</p></a></li>
<li><a href='#APCEsummary'><p>Summary of APCE</p></a></li>
<li><a href='#APCEsummaryipw'><p>Summary of APCE for frequentist analysis</p></a></li>
<li><a href='#BootstrapAPCEipw'><p>Bootstrap for estimating variance of APCE</p></a></li>
<li><a href='#BootstrapAPCEipwRE'><p>Bootstrap for estimating variance of APCE with random effects</p></a></li>
<li><a href='#BootstrapAPCEipwREparallel'><p>Bootstrap for estimating variance of APCE with random effects</p></a></li>
<li><a href='#CalAPCE'><p>Calculate APCE</p></a></li>
<li><a href='#CalAPCEipw'><p>Compute APCE using frequentist analysis</p></a></li>
<li><a href='#CalAPCEipwRE'><p>Compute APCE using frequentist analysis with random effects</p></a></li>
<li><a href='#CalAPCEparallel'><p>Calculate APCE using parallel computing</p></a></li>
<li><a href='#CalDelta'><p>Calculate the delta given the principal stratum</p></a></li>
<li><a href='#CalDIM'><p>Calculate diff-in-means estimates</p></a></li>
<li><a href='#CalDIMsubgroup'><p>Calculate diff-in-means estimates</p></a></li>
<li><a href='#CalFairness'><p>Calculate the principal fairness</p></a></li>
<li><a href='#CalOptimalDecision'><p>Calculate optimal decision &amp; utility</p></a></li>
<li><a href='#CalPS'><p>Calculate the proportion of principal strata (R)</p></a></li>
<li><a href='#compute_bounds_aipw'><p>Compute Risk (AI v. Human)</p></a></li>
<li><a href='#compute_nuisance_functions'><p>Fit outcome/decision and propensity score models</p></a></li>
<li><a href='#compute_nuisance_functions_ai'><p>Fit outcome/decision and propensity score models conditioning on the AI recommendation</p></a></li>
<li><a href='#compute_stats'><p>Compute Risk (Human+AI v. Human)</p></a></li>
<li><a href='#compute_stats_agreement'><p>Agreement of Human and AI Decision Makers</p></a></li>
<li><a href='#compute_stats_aipw'><p>Compute Risk (Human+AI v. Human)</p></a></li>
<li><a href='#compute_stats_subgroup'><p>Compute Risk (Human+AI v. Human) for a Subgroup Defined by AI Recommendation</p></a></li>
<li><a href='#crossfit'><p>Crossfitting for nuisance functions</p></a></li>
<li><a href='#FTAdata'><p>Interim Dane data with failure to appear (FTA) as an outcome</p></a></li>
<li><a href='#g_legend'><p>Pulling ggplot legend</p></a></li>
<li><a href='#HearingDate'><p>Interim court event hearing date</p></a></li>
<li><a href='#hearingdate_synth'><p>Synthetic court event hearing date</p></a></li>
<li><a href='#nca_follow_policy'><p>NCA follow policy (internal; increasing monotonicity)</p></a></li>
<li><a href='#nca_follow_policy_dec'><p>NCA follow policy (internal; decreasing monotonicity)</p></a></li>
<li><a href='#nca_provide_policy'><p>NCA provide policy (internal; increasing monotonicity)</p></a></li>
<li><a href='#nca_provide_policy_dec'><p>NCA provide policy (internal; decreasing monotonicity)</p></a></li>
<li><a href='#NCAdata'><p>Interim Dane data with new criminal activity (NCA) as an outcome</p></a></li>
<li><a href='#nuis_func'><p>Nuisance functions (internal)</p></a></li>
<li><a href='#nuis_func_ai'><p>Nuisance functions conditioning on AI (internal)</p></a></li>
<li><a href='#NVCAdata'><p>Interim Dane data with new violent criminal activity (NVCA) as an outcome</p></a></li>
<li><a href='#plot_agreement'><p>Visualize Agreement</p></a></li>
<li><a href='#plot_diff_ai_aipw'><p>Visualize Difference in Risk (AI v. Human)</p></a></li>
<li><a href='#plot_diff_human'><p>Visualize Difference in Risk (Human+AI v. Human)</p></a></li>
<li><a href='#plot_diff_human_aipw'><p>Visualize Difference in Risk (Human+AI v. Human)</p></a></li>
<li><a href='#plot_diff_subgroup'><p>Visualize Difference in Risk (Human+AI v. Human) for a Subgroup Defined by AI Recommendation</p></a></li>
<li><a href='#plot_preference'><p>Visualize Preference</p></a></li>
<li><a href='#PlotAPCE'><p>Plot APCE</p></a></li>
<li><a href='#PlotDIMdecisions'><p>Plot diff-in-means estimates</p></a></li>
<li><a href='#PlotDIMoutcomes'><p>Plot diff-in-means estimates</p></a></li>
<li><a href='#PlotFairness'><p>Plot the principal fairness</p></a></li>
<li><a href='#PlotOptimalDecision'><p>Plot optimal decision</p></a></li>
<li><a href='#PlotPS'><p>Plot the proportion of principal strata (R)</p></a></li>
<li><a href='#PlotSpilloverCRT'><p>Plot conditional randomization test</p></a></li>
<li><a href='#PlotSpilloverCRTpower'><p>Plot power analysis of conditional randomization test</p></a></li>
<li><a href='#PlotStackedBar'><p>Stacked barplot for the distribution of the decision given psa</p></a></li>
<li><a href='#PlotStackedBarDMF'><p>Stacked barplot for the distribution of the decision given DMF recommendation</p></a></li>
<li><a href='#PlotUtilityDiff'><p>Plot utility difference</p></a></li>
<li><a href='#PlotUtilityDiffCI'><p>Plot utility difference with 95% confidence interval</p></a></li>
<li><a href='#psa_synth'><p>Synthetic PSA data</p></a></li>
<li><a href='#PSAdata'><p>Interim Dane PSA data</p></a></li>
<li><a href='#SpilloverCRT'><p>Conduct conditional randomization test</p></a></li>
<li><a href='#SpilloverCRTpower'><p>Conduct power analysis of conditional randomization test</p></a></li>
<li><a href='#synth'><p>Synthetic data</p></a></li>
<li><a href='#table_agreement'><p>Table of Agreement</p></a></li>
<li><a href='#TestMonotonicity'><p>Test monotonicity</p></a></li>
<li><a href='#TestMonotonicityRE'><p>Test monotonicity with random effects</p></a></li>
<li><a href='#vis_agreement'><p>Visualize Agreement (internal)</p></a></li>
<li><a href='#vis_diff_ai'><p>Visualize Risk (AI v. Human; internal)</p></a></li>
<li><a href='#vis_diff_human'><p>Visualize Risk (Human+AI v. Human; internal)</p></a></li>
<li><a href='#vis_diff_subgroup'><p>Visualize Risk (Human+AI v. Human; internal)</p></a></li>
<li><a href='#vis_preference'><p>Visualize Preference (internal)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Experimental Evaluation of Algorithm-Assisted Human
Decision-Making</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-12-23</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides statistical methods for analyzing experimental 
    evaluation of the causal impacts of algorithmic recommendations 
    on human decisions developed by Imai, Jiang, Greiner, Halen, and 
    Shin (2023) &lt;<a href="https://doi.org/10.1093%2Fjrsssa%2Fqnad010">doi:10.1093/jrsssa/qnad010</a>&gt; and Ben-Michael, Greiner,  
    Huang, Imai, Jiang, and Shin (2024) &lt;<a href="https://doi.org/10.48550%2FarXiv.2403.12108">doi:10.48550/arXiv.2403.12108</a>&gt;.
    The data used for this paper, and made available here, are interim, 
    based on only half of the observations in the study and (for those 
    observations) only half of the study follow-up period. We use them 
    only to illustrate methods, not to draw substantive conclusions.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/sooahnshin/aihuman">https://github.com/sooahnshin/aihuman</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/sooahnshin/aihuman/issues">https://github.com/sooahnshin/aihuman/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, coda, stats, magrittr, purrr, abind, foreach, parallel,
doParallel, ggplot2, dplyr, tidyr, metR, MASS, GLMMadaptive,
gbm, tidyselect, stringr, forcats</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo, RcppEigen</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-09 12:05:05 UTC; sooahnshin</td>
</tr>
<tr>
<td>Author:</td>
<td>Sooahn Shin <a href="https://orcid.org/0000-0001-6213-2197"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Zhichao Jiang [aut],
  Kosuke Imai [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sooahn Shin &lt;sooahnshin@g.harvard.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-09 12:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='aihuman-package'>Experimental Evaluation of Algorithm-Assisted Human Decision-Making</h2><span id='topic+aihuman-package'></span><span id='topic+aihuman'></span>

<h3>Description</h3>

<p>Provides statistical methods for analyzing experimental 
    evaluation of the causal impacts of algorithmic recommendations 
    on human decisions developed by Imai, Jiang, Greiner, Halen, and 
    Shin (2023) &lt;doi:10.1093/jrsssa/qnad010&gt; and Ben-Michael, Greiner,  
    Huang, Imai, Jiang, and Shin (2024) &lt;doi:10.48550/arXiv.2403.12108&gt;.
    The data used for this paper, and made available here, are interim, 
    based on only half of the observations in the study and (for those 
    observations) only half of the study follow-up period. We use them 
    only to illustrate methods, not to draw substantive conclusions.</p>


<h3>Package Content</h3>


<p>Index of help topics:
</p>
<pre>
APCEsummary             Summary of APCE
APCEsummaryipw          Summary of APCE for frequentist analysis
AiEvalmcmc              Gibbs sampler for the main analysis
BootstrapAPCEipw        Bootstrap for estimating variance of APCE
BootstrapAPCEipwRE      Bootstrap for estimating variance of APCE with
                        random effects
BootstrapAPCEipwREparallel
                        Bootstrap for estimating variance of APCE with
                        random effects
CalAPCE                 Calculate APCE
CalAPCEipw              Compute APCE using frequentist analysis
CalAPCEipwRE            Compute APCE using frequentist analysis with
                        random effects
CalAPCEparallel         Calculate APCE using parallel computing
CalDIM                  Calculate diff-in-means estimates
CalDIMsubgroup          Calculate diff-in-means estimates
CalDelta                Calculate the delta given the principal stratum
CalFairness             Calculate the principal fairness
CalOptimalDecision      Calculate optimal decision &amp; utility
CalPS                   Calculate the proportion of principal strata
                        (R)
FTAdata                 Interim Dane data with failure to appear (FTA)
                        as an outcome
HearingDate             Interim court event hearing date
NCAdata                 Interim Dane data with new criminal activity
                        (NCA) as an outcome
NVCAdata                Interim Dane data with new violent criminal
                        activity (NVCA) as an outcome
PSAdata                 Interim Dane PSA data
PlotAPCE                Plot APCE
PlotDIMdecisions        Plot diff-in-means estimates
PlotDIMoutcomes         Plot diff-in-means estimates
PlotFairness            Plot the principal fairness
PlotOptimalDecision     Plot optimal decision
PlotPS                  Plot the proportion of principal strata (R)
PlotSpilloverCRT        Plot conditional randomization test
PlotSpilloverCRTpower   Plot power analysis of conditional
                        randomization test
PlotStackedBar          Stacked barplot for the distribution of the
                        decision given psa
PlotStackedBarDMF       Stacked barplot for the distribution of the
                        decision given DMF recommendation
PlotUtilityDiff         Plot utility difference
PlotUtilityDiffCI       Plot utility difference with 95
                        interval
SpilloverCRT            Conduct conditional randomization test
SpilloverCRTpower       Conduct power analysis of conditional
                        randomization test
TestMonotonicity        Test monotonicity
TestMonotonicityRE      Test monotonicity with random effects
aihuman-package         Experimental Evaluation of Algorithm-Assisted
                        Human Decision-Making
compute_bounds_aipw     Compute Risk (AI v. Human)
compute_nuisance_functions
                        Fit outcome/decision and propensity score
                        models
compute_nuisance_functions_ai
                        Fit outcome/decision and propensity score
                        models conditioning on the AI recommendation
compute_stats           Compute Risk (Human+AI v. Human)
compute_stats_agreement
                        Agreement of Human and AI Decision Makers
compute_stats_aipw      Compute Risk (Human+AI v. Human)
compute_stats_subgroup
                        Compute Risk (Human+AI v. Human) for a Subgroup
                        Defined by AI Recommendation
crossfit                Crossfitting for nuisance functions
g_legend                Pulling ggplot legend
hearingdate_synth       Synthetic court event hearing date
plot_agreement          Visualize Agreement
plot_diff_ai_aipw       Visualize Difference in Risk (AI v. Human)
plot_diff_human         Visualize Difference in Risk (Human+AI v.
                        Human)
plot_diff_human_aipw    Visualize Difference in Risk (Human+AI v.
                        Human)
plot_diff_subgroup      Visualize Difference in Risk (Human+AI v.
                        Human) for a Subgroup Defined by AI
                        Recommendation
plot_preference         Visualize Preference
psa_synth               Synthetic PSA data
synth                   Synthetic data
table_agreement         Table of Agreement
</pre>

<h3>Maintainer</h3>

<p>NA</p>


<h3>Author(s)</h3>

<p>NA</p>

<hr>
<h2 id='A_llama'>Llama3 Recommendations (internal)</h2><span id='topic+A_llama'></span>

<h3>Description</h3>

<p>Llama3 recommendations example for the illustration purpose.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>A_llama
</code></pre>


<h3>Format</h3>

<p>An object of class <code>numeric</code> of length 1891.
</p>


<h3>Value</h3>

<p>A numeric vector of 0 or 1.
</p>

<hr>
<h2 id='AiEvalmcmc'>Gibbs sampler for the main analysis</h2><span id='topic+AiEvalmcmc'></span>

<h3>Description</h3>

<p>See Appendix S5 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AiEvalmcmc(
  data,
  rho = 0,
  Sigma0.beta.inv = NULL,
  Sigma0.alpha.inv = NULL,
  sigma0 = NULL,
  beta = NULL,
  alpha = NULL,
  theta = NULL,
  delta = NULL,
  n.mcmc = 5 * 10,
  verbose = FALSE,
  out.length = 10,
  beta.zx.off = FALSE,
  theta.z.off = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AiEvalmcmc_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_rho">rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_sigma0.beta.inv">Sigma0.beta.inv</code></td>
<td>
<p>Inverse of the prior covariance matrix of beta. The default is a diagonal matrix with  <code>0.01</code> diagonal entries.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_sigma0.alpha.inv">Sigma0.alpha.inv</code></td>
<td>
<p>Inverse of the prior covariance matrix of alpha. The default is a diagonal matrix with  <code>0.01</code> diagonal entries.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_sigma0">sigma0</code></td>
<td>
<p>Prior variance of the cutoff points (theta and delta)</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_beta">beta</code></td>
<td>
<p>Initial value for beta.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_alpha">alpha</code></td>
<td>
<p>Initial value for alpha.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_theta">theta</code></td>
<td>
<p>Initial value for theta.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_delta">delta</code></td>
<td>
<p>Initial value for delta.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_n.mcmc">n.mcmc</code></td>
<td>
<p>The total number of MCMC iterations. The default is <code>50</code>.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_verbose">verbose</code></td>
<td>
<p>A logical argument specified to print the progress on the screen. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_out.length">out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. If <code>verbose = TRUE</code>, every <code>out.length</code>-th iteration is printed on the screen. The default is <code>10</code>.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_beta.zx.off">beta.zx.off</code></td>
<td>
<p>A logical argument specified to exclude the interaction terms (Z by X) from the model. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="AiEvalmcmc_+3A_theta.z.off">theta.z.off</code></td>
<td>
<p>A logical argument specified to set same cutoffs theta for treatment and control group. The default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>mcmc</code> containing the posterior samples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 2)

</code></pre>

<hr>
<h2 id='APCEsummary'>Summary of APCE</h2><span id='topic+APCEsummary'></span>

<h3>Description</h3>

<p>Summary of average principal causal effects (APCE) with ordinal decision.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>APCEsummary(apce.mcmc)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="APCEsummary_+3A_apce.mcmc">apce.mcmc</code></td>
<td>
<p>APCE.mcmc array generated from <code>CalAPCE</code> or <code>CalAPCEparallel</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> that consists of mean and quantiles (2.5
</p>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCE(data = synth, mcmc.re = sample_mcmc, subgroup = subgroup_synth)
sample_apce_summary &lt;- APCEsummary(sample_apce[["APCE.mcmc"]])


</code></pre>

<hr>
<h2 id='APCEsummaryipw'>Summary of APCE for frequentist analysis</h2><span id='topic+APCEsummaryipw'></span>

<h3>Description</h3>

<p>Summary of average principal causal effects (APCE) with ordinal decision with frequentist results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>APCEsummaryipw(
  G1_est,
  G2_est,
  G3_est,
  G4_est,
  G5_est,
  G1_boot,
  G2_boot,
  G3_boot,
  G4_boot,
  G5_boot,
  name.group = c("Overall", "Female", "Male", "Non-white\nMale", "White\nMale")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="APCEsummaryipw_+3A_g1_est">G1_est</code></td>
<td>
<p>List generated from <code>CalAPCEipw</code> for the first subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g2_est">G2_est</code></td>
<td>
<p>List generated from <code>CalAPCEipw</code> for the second subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g3_est">G3_est</code></td>
<td>
<p>List generated from <code>CalAPCEipw</code> for the third subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g4_est">G4_est</code></td>
<td>
<p>List generated from <code>CalAPCEipw</code> for the fourth subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g5_est">G5_est</code></td>
<td>
<p>List generated from <code>CalAPCEipw</code> for the fifth subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g1_boot">G1_boot</code></td>
<td>
<p>List generated from <code>BootstrapAPCEipw</code> for the first subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g2_boot">G2_boot</code></td>
<td>
<p>List generated from <code>BootstrapAPCEipw</code> for the second subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g3_boot">G3_boot</code></td>
<td>
<p>List generated from <code>BootstrapAPCEipw</code> for the third subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g4_boot">G4_boot</code></td>
<td>
<p>List generated from <code>BootstrapAPCEipw</code> for the fourth subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_g5_boot">G5_boot</code></td>
<td>
<p>List generated from <code>BootstrapAPCEipw</code> for the fifth subgroup.</p>
</td></tr>
<tr><td><code id="APCEsummaryipw_+3A_name.group">name.group</code></td>
<td>
<p>A list of character vectors for the label of five subgroups.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> that consists of mean and quantiles (2.5
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
synth$SexWhite &lt;- synth$Sex * synth$White
freq_apce &lt;- CalAPCEipw(synth)
boot_apce &lt;- BootstrapAPCEipw(synth, rep = 10)
# subgroup analysis
data_s0 &lt;- subset(synth, synth$Sex == 0, select = -c(Sex, SexWhite))
freq_s0 &lt;- CalAPCEipw(data_s0)
boot_s0 &lt;- BootstrapAPCEipw(data_s0, rep = 10)
data_s1 &lt;- subset(synth, synth$Sex == 1, select = -c(Sex, SexWhite))
freq_s1 &lt;- CalAPCEipw(data_s1)
boot_s1 &lt;- BootstrapAPCEipw(data_s1, rep = 10)
data_s1w0 &lt;- subset(synth, synth$Sex == 1 &amp; synth$White == 0, select = -c(Sex, White, SexWhite))
freq_s1w0 &lt;- CalAPCEipw(data_s1w0)
boot_s1w0 &lt;- BootstrapAPCEipw(data_s1w0, rep = 10)
data_s1w1 &lt;- subset(synth, synth$Sex == 1 &amp; synth$White == 1, select = -c(Sex, White, SexWhite))
freq_s1w1 &lt;- CalAPCEipw(data_s1w1)
boot_s1w1 &lt;- BootstrapAPCEipw(data_s1w1, rep = 10)

freq_apce_summary &lt;- APCEsummaryipw(
  freq_apce, freq_s0, freq_s1, freq_s1w0, freq_s1w1,
  boot_apce, boot_s0, boot_s1, boot_s1w0, boot_s1w0
)
PlotAPCE(freq_apce_summary,
  y.max = 0.25, decision.labels = c(
    "signature", "small cash",
    "middle cash", "large cash"
  ), shape.values = c(16, 17, 15, 18),
  col.values = c("blue", "black", "red", "brown", "purple"), label = FALSE
)

</code></pre>

<hr>
<h2 id='BootstrapAPCEipw'>Bootstrap for estimating variance of APCE</h2><span id='topic+BootstrapAPCEipw'></span>

<h3>Description</h3>

<p>Estimate variance of APCE for frequentist analysis using bootstrap. See S7 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BootstrapAPCEipw(data, rep = 1000)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BootstrapAPCEipw_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipw_+3A_rep">rep</code></td>
<td>
<p>Size of bootstrap</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is rep (size of bootstrap), dimension 2 is (k+1) values of D from 0 to k, dimension 3 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R.boot</code></td>
<td>
<p>An array with dimension rep by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
<tr><td><code>alpha.boot</code></td>
<td>
<p>An array with estimated alpha for each bootstrap.</p>
</td></tr>
<tr><td><code>delta.boot</code></td>
<td>
<p>An array with estimated delta for each bootstrap.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
set.seed(123)
boot_apce &lt;- BootstrapAPCEipw(synth, rep = 100)

</code></pre>

<hr>
<h2 id='BootstrapAPCEipwRE'>Bootstrap for estimating variance of APCE with random effects</h2><span id='topic+BootstrapAPCEipwRE'></span>

<h3>Description</h3>

<p>Estimate variance of APCE for frequentist analysis with random effects using bootstrap. See S7 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BootstrapAPCEipwRE(
  data,
  rep = 1000,
  fixed,
  random,
  CourtEvent_HearingDate,
  nAGQ = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BootstrapAPCEipwRE_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwRE_+3A_rep">rep</code></td>
<td>
<p>Size of bootstrap</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwRE_+3A_fixed">fixed</code></td>
<td>
<p>A formula for the fixed-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwRE_+3A_random">random</code></td>
<td>
<p>A formula for the random-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwRE_+3A_courtevent_hearingdate">CourtEvent_HearingDate</code></td>
<td>
<p>The court event hearing date.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwRE_+3A_nagq">nAGQ</code></td>
<td>
<p>Integer scalar - the number of points per axis for evaluating the adaptive Gauss-Hermite approximation to the log-likelihood. Defaults to 1, corresponding to the Laplace approximation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is rep (size of bootstrap), dimension 2 is (k+1) values of D from 0 to k, dimension 3 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R.boot</code></td>
<td>
<p>An array with dimension rep by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
synth$CourtEvent_HearingDate &lt;- hearingdate_synth
set.seed(123)
boot_apce_re &lt;- BootstrapAPCEipwRE(synth,
  fixed = "Y ~ Sex + White + Age +
                   CurrentViolentOffense + PendingChargeAtTimeOfOffense +
                   PriorMisdemeanorConviction + PriorFelonyConviction +
                   PriorViolentConviction + D",
  random = "~ 1|CourtEvent_HearingDate"
)


</code></pre>

<hr>
<h2 id='BootstrapAPCEipwREparallel'>Bootstrap for estimating variance of APCE with random effects</h2><span id='topic+BootstrapAPCEipwREparallel'></span>

<h3>Description</h3>

<p>Estimate variance of APCE for frequentist analysis with random effects using bootstrap. See S7 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BootstrapAPCEipwREparallel(data, rep = 1000, fixed, random, nAGQ = 1, size = 5)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_rep">rep</code></td>
<td>
<p>Size of bootstrap</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_fixed">fixed</code></td>
<td>
<p>A formula for the fixed-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_random">random</code></td>
<td>
<p>A formula for the random-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_nagq">nAGQ</code></td>
<td>
<p>Integer scalar - the number of points per axis for evaluating the adaptive Gauss-Hermite approximation to the log-likelihood. Defaults to 1, corresponding to the Laplace approximation.</p>
</td></tr>
<tr><td><code id="BootstrapAPCEipwREparallel_+3A_size">size</code></td>
<td>
<p>The number of parallel computing. The default is <code>5</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is rep (size of bootstrap), dimension 2 is (k+1) values of D from 0 to k, dimension 3 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE.boot</code></td>
<td>
<p>An array with dimension rep by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R.boot</code></td>
<td>
<p>An array with dimension rep by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
synth$CourtEvent_HearingDate &lt;- hearingdate_synth
set.seed(123)
boot_apce_re &lt;- BootstrapAPCEipwREparallel(synth,
  fixed = "Y ~ Sex + White + Age +
                   CurrentViolentOffense + PendingChargeAtTimeOfOffense +
                   PriorMisdemeanorConviction + PriorFelonyConviction +
                   PriorViolentConviction + D",
  random = "~ 1|CourtEvent_HearingDate",
  size = 1
) # adjust the size


</code></pre>

<hr>
<h2 id='CalAPCE'>Calculate APCE</h2><span id='topic+CalAPCE'></span>

<h3>Description</h3>

<p>Calculate average principal causal effects (APCE) with ordinal decision. See Section 3.4 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalAPCE(
  data,
  mcmc.re,
  subgroup,
  name.group = c("overall", "Sex0", "Sex1", "Sex1 White0", "Sex1 White1"),
  rho = 0,
  burnin = 0,
  out.length = 500,
  c0 = 0,
  c1 = 0,
  ZX = NULL,
  save.individual.optimal.decision = FALSE,
  parallel = FALSE,
  optimal.decision.only = FALSE,
  dmf = NULL,
  fair.dmf.only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalAPCE_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_mcmc.re">mcmc.re</code></td>
<td>
<p>A <code>mcmc</code> object generated by <code>AiEvalmcmc()</code> function.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_subgroup">subgroup</code></td>
<td>
<p>A list of numeric vectors for the index of each of the five subgroups.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_name.group">name.group</code></td>
<td>
<p>A list of character vectors for the label of five subgroups.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_rho">rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_burnin">burnin</code></td>
<td>
<p>A proportion of burnin for the Markov chain. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_out.length">out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. Every <code>out.length</code>-th iteration is printed on the screen. The default is <code>500</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_c0">c0</code></td>
<td>
<p>The cost of an outcome. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_c1">c1</code></td>
<td>
<p>The cost of an unnecessarily harsh decision. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_zx">ZX</code></td>
<td>
<p>The data matrix for interaction terms. The default is the interaction between Z and all of the pre-treatment covariates (X).</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_save.individual.optimal.decision">save.individual.optimal.decision</code></td>
<td>
<p>A logical argument specified to save individual optimal decision rules. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_parallel">parallel</code></td>
<td>
<p>A logical argument specifying whether parallel computing is conducted. Do not change this argument manually.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_optimal.decision.only">optimal.decision.only</code></td>
<td>
<p>A logical argument specified to compute only the optimal decision rule. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_dmf">dmf</code></td>
<td>
<p>A numeric vector of binary DMF recommendations. If <code>null</code>, use judge's decisions (0 if the decision is 0 and 1 o.w; e.g., signature or cash bond).</p>
</td></tr>
<tr><td><code id="CalAPCE_+3A_fair.dmf.only">fair.dmf.only</code></td>
<td>
<p>A logical argument specified to compute only the fairness of given DMF recommendations. The default is <code>FALSE</code>. Not used in the analysis for the JRSSA paper.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is each posterior sample; dimension 2 is subgroup, dimension 3 is (k+1) values of D from 0 to k, dimension 4 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
<tr><td><code>Optimal.Z.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 for the proportion of the cases where treatment (PSA provided) is optimal.</p>
</td></tr>
<tr><td><code>Optimal.D.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) for the proportion of optimal decision rule (average over observations). If <code>save.individual.optimal.decision = TRUE</code>, the dimension would be n by (k+1) (average over mcmc samples).</p>
</td></tr>
<tr><td><code>P.DMF.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for the proportion of binary DMF recommendations. Not used in the analysis for the JRSSA paper.</p>
</td></tr>
<tr><td><code>Utility.g_d.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of judge's decisions.</p>
</td></tr>
<tr><td><code>Utility.g_dmf.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of DMF recommendation.</p>
</td></tr>
<tr><td><code>Utility.diff.control.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among control group.</p>
</td></tr>
<tr><td><code>Utility.diff.treated.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among treated group.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 2)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCE(data = synth, mcmc.re = sample_mcmc, subgroup = subgroup_synth)

</code></pre>

<hr>
<h2 id='CalAPCEipw'>Compute APCE using frequentist analysis</h2><span id='topic+CalAPCEipw'></span>

<h3>Description</h3>

<p>Estimate propensity score and use Hajek estimator to compute APCE. See S7 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalAPCEipw(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalAPCEipw_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is (k+1) values of D from 0 to k, dimension 2 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R</code></td>
<td>
<p>An array with dimension (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>An array with estimated alpha.</p>
</td></tr>
<tr><td><code>delta</code></td>
<td>
<p>An array with estimated delta.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
freq_apce &lt;- CalAPCEipw(synth)

</code></pre>

<hr>
<h2 id='CalAPCEipwRE'>Compute APCE using frequentist analysis with random effects</h2><span id='topic+CalAPCEipwRE'></span>

<h3>Description</h3>

<p>Estimate propensity score and use Hajek estimator to compute APCE. See S7 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalAPCEipwRE(data, fixed, random, nAGQ = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalAPCEipwRE_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="CalAPCEipwRE_+3A_fixed">fixed</code></td>
<td>
<p>A formula for the fixed-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="CalAPCEipwRE_+3A_random">random</code></td>
<td>
<p>A formula for the random-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="CalAPCEipwRE_+3A_nagq">nAGQ</code></td>
<td>
<p>Integer scalar - the number of points per axis for evaluating the adaptive Gauss-Hermite approximation to the log-likelihood. Defaults to 1, corresponding to the Laplace approximation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is (k+1) values of D from 0 to k, dimension 2 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE</code></td>
<td>
<p>An array with dimension (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R</code></td>
<td>
<p>An array with dimension (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>An array with estimated alpha.</p>
</td></tr>
<tr><td><code>delta</code></td>
<td>
<p>An array with estimated delta.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
synth$CourtEvent_HearingDate &lt;- hearingdate_synth
freq_apce_re &lt;- CalAPCEipwRE(synth,
  fixed = "Y ~ Sex + White + Age +
                   CurrentViolentOffense + PendingChargeAtTimeOfOffense +
                   PriorMisdemeanorConviction + PriorFelonyConviction +
                   PriorViolentConviction + D",
  random = "~ 1|CourtEvent_HearingDate"
)


</code></pre>

<hr>
<h2 id='CalAPCEparallel'>Calculate APCE using parallel computing</h2><span id='topic+CalAPCEparallel'></span>

<h3>Description</h3>

<p>Calculate average principal causal effects (APCE) with ordinal decision using parallel computing. See Section 3.4 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalAPCEparallel(
  data,
  mcmc.re,
  subgroup,
  name.group = c("overall", "Sex0", "Sex1", "Sex1 White0", "Sex1 White1"),
  rho = 0,
  burnin = 0,
  out.length = 500,
  c0 = 0,
  c1 = 0,
  ZX = NULL,
  save.individual.optimal.decision = FALSE,
  optimal.decision.only = FALSE,
  dmf = NULL,
  fair.dmf.only = FALSE,
  size = 5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalAPCEparallel_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_mcmc.re">mcmc.re</code></td>
<td>
<p>A <code>mcmc</code> object generated by <code>AiEvalmcmc()</code> function.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_subgroup">subgroup</code></td>
<td>
<p>A list of numeric vectors for the index of each of the five subgroups.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_name.group">name.group</code></td>
<td>
<p>A list of character vectors for the label of five subgroups.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_rho">rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_burnin">burnin</code></td>
<td>
<p>A proportion of burnin for the Markov chain. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_out.length">out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. Every <code>out.length</code>-th iteration is printed on the screen. The default is <code>500</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_c0">c0</code></td>
<td>
<p>The cost of an outcome. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_c1">c1</code></td>
<td>
<p>The cost of an unnecessarily harsh decision. See Section 3.7 for more details. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_zx">ZX</code></td>
<td>
<p>The data matrix for interaction terms. The default is the interaction between Z and all of the pre-treatment covariates (X).</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_save.individual.optimal.decision">save.individual.optimal.decision</code></td>
<td>
<p>A logical argument specified to save individual optimal decision rules. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_optimal.decision.only">optimal.decision.only</code></td>
<td>
<p>A logical argument specified to compute only the optimal decision rule. The default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_dmf">dmf</code></td>
<td>
<p>A numeric vector of binary DMF recommendations. If <code>null</code>, use judge's decisions (0 if the decision is 0 and 1 o.w; e.g., signature or cash bond).</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_fair.dmf.only">fair.dmf.only</code></td>
<td>
<p>A logical argument specified to compute only the fairness of given DMF recommendations. The default is <code>FALSE</code>. Not used in the analysis for the JRSSA paper.</p>
</td></tr>
<tr><td><code id="CalAPCEparallel_+3A_size">size</code></td>
<td>
<p>The number of parallel computing. The default is <code>5</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>list</code> with the following elements:
</p>
<table role = "presentation">
<tr><td><code>P.D1.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r), dimension 1 is each posterior sample; dimension 2 is subgroup, dimension 3 is (k+1) values of D from 0 to k, dimension 4 is (k+2) values of R from 0 to k+1.</p>
</td></tr>
<tr><td><code>P.D0.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>APCE.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for quantity P(D(1)=d| R=r)-P(D(0)=d| R=r).</p>
</td></tr>
<tr><td><code>P.R.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+2) for quantity P(R=r) for r from 0 to (k+1).</p>
</td></tr>
<tr><td><code>Optimal.Z.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 for the proportion of the cases where treatment (PSA provided) is optimal.</p>
</td></tr>
<tr><td><code>Optimal.D.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) for the proportion of optimal decision rule.</p>
</td></tr>
<tr><td><code>P.DMF.mcmc</code></td>
<td>
<p>An array with dimension n.mcmc by 5 by (k+1) by (k+2) for the proportion of binary DMF recommendations. Not used in the analysis for the JRSSA paper.</p>
</td></tr>
<tr><td><code>Utility.g_d.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of judge's decisions.</p>
</td></tr>
<tr><td><code>Utility.g_dmf.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n for the individual utility of DMF recommendation.</p>
</td></tr>
<tr><td><code>Utility.diff.control.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among control group.</p>
</td></tr>
<tr><td><code>Utility.diff.treated.mcmc</code></td>
<td>
<p>Included if <code>save.individual.optimal.decision = TRUE</code>. An array with dimension n.mcmc for estimated difference in utility between judge's decisions and DMF recommendation among treated group.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCEparallel(
  data = synth, mcmc.re = sample_mcmc,
  subgroup = subgroup_synth,
  size = 1
) # adjust the size


</code></pre>

<hr>
<h2 id='CalDelta'>Calculate the delta given the principal stratum</h2><span id='topic+CalDelta'></span>

<h3>Description</h3>

<p>Calculate the maximal deviation of decisions probability among the distributions for different groups (delta) given the principal stratum (R).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalDelta(r, k, pd0, pd1, attr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalDelta_+3A_r">r</code></td>
<td>
<p>The given principal stratum.</p>
</td></tr>
<tr><td><code id="CalDelta_+3A_k">k</code></td>
<td>
<p>The maximum decision (e.g., largest bail amount).</p>
</td></tr>
<tr><td><code id="CalDelta_+3A_pd0">pd0</code></td>
<td>
<p>P.D0.mcmc array generated from <code>CalAPCE</code> or <code>CalAPCEparallel</code>.</p>
</td></tr>
<tr><td><code id="CalDelta_+3A_pd1">pd1</code></td>
<td>
<p>P.D1.mcmc array generated from <code>CalAPCE</code> or <code>CalAPCEparallel</code>.</p>
</td></tr>
<tr><td><code id="CalDelta_+3A_attr">attr</code></td>
<td>
<p>The index of subgroups (within the output of CalAPCE/CalAPCEparallel) that corresponds to the protected attributes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the delta.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc, subgroup = subgroup_synth,
  burnin = 0
)
CalDelta(0, 3, sample_apce[["P.D0.mcmc"]], sample_apce[["P.D1.mcmc"]], c(2, 3))


</code></pre>

<hr>
<h2 id='CalDIM'>Calculate diff-in-means estimates</h2><span id='topic+CalDIM'></span>

<h3>Description</h3>

<p>Calculate average causal effect based on diff-in-means estimator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalDIM(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalDIM_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of which columns includes a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of diff-in-means estimates effect for each value of D and Y.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
CalDIM(synth)

</code></pre>

<hr>
<h2 id='CalDIMsubgroup'>Calculate diff-in-means estimates</h2><span id='topic+CalDIMsubgroup'></span>

<h3>Description</h3>

<p>Calculate average causal effect based on diff-in-means estimator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalDIMsubgroup(
  data,
  subgroup,
  name.group = c("Overall", "Female", "Male", "Non-white\nMale", "White\nMale")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalDIMsubgroup_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of which columns includes a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y).</p>
</td></tr>
<tr><td><code id="CalDIMsubgroup_+3A_subgroup">subgroup</code></td>
<td>
<p>A list of numeric vectors for the index of each of the five subgroups.</p>
</td></tr>
<tr><td><code id="CalDIMsubgroup_+3A_name.group">name.group</code></td>
<td>
<p>A character vector including the labels of five subgroups.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of diff-in-means estimates for each value of D and Y for each subgroup.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
CalDIMsubgroup(synth, subgroup = subgroup_synth)

</code></pre>

<hr>
<h2 id='CalFairness'>Calculate the principal fairness</h2><span id='topic+CalFairness'></span>

<h3>Description</h3>

<p>See Section 3.6 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalFairness(apce, attr = c(2, 3))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalFairness_+3A_apce">apce</code></td>
<td>
<p>The list generated from <code>CalAPCE</code> or <code>CalAPCEparallel</code>.</p>
</td></tr>
<tr><td><code id="CalFairness_+3A_attr">attr</code></td>
<td>
<p>The index of subgroups (within the output of CalAPCE/CalAPCEparallel) that corresponds to the protected attributes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the delta.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc, subgroup = subgroup_synth,
  burnin = 0
)
CalFairness(sample_apce)


</code></pre>

<hr>
<h2 id='CalOptimalDecision'>Calculate optimal decision &amp; utility</h2><span id='topic+CalOptimalDecision'></span>

<h3>Description</h3>

<p>(1) Calculate optimal decision for each observation given each of c0 (cost of an outcome) and c1 (cost of an unnecessarily harsh decision) from the lists.
(2) Calculate difference in the expected utility between binary version of judge's decisions and DMF recommendations given each of c0 (cost of an outcome) and c1 (cost of an unnecessarily harsh decision) from the lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalOptimalDecision(
  data,
  mcmc.re,
  c0.ls,
  c1.ls,
  dmf = NULL,
  rho = 0,
  burnin = 0,
  out.length = 500,
  ZX = NULL,
  size = 5,
  include.utility.diff.mcmc = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalOptimalDecision_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_mcmc.re">mcmc.re</code></td>
<td>
<p>A <code>mcmc</code> object generated by <code>AiEvalmcmc()</code> function.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_c0.ls">c0.ls</code></td>
<td>
<p>The list of cost of an outcome. See Section 3.7 for more details.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_c1.ls">c1.ls</code></td>
<td>
<p>The list of cost of an unnecessarily harsh decision. See Section 3.7 for more details.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_dmf">dmf</code></td>
<td>
<p>A numeric vector of binary DMF recommendations. If <code>null</code>, use judge's decisions (0 if the decision is 0 and 1 o.w; e.g., signature or cash bond).</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_rho">rho</code></td>
<td>
<p>A sensitivity parameter. The default is  <code>0</code> which implies the unconfoundedness assumption (Assumption 4).</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_burnin">burnin</code></td>
<td>
<p>A proportion of burnin for the Markov chain. The default is <code>0</code>.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_out.length">out.length</code></td>
<td>
<p>An integer to specify the progress on the screen. Every <code>out.length</code>-th iteration is printed on the screen. The default is <code>500</code>.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_zx">ZX</code></td>
<td>
<p>The data matrix for interaction terms. The default is the interaction between Z and all of the pre-treatment covariates (X).</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_size">size</code></td>
<td>
<p>The number of parallel computing. The default is <code>5</code>.</p>
</td></tr>
<tr><td><code id="CalOptimalDecision_+3A_include.utility.diff.mcmc">include.utility.diff.mcmc</code></td>
<td>
<p>A logical argument specifying whether to save <code>Utility.diff.control.mcmc</code> and <code>Utility.diff.treated.mcmc</code> for Figure S17. The default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of (1) the probability that the optimal decision for each observation being d in (0,1,...,k), (2) expected utility of binary version of judge's decision (g_d), (3) expected utility of binary DMF recommendation, and (4) the difference between (2) and (3). If <code>include.utility.diff.mcmc = TRUE</code>, returns a list of such <code>data.frame</code> and a <code>data.frame</code> that includes the result for mean and quantile of <code>Utility.diff.control.mcmc</code> and <code>Utility.diff.treated.mcmc</code> across mcmc samples.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
sample_optd &lt;- CalOptimalDecision(
  data = synth, mcmc.re = sample_mcmc,
  c0.ls = seq(0, 5, 1), c1.ls = seq(0, 5, 1),
  size = 1
) # adjust the size


</code></pre>

<hr>
<h2 id='CalPS'>Calculate the proportion of principal strata (R)</h2><span id='topic+CalPS'></span>

<h3>Description</h3>

<p>Calculate the proportion of each principal stratum (R).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CalPS(
  p.r.mcmc,
  name.group = c("Overall", "Female", "Male", "Non-white\nMale", "White\nMale")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CalPS_+3A_p.r.mcmc">p.r.mcmc</code></td>
<td>
<p>P.R.mcmc array generated from <code>CalAPCE</code> or <code>CalAPCEparallel</code>.</p>
</td></tr>
<tr><td><code id="CalPS_+3A_name.group">name.group</code></td>
<td>
<p>A character vector including the labels of five subgroups.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the proportion of each principal stratum.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc,
  subgroup = subgroup_synth
)
CalPS(sample_apce[["P.R.mcmc"]])


</code></pre>

<hr>
<h2 id='compute_bounds_aipw'>Compute Risk (AI v. Human)</h2><span id='topic+compute_bounds_aipw'></span>

<h3>Description</h3>

<p>Compute the difference in risk between AI and human decision makers using AIPW estimators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_bounds_aipw(
  Y,
  A,
  D,
  Z,
  X = NULL,
  nuis_funcs,
  nuis_funcs_ai,
  true.pscore = NULL,
  l01 = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_bounds_aipw_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_a">A</code></td>
<td>
<p>An observed AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_x">X</code></td>
<td>
<p>Pretreatment covariate used for subgroup analysis (vector). Must be the same length as Y, D, Z, and A if provided. Default is NULL.</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code></p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_nuis_funcs_ai">nuis_funcs_ai</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions_ai">compute_nuisance_functions_ai</a></code></p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="compute_bounds_aipw_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble the following columns:
</p>

<ul>
<li> <p><code>Z_focal</code>: The focal treatment indicator. '1' indicates the treatment group.
</p>
</li>
<li> <p><code>Z_compare</code>: The comparison treatment indicator. '0' indicates the control group.
</p>
</li>
<li> <p><code>X</code>: Pretreatment covariate (if provided).
</p>
</li>
<li> <p><code>fn_diff_lb</code>: The lower bound of difference in false negatives
</p>
</li>
<li> <p><code>fn_diff_ub</code>: The upper bound of difference in false negatives
</p>
</li>
<li> <p><code>fp_diff_lb</code>: The lower bound of difference in false positives
</p>
</li>
<li> <p><code>fp_diff_ub</code>: The upper bound of difference in false positives
</p>
</li>
<li> <p><code>loss_diff_lb</code>: The lower bound of difference in loss
</p>
</li>
<li> <p><code>loss_diff_ub</code>: The upper bound of difference in loss
</p>
</li>
<li> <p><code>fn_diff_lb_se</code>: The standard error of the difference in false negatives
</p>
</li>
<li> <p><code>fn_diff_ub_se</code>: The standard error of the difference in false negatives
</p>
</li>
<li> <p><code>fp_diff_lb_se</code>: The standard error of the difference in false positives
</p>
</li>
<li> <p><code>fp_diff_ub_se</code>: The standard error of the difference in false positives
</p>
</li>
<li> <p><code>loss_diff_lb_se</code>: The standard error of the difference in loss
</p>
</li>
<li> <p><code>loss_diff_ub_se</code>: The standard error of the difference in loss
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>compute_bounds_aipw(
  Y = NCAdata$Y,
  A = PSAdata$DMF,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  nuis_funcs = nuis_func,
  nuis_funcs_ai = nuis_func_ai,
  true.pscore = rep(0.5, nrow(NCAdata)),
  X = NULL,
  l01 = 1
)
</code></pre>

<hr>
<h2 id='compute_nuisance_functions'>Fit outcome/decision and propensity score models</h2><span id='topic+compute_nuisance_functions'></span>

<h3>Description</h3>

<p>Fit (1) the decision model <code class="reqn">m^{D}(z, X_i) := \Pr(D = 1 \mid Z = z, X = X_i)</code> and
(2) the outcome model <code class="reqn">m^{Y}(z, X_i) := \Pr(Y = 1 \mid D = 0, Z = z, X = X_i)</code>
for each treatment group <code class="reqn">z \in \{0,1\}</code> and (3) the propensity score model
<code class="reqn">e(1, X_i) := \Pr(Z = 1 \mid X = X_i)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_nuisance_functions(
  Y,
  D,
  Z,
  V,
  d_form = D ~ .,
  y_form = Y ~ .,
  ps_form = Z ~ .,
  distribution = "bernoulli",
  n.trees = 1000,
  shrinkage = 0.01,
  interaction.depth = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_nuisance_functions_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_v">V</code></td>
<td>
<p>Pretreatment covariates for nuisance functions. A vector, a matrix, or a data frame.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_d_form">d_form</code></td>
<td>
<p>A formula for decision model where the dependent variable is <code>D</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_y_form">y_form</code></td>
<td>
<p>A formula for outcome model where the dependent variable is <code>Y</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_ps_form">ps_form</code></td>
<td>
<p>A formula for propensity score model.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_distribution">distribution</code></td>
<td>
<p>A distribution argument used in <code>gbm</code> function. Default is <code>"bernoulli"</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_n.trees">n.trees</code></td>
<td>
<p>Integer specifying the total number of trees to fit used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_shrinkage">shrinkage</code></td>
<td>
<p>A shrinkage parameter used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>Integer specifying the maximum depth of each tree used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code>gbm</code> function called in <code>crossfit</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following components:
</p>

<dl>
<dt><code>z_models</code></dt><dd><p>A <code>data.frame</code> with the following columns:
</p>

<dl>
<dt><code>idx</code></dt><dd><p>Index of observation.</p>
</dd>
<dt><code>d_pred</code></dt><dd><p>Predicted probability of decision.</p>
</dd>
<dt><code>y_pred</code></dt><dd><p>Predicted probability of outcome.</p>
</dd>
<dt><code>Z</code></dt><dd><p>Treatment group.</p>
</dd>
</dl>

</dd>
<dt><code>pscore</code></dt><dd><p>A vector of predicted propensity scores.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>compute_nuisance_functions(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  V = NCAdata[, c("Sex", "White", "Age")],
  shrinkage = 0.01,
  n.trees = 1000
)

</code></pre>

<hr>
<h2 id='compute_nuisance_functions_ai'>Fit outcome/decision and propensity score models conditioning on the AI recommendation</h2><span id='topic+compute_nuisance_functions_ai'></span>

<h3>Description</h3>

<p>Fit (1) the decision model <code class="reqn">m^{D}(z, a, X_i) := \Pr(D = 1 \mid Z = z, A = a, X = X_i)</code> and
(2) the outcome model <code class="reqn">m^{Y}(z, a, X_i) := \Pr(Y = 1 \mid D = 0, Z = z, A = a, X = X_i)</code>
for each treatment group <code class="reqn">z \in \{0,1\}</code> and AI recommendation <code class="reqn">a \in \{0,1\}</code>,
and (3) the propensity score model <code class="reqn">e(1, X_i) := \Pr(Z = 1 \mid X = X_i)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_nuisance_functions_ai(
  Y,
  D,
  Z,
  A,
  V,
  d_form = D ~ .,
  y_form = Y ~ .,
  ps_form = Z ~ .,
  distribution = "bernoulli",
  n.trees = 1000,
  shrinkage = 0.01,
  interaction.depth = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_nuisance_functions_ai_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_v">V</code></td>
<td>
<p>A <code>matrix</code> of pretreatment covariates for nuisance functions.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_d_form">d_form</code></td>
<td>
<p>A formula for decision model where the dependent variable is <code>D</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_y_form">y_form</code></td>
<td>
<p>A formula for outcome model where the dependent variable is <code>Y</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_ps_form">ps_form</code></td>
<td>
<p>A formula for propensity score model.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_distribution">distribution</code></td>
<td>
<p>A distribution argument used in <code>gbm</code> function. Default is <code>"bernoulli"</code>.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_n.trees">n.trees</code></td>
<td>
<p>Integer specifying the total number of trees to fit used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_shrinkage">shrinkage</code></td>
<td>
<p>A shrinkage parameter used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_interaction.depth">interaction.depth</code></td>
<td>
<p>Integer specifying the maximum depth of each tree used in <code>gbm</code> function.</p>
</td></tr>
<tr><td><code id="compute_nuisance_functions_ai_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code>gbm</code> function called in <code>crossfit</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the following components:
</p>

<dl>
<dt><code>z_models</code></dt><dd><p>A <code>data.frame</code> with the following columns:
</p>

<dl>
<dt><code>idx</code></dt><dd><p>Index of observation.</p>
</dd>
<dt><code>d_pred</code></dt><dd><p>Predicted probability of decision.</p>
</dd>
<dt><code>y_pred</code></dt><dd><p>Predicted probability of outcome.</p>
</dd>
<dt><code>Z</code></dt><dd><p>Treatment group.</p>
</dd>
<dt><code>A</code></dt><dd><p>AI recommendation.</p>
</dd>
</dl>

</dd>
<dt><code>pscore</code></dt><dd><p>A vector of predicted propensity scores.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>compute_nuisance_functions_ai(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  V = NCAdata[, c("Sex", "White", "Age")],
  shrinkage = 0.01,
  n.trees = 1000
)

</code></pre>

<hr>
<h2 id='compute_stats'>Compute Risk (Human+AI v. Human)</h2><span id='topic+compute_stats'></span>

<h3>Description</h3>

<p>Compute the difference in risk between human+AI and human decision makers using difference-in-means estimators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_stats(Y, D, Z, X = NULL, l01 = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_stats_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_+3A_x">X</code></td>
<td>
<p>Pretreatment covariate used for subgroup analysis (vector). Must be the same length as Y, D, Z, and A if provided. Default is NULL.</p>
</td></tr>
<tr><td><code id="compute_stats_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble the following columns:
</p>

<ul>
<li> <p><code>Z_focal</code>: The focal treatment indicator. '1' indicates the treatment group.
</p>
</li>
<li> <p><code>Z_compare</code>: The comparison treatment indicator. '0' indicates the control group.
</p>
</li>
<li> <p><code>X</code>: Pretreatment covariate (if provided).
</p>
</li>
<li> <p><code>loss_diff</code>: The difference in loss between human+AI and human decision
</p>
</li>
<li> <p><code>loss_diff_se</code>: The standard error of the difference in loss
</p>
</li>
<li> <p><code>fn_diff</code>: The difference in false negatives between human+AI and human decision
</p>
</li>
<li> <p><code>fn_diff_se</code>: The standard error of the difference in false negatives
</p>
</li>
<li> <p><code>fp_diff</code>: The difference in false positives between human+AI and human decision
</p>
</li>
<li> <p><code>fp_diff_se</code>: The standard error of the difference in false positives
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>compute_stats(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  X = NULL,
  l01 = 1
)

</code></pre>

<hr>
<h2 id='compute_stats_agreement'>Agreement of Human and AI Decision Makers</h2><span id='topic+compute_stats_agreement'></span>

<h3>Description</h3>

<p>Estimate the impact of AI recommendations on the agreement between human decisions and AI recommendations using a difference-in-means estimator of an indicator <code class="reqn">1\{D_i = A_i\}</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_stats_agreement(Y, D, Z, A, X = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_stats_agreement_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_agreement_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_agreement_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_agreement_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_agreement_+3A_x">X</code></td>
<td>
<p>Pretreatment covariate used for subgroup analysis (vector). Must be the same length as Y, D, Z, and A if provided. Default is NULL.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the following columns:
</p>

<ul>
<li> <p><code>X</code>: Pretreatment covariate (if provided).
</p>
</li>
<li> <p><code>agree_diff</code>: Difference in agreement between human decisions and AI recommendations.
</p>
</li>
<li> <p><code>agree_diff_se</code>: Standard error of the difference in agreement.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>compute_stats_agreement(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF
)

</code></pre>

<hr>
<h2 id='compute_stats_aipw'>Compute Risk (Human+AI v. Human)</h2><span id='topic+compute_stats_aipw'></span>

<h3>Description</h3>

<p>Compute the difference in risk between human+AI and human decision makers using AIPW estimators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_stats_aipw(Y, D, Z, nuis_funcs, true.pscore = NULL, X = NULL, l01 = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_stats_aipw_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code></p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_x">X</code></td>
<td>
<p>Pretreatment covariate used for subgroup analysis (vector). Must be the same length as Y, D, Z, and A if provided. Default is NULL.</p>
</td></tr>
<tr><td><code id="compute_stats_aipw_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble the following columns:
</p>

<ul>
<li> <p><code>Z_focal</code>: The focal treatment indicator. '1' indicates the treatment group.
</p>
</li>
<li> <p><code>Z_compare</code>: The comparison treatment indicator. '0' indicates the control group.
</p>
</li>
<li> <p><code>X</code>: Pretreatment covariate (if provided).
</p>
</li>
<li> <p><code>loss_diff</code>: The difference in loss between human+AI and human decision
</p>
</li>
<li> <p><code>loss_diff_se</code>: The standard error of the difference in loss
</p>
</li>
<li> <p><code>fn_diff</code>: The difference in false negatives between human+AI and human decision
</p>
</li>
<li> <p><code>fn_diff_se</code>: The standard error of the difference in false negatives
</p>
</li>
<li> <p><code>fp_diff</code>: The difference in false positives between human+AI and human decision
</p>
</li>
<li> <p><code>fp_diff_se</code>: The standard error of the difference in false positives
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>compute_stats_aipw(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  nuis_funcs = nuis_func,
  true.pscore = rep(0.5, nrow(NCAdata)),
  X = NULL,
  l01 = 1
)

</code></pre>

<hr>
<h2 id='compute_stats_subgroup'>Compute Risk (Human+AI v. Human) for a Subgroup Defined by AI Recommendation</h2><span id='topic+compute_stats_subgroup'></span>

<h3>Description</h3>

<p>Compute the difference in risk between human+AI and human decision makers, for a subgroup <code class="reqn">\{A_i = a\}</code>, using AIPW estimators.
This can be used for computing how the decision maker overrides the AI recommendation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_stats_subgroup(
  Y,
  D,
  Z,
  A,
  a = 1,
  nuis_funcs,
  true.pscore = NULL,
  X = NULL,
  l01 = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_stats_subgroup_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_a">a</code></td>
<td>
<p>A specific AI recommendation value to create the subset (numeric: 0 or 1).</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code>. If NULL, the function will compute the nuisance functions using the provided data. Note that <code>V</code> must be provided if <code>nuis_funcs</code> is NULL.</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_x">X</code></td>
<td>
<p>Pretreatment covariate used for subgroup analysis (vector). Must be the same length as Y, D, Z, and A if provided. Default is NULL.</p>
</td></tr>
<tr><td><code id="compute_stats_subgroup_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble the following columns:
</p>

<ul>
<li> <p><code>Z_focal</code>: The focal treatment indicator. '1' indicates the treatment group.
</p>
</li>
<li> <p><code>Z_compare</code>: The comparison treatment indicator. '0' indicates the control group.
</p>
</li>
<li> <p><code>X</code>: Pretreatment covariate (if provided).
</p>
</li>
<li> <p><code>loss_diff</code>: The difference in loss between human+AI and human decision
</p>
</li>
<li> <p><code>loss_diff_se</code>: The standard error of the difference in loss
</p>
</li>
<li> <p><code>tn_fn_diff</code>: The difference in true negatives and false negatives between human+AI and human decision
</p>
</li>
<li> <p><code>tn_fn_diff_se</code>: The standard error of the difference in true negatives and false negatives
</p>
</li>
<li> <p><code>tp_diff</code>: The difference in true positives between human+AI and human decision
</p>
</li>
<li> <p><code>tp_diff_se</code>: The standard error of the difference in true positives
</p>
</li>
<li> <p><code>tn_diff</code>: The difference in true negatives between human+AI and human decision
</p>
</li>
<li> <p><code>tn_diff_se</code>: The standard error of the difference in true negatives
</p>
</li>
<li> <p><code>fn_diff</code>: The difference in false negatives between human+AI and human decision
</p>
</li>
<li> <p><code>fn_diff_se</code>: The standard error of the difference in false negatives
</p>
</li>
<li> <p><code>fp_diff</code>: The difference in false positives between human+AI and human decision
</p>
</li>
<li> <p><code>fp_diff_se</code>: The standard error of the difference in false positives
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>compute_stats_subgroup(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  a = 1,
  nuis_funcs = nuis_func,
  true.pscore = rep(0.5, nrow(NCAdata)),
  X = NULL,
  l01 = 1
)

</code></pre>

<hr>
<h2 id='crossfit'>Crossfitting for nuisance functions</h2><span id='topic+crossfit'></span><span id='topic+gbm'></span>

<h3>Description</h3>

<p>Implement crossfitting with boosting methods and get predicted values for outcome/decision regression or propensity score models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crossfit(data, include_for_fit, form, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="crossfit_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code>  to fit on.</p>
</td></tr>
<tr><td><code id="crossfit_+3A_include_for_fit">include_for_fit</code></td>
<td>
<p>Boolean vector for whether or not a unit should be included in fitting (e.g. treated/control).</p>
</td></tr>
<tr><td><code id="crossfit_+3A_form">form</code></td>
<td>
<p>Formula for outcome regression/propensity score models.</p>
</td></tr>
<tr><td><code id="crossfit_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code>gbm</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of predicted values
</p>

<hr>
<h2 id='FTAdata'>Interim Dane data with failure to appear (FTA) as an outcome</h2><span id='topic+FTAdata'></span>

<h3>Description</h3>

<p>An interim dataset containing pre-treatment covariates, a binary treatment (Z), an ordinal decision (D),
and an outcome variable (Y). The data used for the paper, and made available here, are interim, based on
only half of the observations in the study and (for those observations) only half of the study follow-up period.
We use them only to illustrate methods, not to draw substantive conclusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>FTAdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 1891 rows and 19 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>Y</dt><dd><p>outcome</p>
</dd>
<dt>Sex</dt><dd><p>male or female</p>
</dd>
<dt>White</dt><dd><p>white or non-white</p>
</dd>
<dt>SexWhite</dt><dd><p>the interaction between gender and race</p>
</dd>
<dt>Age</dt><dd><p>age</p>
</dd>
<dt>PendingChargeAtTimeOfOffense</dt><dd><p>binary variable for pending charge (felony, misdemeanor, or both) at the time of offense</p>
</dd>
<dt>NCorNonViolentMisdemeanorCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>ViolentMisdemeanorCharge</dt><dd><p>binary variable for current violent misdemeanor charge</p>
</dd>
<dt>ViolentFelonyCharge</dt><dd><p>binary variable for current violent felony charge</p>
</dd>
<dt>NonViolentFelonyCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>PriorMisdemeanorConviction</dt><dd><p>binary variable for prior conviction of misdemeanor</p>
</dd>
<dt>PriorFelonyConviction</dt><dd><p>binary variable for prior conviction of felony</p>
</dd>
<dt>PriorViolentConviction</dt><dd><p>four-level ordinal variable for prior violent conviction</p>
</dd>
<dt>PriorSentenceToIncarceration</dt><dd><p>binary variable for prior sentence to incarceration</p>
</dd>
<dt>PriorFTAInPast2Years</dt><dd><p>three-level ordinal variable for FTAs from past two years</p>
</dd>
<dt>PriorFTAOlderThan2Years</dt><dd><p>binary variable for FTAs from over two years ago</p>
</dd>
<dt>Staff_ReleaseRecommendation</dt><dd><p>four-level ordinal variable for the DMF recommendation</p>
</dd>
</dl>


<hr>
<h2 id='g_legend'>Pulling ggplot legend</h2><span id='topic+g_legend'></span>

<h3>Description</h3>

<p>Pulling ggplot legend
</p>


<h3>Usage</h3>

<pre><code class='language-R'>g_legend(p)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="g_legend_+3A_p">p</code></td>
<td>
<p>A <code>ggplot</code> of which legend should be pulled.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot legend.
</p>

<hr>
<h2 id='HearingDate'>Interim court event hearing date</h2><span id='topic+HearingDate'></span>

<h3>Description</h3>

<p>An Interim Dane court event hearing date of Dane data in factor format. The data used for the paper, and made available here, are interim, based on
only half of the observations in the study and (for those observations) only half of the study follow-up period.
We use them only to illustrate methods, not to draw substantive conclusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>HearingDate
</code></pre>


<h3>Format</h3>

<p>A date variable in factor format.
</p>

<hr>
<h2 id='hearingdate_synth'>Synthetic court event hearing date</h2><span id='topic+hearingdate_synth'></span>

<h3>Description</h3>

<p>A synthetic court event hearing date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hearingdate_synth
</code></pre>


<h3>Format</h3>

<p>A date variable.
</p>

<hr>
<h2 id='nca_follow_policy'>NCA follow policy (internal; increasing monotonicity)</h2><span id='topic+nca_follow_policy'></span>

<h3>Description</h3>

<p>Optimal policy whether to follow PSA recommendation for NCA as an outcome
and policy class with an increasing monotonicity constraint.
Used for the replication in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_follow_policy
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 6 variables:
</p>

<dl>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>wts</dt><dd><p>Weight for each observation</p>
</dd>
<dt>n</dt><dd><p>Number of such cases</p>
</dd>
<dt>policy</dt><dd><p>Optimal policy</p>
</dd>
</dl>


<hr>
<h2 id='nca_follow_policy_dec'>NCA follow policy (internal; decreasing monotonicity)</h2><span id='topic+nca_follow_policy_dec'></span>

<h3>Description</h3>

<p>Optimal policy whether to follow PSA recommendation for NCA as an outcome 
and policy class with an decreasing monotonicity constraint.
Used for the replication in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_follow_policy_dec
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 6 variables:
</p>

<dl>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>wts</dt><dd><p>Weight for each observation</p>
</dd>
<dt>n</dt><dd><p>Number of such cases</p>
</dd>
<dt>policy</dt><dd><p>Optimal policy</p>
</dd>
</dl>


<hr>
<h2 id='nca_provide_policy'>NCA provide policy (internal; increasing monotonicity)</h2><span id='topic+nca_provide_policy'></span>

<h3>Description</h3>

<p>Optimal policy whether to provide PSA recommendation for NCA as an outcome 
and policy class with an increasing monotonicity constraint.
Used for the replication in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_provide_policy
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 6 variables:
</p>

<dl>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>wts</dt><dd><p>Weight for each observation</p>
</dd>
<dt>n</dt><dd><p>Number of such cases</p>
</dd>
<dt>policy</dt><dd><p>Optimal policy</p>
</dd>
</dl>


<hr>
<h2 id='nca_provide_policy_dec'>NCA provide policy (internal; decreasing monotonicity)</h2><span id='topic+nca_provide_policy_dec'></span>

<h3>Description</h3>

<p>Optimal policy whether to provide PSA recommendation for NCA as an outcome 
and policy class with an decreasing monotonicity constraint.
Used for the replication in the vignette.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_provide_policy_dec
</code></pre>


<h3>Format</h3>

<p>A data frame with 41 rows and 6 variables:
</p>

<dl>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>wts</dt><dd><p>Weight for each observation</p>
</dd>
<dt>n</dt><dd><p>Number of such cases</p>
</dd>
<dt>policy</dt><dd><p>Optimal policy</p>
</dd>
</dl>


<hr>
<h2 id='NCAdata'>Interim Dane data with new criminal activity (NCA) as an outcome</h2><span id='topic+NCAdata'></span>

<h3>Description</h3>

<p>An interim dataset containing pre-treatment covariates, a binary treatment (Z), an ordinal decision (D),
and an outcome variable (Y). The data used for the paper, and made available here, are interim, based on
only half of the observations in the study and (for those observations) only half of the study follow-up period.
We use them only to illustrate methods, not to draw substantive conclusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NCAdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 1891 rows and 19 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>Y</dt><dd><p>outcome</p>
</dd>
<dt>Sex</dt><dd><p>male or female</p>
</dd>
<dt>White</dt><dd><p>white or non-white</p>
</dd>
<dt>SexWhite</dt><dd><p>the interaction between gender and race</p>
</dd>
<dt>Age</dt><dd><p>age</p>
</dd>
<dt>PendingChargeAtTimeOfOffense</dt><dd><p>binary variable for pending charge (felony, misdemeanor, or both) at the time of offense</p>
</dd>
<dt>NCorNonViolentMisdemeanorCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>ViolentMisdemeanorCharge</dt><dd><p>binary variable for current violent misdemeanor charge</p>
</dd>
<dt>ViolentFelonyCharge</dt><dd><p>binary variable for current violent felony charge</p>
</dd>
<dt>NonViolentFelonyCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>PriorMisdemeanorConviction</dt><dd><p>binary variable for prior conviction of misdemeanor</p>
</dd>
<dt>PriorFelonyConviction</dt><dd><p>binary variable for prior conviction of felony</p>
</dd>
<dt>PriorViolentConviction</dt><dd><p>four-level ordinal variable for prior violent conviction</p>
</dd>
<dt>PriorSentenceToIncarceration</dt><dd><p>binary variable for prior sentence to incarceration</p>
</dd>
<dt>PriorFTAInPast2Years</dt><dd><p>three-level ordinal variable for FTAs from past two years</p>
</dd>
<dt>PriorFTAOlderThan2Years</dt><dd><p>binary variable for FTAs from over two years ago</p>
</dd>
<dt>Staff_ReleaseRecommendation</dt><dd><p>four-level ordinal variable for the DMF recommendation</p>
</dd>
</dl>


<hr>
<h2 id='nuis_func'>Nuisance functions (internal)</h2><span id='topic+nuis_func'></span>

<h3>Description</h3>

<p>Nuisance functions generated with 'compute_nuisance_functions' for the illustration purpose.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuis_func
</code></pre>


<h3>Format</h3>

<p>An object of class <code>nuisance_functions</code> of length 2.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>

<dl>
<dt><code>z_models</code></dt><dd><p>A <code>data.frame</code> with the following columns:
</p>

<dl>
<dt><code>idx</code></dt><dd><p>Index of observation.</p>
</dd>
<dt><code>d_pred</code></dt><dd><p>Predicted probability of decision.</p>
</dd>
<dt><code>y_pred</code></dt><dd><p>Predicted probability of outcome.</p>
</dd>
<dt><code>Z</code></dt><dd><p>Treatment group.</p>
</dd>
</dl>

</dd>
<dt><code>pscore</code></dt><dd><p>A vector of predicted propensity scores.</p>
</dd>
</dl>


<hr>
<h2 id='nuis_func_ai'>Nuisance functions conditioning on AI (internal)</h2><span id='topic+nuis_func_ai'></span>

<h3>Description</h3>

<p>Nuisance functions generated with 'compute_nuisance_functions_ai' for the illustration purpose.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nuis_func_ai
</code></pre>


<h3>Format</h3>

<p>An object of class <code>nuisance_functions</code> of length 2.
</p>


<h3>Value</h3>

<p>A list with the following components:
</p>

<dl>
<dt><code>z_models</code></dt><dd><p>A <code>data.frame</code> with the following columns:
</p>

<dl>
<dt><code>idx</code></dt><dd><p>Index of observation.</p>
</dd>
<dt><code>d_pred</code></dt><dd><p>Predicted probability of decision.</p>
</dd>
<dt><code>y_pred</code></dt><dd><p>Predicted probability of outcome.</p>
</dd>
<dt><code>Z</code></dt><dd><p>Treatment group.</p>
</dd>
<dt><code>A</code></dt><dd><p>AI recommendation.</p>
</dd>
</dl>

</dd>
<dt><code>pscore</code></dt><dd><p>A vector of predicted propensity scores.</p>
</dd>
</dl>


<hr>
<h2 id='NVCAdata'>Interim Dane data with new violent criminal activity (NVCA) as an outcome</h2><span id='topic+NVCAdata'></span>

<h3>Description</h3>

<p>An interim dataset containing pre-treatment covariates, a binary treatment (Z), an ordinal decision (D),
and an outcome variable (Y). The data used for the paper, and made available here, are interim, based on
only half of the observations in the study and (for those observations) only half of the study follow-up period.
We use them only to illustrate methods, not to draw substantive conclusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NVCAdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 1891 rows and 19 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>Y</dt><dd><p>outcome</p>
</dd>
<dt>Sex</dt><dd><p>male or female</p>
</dd>
<dt>White</dt><dd><p>white or non-white</p>
</dd>
<dt>SexWhite</dt><dd><p>the interaction between gender and race</p>
</dd>
<dt>Age</dt><dd><p>age</p>
</dd>
<dt>PendingChargeAtTimeOfOffense</dt><dd><p>binary variable for pending charge (felony, misdemeanor, or both) at the time of offense</p>
</dd>
<dt>NCorNonViolentMisdemeanorCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>ViolentMisdemeanorCharge</dt><dd><p>binary variable for current violent misdemeanor charge</p>
</dd>
<dt>ViolentFelonyCharge</dt><dd><p>binary variable for current violent felony charge</p>
</dd>
<dt>NonViolentFelonyCharge</dt><dd><p>binary variable for current non-violent felony charge</p>
</dd>
<dt>PriorMisdemeanorConviction</dt><dd><p>binary variable for prior conviction of misdemeanor</p>
</dd>
<dt>PriorFelonyConviction</dt><dd><p>binary variable for prior conviction of felony</p>
</dd>
<dt>PriorViolentConviction</dt><dd><p>four-level ordinal variable for prior violent conviction</p>
</dd>
<dt>PriorSentenceToIncarceration</dt><dd><p>binary variable for prior sentence to incarceration</p>
</dd>
<dt>PriorFTAInPast2Years</dt><dd><p>three-level ordinal variable for FTAs from past two years</p>
</dd>
<dt>PriorFTAOlderThan2Years</dt><dd><p>binary variable for FTAs from over two years ago</p>
</dd>
<dt>Staff_ReleaseRecommendation</dt><dd><p>four-level ordinal variable for the DMF recommendation</p>
</dd>
</dl>


<hr>
<h2 id='plot_agreement'>Visualize Agreement</h2><span id='topic+plot_agreement'></span>

<h3>Description</h3>

<p>Visualize the agreement between human decisions and AI recommendations using a difference-in-means estimator of an indicator <code class="reqn">1\{D_i = A_i\}</code>.
Generate a plot based on the overall agreement and subgroup-specific agreement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_agreement(
  Y,
  D,
  Z,
  A,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -0.3,
  p.ub = 0.3,
  y.lab = "Impact of PSA"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_agreement_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.3.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.3.</p>
</td></tr>
<tr><td><code id="plot_agreement_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_agreement(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male")
)

</code></pre>

<hr>
<h2 id='plot_diff_ai_aipw'>Visualize Difference in Risk (AI v. Human)</h2><span id='topic+plot_diff_ai_aipw'></span>

<h3>Description</h3>

<p>Visualize the difference in risk between AI and human decision makers using AIPW estimators.
Generate a plot based on the overall and subgroup-specific results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_diff_ai_aipw(
  Y,
  D,
  Z,
  V = NULL,
  A,
  z_compare = 0,
  l01 = 1,
  nuis_funcs = NULL,
  nuis_funcs_ai = NULL,
  true.pscore = NULL,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  zero.line = TRUE,
  arrows = TRUE,
  y.min = -Inf,
  p.title = NULL,
  p.lb = -1,
  p.ub = 1,
  y.lab = "PSA versus Human",
  p.label = c("PSA worse", "PSA better")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_diff_ai_aipw_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_v">V</code></td>
<td>
<p>A matrix of pretreatment covariates (numeric matrix). Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_a">A</code></td>
<td>
<p>An observed AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_z_compare">z_compare</code></td>
<td>
<p>A compare treatment indicator (numeric). Default 0.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives. Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code>. If NULL, the function will compute the nuisance functions using the provided data. Note that <code>V</code> must be provided if <code>nuis_funcs</code> is NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_nuis_funcs_ai">nuis_funcs_ai</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions_ai">compute_nuisance_functions_ai</a></code></p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_zero.line">zero.line</code></td>
<td>
<p>A logical indicating whether to include a zero line. Default TRUE.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_arrows">arrows</code></td>
<td>
<p>A logical indicating whether to include arrows. Default TRUE.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_y.min">y.min</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -Inf.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.2.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.2.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;PSA versus Human&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_ai_aipw_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_diff_ai_aipw(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  z_compare = 0,
  nuis_funcs = nuis_func,
  nuis_funcs_ai = nuis_func_ai,
  true.pscore = rep(0.5, nrow(NCAdata)),
  l01 = 1,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male"),
  zero.line = TRUE, arrows = TRUE, y.min = -Inf,
  p.title = NULL, p.lb = -0.3, p.ub = 0.3
)

</code></pre>

<hr>
<h2 id='plot_diff_human'>Visualize Difference in Risk (Human+AI v. Human)</h2><span id='topic+plot_diff_human'></span>

<h3>Description</h3>

<p>Visualize the the difference in risk between human+AI and human decision makers using difference-in-means estimators.
Generate a plot based on the overall agreement and subgroup-specific agreement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_diff_human(
  Y,
  D,
  Z,
  l01 = 1,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -1,
  p.ub = 1,
  y.lab = "Impact of PSA",
  p.label = c("PSA harms", "PSA helps")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_diff_human_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives. Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_diff_human(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  l01 = 1,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male"),
  p.title = NULL, p.lb = -0.3, p.ub = 0.3
)

</code></pre>

<hr>
<h2 id='plot_diff_human_aipw'>Visualize Difference in Risk (Human+AI v. Human)</h2><span id='topic+plot_diff_human_aipw'></span>

<h3>Description</h3>

<p>Visualize the difference in risk between human+AI and human decision makers using AIPW estimators.
Generate a plot based on the overall agreement and subgroup-specific agreement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_diff_human_aipw(
  Y,
  D,
  Z,
  V = NULL,
  l01 = 1,
  nuis_funcs = NULL,
  true.pscore = NULL,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -1,
  p.ub = 1,
  y.lab = "Impact of PSA",
  p.label = c("PSA harms", "PSA helps")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_diff_human_aipw_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_v">V</code></td>
<td>
<p>A matrix of pretreatment covariates (numeric matrix). Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives. Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code>. If NULL, the function will compute the nuisance functions using the provided data. Note that <code>V</code> must be provided if <code>nuis_funcs</code> is NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_human_aipw_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_diff_human_aipw(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  nuis_funcs = nuis_func,
  true.pscore = rep(0.5, nrow(NCAdata)),
  l01 = 1,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male"),
  p.title = NULL, p.lb = -0.3, p.ub = 0.3
)

</code></pre>

<hr>
<h2 id='plot_diff_subgroup'>Visualize Difference in Risk (Human+AI v. Human) for a Subgroup Defined by AI Recommendation</h2><span id='topic+plot_diff_subgroup'></span>

<h3>Description</h3>

<p>Visualize the the difference in risk between human+AI and human decision makers using AIPW estimators, for a subgroup defined by AI recommendation.
Generate a plot based on the overall agreement and subgroup-specific agreement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_diff_subgroup(
  Y,
  D,
  Z,
  A,
  a = 1,
  V = NULL,
  l01 = l01,
  nuis_funcs = NULL,
  true.pscore = NULL,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -1,
  p.ub = 1,
  y.lab = "Impact of PSA",
  p.label = c("Human correct", "PSA correct"),
  label = "TNP - FNP",
  metrics = c("Misclassification Rate", "False Negative Proportion",
    "False Positive Proportion")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_diff_subgroup_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_a">a</code></td>
<td>
<p>A specific AI recommendation value to create the subset (numeric: 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_v">V</code></td>
<td>
<p>A matrix of pretreatment covariates (numeric matrix). Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_l01">l01</code></td>
<td>
<p>Ratio of the loss between false positives and false negatives. Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code>. If NULL, the function will compute the nuisance functions using the provided data. Note that <code>V</code> must be provided if <code>nuis_funcs</code> is NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -1.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 1.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;Human correct&quot;, &quot;PSA correct&quot;).</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_label">label</code></td>
<td>
<p>A label for the plot (character). Default &quot;TNP - FNP&quot;.</p>
</td></tr>
<tr><td><code id="plot_diff_subgroup_+3A_metrics">metrics</code></td>
<td>
<p>A vector of metrics to include in the plot (character). Default c(&quot;Misclassification Rate&quot;, &quot;False Negative Proportion&quot;, &quot;False Positive Proportion&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_diff_subgroup(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  a = 1,
  l01 = 1,
  nuis_funcs = nuis_func,
  true.pscore = rep(0.5, nrow(NCAdata)),
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male"),
  p.title = NULL, p.lb = -0.5, p.ub = 0.5,
  label = "TNP - FNP",
  metrics = c("True Negative Proportion (TNP)", "False Negative Proportion (FNP)", "TNP - FNP")
)

</code></pre>

<hr>
<h2 id='plot_preference'>Visualize Preference</h2><span id='topic+plot_preference'></span>

<h3>Description</h3>

<p>Compute the difference in risk between AI and human decision makers using AIPW estimators
over a set of loss ratios, and then visualize when we prefer human over AI decision makers.
Generate a plot based on the overall and subgroup-specific results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_preference(
  Y,
  D,
  Z,
  V = NULL,
  A,
  z_compare = 0,
  true.pscore = NULL,
  nuis_funcs = NULL,
  nuis_funcs_ai = NULL,
  l01_seq = 10^seq(-2, 2, length.out = 100),
  alpha = 0.05,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  legend.position = "none",
  p.label = c("AI-alone preferred", "Human-alone preferred", "Ambiguous")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_preference_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_v">V</code></td>
<td>
<p>A matrix of pretreatment covariates (numeric matrix). Optional.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_a">A</code></td>
<td>
<p>An observed AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_z_compare">z_compare</code></td>
<td>
<p>A compare treatment indicator (numeric). Default 0.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_true.pscore">true.pscore</code></td>
<td>
<p>A vector of true propensity scores (numeric), if available. Optional.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_nuis_funcs">nuis_funcs</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions">compute_nuisance_functions</a></code>. If NULL, the function will compute the nuisance functions using the provided data. Note that <code>V</code> must be provided if <code>nuis_funcs</code> is NULL.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_nuis_funcs_ai">nuis_funcs_ai</code></td>
<td>
<p>output from <code><a href="#topic+compute_nuisance_functions_ai">compute_nuisance_functions_ai</a></code></p>
</td></tr>
<tr><td><code id="plot_preference_+3A_l01_seq">l01_seq</code></td>
<td>
<p>A candidate list of ratio of the loss between false positives and false negatives. Default <code>10^seq(-2, 2, length.out = 100)</code>.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_alpha">alpha</code></td>
<td>
<p>A significance level (numeric). Default 0.05.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_legend.position">legend.position</code></td>
<td>
<p>Position of the legend (character).</p>
</td></tr>
<tr><td><code id="plot_preference_+3A_p.label">p.label</code></td>
<td>
<p>A vector of three labels for the annotations (character). Default c(&quot;AI-alone preferred&quot;, &quot;Human-alone preferred&quot;, &quot;Ambiguous&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_preference(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  z_compare = 0,
  nuis_funcs = nuis_func,
  nuis_funcs_ai = nuis_func_ai,
  true.pscore = rep(0.5, nrow(NCAdata)),
  l01_seq = 10^seq(-2, 2, length.out = 10),
  alpha = 0.05,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender",
  x.order = c("Overall", "Non-white", "White", "Female", "Male"),
  p.title = NULL, legend.position = "none",
  p.label = c("AI-alone preferred", "Human-alone preferred", "Ambiguous")
)

</code></pre>

<hr>
<h2 id='PlotAPCE'>Plot APCE</h2><span id='topic+PlotAPCE'></span>

<h3>Description</h3>

<p>See Figure 4 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotAPCE(
  res,
  y.max = 0.1,
  decision.labels = c("signature bond", "small cash bond", "large cash bond"),
  shape.values = c(16, 17, 15),
  col.values = c("blue", "black", "red", "brown"),
  label = TRUE,
  r.labels = c("safe", "easily\npreventable", "prevent-\nable", "risky\n"),
  label.position = c("top", "top", "top", "top"),
  top.margin = 0.01,
  bottom.margin = 0.01,
  name.group = c("Overall", "Female", "Male", "Non-white\nMale", "White\nMale"),
  label.size = 4
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotAPCE_+3A_res">res</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>APCEsummary()</code>.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_y.max">y.max</code></td>
<td>
<p>Maximum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_decision.labels">decision.labels</code></td>
<td>
<p>Labels of decisions (D).</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_shape.values">shape.values</code></td>
<td>
<p>Shape of point for each decisions.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_col.values">col.values</code></td>
<td>
<p>Color of point for each principal stratum.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_label">label</code></td>
<td>
<p>A logical argument whether to specify label of each principal stratum. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_r.labels">r.labels</code></td>
<td>
<p>Label of each principal stratum.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_label.position">label.position</code></td>
<td>
<p>The position of labels.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_top.margin">top.margin</code></td>
<td>
<p>Top margin of labels.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_bottom.margin">bottom.margin</code></td>
<td>
<p>Bottom margin of labels.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_name.group">name.group</code></td>
<td>
<p>A character vector including the labels of five subgroups.</p>
</td></tr>
<tr><td><code id="PlotAPCE_+3A_label.size">label.size</code></td>
<td>
<p>Size of label.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc,
  subgroup = subgroup_synth
)
sample_apce_summary &lt;- APCEsummary(sample_apce[["APCE.mcmc"]])
PlotAPCE(sample_apce_summary,
  y.max = 0.25, decision.labels = c(
    "signature", "small cash",
    "middle cash", "large cash"
  ), shape.values = c(16, 17, 15, 18),
  col.values = c("blue", "black", "red", "brown", "purple"), label = FALSE
)


</code></pre>

<hr>
<h2 id='PlotDIMdecisions'>Plot diff-in-means estimates</h2><span id='topic+PlotDIMdecisions'></span>

<h3>Description</h3>

<p>See Figure 2 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotDIMdecisions(
  res,
  y.max = 0.2,
  decision.labels = c("signature bond   ", "small cash bond   ", "large cash bond"),
  col.values = c("grey60", "grey30", "grey6"),
  shape.values = c(16, 17, 15)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotDIMdecisions_+3A_res">res</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>CalDIMsubgroup</code>.</p>
</td></tr>
<tr><td><code id="PlotDIMdecisions_+3A_y.max">y.max</code></td>
<td>
<p>Maximum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotDIMdecisions_+3A_decision.labels">decision.labels</code></td>
<td>
<p>Labels of decisions (D).</p>
</td></tr>
<tr><td><code id="PlotDIMdecisions_+3A_col.values">col.values</code></td>
<td>
<p>Color of point for each decisions.</p>
</td></tr>
<tr><td><code id="PlotDIMdecisions_+3A_shape.values">shape.values</code></td>
<td>
<p>Shape of point for each decisions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
res_dec &lt;- CalDIMsubgroup(synth, subgroup = subgroup_synth)
PlotDIMdecisions(res_dec,
  decision.labels = c("signature", "small cash", "middle cash", "large cash"),
  col.values = c("grey60", "grey30", "grey6", "grey1"),
  shape.values = c(16, 17, 15, 18)
)

</code></pre>

<hr>
<h2 id='PlotDIMoutcomes'>Plot diff-in-means estimates</h2><span id='topic+PlotDIMoutcomes'></span>

<h3>Description</h3>

<p>See Figure 2 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotDIMoutcomes(
  res.fta,
  res.nca,
  res.nvca,
  label.position = c("top", "top", "top"),
  top.margin = 0.01,
  bottom.margin = 0.01,
  y.max = 0.2,
  label.size = 7,
  name.group = c("Overall", "Female", "Male", "Non-white\nMale", "White\nMale")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotDIMoutcomes_+3A_res.fta">res.fta</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>CalDIMsubgroup</code> with Y = FTA.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_res.nca">res.nca</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>CalDIMsubgroup</code> with Y = NCA.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_res.nvca">res.nvca</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>CalDIMsubgroup</code> with Y = NVCA.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_label.position">label.position</code></td>
<td>
<p>The position of labels.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_top.margin">top.margin</code></td>
<td>
<p>Top margin of labels.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_bottom.margin">bottom.margin</code></td>
<td>
<p>Bottom margin of labels.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_y.max">y.max</code></td>
<td>
<p>Maximum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_label.size">label.size</code></td>
<td>
<p>Size of label.</p>
</td></tr>
<tr><td><code id="PlotDIMoutcomes_+3A_name.group">name.group</code></td>
<td>
<p>A character vector including the labels of five subgroups.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
synth_fta &lt;- synth_nca &lt;- synth_nvca &lt;- synth
set.seed(123)
synth_fta$Y &lt;- sample(0:1, 1000, replace = TRUE)
synth_nca$Y &lt;- sample(0:1, 1000, replace = TRUE)
synth_nvca$Y &lt;- sample(0:1, 1000, replace = TRUE)
res_fta &lt;- CalDIMsubgroup(synth_fta, subgroup = subgroup_synth)
res_nca &lt;- CalDIMsubgroup(synth_nca, subgroup = subgroup_synth)
res_nvca &lt;- CalDIMsubgroup(synth_nvca, subgroup = subgroup_synth)
PlotDIMoutcomes(res_fta, res_nca, res_nvca)

</code></pre>

<hr>
<h2 id='PlotFairness'>Plot the principal fairness</h2><span id='topic+PlotFairness'></span>

<h3>Description</h3>

<p>See Figure 5 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotFairness(
  res,
  top.margin = 0.01,
  y.max = 0.2,
  y.min = -0.1,
  r.labels = c("Safe", "Easily\nPreventable", "Preventable", "Risky"),
  label = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotFairness_+3A_res">res</code></td>
<td>
<p>The data frame generated from <code>CalFairness</code>.</p>
</td></tr>
<tr><td><code id="PlotFairness_+3A_top.margin">top.margin</code></td>
<td>
<p>The index of subgroups (within the output of CalAPCE/CalAPCEparallel) that corresponds to the protected attributes.</p>
</td></tr>
<tr><td><code id="PlotFairness_+3A_y.max">y.max</code></td>
<td>
<p>Maximum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotFairness_+3A_y.min">y.min</code></td>
<td>
<p>Minimum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotFairness_+3A_r.labels">r.labels</code></td>
<td>
<p>Label of each principal stratum.</p>
</td></tr>
<tr><td><code id="PlotFairness_+3A_label">label</code></td>
<td>
<p>A logical argument whether to specify label.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the delta.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc, subgroup = subgroup_synth,
  burnin = 0
)
sample_fair &lt;- CalFairness(sample_apce)
PlotFairness(sample_fair, y.max = 0.4, y.min = -0.4, r.labels = c(
  "Safe", "Preventable 1",
  "Preventable 2", "Preventable 3", "Risky"
))


</code></pre>

<hr>
<h2 id='PlotOptimalDecision'>Plot optimal decision</h2><span id='topic+PlotOptimalDecision'></span>

<h3>Description</h3>

<p>See Figure 6 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotOptimalDecision(res, colname.d, idx = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotOptimalDecision_+3A_res">res</code></td>
<td>
<p>The data frame generated from <code>CalOptimalDecision</code>.</p>
</td></tr>
<tr><td><code id="PlotOptimalDecision_+3A_colname.d">colname.d</code></td>
<td>
<p>The column name of decision to be plotted.</p>
</td></tr>
<tr><td><code id="PlotOptimalDecision_+3A_idx">idx</code></td>
<td>
<p>The row index of observations to be included. The default is all the observations from the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
sample_optd &lt;- CalOptimalDecision(
  data = synth, mcmc.re = sample_mcmc,
  c0.ls = seq(0, 5, 1), c1.ls = seq(0, 5, 1),
  size = 1
) # adjust the size
sample_optd$cash &lt;- sample_optd$d1 + sample_optd$d2 + sample_optd$d3
PlotOptimalDecision(sample_optd, "cash")


</code></pre>

<hr>
<h2 id='PlotPS'>Plot the proportion of principal strata (R)</h2><span id='topic+PlotPS'></span>

<h3>Description</h3>

<p>See Figure 3 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotPS(
  res,
  y.min = 0,
  y.max = 0.75,
  col.values = c("blue", "black", "red", "brown"),
  label = TRUE,
  r.labels = c("safe", " easily             \n preventable    ",
    "\n          preventable\n", "  risky"),
  label.position = c("top", "top", "top", "bottom"),
  top.margin = 0.02,
  bottom.margin = 0.02,
  label.size = 6.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotPS_+3A_res">res</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>CalPS</code>.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_y.min">y.min</code></td>
<td>
<p>Minimum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_y.max">y.max</code></td>
<td>
<p>Maximum value of y-axis.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_col.values">col.values</code></td>
<td>
<p>Color of point for each principal stratum.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_label">label</code></td>
<td>
<p>A logical argument whether to specify label of each principal stratum. The default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_r.labels">r.labels</code></td>
<td>
<p>Label of each principal stratum.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_label.position">label.position</code></td>
<td>
<p>The position of labels.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_top.margin">top.margin</code></td>
<td>
<p>Top margin of labels.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_bottom.margin">bottom.margin</code></td>
<td>
<p>Bottom margin of labels.</p>
</td></tr>
<tr><td><code id="PlotPS_+3A_label.size">label.size</code></td>
<td>
<p>Size of label.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
subgroup_synth &lt;- list(
  1:nrow(synth), which(synth$Sex == 0), which(synth$Sex == 1),
  which(synth$Sex == 1 &amp; synth$White == 0), which(synth$Sex == 1 &amp; synth$White == 1)
)
sample_apce &lt;- CalAPCE(
  data = synth, mcmc.re = sample_mcmc,
  subgroup = subgroup_synth
)
sample_ps &lt;- CalPS(sample_apce[["P.R.mcmc"]])
PlotPS(sample_ps, col.values = c("blue", "black", "red", "brown", "purple"), label = FALSE)


</code></pre>

<hr>
<h2 id='PlotSpilloverCRT'>Plot conditional randomization test</h2><span id='topic+PlotSpilloverCRT'></span>

<h3>Description</h3>

<p>See Figure S8 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotSpilloverCRT(res)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotSpilloverCRT_+3A_res">res</code></td>
<td>
<p>A <code>list</code> generated with <code>SpilloverCRT</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
crt &lt;- SpilloverCRT(D = synth$D, Z = synth$Z, CourtEvent_HearingDate = hearingdate_synth)
PlotSpilloverCRT(crt)


</code></pre>

<hr>
<h2 id='PlotSpilloverCRTpower'>Plot power analysis of conditional randomization test</h2><span id='topic+PlotSpilloverCRTpower'></span>

<h3>Description</h3>

<p>See Figure S9 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotSpilloverCRTpower(res)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotSpilloverCRTpower_+3A_res">res</code></td>
<td>
<p>A <code>data.frame</code> generated with <code>SpilloverCRTpower</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
crt_power &lt;- SpilloverCRTpower(
  D = synth$D, Z = synth$Z,
  CourtEvent_HearingDate = hearingdate_synth,
  size = 1
) # adjust the size
PlotSpilloverCRTpower(crt_power)


</code></pre>

<hr>
<h2 id='PlotStackedBar'>Stacked barplot for the distribution of the decision given psa</h2><span id='topic+PlotStackedBar'></span>

<h3>Description</h3>

<p>See Figure 1 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotStackedBar(
  data,
  fta.label = "FTAScore",
  nca.label = "NCAScore",
  nvca.label = "NVCAFlag",
  d.colors = c("grey60", "grey30", "grey10"),
  d.labels = c("signature bond", "small cash bond", "large cash bond"),
  legend.position = "none"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotStackedBar_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of which columns includes an ordinal decision (D), and psa variables (fta, nca, and nvca).</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_fta.label">fta.label</code></td>
<td>
<p>Column name of fta score in the data. The default is <code>"FTAScore"</code>.</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_nca.label">nca.label</code></td>
<td>
<p>Column name of nca score in the data. The default is <code>"NCAScore"</code>.</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_nvca.label">nvca.label</code></td>
<td>
<p>Column name of nvca score in the data. The default is <code>"NVCAFlag"</code>.</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_d.colors">d.colors</code></td>
<td>
<p>The color of each decision.</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_d.labels">d.labels</code></td>
<td>
<p>The label of each decision.</p>
</td></tr>
<tr><td><code id="PlotStackedBar_+3A_legend.position">legend.position</code></td>
<td>
<p>The position of legend. The default is <code>"none"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of three ggplots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(psa_synth)
# Control group (PSA not provided)
PlotStackedBar(psa_synth[psa_synth$Z == 0, ], d.colors = c(
  "grey80", "grey60",
  "grey30", "grey10"
), d.labels = c(
  "signature", "small",
  "middle", "large"
))
# Treated group (PSA provided)
PlotStackedBar(psa_synth[psa_synth$Z == 0, ], d.colors = c(
  "grey80", "grey60",
  "grey30", "grey10"
), d.labels = c(
  "signature", "small",
  "middle", "large"
))

</code></pre>

<hr>
<h2 id='PlotStackedBarDMF'>Stacked barplot for the distribution of the decision given DMF recommendation</h2><span id='topic+PlotStackedBarDMF'></span>

<h3>Description</h3>

<p>See Figure 1 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotStackedBarDMF(
  data,
  dmf.label = "dmf",
  dmf.category = NULL,
  d.colors = c("grey60", "grey30", "grey10"),
  d.labels = c("signature bond", "small cash bond", "large cash bond"),
  legend.position = "none"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotStackedBarDMF_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> of which columns includes a binary treatment (Z; PSA provision), an ordinal decision (D), and DMF recommendation.</p>
</td></tr>
<tr><td><code id="PlotStackedBarDMF_+3A_dmf.label">dmf.label</code></td>
<td>
<p>Column name of DMF recommendation in the data. The default is <code>"dmf"</code>.</p>
</td></tr>
<tr><td><code id="PlotStackedBarDMF_+3A_dmf.category">dmf.category</code></td>
<td>
<p>The name of each category of DMF recommendation.</p>
</td></tr>
<tr><td><code id="PlotStackedBarDMF_+3A_d.colors">d.colors</code></td>
<td>
<p>The color of each decision.</p>
</td></tr>
<tr><td><code id="PlotStackedBarDMF_+3A_d.labels">d.labels</code></td>
<td>
<p>The label of each decision.</p>
</td></tr>
<tr><td><code id="PlotStackedBarDMF_+3A_legend.position">legend.position</code></td>
<td>
<p>The position of legend. The default is <code>"none"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of three ggplots.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(psa_synth)
PlotStackedBarDMF(psa_synth, dmf.label = "DMF", d.colors = c(
  "grey80",
  "grey60", "grey30", "grey10"
), d.labels = c(
  "signature",
  "small", "middle", "large"
))

</code></pre>

<hr>
<h2 id='PlotUtilityDiff'>Plot utility difference</h2><span id='topic+PlotUtilityDiff'></span>

<h3>Description</h3>

<p>See Figure 7 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotUtilityDiff(res, idx = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotUtilityDiff_+3A_res">res</code></td>
<td>
<p>The data frame generated from <code>CalUtilityDiff</code>.</p>
</td></tr>
<tr><td><code id="PlotUtilityDiff_+3A_idx">idx</code></td>
<td>
<p>The row index of observations to be included. The default is all the observations from the data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
synth_dmf &lt;- sample(0:1, nrow(synth), replace = TRUE) # random dmf recommendation
sample_utility &lt;- CalOptimalDecision(
  data = synth, mcmc.re = sample_mcmc,
  c0.ls = seq(0, 5, 1), c1.ls = seq(0, 5, 1),
  dmf = synth_dmf, size = 1
) # adjust the size
PlotUtilityDiff(sample_utility)


</code></pre>

<hr>
<h2 id='PlotUtilityDiffCI'>Plot utility difference with 95% confidence interval</h2><span id='topic+PlotUtilityDiffCI'></span>

<h3>Description</h3>

<p>See Figure S17 for example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PlotUtilityDiffCI(res)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PlotUtilityDiffCI_+3A_res">res</code></td>
<td>
<p>The second data frame (res.mcmc) generated from <code>CalUtilityDiff(include.utility.diff.mcmc = TRUE)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
sample_mcmc &lt;- AiEvalmcmc(data = synth, n.mcmc = 10)
synth_dmf &lt;- sample(0:1, nrow(synth), replace = TRUE) # random dmf recommendation
sample_utility &lt;- CalOptimalDecision(
  data = synth, mcmc.re = sample_mcmc,
  c0.ls = seq(0, 5, 1), c1.ls = seq(0, 5, 1),
  dmf = synth_dmf, size = 1, # adjust the size
  include.utility.diff.mcmc = TRUE
)
PlotUtilityDiffCI(sample_utility$res.mcmc)


</code></pre>

<hr>
<h2 id='psa_synth'>Synthetic PSA data</h2><span id='topic+psa_synth'></span>

<h3>Description</h3>

<p>A synthetic dataset containing a binary treatment (Z), ordinal decision (D), three PSA variables (FTAScore, NCAScore, and NVCAFlag), and DMF recommendation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>psa_synth
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows and 4 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>DMF</dt><dd><p>DMF recommendation</p>
</dd>
</dl>


<hr>
<h2 id='PSAdata'>Interim Dane PSA data</h2><span id='topic+PSAdata'></span>

<h3>Description</h3>

<p>An interim dataset containing a binary treatment (Z), ordinal decision (D), three PSA variables
(FTAScore, NCAScore, and NVCAFlag), DMF recommendation, and two pre-treatment covariates (binary
indicator for gender; binary indicator for race). The data used for the paper, and made available here, are interim, based on
only half of the observations in the study and (for those observations) only half of the study follow-up period.
We use them only to illustrate methods, not to draw substantive conclusions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PSAdata
</code></pre>


<h3>Format</h3>

<p>A data frame with 1891 rows and 7 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>FTAScore</dt><dd><p>FTA score</p>
</dd>
<dt>NCAScore</dt><dd><p>NCA score</p>
</dd>
<dt>NVCAFlag</dt><dd><p>NVCA flag</p>
</dd>
<dt>DMF</dt><dd><p>DMF recommendation</p>
</dd>
<dt>Sex</dt><dd><p>male or female</p>
</dd>
<dt>White</dt><dd><p>white or non-white</p>
</dd>
</dl>


<hr>
<h2 id='SpilloverCRT'>Conduct conditional randomization test</h2><span id='topic+SpilloverCRT'></span>

<h3>Description</h3>

<p>See S3.1 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpilloverCRT(D, Z, CourtEvent_HearingDate, n = 100, seed.number = 12345)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SpilloverCRT_+3A_d">D</code></td>
<td>
<p>A numeric vector of judge's decision.</p>
</td></tr>
<tr><td><code id="SpilloverCRT_+3A_z">Z</code></td>
<td>
<p>A numeric vector of treatment variable.</p>
</td></tr>
<tr><td><code id="SpilloverCRT_+3A_courtevent_hearingdate">CourtEvent_HearingDate</code></td>
<td>
<p>The court event hearing date.</p>
</td></tr>
<tr><td><code id="SpilloverCRT_+3A_n">n</code></td>
<td>
<p>Number of permutations.</p>
</td></tr>
<tr><td><code id="SpilloverCRT_+3A_seed.number">seed.number</code></td>
<td>
<p>An integer for random number generator.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> of the observed and permuted test statistics and its p-value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
crt &lt;- SpilloverCRT(D = synth$D, Z = synth$Z, CourtEvent_HearingDate = hearingdate_synth)


</code></pre>

<hr>
<h2 id='SpilloverCRTpower'>Conduct power analysis of conditional randomization test</h2><span id='topic+SpilloverCRTpower'></span>

<h3>Description</h3>

<p>See S3.2 for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SpilloverCRTpower(
  D,
  Z,
  CourtEvent_HearingDate,
  n = 4,
  m = 4,
  size = 2,
  cand_omegaZtilde = seq(-1.5, 1.5, by = 0.5)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="SpilloverCRTpower_+3A_d">D</code></td>
<td>
<p>A numeric vector of judge's decision.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_z">Z</code></td>
<td>
<p>A numeric vector of treatment variable.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_courtevent_hearingdate">CourtEvent_HearingDate</code></td>
<td>
<p>The court event hearing date.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_n">n</code></td>
<td>
<p>Number of permutations.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_m">m</code></td>
<td>
<p>Number of permutations.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_size">size</code></td>
<td>
<p>The number of parallel computing. The default is <code>2</code>.</p>
</td></tr>
<tr><td><code id="SpilloverCRTpower_+3A_cand_omegaztilde">cand_omegaZtilde</code></td>
<td>
<p>Candidate values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> of the result of power analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(synth)
data(hearingdate_synth)
crt_power &lt;- SpilloverCRTpower(
  D = synth$D, Z = synth$Z,
  CourtEvent_HearingDate = hearingdate_synth,
  size = 1
) # adjust the size


</code></pre>

<hr>
<h2 id='synth'>Synthetic data</h2><span id='topic+synth'></span>

<h3>Description</h3>

<p>A synthetic dataset containing pre-treatment covariates, a binary treatment (Z), an ordinal decision (D),
and an outcome variable (Y).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>synth
</code></pre>


<h3>Format</h3>

<p>A data frame with 1000 rows and 11 variables:
</p>

<dl>
<dt>Z</dt><dd><p>binary treatment</p>
</dd>
<dt>D</dt><dd><p>ordinal decision</p>
</dd>
<dt>Y</dt><dd><p>outcome</p>
</dd>
<dt>Sex</dt><dd><p>male or female</p>
</dd>
<dt>White</dt><dd><p>white or non-white</p>
</dd>
<dt>Age</dt><dd><p>age</p>
</dd>
<dt>CurrentViolentOffense</dt><dd><p>binary variable for current violent offense</p>
</dd>
<dt>PendingChargeAtTimeOfOffense</dt><dd><p>binary variable for pending charge (felony, misdemeanor, or both) at the time of offense</p>
</dd>
<dt>PriorMisdemeanorConviction</dt><dd><p>binary variable for prior conviction of misdemeanor</p>
</dd>
<dt>PriorFelonyConviction</dt><dd><p>binary variable for prior conviction of felony</p>
</dd>
<dt>PriorViolentConviction</dt><dd><p>four-level ordinal variable for prior violent conviction</p>
</dd>
</dl>


<hr>
<h2 id='table_agreement'>Table of Agreement</h2><span id='topic+table_agreement'></span>

<h3>Description</h3>

<p>Estimate the impact of AI recommendations on the agreement between human decisions and AI recommendations using a difference-in-means estimator of an indicator <code class="reqn">1\{D_i = A_i\}</code>.
Generate a table based on the overall agreement and subgroup-specific agreement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_agreement(
  Y,
  D,
  Z,
  A,
  subgroup1,
  subgroup2,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="table_agreement_+3A_y">Y</code></td>
<td>
<p>An observed outcome (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_d">D</code></td>
<td>
<p>An observed decision (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_z">Z</code></td>
<td>
<p>A treatment indicator (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_a">A</code></td>
<td>
<p>An AI recommendation (binary: numeric vector of 0 or 1).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_subgroup1">subgroup1</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_subgroup2">subgroup2</code></td>
<td>
<p>A pretreatment covariate used for subgroup analysis (vector).</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character). Default &quot;Subgroup 1&quot;.</p>
</td></tr>
<tr><td><code id="table_agreement_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character). Default &quot;Subgroup 2&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the following columns:
</p>

<ul>
<li> <p><code>cov</code>: Subgroup label.
</p>
</li>
<li> <p><code>X</code>: Subgroup value.
</p>
</li>
<li> <p><code>agree_diff</code>: Difference in agreement between human decisions and AI recommendations.
</p>
</li>
<li> <p><code>agree_diff_se</code>: Standard error of the difference in agreement.
</p>
</li>
<li> <p><code>ci_lb</code>: Lower bound of the 95% confidence interval.
</p>
</li>
<li> <p><code>ci_ub</code>: Upper bound of the 95% confidence interval.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>table_agreement(
  Y = NCAdata$Y,
  D = ifelse(NCAdata$D == 0, 0, 1),
  Z = NCAdata$Z,
  A = PSAdata$DMF,
  subgroup1 = ifelse(NCAdata$White == 1, "White", "Non-white"),
  subgroup2 = ifelse(NCAdata$Sex == 1, "Male", "Female"),
  label.subgroup1 = "Race",
  label.subgroup2 = "Gender"
)

</code></pre>

<hr>
<h2 id='TestMonotonicity'>Test monotonicity</h2><span id='topic+TestMonotonicity'></span>

<h3>Description</h3>

<p>Test monotonicity using frequentist analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TestMonotonicity(data)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TestMonotonicity_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Message indicating whether the monotonicity assumption holds.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
TestMonotonicity(synth)

</code></pre>

<hr>
<h2 id='TestMonotonicityRE'>Test monotonicity with random effects</h2><span id='topic+TestMonotonicityRE'></span>

<h3>Description</h3>

<p>Test monotonicity using frequentist analysis with random effects for the hearing date of the case.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TestMonotonicityRE(data, fixed, random)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TestMonotonicityRE_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or <code>matrix</code> of which columns consists of pre-treatment covariates, a binary treatment (Z), an ordinal decision (D), and an outcome variable (Y). The column names of the latter three should be specified as &quot;Z&quot;, &quot;D&quot;, and &quot;Y&quot; respectively.</p>
</td></tr>
<tr><td><code id="TestMonotonicityRE_+3A_fixed">fixed</code></td>
<td>
<p>A formula for the fixed-effects part of the model to fit.</p>
</td></tr>
<tr><td><code id="TestMonotonicityRE_+3A_random">random</code></td>
<td>
<p>A formula for the random-effects part of the model to fit.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Message indicating whether the monotonicity assumption holds.
</p>


<h3>References</h3>

<p>Imai, K., Jiang, Z., Greiner, D.J., Halen, R., and Shin, S. (2023).
&quot;Experimental evaluation of algorithm-assisted human decision-making:
application to pretrial public safety assessment.&quot;
Journal of the Royal Statistical Society: Series A.
&lt;DOI:10.1093/jrsssa/qnad010&gt;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(synth)
data(hearingdate_synth)
synth$CourtEvent_HearingDate &lt;- hearingdate_synth
TestMonotonicityRE(synth,
  fixed = "Y ~ Sex + White + Age +
                   CurrentViolentOffense + PendingChargeAtTimeOfOffense +
                   PriorMisdemeanorConviction + PriorFelonyConviction +
                   PriorViolentConviction + D",
  random = "~ 1|CourtEvent_HearingDate"
)

</code></pre>

<hr>
<h2 id='vis_agreement'>Visualize Agreement (internal)</h2><span id='topic+vis_agreement'></span>

<h3>Description</h3>

<p>Internal function to visualize the agreement between human decisions and AI recommendations using a difference-in-means estimator of an indicator <code class="reqn">1\{D_i = A_i\}</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_agreement(
  df,
  p.title = NULL,
  p.lb = -0.2,
  p.ub = 0.2,
  y.lab = "Impact of PSA"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vis_agreement_+3A_df">df</code></td>
<td>
<p>A data frame generated by <code>compute_stats_agreement</code> and reshaped.</p>
</td></tr>
<tr><td><code id="vis_agreement_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_agreement_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.2.</p>
</td></tr>
<tr><td><code id="vis_agreement_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.2.</p>
</td></tr>
<tr><td><code id="vis_agreement_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>

<hr>
<h2 id='vis_diff_ai'>Visualize Risk (AI v. Human; internal)</h2><span id='topic+vis_diff_ai'></span>

<h3>Description</h3>

<p>Internal function to visualize the difference in risk between AI and human decision makers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_diff_ai(
  df,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  zero.line = TRUE,
  arrows = TRUE,
  y.min = -Inf,
  p.title = NULL,
  p.lb = -1,
  p.ub = 1,
  y.lab = "PSA versus Human",
  p.label = c("PSA worse", "PSA better")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vis_diff_ai_+3A_df">df</code></td>
<td>
<p>A data frame generated by <code>compute_stats_aipw</code> and reshaped.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_zero.line">zero.line</code></td>
<td>
<p>A logical indicating whether to include a zero line. Default TRUE.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_arrows">arrows</code></td>
<td>
<p>A logical indicating whether to include arrows. Default TRUE.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_y.min">y.min</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -Inf.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;PSA versus Human&quot;.</p>
</td></tr>
<tr><td><code id="vis_diff_ai_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>

<hr>
<h2 id='vis_diff_human'>Visualize Risk (Human+AI v. Human; internal)</h2><span id='topic+vis_diff_human'></span>

<h3>Description</h3>

<p>Internal function to visualize the difference in risk between human+AI and human decision makers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_diff_human(
  df,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -0.2,
  p.ub = 0.2,
  y.lab = "Impact of PSA",
  p.label = c("PSA harms", "PSA helps")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vis_diff_human_+3A_df">df</code></td>
<td>
<p>A data frame generated by <code>compute_stats_aipw</code> and reshaped.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
<tr><td><code id="vis_diff_human_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>

<hr>
<h2 id='vis_diff_subgroup'>Visualize Risk (Human+AI v. Human; internal)</h2><span id='topic+vis_diff_subgroup'></span>

<h3>Description</h3>

<p>Internal function to visualize the difference in risk between human+AI and human decision makers, for a subgroup defined by AI recommendation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_diff_subgroup(
  df,
  label.subgroup1 = "Subgroup 1",
  label.subgroup2 = "Subgroup 2",
  x.order = NULL,
  p.title = NULL,
  p.lb = -0.2,
  p.ub = 0.2,
  y.lab = "Impact of PSA",
  p.label = c("Human correct", "PSA correct"),
  metrics = c("Misclassification Rate", "False Negative Proportion",
    "False Positive Proportion")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vis_diff_subgroup_+3A_df">df</code></td>
<td>
<p>A data frame generated by <code>compute_stats_aipw</code> and reshaped.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_label.subgroup1">label.subgroup1</code></td>
<td>
<p>A label for subgroup1 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_label.subgroup2">label.subgroup2</code></td>
<td>
<p>A label for subgroup2 (character).</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_x.order">x.order</code></td>
<td>
<p>An order for the x-axis (character vector). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_p.title">p.title</code></td>
<td>
<p>A title for the plot (character). Default NULL.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_p.lb">p.lb</code></td>
<td>
<p>A lower bound for the y-axis (numeric). Default -0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_p.ub">p.ub</code></td>
<td>
<p>An upper bound for the y-axis (numeric). Default 0.2.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_y.lab">y.lab</code></td>
<td>
<p>A label for the y-axis (character). Default &quot;Impact of PSA&quot;.</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_p.label">p.label</code></td>
<td>
<p>A vector of two labels for the annotations (character). Default c(&quot;PSA harms&quot;, &quot;PSA helps&quot;).</p>
</td></tr>
<tr><td><code id="vis_diff_subgroup_+3A_metrics">metrics</code></td>
<td>
<p>A vector of metrics to include in the plot (character). Default c(&quot;Misclassification Rate&quot;, &quot;False Negative Proportion&quot;, &quot;False Positive Proportion&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>

<hr>
<h2 id='vis_preference'>Visualize Preference (internal)</h2><span id='topic+vis_preference'></span>

<h3>Description</h3>

<p>Internal function to visualize preference for Human over AI decision makers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vis_preference(
  df,
  p.title = NULL,
  legend.position = "none",
  p.label = c("AI-alone preferred", "Human-alone preferred", "Ambiguous")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vis_preference_+3A_df">df</code></td>
<td>
<p>Data frame with columns 'X', 'l01', and 'pref'.</p>
</td></tr>
<tr><td><code id="vis_preference_+3A_p.title">p.title</code></td>
<td>
<p>Plot title (character).</p>
</td></tr>
<tr><td><code id="vis_preference_+3A_legend.position">legend.position</code></td>
<td>
<p>Position of the legend (character).</p>
</td></tr>
<tr><td><code id="vis_preference_+3A_p.label">p.label</code></td>
<td>
<p>Labels for the lines (character).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot object.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
