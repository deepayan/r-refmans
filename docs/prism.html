<!DOCTYPE html><html><head><title>Help for package prism</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {prism}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#get_prism_annual'><p>Download prism data</p></a></li>
<li><a href='#pd_get_md'><p>Get prism metadata</p></a></li>
<li><a href='#pd_get_name'><p>Perform action on &quot;prism data&quot;</p></a></li>
<li><a href='#pd_get_station_md'><p>Extract prism station metadata</p></a></li>
<li><a href='#pd_image'><p>Quick spatial image of prism data</p></a></li>
<li><a href='#pd_plot_slice'><p>Plot a slice of a raster stack</p></a></li>
<li><a href='#pd_stack'><p>Stack prism data</p></a></li>
<li><a href='#prism_archive_clean'><p>Clean the prism data by removing early and provisional data</p></a></li>
<li><a href='#prism_archive_ls'><p>List available prism data</p></a></li>
<li><a href='#prism_archive_subset'><p>Subsets PRISM folders on the disk</p></a></li>
<li><a href='#prism_archive_verify'><p>Check the integrity of downloaded PRISM data</p></a></li>
<li><a href='#prism_check'><p>Check if prism files exist</p></a></li>
<li><a href='#prism_set_dl_dir'><p>Set, check, and get prism download directory</p></a></li>
<li><a href='#prism-package'><p>prism: Access Data from the Oregon State Prism Climate Project</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Access Data from the Oregon State Prism Climate Project</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows users to access the Oregon State Prism climate data
    (<a href="https://prism.nacse.org/">https://prism.nacse.org/</a>). Using the web service API data
    can easily downloaded in bulk and loaded into R for spatial analysis.
    Some user friendly visualizations are also provided.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/prism/">https://docs.ropensci.org/prism/</a>,
<a href="https://github.com/ropensci/prism">https://github.com/ropensci/prism</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/prism/issues">https://github.com/ropensci/prism/issues</a></td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, raster, httr, dplyr, stringr, magrittr, readr, utils</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, knitr, rmarkdown, testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-18 03:41:45 UTC; RAButler</td>
</tr>
<tr>
<td>Author:</td>
<td>Hart Edmund [aut, ccp],
  Kendon Bell [aut],
  Alan Butler <a href="https://orcid.org/0000-0002-8625-6386"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alan Butler &lt;rabutler@usbr.gov&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-18 04:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='get_prism_annual'>Download prism data</h2><span id='topic+get_prism_annual'></span><span id='topic+get_prism_dailys'></span><span id='topic+get_prism_monthlys'></span><span id='topic+get_prism_normals'></span>

<h3>Description</h3>

<p>Download grid cell data from the
<a href="https://prism.nacse.org/">prism project</a>. Temperature (min, max,
and mean), mean dewpoint temperature, precipitation, and vapor pressure
deficit (min and max) can be downloaded for annual (<code>get_prism_annual()</code>),
monthly (<code>get_prism_monthlys()</code>), daily (<code>get_prism_dailys()</code>), and 30-year
averages (<code>get_prism_normals()</code>). Data are at 4km resolution, except for the
normals which can also be downloaded at 800m resolution.
</p>
<p>Download data from the prism project for 30 year normals at 4km
or 800m grid cell resolution for precipitation, mean, min and max
temperature
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_prism_annual(
  type,
  years,
  keepZip = TRUE,
  keep_pre81_months = FALSE,
  service = NULL
)

get_prism_dailys(
  type,
  minDate = NULL,
  maxDate = NULL,
  dates = NULL,
  keepZip = TRUE,
  check = "httr",
  service = NULL
)

get_prism_monthlys(
  type,
  years,
  mon = 1:12,
  keepZip = TRUE,
  keep_pre81_months = TRUE,
  service = NULL
)

get_prism_normals(type, resolution, mon = NULL, annual = FALSE, keepZip = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_prism_annual_+3A_type">type</code></td>
<td>
<p>The type of data to download. Must be &quot;ppt&quot;, &quot;tmean&quot;, &quot;tmin&quot;,
&quot;tmax&quot;, &quot;tdmean&quot;, &quot;vpdmin&quot;, or &quot;vpdmax&quot;. Note that <code>tmean ==  mean(tmin, tmax)</code>.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_years">years</code></td>
<td>
<p>a valid numeric year, or vector of years, to download data for.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_keepzip">keepZip</code></td>
<td>
<p>if <code>TRUE</code>, leave the downloaded zip files in your
'prism.path', if <code>FALSE</code>, they will be deleted.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_keep_pre81_months">keep_pre81_months</code></td>
<td>
<p>The pre-1981 data includes all monthly data and the
annual data for the specified year. If you need annual and monthly data it
is advantageous to keep all the monthly data when downloading the annual
data so you don't have to download the zip file again. When downloading
annual data, this defaults to <code>FALSE</code>. When downloading monthly data, this
defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_service">service</code></td>
<td>
<p>Either <code>NULL</code> (default) or a URL provided by PRISM staff
for subscription-based service. Example:
&quot;http://services.nacse.org/prism/data/subscription/800m&quot;. To use the
subscription option, you must use an IP address registered with PRISM
staff. When <code>NULL</code>, URL defaults to:
&quot;http://services.nacse.org/prism/data/public/4km&quot;.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_mindate">minDate</code></td>
<td>
<p>Date to start downloading daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_maxdate">maxDate</code></td>
<td>
<p>Date to end downloading daily data.  Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_dates">dates</code></td>
<td>
<p>A vector of dates to download daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_check">check</code></td>
<td>
<p>One of &quot;httr&quot; or &quot;internal&quot;. See details.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_mon">mon</code></td>
<td>
<p>a valid numeric month, or vector of months. Required for
<code>get_prism_monthlys()</code>. Can be <code>NULL</code> for <code>get_prism_normals()</code>.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_resolution">resolution</code></td>
<td>
<p>The spatial resolution of the data, must be either &quot;4km&quot;
or &quot;800m&quot;.</p>
</td></tr>
<tr><td><code id="get_prism_annual_+3A_annual">annual</code></td>
<td>
<p>if <code>TRUE</code> download annual normals.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A valid download directory must exist before downloading any prism data. This
can be set using <code><a href="#topic+prism_set_dl_dir">prism_set_dl_dir()</a></code> and can be verified using
<code><a href="#topic+prism_check_dl_dir">prism_check_dl_dir()</a></code>.
</p>
<p>For the <code>check</code> parameter, &quot;httr&quot;, the default, checks the file name using
the web service, and downloads if that file name is not in the file system.
&quot;internal&quot; (much faster) only attempts to download layers that are not
already in the file system as stable. &quot;internal&quot; should be used with caution
as it is not robust to changes in version or file names.
</p>


<h3>Annual and Monthly</h3>

<p>Annual and monthly prism data are available from 1891 to present. For
1891-1980 data, monthly and annual data are grouped together in one download
file; <code>keep_pre81_months</code> determines if the other months/yearly data are kept
after the download.  Data will be downloaded for all specified months (<code>mon</code>)
in all the <code>years</code> in the supplied vectors.
</p>


<h3>Daily</h3>

<p>Daily prism data are available beginning on January 1, 1981. To download the
daily data, dates must be in the proper format or downloading will not work
properly. Dates can be specified using either a date range via <code>minDate</code> and
<code>maxDate</code>, or a vector of <code>dates</code>, but not both.
</p>


<h3>Normals</h3>

<p>30-year normals are currently computed using 1991-2020 and are available at
4km and 800m resolution. See
<a href="https://prism.nacse.org/normals/">https://prism.nacse.org/normals/</a>.
If <code>mon</code> is specified and <code>annual</code> is <code>TRUE</code>, then monthly and annual normal
data will be downloaded.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get all annual average temperature data from 1990 to 2000
get_prism_annual(type = "tmean", year = 1990:2000, keepZip = FALSE)

## End(Not run)

## Not run: 
# get daily average temperature data for June 1 - 14, 2013
get_prism_dailys(
  type = "tmean", 
  minDate = "2013-06-01", 
  maxDate = "2013-06-14", 
  keepZip=FALSE
)

# get precipitation datat for June 1, 2013
get_prism_dailys(type = "ppt", dates = "2013/06/01", keepZip = FALSE)

# get average temperature for three specific days
get_prism_dailys(
  type="tmean", 
  dates = as.Date("2013-06-01", "2013-06-14", "2014-06-30"), 
  keepZip=FALSE
)

# will fail:
get_prism_dailys(
  type = "ppt", 
  minDate = "2013-06-01", 
  dates = "2013-06-14", 
  keepZip = FALSE
)

get_prism_dailys(
  type = "ppt", 
  minDate = "2013-06-01", 
  keepZip=FALSE
)

## End(Not run)

## Not run: 
# Get all the precipitation data for January from 1990 to 2000
get_prism_monthlys(type = "ppt", years = 1990:2000, mon = 1, keepZip = FALSE)

# Get January-December 2005 monthly precipitation
get_prism_monthlys(type = "ppt", years = 2005, mon = 1:12, keepZip = FALSE)

## End(Not run)

## Not run: 
# Get 30 year normal values for January rainfall
get_prism_normals(type = "ppt", resolution = "4km", mon = 1, keepZip = FALSE)

# Get monthly (every month) and annual 30-year normals for mean temperature
get_prism_normals(
  type = "tmean", 
  resolution = "800m", 
  mon = 1:12, 
  annual = TRUE,
  keepZip = FALSE
)

## End(Not run)

</code></pre>

<hr>
<h2 id='pd_get_md'>Get prism metadata</h2><span id='topic+pd_get_md'></span>

<h3>Description</h3>

<p>Retrieves prism metadata from the specified prism data. &quot;prism data&quot;, i.e.,
<code>pd</code> are the folder names returned by <code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code> or
<code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>. These functions get the name or date from these
data, or convert these data to a file name. A warning is provided if the
specified prism data do not exist in the archive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_get_md(pd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_get_md_+3A_pd">pd</code></td>
<td>
<p>prism data character vector.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The metadata includes the following variables from the .info.txt file for
daily, monthly, and annual data:
</p>

<ul>
<li><p> PRISM_DATASET_FILENAME
</p>
</li>
<li><p> PRISM_DATASET_CREATE_DATE
</p>
</li>
<li><p> PRISM_DATASET_TYPE
</p>
</li>
<li><p> PRISM_DATASET_VERSION
</p>
</li>
<li><p> PRISM_CODE_VERSION
</p>
</li>
<li><p> PRISM_DATASET_REMARKS
</p>
</li></ul>

<p>Additionally, two local variables are added identifying where the file is
located on the local system:
</p>

<ul>
<li><p> file_path
</p>
</li>
<li><p> folder_path
</p>
</li></ul>

<p>The annual and monthly normals data includes different keys in
the .info.txt, so they are renamed to be the same as those found in the
other temporal data. The keys/variables are renamed as follows:
</p>

<ul>
<li><p> PRISM_FILENAME &ndash;&gt; PRISM_DATASET_FILENAME
</p>
</li>
<li><p> PRISM_CREATE_DATE &ndash;&gt; PRISM_DATASET_CREATE_DATE
</p>
</li>
<li><p> PRISM_DATASET &ndash;&gt; PRISM_DATASET_TYPE
</p>
</li>
<li><p> PRISM_VERSION &ndash;&gt; PRISM_CODE_VERSION
</p>
</li>
<li><p> PRISM_REMARKS &ndash;&gt; PRISM_DATASET_REMARKS
</p>
</li></ul>

<p>Additionally, the normals does not include PRISM_DATASET_VERSION, so that
variable is added with <code>NA</code> values.
</p>


<h3>Value</h3>

<p>data.frame containing metadata for all specified prism data.
</p>

<hr>
<h2 id='pd_get_name'>Perform action on &quot;prism data&quot;</h2><span id='topic+pd_get_name'></span><span id='topic+pd_get_date'></span><span id='topic+pd_get_type'></span><span id='topic+prism_md'></span><span id='topic+pd_to_file'></span>

<h3>Description</h3>

<p>&quot;prism data&quot;, i.e., <code>pd</code> are the folder names returned by
<code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code> or <code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>. These functions get the
name or date from these data, or convert these data to a file name.
</p>
<p><code>pd_get_date()</code> extracts the date from the prism data.
Date is returned in yyyy-mm-dd format. For monthly data, dd is 01 and
for annual data mm is also 01. For normals, an empty character is returned.
</p>
<p><code>pd_get_type()</code> parses the variable from the prism data.
</p>
<p><code>prism_md()</code> is a deprecated function that has been replaced with
<code>pd_get_name()</code> and <code>pd_get_date()</code>
</p>
<p><code>pd_to_file()</code> converts prism data  to a fully specified .bil file, i.e., the
full path to the file in the prism archive. A warning is posted if the
file does not exist in the local prism archive.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_get_name(pd)

pd_get_date(pd)

pd_get_type(pd)

prism_md(f, returnDate = FALSE)

pd_to_file(pd)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_get_name_+3A_pd">pd</code></td>
<td>
<p>prism data character vector.</p>
</td></tr>
<tr><td><code id="pd_get_name_+3A_f">f</code></td>
<td>
<p>1 or more prism directories name or .bil files.</p>
</td></tr>
<tr><td><code id="pd_get_name_+3A_returndate">returnDate</code></td>
<td>
<p>TRUE or FALSE. If TRUE, an ISO date is returned.  By
default years will come back with YYYY-01-01 and months as YYYY-MM-01</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>pd_get_name()</code> extracts a long, human readable name from the prism
data.
</p>


<h3>Value</h3>

<p><code>pd_get_name()</code> and <code>pd_get_date()</code> return a character vector of
names/dates.
</p>

<hr>
<h2 id='pd_get_station_md'>Extract prism station metadata</h2><span id='topic+pd_get_station_md'></span><span id='topic+get_prism_station_md'></span>

<h3>Description</h3>

<p><code>pd_get_station_md()</code> extracts prism metadata on the stations used to
generate the prism data. <strong>The data must already be downloaded
and available in the prism download folder.</strong> &quot;prism data&quot;, i.e., <code>pd</code> are
the folder names returned by <code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code> or
<code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>.
</p>
<p><code>get_prism_station_md()</code> is a deprecated version of
<code>pd_get_station_md()</code> that only works with daily prism data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_get_station_md(pd)

get_prism_station_md(type, minDate = NULL, maxDate = NULL, dates = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_get_station_md_+3A_pd">pd</code></td>
<td>
<p>prism data character vector.</p>
</td></tr>
<tr><td><code id="pd_get_station_md_+3A_type">type</code></td>
<td>
<p>The type of data you want to subset. Must be &quot;ppt&quot;, &quot;tmean&quot;,
&quot;tmin&quot;, &quot;tmax&quot;, &quot;tdmean&quot;, &quot;vpdmin&quot;, or &quot;vpdmax&quot;.</p>
</td></tr>
<tr><td><code id="pd_get_station_md_+3A_mindate">minDate</code></td>
<td>
<p>Date to start subsetting daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="pd_get_station_md_+3A_maxdate">maxDate</code></td>
<td>
<p>Date to end subsetting daily data.  Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="pd_get_station_md_+3A_dates">dates</code></td>
<td>
<p>A vector of daily dates to subset. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that station metadata does not exist for &quot;tmean&quot; type or for any
&quot;annual&quot; temporal periods.
</p>
<p>See <code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code> for further details
on specifying ranges of dates for different temporal periods.
</p>


<h3>Value</h3>

<p>A <code>tbl_df</code> containing metadata on the stations used for the specified
day and variable. The data frame contains the following columns:
&quot;date&quot;, &quot;prism_data&quot;, &quot;type&quot;, &quot;station&quot;, &quot;name&quot;, &quot;longitude&quot;,
&quot;latitude&quot;, &quot;elevation&quot;, &quot;network&quot;, &quot;stnid&quot;
</p>
<p>The &quot;date&quot; column is a character representation of the data. Monthly and
annual data are given first day of month, and first month of year for
reporting here. Monthly and annual normals are empty strings.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# download and then get meta data for January 1, 2010 precipitation
get_prism_dailys("ppt", dates = "2010-01-01")
pd &lt;- prism_archive_subset("ppt", "daily", dates = "2010-01-01")

# will warn that 2010-01-02 is not found:
pd_get_station_md(pd)

## End(Not run)
  
</code></pre>

<hr>
<h2 id='pd_image'>Quick spatial image of prism data</h2><span id='topic+pd_image'></span><span id='topic+prism_image'></span>

<h3>Description</h3>

<p><code>pd_image()</code> makes a spatial image plot of the specified prism
data (single variable and time step.). It is meant for rapid visualization,
but more detailed plots will require other methods.
</p>
<p><code>prism_image()</code> is the deprecated version of <code>pd_image()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_image(pd, col = "heat")

prism_image(prismfile, col = "heat")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_image_+3A_pd">pd</code>, <code id="pd_image_+3A_prismfile">prismfile</code></td>
<td>
<p>the name of a single file to be plotted, this is most
easily found through <code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code> or <code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>.</p>
</td></tr>
<tr><td><code id="pd_image_+3A_col">col</code></td>
<td>
<p>the color pattern to use.  The default is heat, the other valid
option is &quot;redblue&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns <code>gg</code> object of the image.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code>, <code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>,
<code><a href="ggplot2.html#topic+geom_tile">ggplot2::geom_raster()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_prism_dailys(
  type = "tmean",
  minDate = "2013-06-01",
  maxDate = "2013-06-14",
  keepZip = FALSE
)

# get June 5th
pd &lt;- prism_archive_subset("tmean", "daily", dates = "2013-06-05")

# and plot it
pd_image(pd)

## End(Not run)

</code></pre>

<hr>
<h2 id='pd_plot_slice'>Plot a slice of a raster stack</h2><span id='topic+pd_plot_slice'></span><span id='topic+prism_slice'></span>

<h3>Description</h3>

<p><code>pd_plot_slice()</code> plots a slice of data at a single point location from the
specified prism data.
</p>
<p><code>prism_slice()</code> is the deprecated version of <code>pd_plot_slice()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_plot_slice(pd, location)

prism_slice(location, prismfile)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_plot_slice_+3A_pd">pd</code>, <code id="pd_plot_slice_+3A_prismfile">prismfile</code></td>
<td>
<p>a vector of output from <code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code> or
<code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code> giving a list of prism files to extract data from
and plot. The latter is preferred as it will help ensure the prism data
are from the same variable and temporal period.</p>
</td></tr>
<tr><td><code id="pd_plot_slice_+3A_location">location</code></td>
<td>
<p>a vector of a single location in the form of long,lat</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user should ensure the prism data comes from a continuous data
set and is made up of the same temporal period. Otherwise the plot will look
erratic and incorrect.
</p>


<h3>Value</h3>

<p>A <code>gg</code> object of the plot for the requested <code>location</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
### Assumes you have a clean prism directory
get_prism_dailys(
  type="tmean", 
  minDate = "2013-06-01", 
  maxDate = "2013-06-14",
  keepZip = FALSE
)
p &lt;- pd_plot_slice(
  prism_archive_subset("tmean", "daily", year = 2020), 
  c(-73.2119,44.4758)
)
print(p)

## End(Not run)

</code></pre>

<hr>
<h2 id='pd_stack'>Stack prism data</h2><span id='topic+pd_stack'></span><span id='topic+prism_stack'></span>

<h3>Description</h3>

<p><code>pd_stack()</code> creates a raster stack from prism data. It is up to the user to
ensure that <code>pd</code> is of the expected variable and temporal period, i.e., the
function does no checking and will stack data with different variables or
temporal periods.
</p>
<p><code>prism_stack()</code> is the deprecated version of <code>pd_stack()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pd_stack(pd)

prism_stack(prismfile)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pd_stack_+3A_pd">pd</code>, <code id="pd_stack_+3A_prismfile">prismfile</code></td>
<td>
<p>A vector of prism data returned by <code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code>
or <code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_prism_dailys(
  type="tmean", 
  minDate = "2013-06-01", 
  maxDate = "2013-06-14", 
  keepZip = FALSE
)
# get a raster stack of June 1-14 daily tmean
mystack &lt;- prism_stack(prism_archive_subset(
  "tmean", 
  minDate = "2013-06-01", 
  maxDate = "2013-06-14"
))

## End(Not run)
</code></pre>

<hr>
<h2 id='prism_archive_clean'>Clean the prism data by removing early and provisional data</h2><span id='topic+prism_archive_clean'></span><span id='topic+del_early_prov'></span>

<h3>Description</h3>

<p><code>prism_archive_clean()</code> 'cleans' the prism download data by removing early
and/or provisional data if newer (provisional or stable) data also exist
for the same variable and temporal period. Stable data are newer than
provisional data that are newer than early data; only the newest data are
kept when the &quot;clean&quot; is performed.
</p>
<p><code>del_early_prov()</code> is a deprecated version of <code>prism_archive_clean()</code> that
only works for daily data, and does not prompt the user to confirm which
folders should be removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_archive_clean(
  type,
  temp_period,
  years = NULL,
  mon = NULL,
  minDate = NULL,
  maxDate = NULL,
  dates = NULL
)

del_early_prov(type, minDate = NULL, maxDate = NULL, dates = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_archive_clean_+3A_type">type</code></td>
<td>
<p>The type of data you want to subset. Must be &quot;ppt&quot;, &quot;tmean&quot;,
&quot;tmin&quot;, &quot;tmax&quot;, &quot;tdmean&quot;, &quot;vpdmin&quot;, or &quot;vpdmax&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_temp_period">temp_period</code></td>
<td>
<p>The temporal period to subset. Must be &quot;annual&quot;,
&quot;monthly&quot;, &quot;daily&quot;, &quot;monthly normals&quot;, or &quot;annual normals&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_years">years</code></td>
<td>
<p>Valid numeric year, or vector of years.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_mon">mon</code></td>
<td>
<p>Valid numeric month, or vector of months.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_mindate">minDate</code></td>
<td>
<p>Date to start subsetting daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_maxdate">maxDate</code></td>
<td>
<p>Date to end subsetting daily data.  Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_clean_+3A_dates">dates</code></td>
<td>
<p>A vector of daily dates to subset. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>prism_archive_clean()</code> prompts the user to verify the folders that should be
removed when R is running in interactive mode. Otherwise, all data that are
identified to be older than the newest available data are removed.
</p>
<p>Daily data are considered &quot;early&quot; for the current month. The previous six
months are provisional data. After six months data are considered stable.
Thus early data only exist for daily data, while there can be monthly (and
presumably yearly) provisional data.
</p>


<h3>Value</h3>

<p>Invisibly returns vector of all deleted folders.
</p>

<hr>
<h2 id='prism_archive_ls'>List available prism data</h2><span id='topic+prism_archive_ls'></span><span id='topic+ls_prism_data'></span>

<h3>Description</h3>

<p><code>prism_archive_ls()</code> lists all available prism data (all variables and all
temporal periods) that are available in the local archive, i.e., they
have already been downloaded and are available in <code><a href="#topic+prism_get_dl_dir">prism_get_dl_dir()</a></code>.
<code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code> can be used to subset the archive based on specified
variables and temporal periods.
</p>
<p><code>ls_prism_data()</code> is a deprecated version of <code>prism_data_ls()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_archive_ls()

ls_prism_data(absPath = FALSE, name = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_archive_ls_+3A_abspath">absPath</code></td>
<td>
<p>TRUE if you want to return the absolute path.</p>
</td></tr>
<tr><td><code id="prism_archive_ls_+3A_name">name</code></td>
<td>
<p>TRUE if you want file names and titles of data products.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>prism_archive_ls()</code> only returns the values found in the <code>files</code> column as
returned by <code>ls_prism_data()</code>. To replicate
the behavior of <code>ls_prism_data()</code>, use <code><a href="#topic+pd_get_name">pd_get_name()</a></code> and
<code><a href="#topic+pd_to_file">pd_to_file()</a></code> with the output of <code>prism_archive_ls()</code>
</p>


<h3>Value</h3>

<p><code>prism_archive_ls()</code> returns a character vector.
</p>
<p><code>ls_prism_data()</code> returns a data frame. It can have 1-3 columns, but
always has the <code>files</code> column. <code>abs_path</code> and <code>product_name</code> columns are
added if <code>absPath</code> and <code>name</code> are <code>TRUE</code>, respectively.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get prism data names, used in many other prism* functions 
get_prism_dailys(
  type="tmean", 
  minDate = "2013-06-01", 
  maxDate = "2013-06-14", 
  keepZip = FALSE
)
prism_archive_ls()

## End(Not run)

</code></pre>

<hr>
<h2 id='prism_archive_subset'>Subsets PRISM folders on the disk</h2><span id='topic+prism_archive_subset'></span>

<h3>Description</h3>

<p><code>prism_archive_subset()</code> subsets the PRISM folders stored on disk by type,
temporal period, and date. It looks through all of the PRISM data that have
been downloaded in the prism archive (<code><a href="#topic+prism_get_dl_dir">prism_get_dl_dir()</a></code>) and returns the
subset based on the specified <code>type</code>, <code>temp_period</code>, and dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_archive_subset(
  type,
  temp_period,
  years = NULL,
  mon = NULL,
  minDate = NULL,
  maxDate = NULL,
  dates = NULL,
  resolution = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_archive_subset_+3A_type">type</code></td>
<td>
<p>The type of data you want to subset. Must be &quot;ppt&quot;, &quot;tmean&quot;,
&quot;tmin&quot;, &quot;tmax&quot;, &quot;tdmean&quot;, &quot;vpdmin&quot;, or &quot;vpdmax&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_temp_period">temp_period</code></td>
<td>
<p>The temporal period to subset. Must be &quot;annual&quot;,
&quot;monthly&quot;, &quot;daily&quot;, &quot;monthly normals&quot;, or &quot;annual normals&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_years">years</code></td>
<td>
<p>Valid numeric year, or vector of years.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_mon">mon</code></td>
<td>
<p>Valid numeric month, or vector of months.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_mindate">minDate</code></td>
<td>
<p>Date to start subsetting daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_maxdate">maxDate</code></td>
<td>
<p>Date to end subsetting daily data.  Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_dates">dates</code></td>
<td>
<p>A vector of daily dates to subset. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_subset_+3A_resolution">resolution</code></td>
<td>
<p>The spatial resolution of the data, must be either &quot;4km&quot; or
&quot;800m&quot;. Should only be specified for <code>temp_period</code> of &quot;normals&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>temp_period</code> must be specified so the function can distinguish between
wanting annual data or wanting monthly data for a specified year. For example
<code>prism_archive_subset("tmean", "annual", years = 2012)</code> would provide only
one folder: the annual average temperature for 2012. However,
<code>prism_archive_subset("tmean", "monthly", years = 2012)</code> would provide 12
folders: each monthly tmean folder for 2012.
</p>
<p><code>temp_period</code>, <code>years</code>, and <code>mon</code> can be combined in various different ways
to obtain different groupings of data. <code>years</code>, <code>mon</code>, and the daily
specifiers (<code>minDate</code>/<code>maxDate</code> or <code>dates</code>) are optional. Not specifying any
of those would result in getting all annual, monthly, or daily data.
</p>
<p><code>minDate</code>/<code>maxDate</code> or <code>dates</code> should only be specified for a <code>temp_period</code>
of &quot;daily&quot;. Additionally, only <code>dates</code>, or <code>minDate</code> and <code>maxDate</code>, should be
specified, but all three should not be specified. Nor should the daily
arguments be combined with <code>years</code> and/or <code>mon</code>. For example, if daily
folders are desired, then specify <code>years</code> and/or <code>mon</code> to get all days for
those years and months <strong>or</strong> specify the specific dates using
<code>minDate</code>/<code>maxDate</code> or <code>dates</code>
</p>


<h3>Value</h3>

<p>A character vector of the folders that meet the type and temporal
period specified. <code>character(0)</code> is returned if no folders are found that
meet the specifications.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+prism_archive_ls">prism_archive_ls()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get all annual tmin
prism_archive_subset("tmin", "annual")
# get only 2000-2015 annual tmin
prism_subset_folder("tmin", "annual", years = 2000-2015)

# get monthly precipitation for 2000-2010
prism_archive_subset("ppt", "monthly", years = 2000-2010)
# get only June-August monthly precip data for 2000-2010
prism_archive_subset("ppt", "monthly", years = 2000-2010, mon = 6:8)

# get all daily tmax for July-August in 2010
prism_archive_subset("tmax", "daily", years = 2010, mon = 7:8)
# same as:
prism_archive_subset(
  "tmax", 
  "daily", 
  minDate = "2010-07-01", 
  maxDate = "2010-08-31"
)

# get the 4km 30-year average precip for January and February
prism_archive_subset("ppt", "monthly normals", mon = 1:2, resolution = "4km")

## End(Not run)

</code></pre>

<hr>
<h2 id='prism_archive_verify'>Check the integrity of downloaded PRISM data</h2><span id='topic+prism_archive_verify'></span><span id='topic+check_corrupt'></span>

<h3>Description</h3>

<p><code>prism_archive_verify()</code> checks the data in the prism archive to ensure it
is valid, or at least can be read into R, i.e., it is not corrupt. The
prism variable type, time period, etc. is specified the same as for
<code><a href="#topic+prism_archive_subset">prism_archive_subset()</a></code>. Any files that are not readable can automatically
be re-downloaded.
</p>
<p><code>check_corrupt()</code> is the deprecated version of
<code>prism_archive_verify()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_archive_verify(
  type,
  temp_period,
  years = NULL,
  mon = NULL,
  minDate = NULL,
  maxDate = NULL,
  dates = NULL,
  download_corrupt = TRUE,
  keepZip = TRUE
)

check_corrupt(type, minDate = NULL, maxDate = NULL, dates = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_archive_verify_+3A_type">type</code></td>
<td>
<p>The type of data you want to subset. Must be &quot;ppt&quot;, &quot;tmean&quot;,
&quot;tmin&quot;, &quot;tmax&quot;, &quot;tdmean&quot;, &quot;vpdmin&quot;, or &quot;vpdmax&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_temp_period">temp_period</code></td>
<td>
<p>The temporal period to subset. Must be &quot;annual&quot;,
&quot;monthly&quot;, &quot;daily&quot;, &quot;monthly normals&quot;, or &quot;annual normals&quot;.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_years">years</code></td>
<td>
<p>Valid numeric year, or vector of years.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_mon">mon</code></td>
<td>
<p>Valid numeric month, or vector of months.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_mindate">minDate</code></td>
<td>
<p>Date to start subsetting daily data. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_maxdate">maxDate</code></td>
<td>
<p>Date to end subsetting daily data.  Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_dates">dates</code></td>
<td>
<p>A vector of daily dates to subset. Must be specified in
a valid iso-8601 (e.g. YYYY-MM-DD) format. May be provided as either a
character or <a href="base.html#topic+Dates">base::Date</a> class.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_download_corrupt">download_corrupt</code></td>
<td>
<p>If <code>TRUE</code>, then any unreadable prism data are
automatically re-downloaded.</p>
</td></tr>
<tr><td><code id="prism_archive_verify_+3A_keepzip">keepZip</code></td>
<td>
<p>If <code>TRUE</code>, leave the downloaded zip files in your
'prism.path', if <code>FALSE</code>, they will be deleted.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Under the hood, it uses <code>raster::stack()</code> and then <code>raster::rasterToPoints()</code>
to determine if the bil files are readable. If both those files are able
to successfully read the files, they are assumed to be valid/readable.
</p>


<h3>Value</h3>

<p><code>prism_archive_verify()</code> returns <code>TRUE</code> if all data are readable.
Any prism data that are not readable are returned (folder names), whether
they are re-downloaded or not.
</p>
<p><code>check_corrupt()</code> returns <code>logical</code> indicating whether the process
succeeded.
</p>

<hr>
<h2 id='prism_check'>Check if prism files exist</h2><span id='topic+prism_check'></span>

<h3>Description</h3>

<p>Helper function to check if files already exist in the prism download
directory. Determines if files have <strong>not</strong> been downloaded yet, i.e.,
returns <code>TRUE</code> if they do not exist.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_check(prismfiles, lgl = FALSE, pre81_months = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_check_+3A_prismfiles">prismfiles</code></td>
<td>
<p>a list of full prism file names ending in &quot;.zip&quot;.</p>
</td></tr>
<tr><td><code id="prism_check_+3A_lgl">lgl</code></td>
<td>
<p><code>TRUE</code> returns a logical vector indicating those
not yet downloaded; <code>FALSE</code> returns the file names that are not yet
downloaded.</p>
</td></tr>
<tr><td><code id="prism_check_+3A_pre81_months">pre81_months</code></td>
<td>
<p>Numeric vector of months that will be downloaded, if
downloading data before 1981. This is so that the existence of the data can
be correctly checked, as the file includes all monthly data for a given
year.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of file names that are not yet downloaded
or a logical vector indication those not yet downloaded.
</p>

<hr>
<h2 id='prism_set_dl_dir'>Set, check, and get prism download directory</h2><span id='topic+prism_set_dl_dir'></span><span id='topic+prism_get_dl_dir'></span><span id='topic+prism_check_dl_dir'></span><span id='topic+path_check'></span>

<h3>Description</h3>

<p><code>prism_set_dl_dir()</code> sets the directory that downloaded prism data will be
saved to. The prism download directory is saved in the &quot;prism.path&quot; option.
</p>
<p><code>prism_get_dl_dir()</code> gets the folder that prism data will be saved to. It is
a wrapper around <code>getOption("prism.path")</code> so the user does not have to
remember the option name.
</p>
<p><code>prism_check_dl_dir()</code> checks that prism download folder has been set. If it
has not been set, and in interactive mode, then prompt user to specify the
download location. If not in interactive mode, and it has not been set, then
set to &quot;~/prismtmp&quot;.
</p>
<p><code>path_check()</code> is a deprecated version of <code>prism_check_dl_dir()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prism_set_dl_dir(path, create = TRUE)

prism_get_dl_dir()

prism_check_dl_dir()

path_check()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prism_set_dl_dir_+3A_path">path</code></td>
<td>
<p>The path that prism data will be unzipped into.</p>
</td></tr>
<tr><td><code id="prism_set_dl_dir_+3A_create">create</code></td>
<td>
<p>Boolean that determines if the <code>path</code> will be created if it
does not already exist.</p>
</td></tr>
</table>

<hr>
<h2 id='prism-package'>prism: Access Data from the Oregon State Prism Climate Project</h2><span id='topic+prism'></span><span id='topic+prism-package'></span>

<h3>Description</h3>

<p>Allows users to access the Oregon State Prism climate data (<a href="https://prism.nacse.org/">https://prism.nacse.org/</a>). Using the web service API data can easily downloaded in bulk and loaded into R for spatial analysis. Some user friendly visualizations are also provided.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alan Butler <a href="mailto:rabutler@usbr.gov">rabutler@usbr.gov</a> (<a href="https://orcid.org/0000-0002-8625-6386">ORCID</a>) [contributor]
</p>
<p>Authors:
</p>

<ul>
<li><p> Hart Edmund <a href="mailto:Edmund.m.hart@gmail.com">Edmund.m.hart@gmail.com</a> [conceptor]
</p>
</li>
<li><p> Kendon Bell <a href="mailto:kmb56@berkeley.edu">kmb56@berkeley.edu</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/prism/">https://docs.ropensci.org/prism/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/prism">https://github.com/ropensci/prism</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/prism/issues">https://github.com/ropensci/prism/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
