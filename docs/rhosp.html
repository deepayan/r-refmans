<!DOCTYPE html><html lang="en"><head><title>Help for package rhosp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rhosp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adequadExp'><p> test the adequation of a random variable to the exponential distribution</p></a></li>
<li><a href='#calcErrorDV'><p> compute the bias, variance of the De Vielder approximation</p></a></li>
<li><a href='#calcErrorNonParam'><p> compute the bias, variance of the non parametric estimator</p></a></li>
<li><a href='#calcErrorParam'><p> compute the bias, variance of the non parametric estimator</p></a></li>
<li><a href='#DV'><p> implements the De Vielder approximation</p></a></li>
<li><a href='#estimDV'><p> compute the De Vielder estimator</p></a></li>
<li><a href='#estimNonParam'><p> compute the parametric estimation</p></a></li>
<li><a href='#estimParam'><p> compute the parametric estimation</p></a></li>
<li><a href='#histo'><p> plot the histogram of the variable T</p></a></li>
<li><a href='#KM'><p> plots a survival function with a Kaplan Meier variant</p></a></li>
<li><a href='#mainSimul'><p> simulate many times the first model and calculate the risk constant</p></a></li>
<li><a href='#mainSimul2'><p> simulate many times the second model</p></a></li>
<li><a href='#makeSample'><p> create a sample of the first model stored in a file</p></a></li>
<li><a href='#makeSample2'><p> create a sample of the second model stored in a file</p></a></li>
<li><a href='#simul'><p> simulate the first model of the hospital risk</p></a></li>
<li><a href='#simul2'><p> simulate the second model of the hospital risk</p></a></li>
<li><a href='#Table'><p> make an array of bias, variance and R for different distribution and estimators</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Side Effect Risks in Hospital : Simulation and Estimation</td>
</tr>
<tr>
<td>Version:</td>
<td>1.10</td>
</tr>
<tr>
<td>Author:</td>
<td>Christophe Dutang and Julie Barthes</td>
</tr>
<tr>
<td>Description:</td>
<td>Evaluating risk (that a patient arises a side effect) during hospitalization is the main purpose of this package. Several methods (Parametric, non parametric and De Vielder estimation) to estimate the risk constant (R) are implemented in this package. There are also functions to simulate the different models of this issue in order to quantify the previous estimators. It is necessary to read at least the first six pages of the report to understand the topic.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christophe Dutang &lt;christophe.dutang@ensimag.fr&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-08-07 19:35:50 UTC; dutang</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-08-07 19:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='adequadExp'> test the adequation of a random variable to the exponential distribution  </h2><span id='topic+adequadExp'></span>

<h3>Description</h3>

<p>In order to test the adequation of a random variable, this function plot the
probabilit plot with reference distribution exponential of the variable and calculates
the Kolmogorov Smirnov test. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adequadExp(T, toplot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adequadExp_+3A_t">T</code></td>
<td>
<p> the random variable on which we want to test the adequation </p>
</td></tr>
<tr><td><code id="adequadExp_+3A_toplot">toplot</code></td>
<td>
<p> a logical to plot the probability graph  </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>LinearRegression</code></td>
<td>
<p> the result of the linear regression of the ordinate on the abcisse of the probability plot</p>
</td></tr>
<tr><td><code>KolmogorvSmirnovTest</code></td>
<td>
<p>the result of the Kolmogorvo Smirnoc test</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
T &lt;- c(12.9622796,  1.4146460,  1.3146761, 14.9147353,  7.5131105,  
8.5130874, 6.5943351, 10.6954653, 14.1000977, 12.4673316,  2.7185478,  
9.6297777, 10.0930441,  0.6270543, 26.7937074,  7.6082447)
adequadExp(T,TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='calcErrorDV'> compute the bias, variance of the De Vielder approximation  </h2><span id='topic+calcErrorDV'></span>

<h3>Description</h3>

<p>calcErrorDV computes the risk constant R with the <em>De Vielder</em> estimator
and its bias and variance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcErrorDV(file, nb = 10, disXi, disP, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calcErrorDV_+3A_file">file</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="calcErrorDV_+3A_nb">nb</code></td>
<td>
<p> the number of simulation </p>
</td></tr>
<tr><td><code id="calcErrorDV_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorDV_+3A_disp">disP</code></td>
<td>
<p> the side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorDV_+3A_plot">plot</code></td>
<td>
<p> a logical variable to plot the variable Zi </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>bias</code></td>
<td>
<p>the bias of this estimator</p>
</td></tr>
<tr><td><code>var</code></td>
<td>
<p>the variance of this estimator</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated</p>
</td></tr>
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with R</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
arg1Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/3));
arg2Exp&lt;-list(disfun=pexp,nbparam=1,param=list(1/5));
res&lt;-calcErrorDV("data.rda",25,arg1Exp,arg2Exp,TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='calcErrorNonParam'> compute the bias, variance of the non parametric estimator</h2><span id='topic+calcErrorNonParam'></span>

<h3>Description</h3>

<p>calcErrorNonParam computes the risk constant R with the non parametric estimator
and its bias and variance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcErrorNonParam(file, nb = 10, disXi, disP, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calcErrorNonParam_+3A_file">file</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="calcErrorNonParam_+3A_nb">nb</code></td>
<td>
<p> the number of simulation </p>
</td></tr>
<tr><td><code id="calcErrorNonParam_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorNonParam_+3A_disp">disP</code></td>
<td>
<p> the side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorNonParam_+3A_plot">plot</code></td>
<td>
<p> a logical variable to plot the variable Zi </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>bias</code></td>
<td>
<p>the bias of this estimator</p>
</td></tr>
<tr><td><code>var</code></td>
<td>
<p>the variance of this estimator</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated</p>
</td></tr>
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with R</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>#arg1Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/3));
#arg2Exp&lt;-list(disfun=pexp,nbparam=1,param=list(1/5));


#res&lt;-calcErrorNonParam("data.rda",25,arg1Exp,arg2Exp,TRUE)


</code></pre>

<hr>
<h2 id='calcErrorParam'> compute the bias, variance of the non parametric estimator </h2><span id='topic+calcErrorParam'></span>

<h3>Description</h3>

<p>calcErrorNonParam computes the risk constant R with the non parametric estimator
and its bias and variance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcErrorParam(file, nb = 10, disXi, disP, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calcErrorParam_+3A_file">file</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="calcErrorParam_+3A_nb">nb</code></td>
<td>
<p> the number of simulation </p>
</td></tr>
<tr><td><code id="calcErrorParam_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorParam_+3A_disp">disP</code></td>
<td>
<p> the side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="calcErrorParam_+3A_plot">plot</code></td>
<td>
<p> a logical variable to plot the variable Zi </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>bias</code></td>
<td>
<p>the bias of this estimator</p>
</td></tr>
<tr><td><code>var</code></td>
<td>
<p>the variance of this estimator</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated</p>
</td></tr>
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with R</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>#arg1Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/3));
#arg2Exp&lt;-list(disfun=pexp,nbparam=1,param=list(1/5));


#res&lt;-calcErrorNonParam("data.rda",25,arg1Exp,arg2Exp,TRUE)

</code></pre>

<hr>
<h2 id='DV'> implements the De Vielder approximation  </h2><span id='topic+DV'></span>

<h3>Description</h3>

<p>DV computes the De Vielder approximation whose goal is to identify the first
two moments of a general case of the first model where p(x) is unknown to the first two moments
of the specific case of the first model where <code class="reqn">p(x) = 1- exp(-mu *x)</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DV(T)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DV_+3A_t">T</code></td>
<td>
<p>a vector of the observations of the random variable T associated with
the first model</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of lambda and mu of the De Vielder method
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>T&lt;-c(12.9622796,  1.4146460,  1.3146761, 14.9147353,  7.5131105,  
8.5130874, 6.5943351, 10.6954653, 14.1000977, 12.4673316,  2.7185478,  
9.6297777, 10.0930441,  0.6270543, 26.7937074,  7.6082447)
res&lt;-DV(T)
</code></pre>

<hr>
<h2 id='estimDV'> compute the De Vielder estimator  </h2><span id='topic+estimDV'></span>

<h3>Description</h3>

<p>compute the De Vielder estimator, in other words, do the same function as <code>DV</code> 
but returns more details about this estimator whereas <code>DV</code> only compute the lambda
and mu of the De Vielder method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimDV(fileName, toplot = TRUE, header = TRUE, ks = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimDV_+3A_filename">fileName</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="estimDV_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the result of this estimation </p>
</td></tr>
<tr><td><code id="estimDV_+3A_header">header</code></td>
<td>
<p> a logical for : has the input file an header </p>
</td></tr>
<tr><td><code id="estimDV_+3A_ks">ks</code></td>
<td>
<p> a logical for : do you want the Kolmogorv Smirnov test </p>
</td></tr>
</table>


<h3>Value</h3>

   
<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with the value of R</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated by this estimation</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the vector of observations of the random variable T</p>
</td></tr>
<tr><td><code>lambdaHat</code></td>
<td>
<p>the best estimation of lambda</p>
</td></tr>
<tr><td><code>muHat</code></td>
<td>
<p>the best estimation of mu</p>
</td></tr>
<tr><td><code>lambdaEmp</code></td>
<td>
<p>the estimation of the lambda of the De Vielder method (in this case the same value as lambdaHat)</p>
</td></tr>
<tr><td><code>muEmp</code></td>
<td>
<p>the estimation of the mu of the De Vielder method (in this case the same value as mu)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
#res&lt;-estimDV("data.rda",TRUE,TRUE)

</code></pre>

<hr>
<h2 id='estimNonParam'> compute the parametric estimation</h2><span id='topic+estimNonParam'></span>

<h3>Description</h3>

<p>estimParam compute the parametric estimation of the first model on the input file
containing the stay duration Xi and the side effect reporting Zi. this estimator of R (and not mu)
is the smallest root of the equation <code class="reqn">(*) : P(Zi=0)E[exp(-RXi)/Zi=0]=1</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimNonParam(fileName, toplot = TRUE, header = TRUE, ks = FALSE, DV = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimNonParam_+3A_filename">fileName</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="estimNonParam_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the result of this estimation </p>
</td></tr>
<tr><td><code id="estimNonParam_+3A_header">header</code></td>
<td>
<p> a logical for : has the input file an header </p>
</td></tr>
<tr><td><code id="estimNonParam_+3A_ks">ks</code></td>
<td>
<p> a logical for : do you want the Kolmogorv Smirnov test </p>
</td></tr>
<tr><td><code id="estimNonParam_+3A_dv">DV</code></td>
<td>
<p> a logical for : do you want to calculate the De Vielder estimation </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with the value of R</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated by this estimation</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the vector of observations of the random variable T</p>
</td></tr>
<tr><td><code>lambdaHat</code></td>
<td>
<p>the best estimation of lambda : the ESBVM of lambda</p>
</td></tr>
<tr><td><code>muHat</code></td>
<td>
<p>not available with this estimation</p>
</td></tr>
<tr><td><code>lambdaEmp</code></td>
<td>
<p>the estimation of the lambda of the De Vielder method (only available if <code>DV=TRUE</code> and if there is no problem with De Vielder method)</p>
</td></tr>
<tr><td><code>muEmp</code></td>
<td>
<p>the estimation of the mu of the De Vielder method (only available if <code>DV=TRUE</code>)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
#res&lt;-estimDV("data.rda",TRUE,TRUE)

</code></pre>

<hr>
<h2 id='estimParam'> compute the parametric estimation </h2><span id='topic+estimParam'></span>

<h3>Description</h3>

<p>estimParam compute the parametric estimation of the first model on the input file
containing the stay duration Xi and the side effect reporting Zi. this estimator of mu
is the estimator of maximum likelihood of the random variable <code class="reqn">Zi / Xi=x</code>. the risk constant
R is given by the equation (star) <code class="reqn">R=mu</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimParam(fileName, toplot = TRUE, header = TRUE, ks = FALSE, DV = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimParam_+3A_filename">fileName</code></td>
<td>
<p> the file in which the simulated data will be stored </p>
</td></tr>
<tr><td><code id="estimParam_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the result of this estimation </p>
</td></tr>
<tr><td><code id="estimParam_+3A_header">header</code></td>
<td>
<p> a logical for : has the input file an header </p>
</td></tr>
<tr><td><code id="estimParam_+3A_ks">ks</code></td>
<td>
<p> a logical for : do you want the Kolmogorv Smirnov test </p>
</td></tr>
<tr><td><code id="estimParam_+3A_dv">DV</code></td>
<td>
<p> a logical for : do you want to calculate the De Vielder estimation </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of the following components
</p>
<table role = "presentation">
<tr><td><code>CR</code></td>
<td>
<p>the CR risk constant calculated with the value of R</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant estimated by this estimation</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the vector of observations of the random variable T</p>
</td></tr>
<tr><td><code>lambdaHat</code></td>
<td>
<p>the best estimation of lambda : the ESBVM of lambda</p>
</td></tr>
<tr><td><code>muHat</code></td>
<td>
<p>the best estimation of mu : the value of mu which maximize the loglikelihood</p>
</td></tr>
<tr><td><code>lambdaEmp</code></td>
<td>
<p>the estimation of the lambda of the De Vielder method (only available if <code>DV=TRUE</code> and if there is no problem with De Vielder method)</p>
</td></tr>
<tr><td><code>muEmp</code></td>
<td>
<p>the estimation of the mu of the De Vielder method (only available if <code>DV=TRUE</code>)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
#res&lt;-estimDV("data.rda",TRUE,TRUE)


</code></pre>

<hr>
<h2 id='histo'> plot the histogram of the variable T </h2><span id='topic+histo'></span>

<h3>Description</h3>

<p>plot of the random variable T and the equivalent function (<code class="reqn">t-&gt;CR*exp(-R*t)</code>).
in some cases, there are also plotted the theoretical and the De Vielder functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>histo(X, disXi = NULL, disP = NULL, plotDV = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="histo_+3A_x">X</code></td>
<td>
<p> a list with the following components : T the observation of the random variable ; R the risk constant (estimated or theoretical calculated)
; CR the risk constand deduced from R ; lambdaEmp the estimation of the lambda of the De Vielder method (only available if <code>DV=TRUE</code> and if there is no problem with De Vielder method)
; muEmp the estimation of the mu of the De Vielder method (only available if <code>DV=TRUE</code>); lambdaHat the best estimation of lambda : the ESBVM of lambda
; muHat the best estimation of mu : the value of mu which maximize the loglikelihood (only available if the parametric estimation has been done)</p>
</td></tr>
<tr><td><code id="histo_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="histo_+3A_disp">disP</code></td>
<td>
<p> he side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="histo_+3A_plotdv">plotDV</code></td>
<td>
<p> a logical for : do you want to plot the De Vielder &quot;function&quot; </p>
</td></tr>
</table>


<h3>Value</h3>

<p>a NULL object.
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>#use mainSimul to make the first argument
arg1Exp &lt;- list(rangen=rexp,nbparam=1,param=list(1/3));
arg1Bin &lt;- list(rangen=rbinom,nbparam=2,param=list(1,1/20));
arg1Unif &lt;- list(rangen=runif,nbparam=2,param=list(0,20));
arg1Lnorm &lt;- list(rangen=rlnorm,nbparam=2,param=list(1/4,1));

arg2Exp &lt;- list(disfun=pexp,nbparam=1,param=list(1/5));
arg2Cst &lt;- list(disfun=pcst &lt;- function(x,p) p ,nbparam=1,param=list(1/3));
arg2Comp &lt;- list(disfun=pcomp &lt;- function(x,mu1,mu2,mu3)
{1-1/3*exp(-mu1* x)-1/2*exp(-mu2 *x)-1/6*exp(-mu3 *x)}
,nbparam=3,param=list(1/3,1/5,1/10));
arg2Gamma &lt;- list(disfun=pgamma,nbparam=2,param=list(3,1/3));
arg2Lnorm &lt;- list(disfun=plnorm,nbparam=2,param=list(1/20,2));

T &lt;- mainSimul(100,100,arg1Exp,arg2Exp)

histo(T,arg1Exp,arg2Exp)
</code></pre>

<hr>
<h2 id='KM'> plots a survival function with a Kaplan Meier variant</h2><span id='topic+KM'></span>

<h3>Description</h3>

<p> plots the survival function of patients knowing censored data. Model : a variant of Kaplan-Meier's model    
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KM(fileName, toplot = TRUE, header = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="KM_+3A_filename">fileName</code></td>
<td>
<p> the file with the data use</p>
</td></tr>
<tr><td><code id="KM_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the result of this estimation </p>
</td></tr>
<tr><td><code id="KM_+3A_header">header</code></td>
<td>
<p> a logical for : has the input file an header </p>
</td></tr>
</table>


<h3>Value</h3>

<p>No values returned, just plot the survival function and the theoretical distribution 
of our model with exponential stays and a constant side effect probability
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>#KM("data.rda",TRUE,TRUE)
</code></pre>

<hr>
<h2 id='mainSimul'> simulate many times the first model and calculate the risk constant </h2><span id='topic+mainSimul'></span>

<h3>Description</h3>

<p>main simulates nbBed times the first model with the function simul
and calculates the risk constant R and CR by solving the renewal equation (star).
this renewal equation is only valid if the Xi forms a poisson process.
R and CR are defined such that the equivalent survival function is <code class="reqn">CR *exp(-R*x)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mainSimul(nbBed, nbPatient, disXi, disP, toplot = FALSE, calc = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mainSimul_+3A_nbbed">nbBed</code></td>
<td>
<p> the number of beds </p>
</td></tr>
<tr><td><code id="mainSimul_+3A_nbpatient">nbPatient</code></td>
<td>
<p> the number of patient in each bed  </p>
</td></tr>
<tr><td><code id="mainSimul_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="mainSimul_+3A_disp">disP</code></td>
<td>
<p> the distribution of the success probability of Zi : p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="mainSimul_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the variable Zi</p>
</td></tr>
<tr><td><code id="mainSimul_+3A_calc">calc</code></td>
<td>
<p> should the risk constants calculate? </p>
</td></tr>
</table>


<h3>Details</h3>

<p>make simulation and estimation on the sample
</p>


<h3>Value</h3>

<p>Describe the value returned
If it is a LIST, use
</p>
<table role = "presentation">
<tr><td><code>CR</code></td>
<td>
<p>CR constant used in the exponential bound</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>the risk constant</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the vector of durations between two declared side effects</p>
</td></tr>
<tr><td><code>lambdaEmp</code></td>
<td>
<p>estimate of lambda</p>
</td></tr>
<tr><td><code>muEmp</code></td>
<td>
<p>estimate of mu</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>arg1Exp &lt;- list(rangen=rexp,nbparam=1,param=list(1/3));
arg1Bin &lt;- list(rangen=rbinom,nbparam=2,param=list(1,1/20));
arg1Unif &lt;- list(rangen=runif,nbparam=2,param=list(0,20));
arg1Lnorm &lt;- list(rangen=rlnorm,nbparam=2,param=list(1/4,1));

arg2Exp &lt;- list(disfun=pexp,nbparam=1,param=list(1/5));
arg2Cst &lt;- list(disfun=pcst &lt;- function(x,p) p ,nbparam=1,param=list(1/3));
arg2Comp &lt;- list(disfun=pcomp &lt;- function(x,mu1,mu2,mu3)
{1-1/3*exp(-mu1* x)-1/2*exp(-mu2 *x)-1/6*exp(-mu3 *x)}
,nbparam=3,param=list(1/3,1/5,1/10));
arg2Gamma &lt;- list(disfun=pgamma,nbparam=2,param=list(3,1/3));
arg2Lnorm &lt;- list(disfun=plnorm,nbparam=2,param=list(1/20,2));

T &lt;- mainSimul(100,100,arg1Exp,arg2Exp)

</code></pre>

<hr>
<h2 id='mainSimul2'> simulate many times the second model </h2><span id='topic+mainSimul2'></span>

<h3>Description</h3>

<p>main simulates nbBed times the second model with the function simul
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mainSimul2(nbBed, nbPatient, disXi, disYi, toplot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mainSimul2_+3A_nbbed">nbBed</code></td>
<td>
<p> the number of beds </p>
</td></tr>
<tr><td><code id="mainSimul2_+3A_nbpatient">nbPatient</code></td>
<td>
<p> the number of patient in each bed </p>
</td></tr>
<tr><td><code id="mainSimul2_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="mainSimul2_+3A_disyi">disYi</code></td>
<td>
<p> the distribution of the variable Yi :
disYi is a 3 elements list : rangen for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="mainSimul2_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the variable Zi </p>
</td></tr>
</table>


<h3>Details</h3>

<p>If necessary, more details than the description  above 
</p>


<h3>Value</h3>

<p>return a list of the following components
</p>
<table role = "presentation">
<tr><td><code>T</code></td>
<td>
<p>T the vector of durations between two declared side effects</p>
</td></tr>
<tr><td><code>R</code></td>
<td>
<p>R a risk constant</p>
</td></tr>
<tr><td><code>CR</code></td>
<td>
<p>CR a risk constant</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
arg1ExpMod2 &lt;- list(rangen=rexp,nbparam=1,param=list(1/2));
arg1BinMod2 &lt;- list(rangen=rbinom,nbparam=2,param=list(1,1/20));
arg1UnifMod2 &lt;- list(rangen=runif,nbparam=2,param=list(0,20));
arg1LnormMod2 &lt;- list(rangen=rlnorm,nbparam=2,param=list(1/4,1));

arg2ExpMod2 &lt;- list(rangen=rexp,nbparam=1,param=list(1/5));
# arg2-cst &lt;- list(rangen=pcst &lt;- function(x,p) p ,nbparam=1,param=list(1/10));
arg2GammaMod2 &lt;- list(rangen=rgamma,nbparam=2,param=list(3,1/5));

T &lt;- mainSimul2(100,100,arg1ExpMod2,arg2ExpMod2)


</code></pre>

<hr>
<h2 id='makeSample'> create a sample of the first model stored in a file  </h2><span id='topic+makeSample'></span>

<h3>Description</h3>

<p>make a sample of the first model, that is to say simulate 
the sequence of the random variables Xi (stay duration) and the sequence of Zi (side effect reporting)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeSample(file, nbPatient, disXi, disP)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makeSample_+3A_file">file</code></td>
<td>
<p> the filename in which the simulation will be stored </p>
</td></tr>
<tr><td><code id="makeSample_+3A_nbpatient">nbPatient</code></td>
<td>
<p> the number of patients for the simulation </p>
</td></tr>
<tr><td><code id="makeSample_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="makeSample_+3A_disp">disP</code></td>
<td>
<p> the side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a NULL object.
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>arg1Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/3));

arg2Exp&lt;-list(disfun=pexp,nbparam=1,param=list(1/5));

makeSample("mydata.rda",200,arg1Exp,arg2Exp)
</code></pre>

<hr>
<h2 id='makeSample2'> create a sample of the second model stored in a file  </h2><span id='topic+makeSample2'></span>

<h3>Description</h3>

<p>make a sample of the first model, that is to say simulate 
the sequence of the random variables Xi (stay duration)
the sequence of Yi (exposure time) and the sequence of Zi (side effect reporting)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeSample2(file, nbPatient, disXi, disYi)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="makeSample2_+3A_file">file</code></td>
<td>
<p> the filename in which the simulation will be stored </p>
</td></tr>
<tr><td><code id="makeSample2_+3A_nbpatient">nbPatient</code></td>
<td>
<p> the number of patients for the simulation </p>
</td></tr>
<tr><td><code id="makeSample2_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="makeSample2_+3A_disyi">disYi</code></td>
<td>
<p> the distribution of the variable Yi :
disYi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a NULL object.
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
arg1ExpMod2&lt;-list(rangen=rexp,nbparam=1,param=list(1/2));
arg1BinMod2&lt;-list(rangen=rbinom,nbparam=2,param=list(1,1/20));
arg1UnifMod2&lt;-list(rangen=runif,nbparam=2,param=list(0,20));
arg1LnormMod2&lt;-list(rangen=rlnorm,nbparam=2,param=list(1/4,1));

arg2ExpMod2&lt;-list(rangen=rexp,nbparam=1,param=list(1/5));
# arg2-cst&lt;-list(rangen=pcst&lt;-function(x,p) p ,nbparam=1,param=list(1/10));
arg2GammaMod2&lt;-list(rangen=rgamma,nbparam=2,param=list(3,1/5));


makeSample2("thedata.rda",200,arg1ExpMod2,arg2ExpMod2)

</code></pre>

<hr>
<h2 id='simul'> simulate the first model of the hospital risk </h2><span id='topic+simul'></span>

<h3>Description</h3>

<p>simul simulate the first model of the hospital that is to say 
simulating the sequence of variables Xi (which follow the disxi distribution
passed as an argument) and the sequence of Zi (where the probability of
succes p is passed as an argument)
simul returns T the vector of durations between two declared side effects 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simul(nbPatient, disXi, disP, toplot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simul_+3A_nbpatient">nbPatient</code></td>
<td>
<p>the number of patient of the simulation </p>
</td></tr>
<tr><td><code id="simul_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="simul_+3A_disp">disP</code></td>
<td>
<p> the side effect probability (success  probability of Zi) p :
disP is a 3 elements list : disfun stands for a distribution function
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="simul_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the variable Zi </p>
</td></tr>
</table>


<h3>Value</h3>

<p>T the vector of durations between two declared side effects
</p>


<h3>Note</h3>

<p> further notes </p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>See Also</h3>

<p> simul2  </p>


<h3>Examples</h3>

<pre><code class='language-R'>arg1Exp &lt;- list(rangen=rexp,nbparam=1,param=list(1/3));
arg1Bin &lt;- list(rangen=rbinom,nbparam=2,param=list(1,1/20));
arg1Unif &lt;- list(rangen=runif,nbparam=2,param=list(0,20));
arg1Lnorm &lt;- list(rangen=rlnorm,nbparam=2,param=list(1/4,1));

arg2Exp &lt;- list(disfun=pexp,nbparam=1,param=list(1/5));
arg2Cst &lt;- list(disfun=pcst &lt;- function(x,p) p ,nbparam=1,param=list(1/3));
arg2Comp &lt;- list(disfun=pcomp &lt;- function(x,mu1,mu2,mu3)
{1-1/3*exp(-mu1* x)-1/2*exp(-mu2 *x)-1/6*exp(-mu3 *x)}
,nbparam=3,param=list(1/3,1/5,1/10));
arg2Gamma &lt;- list(disfun=pgamma,nbparam=2,param=list(3,1/3));
arg2Lnorm &lt;- list(disfun=plnorm,nbparam=2,param=list(1/20,2));

T &lt;- simul(100,arg1Exp,arg2Exp)
T &lt;- simul(100,arg1Bin,arg2Cst)
T &lt;- simul(100,arg1Unif,arg2Comp)
T &lt;- simul(100,arg1Lnorm,arg2Gamma)


</code></pre>

<hr>
<h2 id='simul2'> simulate the second model of the hospital risk </h2><span id='topic+simul2'></span>

<h3>Description</h3>

<p>simul simulate the first model of the hospital that is to say 
simulating the sequence of variables Xi (which follow the disxi distribution
passed as an argument) and the sequence of Zi (where the probability of
succes p is passed as an argument)
simul returns T the vector of durations between two declared side effects 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simul2(nbPatient, disXi, disYi, toplot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simul2_+3A_nbpatient">nbPatient</code></td>
<td>
<p> the number of patient of the simulation</p>
</td></tr>
<tr><td><code id="simul2_+3A_disxi">disXi</code></td>
<td>
<p> the distribution of the variable Xi :
disXi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="simul2_+3A_disyi">disYi</code></td>
<td>
<p> the distribution of the variable Yi :
disYi is a 3 elements list : rangen stands for  a random positive variable generator
; nbparam for number of parameter of this distribution and param for a list of parameters
</p>
</td></tr>
<tr><td><code id="simul2_+3A_toplot">toplot</code></td>
<td>
<p> a logical variable to plot the variable Zi</p>
</td></tr>
</table>


<h3>Value</h3>

<p>T the vector of durations between two declared side effects
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>arg1Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/2));
arg2Exp&lt;-list(rangen=rexp,nbparam=1,param=list(1/20));
T&lt;-simul2(100,arg1Exp,arg2Exp)

</code></pre>

<hr>
<h2 id='Table'> make an array of bias, variance and R for different distribution and estimators  </h2><span id='topic+Table'></span>

<h3>Description</h3>

<p>this function prints an array of the bias, variance, risk constants R and CR for three estimators
(parametric, non parametric and De Vielder) with different side effect probability for p
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Table(file, nb = 10, mod)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Table_+3A_file">file</code></td>
<td>
<p> the file in wich the simulation will be done </p>
</td></tr>
<tr><td><code id="Table_+3A_nb">nb</code></td>
<td>
<p> the number of simulation for each estimators </p>
</td></tr>
<tr><td><code id="Table_+3A_mod">mod</code></td>
<td>
<p> first mod makes simulation for an estimator in different cases (arg2)
second mod makes simulation for a case with different estimators
third mod makes simulation for a case with the parametric and non parametric estimatorse </p>
</td></tr>
</table>


<h3>Value</h3>

<p>Null.
</p>


<h3>Author(s)</h3>

<p> Christophe Dutang and Julie Barthes </p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Table("d.rda",100,3)

# plot the following result 
#[1] "arg2Exp"
#           nonpar           par
#bias 4.407856e-02 -3.503516e-06
#var  6.001352e-05  1.972828e-05
#R    9.405885e-02  4.997679e-02
#CR   8.492920e+00  1.455619e+01
#[1] "arg2Cst"
#           nonpar          par
#bias 1.575410e-02 4.573187e-04
#var  1.714712e-05 5.675577e-06
#R    3.242554e-02 1.712875e-02
#CR   2.197198e+01 4.066553e+01
#[1] "arg2Comp"
#           nonpar           par
#bias 3.247060e-02 -5.558817e-05
#var  4.621880e-05  1.006148e-05
#R    6.880894e-02  3.628275e-02
#CR   1.101930e+01  1.967524e+01
#[1] "arg2Gamma"
#           nonpar           par
#bias 1.832645e-02 -7.552530e-04
#var  2.267637e-05  7.363311e-06
#R    3.778277e-02  1.870107e-02
#CR   1.911443e+01  3.773611e+01
#[1] "arg2Lnorm"
#           nonpar          par
#bias 4.556463e-02 1.017082e-03
#var  7.013414e-05 3.104221e-05
#R    1.005464e-01 5.599889e-02
#CR   8.101552e+00 1.318976e+01
#[1] "arg2Unif"
#           nonpar          par
#bias 2.514426e-02 2.598740e-04
#var  3.878331e-05 1.073282e-05
#R    5.236710e-02 2.748271e-02
#CR   1.408411e+01 2.580822e+01
#[1] "arg2Weib"
#           nonpar          par
#bias 4.588473e-03 1.540856e-04
#var  5.405285e-06 1.589171e-06
#R    9.367470e-03 4.933083e-03
#CR   7.709814e+01 1.468196e+02
#
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
