<!DOCTYPE html><html><head><title>Help for package PBIR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {PBIR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#CRR'><p>Estimate cumulative response rates (CRR) and test their equality between two groups</p></a></li>
<li><a href='#mduration'><p>Estimate mean duration of response</p></a></li>
<li><a href='#PBIR1'><p>Estimate the PBIR curve over a time window</p></a></li>
<li><a href='#PBIR2'><p>Estimate and compare PBIR curves from two groups over a time window</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Estimating the Probability of Being in Response and Related
Outcomes</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1-0</td>
</tr>
<tr>
<td>Author:</td>
<td>Xiaodong Luo [aut], 
        Bo Huang [aut], 
        Lu Tian [aut, cre](&lt;https://orcid.org/0000-0002-5893-0169&gt;)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lu Tian &lt;lutian@stanford.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Make statistical inference on the probability of being in response, 
             the duration of response, and the cumulative response rate up to a given time point. 
             The method can be applied to analyze phase II randomized clinical trials with the endpoints 
             being time to treatment response and time to progression or death.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, stats, cmprsk</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-09-09 17:34:41 UTC; lutia</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-09-17 09:10:12 UTC</td>
</tr>
</table>
<hr>
<h2 id='CRR'>Estimate cumulative response rates (CRR) and test their equality between two groups</h2><span id='topic+CRR'></span>

<h3>Description</h3>

<p>Estimate cumulative response rates (CRR) and test their equality between two groups
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CRR(
  t2PROGRESSION,
  STATUS_PROGRESSION,
  t2RESPONSE,
  STATUS_RESPONSE,
  TRT,
  time = NULL,
  alpha = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CRR_+3A_t2progression">t2PROGRESSION</code></td>
<td>
<p>time to progression/death or censoring</p>
</td></tr>
<tr><td><code id="CRR_+3A_status_progression">STATUS_PROGRESSION</code></td>
<td>
<p>binary indicator for progression status: 1 for progression/death; 0 for censoring</p>
</td></tr>
<tr><td><code id="CRR_+3A_t2response">t2RESPONSE</code></td>
<td>
<p>time to response or censoring</p>
</td></tr>
<tr><td><code id="CRR_+3A_status_response">STATUS_RESPONSE</code></td>
<td>
<p>binary indicator for response status: 1 for response; 0 for censoring</p>
</td></tr>
<tr><td><code id="CRR_+3A_trt">TRT</code></td>
<td>
<p>binary indicator for treatment assignment: 1 for treatment arm and 0 for control arm</p>
</td></tr>
<tr><td><code id="CRR_+3A_time">time</code></td>
<td>
<p>user-selected time points at which the cumulative response rate is to be estimated; the default value is &quot;NULL&quot; and the cumulative response rate will be estimated at all observed time points</p>
</td></tr>
<tr><td><code id="CRR_+3A_alpha">alpha</code></td>
<td>
<p>coverage level of the point-wise confidence interval for the cumulative response rate; the default value is 0.95</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with following elements
</p>

<ul>
<li><p>result0:   a data matrix containing &quot;time&quot;, &quot;CRR estimates (group 0)&quot;, &quot;standard error of CRR estimates (group 0)&quot;,  &quot;confidence interval of CRR (group 0)&quot;
</p>
</li>
<li><p>result1:   a data matrix containing &quot;time&quot;, &quot;CRR estimates (group 1)&quot;, &quot;standard error of CRR estimates (group 1)&quot;,  &quot;confidence interval of CRR (group 1)&quot;
</p>
</li>
<li><p>pvalue:    the p-value from two group comparison
</p>
</li></ul>



<h3>References</h3>

<p>Gray, RJ. (1988) A class of K-sample tests for comparing the cumulative incidence of a competing risk, ANNALS OF STATISTICS, 16:1141-1154.
</p>
<p>Aalen, O. (1978) Nonparametric estimation of partial transition probabilities in multiple decrement models, ANNALS OF STATISTICS, 6:534-545.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(cmprsk)
n=100
set.seed(10)

# Generate the data

trt=rbinom(n, 1, 0.5)
error=rnorm(n)
tr=exp(rnorm(n)+error-trt*0.5+0.5)
tp=exp(rnorm(n)+error+trt*0.25)
tr[tp&lt;tr]=Inf
tc=runif(n, 3, 8.5)
t2response=pmin(tr, tc)
delta_response=1*(tr&lt;tc)
t2progression=pmin(tp, tc)
delta_progression=1*(tp&lt;tc)

# Estimate the PBIR in two groups

fit=CRR(t2PROGRESSION=t2progression,
         STATUS_PROGRESSION=delta_progression,
         t2RESPONSE=t2response,
         STATUS_RESPONSE=delta_response,
         TRT=trt)

fit

# Plot the estimated PBIR by group

tt1=c(0, fit$result1$time)
CRR1=c(0, fit$result1$CRR)
B1=length(tt1)
tt1=rep(tt1, rep(2, B1))[-1]
CRR1=rep(CRR1, rep(2, B1))[-(2*B1)]
tt0=c(0, fit$result0$time)
CRR0=c(0, fit$result0$CRR)
B0=length(tt0)
tt0=rep(tt0, rep(2, B0))[-1]
CRR0=rep(CRR0, rep(2, B0))[-(2*B0)]
plot(range(c(fit$result1$time, fit$result0$time)),
     range(c(fit$result1$CRR, fit$result0$CRR)),
     xlab="time",  ylab="CRR",
     main="black: group 0; red: group 1", type="n")
lines(tt0, CRR0, col=1)
lines(tt1, CRR1, col=2)
</code></pre>

<hr>
<h2 id='mduration'>Estimate mean duration of response</h2><span id='topic+mduration'></span>

<h3>Description</h3>

<p>Estimate mean duration of response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mduration(
  t2PROGRESSION,
  STATUS_PROGRESSION,
  t2RESPONSE,
  STATUS_RESPONSE,
  time.max = -1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mduration_+3A_t2progression">t2PROGRESSION</code></td>
<td>
<p>time to progression/death or censoring</p>
</td></tr>
<tr><td><code id="mduration_+3A_status_progression">STATUS_PROGRESSION</code></td>
<td>
<p>binary indicator for progression/death status: 1 for progression/death; 0 for censoring</p>
</td></tr>
<tr><td><code id="mduration_+3A_t2response">t2RESPONSE</code></td>
<td>
<p>time to response or censoring</p>
</td></tr>
<tr><td><code id="mduration_+3A_status_response">STATUS_RESPONSE</code></td>
<td>
<p>binary indicator for response status: 1 for response; 0 for censoring</p>
</td></tr>
<tr><td><code id="mduration_+3A_time.max">time.max</code></td>
<td>
<p>maximum time point, up to which the mean DOR is to be estimated; the default value corresponds to the maximum time window in which the mean DOR is estimable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The mean duration of response restricted within a time window is also the area under the PBIR curve over the same time window. The estimated mean duration can be viewed as a global summary of the PBIR curve. One may compare the mean duration of response between two groups, which is also a global comparison between two PBIR curves.
</p>


<h3>Value</h3>

<p>A list with following elements
</p>

<ul>
<li><p>meandor.est:  the restricted mean DOR estimate
</p>
</li>
<li><p>meandor.se:   the standard error of the esimated DOR
</p>
</li>
<li><p>time.truncation:     the truncation time point used in DOR.
</p>
</li></ul>



<h3>References</h3>

<p>Huang, B., Tian, L., Talukder, E., Rothenberg, M., Kim, DY., and Wei, LJ. (2018) Evaluating Treatment Effect Based on Duration of Response for a Comparative Oncology Study. JAMA Oncol, doi: 10.1001/jamaoncol.2018.0275
</p>
<p>Huang, B., Tian, L., McCaw, Z., Luo, Talukder, E., X., Rothenberg, M., Xie, W., Choueiri, T., Kim, DY., &amp; Wei, LJ. (2020). Analysis of Response Data for Assessing Treatment Effects in Comparative Clinical Studies. Ann Intern Med, doi: 10.7326/M20-0104.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survival)
n=100
set.seed(10)

# Generate the data

error=rnorm(n)
tr=exp(rnorm(n)+error+0.5)
tp=exp(rnorm(n)+error)
tr[tp&lt;tr]=Inf
tc=runif(n, 3, 8.5)
t2response=pmin(tr, tc)
delta_response=1*(tr&lt;tc)
t2progression=pmin(tp, tc)
delta_progression=1*(tp&lt;tc)

# Estimate the mean duration of response (point estimator and its standard error)

fit=mduration(t2PROGRESSION=t2progression,
              STATUS_PROGRESSION=delta_progression,
              t2RESPONSE=t2response,
              STATUS_RESPONSE=delta_response,
              time.max=8)

fit
</code></pre>

<hr>
<h2 id='PBIR1'>Estimate the PBIR curve over a time window</h2><span id='topic+PBIR1'></span>

<h3>Description</h3>

<p>Estimate the PBIR curve over a time window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PBIR1(
  t2PROGRESSION,
  STATUS_PROGRESSION,
  t2RESPONSE,
  STATUS_RESPONSE,
  time = NULL,
  alpha = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PBIR1_+3A_t2progression">t2PROGRESSION</code></td>
<td>
<p>time to progression/death or censoring</p>
</td></tr>
<tr><td><code id="PBIR1_+3A_status_progression">STATUS_PROGRESSION</code></td>
<td>
<p>binary indicator for progression status: 1 for progression/death; 0 for censoring</p>
</td></tr>
<tr><td><code id="PBIR1_+3A_t2response">t2RESPONSE</code></td>
<td>
<p>time to response or censoring</p>
</td></tr>
<tr><td><code id="PBIR1_+3A_status_response">STATUS_RESPONSE</code></td>
<td>
<p>binary indicator for response status: 1 for response; 0 for censoring</p>
</td></tr>
<tr><td><code id="PBIR1_+3A_time">time</code></td>
<td>
<p>user-selected time points at which the PBIR is estimated; the default value is &quot;NULL&quot; and the PBIR will be estimated at all observed time points</p>
</td></tr>
<tr><td><code id="PBIR1_+3A_alpha">alpha</code></td>
<td>
<p>coverage level of the point-wise confidence interval for PBIR curve; the default value is 0.95</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data matrix containing &quot;time&quot;, &quot;PBIR estimates&quot;, &quot;standard errors of PBIR estimates&quot;,  &quot;confidence intervals of the PBIR&quot;
</p>


<h3>References</h3>

<p>Huang, B., Tian, L., Talukder, E., Rothenberg, M., Kim, DY., and Wei, LJ. (2018) Evaluating Treatment Effect Based on Duration of Response for a Comparative Oncology Study. JAMA Oncol, doi: 10.1001/jamaoncol.2018.0275
</p>
<p>Huang, B., Tian, L., McCaw, Z., Luo, Talukder, E., X., Rothenberg, M., Xie, W., Choueiri, T., Kim, DY., &amp; Wei, LJ. (2020). Analysis of Response Data for Assessing Treatment Effects in Comparative Clinical Studies. Ann Intern Med, doi: 10.7326/M20-0104.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survival)
n=100
set.seed(10)

# Generate the data

trt=rbinom(n, 1, 0.5)
error=rnorm(n)
tr=exp(rnorm(n)+error-trt*0.5+0.5)
tp=exp(rnorm(n)+error+trt*0.25)
tr[tp&lt;tr]=Inf
tc=runif(n, 3, 8.5)
t2response=pmin(tr, tc)
delta_response=1*(tr&lt;tc)
t2progression=pmin(tp, tc)
delta_progression=1*(tp&lt;tc)

# Estimate the PBIR in two groups

fit1=PBIR1(t2PROGRESSION=t2progression[trt==1],
           STATUS_PROGRESSION=delta_progression[trt==1],
           t2RESPONSE=t2response[trt==1],
           STATUS_RESPONSE=delta_response[trt==1])

fit0=PBIR1(t2PROGRESSION=t2progression[trt==0],
           STATUS_PROGRESSION=delta_progression[trt==0],
           t2RESPONSE=t2response[trt==0],
           STATUS_RESPONSE=delta_response[trt==0])


# Plot the estimated PBIR by group

tt1=c(0, fit1$time)
PBIR1=c(0, fit1$PBIR)
B1=length(tt1)
tt1=rep(tt1, rep(2, B1))[-1]
PBIR1=rep(PBIR1, rep(2, B1))[-(2*B1)]
tt0=c(0, fit0$time)
PBIR0=c(0, fit0$PBIR)
B0=length(tt0)
tt0=rep(tt0, rep(2, B0))[-1]
PBIR0=rep(PBIR0, rep(2, B0))[-(2*B0)]
plot(range(c(fit1$time, fit0$time)), range(c(fit1$PBIR, fit0$PBIR)),
     xlab="time",  ylab="PBIR",
     main="black: group 0; red: group 1", type="n")
lines(tt0, PBIR0, col=1)
lines(tt1, PBIR1, col=2)
</code></pre>

<hr>
<h2 id='PBIR2'>Estimate and compare PBIR curves from two groups over a time window</h2><span id='topic+PBIR2'></span>

<h3>Description</h3>

<p>Estimate and compare PBIR curves from two groups over a time window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PBIR2(
  t2PROGRESSION,
  STATUS_PROGRESSION,
  t2RESPONSE,
  STATUS_RESPONSE,
  TRT,
  time = NULL,
  alpha = 0.95
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="PBIR2_+3A_t2progression">t2PROGRESSION</code></td>
<td>
<p>time to progression/death or censoring</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_status_progression">STATUS_PROGRESSION</code></td>
<td>
<p>binary indicator for progression status: 1 for progression/death; 0 for censoring</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_t2response">t2RESPONSE</code></td>
<td>
<p>time to response or censoring</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_status_response">STATUS_RESPONSE</code></td>
<td>
<p>binary indicator for response status: 1 for response; 0 for censoring</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_trt">TRT</code></td>
<td>
<p>treatment indicator: 1 for treatment arm; 0 for control arm</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_time">time</code></td>
<td>
<p>user-selected time points at which PBIRs are to be compared; the default value is &quot;NULL&quot; and PBIRs at all observed time points are compared</p>
</td></tr>
<tr><td><code id="PBIR2_+3A_alpha">alpha</code></td>
<td>
<p>coverage level of the point-wise confidence interval for the difference in the PBIR, the default value is 0.95</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data matrix containing &quot;time&quot;, &quot;estimated differences in PBIR (treatment-control)&quot;, &quot;standard errors of estimated PBIR differences&quot;,  &quot;confidence intervals of the PBIR difference&quot;
</p>


<h3>References</h3>

<p>Huang, B., Tian, L., Talukder, E., Rothenberg, M., Kim, DY., and Wei, LJ. (2018) Evaluating Treatment Effect Based on Duration of Response for a Comparative Oncology Study. JAMA Oncol, doi: 10.1001/jamaoncol.2018.0275
</p>
<p>Huang, B., Tian, L., McCaw, Z., Luo, Talukder, E., X., Rothenberg, M., Xie, W., Choueiri, T., Kim, DY., &amp; Wei, LJ. (2020). Analysis of Response Data for Assessing Treatment Effects in Comparative Clinical Studies. Ann Intern Med, doi: 10.7326/M20-0104.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(survival)
n=100
set.seed(10)

# Generate the data

TRT=trt=rbinom(n, 1, 0.5)

error=rnorm(n)
tr=exp(rnorm(n)+error-trt*0.5+0.5)
tp=exp(rnorm(n)+error+trt*0.25)
tr[tp&lt;tr]=Inf
tc=runif(n, 3, 8.5)

t2response=pmin(tr, tc)
delta_response=1*(tr&lt;tc)
t2progression=pmin(tp, tc)
delta_progression=1*(tp&lt;tc)

# Estimate the difference in PBIR
# the analysis is truncated at time 8, which is slightly smaller than the largest follow-up time

fit=PBIR2(t2PROGRESSION=t2progression,
          STATUS_PROGRESSION=delta_progression,
          t2RESPONSE=t2response,
          STATUS_RESPONSE=delta_response,
          TRT=trt)


# Plot the estimated differnece in PBIR

tt=fit$time
diff=fit$diff
low=fit$ci.low
up=fit$ci.up

tt=c(0, tt)
diff=c(0, diff)
low=c(0, low)
up=c(0, up)
B=length(tt)

tt=rep(tt, rep(2, B))[-1]
diff=rep(diff, rep(2, B))[-(2*B)]
low=rep(low, rep(2, B))[-(2*B)]
up=rep(up, rep(2, B))[-(2*B)]

plot(range(c(fit$time, 0)), range(c(low, up)),
     xlab="time", ylab="difference in PBIR",
     lwd=2, type="n")
lines(tt, diff, lwd=2, col=3)
lines(tt, low,  col=2)
lines(tt, up, col=2)
lines(range(fit$time), rep(0, 2), col=4, lty=4)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
