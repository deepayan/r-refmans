<!DOCTYPE html><html lang="en-GB"><head><title>Help for package icesSAG</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {icesSAG}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#icesSAG-package'><p>Stock Assessment Graphs Database Web Services</p></a></li>
<li><a href='#convertSAGxml'><p>Create and read the SAG XML data transfer file</p></a></li>
<li><a href='#findAssessmentKey'><p>Find a Key</p></a></li>
<li><a href='#getCustomColumns'><p>Get the Custom Columns for SAG records</p></a></li>
<li><a href='#getFishStockReferencePoints'><p>Get Reference Points</p></a></li>
<li><a href='#getLatestStockAdviceList'><p>Get List of Most Recent Advice</p></a></li>
<li><a href='#getListStocks'><p>Get a List of Fish Stocks</p></a></li>
<li><a href='#getSAG'><p>Get Any SAG Data</p></a></li>
<li><a href='#getSAGGraphs'><p>Get Summary Graphs of Stock Assessment Output</p></a></li>
<li><a href='#getSAGGTypegraphsandSettings'><p>Get Details on SAG Charts and Settings</p></a></li>
<li><a href='#getsetSAGSettingsForAStock'><p>Get and Set SAG Chart Settings</p></a></li>
<li><a href='#getStandardAssessmentGraphs'><p>Get a Graph of Stock Assessment Output</p></a></li>
<li><a href='#getStockSourceData'><p>Get Source Data</p></a></li>
<li><a href='#getStockStatusValues'><p>Get the Values in a Stock Status Table</p></a></li>
<li><a href='#getSummaryTable'><p>Get a Summary Table of Historical Stock Size</p></a></li>
<li><a href='#ices_get'><p>Get a url</p></a></li>
<li><a href='#ices_post'><p>Post to a url</p></a></li>
<li><a href='#sag_api'><p>Build a SAG web service url</p></a></li>
<li><a href='#setPackageOptions'><p>Get and Set icesSAG package options</p></a></li>
<li><a href='#stockFishdata'><p>Create a data.frame of fish stock data</p></a></li>
<li><a href='#stockInfo'><p>Create a list of fish stock information</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.5.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Stock Assessment Graphs Database Web Services</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, xml2, icesVocab, icesConnect, memoise, cachem, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Description:</td>
<td>R interface to access the web services of the ICES Stock Assessment
             Graphs database <a href="https://sg.ices.dk">https://sg.ices.dk</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://sg.ices.dk">https://sg.ices.dk</a>, <a href="https://github.com/ices-tools-prod/icesSAG">https://github.com/ices-tools-prod/icesSAG</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ices-tools-prod/icesSAG/issues">https://github.com/ices-tools-prod/icesSAG/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-10-24 07:16:30 UTC; colin</td>
</tr>
<tr>
<td>Author:</td>
<td>Colin Millar [aut, cre],
  Scott Large [aut],
  Arni Magnusson [aut],
  Carlos Pinto [aut],
  Laura Andreea Petre [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Colin Millar &lt;colin.millar@ices.dk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-10-24 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='icesSAG-package'>Stock Assessment Graphs Database Web Services</h2><span id='topic+icesSAG-package'></span><span id='topic+icesSAG'></span>

<h3>Description</h3>

<p>R interface to access the web services of the ICES Stock Assessment Graphs
database.
</p>


<h3>Details</h3>

<p><em>Get dataset:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+getSummaryTable">getSummaryTable</a></code>             </td><td style="text-align: left;"> summary results</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> </td><td style="text-align: left;"> reference points</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+getSAG">getSAG</a></code>                      </td><td style="text-align: left;"> any data
</td>
</tr>

</table>

<p><em>Look up codes:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+findAssessmentKey">findAssessmentKey</a></code>       </td><td style="text-align: left;"> find assessment key</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+getListStocks">getListStocks</a></code> </td><td style="text-align: left;"> list of stocks
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Colin Millar, Scott Large, Arni Magnusson, Carlos Pinto and Laura Andreea Petre.
</p>


<h3>References</h3>

<p>ICES Stock Assessment Graphs database: <a href="http://sg.ices.dk">http://sg.ices.dk</a>.
</p>
<p>ICES Stock Assessment Graphs web services:
<a href="http://sg.ices.dk/webservices.aspx">http://sg.ices.dk/webservices.aspx</a>.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://sg.ices.dk">https://sg.ices.dk</a>
</p>
</li>
<li> <p><a href="https://github.com/ices-tools-prod/icesSAG">https://github.com/ices-tools-prod/icesSAG</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ices-tools-prod/icesSAG/issues">https://github.com/ices-tools-prod/icesSAG/issues</a>
</p>
</li></ul>


<hr>
<h2 id='convertSAGxml'>Create and read the SAG XML data transfer file</h2><span id='topic+convertSAGxml'></span><span id='topic+createSAGxml'></span><span id='topic+readSAGxml'></span>

<h3>Description</h3>

<p>Convert between R data (a list and a data.frame) and the XML format required for uploading
data to the SAG database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSAGxml(info, fishdata)

readSAGxml(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="convertSAGxml_+3A_info">info</code></td>
<td>
<p>a list of stock information</p>
</td></tr>
<tr><td><code id="convertSAGxml_+3A_fishdata">fishdata</code></td>
<td>
<p>a data frame of fish data</p>
</td></tr>
<tr><td><code id="convertSAGxml_+3A_file">file</code></td>
<td>
<p>an xml file name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Either a list containing info and fishdata, or a string containing the xml file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+stockInfo">stockInfo</a></code> creates a list of stock information.
</p>
<p><code><a href="#topic+stockFishdata">stockFishdata</a></code> creates a data frame of fish stock summary data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
info &lt;- stockInfo(StockCode = "cod.27.347d",
                  AssessmentYear = 2017,
                  StockCategory = 1,
                  ModelType = "A",
                  ModelName = "SCA",
                  ContactPerson = "itsme@fisheries.com")
fishdata &lt;- stockFishdata(Year = 1990:2017, Catches = 100)
xmlfile &lt;- createSAGxml(info, fishdata)

out &lt;- readSAGxml(xmlfile)

</code></pre>

<hr>
<h2 id='findAssessmentKey'>Find a Key</h2><span id='topic+findAssessmentKey'></span>

<h3>Description</h3>

<p>Find a lookup key corresponding to a stock in a given assessment year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>findAssessmentKey(
  stock = NULL,
  year = 0,
  published = TRUE,
  regex = TRUE,
  full = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="findAssessmentKey_+3A_stock">stock</code></td>
<td>
<p>a stock name, e.g. cod-347d, or cod to find all cod stocks, or NULL (default)
to process all stocks.</p>
</td></tr>
<tr><td><code id="findAssessmentKey_+3A_year">year</code></td>
<td>
<p>the assessment year, e.g. 2015, or 0 to process all years.</p>
</td></tr>
<tr><td><code id="findAssessmentKey_+3A_published">published</code></td>
<td>
<p>whether to include only years where status is &quot;Published&quot; (applies only
when non-secure web services are in use, secure web service always
returns unpublished stocks).</p>
</td></tr>
<tr><td><code id="findAssessmentKey_+3A_regex">regex</code></td>
<td>
<p>whether to match the stock name as a regular expression.</p>
</td></tr>
<tr><td><code id="findAssessmentKey_+3A_full">full</code></td>
<td>
<p>whether to return a data frame with all stock list columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of keys (default) or a data frame if full is TRUE.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson and Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getListStocks">getListStocks</a></code> gets a list of stocks.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
findAssessmentKey("had.27.46a20", 2023, full = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='getCustomColumns'>Get the Custom Columns for SAG records</h2><span id='topic+getCustomColumns'></span>

<h3>Description</h3>

<p>Get custom columns, such as alternative biomass series or Fproxy
reference points for records in the SAG database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCustomColumns(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCustomColumns_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getCustomColumns_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSAG">getSAG</a></code> supports querying many years and quarters in one
function call.
</p>
<p><code><a href="#topic+getListStocks">getListStocks</a></code> and <code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> get
a list of stocks and reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("bli.27.5a14")
customs &lt;- getCustomColumns(assessmentKey)
head(customs)

## End(Not run)
</code></pre>

<hr>
<h2 id='getFishStockReferencePoints'>Get Reference Points</h2><span id='topic+getFishStockReferencePoints'></span>

<h3>Description</h3>

<p>Get biological reference points for all stocks in a given assessment year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getFishStockReferencePoints(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getFishStockReferencePoints_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getFishStockReferencePoints_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSAG">getSAG</a></code> supports querying many years and quarters in one
function call.
</p>
<p><code><a href="#topic+getListStocks">getListStocks</a></code> and <code><a href="#topic+getSummaryTable">getSummaryTable</a></code> get a list of
stocks and summary results.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("cod.27.21", year = 2023)
refpts &lt;- getFishStockReferencePoints(assessmentKey)
refpts

# To get all reference points in a given assessment year:
keys2022 &lt;- findAssessmentKey(year = 2022, full = TRUE)
keys2022 &lt;- keys2022[keys2022$Purpose == "Advice",]
refpts2022 &lt;- getFishStockReferencePoints(keys2022$AssessmentKey)
refpts2022

## End(Not run)
</code></pre>

<hr>
<h2 id='getLatestStockAdviceList'>Get List of Most Recent Advice</h2><span id='topic+getLatestStockAdviceList'></span>

<h3>Description</h3>

<p>Get a list of the most recent advice for all fish stocks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLatestStockAdviceList(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getLatestStockAdviceList_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar, Scott Large, and Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSummaryTable">getSummaryTable</a></code> gets a summary table of historical stock size.
</p>
<p><code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> gets biological reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
stocks &lt;- getLatestStockAdviceList()

## End(Not run)
</code></pre>

<hr>
<h2 id='getListStocks'>Get a List of Fish Stocks</h2><span id='topic+getListStocks'></span>

<h3>Description</h3>

<p>Get a list of fish stocks for a given assessment year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getListStocks(year, stock = NULL, modifiedAfter = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getListStocks_+3A_year">year</code></td>
<td>
<p>the assessment year, e.g. 2015, or 0 to process all years.</p>
</td></tr>
<tr><td><code id="getListStocks_+3A_stock">stock</code></td>
<td>
<p>a stock name, e.g. lin.27.5a.</p>
</td></tr>
<tr><td><code id="getListStocks_+3A_modifiedafter">modifiedAfter</code></td>
<td>
<p>date-time parameter in the format &quot;YYYY/MM/DD&quot;. If set
will only return stocks assessments modified after the provided date.</p>
</td></tr>
<tr><td><code id="getListStocks_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSummaryTable">getSummaryTable</a></code> gets a summary table of historical stock size.
</p>
<p><code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> gets biological reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
stocks &lt;- getListStocks(2023)
nshad &lt;- getListStocks(stock = "had.27.46a20")

## End(Not run)
</code></pre>

<hr>
<h2 id='getSAG'>Get Any SAG Data</h2><span id='topic+getSAG'></span>

<h3>Description</h3>

<p>This function combines the functionality of <code><a href="#topic+getListStocks">getListStocks</a></code>,
<code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code>, <code><a href="#topic+getSummaryTable">getSummaryTable</a></code>
and <code><a href="#topic+getStockDownloadData">getStockDownloadData</a></code>.
It supports querying many stocks and years in one function call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSAG(stock, year, data = "summary", combine = TRUE, purpose = "Advice")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSAG_+3A_stock">stock</code></td>
<td>
<p>a stock name, e.g. cod-347d, or cod to find all cod stocks, or
NULL to process all stocks.</p>
</td></tr>
<tr><td><code id="getSAG_+3A_year">year</code></td>
<td>
<p>the assessment year, e.g. 2015, or 0 to process all years.</p>
</td></tr>
<tr><td><code id="getSAG_+3A_data">data</code></td>
<td>
<p>the data of interest, either &quot;summary&quot;, &quot;refpts&quot; or &quot;source&quot;.</p>
</td></tr>
<tr><td><code id="getSAG_+3A_combine">combine</code></td>
<td>
<p>whether to combine the list output to a data frame.</p>
</td></tr>
<tr><td><code id="getSAG_+3A_purpose">purpose</code></td>
<td>
<p>the purpose of the entry, options are &quot;Advice&quot;, &quot;Bench&quot;,
&quot;InitAdvice&quot;, default is &quot;Advice&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame (default) or a list if <code>combine</code> is <code>TRUE</code>.
</p>


<h3>Note</h3>

<p>Only years with &quot;Published&quot; status are returned.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getListStocks">getListStocks</a></code>, <code><a href="#topic+getSummaryTable">getSummaryTable</a></code>,
<code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code>, and
<code><a href="#topic+getStockDownloadData">getStockDownloadData</a></code> get a list of stocks, summary
results, reference points, and all data including custom columns.
</p>
<p><code><a href="#topic+findAssessmentKey">findAssessmentKey</a></code> finds lookup keys.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
summary &lt;- getSAG("had.27.46a20", 2022)
refpts &lt;- getSAG("had.27.46a20", 2022, "refpts")

cod_summary &lt;- getSAG("cod", 2022)
cod_refpts &lt;- getSAG("cod", 2015:2016, "refpts")
cod_data &lt;- getSAG("cod", 2017, "source-data")

## End(Not run)
</code></pre>

<hr>
<h2 id='getSAGGraphs'>Get Summary Graphs of Stock Assessment Output</h2><span id='topic+getSAGGraphs'></span>

<h3>Description</h3>

<p>Get summary graphs of catches, recruitment, fishing pressure, and spawning
stock biomass.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSAGGraphs(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSAGGraphs_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getSAGGraphs_+3A_...">...</code></td>
<td>
<p>to allow scope for back compatibility</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array representing a bitmap.
</p>


<h3>Author(s)</h3>

<p>Colin Millar and Scott Large.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getListStocks">getListStocks</a></code> gets a list of stocks.
</p>
<p><code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> gets biological reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("cod", 2015)
graphs &lt;- getSAGGraphs(assessmentKey[1])
plot(graphs)
# note this stock only has one graph see:
# http://standardgraphs.ices.dk/ViewCharts.aspx?key=8309

## End(Not run)
</code></pre>

<hr>
<h2 id='getSAGGTypegraphsandSettings'>Get Details on SAG Charts and Settings</h2><span id='topic+getSAGGTypegraphsandSettings'></span><span id='topic+getSAGTypeGraphs'></span><span id='topic+getSAGTypeSettings'></span>

<h3>Description</h3>

<p>List all possible chart settings for each chart type (0 = general, 1 = Landings, ...).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSAGTypeGraphs(...)

getSAGTypeSettings(SAGChartKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSAGGTypegraphsandSettings_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
<tr><td><code id="getSAGGTypegraphsandSettings_+3A_sagchartkey">SAGChartKey</code></td>
<td>
<p>the type identifier of the SAG chart, e.g. 0, 1, 2, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with SAG chart type IDs and settings IDs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getSAGTypeGraphs()

getSAGTypeSettings(0)[-4]

## End(Not run)
</code></pre>

<hr>
<h2 id='getsetSAGSettingsForAStock'>Get and Set SAG Chart Settings</h2><span id='topic+getsetSAGSettingsForAStock'></span><span id='topic+getSAGSettingsForAStock'></span><span id='topic+setSAGSettingForAStock'></span>

<h3>Description</h3>

<p>details
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSAGSettingsForAStock(assessmentKey, ...)

setSAGSettingForAStock(
  assessmentKey,
  chartKey,
  settingKey,
  settingValue,
  copyNextYear,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getsetSAGSettingsForAStock_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getsetSAGSettingsForAStock_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
<tr><td><code id="getsetSAGSettingsForAStock_+3A_chartkey">chartKey</code></td>
<td>
<p>the type identifier of the SAG chart, e.g. 0, 1, 2, ...</p>
</td></tr>
<tr><td><code id="getsetSAGSettingsForAStock_+3A_settingkey">settingKey</code></td>
<td>
<p>the type identifier of the SAG chart setting, e.g. 0, 1, 2, ...</p>
</td></tr>
<tr><td><code id="getsetSAGSettingsForAStock_+3A_settingvalue">settingValue</code></td>
<td>
<p>the vale of the setting</p>
</td></tr>
<tr><td><code id="getsetSAGSettingsForAStock_+3A_copynextyear">copyNextYear</code></td>
<td>
<p>should the settings be copied to next year (TRUE) or not (FALSE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with SAG chart type IDs, settings IDs and setting values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
key &lt;- findAssessmentKey("cod.21.1", 2017)
graphs &lt;- getSAGGraphs(key[1])
plot(graphs)
getSAGSettingsForAStock(key [1])
chart1 &lt;- getLandingsGraph(key [1])
setSAGSettingForAStock(key [2], 1, 1, "Catches of cod.21.1 in 2017",
FALSE)
setSAGSettingForAStock(key [2], 1, 11, 10,
FALSE)
plot(chart1)
chart2 &lt;- getSpawningStockBiomassGraph(key [1])
plot(chart2)
setSAGSettingForAStock(key [1], 4, 1, "SSB of cod.21.1 in 2017",
FALSE)
plot(chart2)

## End(Not run)

</code></pre>

<hr>
<h2 id='getStandardAssessmentGraphs'>Get a Graph of Stock Assessment Output</h2><span id='topic+getStandardAssessmentGraphs'></span><span id='topic+getLandingsGraph'></span><span id='topic+getRecruitmentGraph'></span><span id='topic+getFishingMortalityGraph'></span><span id='topic+getSpawningStockBiomassGraph'></span><span id='topic+getFishMortality'></span><span id='topic+getstock_recruitment'></span><span id='topic+getYSSB'></span><span id='topic+getSSBHistoricalPerformance'></span><span id='topic+getFishingMortalityHistoricalPerformance'></span><span id='topic+getRecruitmentHistoricalPerformance'></span><span id='topic+getStockStatusTable'></span>

<h3>Description</h3>

<p>Get a graph of stock assessment output, e.g., historical stock size,
recruitment, and fishing pressure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLandingsGraph(assessmentKey, ...)

getRecruitmentGraph(assessmentKey, ...)

getFishingMortalityGraph(assessmentKey, ...)

getSpawningStockBiomassGraph(assessmentKey, ...)

getFishMortality(assessmentKey, ...)

getstock_recruitment(assessmentKey, ...)

getYSSB(assessmentKey, ...)

getSSBHistoricalPerformance(assessmentKey, ...)

getFishingMortalityHistoricalPerformance(assessmentKey, ...)

getRecruitmentHistoricalPerformance(assessmentKey, ...)

getStockStatusTable(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getStandardAssessmentGraphs_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getStandardAssessmentGraphs_+3A_...">...</code></td>
<td>
<p>to allow scope for back compatibility</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An array representing a bitmap.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getListStocks">getListStocks</a></code> gets a list of stocks.
</p>
<p><code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> gets biological reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKeys &lt;- findAssessmentKey("had", 2015)
landings_img &lt;- getLandingsGraph(assessmentKeys[1])
plot(landings_img)

landings_plots &lt;- getLandingsGraph(assessmentKeys)
plot(landings_plots)

## End(Not run)

</code></pre>

<hr>
<h2 id='getStockSourceData'>Get Source Data</h2><span id='topic+getStockSourceData'></span><span id='topic+getStockDownloadData'></span>

<h3>Description</h3>

<p>Get a copy of the source data for the specified stocks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getStockDownloadData(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getStockSourceData_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment,
can be a vector</p>
</td></tr>
<tr><td><code id="getStockSourceData_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSAG">getSAG</a></code> supports querying many years in one function call.
</p>
<p><code><a href="#topic+getListStocks">getListStocks</a></code> and <code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> get
a list of stocks and reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("cod-2224", year = 2016)
sourcedat &lt;- getStockDownloadData(assessmentKey)
head(sourcedat[[1]])

## End(Not run)

</code></pre>

<hr>
<h2 id='getStockStatusValues'>Get the Values in a Stock Status Table</h2><span id='topic+getStockStatusValues'></span>

<h3>Description</h3>

<p>Get summary results of historical stock size, recruitment, and fishing
pressure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getStockStatusValues(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getStockStatusValues_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getStockStatusValues_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSAG">getSAG</a></code> supports querying many years and quarters in one
function call.
</p>
<p><code><a href="#topic+getListStocks">getListStocks</a></code> and <code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> get
a list of stocks and reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("had.27.46a20", year = 2022)
status &lt;- getStockStatusValues(assessmentKey)
status

## End(Not run)

</code></pre>

<hr>
<h2 id='getSummaryTable'>Get a Summary Table of Historical Stock Size</h2><span id='topic+getSummaryTable'></span>

<h3>Description</h3>

<p>Get summary results of historical stock size, recruitment, and fishing
pressure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSummaryTable(assessmentKey, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getSummaryTable_+3A_assessmentkey">assessmentKey</code></td>
<td>
<p>the unique identifier of the stock assessment</p>
</td></tr>
<tr><td><code id="getSummaryTable_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+ices_get">ices_get</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getSAG">getSAG</a></code> supports querying many years and quarters in one
function call.
</p>
<p><code><a href="#topic+getListStocks">getListStocks</a></code> and <code><a href="#topic+getFishStockReferencePoints">getFishStockReferencePoints</a></code> get
a list of stocks and reference points.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
assessmentKey &lt;- findAssessmentKey("had.27.46a20", year = 2022)
sumtab &lt;- getSummaryTable(assessmentKey)
head(sumtab)

## End(Not run)
</code></pre>

<hr>
<h2 id='ices_get'>Get a url</h2><span id='topic+ices_get'></span><span id='topic+ices_get_cached'></span>

<h3>Description</h3>

<p>Get a url, optionally using an ICES authentication token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ices_get(
  url,
  retry = TRUE,
  quiet = !getOption("icesSAG.messages"),
  verbose = FALSE,
  content = TRUE,
  use_token = getOption("icesSAG.use_token")
)

ices_get_cached(
  url,
  retry = TRUE,
  quiet = !getOption("icesSAG.messages"),
  verbose = FALSE,
  content = TRUE,
  use_token = getOption("icesSAG.use_token")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ices_get_+3A_url">url</code></td>
<td>
<p>the url to get.</p>
</td></tr>
<tr><td><code id="ices_get_+3A_retry">retry</code></td>
<td>
<p>should the get request be retried if first attempt
fails? default TRUE.</p>
</td></tr>
<tr><td><code id="ices_get_+3A_quiet">quiet</code></td>
<td>
<p>should all messages be suppressed, default FALSE.</p>
</td></tr>
<tr><td><code id="ices_get_+3A_verbose">verbose</code></td>
<td>
<p>should verbose output form the http request be
returned? default FALSE.</p>
</td></tr>
<tr><td><code id="ices_get_+3A_content">content</code></td>
<td>
<p>should content be returned, or the full http response?
default TRUE, i.e. content is returned by default.</p>
</td></tr>
<tr><td><code id="ices_get_+3A_use_token">use_token</code></td>
<td>
<p>should an authentication token be sent with the
request? default is the value of the option icesSAG.use_token.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>content or an http response.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>ices_get_cached()</code>: cached version of ices_get
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+sag_api">sag_api</a></code> builds a SAG web service url.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ices_get(sag_api("StockList", year = 2022))

## End(Not run)
</code></pre>

<hr>
<h2 id='ices_post'>Post to a url</h2><span id='topic+ices_post'></span>

<h3>Description</h3>

<p>Post to a url using an ICES authentication token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ices_post(url, body = list(), retry = TRUE, verbose = FALSE, use_token = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ices_post_+3A_url">url</code></td>
<td>
<p>the url to get.</p>
</td></tr>
<tr><td><code id="ices_post_+3A_body">body</code></td>
<td>
<p>a list of named arguments to be sent as the body of the
post request.</p>
</td></tr>
<tr><td><code id="ices_post_+3A_retry">retry</code></td>
<td>
<p>should the get request be retried if first attempt
fails? default TRUE.</p>
</td></tr>
<tr><td><code id="ices_post_+3A_verbose">verbose</code></td>
<td>
<p>should verbose output form the http request be
returned? default FALSE.</p>
</td></tr>
<tr><td><code id="ices_post_+3A_use_token">use_token</code></td>
<td>
<p>should an authentication token be sent with the
request? default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>content or an http response.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sag_api">sag_api</a></code> builds a SAG web service url.
</p>
<p><code><a href="#topic+icesSAG-package">icesSAG-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ices_get(sag_api("StockList", year = 2022))

## End(Not run)
</code></pre>

<hr>
<h2 id='sag_api'>Build a SAG web service url</h2><span id='topic+sag_api'></span>

<h3>Description</h3>

<p>utility to build a url with optional query arguments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sag_api(service, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sag_api_+3A_service">service</code></td>
<td>
<p>the name of the service</p>
</td></tr>
<tr><td><code id="sag_api_+3A_...">...</code></td>
<td>
<p>name arguments will be added as queries</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a complete url as a character string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sag_api("hi", bye = 21)
sag_api("StockList", year = 2021)

</code></pre>

<hr>
<h2 id='setPackageOptions'>Get and Set icesSAG package options</h2><span id='topic+setPackageOptions'></span><span id='topic+sag_use_token'></span><span id='topic+sag_messages'></span>

<h3>Description</h3>

<p>There are two options of interest, 1) switch on or off the use off
authenticated web service calls, and 2) switch on or off the display of
messages to the console.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sag_use_token(value)

sag_messages(value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="setPackageOptions_+3A_value">value</code></td>
<td>
<p>TRUE or FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisible return of the old value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sag_use_token(TRUE)
sag_messages(TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='stockFishdata'>Create a data.frame of fish stock data</h2><span id='topic+stockFishdata'></span>

<h3>Description</h3>

<p>This function is a wrapper to <code>data.frame(...)</code> in which the names are forced to match with
the names required for the SAG database.  See http://dome.ices.dk/datsu/selRep.aspx?Dataset=126
for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stockFishdata(Year, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stockFishdata_+3A_year">Year</code></td>
<td>
<p>a vector of years.</p>
</td></tr>
<tr><td><code id="stockFishdata_+3A_...">...</code></td>
<td>
<p>additional information, e.g. Recruitment, StockSize, Landings, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame, where all names are valid column names in the SAG database.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>stockFishdata(Year = 1990:2017, Catches = 100)
</code></pre>

<hr>
<h2 id='stockInfo'>Create a list of fish stock information</h2><span id='topic+stockInfo'></span>

<h3>Description</h3>

<p>This function is a wrapper to <code>list(...)</code> in which the names are forced to match with
the names required for the SAG database.  See http://dome.ices.dk/datsu/selRep.aspx?Dataset=126
for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stockInfo(
  StockCode,
  AssessmentYear,
  ContactPerson,
  StockCategory,
  Purpose = "Advice",
  ModelType,
  ModelName,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stockInfo_+3A_stockcode">StockCode</code></td>
<td>
<p>a stock name, e.g. cod-347d.</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_assessmentyear">AssessmentYear</code></td>
<td>
<p>the assessment year, e.g. 2015.</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_contactperson">ContactPerson</code></td>
<td>
<p>the email for the person responsible for uploading the stock data.</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_stockcategory">StockCategory</code></td>
<td>
<p>Category of the assessment used (see below)</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_purpose">Purpose</code></td>
<td>
<p>the purpose of the entry, options are &quot;Advice&quot;, &quot;Bench&quot;,
&quot;InitAdvice&quot;, default is &quot;Advice&quot;.</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_modeltype">ModelType</code></td>
<td>
<p>the type of the model used (see below for links to more information)</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_modelname">ModelName</code></td>
<td>
<p>the name (acronym) of the model used if available
(see below for links to more information)</p>
</td></tr>
<tr><td><code id="stockInfo_+3A_...">...</code></td>
<td>
<p>additional information, e.g. BMGT, FMSY, RecruitmentAge, ...</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named sag.list, inheriting from a list, where all names are valid column names in the
SAG database.
</p>


<h3>Author(s)</h3>

<p>Colin Millar.
</p>


<h3>See Also</h3>

<p>Links to the relevant ICES vocabularies list are here
StockCode: <a href="https://vocab.ices.dk/?ref=357">https://vocab.ices.dk/?ref=357</a>
StockCategory: <a href="https://vocab.ices.dk/?ref=1526">https://vocab.ices.dk/?ref=1526</a>
Purpose: <a href="https://vocab.ices.dk/?ref=1516">https://vocab.ices.dk/?ref=1516</a>
ModelType: <a href="https://vocab.ices.dk/?ref=1524">https://vocab.ices.dk/?ref=1524</a>
ModelName: <a href="https://vocab.ices.dk/?ref=1525">https://vocab.ices.dk/?ref=1525</a>
</p>
<p>Link to the relevant format description is <a href="https://datsu.ices.dk/web/selRep.aspx?Dataset=126">https://datsu.ices.dk/web/selRep.aspx?Dataset=126</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>info &lt;-
  stockInfo(StockCode = "cod.27.47d20",
            AssessmentYear = 2017,
            StockCategory = 1,
            ModelType = "A",
            ModelName = "SCA",
            ContactPerson = "itsme@fisheries.com")

 info
 info$mistake &lt;- "oops"
 info
 # should have gotten a warning message

 ## Not run: 
 # use icesVocab to list valid codes etc.
 library(icesVocab)
 # print the list of valid stock codes
 stock.codes &lt;- getCodeList("ICES_StockCode")
 stock.codes[1:10,1:2]

 # print the list of assessment model types in the ICES vocabulary
 model.types &lt;- getCodeList("AssessmentModelType")
 model.types[1:2]

 # print the list of assessment model names in the ICES vocabulary
 model.names &lt;- getCodeList("AssessmentModelName")
 model.names$Key
 
## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
