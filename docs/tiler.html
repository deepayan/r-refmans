<!DOCTYPE html><html><head><title>Help for package tiler</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tiler}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tiler'><p>tiler: Create map tiles from R</p></a></li>
<li><a href='#tile'><p>Create map tiles</p></a></li>
<li><a href='#tile_viewer'><p>Create an HTML tile preview</p></a></li>
<li><a href='#tiler_options'><p>Options</p></a></li>
<li><a href='#view_tiles'><p>View map tiles with Leaflet</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Create Geographic and Non-Geographic Map Tiles</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates geographic map tiles from geospatial map files or 
    non-geographic map tiles from simple image files. This package provides a 
    tile generator function for creating map tile sets for use with packages 
    such as 'leaflet'. In addition to generating map tiles based on a common 
    raster layer source, it also handles the non-geographic edge case, producing 
    map tiles from arbitrary images. These map tiles, which have a 
    non-geographic, simple coordinate reference system (CRS), can also be used 
    with 'leaflet' when applying the simple CRS option. Map tiles can be created 
    from an input file with any of the following extensions: tif, grd and nc for 
    spatial maps and png, jpg and bmp for basic images. This package requires 
    'Python' and the 'gdal' library for 'Python'. 'Windows' users are 
    recommended to install 'OSGeo4W' (<a href="https://trac.osgeo.org/osgeo4w/">https://trac.osgeo.org/osgeo4w/</a>) as an 
    easy way to obtain the required 'gdal' support for 'Python'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/tiler/">https://docs.ropensci.org/tiler/</a>,
<a href="https://github.com/ropensci/tiler">https://github.com/ropensci/tiler</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/tiler/issues">https://github.com/ropensci/tiler/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>png, raster, sp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bmp, jpeg, knitr, leaflet, parallel, rmarkdown, sf, testthat,
webshot</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Python (&gt;= 2.7), python-gdal library (For Windows,
gdal installed via OSGeo4W &lt;https://trac.osgeo.org/osgeo4w/&gt;
recommended) clipboard</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-10 02:24:45 UTC; Matt</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew Leonawicz <a href="https://orcid.org/0000-0001-9452-2771"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Alex M Chubaty <a href="https://orcid.org/0000-0001-7146-8135"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew Leonawicz &lt;mfleonawicz@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-10 03:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tiler'>tiler: Create map tiles from R</h2><span id='topic+tiler'></span><span id='topic+tiler-package'></span>

<h3>Description</h3>

<p>The tiler package creates geographic map tiles from geospatial map files or
non-geographic map tiles from simple image files.
</p>


<h3>Details</h3>

<p>This package provides a tile generator function for creating map tile sets
for use with packages such as <code>leaflet</code>. In addition to generating map tiles
based on a common raster layer source, it also handles the non-geographic
edge case, producing map tiles from arbitrary images. These map tiles, which
have a non-geographic simple coordinate reference system (CRS), can also be
used with <code>leaflet</code> when applying the simple CRS option.
<br /><br />
Map tiles can be created from an input file with any of the following
extensions: <code>tif</code>, <code>grd</code> and <code>nc</code> for spatial maps and <code>png</code>, <code>jpg</code> and <code>bmp</code>
for basic images.
<br /><br />
This package requires Python and the <code>gdal</code> library for Python. Windows users
are recommended to install <code>OSGeo4W</code>: <code style="white-space: pre;">&#8288;https://trac.osgeo.org/osgeo4w/&#8288;</code> as an
easy way to obtain the required <code>gdal</code> support for Python in Windows.
</p>

<hr>
<h2 id='tile'>Create map tiles</h2><span id='topic+tile'></span>

<h3>Description</h3>

<p>Create geographic and non-geographic map tiles from a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tile(
  file,
  tiles,
  zoom,
  crs = NULL,
  resume = FALSE,
  viewer = TRUE,
  georef = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tile_+3A_file">file</code></td>
<td>
<p>character, input file.</p>
</td></tr>
<tr><td><code id="tile_+3A_tiles">tiles</code></td>
<td>
<p>character, output directory for generated tiles.</p>
</td></tr>
<tr><td><code id="tile_+3A_zoom">zoom</code></td>
<td>
<p>character, zoom levels. Example format: <code>"3-7"</code>.
See details.</p>
</td></tr>
<tr><td><code id="tile_+3A_crs">crs</code></td>
<td>
<p>character, Proj4 string. Use this to force set the CRS of a loaded
raster object from <code>file</code> in cases where the CRS is missing but known, to
avoid defaulting to non-geographic tiling.</p>
</td></tr>
<tr><td><code id="tile_+3A_resume">resume</code></td>
<td>
<p>logical, only generate missing tiles.</p>
</td></tr>
<tr><td><code id="tile_+3A_viewer">viewer</code></td>
<td>
<p>logical, also create <code>preview.html</code> adjacent to <code>tiles</code>
directory for previewing tiles in the browser using Leaflet.</p>
</td></tr>
<tr><td><code id="tile_+3A_georef">georef</code></td>
<td>
<p>logical, for non-geographic tiles only. If <code>viewer = TRUE</code>,
then the Leaflet widget in <code>preview.html</code> will add map markers with
coordinate labels on mouse click to assist with georeferencing of
non-geographic tiles.</p>
</td></tr>
<tr><td><code id="tile_+3A_...">...</code></td>
<td>
<p>additional arguments for projected maps: reprojection method or
any arguments to <code>raster::RGB()</code>, e.g. <code>col</code> and <code>colNA</code>. See details. Other
additional arguments <code>lng</code> and <code>lat</code> can also be passed to the tile
previewer. See <code><a href="#topic+tile_viewer">tile_viewer()</a></code> for details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function supports both geographic and non-geographic tile generation.
When <code>file</code> is a simple image file such as <code>png</code>, <code>tile()</code> generates
non-geographic, simple CRS tiles. Files that can be loaded by the <code>raster</code>
package yield geographic tiles as long as <code>file</code> has projection information.
If the raster object's Proj4 string is <code>NA</code>, it falls back on non-geographic
tile generation and a warning is thrown.
</p>
<p>Choice of appropriate zoom levels for non-geographic image files may depend
on the size of the image. A <code>zoom</code> value may be partially ignored for image
files under certain conditions. For instance using the example <code>map.png</code>
below, when passing strictly <code>zoom = n</code> where <code>n</code> is less than 3, this still
generates tiles for zoom <code>n</code> up through 3.
</p>


<h4>Supported file types</h4>

<p>Supported simple CRS/non-geographic image file types include <code>png</code>, <code>jpg</code> and
<code>bmp</code>. For projected map data, supported file types include three types
readable by the <code>raster</code> package: <code>grd</code>, <code>tif</code>, and <code>nc</code> (requires <code>ncdf4</code>).
Other currently unsupported file types passed to <code>file</code> throw an error.
</p>



<h4>Raster file inputs</h4>

<p>If a map file loadable by <code>raster</code> is a single-layer raster object, tile
coloring is applied. To override default coloring of data and <code>noData</code>
pixels, pass the additional arguments <code>col</code> and <code>colNA</code> to <code>...</code>.
Multi-layer raster objects are rejected with an error message. The only
exception is a three- or four-band raster, which is assumed to represent
red, green, blue and alpha channels, respectively.
In this case, processing will continue but coloring arguments are ignored as
unnecessary.
<br /><br />
Prior to tiling, a geographically-projected raster layer is reprojected to
EPSG:4326 only if it has some other projection. The only reprojection
argument available through <code>...</code> is <code>method</code>, which can be <code>"bilinear"</code>
(default) or<code>"ngb"</code>. If complete control over reprojection is required, this
should be done prior to passing the rasterized file to the <code>tile</code> function.
Then no reprojection is performed by <code>tile()</code>. When <code>file</code> consists of RGB or
RGBA bands, <code>method</code> is ignored if provided and reprojection uses nearest
neighbor.
<br /><br />
It is recommended to avoid using a projected 4-band RGBA raster file.
However, the alpha channel appears to be ignored anyway. <code>gdal2tiles</code> gives
an internal warning. Instead, create your RGBA raster file in unprojected
form and it should pass through to <code>gdal2tiles</code> without any issues.
Three-band RGB raster files are unaffected by reprojection.
</p>



<h4>Tiles and Leaflet</h4>

<p><code>gdal2tiles</code> generates TMS tiles. If expecting XYZ, for example when using
with Leaflet, you can change the end of the URL to your hosted tiles from
<code style="white-space: pre;">&#8288;{z}/{x}/{y}.png&#8288;</code> to <code style="white-space: pre;">&#8288;{z}/{x}/{-y}.png&#8288;</code>.
<br /><br />
This function is supported by two different versions of <code>gdal2tiles</code>. There
is the standard version, which generates geospatial tiles in TMS format. The
other version of <code style="white-space: pre;">&#8288;gdal2tiles} handles basic image files like a matrix of rows and columns, using a simple Cartesian coordinate system based on pixel dimensions of the image file. See the Leaflet JS library and &#8288;</code>leaflet'
package documentation for working with custom tiles in Leaflet.
</p>



<h3>Value</h3>

<p>nothing is returned but tiles are written to disk.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+view_tiles">view_tiles()</a></code>, <code><a href="#topic+tile_viewer">tile_viewer()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# non-geographic/simple CRS
x &lt;- system.file("maps/map.png", package = "tiler")
tiles &lt;- file.path(tempdir(), "tiles")
tile(x, tiles, "2-3")

## Not run: 
# unprojected map
x &lt;- system.file("maps/map_wgs84.tif", package = "tiler")
tile(x, tiles, 0)

# projected map
x &lt;- system.file("maps/map_albers.tif", package = "tiler")
tile(x, tiles, 0)

## End(Not run)

</code></pre>

<hr>
<h2 id='tile_viewer'>Create an HTML tile preview</h2><span id='topic+tile_viewer'></span>

<h3>Description</h3>

<p>Create an HTML file that displays a tile preview using Leaflet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tile_viewer(tiles, zoom, width = NULL, height = NULL, georef = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tile_viewer_+3A_tiles">tiles</code></td>
<td>
<p>character, directory where tiles are stored.</p>
</td></tr>
<tr><td><code id="tile_viewer_+3A_zoom">zoom</code></td>
<td>
<p>character, zoom levels full range. Example format: <code>"3-7"</code>.</p>
</td></tr>
<tr><td><code id="tile_viewer_+3A_width">width</code></td>
<td>
<p><code>NULL</code> (default) for geospatial map tiles. The original image
width in pixels for non-geographic, simple CRS tiles.</p>
</td></tr>
<tr><td><code id="tile_viewer_+3A_height">height</code></td>
<td>
<p><code>NULL</code> (default) for geospatial map tiles. The original image
height in pixels for non-geographic, simple CRS tiles.</p>
</td></tr>
<tr><td><code id="tile_viewer_+3A_georef">georef</code></td>
<td>
<p>logical, for non-geographic tiles only. If <code>viewer = TRUE</code>,
then the Leaflet widget in <code>preview.html</code> will add map markers with
coordinate labels on mouse click to assist with georeferencing of
non-geographic tiles.</p>
</td></tr>
<tr><td><code id="tile_viewer_+3A_...">...</code></td>
<td>
<p>additional optional arguments include <code>lng</code> and <code>lat</code> for setting
the view longitude and latitude. These three arguments only apply to
geographic tiles. Viewer centering is <code style="white-space: pre;">&#8288;(0, 0)&#8288;</code> by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a file <code>preview.html</code> adjacent to the <code>tiles</code> base
directory. When loaded in the browser, this file displays map tiles from the
adjacent folder. For example, if tiles are stored in <code>project/tiles</code>, this
function creates <code>project/preview.html</code>.
</p>
<p>By default, <code>tile()</code> creates this file. The only reasons to call
<code>tile_viewer()</code> directly after producing map tiles are: (1) if
<code>viewer = FALSE</code> was set in the call to <code>tile()</code>, (2) if <code>tile()</code> was called
multiple times, e.g., for different batches of zoom levels, and thus the most
recent call did not use the full zoom range, or (3) <code>preview.html</code> was
deleted for some other reason.
</p>
<p>If calling this function directly, ensure that the min and max zoom, and
original image pixel dimensions if applicable, match the generated tiles.
These arguments are passed to <code style="white-space: pre;">&#8288;tile_viewer} automatically when called within &#8288;</code>tile()<code style="white-space: pre;">&#8288;, based on the source file provided to &#8288;</code>tile()'.
</p>


<h3>Value</h3>

<p>nothing is returned, but a file is written to disk.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+view_tiles">view_tiles()</a></code>, <code><a href="#topic+tile">tile()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tile_viewer(file.path(tempdir(), "tiles"), "3-7") # requires existing tiles
</code></pre>

<hr>
<h2 id='tiler_options'>Options</h2><span id='topic+tiler_options'></span>

<h3>Description</h3>

<p>Options for tiler package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tiler_options(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tiler_options_+3A_...">...</code></td>
<td>
<p>a list of options.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>On Windows systems, if the system paths for <code>python.exe</code> and <code>OSGeo4W.bat</code>
are not added to the system PATH variable, they must be provided by the user
after loading the package. It is recommended to add these to the system path
so they do not need to be specified for every R session.
</p>
<p>As long as you are using OSGeo4W, you can ignore the Python path
specification and do not even need to install it on your system separately;
OSGeo4W will use its own built-in version.
</p>
<p>The recommended way to have GDAL available to Python in Windows is to
install <a href="https://trac.osgeo.org/osgeo4w/">OSGeo4W</a>. This is commonly
installed along with
<a href="https://qgis.org/en/site/forusers/download.html">QGIS</a>.
</p>
<p>By default, <code>tiler_options()</code> is set on package load with
<code>osgeo4w = "OSGeo4W.bat"</code>. It is expected that the user has added the path to
this file to the system PATH variable in Windows. For example, if it is
installed to <code style="white-space: pre;">&#8288;C:/OSGeo4W64/OSGeo4W.bat&#8288;</code>, add <code style="white-space: pre;">&#8288;C:/OSGeo4W64&#8288;</code> to your PATH. If
you do want to specify the path in the R session using <code>tiler_options()</code>,
provide the full path including the filename. See the example.
</p>
<p>None of this applies to other systems. As long as the system requirements,
Python and GDAL, are installed, then <code>tile()</code> should generate tiles without
getting or setting any <code>tiler_options()</code>.
</p>


<h3>Value</h3>

<p>The function prints all set options if called with no arguments.
When setting options, nothing is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tiler_options()
tiler_options(osgeo4w = "C:/OSGeo4W64/OSGeo4W.bat")
</code></pre>

<hr>
<h2 id='view_tiles'>View map tiles with Leaflet</h2><span id='topic+view_tiles'></span>

<h3>Description</h3>

<p>View map tiles in the browser using leaflet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>view_tiles(tiles)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="view_tiles_+3A_tiles">tiles</code></td>
<td>
<p>character, directory where tiles are stored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function opens <code>preview.html</code> in a web browser. This file displays
map tiles in a Leaflet widget. The file is created when <code>tile()</code> is called to
generate the map tiles, unless <code>viewer = FALSE</code>. Alternatively, it is created
(or re-created) subsequent to tile creation using <code>tile_viewer()</code>.
</p>


<h3>Value</h3>

<p>nothing is returned, but the default browser is launched.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+tile_viewer">tile_viewer()</a></code>, <code><a href="#topic+tile">tile()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># launches browser; requires an existing tile set
## Not run: view_tiles(file.path(tempdir(), "tiles"))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
