<!DOCTYPE html><html><head><title>Help for package synthACS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {synthACS}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_constraint'><p>Add new constraint to constraint table</p></a></li>
<li><a href='#adjDR'><p>Age-adjusted Death Rate by race and gender</p></a></li>
<li><a href='#AgeRaceDR'><p>Death rates in the United States by age and race, 2013</p></a></li>
<li><a href='#all_geog_constraint_age'><p>Create age constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_edu'><p>Create educational attainment constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_employment'><p>Create employment status constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_gender'><p>Create gender constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_geog_mob'><p>Create geographic mobility constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_income'><p>Create individual income constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_marital_status'><p>Create marital status constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_nativity'><p>Create nativity status constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_poverty'><p>Create poverty status constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_constraint_race'><p>Create race constraint list to a set of geographies</p></a></li>
<li><a href='#all_geog_optimize_microdata'><p>Optimize the selection of a micro data population for a set of geographies.</p></a></li>
<li><a href='#all_geog_synthetic_new_attribute'><p>Add a new attribute to a set (ie list) of synthetic_micro datasets</p></a></li>
<li><a href='#all_geogs_add_constraint'><p>Add new constraint to a set of geographies</p></a></li>
<li><a href='#BR2014'><p>Birth Rates by Age and Race of Mother</p></a></li>
<li><a href='#calculate_TAE'><p>Calculate the total absolute error (TAE) between sample data and constraints.</p></a></li>
<li><a href='#combine_smsm'><p>Combine separate SMSM optimizations</p></a></li>
<li><a href='#derive_synth_datasets'><p>Derive synthetic micro datasets for a given geography.</p></a></li>
<li><a href='#fetch_data'><p>Get Aggregate Data Specified Geography</p></a></li>
<li><a href='#gen_attr_vectors'><p>Generate attribute vectors</p></a></li>
<li><a href='#get_best_fit'><p>Extract best fit for a specified geogrpahy from an 'smsm_set' object</p></a></li>
<li><a href='#get_dataset_names'><p>Get dataset names from a &quot;macroACS&quot; object.</p></a></li>
<li><a href='#get_endyear'><p>Get the endyear from a &quot;macroACS&quot; object.</p></a></li>
<li><a href='#get_final_tae'><p>Extract the final TAE for a specified geogrpahy from an 'smsm_set' object</p></a></li>
<li><a href='#get_geography'><p>Get the geography title from a &quot;macroACS&quot; object.</p></a></li>
<li><a href='#get_span'><p>Get the span from a &quot;macroACS&quot; object.</p></a></li>
<li><a href='#is.macro_micro'><p>Check macro_micro class</p></a></li>
<li><a href='#is.macroACS'><p>Check macroACS class</p></a></li>
<li><a href='#is.micro_synthetic'><p>Check micro_synthetic class</p></a></li>
<li><a href='#is.smsm_set'><p>Check smsm_set class</p></a></li>
<li><a href='#is.synthACS'><p>Check synthACS class</p></a></li>
<li><a href='#la_hospitals'><p>Hospitals in Los Angeles County, CA USA</p></a></li>
<li><a href='#LifeExp'><p>Life expectancy at certain ages; United States, 2013</p></a></li>
<li><a href='#marginalize_attr'><p>Marginalize synthetic attributes</p></a></li>
<li><a href='#MBR'><p>Multiple Birth Rate data by year and race of mother</p></a></li>
<li><a href='#optimize_microdata'><p>Optimize the selection of a micro data population.</p></a></li>
<li><a href='#plot_TAEpath'><p>Plot simulated annealing path</p></a></li>
<li><a href='#pull_acs_basetables'><p>Pull ACS base tables</p></a></li>
<li><a href='#pull_bachelors'><p>Pull ACS data on field of bachelor's degree</p></a></li>
<li><a href='#pull_edu'><p>Pull ACS educational attainment and enrollment data</p></a></li>
<li><a href='#pull_geo_mobility'><p>Pull ACS geographic mobility data</p></a></li>
<li><a href='#pull_household'><p>Pull ACS data on households and housing units</p></a></li>
<li><a href='#pull_inc_earnings'><p>Pull ACS income and earnings data</p></a></li>
<li><a href='#pull_mar_status'><p>Pull ACS marital status data</p></a></li>
<li><a href='#pull_population'><p>Pull ACS population data</p></a></li>
<li><a href='#pull_pov_inc'><p>Pull ACS income and earnings data</p></a></li>
<li><a href='#pull_race_data'><p>Pull ACS race data</p></a></li>
<li><a href='#pull_synth_data'><p>Pull ACS data for synthetic data creation.</p></a></li>
<li><a href='#pull_transit_work'><p>Pull ACS transit and work data</p></a></li>
<li><a href='#rawDR'><p>Raw Death Rate by race and gender</p></a></li>
<li><a href='#split'><p>Split a &quot;macroACS&quot; object</p></a></li>
<li><a href='#stateFR'><p>Birth rates, by age of mother: United States, each state and territory, 2014</p></a></li>
<li><a href='#summary.smsm_set'><p>Summarizing SMSM fits</p></a></li>
<li><a href='#synthetic_new_attribute'><p>Add a new attribute to a synthetic_micro dataset</p></a></li>
<li><a href='#TFR'><p>Total Fertility Rate by race of mother</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Synthetic Microdata and Spatial MicroSimulation Modeling for ACS
Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.7.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alex Whitworth &lt;whitworth.alex@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides access to curated American Community Survey (ACS) base tables via a wrapper
  to library(acs). Builds synthetic micro-datasets at any user-specified geographic level with
  ten default attributes; and, conducts spatial microsimulation modeling (SMSM) via simulated
  annealing.  SMSM is conducted in parallel by default. Lastly, we provide functionality for
  data-extensibility of micro-datasets &lt;<a href="https://doi.org/10.18637%2Fjss.v104.i07">doi:10.18637/jss.v104.i07</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.9.6), Rcpp, acs (&ge; 2.1), retry</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, sp (&ge; 1.2), knitr, rmarkdown, R.rsp</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, R.rsp</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-26 03:19:11 UTC; awhitworth</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex Whitworth [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-26 10:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_constraint'>Add new constraint to constraint table</h2><span id='topic+add_constraint'></span>

<h3>Description</h3>

<p>Add a new constraint to the mapping between a given macro dataset (class &quot;macroACS&quot;)
and a matching micro dataset (class &quot;micro_synthetic). May be called repeatedly to create a 
set of constraints.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_constraint(
  attr_name = "variable",
  attr_totals,
  micro_data,
  constraint_list = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_constraint_+3A_attr_name">attr_name</code></td>
<td>
<p>The name of the attribute, or variable, that you wish to constrain.</p>
</td></tr>
<tr><td><code id="add_constraint_+3A_attr_totals">attr_totals</code></td>
<td>
<p>A named integer vector of counts per level of the new constraining attribute.</p>
</td></tr>
<tr><td><code id="add_constraint_+3A_micro_data">micro_data</code></td>
<td>
<p>The micro dataset, of class <code>"micro_synthetic"</code>, for which you wish to
add a constraint.</p>
</td></tr>
<tr><td><code id="add_constraint_+3A_constraint_list">constraint_list</code></td>
<td>
<p>A <code>list</code> of prior constraints on the same dataset which you wish to
add to. Defaults to <code>NULL</code> (ie. the default is that this is the first constraint.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of constraints.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## assumes that you have a micro_synthetic dataset named test_micro and attribute counts
## named a,e,g respectively 
c_list &lt;- add_constraint(attr_name= "age", attr_totals= a, micro_data= test_micro)
c_list &lt;- add_constraint(attr_name= "edu_attain", attr_totals= e, micro_data= test_micro,
                        constraint_list= c_list)
c_list &lt;- add_constraint(attr_name= "gender", attr_totals= g, micro_data= test_micro,
                         constraint_list= c_list)

## End(Not run)
</code></pre>

<hr>
<h2 id='adjDR'>Age-adjusted Death Rate by race and gender</h2><span id='topic+adjDR'></span>

<h3>Description</h3>

<p>A dataset containing age-adjusted death rate data by race and gender of the deceased. Data  
is provided for 1980-2013.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjDR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 612 observations and 4 variables.
</p>

<dl>
<dt>year</dt><dd><p>The year for which data was was recorded.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the deceased One of <code>all</code> all races; <code>white</code> 
whites; <code>black_aa</code> black / African-American; <code>nat_amer</code> American Indian
or Native Alaskan; <code>asian_isl</code> Asian or Pacific Islander; <code>hisp_lat</code> Hispanic.</p>
</dd>
<dt>gender</dt><dd><p>The gender of the deceased. One of <code>c(both, male, female)</code></p>
</dd>
<dt>adj_death_rate</dt><dd><p>The age-adjusted death rate. See details.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>The age-adjusted death rates are used to compare relative mortality risks among groups and 
over time. They were computed by the direct method, which is defined 
</p>
<p style="text-align: center;"><code class="reqn">R'= \sum_{i} \frac{P_{si}}{P_{s}}R_i</code>
</p>
<p> where <code class="reqn">P_{si}</code> is the standard population for age group i,
<code class="reqn">P_s</code> is the total US standard population and <code class="reqn">R_i</code> is the raw death rate for age group i. 
</p>
</li>
<li><p>Populations are based on census counts enumerated as of April 1 of the census year and estimated
as of July 1 for non-census years.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/deaths.htm">https://www.cdc.gov/nchs/nvss/deaths.htm</a>
</p>


<h3>References</h3>

<p>Xu, J. Q., S. L. Murphy, and K. D. Kochanek. &quot;Deaths: final data for 2013.&quot; National 
Vital Statistics Reports 64.2 (2015).
</p>

<hr>
<h2 id='AgeRaceDR'>Death rates in the United States by age and race, 2013</h2><span id='topic+AgeRaceDR'></span>

<h3>Description</h3>

<p>A dataset containing death rates for individuals by age group and race 
for the United States, 2013.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AgeRaceDR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 360 observations and 4 variables.
</p>

<dl>
<dt>age</dt><dd><p>The exact age, in years, at which life expectany is calculated.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the deceased One of <code>all</code> all races; <code>white</code> 
whites; <code>black</code> black / African-American; <code>hispanic</code> Hispanic; <code>asian.isl</code>
Asian and Pacific Islander; <code>nat.amer</code> Native American or Alaska Native.</p>
</dd>
<dt>gender</dt><dd><p>The gender of the deceased. One of <code>c(both, male, female)</code></p>
</dd>
<dt>death_rate</dt><dd><p>The raw death rate. See details.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>The death rate is defined as deaths per 100,000 population. 
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/deaths.htm">https://www.cdc.gov/nchs/nvss/deaths.htm</a>
</p>


<h3>References</h3>

<p>Xu, J. Q., S. L. Murphy, and K. D. Kochanek. &quot;Deaths: final data for 2013.&quot; National 
Vital Statistics Reports 64.2 (2015).
</p>

<hr>
<h2 id='all_geog_constraint_age'>Create age constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_age'></span>

<h3>Description</h3>

<p>Create a new age constraint list to the mapping between a a set of macro datasets and a 
matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_age(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_age_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_age_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 a1 &lt;- all_geog_constraint_age(obj, "synthetic")
 a2 &lt;- all_geog_constraint_age(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_edu'>Create educational attainment constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_edu'></span>

<h3>Description</h3>

<p>Create a new educational attainment constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_edu(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_edu_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_edu_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 e1 &lt;- all_geog_constraint_edu(obj, "synthetic")
 e2 &lt;- all_geog_constraint_edu(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_employment'>Create employment status constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_employment'></span>

<h3>Description</h3>

<p>Create a new employment status constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_employment(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_employment_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_employment_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 e1 &lt;- all_geog_constraint_employment(obj, "synthetic")
 e2 &lt;- all_geog_constraint_employment(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_gender'>Create gender constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_gender'></span>

<h3>Description</h3>

<p>Create a new gender constraint list to the mapping between a a set of macro datasets and a 
matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_gender(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_gender_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_gender_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 g1 &lt;- all_geog_constraint_gender(obj, "synthetic")
 g2 &lt;- all_geog_constraint_gender(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_geog_mob'>Create geographic mobility constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_geog_mob'></span>

<h3>Description</h3>

<p>Create a new geographic mobility constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_geog_mob(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_geog_mob_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_geog_mob_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 gm1 &lt;- all_geog_constraint_geog_mob(obj, "synthetic")
 gm2 &lt;- all_geog_constraint_geog_mob(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_income'>Create individual income constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_income'></span>

<h3>Description</h3>

<p>Create a new individual income constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_income(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_income_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_income_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 i1 &lt;- all_geog_constraint_income(obj, "synthetic")
 i2 &lt;- all_geog_constraint_income(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_marital_status'>Create marital status constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_marital_status'></span>

<h3>Description</h3>

<p>Create a new marital status constraint list to the mapping between a a set of macro 
datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_marital_status(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_marital_status_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_marital_status_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 m1 &lt;- all_geog_constraint_marital_status(obj, "synthetic")
 m2 &lt;- all_geog_constraint_marital_status(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_nativity'>Create nativity status constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_nativity'></span>

<h3>Description</h3>

<p>Create a new nativity status constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_nativity(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_nativity_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_nativity_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 n1 &lt;- all_geog_constraint_nativity(obj, "synthetic")
 n2 &lt;- all_geog_constraint_nativity(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_poverty'>Create poverty status constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_poverty'></span>

<h3>Description</h3>

<p>Create a new poverty status constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_poverty(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_poverty_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_poverty_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 p1 &lt;- all_geog_constraint_poverty(obj, "synthetic")
 p2 &lt;- all_geog_constraint_poverty(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_constraint_race'>Create race constraint list to a set of geographies</h2><span id='topic+all_geog_constraint_race'></span>

<h3>Description</h3>

<p>Create a new race constraint list to the mapping between a a set 
of macro datasets and a matching set of micro dataset (supplied as class 'synthACS').
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_constraint_race(obj, method = c("synthetic", "macro.table"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_constraint_race_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"synthACS"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_constraint_race_+3A_method">method</code></td>
<td>
<p>One of <code>c("synthetic", "macro.table")</code>. Specifying <code>"synthetic"</code> indicates
that constraints are built by marginalizing the synthetic micro datasets. Specifying 
<code>"macro.table"</code> indicates that the constraints are build from the data in the base ACS tables.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that obj of class 'synthACS' already exists in your environment
 r1 &lt;- all_geog_constraint_race(obj, "synthetic")
 r2 &lt;- all_geog_constraint_race(obj, "macro_table")

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_optimize_microdata'>Optimize the selection of a micro data population for a set of geographies.</h2><span id='topic+all_geog_optimize_microdata'></span>

<h3>Description</h3>

<p>Optimize the candidate micro datasets such that the lowest loss against the 
macro dataset constraints are obtained. Loss is defined here as total absolute error (TAE)
and constraints are defined by the <code>constraint_list_list</code>. Optimization is done by
simulated annealing and geographies are run in parallel.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_optimize_microdata(
  macro_micro,
  prob_name = "p",
  constraint_list_list,
  p_accept = 0.4,
  max_iter = 10000L,
  seed = sample.int(10000L, size = 1, replace = FALSE),
  leave_cores = 1L,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_optimize_microdata_+3A_macro_micro">macro_micro</code></td>
<td>
<p>The geographical dataset of macro and micro data. Should be of class 
<code>"macro_micro"</code>.</p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_prob_name">prob_name</code></td>
<td>
<p>It is assumed that observations are weighted and do not have an equal probability
of occurance. This string specifies the variable within each dataset that contains the probability
of selection.</p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_constraint_list_list">constraint_list_list</code></td>
<td>
<p>A list of constraint lists. See <code><a href="#topic+add_constraint">add_constraint</a></code>, 
<code><a href="#topic+all_geogs_add_constraint">all_geogs_add_constraint</a></code></p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_p_accept">p_accept</code></td>
<td>
<p>The acceptance probability for the Metropolis acceptance criteria.</p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_max_iter">max_iter</code></td>
<td>
<p>The maximum number of allowable iterations. Defaults to <code>10000L</code></p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_seed">seed</code></td>
<td>
<p>A seed for reproducibility. See <code><a href="base.html#topic+set.seed">set.seed</a></code></p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_leave_cores">leave_cores</code></td>
<td>
<p>An <code>integer</code> for the number of cores you wish to leave open for other
processing.</p>
</td></tr>
<tr><td><code id="all_geog_optimize_microdata_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Do you wish to see verbose output? Defaults to <code>TRUE</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+optimize_microdata">optimize_microdata</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # assumes that micro_synthetic and cll already exist in your environment
 # see: examples for derive_synth_datasets() and all_geogs_add_constraint()
 optimized_la &lt;- all_geog_optimize_microdata(micro_synthetic, prob_name= "p", 
     constraint_list_list= cll, p_accept= 0.01, max_iter= 1000L)

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geog_synthetic_new_attribute'>Add a new attribute to a set (ie list) of synthetic_micro datasets</h2><span id='topic+all_geog_synthetic_new_attribute'></span>

<h3>Description</h3>

<p>Add a new attribute to a set (ie list) of synthetic_micro datasets using conditional 
relationships between the new attribute and existing attributes (eg. wage rate conditioned on age 
and education level). The same attribute is added to *each* synthetic_micro dataset, where each
dataset is supplied a distinct relationship for attribute creation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geog_synthetic_new_attribute(
  df_list,
  prob_name = "p",
  attr_name = "variable",
  conditional_vars = NULL,
  st_list = NULL,
  leave_cores = 1L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_df_list">df_list</code></td>
<td>
<p>A <code>list</code> of R objects each of class &quot;synthetic_micro&quot;.</p>
</td></tr>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_prob_name">prob_name</code></td>
<td>
<p>A string specifying the column name of each <code>data.frame</code> in <code>df_list</code> 
containing the probabilities for each synthetic observation.</p>
</td></tr>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_attr_name">attr_name</code></td>
<td>
<p>A string specifying the desired name of the new attribute to be added to the data.</p>
</td></tr>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_conditional_vars">conditional_vars</code></td>
<td>
<p>An character vector specifying the existing variables, if any, on which 
the new attribute (variable) is to be conditioned on for each dataset. Variables must be specified 
in order. Defaults to <code>NULL</code> ie- an unconditional new attribute.</p>
</td></tr>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_st_list">st_list</code></td>
<td>
<p>A <code>list</code> of equal length to <code>df_list</code>. Each element of <code>st_list</code> is 
a <code>data.frame</code> symbol table with N + 2 columns. The last two columns must be:
1. A vector containing the new attribute counts or percentages; 2. is a vector of the new attribute 
levels. The first N columns must match the conditioning scheme imposed by the variables in 
<code>conditional_vars</code>. See <code><a href="#topic+synthetic_new_attribute">synthetic_new_attribute</a></code> and examples.</p>
</td></tr>
<tr><td><code id="all_geog_synthetic_new_attribute_+3A_leave_cores">leave_cores</code></td>
<td>
<p>An <code>integer</code> for the number of cores you wish to leave open for other
processing.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of new synthetic_micro datasets each with class &quot;synthetic_micro&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+synthetic_new_attribute">synthetic_new_attribute</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 set.seed(567L)
 df &lt;- data.frame(gender= factor(sample(c("male", "female"), size= 100, replace= TRUE)),
                 age= factor(sample(1:5, size= 100, replace= TRUE)),
                 pov= factor(sample(c("lt_pov", "gt_eq_pov"),
                                    size= 100, replace= TRUE, prob= c(.15,.85))),
                 p= runif(100))
df$p &lt;- df$p / sum(df$p)
class(df) &lt;- c("data.frame", "micro_synthetic")

# and example test elements
cond_v &lt;- c("gender", "pov")
levels &lt;- c("employed", "unemp", "not_in_LF")
sym_tbl &lt;- data.frame(gender= rep(rep(c("male", "female"), each= 3), 2),
                      pov= rep(c("lt_pov", "gt_eq_pov"), each= 6),
                      cnts= c(52, 8, 268, 72, 12, 228, 1338, 93, 297, 921, 105, 554),
                      lvls= rep(levels, 4))



df_list &lt;- replicate(10, df, simplify= FALSE)
st_list &lt;- replicate(10, sym_tbl, simplify= FALSE)

# run
library(parallel)
syn &lt;- all_geog_synthetic_new_attribute(df_list, prob_name= "p", attr_name= "variable",
                                        conditional_vars= cond_v,st_list= st_list)

## End(Not run)
</code></pre>

<hr>
<h2 id='all_geogs_add_constraint'>Add new constraint to a set of geographies</h2><span id='topic+all_geogs_add_constraint'></span>

<h3>Description</h3>

<p>Add a new constraint to the mapping between a a set of macro datasets and a matching 
set of micro dataset (supplied as class 'macro_micro'). May be called repeatedly to create a 
set of constraints across the sub-geographies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_geogs_add_constraint(
  attr_name = "variable",
  attr_total_list,
  macro_micro,
  constraint_list_list = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="all_geogs_add_constraint_+3A_attr_name">attr_name</code></td>
<td>
<p>The name of the attribute, or variable, that you wish to constrain.</p>
</td></tr>
<tr><td><code id="all_geogs_add_constraint_+3A_attr_total_list">attr_total_list</code></td>
<td>
<p>A list of named integer vectors containing counts per level of the new 
constraining attribute for each geography.</p>
</td></tr>
<tr><td><code id="all_geogs_add_constraint_+3A_macro_micro">macro_micro</code></td>
<td>
<p>The geographical dataset of macro and micro data. Should be of class 
<code>"macro_micro"</code>.</p>
</td></tr>
<tr><td><code id="all_geogs_add_constraint_+3A_constraint_list_list">constraint_list_list</code></td>
<td>
<p>A <code>list</code> of lists containing prior constraints on the same dataset 
for which you wish to add to. Defaults to <code>NULL</code> (ie. the default is that this is the first 
constraint.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of constraint lists.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_constraint">add_constraint</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# assumes that micro_synthetic already exists in your environment

# 1. build constraints for gender and age
g &lt;- all_geog_constraint_gender(micro_synthetic, method= "macro.table")

a &lt;- all_geog_constraint_age(micro_synthetic, method= "macro.table")

# 2. bind constraints to geographies and macro-data
cll &lt;- all_geogs_add_constraint(attr_name= "age", attr_total_list= a, 
          macro_micro= micro_synthetic)
cll &lt;- all_geogs_add_constraint(attr_name= "gender", attr_total_list= g, 
          macro_micro= micro_synthetic, constraint_list_list= cll)


## End(Not run)
</code></pre>

<hr>
<h2 id='BR2014'>Birth Rates by Age and Race of Mother</h2><span id='topic+BR2014'></span>

<h3>Description</h3>

<p>A dataset containing birth rate data in the United States by age and race of the 
mother. Data for all races is provided for 1970-2014 and for individual races from 1989-2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BR2014
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 1,750 observations and 4 variables.
</p>

<dl>
<dt>year</dt><dd><p>The year for which data was was recorded.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the mothers. One of <code>all</code> all races; <code>white</code> 
non-hispanic whites; <code>black_aa</code> black / African-American; <code>nat_amer</code> American Indian
or Native Alaskan; <code>asian_isl</code> Asian or Pacific Islander; <code>hisp_lat</code> Hispanic or Latin 
American.</p>
</dd>
<dt>age_group</dt><dd><p>The age group of the mother.</p>
</dd>
<dt>birth_rate</dt><dd><p>The birth rate. See Details.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>The birth rate is defined as births per 1,000 women in the specified group (age and race). 
</p>
</li>
<li><p>Populations are based on census counts enumerated as of April 1 of the census year and estimated
as of July 1 for non-census years.
</p>
</li>
<li><p>Beginning in 1997, birth rates for age group 45up by relating births to all women age 45 or
older to this group. Prior to 1997, only births to women age 45-49 were included. 
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/births.htm">https://www.cdc.gov/nchs/nvss/births.htm</a>
</p>


<h3>References</h3>

<p>Hamilton, Brady E., et al. &quot;Births: final data for 2014.&quot; National Vital Statistics 
Reports 64.12 (2015): 1-64.
</p>

<hr>
<h2 id='calculate_TAE'>Calculate the total absolute error (TAE) between sample data and constraints.</h2><span id='topic+calculate_TAE'></span>

<h3>Description</h3>

<p>Calculates the total absolute error (TAE) between sample micro data and constraining
totals from the matching macro data. Allows for updating of prior TAE instead of re-calculating
to improve speed in iterating. The updating feature is particularly helpful for optimizing
micro data fitting via simulated annealing (see <code><a href="#topic+optimize_microdata">optimize_microdata</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_TAE(
  sample_data,
  constraint_list,
  prior_sample_totals = NULL,
  dropped_obs_totals = NULL,
  new_obs = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_TAE_+3A_sample_data">sample_data</code></td>
<td>
<p>A <code>data.frame</code> with attributes matching <code>constraint_list</code>.</p>
</td></tr>
<tr><td><code id="calculate_TAE_+3A_constraint_list">constraint_list</code></td>
<td>
<p>A <code>list</code> of constraints. See <code><a href="#topic+add_constraint">add_constraint</a></code>.</p>
</td></tr>
<tr><td><code id="calculate_TAE_+3A_prior_sample_totals">prior_sample_totals</code></td>
<td>
<p>An optional <code>list</code> containing attribute counts of a prior sample 
corresponding to the constraint list. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="calculate_TAE_+3A_dropped_obs_totals">dropped_obs_totals</code></td>
<td>
<p>An optional <code>list</code> containing attribute counts from the dropped 
observations in a prior sample. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="calculate_TAE_+3A_new_obs">new_obs</code></td>
<td>
<p>An optional <code>data.frame</code> containing new observations with attributes matching 
those in <code>sample_data</code>, <code>constraint_list</code>, and <code>prior_sample_totals</code>. Defaults 
to <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## assumes that you have a micro_synthetic dataset named test_micro and attribute count
## named g respectively 
c_list &lt;- add_constraint(attr_name= "gender", attr_totals= g, micro_data= test_micro,
            constraint_list= c_list)
calculate_TAE(test_micro, c_list)

## End(Not run)
</code></pre>

<hr>
<h2 id='combine_smsm'>Combine separate SMSM optimizations</h2><span id='topic+combine_smsm'></span>

<h3>Description</h3>

<p>Combine objects of class &quot;smsm_set&quot; into a single object of class &quot;smsm_set&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine_smsm(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combine_smsm_+3A_...">...</code></td>
<td>
<p>A list of objects of class 'smsm_set'.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+split">split</a></code>, <code><a href="#topic+all_geog_optimize_microdata">all_geog_optimize_microdata</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 combined &lt;- combine_smsm(smsm1, smsm2, smsm3)

## End(Not run)
</code></pre>

<hr>
<h2 id='derive_synth_datasets'>Derive synthetic micro datasets for a given geography.</h2><span id='topic+derive_synth_datasets'></span>

<h3>Description</h3>

<p>Derive synthetic micro datasets for each sub-geography of a given set of geographic 
macro data constraining tabulations. See Details... By default, micro dataset generation is run 
in parallel with load balancing. Macro data is assumed to have been pulled from the US Census API 
via the <code>acs</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derive_synth_datasets(macro_data, parallel = TRUE, leave_cores = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derive_synth_datasets_+3A_macro_data">macro_data</code></td>
<td>
<p>A macro dataset list: the result of <code><a href="#topic+pull_synth_data">pull_synth_data</a></code>.</p>
</td></tr>
<tr><td><code id="derive_synth_datasets_+3A_parallel">parallel</code></td>
<td>
<p>Logical, defaults to <code>TRUE</code>. Do you wish to run the operation in
parallel?</p>
</td></tr>
<tr><td><code id="derive_synth_datasets_+3A_leave_cores">leave_cores</code></td>
<td>
<p>How many cores do you wish to leave open to other processing?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> of the input macro datasets produced by
<code><a href="#topic+pull_synth_data">pull_synth_data</a></code> and a <code>list</code> of synthetic micro datasets for each geographical 
subset within the specified macro geography.
</p>


<h3>Details</h3>

<p>In the absence of true micro level datasets for a given geographic area, synthetic datasets
can be used. This function uses conditional and marginal probability distributions (at the 
aggregate level) to generate synthetic micro population datasets, which are built one constraint 
at a time. Taking as input the macro level data (class <code>"macroACS"</code>), this function builds 
synthetic micro datasets for each lower level geographical area within the area of study.
</p>
<p>In simplest terms, the goal is to generate a joint probability distribution for an attribute 
vector; and, to create synthetic individuals from this distribution. However, note that information
for the full joint distribution is typically not available, so we construct it as a product of 
conditional and marginal probabilities. This is done one attribute at a time; where it is assumed 
that there is some sort of continuum of attribute dependence. That is, some attributes are more 
important (eg. gender, age) in 'determining' others (eg. educational attainment, marital status, 
etc). These more important attributes need to be assigned first, whereas less important attributes 
may be assigned later. Most of these distinctions are largely intuitive, but care must be taken 
in choosing the order of constructed attributes. 
</p>
<p>This function provides a synthetic population with the following characteristics as well as each 
synthetic individual's probability of inclusion. The included characteristics are: age, gender, 
marital status, educational attainment, employment status, nativity, poverty status, geographic 
mobility in the prior year, individual income, and race. Additional attributes which interest the 
user may be added in a similar manner via <code><a href="#topic+synthetic_new_attribute">synthetic_new_attribute</a></code>.
</p>
<p>**Note:** INDIVIDUAL, not HOUSEHOLD level, synthetic population datasets are created.
</p>


<h3>References</h3>

<p>Birkin, Mark, and M. Clarke. &quot;SYNTHESIS-a synthetic spatial information system 
for urban and regional analysis: methods and examples.&quot; Environment and planning A 
20.12 (1988): 1645-1671.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pull_synth_data">pull_synth_data</a></code>, <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# make geography
la_geo &lt;- acs::geo.make(state= "CA", county= "Los Angeles", tract= "*")
# pull data elements for creating synthetic data
la_dat &lt;- pull_synth_data(2014, 5, la_geo)
# derive synthetic data
la_synthetic &lt;- derive_synth_datasets(la_dat, leave_cores= 0)

## End(Not run)
</code></pre>

<hr>
<h2 id='fetch_data'>Get Aggregate Data Specified Geography</h2><span id='topic+fetch_data'></span>

<h3>Description</h3>

<p>Gets aggregate, macro, data, either estimate or standard error, for a specified geography
and specified dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetch_data(acs, geography, dataset = c("estimate", "st.err"), choice = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetch_data_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
<tr><td><code id="fetch_data_+3A_geography">geography</code></td>
<td>
<p>A character vector allowing string matching via <code><a href="base.html#topic+grep">grep</a></code> to 
a set of specified geographies. All values may be specified by <code>"*"</code>.</p>
</td></tr>
<tr><td><code id="fetch_data_+3A_dataset">dataset</code></td>
<td>
<p>Either <code>"estimate"</code> or <code>"st.err"</code>. Do you want data on estimated 
population counts or estimated standard errors?</p>
</td></tr>
<tr><td><code id="fetch_data_+3A_choice">choice</code></td>
<td>
<p>A character vector specifying the name of one of the datasets in <code>acs</code></p>
</td></tr>
</table>

<hr>
<h2 id='gen_attr_vectors'>Generate attribute vectors</h2><span id='topic+gen_attr_vectors'></span>

<h3>Description</h3>

<p>Generate a list of attribute vectors for new synthetic attribute creation from a 
&quot;macroACS&quot; object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gen_attr_vectors(acs, choice)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gen_attr_vectors_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
<tr><td><code id="gen_attr_vectors_+3A_choice">choice</code></td>
<td>
<p>A character vector specifying the name of one of the datasets in <code>acs</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+all_geog_synthetic_new_attribute">all_geog_synthetic_new_attribute</a></code>, <code><a href="#topic+synthetic_new_attribute">synthetic_new_attribute</a></code>
</p>

<hr>
<h2 id='get_best_fit'>Extract best fit for a specified geogrpahy from an 'smsm_set' object</h2><span id='topic+get_best_fit'></span>

<h3>Description</h3>

<p>Extract the best fit micro population (resulting from the simulated annealing 
algorithm) for a given geography.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_best_fit(obj, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_best_fit_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>'smsm_set'</code>, typically a result of call to 
<code><a href="#topic+all_geog_optimize_microdata">all_geog_optimize_microdata</a></code></p>
</td></tr>
<tr><td><code id="get_best_fit_+3A_geography">geography</code></td>
<td>
<p>A string allowing string matching via <code><a href="base.html#topic+grep">grep</a></code> to 
a specified geography.</p>
</td></tr>
</table>

<hr>
<h2 id='get_dataset_names'>Get dataset names from a &quot;macroACS&quot; object.</h2><span id='topic+get_dataset_names'></span>

<h3>Description</h3>

<p>Get the names of the datasets in a given &quot;macroACS&quot; object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataset_names(acs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dataset_names_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+fetch_data">fetch_data</a></code>
</p>

<hr>
<h2 id='get_endyear'>Get the endyear from a &quot;macroACS&quot; object.</h2><span id='topic+get_endyear'></span>

<h3>Description</h3>

<p>Get the data collection endyear from a &quot;macroACS&quot; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_endyear(acs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_endyear_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='get_final_tae'>Extract the final TAE for a specified geogrpahy from an 'smsm_set' object</h2><span id='topic+get_final_tae'></span>

<h3>Description</h3>

<p>Extract the final TAE (resulting from the simulated annealing 
algorithm) for a given geography.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_final_tae(obj, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_final_tae_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>'smsm_set'</code>, typically a result of call to 
<code><a href="#topic+all_geog_optimize_microdata">all_geog_optimize_microdata</a></code></p>
</td></tr>
<tr><td><code id="get_final_tae_+3A_geography">geography</code></td>
<td>
<p>A string allowing string matching via <code><a href="base.html#topic+grep">grep</a></code> to 
a specified geography.</p>
</td></tr>
</table>

<hr>
<h2 id='get_geography'>Get the geography title from a &quot;macroACS&quot; object.</h2><span id='topic+get_geography'></span>

<h3>Description</h3>

<p>Get the summary information of the geography selected from a &quot;macroACS&quot; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_geography(acs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_geography_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='get_span'>Get the span from a &quot;macroACS&quot; object.</h2><span id='topic+get_span'></span>

<h3>Description</h3>

<p>Get the data collection span from a &quot;macroACS&quot; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_span(acs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_span_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='is.macro_micro'>Check macro_micro class</h2><span id='topic+is.macro_micro'></span>

<h3>Description</h3>

<p>Function that checks if the target object is a <code>macro_micro</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.macro_micro(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.macro_micro_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if its argument has class &quot;macro_micro&quot; among its classes and
<code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is.macroACS'>Check macroACS class</h2><span id='topic+is.macroACS'></span>

<h3>Description</h3>

<p>Function that checks if the target object is a <code>macroACS</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.macroACS(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.macroACS_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if its argument has class &quot;macroACS&quot; among its classes and
<code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is.micro_synthetic'>Check micro_synthetic class</h2><span id='topic+is.micro_synthetic'></span>

<h3>Description</h3>

<p>Function that checks if the target object is a <code>micro_synthetic</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.micro_synthetic(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.micro_synthetic_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if its argument has class &quot;micro_synthetic&quot; among its classes and
<code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is.smsm_set'>Check smsm_set class</h2><span id='topic+is.smsm_set'></span>

<h3>Description</h3>

<p>Function that checks if the target object is a <code>smsm_set</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.smsm_set(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.smsm_set_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if its argument has class &quot;macroACS&quot; among its classes and
<code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='is.synthACS'>Check synthACS class</h2><span id='topic+is.synthACS'></span>

<h3>Description</h3>

<p>Function that checks if the target object is a <code>synthACS</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.synthACS(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.synthACS_+3A_x">x</code></td>
<td>
<p>any R object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if its argument has class &quot;synthACS&quot; among its classes and
<code>FALSE</code> otherwise.
</p>

<hr>
<h2 id='la_hospitals'>Hospitals in Los Angeles County, CA USA</h2><span id='topic+la_hospitals'></span>

<h3>Description</h3>

<p>An anonymized dataset containing the geographic information of hospitals in Los 
Angeles County California, USA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>la_hospitals
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 631 observations and 7 variables
</p>

<dl>
<dt>geo_long</dt><dd><p>The hospital's longitude.</p>
</dd>
<dt>geo_lat</dt><dd><p>The hospital's lattitude.</p>
</dd>
<dt>city</dt><dd><p>The hospital's postal city.</p>
</dd>
<dt>state_fips</dt><dd><p>The hospital's alpha FIPS code.</p>
</dd>
<dt>zip</dt><dd><p>The hospital's five digit postal ZIP code.</p>
</dd>
<dt>census_tract</dt><dd><p>The census tract in which the hospital is located.</p>
</dd>
<dt>county_name</dt><dd><p>The hospital's county &ndash; &quot;LOS ANGELES&quot;.</p>
</dd>
</dl>


<hr>
<h2 id='LifeExp'>Life expectancy at certain ages; United States, 2013</h2><span id='topic+LifeExp'></span>

<h3>Description</h3>

<p>A dataset containing life expectancy at certain ages by race, hispanic origin and sex 
for the United States, 2013.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>LifeExp
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 396 observations and 4 variables.
</p>

<dl>
<dt>age</dt><dd><p>The exact age, in years, at which life expectany is calculated.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the deceased One of <code>all</code> all races; <code>white</code> 
whites; <code>black</code> black / African-American; <code>hispanic</code> Hispanic; <code>non.hisp.white</code>
non Hispanic whites; <code>non.hispanic.black</code> non Hispanic blacks.</p>
</dd>
<dt>gender</dt><dd><p>The gender of the deceased. One of <code>c(both, male, female)</code></p>
</dd>
<dt>life_expectancy</dt><dd><p>The life expectancy for an individual at the exact age with the given 
race and gender.</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/deaths.htm">https://www.cdc.gov/nchs/nvss/deaths.htm</a>
</p>


<h3>References</h3>

<p>Xu, J. Q., S. L. Murphy, and K. D. Kochanek. &quot;Deaths: final data for 2013.&quot; National 
Vital Statistics Reports 64.2 (2015).
</p>

<hr>
<h2 id='marginalize_attr'>Marginalize synthetic attributes</h2><span id='topic+marginalize_attr'></span>

<h3>Description</h3>

<p>Marginalize, (ie- reduce in number), attributes of a synthetic dataset of class
'micro_synthetic' or a list of synthetic datasets of class 'synthACS'. This is done
by marginalizing the joint distribution based on a set of specified attributes (see Arguments below).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>marginalize_attr(obj, varlist, marginalize_out = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="marginalize_attr_+3A_obj">obj</code></td>
<td>
<p>An object of class <code>"micro_synthetic"</code>.</p>
</td></tr>
<tr><td><code id="marginalize_attr_+3A_varlist">varlist</code></td>
<td>
<p>A character vector of variable, or attribute, names in <code>obj</code>.</p>
</td></tr>
<tr><td><code id="marginalize_attr_+3A_marginalize_out">marginalize_out</code></td>
<td>
<p>Logical. Do you wish to *remove* the variables in <code>varlist</code> 
instead of keeping them? Defaults to <code>FALSE</code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>{
# dummy data setup
set.seed(567L)
df &lt;- data.frame(gender= factor(sample(c("male", "female"), size= 100, replace= TRUE)),
                 age= factor(sample(1:5, size= 100, replace= TRUE)),
                 pov= factor(sample(c("below poverty", "at above poverty"), 
                                   size= 100, replace= TRUE, prob= c(.15,.85))),
                 p= runif(100))
df$p &lt;- df$p / sum(df$p)
class(df) &lt;- c("data.frame", "micro_synthetic")

df2 &lt;- marginalize_attr(df, varlist= "gender")
df3 &lt;- marginalize_attr(df, varlist= c("gender", "age"))
df4 &lt;- marginalize_attr(df, varlist= c("gender", "age"), marginalize_out= TRUE)

df_list &lt;- replicate(10, df, simplify= FALSE)
dummy_list &lt;- replicate(10, list(NULL), simplify= FALSE)
df_list &lt;- mapply(function(a,b) {return(list(a, b))}, a= dummy_list, b= df_list, SIMPLIFY = FALSE)
class(df_list) &lt;- c("list", "synthACS")

# run the function
df_list2 &lt;- marginalize_attr(df_list, varlist= c("gender", "age"))
}
</code></pre>

<hr>
<h2 id='MBR'>Multiple Birth Rate data by year and race of mother</h2><span id='topic+MBR'></span>

<h3>Description</h3>

<p>A dataset containing multiple birth rate data by race of the mother. Data for all 
races is provided for 1980-2014 and for individual races from 1990-2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>MBR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 110 observations and 8 variables.
</p>

<dl>
<dt>year</dt><dd><p>The year for which data was was recorded.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the mothers. One of <code>all</code> all races; <code>white</code> 
non-hispanic whites; <code>black_aa</code> non Hispanic black / African-American; <code>hisp_lat</code> 
Hispanic.</p>
</dd>
<dt>births</dt><dd><p>Total births for the year and racial group in the United States.</p>
</dd>
<dt>twin_births</dt><dd><p>Total twin births for the year and racial group in the United States.</p>
</dd>
<dt>triplet_more_births</dt><dd><p>Total triplet or higher order births for the year and racial group in 
the United States.</p>
</dd>
<dt>MBRate</dt><dd><p>The number of live births in all multiple deliveries per 1,000 live births.</p>
</dd>
<dt>twinBR</dt><dd><p>The number of live births in all twin deliveries per 1,000 live births.</p>
</dd>
<dt>twinBR</dt><dd><p>The number of live births in all triplet or higher order deliveries per 100,000 
live births.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>Data for race cateogry <code>"all"</code> includes races other than white and black and origin 
not stated.
</p>
</li>
<li><p>Race and Hispanic origin are reported separately on birth certificates. Persons of Hispanic
origin may be of any race.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/births.htm">https://www.cdc.gov/nchs/nvss/births.htm</a>
</p>


<h3>References</h3>

<p>Hamilton, Brady E., et al. &quot;Births: final data for 2014.&quot; National Vital Statistics 
Reports 64.12 (2015): 1-64.
</p>

<hr>
<h2 id='optimize_microdata'>Optimize the selection of a micro data population.</h2><span id='topic+optimize_microdata'></span>

<h3>Description</h3>

<p>Optimize the candidate micro dataset such that the lowest loss against the 
macro dataset constraints is obtained. Loss is defined here as total absolute error (TAE)
and constraints are defined by the <code>constraint_list</code>. Optimization is done by
simulated annealing&ndash;see details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optimize_microdata(
  micro_data,
  prob_name = "p",
  constraint_list,
  tolerance = round(sum(constraint_list[[1]])/2000 * length(constraint_list), 0),
  resample_size = min(sum(constraint_list[[1]]), max(500,
    round(sum(constraint_list[[1]]) * 0.005, 0))),
  p_accept = 0.4,
  max_iter = 10000L,
  seed = sample.int(10000L, size = 1, replace = FALSE),
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimize_microdata_+3A_micro_data">micro_data</code></td>
<td>
<p>A <code>data.frame</code> of micro data observations.</p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_prob_name">prob_name</code></td>
<td>
<p>It is assumed that observations are weighted and do not have an equal probability
of occurance. This string specifies the variable within <code>micro_data</code> that contains the probability
of selection.</p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_constraint_list">constraint_list</code></td>
<td>
<p>A <code>list</code> of constraining macro data attributes. See <code><a href="#topic+add_constraint">add_constraint</a></code></p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_tolerance">tolerance</code></td>
<td>
<p>An integer giving the maximum acceptable loss (TAE), enabling early stopping.
Defaults to a misclassification rate of 1 individual per 1,000 per constraint.</p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_resample_size">resample_size</code></td>
<td>
<p>An integer controlling the rate of movement about the candidate space. 
Specifically, it specifies the number of observations to change between iterations. Defaults to 
<code>0.5%</code> the number of observations.</p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_p_accept">p_accept</code></td>
<td>
<p>The acceptance probability for the Metropolis acceptance criteria.</p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_max_iter">max_iter</code></td>
<td>
<p>The maximum number of allowable iterations. Defaults to <code>10000L</code></p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_seed">seed</code></td>
<td>
<p>A seed for reproducibility. See <code><a href="base.html#topic+set.seed">set.seed</a></code></p>
</td></tr>
<tr><td><code id="optimize_microdata_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Do you wish to see verbose output? Defaults to <code>TRUE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Spatial microsimulation involves the study of individual-level phenomena within a specified set of
geographies in which these individuals act. It involves the creation of synthetic data to model,
via simulation, these phenomena. As a first step to simulation, an appropriate micro-level 
(ie. individual) dataset must be generated. This function creates such appropriate micro-level
datasets given a set of candidate observations and macro-level constraints.
</p>
<p>Optimization is done via simulated annealing, where we wish to minimize the total absolute error
(TAE) between the micro-data and the macro-constraints. The annealing procedure is controlled by 
the parameters <code>tolerance</code>, <code>resample_size</code>, <code>p_accept</code>, and 
<code>max_iter</code>. Specifically, <code>tolerance</code> indicates the maximum allowable TAE between the
output micro-data and the macro-constraints within a given <code>max_iter</code> allowable iterations 
to converge. <code>resample_size</code> and <code>p_accept</code> control movement about the candidate space. 
Specfically, <code>resample_size</code> controls the jump size between neighboring 
candidates and <code>p_accept</code> controls the hill-climbing rate for exiting local minima.
</p>
<p>Please see the references for a more detailed discussion of the simulated annealing procedure.
</p>


<h3>References</h3>

<p>Ingber, Lester. &quot;Very fast simulated re-annealing.&quot; Mathematical and computer 
modelling 12.8 (1989): 967-973.
</p>
<p>Metropolis, Nicholas, et al. &quot;Equation of state calculations by fast computing 
machines.&quot; The journal of chemical physics 21.6 (1953): 1087-1092.
</p>
<p>Szu, Harold, and Ralph Hartley. &quot;Fast simulated annealing.&quot; Physics letters A 122.3 
(1987): 157-162.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## assumes you have micro_synthetic object named test_micro and constraint_list named c_list
opt_data &lt;- optimize_microdata(test_micro, "p", c_list, max_iter= 10, resample_size= 500, 
              p_accept= 0.01, verbose= FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_TAEpath'>Plot simulated annealing path</h2><span id='topic+plot_TAEpath'></span>

<h3>Description</h3>

<p>Plot the path TAE in the simulated annealing algorithm for a given geography
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_TAEpath(object, geography, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_TAEpath_+3A_object">object</code></td>
<td>
<p>An object of class <code>'smsm_set'</code>, typically a result of call to 
<code><a href="#topic+all_geog_optimize_microdata">all_geog_optimize_microdata</a></code></p>
</td></tr>
<tr><td><code id="plot_TAEpath_+3A_geography">geography</code></td>
<td>
<p>A string allowing string matching via <code><a href="base.html#topic+grep">grep</a></code> to 
a specified geography.</p>
</td></tr>
<tr><td><code id="plot_TAEpath_+3A_...">...</code></td>
<td>
<p>additional arguments passed to other methods</p>
</td></tr>
</table>

<hr>
<h2 id='pull_acs_basetables'>Pull ACS base tables</h2><span id='topic+pull_acs_basetables'></span>

<h3>Description</h3>

<p>A wrapper function to pull multiple base tables from ACS API via 
<code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_acs_basetables(endyear, span, geography, table_vec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_acs_basetables_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_acs_basetables_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_acs_basetables_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
<tr><td><code id="pull_acs_basetables_+3A_table_vec">table_vec</code></td>
<td>
<p>A <code>character</code> vector specifying ACS base tables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>'macroACS'</code> class object
</p>


<h3>References</h3>

<p><a href="https://data.census.gov/cedsci/">https://data.census.gov/cedsci/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# make geography
la_geo &lt;- acs::geo.make(state= "CA", county= "Los Angeles")
# pull data 
la_dat &lt;- pull_acs_basetables(endyear= 2015, span= 1, geography= la_geo, 
  table_vec= c("B01001", "B01002", "B01003"))

## End(Not run)
</code></pre>

<hr>
<h2 id='pull_bachelors'>Pull ACS data on field of bachelor's degree</h2><span id='topic+pull_bachelors'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B15011 and B15012. Note: only 2014 data is supplied by ACS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_bachelors(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_bachelors_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_bachelors_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_bachelors_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, and a <code>data.frame</code> of the geography 
metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_edu'>Pull ACS educational attainment and enrollment data</h2><span id='topic+pull_edu'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B14001, B14003, B15001, B15002. Not currently implemented: B15010, B28006
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_edu(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_edu_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_edu_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_edu_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_geo_mobility'>Pull ACS geographic mobility data</h2><span id='topic+pull_geo_mobility'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B07001, B07003, B07008, B07009, B07010, and B07012.
These tables provide data on geographic mobility in the past year by a number of slices.
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_geo_mobility(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_geo_mobility_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_geo_mobility_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_geo_mobility_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_household'>Pull ACS data on households and housing units</h2><span id='topic+pull_household'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B09019, B11011, B19081, B25002, B25003, B25004, B25010, B25024,
B25056, B25058, B25071, and B27001.
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_household(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_household_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_household_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_household_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
B28001 - TYPES OF COMPUTERS IN HOUSEHOLD
B28002 - PRESENCE AND TYPES OF INTERNET SUBSCRIPTIONS IN HOUSEHOLD
</p>

<hr>
<h2 id='pull_inc_earnings'>Pull ACS income and earnings data</h2><span id='topic+pull_inc_earnings'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B19083, B19301, B19326, B21001, B22001, B23020, B24011. Not yet 
implemented: B28004
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_inc_earnings(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_inc_earnings_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_inc_earnings_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_inc_earnings_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_mar_status'>Pull ACS marital status data</h2><span id='topic+pull_mar_status'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B12001, B12006, B12007, 12501
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_mar_status(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_mar_status_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_mar_status_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_mar_status_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_population'>Pull ACS population data</h2><span id='topic+pull_population'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B01001, B01002, B02001, B06007, B06008, B06009, B06010, B06011, AND B06012.
These tables reference population counts by a number of slices.
Multiple additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_population(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_population_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_population_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_population_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_pov_inc'>Pull ACS income and earnings data</h2><span id='topic+pull_pov_inc'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B17001, B17004, B18101, B19001, B19013, B19055, B19057. Not yet 
implemented: B17002
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_pov_inc(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_pov_inc_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_pov_inc_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_pov_inc_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_race_data'>Pull ACS race data</h2><span id='topic+pull_race_data'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B01001B-I and B02001. ' These tables reference population counts by race.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_race_data(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_race_data_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_race_data_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_race_data_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, and a <code>data.frame</code> of the geography 
metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='pull_synth_data'>Pull ACS data for synthetic data creation.</h2><span id='topic+pull_synth_data'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B01001, B02001, B12002, B15001, B06001, B06010, B23001, B17005, and B17005.
These tables reference population counts by a number of slices.
Multiple additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_synth_data(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_synth_data_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_synth_data_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_synth_data_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a list of <code>data.frame</code>s of estimates,
a list of <code>data.frame</code>s of standard errors, 
and the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# make geography
la_geo &lt;- acs::geo.make(state= "CA", county= "Los Angeles", tract= "*")
# pull data elements for creating synthetic data
la_dat &lt;- pull_synth_data(2014, 5, la_geo)

## End(Not run)
</code></pre>

<hr>
<h2 id='pull_transit_work'>Pull ACS transit and work data</h2><span id='topic+pull_transit_work'></span>

<h3>Description</h3>

<p>Pull ACS data for a specified geography from base tables
B08012, B08101, B08121, B08103, B08124, B08016, B08017.
Additional fields, mainly percentages and aggregations, are calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pull_transit_work(endyear, span, geography)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pull_transit_work_+3A_endyear">endyear</code></td>
<td>
<p>An integer, indicating the latest year of the data in the survey.</p>
</td></tr>
<tr><td><code id="pull_transit_work_+3A_span">span</code></td>
<td>
<p>An integer in <code>c(1,3,5)</code> indicating the span of the desired data.</p>
</td></tr>
<tr><td><code id="pull_transit_work_+3A_geography">geography</code></td>
<td>
<p>a valid <code>geo.set</code> object specifying the census geography or 
geographies to be fetched.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing the endyear, span, a <code>data.frame</code> of estimates,
a <code>data.frame</code> of standard errors, a character vector of the original column names,
and a <code>data.frame</code> of the geography metadata from <code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="acs.html#topic+acs.fetch">acs.fetch</a></code>, <code><a href="acs.html#topic+geo.make">geo.make</a></code>
</p>

<hr>
<h2 id='rawDR'>Raw Death Rate by race and gender</h2><span id='topic+rawDR'></span>

<h3>Description</h3>

<p>A dataset containing raw death rate data by race and gender of the deceased. Data  
is provided for 1980-2013.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rawDR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 612 observations and 4 variables.
</p>

<dl>
<dt>year</dt><dd><p>The year for which data was was recorded.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the deceased One of <code>all</code> all races; <code>white</code> 
whites; <code>black_aa</code> black / African-American; <code>nat_amer</code> American Indian
or Native Alaskan; <code>asian_isl</code> Asian or Pacific Islander; <code>hisp_lat</code> Hispanic.</p>
</dd>
<dt>gender</dt><dd><p>The gender of the deceased. One of <code>c(both, male, female)</code></p>
</dd>
<dt>death_rate</dt><dd><p>The raw death rate. See details.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>The death rate is defined as deaths per 100,000 population. 
</p>
</li>
<li><p>Populations are based on census counts enumerated as of April 1 of the census year and estimated
as of July 1 for non-census years.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/deaths.htm">https://www.cdc.gov/nchs/nvss/deaths.htm</a>
</p>


<h3>References</h3>

<p>Xu, J. Q., S. L. Murphy, and K. D. Kochanek. &quot;Deaths: final data for 2013.&quot; National 
Vital Statistics Reports 64.2 (2015).
</p>

<hr>
<h2 id='split'>Split a &quot;macroACS&quot; object</h2><span id='topic+split'></span>

<h3>Description</h3>

<p>Split a &quot;macroACS&quot; object into subsets. This may be helpful for users who have
limited memory available on their machines before proceding to derive sample synthetic micro data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split(acs, n_splits)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="split_+3A_acs">acs</code></td>
<td>
<p>An object of class <code>"macroACS"</code>.</p>
</td></tr>
<tr><td><code id="split_+3A_n_splits">n_splits</code></td>
<td>
<p>An integer for the number of splits you wish to create.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+derive_synth_datasets">derive_synth_datasets</a></code>
</p>

<hr>
<h2 id='stateFR'>Birth rates, by age of mother: United States, each state and territory, 2014</h2><span id='topic+stateFR'></span>

<h3>Description</h3>

<p>A dataset containing birth rate data by US state and age for all 
US states and territories in 2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stateFR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 612 observations and 3 variables.
</p>

<dl>
<dt>state</dt><dd><p>The state or territory for which data was was recorded.</p>
</dd>
<dt>age_group</dt><dd><p>The age group of the mother.</p>
</dd>
<dt>birth_rate</dt><dd><p>The birth rate. See Details.</p>
</dd>
</dl>



<h3>Details</h3>


<ul>
<li><p>The birth rate is defined as births per 1,000 women in the specified group.
</p>
</li>
<li><p>Birth rates for <code>age_group</code> 45_49 are computed by relating births to women aged 45 and 
over to women aged 45-49
</p>
</li>
<li><p>Data for the &quot;United States&quot; as a whole excludes data for the territories.
</p>
</li>
<li><p>Data is missing (eg. <code>NA</code>) when data does not meet standards of reliability or percision; 
birth rates based on fewer than 20 births.
</p>
</li></ul>



<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/births.htm">https://www.cdc.gov/nchs/nvss/births.htm</a>
</p>


<h3>References</h3>

<p>Hamilton, Brady E., et al. &quot;Births: final data for 2014.&quot; National Vital Statistics 
Reports 64.12 (2015): 1-64.
</p>

<hr>
<h2 id='summary.smsm_set'>Summarizing SMSM fits</h2><span id='topic+summary.smsm_set'></span>

<h3>Description</h3>

<p><code>summary</code> method for class 'smsm_set'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'smsm_set'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.smsm_set_+3A_object">object</code></td>
<td>
<p>An object of class <code>'smsm_set'</code>, typically a result of call to 
<code><a href="#topic+all_geog_optimize_microdata">all_geog_optimize_microdata</a></code></p>
</td></tr>
<tr><td><code id="summary.smsm_set_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>

<hr>
<h2 id='synthetic_new_attribute'>Add a new attribute to a synthetic_micro dataset</h2><span id='topic+synthetic_new_attribute'></span>

<h3>Description</h3>

<p>Add a new attribute to a synthetic_micro dataset using conditional relationships
between the new attribute and existing attributes (eg. wage rate conditioned on age and education 
level).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>synthetic_new_attribute(
  df,
  prob_name = "p",
  attr_name = "variable",
  conditional_vars = NULL,
  sym_tbl = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="synthetic_new_attribute_+3A_df">df</code></td>
<td>
<p>An R object of class &quot;synthetic_micro&quot;.</p>
</td></tr>
<tr><td><code id="synthetic_new_attribute_+3A_prob_name">prob_name</code></td>
<td>
<p>A string specifying the column name of the <code>df</code> containing the
probabilities for each synthetic observation.</p>
</td></tr>
<tr><td><code id="synthetic_new_attribute_+3A_attr_name">attr_name</code></td>
<td>
<p>A string specifying the desired name of the new attribute to be added to the data.</p>
</td></tr>
<tr><td><code id="synthetic_new_attribute_+3A_conditional_vars">conditional_vars</code></td>
<td>
<p>An character vector specifying the existing variables, if any, on which 
the new attribute (variable) is to be conditioned on. Variables must be specified in order. 
Defaults to <code>NULL</code> ie- an unconditional new attribute.</p>
</td></tr>
<tr><td><code id="synthetic_new_attribute_+3A_sym_tbl">sym_tbl</code></td>
<td>
<p>sym_tbl A <code>data.frame</code> symbol table with N + 2 columns. The last two columns must be:
1. A vector containing the new attribute counts or percentages; 2. is a vector of the new attribute 
levels. The first N columns must match the conditioning scheme imposed by the variables in 
<code>conditional_vars</code>. See details and examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new synthetic_micro dataset with class &quot;synthetic_micro&quot;.
</p>


<h3>Details</h3>

<p>New synthetic variables are introduced to the existing data via conditional probability. Similar 
to <code><a href="#topic+derive_synth_datasets">derive_synth_datasets</a></code>, the goal with this function is to generate a joint 
probability distribution for an attribute vector; and, to create synthetic individuals from 
this distribution. Although no limit is placed on the number of variables on which to condition, 
in practice, data rarely exists which allows more than two or three conditioning variables. Other 
variables are assumed to be independent from the new attribute. 
</p>
<p>** There are four different types of conditional/marginal probability models which may be considered
for a given new attribute:
(1) Independence: it is assumed that each of the variables is independent of the others
(2) Pairwise conditional independence: it is assumed that attributes are related to 
only one other attribute and independent of all others.
(3) Conditional independence: Attributes can be depedent on some subset of other attributes and 
independent of the rest.
(4) In the most general case, all attributes are jointly interrelated.
</p>
<p>Conditioning is implemented via symbol-tables (<code>sym_tbl</code>) to ensure accurate matching between
conditioning variables, new attribute levels, and new attribute probabilities. The symbol table
is constructed such that the key in the symbol-table's key-value pair is the specific values for 
the set of conditioning variables. This key is the first N columns of <code>sym_tbl</code>.  A 
recursive approach is employed to conditionally partition <code>sym_tbl</code>. In this sense, the 
*order* in which the conditional variables are supplied matters.
</p>
<p>The value is final 2 columns of <code>sym_tbl</code> which are a pair of (A) either counts or percentages 
used to specify the probability for the new attribute and (B) the level that the new attribute takes on.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>{
set.seed(567L)
df &lt;- data.frame(gender= factor(sample(c("male", "female"), size= 100, replace= TRUE)),
                edu= factor(sample(c("LT_college", "BA_degree"), size= 100, replace= TRUE)),
                p= runif(100))
df$p &lt;- df$p / sum(df$p)
class(df) &lt;- c("data.frame", "micro_synthetic")
ST &lt;- data.frame(gender= c(rep("male", 3), rep("female", 3)),
                 attr_pct= c(0.1, 0.8, 0.1, 0.05, 0.7, 0.25),
                 levels= rep(c("low", "middle", "high"), 2))
df2 &lt;- synthetic_new_attribute(df, prob_name= "p", attr_name= "SES", conditional_vars= "gender",
         sym_tbl= ST)

ST2 &lt;- data.frame(gender= c(rep("male", 3), rep("female", 6)),
                  edu= c(rep(NA, 3), rep(c("LT_college", "BA_degree"), each= 3)),
                  attr_pct= c(0.1, 0.8, 0.1, 10, 80, 10, 5, 70, 25),
                  levels= rep(c("low", "middle", "high"), 3))
df2 &lt;- synthetic_new_attribute(df, prob_name= "p", attr_name= "SES",
         conditional_vars= c("gender", "edu"),
         sym_tbl= ST2)
}
</code></pre>

<hr>
<h2 id='TFR'>Total Fertility Rate by race of mother</h2><span id='topic+TFR'></span>

<h3>Description</h3>

<p>A dataset containing total fertility rate data by race of the mother. Data for all 
races is provided for 1970-2014 and for individual races from 1989-2014.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TFR
</code></pre>


<h3>Format</h3>

<p>A <code>data.frame</code> with 175 observations and 3 variables.
</p>

<dl>
<dt>year</dt><dd><p>The year for which data was was recorded.</p>
</dd>
<dt>race</dt><dd><p>The racial group of the mothers. One of <code>all</code> all races; <code>white</code> 
non-hispanic whites; <code>black_aa</code> black / African-American; <code>nat_amer</code> American Indian
or Native Alaskan; <code>asian_isl</code> Asian or Pacific Islander; <code>hisp_lat</code> Hispanic or Latin 
American.</p>
</dd>
<dt>tfr</dt><dd><p>The Total Fertility Rate. See Details</p>
</dd> 
</dl>



<h3>Details</h3>

<p>The Total Fertility Rate is defined as the sums of the birth rates for the 5-year age groups
found in <code><a href="#topic+BR2014">BR2014</a></code> multiplied by 5.
</p>


<h3>Source</h3>

<p><a href="https://www.cdc.gov/nchs/nvss/births.htm">https://www.cdc.gov/nchs/nvss/births.htm</a>
</p>


<h3>References</h3>

<p>Hamilton, Brady E., et al. &quot;Births: final data for 2014.&quot; National Vital Statistics 
Reports 64.12 (2015): 1-64.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
