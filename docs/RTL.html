<!DOCTYPE html><html lang="en"><head><title>Help for package RTL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RTL}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RTL-package'><p>RTL: Risk Tool Library - Trading, Risk, Analytics for Commodities</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#barrierSpreadOption'><p>Barrier Spread Option Pricing</p></a></li>
<li><a href='#bond'><p>Bond pricing</p></a></li>
<li><a href='#chart_eia_sd'><p>EIA weekly supply-demand information by product group</p></a></li>
<li><a href='#chart_eia_steo'><p>EIA Short Term Energy Outlook</p></a></li>
<li><a href='#chart_fwd_curves'><p>Plots historical forward curves</p></a></li>
<li><a href='#chart_pairs'><p>Pairwise scatter plots for timeseries</p></a></li>
<li><a href='#chart_PerfSummary'><p>Cumulative performance and drawdown summary.</p></a></li>
<li><a href='#chart_spreads'><p>Futures contract spreads comparison across years</p></a></li>
<li><a href='#chart_zscore'><p>Z-Score applied to seasonal data divergence</p></a></li>
<li><a href='#cma'><p>metadata for WTI CMA</p></a></li>
<li><a href='#CRReuro'><p>Cox-Ross-Rubinstein binomial option model</p></a></li>
<li><a href='#CRROption'><p>Cox-Ross-Rubinstein Option Pricing Model</p></a></li>
<li><a href='#crudeOil'><p>dataset: crude assays</p></a></li>
<li><a href='#cushing'><p>dataset: WTI Cushing Futures and storage utilization</p></a></li>
<li><a href='#dflong'><p>dataset: commodity prices in a long dataframe format</p></a></li>
<li><a href='#dfwide'><p>dataset: commodity prices in a wide dataframe format</p></a></li>
<li><a href='#efficientFrontier'><p>Markowitz Efficient Frontier</p></a></li>
<li><a href='#eia2tidy'><p>EIA API call with tidy output</p></a></li>
<li><a href='#eia2tidy_all'><p>EIA API multiple calls with tidy output</p></a></li>
<li><a href='#eiaStocks'><p>dataset: EIA weekly stocks</p></a></li>
<li><a href='#eiaStorageCap'><p>dataset: EIA working storage capacity</p></a></li>
<li><a href='#eurodollar'><p>dataset: Eurodollar futures contracts</p></a></li>
<li><a href='#expiry_table'><p>dataset: expiry of common commodity futures contract.</p></a></li>
<li><a href='#fitOU'><p>Fits a Ornstein–Uhlenbeck process to a dataset</p></a></li>
<li><a href='#fizdiffs'><p>dataset: randomised physical crude differentials</p></a></li>
<li><a href='#futuresRef'><p>dataset: futures contracts metadata</p></a></li>
<li><a href='#fxfwd'><p>dataset: USDCAD FX forward rates</p></a></li>
<li><a href='#garch'><p>Wrapper for a Garch(1,1) returning either a plot or data.</p></a></li>
<li><a href='#GBSOption'><p>Generalized Black-Scholes (GBS) Option Pricing Model</p></a></li>
<li><a href='#getBoC'><p>Bank of Canada Valet API</p></a></li>
<li><a href='#getCurve'><p>Morningstar Commodities API forward curves</p></a></li>
<li><a href='#getGenscapePipeOil'><p>Genscape API call for oil pipelines</p></a></li>
<li><a href='#getGenscapeStorageOil'><p>Genscape API call for oil storage</p></a></li>
<li><a href='#getGIS'><p>Extract and convert GIS data from a URL</p></a></li>
<li><a href='#getPrice'><p>Morningstar Commodities API single call</p></a></li>
<li><a href='#getPrices'><p>Morningstar Commodities API multiple calls</p></a></li>
<li><a href='#holidaysOil'><p>dataset: NYMEX and ICE holiday calendars</p></a></li>
<li><a href='#npv'><p>NPV</p></a></li>
<li><a href='#ohlc'><p>dataset: randomiser to convert settlement into OHLC</p></a></li>
<li><a href='#planets'><p>dataset: IR compounding</p></a></li>
<li><a href='#promptBeta'><p>Computes betas of futures contracts with respect to the 1st line contract</p></a></li>
<li><a href='#refineryLP'><p>LP model for refinery optimization</p></a></li>
<li><a href='#refineryLPdata'><p>dataset: refinery LP model sample inputs and outputs</p></a></li>
<li><a href='#returns'><p>Compute absolute, relative or log returns.</p></a></li>
<li><a href='#rolladjust'><p>Adjusts daily returns for futures contracts roll</p></a></li>
<li><a href='#simGBM'><p>GBM process simulation</p></a></li>
<li><a href='#simMultivariates'><p>Multivariate normal from historical dataset</p></a></li>
<li><a href='#simOU'><p>OU process simulation</p></a></li>
<li><a href='#simOUJ'><p>OUJ process simulation</p></a></li>
<li><a href='#simOUt'><p>OU process simulation</p></a></li>
<li><a href='#spot2futConvergence'><p>dataset: spot to futures convergence</p></a></li>
<li><a href='#spot2futCurve'><p>dataset: spot to futures convergence curve</p></a></li>
<li><a href='#spreadOption'><p>Kirk's Approximation for Spread Option Pricing</p></a></li>
<li><a href='#steo'><p>dataset: EIA Short Term Energy Outlook</p></a></li>
<li><a href='#stocks'><p>dataset: Yahoo Finance data sets</p></a></li>
<li><a href='#swapCOM'><p>Commodity Calendar Month Average Swaps</p></a></li>
<li><a href='#swapFutWeight'><p>Commodity Calendar Month Average Swap futures weights</p></a></li>
<li><a href='#swapInfo'><p>Commodity Swap details to learn their pricing</p></a></li>
<li><a href='#swapIRS'><p>Interest Rate Swap</p></a></li>
<li><a href='#tickers_eia'><p>datasest: metadata of key EIA tickers grouped by products.</p></a></li>
<li><a href='#tradeCycle'><p>dataset: Canadian and US physical crude trading calendars</p></a></li>
<li><a href='#tradeHubs'><p>dataset: GIS locations for crude oil trading hubs</p></a></li>
<li><a href='#tradeprocess'><p>dataset: data for teaching the various ways to monetize a market call.</p></a></li>
<li><a href='#tradeStats'><p>Risk-reward statistics for quant trading</p></a></li>
<li><a href='#tradeStrategyDY'><p>Sample quantitative trading strategy</p></a></li>
<li><a href='#tradeStrategySMA'><p>Sample quantitative trading strategy</p></a></li>
<li><a href='#tsQuotes'><p>dataset: interest rate curve data for RQuantlib .</p></a></li>
<li><a href='#usSwapCurves'><p>dataset: US bootstrapped interest rate curve.</p></a></li>
<li><a href='#usSwapCurvesPar'><p>dataset: US bootstrapped interest rate curve parallel sample.</p></a></li>
<li><a href='#wtiSwap'><p>dataset: WTI Calendar Month Average Swap pricing data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Risk Tool Library - Trading, Risk, Analytics for Commodities</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.7</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-02-25</td>
</tr>
<tr>
<td>Description:</td>
<td>A toolkit for Commodities 'analytics', risk management and
    trading professionals. Includes functions for API calls to
    <a href="https://commodities.morningstar.com/#/">https://commodities.morningstar.com/#/</a>, <a href="https://developer.genscape.com/">https://developer.genscape.com/</a>,
    and <a href="https://www.bankofcanada.ca/valet/docs">https://www.bankofcanada.ca/valet/docs</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/risktoollib/RTL">https://github.com/risktoollib/RTL</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, httr, jsonlite, lubridate, magrittr, plotly,
purrr, readr, rlang, stringr, tibble, tidyr, timetk, tsibble,
xts, zoo, glue, Rcpp, lifecycle, TTR, tidyselect,
PerformanceAnalytics, numDeriv</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), covr, lpSolve, rugarch, tidyquant,
feasts, fabletools, MASS, sf</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/risktoollib/RTL/issues">https://github.com/risktoollib/RTL/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-26 01:15:02 UTC; phil</td>
</tr>
<tr>
<td>Author:</td>
<td>Philippe Cote [aut, cre],
  Nima Safaian [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Philippe Cote &lt;pcote@ualberta.ca&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-26 03:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='RTL-package'>RTL: Risk Tool Library - Trading, Risk, Analytics for Commodities</h2><span id='topic+RTL'></span><span id='topic+RTL-package'></span>

<h3>Description</h3>

<p>A toolkit for Commodities 'analytics', risk management and trading professionals. Includes functions for API calls to <a href="https://commodities.morningstar.com/#/">https://commodities.morningstar.com/#/</a>, <a href="https://developer.genscape.com/">https://developer.genscape.com/</a>, and <a href="https://www.bankofcanada.ca/valet/docs">https://www.bankofcanada.ca/valet/docs</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Philippe Cote <a href="mailto:pcote@ualberta.ca">pcote@ualberta.ca</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Nima Safaian <a href="mailto:nima.safaian@gmail.com">nima.safaian@gmail.com</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/risktoollib/RTL">https://github.com/risktoollib/RTL</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/risktoollib/RTL/issues">https://github.com/risktoollib/RTL/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code style="white-space: pre;">&#8288;magrittr::[\%&gt;\%][magrittr::pipe]&#8288;</code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Value</h3>

<p>Internal for use of pipe operator. No return value.
</p>

<hr>
<h2 id='barrierSpreadOption'>Barrier Spread Option Pricing</h2><span id='topic+barrierSpreadOption'></span>

<h3>Description</h3>

<p>This model applies Kirk's (1995) closed-form approximation for pricing spread options,
incorporating barrier adjustments for continuous and terminal monitoring.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>barrierSpreadOption(
  F1 = -12,
  F2 = -3,
  X = 5.5,
  B = 9,
  sigma1 = 0.6,
  sigma2 = 0.6,
  rho = 0.3,
  T2M = 1/12,
  r = 0.045,
  type = "call",
  barrier_type = "uo",
  monitoring = "continuous"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="barrierSpreadOption_+3A_f1">F1</code></td>
<td>
<p>numeric, forward price of the first asset (e.g., pipeline origination price as a futures)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_f2">F2</code></td>
<td>
<p>numeric, forward price of the second asset (e.g., pipeline destination price as a futures)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_x">X</code></td>
<td>
<p>numeric, strike price of the spread option</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_b">B</code></td>
<td>
<p>numeric, barrier level for the spread (F2 - F1)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_sigma1">sigma1</code></td>
<td>
<p>numeric, volatility of the first asset (annualized)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_sigma2">sigma2</code></td>
<td>
<p>numeric, volatility of the second asset (annualized)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_rho">rho</code></td>
<td>
<p>numeric, correlation coefficient between the two assets</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_t2m">T2M</code></td>
<td>
<p>numeric, time to maturity in years</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_r">r</code></td>
<td>
<p>numeric, risk-free interest rate (annualized)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_type">type</code></td>
<td>
<p>character, &quot;call&quot; or &quot;put&quot;</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_barrier_type">barrier_type</code></td>
<td>
<p>character, &quot;do&quot; or &quot;uo&quot; (down-and-out, up-and-out)</p>
</td></tr>
<tr><td><code id="barrierSpreadOption_+3A_monitoring">monitoring</code></td>
<td>
<p>character, &quot;continuous&quot; or &quot;terminal&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing option price and Greeks.
</p>

<hr>
<h2 id='bond'>Bond pricing</h2><span id='topic+bond'></span>

<h3>Description</h3>

<p>Compute bond price, cash flow table or duration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bond(ytm = 0.05, C = 0.05, T2M = 1, m = 2, output = "price")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bond_+3A_ytm">ytm</code></td>
<td>
<p>Yield to Maturity. <code>numeric</code></p>
</td></tr>
<tr><td><code id="bond_+3A_c">C</code></td>
<td>
<p>Coupon rate per annum. <code>numeric</code></p>
</td></tr>
<tr><td><code id="bond_+3A_t2m">T2M</code></td>
<td>
<p>Time to maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="bond_+3A_m">m</code></td>
<td>
<p>Periods per year for coupon payments e.g semi-annual = 2. <code>numeric</code></p>
</td></tr>
<tr><td><code id="bond_+3A_output">output</code></td>
<td>
<p>&quot;price&quot;, &quot;df&quot; or &quot;duration&quot;. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns price <code>numeric</code>, cash flows <code>tibble</code>, or duration <code>numeric</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bond(ytm = 0.05, C = 0.05, T2M = 1, m = 2, output = "price")
bond(ytm = 0.05, C = 0.05, T2M = 1, m = 2, output = "df")
bond(ytm = 0.05, C = 0.05, T2M = 1, m = 2, output = "duration")
</code></pre>

<hr>
<h2 id='chart_eia_sd'>EIA weekly supply-demand information by product group</h2><span id='topic+chart_eia_sd'></span>

<h3>Description</h3>

<p>Given a product group extracts all information to create SD Balances.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_eia_sd(
  market = "mogas",
  key = "your EIA.gov API key",
  from = "2011-01-01",
  legend.pos = list(x = 0.4, y = 0.53),
  output = "chart"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_eia_sd_+3A_market">market</code></td>
<td>
<p>&quot;mogas&quot;, &quot;dist&quot;, &quot;jet&quot; or &quot;resid&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_sd_+3A_key">key</code></td>
<td>
<p>Your private EIA API token. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_sd_+3A_from">from</code></td>
<td>
<p>Date as character &quot;2020-07-01&quot;. Default to all dates available. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_sd_+3A_legend.pos">legend.pos</code></td>
<td>
<p>Defaults to list(x = 0.4, y = 0.53). <code>list</code></p>
</td></tr>
<tr><td><code id="chart_eia_sd_+3A_output">output</code></td>
<td>
<p>&quot;chart&quot; for plotly object or &quot;data&quot; for dataframe.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotly chart <code>htmlwidget</code> or a <code>tibble</code>.
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chart_eia_sd(key = key, market = "mogas")

## End(Not run)

</code></pre>

<hr>
<h2 id='chart_eia_steo'>EIA Short Term Energy Outlook</h2><span id='topic+chart_eia_steo'></span>

<h3>Description</h3>

<p>Extract data and either plots or renders dataframe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_eia_steo(
  market = "globalOil",
  key = "your EIA.gov API key",
  from = "2018-07-01",
  fig.title = "EIA STEO Global Liquids SD Balance",
  fig.units = "million barrels per day",
  legend.pos = list(x = 0.4, y = 0.53),
  output = "chart"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_eia_steo_+3A_market">market</code></td>
<td>
<p>&quot;globalOil&quot; only currently implemented. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_key">key</code></td>
<td>
<p>Your private EIA API token. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_from">from</code></td>
<td>
<p>Date as character &quot;2020-07-01&quot;. Default to all dates available. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_fig.title">fig.title</code></td>
<td>
<p>Defaults to &quot;EIA STEO Global Liquids SD Balance&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_fig.units">fig.units</code></td>
<td>
<p>Defaults to &quot;million barrels per day&quot; <code>character</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_legend.pos">legend.pos</code></td>
<td>
<p>Defaults to list(x = 0.4, y = 0.53)  <code>list</code></p>
</td></tr>
<tr><td><code id="chart_eia_steo_+3A_output">output</code></td>
<td>
<p>&quot;chart&quot; for plotly object or &quot;data&quot; for dataframe.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotly chart <code>htmlwidget</code> or a <code>tibble</code>.
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chart_eia_steo(key = EIAkey, market = "globalOil")

## End(Not run)

</code></pre>

<hr>
<h2 id='chart_fwd_curves'>Plots historical forward curves</h2><span id='topic+chart_fwd_curves'></span>

<h3>Description</h3>

<p>Returns a plot of forward curves through time
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_fwd_curves(df = dfwide, cmdty = "cmewti", weekly = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_fwd_curves_+3A_df">df</code></td>
<td>
<p>Wide dataframe with date column and multiple series columns (multivariate). <code>tibble</code></p>
</td></tr>
<tr><td><code id="chart_fwd_curves_+3A_cmdty">cmdty</code></td>
<td>
<p>Futures contract code in expiry_table object: unique(expiry_table$cmdty). <code>character</code></p>
</td></tr>
<tr><td><code id="chart_fwd_curves_+3A_weekly">weekly</code></td>
<td>
<p>Defaults to TRUE for weekly forward curves. <code>logical</code></p>
</td></tr>
<tr><td><code id="chart_fwd_curves_+3A_...">...</code></td>
<td>
<p>other graphical parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>plot of forward curves through time. <code>NULL</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- dfwide %&gt;%
  dplyr::select(date, dplyr::starts_with("CL")) %&gt;%
  tidyr::drop_na()
chart_fwd_curves(
  df = df, cmdty = "cmewti", weekly = TRUE,
  main = "WTI Forward Curves", ylab = "$ per bbl", xlab = "", cex = 2
)
</code></pre>

<hr>
<h2 id='chart_pairs'>Pairwise scatter plots for timeseries</h2><span id='topic+chart_pairs'></span>

<h3>Description</h3>

<p>Plots pairwise scatter plots with the time dimension.
Useful when exploring structural changes in timeseries properties for modeling.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_pairs(df = df, title = "Time Series Pairs Plot")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_pairs_+3A_df">df</code></td>
<td>
<p>Wide data frame. <code>tibble</code></p>
</td></tr>
<tr><td><code id="chart_pairs_+3A_title">title</code></td>
<td>
<p>Chart title. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotly object. <code>htmlwidget</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- dfwide %&gt;%
  dplyr::select(date, CL01, NG01, HO01, RB01) %&gt;%
  tidyr::drop_na()
chart_pairs(df = df, title = "example")
</code></pre>

<hr>
<h2 id='chart_PerfSummary'>Cumulative performance and drawdown summary.</h2><span id='topic+chart_PerfSummary'></span>

<h3>Description</h3>

<p>Multi Asset Display of Cumulative Performance and Drawdowns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_PerfSummary(
  ret = ret,
  geometric = TRUE,
  main = "Cumulative Returns and Drawdowns",
  linesize = 1.25
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_PerfSummary_+3A_ret">ret</code></td>
<td>
<p>Wide dataframe univariate or multivariate of percentage returns. <code>tibble</code></p>
</td></tr>
<tr><td><code id="chart_PerfSummary_+3A_geometric">geometric</code></td>
<td>
<p>Use geometric returns TRUE or FALSE. <code>logical</code></p>
</td></tr>
<tr><td><code id="chart_PerfSummary_+3A_main">main</code></td>
<td>
<p>Chart title. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_PerfSummary_+3A_linesize">linesize</code></td>
<td>
<p>Size of lines in chart and legend. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Cumulative performance and drawdown charts. <code>ggplot</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ret &lt;- data.frame(
  date = seq.Date(Sys.Date() - 60, Sys.Date(), 1),
  CL01 = rnorm(61, 0, .01), RB01 = rnorm(61, 0, 0.02)
)
chart_PerfSummary(ret = ret,
geometric = TRUE,
main = "Cumulative Returns and Drawdowns",
linesize = 1.25)
</code></pre>

<hr>
<h2 id='chart_spreads'>Futures contract spreads comparison across years</h2><span id='topic+chart_spreads'></span>

<h3>Description</h3>

<p>Plots specific contract pairs across years with time being days from expiry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_spreads(
  cpairs = cpairs,
  daysFromExpiry = 200,
  from = "2012-01-01",
  conversion = c(1, 1),
  feed = "CME_NymexFutures_EOD",
  iuser = "x@xyz.com",
  ipassword = "pass",
  title = "March/April ULSD Nymex Spreads",
  yaxis = "$ per bbl",
  output = "chart"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_spreads_+3A_cpairs">cpairs</code></td>
<td>
<p>Tibble of contract pairs - see example for expiry when not expired yet. <code>tibble</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_daysfromexpiry">daysFromExpiry</code></td>
<td>
<p>Number of days from expiry to compute spreads. <code>numeric</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_from">from</code></td>
<td>
<p>From date <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_conversion">conversion</code></td>
<td>
<p>Defaults to c(1,1) first and second contracts. 42 from $ per gallons to bbls. <code>numeric</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_feed">feed</code></td>
<td>
<p>Morningstar Feed Table. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_iuser">iuser</code></td>
<td>
<p>Morningstar user name as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_ipassword">ipassword</code></td>
<td>
<p>Morningstar user password as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_title">title</code></td>
<td>
<p>Title for chart. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_yaxis">yaxis</code></td>
<td>
<p>y-axis label. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_spreads_+3A_output">output</code></td>
<td>
<p>&quot;chart&quot; for <code>htmlwidget</code> or &quot;data&quot; for <code>tibble</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plotly object or a dataframe
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cpairs &lt;- dplyr::tibble(
 year = c("2018", "2019", "2020","2021","2022","2023"),
 first = c("@HO8H", "@HO9H", "@HO0H","@HO21H","@HO22H","@HO23H"),
 second = c("@CL8H", "@CL9H", "@CL0H","@CL21H","@CL22H","@CL23H"),
 expiry = c(NA,NA,NA,NA,NA,"2023-02-23")
)
chart_spreads(
  cpairs = cpairs, daysFromExpiry = 200, from = "2012-01-01",
  conversion = c(42, 1), feed = "CME_NymexFutures_EOD",
  iuser = "x@xyz.com", ipassword = "pass",
  title = "March/April ULSD Nymex Spreads",
  yaxis = "$ per bbl",
  output = "data"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='chart_zscore'>Z-Score applied to seasonal data divergence</h2><span id='topic+chart_zscore'></span>

<h3>Description</h3>

<p>Supports analytics and display of seasonal data. Z-Score is
computed on residuals conditional on their seasonal period.
Beware that most seasonal charts in industry e.g. (NG Storage)
is not de-trended so results once you apply an STL decomposition
will vary from the unajusted seasonal plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chart_zscore(
  df = df,
  title = "NG Storage Z Score",
  per = "yearweek",
  output = "zscore",
  chart = "seasons"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chart_zscore_+3A_df">df</code></td>
<td>
<p>Long data frame with columns series, date and value. <code>tibble</code></p>
</td></tr>
<tr><td><code id="chart_zscore_+3A_title">title</code></td>
<td>
<p>Default is a blank space returning the unique value in df$series. <code>character</code></p>
</td></tr>
<tr><td><code id="chart_zscore_+3A_per">per</code></td>
<td>
<p>Frequency of seasonality &quot;yearweek&quot; (DEFAULT). &quot;yearmonth&quot;, &quot;yearquarter&quot; <code>character</code></p>
</td></tr>
<tr><td><code id="chart_zscore_+3A_output">output</code></td>
<td>
<p>&quot;stl&quot; for STL decomposition chart,
&quot;stats&quot; for STL fitted statistics.
&quot;res&quot; for STL fitted data.
&quot;zscore&quot; for residuals Z-score,
&quot;seasonal&quot; for standard seasonal chart.</p>
</td></tr>
<tr><td><code id="chart_zscore_+3A_chart">chart</code></td>
<td>
<p>&quot;seasons&quot; for feasts::gg_season() (DEFAULT)
&quot;series&quot; for feasts::gg_subseries()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Time series of STL decomposition residuals Z-Scores, or
standard seasonal chart with feast package.
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
df &lt;- eiaStocks %&gt;% dplyr::filter(series == "NGLower48")
title &lt;- "NGLower48"
chart_zscore(df = df, title = " ", per = "yearweek", output = "stl", chart = "seasons")
chart_zscore(df = df, title = " ", per = "yearweek", output = "stats", chart = "seasons")
chart_zscore(df = df, title = " ", per = "yearweek", output = "res", chart = "seasons")
chart_zscore(df = df, title = " ", per = "yearweek", output = "zscore", chart = "seasons")
chart_zscore(df = df, title = " ", per = "yearweek", output = "seasonal", chart = "seasons")

## End(Not run)
</code></pre>

<hr>
<h2 id='cma'>metadata for WTI CMA</h2><span id='topic+cma'></span>

<h3>Description</h3>

<p>CME WTI Calendar Month Average swap information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cma
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>cme
</p>

<hr>
<h2 id='CRReuro'>Cox-Ross-Rubinstein binomial option model</h2><span id='topic+CRReuro'></span>

<h3>Description</h3>

<p>European option binomial model on a stock without dividends.For academic purpose only.
Use RTL::CRRoption for real-life usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CRReuro(S, X, sigma, r, T2M, N, type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CRReuro_+3A_s">S</code></td>
<td>
<p>Stock price. <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_x">X</code></td>
<td>
<p>Strike price. <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_sigma">sigma</code></td>
<td>
<p>Implied volatility e.g. 0.20 <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_r">r</code></td>
<td>
<p>Risk-free rate. <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_t2m">T2M</code></td>
<td>
<p>Time to maturity in years <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_n">N</code></td>
<td>
<p>Number of time steps. Internally dt = T2M/N. <code>numeric</code></p>
</td></tr>
<tr><td><code id="CRReuro_+3A_type">type</code></td>
<td>
<p>&quot;call&quot; or &quot;put&quot; <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of asset price tree, option value tree and option price. <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>CRReuro(S = 100, X = 100, sigma = 0.2, r = 0.1, T2M = 1, N = 5, type = "call")
</code></pre>

<hr>
<h2 id='CRROption'>Cox-Ross-Rubinstein Option Pricing Model</h2><span id='topic+CRROption'></span>

<h3>Description</h3>

<p>Computes the price of European and American options using the Cox-Ross-Rubinstein binomial model.
This function is optimized for performance and implemented in C++. Haug (2007) provides a detailed description of the model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CRROption(S, X, sigma, r, b, T2M, N, type, optionStyle)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CRROption_+3A_s">S</code></td>
<td>
<p>Numeric, the current stock price (also known as the underlying asset price).</p>
</td></tr>
<tr><td><code id="CRROption_+3A_x">X</code></td>
<td>
<p>Numeric, the strike price of the option.</p>
</td></tr>
<tr><td><code id="CRROption_+3A_sigma">sigma</code></td>
<td>
<p>Numeric, the implied volatility of the underlying stock (annualized).</p>
</td></tr>
<tr><td><code id="CRROption_+3A_r">r</code></td>
<td>
<p>Numeric, the risk-free interest rate (annualized).</p>
</td></tr>
<tr><td><code id="CRROption_+3A_b">b</code></td>
<td>
<p>Numeric, the cost of carry, b = r - q for dividend paying assets, where q is the dividend yield rate.</p>
</td></tr>
<tr><td><code id="CRROption_+3A_t2m">T2M</code></td>
<td>
<p>Numeric, the time to maturity of the option (in years).</p>
</td></tr>
<tr><td><code id="CRROption_+3A_n">N</code></td>
<td>
<p>Integer, the number of time steps in the binomial tree.</p>
</td></tr>
<tr><td><code id="CRROption_+3A_type">type</code></td>
<td>
<p>Character, the type of option (&quot;call&quot; or &quot;put&quot;).</p>
</td></tr>
<tr><td><code id="CRROption_+3A_optionstyle">optionStyle</code></td>
<td>
<p>Character, the style of the option (&quot;european&quot; or &quot;american&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the computed price of the option and a note indicating if the model is suitable for the provided parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># CRROption(S = 100, X = 100, sigma = 0.25, r = 0.1, b = 0, T2M = 1, N = 500,
# type = "call", optionStyle = "european")
# CRROption(S = 100, X = 100, sigma = 0.25, r = 0.1, b = 0, T2M = 1, N = 500,
# type = "call", optionStyle = "american")

</code></pre>

<hr>
<h2 id='crudeOil'>dataset: crude assays</h2><span id='topic+crudeOil'></span>

<h3>Description</h3>

<p>crude assays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crudeOil
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Value</h3>

<p><code>list</code>
</p>

<hr>
<h2 id='cushing'>dataset: WTI Cushing Futures and storage utilization</h2><span id='topic+cushing'></span>

<h3>Description</h3>

<p>c1, c2, c1c2 and Cushing storage utilization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cushing
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Value</h3>

<p><code>list</code>
</p>


<h3>Source</h3>

<p>CME and EIA
</p>

<hr>
<h2 id='dflong'>dataset: commodity prices in a long dataframe format</h2><span id='topic+dflong'></span>

<h3>Description</h3>

<p>Futures settlement data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dflong
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar Commodities
</p>

<hr>
<h2 id='dfwide'>dataset: commodity prices in a wide dataframe format</h2><span id='topic+dfwide'></span>

<h3>Description</h3>

<p>Futures settlement data set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dfwide
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar Commodities
</p>

<hr>
<h2 id='efficientFrontier'>Markowitz Efficient Frontier</h2><span id='topic+efficientFrontier'></span>

<h3>Description</h3>

<p>Generates random portfolio weights statistics based on absolute returns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>efficientFrontier(
  nsims = 5000,
  x = RTL::fizdiffs %&gt;% dplyr::select(date, dplyr::contains("WCS")),
  expectedReturns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="efficientFrontier_+3A_nsims">nsims</code></td>
<td>
<p>Number of portfolio simulations. Defaults to 5000 <code>numeric</code></p>
</td></tr>
<tr><td><code id="efficientFrontier_+3A_x">x</code></td>
<td>
<p>List as provided by output of RTL::simMultivariates(). <code>list</code></p>
</td></tr>
<tr><td><code id="efficientFrontier_+3A_expectedreturns">expectedReturns</code></td>
<td>
<p>Defaults to NULL using periodic returns means. <code>numeric</code></p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Commodities</h4>

<p>Unlike traditional portfolio management, in commodities many transactions are
with derivatives (futures and swaps) and have zero or low initial investments.
</p>



<h4>Return types</h4>

<p>This function is used for commodities where returns are dollars per units
for real assets e.g. storage tanks, pipelines...Here we measure directly
the periodic return in dollars per contract unit.
</p>



<h4>Empirical Finance</h4>

<p>I would encourage you to pick a commodity futures contract of your choice and draw
a scatter plot of price level versus the daily dollar per unit change as measure
of risk. As a trading analyst or risk manager, then ask yourself about the
implications of using log returns that you then re-apply to current forward
curve level to arrive at a dollar risk measure per units instead of measuring
directly risk in dollars per unit.
</p>



<h3>Value</h3>

<p>List of portfolios and chart of efficient frontier <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x =  RTL::fizdiffs %&gt;% dplyr::select(date, dplyr::contains("WCS"))
efficientFrontier(nsims = 10, x = x, expectedReturns = NULL)
efficientFrontier(nsims = 10, x = x, expectedReturns = c(0.5,0.8,0.9))

## End(Not run)
</code></pre>

<hr>
<h2 id='eia2tidy'>EIA API call with tidy output</h2><span id='topic+eia2tidy'></span>

<h3>Description</h3>

<p>Extracts data from the Energy Information Administration (EIA) API to tibble format with optional custom series name.
Makes a clean wrapper for use with purrr for multiple series extraction. Query Browser at https://www.eia.gov/opendata/qb.php.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eia2tidy(ticker, key, name = " ")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eia2tidy_+3A_ticker">ticker</code></td>
<td>
<p>EIA series name. <code>character</code></p>
</td></tr>
<tr><td><code id="eia2tidy_+3A_key">key</code></td>
<td>
<p>Your private EIA API token as character &quot;yourapikey&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="eia2tidy_+3A_name">name</code></td>
<td>
<p>Name you want to give the series. Defaults to ticker if set to &quot; &quot; <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble object with class date for weekly, monthly, quarterly or annual data and class POSIXct for hourly. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Single Series
RTL::eia2tidy(ticker = "PET.MCRFPTX2.M", key = "yourapikey", name = "TexasProd")
# Multiple Series
# Use eia2tidy_all() or pivot_longer, drop_na and then pivot_wider to wrangled results.

## End(Not run)
</code></pre>

<hr>
<h2 id='eia2tidy_all'>EIA API multiple calls with tidy output</h2><span id='topic+eia2tidy_all'></span>

<h3>Description</h3>

<p>Extracts data from the Energy Information Administration (EIA) API to tibble format with optional custom series name.
Makes a clean wrapper for use with purrr for multiple series extraction. Query Browser at https://www.eia.gov/opendata/qb.php.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eia2tidy_all(
  tickers = tibble::tribble(~ticker, ~name, "PET.W_EPC0_SAX_YCUOK_MBBL.W",
    "CrudeCushing", "NG.NW2_EPG0_SWO_R48_BCF.W", "NGLower48"),
  key,
  long = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="eia2tidy_all_+3A_tickers">tickers</code></td>
<td>
<p>tribble of EIA series and names you want to assign. <code>character</code></p>
</td></tr>
<tr><td><code id="eia2tidy_all_+3A_key">key</code></td>
<td>
<p>Your private EIA API token as character &quot;yourapikey&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="eia2tidy_all_+3A_long">long</code></td>
<td>
<p>TRUE (default) to return a long data frame or FASLE for wide. <code>logical</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble object with class date for weekly, monthly, quarterly or annual data and class POSIXct for hourly. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
eia2tidy_all(tickers = tibble::tribble(~ticker, ~name,
                         "PET.W_EPC0_SAX_YCUOK_MBBL.W", "CrudeCushing",
                         "NG.NW2_EPG0_SWO_R48_BCF.W", "NGLower48"),
            key = "your API key", long = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='eiaStocks'>dataset: EIA weekly stocks</h2><span id='topic+eiaStocks'></span>

<h3>Description</h3>

<p>EIA weekly crude, NG, ULSD and RBOB stocks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eiaStocks
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='eiaStorageCap'>dataset: EIA working storage capacity</h2><span id='topic+eiaStorageCap'></span>

<h3>Description</h3>

<p>EIA working storage capacity in kbs except NG in bcf.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eiaStorageCap
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='eurodollar'>dataset: Eurodollar futures contracts</h2><span id='topic+eurodollar'></span>

<h3>Description</h3>

<p>ED futures contract for December 2024
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eurodollar
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar
</p>

<hr>
<h2 id='expiry_table'>dataset: expiry of common commodity futures contract.</h2><span id='topic+expiry_table'></span>

<h3>Description</h3>

<p>This dataframe provides detailed information on major futures contracts specifications
pertaining to last settlement, notices and delivery dates. It also provides tickers in some data service.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expiry_table
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='fitOU'>Fits a Ornstein–Uhlenbeck process to a dataset</h2><span id='topic+fitOU'></span>

<h3>Description</h3>

<p>Parameter estimation for Ornstein–Uhlenbeck process using OLS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitOU(spread, dt = 1/252)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fitOU_+3A_spread">spread</code></td>
<td>
<p>Spread time series. <code>tibble</code></p>
</td></tr>
<tr><td><code id="fitOU_+3A_dt">dt</code></td>
<td>
<p>Time step size in fractions of a year. Default is 1/252.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of theta, mu, annualized sigma estimates. It returns half life consistent with periodicity <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>spread &lt;- simOU(nsims = 1, mu = 5, theta = .5, sigma = 0.2, T = 5, dt = 1 / 252)
fitOU(spread = spread$sim1)
</code></pre>

<hr>
<h2 id='fizdiffs'>dataset: randomised physical crude differentials</h2><span id='topic+fizdiffs'></span>

<h3>Description</h3>

<p>Randomized data set for education purpose of selected physical crude differentials to WTI.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fizdiffs
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='futuresRef'>dataset: futures contracts metadata</h2><span id='topic+futuresRef'></span>

<h3>Description</h3>

<p>Exchange-traded contract month codes and specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>futuresRef
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='fxfwd'>dataset: USDCAD FX forward rates</h2><span id='topic+fxfwd'></span>

<h3>Description</h3>

<p>USDCAD historicals and forward curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fxfwd
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Value</h3>

<p><code>list</code>
</p>


<h3>Source</h3>

<p>Morningstar and https://ca.investing.com/rates-bonds/forward-rates
</p>

<hr>
<h2 id='garch'>Wrapper for a Garch(1,1) returning either a plot or data.</h2><span id='topic+garch'></span>

<h3>Description</h3>

<p>Computes annualised Garch(1,1) volatilities using fGarch package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>garch(x = x, out = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="garch_+3A_x">x</code></td>
<td>
<p>Wide dataframe with date column and single series (univariate). <code>tibble</code></p>
</td></tr>
<tr><td><code id="garch_+3A_out">out</code></td>
<td>
<p>&quot;chart&quot; to return <code>replot_xts</code> chart, &quot;data&quot; to return <code>xts</code> data or &quot;fit&quot; for <code>uGARCHfit</code> fit output</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>replot_xts</code> chart, <code>xts</code> data, or <code>uGARCHfit</code> fit
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
x &lt;- dflong %&gt;% dplyr::filter(series == "CL01")
x &lt;- returns(df = x, retType = "rel", period.return = 1, spread = TRUE)
x &lt;- rolladjust(x = x, commodityname = c("cmewti"), rolltype = c("Last.Trade"))
summary(garch(x = x, out = "fit"))
garch(x = x, out = "chart")
garch(x = x, out = "data")

## End(Not run)
</code></pre>

<hr>
<h2 id='GBSOption'>Generalized Black-Scholes (GBS) Option Pricing Model</h2><span id='topic+GBSOption'></span>

<h3>Description</h3>

<p>Computes the price and Greeks of European call and put options using the
Generalized Black-Scholes model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GBSOption(S, X, T2M, r, b, sigma, type = "call")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GBSOption_+3A_s">S</code></td>
<td>
<p>numeric, the current stock price (also known as the underlying asset price).</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_x">X</code></td>
<td>
<p>numeric, the strike price of the option.</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_t2m">T2M</code></td>
<td>
<p>numeric, the time to maturity (in years). Previously denoted as T.</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_r">r</code></td>
<td>
<p>numeric, the risk-free interest rate (annualized).</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_b">b</code></td>
<td>
<p>numeric, the cost of carry, b = r - q for dividend paying assets,
where q is the dividend yield rate.</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_sigma">sigma</code></td>
<td>
<p>numeric, the volatility of the underlying asset (annualized).</p>
</td></tr>
<tr><td><code id="GBSOption_+3A_type">type</code></td>
<td>
<p>character, the type of option to evaluate, either &quot;call&quot; or &quot;put&quot;.
Default is &quot;call&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the following elements:
</p>

<ul>
<li> <p><code>price</code>: The price of the option.
</p>
</li>
<li> <p><code>delta</code>: The sensitivity of the option's price to a change in the
price of the underlying asset.
</p>
</li>
<li> <p><code>gamma</code>: The rate of change in the delta with respect to changes
in the underlying price.
</p>
</li>
<li> <p><code>vega</code>: The sensitivity of the option's price to the volatility of
the underlying asset.
</p>
</li>
<li> <p><code>theta</code>: The sensitivity of the option's price to the passage of time.
</p>
</li>
<li> <p><code>rho</code>: The sensitivity of the option's price to the interest rate.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>GBSOption(S = 100, X = 100, T2M = 1, r = 0.05, b = 0.02, sigma = 0.2, type = "call")

</code></pre>

<hr>
<h2 id='getBoC'>Bank of Canada Valet API</h2><span id='topic+getBoC'></span>

<h3>Description</h3>

<p>Extracts series from the Bank of Canada's Valet API.
API documentation at https://www.bankofcanada.ca/valet/docs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBoC(series)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBoC_+3A_series">series</code></td>
<td>
<p>Array of series name: c(&quot;FXCADUSD&quot;,&quot;BD.CDN.2YR.DQ.YLD&quot;). <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A long data frame. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>RTL::getBoC(series = c("FXCADUSD","BD.CDN.2YR.DQ.YLD"))
</code></pre>

<hr>
<h2 id='getCurve'>Morningstar Commodities API forward curves</h2><span id='topic+getCurve'></span>

<h3>Description</h3>

<p>Returns forward curves from Morningstar API. See below for current feeds supported.
You need your own credentials with Morningstar.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCurve(
  feed = "CME_NymexFutures_EOD_continuous",
  contract = "CL",
  numOfcontracts = 12,
  date = "2023-08-24",
  fields =
    c("open_price, high_price, low_price, settlement_price, volume, open_interest"),
  iuser = "x@xyz.com",
  ipassword = "pass"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getCurve_+3A_feed">feed</code></td>
<td>
<p>Morningstar Feed Table e.g &quot;Crb_Futures_Price_Volume_And_Open_Interest&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_contract">contract</code></td>
<td>
<p>Morningstar contract root e.g. &quot;CL&quot; for CME WTI and &quot;BG&quot; for ICE Brent. <code>character</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_numofcontracts">numOfcontracts</code></td>
<td>
<p>Number of listed contracts to retrieve. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_date">date</code></td>
<td>
<p>Date yyyy-mm-dd. <code>character</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_fields">fields</code></td>
<td>
<p>Defaults to c(&quot;open_price, high_price, low_price, settlement_price, volume, open_interest&quot;). <code>character</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_iuser">iuser</code></td>
<td>
<p>Morningstar user name as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="getCurve_+3A_ipassword">ipassword</code></td>
<td>
<p>Morningstar user password as character - sourced locally in examples. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>wide data frame. <code>tibble</code>
</p>


<h3>Current Feeds Supported</h3>


<ul>
<li><p> CME_NymexFutures_EOD_continuous
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# CME WTI Futures
getCurve(
  feed = "CME_NymexFutures_EOD_continuous", contract = "CL",
  date = "2023-08-24",
  fields = c("open_price, high_price, low_price, settlement_price, volume, open_interest"),
  iuser = "x@xyz.com", ipassword = "pass"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='getGenscapePipeOil'>Genscape API call for oil pipelines</h2><span id='topic+getGenscapePipeOil'></span>

<h3>Description</h3>

<p>Returns oil pipeline flows in barrels per day data from Genscape API.You need your own credentials.
Refer to API documentation for argument values. It is assumed if you use this function that
you know the pipelines you need to extract to build supply demand balances.
Use the online API to identify the pipeline IDs.
https://developer.genscape.com/docs/services/oil-transportation/operations/GetPipelineFlowValuesV2/
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGenscapePipeOil(
  frequency = "daily",
  regions = "Canada",
  pipelineIDs = c(97),
  revision = "revised",
  limit = 5000,
  offset = 0,
  startDate = "2015-01-01",
  endDate = as.character(Sys.Date()),
  apikey = "yourapikey"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getGenscapePipeOil_+3A_frequency">frequency</code></td>
<td>
<p>&quot;daily&quot; DEFAULT. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_regions">regions</code></td>
<td>
<p>See API webpage. Multiple values separated by commas e.g. &quot;Canada&quot;, &quot;GulfCoast&quot;). <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_pipelineids">pipelineIDs</code></td>
<td>
<p>See API webpage. c(98,54...) for specific pipes. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_revision">revision</code></td>
<td>
<p>See API webpage. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_limit">limit</code></td>
<td>
<p>See API webpage. Max 5000. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_offset">offset</code></td>
<td>
<p>See API webpage. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_startdate">startDate</code></td>
<td>
<p>&quot;yyyy-mm-dd&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_enddate">endDate</code></td>
<td>
<p>&quot;yyyy-mm-dd&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapePipeOil_+3A_apikey">apikey</code></td>
<td>
<p>Your API key. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>wide data frame. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getGenscapePipeOil(
  frequency = "daily", regions = "Canada", pipelineIDs = c(97),
  revision = "revised", limit = 5000, offset = 0,
  startDate = "2015-01-01", endDate = as.character(Sys.Date()),
  apikey = "yourapikey"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='getGenscapeStorageOil'>Genscape API call for oil storage</h2><span id='topic+getGenscapeStorageOil'></span>

<h3>Description</h3>

<p>Returns oil storage data from Genscape API.You need your own credentials.
Refer to API documentation for argument values.
https://developer.genscape.com/docs/services/oil-storage/operations/StorageVolumeByOwnerGet
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getGenscapeStorageOil(
  feed = "owner-volumes",
  regions = "Canada",
  products = "Crude",
  revision = "revised",
  limit = 5000,
  offset = 0,
  startDate = "2011-01-01",
  endDate = as.character(Sys.Date()),
  apikey = "yourapikey"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getGenscapeStorageOil_+3A_feed">feed</code></td>
<td>
<p>&quot;owner-volumes&quot; DEFAULT or &quot;tank-volumes&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_regions">regions</code></td>
<td>
<p>See API webpage. Multiple values separated by commas e.g. &quot;Canada, Cushing&quot;). <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_products">products</code></td>
<td>
<p>See API webpage. Multiple values separated by commas e.g. &quot;Crude, JetFuel&quot;). <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_revision">revision</code></td>
<td>
<p>See API webpage. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_limit">limit</code></td>
<td>
<p>See API webpage. Max 5000. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_offset">offset</code></td>
<td>
<p>See API webpage. <code>numeric</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_startdate">startDate</code></td>
<td>
<p>&quot;yyyy-mm-dd&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_enddate">endDate</code></td>
<td>
<p>&quot;yyyy-mm-dd&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="getGenscapeStorageOil_+3A_apikey">apikey</code></td>
<td>
<p>Your API key as a character string. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>wide data frame <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# where yourapikey = "yourapikey".
getGenscapeStorageOil(
  feed = "owner-volumes", regions = "Canada", products = "Crude",
  revision = "revised", limit = 5000, offset = 0,
  startDate = "2011-01-01", endDate = "2020-11-01", apikey = yourapikey
)

## End(Not run)

</code></pre>

<hr>
<h2 id='getGIS'>Extract and convert GIS data from a URL</h2><span id='topic+getGIS'></span>

<h3>Description</h3>

<p>Returns a SpatialPointsDataFrame from a shapefile URL.
@section Examples with EIA and Government of Alberta
</p>

<ul>
<li><p> from https://www.eia.gov/maps/layer_info-m.php :
</p>
</li>
<li><p> crudepipelines &lt;- getGIS(url = &quot;https://www.eia.gov/maps/map_data/CrudeOil_Pipelines_US_EIA.zip&quot;)
</p>
</li>
<li><p> refineries &lt;- getGIS(url = &quot;https://www.eia.gov/maps/map_data/Petroleum_Refineries_US_EIA.zip&quot;)
</p>
</li>
<li><p> from https://gis.energy.gov.ab.ca/Geoview/OSPNG
</p>
</li>
<li><p> AB &lt;- getGIS(url = &quot;https://gis.energy.gov.ab.ca/GeoviewData/OS_Agreements_Shape.zip&quot;)
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>getGIS(url = "https://www.eia.gov/maps/map_data/CrudeOil_Pipelines_US_EIA.zip")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getGIS_+3A_url">url</code></td>
<td>
<p>URL of the zipped shapefile. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>SpatialPointsDataFrame. <code>SpatialPolygonsDataFrame</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getGIS(url = "https://www.eia.gov/maps/map_data/CrudeOil_Pipelines_US_EIA.zip")

## End(Not run)

</code></pre>

<hr>
<h2 id='getPrice'>Morningstar Commodities API single call</h2><span id='topic+getPrice'></span>

<h3>Description</h3>

<p>Returns data from Morningstar API. See below for current feeds supported.
You need your own credentials with Morningstar. In examples sourced locally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPrice(
  feed = "CME_NymexFutures_EOD",
  contract = "@CL21Z",
  from = "2020-09-01",
  iuser = "x@xyz.com",
  ipassword = "pass"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPrice_+3A_feed">feed</code></td>
<td>
<p>Morningstar Feed Table. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrice_+3A_contract">contract</code></td>
<td>
<p>Morningstar key. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrice_+3A_from">from</code></td>
<td>
<p>From date yyyy-mm-dd. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrice_+3A_iuser">iuser</code></td>
<td>
<p>Morningstar user name as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrice_+3A_ipassword">ipassword</code></td>
<td>
<p>Morningstar user password as character - sourced locally in examples. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>wide data frame. <code>tibble</code>
</p>


<h3>Current Feeds Supported</h3>


<ul>
<li><p> CME_CbotFuturesEOD and CME_CbotFuturesEOD_continuous
</p>
</li>
<li><p> CME_NymexFutures_EOD, CME_NymexFuturesFinal_EOD andCME_NymexFutures_EOD_continuous
</p>
</li>
<li><p> CME_NymexOptionsFinal_EOD and CME_NymexOptions_EOD
</p>
</li>
<li><p> CME_CmeFutures_EOD and CME_CmeFutures_EOD_continuous
</p>
</li>
<li><p> CME_Comex_FuturesSettlement_EOD and CME_Comex_FuturesSettlement_EOD_continuous
</p>
</li>
<li><p> LME_AskBidPrices_Delayed
</p>
</li>
<li><p> SHFE_FuturesSettlement_RT
</p>
</li>
<li><p> ICE_EuroFutures and ICE_EuroFutures_continuous
</p>
</li>
<li><p> ICE_NybotCoffeeSugarCocoaFutures and ICE_NybotCoffeeSugarCocoaFutures_continuous
</p>
</li>
<li><p> CME_STLCPC_Futures
</p>
</li>
<li><p> CFTC_CommitmentsOfTradersCombined. Requires multiple keys. Separate them by a space e.g. &quot;N10 06765A NYME 01&quot;.
</p>
</li>
<li><p> Morningstar_FX_Forwards. Requires multiple keys. Separate them by a space e.g. &quot;USDCAD 2M&quot;.
</p>
</li>
<li><p> ERCOT_LmpsByResourceNodeAndElectricalBus.
</p>
</li>
<li><p> PJM_Rt_Hourly_Lmp.
</p>
</li>
<li><p> AESO_ForecastAndActualPoolPrice.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getPrice(
  feed = "CME_NymexFuturesFinal_EOD", contract = "CL 2024 07",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_NymexFutures_EOD", contract = "@CL21Z",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_NymexFutures_EOD_continuous", contract = "CL_006_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_NymexOptionsFinal_EOD", contract = "06 2024 P LO 8000",
  from = "2020-03-15", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_NymexOptions_EOD", contract = "@LO21ZP4000",
  from = "2020-03-15", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_CbotFuturesEOD", contract = "C0Z",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_CbotFuturesEOD_continuous", contract = "ZB_001_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_CmeFutures_EOD_continuous", contract = "HE_006_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "Morningstar_FX_Forwards", contract = "USDCAD 2M",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_CmeFutures_EOD", contract = "LH0N",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "CME_CmeFutures_EOD_continuous", contract = "HE_006_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "ICE_EuroFutures", contract = "BRN0Z",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "ICE_EuroFutures_continuous", contract = "BRN_001_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "ICE_NybotCoffeeSugarCocoaFutures", contract = "SB21H",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "ICE_NybotCoffeeSugarCocoaFutures_continuous", contract = "SF_001_Month",
  from = "2019-08-26", iuser = username, ipassword = password
)
getPrice(
  feed = "AESO_ForecastAndActualPoolPrice", contract = "Forecast_Pool_Price",
  from = "2021-04-01", iuser = username, ipassword = password
)
getPrice(
  feed = "LME_MonthlyDelayed_Derived", contract = "AHD 2021-12-01 2021-12-31",
  from = "2021-04-01", iuser = username, ipassword = password
)

## End(Not run)

</code></pre>

<hr>
<h2 id='getPrices'>Morningstar Commodities API multiple calls</h2><span id='topic+getPrices'></span>

<h3>Description</h3>

<p>Multiple Morningstar API calls using getPrice functions.
Refer to <code>getPrices()</code> for list of currently supported data feeds.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPrices(
  feed = "CME_NymexFutures_EOD",
  contracts = c("CL9Z", "CL0F", "CL0M"),
  from = "2019-01-01",
  iuser = "x@xyz.com",
  ipassword = "pass"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getPrices_+3A_feed">feed</code></td>
<td>
<p>Morningstar Feed Table. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrices_+3A_contracts">contracts</code></td>
<td>
<p>Symbols vector. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrices_+3A_from">from</code></td>
<td>
<p>From date yyyy-mm-dd. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrices_+3A_iuser">iuser</code></td>
<td>
<p>Morningstar user name as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="getPrices_+3A_ipassword">ipassword</code></td>
<td>
<p>Morningstar user password as character - sourced locally in examples. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>wide data frame. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
getPrices(
  feed = "CME_NymexFutures_EOD", contracts = c("@CL0Z", "@CL1F", "@CL21H", "@CL21Z"),
  from = "2020-01-01", iuser = username, ipassword = password
)

## End(Not run)

</code></pre>

<hr>
<h2 id='holidaysOil'>dataset: NYMEX and ICE holiday calendars</h2><span id='topic+holidaysOil'></span>

<h3>Description</h3>

<p>Holiday calendars for NYMEX and ICE Brent
</p>


<h3>Usage</h3>

<pre><code class='language-R'>holidaysOil
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='npv'>NPV</h2><span id='topic+npv'></span>

<h3>Description</h3>

<p>Computes NPV with discount factor interpolation.
This function is used for teaching NPV and NPV at Risk and needs to be customized.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>npv(
  init.cost = -375,
  C = 50,
  cf.freq = 0.25,
  TV = 250,
  T2M = 2,
  disc.factors = us.df,
  BreakEven = FALSE,
  BE.yield = 0.01
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="npv_+3A_init.cost">init.cost</code></td>
<td>
<p>Initial investment cost. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_c">C</code></td>
<td>
<p>Periodic cash flow. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_cf.freq">cf.freq</code></td>
<td>
<p>Cash flow frequency in year fraction e.g. quarterly = 0.25. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_tv">TV</code></td>
<td>
<p>Terminal Value. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_t2m">T2M</code></td>
<td>
<p>Time to Maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_disc.factors">disc.factors</code></td>
<td>
<p>Data frame of discount factors using ir.df.us() function. <code>numeric</code></p>
</td></tr>
<tr><td><code id="npv_+3A_breakeven">BreakEven</code></td>
<td>
<p>TRUE when using a flat discount rate assumption. <code>logical</code></p>
</td></tr>
<tr><td><code id="npv_+3A_be.yield">BE.yield</code></td>
<td>
<p>Set the flat IR rate when BreakEven = TRUE. <code>logical</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of NPV and NPV Data frame. <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>npv(
  init.cost = -375, C = 50, cf.freq = .5, TV = 250, T2M = 2,
  disc.factors = RTL::usSwapCurves, BreakEven = FALSE, BE.yield = .0399
)$npv
npv(
  init.cost = -375, C = 50, cf.freq = .5, TV = 250, T2M = 2,
  disc.factors = RTL::usSwapCurves, BreakEven = FALSE, BE.yield = .0399
)$df
</code></pre>

<hr>
<h2 id='ohlc'>dataset: randomiser to convert settlement into OHLC</h2><span id='topic+ohlc'></span>

<h3>Description</h3>

<p>OHLC profile using historical CL 1st Contract OHLC
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ohlc
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>CME
</p>

<hr>
<h2 id='planets'>dataset: IR compounding</h2><span id='topic+planets'></span>

<h3>Description</h3>

<p>Planet metrics from NASA
</p>


<h3>Usage</h3>

<pre><code class='language-R'>planets
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p><a href="https://nssdc.gsfc.nasa.gov/planetary/factsheet/index.html">https://nssdc.gsfc.nasa.gov/planetary/factsheet/index.html</a>
</p>

<hr>
<h2 id='promptBeta'>Computes betas of futures contracts with respect to the 1st line contract</h2><span id='topic+promptBeta'></span>

<h3>Description</h3>

<p>Returns betas of futures contracts versus front futures contract.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>promptBeta(x = x, period = "all", betatype = "all", output = "chart")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="promptBeta_+3A_x">x</code></td>
<td>
<p>Wide dataframe with date column and multiple series columns (multivariate). <code>tibble</code></p>
</td></tr>
<tr><td><code id="promptBeta_+3A_period">period</code></td>
<td>
<p>&quot;all&quot; or numeric period of time in last n periods as character eg &quot;100&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="promptBeta_+3A_betatype">betatype</code></td>
<td>
<p>&quot;all&quot; &quot;bull&quot; &quot;bear&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="promptBeta_+3A_output">output</code></td>
<td>
<p>&quot;betas&quot; or &quot;chart&quot;. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>betas data frame <code>tibble</code> or plotly chart of betas <code>htmlwidgets</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 x &lt;- dflong %&gt;%
 dplyr::filter(grepl("CL",series)) %&gt;%
 dplyr::mutate(series = readr::parse_number(series)) %&gt;% dplyr::group_by(series) %&gt;%
 RTL::returns(df = ., retType = "abs",period.return = 1,spread = TRUE) %&gt;%
 RTL::rolladjust(x = .,commodityname = c("cmewti"),rolltype = c("Last.Trade")) %&gt;%
 # removing the day it prices went negative...
 dplyr::filter(!date %in% c(as.Date("2020-04-20"),as.Date("2020-04-21")))
promptBeta(x = x, period = "all", betatype = "all", output = "chart")
promptBeta(x = x, period = "all", betatype = "bull", output = "betas")
promptBeta(x = x, period = "100", betatype = "bear", output = "betas")

## End(Not run)
</code></pre>

<hr>
<h2 id='refineryLP'>LP model for refinery optimization</h2><span id='topic+refineryLP'></span>

<h3>Description</h3>

<p>Plain vanilla refinery optimization LP model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refineryLP(
  crudes = RTL::refineryLPdata$inputs,
  products = RTL::refineryLPdata$outputs
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="refineryLP_+3A_crudes">crudes</code></td>
<td>
<p>Data frame of crude inputs. <code>tibble</code></p>
</td></tr>
<tr><td><code id="refineryLP_+3A_products">products</code></td>
<td>
<p>Data frame of product outputs and max outputs. <code>tibble</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Optimal crude slate and profits. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>refineryLP(crudes = RTL::refineryLPdata$inputs, products = RTL::refineryLPdata$outputs)
</code></pre>

<hr>
<h2 id='refineryLPdata'>dataset: refinery LP model sample inputs and outputs</h2><span id='topic+refineryLPdata'></span>

<h3>Description</h3>

<p>Simple refinery  to be used in running LP modeling for education purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refineryLPdata
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Value</h3>

<p><code>list</code>
</p>

<hr>
<h2 id='returns'>Compute absolute, relative or log returns.</h2><span id='topic+returns'></span>

<h3>Description</h3>

<p>Computes periodic returns from a dataframe ordered by date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>returns(df = dflong, retType = "abs", period.return = 1, spread = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="returns_+3A_df">df</code></td>
<td>
<p>Long dataframe with colnames = c(&quot;date&quot;,&quot;value&quot;,&quot;series&quot;). <code>character</code></p>
</td></tr>
<tr><td><code id="returns_+3A_rettype">retType</code></td>
<td>
<p>&quot;abs&quot; for absolute, &quot;rel&quot; for relative, or &quot;log&quot; for log returns. <code>character</code></p>
</td></tr>
<tr><td><code id="returns_+3A_period.return">period.return</code></td>
<td>
<p>Number of rows over which to compute returns. <code>numeric</code></p>
</td></tr>
<tr><td><code id="returns_+3A_spread">spread</code></td>
<td>
<p>TRUE if you want to spread into a long dataframe. <code>logical</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe object of returns. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- dflong %&gt;% dplyr::filter(grepl("CL01", series))
returns(df = x, retType = "abs", period.return = 1, spread = TRUE)
</code></pre>

<hr>
<h2 id='rolladjust'>Adjusts daily returns for futures contracts roll</h2><span id='topic+rolladjust'></span>

<h3>Description</h3>

<p>Returns a xts price or return object adjusted for contract roll. The methodology used to adjust returns is to remove the daily returns on the day after expiry and for prices to adjust historical rolling front month contracts by the size of the roll at each expiry. This is conducive to quantitative trading strategies as it reflects the PL of a financial trader.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rolladjust(x, commodityname = c("cmewti"), rolltype = c("Last.Trade"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rolladjust_+3A_x">x</code></td>
<td>
<p>A df of returns.</p>
</td></tr>
<tr><td><code id="rolladjust_+3A_commodityname">commodityname</code></td>
<td>
<p>Name of commodity in expiry_table: unique(expiry_table$cmdty) or &quot;cmecan&quot; for WCW</p>
</td></tr>
<tr><td><code id="rolladjust_+3A_rolltype">rolltype</code></td>
<td>
<p>Type of contract roll: &quot;Last.Trade&quot; or &quot;First.Notice&quot;.</p>
</td></tr>
<tr><td><code id="rolladjust_+3A_...">...</code></td>
<td>
<p>Other parms</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Roll-adjusted xts object of returns
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ret &lt;- dplyr::tibble(date = seq.Date(Sys.Date() - 60, Sys.Date(), 1), CL01 = rnorm(61, 0, 1))
rolladjust(x = ret, commodityname = c("cmewti"), rolltype = c("Last.Trade"))
</code></pre>

<hr>
<h2 id='simGBM'>GBM process simulation</h2><span id='topic+simGBM'></span>

<h3>Description</h3>

<p>Simulates a Geometric Brownian Motion process
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simGBM(
  nsims = 1,
  S0 = 10,
  drift = 0,
  sigma = 0.2,
  T2M = 1,
  dt = 1/12,
  vec = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simGBM_+3A_nsims">nsims</code></td>
<td>
<p>Number of simulations. Defaults to 1. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_s0">S0</code></td>
<td>
<p>Spot price at t=0. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_drift">drift</code></td>
<td>
<p>Drift term in percentage. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_t2m">T2M</code></td>
<td>
<p>Maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_dt">dt</code></td>
<td>
<p>Time step in period e.g. 1/250 = 1 business day. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simGBM_+3A_vec">vec</code></td>
<td>
<p>Vectorized implementation. Defaults to TRUE. <code>logical</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of simulated values. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simGBM(nsims = 2, S0 = 10, drift = 0, sigma = 0.2, T2M = 1, dt = 1 / 12, vec = TRUE)
</code></pre>

<hr>
<h2 id='simMultivariates'>Multivariate normal from historical dataset</h2><span id='topic+simMultivariates'></span>

<h3>Description</h3>

<p>Generates multivariate random epsilons using absolute returns.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simMultivariates(nsims = 10, x, s0 = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simMultivariates_+3A_nsims">nsims</code></td>
<td>
<p>Number of simulations. Defaults to 10. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simMultivariates_+3A_x">x</code></td>
<td>
<p>Wide data frame of prices with date as first column. <code>tibble</code></p>
</td></tr>
<tr><td><code id="simMultivariates_+3A_s0">s0</code></td>
<td>
<p>Vector of starting value for each variables. Defaults to NULL with zero. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of means, sds, covariance matrix, correlation matrix and simulated values. <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
simMultivariates(nsims = 10, x = RTL::fizdiffs, s0 = NULL)

## End(Not run)
</code></pre>

<hr>
<h2 id='simOU'>OU process simulation</h2><span id='topic+simOU'></span>

<h3>Description</h3>

<p>Simulates a Ornstein–Uhlenbeck process
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simOU(
  nsims = 2,
  S0 = 5,
  mu = 5,
  theta = 0.5,
  sigma = 0.2,
  T2M = 1,
  dt = 1/12,
  epsilon = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simOU_+3A_nsims">nsims</code></td>
<td>
<p>number of simulations. Defaults to 2. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_s0">S0</code></td>
<td>
<p>S at t=0. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_mu">mu</code></td>
<td>
<p>Mean reversion level. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_theta">theta</code></td>
<td>
<p>Mean reversion speed. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_t2m">T2M</code></td>
<td>
<p>Maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_dt">dt</code></td>
<td>
<p>Time step size e.g. 1/250 = 1 business day. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOU_+3A_epsilon">epsilon</code></td>
<td>
<p>Defaults to NULL function generates its own. <code>numeric</code>
OPTIONAL: Array of epsilons for nsims = 1, if you want to feed your own e.g. in a multivariate context.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Simulated values. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simOU(nsims = 5, S0 = 5, mu = 5, theta = .5, sigma = 0.2, T2M = 1, dt = 1 / 12, epsilon = NULL)
simOU(nsims = 1, S0 = 5, mu = 5, theta = .5, sigma = 0.2, T2M = 1, dt = 1 / 12,
epsilon = matrix(rnorm(12,0,sqrt(1/12))))
simOU(nsims = 2, S0 = 5, mu = 5, theta = .5, sigma = 0.2, T2M = 1, dt = 1 / 12,
epsilon = replicate(2,rnorm(12,0,sqrt(1/12))))
</code></pre>

<hr>
<h2 id='simOUJ'>OUJ process simulation</h2><span id='topic+simOUJ'></span>

<h3>Description</h3>

<p>Simulates a Ornstein–Uhlenbeck process with Jumps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simOUJ(
  nsims = 2,
  S0 = 5,
  mu = 5,
  theta = 10,
  sigma = 0.2,
  jump_prob = 0.05,
  jump_avesize = 2,
  jump_stdv = 0.05,
  T2M = 1,
  dt = 1/250
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simOUJ_+3A_nsims">nsims</code></td>
<td>
<p>number of simulations. Defaults to 2. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_s0">S0</code></td>
<td>
<p>S at t=0. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_mu">mu</code></td>
<td>
<p>Mean reversion level. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_theta">theta</code></td>
<td>
<p>Mean reversion speed. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_jump_prob">jump_prob</code></td>
<td>
<p>Probability of jumps. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_jump_avesize">jump_avesize</code></td>
<td>
<p>Average size of jumps. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_jump_stdv">jump_stdv</code></td>
<td>
<p>Standard deviation of jump average size. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_t2m">T2M</code></td>
<td>
<p>Maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUJ_+3A_dt">dt</code></td>
<td>
<p>Time step size e.g. 1/250 = 1 business day. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Simulated values. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>simOUJ(nsims = 2, S0 = 5, mu = 5, theta = .5, sigma = 0.2,
jump_prob = 0.05, jump_avesize = 3, jump_stdv = 0.05,
T2M = 1, dt = 1 / 12)
</code></pre>

<hr>
<h2 id='simOUt'>OU process simulation</h2><span id='topic+simOUt'></span>

<h3>Description</h3>

<p>Simulates a Ornstein–Uhlenbeck process with mu as a function of time
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simOUt(
  nsims = 2,
  S0 = 0,
  mu = dplyr::tibble(t = 0:20, mr = c(rep(2, 7), rep(4, 14))),
  theta = 12,
  sigma = 0.2,
  T2M = 1,
  dt = 1/12
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="simOUt_+3A_nsims">nsims</code></td>
<td>
<p>number of simulations. Defaults to 2. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_s0">S0</code></td>
<td>
<p>S at t=0. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_mu">mu</code></td>
<td>
<p>data frame of mean reversion level as a function of time. <code>tibble</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_theta">theta</code></td>
<td>
<p>Mean reversion speed. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_sigma">sigma</code></td>
<td>
<p>Standard deviation. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_t2m">T2M</code></td>
<td>
<p>Maturity in years. <code>numeric</code></p>
</td></tr>
<tr><td><code id="simOUt_+3A_dt">dt</code></td>
<td>
<p>Time step size e.g. 1/250 = 1 business day. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Simulated values. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mu = dplyr::tibble(t = 0:20,mr = c(rep(2,7),rep(4,14)))
simOUt(nsims = 2, S0 = 5, mu = mu, theta = .5, sigma = 0.2, T2M = 1, dt = 1 / 12)
</code></pre>

<hr>
<h2 id='spot2futConvergence'>dataset: spot to futures convergence</h2><span id='topic+spot2futConvergence'></span>

<h3>Description</h3>

<p>Cash and futures
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spot2futConvergence
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar, EIA
</p>

<hr>
<h2 id='spot2futCurve'>dataset: spot to futures convergence curve</h2><span id='topic+spot2futCurve'></span>

<h3>Description</h3>

<p>Forward Curve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spot2futCurve
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar, EIA
</p>

<hr>
<h2 id='spreadOption'>Kirk's Approximation for Spread Option Pricing</h2><span id='topic+spreadOption'></span>

<h3>Description</h3>

<p>Computes the price and Greeks of European spread options using Kirk's 1995
approximation. The spread option gives the holder the right to receive the
difference between two asset prices (F2 - F1) at maturity, if positive,
in exchange for paying the strike price X.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spreadOption(F1, F2, X, sigma1, sigma2, rho, T2M, r, type = "call")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spreadOption_+3A_f1">F1</code></td>
<td>
<p>numeric, the forward price of the first asset.</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_f2">F2</code></td>
<td>
<p>numeric, the forward price of the second asset.</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_x">X</code></td>
<td>
<p>numeric, the strike price of the spread option.</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_sigma1">sigma1</code></td>
<td>
<p>numeric, the volatility of the first asset (annualized).</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_sigma2">sigma2</code></td>
<td>
<p>numeric, the volatility of the second asset (annualized).</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_rho">rho</code></td>
<td>
<p>numeric, the correlation coefficient between the two assets (-1 &lt;= rho &lt;= 1).</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_t2m">T2M</code></td>
<td>
<p>numeric, the time to maturity in years.</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_r">r</code></td>
<td>
<p>numeric, the risk-free interest rate (annualized).</p>
</td></tr>
<tr><td><code id="spreadOption_+3A_type">type</code></td>
<td>
<p>character, the type of option to evaluate, either &quot;call&quot; or &quot;put&quot;.
Default is &quot;call&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Kirk's approximation is particularly useful for spread options where the exercise
price is zero or small relative to the asset prices. The approximation assumes
that the ratio of the assets follows a lognormal distribution.
</p>
<p>The implementation includes a small constant (epsilon) to avoid numerical
instabilities that might arise from division by zero.
</p>


<h3>Value</h3>

<p>A list containing the following elements:
</p>

<ul>
<li> <p><code>price</code>: The price of the spread option
</p>
</li>
<li> <p><code>delta_F1</code>: The sensitivity of the option price to changes in F1
</p>
</li>
<li> <p><code>delta_F2</code>: The sensitivity of the option price to changes in F2
</p>
</li>
<li> <p><code>gamma_F1</code>: The second derivative of the option price with respect to F1
</p>
</li>
<li> <p><code>gamma_F2</code>: The second derivative of the option price with respect to F2
</p>
</li>
<li> <p><code>gamma_cross</code>: The mixed second derivative with respect to F1 and F2
</p>
</li>
<li> <p><code>vega_1</code>: The sensitivity of the option price to changes in sigma1
</p>
</li>
<li> <p><code>vega_2</code>: The sensitivity of the option price to changes in sigma2
</p>
</li>
<li> <p><code>theta</code>: The sensitivity of the option price to the passage of time
</p>
</li>
<li> <p><code>rho</code>: The sensitivity of the option price to changes in the interest rate
</p>
</li></ul>



<h3>References</h3>

<p>Kirk, E. (1995) &quot;Correlation in the Energy Markets.&quot; Managing Energy Price Risk,
Risk Publications and Enron, London, pp. 71-78.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Price a call spread option with the following parameters:
F1 &lt;- 100  # Forward price of first asset
F2 &lt;- 110  # Forward price of second asset
X &lt;- 5     # Strike price
sigma1 &lt;- 0.2  # Volatility of first asset
sigma2 &lt;- 0.25 # Volatility of second asset
rho &lt;- 0.5     # Correlation between assets
T2M &lt;- 1       # One year to maturity
r &lt;- 0.05      # Risk-free rate

result_call &lt;- spreadOption(F1, F2, X, sigma1, sigma2, rho, T2M, r, type = "call")
result_put &lt;- spreadOption(F1, F2, X, sigma1, sigma2, rho, T2M, r, type = "put")

</code></pre>

<hr>
<h2 id='steo'>dataset: EIA Short Term Energy Outlook</h2><span id='topic+steo'></span>

<h3>Description</h3>

<p>Short Term Energy Outlook from the EIA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>steo
</code></pre>


<h3>Format</h3>

<p>plotly object
</p>


<h3>Value</h3>

<p><code>htmlwidget</code>
</p>


<h3>Source</h3>

<p>eia
</p>

<hr>
<h2 id='stocks'>dataset: Yahoo Finance data sets</h2><span id='topic+stocks'></span>

<h3>Description</h3>

<p>Traded equity prices and returns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stocks
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Value</h3>

<p><code>list</code>
</p>


<h3>Source</h3>

<p>Yahoo Finance
</p>

<hr>
<h2 id='swapCOM'>Commodity Calendar Month Average Swaps</h2><span id='topic+swapCOM'></span>

<h3>Description</h3>

<p>Commodity swap pricing from exchange settlement
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swapCOM(
  futures = futs,
  futuresNames = c("CL0M", "CL0N"),
  pricingDates = c("2020-05-01", "2020-05-30"),
  contract = "cmewti",
  exchange = "nymex"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="swapCOM_+3A_futures">futures</code></td>
<td>
<p>Wide data frame of futures prices for the given swap pricing dates. <code>tibble</code></p>
</td></tr>
<tr><td><code id="swapCOM_+3A_futuresnames">futuresNames</code></td>
<td>
<p>Tickers of relevant futures contracts. <code>character</code></p>
</td></tr>
<tr><td><code id="swapCOM_+3A_pricingdates">pricingDates</code></td>
<td>
<p>Vector of start and end pricing dates. See example. <code>character</code></p>
</td></tr>
<tr><td><code id="swapCOM_+3A_contract">contract</code></td>
<td>
<p>Contract code in data(expiry_table). sort(unique(expiry_table$cmdty)) for options. <code>character</code></p>
</td></tr>
<tr><td><code id="swapCOM_+3A_exchange">exchange</code></td>
<td>
<p>Exchange code in data(holidaysOil). Currently only &quot;nymex&quot; and &quot;ice&quot; supported. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame of histocial swap prices. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
c &lt;- paste0("CL0", c("M", "N", "Q"))
futs &lt;- getPrices(
  feed = "CME_NymexFutures_EOD", contracts = c, from = "2019-08-26",
  iuser = username, ipassword = password
)
swapCOM(
  futures = futs, futuresNames = c("CL0M", "CL0N"),
  pricingDates = c("2020-05-01", "2020-05-30"), contract = "cmewti", exchange = "nymex"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='swapFutWeight'>Commodity Calendar Month Average Swap futures weights</h2><span id='topic+swapFutWeight'></span>

<h3>Description</h3>

<p>Returns the percentage weight of the future in Calendar Month Average swaps
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swapFutWeight(
  Month = "2020-09-01",
  contract = "cmewti",
  exchange = "nymex",
  output = "first.fut.weight"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="swapFutWeight_+3A_month">Month</code></td>
<td>
<p>First calendar day of the month. <code>character</code></p>
</td></tr>
<tr><td><code id="swapFutWeight_+3A_contract">contract</code></td>
<td>
<p>Contract code in data(expiry_table). sort(unique(expiry_table$cmdty)) for options. <code>character</code></p>
</td></tr>
<tr><td><code id="swapFutWeight_+3A_exchange">exchange</code></td>
<td>
<p>Exchange code in data(holidaysOil). Currently only &quot;nymex&quot; and &quot;ice&quot; supported. <code>character</code></p>
</td></tr>
<tr><td><code id="swapFutWeight_+3A_output">output</code></td>
<td>
<p>Either &quot;numDaysFut1&quot;, &quot;numDaysFut2&quot; or &quot;first.fut.weight&quot;. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depending on output setting. <code>numeric</code>
If first.fut.weight, to compute swap 1 - first.fut.weight = % applied to 2nd line contract.
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>swapFutWeight(
  Month = "2020-09-01",
  contract = "cmewti", exchange = "nymex", output = "first.fut.weight"
)
</code></pre>

<hr>
<h2 id='swapInfo'>Commodity Swap details to learn their pricing</h2><span id='topic+swapInfo'></span>

<h3>Description</h3>

<p>Returns dataframe required to price a WTI averaging instrument based on first line settlements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swapInfo(
  date = "2023-08-24",
  feed = "CME_NymexFutures_EOD_continuous",
  ticker = "CL",
  contract = "cmewti",
  exchange = "nymex",
  iuser = "x@xyz.com",
  ipassword = "pass",
  output = "all"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="swapInfo_+3A_date">date</code></td>
<td>
<p>Character date as of which you want to extract daily settlement and forward values. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_feed">feed</code></td>
<td>
<p>Feeds for Morningstar getCurve() and getPrice(). <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_ticker">ticker</code></td>
<td>
<p>Nymex contract code. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_contract">contract</code></td>
<td>
<p>Contract code in data(expiry_table). sort(unique(expiry_table$cmdty)) for options. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_exchange">exchange</code></td>
<td>
<p>Exchange code in data(holidaysOil). Defaults to &quot;nymex&quot;. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_iuser">iuser</code></td>
<td>
<p>Morningstar user name as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_ipassword">ipassword</code></td>
<td>
<p>Morningstar user password as character - sourced locally in examples. <code>character</code></p>
</td></tr>
<tr><td><code id="swapInfo_+3A_output">output</code></td>
<td>
<p>&quot;chart&quot; or &quot;all&quot;. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plot or a list of data frame and plot if output = &quot;all&quot;. <code>htmlwidget</code> or <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
swapInfo(
  date = "2020-05-06", feed = "CME_NymexFutures_EOD_continuous",
  ticker = "CL",
  contract = "cmewti", exchange = "nymex",
  iuser = "x@xyz.com", ipassword = "pass", output = "all"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='swapIRS'>Interest Rate Swap</h2><span id='topic+swapIRS'></span>

<h3>Description</h3>

<p>Computes the mark to market of an IRS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swapIRS(
  trade.date = lubridate::today(),
  eff.date = lubridate::today() + 2,
  mat.date = lubridate::today() + 2 + lubridate::years(2),
  notional = 1e+06,
  PayRec = "Rec",
  fixed.rate = 0.05,
  float.curve = usSwapCurves,
  reset.freq = 3,
  disc.curve = usSwapCurves,
  convention = c("act", 360),
  bus.calendar = "NY",
  output = "price"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="swapIRS_+3A_trade.date">trade.date</code></td>
<td>
<p>Date object. Defaults to today(). <code>Date</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_eff.date">eff.date</code></td>
<td>
<p>Date object. Defaults to today() + 2 days. <code>Date</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_mat.date">mat.date</code></td>
<td>
<p>Date object. Defaults to today() + 2 years. <code>Date</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_notional">notional</code></td>
<td>
<p>Numeric value of notional. Defaults to 1,000,000. <code>numeric</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_payrec">PayRec</code></td>
<td>
<p>&quot;Pay&quot; or &quot;Rec&quot; fixed. <code>character</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_fixed.rate">fixed.rate</code></td>
<td>
<p>Numeric fixed interest rate. Defaults to 0.05. <code>Date</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_float.curve">float.curve</code></td>
<td>
<p>List of interest rate curves. Defaults to data(&quot;usSwapCurves&quot;). <code>list</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_reset.freq">reset.freq</code></td>
<td>
<p>Numeric where 1 = &quot;monthly&quot;, 3 = quarterly, 6 = Semi annual 12 = yearly. <code>character</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_disc.curve">disc.curve</code></td>
<td>
<p>List of interest rate curves. Defaults to data(&quot;usSwapCurves&quot;). <code>list</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_convention">convention</code></td>
<td>
<p>Vector of convention e.g. c(&quot;act&quot;,360) c(30,360),... <code>character</code></p>
</td></tr>
<tr><td><code id="swapIRS_+3A_bus.calendar">bus.calendar</code></td>
<td>
<p>Banking day calendar. Not implemented.</p>
</td></tr>
<tr><td><code id="swapIRS_+3A_output">output</code></td>
<td>
<p>&quot;price&quot; for swap price or &quot;all&quot; for price, cash flow data frame, duration. <code>character</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of swap price, cash flow data frame, duration. <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("usSwapCurves")
swapIRS(
  trade.date = as.Date("2020-01-04"), eff.date = as.Date("2020-01-06"),
  mat.date = as.Date("2022-01-06"), notional = 1000000,
  PayRec = "Rec", fixed.rate = 0.05, float.curve = usSwapCurves, reset.freq = 3,
  disc.curve = usSwapCurves, convention = c("act", 360),
  bus.calendar = "NY", output = "all"
)
</code></pre>

<hr>
<h2 id='tickers_eia'>datasest: metadata of key EIA tickers grouped by products.</h2><span id='topic+tickers_eia'></span>

<h3>Description</h3>

<p>Supports automated upload of EIA data through its API by categories.
Data frame organized by Supply Demand categories and products.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tickers_eia
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='tradeCycle'>dataset: Canadian and US physical crude trading calendars</h2><span id='topic+tradeCycle'></span>

<h3>Description</h3>

<p>Crude Trading Trade Cycles. Note that is uses NYMEX calendar (WIP)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeCycle
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='tradeHubs'>dataset: GIS locations for crude oil trading hubs</h2><span id='topic+tradeHubs'></span>

<h3>Description</h3>

<p>Trading Hubs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeHubs
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='tradeprocess'>dataset: data for teaching the various ways to monetize a market call.</h2><span id='topic+tradeprocess'></span>

<h3>Description</h3>

<p>Data set for explaining the various ways to monetize a market view.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeprocess
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='tradeStats'>Risk-reward statistics for quant trading</h2><span id='topic+tradeStats'></span>

<h3>Description</h3>

<p>Compute list of risk reward metrics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeStats(x, Rf = 0)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tradeStats_+3A_x">x</code></td>
<td>
<p>Univariate xts object of returns OR dataframe with date and return variables. <code>xts</code></p>
</td></tr>
<tr><td><code id="tradeStats_+3A_rf">Rf</code></td>
<td>
<p>Risk-free rate. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of risk/reward metrics. <code>list</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(PerformanceAnalytics)
tradeStats(x = stocks$spy, Rf = 0)
</code></pre>

<hr>
<h2 id='tradeStrategyDY'>Sample quantitative trading strategy</h2><span id='topic+tradeStrategyDY'></span>

<h3>Description</h3>

<p>Based on dividend yield.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeStrategyDY(data, par1value = 50, par2value = 200)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tradeStrategyDY_+3A_data">data</code></td>
<td>
<p>Dataframe of OHLC data e.g. RTL::uso. <code>tibble</code></p>
</td></tr>
<tr><td><code id="tradeStrategyDY_+3A_par1value">par1value</code></td>
<td>
<p>Value of first parameter e.g. short MA. <code>numeric</code></p>
</td></tr>
<tr><td><code id="tradeStrategyDY_+3A_par2value">par2value</code></td>
<td>
<p>Value of second parameter e.g. long MA. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with indicators, signals, trades and profit and loss. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tradeStrategyDY(data = RTL::stocks$ry, par1value = 50, par2value = 200)
</code></pre>

<hr>
<h2 id='tradeStrategySMA'>Sample quantitative trading strategy</h2><span id='topic+tradeStrategySMA'></span>

<h3>Description</h3>

<p>Moving average crossover strategy
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tradeStrategySMA(data = RTL::stocks$uso, par1value = 50, par2value = 200)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tradeStrategySMA_+3A_data">data</code></td>
<td>
<p>Dataframe of OHLC data e.g. RTL::uso. <code>tibble</code></p>
</td></tr>
<tr><td><code id="tradeStrategySMA_+3A_par1value">par1value</code></td>
<td>
<p>Value of first parameter e.g. short MA. <code>numeric</code></p>
</td></tr>
<tr><td><code id="tradeStrategySMA_+3A_par2value">par2value</code></td>
<td>
<p>Value of second parameter e.g. long MA. <code>numeric</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Dataframe with indicators, signals, trades and profit and loss. <code>tibble</code>
</p>


<h3>Author(s)</h3>

<p>Philippe Cote
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tradeStrategySMA(data = RTL::stocks$uso, par1value = 50, par2value = 200)
</code></pre>

<hr>
<h2 id='tsQuotes'>dataset: interest rate curve data for RQuantlib .</h2><span id='topic+tsQuotes'></span>

<h3>Description</h3>

<p>USD IR curve input for RQuantlib::DiscountCurve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tsQuotes
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='usSwapCurves'>dataset: US bootstrapped interest rate curve.</h2><span id='topic+usSwapCurves'></span>

<h3>Description</h3>

<p>USD IR Discount, Forward and Zero curves from RQuantlib::DiscountCurve
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usSwapCurves
</code></pre>


<h3>Format</h3>

<p>List
</p>


<h3>Value</h3>

<p><code>list</code>
</p>


<h3>Source</h3>

<p>Morningstar and FRED
</p>

<hr>
<h2 id='usSwapCurvesPar'>dataset: US bootstrapped interest rate curve parallel sample.</h2><span id='topic+usSwapCurvesPar'></span>

<h3>Description</h3>

<p>USD IR Discount, Forward and Zero curves from RQuantlib::DiscountCurve - Parallel toy data set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usSwapCurvesPar
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>

<hr>
<h2 id='wtiSwap'>dataset: WTI Calendar Month Average Swap pricing data</h2><span id='topic+wtiSwap'></span>

<h3>Description</h3>

<p>WTI Crude futures
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtiSwap
</code></pre>


<h3>Format</h3>

<p>data frame
</p>


<h3>Value</h3>

<p><code>tibble</code>
</p>


<h3>Source</h3>

<p>Morningstar
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
