<!DOCTYPE html><html><head><title>Help for package ggdemetra</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggdemetra}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#autoplot.SA'><p>Plot 'RJDemetra' model</p></a></li>
<li><a href='#components'><p>Extract Component from 'RJDemetra' model</p></a></li>
<li><a href='#geom_arima'><p>ARIMA model</p></a></li>
<li><a href='#geom_diagnostics'><p>Table of diagnostics</p></a></li>
<li><a href='#geom_outlier'><p>Outliers texts</p></a></li>
<li><a href='#geom_sa'><p>Seasonal adjustment time series</p></a></li>
<li><a href='#init_ggplot'><p>Initialise 'ggplot2' with 'SA' model</p></a></li>
<li><a href='#ipi_c_eu'><p>Industrial Production Indices in manufacturing in the European Union</p></a></li>
<li><a href='#siratio'><p>SI-ratio</p></a></li>
<li><a href='#ts2df'><p>Convert 'ts' object to 'data.frame'</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'ggplot2' Extension for Seasonal and Trading Day Adjustment with
'RJDemetra'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.8</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides 'ggplot2' functions to return the results of seasonal and trading day adjustment 
    made by 'RJDemetra'. 'RJDemetra' is an 'R' interface around 'JDemetra+' (<a href="https://github.com/jdemetra/jdemetra-app">https://github.com/jdemetra/jdemetra-app</a>),
    the seasonal adjustment software officially recommended to the members of the European Statistical System and
    the European System of Central Banks.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.2), ggplot2 (&ge; 2.0.0), RJDemetra (&ge; 0.1.2),</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggrepel, gridExtra</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>Java (&gt;= 8)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://aqlt.github.io/ggdemetra/">https://aqlt.github.io/ggdemetra/</a>,
<a href="https://github.com/AQLT/ggdemetra">https://github.com/AQLT/ggdemetra</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/AQLT/ggdemetra/issues">https://github.com/AQLT/ggdemetra/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-04 14:21:34 UTC; alainquartierlatente</td>
</tr>
<tr>
<td>Author:</td>
<td>Alain Quartier-la-Tente
    <a href="https://orcid.org/0000-0001-7890-3857"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alain Quartier-la-Tente &lt;alain.quartier@yahoo.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-04 14:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='autoplot.SA'>Plot 'RJDemetra' model</h2><span id='topic+autoplot.SA'></span>

<h3>Description</h3>

<p>Plot 'RJDemetra' model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'SA'
autoplot(
  object,
  components = c("y", "sa", trend = "t", seasonal = "s", irregular = "i"),
  forecast = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="autoplot.SA_+3A_object">object</code></td>
<td>
<p>a <code>"SA"</code> or <code>"jSA"</code> model.</p>
</td></tr>
<tr><td><code id="autoplot.SA_+3A_components">components</code></td>
<td>
<p>components to print, can be <code>"y"</code> (input time series),
<code>"sa"</code> (seasonal adjusted), <code>"t"</code> (trend-cycle),
<code>"y_cal"</code> (calendar adjusted), <code>"s"</code> (seasonal), <code>"i"</code> (irregular),
<code>"cal"</code> (calendar). The vector can be named to change the label</p>
</td></tr>
<tr><td><code id="autoplot.SA_+3A_forecast">forecast</code></td>
<td>
<p>boolean indicating if the forecast series should be printed.</p>
</td></tr>
<tr><td><code id="autoplot.SA_+3A_...">...</code></td>
<td>
<p>unused arguments.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x = RJDemetra::jx13(ipi_c_eu[,"FR"])
ggplot2::autoplot(x)
</code></pre>

<hr>
<h2 id='components'>Extract Component from 'RJDemetra' model</h2><span id='topic+components'></span><span id='topic+seasonal'></span><span id='topic+trendcycle'></span><span id='topic+irregular'></span><span id='topic+seasonaladj'></span><span id='topic+calendaradj'></span><span id='topic+calendar'></span><span id='topic+raw'></span>

<h3>Description</h3>

<p>Extract Component from 'RJDemetra' model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seasonal(x, forecast = FALSE)

trendcycle(x, forecast = FALSE)

irregular(x, forecast = FALSE)

seasonaladj(x, forecast = FALSE)

calendaradj(x, forecast = FALSE)

calendar(x, forecast = FALSE)

raw(x, forecast = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="components_+3A_x">x</code></td>
<td>
<p>a <code>"SA"</code> or <code>"jSA"</code> model.</p>
</td></tr>
<tr><td><code id="components_+3A_forecast">forecast</code></td>
<td>
<p>boolean indicating if the forecast series should be returned.</p>
</td></tr>
</table>

<hr>
<h2 id='geom_arima'>ARIMA model</h2><span id='topic+geom_arima'></span>

<h3>Description</h3>

<p>Function to add directly to the plot the ARIMA model used in the pre-adjustment process of the seasonal adjustment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_arima(
  mapping = NULL,
  data = NULL,
  stat = "arima",
  geom = c("text", "label"),
  position = "identity",
  ...,
  method = c("x13", "tramoseats"),
  spec = NULL,
  frequency = NULL,
  message = TRUE,
  x_arima = NULL,
  y_arima = NULL,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_arima_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <a href="ggplot2.html#topic+aes">aes()</a> or
<a href="ggplot2.html#topic+aes_">aes_()</a>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> that contains the data used for the seasonal adjustment.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_geom">geom</code></td>
<td>
<p>character. The geometric to use to display the data:
<code>GeomText</code> (<code>geom = "text"</code>, the default, see <a href="ggplot2.html#topic+geom_text">geom_text()</a>) or
<code>GeomLabel</code> (<code>geom = "label"</code>, see <a href="ggplot2.html#topic+geom_text">geom_label()</a>).</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <a href="ggplot2.html#topic+layer">layer()</a>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_method">method</code></td>
<td>
<p>the method used for the seasonal adjustment. <code>"x13"</code> (by default) for the X-13ARIMA method and <code>"tramoseats"</code> for TRAMO-SEATS.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_spec">spec</code></td>
<td>
<p>the specification used for the seasonal adjustment.
See <a href="RJDemetra.html#topic+x13">x13()</a> or <a href="RJDemetra.html#topic+tramoseats">tramoseats()</a>.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_frequency">frequency</code></td>
<td>
<p>the frequency of the time series. By default (<code>frequency = NULL</code>),
the frequency is computed automatically.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_message">message</code></td>
<td>
<p>a <code>boolean</code> indicating if a message is printed with the frequency used.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_x_arima">x_arima</code>, <code id="geom_arima_+3A_y_arima">y_arima</code></td>
<td>
<p>position of the text of the ARIMA model. By default, the first position of the <code>data</code> is used.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_arima_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With the parameter <code>geom = "text"</code>, the ARIMA model used in the pre-adjustment process of the seasonal adjustment are directly added to the plot. With <code>geom = "label"</code> a rectangle is drawn behind the ARIMA model, making it easier to read.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p_sa_ipi_fr &lt;- ggplot(data = ipi_c_eu_df, mapping = aes(x = date, y = FR)) +
    geom_line(color =  "#F0B400") +
    labs(title = "Seasonal adjustment of the French industrial production index",
         x = "time", y = NULL) +
    geom_sa(color = "#155692", message = FALSE)
         
# To add the ARIMA model
p_sa_ipi_fr + 
    geom_arima(geom = "label",
               x_arima = - Inf, y_arima = -Inf, 
               vjust = -1, hjust = -0.1,
               message = FALSE)          
</code></pre>

<hr>
<h2 id='geom_diagnostics'>Table of diagnostics</h2><span id='topic+geom_diagnostics'></span>

<h3>Description</h3>

<p>Adds a table of diagnostics to the plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_diagnostics(
  mapping = NULL,
  data = NULL,
  position = "identity",
  ...,
  method = c("x13", "tramoseats"),
  spec = NULL,
  frequency = NULL,
  message = TRUE,
  diagnostics = NULL,
  digits = 2,
  xmin = -Inf,
  xmax = Inf,
  ymin = -Inf,
  ymax = Inf,
  table_theme = ttheme_default(),
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_diagnostics_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <a href="ggplot2.html#topic+aes">aes()</a> or
<a href="ggplot2.html#topic+aes_">aes_()</a>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> that contains the data used for the seasonal adjustment.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <a href="ggplot2.html#topic+layer">layer()</a>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_method">method</code></td>
<td>
<p>the method used for the seasonal adjustment. <code>"x13"</code> (by default) for the X-13ARIMA method and <code>"tramoseats"</code> for TRAMO-SEATS.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_spec">spec</code></td>
<td>
<p>the specification used for the seasonal adjustment.
See <a href="RJDemetra.html#topic+x13">x13()</a> or <a href="RJDemetra.html#topic+tramoseats">tramoseats()</a>.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_frequency">frequency</code></td>
<td>
<p>the frequency of the time series. By default (<code>frequency = NULL</code>),
the frequency is computed automatically.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_message">message</code></td>
<td>
<p>a <code>boolean</code> indicating if a message is printed with the frequency used.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_diagnostics">diagnostics</code></td>
<td>
<p>vector of character containing the name of the diagnostics to plot.
See <a href="RJDemetra.html#topic+user_defined_variables">user_defined_variables()</a> for the available
parameters.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_digits">digits</code></td>
<td>
<p>integer indicating the number of decimal places to be used for numeric diagnostics. By default <code>digits = 2</code>.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_xmin">xmin</code>, <code id="geom_diagnostics_+3A_xmax">xmax</code></td>
<td>
<p>x location (in data coordinates) giving horizontal
location of raster.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_ymin">ymin</code>, <code id="geom_diagnostics_+3A_ymax">ymax</code></td>
<td>
<p>y location (in data coordinates) giving vertical
location of raster.</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_table_theme">table_theme</code></td>
<td>
<p>list of theme parameters for the table of diagnostics (see <a href="gridExtra.html#topic+tableGrob">ttheme_default()</a>).</p>
</td></tr>
<tr><td><code id="geom_diagnostics_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>p_sa_ipi_fr &lt;- ggplot(data = ipi_c_eu_df, mapping = aes(x = date, y = FR)) +
    geom_line(color =  "#F0B400") +
    labs(title = "Seasonal adjustment of the French industrial production index",
         x = "time", y = NULL) +
    geom_sa(color = "#155692", message = FALSE)

# To add of diagnostics with result of the X-11 combined test and the p-values 
# of the residual seasonality qs and f tests:
diagnostics &lt;- c("diagnostics.combined.all.summary", "diagnostics.qs", "diagnostics.ftest")
p_sa_ipi_fr + 
    geom_diagnostics(diagnostics = diagnostics,
                     ymin = 58, ymax = 72, xmin = 2010,
                     table_theme = gridExtra::ttheme_default(base_size = 8),
                     message = FALSE)

# To customize the names of the diagnostics in the plot:
    
diagnostics &lt;- c(`Combined test` = "diagnostics.combined.all.summary",
                 `Residual qs-test (p-value)` = "diagnostics.qs",
                 `Residual f-test (p-value)` = "diagnostics.ftest")
p_sa_ipi_fr + 
    geom_diagnostics(diagnostics = diagnostics,
                     ymin = 58, ymax = 72, xmin = 2010,
                     table_theme = gridExtra::ttheme_default(base_size = 8),
                     message = FALSE)

# To add the table below the plot: 

p_diag &lt;- ggplot(data = ipi_c_eu_df, mapping = aes(x = date, y = FR)) +
    geom_diagnostics(diagnostics = diagnostics,
                     table_theme = gridExtra::ttheme_default(base_size = 8),
                     message = FALSE) + 
    theme_void()

gridExtra::grid.arrange(p_sa_ipi_fr, p_diag,
                        nrow = 2, heights  = c(4, 1))

</code></pre>

<hr>
<h2 id='geom_outlier'>Outliers texts</h2><span id='topic+geom_outlier'></span>

<h3>Description</h3>

<p>Function to add directly to the plot the outliers used in the pre-adjustment process of the seasonal adjustment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_outlier(
  mapping = NULL,
  data = NULL,
  stat = "outlier",
  geom = c("text", "label", "text_repel", "label_repel"),
  position = "identity",
  ...,
  method = c("x13", "tramoseats"),
  spec = NULL,
  frequency = NULL,
  message = TRUE,
  first_date = NULL,
  last_date = NULL,
  coefficients = FALSE,
  digits = 1,
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_outlier_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <a href="ggplot2.html#topic+aes">aes()</a> or
<a href="ggplot2.html#topic+aes_">aes_()</a>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> that contains the data used for the seasonal adjustment.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_geom">geom</code></td>
<td>
<p>character. The geometric to use to display the data:
<code>GeomText</code> (<code>geom = "text"</code>, the default, see <a href="ggplot2.html#topic+geom_text">geom_text()</a>);
<code>GeomLabel</code> (<code>geom = "label"</code>, see <a href="ggplot2.html#topic+geom_text">geom_label()</a>);
<code>GeomTextRepel</code> (<code>geom = "text_repel"</code>, the default, see <a href="ggrepel.html#topic+geom_text_repel">geom_text_repel()</a>);
<code>GeomLabelRepel</code> (<code>geom = "label_repel"</code>, the default, see <a href="ggrepel.html#topic+geom_text_repel">geom_label_repel()</a>).</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <a href="ggplot2.html#topic+layer">layer()</a>. They may be parameters of
<a href="ggplot2.html#topic+geom_text">geom_text()</a> (if <code>geom = "text"</code>),
<a href="ggplot2.html#topic+geom_text">geom_label()</a> (if <code>geom = "label"</code>),
<a href="ggrepel.html#topic+geom_text_repel">geom_text_repel()</a> (if <code>geom = "text_repel"</code>)
or <a href="ggrepel.html#topic+geom_text_repel">geom_label_repel()</a> (if <code>geom = "label_repel"</code>).</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_method">method</code></td>
<td>
<p>the method used for the seasonal adjustment. <code>"x13"</code> (by default) for the X-13ARIMA method and <code>"tramoseats"</code> for TRAMO-SEATS.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_spec">spec</code></td>
<td>
<p>the specification used for the seasonal adjustment.
See <a href="RJDemetra.html#topic+x13">x13()</a> or <a href="RJDemetra.html#topic+tramoseats">tramoseats()</a>.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_frequency">frequency</code></td>
<td>
<p>the frequency of the time series. By default (<code>frequency = NULL</code>),
the frequency is computed automatically.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_message">message</code></td>
<td>
<p>a <code>boolean</code> indicating if a message is printed with the frequency used.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_first_date">first_date</code></td>
<td>
<p>A numeric specifying the first date from which the outliers are plotted.
By default (<code>first_date = NULL</code>) the outliers are plotted from the
beginning of the time series.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_last_date">last_date</code></td>
<td>
<p>A numeric specifying the first date from which the outliers are plotted.
By default (<code>first_date = NULL</code>) the outliers are plotted until the
end of the time series.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_coefficients">coefficients</code></td>
<td>
<p>boolean indicating if the estimates coefficients are printed.
By default <code>coefficients = FALSE</code>.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_digits">digits</code></td>
<td>
<p>integer indicating the number of decimal places to be used for numeric diagnostics. By default <code>digits = 1</code>.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_outlier_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>With the parameter <code>geom = "text"</code>, the outliers used in the pre-adjustment process of the seasonal adjustment are directly added to the plot. With <code>geom = "label"</code> a rectangle is drawn behind the names of the outliers, making them easier to read. The same with <code>geom = "text_repel"</code> or <code>geom = "label_repel"</code> but text labels are also repeled away from each other and away from the data points (see <a href="ggrepel.html#topic+geom_text_repel">geom_label_repel()</a>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>p_sa_ipi_fr &lt;- ggplot(data = ipi_c_eu_df, mapping = aes(x = date, y = FR)) +
    geom_line(color =  "#F0B400") +
    labs(title = "Seasonal adjustment of the French industrial production index",
         x = "time", y = NULL)  +
    geom_sa(color = "#155692", message = FALSE)
         
# To add the outliers:
p_sa_ipi_fr + geom_outlier(geom = "label",
                    message = FALSE)


# To have a more readable plot with outliers names that repeled away from each other 
# and from the data points:
p_sa_ipi_fr + 
    geom_outlier(geom = "label_repel",
                 message = FALSE,
                 ylim = c(NA, 65),
                 arrow = arrow(length = unit(0.03, "npc"),
                               type = "closed", ends = "last"))

# To only plot the outliers from a specific date (2009):
p_sa_ipi_fr + 
    geom_outlier(geom = "label_repel",
                 message = FALSE,
                 first_date = 2009,
                 ylim = c(NA, 65), 
                 arrow = arrow(length = unit(0.03, "npc"),
                               type = "closed", ends = "last"))
</code></pre>

<hr>
<h2 id='geom_sa'>Seasonal adjustment time series</h2><span id='topic+geom_sa'></span><span id='topic+stat_sa'></span>

<h3>Description</h3>

<p>Performs a seasonal adjustment and plots a time series.
<code>geom_sa()</code> and <code>stat_sa()</code> are  aliases: they both use the same arguments.
Use <code>stat_sa()</code> if you want to display the results with a non-standard geom.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_sa(
  mapping = NULL,
  data = NULL,
  stat = "sa",
  position = "identity",
  ...,
  method = c("x13", "tramoseats"),
  spec = NULL,
  frequency = NULL,
  message = TRUE,
  component = "sa",
  show.legend = NA,
  inherit.aes = TRUE
)

stat_sa(
  mapping = NULL,
  data = NULL,
  geom = "line",
  position = "identity",
  ...,
  method = c("x13", "tramoseats"),
  spec = NULL,
  frequency = NULL,
  message = TRUE,
  component = "sa",
  show.legend = NA,
  inherit.aes = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geom_sa_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <a href="ggplot2.html#topic+aes">aes()</a> or
<a href="ggplot2.html#topic+aes_">aes_()</a>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> that contains the data used for the seasonal adjustment.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to <a href="ggplot2.html#topic+layer">layer()</a>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_method">method</code></td>
<td>
<p>the method used for the seasonal adjustment. <code>"x13"</code> (by default) for the X-13ARIMA method and <code>"tramoseats"</code> for TRAMO-SEATS.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_spec">spec</code></td>
<td>
<p>the specification used for the seasonal adjustment.
See <a href="RJDemetra.html#topic+x13">x13()</a> or <a href="RJDemetra.html#topic+tramoseats">tramoseats()</a>.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_frequency">frequency</code></td>
<td>
<p>the frequency of the time series. By default (<code>frequency = NULL</code>),
the frequency is computed automatically.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_message">message</code></td>
<td>
<p>a <code>boolean</code> indicating if a message is printed with the frequency used.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_component">component</code></td>
<td>
<p>a <code>character</code> equals to the component to plot. The result must be a time series.
See <a href="RJDemetra.html#topic+user_defined_variables">user_defined_variables()</a> for the available
parameters. By default (<code>component = 'sa'</code>) the seasonal adjusted component is plotted.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them.</p>
</td></tr>
<tr><td><code id="geom_sa_+3A_geom">geom</code></td>
<td>
<p>The geometric object to use to display the data</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>p_ipi_fr &lt;- ggplot(data = ipi_c_eu_df, mapping = aes(x = date, y = FR)) +
    geom_line(color =  "#F0B400") +
    labs(title = "Seasonal adjustment of the French industrial production index",
         x = "time", y = NULL)

# To add the seasonal adjusted series:
p_ipi_fr +
    geom_sa(color = "#155692")

# To add the forecasts of the input data and the seasonal adjusted series:
p_sa &lt;- p_ipi_fr +
    geom_sa(component = "y_f", linetype = 2, message = FALSE, color =  "#F0B400") + 
    geom_sa(component = "sa", color = "#155692", message = FALSE) +
    geom_sa(component = "sa_f", color = "#155692", linetype = 2, message = FALSE)
p_sa 
</code></pre>

<hr>
<h2 id='init_ggplot'>Initialise 'ggplot2' with 'SA' model</h2><span id='topic+init_ggplot'></span>

<h3>Description</h3>

<p>Initialise 'ggplot2' with 'SA' model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_ggplot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init_ggplot_+3A_x">x</code></td>
<td>
<p>A <code>"SA"</code> or <code>"jsA"</code> model created with 'RJDemetra'.</p>
</td></tr>
<tr><td><code id="init_ggplot_+3A_...">...</code></td>
<td>
<p>Other parameters passes to <code><a href="ggplot2.html#topic+ggplot">ggplot2::ggplot()</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>mod &lt;- RJDemetra::x13(ipi_c_eu[, "FR"])
init_ggplot(mod) +
    geom_line(color =  "#F0B400") +
    geom_sa(component = "sa", color = "#155692")
</code></pre>

<hr>
<h2 id='ipi_c_eu'>Industrial Production Indices in manufacturing in the European Union</h2><span id='topic+ipi_c_eu'></span><span id='topic+ipi_c_eu_df'></span>

<h3>Description</h3>

<p>A dataset containing on monthly industrial production indices in manufacturing in the European Union (from sts_inpr_m dataset of Eurostat). Data are based 100 in 2015 and are unadjusted, i.e. neither seasonally adjusted nor calendar adjusted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ipi_c_eu

ipi_c_eu_df
</code></pre>


<h3>Format</h3>

<p>A monthly <code>ts</code> object from january 1990 to december 2017 with 34 variables for <code>ipi_c_eu</code> and a <code>data.frame</code> for <code>ipi_c_eu_df</code>.
</p>
<p>An object of class <code>data.frame</code> with 360 rows and 35 columns.
</p>


<h3>Details</h3>

<p>The dataset contains 34 time series corresponding to the following geographical area
</p>

<table>
<tr>
 <td style="text-align: center;">
BE        </td><td style="text-align: left;"> Belgium                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
BG        </td><td style="text-align: left;"> Bulgaria                                        </td>
</tr>
<tr>
 <td style="text-align: center;">
CZ        </td><td style="text-align: left;"> Czechia                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
DK        </td><td style="text-align: left;"> Denmark                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
DE        </td><td style="text-align: left;"> Germany (until 1990 former territory of the FRG)</td>
</tr>
<tr>
 <td style="text-align: center;">
EE        </td><td style="text-align: left;"> Estonia                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
IE        </td><td style="text-align: left;"> Ireland                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
EL        </td><td style="text-align: left;"> Greece                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
ES        </td><td style="text-align: left;"> Spain                                           </td>
</tr>
<tr>
 <td style="text-align: center;">
FR        </td><td style="text-align: left;"> France                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
HR        </td><td style="text-align: left;"> Croatia                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
IT        </td><td style="text-align: left;"> Italy                                           </td>
</tr>
<tr>
 <td style="text-align: center;">
CY        </td><td style="text-align: left;"> Cyprus                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
LV        </td><td style="text-align: left;"> Latvia                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
LT        </td><td style="text-align: left;"> Lithuania                                       </td>
</tr>
<tr>
 <td style="text-align: center;">
LU        </td><td style="text-align: left;"> Luxembourg                                      </td>
</tr>
<tr>
 <td style="text-align: center;">
HU        </td><td style="text-align: left;"> Hungary                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
MT        </td><td style="text-align: left;"> Malta                                           </td>
</tr>
<tr>
 <td style="text-align: center;">
NL        </td><td style="text-align: left;"> Netherlands                                     </td>
</tr>
<tr>
 <td style="text-align: center;">
AT        </td><td style="text-align: left;"> Austria                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
PL        </td><td style="text-align: left;"> Poland                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
PT        </td><td style="text-align: left;"> Portugal                                        </td>
</tr>
<tr>
 <td style="text-align: center;">
RO        </td><td style="text-align: left;"> Romania                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
SI        </td><td style="text-align: left;"> Slovenia                                        </td>
</tr>
<tr>
 <td style="text-align: center;">
SK        </td><td style="text-align: left;"> Slovakia                                        </td>
</tr>
<tr>
 <td style="text-align: center;">
FI        </td><td style="text-align: left;"> Finland                                         </td>
</tr>
<tr>
 <td style="text-align: center;">
SE        </td><td style="text-align: left;"> Sweden                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
UK        </td><td style="text-align: left;"> United Kingdom                                  </td>
</tr>
<tr>
 <td style="text-align: center;">
NO        </td><td style="text-align: left;"> Norway                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
CH        </td><td style="text-align: left;"> Switzerland                                     </td>
</tr>
<tr>
 <td style="text-align: center;">
ME        </td><td style="text-align: left;"> Montenegro                                      </td>
</tr>
<tr>
 <td style="text-align: center;">
MK        </td><td style="text-align: left;"> Former Yugoslav Republic of Macedonia, the      </td>
</tr>
<tr>
 <td style="text-align: center;">
RS        </td><td style="text-align: left;"> Serbia                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
TR        </td><td style="text-align: left;"> Turkey                                          </td>
</tr>
<tr>
 <td style="text-align: center;">
BA        </td><td style="text-align: left;"> Bosnia and Herzegovina
</td>
</tr>

</table>



<h3>Source</h3>

<p>Eurostat, 'sts_inpr_m' database.
</p>

<hr>
<h2 id='siratio'>SI-ratio</h2><span id='topic+siratio'></span><span id='topic+siratioplot'></span><span id='topic+ggsiratioplot'></span>

<h3>Description</h3>

<p>SI-ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>siratio(x, ...)

siratioplot(
  x,
  labels = NULL,
  add = FALSE,
  box = TRUE,
  col.s = "darkblue",
  col.i = "gray",
  col.mean = "red",
  cex.i = 0.1,
  lwd.s = par("lwd"),
  lwd.mean = lwd.s,
  main = "SI ratio",
  xlab = NULL,
  ylab = NULL,
  xlim = NULL,
  ylim = NULL,
  start = NULL,
  end = NULL,
  ...
)

ggsiratioplot(
  x,
  labels = NULL,
  col.s = "darkblue",
  col.i = "gray",
  col.mean = "red",
  cex.i = 0.5,
  lwd.s = 1,
  lwd.mean = lwd.s,
  main = "SI ratio",
  xlab = NULL,
  ylab = NULL,
  start = NULL,
  end = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="siratio_+3A_x">x</code></td>
<td>
<p>input model or data.</p>
</td></tr>
<tr><td><code id="siratio_+3A_...">...</code></td>
<td>
<p>unused parameters.</p>
</td></tr>
<tr><td><code id="siratio_+3A_labels">labels</code></td>
<td>
<p>labels.</p>
</td></tr>
<tr><td><code id="siratio_+3A_add">add</code></td>
<td>
<p>boolean indicating whether a new plot should be drawn.</p>
</td></tr>
<tr><td><code id="siratio_+3A_box">box</code></td>
<td>
<p>boolean indicating a box around the current plot should be drawn.</p>
</td></tr>
<tr><td><code id="siratio_+3A_col.s">col.s</code>, <code id="siratio_+3A_col.i">col.i</code>, <code id="siratio_+3A_col.mean">col.mean</code></td>
<td>
<p>colors of the different components.</p>
</td></tr>
<tr><td><code id="siratio_+3A_cex.i">cex.i</code>, <code id="siratio_+3A_lwd.s">lwd.s</code>, <code id="siratio_+3A_lwd.mean">lwd.mean</code></td>
<td>
<p>graphical parameters.</p>
</td></tr>
<tr><td><code id="siratio_+3A_main">main</code>, <code id="siratio_+3A_xlab">xlab</code>, <code id="siratio_+3A_ylab">ylab</code></td>
<td>
<p>title, X and Y axis label.</p>
</td></tr>
<tr><td><code id="siratio_+3A_xlim">xlim</code>, <code id="siratio_+3A_ylim">ylim</code></td>
<td>
<p>X and Y axis limits.</p>
</td></tr>
<tr><td><code id="siratio_+3A_start">start</code>, <code id="siratio_+3A_end">end</code></td>
<td>
<p>first and last dates plotted.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- RJDemetra::x13(ipi_c_eu[,"FR"])
siratioplot(x)
ggsiratioplot(x)
</code></pre>

<hr>
<h2 id='ts2df'>Convert 'ts' object to 'data.frame'</h2><span id='topic+ts2df'></span>

<h3>Description</h3>

<p>Function to a <code>ts</code> or <code>mts</code> object to a <code>data.frame</code> that can be directly used in the plot functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ts2df(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ts2df_+3A_x">x</code></td>
<td>
<p>a <code>ts</code> or <code>mts</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To get the ipi_c_eu_df object:
ts2df(ipi_c_eu)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
