<!DOCTYPE html><html><head><title>Help for package isoWater</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {isoWater}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dex'>
<p>Deuterium excess</p></a></li>
<li><a href='#GMWL'>
<p>Global Meteoric Water Line</p></a></li>
<li><a href='#iso'>
<p>Iso Object</p></a></li>
<li><a href='#isoWater'><p>Discovery, Retrieval, and Analysis of Water Isotope Data</p></a></li>
<li><a href='#mixSource'>
<p>Water Source as a Mixture</p></a></li>
<li><a href='#mwl'>
<p>Mwl Object</p></a></li>
<li><a href='#mwlSource'>
<p>Water Source Using Meteoric Water Line</p></a></li>
<li><a href='#wiDB_data'>
<p>Obtain data from wiDB using a query</p></a></li>
<li><a href='#wiDB_sites'>
<p>Obtain information on wiDB sites using a query</p></a></li>
<li><a href='#wiDB_values'>
<p>Obtain value lists for categorical fields in wiDB</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Discovery, Retrieval, and Analysis of Water Isotope Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gabe Bowen &lt;gabe.bowen@utah.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The wiDB...() functions provide an interface to the public API 
    of the wiDB <a href="https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md">https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md</a>: 
    build, check and submit queries, and receive and 
    unpack responses. Data analysis functions support Bayesian 
    inference of the source and source isotope composition of water 
    samples that may have experienced evaporation. Algorithms 
    adapted from Bowen et al. (2018, &lt;<a href="https://doi.org/10.1007%2Fs00442-018-4192-5">doi:10.1007/s00442-018-4192-5</a>&gt;).</td>
</tr>
<tr>
<td>Imports:</td>
<td>R2jags, abind, R2WinBUGS, doParallel, foreach, httr, jsonlite</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0), covr, curl</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-17 16:17:00 UTC; u0133977</td>
</tr>
<tr>
<td>Author:</td>
<td>Gabe Bowen [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-18 08:02:32 UTC</td>
</tr>
</table>
<hr>
<h2 id='dex'>
Deuterium excess
</h2><span id='topic+dex'></span>

<h3>Description</h3>

<p>Calculates deuterium excess or line-conditioned excess.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dex(HO, form = "dex", MWL = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dex_+3A_ho">HO</code></td>
<td>

<p>data.frame. Hydrogen (column 1) and oxygen (column 2) isotope values for 1 or more water samples.
</p>
</td></tr>
<tr><td><code id="dex_+3A_form">form</code></td>
<td>
<p>character. Calculate deuterium excess (&ldquo;dex&rdquo;), line-conditioned excess (&ldquo;lcex&rdquo;), or &ldquo;both&rdquo;.</p>
</td></tr>
<tr><td><code id="dex_+3A_mwl">MWL</code></td>
<td>

<p>numeric. Vector the first two elements of which contain the meteoric water line slope and intercept (e.g., as created by <code><a href="#topic+mwl">mwl</a></code>). The default value (if <code>MWL = NULL</code>) reflects the Global Meteoric Water Line estimated from a global precipitation compilation in Bowen, et al. (2019). Ignored for <code>form = "dex"</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a copy of <code>HO</code> with an added field(s) &ldquo;dex&rdquo; and/or &ldquo;lcex&rdquo; containing the calculated values. Deuterium excess is calculated following Dansgaard (1964) as: <em>dex = <code class="reqn">\delta</code>2H - 8 * <code class="reqn">\delta</code>18O</em>, and lc-excess following Landwehr &amp; Coplen (2006) as <em>lcex = <code class="reqn">\delta</code>2H - m * <code class="reqn">\delta</code>18O - b</em>, where <em>m</em> and <em>b</em> are the slope and intercept of <code>MWL</code>, respectively.
</p>


<h3>References</h3>

<p>Bowen et al. (2019) Isotopes in the water cycle: Regional- to global-Scale patterns and applications. <em>Annual Review of Earth and Planetary Sciences</em> <strong>47</strong> 453&ndash;479. <a href="https://doi.org/10.1146/annurev-earth-053018-060220">doi:10.1146/annurev-earth-053018-060220</a>.
</p>
<p>Dansgaard (1964) Stable isotopes in precipitation. <em>Tellus</em> <strong>16</strong> 436&ndash;468. <a href="https://doi.org/10.1111/j.2153-3490.1964.tb00181.x">doi:10.1111/j.2153-3490.1964.tb00181.x</a>.
</p>
<p>Landwehr &amp; Coplen (2006) Line-conditioned excess: A new method for characterizing stable hydrogen and oxygen isotope ratios in hydrologic systems. In <em>Isotopes in Environmental Studies</em>, International Atomic Energy Agency, 132&ndash;135. <a href="http://www-pub.iaea.org/MTCD/publications/PDF/CSP_26_web.pdf">http://www-pub.iaea.org/MTCD/publications/PDF/CSP_26_web.pdf</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>O = runif(10, -15, -2)
H = O * 8 + 10 + rnorm(10, 0, 6)
d = dex(data.frame(H, O), form = "both")
print(d)
</code></pre>

<hr>
<h2 id='GMWL'>
Global Meteoric Water Line
</h2><span id='topic+GMWL'></span>

<h3>Description</h3>

<p>Parameters for the Global Meteoric Water Line fit to a global precipitation compilation in Bowen, et al. (2019).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("GMWL")</code></pre>


<h3>Format</h3>

<p>The format is:
num [1:6] slope, intercept, average d18O, sum of squares in d18O, root mean square error, number of samples
</p>


<h3>Source</h3>

<p>Bowen et al. (2019) Isotopes in the water cycle: Regional- to global-Scale patterns and applications. <em>Annual Review of Earth and Planetary Sciences</em> <strong>47</strong> 453&ndash;479. <a href="https://doi.org/10.1146/annurev-earth-053018-060220">doi:10.1146/annurev-earth-053018-060220</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(GMWL)
</code></pre>

<hr>
<h2 id='iso'>
Iso Object
</h2><span id='topic+iso'></span>

<h3>Description</h3>

<p>Creates objects of type &quot;iso&quot; 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iso(H, O, Hsd, Osd, HOc = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="iso_+3A_h">H</code></td>
<td>

<p>numeric. Hydrogen isotope value or vector of hydrogen isotope values.
</p>
</td></tr>
<tr><td><code id="iso_+3A_o">O</code></td>
<td>

<p>numeric. Oxygen isotope value or vector of oxygen isotope values.
</p>
</td></tr>
<tr><td><code id="iso_+3A_hsd">Hsd</code></td>
<td>

<p>numeric. 1 standard deviation uncertainty of <code>H</code> (value or vector of values).
</p>
</td></tr>
<tr><td><code id="iso_+3A_osd">Osd</code></td>
<td>

<p>numeric. 1 standard deviation uncertainty of <code>O</code> (value or vector of values).
</p>
</td></tr>
<tr><td><code id="iso_+3A_hoc">HOc</code></td>
<td>

<p>numeric. Covariance of <code>H</code> and <code>O</code> uncertainties.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class &ldquo;iso&rdquo;, a data.frame containing the provided values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>obs = iso(-30, -5, 2, 0.2, 0.3)
str(obs)
</code></pre>

<hr>
<h2 id='isoWater'>Discovery, Retrieval, and Analysis of Water Isotope Data</h2><span id='topic+isoWater'></span>

<h3>Description</h3>

<p>wiDB_ functions provide interface to the public API of the wiDB: <a href="https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md">https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md</a>. Build, check and submit queries, and receive and  unpack responses. Data analysis functions support Bayesian  inference of the source and source isotope composition of water  samples that may have experienced evaporation. Algorithms adapted from Bowen et al. (2018, <a href="https://doi.org/10.1007/s00442-018-4192-5">doi:10.1007/s00442-018-4192-5</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Gabriel Bowen <a href="mailto:gabe.bowen@utah.edu">gabe.bowen@utah.edu</a>  
<strong>Authors</strong>: Gabriel Bowen
</p>

<hr>
<h2 id='mixSource'>
Water Source as a Mixture
</h2><span id='topic+mixSource'></span>

<h3>Description</h3>

<p>Given isotopic compositions of two or more potential sources, generate a posterior sample of source mixtures conditioned on one or more sample values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mixSource(obs, sources, slope, prior = rep(1,nrow(sources)), shp = 1, 
            eprior = c(0, 15), ngens = 1e5, ncores = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mixSource_+3A_obs">obs</code></td>
<td>

<p><code><a href="#topic+iso">iso</a></code> object containing isotope values for one or more samples.
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_sources">sources</code></td>
<td>

<p><code><a href="#topic+iso">iso</a></code> object containing isotope values for two or more sources which may have contributed to the observed samples.
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_slope">slope</code></td>
<td>

<p>numeric. Vector of length two specifying prior parameters for the evaporation line slope (mean, standard deviation).
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_prior">prior</code></td>
<td>

<p>numeric. Vector of length equal to the number of sources, giving prior estimates of relative contributions of different sources.
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_shp">shp</code></td>
<td>

<p>numeric. Shape parameter constant used in specifying prior estimates of source contributions (see Details). 
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_eprior">eprior</code></td>
<td>

<p>numeric. Vector of length 2 giving prior estimates of maximum and minimum oxygen isotope evaporation effect.
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_ngens">ngens</code></td>
<td>

<p>integer. Number of posterior samples to obtain (per chain).
</p>
</td></tr>
<tr><td><code id="mixSource_+3A_ncores">ncores</code></td>
<td>

<p>integer. Number of cores to use for parallel processing.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Dirichlet distribution is used to represent the fractional contribution of each source. The prior estimate is a Dirchlet where the shape parameter for source <code>i</code> is given by <code>prior[i] / min(prior) * shp</code>.
</p>
<p>If <code>ncores</code> = 1, three chains will be run on a single core. If <code>ncores</code> &gt; 1, <code>ncores</code> chains will be run in parallel on <code>ncores</code> cores. 
</p>


<h3>Value</h3>

<p>Returns an object of class &ldquo;mixSource&rdquo;, a list containing:
</p>
<table>
<tr><td><code>summary</code></td>
<td>

<p>matrix. Summary table of JAGS MCMC results, including parameter posterior distributions and convergence statistics.
</p>
</td></tr>
<tr><td><code>results</code></td>
<td>

<p>data.frame. Posterior samples of model parameters.
</p>

<dl>
<dt>mixture_d2H</dt><dd><p>Hydrogen isotopic composition of unevaporated source mixture.</p>
</dd>
<dt>mixture_d18O</dt><dd><p>Oxygen isotopic composition of unevaporated source mixture.</p>
</dd>
<dt>sX_fraction</dt><dd><p>Fractional contribution of each source.</p>
</dd>
<dt>S</dt><dd><p>Evaporation line slope.</p>
</dd>
<dt>E</dt><dd><p>Evaporation index, equal to the difference between the sample and unevaporated source mixture oxygen isotope values.</p>
</dd>
</dl>

</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>#Prep sources
O = runif(3, -15, -2)
H = O * 8 + 10 + rnorm(3, 0, 6)
sources = iso(H, O, 1, 0.2, 0.17)

#Sample data
obs = iso(-60, -6, 0.5, 0.1, 0)

#Evaporation slope
slope = c(5, 0.3)

#Run and report...likely not converged!
ws = mixSource(obs, sources, slope, ngens = 1e3)
ws$summary

#A traceplot
plot(ws$results$mixture_d18O[1:1000], type = "l")
lines(ws$results$mixture_d18O[1001:2000], col = 2)
lines(ws$results$mixture_d18O[2001:3000], col = 3)
</code></pre>

<hr>
<h2 id='mwl'>
Mwl Object
</h2><span id='topic+mwl'></span>

<h3>Description</h3>

<p>Creates objects of type &quot;mwl&quot; containing statistics for a meteoric water line in H and O isotope space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mwl(HO, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mwl_+3A_ho">HO</code></td>
<td>

<p>data.frame. Hydrogen (column 1) and oxygen (column 2) isotope values for 3 or more water samples.
</p>
</td></tr>
<tr><td><code id="mwl_+3A_plot">plot</code></td>
<td>

<p>logical. Plot the data, MWL, and standard error of prediction?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>mwl</code> will return an error if fewer than 3 sample values are provided and a warning if fewer than 10 samples are provided or if the correlation coefficient between H and O values is less than 0.7. Sample values should span a broad enough range of isotope values to strongly constrain the MWL.
</p>
<p>Model II (reduced major axis) regression is used to accommodate errors on both isotope values.
</p>


<h3>Value</h3>

<p>Returns an object of class &ldquo;mwl&rdquo;, a numeric vector containing meteoric water line statistics. See <code><a href="#topic+mwlSource">mwlSource</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>O = runif(10, -15, -2)
H = O * 8 + 10 + rnorm(10, 0, 6)
MWL = mwl(data.frame(H, O))
str(MWL)
</code></pre>

<hr>
<h2 id='mwlSource'>
Water Source Using Meteoric Water Line
</h2><span id='topic+mwlSource'></span>

<h3>Description</h3>

<p>Given parameters describing a meteoric water line in H-O isotope space, generate a posterior sample of unevaporated source water values conditioned on one or more sample values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mwlSource(obs, MWL = NULL, slope, stype = 1, ngens=1e4, ncores = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mwlSource_+3A_obs">obs</code></td>
<td>

<p><code><a href="#topic+iso">iso</a></code> object containing isotope values for one or more samples.
</p>
</td></tr>
<tr><td><code id="mwlSource_+3A_mwl">MWL</code></td>
<td>

<p>numeric. Vector of length 6 containing parameters describing a meteoric water line (see Details).
</p>
</td></tr>
<tr><td><code id="mwlSource_+3A_slope">slope</code></td>
<td>

<p>numeric. Vector of length two specifying prior parameters for the evaporation line slope (mean, standard deviation).
</p>
</td></tr>
<tr><td><code id="mwlSource_+3A_stype">stype</code></td>
<td>

<p>integer. Line statistic used to constrain the source prior: 1 = confidence interval, 2 = prediction interval (see Details).
</p>
</td></tr>
<tr><td><code id="mwlSource_+3A_ngens">ngens</code></td>
<td>

<p>integer. Number of posterior samples to obtain (per chain).
</p>
</td></tr>
<tr><td><code id="mwlSource_+3A_ncores">ncores</code></td>
<td>

<p>integer. Number of cores to use for parallel processing.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The prior distribution of source values is constrained by <code>MWL</code>, which contains the parameters: slope, intercept, average d18O, sum of squares in d18O, root mean square error, and number of samples for an empirically-determined meteoric water line. This object can be created from a H and O isotope dataset using the function <code><a href="#topic+mwl">mwl</a></code>. The default value (if <code>MWL = NULL</code>) reflects the Global Meteoric Water Line estimated from a global precipitation compilation in Bowen, et al. (2019). <code>stype</code> determines how the source uncertainty about the MWL is calculated; the default (1, confidence interval) is appropriate if the source is best represented as an integrated mixture of the samples defining the MWL, whereas option 2 (prediction interval) is appropriate if the source is best represented as a single sample.
</p>
<p>If <code>ncores</code> = 1, three chains will be run on a single core. If <code>ncores</code> &gt; 1, <code>ncores</code> chains will be run in parallel on <code>ncores</code> cores. 
</p>


<h3>Value</h3>

<p>Returns an object of class &ldquo;mwlSource&rdquo;, a list containing:
</p>
<table>
<tr><td><code>summary</code></td>
<td>

<p>matrix. Summary table of JAGS MCMC results, including parameter posterior distributions and convergence statistics.
</p>
</td></tr>
<tr><td><code>results</code></td>
<td>

<p>data.frame. Posterior samples of model parameters.
</p>

<dl>
<dt>source_d2H</dt><dd><p>Hydrogen isotopic composition of unevaporated source.</p>
</dd>
<dt>source_d18O</dt><dd><p>Oxygen isotopic composition of unevaporated source.</p>
</dd>
<dt>S</dt><dd><p>Evaporation line slope.</p>
</dd>
<dt>E</dt><dd><p>Evaporation index, equal to the difference between the sample and unevaporated source mixture oxygen isotope values.</p>
</dd>
</dl>

</td></tr>
</table>


<h3>References</h3>

<p>Bowen et al. (2019) Isotopes in the water cycle: Regional- to global-Scale patterns and applications. <em>Annual Review of Earth and Planetary Sciences</em> <strong>47</strong> 453&ndash;479. <a href="https://doi.org/10.1146/annurev-earth-053018-060220">doi:10.1146/annurev-earth-053018-060220</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Prep MWL
O = runif(10, -15, -2)
H = O * 8 + 10 + rnorm(10, 0, 6)
MWL = mwl(data.frame(H, O), plot = FALSE)

#Sample data
obs = iso(-60, -6, 0.5, 0.1, 0)

#Evaporation slope
slope = c(5, 0.3)

#Run and report...likely not converged!
ws = mwlSource(obs, MWL, slope, ngens = 1e3)
ws$summary

#A traceplot 
plot(ws$results$source_d18O[1:1000], type = "l")
lines(ws$results$source_d18O[1001:2000], col = 2)
lines(ws$results$source_d18O[2001:3000], col = 3)
</code></pre>

<hr>
<h2 id='wiDB_data'>
Obtain data from wiDB using a query 
</h2><span id='topic+wiDB_data'></span>

<h3>Description</h3>

<p>Obtain data from wiDB using a query 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wiDB_data(minLat = NULL, maxLat = NULL, minLong = NULL, 
  maxLong = NULL, minElev = NULL, maxElev = NULL, minDate = NULL, 
  maxDate = NULL, countries = NULL, states = NULL, types = NULL, 
  projects = NULL, fields = NULL, tmpdir = tempdir(), clean = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wiDB_data_+3A_minlat">minLat</code></td>
<td>

<p>numeric. Minimum latitude for query region, in decimal degrees. South negative.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_maxlat">maxLat</code></td>
<td>

<p>numeric. Maximum latitude for query region, in decimal degrees. South negative.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_minlong">minLong</code></td>
<td>

<p>numeric. Minimum longitude for query region, in decimal degrees. West negative.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_maxlong">maxLong</code></td>
<td>

<p>numeric. Maximum longitude for query region, in decimal degrees. West negative.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_minelev">minElev</code></td>
<td>

<p>numeric. Minimum elevation for query. Meters.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_maxelev">maxElev</code></td>
<td>

<p>numeric. Maximum elevation for query. Meters.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_mindate">minDate</code></td>
<td>

<p>character. Minimum date for query. Format: &quot;YYYY-MM-DD&quot;
</p>
</td></tr>  
<tr><td><code id="wiDB_data_+3A_maxdate">maxDate</code></td>
<td>

<p>character. Maximum date for query. Format: &quot;YYYY-MM-DD&quot;
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_countries">countries</code></td>
<td>

<p>character. Vector of one or more two-letter country codes for query.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_states">states</code></td>
<td>

<p>character. Vector of one or more two-letter state or province codes for query.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_types">types</code></td>
<td>

<p>character. Vector of one or more sample types for query. See vocabulary in the <a href="https://wateriso.utah.edu/waterisotopes/pages/spatial_db/contribute.html">wiDB template</a>.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_projects">projects</code></td>
<td>

<p>character. Vector of one or more project codes for query.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_fields">fields</code></td>
<td>

<p>character. Vector of one or more data fields to return from database. If omitted, returns all default fields. See <a href="https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md">here</a> for details.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_tmpdir">tmpdir</code></td>
<td>

<p>character. Directory path to use for unpacking data object.
</p>
</td></tr>
<tr><td><code id="wiDB_data_+3A_clean">clean</code></td>
<td>

<p>logical. Remove working files after data object is unpacked?
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>One or more arguments must be provided. 
</p>


<h3>Value</h3>

<p>named list. See <a href="https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md">here</a> for details.
</p>
<table>
<tr><td><code>data</code></td>
<td>
<p>dataframe. Data records for isotope samples returned by query.</p>
</td></tr>
<tr><td><code>projects</code></td>
<td>
<p>dataframe. Provenance information associated with samples returned by query.</p>
</td></tr>
</table>
<p>Note that some data are embargoed or have been shared under a license that prohibits redistribution. In dataframe <em>data</em> values of 9999 indicate that a measurement is available but can't be obtained directly from the wiDB. Project information in <em>projects</em> can be used to contact or visit the primary data source to learn about access to these data. Values of -9999 in <em>data</em> indicate no measurement.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Download data for US precipitation in the 1990s
vals = wiDB_data(minDate = "1990-01-01", maxDate = "2000-01-01", 
  countries = "US", types = "Precipitation")

#Download data for US Rivers and streams, requesting a subset of data fields
vals = wiDB_data(minDate = "1980-01-01", maxDate = "2000-01-01", 
  countries = "US", types = "River_or_stream", 
  fields = "Site_Name,Latitude,Longitude,d2H")
</code></pre>

<hr>
<h2 id='wiDB_sites'>
Obtain information on wiDB sites using a query 
</h2><span id='topic+wiDB_sites'></span>

<h3>Description</h3>

<p>Obtain information on wiDB sites using a query 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wiDB_sites(minLat = NULL, maxLat = NULL, minLong = NULL, maxLong = NULL,
  minElev = NULL, maxElev = NULL, minDate = NULL, maxDate = NULL, 
  countries = NULL, states = NULL, types = NULL, projects = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wiDB_sites_+3A_minlat">minLat</code></td>
<td>

<p>numeric. Minimum latitude for query region, in decimal degrees. South negative.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_maxlat">maxLat</code></td>
<td>

<p>numeric. Maximum latitude for query region, in decimal degrees. South negative.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_minlong">minLong</code></td>
<td>

<p>numeric. Minimum longitude for query region, in decimal degrees. West negative.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_maxlong">maxLong</code></td>
<td>

<p>numeric. Maximum longitude for query region, in decimal degrees. West negative.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_minelev">minElev</code></td>
<td>

<p>numeric. Minimum elevation for query. Meters.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_maxelev">maxElev</code></td>
<td>

<p>numeric. Maximum elevation for query. Meters.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_mindate">minDate</code></td>
<td>

<p>character. Minimum date for query. Format: &quot;YYYY-MM-DD&quot;
</p>
</td></tr>  
<tr><td><code id="wiDB_sites_+3A_maxdate">maxDate</code></td>
<td>

<p>character. Maximum date for query. Format: &quot;YYYY-MM-DD&quot;
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_countries">countries</code></td>
<td>

<p>character. Vector of one or more two-letter country codes for query.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_states">states</code></td>
<td>

<p>character. Vector of one or more two-letter state or province codes for query.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_types">types</code></td>
<td>

<p>character. Vector of one or more sample types for query. See vocabulary in the <a href="https://wateriso.utah.edu/waterisotopes/pages/spatial_db/contribute.html">wiDB template</a>.
</p>
</td></tr>
<tr><td><code id="wiDB_sites_+3A_projects">projects</code></td>
<td>

<p>character. Vector of one or more project codes for query.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>One or more arguments must be provided.
</p>


<h3>Value</h3>

<p>dataframe. Contains location and summary information for all wiDB sites returned by query. See <a href="https://github.com/SPATIAL-Lab/isoWater/blob/master/Protocol.md">here</a> for details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Find all sites with tap water data since September, 2019
sites = wiDB_sites(minDate = "2019-09-01", types = "Tap")
</code></pre>

<hr>
<h2 id='wiDB_values'>
Obtain value lists for categorical fields in wiDB
</h2><span id='topic+wiDB_values'></span>

<h3>Description</h3>

<p>Obtain value lists for categorical fields in wiDB
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wiDB_values(fields)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wiDB_values_+3A_fields">fields</code></td>
<td>

<p>character. One or more field names for which to obtain value lists. Limited to: &quot;countries&quot;, &quot;states&quot;, &quot;types&quot;, and &quot;projects&quot;.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>named list. Each element is a vector or dataframe containing values for the named field.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#List all projects in the wiDB
wiDB_values("projects")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
