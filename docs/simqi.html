<!DOCTYPE html><html lang="en"><head><title>Help for package simqi</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {simqi}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#kgss_sample'><p>A Sample of Korean General Social Survey Data, 2023</p></a></li>
<li><a href='#sim_qi'><p>Get simulations from a model object</p></a></li>
<li><a href='#som_sample'><p>A Sample of SOM Institute Data, 2019-2020</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simulate Quantities of Interest from Regression Models</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Steve Miller &lt;steve@svmiller.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>This is an all-encompassing suite to facilitate the simulation of
    so-called quantities of interest by way of a multivariate normal distribution
    of the regression model's coefficients and variance-covariance matrix.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>stevemisc, tibble, methods</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-14 14:48:22 UTC; steve</td>
</tr>
<tr>
<td>Author:</td>
<td>Steve Miller <a href="https://orcid.org/0000-0003-4072-6263"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-17 12:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='kgss_sample'>A Sample of Korean General Social Survey Data, 2023</h2><span id='topic+kgss_sample'></span>

<h3>Description</h3>

<p>This is a simple sample of the Korean General Social Survey (KGSS) data from
2023.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kgss_sample
</code></pre>


<h3>Format</h3>

<p>A data frame with the following variables.
</p>

<dl>
<dt><code>year</code></dt><dd><p>a numeric vector communicating the year of the survey</p>
</dd>
<dt><code>respid</code></dt><dd><p>a numeric vector communicating a unique identifier for
the respondent</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric vector communicating the age of the respondent</p>
</dd>
<dt><code>female</code></dt><dd><p>a numeric vector communicating whether the respondent
self-identifies as a woman or a man</p>
</dd>
<dt><code>employed</code></dt><dd><p>a dummy variable for whether the respondent is employed or 'not employed'</p>
</dd>
<dt><code>unived</code></dt><dd><p>a dummy variable for whether the respondent has a four-year university degree</p>
</dd>
<dt><code>netuse</code></dt><dd><p>a numeric vector for hours of internet usage for the respondent</p>
</dd>
<dt><code>ideo</code></dt><dd><p>a numeric vector communicating the ideology of the
respondent on a 1-5 scale. 1 = &quot;very liberal&quot;. 5 = &quot;very conservative&quot;</p>
</dd>
<dt><code>si_gbh</code></dt><dd><p>a numeric vector of the extent to which the respondent considers
gender-based hatred (toward both men and women) to be a serious issue. 1 = 'very serious'. 5 = 'not serious at all'</p>
</dd>
<dt><code>satisfin</code></dt><dd><p>a numeric vector communicating the respondent's satisfaction
with their financial situation. 1 = 'very dissatisfied'. 5 = 'very satisfied'</p>
</dd>
<dt><code>fp_mord</code></dt><dd><p>a numeric vector for whether the respondent thinks maintaining order is the most important
priority for South Korea.</p>
</dd>
<dt><code>fpcat</code></dt><dd><p>a character vector for what the respondent believes is the
most important priority for South Korea. Possible values: &quot;Maintain Order&quot;,
&quot;Fight Rising Prices&quot;, &quot;Give People More Say&quot;, &quot;Protect Freedom of Speech&quot;.</p>
</dd>
<dt><code>cntryaffq</code></dt><dd><p>a character vector for the country to which the respondent
feels closest. Possible values include &quot;USA&quot;, &quot;China&quot;, &quot;North Korea&quot;, &quot;Russia&quot;, and &quot;Japan&quot;.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Missingness is substantial for one reason or the other. The data are complete
cases only. It's not problematic for this purpose, but I did want to make a
note of it.
</p>
<p>Data were created based on the English version of the data made available by
the Survey Research Center at Sung Kyun Kwan University.
</p>

<hr>
<h2 id='sim_qi'>Get simulations from a model object</h2><span id='topic+sim_qi'></span>

<h3>Description</h3>

<p><code>sim_qi()</code> is a function to simulate quantities of interest
from a regression model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_qi(
  mod,
  nsim = 1000,
  newdata,
  original_scale = TRUE,
  return_newdata = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sim_qi_+3A_mod">mod</code></td>
<td>
<p>a model object</p>
</td></tr>
<tr><td><code id="sim_qi_+3A_nsim">nsim</code></td>
<td>
<p>number of simulations to be run, defaults to 1,000</p>
</td></tr>
<tr><td><code id="sim_qi_+3A_newdata">newdata</code></td>
<td>
<p>A data frame with a hypothetical prediction grid.
If absent, defaults to the model frame.</p>
</td></tr>
<tr><td><code id="sim_qi_+3A_original_scale">original_scale</code></td>
<td>
<p>logical, defaults to TRUE. If TRUE, the ensuing
simulations are returned on their original scale. If FALSE, the ensuing
simulations are transformed to a more practical/intuitive quantity that is
potentially more intuitive for the user (e.g. a probability for a logistic
regression). This argument is ignored in the context of
simulations on the linear model.</p>
</td></tr>
<tr><td><code id="sim_qi_+3A_return_newdata">return_newdata</code></td>
<td>
<p>logical, defaults to FALSE. If TRUE, the output returns
additional columns corresponding with the inputs provided to <code>newdata</code>.
This may facilitate easier transformation along with greater clarity as to
what the simulations correspond.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>sim_qi()</code> returns a data frame (as a <code>tibble</code>) with the
quantities of interest and identifying information about the particular
simulation number. For linear models, or simple generalized linear models
where the dependent variable is either &quot;there&quot; or &quot;not there&quot;, the quantity
of interest returned is a single column (called <code>y</code>). For models where the
underlying estimation of the dependent variable is, for lack of a better
term, &quot;multiple&quot; (e.g. ordinal models with the basic proportional odds
assumption), the columns returned correspond with the number of distinct
values of the outcome. For example, an ordinal model where there are five
unique values of the dependent variable will return columns <code>y1</code>, <code>y2</code>, <code>y3</code>,
<code>y4</code>, and <code>y5</code>.
</p>


<h3>Supported Models</h3>


<ol>
<li><p> Linear models produced by <code>lm()</code> in base R.
</p>
</li>
<li><p> Generalized linear models produced by <code>glm()</code>. Families (links) include:
</p>

<ul>
<li><p> Binomial (logit, probit)
</p>
</li>
<li><p> Poisson (log)
</p>
</li></ul>

</li>
<li><p> Cumulative link models produced by <span class="pkg">ordinal</span> package.
</p>

<ul>
<li><p> Links: logit, probit
</p>
</li></ul>

</li></ol>



<h4>Other Details</h4>

<p>Specifying a variable in <code>newdata</code> with the exact same name as the
dependent variable (e.g. <code>mpg</code> in the simple example provided in this
documentation file) is necessary for matrix multiplication purposes. If you
set <code>return_newdata</code> to <code>TRUE</code>, you should not interpret the column matching
the name of the dependent variable as communicating the kind of information
you want from this function. That particular column is just a simple
placeholder you need for matrix multiplication. The information you want will
always be in a column (or columns) named (or starting with) <code>y</code>.
</p>
<p>This function builds in an implicit assumption that your dependent variable
in the regression model is not called <code>y</code>.
</p>
<p>For ordinal models, I recommend setting <code>original_scale</code> to be FALSE. The
function, underneath the hood, is actually calculating things on the level of
the probability. It's just transforming back to a logit or a probit, if that
is what you say you want.
</p>
<p>When <code>original_scale</code> is <code>TRUE</code> for Poisson models, the quantity returned is
a logged lambda. When <code>FALSE</code>, this quantity is exponentiated.
</p>



<h3>Examples</h3>

<pre><code class='language-R'>
set.seed(8675309)

Data &lt;- mtcars
Data$region &lt;- c("Japan", "Japan", "Japan",
                 "USA", "USA", "USA", "USA",
                 "Europe", "Europe", "Europe", "Europe",
                 "Europe", "Europe", "Europe",
                 "USA", "USA", "USA", "Europe",
                 "Japan", "Japan", "Japan",
                 "USA", "USA", "USA", "USA",
                 "Europe", "Europe", "Europe",
                 "USA", "Europe", "Europe", "Europe")

M1 &lt;- lm(mpg ~ hp + region, Data)

sim_qi(M1, 10)

newdat &lt;- data.frame(mpg = 0, region = c("Europe", "Japan", "USA"), hp = 123)

sim_qi(M1, nsim = 100, newdat, return_newdata = TRUE)

</code></pre>

<hr>
<h2 id='som_sample'>A Sample of SOM Institute Data, 2019-2020</h2><span id='topic+som_sample'></span>

<h3>Description</h3>

<p>This is a simple sample of the SOM (Society-Opinion-Media) data that is
run by the University of Gothenburg. The sample comes from the cumulative data
set (v. 2021-1) for observations in 2019-2020. The SOM Institute
Cumulative Dataset contains data from the National SOM study, which is an
annually repeated cross-sectional self-administered mail survey conducted in
Sweden since 1986. I think of it as a Swedish corollary to the General Social
Survey in the United States. I'll use it for it various testing purposes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>som_sample
</code></pre>


<h3>Format</h3>

<p>A data frame with 2841 observations on the following 14 variables.
</p>

<dl>
<dt><code>year</code></dt><dd><p>a numeric vector communicating the year of the survey</p>
</dd>
<dt><code>idnr</code></dt><dd><p>a numeric vector communicating a unique identifier for
the respondent</p>
</dd>
<dt><code>lan</code></dt><dd><p>a character vector for the county in which the respondent
lives</p>
</dd>
<dt><code>lptrust</code></dt><dd><p>a numeric vector communicating what I term &quot;political trust&quot;
of the respondent. I include more information about this variable in the details
section.</p>
</dd>
<dt><code>satisdem</code></dt><dd><p>a numeric vector, ranging from 1-4, communicating
satisfaction with democracy in Sweden. 1 = not at all satisfied. 4 =
very satisfied.</p>
</dd>
<dt><code>trust_rf</code></dt><dd><p>a numeric vector, ranging from 1-5, communicating
trust in the royal family of Sweden. 1 = very low trust. 5 = very high trust.</p>
</dd>
<dt><code>attitude_eu</code></dt><dd><p>a numeric vector, ranging from 1-5, communicating
the attitude of the respondent toward the European Union. 1 = very negative.
5 = very positive.</p>
</dd>
<dt><code>age</code></dt><dd><p>a numeric vector communicating the age of the respondent</p>
</dd>
<dt><code>female</code></dt><dd><p>a numeric vector communicating whether the respondent
self-identifies as a woman or a man</p>
</dd>
<dt><code>edu3</code></dt><dd><p>a numeric vector ranging from 1-3 communicating an
education-level attained. 1 = &quot;low&quot; (below grade 9). 2 = &quot;medium&quot; (above
grade 9, but below university). 3 = &quot;high&quot; (i.e. at least some university)</p>
</dd>
<dt><code>ideo</code></dt><dd><p>a numeric vector communicating the ideology of the
respondent on a 1-5 scale. 1 = &quot;clearly to the left&quot;. 5 = &quot;clearly to the
right&quot;</p>
</dd>
<dt><code>hinc</code></dt><dd><p>a numeric vector communicating the gross household income
of the respondent on a 1-5 scale. 1 = &quot;very low&quot;. 5 = &quot;very high&quot;.</p>
</dd>
<dt><code>resarea</code></dt><dd><p>a numeric vector communicating the area where the
respondent lives. 1 = &quot;rural area&quot;. 2 = &quot;village&quot;. 3 = &quot;city/town&quot;. 4 =
&quot;Stockholm/Gothenburg/Malmö&quot;.</p>
</dd>
<dt><code>interestp</code></dt><dd><p>a numeric vector communicating the respondent's
interest in politics. 1 = &quot;not at all interested&quot;. 4 = &quot;very interested&quot;.</p>
</dd>
</dl>



<h3>Details</h3>

<p>Missingness is substantial for one reason or the other. The data are complete
cases only. It's not problematic for this purpose, but I did want to make a
note of it.
</p>
<p>The political trust variable is a simple latent estimate derived from a graded
response model of the items from the original data on trust in government
(<code>aa10a</code>), trust in parliament (<code>aa10n</code>), trust in the political parties
(<code>aa10q</code>), and trust in Swedish politicians (<code>ab12</code>). The first three items
were on 1-5 scales while the last one (about Swedish politicians) is on a 1-4
scale. All items were reverse coded from their original scales and the user
should interpret the ensuing latent estimate to be communicating higher
political trust with higher values on the scale. The user is also free to
question just how valid of a measure of political trust this is, though I will
only add that the factor loadings for all four items were as low as .81 and as
high as .91. The proportional variance is .764.
</p>
<p>The variables for satisfaction with democracy, trust in the royal family,
attitude about the European Union, and interest in politics are reverse coded
from their original scale.
</p>
<p>SOM is unique from other long-standing survey data sets of which I'm aware
by allowing respondents to self-identify as some other gender. In 2019 and
2020, only 71 of 21,195 respondents self-identified this way (before any
other case-exclusions). I remove these observations from the data.
</p>
<p>If I understand the codebook correctly, the household income variable is coded
by SOM's researchers and is not a self-placement by the respondent.
</p>
<p>You may want to explicitly factor the residential area variable, though this
is basically how it was presented in the data.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
