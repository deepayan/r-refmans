<!DOCTYPE html><html><head><title>Help for package etrm</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {etrm}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#etrm-package'><p>etrm: Energy Trading and Risk Management</p></a></li>
<li><a href='#cppi'><p>Constant Proportion Portfolio Insurance (CPPI)</p></a></li>
<li><a href='#CPPI-class'><p>An S4 class for the CPPI hedging strategy</p></a></li>
<li><a href='#dppi'><p>Dynamic Proportion Portfolio Insurance (DPPI)</p></a></li>
<li><a href='#DPPI-class'><p>An S4 class for the DPPI hedging strategy</p></a></li>
<li><a href='#GenericStrat-class'><p>An S4 VIRTUAL parent class for the hedging strategy classes in etrm</p></a></li>
<li><a href='#msfc'><p>Maximum Smoothness Forward Curve (MSFC)</p></a></li>
<li><a href='#MSFC-class'><p>An S4 class for the Maximum Smoothness Forward Curve (MSFC) in etrm</p></a></li>
<li><a href='#obpi'><p>Option Based Portfolio Insurance (OBPI)</p></a></li>
<li><a href='#OBPI-class'><p>An S4 class for the OBPI hedging strategy</p></a></li>
<li><a href='#plot,GenericStrat-method'><p>S4 method for the plot generic for portfolio insurance strategy classes</p></a></li>
<li><a href='#plot,MSFC-method'><p>S4 method for the plot generic for class &quot;MSFC&quot;</p></a></li>
<li><a href='#powcal'><p>Historical daily closing prices for 11 calendar year power futures contracts</p></a></li>
<li><a href='#powfutures130513'><p>Closing prices for power futures contracts at trading date 2013-05-13</p></a></li>
<li><a href='#powpriors130513'><p>Example priors at trading date 2015-05-13</p></a></li>
<li><a href='#show,GenericStrat-method'><p>S4 method for the show generic for portfolio insurance strategy classes</p></a></li>
<li><a href='#show,MSFC-method'><p>S4 method for the show generic for class &quot;MSFC&quot;</p></a></li>
<li><a href='#shpi'><p>Step Hedge Portfolio Insurance (SHPI)</p></a></li>
<li><a href='#SHPI-class'><p>An S4 class for the SHPI hedging strategy</p></a></li>
<li><a href='#slpi'><p>Stop Loss Portfolio Insurance (SLPI)</p></a></li>
<li><a href='#SLPI-class'><p>An S4 class for the SLPI hedging strategy</p></a></li>
<li><a href='#summary,GenericStrat-method'><p>S4 method for the summary generic for portfolio insurance strategy classes</p></a></li>
<li><a href='#summary,MSFC-method'><p>S4 method for the summary generic for class &quot;MSFC&quot;</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Energy Trading and Risk Management</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-22</td>
</tr>
<tr>
<td>Author:</td>
<td>Anders D. Sleire</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anders D. Sleire &lt;sleire@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a collection of functions to perform core tasks within
    Energy Trading and Risk Management (ETRM). Calculation of maximum smoothness 
    forward price curves for electricity and natural gas contracts with flow delivery, as presented in
    F. E. Benth, S. Koekebakker, and F. Ollmar (2007) &lt;<a href="https://doi.org/10.3905%2Fjod.2007.694791">doi:10.3905/jod.2007.694791</a>&gt;
    and F. E. Benth,  J. S. Benth,  and S. Koekebakker (2008) &lt;<a href="https://doi.org/10.1142%2F6811">doi:10.1142/6811</a>&gt;.
    Portfolio insurance trading strategies for price risk management in the forward market, see
    F. Black (1976) &lt;<a href="https://doi.org/10.1016%2F0304-405X%2876%2990024-6">doi:10.1016/0304-405X(76)90024-6</a>&gt;, 
    T. Bjork (2009) <a href="https://EconPapers.repec.org/RePEc:oxp:obooks:9780199574742">https://EconPapers.repec.org/RePEc:oxp:obooks:9780199574742</a>,  
    F. Black and R. W. Jones (1987) &lt;<a href="https://doi.org/10.3905%2Fjpm.1987.409131">doi:10.3905/jpm.1987.409131</a>&gt; and
    H. E. Leland (1980) <a href="http://www.jstor.org/stable/2327419">http://www.jstor.org/stable/2327419</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, reshape2, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown, markdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-22 13:35:24 UTC; anders</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-23 07:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='etrm-package'>etrm: Energy Trading and Risk Management</h2><span id='topic+etrm-package'></span>

<h3>Description</h3>

<p>Tools for energy market risk management (forward curves and trading strategies)
</p>


<h3>Author(s)</h3>

<p>Anders D. Sleire &lt;sleire@gmail.com&gt;
</p>


<h3>References</h3>

<p>F. E. Benth, S. Koekkebakker, and F. Ollmar.  Extracting and applying smooth forward curves from average-based commodity contracts with seasonal variation.The Journal of Derivatives, 15(1):52–66,2007b. https://doi.org/10.3905/jod.2007.694791
</p>
<p>F. E. Benth,  J. S. Benth,  and S. Koekebakker. Stochastic modelling of electricity and related markets,volume 11. World Scientific, 2008. https://doi.org/10.1142/6811
</p>
<p>F. Black. The pricing of commodity contracts.Journal of financial economics, 3(1):167–179, 1976. https://doi.org/10.1016/0304-405X(76)90024-6
</p>
<p>T. Bjork. Arbitrage Theory in Continuous Time.  Oxford University Press, 3 edition, 2009.  https://EconPapers.repec.org/RePEc:oxp:obooks:9780199574742
</p>
<p>F. Black and R. W. Jones. Simplifying portfolio insurance. The Journal of Portfolio Management, 14(1):48–51, 1987. https://doi.org/10.3905/jpm.1987.409131
</p>
<p>H. E. Leland. Who should buy portfolio insurance? The Journal of Finance, 35(2):581–594, 1980. http://www.jstor.org/stable/2327419
</p>

<hr>
<h2 id='cppi'>Constant Proportion Portfolio Insurance (CPPI)</h2><span id='topic+cppi'></span>

<h3>Description</h3>

<p>Implements CPPI strategy for commodity price risk management
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cppi(q, tdate, f, tper, rper, tcost = 0, int = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cppi_+3A_q">q</code></td>
<td>
<p>numeric value for quantity to be hedged, either positive (net buyer) or negative (net seller)</p>
</td></tr>
<tr><td><code id="cppi_+3A_tdate">tdate</code></td>
<td>
<p>date vector with trading days</p>
</td></tr>
<tr><td><code id="cppi_+3A_f">f</code></td>
<td>
<p>numeric futures price vector</p>
</td></tr>
<tr><td><code id="cppi_+3A_tper">tper</code></td>
<td>
<p>numeric target price markup/down to the price on the first trading day</p>
</td></tr>
<tr><td><code id="cppi_+3A_rper">rper</code></td>
<td>
<p>numeric risk factor as a percentage of the price on the first trading day</p>
</td></tr>
<tr><td><code id="cppi_+3A_tcost">tcost</code></td>
<td>
<p>numeric transaction costs pr unit</p>
</td></tr>
<tr><td><code id="cppi_+3A_int">int</code></td>
<td>
<p>TRUE/FALSE integer restriction on tradable volume</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the CPPI class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># CPPI for a buyer (seller), where stop loss is set 10% above (below) initial market price.

set.seed(5)
# GBM price process parameters
mu &lt;- 0.2
sigma &lt;- 0.1
S0 &lt;- 100

# time
Y &lt;- 2
N &lt;- 500
delta &lt;- Y/N
t &lt;- seq (0, 1, length = N + 1)

# price process and date vector
W &lt;- c(0, cumsum ( sqrt(delta) * rnorm (N)))
f_gbm &lt;- S0 * exp(mu * t + sigma * W)
tr_dates &lt;- seq(Sys.Date(), Sys.Date()+500, by = "day")

# implement cppi strategy for buyer
cppi_b &lt;- cppi(q = 10,
tdate = tr_dates,
f = f_gbm,
tper = 0.1,
rper = 0.1,
tcost = 0,
int = TRUE)

# implement cppi strategy for seller
cppi_s &lt;- cppi(q = - 10,
tdate = tr_dates,
f = f_gbm,
tper = - 0.1,
rper = 0.1,
tcost = 0,
int = TRUE)

</code></pre>

<hr>
<h2 id='CPPI-class'>An S4 class for the CPPI hedging strategy</h2><span id='topic+CPPI-class'></span>

<h3>Description</h3>

<p>An S4 class for the CPPI hedging strategy
</p>


<h3>Slots</h3>


<dl>
<dt><code>RiskFactor</code></dt><dd><p>The risk factor (cushion) used in the CPPI model</p>
</dd>
</dl>

<hr>
<h2 id='dppi'>Dynamic Proportion Portfolio Insurance (DPPI)</h2><span id='topic+dppi'></span>

<h3>Description</h3>

<p>Implements DPPI strategy for commodity price risk management
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dppi(q, tdate, f, tper, rper, tcost = 0, int = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dppi_+3A_q">q</code></td>
<td>
<p>numeric value for quantity to be hedged, either positive (net buyer) or negative (net seller)</p>
</td></tr>
<tr><td><code id="dppi_+3A_tdate">tdate</code></td>
<td>
<p>date vector with trading days</p>
</td></tr>
<tr><td><code id="dppi_+3A_f">f</code></td>
<td>
<p>numeric futures price vector</p>
</td></tr>
<tr><td><code id="dppi_+3A_tper">tper</code></td>
<td>
<p>numeric target price factor, markup/down to the price on the first trading day</p>
</td></tr>
<tr><td><code id="dppi_+3A_rper">rper</code></td>
<td>
<p>numeric risk factor as a percentage of the price on the first trading day</p>
</td></tr>
<tr><td><code id="dppi_+3A_tcost">tcost</code></td>
<td>
<p>numeric transaction costs pr unit</p>
</td></tr>
<tr><td><code id="dppi_+3A_int">int</code></td>
<td>
<p>TRUE/FALSE integer restriction on tradable volume</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the DPPI class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># DPPI for a buyer (seller), where stop loss is set 10% above (below) initial market price.

set.seed(5)
# GBM price process parameters
mu &lt;- 0.2
sigma &lt;- 0.1
S0 &lt;- 100

# time
Y &lt;- 2
N &lt;- 500
delta &lt;- Y/N
t &lt;- seq (0, 1, length = N + 1)

# price process and date vector
W &lt;- c(0, cumsum ( sqrt(delta) * rnorm (N)))
f_gbm &lt;- S0 * exp(mu * t + sigma * W)
tr_dates &lt;- seq(Sys.Date(), Sys.Date()+500, by = "day")

# implement dppi strategy for buyer
dppi_b &lt;- dppi(q = 10,
tdate = tr_dates,
f = f_gbm,
tper = 0.1,
rper = 0.1,
tcost = 0,
int = TRUE)

# implement dppi strategy for seller
dppi_s &lt;- dppi(q = - 10,
tdate = tr_dates,
f = f_gbm,
tper = - 0.1,
rper = 0.1,
tcost = 0,
int = TRUE)

</code></pre>

<hr>
<h2 id='DPPI-class'>An S4 class for the DPPI hedging strategy</h2><span id='topic+DPPI-class'></span>

<h3>Description</h3>

<p>An S4 class for the DPPI hedging strategy
</p>


<h3>Slots</h3>


<dl>
<dt><code>TargetPercent</code></dt><dd><p>A percentage of first trading day's market price used to set target price (cap or floor)</p>
</dd>
<dt><code>RiskFactor</code></dt><dd><p>The risk factor (cushion) used in the DPPI model</p>
</dd>
</dl>

<hr>
<h2 id='GenericStrat-class'>An S4 VIRTUAL parent class for the hedging strategy classes in etrm</h2><span id='topic+GenericStrat-class'></span>

<h3>Description</h3>

<p>An S4 VIRTUAL parent class for the hedging strategy classes in etrm
</p>


<h3>Slots</h3>


<dl>
<dt><code>Name</code></dt><dd><p>A string with the portfolio insurance strategy name</p>
</dd>
<dt><code>Volume</code></dt><dd><p>The quantity to be hedged</p>
</dd>
<dt><code>TargetPrice</code></dt><dd><p>The target price(s) for the portfolio (cap or floor)</p>
</dd>
<dt><code>TransCost</code></dt><dd><p>Transaction costs pr unit traded</p>
</dd>
<dt><code>TradeisInt</code></dt><dd><p>TUE/FALSE integer restriction on tradable volume, TRUE sets smallest transacted unit to 1</p>
</dd>
<dt><code>Results</code></dt><dd><p>Data frame with strategy results, daily values for market price, transactions, exposure, position, hedge and portfolio price</p>
</dd>
</dl>

<hr>
<h2 id='msfc'>Maximum Smoothness Forward Curve (MSFC)</h2><span id='topic+msfc'></span>

<h3>Description</h3>

<p>Creates a smooth forward curve from futures prices for a flow delivery
</p>


<h3>Usage</h3>

<pre><code class='language-R'>msfc(tdate, include, contract, sdate, edate, f, prior = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="msfc_+3A_tdate">tdate</code></td>
<td>
<p>trading date</p>
</td></tr>
<tr><td><code id="msfc_+3A_include">include</code></td>
<td>
<p>logical vector to determine if contracts should be included in calculation</p>
</td></tr>
<tr><td><code id="msfc_+3A_contract">contract</code></td>
<td>
<p>vector with contract names</p>
</td></tr>
<tr><td><code id="msfc_+3A_sdate">sdate</code></td>
<td>
<p>date vector with contract delivery start dates</p>
</td></tr>
<tr><td><code id="msfc_+3A_edate">edate</code></td>
<td>
<p>date vector with contract delivery end dates</p>
</td></tr>
<tr><td><code id="msfc_+3A_f">f</code></td>
<td>
<p>numeric vector with futures contract prices</p>
</td></tr>
<tr><td><code id="msfc_+3A_prior">prior</code></td>
<td>
<p>numeric vector with prior forward price curve</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the MSFC class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># calculate forward curve for synthetic futures contracts, without prior

# date for curve calculation and contract information
tdate &lt;- as.Date("2021-06-17")
include &lt;- rep(TRUE, 10)
contract &lt;- c("JUL-21", "AUG-21", "SEP-21", "OCT-21", "NOV-21", "DEC-21",
"Q1-22", "Q2-22", "Q3-22", "Q4-22")

sdate &lt;- as.Date(c("2021-07-01", "2021-08-01", "2021-09-01", "2021-10-01",
"2021-11-01", "2021-12-01", "2022-01-01", "2022-04-01", "2022-07-01", "2022-10-01"))

edate &lt;- as.Date(c("2021-07-30", "2021-08-31", "2021-09-30", "2021-10-31",
"2021-11-30", "2021-12-31", "2022-03-31", "2022-06-30", "2022-09-30", "2022-12-31"))

f &lt;- c(32.55, 32.50, 32.50, 32.08, 36.88, 39.80, 39.40, 25.20, 21.15, 29.50)

fwd_curve &lt;- msfc(tdate = tdate,
include = include,
contract = contract,
sdate = sdate,
edate = edate,
f = f)
</code></pre>

<hr>
<h2 id='MSFC-class'>An S4 class for the Maximum Smoothness Forward Curve (MSFC) in etrm</h2><span id='topic+MSFC-class'></span>

<h3>Description</h3>

<p>An S4 class for the Maximum Smoothness Forward Curve (MSFC) in etrm
</p>


<h3>Slots</h3>


<dl>
<dt><code>Name</code></dt><dd><p>A string with the acronym for Maximum Smoothness Forward Curve, &quot;MSFC&quot;</p>
</dd>
<dt><code>TradeDate</code></dt><dd><p>The trading date</p>
</dd>
<dt><code>BenchSheet</code></dt><dd><p>A data frame with futures contracts selected for calculation with MSFC computed prices</p>
</dd>
<dt><code>Polynomials</code></dt><dd><p>The number of polynomials in the MSFC spline</p>
</dd>
<dt><code>PriorFunc</code></dt><dd><p>A numeric vector with the prior function values</p>
</dd>
<dt><code>Results</code></dt><dd><p>A data frame with daily values for the calculated MSFC and contracts in &quot;BenchSheet&quot;</p>
</dd>
<dt><code>SplineCoef</code></dt><dd><p>List with coefficients for the polynomials in the MSFC spline</p>
</dd>
<dt><code>KnotPoints</code></dt><dd><p>Vector with spline knot points</p>
</dd>
<dt><code>CalcDat</code></dt><dd><p>Data frame extending &quot;Results&quot; with daily values for time vectors and polynomial coefficients used in calculation</p>
</dd>
</dl>

<hr>
<h2 id='obpi'>Option Based Portfolio Insurance (OBPI)</h2><span id='topic+obpi'></span>

<h3>Description</h3>

<p>Implements OBPI strategy for commodity price risk management
</p>


<h3>Usage</h3>

<pre><code class='language-R'>obpi(
  q,
  tdate,
  f,
  k = f[1],
  vol,
  r = 0,
  tdays = 250,
  daysleft,
  tcost = 0,
  int = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="obpi_+3A_q">q</code></td>
<td>
<p>numeric value for quantity to be hedged, either positive (net buyer) or negative (net seller)</p>
</td></tr>
<tr><td><code id="obpi_+3A_tdate">tdate</code></td>
<td>
<p>date vector with trading days</p>
</td></tr>
<tr><td><code id="obpi_+3A_f">f</code></td>
<td>
<p>numeric futures price vector</p>
</td></tr>
<tr><td><code id="obpi_+3A_k">k</code></td>
<td>
<p>numeric value for option strike price</p>
</td></tr>
<tr><td><code id="obpi_+3A_vol">vol</code></td>
<td>
<p>value for volatility</p>
</td></tr>
<tr><td><code id="obpi_+3A_r">r</code></td>
<td>
<p>value for interest rate</p>
</td></tr>
<tr><td><code id="obpi_+3A_tdays">tdays</code></td>
<td>
<p>integer assumed number of trading days per year</p>
</td></tr>
<tr><td><code id="obpi_+3A_daysleft">daysleft</code></td>
<td>
<p>integer with days left to option expiry</p>
</td></tr>
<tr><td><code id="obpi_+3A_tcost">tcost</code></td>
<td>
<p>numeric transaction costs pr unit</p>
</td></tr>
<tr><td><code id="obpi_+3A_int">int</code></td>
<td>
<p>TRUE/ FALSE integer restriction on tradable volume</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the OBPI class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># OBPI for a buyer (seller), where stop loss is set 10% above (below) initial market price.

set.seed(5)
# GBM price process parameters
mu &lt;- 0.2
sigma &lt;- 0.1
S0 &lt;- 100

# time
Y &lt;- 2
N &lt;- 500
delta &lt;- Y/N
t &lt;- seq (0, 1, length = N + 1)

# price process and date vector
W &lt;- c(0, cumsum ( sqrt(delta) * rnorm (N)))
f_gbm &lt;- S0 * exp(mu * t + sigma * W)
tr_dates &lt;- seq(Sys.Date(), Sys.Date()+500, by = "day")

#implement obpi strategy for buyer
obpi_b &lt;- obpi(q = 10,
tdate = tr_dates,
f = f_gbm,
k = f_gbm[1],
vol = 0.2,
r =  0,
tdays = 250,
daysleft = length(f_gbm),
tcost = 0,
int = TRUE)

# implement obpi strategy for seller
obpi_s &lt;- obpi(q = - 10,
tdate = tr_dates,
f = f_gbm,
k = f_gbm[1],
vol = 0.2,
r =  0,
tdays = 250,
daysleft = length(f_gbm),
tcost = 0,
int = TRUE)

</code></pre>

<hr>
<h2 id='OBPI-class'>An S4 class for the OBPI hedging strategy</h2><span id='topic+OBPI-class'></span>

<h3>Description</h3>

<p>An S4 class for the OBPI hedging strategy
</p>


<h3>Slots</h3>


<dl>
<dt><code>StrikePrice</code></dt><dd><p>Strike price for the synthetic option hedging</p>
</dd>
<dt><code>AnnVol</code></dt><dd><p>Annualized volatility for the contract to be traded</p>
</dd>
<dt><code>InterestRate</code></dt><dd><p>Risk-free rate of interest</p>
</dd>
<dt><code>TradingDays</code></dt><dd><p>The number of trading days per year</p>
</dd>
</dl>

<hr>
<h2 id='plot+2CGenericStrat-method'>S4 method for the plot generic for portfolio insurance strategy classes</h2><span id='topic+plot+2CGenericStrat-method'></span>

<h3>Description</h3>

<p>S4 method for the plot generic for portfolio insurance strategy classes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'GenericStrat'
plot(
  x,
  y = NULL,
  title = "Strategy plot",
  xlab = "",
  ylab.1 = "Price",
  ylab.2 = "Hedge %",
  pcols = c("#F8766D", "steelblue3", "gray60", "gray80"),
  legend = "bottom"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_x">x</code></td>
<td>
<p>instance of the strategy class created by the corresponding strategy function</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_y">y</code></td>
<td>
<p>NULL</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_title">title</code></td>
<td>
<p>plot title</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_xlab">xlab</code></td>
<td>
<p>label for x-axis</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_ylab.1">ylab.1</code></td>
<td>
<p>label for y-axis on price plot in top panel</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_ylab.2">ylab.2</code></td>
<td>
<p>label for y-axis on hedge plot in bottom panel</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_pcols">pcols</code></td>
<td>
<p>vector with four color codes for plot</p>
</td></tr>
<tr><td><code id="plot+2B2CGenericStrat-method_+3A_legend">legend</code></td>
<td>
<p>legend position in c(&quot;top&quot;, &quot;bottom&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a two-panel chart with daily values for (top panel) target price,
market price and portfolio price and (bottom) portfolio hedge rate
</p>

<hr>
<h2 id='plot+2CMSFC-method'>S4 method for the plot generic for class &quot;MSFC&quot;</h2><span id='topic+plot+2CMSFC-method'></span>

<h3>Description</h3>

<p>S4 method for the plot generic for class &quot;MSFC&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MSFC'
plot(
  x,
  y = NULL,
  plot.prior = FALSE,
  title = "",
  xlab = "",
  ylab = "Price",
  legend = "right"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CMSFC-method_+3A_x">x</code></td>
<td>
<p>instance of the MSFC class created by the msfc function</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_y">y</code></td>
<td>
<p>NULL</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_plot.prior">plot.prior</code></td>
<td>
<p>TRUE/FALSE for incuding prior function in plot</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_title">title</code></td>
<td>
<p>plot title</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_xlab">xlab</code></td>
<td>
<p>x-axis title</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_ylab">ylab</code></td>
<td>
<p>y-axis title</p>
</td></tr>
<tr><td><code id="plot+2B2CMSFC-method_+3A_legend">legend</code></td>
<td>
<p>position of legend, as implemented in ggplot2</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a chart with daily values for the forward curve and contracts used in calculation
</p>

<hr>
<h2 id='powcal'>Historical daily closing prices for 11 calendar year power futures contracts</h2><span id='topic+powcal'></span>

<h3>Description</h3>

<p>A synthetic dataset containing the closing prices and other attributes of 11
power futures contracts for calendar year delivery for 2006 - 2016.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powcal
</code></pre>


<h3>Format</h3>

<p>A data frame with 3253 rows and 12 columns:
</p>

<dl>
<dt>Date</dt><dd><p>the trading date</p>
</dd>
<dt>CAL-06</dt><dd><p>the closing price for the 2006 futures contract</p>
</dd>
<dt>CAL-07</dt><dd><p>the closing price for the 2007 futures contract</p>
</dd>
<dt>CAL-08</dt><dd><p>the closing price for the 2008 futures contract</p>
</dd>
<dt>CAL-09</dt><dd><p>the closing price for the 2009 futures contract</p>
</dd>
<dt>CAL-10</dt><dd><p>the closing price for the 2010 futures contract</p>
</dd>
<dt>CAL-11</dt><dd><p>the closing price for the 2011 futures contract</p>
</dd>
<dt>CAL-12</dt><dd><p>the closing price for the 2012 futures contract</p>
</dd>
<dt>CAL-13</dt><dd><p>the closing price for the 2013 futures contract</p>
</dd>
<dt>CAL-14</dt><dd><p>the closing price for the 2014 futures contract</p>
</dd>
<dt>CAL-15</dt><dd><p>the closing price for the 2015 futures contract</p>
</dd>
<dt>CAL-16</dt><dd><p>the closing price for the 2016 futures contract</p>
</dd>
</dl>


<hr>
<h2 id='powfutures130513'>Closing prices for power futures contracts at trading date 2013-05-13</h2><span id='topic+powfutures130513'></span>

<h3>Description</h3>

<p>A synthetic dataset containing the closing prices and other attributes of 38
power futures contracts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powfutures130513
</code></pre>


<h3>Format</h3>

<p>A data frame with 38 rows and 5 columns:
</p>

<dl>
<dt>Include</dt><dd><p>boolean variable to determine if contract should be included in forward curve calculation</p>
</dd>
<dt>Contract</dt><dd><p>the name of the futures contract</p>
</dd>
<dt>Start</dt><dd><p>delivery start date for the futures contract</p>
</dd>
<dt>End</dt><dd><p>delivery start date for the futures contract</p>
</dd>
<dt>Closing</dt><dd><p>the futures contract closing price</p>
</dd>
</dl>


<hr>
<h2 id='powpriors130513'>Example priors at trading date 2015-05-13</h2><span id='topic+powpriors130513'></span>

<h3>Description</h3>

<p>An example of two simple priors for forward market price to be used with powfutures130513
</p>


<h3>Usage</h3>

<pre><code class='language-R'>powpriors130513
</code></pre>


<h3>Format</h3>

<p>A data frame with 3885 rows and 3 columns:
</p>

<dl>
<dt>Date</dt><dd><p>vector of dates ranging from 2013-05-13 to final end date of contracts in powfutures130513</p>
</dd>
<dt>trig.prior</dt><dd><p>a simple smooth trigonometric prior describing power price seasonality</p>
</dd>
<dt>mod.prior</dt><dd><p>a trigonometric prior adjusted for typical calendar effects</p>
</dd>
</dl>


<hr>
<h2 id='show+2CGenericStrat-method'>S4 method for the show generic for portfolio insurance strategy classes</h2><span id='topic+show+2CGenericStrat-method'></span>

<h3>Description</h3>

<p>S4 method for the show generic for portfolio insurance strategy classes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'GenericStrat'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CGenericStrat-method_+3A_object">object</code></td>
<td>
<p>instance of a strategy class</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with daily observations for market price, transactions,
exposed volume, forward positions, hedge rate, target price and portfolio price
</p>

<hr>
<h2 id='show+2CMSFC-method'>S4 method for the show generic for class &quot;MSFC&quot;</h2><span id='topic+show+2CMSFC-method'></span>

<h3>Description</h3>

<p>S4 method for the show generic for class &quot;MSFC&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MSFC'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show+2B2CMSFC-method_+3A_object">object</code></td>
<td>
<p>instance of the MSFC class</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with daily values for forward curve and forward contracts used in calculation
</p>

<hr>
<h2 id='shpi'>Step Hedge Portfolio Insurance (SHPI)</h2><span id='topic+shpi'></span>

<h3>Description</h3>

<p>Implements SHPI strategy for commodity price risk management
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shpi(q, tdate, f, daysleft, tper, tcost = 0, int = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shpi_+3A_q">q</code></td>
<td>
<p>numeric value for quantity to be hedged, either positive (net buyer) or negative (net seller)</p>
</td></tr>
<tr><td><code id="shpi_+3A_tdate">tdate</code></td>
<td>
<p>date vector with trading days</p>
</td></tr>
<tr><td><code id="shpi_+3A_f">f</code></td>
<td>
<p>numeric futures price vector</p>
</td></tr>
<tr><td><code id="shpi_+3A_daysleft">daysleft</code></td>
<td>
<p>integer with days left to contract expiry</p>
</td></tr>
<tr><td><code id="shpi_+3A_tper">tper</code></td>
<td>
<p>numeric target price markup/down to the price on the first trading day</p>
</td></tr>
<tr><td><code id="shpi_+3A_tcost">tcost</code></td>
<td>
<p>numeric transaction costs pr unit</p>
</td></tr>
<tr><td><code id="shpi_+3A_int">int</code></td>
<td>
<p>TRUE/FALSE integer restriction on tradable volume</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the SHPI class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># SHPI for a buyer (seller), where stop loss is set 10% above (below) initial market price.

set.seed(5)
# GBM price process parameters
mu &lt;- 0.2
sigma &lt;- 0.1
S0 &lt;- 100

# time
Y &lt;- 2
N &lt;- 500
delta &lt;- Y/N
t &lt;- seq (0, 1, length = N + 1)

# price process and date vector
W &lt;- c(0, cumsum ( sqrt(delta) * rnorm (N)))
f_gbm &lt;- S0 * exp(mu * t + sigma * W)
tr_dates &lt;- seq(Sys.Date(), Sys.Date()+500, by = "day")

# implement step-hedge strategy for buyer
shpi_b &lt;- shpi(q = 10,
tdate = tr_dates,
f = f_gbm,
daysleft = length(tr_dates),
tper = 0.1,
tcost = 0,
int = TRUE)

# implement step-hedge strategy for seller
shpi_s &lt;- shpi(q = - 10,
tdate = tr_dates,
f = f_gbm,
daysleft = length(tr_dates),
tper = - 0.1,
tcost = 0,
int = TRUE)

</code></pre>

<hr>
<h2 id='SHPI-class'>An S4 class for the SHPI hedging strategy</h2><span id='topic+SHPI-class'></span>

<h3>Description</h3>

<p>An S4 class for the SHPI hedging strategy
</p>

<hr>
<h2 id='slpi'>Stop Loss Portfolio Insurance (SLPI)</h2><span id='topic+slpi'></span>

<h3>Description</h3>

<p>Implements SLPI strategy for commodity price risk management
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slpi(q, tdate, f, tper, tcost = 0, int = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="slpi_+3A_q">q</code></td>
<td>
<p>numeric value for quantity to be hedged, either positive (net buyer) or negative (net seller)</p>
</td></tr>
<tr><td><code id="slpi_+3A_tdate">tdate</code></td>
<td>
<p>date vector with trading days</p>
</td></tr>
<tr><td><code id="slpi_+3A_f">f</code></td>
<td>
<p>numeric futures price vector</p>
</td></tr>
<tr><td><code id="slpi_+3A_tper">tper</code></td>
<td>
<p>numeric target price markup/down to the price on the first trading day</p>
</td></tr>
<tr><td><code id="slpi_+3A_tcost">tcost</code></td>
<td>
<p>numeric transaction costs pr unit</p>
</td></tr>
<tr><td><code id="slpi_+3A_int">int</code></td>
<td>
<p>TRUE/FALSE integer restriction on tradable volume</p>
</td></tr>
</table>


<h3>Value</h3>

<p>instance of the SLPI class
</p>


<h3>Examples</h3>

<pre><code class='language-R'># SLPI for a buyer (seller), where stop loss is set 10% above (below) initial market price.

set.seed(5)
# GBM price process parameters
mu &lt;- 0.2
sigma &lt;- 0.1
S0 &lt;- 100

# time
Y &lt;- 2
N &lt;- 500
delta &lt;- Y/N
t &lt;- seq (0, 1, length = N + 1)

# price process and date vector
W &lt;- c(0, cumsum ( sqrt(delta) * rnorm (N)))
f_gbm &lt;- S0 * exp(mu * t + sigma * W)
tr_dates &lt;- seq(Sys.Date(), Sys.Date()+500, by = "day")

# implement stop-loss strategy for buyer
slpi_b &lt;- slpi(q = 10,
tdate = tr_dates,
f = f_gbm,
tper = 0.1,
tcost = 0,
int = TRUE)

# implement stop-loss strategy for seller
slpi_s &lt;- slpi(q = - 10,
tdate = tr_dates,
f = f_gbm,
tper = - 0.1,
tcost = 0,
int = TRUE)

</code></pre>

<hr>
<h2 id='SLPI-class'>An S4 class for the SLPI hedging strategy</h2><span id='topic+SLPI-class'></span>

<h3>Description</h3>

<p>An S4 class for the SLPI hedging strategy
</p>

<hr>
<h2 id='summary+2CGenericStrat-method'>S4 method for the summary generic for portfolio insurance strategy classes</h2><span id='topic+summary+2CGenericStrat-method'></span>

<h3>Description</h3>

<p>S4 method for the summary generic for portfolio insurance strategy classes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'GenericStrat'
summary(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CGenericStrat-method_+3A_object">object</code></td>
<td>
<p>instance of a strategy class</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with five elements. 1) A string describing the type of portfolio
insurance trading strategy and number of observations, 2) volume to be hedged,
calculated churn rate (numer of times volume to be hedged has been traded) and
5) a data frame with summary statistics for achieved results
</p>

<hr>
<h2 id='summary+2CMSFC-method'>S4 method for the summary generic for class &quot;MSFC&quot;</h2><span id='topic+summary+2CMSFC-method'></span>

<h3>Description</h3>

<p>S4 method for the summary generic for class &quot;MSFC&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'MSFC'
summary(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary+2B2CMSFC-method_+3A_object">object</code></td>
<td>
<p>instance of the MSFC class</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with three elements. 1) A string describing length of forward
curve, number of polynomials used in spline and trading date, 2) a vector with a
sample of the prior used via head(prior) and 3) a data frame with all forward
contracts used in the calculation along with computed forward curve prices
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
