<!DOCTYPE html><html><head><title>Help for package runonce</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {runonce}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#download_file'><p>Download once</p></a></li>
<li><a href='#runonce-package'><p>runonce: Run Once and Save Result</p></a></li>
<li><a href='#save_run'><p>Cache result</p></a></li>
<li><a href='#skip_run_if'><p>Skip code</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Run Once and Save Result</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Package 'runonce' helps automating the saving of long-running code
    to help running the same code multiple times. If you run some long-running 
    code once, it saves the result in a file on disk. Then, if the result 
    already exists, i.e. if the code has already been run and its output has 
    already been saved, it just reads the result from the stored file instead 
    of running the code again. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>bigassertr, urltools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.1.0), covr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/privefl/runonce">https://github.com/privefl/runonce</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/privefl/runonce/issues">https://github.com/privefl/runonce/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-02 08:22:15 UTC; au639593</td>
</tr>
<tr>
<td>Author:</td>
<td>Florian Privé [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Florian Privé &lt;florian.prive.21@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-02 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='download_file'>Download once</h2><span id='topic+download_file'></span>

<h3>Description</h3>

<p>Download file if does not exist yet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_file(
  url,
  dir = tempdir(),
  fname = url_basename(url),
  overwrite = FALSE,
  mode = "wb",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_file_+3A_url">url</code></td>
<td>
<p>URL of file to be downloaded.</p>
</td></tr>
<tr><td><code id="download_file_+3A_dir">dir</code></td>
<td>
<p>Directory where to download the file.</p>
</td></tr>
<tr><td><code id="download_file_+3A_fname">fname</code></td>
<td>
<p>Base name of the downloaded file (<code>dir</code> will be prefixed).</p>
</td></tr>
<tr><td><code id="download_file_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether to overwrite? Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="download_file_+3A_mode">mode</code></td>
<td>
<p>See parameter of <code><a href="utils.html#topic+download.file">download.file()</a></code>.
Default of &quot;wb&quot; seems useful for Windows systems.</p>
</td></tr>
<tr><td><code id="download_file_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="utils.html#topic+download.file">utils::download.file</a></code>
</p>

<dl>
<dt><code>method</code></dt><dd><p>Method to be used for downloading files.  Current
download methods are <code>"internal"</code>, <code>"wininet"</code> (Windows
only) <code>"libcurl"</code>, <code>"wget"</code> and <code>"curl"</code>, and there
is a value <code>"auto"</code>: see &lsquo;Details&rsquo; and &lsquo;Note&rsquo;.
</p>
<p>The method can also be set through the option
<code>"download.file.method"</code>: see <code><a href="base.html#topic+options">options</a>()</code>.
</p>
</dd>
<dt><code>quiet</code></dt><dd><p>If <code>TRUE</code>, suppress status messages (if any), and
the progress bar.</p>
</dd>
<dt><code>cacheOK</code></dt><dd><p>logical.  Is a server-side cached value acceptable?</p>
</dd>
<dt><code>extra</code></dt><dd><p>character vector of additional command-line arguments for
the <code>"wget"</code> and <code>"curl"</code> methods.</p>
</dd>
<dt><code>headers</code></dt><dd><p>named character vector of HTTP headers to use in HTTP
requests.  It is ignored for non-HTTP URLs.  The <code>User-Agent</code>
header, coming from the <code>HTTPUserAgent</code> option (see
<code><a href="base.html#topic+options">options</a></code>) is used as the first header, automatically.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>Path to the downloaded (or existing) file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>download_file("https://github.com/privefl.png")
download_file("https://github.com/privefl.png")
download_file("https://github.com/privefl.png", overwrite = TRUE)

</code></pre>

<hr>
<h2 id='runonce-package'>runonce: Run Once and Save Result</h2><span id='topic+runonce'></span><span id='topic+runonce-package'></span>

<h3>Description</h3>

<p>Package 'runonce' helps automating the saving of long-running code
to help running the same code multiple times. If you run some long-running 
code once, it saves the result in a file on disk. Then, if the result 
already exists, i.e. if the code has already been run and its output has 
already been saved, it just reads the result from the stored file instead 
of running the code again.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="runonce-package_+3A_timing">timing</code></td>
<td>
<p>Whether to print timing of running code? Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Florian Privé <a href="mailto:florian.prive.21@gmail.com">florian.prive.21@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/privefl/runonce">https://github.com/privefl/runonce</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/privefl/runonce/issues">https://github.com/privefl/runonce/issues</a>
</p>
</li></ul>


<hr>
<h2 id='save_run'>Cache result</h2><span id='topic+save_run'></span>

<h3>Description</h3>

<p>Cache the result of <code>code</code> in an RDS file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_run(code, file, timing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_run_+3A_code">code</code></td>
<td>
<p>Code to run. Do not forget to wrap it with <code>{ }</code>. Also, beware
that it is your job to make sure your code and data has not changed. If this
is the case, you need to remove the <code>file</code> storing the outdated result.</p>
</td></tr>
<tr><td><code id="save_run_+3A_file">file</code></td>
<td>
<p>File path where the result is stored. Should have extension <code>rds</code>.</p>
</td></tr>
<tr><td><code id="save_run_+3A_timing">timing</code></td>
<td>
<p>Whether to print timing of running code? Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The evaluation of <code>code</code> the first time, the content of <code>file</code> otherwise.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Prepare some temporary file
tmp &lt;- tempfile(fileext = ".rds")

# Run once because result does not exist yet
save_run({
  Sys.sleep(2)
  1
}, file = tmp)

# Skip run because the result already exists
# (but still output how long it took the first time)
save_run({
  Sys.sleep(2)
  1
}, file = tmp)

</code></pre>

<hr>
<h2 id='skip_run_if'>Skip code</h2><span id='topic+skip_run_if'></span>

<h3>Description</h3>

<p>Skip code if all conditions are fulfilled.
The code should not return anything.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>skip_run_if(code, cond = NULL, files = NULL, timing = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="skip_run_if_+3A_code">code</code></td>
<td>
<p>Code to run. Do not forget to wrap it with <code>{ }</code>.</p>
</td></tr>
<tr><td><code id="skip_run_if_+3A_cond">cond</code></td>
<td>
<p>Condition to be fulfilled to skip running <code>code</code>.
Default is <code>NULL</code> (not used).
Should evaluate to either <code>TRUE</code> or <code>FALSE</code> otherwise.</p>
</td></tr>
<tr><td><code id="skip_run_if_+3A_files">files</code></td>
<td>
<p>Character vector of file path(s). Default is <code>NULL</code> (not used).
This function checks if all these files exist, and if they all do exist,
it skips running <code>code</code>.</p>
</td></tr>
<tr><td><code id="skip_run_if_+3A_timing">timing</code></td>
<td>
<p>Whether to print timing of running code? Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>, invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Prepare some temporary file
tmp &lt;- tempfile(fileext = ".txt")

# Run once because file does not exist yet
skip_run_if({
  Sys.sleep(2)
  write.table(iris, tmp)
}, cond = file.exists(tmp))

# Skip run because `cond` is `TRUE`
skip_run_if({
  Sys.sleep(2)
  write.table(iris, tmp)
}, cond = file.exists(tmp))

# Skip run because file exists
skip_run_if({
  Sys.sleep(2)
  write.table(iris, tmp)
}, files = tmp)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
