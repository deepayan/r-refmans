<!DOCTYPE html><html><head><title>Help for package DriftBurstHypothesis</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DriftBurstHypothesis}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DriftBurstHypothesis-package'>
<p>Calculates the Test-Statistic for the Drift Burst Hypothesis</p></a></li>
<li><a href='#driftBursts'>
<p>Drift Bursts</p></a></li>
<li><a href='#methods for DBH objects'>
<p>Methods for the DBH class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Calculates the Test-Statistic for the Drift Burst Hypothesis</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-07-13</td>
</tr>
<tr>
<td>Author:</td>
<td>Emil Sjoerup</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Emil Sjoerup &lt;emilsjoerup@live.dk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculates the T-Statistic for the drift burst hypothesis from the working paper Christensen, Oomen and Reno (2018) &lt;<a href="https://doi.org/10.2139%2Fssrn.2842535">doi:10.2139/ssrn.2842535</a>&gt;. The authors' MATLAB code is available upon request, see: <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2842535">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2842535</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/emilsjoerup/DriftBurstHypothesis/issues">https://github.com/emilsjoerup/DriftBurstHypothesis/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/emilsjoerup/DriftBurstHypothesis">https://github.com/emilsjoerup/DriftBurstHypothesis</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.18), xts, zoo,</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-07-13 20:01:23 UTC; emil</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-07-13 20:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='DriftBurstHypothesis-package'>
Calculates the Test-Statistic for the Drift Burst Hypothesis
</h2><span id='topic+DriftBurstHypothesis-package'></span><span id='topic+DriftBurstHypothesis'></span>

<h3>Description</h3>

<p>Calculates the T-Statistic for the drift burst hypothesis from the working paper Christensen, Oomen and Reno (2018) &lt;DOI:10.2139/ssrn.2842535&gt;. The authors' MATLAB code is available upon request, see: &lt;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2842535&gt;.
</p>


<h3>Details</h3>

<p>The DESCRIPTION file:
</p>

<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> DriftBurstHypothesis</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Title: </td><td style="text-align: left;"> Calculates the Test-Statistic for the Drift Burst Hypothesis</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.4.0.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2020-07-13</td>
</tr>
<tr>
 <td style="text-align: left;">
Author: </td><td style="text-align: left;"> Emil Sjoerup</td>
</tr>
<tr>
 <td style="text-align: left;">
Maintainer: </td><td style="text-align: left;"> Emil Sjoerup &lt;emilsjoerup@live.dk&gt;</td>
</tr>
<tr>
 <td style="text-align: left;">
Description: </td><td style="text-align: left;"> Calculates the T-Statistic for the drift burst hypothesis from the working paper Christensen, Oomen and Reno (2018) &lt;DOI:10.2139/ssrn.2842535&gt;. The authors' MATLAB code is available upon request, see: &lt;https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2842535&gt;.</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-3</td>
</tr>
<tr>
 <td style="text-align: left;">
BugReports: </td><td style="text-align: left;"> https://github.com/emilsjoerup/DriftBurstHypothesis/issues</td>
</tr>
<tr>
 <td style="text-align: left;">
URL: </td><td style="text-align: left;"> https://github.com/emilsjoerup/DriftBurstHypothesis</td>
</tr>
<tr>
 <td style="text-align: left;">
NeedsCompilation: </td><td style="text-align: left;"> Yes</td>
</tr>
<tr>
 <td style="text-align: left;">
Depends: </td><td style="text-align: left;"> R (&gt;= 3.5.0)</td>
</tr>
<tr>
 <td style="text-align: left;">
Imports: </td><td style="text-align: left;"> Rcpp (&gt;= 0.12.18), xts, zoo,</td>
</tr>
<tr>
 <td style="text-align: left;">
LinkingTo: </td><td style="text-align: left;"> Rcpp, RcppArmadillo</td>
</tr>
<tr>
 <td style="text-align: left;">
Suggests: </td><td style="text-align: left;"> testthat</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<p>Index of help topics:
</p>
<pre>
DriftBurstHypothesis-package
                        Calculates the Test-Statistic for the Drift
                        Burst Hypothesis
driftBursts             Drift Bursts
print.DBH               Methods for the DBH class
</pre>


<h3>Author(s)</h3>

<p>Emil Sjoerup
</p>
<p>Maintainer: Emil Sjoerup &lt;emilsjoerup@live.dk&gt;
</p>


<h3>References</h3>

<p>Christensen, Oomen and Reno (2018) &lt;DOI:10.2139/ssrn.2842535&gt;.
</p>

<hr>
<h2 id='driftBursts'>
Drift Bursts
</h2><span id='topic+driftBursts'></span>

<h3>Description</h3>

<p>Calculates the Test-Statistic for the Drift Burst Hypothesis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>driftBursts(timestamps = NULL, logPrices, testTimes = seq(34260, 57600, 60),
                        preAverage = 5, ACLag = -1L, 
                        meanBandwidth = 300L, varianceBandwidth = 900L, 
                        sessionStart = 34200, sessionEnd = 57600,
                        parallelize = FALSE, nCores = NA, warnings = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="driftBursts_+3A_timestamps">timestamps</code></td>
<td>

<p>Either:
A <code>numeric</code> of <code>timestamps</code> for the trades in seconds after midnight.
Or: <code>NULL</code>, when the time argument is <code>NULL</code>, the <code>logprices</code> argument must be an <code>xts</code> object.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_logprices">logPrices</code></td>
<td>

<p>A <code>numeric</code> or <code>xts</code> object containing the log-prices.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_testtimes">testTimes</code></td>
<td>

<p>A <code>numeric</code> containing the times at which to calculate the tests. The standard of <code>seq(34260, 57600, 60)</code> denotes calculating the test      -statistic once per minute, i.e. 390 times for a typical 6.5 hour trading day from 9:31:00 to 16:00:00.
See details.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_preaverage">preAverage</code></td>
<td>

<p>An <code>integer</code> denoting the length of pre-averaging estimates of the log-prices.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_aclag">ACLag</code></td>
<td>

<p>A positive <code>integer</code> greater than 1 denoting how many lags are to be used for the HAC estimator of the variance - the standard of <code>-1</code> denotes using an automatic lag selection algorithm for each iteration.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_meanbandwidth">meanBandwidth</code></td>
<td>

<p>An <code>integer</code> denoting the bandwidth for the left-sided exponential kernel for the mean.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_variancebandwidth">varianceBandwidth</code></td>
<td>

<p>An <code>integer</code> denoting the bandwidth for the left-sided exponential kernel for the variance.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_sessionstart">sessionStart</code></td>
<td>

<p>A <code>double</code> to denote the start of the trading session in seconds after midnight.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_sessionend">sessionEnd</code></td>
<td>

<p>A <code>double</code> to denote the end of the trading session in seconds after midnight.
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_parallelize">parallelize</code></td>
<td>

<p>A <code>Boolean</code> to determine whether to parallelize the underlying C++ code. (Using OpenMP)
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_ncores">nCores</code></td>
<td>

<p>An <code>integer</code> denoting the number of cores to use for calculating the code when paralellized.
If this argument is not provided, sequential evaluation will be used even though <code>bParallelize</code> is TRUE
</p>
</td></tr>
<tr><td><code id="driftBursts_+3A_warnings">warnings</code></td>
<td>

<p>A <code>logical</code> denoting whether warnings should be shown.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code>testTimes</code> vector contains instructions to test before the first trade, or more than 15 minutes after the last trade, these entries will be deleted, as not doing so may cause crashes.
</p>
<p>The test statistic is unstable before <code>max(meanBandwidth , varianceBandwidth)</code> seconds has passed.
</p>
<p>If <code>timestamps</code> is provided and <code>logPrices</code> is an <code>xts</code> object, the indices of logPrices will be used regardless.
</p>
<p>Note that using an <code>xts</code> logPrices argument is slower than using a <code>numeric</code> due to the creation of the timestamps from the index of the input. When using <code>xts</code> objects, be careful to use the correct time zones. For example, if I as a dane use the <code>"America/New_York"</code> time zone for my <code>xts</code> objects, I have to add 14400 to my testing times. Same correction will have to be made to the <code>startTime</code> and <code>endTime</code> arguments in the plotting methods.
</p>
<p>The lags from the Newey-West algorithm is increased by <code>2 * (preAveage-1)</code> due to the pre-averaging we know atleast this many lags should be corrected for. The maximum of 20 lags is also increased by this same factor for the same reason.
</p>
<p>The methods <code>getMu(DBH)</code> and <code>getSigma(DBH)</code> have ad-hoc adjustments made to the output that are based on simulations. These adjustments give a slight down-ward bias in the value of the drift and sigma if the <code>preAverage</code> argument is VERY high, i.e. 10 or 20 for a noise-less price series of e.g. 23400 trades. If you find any better adjustments, please contact me.
</p>
<p>To get the unadjusted series, use <code>DBH$mu</code> or <code>DBH$sigma</code> for the drift, and volatility respectively.
</p>


<h3>Value</h3>

<p>An object of class <code>DBH</code> and <code>list</code> containing the series of the drift burst hypothesis test-statistic as well as the estimated spot drift and variance series. The list also contains some information such as the variance and mean bandwidths along with the pre-averaging setting and the amount of observations. Additionally, the list will contain information on whether testing happened for all <code>testTimes</code> entries.
</p>


<h3>warning</h3>

<p>When using <code>getMu(DBH)</code>, beware that the series may be padded with zeros (a warning will be shown when running the <code>driftBursts</code> in this case). This will for example happen when using <code>testTimes</code> for an entire trading day but the data is from a half trading day. Therefore, methods for calculating the mean and variance of the series that take this into account are provided and documented <a href="#topic+getMu">here</a>.
</p>


<h3>Author(s)</h3>

<p>Emil Sjoerup
</p>


<h3>References</h3>

<p>Christensen, Oomen and Reno (2018) &lt;DOI:10.2139/ssrn.2842535&gt;.
</p>


<h3>See Also</h3>

<p>The DBH methods for the DBH class are documented <a href="#topic+getMu">here</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Simulate a price series containing both a flash crash and a flash-rally
flashCrashSim = function(iT, dSigma, dPhi, dMu){
  vSim = numeric(iT)
  vEps = rnorm(iT , sd =dSigma)
  vEpsy = rnorm(iT)
  vEps[30001:32000] = rnorm(2000 ,sd =seq(from = dSigma , 
                                          to = 2*dSigma , length.out = 2000)) 
  vEps[32001:34000] = rnorm(2000 ,sd =seq(from = 2*dSigma , 
                                          to = dSigma , length.out = 2000))
  vEpsy[30001:32000] = -rnorm(2000 ,mean =seq(from = 0,
                                              to = 0.3 , length.out = 2000)) 
  vEpsy[32001:34000] = -rnorm(2000 ,mean =seq(from = 0.3,
                                              to = 0 , length.out = 2000))
  
  
  vEps[60001:63000] = rnorm(3000,sd = seq(from = dSigma , 
                                          to = 2*dSigma , length.out = 3000))
  vEps[63001:66000] = rnorm(3000,  sd = seq(from = 2*dSigma , 
                                            to =  dSigma, length.out = 3000))
  
  vEpsy[60001:63000] = rnorm(3000 ,mean =seq(from = 0,
                                             to = 0.2 , length.out = 3000))
  vEpsy[63001:66000] = rnorm(3000 ,mean =seq(from = 0.2,
                                             to = 0 , length.out = 3000))
  vSim[1] = dMu + dPhi *rnorm(1 , mean = dMu , sd = dSigma /sqrt(1-dPhi^2))
  for (i in 2:iT) {
    vSim[i] = dMu + dPhi * (vSim[(i-1)] - dMu) + vEps[i]
  }
  vY = exp(vSim/2) * vEpsy
  return(vY)
}
#Set parameter values of the simulation
iT = 66500; dSigma = 0.3; dPhi = 0.98; dMu = -10;
#set seed for reproducibility
set.seed(123)
#Simulate the series
y = 500+cumsum(flashCrashSim(iT, dSigma, dPhi, dMu))

#insert an outlier to illustrate robustness.
y[50000] = 500

#Here, the observations are equidistant, but the code can handle unevenly spaced observations.
timestamps = seq(34200 , 57600 , length.out = iT)
testTimes = seq(34260, 57600, 60)
logPrices = log(y)

library("DriftBurstHypothesis")

#calculating drift burst test statistic

DBH = driftBursts(timestamps,  logPrices,
                        testTimes, preAverage = 5, ACLag = -1L,
                        meanBandwidth = 300L, varianceBandwidth = 900L,
                        parallelize = FALSE)


#plot test statistic
plot(DBH)
#plot both test statistic and price
plot(DBH, price = y, timestamps = timestamps)
#Plot the mu series
plot(DBH, which = "Mu")
#plot the sigma series
plot(DBH, which = "Sigma")
#plot both
plot(DBH, which = c("Mu", "Sigma"))


#Means of the tstat, sigma, and mu series.
mean(getDB(DBH))
mean(getSigma(DBH))
mean(getMu(DBH))



## Not run: 
################## same example with xts object:
library("xts")
#Set parameter values of the simulation
iT = 66500; dSigma = 0.3; dPhi = 0.98; dMu = -10;
#set seed for reproducibility
set.seed(123)
#Simulate the series
y = 500+cumsum(flashCrashSim(iT, dSigma, dPhi, dMu))

#insert an outlier to illustrate robustness.
y[50000] = 500

#Here, the observations are equidistant, but the code can handle unevenly spaced observations.
timestamps = seq(34200 , 57600 , length.out = iT)
startTime = strptime("1970-01-01 00:00:00.0000", "%Y-%m-%d %H:%M:%OS", tz = "GMT")
testTimes = seq(34260, 57600, 60)


price = xts(vY, startTime + timestamps)


DBHxts = driftBursts(timestamps = NULL,  log(price), 
                   testTimes, preAverage = 5, ACLag = -1L,
                   meanBandwidth = 300L, varianceBandwidth = 900L, 
                   parallelize = FALSE)

#check for equality
all.equal(as.numeric(getDB(DBH)), as.numeric(getDB(DBHxts)))

## End(Not run)
</code></pre>

<hr>
<h2 id='methods+20for+20DBH+20objects'>
Methods for the DBH class
</h2><span id='topic+print.DBH'></span><span id='topic+plot.DBH'></span><span id='topic+getMu.DBH'></span><span id='topic+getSigma.DBH'></span><span id='topic+getDB.DBH'></span><span id='topic+getMean.DBH'></span><span id='topic+getVar.DBH'></span><span id='topic+getMu'></span><span id='topic+getSigma'></span><span id='topic+getDB'></span><span id='topic+getMean'></span><span id='topic+getVar'></span><span id='topic+getCriticalValues'></span><span id='topic+getCriticalValues.DBH'></span>

<h3>Description</h3>

<p>These are the methods for the class DBH which are currently implemented.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DBH'
print(x, ...)
## S3 method for class 'DBH'
plot(x, ...)
## S3 method for class 'DBH'
getDB(x)
## S3 method for class 'DBH'
getCriticalValues(x, alpha)
## S3 method for class 'DBH'
getMu(x, annualize = FALSE, nDays = 252)
## S3 method for class 'DBH'
getSigma(x, annualize = FALSE, nDays = 252)
## S3 method for class 'DBH'
getMean(x, which = 'all')
## S3 method for class 'DBH'
getVar(x, which = 'all', annualize = FALSE, nDays = 252)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_x">x</code></td>
<td>
<p>DBH object</p>
</td></tr>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_...">...</code></td>
<td>
<p>Additional arguments for the plotting and printing routines. See details</p>
</td></tr>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_alpha">alpha</code></td>
<td>
<p><code>double</code> confidence level for the critical values to be extracted. Default = 0.95 designating 95%</p>
</td></tr>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_annualize">annualize</code></td>
<td>
<p><code>logical</code> determining whether or not to annualize the series.</p>
</td></tr>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_ndays">nDays</code></td>
<td>
<p><code>numeric</code> determining how many days to use for annualization. The standard of 252 reflects the average 252 trading days in a year.</p>
</td></tr>
<tr><td><code id="methods+2B20for+2B20DBH+2B20objects_+3A_which">which</code></td>
<td>
<p><code>character</code> determining which series to retrieve the mean and variance of in <code>getMean</code> and <code>getVar</code>. This argument can also be used in the <code>print</code> and <code>plot</code> methods, see details for use in these methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For the <code>print</code> method, the <code>...</code> argument can be used to pass the following arguments:
</p>

<ul>
<li><p><code>criticalValue</code>: <code>numeric</code> determining the critical value to use when determining whether a drift burst is present in the data. If this critical value is omitted, a method to determine the critical value based on a interpolations of simulated data-set of critical values for different confidence levels and auto-correlations of the test statistic. See appendix B in the article.
</p>
</li>
<li><p><code>alpha</code>: <code>numeric</code> of length 1 which determines the confidence level of critical values extracted using the method above.
</p>
</li></ul>

<p>For the <code>plot</code> method, the <code>...</code> argument can be used to pass the following arguments:
</p>

<ul>
<li><p><code>which</code>: <code>character</code> Used for choosing which series to plot. Valid choices are: <code>"DriftBursts"</code>, <code>"DB"</code>, <code>"Sigma"</code>, <code>"Mu"</code>, and     <code>c("Sigma","Mu")</code>, the order of the latter is irrelevant. The case of the input does not matter. Default = <code>"driftbursts"</code>
</p>
</li>
<li><p><code>price</code>:The price series which, if provided, will be overlayed in a red dotted line and the level will be shown at the right y-axis.       (Only   used if <code>which</code> is <code>"DriftBursts"</code>). Default = <code>NULL</code>
</p>
</li>
<li><p><code>time</code>:Timestamps for the trades in seconds after midnight, which will be used for the x-axis of the plot if the price is overlayed.       Default = <code>NULL</code>
</p>
</li>
<li><p><code>startTime</code>:Start of the trading day in seconds after midnight. Default = <code>34200</code>
</p>
</li>
<li><p><code>endTime</code>:End of the trading day in seconds after midnight. Default = <code>57600</code>
</p>
</li>
<li><p><code>leg.x</code>:X-position of the legend in the case <code>which</code> is <code>"DriftBursts"</code> AND the price is overlayed. Default = <code>"topleft"</code>.   Usage is as in the base <code>R</code> engine.
</p>
</li>
<li><p><code>leg.y</code>:Y-position of the legend in the case <code>which</code> is <code>"DriftBursts"</code> AND the price is overlayed. Default = <code>NULL</code>.     Usage is as in the base <code>R</code> engine.
</p>
</li>
<li><p><code>tz</code>: <code>character</code> denoting the time-zone. Default = <code>"GMT"</code>
</p>
</li>
<li><p><code>annualize</code>: <code>logical</code> denoting whether to annualize in case which contains <code>"mu"</code>, <code>"sigma"</code>, or both. Default = <code>FALSE</code>
</p>
</li>
<li><p><code>nDays</code>: <code>numeric</code> denoting how many to use for annualization if <code>annualize</code> is <code>TRUE</code>. Default = <code>252</code>
</p>
</li></ul>



<h3>Value</h3>

<p>For <code>print</code> and <code>plot</code>, nothing is returned.
</p>
<p>For <code>getCriticalValues</code>, the critical value, and the normalized critical value is returned in a <code>list</code>.
</p>
<p>For  <code>getDB</code>, <code>getMu</code>, and <code>getSigma</code>, vectors with the same length as testTimes, containing the test statistic, drift, or volatility respecitvely, is returned
</p>
<p>For the methods <code>getMean</code> and <code>getVar</code>:
</p>
<p>When the <code>which</code> argument is <code>'all'</code>, getMean and getVar returns lists containing the mean or variance of the test statistic, drift, and volatility respectively.
</p>
<p>When the <code>which</code> argument is <code>'db'</code> (or <code>'driftbursts'</code>), <code>'mu'</code>, or <code>'sigma'</code>, doubles containing the mean or variance is returned.
</p>
<p>Note that the reason for having the getMean and getVar methods is the possibility of testing being mandated while data is not present. This primarily happens when loading in tick data for an entire year in a loop, including for example Christmas Eve in the U.S. where the markets close early. In this case if the user reuses the same <code>testTimes</code>, a warning will be thrown in <code>driftBursts</code>, and no testing will be done, but the output series will be padded with zeros to keep the same size as <code>testTimes</code>. 
</p>


<h3>Author(s)</h3>

<p>Emil Sjoerup
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(DriftBurstHypothesis)
set.seed(1)
# Set mean and variance bandwidth parameters
meanBandwidth = 300L
varianceBandwidth = 900L

# Simulate noise-less price series with 23400 observations, denoting 1 trader per second
# and generate corresponding timestamps.
iT = 23399
r = rnorm(iT, mean = 0, sd = 1)/sqrt(iT)
p = c(0,cumsum(r))
timestamps = seq(34200, 57600, length.out = iT+1)

# Test every minute after the instability period is over.
testTimes  = seq(34260 + varianceBandwidth, 57600, 60L)

# Calculate drift burst test statistic
DBH = driftBursts(timestamps, p, testTimes, preAverage = 1, ACLag = -1,
                  meanBandwidth = meanBandwidth, varianceBandwidth = varianceBandwidth)




print(DBH)
# Plots the test statistic with prices overlaid.
plot(DBH, timestamps = timestamps, price = p)

# Plots the annualized volatility
plot(DBH, which = 'sigma', annualize = TRUE)

# Plots the annualized drift and volatility
plot(DBH, which = c('sigma', 'mu'), annualize = TRUE)

# Retrieve the critical values of the drift burst test statistic
getCriticalValues(DBH)

# Calculate the mean of the test statistic, drift, and volatility
getMean(DBH, which = 'all')

# Calculate the variance of the test statistic
getVar(DBH, which = 'db')

# Extracts the annualized drift
annualizedDrift = getMu(DBH, annualize = TRUE)

# Extracts the annualized volatility
annualizedVolatility = getSigma(DBH, annualize = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
