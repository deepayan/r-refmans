<!DOCTYPE html><html lang="en-US"><head><title>Help for package surveytable</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {surveytable}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#surveytable-package'><p>surveytable: Formatted Survey Estimates</p></a></li>
<li><a href='#codebook'><p>Create a codebook for the survey</p></a></li>
<li><a href='#deprecated'><p>Deprecated functions</p></a></li>
<li><a href='#namcs2019sv'><p>Selected variables from the National Ambulatory Medical Care Survey (NAMCS) 2019 Public Use File (PUF)</p></a></li>
<li><a href='#print.surveytable_table'><p>Print surveytable tables</p></a></li>
<li><a href='#rccsu2018'><p>National Study of Long-Term Care Providers (NSLTCP) Residential Care Community (RCC) Services User (SU) 2018 Public Use File (PUF)</p></a></li>
<li><a href='#set_opts'><p>Set certain options</p></a></li>
<li><a href='#set_survey'><p>Specify the survey to analyze</p></a></li>
<li><a href='#show_options'><p>Show package options</p></a></li>
<li><a href='#survey_subset'><p>Subset a survey, while preserving variable labels</p></a></li>
<li><a href='#surveytable-options'><p>Package options</p></a></li>
<li><a href='#svyciprop_adjusted'><p>Confidence intervals for proportions, adjusted for degrees of freedom</p></a></li>
<li><a href='#tab'><p>Tabulate variables</p></a></li>
<li><a href='#tab_cross'><p>Tabulate subsets or interactions</p></a></li>
<li><a href='#tab_rate'><p>Calculate rates</p></a></li>
<li><a href='#tab_subset_rate'><p>Calculate rates for subsets</p></a></li>
<li><a href='#total'><p>Total count</p></a></li>
<li><a href='#total_rate'><p>Overall rate</p></a></li>
<li><a href='#uspop2019'><p>US Population in 2019</p></a></li>
<li><a href='#var_all'><p>Are all the variables true? (Logical AND)</p></a></li>
<li><a href='#var_any'><p>Is any variable true? (Logical OR)</p></a></li>
<li><a href='#var_case'><p>Convert factor to logical</p></a></li>
<li><a href='#var_collapse'><p>Collapse factor levels</p></a></li>
<li><a href='#var_copy'><p>Copy a variable</p></a></li>
<li><a href='#var_cross'><p>Cross or interact two variables</p></a></li>
<li><a href='#var_cut'><p>Convert numeric to factor</p></a></li>
<li><a href='#var_list'><p>List variables in a survey.</p></a></li>
<li><a href='#var_not'><p>Logical NOT</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Formatted Survey Estimates</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Short and understandable commands that generate tabulated, 
    formatted, and rounded survey estimates. Mostly a wrapper for the 
    'survey' package (Lumley (2004) &lt;<a href="https://doi.org/10.18637%2Fjss.v009.i08">doi:10.18637/jss.v009.i08</a>&gt; 
    <a href="https://CRAN.R-project.org/package=survey">https://CRAN.R-project.org/package=survey</a>) that identifies 
    low-precision estimates using the National Center for Health 
    Statistics (NCHS) presentation standards (Parker et al. (2017) 
    <a href="https://www.cdc.gov/nchs/data/series/sr_02/sr02_175.pdf">https://www.cdc.gov/nchs/data/series/sr_02/sr02_175.pdf</a>,
    Parker et al. (2023) &lt;<a href="https://doi.org/10.15620%2Fcdc%3A124368">doi:10.15620/cdc:124368</a>&gt;).</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-13 08:20:02 UTC</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>bzip2</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, magrittr, glue, survey, huxtable, lifecycle</td>
</tr>
<tr>
<td>Suggests:</td>
<td>kableExtra, gt, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cdcgov.github.io/surveytable/">https://cdcgov.github.io/surveytable/</a>,
<a href="https://github.com/CDCgov/surveytable">https://github.com/CDCgov/surveytable</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-03-12 18:17:03 UTC; kpr9</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex Strashny <a href="https://orcid.org/0000-0002-6408-7745"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alex Strashny &lt;alex.strashny@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
</table>
<hr>
<h2 id='surveytable-package'>surveytable: Formatted Survey Estimates</h2><span id='topic+surveytable'></span><span id='topic+surveytable-package'></span>

<h3>Description</h3>

<p>Short and understandable commands that generate tabulated, formatted, and rounded survey estimates. Mostly a wrapper for the 'survey' package (Lumley (2004) <a href="https://doi.org/10.18637/jss.v009.i08">doi:10.18637/jss.v009.i08</a> <a href="https://CRAN.R-project.org/package=survey">https://CRAN.R-project.org/package=survey</a>) that identifies low-precision estimates using the National Center for Health Statistics (NCHS) presentation standards (Parker et al. (2017) <a href="https://www.cdc.gov/nchs/data/series/sr_02/sr02_175.pdf">https://www.cdc.gov/nchs/data/series/sr_02/sr02_175.pdf</a>, Parker et al. (2023) <a href="https://doi.org/10.15620/cdc%3A124368">doi:10.15620/cdc:124368</a>).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alex Strashny <a href="mailto:alex.strashny@gmail.com">alex.strashny@gmail.com</a> (<a href="https://orcid.org/0000-0002-6408-7745">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://cdcgov.github.io/surveytable/">https://cdcgov.github.io/surveytable/</a>
</p>
</li>
<li> <p><a href="https://github.com/CDCgov/surveytable">https://github.com/CDCgov/surveytable</a>
</p>
</li></ul>


<hr>
<h2 id='codebook'>Create a codebook for the survey</h2><span id='topic+codebook'></span>

<h3>Description</h3>

<p>Create a codebook for the survey
</p>


<h3>Usage</h3>

<pre><code class='language-R'>codebook(all = FALSE, csv = getOption("surveytable.csv"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="codebook_+3A_all">all</code></td>
<td>
<p>tabulate all the variables?</p>
</td></tr>
<tr><td><code id="codebook_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tables.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
codebook()
</code></pre>

<hr>
<h2 id='deprecated'>Deprecated functions</h2><span id='topic+deprecated'></span><span id='topic+set_mode'></span><span id='topic+set_count_1k'></span><span id='topic+set_count_int'></span><span id='topic+set_output'></span>

<h3>Description</h3>

<p>Use <code><a href="#topic+set_opts">set_opts()</a></code> instead of any of the following: <code>set_mode()</code>, <code>set_count_1k()</code>,
<code>set_count_int()</code>, <code>set_output()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_mode(mode = "general")

set_count_1k()

set_count_int()

set_output(drop_na = NULL, max_levels = NULL, csv = NULL)
</code></pre>

<hr>
<h2 id='namcs2019sv'>Selected variables from the National Ambulatory Medical Care Survey (NAMCS) 2019 Public Use File (PUF)</h2><span id='topic+namcs2019sv'></span><span id='topic+namcs2019sv_df'></span>

<h3>Description</h3>

<p>Selected variables from a data system of visits to office-based physicians.
Note that the unit of observation is visits, not patients - this distinction
is important since a single patient can make multiple visits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>namcs2019sv

namcs2019sv_df
</code></pre>


<h3>Format</h3>

<p>An object of class <code>survey.design2</code> (inherits from <code>survey.design</code>) with 8250 rows and 33 columns.
</p>
<p>An object of class <code>data.frame</code> with 8250 rows and 33 columns.
</p>


<h3>Details</h3>

<p><code>namcs2019sv_df</code> is a data frame.
</p>
<p><code>namcs2019sv</code> is a survey object created from <code>namcs2019sv_df</code>
using <code>survey::svydesign()</code>.
</p>


<h3>Source</h3>


<ul>
<li><p> SAS data: <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/namcs2019_sas.zip">https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/namcs2019_sas.zip</a>
</p>
</li>
<li><p> Survey design variables: <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/readme2019-sas.txt">https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/readme2019-sas.txt</a>
</p>
</li>
<li><p> SAS formats: <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/nam19for.txt">https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/sas/nam19for.txt</a>
</p>
</li>
<li><p> Documentation: <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/doc2019-508.pdf">https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Dataset_Documentation/NAMCS/doc2019-508.pdf</a>
</p>
</li>
<li><p> National Summary Tables: <a href="https://www.cdc.gov/nchs/data/ahcd/namcs_summary/2019-namcs-web-tables-508.pdf">https://www.cdc.gov/nchs/data/ahcd/namcs_summary/2019-namcs-web-tables-508.pdf</a>
</p>
</li></ul>


<hr>
<h2 id='print.surveytable_table'>Print surveytable tables</h2><span id='topic+print.surveytable_table'></span><span id='topic+print.surveytable_list'></span><span id='topic+as_object'></span>

<h3>Description</h3>

<p>If a tabulation function is called from the top level, it should print out
its table(s) on its own. If that tabulation function is called not from the
top level, such as from within a loop or another function, you need to call
<code>print()</code> explicitly. For example:
</p>
<div class="sourceCode"><pre>set_survey(namcs2019sv)
for (vr in c("AGER", "SEX")) {
  print( tab_subset(vr, "MAJOR", "Preventive care") )
}
</pre></div>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'surveytable_table'
print(x, ...)

## S3 method for class 'surveytable_list'
print(x, ...)

as_object(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.surveytable_table_+3A_x">x</code></td>
<td>
<p>an object of class <code>surveytable_table</code> or <code>surveytable_list</code>.</p>
</td></tr>
<tr><td><code id="print.surveytable_table_+3A_...">...</code></td>
<td>
<p>passed to helper functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The package used to produce the tables can be changed. See <code><a href="#topic+set_opts">set_opts()</a></code> for
details. By default, <code>huxtable</code> is used.
</p>
<p><code>as_object()</code> returns an object (or a list of objects) of whatever package
is being used for printing (such as <code>huxtable</code>). This is useful for further
customizing the tables before finally printing them.
</p>


<h3>Value</h3>

<p><code style="white-space: pre;">&#8288;print.*&#8288;</code> returns <code>x</code> invisibly.
</p>
<p><code>as_object()</code> returns an object (or a list of objects) of whatever package
is being used for printing (such as <code>huxtable</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
table1 = tab("AGER")
print(table1)
table_many = tab("MDDO", "SPECCAT", "MSA")
print(table_many)
</code></pre>

<hr>
<h2 id='rccsu2018'>National Study of Long-Term Care Providers (NSLTCP) Residential Care Community (RCC) Services User (SU) 2018 Public Use File (PUF)</h2><span id='topic+rccsu2018'></span>

<h3>Description</h3>

<p>A data system of RCC residents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rccsu2018
</code></pre>


<h3>Format</h3>

<p>An object of class <code>survey.design2</code> (inherits from <code>survey.design</code>) with 904 rows and 81 columns.
</p>


<h3>Source</h3>


<ul>
<li><p> SAS data: <a href="https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Datasets/NPALS/">https://ftp.cdc.gov/pub/Health_Statistics/NCHS/Datasets/NPALS/</a>
</p>
</li>
<li><p> Documentation: <a href="https://www.cdc.gov/nchs/npals/RCCresident-readme03152021vr.pdf">https://www.cdc.gov/nchs/npals/RCCresident-readme03152021vr.pdf</a>
</p>
</li>
<li><p> Codebook: <a href="https://www.cdc.gov/nchs/data/npals/final2018rcc_su_puf_codebook.pdf">https://www.cdc.gov/nchs/data/npals/final2018rcc_su_puf_codebook.pdf</a>
</p>
</li></ul>


<hr>
<h2 id='set_opts'>Set certain options</h2><span id='topic+set_opts'></span><span id='topic+show_opts'></span>

<h3>Description</h3>

<p><code>set_opts()</code> sets certain options. To view these options, use <code>show_opts()</code>.
For more advanced control and detailed customization, experienced users can
also employ <code><a href="base.html#topic+options">options()</a></code> and <code><a href="#topic+show_options">show_options()</a></code> (refer to <a href="#topic+surveytable-options">surveytable-options</a>
for further information).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_opts(
  mode = NULL,
  count = NULL,
  lpe = NULL,
  drop_na = NULL,
  max_levels = NULL,
  csv = NULL,
  output = NULL
)

show_opts()
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_opts_+3A_mode">mode</code></td>
<td>
<p><code>"general"</code> or <code>"NCHS"</code>. See below for details.</p>
</td></tr>
<tr><td><code id="set_opts_+3A_count">count</code></td>
<td>
<p>round counts to the nearest: integer (<code>"int"</code>) or one thousand (<code>"1k"</code>)</p>
</td></tr>
<tr><td><code id="set_opts_+3A_lpe">lpe</code></td>
<td>
<p>identify low-precision estimates?</p>
</td></tr>
<tr><td><code id="set_opts_+3A_drop_na">drop_na</code></td>
<td>
<p>drop missing values (<code>NA</code>)? Categorical variables only.</p>
</td></tr>
<tr><td><code id="set_opts_+3A_max_levels">max_levels</code></td>
<td>
<p>a categorical variable can have at most this many levels. Used to avoid printing huge tables.</p>
</td></tr>
<tr><td><code id="set_opts_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file or <code>""</code> to turn off CSV output.</p>
</td></tr>
<tr><td><code id="set_opts_+3A_output">output</code></td>
<td>
<p>package to use for printing. One of <code>"huxtable"</code>, <code>"gt"</code>, or <code>"kableExtra"</code>.
For the last two, be sure that this package is installed. <code>"auto"</code> (default) = automatically
select <code>huxtable</code> for screen, <code>gt</code> for HTML, or <code>kableExtra</code> for PDF (LaTeX).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you are not setting a particular option, leave it as <code>NULL</code>.
</p>
<p><code>mode</code> can be either <code>"general"</code> or <code>"NCHS"</code> and has the following meaning:
</p>

<ul>
<li> <p><code>"general"</code>:
</p>

<ul>
<li><p> Round counts to the nearest integer &ndash; same as <code>count = "int"</code>.
</p>
</li>
<li><p> Do not look for low-precision estimates &ndash; same as <code>lpe = FALSE</code>.
</p>
</li>
<li><p> Percentage CI's: use standard Korn-Graubard CI's.
</p>
</li></ul>

</li>
<li> <p><code>"nchs"</code>:
</p>

<ul>
<li><p> Round counts to the nearest 1,000 &ndash; same as <code>count = "1k"</code>.
</p>
</li>
<li><p> Identify low-precision estimates &ndash; same as <code>lpe = TRUE</code>.
</p>
</li>
<li><p> Percentage CI's: adjust Korn-Graubard CI's for the number of degrees of
freedom, matching the SUDAAN calculation. NHIS users, be sure to also type
<code>options(surveytable.adjust_svyciprop.df_method = "NHIS")</code>.
</p>
</li></ul>

</li></ul>



<h3>Value</h3>

<p>(Nothing.)
</p>


<h3>See Also</h3>

<p>Other options: 
<code><a href="#topic+set_survey">set_survey</a>()</code>,
<code><a href="#topic+show_options">show_options</a>()</code>,
<code><a href="#topic+surveytable-options">surveytable-options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Send output to a CSV file:
file_name = tempfile(fileext = ".csv")
suppressMessages( set_opts(csv = file_name) )
set_survey(namcs2019sv)
tab("AGER")
set_opts(csv = "") # Turn off CSV output

show_opts()
</code></pre>

<hr>
<h2 id='set_survey'>Specify the survey to analyze</h2><span id='topic+set_survey'></span>

<h3>Description</h3>

<p>You must specify a survey before the other functions, such as <code><a href="#topic+tab">tab()</a></code>,
will work. To convert a <code>data.frame</code> to a survey object, see <code><a href="survey.html#topic+svydesign">survey::svydesign()</a></code>
or <code><a href="survey.html#topic+svrepdesign">survey::svrepdesign()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_survey(design, csv = getOption("surveytable.csv"), ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_survey_+3A_design">design</code></td>
<td>
<p>either a survey object (created with <code><a href="survey.html#topic+svydesign">survey::svydesign()</a></code> or
<code><a href="survey.html#topic+svrepdesign">survey::svrepdesign()</a></code>); or, for an unweighted survey, a <code>data.frame</code>.</p>
</td></tr>
<tr><td><code id="set_survey_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
<tr><td><code id="set_survey_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="#topic+set_opts">set_opts()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Optionally, the survey can have an attribute called <code>label</code>, which is the
long name of the survey. Optionally, each variable in the survey can have an
attribute called <code>label</code>, which is the variable's long name.
</p>


<h3>Value</h3>

<p>info about the survey
</p>


<h3>See Also</h3>

<p>Other options: 
<code><a href="#topic+set_opts">set_opts</a>()</code>,
<code><a href="#topic+show_options">show_options</a>()</code>,
<code><a href="#topic+surveytable-options">surveytable-options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
set_survey(namcs2019sv, mode = "general")
</code></pre>

<hr>
<h2 id='show_options'>Show package options</h2><span id='topic+show_options'></span>

<h3>Description</h3>

<p>See <a href="#topic+surveytable-options">surveytable-options</a> for a discussion of some of the options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_options(sw = "surveytable")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show_options_+3A_sw">sw</code></td>
<td>
<p>starting characters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List of options and their values.
</p>


<h3>See Also</h3>

<p>Other options: 
<code><a href="#topic+set_opts">set_opts</a>()</code>,
<code><a href="#topic+set_survey">set_survey</a>()</code>,
<code><a href="#topic+surveytable-options">surveytable-options</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>show_options()
</code></pre>

<hr>
<h2 id='survey_subset'>Subset a survey, while preserving variable labels</h2><span id='topic+survey_subset'></span>

<h3>Description</h3>

<p>Subset a survey, while preserving variable labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>survey_subset(design, subset, label)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="survey_subset_+3A_design">design</code></td>
<td>
<p>a survey object</p>
</td></tr>
<tr><td><code id="survey_subset_+3A_subset">subset</code></td>
<td>
<p>an expression specifying the sub-population</p>
</td></tr>
<tr><td><code id="survey_subset_+3A_label">label</code></td>
<td>
<p>survey label of the newly created survey object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new survey object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>children = survey_subset(namcs2019sv, AGE &lt; 18, "Children &lt; 18")
set_survey(children)
tab("AGER")
</code></pre>

<hr>
<h2 id='surveytable-options'>Package options</h2><span id='topic+surveytable-options'></span>

<h3>Description</h3>

<p>This article is for more advanced users. Typical users, see <code><a href="#topic+set_opts">set_opts()</a></code>
and <code><a href="#topic+show_opts">show_opts()</a></code> to set and show certain options.
</p>


<h3>Details</h3>

<p>To view all available options, use <code><a href="#topic+show_options">show_options()</a></code>. Below is a description
of some noteworthy options.
</p>


<h4>Changing the number of decimal places or significant digits</h4>

<p>By default, all estimates are rounded in a certain way. The user can change how the
rounding is performed.
</p>
<p>The following options are the names of functions that control rounding:
<code>surveytable.tx_count</code> (for estimates of counts), <code>surveytable.tx_prct</code> (for estimates
of percentages), <code>surveytable.tx_rate</code> (for estimates of rates), and
<code>surveytable.tx_numeric</code> (for estimates of numeric variables). To turn off all
rounding, set each one of these options to <code>".tx_none"</code>.
</p>
<p>Each function takes one argument, a <code>data.frame</code> with the following columns:
<code>x</code> (point estimates), <code>s</code> (standard errors), <code>ll</code> and <code>ul</code> (CI's).
Each function outputs a <code>data.frame</code> with the same column names. For examples of
how this works, see the internal functions <code>surveytable:::.tx_count_int</code> (counts,
rounded to the nearest integer), <code>surveytable:::.tx_count_1k</code> (counts, rounded
to the nearest one thousand), <code>surveytable:::.tx_prct</code> (percentages), <code>surveytable:::.tx_rate</code>
(rates), and <code>surveytable:::.tx_numeric</code> (numeric variables).
</p>
<p>You can set the above options to your own custom functions. You might also want
to adjust the following options, which are the names of
columns in the printed tables: <code>surveytable.names_count</code> (by default, this
changes when rounding counts to the nearest one thousand) and <code>surveytable.names_prct</code>.
</p>



<h4>Printing using various table-making packages</h4>

<p>The tabulation functions return objects of class <code>surveytable_table</code> (for a single
table) or <code>surveytable_list</code> (for multiple tables, which is just a list of <code>surveytable_table</code>
objects). A <code>surveytable_table</code> object is just a <code>data.frame</code> with the following
attributes: <code>title</code>, <code>footer</code>, and <code>num</code>, which is the index of columns that
should be formatted as a number.
</p>
<p>Naturally, these objects can be printed using a variety of packages. <code>surveytable</code>
ships with the ability to use <code>huxtable</code>, <code>gt</code>, or <code>kableExtra</code>. See the <code>output</code>
argument of <code><a href="#topic+set_opts">set_opts()</a></code>.
</p>
<p>You can supply custom code to use another table-making package or to use one of these
table-making packages, but in a different way. The two relevant options are <code>surveytable.output_object</code>
and <code>surveytable.output_print</code>.
</p>
<p><code>surveytable.output_object</code> is the name of a function with the following arguments:
<code>x</code> and <code>...</code>, where <code>x</code> is a <code>surveytable_table</code> object. This function returns
an object from a table-making package, for example, it returns a <code>gt</code> object. Be sure
that this package is installed.
</p>
<p><code>surveytable.output_print</code> is the name of a function with the following arguments:
<code>x</code> and <code>...</code>, where <code>x</code> is an object returned by the <code>surveytable.output_object</code>
function. The <code>surveytable.output_print</code> function prints this object.
</p>
<p>For an example of how this works, see the internal functions <code>surveytable:::.as_object_huxtable</code>
and <code>surveytable:::.print_huxtable</code>.
</p>



<h4>Low-precision estimates</h4>

<p>Optionally, all of the tabulation functions can identify low-precision estimates.
Turn on this functionality using any of the following: <a href="#topic+set_opts">set_opts</a>(lpe = TRUE),
<a href="#topic+set_opts">set_opts</a>(mode = &quot;nchs&quot;), <a href="#topic+set_survey">set_survey</a>(*, mode = &quot;nchs&quot;), or <code>options(surveytable.find_lpe = TRUE)</code>.
</p>
<p>By default, low-precision estimates are identified using National Center for
Health Statistics (NCHS) algorithms. However, this can be changed, as described
below.
</p>
<p>Here is a description of the options related to the identification of low-precision
estimates.
</p>

<ul>
<li> <p><code>surveytable.find_lpe</code>: should the tabulation functions look for low-precision
estimates? You can change this directly with <code>options()</code> or with either <code><a href="#topic+set_opts">set_opts()</a></code>
or <code><a href="#topic+set_survey">set_survey()</a></code>.
</p>
</li>
<li> <p><code>surveytable.lpe_n</code>, <code>surveytable.lpe_counts</code>, <code>surveytable.lpe_percents</code>: names
of 3 functions.
</p>
</li></ul>

<p>The argument for <code>surveytable.lpe_n</code> is a vector of the number of observations
for each level of the variable.
</p>
<p>The argument for <code>surveytable.lpe_counts</code> is a data frame with count-related estimates.
Specifically, the data frame has the following variables:
</p>

<ul>
<li> <p><code>x</code>: point estimates of counts
</p>
</li>
<li> <p><code>s</code>: SE
</p>
</li>
<li> <p><code>ll</code>, <code>ul</code>: CI
</p>
</li>
<li> <p><code>samp.size</code>: effective sample size
</p>
</li>
<li> <p><code>counts</code>: actual sample size
</p>
</li>
<li> <p><code>degf</code>: degrees of freedom
</p>
</li></ul>

<p>The argument for <code>surveytable.lpe_percents</code> is a data frame with percent-related
estimates. Specifically, the data frame has the following variables:
</p>

<ul>
<li> <p><code>Proportion</code>: point estimates of proportions (between <code>0</code> and <code>1</code>)
</p>
</li>
<li> <p><code>SE</code>: SE
</p>
</li>
<li> <p><code>LL</code>, <code>UL</code>: CI
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;n numerator&#8288;</code>: the number of observations for which the variable is <code>TRUE</code>
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;n denominator&#8288;</code>: the total number of observations
</p>
</li></ul>

<p>Each of these functions must return a list with the following elements:
</p>

<ul>
<li> <p><code>id</code>: the name of the algorithm used, such as <code>"NCHS presentation standards"</code>
</p>
</li>
<li> <p><code>flags</code>: a vector. For each level of the variable, short codes indicating the presence of
low-precision estimates.
</p>
</li>
<li> <p><code>has.flag</code>: a vector of short codes that are present in <code>flags</code>.
</p>
</li>
<li> <p><code>descriptions</code>: a named vector. The names must be the short codes, the values are
the longer descriptions.
</p>
</li></ul>

<p>For example, if a variable has 3 levels, <code>flags</code> might be <code>c("", "A1 A2", "")</code>. This
indicates that for the first and third level, nothing was found, whereas for the second
level, two different things were found, indicated by short codes <code>A1</code> and <code>A2</code>. In
this case, <code>has.flag = c("A1", "A2")</code>, <code>descriptions = c(A1 = "A1: something", A2 = "A2: something else")</code>.
</p>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alex Strashny <a href="mailto:alex.strashny@gmail.com">alex.strashny@gmail.com</a> (<a href="https://orcid.org/0000-0002-6408-7745">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://cdcgov.github.io/surveytable/">https://cdcgov.github.io/surveytable/</a>
</p>
</li>
<li> <p><a href="https://github.com/CDCgov/surveytable">https://github.com/CDCgov/surveytable</a>
</p>
</li></ul>

<p>Other options: 
<code><a href="#topic+set_opts">set_opts</a>()</code>,
<code><a href="#topic+set_survey">set_survey</a>()</code>,
<code><a href="#topic+show_options">show_options</a>()</code>
</p>

<hr>
<h2 id='svyciprop_adjusted'>Confidence intervals for proportions, adjusted for degrees of freedom</h2><span id='topic+svyciprop_adjusted'></span>

<h3>Description</h3>

<p>A version of <code>survey::svyciprop()</code> that adjusts for the degrees of freedom
when <code>method = "beta"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>svyciprop_adjusted(
  formula,
  design,
  method = c("logit", "likelihood", "asin", "beta", "mean", "xlogit"),
  level = 0.95,
  df_method,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="svyciprop_adjusted_+3A_formula">formula</code></td>
<td>
<p>see <code>survey::svyciprop()</code>.</p>
</td></tr>
<tr><td><code id="svyciprop_adjusted_+3A_design">design</code></td>
<td>
<p>see <code>survey::svyciprop()</code>.</p>
</td></tr>
<tr><td><code id="svyciprop_adjusted_+3A_method">method</code></td>
<td>
<p>see <code>survey::svyciprop()</code>.</p>
</td></tr>
<tr><td><code id="svyciprop_adjusted_+3A_level">level</code></td>
<td>
<p>see <code>survey::svyciprop()</code>.</p>
</td></tr>
<tr><td><code id="svyciprop_adjusted_+3A_df_method">df_method</code></td>
<td>
<p>how <code>df</code> should be calculated: <code>"default"</code> or <code>"NHIS"</code>.</p>
</td></tr>
<tr><td><code id="svyciprop_adjusted_+3A_...">...</code></td>
<td>
<p>see <code>survey::svyciprop()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Written by Makram Talih in 2019.
</p>
<p><code>df_method</code>: for <code>"default"</code>, <code>df = degf(design)</code>; for <code>"NHIS"</code>, <code>df = nrow(design) - 1</code>.
</p>
<p>To use this adjustment in <code>surveytable</code> tabulations, call <code><a href="#topic+set_survey">set_survey()</a></code> or <code><a href="#topic+set_opts">set_opts()</a></code> with the
<code>mode = "NCHS"</code> argument, or type: <code>options(surveytable.adjust_svyciprop = TRUE)</code>.
NHIS users, be sure to set the <code>surveytable.adjust_svyciprop.df_method</code> option to
<code>"NHIS"</code>.
</p>


<h3>Value</h3>

<p>The point estimate of the proportion, with the confidence interval as an attribute.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
set_opts(mode = "NCHS")
tab("AGER")
set_opts(mode = "general")
</code></pre>

<hr>
<h2 id='tab'>Tabulate variables</h2><span id='topic+tab'></span>

<h3>Description</h3>

<p>Tabulate categorical (factor), logical, or numeric variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tab(
  ...,
  test = FALSE,
  alpha = 0.05,
  p_adjust = FALSE,
  drop_na = getOption("surveytable.drop_na"),
  max_levels = getOption("surveytable.max_levels"),
  csv = getOption("surveytable.csv")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tab_+3A_...">...</code></td>
<td>
<p>names of variables (in quotes)</p>
</td></tr>
<tr><td><code id="tab_+3A_test">test</code></td>
<td>
<p>perform hypothesis tests?</p>
</td></tr>
<tr><td><code id="tab_+3A_alpha">alpha</code></td>
<td>
<p>significance level for tests</p>
</td></tr>
<tr><td><code id="tab_+3A_p_adjust">p_adjust</code></td>
<td>
<p>adjust p-values for multiple comparisons?</p>
</td></tr>
<tr><td><code id="tab_+3A_drop_na">drop_na</code></td>
<td>
<p>drop missing values (<code>NA</code>)? Categorical variables only.</p>
</td></tr>
<tr><td><code id="tab_+3A_max_levels">max_levels</code></td>
<td>
<p>a categorical variable can have at most this many levels. Used to avoid printing huge tables.</p>
</td></tr>
<tr><td><code id="tab_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For categorical and logical variables, presents the
estimated counts, their standard errors (SEs) and confidence
intervals (CIs), percentages, and their SEs and CIs. Checks
the presentation guidelines for counts and percentages and flags
estimates if, according to the guidelines,
they should be suppressed, footnoted, or reviewed by an analyst.
</p>
<p>For numeric variables, presents the percentage of observations with
known values, the mean of known values, the standard error of the mean (SEM), and
the standard deviation (SD).
</p>
<p>CIs are calculated at the 95% confidence level. CIs for
count estimates are the log Student's t CIs, with adaptations
for complex surveys. CIs for percentage estimates are
the Korn and Graubard CIs.
</p>


<h3>Value</h3>

<p>A list of tables or a single table.
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab_cross">tab_cross</a>()</code>,
<code><a href="#topic+tab_rate">tab_rate</a>()</code>,
<code><a href="#topic+tab_subset_rate">tab_subset_rate</a>()</code>,
<code><a href="#topic+total">total</a>()</code>,
<code><a href="#topic+total_rate">total_rate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
tab("AGER")
tab("MDDO", "SPECCAT", "MSA")

# Numeric variables
tab("NUMMED")

# Hypothesis testing with categorical variables
tab("AGER", test = TRUE)
</code></pre>

<hr>
<h2 id='tab_cross'>Tabulate subsets or interactions</h2><span id='topic+tab_cross'></span><span id='topic+tab_subset'></span>

<h3>Description</h3>

<p>Create subsets of the survey using one variable, and tabulate another
variable within each of the subsets. Interact two variables and tabulate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tab_cross(
  vr,
  vrby,
  max_levels = getOption("surveytable.max_levels"),
  csv = getOption("surveytable.csv")
)

tab_subset(
  vr,
  vrby,
  lvls = c(),
  test = FALSE,
  alpha = 0.05,
  p_adjust = FALSE,
  drop_na = getOption("surveytable.drop_na"),
  max_levels = getOption("surveytable.max_levels"),
  csv = getOption("surveytable.csv")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tab_cross_+3A_vr">vr</code></td>
<td>
<p>variable to tabulate</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_vrby">vrby</code></td>
<td>
<p>use this variable to subset the survey</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_max_levels">max_levels</code></td>
<td>
<p>a categorical variable can have at most this many levels. Used to avoid printing huge tables.</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_lvls">lvls</code></td>
<td>
<p>(optional) only show these levels of <code>vrby</code></p>
</td></tr>
<tr><td><code id="tab_cross_+3A_test">test</code></td>
<td>
<p>perform hypothesis tests?</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_alpha">alpha</code></td>
<td>
<p>significance level for tests</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_p_adjust">p_adjust</code></td>
<td>
<p>adjust p-values for multiple comparisons?</p>
</td></tr>
<tr><td><code id="tab_cross_+3A_drop_na">drop_na</code></td>
<td>
<p>drop missing values (<code>NA</code>)? Categorical variables only.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>tab_subset</code> creates subsets using the levels of <code>vrby</code>, and tabulates
<code>vr</code> in each subset. Optionally, only use the <code>lvls</code> levels of <code>vrby</code>.
<code>vr</code> can be categorical (factor), logical, or numeric.
</p>
<p><code>tab_cross</code> crosses or interacts <code>vr</code> and <code>vrby</code> and tabulates the new
variable. Tables created using <code>tab_subset</code> and <code>tab_cross</code> have the same
counts but different percentages. With <code>tab_subset</code>, percentages within each
subset add up to 100%. With <code>tab_cross</code>, percentages across the entire
population add up to 100%. Also see <code><a href="#topic+var_cross">var_cross()</a></code>.
</p>
<p><code>test = TRUE</code> performs a test of association between the two variables. Also
performs t-tests for all possible pairs of levels of <code>vr</code> and <code>vrby</code>.
</p>


<h3>Value</h3>

<p>A list of tables or a single table.
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab">tab</a>()</code>,
<code><a href="#topic+tab_rate">tab_rate</a>()</code>,
<code><a href="#topic+tab_subset_rate">tab_subset_rate</a>()</code>,
<code><a href="#topic+total">total</a>()</code>,
<code><a href="#topic+total_rate">total_rate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)

# For each SEX, tabulate AGER
tab_subset("AGER", "SEX")

# Same counts as tab_subset(), but different percentages.
tab_cross("AGER", "SEX")

# Numeric variables
tab_subset("NUMMED", "AGER")

# Hypothesis testing
tab_subset("NUMMED", "AGER", test = TRUE)
</code></pre>

<hr>
<h2 id='tab_rate'>Calculate rates</h2><span id='topic+tab_rate'></span>

<h3>Description</h3>

<p>Calculate the rates for categorical (factor) or logical variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tab_rate(
  vr,
  pop,
  per = getOption("surveytable.rate_per"),
  drop_na = getOption("surveytable.drop_na"),
  max_levels = getOption("surveytable.max_levels"),
  csv = getOption("surveytable.csv")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tab_rate_+3A_vr">vr</code></td>
<td>
<p>variable to tabulate</p>
</td></tr>
<tr><td><code id="tab_rate_+3A_pop">pop</code></td>
<td>
<p>either a single number or a <code>data.frame</code> with columns named
<code>Level</code> and <code>Population</code>. <code>Level</code> must
exactly match the levels of <code>vr</code>. <code>Population</code> is the population for that
level of <code>vr</code>.</p>
</td></tr>
<tr><td><code id="tab_rate_+3A_per">per</code></td>
<td>
<p>calculate rate per this many items in the population</p>
</td></tr>
<tr><td><code id="tab_rate_+3A_drop_na">drop_na</code></td>
<td>
<p>drop missing values (<code>NA</code>)?</p>
</td></tr>
<tr><td><code id="tab_rate_+3A_max_levels">max_levels</code></td>
<td>
<p>a categorical variable can have at most this many levels. Used to avoid printing huge tables.</p>
</td></tr>
<tr><td><code id="tab_rate_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tables or a single table.
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab">tab</a>()</code>,
<code><a href="#topic+tab_cross">tab_cross</a>()</code>,
<code><a href="#topic+tab_subset_rate">tab_subset_rate</a>()</code>,
<code><a href="#topic+total">total</a>()</code>,
<code><a href="#topic+total_rate">total_rate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
# pop is a data frame
tab_rate("MSA", uspop2019$MSA)

# pop is a single number
tab_rate("MDDO", uspop2019$total)
</code></pre>

<hr>
<h2 id='tab_subset_rate'>Calculate rates for subsets</h2><span id='topic+tab_subset_rate'></span>

<h3>Description</h3>

<p>Create subsets of the survey using one variable, and tabulate
the rates of another variable within each of the subsets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tab_subset_rate(
  vr,
  vrby,
  pop,
  lvls = c(),
  per = getOption("surveytable.rate_per"),
  drop_na = getOption("surveytable.drop_na"),
  max_levels = getOption("surveytable.max_levels"),
  csv = getOption("surveytable.csv")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tab_subset_rate_+3A_vr">vr</code></td>
<td>
<p>variable to tabulate</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_vrby">vrby</code></td>
<td>
<p>use this variable to subset the survey</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_pop">pop</code></td>
<td>
<p>a <code>data.frame</code> with columns named <code>Level</code>, <code>Subset</code>, and <code>Population</code>. <code>Level</code> must
exactly match the levels of <code>vr</code>. <code>Subset</code> must exactly match the levels of
<code>vrby</code>. <code>Population</code> is the population for that level of <code>vr</code> and <code>vrby</code>.</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_lvls">lvls</code></td>
<td>
<p>(optional) only show these levels of <code>vrby</code></p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_per">per</code></td>
<td>
<p>calculate rate per this many items in the population</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_drop_na">drop_na</code></td>
<td>
<p>drop missing values (<code>NA</code>)?</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_max_levels">max_levels</code></td>
<td>
<p>a categorical variable can have at most this many levels. Used to avoid printing huge tables.</p>
</td></tr>
<tr><td><code id="tab_subset_rate_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tables or a single table.
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab">tab</a>()</code>,
<code><a href="#topic+tab_cross">tab_cross</a>()</code>,
<code><a href="#topic+tab_rate">tab_rate</a>()</code>,
<code><a href="#topic+total">total</a>()</code>,
<code><a href="#topic+total_rate">total_rate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
tab_subset_rate("AGER", "SEX", uspop2019$`AGER x SEX`)
</code></pre>

<hr>
<h2 id='total'>Total count</h2><span id='topic+total'></span>

<h3>Description</h3>

<p>Total count
</p>


<h3>Usage</h3>

<pre><code class='language-R'>total(csv = getOption("surveytable.csv"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="total_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab">tab</a>()</code>,
<code><a href="#topic+tab_cross">tab_cross</a>()</code>,
<code><a href="#topic+tab_rate">tab_rate</a>()</code>,
<code><a href="#topic+tab_subset_rate">tab_subset_rate</a>()</code>,
<code><a href="#topic+total_rate">total_rate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
total()
</code></pre>

<hr>
<h2 id='total_rate'>Overall rate</h2><span id='topic+total_rate'></span>

<h3>Description</h3>

<p>Overall rate
</p>


<h3>Usage</h3>

<pre><code class='language-R'>total_rate(
  pop,
  per = getOption("surveytable.rate_per"),
  csv = getOption("surveytable.csv")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="total_rate_+3A_pop">pop</code></td>
<td>
<p>population</p>
</td></tr>
<tr><td><code id="total_rate_+3A_per">per</code></td>
<td>
<p>calculate rate per this many items in the population</p>
</td></tr>
<tr><td><code id="total_rate_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table
</p>


<h3>See Also</h3>

<p>Other tables: 
<code><a href="#topic+tab">tab</a>()</code>,
<code><a href="#topic+tab_cross">tab_cross</a>()</code>,
<code><a href="#topic+tab_rate">tab_rate</a>()</code>,
<code><a href="#topic+tab_subset_rate">tab_subset_rate</a>()</code>,
<code><a href="#topic+total">total</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
total_rate(uspop2019$total)
</code></pre>

<hr>
<h2 id='uspop2019'>US Population in 2019</h2><span id='topic+uspop2019'></span>

<h3>Description</h3>

<p>Population estimates of the civilian non-institutional population of the
United States as of July 1, 2019. Used for calculating rates. For usage
examples, see the <code style="white-space: pre;">&#8288;*_rate&#8288;</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uspop2019
</code></pre>


<h3>Format</h3>

<p>An object of class <code>list</code> of length 7.
</p>

<hr>
<h2 id='var_all'>Are all the variables true? (Logical AND)</h2><span id='topic+var_all'></span>

<h3>Description</h3>

<p>Create a new variable which is true if all of the variables in a list of
variables are true.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_all(newvr, vrs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_all_+3A_newvr">newvr</code></td>
<td>
<p>name of the new variable to be created</p>
</td></tr>
<tr><td><code id="var_all_+3A_vrs">vrs</code></td>
<td>
<p>vector of logical variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_all("Medicare and Medicaid", c("PAYMCARE", "PAYMCAID"))
tab("Medicare and Medicaid")
</code></pre>

<hr>
<h2 id='var_any'>Is any variable true? (Logical OR)</h2><span id='topic+var_any'></span>

<h3>Description</h3>

<p>Create a new variable which is true if any of the variables in a list of
variables are true.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_any(newvr, vrs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_any_+3A_newvr">newvr</code></td>
<td>
<p>name of the new variable to be created</p>
</td></tr>
<tr><td><code id="var_any_+3A_vrs">vrs</code></td>
<td>
<p>vector of logical variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_any("Imaging services"
, c("ANYIMAGE", "BONEDENS", "CATSCAN", "ECHOCARD", "OTHULTRA"
, "MAMMO", "MRI", "XRAY", "OTHIMAGE"))
tab("Imaging services")
</code></pre>

<hr>
<h2 id='var_case'>Convert factor to logical</h2><span id='topic+var_case'></span>

<h3>Description</h3>

<p>Convert factor to logical
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_case(newvr, vr, cases, retain_na = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_case_+3A_newvr">newvr</code></td>
<td>
<p>name of the new logical variable to be created</p>
</td></tr>
<tr><td><code id="var_case_+3A_vr">vr</code></td>
<td>
<p>factor variable</p>
</td></tr>
<tr><td><code id="var_case_+3A_cases">cases</code></td>
<td>
<p>one or more levels of <code>vr</code> that are converted to <code>TRUE</code>. All other levels are converted to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="var_case_+3A_retain_na">retain_na</code></td>
<td>
<p>for the observations where <code>vr</code> is <code>NA</code>, should <code>newvr</code> be <code>NA</code> as well?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)

var_case("Preventive care visits", "MAJOR", "Preventive care")
tab("Preventive care visits")

var_case("Surgery-related visits"
, "MAJOR"
, c("Pre-surgery", "Post-surgery"))
tab("Surgery-related visits")

var_case("Non-primary"
, "SPECCAT.bad"
, c("Surgical care specialty", "Medical care specialty"))
tab("Non-primary")
tab("Non-primary", drop_na = TRUE)
</code></pre>

<hr>
<h2 id='var_collapse'>Collapse factor levels</h2><span id='topic+var_collapse'></span>

<h3>Description</h3>

<p>Collapse two or more levels of a factor variable into a single level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_collapse(vr, newlevel, oldlevels)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_collapse_+3A_vr">vr</code></td>
<td>
<p>factor variable</p>
</td></tr>
<tr><td><code id="var_collapse_+3A_newlevel">newlevel</code></td>
<td>
<p>name of the new level</p>
</td></tr>
<tr><td><code id="var_collapse_+3A_oldlevels">oldlevels</code></td>
<td>
<p>vector of old levels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
tab("PRIMCARE")
var_collapse("PRIMCARE", "Unknown if PCP", c("Blank", "Unknown"))
tab("PRIMCARE")
</code></pre>

<hr>
<h2 id='var_copy'>Copy a variable</h2><span id='topic+var_copy'></span>

<h3>Description</h3>

<p>Create a new variable that is a copy of another variable. You can modify the copy,
while the original remains unchanged. See examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_copy(newvr, vr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_copy_+3A_newvr">newvr</code></td>
<td>
<p>name of the new variable to be created</p>
</td></tr>
<tr><td><code id="var_copy_+3A_vr">vr</code></td>
<td>
<p>variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_copy("Age group", "AGER")
var_collapse("Age group", "65+", c("65-74 years", "75 years and over"))
var_collapse("Age group", "25-64", c("25-44 years", "45-64 years"))
tab("AGER", "Age group")
</code></pre>

<hr>
<h2 id='var_cross'>Cross or interact two variables</h2><span id='topic+var_cross'></span>

<h3>Description</h3>

<p>Create a new variable which is an interaction of two other variables. Also
see <code><a href="#topic+tab_cross">tab_cross()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_cross(newvr, vr, vrby)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_cross_+3A_newvr">newvr</code></td>
<td>
<p>name of the new variable to be created</p>
</td></tr>
<tr><td><code id="var_cross_+3A_vr">vr</code></td>
<td>
<p>first variable</p>
</td></tr>
<tr><td><code id="var_cross_+3A_vrby">vrby</code></td>
<td>
<p>second variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_cross("Age x Sex", "AGER", "SEX")
tab("Age x Sex")
</code></pre>

<hr>
<h2 id='var_cut'>Convert numeric to factor</h2><span id='topic+var_cut'></span>

<h3>Description</h3>

<p>Create a new categorical variable based on a numeric variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_cut(newvr, vr, breaks, labels)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_cut_+3A_newvr">newvr</code></td>
<td>
<p>name of the new factor variable to be created</p>
</td></tr>
<tr><td><code id="var_cut_+3A_vr">vr</code></td>
<td>
<p>numeric variable</p>
</td></tr>
<tr><td><code id="var_cut_+3A_breaks">breaks</code></td>
<td>
<p>see <code><a href="base.html#topic+cut">cut()</a></code></p>
</td></tr>
<tr><td><code id="var_cut_+3A_labels">labels</code></td>
<td>
<p>see <code><a href="base.html#topic+cut">cut()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_not">var_not</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
# In some data systems, variables might contain "special values". For example,
# negative values might indicate unknowns (which should be coded as `NA`).
# Though in this particular data, there are no unknowns.
var_cut("Age group"
  , "AGE"
  , c(-Inf, -0.1, 0, 4, 14, 64, Inf)
  , c(NA, "Under 1", "1-4", "5-14", "15-64", "65 and over"))
tab("Age group")
</code></pre>

<hr>
<h2 id='var_list'>List variables in a survey.</h2><span id='topic+var_list'></span>

<h3>Description</h3>

<p>List variables in a survey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_list(sw = "", all = FALSE, csv = getOption("surveytable.csv"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_list_+3A_sw">sw</code></td>
<td>
<p>starting characters in variable name (case insensitive)</p>
</td></tr>
<tr><td><code id="var_list_+3A_all">all</code></td>
<td>
<p>print all variables?</p>
</td></tr>
<tr><td><code id="var_list_+3A_csv">csv</code></td>
<td>
<p>name of a CSV file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_list("age")
</code></pre>

<hr>
<h2 id='var_not'>Logical NOT</h2><span id='topic+var_not'></span>

<h3>Description</h3>

<p>Logical NOT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>var_not(newvr, vr)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="var_not_+3A_newvr">newvr</code></td>
<td>
<p>name of the new variable to be created</p>
</td></tr>
<tr><td><code id="var_not_+3A_vr">vr</code></td>
<td>
<p>a logical variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Survey object
</p>


<h3>See Also</h3>

<p>Other variables: 
<code><a href="#topic+var_all">var_all</a>()</code>,
<code><a href="#topic+var_any">var_any</a>()</code>,
<code><a href="#topic+var_case">var_case</a>()</code>,
<code><a href="#topic+var_collapse">var_collapse</a>()</code>,
<code><a href="#topic+var_copy">var_copy</a>()</code>,
<code><a href="#topic+var_cross">var_cross</a>()</code>,
<code><a href="#topic+var_cut">var_cut</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set_survey(namcs2019sv)
var_not("Private insurance not used", "PAYPRIV")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
