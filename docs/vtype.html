<!DOCTYPE html><html><head><title>Help for package vtype</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {vtype}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#vtype-package'>
<p>Estimates the Variable Type in Error Afflicted Data.</p></a></li>
<li><a href='#date_format_i'>
<p>The function try to identify the format of a Date variable</p></a></li>
<li><a href='#postprocessing_data'>
<p>post processing of data after prediction</p></a></li>
<li><a href='#preprocessing_data'>
<p>pre processing of crude data</p></a></li>
<li><a href='#sim_nqc_data'>
<p>Artificial data, that imitates non-quality controlled data</p></a></li>
<li><a href='#vtype'>
<p>Estimates the Variable Type in Error Afflicted Data.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Estimates the Variable Type in Error Afflicted Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8</td>
</tr>
<tr>
<td>Author:</td>
<td>Andreas Schulz, PhD [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andreas Schulz &lt;ades-s@web.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates the type of variables in non-quality controlled data. The prediction is based on a random forest model, trained on over 5000 medical variables with accuracy of 99%. The accuracy can hardy depend on type and coding style of data.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0), randomForest</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3.0)</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-05-13 07:58:04 UTC; BlackMidiAd</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-05-14 10:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='vtype-package'>
Estimates the Variable Type in Error Afflicted Data.
</h2><span id='topic+vtype-package'></span>

<h3>Description</h3>

<p>Estimates the type of variables in non-quality controlled data. The prediction is based on pre-trained random forest model, trained on over 5000 medical variables with OOB accuracy of 9999pct. The accuracy can hardy depend on type and coding style of data.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> vtype</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.8</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2021-05-13</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL version 3 or newer </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Andreas Schulz, PhD
Maintainer: Andreas Schulz &lt;ades-s@web.de&gt;
</p>

<hr>
<h2 id='date_format_i'>
The function try to identify the format of a Date variable
</h2><span id='topic+date_format_i'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>date_format_i(x, qvalue=0.75, miss_values = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="date_format_i_+3A_x">x</code></td>
<td>

<p>a character vector
</p>
</td></tr>
<tr><td><code id="date_format_i_+3A_qvalue">qvalue</code></td>
<td>

<p>quality value
</p>
</td></tr>
<tr><td><code id="date_format_i_+3A_miss_values">miss_values</code></td>
<td>

<p>a character vector of values considered to be invalid (missing)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a single string with date format
</p>


<h3>Author(s)</h3>

<p>Andreas Schulz
</p>

<hr>
<h2 id='postprocessing_data'>
post processing of data after prediction
</h2><span id='topic+postprocessing_data'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>postprocessing_data(rf_model, agr_data, data, qvalue=0.75, miss_values=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="postprocessing_data_+3A_rf_model">rf_model</code></td>
<td>

<p>RF model
</p>
</td></tr>
<tr><td><code id="postprocessing_data_+3A_agr_data">agr_data</code></td>
<td>

<p>agregeted data
</p>
</td></tr>
<tr><td><code id="postprocessing_data_+3A_data">data</code></td>
<td>

<p>crude data (data,frame)
</p>
</td></tr>
<tr><td><code id="postprocessing_data_+3A_qvalue">qvalue</code></td>
<td>

<p>quality value in [0.1, 1.0]
</p>
</td></tr>
<tr><td><code id="postprocessing_data_+3A_miss_values">miss_values</code></td>
<td>

<p>a character vector of values considered to be invalid (missing)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame
</p>


<h3>Author(s)</h3>

<p>Andreas Schulz
</p>

<hr>
<h2 id='preprocessing_data'>
pre processing of crude data 
</h2><span id='topic+preprocessing_data'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preprocessing_data(data, qvalue = 0.75, miss_values=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="preprocessing_data_+3A_data">data</code></td>
<td>

<p>a data.frame
</p>
</td></tr>
<tr><td><code id="preprocessing_data_+3A_qvalue">qvalue</code></td>
<td>

<p>quality value in [0.1, 1.0]
</p>
</td></tr>
<tr><td><code id="preprocessing_data_+3A_miss_values">miss_values</code></td>
<td>

<p>a character vector of values considered to be invalid (missing)
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Andreas Schulz
</p>

<hr>
<h2 id='sim_nqc_data'>
Artificial data, that imitates non-quality controlled data
</h2><span id='topic+sim_nqc_data'></span>

<h3>Description</h3>

<p>The data set 'sim_nqc_data' contans 100 observations and 14 variables with some not well formatted and missing values. The data is complete artificial and only intended as an application example for the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sim_nqc_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 100 observations on 11 (character) variables.
</p>


<h3>Author(s)</h3>

<p>Andreas Schulz
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
head(sim_nqc_data)

</code></pre>

<hr>
<h2 id='vtype'>
Estimates the Variable Type in Error Afflicted Data.
</h2><span id='topic+vtype'></span>

<h3>Description</h3>

<p>Estimates the type of variables in not quality controlled data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vtype(data, qvalue=0.75, miss_values=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="vtype_+3A_data">data</code></td>
<td>

<p>a data frame.
</p>
</td></tr>
<tr><td><code id="vtype_+3A_qvalue">qvalue</code></td>
<td>

<p>Quality value from 0.1 to 1, specifies the proportion of data assumed to be well formatted.
The default value of 0.75 works very well most of the time. If the quality of the data is very poor, the q-value can be reduced.
If the sample size is very small, it can be increased to use a greater portion of data.
</p>
</td></tr>
<tr><td><code id="vtype_+3A_miss_values">miss_values</code></td>
<td>

<p>a character vector of values considered to be invalid (missing).
Important, if missing values were coded as -9 or 9999, otherwise it looks like valid numeric values.
Values as NA, NaN, Inf, -Inf, NULL and spaces are automatic considered as invalid (missing) values.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The prediction is based on a pre-trained random forest model, trained on over 5000 medical variables with OOB accuracy of 99pct.
The accuracy depends heavily on the type and coding style of data. For example, often categorical variables are coded as integers 1 to x, if the number of categories is very large, there is no way to distinguish it from a continuous integer variable.
Some types are per definition very sensitive to errors in data, like ID, missing or constant, where a single alternative non-missing value makes it not constant or not missing anymore.
The data is assumed to be cross sectional, where ID is unique (no multiple entries per ID).
</p>


<h3>Value</h3>

<p>A data frame with following entries
</p>

<ul>
<li><p>variable:     name of the variable 
</p>
</li>
<li><p>type:         estimated variable type 
</p>
</li>
<li><p>probability:  probability for estimated type 
</p>
</li>
<li><p>format:       format of the variable (depending on the type) 
</p>
</li>
<li><p>class:        broader categorization of type 
</p>
</li>
<li><p>alternative:  posible alternative type with lesser probability  
</p>
</li>
<li><p>n:            number of non-missing values 
</p>
</li>
<li><p>missings:     number of missing values 
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Application to a sample data set included in the package. 

vtype(sim_nqc_data, miss_values='9999')

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
