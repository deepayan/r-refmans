<!DOCTYPE html><html lang="en"><head><title>Help for package questionr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {questionr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addNAstr'><p>Transform missing values of a factor to an extra level</p></a></li>
<li><a href='#children'><p>A fertility survey - &quot;children&quot; table</p></a></li>
<li><a href='#chisq.residuals'><p>Return the chi-squared residuals of a two-way frequency table.</p></a></li>
<li><a href='#clipcopy'><p>Transform an object into HTML and copy it for export</p></a></li>
<li><a href='#cprop'><p>Column percentages of a two-way frequency table.</p></a></li>
<li><a href='#cramer.v'><p>Compute Cramer's V of a two-way frequency table</p></a></li>
<li><a href='#cross.multi.table'><p>Two-way frequency table between a multiple choices question and a factor</p></a></li>
<li><a href='#describe'><p>Describe the variables of a data.frame</p></a></li>
<li><a href='#duplicated2'><p>Determine all duplicate elements</p></a></li>
<li><a href='#enfants'><p>A fertility survey - &quot;enfants&quot; table</p></a></li>
<li><a href='#escape_regex'><p>Escape regex special chars</p>
Code directly taken from Hmisc::escapeRegex</a></li>
<li><a href='#fecondite'><p>A fertility survey</p></a></li>
<li><a href='#femmes'><p>A fertility survey - &quot;femmes&quot; table</p></a></li>
<li><a href='#fertility'><p>A fertility survey</p></a></li>
<li><a href='#first_non_null'><p>Return first non-null of two values</p></a></li>
<li><a href='#format.proptab'><p>S3 format method for proptab objects.</p></a></li>
<li><a href='#freq'><p>Generate frequency tables.</p></a></li>
<li><a href='#freq.na'><p>Generate frequency table of missing values.</p></a></li>
<li><a href='#ggsurvey'><p>Easy ggplot2 with survey objects</p></a></li>
<li><a href='#happy'><p>Data related to happiness from the General Social Survey, 1972-2006.</p></a></li>
<li><a href='#hdv2003'><p>Histoire de vie 2003</p></a></li>
<li><a href='#households'><p>A fertility survey - &quot;households&quot; table</p></a></li>
<li><a href='#icut'><p>Interactive conversion from numeric to factor</p></a></li>
<li><a href='#iorder'><p>Interactive reordering of factor levels</p></a></li>
<li><a href='#irec'><p>Interactive recoding</p></a></li>
<li><a href='#ltabs'><p>Cross tabulation with labelled variables</p></a></li>
<li><a href='#menages'><p>A fertility survey - &quot;menages&quot; table</p></a></li>
<li><a href='#multi.split'><p>Split a multiple choices variable in a series of binary variables</p></a></li>
<li><a href='#multi.table'><p>One-way frequency table for multiple choices question</p></a></li>
<li><a href='#na.rm'><p>Remove observations with missing values</p></a></li>
<li><a href='#odds.ratio'><p>Odds Ratio</p></a></li>
<li><a href='#print.proptab'><p>S3 print method for proptab objects.</p></a></li>
<li><a href='#prop'><p>Global percentages of a two-way frequency table.</p></a></li>
<li><a href='#qload'><p>Load one or more packages, installing them first if necessary</p></a></li>
<li><a href='#qscan'><p>Scan R scripts and load/install all detected packages</p></a></li>
<li><a href='#quant.cut'><p>Transform a quantitative variable into a qualitative variable</p></a></li>
<li><a href='#recode.na'><p>Recode values of a variable to missing values, using exact or regular expression matching.</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#rename.variable'><p>Rename a data frame column</p></a></li>
<li><a href='#rm.unused.levels'><p>Remove unused levels</p></a></li>
<li><a href='#rp2012'><p>2012 French Census - French cities of more than 2000 inhabitants</p></a></li>
<li><a href='#rp2018'><p>2018 French Census - French cities of more than 2000 inhabitants</p></a></li>
<li><a href='#rprop'><p>Row percentages of a two-way frequency table.</p></a></li>
<li><a href='#tabs'><p>Weighted Crossresult</p></a></li>
<li><a href='#women'><p>A fertility survey - &quot;women&quot; table</p></a></li>
<li><a href='#wtd.mean'><p>Weighted mean and variance of a vector</p></a></li>
<li><a href='#wtd.table'><p>Weighted one-way and two-way frequency tables.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Maintainer:</td>
<td>Julien Barnier &lt;julien.barnier@cnrs.fr&gt;</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-01-31</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions to Make Surveys Processing Easier</td>
</tr>
<tr>
<td>Description:</td>
<td>Set of functions to make the processing and analysis of
    surveys easier : interactive shiny apps and addins for data recoding,
    contingency tables, dataset metadata handling, and several convenience
    functions.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>shiny (&ge; 1.0.5), miniUI, rstudioapi, highr, styler, classInt,
htmltools, graphics, stats, utils, rlang, labelled (&ge; 2.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, roxygen2, dplyr, ggplot2, tidyr, janitor, forcats,
knitr, rmarkdown, survey, Hmisc</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>xclip (Linux)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://juba.github.io/questionr/">https://juba.github.io/questionr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/juba/questionr/issues">https://github.com/juba/questionr/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-01-31 13:05:25 UTC; julien</td>
</tr>
<tr>
<td>Author:</td>
<td>Julien Barnier [aut, cre],
  Fran√ßois Briatte [aut],
  Joseph Larmarange [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-01-31 14:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='addNAstr'>Transform missing values of a factor to an extra level</h2><span id='topic+addNAstr'></span>

<h3>Description</h3>

<p>This function modifies a factor by turning <code>NA</code> into an extra level 
(so that <code>NA</code> values are counted in tables, for instance).
This version of <code>addNA</code> extends the same function provided in <span class="rlang"><b>R</b></span> by
allowing to specify a string name for the extra level (see examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addNAstr(x, value = "NA", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addNAstr_+3A_x">x</code></td>
<td>
<p>a vector of data, usually taking a small number of distinct values.</p>
</td></tr>
<tr><td><code id="addNAstr_+3A_value">value</code></td>
<td>
<p>string to use for the extra level name. If NULL, the extra level is created as NA, and the result is the same as the one of the <code>addNA</code> function.</p>
</td></tr>
<tr><td><code id="addNAstr_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>addNA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>"factor"</code>, original missing values being coded as an
extra level named <code>NA</code> if <code>as.string=FALSE</code>, <code>"NA"</code> if 
<code>as.string=TRUE</code>, as specified by <code>as.string</code> if <code>as.string</code> is
a string.
</p>


<h3>Source</h3>

<p>Adapted from James (<a href="https://stackoverflow.com/a/5817181">https://stackoverflow.com/a/5817181</a>) 
by Joseph Larmarange &lt;joseph@larmarange.net&gt;
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+addNA">addNA</a></code> (base).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>f &lt;- as.factor(c("a","b",NA,"a","b"))
f
addNAstr(f)
addNAstr(f, value="missing")
addNAstr(f, value=NULL)
</code></pre>

<hr>
<h2 id='children'>A fertility survey - &quot;children&quot; table</h2><span id='topic+children'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing one record for each child of the surveyed
women in the <a href="#topic+fertility">fertility</a> survey.
</p>

<hr>
<h2 id='chisq.residuals'>Return the chi-squared residuals of a two-way frequency table.</h2><span id='topic+chisq.residuals'></span><span id='topic+residus'></span>

<h3>Description</h3>

<p>Return the raw, standardized or Pearson's residuals (the default) of a chi-squared test on a two-way frequency table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>chisq.residuals(tab, digits = 2, std = FALSE, raw = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="chisq.residuals_+3A_tab">tab</code></td>
<td>
<p>frequency table</p>
</td></tr>
<tr><td><code id="chisq.residuals_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="chisq.residuals_+3A_std">std</code></td>
<td>
<p>if <code>TRUE</code>, returns the standardized residuals. Otherwise, returns the Pearson residuals. Incompatible with <code>raw</code>.</p>
</td></tr>
<tr><td><code id="chisq.residuals_+3A_raw">raw</code></td>
<td>
<p>if <code>TRUE</code>, returns the raw (<code>observed - expected</code>) residuals. Otherwise, returns the Pearson residuals. Incompatible with <code>std</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is just a wrapper around the <code><a href="stats.html#topic+chisq.test">chisq.test</a></code> base R function. See this function's help page
for details on the computation.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+chisq.test">chisq.test</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample table
data(Titanic)
tab &lt;- apply(Titanic, c(1,4), sum)
## Pearson residuals
chisq.residuals(tab)
## Standardized residuals
chisq.residuals(tab, std = TRUE)
## Raw residuals
chisq.residuals(tab, raw = TRUE)
</code></pre>

<hr>
<h2 id='clipcopy'>Transform an object into HTML and copy it for export</h2><span id='topic+clipcopy'></span><span id='topic+copie'></span><span id='topic+copie.default'></span><span id='topic+clipcopy.default'></span><span id='topic+copie.proptab'></span><span id='topic+clipcopy.proptab'></span>

<h3>Description</h3>

<p>This function transforms its argument to HTML with knitr::kable and
then copy it to the clipboard or to a file for later use in an
external application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clipcopy(obj, ...)

## Default S3 method:
clipcopy(
  obj,
  append = FALSE,
  file = FALSE,
  filename = "temp.html",
  clipboard.size = 4096,
  ...
)

## S3 method for class 'proptab'
clipcopy(obj, percent = NULL, digits = NULL, justify = "right", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clipcopy_+3A_obj">obj</code></td>
<td>
<p>object to be copied</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>knitr::kable</code></p>
</td></tr>
<tr><td><code id="clipcopy_+3A_append">append</code></td>
<td>
<p>if TRUE, append to the file instead of replacing it</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_file">file</code></td>
<td>
<p>if TRUE, export to a file instead of the clipboard</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_filename">filename</code></td>
<td>
<p>name of the file to export to</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_clipboard.size">clipboard.size</code></td>
<td>
<p>under Windows, size of the clipboard in kB</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_percent">percent</code></td>
<td>
<p>whether to add a percent sign in each cell</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="clipcopy_+3A_justify">justify</code></td>
<td>
<p>justification</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Under Linux, this function requires that <code>xclip</code> is
installed on the system to copy to the clipboard.
</p>


<h3>Value</h3>

<p><code>NULL</code>
</p>
<p><code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="knitr.html#topic+kable">kable</a></code>, <code><a href="#topic+format.proptab">format.proptab</a></code>
</p>
<p><code><a href="#topic+clipcopy">clipcopy</a></code>, <code><a href="#topic+format.proptab">format.proptab</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(iris)
tab &lt;- table(cut(iris$Sepal.Length, 8), cut(iris$Sepal.Width, 4))
## Not run: 
copie(tab)

## End(Not run)
ptab &lt;- rprop(tab, percent = TRUE)
## Not run: 
clipcopy(ptab)

## End(Not run)
</code></pre>

<hr>
<h2 id='cprop'>Column percentages of a two-way frequency table.</h2><span id='topic+cprop'></span><span id='topic+cprop.table'></span><span id='topic+cprop.data.frame'></span><span id='topic+cprop.matrix'></span><span id='topic+cprop.tabyl'></span>

<h3>Description</h3>

<p>Return the column percentages of a two-way frequency table with formatting and printing options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cprop(tab, ...)

## S3 method for class 'table'
cprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'data.frame'
cprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'matrix'
cprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'tabyl'
cprop(tab, digits = 1, total = TRUE, percent = FALSE, n = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cprop_+3A_tab">tab</code></td>
<td>
<p>frequency table</p>
</td></tr>
<tr><td><code id="cprop_+3A_...">...</code></td>
<td>
<p>parameters passed to other methods.</p>
</td></tr>
<tr><td><code id="cprop_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="cprop_+3A_total">total</code></td>
<td>
<p>if <code>TRUE</code>, add a row with the sum of percentages and a column with global percentages</p>
</td></tr>
<tr><td><code id="cprop_+3A_percent">percent</code></td>
<td>
<p>if <code>TRUE</code>, add a percent sign after the values when printing</p>
</td></tr>
<tr><td><code id="cprop_+3A_drop">drop</code></td>
<td>
<p>if <code>TRUE</code>, lines or columns with a sum of zero, which would generate <code>NaN</code> percentages, are dropped.</p>
</td></tr>
<tr><td><code id="cprop_+3A_n">n</code></td>
<td>
<p>if <code>TRUE</code>, display number of observations per column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is an object of class <code>table</code> and <code>proptab</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rprop">rprop</a></code>, <code><a href="#topic+prop">prop</a></code>, <code><a href="base.html#topic+table">table</a></code>, <code><a href="base.html#topic+prop.table">prop.table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample table
data(Titanic)
tab &lt;- apply(Titanic, c(4,1), sum)
## Column percentages
cprop(tab)
## Column percentages with custom display
cprop(tab, digits=2, percent=TRUE, total=FALSE)
</code></pre>

<hr>
<h2 id='cramer.v'>Compute Cramer's V of a two-way frequency table</h2><span id='topic+cramer.v'></span>

<h3>Description</h3>

<p>This function computes Cramer's V for a two-way frequency table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cramer.v(tab)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cramer.v_+3A_tab">tab</code></td>
<td>
<p>table on which to compute the statistic</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(Titanic)
tab &lt;- apply(Titanic, c(4,1), sum)
#' print(tab)
cramer.v(tab)
</code></pre>

<hr>
<h2 id='cross.multi.table'>Two-way frequency table between a multiple choices question and a factor</h2><span id='topic+cross.multi.table'></span>

<h3>Description</h3>

<p>This function allows to generate a two-way frequency table from a multiple
choices question and a factor. The question's answers must be stored in a
series of binary variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cross.multi.table(
  df,
  crossvar,
  weights = NULL,
  digits = 1,
  freq = FALSE,
  tfreq = "col",
  n = FALSE,
  na.rm = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cross.multi.table_+3A_df">df</code></td>
<td>
<p>data frame with the binary variables</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_crossvar">crossvar</code></td>
<td>
<p>factor to cross the multiple choices question with</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_weights">weights</code></td>
<td>
<p>optional weighting vector</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_digits">digits</code></td>
<td>
<p>number of digits to keep in the output</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_freq">freq</code></td>
<td>
<p>display percentages</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_tfreq">tfreq</code></td>
<td>
<p>type of percentages to compute (&quot;row&quot; or &quot;col&quot;)</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_n">n</code></td>
<td>
<p>if <code>TRUE</code>, and freq is <code>TRUE</code>, display number of observations per row or column</p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_na.rm">na.rm</code></td>
<td>
<p>Remove any NA values in <code>crossvar</code></p>
</td></tr>
<tr><td><code id="cross.multi.table_+3A_...">...</code></td>
<td>
<p>arguments passed to <code>multi.table</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the <code>multi.table</code> help page for details on handling of the multiple
choices question and corresponding binary variables.
</p>
<p>If <code>freq</code> is set to TRUE, the resulting table gives the columns percentages
based on the contingency table of crossvar in the respondants population.
</p>


<h3>Value</h3>

<p>Object of class table.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+multi.table">multi.table</a></code>, <code><a href="#topic+multi.split">multi.split</a></code>, <code><a href="base.html#topic+table">table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample data frame
set.seed(1337)
sex &lt;- sample(c("Man","Woman"),100,replace=TRUE)
jazz &lt;- sample(c(0,1),100,replace=TRUE)
rock &lt;- sample(c(TRUE, FALSE),100,replace=TRUE)
electronic &lt;- sample(c("Y","N"),100,replace=TRUE)
weights &lt;- runif(100)*2
df &lt;- data.frame(sex,jazz,rock,electronic,weights)
## Two-way frequency table on 'music' variables by sex
cross.multi.table(df[,c("jazz", "rock","electronic")], df$sex, true.codes=list("Y"))
## Column percentages based on respondants
cross.multi.table(df[,c("jazz", "rock","electronic")], df$sex, true.codes=list("Y"), freq=TRUE)
## Row percentages based on respondants
cross.multi.table(df[,c("jazz", "rock","electronic")], 
                  df$sex, true.codes=list("Y"), freq=TRUE, tfreq="row", n=TRUE)
</code></pre>

<hr>
<h2 id='describe'>Describe the variables of a data.frame</h2><span id='topic+describe'></span><span id='topic+describe.factor'></span><span id='topic+describe.numeric'></span><span id='topic+describe.character'></span><span id='topic+describe.default'></span><span id='topic+describe.haven_labelled'></span><span id='topic+describe.data.frame'></span><span id='topic+print.description'></span>

<h3>Description</h3>

<p>This function describes the variables of a vector or a dataset that might
include labels imported with <span class="pkg">haven</span> packages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>describe(x, ...)

## S3 method for class 'factor'
describe(x, n = 10, show.length = TRUE, freq.n.max = 10, ...)

## S3 method for class 'numeric'
describe(x, n = 10, show.length = TRUE, freq.n.max = 10, ...)

## S3 method for class 'character'
describe(x, n = 10, show.length = TRUE, freq.n.max = 10, ...)

## Default S3 method:
describe(x, n = 10, show.length = TRUE, freq.n.max = 10, ...)

## S3 method for class 'haven_labelled'
describe(x, n = 10, show.length = TRUE, freq.n.max = 10, ...)

## S3 method for class 'data.frame'
describe(x, ..., n = 10, freq.n.max = 0)

## S3 method for class 'description'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="describe_+3A_x">x</code></td>
<td>
<p>object to describe</p>
</td></tr>
<tr><td><code id="describe_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods, see details</p>
</td></tr>
<tr><td><code id="describe_+3A_n">n</code></td>
<td>
<p>number of first values to display</p>
</td></tr>
<tr><td><code id="describe_+3A_show.length">show.length</code></td>
<td>
<p>display length of the vector?</p>
</td></tr>
<tr><td><code id="describe_+3A_freq.n.max">freq.n.max</code></td>
<td>
<p>display a frequency table if the number of unique values is less than this value, 0 to hide</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When describing a data.frame, you can provide variable names as character strings. 
Using the &quot;*&quot; or &quot;|&quot; wildcards in a variable name will search for it using a regex match.
The search will also take into account variable labels, if any.
See examples.
</p>


<h3>Value</h3>

<p>an object of class <code>description</code>.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange &lt;joseph@larmarange.net&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+lookfor">lookfor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
describe(hdv2003$sexe)
describe(hdv2003$age)
describe(hdv2003)
describe(hdv2003, "cuisine", "heures.tv")
describe(hdv2003, "trav*")
describe(hdv2003, "trav|lecture")
describe(hdv2003, "trav", "lecture")

data(fertility)
describe(women$residency)
describe(women)
describe(women, "id")
</code></pre>

<hr>
<h2 id='duplicated2'>Determine all duplicate elements</h2><span id='topic+duplicated2'></span>

<h3>Description</h3>

<p>The native <a href="base.html#topic+duplicated">duplicated</a> function determines which elements of a vector
or data frame are duplicates of elements already observed in the vector or the
data frame provided. Therefore, only the second occurence (or third or nth)
of an element is considered as a duplicate.
<code>duplicated2</code> is similar but will also mark the first occurence as a
duplicate (see examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duplicated2(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="duplicated2_+3A_x">x</code></td>
<td>
<p>a vector, a data frame or a matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical vector indicated wich elements are duplicated in <code>x</code>.
</p>


<h3>Source</h3>

<p><a href="https://forums.cirad.fr/logiciel-R/viewtopic.php?p=2968">https://forums.cirad.fr/logiciel-R/viewtopic.php?p=2968</a>
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+duplicated">duplicated</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(x = c("a", "b", "c", "b", "d", "c"), y = c(1, 2, 3, 2, 4, 3))
df
duplicated(df)
duplicated2(df)
</code></pre>

<hr>
<h2 id='enfants'>A fertility survey - &quot;enfants&quot; table</h2><span id='topic+enfants'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing one record for each child of the
surveyed women in the <a href="#topic+fecondite">fecondite</a> survey.
</p>

<hr>
<h2 id='escape_regex'>Escape regex special chars
Code directly taken from Hmisc::escapeRegex</h2><span id='topic+escape_regex'></span>

<h3>Description</h3>

<p>Escape regex special chars
Code directly taken from Hmisc::escapeRegex
</p>


<h3>Usage</h3>

<pre><code class='language-R'>escape_regex(s)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="escape_regex_+3A_s">s</code></td>
<td>
<p>string to escape regex special chars from</p>
</td></tr>
</table>

<hr>
<h2 id='fecondite'>A fertility survey</h2><span id='topic+fecondite'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey, with French labels.
</p>


<h3>Format</h3>

<p>3 data frames with labelled data (as if data would have been imported from SPSS with <span class="pkg">haven</span>):
</p>

<ul>
<li> <p><code>menages</code> contains some information from the households selected for the survey;
</p>
</li>
<li> <p><code>femmes</code> contains the questionnaire administered to all 15-49 years old women
living in the selected households;
</p>
</li>
<li><p><code>enfants</code> contains one record for each child of the surveyed women.
</p>
</li></ul>

<p>Data can be linked using the variables <code>id_menage</code> and <code>id_femme</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+fertility">fertility</a> for an English version of this dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fecondite)
describe(menages)
describe(femmes)
describe(enfants)
</code></pre>

<hr>
<h2 id='femmes'>A fertility survey - &quot;femmes&quot; table</h2><span id='topic+femmes'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing the questionnaire administered to all
15-49 years old women living in the selected households for the
<a href="#topic+fecondite">fecondite</a> survey.
</p>

<hr>
<h2 id='fertility'>A fertility survey</h2><span id='topic+fertility'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey, with English labels.
</p>


<h3>Format</h3>

<p>3 data frames with labelled data (as if data would have been imported from SPSS with <span class="pkg">haven</span>):
</p>

<ul>
<li> <p><code>households</code> contains some information from the households selected for the survey;
</p>
</li>
<li> <p><code>women</code> contains the questionnaire administered to all 15-49 years old women
living in the selected households;
</p>
</li>
<li><p><code>children</code> contains one record for each child of the surveyed women.
</p>
</li></ul>

<p>Data can be linked using the variables <code>id_household</code> and <code>id_woman</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+fecondite">fecondite</a> for an French version of this dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fertility)
describe(households)
describe(women)
describe(children)
</code></pre>

<hr>
<h2 id='first_non_null'>Return first non-null of two values</h2><span id='topic+first_non_null'></span><span id='topic++25+7C+7C+25'></span>

<h3>Description</h3>

<p>Return first non-null of two values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %||% y
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="first_non_null_+3A_x">x</code></td>
<td>
<p>first object</p>
</td></tr>
<tr><td><code id="first_non_null_+3A_y">y</code></td>
<td>
<p>second object</p>
</td></tr>
</table>

<hr>
<h2 id='format.proptab'>S3 format method for proptab objects.</h2><span id='topic+format.proptab'></span>

<h3>Description</h3>

<p>Format an object of class proptab for printing depending on its attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'proptab'
format(x, digits = NULL, percent = NULL, justify = "right", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.proptab_+3A_x">x</code></td>
<td>
<p>object of class proptab</p>
</td></tr>
<tr><td><code id="format.proptab_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="format.proptab_+3A_percent">percent</code></td>
<td>
<p>if not NULL, add a percent sign after each value</p>
</td></tr>
<tr><td><code id="format.proptab_+3A_justify">justify</code></td>
<td>
<p>justification of character vectors. Passed to <code>format.default</code></p>
</td></tr>
<tr><td><code id="format.proptab_+3A_...">...</code></td>
<td>
<p>other arguments to pass to <code>format.default</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is designed for internal use only.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+format.default">format.default</a></code>, <code><a href="#topic+print.proptab">print.proptab</a></code>
</p>

<hr>
<h2 id='freq'>Generate frequency tables.</h2><span id='topic+freq'></span>

<h3>Description</h3>

<p>Generate and format frequency tables from a variable or a table, with percentages and formatting options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>freq(
  x,
  digits = 1,
  cum = FALSE,
  total = FALSE,
  exclude = NULL,
  sort = "",
  valid = !(NA %in% exclude),
  levels = c("prefixed", "labels", "values"),
  na.last = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="freq_+3A_x">x</code></td>
<td>
<p>either a vector to be tabulated, or a table object</p>
</td></tr>
<tr><td><code id="freq_+3A_digits">digits</code></td>
<td>
<p>number of digits to keep for the percentages</p>
</td></tr>
<tr><td><code id="freq_+3A_cum">cum</code></td>
<td>
<p>if TRUE, display cumulative percentages</p>
</td></tr>
<tr><td><code id="freq_+3A_total">total</code></td>
<td>
<p>if TRUE, add a final row with totals</p>
</td></tr>
<tr><td><code id="freq_+3A_exclude">exclude</code></td>
<td>
<p>vector of values to exclude from the tabulation (if <code>x</code> is a vector)</p>
</td></tr>
<tr><td><code id="freq_+3A_sort">sort</code></td>
<td>
<p>if specified, allow to sort the table by increasing (&quot;inc&quot;) or decreasing (&quot;dec&quot;) frequencies</p>
</td></tr>
<tr><td><code id="freq_+3A_valid">valid</code></td>
<td>
<p>if TRUE, display valid percentages</p>
</td></tr>
<tr><td><code id="freq_+3A_levels">levels</code></td>
<td>
<p>the desired levels for the factor in case of labelled vector (<span class="pkg">labelled</span> package
must be installed): &quot;labels&quot; for value labels, &quot;values&quot; for values or 
&quot;prefixed&quot; for labels prefixed with values</p>
</td></tr>
<tr><td><code id="freq_+3A_na.last">na.last</code></td>
<td>
<p>if TRUE, NA values are always be last table row</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is an object of class data.frame.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+table">table</a></code>, <code><a href="#topic+prop">prop</a></code>, <code><a href="#topic+cprop">cprop</a></code>, <code><a href="#topic+rprop">rprop</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># factor
data(hdv2003)
freq(hdv2003$qualif)
freq(hdv2003$qualif, cum = TRUE, total = TRUE)
freq(hdv2003$qualif, cum = TRUE, total = TRUE, sort ="dec")

# labelled data
data(fecondite)
freq(femmes$region)
freq(femmes$region, levels = "l")
freq(femmes$region, levels = "v")
</code></pre>

<hr>
<h2 id='freq.na'>Generate frequency table of missing values.</h2><span id='topic+freq.na'></span>

<h3>Description</h3>

<p>Generate a frequency table of missing values as raw counts and percentages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>freq.na(data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="freq.na_+3A_data">data</code></td>
<td>
<p>either a vector or a data frame object</p>
</td></tr>
<tr><td><code id="freq.na_+3A_...">...</code></td>
<td>
<p>if <code>x</code> is a data frame, the names of the variables to examine or keywords to search for such variables. See <code><a href="#topic+lookfor">lookfor</a></code> for more details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is an object of class data.frame.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+table">table</a></code>, <code><a href="base.html#topic+is.na">is.na</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
## Examine a single vector.
freq.na(hdv2003$qualif)
## Examine a data frame.
freq.na(hdv2003)
## Examine several variables.
freq.na(hdv2003, "nivetud", "trav.satisf")
## To see only variables with the most number of missing values
head(freq.na(hdv2003))
</code></pre>

<hr>
<h2 id='ggsurvey'>Easy ggplot2 with survey objects</h2><span id='topic+ggsurvey'></span>

<h3>Description</h3>

<p>A function to facilitate <code>ggplot2</code> graphs using a survey object.
It will initiate a ggplot and map survey weights to the
corresponding aesthetic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggsurvey(design = NULL, mapping = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggsurvey_+3A_design">design</code></td>
<td>
<p>A survey design object, usually created with
<code><a href="survey.html#topic+svydesign">survey::svydesign()</a></code></p>
</td></tr>
<tr><td><code id="ggsurvey_+3A_mapping">mapping</code></td>
<td>
<p>Default list of aesthetic mappings to use for plot,
to be created with <code><a href="ggplot2.html#topic+aes">ggplot2::aes()</a></code>.</p>
</td></tr>
<tr><td><code id="ggsurvey_+3A_...">...</code></td>
<td>
<p>Other arguments passed on to methods. Not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Graphs will be correct as long as only weights are required
to compute the graph. However, statistic or geometry requiring
correct variance computation (like
<code><a href="ggplot2.html#topic+geom_smooth">ggplot2::geom_smooth()</a></code>) will
be statistically incorrect.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (require(survey) &amp; require(ggplot2)) {
  data(api)
  dstrat &lt;- svydesign(
    id = ~1, strata = ~stype,
    weights = ~pw, data = apistrat,
    fpc = ~fpc
  )
  ggsurvey(dstrat) +
    aes(x = cnum, y = dnum) +
    geom_count()

  d &lt;- as.data.frame(Titanic)
  dw &lt;- svydesign(ids = ~1, weights = ~Freq, data = d)
  ggsurvey(dw) +
    aes(x = Class, fill = Survived) +
    geom_bar(position = "fill")
}
</code></pre>

<hr>
<h2 id='happy'>Data related to happiness from the General Social Survey, 1972-2006.</h2><span id='topic+happy'></span>

<h3>Description</h3>

<p>This data extract is taken from Hadley Wickham's <code>productplots</code> package. 
The original description follows, with minor edits.
</p>
<p>The data is a small sample of variables related to
happiness from the General Social Survey (GSS). The GSS
is a yearly cross-sectional survey of Americans, run from
1972. We combine data for 25 years to yield 51,020
observations, and of the over 5,000 variables, we select
nine related to happiness:
</p>


<h3>Format</h3>

<p>A data frame with 51020 rows and 10 variables</p>


<h3>Details</h3>

 
<ul>
<li><p> age. age in years: 18&ndash;89.
</p>
</li>
<li><p> degree. highest education: lt high school, high school, junior college, bachelor, graduate.  
</p>
</li>
<li><p> finrela. relative financial status: far above, above average, average, below average, far below.
</p>
</li>
<li><p> happy. happiness: very happy, pretty happy, not too happy.
</p>
</li>
<li><p> health. health: excellent, good, fair, poor.
</p>
</li>
<li><p> marital. marital status: married, never married, divorced, widowed, separated.
</p>
</li>
<li><p> sex. sex: female, male.
</p>
</li>
<li><p> wtsall. probability weight. 0.43&ndash;6.43.
</p>
</li></ul>



<h3>References</h3>

<p>Smith, Tom W., Peter V. Marsden, Michael Hout, Jibum Kim. <em>General Social Surveys, 1972-2006</em>.
[machine-readable data file]. Principal Investigator, Tom W. Smith; Co-Principal Investigators, 
Peter V. Marsden and Michael Hout, NORC ed. 
Chicago: National Opinion Research Center, producer, 2005; 
Storrs, CT: The Roper Center for Public Opinion Research, University of Connecticut, distributor. 
1 data file (57,061 logical records) and 1 codebook (3,422 pp).
</p>

<hr>
<h2 id='hdv2003'>Histoire de vie 2003</h2><span id='topic+hdv2003'></span>

<h3>Description</h3>

<p>Sample from 2000 people and 20 variables taken from the <em>Histoire de
Vie</em> survey, produced in France in 2003 by INSEE.
</p>


<h3>Format</h3>

<p>A data frame with 2000 rows and 20 variables
</p>


<h3>Source</h3>

<p><a href="https://www.insee.fr/fr/statistiques/2532244">https://www.insee.fr/fr/statistiques/2532244</a>
</p>

<hr>
<h2 id='households'>A fertility survey - &quot;households&quot; table</h2><span id='topic+households'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing some information from the households
selected for the <a href="#topic+fertility">fertility</a> survey.
</p>

<hr>
<h2 id='icut'>Interactive conversion from numeric to factor</h2><span id='topic+icut'></span>

<h3>Description</h3>

<p>This function launches a shiny app in a web browser in order to do
interactive conversion of a numeric variable into a categorical one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>icut(obj = NULL, var_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="icut_+3A_obj">obj</code></td>
<td>
<p>vector to recode or data frame to operate on</p>
</td></tr>
<tr><td><code id="icut_+3A_var_name">var_name</code></td>
<td>
<p>if obj is a data frame, name of the column to be recoded, as a 
character string (possibly without quotes)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function launches a shiny app in the system web browser. The recoding code is 
returned in the console
when the app is closed with the &quot;Done&quot; button.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(hdv2003)
icut(hdv2003, "age")
irec(hdv2003, heures.tv)

## End(Not run)

</code></pre>

<hr>
<h2 id='iorder'>Interactive reordering of factor levels</h2><span id='topic+iorder'></span>

<h3>Description</h3>

<p>This function launches a shiny app in a web browser in order to do
interactive reordering of the levels of a categorical variable (character
or factor).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>iorder(obj = NULL, var_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="iorder_+3A_obj">obj</code></td>
<td>
<p>vector to recode or data frame to operate on</p>
</td></tr>
<tr><td><code id="iorder_+3A_var_name">var_name</code></td>
<td>
<p>if obj is a data frame, name of the column to be recoded,
as a character string possibly without quotes)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The generated convert the variable into a factor, as only those allow for
levels ordering.
</p>


<h3>Value</h3>

<p>The function launches a shiny app in the system web browser. The reordering
code is returned in he console when the app is closed with the &quot;Done&quot; button.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(hdv2003)
iorder(hdv2003, "qualif")

## End(Not run)
</code></pre>

<hr>
<h2 id='irec'>Interactive recoding</h2><span id='topic+irec'></span>

<h3>Description</h3>

<p>This function launches a shiny app in a web browser in order to do
interactive recoding of a categorical variable (character or factor).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>irec(obj = NULL, var_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="irec_+3A_obj">obj</code></td>
<td>
<p>vector to recode or data frame to operate on</p>
</td></tr>
<tr><td><code id="irec_+3A_var_name">var_name</code></td>
<td>
<p>if obj is a data frame, name of the column to be recoded,
as a character string possibly without quotes)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function launches a shiny app in the system web browser. The recoding
code is returned in the onsole
when the app is closed with the &quot;Done&quot; button.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data(hdv2003)
irec()
v &lt;- sample(c("Red", "Green", "Blue"), 50, replace = TRUE)
irec(v)
irec(hdv2003, "qualif")
irec(hdv2003, sexe) ## this also works

## End(Not run)
</code></pre>

<hr>
<h2 id='ltabs'>Cross tabulation with labelled variables</h2><span id='topic+ltabs'></span>

<h3>Description</h3>

<p>This function is a wrapper around <code><a href="stats.html#topic+xtabs">xtabs</a></code>, adding automatically
value labels for labelled vectors if <span class="pkg">labelled</span> package eis installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ltabs(
  formula,
  data,
  levels = c("prefixed", "labels", "values"),
  variable_label = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ltabs_+3A_formula">formula</code></td>
<td>
<p>a formula object (see <code><a href="stats.html#topic+xtabs">xtabs</a></code>)</p>
</td></tr>
<tr><td><code id="ltabs_+3A_data">data</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="ltabs_+3A_levels">levels</code></td>
<td>
<p>the desired levels in case of labelled vector: 
&quot;labels&quot; for value labels, &quot;values&quot; for values or &quot;prefixed&quot; for labels prefixed with values</p>
</td></tr>
<tr><td><code id="ltabs_+3A_variable_label">variable_label</code></td>
<td>
<p>display variable label if available?</p>
</td></tr>
<tr><td><code id="ltabs_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code><a href="stats.html#topic+xtabs">xtabs</a></code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+xtabs">xtabs</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(fecondite)
ltabs(~radio, femmes)
ltabs(~radio+tv, femmes)
ltabs(~radio+tv, femmes, "l")
ltabs(~radio+tv, femmes, "v")
ltabs(~radio+tv+journal, femmes)
ltabs(~radio+tv, femmes, variable_label = FALSE)
</code></pre>

<hr>
<h2 id='menages'>A fertility survey - &quot;menages&quot; table</h2><span id='topic+menages'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing some information from the households selected
for the <a href="#topic+fecondite">fecondite</a> survey.
</p>

<hr>
<h2 id='multi.split'>Split a multiple choices variable in a series of binary variables</h2><span id='topic+multi.split'></span>

<h3>Description</h3>

<p>Split a multiple choices variable in a series of binary variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi.split(var, split.char = "/", mnames = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multi.split_+3A_var">var</code></td>
<td>
<p>variable to split</p>
</td></tr>
<tr><td><code id="multi.split_+3A_split.char">split.char</code></td>
<td>
<p>character to split at</p>
</td></tr>
<tr><td><code id="multi.split_+3A_mnames">mnames</code></td>
<td>
<p>names to give to the produced variabels. If NULL, the name are computed from the original variable name and the answers.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes as input a multiple choices variable where choices
are recorded as a string and separated with a fixed character. For example,
if the question is about the favourite colors, answers could be &quot;red/blue&quot;,
&quot;red/green/yellow&quot;, etc. This function splits the variable into as many variables
as the number of different choices. Each of these variables as a 1 or 0 value
corresponding to the choice of this answer. They are returned as a data frame.
</p>


<h3>Value</h3>

<p>Returns a data frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+multi.table">multi.table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>v &lt;- c("red/blue","green","red/green","blue/red")
multi.split(v)
## One-way frequency table of the result
multi.table(multi.split(v))
</code></pre>

<hr>
<h2 id='multi.table'>One-way frequency table for multiple choices question</h2><span id='topic+multi.table'></span>

<h3>Description</h3>

<p>This function allows to generate a frequency table from a multiple choices question.
The question's answers must be stored in a series of binary variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi.table(df, true.codes = NULL, weights = NULL, digits = 1, freq = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multi.table_+3A_df">df</code></td>
<td>
<p>data frame with the binary variables</p>
</td></tr>
<tr><td><code id="multi.table_+3A_true.codes">true.codes</code></td>
<td>
<p>optional list of values considered as 'true' for the tabulation</p>
</td></tr>
<tr><td><code id="multi.table_+3A_weights">weights</code></td>
<td>
<p>optional weighting vector</p>
</td></tr>
<tr><td><code id="multi.table_+3A_digits">digits</code></td>
<td>
<p>number of digits to keep in the output</p>
</td></tr>
<tr><td><code id="multi.table_+3A_freq">freq</code></td>
<td>
<p>add a percentage column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function is applied to a series of binary variables, each one corresponding to a
choice of the question. For example, if the question is about seen movies among a movies
list, each binary variable would correspond to a movie of the list and be true or false
depending of the choice of the answer.
</p>
<p>By default, only '1' and 'TRUE' as considered as 'true' values fro the binary variables,
and counted in the frequency table. It is possible to specify other values to be counted
with the <code>true.codes</code> argument. Note than '1' and 'TRUE' are always considered as
true values even if <code>true.codes</code> is provided.
</p>
<p>If <code>freq</code> is set to TRUE, a percentage column is added to the resulting table. This
percentage is computed by dividing the number of TRUE answers for each value by the total
number of (potentially weighted) observations. Thus, these percentages sum can be greater
than 100.
</p>


<h3>Value</h3>

<p>Object of class table.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cross.multi.table">cross.multi.table</a></code>, <code><a href="#topic+multi.split">multi.split</a></code>, <code><a href="base.html#topic+table">table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample data frame
set.seed(1337)
sex &lt;- sample(c("Man","Woman"),100,replace=TRUE)
jazz &lt;- sample(c(0,1),100,replace=TRUE)
rock &lt;- sample(c(TRUE, FALSE),100,replace=TRUE)
electronic &lt;- sample(c("Y","N"),100,replace=TRUE)
weights &lt;- runif(100)*2
df &lt;- data.frame(sex,jazz,rock,electronic,weights)
## Frequency table on 'music' variables
multi.table(df[,c("jazz", "rock","electronic")], true.codes=list("Y"))
## Weighted frequency table on 'music' variables
multi.table(df[,c("jazz", "rock","electronic")], true.codes=list("Y"), weights=df$weights)
## No percentages
multi.table(df[,c("jazz", "rock","electronic")], true.codes=list("Y"), freq=FALSE)
</code></pre>

<hr>
<h2 id='na.rm'>Remove observations with missing values</h2><span id='topic+na.rm'></span>

<h3>Description</h3>

<p><code>na.rm</code> is similar to <a href="stats.html#topic+na.omit">na.omit</a> but allows to specify a list of
variables to take into account.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na.rm(x, v = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="na.rm_+3A_x">x</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="na.rm_+3A_v">v</code></td>
<td>
<p>a list of variables</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>v</code> is not specified, the result of <code>na.rm</code> will be the same as
<a href="stats.html#topic+na.omit">na.omit</a>. If a list of variables is specified through <code>v</code>, only
observations with a missing value (<code>NA</code>) for one of the specified
variables will be removed from <code>x</code>. See examples.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange &lt;joseph@larmarange.net&gt;
</p>


<h3>See Also</h3>

<p><a href="stats.html#topic+na.omit">na.omit</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(x = c(1, 2, 3), y = c(0, 10, NA), z = c("a", NA, "b"))
df
na.omit(df)
na.rm(df)
na.rm(df, c("x", "y"))
na.rm(df, "z")
</code></pre>

<hr>
<h2 id='odds.ratio'>Odds Ratio</h2><span id='topic+odds.ratio'></span><span id='topic+odds.ratio.glm'></span><span id='topic+odds.ratio.multinom'></span><span id='topic+odds.ratio.factor'></span><span id='topic+odds.ratio.table'></span><span id='topic+odds.ratio.matrix'></span><span id='topic+odds.ratio.numeric'></span><span id='topic+print.odds.ratio'></span>

<h3>Description</h3>

<p>S3 method for odds ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>odds.ratio(x, ...)

## S3 method for class 'glm'
odds.ratio(x, level = 0.95, ...)

## S3 method for class 'multinom'
odds.ratio(x, level = 0.95, ...)

## S3 method for class 'factor'
odds.ratio(x, fac, level = 0.95, ...)

## S3 method for class 'table'
odds.ratio(x, level = 0.95, ...)

## S3 method for class 'matrix'
odds.ratio(x, level = 0.95, ...)

## S3 method for class 'numeric'
odds.ratio(x, y, level = 0.95, ...)

## S3 method for class 'odds.ratio'
print(x, signif.stars = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="odds.ratio_+3A_x">x</code></td>
<td>
<p>object from whom odds ratio will be computed</p>
</td></tr>
<tr><td><code id="odds.ratio_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods</p>
</td></tr>
<tr><td><code id="odds.ratio_+3A_level">level</code></td>
<td>
<p>the confidence level required</p>
</td></tr>
<tr><td><code id="odds.ratio_+3A_fac">fac</code></td>
<td>
<p>a second factor object</p>
</td></tr>
<tr><td><code id="odds.ratio_+3A_y">y</code></td>
<td>
<p>a second numeric object</p>
</td></tr>
<tr><td><code id="odds.ratio_+3A_signif.stars">signif.stars</code></td>
<td>
<p>logical; if <code>TRUE</code>, p-values are encoded visually as 'significance stars'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For models calculated with <code>glm</code>, <code>x</code> should have
been calculated with <code>family=binomial</code>.
p-value are the same as <code>summary(x)$coefficients[,4]</code>. 
Odds ratio could also be obtained with <code>exp(coef(x))</code> and 
confidence intervals with <code>exp(confint(x))</code>.
</p>
<p>For models calculated with <code>multinom</code> (nnet),
p-value are calculated according to
<a href="https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/">https://stats.oarc.ucla.edu/r/dae/multinomial-logistic-regression/</a>.
</p>
<p>For 2x2 <code>table</code>, <code>factor</code> or <code>matrix</code>, <code>odds.ratio</code>
uses <code><a href="stats.html#topic+fisher.test">fisher.test</a></code> to compute the odds ratio.
</p>


<h3>Value</h3>

<p>Returns a data.frame of class <code>odds.ratio</code> with odds ratios, 
their confidence interval and p-values.
</p>
<p>If <code>x</code> and <code>y</code> are proportions, <code>odds.ratio</code> simply
returns the value of the odds ratio, with no confidence interval.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange &lt;joseph@larmarange.net&gt;
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+glm">glm</a></code> in the <a href="stats.html#topic+stats">stats</a> package.
</p>
<p><code><a href="nnet.html#topic+multinom">multinom</a></code> in the <a href="nnet.html#topic+nnet">nnet</a> package.
</p>
<p><code><a href="stats.html#topic+fisher.test">fisher.test</a></code> in the <a href="stats.html#topic+stats">stats</a> package.
</p>
<p><code><a href="stats.html#topic+printCoefmat">printCoefmat</a></code> in the <a href="stats.html#topic+stats">stats</a> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
reg &lt;- glm(cinema ~ sexe + age, data=hdv2003, family=binomial)
odds.ratio(reg)
odds.ratio(hdv2003$sport, hdv2003$cuisine)
odds.ratio(table(hdv2003$sport, hdv2003$cuisine))
M &lt;- matrix(c(759, 360, 518, 363), ncol = 2)
odds.ratio(M)
odds.ratio(0.26, 0.42)
</code></pre>

<hr>
<h2 id='print.proptab'>S3 print method for proptab objects.</h2><span id='topic+print.proptab'></span>

<h3>Description</h3>

<p>Print an object of class proptab.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'proptab'
print(x, digits = NULL, percent = NULL, justify = "right", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.proptab_+3A_x">x</code></td>
<td>
<p>object of class proptab</p>
</td></tr>
<tr><td><code id="print.proptab_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="print.proptab_+3A_percent">percent</code></td>
<td>
<p>if not NULL, add a percent sign after each value</p>
</td></tr>
<tr><td><code id="print.proptab_+3A_justify">justify</code></td>
<td>
<p>justification of character vectors. Passed to <code>format.default</code></p>
</td></tr>
<tr><td><code id="print.proptab_+3A_...">...</code></td>
<td>
<p>other arguments to pass to <code>format.default</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+format.proptab">format.proptab</a></code>
</p>

<hr>
<h2 id='prop'>Global percentages of a two-way frequency table.</h2><span id='topic+prop'></span><span id='topic+prop_table'></span><span id='topic+prop.data.frame'></span><span id='topic+prop.matrix'></span><span id='topic+prop.tabyl'></span>

<h3>Description</h3>

<p>Return the percentages of a two-way frequency table with formatting and printing options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prop(tab, ...)

prop_table(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'data.frame'
prop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'matrix'
prop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'tabyl'
prop(tab, digits = 1, total = TRUE, percent = FALSE, n = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prop_+3A_tab">tab</code></td>
<td>
<p>frequency table</p>
</td></tr>
<tr><td><code id="prop_+3A_...">...</code></td>
<td>
<p>parameters passed to other methods</p>
</td></tr>
<tr><td><code id="prop_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="prop_+3A_total">total</code></td>
<td>
<p>if <code>TRUE</code>, add a column with the sum of percentages and a row with global percentages</p>
</td></tr>
<tr><td><code id="prop_+3A_percent">percent</code></td>
<td>
<p>if <code>TRUE</code>, add a percent sign after the values when printing</p>
</td></tr>
<tr><td><code id="prop_+3A_drop">drop</code></td>
<td>
<p>if <code>TRUE</code>, lines or columns with a sum of zero, which would generate <code>NaN</code> percentages, are dropped.</p>
</td></tr>
<tr><td><code id="prop_+3A_n">n</code></td>
<td>
<p>if <code>TRUE</code>, display number of observations per row and per column.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is an object of class <code>table</code> and <code>proptab</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rprop">rprop</a></code>, <code><a href="#topic+cprop">cprop</a></code>, <code><a href="base.html#topic+table">table</a></code>, <code><a href="base.html#topic+prop.table">prop.table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample table
data(Titanic)
tab &lt;- apply(Titanic, c(1,4), sum)
## Percentages
prop(tab)
## Percentages with custom display
prop(tab, digits=2, percent=TRUE, total=FALSE, n=TRUE)
</code></pre>

<hr>
<h2 id='qload'>Load one or more packages, installing them first if necessary</h2><span id='topic+qload'></span>

<h3>Description</h3>

<p>This function quickly loads one or more packages, installing them quietly 
if necessary.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qload(..., load = TRUE, silent = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qload_+3A_...">...</code></td>
<td>
<p>the packages to load/install. Packages are loaded with <code>library</code> 
and installed first with <code>install.packages</code> if necessary.</p>
</td></tr>
<tr><td><code id="qload_+3A_load">load</code></td>
<td>
<p>load the packages. Set to <code>FALSE</code> to just install any missing packages. 
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="qload_+3A_silent">silent</code></td>
<td>
<p>keep output as silent as possible.
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function probably requires R 3.0.0 or above to make use of the <code>quiet</code>
argument when calling <code>install.packages</code>. It is not clear what the argument
previously achieved in older versions of R.
</p>


<h3>Value</h3>

<p>The result is a list of packages cited in the scripts.
</p>


<h3>Author(s)</h3>

<p>Fran√ßois Briatte &lt;f.briatte@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+qscan">qscan</a></code>, <code><a href="utils.html#topic+install.packages">install.packages</a></code>, <code><a href="base.html#topic+library">library</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>qload("questionr")
qload("questionr", silent = FALSE)
</code></pre>

<hr>
<h2 id='qscan'>Scan R scripts and load/install all detected packages</h2><span id='topic+qscan'></span>

<h3>Description</h3>

<p>This function scans one or more R scripts and tries to quick-load/install 
the packages mentioned by <code>library</code> or <code>require</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qscan(..., load = TRUE, detail = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="qscan_+3A_...">...</code></td>
<td>
<p>the scripts to scan. 
Defaults to all R scripts in the current working directory.</p>
</td></tr>
<tr><td><code id="qscan_+3A_load">load</code></td>
<td>
<p>quick-load/install the cited packages (see details). 
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="qscan_+3A_detail">detail</code></td>
<td>
<p>show the list of packages found in each script. 
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function calls the <code>qload</code> function to quick-load/install the packages.
</p>


<h3>Value</h3>

<p>The result is a list of packages cited in the scripts.
</p>


<h3>Author(s)</h3>

<p>Fran√ßois Briatte &lt;f.briatte@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+qload">qload</a></code>, <code><a href="base.html#topic+library">library</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Scan the working directory.
## Not run: qscan()
</code></pre>

<hr>
<h2 id='quant.cut'>Transform a quantitative variable into a qualitative variable</h2><span id='topic+quant.cut'></span>

<h3>Description</h3>

<p>This function transforms a quantitative variable into a qualitative
one by breaking it into classes with the same frequencies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>quant.cut(var, nbclass, include.lowest = TRUE, right = FALSE, dig.lab = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="quant.cut_+3A_var">var</code></td>
<td>
<p>variable to transform</p>
</td></tr>
<tr><td><code id="quant.cut_+3A_nbclass">nbclass</code></td>
<td>
<p>number of classes</p>
</td></tr>
<tr><td><code id="quant.cut_+3A_include.lowest">include.lowest</code></td>
<td>
<p>argument passed to the <code>cut</code> function</p>
</td></tr>
<tr><td><code id="quant.cut_+3A_right">right</code></td>
<td>
<p>argument passed to the <code>cut</code> function</p>
</td></tr>
<tr><td><code id="quant.cut_+3A_dig.lab">dig.lab</code></td>
<td>
<p>argument passed to the <code>cut</code> function</p>
</td></tr>
<tr><td><code id="quant.cut_+3A_...">...</code></td>
<td>
<p>arguments passed to the <code>cut</code> function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is just a simple wrapper around the <code>cut</code> and <code>quantile</code>
functions.
</p>


<h3>Value</h3>

<p>The result is a factor.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+cut">cut</a></code>, <code><a href="stats.html#topic+quantile">quantile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(iris)
sepal.width3cl &lt;- quant.cut(iris$Sepal.Width,3)
table(sepal.width3cl)
</code></pre>

<hr>
<h2 id='recode.na'>Recode values of a variable to missing values, using exact or regular expression matching.</h2><span id='topic+recode.na'></span>

<h3>Description</h3>

<p>This function recodes selected values of a quantitative or qualitative
variable by matching its levels to exact or regular expression matches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recode.na(x, ..., verbose = FALSE, regex = TRUE, as.numeric = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="recode.na_+3A_x">x</code></td>
<td>
<p>variable to recode. The variable is coerced to a factor if necessary.</p>
</td></tr>
<tr><td><code id="recode.na_+3A_...">...</code></td>
<td>
<p>levels to recode as missing in the variable. The values are coerced to character strings, meaning that you can pass numeric values to the function.</p>
</td></tr>
<tr><td><code id="recode.na_+3A_verbose">verbose</code></td>
<td>
<p>print a table of missing levels before recoding them as missing. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="recode.na_+3A_regex">regex</code></td>
<td>
<p>use regular expressions to match values that include the &quot;*&quot; or &quot;|&quot; wildcards. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="recode.na_+3A_as.numeric">as.numeric</code></td>
<td>
<p>coerce the recoded variable to <code>numeric</code>. The function recommends the option when the recode returns only numeric values. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is a factor with properly encoded missing values. If the recoded variable contains only numeric values, it is converted to an object of class <code>numeric</code>.
</p>


<h3>Author(s)</h3>

<p>Fran√ßois Briatte &lt;f.briatte@gmail.com&gt;
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+regex">regex</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
## With exact string matches.
hdv2003$nivetud = recode.na(hdv2003$nivetud, "Inconnu")
## With regular expressions.
hdv2003$relig = recode.na(hdv2003$relig, "[A|a]ppartenance", "Rejet|NSP")
## Showing missing values. 
hdv2003$clso = recode.na(hdv2003$clso, "Ne sait pas", verbose = TRUE)
## Test results with freq.
freq(recode.na(hdv2003$trav.satisf, "Equilibre"))
## Truncate a count variable (recommends numeric conversion).
freq(recode.na(hdv2003$freres.soeurs, 5:22))
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+look_for'></span><span id='topic+lookfor'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>labelled</dt><dd><p><code><a href="labelled.html#topic+look_for">look_for</a></code>, <code><a href="labelled.html#topic+look_for">lookfor</a></code></p>
</dd>
</dl>

<hr>
<h2 id='rename.variable'>Rename a data frame column</h2><span id='topic+rename.variable'></span><span id='topic+renomme.variable'></span>

<h3>Description</h3>

<p>Rename a data frame column
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rename.variable(df, old, new)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rename.variable_+3A_df">df</code></td>
<td>
<p>data frame</p>
</td></tr>
<tr><td><code id="rename.variable_+3A_old">old</code></td>
<td>
<p>old name</p>
</td></tr>
<tr><td><code id="rename.variable_+3A_new">new</code></td>
<td>
<p>new name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the column named &quot;old&quot; renamed as &quot;new&quot;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(iris)
str(iris)
iris &lt;- rename.variable(iris, "Species", "especes")
str(iris)
</code></pre>

<hr>
<h2 id='rm.unused.levels'>Remove unused levels</h2><span id='topic+rm.unused.levels'></span>

<h3>Description</h3>

<p>This function removes unused levels of a factor or in a data.frame. See examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm.unused.levels(x, v = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rm.unused.levels_+3A_x">x</code></td>
<td>
<p>a factor or a data frame</p>
</td></tr>
<tr><td><code id="rm.unused.levels_+3A_v">v</code></td>
<td>
<p>a list of variables (optional, if <code>x</code> is a data frame)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> is a data frame, only factor variables of <code>x</code> will be impacted.
If a list of variables is provided through <code>v</code>, only the unused levels of the
specified variables will be removed.
</p>


<h3>Author(s)</h3>

<p>Joseph Larmarange &lt;joseph@larmarange.net&gt;
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(v1 = c("a", "b", "a", "b"), v2 = c("x", "x", "y", "y"))
df$v1 &lt;- factor(df$v1, c("a", "b", "c"))
df$v2 &lt;- factor(df$v2, c("x", "y", "z"))
df
str(df)
str(rm.unused.levels(df))
str(rm.unused.levels(df, "v1"))
</code></pre>

<hr>
<h2 id='rp2012'>2012 French Census - French cities of more than 2000 inhabitants</h2><span id='topic+rp2012'></span>

<h3>Description</h3>

<p>Sample from the 2012 national french census. It contains results for
every french city of more than 2000 inhabitants, and a small subset of
variables, both in population counts and proportions.
</p>


<h3>Format</h3>

<p>A data frame with 5170 rows and 60 variables
</p>


<h3>Source</h3>

<p><a href="https://www.insee.fr/fr/information/2008354">https://www.insee.fr/fr/information/2008354</a>
</p>

<hr>
<h2 id='rp2018'>2018 French Census - French cities of more than 2000 inhabitants</h2><span id='topic+rp2018'></span>

<h3>Description</h3>

<p>Sample from the 2018 national french census. It contains results for every
french city of more than 2000 inhabitants, and a small subset of variables,
both in population counts and proportions.
</p>


<h3>Format</h3>

<p>A data frame with 5417 rows and 62 variables
</p>


<h3>Source</h3>

<p><a href="https://www.insee.fr/fr/information/5369871">https://www.insee.fr/fr/information/5369871</a>
</p>

<hr>
<h2 id='rprop'>Row percentages of a two-way frequency table.</h2><span id='topic+rprop'></span><span id='topic+lprop'></span><span id='topic+rprop.table'></span><span id='topic+rprop.data.frame'></span><span id='topic+rprop.matrix'></span><span id='topic+rprop.tabyl'></span>

<h3>Description</h3>

<p>Return the row percentages of a two-way frequency table with formatting and printing options.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rprop(tab, ...)

## S3 method for class 'table'
rprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'data.frame'
rprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'matrix'
rprop(
  tab,
  digits = 1,
  total = TRUE,
  percent = FALSE,
  drop = TRUE,
  n = FALSE,
  ...
)

## S3 method for class 'tabyl'
rprop(tab, digits = 1, total = TRUE, percent = FALSE, n = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rprop_+3A_tab">tab</code></td>
<td>
<p>frequency table</p>
</td></tr>
<tr><td><code id="rprop_+3A_...">...</code></td>
<td>
<p>parameters passed to other methods.</p>
</td></tr>
<tr><td><code id="rprop_+3A_digits">digits</code></td>
<td>
<p>number of digits to display</p>
</td></tr>
<tr><td><code id="rprop_+3A_total">total</code></td>
<td>
<p>if <code>TRUE</code>, add a column with the sum of percentages and a row with global percentages</p>
</td></tr>
<tr><td><code id="rprop_+3A_percent">percent</code></td>
<td>
<p>if <code>TRUE</code>, add a percent sign after the values when printing</p>
</td></tr>
<tr><td><code id="rprop_+3A_drop">drop</code></td>
<td>
<p>if <code>TRUE</code>, lines or columns with a sum of zero, which would generate <code>NaN</code> percentages, are dropped.</p>
</td></tr>
<tr><td><code id="rprop_+3A_n">n</code></td>
<td>
<p>if <code>TRUE</code>, display number of observations per row.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result is an object of class <code>table</code> and <code>proptab</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cprop">cprop</a></code>, <code><a href="#topic+prop">prop</a></code>, <code><a href="base.html#topic+table">table</a></code>, <code><a href="base.html#topic+prop.table">prop.table</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Sample table
data(Titanic)
tab &lt;- apply(Titanic, c(1,4), sum)
## Column percentages
rprop(tab)
## Column percentages with custom display
rprop(tab, digits=2, percent=TRUE, total=FALSE)
</code></pre>

<hr>
<h2 id='tabs'>Weighted Crossresult</h2><span id='topic+tabs'></span>

<h3>Description</h3>

<p>Generate table with multiple weighted crossresult (full sample is first column).
kable(), which is found in library(knitr), is recommended for use with RMarkdown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabs(
  df,
  x,
  y,
  type = "percent",
  percent = FALSE,
  weight = NULL,
  normwt = FALSE,
  na.rm = TRUE,
  na.show = FALSE,
  exclude = NULL,
  digits = 1
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tabs_+3A_df">df</code></td>
<td>
<p>A data.frame that contains <code>x</code> and (optionally) <code>y</code> and <code>weight</code>.</p>
</td></tr>
<tr><td><code id="tabs_+3A_x">x</code></td>
<td>
<p>variable name (found in <code>df</code>). tabs(my.data, x = 'q1').</p>
</td></tr>
<tr><td><code id="tabs_+3A_y">y</code></td>
<td>
<p>one (or more) variable names. tabs(my.data, x = 'q1', y = c('sex', 'job')).</p>
</td></tr>
<tr><td><code id="tabs_+3A_type">type</code></td>
<td>
<p>'percent' (default ranges 0-100), 'proportion', or 'counts' (type of table returned).</p>
</td></tr>
<tr><td><code id="tabs_+3A_percent">percent</code></td>
<td>
<p>if <code>TRUE</code>, add a percent sign after the values when printing</p>
</td></tr>
<tr><td><code id="tabs_+3A_weight">weight</code></td>
<td>
<p>variable name for weight (found in <code>df</code>).</p>
</td></tr>
<tr><td><code id="tabs_+3A_normwt">normwt</code></td>
<td>
<p>if TRUE, normalize weights so that the total weighted count is the same as the unweighted one</p>
</td></tr>
<tr><td><code id="tabs_+3A_na.rm">na.rm</code></td>
<td>
<p>if TRUE, remove NA values before computation</p>
</td></tr>
<tr><td><code id="tabs_+3A_na.show">na.show</code></td>
<td>
<p>if TRUE, show NA count in table output</p>
</td></tr>
<tr><td><code id="tabs_+3A_exclude">exclude</code></td>
<td>
<p>values to remove from x and y. To exclude NA, use na.rm argument.</p>
</td></tr>
<tr><td><code id="tabs_+3A_digits">digits</code></td>
<td>
<p>Number of digits to display; ?format.proptab for formatting details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>tabs calls wtd.table on '<code>x</code>' and, as applicable, each variable named by '<code>y</code>'.
</p>


<h3>Author(s)</h3>

<p>Pete Mohanty
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003) 
tabs(hdv2003, x = "relig", y = c("qualif", "trav.imp"), weight = "poids")
result &lt;- tabs(hdv2003, x = "relig", y = c("qualif", "trav.imp"), type = "counts")
format(result, digits = 3)
# library(knitr)
# xt &lt;- tabs(hdv2003, x = "relig", y = c("qualif", "trav.imp"), weight = "poids")
# kable(format(xt))                        # to use with RMarkdown...

</code></pre>

<hr>
<h2 id='women'>A fertility survey - &quot;women&quot; table</h2><span id='topic+women'></span>

<h3>Description</h3>

<p>Some fictive results from a fecondity survey.
</p>


<h3>Format</h3>

<p>a data frame containing the questionnaire administered to all
15-49 years old women living in the selected households for the
<a href="#topic+fertility">fertility</a> survey.
</p>

<hr>
<h2 id='wtd.mean'>Weighted mean and variance of a vector</h2><span id='topic+wtd.mean'></span><span id='topic+wtd.var'></span>

<h3>Description</h3>

<p>Compute the weighted mean or weighted variance of a vector. Exact copies of Hmisc 
functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtd.mean(x, weights = NULL, na.rm = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wtd.mean_+3A_x">x</code></td>
<td>
<p>Numeric data vector</p>
</td></tr>
<tr><td><code id="wtd.mean_+3A_weights">weights</code></td>
<td>
<p>Numeric weights vector. Must be the same length as <code>x</code></p>
</td></tr>
<tr><td><code id="wtd.mean_+3A_na.rm">na.rm</code></td>
<td>
<p>if <code>TRUE</code>, delete <code>NA</code> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>weights</code> is <code>NULL</code>, then an uniform weighting is applied.
</p>


<h3>Author(s)</h3>

<p>These functions are exact copies of the <code>wtd.mean</code> and <code>wtd.var</code>
function from the <a href="Hmisc.html#topic+wtd.stats">wtd.stats</a> package. They have been created by 
Frank Harrell, Department of Biostatistics, Vanderbilt University School of 
Medicine, &lt;f.harrell@vanderbilt.edu&gt;.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+mean">mean</a></code>,<code><a href="stats.html#topic+var">var</a></code>, <code><a href="#topic+wtd.table">wtd.table</a></code> and the <code>survey</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
mean(hdv2003$age)
wtd.mean(hdv2003$age, weights=hdv2003$poids)
</code></pre>

<hr>
<h2 id='wtd.table'>Weighted one-way and two-way frequency tables.</h2><span id='topic+wtd.table'></span>

<h3>Description</h3>

<p>Generate weighted frequency tables, both for one-way and two-way tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wtd.table(
  x,
  y = NULL,
  weights = NULL,
  digits = 3,
  normwt = FALSE,
  useNA = c("no", "ifany", "always"),
  na.rm = TRUE,
  na.show = FALSE,
  exclude = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="wtd.table_+3A_x">x</code></td>
<td>
<p>a vector</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_y">y</code></td>
<td>
<p>another optional vector for a two-way frequency table. Must be the same length as <code>x</code></p>
</td></tr>
<tr><td><code id="wtd.table_+3A_weights">weights</code></td>
<td>
<p>vector of weights, must be the same length as <code>x</code></p>
</td></tr>
<tr><td><code id="wtd.table_+3A_digits">digits</code></td>
<td>
<p>Number of significant digits.</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_normwt">normwt</code></td>
<td>
<p>if TRUE, normalize weights so that the total weighted count is the same as the unweighted one</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_usena">useNA</code></td>
<td>
<p>wether to include NA values in the table</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_na.rm">na.rm</code></td>
<td>
<p>(deprecated) if TRUE, remove NA values before computation</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_na.show">na.show</code></td>
<td>
<p>(deprecated) if TRUE, show NA count in table output</p>
</td></tr>
<tr><td><code id="wtd.table_+3A_exclude">exclude</code></td>
<td>
<p>values to remove from x and y. To exclude NA, use na.rm argument.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>weights</code> is not provided, an uniform weghting is used. 
</p>
<p>If some weights are missing ('NA'), they are converted to zero. In case of missing weights 
with 'normwt=TRUE', the observations with missing weights are still counted in the unweighted 
count. You have to filter them out before using this function if you don't want them to be 
taken into account when using 'normwt'.
</p>


<h3>Value</h3>

<p>If <code>y</code> is not provided, returns a weighted one-way frequency table
of <code>x</code>. Otherwise, returns a weighted two-way frequency table of
<code>x</code> and <code>y</code>
</p>


<h3>See Also</h3>

<p><code><a href="Hmisc.html#topic+wtd.table">wtd.table</a></code>, <code><a href="base.html#topic+table">table</a></code>, and the <code>survey</code> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(hdv2003)
wtd.table(hdv2003$sexe, weights=hdv2003$poids)
wtd.table(hdv2003$sexe, weights=hdv2003$poids, normwt=TRUE)
table(hdv2003$sexe, hdv2003$hard.rock)
wtd.table(hdv2003$sexe, hdv2003$hard.rock, weights=hdv2003$poids)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
