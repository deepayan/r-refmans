<!DOCTYPE html><html><head><title>Help for package moderate.mediation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {moderate.mediation}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#modmed'><p>Causal Moderated Mediation Analysis</p></a></li>
<li><a href='#modmed.plot'><p>Visual Representation of the Causal Moderated Mediation Analysis Results</p></a></li>
<li><a href='#modmed.sens'><p>Simulation-Based Sensitivity Analysis Table for Causal Moderated Mediation Analysis</p></a></li>
<li><a href='#newws'><p>NEWWS Riverside data</p></a></li>
<li><a href='#sens.plot'><p>Simulation-Based Sensitivity Analysis Plot for Causal Moderated Mediation Analysis</p></a></li>
<li><a href='#summary_modmed'><p>Summarizing Output for Causal Moderated Mediation Analysis</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.0.10</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-05-22</td>
</tr>
<tr>
<td>Title:</td>
<td>Causal Moderated Mediation Analysis</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xu Qin &lt;xuqin@pitt.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, mvtnorm, cowplot, distr, graphics, ggplot2, reshape2,
doSNOW, scales, foreach, earth</td>
</tr>
<tr>
<td>Description:</td>
<td>Causal moderated mediation analysis using the methods proposed by Qin and Wang (2023) &lt;<a href="https://doi.org/10.3758%2Fs13428-023-02095-4">doi:10.3758/s13428-023-02095-4</a>&gt;. Causal moderated mediation analysis is crucial for investigating how, for whom, and where a treatment is effective by assessing the heterogeneity of mediation mechanism across individuals and contexts. This package enables researchers to estimate and test the conditional and moderated mediation effects, assess their sensitivity to unmeasured pre-treatment confounding, and visualize the results. The package is built based on the quasi-Bayesian Monte Carlo method, because it has relatively better performance at small sample sizes, and its running speed is the fastest. The package is applicable to a treatment of any scale, a binary or continuous mediator, a binary or continuous outcome, and one or more moderators of any scale. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-23 03:32:28 UTC; XUQIN</td>
</tr>
<tr>
<td>Author:</td>
<td>Xu Qin [aut, cre, cph],
  Lijuan Wang [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-23 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='modmed'>Causal Moderated Mediation Analysis</h2><span id='topic+modmed'></span>

<h3>Description</h3>

<p>'modmed' is used to fit mediator and outcome models and estimate and test causal effects for causal moderated mediation analysis. It is applicable to a treatment of any scale, a binary or continuous mediator and outcome, one or more moderators of any scale, and a wide range of scenarios of moderated mediation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modmed(
  data,
  treatment,
  mediator,
  outcome,
  covariates.disc = NULL,
  covariates.cont = NULL,
  moderators.disc = NULL,
  moderators.cont = NULL,
  m.model,
  y.model,
  comp.treatment.value = 1,
  ref.treatment.value = 0,
  comp.mod.disc.values = NULL,
  ref.mod.disc.values = NULL,
  comp.mod.cont.values = NULL,
  ref.mod.cont.values = NULL,
  m.scale = "continuous",
  y.scale = "continuous",
  method = "mc",
  nmc = 1000,
  nboot = 1000,
  conf.level = 0.95,
  seed = NULL,
  object = NULL,
  is.U = FALSE,
  sens.effect = NULL,
  b.m = NULL,
  b.y = NULL,
  plot.effect = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modmed_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the analysis. Users need to impute any missing values in the data before running the function.</p>
</td></tr>
<tr><td><code id="modmed_+3A_treatment">treatment</code></td>
<td>
<p>A character string indicating the name of the treatment variable. If a treatment is binary, please code it as 0 and 1.</p>
</td></tr>
<tr><td><code id="modmed_+3A_mediator">mediator</code></td>
<td>
<p>A character string indicating the name of the mediator variable.</p>
</td></tr>
<tr><td><code id="modmed_+3A_outcome">outcome</code></td>
<td>
<p>A character string indicating the name of the outcome variable.</p>
</td></tr>
<tr><td><code id="modmed_+3A_covariates.disc">covariates.disc</code></td>
<td>
<p>A name vector of the discrete pretreatment covariates that are not moderators (string). The default is NULL. Users do not need to reformat discrete variables. If treatment is randomized, it should contain confounders of the mediator-outcome relationship. If treatment is not randomized, it should also contain confounders of the treatment-mediator and treatment-outcome relationships. Please do not include moderators here. The main effects of moderators are accounted for by including the moderators in the model of the main model intercept.</p>
</td></tr>
<tr><td><code id="modmed_+3A_covariates.cont">covariates.cont</code></td>
<td>
<p>A name vector of the continuous pretreatment covariates that are not moderators (string). The default is NULL. If treatment is randomized, it should contain confounders of the mediator-outcome relationship. If treatment is not randomized, it should also contain confounders of the treatment-mediator and treatment-outcome relationships. Please do not include moderators here. The main effects of moderators are accounted for by including the moderators in the model of the main model intercept.</p>
</td></tr>
<tr><td><code id="modmed_+3A_moderators.disc">moderators.disc</code></td>
<td>
<p>A name vector of all the discrete moderators under study (string). The default is NULL.</p>
</td></tr>
<tr><td><code id="modmed_+3A_moderators.cont">moderators.cont</code></td>
<td>
<p>A name vector of all the continuous moderators under study (string). The default is NULL.</p>
</td></tr>
<tr><td><code id="modmed_+3A_m.model">m.model</code></td>
<td>
<p>A list. The name of each element in the list is a predictor in the main mediator model.  The names must include intercept, treatment, covariates.disc, and covariates.cont. Each element of the list is a vector of the names of the moderators (string) of the coefficient of the main model predictor as represented by the name of the element. Each moderator specified in moderators.disc and moderators.cont must moderate at least one slope in either the mediator model or the outcome model. The moderators of the intercept must include all the moderators in the mediator model. If a main model coefficient is not moderated, then the corresponding vector should be specified as NULL. The set of moderators in m.model and that in y.model are not necessarily the same. In other words, for a moderator that moderates coefficient(s) in one model, it is possible that it does not occur in the other model. It is also possible that it only has its main effect in the other model, in which case it will be only included in the vector of the intercept in the list of the other model. The union of the two sets of moderators should be contained in the union of moderators.disc, and moderators.cont. If no moderators are specified, only the population average mediation effects are estimated and tested. Check examples for details.</p>
</td></tr>
<tr><td><code id="modmed_+3A_y.model">y.model</code></td>
<td>
<p>A list. The name of each element in the list is a predictor in the main outcome model. The names must include intercept, treatment, mediator, covariates.disc, and covariates.cont. If the treatment is assumed to interact with the mediator when affecting the outcome, an additional element should be added to y.model, named as &quot;tm&quot;. Each element of the list is a vector of the names of the moderators (string) of the coefficient of the main model predictor as represented by the name of the element. Each moderator specified in moderators.disc and moderators.cont must moderate at least one slope in either the main mediator model or the main outcome model. The moderators of the intercept must include all the moderators in the mediator model. If a main model coefficient is not moderated, then the corresponding vector should be specified as NULL. The set of moderators in m.model and that in y.model are not necessarily the same. In other words, for a moderator that moderates coefficient(s) in one model, it is possible that it does not occur in the other model. It is also possible that it only has its main effect in the other model, in which case it will be only included in the vector of the intercept in the list of the other model. The union of the two sets of moderators should be contained in the union of moderators.disc, and moderators.cont. If no moderators are specified, only the population average mediation effects are estimated and tested. Check examples for details.</p>
</td></tr>
<tr><td><code id="modmed_+3A_comp.treatment.value">comp.treatment.value</code></td>
<td>
<p>If the total treatment effect for each individual is defined as Y(t) - Y(t'), comp.treatment.value refers to t. The default is 1.</p>
</td></tr>
<tr><td><code id="modmed_+3A_ref.treatment.value">ref.treatment.value</code></td>
<td>
<p>If the total treatment effect for each individual is defined as Y(t) - Y(t'), ref.treatment.value refers to t'. The default is 0.</p>
</td></tr>
<tr><td><code id="modmed_+3A_comp.mod.disc.values">comp.mod.disc.values</code></td>
<td>
<p>A vector of compare values of the discrete moderators given which the conditional causal effects are estimated. The default is NULL.  The length and order of comp.mod.disc.values should be the same as moderators.disc. If one does not want to condition some moderators on specific values, one may specify their values to be NA. If the discrete moderators take the same compare value, comp.moderator.disc.values can be specified as a single value. If not NULL, results contrasting the causal effects given compare moderator values with those given reference moderator values will be reported.</p>
</td></tr>
<tr><td><code id="modmed_+3A_ref.mod.disc.values">ref.mod.disc.values</code></td>
<td>
<p>A vector of reference values of the discrete moderators given which the conditional causal effects are estimated. The default is NULL. The length and order of ref.mod.disc.values should be the same as moderators.disc. If one does not want to condition some moderators on specific values, one may specify their values to be NA. If the discrete moderators take the same reference value, ref.moderator.disc.values can be specified as a single value. The moderators whose reference values are specified must be included in either the mediator model or the outcome model or both.</p>
</td></tr>
<tr><td><code id="modmed_+3A_comp.mod.cont.values">comp.mod.cont.values</code></td>
<td>
<p>A vector of compare values of the continuous moderators given which the conditional causal effects are estimated. The default is NULL. The length and order of comp.mod.cont.values should be the same as moderators.cont. If one does not want to condition some moderators on specific values, one may specify their values to be NA. If the continuous moderators take the same compare value, comp.moderator.cont.values can be specified as a single value. If not NULL, results contrasting the causal effects given compare moderator values with those given reference moderator values will be reported.</p>
</td></tr>
<tr><td><code id="modmed_+3A_ref.mod.cont.values">ref.mod.cont.values</code></td>
<td>
<p>A vector of reference values of the continuous moderators given which the conditional causal effects are estimated. The default is NULL. The length and order of ref.mod.cont.values should be the same as moderators.cont. If one does not want to condition some moderators on specific values, one may specify their values to be NA. If the continuous moderators take the same reference value, ref.moderator.cont.values can be specified as a single value. The moderators whose reference values are specified must be included in either the mediator model or the outcome model or both.</p>
</td></tr>
<tr><td><code id="modmed_+3A_m.scale">m.scale</code></td>
<td>
<p>A character string indicating the scale of the mediator. &quot;continuous&quot; if the mediator is continuous. &quot;binary&quot; if the mediator is binary. Probit link is used in this case. The default is &quot;continuous&quot;.</p>
</td></tr>
<tr><td><code id="modmed_+3A_y.scale">y.scale</code></td>
<td>
<p>A character string indicating the scale of the outcome. &quot;continuous&quot; if the outcome is continuous. &quot;binary&quot; if the outcome is binary. Probit link is used in this case. The default is &quot;continuous&quot;.</p>
</td></tr>
<tr><td><code id="modmed_+3A_method">method</code></td>
<td>
<p>Estimation and inference method. if 'mc', the Monte Carlo method is used; if 'boot', bootstrap is used. Default is 'mc'. When sample size is relatively small and the mediator or binary is binary, 'boot' is preferred. Otherwise, 'mc' is more recommended, mainly because its running speed is much faster.</p>
</td></tr>
<tr><td><code id="modmed_+3A_nmc">nmc</code></td>
<td>
<p>Number of simulations involved in the Monte Carlo algorithm. Used if method = 'mc'. The default value is 1000.</p>
</td></tr>
<tr><td><code id="modmed_+3A_nboot">nboot</code></td>
<td>
<p>Number of bootstrapped samples involved in the bootstrapping algorithm. Used if method = 'boot'. The default value is 1000.</p>
</td></tr>
<tr><td><code id="modmed_+3A_conf.level">conf.level</code></td>
<td>
<p>Level of the returned two-sided confidence intervals. The default is 0.95, which returns the 2.5 and 97.5 percentiles.</p>
</td></tr>
<tr><td><code id="modmed_+3A_seed">seed</code></td>
<td>
<p>The seed for the random number generator. The default value is NULL.</p>
</td></tr>
<tr><td><code id="modmed_+3A_object">object</code></td>
<td>
<p>Output from the original analysis only if is.U = TRUE. NULL in the original analysis. The default is NULL.</p>
</td></tr>
<tr><td><code id="modmed_+3A_is.u">is.U</code></td>
<td>
<p>A logical value. 'FALSE' in the original analysis. 'TRUE' in the sensitivity analysis which adjusts for a simulated unmeasured pretreatment confounder U. The default is FALSE.</p>
</td></tr>
<tr><td><code id="modmed_+3A_sens.effect">sens.effect</code></td>
<td>
<p>The default is NULL. It is used only when modmed.sens is run.</p>
</td></tr>
<tr><td><code id="modmed_+3A_b.m">b.m</code></td>
<td>
<p>Sensitivity parameter that represents the conditional association between the unobserved pretreatment confounder and the mediator. It is NULL in the original analysis. The default is NULL. It is used only when modmed.sens is run.</p>
</td></tr>
<tr><td><code id="modmed_+3A_b.y">b.y</code></td>
<td>
<p>Sensitivity parameter that represents the conditional association between the unobserved pretreatment confounder and the outcome. It is NULL in the original analysis. The default is NULL. It is used only when modmed.sens is run.</p>
</td></tr>
<tr><td><code id="modmed_+3A_plot.effect">plot.effect</code></td>
<td>
<p>The effect to be plotted. The default is NULL. It is used only when modmed.plot is run.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The output of the function modmed contains a list containing the following elements. The function 'summary' or 'summary_modmed' can be used to obtain a table of the results.
</p>
<table>
<tr><td><code>effects</code></td>
<td>
<p>Estimation results of the causal effects. &quot;TE&quot; indicates the total treatment effect. &quot;TIE&quot; indicates the total indirect effect, &quot;PDE&quot; indicates the pure direct effect, and &quot;INT&quot; indicates the natural treatment-by-mediator interaction effect. &quot;TE.ref&quot;, &quot;TIE.ref&quot;, &quot;PDE.ref&quot;, and &quot;INT.ref&quot; indicate the corresponding effects when the moderators take the reference values. &quot;TE.dif&quot;, TIE.dif&quot;, &quot;PDE.dif&quot;, and &quot;INT.dif&quot; each indicates the difference in the corresponding effect between the compare levels and the reference levels of the moderators.</p>
</td></tr>
<tr><td><code>m.model</code></td>
<td>
<p>Estimation results of the mediator model</p>
</td></tr>
<tr><td><code>y.model</code></td>
<td>
<p>Estimation results of the outcome model</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>1000 draws from the sampling distribution of the causal effects.</p>
</td></tr>
<tr><td><code>args</code></td>
<td>
<p>A list of the arguments specified in the function of modmed except for the default ones</p>
</td></tr>
<tr><td><code>args.full</code></td>
<td>
<p>The full list of all the arugments specified in the function of modmed</p>
</td></tr>
<tr><td><code>l.m</code></td>
<td>
<p>The mediator model</p>
</td></tr>
<tr><td><code>l.y</code></td>
<td>
<p>The outcome model</p>
</td></tr>
<tr><td><code>formula.m</code></td>
<td>
<p>The formula for the mediator model</p>
</td></tr>
<tr><td><code>formula.y</code></td>
<td>
<p>The formula for the outcome model</p>
</td></tr>
<tr><td><code>m.predictors</code></td>
<td>
<p>All the original predictors in the main mediator model</p>
</td></tr>
<tr><td><code>y.predictors</code></td>
<td>
<p>All the original predictors in the main outcome model</p>
</td></tr>
<tr><td><code>m.moderators</code></td>
<td>
<p>All the original moderators in the mediator model</p>
</td></tr>
<tr><td><code>y.moderators</code></td>
<td>
<p>All the original moderators in the outcome model</p>
</td></tr>
<tr><td><code>m.predictors.new</code></td>
<td>
<p>All the predictors in the main mediator model, in which the discrete confounders are transformed into multiple indicator codes.</p>
</td></tr>
<tr><td><code>y.predictors.new</code></td>
<td>
<p>All the predictors in the main outcome model, in which the discrete confounders are transformed into multiple indicator codes.</p>
</td></tr>
<tr><td><code>m.moderators.new</code></td>
<td>
<p>All the moderators in the mediator model, in which the discrete confounders are transformed into multiple indicator codes.</p>
</td></tr>
<tr><td><code>y.moderators.new</code></td>
<td>
<p>All the moderators in the outcome model, in which the discrete confounders are transformed into multiple indicator codes.</p>
</td></tr>
<tr><td><code>predict.m.data.ref</code></td>
<td>
<p>Data for prediction of the conditional potential mediator at the reference level of the moderators.</p>
</td></tr>
<tr><td><code>predict.m.data.comp</code></td>
<td>
<p>Data for prediction of the conditional potential mediator at the compare level of the moderators.</p>
</td></tr>
<tr><td><code>predict.m.data</code></td>
<td>
<p>Data for prediction of the marginal potential mediator</p>
</td></tr>
<tr><td><code>predict.y.data.ref</code></td>
<td>
<p>Data for prediction of the conditional potential outcome at the reference level of the moderators.</p>
</td></tr>
<tr><td><code>predict.y.data.comp</code></td>
<td>
<p>Data for prediction of the conditional potential outcome at the compare level of the moderators.</p>
</td></tr>
<tr><td><code>predict.y.data</code></td>
<td>
<p>Data for prediction of the marginal potential outcome</p>
</td></tr>
<tr><td><code>data</code></td>
<td>
<p>The data used in the analysis</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Xu Qin and Lijuan Wang
</p>


<h3>References</h3>

<p>Qin, X., &amp; Wang, L. (2023). Causal moderated mediation analysis: Methods and software
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(newws)
modmed.results = modmed(data = newws, treatment = "treat",
    mediator = "emp", outcome = "depression", covariates.disc = NULL,
    covariates.cont = NULL, moderators.disc = "CHCNT", moderators.cont = NULL,
    m.model = list(intercept = "CHCNT", treatment = "CHCNT"),
    y.model = list(intercept = "CHCNT", treatment = "CHCNT",
        mediator = "CHCNT", tm = "CHCNT"), comp.mod.disc.values = 3,
    ref.mod.disc.values = 2, comp.mod.cont.values = NULL, ref.mod.cont.values = NULL,
    m.scale = "binary", y.scale = "continuous", seed = 1)

modmed.results = modmed(data = newws, treatment = "treat",
    mediator = "emp", outcome = "depression", covariates.disc = c("emp_prior",
        "nevmar", "hispanic", "nohsdip"), covariates.cont = c("workpref",
        "attitude", "depress_prior"), moderators.disc = "CHCNT",
    moderators.cont = "ADCPC", m.model = list(intercept = c("ADCPC",
        "CHCNT"), treatment = c("ADCPC", "CHCNT"), emp_prior = NULL,
        nevmar = NULL, hispanic = NULL, nohsdip = NULL,
        workpref = NULL, attitude = NULL, depress_prior = NULL),
    y.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), mediator = c("ADCPC", "CHCNT"), tm = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL,
        depress_prior = NULL), comp.mod.disc.values = 3,
    ref.mod.disc.values = 2, comp.mod.cont.values = 5050,
    ref.mod.cont.values = 5050, m.scale = "binary", y.scale = "continuous",
    seed = 1)
summary(modmed.results)

</code></pre>

<hr>
<h2 id='modmed.plot'>Visual Representation of the Causal Moderated Mediation Analysis Results</h2><span id='topic+modmed.plot'></span>

<h3>Description</h3>

<p>'modmed.plot' is used to visualize results from <code>modmed</code> function. This applies only if moderators.disc or moderators.cont is not NULL. The plot consists of two parts. The top represents the sampling distribution of the specified causal effect as a function of the specified moderator within the given levels of the other moderators. The bottom represents the distribution of the specified moderator on the x axis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modmed.plot(
  object,
  effect,
  moderator,
  other.mod.disc.values = NULL,
  other.mod.cont.values = NULL,
  is.dist.moderator = FALSE,
  probs = c(0.1, 0.25, 0.5, 0.75, 0.9),
  ncore = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modmed.plot_+3A_object">object</code></td>
<td>
<p>Output from the <code>modmed</code> function.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_effect">effect</code></td>
<td>
<p>A character string indicating which causal effect to be plotted. effect can be specified as &quot;TE&quot;, &quot;TIE&quot;, &quot;PIE&quot;, &quot;PDE&quot;, &quot;TDE&quot;, &quot;INT&quot;, &quot;TE.ref&quot;, &quot;TIE.ref&quot;, &quot;PIE.ref&quot;, &quot;PDE.ref&quot;, &quot;TDE.ref&quot;, &quot;INT.ref&quot;, &quot;TE.dif&quot;, &quot;TIE.dif&quot;, &quot;PIE.dif&quot;, &quot;PDE.dif&quot;, &quot;TDE.dif&quot;, or &quot;INT.dif&quot;.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_moderator">moderator</code></td>
<td>
<p>A character string indicating which moderator to be plotted. It must be one of the moderators specified in the function of <code>modmed</code>.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_other.mod.disc.values">other.mod.disc.values</code></td>
<td>
<p>A vector of values of the other discrete moderators given which the conditional effect at each value of the specified moderator is estimated. The order of other.mod.disc.values should be the same as moderators.disc specified in the function of <code>modmed</code>, with the specified moderator removed if the specified moderator is discrete. If one does not want to condition some moderators on specific values, one may specify their values to be NA. NULL if there are no other discrete moderators.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_other.mod.cont.values">other.mod.cont.values</code></td>
<td>
<p>A vector of values of the other continuous moderators given which the conditional effect at each value of the specified moderator is estimated. The order of other.mod.cont.values should be the same as moderators.cont specified in the function of <code>modmed</code>, with the specified moderator removedif the specified moderator is continuous. If one does not want to condition some moderators on specific values, one may specify their values to be NA. NULL if there are no other continuous moderators.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_is.dist.moderator">is.dist.moderator</code></td>
<td>
<p>A logical value. &quot;TRUE&quot; if distribution of the specified moderator is to be plotted at the bottom, and &quot;FALSE&quot; if not. The default is &quot;FALSE&quot;.</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_probs">probs</code></td>
<td>
<p>A vector of percentiles to be plotted on the distribution of the moderator if the moderator is continuous. NULL if is.dist.moderator = FALSE. The default is c(0.1, 0.25, 0.5, 0.75, 0.9).</p>
</td></tr>
<tr><td><code id="modmed.plot_+3A_ncore">ncore</code></td>
<td>
<p>The number of cores for parallel computing. The default is the number of CPU cores on the current host minus 1. One core is saved for users to run other programs on the computer while running the R function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>modmed</code> returns causal moderated mediation analysis results. The <code>plot.modmed</code> function plots the results.
</p>


<h3>Author(s)</h3>

<p>Xu Qin and Lijuan Wang
</p>


<h3>References</h3>

<p>Qin, X., &amp; Wang, L. (2023). Causal moderated mediation analysis: Methods and software
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(newws)
modmed.results = modmed(data = newws, treatment = "treat", mediator = "emp",
    outcome = "depression", covariates.disc = c("emp_prior", "nevmar",
        "hispanic", "nohsdip"), covariates.cont = c("workpref", "attitude",
        "depress_prior"), moderators.disc = "CHCNT", moderators.cont = "ADCPC",
    m.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    y.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), mediator = c("ADCPC", "CHCNT"), tm = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    comp.mod.disc.values = 3, ref.mod.disc.values = 2, comp.mod.cont.values = 5050,
    ref.mod.cont.values = 5050, m.scale = "binary", y.scale = "continuous",
    seed = 1)
modmed.plot(modmed.results, effect = "TIE", moderator = "ADCPC",
    other.mod.disc.values = 1, is.dist.moderator = TRUE, ncore = 1)

</code></pre>

<hr>
<h2 id='modmed.sens'>Simulation-Based Sensitivity Analysis Table for Causal Moderated Mediation Analysis</h2><span id='topic+modmed.sens'></span>

<h3>Description</h3>

<p>modmed.sens' is used to evaluate the sensitivity of the estimated causal effects obtained from <code>modmed</code> function to potential violations of the ignorability assumptions from the frequentist perspective. It estimates the causal effects after adjusting for an unmeasured pretreatment confounder, U, with a specified degree of confounding. In a randomized experiment, the degree of confounding is evaluated via two sensitivity parameters, the coefficient of U in the mediator model and that in the outcome model, given the specified prior distribution of U. When the treatment is not randomized, an additional sensitivity parameter is introduced &ndash; the coefficient of U in the treatment model. The treatment, mediator, outcome, and unmeasured pretreatment confounder could be either binary or continuous.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modmed.sens(
  object,
  sens.effect = rownames(object$effects)[-which(rownames(object$effects) %in% c("TE",
    "TE.ref", "TE.dif"))],
  range.b.m = NULL,
  range.b.y = NULL,
  grid.b.m = 10,
  grid.b.y = 10,
  U.scale = "binary",
  p.u = 0.5,
  sigma.u = 1,
  t.rand = TRUE,
  t.model = NULL,
  t.scale = "binary",
  b.t = NULL,
  iter = 10,
  nsim = 5,
  ncore = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modmed.sens_+3A_object">object</code></td>
<td>
<p>Output from the <code>modmed</code> function.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_sens.effect">sens.effect</code></td>
<td>
<p>A vector of effects whose sensitivity will be assessed (string).  It is a vector of all the population average, conditional, and moderated mediation effects in the output of modmed function by default (i.e., if sens.effect is not specified). It can also be specified as a subvector of the default. For example, if a researcher is mainly interested in the sensitivity of moderated indirect effects, sens.effect can be specified as c(&quot;TIE.dif&quot;, &quot;PIE.dif&quot;).</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_range.b.m">range.b.m</code></td>
<td>
<p>The range of the sensitivity parameter that represents the slope of the unmeasured pretreatment confounder in the standardized mediator model, in which both the independent and dependent variables are standardized. If the dependent variable is binary, its latent index is standardized instead. E.g., it can be specified as c(-2, 2). If NULL, the upper bound of the range is determined by 2 times the maximum magnitude of the standardized conditional effect of the existing pretreatment confounders with the mediator. The lower bound is the negative of the upper bound. The default is NULL.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_range.b.y">range.b.y</code></td>
<td>
<p>The range of the sensitivity parameter that represents the slope of the unmeasured pretreatment confounder in the standardized outcome model, in which both the independent and dependent variables are standardized. If the dependent variable is binary, its latent index is standardized instead. E.g., it can be specified as c(-2, 2). If NULL, the upper bound of the range is determined by 2 times the maximum magnitude of the standardized conditional effect of the existing pretreatment confounders with the outcome. The lower bound is the negative of the upper bound. The default is NULL.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_grid.b.m">grid.b.m</code></td>
<td>
<p>The horizontal dimension of the grid. The default is 10. Increase the number for more smooth curves.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_grid.b.y">grid.b.y</code></td>
<td>
<p>The vertical dimension of the grid. The default is 10. Increase the number for more smooth curves.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_u.scale">U.scale</code></td>
<td>
<p>The scale of the unobserved pretreatment confounder (string). Can be &quot;continuous&quot; or &quot;binary&quot;. The default is &quot;binary&quot;.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_p.u">p.u</code></td>
<td>
<p>This needs to be specified only if U.scale = &quot;binary&quot;. The prior probability of the unobserved pretreatment confounder if it is binary. The default is 0.5.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_sigma.u">sigma.u</code></td>
<td>
<p>This needs to be specified only if U.scale = &quot;continuous&quot;. The standard deviation of the prior distribution of the unobserved pretreatment confounder if it is continuous. The default is 1.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_t.rand">t.rand</code></td>
<td>
<p>TRUE if the treatment is randomized, and FALSE if not. The default is TRUE.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_t.model">t.model</code></td>
<td>
<p>A list. The default is NULL. This needs to be specified only if t.rand = FALSE because a treatment model is required for the derivation of the conditional distribution of the unmeasured pretreatment confounder. The names of the elements in t.model must include intercept and the pretreatment covariates that predict the treatment and are contained in the union of covariates.disc, and covariates.cont. Each element of the list is a vector of the names of the moderators (string) of the coefficient of the main model predictor as represented by the name of the element. The moderators of the intercept must include all the moderators in the treatment model. If a main model coefficient is not moderated, then the corresponding vector should be specified as NULL. The moderators should be contained in the union of moderators.disc, and moderators.cont. A moderator in the mediator and outcome models does not necessarily moderate any coefficient in the treatment model. If it only has its main effect in the treatment model, it will be included in the vector of the intercept in t.model.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_t.scale">t.scale</code></td>
<td>
<p>The scale of the treatment (string). Can be &quot;continuous&quot; or &quot;binary&quot;. The default is &quot;binary&quot;.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_b.t">b.t</code></td>
<td>
<p>This needs to be specified only if t.rand = FALSE. The value of the sensitivity parameter that represents the slope of the unmeasured pretreatment confounder in the standardized treatment model, in which both the independent and dependent variables are standardized. Please make sure that 1 - b.t^2 is not negative. If the dependent variable is binary, its latent index is standardized instead. When t.rand = TRUE, b.t is NULL, because when the treatment is randomized, there is no need to specify this sensitivity parameter. Hence, the default of b.t is NULL.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_iter">iter</code></td>
<td>
<p>The number of iterations in the stochastic EM algorithm for generating the unobserved pretreatment confounder. The default is 10.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_nsim">nsim</code></td>
<td>
<p>The number of random draws of the unobserved pretreatment confounder in each cell. The default is 5. Increase the number for more smooth curves.</p>
</td></tr>
<tr><td><code id="modmed.sens_+3A_ncore">ncore</code></td>
<td>
<p>The number of cores for parallel computing. The default is the number of CPU cores on the current host minus 1. One core is saved for users to run other programs on the computer while running the R function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing
</p>
<table>
<tr><td><code>X.coef.plot</code></td>
<td>
<p>the sopes of the observed pretreatment confounders in the standardized mediator and outcome models (which are used to calibrate the strength of the sensitivity parameters in the sensitivity plots). </p>
</td></tr>
<tr><td><code>b.t</code></td>
<td>
<p>same as specified in the <code>modmed.sens</code> function if b.t is not NULL.</p>
</td></tr>
<tr><td><code>range.b.m</code>, <code>range.b.y</code></td>
<td>
<p>the value range of each sensitivity parameter.</p>
</td></tr>
<tr><td><code>b.m.all</code>, <code>b.y.all</code></td>
<td>
<p>all the specific values of the sensitivity parameters for constructing the grids.</p>
</td></tr>
<tr><td><code>results.new</code></td>
<td>
<p>tables for the causal effect estimates, standard errors, and p values in all the grids, after the adjustment of the unobserved pretreatment confounder.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Xu Qin and Fan Yang
</p>


<h3>References</h3>

<p>Qin, X., &amp; Yang, F. (2020). Simulation-Based Sensitivity Analysis for Causal Mediation Studies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(newws)
modmed.results = modmed(data = newws, treatment = "treat", mediator = "emp",
    outcome = "depression", covariates.disc = c("emp_prior", "nevmar",
        "hispanic", "nohsdip"), covariates.cont = c("workpref", "attitude",
        "depress_prior"), moderators.disc = "CHCNT", moderators.cont = "ADCPC",
    m.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    y.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), mediator = c("ADCPC", "CHCNT"), tm = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    comp.mod.disc.values = 3, ref.mod.disc.values = 2, comp.mod.cont.values = 5050,
    ref.mod.cont.values = 5050, m.scale = "binary", y.scale = "continuous")
sens.results = modmed.sens(modmed.results, sens.effect = "TIE.ref",
    U.scale = "binary", grid.b.m = 2, grid.b.y = 2, iter = 2, nsim = 2,
    ncore = 1)
sens.results = modmed.sens(modmed.results, sens.effect = "TIE.ref",
    U.scale = "binary", t.model = list(intercept = c("ADCPC", "CHCNT"),
        emp_prior = "ADCPC", nevmar = "CHCNT", hispanic = NULL, nohsdip = NULL,
        workpref = NULL, attitude = NULL, depress_prior = NULL), grid.b.m = 2,
    grid.b.y = 2, iter = 2, nsim = 2, ncore = 1)

</code></pre>

<hr>
<h2 id='newws'>NEWWS Riverside data</h2><span id='topic+newws'></span>

<h3>Description</h3>

<p>The National Evaluation of Welfare-to-Work Strategies (NEWWS) was conducted before the nationwide welfare reform in the mid-1990s. 
Participants of the study consist of applicants to the Aid to Families with Dependent Children (AFDC) program and current AFDC recipients who were not working for 30 or more hours per week. 
They were randomly assigned to the labor force attachment (LFA) program, which aimed at moving low-income parents from welfare to work by providing employment-focused incentives and services, and the control group, which received aid from AFDC without requirement for working. 
The data is from the Riverside sample. It includes 694 participants with preschool-age children, 208 randomly assigned to the LFA program and 486 randomly assigned to the control group. 
The National Evaluation of Welfare-to-Work Strategies (NEWWS) Riverside study.
</p>


<h3>Value</h3>

<p>A list containing
</p>
<table>
<tr><td><code>treat</code></td>
<td>
<p>Treatment is a binary variable, taking the value of 1 if a participant was assigned to LFA and 0 otherwise</p>
</td></tr>
<tr><td><code>emp</code></td>
<td>
<p>Mediator is a binary variable, taking the value of 1 if one was ever employed during the two-year period after randomization and 0 if not.</p>
</td></tr>
<tr><td><code>depression</code></td>
<td>
<p>Outcome, maternal depression at the end of the second year after randomization, is a summary score of 12 items measuring depressive symptoms during the past week on a 0-3 scale.</p>
</td></tr>
<tr><td><code>nevmar</code></td>
<td>
<p>1 if never married and 0 otherwise.</p>
</td></tr>
<tr><td><code>emp_prior</code></td>
<td>
<p>1 if employed and 0 otherwise.</p>
</td></tr>
<tr><td><code>hispanic</code></td>
<td>
<p>1 if Hispanic and 0 otherwise.</p>
</td></tr>
<tr><td><code>CHCNT</code></td>
<td>
<p>1 if had 1 child, 2 if had 2 children, and 3 if had 3 or more children before randomization.</p>
</td></tr>
<tr><td><code>ADCPC</code></td>
<td>
<p>welfare amount in the year before randomization</p>
</td></tr>
<tr><td><code>attitude</code></td>
<td>
<p>a composite score of two attitude items - so many family problems that I cannot work at a full time or part time job; so much to do during the day that I cannot go to a school or job training program - measured on the scale of 1-4.</p>
</td></tr>
<tr><td><code>depress_prior</code></td>
<td>
<p>a composite score of three depressive symptom items - sad, depressed, blues, and lonely - in the week before randomization measured on the scale of 1-4.</p>
</td></tr>
<tr><td><code>workpref</code></td>
<td>
<p>one's level of preference for taking care of family full time than working on the scale of 1-4.</p>
</td></tr>
<tr><td><code>nohsdip</code></td>
<td>
<p>1 if had never obtained a high school diploma or a General Educational Development certificate and 0 otherwise.</p>
</td></tr>
</table>

<hr>
<h2 id='sens.plot'>Simulation-Based Sensitivity Analysis Plot for Causal Moderated Mediation Analysis</h2><span id='topic+sens.plot'></span>

<h3>Description</h3>

<p>Simulation-Based Sensitivity Analysis Plot for Causal Moderated Mediation Analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sens.plot(object, sens.results, effect)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sens.plot_+3A_object">object</code></td>
<td>
<p>Output from the <code>modmed</code> function.</p>
</td></tr>
<tr><td><code id="sens.plot_+3A_sens.results">sens.results</code></td>
<td>
<p>An output from the <code>modmed.sens</code> function.</p>
</td></tr>
<tr><td><code id="sens.plot_+3A_effect">effect</code></td>
<td>
<p>The name of the effect whose sensitivity analysis results are to be plotted (string). Only one effect is plotted at a time. It can be specified as &quot;TIE&quot;, &quot;PIE&quot;, &quot;PDE&quot;, &quot;TDE&quot;, &quot;INT&quot;, &quot;TIE.ref&quot;, &quot;PIE.ref&quot;, &quot;PDE.ref&quot;, &quot;TDE.ref&quot;, &quot;INT.ref&quot;, &quot;TIE.dif&quot;, &quot;PIE.dif&quot;, &quot;PDE.dif&quot;, &quot;TDE.dif&quot;, or &quot;INT.dif&quot;. It must be included in sens.effect when running the <code>modmed.sens</code> function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Sensitivity analysis plots for the causal effects in the causal moderated mediation analysis.
</p>


<h3>Author(s)</h3>

<p>Xu Qin and Fan Yang
</p>


<h3>References</h3>

<p>Qin, X., &amp; Yang, F. (2020). Simulation-Based Sensitivity Analysis for Causal Mediation Studies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(newws)
modmed.results = modmed(data = newws, treatment = "treat", mediator = "emp",
    outcome = "depression", covariates.disc = c("emp_prior", "nevmar",
        "hispanic", "nohsdip"), covariates.cont = c("workpref", "attitude",
        "depress_prior"), moderators.disc = "CHCNT", moderators.cont = "ADCPC",
    m.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    y.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), mediator = c("ADCPC", "CHCNT"), tm = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    comp.mod.disc.values = 3, ref.mod.disc.values = 2, comp.mod.cont.values = 5050,
    ref.mod.cont.values = 5050, m.scale = "binary", y.scale = "continuous",
    seed = 1)
sens.results = modmed.sens(modmed.results, sens.effect = "TIE.ref",
    U.scale = "binary", grid.b.m = 2, grid.b.y = 2, iter = 2, nsim = 2,
    ncore = 1)
sens.plot(modmed.results, sens.results, "TIE.ref")

</code></pre>

<hr>
<h2 id='summary_modmed'>Summarizing Output for Causal Moderated Mediation Analysis</h2><span id='topic+summary_modmed'></span>

<h3>Description</h3>

<p>'summary_modmed' is used to report from causal moderated mediation analysis. Alternatively, 'summary' can also be used to generate the same output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summary_modmed(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_modmed_+3A_object">object</code></td>
<td>
<p>output from <code>modmed</code> function</p>
</td></tr>
<tr><td><code id="summary_modmed_+3A_...">...</code></td>
<td>
<p>additional arguments affecting the summary produced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>modmed</code> returns causal moderated mediation analysis results. The <code>summary_modmed</code> function provides summary tables of the results.
</p>


<h3>Author(s)</h3>

<p>Xu Qin and Lijuan Wang
</p>


<h3>References</h3>

<p>Qin, X., &amp; Wang, L. (2023). Causal moderated mediation analysis: Methods and software
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(newws)
modmed.results = modmed(data = newws, treatment = "treat", mediator = "emp",
    outcome = "depression", covariates.disc = c("emp_prior", "nevmar",
        "hispanic", "nohsdip"), covariates.cont = c("workpref", "attitude",
        "depress_prior"), moderators.disc = "CHCNT", moderators.cont = "ADCPC",
    m.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    y.model = list(intercept = c("ADCPC", "CHCNT"), treatment = c("ADCPC",
        "CHCNT"), mediator = c("ADCPC", "CHCNT"), tm = c("ADCPC",
        "CHCNT"), emp_prior = NULL, nevmar = NULL, hispanic = NULL,
        nohsdip = NULL, workpref = NULL, attitude = NULL, depress_prior = NULL),
    comp.mod.disc.values = 3, ref.mod.disc.values = 2, comp.mod.cont.values = 5050,
    ref.mod.cont.values = 5050, m.scale = "binary", y.scale = "continuous",
    seed = 1)
summary_modmed(modmed.results)
summary(modmed.results)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
