<!DOCTYPE html><html><head><title>Help for package pbmcapply</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pbmcapply}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#pbmclapply'><p>Tracking mclapply with progress bar</p></a></li>
<li><a href='#pbmcmapply'><p>Tracking mcmapply with progress bar</p></a></li>
<li><a href='#progressBar'>
<p>Progress bar with the estimated time to completion (ETA).</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tracking the Progress of Mc*pply with Progress Bar</td>
</tr>
<tr>
<td>Version:</td>
<td>1.5.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Kevin Kuang (aut), Quyu Kong (ctb), Francesco Napolitano (ctb)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kevin kuang &lt;kvn.kuang@mail.utoronto.ca&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A light-weight package helps you track and visualize
  the progress of parallel version of vectorized R functions (mc*apply).
  Parallelization (mc.core &gt; 1) works only on *nix (Linux, Unix such as macOS) system due to
  the lack of fork() functionality, which is essential for mc*apply, on Windows.</td>
</tr>
<tr>
<td>Depends:</td>
<td>utils, parallel</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kvnkuang/pbmcapply/issues">https://github.com/kvnkuang/pbmcapply/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/kvnkuang/pbmcapply">https://github.com/kvnkuang/pbmcapply</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-04-28 14:02:46 UTC; kevinkuang</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-04-28 14:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='pbmclapply'>Tracking mclapply with progress bar</h2><span id='topic+pbmclapply'></span>

<h3>Description</h3>

<p><code>pbmclapply</code> is a wrapper around the <code>mclapply</code> function. It adds a progress bar to <code>mclapply</code> function.
</p>
<p><strong>Parallelization (mc.core &gt; 1) works only on *nix (Linux, Unix such as macOS) system due to the lack of <code>fork()</code> functionality, which is essential for mcapply, on Windows.</strong>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbmclapply(X, FUN, ...,
           mc.style = "ETA", mc.substyle = NA,
           mc.cores = getOption("mc.cores", 2L),
           ignore.interactive = getOption("ignore.interactive", F),
           mc.preschedule = TRUE, mc.set.seed = TRUE,
           mc.cleanup = TRUE, mc.allow.recursive = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pbmclapply_+3A_x">X</code></td>
<td>

<p>a vector (atomic or list) or an expressions vector. Other objects (including classed objects) will be coerced by <code>'as.list'</code>.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_fun">FUN</code></td>
<td>

<p>the function to be applied to.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_...">...</code></td>
<td>

<p>optional arguments to FUN.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_mc.cores">mc.cores</code></td>
<td>

<p>see <code><a href="parallel.html#topic+mclapply">mclapply</a></code>.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_mc.style">mc.style</code>, <code id="pbmclapply_+3A_mc.substyle">mc.substyle</code></td>
<td>

<p>style of the progress bar. See <code><a href="#topic+progressBar">progressBar</a></code>.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_ignore.interactive">ignore.interactive</code></td>
<td>

<p>whether the <code>interactive()</code> is ignored. If set to TRUE, the progress bar will be printed even in a non-interactive environment (e.g. called by Rscript). Can be set as an option &quot;ignore.interactive&quot;.
</p>
</td></tr>
<tr><td><code id="pbmclapply_+3A_mc.preschedule">mc.preschedule</code>, <code id="pbmclapply_+3A_mc.set.seed">mc.set.seed</code>, <code id="pbmclapply_+3A_mc.cleanup">mc.cleanup</code>, <code id="pbmclapply_+3A_mc.allow.recursive">mc.allow.recursive</code></td>
<td>

<p>See <code><a href="parallel.html#topic+mclapply">mclapply</a></code>.
</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># A lazy sqrt function which doesn't care about efficiency
lazySqrt &lt;- function(num) {
  # Sleep randomly between 0 to 0.5 second
  Sys.sleep(runif(1, 0, 0.5))
  return(sqrt(num))
}

# On Windows, set cores to be 1
if (.Platform$OS.type == "windows") {
  cores = 1
} else {
  cores = 2
}

# A lazy and chatty sqrt function.
# An example of passing arguments to pbmclapply.
lazyChattySqrt &lt;- function(num, name) {
  # Sleep randomly between 0 to 0.5 second
  Sys.sleep(runif(1, 0, 0.5))
  return(sprintf("Hello %s, the sqrt of %f is %f.", toString(name), num, sqrt(num)))
}

# Get the sqrt of 1-3 in parallel
result &lt;- pbmclapply(1:3, lazySqrt, mc.cores = cores)
chattyResult &lt;- pbmclapply(1:3, lazyChattySqrt, "Bob", mc.cores = cores)
</code></pre>

<hr>
<h2 id='pbmcmapply'>Tracking mcmapply with progress bar</h2><span id='topic+pbmcmapply'></span>

<h3>Description</h3>

<p><code>pbmcmapply</code> is a wrapper around the <code>mcmapply</code> function. It adds a progress bar to <code>mcmapply</code> function.
</p>
<p><strong>Parallelization (mc.core &gt; 1) works only on *nix (Linux, Unix such as macOS) system due to the lack of <code>fork()</code> functionality, which is essential for mcapply, on Windows.</strong>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pbmcmapply(FUN, ..., MoreArgs = NULL,
           mc.style = "ETA", mc.substyle = NA,
           mc.cores = getOption("mc.cores", 2L),
           ignore.interactive = getOption("ignore.interactive", F),
           mc.preschedule = TRUE, mc.set.seed = TRUE,
           mc.cleanup = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pbmcmapply_+3A_fun">FUN</code></td>
<td>

<p>the function to be applied in parallel to ...
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_...">...</code></td>
<td>

<p>arguments to vectorize over (vectors or lists of strictly positive length, or all of zero length).
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_moreargs">MoreArgs</code></td>
<td>

<p>a list of other arguments to FUN.
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_mc.cores">mc.cores</code></td>
<td>

<p>see <code><a href="parallel.html#topic+mcmapply">mcmapply</a></code>.
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_mc.style">mc.style</code>, <code id="pbmcmapply_+3A_mc.substyle">mc.substyle</code></td>
<td>

<p>style of the progress bar. See <code><a href="#topic+progressBar">progressBar</a></code>.
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_ignore.interactive">ignore.interactive</code></td>
<td>

<p>whether the <code>interactive()</code> is ignored. If set to TRUE, the progress bar will be printed even in a non-interactive environment (e.g. called by Rscript). Can be set as an option &quot;ignore.interactive&quot;.
</p>
</td></tr>
<tr><td><code id="pbmcmapply_+3A_mc.preschedule">mc.preschedule</code>, <code id="pbmcmapply_+3A_mc.set.seed">mc.set.seed</code>, <code id="pbmcmapply_+3A_mc.cleanup">mc.cleanup</code></td>
<td>

<p>See <code><a href="parallel.html#topic+mcmapply">mcmapply</a></code>.
</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># A lazy sqrt function which doesn't care about efficiency
lazySqrt &lt;- function(num) {
  # Sleep randomly between 0 to 0.5 second
  Sys.sleep(runif(1, 0, 0.5))
  return(sqrt(num))
}

# On Windows, set cores to be 1
if (.Platform$OS.type == "windows") {
  cores = 1
} else {
  cores = 2
}

# A lazy and chatty sqrt function.
# An example of passing arguments to pbmcmapply.
lazyChattySqrt &lt;- function(num, name) {
  # Sleep randomly between 0 to 0.5 second
  Sys.sleep(runif(1, 0, 0.5))
  return(sprintf("Hello %s, the sqrt of %f is %f.", toString(name), num, sqrt(num)))
}

# Get the sqrt of 1-3 in parallel
result &lt;- pbmcmapply(lazySqrt, 1:3, mc.cores = cores)
chattyResult &lt;- pbmcmapply(lazyChattySqrt, 1:3, MoreArgs = list("Bob"), mc.cores = cores)
</code></pre>

<hr>
<h2 id='progressBar'>
Progress bar with the estimated time to completion (ETA).
</h2><span id='topic+progressBar'></span>

<h3>Description</h3>

<p>This is an extended version of the <code>txtProgressBar</code> function with the estimated time to completion (ETA). Please refer to that for documentation (<code>help(utils::txtProgressBar)</code>).
The original <code>utils::setTxtProgressBar</code> can be used to update the bar.
Use <code>help(setTxtProgressBar, "utils")</code> to get help about the original function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>progressBar(min = 0, max = 1, initial = 0, style = "ETA", substyle = NA,
            char = "=", width = NA, file = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="progressBar_+3A_min">min</code>, <code id="progressBar_+3A_max">max</code>, <code id="progressBar_+3A_initial">initial</code></td>
<td>

<p>see <code><a href="utils.html#topic+txtProgressBar">txtProgressBar</a></code>.
</p>
</td></tr>
<tr><td><code id="progressBar_+3A_style">style</code></td>
<td>

<p>style of the progress bar - see 'Details'.
</p>
</td></tr>
<tr><td><code id="progressBar_+3A_substyle">substyle</code></td>
<td>

<p>substyle of the progress bar - only needed when style is set to certain value (see 'Details').
</p>
</td></tr>
<tr><td><code id="progressBar_+3A_char">char</code>, <code id="progressBar_+3A_width">width</code>, <code id="progressBar_+3A_file">file</code></td>
<td>

<p>see <code><a href="utils.html#topic+txtProgressBar">txtProgressBar</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When style = &quot;txt&quot;, it performs exactly the same as the original <code>txtProgressBar</code>. In this case, substyle shall be treated as the style in the original <code>txtProgressBar</code>. Please refer to the 'Detail' of <code><a href="utils.html#topic+txtProgressBar">txtProgressBar</a></code> for the meanings of substyles.
</p>
<p>When style = &quot;ETA&quot;, it shows a progress bar with the estimated time to completion (ETA). Substyle is not used in this case. However, when running in a terminal and the width of the terminal windows is smaller than 40 characters, the progress bar will not be displayed.
</p>


<h3>Value</h3>

<p>An object of class &quot;txtProgressBar&quot;.
</p>


<h3>Note</h3>

<p>Code derived from library <code>pbarETA</code> (https://github.com/franapoli/pbarETA) by Francesco Napolitano <a href="mailto:franapoli@gmail.com">franapoli@gmail.com</a>.
</p>


<h3>See Also</h3>

<p><code><a href="utils.html#topic+txtProgressBar">txtProgressBar</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Test function
testit &lt;- function(x, ...)
{
    pb &lt;- progressBar(...)
    for(i in c(0, x, 1)) {
      setTxtProgressBar(pb, i)
    }
    close(pb)
}

# Txt progress bar
testit(sort(runif(10)), style = "txt", substyle = 3)

# ETA progress bar
testit(sort(runif(10)), style = "ETA")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
