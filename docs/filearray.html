<!DOCTYPE html><html><head><title>Help for package filearray</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {filearray}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#apply'><p>Apply functions over file array margins (extended)</p></a></li>
<li><a href='#as_filearray'><p>Create or load existing file arrays</p></a></li>
<li><a href='#filearray_bind'><p>Merge and bind homogeneous file arrays</p></a></li>
<li><a href='#filearray_threads'><p>Set or get file array threads</p></a></li>
<li><a href='#FileArray-class'><p>Definition of file array</p></a></li>
<li><a href='#fmap'><p>Map multiple file arrays and save results</p></a></li>
<li><a href='#fwhich'><p>A generic function of <code>which</code> that is <code>'FileArray'</code> compatible</p></a></li>
<li><a href='#mapreduce'><p>A map-reduce method to iterate blocks of file-array data with little memory usage</p></a></li>
<li><a href='#S3-filearray'><p>'S3' methods for 'FileArray'</p></a></li>
<li><a href='#S4-filearray'><p>'S4' methods for <code>FileArray</code></p></a></li>
<li><a href='#typeof'><p>The type of a file array (extended)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>File-Backed Array for Out-of-Memory Computation</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.6</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://dipterix.org/filearray/">https://dipterix.org/filearray/</a>,
<a href="https://github.com/dipterix/filearray">https://github.com/dipterix/filearray</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/dipterix/filearray/issues">https://github.com/dipterix/filearray/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Stores large arrays in files to avoid occupying large
    memories. Implemented with super fast gigabyte-level multi-threaded 
    reading/writing via 'OpenMP'. Supports multiple non-character data 
    types (double, float, complex, integer, logical, and raw).</td>
</tr>
<tr>
<td>Imports:</td>
<td>digest, fastmap (&ge; 1.1.1), methods, Rcpp, uuid (&ge; 1.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>BH, Rcpp</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-06-23 04:31:10 UTC; dipterix</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhengjia Wang [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zhengjia Wang &lt;dipterix.wang@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-06-23 05:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='apply'>Apply functions over file array margins (extended)</h2><span id='topic+apply'></span><span id='topic+apply+2CFileArray-method'></span><span id='topic+apply+2CFileArrayProxy-method'></span>

<h3>Description</h3>

<p>Apply functions over file array margins (extended)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply(X, MARGIN, FUN, ..., simplify = TRUE)

## S4 method for signature 'FileArray'
apply(X, MARGIN, FUN, ..., simplify = TRUE)

## S4 method for signature 'FileArrayProxy'
apply(X, MARGIN, FUN, ..., simplify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_+3A_x">X</code></td>
<td>
<p>a file array</p>
</td></tr>
<tr><td><code id="apply_+3A_margin">MARGIN</code></td>
<td>
<p>scalar giving the subscripts which the function will be applied over. Current implementation only allows margin size to be one</p>
</td></tr>
<tr><td><code id="apply_+3A_fun">FUN</code></td>
<td>
<p>the function to be applied</p>
</td></tr>
<tr><td><code id="apply_+3A_...">...</code></td>
<td>
<p>optional arguments to <code>FUN</code></p>
</td></tr>
<tr><td><code id="apply_+3A_simplify">simplify</code></td>
<td>
<p>a logical indicating whether results should be simplified if possible</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See Section 'Value' in <code><a href="base.html#topic+apply">apply</a></code>;
</p>

<hr>
<h2 id='as_filearray'>Create or load existing file arrays</h2><span id='topic+as_filearray'></span><span id='topic+FileArrayProxy-class'></span><span id='topic+FileArrayProxy'></span><span id='topic+as_filearrayproxy'></span><span id='topic+filearray'></span><span id='topic+filearray_create'></span><span id='topic+filearray_load'></span><span id='topic+filearray_checkload'></span><span id='topic+filearray_load_or_create'></span>

<h3>Description</h3>

<p>Create or load existing file arrays
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_filearray(x, ...)

as_filearrayproxy(x, ...)

filearray_create(
  filebase,
  dimension,
  type = c("double", "float", "integer", "logical", "raw", "complex"),
  partition_size = NA,
  initialize = FALSE,
  ...
)

filearray_load(filebase, mode = c("readwrite", "readonly"))

filearray_checkload(
  filebase,
  mode = c("readonly", "readwrite"),
  ...,
  symlink_ok = TRUE
)

filearray_load_or_create(
  filebase,
  dimension,
  on_missing = NULL,
  type = NA,
  ...,
  mode = c("readonly", "readwrite"),
  symlink_ok = TRUE,
  initialize = FALSE,
  partition_size = NA,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_filearray_+3A_x">x</code></td>
<td>
<p>R object such as array, file array proxy, or character that can be 
transformed into file array</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_...">...</code></td>
<td>
<p>additional headers to check used by <code>filearray_checkload</code>
(see 'Details'). This argument is ignored by <code>filearray_create</code>, 
reserved for future compatibility.</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_filebase">filebase</code></td>
<td>
<p>a directory path to store arrays in the local file 
system. When creating an array, the path must not exist.</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_dimension">dimension</code></td>
<td>
<p>dimension of the array, at least length of 2</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_type">type</code></td>
<td>
<p>storage type of the array; default is <code>'double'</code>. Other
options include <code>'integer'</code>, <code>'logical'</code>, and <code>'raw'</code>.</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_partition_size">partition_size</code></td>
<td>
<p>positive partition size for the last margin, or
<code>NA</code> to automatically guess; see 'Details'.</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_initialize">initialize</code></td>
<td>
<p>whether to initialize partition files; default is false
for performance considerations. However, if the array is dense, it is 
recommended to set to true</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_mode">mode</code></td>
<td>
<p>whether allows writing to the file; choices are 
<code>'readwrite'</code> and <code>'readonly'</code>.</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_symlink_ok">symlink_ok</code></td>
<td>
<p>whether arrays with symbolic-link partitions can pass 
the test; this is usually used on bound arrays with symbolic-links; see 
<code><a href="#topic+filearray_bind">filearray_bind</a></code>;</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_on_missing">on_missing</code></td>
<td>
<p>function to handle file array (such as initialization)
when a new array is created; must take only one argument, the array object</p>
</td></tr>
<tr><td><code id="as_filearray_+3A_verbose">verbose</code></td>
<td>
<p>whether to print out some debug messages</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The file arrays partition out-of-memory array objects and store them 
separately in local file systems. Since R stores matrices/arrays 
in column-major style, file array uses the slowest margin (the 
last margin) to slice the partitions. This helps to align the elements
within the files with the corresponding memory order. An array with 
dimension <code>100x200x300x400</code> has 4 margins. The length of the 
last margin is 400, which is also the maximum number of potential
partitions. The number of partitions are determined by the last margin
size divided by <code>partition_size</code>. For example, if the partition
size is 1, then there will be 400 partitions. If the partition size 
if 3, there will be 134 partitions. The default partition sizes 
are determined internally following these priorities:
</p>

<dl>
<dt>1. </dt><dd><p>the file size of each partition does not exceed <code>1GB</code></p>
</dd>
<dt>2. </dt><dd><p>the number of partitions do not exceed 100</p>
</dd>
</dl>

<p>These two rules are not hard requirements. The goal is to reduce the
numbers of partitions as much as possible. 
</p>
<p>The arguments <code>...</code> in <code>filearray_checkload</code> should be named
arguments that provide additional checks for the header information. 
The check will fail if at least one header is not identical. For example,
if an array contains header key-signature pair, one can use 
<code>filearray_checkload(..., key = signature)</code> to validate the signature.
Note the comparison will be rigid, meaning the storage type of the headers 
will be considered as well. If the signature stored in the array is an 
integer while provided is a double, then the check will result in failure.
</p>


<h3>Value</h3>

<p>A <code><a href="#topic+FileArray-class">FileArray-class</a></code> instance.
</p>


<h3>Author(s)</h3>

<p>Zhengjia Wang
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Prepare 
library(filearray)
filebase &lt;- tempfile()
if(file.exists(filebase)){ unlink(filebase, TRUE) }

# create array
x &lt;- filearray_create(filebase, dimension = c(200, 30, 8))
print(x)

# Assign values
x[] &lt;- rnorm(48000)

# Subset
x[1,2,]

# load existing array
filearray_load(filebase)

x$set_header("signature", "tom")
filearray_checkload(filebase, signature = "tom")

## Not run: 
# Trying to load with wrong signature
filearray_checkload(filebase, signature = "jerry")

## End(Not run)


# check-load, and create a new array if fail
x &lt;- filearray_load_or_create(
    filebase = filebase, dimension = c(200, 30, 8),
    verbose = TRUE, signature = "henry"
)
x$get_header("signature")

# check-load with initialization
x &lt;- filearray_load_or_create(
    filebase = filebase, 
    dimension = c(3, 4, 5),
    verbose = TRUE, mode = "readonly",
    on_missing = function(array) {
        array[] &lt;- seq_len(60)
    }
)

x[1:3,1,1]

# Clean up
unlink(filebase, recursive = TRUE)

</code></pre>

<hr>
<h2 id='filearray_bind'>Merge and bind homogeneous file arrays</h2><span id='topic+filearray_bind'></span>

<h3>Description</h3>

<p>The file arrays to be merged must be homogeneous:
same data type, partition size, and partition length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filearray_bind(
  ...,
  .list = list(),
  filebase = tempfile(),
  symlink = FALSE,
  overwrite = FALSE,
  cache_ok = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filearray_bind_+3A_...">...</code>, <code id="filearray_bind_+3A_.list">.list</code></td>
<td>
<p>file array instances</p>
</td></tr>
<tr><td><code id="filearray_bind_+3A_filebase">filebase</code></td>
<td>
<p>where to create merged array</p>
</td></tr>
<tr><td><code id="filearray_bind_+3A_symlink">symlink</code></td>
<td>
<p>whether to use <code><a href="base.html#topic+file.symlink">file.symlink</a></code>; if true,
then partition files will be symbolic-linked to the original arrays,
otherwise the partition files will be copied over. If you want your data
to be portable, do not use symbolic-links. The default value is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="filearray_bind_+3A_overwrite">overwrite</code></td>
<td>
<p>whether to overwrite when <code>filebase</code> already exists;
default is false, which raises errors</p>
</td></tr>
<tr><td><code id="filearray_bind_+3A_cache_ok">cache_ok</code></td>
<td>
<p>see 'Details', only used if <code>overwrite</code> is true.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input arrays must share the same data type and partition size.
The dimension for each partition should also be the same. For example
an array <code>x1</code> has dimension <code class="reqn">100x20x30</code> with partition size 
<code>1</code>, then each partition dimension is <code class="reqn">100x20x1</code>, and there are 
<code>30</code> partitions. <code>x1</code> can bind with another array of the same 
partition size. This means if <code>x2</code> has dimension
<code class="reqn">100x20x40</code> and each partition size is <code>1</code>, then <code>x1</code> and 
<code>x2</code> can be merged.
</p>
<p>If <code>filebase</code> exists and <code>overwrite</code> is <code>FALSE</code>, an error will 
always raise. If <code>overwrite=TRUE</code> and <code>cache_ok=FALSE</code>, then
the existing <code>filebase</code> will be erased and any data stored within will
be lost. 
If both <code>overwrite</code> and <code>cache_ok</code> are <code>TRUE</code>, then 
, before erasing <code>filebase</code>, the function validates the existing
array header and compare the header signatures. If the existing header
signature is the same as the array to be created, then the existing array 
will be returned. This <code>cache_ok</code> could be extremely useful when
binding large arrays with <code>symlink=FALSE</code> as the cache might avoid
moving files around. However, <code>cache_ok</code> should be enabled with caution.
This is because only the header information will be compared, but the 
partition data will not be compared. If the existing array was generated from
an old versions of the source arrays, but the data from the source arrays
has been altered, then the <code>cache_ok=TRUE</code> is rarely proper as the cache
is outdated.
</p>
<p>The <code>symlink</code> option should be used with extra caution. Creating 
symbolic links is definitely faster than copying partition files. However, 
since the partition files are simply linked to the original partition files, 
changing to the input arrays will also affect the merged arrays, and 
vice versa; see 'Examples'. Also for arrays created from symbolic links, if 
the original 
arrays are deleted, while the merged arrays will not be invalidated, 
the corresponding partitions will no longer be accessible. Attempts to 
set deleted partitions will likely result in failure. Therefore
<code>symlink</code> should be set to true when creating merged arrays are
temporary for read-only purpose, and when speed and disk space is in
consideration. For extended reading, please check <code><a href="base.html#topic+files">files</a></code> 
for details.
</p>


<h3>Value</h3>

<p>A bound array in <code>'FileArray'</code> class.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>partition_size &lt;- 1
type &lt;- "double"
x1 &lt;- filearray_create(
    tempfile(), c(2,2), type = type,
    partition_size = partition_size)
x1[] &lt;- 1:4
x2 &lt;- filearray_create(
    tempfile(), c(2,1), type = type,
    partition_size = partition_size)
x2[] &lt;- 5:6

y1 &lt;- filearray_bind(x1, x2, symlink = FALSE)
y2 &lt;- filearray_bind(x1, x2)

# y1 copies partition files, and y2 simply creates links 
# if symlink is supported

y1[] - y2[]

# change x1
x1[1,1] &lt;- NA

# y1 is not affected
y1[]

# y2 changes 
y2[]


</code></pre>

<hr>
<h2 id='filearray_threads'>Set or get file array threads</h2><span id='topic+filearray_threads'></span>

<h3>Description</h3>

<p>Will enable/disable multi-threaded reading or writing
at <code>C++</code> level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filearray_threads(n, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filearray_threads_+3A_n">n</code></td>
<td>
<p>number of threads to set. If <code>n</code> is negative,
then default to the number of cores that computer has.</p>
</td></tr>
<tr><td><code id="filearray_threads_+3A_...">...</code></td>
<td>
<p>internally used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An integer of current number of threads
</p>

<hr>
<h2 id='FileArray-class'>Definition of file array</h2><span id='topic+FileArray-class'></span>

<h3>Description</h3>

<p><code>S4</code> class definition of <code>FileArray</code>. Please 
use <code><a href="#topic+filearray_create">filearray_create</a></code> and <code><a href="#topic+filearray_load">filearray_load</a></code>
to create instances.
</p>


<h3>Public Methods</h3>


<dl>
<dt><code>get_header(key, default = NULL)</code></dt><dd><p>Get header information; returns <code>default</code> if <code>key</code> is missing</p>
</dd>
<dt><code>set_header(key, value)</code></dt><dd><p>Set header information; the extra headers will be stored in meta file. Please do not store large headers as they will be loaded into memory frequently.</p>
</dd>
<dt><code>can_write()</code></dt><dd><p>Whether the array data can be altered</p>
</dd>
<dt><code>create(filebase, dimension, type = "double", partition_size = 1)</code></dt><dd><p>Create a file array instance</p>
</dd>
<dt><code>delete(force = FALSE)</code></dt><dd><p>Remove array from local file system and reset</p>
</dd>
<dt><code>dimension()</code></dt><dd><p>Get dimension vector</p>
</dd>
<dt><code>dimnames(v)</code></dt><dd><p>Set/get dimension names</p>
</dd>
<dt><code>element_size()</code></dt><dd><p>Internal storage: bytes per element</p>
</dd>
<dt><code>fill_partition(part, value)</code></dt><dd><p>Fill a partition with given scalar</p>
</dd>
<dt><code>get_partition(part, reshape = NULL)</code></dt><dd><p>Get partition data, and reshape (if not null) to desired dimension</p>
</dd>
<dt><code>expand(n)</code></dt><dd><p>Expand array along the last margin; returns true if expanded; if the <code>dimnames</code> have been assigned prior to expansion, the last dimension names will be filled with <code>NA</code></p>
</dd>
<dt><code>initialize_partition()</code></dt><dd><p>Make sure a partition file exists; if not, create one and fill with <code>NA</code>s or 0 (<code>type='raw'</code>)</p>
</dd>
<dt><code>load(filebase, mode = c("readwrite", "readonly"))</code></dt><dd><p>Load file array from existing directory</p>
</dd>
<dt><code>partition_path(part)</code></dt><dd><p>Get partition file path</p>
</dd>
<dt><code>partition_size()</code></dt><dd><p>Get partition size; see <code><a href="#topic+filearray">filearray</a></code></p>
</dd>
<dt><code>set_partition(part, value, ..., strict = TRUE)</code></dt><dd><p>Set partition value</p>
</dd>
<dt><code>sexp_type()</code></dt><dd><p>Get data <code>SEXP</code> type; see R internal manuals</p>
</dd>
<dt><code>show()</code></dt><dd><p>Print information</p>
</dd>
<dt><code>type()</code></dt><dd><p>Get data type</p>
</dd>
<dt><code>valid()</code></dt><dd><p>Check if the array is valid.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+filearray">filearray</a></code>
</p>

<hr>
<h2 id='fmap'>Map multiple file arrays and save results</h2><span id='topic+fmap'></span><span id='topic+fmap2'></span><span id='topic+fmap_element_wise'></span>

<h3>Description</h3>

<p>Advanced mapping function for multiple file arrays. <code>fmap</code>
runs the mapping functions and stores the results in file arrays. 
<code>fmap2</code> stores results in memory. This 
feature is experimental. There are several constraints to the input. 
Failure to meet these constraints may result in undefined results, or 
even crashes. Please read Section 'Details' carefully before using 
this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fmap(
  x,
  fun,
  .y = NULL,
  .buffer_count = NA_integer_,
  .output_size = NA_integer_,
  ...
)

fmap2(x, fun, .buffer_count = NA, .simplify = TRUE, ...)

fmap_element_wise(x, fun, .y, ..., .input_size = NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fmap_+3A_x">x</code></td>
<td>
<p>a list of file arrays to map; each element of <code>x</code> must 
share the same dimensions.</p>
</td></tr>
<tr><td><code id="fmap_+3A_fun">fun</code></td>
<td>
<p>function that takes one list</p>
</td></tr>
<tr><td><code id="fmap_+3A_.y">.y</code></td>
<td>
<p>a file array object, used to save results</p>
</td></tr>
<tr><td><code id="fmap_+3A_.buffer_count">.buffer_count</code></td>
<td>
<p>number of total buffers (chunks) to run</p>
</td></tr>
<tr><td><code id="fmap_+3A_.output_size">.output_size</code></td>
<td>
<p><code>fun</code> output vector length</p>
</td></tr>
<tr><td><code id="fmap_+3A_...">...</code></td>
<td>
<p>other arguments passing to <code>fun</code></p>
</td></tr>
<tr><td><code id="fmap_+3A_.simplify">.simplify</code></td>
<td>
<p>whether to apply <code><a href="base.html#topic+simplify2array">simplify2array</a></code> to 
the result</p>
</td></tr>
<tr><td><code id="fmap_+3A_.input_size">.input_size</code></td>
<td>
<p>number of elements to read from each array of <code>x</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Denote the first argument of <code>fun</code> as <code>input</code>, The length 
of <code>input</code> equals the length of <code>x</code>. The size of each
element of <code>input</code> is defined by <code>.input_size</code>, except for the
last loop. For example, given dimension of each input array as 
<code class="reqn">10x10x10x10</code>, if <code>.input_size=100</code>, then 
<code>length(input[[1]])=100</code>. The total number of runs equals to
<code>length(x[[1]])/100</code>. If <code>.input_size=300</code>, then 
<code>length(input[[1]])</code> will be <code>300</code> except for the last run. 
This is because <code class="reqn">10000</code> cannot be divided by <code>300</code>. 
The element length of the last run will be <code>100</code>. 
</p>
<p>The returned variable length of <code>fun</code> will be checked by 
<code>.output_size</code>. If the output length exceed <code>.output_size</code>, 
an error will be raised.
</p>
<p>Please make sure that <code>length(.y)/length(x[[1]])</code> equals to 
<code>.output_size/.input_size</code>.
</p>
<p>For <code>fmap_element_wise</code>, the <code>input[[1]]</code> and output length 
must be the consistent.
</p>


<h3>Value</h3>

<p>File array instance <code>.y</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

set.seed(1)
x1 &lt;- filearray_create(tempfile(), dimension = c(100,20,3))
x1[] &lt;- rnorm(6000)
x2 &lt;- filearray_create(tempfile(), dimension = c(100,20,3))
x2[] &lt;- rnorm(6000)

# Add two arrays
output &lt;- filearray_create(tempfile(), dimension = c(100,20,3))
fmap(list(x1, x2), function(input){
    input[[1]] + input[[2]]
}, output)

# check
range(output[] - (x1[] + x2[]))

output$delete()

# Calculate the maximum of x1/x2 for every 100 elements
output &lt;- filearray_create(tempfile(), dimension = c(20,3))
fmap(list(x1, x2), function(input){
    max(input[[1]] / input[[2]])
}, output, .input_size = 100, .output_size = 1)

# check
range(output[] - apply(x1[] / x2[], c(2,3), max))

output$delete()

# A large array example
if(interactive()){
    x &lt;- filearray_create(tempfile(), dimension = c(287, 100, 301, 4))
    dimnames(x) &lt;- list(
        Trial = 1:287,
        Marker = 1:100,
        Time = 1:301,
        Location = 1:4
    )
    
    for(i in 1:4){
        x[,,,i] &lt;- runif(8638700)
    }
    # Step 1:
    # for each location, trial, and marker, calibrate (baseline)
    # according to first 50 time-points
    
    output &lt;- filearray_create(tempfile(), dimension = dim(x))
    
    # baseline-percentage change
    fmap(
        list(x), 
        function(input){
            # get locational data
            location_data &lt;- input[[1]]
            dim(location_data) &lt;- c(287, 100, 301)
            
            # collapse over first 50 time points for 
            # each trial, and marker
            baseline &lt;- apply(location_data[,,1:50], c(1,2), mean)
            
            # calibrate
            calibrated &lt;- sweep(location_data, c(1,2), baseline, 
                                FUN = function(data, bl){
                                    (data / bl - 1) * 100
                                })
            return(calibrated)
        }, 
        
        .y = output,
        
        # input dimension is 287 x 100 x 301 for each location
        .input_size = 8638700,
        
        # output dimension is 287 x 100 x 301
        .output_size = 8638700
    )
    
    # cleanup
    x$delete()
    
}

# cleanup
x1$delete()
x2$delete()
output$delete()
</code></pre>

<hr>
<h2 id='fwhich'>A generic function of <code>which</code> that is <code>'FileArray'</code> compatible</h2><span id='topic+fwhich'></span><span id='topic+fwhich.default'></span><span id='topic+fwhich.FileArray'></span>

<h3>Description</h3>

<p>A generic function of <code>which</code> that is <code>'FileArray'</code> compatible
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fwhich(x, val, arr.ind = FALSE, ...)

## Default S3 method:
fwhich(x, val, arr.ind = FALSE, ...)

## S3 method for class 'FileArray'
fwhich(x, val, arr.ind = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fwhich_+3A_x">x</code></td>
<td>
<p>any R vector, matrix, array or file-array</p>
</td></tr>
<tr><td><code id="fwhich_+3A_val">val</code></td>
<td>
<p>values to find</p>
</td></tr>
<tr><td><code id="fwhich_+3A_arr.ind">arr.ind</code></td>
<td>
<p>logical; should array indices be 
returned when <code>x</code> is an array?</p>
</td></tr>
<tr><td><code id="fwhich_+3A_...">...</code></td>
<td>
<p>further passed to <code><a href="base.html#topic+which">which</a></code> or
<code><a href="base.html#topic+arrayInd">arrayInd</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The indices of <code>x</code> elements that are listed in <code>val</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Default case
x &lt;- array(1:27, rep(3,3))
fwhich(x, c(4,5))

# file-array case
arr &lt;- filearray_create(tempfile(), dim(x))
arr[] &lt;- x
fwhich(arr, c(4,5))


</code></pre>

<hr>
<h2 id='mapreduce'>A map-reduce method to iterate blocks of file-array data with little memory usage</h2><span id='topic+mapreduce'></span><span id='topic+mapreduce+2CFileArray+2CANY+2Cfunction-method'></span><span id='topic+mapreduce+2CFileArray+2CANY+2CNULL-method'></span><span id='topic+mapreduce+2CFileArray+2CANY+2Cmissing-method'></span>

<h3>Description</h3>

<p>A map-reduce method to iterate blocks of file-array data with little memory usage
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mapreduce(x, map, reduce, ...)

## S4 method for signature 'FileArray,ANY,'function''
mapreduce(x, map, reduce, buffer_size = NA, ...)

## S4 method for signature 'FileArray,ANY,'NULL''
mapreduce(x, map, reduce, buffer_size = NA, ...)

## S4 method for signature 'FileArray,ANY,missing'
mapreduce(x, map, reduce, buffer_size = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mapreduce_+3A_x">x</code></td>
<td>
<p>a file array object</p>
</td></tr>
<tr><td><code id="mapreduce_+3A_map">map</code></td>
<td>
<p>mapping function that receives 3 arguments; see 'Details'</p>
</td></tr>
<tr><td><code id="mapreduce_+3A_reduce">reduce</code></td>
<td>
<p><code>NULL</code>, or a function that takes a list as input</p>
</td></tr>
<tr><td><code id="mapreduce_+3A_...">...</code></td>
<td>
<p>passed to other methods</p>
</td></tr>
<tr><td><code id="mapreduce_+3A_buffer_size">buffer_size</code></td>
<td>
<p>control how we split the array; see 'Details'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When handling out-of-memory arrays, it is recommended to load
a block of array at a time and execute on block level. See 
<code><a href="#topic+apply">apply</a></code> for a implementation. When an array is too large,
and when there are too many blocks, this operation will become 
very slow if computer memory is low. 
This is because the R will perform garbage collection frequently. 
Implemented in <code>C++</code>, <code>mapreduce</code> creates a buffer to store
the block data. By reusing the memory over and over again, it is possible
to iterate through the array with minimal garbage collections. Many 
statistics, including <code>min</code>, <code>max</code>, <code>sum</code>, 
<code>mean</code>, ... These statistics can be calculated in this 
way efficiently.
</p>
<p>The function <code>map</code> contains three arguments: <code>data</code> (mandate), 
<code>size</code> (optional), and <code>first_index</code> (optional). 
The <code>data</code> is the buffer,
whose length is consistent across iterations. <code>size</code> indicates
the effective size of the buffer. If the partition size
is not divisible by the buffer size, only first <code>size</code> elements of
the data are from array, and the rest elements will be <code>NA</code>. 
This situation could only occurs when <code>buffer_size</code> is manually 
specified. By default, all of <code>data</code> should belong to arrays.
The last argument <code>first_index</code> is the index of the first element
<code>data[1]</code> in the whole array. It is useful when positional data 
is needed. 
</p>
<p>The buffer size, specified by <code>buffer_size</code> is an 
additional optional argument in <code>...</code>. Its default is <code>NA</code>,
and will be calculated automatically. If manually specified, a
large buffer size would be desired to speed up the calculation.
The default buffer size will not exceed <code class="reqn">nThreads x 2MB</code>, where 
<code>nThreads</code> is the number of threads set by <code><a href="#topic+filearray_threads">filearray_threads</a></code>.
When partition length cannot be divided by the buffer size, instead of
trimming the buffer, <code>NA</code>s will be filled to the buffer, 
passed to <code>map</code> function; see previous paragraph for treatments.
</p>
<p>The function <code>mapreduce</code> ignores the missing partitions. That means
if a partition is missing, its data will not be read nor passed to 
<code>map</code> function. Please run <code>x$initialize_partition()</code> to make sure
partition files exist.
</p>


<h3>Value</h3>

<p>If <code>reduce</code> is <code>NULL</code>, return mapped results, otherwise
return reduced results from <code>reduce</code> function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

x &lt;- filearray_create(tempfile(), c(100, 100, 10))
x[] &lt;- rnorm(1e5)

## calculate summation
# identical to sum(x[]), but is more feasible in large cases

mapreduce(x, map = function(data, size){
    # make sure `data` is all from array
    if(length(data) != size){
        data &lt;- data[1:size]
    }
    sum(data)
}, reduce = function(mapped_list){
    do.call(sum, mapped_list)
})


## Find elements are less than -3
positions &lt;- mapreduce(
    x,
    map = function(data, size, first_index) {
        if (length(data) != size) {
            data &lt;- data[1:size]
        }
        which(data &lt; -3) + (first_index - 1)
    },
    reduce = function(mapped_list) {
        do.call(c, mapped_list)
    }
)

if(length(positions)){
    x[[positions[1]]]
}


</code></pre>

<hr>
<h2 id='S3-filearray'>'S3' methods for 'FileArray'</h2><span id='topic+S3-filearray'></span><span id='topic++5B.FileArray'></span><span id='topic++5B+3C-.FileArray'></span><span id='topic++5B+5B.FileArray'></span><span id='topic+as.array.FileArray'></span><span id='topic+dim.FileArray'></span><span id='topic+dimnames.FileArray'></span><span id='topic+dimnames+3C-.FileArray'></span><span id='topic+length.FileArray'></span><span id='topic+max.FileArray'></span><span id='topic+min.FileArray'></span><span id='topic+range.FileArray'></span><span id='topic+sum.FileArray'></span><span id='topic+subset.FileArray'></span>

<h3>Description</h3>

<p>These are 'S3' methods for 'FileArray'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'FileArray'

  x[
  i,
  ...,
  drop = TRUE,
  reshape = NULL,
  strict = TRUE,
  dimnames = TRUE,
  split_dim = 0
]

## S3 replacement method for class 'FileArray'
x[i, ..., lazy = FALSE] &lt;- value

## S3 method for class 'FileArray'
x[[i]]

## S3 method for class 'FileArray'
as.array(x, reshape = NULL, drop = FALSE, ...)

## S3 method for class 'FileArray'
dim(x)

## S3 method for class 'FileArray'
dimnames(x)

## S3 replacement method for class 'FileArray'
dimnames(x) &lt;- value

## S3 method for class 'FileArray'
length(x)

## S3 method for class 'FileArray'
max(x, na.rm = FALSE, ...)

## S3 method for class 'FileArray'
min(x, na.rm = FALSE, ...)

## S3 method for class 'FileArray'
range(x, na.rm = FALSE, ...)

## S3 method for class 'FileArray'
sum(x, na.rm = FALSE, ...)

## S3 method for class 'FileArray'
subset(x, ..., drop = FALSE, .env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="S3-filearray_+3A_x">x</code></td>
<td>
<p>a file array</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_i">i</code>, <code id="S3-filearray_+3A_...">...</code></td>
<td>
<p>index set, or passed to other methods</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_drop">drop</code></td>
<td>
<p>whether to drop dimensions; see topic <code><a href="base.html#topic+Extract">Extract</a></code></p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_reshape">reshape</code></td>
<td>
<p>a new dimension to set before returning subset results; default is <code>NULL</code> (use default dimensions)</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_strict">strict</code></td>
<td>
<p>whether to allow indices to exceed bound; currently only accept <code>TRUE</code></p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_dimnames">dimnames</code></td>
<td>
<p>whether to preserve <code><a href="base.html#topic+dimnames">dimnames</a></code></p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_split_dim">split_dim</code></td>
<td>
<p>internally used; split dimension and calculate indices to
manually speed up the subset; value ranged from 0 to size of dimension minus
one.</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_lazy">lazy</code></td>
<td>
<p>whether to lazy-evaluate the method, only works when assigning
arrays with logical array index</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_value">value</code></td>
<td>
<p>value to substitute or set</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_na.rm">na.rm</code></td>
<td>
<p>whether to remove <code>NA</code> values during the calculation</p>
</td></tr>
<tr><td><code id="S3-filearray_+3A_.env">.env</code></td>
<td>
<p>environment to evaluate formula when evaluating subset margin indices.</p>
</td></tr>
</table>


<h3>Functions</h3>


<ul>
<li> <p><code>[</code>: subset array
</p>
</li>
<li> <p><code>`[`(FileArray) &lt;- value</code>: subset assign array
</p>
</li>
<li> <p><code>[[</code>: get element by index
</p>
</li>
<li> <p><code>as.array(FileArray)</code>: converts file array to native array in R
</p>
</li>
<li> <p><code>dim(FileArray)</code>: get dimensions
</p>
</li>
<li> <p><code>dimnames(FileArray)</code>: get dimension names
</p>
</li>
<li> <p><code>dimnames(FileArray) &lt;- value</code>: set dimension names
</p>
</li>
<li> <p><code>length(FileArray)</code>: get array length
</p>
</li>
<li> <p><code>max(FileArray)</code>: get max value
</p>
</li>
<li> <p><code>min(FileArray)</code>: get min value
</p>
</li>
<li> <p><code>range(FileArray)</code>: get value range
</p>
</li>
<li> <p><code>sum(FileArray)</code>: get summation
</p>
</li>
<li> <p><code>subset(FileArray)</code>: get subset file array with formulae
</p>
</li></ul>

<hr>
<h2 id='S4-filearray'>'S4' methods for <code>FileArray</code></h2><span id='topic+S4-filearray'></span><span id='topic++2B+2CFileArray+2CFileArray-method'></span><span id='topic++2B+2CFileArray+2Cnumeric-method'></span><span id='topic++2B+2Cnumeric+2CFileArray-method'></span><span id='topic++2B+2CFileArray+2Ccomplex-method'></span><span id='topic++2B+2Ccomplex+2CFileArray-method'></span><span id='topic++2B+2CFileArray+2Clogical-method'></span><span id='topic++2B+2Clogical+2CFileArray-method'></span><span id='topic++2B+2CFileArray+2Carray-method'></span><span id='topic++2B+2Carray+2CFileArray-method'></span><span id='topic+-+2CFileArray+2CFileArray-method'></span><span id='topic+-+2CFileArray+2Cnumeric-method'></span><span id='topic+-+2Cnumeric+2CFileArray-method'></span><span id='topic+-+2CFileArray+2Ccomplex-method'></span><span id='topic+-+2Ccomplex+2CFileArray-method'></span><span id='topic+-+2CFileArray+2Clogical-method'></span><span id='topic+-+2Clogical+2CFileArray-method'></span><span id='topic+-+2CFileArray+2Carray-method'></span><span id='topic+-+2Carray+2CFileArray-method'></span><span id='topic++2A+2CFileArray+2CFileArray-method'></span><span id='topic++2A+2CFileArray+2Cnumeric-method'></span><span id='topic++2A+2Cnumeric+2CFileArray-method'></span><span id='topic++2A+2CFileArray+2Ccomplex-method'></span><span id='topic++2A+2Ccomplex+2CFileArray-method'></span><span id='topic++2A+2CFileArray+2Clogical-method'></span><span id='topic++2A+2Clogical+2CFileArray-method'></span><span id='topic++2A+2CFileArray+2Carray-method'></span><span id='topic++2A+2Carray+2CFileArray-method'></span><span id='topic++2F+2CFileArray+2CFileArray-method'></span><span id='topic++2F+2CFileArray+2Cnumeric-method'></span><span id='topic++2F+2Cnumeric+2CFileArray-method'></span><span id='topic++2F+2CFileArray+2Ccomplex-method'></span><span id='topic++2F+2Ccomplex+2CFileArray-method'></span><span id='topic++2F+2CFileArray+2Clogical-method'></span><span id='topic++2F+2Clogical+2CFileArray-method'></span><span id='topic++2F+2CFileArray+2Carray-method'></span><span id='topic++2F+2Carray+2CFileArray-method'></span><span id='topic++5E+2CFileArray+2CFileArray-method'></span><span id='topic++5E+2CFileArray+2Cnumeric-method'></span><span id='topic++5E+2Cnumeric+2CFileArray-method'></span><span id='topic++5E+2CFileArray+2Ccomplex-method'></span><span id='topic++5E+2Ccomplex+2CFileArray-method'></span><span id='topic++5E+2CFileArray+2Clogical-method'></span><span id='topic++5E+2Clogical+2CFileArray-method'></span><span id='topic++5E+2CFileArray+2Carray-method'></span><span id='topic++5E+2Carray+2CFileArray-method'></span><span id='topic++25+25+2CFileArray+2CFileArray-method'></span><span id='topic++25+25+2CFileArray+2Cnumeric-method'></span><span id='topic++25+25+2Cnumeric+2CFileArray-method'></span><span id='topic++25+25+2CFileArray+2Ccomplex-method'></span><span id='topic++25+25+2Ccomplex+2CFileArray-method'></span><span id='topic++25+25+2CFileArray+2Clogical-method'></span><span id='topic++25+25+2Clogical+2CFileArray-method'></span><span id='topic++25+25+2CFileArray+2Carray-method'></span><span id='topic++25+25+2Carray+2CFileArray-method'></span><span id='topic++25+2F+25+2CFileArray+2CFileArray-method'></span><span id='topic++25+2F+25+2CFileArray+2Cnumeric-method'></span><span id='topic++25+2F+25+2Cnumeric+2CFileArray-method'></span><span id='topic++25+2F+25+2CFileArray+2Ccomplex-method'></span><span id='topic++25+2F+25+2Ccomplex+2CFileArray-method'></span><span id='topic++25+2F+25+2CFileArray+2Clogical-method'></span><span id='topic++25+2F+25+2Clogical+2CFileArray-method'></span><span id='topic++25+2F+25+2CFileArray+2Carray-method'></span><span id='topic++25+2F+25+2Carray+2CFileArray-method'></span><span id='topic++3D+3D+2CFileArray+2CFileArray-method'></span><span id='topic++3D+3D+2CFileArray+2Cnumeric-method'></span><span id='topic++3D+3D+2Cnumeric+2CFileArray-method'></span><span id='topic++3D+3D+2CFileArray+2Ccomplex-method'></span><span id='topic++3D+3D+2Ccomplex+2CFileArray-method'></span><span id='topic++3D+3D+2CFileArray+2Clogical-method'></span><span id='topic++3D+3D+2Clogical+2CFileArray-method'></span><span id='topic++3D+3D+2CFileArray+2Carray-method'></span><span id='topic++3D+3D+2Carray+2CFileArray-method'></span><span id='topic++3E+2CFileArray+2CFileArray-method'></span><span id='topic++3E+2CFileArray+2Cnumeric-method'></span><span id='topic++3E+2Cnumeric+2CFileArray-method'></span><span id='topic++3E+2CFileArray+2Ccomplex-method'></span><span id='topic++3E+2Ccomplex+2CFileArray-method'></span><span id='topic++3E+2CFileArray+2Clogical-method'></span><span id='topic++3E+2Clogical+2CFileArray-method'></span><span id='topic++3E+2CFileArray+2Carray-method'></span><span id='topic++3E+2Carray+2CFileArray-method'></span><span id='topic++3C+2CFileArray+2CFileArray-method'></span><span id='topic++3C+2CFileArray+2Cnumeric-method'></span><span id='topic++3C+2Cnumeric+2CFileArray-method'></span><span id='topic++3C+2CFileArray+2Ccomplex-method'></span><span id='topic++3C+2Ccomplex+2CFileArray-method'></span><span id='topic++3C+2CFileArray+2Clogical-method'></span><span id='topic++3C+2Clogical+2CFileArray-method'></span><span id='topic++3C+2CFileArray+2Carray-method'></span><span id='topic++3C+2Carray+2CFileArray-method'></span><span id='topic++21+3D+2CFileArray+2CFileArray-method'></span><span id='topic++21+3D+2CFileArray+2Cnumeric-method'></span><span id='topic++21+3D+2Cnumeric+2CFileArray-method'></span><span id='topic++21+3D+2CFileArray+2Ccomplex-method'></span><span id='topic++21+3D+2Ccomplex+2CFileArray-method'></span><span id='topic++21+3D+2CFileArray+2Clogical-method'></span><span id='topic++21+3D+2Clogical+2CFileArray-method'></span><span id='topic++21+3D+2CFileArray+2Carray-method'></span><span id='topic++21+3D+2Carray+2CFileArray-method'></span><span id='topic++3E+3D+2CFileArray+2CFileArray-method'></span><span id='topic++3E+3D+2CFileArray+2Cnumeric-method'></span><span id='topic++3E+3D+2Cnumeric+2CFileArray-method'></span><span id='topic++3E+3D+2CFileArray+2Ccomplex-method'></span><span id='topic++3E+3D+2Ccomplex+2CFileArray-method'></span><span id='topic++3E+3D+2CFileArray+2Clogical-method'></span><span id='topic++3E+3D+2Clogical+2CFileArray-method'></span><span id='topic++3E+3D+2CFileArray+2Carray-method'></span><span id='topic++3E+3D+2Carray+2CFileArray-method'></span><span id='topic++3C+3D+2CFileArray+2CFileArray-method'></span><span id='topic++3C+3D+2CFileArray+2Cnumeric-method'></span><span id='topic++3C+3D+2Cnumeric+2CFileArray-method'></span><span id='topic++3C+3D+2CFileArray+2Ccomplex-method'></span><span id='topic++3C+3D+2Ccomplex+2CFileArray-method'></span><span id='topic++3C+3D+2CFileArray+2Clogical-method'></span><span id='topic++3C+3D+2Clogical+2CFileArray-method'></span><span id='topic++3C+3D+2CFileArray+2Carray-method'></span><span id='topic++3C+3D+2Carray+2CFileArray-method'></span><span id='topic++26+2CFileArray+2CFileArray-method'></span><span id='topic++26+2CFileArray+2Cnumeric-method'></span><span id='topic++26+2Cnumeric+2CFileArray-method'></span><span id='topic++26+2CFileArray+2Ccomplex-method'></span><span id='topic++26+2Ccomplex+2CFileArray-method'></span><span id='topic++26+2CFileArray+2Clogical-method'></span><span id='topic++26+2Clogical+2CFileArray-method'></span><span id='topic++26+2CFileArray+2Carray-method'></span><span id='topic++26+2Carray+2CFileArray-method'></span><span id='topic++7C+2CFileArray+2CFileArray-method'></span><span id='topic++7C+2CFileArray+2Cnumeric-method'></span><span id='topic++7C+2Cnumeric+2CFileArray-method'></span><span id='topic++7C+2CFileArray+2Ccomplex-method'></span><span id='topic++7C+2Ccomplex+2CFileArray-method'></span><span id='topic++7C+2CFileArray+2Clogical-method'></span><span id='topic++7C+2Clogical+2CFileArray-method'></span><span id='topic++7C+2CFileArray+2Carray-method'></span><span id='topic++7C+2Carray+2CFileArray-method'></span><span id='topic++21+2CFileArray-method'></span><span id='topic+exp+2CFileArray-method'></span><span id='topic+expm1+2CFileArray-method'></span><span id='topic+log+2CFileArray-method'></span><span id='topic+log10+2CFileArray-method'></span><span id='topic+log2+2CFileArray-method'></span><span id='topic+log1p+2CFileArray-method'></span><span id='topic+abs+2CFileArray-method'></span><span id='topic+sqrt+2CFileArray-method'></span><span id='topic+sign+2CFileArray-method'></span><span id='topic+signif+2CFileArray-method'></span><span id='topic+trunc+2CFileArray-method'></span><span id='topic+floor+2CFileArray-method'></span><span id='topic+ceiling+2CFileArray-method'></span><span id='topic+round+2CFileArray-method'></span><span id='topic+acos+2CFileArray-method'></span><span id='topic+acosh+2CFileArray-method'></span><span id='topic+asin+2CFileArray-method'></span><span id='topic+asinh+2CFileArray-method'></span><span id='topic+atan+2CFileArray-method'></span><span id='topic+atanh+2CFileArray-method'></span><span id='topic+cos+2CFileArray-method'></span><span id='topic+cosh+2CFileArray-method'></span><span id='topic+cospi+2CFileArray-method'></span><span id='topic+sin+2CFileArray-method'></span><span id='topic+sinh+2CFileArray-method'></span><span id='topic+sinpi+2CFileArray-method'></span><span id='topic+tan+2CFileArray-method'></span><span id='topic+tanh+2CFileArray-method'></span><span id='topic+tanpi+2CFileArray-method'></span><span id='topic+gamma+2CFileArray-method'></span><span id='topic+lgamma+2CFileArray-method'></span><span id='topic+digamma+2CFileArray-method'></span><span id='topic+trigamma+2CFileArray-method'></span><span id='topic+Arg+2CFileArray-method'></span><span id='topic+Conj+2CFileArray-method'></span><span id='topic+Im+2CFileArray-method'></span><span id='topic+Mod+2CFileArray-method'></span><span id='topic+Re+2CFileArray-method'></span><span id='topic+is.na+2CFileArray-method'></span>

<h3>Description</h3>

<p>'S4' methods for <code>FileArray</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'FileArray,FileArray'
e1 + e2

## S4 method for signature 'FileArray,numeric'
e1 + e2

## S4 method for signature 'numeric,FileArray'
e1 + e2

## S4 method for signature 'FileArray,complex'
e1 + e2

## S4 method for signature 'complex,FileArray'
e1 + e2

## S4 method for signature 'FileArray,logical'
e1 + e2

## S4 method for signature 'logical,FileArray'
e1 + e2

## S4 method for signature 'FileArray,array'
e1 + e2

## S4 method for signature 'array,FileArray'
e1 + e2

## S4 method for signature 'FileArray,FileArray'
e1 - e2

## S4 method for signature 'FileArray,numeric'
e1 - e2

## S4 method for signature 'numeric,FileArray'
e1 - e2

## S4 method for signature 'FileArray,complex'
e1 - e2

## S4 method for signature 'complex,FileArray'
e1 - e2

## S4 method for signature 'FileArray,logical'
e1 - e2

## S4 method for signature 'logical,FileArray'
e1 - e2

## S4 method for signature 'FileArray,array'
e1 - e2

## S4 method for signature 'array,FileArray'
e1 - e2

## S4 method for signature 'FileArray,FileArray'
e1 * e2

## S4 method for signature 'FileArray,numeric'
e1 * e2

## S4 method for signature 'numeric,FileArray'
e1 * e2

## S4 method for signature 'FileArray,complex'
e1 * e2

## S4 method for signature 'complex,FileArray'
e1 * e2

## S4 method for signature 'FileArray,logical'
e1 * e2

## S4 method for signature 'logical,FileArray'
e1 * e2

## S4 method for signature 'FileArray,array'
e1 * e2

## S4 method for signature 'array,FileArray'
e1 * e2

## S4 method for signature 'FileArray,FileArray'
e1 / e2

## S4 method for signature 'FileArray,numeric'
e1 / e2

## S4 method for signature 'numeric,FileArray'
e1 / e2

## S4 method for signature 'FileArray,complex'
e1 / e2

## S4 method for signature 'complex,FileArray'
e1 / e2

## S4 method for signature 'FileArray,logical'
e1 / e2

## S4 method for signature 'logical,FileArray'
e1 / e2

## S4 method for signature 'FileArray,array'
e1 / e2

## S4 method for signature 'array,FileArray'
e1 / e2

## S4 method for signature 'FileArray,FileArray'
e1 ^ e2

## S4 method for signature 'FileArray,numeric'
e1 ^ e2

## S4 method for signature 'numeric,FileArray'
e1 ^ e2

## S4 method for signature 'FileArray,complex'
e1 ^ e2

## S4 method for signature 'complex,FileArray'
e1 ^ e2

## S4 method for signature 'FileArray,logical'
e1 ^ e2

## S4 method for signature 'logical,FileArray'
e1 ^ e2

## S4 method for signature 'FileArray,array'
e1 ^ e2

## S4 method for signature 'array,FileArray'
e1 ^ e2

## S4 method for signature 'FileArray,FileArray'
e1 %% e2

## S4 method for signature 'FileArray,numeric'
e1 %% e2

## S4 method for signature 'numeric,FileArray'
e1 %% e2

## S4 method for signature 'FileArray,complex'
e1 %% e2

## S4 method for signature 'complex,FileArray'
e1 %% e2

## S4 method for signature 'FileArray,logical'
e1 %% e2

## S4 method for signature 'logical,FileArray'
e1 %% e2

## S4 method for signature 'FileArray,array'
e1 %% e2

## S4 method for signature 'array,FileArray'
e1 %% e2

## S4 method for signature 'FileArray,FileArray'
e1 %/% e2

## S4 method for signature 'FileArray,numeric'
e1 %/% e2

## S4 method for signature 'numeric,FileArray'
e1 %/% e2

## S4 method for signature 'FileArray,complex'
e1 %/% e2

## S4 method for signature 'complex,FileArray'
e1 %/% e2

## S4 method for signature 'FileArray,logical'
e1 %/% e2

## S4 method for signature 'logical,FileArray'
e1 %/% e2

## S4 method for signature 'FileArray,array'
e1 %/% e2

## S4 method for signature 'array,FileArray'
e1 %/% e2

## S4 method for signature 'FileArray,FileArray'
e1 == e2

## S4 method for signature 'FileArray,numeric'
e1 == e2

## S4 method for signature 'numeric,FileArray'
e1 == e2

## S4 method for signature 'FileArray,complex'
e1 == e2

## S4 method for signature 'complex,FileArray'
e1 == e2

## S4 method for signature 'FileArray,logical'
e1 == e2

## S4 method for signature 'logical,FileArray'
e1 == e2

## S4 method for signature 'FileArray,array'
e1 == e2

## S4 method for signature 'array,FileArray'
e1 == e2

## S4 method for signature 'FileArray,FileArray'
e1 &gt; e2

## S4 method for signature 'FileArray,numeric'
e1 &gt; e2

## S4 method for signature 'numeric,FileArray'
e1 &gt; e2

## S4 method for signature 'FileArray,complex'
e1 &gt; e2

## S4 method for signature 'complex,FileArray'
e1 &gt; e2

## S4 method for signature 'FileArray,logical'
e1 &gt; e2

## S4 method for signature 'logical,FileArray'
e1 &gt; e2

## S4 method for signature 'FileArray,array'
e1 &gt; e2

## S4 method for signature 'array,FileArray'
e1 &gt; e2

## S4 method for signature 'FileArray,FileArray'
e1 &lt; e2

## S4 method for signature 'FileArray,numeric'
e1 &lt; e2

## S4 method for signature 'numeric,FileArray'
e1 &lt; e2

## S4 method for signature 'FileArray,complex'
e1 &lt; e2

## S4 method for signature 'complex,FileArray'
e1 &lt; e2

## S4 method for signature 'FileArray,logical'
e1 &lt; e2

## S4 method for signature 'logical,FileArray'
e1 &lt; e2

## S4 method for signature 'FileArray,array'
e1 &lt; e2

## S4 method for signature 'array,FileArray'
e1 &lt; e2

## S4 method for signature 'FileArray,FileArray'
e1 != e2

## S4 method for signature 'FileArray,numeric'
e1 != e2

## S4 method for signature 'numeric,FileArray'
e1 != e2

## S4 method for signature 'FileArray,complex'
e1 != e2

## S4 method for signature 'complex,FileArray'
e1 != e2

## S4 method for signature 'FileArray,logical'
e1 != e2

## S4 method for signature 'logical,FileArray'
e1 != e2

## S4 method for signature 'FileArray,array'
e1 != e2

## S4 method for signature 'array,FileArray'
e1 != e2

## S4 method for signature 'FileArray,FileArray'
e1 &gt;= e2

## S4 method for signature 'FileArray,numeric'
e1 &gt;= e2

## S4 method for signature 'numeric,FileArray'
e1 &gt;= e2

## S4 method for signature 'FileArray,complex'
e1 &gt;= e2

## S4 method for signature 'complex,FileArray'
e1 &gt;= e2

## S4 method for signature 'FileArray,logical'
e1 &gt;= e2

## S4 method for signature 'logical,FileArray'
e1 &gt;= e2

## S4 method for signature 'FileArray,array'
e1 &gt;= e2

## S4 method for signature 'array,FileArray'
e1 &gt;= e2

## S4 method for signature 'FileArray,FileArray'
e1 &lt;= e2

## S4 method for signature 'FileArray,numeric'
e1 &lt;= e2

## S4 method for signature 'numeric,FileArray'
e1 &lt;= e2

## S4 method for signature 'FileArray,complex'
e1 &lt;= e2

## S4 method for signature 'complex,FileArray'
e1 &lt;= e2

## S4 method for signature 'FileArray,logical'
e1 &lt;= e2

## S4 method for signature 'logical,FileArray'
e1 &lt;= e2

## S4 method for signature 'FileArray,array'
e1 &lt;= e2

## S4 method for signature 'array,FileArray'
e1 &lt;= e2

## S4 method for signature 'FileArray,FileArray'
e1 &amp; e2

## S4 method for signature 'FileArray,numeric'
e1 &amp; e2

## S4 method for signature 'numeric,FileArray'
e1 &amp; e2

## S4 method for signature 'FileArray,complex'
e1 &amp; e2

## S4 method for signature 'complex,FileArray'
e1 &amp; e2

## S4 method for signature 'FileArray,logical'
e1 &amp; e2

## S4 method for signature 'logical,FileArray'
e1 &amp; e2

## S4 method for signature 'FileArray,array'
e1 &amp; e2

## S4 method for signature 'array,FileArray'
e1 &amp; e2

## S4 method for signature 'FileArray,FileArray'
e1 | e2

## S4 method for signature 'FileArray,numeric'
e1 | e2

## S4 method for signature 'numeric,FileArray'
e1 | e2

## S4 method for signature 'FileArray,complex'
e1 | e2

## S4 method for signature 'complex,FileArray'
e1 | e2

## S4 method for signature 'FileArray,logical'
e1 | e2

## S4 method for signature 'logical,FileArray'
e1 | e2

## S4 method for signature 'FileArray,array'
e1 | e2

## S4 method for signature 'array,FileArray'
e1 | e2

## S4 method for signature 'FileArray'
!x

## S4 method for signature 'FileArray'
exp(x)

## S4 method for signature 'FileArray'
expm1(x)

## S4 method for signature 'FileArray'
log(x, base = exp(1))

## S4 method for signature 'FileArray'
log10(x)

## S4 method for signature 'FileArray'
log2(x)

## S4 method for signature 'FileArray'
log1p(x)

## S4 method for signature 'FileArray'
abs(x)

## S4 method for signature 'FileArray'
sqrt(x)

## S4 method for signature 'FileArray'
sign(x)

## S4 method for signature 'FileArray'
signif(x, digits = 6)

## S4 method for signature 'FileArray'
trunc(x, ...)

## S4 method for signature 'FileArray'
floor(x)

## S4 method for signature 'FileArray'
ceiling(x)

## S4 method for signature 'FileArray'
round(x, digits = 0)

## S4 method for signature 'FileArray'
acos(x)

## S4 method for signature 'FileArray'
acosh(x)

## S4 method for signature 'FileArray'
asin(x)

## S4 method for signature 'FileArray'
asinh(x)

## S4 method for signature 'FileArray'
atan(x)

## S4 method for signature 'FileArray'
atanh(x)

## S4 method for signature 'FileArray'
cos(x)

## S4 method for signature 'FileArray'
cosh(x)

## S4 method for signature 'FileArray'
cospi(x)

## S4 method for signature 'FileArray'
sin(x)

## S4 method for signature 'FileArray'
sinh(x)

## S4 method for signature 'FileArray'
sinpi(x)

## S4 method for signature 'FileArray'
tan(x)

## S4 method for signature 'FileArray'
tanh(x)

## S4 method for signature 'FileArray'
tanpi(x)

## S4 method for signature 'FileArray'
gamma(x)

## S4 method for signature 'FileArray'
lgamma(x)

## S4 method for signature 'FileArray'
digamma(x)

## S4 method for signature 'FileArray'
trigamma(x)

## S4 method for signature 'FileArray'
Arg(z)

## S4 method for signature 'FileArray'
Conj(z)

## S4 method for signature 'FileArray'
Im(z)

## S4 method for signature 'FileArray'
Mod(z)

## S4 method for signature 'FileArray'
Re(z)

## S4 method for signature 'FileArray'
is.na(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="S4-filearray_+3A_x">x</code>, <code id="S4-filearray_+3A_z">z</code>, <code id="S4-filearray_+3A_e1">e1</code>, <code id="S4-filearray_+3A_e2">e2</code></td>
<td>
<p><code>FileArray</code> or compatible data</p>
</td></tr>
<tr><td><code id="S4-filearray_+3A_base">base</code>, <code id="S4-filearray_+3A_digits">digits</code>, <code id="S4-filearray_+3A_...">...</code></td>
<td>
<p>passed to other methods</p>
</td></tr>
</table>


<h3>Value</h3>

<p>See <code><a href="methods.html#topic+S4groupGeneric">S4groupGeneric</a></code>
</p>

<hr>
<h2 id='typeof'>The type of a file array (extended)</h2><span id='topic+typeof'></span><span id='topic+typeof+2CFileArray-method'></span><span id='topic+typeof+2CFileArrayProxy-method'></span>

<h3>Description</h3>

<p>The type of a file array (extended)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>typeof(x)

## S4 method for signature 'FileArray'
typeof(x)

## S4 method for signature 'FileArrayProxy'
typeof(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="typeof_+3A_x">x</code></td>
<td>
<p>any file array</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string. The possible values are <code>"double"</code>,
<code>"integer"</code>, <code>"logical"</code>, and <code>"raw"</code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
