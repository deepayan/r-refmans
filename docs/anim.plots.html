<!DOCTYPE html><html><head><title>Help for package anim.plots</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {anim.plots}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#anim.plots-package'><p>anim.plots: simple animated plots For R</p></a></li>
<li><a href='#anim.barplot'><p>Create an animated barplot.</p></a></li>
<li><a href='#anim.contour'><p>Create an animated contour plot or perspective plot</p></a></li>
<li><a href='#anim.curve'><p>Draw an animated curve.</p></a></li>
<li><a href='#anim.hist'><p>Draw an animated histogram.</p></a></li>
<li><a href='#anim.plot'><p>Create an animated plot.</p></a></li>
<li><a href='#anim.save'><p>Save an anim.frames object in various formats.</p></a></li>
<li><a href='#anim.segments'><p>Draw an animation of line segments or arrows.</p></a></li>
<li><a href='#anim.smooth'><p>Smooth an <code>anim.frames</code> object</p></a></li>
<li><a href='#cities'><p>Cities near the Grande Armee's march on Moscow</p></a></li>
<li><a href='#gm_data'><p>Gapminder GDP, life expectancy and population data</p></a></li>
<li><a href='#hurricanes'><p>Wind speed data for hurricanes in 2009</p></a></li>
<li><a href='#merge.anim.frames'><p>Merge anim.frames objects</p></a></li>
<li><a href='#PGgame'><p>Data from 20 rounds of a public goods game with punishment</p></a></li>
<li><a href='#replay'><p>Replay an <code>anim.frames</code> object</p></a></li>
<li><a href='#temps'><p>Temperatures for the Grande Armee's march on Moscow</p></a></li>
<li><a href='#troops'><p>Troop numbers for the Grande Armee's march on Moscow</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Simple Animated Plots for R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.2</td>
</tr>
<tr>
<td>Author:</td>
<td>David Hugh-Jones &lt;davidhughjones@gmail.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Hugh-Jones &lt;davidhughjones@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Simple animated versions of basic R plots, using the 'animation'
    package. Includes animated versions of plot, barplot, persp, contour,
    filled.contour, hist, curve, points, lines, text, symbols, segments, and
    arrows.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hughjonesd/anim.plots">https://github.com/hughjonesd/anim.plots</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hughjonesd/anim.plots/issues">https://github.com/hughjonesd/anim.plots/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>animation</td>
</tr>
<tr>
<td>Suggests:</td>
<td>maps, knitr, mapdata, testthat, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-30 14:50:47 UTC; david</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-30 15:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='anim.plots-package'>anim.plots: simple animated plots For R</h2><span id='topic+anim.plots-package'></span>

<h3>Description</h3>

<p>anim.plots provides simple animated versions of basic R plots, using the 'animation'
package. It includes animated versions of plot, barplot, persp, contour,
filled.contour, hist, curve, points, lines, text, symbols, segments, and
arrows.
</p>


<h3>Details</h3>

<p>For more information, run <code>vignette('anim.plots-stub')</code>, or check the vignette out
on the web at <a href="https://hughjonesd.github.io/anim.plots/anim.plots.html">https://hughjonesd.github.io/anim.plots/anim.plots.html</a>.
</p>
<p>Be aware that anim.plots is just a simple wrapper around Yihui Xie's &quot;animation&quot;
package. You may want to consider more modern solutions such as 
<a href="https://cran.r-project.org/package=gganimate">gganimate</a>.
</p>

<hr>
<h2 id='anim.barplot'>Create an animated barplot.</h2><span id='topic+anim.barplot'></span><span id='topic+anim.barplot.default'></span>

<h3>Description</h3>

<p>Create an animated barplot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.barplot(...)

## Default S3 method:
anim.barplot(
  height,
  times = NULL,
  show = TRUE,
  speed = 1,
  use.times = TRUE,
  window = t,
  window.process = NULL,
  width = 1,
  space = NULL,
  names.arg = NULL,
  beside = FALSE,
  density = NULL,
  angle = NULL,
  col = NULL,
  border = NULL,
  horiz = FALSE,
  xlim = NULL,
  ylim = NULL,
  xlab = NULL,
  ylab = NULL,
  main = NULL,
  sub = NULL,
  offset = NULL,
  legend.text = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.barplot_+3A_height">height</code></td>
<td>
<p>a vector, matrix or array. If a vector it is divided up by 
<code>times</code> and <code><a href="graphics.html#topic+barplot">barplot</a></code> is called on each chunk. If a
matrix, <code><a href="graphics.html#topic+barplot">barplot</a></code> is called on each column. If an array, 
<code><a href="graphics.html#topic+barplot">barplot</a></code> is called on each matrix of form <code>height[,,i]</code>.</p>
</td></tr>
<tr><td><code id="anim.barplot_+3A_times">times</code></td>
<td>
<p>a vector of times. If NULL and <code>height</code> is a matrix,
the last dimension of <code>height</code> will be used</p>
</td></tr>
<tr><td><code id="anim.barplot_+3A_show">show</code>, <code id="anim.barplot_+3A_speed">speed</code>, <code id="anim.barplot_+3A_use.times">use.times</code>, <code id="anim.barplot_+3A_window">window</code>, <code id="anim.barplot_+3A_window.process">window.process</code></td>
<td>
<p>see <code><a href="#topic+anim.plot">anim.plot</a></code></p>
</td></tr>
<tr><td><code id="anim.barplot_+3A_width">width</code>, <code id="anim.barplot_+3A_space">space</code>, <code id="anim.barplot_+3A_beside">beside</code>, <code id="anim.barplot_+3A_names.arg">names.arg</code>, <code id="anim.barplot_+3A_density">density</code>, <code id="anim.barplot_+3A_angle">angle</code>, <code id="anim.barplot_+3A_col">col</code>, <code id="anim.barplot_+3A_border">border</code>, <code id="anim.barplot_+3A_horiz">horiz</code>, <code id="anim.barplot_+3A_xlim">xlim</code>, <code id="anim.barplot_+3A_ylim">ylim</code>, <code id="anim.barplot_+3A_xlab">xlab</code>, <code id="anim.barplot_+3A_ylab">ylab</code>, <code id="anim.barplot_+3A_main">main</code>, <code id="anim.barplot_+3A_sub">sub</code>, <code id="anim.barplot_+3A_offset">offset</code>, <code id="anim.barplot_+3A_legend.text">legend.text</code>, <code id="anim.barplot_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+barplot">barplot</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Arguments <code>width, names.arg, density, angle, col, border</code> 
and <code>offset</code> may be either vectors
of length <code>length(tbl)</code> or matrices with one column for each unique 
value of <code>times</code>. Other arguments should be length 1 or vectors.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>anim.barplot(1:100, times=rep(1:10, each=10), ylim=c(0,100))
## barplot with a matrix
ChickWeight$wq &lt;- cut(ChickWeight$weight, 5)
tbl &lt;- as.array(xtabs(~ wq + Diet + Time, data=ChickWeight))
ptbl &lt;- prop.table(tbl, 2:3)
anim.barplot(ptbl, xlab="Diet", ylab="N", xlim=c(0,8), legend.text=paste(
     "Quintile", 1:5), col=1:5)
anim.barplot(tbl, xlab="Diet", ylab="N", beside=TRUE, ylim=c(0,20),
   legend.text=paste("Quintile", 1:5), col=1:5)
   
</code></pre>

<hr>
<h2 id='anim.contour'>Create an animated contour plot or perspective plot</h2><span id='topic+anim.contour'></span><span id='topic+anim.filled.contour'></span><span id='topic+anim.filled.contour.default'></span><span id='topic+anim.persp'></span><span id='topic+anim.contour.default'></span>

<h3>Description</h3>

<p>Create an animated contour plot or perspective plot of 3D data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.contour(...)

anim.filled.contour(...)

## Default S3 method:
anim.filled.contour(...)

anim.persp(...)

## Default S3 method:
anim.contour(
  x,
  y,
  z,
  times,
  speed = 1,
  use.times = TRUE,
  window = t,
  window.process = NULL,
  show = TRUE,
  fn = contour,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.contour_+3A_x">x</code>, <code id="anim.contour_+3A_y">y</code>, <code id="anim.contour_+3A_z">z</code>, <code id="anim.contour_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+contour">contour</a></code> or <code><a href="graphics.html#topic+persp">persp</a></code></p>
</td></tr>
<tr><td><code id="anim.contour_+3A_times">times</code>, <code id="anim.contour_+3A_speed">speed</code>, <code id="anim.contour_+3A_use.times">use.times</code>, <code id="anim.contour_+3A_window">window</code>, <code id="anim.contour_+3A_window.process">window.process</code>, <code id="anim.contour_+3A_show">show</code></td>
<td>
<p>see 
<code><a href="#topic+anim.plot">anim.plot</a></code> for details.</p>
</td></tr>
<tr><td><code id="anim.contour_+3A_fn">fn</code></td>
<td>
<p>underlying function to use.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
tmp &lt;- volcano
tmp[] &lt;- 200 - ((row(tmp) - 43)^2 + (col(tmp) - 30)^2)/20
cplot &lt;- array(NA, dim=c(87,61,20))
cplot[,,1] &lt;- tmp
cplot[,,20] &lt;- volcano
cplot &lt;- apply(cplot, 1:2, function(x) seq(x[1], x[20], length.out=20))
cplot &lt;- aperm(cplot, c(2,3,1))
anim.contour(z=cplot, times=1:20, speed=3, levels=80 + 1:12*10, lty=c(1,2,2))
anim.filled.contour(z=cplot, times=1:20, speed=3, levels=80 + 1:12*10, 
   color.palette=terrain.colors)
   
cplot2 &lt;- apply(cplot, 1:2, function(x) seq(0, x[20], length.out=20))
cplot2 &lt;- aperm(cplot2, c(2,3,1))
anim.persp(z=cplot2, times=1:20, xlab="", ylab="", zlab="Height", phi=45,
theta=30, speed=5, border=NA, r=3, col="yellowgreen", shade=.5, box=FALSE)
 
</code></pre>

<hr>
<h2 id='anim.curve'>Draw an animated curve.</h2><span id='topic+anim.curve'></span>

<h3>Description</h3>

<p>This function is the animated version of <code><a href="graphics.html#topic+curve">curve</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.curve(expr, x = NULL, from = 0, to = 1, n = 255, times, type = "l", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.curve_+3A_expr">expr</code></td>
<td>
<p>a function which takes two arguments, or an expression involving
<code>x</code> and <code>t</code>.</p>
</td></tr>
<tr><td><code id="anim.curve_+3A_x">x</code></td>
<td>
<p>values of <code>x</code> at which the function will be evaluated in each frame.
Alternatively, you may specify <code>from, to</code> and <code>n</code>.</p>
</td></tr>
<tr><td><code id="anim.curve_+3A_from">from</code>, <code id="anim.curve_+3A_to">to</code></td>
<td>
<p>endpoints of <code>x</code></p>
</td></tr>
<tr><td><code id="anim.curve_+3A_n">n</code></td>
<td>
<p>number of values of <code>x</code> at which the function will be evaluated
for each frame</p>
</td></tr>
<tr><td><code id="anim.curve_+3A_times">times</code></td>
<td>
<p>vector of values of <code>t</code> at which the function will be 
evaluated. Each unique value creates a single animation frame.</p>
</td></tr>
<tr><td><code id="anim.curve_+3A_type">type</code>, <code id="anim.curve_+3A_...">...</code></td>
<td>
<p>parameters passed to <code><a href="#topic+anim.plot.default">anim.plot.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that <code>times</code> is interpreted differently here than elsewhere. In
particular, it cannot be a length-1 vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>anim.curve(x^t, times=10:50/10, n=20)
anim.curve(sin(x*t), times=1:30, n=100, speed=12, col="darkgreen", from=-1, to=1)

## curve is constant in t, but window moves. 
## NB: 'from' and 'to' control where the expression is evaluated. 
## 'xlim' just controls the window.
anim.curve(sin(cos(-x)*exp(x/2)), times=0:100/10, from=-5, to=10, n=500, 
     col="red", lwd=2, xlim=rbind(top &lt;- seq(-5, 10, 1/10), top+5))
</code></pre>

<hr>
<h2 id='anim.hist'>Draw an animated histogram.</h2><span id='topic+anim.hist'></span>

<h3>Description</h3>

<p>Draw an animated histogram.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.hist(
  x,
  times,
  speed = 1,
  show = TRUE,
  use.times = TRUE,
  window = t,
  window.process = NULL,
  density = NULL,
  angle = NULL,
  col = NULL,
  border = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.hist_+3A_x">x</code>, <code id="anim.hist_+3A_density">density</code>, <code id="anim.hist_+3A_angle">angle</code>, <code id="anim.hist_+3A_col">col</code>, <code id="anim.hist_+3A_border">border</code>, <code id="anim.hist_+3A_...">...</code></td>
<td>
<p>parameters passed to <code><a href="graphics.html#topic+hist">hist</a></code>.</p>
</td></tr>
<tr><td><code id="anim.hist_+3A_times">times</code>, <code id="anim.hist_+3A_show">show</code>, <code id="anim.hist_+3A_speed">speed</code>, <code id="anim.hist_+3A_use.times">use.times</code>, <code id="anim.hist_+3A_window">window</code>, <code id="anim.hist_+3A_window.process">window.process</code></td>
<td>
<p>see 
<code><a href="#topic+anim.plot">anim.plot</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Parameters <code>x, density, angle, col</code> and <code>border</code> are all
&quot;chunked&quot;, i.e. first recycled to the length of <code>times</code> or <code>x</code>
(whichever is longer), then split according to the unique values of <code>times</code>.
See <code><a href="#topic+anim.plot">anim.plot</a></code> for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>anim.hist(rep(rnorm(5000), 7), times=rep(1:7, each=5000), 
     breaks=c(5,10,20,50,100,200, 500, 1000))
</code></pre>

<hr>
<h2 id='anim.plot'>Create an animated plot.</h2><span id='topic+anim.plot'></span><span id='topic+anim.points'></span><span id='topic+anim.lines'></span><span id='topic+anim.text'></span><span id='topic+anim.plot.default'></span><span id='topic+anim.plot.formula'></span><span id='topic+anim.points.default'></span><span id='topic+anim.lines.default'></span><span id='topic+anim.text.default'></span><span id='topic+anim.symbols'></span><span id='topic+anim.points.formula'></span><span id='topic+anim.lines.formula'></span><span id='topic+anim.text.formula'></span>

<h3>Description</h3>

<p><code>anim.plot</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.plot(...)

anim.points(...)

anim.lines(...)

anim.text(...)

## Default S3 method:
anim.plot(
  x,
  y = NULL,
  times = 1:length(x),
  speed = 1,
  show = TRUE,
  use.times = TRUE,
  window = if (identical(fn, lines)) t:(t + 1) else t,
  window.process = NULL,
  xlim = NULL,
  ylim = NULL,
  col = par("col"),
  xaxp = NULL,
  yaxp = NULL,
  pch = par("pch"),
  cex = 1,
  labels = NULL,
  asp = NULL,
  lty = par("lty"),
  lwd = par("lwd"),
  fn = plot,
  ...
)

## S3 method for class 'formula'
anim.plot(
  formula,
  data = parent.frame(),
  subset = NULL,
  fn = plot,
  window = t,
  ...
)

## Default S3 method:
anim.points(...)

## Default S3 method:
anim.lines(...)

## Default S3 method:
anim.text(...)

anim.symbols(...)

## S3 method for class 'formula'
anim.points(formula, ...)

## S3 method for class 'formula'
anim.lines(formula, ...)

## S3 method for class 'formula'
anim.text(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.plot_+3A_x">x</code>, <code id="anim.plot_+3A_y">y</code></td>
<td>
<p>vectors of x and y coordinates. These can be passed in any way 
accepted by <code><a href="grDevices.html#topic+xy.coords">xy.coords</a></code>.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_times">times</code></td>
<td>
<p>a vector of times. If <code>times</code> is length one, there will
be that many frames, equally divided over the length of <code>x</code> and <code>y</code>.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_speed">speed</code></td>
<td>
<p>animation speed.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_show">show</code></td>
<td>
<p>if false, do not show plot; just return calls.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_use.times">use.times</code></td>
<td>
<p>if <code>TRUE</code>, animation speed is determined by the 
<code>times</code> argument. If <code>FALSE</code>, animation speed is constant.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_window">window</code></td>
<td>
<p>what window of times to show in each animation. The default,
<code>t</code>, shows just plots from time t. To draw a plot incrementally,
use <code>window=1:t</code>.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_window.process">window.process</code></td>
<td>
<p>function to call on each window of each times. See details.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_xlim">xlim</code>, <code id="anim.plot_+3A_ylim">ylim</code>, <code id="anim.plot_+3A_col">col</code>, <code id="anim.plot_+3A_pch">pch</code></td>
<td>
<p>arguments passed to <code><a href="base.html#topic+plot">plot</a></code>.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_labels">labels</code>, <code id="anim.plot_+3A_cex">cex</code>, <code id="anim.plot_+3A_lty">lty</code>, <code id="anim.plot_+3A_lwd">lwd</code></td>
<td>
<p>as above.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_asp">asp</code>, <code id="anim.plot_+3A_xaxp">xaxp</code>, <code id="anim.plot_+3A_yaxp">yaxp</code>, <code id="anim.plot_+3A_...">...</code></td>
<td>
<p>as above.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_fn">fn</code></td>
<td>
<p>function called to create each frame.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_formula">formula</code></td>
<td>
<p>a <code><a href="stats.html#topic+formula">formula</a></code> of the form <code>y ~ x + time</code>.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_data">data</code></td>
<td>
<p>a data frame from where the values in <code>formula</code> should be 
taken.</p>
</td></tr>
<tr><td><code id="anim.plot_+3A_subset">subset</code></td>
<td>
<p>a vector specifying which rows of <code>data</code> to use.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each unique level of <code>times</code> will generate a single frame of animation. 
The frames will be ordered by <code>times</code>.
</p>
<p>In general:
</p>
 
<ul>
<li><p> Parameters that apply to each point of the plot, such as 
<code>xlim, ylim, col, pch, labels</code> and <code>cex</code>, can be passed as vectors 
which will be recycled to <code>length(times)</code>. 
</p>
</li>
<li><p> Parameters that apply
to the plot as a whole, and always have length 1, such as <code>xlab</code> and
<code>main</code>, can be passed as vectors and will be recycled to the number of
frames. 
</p>
</li>
<li><p> Parameters that apply to the plot as a whole, and can have
length &gt; 1, such as <code>xlim</code> and <code>ylim</code>, can be passed as vectors or
matrices. If vectors, the same vector will be passed to every frame. If
matrices, column <code>i</code> will be passed to the <code>i</code>'th frame. 
</p>
</li></ul>

<p><code>window.process</code> should be a function which takes
two arguments: a list of potential arguments for the underlying
call to <code>plot</code>, and a vector of times. The function should return
the list of arguments after modification. This allows e.g. drawing 
&quot;trails&quot; of plot points. See the example
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- rep(1:100/10, 10)
times &lt;- rep(1:10, each=100)
y &lt;- sin(x*times/4)
anim.plot(x,y,times, type="l", col="orange", lwd=2)

## changing colours - a per-point parameter
anim.plot(x,y,times, ylab="Sine wave", type="p", col=rainbow(100)[x *10])

## changing line width - a whole-plot parameter
anim.plot(x, y, times, lwd=1:10, type="l")
          
## times as a single number
anim.plot(1:10, 1:10, times=5)
           
## incremental plot
anim.plot(1:10, 1:10, window=1:t)

## moving window
anim.plot(1:10, 1:10, window=(t-2):t)

## Formula interface
ChickWeight$chn &lt;- as.numeric(as.factor(ChickWeight$Chick))
tmp &lt;- anim.plot(weight ~ chn + Time, data=ChickWeight, col=as.numeric(Diet), 
     pch=as.numeric(Diet), speed=3)

# adding extra arguments:
replay(tmp, after=legend("topleft", legend=paste("Diet", 1:4), pch=1:4, col=1:4))
 
 ## Zooming in:
 x &lt;- rnorm(4000); y&lt;- rnorm(4000)
 x &lt;- rep(x, 10); y &lt;- rep(y, 10)
 xlims &lt;- 4*2^(-(1:10/10))
 ylims &lt;- xlims &lt;- rbind(xlims, -xlims) 
 anim.plot(x, y, times=10, speed=5, xlim=xlims, ylim=ylims, 
       col=rgb(0,0,0,.3), pch=19)
 
 ## window.process to create a faded "trail":
 anim.plot(1:50, 1:50, speed=12, window=t:(t+5), 
       window.process=function(args, times){
         times &lt;- times - min(times) 
         alpha &lt;- times/max(times)
         alpha[is.na(alpha)] &lt;- 1
         args$col &lt;- rgb(0,0,0, alpha)
         return(args)
       })
       
 ## gapminder plot:
 pl &lt;- palette(adjustcolor(rainbow(23), 1, .6, .6, .6, 
       offset=c(0,0,0,-0.1)))
 anim.plot(lifex ~ GDP + year, data=gm_data, log="x", 
      cex=sqrt(pop)*0.0004, pch=19, col=region, xlab="GDP", 
      ylab="Life expectancy", speed=10, subset=year &gt; 1850 &amp; !year %% 5)
 palette(pl)
 
 ## Not run: 
 ## Earthquakes this week
 if (require('maps')) {
   eq = read.table(
       file="http://earthquake.usgs.gov/earthquakes/catalogs/eqs7day-M1.txt", 
       fill=TRUE, sep=",", header=TRUE)
   eq$time &lt;- as.numeric(strptime(eq$Datetime, "%A, %B %d, %Y %X UTC"))
 eq &lt;- eq[-1,]
   map('world')
   maxdepth &lt;- max(max(eq$Depth), 200)
   tmp &lt;- anim.points(Lat ~ Lon + time, data=eq, cex=Magnitude, col=rgb(
         1-Depth/maxdepth, 0, Depth/maxdepth,.7), pch=19, speed=3600*12, 
         show=FALSE)   
   replay(tmp, before=map('world', fill=TRUE, col="wheat"))
 }
 
 
 ## Minard's plot
 if (require('maps')) {
   map('world', xlim=c(22, 40), ylim=c(52,58))
   title("March of the Grande Armee on Moscow")
   points(cities$long, cities$lat, pch=18)
   text(cities$long, cities$lat, labels=cities$city, pos=4, cex=.7)
   with(troops[troops$group==1,], anim.lines(x=long, 
         y=lat, window=t:(t+1), speed=3, lwd=survivors/10000))
}

## End(Not run)
</code></pre>

<hr>
<h2 id='anim.save'>Save an anim.frames object in various formats.</h2><span id='topic+anim.save'></span>

<h3>Description</h3>

<p>This function simply calls replay on the object and then calls
<code><a href="animation.html#topic+saveGIF">saveGIF</a></code> and friends on the result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.save(
  obj,
  filename,
  type = switch(file_ext(filename), gif = "GIF", mp4 = "Video", swf = "SWF", html =
    "HTML", tex = "Latex"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.save_+3A_obj">obj</code></td>
<td>
<p>an <code>anim.frames</code> object, or an expression to evaluate</p>
</td></tr>
<tr><td><code id="anim.save_+3A_filename">filename</code></td>
<td>
<p>file to save to</p>
</td></tr>
<tr><td><code id="anim.save_+3A_type">type</code></td>
<td>
<p>one of 'GIF', 'Video', 'SWF', 'HTML', or 'Latex'</p>
</td></tr>
<tr><td><code id="anim.save_+3A_...">...</code></td>
<td>
<p>arguments passed to e.g. <code><a href="animation.html#topic+saveGIF">saveGIF</a></code></p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
tmp &lt;- anim.plot(1:10, 1:10, pch=1:10, show=FALSE)
anim.save(tmp, "mygif.gif")

anim.save(replay(tmp, after=legend("topleft", legend="My legend")), 
   "mygif2.gif")

## End(Not run)

</code></pre>

<hr>
<h2 id='anim.segments'>Draw an animation of line segments or arrows.</h2><span id='topic+anim.segments'></span><span id='topic+anim.arrows'></span><span id='topic+anim.segmentplot'></span><span id='topic+anim.arrowplot'></span>

<h3>Description</h3>

<p>Draw an animation of line segments or arrows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.segments(
  x0,
  y0,
  x1 = NULL,
  y1 = NULL,
  times = NULL,
  speed = 1,
  show = TRUE,
  use.times = TRUE,
  window = t,
  window.process = NULL,
  fn = segments,
  col = NULL,
  lty = NULL,
  lwd = NULL,
  ...
)

anim.arrows(..., length = 0.25, angle = 30, code = 2)

anim.segmentplot(...)

anim.arrowplot(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.segments_+3A_x0">x0</code>, <code id="anim.segments_+3A_y0">y0</code>, <code id="anim.segments_+3A_x1">x1</code>, <code id="anim.segments_+3A_y1">y1</code>, <code id="anim.segments_+3A_col">col</code>, <code id="anim.segments_+3A_lty">lty</code>, <code id="anim.segments_+3A_lwd">lwd</code>, <code id="anim.segments_+3A_length">length</code>, <code id="anim.segments_+3A_angle">angle</code>, <code id="anim.segments_+3A_code">code</code>, <code id="anim.segments_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="graphics.html#topic+segments">segments</a></code> or
<code><a href="graphics.html#topic+arrows">arrows</a></code></p>
</td></tr>
<tr><td><code id="anim.segments_+3A_times">times</code>, <code id="anim.segments_+3A_speed">speed</code>, <code id="anim.segments_+3A_show">show</code>, <code id="anim.segments_+3A_use.times">use.times</code>, <code id="anim.segments_+3A_window">window</code>, <code id="anim.segments_+3A_window.process">window.process</code></td>
<td>
<p>see <code><a href="#topic+anim.plot">anim.plot</a></code> for details</p>
</td></tr>
<tr><td><code id="anim.segments_+3A_fn">fn</code></td>
<td>
<p>underlying function to use</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>anim.segments</code> and <code>anim.arrows</code> draw lines on to an existing plot.
If you want to redraw the plot between each frame, use <code>anim.arrowplot</code>
or <code>anim.segmentplot</code>.
</p>
<p>If both <code>x1</code> and <code>y1</code> are missing, then segments are plotted
from the current time to the following time in each frame. If only <code>x1</code>
is missing it is set equal to <code>x0</code>, similarly if only <code>y1</code> is 
missing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>anim.segments(x0=rep(1:5, 5), y0=rep(1:5, each=5), y1=rep(2:6, each=5), 
     times=rep(1:5, each=5) )
 
## Short version
anim.arrowplot(rep(1:5, 5), rep(1:5, each=5), times=5)

if (require('maps')) {
   hr &lt;- subset(hurricanes, lat &gt; 0 &amp; lat &lt; 50 &amp; lon &gt; -95 &amp; lon &lt; -20 &amp; 
         Shour %% 6 == 0)
   hr$dlat &lt;- cos(hr$diruv/360*2*pi) * hr$maguv / 8
   hr$dlon &lt;- sin(hr$diruv/360*2*pi) * hr$maguv / 8
   hr$name &lt;- sub("\\s+$", "", hr$name)
   map('world', xlim=c(-95,-20), ylim=c(0,50))
   title("Hurricanes, 2009")
   with(hr[!duplicated(hr$name),], text(lon, lat, 
         labels=paste0(name, "\n", Yr), cex=0.8))
   with(hr, anim.arrows(x0=lon, y0=lat, y1=lat+dlat, x1=lon+dlon, 
         times=Shour, speed=12, col=rgb(0,0,1,0.8), length=.1, lwd=2)) 
}
</code></pre>

<hr>
<h2 id='anim.smooth'>Smooth an <code>anim.frames</code> object</h2><span id='topic+anim.smooth'></span>

<h3>Description</h3>

<p>Some export formats ignore information in the <code>times</code>
attribute and plot frames at constant speed. <code>anim.smooth</code> creates
a smoothed version of the <code>anim.frames</code> object with frames at 
constant intervals, suitable for export.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>anim.smooth(x, fps = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="anim.smooth_+3A_x">x</code></td>
<td>
<p>an <code>anim.frames</code> object</p>
</td></tr>
<tr><td><code id="anim.smooth_+3A_fps">fps</code></td>
<td>
<p>how many frames per second to smooth to</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that plot parameters such as x and y positions are not interpolated.
If you want your whole animation to look smoother, you have to do
the work yourself using e.g.<code><a href="stats.html#topic+approx">approx</a></code>.
</p>
<p>If you smooth to a large value of <code>fps</code>, the animations may look bad
in R because they overtax the graphics engine. They should still look good
when saved, though.
</p>


<h3>Value</h3>

<p>A smoothed <code>anim.frames</code> object, with the <code>speed</code> attribute equal
to <code>fps</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>accel &lt;- anim.plot(1, 1:30, times=sqrt(1:30))
## Not run: 
anim.save(accel, "GIF", "wrong.gif")

## End(Not run)
accel &lt;- anim.smooth(accel, fps=20)
## Not run: 
anim.save(accel, "GIF", "better.gif")

## End(Not run)
</code></pre>

<hr>
<h2 id='cities'>Cities near the Grande Armee's march on Moscow</h2><span id='topic+cities'></span>

<h3>Description</h3>

<p>Cities near the Grande Armee's march on Moscow
</p>

<hr>
<h2 id='gm_data'>Gapminder GDP, life expectancy and population data</h2><span id='topic+gm_data'></span>

<h3>Description</h3>

<p>Gapminder GDP, life expectancy and population data
</p>


<h3>Source</h3>

<p>http://gapminder.org
</p>

<hr>
<h2 id='hurricanes'>Wind speed data for hurricanes in 2009</h2><span id='topic+hurricanes'></span>

<h3>Description</h3>

<p>Wind speed data for hurricanes in 2009
</p>


<h3>Source</h3>

<p>http://myweb.fsu.edu/jelsner/Data.html
</p>

<hr>
<h2 id='merge.anim.frames'>Merge anim.frames objects</h2><span id='topic+merge.anim.frames'></span>

<h3>Description</h3>

<p>Merge two or more anim.frames objects to create a new anim.frames object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'anim.frames'
merge(..., speed = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge.anim.frames_+3A_...">...</code></td>
<td>
<p>anim.frames objects returned from, e.g. <code><a href="#topic+anim.plot">anim.plot</a></code></p>
</td></tr>
<tr><td><code id="merge.anim.frames_+3A_speed">speed</code></td>
<td>
<p>speed for the merged object. This may be left unspecified only
if all objects have the same speed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If two or more calls in the merged animation are at the same time, calls
from the earlier object in <code>...</code> will be run first. 
</p>
<p>If you merge two animations from <code><a href="#topic+anim.plot">anim.plot</a></code>, plot.window will be
called before each frame of the merged animation. This may not be what
you want. Instead, use <code>anim.points</code> or similar for all but the first
animation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tmp &lt;- anim.plot(1:5, 1:5, speed=2)
tmp2 &lt;- anim.plot(1:5, 5:1, col="red", speed=2)
## Not what you want:
replay(merge(tmp, tmp2))

## better:
tmp3 &lt;- anim.points(1:5, 5:1,col="red", speed=2)
newf &lt;- merge(tmp, tmp3)
replay(newf)
## NB: result of the merge looks different from the two
## individual animations

## not the same:
newf2 &lt;- merge(tmp2, tmp) 
## points will be called before plot!
replay(newf2)
</code></pre>

<hr>
<h2 id='PGgame'>Data from 20 rounds of a public goods game with punishment</h2><span id='topic+PGgame'></span>

<h3>Description</h3>

<p>A 2x3x20 array of data from a laboratory public goods game.
Dimensions are Picked (was subject picked for punishment?),
Contribution (of subject: Non-unique lowest, Not lowest/all same and Unique lowest), and Period.
</p>


<h3>Details</h3>

<p>Provided by the package author.
</p>

<hr>
<h2 id='replay'>Replay an <code>anim.frames</code> object</h2><span id='topic+replay'></span><span id='topic+replay.anim.frames'></span><span id='topic+plot.anim.frames'></span>

<h3>Description</h3>

<p>Replay all or some of the frames of an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replay(...)

## S3 method for class 'anim.frames'
replay(
  x,
  frames = 1:length(x),
  speed = attr(x, "speed"),
  after = NULL,
  before = NULL,
  ...
)

## S3 method for class 'anim.frames'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replay_+3A_...">...</code></td>
<td>
<p>other arguments (not currently used)</p>
</td></tr>
<tr><td><code id="replay_+3A_x">x</code></td>
<td>
<p>an <code>anim.frames</code> object</p>
</td></tr>
<tr><td><code id="replay_+3A_frames">frames</code></td>
<td>
<p>numeric vector specifying which frames to replay</p>
</td></tr>
<tr><td><code id="replay_+3A_speed">speed</code></td>
<td>
<p>a new speed</p>
</td></tr>
<tr><td><code id="replay_+3A_after">after</code></td>
<td>
<p>an expression to evaluate after each frame is plotted</p>
</td></tr>
<tr><td><code id="replay_+3A_before">before</code></td>
<td>
<p>an expression to evaluate before each frame is plotted</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>before</code> and <code>after</code> will have the arguments from the
frame's call available in their environment - see the example.
</p>
<p>The <code>plot</code> method simply calls <code>replay</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
myplot &lt;- anim.plot(1:10, 1:10, speed=3)
replay(myplot, speed=5)
replay(myplot, frames=c(1,5,6,10))

myplot &lt;- anim.plot(x&lt;-rnorm(100), x+rnorm(100,0,3), 20, window=1:t, 
     show=FALSE, main="Regressions as sample size increases")
replay(myplot, after=abline(lm(y~x), col="red"))
 
</code></pre>

<hr>
<h2 id='temps'>Temperatures for the Grande Armee's march on Moscow</h2><span id='topic+temps'></span>

<h3>Description</h3>

<p>Temperatures for the Grande Armee's march on Moscow
</p>

<hr>
<h2 id='troops'>Troop numbers for the Grande Armee's march on Moscow</h2><span id='topic+troops'></span>

<h3>Description</h3>

<p>Troop numbers for the Grande Armee's march on Moscow
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
