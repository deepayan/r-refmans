<!DOCTYPE html><html><head><title>Help for package datetime</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {datetime}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as.second'><p>Interconvert Nominal Time Units</p></a></li>
<li><a href='#c.timeline'><p>Support for timepoint Classes</p></a></li>
<li><a href='#timepoint'><p>Temporal Classes with Selective Defaults</p></a></li>
<li><a href='#toSAS.datetime'><p>Convert Timepoint to SAS Format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Nominal Dates, Times, and Durations</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.4</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Bergsma</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tim Bergsma &lt;bergsmat@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides methods for working with nominal dates, times, and 
 durations. Base R has sophisticated facilities for handling time, but these 
 can give unexpected results if, for example, timezone is not handled properly. 
 This package provides a more casual approach to support cases which 
 do not require rigorous treatment.  It systematically deconstructs the 
 concepts origin and timezone, and de-emphasizes the display of seconds. It 
 also converts among nominal durations such as seconds, hours, days, and weeks.
 See '?datetime' and '?duration' for examples. Adapted from 'metrumrg' 
 <a href="http://r-forge.r-project.org/R/?group_id=1215">http://r-forge.r-project.org/R/?group_id=1215</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Suggests:</td>
<td>chron, SASxport</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-12-13 18:25:20 UTC; tbergsma</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-12-13 18:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='as.second'>Interconvert Nominal Time Units</h2><span id='topic+duration'></span><span id='topic+as.second'></span><span id='topic+as.minute'></span><span id='topic+as.hour'></span><span id='topic+as.day'></span><span id='topic+as.week'></span><span id='topic+as.month'></span><span id='topic+as.year'></span><span id='topic+as.second.numeric'></span><span id='topic+as.minute.numeric'></span><span id='topic+as.hour.numeric'></span><span id='topic+as.day.numeric'></span><span id='topic+as.week.numeric'></span><span id='topic+as.month.numeric'></span><span id='topic+as.year.numeric'></span><span id='topic+format.duration'></span><span id='topic+print.duration'></span><span id='topic+as.second.minute'></span><span id='topic+as.minute.second'></span><span id='topic+as.minute.hour'></span><span id='topic+as.hour.minute'></span><span id='topic+as.hour.day'></span><span id='topic+as.day.hour'></span><span id='topic+as.day.week'></span><span id='topic+as.week.day'></span><span id='topic+as.day.month'></span><span id='topic+as.month.day'></span><span id='topic+as.day.year'></span><span id='topic+as.year.day'></span><span id='topic+as.second.second'></span><span id='topic+as.minute.minute'></span><span id='topic+as.hour.hour'></span><span id='topic+as.day.day'></span><span id='topic+as.week.week'></span><span id='topic+as.month.month'></span><span id='topic+as.year.year'></span><span id='topic+as.second.hour'></span><span id='topic+as.second.day'></span><span id='topic+as.second.duration'></span><span id='topic+as.minute.duration'></span><span id='topic+as.hour.second'></span><span id='topic+as.hour.duration'></span><span id='topic+as.day.duration'></span><span id='topic+as.week.duration'></span><span id='topic+as.month.duration'></span><span id='topic+as.year.duration'></span>

<h3>Description</h3>

<p>Perform standard conversions among various common time units.</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.second(x, ...)
as.minute(x, ...)
as.hour(x, ...)
as.day(x, ...)
as.week(x, ...)
as.month(x, ...)
as.year(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.second_+3A_x">x</code></td>
<td>
<p>numeric</p>
</td></tr>
<tr><td><code id="as.second_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions listed above are generic.  Methods exist, either explictly or implicitly,
for objects classified to represent second, minute, hour, day, week, month, and year.
All these objects are subclasses of &quot;duration&quot;; <code>as.&lt;n&gt;.duration</code> serves wherever
explicit methods are omitted. For each generic, methods exist for class &quot;numeric&quot;.
For each class, methods exist for the generics &quot;format&quot; and &quot;print&quot;.
</p>
<p>The strategy for time unit conversion is to classify a numeric vector according to some
unit, and then coerce that object to some other class.  Thus, <code>as.day(7)</code> is
not particularly interesting, but <code>as.week(as.day(7))</code> yields 1.
</p>
<p>Conversions use 60 seconds per minute, 60 minutes per hour, 24 hours per day,
7 days per week, 28 days per month, and 365.25 days per year.  Currently, no other
relationships are specified.  Note that 12 nominal months does not make a full year.
This is experimental, and may change in future versions.
</p>
<p>The duration classes are also subclasses of <code>timeline</code>, which exists to
support addition and subtraction of durations and timepoints.
See examples here, and at <code><a href="#topic+timeline">timeline</a></code>. You cannot add two timepoints, nor can you subtract a timepoint from a non-timepoint. When one argument is a timepoint,
the other is coerced using <code>as.second</code>, and the result is the timepoint class.
For two durations, the second value is coerced to the class of the first, with a message, if necessary.
Otherwise, if only one argument is a duration, the other is coerced to that class. Negative durations are allowed.
</p>


<h3>Value</h3>

<p>an S3 &quot;num&quot; object with class <code>c(n, 'duration','timeline','numeric')</code>, where &lsquo;n&rsquo; is
&quot;second&quot;, &quot;minute&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;, &quot;month&quot;, or &quot;year&quot;, as implied.
</p>


<h3>Author(s)</h3>

<p>Tim Bergsma</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+as.datetime">as.datetime</a></code>
</p>
</li>
<li> <p><code><a href="#topic+timeline">timeline</a></code>
</p>
</li>
<li> <p><code><a href="#topic+c.timeline">c.timeline</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>as.year(as.month(12))
as.year(as.day(365.25))
as.second(as.year(1))
as.month(2) + as.week(2)
as.week(2) + as.month(1)
as.month(2) - as.week(2)
as.week(2) - as.month(1)
as.week(2) + 1
as.week(2) - 1
2 + as.week(1)
2 - as.week(1)
class(c(as.day(1),as.day(2)))
class(as.day(1:5)[3])
class(as.day(1:5)[[3]])
class(seq(from=as.day(2),to=as.day(6)))
class(rep(as.day(1),5))
</code></pre>

<hr>
<h2 id='c.timeline'>Support for timepoint Classes</h2><span id='topic+c.timeline'></span><span id='topic++5B.timeline'></span><span id='topic++5B+3C-.timepoint'></span><span id='topic++5B+5B.timeline'></span><span id='topic+as.character.timepoint'></span><span id='topic+as.chartime.numeric'></span><span id='topic+as.chartime'></span><span id='topic+as.numeric.chartime'></span><span id='topic+print.timepoint'></span><span id='topic+seq.timeline'></span><span id='topic+rep.timeline'></span>

<h3>Description</h3>

<p>These functions support classes timepoint, timeline, time, date, and datetime
(and related functions).  They are mostly S3 methods for base R generics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'timeline'
c(..., recursive = FALSE)
## S3 method for class 'timeline'
x[..., drop = TRUE]
## S3 replacement method for class 'timepoint'
x[...] &lt;- value
## S3 method for class 'timeline'
x[[..., drop = TRUE]]
## S3 method for class 'timepoint'
as.character(x, ...)
as.chartime(x, ...)
## S3 method for class 'numeric'
as.chartime(x, format, mark=TRUE,...)
## S3 method for class 'chartime'
as.numeric(x, format,...)
## S3 method for class 'timepoint'
print(x, ...)
## S3 method for class 'timeline'
rep(x, ...)
## S3 method for class 'timeline'
seq(from, to, by, length.out, along.with, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c.timeline_+3A_...">...</code></td>
<td>
<p>arguments to <code>c</code>, or passed to other functions</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_recursive">recursive</code></td>
<td>
<p>same meaning as for <code>c</code></p>
</td></tr>
<tr><td><code id="c.timeline_+3A_x">x</code></td>
<td>
<p>object of class timepoint</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_drop">drop</code></td>
<td>
<p>same meaning as for &lsquo;[&rsquo; and &lsquo;[[&rsquo;</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_value">value</code></td>
<td>
<p>value to be assigned, as for &lsquo;[&lt;-&rsquo;</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_format">format</code></td>
<td>
<p>input or output format describing character time (see <code><a href="base.html#topic+strftime">strftime</a></code>)</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_mark">mark</code></td>
<td>
<p>boolean: mark times with dangling seconds using &lsquo;+&rsquo;</p>
</td></tr>
<tr><td><code id="c.timeline_+3A_from">from</code></td>
<td>
<p>as for <code><a href="base.html#topic+seq.default">seq.default</a></code></p>
</td></tr>
<tr><td><code id="c.timeline_+3A_to">to</code></td>
<td>
<p>as for <code><a href="base.html#topic+seq.default">seq.default</a></code></p>
</td></tr>
<tr><td><code id="c.timeline_+3A_by">by</code></td>
<td>
<p>as for <code><a href="base.html#topic+seq.default">seq.default</a></code></p>
</td></tr>
<tr><td><code id="c.timeline_+3A_length.out">length.out</code></td>
<td>
<p>as for <code><a href="base.html#topic+seq.default">seq.default</a></code></p>
</td></tr>
<tr><td><code id="c.timeline_+3A_along.with">along.with</code></td>
<td>
<p>as for <code><a href="base.html#topic+seq.default">seq.default</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Normally you shouldn't need to worry about these functions.  <code>c</code> and the &lsquo;[&rsquo;
variants exist just so that class information is not lost on invocation of the
generic.  <code>as.character.timepoint</code> and <code>print.timepoint</code> just call <code>format</code>.
<code>chartime</code> variants are used internally by other functions.  <code>seq.timeline</code>
requires <code>from</code>. If an interval cannot be calculated from supplied arguments,
<code>by</code> is set to 1 hour for <code>time</code> or 1 day for <code>date</code> or <code>datetime</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>print</code></td>
<td>
<p>an invisible object with same class as <code>x</code></p>
</td></tr>
<tr><td><code>as.chartime</code></td>
<td>
<p>generic: does not return</p>
</td></tr>
<tr><td><code>as.chartime.numeric</code></td>
<td>
<p>character (time)</p>
</td></tr>
<tr><td><code>as.numeric.chartime</code></td>
<td>
<p>numeric (seconds)</p>
</td></tr>
<tr><td><code>as.character.timepoint</code></td>
<td>
<p>character (time)</p>
</td></tr>
<tr><td><code>others</code></td>
<td>
<p>object with same class as <code>x</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Tim Bergsma</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+timepoint">timepoint</a></code>
</p>
</li>
<li> <p><code><a href="base.html#topic+seq.default">seq.default</a></code>
</p>
</li>
<li> <p><code><a href="base.html#topic+strftime">strftime</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
#as.data.frame
data.frame(
	dt=as.datetime(seq(from=0,by=86500,length.out=3)),
	d=as.date(seq(from=0,by=86400,length.out=3)),
	t=as.time(c(60,120,180))
)
#                  dt          d     t
# 1  1970-01-01 00:00 1970-01-01 00:01
# 2 1970-01-02 00:01+ 1970-01-02 00:02
# 3 1970-01-03 00:03+ 1970-01-03 00:03

#combine
c(as.time(0),as.time(60))
# 00:00 00:01
c(as.date(0),as.date(86400))
# 1970-01-01 1970-01-02
c(as.datetime(0),as.datetime(86500))
# 1970-01-01T00:00  1970-01-02T00:01+

#subset
as.time(c('08:00','09:00'))[2]
# 09:00
as.date(c('2008-01-01','2008-01-04'))[2]
# 2008-01-04
as.datetime(c('2008-01-01T12:00','2008-01-04T12:30'))[2]
# 2008-01-04 12:30

#element selection
as.time(c('08:00','09:00'))[[2]]
# 09:00
as.date(c('2008-01-01','2008-01-04'))[[2]]
# 2008-01-04
as.datetime(c('2008-01-01T12:00','2008-01-04T12:30'))[[2]]
# 2008-01-04 12:30

#assignment
a &lt;- as.time(seq(60,300, by=60))
a#00:01 00:02 00:03 00:04 00:05
a[5] &lt;- 60
a#00:01 00:02 00:03 00:04 00:01
a[3] &lt;- NA
a#00:01 00:02 &lt;NA&gt;  00:04 00:01

#identity
as.time(as.time(0))
# 00:00
as.date(as.date(0))
# 1970-01-01
as.datetime(as.datetime(0))
# 1970-01-01T00:00

#repetition
rep(as.time(86340),2)
# 23:59 23:59

#sequence
seq(from=as.time('00:00'),length.out=3)
seq(from=as.time('00:00'),by=as.time('00:05'),length.out=3)
seq(from=as.time('00:00'),by=as.time('00:05'),along.with=integer(3))
seq(from=as.time('00:00'),to=as.time('06:00'))
seq(from=as.time('00:00'),to=as.time('06:00'),by=as.time('02:00'))
seq(from=as.time('00:00'),to=as.time('06:00'),length.out=4)

</code></pre>

<hr>
<h2 id='timepoint'>Temporal Classes with Selective Defaults</h2><span id='topic+timepoint'></span><span id='topic+as.time'></span><span id='topic+as.time.character'></span><span id='topic+as.time.numeric'></span><span id='topic+as.time.time'></span><span id='topic+as.date.character'></span><span id='topic+as.date'></span><span id='topic+as.date.numeric'></span><span id='topic+as.date.date'></span><span id='topic+as.date.sasdate'></span><span id='topic+as.datetime'></span><span id='topic+as.datetime.character'></span><span id='topic+as.datetime.numeric'></span><span id='topic+as.datetime.date'></span><span id='topic+as.datetime.datetime'></span><span id='topic+format.time'></span><span id='topic+format.date'></span><span id='topic+format.datetime'></span><span id='topic+xtfrm.timepoint'></span><span id='topic+as.date.Date'></span><span id='topic+as.date.dates'></span><span id='topic+as.datetime.POSIXct'></span><span id='topic+as.datetime.POSIXlt'></span><span id='topic+as.datetime.chron'></span><span id='topic+as.time.times'></span><span id='topic+unique.timepoint'></span><span id='topic+Summary.timepoint'></span><span id='topic+datetime'></span><span id='topic+date'></span><span id='topic+time'></span><span id='topic+timeline'></span><span id='topic++2B.timeline'></span><span id='topic+-.timeline'></span>

<h3>Description</h3>

<p><code>timepoint</code> is an abstract superclass of <code>time</code>, <code>date</code>,
and <code>datetime</code>.  These latter are convenience classes that store timepoint
information as seconds since the start of 1970-01-01.  They rely on <code>POSIXlt</code> and
<code>POSIXct</code>, giving full access to the format constructs of <code><a href="base.html#topic+strftime">strftime</a></code>.
However, the concepts of &lsquo;origin&rsquo; and &lsquo;timezone&rsquo; are deconstructed (fixed to
1970-01-01 and GMT).  Default formats are suitably chosen for inputs
(<code>as.character</code> methods) and outputs (<code>format</code> methods) and may be overridden.
By default, <code>format</code> will append a &lsquo;+&rsquo; symbol to timepoints with dangling seconds
(not multiples of 60): seconds are not displayed by default but still operate
(perhaps dangerously) in comparisons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.time(x, ...)
## S3 method for class 'character'
as.time(x, format = '%H:%M',...)
## S3 method for class 'numeric'
as.time(x,...)
## S3 method for class 'time'
as.time(x, ...)
## S3 method for class 'times'
as.time(x, ...)
as.date(x, ...)
## S3 method for class 'character'
as.date(x, format = '%Y-%m-%d',...)
## S3 method for class 'numeric'
as.date(x,...)
## S3 method for class 'Date'
as.date(x,...)
## S3 method for class 'date'
as.date(x,...)
## S3 method for class 'dates'
as.date(x,...)
as.datetime(x, ...)
## S3 method for class 'character'
as.datetime(x, format = '%Y-%m-%dT%H:%M',...)
## S3 method for class 'numeric'
as.datetime(x,...)
## S3 method for class 'date'
as.datetime(x, y = 0,...)
## S3 method for class 'datetime'
as.datetime(x, ...)
## S3 method for class 'POSIXct'
as.datetime(x, ...)
## S3 method for class 'POSIXlt'
as.datetime(x, ...)
## S3 method for class 'chron'
as.datetime(x, ...)
## S3 method for class 'time'
format(x, format = '%H:%M', mark=TRUE,...)
## S3 method for class 'date'
format(x, format = '%Y-%m-%d', mark=TRUE,...)
## S3 method for class 'datetime'
format(x, format = '%Y-%m-%dT%H:%M', mark=TRUE,...)
## S3 method for class 'timepoint'
unique(x, incomparables=FALSE,...)
## S3 method for class 'timepoint'
Summary(..., na.rm=FALSE)
## S3 method for class 'timepoint'
xtfrm(x,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="timepoint_+3A_x">x</code></td>
<td>
<p>character time as per format, numeric seconds since 1970-01-01, or timepoint subclass</p>
</td></tr>
<tr><td><code id="timepoint_+3A_...">...</code></td>
<td>
<p>other arguments, usually ignored</p>
</td></tr>
<tr><td><code id="timepoint_+3A_y">y</code></td>
<td>
<p>optional time for constructing datetime from date: anything coercible with <code>as.second()</code></p>
</td></tr>
<tr><td><code id="timepoint_+3A_format">format</code></td>
<td>
<p>character, as per <code><a href="base.html#topic+strftime">strftime</a></code></p>
</td></tr>
<tr><td><code id="timepoint_+3A_mark">mark</code></td>
<td>
<p>boolean: mark times with dangling seconds using &lsquo;+&rsquo;</p>
</td></tr>
<tr><td><code id="timepoint_+3A_incomparables">incomparables</code></td>
<td>
<p>passed to <code>unique</code></p>
</td></tr>
<tr><td><code id="timepoint_+3A_na.rm">na.rm</code></td>
<td>
<p>passed to <code>Summary</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creating a timepoint object with these methods ultimately calls one of the
<code>.numeric</code> methods, each of which round their first argument to zero
places.  This means that all comparisons are based on whole numbers, and
therefore not subject to rounding errors.
</p>
<p>Seconds that are not multiples of 60 can be stored in time and datetime
objects, but will not be displayed by default (see above).  date can only
store numbers of seconds that correspond to midnight.  To add time, explicitly
create an datetime object using <code>as.datetime.date</code>.
</p>
<p>The timepoint classes are all subclasses of numeric, so numeric operations are generally available.
</p>
<p>The timepoint classes support <code>NA</code>, <code>Inf</code>, <code>-Inf</code>, <code>as.data.frame</code>, <code>seq</code>, subset, element
selection, element assignment, and interconversion.
</p>
<p>The timepoint classes are also subclasses <code>timeline</code>, which exists to support addition and subtraction of durations and timepoints.  See examples.
</p>

<ul>
<li><p> You cannot add two timepoints.
</p>
</li>
<li><p> You cannot subtract a timepoint from a non-timepoint.
</p>
</li>
<li><p> For the difference of two timepoints, the arguments and result are coerced with <code>as.second</code>.
</p>
</li>
<li><p> When one argument is a timepoint, the other is coerced using <code>as.second</code>, and the result is the timepoint class.
</p>
</li>
<li><p> For two durations, the second value is coerced to the class of the first, with a message, if necessary.
</p>
</li>
<li><p> If only one argument is a duration, the other is coerced to that class.
</p>
</li></ul>



<h3>Value</h3>

<table>
<tr><td><code>format</code></td>
<td>
<p>character</p>
</td></tr>
<tr><td><code>as.time</code></td>
<td>
<p>object with class <code>c('time','timepoint','numeric')</code></p>
</td></tr>
<tr><td><code>as.date</code></td>
<td>
<p>object with class <code>c('date','timepoint','numeric')</code></p>
</td></tr>
<tr><td><code>as.datetime</code></td>
<td>
<p>object with class <code>c('datetime','timepoint','numeric')</code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Tim Bergsma</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+duration">duration</a></code>
</p>
</li>
<li> <p><code><a href="#topic+c.timeline">c.timeline</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>#numeric to timepoint
as.time(0)
# 00:00
as.time(1)
# 00:00+
as.time(-1)
# 23:59+
as.time(60)
# 00:01
as.time(-60)
# 23:59
as.time(86400)
# 00:00
as.time(86460)
# 00:01
as.date(0)
# 1970-01-01
as.date(1)
# 1970-01-01
as.date(-1)
# 1969-12-31
as.date(-86400)
# 1969-12-31
as.date(-86401)
# 1969-12-30
as.datetime(0)
# 1970-01-01T00:00
as.datetime(60)
# 1970-01-01T00:01
as.datetime(61)
# 1970-01-01T00:01+
as.datetime(-1)
# 1969-12-31T23:59+

#character to timepoint
as.time('00:00')
# 00:00
as.time('23:59')
# 23:59
as.time('23:59:00')
# 23:59
as.time('23:59:01')
# 23:59
as.time('23:59:01',format='%H:%M:%S')
# 23:59+
as.time('24:00')
# 00:00
as.date('1970-01-02')
# 1970-01-02
as.date('01/02/1970',format='%m/%d/%Y')
# 1970-01-02
as.datetime('01/02/1970 12:30',format='%m/%d/%Y %H:%M')
# 1970-01-02 12:30
as.datetime('01/02/1970 12:30:15',format='%m/%d/%Y %H:%M:%S')
# 1970-01-02 12:30+

#timepoint to numeric
as.numeric(as.time(0))
# 0
as.numeric(as.time(1))
# 1
as.numeric(as.time(-1))
# 86399
as.numeric(as.time(60))
# 60
as.numeric(as.time(-60))
# 86340
as.numeric(as.time(86400))
# 0
as.numeric(as.time(86460))
# 60
as.numeric(as.date(0))
# 0
as.numeric(as.date(1))
# 0
as.numeric(as.date(-1))
# -86400
as.numeric(as.date(-86400))
# -86400
as.numeric(as.date(-86401))
# -172800
as.numeric(as.datetime(0))
# 0
as.numeric(as.datetime(60))
# 60
as.numeric(as.datetime(61))
# 61
as.numeric(as.datetime(-1))
# -1
as.numeric(as.time('00:00'))
# 0
as.numeric(as.time('23:59'))
# 86340
as.numeric(as.time('23:59:00'))
# 86340
as.numeric(as.time('23:59:01'))
# 86340
as.numeric(as.time('23:59:01',format='%H:%M:%S'))
# 86341
as.numeric(as.time('24:00'))
# 0
as.numeric(as.date('1970-01-02'))
# 86400
as.numeric(as.date('01/02/1970',format='%m/%d/%Y'))
# 86400
as.numeric(as.datetime('01/02/1970 12:30',format='%m/%d/%Y %H:%M'))
# 131400
as.numeric(as.datetime('01/02/1970 12:30:15',format='%m/%d/%Y %H:%M:%S'))
# 131415

#timepoint to character
as.character(as.time(0))
# '00:00'
as.character(as.date(0))
# '1970-01-01'
as.character(as.datetime(0))
# '1970-01-01T00:00'

#non-default printout
format(as.time(30000),format='%H')
# '08'
format(as.date('1970-01-01'),format='%d%b%y')
# '01Jan70'
format(as.datetime('1970-01-02T23:30'),format='[%d/%m/%y %H:%M:%S]')
# '[02/01/70 23:30:00]'
format(as.time(1))
# '00:00+'
format(as.time(1),mark=FALSE)
# '00:00'

#sequence
seq(from=as.time('8:00'),to=as.time('12:00'))
# 08:00 09:00 10:00 11:00 12:00
seq(from=as.date('2008-01-01'),to=as.date('2008-01-04'))
# 2008-01-01 2008-01-02 2008-01-03 2008-01-04
seq(from=as.datetime('2008-01-01T12:00'),to=as.datetime('2008-01-04T12:30'))
# 2008-01-01 12:00 2008-01-02 12:00 2008-01-03 12:00 2008-01-04 12:00

#interconversion
as.time(as.date('2008-10-14'))
# 00:00
as.time(as.datetime('2008-10-14T08:00'))
# 08:00
as.date(as.time('23:59'))
# 1970-01-01
as.date(as.datetime('2008-10-14T08:00'))
# 2008-10-14
as.datetime(as.time(6000000))
# 1970-01-01T10:40
as.datetime(as.date('2008-10-14'))
# 2008-10-14 00:00
as.datetime(as.date('2008-10-14'),y=as.time('00:30'))
# 2008-10-14 00:30

#intercoversion from other systems
as.date(as.Date('1970-01-01'))
# 1970-01-01
as.datetime(as.POSIXct('1970-01-01',tz='GMT'))
# 1970-01-01T00:00
as.datetime(as.POSIXlt('1970-01-01',tz='GMT'))
# 1970-01-01T00:00
if(require(chron)) as.time(times('12:30:00'))
# 12:30
as.date(dates('01/01/1970'))
# 1970-01-01
if(require(chron))as.datetime(chron(dates='01/01/1970',times='12:30:00'))
# 1970-01-01T12:30
as.date.sasdate(0)
# 1960-01-01
as.time(as.numeric(NA))
# &lt;NA&gt;

#infinity
as.time(Inf)
# Inf
as.date(Inf)
# Inf
as.datetime(Inf)
# Inf
as.time(-Inf)
# -Inf
as.datetime(Inf) + (Inf)
# Inf
as.datetime(Inf) + (-Inf)
# &lt;NA&gt;

#comparison
as.time('08:00') &lt; as.time('09:00')
# TRUE
as.date('1970-01-01') &gt; as.date('2008-01-01')
# FALSE
as.datetime('1970-01-01 08:00') &gt; as.date('1970-01-01')
# TRUE

#summary
max(as.date(c('1970-01-01','1980-01-01','1975-01-01')))
# 1980-01-01

#operations
as.datetime(0) + as.second(60)
# 1970-01-01T00:01
as.second(60) + as.datetime(0)
# 1970-01-01T00:01
try(as.datetime(60) + as.datetime(60))
# Error in `+.timeline`(as.datetime(60), as.datetime(60)) :
#   addition is undefined for two timepoints
as.datetime(0) + 60
# 1970-01-01 00:01
60 + as.datetime(0)
# 1970-01-01T00:01
as.minute(1) + as.datetime(0)
# 1970-01-01T00:01
as.datetime(0) - as.second(60)
# 1969-12-31T23:59
as.datetime(0) - 60
# 1969-12-31T23:59
as.datetime(60) - as.datetime(0)
# 60
try(as.second(60) - as.datetime(60))
# Error in `-.timeline`(as.second(60), as.datetime(60)) :
#   subtracting a timepoint from non-timepoint is undefined
try(60 - as.datetime(60))
# Error in `-.timeline`(as.second(60), as.datetime(60)) :
#   subtracting a timepoint from non-timepoint is undefined
as.second(10) * 6
# 60
as.datetime(0) * 2 # meaningless, but not prevented
# 1970-01-01T00:00

#unary operations
-as.time(1)
# 23:59+
+as.time(1)
# 00:00+

#sorting
sort(unique(as.time(c(180,120,60))))
# 00:01 00:02 00:03
</code></pre>

<hr>
<h2 id='toSAS.datetime'>Convert Timepoint to SAS Format</h2><span id='topic+toSAS.datetime'></span><span id='topic+toSAS.date'></span><span id='topic+toSAS.time'></span>

<h3>Description</h3>

<p>Convert timepoint objects to SAS format for writing XPT files</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'datetime'
toSAS(x, format="", format.info=NULL)
## S3 method for class 'date'
toSAS(x, format="", format.info=NULL)
## S3 method for class 'time'
toSAS(x, format="", format.info=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toSAS.datetime_+3A_x">x</code></td>
<td>
<p>subclass of timepoint</p>
</td></tr>
<tr><td><code id="toSAS.datetime_+3A_format">format</code></td>
<td>
<p>SAS format name</p>
</td></tr>
<tr><td><code id="toSAS.datetime_+3A_format.info">format.info</code></td>
<td>
<p>Table of SAS format information</p>
</td></tr>
</table>


<h3>Details</h3>

<p><span class="pkg">SASxport</span> defines <code>toSAS</code> and calls it on each column
when writing XPT files. The <code>datetime</code> method returns the integer number of seconds
since the start of 1960-01-01. The <code>date</code> method returns the integer number of days
since 1960-01-01.The <code>time</code> method returns the number of seconds
since midnight.
</p>


<h3>Value</h3>

<p>numeric</p>


<h3>Author(s)</h3>

<p>Tim Bergsma</p>


<h3>See Also</h3>

	
<ul>
<li> <p><code><a href="#topic+timepoint">timepoint</a></code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>if(require(SASxport)) toSAS(as.datetime('1960-01-01T00:00')) # 0
if(require(SASxport)) toSAS(as.date('1960-01-02')) # 1
if(require(SASxport)) toSAS(as.time('00:01')) # 60

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
