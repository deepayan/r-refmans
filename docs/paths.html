<!DOCTYPE html><html><head><title>Help for package paths</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {paths}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#paths-package'><p>paths: An Imputation Approach to Estimating Path-specific Causal Effects</p></a></li>
<li><a href='#paths'><p>Causal Paths Analysis</p></a></li>
<li><a href='#plot.paths'><p>Plot Method for <code>paths</code> Objects</p></a></li>
<li><a href='#plot.sens'><p>Plot Method for <code>sens</code> Objects</p></a></li>
<li><a href='#pred'><p>Obtaining predicted values from fitted models</p></a></li>
<li><a href='#sens'><p>Sensitivity Analysis for Unobserved Confounding on Path-Specific Causal Effects</p></a></li>
<li><a href='#summary.paths'><p>Summarizing Output from Causal Paths Analysis</p></a></li>
<li><a href='#tatar'><p>The Legacy of Political Violence among Crimean Tatars</p></a></li>
<li><a href='#welfare'><p>Issue Framing and Support for Welfare Reform</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>An Imputation Approach to Estimating Path-Specific Causal
Effects</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-06-17</td>
</tr>
<tr>
<td>Description:</td>
<td>In causal mediation analysis with multiple causally ordered mediators, a set of path-specific
  effects are identified under standard ignorability assumptions. This package implements an imputation
  approach to estimating these effects along with a set of bias formulas for conducting sensitivity analysis
  (Zhou and Yamamoto &lt;<a href="https://doi.org/10.31235%2Fosf.io%2F2rx6p">doi:10.31235/osf.io/2rx6p</a>&gt;). It contains two main functions: paths() for estimating 
  path-specific effects and sens() for conducting sensitivity analysis. Estimation uncertainty is quantified 
  using the nonparametric bootstrap.</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, parallel</td>
</tr>
<tr>
<td>Imports:</td>
<td>BART, boot, gbm, ggplot2, metR, pryr, stats, twang, tidyr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-17 23:51:34 UTC; Minh Trinh</td>
</tr>
<tr>
<td>Author:</td>
<td>Minh Trinh [cre],
  Teppei Yamamoto [aut],
  Xiang Zhou [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Minh Trinh &lt;mdtrinh@mit.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-18 08:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='paths-package'>paths: An Imputation Approach to Estimating Path-specific Causal Effects</h2><span id='topic+paths-package'></span>

<h3>Description</h3>

<p>This package implements an imputation approach to estimating path-specific causal
effects as detailed in Zhou and Yamamoto (2020). Statistical inference is conducted using the nonparametric
bootstrap.
</p>


<h3>Author(s)</h3>

<p>Minh Trinh, Massachusetts Institute of Technology,
<a href="mailto:mdtrinh@mit.edu">mdtrinh@mit.edu</a>;
Teppei Yamamoto, Massachusetts Institute of Technology,
<a href="mailto:teppei@mit.edu">teppei@mit.edu</a>;
Xiang Zhou, Harvard University,
<a href="mailto:xiang_zhou@fas.harvard.edu">xiang_zhou@fas.harvard.edu</a>
</p>


<h3>References</h3>

<p>Zhou, Xiang and Teppei Yamamoto. 2020. &quot;<a href="https://osf.io/2rx6p">Tracing Causal Paths from Experimental and Observational Data</a>&quot;.
</p>

<hr>
<h2 id='paths'>Causal Paths Analysis</h2><span id='topic+paths'></span><span id='topic+print.paths'></span>

<h3>Description</h3>

<p><code>paths</code> estimates path-specific causal effects in the presence of <code class="reqn">K(\geq 1)</code> causally
ordered mediators. It implements the pure imputation estimator and the imputation-based weighting
estimator (when a propensity score model is provided) as detailed in Zhou and Yamamoto (2020).
The user supplies the names of the treatment, outcome, mediator variables, <code class="reqn">K+1</code> fitted models
characterizing the conditional mean of the outcome given treatment, pretreatment confounders, and
varying sets of mediators, and a data frame containing all the variables. The function returns
<code class="reqn">K+1</code> path-specific causal effects that together constitute the total treatment effect.
When <code class="reqn">K=1</code>, the path-specific causal effects are identical to the natural direct and indirect
effects in standard causal mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>paths(
  a,
  y,
  m,
  models,
  ps_model = NULL,
  data,
  nboot = 500,
  conf_level = 0.95,
  ...
)

## S3 method for class 'paths'
print(x, digits = 3, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="paths_+3A_a">a</code></td>
<td>
<p>a character string indicating the name of the treatment variable. The treatment
should be a binary variable taking either 0 or 1.</p>
</td></tr>
<tr><td><code id="paths_+3A_y">y</code></td>
<td>
<p>a character string indicating the name of the outcome variable.</p>
</td></tr>
<tr><td><code id="paths_+3A_m">m</code></td>
<td>
<p>a list of <code class="reqn">K</code> character vectors indicating the names of <code class="reqn">K</code> causally ordered mediators
<code class="reqn">M_1,\ldots, M_K</code>.</p>
</td></tr>
<tr><td><code id="paths_+3A_models">models</code></td>
<td>
<p>a list of <code class="reqn">K+1</code> fitted model objects describing how the outcome depends on treatment,
pretreatment confounders, and varying sets of mediators, where <code class="reqn">K</code> is the number of mediators.
</p>

<ul>
<li><p> the first element is a baseline model of the outcome conditional on treatment and pretreatment
confounders.
</p>
</li>
<li><p> the <code class="reqn">k</code>th element is an outcome model conditional on treatment, pretreatment confounders,
and mediators <code class="reqn">M_1,\ldots, M_{k-1}</code>.
</p>
</li>
<li><p> the last element is an outcome model conditional on treatment, pretreatment confounders,
and all of the mediators, i.e., <code class="reqn">M_1,\ldots, M_K</code>.
</p>
</li></ul>

<p>The fitted model objects can be of type <code><a href="stats.html#topic+lm">lm</a></code>, <code><a href="stats.html#topic+glm">glm</a></code>, <code><a href="gbm.html#topic+gbm">gbm</a></code>,
<code><a href="BART.html#topic+wbart">wbart</a></code>, or <code><a href="BART.html#topic+pbart">pbart</a></code>.</p>
</td></tr>
<tr><td><code id="paths_+3A_ps_model">ps_model</code></td>
<td>
<p>an optional propensity score model for treatment. It can be of type <code><a href="stats.html#topic+glm">glm</a></code>,
<code><a href="gbm.html#topic+gbm">gbm</a></code>, <code><a href="twang.html#topic+ps">ps</a></code>, or <code><a href="BART.html#topic+pbart">pbart</a></code>. When it is provided,
the imputation-based weighting estimator is also used to compute path-specific causal effects.</p>
</td></tr>
<tr><td><code id="paths_+3A_data">data</code></td>
<td>
<p>a data frame containing all variables.</p>
</td></tr>
<tr><td><code id="paths_+3A_nboot">nboot</code></td>
<td>
<p>number of bootstrap iterations for estimating confidence intervals. Default is 500.</p>
</td></tr>
<tr><td><code id="paths_+3A_conf_level">conf_level</code></td>
<td>
<p>the confidence level of the returned two-sided confidence
intervals. Default is <code>0.95</code>.</p>
</td></tr>
<tr><td><code id="paths_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>boot::boot</code>, e.g.
<code>parallel</code> and <code>ncpus</code>. For the <code>print</code> method, additional arguments to be passed to
<code>print.default</code></p>
</td></tr>
<tr><td><code id="paths_+3A_x">x</code></td>
<td>
<p>a fitted model object returned by the <code><a href="#topic+paths">paths</a></code> function.</p>
</td></tr>
<tr><td><code id="paths_+3A_digits">digits</code></td>
<td>
<p>minimal number of significant digits printed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>paths</code>, which is a list containing the
following elements </p>

<dl>
<dt>pure</dt><dd><p>estimates of direct and path-specific effects via <code class="reqn">M_1, \ldots, M_K</code>
based on the pure imputation estimator.</p>
</dd>
<dt>hybrid</dt><dd><p>estimates of direct and path-specific effects via <code class="reqn">M_1, \ldots, M_K</code>
based on the imputation-based weighting estimator.</p>
</dd>
<dt>varnames</dt><dd><p>a list of character strings indicating the names of the pretreatment confounders (<code class="reqn">X</code>),
treatment(<code class="reqn">A</code>), mediators (<code class="reqn">M_1, \ldots, M_K</code>), and outcome (<code class="reqn">Y</code>).</p>
</dd>
<dt>formulas</dt><dd><p>formulas for the outcome models.</p>
</dd>
<dt>classes</dt><dd><p>classes of the outcome models.</p>
</dd>
<dt>families</dt><dd><p>model families of the outcome models.</p>
</dd>
<dt>args</dt><dd><p>a list containing arguments of the outcome models.</p>
</dd>
<dt>ps_formula</dt><dd><p>formula for the propensity score model.</p>
</dd>
<dt>ps_class</dt><dd><p>class of the propensity score model.</p>
</dd>
<dt>ps_family</dt><dd><p>model family of the propensity score model.</p>
</dd>
<dt>ps_args</dt><dd><p>arguments of the propensity score model.</p>
</dd>
<dt>data</dt><dd><p>the original data.</p>
</dd>
<dt>nboot</dt><dd><p>number of bootstrap iterations.</p>
</dd>
<dt>conf_level</dt><dd><p>confidence level for confidence intervals.</p>
</dd>
<dt>boot_out</dt><dd><p>output matrix from the bootstrap iterations.</p>
</dd>
<dt>call</dt><dd><p>the matched call to the <code>paths</code> function.</p>
</dd>
</dl>



<h3>References</h3>

<p>Zhou, Xiang and Teppei Yamamoto. 2020. &quot;<a href="https://osf.io/2rx6p">Tracing Causal Paths from Experimental and Observational Data</a>&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+summary.paths">summary.paths</a></code>, <code><a href="#topic+plot.paths">plot.paths</a></code>, <code><a href="#topic+sens">sens</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)


####################################################
# Causal Paths Analysis using GBM
####################################################

require(gbm)

# outcome models
gbm_m0 &lt;- gbm(formula_m0, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m1 &lt;- gbm(formula_m1, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m2 &lt;- gbm(formula_m2, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_m3 &lt;- gbm(formula_m3, data = tatar, distribution = "bernoulli", interaction.depth = 3)
gbm_ymodels &lt;- list(gbm_m0, gbm_m1, gbm_m2, gbm_m3)

# propensity score model via gbm
gbm_ps &lt;- gbm(formula_ps, data = tatar, distribution = "bernoulli", interaction.depth = 3)

# causal paths analysis using gbm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_gbm &lt;- paths(a = "violence", y = "annex", m = mediators,
  gbm_ymodels, ps_model = gbm_ps, data = tatar, nboot = 3)

</code></pre>

<hr>
<h2 id='plot.paths'>Plot Method for <code>paths</code> Objects</h2><span id='topic+plot.paths'></span>

<h3>Description</h3>

<p>Plot point estimates and confidence intervals for each individual
path-specific effect from a <code>paths</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'paths'
plot(
  x,
  mediator_names = NULL,
  estimator = c("pure", "hybrid", "both"),
  decomp = c("Type I", "Type II", "both"),
  horizontal = (decomp != "both"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.paths_+3A_x">x</code></td>
<td>
<p>an object of class <code>paths</code> returned by the <code><a href="#topic+paths">paths</a></code>
function</p>
</td></tr>
<tr><td><code id="plot.paths_+3A_mediator_names">mediator_names</code></td>
<td>
<p>a vector of character strings giving the labels for each
mediator. It must contain as many elements as the number of mediators in the
model. If not supplied, a set of default labels will be constructed from the
fitted <code>paths</code> object.</p>
</td></tr>
<tr><td><code id="plot.paths_+3A_estimator">estimator</code></td>
<td>
<p>either <code>"pure"</code>, <code>"hybrid"</code>, or <code>"both"</code>,
indicating whether the plot will display estimates obtained using the pure imputation
estimator, the imputation-based weighting estimator, or both. Default is to show
estimates from the pure imputation estimator.</p>
</td></tr>
<tr><td><code id="plot.paths_+3A_decomp">decomp</code></td>
<td>
<p>either <code>"Type I"</code>, <code>"Type II"</code>, or <code>"both"</code>,
indicating whether the plot will display estimates obtained using Type I decomposition,
Type II decomposition, or both Type I and Type II decompositions. Default is to show
estimates from Type I decomposition.</p>
</td></tr>
<tr><td><code id="plot.paths_+3A_horizontal">horizontal</code></td>
<td>
<p>a logical variable indicating whether a horizontal plot should be
used. Default is to use a horizontal plot when <code>decomp != both</code>.</p>
</td></tr>
<tr><td><code id="plot.paths_+3A_...">...</code></td>
<td>
<p>additional arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> plot, which can be further customized by the user.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)


# plot total, direct, and path-specific effects
plot(paths_glm, mediator_names = c("G1 identity", "G2 identity", "G3 identity"),
     estimator = "both")

</code></pre>

<hr>
<h2 id='plot.sens'>Plot Method for <code>sens</code> Objects</h2><span id='topic+plot.sens'></span>

<h3>Description</h3>

<p>Contour plot for sensitivity analysis objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'sens'
plot(
  x,
  outcome_name = "Outcome",
  x_axis = c("eta_k", "gamma_k"),
  other = list(`eta_k-1` = NULL, `gamma_k-1` = NULL),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.sens_+3A_x">x</code></td>
<td>
<p>an object of class <code>sens</code> returned by the <code><a href="#topic+sens">sens</a></code>
function</p>
</td></tr>
<tr><td><code id="plot.sens_+3A_outcome_name">outcome_name</code></td>
<td>
<p>a character string indicating the name of the outcome.</p>
</td></tr>
<tr><td><code id="plot.sens_+3A_x_axis">x_axis</code></td>
<td>
<p>sensitivity analysis parameter shown on the x axis. Default is <code>"eta_k"</code>,
i.e., the difference in the prevalence of an unobserved confounder <code class="reqn">U</code> between treated
and untreated units given pretreatment covariates <code class="reqn">X</code> and mediators <code class="reqn">M_1,\ldots, M_k</code>.
Alternatively, it can be <code>"gamma_k"</code>, i.e., the average effect of the unobserved confounder
<code class="reqn">U</code> on the outcome given pretreatment covariates <code class="reqn">X</code>, treatment <code class="reqn">A</code>,
and mediators <code class="reqn">M_1,\ldots, M_k</code>.</p>
</td></tr>
<tr><td><code id="plot.sens_+3A_other">other</code></td>
<td>
<p>a named list indicating the values at which other sensitivity analysis parameters,
namely, <code>`eta_k-1`</code> and <code>`gamma_k-1`</code>, are held. This is needed only when the
bias formula involves <code class="reqn">\eta_{k-1}</code> and <code class="reqn">\gamma_{k-1}</code> as well as <code class="reqn">\eta_k</code> and
<code class="reqn">\gamma_k</code>. The default is to set both <code class="reqn">\eta_{k-1}</code> and <code class="reqn">\gamma_{k-1}</code> at their
average values in the <code>sens</code> object.</p>
</td></tr>
<tr><td><code id="plot.sens_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>ggplot2</code> plot, which can be further customized by the user.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)

# sensitivity analysis for the path-specific effect via M1
sens_glm &lt;- sens(paths_glm, confounded = "M1", estimand = "via M1",
  gamma_values = - seq(0, 0.5, 0.005), eta_values = seq(-0.5, 0.5, 0.005))

plot(sens_glm)

</code></pre>

<hr>
<h2 id='pred'>Obtaining predicted values from fitted models</h2><span id='topic+pred'></span><span id='topic+pred.lm'></span><span id='topic+pred.glm'></span><span id='topic+pred.gbm'></span><span id='topic+pred.pbart'></span><span id='topic+pred.wbart'></span>

<h3>Description</h3>

<p>Generic function that returns predicted outcomes from <code>lm</code>, <code>glm</code>, <code>gbm</code>, <code>wbart</code>,
and <code>pbart</code> objects with new data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pred(object, newdata, ...)

## S3 method for class 'lm'
pred(object, newdata, ...)

## S3 method for class 'glm'
pred(object, newdata, ...)

## S3 method for class 'gbm'
pred(object, newdata, method = "OOB", ...)

## S3 method for class 'pbart'
pred(object, newdata, ...)

## S3 method for class 'wbart'
pred(object, newdata, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pred_+3A_object">object</code></td>
<td>
<p>a fitted model object, which can be of class <code>lm</code>, <code>glm</code>, <code>gbm</code>,
<code>wbart</code>, or <code>pbart</code>.</p>
</td></tr>
<tr><td><code id="pred_+3A_newdata">newdata</code></td>
<td>
<p>a data frame containing predictor variables.</p>
</td></tr>
<tr><td><code id="pred_+3A_...">...</code></td>
<td>
<p>additional arguments passed to the <code>predict</code> methods.</p>
</td></tr>
<tr><td><code id="pred_+3A_method">method</code></td>
<td>
<p>Method used to determine the optimal number of boosting iterations for <code>gbm</code> objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of expected outcomes for <code>newdata</code>
</p>

<hr>
<h2 id='sens'>Sensitivity Analysis for Unobserved Confounding on Path-Specific Causal Effects</h2><span id='topic+sens'></span>

<h3>Description</h3>

<p><code>sens</code> implements a set of bias formulas detailed in Zhou and Yamamoto (2020) for assessing
the sensitivity of estimated path-specific effects to an unobserved confounder <code class="reqn">U</code> of a mediator-outcome
relationship. The user provides a fitted <code>paths</code> object, the mediator whose relationship
with the outcome is potentially confounded, the estimand whose sensitivity to unobserved
confounding is being investigated, type of estimator, type of decomposition, and possible values of
the <code class="reqn">\gamma</code> and <code class="reqn">\eta</code> parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sens(
  object,
  confounded = "M1",
  estimand = "via M1",
  estimator = c("pure", "hybrid"),
  decomp = c("Type I", "Type II"),
  gamma_values = NULL,
  eta_values = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sens_+3A_object">object</code></td>
<td>
<p>a fitted model object returned by the <code><a href="#topic+paths">paths</a></code> function.</p>
</td></tr>
<tr><td><code id="sens_+3A_confounded">confounded</code></td>
<td>
<p>a character string indicating the mediator whose relationship with the outcome
is potentially confounded. One of {<code>"M1", "M2", ...</code>}.</p>
</td></tr>
<tr><td><code id="sens_+3A_estimand">estimand</code></td>
<td>
<p>a character string indicating the estimand whose sensitivity to unobserved
confounding is being investigated. One of {<code>"M1", "M2", ...</code>} or <code>"direct"</code>.</p>
</td></tr>
<tr><td><code id="sens_+3A_estimator">estimator</code></td>
<td>
<p>type of estimator, the pure imputation estimator (<code>"pure"</code>) or the imputation-based
weighting estimator (<code>"hybrid"</code>).</p>
</td></tr>
<tr><td><code id="sens_+3A_decomp">decomp</code></td>
<td>
<p>type of decomposition, <code>"Type I"</code> or <code>"Type II"</code>.</p>
</td></tr>
<tr><td><code id="sens_+3A_gamma_values">gamma_values</code></td>
<td>
<p>potential values of the <code class="reqn">\gamma</code> parameter, which denotes the average effect of
the unobserved confounder <code class="reqn">U</code> on the outcome given pretreatment covariates <code class="reqn">X</code>, treatment <code class="reqn">A</code>,
and mediators <code class="reqn">M_1,\ldots, M_k</code>. If not provided, it is defaulted to a range of 20 values from
-<code class="reqn">\textup{sd}(Y)</code> to <code class="reqn">\textup{sd}(Y)</code>, where <code class="reqn">sd</code> denotes standard deviation and <code class="reqn">Y</code>
denotes the outcome variable.</p>
</td></tr>
<tr><td><code id="sens_+3A_eta_values">eta_values</code></td>
<td>
<p>potential values of the <code class="reqn">\eta</code> parameter, which denotes the difference in the
prevalence of the unobserved confounder <code class="reqn">U</code> between treated and untreated units given pretreatment
covariates <code class="reqn">X</code> and mediators <code class="reqn">M_1,\ldots, M_k</code>. If not provided, it is defaulted to a range of
20 values from -<code class="reqn">sd(A)</code> to <code class="reqn">sd(A)</code>, where <code class="reqn">sd</code> denotes standard deviation and <code class="reqn">A</code> denotes
the treatment variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the following elements </p>

<dl>
<dt>original</dt><dd><p>original estimate of the corresponding path-specific effect.</p>
</dd>
<dt>adjusted</dt><dd><p>a data frame where each row represents a potential combination of <code class="reqn">\gamma</code> and <code class="reqn">\eta</code>,
the corresponding bias, bias-adjusted estimate, and an indicator for whether the bias-adjusted estimate is
of the opposite sign to the original estimate.</p>
</dd>
</dl>



<h3>References</h3>

<p>Zhou, Xiang and Teppei Yamamoto. 2020. &quot;<a href="https://osf.io/2rx6p">Tracing Causal Paths from Experimental and Observational Data</a>&quot;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+paths">paths</a></code>, <code><a href="#topic+plot.sens">plot.sens</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)

# sensitivity analysis for the path-specific effect via M1
sens_glm &lt;- sens(paths_glm, confounded = "M1", estimand = "via M1",
  gamma_values = - seq(0, 0.5, 0.005), eta_values = seq(-0.5, 0.5, 0.005))

plot(sens_glm)

</code></pre>

<hr>
<h2 id='summary.paths'>Summarizing Output from Causal Paths Analysis</h2><span id='topic+summary.paths'></span><span id='topic+print.summary.paths'></span>

<h3>Description</h3>

<p>Function to report results from causal paths analysis. Report point estimates
and standard errors for the total effect, direct effect, and each individual
indirect effect, separately for Type I and Type II decompositions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'paths'
summary(object, ...)

## S3 method for class 'summary.paths'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.paths_+3A_object">object</code></td>
<td>
<p>an object of class <code>paths</code> returned by the
<code><a href="#topic+paths">paths</a></code> function.</p>
</td></tr>
<tr><td><code id="summary.paths_+3A_...">...</code></td>
<td>
<p>additional arguments to be passed to <code>printCoefmat</code> for the
<code>print</code> method</p>
</td></tr>
<tr><td><code id="summary.paths_+3A_x">x</code></td>
<td>
<p>an object of class <code>summary.paths</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>print.summary.paths</code> tries to smartly format the point
estimates and confidence intervals, and provides 'significance stars'
through the <code><a href="stats.html#topic+printCoefmat">printCoefmat</a></code> function.
</p>
<p>It also prints out the names of the treatment, outcome, mediator variables as well
as pretreatment covariates, which are extracted from the <code>formulas</code> argument of the
call to <code>paths</code> so that users can verify if the model formulas have been
correctly specified.
</p>


<h3>Value</h3>

<p>An object of class <code>summary.paths</code>, which is a list containing
the <code>call</code>, <code>varnames</code>, <code>formulas</code>, <code>classes</code>,
<code>args</code>, <code>ps_formula</code>, <code>ps_class</code>, <code>ps_args</code>,
<code>nboot</code>, <code>conf_level</code> components from the <code>paths</code> object,
plus </p>
 <dl>
<dt>nobs</dt><dd><p>number of observations in <code>data</code></p>
</dd> <dt>estimates</dt><dd><p>a
list containing four matrices, corresponding to effect estimates obtained
using the pure imputation estimator and the imputation-based weighting
estimator, each with Type I and Type II decompositions. Each matrix
contains the point estimates, standard errors, and confidence intervals of
the total effect, direct effect, and each individual indirect effect
for the corresponding decomposition. The elements in each matrix
are extracted from the <code>paths</code> object.</p>
</dd></dl>



<h3>See Also</h3>

<p><code><a href="#topic+paths">paths</a></code>, <code><a href="#topic+print.paths">print.paths</a></code>, <code><a href="#topic+plot.paths">plot.paths</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># **For illustration purposes a small number of bootstrap replicates are used**

data(tatar)

m1 &lt;- c("trust_g1", "victim_g1", "fear_g1")
m2 &lt;- c("trust_g2", "victim_g2", "fear_g2")
m3 &lt;- c("trust_g3", "victim_g3", "fear_g3")
mediators &lt;- list(m1, m2, m3)

formula_m0 &lt;- annex ~ kulak + prosoviet_pre + religiosity_pre + land_pre +
  orchard_pre + animals_pre + carriage_pre + otherprop_pre + violence
formula_m1 &lt;- update(formula_m0,    ~ . + trust_g1 + victim_g1 + fear_g1)
formula_m2 &lt;- update(formula_m1,    ~ . + trust_g2 + victim_g2 + fear_g2)
formula_m3 &lt;- update(formula_m2,    ~ . + trust_g3 + victim_g3 + fear_g3)
formula_ps &lt;- violence ~ kulak + prosoviet_pre + religiosity_pre +
  land_pre + orchard_pre + animals_pre + carriage_pre + otherprop_pre

####################################################
# Causal Paths Analysis using GLM
####################################################

# outcome models
glm_m0 &lt;- glm(formula_m0, family = binomial("logit"), data = tatar)
glm_m1 &lt;- glm(formula_m1, family = binomial("logit"), data = tatar)
glm_m2 &lt;- glm(formula_m2, family = binomial("logit"), data = tatar)
glm_m3 &lt;- glm(formula_m3, family = binomial("logit"), data = tatar)
glm_ymodels &lt;- list(glm_m0, glm_m1, glm_m2, glm_m3)

# propensity score model
glm_ps &lt;- glm(formula_ps, family = binomial("logit"), data = tatar)

# causal paths analysis using glm
# note: For illustration purposes only a small number of bootstrap replicates are used
paths_glm &lt;- paths(a = "violence", y = "annex", m = mediators,
  glm_ymodels, ps_model = glm_ps, data = tatar, nboot = 3)
# plot total, direct, and path-specific effects
summary(paths_glm)

</code></pre>

<hr>
<h2 id='tatar'>The Legacy of Political Violence among Crimean Tatars</h2><span id='topic+tatar'></span>

<h3>Description</h3>

<p>A dataset of 427 Crimean Tatars including variables on ancestor victimization,
political identities of first-, second- and third-generation respondents,
and political attitudes toward Russia's annexation of Crimea (Lupu and Peisakhin 2017).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tatar
</code></pre>


<h3>Format</h3>

<p>A data frame with 427 rows and 19 columns: </p>

<dl>
<dt>kulak</dt><dd><p>Whether the first-generation respondent had close relatives subject to
dekulakization. 0: no; 1: yes.</p>
</dd>
<dt>prosoviet_pre</dt><dd><p>Whether the first-generation respondent's close relatives privately
supported or opposed Soviet authorities. 1: opposed; 2: indifferent; 3: supported.</p>
</dd>
<dt>religiosity_pre</dt><dd><p>How important it was for the first-generation respondent's family to
follow Islamic customs and traditions while in deportation. 1: not at all important;
2: somewhat important; 3: very important.</p>
</dd>
<dt>land_pre</dt><dd><p>Whether the first-generation respondent's close relatives owned agricultural
land. 0: no; 1: some; 2: a lot.</p>
</dd>
<dt>orchard_pre</dt><dd><p>Whether the first-generation respondent's close relatives owned orchards.
0: no; 1: yes.</p>
</dd>
<dt>animals_pre</dt><dd><p>Whether the first-generation respondent's close relatives owned pasture animals.
0: no; 1: some; 2: a lot.</p>
</dd>
<dt>carriage_pre</dt><dd><p>Whether the first-generation respondent's close relatives owned horse-drawn
carriages. 0: no; 1: yes.</p>
</dd>
<dt>otherprop_pre</dt><dd><p>Whether the first-generation respondent's close relatives owned other substantial
property. 0: no; 1: yes.</p>
</dd>
<dt>violence</dt><dd><p>Whether the first-generation respondent had a family member who died due to poor
conditions during the 1944-45 deportation to Crimea. 0: no; 1: yes.</p>
</dd>
<dt>trust_g1</dt><dd><p>Whether the first-generation respondent trusts Crimean Tatars more than Russians.
1: trusts Crimean Tatars more; 0: indifferent; -1: trusts Russians more.</p>
</dd>
<dt>victim_g1</dt><dd><p>Whether the first-generation respondent consider them or their close relatives victims
of the Soviet political system. 0: no; 1: yes.</p>
</dd>
<dt>fear_g1</dt><dd><p>Whether the first-generation respondent started to fear concerning their future
after the March referendum. 0: no; 1: yes.</p>
</dd>
<dt>trust_g2</dt><dd><p>The degree to which second-generation respondents trust Crimean Tatars more than Russians,
ranging from -1 to 1 (averaged over multiple respondents).</p>
</dd>
<dt>victim_g2</dt><dd><p>The degree to which second-generation respondents consider them or their close relatives
victims of the Soviet political system, ranging from 0 to 1 (averaged over multiple respondents).</p>
</dd>
<dt>fear_g2</dt><dd><p>The degree to which second-generation respondents started to fear concerning their future
after the March referendum, ranging from 0 to 1 (averaged over multiple respondents).</p>
</dd>
<dt>trust_g3</dt><dd><p>Whether the third-generation respondent trusts Crimean Tatars more than Russians.
1: trusts Crimean Tatars more; 0: indifferent; -1: trusts Russians more.</p>
</dd>
<dt>victim_g3</dt><dd><p>Whether the third-generation respondent considers them or their close relatives victims
of the Soviet political system. 0: no; 1: yes.</p>
</dd>
<dt>fear_g3</dt><dd><p>Whether the third-generation respondent started to fear concerning their future
after the March referendum. 0: no; 1: yes.</p>
</dd>
<dt>annex</dt><dd><p>Whether the third-generation respondent supports Russia’s annexation of Crimea. 0: no; 1: yes.</p>
</dd>
</dl>



<h3>References</h3>

<p>Lupu, Noam and Leonid Peisakhin. 2017. &quot;The Legacy of Political Violence across Generations.”
American Journal of Political Science 61(4):836-851.
</p>

<hr>
<h2 id='welfare'>Issue Framing and Support for Welfare Reform</h2><span id='topic+welfare'></span>

<h3>Description</h3>

<p>A dataset of 213 Danish students containing variables on gender, education, political interest,
ideology, political knowledge, extremity of political values, treatment assignment (job/poor frame),
beliefs about why some people receive welfare benefits, perceived importance of different
considerations related to welfare policy, and support for a proposed welfare reform (Slothuus 2008; Imai and
Yamamoto 2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>welfare
</code></pre>


<h3>Format</h3>

<p>A data frame with 213 rows and 15 columns: </p>

<dl>
<dt>gender1</dt><dd><p>Gender. 0: Female; 1: Male.</p>
</dd>
<dt>educ1</dt><dd><p>Level of education.
1: the municipal primary and lower secondary school before ninth form;
2: the municipal primary and lower secondary school after ninth or tenth form;
3: Basic schooling; 4: Vocational education;
5: Higher preparatory examination course student
6: Upper secondary school student; 7: Higher commercial examination student
8: Higher technical examination student; 9: Short-term further education;
10: Medium-term further education; 11: Long-term further education;
12: Foreign education; 13: Else.</p>
</dd>
<dt>polint1</dt><dd><p>Political interest, measured on a 0-4 scale.</p>
</dd>
<dt>ideo1</dt><dd><p>Ideological self-placement on a 1-8 scale. A larger value denotes a more
right-wing position.</p>
</dd>
<dt>know1</dt><dd><p>Political knowledge. 1: low; 2: medium; 3: high.</p>
</dd>
<dt>value1</dt><dd><p>Extremity of political values. 0: moderate. 1: extreme.</p>
</dd>
<dt>ttt</dt><dd><p>Treatment assignment. Whether the respondent read a newspaper article that highlighted
the positive effect of welfare reform on job creation (1) versus one emphasizing its negative
effect on the poor (0).</p>
</dd>
<dt>W1</dt><dd><p>The degree to which the respondent attributes welfare recipiency to internal factors,
measured on a 0-1 scale.</p>
</dd>
<dt>W2</dt><dd><p>The degree to which the respondent attributes welfare recipiency to external factors,
measured on a 0-1 scale.</p>
</dd>
<dt>M1</dt><dd><p>How important the respondent thinks that there should always be an incentive for
people to take a job instead of receiving welfare benefits, measured on a 0-1 scale.</p>
</dd>
<dt>M2</dt><dd><p>How important the respondent thinks that nobody should live in poverty, measured on
a 0-1 scale.</p>
</dd>
<dt>M3</dt><dd><p>How important the respondent thinks that government expenditures on welfare
benefits should not be too expensive, measured on a 0-1 scale.</p>
</dd>
<dt>M4</dt><dd><p>How important the respondent thinks that no defrauder should receive welfare benefits,
measured on a 0-1 scale.</p>
</dd>
<dt>M5</dt><dd><p>How important the respondent thinks that the unemployed should have benefit rates
making it possible to maintain a decent standard of living conditions, measured on a 0-1 scale.</p>
</dd>
<dt>Y</dt><dd><p>Support for the proposed welfare reform, measured on a seven-point scale.</p>
</dd>
</dl>



<h3>References</h3>

<p>Slothuus, Rune. 2008. &quot;More than Weighting Cognitive Importance: A Dual-process Model of Issue
Framing Effects.&quot; Political Psychology 29(1):1-28.
</p>
<p>Imai, Kosuke and Teppei Yamamoto. 2013. &quot;Identification and Sensitivity Analysis for Multiple
Causal Mechanisms: Revisiting Evidence from Framing Experiments.&quot; Political Analysis 21(2):141-171.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
