<!DOCTYPE html><html lang="en"><head><title>Help for package ILSAmerge</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ILSAmerge}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addSchools'><p>Add school data</p></a></li>
<li><a href='#asthistibble'><p>Copy tibble attributes</p></a></li>
<li><a href='#availableILSA'><p>Check available ILSA data</p></a></li>
<li><a href='#combineStudents'><p>Combine student data</p></a></li>
<li><a href='#get.atr'><p>Retrieve tibble attributes</p></a></li>
<li><a href='#ILSAdownload'><p>Download ILSA data</p></a></li>
<li><a href='#ILSAfile.info'><p>ILSA data files information</p></a></li>
<li><a href='#ILSAmerge'><p>Merge ILSA data</p></a></li>
<li><a href='#ILSAready'><p>Download and prepare ILSA data</p></a></li>
<li><a href='#ILSArename'><p>Rename <code>ILSAmerge</code> files</p></a></li>
<li><a href='#justload'><p>Loading ILSA data into a list</p></a></li>
<li><a href='#mistoNAs'><p>Missing to NAs</p></a></li>
<li><a href='#readILSA'><p>Read ILSA data</p></a></li>
<li><a href='#spss.syntax'><p>'SPSS' merge syntax</p></a></li>
<li><a href='#untibble'><p>Untibble</p></a></li>
<li><a href='#whichcol'><p>Which column</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Merge and Download International Large-Scale Assessments (ILSA)
Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.3.6</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andrés Christiansen &lt;andres.christiansen@iea-hamburg.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Merges and downloads 'SPSS' data from different International Large-Scale Assessments (ILSA), including: Trends in International Mathematics and Science Study (TIMSS), Progress in International Reading Literacy Study (PIRLS), and others.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3.0)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/dopatendo/ILSAmerge">https://github.com/dopatendo/ILSAmerge</a>,
<a href="https://dopatendo.github.io/ILSAmerge/">https://dopatendo.github.io/ILSAmerge/</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>haven</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-12 17:34:36 UTC; andreschristiansen</td>
</tr>
<tr>
<td>Author:</td>
<td>Andrés Christiansen
    <a href="https://orcid.org/0000-0003-2692-7843"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre],
  Andrés Strello <a href="https://orcid.org/0000-0002-5613-8338"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-12 17:50:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='addSchools'>Add school data</h2><span id='topic+addSchools'></span>

<h3>Description</h3>

<p>Add school data to student and teacher files merged by <code><a href="#topic+ILSAmerge">ILSAmerge</a></code>.
It will run <code><a href="#topic+combineStudents">combineStudents</a></code> internally.
To see which ILSA are available for adding school data use <code><a href="#topic+availableILSA">availableILSA</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addSchools(inputdir = getwd(), outputdir = getwd(), quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="addSchools_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where <code><a href="#topic+ILSAmerge">ILSAmerge</a></code> files are stored.</p>
</td></tr>
<tr><td><code id="addSchools_+3A_outputdir">outputdir</code></td>
<td>
<p>a string indicating where the combined data will be saved.</p>
</td></tr>
<tr><td><code id="addSchools_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves combined student data and teacher data with added school data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/timssadv", package = "ILSAmerge")

# Path where merged files will be saved
dir.create(file.path(tempdir(),"addSchools"))
output &lt;- file.path(tempdir(),"addSchools")

# Merging 'TIMSS' Advanced 1995, as .rds file
ILSAmerge(inputdir = input, outputdir = output, filetype = "rds", quiet = FALSE)

# Check file names
list.files(output,pattern = ".rds")

# Add school data
addSchools(inputdir = output, outputdir = output)

# Check file names
list.files(output,pattern = ".rds")

</code></pre>

<hr>
<h2 id='asthistibble'>Copy tibble attributes</h2><span id='topic+asthistibble'></span>

<h3>Description</h3>

<p>Converts a data frame into a tibble copying all attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>asthistibble(tibble, x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="asthistibble_+3A_tibble">tibble</code></td>
<td>
<p>a tibble object.</p>
</td></tr>
<tr><td><code id="asthistibble_+3A_x">x</code></td>
<td>
<p>a data frame with the same columns of <code>tibble</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># tibble generated by haven
input &lt;- system.file("extdata/reds", package = "ILSAmerge")
tib &lt;- do.call(rbind,justload(inputdir = input,population = "BCGV1"))

# Remove all tibble attributes
x &lt;- tib
class(x) &lt;- "data.frame"
for(i in 1:ncol(x)){
  attributes(x[,1]) &lt;- NULL
}

# Mix variables 
set.seed(1919)
x &lt;- x[,sample(ncol(x))]
head(x)[,1:10]
tib

asthistibble(tibble = tib, x = x)

</code></pre>

<hr>
<h2 id='availableILSA'>Check available ILSA data</h2><span id='topic+availableILSA'></span>

<h3>Description</h3>

<p>Checks which 'SPSS' data from different International Large-Scale Assessments (ILSA).
are available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>availableILSA(
  print = TRUE,
  FOR = c("download", "combine.students", "add.schools", "ILSAready")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="availableILSA_+3A_print">print</code></td>
<td>
<p>a logical value indicating if results should be printed or not.</p>
</td></tr>
<tr><td><code id="availableILSA_+3A_for">FOR</code></td>
<td>
<p>a string indicating the availability of ILSA data for different 
purposes. Valid strings are <code>"download"</code>, <code>"combine.students"</code>,
<code>add.schools</code>, and <code>"ILSAready"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the names of the ILSA and the available years.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
availableILSA(print = TRUE)

</code></pre>

<hr>
<h2 id='combineStudents'>Combine student data</h2><span id='topic+combineStudents'></span>

<h3>Description</h3>

<p>Combines achievement and background student data merged by <code><a href="#topic+ILSAmerge">ILSAmerge</a></code>.
To see which ILSA are available for combining use <code><a href="#topic+availableILSA">availableILSA</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combineStudents(inputdir = getwd(), outputdir = getwd(), quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="combineStudents_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where <code><a href="#topic+ILSAmerge">ILSAmerge</a></code> files are stored.</p>
</td></tr>
<tr><td><code id="combineStudents_+3A_outputdir">outputdir</code></td>
<td>
<p>a string indicating where the combined data will be saved.</p>
</td></tr>
<tr><td><code id="combineStudents_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves combined student data produced by <code><a href="#topic+ILSAmerge">ILSAmerge</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/timssadv", package = "ILSAmerge")

# Path where merged files will be saved
dir.create(file.path(tempdir(),"combineStudents"))
output &lt;- file.path(tempdir(),"combineStudents")

# Merging 'TIMSS' Advanced 1995, as .rds file
ILSAmerge(inputdir = input, outputdir = output, filetype = "rds", quiet = FALSE)

# Rename files
ILSArename(output)

# Check file names
list.files(output,pattern = ".rds")

# Combine student files
combineStudents(inputdir = output, outputdir = output)

# Check file names
list.files(output,pattern = ".rds")

</code></pre>

<hr>
<h2 id='get.atr'>Retrieve tibble attributes</h2><span id='topic+get.atr'></span><span id='topic+get.nas'></span><span id='topic+get.varlab'></span>

<h3>Description</h3>

<p>Retrieves attributes from a tibble object created by haven.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.atr(tibble, which, NULLasNA = TRUE, exact = FALSE)

get.nas(tibble, aslist = TRUE)

get.varlab(tibble)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.atr_+3A_tibble">tibble</code></td>
<td>
<p>a tibble object.</p>
</td></tr>
<tr><td><code id="get.atr_+3A_which">which</code></td>
<td>
<p>a non-empty character string specifying which attribute
is to be accessed.</p>
</td></tr>
<tr><td><code id="get.atr_+3A_nullasna">NULLasNA</code></td>
<td>
<p>a logical value indicating if <code>NULL</code> attributes
should be listed as NA. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get.atr_+3A_exact">exact</code></td>
<td>
<p>logical: should <code>which</code> be matched exactly?</p>
</td></tr>
<tr><td><code id="get.atr_+3A_aslist">aslist</code></td>
<td>
<p>a logical value indicating if output should be a list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list or a data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># tibble generated by haven
input &lt;- system.file("extdata/reds", package = "ILSAmerge")
x &lt;- do.call(rbind,justload(inputdir = input,population = "BCGV1"))
x

# Get an attribute
get.atr(tibble = x, which = "label")[1:3]
get.atr(tibble = x, which = "labels")[1:3]
get.atr(tibble = x, which = "format.spss")[1:3]

# Get NAs
get.nas(tibble = x,aslist = TRUE)[10:20]
get.nas(tibble = x,aslist = FALSE)[10:20,]

# Get variable labels
get.varlab(tibble = x)[10:20,]

</code></pre>

<hr>
<h2 id='ILSAdownload'>Download ILSA data</h2><span id='topic+ILSAdownload'></span>

<h3>Description</h3>

<p>Downloads 'SPSS' data from different International Large-Scale Assessments (ILSA).
This functions supports the following ILSA: 'TIMSS', 'TIMSS Advanced', 'PIRLS', 
'ICCS', 'ICILS', 'CIVED', 'REDS', 'RLII', and 'SITES.' Depending on the study, 
you will need to decide which data to download, and
read and accept its terms and conditions to proceed with the download.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ILSAdownload(
  study,
  year,
  outputdir = getwd(),
  unzip = FALSE,
  maxtime = 999,
  quiet = FALSE,
  agreeLicense = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ILSAdownload_+3A_study">study</code></td>
<td>
<p>a string indicating the name of the study. For available studies
check the description of this function.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_year">year</code></td>
<td>
<p>a numeric value indicating the year of the study.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_outputdir">outputdir</code></td>
<td>
<p>the directory where data will be downloaded.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_unzip">unzip</code></td>
<td>
<p>a logical value indicating if files should be unzipped.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_maxtime">maxtime</code></td>
<td>
<p>a numeric value indicating the maximum time allowed for 
downloading a file. Default is <code>999</code>.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. 
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ILSAdownload_+3A_agreelicense">agreeLicense</code></td>
<td>
<p>a logical value indicating if you agree with
the Disclaimer and License Agreement file from www.iea.nl. If <code>FALSE</code>,
you will be prompted to agree with it or else data will not be downloaded.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves 'SPSS' ILSA data locally.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># For example, to download 'RLII' 1991 data:

# Path where files will be saved
dir.create(file.path(tempdir(),"ILSAdownload"))
output &lt;- file.path(tempdir(),"ILSAdownload")


# Downloading 'RLII' 1991 and unzipping files
ILSAdownload(study = "RLII", year = 1991, outputdir = output, unzip = TRUE, agreeLicense = TRUE)


</code></pre>

<hr>
<h2 id='ILSAfile.info'>ILSA data files information</h2><span id='topic+ILSAfile.info'></span>

<h3>Description</h3>

<p>Aggregates International Large-Scale Assessments (ILSA) data files information by population.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ILSAfile.info(inputdir = getwd())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ILSAfile.info_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where ILSA 'SPSS' files are stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the number of files and MBs per population.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Get file information
ILSAfile.info(inputdir = input)

</code></pre>

<hr>
<h2 id='ILSAmerge'>Merge ILSA data</h2><span id='topic+ILSAmerge'></span>

<h3>Description</h3>

<p>Merges 'SPSS' data from different International Large-Scale Assessments (ILSA).
This function has been tested to behave correctly for: 'TIMSS', 'TIMSS Advanced', 
'PIRLS', 'ICCS', 'ICILS', 'CIVED', 'REDS', 'RLII', and 'SITES' (2006).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ILSAmerge(
  inputdir = getwd(),
  outputdir = getwd(),
  population = NULL,
  filetype = c("rds", "zsav", "sav"),
  MBlimit = NULL,
  MBlistlimit = 200,
  SPSSlimit = 50,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ILSAmerge_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where ILSA 'SPSS' files are stored.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_outputdir">outputdir</code></td>
<td>
<p>the directory where the merged data will be saved.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_population">population</code></td>
<td>
<p>a character vector indicating which files should be merged.
If <code>NULL</code> (the default), all files will be merged. For more information
on available populations, run <code>ILSAfile.info()</code> first.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_filetype">filetype</code></td>
<td>
<p>a string indicating the type of file to be saved, it can
be <code>"rds"</code>, <code>"zsav"</code>, or <code>"sav"</code>.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_mblimit">MBlimit</code></td>
<td>
<p>a numerical value indicating the allowed limit of the combined
storage of the files of one type (see <code>ILSAfile.info()</code>).
For type files that go over the limit, files will not be merged in R,
but an 'SPSS' syntax will be produced via <code>spss.syntax()</code>.
If set to <code>NULL</code>, no limit will be used and all files will be merged
within R. If speed is a problem, we recommend
that this number should not be over <code>200</code> and merge the rest in 'SPSS'.
Beware that some ILSA will have files with different columns and this could
cause some 'SPSS' syntaxes to fail. If this happens, merge through <code>R</code>.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_mblistlimit">MBlistlimit</code></td>
<td>
<p>a numerical value indicating the allowed limit of the
combined storage of the files of one type for merging through a list.
Values over the limit will be merged through a matrix, which will be slower
but uses less memory. Default is <code>200</code>.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_spsslimit">SPSSlimit</code></td>
<td>
<p>a numerical value indicating the limit of files per command
of 'SPSS', typically <code>50</code>.</p>
</td></tr>
<tr><td><code id="ILSAmerge_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For files merged within R it will also add country information where needed. 
Country information will be retrieved from 'GitHub' if possible. If not, it will
use the package internal data.
</p>


<h3>Value</h3>

<p>Saves merged ILSA data or <code>.sps</code> syntax for merging ILSA data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Path where merged files will be saved
dir.create(file.path(tempdir(),"ILSAmerge"))
output &lt;- file.path(tempdir(),"ILSAmerge")

# Merging 'REDS' 2021, as .rds file
ILSAmerge(inputdir = input, outputdir = output, filetype = "rds", quiet = FALSE)

</code></pre>

<hr>
<h2 id='ILSAready'>Download and prepare ILSA data</h2><span id='topic+ILSAready'></span><span id='topic+ILSAreadylocal'></span>

<h3>Description</h3>

<p>Downloads ILSA data, merges it, combines students and adds school information.
This function is a wrapper for <code><a href="#topic+ILSAdownload">ILSAdownload</a></code>, <code><a href="#topic+ILSAmerge">ILSAmerge</a></code>,
<code><a href="#topic+ILSArename">ILSArename</a></code>, <code><a href="#topic+combineStudents">combineStudents</a></code>, and <code><a href="#topic+addSchools">addSchools</a></code>. 
To see which ILSA are available for this function use <code><a href="#topic+availableILSA">availableILSA</a></code>.
If data is already downloaded you can use <code><a href="#topic+ILSAreadylocal">ILSAreadylocal</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ILSAready(
  study,
  year,
  outputdir = getwd(),
  filetype = c("rds", "zsav", "sav"),
  MBlistlimit = 200,
  quiet = FALSE,
  agreeLicense = FALSE
)

ILSAreadylocal(
  inputdir = getwd(),
  outputdir = getwd(),
  filetype = c("rds", "zsav", "sav"),
  quiet = FALSE,
  MBlistlimit = 200
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ILSAready_+3A_study">study</code></td>
<td>
<p>a string indicating the name of the study. For available studies
check the description of this function.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_year">year</code></td>
<td>
<p>a numeric value indicating the year of the study.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_outputdir">outputdir</code></td>
<td>
<p>the directory where the merged data will be saved.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_filetype">filetype</code></td>
<td>
<p>a string indicating the type of file to be saved, it can
be <code>"rds"</code>, <code>"zsav"</code>, or <code>"sav"</code>.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_mblistlimit">MBlistlimit</code></td>
<td>
<p>a numerical value indicating the allowed limit of the
combined storage of the files of one type for merging through a list.
Values over the limit will be merged through a matrix, which will be slower
but uses less memory. Default is <code>200</code>.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_agreelicense">agreeLicense</code></td>
<td>
<p>a logical value indicating if you agree with
the Disclaimer and License Agreement file from www.iea.nl. If <code>FALSE</code>,
you will be prompted to agree with it or else data will not be downloaded.
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ILSAready_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where ILSA 'SPSS' files are stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves merged and renamed ILSA data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dir.create(file.path(tempdir(),"timssadv"),showWarnings = FALSE)
output &lt;- file.path(tempdir(),"timssadv")

input &lt;- system.file("extdata/timssadv", package = "ILSAmerge")

ILSAreadylocal(inputdir = input, outputdir = output, filetype = "zsav")

</code></pre>

<hr>
<h2 id='ILSArename'>Rename <code><a href="#topic+ILSAmerge">ILSAmerge</a></code> files</h2><span id='topic+ILSArename'></span>

<h3>Description</h3>

<p>Renames files produced by <code><a href="#topic+ILSAmerge">ILSAmerge</a></code> from name codes to comprehensible names 
including the study name, year and respondent.
This function has been tested to behave correctly for: 'TIMSS', 'TIMSS Advanced', 
'PIRLS', 'ICCS', 'ICILS', 'CIVED', 'REDS', 'RLII', and 'SITES' (2006).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ILSArename(
  inputdir = getwd(),
  codeTOname = TRUE,
  overwrite = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ILSArename_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where ILSA 'SPSS' files are stored.</p>
</td></tr>
<tr><td><code id="ILSArename_+3A_codetoname">codeTOname</code></td>
<td>
<p>a logical value indicating if files should be renamed from
codes to names (<code>TRUE</code>) or from names to codes (<code>FALSE</code>).
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ILSArename_+3A_overwrite">overwrite</code></td>
<td>
<p>a logical value indicating if files should be overwritten.
If <code>FALSE</code>, files will be copied with the new names. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="ILSArename_+3A_quiet">quiet</code></td>
<td>
<p>a logical value indicating if progress status should be
shown. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Renames or copies files produced by <code><a href="#topic+ILSAmerge">ILSAmerge</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Merge files
dir.create(file.path(tempdir(),"REDS2021"),showWarnings = FALSE)
ILSAmerge(inputdir = system.file("extdata/reds", package = "ILSAmerge"), 
outputdir = file.path(tempdir(),"REDS2021"))

# Show files with raw names
list.files(file.path(tempdir(),"REDS2021"))

# Rename files
ILSArename(inputdir = file.path(tempdir(),"REDS2021"))

# Show files new names 
list.files(file.path(tempdir(),"REDS2021"))

</code></pre>

<hr>
<h2 id='justload'>Loading ILSA data into a list</h2><span id='topic+justload'></span>

<h3>Description</h3>

<p>Load 'SPSS' data from different International Large-Scale Assessments (ILSA),
including: 'TIMSS', 'TIMSS Advanced', 'PIRLS', 'ICCS', 'ICILS', 'CIVED', 'REDS', 'RLII',
and 'SITES' (2006) into a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>justload(
  inputdir = getwd(),
  population,
  justattributes = FALSE,
  addcountries = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="justload_+3A_inputdir">inputdir</code></td>
<td>
<p>a string indicating the path where ILSA 'SPSS' files are stored.</p>
</td></tr>
<tr><td><code id="justload_+3A_population">population</code></td>
<td>
<p>a character value indicating which files should be loaded. 
For more information on available populations, run <code>ILSAfile.info()</code> first.</p>
</td></tr>
<tr><td><code id="justload_+3A_justattributes">justattributes</code></td>
<td>
<p>a logical value indicating if 0 rows should be loaded.
This can be used when we just need to check column attributes. Default is 
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="justload_+3A_addcountries">addcountries</code></td>
<td>
<p>a logical value indicating if country information should
be added to the elements of the list. This means adding the variable <code>CNTRY</code>
where needed and adding labels for <code>IDCNTRY</code> where needed. If <code>FALSE</code>
(the default), data will be loaded as is.
Country information will be retrieved from 'GitHub' if possible. If not, it will
use the package internal data.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of tibbles.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Load only attributes
emptylist &lt;- justload(inputdir = input, population = "BCGV1", justattributes = TRUE)

# Load complete data
fulllist &lt;- justload(inputdir = input, population = "BCGV1", justattributes = FALSE)

# Load complete data and add country labels
withcou &lt;- justload(inputdir = input, population = "BCGV1", addcountries = TRUE)

</code></pre>

<hr>
<h2 id='mistoNAs'>Missing to NAs</h2><span id='topic+mistoNAs'></span>

<h3>Description</h3>

<p>Converts values labelled as missings to <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mistoNAs(tibble)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mistoNAs_+3A_tibble">tibble</code></td>
<td>
<p>a tibble object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># tibble generated by haven
input &lt;- system.file("extdata/reds", package = "ILSAmerge")
tib &lt;- do.call(rbind,justload(inputdir = input,population = "BCGV1"))

tib

mistoNAs(tib)

</code></pre>

<hr>
<h2 id='readILSA'>Read ILSA data</h2><span id='topic+readILSA'></span>

<h3>Description</h3>

<p>Reads files created with ILSAmerge().
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readILSA(file, mistoNAs = FALSE, untibble = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="readILSA_+3A_file">file</code></td>
<td>
<p>a path to an '.rds', '.sav', or '.zsav' file.</p>
</td></tr>
<tr><td><code id="readILSA_+3A_mistonas">mistoNAs</code></td>
<td>
<p>a logical value indicating if missing values should be 
converted into NAs. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="readILSA_+3A_untibble">untibble</code></td>
<td>
<p>a logical value indicating if data should be converted into
a plain data frame with no column attributes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble or a data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Path where merged files will be saved
unlink(file.path(tempdir(),"ILSAmerge"),recursive = TRUE)
dir.create(file.path(tempdir(),"ILSAmerge"))
output &lt;- file.path(tempdir(),"ILSAmerge")

# Merging 'REDS' 2021, as .rds file
ILSAmerge(inputdir = input, outputdir = output, filetype = "rds", quiet = FALSE)

# Read student file
readILSA(file = file.path(output,"BSGV1.rds"))

</code></pre>

<hr>
<h2 id='spss.syntax'>'SPSS' merge syntax</h2><span id='topic+spss.syntax'></span>

<h3>Description</h3>

<p>Produces and saves an 'SPSS' merge syntax given a list of files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spss.syntax(filelist, name, outputdir = getwd(), zsav = TRUE, SPSSlimit = 50)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="spss.syntax_+3A_filelist">filelist</code></td>
<td>
<p>a character vector with the list of files to be merged.</p>
</td></tr>
<tr><td><code id="spss.syntax_+3A_name">name</code></td>
<td>
<p>a string with the name of the merged file (without any
extension).</p>
</td></tr>
<tr><td><code id="spss.syntax_+3A_outputdir">outputdir</code></td>
<td>
<p>the directory where the <code>.sps</code> file and the
merged file will be saved.</p>
</td></tr>
<tr><td><code id="spss.syntax_+3A_zsav">zsav</code></td>
<td>
<p>a logical value indicating if the the merged file should
be compressed with zsav. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="spss.syntax_+3A_spsslimit">SPSSlimit</code></td>
<td>
<p>a numerical value indicating the limit of files per command
of 'SPSS', typically <code>50</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Saves an <code>.sps</code> file with the 'SPSS' syntax for merging the
desired files.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Path where merged files will be saved
dir.create(file.path(tempdir(),"spsssyntax"))
output &lt;- file.path(tempdir(),"spsssyntax")

# List of BCGV1 files to be merged
files &lt;- list.files(path = input, pattern = "BCG.+V1|bcg.+v1")

# Create 'SPSS' syntax
spss.syntax(filelist = files, name = "BCGV1", outputdir = output, zsav = TRUE)

</code></pre>

<hr>
<h2 id='untibble'>Untibble</h2><span id='topic+untibble'></span>

<h3>Description</h3>

<p>Converts a tibble into a plain data frame with no column attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>untibble(tibble, mistoNAs = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="untibble_+3A_tibble">tibble</code></td>
<td>
<p>a tibble object or a list of tibbles.</p>
</td></tr>
<tr><td><code id="untibble_+3A_mistonas">mistoNAs</code></td>
<td>
<p>a logical value indicating if missing values should be 
converted into NAs. Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Path where raw 'SPSS' files are
input &lt;- system.file("extdata/reds", package = "ILSAmerge")

# Load complete data
fulllist &lt;- justload(inputdir = input, population = "BCGV1", justattributes = FALSE)

# Untibble first element
unt1 &lt;- untibble(fulllist[[1]])

# Untibble all list
unt2 &lt;- untibble(fulllist)


</code></pre>

<hr>
<h2 id='whichcol'>Which column</h2><span id='topic+whichcol'></span>

<h3>Description</h3>

<p>Retrieves column names and labels that matches a general expression via
<a href="base.html#topic+grepl">grepl</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>whichcol(pattern, tibble, label = TRUE, ignore.case = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="whichcol_+3A_pattern">pattern</code></td>
<td>
<p>character string containing a <a href="base.html#topic+regular+20expression">regular expression</a>
(or character string for <code>fixed = TRUE</code>) to be matched
in the given character vector.  Coerced by
<code><a href="base.html#topic+as.character">as.character</a></code> to a character string if possible.  If a
character vector of length 2 or more is supplied, the first element
is used with a warning.  Missing values are allowed except for
<code>regexpr</code>, <code>gregexpr</code> and <code>regexec</code>.</p>
</td></tr>
<tr><td><code id="whichcol_+3A_tibble">tibble</code></td>
<td>
<p>a tibble object.</p>
</td></tr>
<tr><td><code id="whichcol_+3A_label">label</code></td>
<td>
<p>a logical value indicating if pattern should be searched in
variable label, instead of variable name. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="whichcol_+3A_ignore.case">ignore.case</code></td>
<td>
<p>if <code>FALSE</code>, the pattern matching is <em>case
sensitive</em> and if <code>TRUE</code>, case is ignored during matching.</p>
</td></tr>
<tr><td><code id="whichcol_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="base.html#topic+grep">base::grepl</a></code>
</p>

<dl>
<dt><code>perl</code></dt><dd><p>logical.  Should Perl-compatible regexps be used?</p>
</dd>
<dt><code>fixed</code></dt><dd><p>logical.  If <code>TRUE</code>, <code>pattern</code> is a string to be
matched as is.  Overrides all conflicting arguments.</p>
</dd>
<dt><code>useBytes</code></dt><dd><p>logical.  If <code>TRUE</code> the matching is done
byte-by-byte rather than character-by-character.  See
&lsquo;Details&rsquo;.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># tibble generated by haven
input &lt;- system.file("extdata/reds", package = "ILSAmerge")
x &lt;- do.call(rbind,justload(inputdir = input,population = "BCGV1"))
x

whichcol("weight",x)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
