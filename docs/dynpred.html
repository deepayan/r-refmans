<!DOCTYPE html><html><head><title>Help for package dynpred</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dynpred}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#AUC'><p>Calculate AUC(t) curve</p></a></li>
<li><a href='#AUCw'><p>Calculate dynamic AUC(t) curve</p></a></li>
<li><a href='#cindex'><p>Calculate Harrell's c-index</p></a></li>
<li><a href='#cutLM'><p>Create landmark data set</p></a></li>
<li><a href='#CVcindex'><p>Calculate cross-validated c-index</p></a></li>
<li><a href='#CVPL'><p>Calculate cross-validated log-partial likelihood (with shrinkage)</p></a></li>
<li><a href='#deb'><p>Debugging function</p></a></li>
<li><a href='#dynpred-package'><p>The companion package of the book &quot;Dynamic Prediction in Survival Analysis&quot;</p></a></li>
<li><a href='#EBMT data'><p>Data from the European Society for Blood and Marrow Transplantation (EBMT)</p></a></li>
<li><a href='#evalstep'><p>Evaluate step function at a set of new time points</p></a></li>
<li><a href='#Fwindow'><p>Calculate dynamic &quot;death within window&quot; curve</p></a></li>
<li><a href='#NKI breast cancer clinical data'><p>Clinical and follow-up data of breast cancer patients as collected in the</p>
Dutch Cancer Institute (NKI) in Amsterdam</a></li>
<li><a href='#Ovarian cancer data'><p>Data originate from two clinical trials on the use of different combination</p>
chemotherapies, carried out in The Netherlands around 1980</a></li>
<li><a href='#pe'><p>Calculate prediction error curve</p></a></li>
<li><a href='#pew'><p>Calculate dynamic prediction error curve</p></a></li>
<li><a href='#scatterplot'><p>Create scatter plot with imputed survival times</p></a></li>
<li><a href='#toleranceplot'><p>Create a tolerance plot</p></a></li>
<li><a href='#WBC follow-up data'><p>Data from the Benelux CML study</p></a></li>
<li><a href='#WBC measurements data'><p>Data from the Benelux CML study</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2015-07-13</td>
</tr>
<tr>
<td>Title:</td>
<td>Companion Package to "Dynamic Prediction in Clinical Survival
Analysis"</td>
</tr>
<tr>
<td>Author:</td>
<td>Hein Putter</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Hein Putter &lt;H.Putter@lumc.nl&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>survival</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>mstate</td>
</tr>
<tr>
<td>Description:</td>
<td>The dynpred package contains functions for dynamic prediction in survival analysis.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://www.msbi.nl/putter">http://www.msbi.nl/putter</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2015-07-13 19:19:38 UTC; hein</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2015-07-13 21:22:03</td>
</tr>
</table>
<hr>
<h2 id='AUC'>Calculate AUC(t) curve</h2><span id='topic+AUC'></span>

<h3>Description</h3>

<p>Calculate model-free curve of Area Under the Curve values over time, based
on the dynamic/incident AUC of Heagerty and Zheng.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AUC(formula, data, plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AUC_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="AUC_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="AUC_+3A_plot">plot</code></td>
<td>
<p>Determines whether the AUC function should be plotted (if
<code>TRUE</code> (default)) along with a <code><a href="stats.html#topic+lowess">lowess</a></code> curve or not (if
<code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements </p>
<table>
<tr><td><code>AUCt</code></td>
<td>
<p>A data frame with time t in column
<code>time</code> and AUC(t) in column <code>AUC</code></p>
</td></tr> <tr><td><code>AUC</code></td>
<td>
<p>The AUC(t) weighted
by Y(t)-1, with Y(t) the number at risk at t; this coincides with Harrell's
c-index</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Harrell FE, Lee KL &amp; Mark DB (1996), Multivariable prognostic
models: issues in developing models, evaluating assumptions and adequacy,
and measuring and reducing errors, Statistics in Medicine 15, 361-387.
</p>
<p>Heagerty PJ &amp; Zheng Y (2005), Survival model predictive accuracy and ROC
curves, Biometrics 61, 92-105.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
AUC(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova)
</code></pre>

<hr>
<h2 id='AUCw'>Calculate dynamic AUC(t) curve</h2><span id='topic+AUCw'></span>

<h3>Description</h3>

<p>Calculate dynamic model-free curve of Area Under the Curve values over time,
based on the dynamic/incident AUC of Heagerty and Zheng.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AUCw(formula, data, width)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AUCw_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="AUCw_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="AUCw_+3A_width">width</code></td>
<td>
<p>Width of the window</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>time</code></td>
<td>
<p>The time points t at which
AUCw(t) changes value (either t or t+width is an event time point)</p>
</td></tr>
<tr><td><code>AUCw</code></td>
<td>
<p>The AUCw(t) function</p>
</td></tr></table>
<p> and with attribute <code>"width"</code> given as
input.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in
Clinical Survival Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
AUCw(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova,
  width = 2)
</code></pre>

<hr>
<h2 id='cindex'>Calculate Harrell's c-index</h2><span id='topic+cindex'></span>

<h3>Description</h3>

<p>This function calculates Harrell's c-index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cindex(formula, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cindex_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="cindex_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements </p>
<table>
<tr><td><code>concordant</code></td>
<td>
<p>The number of concordant
pairs</p>
</td></tr> <tr><td><code>total</code></td>
<td>
<p>The total number of pairs that can be evaluated</p>
</td></tr>
<tr><td><code>cindex</code></td>
<td>
<p>Harrell's c-index</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Harrell FE, Lee KL &amp; Mark DB (1996), Multivariable prognostic
models: issues in developing models, evaluating assumptions and adequacy,
and measuring and reducing errors, Statistics in Medicine 15, 361-387.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
cindex(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova)
</code></pre>

<hr>
<h2 id='cutLM'>Create landmark data set</h2><span id='topic+cutLM'></span>

<h3>Description</h3>

<p>Create landmark data set from original data, which can be either in wide or
long format, see details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cutLM(data, outcome, LM, horizon, covs, format = c("wide", "long"), id, rtime,
  right = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cutLM_+3A_data">data</code></td>
<td>
<p>Data frame from which to construct landmark dataset</p>
</td></tr>
<tr><td><code id="cutLM_+3A_outcome">outcome</code></td>
<td>
<p>List with items <code>time</code> and <code>status</code>, containing
character strings identifying the names of time and status variables,
respectively, of the survival outcome</p>
</td></tr>
<tr><td><code id="cutLM_+3A_lm">LM</code></td>
<td>
<p>Scalar, the value of the landmark time point</p>
</td></tr>
<tr><td><code id="cutLM_+3A_horizon">horizon</code></td>
<td>
<p>Scalar, the value of the horizon. Administrative censoring is
applied at <code>horizon</code>.</p>
</td></tr>
<tr><td><code id="cutLM_+3A_covs">covs</code></td>
<td>
<p>List with items <code>fixed</code> and <code>varying</code>, containing
character strings specifying column names in the data containing time-fixed
and time-varying covariates, respectively</p>
</td></tr>
<tr><td><code id="cutLM_+3A_format">format</code></td>
<td>
<p>Character string specifying whether the original data are in
wide (default) or in long format</p>
</td></tr>
<tr><td><code id="cutLM_+3A_id">id</code></td>
<td>
<p>Character string specifying the column name in <code>data</code>
containing the subject id; only needed if <code>format="long"</code></p>
</td></tr>
<tr><td><code id="cutLM_+3A_rtime">rtime</code></td>
<td>
<p>Character string specifying the column name in <code>data</code>
containing the (running) time variable associated with the time-varying
covariate(s); only needed if <code>format="long"</code></p>
</td></tr>
<tr><td><code id="cutLM_+3A_right">right</code></td>
<td>
<p>Boolean (default=<code>TRUE</code>), indicating if the intervals for
the time-varying covariates are closed on the right (and open on the left)
or vice versa, see <code><a href="base.html#topic+cut">cut</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a given landmark time point <code>LM</code>, patients who have reached the
event of interest (outcome) or are censored before or at <code>LM</code> are
removed. Administrative censoring is applied at the time horizon.
Time-varying covariates are evaluated at the landmark time point <code>LM</code>.
Time-varying covariates can be specified in the <code>varying</code> item of the
<code>covs</code> argument, in two ways. In the first way (data in long format)
different values of time-dependent covariate(s) are stored different rows of
the data, with <code>id</code> identifying which values belong to the same
subject; the column specified through <code>rtime</code> then contains the time
points at which the value of the covariate changes value; with
<code>right=TRUE</code> (default), it is assumed that the covariate changes value
at the time point specified in <code>rtime</code> (and hence is not used for
prediction of an event at <code>rtime</code>), while with <code>right=FALSE</code>, it
is assumed that the covariate changes value just before the time point
specified in <code>rtime</code>. The second way (data in wide format) can only be
used for a specific type of time-varying covariates, often used to model
whether some other event has occurred or not, namely those that change value
from 0 (event not yet occurred) to 1 (event has occurred).
</p>


<h3>Value</h3>

<p>A landmark data set, containing the outcome and the values of
time-fixed and time-varying covariates taken at the landmark time points.
The value of the landmark time point is stored in column <code>LM</code>.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in
Clinical Survival Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test0 &lt;- data.frame(id=c(1,1,1,2,2,2),survyrs=c(2.3,2.3,2.3,2.7,2.7,2.7),
  survstat=c(1,1,1,0,0,0),age=c(76,76,76,68,68,68),gender=c(1,1,1,2,2,2),
  bp=c(80,84,88,92,90,89),bptime=c(1,2,2.2,0,1,2))
cutLM(test0, outcome=list(time="survyrs", status="survstat"),
  LM=1, horizon=2.5, covs=list(fixed=c("age","gender"),varying="bp"),
  format="long", id="id", rtime="bptime")
# Note how the previous example does not use the value of the time-varying
# covariate AT time=LM, only just before (if available). This is in line
# with the time-varying covariates being predictable.
# If you want the value of the time-varying covariate at time=LM if it
# changes value at LM, then use right=FALSE
cutLM(test0, outcome=list(time="survyrs", status="survstat"),
  LM=1, horizon=2.5, covs=list(fixed=c("age","gender"),varying="bp"),
  format="long", id="id", rtime="bptime", right=FALSE)

# An example of a time-varying covariate in wide format; recyrs and recstat
# are time and status of a (cancer) recurrence. Here it is assumed that the
# value of the time-varying covariate is 0 and changes value to 1 at recyrs.
# The status variable is not used!
test1 &lt;- data.frame(id=1:4,survyrs=c(7.6,8.4,5.3,2.6),survstat=c(0,1,1,0),
  age=c(48,52,76,18),gender=c(1,2,2,1),recyrs=c(7.6,5.2,0.8,2.6),
  recstat=c(0,1,1,0))
cutLM(test1, outcome=list(time="survyrs", status="survstat"),
  LM=3, horizon=8, covs=list(fixed=c("id","age","gender"),varying="recyrs"))

# The same example in long format, similar to (but not the same as) the way
# one would use a time-varying covariate in long format.
test2 &lt;- data.frame(id=c(1,2,2,3,3,4),survyrs=c(7.6,8.4,8.4,5.3,5.3,2.6),
  survstat=c(0,1,1,1,1,0),age=c(48,52,52,76,76,18),gender=c(1,2,2,2,2,1),
  rec=c(0,0,1,0,1,0),rectime=c(0,0,5.2,0,0.8,0))
cutLM(test2, outcome=list(time="survyrs", status="survstat"),
  LM=3, horizon=8, covs=list(fixed=c("age","gender"),varying="rec"),
  format="long", id="id", rtime="rectime")
</code></pre>

<hr>
<h2 id='CVcindex'>Calculate cross-validated c-index</h2><span id='topic+CVcindex'></span>

<h3>Description</h3>

<p>This function calculates cross-validated versions of Harrell's c-index.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CVcindex(formula, data, type = "single", matrix = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CVcindex_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="CVcindex_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="CVcindex_+3A_type">type</code></td>
<td>
<p>One of <code>"single"</code>, <code>"pair"</code> or <code>"fullpairs"</code>. For
<code>"single"</code> (default), the prognostic index Z_i is replaced by Z_i,(-i),
for <code>"pair"</code>, two assessments of concordance are made for each pair
(i,j), one using Z_i,(-i) and Z_j,(-i), the other using Z_i,(-j) and
Z_j,(-j), for <code>"fullpairs"</code>, each of the possible pairs is left out and
comparison is based on Z_i,(-i,-j) and Z_j,(-i,-j)</p>
</td></tr>
<tr><td><code id="CVcindex_+3A_matrix">matrix</code></td>
<td>
<p>if <code>TRUE</code>, the matrix of cross-validated prognostic
indices is also returned; default is <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with elements </p>
<table>
<tr><td><code>concordant</code></td>
<td>
<p>The number of concordant
pairs</p>
</td></tr> <tr><td><code>total</code></td>
<td>
<p>The total number of pairs that can be evaluated</p>
</td></tr>
<tr><td><code>cindex</code></td>
<td>
<p>The cross-validated c-index</p>
</td></tr> <tr><td><code>matrix</code></td>
<td>
<p>Matrix of
cross-validated prognostic indices (only if argument <code>matrix</code> is
<code>TRUE</code></p>
</td></tr></table>
<p> and with attribute <code>"type"</code> as given as input.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Harrell FE, Lee KL &amp; Mark DB (1996), Multivariable prognostic
models: issues in developing models, evaluating assumptions and adequacy,
and measuring and reducing errors, Statistics in Medicine 15, 361-387.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
# Real thing takes a long time, so on a smaller data set
ova2 &lt;- ova[1:100,]
# Actual c-index
cindex(Surv(tyears,d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova2)
# Cross-validated c-indices
CVcindex(Surv(tyears,d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova2)
CVcindex(Surv(tyears,d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova2,
         type="pair")

CVcindex(Surv(tyears,d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova2,
         type="fullpairs")

</code></pre>

<hr>
<h2 id='CVPL'>Calculate cross-validated log-partial likelihood (with shrinkage)</h2><span id='topic+CVPL'></span>

<h3>Description</h3>

<p>This function calculates the cross-validated log partial likelihood, with
shrinkage if requested.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CVPL(formula, data, progress = TRUE, overall = FALSE, shrink = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CVPL_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="CVPL_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="CVPL_+3A_progress">progress</code></td>
<td>
<p>if <code>TRUE</code> (default), progress of the cross-validation
will be printed</p>
</td></tr>
<tr><td><code id="CVPL_+3A_overall">overall</code></td>
<td>
<p>if <code>TRUE</code>, <code>CVPL</code> uses regression coefficient
estimates based on the full data, for each observation i, rather than the
estimates based on data minus i</p>
</td></tr>
<tr><td><code id="CVPL_+3A_shrink">shrink</code></td>
<td>
<p>Shrinkage factor; default is 1 (no shrinkage)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric; the cross-validated log partial likelihood
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Verweij PJM &amp; van Houwelingen HC (1994), Penalized likelihood in
Cox regression, Statistics in Medicine 13, 2427-2436.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
CVPL(Surv(tyears, d) ~ 1, data = ova)
CVPL(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam,
  data = ova)
CVPL(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam,
  data = ova, overall=TRUE)
</code></pre>

<hr>
<h2 id='deb'>Debugging function</h2><span id='topic+deb'></span>

<h3>Description</h3>

<p>A simple but useful debugging function. It first announces the object to
printed and then prints it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deb(x, method = c("print", "cat"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deb_+3A_x">x</code></td>
<td>
<p>The object to be printed</p>
</td></tr>
<tr><td><code id="deb_+3A_method">method</code></td>
<td>
<p>The method for printing <code>x</code>. Default is <code>"print"</code>,
which uses <code><a href="base.html#topic+print">print</a></code> for printing; <code>"cat"</code> uses
<code><a href="base.html#topic+cat">cat</a></code> for printing. The latter is useful for short objects
(scalar and vectors), the former for more structured objects (data frames,
matrices, lists etc).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tm &lt;- c(0.2,0.5,1,1.2,1.8,4)
ta &lt;- 2*tm
dfr &lt;- data.frame(time=tm, stepf=ta)
deb(dfr, method="print")
deb(tm, method="cat")
</code></pre>

<hr>
<h2 id='dynpred-package'>The companion package of the book &quot;Dynamic Prediction in Survival Analysis&quot;</h2><span id='topic+dynpred'></span><span id='topic+dynpred-package'></span>

<h3>Description</h3>

<p>The companion package of the book &quot;Dynamic Prediction in Survival Analysis&quot;.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;"> Package: </td><td style="text-align: left;"> dynpred</td>
</tr>
<tr>
 <td style="text-align: left;"> Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;"> Version: </td><td style="text-align: left;">
0.1.2</td>
</tr>
<tr>
 <td style="text-align: left;"> Date: </td><td style="text-align: left;"> 2014-11-10</td>
</tr>
<tr>
 <td style="text-align: left;"> License: </td><td style="text-align: left;"> GPL (&gt;= 2)</td>
</tr>
<tr>
 <td style="text-align: left;"> </td>
</tr>

</table>
<p> An overview
of how to use the package, including the most important functions.
</p>


<h3>Author(s)</h3>

<p>Hein Putter Maintainer: Hein Putter &lt;H.Putter@lumc.nl&gt;
</p>


<h3>References</h3>

<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in
Clinical Survival Analysis. Chapman &amp; Hall.
</p>

<hr>
<h2 id='EBMT+20data'>Data from the European Society for Blood and Marrow Transplantation (EBMT)</h2><span id='topic+ALL'></span><span id='topic+EBMT+20data'></span>

<h3>Description</h3>

<p>Data from the European Society for Blood and Marrow Transplantation (EBMT)
</p>


<h3>Format</h3>

<p>A data frame of 2279 patients transplanted at the EBMT between 1985 and
1998. These data were used in Fiocco, Putter &amp; van Houwelingen (2008) and
van Houwelingen &amp; Putter (2008). The included variables are </p>

<dl>
<dt>id</dt><dd><p>Patient identification number</p>
</dd> <dt>rec</dt><dd><p>Time in days from
transplantation to recovery or last follow-up</p>
</dd> <dt>rec.s</dt><dd><p>Recovery status;
1 = recovery, 0 = censored</p>
</dd> <dt>ae</dt><dd><p>Time in days from transplantation to
adverse event (AE) or last follow-up</p>
</dd> <dt>ae.s</dt><dd><p>Adverse event status; 1 =
adverse event, 0 = censored</p>
</dd> <dt>recae</dt><dd><p>Time in days from transplantation
to both recovery and AE or last follow-up</p>
</dd> <dt>plag.s</dt><dd><p>Recovery and AE
status; 1 = both recovery and AE, 0 = no recovery or no AE or censored</p>
</dd>
<dt>rel</dt><dd><p>Time in days from transplantation to relapse or last follow-up</p>
</dd>
<dt>rel.s</dt><dd><p>Relapse status; 1 = relapse, 0 = censored</p>
</dd> <dt>srv</dt><dd><p>Time in
days from transplantation to death or last follow-up</p>
</dd> <dt>srv.s</dt><dd><p>Relapse
status; 1 = dead, 0 = censored</p>
</dd> <dt>year</dt><dd><p>Year of transplantation; factor
with levels &quot;1985-1989&quot;, &quot;1990-1994&quot;, &quot;1995-1998&quot;</p>
</dd> <dt>agecl</dt><dd><p>Patient age
at transplant; factor with levels &quot;&lt;=20&quot;, &quot;20-40&quot;, &quot;&gt;40&quot;</p>
</dd>
<dt>proph</dt><dd><p>Prophylaxis; factor with levels &quot;no&quot;, &quot;yes&quot;</p>
</dd>
<dt>match</dt><dd><p>Donor-recipient gender match; factor with levels &quot;no gender
mismatch&quot;, &quot;gender mismatch&quot;</p>
</dd> </dl>


<h3>Source</h3>

<p>We gratefully acknowledge the European Society for Blood and Marrow
Transplantation (EBMT) for making available these data. Disclaimer: these
data were simplified for the purpose of illustration of the analysis of
competing risks and multi-state models and do not reflect any real life
situation. No clinical conclusions should be drawn from these data.
</p>


<h3>References</h3>

<p>Fiocco M, Putter H, van Houwelingen HC (2008). Reduced-rank
proportional hazards regression and simulation-based prediction for
multi-state models. <em>Statistics in Medicine</em> <b>27</b>, 4340&ndash;4358.
</p>
<p>van Houwelingen HC, Putter H (2008). Dynamic predicting by landmarking as an
alternative for multi-state modeling: an application to acute lymphoid
leukemia data. <em>Lifetime Data Anal</em> <b>14</b>, 447&ndash;463.
</p>

<hr>
<h2 id='evalstep'>Evaluate step function at a set of new time points</h2><span id='topic+evalstep'></span>

<h3>Description</h3>

<p>Given one or more right-continuous step functions of time, given by vector
<code>time</code> and vector of matrix <code>stepf</code>, this function evaluates the
step function(s) at a vector of new time points given by <code>newtime</code>.
Typical application is when the step function is given by a non- or
semi-parametric estimated of cumulative hazard or survival function, and the
value of this function is required at a set of time points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalstep(time, stepf, newtime, subst = -Inf, to.data.frame = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evalstep_+3A_time">time</code></td>
<td>
<p>A vector of time points at which the step function changes value</p>
</td></tr>
<tr><td><code id="evalstep_+3A_stepf">stepf</code></td>
<td>
<p>A vector (of the same length as <code>time</code>) or a matrix (with
no of columns equal to the length of <code>time</code>) containing the values of
the step function(s) at the time points</p>
</td></tr>
<tr><td><code id="evalstep_+3A_newtime">newtime</code></td>
<td>
<p>A vector of time points at which the step function(s) is/are
to be evaluated</p>
</td></tr>
<tr><td><code id="evalstep_+3A_subst">subst</code></td>
<td>
<p>A value that is substituted for elements of <code>newtime</code> that
are smaller than the minimum of <code>time</code>. Default value is <code>-Inf</code></p>
</td></tr>
<tr><td><code id="evalstep_+3A_to.data.frame">to.data.frame</code></td>
<td>
<p>Determines whether the output is a data frame with the
new time points and the values of the step function(s) (if <code>TRUE</code>) or a
vector/matrix with the values of the step function(s) (if <code>FALSE</code>
(default))</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>time</code> should be ordered, and not contain duplicated or
+/- Inf, and should be of the same length as <code>stepf</code>. There are no
restrictions on ordering or duplicates of <code>newtime</code>. For elements of
<code>newtime</code> that are smaller than the minimum of <code>time</code>, the value
of <code>subst</code> is substituted.
</p>


<h3>Value</h3>

<p>Either a vector/matrix containing the step function(s) evaluated at
the new time points (if <code>to.data.frame=FALSE</code> (default)), or a data
frame with column vectors <code>newtime</code> containing the new time points and
<code>res</code> containing the step function evaluated at the new time points (if
<code>to.data.frame=TRUE</code>)
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tm &lt;- c(0.2,0.5,1,1.2,1.8,4)
ta &lt;- 2*tm
data.frame(time=tm, stepf=ta)
evalstep(time=tm, stepf=ta, newtime=c(0,0.2,0.3,0.6,1,1.5,3,4,5,0.1), subst=0)
evalstep(time=tm, stepf=data.frame(ta=ta,ta2=1/ta),
	newtime=c(0,0.2,0.3,0.6,1,1.5,3,4,5,0.1), subst=0)
</code></pre>

<hr>
<h2 id='Fwindow'>Calculate dynamic &quot;death within window&quot; curve</h2><span id='topic+Fwindow'></span>

<h3>Description</h3>

<p>Calculate dynamic &quot;death within window&quot; curve, in other words, one minus
fixed width conditional survival curves, defined as P(T&lt;=t+w|T&gt;t), for a
fixed window width w.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Fwindow(object, width, variance = TRUE, conf.level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Fwindow_+3A_object">object</code></td>
<td>
<p><code><a href="survival.html#topic+survfit">survfit</a></code> object, use
type=&quot;aalen&quot;</p>
</td></tr>
<tr><td><code id="Fwindow_+3A_width">width</code></td>
<td>
<p>Width of the window</p>
</td></tr>
<tr><td><code id="Fwindow_+3A_variance">variance</code></td>
<td>
<p>Boolean (default=<code>TRUE</code>); should pointwise confidence
interval of the probabilities be calculated?</p>
</td></tr>
<tr><td><code id="Fwindow_+3A_conf.level">conf.level</code></td>
<td>
<p>The confidence level, between 0 and 1 (default=0.95)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>&quot;Die within window function&quot; with window w, Fw(t) = P(T&lt;=t+w|T&gt;t), evaluated
at all time points t where the estimate changes value, and associated
pointwise confidence intervals (if <code>variance</code>=<code>TRUE</code>).
</p>
<p>Both estimate and pointwise lower and upper confidence intervals are based
on the negative exponential of the Nelson-Aalen estimate of the cumulative
hazard, so P(T&lt;=t+w|T&gt;t) is estimated as exp(- int_t^t+w hatH_NA(s) ds),
with hatH_NA the non-parametric Nelson-Aalen estimate.
</p>
<p>Note: in <code>object</code>, no event time points at or below zero allowed
</p>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>time</code></td>
<td>
<p>The time points t at which
Fw(t) changes value (either t or t+width is an event time point)</p>
</td></tr>
<tr><td><code>Fw</code></td>
<td>
<p>The Fw(t) function</p>
</td></tr> <tr><td><code>low</code></td>
<td>
<p>Lower end of confidence interval</p>
</td></tr>
<tr><td><code>up</code></td>
<td>
<p>Upper end of confidence interval</p>
</td></tr></table>
<p> and with attribute
<code>"width"</code> as given as input.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in
Clinical Survival Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wbc1)
c0 &lt;- coxph(Surv(tyears, d) ~ 1, data = wbc1, method="breslow")
sf0 &lt;- survfit(c0)
Fw &lt;- Fwindow(sf0,4)
</code></pre>

<hr>
<h2 id='NKI+20breast+20cancer+20clinical+20data'>Clinical and follow-up data of breast cancer patients as collected in the
Dutch Cancer Institute (NKI) in Amsterdam</h2><span id='topic+NKI+20breast+20cancer+20clinical+20data'></span><span id='topic+nki'></span>

<h3>Description</h3>

<p>A data frame of 295 patients with breast cancer. The included variables are
</p>
 <dl>
<dt>patnr</dt><dd><p>Patient identification number</p>
</dd> <dt>d</dt><dd><p>Survival
status; 1 = death; 0 = censored</p>
</dd> <dt>tyears</dt><dd><p>Time in years until death or
last follow-up</p>
</dd> <dt>diameter</dt><dd><p>Diameter of the primary tumor</p>
</dd>
<dt>posnod</dt><dd><p>Number of positive lymph nodes</p>
</dd> <dt>age</dt><dd><p>Age of the patient</p>
</dd>
<dt>mlratio</dt><dd><p>Estrogen level?</p>
</dd> <dt>chemotherapy</dt><dd><p>Chemotherapy used
(yes/no)</p>
</dd> <dt>hormonaltherapy</dt><dd><p>Hormonal therapy used (yes/no)</p>
</dd>
<dt>typesurgery</dt><dd><p>Type of surgery (excision or mastectomy)</p>
</dd>
<dt>histolgrade</dt><dd><p>Histological grade (Intermediate, poorly, or well
differentiated)</p>
</dd> <dt>vasc.invasion</dt><dd><p>Vascular invasion (-, +, or +/-)</p>
</dd>
<dt>crossval.clin.class</dt><dd><p>??</p>
</dd> <dt>PICV</dt><dd><p>Estrogen level?</p>
</dd> </dl>



<h3>Format</h3>

<p>A data frame, see <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>


<h3>References</h3>

<p>van't Veer LJ, Dai HY, van de Vijver MJ, He YDD, Hart AAM, Mao
M, Peterse HL, van der Kooy K, Marton MJ, Witteveen AT, Schreiber GJ,
Kerkhoven RM, Roberts C, Linsley PS, Bernards R \&amp; Friend SH (2002). Gene
expression profiling predicts clinical outcome of breast cancer.
<em>Nature</em> <b>415</b>, 530&ndash;536.
</p>
<p>van de Vijver MJ, He YD, van 't Veer LJ, Dai H, Hart AAM, Voskuil DW,
Schreiber GJ, Peterse JL, Roberts C, Marton MJ, Parrish M, Atsma D,
Witteveen A, Glas A, Delahaye L, van der Velde T, Bartelink H, Rodenhuis S,
Rutgers ET, Friend SH \&amp; Bernards R (2002). A gene-expression signature as a
predictor of survival in breast cancer. <em>New England Journal of
Medicine</em> <b>347</b>, 1999&ndash;2009.
</p>
<p>van Houwelingen HC, Bruinsma T, Hart AAM, van't Veer LJ \&amp; Wessels LFA
(2006).  Cross-validated Cox regression on microarray gene expression data.
<em>Statistics in Medicine</em> <b>25</b>, 3201&ndash;3216.
</p>

<hr>
<h2 id='Ovarian+20cancer+20data'>Data originate from two clinical trials on the use of different combination
chemotherapies, carried out in The Netherlands around 1980</h2><span id='topic+Ovarian+20cancer+20data'></span><span id='topic+ova'></span>

<h3>Description</h3>

<p>A data frame of 358 patients with ovarian cancer. The included variables are
</p>
 <dl>
<dt>tyears</dt><dd><p>Time in years until death or last follow-up</p>
</dd>
<dt>d</dt><dd><p>Survival status; 1 = death; 0 = censored</p>
</dd> <dt>Karn</dt><dd><p>Karnofsky
score</p>
</dd> <dt>Broders</dt><dd><p>Broders score: factor with levels &quot;unknown&quot;, &quot;1&quot;, &quot;2&quot;,
&quot;3&quot;, &quot;4&quot;</p>
</dd> <dt>FIGO</dt><dd><p>FIGO stage; factor with levels &quot;III&quot;, &quot;IV&quot;</p>
</dd>
<dt>Ascites</dt><dd><p>Presence of ascires; factor with levels &quot;unknown&quot;, &quot;absent&quot;,
&quot;present&quot;</p>
</dd> <dt>Diam</dt><dd><p>Diameter of the tumor; factor with levels &quot;micr.&quot;,
&quot;&lt;1cm&quot;, &quot;1-2cm&quot;, &quot;2-5cm&quot;, &quot;&gt;5cm&quot;</p>
</dd> </dl>



<h3>Format</h3>

<p>A data frame, see <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>


<h3>References</h3>

<p>Neijt, J. P., ten Bokkel Huinink, W. W., van der Burg, M. E.,
van Oosterom, A. T., Vriesendorp, R., Kooyman, C. D., van Lindert, A. C.,
Hamerlynck, J. V., van Lent, M. &amp; van Houwelingen, J. C. (1984), 'Randomised
trial comparing two combination chemotherapy regimens (Hexa-CAF vs CHAP- 5)
in advanced ovarian carcinoma', Lancet 2, 594&ndash;600.
</p>
<p>Neijt, J. P., ten Bokkel Huinink, W. W., van der Burg, M. E., van Oosterom,
A. T., Willemse, P. H., Heintz, A. P., van Lent, M., Trimbos, J. B., Bouma,
J. &amp; Vermorken, J. B. (1987), 'Randomized trial comparing two combination
chemotherapy regimens (CHAP-5 vs CP) in advanced ovarian carcinoma', Journal
of Clinical Oncology 5, 1157&ndash;1168.
</p>
<p>van Houwelingen, J. C., ten Bokkel Huinink, W. W., van der Burg, M. E., van
Oosterom, A. T. &amp; Neijt, J. P. (1989), 'Predictability of the survival of
patients with advanced ovarian cancer.', Journal of Clinical Oncology 7,
769&ndash;773.
</p>

<hr>
<h2 id='pe'>Calculate prediction error curve</h2><span id='topic+pe'></span><span id='topic+pecox'></span>

<h3>Description</h3>

<p>Calculate prediction error curve.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pe(time, status, tsurv, survmat, tcens, censmat, FUN = c("KL", "Brier"), tout)

pecox(formula, censformula, data, censdata, FUN = c("KL", "Brier"), tout,
  CV = FALSE, progress = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pe_+3A_time">time</code></td>
<td>
<p>Vector of time points in data</p>
</td></tr>
<tr><td><code id="pe_+3A_status">status</code></td>
<td>
<p>Vector of event indicators in data</p>
</td></tr>
<tr><td><code id="pe_+3A_tsurv">tsurv</code></td>
<td>
<p>Vector of time points corresponding to the estimated survival
probabilities in <code>survmat</code></p>
</td></tr>
<tr><td><code id="pe_+3A_survmat">survmat</code></td>
<td>
<p>Matrix of estimated survival probabilities; dimension should
be length of tsurv x length of time</p>
</td></tr>
<tr><td><code id="pe_+3A_tcens">tcens</code></td>
<td>
<p>Vector of time points corresponding to the estimated censoring
probabilities in <code>censmat</code></p>
</td></tr>
<tr><td><code id="pe_+3A_censmat">censmat</code></td>
<td>
<p>Matrix of estimated censoring probabilities; dimension should
be length of tcens x length of time</p>
</td></tr>
<tr><td><code id="pe_+3A_fun">FUN</code></td>
<td>
<p>The error function, either <code>"KL"</code> (default) for
Kullback-Leibler or <code>"Brier"</code> for Brier score</p>
</td></tr>
<tr><td><code id="pe_+3A_tout">tout</code></td>
<td>
<p>Vector of time points at which to evaluate prediction error. If
missing, prediction error will be evaluated at all time points where the
estimate will change value</p>
</td></tr>
<tr><td><code id="pe_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="pe_+3A_censformula">censformula</code></td>
<td>
<p>Formula for censoring model, also to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="pe_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret <code>formula</code></p>
</td></tr>
<tr><td><code id="pe_+3A_censdata">censdata</code></td>
<td>
<p>Data set in which to interpret <code>censformula</code></p>
</td></tr>
<tr><td><code id="pe_+3A_cv">CV</code></td>
<td>
<p>Boolean (default=<code>FALSE</code>); if <code>TRUE</code>, (leave-one-out)
cross-validation is used for the survival probabilities</p>
</td></tr>
<tr><td><code id="pe_+3A_progress">progress</code></td>
<td>
<p>Boolean (default=<code>FALSE</code>); if <code>TRUE</code>, progress is
printed on screen</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>censformula</code> is used to calculate inverse probability of censoring
weights (IPCW).
</p>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>time</code></td>
<td>
<p>Event time points</p>
</td></tr>
<tr><td><code>Err</code></td>
<td>
<p>Prediction error of model specified by <code>formula</code> at these
time points</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Graf E, Schmoor C, Sauerbrei W &amp; Schumacher M (1999), Assessment
and comparison of prognostic classification schemes for survival data,
Statistics in Medicine 18, 2529-2545.
</p>
<p>Gerds &amp; Schumacher (2006), Consistent estimation of the expected Brier score
in general survival models with right-censored event times, Biometrical
Journal 48, 1029-1040.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
# Example on a subset, because the effect of CV is clearer
ova2 &lt;- ova[1:100,]
pecox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  data = ova2, FUN="Brier", tout=seq(0,6,by=0.5))
pecox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  data = ova2, FUN="Brier", tout=seq(0,6,by=0.5), CV=TRUE, progress=TRUE)


pecox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  data = ova, FUN="Brier", tout=seq(0,6,by=0.5))
pecox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  data = ova, FUN="Brier", tout=seq(0,6,by=0.5), CV=TRUE, progress=TRUE)

</code></pre>

<hr>
<h2 id='pew'>Calculate dynamic prediction error curve</h2><span id='topic+pew'></span><span id='topic+pewcox'></span>

<h3>Description</h3>

<p>Calculate dynamic fixed width prediction error curve.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pew(time, status, tsurv, survmat, tcens, censmat, width, FUN = c("KL",
  "Brier"), tout)

pewcox(formula, censformula, width, data, censdata, FUN = c("KL", "Brier"),
  tout, CV = FALSE, progress = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pew_+3A_time">time</code></td>
<td>
<p>Vector of time points in data</p>
</td></tr>
<tr><td><code id="pew_+3A_status">status</code></td>
<td>
<p>Vector of event indicators in data</p>
</td></tr>
<tr><td><code id="pew_+3A_tsurv">tsurv</code></td>
<td>
<p>Vector of time points corresponding to the estimated survival
probabilities in <code>survmat</code></p>
</td></tr>
<tr><td><code id="pew_+3A_survmat">survmat</code></td>
<td>
<p>Matrix of estimated survival probabilities; dimension should
be length of tsurv x length of time</p>
</td></tr>
<tr><td><code id="pew_+3A_tcens">tcens</code></td>
<td>
<p>Vector of time points corresponding to the estimated censoring
probabilities in <code>censmat</code></p>
</td></tr>
<tr><td><code id="pew_+3A_censmat">censmat</code></td>
<td>
<p>Matrix of estimated censoring probabilities; dimension should
be length of tcens x length of time</p>
</td></tr>
<tr><td><code id="pew_+3A_width">width</code></td>
<td>
<p>Width of the window</p>
</td></tr>
<tr><td><code id="pew_+3A_fun">FUN</code></td>
<td>
<p>The error function, either <code>"KL"</code> (default) for
Kullback-Leibler or <code>"Brier"</code> for Brier score</p>
</td></tr>
<tr><td><code id="pew_+3A_tout">tout</code></td>
<td>
<p>Vector of time points at which to evaluate prediction error. If
missing, prediction error will be evaluated at all time points where the
estimate will change value</p>
</td></tr>
<tr><td><code id="pew_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="pew_+3A_censformula">censformula</code></td>
<td>
<p>Formula for censoring model, also to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="pew_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret <code>formula</code></p>
</td></tr>
<tr><td><code id="pew_+3A_censdata">censdata</code></td>
<td>
<p>Data set in which to interpret <code>censformula</code></p>
</td></tr>
<tr><td><code id="pew_+3A_cv">CV</code></td>
<td>
<p>Boolean (default=<code>FALSE</code>); if <code>TRUE</code>, (leave-one-out)
cross-validation is used for the survival probabilities</p>
</td></tr>
<tr><td><code id="pew_+3A_progress">progress</code></td>
<td>
<p>Boolean (default=<code>FALSE</code>); if <code>TRUE</code>, progress is
printed on screen</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Corresponds to Equation (3.6) in van Houwelingen and Putter (2011). The
<code>censformula</code> is used to calculate inverse probability of censoring
weights (IPCW).
</p>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>time</code></td>
<td>
<p>Event time points</p>
</td></tr>
<tr><td><code>Err</code></td>
<td>
<p>Prediction error of model specified by <code>formula</code> at these
time points</p>
</td></tr></table>
<p> and with attribute <code>"width"</code> given as input.
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in
Clinical Survival Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
# Example on a subset, because the effect of CV is clearer
ova2 &lt;- ova[1:100,]
pewcox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  width=2, data = ova2, FUN="Brier", tout=seq(0,6,by=0.5))
pewcox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  width=2, data = ova2, FUN="Brier", tout=seq(0,6,by=0.5), CV=TRUE, progress=TRUE)


pewcox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  width=2, data = ova, FUN="Brier", tout=seq(0,6,by=0.5))
pewcox(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, Surv(tyears, 1-d) ~ 1,
  width=2, data = ova, FUN="Brier", tout=seq(0,6,by=0.5), CV=TRUE, progress=TRUE)

</code></pre>

<hr>
<h2 id='scatterplot'>Create scatter plot with imputed survival times</h2><span id='topic+scatterplot'></span>

<h3>Description</h3>

<p>Create scatter plot with imputed survival times.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scatterplot(formula, data, horizon, plot = TRUE, xlab)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scatterplot_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="scatterplot_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="scatterplot_+3A_horizon">horizon</code></td>
<td>
<p>The horizon, maximum value to be imputed in case of censored
observations; default is 1.05 times largest event time</p>
</td></tr>
<tr><td><code id="scatterplot_+3A_plot">plot</code></td>
<td>
<p>Should the tolerance plot actually be plotted? Default is
<code>TRUE</code></p>
</td></tr>
<tr><td><code id="scatterplot_+3A_xlab">xlab</code></td>
<td>
<p>Label for x-axis</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Imputation is used for censored survival times.
</p>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>x</code></td>
<td>
<p>Predictor (centered at zero)</p>
</td></tr>
<tr><td><code>imputed</code></td>
<td>
<p>(Imputed) survival time</p>
</td></tr></table>
<p> and with attribute <code>"horizon"</code>
(copied from input or default).
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Royston P (2001), The lognormal distribution as a model for
survival time in cancer, with an emphasis on prognostic factors, Statistica
Neerlandica 55, 89-104.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
scatterplot(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova)
</code></pre>

<hr>
<h2 id='toleranceplot'>Create a tolerance plot</h2><span id='topic+toleranceplot'></span>

<h3>Description</h3>

<p>Create a tolerance plot according to the methods of Henderson, Jones &amp; Stare (2001)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toleranceplot(formula, data, coverage = 0.8, horizon, plot = TRUE, xlab)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toleranceplot_+3A_formula">formula</code></td>
<td>
<p>Formula for prediction model to be used as in
<code><a href="survival.html#topic+coxph">coxph</a></code></p>
</td></tr>
<tr><td><code id="toleranceplot_+3A_data">data</code></td>
<td>
<p>Data set in which to interpret the formula</p>
</td></tr>
<tr><td><code id="toleranceplot_+3A_coverage">coverage</code></td>
<td>
<p>The coverage for the tolerance intervals (default is 0.8)</p>
</td></tr>
<tr><td><code id="toleranceplot_+3A_horizon">horizon</code></td>
<td>
<p>The horizon, maximum value to be imputed in case of censored
observations; default is 1.05 times largest event time</p>
</td></tr>
<tr><td><code id="toleranceplot_+3A_plot">plot</code></td>
<td>
<p>Should the tolerance plot actually be plotted? Default is
<code>TRUE</code></p>
</td></tr>
<tr><td><code id="toleranceplot_+3A_xlab">xlab</code></td>
<td>
<p>Label for x-axis</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Warnings will be issued each time the survival curve corresponding to a
value of x never goes below (1-coverage)/2; these warnings may be ignored.
</p>


<h3>Value</h3>

<p>A data frame with columns </p>
<table>
<tr><td><code>x</code></td>
<td>
<p>Predictor (centered at zero)</p>
</td></tr>
<tr><td><code>lower</code></td>
<td>
<p>Lower bound of tolerance interval</p>
</td></tr> <tr><td><code>upper</code></td>
<td>
<p>Upper bound of
tolerance interval</p>
</td></tr></table>
<p> and with attributes <code>"coverage"</code> and
<code>"horizon"</code> (copied from input or default).
</p>


<h3>Author(s)</h3>

<p>Hein Putter <a href="mailto:H.Putter@lumc.nl">H.Putter@lumc.nl</a>
</p>


<h3>References</h3>

<p>Henderson R, Jones M &amp; Stare J (2001), Accuracy of point
predictions in survival analysis, Statistics in Medicine 20, 3083-3096.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Prediction in Clinical Survival
Analysis. Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ova)
toleranceplot(Surv(tyears, d) ~ Karn + Broders + FIGO + Ascites + Diam, data = ova)
</code></pre>

<hr>
<h2 id='WBC+20follow-up+20data'>Data from the Benelux CML study</h2><span id='topic+WBC+20follow-up+20data'></span><span id='topic+wbc1'></span>

<h3>Description</h3>

<p>A data frame of 210 patients with Chronic Myeloid Leukemia from the Benelux
CML study (Kluin-Nelemans et al. 1998). Data have been used in two
methodological papers, de Bruijne et al. (2001) and van Houwelingen (2007),
and in the book van Houwelingen \&amp; Putter (2011), especially Chapter 8. More
background is given in Appendix A.2 of van Houwelingen \&amp; Putter (2011).
Interest is in the time-dependent covariate White Blood Cell count (WBC).
Data set wbc1 contains the follow-up data and time-fixed covariates, while
<code><a href="#topic+wbc2">wbc2</a></code> contains the WBC measurements. The included variables in
wbc1 are </p>
 <dl>
<dt>patnr</dt><dd><p>Patient identification number</p>
</dd>
<dt>tyears</dt><dd><p>Time in years from randomization to death or last follow-up</p>
</dd>
<dt>d</dt><dd><p>Survival status; 1 = dead, 0 = censored</p>
</dd> <dt>sokal</dt><dd><p>Clinical
index based on spleen size, percentage of circulating blasts, platelet and
age at diagnosis</p>
</dd> <dt>age</dt><dd><p>Age at diagnosis</p>
</dd> </dl>



<h3>Format</h3>

<p>A data frame, see <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>


<h3>References</h3>

<p>Kluin-Nelemans JC, Delannoy A, Louwagie A, le Cessie S, Hermans
J, van der Burgh JF, Hagemeijer AM, van den Berghe H \&amp; Benelux CML Study
Group (1998). Randomized study on hydroxyurea alone versus hydroxyurea
combined with low-dose interferon-alpha 2b for chronic myeloid leukemia.
<em>Blood</em> <b>91</b>, 2713&ndash;2721.
</p>
<p>de Bruijne MHJ, le Cessie S, Kluin-Nelemans HC \&amp; van Houwelingen HC (2001).
On the use of Cox regression in the presence of an irregularly observed
time-dependent covariate. <em>Statistics in Medicine</em> <b>20</b>,
3817&ndash;3829.
</p>
<p>van Houwelingen HC (2007). Dynamic prediction by landmarking in event
history analysis. <em>Scandinavian Journal of Statistics</em> <b>34</b>,
70&ndash;85.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Predicting in Clinical Survival
Analysis. Chapman \&amp; Hall.
</p>

<hr>
<h2 id='WBC+20measurements+20data'>Data from the Benelux CML study</h2><span id='topic+WBC+20measurements+20data'></span><span id='topic+wbc2'></span>

<h3>Description</h3>

<p>A data frame of 210 patients with Chronic Myeloid Leukemia from the Benelux
CML study (Kluin-Nelemans et al. 1998). Data have been used in two
methodological papers, de Bruijne et al. (2001) and van Houwelingen (2007),
and in the book van Houwelingen \&amp; Putter (2011), especially Chapter 8. More
background is given in Appendix A.2 of van Houwelingen \&amp; Putter (2011).
Interest is in the time-dependent covariate White Blood Cell count (WBC).
Data set <code><a href="#topic+wbc1">wbc1</a></code> contains the follow-up data and time-fixed
covariates, while wbc2 contains the WBC measurements. The included variables
in wbc2 are </p>
 <dl>
<dt>patnr</dt><dd><p>Patient identification number</p>
</dd>
<dt>tyears</dt><dd><p>Time of WBC measurement in years from randomization</p>
</dd>
<dt>lwbc</dt><dd><p>Log-transformed and standardized WBC measurement, more
precisely, defined as lwbc=log10(wbc)-0.95</p>
</dd> </dl>



<h3>Format</h3>

<p>A data frame, see <code><a href="base.html#topic+data.frame">data.frame</a></code>.</p>


<h3>References</h3>

<p>Kluin-Nelemans JC, Delannoy A, Louwagie A, le Cessie S, Hermans
J, van der Burgh JF, Hagemeijer AM, van den Berghe H \&amp; Benelux CML Study
Group (1998). Randomized study on hydroxyurea alone versus hydroxyurea
combined with low-dose interferon-alpha 2b for chronic myeloid leukemia.
<em>Blood</em> <b>91</b>, 2713&ndash;2721.
</p>
<p>de Bruijne MHJ, le Cessie S, Kluin-Nelemans HC \&amp; van Houwelingen HC (2001).
On the use of Cox regression in the presence of an irregularly observed
time-dependent covariate. <em>Statistics in Medicine</em> <b>20</b>,
3817&ndash;3829.
</p>
<p>van Houwelingen HC (2007). Dynamic prediction by landmarking in event
history analysis. <em>Scandinavian Journal of Statistics</em> <b>34</b>,
70&ndash;85.
</p>
<p>van Houwelingen HC, Putter H (2012). Dynamic Predicting in Clinical Survival
Analysis. Chapman \&amp; Hall.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
