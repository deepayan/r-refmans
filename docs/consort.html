<!DOCTYPE html><html lang="en"><head><title>Help for package consort</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {consort}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#consort-package'><p>Create Consort diagram</p></a></li>
<li><a href='#add_box'><p>Add nodes</p></a></li>
<li><a href='#add_label_box'><p>Add a vertically aligned label nodes on the left side.</p></a></li>
<li><a href='#add_side_box'><p>Add a side node</p></a></li>
<li><a href='#add_split'><p>Add a splitting box</p></a></li>
<li><a href='#build_grid'><p>Build consort diagram</p></a></li>
<li><a href='#build_grviz'><p>Build consort diagram</p></a></li>
<li><a href='#connect_box'><p>Connect grob box with arrow.</p></a></li>
<li><a href='#consort_plot'><p>Self generating consort diagram</p></a></li>
<li><a href='#dispos.data'><p>Demo clinical trial disposition data</p></a></li>
<li><a href='#gen_text'><p>Generate label and bullet points</p></a></li>
<li><a href='#get_coords'><p>Get the coordinates of the textbox object</p></a></li>
<li><a href='#move_box'><p>Move a box grob</p></a></li>
<li><a href='#plot.consort'><p>Add methods to print function</p></a></li>
<li><a href='#textbox'><p>Create a box with text</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Create Consort Diagram</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>To make it easy to create CONSORT diagrams for the transparent reporting of participant allocation in randomized, controlled clinical trials. This is done by creating a standardized disposition data, and using this data as the source for the creation a standard CONSORT diagram. Human effort by supplying text labels on the node can also be achieved.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/adayim/consort/">https://github.com/adayim/consort/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/adayim/consort/issues">https://github.com/adayim/consort/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>grid</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, DiagrammeR, rmarkdown, covr,
stringi</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-03 21:06:34 UTC; alimd</td>
</tr>
<tr>
<td>Author:</td>
<td>Alim Dayim <a href="https://orcid.org/0000-0001-9998-7463"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alim Dayim &lt;ad938@cam.ac.uk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-04 13:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='consort-package'>Create Consort diagram</h2><span id='topic+consort-package'></span>

<h3>Description</h3>

<p>To make it easy to create CONSORT diagrams for the transparent reporting
of participant allocation in randomized, controlled clinical trials. This
is done by creating a standardized disposition data, and using this data
as the source for the creation a standard CONSORT diagram. Human effort
by supplying text labels on the node can also be achieved.
</p>

<hr>
<h2 id='add_box'>Add nodes</h2><span id='topic+add_box'></span>

<h3>Description</h3>

<p>Create/add vertically aligned labeled nodes or side nodes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_box(
  prev_box = NULL,
  txt,
  just = c("center", "left", "right"),
  text_width = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_box_+3A_prev_box">prev_box</code></td>
<td>
<p>Previous node object, the created new node will be vertically
aligned with this node. Left this as 'NULL' if this is the first node. The first
node will be aligned in the top center.</p>
</td></tr>
<tr><td><code id="add_box_+3A_txt">txt</code></td>
<td>
<p>Text in the node. If the 'prev_box' is a horizontally aligned multiple
nodes, a vector of with the same length must be provided.</p>
</td></tr>
<tr><td><code id="add_box_+3A_just">just</code></td>
<td>
<p>The justification for the text: left, center or right.</p>
</td></tr>
<tr><td><code id="add_box_+3A_text_width">text_width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output. String will not be wrapped if not defined (default).
The <code><a href="stringi.html#topic+stri_wrap">stri_wrap</a></code> function will be used if <code>stringi</code>
package installed as it is a better options for non-Latin language, otherwise
<code><a href="base.html#topic+strwrap">strwrap</a></code> will be used.</p>
</td></tr>
<tr><td><code id="add_box_+3A_...">...</code></td>
<td>
<p>Other parameters pass to <a href="#topic+textbox">textbox</a>,</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>consort</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_side_box">add_side_box</a></code> <code><a href="#topic+add_split">add_split</a></code> <code><a href="#topic+textbox">textbox</a></code> 
<code><a href="#topic+add_label_box">add_label_box</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")

g &lt;- add_split(g, txt = c("Arm A (n=100)", "Arm B (n=100"))
g &lt;- add_side_box(g,
  txt = c(
    "Excluded (n=15):\n
                  \u2022 MRI not collected (n=3)\n
                  \u2022 Tissues not collected (n=4)\n
                   \u2022 Other (n=8)",
    "Excluded (n=15):\n
                   \u2022 MRI not collected (n=3)\n
                   \u2022 Tissues not collected (n=4)"
  )
)

g &lt;- add_box(g, txt = c("Final analysis (n=100)", "Final analysis (n=100"))
g &lt;- add_label_box(g, txt = c("1" = "Screening", "3" = "Randomized", "4" = "Final analysis"))
</code></pre>

<hr>
<h2 id='add_label_box'>Add a vertically aligned label nodes on the left side.</h2><span id='topic+add_label_box'></span>

<h3>Description</h3>

<p>In a consort diagram, this can be used to indicate different stage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_label_box(
  prev_box,
  txt,
  only_terminal = TRUE,
  just = c("center", "left", "right"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_label_box_+3A_prev_box">prev_box</code></td>
<td>
<p>A completed diagram created with <code>add_box</code>, <code>add_side_box</code> etc.</p>
</td></tr>
<tr><td><code id="add_label_box_+3A_txt">txt</code></td>
<td>
<p>Text in the node. If a character string is provided, the label will be aligned
to the last box if a character is provided. If a named vector, the labels will align to
corresponding row of the node. And the names is the number indicating row number of box to
horizontally align with and value is the text in the box.</p>
</td></tr>
<tr><td><code id="add_label_box_+3A_only_terminal">only_terminal</code></td>
<td>
<p>If the txt is only for the terminal box, default. Otherwise, the side box will
also be accounted for.</p>
</td></tr>
<tr><td><code id="add_label_box_+3A_just">just</code></td>
<td>
<p>The justification for the text: center (default), left or right.</p>
</td></tr>
<tr><td><code id="add_label_box_+3A_...">...</code></td>
<td>
<p>Other parameters pass to <a href="#topic+textbox">textbox</a>,</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>consort</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_side_box">add_side_box</a></code> <code><a href="#topic+add_split">add_split</a></code> <code><a href="#topic+textbox">textbox</a></code> 
<code><a href="#topic+add_box">add_box</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")

g &lt;- add_split(g, txt = c("Arm A (n=100)", "Arm B (n=100"))
g &lt;- add_side_box(g,
  txt = c(
    "Excluded (n=15):\n
                  \u2022 MRI not collected (n=3)\n
                  \u2022 Tissues not collected (n=4)\n
                   \u2022 Other (n=8)",
    "Excluded (n=15):\n
                   \u2022 MRI not collected (n=3)\n
                   \u2022 Tissues not collected (n=4)"
  )
)

g &lt;- add_box(g, txt = c("Final analysis (n=100)", "Final analysis (n=100"))
g &lt;- add_label_box(g, txt = c("1" = "Screening", "3" = "Randomized", "4" = "Final analysis"))
</code></pre>

<hr>
<h2 id='add_side_box'>Add a side node</h2><span id='topic+add_side_box'></span>

<h3>Description</h3>

<p>Add an exclusion node on the right side. If the length of text label is two, then
the first one will be aligned on the left and the second on the right. Otherwise,
all the side nodes will be aligned on the right.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_side_box(prev_box, txt, side = NULL, text_width = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_side_box_+3A_prev_box">prev_box</code></td>
<td>
<p>Previous node object, the created new node will be aligned
at the right bottom of the 'prev_box'.</p>
</td></tr>
<tr><td><code id="add_side_box_+3A_txt">txt</code></td>
<td>
<p>Text in the node. If the 'prev_box' is a horizontally aligned multiple
nodes, a vector of with the same length must be provided.</p>
</td></tr>
<tr><td><code id="add_side_box_+3A_side">side</code></td>
<td>
<p>Position of the side box, 'left' or 'right' side of the terminal box.
Will be aligned on the left and right side if only two groups, right otherwise.
This will be ignored for for 'grViz' plot, see <a href="DiagrammeR.html#topic+grViz">grViz</a>.</p>
</td></tr>
<tr><td><code id="add_side_box_+3A_text_width">text_width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output. String will not be wrapped if not defined (default).
The <code><a href="stringi.html#topic+stri_wrap">stri_wrap</a></code> function will be used if <code>stringi</code>
package installed as it is a better options for non-Latin language, otherwise
<code><a href="base.html#topic+strwrap">strwrap</a></code> will be used.</p>
</td></tr>
<tr><td><code id="add_side_box_+3A_...">...</code></td>
<td>
<p>Other parameters pass to <a href="#topic+textbox">textbox</a>,</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>consort</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_box">add_box</a></code> <code><a href="#topic+add_split">add_split</a></code> <code><a href="#topic+textbox">textbox</a></code> 
<code><a href="#topic+add_label_box">add_label_box</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")

g &lt;- add_split(g, txt = c("Arm A (n=100)", "Arm B (n=100"))
g &lt;- add_side_box(g,
  txt = c(
    "Excluded (n=15):\n
                  \u2022 MRI not collected (n=3)\n
                  \u2022 Tissues not collected (n=4)\n
                   \u2022 Other (n=8)",
    "Excluded (n=15):\n
                   \u2022 MRI not collected (n=3)\n
                   \u2022 Tissues not collected (n=4)"
  )
)

g &lt;- add_box(g, txt = c("Final analysis (n=100)", "Final analysis (n=100"))
g &lt;- add_label_box(g, txt = c("1" = "Screening", "3" = "Randomized", "4" = "Final analysis"))
</code></pre>

<hr>
<h2 id='add_split'>Add a splitting box</h2><span id='topic+add_split'></span>

<h3>Description</h3>

<p>This function will create a horizontally aligned nodes. The horizontal coordinate
will be automatically calculated if the coordinates not provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_split(
  prev_box,
  txt,
  just = c("center", "left", "right"),
  text_width = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_split_+3A_prev_box">prev_box</code></td>
<td>
<p>Previous node that the newly created split box will be aligned.</p>
</td></tr>
<tr><td><code id="add_split_+3A_txt">txt</code></td>
<td>
<p>Text in the node. If the 'prev_box' is a horizontally aligned multiple
nodes, a vector of with the same length must be provided.</p>
</td></tr>
<tr><td><code id="add_split_+3A_just">just</code></td>
<td>
<p>The justification for the text: left, center or right.</p>
</td></tr>
<tr><td><code id="add_split_+3A_text_width">text_width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output. String will not be wrapped if not defined (default).
The <code><a href="stringi.html#topic+stri_wrap">stri_wrap</a></code> function will be used if <code>stringi</code>
package installed as it is a better options for non-Latin language, otherwise
<code><a href="base.html#topic+strwrap">strwrap</a></code> will be used.</p>
</td></tr>
<tr><td><code id="add_split_+3A_...">...</code></td>
<td>
<p>Other parameters pass to <a href="#topic+textbox">textbox</a>,</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>consort.list</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_box">add_box</a></code>, <code><a href="#topic+add_side_box">add_side_box</a></code> <code><a href="#topic+textbox">textbox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")

g &lt;- add_split(g, txt = c("Arm A (n=100)", "Arm B (n=100"))
g &lt;- add_side_box(g,
  txt = c(
    "Excluded (n=15):\n
                  \u2022 MRI not collected (n=3)\n
                  \u2022 Tissues not collected (n=4)\n
                   \u2022 Other (n=8)",
    "Excluded (n=15):\n
                   \u2022 MRI not collected (n=3)\n
                   \u2022 Tissues not collected (n=4)"
  )
)

g &lt;- add_box(g, txt = c("Final analysis (n=100)", "Final analysis (n=100"))
g &lt;- add_label_box(g, txt = c("1" = "Screening", "3" = "Randomized", "4" = "Final analysis"))
</code></pre>

<hr>
<h2 id='build_grid'>Build consort diagram</h2><span id='topic+build_grid'></span>

<h3>Description</h3>

<p>Build a <code>grob</code> consort diagram, use this if you want
to save plots with <code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>. <code>build_grid</code>
does not support multiple split for the moment, please use 
<code><a href="#topic+build_grviz">build_grviz</a></code> or <code>plot(g, grViz = TRUE)</code> for 
multiple split nodes instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_grid(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_grid_+3A_x">x</code></td>
<td>
<p>A conosrt object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>gList</code> object
</p>


<h3>See Also</h3>

<p><code><a href="grid.html#topic+gList">gList</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")
# g &lt;- ggsave("consort_diagram.pdf", plot = build_grid(g))

## End(Not run)

</code></pre>

<hr>
<h2 id='build_grviz'>Build consort diagram</h2><span id='topic+build_grviz'></span>

<h3>Description</h3>

<p>Build a <code>grob</code> consort diagram, use this if you want
to save plots with <code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_grviz(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="build_grviz_+3A_x">x</code></td>
<td>
<p>A conosrt object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Graphviz</code> code
</p>


<h3>See Also</h3>

<p><code><a href="DiagrammeR.html#topic+grViz">grViz</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
txt1 &lt;- "Population (n=300)"
txt1_side &lt;- "Excluded (n=15): \n
              \u2022 MRI not collected (n=3)\n
              \u2022 Tissues not collected (n=4)\n
              \u2022 Other (n=8)"

g &lt;- add_box(txt = txt1)

g &lt;- add_side_box(g, txt = txt1_side)

g &lt;- add_box(g, txt = "Randomized (n=200)")
# plot(g, grViz = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='connect_box'>Connect grob box with arrow.</h2><span id='topic+connect_box'></span>

<h3>Description</h3>

<p>This function is used to create an arrow line to connect two boxes. User should
provide the starting and ending side of the arrow.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>connect_box(start, end, connect, type = c("s", "p"), name = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="connect_box_+3A_start">start</code></td>
<td>
<p>Starting point of the arrow.</p>
</td></tr>
<tr><td><code id="connect_box_+3A_end">end</code></td>
<td>
<p>Ending point of the arrow.</p>
</td></tr>
<tr><td><code id="connect_box_+3A_connect">connect</code></td>
<td>
<p>The connection of the box. It should be the combination of the
position. The <code>t</code> refers to &quot;top&quot;, <code>l</code> for &quot;left&quot;, <code>b</code> for
&quot;bottom&quot; and <code>r</code> for &quot;right&quot;. The first letter is the starting point of
the start box, the second is the ending point of the end box. For example, if
one wants to connect the left side of the start box with right side of the
left side of the end box, the value should be <code>"lr"</code>. All the connection
will be started in the middle point.</p>
</td></tr>
<tr><td><code id="connect_box_+3A_type">type</code></td>
<td>
<p>Should be one the <code>"s"</code> (strait line), or <code>"p"</code> (polyline).</p>
</td></tr>
<tr><td><code id="connect_box_+3A_name">name</code></td>
<td>
<p>A character identifier of the line grob, passed to <code><a href="grid.html#topic+linesGrob">linesGrob</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A lines grob with arrow.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fg1 &lt;- textbox(text = "This is a test")
fg2 &lt;- textbox(text = "This is an other test", 0.7, 0.2)
grid::grid.draw(fg1)
grid::grid.draw(fg2)
connect_box(fg1, fg2, connect = "bl", type = "p")
</code></pre>

<hr>
<h2 id='consort_plot'>Self generating consort diagram</h2><span id='topic+consort_plot'></span>

<h3>Description</h3>

<p>Create CONSORT diagram from a participant disposition data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>consort_plot(
  data,
  orders,
  side_box,
  allocation = NULL,
  labels = NULL,
  kickoff_sidebox = TRUE,
  cex = 0.8,
  text_width = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="consort_plot_+3A_data">data</code></td>
<td>
<p>Data set with disposition information for each participants.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_orders">orders</code></td>
<td>
<p>A named vector or a list, names as the variable in the dataset
and values as labels in the box. The order of the diagram will be based on this.
A list can be used to report multiple variable in a single node, the first 
variable in a list element will be used to report the total and the exact items
will be summarised for the remaining variable. This is limitted to non-side box.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_side_box">side_box</code></td>
<td>
<p>Variable vector, appeared as side box in the diagram. The next
box will be the subset of the missing values of these variables.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_allocation">allocation</code></td>
<td>
<p>Name of the grouping/treatment variable (optional), the
diagram will split into branches on this variables forward. For a factorial 
design, with two splits for example, a character vector with a maximum of 
length two can be provided. The extra box will be skipped if the values
in the <code>orders</code> blank.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_labels">labels</code></td>
<td>
<p>Named vector, names is the location of the terminal node. The
position location should plus 1 after the allocation variables if the allocation
is defined.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_kickoff_sidebox">kickoff_sidebox</code></td>
<td>
<p>remove (default) the side box observations from the 
following counting.</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_cex">cex</code></td>
<td>
<p>Multiplier applied to font size, Default is 0.8</p>
</td></tr>
<tr><td><code id="consort_plot_+3A_text_width">text_width</code></td>
<td>
<p>a positive integer giving the target column for wrapping
lines in the output. String will not be wrapped if not defined (default).
The <code><a href="stringi.html#topic+stri_wrap">stri_wrap</a></code> function will be used if <code>stringi</code>
package installed, otherwise <code><a href="base.html#topic+strwrap">strwrap</a></code> will be used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The calculation of numbers is as in an analogous to Kirchhoff's Laws of
electricity. The numbers in terminal nodes must sum to those in the ancestor
nodes. All the drop outs will be populated as a side box. Which was different
from the official CONSORT diagram template, which has dropout inside a
vertical node.
</p>


<h3>Value</h3>

<p>A <code>consort</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_side_box">add_side_box</a></code>,<code><a href="#topic+add_split">add_split</a></code>,
<code><a href="#topic+add_side_box">add_side_box</a></code> <code><a href="#topic+textbox">textbox</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Prepare test data
data(dispos.data)

df &lt;- dispos.data[!dispos.data$arm3 %in% "Trt C", ]
p &lt;- consort_plot(data = df,
                  orders = list(c(trialno = "Population"),
                                c(exclusion = "Excluded"),
                                c(arm     = "Randomized patient"),
                                c(arm3     = "", 
                                  subjid_notdosed="Participants not treated"),
                                c(followup    = "Pariticpants planned for follow-up",
                                  lost_followup = "Reason for tot followed"),
                                c(assessed = "Assessed for final outcome"),
                                c(no_value = "Reason for not assessed"),
                                c(mitt = "Included in the mITT analysis")),
                  side_box = c("exclusion", "no_value"),
                  allocation = c("arm", "arm3"),
                  labels = c("1" = "Screening", "2" = "Randomization",
                             "5" = "Follow-up", "7" = "Final analysis"),
                  cex = 0.7)
</code></pre>

<hr>
<h2 id='dispos.data'>Demo clinical trial disposition data</h2><span id='topic+dispos.data'></span>

<h3>Description</h3>

<p>This is a demo data to demonstrate the use of the package. One row per
participant. Participants who are excluded should provide a reason, missing
otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dispos.data
</code></pre>


<h3>Format</h3>

<p>A data frame with 300 rows and 11 columns:
</p>

<dl>
<dt>trialno</dt><dd><p>Participants ID of the participants</p>
</dd>
<dt>exclusion1, exclusion2</dt><dd><p>Exclusion reason before and after induction</p>
</dd>
<dt>induction</dt><dd><p>Participants ID of the participants who are included in the induction
phase, an extra treatment before randomisation.</p>
</dd>
<dt>exclusion</dt><dd><p>Exclusion reason before randomisation, including before and after
induction</p>
</dd>
<dt>arm, arm3</dt><dd><p>Arms pariticipants randomised to.</p>
</dd>
<dt>sbujid_dosed</dt><dd><p>Participants ID of the participants who had at least one dose of 
the protocol treatment.</p>
</dd>
<dt>subjid_notdosed</dt><dd><p>Reason for participants not dosed.</p>
</dd>
<dt>followup</dt><dd><p>Participants ID planned for follow-up.</p>
</dd>
<dt>lost_followup</dt><dd><p>Reason for participants not dosed.</p>
</dd>
<dt>assessed</dt><dd><p>Participants ID participants attended assessment.</p>
</dd>
<dt>no_value</dt><dd><p>Reason for participants missing final assessment.</p>
</dd>
<dt>mitt</dt><dd><p>Participants ID included in the mITT analysis.</p>
</dd>
</dl>


<hr>
<h2 id='gen_text'>Generate label and bullet points</h2><span id='topic+gen_text'></span>

<h3>Description</h3>

<p>This function use the data to generate label and bullet points for the box.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gen_text(x, label = NULL, bullet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gen_text_+3A_x">x</code></td>
<td>
<p>A list or a vector to be used. <code>x</code> can be atomic vector, a 
<code>data.frame</code> or a <code>list</code>. A <code>data.frame</code> is particular useful
if the there's a nested reason or a <code>list</code> split nested reasons by group.
The nested reasons only support two columns and the <code>bullet</code> will be ignored.</p>
</td></tr>
<tr><td><code id="gen_text_+3A_label">label</code></td>
<td>
<p>A character string as a label at the beginning of the text label.
The count for each categories will be returned if no label is provided.</p>
</td></tr>
<tr><td><code id="gen_text_+3A_bullet">bullet</code></td>
<td>
<p>If shows bullet points. If the value is 'TRUE', the bullet points
will be tabulated, default is 'FALSE'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character string of vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>val &lt;- data.frame(
  am = factor(ifelse(mtcars$am == 1, "Automatic", "Manual"), ordered = TRUE),
  vs = factor(ifelse(mtcars$vs == 1, "Straight", "V-shaped"), ordered = TRUE),
  car = row.names(mtcars)
)

gen_text(val$car, label = "Cars in the data")
gen_text(val$car, label = "Cars in the data", bullet = FALSE)
gen_text(split(val$car, val$am), label = "Cars in the data")
gen_text(split(val$car, val$am), label = "Cars in the data", bullet = FALSE)
gen_text(split(val[,c("vs", "car")], val$am), label = "Cars in the data", bullet = FALSE)
gen_text(val[,c("vs", "car")], label = "Cars in the data", bullet = FALSE)
</code></pre>

<hr>
<h2 id='get_coords'>Get the coordinates of the textbox object</h2><span id='topic+get_coords'></span>

<h3>Description</h3>

<p>This function will get the coordinates of the textbox object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_coords(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_coords_+3A_x">x</code></td>
<td>
<p>A textbox object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of coordinates will return:
</p>
<table role = "presentation">
<tr><td><code>left</code></td>
<td>
<p>Left (x-min) side coordinate.</p>
</td></tr>
<tr><td><code>right</code></td>
<td>
<p>Right (x-max) side coordinate.</p>
</td></tr>
<tr><td><code>bottom</code></td>
<td>
<p>Bottom (y-min) side coordinate.</p>
</td></tr>
<tr><td><code>top</code></td>
<td>
<p>Top (y-max) side coordinate.</p>
</td></tr>
<tr><td><code>top.mid</code></td>
<td>
<p>Coordinate vector of top middle, measured by grob.</p>
</td></tr>
<tr><td><code>left.mid</code></td>
<td>
<p>Coordinate vector of left middle, measured by grob.</p>
</td></tr>
<tr><td><code>bottom.mid</code></td>
<td>
<p>Coordinate vector of bottom middle, measured by grob.</p>
</td></tr>
<tr><td><code>right.mid</code></td>
<td>
<p>Coordinate vector of right middle, measured by grob.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>X (center x) coordinate.</p>
</td></tr>
<tr><td><code>y</code></td>
<td>
<p>Y (center y) coordinate.</p>
</td></tr>
<tr><td><code>width</code></td>
<td>
<p>Width of the textbox, derived with <code>grobWidth</code>.</p>
</td></tr>
<tr><td><code>height</code></td>
<td>
<p>Height of the textbox, derived with <code>grobHeight</code>.</p>
</td></tr>
<tr><td><code>half_width</code></td>
<td>
<p>Half width of the box.</p>
</td></tr>
<tr><td><code>half_height</code></td>
<td>
<p>Half height of the box.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>fg &lt;- textbox(text = "This is a test")
get_coords(fg)
</code></pre>

<hr>
<h2 id='move_box'>Move a box grob</h2><span id='topic+move_box'></span>

<h3>Description</h3>

<p>This function can be used to move the box to a given position with
<a href="grid.html#topic+editGrob">editGrob</a> changing the <code>x</code> and <code>y</code> value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>move_box(obj, x = NULL, y = NULL, pos_type = c("absolute", "relative"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="move_box_+3A_obj">obj</code></td>
<td>
<p>A <code>box</code> object.</p>
</td></tr>
<tr><td><code id="move_box_+3A_x">x</code></td>
<td>
<p>A unit element or a number that can be converted to <code>npc</code>, see
<a href="grid.html#topic+unit">unit</a>.</p>
</td></tr>
<tr><td><code id="move_box_+3A_y">y</code></td>
<td>
<p>A unit element or a number that can be converted to <code>npc</code>, see
<a href="grid.html#topic+unit">unit</a>.</p>
</td></tr>
<tr><td><code id="move_box_+3A_pos_type">pos_type</code></td>
<td>
<p>If the provided coordinates are <code>absolute</code> position the
box will be moved to or it's a <code>relative</code> position to it's current.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A box object with updated x and y coordinates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fg &lt;- textbox(text = "This is a test")
fg2 &lt;- move_box(fg, 0.3, 0.3)
</code></pre>

<hr>
<h2 id='plot.consort'>Add methods to print function</h2><span id='topic+plot.consort'></span><span id='topic+print.consort'></span>

<h3>Description</h3>

<p>Method for plot objects and display the output in on a grid device.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'consort'
plot(x, grViz = FALSE, ...)

## S3 method for class 'consort'
print(x, grViz = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.consort_+3A_x">x</code></td>
<td>
<p>A <code>consort</code> object.</p>
</td></tr>
<tr><td><code id="plot.consort_+3A_grviz">grViz</code></td>
<td>
<p>If use <a href="DiagrammeR.html#topic+grViz">grViz</a> to print the plot. 
Default is <code>FALSE</code> to use <a href="grid.html#topic+grid.draw">grid.draw</a></p>
</td></tr>
<tr><td><code id="plot.consort_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+add_side_box">add_side_box</a></code>,<code><a href="#topic+add_split">add_split</a></code>,
<code><a href="#topic+add_side_box">add_side_box</a></code>, <a href="grid.html#topic+grid.draw">grid.draw</a>
</p>

<hr>
<h2 id='textbox'>Create a box with text</h2><span id='topic+textbox'></span><span id='topic+grid.textbox'></span>

<h3>Description</h3>

<p>Create a <a href="grid.html#topic+grob">grob</a> with text inside. To extract the units describing
grob boundary location can be accessed with <a href="grid.html#topic+grobX">grobX</a> and
<a href="grid.html#topic+grobY">grobY</a>. The units describing width and height can be accessed with
<a href="grid.html#topic+grobWidth">grobWidth</a> and <a href="grid.html#topic+grobHeight">grobHeight</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>textbox(
  text,
  x = unit(0.5, "npc"),
  y = unit(0.5, "npc"),
  just = c("center", "left", "right"),
  txt_gp = getOption("txt_gp", default = gpar(color = "black", cex = 1)),
  box_fn = roundrectGrob,
  box_gp = getOption("box_gp", default = gpar(fill = "white")),
  name = "textbox"
)

grid.textbox(...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="textbox_+3A_text">text</code></td>
<td>
<p>A character text to be passed to <a href="grid.html#topic+textGrob">textGrob</a>.</p>
</td></tr>
<tr><td><code id="textbox_+3A_x">x</code></td>
<td>
<p>A number or unit object specifying x-location.</p>
</td></tr>
<tr><td><code id="textbox_+3A_y">y</code></td>
<td>
<p>A number or unit object specifying y-location.</p>
</td></tr>
<tr><td><code id="textbox_+3A_just">just</code></td>
<td>
<p>The justification of the text, '&quot;left&quot;', '&quot;right' and '&quot;center&quot;'.
See <a href="grid.html#topic+textGrob">textGrob</a> for more details.</p>
</td></tr>
<tr><td><code id="textbox_+3A_txt_gp">txt_gp</code></td>
<td>
<p>An object of class <a href="grid.html#topic+gpar">gpar</a> style to be applied to the
text. This will also be read from global options of <code>"txt_gp"</code>. For
example, if one wants to set a font size for all the text inside box,
<code>options(txt_gp = gpar(cex = 0.8))</code> will do the trick.</p>
</td></tr>
<tr><td><code id="textbox_+3A_box_fn">box_fn</code></td>
<td>
<p>Function to create box for the text. Parameters of 'x=0.5',
'y=0.5' and 'box_gp' will be passed to this function and return a <code>grob</code>
object. This will also be read from global options of <code>"box_gp"</code>.</p>
</td></tr>
<tr><td><code id="textbox_+3A_box_gp">box_gp</code></td>
<td>
<p>An object of class <a href="grid.html#topic+gpar">gpar</a> style to be applied to the
box.</p>
</td></tr>
<tr><td><code id="textbox_+3A_name">name</code></td>
<td>
<p>A character identifier.</p>
</td></tr>
<tr><td><code id="textbox_+3A_...">...</code></td>
<td>
<p>Parameters passed to <code>textbox</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A text box grob. grid.textbox() returns the value invisibly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fg &lt;- textbox(text = "This is a test")
grid::grid.draw(fg)
grid.textbox(text = "This is a test")
grid.textbox(text = "This is a test")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
