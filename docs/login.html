<!DOCTYPE html><html lang="en"><head><title>Help for package login</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {login}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#login-package'><p>login: User Authentication for Shiny Applications</p></a></li>
<li><a href='#emayili_emailer'><p>Returns a function to send emails using the <code>emayili</code> package.</p></a></li>
<li><a href='#is_logged_in'><p>Display Shiny elements only if the user is logged in.</p></a></li>
<li><a href='#is_not_logged_in'><p>Display Shiny elements only if the user is not logged in.</p></a></li>
<li><a href='#login_server'><p>Login server module.</p></a></li>
<li><a href='#login_ui'><p>Login UI elements.</p></a></li>
<li><a href='#logout_button'><p>Logout button.</p></a></li>
<li><a href='#new_user_ui'><p>UI for creating a new user account.</p></a></li>
<li><a href='#passwdInput'><p>Password input textbox.</p></a></li>
<li><a href='#reset_password_ui'><p>UI for resetting password.</p></a></li>
<li><a href='#use_login'><p>JavaScript and CSS dependencies.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'shiny' Login Module</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-04-17</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jason Bryer &lt;jason@bryer.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Framework for adding authentication to 'shiny' applications.
    Provides flexibility as compared to other options for where user
    credentials are saved, allows users to create their own accounts, and
    password reset functionality. Bryer (2024)
    &lt;<a href="https://doi.org/10.5281%2Fzenodo.10987876">doi:10.5281/zenodo.10987876</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/jbryer/login">https://github.com/jbryer/login</a>, <a href="https://jbryer.github.io/login/">https://jbryer.github.io/login/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jbryer/login/issues">https://github.com/jbryer/login/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>cookies, DBI, digest, emayili, htmltools, shiny, shinybusy,
shinyjs, stringr, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>Enhances:</td>
<td>RSQLite</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-04-18 16:08:38 UTC; jbryer</td>
</tr>
<tr>
<td>Author:</td>
<td>Jason Bryer <a href="https://orcid.org/0000-0002-2454-0402"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-04-18 19:32:48 UTC</td>
</tr>
</table>
<hr>
<h2 id='login-package'>login: User Authentication for Shiny Applications</h2><span id='topic+login'></span><span id='topic+login-package'></span>

<h3>Description</h3>

<p>Framework for adding authentication to 'shiny' applications.
Provides flexibility as compared to other options for where user
credentials are saved, allows users to create their own accounts, and
password reset functionality.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jason Bryer <a href="mailto:jason@bryer.org">jason@bryer.org</a> (<a href="https://orcid.org/0000-0002-2454-0402">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/jbryer/login">https://github.com/jbryer/login</a>
</p>
</li>
<li> <p><a href="https://jbryer.github.io/login/">https://jbryer.github.io/login/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/jbryer/login/issues">https://github.com/jbryer/login/issues</a>
</p>
</li></ul>


<hr>
<h2 id='emayili_emailer'>Returns a function to send emails using the <code>emayili</code> package.</h2><span id='topic+emayili_emailer'></span>

<h3>Description</h3>

<p>This returns a function that can be used with the <code><a href="#topic+login_server">login_server()</a></code>. Specifically,
the function takes two parameters, <code>to_email</code> and <code>message</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>emayili_emailer(
  email_host = NULL,
  email_port = NULL,
  email_username = NULL,
  email_password = NULL,
  from_email = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="emayili_emailer_+3A_email_host">email_host</code></td>
<td>
<p>SMTP email host.</p>
</td></tr>
<tr><td><code id="emayili_emailer_+3A_email_port">email_port</code></td>
<td>
<p>SMPT email port.</p>
</td></tr>
<tr><td><code id="emayili_emailer_+3A_email_username">email_username</code></td>
<td>
<p>username for the SMTP server.</p>
</td></tr>
<tr><td><code id="emayili_emailer_+3A_email_password">email_password</code></td>
<td>
<p>password for the SMTP server.</p>
</td></tr>
<tr><td><code id="emayili_emailer_+3A_from_email">from_email</code></td>
<td>
<p>the from email address sent from <code><a href="#topic+login_server">login_server()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns a function to send an email using the <code>emayili</code> package.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+login_server">login_server()</a></code>
</p>

<hr>
<h2 id='is_logged_in'>Display Shiny elements only if the user is logged in.</h2><span id='topic+is_logged_in'></span>

<h3>Description</h3>

<p>This function can be used on the Shiny UI side. It will check to see if the user
is logged in, if so the other Shiny elements will be displayed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_logged_in(id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_logged_in_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
<tr><td><code id="is_logged_in_+3A_...">...</code></td>
<td>
<p>Shiny UI elements.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+conditionalPanel">shiny::conditionalPanel()</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+login_server">login_server()</a></code>
</p>

<hr>
<h2 id='is_not_logged_in'>Display Shiny elements only if the user is not logged in.</h2><span id='topic+is_not_logged_in'></span>

<h3>Description</h3>

<p>This function can be used on the Shiny UI side. It will. check to see if the
user is not logged in, if so the other Shiny elements will be displayed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_not_logged_in(id, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_not_logged_in_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
<tr><td><code id="is_not_logged_in_+3A_...">...</code></td>
<td>
<p>Shiny UI elements.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+conditionalPanel">shiny::conditionalPanel()</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+login_server">login_server()</a></code>
</p>

<hr>
<h2 id='login_server'>Login server module.</h2><span id='topic+login_server'></span>

<h3>Description</h3>

<p>This is the main server logic for the <code>login</code> Shiny module to be included
in server.R side,.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>login_server(
  id,
  db_conn = NULL,
  users_table = "users",
  activity_table = "users_activity",
  emailer = NULL,
  new_account_subject = "Verify your new account",
  reset_password_subject = "Reset password",
  verify_email = !is.null(emailer),
  additional_fields = NULL,
  cookie_name = "loginusername",
  cookie_expiration = 30,
  username_label = "Email:",
  password_label = "Password:",
  create_account_label = "Create Account",
  create_account_message = NULL,
  reset_email_message = NULL,
  enclosing_panel = shiny::wellPanel,
  code_length = 6,
  salt = NULL,
  salt_algo = "sha512",
  shinybusy_spin = "fading-circle",
  shinybusy_position = "full-page"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="login_server_+3A_id">id</code></td>
<td>
<p>unique ID for the Shiny Login module.</p>
</td></tr>
<tr><td><code id="login_server_+3A_db_conn">db_conn</code></td>
<td>
<p>a DBI database connection.</p>
</td></tr>
<tr><td><code id="login_server_+3A_users_table">users_table</code></td>
<td>
<p>the name of the table in the database to store credentials.</p>
</td></tr>
<tr><td><code id="login_server_+3A_activity_table">activity_table</code></td>
<td>
<p>the name of the table in the database to log login and
logout activity.</p>
</td></tr>
<tr><td><code id="login_server_+3A_emailer">emailer</code></td>
<td>
<p>function used to send email messages. The function should have
have three parameters: <code>to_email</code> for the address to send the email,
<code>subject</code> for the subject of the email and <code>message</code> for the contents
of the email address. See <code><a href="#topic+emayili_emailer">emayili_emailer()</a></code> for an example.</p>
</td></tr>
<tr><td><code id="login_server_+3A_new_account_subject">new_account_subject</code></td>
<td>
<p>the subject used for verifying new accounts.</p>
</td></tr>
<tr><td><code id="login_server_+3A_reset_password_subject">reset_password_subject</code></td>
<td>
<p>the subject of password reset emails.</p>
</td></tr>
<tr><td><code id="login_server_+3A_verify_email">verify_email</code></td>
<td>
<p>if true new accounts will need to verify their email
address before the account is crated. This is done by sending a six
digit code to the email address.</p>
</td></tr>
<tr><td><code id="login_server_+3A_additional_fields">additional_fields</code></td>
<td>
<p>a character vector of additional fields the user is
asked to fill in at the when creating a new account. The names of the
vector correspond to the variable names and the values will be used
as the input labels.</p>
</td></tr>
<tr><td><code id="login_server_+3A_cookie_name">cookie_name</code></td>
<td>
<p>the name of the cookie saved. Set to <code>NULL</code> to disable cookies.</p>
</td></tr>
<tr><td><code id="login_server_+3A_cookie_expiration">cookie_expiration</code></td>
<td>
<p>the number of days after which the cookie will expire.</p>
</td></tr>
<tr><td><code id="login_server_+3A_username_label">username_label</code></td>
<td>
<p>label used for text inputs of username.</p>
</td></tr>
<tr><td><code id="login_server_+3A_password_label">password_label</code></td>
<td>
<p>label used for text inputs of password.</p>
</td></tr>
<tr><td><code id="login_server_+3A_create_account_label">create_account_label</code></td>
<td>
<p>label for the create account button.</p>
</td></tr>
<tr><td><code id="login_server_+3A_create_account_message">create_account_message</code></td>
<td>
<p>Email message sent to confirm email when creating
a new account. Include <code style="white-space: pre;">&#8288;\%s&#8288;</code> somewhere in the message to include the code.</p>
</td></tr>
<tr><td><code id="login_server_+3A_reset_email_message">reset_email_message</code></td>
<td>
<p>Email message sent to reset password. Include <code style="white-space: pre;">&#8288;\%s&#8288;</code>
somewhere in the message to include the code.</p>
</td></tr>
<tr><td><code id="login_server_+3A_enclosing_panel">enclosing_panel</code></td>
<td>
<p>the Shiny element that contains all the UI elements.
The default is <code><a href="shiny.html#topic+wellPanel">shiny::wellPanel()</a></code>. If you wish a more subtle appearance
<code><a href="htmltools.html#topic+builder">htmltools::div()</a></code> is a reasonable choice.</p>
</td></tr>
<tr><td><code id="login_server_+3A_code_length">code_length</code></td>
<td>
<p>the number of digits of codes emailed for creating accounts
(if <code>verify_email == TRUE</code>) or resetting passwords.</p>
</td></tr>
<tr><td><code id="login_server_+3A_salt">salt</code></td>
<td>
<p>a salt to use to encrypt the password before storing it in the database.</p>
</td></tr>
<tr><td><code id="login_server_+3A_salt_algo">salt_algo</code></td>
<td>
<p>the algorithm used to encrypt the password. See
<code><a href="digest.html#topic+digest">digest::digest()</a></code> for more details.</p>
</td></tr>
<tr><td><code id="login_server_+3A_shinybusy_spin">shinybusy_spin</code></td>
<td>
<p>Style of the spinner when sending emails.
See <code><a href="shinybusy.html#topic+manual-spinner">shinybusy::use_busy_spinner()</a></code> for more information.</p>
</td></tr>
<tr><td><code id="login_server_+3A_shinybusy_position">shinybusy_position</code></td>
<td>
<p>Position of the spinner when sending emails.
See <code><a href="shinybusy.html#topic+manual-spinner">shinybusy::use_busy_spinner()</a></code> for more information.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+reactiveValues">shiny::reactiveValues()</a></code> object that includes two values: <code>logged_in</code>
(this is TRUE if the user is logged in) and <code>username</code> which has the
user's login username if logged in.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(shiny)
library(login)

###### User Interface ##########################################################
ui &lt;- fluidPage(
    titlePanel("Shiny Login Simple Demo"),
    p("You can login with 'test/test'."),
    login::login_ui(id = 'login_demo'),
    login::logout_button('login_demo'),
    hr(),
    div('Are you logged in? ', textOutput('is_logged_in')),
    div('Username: ', textOutput('username')),
    login::is_logged_in(
        id = 'login_demo',
        div("This only shows when you are logged in!")
    ),
    login::is_not_logged_in(
        id = 'login_demo',
        div("This only shows when you are NOT logged in!")
    )
)

##### Server ###################################################################
server &lt;- function(input, output, session) {
    USER &lt;- login::login_server(
        id = 'login_demo',
        db_conn = RSQLite::dbConnect(RSQLite::SQLite(), 'users.sqlite')
    )

    observeEvent(USER$logged_in, {
        if(USER$logged_in) {
            shinyjs::hide(id = 'login_box')
        } else {
            shinyjs::show(id = "login_box")
        }
    })

    output$is_logged_in &lt;- renderText({
        USER$logged_in
    })

    output$username &lt;- renderText({
        USER$username
    })
}

##### Run the application ######################################################
if(interactive()) {
    shinyApp(ui = ui, server = server)
}
</code></pre>

<hr>
<h2 id='login_ui'>Login UI elements.</h2><span id='topic+login_ui'></span>

<h3>Description</h3>

<p>This will render (if the user is not logged in) text boxes and buttons for
the user to login.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>login_ui(id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="login_ui_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+reexports">shiny::div()</a></code> object.
</p>

<hr>
<h2 id='logout_button'>Logout button.</h2><span id='topic+logout_button'></span>

<h3>Description</h3>

<p>Render a button for the user to logout.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logout_button(
  id,
  label = "Logout",
  icon = shiny::icon("right-from-bracket"),
  style = "",
  check_login = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="logout_button_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
<tr><td><code id="logout_button_+3A_label">label</code></td>
<td>
<p>label of the logout button.</p>
</td></tr>
<tr><td><code id="logout_button_+3A_icon">icon</code></td>
<td>
<p>icon for the logout button.</p>
</td></tr>
<tr><td><code id="logout_button_+3A_style">style</code></td>
<td>
<p>CSS styles for the logout button.</p>
</td></tr>
<tr><td><code id="logout_button_+3A_check_login">check_login</code></td>
<td>
<p>if TRUE this will call <code><a href="#topic+is_logged_in">is_logged_in()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+actionButton">shiny::actionButton()</a></code> if the user is logged in.
</p>

<hr>
<h2 id='new_user_ui'>UI for creating a new user account.</h2><span id='topic+new_user_ui'></span>

<h3>Description</h3>

<p>This will render the UI for users to create an account.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_user_ui(id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_user_ui_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>shiny</code> object containing the input fields for a user to create an account.
</p>

<hr>
<h2 id='passwdInput'>Password input textbox.</h2><span id='topic+passwdInput'></span>

<h3>Description</h3>

<p>This is an extension to Shiny's built in passwordInput by encrpting the
password client side before sending it to the server. Although it is encrypted
in the client using JavaScript it highly recommend that you also use an SSL
certificate (for https) as well.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>passwdInput(inputId, label, value)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="passwdInput_+3A_inputid">inputId</code></td>
<td>
<p>ID for the input.</p>
</td></tr>
<tr><td><code id="passwdInput_+3A_label">label</code></td>
<td>
<p>label for the textbox.</p>
</td></tr>
<tr><td><code id="passwdInput_+3A_value">value</code></td>
<td>
<p>default value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code><a href="shiny.html#topic+reexports">shiny::tagList()</a></code> object.
</p>

<hr>
<h2 id='reset_password_ui'>UI for resetting password.</h2><span id='topic+reset_password_ui'></span>

<h3>Description</h3>

<p>Displays UI for users to reset their password. In order for the password
reset feature to work credentials to a SMTP server must be passed to the
<code><a href="#topic+login_server">login_server()</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reset_password_ui(id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reset_password_ui_+3A_id">id</code></td>
<td>
<p>id unique ID for the Shiny Login module.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>shiny</code> object containing the input fields for a user to reset their password.
</p>

<hr>
<h2 id='use_login'>JavaScript and CSS dependencies.</h2><span id='topic+use_login'></span>

<h3>Description</h3>

<p>This ensures the JavaScript and CSS dependencies are available to the
client. Files are located in <code style="white-space: pre;">&#8288;assets/&#8288;</code> folder when installed..
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_login()
</code></pre>


<h3>Value</h3>

<p>a <code><a href="htmltools.html#topic+htmlDependency">htmltools::htmlDependency()</a></code> object defining the JavaScript and CSS files.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
