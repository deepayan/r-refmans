<!DOCTYPE html><html><head><title>Help for package geomultistar</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {geomultistar}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_dimension'><p>Add a dimension table to a <code>multistar</code></p></a></li>
<li><a href='#add_facts'><p>Add a fact table to a <code>multistar</code></p></a></li>
<li><a href='#add_geodimension_additional_attributes'><p>Add geodimension additional attributes</p></a></li>
<li><a href='#default_attribute'><p>Default attribute</p></a></li>
<li><a href='#define_geoattribute'><p>Define geographic attributes</p></a></li>
<li><a href='#define_geoattribute_from_attribute'><p>Define a geoattribute from another</p></a></li>
<li><a href='#define_geoattribute_from_layer'><p>Define an attribute from a layer</p></a></li>
<li><a href='#define_selected_dimensions'><p>Define selected dimensions</p></a></li>
<li><a href='#define_selected_facts'><p>Define selected facts</p></a></li>
<li><a href='#delete_unused_foreign_keys'><p>Delete unused foreign keys</p></a></li>
<li><a href='#dereference_dimension'><p>Dereference a dimension</p></a></li>
<li><a href='#dimensional_query'><p><code>dimensional_query</code> S3 class</p></a></li>
<li><a href='#filter_dimension'><p>Filter dimension</p></a></li>
<li><a href='#filter_selected_instances'><p>Filter selected instances</p></a></li>
<li><a href='#geomultistar'><p><code>geomultistar</code> S3 class</p></a></li>
<li><a href='#get_empty_geoinstances'><p>Get empty instances of a geographic attribute</p></a></li>
<li><a href='#get_selected_measure_names'><p>get_selected_measure_names</p></a></li>
<li><a href='#group_facts'><p>Group facts</p></a></li>
<li><a href='#group_table'><p>Group the records in the table</p></a></li>
<li><a href='#mrs_age_test'><p>Mortality Reporting System by Age Test</p></a></li>
<li><a href='#mrs_fact_age'><p>Fact <em>age</em></p></a></li>
<li><a href='#mrs_fact_cause'><p>Fact <em>cause</em></p></a></li>
<li><a href='#mrs_when'><p>Dimension <em>when</em></p></a></li>
<li><a href='#mrs_where'><p>Dimension <em>where</em></p></a></li>
<li><a href='#mrs_who'><p>Dimension <em>who</em></p></a></li>
<li><a href='#ms_mrs'><p>Multistar for Mortality Reporting System</p></a></li>
<li><a href='#ms_mrs_test'><p>Multistar for Mortality Reporting System Test</p></a></li>
<li><a href='#multistar'><p><code>multistar</code> S3 class</p></a></li>
<li><a href='#multistar_as_flat_table'><p>Export a <code>multistar</code> as a flat table</p></a></li>
<li><a href='#name_with_nexus'><p>Name with nexus</p></a></li>
<li><a href='#new_dimensional_query'><p><code>dimensional_query</code> S3 class</p></a></li>
<li><a href='#new_fact_table'><p><code>fact_table</code> S3 class</p></a></li>
<li><a href='#new_geomultistar'><p><code>geomultistar</code> S3 class</p></a></li>
<li><a href='#new_multistar'><p><code>multistar</code> S3 class</p></a></li>
<li><a href='#new_multistar_empty'><p><code>multistar</code> S3 class</p></a></li>
<li><a href='#prepare_join'><p>Transform a <code>tibble</code> to join</p></a></li>
<li><a href='#reference_dimension'><p>Reference a dimension</p></a></li>
<li><a href='#relate_dimension'><p>Relate a dimension table to a fact table in a <code>multistar</code></p></a></li>
<li><a href='#remove_duplicate_dimension_rows'><p>Remove duplicate dimension rows</p></a></li>
<li><a href='#run_geoquery'><p>Get a geographic vector from a query</p></a></li>
<li><a href='#run_query'><p>Run query</p></a></li>
<li><a href='#save_as_geopackage'><p>Save as geopackage</p></a></li>
<li><a href='#select_dimension'><p>Select dimension</p></a></li>
<li><a href='#select_fact'><p>Select fact</p></a></li>
<li><a href='#st_mrs_age_test'><p>Star Schema for Mortality Reporting System by Age Test</p></a></li>
<li><a href='#uk_london_boroughs'><p>UK London Boroughs</p></a></li>
<li><a href='#unify_facts_by_grain'><p>Unify facts by grain</p></a></li>
<li><a href='#usa_cities'><p>USA Cities, 2014</p></a></li>
<li><a href='#usa_counties'><p>USA Counties, 2018</p></a></li>
<li><a href='#usa_divisions'><p>USA Divisions, 2018</p></a></li>
<li><a href='#usa_nation'><p>USA Nation, 2018</p></a></li>
<li><a href='#usa_regions'><p>USA Regions, 2018</p></a></li>
<li><a href='#usa_states'><p>USA States, 2018</p></a></li>
<li><a href='#validate_names'><p>Validate names</p></a></li>
<li><a href='#widen_flat_table'><p>widen_flat_table</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Multidimensional Queries Enriched with Geographic Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Multidimensional systems allow complex queries to be carried
    out in an easy way. The geographical dimension, together with the
    temporal dimension, plays a fundamental role in multidimensional
    systems. Through this package, vector geographic data layers can be
    associated to the attributes of geographic dimensions, so that the
    results of multidimensional queries can be obtained directly as vector
    layers.  The multidimensional structures on which we can define the
    queries can be created from a flat table or imported directly using
    functions from this package.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://josesamos.github.io/geomultistar/">https://josesamos.github.io/geomultistar/</a>,
<a href="https://github.com/josesamos/geomultistar">https://github.com/josesamos/geomultistar</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/josesamos/geomultistar/issues">https://github.com/josesamos/geomultistar/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, generics, purrr, rlang, RSQLite, sf, tibble, tidyr,
tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, pander, rmarkdown, testthat</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-08 17:58:31 UTC; joses</td>
</tr>
<tr>
<td>Author:</td>
<td>Jose Samos <a href="https://orcid.org/0000-0002-4457-3439"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Universidad de Granada [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jose Samos &lt;jsamos@ugr.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 00:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_dimension'>Add a dimension table to a <code>multistar</code></h2><span id='topic+add_dimension'></span><span id='topic+add_dimension.multistar'></span>

<h3>Description</h3>

<p>To add a dimension table to a <code>multistar</code> object, we must indicate the name
that we give to the dimension, the <code>tibble</code> that contains the data and the
name of the attribute corresponding to the table primary key.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_dimension(
  ms,
  dimension_name = NULL,
  dimension_table = NULL,
  dimension_key = NULL,
  fact_name = NULL,
  fact_key = NULL,
  key_as_data = FALSE
)

## S3 method for class 'multistar'
add_dimension(
  ms,
  dimension_name = NULL,
  dimension_table = NULL,
  dimension_key = NULL,
  fact_name = NULL,
  fact_key = NULL,
  key_as_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_dimension_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> object.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_dimension_name">dimension_name</code></td>
<td>
<p>A string, name of dimension table.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_dimension_table">dimension_table</code></td>
<td>
<p>A <code>tibble</code>, dimension table.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_dimension_key">dimension_key</code></td>
<td>
<p>A string, name of the dimension primary key.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_fact_name">fact_name</code></td>
<td>
<p>A string, name of fact table.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_fact_key">fact_key</code></td>
<td>
<p>A string, name of the dimension foreign key.</p>
</td></tr>
<tr><td><code id="add_dimension_+3A_key_as_data">key_as_data</code></td>
<td>
<p>A boolean, define the primary key as an attribute of the
dimension accessible in queries?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>We cannot add a dimension without defining a correspondence with one of the
<code>multistar</code>'s fact tables. We have to define the name of the fact table and
the name of its foreign key. The referential integrity of the instances of
the facts is checked.
</p>
<p>The attribute that is used as the primary key will no longer be accessible
for queries (its function is considered to be exclusively related to facts).
If you want to use it for queries, it must be explicitly indicated by the
boolean parameter <code>key_as_data</code>.
</p>


<h3>Value</h3>

<p>A <code>multistar</code>.
</p>


<h3>See Also</h3>

<p>Other multistar functions: 
<code><a href="#topic+add_facts">add_facts</a>()</code>,
<code><a href="#topic+multistar">multistar</a>()</code>,
<code><a href="#topic+relate_dimension">relate_dimension</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ms &lt;- multistar() |&gt;
  add_facts(
    fact_name = "mrs_age",
    fact_table = mrs_fact_age,
    measures = "n_deaths",
    nrow_agg = "count"
  ) |&gt;
  add_facts(
    fact_name = "mrs_cause",
    fact_table = mrs_fact_cause,
    measures = c("pneumonia_and_influenza_deaths", "other_deaths"),
    nrow_agg = "nrow_agg"
  ) |&gt;
  add_dimension(
    dimension_name = "where",
    dimension_table = mrs_where,
    dimension_key = "where_pk",
    fact_name = "mrs_age",
    fact_key = "where_fk"
  ) |&gt;
  add_dimension(
    dimension_name = "when",
    dimension_table = mrs_when,
    dimension_key = "when_pk",
    fact_name = "mrs_age",
    fact_key = "when_fk",
    key_as_data = TRUE
  ) |&gt;
  add_dimension(
    dimension_name = "who",
    dimension_table = mrs_who,
    dimension_key = "who_pk",
    fact_name = "mrs_age",
    fact_key = "who_fk"
  )

</code></pre>

<hr>
<h2 id='add_facts'>Add a fact table to a <code>multistar</code></h2><span id='topic+add_facts'></span><span id='topic+add_facts.multistar'></span>

<h3>Description</h3>

<p>To add a fact table to a <code>multistar</code> object, we must indicate the name that
we give to the facts, the <code>tibble</code> that contains the data and a vector of
attribute names corresponding to the measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_facts(
  ms,
  fact_name = NULL,
  fact_table = NULL,
  measures = NULL,
  agg_functions = NULL,
  nrow_agg = "nrow_agg"
)

## S3 method for class 'multistar'
add_facts(
  ms,
  fact_name = NULL,
  fact_table = NULL,
  measures = NULL,
  agg_functions = NULL,
  nrow_agg = "nrow_agg"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_facts_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> object.</p>
</td></tr>
<tr><td><code id="add_facts_+3A_fact_name">fact_name</code></td>
<td>
<p>A string, name of fact table.</p>
</td></tr>
<tr><td><code id="add_facts_+3A_fact_table">fact_table</code></td>
<td>
<p>A <code>tibble</code>, fact table.</p>
</td></tr>
<tr><td><code id="add_facts_+3A_measures">measures</code></td>
<td>
<p>A vector of measure names.</p>
</td></tr>
<tr><td><code id="add_facts_+3A_agg_functions">agg_functions</code></td>
<td>
<p>A vector of aggregation function names. If none is
indicated, the default is SUM. Additionally they can be MAX or MIN.</p>
</td></tr>
<tr><td><code id="add_facts_+3A_nrow_agg">nrow_agg</code></td>
<td>
<p>A string, measurement name for the number of rows aggregated.
If it does not exist, it is added to the table.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Associated with each measurement, an aggregation function is required, which
by default is SUM. It that can be SUM, MAX or MIN. Mean is not considered
among the possible aggregation functions: The reason is that calculating the
mean by considering subsets of data does not necessarily yield the mean of
the total data.
</p>
<p>An additional measurement, <code>nrow_agg</code>, corresponding to the number of
aggregated rows is always added which, together with SUM, allows us to obtain
the mean if needed. As the value of this parameter, you can specify an
attribute of the table or the name that you want to assign to it (if it does
not exist, it is added to the table).
</p>


<h3>Value</h3>

<p>A <code>multistar</code>.
</p>


<h3>See Also</h3>

<p>Other multistar functions: 
<code><a href="#topic+add_dimension">add_dimension</a>()</code>,
<code><a href="#topic+multistar">multistar</a>()</code>,
<code><a href="#topic+relate_dimension">relate_dimension</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ms &lt;- multistar() |&gt;
  add_facts(
    fact_name = "mrs_age",
    fact_table = mrs_fact_age,
    measures = "n_deaths",
    nrow_agg = "count"
  ) |&gt;
  add_facts(
    fact_name = "mrs_cause",
    fact_table = mrs_fact_cause,
    measures = c("pneumonia_and_influenza_deaths", "other_deaths"),
    nrow_agg = "nrow_agg"
  )

</code></pre>

<hr>
<h2 id='add_geodimension_additional_attributes'>Add geodimension additional attributes</h2><span id='topic+add_geodimension_additional_attributes'></span>

<h3>Description</h3>

<p>Adds the geodimension attributes not explicitly selected in the query but
included in the definition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_geodimension_additional_attributes(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_geodimension_additional_attributes_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='default_attribute'>Default attribute</h2><span id='topic+default_attribute'></span>

<h3>Description</h3>

<p>Get the attribute with the most instances, if there is more than one.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_attribute(dq, dimension)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="default_attribute_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="default_attribute_+3A_dimension">dimension</code></td>
<td>
<p>A string, name of the geographic dimension.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string, name of the attribute.
</p>

<hr>
<h2 id='define_geoattribute'>Define geographic attributes</h2><span id='topic+define_geoattribute'></span><span id='topic+define_geoattribute.geomultistar'></span>

<h3>Description</h3>

<p>Defines a geographic attributes in two possible ways: Associates the
instances of attributes of the geographic dimension with the instances of a
geographic layer or defines it from the geometry of another previously
defined geographic attribute. Multiple attributes can be specified in the
<code>attribute</code> parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_geoattribute(
  gms,
  dimension = NULL,
  attribute = NULL,
  additional_attributes = NULL,
  from_layer = NULL,
  by = NULL,
  from_attribute = NULL
)

## S3 method for class 'geomultistar'
define_geoattribute(
  gms,
  dimension = NULL,
  attribute = NULL,
  additional_attributes = NULL,
  from_layer = NULL,
  by = NULL,
  from_attribute = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_geoattribute_+3A_gms">gms</code></td>
<td>
<p>A <code>geomultistar</code> object.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_dimension">dimension</code></td>
<td>
<p>A string, dimension name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_attribute">attribute</code></td>
<td>
<p>A vector, attribute names.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_additional_attributes">additional_attributes</code></td>
<td>
<p>A vector, attribute names.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_from_layer">from_layer</code></td>
<td>
<p>A <code>sf</code> object.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_by">by</code></td>
<td>
<p>a vector of correspondence of attributes of the dimension with the
<code>sf</code> layer structure.</p>
</td></tr>
<tr><td><code id="define_geoattribute_+3A_from_attribute">from_attribute</code></td>
<td>
<p>A string, attribute name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If defined from a layer (<code>from_layer</code> parameter), additionally the attributes
used for the join between the tables (dimension and layer tables) must be
indicated (<code>by</code> parameter).
</p>
<p>If defined from another attribute, it should have a finer granularity, to
obtain the result by grouping its instances.
</p>
<p>If no value is indicated in the <code>attribute</code> parameter, it is defined for all
those attributes of the dimension that do not have any previous definition,
they are obtained from the attribute indicated in the <code>from_attribute</code>
parameter.
</p>


<h3>Value</h3>

<p>A <code>geomultistar</code> object.
</p>


<h3>See Also</h3>

<p>Other geo functions: 
<code><a href="#topic+geomultistar">geomultistar</a>()</code>,
<code><a href="#topic+get_empty_geoinstances">get_empty_geoinstances</a>()</code>,
<code><a href="#topic+run_geoquery">run_geoquery</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gms &lt;- geomultistar(ms = ms_mrs, geodimension = "where") |&gt;
  define_geoattribute(
    attribute = "city",
    from_layer = usa_cities,
    by = c("city" = "city", "state" = "state")
  )

gms &lt;- gms |&gt;
  define_geoattribute(attribute = c("region", "all_where"),
                      from_attribute = "city")

gms &lt;- gms |&gt;
  define_geoattribute(from_attribute = "city")

gms &lt;- gms |&gt;
  define_geoattribute(attribute = "all_where",
                      from_layer = usa_nation)

</code></pre>

<hr>
<h2 id='define_geoattribute_from_attribute'>Define a geoattribute from another</h2><span id='topic+define_geoattribute_from_attribute'></span>

<h3>Description</h3>

<p>Define a geoattribute from another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_geoattribute_from_attribute(
  gms,
  dimension = NULL,
  attribute = NULL,
  from_attribute = NULL,
  additional_attributes = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_geoattribute_from_attribute_+3A_gms">gms</code></td>
<td>
<p>A <code>geomultistar</code> object.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_attribute_+3A_dimension">dimension</code></td>
<td>
<p>A string, dimension name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_attribute_+3A_attribute">attribute</code></td>
<td>
<p>A string, attribute name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_attribute_+3A_from_attribute">from_attribute</code></td>
<td>
<p>A string, attribute name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_attribute_+3A_additional_attributes">additional_attributes</code></td>
<td>
<p>A vector, attribute names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geomultistar</code> object.
</p>

<hr>
<h2 id='define_geoattribute_from_layer'>Define an attribute from a layer</h2><span id='topic+define_geoattribute_from_layer'></span>

<h3>Description</h3>

<p>Define an attribute from a layer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_geoattribute_from_layer(
  gms,
  dimension = NULL,
  attribute = NULL,
  from_layer = NULL,
  by = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_geoattribute_from_layer_+3A_gms">gms</code></td>
<td>
<p>A <code>geomultistar</code> object.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_layer_+3A_dimension">dimension</code></td>
<td>
<p>A string, dimension name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_layer_+3A_attribute">attribute</code></td>
<td>
<p>A string, attribute name.</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_layer_+3A_from_layer">from_layer</code></td>
<td>
<p>A <code>sf</code> object</p>
</td></tr>
<tr><td><code id="define_geoattribute_from_layer_+3A_by">by</code></td>
<td>
<p>a vector of correspondence of attributes of the dimension with the
<code>sf</code> structure.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geomultistar</code> object.
</p>

<hr>
<h2 id='define_selected_dimensions'>Define selected dimensions</h2><span id='topic+define_selected_dimensions'></span>

<h3>Description</h3>

<p>Include the selected dimensions and only the selected attributes in them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_selected_dimensions(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_selected_dimensions_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='define_selected_facts'>Define selected facts</h2><span id='topic+define_selected_facts'></span>

<h3>Description</h3>

<p>Measure names are stored as the names of the columns with the aggregation
functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>define_selected_facts(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="define_selected_facts_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='delete_unused_foreign_keys'>Delete unused foreign keys</h2><span id='topic+delete_unused_foreign_keys'></span>

<h3>Description</h3>

<p>In facts, remove foreign keys from dimensions not included in the result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_unused_foreign_keys(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_unused_foreign_keys_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='dereference_dimension'>Dereference a dimension</h2><span id='topic+dereference_dimension'></span>

<h3>Description</h3>

<p>Given a dimension, transform the fact table so that the primary key of the
dimension (which is a foreign key in the fact table) is replaced by the other
attributes of the dimension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dereference_dimension(ft, dimension, conversion = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dereference_dimension_+3A_ft">ft</code></td>
<td>
<p>A <code>fact_table</code> object.</p>
</td></tr>
<tr><td><code id="dereference_dimension_+3A_dimension">dimension</code></td>
<td>
<p>A <code>dimension_table</code> object.</p>
</td></tr>
<tr><td><code id="dereference_dimension_+3A_conversion">conversion</code></td>
<td>
<p>A boolean, indicates whether the attributes need to be
transformed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>fact_table</code> object.
</p>

<hr>
<h2 id='dimensional_query'><code>dimensional_query</code> S3 class</h2><span id='topic+dimensional_query'></span>

<h3>Description</h3>

<p>An empty <code>dimensional_query</code> object is created where you can select fact
measures, dimension attributes and filter dimension rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dimensional_query(ms = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimensional_query_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>


<h3>See Also</h3>

<p>Other query functions: 
<code><a href="#topic+filter_dimension">filter_dimension</a>()</code>,
<code><a href="#topic+run_query">run_query</a>()</code>,
<code><a href="#topic+select_dimension">select_dimension</a>()</code>,
<code><a href="#topic+select_fact">select_fact</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# ms_mrs &lt;- ct_mrs |&gt;
#  constellation_as_multistar()

# dq &lt;- dimensional_query(ms_mrs)

</code></pre>

<hr>
<h2 id='filter_dimension'>Filter dimension</h2><span id='topic+filter_dimension'></span><span id='topic+filter_dimension.dimensional_query'></span>

<h3>Description</h3>

<p>Allows you to define selection conditions for dimension rows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_dimension(dq, name = NULL, ...)

## S3 method for class 'dimensional_query'
filter_dimension(dq, name = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_dimension_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="filter_dimension_+3A_name">name</code></td>
<td>
<p>A string, name of the dimension.</p>
</td></tr>
<tr><td><code id="filter_dimension_+3A_...">...</code></td>
<td>
<p>Conditions, defined in exactly the same way as in <code>dplyr::filter</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Conditions can be defined on any attribute of the dimension (not only on
attributes selected in the query for the dimension). The selection is made
based on the function <code>dplyr::filter</code>. Conditions are defined in exactly the
same way as in that function.
</p>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>


<h3>See Also</h3>

<p>Other query functions: 
<code><a href="#topic+dimensional_query">dimensional_query</a>()</code>,
<code><a href="#topic+run_query">run_query</a>()</code>,
<code><a href="#topic+select_dimension">select_dimension</a>()</code>,
<code><a href="#topic+select_fact">select_fact</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dq &lt;- dimensional_query(ms_mrs) |&gt;
  filter_dimension(name = "when", when_happened_week &lt;= "03") |&gt;
  filter_dimension(name = "where", city == "Boston")

</code></pre>

<hr>
<h2 id='filter_selected_instances'>Filter selected instances</h2><span id='topic+filter_selected_instances'></span>

<h3>Description</h3>

<p>For some dimensions the instances to include have been defined, we have the
value of the primary key. They are filtered for both facts and dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_selected_instances(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_selected_instances_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='geomultistar'><code>geomultistar</code> S3 class</h2><span id='topic+geomultistar'></span>

<h3>Description</h3>

<p>A <code>geomultistar</code> object is created. Dimensions that contain geographic
information are indicated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geomultistar(ms = NULL, geodimension = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="geomultistar_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> structure.</p>
</td></tr>
<tr><td><code id="geomultistar_+3A_geodimension">geodimension</code></td>
<td>
<p>A vector of dimension names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geomultistar</code> object.
</p>


<h3>See Also</h3>

<p>Other geo functions: 
<code><a href="#topic+define_geoattribute">define_geoattribute</a>()</code>,
<code><a href="#topic+get_empty_geoinstances">get_empty_geoinstances</a>()</code>,
<code><a href="#topic+run_geoquery">run_geoquery</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# gms &lt;- geomultistar(ms = ms_mrs, geodimension = "where")

</code></pre>

<hr>
<h2 id='get_empty_geoinstances'>Get empty instances of a geographic attribute</h2><span id='topic+get_empty_geoinstances'></span><span id='topic+get_empty_geoinstances.geomultistar'></span>

<h3>Description</h3>

<p>Gets the instances of the given geographic attribute that do not have a
geometry associated with them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_empty_geoinstances(gms, dimension = NULL, attribute = NULL)

## S3 method for class 'geomultistar'
get_empty_geoinstances(gms, dimension = NULL, attribute = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_empty_geoinstances_+3A_gms">gms</code></td>
<td>
<p>A <code>geomultistar</code> object.</p>
</td></tr>
<tr><td><code id="get_empty_geoinstances_+3A_dimension">dimension</code></td>
<td>
<p>A string, dimension name.</p>
</td></tr>
<tr><td><code id="get_empty_geoinstances_+3A_attribute">attribute</code></td>
<td>
<p>A string, attribute name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>sf</code> object.
</p>


<h3>See Also</h3>

<p>Other geo functions: 
<code><a href="#topic+define_geoattribute">define_geoattribute</a>()</code>,
<code><a href="#topic+geomultistar">geomultistar</a>()</code>,
<code><a href="#topic+run_geoquery">run_geoquery</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gms &lt;- geomultistar(ms = ms_mrs, geodimension = "where") |&gt;
  define_geoattribute(
    attribute = "city",
    from_layer = usa_cities,
    by = c("city" = "city", "state" = "state")
  )

  empty &lt;- gms |&gt;
     get_empty_geoinstances(attribute = "city")

</code></pre>

<hr>
<h2 id='get_selected_measure_names'>get_selected_measure_names</h2><span id='topic+get_selected_measure_names'></span>

<h3>Description</h3>

<p>Get the names of the measures selected in the query.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_selected_measure_names(dq, ft)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_selected_measure_names_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="get_selected_measure_names_+3A_ft">ft</code></td>
<td>
<p>A <code>tibble</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of names.
</p>

<hr>
<h2 id='group_facts'>Group facts</h2><span id='topic+group_facts'></span>

<h3>Description</h3>

<p>Once the external keys have been possibly replaced, group the rows of facts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_facts(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_facts_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='group_table'>Group the records in the table</h2><span id='topic+group_table'></span>

<h3>Description</h3>

<p>Group the records in the table using the aggregation functions for the
measurements.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>group_table(ft)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="group_table_+3A_ft">ft</code></td>
<td>
<p>A <code>fact_table</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>fact_table</code> object.
</p>

<hr>
<h2 id='mrs_age_test'>Mortality Reporting System by Age Test</h2><span id='topic+mrs_age_test'></span>

<h3>Description</h3>

<p>Selection of data from the 2 Cities Mortality Reporting System by age
group, for the first 3 weeks of 1962.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_age_test
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Details</h3>

<p>The original dataset begins in 1962. For each week, in 122 US cities,
mortality figures by age group and cause, considered separately, are included
(i.e., the combination of age group and cause is not included). In the cause,
only a distinction is made between pneumonia or influenza and others.
</p>
<p>Two additional dates have been generated, which were not present in the
original dataset.
</p>


<h3>Source</h3>

<p><a href="https://catalog.data.gov/dataset/deaths-in-122-u-s-cities-1962-2016-122-cities-mortality-reporting-system">https://catalog.data.gov/dataset/deaths-in-122-u-s-cities-1962-2016-122-cities-mortality-reporting-system</a>
</p>

<hr>
<h2 id='mrs_fact_age'>Fact <em>age</em></h2><span id='topic+mrs_fact_age'></span>

<h3>Description</h3>

<p>Fact <em>age</em> table of the Mortality Reporting System. Defined from <code>ms_mrs</code>.
Foreign keys have been renamed, only a <em>when</em> dimension has been considered,
the type for the <em>when</em> dimension has been changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_fact_age
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='mrs_fact_cause'>Fact <em>cause</em></h2><span id='topic+mrs_fact_cause'></span>

<h3>Description</h3>

<p>Fact <em>cause</em> table of the Mortality Reporting System. Defined from <code>ms_mrs</code>.
Foreign keys have been renamed, only a <em>when</em> dimension has been considered,
the type for the <em>when</em> dimension has been changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_fact_cause
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='mrs_when'>Dimension <em>when</em></h2><span id='topic+mrs_when'></span>

<h3>Description</h3>

<p><em>When</em> dimension table of the Mortality Reporting System. Defined from
<code>ms_mrs</code>. The primary key has been renamed and its type has been changed. The
other attributes have also been renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_when
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='mrs_where'>Dimension <em>where</em></h2><span id='topic+mrs_where'></span>

<h3>Description</h3>

<p><em>Where</em> dimension table of the Mortality Reporting System. Defined from
<code>ms_mrs</code>. The primary key has been renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_where
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='mrs_who'>Dimension <em>who</em></h2><span id='topic+mrs_who'></span>

<h3>Description</h3>

<p><em>Who</em> dimension table of the Mortality Reporting System. Defined from
<code>ms_mrs</code>. The primary key has been renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mrs_who
</code></pre>


<h3>Format</h3>

<p>A <code>tibble</code>.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='ms_mrs'>Multistar for Mortality Reporting System</h2><span id='topic+ms_mrs'></span>

<h3>Description</h3>

<p>Multistar for the Mortality Reporting System considering age and cause
classification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_mrs
</code></pre>


<h3>Format</h3>

<p>A <code>multistar</code> object.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='ms_mrs_test'>Multistar for Mortality Reporting System Test</h2><span id='topic+ms_mrs_test'></span>

<h3>Description</h3>

<p>Multistar for the Mortality Reporting System considering age and cause
classification data test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ms_mrs_test
</code></pre>


<h3>Format</h3>

<p>A <code>multistar</code> object.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='multistar'><code>multistar</code> S3 class</h2><span id='topic+multistar'></span>

<h3>Description</h3>

<p>Creates an empty <code>multistar</code> object that allows you to import fact and
dimension tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multistar()
</code></pre>


<h3>Value</h3>

<p>A <code>multistar</code> object.
</p>


<h3>See Also</h3>

<p>Other multistar functions: 
<code><a href="#topic+add_dimension">add_dimension</a>()</code>,
<code><a href="#topic+add_facts">add_facts</a>()</code>,
<code><a href="#topic+relate_dimension">relate_dimension</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ms &lt;- multistar()

</code></pre>

<hr>
<h2 id='multistar_as_flat_table'>Export a <code>multistar</code> as a flat table</h2><span id='topic+multistar_as_flat_table'></span><span id='topic+multistar_as_flat_table.multistar'></span>

<h3>Description</h3>

<p>We can obtain a flat table, implemented using a <code>tibble</code>, from a <code>multistar</code>
(which can be the result of a query). If it only has one fact table, it is
not necessary to provide its name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multistar_as_flat_table(ms, fact = NULL)

## S3 method for class 'multistar'
multistar_as_flat_table(ms, fact = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multistar_as_flat_table_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> object.</p>
</td></tr>
<tr><td><code id="multistar_as_flat_table_+3A_fact">fact</code></td>
<td>
<p>A string, name of the fact.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ft &lt;- ms_mrs |&gt;
  multistar_as_flat_table(fact = "mrs_age")

ms &lt;- dimensional_query(ms_mrs) |&gt;
  select_dimension(name = "where",
                   attributes = c("city", "state")) |&gt;
  select_dimension(name = "when",
                   attributes = c("when_happened_year")) |&gt;
  select_fact(name = "mrs_age",
              measures = c("n_deaths")) |&gt;
  select_fact(
    name = "mrs_cause",
    measures = c("pneumonia_and_influenza_deaths", "other_deaths")
  ) |&gt;
  filter_dimension(name = "when", when_happened_week &lt;= "03") |&gt;
  filter_dimension(name = "where", city == "Boston") |&gt;
  run_query()

ft &lt;- ms |&gt;
  multistar_as_flat_table()

</code></pre>

<hr>
<h2 id='name_with_nexus'>Name with nexus</h2><span id='topic+name_with_nexus'></span>

<h3>Description</h3>

<p>Given a name, if it ends in &quot;/&quot; the nexus is the empty string, otherwise it
is &quot;/&quot;. Add the nexus.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>name_with_nexus(name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="name_with_nexus_+3A_name">name</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string.
</p>

<hr>
<h2 id='new_dimensional_query'><code>dimensional_query</code> S3 class</h2><span id='topic+new_dimensional_query'></span>

<h3>Description</h3>

<p>Internal low-level constructor that creates new objects with the correct
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_dimensional_query(ms = NULL)
</code></pre>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='new_fact_table'><code>fact_table</code> S3 class</h2><span id='topic+new_fact_table'></span>

<h3>Description</h3>

<p>Internal low-level constructor that creates new objects with the correct
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_fact_table(
  ft = tibble::tibble(),
  name = NULL,
  measures = NULL,
  agg_functions = NULL,
  nrow_agg = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_fact_table_+3A_ft">ft</code></td>
<td>
<p>A <code>tibble</code>, contains the fact table.</p>
</td></tr>
<tr><td><code id="new_fact_table_+3A_name">name</code></td>
<td>
<p>A string, name of the fact.</p>
</td></tr>
<tr><td><code id="new_fact_table_+3A_measures">measures</code></td>
<td>
<p>A vector of measurement names.</p>
</td></tr>
<tr><td><code id="new_fact_table_+3A_agg_functions">agg_functions</code></td>
<td>
<p>A vector of aggregation function names.</p>
</td></tr>
<tr><td><code id="new_fact_table_+3A_nrow_agg">nrow_agg</code></td>
<td>
<p>A string, measurement name for the number of rows aggregated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>fact_table</code> object.
</p>

<hr>
<h2 id='new_geomultistar'><code>geomultistar</code> S3 class</h2><span id='topic+new_geomultistar'></span>

<h3>Description</h3>

<p>Internal low-level constructor that creates new objects with the correct
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_geomultistar(ms = NULL, geodimension = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_geomultistar_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> structure.</p>
</td></tr>
<tr><td><code id="new_geomultistar_+3A_geodimension">geodimension</code></td>
<td>
<p>A vector of dimension names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>geomultistar</code> object.
</p>

<hr>
<h2 id='new_multistar'><code>multistar</code> S3 class</h2><span id='topic+new_multistar'></span>

<h3>Description</h3>

<p>Internal low-level constructor that creates new objects with the correct
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_multistar(fl = list(), dl = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_multistar_+3A_fl">fl</code></td>
<td>
<p>A <code>fact_table</code> list.</p>
</td></tr>
<tr><td><code id="new_multistar_+3A_dl">dl</code></td>
<td>
<p>A <code>dimension_table</code> list.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It only distinguishes between general and conformed dimensions, each
dimension has its own data. It can contain multiple fact tables.
</p>


<h3>Value</h3>

<p>A <code>multistar</code> object.
</p>

<hr>
<h2 id='new_multistar_empty'><code>multistar</code> S3 class</h2><span id='topic+new_multistar_empty'></span>

<h3>Description</h3>

<p>Internal low-level constructor that creates new objects with the correct
structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_multistar_empty()
</code></pre>


<h3>Value</h3>

<p>A <code>multistar</code> object.
</p>

<hr>
<h2 id='prepare_join'>Transform a <code>tibble</code> to join</h2><span id='topic+prepare_join'></span>

<h3>Description</h3>

<p>Transform all fields in a <code>tibble</code> to character type and replace the <code>NA</code>
with a specific value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare_join(tb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepare_join_+3A_tb">tb</code></td>
<td>
<p>A <code>tibble</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code>.
</p>

<hr>
<h2 id='reference_dimension'>Reference a dimension</h2><span id='topic+reference_dimension'></span>

<h3>Description</h3>

<p>Given a dimension, transform the fact table so that the attributes of the
dimension indicated as a parameter, which are in the fact table, are replaced
by the other attributes of the dimension.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reference_dimension(ft, dimension, attributes, conversion = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reference_dimension_+3A_ft">ft</code></td>
<td>
<p>A <code>fact_table</code> object.</p>
</td></tr>
<tr><td><code id="reference_dimension_+3A_dimension">dimension</code></td>
<td>
<p>A <code>dimension_table</code> object.</p>
</td></tr>
<tr><td><code id="reference_dimension_+3A_attributes">attributes</code></td>
<td>
<p>A vector of attribute names, attributes used to reference the dimension.</p>
</td></tr>
<tr><td><code id="reference_dimension_+3A_conversion">conversion</code></td>
<td>
<p>A boolean, indicates whether the attributes need to be
transformed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is used to replace a set of attributes in the fact table with the
generated key of the dimension.
</p>
<p>If necessary, it is also used for the inverse operation: replace the
generated key with the rest of attributes (dereference a dimension).
</p>


<h3>Value</h3>

<p>A <code>fact_table</code> object.
</p>

<hr>
<h2 id='relate_dimension'>Relate a dimension table to a fact table in a <code>multistar</code></h2><span id='topic+relate_dimension'></span><span id='topic+relate_dimension.multistar'></span>

<h3>Description</h3>

<p>Adding a dimension to a <code>multistar</code> can only relate to a fact table. You can
then relate to other fact tables in the <code>multistar</code> using this function. The
name of the fact table and its foreign key must be indicated. The referential
integrity of the instances of the facts is checked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>relate_dimension(ms, dimension_name = NULL, fact_name = NULL, fact_key = NULL)

## S3 method for class 'multistar'
relate_dimension(ms, dimension_name = NULL, fact_name = NULL, fact_key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="relate_dimension_+3A_ms">ms</code></td>
<td>
<p>A <code>multistar</code> object.</p>
</td></tr>
<tr><td><code id="relate_dimension_+3A_dimension_name">dimension_name</code></td>
<td>
<p>A string, name of dimension table.</p>
</td></tr>
<tr><td><code id="relate_dimension_+3A_fact_name">fact_name</code></td>
<td>
<p>A string, name of fact table.</p>
</td></tr>
<tr><td><code id="relate_dimension_+3A_fact_key">fact_key</code></td>
<td>
<p>A string, name of the dimension foreign key.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>multistar</code>.
</p>


<h3>See Also</h3>

<p>Other multistar functions: 
<code><a href="#topic+add_dimension">add_dimension</a>()</code>,
<code><a href="#topic+add_facts">add_facts</a>()</code>,
<code><a href="#topic+multistar">multistar</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ms &lt;- multistar() |&gt;
  add_facts(
    fact_name = "mrs_age",
    fact_table = mrs_fact_age,
    measures = "n_deaths",
    nrow_agg = "count"
  ) |&gt;
  add_facts(
    fact_name = "mrs_cause",
    fact_table = mrs_fact_cause,
    measures = c("pneumonia_and_influenza_deaths", "other_deaths"),
    nrow_agg = "nrow_agg"
  ) |&gt;
  add_dimension(
    dimension_name = "where",
    dimension_table = mrs_where,
    dimension_key = "where_pk",
    fact_name = "mrs_age",
    fact_key = "where_fk"
  ) |&gt;
  add_dimension(
    dimension_name = "when",
    dimension_table = mrs_when,
    dimension_key = "when_pk",
    fact_name = "mrs_age",
    fact_key = "when_fk",
    key_as_data = TRUE
  ) |&gt;
  add_dimension(
    dimension_name = "who",
    dimension_table = mrs_who,
    dimension_key = "who_pk",
    fact_name = "mrs_age",
    fact_key = "who_fk"
  ) |&gt;
  relate_dimension(dimension_name = "where",
                   fact_name = "mrs_cause",
                   fact_key = "where_fk") |&gt;
  relate_dimension(dimension_name = "when",
                   fact_name = "mrs_cause",
                   fact_key = "when_fk")

</code></pre>

<hr>
<h2 id='remove_duplicate_dimension_rows'>Remove duplicate dimension rows</h2><span id='topic+remove_duplicate_dimension_rows'></span>

<h3>Description</h3>

<p>After selecting only a few columns of the dimensions, there may be rows with
duplicate values. We eliminate duplicates and adapt facts to the new
dimensions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_duplicate_dimension_rows(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="remove_duplicate_dimension_rows_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='run_geoquery'>Get a geographic vector from a query</h2><span id='topic+run_geoquery'></span><span id='topic+run_geoquery.dimensional_query'></span>

<h3>Description</h3>

<p>After defining a query and geographic dimensions, run the query and select
the geographic data associated with it to get a geographic data layer as the
result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_geoquery(
  dq,
  unify_by_grain = TRUE,
  fact = NULL,
  dimension = NULL,
  attribute = NULL,
  wider = FALSE
)

## S3 method for class 'dimensional_query'
run_geoquery(
  dq,
  unify_by_grain = TRUE,
  fact = NULL,
  dimension = NULL,
  attribute = NULL,
  wider = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_geoquery_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="run_geoquery_+3A_unify_by_grain">unify_by_grain</code></td>
<td>
<p>A boolean, unify facts with the same grain.</p>
</td></tr>
<tr><td><code id="run_geoquery_+3A_fact">fact</code></td>
<td>
<p>A string, name of the fact.</p>
</td></tr>
<tr><td><code id="run_geoquery_+3A_dimension">dimension</code></td>
<td>
<p>A string, name of the geographic dimension.</p>
</td></tr>
<tr><td><code id="run_geoquery_+3A_attribute">attribute</code></td>
<td>
<p>A string, name of the geographic attribute to consider.</p>
</td></tr>
<tr><td><code id="run_geoquery_+3A_wider">wider</code></td>
<td>
<p>A boolean, avoid repeating geographic data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In the case of having several fact tables, as an option, we can indicate if
we do not want to unify the facts in the case of having the same grain.
</p>
<p>If the result only has one fact table, it is not necessary to provide its
name. Nor is it necessary to indicate the name of the geographic dimension if
there is only one available.
</p>
<p>If no attribute is specified, the geographic attribute of the result with
finer granularity is selected.
</p>
<p>In geographic layers, geographic objects are not repeated. The tables are
wide: for each object the rest of the attributes are defined as columns. By
means of the parameter <code>wider</code> we can indicate that we want a result of this
type.
</p>


<h3>Value</h3>

<p>A <code>sf</code> object.
</p>


<h3>See Also</h3>

<p>Other geo functions: 
<code><a href="#topic+define_geoattribute">define_geoattribute</a>()</code>,
<code><a href="#topic+geomultistar">geomultistar</a>()</code>,
<code><a href="#topic+get_empty_geoinstances">get_empty_geoinstances</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gms &lt;- geomultistar(ms = ms_mrs, geodimension = "where") |&gt;
  define_geoattribute(
    attribute = "city",
    from_layer = usa_cities,
    by = c("city" = "city", "state" = "state")
  )  |&gt;
  define_geoattribute(
    attribute = "state",
    from_layer = usa_states,
    by = c("state" = "state")
  ) |&gt;
  define_geoattribute(attribute = "region",
                      from_attribute = "state") |&gt;
  define_geoattribute(attribute = "all_where",
                      from_layer = usa_nation)

gdq &lt;- dimensional_query(gms) |&gt;
  select_dimension(name = "where",
                   attributes = c("state", "city")) |&gt;
  select_dimension(name = "when",
                   attributes = c("when_happened_year", "when_happened_week")) |&gt;
  select_fact(
    name = "mrs_age",
    measures = c("n_deaths")
  ) |&gt;
  select_fact(name = "mrs_cause",
              measures = c("pneumonia_and_influenza_deaths", "other_deaths")) |&gt;
  filter_dimension(name = "when", when_happened_week &lt;= "03") |&gt;
  filter_dimension(name = "where", state == "MA")

sf &lt;- gdq |&gt;
  run_geoquery()

sfw &lt;- gdq |&gt;
  run_geoquery(wider = TRUE)

</code></pre>

<hr>
<h2 id='run_query'>Run query</h2><span id='topic+run_query'></span><span id='topic+run_query.dimensional_query'></span>

<h3>Description</h3>

<p>Once we have selected the facts, dimensions and defined the conditions on the
instances, we can execute the query to obtain the result.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_query(dq, unify_by_grain = TRUE)

## S3 method for class 'dimensional_query'
run_query(dq, unify_by_grain = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_query_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="run_query_+3A_unify_by_grain">unify_by_grain</code></td>
<td>
<p>A boolean, unify facts with the same grain.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>As an option, we can indicate if we do not want to unify the facts in the
case of having the same grain.
</p>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>


<h3>See Also</h3>

<p>Other query functions: 
<code><a href="#topic+dimensional_query">dimensional_query</a>()</code>,
<code><a href="#topic+filter_dimension">filter_dimension</a>()</code>,
<code><a href="#topic+select_dimension">select_dimension</a>()</code>,
<code><a href="#topic+select_fact">select_fact</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
ms &lt;- dimensional_query(ms_mrs) |&gt;
  select_dimension(name = "where",
                   attributes = c("city", "state")) |&gt;
  select_dimension(name = "when",
                   attributes = c("when_happened_year")) |&gt;
  select_fact(
    name = "mrs_age",
    measures = c("n_deaths"),
    agg_functions = c("MAX")
  ) |&gt;
  select_fact(
    name = "mrs_cause",
    measures = c("pneumonia_and_influenza_deaths", "other_deaths")
  ) |&gt;
  filter_dimension(name = "when", when_happened_week &lt;= "03") |&gt;
  filter_dimension(name = "where", city == "Boston") |&gt;
  run_query()

</code></pre>

<hr>
<h2 id='save_as_geopackage'>Save as geopackage</h2><span id='topic+save_as_geopackage'></span>

<h3>Description</h3>

<p>Save the result of a geoquery in a geopackage. The result can be a layer in
the form of a flat table or a list consisting of a layer and a description
table of the variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_as_geopackage(sf, layer_name, file_name = NULL, filepath = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_as_geopackage_+3A_sf">sf</code></td>
<td>
<p>A <code>tibble</code> or a list of <code>tibble</code> objects.</p>
</td></tr>
<tr><td><code id="save_as_geopackage_+3A_layer_name">layer_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="save_as_geopackage_+3A_file_name">file_name</code></td>
<td>
<p>A string.</p>
</td></tr>
<tr><td><code id="save_as_geopackage_+3A_filepath">filepath</code></td>
<td>
<p>A string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tibble</code> or a list of <code>tibble</code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gms &lt;- geomultistar(ms = ms_mrs, geodimension = "where") |&gt;
  define_geoattribute(
    attribute = "city",
    from_layer = usa_cities,
    by = c("city" = "city", "state" = "state")
  )  |&gt;
  define_geoattribute(
    attribute = "state",
    from_layer = usa_states,
    by = c("state" = "state")
  ) |&gt;
  define_geoattribute(attribute = "region",
                      from_attribute = "state") |&gt;
  define_geoattribute(attribute = "all_where",
                      from_layer = usa_nation)

gdq &lt;- dimensional_query(gms) |&gt;
  select_dimension(name = "where",
                   attributes = c("state", "city")) |&gt;
  select_dimension(name = "when",
                   attributes = c("when_happened_year", "when_happened_week")) |&gt;
  select_fact(
    name = "mrs_age",
    measures = c("n_deaths")
  ) |&gt;
  select_fact(name = "mrs_cause",
              measures = c("pneumonia_and_influenza_deaths", "other_deaths")) |&gt;
  filter_dimension(name = "when", when_happened_week &lt;= "03") |&gt;
  filter_dimension(name = "where", state == "MA")

sf &lt;- gdq |&gt;
  run_geoquery(wider = TRUE)

save_as_geopackage(sf, "city", filepath = tempdir())

</code></pre>

<hr>
<h2 id='select_dimension'>Select dimension</h2><span id='topic+select_dimension'></span><span id='topic+select_dimension.dimensional_query'></span>

<h3>Description</h3>

<p>To add a dimension in a <code>dimensional_query</code> object, we have to define its
name and a subset of the dimension attributes. If only the name of the
dimension is indicated, it is considered that all its attributes should be
added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_dimension(dq, name = NULL, attributes = NULL)

## S3 method for class 'dimensional_query'
select_dimension(dq, name = NULL, attributes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_dimension_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="select_dimension_+3A_name">name</code></td>
<td>
<p>A string, name of the dimension.</p>
</td></tr>
<tr><td><code id="select_dimension_+3A_attributes">attributes</code></td>
<td>
<p>A vector of attribute names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>


<h3>See Also</h3>

<p>Other query functions: 
<code><a href="#topic+dimensional_query">dimensional_query</a>()</code>,
<code><a href="#topic+filter_dimension">filter_dimension</a>()</code>,
<code><a href="#topic+run_query">run_query</a>()</code>,
<code><a href="#topic+select_fact">select_fact</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dq &lt;- dimensional_query(ms_mrs) |&gt;
  select_dimension(name = "where",
                  attributes = c("city", "state")) |&gt;
  select_dimension(name = "when")

</code></pre>

<hr>
<h2 id='select_fact'>Select fact</h2><span id='topic+select_fact'></span><span id='topic+select_fact.dimensional_query'></span>

<h3>Description</h3>

<p>To define the fact to be consulted, its name is indicated, optionally, a
vector of names of selected measures and another of aggregation functions are
also indicated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>select_fact(dq, name = NULL, measures = NULL, agg_functions = NULL)

## S3 method for class 'dimensional_query'
select_fact(dq, name = NULL, measures = NULL, agg_functions = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="select_fact_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
<tr><td><code id="select_fact_+3A_name">name</code></td>
<td>
<p>A string, name of the fact.</p>
</td></tr>
<tr><td><code id="select_fact_+3A_measures">measures</code></td>
<td>
<p>A vector of measure names.</p>
</td></tr>
<tr><td><code id="select_fact_+3A_agg_functions">agg_functions</code></td>
<td>
<p>A vector of aggregation function names. If none is
indicated, those defined in the fact table are considered.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the name of any measure is not indicated, only the one corresponding to
the number of aggregated rows is included, which is always included.
</p>
<p>If no aggregation function is included, those defined for the measures are
considered.
</p>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>


<h3>See Also</h3>

<p>Other query functions: 
<code><a href="#topic+dimensional_query">dimensional_query</a>()</code>,
<code><a href="#topic+filter_dimension">filter_dimension</a>()</code>,
<code><a href="#topic+run_query">run_query</a>()</code>,
<code><a href="#topic+select_dimension">select_dimension</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
dq &lt;- dimensional_query(ms_mrs) |&gt;
  select_fact(
    name = "mrs_age",
    measures = c("n_deaths"),
    agg_functions = c("MAX")
  )

dq &lt;- dimensional_query(ms_mrs) |&gt;
  select_fact(name = "mrs_age",
             measures = c("n_deaths"))

dq &lt;- dimensional_query(ms_mrs) |&gt;
  select_fact(name = "mrs_age")

</code></pre>

<hr>
<h2 id='st_mrs_age_test'>Star Schema for Mortality Reporting System by Age Test</h2><span id='topic+st_mrs_age_test'></span>

<h3>Description</h3>

<p>Star Schema for the Mortality Reporting System considering the age
classification data test.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_mrs_age_test
</code></pre>


<h3>Format</h3>

<p>A <code>star_schema</code> object.
</p>


<h3>Source</h3>

<p><a href="https://CRAN.R-project.org/package=starschemar">https://CRAN.R-project.org/package=starschemar</a>
</p>

<hr>
<h2 id='uk_london_boroughs'>UK London Boroughs</h2><span id='topic+uk_london_boroughs'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uk_london_boroughs
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Details</h3>

<p>Since not so much detail is needed, the geometry has been simplified 20 m.
</p>


<h3>Source</h3>

<p><a href="https://data.london.gov.uk/dataset/statistical-gis-boundary-files-london">https://data.london.gov.uk/dataset/statistical-gis-boundary-files-london</a>
</p>

<hr>
<h2 id='unify_facts_by_grain'>Unify facts by grain</h2><span id='topic+unify_facts_by_grain'></span>

<h3>Description</h3>

<p>Unify facts by grain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unify_facts_by_grain(dq)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unify_facts_by_grain_+3A_dq">dq</code></td>
<td>
<p>A <code>dimensional_query</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>dimensional_query</code> object.
</p>

<hr>
<h2 id='usa_cities'>USA Cities, 2014</h2><span id='topic+usa_cities'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed, and
only includes the Mortality Reporting System cities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_cities
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Source</h3>

<p><a href="https://earthworks.stanford.edu/catalog/stanford-bx729wr3020">https://earthworks.stanford.edu/catalog/stanford-bx729wr3020</a>
</p>

<hr>
<h2 id='usa_counties'>USA Counties, 2018</h2><span id='topic+usa_counties'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed, and
only includes the Mortality Reporting System counties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_counties
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Details</h3>

<p>Some counties appear with the same repeated name within the same state, they
are the following: Baltimore, MD; Richmond, VA; St. Louis, MO. Since they are
accessed by name (county and state), those of the same name within the state
have been grouped together.
</p>


<h3>Source</h3>

<p><a href="https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_county_20m.zip">https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_county_20m.zip</a>
</p>

<hr>
<h2 id='usa_divisions'>USA Divisions, 2018</h2><span id='topic+usa_divisions'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_divisions
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Source</h3>

<p><a href="https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_division_20m.zip">https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_division_20m.zip</a>
</p>

<hr>
<h2 id='usa_nation'>USA Nation, 2018</h2><span id='topic+usa_nation'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_nation
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Source</h3>

<p><a href="https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_nation_20m.zip">https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_nation_20m.zip</a>
</p>

<hr>
<h2 id='usa_regions'>USA Regions, 2018</h2><span id='topic+usa_regions'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_regions
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Source</h3>

<p><a href="https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_region_20m.zip">https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_region_20m.zip</a>
</p>

<hr>
<h2 id='usa_states'>USA States, 2018</h2><span id='topic+usa_states'></span>

<h3>Description</h3>

<p>From the original dataset, some fields have been selected and renamed, and
only includes the Mortality Reporting System states.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>usa_states
</code></pre>


<h3>Format</h3>

<p>A <code>sf</code>.
</p>


<h3>Source</h3>

<p><a href="https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_state_20m.zip">https://www2.census.gov/geo/tiger/GENZ2018/shp/cb_2018_us_state_20m.zip</a>
</p>

<hr>
<h2 id='validate_names'>Validate names</h2><span id='topic+validate_names'></span>

<h3>Description</h3>

<p>Validate names
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_names(defined_names, names, concept = "name", repeated = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_names_+3A_defined_names">defined_names</code></td>
<td>
<p>A vector of strings, defined attribute names.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_names">names</code></td>
<td>
<p>A vector of strings, new attribute names.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_concept">concept</code></td>
<td>
<p>A string, treated concept.</p>
</td></tr>
<tr><td><code id="validate_names_+3A_repeated">repeated</code></td>
<td>
<p>A boolean, repeated names allowed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of strings, names.
</p>

<hr>
<h2 id='widen_flat_table'>widen_flat_table</h2><span id='topic+widen_flat_table'></span>

<h3>Description</h3>

<p>Makes the pk fields the primary key of the table. The rest of the fields that
prevent them from being so, are extracted to another table. The original
table is widened by combining the extracted fields with the measures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>widen_flat_table(ft, pk, measures)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="widen_flat_table_+3A_ft">ft</code></td>
<td>
<p>A <code>tibble</code> object.</p>
</td></tr>
<tr><td><code id="widen_flat_table_+3A_pk">pk</code></td>
<td>
<p>A vector of names.</p>
</td></tr>
<tr><td><code id="widen_flat_table_+3A_measures">measures</code></td>
<td>
<p>A vector of names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code>tibble</code> objects.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
