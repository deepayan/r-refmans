<!DOCTYPE html><html lang="en"><head><title>Help for package DOVE</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DOVE}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dove'><p>Durability of Vaccine Efficacy</p></a></li>
<li><a href='#dove2'><p>Durability of Vaccine Efficacy</p></a></li>
<li><a href='#doveData'><p>Toy Dataset For Illustration</p></a></li>
<li><a href='#plot'><p>Plot Estimated Vaccine Efficacy</p></a></li>
<li><a href='#print'><p>Print the Primary Results of a dove() or dove2() Analysis</p></a></li>
<li><a href='#vaccine'><p>Specify Vaccination Variables and Entry Time</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Durability of Vaccine Efficacy</td>
</tr>
<tr>
<td>Version:</td>
<td>1.10</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-12-13</td>
</tr>
<tr>
<td>Description:</td>
<td>Implements maximum likelihood methods for 
    evaluating the durability of vaccine efficacy in a randomized, 
    placebo-controlled clinical trial with staggered enrollment of participants 
    and potential crossover of placebo recipients before the end of the trial. 
    Lin, D. Y., Zeng, D., and Gilbert, P. B. (2021) 
    &lt;<a href="https://doi.org/10.1093%2Fcid%2Fciab226">doi:10.1093/cid/ciab226</a>&gt;
    and 
    Lin, D. Y., Gu, Y., Zeng, D., Janes, H. E., and Gilbert, P. B. (2021) 
    &lt;<a href="https://doi.org/10.1093%2Fcid%2Fciab630">doi:10.1093/cid/ciab630</a>&gt;. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0), methods, survival</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.4.6), stats, graphics, RcppArmadillo</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>utils, knitr</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Collate:</td>
<td>'VEplot_type2.R' 'VEcal.R' 'postProcess.R' 'CoxReg.R'
'RcppExports.R' 'VEplot_type1.R' 'postInterval.R' 'postBeta.R'
'infBeta.R' 'postProcessDove.R' 'scores.R' 'loc.R' 'vcFit.R'
'verifyInputs.R' 'dove.R' 'dove2.R' 'doveData.R' 'iterations.R'
'plot.DOVE.R' 'postVE.R' 'print.DOVE.R' 'vaccine.R'</td>
</tr>
<tr>
<td>Author:</td>
<td>Danyu Lin [aut],
  Yu Gu [aut],
  Donglin Zeng [aut],
  Shannon T. Holloway [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shannon T. Holloway &lt;shannon.t.holloway@gmail.com&gt;</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-12-13 23:04:21 UTC; 19194</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-12-13 23:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='dove'>Durability of Vaccine Efficacy</h2><span id='topic+dove'></span>

<h3>Description</h3>

<p>Estimates the potentially waning long-term efficacy of vaccines in
randomized, placebo-controlled clinical trials with staggered
enrollment of participants and sequential crossover of placebo recipients.
The hazard ratio for the vaccine effect is a nonparametric 
function of time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dove(formula, data, plots = TRUE, timePts = NULL, bandwidth = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dove_+3A_formula">formula</code></td>
<td>
<p>A formula object, with the response on the left-hand side of a
'~' operator, and the covariates and vaccine() function on the right-hand side.  
The response must be a survival object as returned by the 'Surv'
function of the <span class="pkg">survival</span> package. See Details for further information.
The vaccine() function must be used to specify the entry time and
vaccination information. See ?vaccine and Details for further
information.</p>
</td></tr>
<tr><td><code id="dove_+3A_data">data</code></td>
<td>
<p>A data.frame object. The data.frame in which to interpret the
variable names in formula. Must contain the entry time, the event time,
the event status, the vaccination status,
the vaccination time, and any covariates. All time variables must
be provided in units of days. See Details.</p>
</td></tr>
<tr><td><code id="dove_+3A_plots">plots</code></td>
<td>
<p>A logical object. If TRUE, plots of the estimated
curve of vaccine efficacy in reducing attack rate and
the estimated curve of vaccine efficacy in reducing the hazard rate
will be automatically generated. If FALSE, plots will not be
generated, but the data are available through the returned value object.</p>
</td></tr>
<tr><td><code id="dove_+3A_timepts">timePts</code></td>
<td>
<p>A numeric vector object or NULL. The endpoints of the time 
periods for which the vaccine efficacy in reducing the attack rate is
to be shown. If NULL, a default sequence of 60-day intervals is used.
If tau &lt; 60 days, this input must be provided.</p>
</td></tr>
<tr><td><code id="dove_+3A_bandwidth">bandwidth</code></td>
<td>
<p>A numeric object. Tuning parameter for the 
bandwidth used for kernel estimation of the vaccine efficacy in 
reducing the hazard rate; this input is ignored if plots=FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In dove(), the hazard ratio for the vaccine effect is a nonparametric 
function of time for which
confidence intervals are not provided. The sister function, dove2(), 
assumes that the log hazard ratio for the vaccine effect is a piecewise 
linear function of time; 
it provides more precise and more stable estimates of vaccine efficacy on 
the hazard rate and includes proper confidence intervals.
</p>
<p>The information required for an analysis is 
</p>

<dl>
<dt>Entry Time:</dt><dd><p>Calendar time when the participant enters the 
trial.</p>
</dd>
<dt>Event Time:</dt><dd><p>Calendar time when the participant experiences
the clinical event of interest (e.g., symptomatic COVID-19) or their
follow-up ends, whichever occurs first.</p>
</dd>
<dt>Event Status:</dt><dd><p>Binary indicator taking value 1 if the clinical
event of interest occurs before the end of follow-up and 0 otherwise.</p>
</dd>
<dt>Vaccination Status:</dt><dd><p>Binary indicator taking value 1 if
vaccination occurs before the end of follow-up and 0 otherwise.</p>
</dd>
<dt>Vaccination Time:</dt><dd><p>Calendar time when vaccination takes place,
with an arbitrary non-negative value if the participant is not vaccinated.</p>
</dd>
<dt>Covariates:</dt><dd><p>Baseline covariates (e.g., priority group, age, 
ethnicity).</p>
</dd>
</dl>

<p>Note that all times are to be specified relative to the start of the trial
and are specified in units of days. Thus, for individuals that received 
vaccination, entry_time &lt;= vaccination_time &lt;= event_time. And for
individuals that did not receive vaccination, 
entry_time &lt;= event_time; for these participants,
vaccination_time can take any non-negative value (including NA or Inf).
</p>
<p>The general structure of the formula input is
</p>
<pre>
  Surv(event_time, event_status) ~ covariates + 
    vaccine(entry_time, vaccination_time, vaccination_status)
  </pre>
<p>The response variable must be a survival analysis object as returned by the
'Surv()' function of package <span class="pkg">survival</span>, where event_time is the
observation time (formal argument 'time') and event_status is the status
indicator input (formal argument 'event'). Specifically, 
</p>
<pre>Surv(time = event_time, event = event_status)</pre>
<p>The covariates can include categorical variables, for which
all other categories are compared to the first category.
</p>
<p>The vaccination and entry_time information must be specified through function 
'vaccine()'. Specifically, 
</p>
<pre>vaccine(entry_time, vaccination_status, vaccination_time)</pre>
<p>For participants that did not receive the vaccine, vaccination_time
can take any non-negative value (including NA or Inf). For individuals
that received vaccination, if 
vaccination_time &gt; event_time, or vaccination_time &lt; entry_time, the 
case will be removed from the analysis and a message will be generated.
</p>


<h3>Value</h3>

<p>An S3 object of class DOVE containing a list with elements
</p>
<table role = "presentation">
<tr><td><code>covariates</code></td>
<td>
<p>A matrix containing the estimated hazard ratio of each
covariate, together with the (estimated) standard error, the 95%
confidence interval, and the two-sided p-value for testing no covariate
effect.</p>
</td></tr>
<tr><td><code>vaccine</code></td>
<td>
<p>A list containing two elements. The first element is
the matrix containing the estimates of the vaccine efficacy in
reducing the attack rate at all observed event 
times (VE_a), together with the 95% 
confidence intervals, as well as the vaccine efficacy in
reducing the hazard rate at these times (VE_h). These results 
will be shown in graphical form if input plots = TRUE.
The second element is the matrix containing the estimates of vaccine
efficacy in reducing the attack rate over successive time periods,
together with the 95% confidence intervals.
</p>
</td></tr>
</table>


<h3>References</h3>

<p>Lin, DY, Zeng, D, and Gilbert, PB (2021). Evaluating the 
long-term efficacy of COVID-19 vaccines. Clinical Infectious Diseases, 
ciab226, https://doi.org/10.1093/cid/ciab226.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(doveData)

set.seed(1234)

ind &lt;- sample(1:nrow(x = doveData), 500, FALSE)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full analysis of the doveData dataset

dove(formula = Surv(event.time, event.status) ~ priority + sex + 
                vaccine(entry.time, vaccine.status, vaccine.time),
     data = doveData[ind,])
</code></pre>

<hr>
<h2 id='dove2'>Durability of Vaccine Efficacy</h2><span id='topic+dove2'></span>

<h3>Description</h3>

<p>Estimates the potentially waning long-term efficacy of vaccines in
randomized, placebo-controlled clinical trials with staggered
enrollment of participants and sequential crossover of placebo recipients.
The log hazard ratio for the vaccine effect is assumed to be a 
piecewise linear function of time since vaccination, whereas the
baseline hazard function is nonparametric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dove2(
  formula,
  data,
  plots = TRUE,
  changePts = NULL,
  constantVE = FALSE,
  timePts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dove2_+3A_formula">formula</code></td>
<td>
<p>A formula object, with the response on the left-hand side of a
'~' operator, and the covariates and vaccine() function on the right-hand side.  
The response must be a survival analysis object as returned by the 'Surv'
function of the <span class="pkg">survival</span> package. See Details for further information.
The vaccine() function must be used to specify the entry time and
vaccination information. See ?vaccine and Details for further
information.</p>
</td></tr>
<tr><td><code id="dove2_+3A_data">data</code></td>
<td>
<p>A data.frame object. The data.frame in which to interpret the
variable names in formula. Must contain the entry time, the event time,
the event status, the vaccination status,
the vaccination time, and the covariates. See Details.</p>
</td></tr>
<tr><td><code id="dove2_+3A_plots">plots</code></td>
<td>
<p>A logical object. If TRUE (default), plots of the estimated 
VE in reducing the attack rate, the estimated VE in reducing the hazard rate, 
and their 95% confidence intervals will be automatically generated. 
If FALSE, plots will not be generated.</p>
</td></tr>
<tr><td><code id="dove2_+3A_changepts">changePts</code></td>
<td>
<p>A numerical vector object or NULL. The potential change
points (in days) of the piece-wise log-linear hazard ratio for the
vaccine effect. See Details 
for further information. If NULL, one change point will automatically be 
selected among {28, 35, 42, 49, 56} (Weeks 4, 5, 6, 7, 8) by the 
Akaike information criterion (AIC).</p>
</td></tr>
<tr><td><code id="dove2_+3A_constantve">constantVE</code></td>
<td>
<p>A logical object. If FALSE (default), VE is allowed to 
vary after the last change point. If TRUE, VE is assumed to be 
constant after the last change point.</p>
</td></tr>
<tr><td><code id="dove2_+3A_timepts">timePts</code></td>
<td>
<p>A numerical vector object or NULL. The endpoints (in days) 
of the time periods for which the VE in reducing the attack rate are to
be estimated. If NULL, a default sequence 
<code class="reqn">t_1, 2t_1, 3t_1, \dots</code> will be used, where <code class="reqn">t_1</code> is the first 
change point. The sequence ends at the maximum of the event times from all 
participants. This input is ignored when constantVE = TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In dove2(), the log hazard ratio for the vaccine effect is a piecewise 
linear function of time since vaccination.
Its sister function, dove(), allows the hazard ratio to be a 
nonparametric function of time for which confidence intervals are not 
provided. The approach implemented in dove2() provides more precise and 
more stable estimates of vaccine efficacy on the hazard rate and includes 
proper confidence intervals.
</p>
<p>The information required for an analysis is 
</p>

<dl>
<dt>Entry Time:</dt><dd><p>Calendar time when the participant enters the 
trial.</p>
</dd>
<dt>Event Time:</dt><dd><p>Calendar time when the participant experiences
the clinical event of interest (e.g., symptomatic COVID-19) or the
follow-up ends, whichever occurs first.</p>
</dd>
<dt>Event Status:</dt><dd><p>Binary indicator taking value 1 if the clinical
event of interest occurs before the end of follow-up and 0 otherwise.</p>
</dd>
<dt>Vaccination Status:</dt><dd><p>Binary indicator taking value 1 if
vaccination occurs before the end of follow-up and 0 otherwise.</p>
</dd>
<dt>Vaccination Time:</dt><dd><p>Calendar time when vaccination takes place,
with NA, Inf, or an arbitrary non-negative value
if the participant is not vaccinated.</p>
</dd>
<dt>Covariates:</dt><dd><p>Baseline covariates (e.g., priority group, age, 
ethnicity).</p>
</dd>
</dl>

<p>Note that all the time variables are measured from the start of the 
clinical trial and are specified in units of days. 
For each individual, the entry_time, event_time, and vaccination_time must satisfy
entry_time <code class="reqn">\le</code> event_time and entry_time <code class="reqn">\le</code> vaccination_time. 
If entry_time &gt; event_time or entry_time &gt; vaccination_time, the case will be 
removed from the analysis and a message will be generated.  
</p>
<p>The general structure of the formula input is
</p>
<pre>
  Surv(event_time, event_status) ~ covariates + 
    vaccine(entry_time, vaccination_status, vaccination_time)
  </pre>
<p>The response variable must be a survival analysis object as returned by the
'Surv()' function of package <span class="pkg">survival</span>, where event_time is the
observation time (formal argument 'time') and event_status is the status
indicator input (formal argument 'event'). Specifically, 
</p>
<pre>Surv(time = event_time, event = event_status)</pre>
<p>The covariates can be either numerical or categorical.
If categorical covariates are provided, all other categories are compared to the first category.
A model without covariates is also allowed.
</p>


<h3>Value</h3>

<p>An S3 object of class DOVE containing a list with elements
</p>
<table role = "presentation">
<tr><td><code>call</code></td>
<td>
<p>The unevaluated call.</p>
</td></tr>
<tr><td><code>changePts</code></td>
<td>
<p>The changePts of the analysis.</p>
</td></tr>
<tr><td><code>covariates</code></td>
<td>
<p>A matrix containing the estimated (log) hazard ratio of
each covariate, together with the estimated standard error, the 95%
confidence interval, and the two-sided p-value for testing no covariate
effect. NA if no covariate is included in the model.</p>
</td></tr>
<tr><td><code>vaccine</code></td>
<td>
<p>A list containing one or three elements, depending on the 
value of constantVE. 
If constantVE = TRUE, the only element is named 'VE' and is a vector 
containing the estimate of constant VE, its standard error estimate, 
and the 95% confidence interval.
If constantVE = FALSE, three matrices are returned. The first matrix 
named 'VE_a' contains the daily VE estimates in reducing the attack 
rate, together with the 95% confidence intervals. The second matrix 
named 'VE_h' contains the daily VE estimates in reducing the hazard rate,
together with the 95% confidence intervals.
The third matrix named 'VE_period' contains the estimates of VE in
reducing the attack rate over successive time periods according to
timePts, together with the 95% confidence intervals.</p>
</td></tr>
</table>


<h3>References</h3>

<p>Lin, D-Y, Gu, Y., Zeng, D., Janes, H. E., and Gilbert, P. B. (2021). 
Evaluating vaccine efficacy against SARS-CoV-2 infection. 
Clinical Infectious Diseases, ciab630, https://doi.org/10.1093/cid/ciab630.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(doveData)

set.seed(1234)
smp &lt;- sample(1L:nrow(x = doveData), size = 2500L)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full analysis of the doveData dataset

# Fit the model with default settings
dove2(formula = Surv(event.time, event.status) ~ priority + sex + 
                vaccine(entry.time, vaccine.status, vaccine.time), 
      data = doveData[smp,])

# Specify Week 4 as the change point
# Assume a potentially waning VE after 4 weeks
# Estimate VE_a over 0-4, 4-16, 16-28, 28-40 weeks
dove2(formula = Surv(event.time, event.status) ~ priority + sex + 
                vaccine(entry.time, vaccine.status, vaccine.time), 
      data = doveData[smp,],
      changePts = 4*7,
      timePts = c(4, 16, 28, 40)*7)
      
# Specify multiple change points at Weeks 4 and 8
# Assume a constant VE after 8 weeks
dove2(formula = Surv(event.time, event.status) ~ priority + sex + 
                vaccine(entry.time, vaccine.status, vaccine.time), 
      data = doveData[smp,],
      changePts = c(4, 8)*7,
      constantVE = TRUE)
</code></pre>

<hr>
<h2 id='doveData'>Toy Dataset For Illustration</h2><span id='topic+doveData'></span>

<h3>Description</h3>

<p>This data set is provided to illustrate the use of
the software. It was simulated under a priority-tier dependent crossover 
design with a ramping vaccine effect between dose 1 and dose 2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(doveData)
</code></pre>


<h3>Format</h3>

<p>doveData is a data.frame containing 40,000 participants The
data.frame contains 7 columns, 
</p>

<dl>
<dt>entry.time</dt><dd><p>The entry time in days</p>
</dd>
<dt>event.time</dt><dd><p>The observation time in days</p>
</dd>
<dt>event.status</dt><dd><p>The event indicator (1=event; 0=censored)</p>
</dd>
<dt>vaccine.time</dt><dd><p>The time of vaccination in days; 
NA if not vaccinated</p>
</dd>
<dt>vaccine.status</dt><dd><p>The indicator of vaccination 
(1 = vaccinated; 0 = not vaccinated)</p>
</dd>
<dt>priority</dt><dd><p>A composite baseline risk score taking values 1-5</p>
</dd>
<dt>sex</dt><dd><p>A binary indicator of sex (male/female)</p>
</dd>
</dl>


<hr>
<h2 id='plot'>Plot Estimated Vaccine Efficacy</h2><span id='topic+plot'></span><span id='topic+plot.DOVE'></span>

<h3>Description</h3>

<p>Generates plots of the estimated vaccine efficacy in reducing attack rate, 
the estimated vaccine efficacy in reducing the hazard rate, 
and their 95% confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DOVE'
plot(x, y, ..., bandwidth = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_+3A_x">x</code></td>
<td>
<p>An DOVE object. The value object returned by dove() and dove2().</p>
</td></tr>
<tr><td><code id="plot_+3A_y">y</code></td>
<td>
<p>ignored.</p>
</td></tr>
<tr><td><code id="plot_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="plot_+3A_bandwidth">bandwidth</code></td>
<td>
<p>A numeric vector object. A tuning parameter for the 
bandwidth used for kernel estimation of the vaccine efficacy in 
reducing the hazard rate for objects returned by dove(). This
input is ignored for objects returned by dove2().</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to produce graphical elements.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(doveData)

set.seed(1234)

smp &lt;- sample(1:nrow(x = doveData), 500, FALSE)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full dove() analysis of the doveData dataset

result &lt;- dove(formula = Surv(event.time, event.status) ~ priority + sex + 
                         vaccine(entry.time, vaccine.status, vaccine.time),
               data = doveData[smp,])

plot(x = result, bandwidth = c(0.5,1.0))

set.seed(1234)
smp &lt;- sample(1L:nrow(x = doveData), size = 2500L)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full dove2() analysis of the doveData dataset

# Fit the model with default settings
result &lt;- dove2(formula = Surv(event.time, event.status) ~ priority + sex + 
                          vaccine(entry.time, vaccine.status, vaccine.time), 
                data = doveData[smp,])

plot(x = result)

</code></pre>

<hr>
<h2 id='print'>Print the Primary Results of a dove() or dove2() Analysis</h2><span id='topic+print'></span><span id='topic+print.DOVE'></span>

<h3>Description</h3>

<p>Print the primary results of a dove() or dove2() analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'DOVE'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>An DOVE object. The value object returned by a call to dove() or
dove2()</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called to display key results.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(doveData)

set.seed(1234)

smp &lt;- sample(1:nrow(x = doveData), 500, FALSE)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full dove() analysis of the doveData dataset

result &lt;- dove(formula = Surv(event.time, event.status) ~ priority + sex + 
                         vaccine(entry.time, vaccine.status, vaccine.time),
               data = doveData[smp,])

print(x = result)

set.seed(1234)
smp &lt;- sample(1L:nrow(x = doveData), size = 2500L)

# NOTE: This sample size is chosen for example only -- larger data sets
# should be used.
# See the vignette for a full dove2() analysis of the doveData dataset

# Fit the model with default settings
result &lt;- dove2(formula = Surv(event.time, event.status) ~ priority + sex + 
                          vaccine(entry.time, vaccine.status, vaccine.time), 
                data = doveData[smp,])

print(x = result)

</code></pre>

<hr>
<h2 id='vaccine'>Specify Vaccination Variables and Entry Time</h2><span id='topic+vaccine'></span>

<h3>Description</h3>

<p>This function is used in the model statements of dove() and dove2() to specify
the vaccination time, vaccination status, and entry time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vaccine(entry_time, vaccination_status, vaccination_time)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vaccine_+3A_entry_time">entry_time</code></td>
<td>
<p>The variable for the time when 
the participant enters the trial. Entry times must be
non-negative and complete.</p>
</td></tr>
<tr><td><code id="vaccine_+3A_vaccination_status">vaccination_status</code></td>
<td>
<p>The variable indicating the vaccination 
status: 1 = vaccinated; 0 = not vaccinated. Vaccination status
must be binary, integer (or be able to be cast as integer without
loss of information), and complete.</p>
</td></tr>
<tr><td><code id="vaccine_+3A_vaccination_time">vaccination_time</code></td>
<td>
<p>The variable for the time when 
vaccination takes place. Vaccination time must be non-negative for
vaccinated participants and can be
any non-negative value, NA or Inf if a participant was not 
vaccinated during the trial.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For participants that were vaccinated, times must obey
entry_time <code class="reqn">\le</code> vaccination_time. If a case is
found to violate this relationship, its entry_time is set to NA
and it is removed from the analysis.
</p>


<h3>Value</h3>

<p>This function is intended to be used only in the model statements 
of dove() and dove2(). The result, a matrix, is used internally.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
