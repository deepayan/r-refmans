<!DOCTYPE html><html><head><title>Help for package mapedit</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mapedit}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addToolbar'><p>Add a (possibly customized) toolbar to a leaflet map</p></a></li>
<li><a href='#drawFeatures'><p>Draw (simple) features on a map</p></a></li>
<li><a href='#editFeatures'><p>Interactively Edit Map Features</p></a></li>
<li><a href='#editMap'><p>Interactively Edit a Map</p></a></li>
<li><a href='#editMod'><p>Shiny Module Server for Geo Create, Edit, Delete</p></a></li>
<li><a href='#editModUI'><p>Shiny Module UI for Geo Create, Edit, Delete</p></a></li>
<li><a href='#mapedit-package'><p>mapedit: interactive editing and selection for geospatial data</p></a></li>
<li><a href='#merge_add'><p>Merge 'sf' Adds</p></a></li>
<li><a href='#merge_delete'><p>Merge 'sf' Deletes</p></a></li>
<li><a href='#merge_edit'><p>Merge 'sf' Edits</p></a></li>
<li><a href='#playback'><p>Playback a Recorded 'mapedit' Session on Leaflet Map</p></a></li>
<li><a href='#processOpts'><p>Prepare arguments for addDrawToolbar or addPmToolbar</p></a></li>
<li><a href='#selectFeatures'><p>Interactively Select Map Features</p></a></li>
<li><a href='#selectMap'><p>Interactively Select Map Features</p></a></li>
<li><a href='#selectMod'><p>Shiny Module Server for Geo Selection</p></a></li>
<li><a href='#selectModUI'><p>Shiny Module UI for Geo Selection</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Interactive Editing of Spatial Data in R</td>
</tr>
<tr>
<td>Description:</td>
<td>Suite of interactive functions and helpers for selecting and editing
    geospatial data.</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-02-01</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/r-spatial/mapedit">https://github.com/r-spatial/mapedit</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-spatial/mapedit/issues">https://github.com/r-spatial/mapedit/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, htmltools (&ge; 0.3), htmlwidgets, jsonlite, leafem,
leaflet (&ge; 2.0.1), leaflet.extras (&ge; 1.0), leafpm, mapview,
methods, miniUI, raster, scales, sf (&ge; 0.5-2), shiny, sp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>crayon</td>
</tr>
<tr>
<td>Enhances:</td>
<td>geojsonio</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-02 15:57:48 UTC; kentr</td>
</tr>
<tr>
<td>Author:</td>
<td>Tim Appelhans [aut, cre],
  Kenton Russell [aut],
  Lorenzo Busetto [aut],
  Josh O'Brien [ctb],
  Jakob Gutschlhofer [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tim Appelhans &lt;tim.appelhans@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-02 17:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addToolbar'>Add a (possibly customized) toolbar to a leaflet map</h2><span id='topic+addToolbar'></span>

<h3>Description</h3>

<p>Add a (possibly customized) toolbar to a leaflet map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addToolbar(leafmap, editorOptions, editor, targetLayerId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addToolbar_+3A_leafmap">leafmap</code></td>
<td>
<p>leaflet map to use for Selection</p>
</td></tr>
<tr><td><code id="addToolbar_+3A_editoroptions">editorOptions</code></td>
<td>
<p>A list of options to be passed on to either
<code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.</p>
</td></tr>
<tr><td><code id="addToolbar_+3A_editor">editor</code></td>
<td>
<p>Character string giving editor to be used for the
current map. Either <code>"leafpm"</code> or
<code>"leaflet.extras"</code>.</p>
</td></tr>
<tr><td><code id="addToolbar_+3A_targetlayerid">targetLayerId</code></td>
<td>
<p><code>string</code> name of the map layer group to
use with edit</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The leaflet map supplied to <code>leafmap</code>, now with an
added toolbar.
</p>

<hr>
<h2 id='drawFeatures'>Draw (simple) features on a map</h2><span id='topic+drawFeatures'></span>

<h3>Description</h3>

<p>Draw (simple) features on a map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drawFeatures(
  map = NULL,
  sf = TRUE,
  record = FALSE,
  viewer = shiny::paneViewer(),
  title = "Draw Features",
  editor = c("leaflet.extras", "leafpm"),
  editorOptions = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drawFeatures_+3A_map">map</code></td>
<td>
<p>a background <code>leaflet</code> or <code>mapview</code> map
to be used for editing. If <code>NULL</code> a blank
mapview canvas will be provided.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_sf">sf</code></td>
<td>
<p><code>logical</code> return simple features.  The default is <code>TRUE</code>.
If <code>sf = FALSE</code>, <code>GeoJSON</code> will be returned.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_record">record</code></td>
<td>
<p><code>logical</code> to record all edits for future playback.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_viewer">viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code><a href="shiny.html#topic+viewer">viewer</a></code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing &quot;done&quot; or &quot;cancel&quot;) in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_title">title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_editor">editor</code></td>
<td>
<p><code>character</code> either &quot;leaflet.extras&quot; or &quot;leafpm&quot;</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_editoroptions">editorOptions</code></td>
<td>
<p><code>list</code> of options suitable for passing to
either <code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.</p>
</td></tr>
<tr><td><code id="drawFeatures_+3A_...">...</code></td>
<td>
<p>additional arguments passed on to <code><a href="#topic+editMap">editMap</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When setting <code>viewer = browserViewer(browser = getOption("browser"))</code> and
the systems default browser is Firefox, the browser window will likely not
automatically close when the app is closed (by pressing &quot;done&quot; or &quot;cancel&quot;).
To enable automatic closing of tabs/windows in Firefox try the following:
</p>

<ul>
<li><p>input &quot;about:config &quot; to your firefox address bar and hit enter
</p>
</li>
<li><p>make sure your &quot;dom.allow_scripts_to_close_windows&quot; is true
</p>
</li></ul>


<hr>
<h2 id='editFeatures'>Interactively Edit Map Features</h2><span id='topic+editFeatures'></span><span id='topic+editFeatures.sf'></span><span id='topic+editFeatures.Spatial'></span>

<h3>Description</h3>

<p>Interactively Edit Map Features
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editFeatures(x, ...)

## S3 method for class 'sf'
editFeatures(
  x,
  map = NULL,
  mergeOrder = c("add", "edit", "delete"),
  record = FALSE,
  viewer = shiny::paneViewer(),
  crs = 4326,
  label = NULL,
  title = "Edit Map",
  editor = c("leaflet.extras", "leafpm"),
  editorOptions = list(),
  ...
)

## S3 method for class 'Spatial'
editFeatures(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editFeatures_+3A_x">x</code></td>
<td>
<p>features to edit</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_map">map</code></td>
<td>
<p>a background <code>leaflet</code> or <code>mapview</code> map
to be used for editing. If <code>NULL</code> a blank
mapview canvas will be provided.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_mergeorder">mergeOrder</code></td>
<td>
<p><code>vector</code> or <code>character</code> arguments to specify the order
of merge operations.  By default, merges will proceed in the order
of add, edit, delete.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_record">record</code></td>
<td>
<p><code>logical</code> to record all edits for future playback.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_viewer">viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code><a href="shiny.html#topic+viewer">viewer</a></code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing &quot;done&quot; or &quot;cancel&quot;) in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_crs">crs</code></td>
<td>
<p>see <code><a href="sf.html#topic+st_crs">st_crs</a></code>.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_label">label</code></td>
<td>
<p><code>character</code> vector or <code>formula</code> for the
content that will appear in label/tooltip.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_title">title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is &quot;Edit Map&quot;.</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_editor">editor</code></td>
<td>
<p><code>character</code> either &quot;leaflet.extras&quot; or &quot;leafpm&quot;</p>
</td></tr>
<tr><td><code id="editFeatures_+3A_editoroptions">editorOptions</code></td>
<td>
<p><code>list</code> of options suitable for passing to
either <code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When setting <code>viewer = browserViewer(browser = getOption("browser"))</code> and
the systems default browser is Firefox, the browser window will likely not
automatically close when the app is closed (by pressing &quot;done&quot; or &quot;cancel&quot;).
To enable automatic closing of tabs/windows in Firefox try the following:
</p>

<ul>
<li><p>input &quot;about:config &quot; to your firefox address bar and hit enter
</p>
</li>
<li><p>make sure your &quot;dom.allow_scripts_to_close_windows&quot; is true
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapedit)
library(mapview)

lf &lt;- mapview()

# draw some polygons that we will select later
drawing &lt;- lf %&gt;%
  editMap()

# little easier now with sf
mapview(drawing$finished)

# especially easy with selectFeatures
selectFeatures(drawing$finished)


# use @bhaskarvk USA Albers with leaflet code
#  https://bhaskarvk.github.io/leaflet/examples/proj4Leaflet.html
#devtools::install_github("hrbrmstr/albersusa")
library(albersusa)
library(sf)
library(leaflet)
library(mapedit)

spdf &lt;- usa_sf()
pal &lt;- colorNumeric(
  palette = "Blues",
  domain = spdf$pop_2014
)

bounds &lt;- c(-125, 24 ,-75, 45)

(lf &lt;- leaflet(
  options=
    leafletOptions(
      worldCopyJump = FALSE,
      crs=leafletCRS(
        crsClass="L.Proj.CRS",
        code='EPSG:2163',
        proj4def=paste0(
          '+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 ',
          '+b=6370997 +units=m +no_defs'
        ),
        resolutions = c(65536, 32768, 16384, 8192, 4096, 2048,1024, 512, 256, 128)
      )
    )
  ) %&gt;%
  fitBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  setMaxBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  mapview::addFeatures(
    data=spdf, weight = 1, color = "#000000",
    # adding group necessary for identification
    layerId = ~iso_3166_2,
    fillColor=~pal(pop_2014),
    fillOpacity=0.7,
    label=~stringr::str_c(name,' ', format(pop_2014, big.mark=",")),
    labelOptions= labelOptions(direction = 'auto')
  )
)


# test out selectMap with albers example
selectMap(
  lf,
  styleFalse = list(weight = 1),
  styleTrue = list(weight = 4)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='editMap'>Interactively Edit a Map</h2><span id='topic+editMap'></span><span id='topic+editMap.leaflet'></span><span id='topic+editMap.mapview'></span><span id='topic+editMap.NULL'></span>

<h3>Description</h3>

<p>Interactively Edit a Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editMap(x, ...)

## S3 method for class 'leaflet'
editMap(
  x = NULL,
  targetLayerId = NULL,
  sf = TRUE,
  ns = "mapedit-edit",
  record = FALSE,
  viewer = shiny::paneViewer(),
  crs = 4326,
  title = "Edit Map",
  editor = c("leaflet.extras", "leafpm"),
  editorOptions = list(),
  ...
)

## S3 method for class 'mapview'
editMap(
  x = NULL,
  targetLayerId = NULL,
  sf = TRUE,
  ns = "mapedit-edit",
  record = FALSE,
  viewer = shiny::paneViewer(),
  crs = 4326,
  title = "Edit Map",
  editor = c("leaflet.extras", "leafpm"),
  editorOptions = list(),
  ...
)

## S3 method for class ''NULL''
editMap(x, editor = c("leaflet.extras", "leafpm"), editorOptions = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editMap_+3A_x">x</code></td>
<td>
<p><code>leaflet</code> or <code>mapview</code> map to edit</p>
</td></tr>
<tr><td><code id="editMap_+3A_...">...</code></td>
<td>
<p>other arguments for <code>leafem::addFeatures()</code> when
using <code>editMap.NULL</code> or <code>selectFeatures</code></p>
</td></tr>
<tr><td><code id="editMap_+3A_targetlayerid">targetLayerId</code></td>
<td>
<p><code>string</code> name of the map layer group to use with edit</p>
</td></tr>
<tr><td><code id="editMap_+3A_sf">sf</code></td>
<td>
<p><code>logical</code> return simple features.  The default is <code>TRUE</code>.
If <code>sf = FALSE</code>, <code>GeoJSON</code> will be returned.</p>
</td></tr>
<tr><td><code id="editMap_+3A_ns">ns</code></td>
<td>
<p><code>string</code> name for the Shiny <code>namespace</code> to use.  The <code>ns</code>
is unlikely to require a change.</p>
</td></tr>
<tr><td><code id="editMap_+3A_record">record</code></td>
<td>
<p><code>logical</code> to record all edits for future playback.</p>
</td></tr>
<tr><td><code id="editMap_+3A_viewer">viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code><a href="shiny.html#topic+viewer">viewer</a></code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing &quot;done&quot; or &quot;cancel&quot;) in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td></tr>
<tr><td><code id="editMap_+3A_crs">crs</code></td>
<td>
<p>see <code><a href="sf.html#topic+st_crs">st_crs</a></code>.</p>
</td></tr>
<tr><td><code id="editMap_+3A_title">title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is &quot;Edit Map&quot;.</p>
</td></tr>
<tr><td><code id="editMap_+3A_editor">editor</code></td>
<td>
<p><code>character</code> either &quot;leaflet.extras&quot; or &quot;leafpm&quot;</p>
</td></tr>
<tr><td><code id="editMap_+3A_editoroptions">editorOptions</code></td>
<td>
<p><code>list</code> of options suitable for passing to
either <code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When setting <code>viewer = browserViewer(browser = getOption("browser"))</code> and
the systems default browser is Firefox, the browser window will likely not
automatically close when the app is closed (by pressing &quot;done&quot; or &quot;cancel&quot;).
To enable automatic closing of tabs/windows in Firefox try the following:
</p>

<ul>
<li><p>input &quot;about:config &quot; to your firefox address bar and hit enter
</p>
</li>
<li><p>make sure your &quot;dom.allow_scripts_to_close_windows&quot; is true
</p>
</li></ul>



<h3>Value</h3>

<p><code>sf</code> simple features or <code>GeoJSON</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(leaflet)
library(mapedit)
editMap(leaflet() %&gt;% addTiles())

## End(Not run)
## Not run: 
  # demonstrate Leaflet.Draw on a layer
  library(sf)
  library(mapview)
  library(leaflet.extras)
  library(mapedit)

  # ?sf::sf
  pol = st_sfc(
    st_polygon(list(cbind(c(0,3,3,0,0),c(0,0,3,3,0)))),
    crs = 4326
  )
  mapview(pol) %&gt;%
    editMap(targetLayerId = "pol")

  mapview(franconia[1:2,]) %&gt;%
    editMap(targetLayerId = "franconia[1:2, ]")

## End(Not run)
</code></pre>

<hr>
<h2 id='editMod'>Shiny Module Server for Geo Create, Edit, Delete</h2><span id='topic+editMod'></span>

<h3>Description</h3>

<p>Shiny Module Server for Geo Create, Edit, Delete
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editMod(
  input,
  output,
  session,
  leafmap,
  targetLayerId = NULL,
  sf = TRUE,
  record = FALSE,
  crs = 4326,
  editor = c("leaflet.extras", "leafpm"),
  editorOptions = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editMod_+3A_input">input</code></td>
<td>
<p>Shiny server function input</p>
</td></tr>
<tr><td><code id="editMod_+3A_output">output</code></td>
<td>
<p>Shiny server function output</p>
</td></tr>
<tr><td><code id="editMod_+3A_session">session</code></td>
<td>
<p>Shiny server function session</p>
</td></tr>
<tr><td><code id="editMod_+3A_leafmap">leafmap</code></td>
<td>
<p>leaflet map to use for Selection</p>
</td></tr>
<tr><td><code id="editMod_+3A_targetlayerid">targetLayerId</code></td>
<td>
<p><code>character</code> identifier of layer to edit, delete</p>
</td></tr>
<tr><td><code id="editMod_+3A_sf">sf</code></td>
<td>
<p><code>logical</code> to return simple features.  <code>sf=FALSE</code> will return
<code>GeoJSON</code>.</p>
</td></tr>
<tr><td><code id="editMod_+3A_record">record</code></td>
<td>
<p><code>logical</code> to record all edits for future playback.</p>
</td></tr>
<tr><td><code id="editMod_+3A_crs">crs</code></td>
<td>
<p>see <code><a href="sf.html#topic+st_crs">st_crs</a></code>.</p>
</td></tr>
<tr><td><code id="editMod_+3A_editor">editor</code></td>
<td>
<p><code>character</code> either &quot;leaflet.extras&quot; or &quot;leafpm&quot;</p>
</td></tr>
<tr><td><code id="editMod_+3A_editoroptions">editorOptions</code></td>
<td>
<p><code>list</code> of options suitable for passing to
either <code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>server function for Shiny module
</p>

<hr>
<h2 id='editModUI'>Shiny Module UI for Geo Create, Edit, Delete</h2><span id='topic+editModUI'></span>

<h3>Description</h3>

<p>Shiny Module UI for Geo Create, Edit, Delete
</p>


<h3>Usage</h3>

<pre><code class='language-R'>editModUI(id, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="editModUI_+3A_id">id</code></td>
<td>
<p><code>character</code> id for the the Shiny namespace</p>
</td></tr>
<tr><td><code id="editModUI_+3A_...">...</code></td>
<td>
<p>other arguments to <code>leafletOutput()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>ui for Shiny module
</p>

<hr>
<h2 id='mapedit-package'>mapedit: interactive editing and selection for geospatial data</h2><span id='topic+mapedit'></span><span id='topic+mapedit-package'></span>

<h3>Description</h3>

<p>mapedit, a RConsortium funded project, provides interactive
tools to incorporate in geospatial workflows that require editing or selection
of spatial data.
</p>


<h3>Edit</h3>


<ul>
<li><p><code><a href="#topic+editMap">editMap</a></code>
</p>
</li>
<li><p><code><a href="#topic+editFeatures">editFeatures</a></code>
</p>
</li>
<li><p>Shiny edit module <code><a href="#topic+editModUI">editModUI</a></code>, <code><a href="#topic+editMod">editMod</a></code>
</p>
</li></ul>

<p>#' @section Edit:
</p>

<ul>
<li><p><code><a href="#topic+selectMap">selectMap</a></code>
</p>
</li>
<li><p><code><a href="#topic+selectFeatures">selectFeatures</a></code>
</p>
</li>
<li><p>Shiny edit module <code><a href="#topic+selectModUI">selectModUI</a></code>, <code><a href="#topic+selectMod">selectMod</a></code>
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Tim Appelhans <a href="mailto:tim.appelhans@gmail.com">tim.appelhans@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Kenton Russell
</p>
</li>
<li><p> Lorenzo Busetto
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Josh O'Brien [contributor]
</p>
</li>
<li><p> Jakob Gutschlhofer [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/r-spatial/mapedit">https://github.com/r-spatial/mapedit</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-spatial/mapedit/issues">https://github.com/r-spatial/mapedit/issues</a>
</p>
</li></ul>


<hr>
<h2 id='merge_add'>Merge 'sf' Adds</h2><span id='topic+merge_add'></span>

<h3>Description</h3>

<p>Internal function used with <code>editFeatures</code> to apply adds or drawn
to a <code>sf</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_add(orig = NULL, drawn = NULL, by = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_add_+3A_orig">orig</code></td>
<td>
<p><code>sf</code> with the original or source data to which
adds should apply</p>
</td></tr>
<tr><td><code id="merge_add_+3A_drawn">drawn</code></td>
<td>
<p><code>sf</code> with sf data to add to orig</p>
</td></tr>
<tr><td><code id="merge_add_+3A_by">by</code></td>
<td>
<p>not used in merge_add.  This argument only exists
for symmetry with the other merge functions.</p>
</td></tr>
</table>

<hr>
<h2 id='merge_delete'>Merge 'sf' Deletes</h2><span id='topic+merge_delete'></span>

<h3>Description</h3>

<p>Internal function used with <code>editFeatures</code> to apply deletes
to a <code>sf</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_delete(orig = NULL, deletes = NULL, by = c(id = "layerId"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_delete_+3A_orig">orig</code></td>
<td>
<p><code>sf</code> with the original or source data to which
deletes should apply</p>
</td></tr>
<tr><td><code id="merge_delete_+3A_deletes">deletes</code></td>
<td>
<p><code>sf</code> with sf data to delete</p>
</td></tr>
<tr><td><code id="merge_delete_+3A_by">by</code></td>
<td>
<p>named <code>vector</code> with the name of the vector representing
the column in orig that we will use to match and the value of
the vector representing the column in deletes that we will
use to match.  The argument is intended to work like
the <code>*join</code> functions in <code>dplyr</code>. Note, this function
will only use the first name
and first value of the vector for matching.</p>
</td></tr>
</table>

<hr>
<h2 id='merge_edit'>Merge 'sf' Edits</h2><span id='topic+merge_edit'></span>

<h3>Description</h3>

<p>Internal function used with <code>editFeatures</code> to apply edits
to a <code>sf</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_edit(orig = NULL, edits = NULL, by = c(id = "layerId"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_edit_+3A_orig">orig</code></td>
<td>
<p><code>sf</code> with the original or source data to which
deletes should apply</p>
</td></tr>
<tr><td><code id="merge_edit_+3A_edits">edits</code></td>
<td>
<p><code>sf</code> with sf data to edit</p>
</td></tr>
<tr><td><code id="merge_edit_+3A_by">by</code></td>
<td>
<p>named <code>vector</code> with the name of the vector representing
the column in orig that we will use to match and the value of
the vector representing the column in edits that we will
use to match.  The argument is intended to work like
the <code>*join</code> functions in <code>dplyr</code>. Note, this function
will only use the first name
and first value of the vector for matching.</p>
</td></tr>
</table>

<hr>
<h2 id='playback'>Playback a Recorded 'mapedit' Session on Leaflet Map</h2><span id='topic+playback'></span>

<h3>Description</h3>

<p>Playback a Recorded 'mapedit' Session on Leaflet Map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>playback(x, origsf = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="playback_+3A_x">x</code></td>
<td>
<p>a recorded mapedit session from <code>editFeatures(..., record=TRUE)</code></p>
</td></tr>
</table>

<hr>
<h2 id='processOpts'>Prepare arguments for addDrawToolbar or addPmToolbar</h2><span id='topic+processOpts'></span>

<h3>Description</h3>

<p>Prepare arguments for addDrawToolbar or addPmToolbar
</p>


<h3>Usage</h3>

<pre><code class='language-R'>processOpts(fun, args)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="processOpts_+3A_fun">fun</code></td>
<td>
<p>Function used by editor package (leafpm or
leaflet.extras) to set defaults</p>
</td></tr>
<tr><td><code id="processOpts_+3A_args">args</code></td>
<td>
<p>Either a (possibly nested) list of named options of
the form suitable for passage to <code>fun</code> or (if the chosen
editor is <code>"leaflet.extras"</code>) <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object suitable for passing in as the supplied argument
to either <code>leaflet.extras::addDrawToolbar</code> or
<code>leafpm::addPmToolbar</code>.
</p>

<hr>
<h2 id='selectFeatures'>Interactively Select Map Features</h2><span id='topic+selectFeatures'></span><span id='topic+selectFeatures.sf'></span><span id='topic+selectFeatures.Spatial'></span>

<h3>Description</h3>

<p>Interactively Select Map Features
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectFeatures(x, ...)

## S3 method for class 'sf'
selectFeatures(
  x = NULL,
  mode = c("click", "draw"),
  op = sf::st_intersects,
  map = NULL,
  index = FALSE,
  viewer = shiny::paneViewer(),
  label = NULL,
  title = "Select features",
  ...
)

## S3 method for class 'Spatial'
selectFeatures(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectFeatures_+3A_x">x</code></td>
<td>
<p>features to select</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_mode">mode</code></td>
<td>
<p>one of &quot;click&quot; or &quot;draw&quot;.</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_op">op</code></td>
<td>
<p>the geometric binary predicate to use for the selection.
Can be any of <code><a href="sf.html#topic+geos_binary_pred">geos_binary_pred</a></code>. In the spatial
operation the drawn features will be evaluated as x and the supplied
feature as y. Ignored if <code>mode = "click"</code>.</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_map">map</code></td>
<td>
<p>a background <code>leaflet</code> or <code>mapview</code> map
to be used for editing. If <code>NULL</code> a blank
mapview canvas will be provided.</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_index">index</code></td>
<td>
<p><code>logical</code> with <code>index=TRUE</code> indicating return
the index of selected features rather than the actual
selected features</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_viewer">viewer</code></td>
<td>
<p><code>function</code> for the viewer.  See Shiny <code><a href="shiny.html#topic+viewer">viewer</a></code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing &quot;done&quot; or &quot;cancel&quot;) in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_label">label</code></td>
<td>
<p><code>character</code> vector or <code>formula</code> for the
content that will appear in label/tooltip.</p>
</td></tr>
<tr><td><code id="selectFeatures_+3A_title">title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is &quot;Select features&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When setting <code>viewer = browserViewer(browser = getOption("browser"))</code> and
the systems default browser is Firefox, the browser window will likely not
automatically close when the app is closed (by pressing &quot;done&quot; or &quot;cancel&quot;).
To enable automatic closing of tabs/windows in Firefox try the following:
</p>

<ul>
<li><p>input &quot;about:config &quot; to your firefox address bar and hit enter
</p>
</li>
<li><p>make sure your &quot;dom.allow_scripts_to_close_windows&quot; is true
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapedit)
library(mapview)

lf &lt;- mapview()

# draw some polygons that we will select later
drawing &lt;- lf %&gt;%
  editMap()

# little easier now with sf
mapview(drawing$finished)

# especially easy with selectFeatures
selectFeatures(drawing$finished)


# use @bhaskarvk USA Albers with leaflet code
#  https://bhaskarvk.github.io/leaflet/examples/proj4Leaflet.html
#devtools::install_github("hrbrmstr/albersusa")
library(albersusa)
library(sf)
library(leaflet)
library(mapedit)

spdf &lt;- usa_sf()
pal &lt;- colorNumeric(
  palette = "Blues",
  domain = spdf$pop_2014
)

bounds &lt;- c(-125, 24 ,-75, 45)

(lf &lt;- leaflet(
  options=
    leafletOptions(
      worldCopyJump = FALSE,
      crs=leafletCRS(
        crsClass="L.Proj.CRS",
        code='EPSG:2163',
        proj4def=paste0(
          '+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 ',
          '+b=6370997 +units=m +no_defs'
        ),
        resolutions = c(65536, 32768, 16384, 8192, 4096, 2048,1024, 512, 256, 128)
      )
    )
  ) %&gt;%
  fitBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  setMaxBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  mapview::addFeatures(
    data=spdf, weight = 1, color = "#000000",
    # adding group necessary for identification
    layerId = ~iso_3166_2,
    fillColor=~pal(pop_2014),
    fillOpacity=0.7,
    label=~stringr::str_c(name,' ', format(pop_2014, big.mark=",")),
    labelOptions= labelOptions(direction = 'auto')
  )
)


# test out selectMap with albers example
selectMap(
  lf,
  styleFalse = list(weight = 1),
  styleTrue = list(weight = 4)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='selectMap'>Interactively Select Map Features</h2><span id='topic+selectMap'></span><span id='topic+selectMap.leaflet'></span>

<h3>Description</h3>

<p>Interactively Select Map Features
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectMap(x, ...)

## S3 method for class 'leaflet'
selectMap(
  x = NULL,
  styleFalse = list(fillOpacity = 0.2, weight = 1, opacity = 0.4),
  styleTrue = list(fillOpacity = 0.7, weight = 3, opacity = 0.7),
  ns = "mapedit-select",
  viewer = shiny::paneViewer(),
  title = "Select features",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectMap_+3A_x">x</code></td>
<td>
<p><code>leaflet</code> or <code>mapview</code> map to use for selection</p>
</td></tr>
<tr><td><code id="selectMap_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
<tr><td><code id="selectMap_+3A_stylefalse">styleFalse</code>, <code id="selectMap_+3A_styletrue">styleTrue</code></td>
<td>
<p>names <code>list</code> of CSS styles used
for selected (<code>styleTrue</code>) and deselected (<code>styleFalse</code>)</p>
</td></tr>
<tr><td><code id="selectMap_+3A_ns">ns</code></td>
<td>
<p><code>string</code> name for the Shiny <code>namespace</code> to use.  The <code>ns</code>
is unlikely to require a change.</p>
</td></tr>
<tr><td><code id="selectMap_+3A_viewer">viewer</code></td>
<td>
<p><code>function</code> for the viewer. See Shiny <code><a href="shiny.html#topic+viewer">viewer</a></code>.
NOTE: when using <code>browserViewer(browser = getOption("browser"))</code> to
open the app in the default browser, the browser window will automatically
close when closing the app (by pressing &quot;done&quot; or &quot;cancel&quot;) in most browsers.
Firefox is an exception. See Details for instructions on how to enable this
behaviour in Firefox.</p>
</td></tr>
<tr><td><code id="selectMap_+3A_title">title</code></td>
<td>
<p><code>string</code> to customize the title of the UI window.  The default
is &quot;Select features&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When setting <code>viewer = browserViewer(browser = getOption("browser"))</code> and
the systems default browser is Firefox, the browser window will likely not
automatically close when the app is closed (by pressing &quot;done&quot; or &quot;cancel&quot;).
To enable automatic closing of tabs/windows in Firefox try the following:
</p>

<ul>
<li><p>input &quot;about:config &quot; to your firefox address bar and hit enter
</p>
</li>
<li><p>make sure your &quot;dom.allow_scripts_to_close_windows&quot; is true
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mapedit)
library(mapview)

lf &lt;- mapview()

# draw some polygons that we will select later
drawing &lt;- lf %&gt;%
  editMap()

# little easier now with sf
mapview(drawing$finished)

# especially easy with selectFeatures
selectFeatures(drawing$finished)


# use @bhaskarvk USA Albers with leaflet code
#  https://bhaskarvk.github.io/leaflet/examples/proj4Leaflet.html
#devtools::install_github("hrbrmstr/albersusa")
library(albersusa)
library(sf)
library(leaflet)
library(mapedit)

spdf &lt;- usa_sf()
pal &lt;- colorNumeric(
  palette = "Blues",
  domain = spdf$pop_2014
)

bounds &lt;- c(-125, 24 ,-75, 45)

(lf &lt;- leaflet(
  options=
    leafletOptions(
      worldCopyJump = FALSE,
      crs=leafletCRS(
        crsClass="L.Proj.CRS",
        code='EPSG:2163',
        proj4def=paste0(
          '+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 ',
          '+b=6370997 +units=m +no_defs'
        ),
        resolutions = c(65536, 32768, 16384, 8192, 4096, 2048,1024, 512, 256, 128)
      )
    )
  ) %&gt;%
  fitBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  setMaxBounds(bounds[1], bounds[2], bounds[3], bounds[4]) %&gt;%
  mapview::addFeatures(
    data=spdf, weight = 1, color = "#000000",
    # adding group necessary for identification
    layerId = ~iso_3166_2,
    fillColor=~pal(pop_2014),
    fillOpacity=0.7,
    label=~stringr::str_c(name,' ', format(pop_2014, big.mark=",")),
    labelOptions= labelOptions(direction = 'auto')
  )
)


# test out selectMap with albers example
selectMap(
  lf,
  styleFalse = list(weight = 1),
  styleTrue = list(weight = 4)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='selectMod'>Shiny Module Server for Geo Selection</h2><span id='topic+selectMod'></span>

<h3>Description</h3>

<p>Shiny Module Server for Geo Selection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectMod(
  input,
  output,
  session,
  leafmap,
  styleFalse = list(fillOpacity = 0.2, weight = 1, opacity = 0.4),
  styleTrue = list(fillOpacity = 0.7, weight = 3, opacity = 0.7)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectMod_+3A_input">input</code></td>
<td>
<p>Shiny server function input</p>
</td></tr>
<tr><td><code id="selectMod_+3A_output">output</code></td>
<td>
<p>Shiny server function output</p>
</td></tr>
<tr><td><code id="selectMod_+3A_session">session</code></td>
<td>
<p>Shiny server function session</p>
</td></tr>
<tr><td><code id="selectMod_+3A_leafmap">leafmap</code></td>
<td>
<p>leaflet map to use for Selection</p>
</td></tr>
<tr><td><code id="selectMod_+3A_stylefalse">styleFalse</code></td>
<td>
<p>named <code>list</code> of valid <code>CSS</code> for non-selected features</p>
</td></tr>
<tr><td><code id="selectMod_+3A_styletrue">styleTrue</code></td>
<td>
<p>named <code>list</code> of valid <code>CSS</code> for selected features</p>
</td></tr>
</table>


<h3>Value</h3>

<p>server function for Shiny module
</p>

<hr>
<h2 id='selectModUI'>Shiny Module UI for Geo Selection</h2><span id='topic+selectModUI'></span>

<h3>Description</h3>

<p>Shiny Module UI for Geo Selection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectModUI(id, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectModUI_+3A_id">id</code></td>
<td>
<p><code>character</code> id for the the Shiny namespace</p>
</td></tr>
<tr><td><code id="selectModUI_+3A_...">...</code></td>
<td>
<p>other arguments to <code>leafletOutput()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>ui for Shiny module
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
