<!DOCTYPE html><html><head><title>Help for package dataverse</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dataverse}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_dataset_file'><p>Add or update a file in a dataset</p></a></li>
<li><a href='#add_file'><p>Add file (SWORD)</p></a></li>
<li><a href='#create_dataset'><p>Create or update a dataset</p></a></li>
<li><a href='#create_dataverse'><p>Create Dataverse</p></a></li>
<li><a href='#dataset_atom'><p>View dataset (SWORD)</p></a></li>
<li><a href='#dataset_versions'><p>Dataset versions</p></a></li>
<li><a href='#dataverse'><p>Client for Dataverse Repositories</p></a></li>
<li><a href='#dataverse_metadata'><p>Dataverse metadata</p></a></li>
<li><a href='#dataverse_search'><p>Search Dataverse server</p></a></li>
<li><a href='#delete_dataset'><p>Delete draft dataset</p></a></li>
<li><a href='#delete_dataverse'><p>Delete Dataverse</p></a></li>
<li><a href='#delete_file'><p>Delete file (SWORD)</p></a></li>
<li><a href='#delete_sword_dataset'><p>Delete dataset (SWORD)</p></a></li>
<li><a href='#get_dataframe_by_name'><p>Download dataverse file as a dataframe</p></a></li>
<li><a href='#get_dataframe_internal'><p>Write to temp and apply function</p></a></li>
<li><a href='#get_dataset'><p>Get dataset metadata</p></a></li>
<li><a href='#get_dataverse'><p>Get Dataverse</p></a></li>
<li><a href='#get_facets'><p>Get Dataverse facets</p></a></li>
<li><a href='#get_file'><p>Download Dataverse file as a raw binary</p></a></li>
<li><a href='#get_file_metadata'><p>Retrieve a ddi metadata file</p></a></li>
<li><a href='#get_filesize'><p>Get File size of file</p></a></li>
<li><a href='#get_user_key'><p>Get API Key</p></a></li>
<li><a href='#initiate_sword_dataset'><p>Initiate dataset (SWORD)</p></a></li>
<li><a href='#is_ingested'><p>Identify if file is an ingested file</p></a></li>
<li><a href='#list_datasets'><p>List datasets (SWORD)</p></a></li>
<li><a href='#publish_dataset'><p>Publish dataset</p></a></li>
<li><a href='#publish_dataverse'><p>Publish Dataverse (SWORD)</p></a></li>
<li><a href='#publish_sword_dataset'><p>Publish dataset (SWORD)</p></a></li>
<li><a href='#service_document'><p>SWORD Service Document</p></a></li>
<li><a href='#set_dataverse_metadata'><p>Set Dataverse metadata</p></a></li>
<li><a href='#URLs'><p>Get Dataverse file download URL</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.3.14</td>
</tr>
<tr>
<td>Title:</td>
<td>Client for Dataverse 4+ Repositories</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, httr, jsonlite, readr, stats, utils, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, haven, knitr, purrr, rmarkdown, testthat, devtools,
tibble, yaml</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides access to Dataverse APIs <a href="https://dataverse.org/">https://dataverse.org/</a> (versions 4-5),
    enabling data search, retrieval, and deposit. For Dataverse versions &lt;= 3.0,
    use the archived 'dvn' package <a href="https://cran.r-project.org/package=dvn">https://cran.r-project.org/package=dvn</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://iqss.github.io/dataverse-client-r/">https://iqss.github.io/dataverse-client-r/</a>,
<a href="https://dataverse.org/">https://dataverse.org/</a>,
<a href="https://github.com/iqss/dataverse-client-r">https://github.com/iqss/dataverse-client-r</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/iqss/dataverse-client-r/issues">https://github.com/iqss/dataverse-client-r/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-12 21:45:12 UTC; shirokuriwaki</td>
</tr>
<tr>
<td>Author:</td>
<td>Shiro Kuriwaki <a href="https://orcid.org/0000-0002-5687-2647"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Will Beasley <a href="https://orcid.org/0000-0002-5613-5006"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Thomas J. Leeper <a href="https://orcid.org/0000-0003-4097-6326"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Philip Durbin <a href="https://orcid.org/0000-0002-9528-9470"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Sebastian Karcher <a href="https://orcid.org/0000-0001-8249-7388"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jan Kanis [ctb],
  Edward Jee [ctb],
  Johannes Gruber <a href="https://orcid.org/0000-0001-9177-1772"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Shiro Kuriwaki &lt;shirokuriwaki@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-13 12:43:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_dataset_file'>Add or update a file in a dataset</h2><span id='topic+add_dataset_file'></span><span id='topic+update_dataset_file'></span>

<h3>Description</h3>

<p>Add or update a file in a dataset. For most applications, this
is the recommended function to upload your own local datasets to an
existing Dataverse dataset. Uploading requires a Dataverse API Key in the <code>key</code>
variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_dataset_file(
  file,
  dataset,
  description = NULL,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

update_dataset_file(
  file,
  dataset = NULL,
  id,
  description = NULL,
  force = TRUE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_dataset_file_+3A_file">file</code></td>
<td>
<p>A character string for the location path of the file to be uploaded.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_description">description</code></td>
<td>
<p>Optionally, a character string providing a description of the file.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_id">id</code></td>
<td>
<p>An integer specifying a file identifier; or, if <code>doi</code> is specified,
a character string specifying a file name within the DOI-identified dataset; or an
object of class &ldquo;dataverse_file&rdquo; as returned by <code><a href="#topic+dataset_files">dataset_files</a></code>.</p>
</td></tr>
<tr><td><code id="add_dataset_file_+3A_force">force</code></td>
<td>
<p>A logical indicating whether to force the update even if the file
types differ. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>From Dataverse v4.6.1, the &ldquo;native&rdquo; API provides endpoints to add and
update files without going through the SWORD workflow. To use SWORD instead,
see <code><a href="#topic+add_file">add_file</a></code>. <code>add_dataset_file</code> adds a new file to a specified dataset.
</p>
<p><code>update_dataset_file</code> can be used to replace/update a published file.
Note that it only works on published files, so unpublished drafts cannot be updated -
the dataset must first either be published (<code><a href="#topic+publish_dataset">publish_dataset</a></code>) or
deleted (<code><a href="#topic+delete_dataset">delete_dataset</a></code>).
</p>


<h3>Value</h3>

<p><code>add_dataset_file</code> returns the new file ID. It also uploads the file
to the dataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta &lt;- list()
ds &lt;- create_dataset("mydataverse", body = meta)


# Upload RDS dataset saved to local
saveRDS(mtcars, tmp &lt;- tempfile(fileext = ".rds"))
f &lt;- add_dataset_file(tmp, dataset = ds, description = "mtcars")

# Publish dataset
publish_dataset(ds)

# Update file and republish
saveRDS(iris, tmp)
update_dataset_file(tmp, dataset = ds, id = f,
                    description = "Actually iris")
publish_dataset(ds)

# Cleanup
unlink(tmp)
delete_dataset(ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_file'>Add file (SWORD)</h2><span id='topic+add_file'></span>

<h3>Description</h3>

<p>Add one or more files to a SWORD (possibly unpublished) dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_file(
  dataset,
  file,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_file_+3A_dataset">dataset</code></td>
<td>
<p>A dataset DOI (or other persistent identifier), an object of class &ldquo;dataset_atom&rdquo; or &ldquo;dataset_statement&rdquo;, or an appropriate and complete SWORD URL.</p>
</td></tr>
<tr><td><code id="add_file_+3A_file">file</code></td>
<td>
<p>A character vector of file names, a data.frame, or a list of R objects.</p>
</td></tr>
<tr><td><code id="add_file_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="add_file_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="add_file_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to add files to a dataset. It is part of the SWORD API, which is used to upload data to a Dataverse server. This means this can be used to view unpublished Dataverses and Datasets.
</p>
<p>As of Dataverse v4.6.1, the &ldquo;native&rdquo; API also provides endpoints to add and update files without going through the SWORD workflow. This functionality is provided by <code><a href="#topic+add_dataset_file">add_dataset_file</a></code> and <code><a href="#topic+update_dataset_file">update_dataset_file</a></code>.
</p>


<h3>Value</h3>

<p>An object of class &ldquo;dataset_atom&rdquo;.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# create a list of metadata
metadat &lt;- list(title = "My Study",
                creator = "Doe, John",
                description = "An example study")

# create the dataset
dat &lt;- initiate_sword_dataset("mydataverse", body = metadat)

# add files to dataset
tmp &lt;- tempfile()
write.csv(iris, file = tmp)
f &lt;- add_file(dat, file = tmp)

# publish dataset
publish_dataset(dat)

# delete a dataset
delete_dataset(dat)

## End(Not run)
</code></pre>

<hr>
<h2 id='create_dataset'>Create or update a dataset</h2><span id='topic+create_dataset'></span><span id='topic+update_dataset'></span>

<h3>Description</h3>

<p>Create or update dataset within a Dataverse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_dataset(
  dataverse,
  body,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

update_dataset(
  dataset,
  body,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_dataset_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="create_dataset_+3A_body">body</code></td>
<td>
<p>A list describing the dataset.</p>
</td></tr>
<tr><td><code id="create_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="create_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="create_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
<tr><td><code id="create_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>create_dataset</code> creates a Dataverse dataset. In Dataverse, a &ldquo;dataset&rdquo; is the lowest-level structure in which to organize files. For example, a Dataverse dataset might contain the files used to reproduce a published article, including data, analysis code, and related materials. Datasets can be organized into &ldquo;Dataverse&rdquo; objects, which can be further nested within other Dataverses. For someone creating an archive, this would be the first step to producing said archive (after creating a Dataverse, if one does not already exist). Once files and metadata have been added, the dataset can be published (i.e., made public) using <code><a href="#topic+publish_dataset">publish_dataset</a></code>.
</p>
<p><code>update_dataset</code> updates a Dataverse dataset that has already been created using <code><a href="#topic+create_dataset">create_dataset</a></code>. This creates a draft version of the dataset or modifies the current draft if one is already in-progress. It does not assign a new version number to the dataset nor does it make it publicly visible (which can be done with <code><a href="#topic+publish_dataset">publish_dataset</a></code>).
</p>


<h3>Value</h3>

<p>An object of class &ldquo;dataverse_dataset&rdquo;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta &lt;- list()
ds &lt;- create_dataset("mydataverse", body = meta)

meta2 &lt;- list()
update_dataset(ds, body = meta2)

# cleanup
delete_dataset(ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='create_dataverse'>Create Dataverse</h2><span id='topic+create_dataverse'></span>

<h3>Description</h3>

<p>Create a new Dataverse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_dataverse(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="create_dataverse_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;. If missing, a top-level Dataverse is created.</p>
</td></tr>
<tr><td><code id="create_dataverse_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="create_dataverse_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="create_dataverse_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can create a new Dataverse. In the language of Dataverse, a user has a &ldquo;root&rdquo; Dataverse into which they can create further nested Dataverses and/or &ldquo;datasets&rdquo; that contain, for example, a set of files for a specific project. Creating a new Dataverse can therefore be a useful way to organize other related Dataverses or sets of related datasets.
</p>
<p>For example, if one were involved in an ongoing project that generated monthly data. One may want to store each month's data and related files in a separate &ldquo;dataset&rdquo;, so that each has its own persistent identifier (e.g., DOI), but keep all of these datasets within a named Dataverse so that the project's files are kept separate the user's personal Dataverse records. The flexible nesting of Dataverses allows for a number of possible organizational approaches.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p>To manage Dataverses: <code><a href="#topic+delete_dataverse">delete_dataverse</a></code>, <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>, <code><a href="#topic+dataverse_contents">dataverse_contents</a></code>; to get datasets: <code><a href="#topic+get_dataset">get_dataset</a></code>; to search for Dataverses, datasets, or files: <code><a href="#topic+dataverse_search">dataverse_search</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
(dv &lt;- create_dataverse("mydataverse"))

# cleanup
delete_dataverse("mydataverse")

## End(Not run)
</code></pre>

<hr>
<h2 id='dataset_atom'>View dataset (SWORD)</h2><span id='topic+dataset_atom'></span><span id='topic+dataset_statement'></span>

<h3>Description</h3>

<p>View a SWORD (possibly unpublished) dataset &ldquo;statement&rdquo;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataset_atom(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

dataset_statement(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataset_atom_+3A_dataset">dataset</code></td>
<td>
<p>A dataset DOI (or other persistent identifier), an object of class &ldquo;dataset_atom&rdquo; or &ldquo;dataset_statement&rdquo;, or an appropriate and complete SWORD URL.</p>
</td></tr>
<tr><td><code id="dataset_atom_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="dataset_atom_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="dataset_atom_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions are used to view a dataset by its persistent identifier. <code>dataset_statement</code> will contain information about the contents of the dataset, whereas <code>dataset_atom</code> contains &ldquo;metadata&rdquo; relevant to the SWORD API.
</p>


<h3>Value</h3>

<p>A list. For <code>dataset_atom</code>, an object of class &ldquo;dataset_atom&rdquo;.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_sword_dataset">delete_sword_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# retrieve dataset statement (list contents)
dataset_statement(d[[2]])

# retrieve dataset atom
dataset_atom(d[[2]])

## End(Not run)
</code></pre>

<hr>
<h2 id='dataset_versions'>Dataset versions</h2><span id='topic+dataset_versions'></span>

<h3>Description</h3>

<p>View versions of a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataset_versions(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataset_versions_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="dataset_versions_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="dataset_versions_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="dataset_versions_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This returns a list of objects of all versions of a dataset, including metadata. This can be used as a first step for retrieving older versions of files or datasets.
</p>


<h3>Value</h3>

<p>A list of class &ldquo;dataverse_dataset_version&rdquo;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+dataset_files">dataset_files</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# download file from:
# https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/ARKOTI
monogan &lt;- get_dataverse("monogan")
monogan_data &lt;- dataverse_contents(monogan)
d1 &lt;- get_dataset(monogan_data[[1]])
dataset_versions(d1)
dataset_files(d1)

## End(Not run)
</code></pre>

<hr>
<h2 id='dataverse'>Client for Dataverse Repositories</h2><span id='topic+dataverse'></span>

<h3>Description</h3>

<p>Provides access to Dataverse 4+ APIs, enabling data search, retrieval, and deposit.
</p>


<h3>Details</h3>

<p>Dataverse is open-source data repository management software developed by the Institute for Quantitative Social Science at Harvard University. This package provides an R interface to Dataverse version 4 repositories, including the principal Dataverse hosted at Harvard (<a href="https://dataverse.harvard.edu/">https://dataverse.harvard.edu/</a>). Users can use the package to search for data stored in a Dataverse repository, retrieve data and other files, and also use the package to directly create and archive their own research data and software.
</p>
<p>A Dataverse is structured as a nested set of &ldquo;dataverse&rdquo; repositories, such that a single dataverse can contain &ldquo;datasets&rdquo; (a set of code files, data files, etc.) or other dataverses. Thus, users may want to search for dataverses (sets of dataverses and datasets), datasets (sets of files), or individual files, and retrieve those objects accordingly. To retrieve a given file, a user typically needs to know what dataset it is stored in. All datasets are identified by a persistent identifier (such as an DOI or Handle, depending on the age of the dataset and what Dataverse repository it is hosted in).
</p>
<p>This package provides five main sets of functions to interact with Dataverse:
</p>

<ul>
<li><p> Search: <code><a href="#topic+dataverse_search">dataverse_search</a></code>
</p>
</li>
<li><p> Data download: <code><a href="#topic+get_dataframe_by_name">get_dataframe_by_name</a></code>, <code><a href="#topic+get_dataverse">get_dataverse</a></code>, <code><a href="#topic+dataverse_contents">dataverse_contents</a></code>, <code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+dataset_metadata">dataset_metadata</a></code>, <code><a href="#topic+get_file">get_file</a></code>
</p>
</li>
<li><p> Data archiving (SWORD API): <code><a href="#topic+service_document">service_document</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+initiate_sword_dataset">initiate_sword_dataset</a></code>, <code><a href="#topic+delete_sword_dataset">delete_sword_dataset</a></code>, <code><a href="#topic+publish_sword_dataset">publish_sword_dataset</a></code>, <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>
</li>
<li><p> Dataverse management &ldquo;native&rdquo; API: <code><a href="#topic+create_dataverse">create_dataverse</a></code>, <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>, <code><a href="#topic+delete_dataverse">delete_dataverse</a></code>
</p>
</li>
<li><p> Dataset management &ldquo;native&rdquo; API: <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+update_dataset">update_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+dataset_files">dataset_files</a></code>, <code><a href="#topic+dataset_versions">dataset_versions</a></code>
</p>
</li></ul>



<h3>References</h3>

<p><a href="https://iqss.github.io/dataverse-client-r/">Documentation for this R Package</a>
</p>
<p><a href="https://github.com/iqss/dataverse-client-r/">Code Repository for the R Package</a>
</p>
<p><a href="https://guides.dataverse.org/en/latest/api/index.html">Dataverse API Documentation</a>
</p>
<p><a href="https://dataverse.org/">Dataverse Homepage</a>
</p>
<p><a href="https://dataverse.harvard.edu/">Harvard IQSS Dataverse</a>
</p>

<hr>
<h2 id='dataverse_metadata'>Dataverse metadata</h2><span id='topic+dataverse_metadata'></span>

<h3>Description</h3>

<p>Get metadata for a named Dataverse.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataverse_metadata(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataverse_metadata_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="dataverse_metadata_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="dataverse_metadata_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="dataverse_metadata_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns a list of metadata for a named Dataverse. Use <code><a href="#topic+dataverse_contents">dataverse_contents</a></code> to list Dataverses and/or datasets contained within a Dataverse or use <code><a href="#topic+dataset_metadata">dataset_metadata</a></code> to get metadata for a specific dataset.
</p>


<h3>Value</h3>

<p>A list
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set_dataverse_metadata">set_dataverse_metadata</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# download file from:
# https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/ARKOTI
monogan &lt;- get_dataverse("monogan")
monogan_data &lt;- dataverse_contents(monogan)
dataverse_metadata(monogan)

## End(Not run)
</code></pre>

<hr>
<h2 id='dataverse_search'>Search Dataverse server</h2><span id='topic+dataverse_search'></span>

<h3>Description</h3>

<p>Search for Dataverses and datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dataverse_search(
  ...,
  type = c("dataverse", "dataset", "file"),
  subtree = NULL,
  sort = c("name", "date"),
  order = c("asc", "desc"),
  per_page = 10,
  start = NULL,
  show_relevance = FALSE,
  show_facets = FALSE,
  fq = NULL,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  verbose = TRUE,
  http_opts = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataverse_search_+3A_...">...</code></td>
<td>
<p>A length-one character vector specifying a search query, a named character vector of search arguments, or a sequence of named character arguments. The specific fields available may vary by server installation.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_type">type</code></td>
<td>
<p>A character vector specifying one or more of &ldquo;dataverse&rdquo;, &ldquo;dataset&rdquo;, and &ldquo;file&rdquo;, which is used to restrict the search results. By default, all three types of objects are searched for.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_subtree">subtree</code></td>
<td>
<p>Currently ignored.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_sort">sort</code></td>
<td>
<p>A character vector specifying whether to sort results by &ldquo;name&rdquo; or &ldquo;date&rdquo;.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_order">order</code></td>
<td>
<p>A character vector specifying either &ldquo;asc&rdquo; or &ldquo;desc&rdquo; results order.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_per_page">per_page</code></td>
<td>
<p>An integer specifying the page size of results.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_start">start</code></td>
<td>
<p>An integer specifying used for pagination.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_show_relevance">show_relevance</code></td>
<td>
<p>A logical indicating whether or not to show details of which fields were matched by the query</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_show_facets">show_facets</code></td>
<td>
<p>A logical indicating whether or not to show facets that can be operated on by the <code>fq</code> parameter</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_fq">fq</code></td>
<td>
<p>See API documentation.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_verbose">verbose</code></td>
<td>
<p>A logical indicating whether to display information about the search query (default is <code>TRUE</code>).</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_http_opts">http_opts</code></td>
<td>
<p>Currently ignored.</p>
</td></tr>
<tr><td><code id="dataverse_search_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides an interface for searching for Dataverses, datasets, and/or files within a Dataverse server.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_file">get_file</a></code>, <code><a href="#topic+get_dataverse">get_dataverse</a></code>, <code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+dataverse_contents">dataverse_contents</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# simple string search
dataverse_search("Gary King")

# search using named arguments
dataverse_search(c(author = "Gary King", title = "Ecological Inference"))
dataverse_search(author = "Gary King", title = "Ecological Inference")

# search only for datasets
dataverse_search(author = "Gary King", type = "dataset")

## End(Not run)
</code></pre>

<hr>
<h2 id='delete_dataset'>Delete draft dataset</h2><span id='topic+delete_dataset'></span>

<h3>Description</h3>

<p>Delete a dataset draft
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_dataset(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="delete_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="delete_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="delete_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to delete a draft (unpublished) Dataverse dataset. Once published, a dataset cannot be deleted. An existing draft can instead be modified using <code><a href="#topic+update_dataset">update_dataset</a></code>.
</p>


<h3>Value</h3>

<p>A logical.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+update_dataset">update_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta &lt;- list()
ds &lt;- create_dataset("mydataverse", body = meta)
delete_dataset(ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='delete_dataverse'>Delete Dataverse</h2><span id='topic+delete_dataverse'></span>

<h3>Description</h3>

<p>Delete a dataverse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_dataverse(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_dataverse_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="delete_dataverse_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="delete_dataverse_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="delete_dataverse_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function deletes a Dataverse.
</p>


<h3>Value</h3>

<p>A logical.
</p>


<h3>See Also</h3>

<p>To manage Dataverses: <code><a href="#topic+create_dataverse">create_dataverse</a></code>, <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>, <code><a href="#topic+dataverse_contents">dataverse_contents</a></code>; to get datasets: <code><a href="#topic+get_dataset">get_dataset</a></code>; to search for Dataverses, datasets, or files: <code><a href="#topic+dataverse_search">dataverse_search</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dv &lt;- create_dataverse("mydataverse")
delete_dataverse(dv)

## End(Not run)
</code></pre>

<hr>
<h2 id='delete_file'>Delete file (SWORD)</h2><span id='topic+delete_file'></span>

<h3>Description</h3>

<p>Delete a file from a SWORD (possibly unpublished) dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_file(
  id,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_file_+3A_id">id</code></td>
<td>
<p>A file ID, possibly returned by <code><a href="#topic+add_file">add_file</a></code>, or a complete &ldquo;edit-media/file&rdquo; URL.</p>
</td></tr>
<tr><td><code id="delete_file_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="delete_file_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="delete_file_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to delete a file from a dataset by its file ID. It is part of the SWORD API, which is used to upload data to a Dataverse server.
</p>


<h3>Value</h3>

<p>If successful, a logical <code>TRUE</code>, else possibly some information.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# create a list of metadata
metadat &lt;- list(title = "My Study",
                creator = "Doe, John",
                description = "An example study")

# create the dataset
dat &lt;- initiate_sword_dataset("mydataverse", body = metadat)

# add files to dataset
tmp &lt;- tempfile()
write.csv(iris, file = tmp)
f &lt;- add_file(dat, file = tmp)

# delete a file
ds &lt;- dataset_statement(dat)
delete_file(ds$files[[1]]$id)

# delete a dataset
delete_dataset(dat)

## End(Not run)
</code></pre>

<hr>
<h2 id='delete_sword_dataset'>Delete dataset (SWORD)</h2><span id='topic+delete_sword_dataset'></span>

<h3>Description</h3>

<p>Delete a SWORD (possibly unpublished) dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete_sword_dataset(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_sword_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A dataset DOI (or other persistent identifier).</p>
</td></tr>
<tr><td><code id="delete_sword_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="delete_sword_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="delete_sword_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to delete a dataset by its persistent identifier. It is part of the SWORD API, which is used to upload data to a Dataverse server.
</p>


<h3>Value</h3>

<p>If successful, a logical <code>TRUE</code>, else possibly some information.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# create a list of metadata
metadat &lt;- list(title = "My Study",
                creator = "Doe, John",
                description = "An example study")

# create the dataset in first dataverse
dat &lt;- initiate_sword_dataset(d[[2]], body = metadat)

# delete a dataset
delete_dataset(dat)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_dataframe_by_name'>Download dataverse file as a dataframe</h2><span id='topic+get_dataframe_by_name'></span><span id='topic+get_dataframe_by_id'></span><span id='topic+get_dataframe_by_doi'></span>

<h3>Description</h3>

<p>Reads in the Dataverse file into the R environment with any
user-specified function, such as <code>read.csv</code> or <code>readr</code> functions.
</p>
<p>Use <code>get_dataframe_by_name</code> if you know the name of the datafile and the DOI
of the dataset. Use <code>get_dataframe_by_doi</code> if you know the DOI of the datafile
itself. Use <code>get_dataframe_by_id</code> if you know the numeric ID of the
datafile. For files that are not datasets, the more generic <code>get_file</code> that
downloads the content as a binary is simpler.
</p>
<p>The function can read datasets that are unpublished and are still drafts,
as long as the entry has a UNF. See the download vignette for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataframe_by_name(
  filename,
  dataset = NULL,
  .f = NULL,
  original = FALSE,
  ...
)

get_dataframe_by_id(fileid, .f = NULL, original = FALSE, ...)

get_dataframe_by_doi(filedoi, .f = NULL, original = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dataframe_by_name_+3A_filename">filename</code></td>
<td>
<p>The name of the file of interest, with file extension, for example
<code>"roster-bulls-1996.tab"</code>. Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_.f">.f</code></td>
<td>
<p>The function to used for reading in the raw dataset. The user
must choose the appropriate function: for example if the target is a .rds
file, then <code>.f</code> should be <code>readRDS</code> or <code>readr::read_rds</code>. It can be a custom
function defined by the user. See examples for details.</p>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_original">original</code></td>
<td>
<p>A logical, whether to read the ingested,
archival version of the datafile if one exists. If <code>TRUE</code>, users should supply
a function to use to read in the original. The archival versions are tab-delimited
<code>.tab</code> files so if <code>original = FALSE</code>, <code>.f</code> is set to <code>readr::read_tsv</code>.</p>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+get_file">get_file</a></code>
</p>

<dl>
<dt><code>file</code></dt><dd><p>An integer specifying a file identifier; or a vector of integers
specifying file identifiers; or, if used with the prefix <code>"doi:"</code>, a
character with the file-specific DOI; or, if used without the prefix, a
filename accompanied by a dataset DOI in the <code>dataset</code> argument, or an object of
class &ldquo;dataverse_file&rdquo; as returned by <code><a href="#topic+dataset_files">dataset_files</a></code>.
Can be a vector for multiple files.</p>
</dd>
<dt><code>format</code></dt><dd><p>A character string specifying a file format for download.
by default, this is &ldquo;original&rdquo; (the original file format). If <code>NULL</code>,
no query is added, so ingested files are returned in their ingested TSV form.
For tabular datasets, the option &ldquo;bundle&rdquo; downloads the bundle
of the original and archival versions, as well as the documentation.
See <a href="https://guides.dataverse.org/en/latest/api/dataaccess.html">https://guides.dataverse.org/en/latest/api/dataaccess.html</a> for details.</p>
</dd>
<dt><code>vars</code></dt><dd><p>A character vector specifying one or more variable names, used to
extract a subset of the data.</p>
</dd>
<dt><code>key</code></dt><dd><p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</dd>
<dt><code>server</code></dt><dd><p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</dd>
<dt><code>return_url</code></dt><dd><p>Instead of downloading the file, return the URL for download.
Defaults to <code>FALSE</code>.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_fileid">fileid</code></td>
<td>
<p>A numeric ID internally used for <code>get_file_by_id</code>. Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="get_dataframe_by_name_+3A_filedoi">filedoi</code></td>
<td>
<p>A DOI for a single file (not the entire dataset), of the form
<code>"10.70122/FK2/PPIAXE/MHDB0O"</code> or <code>"doi:10.70122/FK2/PPIAXE/MHDB0O"</code>.
Can be a vector for multiple files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A R object that is returned by the default or user-supplied function
<code>.f</code> argument. For example, if <code>.f = readr::read_tsv()</code>, the function will
return a dataframe as read in by <code>readr::read_tsv()</code>. If the file identifier
is a vector, it will return a list where each slot corresponds to elements of the vector.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# 1. For files originally in plain-text (.csv, .tsv), we recommend
# retreiving data.frame from dataverse DOI and file name, or the file's DOI.

df_tab &lt;-
  get_dataframe_by_name(
    filename = "roster-bulls-1996.tab",
    dataset  = "doi:10.70122/FK2/HXJVJU",
    server   = "demo.dataverse.org"
  )

df_tab &lt;-
  get_dataframe_by_doi(
    filedoi      = "10.70122/FK2/HXJVJU/SA3Z2V",
    server       = "demo.dataverse.org"
  )

# 2. For files where Dataverse's ingest loses information (Stata .dta, SPSS .sav)
# or cannot be ingested (R .rds), we recommend
# specifying `original = TRUE` and specifying a read-in function in .f.

# Rds files are not ingested so original = TRUE and .f is required.
if (requireNamespace("readr", quietly = TRUE)) {
  df_from_rds_original &lt;-
    get_dataframe_by_name(
      filename   = "nlsw88_rds-export.rds",
      dataset    = "doi:10.70122/FK2/PPIAXE",
      server     = "demo.dataverse.org",
      original   = TRUE,
      .f         = readr::read_rds
    )
}

# Stata dta files lose attributes such as value labels upon ingest so
# reading the original version by a Stata reader such as `haven` is recommended.
if (requireNamespace("haven", quietly = TRUE)) {
  df_stata_original &lt;-
    get_dataframe_by_name(
      filename   = "nlsw88.tab",
      dataset    = "doi:10.70122/FK2/PPIAXE",
      server     = "demo.dataverse.org",
      original   = TRUE,
      .f         = haven::read_dta
    )
}

# 3. RData files are read in by `base::load()` but cannot be assigned to an
# object name. The following shows two possible ways to read in such files.
# First, the RData object can be loaded to the environment without object assignment.

get_dataframe_by_doi(
  filedoi = "10.70122/FK2/PPIAXE/X2FC5V",
  server = "demo.dataverse.org",
  original = TRUE,
  .f = function(x) load(x, envir = .GlobalEnv))

# If you are certain each RData contains only one object, one could define a
# custom function used in https://stackoverflow.com/a/34926943
load_object &lt;- function(file) {
  tmp &lt;- new.env()
  load(file = file, envir = tmp)
  tmp[[ls(tmp)[1]]]
}

# https://demo.dataverse.org/file.xhtml?persistentId=doi:10.70122/FK2/PPIAXE/X2FC5V
as_rda &lt;- get_dataframe_by_id(
  file = 1939003,
  server = "demo.dataverse.org",
  .f = load_object,
  original = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_dataframe_internal'>Write to temp and apply function</h2><span id='topic+get_dataframe_internal'></span>

<h3>Description</h3>

<p>Write to temp and apply function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataframe_internal(raw, filename, .f)
</code></pre>

<hr>
<h2 id='get_dataset'>Get dataset metadata</h2><span id='topic+get_dataset'></span><span id='topic+dataset_metadata'></span><span id='topic+dataset_files'></span>

<h3>Description</h3>

<p>Retrieve metadata. To actually download a data file,
see <code><a href="#topic+get_file">get_file</a></code> or <code><a href="#topic+get_dataframe_by_name">get_dataframe_by_name</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataset(
  dataset,
  version = ":latest",
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

dataset_metadata(
  dataset,
  version = ":latest",
  block = "citation",
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

dataset_files(
  dataset,
  version = ":latest",
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="get_dataset_+3A_version">version</code></td>
<td>
<p>A character string specifying a version of the dataset. This can be one of &ldquo;:draft&rdquo; (the current draft), &ldquo;:latest&rdquo; (the latest draft, if it exists, or the latest published version), &ldquo;:latest-published&rdquo; (the latest published version, ignoring any draft), or &ldquo;x.y&rdquo; (where &lsquo;<span class="samp">&#8288;x&#8288;</span>&rsquo; is a major version and &lsquo;<span class="samp">&#8288;y&#8288;</span>&rsquo; is a minor version; the &lsquo;<span class="samp">&#8288;.y&#8288;</span>&rsquo; can be omitted to obtain a major version). In lieu of this, a dataset's version-specific identification number can be used for the <code>dataset</code> argument.</p>
</td></tr>
<tr><td><code id="get_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="get_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
<tr><td><code id="get_dataset_+3A_block">block</code></td>
<td>
<p>A character string specifying a metadata block to retrieve.
By default this is &ldquo;citation&rdquo;. Other values may be available, depending
on the dataset, such as &ldquo;geospatial&rdquo; or &ldquo;socialscience&rdquo;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_dataset</code> retrieves details about a Dataverse dataset.
</p>
<p><code>dataset_metadata</code> returns a named metadata block for a dataset.
This is already returned by <code><a href="#topic+get_dataset">get_dataset</a></code>, but this function allows
you to retrieve just a specific block of metadata, such as citation information.
</p>
<p><code>dataset_files</code> returns a list of files in a dataset, similar to
<code><a href="#topic+get_dataset">get_dataset</a></code>. The difference is that this returns only a list of
&ldquo;dataverse_dataset&rdquo; objects, whereas <code><a href="#topic+get_dataset">get_dataset</a></code> returns
metadata and a data.frame of files (rather than a list of file objects).
</p>


<h3>Value</h3>

<p>A list of class &ldquo;dataverse_dataset&rdquo; or a list of a form dependent
on the specific metadata block retrieved. <code>dataset_files</code> returns a list of
objects of class &ldquo;dataverse_file&rdquo;.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_file">get_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# https://demo.dataverse.org/dataverse/dataverse-client-r
Sys.setenv("DATAVERSE_SERVER" = "demo.dataverse.org")

# download file from:
dv &lt;- get_dataverse("dataverse-client-r")
contents &lt;- dataverse_contents(dv)[[1]]

dataset_files(contents[[1]])
get_dataset(contents[[1]])
dataset_metadata(contents[[1]])

Sys.unsetenv("DATAVERSE_SERVER")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_dataverse'>Get Dataverse</h2><span id='topic+get_dataverse'></span><span id='topic+dataverse_contents'></span>

<h3>Description</h3>

<p>Retrieve details of a Dataverse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_dataverse(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  check = TRUE,
  ...
)

dataverse_contents(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_dataverse_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="get_dataverse_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_dataverse_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="get_dataverse_+3A_check">check</code></td>
<td>
<p>A logical indicating whether to check that the value of <code>dataverse</code> is actually a numeric</p>
</td></tr>
<tr><td><code id="get_dataverse_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>get_dataverse</code> function retrieves basic information about a Dataverse from a Dataverse server. To see the contents of the Dataverse, use <code><a href="#topic+dataverse_contents">dataverse_contents</a></code> instead. Contents might include one or more &ldquo;datasets&rdquo; and/or further Dataverses that themselves contain Dataverses and/or datasets. To view the file contents of a single Dataset, use <code><a href="#topic+get_dataset">get_dataset</a></code>.
</p>


<h3>Value</h3>

<p>A list of class &ldquo;dataverse&rdquo;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# https://demo.dataverse.org/dataverse/dataverse-client-r
Sys.setenv("DATAVERSE_SERVER" = "demo.dataverse.org")

# download file from:
dv &lt;- get_dataverse("dataverse-client-r")

# get a dataset from the dataverse
(d1 &lt;- get_dataset(dataverse_contents(dv)[[1]]))

# download a file using the metadata
get_dataframe_by_name("roster-bulls-1996.tab", d1$datasetPersistentId)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_facets'>Get Dataverse facets</h2><span id='topic+get_facets'></span>

<h3>Description</h3>

<p>Dataverse metadata facets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_facets(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_facets_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="get_facets_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_facets_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="get_facets_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Retrieve a list of Dataverse metadata facets.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p>To manage Dataverses: <code><a href="#topic+create_dataverse">create_dataverse</a></code>,  <code><a href="#topic+delete_dataverse">delete_dataverse</a></code>, <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>, <code><a href="#topic+dataverse_contents">dataverse_contents</a></code>; to get datasets: <code><a href="#topic+get_dataset">get_dataset</a></code>; to search for Dataverses, datasets, or files: <code><a href="#topic+dataverse_search">dataverse_search</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# download file from:
# https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/ARKOTI
monogan &lt;- get_dataverse("monogan")
(monogan_data &lt;- dataverse_contents(monogan))

# get facets
get_facets(monogan)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_file'>Download Dataverse file as a raw binary</h2><span id='topic+get_file'></span><span id='topic+get_file_by_name'></span><span id='topic+get_file_by_id'></span><span id='topic+get_file_by_doi'></span>

<h3>Description</h3>

<p>Download Dataverse File(s). <code style="white-space: pre;">&#8288;get_file_*&#8288;</code>
functions return a raw binary file, which cannot be readily analyzed in R.
To use the objects as dataframes, see the <code style="white-space: pre;">&#8288;get_dataframe_*&#8288;</code> functions at
<code>?get_dataframe</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_file(
  file,
  dataset = NULL,
  format = c("original", "bundle"),
  vars = NULL,
  return_url = FALSE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)

get_file_by_name(
  filename,
  dataset,
  format = c("original", "bundle"),
  vars = NULL,
  return_url = FALSE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)

get_file_by_id(
  fileid,
  dataset = NULL,
  format = c("original", "bundle"),
  vars = NULL,
  original = TRUE,
  progress = NULL,
  return_url = FALSE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)

get_file_by_doi(
  filedoi,
  dataset = NULL,
  format = c("original", "bundle"),
  vars = NULL,
  original = TRUE,
  return_url = FALSE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_file_+3A_file">file</code></td>
<td>
<p>An integer specifying a file identifier; or a vector of integers
specifying file identifiers; or, if used with the prefix <code>"doi:"</code>, a
character with the file-specific DOI; or, if used without the prefix, a
filename accompanied by a dataset DOI in the <code>dataset</code> argument, or an object of
class &ldquo;dataverse_file&rdquo; as returned by <code><a href="#topic+dataset_files">dataset_files</a></code>.
Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="get_file_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="get_file_+3A_format">format</code></td>
<td>
<p>A character string specifying a file format for download.
by default, this is &ldquo;original&rdquo; (the original file format). If <code>NULL</code>,
no query is added, so ingested files are returned in their ingested TSV form.
For tabular datasets, the option &ldquo;bundle&rdquo; downloads the bundle
of the original and archival versions, as well as the documentation.
See <a href="https://guides.dataverse.org/en/latest/api/dataaccess.html">https://guides.dataverse.org/en/latest/api/dataaccess.html</a> for details.</p>
</td></tr>
<tr><td><code id="get_file_+3A_vars">vars</code></td>
<td>
<p>A character vector specifying one or more variable names, used to
extract a subset of the data.</p>
</td></tr>
<tr><td><code id="get_file_+3A_return_url">return_url</code></td>
<td>
<p>Instead of downloading the file, return the URL for download.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_file_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_file_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="get_file_+3A_original">original</code></td>
<td>
<p>A logical, defaulting to TRUE. If a ingested (.tab) version is
available, download the original version instead of the ingested? If there was
no ingested version, is set to NA. Note in <code style="white-space: pre;">&#8288;get_dataframe_*&#8288;</code>,
<code>original</code> is set to FALSE by default. Either can be changed.</p>
</td></tr>
<tr><td><code id="get_file_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
<tr><td><code id="get_file_+3A_filename">filename</code></td>
<td>
<p>Filename of the dataset, with file extension as shown in Dataverse
(for example, if nlsw88.dta was the original but is displayed as the ingested
nlsw88.tab, use the ingested version.)</p>
</td></tr>
<tr><td><code id="get_file_+3A_fileid">fileid</code></td>
<td>
<p>A numeric ID internally used for <code>get_file_by_id</code>. Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="get_file_+3A_progress">progress</code></td>
<td>
<p>Whether to show a progress bar of the download.
If not specified, will be set to <code>TRUE</code> for a file larger than 100MB. To fix
a value, set <code>FALSE</code> or <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_file_+3A_filedoi">filedoi</code></td>
<td>
<p>A DOI for a single file (not the entire dataset), of the form
<code>"10.70122/FK2/PPIAXE/MHDB0O"</code> or <code>"doi:10.70122/FK2/PPIAXE/MHDB0O"</code>.
Can be a vector for multiple files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides access to data files from a Dataverse entry.
<code>get_file</code> is a general wrapper,
and can take either dataverse objects, file IDs, or a filename and dataverse.
Internally, all functions download each file by <code>get_file_by_id</code>.
<code>get_file_by_name</code> is a shorthand for running <code>get_file</code> by
specifying a file name (<code>filename</code>) and dataset (<code>dataset</code>).
<code>get_file_by_doi</code> obtains a file by its file DOI, bypassing the
<code>dataset</code> argument.
</p>


<h3>Value</h3>

<p><code>get_file</code> returns a raw vector (or list of raw vectors,
if <code>length(file) &gt; 1</code>), which can be saved locally with the <code>writeBin</code>
function.  To load datasets into the R environment dataframe, see
<a href="#topic+get_dataframe_by_name">get_dataframe_by_name</a>.
</p>


<h3>See Also</h3>

<p>To load the objects as datasets <a href="#topic+get_dataframe_by_name">get_dataframe_by_name</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# 1. Using filename and dataverse
f1 &lt;- get_file_by_name(
  filename = "nlsw88.tab",
  dataset  = "10.70122/FK2/PPIAXE",
  server   = "demo.dataverse.org"
)

# 2. Using file DOI
f2 &lt;- get_file_by_doi(
  filedoi  = "10.70122/FK2/PPIAXE/MHDB0O",
  server   = "demo.dataverse.org"
)

# 3. Two-steps: Find ID from get_dataset
d3 &lt;- get_dataset("doi:10.70122/FK2/PPIAXE", server = "demo.dataverse.org")
f3 &lt;- get_file(d3$files$id[1], server = "demo.dataverse.org")

# 4. Retrieve multiple raw data in list
f4_meta &lt;- get_dataset(
  "doi:10.70122/FK2/PPIAXE",
  server = "demo.dataverse.org"
)

f4 &lt;- get_file(f4_meta$files$id, server = "demo.dataverse.org")
names(f4) &lt;- f4_meta$files$label

# Write binary files. To load into R environment, use get_dataframe_by_name()
# The appropriate file extension needs to be assigned by the user.

writeBin(f1, "nlsw88.dta") # .tab extension but save as dta
writeBin(f4[["nlsw88_rds-export.rds"]], "nlsw88.rds") # originally a rds file
writeBin(f4[["nlsw88.tab"]], "nlsw88.dta") # originally a dta file

## End(Not run)

</code></pre>

<hr>
<h2 id='get_file_metadata'>Retrieve a ddi metadata file</h2><span id='topic+get_file_metadata'></span>

<h3>Description</h3>

<p>Retrieve a ddi metadata file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_file_metadata(
  file,
  dataset = NULL,
  format = c("ddi", "preprocessed"),
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_file_metadata_+3A_file">file</code></td>
<td>
<p>An integer specifying a file identifier; or a vector of integers
specifying file identifiers; or, if used with the prefix <code>"doi:"</code>, a
character with the file-specific DOI; or, if used without the prefix, a
filename accompanied by a dataset DOI in the <code>dataset</code> argument, or an object of
class &ldquo;dataverse_file&rdquo; as returned by <code><a href="#topic+dataset_files">dataset_files</a></code>.
Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="get_file_metadata_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="get_file_metadata_+3A_format">format</code></td>
<td>
<p>Defaults to &ldquo;ddi&rdquo; for metadata files</p>
</td></tr>
<tr><td><code id="get_file_metadata_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_file_metadata_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="get_file_metadata_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector containing a DDI
metadata file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
 ddi_raw &lt;- get_file_metadata(file = "nlsw88.tab",
                              dataset = "10.70122/FK2/PPIAXE",
                              server = "demo.dataverse.org")
 xml2::read_xml(ddi_raw)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_filesize'>Get File size of file</h2><span id='topic+get_filesize'></span>

<h3>Description</h3>

<p>Get File size of file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_filesize(
  x,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_filesize_+3A_x">x</code></td>
<td>
<p>A numeric fileid or file-specific DOI</p>
</td></tr>
<tr><td><code id="get_filesize_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="get_filesize_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>number of bytes as a numeric
</p>

<hr>
<h2 id='get_user_key'>Get API Key</h2><span id='topic+get_user_key'></span>

<h3>Description</h3>

<p>Get a user's API key
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_user_key(user, password, server = Sys.getenv("DATAVERSE_SERVER"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_user_key_+3A_user">user</code></td>
<td>
<p>A character vector specifying a Dataverse server username.</p>
</td></tr>
<tr><td><code id="get_user_key_+3A_password">password</code></td>
<td>
<p>A character vector specifying the password for this user.</p>
</td></tr>
<tr><td><code id="get_user_key_+3A_server">server</code></td>
<td>
<p>The Dataverse instance. See <code>get_file</code>.</p>
</td></tr>
<tr><td><code id="get_user_key_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use a Dataverse server's username and password login to obtain an
API key for the user. This can be used if one does not yet have an API key,
or desires to reset the key. This function does not require an API <code>key</code>
argument to authenticate, but <code>server</code> must still be specified.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Replace Username and password with personal login
 get_user_key("username", "password", server = "dataverse.harvard.edu")

## End(Not run)
</code></pre>

<hr>
<h2 id='initiate_sword_dataset'>Initiate dataset (SWORD)</h2><span id='topic+initiate_sword_dataset'></span>

<h3>Description</h3>

<p>Initiate a SWORD (possibly unpublished) dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initiate_sword_dataset(
  dataverse,
  body,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initiate_sword_dataset_+3A_dataverse">dataverse</code></td>
<td>
<p>A Dataverse alias or ID number, or an object of class &ldquo;dataverse&rdquo;, perhaps as returned by <code><a href="#topic+service_document">service_document</a></code>.</p>
</td></tr>
<tr><td><code id="initiate_sword_dataset_+3A_body">body</code></td>
<td>
<p>A list containing one or more metadata fields. Field names must be valid Dublin Core Terms labels (see details, below). The &lsquo;<span class="samp">&#8288;title&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;description&#8288;</span>&rsquo;, and &lsquo;<span class="samp">&#8288;creator&#8288;</span>&rsquo; fields are required.</p>
</td></tr>
<tr><td><code id="initiate_sword_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="initiate_sword_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="initiate_sword_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to initiate a dataset in a (SWORD) Dataverse by supplying relevant metadata. The function is part of the SWORD API (see <a href="https://www.ietf.org/rfc/rfc5023.txt">Atom entry specification</a>), which is used to upload data to a Dataverse server.
Allowed fields are:
&ldquo;abstract&rdquo;, &ldquo;accessRights&rdquo;, &ldquo;accrualMethod&rdquo;,
&ldquo;accrualPeriodicity&rdquo;, &ldquo;accrualPolicy&rdquo;, &ldquo;alternative&rdquo;,
&ldquo;audience&rdquo;, &ldquo;available&rdquo;, &ldquo;bibliographicCitation&rdquo;,
&ldquo;conformsTo&rdquo;, &ldquo;contributor&rdquo;, &ldquo;coverage&rdquo;, &ldquo;created&rdquo;,
&ldquo;creator&rdquo;, &ldquo;date&rdquo;, &ldquo;dateAccepted&rdquo;, &ldquo;dateCopyrighted&rdquo;,
&ldquo;dateSubmitted&rdquo;, &ldquo;description&rdquo;, &ldquo;educationLevel&rdquo;, &ldquo;extent&rdquo;,
&ldquo;format&rdquo;, &ldquo;hasFormat&rdquo;, &ldquo;hasPart&rdquo;, &ldquo;hasVersion&rdquo;,
&ldquo;identifier&rdquo;, &ldquo;instructionalMethod&rdquo;, &ldquo;isFormatOf&rdquo;,
&ldquo;isPartOf&rdquo;, &ldquo;isReferencedBy&rdquo;, &ldquo;isReplacedBy&rdquo;, &ldquo;isRequiredBy&rdquo;,
&ldquo;issued&rdquo;, &ldquo;isVersionOf&rdquo;, &ldquo;language&rdquo;, &ldquo;license&rdquo;,
&ldquo;mediator&rdquo;, &ldquo;medium&rdquo;, &ldquo;modified&rdquo;, &ldquo;provenance&rdquo;,
&ldquo;publisher&rdquo;, &ldquo;references&rdquo;, &ldquo;relation&rdquo;, &ldquo;replaces&rdquo;,
&ldquo;requires&rdquo;, &ldquo;rights&rdquo;, &ldquo;rightsHolder&rdquo;, &ldquo;source&rdquo;,
&ldquo;spatial&rdquo;, &ldquo;subject&rdquo;, &ldquo;tableOfContents&rdquo;, &ldquo;temporal&rdquo;,
&ldquo;title&rdquo;, &ldquo;type&rdquo;, and &ldquo;valid&rdquo;.
</p>


<h3>Value</h3>

<p>An object of class &ldquo;dataset_atom&rdquo;.
</p>


<h3>Note</h3>

<p>There are two ways to create dataset: native API (<code><a href="#topic+create_dataset">create_dataset</a></code>) and SWORD API (<code>initiate_sword_dataset</code>).
</p>


<h3>References</h3>

<p><a href="http://dublincore.org/documents/dcmi-terms/">Dublin Core Metadata Terms</a>
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_sword_dataset">delete_sword_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document (dataverse list)
d &lt;- service_document()

# create a list of metadata
metadat &lt;- list(title = "My Study",
                creator = "Doe, John",
                description = "An example study")

# create the dataset in first dataverse
dat &lt;- initiate_sword_dataset(d[[2]], body = metadat)

# add files to dataset
tmp &lt;- tempfile(fileext = ".csv")
write.csv(iris, file = tmp)
add_file(dat, file = tmp)

# publish dataset
publish_dataset(dat)

## End(Not run)
</code></pre>

<hr>
<h2 id='is_ingested'>Identify if file is an ingested file</h2><span id='topic+is_ingested'></span>

<h3>Description</h3>

<p>Identify if file is an ingested file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_ingested(
  x,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_ingested_+3A_x">x</code></td>
<td>
<p>A numeric fileid or file-specific DOI</p>
</td></tr>
<tr><td><code id="is_ingested_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="is_ingested_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="is_ingested_+3A_...">...</code></td>
<td>
<p>Arguments passed on to <code>get_file</code> (no effect here)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Length-1 logical, <code>TRUE</code> if it is ingested and <code>FALSE</code> otherwise
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# https://demo.dataverse.org/file.xhtml?persistentId=doi:10.70122/FK2/PPIAXE
# nlsw88.tab
is_ingested(x = "doi:10.70122/FK2/PPIAXE/MHDB0O",
            server = "demo.dataverse.org")
is_ingested(x = 1734017,
            server = "demo.dataverse.org")

# nlsw88_rds-export.rds
is_ingested(x = "doi:10.70122/FK2/PPIAXE/SUCFNI",
            server = "demo.dataverse.org")
is_ingested(x = 1734016,
            server = "demo.dataverse.org")

## End(Not run)
</code></pre>

<hr>
<h2 id='list_datasets'>List datasets (SWORD)</h2><span id='topic+list_datasets'></span>

<h3>Description</h3>

<p>List datasets in a SWORD (possibly unpublished) Dataverse
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_datasets(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_datasets_+3A_dataverse">dataverse</code></td>
<td>
<p>A Dataverse alias or ID number, or an object of class &ldquo;dataverse&rdquo;, perhaps as returned by <code><a href="#topic+service_document">service_document</a></code>.</p>
</td></tr>
<tr><td><code id="list_datasets_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="list_datasets_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="list_datasets_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to list datasets in a given Dataverse. It is part of the SWORD API, which is used to upload data to a Dataverse server. This means this can be used to view unpublished Dataverses and Datasets.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
Sys.setenv("DATAVERSE_SERVER" = "demo.dataverse.org")
Sys.setenv("DATAVERSE_KEY"    = "c7208dd2-6ec5-469a-bec5-f57e164888d4")
dv &lt;- get_dataverse("dataverse-client-r")
list_datasets(dv)

## End(Not run)
</code></pre>

<hr>
<h2 id='publish_dataset'>Publish dataset</h2><span id='topic+publish_dataset'></span>

<h3>Description</h3>

<p>Publish/release Dataverse dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish_dataset(
  dataset,
  minor = TRUE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publish_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="publish_dataset_+3A_minor">minor</code></td>
<td>
<p>A logical specifying whether the new release of the dataset is a &ldquo;minor&rdquo; release (<code>TRUE</code>, by default), resulting in a minor version increase (e.g., from 1.1 to 1.2). If <code>FALSE</code>, the dataset is given a &ldquo;major&rdquo; release (e.g., from 1.1 to 2.0).</p>
</td></tr>
<tr><td><code id="publish_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="publish_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="publish_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use this function to &ldquo;publish&rdquo; (i.e., publicly release) a draft Dataverse dataset. This creates a publicly visible listing of the dataset, accessible by its DOI, with a numbered version. This action cannot be undone.
There are no requirements for what constitutes a major or minor release, but a minor release might be used to update metadata (e.g., a new linked publication) or the addition of supplemental files. A major release is best used to reflect a substantial change to the dataset, such as would require a published erratum or a substantial change to data or code.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_dataset">get_dataset</a></code>, <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
meta &lt;- list()
ds &lt;- create_dataset("mydataverse", body = meta)
publish_dataset(ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='publish_dataverse'>Publish Dataverse (SWORD)</h2><span id='topic+publish_dataverse'></span>

<h3>Description</h3>

<p>Publish/re-publish a Dataverse via SWORD
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish_dataverse(
  dataverse,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publish_dataverse_+3A_dataverse">dataverse</code></td>
<td>
<p>An object of class &ldquo;sword_collection&rdquo;, as returned by <code><a href="#topic+service_document">service_document</a></code>.</p>
</td></tr>
<tr><td><code id="publish_dataverse_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="publish_dataverse_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="publish_dataverse_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to publish a (possibly already published) Dataverse. It is part of the SWORD API, which is used to upload data to a Dataverse server.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>

<hr>
<h2 id='publish_sword_dataset'>Publish dataset (SWORD)</h2><span id='topic+publish_sword_dataset'></span>

<h3>Description</h3>

<p>Publish a SWORD (possibly unpublished) dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publish_sword_dataset(
  dataset,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publish_sword_dataset_+3A_dataset">dataset</code></td>
<td>
<p>A dataset DOI (or other persistent identifier), an object of class &ldquo;dataset_atom&rdquo; or &ldquo;dataset_statement&rdquo;, or an appropriate and complete SWORD URL.</p>
</td></tr>
<tr><td><code id="publish_sword_dataset_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="publish_sword_dataset_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="publish_sword_dataset_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is used to publish a dataset by its persistent identifier. This cannot be undone. The function is part of the SWORD API, which is used to upload data to a Dataverse server.
</p>


<h3>Value</h3>

<p>A list.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_sword_dataset">delete_sword_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# create a list of metadata
metadat &lt;- list(title = "My Study",
                creator = "Doe, John",
                description = "An example study")

# create the dataset in first dataverse
dat &lt;- initiate_sword_dataset(d[[2]], body = metadat)

# publish dataset
publish_sword_dataset(dat)

# delete a dataset
delete_dataset(dat)

## End(Not run)
</code></pre>

<hr>
<h2 id='service_document'>SWORD Service Document</h2><span id='topic+service_document'></span>

<h3>Description</h3>

<p>Obtain a SWORD service document.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>service_document(
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="service_document_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="service_document_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="service_document_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to check authentication against the Dataverse SWORD server. It is typically a first step when creating a new Dataverse, a new Dataset, or modifying an existing Dataverse or Dataset.
</p>


<h3>Value</h3>

<p>A list of class &ldquo;sword_service_document&rdquo;, possibly with one or more &ldquo;sword_collection&rdquo; entries. The latter are SWORD representations of a Dataverse. These can be passed to other SWORD API functions, e.g., for creating a new dataset.
</p>


<h3>See Also</h3>

<p>Managing a Dataverse: <code><a href="#topic+publish_dataverse">publish_dataverse</a></code>; Managing a dataset: <code><a href="#topic+dataset_atom">dataset_atom</a></code>, <code><a href="#topic+list_datasets">list_datasets</a></code>, <code><a href="#topic+create_dataset">create_dataset</a></code>, <code><a href="#topic+delete_dataset">delete_dataset</a></code>, <code><a href="#topic+publish_dataset">publish_dataset</a></code>; Managing files within a dataset: <code><a href="#topic+add_file">add_file</a></code>, <code><a href="#topic+delete_file">delete_file</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# retrieve your service document
d &lt;- service_document()

# list available datasets in first dataverse
list_datasets(d[[2]])

## End(Not run)
</code></pre>

<hr>
<h2 id='set_dataverse_metadata'>Set Dataverse metadata</h2><span id='topic+set_dataverse_metadata'></span>

<h3>Description</h3>

<p>Set Dataverse metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_dataverse_metadata(
  dataverse,
  body,
  root = TRUE,
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_dataverse_metadata_+3A_dataverse">dataverse</code></td>
<td>
<p>A character string specifying a Dataverse name or an object of class &ldquo;dataverse&rdquo;.</p>
</td></tr>
<tr><td><code id="set_dataverse_metadata_+3A_body">body</code></td>
<td>
<p>A list.</p>
</td></tr>
<tr><td><code id="set_dataverse_metadata_+3A_root">root</code></td>
<td>
<p>A logical.</p>
</td></tr>
<tr><td><code id="set_dataverse_metadata_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="set_dataverse_metadata_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="set_dataverse_metadata_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function sets the value of metadata fields for a Dataverse. Use <code><a href="#topic+update_dataset">update_dataset</a></code> to set the metadata fields for a dataset instead.
</p>


<h3>Value</h3>

<p>A list
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dataverse_metadata">dataverse_metadata</a></code>
</p>

<hr>
<h2 id='URLs'>Get Dataverse file download URL</h2><span id='topic+URLs'></span><span id='topic+get_url'></span><span id='topic+get_url_by_name'></span><span id='topic+get_url_by_id'></span><span id='topic+get_url_by_doi'></span>

<h3>Description</h3>

<p>Get URL of associated file. <code style="white-space: pre;">&#8288;get_url_*&#8288;</code> functions return a URL as
a string. This can be then used in other functions such as <code>curl::curl_download()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_url(
  file,
  dataset = NULL,
  format = c("original", "bundle"),
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)

get_url_by_name(
  filename,
  dataset,
  format = c("original", "bundle"),
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)

get_url_by_id(
  fileid,
  dataset = NULL,
  format = c("original", "bundle"),
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)

get_url_by_doi(
  filedoi,
  dataset = NULL,
  format = c("original", "bundle"),
  key = Sys.getenv("DATAVERSE_KEY"),
  server = Sys.getenv("DATAVERSE_SERVER"),
  original = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="URLs_+3A_file">file</code></td>
<td>
<p>An integer specifying a file identifier; or a vector of integers
specifying file identifiers; or, if used with the prefix <code>"doi:"</code>, a
character with the file-specific DOI; or, if used without the prefix, a
filename accompanied by a dataset DOI in the <code>dataset</code> argument, or an object of
class &ldquo;dataverse_file&rdquo; as returned by <code><a href="#topic+dataset_files">dataset_files</a></code>.
Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="URLs_+3A_dataset">dataset</code></td>
<td>
<p>A character specifying a persistent identification ID for a dataset,
for example <code>"doi:10.70122/FK2/HXJVJU"</code>. Alternatively, an object of class
&ldquo;dataverse_dataset&rdquo; obtained by <code>dataverse_contents()</code>.</p>
</td></tr>
<tr><td><code id="URLs_+3A_format">format</code></td>
<td>
<p>A character string specifying a file format for download.
by default, this is &ldquo;original&rdquo; (the original file format). If <code>NULL</code>,
no query is added, so ingested files are returned in their ingested TSV form.
For tabular datasets, the option &ldquo;bundle&rdquo; downloads the bundle
of the original and archival versions, as well as the documentation.
See <a href="https://guides.dataverse.org/en/latest/api/dataaccess.html">https://guides.dataverse.org/en/latest/api/dataaccess.html</a> for details.</p>
</td></tr>
<tr><td><code id="URLs_+3A_key">key</code></td>
<td>
<p>A character string specifying a Dataverse server API key. If one
is not specified, functions calling authenticated API endpoints will fail.
Keys can be specified atomically or globally using
<code>Sys.setenv("DATAVERSE_KEY" = "examplekey")</code>.</p>
</td></tr>
<tr><td><code id="URLs_+3A_server">server</code></td>
<td>
<p>A character string specifying a Dataverse server.
Multiple Dataverse installations exist, with <code>"dataverse.harvard.edu"</code> being the
most major. The server can be defined each time within a function, or it can
be set as a default via an environment variable. To set a default, run
<code>Sys.setenv("DATAVERSE_SERVER" = "dataverse.harvard.edu")</code>
or add <code style="white-space: pre;">&#8288;DATAVERSE_SERVER = "dataverse.harvard.edu&#8288;</code> in one's <code>.Renviron</code>
file (<code>usethis::edit_r_environ()</code>), with the appropriate domain as its value.</p>
</td></tr>
<tr><td><code id="URLs_+3A_original">original</code></td>
<td>
<p>A logical, defaulting to TRUE. If a ingested (.tab) version is
available, download the original version instead of the ingested? If there was
no ingested version, is set to NA. Note in <code style="white-space: pre;">&#8288;get_dataframe_*&#8288;</code>,
<code>original</code> is set to FALSE by default. Either can be changed.</p>
</td></tr>
<tr><td><code id="URLs_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to an HTTP request function, such as
<code><a href="httr.html#topic+GET">GET</a></code>, <code><a href="httr.html#topic+POST">POST</a></code>, or
<code><a href="httr.html#topic+DELETE">DELETE</a></code>.</p>
</td></tr>
<tr><td><code id="URLs_+3A_filename">filename</code></td>
<td>
<p>Filename of the dataset, with file extension as shown in Dataverse
(for example, if nlsw88.dta was the original but is displayed as the ingested
nlsw88.tab, use the ingested version.)</p>
</td></tr>
<tr><td><code id="URLs_+3A_fileid">fileid</code></td>
<td>
<p>A numeric ID internally used for <code>get_file_by_id</code>. Can be a vector for multiple files.</p>
</td></tr>
<tr><td><code id="URLs_+3A_filedoi">filedoi</code></td>
<td>
<p>A DOI for a single file (not the entire dataset), of the form
<code>"10.70122/FK2/PPIAXE/MHDB0O"</code> or <code>"doi:10.70122/FK2/PPIAXE/MHDB0O"</code>.
Can be a vector for multiple files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function does not download the associated data.
In contrast, <code>get_dataframe()</code> downloads the requested file to a tempfile, and then uses R
to read it. And <code>get_file(.., return_url = FALSE)</code> reads the binary file into
R's memory with <code>httr::GET()</code>. <code>get_url()</code> simply return the URL for download.
</p>


<h3>Value</h3>

<p>A string or a list of strings that are URLs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get URLs
get_url_by_name(
  filename = "nlsw88.tab",
  dataset  = "10.70122/FK2/PPIAXE",
  server   = "demo.dataverse.org"
)
# https://demo.dataverse.org/api/access/datafile/1734017?format=original

# For ingested, tab-delimited files
get_url_by_name(
  filename = "nlsw88.tab",
  dataset  = "10.70122/FK2/PPIAXE",
  original = FALSE,
  server   = "demo.dataverse.org"
)
# https://demo.dataverse.org/api/access/datafile/1734017

# To download to local directory
curl::curl_download(
 "https://demo.dataverse.org/api/access/datafile/1734017?format=original",
 destfile = "nlsw88.dta")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
