<!DOCTYPE html><html lang="en"><head><title>Help for package icesAdvice</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {icesAdvice}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#icesAdvice-package'><p>Functions Related to ICES Advice</p></a></li>
<li><a href='#agesFbar'><p>Age Range for Fbar</p></a></li>
<li><a href='#Bpa'><p>Bpa from Blim</p></a></li>
<li><a href='#DLS3.2'><p>DLS Method 3.2</p></a></li>
<li><a href='#Fpa'><p>Fpa from Flim</p></a></li>
<li><a href='#gss'><p>Greater Silver Smelt</p></a></li>
<li><a href='#icesRound'><p>ICES Rounding Method</p></a></li>
<li><a href='#mohn'><p>Mohn's Rho</p></a></li>
<li><a href='#read.dls'><p>Read DLS3.2 Results from File</p></a></li>
<li><a href='#shake'><p>Southern Hake Retro</p></a></li>
<li><a href='#sigmaCI'><p>Sigma from Confidence Interval</p></a></li>
<li><a href='#sigmaPA'><p>Sigma from PA Reference Points</p></a></li>
<li><a href='#write.dls'><p>Write DLS3.2 Results to File</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>2.1.1</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions Related to ICES Advice</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, stats, utils</td>
</tr>
<tr>
<td>LazyData:</td>
<td>yes</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions that facilitate computational steps
  related to advice for fisheries management, according to ICES guidelines.
  These include methods for calculating reference points and model diagnostics.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ices.dk/advice">https://ices.dk/advice</a>,
<a href="https://github.com/ices-tools-prod/icesAdvice">https://github.com/ices-tools-prod/icesAdvice</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ices-tools-prod/icesAdvice/issues">https://github.com/ices-tools-prod/icesAdvice/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-02-17 18:58:12 UTC; colin</td>
</tr>
<tr>
<td>Author:</td>
<td>Arni Magnusson [aut],
  Colin Millar [aut, cre],
  Anne Cooper [aut],
  Ruben Verkempynck [ctb],
  Raphael Girardin [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Colin Millar &lt;colin.millar@ices.dk&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-18 10:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='icesAdvice-package'>Functions Related to ICES Advice</h2><span id='topic+icesAdvice-package'></span><span id='topic+icesAdvice'></span>

<h3>Description</h3>

<p>A collection of functions that facilitate computational steps related to
advice for fisheries management, according to ICES guidelines. These include
methods for calculating reference points and model diagnostics.
</p>


<h3>Details</h3>

<p><em>Calculate ICES advice:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+DLS3.2">DLS3.2</a></code>    </td><td style="text-align: left;"> DLS method 3.2</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+icesRound">icesRound</a></code> </td><td style="text-align: left;"> rounding method
</td>
</tr>

</table>

<p><em>Calculate PA reference points and sigma:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+Bpa">Bpa</a></code> </td><td style="text-align: left;"> from Blim</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+Fpa">Fpa</a></code> </td><td style="text-align: left;"> from Flim</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+sigmaCI">sigmaCI</a></code> </td><td style="text-align: left;"> from confidence interval</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+sigmaPA">sigmaPA</a></code> </td><td style="text-align: left;"> from PA reference points
</td>
</tr>

</table>

<p><em>Other calculations:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+agesFbar">agesFbar</a></code> </td><td style="text-align: left;"> suitable age range for Fbar</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+mohn">mohn</a></code>     </td><td style="text-align: left;"> Mohn's rho retrospective diagnosis
</td>
</tr>

</table>

<p><em>Read and write files:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+read.dls">read.dls</a></code>  </td><td style="text-align: left;"> read <code>DLS3.2</code> results from file</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+write.dls">write.dls</a></code> </td><td style="text-align: left;"> write <code>DLS3.2</code> results to file
</td>
</tr>

</table>

<p><em>Example tables:</em>
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+gss">gss</a></code>   </td><td style="text-align: left;"> Greater silver smelt catch at age</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code><a href="#topic+shake">shake</a></code> </td><td style="text-align: left;"> Southern hake retro
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Arni Magnusson, Colin Millar, and Anne Cooper.
</p>


<h3>References</h3>

<p>ICES advice: <a href="https://ices.dk/advice">https://ices.dk/advice</a>
</p>

<hr>
<h2 id='agesFbar'>Age Range for Fbar</h2><span id='topic+agesFbar'></span>

<h3>Description</h3>

<p>Calculate a suitable age range for average fishing mortality (Fbar).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agesFbar(cn, probs = c(0.1, 0.9), plot = FALSE, main = NULL,
  xlab = NULL, ylab = NULL, col = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="agesFbar_+3A_cn">cn</code></td>
<td>
<p>a vector, matrix, table, or data frame containing the catch at age
as integers or decimal values. Ages are indicated in names if
<code>cn</code> is a vector, or in column names if <code>cn</code> is a matrix,
table, or data frame.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_probs">probs</code></td>
<td>
<p>a vector of probabilities, e.g. <code>c(0.1, 0.9)</code> to calculate
the age range that covers 80% of the catch.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_plot">plot</code></td>
<td>
<p>whether to indicate the cut points on a bar plot.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_main">main</code></td>
<td>
<p>passed to <code>barplot</code>.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_xlab">xlab</code></td>
<td>
<p>passed to <code>barplot</code>.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_ylab">ylab</code></td>
<td>
<p>passed to <code>barplot</code>.</p>
</td></tr>
<tr><td><code id="agesFbar_+3A_col">col</code></td>
<td>
<p>passed to <code>barplot</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector of two values, the lower and upper age. These can be rounded to
construct an Fbar age range.
</p>


<h3>Note</h3>

<p>The calculations are more complicated than traditional quantiles, since the
ages for Fbar are discrete and not continuous. For example, with a continuous
variable, Fbar[5-6] has width one, but for a discrete variable it has width
two.
</p>
<p>The algorithm cuts off exactly <code>probs[1]</code> and <code>1-probs[2]</code> from the
left and right tails of the distribution and returns the corresponding values
that can be rounded with a simple <code>round(agesFbar(x))</code> to get a discrete
age range that covers close to <code>diff(probs)</code> of the catch.
</p>
<p>With <code>plot = TRUE</code>, the white bars are outside the Fbar age range and
the dark gray bars are inside it. The bars affected by the lower and upper
cut points are drawn in a shade between white and dark gray, providing a
visual cue whether that age should be in the Fbar age range or not.
</p>
<p>The calculated limits are somewhat unintuitive for interpretation, but they
are statistically precise and unbiased. A lower limit of 6.8 means that 80%
of age six was cut off the left tail, so rounding the lower age of Fbar to 7
appropriate. An upper limit of 14.1 means that all of age 14 and 10% of age
15 is inside the range, so rounding the upper age of Fbar to 14 is
appropriate. See <code>plot = TRUE</code> example below.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+gss">gss</a></code> is an example catch-at-age table.
</p>
<p><code><a href="stats.html#topic+quantile">quantile</a></code> is the base function to calculate quantiles.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>agesFbar(gss)
agesFbar(gss, plot=TRUE)
agesFbar(gss, plot=TRUE, main="Greater silver smelt in 5b and 6a")

# 50% coverage instead of 80%
agesFbar(gss, c(0.25, 0.75))

# Include only the last 20 years
agesFbar(tail(gss, 20))

# Tests
cn1 &lt;- setNames(c(100,400,400,100), 3:6)
cn2 &lt;- setNames(c(99,401,401,99), 3:6)
cn3 &lt;- setNames(c(101,399,399,101), 3:6)
cn4 &lt;- setNames(c(500,400,50,50), 3:6)
cn5 &lt;- setNames(c(50,50,400,500), 3:6)
agesFbar(cn1)
agesFbar(cn2)
agesFbar(cn3)
agesFbar(cn4)
agesFbar(cn5)

</code></pre>

<hr>
<h2 id='Bpa'>Bpa from Blim</h2><span id='topic+Bpa'></span>

<h3>Description</h3>

<p>Calculate the value of Bpa from Blim and sigmaB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Bpa(Blim, sigmaB)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Bpa_+3A_blim">Blim</code></td>
<td>
<p>the value of the Blim reference point.</p>
</td></tr>
<tr><td><code id="Bpa_+3A_sigmab">sigmaB</code></td>
<td>
<p>the estimation uncertainty in B (standard error of logSSB in
the terminal year).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value of Bpa.
</p>


<h3>Note</h3>

<p>The purpose of PA reference points is to apply a precautionary approach in
fisheries management.
</p>
<p>By comparing the current B to Bpa, one can answer the question: are we at
least 95% sure that B is above Blim, given the estimation uncertainty?
</p>
<p>The ICES (2017) technical guidelines define Bpa as:
</p>
<p style="text-align: center;"><code class="reqn">B_\mathrm{pa} = B_\mathrm{lim} \exp(1.645\sigma_B)</code>
</p>



<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>References</h3>

<p>ICES (2017) ICES fisheries management reference points for category 1 and 2
stocks. doi: <a href="https://doi.org/10.17895/ices.pub.3036">10.17895/ices.pub.3036</a><em>ICES Advice
Technical Guidelines 12.4.3.1</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Fpa">Fpa</a></code> calculates that reference point from Flim and sigmaF.
</p>
<p><code><a href="#topic+sigmaPA">sigmaPA</a></code> calculates the implicit sigma from PA reference points.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Bpa(100, 0.15)

</code></pre>

<hr>
<h2 id='DLS3.2'>DLS Method 3.2</h2><span id='topic+DLS3.2'></span>

<h3>Description</h3>

<p>Apply ICES method 3.2 to calculate catch advice for data-limited stocks
(DLS).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>DLS3.2(lastadvice, index, len = c(3, 2), buffer = FALSE, i1, i2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="DLS3.2_+3A_lastadvice">lastadvice</code></td>
<td>
<p>last catch advice given for this stock.</p>
</td></tr>
<tr><td><code id="DLS3.2_+3A_index">index</code></td>
<td>
<p>stock size index.</p>
</td></tr>
<tr><td><code id="DLS3.2_+3A_len">len</code></td>
<td>
<p>two integers, indicating the desired lengths of reference vectors.</p>
</td></tr>
<tr><td><code id="DLS3.2_+3A_buffer">buffer</code></td>
<td>
<p>whether to apply a -20% precautionary buffer.</p>
</td></tr>
<tr><td><code id="DLS3.2_+3A_i1">i1</code></td>
<td>
<p>included for backward compatibility, use <code>len</code> instead.</p>
</td></tr>
<tr><td><code id="DLS3.2_+3A_i2">i2</code></td>
<td>
<p>included for backward compatibility, use <code>len</code> instead.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function compares the average values of two reference vectors <code>i1</code>
and <code>i2</code>. In the simplest case, only <code>lastadvice</code> and <code>index</code>
are required to calculate the advice.
</p>
<p>The default value of <code>len = c(3, 2)</code> produces vectors <code>i1</code> and
<code>i2</code> of lengths 3 and 2,
</p>
<p><code style="white-space: pre;">&#8288;  &#8288;</code>i1 = (I[n-4], I[n-3], I[n-2])
</p>
<p><code style="white-space: pre;">&#8288;  &#8288;</code>i2 = (I[n-1], I[n])
</p>
<p>where I is a stock size index of length n.
</p>
<p>Other vector lengths can be used, such as <code>len = c(5, 2)</code> to get
</p>
<p><code style="white-space: pre;">&#8288;  &#8288;</code>i1 = (I[n-6], I[n-5], I[n-4], I[n-3], I[n-2])
</p>
<p><code style="white-space: pre;">&#8288;  &#8288;</code>i2 = (I[n-1], I[n])
</p>
<p>Finally, a -20% precautionary buffer can be applied at the end of all
calculations.
</p>
<p>See the ICES (2012) guidance report for details.
</p>


<h3>Value</h3>

<p>A list containing the resulting <code>advice</code> and other elements showing
intermediate steps in the calculations.
</p>


<h3>Author(s)</h3>

<p>Anne Cooper and Arni Magnusson.
</p>


<h3>References</h3>

<p>ICES (2012) ICES DLS guidance report: ICES implementation of advice for
data-limited stocks in 2012 in its 2012 advice.
<a href="http://ices.dk/sites/pub/Publication%20Reports/Expert%20Group%20Report/acom/2012/ADHOC/DLS%20Guidance%20Report%202012.pdf"><em>ICES
CM 2012/ACOM:68</em></a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.dls">read.dls</a></code> and <code><a href="#topic+write.dls">write.dls</a></code> read and write DLS3.2
results to file.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Three hypothetical surveys
survey &lt;- data.frame(year=2001:2010, randu[1:10,])

DLS3.2(1000, survey$x)

DLS3.2(1000, survey$y)
DLS3.2(1000, survey$y, len=c(5,2))

DLS3.2(1000, survey$z)
DLS3.2(1000, survey$z, buffer=TRUE)

# Plot
output &lt;- DLS3.2(1000, survey$y)
plot(y~year, survey, ylab="index", type="b", lty=3)
segments(2006, output$i1bar, 2008, lwd=2)
segments(2009, output$i2bar, 2010, lwd=2)

</code></pre>

<hr>
<h2 id='Fpa'>Fpa from Flim</h2><span id='topic+Fpa'></span>

<h3>Description</h3>

<p>Calculate the value of Fpa from Flim and sigmaF.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Fpa(Flim, sigmaF)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Fpa_+3A_flim">Flim</code></td>
<td>
<p>the value of the Flim reference point.</p>
</td></tr>
<tr><td><code id="Fpa_+3A_sigmaf">sigmaF</code></td>
<td>
<p>the estimation uncertainty in F (standard error of logF in the
terminal year).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Value of Fpa.
</p>


<h3>Note</h3>

<p>The purpose of PA reference points is to apply a precautionary approach in
fisheries management.
</p>
<p>By comparing the current F to Fpa, one can answer the question: are we at
least 95% sure that F is below Flim, given the estimation uncertainty?
</p>
<p>The ICES (2017) technical guidelines define Fpa as:
</p>
<p style="text-align: center;"><code class="reqn">F_\mathrm{pa} = F_\mathrm{lim} \exp(-1.645\sigma_F)</code>
</p>

<p>The <code>Fpa</code> function can also be used to calculate reference points based
on harvest rate: Hpa from Hlim and sigmaH.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>References</h3>

<p>ICES (2017) ICES fisheries management reference points for category 1 and 2
stocks. doi: <a href="https://doi.org/10.17895/ices.pub.3036">10.17895/ices.pub.3036</a><em>ICES Advice
Technical Guidelines 12.4.3.1</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Bpa">Bpa</a></code> calculates that reference point from Blim and sigmaB.
</p>
<p><code><a href="#topic+sigmaPA">sigmaPA</a></code> calculates the implicit sigma from PA reference points.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Fpa(0.90, 0.15)

</code></pre>

<hr>
<h2 id='gss'>Greater Silver Smelt</h2><span id='topic+gss'></span>

<h3>Description</h3>

<p>Catch at age of greater silver smelt in areas 5b and 6a, in crosstab format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gss
</code></pre>


<h3>Format</h3>

<p>Data frame containing 18 columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>Year</code> </td><td style="text-align: left;"> year</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>5</code>    </td><td style="text-align: left;"> number of five-year-olds in the catch (thousands)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>6</code>    </td><td style="text-align: left;"> number of six-year-olds in the catch (thousands)</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>...</code></td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>21</code>   </td><td style="text-align: left;"> number of twenty-one-year-olds in the catch (thousands)
</td>
</tr>

</table>



<h3>Details</h3>

<p>The data were presented and analyzed at the 2020 ICES Benchmark Workshop on
Greater Silver Smelt.
</p>


<h3>Source</h3>

<p><a href="https://stockassessment.org/datadisk/stockassessment/userdirs/user3/ARU.27.5b6a_WKGSS2020_FINAL/data/cn.dat">https://stockassessment.org/datadisk/stockassessment/userdirs/user3/ARU.27.5b6a_WKGSS2020_FINAL/data/cn.dat</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+agesFbar">agesFbar</a></code> calculates a suitable age range for Fbar.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gss
agesFbar(gss)
</code></pre>

<hr>
<h2 id='icesRound'>ICES Rounding Method</h2><span id='topic+icesRound'></span>

<h3>Description</h3>

<p>Round values according to the ICES Advice Technical Guidelines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>icesRound(x, percent = FALSE, sign = percent, na = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="icesRound_+3A_x">x</code></td>
<td>
<p>the values to round.</p>
</td></tr>
<tr><td><code id="icesRound_+3A_percent">percent</code></td>
<td>
<p>whether to format values with a percent suffix.</p>
</td></tr>
<tr><td><code id="icesRound_+3A_sign">sign</code></td>
<td>
<p>whether to format values with a sign prefix.</p>
</td></tr>
<tr><td><code id="icesRound_+3A_na">na</code></td>
<td>
<p>what to return when x is <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Rounded values as a <code>noquote</code> string vector, retaining trailing zeros.
</p>


<h3>Note</h3>

<p>This function implements the following ICES rounding method:
</p>

<table>
<tr>
 <td style="text-align: right;">
   i) </td><td style="text-align: left;"> Round to two significant figures when the first non-zero digit is
           2 or larger.</td>
</tr>
<tr>
 <td style="text-align: right;">
  ii) </td><td style="text-align: left;"> Round to three significant figures when the first non-zero digit
           is 1.
</td>
</tr>

</table>

<p>As indicated in the ICES (2017) technical guidelines, this rounding method
should not be applied to biomass, catch, or number of individuals. For those
quantities, use the normal <code><a href="base.html#topic+round">round</a></code> function instead.
</p>


<h3>Author(s)</h3>

<p>Colin Millar and Arni Magnusson.
</p>


<h3>References</h3>

<p>ICES (2017) Rounding rules to be applied in ICES advice.
doi: <a href="https://doi.org/10.17895/ices.pub.3038">10.17895/ices.pub.3038</a><em>ICES Advice Technical
Guidelines 16.5.4</em>.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+signif">signif</a></code> rounds values to a specified number of significant
digits.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>icesRound(0.123456)
icesRound(0.2468)

## Formatted string or numeric
icesRound(1.0)
as.numeric(icesRound(1.0))

## Percent, sign, NA
icesRound(33.33, percent = TRUE)
icesRound(33.33, sign = TRUE)
icesRound(c(1, NA, 3))
icesRound(c(1, NA, 3), na = NA)

## Example from the ICES Technical Guidelines
Actual &lt;- c(0.35776, 0.34665, 0.202, 0.12665, 0.001567, 0.002567, 0.013415,
            0.02315, 1.168, 2.15678)
Rounded &lt;- icesRound(Actual)
print(data.frame(Actual = as.character(Actual), Rounded), row.names = FALSE)

## Continued example from Guidelines, now rounding percentages
Actual &lt;- c(9.546, 10.546, 23.445, -1.482, -9.09, 0.51, 130.11, 584)
Rounded &lt;- icesRound(Actual, percent = TRUE)
print(data.frame(Actual = as.character(Actual), Rounded), row.names = FALSE)

</code></pre>

<hr>
<h2 id='mohn'>Mohn's Rho</h2><span id='topic+mohn'></span>

<h3>Description</h3>

<p>Calculate Mohn's rho, the average relative bias of retrospective estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mohn(x, peels = 5, details = FALSE, plot = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mohn_+3A_x">x</code></td>
<td>
<p>a matrix or data frame containing retrospective estimates in
columns, with years as row names.</p>
</td></tr>
<tr><td><code id="mohn_+3A_peels">peels</code></td>
<td>
<p>the number of retrospective peels to use in the calculation of
rho, or <code>NULL</code> to use all retrospective columns in <code>x</code>.</p>
</td></tr>
<tr><td><code id="mohn_+3A_details">details</code></td>
<td>
<p>whether to return the intermediate calculations of relative
bias.</p>
</td></tr>
<tr><td><code id="mohn_+3A_plot">plot</code></td>
<td>
<p>whether to plot the retrospective trajectories.</p>
</td></tr>
<tr><td><code id="mohn_+3A_...">...</code></td>
<td>
<p>passed to <code>matplot</code> and <code>points</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default value <code>peels = 5</code> is based on the ICES (2018) guidelines.
</p>
<p>The basic <code>plot = TRUE</code> functionality is intended to quickly visualize
the calculation of Mohn's rho. To produce a fully formatted plot, bypass the
<code>mohn</code> function and plot the <code>x</code> data directly.
</p>


<h3>Value</h3>

<p>Mohn's rho, along with intermediate calculations if <code>details = TRUE</code>.
</p>


<h3>Note</h3>

<p>Relative bias is defined as
</p>
<p style="text-align: center;"><code class="reqn">b_i=\frac{\hat\theta^{R_i}_{T\!-i}\,-\,\hat\theta_{T\!-i}}{\hat\theta_{T\!-i}}</code>
</p>

<p>and Mohn's rho is the average relative bias:
</p>
<p style="text-align: center;"><code class="reqn">\rho=\sum_{i=1}^n\frac{b_i}{n}</code>
</p>

<p>See Mohn (1999), Brooks and Legault (2016), ICES (2018), and
<code>mohn(shake, details=TRUE)</code> for details.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson, with a contribution from Ruben Verkempynck.
</p>


<h3>References</h3>

<p>Brooks, E. N. and Legault, C. M. (2016) Retrospective forecasting &mdash;
evaluating performance of stock projections in New England groundfish stocks.
<em>Canadian Journal of Fisheries and Aquatic Sciences</em>, <b>73</b>,
935&ndash;950.
</p>
<p>ICES (2018) Guidelines for calculating Mohn's rho: Retrospective bias in
assessment. <em>Draft document version 7 (2018-04-03), available at the
Expert Groups area on the ICES Sharepoint.</em>
</p>
<p>ICES (2020) Workshop on Catch Forecast from Biased Assessments (WKFORBIAS;
outputs from 2019 meeting).
doi: <a href="https://doi.org/10.17895/ices.pub.5997">10.17895/ices.pub.5997</a><em>ICES Scientific Reports
2(28)</em>.
</p>
<p>Mohn, R. (1999) The retrospective problem in sequential population analysis:
An investigation using cod fishery and simulated data. <em>ICES Journal of
Marine Science</em>, <b>56</b>, 473&ndash;488.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+shake">shake</a></code> is a retrospective example table.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mohn(shake)
mohn(shake, details=TRUE)
mohn(shake, plot=TRUE)

mohn(shake, peels=3, plot=TRUE, col="black", ylim=0:1, yaxs="i")
lines(as.numeric(rownames(shake)), shake$base, lwd=3)

## Plot last 10 years
x &lt;- rbind(matrix(1,28,6,dimnames=list(1981:2008,names(shake))), shake)
mohn(tail(x, 10), plot=TRUE, lwd=2, main="main")

</code></pre>

<hr>
<h2 id='read.dls'>Read DLS3.2 Results from File</h2><span id='topic+read.dls'></span>

<h3>Description</h3>

<p>Read results from the <code>DLS3.2</code> advisory method from a file into a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.dls(file)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.dls_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing <code>advice</code> and other elements showing intermediate steps
in the calculations.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write.dls">write.dls</a></code> writes <code>DLS3.2</code> results to a file.
</p>
<p><code><a href="#topic+DLS3.2">DLS3.2</a></code> can be used to calculate catch advice for data-limited
stocks (DLS).
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
survey &lt;- data.frame(year=2001:2010, randu[1:10,])
dls &lt;- icesAdvice::DLS3.2(1000, survey$y)

write.dls(dls, "dls.txt")
read.dls("dls.txt")

file.remove("dls.txt")

## End(Not run)

</code></pre>

<hr>
<h2 id='shake'>Southern Hake Retro</h2><span id='topic+shake'></span>

<h3>Description</h3>

<p>Retrospective estimates of Southern hake fishing mortality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shake
</code></pre>


<h3>Format</h3>

<p>Data frame containing 6 columns:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <code>base</code> </td><td style="text-align: left;"> base model estimates</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>-1</code>   </td><td style="text-align: left;"> 1st retro peel</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>-2</code>   </td><td style="text-align: left;"> 2nd retro peel</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>-3</code>   </td><td style="text-align: left;"> 3rd retro peel</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>-4</code>   </td><td style="text-align: left;"> 4th retro peel</td>
</tr>
<tr>
 <td style="text-align: left;">
  <code>-5</code>   </td><td style="text-align: left;"> 5th retro peel
</td>
</tr>

</table>



<h3>Details</h3>

<p>This dataset is an example from the ICES (2018) Advice Technical Guidelines
on quantifying and reporting retrospective bias.
</p>


<h3>Source</h3>

<p>ICES (2018) Guidelines for calculating Mohn's rho: Retrospective bias in
assessment. <em>Draft document version 7 (2018-04-03), available at the
Expert Groups area on the ICES Sharepoint.</em>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mohn">mohn</a></code> calculates Mohn's rho.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>shake
mohn(shake)
</code></pre>

<hr>
<h2 id='sigmaCI'>Sigma from Confidence Interval</h2><span id='topic+sigmaCI'></span>

<h3>Description</h3>

<p>Calculate the implicit sigma that was used to construct a confidence
interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sigmaCI(lo, hi, log = TRUE, level = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sigmaCI_+3A_lo">lo</code></td>
<td>
<p>the lower confidence bound.</p>
</td></tr>
<tr><td><code id="sigmaCI_+3A_hi">hi</code></td>
<td>
<p>the upper confidence bound.</p>
</td></tr>
<tr><td><code id="sigmaCI_+3A_log">log</code></td>
<td>
<p>whether the confidence interval is lognormal.</p>
</td></tr>
<tr><td><code id="sigmaCI_+3A_level">level</code></td>
<td>
<p>the confidence level.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Implicit value of sigma.
</p>


<h3>Note</h3>

<p>The purpose of PA reference points is to apply a precautionary approach in
fisheries management.
</p>
<p>This function is useful for reviewing PA reference points, when the report
provides a CI but not the value of sigma.
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sigmaPA">sigmaPA</a></code> calculates the implicit sigma from PA reference points.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sigmaCI(100, 200)

</code></pre>

<hr>
<h2 id='sigmaPA'>Sigma from PA Reference Points</h2><span id='topic+sigmaPA'></span>

<h3>Description</h3>

<p>Calculate the implicit sigma that was used to calculate PA reference points
from limit reference points (Xpa from Xlim).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sigmaPA(lim, pa)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sigmaPA_+3A_lim">lim</code></td>
<td>
<p>the value of the limit reference point, e.g., Blim or Flim.</p>
</td></tr>
<tr><td><code id="sigmaPA_+3A_pa">pa</code></td>
<td>
<p>the value of the PA reference point, e.g., Bpa or Fpa.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The order of the parameters does not matter, so <code>sigmaPA(Fpa, Flim)</code> and
<code>sigmaPA(Flim, Fpa)</code> are equivalent.
</p>


<h3>Value</h3>

<p>Implicit value of sigma.
</p>


<h3>Note</h3>

<p>The purpose of PA reference points is to apply a precautionary approach in
fisheries management.
</p>
<p>This function is useful for reviewing PA reference points, when the advice
sheet provides the value of Xlim and Xpa but not the value of sigma.
</p>
<p>The inference is based on the following relationships:
</p>
<p style="text-align: center;"><code class="reqn">B_\mathrm{pa} = B_\mathrm{lim} \exp(1.645\sigma_B)</code>
</p>

<p style="text-align: center;"><code class="reqn">F_\mathrm{pa} = F_\mathrm{lim} \exp(-1.645\sigma_F)</code>
</p>



<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+sigmaCI">sigmaCI</a></code> calculates the implicit sigma from a confidence
interval.
</p>
<p><code><a href="#topic+Bpa">Bpa</a></code> and <code><a href="#topic+Fpa">Fpa</a></code> calculate those reference points from
the limit reference points, based on a given sigma.
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sigmaPA(100, 120)

</code></pre>

<hr>
<h2 id='write.dls'>Write DLS3.2 Results to File</h2><span id='topic+write.dls'></span>

<h3>Description</h3>

<p>Write results from the <code>DLS3.2</code> advisory method to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.dls(x, file = "")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.dls_+3A_x">x</code></td>
<td>
<p>a list generated by the <code>DLS3.2</code> function.</p>
</td></tr>
<tr><td><code id="write.dls_+3A_file">file</code></td>
<td>
<p>a filename.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The resulting text file has Dos line endings (CRLF).
</p>


<h3>Author(s)</h3>

<p>Arni Magnusson.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.dls">read.dls</a></code> reads <code>DLS3.2</code> results from a file back into R.
</p>
<p><code><a href="#topic+DLS3.2">DLS3.2</a></code> can be used to calculate catch advice for data-limited
stocks (DLS).
</p>
<p><code><a href="#topic+icesAdvice-package">icesAdvice-package</a></code> gives an overview of the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
survey &lt;- data.frame(year=2001:2010, randu[1:10,])
dls &lt;- icesAdvice::DLS3.2(1000, survey$y)

write.dls(dls, "dls.txt")
read.dls("dls.txt")

file.remove("dls.txt")

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
