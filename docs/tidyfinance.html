<!DOCTYPE html><html lang="en"><head><title>Help for package tidyfinance</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tidyfinance}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#tidyfinance-package'><p>tidyfinance: Tidy Finance Helper Functions</p></a></li>
<li><a href='#add_lag_columns'><p>Add Lagged Versions of Columns to a Data Frame</p></a></li>
<li><a href='#assign_portfolio'><p>Assign Portfolios Based on Sorting Variable</p></a></li>
<li><a href='#breakpoint_options'><p>Create Breakpoint Options for Portfolio Sorting</p></a></li>
<li><a href='#check_supported_type'><p>Check if a Dataset Type is Supported</p></a></li>
<li><a href='#compute_breakpoints'><p>Compute Breakpoints Based on Sorting Variable</p></a></li>
<li><a href='#compute_long_short_returns'><p>Compute Long-Short Returns</p></a></li>
<li><a href='#compute_portfolio_returns'><p>Compute Portfolio Returns</p></a></li>
<li><a href='#create_summary_statistics'><p>Create Summary Statistics for Specified Variables</p></a></li>
<li><a href='#create_wrds_dummy_database'><p>Create WRDS Dummy Database</p></a></li>
<li><a href='#data_options'><p>Create Data Options</p></a></li>
<li><a href='#disconnection_connection'><p>Disconnect Database Connection</p></a></li>
<li><a href='#download_data'><p>Download and Process Data Based on Type</p></a></li>
<li><a href='#download_data_constituents'><p>Download Constituent Data</p></a></li>
<li><a href='#download_data_factors'><p>Download and Process Factor Data</p></a></li>
<li><a href='#download_data_factors_ff'><p>Download and Process Fama-French Factor Data</p></a></li>
<li><a href='#download_data_factors_q'><p>Download and Process Global Q Factor Data</p></a></li>
<li><a href='#download_data_fred'><p>Download and Process Data from FRED</p></a></li>
<li><a href='#download_data_macro_predictors'><p>Download and Process Macro Predictor Data</p></a></li>
<li><a href='#download_data_osap'><p>Download and Process Open Source Asset Pricing Data</p></a></li>
<li><a href='#download_data_stock_prices'><p>Download Stock Data</p></a></li>
<li><a href='#download_data_wrds'><p>Download Data from WRDS</p></a></li>
<li><a href='#download_data_wrds_ccm_links'><p>Download CCM Links from WRDS</p></a></li>
<li><a href='#download_data_wrds_compustat'><p>Download Data from WRDS Compustat</p></a></li>
<li><a href='#download_data_wrds_crsp'><p>Download Data from WRDS CRSP</p></a></li>
<li><a href='#download_data_wrds_fisd'><p>Download Filtered FISD Data from WRDS</p></a></li>
<li><a href='#download_data_wrds_trace_enhanced'><p>Download Enhanced TRACE Data from WRDS</p></a></li>
<li><a href='#estimate_betas'><p>Estimate Rolling Betas</p></a></li>
<li><a href='#estimate_fama_macbeth'><p>Estimate Fama-MacBeth Regressions</p></a></li>
<li><a href='#estimate_model'><p>Estimate Model Coefficients</p></a></li>
<li><a href='#get_random_user_agent'><p>Get a Random User Agent</p></a></li>
<li><a href='#get_wrds_connection'><p>Establish a Connection to the WRDS Database</p></a></li>
<li><a href='#lag_column'><p>Lag a Column Based on Date and Time Range</p></a></li>
<li><a href='#list_supported_indexes'><p>List Supported Indexes</p></a></li>
<li><a href='#list_supported_types'><p>List All Supported Dataset Types</p></a></li>
<li><a href='#list_supported_types_ff'><p>List Supported Fama-French Dataset Types</p></a></li>
<li><a href='#list_supported_types_ff_legacy'><p>List Supported Legacy Fama-French Dataset Types</p></a></li>
<li><a href='#list_supported_types_macro_predictors'><p>List Supported Macro Predictor Dataset Types</p></a></li>
<li><a href='#list_supported_types_other'><p>List Supported Other Data Types</p></a></li>
<li><a href='#list_supported_types_q'><p>List Supported Global Q Dataset Types</p></a></li>
<li><a href='#list_supported_types_wrds'><p>List Supported WRDS Dataset Types</p></a></li>
<li><a href='#list_tidy_finance_chapters'><p>List Chapters of Tidy Finance</p></a></li>
<li><a href='#open_tidy_finance_website'><p>Open Tidy Finance Website or Specific Chapter in Browser</p></a></li>
<li><a href='#set_wrds_credentials'><p>Set WRDS Credentials</p></a></li>
<li><a href='#trim'><p>Trim a Numeric Vector</p></a></li>
<li><a href='#winsorize'><p>Winsorize a Numeric Vector</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tidy Finance Helper Functions</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Helper functions for empirical research in financial
    economics, addressing a variety of topics covered in Scheuch, Voigt,
    and Weiss (2023) &lt;<a href="https://doi.org/10.1201%2Fb23237">doi:10.1201/b23237</a>&gt;.  The package is designed to
    provide shortcuts for issues extensively discussed in the book,
    facilitating easier application of its concepts. For more information
    and resources related to the book, visit
    <a href="https://www.tidy-finance.org/r/index.html">https://www.tidy-finance.org/r/index.html</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.tidy-finance.org/r/">https://www.tidy-finance.org/r/</a>,
<a href="https://github.com/tidy-finance/r-tidyfinance">https://github.com/tidy-finance/r-tidyfinance</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidy-finance/r-tidyfinance/issues">https://github.com/tidy-finance/r-tidyfinance/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr (&ge; 1.1.4), lifecycle, lubridate (&ge; 1.9.3), purrr
(&ge; 1.0.2), rlang (&ge; 1.1.3), slider (&ge; 0.3.1), stats, tibble,
tidyr (&ge; 1.3.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>DBI (&ge; 1.2.2), dbplyr (&ge; 2.5.0), frenchdata (&ge; 0.2.0),
furrr (&ge; 0.3.1), httr2 (&ge; 1.0.0), knitr, rmarkdown, RPostgres
(&ge; 1.4.5), sandwich (&ge; 3.1-0), testthat (&ge; 3.2.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-16 20:28:27 UTC; krise</td>
</tr>
<tr>
<td>Author:</td>
<td>Christoph Scheuch <a href="https://orcid.org/0009-0004-0423-6819"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Stefan Voigt <a href="https://orcid.org/0000-0001-5619-3161"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Patrick Weiss <a href="https://orcid.org/0000-0002-9282-5872"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cph],
  Maximilian Mücke <a href="https://orcid.org/0009-0000-9432-9795"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Christoph Scheuch &lt;christoph@tidy-intelligence.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-17 07:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='tidyfinance-package'>tidyfinance: Tidy Finance Helper Functions</h2><span id='topic+tidyfinance'></span><span id='topic+tidyfinance-package'></span>

<h3>Description</h3>

<p>Helper functions for empirical research in financial economics, addressing a variety of topics covered in Scheuch, Voigt, and Weiss (2023) <a href="https://doi.org/10.1201/b23237">doi:10.1201/b23237</a>. The package is designed to provide shortcuts for issues extensively discussed in the book, facilitating easier application of its concepts. For more information and resources related to the book, visit <a href="https://www.tidy-finance.org/r/index.html">https://www.tidy-finance.org/r/index.html</a>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Christoph Scheuch <a href="mailto:christoph@tidy-intelligence.com">christoph@tidy-intelligence.com</a> (<a href="https://orcid.org/0009-0004-0423-6819">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Stefan Voigt <a href="mailto:stefan.voigt@econ.ku.dk">stefan.voigt@econ.ku.dk</a> (<a href="https://orcid.org/0000-0001-5619-3161">ORCID</a>) [copyright holder]
</p>
</li>
<li><p> Patrick Weiss <a href="mailto:patrickw@ru.is">patrickw@ru.is</a> (<a href="https://orcid.org/0000-0002-9282-5872">ORCID</a>) [copyright holder]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Maximilian Mücke (<a href="https://orcid.org/0009-0000-9432-9795">ORCID</a>) [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.tidy-finance.org/r/">https://www.tidy-finance.org/r/</a>
</p>
</li>
<li> <p><a href="https://github.com/tidy-finance/r-tidyfinance">https://github.com/tidy-finance/r-tidyfinance</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/tidy-finance/r-tidyfinance/issues">https://github.com/tidy-finance/r-tidyfinance/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_lag_columns'>Add Lagged Versions of Columns to a Data Frame</h2><span id='topic+add_lag_columns'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function adds lagged versions of specified columns to a data frame. Optionally,
the operation can be grouped by another column and allows for flexible handling
of missing values. The lag is applied based on the <code>date</code> column in the data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_lag_columns(
  data,
  cols,
  by = NULL,
  lag,
  max_lag = lag,
  drop_na = TRUE,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="add_lag_columns_+3A_data">data</code></td>
<td>
<p>A data frame containing the columns to be lagged.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_cols">cols</code></td>
<td>
<p>A character vector specifying the names of the columns to lag.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_by">by</code></td>
<td>
<p>An optional column by which to group the data when applying the lag.
Default is <code>NULL</code>, meaning no grouping.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_lag">lag</code></td>
<td>
<p>The number of periods to lag the columns by. Must be non-negative.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_max_lag">max_lag</code></td>
<td>
<p>An optional maximum lag period. The default is equal to <code>lag</code>.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_drop_na">drop_na</code></td>
<td>
<p>A logical value indicating whether to drop rows with missing
values in the lagged columns. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="add_lag_columns_+3A_data_options">data_options</code></td>
<td>
<p>A list of additional options for data processing, such as
the <code>date</code> column. If <code>NULL</code>, defaults are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with lagged versions of the specified columns appended,
optionally grouped by another column.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a sample data frame
data &lt;- tibble::tibble(
  permno = rep(1:2, each = 10),
  date = rep(seq.Date(as.Date('2023-01-01'), by = "month", length.out = 10), 2),
  bm = runif(20, 0.5, 1.5),
  size = runif(20, 100, 200)
)

# Add lagged columns for 'bm' and 'size' with a 3-month lag, grouped by 'permno'
data |&gt;
  add_lag_columns(c("bm", "size"), lag = months(3), by = "permno")

# Introduce missing values in the data
data$bm[c(3, 5, 7, 15, 18)] &lt;- NA
data$size[c(2, 4, 8, 13)] &lt;- NA

# Add lagged columns with NA values removed
data |&gt;
  add_lag_columns(c("bm", "size"), lag = months(3), by = permno)

</code></pre>

<hr>
<h2 id='assign_portfolio'>Assign Portfolios Based on Sorting Variable</h2><span id='topic+assign_portfolio'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function assigns data points to portfolios based on a specified
sorting variable and the selected function to compute breakpoints. Users
can specify a function to compute breakpoints. The function must take
<code>data</code> and <code>sorting_variable</code> as the first two arguments. Additional
arguments are passed with a named list <a href="#topic+breakpoint_options">breakpoint_options</a>. The
function needs to return an ascending vector of breakpoints. By default,
breakpoints are computed with <a href="#topic+compute_breakpoints">compute_breakpoints</a>. The default
column names can be modified using <a href="#topic+data_options">data_options</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assign_portfolio(
  data,
  sorting_variable,
  breakpoint_options = NULL,
  breakpoint_function = compute_breakpoints,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assign_portfolio_+3A_data">data</code></td>
<td>
<p>A data frame containing the dataset for portfolio assignment.</p>
</td></tr>
<tr><td><code id="assign_portfolio_+3A_sorting_variable">sorting_variable</code></td>
<td>
<p>A string specifying the column name in <code>data</code> to be
used for sorting and determining portfolio assignments based on the
breakpoints.</p>
</td></tr>
<tr><td><code id="assign_portfolio_+3A_breakpoint_options">breakpoint_options</code></td>
<td>
<p>An optional named list of arguments passed to
<code>breakpoint_function</code>.</p>
</td></tr>
<tr><td><code id="assign_portfolio_+3A_breakpoint_function">breakpoint_function</code></td>
<td>
<p>A function to compute breakpoints. The default is
set to <a href="#topic+compute_breakpoints">compute_breakpoints</a>.</p>
</td></tr>
<tr><td><code id="assign_portfolio_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters,
indicating the column names required to run this function. The required
column names identify dates.  Defaults to <code>date = date</code> and <code>id = permno</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of portfolio assignments for each row in the input <code>data</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  id = 1:100,
  exchange = sample(c("NYSE", "NASDAQ"), 100, replace = TRUE),
  market_cap = 1:100
)

assign_portfolio(data, "market_cap", breakpoint_options(n_portfolios = 5))

assign_portfolio(
  data, "market_cap",
  breakpoint_options(percentiles = c(0.2, 0.4, 0.6, 0.8), breakpoint_exchanges = c("NYSE"))
)

</code></pre>

<hr>
<h2 id='breakpoint_options'>Create Breakpoint Options for Portfolio Sorting</h2><span id='topic+breakpoint_options'></span>

<h3>Description</h3>

<p>This function generates a structured list of options for defining breakpoints in
portfolio sorting. It includes parameters for the number of portfolios, percentile
thresholds, exchange-specific breakpoints, and smooth bunching, along with additional
optional parameters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>breakpoint_options(
  n_portfolios = NULL,
  percentiles = NULL,
  breakpoint_exchanges = NULL,
  smooth_bunching = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="breakpoint_options_+3A_n_portfolios">n_portfolios</code></td>
<td>
<p>Integer, optional. The number of portfolios to create. Must be a
positive integer. If not provided, defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="breakpoint_options_+3A_percentiles">percentiles</code></td>
<td>
<p>Numeric vector, optional. A vector of percentile thresholds for
defining breakpoints. Each value should be between 0 and 1. If not provided, defaults
to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="breakpoint_options_+3A_breakpoint_exchanges">breakpoint_exchanges</code></td>
<td>
<p>Character, optional. A non-empty string specifying the
exchange for which the breakpoints apply. If not provided, defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="breakpoint_options_+3A_smooth_bunching">smooth_bunching</code></td>
<td>
<p>Logical, optional. Indicates whether smooth bunching should
be applied. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="breakpoint_options_+3A_...">...</code></td>
<td>
<p>Additional optional arguments. These will be captured in the resulting
structure as a list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class <code>"tidyfinance_breakpoint_options"</code> containing the provided
breakpoint options, including any additional arguments passed via <code>...</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>breakpoint_options(
  n_portfolios = 5,
  percentiles = c(0.2, 0.4, 0.6, 0.8),
  breakpoint_exchanges = "NYSE",
  smooth_bunching = TRUE,
  custom_threshold = 0.5,
  another_option = "example"
)

</code></pre>

<hr>
<h2 id='check_supported_type'>Check if a Dataset Type is Supported</h2><span id='topic+check_supported_type'></span>

<h3>Description</h3>

<p>This function checks if a given dataset type is supported by verifying
against a list of all supported dataset types from different domains. If the
specified type is not supported, it stops execution and returns an error
message listing all supported types.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_supported_type(type)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_supported_type_+3A_type">type</code></td>
<td>
<p>The dataset type to check for support.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Does not return a value; instead, it either passes silently if the
type is supported or stops execution with an error message if the type is
unsupported.
</p>

<hr>
<h2 id='compute_breakpoints'>Compute Breakpoints Based on Sorting Variable</h2><span id='topic+compute_breakpoints'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function computes breakpoints based on a specified sorting. It can
optionally filter the data by exchanges before computing the breakpoints.
The function requires either the number of portfolios to be created or
specific percentiles for the breakpoints, but not both. The function also
optionally handles cases where the sorting variable clusters on the edges,
by assigning all extreme values to the edges and attempting to compute
equally populated breakpoints with the remaining values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_breakpoints(
  data,
  sorting_variable,
  breakpoint_options,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_breakpoints_+3A_data">data</code></td>
<td>
<p>A data frame containing the dataset for breakpoint computation.</p>
</td></tr>
<tr><td><code id="compute_breakpoints_+3A_sorting_variable">sorting_variable</code></td>
<td>
<p>A string specifying the column name in <code>data</code> to be
used for determining breakpoints.</p>
</td></tr>
<tr><td><code id="compute_breakpoints_+3A_breakpoint_options">breakpoint_options</code></td>
<td>
<p>A named list of <a href="#topic+breakpoint_options">breakpoint_options</a> for the breakpoints. The
arguments include
</p>

<ul>
<li> <p><code>n_portfolios</code> An optional integer specifying the number of equally
sized portfolios to create. This parameter is mutually exclusive with
<code>percentiles</code>.
</p>
</li>
<li> <p><code>percentiles</code> An optional numeric vector specifying the percentiles for
determining the breakpoints of the portfolios. This parameter is mutually
exclusive with <code>n_portfolios</code>.
</p>
</li>
<li> <p><code>breakpoint_exchanges</code> An optional character vector specifying exchange
names to filter the data before computing breakpoints. Exchanges must be
stored in a column named <code>exchange</code> in <code>data</code>. If <code>NULL</code>, no filtering is
applied.
</p>
</li>
<li> <p><code>smooth_bunching</code> An optional logical parameter specifying if to
attempt smoothing non-extreme portfolios if the sorting variable bunches on
the extremes (TRUE, the default), or not (FALSE). In some cases, smoothing
will not result in equal-sized portfolios off the edges due to multiple
clusters. If sufficiently large bunching is detected, <code>percentiles</code> is
ignored and equally-spaced portfolios are returned for these cases with a
warning.
</p>
</li></ul>
</td></tr>
<tr><td><code id="compute_breakpoints_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters, indicating the column names
required to run this function. The required column names identify dates. Defaults to <code>exchange = exchange</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of breakpoints of the desired length.
</p>


<h3>Note</h3>

<p>This function will stop and throw an error if both <code>n_portfolios</code> and
<code>percentiles</code> are provided or if neither is provided. Ensure that you only
use one of these parameters.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  id = 1:100,
  exchange = sample(c("NYSE", "NASDAQ"), 100, replace = TRUE),
  market_cap = 1:100
)

compute_breakpoints(data, "market_cap", breakpoint_options(n_portfolios = 5))
compute_breakpoints(
  data, "market_cap",
  breakpoint_options(percentiles = c(0.2, 0.4, 0.6, 0.8), breakpoint_exchanges = c("NYSE"))
 )

</code></pre>

<hr>
<h2 id='compute_long_short_returns'>Compute Long-Short Returns</h2><span id='topic+compute_long_short_returns'></span>

<h3>Description</h3>

<p>This function calculates long-short returns based on the returns of portfolios. The long-short
return is computed as the difference between the returns of the &quot;top&quot; and &quot;bottom&quot; portfolios.
The direction of the calculation can be adjusted based on whether the return from the &quot;bottom&quot;
portfolio is subtracted from or added to the return from the &quot;top&quot; portfolio.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_long_short_returns(
  data,
  direction = "top_minus_bottom",
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_long_short_returns_+3A_data">data</code></td>
<td>
<p>A data frame containing portfolio returns. The data frame must include
columns for the portfolio identifier, date, and return measurements. The portfolio column should
indicate different portfolios, and there should be columns for return measurements prefixed with
&quot;ret_excess&quot;.</p>
</td></tr>
<tr><td><code id="compute_long_short_returns_+3A_direction">direction</code></td>
<td>
<p>A character string specifying the direction of the long-short return calculation.
It can be either &quot;top_minus_bottom&quot; or &quot;bottom_minus_top&quot;. Default is &quot;top_minus_bottom&quot;. If set
to &quot;bottom_minus_top&quot;, the return will be computed as (bottom - top).</p>
</td></tr>
<tr><td><code id="compute_long_short_returns_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters, indicating the column
names required to run this function. The required column names identify dates. Defaults to
<code>date = date</code>, <code>portfolio = portfolio</code> and <code>ret_excess = ret_excess</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with columns for date, return measurement types (from the &quot;ret_measure&quot;
column), and the computed long-short returns. The data frame is arranged by date and pivoted to
have return measurement types as columns with their corresponding long-short returns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  permno = 1:100,
  date = rep(seq.Date(from = as.Date("2020-01-01"), by = "month", length.out = 100), each = 10),
  mktcap_lag = runif(100, 100, 1000),
  ret_excess = rnorm(100),
  size = runif(100, 50, 150)
)

portfolio_returns &lt;- compute_portfolio_returns(
  data, "size", "univariate",
  breakpoint_options_main = breakpoint_options(n_portfolios = 5)
)

compute_long_short_returns(portfolio_returns)

</code></pre>

<hr>
<h2 id='compute_portfolio_returns'>Compute Portfolio Returns</h2><span id='topic+compute_portfolio_returns'></span>

<h3>Description</h3>

<p>This function computes individual portfolio returns based on specified
sorting variables and sorting methods. The portfolios can be rebalanced every
period or on an annual frequency by specifying a rebalancing month, which is
only applicable at a monthly return frequency. The function supports
univariate and bivariate sorts, with the latter supporting dependent and
independent sorting methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_portfolio_returns(
  sorting_data,
  sorting_variables,
  sorting_method,
  rebalancing_month = NULL,
  breakpoint_options_main,
  breakpoint_options_secondary = NULL,
  breakpoint_function_main = compute_breakpoints,
  breakpoint_function_secondary = compute_breakpoints,
  min_portfolio_size = 0,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_portfolio_returns_+3A_sorting_data">sorting_data</code></td>
<td>
<p>A data frame containing the dataset for portfolio
assignment and return computation. Following CRSP naming conventions, the
panel data must identify individual stocks with <code>permno</code> and the time point
with <code>date</code>. It must contain columns for the sorting variables and
<code>ret_excess</code>. Additionally, <code>mktcap_lag</code> is needed for value-weighted
returns.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_sorting_variables">sorting_variables</code></td>
<td>
<p>A character vector specifying the column names in
<code>sorting_data</code> to be used for sorting and determining portfolio
assignments. For univariate sorts, provide a single variable. For bivariate
sorts, provide two variables, where the first string refers to the main
variable and the second string refers to the secondary (&quot;control&quot;)
variable.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_sorting_method">sorting_method</code></td>
<td>
<p>A string specifying the sorting method to be used.
Possible values are:
</p>

<ul>
<li> <p><code>"univariate"</code>: For a single sorting variable.
</p>
</li>
<li> <p><code>"bivariate-dependent"</code>: For two sorting variables, where the main
sort depends on the secondary variable.
</p>
</li>
<li> <p><code>"bivariate-independent"</code>: For two independent sorting variables.
</p>
</li></ul>

<p>For bivariate sorts, the portfolio returns are averaged over the
controlling sorting variable (i.e., the second sorting variable) and only
portfolio returns for the main sorting variable (given as the first element
of <code>sorting_variable</code>) are returned.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_rebalancing_month">rebalancing_month</code></td>
<td>
<p>An integer between 1 and 12 specifying the month in
which to form portfolios that are held constant for one year. For example,
setting it to <code>7</code> creates portfolios in July that are held constant until
June of the following year. The default <code>NULL</code> corresponds to periodic
rebalancing.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_breakpoint_options_main">breakpoint_options_main</code></td>
<td>
<p>A named list of <a href="#topic+breakpoint_options">breakpoint_options</a> passed to
<code>breakpoint_function</code> for the main sorting variable.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_breakpoint_options_secondary">breakpoint_options_secondary</code></td>
<td>
<p>An optional named list of <a href="#topic+breakpoint_options">breakpoint_options</a>
passed to <code>breakpoint_function</code> for the secondary sorting variable.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_breakpoint_function_main">breakpoint_function_main</code></td>
<td>
<p>A function to compute the main sorting
variable. The default is set to <a href="#topic+compute_breakpoints">compute_breakpoints</a>.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_breakpoint_function_secondary">breakpoint_function_secondary</code></td>
<td>
<p>A function to compute the secondary
sorting variable. The default is set to <a href="#topic+compute_breakpoints">compute_breakpoints</a>.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_min_portfolio_size">min_portfolio_size</code></td>
<td>
<p>An integer specifying the minimum number of
portfolio constituents (default is set to <code>0</code>, effectively deactivating the
check). Small portfolios' returns are set to zero.</p>
</td></tr>
<tr><td><code id="compute_portfolio_returns_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters, indicating
the column names required to run this function.  The required column names identify dates,
the stocks, and returns. Defaults to <code>date=date</code>, <code>id=permno</code>, and <code>ret_excess = ret_excess</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function checks for consistency in the provided arguments. For
univariate sorts, a single sorting variable and a corresponding number of
portfolios must be provided. For bivariate sorts, two sorting variables and
two corresponding numbers of portfolios (or percentiles) are required. The
sorting method determines how portfolios are assigned and returns are
computed. The function handles missing and extreme values appropriately
based on the specified sorting method and rebalancing frequency.
</p>


<h3>Value</h3>

<p>A data frame with computed portfolio returns, containing the
following columns:
</p>

<ul>
<li> <p><code>portfolio</code>: The portfolio identifier.
</p>
</li>
<li> <p><code>date</code>: The date of the portfolio return.
</p>
</li>
<li> <p><code>ret_excess_vw</code>: The value-weighted excess return of the portfolio
(only computed if the <code>sorting_data</code> contains <code>mktcap_lag</code>)
</p>
</li>
<li> <p><code>ret_excess_ew</code>: The equal-weighted excess return of the portfolio.
</p>
</li></ul>



<h3>Note</h3>

<p>Ensure that the <code>sorting_data</code> contains all the required columns: The
specified sorting variables and <code>ret_excess</code>. The function will stop and
throw an error if any required columns are missing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Univariate sorting with periodic rebalancing
data &lt;- data.frame(
  permno = 1:500,
  date = rep(seq.Date(from = as.Date("2020-01-01"), by = "month", length.out = 100), each = 10),
  mktcap_lag = runif(500, 100, 1000),
  ret_excess = rnorm(500),
  size = runif(500, 50, 150)
)

compute_portfolio_returns(
  data, "size", "univariate",
  breakpoint_options_main = breakpoint_options(n_portfolios = 5)
)

# Bivariate dependent sorting with annual rebalancing
compute_portfolio_returns(
  data, c("size", "mktcap_lag"), "bivariate-independent", 7,
  breakpoint_options_main = breakpoint_options(n_portfolios = 5),
  breakpoint_options_secondary = breakpoint_options(n_portfolios = 3),
)

</code></pre>

<hr>
<h2 id='create_summary_statistics'>Create Summary Statistics for Specified Variables</h2><span id='topic+create_summary_statistics'></span>

<h3>Description</h3>

<p>Computes a set of summary statistics for numeric and integer variables in a
data frame. This function allows users to select specific variables for
summarization and can calculate statistics for the whole dataset or within
groups specified by the <code>by</code> argument. Additional detail levels for quantiles
can be included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_summary_statistics(
  data,
  ...,
  by = NULL,
  detail = FALSE,
  drop_na = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_summary_statistics_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables to be summarized.</p>
</td></tr>
<tr><td><code id="create_summary_statistics_+3A_...">...</code></td>
<td>
<p>Comma-separated list of unquoted variable names in the data frame
to summarize. These variables must be either numeric, integer, or logical.</p>
</td></tr>
<tr><td><code id="create_summary_statistics_+3A_by">by</code></td>
<td>
<p>An optional unquoted variable name to group the data before
summarizing. If <code>NULL</code> (the default), summary statistics are computed across
all observations.</p>
</td></tr>
<tr><td><code id="create_summary_statistics_+3A_detail">detail</code></td>
<td>
<p>A logical flag indicating whether to compute detailed summary
statistics including additional quantiles. Defaults to FALSE, which
computes basic statistics (n, mean, sd, min, median, max). When TRUE,
additional quantiles (1%, 5%, 10%, 25%, 75%, 90%, 95%, 99%) are computed.</p>
</td></tr>
<tr><td><code id="create_summary_statistics_+3A_drop_na">drop_na</code></td>
<td>
<p>A logical flag indicating whether to drop missing values for
each variabl (default is FALSE).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function first checks that all specified variables are of type
numeric, integer, or logical. If any variables do not meet this criterion,
the function stops and returns an error message indicating the non-conforming
variables.
</p>
<p>The basic set of summary statistics includes the count of non-NA values (n),
mean, standard deviation (sd), minimum (min), median (q50), and maximum
(max). If <code>detail</code> is TRUE, the function also computes the 1st, 5th, 10th,
25th, 75th, 90th, 95th, and 99th percentiles.
</p>
<p>Summary statistics are computed for each variable specified in <code>...</code>. If a
<code>by</code> variable is provided, statistics are computed within each level of the
<code>by</code> variable.
</p>


<h3>Value</h3>

<p>A tibble with summary statistics for each selected variable. If <code>by</code>
is specified, the output includes the grouping variable as well. Each row
represents a variable (and a group if <code>by</code> is used), and columns include
the computed statistics.
</p>

<hr>
<h2 id='create_wrds_dummy_database'>Create WRDS Dummy Database</h2><span id='topic+create_wrds_dummy_database'></span>

<h3>Description</h3>

<p>Downloads the WRDS dummy database from the respective Tidy Finance GitHub
repository and saves it to the specified path. If the file already exists,
the user is prompted before it is replaced.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_wrds_dummy_database(
  path,
  url = paste0("https://github.com/tidy-finance/website/tree/main/blog/",
    "tidy-finance-dummy-data/data/tidy_finance.sqlite")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_wrds_dummy_database_+3A_path">path</code></td>
<td>
<p>The file path where the SQLite database should be saved.</p>
</td></tr>
<tr><td><code id="create_wrds_dummy_database_+3A_url">url</code></td>
<td>
<p>The URL where the SQLite database is stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>. Side effect: downloads a file to the specified path.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>path &lt;- paste0(tempdir(), "/tidy_finance_r.sqlite")
create_wrds_dummy_database(path)
</code></pre>

<hr>
<h2 id='data_options'>Create Data Options</h2><span id='topic+data_options'></span>

<h3>Description</h3>

<p>This function creates a list of data options used in financial data analysis,
specifically for TidyFinance-related functions. It allows users to specify
key parameters such as <code>id</code>, <code>date</code>, <code>exchange</code>, <code>mktcap_lag</code>, and <code>ret_excess</code>
along with other additional options passed through <code>...</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_options(
  id = "permno",
  date = "date",
  exchange = "exchange",
  mktcap_lag = "mktcap_lag",
  ret_excess = "ret_excess",
  portfolio = "portfolio",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="data_options_+3A_id">id</code></td>
<td>
<p>A character string representing the identifier variable (e.g., &quot;permno&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_date">date</code></td>
<td>
<p>A character string representing the date variable (e.g., &quot;date&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_exchange">exchange</code></td>
<td>
<p>A character string representing the exchange variable (e.g., &quot;exchange&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_mktcap_lag">mktcap_lag</code></td>
<td>
<p>A character string representing the market capitalization lag variable
(e.g., &quot;mktcap_lag&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_ret_excess">ret_excess</code></td>
<td>
<p>A character string representing the excess return variable
(e.g., &quot;ret_excess&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_portfolio">portfolio</code></td>
<td>
<p>A character string representing the portfolio variable (e.g., &quot;portfolio&quot;).</p>
</td></tr>
<tr><td><code id="data_options_+3A_...">...</code></td>
<td>
<p>Additional arguments to be included in the data options list.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of class <code>tidyfinance_data_options</code> containing the specified data options.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data_options(
  id = "permno",
  date = "date",
  exchange = "exchange"
)

</code></pre>

<hr>
<h2 id='disconnection_connection'>Disconnect Database Connection</h2><span id='topic+disconnection_connection'></span>

<h3>Description</h3>

<p>This function safely disconnects an established database connection using the
DBI package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>disconnection_connection(con)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="disconnection_connection_+3A_con">con</code></td>
<td>
<p>A database connection object created by DBI::dbConnect or any
similar function that establishes a connection to a database.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value: <code>TRUE</code> if disconnection was successful, <code>FALSE</code>
otherwise.
</p>

<hr>
<h2 id='download_data'>Download and Process Data Based on Type</h2><span id='topic+download_data'></span>

<h3>Description</h3>

<p>Downloads and processes data based on the specified type (e.g., Fama-French
factors, Global Q factors, or macro predictors), and date range. This
function checks if the specified type is supported and then delegates to the
appropriate function for downloading and processing the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data(type, start_date = NULL, end_date = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_+3A_type">type</code></td>
<td>
<p>The type of dataset to download, indicating either factor data or
macroeconomic predictors.</p>
</td></tr>
<tr><td><code id="download_data_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset or a subset is returned,
dependening on the dataset type.</p>
</td></tr>
<tr><td><code id="download_data_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, the full dataset or a subset is returned,
depending on the dataset type.</p>
</td></tr>
<tr><td><code id="download_data_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to specific download functions depending on the <code>type</code>.
For instance, if <code>type</code> is &quot;constituents&quot;, this might include parameters specific to <code>download_data_constituents</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with processed data, including dates and the relevant
financial metrics, filtered by the specified date range.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data("factors_ff_3_monthly", "2000-01-01", "2020-12-31")
  download_data("macro_predictors_monthly", "2000-01-01", "2020-12-31")
  download_data("constituents", index = "DAX")
  download_data("fred", series = c("GDP", "CPIAUCNS"))
  download_data("stock_prices", symbols = c("AAPL", "MSFT"))

</code></pre>

<hr>
<h2 id='download_data_constituents'>Download Constituent Data</h2><span id='topic+download_data_constituents'></span>

<h3>Description</h3>

<p>This function downloads and processes the constituent data for a specified financial index.
The data is fetched from a remote CSV file, filtered, and cleaned to provide relevant information
about constituents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_constituents(index)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_constituents_+3A_index">index</code></td>
<td>
<p>A character string specifying the name of the financial index for which to download
constituent data. The index must be one of the supported indexes listed by
<a href="#topic+list_supported_indexes">list_supported_indexes</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function retrieves the URL of the CSV file for the specified index from ETF sites, then sends
an HTTP GET request to download the CSV file, and processes the CSV file to extract equity
constituents.
</p>
<p>The approach is inspired by <code>tidyquant::tq_index()</code>, which uses a different wrapper around o
ther ETFs.
</p>


<h3>Value</h3>

<p>A tibble with two columns:
</p>

<dl>
<dt>symbol</dt><dd><p>The ticker symbol of the equity constituent.</p>
</dd>
<dt>name</dt><dd><p>The name of the equity constituent.</p>
</dd>
<dt>location</dt><dd><p>The location where the company is based.</p>
</dd>
<dt>exchange</dt><dd><p>The exchange where the equity is traded.</p>
</dd>
</dl>

<p>The tibble is filtered to exclude non-equity entries, blacklisted symbols, empty names, and any
entries containing the index name or &quot;CASH&quot;.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_constituents("DAX")


</code></pre>

<hr>
<h2 id='download_data_factors'>Download and Process Factor Data</h2><span id='topic+download_data_factors'></span>

<h3>Description</h3>

<p>Downloads and processes factor data based on the specified type (Fama-French
or Global Q), and date range. This function delegates to specific functions
based on the type of factors requested: Fama-French or Global Q. It checks if
the specified type is supported before proceeding with the download and
processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_factors(type, start_date = NULL, end_date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_factors_+3A_type">type</code></td>
<td>
<p>The type of dataset to download, indicating the factor model and
frequency.</p>
</td></tr>
<tr><td><code id="download_data_factors_+3A_start_date">start_date</code></td>
<td>
<p>The start date for filtering the data, in &quot;YYYY-MM-DD&quot;
format.</p>
</td></tr>
<tr><td><code id="download_data_factors_+3A_end_date">end_date</code></td>
<td>
<p>The end date for filtering the data, in &quot;YYYY-MM-DD&quot; format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with processed factor data, including dates, risk-free
rates, market excess returns, and other factors, filtered by the specified
date range.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_factors("factors_ff_3_monthly", "2000-01-01", "2020-12-31")
  download_data_factors("factors_ff_3_daily")
  download_data_factors("factors_q5_daily", "2020-01-01", "2020-12-31")

</code></pre>

<hr>
<h2 id='download_data_factors_ff'>Download and Process Fama-French Factor Data</h2><span id='topic+download_data_factors_ff'></span>

<h3>Description</h3>

<p>Downloads and processes Fama-French factor data based on the specified type
(e.g., &quot;factors_ff_3_monthly&quot;), and date range. The function first checks if
the specified type is supported and requires the 'frenchdata' package to
download the data. It processes the raw data into a structured format,
including date conversion, scaling factor values, and filtering by the
specified date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_factors_ff(type, start_date = NULL, end_date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_factors_ff_+3A_type">type</code></td>
<td>
<p>The type of dataset to download, corresponding to the specific
Fama-French model and frequency.</p>
</td></tr>
<tr><td><code id="download_data_factors_ff_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_factors_ff_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If there are multiple tables in the raw Fama-French data (e.g., value-weighted
and equal-weighted returns), then the function only returns the first table
because these are the most popular. Please use the <code>frenchdata</code> package
directly if you need less commonly used tables.
</p>


<h3>Value</h3>

<p>A tibble with processed factor data, including the date, risk-free
rate, market excess return, and other factors, filtered by the specified
date range.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_factors_ff("factors_ff_3_monthly", "2000-01-01", "2020-12-31")
  download_data_factors_ff("factors_ff_10_industry_portfolios_monthly", "2000-01-01", "2020-12-31")

</code></pre>

<hr>
<h2 id='download_data_factors_q'>Download and Process Global Q Factor Data</h2><span id='topic+download_data_factors_q'></span>

<h3>Description</h3>

<p>Downloads and processes Global Q factor data based on the specified type
(daily, monthly, etc.), date range, and source URL. The function first checks
if the specified type is supported, identifies the dataset name from the
supported types, then downloads and processes the data from the provided URL.
The processing includes date conversion, renaming variables to a standardized
format, scaling factor values, and filtering by the specified date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_factors_q(
  type,
  start_date = NULL,
  end_date = NULL,
  url = "https://global-q.org/uploads/1/2/2/6/122679606/"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_factors_q_+3A_type">type</code></td>
<td>
<p>The type of dataset to download (e.g., &quot;factors_q5_daily&quot;,
&quot;factors_q5_monthly&quot;).</p>
</td></tr>
<tr><td><code id="download_data_factors_q_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_factors_q_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_factors_q_+3A_url">url</code></td>
<td>
<p>The base URL from which to download the dataset files, with a
specific path for Global Q datasets.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with processed factor data, including the date, risk-free
rate, market excess return, and other factors, filtered by the specified
date range.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_factors_q("factors_q5_daily", "2020-01-01", "2020-12-31")
  download_data_factors_q("factors_q5_annual")

</code></pre>

<hr>
<h2 id='download_data_fred'>Download and Process Data from FRED</h2><span id='topic+download_data_fred'></span>

<h3>Description</h3>

<p>This function downloads a specified data series from the Federal Reserve Economic Data (FRED)
website, processes the data, and returns it as a tibble.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_fred(series, start_date = NULL, end_date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_fred_+3A_series">series</code></td>
<td>
<p>A character vector specifying the FRED series ID to download.</p>
</td></tr>
<tr><td><code id="download_data_fred_+3A_start_date">start_date</code></td>
<td>
<p>The start date for filtering the data, in &quot;YYYY-MM-DD&quot; format.</p>
</td></tr>
<tr><td><code id="download_data_fred_+3A_end_date">end_date</code></td>
<td>
<p>The end date for filtering the data, in &quot;YYYY-MM-DD&quot; format.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function constructs the URL based on the provided FRED series ID, performs an HTTP GET
request to download the data in CSV format, and processes it to a tidy tibble format. The
resulting tibble includes the date, value, and the series ID.
</p>
<p>This approach is inspired by <code>quantmod::getSymbolsFRED()</code> which uses a different wrapper around
the same FRED download data site. If you want to systematically download FRED data via API,
please consider using <code>fredr</code> package.
</p>


<h3>Value</h3>

<p>A tibble containing the processed data with three columns:
</p>

<dl>
<dt>date</dt><dd><p>The date corresponding to the data point.</p>
</dd>
<dt>value</dt><dd><p>The value of the data series at that date.</p>
</dd>
<dt>series</dt><dd><p>The FRED series ID corresponding to the data.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_fred("CPIAUCNS")
  download_data_fred(c("GDP", "CPIAUCNS"), "2010-01-01", "2010-12-31")


</code></pre>

<hr>
<h2 id='download_data_macro_predictors'>Download and Process Macro Predictor Data</h2><span id='topic+download_data_macro_predictors'></span>

<h3>Description</h3>

<p>Downloads and processes macroeconomic predictor data based on the specified
type (monthly, quarterly, or annual), date range, and source URL. The
function first checks if the specified type is supported, then downloads the
data from the provided URL (defaulting to a Google Sheets export link). It
processes the raw data into a structured format, calculating additional
financial metrics and filtering by the specified date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_macro_predictors(
  type,
  start_date = NULL,
  end_date = NULL,
  sheet_id = "1bM7vCWd3WOt95Sf9qjLPZjoiafgF_8EG"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_macro_predictors_+3A_type">type</code></td>
<td>
<p>The type of dataset to download (&quot;macro_predictors_monthly&quot;,
&quot;macro_predictors_quarterly&quot;, &quot;macro_predictors_annual&quot;).</p>
</td></tr>
<tr><td><code id="download_data_macro_predictors_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_macro_predictors_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_macro_predictors_+3A_sheet_id">sheet_id</code></td>
<td>
<p>The Google Sheets ID from which to download the dataset, with the
default &quot;1bM7vCWd3WOt95Sf9qjLPZjoiafgF_8EG&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with processed data, filtered by the specified date range
and including financial metrics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 download_data_macro_predictors("macro_predictors_monthly")


</code></pre>

<hr>
<h2 id='download_data_osap'>Download and Process Open Source Asset Pricing Data</h2><span id='topic+download_data_osap'></span>

<h3>Description</h3>

<p>This function downloads the data from <a href="https://www.openassetpricing.com/data/">Open Source Asset Pricing</a>
from Google Sheets using a specified sheet ID, processes the data by converting column names to
snake_case, and optionally filters the data based on a provided date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_osap(
  start_date = NULL,
  end_date = NULL,
  sheet_id = "1JyhcF5PRKHcputlioxlu5j5GyLo4JYyY"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_osap_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_osap_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, the full dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_osap_+3A_sheet_id">sheet_id</code></td>
<td>
<p>A character string representing the Google Sheet ID from which to download the data.
Default is <code>"1JyhcF5PRKHcputlioxlu5j5GyLo4JYyY"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the processed data. The column names are converted to snake_case,
and the data is filtered by the specified date range if <code>start_date</code> and <code>end_date</code> are provided.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  osap_monthly &lt;- download_data_osap(start_date = "2020-01-01", end_date = "2020-06-30")

</code></pre>

<hr>
<h2 id='download_data_stock_prices'>Download Stock Data</h2><span id='topic+download_data_stock_prices'></span>

<h3>Description</h3>

<p>Downloads historical stock data from Yahoo Finance for given symbols and date range.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_stock_prices(symbols, start_date = NULL, end_date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_stock_prices_+3A_symbols">symbols</code></td>
<td>
<p>A character vector of stock symbols to download data for. At least one
symbol must be provided.</p>
</td></tr>
<tr><td><code id="download_data_stock_prices_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_stock_prices_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the downloaded stock data with columns: symbol,
date, volume, open, low, high, close, and adjusted_close.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_stock_prices(c("AAPL", "MSFT"))
  download_data_stock_prices("GOOGL", "2021-01-01", "2022-01-01" )

</code></pre>

<hr>
<h2 id='download_data_wrds'>Download Data from WRDS</h2><span id='topic+download_data_wrds'></span>

<h3>Description</h3>

<p>This function acts as a wrapper to download data from various WRDS datasets
including CRSP, Compustat, and CCM links based on the specified type. It is
designed to handle different data types by redirecting to the appropriate
specific data download function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds(type, start_date = NULL, end_date = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_+3A_type">type</code></td>
<td>
<p>A string specifying the type of data to download. It should match
one of the predefined patterns to indicate the dataset: &quot;wrds_crsp&quot; for
CRSP data, &quot;wrds_compustat&quot; for Compustat data, or &quot;wrds_ccm_links&quot; for CCM
links data.</p>
</td></tr>
<tr><td><code id="download_data_wrds_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, a subste of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to specific download functions depending on the <code>type</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the requested data, with the structure and
contents depending on the specified <code>type</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  crsp_monthly &lt;- download_data_wrds("wrds_crsp_monthly", "2020-01-01", "2020-12-31")
  compustat_annual &lt;- download_data_wrds("wrds_compustat_annual", "2020-01-01", "2020-12-31")
  ccm_links &lt;- download_data_wrds("wrds_ccm_links", "2020-01-01", "2020-12-31")
  fisd &lt;- download_data_wrds("wrds_fisd")
  trace_enhanced &lt;- download_data_wrds("wrds_trace_enhanced", cusips = "00101JAH9")

</code></pre>

<hr>
<h2 id='download_data_wrds_ccm_links'>Download CCM Links from WRDS</h2><span id='topic+download_data_wrds_ccm_links'></span>

<h3>Description</h3>

<p>This function downloads data from the WRDS CRSP/Compustat Merged (CCM) links
database. It allows users to specify the type of links (<code>linktype</code>) and the
primacy of the link (<code>linkprim</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds_ccm_links(linktype = c("LU", "LC"), linkprim = c("P", "C"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_ccm_links_+3A_linktype">linktype</code></td>
<td>
<p>A character vector indicating the type of link to download.
The default is <code>c("LU", "LC")</code>, where &quot;LU&quot; stands for &quot;Link Up&quot; and &quot;LC&quot;
for &quot;Link CRSP&quot;.</p>
</td></tr>
<tr><td><code id="download_data_wrds_ccm_links_+3A_linkprim">linkprim</code></td>
<td>
<p>A character vector indicating the primacy of the link.
Default is <code>c("P", "C")</code>, where &quot;P&quot; indicates primary and &quot;C&quot; indicates
conditional links.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the columns <code>permno</code>, <code>gvkey</code>, <code>linkdt</code>, and
<code>linkenddt</code>, where <code>linkenddt</code> is the end date of the link, and missing end
dates are replaced with today's date.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  ccm_links &lt;- download_data_wrds_ccm_links(linktype = "LU", linkprim = "P")


</code></pre>

<hr>
<h2 id='download_data_wrds_compustat'>Download Data from WRDS Compustat</h2><span id='topic+download_data_wrds_compustat'></span>

<h3>Description</h3>

<p>This function downloads financial data from the WRDS Compustat database for a
given type of financial data, start date, and end date. It filters the data
according to industry format, data format, and consolidation level, and
returns the most current data for each reporting period. Additionally, the
annual data also includes the calculated calculates book equity (be),
operating profitability (op), and investment (inv) for each company.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds_compustat(
  type,
  start_date = NULL,
  end_date = NULL,
  additional_columns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_compustat_+3A_type">type</code></td>
<td>
<p>The type of financial data to download.</p>
</td></tr>
<tr><td><code id="download_data_wrds_compustat_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_compustat_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_compustat_+3A_additional_columns">additional_columns</code></td>
<td>
<p>Additional columns from the Compustat table
as a character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with financial data for the specified period, including
variables for book equity (be), operating profitability (op), investment
(inv), and others.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  download_data_wrds_compustat("wrds_compustat_annual", "2020-01-01", "2020-12-31")
  download_data_wrds_compustat("wrds_compustat_quarterly", "2020-01-01", "2020-12-31")

  # Add additional columns
  download_data_wrds_compustat("wrds_compustat_annual", additional_columns = c("aodo", "aldo"))

</code></pre>

<hr>
<h2 id='download_data_wrds_crsp'>Download Data from WRDS CRSP</h2><span id='topic+download_data_wrds_crsp'></span>

<h3>Description</h3>

<p>This function downloads and processes stock return data from the CRSP
database for a specified period. Users can choose between monthly and daily
data types. The function also adjusts returns for delisting and calculates
market capitalization and excess returns over the risk-free rate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds_crsp(
  type,
  start_date = NULL,
  end_date = NULL,
  batch_size = 500,
  version = "v2",
  additional_columns = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_crsp_+3A_type">type</code></td>
<td>
<p>A string specifying the type of CRSP data to download:
&quot;crsp_monthly&quot; or &quot;crsp_daily&quot;.</p>
</td></tr>
<tr><td><code id="download_data_wrds_crsp_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_crsp_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_crsp_+3A_batch_size">batch_size</code></td>
<td>
<p>An optional integer specifying the batch size for
processing daily data, with a default of 500.</p>
</td></tr>
<tr><td><code id="download_data_wrds_crsp_+3A_version">version</code></td>
<td>
<p>An optional character specifying which CRSP version to use.
&quot;v2&quot; (the default) uses the updated second version of CRSP, and &quot;v1&quot;
downloads the legacy version of CRSP.</p>
</td></tr>
<tr><td><code id="download_data_wrds_crsp_+3A_additional_columns">additional_columns</code></td>
<td>
<p>Additional columns from the CRSP monthly or
daily data as a character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing CRSP stock returns, adjusted for delistings,
along with calculated market capitalization and excess returns over the
risk-free rate. The structure of the returned data frame depends on the
selected data type.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  crsp_monthly &lt;- download_data_wrds_crsp("wrds_crsp_monthly", "2020-11-01", "2020-12-31")
  crsp_daily &lt;- download_data_wrds_crsp("wrds_crsp_daily", "2020-12-01", "2020-12-31")

  # Add additional columns
  download_data_wrds_crsp("wrds_crsp_monthly", "2020-11-01", "2020-12-31",
                          additional_columns = c("mthvol", "mthvolflg"))

</code></pre>

<hr>
<h2 id='download_data_wrds_fisd'>Download Filtered FISD Data from WRDS</h2><span id='topic+download_data_wrds_fisd'></span>

<h3>Description</h3>

<p>Establishes a connection to the WRDS database to download a filtered subset
of the FISD (Fixed Income Securities Database). The function filters the
<code>fisd_mergedissue</code> and <code>fisd_mergedissuer</code> tables based on several criteria
related to the securities, such as security level, bond type, coupon type,
and others, focusing on specific attributes that denote the nature of the
securities. It finally returns a data frame with selected fields from the
<code>fisd_mergedissue</code> table after joining it with issuer information from the
<code>fisd_mergedissuer</code> table for issuers domiciled in the USA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds_fisd(additional_columns = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_fisd_+3A_additional_columns">additional_columns</code></td>
<td>
<p>Additional columns from the FISD table
as a character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing a subset of FISD data with fields related to
the bond's characteristics and issuer information. This includes complete
CUSIP, maturity date, offering amount, offering date, dated date, interest
frequency, coupon, last interest date, issue ID, issuer ID, SIC code of the
issuer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  fisd &lt;- download_data_wrds_fisd()
  fisd_extended &lt;- download_data_wrds_fisd(additional_columns = c("asset_backed", "defeased"))

</code></pre>

<hr>
<h2 id='download_data_wrds_trace_enhanced'>Download Enhanced TRACE Data from WRDS</h2><span id='topic+download_data_wrds_trace_enhanced'></span>

<h3>Description</h3>

<p>Establishes a connection to the WRDS database to download the specified
CUSIPs trade messages from the Trade Reporting and Compliance Engine (TRACE).
The trade data is cleaned as suggested by Dick-Nielsen (2009, 2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_data_wrds_trace_enhanced(cusips, start_date = NULL, end_date = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="download_data_wrds_trace_enhanced_+3A_cusips">cusips</code></td>
<td>
<p>A character vector specifying the 9-digit CUSIPs to download.</p>
</td></tr>
<tr><td><code id="download_data_wrds_trace_enhanced_+3A_start_date">start_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the start date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
<tr><td><code id="download_data_wrds_trace_enhanced_+3A_end_date">end_date</code></td>
<td>
<p>Optional. A character string or Date object in &quot;YYYY-MM-DD&quot; format
specifying the end date for the data. If not provided, a subset of the dataset is returned.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame containing the cleaned trade messages from TRACE for the
selected CUSIPs over the time window specified. Output variables include
identifying information (i.e., CUSIP, trade date/time) and trade-specific
information (i.e., price/yield, volume, counterparty, and reporting side).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  trace_enhanced &lt;- download_data_wrds_trace_enhanced("00101JAH9", "2019-01-01", "2021-12-31")

</code></pre>

<hr>
<h2 id='estimate_betas'>Estimate Rolling Betas</h2><span id='topic+estimate_betas'></span>

<h3>Description</h3>

<p>This function estimates rolling betas for a given model using the provided data.
It supports parallel processing for faster computation using the <code>furrr</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_betas(
  data,
  model,
  lookback,
  min_obs = NULL,
  use_furrr = FALSE,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_betas_+3A_data">data</code></td>
<td>
<p>A tibble containing the data with a date identifier (defaults to <code>date</code>), a stock
identifier (defaults to <code>permno</code>), and other variables used in the model.</p>
</td></tr>
<tr><td><code id="estimate_betas_+3A_model">model</code></td>
<td>
<p>A formula representing the model to be estimated (e.g.,
<code>ret_excess ~ mkt_excess + smb + hml</code>).</p>
</td></tr>
<tr><td><code id="estimate_betas_+3A_lookback">lookback</code></td>
<td>
<p>A Period object specifying the number of months, days, hours, minutes, or
seconds to look back when estimating the rolling model.</p>
</td></tr>
<tr><td><code id="estimate_betas_+3A_min_obs">min_obs</code></td>
<td>
<p>An integer specifying the minimum number of observations required to estimate
the model. Defaults to 80% of <code>lookback</code>.</p>
</td></tr>
<tr><td><code id="estimate_betas_+3A_use_furrr">use_furrr</code></td>
<td>
<p>A logical indicating whether to use the <code>furrr</code> package and its paralellization
capabilities. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="estimate_betas_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters, indicating the column
names required to run this function. The required column names identify dates and the stocks.
Defaults to <code>date = date</code> and <code>id = permno</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with the estimated betas for each time period.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Estimate monthly betas using monthly return data
set.seed(1234)
data_monthly &lt;- tibble::tibble(
  date = rep(seq.Date(from = as.Date("2020-01-01"),
                      to = as.Date("2020-12-01"), by = "month"), each = 50),
  permno = rep(1:50, times = 12),
  ret_excess = rnorm(600, 0, 0.1),
  mkt_excess = rnorm(600, 0, 0.1),
  smb = rnorm(600, 0, 0.1),
  hml = rnorm(600, 0, 0.1),
)

estimate_betas(data_monthly,  "ret_excess ~ mkt_excess", months(3))
estimate_betas(data_monthly,  "ret_excess ~ mkt_excess + smb + hml", months(6))

data_monthly |&gt;
  dplyr::rename(id = permno) |&gt;
  estimate_betas("ret_excess ~ mkt_excess", months(3),
                 data_options = data_options(id = "id"))

# Estimate monthly betas using daily return data and parallelization
data_daily &lt;- tibble::tibble(
  date = rep(seq.Date(from = as.Date("2020-01-01"),
                      to = as.Date("2020-12-31"), by = "day"), each = 50),
  permno = rep(1:50, times = 366),
  ret_excess = rnorm(18300, 0, 0.02),
  mkt_excess = rnorm(18300, 0, 0.02),
  smb = rnorm(18300, 0, 0.02),
  hml = rnorm(18300, 0, 0.02),
)

data_daily &lt;- data_daily |&gt;
  dplyr::mutate(date = lubridate::floor_date(date, "month"))

# Change settings via future::plan(strategy = "multisession", workers = 4)
estimate_betas(data_daily, "ret_excess ~ mkt_excess", lubridate::days(90), use_furrr = TRUE)

</code></pre>

<hr>
<h2 id='estimate_fama_macbeth'>Estimate Fama-MacBeth Regressions</h2><span id='topic+estimate_fama_macbeth'></span>

<h3>Description</h3>

<p>This function estimates Fama-MacBeth regressions by first running cross-sectional regressions
for each time period and then aggregating the results over time to obtain average risk premia
and corresponding t-statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_fama_macbeth(
  data,
  model,
  vcov = "newey-west",
  vcov_options = NULL,
  data_options = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_fama_macbeth_+3A_data">data</code></td>
<td>
<p>A data frame containing the data for the regression. It must include a column
representing the time periods (defaults to <code>date</code>) and the variables specified in the <code>model</code>.</p>
</td></tr>
<tr><td><code id="estimate_fama_macbeth_+3A_model">model</code></td>
<td>
<p>A formula representing the regression model to be estimated in each cross-section.</p>
</td></tr>
<tr><td><code id="estimate_fama_macbeth_+3A_vcov">vcov</code></td>
<td>
<p>A character string indicating the type of standard errors to compute. Options are
<code>"iid"</code> for independent and identically distributed errors or <code>"newey-west"</code> for Newey-West
standard errors. Default is <code>"newey-west"</code>.</p>
</td></tr>
<tr><td><code id="estimate_fama_macbeth_+3A_vcov_options">vcov_options</code></td>
<td>
<p>A list of additional arguments to be passed to the
<code>NeweyWest()</code> function when <code>vcov = "newey-west"</code>. These can include options
such as <code>lag</code>, which specifies the number of lags to use in the Newey-West
covariance matrix estimation, and <code>prewhite</code>, which indicates whether to
apply a prewhitening transformation. Default is an empty list.</p>
</td></tr>
<tr><td><code id="estimate_fama_macbeth_+3A_data_options">data_options</code></td>
<td>
<p>A named list of <a href="#topic+data_options">data_options</a> with characters, indicating the column
names required to run this function. The required column names identify dates. Defaults to
<code>date = date</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the estimated risk premiums, the number of observations, standard
errors, and t-statistics for each factor in the model.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1234)

data &lt;- tibble::tibble(
  date = rep(seq.Date(from = as.Date("2020-01-01"),
                      to = as.Date("2020-12-01"), by = "month"), each = 50),
  permno = rep(1:50, times = 12),
  ret_excess = rnorm(600, 0, 0.1),
  beta = rnorm(600, 1, 0.2),
  bm = rnorm(600, 0.5, 0.1),
  log_mktcap = rnorm(600, 10, 1)
)

estimate_fama_macbeth(data, "ret_excess ~ beta + bm + log_mktcap")
estimate_fama_macbeth(data, "ret_excess ~ beta + bm + log_mktcap", vcov = "iid")
estimate_fama_macbeth(data, "ret_excess ~ beta + bm + log_mktcap",
                      vcov = "newey-west", vcov_options = list(lag = 6, prewhite = FALSE))

# Use different column name for date
data |&gt;
  dplyr::rename(month = date) |&gt;
  estimate_fama_macbeth(
    "ret_excess ~ beta + bm + log_mktcap",
    data_options = data_options(date = "month")
 )

</code></pre>

<hr>
<h2 id='estimate_model'>Estimate Model Coefficients</h2><span id='topic+estimate_model'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function estimates the coefficients of a linear model specified by one
or more independent variables. It checks for the presence of the specified
independent variables in the dataset and whether the dataset has a sufficient
number of observations. It returns the model's coefficients as either a
numeric value (for a single independent variable) or a data frame (for
multiple independent variables).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate_model(data, model, min_obs = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimate_model_+3A_data">data</code></td>
<td>
<p>A data frame containing the dependent variable and one or more
independent variables.</p>
</td></tr>
<tr><td><code id="estimate_model_+3A_model">model</code></td>
<td>
<p>A character that describes the model to estimate (e.g.
<code>"ret_excess ~ mkt_excess + hmb + sml"</code>).</p>
</td></tr>
<tr><td><code id="estimate_model_+3A_min_obs">min_obs</code></td>
<td>
<p>The minimum number of observations required to estimate the
model. Defaults to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with a row for each coefficient and
column names corresponding to the independent variables.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+lm">stats::lm()</a></code> for details on the underlying linear model fitting used.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- data.frame(
  ret_excess = rnorm(100),
  mkt_excess = rnorm(100),
  smb = rnorm(100),
  hml = rnorm(100)
)

# Estimate model with a single independent variable
estimate_model(data, "ret_excess ~ mkt_excess")

# Estimate model with multiple independent variables
estimate_model(data, "ret_excess ~ mkt_excess + smb + hml")

# Estimate model without intercept
estimate_model(data, "ret_excess ~ mkt_excess - 1")

</code></pre>

<hr>
<h2 id='get_random_user_agent'>Get a Random User Agent</h2><span id='topic+get_random_user_agent'></span>

<h3>Description</h3>

<p>This internal function selects and returns a random user agent string from a predefined list.
The list contains user agents for various operating systems and browsers, including
Windows, macOS, Linux, Android, iPhone, Chrome, Safari, Firefox, and Edge.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_random_user_agent()
</code></pre>


<h3>Value</h3>

<p>A character string representing a randomly selected user agent.
</p>

<hr>
<h2 id='get_wrds_connection'>Establish a Connection to the WRDS Database</h2><span id='topic+get_wrds_connection'></span>

<h3>Description</h3>

<p>This function establishes a connection to the Wharton Research Data Services
(WRDS) database using the <code>RPostgres</code> package. It requires that the
<code>RPostgres</code> package is installed and that valid WRDS credentials are set as
environment variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_wrds_connection()
</code></pre>


<h3>Details</h3>

<p>The function checks if the <code>RPostgres</code> package is installed before
attempting to establish a connection. It uses the host, dbname, port, and
sslmode as fixed parameters for the connection. Users must set their WRDS
username and password as environment variables <code>WRDS_USER</code> and
<code>WRDS_PASSWORD</code>, respectively, before using this function.
</p>


<h3>Value</h3>

<p>An object of class <code>DBIConnection</code> representing the connection to the
WRDS database. This object can be used with other DBI-compliant functions
to interact with the database.
</p>


<h3>See Also</h3>

<p><code><a href="RPostgres.html#topic+Postgres">Postgres</a></code>, <code><a href="DBI.html#topic+dbDisconnect">dbDisconnect</a></code> for more
information on managing database connections.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  # Before using this function, set your WRDS credentials:
  # Sys.setenv(WRDS_USER = "your_username", WRDS_PASSWORD = "your_password")

  con &lt;- get_wrds_connection()
  # Use `con` with DBI-compliant functions to interact with the WRDS database
  # Remember to disconnect after use:
  # disconnect_connection(con)

</code></pre>

<hr>
<h2 id='lag_column'>Lag a Column Based on Date and Time Range</h2><span id='topic+lag_column'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>This function generates a lagged version of a given column based on a date variable, with the
ability to specify a range of lags. It also allows for the optional removal of <code>NA</code> values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lag_column(column, date, lag, max_lag = lag, drop_na = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="lag_column_+3A_column">column</code></td>
<td>
<p>A numeric vector or column to be lagged.</p>
</td></tr>
<tr><td><code id="lag_column_+3A_date">date</code></td>
<td>
<p>A vector representing dates corresponding to the <code>column</code>. This should be in a
date or datetime format.</p>
</td></tr>
<tr><td><code id="lag_column_+3A_lag">lag</code></td>
<td>
<p>An integer specifying the minimum lag (in days, hours, etc.) to apply to <code>column</code>.</p>
</td></tr>
<tr><td><code id="lag_column_+3A_max_lag">max_lag</code></td>
<td>
<p>An integer specifying the maximum lag (in days, hours, etc.) to apply to <code>column</code>.
Defaults to <code>lag</code>.</p>
</td></tr>
<tr><td><code id="lag_column_+3A_drop_na">drop_na</code></td>
<td>
<p>A logical value indicating whether to drop <code>NA</code> values from the resulting lagged
column. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the same length as <code>column</code>, containing the lagged values.
If no matching dates are found within the lag window, <code>NA</code> is returned for that position.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Basic example with a vector
dates &lt;- as.Date("2023-01-01") + 0:9
values &lt;- rnorm(10)
lagged_values &lt;- lag_column(values, dates, lag = 1, max_lag = 3)

# Example using a tibble and dplyr::group_by
data &lt;- tibble::tibble(
  permno = rep(1:2, each = 10),
  date = rep(seq.Date(as.Date('2023-01-01'), by = "month", length.out = 10), 2),
  size = runif(20, 100, 200),
  bm = runif(20, 0.5, 1.5)
)

data |&gt;
  dplyr::group_by(permno) |&gt;
  dplyr::mutate(
    across(c(size, bm),
           \(x) lag_column(x, date, months(3), months(6), drop_na = TRUE))
  ) |&gt;
dplyr::ungroup()

</code></pre>

<hr>
<h2 id='list_supported_indexes'>List Supported Indexes</h2><span id='topic+list_supported_indexes'></span>

<h3>Description</h3>

<p>This function returns a tibble containing information about supported financial indexes.
Each index is associated with a URL that points to a CSV file containing the holdings of the index.
Additionally, each index has a corresponding <code>skip</code> value, which indicates the number of lines
to skip when reading the CSV file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_indexes()
</code></pre>


<h3>Value</h3>

<p>A tibble with three columns:
</p>

<dl>
<dt>index</dt><dd><p>The name of the financial index (e.g., &quot;DAX&quot;, &quot;S&amp;P 500&quot;).</p>
</dd>
<dt>url</dt><dd><p>The URL to the CSV file containing the holdings data for the index.</p>
</dd>
<dt>skip</dt><dd><p>The number of lines to skip when reading the CSV file.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>supported_indexes &lt;- list_supported_indexes()
print(supported_indexes)

</code></pre>

<hr>
<h2 id='list_supported_types'>List All Supported Dataset Types</h2><span id='topic+list_supported_types'></span>

<h3>Description</h3>

<p>This function aggregates and returns a comprehensive tibble of all supported
dataset types from different domains. It includes various datasets across
different frequencies (daily, weekly, monthly, quarterly, annual) and models
(e.g., q5 factors, Fama-French 3 and 5 factors, macro predictors).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types(domain = NULL, as_vector = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="list_supported_types_+3A_domain">domain</code></td>
<td>
<p>A character vector to filter for domain specific types
(e.g. c(&quot;WRDS&quot;, &quot;Fama-French&quot;))</p>
</td></tr>
<tr><td><code id="list_supported_types_+3A_as_vector">as_vector</code></td>
<td>
<p>Logical indicating whether types should be returned as a
character vector instead of data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble aggregating all supported dataset types with columns: <code>type</code>
(the type of dataset), <code>dataset_name</code> (a descriptive name or file name of
the dataset), and <code>domain</code> (the domain to which the dataset belongs, e.g.,
&quot;Global Q&quot;, &quot;Fama-French&quot;, &quot;Goyal-Welch&quot;).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># List all supported types as a data frame
list_supported_types()

# Filter by domain
list_supported_types(domain = "WRDS")

# List supported types as a vector
list_supported_types(as_vector = TRUE)
</code></pre>

<hr>
<h2 id='list_supported_types_ff'>List Supported Fama-French Dataset Types</h2><span id='topic+list_supported_types_ff'></span>

<h3>Description</h3>

<p>This function returns a tibble with the supported Fama-French dataset types,
including their names and frequencies (daily, weekly, monthly). Each dataset
type is associated with a specific Fama-French model (e.g., 3 factors, 5
factors). Additionally, it annotates each dataset with the domain
&quot;Fama-French&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_ff()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns: <code>type</code> (the type of dataset), <code>dataset_name</code>
(a descriptive name of the dataset), and <code>domain</code> (the domain to which the
dataset belongs, always &quot;Fama-French&quot;).
</p>

<hr>
<h2 id='list_supported_types_ff_legacy'>List Supported Legacy Fama-French Dataset Types</h2><span id='topic+list_supported_types_ff_legacy'></span>

<h3>Description</h3>

<p>This function returns a tibble with the legacy names of initially supported
Fama-French dataset types, including their names and frequencies (daily, weekly, monthly).
Each dataset type is associated with a specific Fama-French model (e.g., 3 factors, 5
factors). Additionally, it annotates each dataset with the domain &quot;Fama-French&quot;.
Not included in the exported <code>list_supported_types()</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_ff_legacy()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns: <code>type</code> (the type of dataset), <code>dataset_name</code>
(a descriptive name of the dataset), and <code>domain</code> (the domain to which the
dataset belongs, always &quot;Fama-French&quot;).
</p>

<hr>
<h2 id='list_supported_types_macro_predictors'>List Supported Macro Predictor Dataset Types</h2><span id='topic+list_supported_types_macro_predictors'></span>

<h3>Description</h3>

<p>This function returns a tibble with the supported macro predictor dataset
types provided by Goyal-Welch, including their frequencies (monthly,
quarterly, annual). All dataset types reference the same source file
&quot;PredictorData2022.xlsx&quot; for the year 2022. Additionally, it annotates each
dataset with the domain &quot;Goyal-Welch&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_macro_predictors()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns: <code>type</code> (the type of dataset), <code>dataset_name</code>
(the file name of the dataset, which is the same for all types), and
<code>domain</code> (the domain to which the dataset belongs, always &quot;Goyal-Welch&quot;).
</p>

<hr>
<h2 id='list_supported_types_other'>List Supported Other Data Types</h2><span id='topic+list_supported_types_other'></span>

<h3>Description</h3>

<p>Returns a tibble listing the supported other data types and their corresponding dataset names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_other()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns <code>type</code> and <code>dataset_name</code>, where <code>type</code> indicates the code used to specify the data source and <code>dataset_name</code> provides the name of the data source.
</p>

<hr>
<h2 id='list_supported_types_q'>List Supported Global Q Dataset Types</h2><span id='topic+list_supported_types_q'></span>

<h3>Description</h3>

<p>This function returns a tibble with the supported Global Q dataset types,
including their names and frequencies (daily, weekly, weekly week-to-week,
monthly, quarterly, annual). Each dataset type is associated with the Global
Q model, specifically the q5 factors model for the year 2023. Additionally,
it annotates each dataset with the domain &quot;Global Q&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_q()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns: <code>type</code> (the type of dataset), <code>dataset_name</code>
(the file name of the dataset), and <code>domain</code> (the domain to which the
dataset belongs, always &quot;Global Q&quot;).
</p>

<hr>
<h2 id='list_supported_types_wrds'>List Supported WRDS Dataset Types</h2><span id='topic+list_supported_types_wrds'></span>

<h3>Description</h3>

<p>This function returns a tibble with the supported dataset types provided via
WRDS. Additionally, it annotates each dataset with the domain &quot;WRDS&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_supported_types_wrds()
</code></pre>


<h3>Value</h3>

<p>A tibble with columns: <code>type</code> (the type of dataset), <code>dataset_name</code>
(the file name of the dataset), and <code>domain</code> (the domain to which the
dataset belongs, always &quot;WRDS&quot;).
</p>

<hr>
<h2 id='list_tidy_finance_chapters'>List Chapters of Tidy Finance</h2><span id='topic+list_tidy_finance_chapters'></span>

<h3>Description</h3>

<p>Returns a character vector containing the names of the chapters available in
the Tidy Finance resource. This function provides a quick reference to the
various topics covered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_tidy_finance_chapters()
</code></pre>


<h3>Value</h3>

<p>A character vector where each element is the name of a chapter
available in the Tidy Finance resource. These names correspond to specific
chapters in Tidy Finance with R.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>list_tidy_finance_chapters()

</code></pre>

<hr>
<h2 id='open_tidy_finance_website'>Open Tidy Finance Website or Specific Chapter in Browser</h2><span id='topic+open_tidy_finance_website'></span>

<h3>Description</h3>

<p>Opens the main Tidy Finance website or a specific chapter within the site in
the user's default web browser. If a chapter is specified, the function
constructs the URL to access the chapter directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>open_tidy_finance_website(chapter = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="open_tidy_finance_website_+3A_chapter">chapter</code></td>
<td>
<p>An optional character string specifying the chapter to open.
If <code>NULL</code> (the default), the function opens the main page of Tidy Finance with R.
If a chapter name is provided (e.g., &quot;beta-estimation&quot;), the
function opens the corresponding chapter's page (e.g.,
&quot;beta-estimation.html&quot;). If the chapter name does not exist, then the
function opens the main page.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisible <code>NULL</code>. The function is called for its side effect of opening
a web page.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>open_tidy_finance_website()
open_tidy_finance_website("beta-estimation")

</code></pre>

<hr>
<h2 id='set_wrds_credentials'>Set WRDS Credentials</h2><span id='topic+set_wrds_credentials'></span>

<h3>Description</h3>

<p>This function prompts the user to input their WRDS (Wharton Research Data Services)
username and password, and stores these credentials in a .Renviron file. The user can
choose to store the .Renviron file in either the project directory or the home directory.
If the .Renviron file already contains WRDS credentials, the user will be asked if they
want to overwrite the existing credentials. Additionally, the user has the option
to add the .Renviron file to the .gitignore file to prevent it from being tracked
by version control.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_wrds_credentials()
</code></pre>


<h3>Value</h3>

<p>Invisibly returns TRUE. Displays messages to the user based on their input and actions taken.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_wrds_credentials()

## End(Not run)
</code></pre>

<hr>
<h2 id='trim'>Trim a Numeric Vector</h2><span id='topic+trim'></span>

<h3>Description</h3>

<p>Removes the values in a numeric vector that are beyond the specified
quantiles, effectively trimming the distribution based on the <code>cut</code>
parameter. This process reduces the length of the vector, excluding extreme
values from both tails of the distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trim(x, cut)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="trim_+3A_x">x</code></td>
<td>
<p>A numeric vector to be trimmed.</p>
</td></tr>
<tr><td><code id="trim_+3A_cut">cut</code></td>
<td>
<p>The proportion of data to be trimmed from both ends of the
distribution. For example, a <code>cut</code> of 0.05 will remove the lowest and
highest 5% of the data. Must be between [0, 0.5].</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with the extreme values removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
data &lt;- rnorm(100)
trimmed_data &lt;- trim(x = data, cut = 0.05)

</code></pre>

<hr>
<h2 id='winsorize'>Winsorize a Numeric Vector</h2><span id='topic+winsorize'></span>

<h3>Description</h3>

<p>Replaces the values in a numeric vector that are beyond the specified
quantiles with the boundary values of those quantiles. This is done for both
tails of the distribution based on the <code>cut</code> parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>winsorize(x, cut)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="winsorize_+3A_x">x</code></td>
<td>
<p>A numeric vector to be winsorized.</p>
</td></tr>
<tr><td><code id="winsorize_+3A_cut">cut</code></td>
<td>
<p>The proportion of data to be winsorized from both ends of the
distribution. For example, a <code>cut</code> of 0.05 will winsorize the lowest and
highest 5% of the data. Must be inside [0, 0.5].</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector with the extreme values replaced by the
corresponding quantile values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(123)
data &lt;- rnorm(100)
winsorized_data &lt;- winsorize(data, 0.05)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
