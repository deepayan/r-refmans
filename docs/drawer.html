<!DOCTYPE html><html><head><title>Help for package drawer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {drawer}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#canvas'><p>drawer main canvas workbench compinent</p></a></li>
<li><a href='#toCanvasBtn'><p>Screenshot HTML elements to canvas button</p></a></li>
<li><a href='#toCanvasTextBtn'><p>Screenshot HTML elements to canvas text-button</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>An Interactive HTML Image Editing Tool</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-08-19</td>
</tr>
<tr>
<td>Description:</td>
<td>An interactive image editing tool that can be added as part of the HTML in Shiny,
    R markdown or any type of HTML document. Often times, plots, photos are embedded
    in the web application/file. 'drawer' can take screenshots of these image-like elements, or 
    any part of the HTML document and send to an image editing space called 'canvas' to allow users 
    immediately edit the screenshot(s) within the same document. Users can quickly 
    combine, compare different screenshots, upload their own images 
    and maybe make a scientific figure. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmltools, magrittr, glue, bsplus, utils, shiny, stringr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, ggplot2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/lz100/drawer/issues">https://github.com/lz100/drawer/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/lz100/drawer">https://github.com/lz100/drawer</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-08-19 18:05:02 UTC; lab</td>
</tr>
<tr>
<td>Author:</td>
<td>Le Zhang [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Le Zhang &lt;lezhang100@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-08-19 18:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='canvas'>drawer main canvas workbench compinent</h2><span id='topic+canvas'></span>

<h3>Description</h3>

<p>use this function on Shiny UI or R markdown to create the
image editing area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>canvas(
  canvasID,
  title = "drawer",
  height = "100vh",
  width = "100%",
  logo_src = "drawer/img/drawer.png",
  log_link = "https://github.com/lz100/drawer",
  on_start = TRUE,
  rmarkdown = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="canvas_+3A_canvasid">canvasID</code></td>
<td>
<p>string, an unique HTML ID</p>
</td></tr>
<tr><td><code id="canvas_+3A_title">title</code></td>
<td>
<p>string, title of the canvas</p>
</td></tr>
<tr><td><code id="canvas_+3A_height">height</code></td>
<td>
<p>string, css value of initial height of the canvas, like &quot;100vh&quot;
for full height current window, &quot;50vh&quot; for half.</p>
</td></tr>
<tr><td><code id="canvas_+3A_width">width</code></td>
<td>
<p>string, css value of initial width of the canvas</p>
</td></tr>
<tr><td><code id="canvas_+3A_logo_src">logo_src</code></td>
<td>
<p>string, link of an image you want to display as logo on the
top left</p>
</td></tr>
<tr><td><code id="canvas_+3A_log_link">log_link</code></td>
<td>
<p>string, a link, when the logo is clicked, where should it jump to</p>
</td></tr>
<tr><td><code id="canvas_+3A_on_start">on_start</code></td>
<td>
<p><code>TRUE</code> or a CSS selector. See details</p>
</td></tr>
<tr><td><code id="canvas_+3A_rmarkdown">rmarkdown</code></td>
<td>
<p>bool, are you using inside R markdown? If yes, drawer will copy
all image icons that required by the canvas to current directory to <code>./drawer/img/...</code></p>
</td></tr>
</table>


<h3>Details</h3>



<h4>outside Shiny or Rmarkdown</h4>

<p><strong>If you are not working in Shiny or R markdown, you need to add the</strong>
<strong>required full &quot;Bootstrap3&quot; javascript and CSS + latest &quot;jquery&quot; dependencies by yourself.</strong>
</p>



<h4>height and width</h4>

<p>There are two options for canvas height and width:
</p>

<ul>
<li><p> dynamic CSS units like &quot;100vh&quot; (viewpoint height), &quot;100vw&quot; (view point width),
or &quot;100%&quot; for both. This kind of units adapt to all kinds of user screen settings.
</p>
</li>
<li><p> fixed unit, <code>px</code> (pixels). This does not change across users, but fixes
the <code>on_start</code> problem (read below).
</p>
</li></ul>




<h4>height</h4>


<ul>
<li> <p><code>height</code>, css style <code>vh</code> is safer than <code style="white-space: pre;">&#8288;%&#8288;</code> is not safe, unless the parent
has some defined height, &quot;%&quot; will work. Otherwise, if the parent height is &quot;auto&quot;
or not defined, and you choose &quot;100%&quot;, canvas will still have 0 height.
</p>
</li></ul>

<p>Width usually does not have this problem. As long as an element is displayed,
it has some width.
</p>



<h4><code>on_start</code></h4>

<p>This argument specify if you want to initiate the canvas when the document is loaded.
If <code>TRUE</code>, then when the document loading is done, start the canvas. The problem
is if you set the height to be &quot;vh&quot; (view height) units and if the canvas is
hidden, like in a different tab and not displayed on start, the view height is
0, because it is hidden on another tab (display property is <code>none</code>), so it
will cause the canvas cannot be initiated properly.
</p>
<p>The solution is to bind the initiation with a clicking event, like on a tab or a button.
For example, make a button on the second tab and bind <code>on_start</code> to that button:
<code>on_start = "#buttonID"</code>. Then when users click on that button, canvas initiate.
Remember this is a Jquery CSS selector, which means you need to append &quot;#&quot; in
front your button ID.
</p>
<p>If you want to do it automatically, like clicking on a certain tab, some CSS
knowledge may required. For example, in Shiny, you can use <a href="shiny.html#topic+tabsetPanel">shiny::tabsetPanel</a>
to create a tab panel.
</p>
<div class="sourceCode r"><pre>tabsetPanel(id = "tabs",
    tabPanel("Tab A", value = "A", ...),
    tabPanel("Tab B", value = "B", ...),
    ...
)

</pre></div>
<p>Then, bind to it <code>canvas(on_start = '#tabs li a[data-value="B"]', ...)</code>.
This means we are selecting the element with ID &quot;tabs&quot;, which is the main tabsetPanel
ID, then a list item (<code>li</code>) which is the tab titles you see on UI, and finally, the
link jump to tab B, (<code style="white-space: pre;">&#8288;a[data-value="B"]&#8288;</code>). See examples for a real case.
</p>
<p>Another way to fix it is by given the <code>height</code> and <code>width</code> a fixed pixel unit:
</p>
<div class="sourceCode r"><pre>canvas(
    canvasID = "canvas_f",
    height = "900px",
    width = "1500px"
)
</pre></div>



<h4>Upload your own image to canvas</h4>

<p>You can drag your own images to the canvas.
Support major image formats, like &quot;jpg&quot;, &quot;png&quot;, &quot;svg&quot;, &quot;gif&quot;, &quot;webp&quot;, &quot;bmp&quot;.
Moving images like
&quot;gif&quot;, &quot;webp&quot; will be animated on left side preview, but will not move on canvas.
</p>



<h3>Value</h3>

<p>a HTML component to be added to a Shiny app or document
</p>


<h3>Examples</h3>

<pre><code class='language-R'># basic usage
if(interactive()){
  library(shiny)

  ui &lt;- fluidPage(
    h3("Try to drag pictures locally to canvas"),
    canvas("canvas_a")
  )

  server &lt;- function(input, output, session) {

  }

  shinyApp(ui, server)
}

# multiple canvas on a page
if(interactive()){
  library(shiny)

  ui &lt;- fluidPage(
    h3("multiple canvas on a page"),
    p("They are independent"),
    p("Dragging from one canvas to another is not supported currently"),
    column(6, canvas("canvas_left")),
    column(6, canvas("canvas_right"))
  )

  server &lt;- function(input, output, session) {

  }

  shinyApp(ui, server)
}

# with capture buttons buttons
if(interactive()){
  library(shiny)
  library(ggplot2)
  ui &lt;- fluidPage(
    fluidRow(
      id = "new_row",
      column(
        6,
        h3("this is a title"),
        column(6, tags$label("plot 1"), plotOutput("plot_1")),
        column(6, tags$label("plot 2"), plotOutput("plot_2")),
      ),
      column(
        6,
        h2("To canvas buttons"),
        h4("pure button with `toCanvasBtn`"),
        toCanvasBtn(
          dom = "plot_1",
          label = "capture plot 1",
          canvasID = "canvas_b"
        ), br(),
        toCanvasBtn(
          dom = "capture_button",
          label = "capture this button itself",
          canvasID = "canvas_b",
          id = "capture_button"
        ), br(),
        toCanvasBtn(
          dom = "#new_row .col-sm-6:first-of-type",
          label = "complex selector to select left column",
          canvasID = "canvas_b",
          isID = FALSE
        ), br(),
        h4("button text input for any part of document with `toCanvasBtn`"),
        toCanvasTextBtn(
          label = "try #plot_2 to for plot 2 or other selector",
          canvasID = "canvas_b",
          text_value = "#plot_2"
        )
      )
    ),
    canvas("canvas_b")
  )

  server &lt;- function(input, output, session) {
    output$plot_1 &lt;- renderPlot({
      ggplot(mpg, aes(cty, hwy)) +
        geom_count(col="tomato3", show.legend=F)
    })
    output$plot_2 &lt;- renderPlot({
      ggplot(mpg, aes(cty, hwy)) +
        geom_point()
    })
  }

  shinyApp(ui, server)
}

# start canvas as hidden, initiate later in tab panels
if(interactive()){
  library(shiny)

  ui &lt;- fluidPage(
    tabsetPanel(
      id = "tabs",
      tabPanel(
        "Home page",
        value = "tab_1",
        h4("Content on home page ...."),
        p("Canvas is hidden on start, go to other tabs")
      ),
      tabPanel(
        "Canvas C",
        value = "tab_2",
        markdown(
          '
          # canvas hidden on start
          In this example, you will see if the canvas is hidden,
          not on the first tab in a `tabsetPanel`, or other similar
          UI where you do not see canvas on start. Then, the canvas
          cannot be initiate properly using the default height value (100vh).
          Using the dynamic computed CSS height like "100%", or "100vh" with "hidden"
          (display = none) elements give the height of `0` on start.
          So, you **should not see the canvas** on this tab, but a broken
          structure and no canvas grid.

          To fix it, either give it a fixed `height` and `width` pixel unit, like

          - `height = "800px"`, `width = "1500px"`

          or bind the initiation event to a click of a button, the tab title or
          any other element you specify with the `on_start` argument. See the
          example code and watch how we do it in "canvas D-F".
          '
        ),
        canvas(canvasID = "canvas_c")
      ),
      tabPanel(
        "Canvas D",
        value = "tab_3",
        h4("Initiate canvas by a button"),
        actionButton("start_canvas", "Start Canvas C"),
        canvas(
          canvasID = "canvas_d",
          on_start = "#start_canvas"
        )
      ),
      tabPanel(
        "Canvas E",
        value = "tab_4",
        h4("Initiate canvas by clicking tab title"),
        p("Canvas initiate when first time users come to this tab"),
        canvas(
          canvasID = "canvas_e",
          on_start = "#tabs li a[data-value='tab_4']"
        )
      ),
      tabPanel(
        "Canvas F",
        value = "tab_5",
        h4("Initiate canvas with fixed height and width"),
        canvas(
          canvasID = "canvas_f",
          height = "800px",
          width = "1500px"
        )
      )
    )
  )

  server &lt;- function(input, output, session) {

  }

  shinyApp(ui, server)
}
</code></pre>

<hr>
<h2 id='toCanvasBtn'>Screenshot HTML elements to canvas button</h2><span id='topic+toCanvasBtn'></span>

<h3>Description</h3>

<p>A bootstrap button that allows users to take a screenshot of
specified HTML element (usually an image) and send it to the drawer canvas
for editing. In addition, you can download it as &quot;png&quot; or &quot;jpg&quot; by opening
up the dropdown menu.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toCanvasBtn(
  dom,
  canvasID,
  isID = TRUE,
  id = "",
  label = "To Canvas",
  color_class = "primary"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toCanvasBtn_+3A_dom">dom</code></td>
<td>
<p>a HTML DOM selector, mostly common is to select the element by ID:
e.g. a plot with ID &quot;plot1&quot;, to select, use <code>dom = "plot1"</code> to select the plot if
<code>isID = TRUE</code>. If <code>isID = FALSE</code>, use <code>dom = "#plot1"</code>
</p>
<p>Other complex selector is supported. First turn <code>isID = FALSE</code>, then try things
like <code>dom = ".btn i"</code> selects an icon inside an element
with &quot;btn&quot; class. If more than one element is matched, only the first one will
be screenshoted.</p>
</td></tr>
<tr><td><code id="toCanvasBtn_+3A_canvasid">canvasID</code></td>
<td>
<p>string, the ID of canvas. Unlike <code>dom</code>, you should not add
&quot;#&quot; for <code>canvasID</code> even if <code>isID=FALSE</code></p>
</td></tr>
<tr><td><code id="toCanvasBtn_+3A_isid">isID</code></td>
<td>
<p>bool, <code>TRUE</code> if you want to select the <code>dom</code> by HTML ID, <code>FALSE</code>
if the selector is other than ID.</p>
</td></tr>
<tr><td><code id="toCanvasBtn_+3A_id">id</code></td>
<td>
<p>string, ID for this button, optional</p>
</td></tr>
<tr><td><code id="toCanvasBtn_+3A_label">label</code></td>
<td>
<p>label of this button, optional</p>
</td></tr>
<tr><td><code id="toCanvasBtn_+3A_color_class">color_class</code></td>
<td>
<p>bootstrap button color class suffix, usually one of
'default', 'primary', 'info', 'success', 'warning', 'danger'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This component will not work unless a drawer canvas has been loaded
on current document.
</p>


<h3>Value</h3>

<p>a button
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see example of "canvas", `?canvas`
</code></pre>

<hr>
<h2 id='toCanvasTextBtn'>Screenshot HTML elements to canvas text-button</h2><span id='topic+toCanvasTextBtn'></span>

<h3>Description</h3>

<p>Unlike <a href="#topic+toCanvasBtn">toCanvasBtn</a> only screenshot a defined element, this function
can take screenshot of any element you specify in the text box and sent to canvas
by using Jquery  selector format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toCanvasTextBtn(
  canvasID,
  label = "",
  text_value = "",
  placeholder = "type a selector",
  tooltip = "Screenshot any element to drawer canvas",
  placement = "bottom",
  btn_label = "To Canvas",
  color_class = "primary",
  style = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toCanvasTextBtn_+3A_canvasid">canvasID</code></td>
<td>
<p>string, the ID of canvas.</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_label">label</code></td>
<td>
<p>string, label of the whole group, on the top</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_text_value">text_value</code></td>
<td>
<p>string, nitial value of the text input</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_placeholder">placeholder</code></td>
<td>
<p>string, placeholder text of the text input</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_tooltip">tooltip</code></td>
<td>
<p>a tooltip of the group</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_placement">placement</code></td>
<td>
<p>where should the tooltip go?</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_btn_label">btn_label</code></td>
<td>
<p>text on the button</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_color_class">color_class</code></td>
<td>
<p>bootstrap button color class suffix, usually one of
'default', 'primary', 'info', 'success', 'warning', 'danger'</p>
</td></tr>
<tr><td><code id="toCanvasTextBtn_+3A_style">style</code></td>
<td>
<p>additional CSS style of the group, like &quot;width: 50%&quot;</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This component will not work unless a drawer canvas has been loaded
on current document.
</p>


<h4>Input selector</h4>

<p>The selector uses Jquery selector.
</p>

<ul>
<li><p> If you are not familiar with it, just remember
the mostly commonly used is the element ID, which is the <code>inputID</code>, <code>ID</code> arguments
in most Shiny components. Jquery selector is almost the same for ID, but requires
you to add &quot;#&quot; in front, &quot;#element-ID&quot;.
</p>
</li>
<li><p> If you have no idea about shiny or HTML selector, right click on the element,
and click inspect, you should see the document HTML code in the inspector and
the element you want should be highlighted. Find the attribute of &quot;<em>id</em>&quot;, that's
what you need. Again, append &quot;#&quot; in front of that value. Some elements do not
have an &quot;id&quot;, in this case, you need some advanced selectors. Learn about them by
Google &quot;CSS selector&quot;.
</p>
</li></ul>




<h3>Value</h3>

<p>a shiny input group
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see the example of "canvas", `?canvas`
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
