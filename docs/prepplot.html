<!DOCTYPE html><html lang="en"><head><title>Help for package prepplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {prepplot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#prepplot'>
<p>Functions to prepare a figure region for base graphics</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.0-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-04-16</td>
</tr>
<tr>
<td>Title:</td>
<td>Prepare Figure Region for Base Graphics</td>
</tr>
<tr>
<td>Author:</td>
<td>Ulrike Groemping</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ulrike Groemping &lt;groemping@beuth-hochschule.de&gt;</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, grDevices, plotrix, shape</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bookdown, knitr, rmarkdown, ggplot2, gridBase</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Description:</td>
<td>A figure region is prepared, creating a plot region with suitable background color, grid lines or shadings, and providing axes and labeling if not suppressed. Subsequently, information carrying graphics elements can be added (points, lines, barplot with add=TRUE and so forth).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-04-16 16:37:28 UTC; Gr&lt;c3&gt;&lt;b6&gt;mping</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-04-16 23:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='prepplot'>
Functions to prepare a figure region for base graphics
</h2><span id='topic+prepplot'></span><span id='topic+stripes'></span>

<h3>Description</h3>

<p>Function prepplot prepares a figure region according to individual preferences regarding background color, axes, stripes and/or gridlines; optionally, labelling can be done with the function. 
Function stripes draws the vertical or horizontal stripes for prepplot and can also be used independently. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepplot(xlim, ylim,                      
       bg = par("bg"), xaxs=NULL, yaxs=NULL, 
       lwd.axis = 0, col.axis = "grey20",  
       border = ifelse(lwd.axis == 0, bg, col.axis),
       axes = TRUE, xaxt = par("xaxt"), yaxt = par("yaxt"), 
       xticks = NULL, yticks = NULL, 
       xticklabs = xticks, yticklabs = yticks, 
       mgpx = par("mgp"), xaxside = 1, 
       mgpy = mgpx, yaxside = 2,
       xlab = NULL, ylab = NULL, 
       cex = par("cex"), las = 1, lasx = las, lasy = las, 
       gridx = FALSE, gridy = FALSE,
       gridxminor = 0, gridyminor = 0,
       lty.grid = ifelse(max(gridxminor, gridyminor) &gt; 0, 
                         "solid", "dotted"),
       col.grid = "grey50", 
       lwd = par("lwd"), lwd.grid = lwd,
       lty.grid.minor = "dotted", 
       col.grid.minor = col.grid, 
       lwd.grid.minor = 0.5 * lwd.grid,
       stripesx = FALSE, stripesy = FALSE,
       col.stripes = "grey90",
       axis.arrow = FALSE,
       arrow.length = 0.3, arrow.width = 0.2, 
       arrow.code = 2, arrow.type = "triangle", ...)

stripes(stripesx = numeric(0), stripesy = numeric(0), col.stripes = "grey90", 
       usr=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prepplot_+3A_xlim">xlim</code></td>
<td>

<p>required; a numeric vector of length 2 or more, whose range will be used for the horizontal axis limits
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_ylim">ylim</code></td>
<td>

<p>required; a numeric vector of length 2 or more, whose range will be used for the vertical axis limits
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_bg">bg</code></td>
<td>

<p>background color
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xaxs">xaxs</code></td>
<td>

<p><code>"r"</code> for regular style (4% extended versus <code>range(xlim)</code>),<br />
<code>"i"</code> for using unextended <code>range(xlim)</code><br />
<code>NULL</code> for using <code>par("xaxs")</code>, which has default <code>"r"</code>
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_yaxs">yaxs</code></td>
<td>

<p>analogous to <code>xaxs</code>
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lwd.axis">lwd.axis</code></td>
<td>

<p>axis line width; default 0 for no axis line (see below also for <code>lwd</code> and <code>lwd.grid</code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_col.axis">col.axis</code></td>
<td>

<p>axis color; also affects ticks, tickmark labels and axis labels
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_border">border</code></td>
<td>

<p>border color; default depends on whether or not there is an axis line
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_axes">axes</code></td>
<td>

<p>logical that determines whether or not axes are to be drawn (only if <code>xaxt</code> and <code>yaxt</code> do not suppress their respective axes); default: <code>TRUE</code>; if <code>FALSE</code>, both tick mark labels and axis labels are suppressed; even if <code>TRUE</code>, an axis line is only drawn, if <code>lwd.axis</code> is set to a positive value; if the default axis positioning of R itself is desired, choose <code>axes=FALSE</code>, and add an <code>axis</code> statement after the <code>preplot</code> call (see also the Examples section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xaxt">xaxt</code></td>
<td>
<p>default: <code>par("xaxt")</code>; set to <code>"n"</code> for suppressing the x axis in spite of <code>"axes=TRUE"</code> (you can add a horizontal axis with the <code>axis</code> command later on, see examples section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_yaxt">yaxt</code></td>
<td>
<p>default: <code>=par("yaxt")</code>; set to <code>"n"</code> for suppressing the y axis in spite of <code>"axes=TRUE"</code> (you can add a vertical axis with the <code>axis</code> command later on, see examples section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xticks">xticks</code></td>
<td>

<p>tick positions for the horizontal axis; default <code>NULL</code> (see Details section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_yticks">yticks</code></td>
<td>

<p>tick positions for the vertical axis; default <code>NULL</code> (see Details section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xticklabs">xticklabs</code></td>
<td>

<p>tick labels for the horizontal axis; default <code>xticks</code>; if explicitly provided, must have the same length as the <code>xticks</code> values derived from <code>xticks</code>, <code>gridx</code> or <code>stripesx</code> (see Details section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_yticklabs">yticklabs</code></td>
<td>

<p>tick labels for the vertical axis; default <code>yticks</code>; if explicitly provided, must have the same length as the <code>yticks</code> values derived from <code>yticks</code>, <code>gridy</code> or <code>stripesy</code> (see Details section)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_mgpx">mgpx</code></td>
<td>

<p>position of the horizontal axis label, tick marks and line in terms of margin lines (default: par(&quot;mgp&quot;)); see Details section
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xaxside">xaxside</code></td>
<td>

<p>side of the horizontal axis; 1 for bottom (default), 3 for top
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_mgpy">mgpy</code></td>
<td>

<p>analogous to <code>mgpx</code>, for vertical axis; default: equal to <code>mgpx</code>
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_yaxside">yaxside</code></td>
<td>

<p>side of the vertical axis; 2 for left (default), 4 for right
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_xlab">xlab</code></td>
<td>

<p>label for horizontal axis; default: empty
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_ylab">ylab</code></td>
<td>

<p>label for vertical axis; default: empty
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_cex">cex</code></td>
<td>

<p>general annotation size; default <code>par("cex")</code>; if specified, it also adapts defaults for <code>cex.main</code>, <code>cex.sub</code>, <code>cex.axis</code> and  <code>cex.lab</code>, multiplying them with <code>cex/par("cex")</code>; these can be overruled by explicit specification in ....
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_las">las</code></td>
<td>

<p>direction of axis labeling; default: parallel to horizontal axis; you may want to change this to 0 (parallell to axes) in case of longer y-axis labels
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lasx">lasx</code></td>
<td>

<p>direction of tick labels for horizontal axis; default: equal to <code>las</code>; note that <code>xlab</code> remains parallel to the axis, regardless of the choice for <code>las</code> (can only be changed by adding it later with <code><a href="graphics.html#topic+mtext">mtext</a></code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lasy">lasy</code></td>
<td>

<p>direction of tick labels for vertical axis; default: equal to <code>las</code>; note that <code>ylab</code> remains parallel to the axis, regardless of the choice for <code>las</code> (can only be changed by adding it later with <code><a href="graphics.html#topic+mtext">mtext</a></code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_gridx">gridx</code></td>
<td>

<p>logical or numeric; if <code>TRUE</code>, draws grid lines at the tick mark positions; if numeric, number of grid lines between the <code>xlim</code> values or numeric vector of grid line positions for horizontal axis; default: <code>FALSE</code> for no grid lines (positive <code>gridxminor</code> implies switch to <code>gridx=TRUE</code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_gridy">gridy</code></td>
<td>

<p>logical or numeric; if <code>TRUE</code>, draws grid lines at the tick mark positions; if numeric, number of grid lines between the <code>ylim</code> values or numeric vector of grid line positions for vertical axis; default: <code>FALSE</code> for no grid lines (positive <code>gridyminor</code> implies switch to <code>gridy=TRUE</code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_gridxminor">gridxminor</code></td>
<td>

<p>number of minor grid lines between pairs of major grid lines for horizontal axis; default: <code>0</code> for no minor grid lines
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_gridyminor">gridyminor</code></td>
<td>

<p>number of minor grid lines between pairs of major grid lines for vertical axis; default: <code>0</code> for no minor grid lines
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_col.grid">col.grid</code></td>
<td>

<p>color for grid lines
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lty.grid">lty.grid</code></td>
<td>

<p>line type for (major) grid lines; defaults to a dotted line with no minor grid lines and a solid line with minor grid lines (regardless of the direction of the minor grid lines)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lwd">lwd</code></td>
<td>

<p>line width (for grid lines), default is from the current <code><a href="graphics.html#topic+par">par</a></code> setting
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lwd.grid">lwd.grid</code></td>
<td>

<p>line width for grid lines, default is <code>lwd</code>
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_col.grid.minor">col.grid.minor</code></td>
<td>

<p>color for minor grid lines
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lty.grid.minor">lty.grid.minor</code></td>
<td>

<p>line type for minor grid lines; default: dotted line
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_lwd.grid.minor">lwd.grid.minor</code></td>
<td>

<p>line width for minor grid lines (default: <code>0.5*lwd.grid</code>)
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_stripesx">stripesx</code></td>
<td>

<p>logical (default <code>FALSE</code>) or numeric vector of color change positions in striped background (vertical stripes with reference to horizontal axis); see Details section for further information; default: no stripes
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_stripesy">stripesy</code></td>
<td>

<p>logical (default <code>FALSE</code>) or numeric vector of color change positions in striped background (horizontal stripes with reference to vertical axis); increasing size is assumed (or ascertained by sorting); see Details section for further information; default: no stripes
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_col.stripes">col.stripes</code></td>
<td>

<p>color of the stripes
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_axis.arrow">axis.arrow</code></td>
<td>

<p>logical (default <code>FALSE</code>) or numeric vector of two positions at which to draw axis arrows for vertical and horizontal axis (first value: y position for horizontal axis, second value: x position for vertical axis); if set to <code>TRUE</code>, the positions are the values for <code>xaxpos</code> and <code>yaxpos</code>, respectively; for one axis arrow only, use <code>NA</code> for the other element
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_arrow.length">arrow.length</code></td>
<td>
<p>numeric arrow length for function <code><a href="shape.html#topic+Arrows">Arrows</a></code>; default: 0.3</p>
</td></tr>
<tr><td><code id="prepplot_+3A_arrow.width">arrow.width</code></td>
<td>
<p>numeric arrow width for function <code><a href="shape.html#topic+Arrows">Arrows</a></code>; default: 0.2</p>
</td></tr>
<tr><td><code id="prepplot_+3A_arrow.type">arrow.type</code></td>
<td>
<p>character arrow type for function <code><a href="shape.html#topic+Arrows">Arrows</a></code>; default: &quot;triangle&quot;</p>
</td></tr> 
<tr><td><code id="prepplot_+3A_arrow.code">arrow.code</code></td>
<td>
<p>default: 2 (y axis arrow upwards, x axis arrow to the right); for other choices see Details section of <code><a href="shape.html#topic+Arrows">Arrows</a></code></p>
</td></tr> 
<tr><td><code id="prepplot_+3A_usr">usr</code></td>
<td>

<p><code>NULL</code> (default), or a numeric vector with limits of the area within which to draw the stripes; the default amounts to <code>par("usr")</code>
</p>
</td></tr>
<tr><td><code id="prepplot_+3A_...">...</code></td>
<td>

<p>further arguments given to functions <code>plot</code>, <code>mtext</code>, <code>stripes</code>, <code>axis</code> and <code>Arrows</code>; these can e.g. include the option <code>tcl</code> for tick length.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>prepplot</code> supports the preparation of a customized plot region to which the information carrying graphical elements can be added. It can be used with all functions that allow adding to existing base graphics plots (e.g. <code>points</code>, <code>lines</code>, <code>barplot</code>, <code>rect</code>, <code>symbols</code>, ...). Usage with other functions is also possible, but requires careful application after setting <code>par(new=TRUE)</code>.
</p>
<p>If an axis is not suppressed (by <code>axes=FALSE</code> or <code>xaxt="n"</code> or <code>xaxt="n"</code>), axis ticks are placed at the positions specified in <code>xticks</code> or <code>yticks</code>; if these are <code>NULL</code>, numeric specifications for <code>gridx</code> or <code>gridy</code> determine the tick positions, and if these are also non-existent, numeric specifications for <code>stripesx</code> or <code>stripesy</code> determine the tick positions. If all these are unspecified, the tick positions are determined from the default axis behavior using function <code><a href="grDevices.html#topic+axisTicks">axisTicks</a></code> (with option <code>log=FALSE</code>). Per default, axis lines (whether visible or width 0) meet at the position (<code>xlim[1]</code>, <code>ylim[1]</code>) (assuming 2-element limits, which are determined from longer <code>*lim</code> arguments with the <code>range</code> function, where needed); options <code>mgpx</code> or <code>mgpy</code> can be used for moving the axis line, tick labels and/or axis labels inwards or outwards; they default to the settings in <code>par("mgp")</code>, and it may be convenient to change that setting rather than using the option in several <code>prepplot</code> calls (see also Example section). Instead of specifying the labelling with function <code>prepplot</code>, it can also be handled by subsequent <code>title</code> and/or <code>axis</code> statements.
</p>
<p>For grid lines, it is possible to provide minor grid lines (by specifying the number of minor grid lines between major ones); it is also possible to specify major grid lines in complete independence of the tick mark positions, e.g. for displaying information on regulatory limits, target values or specific events (on a time axis).
</p>
<p>For stripes, specifying <code>TRUE</code> uses <code>xticks</code> or <code>yticks</code> values for the creation of stripes. Elements of stripes vectors that are outside their respective axis limits are silently moved to the nearest limit of the plot area (i.e. to the suitable element of <code>usr</code>). Note that the sorting of stripe entries should correspond to the sorting of axis limits (i.e., e.g., if <code>xlim[1]&gt;xlim[2]</code>, sorting is decreasing instead of increasing); elements of <code>stripesx</code> are sorted to conform to this rule, and duplicates are removed. If the remaining vector <code>stripesx</code> has an even number of elements, <code>length(stripesx/2)</code> vertical stripes are drawn between pairs of neighbouring <code>stripesx</code> elements. Otherwise, the handling depends on the first and last (sorted) element of <code>stripesx</code>: if the first (sorted) element equals <code>xlim[1]</code>, a narrow stripe in the beginning is drawn, and the remaining even number of <code>stripesx</code> elements is treated in pairs as before; otherwise, if the last (sorted) element equals <code>xlim[2]</code>, a narrow stripe in the end is drawn; if neither the first nor the last element coincides with an element of <code>xlim</code>, the last element of <code>stripesx</code> is simply omitted. <code>stripesy</code> is treated analogously to <code>stripesy</code>. Like gridlines, stripes can be completely independent of tick marks (see e.g. the last example).
</p>


<h3>Value</h3>

<p>The function does not return anything; it is called for its side effects.
</p>


<h3>Author(s)</h3>

<p>Ulrike Groemping
</p>


<h3>References</h3>

<p>Murrell, P. (2011). R graphics. CRC, Boca Raton. <a href="https://www.stat.auckland.ac.nz/~paul/RG2e/">https://www.stat.auckland.ac.nz/~paul/RG2e/</a>
</p>
<p>Rahlf, T. (2017). Data visualisation with R. Springer International Publishing AG, Cham.
</p>


<h3>See Also</h3>

<p>See also <code><a href="shape.html#topic+Arrows">Arrows</a></code> for arrows.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## default
prepplot(0:10, -5:5)
prepplot(0:10, -5:5, xaxs="i", yaxs="i")
## with stripes and grid based on default tick positions
prepplot(0:10, -5:5, stripesy=TRUE, gridx=TRUE)

## with white background, 
## axis lines and small ticks,
## major and minor grid for y,
## and plot area defined by axis limits 
##    instead of default usr coordinates
## (border is drawn because of lwd.axis)
## mgpx moves tick position labels closer to axes
prepplot(0:10, -5:5, bg="white", xaxs="i", yaxs="i",
    lwd.axis = 1, 
    gridy=c(-5,0,5), gridyminor=4, 
    tcl=-0.2, mgpx=c(3,0.5,0))

## without axis lines but with default background
## looks better with bg.area="lim"
## unless actual data points extend to the limits
prepplot(0:10, -5:5, yticks=seq(-5,5,5), 
         gridy=-5:5, gridx=TRUE,
         xaxs="i", yaxs="i")
         
## with axis arrows
## narrower margins
## small tick marks
## tick annotations close to axis
par(mar=c(3,3,2,1), mgp=c(2,0.35,0))
prepplot(0:10, -5:5, yticks=seq(-5,5,5), 
         gridy=-5:5, gridx=TRUE, lwd.axis=1, tcl=-0.2,
         border="grey92", axis.arrow=TRUE)
dev.off()  ## eliminates modified par settings

## xaxs and yaxs set in par
## labeling subsequently or in prepplot
## mgp or mgpx used for moving labeling closer to axis
par(mfrow=c(1,2), xaxs="i", yaxs="i")
  ## adding labeling subsequently
  par(mgp=c(2.25,0.75,0))
  prepplot(0:10, -5:5, yticks=seq(-5,5,5), 
           gridy=-5:5, gridx=TRUE)
  title(xlab="x axis label", ylab="y axis label", 
  sub="Labeling added subsequently", main="mgp set in par")
  ## adding labeling subsequently
  par(mgp=c(3,1,0)) # back to default
  ## adding labeling within the function
  prepplot(0:10, -5:5, yticks=seq(-5,5,5), 
           gridy=-5:5, gridx=TRUE,
           xlab="x axis label", ylab="y axis label", 
           mgpx=c(2.25,0.75,0), 
           main="mgpx set in prepplot",
           sub="Labeling added within prepplot")
  ## the difference: sub reacts to mgp, not to mgpx
dev.off()   ## eliminates modified par settings

## further examples in the pdf vignette
## access with vignette("prepplotOverview")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
