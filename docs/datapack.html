<!DOCTYPE html><html><head><title>Help for package datapack</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {datapack}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addAccessRule'><p>Add access rules to the specified object.</p></a></li>
<li><a href='#addData'><p>Add a DataObject to the DataPackage</p></a></li>
<li><a href='#addMember'><p>Add a DataObject to the DataPackage</p></a></li>
<li><a href='#calculateChecksum'><p>Calculate a checksum for the DataObject using the specified checksum algorithm</p></a></li>
<li><a href='#canRead'><p>Test whether the provided subject can read an object.</p></a></li>
<li><a href='#clearAccessPolicy'><p>Clear the accessPolicy from the specified object.</p></a></li>
<li><a href='#containsId'><p>Returns true if the specified object is a member of the package</p></a></li>
<li><a href='#createFromTriples'><p>Populate a ResourceMap with RDF relationships from data.frame.</p></a></li>
<li><a href='#DataObject-class'><p>DataObject wraps raw data with system-level metadata</p></a></li>
<li><a href='#datapack'><p>datapack, a container for packages of data and associated metadata</p></a></li>
<li><a href='#datapack-deprecated'><p>Deprecated Methods</p></a></li>
<li><a href='#DataPackage-class'><p>A class representing a data package</p></a></li>
<li><a href='#describeWorkflow'><p>Add data derivation information to a DataPackage</p></a></li>
<li><a href='#dmsg'><p>Print a debugging message to stderr.</p></a></li>
<li><a href='#freeResourceMap'><p>Free memory used by a ResouceMap.</p></a></li>
<li><a href='#getData'><p>Get the data content of a specified data object</p></a></li>
<li><a href='#getFormatId'><p>Get the FormatId of the DataObject</p></a></li>
<li><a href='#getIdentifier'><p>Get the Identifier of the DataObject</p></a></li>
<li><a href='#getIdentifiers'><p>Get the Identifiers of Package Members</p></a></li>
<li><a href='#getMember'><p>Return the Package Member by Identifier</p></a></li>
<li><a href='#getRelationships'><p>Retrieve relationships of package objects</p></a></li>
<li><a href='#getSize'><p>Get the Count of Objects in the Package</p></a></li>
<li><a href='#getTriples'><p>Get the RDF relationships stored in the ResourceMap.</p></a></li>
<li><a href='#getValue'><p>Get values for selected DataPackage members.</p></a></li>
<li><a href='#hasAccessRule'><p>Determine if an access rules exists</p></a></li>
<li><a href='#initialize,DataObject-method'><p>Initialize a DataObject</p></a></li>
<li><a href='#initialize,DataPackage-method'><p>Initialize a DataPackage object.</p></a></li>
<li><a href='#initialize,ResourceMap-method'><p>Initialize a ResourceMap object.</p></a></li>
<li><a href='#initialize,SystemMetadata-method'><p>Initialize a DataONE SystemMetadata object with default values or values passed in to the constructor.</p></a></li>
<li><a href='#insertRelationship'><p>Record relationships of objects in a DataPackage</p></a></li>
<li><a href='#parseRDF'><p>Parse an RDF/XML resource map from a file.</p></a></li>
<li><a href='#parseSystemMetadata'><p>Parse an external XML document and populate a SystemMetadata object with the parsed data</p></a></li>
<li><a href='#plotRelationships'><p>Plot derivation relationships obtained from getRelationships</p></a></li>
<li><a href='#recordDerivation'><p>Record derivation relationships between objects in a DataPackage</p></a></li>
<li><a href='#removeAccessRule'><p>Remove an access rule from the specified object.</p></a></li>
<li><a href='#removeMember'><p>Remove the Specified Member from the Package</p></a></li>
<li><a href='#removeRelationships'><p>Remove relationships of objects in a DataPackage</p></a></li>
<li><a href='#replaceMember'><p>Replace the raw data or file associated with a DataObject</p></a></li>
<li><a href='#ResourceMap-class'><p>ResourceMap provides methods to create, serialize and deserialize an OAI ORE resource map.</p></a></li>
<li><a href='#selectMember'><p>Return identifiers for objects that match search criteria</p></a></li>
<li><a href='#serializePackage'><p>Create an OAI-ORE resource map from the package</p></a></li>
<li><a href='#serializeRDF'><p>Serialize a ResouceMap.</p></a></li>
<li><a href='#serializeSystemMetadata'><p>Serialize a SystemMetadata object to an XML representation</p></a></li>
<li><a href='#serializeToBagIt'><p>Serialize A DataPackage into a BagIt Archive File</p></a></li>
<li><a href='#setPublicAccess'><p>Add a Rule to the AccessPolicy to make the object publicly readable.</p></a></li>
<li><a href='#setValue'><p>Set values for selected DataPackage members.</p></a></li>
<li><a href='#SystemMetadata'><p>Create DataONE SystemMetadata object</p></a></li>
<li><a href='#SystemMetadata-class'><p>A DataONE SystemMetadata object containing basic identification, ownership, access policy, replication policy, and related metadata.</p></a></li>
<li><a href='#updateMetadata'><p>Update selected elements of the XML content of a DataObject in a DataPackage (aka package member).</p></a></li>
<li><a href='#updateRelationships'><p>Update package relationships by replacing an old identifier with a new one.</p></a></li>
<li><a href='#updateXML'><p>Update selected elements of the XML content of a DataObject</p></a></li>
<li><a href='#validate'><p>Validate a SystemMetadata object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>A Flexible Container to Transport and Manipulate Data and
Associated Resources</td>
</tr>
<tr>
<td>Version:</td>
<td>1.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a flexible container to transport and manipulate complex
    sets of data. These data may consist of multiple data files and associated
    meta data and ancillary files. Individual data objects have associated system
    level meta data, and data files are linked together using the OAI-ORE standard
    resource map which describes the relationships between the files. The OAI-
    ORE standard is described at <a href="https://www.openarchives.org/ore/">https://www.openarchives.org/ore/</a>. Data packages
    can be serialized and transported as structured files that have been created
    following the BagIt specification. The BagIt specification is described at
    <a href="https://tools.ietf.org/html/draft-kunze-bagit-08">https://tools.ietf.org/html/draft-kunze-bagit-08</a>.</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-06-07</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>digest, fs, methods, redland, XML, utils, uuid, zip</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0), knitr, httr, igraph, rmarkdown</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (== 2.0)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/datapack/">https://docs.ropensci.org/datapack/</a>,
<a href="https://github.com/ropensci/datapack">https://github.com/ropensci/datapack</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/datapack/issues">https://github.com/ropensci/datapack/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Collate:</td>
<td>'Constants.R' 'SystemMetadata.R' 'dmsg.R' 'DataObject.R'
'DataPackage.R' 'ResourceMap.R' 'datapack-package.r' 'zzz.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-10 18:15:06 UTC; sjclark</td>
</tr>
<tr>
<td>Author:</td>
<td>Matthew B. Jones [aut, cre],
  Peter Slaughter [aut],
  S. Jeanette Clark [ctb],
  Regents of the University of California [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew B. Jones &lt;jones@nceas.ucsb.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-10 19:40:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='addAccessRule'>Add access rules to the specified object.</h2><span id='topic+addAccessRule'></span><span id='topic+addAccessRule+2CSystemMetadata-method'></span><span id='topic+addAccessRule+2CDataObject-method'></span><span id='topic+addAccessRule+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Add one or more access rules to the access policy of the specified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addAccessRule(x, ...)

## S4 method for signature 'SystemMetadata'
addAccessRule(x, y, ...)

## S4 method for signature 'DataObject'
addAccessRule(x, y, ...)

## S4 method for signature 'DataPackage'
addAccessRule(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addAccessRule_+3A_x">x</code></td>
<td>
<p>The object instance to which to add the rules</p>
</td></tr>
<tr><td><code id="addAccessRule_+3A_...">...</code></td>
<td>
<p>Additional arguments
</p>

<ul>
<li><p>permission The permission to be applied to subject if x is character (read, write, changePermission)
</p>
</li></ul>
</td></tr>
<tr><td><code id="addAccessRule_+3A_y">y</code></td>
<td>
<p>The subject of the rule to be added, or a data frame of subject/permission tuples</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code>y</code> argument is specified as a character string containing a <code>subject</code>,
then an optional <code>permission</code> parameter must be specified, that contains a character list
specifying the permissions to add for each <code>subject</code>.
</p>
<p>Note that when <code>addAccessRule</code> is called with a 'DataPackage' argument, the 
additional parameter <code>identifiers</code> can be used:
</p>

<ul>
<li><p>identifiers A list of <code>character</code> values containing package member identifiers that the access rule will be applied to (all members is the default).
</p>
</li></ul>



<h3>Value</h3>

<p>The SystemMetadata object with the updated access policy.
</p>
<p>The DataObject with the updated access policy
</p>
<p>The DataPackage with updated DataObject access policies
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>
<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Add an access rule to a SystemMetadata access policy.
# Parameter "y" can be character string containing the subject of the access rule:
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "write")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
  "uid=slaughter,o=unaffiliated,dc=example,dc=org"), permission=c("write", "changePermission"))
sysmeta &lt;- addAccessRule(sysmeta, accessRules)
# Alternatively, parameter "y" can be a data.frame containing one or more access rules:
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "write")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
  "uid=slaughter,o=unaffiliated,dc=example,dc=org"), permission=c("write", "changePermission"))
sysmeta &lt;- addAccessRule(sysmeta, accessRules)
# Add an access rule to a DataObject
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="1234", dataobj=data, format="text/csv")
obj &lt;- addAccessRule(obj, "uid=smith,ou=Account,dc=example,dc=com", "write")
# Add an access rule to members of a DataPackage
# First create a sample DataPackage
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv")
dp &lt;- addMember(dp, obj)
data2 &lt;- charToRaw("7,8,9\n4,10,11\n")
obj2 &lt;- new("DataObject", id="id2", dataobj=data2, format="text/csv")
dp &lt;- addMember(dp, obj2)
# Add access rule to all package members
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "write", getIdentifiers(dp))
</code></pre>

<hr>
<h2 id='addData'>Add a DataObject to the DataPackage</h2><span id='topic+addData'></span><span id='topic+addData+2CDataPackage+2CDataObject-method'></span>

<h3>Description</h3>

<p>The DataObject is added to the DataPackage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addData(x, do, ...)

## S4 method for signature 'DataPackage,DataObject'
addData(x, do, mo = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addData_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="addData_+3A_do">do</code></td>
<td>
<p>A DataObject instance</p>
</td></tr>
<tr><td><code id="addData_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="addData_+3A_mo">mo</code></td>
<td>
<p>A DataObject (containing metadata describing <code>"do"</code> ) to associate with the science object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The DataObject <code>"do"</code> is added to the DataPackage. If the optional <code>"mo"</code> parameter is specified, then it is 
assumed that the DataObject <code>"mo"</code> is a metadata
object that describes the science object <code>"do"</code> that is being added. The <code>addData</code> function will add a relationship
to the DataPackage resource map that indicates that the metadata object describes the science object using the 
Citation Typing Ontology (CITO).
Note: this method updates the passed-in DataPackage object.
<code>documents</code> and <code>isDocumentedBy</code> relationship.
</p>


<h3>Value</h3>

<p>the updated DataPackage object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dpkg &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
metadata &lt;- charToRaw("EML or other metadata document text goes here\n")
md &lt;- new("DataObject", id="md1", dataobj=metadata, format="text/xml", user="smith", 
  mnNodeId="urn:node:KNB")
do &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv", user="smith", 
  mnNodeId="urn:node:KNB")
# Associate the metadata object with the science object. The 'mo' object will be added 
# to the package  automatically, since it hasn't been added yet.
# This method is now deprecated, so suppress warnings if desired. 
suppressWarnings(dpkg &lt;- addData(dpkg, do, md))
</code></pre>

<hr>
<h2 id='addMember'>Add a DataObject to the DataPackage</h2><span id='topic+addMember'></span><span id='topic+addMember+2CDataPackage-method'></span>

<h3>Description</h3>

<p>The DataObject is added to the DataPackage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addMember(x, ...)

## S4 method for signature 'DataPackage'
addMember(x, do, mo = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addMember_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="addMember_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="addMember_+3A_do">do</code></td>
<td>
<p>The DataObject to add.</p>
</td></tr>
<tr><td><code id="addMember_+3A_mo">mo</code></td>
<td>
<p>A DataObject (containing metadata describing <code>"do"</code> ) to associate with the science object. If this DataObject 
has already been added to the package, the argument can be a <code>"character"</code> containing the DataObject identifier.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The DataObject <code>"do"</code> is added to the DataPackage. If the optional <code>"mo"</code> parameter is specified, then it is 
assumed that the DataObject <code>"mo"</code> is a metadata
object that describes the science object <code>"do"</code> that is being added. The <code>addMember</code> function will add a relationship
to the DataPackage resource map that indicates that the metadata object describes the science object using the 
Citation Typing Ontology (CITO).
Note: this method updates the passed-in DataPackage object.
<code>documents</code> and <code>isDocumentedBy</code> relationship.
</p>


<h3>Value</h3>

<p>the updated DataPackage object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dpkg &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
metadata &lt;- charToRaw("EML or other metadata document text goes here\n")
md &lt;- new("DataObject", id="md1", dataobj=metadata, format="text/xml", user="smith", 
  mnNodeId="urn:node:KNB")
do &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv", user="smith", 
  mnNodeId="urn:node:KNB")
# Associate the metadata object with the science object. The 'mo' object will be added 
# to the package  automatically, since it hasn't been added yet.
dpkg &lt;- addMember(dpkg, do, md)
</code></pre>

<hr>
<h2 id='calculateChecksum'>Calculate a checksum for the DataObject using the specified checksum algorithm</h2><span id='topic+calculateChecksum'></span><span id='topic+calculateChecksum+2CDataObject-method'></span>

<h3>Description</h3>

<p>calculates a checksum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateChecksum(x, ...)

## S4 method for signature 'DataObject'
calculateChecksum(x, checksumAlgorithm = "SHA256", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateChecksum_+3A_x">x</code></td>
<td>
<p>A DataObject instance</p>
</td></tr>
<tr><td><code id="calculateChecksum_+3A_...">...</code></td>
<td>
<p>Additional parameters (not yet used)</p>
</td></tr>
<tr><td><code id="calculateChecksum_+3A_checksumalgorithm">checksumAlgorithm</code></td>
<td>
<p>a <code>character</code> value specifying the checksum algorithm to use (i.e &quot;MD5&quot; or &quot;SHA1&quot; or &quot;SHA256&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The calculated checksum
</p>


<h3>Note</h3>

<p>this method is intended for internal package use only.
</p>

<hr>
<h2 id='canRead'>Test whether the provided subject can read an object.</h2><span id='topic+canRead'></span><span id='topic+canRead+2CDataObject-method'></span>

<h3>Description</h3>

<p>Using the AccessPolicy, tests whether the subject has read permission
for the object.  This method is meant work prior to submission to a repository, 
and will show the permissions that would be enforced by the repository on submission.
Currently it only uses the AccessPolicy to determine who can read (and not the rightsHolder field,
which always can read an object).  If an object has been granted read access by the
special &quot;public&quot; subject, then all subjects have read access.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>canRead(x, ...)

## S4 method for signature 'DataObject'
canRead(x, subject)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="canRead_+3A_x">x</code></td>
<td>
<p>DataObject</p>
</td></tr>
<tr><td><code id="canRead_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="canRead_+3A_subject">subject</code></td>
<td>
<p>: the subject name of the person/system to check for read permissions</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The subject name used in both the AccessPolicy and in the <code>'subject'</code>
argument to this method is a string value, but is generally formatted as an X.509
name formatted according to RFC 2253.
</p>


<h3>Value</h3>

<p>boolean TRUE if the subject has read permission, or FALSE otherwise
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="1234", dataobj=data, format="text/csv")
obj &lt;- addAccessRule(obj, "smith", "read")
access &lt;- canRead(obj, "smith")
</code></pre>

<hr>
<h2 id='clearAccessPolicy'>Clear the accessPolicy from the specified object.</h2><span id='topic+clearAccessPolicy'></span><span id='topic+clearAccessPolicy+2CSystemMetadata-method'></span><span id='topic+clearAccessPolicy+2CDataObject-method'></span><span id='topic+clearAccessPolicy+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Clears the accessPolicy from the specified object by overwriting
all existing access rules set on the object with an empty set.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearAccessPolicy(x, ...)

## S4 method for signature 'SystemMetadata'
clearAccessPolicy(x, ...)

## S4 method for signature 'DataObject'
clearAccessPolicy(x, ...)

## S4 method for signature 'DataPackage'
clearAccessPolicy(x, identifiers = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clearAccessPolicy_+3A_x">x</code></td>
<td>
<p>the instance to clear access rules from.</p>
</td></tr>
<tr><td><code id="clearAccessPolicy_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="clearAccessPolicy_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of <code>character</code> values containing package member identifiers that the access rule will be applied to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The SystemMetadata object with the cleared access policy.
</p>
<p>The DataObject with the cleared access policy.
</p>
<p>The SystemMetadata object with the cleared access policy.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>
<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Clear access policy for a SystemMetadata object.
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "write")
sysmeta &lt;- clearAccessPolicy(sysmeta)
# Clear access policy for a DataObject
do &lt;- new("DataObject", format="text/csv", filename=system.file("extdata/sample-data.csv", 
          package="datapack"))
do &lt;- addAccessRule(do, "uid=smith,ou=Account,dc=example,dc=com", "write")
do &lt;- clearAccessPolicy(do)
# Clear access policy for a DataPackage
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", dataobj=data, format="text/csv")
dp &lt;- addMember(dp, obj)
data2 &lt;- charToRaw("7,8,9\n4,10,11\n")
obj2 &lt;- new("DataObject", dataobj=data2, format="text/csv")
dp &lt;- addMember(dp, obj2)

# Add the access rule to all package members
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", 
    permission="write")
# Now clear the access policy for just the second object 
dp &lt;- clearAccessPolicy(dp, getIdentifier(obj2))

</code></pre>

<hr>
<h2 id='containsId'>Returns true if the specified object is a member of the package</h2><span id='topic+containsId'></span><span id='topic+containsId+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Returns true if the specified object is a member of the package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>containsId(x, ...)

## S4 method for signature 'DataPackage'
containsId(x, identifier)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="containsId_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="containsId_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="containsId_+3A_identifier">identifier</code></td>
<td>
<p>The DataObject identifier to check for inclusion in the DataPackage</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical - a value of TRUE indicates that the DataObject is in the DataPackage
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
id &lt;- "myNewId"
do &lt;- new("DataObject", id=id, dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
isInPackage &lt;- containsId(dp, identifier="myNewId")
</code></pre>

<hr>
<h2 id='createFromTriples'>Populate a ResourceMap with RDF relationships from data.frame.</h2><span id='topic+createFromTriples'></span><span id='topic+createFromTriples+2CResourceMap-method'></span>

<h3>Description</h3>

<p>RDF relationships are added to a ResourceMap object from a data.frame that
contains RDF triples. For example, relationships can be exported from a DataPackage via
<code><a href="#topic+getRelationships">getRelationships</a></code>. The resulting data.frame is then read by <code>createFromTriples</code>
to create the ResourceMap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createFromTriples(x, ...)

## S4 method for signature 'ResourceMap'
createFromTriples(
  x,
  relations,
  identifiers,
  resolveURI = NA_character_,
  externalIdentifiers = list(),
  creator = NA_character_,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createFromTriples_+3A_x">x</code></td>
<td>
<p>a ResourceMap</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_relations">relations</code></td>
<td>
<p>A data.frame to read relationships from</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of the identifiers of data objects contained in the associated data package</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_resolveuri">resolveURI</code></td>
<td>
<p>A character string containing a URI to prepend to datapackage identifiers.</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_externalidentifiers">externalIdentifiers</code></td>
<td>
<p>A list of identifiers that are referenced from the package, but are not package members.</p>
</td></tr>
<tr><td><code id="createFromTriples_+3A_creator">creator</code></td>
<td>
<p>A <code>character</code> string containing the creator of the package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>identifiers</code> parameter contains the identifiers of all data objects in the DataPackage.
For each data objects, additional relationships will be added that are required by the OAI-ORE specification,
for example a Dublin Core identifier statement is added. The resolveURI string value is prepended to 
DataPackage member identifiers in the resulting resource map. If no resolveURI value
is specified, then 'https://cn.dataone.org/cn/v1/resolve' is used.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ResourceMap-class">ResourceMap-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(datapack)
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do1 &lt;- new("DataObject", id="id1", data, format="text/csv")
do2 &lt;- new("DataObject", id="id2", data, format="text/csv")
dp &lt;- addMember(dp, do1)
dp &lt;- addMember(dp, do2)
dp &lt;- insertRelationship(dp, subjectID="id1", objectIDs="id2", 
  predicate="http://www.w3.org/ns/prov#wasDerivedFrom")
relations &lt;- getRelationships(dp)
resMapId &lt;- sprintf("%s%s", "resourceMap_", uuid::UUIDgenerate())  
resMap &lt;- new("ResourceMap", id=resMapId)
resMap &lt;- createFromTriples(resMap, relations, getIdentifiers(dp)) 
</code></pre>

<hr>
<h2 id='DataObject-class'>DataObject wraps raw data with system-level metadata</h2><span id='topic+DataObject-class'></span>

<h3>Description</h3>

<p>DataObject is a wrapper class that associates raw data or a data file with system-level metadata 
describing the data.  The system metadata includes attributes such as the object's identifier, 
type, size, checksum, owner, version relationship to other objects, access rules, and other critical metadata.
The SystemMetadata is compliant with the DataONE federated repository network's definition of SystemMetadata, and
is encapsulated as a separate object of type <code><a href="#topic+SystemMetadata">SystemMetadata</a></code> that can be manipulated as needed. Additional science-level and
domain-specific metadata is out-of-scope for SystemMetadata, which is intended only for critical metadata for
managing objects in a repository system.
</p>


<h3>Details</h3>

<p>A DataObject can be constructed by passing the data and SystemMetadata to the new() method, or by passing
an identifier, data, format, user, and DataONE node identifier, in which case a SystemMetadata instance will
be generated with these fields and others that are calculated (such as size and checksum).
</p>
<p>Data are associated with the DataObject either by passing it as a <code>'raw'</code> value to the <code>'dataobj'</code>
parameter in the constructor, which is then stored in memory, or by passing a fully qualified file path to the 
data in the <code>'filename'</code> parameter, which is then stored on disk.  One of dataobj or filename is required.
Use the <code>'filename'</code> approach when data are too large to be managed effectively in memory.  Callers can
access the <code>'filename'</code> slot to get direct access to the file, or can call <code>'getData()'</code> to retrieve the
contents of the data or file as a raw value (but this will read all of the data into memory).
</p>


<h3>Slots</h3>


<dl>
<dt><code>sysmeta</code></dt><dd><p>A value of type <code>"SystemMetadata"</code>, containing the metadata about the object</p>
</dd>
<dt><code>data</code></dt><dd><p>A value of type <code>"raw"</code>, containing the data represented in this object</p>
</dd>
<dt><code>filename</code></dt><dd><p>A character value that contains the fully-qualified path to the object data on disk</p>
</dd>
<dt><code>dataURL</code></dt><dd><p>A character value for the URL used to load data into this DataObject</p>
</dd>
<dt><code>updated</code></dt><dd><p>A list containing logical values which indicate if system metadata or the data object have been updated since object creation.</p>
</dd>
<dt><code>oldId</code></dt><dd><p>A character string containing the previous identifier used, before a <code>"replaceMember"</code> call.</p>
</dd>
<dt><code>targetPath</code></dt><dd><p>An optional character string holding the path of where the file is placed in a downloaded package.</p>
</dd>
</dl>


<h3>Methods</h3>


<ul>
<li><p><code><a href="#topic+DataObject-initialize">initialize</a></code>: Initialize a DataObject
</p>
</li>
<li><p><code><a href="#topic+addAccessRule">addAccessRule</a></code>: Add a Rule to the AccessPolicy
</p>
</li>
<li><p><code><a href="#topic+canRead">canRead</a></code>: Test whether the provided subject can read an object.
</p>
</li>
<li><p><code><a href="#topic+getData">getData</a></code>: Get the data content of a specified data object
</p>
</li>
<li><p><code><a href="#topic+getFormatId">getFormatId</a></code>: Get the FormatId of the DataObject
</p>
</li>
<li><p><code><a href="#topic+getIdentifier">getIdentifier</a></code>: Get the Identifier of the DataObject
</p>
</li>
<li><p><code><a href="#topic+hasAccessRule">hasAccessRule</a></code>: Determine if an access rules exists for a DataObject.
</p>
</li>
<li><p><code><a href="#topic+setPublicAccess">setPublicAccess</a></code>: Add a Rule to the AccessPolicy to make the object publicly readable.
</p>
</li>
<li><p><code><a href="#topic+updateXML">updateXML</a></code>: Update selected elements of the xml content of a DataObject
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+datapack">datapack</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
targetPath &lt;- "myData/time-trials/trial_data.csv"
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB", targetPath=targetPath)
getIdentifier(do)
getFormatId(do)
getData(do)
canRead(do, "uid=anybody,DC=example,DC=com")
do &lt;- setPublicAccess(do)
canRead(do, "public")
canRead(do, "uid=anybody,DC=example,DC=com")
# Also can create using a file for storage, rather than memory
## Not run: 
tf &lt;- tempfile()
con &lt;- file(tf, "wb")
writeBin(data, con)
close(con)
targetPath &lt;- "myData/time-trials/trial_data.csv"
do &lt;- new("DataObject", "id1", format="text/csv", user="uid=jones,DC=example,DC=com", 
  mnNodeId="urn:node:KNB", filename=tf, targetPath=targetPath)

## End(Not run)
</code></pre>

<hr>
<h2 id='datapack'>datapack, a container for packages of data and associated metadata</h2><span id='topic+datapack'></span>

<h3>Description</h3>

<p>The datapack R package provides an abstraction for collating 
heterogeneous collections of data objects and metadata into a bundle that can 
be transported and loaded into a single composite file.  The methods in
this package provide a convenient way
to load data from common repositories such as DataONE into the R environment, 
and to document, serialize, and save data from R to data repositories worldwide. 
A data package is represented as an instance of the S4 class <code><a href="#topic+DataPackage-class">DataPackage</a></code>, which 
consists of one or more instances of the S4 DataObject class, which in turn contains
an instance of the S4 SystemMetadata class.  The SystemMetadata
class provides critical metadata about a data object that is needed to transport
it to an external repository, including the identifier for the object, its
format, its checksum and size, and information about which repositories the
data is associated with.  DataPackages can be loaded from and saved to the 
DataONE federated network of repositories using the dataone package, but they 
can also be used as standalone transport containers for other systems.
</p>
<p>A DataPackage includes a manifest based on the OAI-ORE 
specification for describing aggregations of files as a ResourceMap. 
Resource maps are RDF documents that conform to the Open Archives Initiative
Object Reuse and Exchange (OAI-ORE) specification. Resource maps are generated 
by data providers to define data packages, and have a namespace of 
http://www.openarchives.org/ore/terms/.
</p>
<p>A DataPackage is serialized as a zip file following the BagIt RFC specification,
which provides a consistent mechanism for a serialized representation of a 
group of opaque objects in a predictable structure. BagIt includes a 
specification for including metadata about each of the objects, the bag itself, 
and fixity attributes so that any BagIt implementation can validate the 
components contained within a package.  When expanded, a BagIt zipfile will
expand to a common directory structure with a predictable set of metadata that
describes the structure and content of the bag.  Conformance with the BagIt
specification is handled by the DataPackage class.
</p>


<h3>Classes</h3>


<ul>
<li><p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>: A class representing a data package, which can contain data objects
</p>
</li>
<li><p><code><a href="#topic+DataObject-class">DataObject-class</a></code>: DataObject wraps raw data with system-level metadata
</p>
</li>
<li><p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a>{SystemMetadata}</code>: A DataONE SystemMetadata object containing basic identification, ownership, access policy, replication policy, and related metadata.
</p>
</li>
<li><p><code><a href="#topic+ResourceMap-class">ResourceMap-class</a>{ResourceMap}</code>: ResourceMap provides methods to create, serialize and deserialize an OAI ORE resource map.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Matthew B. Jones (NCEAS), Peter Slaughter (NCEAS)
</p>

<hr>
<h2 id='datapack-deprecated'>Deprecated Methods</h2><span id='topic+datapack-deprecated'></span>

<h3>Description</h3>

<p>The following items are deprecated in this release of datapack and will be
marked as Defunct and removed in a future version.
</p>


<h3>These methods are deprecated</h3>


<ul>
<li><p><code><a href="#topic+recordDerivation">recordDerivation</a></code>: Record derivation relationships between objects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+addData">addData</a></code>: Add a DataObject to the DataPackage.
</p>
</li></ul>


<hr>
<h2 id='DataPackage-class'>A class representing a data package</h2><span id='topic+DataPackage-class'></span>

<h3>Description</h3>

<p>The DataPackage class provides methods for adding and extracting
data objects from a data package. The contents of a data package
can include arbitrary types of objects, including data files, program code,
visualizations and images, animations, and any other type of file. The DataPackage class
stores the individual members of the data package along with key system-level metadata
about each object, including its size, checksum, identifier, and other key information
needed to effectively archive the members of the package.  In addition, the
DataPackage class can include key provenance metadata about the relationships among
the objects in the data package.  For example, the data package can document that one object
provides documentation for another (<code>cito:documents</code>), and that one object was
derived from another (<code>prov:wasDerivedFrom</code>) by executing a program that 
used source data (<code>prov:used</code>) to create a derived data object 
<code>prov:wasGeneratedBy</code>.  These relationships are integral to the data package,
and can be visualized by programs that understand the ProvONE provenance 
model (see <a href="https://purl.dataone.org/provone-v1-dev">https://purl.dataone.org/provone-v1-dev</a>). 
</p>
<p>The DataPackage class is an R representation of an underlying Open Archives 
Initiative ORE model (Object Reuse and Exchange; 
see <a href="https://www.openarchives.org/ore/">https://www.openarchives.org/ore/</a>), and follows the DataONE Data
Packaging model
(see <a href="https://releases.dataone.org/online/api-documentation-v2.0.1/design/DataPackage.html">https://releases.dataone.org/online/api-documentation-v2.0.1/design/DataPackage.html</a>).
</p>


<h3>Slots</h3>


<dl>
<dt><code>relations</code></dt><dd><p>A list containing provenance relationships of package objects</p>
</dd>
<dt><code>objects</code></dt><dd><p>A list containing identifiers for objects in the DataPackage</p>
</dd>
<dt><code>sysmeta</code></dt><dd><p>A SystemMetadata class instance describing the package</p>
</dd>
<dt><code>externalIds</code></dt><dd><p>A list containing identifiers for objects associated with the DataPackage</p>
</dd>
<dt><code>resmapId</code></dt><dd><p>A character string specifying the identifier for the package resource map. 
This is assigned after a package is uploaded or downloaded from a repository.</p>
</dd>
</dl>


<h3>Methods</h3>


<ul>
<li><p><code><a href="#topic+DataPackage-initialize">initialize</a></code>: Initialize a DataPackage object.
</p>
</li>
<li><p><code><a href="#topic+addAccessRule">addAccessRule</a></code>: Add access rules to DataObjects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+addMember">addMember</a></code>: Add a DataObject to a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+clearAccessPolicy">clearAccessPolicy</a></code>: Clear access policies for DataObjects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+containsId">containsId</a></code>: Returns true if the specified object is a member of the data package.
</p>
</li>
<li><p><code><a href="#topic+describeWorkflow">describeWorkflow</a></code>: Add data derivation information to a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+getData">getData</a></code>: Get the data content of a specified data object.
</p>
</li>
<li><p><code><a href="#topic+getSize">getSize</a></code>: Get the Count of Objects in the DataPackage.
</p>
</li>
<li><p><code><a href="#topic+getIdentifiers">getIdentifiers</a></code>: Get the Identifiers of DataPackage members.
</p>
</li>
<li><p><code><a href="#topic+getMember">getMember</a></code>: Return the DataPackage Member by Identifier.
</p>
</li>
<li><p><code><a href="#topic+getRelationships">getRelationships</a></code>: Retrieve relationships of data package objects.
</p>
</li>
<li><p><code><a href="#topic+getValue">getValue</a></code>: Get values for selected DataPackage members.
</p>
</li>
<li><p><code><a href="#topic+hasAccessRule">hasAccessRule</a></code>: Determine if access rules exists for DataObjects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+insertRelationship">insertRelationship</a></code>: Insert relationships between objects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+removeAccessRule">removeAccessRule</a></code>: Remove an access rule from DataObject in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+removeMember">removeMember</a></code>: Remove the specified DataObject from a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+removeRelationships">removeRelationships</a></code>: Remove relationships of objects in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+replaceMember">replaceMember</a></code>: Replace the raw data or file associated with a DataObject.
</p>
</li>
<li><p><code><a href="#topic+selectMember">selectMember</a></code>: Select package members based on slot values.
</p>
</li>
<li><p><code><a href="#topic+serializePackage">serializePackage</a></code>: Create an OAI-ORE resource map from the DataPackage.
</p>
</li>
<li><p><code><a href="#topic+serializeToBagIt">serializeToBagIt</a></code>: Serialize A DataPackage into a BagIt Archive File.
</p>
</li>
<li><p><code><a href="#topic+setPublicAccess">setPublicAccess</a></code>: Set the access policy to readable by anyone for DataObject in a DataPackage.
</p>
</li>
<li><p><code><a href="#topic+setValue">setValue</a></code>: Set values for selected DataPackage members
</p>
</li>
<li><p><code><a href="methods.html#topic+show">show</a></code>: Print DataPackage information in a formatted view.
</p>
</li>
<li><p><code><a href="#topic+updateMetadata">updateMetadata</a></code>: Update selected elements of the XML content of a DataObject in a DataPackage
</p>
</li>
<li><p><code><a href="#topic+updateRelationships">updateRelationships</a></code>: Update package relationships by replacing an old identifier with a new one.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+datapack">datapack</a></code>
</p>

<hr>
<h2 id='describeWorkflow'>Add data derivation information to a DataPackage</h2><span id='topic+describeWorkflow'></span><span id='topic+describeWorkflow+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Add information about the relationships among DataObject members 
in a DataPackage, retrospectively describing the way in which derived data were 
created from source data using a processing program such as an R script.  These provenance
relationships allow the derived data to be understood sufficiently for users
to be able to reproduce the computations that created the derived data, and to
trace lineage of the derived data objects. The method <code>describeWorkflow</code> 
will add provenance relationships between a script that was executed, the files 
that it used as sources, and the derived files that it generated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>describeWorkflow(x, ...)

## S4 method for signature 'DataPackage'
describeWorkflow(
  x,
  sources = list(),
  program = NA_character_,
  derivations = list(),
  insertDerivations = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="describeWorkflow_+3A_x">x</code></td>
<td>
<p>The <code>DataPackage</code> to add provenance relationships to.</p>
</td></tr>
<tr><td><code id="describeWorkflow_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="describeWorkflow_+3A_sources">sources</code></td>
<td>
<p>A list of DataObjects for files that were read by the program. Alternatively, a list 
of DataObject identifiers can be specified as a list of character strings.</p>
</td></tr>
<tr><td><code id="describeWorkflow_+3A_program">program</code></td>
<td>
<p>The DataObject created for the program such as an R script. Alternatively the DataObject identifier can
be specified.</p>
</td></tr>
<tr><td><code id="describeWorkflow_+3A_derivations">derivations</code></td>
<td>
<p>A list of DataObjects for files that were generated by the program. Alternatively, a list 
of DataObject identifiers can be specified as a list of character strings.</p>
</td></tr>
<tr><td><code id="describeWorkflow_+3A_insertderivations">insertDerivations</code></td>
<td>
<p>A <code>logical</code> value. If TRUE then the provenance relationship 
<code>prov:wasDerivedFrom</code> will be used to connect every source and derivation. The default value 
is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method operates on a DataPackage that has had DataObjects for 
the script, data sources (inputs), and data derivations (outputs) previously 
added to it, or can reference identifiers for objects that exist in other DataPackage
instances. This allows a user to create a standalone package that contains all of
its source, script, and derived data, or a set of data packages that are chained
together via a set of derivation relationships between the members of those packages.
</p>
<p>Provenance relationships are described following the the ProvONE data model, which
can be viewed at <a href="https://purl.dataone.org/provone-v1-dev">https://purl.dataone.org/provone-v1-dev</a>.  In particular, 
the following relationships are inserted (among others):
</p>

<ul>
<li><p><code>prov:used</code> indicates which source data was used by a program execution
</p>
</li>
<li><p><code>prov:generatedBy</code> indicates which derived data was created by a program execution
</p>
</li>
<li><p><code>prov:wasDerivedFrom</code> indicates the source data from which derived data were created using the program
</p>
</li></ul>



<h3>See Also</h3>

<p>The R 'recordr' package for run-time recording of provenance relationships.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(datapack)
dp &lt;- new("DataPackage")
# Add the script to the DataPackage
progFile &lt;- system.file("./extdata/pkg-example/logit-regression-example.R", package="datapack")
progObj &lt;- new("DataObject", format="application/R", filename=progFile)
dp &lt;- addMember(dp, progObj)

# Add a script input to the DataPackage
inFile &lt;- system.file("./extdata/pkg-example/binary.csv", package="datapack") 
inObj &lt;- new("DataObject", format="text/csv", filename=inFile)
dp &lt;- addMember(dp, inObj)

# Add a script output to the DataPackage
outFile &lt;- system.file("./extdata/pkg-example/gre-predicted.png", package="datapack")
outObj &lt;- new("DataObject", format="image/png", file=outFile)
dp &lt;- addMember(dp, outObj)

# Add the provenenace relationshps, linking the input and output to the script execution
# Note: 'sources' and 'derivations' can also be lists of "DataObjects" or "DataObject' identifiers
dp &lt;- describeWorkflow(dp, sources = inObj, program = progObj, derivations = outObj) 
# View the results
utils::head(getRelationships(dp))
</code></pre>

<hr>
<h2 id='dmsg'>Print a debugging message to stderr.</h2><span id='topic+dmsg'></span>

<h3>Description</h3>

<p>Print a debugging message to stderr.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dmsg(msg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dmsg_+3A_msg">msg</code></td>
<td>
<p>the message to be printed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Only print the message if the option &quot;datapack.debugging_mode&quot; is TRUE.
</p>

<hr>
<h2 id='freeResourceMap'>Free memory used by a ResouceMap.</h2><span id='topic+freeResourceMap'></span><span id='topic+freeResourceMap+2CResourceMap-method'></span>

<h3>Description</h3>

<p>The resources allocated by the redland RDF package are freed. The ResourceMap
object should be deleted immediately following this call.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>freeResourceMap(x)

## S4 method for signature 'ResourceMap'
freeResourceMap(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="freeResourceMap_+3A_x">x</code></td>
<td>
<p>a ResourceMap</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+ResourceMap-class">ResourceMap-class</a></code>
</p>

<hr>
<h2 id='getData'>Get the data content of a specified data object</h2><span id='topic+getData'></span><span id='topic+getData+2CDataObject-method'></span><span id='topic+getData+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Get the data content of a specified data object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getData(x, ...)

## S4 method for signature 'DataObject'
getData(x)

## S4 method for signature 'DataPackage'
getData(x, id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getData_+3A_x">x</code></td>
<td>
<p>DataObject or DataPackage: the data structure from where to get the data</p>
</td></tr>
<tr><td><code id="getData_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="getData_+3A_id">id</code></td>
<td>
<p>Missing or character: if <code>'x'</code> is DataPackage, the identifier of the
package member to get data from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>raw representation of the data
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB")
bytes &lt;- getData(do)
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do1 &lt;- new("DataObject", id="id1", data, format="text/csv", user="smith", mnNodeId="urn:node:KNB")
dp &lt;- addMember(dp, do1)
bytes &lt;- getData(dp, "id1")
</code></pre>

<hr>
<h2 id='getFormatId'>Get the FormatId of the DataObject</h2><span id='topic+getFormatId'></span><span id='topic+getFormatId+2CDataObject-method'></span>

<h3>Description</h3>

<p>Get the FormatId of the DataObject
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getFormatId(x, ...)

## S4 method for signature 'DataObject'
getFormatId(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getFormatId_+3A_x">x</code></td>
<td>
<p>DataObject</p>
</td></tr>
<tr><td><code id="getFormatId_+3A_...">...</code></td>
<td>
<p>(not yet used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the formatId
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB")
fmtId &lt;- getFormatId(do)
</code></pre>

<hr>
<h2 id='getIdentifier'>Get the Identifier of the DataObject</h2><span id='topic+getIdentifier'></span><span id='topic+getIdentifier+2CDataObject-method'></span>

<h3>Description</h3>

<p>Get the Identifier of the DataObject
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIdentifier(x, ...)

## S4 method for signature 'DataObject'
getIdentifier(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getIdentifier_+3A_x">x</code></td>
<td>
<p>DataObject</p>
</td></tr>
<tr><td><code id="getIdentifier_+3A_...">...</code></td>
<td>
<p>(not yet used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the identifier
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB")
id &lt;- getIdentifier(do)
</code></pre>

<hr>
<h2 id='getIdentifiers'>Get the Identifiers of Package Members</h2><span id='topic+getIdentifiers'></span><span id='topic+getIdentifiers+2CDataPackage-method'></span>

<h3>Description</h3>

<p>The identifiers of the objects in the package are retrieved and returned as a list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getIdentifiers(x, ...)

## S4 method for signature 'DataPackage'
getIdentifiers(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getIdentifiers_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="getIdentifiers_+3A_...">...</code></td>
<td>
<p>(not yet used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of identifiers
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
getIdentifiers(dp)
</code></pre>

<hr>
<h2 id='getMember'>Return the Package Member by Identifier</h2><span id='topic+getMember'></span><span id='topic+getMember+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Given the identifier of a member of the data package, return the DataObject
representation of the member.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getMember(x, ...)

## S4 method for signature 'DataPackage'
getMember(x, identifier)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getMember_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="getMember_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="getMember_+3A_identifier">identifier</code></td>
<td>
<p>A DataObject identifier</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A DataObject if the member is found, or NULL if not
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", id="myNewId", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
do2 &lt;- getMember(dp, "myNewId")
</code></pre>

<hr>
<h2 id='getRelationships'>Retrieve relationships of package objects</h2><span id='topic+getRelationships'></span><span id='topic+getRelationships+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Relationships of objects in a package are defined using the <code>'insertRelationship'</code> call and retrieved
using <code>getRetaionships</code>. These relationships are returned in a data frame with <code>'subject'</code>, <code>'predicate'</code>, <code>'objects'</code>
as the columns, ordered by &quot;subject&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRelationships(x, ...)

## S4 method for signature 'DataPackage'
getRelationships(x, condense = F, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getRelationships_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="getRelationships_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="getRelationships_+3A_condense">condense</code></td>
<td>
<p>A logical value, if TRUE then a more easily viewed version of relationships are returned.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
insertRelationship(dp, "/Users/smith/scripts/genFields.R",
    "http://www.w3.org/ns/prov#used",
    "https://knb.ecoinformatics.org/knb/d1/mn/v1/object/doi:1234/_030MXTI009R00_20030812.40.1")
rels &lt;- getRelationships(dp)
</code></pre>

<hr>
<h2 id='getSize'>Get the Count of Objects in the Package</h2><span id='topic+getSize'></span><span id='topic+getSize+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Get the Count of Objects in the Package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSize(x, ...)

## S4 method for signature 'DataPackage'
getSize(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSize_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="getSize_+3A_...">...</code></td>
<td>
<p>(not yet used)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The number of object in the Package
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
getSize(dp)
</code></pre>

<hr>
<h2 id='getTriples'>Get the RDF relationships stored in the ResourceMap.</h2><span id='topic+getTriples'></span><span id='topic+getTriples+2CResourceMap-method'></span>

<h3>Description</h3>

<p>The <code>getTriples</code> method extracts the RDF relationships from a ResourceMap.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTriples(x, ...)

## S4 method for signature 'ResourceMap'
getTriples(x, filter = TRUE, identifiers = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getTriples_+3A_x">x</code></td>
<td>
<p>ResourceMap</p>
</td></tr>
<tr><td><code id="getTriples_+3A_...">...</code></td>
<td>
<p>Additional parameters (not yet implemented).</p>
</td></tr>
<tr><td><code id="getTriples_+3A_filter">filter</code></td>
<td>
<p>A <code>logical</code> value. If TRUE, then DataONE packaging relationships are omitted.</p>
</td></tr>
<tr><td><code id="getTriples_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of <code>character</code> values of the identifiers of DataPackage members.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>filter</code> argument causes DataONE packaging relationships to be removed. 
A description of these can be viewed at https://purl.dataone.org/architecture/design/DataPackage.html. 
The <code>identifiers</code> parameter can contain a list of DataPackage members for which the 
identifiers will be 'demoted', that is any relationship that has these identifiers as a 
URL as the subject or object will be changed to the 'bare' identifier. The intent of these two parameter is to
transform the DataPackage to a 'local' state, so that it can be more easily updated locally.
</p>


<h3>Value</h3>

<p>x A data.frame containing the relationships from the ResourceMap
</p>

<hr>
<h2 id='getValue'>Get values for selected DataPackage members.</h2><span id='topic+getValue'></span><span id='topic+getValue+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Given a slot name and set of package member identifiers, return slot values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getValue(x, ...)

## S4 method for signature 'DataPackage'
getValue(x, name, identifiers = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getValue_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="getValue_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="getValue_+3A_name">name</code></td>
<td>
<p>A name of a DataObject slot.</p>
</td></tr>
<tr><td><code id="getValue_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of DataPackage member identifiers</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the parameter <code>identifiers</code> is provided, then only the DataPackage
members that have identifiers in the provided list will have there values fetched.
If this parameter is not provided, then the values for all DataPackage members are returned.
</p>


<h3>Value</h3>

<p>A list of values for matching slot names and included identifiers.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", id="myNewId", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
data &lt;- charToRaw("7,8.9\n4,10,11")
do &lt;- new("DataObject", id="myNewId2", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
formats &lt;- getValue(dp, name="sysmeta@formatId")
</code></pre>

<hr>
<h2 id='hasAccessRule'>Determine if an access rules exists</h2><span id='topic+hasAccessRule'></span><span id='topic+hasAccessRule+2CSystemMetadata-method'></span><span id='topic+hasAccessRule+2CDataObject-method'></span><span id='topic+hasAccessRule+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Each SystemMetadata document may contain a set of (subject, permission) tuples
that represent the access rules for its associated object. This method determines
whether a particular access rule already exists within the set.
</p>
<p>If called for a DataObject, then the SystemMetadata for the DataObject is checked.
</p>
<p>If called for a DataPackage, then the SystemMetadata for DataObjects in the DataPackage are checked.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hasAccessRule(x, ...)

## S4 method for signature 'SystemMetadata'
hasAccessRule(x, subject, permission)

## S4 method for signature 'DataObject'
hasAccessRule(x, subject, permission)

## S4 method for signature 'DataPackage'
hasAccessRule(x, subject, permission, identifiers = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hasAccessRule_+3A_x">x</code></td>
<td>
<p>the object to check for presence of the access rule.</p>
</td></tr>
<tr><td><code id="hasAccessRule_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="hasAccessRule_+3A_subject">subject</code></td>
<td>
<p>of the rule to be checked</p>
</td></tr>
<tr><td><code id="hasAccessRule_+3A_permission">permission</code></td>
<td>
<p>the permission to be checked</p>
</td></tr>
<tr><td><code id="hasAccessRule_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of <code>character</code> values containing package member identifiers for which the access rule will be checked.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A logical value: if TRUE the access rule was found, if FALSE it was not found.
</p>
<p>When called for SystemMetadata, boolean TRUE if the access rule exists already, FALSE otherwise
</p>
<p>When called for a DataObject, boolean TRUE if the access rule exists already, FALSE otherwise
</p>
<p>When called for a DataPackage, boolean TRUE if the access rule exists in all specified package members already, FALSE otherwise
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>
<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#
# Check access rules for a SystemMetadata object.
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "write")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
  "uid=slaughter,o=unaffiliated,dc=example,dc=org"), permission=c("write", "changePermission"))
sysmeta &lt;- addAccessRule(sysmeta, accessRules)
ruleExists &lt;- hasAccessRule(sysmeta, subject="uid=smith,ou=Account,dc=example,dc=com", 
  permission="write")
#
# Check access rules for a DataObject
data &lt;- system.file("extdata/sample-data.csv", package="datapack")
do &lt;- new("DataObject", file=system.file("./extdata/sample-data.csv", package="datapack"), 
                                         format="text/csv")
do &lt;- setPublicAccess(do)
isPublic &lt;- hasAccessRule(do, "public", "read")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
                          "uid=wiggens,o=unaffiliated,dc=example,dc=org"), 
                          permission=c("write", "changePermission"), 
                          stringsAsFactors=FALSE)
do &lt;- addAccessRule(do, accessRules)
SmithHasWrite &lt;- hasAccessRule(do, "uid=smith,ou=Account,dc=example,dc=com", "write")
#
# Check access rules for member DataObjects of a DataPackage.
# First create an example DataPackage
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv")
dp &lt;- addMember(dp, obj)
data2 &lt;- charToRaw("7,8,9\n4,10,11\n")
obj2 &lt;- new("DataObject", id="id2", dataobj=data2, format="text/csv")
dp &lt;- addMember(dp, obj2)
# Add access rules to all package members
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "write")
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")
hasWrite &lt;- hasAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "write")
hasChange &lt;- hasAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")
</code></pre>

<hr>
<h2 id='initialize+2CDataObject-method'>Initialize a DataObject</h2><span id='topic+initialize+2CDataObject-method'></span><span id='topic+DataObject-initialize'></span>

<h3>Description</h3>

<p>When initializing a DataObject using passed in data, one can either pass 
in the <code>'id'</code> param as a <code>'SystemMetadata'</code> object, or as a <code>'character'</code> string 
representing the identifier for an object along with parameters for format, user,and associated member node.
If <code>'data'</code> is not missing, the <code>'data'</code> param holds the <code>'raw'</code> data.  Otherwise, the
<code>'filename'</code> parameter must be provided, and points at a file containing the bytes of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DataObject'
initialize(
  .Object,
  id = NA_character_,
  dataobj = NA,
  format = NA_character_,
  user = NA_character_,
  mnNodeId = NA_character_,
  filename = NA_character_,
  seriesId = NA_character_,
  mediaType = NA_character_,
  mediaTypeProperty = list(),
  dataURL = NA_character_,
  targetPath = NA_character_,
  checksumAlgorithm = "SHA-256"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_.object">.Object</code></td>
<td>
<p>the DataObject instance to be initialized</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_id">id</code></td>
<td>
<p>the identifier for the DataObject, unique within its repository. Optionally this can be an existing SystemMetadata object</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_dataobj">dataobj</code></td>
<td>
<p>the bytes of the data for this object in <code>'raw'</code> format, optional if <code>'filename'</code> is provided</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_format">format</code></td>
<td>
<p>the format identifier for the object, e.g.&quot;text/csv&quot;, &quot;eml://ecoinformatics.org/eml-2.1.1&quot;</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_user">user</code></td>
<td>
<p>the identity of the user owning the package, typically in X.509 format</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_mnnodeid">mnNodeId</code></td>
<td>
<p>the node identifier for the repository to which this object belongs.</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_filename">filename</code></td>
<td>
<p>the filename for the fully qualified path to the data on disk, optional if <code>'data'</code> is provided</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_seriesid">seriesId</code></td>
<td>
<p>A unique string to identifier the latest of multiple revisions of the object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_mediatype">mediaType</code></td>
<td>
<p>The When specified, indicates the IANA Media Type (aka MIME-Type) of the object. The value should include the media type and subtype (e.g. text/csv).</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_mediatypeproperty">mediaTypeProperty</code></td>
<td>
<p>A list, indicates IANA Media Type properties to be associated with the parameter <code>"mediaType"</code></p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_dataurl">dataURL</code></td>
<td>
<p>A character string containing a URL to remote data (a repository) that this DataObject represents.</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_targetpath">targetPath</code></td>
<td>
<p>An optional string that denotes where the file should go in a downloaded package</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataObject-method_+3A_checksumalgorithm">checksumAlgorithm</code></td>
<td>
<p>A character string specifying the checksum algorithm to use</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If filesystem storage is used for the data associated with a DataObject, care must be
taken to not modify or remove that file in R or via other facilities while the DataObject exists in the R session.
Changes to the object are not detected and will result in unexpected results. Also, if the <code>'dataobj'</code> parameter
is used to specify the data source, then <code>'filename'</code> argument may also be specified, but in this case 
the value <code>'filename'</code> parameter is used to tell DataONE the filename to create when this file is
downloaded from a repository.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB", targetPath="data/rasters/data.tiff")
</code></pre>

<hr>
<h2 id='initialize+2CDataPackage-method'>Initialize a DataPackage object.</h2><span id='topic+initialize+2CDataPackage-method'></span><span id='topic+DataPackage-initialize'></span>

<h3>Description</h3>

<p>Initialize a DataPackage object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DataPackage'
initialize(.Object, packageId)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize+2B2CDataPackage-method_+3A_.object">.Object</code></td>
<td>
<p>The object being initialized</p>
</td></tr>
<tr><td><code id="initialize+2B2CDataPackage-method_+3A_packageid">packageId</code></td>
<td>
<p>The package id to assign to the package</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a DataPackage with undefined package id (to be set manually later)
pkg &lt;- new("DataPackage")
# Alternatively, manually assign the package id when the DataPackage object is created
pkg &lt;- new("DataPackage", "urn:uuid:4f953288-f593-49a1-adc2-5881f815e946")
</code></pre>

<hr>
<h2 id='initialize+2CResourceMap-method'>Initialize a ResourceMap object.</h2><span id='topic+initialize+2CResourceMap-method'></span><span id='topic+ResourceMap-initialize'></span>

<h3>Description</h3>

<p>Create a ResourceMap object that contains relationships (RDF triples) of objects in the DataPackage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'ResourceMap'
initialize(.Object, id = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize+2B2CResourceMap-method_+3A_.object">.Object</code></td>
<td>
<p>a ResourceMap object</p>
</td></tr>
<tr><td><code id="initialize+2B2CResourceMap-method_+3A_id">id</code></td>
<td>
<p>a unique identifier to identify this ResourceMap. This id will be used internally in the ResourceMap.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the ResourceMap object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ResourceMap-class">ResourceMap-class</a></code>
</p>

<hr>
<h2 id='initialize+2CSystemMetadata-method'>Initialize a DataONE SystemMetadata object with default values or values passed in to the constructor.</h2><span id='topic+initialize+2CSystemMetadata-method'></span><span id='topic+SystemMetadata-initialize'></span>

<h3>Description</h3>

<p>Initialize a SystemMetadata object by providing default values for core information 
needed to manage objects across repository systems. SystemMetadata contains basic identification, ownership,
access policy, replication policy, and related metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'SystemMetadata'
initialize(
  .Object,
  identifier = NA_character_,
  formatId = NA_character_,
  size = NA_real_,
  checksum = NA_character_,
  checksumAlgorithm = "SHA-256",
  submitter = NA_character_,
  rightsHolder = NA_character_,
  accessPolicy = data.frame(subject = character(), permission = character()),
  replicationAllowed = TRUE,
  numberReplicas = 3,
  obsoletes = NA_character_,
  obsoletedBy = NA_character_,
  archived = FALSE,
  dateUploaded = NA_character_,
  dateSysMetadataModified = NA_character_,
  originMemberNode = NA_character_,
  authoritativeMemberNode = NA_character_,
  preferredNodes = list(),
  blockedNodes = list(),
  seriesId = NA_character_,
  mediaType = NA_character_,
  fileName = NA_character_,
  mediaTypeProperty = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_.object">.Object</code></td>
<td>
<p>The object being initialized</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_identifier">identifier</code></td>
<td>
<p>value of type <code>"character"</code>, the identifier of the object that this system metadata describes.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_formatid">formatId</code></td>
<td>
<p>value of type <code>"character"</code>, the DataONE object format for the object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_size">size</code></td>
<td>
<p>value of type <code>"numeric"</code>, the size of the object in bytes.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_checksum">checksum</code></td>
<td>
<p>value of type <code>"character"</code>, the checksum for the object using the designated checksum algorithm.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_checksumalgorithm">checksumAlgorithm</code></td>
<td>
<p>value of type <code>"character"</code>, the name of the hash function used to generate a checksum, from the DataONE controlled list.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_submitter">submitter</code></td>
<td>
<p>value of type <code>"character"</code>, the Distinguished Name or identifier of the person submitting the object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_rightsholder">rightsHolder</code></td>
<td>
<p>value of type <code>"character"</code>, the Distinguished Name or identifier of the person who holds access rights to the object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_accesspolicy">accessPolicy</code></td>
<td>
<p>value of type <code>"data.frame"</code> containing (subject, permission) tuples to constitute the access authorization rules.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_replicationallowed">replicationAllowed</code></td>
<td>
<p>value of type <code>"logical"</code>, for replication policy allows replicas.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_numberreplicas">numberReplicas</code></td>
<td>
<p>value of type <code>"numeric"</code>, for number of supported replicas.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_obsoletes">obsoletes</code></td>
<td>
<p>value of type <code>"character"</code>, the identifier of an object which this object replaces.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_obsoletedby">obsoletedBy</code></td>
<td>
<p>value of type <code>"character"</code>, the identifier of an object that replaces this object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_archived">archived</code></td>
<td>
<p>value of type <code>"logical"</code>, a boolean flag indicating whether the object has been archived and thus hidden.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_dateuploaded">dateUploaded</code></td>
<td>
<p>value of type <code>"character"</code>, the date on which the object was uploaded to a member node.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_datesysmetadatamodified">dateSysMetadataModified</code></td>
<td>
<p>value of type <code>"character"</code>, the last date on which this system metadata was modified.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_originmembernode">originMemberNode</code></td>
<td>
<p>value of type <code>"character"</code>, the node identifier of the node on which the object was originally registered.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_authoritativemembernode">authoritativeMemberNode</code></td>
<td>
<p>value of type <code>"character"</code>, the node identifier of the node which currently is authoritative for the object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_preferrednodes">preferredNodes</code></td>
<td>
<p>list of <code>"character"</code>, each of which is the node identifier for a node to which a replica should be sent.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_blockednodes">blockedNodes</code></td>
<td>
<p>list of <code>"character"</code>, each of which is the node identifier for a node blocked from housing replicas.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_seriesid">seriesId</code></td>
<td>
<p>value of type <code>"character"</code>, a unique Unicode string that identifies an object revision chain. A seriesId will resolve to the latest version of an object.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_mediatype">mediaType</code></td>
<td>
<p>value of type <code>"character"</code>, the IANA Media Type (aka MIME-Type) of the object, e.g. &quot;text/csv&quot;.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_filename">fileName</code></td>
<td>
<p>value of type <code>"character"</code>, the name of the file to create when this object is downloaded from DataONE.</p>
</td></tr>
<tr><td><code id="initialize+2B2CSystemMetadata-method_+3A_mediatypeproperty">mediaTypeProperty</code></td>
<td>
<p>value of type a <code>"list"</code> of <code>"character"</code>, IANA Media Type properties for the <code>"mediaType"</code> argument</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the SystemMetadata instance representing an object
</p>


<h3>See Also</h3>

<p><a href="https://releases.dataone.org/online/api-documentation-v2.0/apis/Types.html">https://releases.dataone.org/online/api-documentation-v2.0/apis/Types.html</a>
</p>
<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>

<hr>
<h2 id='insertRelationship'>Record relationships of objects in a DataPackage</h2><span id='topic+insertRelationship'></span><span id='topic+insertRelationship+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Record a relationship of the form &quot;subject -&gt; predicate -&gt; object&quot;, as defined by the Resource Description Framework (RDF), i.e.
an RDF triple.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>insertRelationship(x, ...)

## S4 method for signature 'DataPackage'
insertRelationship(
  x,
  subjectID,
  objectIDs,
  predicate = NA_character_,
  subjectType = NA_character_,
  objectTypes = NA_character_,
  dataTypeURIs = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="insertRelationship_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_subjectid">subjectID</code></td>
<td>
<p>The identifier of the subject of the relationship</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_objectids">objectIDs</code></td>
<td>
<p>A list of identifiers of the object of the relationships (a relationship is recorded for each objectID)</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_predicate">predicate</code></td>
<td>
<p>The IRI of the predicate of the relationship</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_subjecttype">subjectType</code></td>
<td>
<p>the type to assign the subject, values can be 'uri', 'blank'</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_objecttypes">objectTypes</code></td>
<td>
<p>the types to assign the objects (cal be single value or list), each value can be 'uri', 'blank', or 'literal'</p>
</td></tr>
<tr><td><code id="insertRelationship_+3A_datatypeuris">dataTypeURIs</code></td>
<td>
<p>An RDF data type that specifies the type of the object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For use with DataONE, a best practice is to specify the subject and predicate as DataONE persistent identifiers 
(https://mule1.dataone.org/ArchitectureDocs-current/design/PIDs.html). If the objects are not known to DataONE, then local identifiers can be
used, and these local identifiers may be promoted to DataONE PIDs when the package is uploaded to a DataONE member node.
The predicate is typically an RDF property (as a IRI) from a schema supported by DataONE, i.e. &quot;http://www.w3.org/ns/prov#wasGeneratedBy&quot;
If multiple values are specified for argument objectIDS, a relationship is created for each value in the list &quot;objectIDs&quot;. IF a value
is not specified for subjectType or objectType, then NA is assigned. Note that if these relationships are fetched via the getRelationships()
function, and passed to the createFromTriples() function to initialize a ResourceMap object, the underlying redland package will assign
appropriate values for subjects and objects.
Note: This method updates the passed-in DataPackage object.
</p>


<h3>Value</h3>

<p>the updated DataPackage object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
# Create a relationship
dp &lt;- insertRelationship(dp, "/Users/smith/scripts/genFields.R",
    "https://knb.ecoinformatics.org/knb/d1/mn/v1/object/doi:1234/_030MXTI009R00_20030812.40.1",
    "http://www.w3.org/ns/prov#used")
# Create a relationshp with the subject as a blank node with an automatically assigned blank 
# node id
dp &lt;- insertRelationship(dp, subjectID=NA_character_, objectIDs="thing6", 
    predicate="http://www.myns.org/wasThing")
# Create a relationshp with the subject as a blank node with a user assigned blank node id
dp &lt;- insertRelationship(dp, subjectID="urn:uuid:bc9e160e-ca21-47d5-871b-4a4820fe4451", 
      objectIDs="thing7", predicate="http://www.myns.org/hadThing")
# Create multiple relationships with the same subject, predicate, but different objects
dp &lt;- insertRelationship(dp, subjectID="urn:uuid:95055dc1-b2a0-4a00-bdc2-05c16d048ca2", 
      objectIDs=c("thing4", "thing5"), predicate="http://www.myns.org/hadThing")
# Create multiple relationships with subject and object types specified
dp &lt;- insertRelationship(dp, subjectID="orcid.org/0000-0002-2192-403X", 
    objectIDs="http://www.example.com/home", predicate="http://www.example.com/hadHome",
                   subjectType="uri", objectType="literal")                
</code></pre>

<hr>
<h2 id='parseRDF'>Parse an RDF/XML resource map from a file.</h2><span id='topic+parseRDF'></span><span id='topic+parseRDF+2CResourceMap-method'></span>

<h3>Description</h3>

<p>parseRDF reads a file containing an RDF model in RDF/XML format and initializes
a ResourceMap based on this content.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseRDF(x, rdf, ...)

## S4 method for signature 'ResourceMap'
parseRDF(
  x,
  rdf,
  asText = FALSE,
  name = "rdfxml",
  mimeType = "application/rdf+xml",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseRDF_+3A_x">x</code></td>
<td>
<p>ResourceMap</p>
</td></tr>
<tr><td><code id="parseRDF_+3A_rdf">rdf</code></td>
<td>
<p>A file or character value containing a resource map that will be parsed into the ResourceMap object</p>
</td></tr>
<tr><td><code id="parseRDF_+3A_...">...</code></td>
<td>
<p>Additional parameters (not yet used).</p>
</td></tr>
<tr><td><code id="parseRDF_+3A_astext">asText</code></td>
<td>
<p>A logical value. If TRUE, then the 'rdf' parameter is a character vector, if FALSE then it is the name of a file to read.</p>
</td></tr>
<tr><td><code id="parseRDF_+3A_name">name</code></td>
<td>
<p>The name of the RDF xml parser, the default is &quot;rdfxml&quot;.</p>
</td></tr>
<tr><td><code id="parseRDF_+3A_mimetype">mimeType</code></td>
<td>
<p>A character value containing the RDF format type. The default is &quot;application/rdf+xml&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method resets the slot ResourceMap@world so any previously stored triples are discarded, allowing
for a clean model object in which to parse the new RDF content into. It is assumed that the content is a
valid ORE resource map therefor no validation checks specific to the OAI-ORE content model are performed.
</p>


<h3>Value</h3>

<p>x the ResourceMap containing the parsed RDF/XML content
</p>

<hr>
<h2 id='parseSystemMetadata'>Parse an external XML document and populate a SystemMetadata object with the parsed data</h2><span id='topic+parseSystemMetadata'></span><span id='topic+parseSystemMetadata+2CSystemMetadata-method'></span>

<h3>Description</h3>

<p>Parse an XML representation of system metadata, and set the object slots of a SystemMetadata object 
the with obtained values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseSystemMetadata(x, ...)

## S4 method for signature 'SystemMetadata'
parseSystemMetadata(x, xml, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseSystemMetadata_+3A_x">x</code></td>
<td>
<p>The <code>SystemMetadata</code> object</p>
</td></tr>
<tr><td><code id="parseSystemMetadata_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to other functions or methods</p>
</td></tr>
<tr><td><code id="parseSystemMetadata_+3A_xml">xml</code></td>
<td>
<p>The XML representation of the capabilities, as an XMLInternalElementNode</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the SystemMetadata object representing an object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(XML)
doc &lt;- xmlParseDoc(system.file("testfiles/sysmeta.xml", package="datapack"), asText=FALSE)
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- parseSystemMetadata(sysmeta, xmlRoot(doc))
</code></pre>

<hr>
<h2 id='plotRelationships'>Plot derivation relationships obtained from getRelationships</h2><span id='topic+plotRelationships'></span><span id='topic+plotRelationships+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Creates graph of dataPackage object generated from getRelationships
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRelationships(x, ...)

## S4 method for signature 'DataPackage'
plotRelationships(x, col = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotRelationships_+3A_x">x</code></td>
<td>
<p>a DataPackage object</p>
</td></tr>
<tr><td><code id="plotRelationships_+3A_...">...</code></td>
<td>
<p>other options passed to the igraph plot function</p>
</td></tr>
<tr><td><code id="plotRelationships_+3A_col">col</code></td>
<td>
<p>vector of colors used for plotting</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>

<hr>
<h2 id='recordDerivation'>Record derivation relationships between objects in a DataPackage</h2><span id='topic+recordDerivation'></span><span id='topic+recordDerivation+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Record a derivation relationship that expresses that a target object has been derived from a source object.
For use with DataONE, a best practice is to specify the subject and predicate as DataONE persistent identifiers 
(https://mule1.dataone.org/ArchitectureDocs-current/design/PIDs.html). If the objects are not known to DataONE, then local identifiers can be
used, and these local identifiers may be promoted to DataONE PIDs when the package is uploaded to a DataONE member node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>recordDerivation(x, ...)

## S4 method for signature 'DataPackage'
recordDerivation(x, sourceID, derivedIDs, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="recordDerivation_+3A_x">x</code></td>
<td>
<p>a DataPackage object</p>
</td></tr>
<tr><td><code id="recordDerivation_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="recordDerivation_+3A_sourceid">sourceID</code></td>
<td>
<p>the identifier of the source object in the relationship</p>
</td></tr>
<tr><td><code id="recordDerivation_+3A_derivedids">derivedIDs</code></td>
<td>
<p>an identifier or list of identifiers of objects that were derived from the source</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A derived relationship is created for each value in the list &quot;objectIDs&quot;.  For each derivedId, one statement will be
added expressing that it was derived from the sourceId.  The predicate is will be an RDF property (as a IRI) from the W3C PROV
specification, namely, &quot;http://www.w3.org/ns/prov#wasDerivedFrom&quot;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dp &lt;- new("DataPackage")
recordDerivation(dp, "doi:1234/_030MXTI009R00_20030812.40.1", 
                 "doi:1234/_030MXTI009R00_20030812.45.1")
                     
## End(Not run)
</code></pre>

<hr>
<h2 id='removeAccessRule'>Remove an access rule from the specified object.</h2><span id='topic+removeAccessRule'></span><span id='topic+removeAccessRule+2CSystemMetadata-method'></span><span id='topic+removeAccessRule+2CDataObject-method'></span><span id='topic+removeAccessRule+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Remove access rules from the access policy of the specified object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeAccessRule(x, ...)

## S4 method for signature 'SystemMetadata'
removeAccessRule(x, y, ...)

## S4 method for signature 'DataObject'
removeAccessRule(x, y, ...)

## S4 method for signature 'DataPackage'
removeAccessRule(x, y, permission = NA_character_, identifiers = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeAccessRule_+3A_x">x</code></td>
<td>
<p>The object instance to which to remove the rule</p>
</td></tr>
<tr><td><code id="removeAccessRule_+3A_...">...</code></td>
<td>
<p>Additional arguments
</p>

<ul>
<li><p>permission The permission to be remove to subject if x is character (read, write, changePermission)
</p>
</li></ul>
</td></tr>
<tr><td><code id="removeAccessRule_+3A_y">y</code></td>
<td>
<p>The subject of the rule to be removed, or a data.frame containing access rules.</p>
</td></tr>
<tr><td><code id="removeAccessRule_+3A_permission">permission</code></td>
<td>
<p>The permission to remove, if parameter <code>x</code> is a character string containing a <code>subject</code>.</p>
</td></tr>
<tr><td><code id="removeAccessRule_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of <code>character</code> values containing package member identifiers that the access rule will be 
applied to (default is all package members).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The SystemMetadata object with the updated access policy.
</p>
<p>The DataObject object with the updated access policy.
</p>
<p>The Datapackage with members having updated access policies.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>
<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#
# Remove access rules from a SystemMetadata object.
# Parameter "y" can be character string containing the subject of the access rule:
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "write")
sysmeta &lt;- addAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")
sysmeta &lt;- removeAccessRule(sysmeta, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")

# Alternatively, parameter "y" can be a data.frame containing one or more access rules:
# Add write, changePermission for uid=jones,...
sysmeta &lt;- addAccessRule(sysmeta, "uid=jones,ou=Account,dc=example,dc=com", "write")
sysmeta &lt;- addAccessRule(sysmeta, "uid=jones,ou=Account,dc=example,dc=com", "changePermission")
# Now take privs for uid=jones,... away
accessRules &lt;- data.frame(subject=c("uid=jones,ou=Account,dc=example,dc=com", 
                                     "uid=jones,ou=Account,dc=example,dc=com"), 
                                     permission=c("write", "changePermission"))
sysmeta &lt;- removeAccessRule(sysmeta, accessRules)
#
# Remove access rules form a DataObject.
library(datapack)
do &lt;- new("DataObject", file=system.file("./extdata/sample-data.csv", package="datapack"), 
                        format="text/csv")
do &lt;- setPublicAccess(do)
isPublic &lt;- hasAccessRule(do, "public", "read")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
                          "uid=wiggens,o=unaffiliated,dc=example,dc=org"), 
                          permission=c("write", "changePermission"), 
                          stringsAsFactors=FALSE)
do &lt;- addAccessRule(do, accessRules)
do &lt;- removeAccessRule(do, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")
# hasAccessRule should return FALSE
hasWrite &lt;- hasAccessRule(do, "smith", "write")

# Alternatively, parameter "y" can be a data.frame containing one or more access rules:
do &lt;- addAccessRule(do, "uid=smith,ou=Account,dc=example,dc=com", "write")
accessRules &lt;- data.frame(subject=c("uid=smith,ou=Account,dc=example,dc=com", 
  "uid=slaughter,o=unaffiliated,dc=example,dc=org"), 
  permission=c("write", "changePermission"))
sysmeta &lt;- removeAccessRule(do, accessRules)
# 
# Remove access rules from a DataPackage.
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv")
dp &lt;- addMember(dp, obj)
data2 &lt;- charToRaw("7,8,9\n4,10,11\n")
obj2 &lt;- new("DataObject", id="id2", dataobj=data2, format="text/csv")
dp &lt;- addMember(dp, obj2)
# Add access rule to all package members
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "write")
dp &lt;- addAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "changePermission" )
# Now take 'changePermission' away for user 'uid=smith...', specifying parameter 'y' 
# as a character string containing a 'subject'.
dp &lt;- removeAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "write")
dp &lt;- removeAccessRule(dp, "uid=smith,ou=Account,dc=example,dc=com", "changePermission")

# Alternatively, parameter "y" can be a data.frame containing one or more access rules:
# Add write, changePermission for uid=jones,...
dp &lt;- addAccessRule(dp, "uid=jones,ou=Account,dc=example,dc=com", "write")
dp &lt;- addAccessRule(dp, "uid=jones,ou=Account,dc=example,dc=com", "changePermission")
# Now take privs for uid=jones,... away
accessRules &lt;- data.frame(subject=c("uid=jones,ou=Account,dc=example,dc=com", 
                                     "uid=jones,ou=Account,dc=example,dc=com"), 
                                     permission=c("write", "changePermission"))
dp &lt;- removeAccessRule(dp, accessRules)
</code></pre>

<hr>
<h2 id='removeMember'>Remove the Specified Member from the Package</h2><span id='topic+removeMember'></span><span id='topic+removeMember+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Given the identifier of a DataObject in a DataPackage, delete the DataObject
from the DataPackage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeMember(x, ...)

## S4 method for signature 'DataPackage'
removeMember(x, do, removeRelationships = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeMember_+3A_x">x</code></td>
<td>
<p>a DataPackage object</p>
</td></tr>
<tr><td><code id="removeMember_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="removeMember_+3A_do">do</code></td>
<td>
<p>The package member to remove, either as a <code>"DataObject"</code> or <code>"character"</code> (for the object identifier)</p>
</td></tr>
<tr><td><code id="removeMember_+3A_removerelationships">removeRelationships</code></td>
<td>
<p>A <code>logical</code> value. If TRUE, package relationships for this package member are removed. Default is FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>removeMember</code> method removes the specified DataObject from the DataPackage. In 
addition, any package relationships that included the DataObject are removed.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", id="myNewId", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
# Remove the package member and any provenance relationships that reference it.
removeMember(dp, "myNewId", removeRelationships=TRUE)
</code></pre>

<hr>
<h2 id='removeRelationships'>Remove relationships of objects in a DataPackage</h2><span id='topic+removeRelationships'></span><span id='topic+removeRelationships+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Use this function to remove all or a subset of the relationships that have previously been added in a data package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRelationships(x, ...)

## S4 method for signature 'DataPackage'
removeRelationships(x, subjectID = NA_character_, predicate = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRelationships_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="removeRelationships_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
<tr><td><code id="removeRelationships_+3A_subjectid">subjectID</code></td>
<td>
<p>The identifier of the subject of the relationships to be removed</p>
</td></tr>
<tr><td><code id="removeRelationships_+3A_predicate">predicate</code></td>
<td>
<p>The identifier of the predicate of the relationships to be removed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Remove a relationship of the form &quot;subject -&gt; predicate -&gt; object&quot;, as defined by the Resource Description Framework (RDF), i.e.
an RDF triple. If neither subjectID nor predicate are provided, then all relationships are removed.  If one or both
are provided, they are used to select matching triples to be removed.
Note: This method updates the passed-in DataPackage object.
</p>


<h3>Value</h3>

<p>the updated DataPackage object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
# Create a relationship
dp &lt;- insertRelationship(dp, "/Users/smith/scripts/genFields.R",
    "https://knb.org/data_20030812.40.1",
    "http://www.w3.org/ns/prov#used")
# Create a relationshp with the subject as a blank node with an automatically assigned blank 
# node id
dp &lt;- insertRelationship(dp, subjectID=NA_character_, objectIDs="thing6", 
    predicate="http://myns.org/wasThing")
# Create a relationshp with the subject as a blank node with a user assigned blank node id
dp &lt;- insertRelationship(dp, subjectID="urn:uuid:bc9e160e-ca21-47d5-871b-4a4820fe4451", 
      objectIDs="thing7", predicate="http://myns.org/hadThing")
# Create multiple relationships with the same subject, predicate, but different objects
dp &lt;- insertRelationship(dp, subjectID="https://myns.org/subject1", 
      objectIDs=c("thing4", "thing5"), predicate="http://myns.org/hadThing")
# Create multiple relationships with subject and object types specified
dp &lt;- insertRelationship(dp, subjectID="orcid.org/0000-0002-2192-403X", 
    objectIDs="http://www.example.com/home", predicate="http://myns.org/hadHome",
                   subjectType="uri", objectType="literal")
nrow(getRelationships(dp)) 
dp &lt;- removeRelationships(dp, predicate='http://myns.org/wasThing')
nrow(getRelationships(dp)) 
dp &lt;- removeRelationships(dp, subjectID='orcid.org/0000-0002-2192-403X')
nrow(getRelationships(dp)) 
dp &lt;- removeRelationships(dp, subjectID='https://myns.org/subject1', 
    predicate='http://myns.org/hadThing')
nrow(getRelationships(dp)) 
dp &lt;- removeRelationships(dp)
nrow(getRelationships(dp)) 
</code></pre>

<hr>
<h2 id='replaceMember'>Replace the raw data or file associated with a DataObject</h2><span id='topic+replaceMember'></span><span id='topic+replaceMember+2CDataPackage-method'></span>

<h3>Description</h3>

<p>A DataObject is a container for data that can be either an R raw object or
a file on local disk. The <code>replaceMember</code> method can be used to update the
date that a DataObject contains, for a DataObject that is a member of a DataPackage, 
substituting a new file or raw object in the specified DataObject.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replaceMember(x, do, ...)

## S4 method for signature 'DataPackage'
replaceMember(
  x,
  do,
  replacement,
  formatId = NA_character_,
  mediaType = NA_character_,
  mediaTypeProperty = NA_character_,
  newId = NA_character_,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replaceMember_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_do">do</code></td>
<td>
<p>A DataObject instance</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_replacement">replacement</code></td>
<td>
<p>A <code>raw</code> object or <code>character</code> (for filename) that will replace the current value in the DataObject <code>do</code>.</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_formatid">formatId</code></td>
<td>
<p>A value of type <code>"character"</code>, the DataONE object format for the object.</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_mediatype">mediaType</code></td>
<td>
<p>A value of type <code>"character"</code>, the IANA Media Type (aka MIME-Type) of the object, e.g. &quot;text/csv&quot;.</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_mediatypeproperty">mediaTypeProperty</code></td>
<td>
<p>A value of type <code>"list"</code> of <code>"character"</code>, IANA Media Type properties for the <code>"mediaType"</code> argument.</p>
</td></tr>
<tr><td><code id="replaceMember_+3A_newid">newId</code></td>
<td>
<p>A value of type <code>"character"</code> which will replace the identifier for this DataObject.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The data that is replacing the existing DataObject data may be of a different
format or type than the existing data. Because the data type and format may change, the
system metadata that describes the data can be updated as well. The <code>replaceMember</code>
method will update the SystemMetadata <code>size</code>, <code>checksum</code> values automatically, 
but does not update the <code>formatId</code>, <code>mediaType</code>, <code>mediaTypeProperty</code>
unless requested, so these should be specified in the call to <code>replaceMember</code> if necessary. 
If the <code>newId</code> argument is used, the specified new identifier will be assigned to the 
object, otherwise one will be generated if necessary. This new identifier will be used
if the DataPackage is uploaded to DataONE, and this object is updating an existing object in DataONE.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a DataObject and add it to the DataPackage
dp &lt;- new("DataPackage")
doIn &lt;- new("DataObject", format="text/csv", 
            filename=system.file("./extdata/pkg-example/binary.csv", package="datapack"))
dp &lt;- addMember(dp, doIn)

# Use the zipped version of the file instead by updating the DataObject
dp &lt;- replaceMember(dp, doIn, 
          replacement=system.file("./extdata/pkg-example/binary.csv.zip", 
          package="datapack"),
                    formatId="application/zip")
</code></pre>

<hr>
<h2 id='ResourceMap-class'>ResourceMap provides methods to create, serialize and deserialize an OAI ORE resource map.</h2><span id='topic+ResourceMap-class'></span>

<h3>Description</h3>

<p>The Open Archives Initiative Object Reuse and Exchange (OAI-ORE) defines standards for the description
and exchange of aggregations of web resources, such as a DataPackage. A Resource Map describes the objects
in a DataPackage and the relationships between these objects.
</p>


<h3>Slots</h3>


<dl>
<dt><code>relations</code></dt><dd><p>value of type <code>"data.frame"</code>, containing RDF triples representing the relationship between package objects</p>
</dd>
<dt><code>world</code></dt><dd><p>a Redland RDF World object</p>
</dd>
<dt><code>storage</code></dt><dd><p>a Redland RDF Storage object</p>
</dd>
<dt><code>model</code></dt><dd><p>a Redland RDF Model object</p>
</dd>
<dt><code>id</code></dt><dd><p>a unique identifier for a ResourceMap instance</p>
</dd>
</dl>


<h3>Methods</h3>


<ul>
<li><p><code><a href="#topic+ResourceMap-initialize">initialize</a></code>: Initialize a ResourceMap object.
</p>
</li>
<li><p><code><a href="#topic+createFromTriples">createFromTriples</a></code>: Populate a ResourceMap with RDF relationships from data.frame.
</p>
</li>
<li><p><code><a href="#topic+getTriples">getTriples</a></code>: Get the RDF relationships stored in the ResourceMap.
</p>
</li>
<li><p><code><a href="#topic+parseRDF">parseRDF</a></code>: Parse an RDF/XML resource map from a file.
</p>
</li>
<li><p><code><a href="#topic+serializeRDF">serializeRDF</a></code>: Write the ResourceMap relationships to a file.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+datapack">datapack</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
dp &lt;- insertRelationship(dp, "/Users/smith/scripts/genFields.R",
    "http://www.w3.org/ns/prov#used",
    "https://knb.ecoinformatics.org/knb/d1/mn/v1/object/doi:1234/_030MXTI009R00_20030812.40.1")
relations &lt;- getRelationships(dp)
resMap &lt;- new("ResourceMap")
resMap &lt;- createFromTriples(resMap, relations, getIdentifiers(dp))
## Not run: 
tf &lt;- tempfile(fileext=".rdf")
serializeRDF(resMap, file=tf)

## End(Not run)
</code></pre>

<hr>
<h2 id='selectMember'>Return identifiers for objects that match search criteria</h2><span id='topic+selectMember'></span><span id='topic+selectMember+2CDataPackage-method'></span>

<h3>Description</h3>

<p>Return DataObjects or DataObject identifiers that match search terms.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectMember(x, ...)

## S4 method for signature 'DataPackage'
selectMember(x, name, value, as = "character")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectMember_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="selectMember_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="selectMember_+3A_name">name</code></td>
<td>
<p>The name of the DataObject slot to inspect, for example &quot;sysmeta@formatId&quot;.</p>
</td></tr>
<tr><td><code id="selectMember_+3A_value">value</code></td>
<td>
<p>A character or logical value to match. If specified as a character value, PERL style regular expressions can be used (see ?grepl).</p>
</td></tr>
<tr><td><code id="selectMember_+3A_as">as</code></td>
<td>
<p>A character value to specify the return type, either &quot;DataObject&quot; or &quot;character&quot; (the default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>"selectMember"</code> method inspects the DataObject slot <code>"name"</code> for a match with <code>"value"</code>
for each DataObject in a DataPackage. Matching DataObjects are returned as a list containing either package member
identifiers (character) or the DataObjects themselves, depending on the value of the <code>as</code> parameter.
</p>


<h3>Value</h3>

<p>A list of matching DataObjects or DataObject identifiers. The default is to return a list of 
DataObject identifiers.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#' library(datapack)
dp &lt;- new("DataPackage")
# Add the script to the DataPackage
progFile &lt;- system.file("./extdata/pkg-example/logit-regression-example.R", package="datapack")
# An 'id' parameter is not specified, so one will be generated automatically.
progObj &lt;- new("DataObject", format="application/R", filename=progFile)
dp &lt;- addMember(dp, progObj)

# Add a script input to the DataPackage
inFile &lt;- system.file("./extdata/pkg-example/binary.csv", package="datapack") 
inObj &lt;- new("DataObject", format="text/csv", filename=inFile)
dp &lt;- addMember(dp, inObj)

# Add a script output to the DataPackage
outFile &lt;- system.file("./extdata/pkg-example/gre-predicted.png", package="datapack")
outObj &lt;- new("DataObject", format="image/png", file=outFile)
dp &lt;- addMember(dp, outObj)

# Now determine the package member identifier for the R script
progIds  &lt;- selectMember(dp, name="sysmeta@formatId", value="application/R", as="character")
inputId &lt;- selectMember(dp, name="sysmeta@fileName", value="binary.csv")
</code></pre>

<hr>
<h2 id='serializePackage'>Create an OAI-ORE resource map from the package</h2><span id='topic+serializePackage'></span><span id='topic+serializePackage+2CDataPackage-method'></span>

<h3>Description</h3>

<p>The DataPackage is serialized as a OAI-ORE resource map to the specified file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serializePackage(x, ...)

## S4 method for signature 'DataPackage'
serializePackage(
  x,
  file,
  id = NA_character_,
  syntaxName = "rdfxml",
  mimeType = "application/rdf+xml",
  namespaces = data.frame(namespace = character(), prefix = character(),
    stringsAsFactors = FALSE),
  syntaxURI = NA_character_,
  resolveURI = NA_character_,
  creator = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serializePackage_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_file">file</code></td>
<td>
<p>The file to which the ResourceMap will be serialized</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_id">id</code></td>
<td>
<p>A unique identifier for the serialization. The default value is the id assigned
to the DataPackage when it was created.</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_syntaxname">syntaxName</code></td>
<td>
<p>The name of the syntax to use for serialization - default is &quot;rdfxml&quot;</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_mimetype">mimeType</code></td>
<td>
<p>The mimetype of the serialized output - the default is &quot;application/rdf+xml&quot;</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_namespaces">namespaces</code></td>
<td>
<p>A data frame containing one or more namespaces and their associated prefix</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_syntaxuri">syntaxURI</code></td>
<td>
<p>URI of the serialization syntax</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_resolveuri">resolveURI</code></td>
<td>
<p>A character string containing a URI to prepend to datapackage identifiers</p>
</td></tr>
<tr><td><code id="serializePackage_+3A_creator">creator</code></td>
<td>
<p>A <code>character</code> string containing the creator of the package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The resource map that is created is serialized by default as RDF/XML. Other serialization formats
can be specified using the <code>syntaxName</code> and <code>mimeType</code> parameters. Other available formats
include: 
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>syntaxName</strong></td><td style="text-align: left;"> <strong>mimeType</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
json</td><td style="text-align: left;"> application/json</td>
</tr>
<tr>
 <td style="text-align: left;">
ntriples</td><td style="text-align: left;"> application/n-triples</td>
</tr>
<tr>
 <td style="text-align: left;">
turtle</td><td style="text-align: left;"> text/turtle</td>
</tr>
<tr>
 <td style="text-align: left;">
dot</td><td style="text-align: left;"> text/x-graphviz</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>
 
<p>Note that the <code>syntaxName</code> and <code>mimeType</code> arguments together specify o serialization format.
</p>
<p>Also, for packages that will be uploaded to the DataONE network, &quot;rdfxml&quot; is the only 
accepted format.  
</p>
<p>The resolveURI string value is prepended to DataPackage member identifiers in the resulting resource map. 
If no resolveURI value is specified, then 'https://cn.dataone.org/cn/v1/resolve' is used.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do &lt;- new("DataObject", id="do1", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
data2 &lt;- charToRaw("7,8,9\n10,11,12")
do2 &lt;- new("DataObject", id="do2", dataobj=data2, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do2)
dp &lt;- describeWorkflow(dp, sources=do, derivations=do2)
## Not run: 
td &lt;- tempdir()
status &lt;- serializePackage(dp, file=paste(td, "resmap.json", sep="/"), syntaxName="json",  
    mimeType="application/json")
status &lt;- serializePackage(dp, file=paste(td, "resmap.xml", sep="/"), syntaxName="rdfxml", 
    mimeType="application/rdf+xml")
status &lt;- serializePackage(dp, file=paste(td, "resmap.ttl", sep="/"), syntaxName="turtle", 
    mimeType="text/turtle")

## End(Not run)
</code></pre>

<hr>
<h2 id='serializeRDF'>Serialize a ResouceMap.</h2><span id='topic+serializeRDF'></span><span id='topic+serializeRDF+2CResourceMap-method'></span>

<h3>Description</h3>

<p>The Redland RDF library is used to serialize the ResourceMap RDF model
to a file as RDF/XML.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serializeRDF(x, ...)

## S4 method for signature 'ResourceMap'
serializeRDF(
  x,
  file,
  syntaxName = "rdfxml",
  mimeType = "application/rdf+xml",
  namespaces = data.frame(namespace = character(), prefix = character(),
    stringsAsFactors = FALSE),
  syntaxURI = NA_character_
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serializeRDF_+3A_x">x</code></td>
<td>
<p>a ResourceMap</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_...">...</code></td>
<td>
<p>Additional parameters</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_file">file</code></td>
<td>
<p>the file to which the ResourceMap will be serialized</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_syntaxname">syntaxName</code></td>
<td>
<p>name of the syntax to use for serialization - default is &quot;rdfxml&quot;</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_mimetype">mimeType</code></td>
<td>
<p>the mimetype of the serialized output - the default is &quot;application/rdf+xml&quot;</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_namespaces">namespaces</code></td>
<td>
<p>a data frame containing one or more namespaces and their associated prefix</p>
</td></tr>
<tr><td><code id="serializeRDF_+3A_syntaxuri">syntaxURI</code></td>
<td>
<p>A URI of the serialized syntax</p>
</td></tr>
</table>


<h3>Value</h3>

<p>status of the serialization (non)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ResourceMap-class">ResourceMap-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
do1 &lt;- new("DataObject", id="id1", data, format="text/csv")
do2 &lt;- new("DataObject", id="id2", data, format="text/csv")
dp &lt;- addMember(dp, do1)
dp &lt;- addMember(dp, do2)
dp &lt;- insertRelationship(dp, subjectID="id1", objectIDs="id2", 
  predicate="http://www.w3.org/ns/prov#wasDerivedFrom")
relations &lt;- getRelationships(dp)
resmap &lt;- new("ResourceMap")
resmap &lt;- createFromTriples(resmap, relations, id="myuniqueid")
## Not run: 
tf &lt;- tempfile(fileext=".xml")
serializeRDF(resmap, tf)

## End(Not run)
</code></pre>

<hr>
<h2 id='serializeSystemMetadata'>Serialize a SystemMetadata object to an XML representation</h2><span id='topic+serializeSystemMetadata'></span><span id='topic+serializeSystemMetadata+2CSystemMetadata-method'></span>

<h3>Description</h3>

<p>The SystemMetadata object is converted to XML and 
written to a file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serializeSystemMetadata(x, ...)

## S4 method for signature 'SystemMetadata'
serializeSystemMetadata(x, version = "v1", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serializeSystemMetadata_+3A_x">x</code></td>
<td>
<p>The SystemMetadata instance to be serialized.</p>
</td></tr>
<tr><td><code id="serializeSystemMetadata_+3A_...">...</code></td>
<td>
<p>(Not currently used)</p>
</td></tr>
<tr><td><code id="serializeSystemMetadata_+3A_version">version</code></td>
<td>
<p>A character string representing the DataONE API version that this system will be used with (e.g. &quot;v1&quot;, &quot;v2&quot;).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code>'version'</code> parameter is specified as *v2* then the SystemMetadata
object is serialized according to the DataONE version 2.0 system metadata format.
</p>


<h3>Value</h3>

<p>A character value of the filename that the XML representation of the SystemMetadata object was written to.
</p>
<p>the character string representing a SystemMetadata object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(XML)
doc &lt;- xmlParseDoc(system.file("testfiles/sysmeta.xml", package="datapack"), asText=FALSE)
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- parseSystemMetadata(sysmeta, xmlRoot(doc))
sysmetaXML &lt;- serializeSystemMetadata(sysmeta, version="v2")
</code></pre>

<hr>
<h2 id='serializeToBagIt'>Serialize A DataPackage into a BagIt Archive File</h2><span id='topic+serializeToBagIt'></span><span id='topic+serializeToBagIt+2CDataPackage-method'></span>

<h3>Description</h3>

<p>The BagIt packaging format <a href="https://tools.ietf.org/html/draft-kunze-bagit-08">https://tools.ietf.org/html/draft-kunze-bagit-08</a>
is used to prepare an archive file that contains the contents of a DataPackage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serializeToBagIt(x, ...)

## S4 method for signature 'DataPackage'
serializeToBagIt(
  x,
  mapId = NA_character_,
  syntaxName = NA_character_,
  namespaces = data.frame(),
  mimeType = NA_character_,
  syntaxURI = NA_character_,
  resolveURI = NA_character_,
  creator = NA_character_,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serializeToBagIt_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_mapid">mapId</code></td>
<td>
<p>A unique identifier for the package resource map. If not specified, one will be automatically generated.</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_syntaxname">syntaxName</code></td>
<td>
<p>The name of the syntax to use for the resource map serialization, defaults to &quot;rdfxml&quot;</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_namespaces">namespaces</code></td>
<td>
<p>An optional data frame containing one or more namespaces and their associated prefix for the resource map serialization.</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_mimetype">mimeType</code></td>
<td>
<p>The mimetype for the resource map serialization, defaults to &quot;application/rdf+xml&quot;.</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_syntaxuri">syntaxURI</code></td>
<td>
<p>An optional string specifying the URI for the resource map serialization.</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_resolveuri">resolveURI</code></td>
<td>
<p>A character string containing a URI to prepend to datapackage identifiers for the resource map.</p>
</td></tr>
<tr><td><code id="serializeToBagIt_+3A_creator">creator</code></td>
<td>
<p>A <code>character</code> string containing the creator of the package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A BagIt Archive File is created by copying each member of a DataPackage, and preparing
files that describe the files in the archive, including information about the size of the files
and a checksum for each file. An OAI-ORE resource map is automatically created and added to the
archive. These metadata files and the data files are then packaged into
a single zip file.
</p>


<h3>Value</h3>

<p>The file name that contains the BagIt zip archive.
Recursively determines the name for a science metadata object.
The base file name (eml, datacite, science-metadata, etc) should stay the same.
Call the method with the base name and the number of existing files to start with.
This is most likely 0.
If there's a count defined, add it to the end of the file in ()
Then call the method again with count += 1
Eventually a free file name will be found, and then the function returns that name
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>
<p>For more information and examples regarding the parameters specifying the creation of the resource map, see <a href="#topic+serializePackage">serializePackage</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create the first data object
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3,5,6")
do &lt;- new("DataObject", id="do1", dataobj=data, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do)
# Create a second data object
data2 &lt;- charToRaw("7,8,9,4,10,11")
do2 &lt;- new("DataObject", id="do2", dataobj=data2, format="text/csv", user="jsmith")
dp &lt;- addMember(dp, do2)
# Create a relationship between the two data objects
dp &lt;- describeWorkflow(dp, sources="do2", derivations="do2")
# Write out the data package to a BagIt file
## Not run: 
bagitFile &lt;- serializeToBagIt(dp, syntaxName="json", mimeType="application/json")

## End(Not run)
</code></pre>

<hr>
<h2 id='setPublicAccess'>Add a Rule to the AccessPolicy to make the object publicly readable.</h2><span id='topic+setPublicAccess'></span><span id='topic+setPublicAccess+2CDataObject-method'></span><span id='topic+setPublicAccess+2CDataPackage-method'></span>

<h3>Description</h3>

<p>To be called prior to creating the object in DataONE.  When called before 
creating the object, adds a rule to the access policy that makes this object
publicly readable.  If called after creation, it will only change the system
metadata locally, and will not have any effect on remotely uploaded copies of
the DataObject.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setPublicAccess(x, ...)

## S4 method for signature 'DataObject'
setPublicAccess(x)

## S4 method for signature 'DataPackage'
setPublicAccess(x, identifiers = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setPublicAccess_+3A_x">x</code></td>
<td>
<p>DataObject</p>
</td></tr>
<tr><td><code id="setPublicAccess_+3A_...">...</code></td>
<td>
<p>(not yet used)</p>
</td></tr>
<tr><td><code id="setPublicAccess_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of <code>character</code> values containing package member identifiers that will be updated (default is all package members).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A DataObject with modified access rules.
</p>
<p>A DataPackage with modified access rules.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>
<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- charToRaw("1,2,3\n4,5,6\n")
do &lt;- new("DataObject", "id1", dataobj=data, "text/csv", 
  "uid=jones,DC=example,DC=com", "urn:node:KNB")
do &lt;- setPublicAccess(do)
# First create a sample package with two DataObjects
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6\n")
obj &lt;- new("DataObject", id="id1", dataobj=data, format="text/csv")
dp &lt;- addMember(dp, obj)
data2 &lt;- charToRaw("7,8,9\n4,10,11\n")
obj2 &lt;- new("DataObject", id="id2", dataobj=data2, format="text/csv")
dp &lt;- addMember(dp, obj2)
# Now add public read to all package members ("id1", "id2")
dp &lt;- setPublicAccess(dp)
</code></pre>

<hr>
<h2 id='setValue'>Set values for selected DataPackage members.</h2><span id='topic+setValue'></span><span id='topic+setValue+2CDataPackage-method'></span>

<h3>Description</h3>

<p>The <code>'setValue'</code> method is used to modify values stored in DataPackage members.
Each member in a DataPackage is a DataObject which is an R S4 object that contains a set of values (slots).
The available slots are described at <code>help("DataObject-class")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setValue(x, ...)

## S4 method for signature 'DataPackage'
setValue(x, name, value, identifiers = NA_character_, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setValue_+3A_x">x</code></td>
<td>
<p>A DataPackage instance</p>
</td></tr>
<tr><td><code id="setValue_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="setValue_+3A_name">name</code></td>
<td>
<p>A DataObject slot name.</p>
</td></tr>
<tr><td><code id="setValue_+3A_value">value</code></td>
<td>
<p>A new value to assign to the slot for selected DataPackage members.</p>
</td></tr>
<tr><td><code id="setValue_+3A_identifiers">identifiers</code></td>
<td>
<p>A list of identifiers of DataPackage members to update.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the parameter <code>identifiers</code> is provided, then DataPackage members that
have identifiers specified in the list will be updated. If this parameter is not provided
then no members will be updated. To update all members in a package, specify the
value of <code>identifiers=getIdentifiers(pkg)</code> where <code>pkg</code> is the variable name
of the DataPackage to update. Note that this method can be used to update the
<code>data</code> or <code>filenane</code> slots, but it is instead recommended to us the
<code>replaceMember</code> method to achieve this, as the <code>replaceMember</code> method assists 
in properly setting the related SystemMetadata values.
</p>


<h3>Value</h3>

<p>A DataPackage with possibly updated DataObjects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># First create a package that we can modify. 
dp &lt;- new("DataPackage")
data &lt;- charToRaw("1,2,3\n4,5,6")
# The next statment sets the format type incorrectly as an example, so we can correct it later
do &lt;- new("DataObject", id="myNewId", dataobj=data, format="image/jpg", user="jsmith")
dp &lt;- addMember(dp, do)
data &lt;- charToRaw("7,8.9\n4,10,11")
# This next statement also sets the format type incorrectly
do &lt;- new("DataObject", id="myNewId2", dataobj=data, format="image/jpg", user="jsmith")
dp &lt;- addMember(dp, do)
# Change format types to correct value for both package members
# Careful! Specifying 'identifiers=getIdentifiers(dp) will update all package members!
dp &lt;- setValue(dp, name="sysmeta@formatId", value="text/csv", identifiers=getIdentifiers(dp))
</code></pre>

<hr>
<h2 id='SystemMetadata'>Create DataONE SystemMetadata object</h2><span id='topic+SystemMetadata'></span><span id='topic+SystemMetadata+2CXMLInternalElementNode-method'></span>

<h3>Description</h3>

<p>A class representing DataONE SystemMetadata, which is core information about objects stored in a repository
and needed to manage those objects across systems.  SystemMetadata contains basic identification, ownership,
access policy, replication policy, and related metadata.
</p>
<p>If the *sysmeta* parameter is specified, then construct a new SystemMetadata instance by using the fields from 
an XML representation of the SystemMetadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SystemMetadata(...)

## S4 method for signature 'XMLInternalElementNode'
SystemMetadata(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SystemMetadata_+3A_...">...</code></td>
<td>
<p>Additional arguments</p>
</td></tr>
<tr><td><code id="SystemMetadata_+3A_x">x</code></td>
<td>
<p>A value of type <code>"XMLInternalElementNode"</code>, containing the parsed XML element with SystemMetadata fields.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>

<hr>
<h2 id='SystemMetadata-class'>A DataONE SystemMetadata object containing basic identification, ownership, access policy, replication policy, and related metadata.</h2><span id='topic+SystemMetadata-class'></span>

<h3>Description</h3>

<p>A class representing DataONE SystemMetadata, which is core information about objects stored in a repository
and needed to manage those objects across systems.  SystemMetadata contains basic identification, ownership,
access policy, replication policy, and related metadata.
</p>


<h3>Slots</h3>


<dl>
<dt><code>serialVersion</code></dt><dd><p>value of type <code>"numeric"</code>, the current version of this system metadata; only update the current version</p>
</dd>
<dt><code>identifier</code></dt><dd><p>value of type <code>"character"</code>, the identifier of the object that this system metadata describes.</p>
</dd>
<dt><code>replicationAllowed</code></dt><dd><p>value of type <code>"logical"</code>, replication policy allows replicas.</p>
</dd>
<dt><code>numberReplicas</code></dt><dd><p>value of type <code>"numeric"</code>, for number of supported replicas.</p>
</dd>
<dt><code>preferredNodes</code></dt><dd><p>value of type <code>"list"</code>, of preferred member nodes.</p>
</dd>
<dt><code>blockedNodes</code></dt><dd><p>value of type <code>"list"</code>, of blocked member nodes.</p>
</dd>
<dt><code>formatId</code></dt><dd><p>value of type <code>"character"</code>, the DataONE object format for the object.</p>
</dd>
<dt><code>size</code></dt><dd><p>value of type <code>"numeric"</code>, the size of the object in bytes.</p>
</dd>
<dt><code>checksum</code></dt><dd><p>value of type <code>"character"</code>, the checksum for the object using the designated checksum algorithm.</p>
</dd>
<dt><code>checksumAlgorithm</code></dt><dd><p>value of type <code>"character"</code>, the name of the hash function used to generate a checksum, from the DataONE controlled list.</p>
</dd>
<dt><code>submitter</code></dt><dd><p>value of type <code>"character"</code>, the Distinguished Name or identifier of the person submitting the object.</p>
</dd>
<dt><code>rightsHolder</code></dt><dd><p>value of type <code>"character"</code>, the Distinguished Name or identifier of the person who holds access rights to the object.</p>
</dd>
<dt><code>accessPolicy</code></dt><dd><p>value of type <code>"data.frame"</code>, a list of access rules as (subject, permission) tuples to be applied to the object.</p>
</dd>
<dt><code>obsoletes</code></dt><dd><p>value of type <code>"character"</code>, the identifier of an object which this object replaces.</p>
</dd>
<dt><code>obsoletedBy</code></dt><dd><p>value of type <code>"character"</code>, the identifier of an object that replaces this object.</p>
</dd>
<dt><code>archived</code></dt><dd><p>value of type <code>"logical"</code>, a boolean flag indicating whether the object has been archived and thus hidden.</p>
</dd>
<dt><code>dateUploaded</code></dt><dd><p>value of type <code>"character"</code>, the date on which the object was uploaded to a member node.</p>
</dd>
<dt><code>dateSysMetadataModified</code></dt><dd><p>value of type <code>"character"</code>, the last date on which this system metadata was modified.</p>
</dd>
<dt><code>originMemberNode</code></dt><dd><p>value of type <code>"character"</code>, the node identifier of the node on which the object was originally registered.</p>
</dd>
<dt><code>authoritativeMemberNode</code></dt><dd><p>value of type <code>"character"</code>, the node identifier of the node which currently is authoritative for the object.</p>
</dd>
<dt><code>seriesId</code></dt><dd><p>value of type <code>"character"</code>, a unique Unicode string that identifies an object revision chain. A seriesId will resolve to the latest version of an object.</p>
</dd>
<dt><code>mediaType</code></dt><dd><p>value of type <code>"character"</code>, the IANA Media Type (aka MIME-Type) of the object, e.g. &quot;text/csv&quot;.</p>
</dd>
<dt><code>fileName</code></dt><dd><p>value of type <code>"character"</code>, the name of the file to create when this object is downloaded from DataONE.</p>
</dd>
<dt><code>mediaTypeProperty</code></dt><dd><p>value of type a <code>"list"</code> of <code>"character"</code>, IANA Media Type properties for the <code>"mediaType"</code> argument</p>
</dd>
</dl>


<h3>Methods</h3>


<ul>
<li><p><code><a href="#topic+SystemMetadata-initialize">initialize</a></code>: Initialize a DataONE SystemMetadata object with default values or values passed in to the constructor object
</p>
</li>
<li><p><code><a href="#topic+SystemMetadata">SystemMetadata</a></code>: Create a SystemMetadata object, with all fields set to the value found in an XML document
</p>
</li>
<li><p><code><a href="#topic+parseSystemMetadata">parseSystemMetadata</a></code>: Parse an external XML document and populate a SystemMetadata object with the parsed data
</p>
</li>
<li><p><code><a href="#topic+serializeSystemMetadata">serializeSystemMetadata</a></code>: Get the Count of Objects in the Package
</p>
</li>
<li><p><code><a href="#topic+validate">validate</a></code>: Validate a SystemMetadata object
</p>
</li>
<li><p><code><a href="#topic+addAccessRule">addAccessRule</a></code>: Add access rules to an object such as system metadata
</p>
</li>
<li><p><code><a href="#topic+hasAccessRule">hasAccessRule</a></code>: Determine if a particular access rules exists within SystemMetadata.
</p>
</li>
<li><p><code><a href="#topic+clearAccessPolicy">clearAccessPolicy</a></code>: Clear the accessPolicy from the specified object.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+datapack">datapack</a></code>
</p>

<hr>
<h2 id='updateMetadata'>Update selected elements of the XML content of a DataObject in a DataPackage (aka package member).</h2><span id='topic+updateMetadata'></span><span id='topic+updateMetadata+2CDataPackage-method'></span>

<h3>Description</h3>

<p>A DataObject that contains an XML document can be edited by specifying a path
to the elements to edit (an XPath expression) and a value to replace the text node.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateMetadata(x, do, ...)

## S4 method for signature 'DataPackage'
updateMetadata(x, do, xpath, replacement, newId = NA_character_, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateMetadata_+3A_x">x</code></td>
<td>
<p>a DataPackage instance</p>
</td></tr>
<tr><td><code id="updateMetadata_+3A_do">do</code></td>
<td>
<p>A DataObject instance object, or DataObject identifier</p>
</td></tr>
<tr><td><code id="updateMetadata_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="updateMetadata_+3A_xpath">xpath</code></td>
<td>
<p>A <code>character</code> value specifying the location in the XML to update.</p>
</td></tr>
<tr><td><code id="updateMetadata_+3A_replacement">replacement</code></td>
<td>
<p>A <code>character</code> value that will replace the elements found with the <code>xpath</code>.</p>
</td></tr>
<tr><td><code id="updateMetadata_+3A_newid">newId</code></td>
<td>
<p>A value of type <code>"character"</code> which will replace the identifier for this DataObject.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This method requires some knowledge of the structure of the metadata document as well
as facility with the XPath language. If the <code>newId</code> argument is used, the specified new 
identifier will be assigned to the object, and the previous identifier will be stored in the <code>oldId</code> slot, 
for possible use when updating the DataObject to a repository. If <code>newId</code> is not used, a new
identifier will be generated for the DataObject only the first time that updateMetadata is called for
a particular object in a DataPackage.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Create a DataObject and add it to the DataPackage
dp &lt;- new("DataPackage")
sampleMeta &lt;- system.file("./extdata/sample-eml.xml", package="datapack")
id &lt;- "1234"
metaObj &lt;- new("DataObject", id="1234", format="eml://ecoinformatics.org/eml-2.1.1", 
                file=sampleMeta)
dp &lt;- addMember(dp, metaObj)

# In the metadata object, insert the newly assigned data 
xp &lt;- sprintf("//dataTable/physical/distribution[../objectName/text()=\"%s\"]/online/url", 
              "sample-data.csv") 
newURL &lt;- sprintf("https://cn.dataone.org/cn/v2/resolve/%s", "1234")
dp &lt;- updateMetadata(dp, id, xpath=xp, replacement=newURL)
</code></pre>

<hr>
<h2 id='updateRelationships'>Update package relationships by replacing an old identifier with a new one.</h2><span id='topic+updateRelationships'></span><span id='topic+updateRelationships+2CDataPackage-method'></span>

<h3>Description</h3>

<p>When package members are updated, they receive a new identifier (replaceMember). It is therefor
necessary to update the package relationships to update occurrences of the old identifier
with the new one when the old identifier appears in the &quot;subject&quot; or &quot;object&quot; of a 
relationship.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateRelationships(x, ...)

## S4 method for signature 'DataPackage'
updateRelationships(x, id, newId, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateRelationships_+3A_x">x</code></td>
<td>
<p>A DataPackage object</p>
</td></tr>
<tr><td><code id="updateRelationships_+3A_...">...</code></td>
<td>
<p>(Not yet used)</p>
</td></tr>
<tr><td><code id="updateRelationships_+3A_id">id</code></td>
<td>
<p>A character value containing the identifier to be replaced.</p>
</td></tr>
<tr><td><code id="updateRelationships_+3A_newid">newId</code></td>
<td>
<p>A character value containing the identifier that will replace the old identifier.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+DataPackage-class">DataPackage-class</a></code>
</p>

<hr>
<h2 id='updateXML'>Update selected elements of the XML content of a DataObject</h2><span id='topic+updateXML'></span><span id='topic+updateXML+2CDataObject-method'></span>

<h3>Description</h3>

<p>The data content of the DataObject is updated by using the <code>xpath</code> 
argument to locate the elements to update with the character value specified in the 
<code>replacement</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updateXML(x, ...)

## S4 method for signature 'DataObject'
updateXML(x, xpath = NA_character_, replacement = NA_character_, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updateXML_+3A_x">x</code></td>
<td>
<p>A DataObject instance</p>
</td></tr>
<tr><td><code id="updateXML_+3A_...">...</code></td>
<td>
<p>Additional parameters (not yet used)</p>
</td></tr>
<tr><td><code id="updateXML_+3A_xpath">xpath</code></td>
<td>
<p>A <code>character</code> value specifying the location in the XML to update.</p>
</td></tr>
<tr><td><code id="updateXML_+3A_replacement">replacement</code></td>
<td>
<p>A <code>character</code> value that will replace the elements found with the <code>xpath</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The modified DataObject
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DataObject-class">DataObject-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(datapack)
dataObj &lt;- new("DataObject", format="text/csv", file=sampleData)
sampleEML &lt;- system.file("extdata/sample-eml.xml", package="datapack")
dataObj &lt;- updateMetadata(dataObj, xpath="", replacement=)

## End(Not run)
library(datapack)
# Create the metadata object with a sample EML file
sampleMeta &lt;- system.file("./extdata/sample-eml.xml", package="datapack")
metaObj &lt;- new("DataObject", format="eml://ecoinformatics.org/eml-2.1.1", file=sampleMeta)
# In the metadata object, replace "sample-data.csv" with 'sample-data.csv.zip'
xp &lt;- sprintf("//dataTable/physical/objectName[text()=\"%s\"]", "sample-data.csv")
metaObj &lt;- updateXML(metaObj, xpath=xp, replacement="sample-data.csv.zip")
</code></pre>

<hr>
<h2 id='validate'>Validate a SystemMetadata object.</h2><span id='topic+validate'></span><span id='topic+validate+2CSystemMetadata-method'></span>

<h3>Description</h3>

<p>Validate a system metadata object, ensuring that required fields are present and of the right type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate(x, ...)

## S4 method for signature 'SystemMetadata'
validate(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_+3A_x">x</code></td>
<td>
<p>the instance to be validated</p>
</td></tr>
<tr><td><code id="validate_+3A_...">...</code></td>
<td>
<p>(Additional parameters)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical, <code>TRUE</code> if the SystemMetadata object is valid, else a list of strings detailing errors
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SystemMetadata-class">SystemMetadata-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(XML)
doc &lt;- xmlParseDoc(system.file("testfiles/sysmeta.xml", package="datapack"), asText=FALSE)
sysmeta &lt;- new("SystemMetadata")
sysmeta &lt;- parseSystemMetadata(sysmeta, xmlRoot(doc))
valid &lt;- validate(sysmeta)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
