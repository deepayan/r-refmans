<!DOCTYPE html><html><head><title>Help for package nflfastR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nflfastR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#nflfastR-package'><p>nflfastR: Functions to Efficiently Access NFL Play by Play Data</p></a></li>
<li><a href='#add_qb_epa'><p>Compute QB epa</p></a></li>
<li><a href='#add_xpass'><p>Add expected pass columns</p></a></li>
<li><a href='#add_xyac'><p>Add expected yards after completion (xyac) variables</p></a></li>
<li><a href='#build_nflfastR_pbp'><p>Build a Complete nflfastR Data Set</p></a></li>
<li><a href='#calculate_expected_points'><p>Compute expected points</p></a></li>
<li><a href='#calculate_player_stats'><p>Get Official Game Stats</p></a></li>
<li><a href='#calculate_player_stats_def'><p>Get Official Game Stats on Defense</p></a></li>
<li><a href='#calculate_player_stats_kicking'><p>Summarize Kicking Stats</p></a></li>
<li><a href='#calculate_series_conversion_rates'><p>Compute Series Conversion Information from Play by Play</p></a></li>
<li><a href='#calculate_standings'><p>Compute Division Standings and Conference Seeds from Play by Play</p></a></li>
<li><a href='#calculate_win_probability'><p>Compute win probability</p></a></li>
<li><a href='#clean_pbp'><p>Clean Play by Play Data</p></a></li>
<li><a href='#decode_player_ids'><p>Decode the player IDs in nflfastR play-by-play data</p></a></li>
<li><a href='#fast_scraper'><p>Get NFL Play by Play Data</p></a></li>
<li><a href='#fast_scraper_roster'><p>Load Team Rosters for Multiple Seasons</p></a></li>
<li><a href='#fast_scraper_schedules'><p>Load NFL Season Schedules</p></a></li>
<li><a href='#field_descriptions'><p>nflfastR Field Descriptions</p></a></li>
<li><a href='#load_pbp'><p>Load Play By Play</p></a></li>
<li><a href='#load_player_stats'><p>Load Player Level Weekly Stats</p></a></li>
<li><a href='#missing_raw_pbp'><p>Compute Missing Raw PBP Data on Local Filesystem</p></a></li>
<li><a href='#report'><p>Get a Situation Report on System, nflverse Package Versions and Dependencies</p></a></li>
<li><a href='#save_raw_pbp'><p>Download Raw PBP Data to Local Filesystem</p></a></li>
<li><a href='#stat_ids'><p>NFL Stat IDs and their Meanings</p></a></li>
<li><a href='#teams_colors_logos'><p>NFL Team names, colors and logo urls.</p></a></li>
<li><a href='#update_db'><p>Update or Create a nflfastR Play-by-Play Database</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Functions to Efficiently Access NFL Play by Play Data</td>
</tr>
<tr>
<td>Version:</td>
<td>4.6.1</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of functions to access National Football
    League play-by-play data from <a href="https://www.nfl.com/">https://www.nfl.com/</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.nflfastr.com/">https://www.nflfastr.com/</a>, <a href="https://github.com/nflverse/nflfastR">https://github.com/nflverse/nflfastR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/nflverse/nflfastR/issues">https://github.com/nflverse/nflfastR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.0.0), curl, data.table (&ge; 1.14.0), dplyr (&ge;
1.0.0), fastrmodels (&ge; 1.0.1), furrr, future, glue, janitor,
mgcv, nflreadr (&ge; 1.2.0), progressr (&ge; 0.6.0), rlang (&ge;
0.4.7), stringr (&ge; 1.3.0), tibble (&ge; 3.0), tidyr (&ge; 1.0.0),
tidyselect (&ge; 1.1.0), xgboost (&ge; 1.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>crayon (&ge; 1.3.4), DBI, DT, gsisdecoder, httr, jsonlite,
lifecycle (&ge; 0.2.0), nflseedR (&ge; 1.0.2), purrr (&ge; 0.3.0), qs
(&ge; 0.25.1), rmarkdown, RSQLite, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-09 16:54:12 UTC; carl</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastian Carl [aut],
  Ben Baldwin [cre, aut],
  Lee Sharpe [ctb],
  Maksim Horowitz [ctb],
  Ron Yurko [ctb],
  Samuel Ventura [ctb],
  Tan Ho [ctb],
  John Edwards [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ben Baldwin &lt;bbaldwin206@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 23:13:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='nflfastR-package'>nflfastR: Functions to Efficiently Access NFL Play by Play Data</h2><span id='topic+nflfastR'></span><span id='topic+nflfastR-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A set of functions to access National Football League play-by-play data from <a href="https://www.nfl.com/">https://www.nfl.com/</a>.
</p>


<h3>Parallel Processing and Progress Updates in nflfastR</h3>



<h4>Preface</h4>

<p>Prior to nflfastR v4.0, parallel processing could be activated with an
argument <code>pp</code> in the relevant functions and progress updates were always
shown. Both of these methods are bad practice and were therefore removed
in nflfastR v4.0
</p>
<p>The next sections describe how to make nflfastR work in parallel processes
and show progress updates if the user wants to.
</p>



<h4>More Speed Using Parallel Processing</h4>

<p>Nearly all nflfastR functions support parallel processing
using <code><a href="furrr.html#topic+future_map">furrr::future_map()</a></code> if it is enabled by a call to <code><a href="future.html#topic+plan">future::plan()</a></code>
prior to the function call.
Please see the documentation of the functions for detailed information.
</p>
<p>As an example, the following code block will resolve all function calls in the
current session using multiple sessions in the background and load play-by-play
data for the 2018 through 2020 seasons or build them freshly for the 2018 and
2019 Super Bowls:
</p>
<div class="sourceCode"><pre>future::plan("multisession")
load_pbp(2018:2020)
build_nflfastR_pbp(c("2018_21_NE_LA", "2019_21_SF_KC"))
</pre></div>
<p>We recommend choosing a default parallel processing method and saving it
as an environment variable in the R user profile to make sure all futures
will be resolved with the chosen method by default.
This can be done by following the below given steps.
</p>
<p>First, run the following line and the file <code>.Renviron</code> should be opened automatically.
If you haven't saved any environment variables yet, this will be an empty file.
</p>
<div class="sourceCode"><pre>usethis::edit_r_environ()
</pre></div>
<p>In the opened file <code>.Renviron</code> add the next line, then save the file and restart your R session.
Please note that this example sets &quot;multisession&quot; as default. For most users
this should be the appropriate plan but please make sure it truly is.
</p>
<div class="sourceCode"><pre>R_FUTURE_PLAN="multisession"
</pre></div>
<p>After the session is freshly restarted please check if the above method worked
by running the next line. If the output is <code>FALSE</code> you successfully set up a
default non-sequential <code><a href="future.html#topic+plan">future::plan()</a></code>. If the output is <code>TRUE</code> all functions
will behave like they were called with <code><a href="purrr.html#topic+map">purrr::map()</a></code> and NOT in multisession.
</p>
<div class="sourceCode"><pre>inherits(future::plan(), "sequential")
</pre></div>
<p>For more information on possible plans please see
<a href="https://github.com/HenrikBengtsson/future/blob/develop/README.md">the future package Readme</a>.
</p>
<p>For more information on <code>.Renviron</code> please see
<a href="https://rstats.wtf/r-startup.html">this book chapter</a>.
</p>



<h4>Get Progress Updates while Functions are Running</h4>

<p>Most nflfastR functions are able to show progress updates
using <code><a href="progressr.html#topic+progressor">progressr::progressor()</a></code> if they are turned on before the function is
called. There are at least two basic ways to do this by either activating
progress updates globally (for the current session) with
</p>
<div class="sourceCode"><pre>progressr::handlers(global = TRUE)
</pre></div>
<p>or by piping the function call into <code><a href="progressr.html#topic+with_progress">progressr::with_progress()</a></code>:
</p>
<div class="sourceCode"><pre>load_pbp(2018:2020) %&gt;%
  progressr::with_progress()
</pre></div>
<p>Just like in the previous section, it is possible to activate global
progression handlers by default. This can be done by following the below given steps.
</p>
<p>First, run the following line and the file <code>.Rprofile</code> should be opened automatically.
If you haven't saved any code yet, this will be an empty file.
</p>
<div class="sourceCode"><pre>usethis::edit_r_profile()
</pre></div>
<p>In the opened file <code>.Rprofile</code> add the next line, then save the file and restart your R
session. All code in this file will be executed when a new R session starts.
The part <code style="white-space: pre;">&#8288;if (require("progressr"))&#8288;</code> makes sure this will only run if the
package progressr is installed to avoid crashing R sessions.
</p>
<div class="sourceCode"><pre>if (requireNamespace("progressr", quietly = TRUE)) progressr::handlers(global = TRUE)
</pre></div>
<p>After the session is freshly restarted please check if the above method worked
by running the next line. If the output is <code>TRUE</code> you successfully activated
global progression handlers for all sessions.
</p>
<div class="sourceCode"><pre>progressr::handlers(global = NA)
</pre></div>
<p>For more information how to work with progress handlers please see <a href="progressr.html#topic+progressr">progressr::progressr</a>.
</p>
<p>For more information on <code>.Rprofile</code> please see
<a href="https://rstats.wtf/r-startup.html">this book chapter</a>.
</p>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Ben Baldwin <a href="mailto:bbaldwin206@gmail.com">bbaldwin206@gmail.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Sebastian Carl <a href="mailto:mrcaseb@gmail.com">mrcaseb@gmail.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Lee Sharpe [contributor]
</p>
</li>
<li><p> Maksim Horowitz <a href="mailto:maksim.horowitz@gmail.com">maksim.horowitz@gmail.com</a> [contributor]
</p>
</li>
<li><p> Ron Yurko <a href="mailto:ryurko@stat.cmu.edu">ryurko@stat.cmu.edu</a> [contributor]
</p>
</li>
<li><p> Samuel Ventura <a href="mailto:samventura22@gmail.com">samventura22@gmail.com</a> [contributor]
</p>
</li>
<li><p> Tan Ho [contributor]
</p>
</li>
<li><p> John Edwards <a href="mailto:edwards1860@gmail.com">edwards1860@gmail.com</a> [contributor]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://www.nflfastr.com/">https://www.nflfastr.com/</a>
</p>
</li>
<li> <p><a href="https://github.com/nflverse/nflfastR">https://github.com/nflverse/nflfastR</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/nflverse/nflfastR/issues">https://github.com/nflverse/nflfastR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='add_qb_epa'>Compute QB epa</h2><span id='topic+add_qb_epa'></span>

<h3>Description</h3>

<p>Compute QB epa
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_qb_epa(pbp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_qb_epa_+3A_pbp">pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="add_qb_epa_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Add the variable 'qb_epa', which gives QB credit for EPA for up to the point where
a receiver lost a fumble after a completed catch and makes EPA work more
like passing yards on plays with fumbles
</p>

<hr>
<h2 id='add_xpass'>Add expected pass columns</h2><span id='topic+add_xpass'></span>

<h3>Description</h3>

<p>Build columns from the expected dropback model. Will return
<code>NA</code> on data prior to 2006 since that was before NFL started marking scrambles.
Must be run on a dataframe that has already had <code><a href="#topic+clean_pbp">clean_pbp()</a></code> run on it.
Note that the functions <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code> and
the database function <code><a href="#topic+update_db">update_db()</a></code> already include this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_xpass(pbp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_xpass_+3A_pbp">pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="add_xpass_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input Data Frame of the parameter <code>pbp</code> with the following columns
added:
</p>

<dl>
<dt>xpass</dt><dd><p>Probability of dropback scaled from 0 to 1.</p>
</dd>
<dt>pass_oe</dt><dd><p>Dropback percent over expected on a given play scaled from 0 to 100.</p>
</dd>
</dl>


<hr>
<h2 id='add_xyac'>Add expected yards after completion (xyac) variables</h2><span id='topic+add_xyac'></span>

<h3>Description</h3>

<p>Add expected yards after completion (xyac) variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_xyac(pbp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_xyac_+3A_pbp">pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="add_xyac_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Build columns that capture what we should expect after the catch.
</p>


<h3>Value</h3>

<p>The input Data Frame of the parameter 'pbp' with the following columns
added:
</p>

<dl>
<dt>xyac_epa</dt><dd><p>Expected value of EPA gained after the catch, starting from where the catch was made. Zero yards after the catch would be listed as zero EPA.</p>
</dd>
<dt>xyac_success</dt><dd><p>Probability play earns positive EPA (relative to where play started) based on where ball was caught.</p>
</dd>
<dt>xyac_fd</dt><dd><p>Probability play earns a first down based on where the ball was caught.</p>
</dd>
<dt>xyac_mean_yardage</dt><dd><p>Average expected yards after the catch based on where the ball was caught.</p>
</dd>
<dt>xyac_median_yardage</dt><dd><p>Median expected yards after the catch based on where the ball was caught.</p>
</dd>
</dl>


<hr>
<h2 id='build_nflfastR_pbp'>Build a Complete nflfastR Data Set</h2><span id='topic+build_nflfastR_pbp'></span>

<h3>Description</h3>

<p><code>build_nflfastR_pbp</code> is a convenient wrapper around 6 nflfastR functions:
</p>

<ul>
<li><p><code><a href="#topic+fast_scraper">fast_scraper()</a></code>
</p>
</li>
<li><p><code><a href="#topic+clean_pbp">clean_pbp()</a></code>
</p>
</li>
<li><p><code><a href="#topic+add_qb_epa">add_qb_epa()</a></code>
</p>
</li>
<li><p><code><a href="#topic+add_xyac">add_xyac()</a></code>
</p>
</li>
<li><p><code><a href="#topic+add_xpass">add_xpass()</a></code>
</p>
</li>
<li><p><code><a href="#topic+decode_player_ids">decode_player_ids()</a></code>
</p>
</li></ul>

<p>Please see either the documentation of each function or
<a href="https://www.nflfastr.com/articles/field_descriptions.html">the nflfastR Field Descriptions website</a>
to learn about the output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_nflfastR_pbp(
  game_ids,
  dir = getOption("nflfastR.raw_directory", default = NULL),
  ...,
  decode = TRUE,
  rules = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_nflfastR_pbp_+3A_game_ids">game_ids</code></td>
<td>
<p>Vector of character ids or a data frame including the variable
<code>game_id</code> (see details for further information).</p>
</td></tr>
<tr><td><code id="build_nflfastR_pbp_+3A_dir">dir</code></td>
<td>
<p>Path to local directory (defaults to option &quot;nflfastR.raw_directory&quot;)
where nflfastR searches for raw game play-by-play data.
See <code><a href="#topic+save_raw_pbp">save_raw_pbp()</a></code> for additional information.</p>
</td></tr>
<tr><td><code id="build_nflfastR_pbp_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the scraping functions (for internal use)</p>
</td></tr>
<tr><td><code id="build_nflfastR_pbp_+3A_decode">decode</code></td>
<td>
<p>If <code>TRUE</code>, the function <code><a href="#topic+decode_player_ids">decode_player_ids()</a></code> will be executed.</p>
</td></tr>
<tr><td><code id="build_nflfastR_pbp_+3A_rules">rules</code></td>
<td>
<p>If <code>FALSE</code>, printing of the header and footer in the console output will be suppressed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To load valid game_ids please use the package function <code><a href="#topic+fast_scraper_schedules">fast_scraper_schedules()</a></code>.
</p>


<h3>Value</h3>

<p>An nflfastR play-by-play data frame like it can be loaded from <a href="https://github.com/nflverse/nflverse-data">https://github.com/nflverse/nflverse-data</a>.
</p>


<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see <a href="#topic+nflfastR">nflfastR</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Build nflfastR pbp for the 2018 and 2019 Super Bowls
try({# to avoid CRAN test problems
build_nflfastR_pbp(c("2018_21_NE_LA", "2019_21_SF_KC"))
})

# It is also possible to directly use the
# output of `fast_scraper_schedules` as input
try({# to avoid CRAN test problems
library(dplyr, warn.conflicts = FALSE)
fast_scraper_schedules(2020) %&gt;%
  slice_tail(n = 3) %&gt;%
  build_nflfastR_pbp()
 })



</code></pre>

<hr>
<h2 id='calculate_expected_points'>Compute expected points</h2><span id='topic+calculate_expected_points'></span>

<h3>Description</h3>

<p>for provided plays. Returns the data with
probabilities of each scoring event and EP added. The following columns
must be present: season, home_team, posteam, roof (coded as 'open',
'closed', or 'retractable'), half_seconds_remaining, yardline_100,
ydstogo, posteam_timeouts_remaining, defteam_timeouts_remaining
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_expected_points(pbp_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_expected_points_+3A_pbp_data">pbp_data</code></td>
<td>
<p>Play-by-play dataset to estimate expected points for.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes expected points for provided plays. Returns the data with
probabilities of each scoring event and EP added. The following columns
must be present:
</p>

<ul>
<li><p>season
</p>
</li>
<li><p>home_team
</p>
</li>
<li><p>posteam
</p>
</li>
<li><p>roof (coded as 'outdoors', 'dome', or 'open'/'closed'/NA (retractable))
</p>
</li>
<li><p>half_seconds_remaining
</p>
</li>
<li><p>yardline_100
</p>
</li>
<li><p>down
</p>
</li>
<li><p>ydstogo
</p>
</li>
<li><p>posteam_timeouts_remaining
</p>
</li>
<li><p>defteam_timeouts_remaining
</p>
</li></ul>



<h3>Value</h3>

<p>The original pbp_data with the following columns appended to it:
</p>

<dl>
<dt>ep</dt><dd><p>expected points.</p>
</dd>
<dt>no_score_prob</dt><dd><p>probability of no more scoring this half.</p>
</dd>
<dt>opp_fg_prob</dt><dd><p>probability next score opponent field goal this half.</p>
</dd>
<dt>opp_safety_prob</dt><dd><p>probability next score opponent safety  this half.</p>
</dd>
<dt>opp_td_prob</dt><dd><p>probability of next score opponent touchdown this half.</p>
</dd>
<dt>fg_prob</dt><dd><p>probability next score field goal this half.</p>
</dd>
<dt>safety_prob</dt><dd><p>probability next score safety this half.</p>
</dd>
<dt>td_prob</dt><dd><p>probability text score touchdown this half.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
library(dplyr)
data &lt;- tibble::tibble(
"season" = 1999:2019,
"home_team" = "SEA",
"posteam" = "SEA",
"roof" = "outdoors",
"half_seconds_remaining" = 1800,
"yardline_100" = c(rep(80, 17), rep(75, 4)),
"down" = 1,
"ydstogo" = 10,
"posteam_timeouts_remaining" = 3,
"defteam_timeouts_remaining" = 3
)

nflfastR::calculate_expected_points(data) %&gt;%
  dplyr::select(season, yardline_100, td_prob, ep)
})

</code></pre>

<hr>
<h2 id='calculate_player_stats'>Get Official Game Stats</h2><span id='topic+calculate_player_stats'></span>

<h3>Description</h3>

<p>Build columns that aggregate official passing, rushing, and receiving stats
either at the game level or at the level of the entire data frame passed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_player_stats(pbp, weekly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_player_stats_+3A_pbp">pbp</code></td>
<td>
<p>A Data frame of NFL play-by-play data typically loaded with
<code><a href="#topic+load_pbp">load_pbp()</a></code> or <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>. If the data doesn't include the variable
<code>qb_epa</code>, the function <code>add_qb_epa()</code> will be called to add it.</p>
</td></tr>
<tr><td><code id="calculate_player_stats_+3A_weekly">weekly</code></td>
<td>
<p>If <code>TRUE</code>, returns week-by-week stats, otherwise, stats
for the entire Data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame including the following columns (all ID columns are
decoded to the gsis ID format):
</p>

<dl>
<dt>player_id</dt><dd><p>ID of the player. Use this to join to other sources.</p>
</dd>
<dt>player_name</dt><dd><p>Name of the player</p>
</dd>
<dt>player_display_name</dt><dd><p>Full name of the player</p>
</dd>
<dt>position</dt><dd><p>Position of the player</p>
</dd>
<dt>position_group</dt><dd><p>Position group of the player</p>
</dd>
<dt>headshot_url</dt><dd><p>URL to a player headshot image</p>
</dd>
<dt>games</dt><dd><p>The number of games where the player recorded passing, rushing or receiving stats.</p>
</dd>
<dt>recent_team</dt><dd><p>Most recent team player appears in <code>pbp</code> with.</p>
</dd>
<dt>season</dt><dd><p>Season if <code>weekly</code> is <code>TRUE</code></p>
</dd>
<dt>week</dt><dd><p>Week if <code>weekly</code> is <code>TRUE</code></p>
</dd>
<dt>season_type</dt><dd><p><code>REG</code> or <code>POST</code> if <code>weekly</code> is <code>TRUE</code></p>
</dd>
<dt>opponent_team</dt><dd><p>The player's opponent team if <code>weekly</code> is <code>TRUE</code></p>
</dd>
<dt>completions</dt><dd><p>The number of completed passes.</p>
</dd>
<dt>attempts</dt><dd><p>The number of pass attempts as defined by the NFL.</p>
</dd>
<dt>passing_yards</dt><dd><p>Yards gained on pass plays.</p>
</dd>
<dt>passing_tds</dt><dd><p>The number of passing touchdowns.</p>
</dd>
<dt>interceptions</dt><dd><p>The number of interceptions thrown.</p>
</dd>
<dt>sacks</dt><dd><p>The Number of times sacked.</p>
</dd>
<dt>sack_yards</dt><dd><p>Yards lost on sack plays.</p>
</dd>
<dt>sack_fumbles</dt><dd><p>The number of sacks with a fumble.</p>
</dd>
<dt>sack_fumbles_lost</dt><dd><p>The number of sacks with a lost fumble.</p>
</dd>
<dt>passing_air_yards</dt><dd><p>Passing air yards (includes incomplete passes).</p>
</dd>
<dt>passing_yards_after_catch</dt><dd><p>Yards after the catch gained on plays in
which player was the passer (this is an unofficial stat and may differ slightly
between different sources).</p>
</dd>
<dt>passing_first_downs</dt><dd><p>First downs on pass attempts.</p>
</dd>
<dt>passing_epa</dt><dd><p>Total expected points added on pass attempts and sacks.
NOTE: this uses the variable <code>qb_epa</code>, which gives QB credit for EPA for up
to the point where a receiver lost a fumble after a completed catch and makes
EPA work more like passing yards on plays with fumbles.</p>
</dd>
<dt>passing_2pt_conversions</dt><dd><p>Two-point conversion passes.</p>
</dd>
<dt>pacr</dt><dd><p>Passing Air Conversion Ratio. PACR = <code>passing_yards</code> / <code>passing_air_yards</code></p>
</dd>
<dt>dakota</dt><dd><p>Adjusted EPA + CPOE composite based on coefficients which best predict adjusted EPA/play in the following year.</p>
</dd>
<dt>carries</dt><dd><p>The number of official rush attempts (incl. scrambles and kneel downs).
Rushes after a lateral reception don't count as carry.</p>
</dd>
<dt>rushing_yards</dt><dd><p>Yards gained when rushing with the ball (incl. scrambles and kneel downs).
Also includes yards gained after obtaining a lateral on a play that started
with a rushing attempt.</p>
</dd>
<dt>rushing_tds</dt><dd><p>The number of rushing touchdowns (incl. scrambles).
Also includes touchdowns after obtaining a lateral on a play that started
with a rushing attempt.</p>
</dd>
<dt>rushing_fumbles</dt><dd><p>The number of rushes with a fumble.</p>
</dd>
<dt>rushing_fumbles_lost</dt><dd><p>The number of rushes with a lost fumble.</p>
</dd>
<dt>rushing_first_downs</dt><dd><p>First downs on rush attempts (incl. scrambles).</p>
</dd>
<dt>rushing_epa</dt><dd><p>Expected points added on rush attempts (incl. scrambles and kneel downs).</p>
</dd>
<dt>rushing_2pt_conversions</dt><dd><p>Two-point conversion rushes</p>
</dd>
<dt>receptions</dt><dd><p>The number of pass receptions. Lateral receptions officially
don't count as reception.</p>
</dd>
<dt>targets</dt><dd><p>The number of pass plays where the player was the targeted receiver.</p>
</dd>
<dt>receiving_yards</dt><dd><p>Yards gained after a pass reception. Includes yards
gained after receiving a lateral on a play that started as a pass play.</p>
</dd>
<dt>receiving_tds</dt><dd><p>The number of touchdowns following a pass reception.
Also includes touchdowns after receiving a lateral on a play that started
as a pass play.</p>
</dd>
<dt>receiving_air_yards</dt><dd><p>Receiving air yards (incl. incomplete passes).</p>
</dd>
<dt>receiving_yards_after_catch</dt><dd><p>Yards after the catch gained on plays in
which player was receiver (this is an unofficial stat and may differ slightly
between different sources).</p>
</dd>
<dt>receiving_fumbles</dt><dd><p>The number of fumbles after a pass reception.</p>
</dd>
<dt>receiving_fumbles_lost</dt><dd><p>The number of fumbles lost after a pass reception.</p>
</dd>
<dt>receiving_2pt_conversions</dt><dd><p>Two-point conversion receptions</p>
</dd>
<dt>racr</dt><dd><p>Receiver Air Conversion Ratio. RACR = <code>receiving_yards</code> / <code>receiving_air_yards</code></p>
</dd>
<dt>target_share</dt><dd><p>The share of targets of the player in all targets of his team</p>
</dd>
<dt>air_yards_share</dt><dd><p>The share of receiving_air_yards of the player in all air_yards of his team</p>
</dd>
<dt>wopr</dt><dd><p>Weighted Opportunity Rating. WOPR = 1.5 × <code>target_share</code> + 0.7 × <code>air_yards_share</code></p>
</dd>
<dt>fantasy_points</dt><dd><p>Standard fantasy points.</p>
</dd>
<dt>fantasy_points_ppr</dt><dd><p>PPR fantasy points.</p>
</dd>
</dl>



<h3>See Also</h3>

<p>The function <code><a href="#topic+load_player_stats">load_player_stats()</a></code> and the corresponding examples
on <a href="https://www.nflfastr.com/articles/nflfastR.html#example-11-replicating-official-stats">the nflfastR website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
pbp &lt;- nflfastR::load_pbp(2020)

weekly &lt;- calculate_player_stats(pbp, weekly = TRUE)
dplyr::glimpse(weekly)

overall &lt;- calculate_player_stats(pbp, weekly = FALSE)
dplyr::glimpse(overall)
})

</code></pre>

<hr>
<h2 id='calculate_player_stats_def'>Get Official Game Stats on Defense</h2><span id='topic+calculate_player_stats_def'></span>

<h3>Description</h3>

<p>Build columns that aggregate official defense stats
either at the game level or at the level of the entire data frame passed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_player_stats_def(pbp, weekly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_player_stats_def_+3A_pbp">pbp</code></td>
<td>
<p>A Data frame of NFL play-by-play data typically loaded with
<code><a href="#topic+load_pbp">load_pbp()</a></code> or <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>. If the data doesn't include the variable
<code>qb_epa</code>, the function <code>add_qb_epa()</code> will be called to add it.</p>
</td></tr>
<tr><td><code id="calculate_player_stats_def_+3A_weekly">weekly</code></td>
<td>
<p>If <code>TRUE</code>, returns week-by-week stats, otherwise, stats
for the entire Data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of defensive player stats. See dictionary (# TODO)
</p>


<h3>See Also</h3>

<p>The function <code><a href="#topic+load_player_stats">load_player_stats()</a></code> and the corresponding examples
on <a href="https://www.nflfastr.com/articles/nflfastR.html#example-11-replicating-official-stats">the nflfastR website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
  pbp &lt;- nflfastR::load_pbp(2020)

  weekly &lt;- calculate_player_stats_def(pbp, weekly = TRUE)
  dplyr::glimpse(weekly)

  overall &lt;- calculate_player_stats_def(pbp, weekly = FALSE)
  dplyr::glimpse(overall)
})


</code></pre>

<hr>
<h2 id='calculate_player_stats_kicking'>Summarize Kicking Stats</h2><span id='topic+calculate_player_stats_kicking'></span>

<h3>Description</h3>

<p>Build columns that aggregate kicking stats at the game level.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_player_stats_kicking(pbp, weekly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_player_stats_kicking_+3A_pbp">pbp</code></td>
<td>
<p>A Data frame of NFL play-by-play data typically loaded with
<code><a href="#topic+load_pbp">load_pbp()</a></code> or <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>.</p>
</td></tr>
<tr><td><code id="calculate_player_stats_kicking_+3A_weekly">weekly</code></td>
<td>
<p>If <code>TRUE</code>, returns week-by-week stats, otherwise, stats for
the entire data frame in argument <code>pbp</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe of kicking stats
</p>


<h3>See Also</h3>

<p><a href="https://nflreadr.nflverse.com/reference/load_player_stats.html">https://nflreadr.nflverse.com/reference/load_player_stats.html</a> for the nflreadr function to download this from repo (<code>stat_type = "kicking"</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
    pbp &lt;- nflreadr::load_pbp(2021)
    weekly &lt;- calculate_player_stats_kicking(pbp, weekly = TRUE)
    dplyr::glimpse(weekly)

    overall &lt;- calculate_player_stats_kicking(pbp, weekly = FALSE)
    dplyr::glimpse(overall)
})


</code></pre>

<hr>
<h2 id='calculate_series_conversion_rates'>Compute Series Conversion Information from Play by Play</h2><span id='topic+calculate_series_conversion_rates'></span>

<h3>Description</h3>

<p>A &quot;Series&quot; begins on a 1st and 10 and each team attempts to either earn
a new 1st down (on offense) or prevent the offense from converting a new
1st down (on defense). Series conversion rate represents how many series
have been either converted to a new 1st down or ended in a touchdown.
This function computes series conversion rates on offense and defense from
nflverse play-by-play data along with other series results.
The function automatically removes series that ended in a QB kneel down.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_series_conversion_rates(pbp, weekly = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_series_conversion_rates_+3A_pbp">pbp</code></td>
<td>
<p>Play-by-play data as returned by <code><a href="#topic+load_pbp">load_pbp()</a></code>, <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>, or
<code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="calculate_series_conversion_rates_+3A_weekly">weekly</code></td>
<td>
<p>If <code>TRUE</code>, returns week-by-week stats, otherwise,
season-by-season stats in argument <code>pbp</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of series information including the following columns:
</p>

<dl>
<dt>season</dt><dd><p>The NFL season</p>
</dd>
<dt>team</dt><dd><p>NFL team abbreviation</p>
</dd>
<dt>week</dt><dd><p>Week if <code>weekly</code> is <code>TRUE</code></p>
</dd>
<dt>off_n</dt><dd><p>The number of series the offense played (excludes QB kneel
downs, kickoffs, extra point/two point conversion attempts, non-plays, and
plays that do not list a &quot;posteam&quot;)</p>
</dd>
<dt>off_scr</dt><dd><p>The rate at which a series ended in either new 1st down or
touchdown while the offense was on the field</p>
</dd>
<dt>off_scr_1st</dt><dd><p>The rate at which an offense earned a 1st down
or scored a touchdown on 1st down</p>
</dd>
<dt>off_scr_2nd</dt><dd><p>The rate at which an offense earned a 1st down
or scored a touchdown on 2nd down</p>
</dd>
<dt>off_scr_3rd</dt><dd><p>The rate at which an offense earned a 1st down
or scored a touchdown on 3rd down</p>
</dd>
<dt>off_scr_4th</dt><dd><p>The rate at which an offense earned a 1st down
or scored a touchdown on 4th down</p>
</dd>
<dt>off_1st</dt><dd><p>The rate of series that ended in a new 1st down while the
offense was on the field (does not include offensive touchdown)</p>
</dd>
<dt>off_td</dt><dd><p>The rate of series that ended in an offensive touchdown while the
offense was on the field</p>
</dd>
<dt>off_fg</dt><dd><p>The rate of series that ended in a field goal attempt while the
offense was on the field</p>
</dd>
<dt>off_punt</dt><dd><p>The rate of series that ended in a punt while the
offense was on the field</p>
</dd>
<dt>off_to</dt><dd><p>The rate of series that ended in a turnover (including on downs), in an
opponent score, or at the end of half (or game) while the
offense was on the field</p>
</dd>
<dt>def_n</dt><dd><p>The number of series the defense played (excludes QB kneel
downs, kickoffs, extra point/two point conversion attempts, non-plays, and
plays that do not list a &quot;posteam&quot;)</p>
</dd>
<dt>def_scr</dt><dd><p>The rate at which a series ended in either new 1st down or
touchdown while the defense was on the field</p>
</dd>
<dt>def_scr_1st</dt><dd><p>The rate at which a defense allowed a
1st down or touchdown on 1st down</p>
</dd>
<dt>def_scr_2nd</dt><dd><p>The rate at which a defense allowed a
1st down or touchdown on 2nd down</p>
</dd>
<dt>def_scr_3rd</dt><dd><p>The rate at which a defense allowed a
1st down or touchdown on 3rd down</p>
</dd>
<dt>def_scr_4th</dt><dd><p>The rate at which a defense allowed a
1st down or touchdown on 4th down</p>
</dd>
<dt>def_1st</dt><dd><p>The rate of series that ended in a new 1st down while the
defense was on the field (does not include offensive touchdown)</p>
</dd>
<dt>def_td</dt><dd><p>The rate of series that ended in an offensive touchdown while the
defense was on the field</p>
</dd>
<dt>def_fg</dt><dd><p>The rate of series that ended in a field goal attempt while the
defense was on the field</p>
</dd>
<dt>def_punt</dt><dd><p>The rate of series that ended in a punt while the
defense was on the field</p>
</dd>
<dt>def_to</dt><dd><p>The rate of series that ended in a turnover (including on downs), in an
opponent score, or at the end of half (or game) while the
defense was on the field</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
  pbp &lt;- nflfastR::load_pbp(2021)

  weekly &lt;- calculate_series_conversion_rates(pbp, weekly = TRUE)
  dplyr::glimpse(weekly)

  overall &lt;- calculate_series_conversion_rates(pbp, weekly = FALSE)
  dplyr::glimpse(overall)
})

</code></pre>

<hr>
<h2 id='calculate_standings'>Compute Division Standings and Conference Seeds from Play by Play</h2><span id='topic+calculate_standings'></span>

<h3>Description</h3>

<p>This function calculates division standings as well as playoff
seeds per conference based on either nflverse play-by-play data or nflverse
schedule data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_standings(
  nflverse_object,
  tiebreaker_depth = 3,
  playoff_seeds = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_standings_+3A_nflverse_object">nflverse_object</code></td>
<td>
<p>Data object of class <code>nflverse_data</code>. Either schedules
as returned by <code><a href="#topic+fast_scraper_schedules">fast_scraper_schedules()</a></code> or <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules()</a></code>.
Or play-by-play data as returned by <code><a href="#topic+load_pbp">load_pbp()</a></code>, <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>, or
<code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="calculate_standings_+3A_tiebreaker_depth">tiebreaker_depth</code></td>
<td>
<p>A single value equal to 1, 2, or 3. The default is 3. The
value controls the depth of tiebreakers that shall be applied. The deepest
currently implemented tiebreaker is strength of schedule. The following
values are valid:
</p>

<dl>
<dt>tiebreaker_depth = 1</dt><dd><p>Break all ties with a coinflip. Fastest variant.</p>
</dd>
<dt>tiebreaker_depth = 2</dt><dd><p>Apply head-to-head and division win percentage tiebreakers. Random if still tied.</p>
</dd>
<dt>tiebreaker_depth = 3</dt><dd><p>Apply all tiebreakers through strength of schedule. Random if still tied.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="calculate_standings_+3A_playoff_seeds">playoff_seeds</code></td>
<td>
<p>Number of playoff teams per conference. If <code>NULL</code> (the
default), the function will try to split <code>nflverse_object</code> into seasons prior
2020 (6 seeds) and 2020ff (7 seeds). If set to a numeric, it will be used
for all seasons in <code>nflverse_object</code>!</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with NFL regular season standings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
  # load nflverse data both schedules and pbp
  scheds &lt;- fast_scraper_schedules(2014)
  pbp &lt;- load_pbp(c(2018, 2021))

  # calculate standings based on pbp
  calculate_standings(pbp)

  # calculate standings based on schedules
  calculate_standings(scheds)
})

</code></pre>

<hr>
<h2 id='calculate_win_probability'>Compute win probability</h2><span id='topic+calculate_win_probability'></span>

<h3>Description</h3>

<p>for provided plays. Returns the data with
probabilities of winning the game. The following columns
must be present: receive_h2_ko (1 if game is in 1st half and possession
team will receive 2nd half kickoff, 0 otherwise),
home_team, posteam, half_seconds_remaining, game_seconds_remaining,
spread_line (how many points home team was favored by), down, ydstogo,
yardline_100, posteam_timeouts_remaining, defteam_timeouts_remaining
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculate_win_probability(pbp_data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculate_win_probability_+3A_pbp_data">pbp_data</code></td>
<td>
<p>Play-by-play dataset to estimate win probability for.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Computes win probability for provided plays. Returns the data with
spread and non-spread-adjusted win probabilities. The following columns
must be present:
</p>

<ul>
<li><p>receive_2h_ko (1 if game is in 1st half and possession team will receive 2nd half kickoff, 0 otherwise)
</p>
</li>
<li><p>score_differential
</p>
</li>
<li><p>home_team
</p>
</li>
<li><p>posteam
</p>
</li>
<li><p>half_seconds_remaining
</p>
</li>
<li><p>game_seconds_remaining
</p>
</li>
<li><p>spread_line (how many points home team was favored by)
</p>
</li>
<li><p>down
</p>
</li>
<li><p>ydstogo
</p>
</li>
<li><p>yardline_100
</p>
</li>
<li><p>posteam_timeouts_remaining
</p>
</li>
<li><p>defteam_timeouts_remaining
</p>
</li></ul>



<h3>Value</h3>

<p>The original pbp_data with the following columns appended to it:
</p>

<dl>
<dt>wp</dt><dd><p>win probability.</p>
</dd>
<dt>vegas_wp</dt><dd><p>win probability taking into account pre-game spread.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
library(dplyr)
data &lt;- tibble::tibble(
"receive_2h_ko" = 0,
"home_team" = "SEA",
"posteam" = "SEA",
"score_differential" = 0,
"half_seconds_remaining" = 1800,
"game_seconds_remaining" = 3600,
"spread_line" = c(1, 3, 4, 7, 14),
"down" = 1,
"ydstogo" = 10,
"yardline_100" = 75,
"posteam_timeouts_remaining" = 3,
"defteam_timeouts_remaining" = 3
)

nflfastR::calculate_win_probability(data) %&gt;%
  dplyr::select(spread_line, wp, vegas_wp)
})

</code></pre>

<hr>
<h2 id='clean_pbp'>Clean Play by Play Data</h2><span id='topic+clean_pbp'></span>

<h3>Description</h3>

<p>Clean Play by Play Data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clean_pbp(pbp, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="clean_pbp_+3A_pbp">pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="clean_pbp_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Build columns that capture what happens on all plays, including
penalties, using string extraction from play description.
Loosely based on Ben's nflfastR guide (<a href="https://www.nflfastr.com/articles/beginners_guide.html">https://www.nflfastr.com/articles/beginners_guide.html</a>)
but updated to work with the RS data, which has a different player format in
the play description; e.g. 24-M.Lynch instead of M.Lynch.
The function also standardizes team abbreviations so that, for example,
the Chargers are always represented by 'LAC' regardless of which year it was.
Starting in 2022, play-by-play data was missing gsis player IDs of rookies.
This functions tries to fix as many as possible.
</p>


<h3>Value</h3>

<p>The input Data Frame of the parameter 'pbp' with the following columns
added:
</p>

<dl>
<dt>success</dt><dd><p>Binary indicator wheter epa &gt; 0 in the given play. </p>
</dd>
<dt>passer</dt><dd><p>Name of the dropback player (scrambles included) including plays with penalties.</p>
</dd>
<dt>passer_jersey_number</dt><dd><p>Jersey number of the passer.</p>
</dd>
<dt>rusher</dt><dd><p>Name of the rusher (no scrambles) including plays with penalties.</p>
</dd>
<dt>rusher_jersey_number</dt><dd><p>Jersey number of the rusher.</p>
</dd>
<dt>receiver</dt><dd><p>Name of the receiver including plays with penalties.</p>
</dd>
<dt>receiver_jersey_number</dt><dd><p>Jersey number of the receiver.</p>
</dd>
<dt>pass</dt><dd><p>Binary indicator if the play was a pass play (sacks and scrambles included).</p>
</dd>
<dt>rush</dt><dd><p>Binary indicator if the play was a rushing play.</p>
</dd>
<dt>special</dt><dd><p>Binary indicator if the play was a special teams play.</p>
</dd>
<dt>first_down</dt><dd><p>Binary indicator if the play ended in a first down.</p>
</dd>
<dt>aborted_play</dt><dd><p>Binary indicator if the play description indicates &quot;Aborted&quot;.</p>
</dd>
<dt>play</dt><dd><p>Binary indicator: 1 if the play was a 'normal' play (including penalties), 0 otherwise.</p>
</dd>
<dt>passer_id</dt><dd><p>ID of the player in the 'passer' column.</p>
</dd>
<dt>rusher_id</dt><dd><p>ID of the player in the 'rusher' column.</p>
</dd>
<dt>receiver_id</dt><dd><p>ID of the player in the 'receiver' column.</p>
</dd>
<dt>name</dt><dd><p>Name of the 'passer' if it is not 'NA', or name of the 'rusher' otherwise.</p>
</dd>
<dt>fantasy</dt><dd><p>Name of the rusher on rush plays or receiver on pass plays.</p>
</dd>
<dt>fantasy_id</dt><dd><p>ID of the rusher on rush plays or receiver on pass plays.</p>
</dd>
<dt>fantasy_player_name</dt><dd><p>Name of the rusher on rush plays or receiver on pass plays (from official stats).</p>
</dd>
<dt>fantasy_player_id</dt><dd><p>ID of the rusher on rush plays or receiver on pass plays (from official stats).</p>
</dd>
<dt>jersey_number</dt><dd><p>Jersey number of the player listed in the 'name' column.</p>
</dd>
<dt>id</dt><dd><p>ID of the player in the 'name' column.</p>
</dd>
<dt>out_of_bounds</dt><dd><p>= 1 if play description contains &quot;ran ob&quot;, &quot;pushed ob&quot;, or &quot;sacked ob&quot;; = 0 otherwise.</p>
</dd>
<dt>home_opening_kickoff</dt><dd><p>= 1 if the home team received the opening kickoff, 0 otherwise.</p>
</dd>
</dl>



<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see <a href="#topic+nflfastR">nflfastR</a>.
</p>

<hr>
<h2 id='decode_player_ids'>Decode the player IDs in nflfastR play-by-play data</h2><span id='topic+decode_player_ids'></span>

<h3>Description</h3>

<p>Takes all columns ending with <code>'player_id'</code> as well as the
variables <code>'passer_id'</code>, <code>'rusher_id'</code>, <code>'fantasy_id'</code>,
<code>'receiver_id'</code>, and <code>'id'</code> of an nflfastR play-by-play data set
and decodes the player IDs to the commonly known GSIS ID format 00-00xxxxx.
</p>
<p>The function uses by default the high efficient <a href="gsisdecoder.html#topic+decode_ids">decode_ids</a>
of the package <a href="https://cran.r-project.org/package=gsisdecoder"><code>gsisdecoder</code></a>.
In the unlikely event that there is a problem with this function, an nflfastR
internal decoder can be used with the option <code>fast = FALSE</code>.
</p>
<p>The 2022 play by play data introduced new player IDs that can't be decoded
with gsisdecoder. In that case, IDs are joined through <a href="nflreadr.html#topic+load_players">nflreadr::load_players</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decode_player_ids(pbp, ..., fast = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decode_player_ids_+3A_pbp">pbp</code></td>
<td>
<p>is a Data frame of play-by-play data scraped using <code><a href="#topic+fast_scraper">fast_scraper()</a></code>.</p>
</td></tr>
<tr><td><code id="decode_player_ids_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to a message function (for internal use).</p>
</td></tr>
<tr><td><code id="decode_player_ids_+3A_fast">fast</code></td>
<td>
<p>If <code>TRUE</code> the IDs will be decoded with the high efficient
function <a href="gsisdecoder.html#topic+decode_ids">decode_ids</a>. If <code>FALSE</code> an nflfastR internal
function will be used for decoding (it is generally not recommended to do this,
unless there is a problem with <a href="gsisdecoder.html#topic+decode_ids">decode_ids</a>
which can take several days to fix on CRAN.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The input data frame of the parameter <code>pbp</code> with decoded player IDs.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Decode data frame consisting of some names and ids
decode_player_ids(data.frame(
  name = c("P.Mahomes", "B.Baldwin", "P.Mahomes", "S.Carl", "J.Jones"),
  id = c(
    "32013030-2d30-3033-3338-3733fa30c4fa",
    NA_character_,
    "00-0033873",
    NA_character_,
    "32013030-2d30-3032-3739-3434d4d3846d"
  )
))

</code></pre>

<hr>
<h2 id='fast_scraper'>Get NFL Play by Play Data</h2><span id='topic+fast_scraper'></span>

<h3>Description</h3>

<p>Load and parse NFL play-by-play data and add all of the original
nflfastR variables. As nflfastR now provides multiple functions which add
information to the output of this function, it is recommended to use
<code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_scraper(
  game_ids,
  dir = getOption("nflfastR.raw_directory", default = NULL),
  ...,
  in_builder = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fast_scraper_+3A_game_ids">game_ids</code></td>
<td>
<p>Vector of character ids or a data frame including the variable
<code>game_id</code> (see details for further information).</p>
</td></tr>
<tr><td><code id="fast_scraper_+3A_dir">dir</code></td>
<td>
<p>Path to local directory (defaults to option &quot;nflfastR.raw_directory&quot;)
where nflfastR searches for raw game play-by-play data.
See <code><a href="#topic+save_raw_pbp">save_raw_pbp()</a></code> for additional information.</p>
</td></tr>
<tr><td><code id="fast_scraper_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to the scraping functions (for internal use)</p>
</td></tr>
<tr><td><code id="fast_scraper_+3A_in_builder">in_builder</code></td>
<td>
<p>If <code>TRUE</code>, the final message will be suppressed (for usage inside of <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp</a></code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To load valid game_ids please use the package function
<code><a href="#topic+fast_scraper_schedules">fast_scraper_schedules</a></code> (the function can directly handle the
output of that function)
</p>


<h3>Value</h3>

<p>Data frame where each individual row represents a single play for
all passed game_ids containing the following
detailed information (description partly extracted from nflscrapR):
</p>

<dl>
<dt>play_id</dt><dd><p>Numeric play id that when used with game_id and drive provides the unique identifier for a single play.</p>
</dd>
<dt>game_id</dt><dd><p>Ten digit identifier for NFL game.</p>
</dd>
<dt>old_game_id</dt><dd><p>Legacy NFL game ID.</p>
</dd>
<dt>home_team</dt><dd><p>String abbreviation for the home team.</p>
</dd>
<dt>away_team</dt><dd><p>String abbreviation for the away team.</p>
</dd>
<dt>season_type</dt><dd><p>'REG' or 'POST' indicating if the game belongs to regular or post season.</p>
</dd>
<dt>week</dt><dd><p>Season week.</p>
</dd>
<dt>posteam</dt><dd><p>String abbreviation for the team with possession.</p>
</dd>
<dt>posteam_type</dt><dd><p>String indicating whether the posteam team is home or away.</p>
</dd>
<dt>defteam</dt><dd><p>String abbreviation for the team on defense.</p>
</dd>
<dt>side_of_field</dt><dd><p>String abbreviation for which team's side of the field the team with possession is currently on.</p>
</dd>
<dt>yardline_100</dt><dd><p>Numeric distance in the number of yards from the opponent's endzone for the posteam.</p>
</dd>
<dt>game_date</dt><dd><p>Date of the game.</p>
</dd>
<dt>quarter_seconds_remaining</dt><dd><p>Numeric seconds remaining in the quarter.</p>
</dd>
<dt>half_seconds_remaining</dt><dd><p>Numeric seconds remaining in the half.</p>
</dd>
<dt>game_seconds_remaining</dt><dd><p>Numeric seconds remaining in the game.</p>
</dd>
<dt>game_half</dt><dd><p>String indicating which half the play is in, either Half1, Half2, or Overtime.</p>
</dd>
<dt>quarter_end</dt><dd><p>Binary indicator for whether or not the row of the data is marking the end of a quarter.</p>
</dd>
<dt>drive</dt><dd><p>Numeric drive number in the game.</p>
</dd>
<dt>sp</dt><dd><p>Binary indicator for whether or not a score occurred on the play.</p>
</dd>
<dt>qtr</dt><dd><p>Quarter of the game (5 is overtime).</p>
</dd>
<dt>down</dt><dd><p>The down for the given play.</p>
</dd>
<dt>goal_to_go</dt><dd><p>Binary indicator for whether or not the posteam is in a goal down situation.</p>
</dd>
<dt>time</dt><dd><p>Time at start of play provided in string format as minutes:seconds remaining in the quarter.</p>
</dd>
<dt>yrdln</dt><dd><p>String indicating the current field position for a given play.</p>
</dd>
<dt>ydstogo</dt><dd><p>Numeric yards in distance from either the first down marker or the endzone in goal down situations.</p>
</dd>
<dt>ydsnet</dt><dd><p>Numeric value for total yards gained on the given drive.</p>
</dd>
<dt>desc</dt><dd><p>Detailed string description for the given play.</p>
</dd>
<dt>play_type</dt><dd><p>String indicating the type of play: pass (includes sacks), run (includes scrambles), punt, field_goal, kickoff, extra_point, qb_kneel, qb_spike, no_play (timeouts and penalties), and missing for rows indicating end of play.</p>
</dd>
<dt>yards_gained</dt><dd><p>Numeric yards gained (or lost) by the possessing team, excluding yards gained via fumble recoveries and laterals.</p>
</dd>
<dt>shotgun</dt><dd><p>Binary indicator for whether or not the play was in shotgun formation.</p>
</dd>
<dt>no_huddle</dt><dd><p>Binary indicator for whether or not the play was in no_huddle formation.</p>
</dd>
<dt>qb_dropback</dt><dd><p>Binary indicator for whether or not the QB dropped back on the play (pass attempt, sack, or scrambled).</p>
</dd>
<dt>qb_kneel</dt><dd><p>Binary indicator for whether or not the QB took a knee.</p>
</dd>
<dt>qb_spike</dt><dd><p>Binary indicator for whether or not the QB spiked the ball.</p>
</dd>
<dt>qb_scramble</dt><dd><p>Binary indicator for whether or not the QB scrambled.</p>
</dd>
<dt>pass_length</dt><dd><p>String indicator for pass length: short or deep.</p>
</dd>
<dt>pass_location</dt><dd><p>String indicator for pass location: left, middle, or right.</p>
</dd>
<dt>air_yards</dt><dd><p>Numeric value for distance in yards perpendicular to the line of scrimmage at where the targeted receiver either caught or didn't catch the ball.</p>
</dd>
<dt>yards_after_catch</dt><dd><p>Numeric value for distance in yards perpendicular to the yard line where the receiver made the reception to where the play ended.</p>
</dd>
<dt>run_location</dt><dd><p>String indicator for location of run: left, middle, or right.</p>
</dd>
<dt>run_gap</dt><dd><p>String indicator for line gap of run: end, guard, or tackle</p>
</dd>
<dt>field_goal_result</dt><dd><p>String indicator for result of field goal attempt: made, missed, or blocked.</p>
</dd>
<dt>kick_distance</dt><dd><p>Numeric distance in yards for kickoffs, field goals, and punts.</p>
</dd>
<dt>extra_point_result</dt><dd><p>String indicator for the result of the extra point attempt: good, failed, blocked, safety (touchback in defensive endzone is 1 point apparently), or aborted.</p>
</dd>
<dt>two_point_conv_result</dt><dd><p>String indicator for result of two point conversion attempt: success, failure, safety (touchback in defensive endzone is 1 point apparently), or return.</p>
</dd>
<dt>home_timeouts_remaining</dt><dd><p>Numeric timeouts remaining in the half for the home team.</p>
</dd>
<dt>away_timeouts_remaining</dt><dd><p>Numeric timeouts remaining in the half for the away team.</p>
</dd>
<dt>timeout</dt><dd><p>Binary indicator for whether or not a timeout was called by either team.</p>
</dd>
<dt>timeout_team</dt><dd><p>String abbreviation for which team called the timeout.</p>
</dd>
<dt>td_team</dt><dd><p>String abbreviation for which team scored the touchdown.</p>
</dd>
<dt>td_player_name</dt><dd><p>String name of the player who scored a touchdown.</p>
</dd>
<dt>td_player_id</dt><dd><p>Unique identifier of the player who scored a touchdown.</p>
</dd>
<dt>posteam_timeouts_remaining</dt><dd><p>Number of timeouts remaining for the possession team.</p>
</dd>
<dt>defteam_timeouts_remaining</dt><dd><p>Number of timeouts remaining for the team on defense.</p>
</dd>
<dt>total_home_score</dt><dd><p>Score for the home team at the end of the play.</p>
</dd>
<dt>total_away_score</dt><dd><p>Score for the away team at the end of the play.</p>
</dd>
<dt>posteam_score</dt><dd><p>Score the posteam at the start of the play.</p>
</dd>
<dt>defteam_score</dt><dd><p>Score the defteam at the start of the play.</p>
</dd>
<dt>score_differential</dt><dd><p>Score differential between the posteam and defteam at the start of the play.</p>
</dd>
<dt>posteam_score_post</dt><dd><p>Score for the posteam at the end of the play.</p>
</dd>
<dt>defteam_score_post</dt><dd><p>Score for the defteam at the end of the play.</p>
</dd>
<dt>score_differential_post</dt><dd><p>Score differential between the posteam and defteam at the end of the play.</p>
</dd>
<dt>no_score_prob</dt><dd><p>Predicted probability of no score occurring for the rest of the half based on the expected points model.</p>
</dd>
<dt>opp_fg_prob</dt><dd><p>Predicted probability of the defteam scoring a FG next.</p>
</dd>
<dt>opp_safety_prob</dt><dd><p>Predicted probability of the defteam scoring a safety next.</p>
</dd>
<dt>opp_td_prob</dt><dd><p>Predicted probability of the defteam scoring a TD next.</p>
</dd>
<dt>fg_prob</dt><dd><p>Predicted probability of the posteam scoring a FG next.</p>
</dd>
<dt>safety_prob</dt><dd><p>Predicted probability of the posteam scoring a safety next.</p>
</dd>
<dt>td_prob</dt><dd><p>Predicted probability of the posteam scoring a TD next.</p>
</dd>
<dt>extra_point_prob</dt><dd><p>Predicted probability of the posteam scoring an extra point.</p>
</dd>
<dt>two_point_conversion_prob</dt><dd><p>Predicted probability of the posteam scoring the two point conversion.</p>
</dd>
<dt>ep</dt><dd><p>Using the scoring event probabilities, the estimated expected points with respect to the possession team for the given play.</p>
</dd>
<dt>epa</dt><dd><p>Expected points added (EPA) by the posteam for the given play.</p>
</dd>
<dt>total_home_epa</dt><dd><p>Cumulative total EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_epa</dt><dd><p>Cumulative total EPA for the away team in the game so far.</p>
</dd>
<dt>total_home_rush_epa</dt><dd><p>Cumulative total rushing EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_rush_epa</dt><dd><p>Cumulative total rushing EPA for the away team in the game so far.</p>
</dd>
<dt>total_home_pass_epa</dt><dd><p>Cumulative total passing EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_pass_epa</dt><dd><p>Cumulative total passing EPA for the away team in the game so far.</p>
</dd>
<dt>air_epa</dt><dd><p>EPA from the air yards alone. For completions this represents the actual value provided through the air. For incompletions this represents the hypothetical value that could've been added through the air if the pass was completed.</p>
</dd>
<dt>yac_epa</dt><dd><p>EPA from the yards after catch alone. For completions this represents the actual value provided after the catch. For incompletions this represents the difference between the hypothetical air_epa and the play's raw observed EPA (how much the incomplete pass cost the posteam).</p>
</dd>
<dt>comp_air_epa</dt><dd><p>EPA from the air yards alone only for completions.</p>
</dd>
<dt>comp_yac_epa</dt><dd><p>EPA from the yards after catch alone only for completions.</p>
</dd>
<dt>total_home_comp_air_epa</dt><dd><p>Cumulative total completions air EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_comp_air_epa</dt><dd><p>Cumulative total completions air EPA for the away team in the game so far.</p>
</dd>
<dt>total_home_comp_yac_epa</dt><dd><p>Cumulative total completions yac EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_comp_yac_epa</dt><dd><p>Cumulative total completions yac EPA for the away team in the game so far.</p>
</dd>
<dt>total_home_raw_air_epa</dt><dd><p>Cumulative total raw air EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_raw_air_epa</dt><dd><p>Cumulative total raw air EPA for the away team in the game so far.</p>
</dd>
<dt>total_home_raw_yac_epa</dt><dd><p>Cumulative total raw yac EPA for the home team in the game so far.</p>
</dd>
<dt>total_away_raw_yac_epa</dt><dd><p>Cumulative total raw yac EPA for the away team in the game so far.</p>
</dd>
<dt>wp</dt><dd><p>Estimated win probabiity for the posteam given the current situation at the start of the given play.</p>
</dd>
<dt>def_wp</dt><dd><p>Estimated win probability for the defteam.</p>
</dd>
<dt>home_wp</dt><dd><p>Estimated win probability for the home team.</p>
</dd>
<dt>away_wp</dt><dd><p>Estimated win probability for the away team.</p>
</dd>
<dt>wpa</dt><dd><p>Win probability added (WPA) for the posteam.</p>
</dd>
<dt>vegas_wpa</dt><dd><p>Win probability added (WPA) for the posteam: spread_adjusted model.</p>
</dd>
<dt>vegas_home_wpa</dt><dd><p>Win probability added (WPA) for the home team: spread_adjusted model.</p>
</dd>
<dt>home_wp_post</dt><dd><p>Estimated win probability for the home team at the end of the play.</p>
</dd>
<dt>away_wp_post</dt><dd><p>Estimated win probability for the away team at the end of the play.</p>
</dd>
<dt>vegas_wp</dt><dd><p>Estimated win probabiity for the posteam given the current situation at the start of the given play, incorporating pre-game Vegas line.</p>
</dd>
<dt>vegas_home_wp</dt><dd><p>Estimated win probability for the home team incorporating pre-game Vegas line.</p>
</dd>
<dt>total_home_rush_wpa</dt><dd><p>Cumulative total rushing WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_rush_wpa</dt><dd><p>Cumulative total rushing WPA for the away team in the game so far.</p>
</dd>
<dt>total_home_pass_wpa</dt><dd><p>Cumulative total passing WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_pass_wpa</dt><dd><p>Cumulative total passing WPA for the away team in the game so far.</p>
</dd>
<dt>air_wpa</dt><dd><p>WPA through the air (same logic as air_epa).</p>
</dd>
<dt>yac_wpa</dt><dd><p>WPA from yards after the catch (same logic as yac_epa).</p>
</dd>
<dt>comp_air_wpa</dt><dd><p>The air_wpa for completions only.</p>
</dd>
<dt>comp_yac_wpa</dt><dd><p>The yac_wpa for completions only.</p>
</dd>
<dt>total_home_comp_air_wpa</dt><dd><p>Cumulative total completions air WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_comp_air_wpa</dt><dd><p>Cumulative total completions air WPA for the away team in the game so far.</p>
</dd>
<dt>total_home_comp_yac_wpa</dt><dd><p>Cumulative total completions yac WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_comp_yac_wpa</dt><dd><p>Cumulative total completions yac WPA for the away team in the game so far.</p>
</dd>
<dt>total_home_raw_air_wpa</dt><dd><p>Cumulative total raw air WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_raw_air_wpa</dt><dd><p>Cumulative total raw air WPA for the away team in the game so far.</p>
</dd>
<dt>total_home_raw_yac_wpa</dt><dd><p>Cumulative total raw yac WPA for the home team in the game so far.</p>
</dd>
<dt>total_away_raw_yac_wpa</dt><dd><p>Cumulative total raw yac WPA for the away team in the game so far.</p>
</dd>
<dt>punt_blocked</dt><dd><p>Binary indicator for if the punt was blocked.</p>
</dd>
<dt>first_down_rush</dt><dd><p>Binary indicator for if a running play converted the first down.</p>
</dd>
<dt>first_down_pass</dt><dd><p>Binary indicator for if a passing play converted the first down.</p>
</dd>
<dt>first_down_penalty</dt><dd><p>Binary indicator for if a penalty converted the first down.</p>
</dd>
<dt>third_down_converted</dt><dd><p>Binary indicator for if the first down was converted on third down.</p>
</dd>
<dt>third_down_failed</dt><dd><p>Binary indicator for if the posteam failed to convert first down on third down.</p>
</dd>
<dt>fourth_down_converted</dt><dd><p>Binary indicator for if the first down was converted on fourth down.</p>
</dd>
<dt>fourth_down_failed</dt><dd><p>Binary indicator for if the posteam failed to convert first down on fourth down.</p>
</dd>
<dt>incomplete_pass</dt><dd><p>Binary indicator for if the pass was incomplete.</p>
</dd>
<dt>touchback</dt><dd><p>Binary indicator for if a touchback occurred on the play.</p>
</dd>
<dt>interception</dt><dd><p>Binary indicator for if the pass was intercepted.</p>
</dd>
<dt>punt_inside_twenty</dt><dd><p>Binary indicator for if the punt ended inside the twenty yard line.</p>
</dd>
<dt>punt_in_endzone</dt><dd><p>Binary indicator for if the punt was in the endzone.</p>
</dd>
<dt>punt_out_of_bounds</dt><dd><p>Binary indicator for if the punt went out of bounds.</p>
</dd>
<dt>punt_downed</dt><dd><p>Binary indicator for if the punt was downed.</p>
</dd>
<dt>punt_fair_catch</dt><dd><p>Binary indicator for if the punt was caught with a fair catch.</p>
</dd>
<dt>kickoff_inside_twenty</dt><dd><p>Binary indicator for if the kickoff ended inside the twenty yard line.</p>
</dd>
<dt>kickoff_in_endzone</dt><dd><p>Binary indicator for if the kickoff was in the endzone.</p>
</dd>
<dt>kickoff_out_of_bounds</dt><dd><p>Binary indicator for if the kickoff went out of bounds.</p>
</dd>
<dt>kickoff_downed</dt><dd><p>Binary indicator for if the kickoff was downed.</p>
</dd>
<dt>kickoff_fair_catch</dt><dd><p>Binary indicator for if the kickoff was caught with a fair catch.</p>
</dd>
<dt>fumble_forced</dt><dd><p>Binary indicator for if the fumble was forced.</p>
</dd>
<dt>fumble_not_forced</dt><dd><p>Binary indicator for if the fumble was not forced.</p>
</dd>
<dt>fumble_out_of_bounds</dt><dd><p>Binary indicator for if the fumble went out of bounds.</p>
</dd>
<dt>solo_tackle</dt><dd><p>Binary indicator if the play had a solo tackle (could be multiple due to fumbles).</p>
</dd>
<dt>safety</dt><dd><p>Binary indicator for whether or not a safety occurred.</p>
</dd>
<dt>penalty</dt><dd><p>Binary indicator for whether or not a penalty occurred.</p>
</dd>
<dt>tackled_for_loss</dt><dd><p>Binary indicator for whether or not a tackle for loss on a run play occurred.</p>
</dd>
<dt>fumble_lost</dt><dd><p>Binary indicator for if the fumble was lost.</p>
</dd>
<dt>own_kickoff_recovery</dt><dd><p>Binary indicator for if the kicking team recovered the kickoff.</p>
</dd>
<dt>own_kickoff_recovery_td</dt><dd><p>Binary indicator for if the kicking team recovered the kickoff and scored a TD.</p>
</dd>
<dt>qb_hit</dt><dd><p>Binary indicator if the QB was hit on the play.</p>
</dd>
<dt>rush_attempt</dt><dd><p>Binary indicator for if the play was a run.</p>
</dd>
<dt>pass_attempt</dt><dd><p>Binary indicator for if the play was a pass attempt (includes sacks).</p>
</dd>
<dt>sack</dt><dd><p>Binary indicator for if the play ended in a sack.</p>
</dd>
<dt>touchdown</dt><dd><p>Binary indicator for if the play resulted in a TD.</p>
</dd>
<dt>pass_touchdown</dt><dd><p>Binary indicator for if the play resulted in a passing TD.</p>
</dd>
<dt>rush_touchdown</dt><dd><p>Binary indicator for if the play resulted in a rushing TD.</p>
</dd>
<dt>return_touchdown</dt><dd><p>Binary indicator for if the play resulted in a return TD.</p>
</dd>
<dt>extra_point_attempt</dt><dd><p>Binary indicator for extra point attempt.</p>
</dd>
<dt>two_point_attempt</dt><dd><p>Binary indicator for two point conversion attempt.</p>
</dd>
<dt>field_goal_attempt</dt><dd><p>Binary indicator for field goal attempt.</p>
</dd>
<dt>kickoff_attempt</dt><dd><p>Binary indicator for kickoff.</p>
</dd>
<dt>punt_attempt</dt><dd><p>Binary indicator for punts.</p>
</dd>
<dt>fumble</dt><dd><p>Binary indicator for if a fumble occurred.</p>
</dd>
<dt>complete_pass</dt><dd><p>Binary indicator for if the pass was completed.</p>
</dd>
<dt>assist_tackle</dt><dd><p>Binary indicator for if an assist tackle occurred.</p>
</dd>
<dt>lateral_reception</dt><dd><p>Binary indicator for if a lateral occurred on the reception.</p>
</dd>
<dt>lateral_rush</dt><dd><p>Binary indicator for if a lateral occurred on a run.</p>
</dd>
<dt>lateral_return</dt><dd><p>Binary indicator for if a lateral occurred on a return.</p>
</dd>
<dt>lateral_recovery</dt><dd><p>Binary indicator for if a lateral occurred on a fumble recovery.</p>
</dd>
<dt>passer_player_id</dt><dd><p>Unique identifier for the player that attempted the pass.</p>
</dd>
<dt>passer_player_name</dt><dd><p>String name for the player that attempted the pass.</p>
</dd>
<dt>passing_yards</dt><dd><p>Numeric yards by the passer_player_name, including yards gained in pass plays with laterals.
This should equal official passing statistics.</p>
</dd>
<dt>receiver_player_id</dt><dd><p>Unique identifier for the receiver that was targeted on the pass.</p>
</dd>
<dt>receiver_player_name</dt><dd><p>String name for the targeted receiver.</p>
</dd>
<dt>receiving_yards</dt><dd><p>Numeric yards by the receiver_player_name, excluding yards gained in pass plays with laterals.
This should equal official receiving statistics but could miss yards gained in pass plays with laterals.
Please see the description of <code>lateral_receiver_player_name</code> for further information.</p>
</dd>
<dt>rusher_player_id</dt><dd><p>Unique identifier for the player that attempted the run.</p>
</dd>
<dt>rusher_player_name</dt><dd><p>String name for the player that attempted the run.</p>
</dd>
<dt>rushing_yards</dt><dd><p>Numeric yards by the rusher_player_name, excluding yards gained in rush plays with laterals.
This should equal official rushing statistics but could miss yards gained in rush plays with laterals.
Please see the description of <code>lateral_rusher_player_name</code> for further information.</p>
</dd>
<dt>lateral_receiver_player_id</dt><dd><p>Unique identifier for the player that received the last(!) lateral on a pass play.</p>
</dd>
<dt>lateral_receiver_player_name</dt><dd><p>String name for the player that received the last(!) lateral on a pass play.
If there were multiple laterals in the same play, this will only be the last player who received a lateral.
Please see <a href="https://github.com/mrcaseb/nfl-data/tree/master/data/lateral_yards">https://github.com/mrcaseb/nfl-data/tree/master/data/lateral_yards</a>
for a list of plays where multiple players recorded lateral receiving yards.</p>
</dd>
<dt>lateral_receiving_yards</dt><dd><p>Numeric yards by the <code>lateral_receiver_player_name</code> in pass plays with laterals.
Please see the description of <code>lateral_receiver_player_name</code> for further information.</p>
</dd>
<dt>lateral_rusher_player_id</dt><dd><p>Unique identifier for the player that received the last(!) lateral on a run play.</p>
</dd>
<dt>lateral_rusher_player_name</dt><dd><p>String name for the player that received the last(!) lateral on a run play.
If there were multiple laterals in the same play, this will only be the last player who received a lateral.
Please see <a href="https://github.com/mrcaseb/nfl-data/tree/master/data/lateral_yards">https://github.com/mrcaseb/nfl-data/tree/master/data/lateral_yards</a>
for a list of plays where multiple players recorded lateral rushing yards.</p>
</dd>
<dt>lateral_rushing_yards</dt><dd><p>Numeric yards by the <code>lateral_rusher_player_name</code> in run plays with laterals.
Please see the description of <code>lateral_rusher_player_name</code> for further information.</p>
</dd>
<dt>lateral_sack_player_id</dt><dd><p>Unique identifier for the player that received the lateral on a sack.</p>
</dd>
<dt>lateral_sack_player_name</dt><dd><p>String name for the player that received the lateral on a sack.</p>
</dd>
<dt>interception_player_id</dt><dd><p>Unique identifier for the player that intercepted the pass.</p>
</dd>
<dt>interception_player_name</dt><dd><p>String name for the player that intercepted the pass.</p>
</dd>
<dt>lateral_interception_player_id</dt><dd><p>Unique indentifier for the player that received the lateral on an interception.</p>
</dd>
<dt>lateral_interception_player_name</dt><dd><p>String name for the player that received the lateral on an interception.</p>
</dd>
<dt>punt_returner_player_id</dt><dd><p>Unique identifier for the punt returner.</p>
</dd>
<dt>punt_returner_player_name</dt><dd><p>String name for the punt returner.</p>
</dd>
<dt>lateral_punt_returner_player_id</dt><dd><p>Unique identifier for the player that received the lateral on a punt return.</p>
</dd>
<dt>lateral_punt_returner_player_name</dt><dd><p>String name for the player that received the lateral on a punt return.</p>
</dd>
<dt>kickoff_returner_player_name</dt><dd><p>String name for the kickoff returner.</p>
</dd>
<dt>kickoff_returner_player_id</dt><dd><p>Unique identifier for the kickoff returner.</p>
</dd>
<dt>lateral_kickoff_returner_player_id</dt><dd><p>Unique identifier for the player that received the lateral on a kickoff return.</p>
</dd>
<dt>lateral_kickoff_returner_player_name</dt><dd><p>String name for the player that received the lateral on a kickoff return.</p>
</dd>
<dt>punter_player_id</dt><dd><p>Unique identifier for the punter.</p>
</dd>
<dt>punter_player_name</dt><dd><p>String name for the punter.</p>
</dd>
<dt>kicker_player_name</dt><dd><p>String name for the kicker on FG or kickoff.</p>
</dd>
<dt>kicker_player_id</dt><dd><p>Unique identifier for the kicker on FG or kickoff.</p>
</dd>
<dt>own_kickoff_recovery_player_id</dt><dd><p>Unique identifier for the player that recovered their own kickoff.</p>
</dd>
<dt>own_kickoff_recovery_player_name</dt><dd><p>String name for the player that recovered their own kickoff.</p>
</dd>
<dt>blocked_player_id</dt><dd><p>Unique identifier for the player that blocked the punt or FG.</p>
</dd>
<dt>blocked_player_name</dt><dd><p>String name for the player that blocked the punt or FG.</p>
</dd>
<dt>tackle_for_loss_1_player_id</dt><dd><p>Unique identifier for one of the potential players with the tackle for loss.</p>
</dd>
<dt>tackle_for_loss_1_player_name</dt><dd><p>String name for one of the potential players with the tackle for loss.</p>
</dd>
<dt>tackle_for_loss_2_player_id</dt><dd><p>Unique identifier for one of the potential players with the tackle for loss.</p>
</dd>
<dt>tackle_for_loss_2_player_name</dt><dd><p>String name for one of the potential players with the tackle for loss.</p>
</dd>
<dt>qb_hit_1_player_id</dt><dd><p>Unique identifier for one of the potential players that hit the QB. No sack as the QB was not the ball carrier. For sacks please see <code>sack_player</code> or <code style="white-space: pre;">&#8288;half_sack_*_player&#8288;</code>.</p>
</dd>
<dt>qb_hit_1_player_name</dt><dd><p>String name for one of the potential players that hit the QB. No sack as the QB was not the ball carrier. For sacks please see <code>sack_player</code> or <code style="white-space: pre;">&#8288;half_sack_*_player&#8288;</code>.</p>
</dd>
<dt>qb_hit_2_player_id</dt><dd><p>Unique identifier for one of the potential players that hit the QB. No sack as the QB was not the ball carrier. For sacks please see <code>sack_player</code> or <code style="white-space: pre;">&#8288;half_sack_*_player&#8288;</code>.</p>
</dd>
<dt>qb_hit_2_player_name</dt><dd><p>String name for one of the potential players that hit the QB. No sack as the QB was not the ball carrier. For sacks please see <code>sack_player</code> or <code style="white-space: pre;">&#8288;half_sack_*_player&#8288;</code>.</p>
</dd>
<dt>forced_fumble_player_1_team</dt><dd><p>Team of one of the players with a forced fumble.</p>
</dd>
<dt>forced_fumble_player_1_player_id</dt><dd><p>Unique identifier of one of the players with a forced fumble.</p>
</dd>
<dt>forced_fumble_player_1_player_name</dt><dd><p>String name of one of the players with a forced fumble.</p>
</dd>
<dt>forced_fumble_player_2_team</dt><dd><p>Team of one of the players with a forced fumble.</p>
</dd>
<dt>forced_fumble_player_2_player_id</dt><dd><p>Unique identifier of one of the players with a forced fumble.</p>
</dd>
<dt>forced_fumble_player_2_player_name</dt><dd><p>String name of one of the players with a forced fumble.</p>
</dd>
<dt>solo_tackle_1_team</dt><dd><p>Team of one of the players with a solo tackle.</p>
</dd>
<dt>solo_tackle_2_team</dt><dd><p>Team of one of the players with a solo tackle.</p>
</dd>
<dt>solo_tackle_1_player_id</dt><dd><p>Unique identifier of one of the players with a solo tackle.</p>
</dd>
<dt>solo_tackle_2_player_id</dt><dd><p>Unique identifier of one of the players with a solo tackle.</p>
</dd>
<dt>solo_tackle_1_player_name</dt><dd><p>String name of one of the players with a solo tackle.</p>
</dd>
<dt>solo_tackle_2_player_name</dt><dd><p>String name of one of the players with a solo tackle.</p>
</dd>
<dt>assist_tackle_1_player_id</dt><dd><p>Unique identifier of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_1_player_name</dt><dd><p>String name of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_1_team</dt><dd><p>Team of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_2_player_id</dt><dd><p>Unique identifier of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_2_player_name</dt><dd><p>String name of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_2_team</dt><dd><p>Team of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_3_player_id</dt><dd><p>Unique identifier of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_3_player_name</dt><dd><p>String name of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_3_team</dt><dd><p>Team of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_4_player_id</dt><dd><p>Unique identifier of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_4_player_name</dt><dd><p>String name of one of the players with a tackle assist.</p>
</dd>
<dt>assist_tackle_4_team</dt><dd><p>Team of one of the players with a tackle assist.</p>
</dd>
<dt>tackle_with_assist</dt><dd><p>Binary indicator for if there has been a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_1_player_id</dt><dd><p>Unique identifier of one of the players with a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_1_player_name</dt><dd><p>String name of one of the players with a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_1_team</dt><dd><p>Team of one of the players with a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_2_player_id</dt><dd><p>Unique identifier of one of the players with a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_2_player_name</dt><dd><p>String name of one of the players with a tackle with assist.</p>
</dd>
<dt>tackle_with_assist_2_team</dt><dd><p>Team of one of the players with a tackle with assist.</p>
</dd>
<dt>pass_defense_1_player_id</dt><dd><p>Unique identifier of one of the players with a pass defense.</p>
</dd>
<dt>pass_defense_1_player_name</dt><dd><p>String name of one of the players with a pass defense.</p>
</dd>
<dt>pass_defense_2_player_id</dt><dd><p>Unique identifier of one of the players with a pass defense.</p>
</dd>
<dt>pass_defense_2_player_name</dt><dd><p>String name of one of the players with a pass defense.</p>
</dd>
<dt>fumbled_1_team</dt><dd><p>Team of one of the first player with a fumble.</p>
</dd>
<dt>fumbled_1_player_id</dt><dd><p>Unique identifier of the first player who fumbled on the play.</p>
</dd>
<dt>fumbled_1_player_name</dt><dd><p>String name of one of the first player who fumbled on the play.</p>
</dd>
<dt>fumbled_2_player_id</dt><dd><p>Unique identifier of the second player who fumbled on the play.</p>
</dd>
<dt>fumbled_2_player_name</dt><dd><p>String name of one of the second player who fumbled on the play.</p>
</dd>
<dt>fumbled_2_team</dt><dd><p>Team of one of the second player with a fumble.</p>
</dd>
<dt>fumble_recovery_1_team</dt><dd><p>Team of one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_1_yards</dt><dd><p>Yards gained by one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_1_player_id</dt><dd><p>Unique identifier of one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_1_player_name</dt><dd><p>String name of one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_2_team</dt><dd><p>Team of one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_2_yards</dt><dd><p>Yards gained by one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_2_player_id</dt><dd><p>Unique identifier of one of the players with a fumble recovery.</p>
</dd>
<dt>fumble_recovery_2_player_name</dt><dd><p>String name of one of the players with a fumble recovery.</p>
</dd>
<dt>sack_player_id</dt><dd><p>Unique identifier of the player who recorded a solo sack.</p>
</dd>
<dt>sack_player_name</dt><dd><p>String name of the player who recorded a solo sack.</p>
</dd>
<dt>half_sack_1_player_id</dt><dd><p>Unique identifier of the first player who recorded half a sack.</p>
</dd>
<dt>half_sack_1_player_name</dt><dd><p>String name of the first player who recorded half a sack.</p>
</dd>
<dt>half_sack_2_player_id</dt><dd><p>Unique identifier of the second player who recorded half a sack.</p>
</dd>
<dt>half_sack_2_player_name</dt><dd><p>String name of the second player who recorded half a sack.</p>
</dd>
<dt>return_team</dt><dd><p>String abbreviation of the return team.</p>
</dd>
<dt>return_yards</dt><dd><p>Yards gained by the return team.</p>
</dd>
<dt>penalty_team</dt><dd><p>String abbreviation of the team with the penalty.</p>
</dd>
<dt>penalty_player_id</dt><dd><p>Unique identifier for the player with the penalty.</p>
</dd>
<dt>penalty_player_name</dt><dd><p>String name for the player with the penalty.</p>
</dd>
<dt>penalty_yards</dt><dd><p>Yards gained (or lost) by the posteam from the penalty.</p>
</dd>
<dt>replay_or_challenge</dt><dd><p>Binary indicator for whether or not a replay or challenge.</p>
</dd>
<dt>replay_or_challenge_result</dt><dd><p>String indicating the result of the replay or challenge.</p>
</dd>
<dt>penalty_type</dt><dd><p>String indicating the penalty type of the first penalty in the given play. Will be <code>NA</code> if <code>desc</code> is missing the type.</p>
</dd>
<dt>defensive_two_point_attempt</dt><dd><p>Binary indicator whether or not the defense was able to have an attempt on a two point conversion, this results following a turnover.</p>
</dd>
<dt>defensive_two_point_conv</dt><dd><p>Binary indicator whether or not the defense successfully scored on the two point conversion.</p>
</dd>
<dt>defensive_extra_point_attempt</dt><dd><p>Binary indicator whether or not the defense was able to have an attempt on an extra point attempt, this results following a blocked attempt that the defense recovers the ball.</p>
</dd>
<dt>defensive_extra_point_conv</dt><dd><p>Binary indicator whether or not the defense successfully scored on an extra point attempt.</p>
</dd>
<dt>safety_player_name</dt><dd><p>String name for the player who scored a safety.</p>
</dd>
<dt>safety_player_id</dt><dd><p>Unique identifier for the player who scored a safety.</p>
</dd>
<dt>season</dt><dd><p>4 digit number indicating to which season the game belongs to.</p>
</dd>
<dt>cp</dt><dd><p>Numeric value indicating the probability for a complete pass based on comparable game situations.</p>
</dd>
<dt>cpoe</dt><dd><p>For a single pass play this is 1 - cp when the pass was completed or 0 - cp when the pass was incomplete. Analyzed for a whole game or season an indicator for the passer how much over or under expectation his completion percentage was.</p>
</dd>
<dt>series</dt><dd><p>Starts at 1, each new first down increments, numbers shared across both teams NA: kickoffs, extra point/two point conversion attempts, non-plays, no posteam</p>
</dd>
<dt>series_success</dt><dd><p>1: scored touchdown, gained enough yards for first down.</p>
</dd>
<dt>series_result</dt><dd><p>Possible values: First down, Touchdown, Opp touchdown, Field goal, Missed field goal, Safety, Turnover, Punt, Turnover on downs, QB kneel, End of half</p>
</dd>
<dt>start_time</dt><dd><p>Kickoff time in eastern time zone.</p>
</dd>
<dt>order_sequence</dt><dd><p>Column provided by NFL to fix out-of-order plays. Available 2011 and beyond with source &quot;nfl&quot;.</p>
</dd>
<dt>time_of_day</dt><dd><p>Time of day of play in UTC &quot;HH:MM:SS&quot; format. Available 2011 and beyond with source &quot;nfl&quot;.</p>
</dd>
<dt>stadium</dt><dd><p>Game site name.</p>
</dd>
<dt>weather</dt><dd><p>String describing the weather including temperature, humidity and wind (direction and speed). Doesn't change during the game!</p>
</dd>
<dt>nfl_api_id</dt><dd><p>UUID of the game in the new NFL API.</p>
</dd>
<dt>play_clock</dt><dd><p>Time on the playclock when the ball was snapped.</p>
</dd>
<dt>play_deleted</dt><dd><p>Binary indicator for deleted plays.</p>
</dd>
<dt>play_type_nfl</dt><dd><p>Play type as listed in the NFL source. Slightly different to the regular play_type variable.</p>
</dd>
<dt>special_teams_play</dt><dd><p>Binary indicator for whether play is special teams play from NFL source. Available 2011 and beyond with source &quot;nfl&quot;.</p>
</dd>
<dt>st_play_type</dt><dd><p>Type of special teams play from NFL source. Available 2011 and beyond with source &quot;nfl&quot;.</p>
</dd>
<dt>end_clock_time</dt><dd><p>Game time at the end of a given play.</p>
</dd>
<dt>end_yard_line</dt><dd><p>String indicating the yardline at the end of the given play consisting of team half and yard line number.</p>
</dd>
<dt>drive_real_start_time</dt><dd><p>Local day time when the drive started (currently not used by the NFL and therefore mostly 'NA').</p>
</dd>
<dt>drive_play_count</dt><dd><p>Numeric value of how many regular plays happened in a given drive.</p>
</dd>
<dt>drive_time_of_possession</dt><dd><p>Time of possession in a given drive.</p>
</dd>
<dt>drive_first_downs</dt><dd><p>Number of forst downs in a given drive.</p>
</dd>
<dt>drive_inside20</dt><dd><p>Binary indicator if the offense was able to get inside the opponents 20 yard line.</p>
</dd>
<dt>drive_ended_with_score</dt><dd><p>Binary indicator the drive ended with a score.</p>
</dd>
<dt>drive_quarter_start</dt><dd><p>Numeric value indicating in which quarter the given drive has started.</p>
</dd>
<dt>drive_quarter_end</dt><dd><p>Numeric value indicating in which quarter the given drive has ended.</p>
</dd>
<dt>drive_yards_penalized</dt><dd><p>Numeric value of how many yards the offense gained or lost through penalties in the given drive.</p>
</dd>
<dt>drive_start_transition</dt><dd><p>String indicating how the offense got the ball.</p>
</dd>
<dt>drive_end_transition</dt><dd><p>String indicating how the offense lost the ball.</p>
</dd>
<dt>drive_game_clock_start</dt><dd><p>Game time at the beginning of a given drive.</p>
</dd>
<dt>drive_game_clock_end</dt><dd><p>Game time at the end of a given drive.</p>
</dd>
<dt>drive_start_yard_line</dt><dd><p>String indicating where a given drive started consisting of team half and yard line number.</p>
</dd>
<dt>drive_end_yard_line</dt><dd><p>String indicating where a given drive ended consisting of team half and yard line number.</p>
</dd>
<dt>drive_play_id_started</dt><dd><p>Play_id of the first play in the given drive.</p>
</dd>
<dt>drive_play_id_ended</dt><dd><p>Play_id of the last play in the given drive.</p>
</dd>
<dt>fixed_drive</dt><dd><p>Manually created drive number in a game.</p>
</dd>
<dt>fixed_drive_result</dt><dd><p>Manually created drive result.</p>
</dd>
<dt>away_score</dt><dd><p>Total points scored by the away team.</p>
</dd>
<dt>home_score</dt><dd><p>Total points scored by the home team.</p>
</dd>
<dt>location</dt><dd><p>Either 'Home' o 'Neutral' indicating if the home team played at home or at a neutral site. </p>
</dd>
<dt>result</dt><dd><p>Equals home_score - away_score and means the game outcome from the perspective of the home team.</p>
</dd>
<dt>total</dt><dd><p>Equals home_score + away_score and means the total points scored in the given game.</p>
</dd>
<dt>spread_line</dt><dd><p>The closing spread line for the game. A positive number means the home team was favored by that many points, a negative number means the away team was favored by that many points. (Source: Pro-Football-Reference)</p>
</dd>
<dt>total_line</dt><dd><p>The closing total line for the game. (Source: Pro-Football-Reference)</p>
</dd>
<dt>div_game</dt><dd><p>Binary indicator for if the given game was a division game.</p>
</dd>
<dt>roof</dt><dd><p>One of 'dome', 'outdoors', 'closed', 'open' indicating indicating the roof status of the stadium the game was played in. (Source: Pro-Football-Reference)</p>
</dd>
<dt>surface</dt><dd><p>What type of ground the game was played on. (Source: Pro-Football-Reference)</p>
</dd>
<dt>temp</dt><dd><p>The temperature at the stadium only for 'roof' = 'outdoors' or 'open'.(Source: Pro-Football-Reference)</p>
</dd>
<dt>wind</dt><dd><p>The speed of the wind in miles/hour only for 'roof' = 'outdoors' or 'open'. (Source: Pro-Football-Reference)</p>
</dd>
<dt>home_coach</dt><dd><p>First and last name of the home team coach. (Source: Pro-Football-Reference)</p>
</dd>
<dt>away_coach</dt><dd><p>First and last name of the away team coach. (Source: Pro-Football-Reference)</p>
</dd>
<dt>stadium_id</dt><dd><p>ID of the stadium the game was played in. (Source: Pro-Football-Reference)</p>
</dd>
<dt>game_stadium</dt><dd><p>Name of the stadium the game was played in. (Source: Pro-Football-Reference)</p>
</dd>
</dl>



<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see <a href="#topic+nflfastR">nflfastR</a>.
</p>
<p><code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>, <code><a href="#topic+save_raw_pbp">save_raw_pbp()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get pbp data for two games
try({# to avoid CRAN test problems
fast_scraper(c("2019_01_GB_CHI", "2013_21_SEA_DEN"))
})


# It is also possible to directly use the
# output of `fast_scraper_schedules` as input
try({# to avoid CRAN test problems
library(dplyr, warn.conflicts = FALSE)
fast_scraper_schedules(2020) %&gt;%
  slice_tail(n = 3) %&gt;%
  fast_scraper()
})



</code></pre>

<hr>
<h2 id='fast_scraper_roster'>Load Team Rosters for Multiple Seasons</h2><span id='topic+fast_scraper_roster'></span>

<h3>Description</h3>

<p>Load Rosters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_scraper_roster(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fast_scraper_roster_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+load_rosters">nflreadr::load_rosters</a></code>
</p>

<dl>
<dt><code>seasons</code></dt><dd><p>a numeric vector of seasons to return, defaults to returning
this year's data if it is March or later. If set to <code>TRUE</code>, will return all available data.
Data available back to 1920.</p>
</dd>
<dt><code>file_type</code></dt><dd><p>One of <code>c("rds", "qs", "csv", "parquet")</code>. Can also be set globally with
<code>options(nflreadr.prefer)</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="nflreadr.html#topic+load_rosters">nflreadr::load_rosters</a></code> for details.
</p>


<h3>Value</h3>

<p>A tibble of season-level roster data.
</p>


<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see <a href="#topic+nflfastR">nflfastR</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Roster of the 2019 and 2020 seasons
try({# to avoid CRAN test problems
fast_scraper_roster(2019:2020)
})

</code></pre>

<hr>
<h2 id='fast_scraper_schedules'>Load NFL Season Schedules</h2><span id='topic+fast_scraper_schedules'></span>

<h3>Description</h3>

<p>This returns game/schedule information as maintained by Lee Sharpe.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fast_scraper_schedules(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fast_scraper_schedules_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules</a></code>
</p>

<dl>
<dt><code>seasons</code></dt><dd><p>a numeric vector of seasons to return, default <code>TRUE</code> returns all available data.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules</a></code> for details.
</p>


<h3>Value</h3>

<p>A tibble of game information for past and/or future games.
</p>


<h3>See Also</h3>

<p>For information on parallel processing and progress updates please
see <a href="#topic+nflfastR">nflfastR</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get schedules for the whole 2015 - 2018 seasons
try({# to avoid CRAN test problems
fast_scraper_schedules(2015:2018)
})

</code></pre>

<hr>
<h2 id='field_descriptions'>nflfastR Field Descriptions</h2><span id='topic+field_descriptions'></span>

<h3>Description</h3>

<p>nflfastR Field Descriptions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>field_descriptions
</code></pre>


<h3>Format</h3>

<p>A data frame including names and descriptions of all variables in
an nflfastR dataset.
</p>


<h3>See Also</h3>

<p>The searchable table on the
<a href="https://www.nflfastr.com/articles/field_descriptions.html">nflfastR website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
field_descriptions

</code></pre>

<hr>
<h2 id='load_pbp'>Load Play By Play</h2><span id='topic+load_pbp'></span>

<h3>Description</h3>

<p>Loads play by play seasons from the <a href="https://github.com/nflverse/nflverse-data">nflverse-data repository</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_pbp(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_pbp_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+load_pbp">nflreadr::load_pbp</a></code>
</p>

<dl>
<dt><code>seasons</code></dt><dd><p>A numeric vector of 4-digit years associated with given NFL seasons - defaults to latest season. If set to <code>TRUE</code>, returns all available data since 1999.</p>
</dd>
<dt><code>file_type</code></dt><dd><p>One of <code>c("rds", "qs", "csv", "parquet")</code>. Can also be set globally with
<code>options(nflreadr.prefer)</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>The complete nflfastR dataset as returned by <code>nflfastR::build_nflfastR_pbp()</code>
(see below) for all given <code>seasons</code>
</p>


<h3>See Also</h3>

<p><a href="https://nflreadr.nflverse.com/articles/dictionary_pbp.html">https://nflreadr.nflverse.com/articles/dictionary_pbp.html</a> for a web version of the data dictionary
</p>
<p><code><a href="nflreadr.html#topic+dictionary_pbp">dictionary_pbp</a></code> for the data dictionary bundled as a package dataframe
</p>
<p><a href="https://www.nflfastr.com/reference/build_nflfastR_pbp.html">https://www.nflfastr.com/reference/build_nflfastR_pbp.html</a> for the nflfastR function <code>nflfastR::build_nflfastR_pbp()</code>
</p>
<p>Issues with this data should be filed here: <a href="https://github.com/nflverse/nflverse-pbp">https://github.com/nflverse/nflverse-pbp</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
pbp &lt;- load_pbp(2019:2020)
dplyr::glimpse(pbp)
})

</code></pre>

<hr>
<h2 id='load_player_stats'>Load Player Level Weekly Stats</h2><span id='topic+load_player_stats'></span>

<h3>Description</h3>

<p>Load Player Level Weekly Stats
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_player_stats(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="load_player_stats_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+load_player_stats">nflreadr::load_player_stats</a></code>
</p>

<dl>
<dt><code>seasons</code></dt><dd><p>a numeric vector of seasons to return, defaults to most recent season. If set to <code>TRUE</code>, returns all available data.</p>
</dd>
<dt><code>stat_type</code></dt><dd><p>one of <code>"offense"</code>, <code>"defense"</code>, or <code>"kicking"</code></p>
</dd>
<dt><code>file_type</code></dt><dd><p>One of <code>c("rds", "qs", "csv", "parquet")</code>. Can also be set globally with
<code>options(nflreadr.prefer)</code></p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of week-level player statistics that aims to match NFL official box scores.
</p>


<h3>See Also</h3>

<p>The function <code><a href="#topic+calculate_player_stats">calculate_player_stats()</a></code> and the corresponding examples
on <a href="https://www.nflfastr.com/articles/nflfastR.html#example-11-replicating-official-stats">the nflfastR website</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try({# to avoid CRAN test problems
stats &lt;- load_player_stats()
dplyr::glimpse(stats)
})

</code></pre>

<hr>
<h2 id='missing_raw_pbp'>Compute Missing Raw PBP Data on Local Filesystem</h2><span id='topic+missing_raw_pbp'></span>

<h3>Description</h3>

<p>Uses <code><a href="nflreadr.html#topic+load_schedules">nflreadr::load_schedules()</a></code> to load game IDs of finished games and
compares these IDs to all files saved under <code>dir</code>.
This function is intended to serve as input for <code><a href="#topic+save_raw_pbp">save_raw_pbp()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>missing_raw_pbp(
  dir = getOption("nflfastR.raw_directory", default = NULL),
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="missing_raw_pbp_+3A_dir">dir</code></td>
<td>
<p>Path to local directory (defaults to option &quot;nflfastR.raw_directory&quot;).
nflfastR will download the raw game files split by season into one sub
directory per season.</p>
</td></tr>
<tr><td><code id="missing_raw_pbp_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, will print number of missing game files as well as
oldest and most recent missing ID to console.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of missing game IDs. If no files are missing,
returns <code>NULL</code> invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+save_raw_pbp">save_raw_pbp()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
try(
missing &lt;- missing_raw_pbp(tempdir())
)

</code></pre>

<hr>
<h2 id='report'>Get a Situation Report on System, nflverse Package Versions and Dependencies</h2><span id='topic+report'></span><span id='topic+nflverse_sitrep'></span>

<h3>Description</h3>

<p>This function gives a quick overview of the versions of R and
the operating system as well as the versions of nflverse packages, options,
and their dependencies. It's primarily designed to help you get a quick
idea of what's going on when you're helping someone else debug a problem.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="nflreadr.html#topic+sitrep">nflreadr::nflverse_sitrep</a></code>
</p>

<dl>
<dt><code>pkg</code></dt><dd><p>a character vector naming installed packages, or <code>NULL</code>
(the default) meaning all nflverse packages. The function checks internally
if all packages are installed and informs if that is not the case.</p>
</dd>
<dt><code>recursive</code></dt><dd><p>a logical indicating whether dependencies of <code>pkg</code> and their
dependencies (and so on) should be included.
Can also be a character vector listing the types of dependencies, a subset
of <code>c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances")</code>.
Character string <code>"all"</code> is shorthand for that vector, character string
<code>"most"</code> for the same vector without <code>"Enhances"</code>, character string <code>"strong"</code>
(default) for the first three elements of that vector.</p>
</dd>
<dt><code>redact_path</code></dt><dd><p>a logical indicating whether options that contain &quot;path&quot;
in the name should be redacted, default = TRUE</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="nflreadr.html#topic+sitrep">nflreadr::nflverse_sitrep</a></code> for details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


report(recursive = FALSE)
nflverse_sitrep(pkg = "nflreadr", recursive = TRUE)



</code></pre>

<hr>
<h2 id='save_raw_pbp'>Download Raw PBP Data to Local Filesystem</h2><span id='topic+save_raw_pbp'></span>

<h3>Description</h3>

<p>The functions <code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code> and <code><a href="#topic+fast_scraper">fast_scraper()</a></code> support loading
raw pbp data from local file systems instead of Github servers.
This function is intended to help setting this up. It loads raw pbp data
and saves it in the given directory split by season in subdirectories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>save_raw_pbp(
  game_ids,
  dir = getOption("nflfastR.raw_directory", default = NULL)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save_raw_pbp_+3A_game_ids">game_ids</code></td>
<td>
<p>A vector of nflverse game IDs.</p>
</td></tr>
<tr><td><code id="save_raw_pbp_+3A_dir">dir</code></td>
<td>
<p>Path to local directory (defaults to option &quot;nflfastR.raw_directory&quot;).
nflfastR will download the raw game files split by season into one sub
directory per season.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a data frame with one row for each downloaded file and
the following columns:
</p>

<ul>
<li> <p><code>success</code> if the HTTP request was successfully performed, regardless of the
response status code. This is <code>FALSE</code> in case of a network error, or in case
you tried to resume from a server that did not support this. A value of <code>NA</code>
means the download was interrupted while in progress.
</p>
</li>
<li> <p><code>status_code</code> the HTTP status code from the request. A successful download is
usually <code>200</code> for full requests or <code>206</code> for resumed requests. Anything else
could indicate that the downloaded file contains an error page instead of the
requested content.
</p>
</li>
<li> <p><code>resumefrom</code> the file size before the request, in case a download was resumed.
</p>
</li>
<li> <p><code>url</code> final url (after redirects) of the request.
</p>
</li>
<li> <p><code>destfile</code> downloaded file on disk.
</p>
</li>
<li> <p><code>error</code> if <code>success == FALSE</code> this column contains an error message.
</p>
</li>
<li> <p><code>type</code> the <code>Content-Type</code> response header value.
</p>
</li>
<li> <p><code>modified</code> the <code>Last-Modified</code> response header value.
</p>
</li>
<li> <p><code>time</code> total elapsed download time for this file in seconds.
</p>
</li>
<li> <p><code>headers</code> vector with http response headers for the request.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+build_nflfastR_pbp">build_nflfastR_pbp()</a></code>, <code><a href="#topic+missing_raw_pbp">missing_raw_pbp()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# CREATE LOCAL TEMP DIRECTORY
local_dir &lt;- tempdir()

# LOAD AND SAVE A GAME TO TEMP DIRECTORY
save_raw_pbp("2021_20_BUF_KC", dir = local_dir)

# REMOVE THE DIRECTORY
unlink(file.path(local_dir, 2021))

</code></pre>

<hr>
<h2 id='stat_ids'>NFL Stat IDs and their Meanings</h2><span id='topic+stat_ids'></span>

<h3>Description</h3>

<p>NFL Stat IDs and their Meanings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_ids
</code></pre>


<h3>Format</h3>

<p>A data frame including NFL stat IDs, names and descriptions used in
an nflfastR dataset.
</p>


<h3>Source</h3>

<p><a href="http://www.nflgsis.com/gsis/Documentation/Partners/StatIDs.html">http://www.nflgsis.com/gsis/Documentation/Partners/StatIDs.html</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
stat_ids

</code></pre>

<hr>
<h2 id='teams_colors_logos'>NFL Team names, colors and logo urls.</h2><span id='topic+teams_colors_logos'></span>

<h3>Description</h3>

<p>NFL Team names, colors and logo urls.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teams_colors_logos
</code></pre>


<h3>Format</h3>

<p>A data frame with 36 rows and 10 variables containing NFL team level
information, including franchises in multiple cities:
</p>

<dl>
<dt>team_abbr</dt><dd><p>Team abbreviation</p>
</dd>
<dt>team_name</dt><dd><p>Complete Team name</p>
</dd>
<dt>team_id</dt><dd><p>Team id used in the roster function</p>
</dd>
<dt>team_nick</dt><dd><p>Nickname</p>
</dd>
<dt>team_conf</dt><dd><p>Conference</p>
</dd>
<dt>team_division</dt><dd><p>Division</p>
</dd>
<dt>team_color</dt><dd><p>Primary color</p>
</dd>
<dt>team_color2</dt><dd><p>Secondary color</p>
</dd>
<dt>team_color3</dt><dd><p>Tertiary color</p>
</dd>
<dt>team_color4</dt><dd><p>Quaternary color</p>
</dd>
<dt>team_logo_wikipedia</dt><dd><p>Url to Team logo on wikipedia</p>
</dd>
<dt>team_logo_espn</dt><dd><p>Url to higher quality logo on espn</p>
</dd>
<dt>team_wordmark</dt><dd><p>Url to team wordmarks</p>
</dd>
<dt>team_conference_logo</dt><dd><p>Url to AFC and NFC logos</p>
</dd>
<dt>team_league_logo</dt><dd><p>Url to NFL logo</p>
</dd>
</dl>

<p>The primary and secondary colors have been taken from nfl.com with some modifications
for better team distinction and most recent team color themes.
The tertiary and quaternary colors are taken from Lee Sharpe's teamcolors.csv
who has taken them from the <code>teamcolors</code> package created by Ben Baumer and
Gregory Matthews. The Wikipeadia logo urls are taken from Lee Sharpe's logos.csv
Team wordmarks from nfl.com
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
teams_colors_logos

</code></pre>

<hr>
<h2 id='update_db'>Update or Create a nflfastR Play-by-Play Database</h2><span id='topic+update_db'></span>

<h3>Description</h3>

<p><code>update_db</code> updates or creates a database with <code>nflfastR</code>
play by play data of all completed games since 1999.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_db(
  dbdir = getOption("nflfastR.dbdirectory", default = "."),
  dbname = "pbp_db",
  tblname = "nflfastR_pbp",
  force_rebuild = FALSE,
  db_connection = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_db_+3A_dbdir">dbdir</code></td>
<td>
<p>Directory in which the database is or shall be located. Can also
be set globally with <code>options(nflfastR.dbdirectory)</code></p>
</td></tr>
<tr><td><code id="update_db_+3A_dbname">dbname</code></td>
<td>
<p>File name of an existing or desired SQLite database within <code>dbdir</code></p>
</td></tr>
<tr><td><code id="update_db_+3A_tblname">tblname</code></td>
<td>
<p>The name of the play by play data table within the database</p>
</td></tr>
<tr><td><code id="update_db_+3A_force_rebuild">force_rebuild</code></td>
<td>
<p>Hybrid parameter (logical or numeric) to rebuild parts
of or the complete play by play data table within the database (please see details for further information)</p>
</td></tr>
<tr><td><code id="update_db_+3A_db_connection">db_connection</code></td>
<td>
<p>A <code>DBIConnection</code> object, as returned by
<code><a href="DBI.html#topic+dbConnect">DBI::dbConnect()</a></code> (please see details for further information)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates and updates a data table with the name <code>tblname</code>
within a SQLite database (other drivers via <code>db_connection</code>) located in
<code>dbdir</code> and named <code>dbname</code>.
The data table combines all play by play data for every available game back
to the 1999 season and adds the most recent completed games as soon as they
are available for <code>nflfastR</code>.
</p>
<p>The argument <code>force_rebuild</code> is of hybrid type. It can rebuild the play
by play data table either for the whole nflfastR era (with <code>force_rebuild = TRUE</code>)
or just for specified seasons (e.g. <code>force_rebuild = c(2019, 2020)</code>).
Please note the following behavior:
</p>

<ul>
<li> <p><code>force_rebuild = TRUE</code>: The data table with the name <code>tblname</code>
will be removed completely and rebuilt from scratch. This is helpful when
new columns are added during the Off-Season.
</p>
</li>
<li> <p><code>force_rebuild = c(2019, 2020)</code>: The data table with the name <code>tblname</code>
will be preserved and only rows from the 2019 and 2020 seasons will be
deleted and re-added. This is intended to be used for ongoing seasons because
the NFL fixes bugs in the underlying data during the week and we recommend
rebuilding the current season every Thursday during the season.
</p>
</li></ul>

<p>The parameter <code>db_connection</code> is intended for advanced users who want
to use other DBI drivers, such as MariaDB, Postgres or odbc. Please note that
the arguments <code>dbdir</code> and <code>dbname</code> are dropped in case a <code>db_connection</code>
is provided but the argument <code>tblname</code> will still be used to write the
data table into the database.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
