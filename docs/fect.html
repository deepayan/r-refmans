<!DOCTYPE html><html><head><title>Help for package fect</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fect}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fect-package'><p>Fixed Effects Counterfactual Estimators</p></a></li>
<li><a href='#att.cumu'><p>Calculate Cumulative Treatment Effects</p></a></li>
<li><a href='#fect'><p>Fixed Effects Counterfactual Estimators</p></a></li>
<li><a href='#fect-internal'><p>Internal FEct Functions</p></a></li>
<li><a href='#get.cohort'><p>Get the Cohort Index</p></a></li>
<li><a href='#interFE'><p>Interactive Fixed Effects Models</p></a></li>
<li><a href='#plot.fect'><p>Plotting</p></a></li>
<li><a href='#print.fect'><p>Print Results</p></a></li>
<li><a href='#print.interFE'><p>Print Results</p></a></li>
<li><a href='#simdata'><p>Simulated data</p></a></li>
<li><a href='#simdata1'><p>Simulated data</p></a></li>
<li><a href='#turnout'><p>EDR and voter turnout in the US</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Fixed Effects Counterfactuals</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-10-07</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ziyi Liu &lt;zyliu2020@uchicago.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimates causal effects with panel data using the counterfactual methods. It is suitable for panel or time-series cross-sectional analysis with binary treatments under (hypothetically) baseline randomization.It allows a treatment to switch on and off and limited carryover effects. It supports linear factor models, a generalization of gsynth and the matrix completion method. Implementation details can be found in Liu, Wang and Xu (2022) &lt;<a href="https://doi.org/10.48550/arXiv.2107.00856">doi:10.48550/arXiv.2107.00856</a>&gt;.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://yiqingxu.org/packages/fect/articles/tutorial.html">https://yiqingxu.org/packages/fect/articles/tutorial.html</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 0.12.3), ggplot2 (&ge; 2.1.0), GGally (&ge; 1.0.1),
doParallel (&ge; 1.0.10), foreach (&ge; 1.4.3), abind (&ge; 1.4-0),
MASS, gridExtra, grid, fixest, doRNG, future, panelView,
mvtnorm</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>A C++11 compiler.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-10-13 19:40:30 UTC; ziyil</td>
</tr>
<tr>
<td>Author:</td>
<td>Licheng Liu [aut],
  Ziyi Liu [aut, cre],
  Ye Wang [aut],
  Yiqing Xu <a href="https://orcid.org/0000-0003-2041-6671"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-10-14 09:52:32 UTC</td>
</tr>
</table>
<hr>
<h2 id='fect-package'>Fixed Effects Counterfactual Estimators</h2><span id='topic+fect-package'></span>

<h3>Description</h3>

<p>The package implements counterfactual estimators in TSCS data analysis and statistical tools to test their identification assumptions.</p>


<h3>Details</h3>

<p>It implements counterfactual estimators in TSCS data analysis. These estimators first impute counterfactuals for each treated 
observation in a TSCS dataset by fitting an outcome model (fixed effects model, interactive fixed effects model, or matrix 
completion) using the untreated observations. They then estimate the individualistic treatment effect for each treated observatio
n by subtracting the predicted counterfactual outcome from its observed outcome. Finally, the average treatment effect on the 
treated (ATT) or period-specific ATTs are calculated. A placebo test and an equivalence test are included to evaluate the 
validity of identification assumptions behind these estimators.
</p>
<p>See <code><a href="#topic+fect">fect</a></code> for details.
</p>


<h3>Author(s)</h3>

<p>Licheng Liu &lt;liulch@mit.edu&gt;, MIT
</p>
<p>Ye Wang &lt;yw1576@nyu.edu&gt;, New York University
</p>
<p>Yiqing Xu &lt;yiqingxu@stanford.edu &gt;, Stanford University
</p>
<p>Ziyi Liu &lt;zyliu2020@uchicago.edu&gt;, University of Chicago
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>

<hr>
<h2 id='att.cumu'>Calculate Cumulative Treatment Effects</h2><span id='topic+att.cumu'></span>

<h3>Description</h3>

<p>Calculate cumulative treatment effects</p>


<h3>Usage</h3>

<pre><code class='language-R'>att.cumu(x, period = NULL, weighted = TRUE, alpha = 0.05, type = "on", plot = FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="att.cumu_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+fect">fect</a></code> object.</p>
</td></tr>
<tr><td><code id="att.cumu_+3A_period">period</code></td>
<td>
<p>a two-element numeric vector specifying the range of term during which treatment effects are to be accumulated. 
e.g. <code>period = c(-1,1)</code>.</p>
</td></tr>
<tr><td><code id="att.cumu_+3A_weighted">weighted</code></td>
<td>
<p>a logical flag specifying whether to calculate weigthed cumulative treatment effects based on counts at each period. Default is 
<code>weighted = TRUE</code>.</p>
</td></tr>
<tr><td><code id="att.cumu_+3A_alpha">alpha</code></td>
<td>
<p>a numerical value that specfies significant level.</p>
</td></tr>
<tr><td><code id="att.cumu_+3A_type">type</code></td>
<td>
<p>a string that specifies the type. Must be one of the following: &quot;on&quot; (switch-on treatment effect); &quot;off&quot; (switch-off treatment effect). Default 
is <code>type = "on"</code>.</p>
</td></tr>
<tr><td><code id="att.cumu_+3A_plot">plot</code></td>
<td>
<p>A logical flag indicating whether to plot cumulative effects. 
Default is <code>plot = FALSE</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu 
</p>


<h3>References</h3>

  
<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fect">fect</a></code> and <code><a href="#topic+plot.fect">plot.fect</a></code>
</p>

<hr>
<h2 id='fect'>Fixed Effects Counterfactual Estimators</h2><span id='topic+fect'></span>

<h3>Description</h3>

<p>Implements counterfactual estimators in TSCS data analysis and statistical tools to test their identification 
assumptions.</p>


<h3>Usage</h3>

<pre><code class='language-R'>fect(formula = NULL, data, Y, D, X = NULL, group = NULL,
            na.rm = FALSE, 
            index, force = "two-way", r = 0, lambda = NULL, nlambda = 10,
            CV = NULL, k = 10, cv.prop = 0.1, cv.treat = FALSE, 
            cv.nobs = 3, cv.donut = 0, criterion = "mspe",
            binary = FALSE, QR = FALSE,
            method = "fe",  
            se = FALSE, vartype = "bootstrap", nboots = 200, alpha = 0.05,
            parallel = TRUE, cores = NULL, tol = 0.001, seed = NULL, 
            min.T0 = NULL, max.missing = NULL, 
            proportion = 0.3, pre.periods = NULL, 
            f.threshold = 0.5, tost.threshold = NULL,
            knots = NULL, degree = 2, 
            sfe = NULL, cfe = NULL,
            balance.period = NULL, fill.missing = FALSE,
            placeboTest = FALSE, placebo.period = NULL,
            carryoverTest = FALSE, carryover.period = NULL, carryover.rm = NULL,
            loo = FALSE, permute = FALSE, m = 2, normalize = FALSE)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fect_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot;: a symbolic description of the model to be fitted, e.g, Y~D+X1+X2</p>
</td></tr>
<tr><td><code id="fect_+3A_data">data</code></td>
<td>
<p>a data frame, can be a balanced or unbalanced panel data.</p>
</td></tr>
<tr><td><code id="fect_+3A_y">Y</code></td>
<td>
<p>the outcome indicator.</p>
</td></tr>
<tr><td><code id="fect_+3A_d">D</code></td>
<td>
<p>the treatment indicator. The treatment should be binary (0 and 1).</p>
</td></tr>
<tr><td><code id="fect_+3A_x">X</code></td>
<td>
<p>time-varying covariates. Covariates that have perfect collinearity with specified fixed effects are dropped automatically.</p>
</td></tr>
<tr><td><code id="fect_+3A_group">group</code></td>
<td>
<p>the group indicator. If specified, the group-wise ATT will be estimated.</p>
</td></tr>
<tr><td><code id="fect_+3A_na.rm">na.rm</code></td>
<td>
<p>a logical flag indicating whether to list-wise delete missing observations. Default to FALSE. If <code>na.rm = FALSE</code>, it allows the situation when Y is missing but D is not missing for some observations. If <code>na.rm = TRUE</code>, it will list-wise delete observations whose Y, D, or X is missing.</p>
</td></tr>
<tr><td><code id="fect_+3A_index">index</code></td>
<td>
<p>a two-element string vector specifying the unit and time indicators. Must be of length 2. Every observation should be uniquely defined by the pair of the unit and time indicator.</p>
</td></tr>
<tr><td><code id="fect_+3A_force">force</code></td>
<td>
<p>a string indicating whether unit or time or both fixed effects will be imposed. Must be one of the following, &quot;none&quot;, &quot;unit&quot;, &quot;time&quot;, or &quot;two-way&quot;. The default is &quot;two-way&quot;.</p>
</td></tr>
<tr><td><code id="fect_+3A_r">r</code></td>
<td>
<p>an integer specifying the number of factors. If <code>CV = TRUE</code>, the cross validation procedure will select the optimal number of factors from <code>r</code> to 5.</p>
</td></tr>
<tr><td><code id="fect_+3A_lambda">lambda</code></td>
<td>
<p>a single or sequence of positive numbers specifying the hyper-parameter sequence for matrix completion method. If <code>lambda</code> is a sequence and <code>CV = 1</code>, cross-validation will be performed.</p>
</td></tr>
<tr><td><code id="fect_+3A_nlambda">nlambda</code></td>
<td>
<p>an integer specifying the length of hyper-parameter sequence for matrix completion method. Default is <code>nlambda = 10</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_cv">CV</code></td>
<td>
<p>a logical flag indicating whether cross-validation will be performed to select the optimal number of factors or hyper-parameter in matrix completion algorithm. If <code>r</code> is not specified, the procedure will search through <code>r = 0</code> to <code>5</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_k">k</code></td>
<td>
<p>an integer specifying number of cross-validation rounds. Default is <code>k = 10</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_cv.prop">cv.prop</code></td>
<td>
<p>a numerical value specifying the proportion of testing set compared to sample size during the cross-validation procedure.</p>
</td></tr>
<tr><td><code id="fect_+3A_cv.treat">cv.treat</code></td>
<td>
<p>a logical flag speficying whether to only use observations of treated units as testing set.</p>
</td></tr>
<tr><td><code id="fect_+3A_cv.nobs">cv.nobs</code></td>
<td>
<p>an integer specifying the length of continuous observations within a unit in the testing set. Default is <code>cv.nobs = 3</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_cv.donut">cv.donut</code></td>
<td>
<p>an integer specifying the length of removed observations at the head and tail of the continuous observations specified by <code>cv.nobs</code>. 
These removed observations will not be used to fit the data nor be in the validation set for the cross-validation, e.g, if <code>cv.nobs=3</code> and <code>cv.donut = 1</code>, the first and the last observation in each triplet will not be included in the test set. 
Default is <code>cv.donut = 0</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_criterion">criterion</code></td>
<td>
<p>criterion used for model selection. Default is &quot;mspe&quot;. 
<code>"mspe"</code> for the mean squared prediction error,
<code>"gmspe"</code> for the geometric-mean squared prediction errors,
if <code>criterion="moment"</code>, we average the residuals in test sets by their relative periods to treatments and then average the squares of these period-wise deviations weighted by the number of observations at each period, it yields a better pre-trend fitting on test sets rather than a better prediction ability.
<code>"pc"</code> for the information criterion of interactive fixed effects or generalized synthetic control model.</p>
</td></tr>
<tr><td><code id="fect_+3A_binary">binary</code></td>
<td>
<p>This version doesn't support this option. a logical flag indicating whether a probit link function will be used.</p>
</td></tr>
<tr><td><code id="fect_+3A_qr">QR</code></td>
<td>
<p>This version doesn't support this option. a logical flag indicating whether QR decomposition will be used for factor analysis in probit model.</p>
</td></tr>
<tr><td><code id="fect_+3A_method">method</code></td>
<td>
<p>a string specifying which imputation algorithm will be used. 
<code>"fe"</code> for fixed effects model, 
<code>"ife"</code> for interactive fixed effects model, 
<code>"mc"</code> for matrix copletion method, 
<code>"polynomial"</code> for polynomial trend terms, 
<code>"bspline"</code> for regression splines,
<code>"gsynth"</code> for generalized synthetic control method,
and <code>"cfe"</code> for complex fixed effects method 
Default is <code>method = "fe"</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_se">se</code></td>
<td>
<p>a logical flag indicating whether uncertainty estimates will
be produced.</p>
</td></tr>
<tr><td><code id="fect_+3A_vartype">vartype</code></td>
<td>
<p>a string specifying the type of variance estimator. Choose 
from <code>vartype = c("bootstrap", "jackknife", "parametric")</code>. Default value is 
<code>"bootstrap"</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_nboots">nboots</code></td>
<td>
<p>an integer specifying the number of bootstrap
runs. Ignored if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_alpha">alpha</code></td>
<td>
<p>significant level for hypothesis test and CIs. Default value is 
<code>alpha = 0.05</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_parallel">parallel</code></td>
<td>
<p>a logical flag indicating whether parallel computing
will be used in bootstrapping and/or cross-validation. Ignored if
<code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_cores">cores</code></td>
<td>
<p>an integer indicating the number of cores to be used in
parallel computing. If not specified, the algorithm will use the
maximum number of logical cores of your computer (warning: this
could prevent you from multi-tasking on your computer).</p>
</td></tr>
<tr><td><code id="fect_+3A_tol">tol</code></td>
<td>
<p>a positive number indicating the tolerance level.</p>
</td></tr>
<tr><td><code id="fect_+3A_seed">seed</code></td>
<td>
<p>an integer that sets the seed in random number
generation. Ignored if <code>se = FALSE</code> and <code>r</code> is specified.</p>
</td></tr>
<tr><td><code id="fect_+3A_min.t0">min.T0</code></td>
<td>
<p>an integer specifying the minimum value of observed periods 
that a unit is under control.</p>
</td></tr>
<tr><td><code id="fect_+3A_max.missing">max.missing</code></td>
<td>
<p>an integer. Units with number of missing values greater than 
it will be removed. Ignored if this parameter is set &quot;NULL&quot;(i.e. <code>max.missing = NULL</code>, the default setting).</p>
</td></tr>
<tr><td><code id="fect_+3A_proportion">proportion</code></td>
<td>
<p>a numeric value specifying pre-treatment periods that have 
observations larger than the proportion of observations at period 0. 
These pre-treatment periods are used used for goodness-of-fit test.
Ignore if <code>se = FALSE</code>. Deafult is <code>proportion = 0.3</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_pre.periods">pre.periods</code></td>
<td>
<p>a vector specifying the range of pre-treatment period used for goodness-of-fit test. If left blank, all 
pre-treatment periods specified by <code>proportion</code> will be used. Ignore if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_f.threshold">f.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the F-statistic in the equivalent test.
Ignore if <code>se = FALSE</code>.  Deafult is <code>f.threshold = 0.5</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_tost.threshold">tost.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the two-one-sided t-test.
If <code>alpha=0.05</code>, TOST checks whether the 90
The default value is 0.36 times the standard deviation of the outcome variable after two-way fixed effects are partialed out.</p>
</td></tr>
<tr><td><code id="fect_+3A_knots">knots</code></td>
<td>
<p>a numeric vector speicfying the knots for b-spline curve trend term.</p>
</td></tr>
<tr><td><code id="fect_+3A_degree">degree</code></td>
<td>
<p>an integer speifcying the order of either the b-spline or the 
polynomial trend term.</p>
</td></tr>
<tr><td><code id="fect_+3A_sfe">sfe</code></td>
<td>
<p>a vector specifying other fixed effects in addition to unit or time fixed effects that is used when <code>method="cfe"</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_cfe">cfe</code></td>
<td>
<p>a vector of lists specifying interactive fixed effects when <code>method="cfe"</code>. 
For each list, the value of the first element is the name of the group variable for which fixed effects are to be estimated.
The value of the second element is the name of a regressor (e.g., a time trend).</p>
</td></tr>
<tr><td><code id="fect_+3A_balance.period">balance.period</code></td>
<td>
<p>a vector of length 2 specifying the range of periods for a balanced sample which has no missing observation in the specified range.</p>
</td></tr>
<tr><td><code id="fect_+3A_fill.missing">fill.missing</code></td>
<td>
<p>a logical flag indicating whether to allow missing observations in this balanced sample. The default is FALSE.</p>
</td></tr>
<tr><td><code id="fect_+3A_placebotest">placeboTest</code></td>
<td>
<p>a logic flag indicating whether to perform placebo test.</p>
</td></tr>
<tr><td><code id="fect_+3A_placebo.period">placebo.period</code></td>
<td>
<p>an integer or a two-element numeric vector specifying the 
range of pre-treatment periods that will be assigned as pseudo treatment periods.</p>
</td></tr>
<tr><td><code id="fect_+3A_carryovertest">carryoverTest</code></td>
<td>
<p>a logic flag indicating whether to perform (no) carryover test.</p>
</td></tr>
<tr><td><code id="fect_+3A_carryover.period">carryover.period</code></td>
<td>
<p>an integer or a two-element numeric vector specifying the 
range of post-treatment periods that will be assigned as pseudo treatment periods.</p>
</td></tr>
<tr><td><code id="fect_+3A_carryover.rm">carryover.rm</code></td>
<td>
<p>an integer specifying the range of post-treatment periods that will be assigned as pseudo treatment periods.</p>
</td></tr>
<tr><td><code id="fect_+3A_loo">loo</code></td>
<td>
<p>a logic flag indicating whether to perform the leave-one-period-out goodness-of-fit test, which is very time-consuming.</p>
</td></tr>
<tr><td><code id="fect_+3A_permute">permute</code></td>
<td>
<p>a logic flag indicating whether to perform permutation test.</p>
</td></tr>
<tr><td><code id="fect_+3A_m">m</code></td>
<td>
<p>an integer specifying the block length in permutation test. Default value is 
<code>m = 2</code>.</p>
</td></tr>
<tr><td><code id="fect_+3A_normalize">normalize</code></td>
<td>
<p>a logic flag indicating whether to scale outcome and 
covariates. Useful for accelerating computing speed when magnitude of data is large. The default is <code>normalize=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>fect</code> implements counterfactual estimators in TSCS data analysis. These estimators first impute counterfactuals for 
each treated observation in a TSCS dataset by fitting an outcome model (fixed effects model, interactive fixed effects model, or
matrix completion) using the untreated observations. They then estimate the individualistic treatment effect for each treated 
observation by subtracting the predicted counterfactual outcome from its observed outcome. Finally, the average treatment effect
on the treated (ATT) or period-specific ATTs are calculated. A placebo test and an equivalence test are included to evaluate the
validity of identification assumptions behind these estimators. Data must be with a dichotomous treatment.
</p>


<h3>Value</h3>

<table>
<tr><td><code>Y.dat</code></td>
<td>
<p>a T-by-N matrix storing data of the outcome variable.</p>
</td></tr>
<tr><td><code>D.dat</code></td>
<td>
<p>a T-by-N matrix storing data of the treatment variable.</p>
</td></tr>
<tr><td><code>I.dat</code></td>
<td>
<p>a T-by-N matrix storing data of the indicator for whether is observed or missing.</p>
</td></tr>
<tr><td><code>Y</code></td>
<td>
<p>name of the outcome variable.</p>
</td></tr>
<tr><td><code>D</code></td>
<td>
<p>name of the treatment variable.</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>name of the time-varying control variables.</p>
</td></tr>
<tr><td><code>index</code></td>
<td>
<p>name of the unit and time indicators.</p>
</td></tr>
<tr><td><code>force</code></td>
<td>
<p>user specified <code>force</code> option.</p>
</td></tr>
<tr><td><code>T</code></td>
<td>
<p>the number of time periods.</p>
</td></tr>
<tr><td><code>N</code></td>
<td>
<p>the total number of units.</p>
</td></tr>
<tr><td><code>p</code></td>
<td>
<p>the number of time-varying observables.</p>
</td></tr>
<tr><td><code>r.cv</code></td>
<td>
<p>the number of factors included in the model &ndash; either
supplied by users or automatically chosen via cross-validation.</p>
</td></tr>
<tr><td><code>lambda.cv</code></td>
<td>
<p>the optimal hyper-parameter in matrix completion method
chosen via cross-validation.</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>coefficients of time-varying observables from the
interactive fixed effect model.</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>the mean squared error of interactive fixed effect model.</p>
</td></tr>
<tr><td><code>IC</code></td>
<td>
<p>the information criterion.</p>
</td></tr>
<tr><td><code>est</code></td>
<td>
<p>result of the interactive fixed effect model based on
observed values.</p>
</td></tr>
<tr><td><code>MSPE</code></td>
<td>
<p>mean squared prediction error of the cross-validated model.</p>
</td></tr>
<tr><td><code>CV.out</code></td>
<td>
<p>result of the cross-validation procedure.</p>
</td></tr>
<tr><td><code>niter</code></td>
<td>
<p>the number of iterations in the estimation of the
interactive fixed effect model.</p>
</td></tr>
<tr><td><code>factor</code></td>
<td>
<p>estimated time-varying factors.</p>
</td></tr>
<tr><td><code>lambda</code></td>
<td>
<p>estimated loadings.</p>
</td></tr>
<tr><td><code>lambda.tr</code></td>
<td>
<p>estimated loadings for treated units.</p>
</td></tr>
<tr><td><code>lambda.co</code></td>
<td>
<p>estimated loadings for control units.</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>estimated ground mean. </p>
</td></tr>
<tr><td><code>xi</code></td>
<td>
<p>estimated time fixed effects.</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>estimated unit fixed effects.</p>
</td></tr>
<tr><td><code>alpha.tr</code></td>
<td>
<p>estimated unit fixed effects for treated units.</p>
</td></tr>
<tr><td><code>alpha.co</code></td>
<td>
<p>estimated unit fixed effects for control units.</p>
</td></tr>
<tr><td><code>validX</code></td>
<td>
<p>a logic value indicating if multicollinearity exists.</p>
</td></tr>
<tr><td><code>validF</code></td>
<td>
<p>a logic value indicating if factor exists.</p>
</td></tr>
<tr><td><code>id</code></td>
<td>
<p>a vector of unit IDs.</p>
</td></tr>
<tr><td><code>rawtime</code></td>
<td>
<p>a vector of time periods.</p>
</td></tr>
<tr><td><code>obs.missing</code></td>
<td>
<p>a matrix stroing status of each unit at each time point.</p>
</td></tr>
<tr><td><code>Y.ct</code></td>
<td>
<p>a T-by-N matrix storing the predicted Y(0).</p>
</td></tr>
<tr><td><code>eff</code></td>
<td>
<p>a T-by-N matrix storing the difference between actual outcome and predicted Y(0).</p>
</td></tr>
<tr><td><code>res</code></td>
<td>
<p>residuals for observed values.</p>
</td></tr>
<tr><td><code>eff.pre</code></td>
<td>
<p>difference between actual outcome and predicted Y(0) for 
observations of treated units under control.</p>
</td></tr>
<tr><td><code>eff.pre.equiv</code></td>
<td>
<p>difference between actual outcome and predicted Y(0) for 
observations of treated units under control based on baseline (two-way fixed effects) model.</p>
</td></tr>
<tr><td><code>pre.sd</code></td>
<td>
<p>by period residual standard deviation for estimated pre-treatment 
average treatment effects.</p>
</td></tr>
<tr><td><code>att.avg</code></td>
<td>
<p>average treatment effect on the treated.</p>
</td></tr>
<tr><td><code>att.avg.unit</code></td>
<td>
<p>by unit average treatment effect on the treated.</p>
</td></tr>
<tr><td><code>time</code></td>
<td>
<p>term for switch-on treatment effect.</p>
</td></tr>
<tr><td><code>count</code></td>
<td>
<p>count of each term for switch-on treatment effect.</p>
</td></tr>
<tr><td><code>att</code></td>
<td>
<p>switch-on treatment effect.</p>
</td></tr>
<tr><td><code>time.off</code></td>
<td>
<p>term for switch-off treatment effect.</p>
</td></tr>
<tr><td><code>att.off</code></td>
<td>
<p>switch-off treatment effect.</p>
</td></tr>
<tr><td><code>count.off</code></td>
<td>
<p>count of each term for switch-off treatment effect.</p>
</td></tr>
<tr><td><code>att.placebo</code></td>
<td>
<p>average treatment effect for placebo period.</p>
</td></tr>
<tr><td><code>att.carryover</code></td>
<td>
<p>average treatment effect for carryover period.</p>
</td></tr>
<tr><td><code>eff.calendar</code></td>
<td>
<p>average treatment effect for each calendar period.</p>
</td></tr>
<tr><td><code>eff.calendar.fit</code></td>
<td>
<p>loess fitted values of average treatment effect for each calendar period.</p>
</td></tr>
<tr><td><code>N.calandar</code></td>
<td>
<p>number of treated observations at each calendar period.</p>
</td></tr>
<tr><td><code>balance.avg.att</code></td>
<td>
<p>average treatment effect for the balance sample.</p>
</td></tr>
<tr><td><code>balance.att</code></td>
<td>
<p>switch-on treatment effect for the balance sample.</p>
</td></tr>
<tr><td><code>balance.time</code></td>
<td>
<p>term of switch-on treatment effect for the balance sample.</p>
</td></tr>
<tr><td><code>balance.count</code></td>
<td>
<p>count of each term for switch-on treatment effect for the balance sample.</p>
</td></tr>
<tr><td><code>balance.att.placebo</code></td>
<td>
<p>average treatment effect for placebo period of the balance sample.</p>
</td></tr>
<tr><td><code>group.att</code></td>
<td>
<p>average treatment effect for different groups.</p>
</td></tr>
<tr><td><code>group.output</code></td>
<td>
<p>a list saving the switch-on treatment effects for different groups.</p>
</td></tr>
<tr><td><code>est.att.avg</code></td>
<td>
<p>inference for <code>att.avg</code>.</p>
</td></tr>
<tr><td><code>est.att.avg.unit</code></td>
<td>
<p>inference for <code>att.avg.unit</code>.</p>
</td></tr>
<tr><td><code>est.att</code></td>
<td>
<p>inference for <code>att.on</code>.</p>
</td></tr>
<tr><td><code>est.att.off</code></td>
<td>
<p>inference for <code>att.off</code>.</p>
</td></tr>
<tr><td><code>est.placebo</code></td>
<td>
<p>inference for <code>att.placebo</code>.</p>
</td></tr>
<tr><td><code>est.carryover</code></td>
<td>
<p>inference for <code>att.carryover</code>.</p>
</td></tr>
<tr><td><code>est.eff.calendar</code></td>
<td>
<p>inference for <code>eff.calendar</code>.</p>
</td></tr>
<tr><td><code>est.eff.calendar.fit</code></td>
<td>
<p>inference for <code>eff.calendar.fit</code>.</p>
</td></tr>
<tr><td><code>est.balance.att</code></td>
<td>
<p>inference for <code>balance.att</code>.</p>
</td></tr>
<tr><td><code>est.balance.avg</code></td>
<td>
<p>inference for <code>balance.avg.att</code>.</p>
</td></tr>
<tr><td><code>est.balance.placebo</code></td>
<td>
<p>inference for <code>balance.att.placebo</code>.</p>
</td></tr>
<tr><td><code>est.beta</code></td>
<td>
<p>inference for <code>beta</code>.</p>
</td></tr>
<tr><td><code>est.group.att</code></td>
<td>
<p>inference for <code>group.att</code>.</p>
</td></tr>
<tr><td><code>est.group.output</code></td>
<td>
<p>inference for <code>group.output</code>.</p>
</td></tr>  
<tr><td><code>att.avg.boot</code></td>
<td>
<p>bootstrap results for <code>att.avg</code>.</p>
</td></tr>
<tr><td><code>att.avg.unit.boot</code></td>
<td>
<p>bootstrap results for <code>att.avg.unit</code>.</p>
</td></tr>
<tr><td><code>att.count.boot</code></td>
<td>
<p>bootstrap results for <code>count</code>.</p>
</td></tr>
<tr><td><code>att.off.boot</code></td>
<td>
<p>bootstrap results for <code>att.avg.off</code>.</p>
</td></tr>
<tr><td><code>att.off.count.boot</code></td>
<td>
<p>bootstrap results for <code>count.off</code>.</p>
</td></tr>
<tr><td><code>att.placebo.boot</code></td>
<td>
<p>bootstrap results for <code>att.placebo</code>.</p>
</td></tr>
<tr><td><code>att.carryover.boot</code></td>
<td>
<p>bootstrap results for <code>att.carryover</code>.</p>
</td></tr>
<tr><td><code>balance.att.boot</code></td>
<td>
<p>bootstrap results for <code>balance.att</code>.</p>
</td></tr>
<tr><td><code>att.bound</code></td>
<td>
<p>equivalence confidence interval for equivalence test.</p>
</td></tr>
<tr><td><code>att.off.bound</code></td>
<td>
<p>equivalence confidence interval for equivalence test for 
switch-off effect.</p>
</td></tr>
<tr><td><code>beta.boot</code></td>
<td>
<p>bootstrap results for <code>beta</code>.</p>
</td></tr>
<tr><td><code>test.out</code></td>
<td>
<p>goodness-of-fit test and equivalent test results for pre-treatment fitting check.</p>
</td></tr>
<tr><td><code>loo.test.out</code></td>
<td>
<p>leave-one-period-out goodness-of-fit test and equivalent test results for pre-treatment fitting check.</p>
</td></tr>
<tr><td><code>permute</code></td>
<td>
<p>permutation test results for sharp null hypothesis.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu; Ziyi Liu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.fect">plot.fect</a></code> and <code><a href="#topic+print.fect">print.fect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
out &lt;- fect(Y ~ D + X1 + X2, data = simdata1, 
            index = c("id","time"), force = "two-way",
            CV = TRUE, r = c(0, 5), se = 0, parallel = FALSE) 
</code></pre>

<hr>
<h2 id='fect-internal'>Internal FEct Functions</h2><span id='topic+XXinv'></span><span id='topic+beta_iter'></span><span id='topic+beta_iter_ub'></span><span id='topic+data_ub_adj'></span><span id='topic+Y_demean'></span><span id='topic+fe_add'></span><span id='topic+fe_add2'></span><span id='topic+fe_ad_iter'></span><span id='topic+fe_ad_covar_iter'></span><span id='topic+fe_ad_inter_iter'></span><span id='topic+fe_ad_inter_covar_iter'></span><span id='topic+_gsynth_XXinv'></span><span id='topic+_gsynth_beta_iter'></span><span id='topic+_gsynth_beta_iter_ub'></span><span id='topic+_gsynth_inter_fe'></span><span id='topic+_gsynth_inter_fe_ub'></span><span id='topic+_gsynth_inter_fe_mc'></span><span id='topic+_gsynth_data_ub_adj'></span><span id='topic+_gsynth_panel_beta'></span><span id='topic+_gsynth_panel_est'></span><span id='topic+_gsynth_panel_factor'></span><span id='topic+_gsynth_panel_factor_ub'></span><span id='topic+_gsynth_panel_fe'></span><span id='topic+_gsynth_panel_fe_ub'></span><span id='topic+_gsynth_Y_demean'></span><span id='topic+_gsynth_fe_add'></span><span id='topic+_gsynth_fe_add2'></span><span id='topic+_gsynth_fe_ad_iter'></span><span id='topic+_gsynth_fe_ad_covar_iter'></span><span id='topic+_gsynth_fe_ad_inter_iter'></span><span id='topic+_gsynth_fe_ad_inter_covar_iter'></span><span id='topic+inter_fe'></span><span id='topic+inter_fe_ub'></span><span id='topic+inter_fe_mc'></span><span id='topic+panel_beta'></span><span id='topic+panel_est'></span><span id='topic+panel_factor'></span><span id='topic+panel_factor_ub'></span><span id='topic+panel_fe'></span><span id='topic+panel_fe_ub'></span><span id='topic+fect.default'></span><span id='topic+fect.formula'></span><span id='topic+fect.fe'></span><span id='topic+fect.mc'></span><span id='topic+interFE.default'></span><span id='topic+interFE.formula'></span><span id='topic+cv.sample'></span><span id='topic+equiv_test'></span>

<h3>Description</h3>

<p>Internal fect functions
</p>


<h3>Details</h3>

<p>These are not to be called by the user (or in some cases are just
waiting for proper documentation to be written :).
</p>

<hr>
<h2 id='get.cohort'>Get the Cohort Index</h2><span id='topic+get.cohort'></span>

<h3>Description</h3>

<p>Gets the cohort index given a panel data.</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.cohort(data, D, index, 
                  varname = NULL, entry.time = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.cohort_+3A_data">data</code></td>
<td>
<p>a data frame, can be a balanced or unbalanced panel data.</p>
</td></tr>
<tr><td><code id="get.cohort_+3A_d">D</code></td>
<td>
<p>the treatment indicator. The treatment should be binary (0 and 1).</p>
</td></tr>
<tr><td><code id="get.cohort_+3A_index">index</code></td>
<td>
<p>a two-element string vector specifying the unit and time indicators. Must be of length 2. Every observation should be uniquely defined by the pair of the unit and time indicator.</p>
</td></tr>
<tr><td><code id="get.cohort_+3A_varname">varname</code></td>
<td>
<p>a string specifying the name for the generated cohort index.</p>
</td></tr>
<tr><td><code id="get.cohort_+3A_entry.time">entry.time</code></td>
<td>
<p>a list of intervals for first get-treated time.</p>
</td></tr>    
</table>


<h3>Details</h3>

<p><code>get.cohort</code> pre-processes the data and generates the index for different cohorts..
</p>


<h3>Value</h3>

<table>
<tr><td><code>data</code></td>
<td>
<p>a new data frame containing the cohort index.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu, Ziyi Liu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fect">fect</a></code> and <code><a href="#topic+print.fect">print.fect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
simdata.cohort &lt;- get.cohort(data = simdata,D = 'D',index = c("id","time"))
</code></pre>

<hr>
<h2 id='interFE'>Interactive Fixed Effects Models</h2><span id='topic+interFE'></span>

<h3>Description</h3>

<p>Estimating interactive fixed effect models.</p>


<h3>Usage</h3>

<pre><code class='language-R'>interFE(formula = NULL, data, Y, X, index, r = 0, force = "none",
         se = TRUE, nboots = 500, seed = NULL, 
         tol = 1e-3, binary = FALSE, QR = FALSE, normalize = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interFE_+3A_formula">formula</code></td>
<td>
<p>an object of class &quot;formula&quot;: a symbolic description of the model to be fitted. </p>
</td></tr>
<tr><td><code id="interFE_+3A_data">data</code></td>
<td>
<p>a data frame (must be with a dichotomous treatment but balanced
is not required).</p>
</td></tr>
<tr><td><code id="interFE_+3A_y">Y</code></td>
<td>
<p>outcome.</p>
</td></tr>
<tr><td><code id="interFE_+3A_x">X</code></td>
<td>
<p>time-varying covariates.</p>
</td></tr>
<tr><td><code id="interFE_+3A_index">index</code></td>
<td>
<p>a two-element string vector specifying the unit (group)
and time indicators. Must be of length 2.</p>
</td></tr>
<tr><td><code id="interFE_+3A_r">r</code></td>
<td>
<p>an integer specifying the number of factors.</p>
</td></tr>
<tr><td><code id="interFE_+3A_force">force</code></td>
<td>
<p>a string indicating whether unit or time fixed effects will be
imposed. Must be one of the following,
&quot;none&quot;, &quot;unit&quot;, &quot;time&quot;, or &quot;two-way&quot;. The default is &quot;unit&quot;.</p>
</td></tr>
<tr><td><code id="interFE_+3A_se">se</code></td>
<td>
<p>a logical flag indicating whether uncertainty estimates will
be produced via bootstrapping.</p>
</td></tr>
<tr><td><code id="interFE_+3A_nboots">nboots</code></td>
<td>
<p>an integer specifying the number of bootstrap
runs. Ignored if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="interFE_+3A_seed">seed</code></td>
<td>
<p>an integer that sets the seed in random number
generation. Ignored if  <code>se = FALSE</code> and <code>r</code> is specified.</p>
</td></tr>
<tr><td><code id="interFE_+3A_tol">tol</code></td>
<td>
<p>a numeric value that specifies tolerate level.</p>
</td></tr>
<tr><td><code id="interFE_+3A_binary">binary</code></td>
<td>
<p>a logical flag indicating whether a probit link function will be 
used.</p>
</td></tr>
<tr><td><code id="interFE_+3A_qr">QR</code></td>
<td>
<p>a logical flag indicating whether QR decomposition will be used for 
factor analysis in probit model.</p>
</td></tr>
<tr><td><code id="interFE_+3A_normalize">normalize</code></td>
<td>
<p>a logic flag indicating whether to scale outcome and 
covariates. Useful for accelerating computing speed when magnitude of data is large.The default is <code>normalize=FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>interFE</code> estimates interactive fixed effect models proposed by
Bai (2009).
</p>


<h3>Value</h3>

<table>
<tr><td><code>beta</code></td>
<td>
<p>estimated coefficients.</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>estimated grand mean.</p>
</td></tr>
<tr><td><code>factor</code></td>
<td>
<p>estimated factors.</p>
</td></tr>
<tr><td><code>lambda</code></td>
<td>
<p>estimated factor loadings.</p>
</td></tr>
<tr><td><code>VNT</code></td>
<td>
<p>a diagonal matrix that consists of the r eigenvalues.</p>
</td></tr>
<tr><td><code>niter</code></td>
<td>
<p>the number of iteration before convergence.</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>estimated unit fixed effect (if <code>force</code> is &quot;unit&quot; or &quot;two-way&quot;).</p>
</td></tr>
<tr><td><code>xi</code></td>
<td>
<p>estimated time fixed effect (if <code>force</code> is &quot;time&quot; or &quot;two-way&quot;).</p>
</td></tr>
<tr><td><code>residuals</code></td>
<td>
<p>residuals of the estimated interactive fixed effect model.</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>mean squared error of the residuals.</p>
</td></tr>
<tr><td><code>IC</code></td>
<td>
<p>the information criterion.</p>
</td></tr>
<tr><td><code>ValidX</code></td>
<td>
<p>a logical flag specifying whether there are valid covariates.</p>
</td></tr>
<tr><td><code>dat.Y</code></td>
<td>
<p>a matrix storing data of the outcome variable.</p>
</td></tr>
<tr><td><code>dat.X</code></td>
<td>
<p>an array storing data of the independent variables.</p>
</td></tr>
<tr><td><code>Y</code></td>
<td>
<p>name of the outcome variable.</p>
</td></tr>
<tr><td><code>X</code></td>
<td>
<p>name of the time-varying control variables.</p>
</td></tr>
<tr><td><code>index</code></td>
<td>
<p>name of the unit and time indicators.</p>
</td></tr>
<tr><td><code>est.table</code></td>
<td>
<p>a table of the estimation results.</p>
</td></tr>
<tr><td><code>est.boot</code></td>
<td>
<p>a matrix storing results from bootstraps.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed
Effects.&quot; Econometrica 77:1229&ndash;1279.</p>


<h3>See Also</h3>

<p><code><a href="#topic+print.interFE">print.interFE</a></code> and <code><a href="#topic+fect">fect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
d &lt;- simdata1[-(1:150),] # remove the treated units
out &lt;- interFE(Y ~ X1 + X2, data = d, index=c("id","time"),
               r = 2, force = "two-way", nboots = 50)
</code></pre>

<hr>
<h2 id='plot.fect'>Plotting</h2><span id='topic+plot.fect'></span>

<h3>Description</h3>

<p>Visualizes estimation results of the matrix completion method.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fect'
plot(x, type = NULL, loo = "FALSE", 
            highlight = NULL, plot.ci = NULL, show.points = NULL,
            show.group = NULL, bound = NULL, vis = NULL,
            count = TRUE, proportion = 0.3, pre.periods = NULL,
            f.threshold = NULL, tost.threshold = NULL,
            effect.bound.ratio = FALSE, 
            stats = NULL, stats.labs = NULL, 
            main = NULL, 
            xlim = NULL, ylim = NULL, xlab = NULL, ylab = NULL, 
            gridOff = FALSE, legendOff = FALSE, legend.pos = NULL, legend.nrow = NULL,
            legend.labs = NULL, stats.pos = NULL, theme.bw = TRUE,
            nfactors = NULL, include.FE = TRUE,
            id = NULL,
            cex.main = NULL, cex.main.sub = NULL, cex.axis = NULL,
            cex.lab = NULL, cex.legend = NULL, cex.text = NULL,
            axis.adjust = FALSE, axis.lab = "both", axis.lab.gap = c(0, 0),
            start0 = FALSE,
            return.test = FALSE,
            balance = NULL,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.fect_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+fect">fect</a></code> object.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_type">type</code></td>
<td>
<p>a string specifying the type of the plot. 
<code>"gap"</code> plots the estimated period-wise ATT (dynamic treatment effects), 
<code>"equiv"</code> shows the visualization of the equivalence test, 
<code>"exit"</code> plots the estimated period-wise switch-off effects,
<code>"status"</code> shows the treatment status of all observations, 
<code>"factors"</code> plots the estimated factor and time fixed effects,
<code>"loadings"</code> plots the estimated factor loadings and unit fixed effects,
<code>"calendar"</code> plots the estimated treatment effects for each calendar period,
and <code>"box"</code> visualizes the estimated individualistic treatment effects of observations.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_loo">loo</code></td>
<td>
<p>a logical flag indicating whether to use the leave-one-period-out pre-treatment effects for the visualization and tests.</p>
</td></tr>  
<tr><td><code id="plot.fect_+3A_highlight">highlight</code></td>
<td>
<p>a logical flag indicating whether to highlight the periods for the carryover and placebo test.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_plot.ci">plot.ci</code></td>
<td>
<p>a string specifying the confidence interval. Choose from: &quot;0.9&quot;, &quot;0.95&quot;, or &quot;none&quot;.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_show.points">show.points</code></td>
<td>
<p>a logical flag indicating whether to represent treatment effects by points or point-ranges. Default to TRUE.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_show.group">show.group</code></td>
<td>
<p>a string indicating the group to be visualized.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_bound">bound</code></td>
<td>
<p>a string that specifies the bounds to be plotted for equivalence test 
for pre-treatment fit checking. Choose from: &quot;both&quot;, &quot;equiv&quot;, &quot;min&quot; and &quot;none&quot;.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_vis">vis</code></td>
<td>
<p>A string specifying whether to plot the dots for placebo plots.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_count">count</code></td>
<td>
<p>a logical flag controlling whether to show the count of each term 
for gap plot.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_proportion">proportion</code></td>
<td>
<p>a positive value specifying periods at which observations equal to 
or greater than the proporation of the largest number of observations at a certain 
period. Default to 0.3.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_pre.periods">pre.periods</code></td>
<td>
<p>a vector specifying the range of pre-treatment period used for goodness-of-fit test. If left blank, all 
pre-treatment periods specified by <code>proportion</code> will be used. Ignore if <code>se = FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_f.threshold">f.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the F-statistic in the equivalent test.
Ignore if <code>se = FALSE</code>.  Deafult is <code>f.threshold = 0.5</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_tost.threshold">tost.threshold</code></td>
<td>
<p>a numeric value specifying the threshold for the two-one-sided t-test.
If <code>alpha=0.05</code>, TOST checks whether the 90
The default value is 0.36 times the standard deviation of the outcome variable after two-way fixed effects are partialed out.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_effect.bound.ratio">effect.bound.ratio</code></td>
<td>
<p>a logical value specifiying whether to annotate 
the ratio of estimated average treatment effects / minimun bound.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_stats">stats</code></td>
<td>
<p>a string that specifices what statistics to be shown. For <code>"gap"</code> plot, choose from <code>c("none", "F.p", "equiv.p", "F.equiv.p",)</code>, for 
<code>"placebo"</code> plot, choose from <code>c("none", "placebo.p", "equiv.placebo.p")</code>, and for &quot;carryover&quot; plot, choose from <code>c("none", "carryover.p")</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_stats.labs">stats.labs</code></td>
<td>
<p>a string specifying the label for the statistics specified by <code>stats</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_main">main</code></td>
<td>
<p>a string that controls the title of the plot. If not
supplied, no title will be shown.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_xlim">xlim</code></td>
<td>
<p>a two-element numeric vector specifying the range of x-axis. When 
class of time varible is string, must specify not original value but a counting number e.g. <code>xlim=c(1,30)</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_ylim">ylim</code></td>
<td>
<p>a two-element numeric vector specifying the range of y-axis.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_xlab">xlab</code></td>
<td>
<p>a string indicating the label of the x-axis.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_ylab">ylab</code></td>
<td>
<p>a string indicating the label of the y-axis.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_gridoff">gridOff</code></td>
<td>
<p>a logical flag indicating whether to remove the grid lines for the status plot.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_legendoff">legendOff</code></td>
<td>
<p>a logical flag controlling whether to show the legend.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_legend.pos">legend.pos</code></td>
<td>
<p>a string specifying the position of legend. If left blank, 
legend will be setted at the bottom.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_legend.nrow">legend.nrow</code></td>
<td>
<p>an integer speficying rows of legend.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_legend.labs">legend.labs</code></td>
<td>
<p>a string vector for user-defined legends.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_stats.pos">stats.pos</code></td>
<td>
<p>a numeric vector of length 2 specifying the postion for 
labels of test statistic value.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_theme.bw">theme.bw</code></td>
<td>
<p>a logical flag specifying whether to use the black and 
white theme.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_nfactors">nfactors</code></td>
<td>
<p>a integer controlling the number of factors to be shown when <code>type='factors'</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_include.fe">include.FE</code></td>
<td>
<p>a loical flag indicating whether to keep the fixed effects when <code>type='factors'</code> or <code>type='loadings'</code>.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_id">id</code></td>
<td>
<p>a string vector specifying a sub-group of units that are to be 
plotted for treatment status(<code>type = "status"</code>).</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.main">cex.main</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the main title.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.main.sub">cex.main.sub</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the subtitles.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.axis">cex.axis</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the texts on the axes.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.lab">cex.lab</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the axis titles.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.legend">cex.legend</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the legend.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_cex.text">cex.text</code></td>
<td>
<p>a numeric value (pt) specifying the fontsize of the annotations.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_axis.adjust">axis.adjust</code></td>
<td>
<p>a logic flag indicating whether to adjust labels on x-axis. 
Useful when class of time variable is string and data magnitude is large.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_axis.lab">axis.lab</code></td>
<td>
<p>a string indicating whether labels on the x- and y-axis will be shown. There are four options: <code>"both"</code> (default): labels on both axes will be shown; <code>"unit"</code>: only labels on y-axis will be shown; <code>"time"</code>: only labels on the x-axis will be shown; &quot;none&quot;: no labels will be shown.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_axis.lab.gap">axis.lab.gap</code></td>
<td>
<p>a numeric vector setting the gaps between labels on the x- or y-axis for <code>"missing"</code> plot. Default is <code>axis.lab.gap = c(0, 0)</code>, which means that all labels will be shown. Useful for datasets with large N or T.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_start0">start0</code></td>
<td>
<p>a logical flag indicating whether to index the start of the treatment as period 0 rather than period 1. Default to FALSE.</p>
</td></tr>  
<tr><td><code id="plot.fect_+3A_return.test">return.test</code></td>
<td>
<p>a logical flag indicating whether to return the results of statistical tests.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_balance">balance</code></td>
<td>
<p>a logical flag indicating whether to plot the dynamic treatment effects for the balance sample.</p>
</td></tr>
<tr><td><code id="plot.fect_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>plot.fect</code> visualizes the estimation results obtained by <code>fect</code>.
</p>


<h3>Value</h3>

<table>
<tr><td><code>p</code></td>
<td>
<p>a ggplot2 object saving the graph.</p>
</td></tr>
<tr><td><code>test.out</code></td>
<td>
<p>a list storing the results of statistical tests if <code>return.test=TRUE</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu, Ziyi Liu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fect">fect</a></code> and <code><a href="#topic+print.fect">print.fect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
out &lt;- fect(Y ~ D + X1 + X2, data = simdata1, 
            index = c("id","time"), force = "two-way",
            CV = TRUE, r = c(0, 5), se = 0, parallel = FALSE) 
plot(out)
plot(out,type='status')
plot(out,show.points = FALSE)
</code></pre>

<hr>
<h2 id='print.fect'>Print Results</h2><span id='topic+print.fect'></span>

<h3>Description</h3>

<p>Print results of the matrix completion method.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'fect'
print(x, switch.on = TRUE,
       switch.off = FALSE,time.on.lim = NULL, time.off.lim = NULL, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.fect_+3A_x">x</code></td>
<td>
<p>a <code><a href="#topic+fect">fect</a></code> object.</p>
</td></tr>
<tr><td><code id="print.fect_+3A_switch.on">switch.on</code></td>
<td>
<p>a logical value that specifies whether to print switch.on effect.</p>
</td></tr>
<tr><td><code id="print.fect_+3A_switch.off">switch.off</code></td>
<td>
<p>a logical value that specifies whether to print switch.off effect.</p>
</td></tr>
<tr><td><code id="print.fect_+3A_time.on.lim">time.on.lim</code></td>
<td>
<p>a two-element numeric vector specifying the range of term of 
switch-on treatment effects. e.g. <code>time.on.lim = c(-1,1)</code>.</p>
</td></tr>
<tr><td><code id="print.fect_+3A_time.off.lim">time.off.lim</code></td>
<td>
<p>a two-element numeric vector specifying the range of term 
of switch-off treatment effects. e.g. <code>time.off.lim = c(-1,1)</code>.</p>
</td></tr>
<tr><td><code id="print.fect_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.</p>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu; Ziyi Liu
</p>


<h3>References</h3>

  
<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed Effects.&quot; Econometrica.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference with Interactive Fixed Effects Models.&quot; Political 
Analysis. 
</p>
<p>Athey, Susan, et al. 2021 &quot;Matrix completion methods for causal panel data models.&quot; Journal of the American Statistical Association. 
</p>
<p>Licheng Liu, et al. 2022. &quot;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional 
Data.&quot; American Journal of Political Science. 
</p>
<p>For more details about the matrix completion method, see <a href="https://github.com/susanathey/MCPanel">https://github.com/susanathey/MCPanel</a>. 
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fect">fect</a></code> and <code><a href="#topic+plot.fect">plot.fect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
out &lt;- fect(Y ~ D + X1 + X2, data = simdata1, 
            index = c("id","time"), force = "two-way",
            CV = TRUE, r = c(0, 5), se = 0, parallel = FALSE) 
print(out)
</code></pre>

<hr>
<h2 id='print.interFE'>Print Results</h2><span id='topic+print.interFE'></span>

<h3>Description</h3>

<p>Print  results of interactive fixed effects estimation.</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'interFE'
print(x, ...)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.interFE_+3A_x">x</code></td>
<td>
<p>an <code><a href="#topic+interFE">interFE</a></code> object.</p>
</td></tr>
<tr><td><code id="print.interFE_+3A_...">...</code></td>
<td>
<p>other argv.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.</p>


<h3>Author(s)</h3>

<p>Licheng Liu; Ye Wang; Yiqing Xu
</p>


<h3>References</h3>

<p>Jushan Bai. 2009. &quot;Panel Data Models with Interactive Fixed
Effects.&quot; Econometrica 77:1229&ndash;1279.</p>


<h3>See Also</h3>

<p><code><a href="#topic+interFE">interFE</a></code> and <code><a href="#topic+fect">fect</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>library(fect)
data(fect)
d &lt;- simdata1[-(1:150),] # remove the treated units
out &lt;- interFE(Y ~ X1 + X2, data = d, index=c("id","time"),
               r = 2, force = "two-way", nboots = 50)
print(out)
</code></pre>

<hr>
<h2 id='simdata'>Simulated data</h2><span id='topic+simdata'></span>

<h3>Description</h3>

<p>A simulated dataset with continuous outcomes.</p>


<h3>Format</h3>

<p>dataframe</p>


<h3>References</h3>

<p>Liu, Licheng, Ye Wang, and Yiqing Xu. 2022. &ldquo;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional Data.&rdquo; American Journal of Political Science, forthcoming.
</p>

<hr>
<h2 id='simdata1'>Simulated data</h2><span id='topic+simdata1'></span>

<h3>Description</h3>

<p>A simulated dataset with continuous outcomes.</p>


<h3>Format</h3>

<p>dataframe</p>


<h3>References</h3>

<p>Liu, Licheng, Ye Wang, and Yiqing Xu. 2022. &ldquo;A Practical Guide to Counterfactual Estimators for Causal Inference with Time-Series Cross-Sectional Data.&rdquo; American Journal of Political Science, forthcoming.
</p>

<hr>
<h2 id='turnout'>EDR and voter turnout in the US</h2><span id='topic+turnout'></span>

<h3>Description</h3>

<p>State-level voter turnout data.</p>


<h3>Format</h3>

<p>dataframe</p>


<h3>References</h3>

<p>Melanie Jean Springer. 2014. How the States Shaped the
Nation: American Electoral Institutions and Voter Turnout,
1920-2000. University of Chicago Press.
</p>
<p>Yiqing Xu. 2017. &quot;Generalized Synthetic Control Method: Causal Inference
with Interactive Fixed Effects Models.&quot; Political Analysis.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
