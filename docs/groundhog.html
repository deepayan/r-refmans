<!DOCTYPE html><html><head><title>Help for package groundhog</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {groundhog}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cross.toc'><p>Show toc table with multiple packages</p></a></li>
<li><a href='#get.groundhog.folder'><p>Get current local path to groundhog folder</p></a></li>
<li><a href='#get.snowball'><p>Generates dataframe with all dependencies needed to install a package, in the order they will be loaded</p></a></li>
<li><a href='#groundhog.library'><p>Install &amp; load CRAN, GitHub, and GitLab packages as current on given date</p></a></li>
<li><a href='#meta.groundhog'><p>Load a specific version of groundhog, as available on a given date</p></a></li>
<li><a href='#restore.library'><p>Restore default library of packages, undoing all changes made by groundhog</p></a></li>
<li><a href='#set.groundhog.folder'><p>Set groundhog folder location</p></a></li>
<li><a href='#toc'><p>Show CRAN publication dates for all versions of a given package</p></a></li>
<li><a href='#try.renaming.method.again'><p>Attempt faster method of copying packages across libraries in the future</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Version-Control for CRAN, GitHub, and GitLab Packages</td>
</tr>
<tr>
<td>Version:</td>
<td>3.2.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Make R scripts reproducible, by ensuring that
    every time a given script is run, the same version of the used packages are
    loaded (instead of whichever version the user running the script happens to
    have installed). This is achieved by using the command
    groundhog.library() instead of the base command library(), and including a
    date in the call. The date is used to call on the same version of the
    package every time (the most recent version available at that date).
    Load packages  from CRAN, GitHub, or Gitlab.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://groundhogr.com/">https://groundhogr.com/</a>,
<a href="https://github.com/CredibilityLab/groundhog">https://github.com/CredibilityLab/groundhog</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/CredibilityLab/groundhog/issues">https://github.com/CredibilityLab/groundhog/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>utils</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>git2r, remotes</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-03 21:48:50 UTC; _sohn</td>
</tr>
<tr>
<td>Author:</td>
<td>Uri Simonsohn <a href="https://orcid.org/0000-0002-8601-7211"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Hugo Gruson <a href="https://orcid.org/0000-0002-4094-1476"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb,
    aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Uri Simonsohn &lt;urisohn@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-03 22:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cross.toc'>Show toc table with multiple packages</h2><span id='topic+cross.toc'></span>

<h3>Description</h3>

<p>Show toc table with multiple packages
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cross.toc(pkgs, date1 = "1970-1-1", date2 = Sys.Date())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cross.toc_+3A_pkgs">pkgs</code></td>
<td>
<p>character vector containing the package names.</p>
</td></tr>
<tr><td><code id="cross.toc_+3A_date1">date1</code>, <code id="cross.toc_+3A_date2">date2</code></td>
<td>
<p>date range to consider (in the format &quot;%Y-%m-%d&quot;).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> with 3 columns:
</p>

<dl>
<dt>Version</dt><dd><p>The package version number</p>
</dd>
<dt>Published</dt><dd><p>The date at which the specific version was published</p>
</dd>
<dt>Package</dt><dd><p>The package name</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+toc">toc()</a></code> for the same function for a single package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
cross.toc(c("magrittr", "R"))
cross.toc(c("magrittr", "rlang"), date1 = "2012-02-01", date2 = "2020-02-01")

## End(Not run)

</code></pre>

<hr>
<h2 id='get.groundhog.folder'>Get current local path to groundhog folder</h2><span id='topic+get.groundhog.folder'></span>

<h3>Description</h3>

<p>Get current local path to groundhog folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.groundhog.folder()
</code></pre>


<h3>Value</h3>

<p>the path to the groundhog folder, the meta-library where
<code><a href="#topic+groundhog.library">groundhog.library()</a></code> downloads and stores packages that can be loaded
</p>


<h3>Note</h3>

<p>you can change the location of this folder with the command
<code>set.groundhog.folder("path")</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+set.groundhog.folder">set.groundhog.folder()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get.groundhog.folder()

## End(Not run)

</code></pre>

<hr>
<h2 id='get.snowball'>Generates dataframe with all dependencies needed to install a package, in the order they will be loaded</h2><span id='topic+get.snowball'></span>

<h3>Description</h3>

<p>Generates dataframe with all dependencies needed to install a package, in the order they will be loaded
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.snowball(pkg, date, include.suggests = FALSE, force.install = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.snowball_+3A_pkg">pkg</code></td>
<td>
<p>character string, name of target package to load (and install if needed),</p>
</td></tr>
<tr><td><code id="get.snowball_+3A_date">date</code></td>
<td>
<p>character string  (yyyy-mm-dd), or date value, with the date which determines the
version of the package, and all dependencies, to be loaded (and installed if needed).</p>
</td></tr>
<tr><td><code id="get.snowball_+3A_include.suggests">include.suggests</code></td>
<td>
<p>logical, defaults to <code>FALSE</code>. When set to <code>TRUE</code>, includes
dependencies classified in the DESCRIPTION file as <code>suggested</code>.</p>
</td></tr>
<tr><td><code id="get.snowball_+3A_force.install">force.install</code></td>
<td>
<p>logical, defaults to <code>FALSE</code>. When set to <code>TRUE</code>, the column <code>installed</code>
in the generated snowball is set FALSE for all packages, causing them to be installed even if already installed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe with all packages that need to be installed, their version , whether they are installed, where
to obtain them if not locally available (CRAN vs MRAN), which date to use for MRAN,
installation time from source (in seconds), and local path for storage
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get.snowball("rio", "2020-07-12")

## End(Not run)
</code></pre>

<hr>
<h2 id='groundhog.library'>Install &amp; load CRAN, GitHub, and GitLab packages as current on given date</h2><span id='topic+groundhog.library'></span>

<h3>Description</h3>

<p>Load requested package(s)  as current on a requested date. If the needed version
of a package, or its dependencies, is not already installed, groundhog automatically
installs it. <code>groundhog.library()</code> thus substitutes both <code>library()</code>
and <code>install.packages()</code>. There is no change in setup or configuration parameters
needed to start using groundhog; simply edit your script going between
<code>library()</code> and <code>groundhog.library()</code> as needed. Groundhog often installs/uninstalls
packages in the default personal library. These changes can be reversed in a few seconds,
with <code><a href="#topic+restore.library">restore.library()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groundhog.library(
  pkg,
  date,
  quiet.install = TRUE,
  include.suggests = FALSE,
  ignore.deps = c(),
  force.source = FALSE,
  force.install = FALSE,
  force.source.main = FALSE,
  force.install.main = FALSE,
  tolerate.R.version = "",
  cores = -1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groundhog.library_+3A_pkg">pkg</code></td>
<td>
<p>character string or vector with name of package(s) to load/install.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_date">date</code></td>
<td>
<p>character string  (yyyy-mm-dd), or date value, with the date which
determines the version of the package, and all dependencies, to be loaded
(and installed if needed). The most recent date accepted is 2 days prior
to when the code is executed.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_quiet.install">quiet.install</code></td>
<td>
<p>logical, defaults to <code>TRUE</code>. When set to <code>FALSE</code>, displays
output generated by <code>install.packages()</code> when installing from source</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_include.suggests">include.suggests</code></td>
<td>
<p>logical, defaults to <code>FALSE</code>. When set to <code>TRUE</code>,
loads dependencies classified in the DESCRIPTION file as <code>suggested</code>.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_ignore.deps">ignore.deps</code></td>
<td>
<p>an optional character vector containing dependencies which
are already loaded in the R session, and create a conflict with a needed
dependency for the package being loaded (mismatch of version), but which should be ignored
and groundhog.library() should proceed tolerating the conflict.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_force.source">force.source</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). When set to <code>TRUE</code>, if the requested package,
or its dependencies, needs to be installed, they will be installed from source
(much slower than from binaries).</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_force.install">force.install</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). When set to <code>TRUE</code>,
will re-install the requested packages and
their dependencies even if they are already installed.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_force.source.main">force.source.main</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). When set to <code>TRUE</code>, if the
requested package needs to be installed it will be installed from source
(but dependencies are installed from binaries if needed and available).</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_force.install.main">force.install.main</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). When set to <code>TRUE</code>,
will re-install the requested packages even
if they are already installed (but dependencies will not be re-installed).</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_tolerate.r.version">tolerate.R.version</code></td>
<td>
<p>optional character string containing an R version
which <code>groundhog.library()</code> will not throw an error for using, even if the
date entered corresponds to a more recent major R release.</p>
</td></tr>
<tr><td><code id="groundhog.library_+3A_cores">cores</code></td>
<td>
<p>Integer. The maximum number of cores to use during parallel installation
of source packages. The default, -1, uses the total number of cores available minus 1.
Setting <code>core</code>=1 leads to installing source packages, and also to downloading binaries,
sequentially. When installation fails, you may want to try cores=1</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more information about groundhog check out <a href="https://groundhogr.com">groundhogr.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
groundhog.library("magrittr", "2022-04-15")

pkgs &lt;- c('pwr','metafor')
groundhog.library(pkgs, "2022-04-15")

# When running an existing  script that relied on `library()` to load packages,
# you can wrap the library calls in double-quotes, loading the packages with 
# groundhog:

  groundhog.library(
       "
        library('pwr')
        library('metafor')
        library('tidyr')
        library('rio')
        library('this.path')
       "
       ,'2022-04-01')

#Allow using R 3.6.3 despite entering a date that corresponds to R &gt;=4.0.0
  groundhog.library('rio', '2022-04-11', tolerate.R.version='3.6.3')


## End(Not run)

</code></pre>

<hr>
<h2 id='meta.groundhog'>Load a specific version of groundhog, as available on a given date</h2><span id='topic+meta.groundhog'></span>

<h3>Description</h3>

<p>Load a specific version of groundhog, as available on a given date
</p>


<h3>Usage</h3>

<pre><code class='language-R'>meta.groundhog(date)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="meta.groundhog_+3A_date">date</code></td>
<td>
<p>character string  (yyyy-mm-dd), or date value, with the date which determines the
version of groundhog to load</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#Load groundhog as available on 2021-03-12 (v1.3.2)
meta.groundhog("2021-03-12")

## End(Not run)

</code></pre>

<hr>
<h2 id='restore.library'>Restore default library of packages, undoing all changes made by groundhog</h2><span id='topic+restore.library'></span>

<h3>Description</h3>

<p>In a few seconds reverse changes made by groundhog to the default personal
library (where R packages are usually installed into with <code>installed.packages()</code>).
If you are just trying groundhog out for the first time,
or you generally rely on base R's <code>library()</code> and want to use <code>groundhog.library()</code> sporadically
then you may want to run <code>restore.library()</code> when you are done with your one-time use of groundhog.
This will undo any and all changes made by <code>groundhog</code> to that library.
In most circumstances, restoring a library takes a few seconds, even if the library
has had 100s of package modifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restore.library(days = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restore.library_+3A_days">days</code></td>
<td>
<p>an optional numeric argument used to choose among alternative restore points.
When <code>days</code> is set, groundhog restores the personal library to the  most recent restore point that
is at least <code>days</code> days old. If <code>dais</code> is not set, groundhog restores to the most recent restore point overall.
For example, if there are two restore points: one from today, and one from 7 days ago,
running <code>restore.library()</code> would restore to the former, setting <code>days=3</code> would restore to the latter,
and setting <code>days=8</code> would result in an error. <code>days = -1</code> restores to the oldest restore point available.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When groundhog installs a package, it installs it into groundhog's library
(location of that library is obtainable with <code><a href="#topic+get.groundhog.folder">get.groundhog.folder()</a></code>).
Groundhog then immediately moves the installed package(s) (and their dependencies)
to the default personal library (location of that library obtainable with: <code>.libPaths()[1]</code>).
Altering the packages in the local folder is necessary for groundhog to work properly for two main reasons. First,
R Studio often loads packages from that library before users run the code in a script, creating
version conflicts that cannot be avoided when attempting to load other versions of those
packages with <code>groundhog</code>. Second, R scripts often run processes in independent R sessions, for
example when doing parallel processing. Those background processes will also look for
packages in the default personal folder. Because the personal library can only hold
one version of a given package, before moving new packages in, groundhog moves
any existing other versions of those packages out, to another directory (a local archive).
Those files are not deleted, just moved, making it easy and fast to recover.
When the first change in the personal folder is made on a given calendar date,
groundhog makes a list of all packages available in the personal folder before such change (saving
a copy of the results from <code>installed.packages(.libPaths()[1])</code>), this saved file is referred to as a
a 'restore point'. With <code>restore.library()</code> groundhog looks up a restore point, obtain the set of packages
that used to be installed, and removes any packages <em>installed by groundhog</em> which are in the personal library
but were not in that restore point; similarly, it moves back to the local library any packages <em>removed by groundhog</em>
that were in the restore point but are not currently there. This process take a few seconds even for 100+ packages.
Note that there is only one restore point per calendar date, so one effectively restores
the personal library to how it was before <em>any</em> changes were made to it that day with groundhog.
Restore points are saved permanently and can be restored at any point.
The set of restore points available is stored in the hidden dataframe <code>.available.restore.points</code>.
To choose among them use the <code>days</code> argument in <code>restore.library</code>. The default is to restore
based on the most recent restore point, so if a user installs groundhog, tests it, and wants to
undo all changes made by groundhog, the default behavior will achieve this goal.
Note: restoring can take a few minutes if the groundhog folder is on a different
drive from the default personal R library (e.g., two different hard drives) or if it is in Dropbox.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
restore.library()
restore.library(7)
restore.library(-1)

## End(Not run)

</code></pre>

<hr>
<h2 id='set.groundhog.folder'>Set groundhog folder location</h2><span id='topic+set.groundhog.folder'></span>

<h3>Description</h3>

<p>Set groundhog folder location
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set.groundhog.folder(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set.groundhog.folder_+3A_path">path</code></td>
<td>
<p>Character. The path to the groundhog folder containing the library
where packages are downloaded and installed. For best performance and reliability,
it is recommended that the groundhog folder be in the same volume/drive as the
folder used as the default R library, and
that it not be in a Dropbox (or similar) folders. Groundhog will be slower
and occasionally produce errors when the groundhog folder is in Dropbox or
a different drive.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(invisibly) <code>TRUE</code> upon success.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.groundhog.folder">get.groundhog.folder()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set.groundhog.folder("c:/groundhog_folder")

## End(Not run)

</code></pre>

<hr>
<h2 id='toc'>Show CRAN publication dates for all versions of a given package</h2><span id='topic+toc'></span>

<h3>Description</h3>

<p>Show CRAN publication dates for all versions of a given package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toc(pkg, dependencies = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toc_+3A_pkg">pkg</code></td>
<td>
<p>(required) package name</p>
</td></tr>
<tr><td><code id="toc_+3A_dependencies">dependencies</code></td>
<td>
<p>logical (defaults to <code>FALSE</code>). Should the output contain
package dependencies (<code>Imports</code>, <code>Depends</code> and <code>Suggests</code>) for <code>pkg</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> where each row corresponds to one version of <code>pkg</code>, a date column contains the publication date,
and when <code>dependencies</code>=TRUE, columns show package dependencies over time as well.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
toc("R")
toc("magrittr")
toc("rio",dependencies = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='try.renaming.method.again'>Attempt faster method of copying packages across libraries in the future</h2><span id='topic+try.renaming.method.again'></span>

<h3>Description</h3>

<p>Groundhog often moves packages between the groundhog library and the default personal library.
This is done by renaming the package folders ('renaming' the parent directory of a folder, effectively moves it).
This process is nearly instantaneous  even for 100+ packages. The renaming method, however, is sometimes unavailable for some configurations
(e.g., when the groundhog and personal folders are on different drives/volumes, say external vs internal hard drives).  When
groundhog fails to move a package by renaming it, it will produce an error, and will also make a note to permanently switch to
the slower method of moving packages by first coping them, and then deleting the original, which takes up to a few seconds per package, and
is thus much slower than renaming. If you believe the error was circumstantial and want to give
renaming files another chance, you may run <code>try.renaming.method.again()</code>. Future groundhog.library() calls
will again attempt it. If it fails again you will just get a new error message and groundhog will again switch methods.
It is safe to err on the side of trying again, so unless you know you are using multiple physical drives, you probably should try again, and
investigate a possible alternative source of the problem. To debug, you may choose <code>cores=1</code> to force sequential installation,
<code>force.install=TRUE</code> to reinstall possibly poorly installed dependencies, and as always, inspecting the console log as packages get installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>try.renaming.method.again(quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="try.renaming.method.again_+3A_quiet">quiet</code></td>
<td>
<p>logical, defaults to <code>FALSE</code>. When set to <code>TRUE</code> it does not display confirmation message.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
