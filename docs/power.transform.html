<!DOCTYPE html><html lang="en"><head><title>Help for package power.transform</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {power.transform}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#power.transform'><p>power.transform: Transform Data to Normality using Power Transformations</p></a></li>
<li><a href='#assess_transformation'><p>Assess normality of transformed data</p></a></li>
<li><a href='#create_transformer_skeleton'><p>Create transformation object skeleton</p></a></li>
<li><a href='#find_transformation_parameters'><p>Set transformation parameters</p></a></li>
<li><a href='#get_lambda'><p>Get lambda value</p></a></li>
<li><a href='#get_residuals'><p>Compute residuals of transformation to normality</p></a></li>
<li><a href='#get_scale'><p>Get scale value</p></a></li>
<li><a href='#get_shift'><p>Get shift value</p></a></li>
<li><a href='#get_transformation_method'><p>Get transformation method</p></a></li>
<li><a href='#huber_estimate'><p>Huber M-estimate</p></a></li>
<li><a href='#plot_qq_plot'><p>Create Q-Q plot</p></a></li>
<li><a href='#plot_residual_plot'><p>Create residual plot</p></a></li>
<li><a href='#power_transform'><p>Transform values</p></a></li>
<li><a href='#ragn'><p>Random Values from the Asymmetric Generalised Normal Distribution</p></a></li>
<li><a href='#revert_power_transform'><p>Revert transformation</p></a></li>
<li><a href='#set_lambda'><p>Set lambda value</p></a></li>
<li><a href='#set_scale'><p>Set scale value</p></a></li>
<li><a href='#set_shift'><p>Set shift value</p></a></li>
<li><a href='#transformationBoxCox-class'><p>Box-Cox transformation object</p></a></li>
<li><a href='#transformationNone-class'><p>No transformation object</p></a></li>
<li><a href='#transformationPowerTransform-class'><p>Generic transformation object</p></a></li>
<li><a href='#transformationYeoJohnson-class'><p>Yeo-Johnson transformation object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Location and Scale Invariant Power Transformations</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Location- and scale-invariant Box-Cox and Yeo-Johnson power transformations
    allow for transforming variables with distributions distant from 0 to
    normality. Transformers are implemented as S4 objects. These allow for
    transforming new instances to normality after optimising fitting parameters
    on other data. A test for central normality allows for rejecting 
    transformations that fail to produce a suitably normal distribution, 
    independent of sample number.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/oncoray/power.transform">https://github.com/oncoray/power.transform</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/oncoray/power.transform/issues">https://github.com/oncoray/power.transform/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL version 1.1</a> | <a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL version 1.2</a> [expanded from: EUPL]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, methods, rlang (&ge; 1.0.0), nloptr</td>
</tr>
<tr>
<td>Collate:</td>
<td>'TransformationObjects.R' 'TransformationYeoJohnson.R'
'TransformationBoxCox.R' 'AccessorsMutatorsLambda.R'
'AccessorsMutatorsScale.R' 'AccessorsMutatorsShift.R'
'AccessorsTransformationMethod.R' 'Checks.R' 'FindParameters.R'
'GoodnessOfFit.R' 'ParameterEstimators.R'
'ParameterEstimatorEDF.R' 'ParameterEstimatorMLE.R'
'ParameterEstimatorRaymaekers.R'
'ParameterEstimatorSkewnessKurtosis.R' 'PlotQQPlot.R'
'PlotResidualPlot.R' 'PlotUtilities.R'
'TransformationSkeleton.R' 'Utilities.R' 'WeightingFunctions.R'
'WeightingFunctionParameters.R' 'power.transform-package.R'</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2 (&ge; 3.4.0), testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-11 07:24:33 UTC; alexz</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex Zwanenburg <a href="https://orcid.org/0000-0002-0342-9545"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Steffen Löck [aut],
  German Cancer Research Center (DKFZ) [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alex Zwanenburg &lt;alexander.zwanenburg@nct-dresden.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-13 18:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='power.transform'>power.transform: Transform Data to Normality using Power Transformations</h2><span id='topic+power.transform-package'></span><span id='topic+power.transform'></span>

<h3>Description</h3>

<p>This package was originally based on, and contains code from, the familiar
package (<a href="https://cran.r-project.org/package=familiar">https://cran.r-project.org/package=familiar</a>), under the EUPL
license.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alex Zwanenburg <a href="mailto:alexander.zwanenburg@nct-dresden.de">alexander.zwanenburg@nct-dresden.de</a> (<a href="https://orcid.org/0000-0002-0342-9545">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Steffen Löck
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> German Cancer Research Center (DKFZ) [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/oncoray/power.transform">https://github.com/oncoray/power.transform</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/oncoray/power.transform/issues">https://github.com/oncoray/power.transform/issues</a>
</p>
</li></ul>


<hr>
<h2 id='assess_transformation'>Assess normality of transformed data</h2><span id='topic+assess_transformation'></span>

<h3>Description</h3>

<p>Not all data allows for a reasonable transformation to normality using power
transformation. For example, uniformly distributed data or multi-modal data
cannot be transformed to normality. This function computes a p-value for an
empirical goodness of fit test for central normality. A distribution is
centrally normal if the central 80% of the data are approximately normally
distributed. The null-hypothesis is that the transformed distribution is
centrally normal.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assess_transformation(x, transformer, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assess_transformation_+3A_x">x</code></td>
<td>
<p>A vector with numeric values that should be transformed to
normality.</p>
</td></tr>
<tr><td><code id="assess_transformation_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code>.</p>
</td></tr>
<tr><td><code id="assess_transformation_+3A_verbose">verbose</code></td>
<td>
<p>Sets verbosity of the fubction.</p>
</td></tr>
<tr><td><code id="assess_transformation_+3A_...">...</code></td>
<td>
<p>Unused arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>p-value for empirical goodness of fit test.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
transformer &lt;- find_transformation_parameters(
  x = x,
  method = "box_cox")

assess_transformation(
  x = x,
  transformer = transformer)
</code></pre>

<hr>
<h2 id='create_transformer_skeleton'>Create transformation object skeleton</h2><span id='topic+create_transformer_skeleton'></span>

<h3>Description</h3>

<p>Creates skeleton objects. This generates objects without fitting
parameters. This is primarily intended for creating transformers
externally, where fitting parameters are known.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_transformer_skeleton(method, lambda = 1, shift = 0, scale = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_transformer_skeleton_+3A_method">method</code></td>
<td>
<p>Transformation method. Can be <code>"none"</code>, <code>"box_cox"</code> or
<code>"yeo_johnson"</code>.</p>
</td></tr>
<tr><td><code id="create_transformer_skeleton_+3A_lambda">lambda</code></td>
<td>
<p>Value of the transformation parameter lambda. Can also be
changed using the <code>set_lambda</code> method.</p>
</td></tr>
<tr><td><code id="create_transformer_skeleton_+3A_shift">shift</code></td>
<td>
<p>Value of the shift parameter. Can also be changed using the
<code>set_shift</code> method.</p>
</td></tr>
<tr><td><code id="create_transformer_skeleton_+3A_scale">scale</code></td>
<td>
<p>Value of the scale parameter. Can also be changed using the
<code>set_scale</code> method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A transformer object
</p>

<hr>
<h2 id='find_transformation_parameters'>Set transformation parameters</h2><span id='topic+find_transformation_parameters'></span>

<h3>Description</h3>

<p><code>find_transformation_parameters</code> is used to find optimal parameters for
univariate transformation to normality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find_transformation_parameters(
  x,
  method = "yeo_johnson",
  robust = TRUE,
  invariant = TRUE,
  lambda = c(-4, 6),
  empirical_gof_normality_p_value = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find_transformation_parameters_+3A_x">x</code></td>
<td>
<p>A vector with numeric values.</p>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_method">method</code></td>
<td>
<p>One of the following methods for power transformation:
</p>

<ul>
<li> <p><code>box_cox</code>: Transformation using the Box-Cox transformation (Box and Cox,
1964). The Box-Cox transformation requires that all data are strictly
positive. Features that contain zero or negative values cannot be
transformed using this transformation. In their work, Box and Cox define a
shifted variant. We use this variant to shift values to a strictly positive
range, when negative values are present. The Box-Cox transformation relies
on a single parameter lambda, which is estimated through maximisation of
the log-likelihood function corresponding to a normal distribution.
</p>
</li>
<li> <p><code>yeo_johnson</code>:Transformation using the Yeo-Johnson
transformation (Yeo and Johnson, 2000). Unlike the Box-Cox transformation,
the Yeo-Johnson transformation allows for negative and positive values.
Like the Box-Cox transformation, this transformation relies on a single
parameter lambda, which is estimated through maximisation of the
log-likelihood function corresponding to a normal distribution.
</p>
</li>
<li> <p><code>none</code>: A fall-back method that will not transform values.
</p>
</li></ul>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_robust">robust</code></td>
<td>
<p>Flag for using a robust version of Box-Cox or Yeo-Johnson
transformation, as defined by Raymaekers and Rousseeuw (2021). This version
is less sensitive in the presence outliers.</p>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_invariant">invariant</code></td>
<td>
<p>Flag for using a version of Box-Cox or Yeo-Johnson
transformation that simultaneously optimises location and scale in addition
to the lambda parameter.</p>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_lambda">lambda</code></td>
<td>
<p>Single lambda value, or range of lambda values that should be
considered. Default: c(4.0, 6.0). Can be <code>NULL</code> to force optimisation
without a constraint in lambda values.</p>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_empirical_gof_normality_p_value">empirical_gof_normality_p_value</code></td>
<td>
<p>Significance value for the empirical
goodness-of-fit test for central normality. The p-value is computed through
the <code>assess_transformation</code> function. By setting this parameter to a
numeric value other than <code>NULL</code>, the transformation will be rejected when
the p-value of the test is below the significance value.</p>
</td></tr>
<tr><td><code id="find_transformation_parameters_+3A_...">...</code></td>
<td>
<p>Unused parameters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A transformer object that can be used to transform values.
</p>


<h3>References</h3>


<ol>
<li><p> Yeo, I. &amp; Johnson, R. A. A new family of power transformations
to improve normality or symmetry. Biometrika 87, 954–959 (2000).
</p>
</li>
<li><p> Box, G. E. P. &amp; Cox, D. R. An analysis of transformations. J. R. Stat.
Soc. Series B Stat. Methodol. 26, 211–252 (1964).
</p>
</li>
<li><p> Raymaekers, J., Rousseeuw,  P. J. Transforming variables to central
normality. Mach Learn. (2021).
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
transformer &lt;- find_transformation_parameters(
  x = x,
  method = "box_cox")
</code></pre>

<hr>
<h2 id='get_lambda'>Get lambda value</h2><span id='topic+get_lambda'></span><span id='topic+get_lambda+2CtransformationPowerTransform-method'></span><span id='topic+get_lambda+2CtransformationBoxCox-method'></span><span id='topic+get_lambda+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Get the lambda value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_lambda(object, ...)

## S4 method for signature 'transformationPowerTransform'
get_lambda(object, ...)

## S4 method for signature 'transformationBoxCox'
get_lambda(object, ...)

## S4 method for signature 'transformationYeoJohnson'
get_lambda(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_lambda_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="get_lambda_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Lambda value of the transformer.
</p>

<hr>
<h2 id='get_residuals'>Compute residuals of transformation to normality</h2><span id='topic+get_residuals'></span>

<h3>Description</h3>

<p>Compute residuals of transformation to normality
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_residuals(x, transformer, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_residuals_+3A_x">x</code></td>
<td>
<p>A vector with numeric values that should be transformed to
normality.</p>
</td></tr>
<tr><td><code id="get_residuals_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code>.</p>
</td></tr>
<tr><td><code id="get_residuals_+3A_...">...</code></td>
<td>
<p>Unused arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.table</code> containing the expected (according to a normal
distribution) and observed z-scores, and their difference as residuals.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
transformer &lt;- find_transformation_parameters(
  x = x,
  method = "box_cox")

residual_data &lt;- get_residuals(
  x = x,
  transformer = transformer)
</code></pre>

<hr>
<h2 id='get_scale'>Get scale value</h2><span id='topic+get_scale'></span><span id='topic+get_scale+2CtransformationPowerTransform-method'></span><span id='topic+get_scale+2CtransformationBoxCox-method'></span><span id='topic+get_scale+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Get the scale value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_scale(object, ...)

## S4 method for signature 'transformationPowerTransform'
get_scale(object, ...)

## S4 method for signature 'transformationBoxCox'
get_scale(object, ...)

## S4 method for signature 'transformationYeoJohnson'
get_scale(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_scale_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="get_scale_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>scale value of the transformer.
</p>

<hr>
<h2 id='get_shift'>Get shift value</h2><span id='topic+get_shift'></span><span id='topic+get_shift+2CtransformationPowerTransform-method'></span><span id='topic+get_shift+2CtransformationBoxCox-method'></span><span id='topic+get_shift+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Get the shift value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_shift(object, ...)

## S4 method for signature 'transformationPowerTransform'
get_shift(object, ...)

## S4 method for signature 'transformationBoxCox'
get_shift(object, ...)

## S4 method for signature 'transformationYeoJohnson'
get_shift(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_shift_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="get_shift_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>shift value of the transformer.
</p>

<hr>
<h2 id='get_transformation_method'>Get transformation method</h2><span id='topic+get_transformation_method'></span><span id='topic+get_transformation_method+2CtransformationPowerTransform-method'></span>

<h3>Description</h3>

<p>Get the transformation method of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_transformation_method(object, ...)

## S4 method for signature 'transformationPowerTransform'
get_transformation_method(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_transformation_method_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="get_transformation_method_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformation method
</p>

<hr>
<h2 id='huber_estimate'>Huber M-estimate</h2><span id='topic+huber_estimate'></span>

<h3>Description</h3>

<p>Iteratively computes M-estimates for location and scale. These
are robust estimates of the mean and standard deviation of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>huber_estimate(x, k = 1.28, tol = 1e-04)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="huber_estimate_+3A_x">x</code></td>
<td>
<p>Vector of numeric values for which the location and scale should be
estimated.</p>
</td></tr>
<tr><td><code id="huber_estimate_+3A_k">k</code></td>
<td>
<p>Numeric value &gt; 0 that the determines the value beyond which the
signal is winsorized.</p>
</td></tr>
<tr><td><code id="huber_estimate_+3A_tol">tol</code></td>
<td>
<p>Tolerance for the iterative procedure.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list with location estimate <code>"mu"</code> and scale estimate <code>"sigma"</code>.
</p>

<hr>
<h2 id='plot_qq_plot'>Create Q-Q plot</h2><span id='topic+plot_qq_plot'></span>

<h3>Description</h3>

<p>Create a figure that plots the expected, theoretical normal quantiles
(z-scores) against the observed normal quantiles (z-scores) of the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_qq_plot(
  x,
  transformer,
  show_original = TRUE,
  show_identity = TRUE,
  use_alpha = TRUE,
  ggtheme = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_qq_plot_+3A_x">x</code></td>
<td>
<p>A vector with numeric values that should be transformed to
normality.</p>
</td></tr>
<tr><td><code id="plot_qq_plot_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code>.</p>
</td></tr>
<tr><td><code id="plot_qq_plot_+3A_show_original">show_original</code></td>
<td>
<p>Show quantiles for original, untransformed, data in
addition to transformed data.</p>
</td></tr>
<tr><td><code id="plot_qq_plot_+3A_show_identity">show_identity</code></td>
<td>
<p>Show identity line that indicates equivalence between
expected and observed quantiles.</p>
</td></tr>
<tr><td><code id="plot_qq_plot_+3A_use_alpha">use_alpha</code></td>
<td>
<p>Use transparency for points in case the data contains many
instances.</p>
</td></tr>
<tr><td><code id="plot_qq_plot_+3A_ggtheme">ggtheme</code></td>
<td>
<p><code>ggplot2</code> theme to use for the plot. If not provided,
<code>ggplot2::theme_light</code> is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot2</code> plot object for a Q-Q plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
transformer &lt;- find_transformation_parameters(
  x = x,
  method = "box_cox")

if (rlang::is_installed("ggplot2")) {
  plot_qq_plot(
    x = x,
    transformer = transformer
  )
}

</code></pre>

<hr>
<h2 id='plot_residual_plot'>Create residual plot</h2><span id='topic+plot_residual_plot'></span>

<h3>Description</h3>

<p>Create a figure that plots the residuals of the data. These residuals are the
difference between expected normal quantiles and observed quantiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_residual_plot(
  x,
  transformer,
  centre_width = NULL,
  show_original = TRUE,
  use_alpha = TRUE,
  use_absolute_deviation = TRUE,
  ggtheme = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_residual_plot_+3A_x">x</code></td>
<td>
<p>A vector with numeric values that should be transformed to
normality.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code>.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_centre_width">centre_width</code></td>
<td>
<p>A numeric value between 0.0 and 1.0 that describes the
width of the centre of the data. Can be NULL.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_show_original">show_original</code></td>
<td>
<p>Show residuals for original, untransformed, data in
addition to transformed data.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_use_alpha">use_alpha</code></td>
<td>
<p>Use transparency for points in case the data contains many
instances.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_use_absolute_deviation">use_absolute_deviation</code></td>
<td>
<p>Plot absolute deviation instead of residuals.</p>
</td></tr>
<tr><td><code id="plot_residual_plot_+3A_ggtheme">ggtheme</code></td>
<td>
<p><code>ggplot2</code> theme to use for the plot. If not provided,
<code>ggplot2::theme_light</code> is used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot2</code> plot object for a Q-Q plot.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
transformer &lt;- find_transformation_parameters(
  x = x,
  method = "box_cox"
)

if (rlang::is_installed("ggplot2")) {
  plot_residual_plot(
    x = x,
    transformer = transformer
  )

  # Plot only central 80% of the data.
  plot_residual_plot(
    x = x,
    transformer = transformer,
    centre_width = 0.80,
    show_original = FALSE
  )
}
</code></pre>

<hr>
<h2 id='power_transform'>Transform values</h2><span id='topic+power_transform'></span>

<h3>Description</h3>

<p><code>power_transform</code> transforms numeric values to normality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>power_transform(x, transformer = NULL, oob_action = "na", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="power_transform_+3A_x">x</code></td>
<td>
<p>A vector with numeric values that should be transformed to
normality.</p>
</td></tr>
<tr><td><code id="power_transform_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code>. If <code>NULL</code>, a transformer is generated
internally.</p>
</td></tr>
<tr><td><code id="power_transform_+3A_oob_action">oob_action</code></td>
<td>
<p>Action that should be taken when out-of-bounds values are
encountered in <code>x</code>. This can for example be 0 or negative values for
Box-Cox transformations.
</p>

<ul>
<li> <p><code>na</code> (default): replaces out-of-bounds values by NA values.
</p>
</li>
<li> <p><code>valid</code>: replaces out-of-bounds values by the closest valid boundary
values.
</p>
</li></ul>

<p>This argument has no effect for Yeo-Johnson transformations.</p>
</td></tr>
<tr><td><code id="power_transform_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+find_transformation_parameters">find_transformation_parameters</a></code>
</p>

<dl>
<dt><code>method</code></dt><dd><p>One of the following methods for power transformation:
</p>

<ul>
<li> <p><code>box_cox</code>: Transformation using the Box-Cox transformation (Box and Cox,
1964). The Box-Cox transformation requires that all data are strictly
positive. Features that contain zero or negative values cannot be
transformed using this transformation. In their work, Box and Cox define a
shifted variant. We use this variant to shift values to a strictly positive
range, when negative values are present. The Box-Cox transformation relies
on a single parameter lambda, which is estimated through maximisation of
the log-likelihood function corresponding to a normal distribution.
</p>
</li>
<li> <p><code>yeo_johnson</code>:Transformation using the Yeo-Johnson
transformation (Yeo and Johnson, 2000). Unlike the Box-Cox transformation,
the Yeo-Johnson transformation allows for negative and positive values.
Like the Box-Cox transformation, this transformation relies on a single
parameter lambda, which is estimated through maximisation of the
log-likelihood function corresponding to a normal distribution.
</p>
</li>
<li> <p><code>none</code>: A fall-back method that will not transform values.
</p>
</li></ul>
</dd>
<dt><code>robust</code></dt><dd><p>Flag for using a robust version of Box-Cox or Yeo-Johnson
transformation, as defined by Raymaekers and Rousseeuw (2021). This version
is less sensitive in the presence outliers.</p>
</dd>
<dt><code>invariant</code></dt><dd><p>Flag for using a version of Box-Cox or Yeo-Johnson
transformation that simultaneously optimises location and scale in addition
to the lambda parameter.</p>
</dd>
<dt><code>lambda</code></dt><dd><p>Single lambda value, or range of lambda values that should be
considered. Default: c(4.0, 6.0). Can be <code>NULL</code> to force optimisation
without a constraint in lambda values.</p>
</dd>
<dt><code>empirical_gof_normality_p_value</code></dt><dd><p>Significance value for the empirical
goodness-of-fit test for central normality. The p-value is computed through
the <code>assess_transformation</code> function. By setting this parameter to a
numeric value other than <code>NULL</code>, the transformation will be rejected when
the p-value of the test is below the significance value.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of transformed values of <code>x</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+find_transformation_parameters">find_transformation_parameters</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- exp(stats::rnorm(1000))
y &lt;- power_transform(
  x = x,
  method = "box_cox")
</code></pre>

<hr>
<h2 id='ragn'>Random Values from the Asymmetric Generalised Normal Distribution</h2><span id='topic+ragn'></span>

<h3>Description</h3>

<p>Draws random values from an asymmetric generalised normal distribution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ragn(n, location = 0, scale = 1, alpha = 0.5, beta = 2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ragn_+3A_n">n</code></td>
<td>
<p>number of instances</p>
</td></tr>
<tr><td><code id="ragn_+3A_location">location</code></td>
<td>
<p>central location of the distribution</p>
</td></tr>
<tr><td><code id="ragn_+3A_scale">scale</code></td>
<td>
<p>scale of the distribution. Must be strictly positive: <code>scale &gt; 0.0</code></p>
</td></tr>
<tr><td><code id="ragn_+3A_alpha">alpha</code></td>
<td>
<p>value between 0.0 and 1.0 that determines the skewness of the
distribution. <code>alpha &gt; 0.5</code> creates a distribution with a negative skew
(left-skewed), i.e. the left tail of the distribution is elongated, and the
bulk of the distribution is located to the right. <code>alpha &lt; 0.5</code> creates a
distribution with a positive skew (right-skewed), i.e. the right tail of
the distribution is elongated, and the bulk of the distribution is located
to the left. For <code>alpha = 0.0</code>, the distribution does not have a skew.</p>
</td></tr>
<tr><td><code id="ragn_+3A_beta">beta</code></td>
<td>
<p>Strictly positive value (<code>beta &gt; 0.0</code>) that determines the
overall shape of the generalised normal distribution. For <code>beta = 1</code>, an
asymmetric Laplace distribution is used. <code>beta = 2</code> draws values according
to an asymmetric normal distribution. For large <code>beta</code> the distribution
will approximate the uniform distribution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Random values drawn according to an asymmetric generalised normal
distribution. Here the asymmetric generalised normal distribution is a
symmetric general normal distribution, that is made asymmetric using the
procedure described by Gijbels et al. To generate random values we use the
quantile function of the symmetric generalised normal distribution that was
derived by M. Griffin.
</p>
<p>The default parameter values produce values as if drawn from the standard
normal distribution with <code class="reqn">\sigma = \sqrt{2}</code>, that is, the standard
deviation is not <code class="reqn">\sqrt{2}</code> instead of <code class="reqn">1</code>.
</p>


<h3>Value</h3>

<p>One or more numeric values drawn from the asymmetric generalised
normal distribution.
</p>


<h3>References</h3>


<ol>
<li><p> Gijbels I, Karim R, Verhasselt A. Quantile Estimation in a Generalized
</p>
</li>
<li><p> Griffin M (2018). gnorm: Generalized Normal/Exponential Power Distribution.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'># Draw values from a standard normal distribution.
x &lt;- power.transform::ragn(n = 10000, scale = 1/sqrt(2))
hist(x, 50)

# Draw values from a left-skewed normal distribution.
x &lt;- power.transform::ragn(n = 10000, scale = 1/sqrt(2), alpha = 0.8)
hist(x, 50)

# Draw values from a right-skewed normal distribution.
x &lt;- power.transform::ragn(n = 10000, scale = 1/sqrt(2), alpha = 0.2)
hist(x, 50)

# Draw values from a standard laplace distribution.
x &lt;- power.transform::ragn(n = 10000, scale = 1/sqrt(2), beta = 1.0)
hist(x, 50)
</code></pre>

<hr>
<h2 id='revert_power_transform'>Revert transformation</h2><span id='topic+revert_power_transform'></span>

<h3>Description</h3>

<p><code>revert_power_transform</code> reverts the transformation of numeric values to
normality.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>revert_power_transform(y, transformer)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="revert_power_transform_+3A_y">y</code></td>
<td>
<p>A vector with numeric values that was previously transformed to
normality.</p>
</td></tr>
<tr><td><code id="revert_power_transform_+3A_transformer">transformer</code></td>
<td>
<p>A transformer object created using
<code>find_transformation_parameters</code> that was used to transform the values to
normality previously. Cannot be <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x0 &lt;- exp(stats::rnorm(1000))

transformer &lt;- find_transformation_parameters(
  x = x0,
  method = "box_cox")

y &lt;- power_transform(
  x = x0,
  transformer = transformer)

x1 &lt;- revert_power_transform(
  y = y,
  transformer = transformer)
</code></pre>

<hr>
<h2 id='set_lambda'>Set lambda value</h2><span id='topic+set_lambda'></span><span id='topic+set_lambda+2CtransformationPowerTransform-method'></span><span id='topic+set_lambda+2CtransformationBoxCox-method'></span><span id='topic+set_lambda+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Set the lambda value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_lambda(object, lambda, ...)

## S4 method for signature 'transformationPowerTransform'
set_lambda(object, lambda, ...)

## S4 method for signature 'transformationBoxCox'
set_lambda(object, lambda, ...)

## S4 method for signature 'transformationYeoJohnson'
set_lambda(object, lambda, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_lambda_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="set_lambda_+3A_lambda">lambda</code></td>
<td>
<p>Lambda value</p>
</td></tr>
<tr><td><code id="set_lambda_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformer object with updated lambda value.
</p>

<hr>
<h2 id='set_scale'>Set scale value</h2><span id='topic+set_scale'></span><span id='topic+set_scale+2CtransformationPowerTransform-method'></span><span id='topic+set_scale+2CtransformationBoxCox-method'></span><span id='topic+set_scale+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Set the scale value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_scale(object, scale, ...)

## S4 method for signature 'transformationPowerTransform'
set_scale(object, scale, ...)

## S4 method for signature 'transformationBoxCox'
set_scale(object, scale, ...)

## S4 method for signature 'transformationYeoJohnson'
set_scale(object, scale, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_scale_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="set_scale_+3A_scale">scale</code></td>
<td>
<p>scale value</p>
</td></tr>
<tr><td><code id="set_scale_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformer object with updated scale value.
</p>

<hr>
<h2 id='set_shift'>Set shift value</h2><span id='topic+set_shift'></span><span id='topic+set_shift+2CtransformationPowerTransform-method'></span><span id='topic+set_shift+2CtransformationBoxCox-method'></span><span id='topic+set_shift+2CtransformationYeoJohnson-method'></span>

<h3>Description</h3>

<p>Set the shift value of a transformer object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_shift(object, shift, ...)

## S4 method for signature 'transformationPowerTransform'
set_shift(object, shift, ...)

## S4 method for signature 'transformationBoxCox'
set_shift(object, shift, ...)

## S4 method for signature 'transformationYeoJohnson'
set_shift(object, shift, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="set_shift_+3A_object">object</code></td>
<td>
<p>Transformer object</p>
</td></tr>
<tr><td><code id="set_shift_+3A_shift">shift</code></td>
<td>
<p>Shift value</p>
</td></tr>
<tr><td><code id="set_shift_+3A_...">...</code></td>
<td>
<p>Unused arguments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transformer object with updated shift value.
</p>

<hr>
<h2 id='transformationBoxCox-class'>Box-Cox transformation object</h2><span id='topic+transformationBoxCox-class'></span><span id='topic+transformationBoxCoxInvariant-class'></span>

<h3>Description</h3>

<p>This class is used for Box-Cox transformations.
</p>


<h3>Slots</h3>


<dl>
<dt><code>method</code></dt><dd><p>Main transformation method, i.e. <code>"box_cox"</code>.</p>
</dd>
<dt><code>robust</code></dt><dd><p>Indicates whether a robust version of the Box-Cox transformation
is used to set transformation parameters. The value depends on the <code>robust</code>
argument of the <code>find_transformation_parameters</code> function.</p>
</dd>
<dt><code>lambda</code></dt><dd><p>Numeric lambda parameter for the Box-Cox transformation.</p>
</dd>
<dt><code>shift</code></dt><dd><p>Numeric shift parameter for the Box-Cox transformation. The value
depends on the data used for setting transformation parameters. If all data
are strictly positive, <code>shift</code> has a value of <code>0.0</code>. When negative or zero
values are present, data are shifted to be strictly positive. If
<code>invariant=TRUE</code> in the <code>find_transformation_parameters</code> function,
<code>lambda</code>, <code>shift</code> and <code>scale</code> parameters are optimised simultaneously.</p>
</dd>
<dt><code>scale</code></dt><dd><p>Numeric scale parameter for the Box-Cox transformation. If
<code>invariant=TRUE</code> in the <code>find_transformation_parameters</code> function,
<code>lambda</code>, <code>shift</code> and <code>scale</code> parameters are optimised simultaneously.
Otherwise, the <code>scale</code> parameter has a value of <code>1.0</code>.</p>
</dd>
<dt><code>complete</code></dt><dd><p>Indicates whether transformation parameters were set.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><a href="#topic+find_transformation_parameters">find_transformation_parameters</a>
</p>

<hr>
<h2 id='transformationNone-class'>No transformation object</h2><span id='topic+transformationNone-class'></span>

<h3>Description</h3>

<p>This class is for transformers that do not alter the data.
</p>


<h3>Slots</h3>


<dl>
<dt><code>method</code></dt><dd><p>Main transformation method, i.e. <code>"none"</code>.</p>
</dd>
<dt><code>complete</code></dt><dd><p>Indicates whether transformation parameters were set.</p>
</dd>
</dl>

<hr>
<h2 id='transformationPowerTransform-class'>Generic transformation object</h2><span id='topic+transformationPowerTransform-class'></span>

<h3>Description</h3>

<p>This is the superclass for transformation objects.
</p>


<h3>Slots</h3>


<dl>
<dt><code>method</code></dt><dd><p>Main transformation method.</p>
</dd>
<dt><code>complete</code></dt><dd><p>Indicates whether transformation parameters were set.</p>
</dd>
<dt><code>version</code></dt><dd><p>Version of the power.transform package that was used to create
the transformation objecst.</p>
</dd>
</dl>

<hr>
<h2 id='transformationYeoJohnson-class'>Yeo-Johnson transformation object</h2><span id='topic+transformationYeoJohnson-class'></span><span id='topic+transformationYeoJohnsonInvariant-class'></span>

<h3>Description</h3>

<p>This class is used for Yeo-Johnson transformations.
</p>


<h3>Slots</h3>


<dl>
<dt><code>method</code></dt><dd><p>Main transformation method, i.e. <code>"yeo_johnson"</code>.</p>
</dd>
<dt><code>robust</code></dt><dd><p>Indicates whether a robust version of the Yeo-Johnson
transformation is used to set transformation parameters. The value depends
on the <code>robust</code> argument of the <code>find_transformation_parameters</code> function.</p>
</dd>
<dt><code>lambda</code></dt><dd><p>Numeric lambda parameter for the Yeo-Johnson transformation.</p>
</dd>
<dt><code>shift</code></dt><dd><p>Numeric shift parameter for the Yeo-Johnson transformation. If
<code>invariant=TRUE</code> in the <code>find_transformation_parameters</code> function,
<code>lambda</code>, <code>shift</code> and <code>scale</code> parameters are optimised simultaneously.
Otherwise, the <code>shift</code> parameter has a value of <code>0.0</code>.</p>
</dd>
<dt><code>scale</code></dt><dd><p>Numeric scale parameter for the Yeo-Johnson transformation. If
<code>invariant=TRUE</code> in the <code>find_transformation_parameters</code> function,
<code>lambda</code>, <code>shift</code> and <code>scale</code> parameters are optimised simultaneously.
Otherwise, the <code>scale</code> parameter has a value of <code>1.0</code>.</p>
</dd>
<dt><code>complete</code></dt><dd><p>Indicates whether transformation parameters were set.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><a href="#topic+find_transformation_parameters">find_transformation_parameters</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
