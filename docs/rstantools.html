<!DOCTYPE html><html lang="en"><head><title>Help for package rstantools</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rstantools}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rstantools-package'><p>Tools for Developing <span class="rlang"><b>R</b></span> Packages Interfacing with Stan</p></a></li>
<li><a href='#bayes_R2'><p>Generic function and default method for Bayesian R-squared</p></a></li>
<li><a href='#init_cpp'><p>Register functions implemented in C++</p></a></li>
<li><a href='#log_lik'><p>Generic function for pointwise log-likelihood</p></a></li>
<li><a href='#loo-prediction'><p>Generic functions for LOO predictions</p></a></li>
<li><a href='#nsamples'><p>Generic function for extracting the number of posterior samples</p></a></li>
<li><a href='#posterior_epred'><p>Generic function for accessing the posterior distribution of the</p>
conditional expectation</a></li>
<li><a href='#posterior_interval'><p>Generic function and default method for posterior uncertainty intervals</p></a></li>
<li><a href='#posterior_linpred'><p>Generic function for accessing the posterior distribution of the linear</p>
predictor</a></li>
<li><a href='#posterior_predict'><p>Generic function for drawing from the posterior predictive distribution</p></a></li>
<li><a href='#predictive_error'><p>Generic function and default method for predictive errors</p></a></li>
<li><a href='#predictive_interval'><p>Generic function for predictive intervals</p></a></li>
<li><a href='#prior_summary'><p>Generic function for extracting information about prior distributions</p></a></li>
<li><a href='#rstan_config'><p>Configure system files for compiling Stan source code</p></a></li>
<li><a href='#rstan_create_package'><p>Create a new <span class="rlang"><b>R</b></span> package with compiled Stan programs</p></a></li>
<li><a href='#rstantools_load_code'><p>Helper function for loading code in roxygenise</p></a></li>
<li><a href='#use_rstan'><p>Add Stan infrastructure to an existing package</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools for Developing R Packages Interfacing with 'Stan'</td>
</tr>
<tr>
<td>Version:</td>
<td>2.4.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-22</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides various tools for developers of R packages interfacing
    with 'Stan' <a href="https://mc-stan.org">https://mc-stan.org</a>, including functions to set up the required
    package structure, S3 generics and default methods to unify function naming
    across 'Stan'-based R packages, and vignettes with recommendations for
    developers.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://mc-stan.org/rstantools/">https://mc-stan.org/rstantools/</a>, <a href="https://discourse.mc-stan.org/">https://discourse.mc-stan.org/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stan-dev/rstantools/issues">https://github.com/stan-dev/rstantools/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>pandoc, C++14</td>
</tr>
<tr>
<td>Imports:</td>
<td>desc, stats, utils, Rcpp (&ge; 0.12.16), RcppParallel (&ge; 5.0.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rstan (&ge; 2.17.2), usethis (&ge; 1.5.1), testthat (&ge; 2.0.0),
knitr, pkgbuild, pkgload, roxygen2 (&ge; 6.0.1), rmarkdown,
rstudioapi</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-22 17:10:52 UTC; jgabry</td>
</tr>
<tr>
<td>Author:</td>
<td>Jonah Gabry [aut, cre],
  Ben Goodrich [aut],
  Martin Lysy [aut],
  Andrew Johnson [aut],
  Hamada S. Badr [ctb],
  Marco Colombo [ctb],
  Stefan Siegert [ctb],
  Trustees of Columbia University [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jonah Gabry &lt;jsg2201@columbia.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-31 15:10:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='rstantools-package'>Tools for Developing <span class="rlang"><b>R</b></span> Packages Interfacing with Stan</h2><span id='topic+rstantools-package'></span><span id='topic+rstantools'></span>

<h3>Description</h3>


<p><img src="../help/figures/stanlogo.png" width="50" alt="mc-stan.org" />
 <em>Stan Development Team</em>
</p>
<p>The <span class="pkg">rstantools</span> package provides various tools for developers of <span class="rlang"><b>R</b></span>
packages interfacing with Stan (<a href="https://mc-stan.org">https://mc-stan.org</a>), including
functions to set up the required package structure, S3 generic methods to
unify function naming across Stan-based <span class="rlang"><b>R</b></span> packages, and vignettes with
guidelines for developers. To get started building a package see
<code><a href="#topic+rstan_create_package">rstan_create_package()</a></code>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jonah Gabry <a href="mailto:jsg2201@columbia.edu">jsg2201@columbia.edu</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Ben Goodrich <a href="mailto:benjamin.goodrich@columbia.edu">benjamin.goodrich@columbia.edu</a>
</p>
</li>
<li><p> Martin Lysy <a href="mailto:mlysy@uwaterloo.ca">mlysy@uwaterloo.ca</a>
</p>
</li>
<li><p> Andrew Johnson
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Hamada S. Badr [contributor]
</p>
</li>
<li><p> Marco Colombo [contributor]
</p>
</li>
<li><p> Stefan Siegert [contributor]
</p>
</li>
<li><p> Trustees of Columbia University [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>


<ul>
<li><p> After reading the guidelines for developers, if you have trouble setting up
your package let us know on the the <a href="https://discourse.mc-stan.org">Stan Forums</a>
or at the <span class="pkg">rstantools</span> GitHub <a href="https://github.com/stan-dev/rstantools/issues">issue tracker</a>.
</p>
</li></ul>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://mc-stan.org/rstantools/">https://mc-stan.org/rstantools/</a>
</p>
</li>
<li> <p><a href="https://discourse.mc-stan.org/">https://discourse.mc-stan.org/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/stan-dev/rstantools/issues">https://github.com/stan-dev/rstantools/issues</a>
</p>
</li></ul>


<hr>
<h2 id='bayes_R2'>Generic function and default method for Bayesian R-squared</h2><span id='topic+bayes_R2'></span><span id='topic+bayes_R2.default'></span><span id='topic+loo_R2'></span>

<h3>Description</h3>

<p>Generic function and default method for Bayesian version of R-squared for
regression models. A generic for LOO-adjusted R-squared is also provided. See
the <a href="https://mc-stan.org/rstanarm/reference/bayes_R2.stanreg.html">bayes_R2.stanreg()</a>
method in the <span class="pkg">rstanarm</span> package for an example of defining a method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bayes_R2(object, ...)

## Default S3 method:
bayes_R2(object, y, ...)

loo_R2(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bayes_R2_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="bayes_R2_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
<tr><td><code id="bayes_R2_+3A_y">y</code></td>
<td>
<p>For the default method, a vector of <code>y</code> values the same length
as the number of columns in the matrix used as <code>object</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>bayes_R2()</code> and <code>loo_R2()</code> methods should return a vector of
length equal to the posterior sample size.
</p>
<p>The default <code>bayes_R2()</code> method just takes <code>object</code> to be a matrix of y-hat
values (one column per observation, one row per posterior draw) and <code>y</code> to
be a vector with length equal to <code>ncol(object)</code>.
</p>


<h3>References</h3>

<p>Andrew Gelman, Ben Goodrich, Jonah Gabry, and Aki Vehtari (2018). R-squared
for Bayesian regression models. <em>The American Statistician</em>, to appear.
DOI: 10.1080/00031305.2018.1549100.
(<a href="http://www.stat.columbia.edu/~gelman/research/published/bayes_R2_v3.pdf">Preprint</a>,
<a href="https://avehtari.github.io/bayes_R2/bayes_R2.html">Notebook</a>)
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>


<hr>
<h2 id='init_cpp'>Register functions implemented in C++</h2><span id='topic+init_cpp'></span>

<h3>Description</h3>

<p>If you set up your package using <code>rstan_package_skeleton()</code> before
version <code style="white-space: pre;">&#8288;1.2.1&#8288;</code> of <span class="pkg">rstantools</span> it may be necessary for you to call
this function yourself in order to pass <code style="white-space: pre;">&#8288;R CMD check&#8288;</code> in <span class="rlang"><b>R</b></span>
<code style="white-space: pre;">&#8288;&gt;= 3.4&#8288;</code>. If you used <code>rstan_package_skeleton()</code> in <span class="pkg">rstantools</span> version
<code style="white-space: pre;">&#8288;1.2.1&#8288;</code> or later then this has already been done automatically.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init_cpp(name, path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="init_cpp_+3A_name">name</code></td>
<td>
<p>The name of your package as a string.</p>
</td></tr>
<tr><td><code id="init_cpp_+3A_path">path</code></td>
<td>
<p>The path to the root directory for your package as a string. If
not specified it is assumed that this is already the current working
directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function is only called for its side effect of writing the
necessary <code>init.cpp</code> file to the package's <code style="white-space: pre;">&#8288;src/&#8288;</code> directory.
</p>

<hr>
<h2 id='log_lik'>Generic function for pointwise log-likelihood</h2><span id='topic+log_lik'></span>

<h3>Description</h3>

<p>We define a new function <code>log_lik()</code> rather than a
<code><a href="stats.html#topic+logLik">stats::logLik()</a></code> method because (in addition to the conceptual
difference) the documentation for <code>logLik()</code> states that the return value
will be a single number, whereas <code>log_lik()</code> returns a matrix. See
the <a href="https://mc-stan.org/rstanarm/reference/log_lik.stanreg.html">log_lik.stanreg()</a>
method in the <span class="pkg">rstanarm</span> package for an example of defining a method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>log_lik(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="log_lik_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="log_lik_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>log_lik()</code> methods should return a <code class="reqn">S</code> by <code class="reqn">N</code> matrix,
where <code class="reqn">S</code> is the size of the posterior sample (the number of draws from
the posterior distribution) and <code class="reqn">N</code> is the number of data points.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># See help("log_lik", package = "rstanarm")

</code></pre>

<hr>
<h2 id='loo-prediction'>Generic functions for LOO predictions</h2><span id='topic+loo-prediction'></span><span id='topic+loo_linpred'></span><span id='topic+loo_predict'></span><span id='topic+loo_predictive_interval'></span><span id='topic+loo_pit'></span><span id='topic+loo_pit.default'></span>

<h3>Description</h3>

<p>See the methods in the <span class="pkg">rstanarm</span> package for examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loo_linpred(object, ...)

loo_predict(object, ...)

loo_predictive_interval(object, ...)

loo_pit(object, ...)

## Default S3 method:
loo_pit(object, y, lw, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loo-prediction_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="loo-prediction_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
<tr><td><code id="loo-prediction_+3A_y">y</code></td>
<td>
<p>For the default method of <code>loo_pit()</code>, a vector of <code>y</code> values the
same length as the number of columns in the matrix used as <code>object</code>.</p>
</td></tr>
<tr><td><code id="loo-prediction_+3A_lw">lw</code></td>
<td>
<p>For the default method of <code>loo_pit()</code>, a matrix of log-weights of
the same length as the number of columns in the matrix used as <code>object</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>loo_predict()</code>, <code>loo_linpred()</code>, and <code>loo_pit()</code>
(probability integral transform) methods should return a vector with length
equal to the number of observations in the data.
<code>loo_predictive_interval()</code> methods should return a two-column matrix
formatted in the same way as for <code><a href="#topic+predictive_interval">predictive_interval()</a></code>.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>


<hr>
<h2 id='nsamples'>Generic function for extracting the number of posterior samples</h2><span id='topic+nsamples'></span>

<h3>Description</h3>

<p>Generic function for extracting the number of posterior samples
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nsamples(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nsamples_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="nsamples_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>

<hr>
<h2 id='posterior_epred'>Generic function for accessing the posterior distribution of the
conditional expectation</h2><span id='topic+posterior_epred'></span>

<h3>Description</h3>

<p>Extract the posterior draws of the conditional expectation.
See the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posterior_epred(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posterior_epred_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="posterior_epred_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>posterior_epred()</code> methods should return a <code class="reqn">D</code> by <code class="reqn">N</code>
matrix, where <code class="reqn">D</code> is the number of draws from the posterior
distribution distribution and <code class="reqn">N</code> is the number of data points.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>


<hr>
<h2 id='posterior_interval'>Generic function and default method for posterior uncertainty intervals</h2><span id='topic+posterior_interval'></span><span id='topic+posterior_interval.default'></span>

<h3>Description</h3>

<p>These intervals are often referred to as credible intervals, but we use the
term uncertainty intervals to highlight the fact that wider intervals
correspond to greater uncertainty. See
<a href="https://mc-stan.org/rstanarm/reference/posterior_interval.stanreg.html">posterior_interval.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posterior_interval(object, ...)

## Default S3 method:
posterior_interval(object, prob = 0.9, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posterior_interval_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="posterior_interval_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
<tr><td><code id="posterior_interval_+3A_prob">prob</code></td>
<td>
<p>A number <code class="reqn">p \in (0,1)</code> indicating the desired
probability mass to include in the intervals.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>posterior_interval()</code> methods should return a matrix with two
columns and as many rows as model parameters (or a subset of parameters
specified by the user). For a given value of <code>prob</code>, <code class="reqn">p</code>, the
columns correspond to the lower and upper <code class="reqn">100p</code>\
have the names <code class="reqn">100\alpha/2</code>\
<code class="reqn">\alpha = 1-p</code>. For example, if <code>prob=0.9</code> is specified (a
<code class="reqn">90</code>\
<code>"95%"</code>, respectively.
</p>
<p>The default method just takes <code>object</code> to be a matrix (one column per
parameter) and computes quantiles, with <code>prob</code> defaulting to <code>0.9</code>.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Default method takes a numeric matrix (of posterior draws)
draws &lt;- matrix(rnorm(100 * 5), 100, 5) # fake draws
colnames(draws) &lt;- paste0("theta_", 1:5)
posterior_interval(draws)

# Also see help("posterior_interval", package = "rstanarm")

</code></pre>

<hr>
<h2 id='posterior_linpred'>Generic function for accessing the posterior distribution of the linear
predictor</h2><span id='topic+posterior_linpred'></span>

<h3>Description</h3>

<p>Extract the posterior draws of the linear predictor, possibly transformed by
the inverse-link function. See
<a href="https://mc-stan.org/rstanarm/reference/posterior_linpred.stanreg.html">posterior_linpred.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posterior_linpred(object, transform = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posterior_linpred_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="posterior_linpred_+3A_transform">transform</code></td>
<td>
<p>Should the linear predictor be transformed using the
inverse-link function? The default is <code>FALSE</code>, in which case the
untransformed linear predictor is returned.</p>
</td></tr>
<tr><td><code id="posterior_linpred_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>posterior_linpred()</code> methods should return a <code class="reqn">D</code> by <code class="reqn">N</code>
matrix, where <code class="reqn">D</code> is the number of draws from the posterior
distribution distribution and <code class="reqn">N</code> is the number of data points.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># See help("posterior_linpred", package = "rstanarm")

</code></pre>

<hr>
<h2 id='posterior_predict'>Generic function for drawing from the posterior predictive distribution</h2><span id='topic+posterior_predict'></span>

<h3>Description</h3>

<p>Draw from the posterior predictive distribution of the outcome. See
<a href="https://mc-stan.org/rstanarm/reference/posterior_predict.stanreg.html">posterior_predict.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posterior_predict(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posterior_predict_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="posterior_predict_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>posterior_predict()</code> methods should return a <code class="reqn">D</code> by <code class="reqn">N</code>
matrix, where <code class="reqn">D</code> is the number of draws from the posterior predictive
distribution and <code class="reqn">N</code> is the number of data points being predicted per
draw.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># See help("posterior_predict", package = "rstanarm")

</code></pre>

<hr>
<h2 id='predictive_error'>Generic function and default method for predictive errors</h2><span id='topic+predictive_error'></span><span id='topic+predictive_error.default'></span>

<h3>Description</h3>

<p>Generic function and default method for computing predictive errors
<code class="reqn">y - y^{rep}</code> (in-sample, for observed <code class="reqn">y</code>) or
<code class="reqn">y - \tilde{y}</code> (out-of-sample, for new or held-out <code class="reqn">y</code>).
See <a href="https://mc-stan.org/rstanarm/reference/predictive_error.stanreg.html">predictive_error.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictive_error(object, ...)

## Default S3 method:
predictive_error(object, y, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predictive_error_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="predictive_error_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
<tr><td><code id="predictive_error_+3A_y">y</code></td>
<td>
<p>For the default method, a vector of <code>y</code> values the same length as
the number of columns in the matrix used as <code>object</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>predictive_error()</code> methods should return a <code class="reqn">D</code> by <code class="reqn">N</code>
matrix, where <code class="reqn">D</code> is the number of draws from the posterior predictive
distribution and <code class="reqn">N</code> is the number of data points being predicted per
draw.
</p>
<p>The default method just takes <code>object</code> to be a matrix and <code>y</code> to be a
vector.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># default method
y &lt;- rnorm(10)
ypred &lt;- matrix(rnorm(500), 50, 10)
pred_errors &lt;- predictive_error(ypred, y)
dim(pred_errors)
head(pred_errors)

# Also see help("predictive_error", package = "rstanarm")

</code></pre>

<hr>
<h2 id='predictive_interval'>Generic function for predictive intervals</h2><span id='topic+predictive_interval'></span><span id='topic+predictive_interval.default'></span>

<h3>Description</h3>

<p>See <a href="https://mc-stan.org/rstanarm/reference/predictive_interval.stanreg.html">predictive_interval.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>predictive_interval(object, ...)

## Default S3 method:
predictive_interval(object, prob = 0.9, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="predictive_interval_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="predictive_interval_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
<tr><td><code id="predictive_interval_+3A_prob">prob</code></td>
<td>
<p>A number <code class="reqn">p \in (0,1)</code> indicating the desired
probability mass to include in the intervals.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>predictive_interval()</code> methods should return a matrix with two
columns and as many rows as data points being predicted. For a given value
of <code>prob</code>, <code class="reqn">p</code>, the columns correspond to the lower and upper
<code class="reqn">100p</code>\
<code class="reqn">100(1 - \alpha/2)</code>\
<code>prob=0.9</code> is specified (a <code class="reqn">90</code>\
would be <code>"5%"</code> and <code>"95%"</code>, respectively.
</p>
<p>The default method just takes <code>object</code> to be a matrix and computes
quantiles, with <code>prob</code> defaulting to <code>0.9</code>.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># Default method takes a numeric matrix (of draws from posterior
# predictive distribution)
ytilde &lt;- matrix(rnorm(100 * 5, sd = 2), 100, 5) # fake draws
predictive_interval(ytilde, prob = 0.8)

# Also see help("predictive_interval", package = "rstanarm")

</code></pre>

<hr>
<h2 id='prior_summary'>Generic function for extracting information about prior distributions</h2><span id='topic+prior_summary'></span><span id='topic+prior_summary.default'></span>

<h3>Description</h3>

<p>See <a href="https://mc-stan.org/rstanarm/reference/prior_summary.stanreg.html">prior_summary.stanreg()</a>
in the <span class="pkg">rstanarm</span> package for an example.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prior_summary(object, ...)

## Default S3 method:
prior_summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="prior_summary_+3A_object">object</code></td>
<td>
<p>The object to use.</p>
</td></tr>
<tr><td><code id="prior_summary_+3A_...">...</code></td>
<td>
<p>Arguments passed to methods. See the methods in the <span class="pkg">rstanarm</span>
package for examples.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>prior_summary()</code> methods should return an object containing
information about the prior distribution(s) used for the given model.
The structure of this object will depend on the method.
</p>
<p>The default method just returns <code>object$prior.info</code>, which is
<code>NULL</code> if there is no <code>'prior.info'</code> element.
</p>


<h3>See Also</h3>


<ul>
<li><p> The <span class="pkg">rstanarm</span> package (<a href="https://mc-stan.org/rstanarm/">mc-stan.org/rstanarm</a>)
for example methods
(<a href="https://CRAN.R-project.org/package=rstanarm">CRAN</a>,
<a href="https://github.com/stan-dev/rstanarm">GitHub</a>).
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'># See help("prior_summary", package = "rstanarm")

</code></pre>

<hr>
<h2 id='rstan_config'>Configure system files for compiling Stan source code</h2><span id='topic+rstan_config'></span>

<h3>Description</h3>

<p>Creates or update package-specific system files to compile <code>.stan</code> model
files found in <code>inst/stan</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rstan_config(pkgdir = ".")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rstan_config_+3A_pkgdir">pkgdir</code></td>
<td>
<p>Path to package root folder.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Stan source files for the package should be stored in:
</p>

<ul>
<li> <p><code>inst/stan</code> for <code>.stan</code> files containing instructions to
build a <code>stanmodel</code> object.
</p>
</li>
<li> <p><code>inst/stan/any_subfolder</code> for files to be included via the
<code style="white-space: pre;">&#8288;#include "/my_subfolder/mylib.stan"&#8288;</code> directive.
</p>
</li>
<li> <p><code>inst/stan/any_subfolder</code> for a <code>license.stan</code> file.
</p>
</li>
<li> <p><code>inst/include</code> for the <code>stan_meta_header.hpp</code> file, to be
used for directly interacting with the Stan C++ libraries.
</p>
</li></ul>



<h3>Value</h3>

<p>Invisibly, whether or not any files were added/removed/modified by
the function.
</p>

<hr>
<h2 id='rstan_create_package'>Create a new <span class="rlang"><b>R</b></span> package with compiled Stan programs</h2><span id='topic+rstan_create_package'></span><span id='topic+rstan_package_skeleton'></span>

<h3>Description</h3>

<p><img src="../help/figures/stanlogo.png" width="25" alt="https://mc-stan.org/about/logo/" />
The <code>rstan_create_package()</code> function helps get you started developing a
new <span class="rlang"><b>R</b></span> package that interfaces with Stan via the <span class="pkg">rstan</span> package. First
the basic package structure is set up via <code><a href="usethis.html#topic+create_package">usethis::create_package()</a></code>.
Then several adjustments are made so the package can include Stan programs
that can be built into binary versions (i.e., pre-compiled Stan C++ code).
</p>
<p>The <strong>Details</strong> section below describes the process and the
<strong>See Also</strong> section provides links to recommendations for developers
and a step-by-step walk-through.
</p>
<p>As of version <code style="white-space: pre;">&#8288;2.0.0&#8288;</code> of <span class="pkg">rstantools</span> the
<code>rstan_package_skeleton()</code> function is defunct and only
<code>rstan_create_package()</code> is supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rstan_create_package(
  path,
  fields = NULL,
  rstudio = TRUE,
  open = TRUE,
  stan_files = character(),
  roxygen = TRUE,
  travis = FALSE,
  license = TRUE,
  auto_config = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rstan_create_package_+3A_path">path</code></td>
<td>
<p>The path to the new package to be created (terminating in the
package name).</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_fields">fields</code>, <code id="rstan_create_package_+3A_rstudio">rstudio</code>, <code id="rstan_create_package_+3A_open">open</code></td>
<td>
<p>Same as <code><a href="usethis.html#topic+create_package">usethis::create_package()</a></code>. See
the documentation for that function, especially the note in the
<strong>Description</strong> section about the side effect of changing the active
project.</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_stan_files">stan_files</code></td>
<td>
<p>A character vector with paths to <code>.stan</code> files to include
in the package.</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_roxygen">roxygen</code></td>
<td>
<p>Should <span class="pkg">roxygen2</span> be used for documentation?  Defaults to
<code>TRUE</code>. If so, a file <code>R/{pkgname}-package.R</code> is added to the package with
roxygen tags for the required import lines. See the <strong>Note</strong> section below
for advice specific to the latest versions of <span class="pkg">roxygen2</span>.</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_travis">travis</code></td>
<td>
<p>Should a <code>.travis.yml</code> file be added to the package directory?
This argument is now deprecated. We recommend using GitHub Actions to set
up automated testings for your package. See
https://github.com/r-lib/actions for useful templates.</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_license">license</code></td>
<td>
<p>Logical or character; whether or not to paste the contents of
a <code>license.stan</code> file at the top of all Stan code, or path to such a
file.  If <code>TRUE</code> (the default) adds the <code style="white-space: pre;">&#8288;GPL (&gt;= 3)&#8288;</code> license (see
<strong>Details</strong>).</p>
</td></tr>
<tr><td><code id="rstan_create_package_+3A_auto_config">auto_config</code></td>
<td>
<p>Whether to automatically configure Stan functionality
whenever the package gets installed (see <strong>Details</strong>). Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function first creates a regular <span class="rlang"><b>R</b></span> package using
<code>usethis::create_package()</code>, then adds the infrastructure required to compile
and export <code>stanmodel</code> objects. In the package root directory, the user's
Stan source code is located in:
</p>
<pre>
inst/
  |_stan/
  |   |_include/
  |
  |_include/
</pre>
<p>All <code>.stan</code> files containing instructions to build a <code>stanmodel</code>
object must be placed in <code>inst/stan</code>.  Other <code>.stan</code> files go in
any <code style="white-space: pre;">&#8288;stan/&#8288;</code> subdirectory, to be invoked by Stan's <code style="white-space: pre;">&#8288;#include&#8288;</code>
mechanism, e.g.,
</p>
<pre>
#include "include/mylib.stan"
#include "data/preprocess.stan"
</pre>
<p>See <span class="pkg">rstanarm</span> for many examples.
</p>
<p>The folder <code>inst/include</code> is for all user C++ files associated with the
Stan programs.  In this folder, the only file to directly interact with the
Stan C++ library is <code>stan_meta_header.hpp</code>; all other <code style="white-space: pre;">&#8288;#include&#8288;</code>
directives must be channeled through here.
</p>
<p>The final step of the package creation is to invoke
<code><a href="#topic+rstan_config">rstan_config()</a></code>, which creates the following files for
interfacing with Stan objects from <span class="rlang"><b>R</b></span>:
</p>

<ul>
<li> <p><code>src</code> contains the <code style="white-space: pre;">&#8288;stan_ModelName{.cc/.hpp}&#8288;</code> pairs
associated with all <code>ModelName.stan</code> files in <code>inst/stan</code> which
define <code>stanmodel</code> objects.
</p>
</li>
<li> <p><code>src/Makevars[.win]</code> which link to the <code>StanHeaders</code> and
Boost (<code>BH</code>) libraries.
</p>
</li>
<li> <p><code>R/stanmodels.R</code> loads the C++ modules containing the
<code>stanmodel</code> class definitions, and assigns an <span class="rlang"><b>R</b></span> instance of each
<code>stanmodel</code> object to a <code>stanmodels</code> list (with names
corresponding to the names of the Stan files).
</p>
</li></ul>

<p>When <code>auto_config = TRUE</code>, a <code>configure[.win]</code> file is added to the
package, calling <code><a href="#topic+rstan_config">rstan_config()</a></code> whenever the package is installed.
Consequently, the package must list <span class="pkg">rstantools</span> in the <code>DESCRIPTION</code>
Imports field for this mechanism to work.  Setting <code>auto_config = FALSE</code>
removes the package's dependency on <span class="pkg">rstantools</span>, but the package then
must be manually configured by running <code><a href="#topic+rstan_config">rstan_config()</a></code> whenever
<code>stanmodel</code> files in <code>inst/stan</code> are added, removed, or modified.
</p>
<p>In order to enable Stan functionality, <span class="pkg"><a href="#topic+rstantools">rstantools</a></span>
copies some files to your package.  Since these files are licensed as GPL= 3, the same license applies to your package should you choose todistribute it.  Even if you don't use <span class="pkg"><a href="#topic+rstantools">rstantools</a></span> to createyour package, it is likely that you will be linking to <span class="pkg"><a href="Rcpp.html#topic+Rcpp">Rcpp</a></span> toexport the Stan C++ stanmodel objects to <span class="rlang"><b>R</b></span>.  Since<span class="pkg"><a href="Rcpp.html#topic+Rcpp">Rcpp</a></span> is released under GPL &gt;= 2, the same license would applyto your package upon distribution.
</p>
<p>Authors willing to license their Stan programs of general interest
under the GPL are invited to contribute their <code>.stan</code> files and
supporting <span class="rlang"><b>R</b></span> code to the <span class="pkg">rstanarm</span> package.
</p>


<h3>Using the pre-compiled Stan programs in your package</h3>

<p>The
<code>stanmodel</code> objects corresponding to the Stan programs included with your
package are stored in a list called <code>stanmodels</code>. To run one of the Stan
programs from within an R function in your package just pass the
appropriate element of the <code>stanmodels</code> list to one of the <span class="pkg">rstan</span>
functions for model fitting (e.g., <code>sampling()</code>). For example, for a Stan
program <code>"foo.stan"</code> you would use <code>rstan::sampling(stanmodels$foo, ...)</code>.
</p>


<h3>Note</h3>

<p>For <span class="pkg">devtools</span> users, because of changes in the latest versions of
<span class="pkg">roxygen2</span> it may be necessary to run <code>pkgbuild::compile_dll()</code>
once before <code>devtools::document()</code> will work.
</p>


<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+use_rstan">use_rstan()</a></code> for adding Stan functionality to an existing
<span class="rlang"><b>R</b></span> package and <code><a href="#topic+rstan_config">rstan_config()</a></code> for updating an existing package
when its Stan files are changed.
</p>
</li>
<li><p> The <span class="pkg">rstanarm</span> package <a href="https://github.com/stan-dev/rstanarm">repository</a>
on GitHub.
</p>
</li></ul>


<ul>
<li><p> Guidelines and recommendations for developers of <span class="rlang"><b>R</b></span> packages
interfacing with Stan and a demonstration getting a simple package working
can be found in the vignettes included with <span class="pkg">rstantools</span> and at
<a href="https://mc-stan.org/rstantools/articles/">mc-stan.org/rstantools/articles</a>.
</p>
</li></ul>


<ul>
<li><p> After reading the guidelines for developers, if you have trouble setting up
your package let us know on the the <a href="https://discourse.mc-stan.org">Stan Forums</a>
or at the <span class="pkg">rstantools</span> GitHub <a href="https://github.com/stan-dev/rstantools/issues">issue tracker</a>.
</p>
</li></ul>


<hr>
<h2 id='rstantools_load_code'>Helper function for loading code in roxygenise</h2><span id='topic+rstantools_load_code'></span>

<h3>Description</h3>

<p>Adapted from the <code>sourceDir</code> function defined
by <code>example(source)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rstantools_load_code(path, trace = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rstantools_load_code_+3A_path">path</code></td>
<td>
<p>Path to directory containing code to load</p>
</td></tr>
<tr><td><code id="rstantools_load_code_+3A_trace">trace</code></td>
<td>
<p>Whether to print file names as they are loaded</p>
</td></tr>
<tr><td><code id="rstantools_load_code_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code><a href="base.html#topic+source">source</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>
</p>

<hr>
<h2 id='use_rstan'>Add Stan infrastructure to an existing package</h2><span id='topic+use_rstan'></span>

<h3>Description</h3>

<p>Add Stan infrastructure to an existing <span class="rlang"><b>R</b></span> package. To create a <em>new</em> package
containing Stan programs use <code><a href="#topic+rstan_create_package">rstan_create_package()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_rstan(pkgdir = ".", license = TRUE, auto_config = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="use_rstan_+3A_pkgdir">pkgdir</code></td>
<td>
<p>Path to package root folder.</p>
</td></tr>
<tr><td><code id="use_rstan_+3A_license">license</code></td>
<td>
<p>Logical or character; whether or not to paste the contents of
a <code>license.stan</code> file at the top of all Stan code, or path to such a
file.  If <code>TRUE</code> (the default) adds the <code style="white-space: pre;">&#8288;GPL (&gt;= 3)&#8288;</code> license (see
<strong>Details</strong>).</p>
</td></tr>
<tr><td><code id="use_rstan_+3A_auto_config">auto_config</code></td>
<td>
<p>Whether to automatically configure Stan functionality
whenever the package gets installed (see <strong>Details</strong>). Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Prepares a package to compile and use Stan code by performing the
following steps:
</p>

<ol>
<li><p> Create <code>inst/stan</code> folder where all <code>.stan</code> files defining
Stan models should be stored.
</p>
</li>
<li><p> Create <code>inst/stan/include</code> where optional <code>license.stan</code> file is stored.
</p>
</li>
<li><p> Create <code>inst/include/stan_meta_header.hpp</code> to include optional header
files used by Stan code.
</p>
</li>
<li><p> Create <code>src</code> folder (if it doesn't exist) to contain the Stan C++ code.
</p>
</li>
<li><p> Create <code>R</code> folder (if it doesn't exist) to contain wrapper code to expose
Stan C++ classes to <span class="rlang"><b>R</b></span>.
</p>
</li>
<li><p> Update <code>DESCRIPTION</code> file to contain all needed dependencies to compile
Stan C++ code.
</p>
</li>
<li><p> If <code>NAMESPACE</code> file is generic (i.e., created by <code><a href="#topic+rstan_create_package">rstan_create_package()</a></code>),
append <code>import(Rcpp, methods)</code>, <code>importFrom(rstan, sampling)</code>,
<code>importFrom(rstantools, rstan_config)</code>, <code>importFrom(RcppParallel, RcppParallelLibs)</code>,
and <code>useDynLib</code> directives.  If <code>NAMESPACE</code> is not generic, display message
telling user what to add to <code>NAMESPACE</code> for themselves.
</p>
</li></ol>

<p>When <code>auto_config = TRUE</code>, a <code>configure[.win]</code> file is added to the
package, calling <code><a href="#topic+rstan_config">rstan_config()</a></code> whenever the package is installed.
Consequently, the package must list <span class="pkg">rstantools</span> in the <code>DESCRIPTION</code>
Imports field for this mechanism to work.  Setting <code>auto_config = FALSE</code>
removes the package's dependency on <span class="pkg">rstantools</span>, but the package then
must be manually configured by running <code><a href="#topic+rstan_config">rstan_config()</a></code> whenever
<code>stanmodel</code> files in <code>inst/stan</code> are added, removed, or modified.
</p>


<h3>Value</h3>

<p>Invisibly, <code>TRUE</code> or <code>FALSE</code> indicating whether or not any files or
folders where created or modified.
</p>


<h3>Using the pre-compiled Stan programs in your package</h3>

<p>The
<code>stanmodel</code> objects corresponding to the Stan programs included with your
package are stored in a list called <code>stanmodels</code>. To run one of the Stan
programs from within an R function in your package just pass the
appropriate element of the <code>stanmodels</code> list to one of the <span class="pkg">rstan</span>
functions for model fitting (e.g., <code>sampling()</code>). For example, for a Stan
program <code>"foo.stan"</code> you would use <code>rstan::sampling(stanmodels$foo, ...)</code>.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
