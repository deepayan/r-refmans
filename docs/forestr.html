<!DOCTYPE html><html lang="en"><head><title>Help for package forestr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {forestr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adjust_by_user'><p>Adjust by user height</p></a></li>
<li><a href='#calc_enl'><p>Calculate rugosity and other higher level complexity metrics</p></a></li>
<li><a href='#calc_gap_fraction'><p>Calculate gap fraction</p></a></li>
<li><a href='#calc_intensity'><p>Intensity Statistics</p></a></li>
<li><a href='#calc_rugosity'><p>Calculate rugosity and other higher level complexity metrics</p></a></li>
<li><a href='#calc_rumple'><p>Calculates rumple</p></a></li>
<li><a href='#calc_tls_csc'><p>Calculates rumple</p></a></li>
<li><a href='#calc_tls_mean_leaf_ht'><p>Process single PCL transects.</p></a></li>
<li><a href='#calc_vai'><p>Calculate vegetation area index (VAI) from normalized PCL data matrix</p></a></li>
<li><a href='#code_hits'><p>Code hits</p></a></li>
<li><a href='#csc_metrics'><p>Cover and sky fraction estimates</p></a></li>
<li><a href='#get_transect_length'><p>Get transect length of PCL transect (in meters)</p></a></li>
<li><a href='#make_matrix'><p>Make PCL matrix for higher level complexity measures</p></a></li>
<li><a href='#make_matrix_part_one'><p>Make PCL matrix part one</p></a></li>
<li><a href='#make_matrix_part_two'><p>Make PCL matrix part two</p></a></li>
<li><a href='#make_summary_matrix'><p>Creates summary matrix</p></a></li>
<li><a href='#normalize_pcl'><p>Normalize PCL data based on light saturation and attenuation</p></a></li>
<li><a href='#osbs'><p>PCL transect from Ordway-Swisher Biological Station, Florida, US.</p></a></li>
<li><a href='#pcl_adjusted'><p>a data frame LiDAR returns that have been split to x and z position and coded</p>
and adjusted for user height</a></li>
<li><a href='#pcl_coded'><p>a data frame LiDAR returns that have been split to x and z position and coded</p></a></li>
<li><a href='#pcl_data'><p>PCL transect from the University of Virginia</p></a></li>
<li><a href='#pcl_diagnostic_plot'><p>PCL diagnostic plot</p></a></li>
<li><a href='#pcl_matrix'><p>a LiDAR hit density by x, z position</p></a></li>
<li><a href='#pcl_norm'><p>a data frame of normalized LiDAR return density</p></a></li>
<li><a href='#pcl_split'><p>a data frame LiDAR returns that have been split to x and z position</p></a></li>
<li><a href='#pcl_summary'><p>summary matrix</p></a></li>
<li><a href='#pcl_vai'><p>a data frame of vegetation area index (VAI)</p></a></li>
<li><a href='#plot_hit_grid'><p>Plots LiDAR hit grids of VAI</p></a></li>
<li><a href='#plot_pavd'><p>Graphs Plant Area Volume Density Profiles</p></a></li>
<li><a href='#process_multi_pcl'><p>Process multiplie PCL transects.</p></a></li>
<li><a href='#process_pcl'><p>Process single PCL transects.</p></a></li>
<li><a href='#process_tls'><p>Process single PCL transects.</p></a></li>
<li><a href='#read_pcl'><p><code>read_pcl</code> imports PCL or portable canopy LiDAR files into the workspace and formats them.</p></a></li>
<li><a href='#read_pcl_multi'><p><code>read_pcl_multi</code> imports PCL or portable canopy LiDAR files into the workspace and formats them.</p></a></li>
<li><a href='#red_pine'><p>PCL transect from a red pine plantation in Northern Michigan, US.</p></a></li>
<li><a href='#split_transects_from_pcl'><p>Split transects from PCL</p></a></li>
<li><a href='#write_hit_matrix_to_csv'><p>Writes hit matrix to csv for further analysis</p></a></li>
<li><a href='#write_pcl_to_csv'><p>Writes csc metrics and output variables to .csv</p></a></li>
<li><a href='#write_summary_matrix_to_csv'><p>Writes csc metrics and output variables to .csv</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.2</td>
</tr>
<tr>
<td>Title:</td>
<td>Ecosystem and Canopy Structural Complexity Metrics from LiDAR</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeff Atkins [aut, cre],
  Gil Bohrer [aut],
  Robert Fahey [aut],
  Brady Hardiman [aut],
  Chrisopher Gough [aut],
  Timothy Morin [aut],
  Atticus Stovall [aut],
  Naupaka Zimmerman [ctb, aut],
  Chris Black [ctb]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/atkinsjeff/forestr">https://github.com/atkinsjeff/forestr</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeff Atkins &lt;jwatkins6@vcu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a toolkit for calculating forest and canopy structural complexity metrics from
    terrestrial LiDAR (light detection and ranging). References:  Atkins et al. 2018 &lt;<a href="https://doi.org/10.1111%2F2041-210X.13061">doi:10.1111/2041-210X.13061</a>&gt;; Hardiman et al. 2013 &lt;<a href="https://doi.org/10.3390%2Ff4030537">doi:10.3390/f4030537</a>&gt;;
    Parker et al. 2004 &lt;<a href="https://doi.org/10.1111%2Fj.0021-8901.2004.00925.x">doi:10.1111/j.0021-8901.2004.00925.x</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.2)</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, plyr, dplyr, stats, tools, viridis, tidyr, moments,
tibble</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-04-14 19:04:44 UTC; jeffatkins81</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-04-14 19:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='adjust_by_user'>Adjust by user height</h2><span id='topic+adjust_by_user'></span>

<h3>Description</h3>

<p><code>adjust_by_user</code> adjusts data based on the user height to acccount
for the laser's distance from the ground.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>adjust_by_user(df, user_height)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="adjust_by_user_+3A_df">df</code></td>
<td>
<p>the data frame of raw pcl data</p>
</td></tr>
<tr><td><code id="adjust_by_user_+3A_user_height">user_height</code></td>
<td>
<p>the height of the laser off the ground as mounted on the
user in meters</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>adjust_by_user</code> simply adds the height of the user to the
return distances in the data frame to estimate true height.
</p>


<h3>Value</h3>

<p>a data frame adjusted by height
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Adust raw data to account for user height as PCL is user-mounted and correction
# gives actual distance from ground.

pcl_adjusted &lt;- adjust_by_user(pcl_coded, user_height = 1.05)

</code></pre>

<hr>
<h2 id='calc_enl'>Calculate rugosity and other higher level complexity metrics</h2><span id='topic+calc_enl'></span>

<h3>Description</h3>

<p><code>calc_enl</code> calculates the effective number of layers in a canopy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_enl(m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_enl_+3A_m">m</code></td>
<td>
<p>a data frame of VAI for x, z bins from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the effective number of layers
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculates the effective number of layers
calc_enl(pcl_vai)

</code></pre>

<hr>
<h2 id='calc_gap_fraction'>Calculate gap fraction</h2><span id='topic+calc_gap_fraction'></span>

<h3>Description</h3>

<p><code>calc_gap_fraction</code> produces clumping index based on
gap fraction through the canopy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_gap_fraction(m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_gap_fraction_+3A_m">m</code></td>
<td>
<p>the matrix of bin hits calculated as density of
LiDAR returns for each x column.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific function that works using the adjusted matrix to calculate gap fraction through the canopy. This function also returns clumping index.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>calc_gap_fraction(pcl_vai)

</code></pre>

<hr>
<h2 id='calc_intensity'>Intensity Statistics</h2><span id='topic+calc_intensity'></span>

<h3>Description</h3>

<p><code>calc_intensity</code> calcualtes statisitcs from the intensity column of the PCL data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_intensity(df, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_intensity_+3A_df">df</code></td>
<td>
<p>data frame of uncorrected PCL data</p>
</td></tr>
<tr><td><code id="calc_intensity_+3A_filename">filename</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>calc_intensity</code> function calculates statistics about the intensity
data in the PCL data, including min, max, sd, mean, median.
</p>


<h3>Value</h3>

<p>statisics on the intensity data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
intensity_stats &lt;- calc_intensity(pcl_adjusted, filename = "UVA")

</code></pre>

<hr>
<h2 id='calc_rugosity'>Calculate rugosity and other higher level complexity metrics</h2><span id='topic+calc_rugosity'></span>

<h3>Description</h3>

<p><code>calc_rugosity</code> calculates canopy structural complexity
metrics from PCL data and prints them to the screen.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_rugosity(df, m, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_rugosity_+3A_df">df</code></td>
<td>
<p>is a LiDAR summary matrix data frame</p>
</td></tr>
<tr><td><code id="calc_rugosity_+3A_m">m</code></td>
<td>
<p>matrix of light adjusted vai values.</p>
</td></tr>
<tr><td><code id="calc_rugosity_+3A_filename">filename</code></td>
<td>
<p>the name of the file currently being processed.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific function calculates canopy rugosity
and other metrics, including rumple, height metrics, etc.
</p>


<h3>Value</h3>

<p>a series of metrics that describe canopy and
ecosystem height, density, openness, cover, etc.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculates metrics of canopy structural complexity.
calc_rugosity(pcl_summary, pcl_vai, filename = "")

</code></pre>

<hr>
<h2 id='calc_rumple'>Calculates rumple</h2><span id='topic+calc_rumple'></span>

<h3>Description</h3>

<p><code>calc_rumple</code> calculates canopy rumple.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_rumple(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_rumple_+3A_df">df</code></td>
<td>
<p>LiDAR summary matrix data frame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses the summary matrix created by
the function <code>make_summary_matrix</code> to calculate
canopy rumple, the relationship between outer canopy surface
and the ground area.
</p>


<h3>Value</h3>

<p>rumple for the canopy based on 2-D transect
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
calc_rumple(pcl_summary)

</code></pre>

<hr>
<h2 id='calc_tls_csc'>Calculates rumple</h2><span id='topic+calc_tls_csc'></span>

<h3>Description</h3>

<p><code>calc_tls_csc</code> calculates canopy structural complexity metrics from the tls vai matrix
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_tls_csc(m, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_tls_csc_+3A_m">m</code></td>
<td>
<p>matrix of vai data with mean leaf height column</p>
</td></tr>
<tr><td><code id="calc_tls_csc_+3A_filename">filename</code></td>
<td>
<p>the name of the file being process0</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific function to calculate canopy structural complexity or CSC metrics from the VAI matrix imported in.
</p>


<h3>Value</h3>

<p>csc metrics
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
calc_tls_csc(m)

## End(Not run)
</code></pre>

<hr>
<h2 id='calc_tls_mean_leaf_ht'>Process single PCL transects.</h2><span id='topic+calc_tls_mean_leaf_ht'></span>

<h3>Description</h3>

<p><code>calc_tls_mean_leaf_ht</code> used in process_tls to calculate mean leaf height from tls slife
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_tls_mean_leaf_ht(m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_tls_mean_leaf_ht_+3A_m">m</code></td>
<td>
<p>the vai matrix</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function derives mean leaf height from x, z vai from TLS data.
</p>


<h3>Value</h3>

<p>adds columns to the matrix of height.bin
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# with designated file
## Not run: process_pcl("pcl_data.csv", marker.spacing = 10, user_height = 1.05, max.vai = 8)


</code></pre>

<hr>
<h2 id='calc_vai'>Calculate vegetation area index (VAI) from normalized PCL data matrix</h2><span id='topic+calc_vai'></span>

<h3>Description</h3>

<p><code>calc_vai</code> calculates vegetation area index (VAI) from a normalized
matrix of LiDAR data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_vai(df, max.vai)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_vai_+3A_df">df</code></td>
<td>
<p>data frame of pcl data that has been corrected for light extinction
using the <code>normalize_pcl</code> function.</p>
</td></tr>
<tr><td><code id="calc_vai_+3A_max.vai">max.vai</code></td>
<td>
<p>the maximum value of column VAI. The default is 8.
Should be a max value, not a mean.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a matrix of vai by x, z in the canopy
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pcl_vai &lt;- calc_vai(pcl_norm, max.vai = 8)

</code></pre>

<hr>
<h2 id='code_hits'>Code hits</h2><span id='topic+code_hits'></span>

<h3>Description</h3>

<p><code>code_hits</code> classifies data values as canopy returns, sky returns, or
data markers.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>code_hits(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="code_hits_+3A_df">df</code></td>
<td>
<p>a raw set of pcl data</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>code_hits</code> accounts for the NAs that are in
the return distance column which are actually
the sky hits (i.e. when the lidar does not record a canopy hit).
</p>


<h3>Examples</h3>

<pre><code class='language-R'># classify data values that have been imported using read_pcl
pcl_coded &lt;- code_hits(pcl_data)

</code></pre>

<hr>
<h2 id='csc_metrics'>Cover and sky fraction estimates</h2><span id='topic+csc_metrics'></span>

<h3>Description</h3>

<p><code>csc_metrics</code> creates first-order canopy structural metrics that
do not require normalization
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csc_metrics(df, filename, transect.length)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="csc_metrics_+3A_df">df</code></td>
<td>
<p>data frame of uncorrected PCL data</p>
</td></tr>
<tr><td><code id="csc_metrics_+3A_filename">filename</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
<tr><td><code id="csc_metrics_+3A_transect.length">transect.length</code></td>
<td>
<p>the length of the transect</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>csc_metrics</code> function processes uncorrected PCL data to
generate canopy structural complexity (CSC) metrics that do not
require normalization (i.e. correction for light saturation based on
Beer-Lambert Law). These metrics include:  mean return height of raw data, sd
of raw canopy height returns, maximum measured canopy height, scan density (the
average no. of LiDAR returns per linear meter), and both openness and cover
fraction which are used for gap fraction calcuations.
</p>


<h3>Value</h3>

<p>slew of cover and sky fraction metrics
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

csc.metrics &lt;- csc_metrics(pcl_adjusted, filename = "UVA", transect.length = 10)

</code></pre>

<hr>
<h2 id='get_transect_length'>Get transect length of PCL transect (in meters)</h2><span id='topic+get_transect_length'></span>

<h3>Description</h3>

<p><code>get_transect_length</code> acquires the length of a transect based on
a known marker spacing of the data markers stored in pcl data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_transect_length(df, marker.spacing)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_transect_length_+3A_df">df</code></td>
<td>
<p>data frame of unprocessed PCL data</p>
</td></tr>
<tr><td><code id="get_transect_length_+3A_marker.spacing">marker.spacing</code></td>
<td>
<p>distance between transect markers, typically 5 or 10 m</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns the transect length of a given PCL file given a known marker spacing.
</p>


<h3>Value</h3>

<p>length of transect
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Get the length of the transect given a known spacing between data markers
transect.length &lt;- get_transect_length(pcl_data, marker.spacing = 10)

</code></pre>

<hr>
<h2 id='make_matrix'>Make PCL matrix for higher level complexity measures</h2><span id='topic+make_matrix'></span>

<h3>Description</h3>

<p><code>make_matrix</code> produces a matrix of, x, z values in
coordinate space with the number and type of each LiDAR
return in each x, z bin combination
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_matrix(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_matrix_+3A_df">df</code></td>
<td>
<p>data frame of PCL data that has been processed with
<code>split_transect_from_pcl</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>make_matrix</code> function munges data in to a data frame
of x, z bins with the number of canopy hits located in each bin.
</p>


<h3>Value</h3>

<p>sorted matrix of LiDAR returns for each x, z position
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pcl_matrix &lt;- make_matrix(pcl_split)

</code></pre>

<hr>
<h2 id='make_matrix_part_one'>Make PCL matrix part one</h2><span id='topic+make_matrix_part_one'></span>

<h3>Description</h3>

<p><code>make_matrix_part_one</code> produces a matrix of, x, z values in
coordinate space with the number and type of each LiDAR
return in each x, z bin combination
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_matrix_part_one(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_matrix_part_one_+3A_df">df</code></td>
<td>
<p>data frame of PCL data that has been processed with</p>
</td></tr>
</table>


<h3>Value</h3>

<p>sorted matrix of LiDAR returns for each x, z position
</p>

<hr>
<h2 id='make_matrix_part_two'>Make PCL matrix part two</h2><span id='topic+make_matrix_part_two'></span>

<h3>Description</h3>

<p><code>make_matrix_part_two</code> produces a matrix of, x, z values in
coordinate space with the number and type of each LiDAR
return in each x, z bin combination
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_matrix_part_two(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_matrix_part_two_+3A_df">df</code></td>
<td>
<p>data frame of PCL data that has been processed with</p>
</td></tr>
</table>


<h3>Value</h3>

<p>sorted matrix of LiDAR returns for each x, z position
</p>

<hr>
<h2 id='make_summary_matrix'>Creates summary matrix</h2><span id='topic+make_summary_matrix'></span>

<h3>Description</h3>

<p><code>make_summary_matrix</code> creates a summary matrix of data through data wrangling
the VAI data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_summary_matrix(df, m)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="make_summary_matrix_+3A_df">df</code></td>
<td>
<p>sorted data frame of processed PCL data</p>
</td></tr>
<tr><td><code id="make_summary_matrix_+3A_m">m</code></td>
<td>
<p>matrix of PCL hit density with x and z coordinates</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This makes a dataframe that is as long as a transect is. If the
transect is 40 m, this data frame has 40 rows. As input,
<code>make_summary_matrix</code> requires a data frame of values
from <code>split_transects_from_pcl</code> first, and second,
the data frame of VAI from the function <code>calc_vai</code>.
</p>
<p>#' This function allows you to express your love of cats.
</p>


<h3>Value</h3>

<p>a matrix of summary stats by each x and z coordinate position
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pcl_summary &lt;- make_summary_matrix(pcl_split, pcl_vai)

</code></pre>

<hr>
<h2 id='normalize_pcl'>Normalize PCL data based on light saturation and attenuation</h2><span id='topic+normalize_pcl'></span>

<h3>Description</h3>

<p><code>normalize_pcl</code> normalizes a PCL matrix for occlusion.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>normalize_pcl(df)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="normalize_pcl_+3A_df">df</code></td>
<td>
<p>data frame of pcl hit density processed from
<code>make_matrix</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function corrects saturated columns of LiDAR data
for occlusion based on assumptions from the Beer-Lambert Law.
</p>


<h3>Value</h3>

<p>a data frame of PCL hit density corrected for
light saturation and attentuation based on Beer's Law
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pcl_norm &lt;- normalize_pcl(pcl_matrix)

</code></pre>

<hr>
<h2 id='osbs'>PCL transect from Ordway-Swisher Biological Station, Florida, US.</h2><span id='topic+osbs'></span>

<h3>Description</h3>

<p>A dataset that consists of one 40 m transect taken in a longleaf pine-oak savanna
in North-central Florida. Data collected April, 2016 by J. Atkins and R. Fahey.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osbs
</code></pre>


<h3>Format</h3>

<p>A data frame with 10506 rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='pcl_adjusted'>a data frame LiDAR returns that have been split to x and z position and coded
and adjusted for user height</h2><span id='topic+pcl_adjusted'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_adjusted
</code></pre>


<h3>Format</h3>

<p>A data frame with 14576 rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
<dt>sky_hit</dt><dd><p>lidar return that does not hit the canopy</p>
</dd>
<dt>can_hit</dt><dd><p>lidar return that hits the canopy</p>
</dd>
<dt>marker</dt><dd><p>negative value that indicates marker</p>
</dd>
</dl>

<p>@source <a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a></p>

<hr>
<h2 id='pcl_coded'>a data frame LiDAR returns that have been split to x and z position and coded</h2><span id='topic+pcl_coded'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_coded
</code></pre>


<h3>Format</h3>

<p>A data frame with 14576 rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
<dt>sky_hit</dt><dd><p>lidar return that does not hit the canopy</p>
</dd>
<dt>can_hit</dt><dd><p>lidar return that hits the canopy</p>
</dd>
<dt>marker</dt><dd><p>negative value that indicates marker</p>
</dd>
</dl>

<p>@source <a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a></p>

<hr>
<h2 id='pcl_data'>PCL transect from the University of Virginia</h2><span id='topic+pcl_data'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_data
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 14576 rows and 3 columns.</p>


<h3>Details</h3>

<p>#' @format A data frame with 14576rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='pcl_diagnostic_plot'>PCL diagnostic plot</h2><span id='topic+pcl_diagnostic_plot'></span>

<h3>Description</h3>

<p><code>pcl_diagnostic_plot</code> this function provides a diagnostic view of raw PCL data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_diagnostic_plot(df, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pcl_diagnostic_plot_+3A_df">df</code></td>
<td>
<p>data frame of unprocessed PCL data</p>
</td></tr>
<tr><td><code id="pcl_diagnostic_plot_+3A_filename">filename</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function provides a graphic view of raw PCL data to check for equal data
spacing and marker spacing
</p>


<h3>Value</h3>

<p>a plot of PCL data showing marker spacing
</p>


<h3>Examples</h3>

<pre><code class='language-R'># using the Ordway-Swisher Data set
pcl_diagnostic_plot(osbs)

</code></pre>

<hr>
<h2 id='pcl_matrix'>a LiDAR hit density by x, z position</h2><span id='topic+pcl_matrix'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_matrix
</code></pre>


<h3>Format</h3>

<p>A data frame with 1120 rows:
</p>

<dl>
<dt>xbin</dt><dd><p>x-bin position</p>
</dd>
<dt>zbin</dt><dd><p>z-bin position</p>
</dd>
<dt>bin.hits</dt><dd><p>number of LiDAR returns at each x- and z- bin</p>
</dd>
<dt>sky.hits</dt><dd><p>total numer of sky hits per x column</p>
</dd>
<dt>can.hits</dt><dd><p>total numer of canopy hits per x column</p>
</dd>
<dt>lidar.pulses</dt><dd><p>no. of lidar pulses emitted per column</p>
</dd>
<dt>Freq</dt><dd><p>no idea</p>
</dd>
</dl>

<p>@source <a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a></p>

<hr>
<h2 id='pcl_norm'>a data frame of normalized LiDAR return density</h2><span id='topic+pcl_norm'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_norm
</code></pre>


<h3>Format</h3>

<p>A data frame with 1120 rows:
</p>

<dl>
<dt>.id</dt><dd><p>column numbering</p>
</dd>
<dt>xbin</dt><dd><p>x-bin position</p>
</dd>
<dt>zbin</dt><dd><p>z-bin position</p>
</dd>
<dt>bin.hits</dt><dd><p>number of LiDAR returns at each x- and z- bin</p>
</dd>
<dt>sky.hits</dt><dd><p>total numer of sky hits per x column</p>
</dd>
<dt>can.hits</dt><dd><p>total numer of canopy hits per x column</p>
</dd>
<dt>lidar.pulses</dt><dd><p>no. of lidar pulses emitted per column</p>
</dd>
<dt>Freq</dt><dd><p>no idea</p>
</dd>
<dt>hit.count</dt><dd><p>total number of hits distributed through canopy</p>
</dd>
<dt>phi</dt><dd><p>percent of saturation</p>
</dd>
<dt>dee</dt><dd><p>percent of returns distributed</p>
</dd>
<dt>x.counter</dt><dd><p>counting variable</p>
</dd>
<dt>sum.dee</dt><dd><p>distributed proportion</p>
</dd>
<dt>fee</dt><dd><p>coefficent</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='pcl_split'>a data frame LiDAR returns that have been split to x and z position</h2><span id='topic+pcl_split'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_split
</code></pre>


<h3>Format</h3>

<p>A data frame with 13982 rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
<dt>sky_hit</dt><dd><p>lidar return that does not hit the canopy</p>
</dd>
<dt>can_hit</dt><dd><p>lidar return that hits the canopy</p>
</dd>
<dt>marker</dt><dd><p>negative value that indicates marker</p>
</dd>
<dt>seg_num</dt><dd><p>intermediate to get x position</p>
</dd>
<dt>chunk_num</dt><dd><p>intermediate to get x position</p>
</dd>
<dt>xbin</dt><dd><p>position along horizontal axis</p>
</dd>
<dt>zbin</dt><dd><p>position along vertical axis</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='pcl_summary'>summary matrix</h2><span id='topic+pcl_summary'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_summary
</code></pre>


<h3>Format</h3>

<p>A data frame with 40 rows:
</p>

<dl>
<dt>xbin</dt><dd><p>x-bin position</p>
</dd>
<dt>mean.ht</dt><dd><p>mean height</p>
</dd>
<dt>sd.ht</dt><dd><p>standard deviation of mean leaf height</p>
</dd>
<dt>max.ht</dt><dd><p>max measured height</p>
</dd>
<dt>max.vai</dt><dd><p>highest measured max VAI</p>
</dd>
<dt>sum.vai</dt><dd><p>total VAI for the column</p>
</dd>
<dt>sd.vai</dt><dd><p>standard deviation of VAI</p>
</dd>
<dt>vai.z.sum</dt><dd><p>density adjuste height</p>
</dd>
<dt>max.vai.z</dt><dd><p>height of peak VAI</p>
</dd>
<dt>height.bin</dt><dd><p>mean leaf height</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='pcl_vai'>a data frame of vegetation area index (VAI)</h2><span id='topic+pcl_vai'></span>

<h3>Description</h3>

<p>Derived from data collected at the University of Virginia
Data collected August, 2016 by J. Atkins. Dervied from the calc_vai function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pcl_vai
</code></pre>


<h3>Format</h3>

<p>A data frame with 1120 rows:
</p>

<dl>
<dt>.id</dt><dd><p>column numbering</p>
</dd>
<dt>xbin</dt><dd><p>x-bin position</p>
</dd>
<dt>zbin</dt><dd><p>z-bin position</p>
</dd>
<dt>bin.hits</dt><dd><p>number of LiDAR returns at each x- and z- bin</p>
</dd>
<dt>sky.hits</dt><dd><p>total numer of sky hits per x column</p>
</dd>
<dt>can.hits</dt><dd><p>total numer of canopy hits per x column</p>
</dd>
<dt>lidar.pulses</dt><dd><p>no. of lidar pulses emitted per column</p>
</dd>
<dt>Freq</dt><dd><p>no idea</p>
</dd>
<dt>hit.count</dt><dd><p>total number of hits distributed through canopy</p>
</dd>
<dt>phi</dt><dd><p>percent of saturation</p>
</dd>
<dt>dee</dt><dd><p>percent of returns distributed</p>
</dd>
<dt>x.counter</dt><dd><p>counting variable</p>
</dd>
<dt>sum.dee</dt><dd><p>distributed proportion</p>
</dd>
<dt>fee</dt><dd><p>coefficent</p>
</dd>
<dt>cvr</dt><dd><p>cover proportion</p>
</dd>
<dt>olai</dt><dd><p>max LAI or VAI number</p>
</dd>
<dt>vai</dt><dd><p>calculated VAI</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='plot_hit_grid'>Plots LiDAR hit grids of VAI</h2><span id='topic+plot_hit_grid'></span>

<h3>Description</h3>

<p><code>plot_hit_grid</code> produces a LiDAR hit grid plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_hit_grid(m, filename, transect.length, max.ht, max.vai)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_hit_grid_+3A_m">m</code></td>
<td>
<p>matrix of light adjusted vai values.</p>
</td></tr>
<tr><td><code id="plot_hit_grid_+3A_filename">filename</code></td>
<td>
<p>the name of the file currently being processed.</p>
</td></tr>
<tr><td><code id="plot_hit_grid_+3A_transect.length">transect.length</code></td>
<td>
<p>the length of the transect used to create the x-axis</p>
</td></tr>
<tr><td><code id="plot_hit_grid_+3A_max.ht">max.ht</code></td>
<td>
<p>the maximum measured height used to create the y-axis</p>
</td></tr>
<tr><td><code id="plot_hit_grid_+3A_max.vai">max.vai</code></td>
<td>
<p>the maximum density of VAI, defaul = 8</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a hit gride of VAI
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculates metrics of canopy structural complexity.
plot_hit_grid(pcl_vai, filename = "UVA LiDAR data", transect.length = 40,
 max.ht = 30, max.vai = 8)

</code></pre>

<hr>
<h2 id='plot_pavd'>Graphs Plant Area Volume Density Profiles</h2><span id='topic+plot_pavd'></span>

<h3>Description</h3>

<p><code>plot_pavd</code> produces a PAVD plot from matrix data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_pavd(m, filename, plot.file.path.pavd, hist = FALSE, save_output = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_pavd_+3A_m">m</code></td>
<td>
<p>matrix of light adjusted vai values.</p>
</td></tr>
<tr><td><code id="plot_pavd_+3A_filename">filename</code></td>
<td>
<p>the name of the file currently being processed.</p>
</td></tr>
<tr><td><code id="plot_pavd_+3A_plot.file.path.pavd">plot.file.path.pavd</code></td>
<td>
<p>path of plot file to be written, inherited
from <code>process_pcl</code> or <code>process_multi_pcl</code></p>
</td></tr>
<tr><td><code id="plot_pavd_+3A_hist">hist</code></td>
<td>
<p>logical input to include histogram of VAI, if TRUE it is included,
if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="plot_pavd_+3A_save_output">save_output</code></td>
<td>
<p>if TRUE it saves the plot, if false it just runs</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is a nested function inside of <code>process_pcl</code>. It could be run
independently using the summary_matrix.csv
output files created from running <code>procesS_pcl</code> as well.
</p>


<h3>Value</h3>

<p>plant area volume density plots
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_hit_grid">plot_hit_grid</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculates metrics of canopy structural complexity.
plot_pavd(pcl_vai, filename = "pcl_test", hist = FALSE, save_output = FALSE)
plot_pavd(pcl_vai, filename = "pcl_test", hist = TRUE, save_output = FALSE)

</code></pre>

<hr>
<h2 id='process_multi_pcl'>Process multiplie PCL transects.</h2><span id='topic+process_multi_pcl'></span>

<h3>Description</h3>

<p><code>process_multi_pcl</code> imports and processes mutiple PCL transect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_multi_pcl(
  data_dir,
  user_height,
  marker.spacing,
  max.vai,
  pavd = FALSE,
  hist = FALSE,
  save_output = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_multi_pcl_+3A_data_dir">data_dir</code></td>
<td>
<p>directory where PCL .csv files are stored</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_user_height">user_height</code></td>
<td>
<p>height of laser from ground based on user in meters</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_marker.spacing">marker.spacing</code></td>
<td>
<p>space between markers in the PCL data, in meters</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_max.vai">max.vai</code></td>
<td>
<p>the maximum value of column VAI. The default is 8. Should be a max value, not a mean.</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_pavd">pavd</code></td>
<td>
<p>logical input to include Plant Area Volume Density Plot from [plot_pavd], if TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_hist">hist</code></td>
<td>
<p>logical input to include histogram of VAI with PAVD plot, if TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_multi_pcl_+3A_save_output">save_output</code></td>
<td>
<p>needs to be set to true, or else you are just going to get a lot of data on the screen</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific function that works using the input of a data directory of .csv
files where the function cycles through the files there and processes multiple
files, producing the same output files described in <code>process_pcl</code>
</p>


<h3>Value</h3>

<p>writes the hit matrix, summary matrix, and output variables to csv in an output folder, along with hit grid plot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+process_pcl">process_pcl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# This function works on a directory of raw PCL data
## Not run: data_directory &lt;- "./data/PCL_transects/"  #data directory containing PCL transects
process_multi_pcl(data_directory, user_height = 1.05, marker.spacing = 10,
max.vai = 8, pavd = FALSE, hist = FALSE, save_output = FALSE)

process_multi_pcl("./data/PCL_transects/", user_height = 1.05, marker.spacing = 10,
max.vai = 8, pavd = FALSE, hist = FALSE, save_output = FALSE)

## End(Not run)

</code></pre>

<hr>
<h2 id='process_pcl'>Process single PCL transects.</h2><span id='topic+process_pcl'></span>

<h3>Description</h3>

<p><code>process_pcl</code> imports and processes a single PCL transect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_pcl(
  f,
  user_height,
  marker.spacing,
  max.vai,
  pavd = FALSE,
  hist = FALSE,
  save_output = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_pcl_+3A_f">f</code></td>
<td>
<p>the name of the filename to input &lt;character&gt; or a data frame &lt;data frame&gt;.</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_user_height">user_height</code></td>
<td>
<p>the height of the laser off the ground as mounted on the user
in meters. default is 1 m</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_marker.spacing">marker.spacing</code></td>
<td>
<p>distance between markers, defaults is 10 m</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_max.vai">max.vai</code></td>
<td>
<p>the maximum value of column VAI. The default is 8. Should be
a max value, not a mean.</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_pavd">pavd</code></td>
<td>
<p>logical input to include Plant Area Volume Density Plot from plot_pavd,
if TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_hist">hist</code></td>
<td>
<p>logical input to include histogram of VAI with PAVD plot, if
TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_pcl_+3A_save_output">save_output</code></td>
<td>
<p>the name of the output folder where to write all the output fiels.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function imports raw pcl data or existing data frames of pcl data and writes
all data and analysis to a series of .csv files in an output directory (output)
keeping nothing in the workspace.
</p>
<p><code>process_pcl</code> uses a workflow that cuts the data into 1 meter segments with
z and x positions in coordinate space where x referes to distance along the ground
and z refers to distance above the ground. Data are normalized based on
light extinction assumptions from the Beer-Lambert Law to account for light saturation.
Data are then summarized and metrics of canopy structure complexity are calculated.
</p>
<p><code>process_pcl</code> will write multiple output files to disk in an output directory that
<code>process_pcl</code> creates within the work directing. These files include:
</p>
<p>1. an output variables file that contains a list of CSC variables and is
written by the subfunction <code>write_pcl_to_csv</code>
2. a summary matrix, that includes detailed information on each vertical column
of LiDAR data written by the subfunction <code>write_summary_matrix_to_csv</code>
3. a hit matrix, which is a matrix of VAI at each x and z position, written by the
subfunction <code>write_hit_matrix_to_pcl</code>
4. a hit grid, which is a graphical representation of VAI along the x and z coordinate space.
5. optionally, plant area/volume density profiles can be created by including
<code>pavd = TRUE</code> that include an additional histogram with the optional
<code>hist = TRUE</code> in the <code>process_pcl</code> call.
</p>


<h3>Value</h3>

<p>writes the hit matrix, summary matrix, and output variables to csv
in an output folder, along with hit grid plot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+process_multi_pcl">process_multi_pcl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Run process complete PCL transect without storing to disk
uva.pcl &lt;- system.file("extdata", "UVAX_A4_01W.csv", package = "forestr")

process_pcl(uva.pcl, marker.spacing = 10, user_height = 1.05,
max.vai = 8, pavd = FALSE, hist = FALSE, save_output = FALSE)

# with data frame
process_pcl(osbs, marker.spacing = 10, user_height = 1.05,
max.vai = 8, pavd = FALSE, hist = FALSE, save_output = FALSE)


</code></pre>

<hr>
<h2 id='process_tls'>Process single PCL transects.</h2><span id='topic+process_tls'></span>

<h3>Description</h3>

<p><code>process_tls</code> imports and processes a slice from a voxelated TLS scan.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_tls(f, slice, pavd = FALSE, hist = FALSE, save_output = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_tls_+3A_f">f</code></td>
<td>
<p>the name of the filename to input &lt;character&gt; or a data frame &lt;data frame&gt;.</p>
</td></tr>
<tr><td><code id="process_tls_+3A_slice">slice</code></td>
<td>
<p>the number of the transect to use from xyz tls data</p>
</td></tr>
<tr><td><code id="process_tls_+3A_pavd">pavd</code></td>
<td>
<p>logical input to include Plant Area Volume Density Plot from <code>plot_pavd</code>, if TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_tls_+3A_hist">hist</code></td>
<td>
<p>logical input to include histogram of VAI with PAVD plot, if TRUE it is included, if FALSE, it is not.</p>
</td></tr>
<tr><td><code id="process_tls_+3A_save_output">save_output</code></td>
<td>
<p>needs to be set to true, or else you are just going to get a lot of data on the screen</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes as input a four column .CSV file or data frame of x, y, z, and VAI
(Vegetation Area Index) derived from 3-D (TLS) LiDAR data. Currently, this function only
analyzes a single slice from the inputed TLS data set. VAI is calculated externally
by the user using user-determined methodology.
</p>
<p>The <code>process_tls</code> function will write multiple output files to disk in an (output)
directory that <code>process_tls</code> creates within the work directing. These files include:
</p>
<p>1. an output variables file that contains a list of CSC variables and is
written by the subfunction <code>write_pcl_to_csv</code>
</p>
<p>2. a summary matrix, that includes detailed information on each vertical column of Lidar data
written by the subfunction <code>write_summary_matrix_to_csv</code>
</p>
<p>3. a hit matrix, which is a matrix of VAI at each x and z position, written by the
subfunction <code>write_hit_matrix_to_pcl</code>
</p>
<p>4. a hit grid, which is a graphical representation of VAI along the x and z coordinate space.
5. optionally, plant area/volume density profiles can be created by including
<code>pavd = TRUE</code> that include an additional histogram with the optional <code>hist = TRUE</code> in the
<code>process_pcl</code> call.
</p>


<h3>Value</h3>

<p>writes the hit matrix, summary matrix, and output variables
to csv in an output folder, along with hit grid plot
</p>


<h3>See Also</h3>

<p><code><a href="#topic+process_pcl">process_pcl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# with designated file
uva.tls&lt;- system.file("extdata", "UVAX_A4_01_tls.csv", package = "forestr")

process_tls(uva.tls, slice = 5, pavd = FALSE, hist = FALSE, save_output = FALSE)


</code></pre>

<hr>
<h2 id='read_pcl'><code>read_pcl</code> imports PCL or portable canopy LiDAR files into the workspace and formats them.</h2><span id='topic+read_pcl'></span>

<h3>Description</h3>

<p>This function specificially reads in PCL files that are in .csv format, standard format for that data type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_pcl(f)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_pcl_+3A_f">f</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+process_pcl">process_pcl</a></code>
<code><a href="#topic+process_multi_pcl">process_multi_pcl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Link to raw PCL data, in .csv form.
uva_pcl &lt;- system.file("extdata", "UVAX_A4_01W.csv", package = "forestr")

# Import PCL data to the workspace
pcl_data &lt;-read_pcl(uva_pcl)


</code></pre>

<hr>
<h2 id='read_pcl_multi'><code>read_pcl_multi</code> imports PCL or portable canopy LiDAR files into the workspace and formats them.</h2><span id='topic+read_pcl_multi'></span>

<h3>Description</h3>

<p>This function specificially reads in PCL files that are in .csv format, standard format for that data type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_pcl_multi(data_directory, filename)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_pcl_multi_+3A_data_directory">data_directory</code></td>
<td>
<p>directory where files are stored</p>
</td></tr>
<tr><td><code id="read_pcl_multi_+3A_filename">filename</code></td>
<td>
<p>name of file to be imported
</p>
<p>Zero-length vectors have sum 0 by definition. See
<a href="http://en.wikipedia.org/wiki/Empty_sum">http://en.wikipedia.org/wiki/Empty_sum</a> for more details.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This function runs internally right now.
read_pcl_multi(data_directory, filename)

## End(Not run)
</code></pre>

<hr>
<h2 id='red_pine'>PCL transect from a red pine plantation in Northern Michigan, US.</h2><span id='topic+red_pine'></span>

<h3>Description</h3>

<p>A dataset that consists of one 40 m transect taken in a red pine plantations
in Northern Michigan. Data collected July, 2017 by J. Atkins.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>red_pine
</code></pre>


<h3>Format</h3>

<p>A data frame with 17559 rows:
</p>

<dl>
<dt>index</dt><dd><p>index of raw data&ndash;position along transect</p>
</dd>
<dt>return_distance</dt><dd><p>raw, uncorrected LiDAR return distances from laser</p>
</dd>
<dt>intensity</dt><dd><p>intensity values as recorded by LiDAR system</p>
</dd>
</dl>


<h3>Source</h3>

<p><a href="http://atkinsjeff.github.io">http://atkinsjeff.github.io</a>
</p>

<hr>
<h2 id='split_transects_from_pcl'>Split transects from PCL</h2><span id='topic+split_transects_from_pcl'></span>

<h3>Description</h3>

<p><code>split_transects_from_pcl</code> places data values into x-bins (x-coordinates
and) and z-bins (z-coordinates)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>split_transects_from_pcl(
  pcl_data,
  transect.length,
  marker.spacing,
  DEBUG = FALSE,
  data_dir,
  output_file_name
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="split_transects_from_pcl_+3A_pcl_data">pcl_data</code></td>
<td>
<p>data frame of unprocessed PCL data.</p>
</td></tr>
<tr><td><code id="split_transects_from_pcl_+3A_transect.length">transect.length</code></td>
<td>
<p>total transect length. Default value is 40 meters.</p>
</td></tr>
<tr><td><code id="split_transects_from_pcl_+3A_marker.spacing">marker.spacing</code></td>
<td>
<p>distance between markers in meters within the PCL data. Default value is 10 m.</p>
</td></tr>
<tr><td><code id="split_transects_from_pcl_+3A_debug">DEBUG</code></td>
<td>
<p>check to see order of final output. Default is FALSE.</p>
</td></tr>
<tr><td><code id="split_transects_from_pcl_+3A_data_dir">data_dir</code></td>
<td>
<p>directory where PCL data .csv are stored if value is used.</p>
</td></tr>
<tr><td><code id="split_transects_from_pcl_+3A_output_file_name">output_file_name</code></td>
<td>
<p>old code relic that doesn't do much.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function to add two additional columns
to the pcl dataset, one for the segment
(which should only be from 1-4) and is
designated by a -99999999 value in the
return_distance column
The only required parameters are the data
frame of pcl data, with the length of transect and the marker
spacing.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Function that has the algorithm that splits the raw data into defined, equidistant x-bins.
 pcl_split &lt;- split_transects_from_pcl(pcl_adjusted,
 transect.length = 40, marker.spacing = 10)

</code></pre>

<hr>
<h2 id='write_hit_matrix_to_csv'>Writes hit matrix to csv for further analysis</h2><span id='topic+write_hit_matrix_to_csv'></span>

<h3>Description</h3>

<p><code>write_hit_matrix_to_csv</code> writes hit matrix to .csv for further analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_hit_matrix_to_csv(m, outputname, output_directory)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_hit_matrix_to_csv_+3A_m">m</code></td>
<td>
<p>matrix of VAI with z and x coordinates</p>
</td></tr>
<tr><td><code id="write_hit_matrix_to_csv_+3A_outputname">outputname</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
<tr><td><code id="write_hit_matrix_to_csv_+3A_output_directory">output_directory</code></td>
<td>
<p>directory where output goes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific sub-function that writes the output variables to disk in .csv format
and runs within the functions <code>process_pcl</code>, <code>process_multi_pcl</code>, and
<code>proces_tls</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+process_pcl">process_pcl</a></code>
<code><a href="#topic+write_pcl_to_csv">write_pcl_to_csv</a></code>
<code><a href="#topic+write_summary_matrix_to_csv">write_summary_matrix_to_csv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# This function runs internally.
write_hit_matrix_to_csv(m, outputname, output_directory)

## End(Not run)
</code></pre>

<hr>
<h2 id='write_pcl_to_csv'>Writes csc metrics and output variables to .csv</h2><span id='topic+write_pcl_to_csv'></span>

<h3>Description</h3>

<p><code>write_pcl_to_csv</code> writes csc metrics and varialbes to .csv format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_pcl_to_csv(output.variables, outputname, output_directory)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_pcl_to_csv_+3A_output.variables">output.variables</code></td>
<td>
<p>list of concatenated output variables</p>
</td></tr>
<tr><td><code id="write_pcl_to_csv_+3A_outputname">outputname</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
<tr><td><code id="write_pcl_to_csv_+3A_output_directory">output_directory</code></td>
<td>
<p>directory where output goes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific function that writes the output variables to disk in .csv format
and runs within the functions <code>process_pcl</code>, <code>process_multi_pcl</code>, and
<code>proces_tls</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+process_pcl">process_pcl</a></code>
<code><a href="#topic+write_summary_matrix_to_csv">write_summary_matrix_to_csv</a></code>
<code><a href="#topic+write_hit_matrix_to_csv">write_hit_matrix_to_csv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write_pcl_to_csv(output_variables, outputname, output_directory)

## End(Not run)

</code></pre>

<hr>
<h2 id='write_summary_matrix_to_csv'>Writes csc metrics and output variables to .csv</h2><span id='topic+write_summary_matrix_to_csv'></span>

<h3>Description</h3>

<p><code>write_summary_matrix_to_csv</code> writes summary matrix to .csv format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_summary_matrix_to_csv(m, outputname, output_directory)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_summary_matrix_to_csv_+3A_m">m</code></td>
<td>
<p>summary matrix</p>
</td></tr>
<tr><td><code id="write_summary_matrix_to_csv_+3A_outputname">outputname</code></td>
<td>
<p>name of file currently being processed</p>
</td></tr>
<tr><td><code id="write_summary_matrix_to_csv_+3A_output_directory">output_directory</code></td>
<td>
<p>directory where output goes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a specific subfunction that writes the summary matrix to disk in .csv format
and runs within the functions <code>process_pcl</code>, <code>process_multi_pcl</code>, and
<code>proces_tls</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write_pcl_to_csv">write_pcl_to_csv</a></code>
<code><a href="#topic+write_hit_matrix_to_csv">write_hit_matrix_to_csv</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
write_summary_matrix_to_csv()

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
