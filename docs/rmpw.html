<!DOCTYPE html><html><head><title>Help for package rmpw</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rmpw}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Riverside'><p>NEWWS Riverside data</p></a></li>
<li><a href='#rmpw'><p>Causal Mediation Analysis Using Weighting Approach</p></a></li>
<li><a href='#sensitivity'><p>Sensitivity Analysis for Causal Mediation Analysis Using Weighting Approach</p></a></li>
<li><a href='#sensitivity.plot'><p>Sensitivity Analysis Plot for Causal Mediation Analysis Using Weighting Approach</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-05</td>
</tr>
<tr>
<td>Title:</td>
<td>Causal Mediation Analysis Using Weighting Approach</td>
</tr>
<tr>
<td>Author:</td>
<td>Xu Qin, Guanglei Hong, and Fan Yang</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Xu Qin &lt;xuqin@uchicago.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0), gtools, MASS</td>
</tr>
<tr>
<td>Description:</td>
<td>We implement causal mediation analysis using the methods proposed by Hong (2010) and Hong, Deutsch &amp; Hill (2015) &lt;<a href="https://doi.org/10.3102%2F1076998615583902">doi:10.3102/1076998615583902</a>&gt;. It allows the estimation and hypothesis testing of causal mediation effects through ratio of mediator probability weights (RMPW). This strategy conveniently relaxes the assumption of no treatment-by-mediator interaction while greatly simplifying the outcome model specification without invoking strong distributional assumptions. We also implement a sensitivity analysis by extending the RMPW method to assess potential bias in the presence of omitted pretreatment or posttreatment covariates. The sensitivity analysis strategy was proposed by Hong, Qin, and Yang (2018) &lt;<a href="https://doi.org/10.3102%2F1076998617749561">doi:10.3102/1076998617749561</a>&gt;.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-06 04:33:44 UTC; XUQIN</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-06 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Riverside'>NEWWS Riverside data</h2><span id='topic+Riverside'></span>

<h3>Description</h3>

<p>The National Evaluation of Welfare-to-Work Strategies (NEWWS) Riverside study. 
Immediately preceding the welfare reform
nationwide in the mid-1990s, welfare applicants in Riverside, California, were
assigned at random to either a labor force attachment (LFA) program (Z = 1) or
a control condition (Z = 0) in an experimental study. The LFA program, with the
goal of eventually weaning participants from the welfare system, emphasized
seeking and securing employment, offered job search services, and provided
incentives including a threat of sanctions should one fail to meet the program
requirements, while the control group members were guaranteed cash assistance
without the requirement for employment.
</p>


<h3>Value</h3>

<p>A list containing
</p>
<table>
<tr><td><code>trunc_dep12sm2</code></td>
<td>
<p>Outcome. Maternal depression among participants at the end of two years after treatment.</p>
</td></tr>
<tr><td><code>emp</code></td>
<td>
<p>Mediator. A binary indicator for whether one was employed in any quarter during the 2 years after randomization.</p>
</td></tr>
<tr><td><code>treat</code></td>
<td>
<p>Treatment</p>
</td></tr>
<tr><td><code>emp_prior</code></td>
<td>
<p>Mediator</p>
</td></tr>
<tr><td><code>pqtrunc25</code></td>
<td>
<p>Preference for taking care of family full time rather than working</p>
</td></tr>
<tr><td><code>pqtrunc30</code></td>
<td>
<p>Too many family problems for full-time or part-time job</p>
</td></tr>
<tr><td><code>pqtrunc49</code></td>
<td>
<p>Cannot go school training due to too much to do</p>
</td></tr>
<tr><td><code>pqtrunc50</code></td>
<td>
<p>Sad past week</p>
</td></tr>
<tr><td><code>pqtrunc51</code></td>
<td>
<p>Depressed past week</p>
</td></tr>
<tr><td><code>pqtrunc52</code></td>
<td>
<p>Blues past week</p>
</td></tr>
<tr><td><code>pqtrunc53</code></td>
<td>
<p>Lonely past week</p>
</td></tr>
<tr><td><code>hispanic</code></td>
<td>
<p>Hispanic = 1; otherwise = 0</p>
</td></tr>
<tr><td><code>nevmar</code></td>
<td>
<p>Never married = 1; otherwise = 0</p>
</td></tr>
<tr><td><code>nohsdip</code></td>
<td>
<p>No high school diploma or GED = 1; otherwise = 0</p>
</td></tr>
<tr><td><code>AFDC3660</code></td>
<td>
<p>On AFDC 36 of past 60 months = 1; otherwise = 0</p>
</td></tr>
<tr><td><code>AFDC0_Y1</code></td>
<td>
<p>Ever in a situation of not receiving welfare during the first year after randomization = 1; otherwise = 0</p>
</td></tr>
</table>

<hr>
<h2 id='rmpw'>Causal Mediation Analysis Using Weighting Approach</h2><span id='topic+rmpw'></span>

<h3>Description</h3>

<p>Causal Mediation Analysis Using Weighting Approach
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmpw(data, treatment, mediator, outcome, propensity_x, outcome_x, decomposition)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmpw_+3A_data">data</code></td>
<td>
<p>The data set for analysis.</p>
</td></tr>
<tr><td><code id="rmpw_+3A_treatment">treatment</code></td>
<td>
<p>The name of the treatment variable (string).</p>
</td></tr>
<tr><td><code id="rmpw_+3A_mediator">mediator</code></td>
<td>
<p>The name of the mediator variable (string).</p>
</td></tr>
<tr><td><code id="rmpw_+3A_outcome">outcome</code></td>
<td>
<p>The name of the outcome variable (string).</p>
</td></tr>
<tr><td><code id="rmpw_+3A_propensity_x">propensity_x</code></td>
<td>
<p>A vector of variable names (string) of pretreatment confounders, which will be included in the propensity score model.</p>
</td></tr>
<tr><td><code id="rmpw_+3A_outcome_x">outcome_x</code></td>
<td>
<p>A vector of variable names (string) of pretreatment confounders, which will be included in the outcome model.</p>
</td></tr>
<tr><td><code id="rmpw_+3A_decomposition">decomposition</code></td>
<td>
<p>Type of decomposition. When decomposition = 1, the total treatment effect will be decomposed into pure direct effect (DE.0), total and pure indirect effect (IE.1 and IE.0), and natural treatment-by-mediator interaction effect (IE.1 - IE.0). When decomposition = 2, the total treatment effect will be decomposed into pure indirect effect (IE.0), total and pure direct effect (DE.1 and DE.0), and natural treatment-by-mediator interaction effect (DE.1 - DE.0).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list contains the estimates of the causal effects and the coefficients of the pretreatment covariates.
</p>


<h3>Author(s)</h3>

<p>Xu Qin and Guanglei Hong
</p>


<h3>References</h3>

<p>Hong, G., Deutsch, J., &amp; Hill, H. D. (2015). Ratio-of-mediator-probability weighting for causal mediation analysis in the presence of treatment-by-mediator interaction. Journal of Educational and Behavioral Statistics, 40 (3), 307-340. <a href="https://doi.org/10.3102/1076998615583902">doi:10.3102/1076998615583902</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Riverside)
rmpw(data = Riverside, treatment = "treat", mediator = "emp", outcome = "trunc_dep12sm2",
    propensity_x = c("emp_prior", "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53",
        "pqtrunc30", "hispanic", "pqtrunc49", "nevmar"), outcome_x = c("emp_prior",
        "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53", "pqtrunc30", "hispanic",
        "pqtrunc49", "nevmar"), decomposition = 0)
rmpw(data = Riverside, treatment = "treat", mediator = "emp", outcome = "trunc_dep12sm2",
    propensity_x = c("emp_prior", "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53",
        "pqtrunc30", "hispanic", "pqtrunc49", "nevmar"), outcome_x = c("emp_prior",
        "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53", "pqtrunc30", "hispanic",
        "pqtrunc49", "nevmar"), decomposition = 1)
rmpw(data = Riverside, treatment = "treat", mediator = "emp", outcome = "trunc_dep12sm2",
    propensity_x = c("emp_prior", "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53",
        "pqtrunc30", "hispanic", "pqtrunc49", "nevmar"), outcome_x = c("emp_prior",
        "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53", "pqtrunc30", "hispanic",
        "pqtrunc49", "nevmar"), decomposition = 2)
</code></pre>

<hr>
<h2 id='sensitivity'>Sensitivity Analysis for Causal Mediation Analysis Using Weighting Approach</h2><span id='topic+sensitivity'></span>

<h3>Description</h3>

<p>This function generates a sensitivity analysis table. When only the mediator-outcome relationship is possibly confounded, the function computes the effect size of actual bias associated with each omitted pretreatment or posttreatment covariate or their combinations; it also computes the effect size of potential bias associated with an unmeasured confounder comparable to an observed pretreatment confounder that was already adjusted for. When the treatment assignment is also subjected to hidden selection bias, the function additionally assesses potential confounding of each omitted or unmeasured pretreatment covariate that may confound both the mediator-outcome relationship and the treatment assignment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sensitivity(est.ie, est.de, est.se.ie, est.se.de, outcome, mediator, treatment, 
    X, X.omit.pre = NULL, X.omit.post = NULL, X.unmeasure.pre = NULL, m.scale, 
    t.rand = TRUE, t.confound = FALSE, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sensitivity_+3A_est.ie">est.ie</code></td>
<td>
<p>The effect size of the original natural indirect effect (NIE) estimate obtained from an RMPW analysis.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_est.de">est.de</code></td>
<td>
<p>The effect size of the original natural direct effect (NDE) estimate obtained from an RMPW analysis.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_est.se.ie">est.se.ie</code></td>
<td>
<p>The estimated SE of the effect size of the NIE estimate.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_est.se.de">est.se.de</code></td>
<td>
<p>The estimated SE of the effect size of the NDE estimate.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_outcome">outcome</code></td>
<td>
<p>The name of the outcome variable (string).</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_mediator">mediator</code></td>
<td>
<p>The name of the mediator variable (string).</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_treatment">treatment</code></td>
<td>
<p>The name of the treatment variable (string).</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_x">X</code></td>
<td>
<p>A vector of names of the observed pretreatment covariates already adjusted for in the original analysis (string).</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_x.omit.pre">X.omit.pre</code></td>
<td>
<p>An optional vector of names of the observed pretreatment covariates that are omitted from the original analysis and may confound the mediator-outcome relationship (string). The default is NULL.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_x.omit.post">X.omit.post</code></td>
<td>
<p>An optional vector of names of the observed pretreatment covariates that are omitted from the original analysis and may confound the mediator-outcome relationship and preceding the focal mediator (string). The default is NULL. X, X.omit.pre, and X.omit.post are mutually exclusive.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_x.unmeasure.pre">X.unmeasure.pre</code></td>
<td>
<p>An optional vector of names of the observed pretreatment confounders that are already adjusted for in the original analysis and are comparable to some potential unmeasured confounders (String). X.unmeasure.pre is a subset of X.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_m.scale">m.scale</code></td>
<td>
<p>Scale of the mediator (&quot;discrete&quot; or &quot;continuous&quot;).</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_t.rand">t.rand</code></td>
<td>
<p>A logical value. If TRUE, treatment is randomized. If FALSE, treatment is not randomized. The default is TRUE.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_t.confound">t.confound</code></td>
<td>
<p>A logical value. If TRUE, X.omit.pre may also confound the treatment-mediator or treatment-outcome relationships in addition to confounding the mediator-outcome relationship. The default is FALSE. If X.omit.pre = NULL or z.rand = TRUE, then z.confound = FALSE.</p>
</td></tr>
<tr><td><code id="sensitivity_+3A_data">data</code></td>
<td>
<p>A data frame containing the variables in the model.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A sensitivity analysis table that contains rho, sigma, the effect size of the actual bias, the effect size of the modified estimate, and the effect size of the modified confidence interval, associated with each omitted covariate or each combination of omitted covariates, for both NIE and NDE.
</p>


<h3>Author(s)</h3>

<p>Xu Qin, Guanglei Hong, and Fan Yang
</p>


<h3>References</h3>

<p>Hong, G., Qin, X., &amp; Yang, F. (in press). Weighting-based sensitivity analysis in causal mediation studies. Journal of Educational and Behavioral Statistics. <a href="https://doi.org/10.3102/1076998617749561">doi:10.3102/1076998617749561</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Riverside)
omit.bias = sensitivity(est.ie = -0.111, est.de = 0.158, est.se.ie = 0.059,
    est.se.de = 0.108, outcome = "trunc_dep12sm2", mediator = "emp", treatment = "treat",
    X = c("emp_prior", "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53", "pqtrunc30",
        "hispanic", "pqtrunc49", "nevmar"), X.omit.pre = c("AFDC3660", "pqtrunc25",
        "nohsdip"), X.omit.post = "AFDC0_Y1", m.scale = "discrete", t.rand = TRUE,
    t.confound = FALSE, data = Riverside)
</code></pre>

<hr>
<h2 id='sensitivity.plot'>Sensitivity Analysis Plot for Causal Mediation Analysis Using Weighting Approach</h2><span id='topic+sensitivity.plot'></span>

<h3>Description</h3>

<p>This function generates sensitivity analysis plots, one for natural direct effect (NDE) and one for natural indirect effect (NIE). The solid curves indicate amounts of bias that may lead to a qualitative change in the conclusion of statistical inference. The number at the end of each curve denotes the bias value represented by that curve. The bold dashed curve on each side corresponds to a threshold value of bias that is just great enough to start changing the analytic conclusion. Each star corresponds to an observed covariate or a set of covariates that, if omitted, would contribute a bias great enough to change the analytic conclusion; each triangle corresponds to a covariate (or a set of covariates), the omission of which would be inconsequential. These covariates are listed in the sensitivity analysis table in the output of sensitivity(). This function is not applicable when there are omitted or unmeasured confounders for the treatment assignment. This is because, in such cases, there are as many as four sensitivity parameters, difficult to represent in a single plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sensitivity.plot(est.ie, est.de, est.se.ie, est.se.de, X.omit.bias, effect, type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sensitivity.plot_+3A_est.ie">est.ie</code></td>
<td>
<p>The effect size of the original natural indirect effect (NIE) estimate obtained from an RMPW analysis.</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_est.de">est.de</code></td>
<td>
<p>The effect size of the original natural direct effect (NDE) estimate obtained from an RMPW analysis.</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_est.se.ie">est.se.ie</code></td>
<td>
<p>The estimated SE of the effect size of the NIE estimate.</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_est.se.de">est.se.de</code></td>
<td>
<p>The estimated SE of the effect size of the NDE estimate.</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_x.omit.bias">X.omit.bias</code></td>
<td>
<p>The bias table returned by sensitivity()</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_effect">effect</code></td>
<td>
<p>If effect = &quot;NIE&quot;, returns sensitivity plot for the natural indirect effect; If effect = &quot;NDE&quot;, returns sensitivity plot for the natural direct effect</p>
</td></tr>
<tr><td><code id="sensitivity.plot_+3A_type">type</code></td>
<td>
<p>If type = &quot;unmeasured&quot;, returns sensitivity plot for unmeasured covariates that are comparable to observed pretreatment covariates; if type = &quot;omitted&quot;, returns sensitivity plot for omitted covariates. If in sensitivity(), X.unmeasure.pre = NULL, then here type can only be &quot;omitted&quot;. If in sensitivity(), X.omit.pre = NULL and X.omit.post = NULL, then here type can only be &quot;unmeasured&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A graphical display of the sensitivity analysis results returned by sensitivity().
</p>


<h3>Author(s)</h3>

<p>Xu Qin, Guanglei Hong, and Fan Yang
</p>


<h3>References</h3>

<p>Hong, G., Qin, X., &amp; Yang, F. (in press). Weighting-based sensitivity analysis in causal mediation studies. Journal of Educational and Behavioral Statistics. <a href="https://doi.org/10.3102/1076998617749561">doi:10.3102/1076998617749561</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(Riverside)
omit.bias = sensitivity(est.ie = -0.111, est.de = 0.158, est.se.ie = 0.059,
    est.se.de = 0.108, outcome = "trunc_dep12sm2", mediator = "emp", treatment = "treat",
    X = c("emp_prior", "pqtrunc50", "pqtrunc51", "pqtrunc52", "pqtrunc53", "pqtrunc30",
        "hispanic", "pqtrunc49", "nevmar"), X.omit.pre = c("AFDC3660", "pqtrunc25",
        "nohsdip"), X.omit.post = "AFDC0_Y1", m.scale = "discrete", t.rand = TRUE,
    t.confound = FALSE, data = Riverside)
sensitivity.plot(est.ie = -0.111, est.de = 0.158, est.se.ie = 0.059, est.se.de = 0.108,
    X.omit.bias = omit.bias, effect = "NIE", type = "omitted")
sensitivity.plot(est.ie = -0.111, est.de = 0.158, est.se.ie = 0.059, est.se.de = 0.108,
    X.omit.bias = omit.bias, effect = "NDE", type = "omitted")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
