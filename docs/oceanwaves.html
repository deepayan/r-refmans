<!DOCTYPE html><html><head><title>Help for package oceanwaves</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {oceanwaves}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#almostZero'><p>Test whether vector elements are effectively zero</p></a></li>
<li><a href='#detrendHeight'><p>Remove trend from a time series</p></a></li>
<li><a href='#plotWaveSpectrum'><p>Plot a basic spectrum</p></a></li>
<li><a href='#prCorr'><p>Correct for depth attenuation of a water surface elevation</p>
pressure signal.</a></li>
<li><a href='#wavedata'><p>Example wave records</p></a></li>
<li><a href='#waveNumL'><p>A function to calculate wave number.</p></a></li>
<li><a href='#waveStatsSP'><p>Calculate ocean wave parameters using spectral analysis methods</p></a></li>
<li><a href='#waveStatsZC'><p>Calculate wave statistics using zero-crossing method</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Ocean Wave Statistics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-05-30</td>
</tr>
<tr>
<td>Description:</td>
<td>Calculate ocean wave height summary statistics and process data 
    from bottom-mounted pressure sensor data loggers. Derived primarily from 
    MATLAB functions provided by U. Neumeier at 
    <a href="http://neumeier.perso.ch/matlab/waves.html">http://neumeier.perso.ch/matlab/waves.html</a>. Wave number 
    calculation based on the algorithm in Hunt, J. N. (1979, ISSN:0148-9895) 
    "Direct Solution of Wave Dispersion Equation", American Society of Civil 
    Engineers Journal of the Waterway, Port, Coastal, and Ocean Division, 
    Vol 105, pp 457-459.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/millerlp/oceanwaves">https://github.com/millerlp/oceanwaves</a>,
<a href="https://millerlp.github.io/oceanwaves/">https://millerlp.github.io/oceanwaves/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/millerlp/oceanwaves/issues">https://github.com/millerlp/oceanwaves/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0), ggplot2</td>
</tr>
<tr>
<td>Imports:</td>
<td>bspec, signal</td>
</tr>
<tr>
<td>Suggests:</td>
<td>scales, oce, knitr, rmarkdown, testthat (&ge; 2.1.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-06-02 03:42:09 UTC; Luke</td>
</tr>
<tr>
<td>Author:</td>
<td>Luke Miller <a href="https://orcid.org/0000-0002-2009-6981"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Urs Neumeier [aut],
  Travis Mason [ctb],
  Magali Lecouturier [ctb],
  George Voulgaris [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Luke Miller &lt;contact@lukemiller.org&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-06-02 04:40:14 UTC</td>
</tr>
</table>
<hr>
<h2 id='almostZero'>Test whether vector elements are effectively zero</h2><span id='topic+almostZero'></span>

<h3>Description</h3>

<p>Test whether elements in vector x are effectively zero,
within the square root of machine tolerance for a floating point number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>almostZero(x, y = 0, tolerance = sqrt(.Machine$double.eps))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="almostZero_+3A_x">x</code></td>
<td>
<p>Numeric vector of values to compared against 0</p>
</td></tr>
<tr><td><code id="almostZero_+3A_y">y</code></td>
<td>
<p>Value to be compared against. Default is 0.</p>
</td></tr>
<tr><td><code id="almostZero_+3A_tolerance">tolerance</code></td>
<td>
<p>The maximum difference between x and y necessary to call a 
value non-zero</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Returns TRUE for all vector elements that are within rounding error of zero.
</p>


<h3>Value</h3>

<p>TRUE or FALSE for each element of the vector x.
</p>

<hr>
<h2 id='detrendHeight'>Remove trend from a time series</h2><span id='topic+detrendHeight'></span>

<h3>Description</h3>

<p>Fits a straight line to a vector of values using lm(), and uses the
regression coefficients to subtract off the linear trend from the values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detrendHeight(pt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detrendHeight_+3A_pt">pt</code></td>
<td>
<p>A vector of numeric values to be detrended</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Typically this is used to remove a tidal trend from a ocean 
surface height time series before attempting to calculate statistics for 
waves, which are variations above and below the mean surface height. 
Returns a series of residuals around the linear trend, in the original units
of measurement (typically meters).
</p>


<h3>Value</h3>

<p>A list containing the following:
</p>
<p><code>pt</code> A vector of detrended values 
</p>
<p><code>seg_len</code> The segment length used 
</p>
<p><code>h</code> The mean height of the water column
</p>
<p><code>trend</code> A two element vector of the intercept and slope
from the linear regression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wavedata)
detrended &lt;- detrendHeight(wavedata$swDepth.m)
pt &lt;- detrended[['pt']]
plot(pt, type = 'l')
abline(h = 0)
</code></pre>

<hr>
<h2 id='plotWaveSpectrum'>Plot a basic spectrum</h2><span id='topic+plotWaveSpectrum'></span>

<h3>Description</h3>

<p>Plot a basic spectrum
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotWaveSpectrum(freqspec, Fs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotWaveSpectrum_+3A_freqspec">freqspec</code></td>
<td>
<p>A data frame containing a column of frequencies 'freq' and a
column of spectral power values 'spec'</p>
</td></tr>
<tr><td><code id="plotWaveSpectrum_+3A_fs">Fs</code></td>
<td>
<p>Frequency of sampled surface heights, units of Hz</p>
</td></tr>
</table>

<hr>
<h2 id='prCorr'>Correct for depth attenuation of a water surface elevation 
pressure signal.</h2><span id='topic+prCorr'></span>

<h3>Description</h3>

<p>Bottom-mounted pressure transducers suffer from pressure signal 
attenuation when attempting to estimate surface wave heights. This 
function corrects water surface elevation time series based on the
depth of the water column and height of the sensor above the bottom.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prCorr(pt, Fs, zpt, M = 512, CorrLim = c(0.05, 0.33), plot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prCorr_+3A_pt">pt</code></td>
<td>
<p>A vector of sea surface elevations (units of meters).</p>
</td></tr>
<tr><td><code id="prCorr_+3A_fs">Fs</code></td>
<td>
<p>Sampling frequency (units of Hz). Normally 4 Hz for an OWHL logger.</p>
</td></tr>
<tr><td><code id="prCorr_+3A_zpt">zpt</code></td>
<td>
<p>Height of the pressure sensor above the seabed (units of meters).</p>
</td></tr>
<tr><td><code id="prCorr_+3A_m">M</code></td>
<td>
<p>Length of time series segments that will be used in the detrending
and attenuation correction operations. 512 samples is the default, should be
an even number.</p>
</td></tr>
<tr><td><code id="prCorr_+3A_corrlim">CorrLim</code></td>
<td>
<p>[min max] frequency for attenuation correction (Hz, optional, 
default [0.05 0.33], which translate to periods of 20 sec to 3 sec).</p>
</td></tr>
<tr><td><code id="prCorr_+3A_plot">plot</code></td>
<td>
<p>Logical value TRUE or FALSE. Displays a plot of the original and 
corrected time series.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of the depth-corrected surface elevations (units of meters 
usually). Any original trend in the input data (such as tide change) is 
present in the output data. The returned surface elevation fluctuations will 
typically be more extreme than the raw input surface elevations.
</p>


<h3>References</h3>

<p>Based on original MATLAB function by developed by Travis Mason, 
M. Lecouturier &amp; Urs Neumeier http://neumeier.perso.ch/matlab/waves.html 
</p>
<p>Each segment of pt will be linearly detrended, corrected for attenuation,
and the linear trend will be added back to the returned data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wavedata)
corrected = prCorr(wavedata$swPressure.mbar, Fs = 4, zpt = 0.1)
# Plot the results
corrected = prCorr(wavedata$swPressure.mbar, Fs = 4, zpt = 0.1, plot=TRUE)
</code></pre>

<hr>
<h2 id='wavedata'>Example wave records</h2><span id='topic+wavedata'></span>

<h3>Description</h3>

<p>A dataset containing pressure records and derived sea surface height  
from a bottom-mounted pressure transducer data logger deployed at 
Marguerite Reef near Los Angeles, CA, USA. The device was deployed at 
a depth of approximately 10 meters, and sea level air pressure was 
1014 mbar at the time of deployment. The pressure data logger was 
mounted approximately 10 cm above the benthos. Sampling rate was 4 Hz, 
so the total record represents 30 minutes of time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wavedata
</code></pre>


<h3>Format</h3>

<p>A data frame with 7200 rows and 4 variables:
</p>

<dl>
<dt>DateTime</dt><dd><p>Date and time, with fractional seconds. UTC time zone.</p>
</dd>
<dt>absPressure.mbar</dt><dd><p>Absolute pressure recorded by the data logger, in 
units of millibar (1 mbar = 100 Pascal). This value includes pressure
due to the atmosphere above the sea surface, which was 1014 mbar during the
deployment.</p>
</dd>
<dt>swPressure.mbar</dt><dd><p>Pressure produced by the column of seawater 
above the data logger. 
The pressure due to the atmosphere above the sea surface has been subtracted
off of the absolute pressure value absPressure.mbar to produce this value. 
Units of mbar.</p>
</dd>
<dt>swDepth.m</dt><dd><p>Estimated depth in meters of the seawater column above the
pressure data logger, converted from the swPressure.mbar value.</p>
</dd>
</dl>



<h3>Source</h3>

<p>2016 Provided by Kristin Elsmore, UC Davis Bodega Marine Laboratory
</p>

<hr>
<h2 id='waveNumL'>A function to calculate wave number.</h2><span id='topic+waveNumL'></span>

<h3>Description</h3>

<p>A function to calculate wave number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waveNumL(f, h)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waveNumL_+3A_f">f</code></td>
<td>
<p>A numeric vector of wave frequencies</p>
</td></tr>
<tr><td><code id="waveNumL_+3A_h">h</code></td>
<td>
<p>A numeric vector of water depths (usually in units of meters)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The wave number.
</p>


<h3>References</h3>

<p>Modified from MATLAB function by Urs Neumeier:  
http://neumeier.perso.ch/matlab/waves.html
Based on polynomial approximation from Hunt, J. N. 1979. “Direct Solution of 
Wave Dispersion Equation,” ASCE Journal of the Waterway, Port, Coastal and Ocean Division.,
Vol 105, pp 457-459 suggested by George Voulgaris, University of South Carolina
</p>

<hr>
<h2 id='waveStatsSP'>Calculate ocean wave parameters using spectral analysis methods</h2><span id='topic+waveStatsSP'></span>

<h3>Description</h3>

<p>Calculate ocean wave parameters using spectral analysis methods
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waveStatsSP(
  data,
  Fs,
  method = c("welchPSD", "spec.pgram"),
  plot = FALSE,
  kernel = NULL,
  segments = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waveStatsSP_+3A_data">data</code></td>
<td>
<p>A vector of surface heights that constitute a time series of 
observations. Typical units = meters.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_fs">Fs</code></td>
<td>
<p>Sampling frequency of the surface heights data. Units = Hz, i.e.
samples per second.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_method">method</code></td>
<td>
<p>A character string indicating which spectral analysis method
should be used. Choose one of <code>welchPSD</code> (default) or <code>spec.pgram</code>.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_plot">plot</code></td>
<td>
<p>A logical value denoting whether to plot the spectrum. Defaults 
to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_kernel">kernel</code></td>
<td>
<p>An object of class <code>tskernel</code> that defines a smoother for use
with <code>spec.pgram</code> method. If value is <code>NULL</code>, a default Daniell kernel with 
widths (9,9,9) is used.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_segments">segments</code></td>
<td>
<p>Numeric value indicating the number of windowing segments to
use with <code>welchPSD</code> method.</p>
</td></tr>
<tr><td><code id="waveStatsSP_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to spectral analysis functions, 
such as the <code>windowfun</code> option for <code>welchPSD</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Carries out spectral analysis of ocean wave height time series to estimate
common wave height statistics, including peak period, average period, 
and significant wave height.
</p>


<h3>Value</h3>

<p>List of wave parameters based on spectral methods.
</p>

<ul>
<li> <p><code>h</code> Average water depth. Same units as input surface heights 
(typically meters).
</p>
</li>
<li> <p><code>Hm0</code> Significant wave height based on spectral moment 0. Same
units as input surface heights (typically meters).
This is approximately equal to the average of the highest 1/3 of the waves.
</p>
</li>
<li> <p><code>Tp</code> Peak period, calculated as the frequency with maximum power 
in the power spectrum. Units of seconds.
</p>
</li>
<li> <p><code>m0</code> Estimated variance of time series (moment 0).
</p>
</li>
<li> <p><code>T_0_1</code> Average period calculated as <code class="reqn">m0/m1</code>, units seconds. Follows National 
Data Buoy Center's method for average period (APD).
</p>
</li>
<li> <p><code>T_0_2</code> Average period calculated as <code class="reqn">(m0/m2)^{0.5}</code>, units seconds. Follows 
Scripps Institution of Oceanography's method for calculating average period 
(APD) for their buoys.
</p>
</li>
<li> <p><code>EPS2</code> Spectral width parameter.
</p>
</li>
<li> <p><code>EPS4</code> Spectral width parameter.
</p>
</li></ul>



<h3>References</h3>

<p>Original MATLAB function by Urs Neumeier:  
http://neumeier.perso.ch/matlab/waves.html, based on code developed by Travis 
Mason, Magali Lecouturier and Urs Neumeier.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+waveStatsZC">waveStatsZC</a></code> for wave statistics determined using a 
zero-crossing algorithm.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wavedata)
waveStatsSP(wavedata$swDepth.m, Fs = 4, method = 'spec.pgram', plot = TRUE)
</code></pre>

<hr>
<h2 id='waveStatsZC'>Calculate wave statistics using zero-crossing method</h2><span id='topic+waveStatsZC'></span>

<h3>Description</h3>

<p>Calculate ocean wave summary statistics, including significant
wave height and period.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waveStatsZC(data, Fs, threshold = NULL, plot = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waveStatsZC_+3A_data">data</code></td>
<td>
<p>A numeric vector of water surface height data. The data do not
need to be detrended prior to use. Typical units = meters</p>
</td></tr>
<tr><td><code id="waveStatsZC_+3A_fs">Fs</code></td>
<td>
<p>Sampling frequency of the data, in Hz.</p>
</td></tr>
<tr><td><code id="waveStatsZC_+3A_threshold">threshold</code></td>
<td>
<p>The minimum height necessary for a zero-crossing event to 
be considered a wave.</p>
</td></tr>
<tr><td><code id="waveStatsZC_+3A_plot">plot</code></td>
<td>
<p>Set to TRUE if summary histograms of wave heights and wave
periods are desired.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Based on an upward zero-crossing algorithm originally
provided by Urs Neumeier, v1.06. However, by default the algorithm
is run as a downward zero-crossing process by inverting the data.
</p>


<h3>Value</h3>

<p>A list object containing summary statistic values.
</p>

<ul>
<li> <p><code>Hsig</code> Mean of the highest 1/3 of waves in the data set. Units = 
same as input surface heights.
</p>
</li>
<li> <p><code>Hmean</code>  Overall mean wave height, for all waves (bigger than 
threshold). 
</p>
</li>
<li> <p><code>H10</code> Mean height of the upper 10% of all waves. 
</p>
</li>
<li> <p><code>Hmax</code> Maximum wave height in the input data.
</p>
</li>
<li> <p><code>Tmean</code> Mean period of all waves (bigger than threshold). 
Units = seconds.
</p>
</li>
<li> <p><code>Tsig</code> Mean period of <code>Hsig</code> (highest 1/3 of waves).
</p>
</li></ul>



<h3>References</h3>

<p>Original MATLAB function by Urs Neumeier:  
http://neumeier.perso.ch/matlab/waves.html
</p>


<h3>See Also</h3>

<p><code><a href="#topic+waveStatsSP">waveStatsSP</a></code> for wave statistics determined using 
spectral analysis methods.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wavedata)
waveStatsZC(data = wavedata$swDepth.m, Fs = 4, plot = TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
