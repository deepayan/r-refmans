<!DOCTYPE html><html lang="en"><head><title>Help for package rerandPower</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rerandPower}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#power.rand'><p>Compute Power under Complete Randomization</p></a></li>
<li><a href='#power.rerand'><p>Compute Power under Rerandomization</p></a></li>
<li><a href='#sample_std_rerand'><p>Draw from Rerandomization Distribution</p></a></li>
<li><a href='#sampleSize.rand'><p>Compute Sample Size under Complete Randomization</p></a></li>
<li><a href='#sampleSize.rerand'><p>Compute Sample Size under Rerandomization</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Power and Sample Size Calculations for Completely Randomized and
Rerandomized Experiments</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes the power resulting from completely randomized and rerandomized experiments with two groups. Furthermore, computes the sample size necessary to obtain a desired level of power for completely randomized and rerandomized experiments.</td>
</tr>
<tr>
<td>Imports:</td>
<td>Runuran</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-01 22:05:05 UTC; zjbranson</td>
</tr>
<tr>
<td>Author:</td>
<td>Zach Branson [aut, cre],
  Xinran Li [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Zach Branson &lt;zach@stat.cmu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-04 10:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='power.rand'>Compute Power under Complete Randomization</h2><span id='topic+power.rand'></span>

<h3>Description</h3>

<p><code>power.rand</code> computes the power of the mean-difference estimator for a completely randomized experiment with two treatment groups. The power depends on the sample size in each group, the potential outcome variation in each group, the variation of individual treatment effects (i.e., treatment effect heterogeneity), and the magnitude of the average treatment effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>power.rand(N1, N0,
  s1, s0, s.tau = 0,
  tau, alpha = 0.05,
  exact = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="power.rand_+3A_n1">N1</code></td>
<td>
<p>The number of subjects in the treatment group.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_n0">N0</code></td>
<td>
<p>The number of subjects in the control group.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_s1">s1</code></td>
<td>
<p>Standard deviation of the potential outcomes in the treatment group.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_s0">s0</code></td>
<td>
<p>Standard deviation of the potential outcomes in the control group.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_s.tau">s.tau</code></td>
<td>
<p>Standard deviation of individual treatment effects. The default is 0, denoting an additive treatment effect.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_tau">tau</code></td>
<td>
<p>Magnitude of the average treatment effect.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_alpha">alpha</code></td>
<td>
<p>Level at which we reject the null. The default is 0.05.</p>
</td></tr>
<tr><td><code id="power.rand_+3A_exact">exact</code></td>
<td>
<p>Whether power is computed exactly or approximately. As shown in Theorem 1 of Branson, Li, and Ding (2022), power is the sum of the right-tail of a Normal distribution (which is usually large) and the left-tail (which is usually small). When exact = FALSE, power equals just the right-tail, which corresponds to the right-hand bound in Theorem 1 of Branson, Li, and Ding (2022). When exact = TRUE, power equals the sum, which corresponds to the left-hand side of Theorem 1. The default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The power of the mean-difference estimator for a completely randomized experiment with two treatment groups. In other words, the probability that we reject the null hypothesis of no treatment effect (when there truly is a treatment effect), given particular settings for a randomized experiment.
</p>


<h3>Author(s)</h3>

<p>Zach Branson
</p>


<h3>References</h3>

<p>Branson, Z., Li, X., and Ding, P. (2022). Power and Sample Size Calculations for Rerandomized Experiments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Power when 100 subjects are in each group,
#the standard deviation is 4 in each group,
#and the average treatment effect is 2.
power.rand(N1 = 100, N0 = 100,
s1 = 4, s0 = 4, tau = 2)
#same as before, but when
#the average treatment effect is 0.8.
power.rand(N1 = 100, N0 = 100,
s1 = 4, s0 = 4, tau = 0.8)
  
#The same examples as above,
#but now with treatment effect heterogeneity.
#We set the standard deviation of treatment effects
#to be that of potential outcomes.
#Note that, compared to the previous examples,
#power increases for large treatment effects but
#decreases for small treatment effects.
#This phenomenon is discussed in Branson, Li, and Ding (2022).

power.rand(N1 = 100, N0 = 100,
s1 = 4, s0 = 4, s.tau = 4, tau = 2)
#same as before, but when
#the average treatment effect is 0.8.
power.rand(N1 = 100, N0 = 100,
s1 = 4, s0 = 4, s.tau = 4, tau = 0.8)
</code></pre>

<hr>
<h2 id='power.rerand'>Compute Power under Rerandomization</h2><span id='topic+power.rerand'></span>

<h3>Description</h3>

<p><code>power.rerand</code> computes the power of the mean-difference estimator for a rerandomized experiment with two treatment groups, where the Mahalanobis distance is constrained to be below a prespecified threshold. The power depends on the sample size in each group, the potential outcome variation in each group, the variation of individual treatment effects (i.e., treatment effect heterogeneity), the magnitude of the average treatment effect, the number of covariates, the linear association between covariates and potential outcomes, and the acceptance probability used for rerandomization. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>power.rerand(N1, N0,
  s1, s0, s.tau = 0,
  tau, alpha = 0.05,
  K, pa, R2,
  exact = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="power.rerand_+3A_n1">N1</code></td>
<td>
<p>The number of subjects in the treatment group.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_n0">N0</code></td>
<td>
<p>The number of subjects in the control group.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_s1">s1</code></td>
<td>
<p>Standard deviation of the potential outcomes in the treatment group.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_s0">s0</code></td>
<td>
<p>Standard deviation of the potential outcomes in the control group.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_s.tau">s.tau</code></td>
<td>
<p>Standard deviation of individual treatment effects. The default is 0, denoting an additive treatment effect.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_tau">tau</code></td>
<td>
<p>Magnitude of the average treatment effect.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_alpha">alpha</code></td>
<td>
<p>Level at which we reject the null. The default is 0.05.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_k">K</code></td>
<td>
<p>The number of covariates.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_pa">pa</code></td>
<td>
<p>The acceptance probability used for rerandomization.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_r2">R2</code></td>
<td>
<p>The R-squared between covariates and potential outcomes.</p>
</td></tr>
<tr><td><code id="power.rerand_+3A_exact">exact</code></td>
<td>
<p>Whether power is computed exactly or approximately. As shown in Theorem 3 of Branson, Li, and Ding (2022), power is the sum of the right-tail of a non-Normal distribution (which is usually large) and the left-tail (which is usually small). When exact = FALSE, power equals just the right-tail, which corresponds to the right-hand bound in Theorem 3 of Branson, Li, and Ding (2022). When exact = TRUE, power equals the sum, which corresponds to the left-hand side of Theorem 3. The default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The power of the mean-difference estimator for a rerandomized experiment with two treatment groups, where the Mahalanobis distance is constrained to be below a prespecified threshold. In other words, the probability that we reject the null hypothesis of no treatment effect (when there truly is a treatment effect), given particular settings for a rerandomized experiment.
</p>


<h3>Author(s)</h3>

<p>Zach Branson
</p>


<h3>References</h3>

<p>Branson, Z., Li, X., and Ding, P. (2022). Power and Sample Size Calculations for Rerandomized Experiments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Power when 50 subjects are in each group,
#the standard deviation is 4 in each group,
#the average treatment effect is 2,
#there are 10 covariates,
#covariates are moderately related with outcomes,
#and the acceptance probability is 0.01.
power.rerand(N1 = 50, N0 = 50,
s1 = 4, s0 = 4, tau = 2,
K = 10, pa = 0.01, R2 = 0.3)
#same as before, but when
#the average treatment effect is 0.8.
power.rerand(N1 = 50, N0 = 50,
s1 = 4, s0 = 4, tau = 0.8,
K = 10, pa = 0.01, R2 = 0.3)
  
#The same examples as above,
#but now with treatment effect heterogeneity.
#We set the standard deviation of treatment effects
#to be that of potential outcomes.
#Note that, compared to the previous examples,
#power increases for large treatment effects but
#decreases for small treatment effects.
#This phenomenon is discussed in Branson, Li, and Ding (2022).

power.rerand(N1 = 50, N0 = 50,
s1 = 4, s0 = 4, s.tau = 4, tau = 2,
K = 10, pa = 0.01, R2 = 0.3)
#same as before, but when
#the average treatment effect is 0.8.
power.rerand(N1 = 50, N0 = 50,
s1 = 4, s0 = 4, s.tau = 4, tau = 0.8,
K = 10, pa = 0.01, R2 = 0.3)
</code></pre>

<hr>
<h2 id='sample_std_rerand'>Draw from Rerandomization Distribution</h2><span id='topic+sample_std_rerand'></span>

<h3>Description</h3>

<p><code>sample_std_rerand</code> is an internal function that draws from the non-Normal distribution under rerandomization; this is a mixture of a Normal and a truncated Normal.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_std_rerand(n, K, pa, R2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sample_std_rerand_+3A_n">n</code></td>
<td>
<p>The number of draws.</p>
</td></tr>
<tr><td><code id="sample_std_rerand_+3A_k">K</code></td>
<td>
<p>The number of covariates.</p>
</td></tr>
<tr><td><code id="sample_std_rerand_+3A_pa">pa</code></td>
<td>
<p>The acceptance probability used for rerandomization.</p>
</td></tr>
<tr><td><code id="sample_std_rerand_+3A_r2">R2</code></td>
<td>
<p>The R-squared between covariates and potential outcomes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Random draws from the non-Normal distribution under rerandomization.
</p>


<h3>Author(s)</h3>

<p>Xinran Li</p>


<h3>References</h3>

<p>Branson, Z., Li, X., and Ding, P. (2022). Power and Sample Size Calculations for Rerandomized Experiments.
</p>

<hr>
<h2 id='sampleSize.rand'>Compute Sample Size under Complete Randomization</h2><span id='topic+sampleSize.rand'></span>

<h3>Description</h3>

<p><code>sampleSize.rand</code> computes the sample size needed to obtain a desired level of power when we use the mean-difference estimator for a completely randomized experiment with two groups. The sample size depends on the proportion of subjects assigned to each group, the potential outcome variation in each group, the variation of individual treatment effects (i.e., treatment effect heterogeneity), and the magnitude of the average treatment effect.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleSize.rand(power = 0.8,
  p1 = 0.5, p0 = 0.5,
  s1, s0, s.tau = 0,
  tau, alpha = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sampleSize.rand_+3A_power">power</code></td>
<td>
<p>The desired level of power, ranging between 0 and 1. The default is 0.8.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_p1">p1</code></td>
<td>
<p>The proportion of subjects in the treatment group. The default is 0.5.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_p0">p0</code></td>
<td>
<p>The proportion of subjects in the control group. The default is 0.5.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_s1">s1</code></td>
<td>
<p>Standard deviation of the potential outcomes in the treatment group.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_s0">s0</code></td>
<td>
<p>Standard deviation of the potential outcomes in the control group.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_s.tau">s.tau</code></td>
<td>
<p>Standard deviation of individual treatment effects. The default is 0, denoting an additive treatment effect.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_tau">tau</code></td>
<td>
<p>Magnitude of the average treatment effect.</p>
</td></tr>
<tr><td><code id="sampleSize.rand_+3A_alpha">alpha</code></td>
<td>
<p>Level at which we reject the null. The default is 0.05.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The sample size needed to obtain a desired level of power when we use the mean-difference estimator for a completely randomized experiment with two groups. In other words, given a particular <code>power</code>, this yields the sample size such that the probability we reject the null hypothesis of no treatment effect (when there truly is a treatment effect) is equal to <code>power</code>.
</p>


<h3>Author(s)</h3>

<p>Zach Branson
</p>


<h3>References</h3>

<p>Branson, Z., Li, X., and Ding, P. (2022). Power and Sample Size Calculations for Rerandomized Experiments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#The sample size needed for 0.8 power when
#the standard deviation is 4 in each group,
#and the average treatment effect is 2.
sampleSize.rand(s1 = 4, s0 = 4, tau = 2)
#same as before, but when
#the average treatment effect is 0.8.
sampleSize.rand(s1 = 4, s0 = 4, tau = 0.8)
  
#The same examples as above,
#but now with treatment effect heterogeneity.
#We set the standard deviation of treatment effects
#to be that of potential outcomes.
#Note that, compared to the previous examples,
#sample size always decreases.
#This will always happen when power &gt; 0.5;
#this is discussed in Branson, Li, and Ding (2022).
sampleSize.rand(s1 = 4, s0 = 4, s.tau = 4, tau = 2)
#same as before, but when
#the average treatment effect is 0.8.
sampleSize.rand(s1 = 4, s0 = 4, s.tau = 4, tau = 0.8)
</code></pre>

<hr>
<h2 id='sampleSize.rerand'>Compute Sample Size under Rerandomization</h2><span id='topic+sampleSize.rerand'></span>

<h3>Description</h3>

<p><code>sampleSize.rerand</code> computes the sample size needed to obtain a desired level of power when we use the mean-difference estimator for a rerandomized experiment with two groups, where the Mahalanobis distance is constrained to be below a prespecified threshold. The sample size depends on the proportion of subjects assigned to each group, the potential outcome variation in each group, the variation of individual treatment effects (i.e., treatment effect heterogeneity), the magnitude of the average treatment effect, the number of covariates, the linear association between covariates and potential outcomes, and the acceptance probability used for rerandomization. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sampleSize.rerand(power = 0.8,
  p1 = 0.5, p0 = 0.5,
  s1, s0, s.tau = 0,
  tau, alpha = 0.05,
  K, pa, R2)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sampleSize.rerand_+3A_power">power</code></td>
<td>
<p>The desired level of power, ranging between 0 and 1. The default is 0.8.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_p1">p1</code></td>
<td>
<p>The proportion of subjects in the treatment group. The default is 0.5.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_p0">p0</code></td>
<td>
<p>The proportion of subjects in the control group. The default is 0.5.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_s1">s1</code></td>
<td>
<p>Standard deviation of the potential outcomes in the treatment group.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_s0">s0</code></td>
<td>
<p>Standard deviation of the potential outcomes in the control group.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_s.tau">s.tau</code></td>
<td>
<p>Standard deviation of individual treatment effects. The default is 0, denoting an additive treatment effect.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_tau">tau</code></td>
<td>
<p>Magnitude of the average treatment effect.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_alpha">alpha</code></td>
<td>
<p>Level at which we reject the null. The default is 0.05.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_k">K</code></td>
<td>
<p>The number of covariates.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_pa">pa</code></td>
<td>
<p>The acceptance probability used for rerandomization.</p>
</td></tr>
<tr><td><code id="sampleSize.rerand_+3A_r2">R2</code></td>
<td>
<p>The R-squared between covariates and potential outcomes.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The sample size needed to obtain a desired level of power when we use the mean-difference estimator for a rerandomized experiment with two groups, where the Mahalanobis distance is constrained to be below a prespecified threshold. In other words, given a particular <code>power</code>, this yields the sample size such that the probability we reject the null hypothesis of no treatment effect (when there truly is a treatment effect) is equal to <code>power</code>.
</p>


<h3>Author(s)</h3>

<p>Zach Branson
</p>


<h3>References</h3>

<p>Branson, Z., Li, X., and Ding, P. (2022). Power and Sample Size Calculations for Rerandomized Experiments.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#The sample size needed for 0.8 power when
#the standard deviation is 4 in each group,
#the average treatment effect is 2,
#there are 50 covariates, and R2 = 0.3.
sampleSize.rerand(s1 = 4, s0 = 4, tau = 2,
  K = 50, R2 = 0.3, pa = 0.01)
#same as before, but when
#the average treatment effect is 0.8.
sampleSize.rerand(s1 = 4, s0 = 4, tau = 0.8,
  K = 50, R2 = 0.3, pa = 0.01)
  
#The same examples as above,
#but now with treatment effect heterogeneity.
#We set the standard deviation of treatment effects
#to be that of potential outcomes.
#Note that, compared to the previous examples,
#sample size always decreases.
#This will always happen when power &gt; 0.5;
#this is discussed in Branson, Li, and Ding (2022).
sampleSize.rerand(s1 = 4, s0 = 4, s.tau = 4, tau = 2,
  K = 50, R2 = 0.3, pa = 0.01)
#same as before, but when
#the average treatment effect is 0.8.
sampleSize.rerand(s1 = 4, s0 = 4, s.tau = 4, tau = 0.8,
  K = 50, R2 = 0.3, pa = 0.01)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
