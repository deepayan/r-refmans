<!DOCTYPE html><html><head><title>Help for package rdlocrand</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rdlocrand}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rdlocrand-package'><p>rdlocrand: Local Randomization Methods for RD Designs</p></a></li>
<li><a href='#rdrandinf'><p>Randomization Inference for RD Designs under Local Randomization</p></a></li>
<li><a href='#rdrbounds'><p>Rosenbaum bounds for RD designs under local randomization</p></a></li>
<li><a href='#rdsensitivity'><p>Sensitivity analysis for RD designs under local randomization</p></a></li>
<li><a href='#rdwinselect'><p>Window selection for RD designs under local randomization</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Local Randomization Methods for RD Designs</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Matias D. Cattaneo, Rocio Titiunik, Gonzalo Vazquez-Bare</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Gonzalo Vazquez-Bare &lt;gvazquez@econ.ucsb.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>The regression discontinuity (RD) design is a popular quasi-experimental design for causal inference and policy evaluation. Under the local randomization approach, RD designs can be interpreted as randomized experiments inside a window around the cutoff. This package provides tools to perform randomization inference for RD designs under local randomization: rdrandinf() to perform hypothesis testing using randomization inference, rdwinselect() to select a window around the cutoff in which randomization is likely to hold, rdsensitivity() to assess the sensitivity of the results to different window lengths and null hypotheses and rdrbounds() to construct Rosenbaum bounds for sensitivity to unobserved confounders. See Cattaneo, Titiunik and Vazquez-Bare (2016) <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf</a> for further methodological details.</td>
</tr>
<tr>
<td>Imports:</td>
<td>AER, sandwich</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-21 21:19:25 UTC; Gonzalo</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-21 23:00:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='rdlocrand-package'>rdlocrand: Local Randomization Methods for RD Designs</h2><span id='topic+rdlocrand-package'></span><span id='topic+_PACKAGE'></span><span id='topic+rdlocrand_package'></span>

<h3>Description</h3>

<p>The regression discontinuity (RD) design is a popular quasi-experimental design
for causal inference and policy evaluation. Under the local randomization approach,
RD designs can be interpreted as randomized experiments inside a window around the
cutoff. The <code>rdlocrand</code> package provides tools to analyze RD designs under local
randomization: <code><a href="#topic+rdrandinf">rdrandinf</a></code> to perform hypothesis
testing using randomization inference, <code><a href="#topic+rdwinselect">rdwinselect</a></code> to select a window
around the cutoff in which randomization is likely to hold, <code><a href="#topic+rdsensitivity">rdsensitivity</a></code>
to assess the sensitivity of the results to different window lengths and null hypotheses
and <code><a href="#topic+rdrbounds">rdrbounds</a></code> to construct Rosenbaum bounds for sensitivity to
unobserved confounders. For more details, and related <code>Stata</code> and <code>R</code> packages
useful for analysis of RD designs, visit <a href="https://rdpackages.github.io/">https://rdpackages.github.io/</a>.
</p>


<h3>Author(s)</h3>

<p>Matias Cattaneo, Princeton University. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>
</p>
<p>Rocio Titiunik, Princeton University. <a href="mailto:titiunik@princeton.edu">titiunik@princeton.edu</a>
</p>
<p>Gonzalo Vazquez-Bare, UC Santa Barbara. <a href="mailto:gvazquez@econ.ucsb.edu">gvazquez@econ.ucsb.edu</a>
</p>


<h3>References</h3>

<p>Cattaneo, M.D., B. Frandsen and R. Titiunik. (2015).  <a href="https://rdpackages.github.io/references/Cattaneo-Frandsen-Titiunik_2015_JCI.pdf">Randomization Inference in the Regression Discontinuity Design: An Application to Party Advantages in the U.S. Senate</a>. <em>Journal of Causal Inference</em> 3(1): 1-24.
</p>
<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2016). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">Inference in Regression Discontinuity Designs under Local Randomization</a>. <em>Stata Journal</em> 16(2): 331-367.
</p>
<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2017). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2017_JPAM.pdf">Comparing Inference Approaches for RD Designs: A Reexamination of the Effect of Head Start on Child Mortality</a>. <em>Journal of Policy Analysis and Management</em> 36(3): 643-681.
</p>
<p>Rosenbaum, P. (2002). Observational Studies. Springer.
</p>

<hr>
<h2 id='rdrandinf'>Randomization Inference for RD Designs under Local Randomization</h2><span id='topic+rdrandinf'></span>

<h3>Description</h3>

<p><code>rdrandinf</code> implements randomization inference and related methods for RD designs,
using observations in a specified or data-driven selected window around the cutoff where
local randomization is assumed to hold.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdrandinf(
  Y,
  R,
  cutoff = 0,
  wl = NULL,
  wr = NULL,
  statistic = "diffmeans",
  p = 0,
  evall = NULL,
  evalr = NULL,
  kernel = "uniform",
  fuzzy = NULL,
  nulltau = 0,
  d = NULL,
  dscale = NULL,
  ci,
  interfci = NULL,
  bernoulli = NULL,
  reps = 1000,
  seed = 666,
  quietly = FALSE,
  covariates,
  obsmin = NULL,
  wmin = NULL,
  wobs = NULL,
  wstep = NULL,
  wasymmetric = FALSE,
  wmasspoints = FALSE,
  nwindows = 10,
  dropmissing = FALSE,
  rdwstat = "diffmeans",
  approx = FALSE,
  rdwreps = 1000,
  level = 0.15,
  plot = FALSE,
  firststage = FALSE,
  obsstep = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rdrandinf_+3A_y">Y</code></td>
<td>
<p>a vector containing the values of the outcome variable.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_r">R</code></td>
<td>
<p>a vector containing the values of the running variable.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_cutoff">cutoff</code></td>
<td>
<p>the RD cutoff (default is 0).</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wl">wl</code></td>
<td>
<p>the left limit of the window. The default takes the minimum of the running variable.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wr">wr</code></td>
<td>
<p>the right limit of the window. The default takes the maximum of the running variable.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_statistic">statistic</code></td>
<td>
<p>the statistic to be used in the balance tests. Allowed options are <code>diffmeans</code> (difference in means statistic), <code>ksmirnov</code> (Kolmogorov-Smirnov statistic) and <code>ranksum</code> (Wilcoxon-Mann-Whitney standardized statistic). Default option is <code>diffmeans</code>. The statistic <code>ttest</code> is equivalent to <code>diffmeans</code> and included for backward compatibility.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_p">p</code></td>
<td>
<p>the order of the polynomial for outcome transformation model (default is 0).</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_evall">evall</code></td>
<td>
<p>the point at the left of the cutoff at which to evaluate the transformed outcome is evaluated. Default is the cutoff value.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_evalr">evalr</code></td>
<td>
<p>specifies the point at the right of the cutoff at which the transformed outcome is evaluated. Default is the cutoff value.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_kernel">kernel</code></td>
<td>
<p>specifies the type of kernel to use as weighting scheme. Allowed kernel types are <code>uniform</code> (uniform kernel), <code>triangular</code> (triangular kernel) and <code>epan</code> (Epanechnikov kernel). Default is <code>uniform</code>.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_fuzzy">fuzzy</code></td>
<td>
<p>indicates that the RD design is fuzzy. <code>fuzzy</code> can be specified as the variable containing the values of the endogenous treatment variable, or as a vector where the first element is the vector of endogenous treatment values and the second element is a string containing the name of the statistic to be used. Allowed statistics are <code>itt</code> (intention-to-treat statistic) and <code>tsls</code> (2SLS statistic). Default statistic is <code>ar</code>. The <code>tsls</code> statistic relies on large-sample approximation.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_nulltau">nulltau</code></td>
<td>
<p>the value of the treatment effect under the null hypothesis (default is 0).</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_d">d</code></td>
<td>
<p>the effect size for asymptotic power calculation. Default is 0.5 * standard deviation of outcome variable for the control group.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_dscale">dscale</code></td>
<td>
<p>the fraction of the standard deviation of the outcome variable for the control group used as alternative hypothesis for asymptotic power calculation. Default is 0.5.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_ci">ci</code></td>
<td>
<p>calculates a confidence interval for the treatment effect by test inversion. <code>ci</code> can be specified as a scalar or a vector, where the first element indicates the value of alpha for the confidence interval (typically 0.05 or 0.01) and the remaining elements, if specified, indicate the grid of treatment effects to be evaluated. This option uses <code>rdsensitivity</code> to calculate the confidence interval. See corresponding help for details. Note: the default tlist can be narrow in some cases, which may truncate the confidence interval. We recommend the user to manually set a large enough tlist.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_interfci">interfci</code></td>
<td>
<p>the level for Rosenbaum's confidence interval under arbitrary interference between units.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_bernoulli">bernoulli</code></td>
<td>
<p>the probabilities of treatment for each unit when assignment mechanism is a Bernoulli trial. This option should be specified as a vector of length equal to the length of the outcome and running variables.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_reps">reps</code></td>
<td>
<p>the number of replications (default is 1000).</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_seed">seed</code></td>
<td>
<p>the seed to be used for the randomization test.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_quietly">quietly</code></td>
<td>
<p>suppresses the output table.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_covariates">covariates</code></td>
<td>
<p>the covariates used by <code>rdwinselect</code> to choose the window when <code>wl</code> and <code>wr</code> are not specified. This should be a matrix of size n x k where n is the total sample size and k is the number of covariates.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_obsmin">obsmin</code></td>
<td>
<p>the minimum number of observations above and below the cutoff in the smallest window employed by the companion command <code>rdwinselect</code>. Default is 10.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wmin">wmin</code></td>
<td>
<p>the smallest window to be used (if <code>minobs</code> is not specified) by the companion command <code>rdwinselect</code>. Specifying both <code>wmin</code> and <code>obsmin</code> returns an error.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wobs">wobs</code></td>
<td>
<p>the number of observations to be added at each side of the cutoff at each step.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wstep">wstep</code></td>
<td>
<p>the increment in window length (if <code>obsstep</code> is not specified) by the companion command <code>rdwinselect</code>.  Specifying both <code>obsstep</code> and <code>wstep</code> returns an error.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wasymmetric">wasymmetric</code></td>
<td>
<p>allows for asymmetric windows around the cutoff when (<code>wobs</code> is specified).</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_wmasspoints">wmasspoints</code></td>
<td>
<p>specifies that the running variable is discrete and each masspoint should be used as a window.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_nwindows">nwindows</code></td>
<td>
<p>the number of windows to be used by the companion command <code>rdwinselect</code>. Default is 10.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_dropmissing">dropmissing</code></td>
<td>
<p>drop rows with missing values in covariates when calculating windows.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_rdwstat">rdwstat</code></td>
<td>
<p>the statistic to be used by the companion command <code>rdwinselect</code> (see corresponding help for options). Default option is <code>ttest</code>.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_approx">approx</code></td>
<td>
<p>forces the companion command <code>rdwinselect</code> to conduct the covariate balance tests using a large-sample approximation instead of finite-sample exact randomization inference methods.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_rdwreps">rdwreps</code></td>
<td>
<p>the number of replications to be used by the companion command <code>rdwinselect</code>. Default is 1000.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_level">level</code></td>
<td>
<p>the minimum accepted value of the p-value from the covariate balance tests to be used by the companion command <code>rdwinselect</code>. Default is .15.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_plot">plot</code></td>
<td>
<p>draws a scatter plot of the minimum p-value from the covariate balance test against window length implemented by the companion command <code>rdwinselect</code>.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_firststage">firststage</code></td>
<td>
<p>reports the results from the first step when using tsls.</p>
</td></tr>
<tr><td><code id="rdrandinf_+3A_obsstep">obsstep</code></td>
<td>
<p>the minimum number of observations to be added on each side of the cutoff for the sequence of fixed-increment nested windows. Default is 2. This option is deprecated and only included for backward compatibility.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>sumstats</code></td>
<td>
<p>summary statistics</p>
</td></tr>
<tr><td><code>obs.stat</code></td>
<td>
<p>observed statistic(s)</p>
</td></tr>
<tr><td><code>p.value</code></td>
<td>
<p>randomization p-value(s)</p>
</td></tr>
<tr><td><code>asy.pvalue</code></td>
<td>
<p>asymptotic p-value(s)</p>
</td></tr>
<tr><td><code>window</code></td>
<td>
<p>chosen window</p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>confidence interval (only if <code>ci</code> option is specified)</p>
</td></tr>
<tr><td><code>interf.ci</code></td>
<td>
<p>confidence interval under interferecen (only if <code>interfci</code> is specified)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias Cattaneo, Princeton University. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>
</p>
<p>Rocio Titiunik, Princeton University. <a href="mailto:titiunik@princeton.edu">titiunik@princeton.edu</a>
</p>
<p>Gonzalo Vazquez-Bare, UC Santa Barbara. <a href="mailto:gvazquez@econ.ucsb.edu">gvazquez@econ.ucsb.edu</a>
</p>


<h3>References</h3>

<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2016). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">Inference in Regression Discontinuity Designs under Local Randomization</a>. <em>Stata Journal</em> 16(2): 331-367.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Toy dataset
X &lt;- array(rnorm(200),dim=c(100,2))
R &lt;- X[1,] + X[2,] + rnorm(100)
Y &lt;- 1 + R -.5*R^2 + .3*R^3 + (R&gt;=0) + rnorm(100)
# Randomization inference in window (-.75,.75)
tmp &lt;- rdrandinf(Y,R,wl=-.75,wr=.75)
# Randomization inference in window (-.75,.75), all statistics
tmp &lt;- rdrandinf(Y,R,wl=-.75,wr=.75,statistic='all')
# Randomization inference with window selection
# Note: low number of replications to speed up process.
# The user should increase the number of replications.
tmp &lt;- rdrandinf(Y,R,statistic='all',covariates=X,wmin=.5,wstep=.125,rdwreps=500)



</code></pre>

<hr>
<h2 id='rdrbounds'>Rosenbaum bounds for RD designs under local randomization</h2><span id='topic+rdrbounds'></span>

<h3>Description</h3>

<p><code>rdrbounds</code> calculates lower and upper bounds for the
randomization p-value under different degrees of departure from a
local randomized experiment, as suggested by Rosenbaum (2002).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdrbounds(
  Y,
  R,
  cutoff = 0,
  wlist,
  gamma,
  expgamma,
  bound = "both",
  statistic = "ranksum",
  p = 0,
  evalat = "cutoff",
  kernel = "uniform",
  fuzzy = NULL,
  nulltau = 0,
  prob,
  fmpval = FALSE,
  reps = 1000,
  seed = 666
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rdrbounds_+3A_y">Y</code></td>
<td>
<p>a vector containing the values of the outcome variable.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_r">R</code></td>
<td>
<p>a vector containing the values of the running variable.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_cutoff">cutoff</code></td>
<td>
<p>the RD cutoff (default is 0).</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_wlist">wlist</code></td>
<td>
<p>the list of window lengths to be evaluated. By default the program constructs 10 windows around the cutoff, the first one including 10 treated and control observations and adding 5 observations to each group in subsequent windows.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_gamma">gamma</code></td>
<td>
<p>the list of values of gamma to be evaluated.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_expgamma">expgamma</code></td>
<td>
<p>the list of values of exp(gamma) to be evaluated. Default is <code>c(1.5,2,2.5,3)</code>.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_bound">bound</code></td>
<td>
<p>specifies which bounds the command calculates. Options are <code>upper</code> for upper bound, <code>lower</code> for lower bound and <code>both</code> for both upper and lower bounds. Default is <code>both</code>.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_statistic">statistic</code></td>
<td>
<p>the statistic to be used in the balance tests. Allowed options are <code>diffmeans</code> (difference in means statistic), <code>ksmirnov</code> (Kolmogorov-Smirnov statistic) and <code>ranksum</code> (Wilcoxon-Mann-Whitney standardized statistic). Default option is <code>diffmeans</code>. The statistic <code>ttest</code> is equivalent to <code>diffmeans</code> and included for backward compatibility.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_p">p</code></td>
<td>
<p>the order of the polynomial for outcome adjustment model. Default is 0.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_evalat">evalat</code></td>
<td>
<p>specifies the point at which the adjusted variable is evaluated. Allowed options are <code>cutoff</code> and <code>means</code>. Default is <code>cutoff</code>.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_kernel">kernel</code></td>
<td>
<p>specifies the type of kernel to use as weighting scheme. Allowed kernel types are <code>uniform</code> (uniform kernel), <code>triangular</code> (triangular kernel) and <code>epan</code> (Epanechnikov kernel). Default is <code>uniform</code>.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_fuzzy">fuzzy</code></td>
<td>
<p>indicates that the RD design is fuzzy. <code>fuzzy</code> can be specified as a vector containing the values of the endogenous treatment variable, or as a list where the first element is the vector of endogenous treatment values and the second element is a string containing the name of the statistic to be used. Allowed statistics are <code>ar</code> (Anderson-Rubin statistic) and <code>tsls</code> (2SLS statistic). Default statistic is <code>ar</code>. The <code>tsls</code> statistic relies on large-sample approximation.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_nulltau">nulltau</code></td>
<td>
<p>the value of the treatment effect under the null hypothesis. Default is 0.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_prob">prob</code></td>
<td>
<p>the probabilities of treatment for each unit when assignment mechanism is a Bernoulli trial. This option should be specified as a vector of length equal to the length of the outcome and running variables.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_fmpval">fmpval</code></td>
<td>
<p>reports the p-value under fixed margins randomization, in addition to the p-value under Bernoulli trials.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_reps">reps</code></td>
<td>
<p>number of replications. Default is 1000.</p>
</td></tr>
<tr><td><code id="rdrbounds_+3A_seed">seed</code></td>
<td>
<p>the seed to be used for the randomization tests.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>gamma</code></td>
<td>
<p>list of gamma values.</p>
</td></tr>
<tr><td><code>expgamma</code></td>
<td>
<p>list of exp(gamma) values.</p>
</td></tr>
<tr><td><code>wlist</code></td>
<td>
<p>window grid.</p>
</td></tr>
<tr><td><code>p.values</code></td>
<td>
<p>p-values for each window (under gamma = 0).</p>
</td></tr>
<tr><td><code>lower.bound</code></td>
<td>
<p>list of lower bound p-values for each window and gamma pair.</p>
</td></tr>
<tr><td><code>upper.bound</code></td>
<td>
<p>list of upper bound p-values for each window and gamma pair.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias Cattaneo, Princeton University. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>
</p>
<p>Rocio Titiunik, Princeton University. <a href="mailto:titiunik@princeton.edu">titiunik@princeton.edu</a>
</p>
<p>Gonzalo Vazquez-Bare, UC Santa Barbara. <a href="mailto:gvazquez@econ.ucsb.edu">gvazquez@econ.ucsb.edu</a>
</p>


<h3>References</h3>

<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2016). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">Inference in Regression Discontinuity Designs under Local Randomization</a>. <em>Stata Journal</em> 16(2): 331-367.
</p>
<p>Rosenbaum, P. (2002). Observational Studies. Springer.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Toy dataset
R &lt;- runif(100,-1,1)
Y &lt;- 1 + R -.5*R^2 + .3*R^3 + (R&gt;=0) + rnorm(100)
# Rosenbaum bounds
# Note: low number of replications and windows to speed up process.
# The user should increase these values.
rdrbounds(Y,R,expgamma=c(1.5,2),wlist=c(.3),reps=100)


</code></pre>

<hr>
<h2 id='rdsensitivity'>Sensitivity analysis for RD designs under local randomization</h2><span id='topic+rdsensitivity'></span>

<h3>Description</h3>

<p><code>rdsensitivity</code> analyze the sensitivity of randomization p-values
and confidence intervals to different window lengths.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdsensitivity(
  Y,
  R,
  cutoff = 0,
  wlist,
  wlist_left,
  tlist,
  statistic = "diffmeans",
  p = 0,
  evalat = "cutoff",
  kernel = "uniform",
  fuzzy = NULL,
  ci = NULL,
  ci_alpha = 0.05,
  reps = 1000,
  seed = 666,
  nodraw = FALSE,
  quietly = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rdsensitivity_+3A_y">Y</code></td>
<td>
<p>a vector containing the values of the outcome variable.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_r">R</code></td>
<td>
<p>a vector containing the values of the running variable.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_cutoff">cutoff</code></td>
<td>
<p>the RD cutoff (default is 0).</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_wlist">wlist</code></td>
<td>
<p>the list of windows to the right of the cutoff. By default the program constructs 10 windows around the cutoffwith 5 observations each.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_wlist_left">wlist_left</code></td>
<td>
<p>the list of windows  to the left of the cutoff. If not specified, the windows are constructed symmetrically around the cutoff based on the values in wlist.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_tlist">tlist</code></td>
<td>
<p>the list of values of the treatment effect under the null to be evaluated. By default the program employs ten evenly spaced points within the asymptotic confidence interval for a constant treatment effect in the smallest window to be used.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_statistic">statistic</code></td>
<td>
<p>the statistic to be used in the balance tests. Allowed options are <code>diffmeans</code> (difference in means statistic), <code>ksmirnov</code> (Kolmogorov-Smirnov statistic) and <code>ranksum</code> (Wilcoxon-Mann-Whitney standardized statistic). Default option is <code>diffmeans</code>. The statistic <code>ttest</code> is equivalent to <code>diffmeans</code> and included for backward compatibility.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_p">p</code></td>
<td>
<p>the order of the polynomial for outcome adjustment model. Default is 0.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_evalat">evalat</code></td>
<td>
<p>specifies the point at which the adjusted variable is evaluated. Allowed options are <code>cutoff</code> and <code>means</code>. Default is <code>cutoff</code>.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_kernel">kernel</code></td>
<td>
<p>specifies the type of kernel to use as weighting scheme. Allowed kernel types are <code>uniform</code> (uniform kernel), <code>triangular</code> (triangular kernel) and <code>epan</code> (Epanechnikov kernel). Default is <code>uniform</code>.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_fuzzy">fuzzy</code></td>
<td>
<p>indicates that the RD design is fuzzy. <code>fuzzy</code> can be specified as a vector containing the values of the endogenous treatment variable, or as a list where the first element is the vector of endogenous treatment values and the second element is a string containing the name of the statistic to be used. Allowed statistics are <code>ar</code> (Anderson-Rubin statistic) and <code>tsls</code> (2SLS statistic). Default statistic is <code>ar</code>. The <code>tsls</code> statistic relies on large-sample approximation.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_ci">ci</code></td>
<td>
<p>returns the confidence interval corresponding to the indicated window length. <code>ci</code> has to be a two-dimensional vector indicating the left and right limits of the window. Default alpha is .05 (95% level CI).</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_ci_alpha">ci_alpha</code></td>
<td>
<p>Specifies value of alpha for the confidence interval. Default alpha is .05 (95% level CI).</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_reps">reps</code></td>
<td>
<p>number of replications. Default is 1000.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_seed">seed</code></td>
<td>
<p>the seed to be used for the randomization tests.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_nodraw">nodraw</code></td>
<td>
<p>suppresses contour plot.</p>
</td></tr>
<tr><td><code id="rdsensitivity_+3A_quietly">quietly</code></td>
<td>
<p>suppresses the output table.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>tlist</code></td>
<td>
<p>treatment effects grid</p>
</td></tr>
<tr><td><code>wlist</code></td>
<td>
<p>window grid</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>table with corresponding p-values for each window and treatment effect pair.</p>
</td></tr>
<tr><td><code>ci</code></td>
<td>
<p>confidence interval (if <code>ci</code> is specified).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias Cattaneo, Princeton University. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>
</p>
<p>Rocio Titiunik, Princeton University. <a href="mailto:titiunik@princeton.edu">titiunik@princeton.edu</a>
</p>
<p>Gonzalo Vazquez-Bare, UC Santa Barbara. <a href="mailto:gvazquez@econ.ucsb.edu">gvazquez@econ.ucsb.edu</a>
</p>


<h3>References</h3>

<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2016). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">Inference in Regression Discontinuity Designs under Local Randomization</a>. <em>Stata Journal</em> 16(2): 331-367.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Toy dataset
R &lt;- runif(100,-1,1)
Y &lt;- 1 + R -.5*R^2 + .3*R^3 + (R&gt;=0) + rnorm(100)
# Sensitivity analysis
# Note: low number of replications to speed up process.
# The user should increase the number of replications.
tmp &lt;- rdsensitivity(Y,R,wlist=seq(.75,2,by=.25),tlist=seq(0,5,by=1),reps=500)


</code></pre>

<hr>
<h2 id='rdwinselect'>Window selection for RD designs under local randomization</h2><span id='topic+rdwinselect'></span>

<h3>Description</h3>

<p><code>rdwinselect</code> implements the window-selection procedure
based on balance tests for RD designs under local randomization.
Specifically, it constructs a sequence of nested windows around the RD cutoff
and reports binomial tests for the running variable runvar and covariate balance
tests for covariates covariates (if specified). The recommended window is the
largest window around the cutoff such that the minimum p-value of the balance test
is larger than a prespecified level for all nested (smaller) windows. By default,
the p-values are calculated using randomization inference methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdwinselect(
  R,
  X,
  cutoff = 0,
  obsmin = NULL,
  wmin = NULL,
  wobs = NULL,
  wstep = NULL,
  wasymmetric = FALSE,
  wmasspoints = FALSE,
  dropmissing = FALSE,
  nwindows = 10,
  statistic = "diffmeans",
  p = 0,
  evalat = "cutoff",
  kernel = "uniform",
  approx = FALSE,
  level = 0.15,
  reps = 1000,
  seed = 666,
  plot = FALSE,
  quietly = FALSE,
  obsstep = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rdwinselect_+3A_r">R</code></td>
<td>
<p>a vector containing the values of the running variable.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_x">X</code></td>
<td>
<p>the matrix of covariates to be used in the balancing tests. The matrix is optional but the recommended window is only provided when at least one covariate is specified. This should be a matrix of size n x k where n is the total sample size and $k$ is the number of covariates.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_cutoff">cutoff</code></td>
<td>
<p>the RD cutoff (default is 0).</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_obsmin">obsmin</code></td>
<td>
<p>the minimum number of observations above and below the cutoff in the smallest window. Default is 10.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_wmin">wmin</code></td>
<td>
<p>the smallest window to be used.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_wobs">wobs</code></td>
<td>
<p>the number of observations to be added at each side of the cutoff at each step. Default is 5.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_wstep">wstep</code></td>
<td>
<p>the increment in window length.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_wasymmetric">wasymmetric</code></td>
<td>
<p>allows for asymmetric windows around the cutoff when (<code>wobs</code> is specified).</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_wmasspoints">wmasspoints</code></td>
<td>
<p>specifies that the running variable is discrete and each masspoint should be used as a window.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_dropmissing">dropmissing</code></td>
<td>
<p>drop rows with missing values in covariates when calculating windows.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_nwindows">nwindows</code></td>
<td>
<p>the number of windows to be used. Default is 10.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_statistic">statistic</code></td>
<td>
<p>the statistic to be used in the balance tests. Allowed options are <code>diffmeans</code> (difference in means statistic), <code>ksmirnov</code> (Kolmogorov-Smirnov statistic), <code>ranksum</code> (Wilcoxon-Mann-Whitney standardized statistic) and <code>hotelling</code> (Hotelling's T-squared statistic). Default option is <code>diffmeans</code>. The statistic <code>ttest</code> is equivalent to <code>diffmeans</code> and included for backward compatibility.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_p">p</code></td>
<td>
<p>the order of the polynomial for outcome adjustment model (for covariates). Default is 0.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_evalat">evalat</code></td>
<td>
<p>specifies the point at which the adjusted variable is evaluated. Allowed options are <code>cutoff</code> and <code>means</code>. Default is <code>cutoff</code>.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_kernel">kernel</code></td>
<td>
<p>specifies the type of kernel to use as weighting scheme. Allowed kernel types are <code>uniform</code> (uniform kernel), <code>triangular</code> (triangular kernel) and <code>epan</code> (Epanechnikov kernel). Default is <code>uniform</code>.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_approx">approx</code></td>
<td>
<p>forces the command to conduct the covariate balance tests using a large-sample approximation instead of finite-sample exact randomization inference methods.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_level">level</code></td>
<td>
<p>the minimum accepted value of the p-value from the covariate balance tests. Default is .15.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_reps">reps</code></td>
<td>
<p>number of replications. Default is 1000.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_seed">seed</code></td>
<td>
<p>the seed to be used for the randomization tests.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_plot">plot</code></td>
<td>
<p>draws a scatter plot of the minimum p-value from the covariate balance test against window length.</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_quietly">quietly</code></td>
<td>
<p>suppress output</p>
</td></tr>
<tr><td><code id="rdwinselect_+3A_obsstep">obsstep</code></td>
<td>
<p>the minimum number of observations to be added on each side of the cutoff for the sequence of fixed-increment nested windows. This option is deprecated and only included for backward compatibility.</p>
</td></tr>
</table>


<h3>Value</h3>

<table>
<tr><td><code>window</code></td>
<td>
<p>recommended window (NA is covariates are not specified)</p>
</td></tr>
<tr><td><code>wlist</code></td>
<td>
<p>list of window lengths</p>
</td></tr>
<tr><td><code>results</code></td>
<td>
<p>table including window lengths, minimum p-value in each window, corresponding number of the variable with minimum p-value (i.e. column of covariate matrix), Binomial test p-value and sample sizes to the left and right of the cutoff in each window.</p>
</td></tr>
<tr><td><code>summary</code></td>
<td>
<p>summary statistics.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias Cattaneo, Princeton University. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>
</p>
<p>Rocio Titiunik, Princeton University. <a href="mailto:titiunik@princeton.edu">titiunik@princeton.edu</a>
</p>
<p>Gonzalo Vazquez-Bare, UC Santa Barbara. <a href="mailto:gvazquez@econ.ucsb.edu">gvazquez@econ.ucsb.edu</a>
</p>


<h3>References</h3>

<p>Cattaneo, M.D., R. Titiunik and G. Vazquez-Bare. (2016). <a href="https://rdpackages.github.io/references/Cattaneo-Titiunik-VazquezBare_2016_Stata.pdf">Inference in Regression Discontinuity Designs under Local Randomization</a>. <em>Stata Journal</em> 16(2): 331-367.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Toy dataset
X &lt;- array(rnorm(200),dim=c(100,2))
R &lt;- X[1,] + X[2,] + rnorm(100)
# Window selection adding 5 observations at each step
# Note: low number of replications to speed up process.
tmp &lt;- rdwinselect(R,X,obsmin=10,wobs=5,reps=500)
# Window selection setting initial window and step
# The user should increase the number of replications.
tmp &lt;- rdwinselect(R,X,wmin=.5,wstep=.125,reps=500)
# Window selection with approximate (large sample) inference and p-value plot
tmp &lt;- rdwinselect(R,X,wmin=.5,wstep=.125,approx=TRUE,nwin=80,quietly=TRUE,plot=TRUE)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
