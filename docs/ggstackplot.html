<!DOCTYPE html><html lang="en"><head><title>Help for package ggstackplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggstackplot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ggstackplot-package'><p>ggstackplot: Create Overlapping Stacked Plots</p></a></li>
<li><a href='#ggstackplot'><p>Stack a ggplot</p></a></li>
<li><a href='#theme_stackplot'><p>Recommended base theme for stacked gg plots</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Create Overlapping Stacked Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.1</td>
</tr>
<tr>
<td>Description:</td>
<td>
  Easily create overlapping grammar of graphics plots for scientific data visualization. 
  This style of plotting is particularly common in climatology and oceanography research communities.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ggstackplot.kopflab.org/">https://ggstackplot.kopflab.org/</a>,
<a href="https://github.com/kopflab/ggstackplot">https://github.com/kopflab/ggstackplot</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kopflab/ggstackplot/issues">https://github.com/kopflab/ggstackplot/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rlang, cli, methods, lifecycle, tidyselect, dplyr, tidyr,
ggplot2, cowplot, RColorBrewer</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat (&ge; 3.0.0), vdiffr, scales,
pangaear</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-31 08:40:12 UTC; sk</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastian Kopf <a href="https://orcid.org/0000-0002-2044-0201"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Tristan Caro <a href="https://orcid.org/0000-0001-6177-7444"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jamie McFarlin <a href="https://orcid.org/0000-0002-8185-8185"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Jon Raberg <a href="https://orcid.org/0000-0003-2959-3631"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Kopf &lt;sebastian.kopf@colorado.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-31 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ggstackplot-package'>ggstackplot: Create Overlapping Stacked Plots</h2><span id='topic+ggstackplot-package'></span>

<h3>Description</h3>

<p>Easily create overlapping grammar of graphics plots for scientific data visualization. This style of plotting is particularly common in climatology and oceanography research communities.
</p>


<h3>Details</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Have you ever wanted to create (partly) overlapping line plots with matched color-coding of the data and axes? These kinds of plots are common in climatology and oceanography research but there is not an easy way to create them with ggplot facets. The ggstackplot package builds on <a href="https://ggplot2.tidyverse.org/">ggplot2</a> to provide a straightforward approach to building these kinds of plots while retaining the powerful grammar of graphics approach of ggplots. Check out the functionality provided by ggstackplots at <a href="https://ggstackplot.kopflab.org">https://ggstackplot.kopflab.org</a>
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Sebastian Kopf <a href="mailto:sebastian.kopf@colorado.edu">sebastian.kopf@colorado.edu</a> (<a href="https://orcid.org/0000-0002-2044-0201">ORCID</a>) [copyright holder]
</p>
<p>Authors:
</p>

<ul>
<li><p> Tristan Caro <a href="mailto:tristan.caro@colorado.edu">tristan.caro@colorado.edu</a> (<a href="https://orcid.org/0000-0001-6177-7444">ORCID</a>)
</p>
</li>
<li><p> Jamie McFarlin <a href="mailto:jamie.mcfarlin@uwyo.edu">jamie.mcfarlin@uwyo.edu</a> (<a href="https://orcid.org/0000-0002-8185-8185">ORCID</a>)
</p>
</li>
<li><p> Jon Raberg <a href="mailto:Jonathan.Raberg@colorado.edu">Jonathan.Raberg@colorado.edu</a> (<a href="https://orcid.org/0000-0003-2959-3631">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ggstackplot.kopflab.org/">https://ggstackplot.kopflab.org/</a>
</p>
</li>
<li> <p><a href="https://github.com/kopflab/ggstackplot">https://github.com/kopflab/ggstackplot</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/kopflab/ggstackplot/issues">https://github.com/kopflab/ggstackplot/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ggstackplot'>Stack a ggplot</h2><span id='topic+ggstackplot'></span><span id='topic+prepare_stackplot'></span><span id='topic+assemble_stackplot'></span>

<h3>Description</h3>

<p>Use <code>ggstackplot()</code> to generate a stackplot. If you need more fine control, use <code>prepare_stackplot()</code> and <code>assemble_stackplot()</code> individually. To explore examples of all the different features, check out the <code>vignette("explore", "ggstackplot")</code> or the <a href="https://ggstackplot.kopflab.org/articles/explore.html">online documentation</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggstackplot(
  data,
  x,
  y,
  remove_na = TRUE,
  color = NA,
  palette = NA,
  both_axes = FALSE,
  alternate_axes = TRUE,
  switch_axes = FALSE,
  overlap = 0,
  simplify_shared_axis = TRUE,
  shared_axis_size = 0.2,
  template = ggplot() + geom_line() + geom_point() + theme_stackplot(),
  add = list(),
  debug = FALSE
)

prepare_stackplot(
  data,
  x,
  y,
  remove_na = TRUE,
  color = NA,
  palette = NA,
  both_axes = FALSE,
  alternate_axes = TRUE,
  switch_axes = FALSE,
  template = ggplot() + geom_line() + geom_point() + theme_stackplot(),
  add = list(),
  debug = FALSE
)

assemble_stackplot(
  prepared_stackplot,
  overlap = 0,
  simplify_shared_axis = TRUE,
  shared_axis_size = 0.15,
  debug = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ggstackplot_+3A_data">data</code></td>
<td>
<p>the data frame to plot</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_x">x</code></td>
<td>
<p>the x variable(s) to plot, accepts <code><a href="dplyr.html#topic+select">dplyr::select()</a></code> syntax. The order of variables is plotted from left to right (if multiple <code>x</code>).</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_y">y</code></td>
<td>
<p>the y variable(s) to plot, accepts <code><a href="dplyr.html#topic+select">dplyr::select()</a></code> syntax. The order of variables in plotted from top to bottom (if multiple <code>y</code>).</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_remove_na">remove_na</code></td>
<td>
<p>whether to remove <code>NA</code> values in the x/y plot, setting this to <code>FALSE</code> can lead to unintended side-effects for interrupted lines so check your plot carefully if you change this</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_color">color</code></td>
<td>
<p>which color to make the plots (also sets the plotwide color and fill aesthetics, overwrite in individual geoms in the <code>template</code> to overwrite this aesthetic), either one value for or one color per variable. Pick <code>NA</code> to not set colors (in case you want to use them yourself in the aesthetics).</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_palette">palette</code></td>
<td>
<p>which color to make the plots defined with an RColorBrewer palette (<code><a href="RColorBrewer.html#topic+ColorBrewer">RColorBrewer::display.brewer.all()</a></code>). You can only use <code>color</code> or <code>palette</code> parameter, not both.</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_both_axes">both_axes</code></td>
<td>
<p>whether to have the stacked axes on both sides (overrides alternate_axes and switch_axes)</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_alternate_axes">alternate_axes</code></td>
<td>
<p>whether to alternate the sides on which the stacked axes are plotted</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_switch_axes">switch_axes</code></td>
<td>
<p>whether to switch the stacked axes. Not switching means that for vertical stacks the plot at the bottom has the y-axis always on the left side; and for horizontal stacks that the plot on the left has the x-axis on top. Setting <code>switch_axes = TRUE</code>, leads to the opposite.</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_overlap">overlap</code></td>
<td>
<p>fractional overlap between adjacent plots. The max of 1 means plots are perfectly overlaid. The min of 0 means there is no overlap. If providing multiple values, must be 1 less than the number of stacked plots (since it's describing the overlap/gap between adjacent plots). By default there is no overlap between plots</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_simplify_shared_axis">simplify_shared_axis</code></td>
<td>
<p>whether to simplify the shared axis to only be on the last plot (+ first plot if a duplicate secondary axis is set)</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_shared_axis_size">shared_axis_size</code></td>
<td>
<p>if simplify_shared_axes is true, this determines the size of the shared axis relative to the size of a single plot</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_template">template</code></td>
<td>
<p>a template plot (ggplot object) to use for the stacked plots</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_add">add</code></td>
<td>
<p>a list of ggplot component calls to add to specific panel plots, either by panel variable name (named list) or index (unnamed list)</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_debug">debug</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> debug flag to print the stackplot tibble and gtable intermediates</p>
</td></tr>
<tr><td><code id="ggstackplot_+3A_prepared_stackplot">prepared_stackplot</code></td>
<td>
<p>a nested data frame, the output from <code><a href="#topic+prepare_stackplot">prepare_stackplot()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ggstackplot()</code> stacks a ggplot template with the provided data and parameters. It returns a plot object generated by <code><a href="cowplot.html#topic+plot_grid">cowplot::plot_grid()</a></code>).
</p>
<p><code>prepare_stackplot()</code> is usually not called directly but can be used to assemble the parts of a stackplot first and then look at them or edit them individually before combining them with <code style="white-space: pre;">&#8288;assemble_stackplot()]&#8288;</code>. Returns a nested data frame with all stacked variables (.var), their plot configuration, data, plot object, and theme object.
</p>
<p><code>assemble_stackplot()</code> is usually not called directly but can be used to manually combine a stackplot tibble (typically created by <code>prepare_stockplot()</code>). Returns a plot object generated by <code><a href="cowplot.html#topic+plot_grid">cowplot::plot_grid()</a></code>).
</p>


<h3>Value</h3>

<p><code>ggstackplot()</code> returns a ggplot with overlayed plot layers
</p>
<p><code>prepare_stackplot()</code> returns a tibble with all plot components
</p>
<p><code>assemble_stackplot()</code> returns a ggplot with overlayed plot layers
</p>


<h3>Examples</h3>

<pre><code class='language-R'># 1 step stackplot (most common use)
mtcars |&gt;
  ggstackplot(
    x = mpg,
    y = c(`weight [g]` = wt, qsec, drat, disp),
    palette = "Set1",
    overlap = c(1, 0, 0.3)
  )

# 2 step stackplot
mtcars |&gt;
  prepare_stackplot(
    x = mpg,
    y = c(`weight [g]` = wt, qsec, drat, disp),
    palette = "Set1"
  ) |&gt;
  assemble_stackplot(overlap = c(1, 0, 0.3))


# many more examples available in the vignette
vignette("ggstackplot")

</code></pre>

<hr>
<h2 id='theme_stackplot'>Recommended base theme for stacked gg plots</h2><span id='topic+theme_stackplot'></span>

<h3>Description</h3>

<p>Returns a basic ggplot2 theme that extends <code><a href="ggplot2.html#topic+ggtheme">ggplot2::theme_bw()</a></code> with a transparent plot background to make sure overlapping plots do not cover each other up.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>theme_stackplot()
</code></pre>


<h3>Value</h3>

<p><code><a href="ggplot2.html#topic+theme">ggplot2::theme()</a></code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)
template &lt;- ggplot() + geom_line() + theme_stackplot()

ggstackplot(
  data = mtcars,
  x = mpg, y = c(wt, qsec, drat),
  color = c("#E41A1C", "#377EB8", "#4DAF4A"),
  template = template
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
