<!DOCTYPE html><html><head><title>Help for package primate</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {primate}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add.gnsp.clmn'><p>Add a genus species column</p></a></li>
<li><a href='#AWP.connect'><p>Create a connection to the SQL DB</p></a></li>
<li><a href='#AWP.driver'><p>Load the driver to access the All the World's Primate remote SQL database</p></a></li>
<li><a href='#AWP.get.lookup.table'><p>Get a Lookup Table</p></a></li>
<li><a href='#AWP.get.SQL.table'><p>Get a SQL Table</p></a></li>
<li><a href='#AWP.list.SQL.tables'><p>List the SQL tables</p></a></li>
<li><a href='#AWP.read.pkg.tab'><p>Read a table from the All the World's primates example microarchive within this package</p></a></li>
<li><a href='#AWP.run.SQL'><p>Run SQL querries</p></a></li>
<li><a href='#regroup.equivalent'><p>Re-group data.frame by Genus_species in either old or new dataframe</p></a></li>
<li><a href='#regroup.gnsp'><p>Re-group data.frame by Genus_species</p></a></li>
<li><a href='#updatevals'><p>Update the values of an AWP data.frame</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>0.2.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-05-05</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools and Methods for Primatological Data Science</td>
</tr>
<tr>
<td>Author:</td>
<td>David Schruth [aut][cre], Marc Myers [ctb], Noel Rowe [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Schruth &lt;data@anthropoidea.org&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 1.8.0), caroline</td>
</tr>
<tr>
<td>Suggests:</td>
<td>RJDBC</td>
</tr>
<tr>
<td>Description:</td>
<td>Data from All the World's Primates relational SQL database and other tabular datasets are made available via drivers and connection functions. Additionally we provide several functions and examples to facilitate the merging and aggregation of these tabular inputs. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/LICENSE-1.1">Apache License version 1.1</a> | <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License version 2.0</a> [expanded from: Apache License]</td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-05 18:18:45 UTC; mint</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-09 07:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add.gnsp.clmn'>Add a genus species column</h2><span id='topic+add.gnsp.clmn'></span>

<h3>Description</h3>

<p>Adds a genus_species column to the specified dataframe
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add.gnsp.clmn(df,gn="Genus",sp="Species",rownames=FALSE,new.col=TRUE, gnsp.col = "gn_sp")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add.gnsp.clmn_+3A_df">df</code></td>
<td>
<p>input data.frame</p>
</td></tr>
<tr><td><code id="add.gnsp.clmn_+3A_gn">gn</code></td>
<td>
<p>column name for genus</p>
</td></tr>
<tr><td><code id="add.gnsp.clmn_+3A_sp">sp</code></td>
<td>
<p>column name for species</p>
</td></tr>
<tr><td><code id="add.gnsp.clmn_+3A_rownames">rownames</code></td>
<td>
<p>use the new gn_sp column to assign data.frame rownames</p>
</td></tr>
<tr><td><code id="add.gnsp.clmn_+3A_new.col">new.col</code></td>
<td>
<p>TRUE if gn_sp column is to be retained, FALSE if it is to be removed</p>
</td></tr>
<tr><td><code id="add.gnsp.clmn_+3A_gnsp.col">gnsp.col</code></td>
<td>
<p>the name of the new column to add, by default is &quot;gn_sp&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>modified data.frame (with genus species info concatenated and added)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>primates.tab &lt;- AWP.read.pkg.tab(tab.nm='dbo_tblGrovesMonkeys', id.clmn='MonkeyNumberGroves')
primates.tab &lt;- add.gnsp.clmn(primates.tab,gn="Genus",sp="Species",rownames=FALSE,new.col=TRUE)
</code></pre>

<hr>
<h2 id='AWP.connect'>Create a connection to the SQL DB</h2><span id='topic+AWP.connect'></span>

<h3>Description</h3>

<p>Connect to the All the World's Primate Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.connect(drv=AWP.driver(), prefix='jdbc:jtds:sqlserver', 
            server="s09.everleap.com", port=1433,
            db="DB_3918_atwpreview", user="DB_3918_atwpreview_user", pw="atwpreview_$_j")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.connect_+3A_drv">drv</code></td>
<td>
<p>driver (output from AWP.driver()</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_prefix">prefix</code></td>
<td>
<p>prefix to the URL (before &quot;://&quot;)</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_server">server</code></td>
<td>
<p>domain name for the database server</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_port">port</code></td>
<td>
<p>port name used by the server's database</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_db">db</code></td>
<td>
<p>database name</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_user">user</code></td>
<td>
<p>database user name</p>
</td></tr>
<tr><td><code id="AWP.connect_+3A_pw">pw</code></td>
<td>
<p>database user password</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a connection object for SQL
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
con &lt;- AWP.connect(drv=AWP.driver()) 

</code></pre>

<hr>
<h2 id='AWP.driver'>Load the driver to access the All the World's Primate remote SQL database</h2><span id='topic+AWP.driver'></span>

<h3>Description</h3>

<p>Load the driver to utilize the database sofware
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.driver(drv.name="net.sourceforge.jtds.jdbc.Driver", 
           drv.file=system.file("drivers","jtds-1.2.8.jar", package='primate'))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.driver_+3A_drv.name">drv.name</code></td>
<td>
<p>The name of the driver</p>
</td></tr>
<tr><td><code id="AWP.driver_+3A_drv.file">drv.file</code></td>
<td>
<p>The file name for the database driver</p>
</td></tr>
</table>


<h3>Value</h3>

<p>driver argument to AWP.connect
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AWP.driver()

</code></pre>

<hr>
<h2 id='AWP.get.lookup.table'>Get a Lookup Table</h2><span id='topic+AWP.get.lookup.table'></span>

<h3>Description</h3>

<p>Get the lookup table from the All the World's Primates SQL database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.get.lookup.table(con=AWP.connect(),tab.nm="TextType")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.get.lookup.table_+3A_con">con</code></td>
<td>
<p>connection object</p>
</td></tr>
<tr><td><code id="AWP.get.lookup.table_+3A_tab.nm">tab.nm</code></td>
<td>
<p>table name (for the parent table)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame corresponding to SQL table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AWP.get.lookup.table(con=AWP.connect(),tab.nm="TextType")

</code></pre>

<hr>
<h2 id='AWP.get.SQL.table'>Get a SQL Table</h2><span id='topic+AWP.get.SQL.table'></span>

<h3>Description</h3>

<p>Retrieve a table from the All the World's Primates SQL database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.get.SQL.table(con=AWP.connect(), tab.nm="tblGrovesMonkeys", clmns=c('all'),xpnd=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.get.SQL.table_+3A_tab.nm">tab.nm</code></td>
<td>
<p>table name (defaults to the main primate species list)</p>
</td></tr>
<tr><td><code id="AWP.get.SQL.table_+3A_con">con</code></td>
<td>
<p>connection object</p>
</td></tr>
<tr><td><code id="AWP.get.SQL.table_+3A_clmns">clmns</code></td>
<td>
<p>columns to return</p>
</td></tr>
<tr><td><code id="AWP.get.SQL.table_+3A_xpnd">xpnd</code></td>
<td>
<p>expand the lookup column codes into full text strings</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame corresponding to SQL table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
online.version &lt;- AWP.get.SQL.table(tab.nm='LMType') #a small example table

</code></pre>

<hr>
<h2 id='AWP.list.SQL.tables'>List the SQL tables</h2><span id='topic+AWP.list.SQL.tables'></span>

<h3>Description</h3>

<p>List available tables from the All the World's Primates SQL database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.list.SQL.tables(con=AWP.connect(), all=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.list.SQL.tables_+3A_con">con</code></td>
<td>
<p>connection object from AWP.connect</p>
</td></tr>
<tr><td><code id="AWP.list.SQL.tables_+3A_all">all</code></td>
<td>
<p>list all tables available</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list (vector) of SQL table names 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AWP.list.SQL.tables(con=AWP.connect(), all=FALSE)

</code></pre>

<hr>
<h2 id='AWP.read.pkg.tab'>Read a table from the All the World's primates example microarchive within this package</h2><span id='topic+AWP.read.pkg.tab'></span>

<h3>Description</h3>

<p>Read an All the World's Primates table from the local package cache.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.read.pkg.tab(tab.nm='dbo_tblGrovesMonkeys', id.clmn=NA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.read.pkg.tab_+3A_tab.nm">tab.nm</code></td>
<td>
<p>table name</p>
</td></tr>
<tr><td><code id="AWP.read.pkg.tab_+3A_id.clmn">id.clmn</code></td>
<td>
<p>id column of table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame corresponding to SQL table
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
primates.tab &lt;- AWP.read.pkg.tab(tab.nm='dbo_tblGrovesMonkeys', id.clmn='MonkeyNumberGroves')


</code></pre>

<hr>
<h2 id='AWP.run.SQL'>Run SQL querries</h2><span id='topic+AWP.run.SQL'></span>

<h3>Description</h3>

<p>Run arbitrary SQL querries on the All the World's Primate database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AWP.run.SQL(con=AWP.connect(), sql=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AWP.run.SQL_+3A_con">con</code></td>
<td>
<p>connection object</p>
</td></tr>
<tr><td><code id="AWP.run.SQL_+3A_sql">sql</code></td>
<td>
<p>SQL string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>results of query
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
AWP.run.SQL(con=AWP.connect(), sql=NULL)

</code></pre>

<hr>
<h2 id='regroup.equivalent'>Re-group data.frame by Genus_species in either old or new dataframe</h2><span id='topic+regroup.equivalent'></span>

<h3>Description</h3>

<p>Regroup based on the old or the new data frame using a direction parameter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regroup.equivalent(df, gnsp.old, gnsp.new, clmns, agg='mean', direction='old2new')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regroup.equivalent_+3A_df">df</code></td>
<td>
<p>a dataframe</p>
</td></tr>
<tr><td><code id="regroup.equivalent_+3A_gnsp.old">gnsp.old</code></td>
<td>
<p>old nomenclature</p>
</td></tr>
<tr><td><code id="regroup.equivalent_+3A_gnsp.new">gnsp.new</code></td>
<td>
<p>new nomenclature</p>
</td></tr>
<tr><td><code id="regroup.equivalent_+3A_clmns">clmns</code></td>
<td>
<p>the columns in the data.frame to re-group</p>
</td></tr>
<tr><td><code id="regroup.equivalent_+3A_agg">agg</code></td>
<td>
<p>the aggregation type</p>
</td></tr>
<tr><td><code id="regroup.equivalent_+3A_direction">direction</code></td>
<td>
<p>the aggregation priority</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a regrouped data frame
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
primates.tab &lt;- AWP.read.pkg.tab(tab.nm='dbo_tblGrovesMonkeys', id.clmn='MonkeyNumberGroves')
primates.tab &lt;- add.gnsp.clmn(primates.tab,gn="Genus",sp="Species",rownames=FALSE,gnsp.col='gn_sp')
primates.tab &lt;- add.gnsp.clmn(primates.tab,gn="Genus",sp="Species",rownames=FALSE,gnsp.col='gnspg')
pri.grpd &lt;- regroup.gnsp(df=primates.tab,clmns=colnames(primates.tab), agg='max')
out &lt;- regroup.equivalent(pri.grpd, gnsp.old=gn_sp, gnsp.new='gnspg', 
                                    clmns='MonkeyNumberGroves', agg='paste', direction='old2new')

</code></pre>

<hr>
<h2 id='regroup.gnsp'>Re-group data.frame by Genus_species</h2><span id='topic+regroup.gnsp'></span>

<h3>Description</h3>

<p>Regroup a given data.frame by a column designated as unique genus_species combination. This function is essentially a wrapper for caroline:::groupBy()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>regroup.gnsp(df,clmns,agg='mean',by='gn_sp')
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="regroup.gnsp_+3A_df">df</code></td>
<td>
<p>a dataframe</p>
</td></tr>
<tr><td><code id="regroup.gnsp_+3A_clmns">clmns</code></td>
<td>
<p>columns</p>
</td></tr>
<tr><td><code id="regroup.gnsp_+3A_agg">agg</code></td>
<td>
<p>type of aggregation to be used</p>
</td></tr>
<tr><td><code id="regroup.gnsp_+3A_by">by</code></td>
<td>
<p>the column name by which the data.frame should be re-grouped</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returned value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

primates.tab &lt;- AWP.read.pkg.tab(tab.nm='dbo_tblGrovesMonkeys', id.clmn='MonkeyNumberGroves')
out &lt;- regroup.gnsp(df=primates.tab,clmns=colnames(primates.tab), agg='paste')

</code></pre>

<hr>
<h2 id='updatevals'>Update the values of an AWP data.frame</h2><span id='topic+updatevals'></span>

<h3>Description</h3>

<p>Update the values in an old dataframe with the values in a new dataframe.
Useful for comparing a pre-existing or self-assembled dataset with AWP.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>updatevals(x,y=NULL,v.old,v.new,verbose=TRUE,update=FALSE,
                    na.only=TRUE,all=TRUE,missing.only=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="updatevals_+3A_x">x</code></td>
<td>
<p>first dataframe</p>
</td></tr>
<tr><td><code id="updatevals_+3A_y">y</code></td>
<td>
<p>second dataframe</p>
</td></tr>
<tr><td><code id="updatevals_+3A_v.old">v.old</code></td>
<td>
<p>variable old</p>
</td></tr>
<tr><td><code id="updatevals_+3A_v.new">v.new</code></td>
<td>
<p>variable new</p>
</td></tr>
<tr><td><code id="updatevals_+3A_verbose">verbose</code></td>
<td>
<p>get all the messages</p>
</td></tr>
<tr><td><code id="updatevals_+3A_update">update</code></td>
<td>
<p>update all the old with everything new</p>
</td></tr>
<tr><td><code id="updatevals_+3A_na.only">na.only</code></td>
<td>
<p>just update the missing values in the old dataframe </p>
</td></tr>
<tr><td><code id="updatevals_+3A_all">all</code></td>
<td>
<p>perform merge on all columns</p>
</td></tr>
<tr><td><code id="updatevals_+3A_missing.only">missing.only</code></td>
<td>
<p>update only those that have missing values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>values of one data frame are updated to reflect new data in another
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pri.tab &lt;- AWP.read.pkg.tab(tab.nm='Locomotion')
#pri.AWP &lt;- AWP.get.SQL.table(tab.nm='Locomotion') 

dim(pri.tab) #should may be fewer cols or rows locally ...
#dim(pri.AWP) # than there are available online.

apply(pri.tab, 2, function(x) sum(is.na(x))) # also more missing values
#apply(pri.AWP, 2, function(x) sum(is.na(x))) #  locally than online

# update the "Comment" column locally with the same online

vars &lt;- c('LocomotionID','Comment')
#tmp &lt;- merge(x=pri.tab[,c(vars)] ,y=pri.AWP[,c(vars)], by='LocomotionID')

#out &lt;- updatevals(x=tmp,y=NULL,v.old='Comment.x',v.new='Comment.y')

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
