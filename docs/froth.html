<!DOCTYPE html><html><head><title>Help for package froth</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {froth}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#froth-package'><p>froth</p></a></li>
<li><a href='#froth-dictionary'>
<p>List/Export Installed froth Words</p></a></li>
<li><a href='#froth-parse-source'>
<p>Read/evaluate froth code from R</p></a></li>
<li><a href='#froth-reset'>
<p>Reset the froth session</p></a></li>
<li><a href='#froth-RInterface'>
<p>Interface with froth from R</p></a></li>
<li><a href='#save-load-froth'>
<p>Save/Load froth Sessions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Emulate a 'Forth' Programming Environment</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Emulates a 'Forth' programming environment with added features to 
  interface between R and 'Forth'. Implements most of the functionality described 
  in the original "Starting Forth" textbook <a href="https://www.forth.com/starting-forth/">https://www.forth.com/starting-forth/</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>markdown, knitr</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.ahl27.com/froth/">https://www.ahl27.com/froth/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ahl27/froth/issues/new/choose">https://github.com/ahl27/froth/issues/new/choose</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-04 15:18:34 UTC; aidan</td>
</tr>
<tr>
<td>Author:</td>
<td>Aidan Lakshman <a href="https://orcid.org/0000-0002-9465-6785"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Aidan Lakshman &lt;ahl27@pitt.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-04 15:40:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='froth-package'>froth</h2><span id='topic+froth-package'></span><span id='topic+froth'></span>

<h3>Description</h3>

<p><img src="../help/figures/froth.png" alt='logo' width='120' />
</p>
<p><code>froth</code> is a Forth implementation that runs on top of R. This allows users to enjoy the fun of stack-oriented program from within the comfort of R.
</p>
<p>You can start a REPL by running <code>froth()</code> in the terminal. Future additions will add the ability to execute forth scripts.
</p>
<p>Running on top of R provides a few key differences relative to other FORTH implementations:
</p>

<ul>
<li><p> Data can contain arbitrary R objects. Froth searches its dictionary, user-defined words, variables, and then R session variables when deciding how to handle each input word.
</p>
</li>
<li><p> R handling of objects. This means that all numerical inputs are inherently identical to R numbers. No need for double-size values, and division operators use R methods by default (so <code>3 2 /</code> will return <code>1.5</code>, not <code>1</code>)
</p>
</li>
<li><p> Interpreted loops, meaning loops are supported both inside and outside definitions.
</p>
</li>
<li><p> No direct memory access.
</p>
</li>
<li><p> Support for saving arbitrary R objects in variable arrays.
</p>
</li>
<li><p> Support for R print methods using the <code>.R</code> word.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>## Start a froth REPL
froth()
</code></pre>


<h3>Value</h3>

<p>None; operations within the REPL will only modify the internal <code>froth</code> stack.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/ahl27/froth">https://github.com/ahl27/froth</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ahl27/froth/issues">https://github.com/ahl27/froth/issues</a>
</p>
</li>
<li> <p><a href="https://www.ahl27.com">https://www.ahl27.com</a>
</p>
</li></ul>


<hr>
<h2 id='froth-dictionary'>
List/Export Installed froth Words
</h2><span id='topic+froth.dictionary'></span><span id='topic+writeFrothDictionary'></span>

<h3>Description</h3>

<p>Functions to inspect and save installed froth words.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>froth.dictionary()
writeFrothDictionary(file="", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="froth-dictionary_+3A_file">file</code></td>
<td>
<p> file to write to, or &quot;&quot; for the console </p>
</td></tr>
<tr><td><code id="froth-dictionary_+3A_...">...</code></td>
<td>
<p> additional arguments passed to <code><a href="base.html#topic+cat">cat</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>froth.dictionary</code> will list all installed words, grouped by their type (built-in, alias, user-defined).
</p>
<p><code>writeFrothDictionary</code> allows users to export their function definitions. The default argument will print out user-defined definitions to the console. This output can be redirected to a file by changing the <code>file</code> argument.
</p>


<h3>Value</h3>

<p>None. <code>froth.dictionary</code> lists all installed words using <code><a href="base.html#topic+message">message</a></code>, and <code>writeFrothDictionary</code> either prints to the console or to a file.
</p>


<h3>Author(s)</h3>

<p>Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveFrothSession">saveFrothSession</a></code>
<code><a href="#topic+loadFrothSession">loadFrothSession</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Show all words
froth.dictionary()

## Define a few new words
froth.parse(": MAKE_THREE 1 2 + . ;")
froth.parse(": MAKE_FIVE 2 3 + . ;")

## print out definition
writeFrothDictionary()
</code></pre>

<hr>
<h2 id='froth-parse-source'>
Read/evaluate froth code from R
</h2><span id='topic+froth.parse'></span><span id='topic+froth.source'></span>

<h3>Description</h3>

<p>Function to run froth code from R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>froth.parse(inputline)
froth.source(filepath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="froth-parse-source_+3A_inputline">inputline</code></td>
<td>
<p> A string to parse with froth </p>
</td></tr>
<tr><td><code id="froth-parse-source_+3A_filepath">filepath</code></td>
<td>
<p> Path to a file containing froth or FORTH code to parse with froth </p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions run the froth interpreter on strings read in either as arguments (<code>froth.parse</code>) or from a file (<code>froth.source</code>). Both functions will run froth code without having to enter the REPL.
</p>


<h3>Value</h3>

<p>Invisibly returns an integer status code, with 0 corresponding to normal execution.
</p>


<h3>Author(s)</h3>

<p>Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Add two numbers
froth.parse("1 2 + .")

## source a function to print a ASCII table called 'rect'
tf &lt;- tempfile()
defn &lt;- ': RECT 256 0 DO I 16 MOD 0= IF CR THEN ." * " LOOP ;'
writeLines(defn, con=tf)
froth.source(tf)
froth.parse('rect')
</code></pre>

<hr>
<h2 id='froth-reset'>
Reset the froth session
</h2><span id='topic+froth.reset'></span>

<h3>Description</h3>

<p>Resets the froth session to defaults. This deletes any user-defined functions and variables, and clears the stack.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>froth.reset()
</code></pre>


<h3>Value</h3>

<p>None; called to reset internal froth stacks.
</p>


<h3>Author(s)</h3>

<p>Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>froth.RDefine("rnorm", rnorm, 3L)
froth.reset()
froth.parse("5 0 1 rnorm .s")
# fr&gt; rnorm ?
</code></pre>

<hr>
<h2 id='froth-RInterface'>
Interface with froth from R
</h2><span id='topic+froth.RDefine'></span><span id='topic+froth.RPush'></span><span id='topic+froth.RPop'></span>

<h3>Description</h3>

<p>Methods to communicate with the froth environment without dropping into a REPL.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>froth.RPush(object)
froth.RPop(nobj=1L)
froth.RDefine(name, fun, nargs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="froth-RInterface_+3A_object">object</code></td>
<td>
<p> An R object to push to the froth stack </p>
</td></tr>
<tr><td><code id="froth-RInterface_+3A_nobj">nobj</code></td>
<td>
<p> Number of objects to pop from the froth stack </p>
</td></tr>
<tr><td><code id="froth-RInterface_+3A_name">name</code></td>
<td>
<p> Froth name for <code>fun</code>; see Examples </p>
</td></tr>
<tr><td><code id="froth-RInterface_+3A_fun">fun</code></td>
<td>
<p> An R function to define within froth </p>
</td></tr>
<tr><td><code id="froth-RInterface_+3A_nargs">nargs</code></td>
<td>
<p> Number of arguments expected for <code>fun</code> </p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions allow interaction with the froth stack from R. <code>froth.RPush</code> and <code>froth.RPop</code> allow push/pop operations on the froth stack. These operations are called from R, so pushing any R object is supported.
</p>
<p>Some functions are easier to define using R than froth. <code>froth.RDefine</code> creates a froth function wrapper to call a specified R function, and then builds it into the froth environment. This makes using functions like <code><a href="stats.html#topic+rnorm">rnorm</a></code> within froth easier; see below for an illustrative example.
</p>
<p>Functions defined with <code>froth.RDefine</code> expect their arguments to be popped directly off the froth stack, with the top of the stack corresponding to the last argument of the function.
</p>


<h3>Value</h3>

<p><code>froth.RPop</code> returns a list with the top <code>nobj</code> elements of the stack.
</p>
<p><code>froth.RPush</code> and <code>froth.RDefine</code> invisibly return an integer corresponding to the status of the operation. 0 indicates normal completion.
</p>


<h3>Note</h3>

<p>Functions defined with <code>froth.RDefine</code> will not be saved using <code><a href="#topic+saveFrothSession">saveFrothSession</a></code>.
</p>


<h3>Author(s)</h3>

<p>Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example of calling rnorm in froth

## rnorm expects 3 arguments: rnorm(n, mean, sd)
froth.RDefine(name='R_rnorm', fun=rnorm, nargs=3L)

## Now we can call rnorm from froth using the 'R_rnorm' word.
## Note that the arguments are expected on the stack
## such that the top of the stack is `sd`,
## the second is `mean`, and the third is `n`.

## n
froth.RPush(5)

## mean
froth.RPush(0.0)

## sd
froth.RPush(1.0)

## running the function
## note this will push the results back onto the stack
froth.parse("R_rnorm")

## we can get the result with froth.RPop
froth.RPop(5L)

## As a oneliner: (doesn't return the values)
froth.parse("5 0 1 R_rnorm .s")
</code></pre>

<hr>
<h2 id='save-load-froth'>
Save/Load froth Sessions
</h2><span id='topic+save-load-froth'></span><span id='topic+saveFrothSession'></span><span id='topic+loadFrothSession'></span>

<h3>Description</h3>

<p>Methods to preserve user-defined entries and variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveFrothSession(file=NULL, ...)
loadFrothSession(file=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="save-load-froth_+3A_file">file</code></td>
<td>
<p> Path to a file used for saving/loading </p>
</td></tr>
<tr><td><code id="save-load-froth_+3A_...">...</code></td>
<td>
<p> Additional arguments passed to <code><a href="base.html#topic+saveRDS">saveRDS</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>saveFrothSession</code> saves current user-defined methods and variables within the Froth dictionary to the file specified. Built-in methods are loaded when the package is attached, so these aren't saved. Note that methods defined using <code><a href="#topic+froth.RDefine">froth.RDefine</a></code> are currently not able to be saved.
</p>
<p><code>loadFrothSession</code> will restart the froth environment, which will erase any current user-defined methods and variables. It then loads the contents of the the file specified into the current Froth session.
</p>


<h3>Value</h3>

<p>None. <code>loadFrothSession</code> will update internal froth stacks, and <code>saveFrothSession</code> will save to a file.
</p>


<h3>Author(s)</h3>

<p>Aidan Lakshman <a href="mailto:ahl27@pitt.edu">ahl27@pitt.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  tf &lt;- tempfile()
  froth.RDefine('rnorm', rnorm, 3L)
  saveFrothSession(tf)
  froth.reset()
  froth.parse("5 0 1 rnorm .s")
  # fr&gt; rnorm ?

  loadFrothSession(tf)
  froth.parse("5 0 1 rnorm .s")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
