<!DOCTYPE html><html><head><title>Help for package decorators</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {decorators}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#time_it'><p>Measure Execution Time of Functions</p></a></li>
<li><a href='#validate_arguments'><p>Validate the Type of Input Arguments</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Extend the Behaviour of a Function without Explicitly Modifying
it</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-09-23</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Harel Lustiger &lt;tidylab@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A decorator is a function that receives a function, extends
    its behaviour, and returned the altered function. Any caller that uses
    the decorated function uses the same interface as it were the
    original, undecorated function. Decorators serve two primary uses: (1)
    Enhancing the response of a function as it sends data to a second
    component; (2) Supporting multiple optional behaviours. An example of
    the first use is a timer decorator that runs a function, outputs its
    execution time on the console, and returns the original function's
    result. An example of the second use is input type validation
    decorator that during running time tests whether the caller has passed
    input arguments of a particular class.  Decorators can reduce
    execution time, say by memoization, or reduce bugs by adding defensive
    programming routines.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://tidylab.github.io/decorators/">https://tidylab.github.io/decorators/</a>,
<a href="https://github.com/tidylab/decorators">https://github.com/tidylab/decorators</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/tidylab/decorators/issues">https://github.com/tidylab/decorators/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>purrr, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-30 15:31:29 UTC; BETA</td>
</tr>
<tr>
<td>Author:</td>
<td>Harel Lustiger <a href="https://orcid.org/0000-0003-2953-9598"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Tidylab [cph, fnd]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-30 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span><span id='topic++25+7C+7C+25'></span>

<h3>Description</h3>

<p>Pipe operator
</p>
<p>NULL operator
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs

x %||% y
</code></pre>


<h3>Value</h3>

<p>The result of <code>rhs(lfs)</code>.
</p>
<p>If <code>rhs</code> is NULL, will return <code>lhs</code>; otherwise returns <code>rhs</code>.
</p>

<hr>
<h2 id='time_it'>Measure Execution Time of Functions</h2><span id='topic+time_it'></span>

<h3>Description</h3>

<p>Wrap a function with a timer.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>time_it(func, units = "auto", digits = 2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="time_it_+3A_func">func</code></td>
<td>
<p>(<code>function</code>) A function to decorate.</p>
</td></tr>
<tr><td><code id="time_it_+3A_units">units</code></td>
<td>
<p>(<code>character</code>) Units in which the results are desired, including:
<code>"auto"</code>, <code>"secs"</code>, <code>"mins"</code>, <code>"hours"</code>, <code>"days"</code>,
and <code>"weeks"</code>. See <a href="base.html#topic+difftime">difftime</a>.</p>
</td></tr>
<tr><td><code id="time_it_+3A_digits">digits</code></td>
<td>
<p>(<code>integer</code>) The number of significant digits to be used. See
<a href="base.html#topic+signif">signif</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>closure</code>) An object that contains the original function bound to the environment of the decorator.
</p>


<h3>References</h3>


<ul>
<li> <p><a href="https://docs.python.org/3/library/timeit.html">timeit Python module</a>
</p>
</li>
<li> <p><a href="http://adv-r.had.co.nz/Functional-programming.html">Closures in R</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>Sys.sleep &lt;- time_it(base::Sys.sleep)
Sys.sleep(0.1)
</code></pre>

<hr>
<h2 id='validate_arguments'>Validate the Type of Input Arguments</h2><span id='topic+validate_arguments'></span>

<h3>Description</h3>

<p>Wrap a function with a input validation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_arguments(func)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_arguments_+3A_func">func</code></td>
<td>
<p>(<code>function</code>) A function to decorate.</p>
</td></tr>
</table>


<h3>Details</h3>


<!-- One line about what the function does -->

<p><code>validate_arguments</code> decorator allows the arguments passed to a function
to be parsed and validated using the functionâ€™s annotations before the
function is called.
</p>


<h4>How It Works</h4>

<p><code>validate_arguments</code> provides an extremely easy way to apply validation
to your code with minimal boilerplate. The original function needs to
have key-value pairs in its declaration, where the each value carries
its designated class.
</p>



<h4>When to Use It</h4>


<ul>
<li><p> To protect functions from receiving unexpected types of input
arguments.
</p>
</li>
<li><p> In
<a href="https://tidylab.github.io/R6P/reference/ValueObject.html"><code>ValueObjects</code></a>.
</p>
</li></ul>




<h4>Examples: Functions with Built-in NA classes</h4>

<p>Given a <code>Customer</code>
<a href="https://tidylab.github.io/R6P/reference/ValueObject.html"><code>ValueObject</code></a>
</p>
<div class="sourceCode r"><pre>Customer &lt;- function(given = NA_character_, family = NA_character_)
    return(data.frame(given = given, family = family))
</pre></div>
<p>When <code>Customer</code> is decorated with <code>validate_arguments</code>
</p>
<div class="sourceCode r"><pre>Customer &lt;- validate_arguments(Customer)
</pre></div>
<p>Then passing arguments of any type other then the declared type prompts
an informative error.
</p>
<p>In the <code>Customer</code> example, both input arguments <code>given</code> and <code>family</code> are
declared as <code>character</code>.
</p>
<div class="sourceCode r"><pre>Customer(given = "Bilbo", family = "Baggins") # Works as both arguments are character
#&gt;   given  family
#&gt; 1 Bilbo Baggins
try(Customer(given = "Bilbo", family = 90201)) # Fails because family is not a character
#&gt; Error in Customer(given = "Bilbo", family = 90201) : 
#&gt;   family is of type `numeric` rather than `character`!
</pre></div>



<h3>Value</h3>

<p>(<code>closure</code>) An object that contains the original function bound to the environment of the decorator.
</p>


<h3>Note</h3>

<p>The original function must have default values of the designated type.
</p>


<h3>References</h3>


<ul>
<li> <p><a href="https://pydantic-docs.helpmanual.io/usage/validation_decorator/">Similar Python module</a>
</p>
</li>
<li> <p><a href="http://adv-r.had.co.nz/Functional-programming.html">Closures in R</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>Car &lt;- function(model = NA_character_, hp = NA_real_){
    return(data.frame(model = model, hp = hp))
}

Car &lt;- validate_arguments(Car)
try(Car(model = 555, hp = 120)) # fails because model is numeric rather than character

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
