<!DOCTYPE html><html><head><title>Help for package mlma</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mlma}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mlma-package'>
<p>Multilevel Mediation Analysis</p></a></li>
<li><a href='#boot.mlma'>
<p>Bootstrap Method for Inference on Multilevel Mediation Analysis</p></a></li>
<li><a href='#data.org'>
<p>Transform and Organize Data for Mediation Analysis</p></a></li>
<li><a href='#joint.effect'>
<p>Find the joint effect of a list of mediators.</p></a></li>
<li><a href='#mlma'>
<p>Multilevel Mediation Analysis</p></a></li>
<li><a href='#plot.mlma'>
<p>Plot &quot;mlma&quot; Object</p></a></li>
<li><a href='#plot.mlma.boot'>
<p>Plot the &quot;mlma.boot&quot; Object</p></a></li>
<li><a href='#print.mlma'>
<p>Print &quot;mlma&quot; Object</p></a></li>
<li><a href='#print.mlma.boot'>
<p>Print &quot;mlma.boot&quot; Object</p></a></li>
<li><a href='#sim.111'>
<p>Simulated 1-1-1 Data set</p></a></li>
<li><a href='#sim.211'>
<p>Simulated 2-1-1 Data</p></a></li>
<li><a href='#summary.mlma'>
<p>Summary of &quot;mlma&quot; Object</p></a></li>
<li><a href='#summary.mlma.boot'>
<p>Summary of &quot;mlma.boot&quot; Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Multilevel Mediation Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>6.3-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-29</td>
</tr>
<tr>
<td>Author:</td>
<td>Qingzhao Yu, Bin Li</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Qingzhao Yu &lt;qyu@lsuhsc.edu&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.14.1), lme4, car, abind, coxme, gplots</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, splines</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Description:</td>
<td>Do multilevel mediation analysis with generalized additive multilevel models. The analysis method is described in Yu and Li (2020), "Third-Variable Effect Analysis with Multilevel Additive Models", PLoS ONE 15(10): e0241072.  </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cran.r-project.org/package=mlma">https://cran.r-project.org/package=mlma</a>,
<a href="https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html">https://publichealth.lsuhsc.edu/Faculty_pages/qyu/index.html</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-29 19:47:41 UTC; qyu</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-29 20:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mlma-package'>
Multilevel Mediation Analysis
</h2><span id='topic+mlma-package'></span>

<h3>Description</h3>

<p>The package is used to do mediation analysis with generalized multilevel models.
</p>


<h3>Details</h3>

<p><code>"<a href="#topic+data.org">data.org</a>"</code> is used to transform the variables and organize the predictor, mediators and outcome into the format that are ready to be used for multilevel mediation analysis. <code>"<a href="#topic+mlma">mlma</a>"</code> is for multilevel mediation analysis on the original data set. <code>"<a href="#topic+boot.mlma">boot.mlma</a>"</code> is a combined function that organized data set, do multilevel mediation analysis on original data sets and bootstrapping samples.
</p>
<p>The multilevel mediation is based on the following linear multilevel additive models:
</p>
<p style="text-align: center;"><code class="reqn">Y_{ij} = u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j})+{\boldsymbol{\beta}_{10}^Y}^T\mathbf{f}_{10}^Y(X_{ij}-X_{.j})+\sum_{k=1}^K{\boldsymbol{\beta}_{20k}^Y}^T\mathbf{f}_{20k}^Y(M_{ijk}-M_{.jk})+{\boldsymbol{\beta}_{30}^Y}^T(\mathbf{Z}_{ij}-\mathbf{Z}_{.j})+r_{ij}^Y,</code>
</p>

<p>where </p>
<p style="text-align: center;"><code class="reqn">u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j}) = c_{00}^Y + {\boldsymbol{\beta}_{01}^Y}^T\mathbf{f}_{01}^Y(X_{.j}) + \sum_{k=1}^K{\boldsymbol{\beta}_{02k}^Y}^T\mathbf{f}_{02k}^Y(M_{.jk}) + {\boldsymbol{\beta}_{03}^Y}^T\mathbf{Z}_{.j} + r_{0j}^Y.</code>
</p>

<p>For <code class="reqn">k=1,\ldots,K,</code>
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = u_{0jk}^M(X_{.j})+{\boldsymbol{\beta}_{10k}^M}^T\mathbf{f}_{10k}^M(X_{ij}-X_{.j})+r_{ijk}^M,</code>
</p>

<p style="text-align: center;"><code class="reqn">u_{0jk}^M(X_{.j}) = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M1}(X_{.j}) + r_{0jk}^M.</code>
</p>

<p>If for some k, <code class="reqn">M_k</code> is level 2 variable,
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M2}(X_{.j}) + r_{0jk}^M.</code>
</p>
 
<p>Note that in the models, <code class="reqn">\mathbf{f}(\cdot)=(f_1(\cdot), f_2(\cdot), \cdots, f_l(\cdot))^T</code> is a set of l transformation functions on <code class="reqn">\cdot</code>, with the corresponding linear coefficients vector <code class="reqn">\boldsymbol{\beta}=(\beta_1, \beta_2, \cdots, \beta_l)^T</code>. <code class="reqn">\mathbf{f}</code> and l are known for model fitting. l may be different with <code class="reqn">\mathbf{f}</code> of different sub- and super-scripts.</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>, Bin Li <a href="mailto:bli@lsu.edu">bli@lsu.edu</a>
</p>
<p>Maintainer: Qingzhao Yu  <a href="mailto:qyu@lsuhsc.edu">qyu@lsuhsc.edu</a>
</p>


<h3>References</h3>

<p>Yu, Q. and Li, B., (2020). &lt;doi:10.1371/journal.pone.0241072&gt;. &quot;Third-Variable Effect Analysis with Multilevel Additive Models,&quot; PLoS ONE 15(10): e0241072.
</p>
<p>Yu, Q., Yu, M., Zou, J., Wu, X., Gomez, SL, Li, B. (2021). &lt;doi:10.1177/26320843211061292&gt;. &quot;Multilevel Mediation Analysis on Time-to-Event Outcomes - Exploring racial/ethnic Disparities in Breast Cancer Survival in California,&quot; Research Methods in Medicine &amp; Health Sciences. 
</p>
<p>Yu, Q. and Li, B., 2022. Statistical Methods for Mediation, Confounding and Moderation Analysis Using R and SAS. Chapman and Hall/CRC. ISBN 9780367365479.
</p>

<hr>
<h2 id='boot.mlma'>
Bootstrap Method for Inference on Multilevel Mediation Analysis
</h2><span id='topic+boot.mlma'></span>

<h3>Description</h3>

<p>Bootstrap samples are selected from the original data set. The bootstrap sample has the same number of groups and in each group, the same number of observations as in the original data set. Based on each bootstrap sample, a multilevel mediation analysis is done and the results saved to make inferences on the total, direct and indirect effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>boot.mlma(y, data1=NULL,x=data1$parameter$x, m=data1$parameter$m, 
          levelx=data1$parameter$levelx, levely=data1$parameter$levely,
          xref=NULL, yref=NULL, 
          l1=data1$parameter$l1,l2=data1$parameter$l2, 
          c1=data1$parameter$c1, #levelx is the level of x
          c1r=data1$parameter$c1r, c2=data1$parameter$c2, 
          c2r=data1$parameter$c2r,level=data1$parameter$level,  
          weight=rep(1,nrow(as.matrix(x))), 
          random="(1|level)", random.m1=NULL,intercept=TRUE, 
          family1=NULL, familym=vector("list",ncol(m)),
          covariates=NULL, cy1=NULL, cy2=NULL, cm=NULL,
          joint=NULL,f01y=data1$parameter$f01y,
          f10y=data1$parameter$f10y, f02ky=data1$parameter$f02ky, 
          f20ky=data1$parameter$f20ky, f01km1=data1$parameter$f01km1, 
          f01km2=data1$parameter$f01km2, f10km=data1$parameter$f10km,
          data2=NULL, x.new=NULL, m.new=m, level.new=level, 
          weight.new=NULL,covariates.new=covariates,boot=100,echo=TRUE, 
          plot.it=TRUE, cov.mat=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boot.mlma_+3A_y">y</code></td>
<td>

<p>the vector of the outcome variable.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_data1">data1</code></td>
<td>

<p>the results from data.org. If data1=NULL, needs to set up x, m, levelx, xref, l1, l2, c1,c2, c2r, f01y, f10y, f02ky, f20ky, f01km1, f01km2, f10km ...
</p>
</td></tr>  
<tr><td><code id="boot.mlma_+3A_x">x</code></td>
<td>

<p>the vector of the predictive variable.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_m">m</code></td>
<td>

<p>the mediators. The program will identify the levels and types of each mediator if not specified by l1, l2, c1, or c2. A mediator is identified as categorical if the mediator is a factor, a character, or has only two unque values.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_levelx">levelx</code></td>
<td>

<p>the level of x (1 or 2). If it is not given, levelx will be decided by x.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_levely">levely</code></td>
<td>

<p>the level of y (1 or 2). If it is not given, levely will be decided by y.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_xref">xref</code></td>
<td>

<p>the reference group of x if it is binary. By default it will be the first level of x.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_yref">yref</code></td>
<td>

<p>the reference group of y if it is binary. By default it will be the first level of y.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_l1">l1</code></td>
<td>

<p>the column numbers of level 1 continuous mediators in m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_l2">l2</code></td>
<td>

<p>the column numbers of level 2 continuous mediators in m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_c1">c1</code></td>
<td>

<p>the column numbers of level 1 categorical mediators in m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_c1r">c1r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c1.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_c2">c2</code></td>
<td>

<p>the column numbers of level 2 categorical mediators in m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_c2r">c2r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c2.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_f01y">f01y</code>, <code id="boot.mlma_+3A_f10y">f10y</code>, <code id="boot.mlma_+3A_f02ky">f02ky</code>, <code id="boot.mlma_+3A_f20ky">f20ky</code>, <code id="boot.mlma_+3A_f01km1">f01km1</code>, <code id="boot.mlma_+3A_f01km2">f01km2</code>, <code id="boot.mlma_+3A_f10km">f10km</code></td>
<td>

<p>the transformation functions as describe in the function <code>"<a href="#topic+data.org">data.org</a>"</code>.  Need these arguments only when org.data=T.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_level">level</code></td>
<td>

<p>a vector that record the group number for each observation.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_weight">weight</code></td>
<td>

<p>the weight of cases in groups.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_random">random</code></td>
<td>

<p>the random effect part for the full model. random = &quot;(1|level)&quot; by default.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_random.m1">random.m1</code></td>
<td>

<p>the random effect part for model explaining the mediators. All other random effects are random = &quot;(1|level)&quot; if not specified here.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_intercept">intercept</code></td>
<td>

<p>True if fit an intercept to models, by default.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_family1">family1</code></td>
<td>

<p>the glm family for the response variable y. If it is null, will be binomial with logic link for binary y and gaussian with identity link for continuous y.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_familym">familym</code></td>
<td>

<p>a list of length ncol(m), each item gives the glm family for the corresponding column of m. If an item is null, the family will be binomial with logic link for binary m and gaussian with identity link for continuous m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_boot">boot</code></td>
<td>

<p>the number of bootstrapping samples.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_covariates">covariates</code></td>
<td>

<p>the covariates matrix to explain the outcome, y, and/or the mediators, m.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_cy1">cy1</code></td>
<td>

<p>the column numbers of covariates that are level 1 and used to explain y.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_cy2">cy2</code></td>
<td>

<p>the column numbers of covariates that are level 2 and used to explain y.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_cm">cm</code></td>
<td>

<p>the column numbers of covariates that are used to explain m. cm[[1]] gives the mediators (in l1, cl, l2, or c2) that can be partially explained by covariates. Each of the rest items of the cm list shows the column number(s) in covariates that should be used to explain each mediator listed in cm[[1]] and by that order.For example, joint=list(1,c(&quot;m.2&quot;,&quot;m.4&quot;)) means find the joint effects of level 1 mediators m.2 and m.4.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_joint">joint</code></td>
<td>

<p>the list of group(s) of mediators whose joint mediation effect is of interests. joint[[1]] list the levels of mediators in each group and by the order of the list. Note that if any mediator in the group is of level 2, the level of the group should be 2.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_data2">data2</code></td>
<td>

<p>the results from data.org on x.new, covariates.new, m.new, level.new, and weight.new. If data1=NULL, needs to rerun data.org on the new data. If x.new is also NULL, set data2=data1. The new data is the same as the old data.
</p>
</td></tr>  
<tr><td><code id="boot.mlma_+3A_x.new">x.new</code>, <code id="boot.mlma_+3A_covariates.new">covariates.new</code>, <code id="boot.mlma_+3A_m.new">m.new</code>, <code id="boot.mlma_+3A_level.new">level.new</code>, <code id="boot.mlma_+3A_weight.new">weight.new</code></td>
<td>

<p>the settings that we want to make inferences on the mediation effects. If m.new=NULL, generate new mediators from x.new.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_echo">echo</code></td>
<td>

<p>print a i when finish the ith bootstrap estimation if echo=T.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_plot.it">plot.it</code></td>
<td>

<p>If true, middle results will be stored for future use to plot confidence intervals.
</p>
</td></tr>
<tr><td><code id="boot.mlma_+3A_cov.mat">cov.mat</code></td>
<td>

<p>If true, the result on full dataset include the estimation of variances through normal approximation.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The multilevel mediation is based on the following linear multilevel additive models:
</p>
<p style="text-align: center;"><code class="reqn">Y_{ij} = u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j})+{\boldsymbol{\beta}_{10}^Y}^T\mathbf{f}_{10}^Y(X_{ij}-X_{.j})+\sum_{k=1}^K{\boldsymbol{\beta}_{20k}^Y}^T\mathbf{f}_{20k}^Y(M_{ijk}-M_{.jk})+{\boldsymbol{\beta}_{30}^Y}^T(\mathbf{Z}_{ij}-\mathbf{Z}_{.j})+r_{ij}^Y,</code>
</p>

<p>where </p>
<p style="text-align: center;"><code class="reqn">u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j}) = c_{00}^Y + {\boldsymbol{\beta}_{01}^Y}^T\mathbf{f}_{01}^Y(X_{.j}) + \sum_{k=1}^K{\boldsymbol{\beta}_{02k}^Y}^T\mathbf{f}_{02k}^Y(M_{.jk}) + {\boldsymbol{\beta}_{03}^Y}^T\mathbf{Z}_{.j} + r_{0j}^Y.</code>
</p>

<p>For <code class="reqn">k=1,\ldots,K,</code>
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = u_{0jk}^M(X_{.j})+{\boldsymbol{\beta}_{10k}^M}^T\mathbf{f}_{10k}^M(X_{ij}-X_{.j})+r_{ijk}^M,</code>
</p>

<p style="text-align: center;"><code class="reqn">u_{0jk}^M(X_{.j}) = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M1}(X_{.j}) + r_{0jk}^M.</code>
</p>

<p>If for some k, <code class="reqn">M_k</code> is level 2 variable,
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M2}(X_{.j}) + r_{0jk}^M.</code>
</p>
 
<p>Note that in the models, <code class="reqn">\mathbf{f}(\cdot)=(f_1(\cdot), f_2(\cdot), \cdots, f_l(\cdot))^T</code> is a set of l transformation functions on <code class="reqn">\cdot</code>, with the corresponding linear coefficients vector <code class="reqn">\boldsymbol{\beta}=(\beta_1, \beta_2, \cdots, \beta_l)^T</code>. <code class="reqn">\mathbf{f}</code> and l are known for model fitting. l may be different with <code class="reqn">\mathbf{f}</code> of different sub- and super-scripts.</p>


<h3>Value</h3>

<p>Return a &quot;mlma.boot&quot; mode list, which include the following items:
</p>
<table>
<tr><td><code>de1</code></td>
<td>
<p>direct effect(s) of level 1 exposure(s). de1 is a matrix of dimension n times boot by nx1, where n is the number of observations, and nx1 is the number of level 1 exposures. boot is the number of bootstrap samples.</p>
</td></tr>
<tr><td><code>de2</code></td>
<td>
<p>direct effect(s) of level 2 exposure(s). de2 is a matrix of dimension n2 times boot by nx2, where n2 is the number of unique levels, and nx2 is the number of level 2 exposures.</p>
</td></tr>
<tr><td><code>ade1</code></td>
<td>
<p>average direct effect(s) of level 1 exposure(s). ade1 is a matrix of dimension boot by nx1.</p>
</td></tr>
<tr><td><code>ade2</code></td>
<td>
<p>average direct effect(s) of level 2 exposure(s). ade2 is a matric of dimension boot by nx2.</p>
</td></tr>
<tr><td><code>te1</code></td>
<td>
<p>total effect of each level 1 exposure. te1 is a matrix of dimension n times boot by nx1, where n is the number of observations, and nx1 is the number of level 1 exposures.</p>
</td></tr>
<tr><td><code>te2</code></td>
<td>
<p>total effect of each level 2 exposure. te2 is a matrix of dimension n2 times boot by nx2, where n2 is the number of unique levels, and nx2 is the number of level 2 exposures.</p>
</td></tr>
<tr><td><code>ate1</code></td>
<td>
<p>average total effect(s) of level 1 exposure(s). ate1 is a matrix of dimension boot by nx1.</p>
</td></tr>
<tr><td><code>ate2</code></td>
<td>
<p>average total effect(s) of level 2 exposure(s). ate2 is a matrix of dimension boot by nx2.</p>
</td></tr>
<tr><td><code>ie1</code></td>
<td>
<p>level 1 indirect effect from level 1 exposure(s) to level 1 mediator(s) on the outcome. ie1 is an array of dimension (n*boot,nm1,nx1), where nm1 is the number of level 1 mediators.</p>
</td></tr>
<tr><td><code>ie2</code></td>
<td>
<p>level 2 indirect effect from level 2 exposure(s) to level 2 mediator(s) on the outcome. ie2 is an array of dimension (n2*boot,nm2,nx2), where nm2 is the number of level 2 mediators.</p>
</td></tr>
<tr><td><code>ie12</code></td>
<td>
<p>level 2 indirect effect from level 2 exposure(s) to level 1 mediator(s) on the outcome. ie12 is an array of dimension (n2*boot,nm1,nx2).</p>
</td></tr>
<tr><td><code>aie1</code></td>
<td>
<p>level 1 average indirect effect from level 1 exposure(s) to level 1 mediator(s) on the outcome. aie1 is a matrix of dimension (nm1*boot,nx1).</p>
</td></tr>
<tr><td><code>aie2</code></td>
<td>
<p>level 2 average indirect effect from level 2 exposure(s) to level 2 mediator(s) on the outcome. aie2 is a matrix of dimension (nm2*boot,nx2).</p>
</td></tr>
<tr><td><code>aie12</code></td>
<td>
<p>level 2 average indirect effect from level 2 exposure(s) to level 1 mediator(s) on the outcome. aie12 is a matrix of dimension (nm1*boot,nx2).</p>
</td></tr>
<tr><td><code>je1</code></td>
<td>
<p>joint level 1 indirect effect from level 1 exposure(s) to joint level 1 mediators on the outcome. je1 is an array of dimension (n*boot,nj1,nx1), where nj1 is the number of groups of level 1 mediators.</p>
</td></tr>
<tr><td><code>je2</code></td>
<td>
<p>joint level 2 indirect effect from level 2 exposure(s) to joint level 2 mediators on the outcome. je2 is an array of dimension (n2*boot,nj2,nx2), where nj2 is the number of groups oflevel 2 mediators.</p>
</td></tr>
<tr><td><code>je12</code></td>
<td>
<p>joint level 2 indirect effect from level 2 exposure(s) to joint level 1 mediators on the outcome. je12 is an array of dimension (n2*boot,nj1,nx2).</p>
</td></tr>
<tr><td><code>aje1</code></td>
<td>
<p>average joint level 1 indirect effect from level 1 exposure(s) to joint level 1 mediators on the outcome. aje1 is a matrix of dimension (nj1*boot,nx1).</p>
</td></tr>
<tr><td><code>aje2</code></td>
<td>
<p>average joint level 2 indirect effect from level 2 exposure(s) to joint level 2 mediators on the outcome. je2 is a matrix of dimension (nj2*boot,nx2), where nj2 is the number of groups oflevel 2 mediators.</p>
</td></tr>
<tr><td><code>aje12</code></td>
<td>
<p>average joint level 2 indirect effect from level 2 exposure(s) to joint level 1 mediators on the outcome. je12 is a matrix of dimension (nj1*boot,nx2).</p>
</td></tr>
<tr><td><code>full</code></td>
<td>
<p>an &quot;mlma&quot; results using the original data set.</p>
</td></tr>
<tr><td><code>xboot</code></td>
<td>
<p>a n*boot vector of the level 1 predictors in all boot bootstrap samples.</p>
</td></tr>
<tr><td><code>xjboot</code></td>
<td>
<p>a g*boot vector of the (aggregated) level 2 predictors in all boot bootstrap samples.</p>
</td></tr>
<tr><td><code>levelx</code></td>
<td>
<p>inherited from the same argument.</p>
</td></tr>
<tr><td><code>level</code></td>
<td>
<p>inherited from the same argument.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
sim.111$m[,3]=as.factor(sim.111$m[,3])
data2&lt;-data.org(ifelse(sim.111$x&gt;1.9,1,0), m=sim.111$m, 
                f10y=list(1,c("x^2","sqrt(x+6)")), 
                f20ky=list(2,c("x","x^3")), 
                f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2.boot&lt;-boot.mlma(y=sim.111$y, data1=data2,boot=2,joint=list(1,1:2))


#can also do the above analysis using the following code
temp2.boot&lt;-boot.mlma(y=ifelse(sim.111$y&gt;4.5,1,0), x=sim.111$x, m=sim.111$m, 
            f10y=list(1,c("x^2","sqrt(x+6)")), 
            f20ky=list(2,c("x","x^3")), 
            f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level,boot=2)

#with a level 2 exposure
data(sim.211)
data1&lt;-data.org(x=ifelse(sim.211$x&gt;2.2,1,0), m=sim.211$m, 
                f02ky=list(1,c("x","x^2")),  
                f20ky=list(2,c("x","x^3")), f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),level=sim.211$level) 
temp1.boot&lt;-boot.mlma(y=sim.211$y, data1=data1,boot=2) 

#with both level 1 and 2 exposure
data3&lt;-data.org(x=cbind(sim.211$x,sim.111$x), m=sim.211$m, 
                f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3.boot&lt;-boot.mlma(y=sim.211$y, data1=data3,boot=2) 
</code></pre>

<hr>
<h2 id='data.org'>
Transform and Organize Data for Mediation Analysis
</h2><span id='topic+data.org'></span>

<h3>Description</h3>

<p>To transform variables and generate data sets for mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data.org(x, m, levely = 1, y = NULL, levelx = NULL, xref =
                    NULL, l1 = NULL, l2 = NULL, c1 = NULL, c1r = NULL, c2
                    = NULL, c2r = NULL, f01y = NULL, f10y = NULL, f02ky =
                    NULL, f20ky = NULL, f01km1 = NULL, f01km2 = NULL,
                    f10km = NULL, level = 1:nrow(as.matrix(x)), weight =
                    NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="data.org_+3A_x">x</code></td>
<td>

<p>the data frame of exposure variable(s). If there are multiple exposures, a categorical exposure should be binarized with the reference group coded as 0. 
</p>
</td></tr>
<tr><td><code id="data.org_+3A_m">m</code></td>
<td>

<p>the data frame of all mediators. The program will identify the levels and types of each mediator if not specified by l1, l2, c1, or c2. A mediator is identified as categorical if the mediator is a factor, a character, or has only two unque values. Note: the name for one mediator should NOT be the subset of the name of another mediator.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_levely">levely</code></td>
<td>

<p>the level of y (1 or 2), 1 by default. If it is NULL, levely will be decided automatically by y.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_y">y</code></td>
<td>

<p>only needed if levely is not given.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_levelx">levelx</code></td>
<td>

<p>the vector of levels of every column of x (1 or 2). If it is not given, levelx will be decided automaticaly. If there is only level 1 exposure, but there are level 2 mediator(s), the level 2 exposure will be created by aggregate all the level 1 exposure(s) to level 2.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_xref">xref</code></td>
<td>

<p>the reference group of x if it is a single binary variable. By default it will be the first level of x.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_l1">l1</code></td>
<td>

<p>the column numbers of level 1 continuous mediators in m or the list of names of the level 1 continuous mediators.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_l2">l2</code></td>
<td>

<p>the column numbers of level 2 continuous mediators in m or the list of names of the level 2 continuous mediators.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_c1">c1</code></td>
<td>

<p>the column numbers of level 1 categorical mediators in m or the list of names of the level 1 categorical mediators.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_c1r">c1r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c1.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_c2">c2</code></td>
<td>

<p>the column numbers of level 2 categorical mediators in m or the list of names of the level 2 categorical mediators.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_c2r">c2r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c2.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f01y">f01y</code></td>
<td>

<p>the transformation function expressions on level 2 exposures (x.jm) in explaining y (eg, list(1,c(&quot;x^2&quot;,&quot;log(x)&quot;))). The first item lists column numbers/variable names of the level 2 exposures in x, which needs to be transformed. By that order, each of the rest items of f01y list the transformation functional expressions for each exposure. The exposures not specified in the list will not be transformed in any way.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f10y">f10y</code></td>
<td>

<p>the transformation function expressions on level 1 exposure (xijm) in explaining y. (eg, list(2,c(&quot;x^2&quot;,&quot;log(x)&quot;))). The first item lists column numbers/variable names of the level 1 exposures in x, which needs to be transformed. By that order, each of the rest items of f10y list the transformation functional expressions for each exposure. The exposures not specified in the list will not be transformed in any way.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f02ky">f02ky</code></td>
<td>

<p>the transformation-function-expression list on level 2 mediators (m.jk) in explaining y (eg, list(2:3,c(&quot;log(x)&quot;,&quot;sqrt(x)&quot;), &quot;2*x&quot;)). The first item lists column numbers/variable names of the level 2 mediators in m, which needs to be transformed. By that order, each of the rest items of f02ky list the transformation functional expressions for each mediator. The mediators not specified in the list will not be transformed in any way.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f20ky">f20ky</code></td>
<td>

<p>the transformation-function-expression list on level 1 mediators (mijk-m.jk) in explaining y.The first item lists column numbers/variable names of the level 1 mediators in m, which needs to be transformed. By that order, each of the rest items of f20ky list the transformation functional expressions for each mediator. The mediators not specified in the list will not be transformed in any way.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f01km1">f01km1</code></td>
<td>

<p>the transformation-function-expression list on level 2 predictor (x.jm) in explaining the level 1 mediators. The first item is a matrix with two columns, the first column is the column numbers of the level 1 mediators in m, which should be explained by the transformed predictor(s). The second column indicates the column number of the exposure in x that will be transformed to explain the mediator identified by the 1st column of the same row. By the order of the rows of the first item, each of the rest items of f01km1 lists the transformation functional expressions for the level 2 exposure (identified by column 2) in explaining each mediator (identified by column 1). The mediators not specified in the list will be explained by the original format of the level 2 exposures. e.g.list(matrix(c(1,2,1,1),2,2), &quot;x^2&quot;,&quot;x^2&quot;) means x[,1]^2 is used to explain both m[,1] and m[,2].
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f01km2">f01km2</code></td>
<td>

<p>the transformation-function-expression list on level 2 predictor (x.jm) in explaining the level 2 mediators. The first item is a matrix with two columns, the first column is the column numbers of the level 2 mediators in m, which should be explained by the transformed predictor(s). The second column indicates the column number of the exposure in x that will be transformed to explain the mediator identified by the 1st column of the same row. By the order of the rows of the first item, each of the rest items of f01km2 lists the transformation functional expressions for the level 2 exposure (identified by column 2) in explaining each mediator (identified by column 1). The mediators not specified in the list will be explained by the original format of all level 2 exposures.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_f10km">f10km</code></td>
<td>

<p>the transformation-function-expression list on level 1 predictor (xijm) in explaining the level 1 mediators. The first item is a matrix with two columns, the first column is the column numbers of the level 1 mediators in m, which should be explained by the transformed level 1 exposure(s). The second column indicates the column number of the exposure in x that will be transformed to explain the mediator identified by the 1st column of the same row. By the order of the rows of the first item, each of the rest items of f10km lists the transformation functional expressions for the level 1 exposure (identified by column 2) in explaining each mediator (identified by column 1). The mediators not specified in the list will be explained by the original format of all level 1 exposures.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_level">level</code></td>
<td>

<p>a vector that record the group number for each observation.
</p>
</td></tr>
<tr><td><code id="data.org_+3A_weight">weight</code></td>
<td>

<p>the weight of cases in groups.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The arguments starting with &quot;f&quot; are used to specify the transformation functions of the predictor or mediators in explaining y, or the transformation functions of the predictor in explaining the mediators. If the name of the argument includes a &quot;k&quot;, the transformation is on the mediators.  If the names of the arguments end with &quot;y&quot;, the transformation is to explain the outcome. Otherwise, the transformation is on x to predict mediators (the argument ends with &quot;m1&quot; or &quot;m&quot; (for level 1 mediator), or &quot;m2&quot; (for level 2 mediator)). The functions corresponds to the functions in the following multilevel additive models, reading as f+subscript+superscript.  For example, f01y specifies <code class="reqn">{f}_{01}^Y</code>.
</p>
<p style="text-align: center;"><code class="reqn">Y_{ij} = u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j})+{\boldsymbol{\beta}_{10}^Y}^T\mathbf{f}_{10}^Y(X_{ij}-X_{.j})+\sum_{k=1}^K{\boldsymbol{\beta}_{20k}^Y}^T\mathbf{f}_{20k}^Y(M_{ijk}-M_{.jk})+{\boldsymbol{\beta}_{30}^Y}^T(\mathbf{Z}_{ij}-\mathbf{Z}_{.j})+r_{ij}^Y,</code>
</p>

<p>where </p>
<p style="text-align: center;"><code class="reqn">u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j}) = c_{00}^Y + {\boldsymbol{\beta}_{01}^Y}^T\mathbf{f}_{01}^Y(X_{.j}) + \sum_{k=1}^K{\boldsymbol{\beta}_{02k}^Y}^T\mathbf{f}_{02k}^Y(M_{.jk}) + {\boldsymbol{\beta}_{03}^Y}^T\mathbf{Z}_{.j} + r_{0j}^Y.</code>
</p>

<p>For <code class="reqn">k=1,\ldots,K,</code>
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = u_{0jk}^M(X_{.j})+{\boldsymbol{\beta}_{10k}^M}^T\mathbf{f}_{10k}^M(X_{ij}-X_{.j})+r_{ijk}^M,</code>
</p>

<p style="text-align: center;"><code class="reqn">u_{0jk}^M(X_{.j}) = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M1}(X_{.j}) + r_{0jk}^M.</code>
</p>

<p>If for some k, <code class="reqn">M_k</code> is level 2 variable,
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M2}(X_{.j}) + r_{0jk}^M.</code>
</p>
 
<p>The transformation function can be any function that is differentiable by the function deriv(), or the ifelse function with those functions. The transformation function can also be the ns() and bs() functions for natural and b spline basis.
</p>


<h3>Value</h3>

<p>The function returns a list with transformed and organized data with the following items:
</p>
<table>
<tr><td><code>x1</code></td>
<td>
<p>the level 1 and 2 transformed predictor variable matrix in explaining y (eg, f01y(x.j) &amp; f10y(xij)).</p>
</td></tr>
<tr><td><code>lx</code></td>
<td>
<p>a matrix with ncol(x) rows and three columns. The ith row is for the jth column of x. The first column of the ith row gives the level (1 or 2) of the ith column of x. lx[i,2]:lx[i,3] gives the column numbers of transformed ith x in x1.</p>
</td></tr>
<tr><td><code>m1y</code></td>
<td>
<p>the level 1 mediator matrix in explaining y (eg, f20ky(mijk-m.jk) &amp; mijk or binarized mijk for categorical mediators).</p>
</td></tr>
<tr><td><code>m1</code></td>
<td>
<p>a list where the first item identify column numbers of level 1 mediators in m (ie, c(l1,c1)). For every mediator identified by m1[[1]] and by that order, each of the rest item identify the column number(s) in m1y the (transformed) value(s) of the mediator in explaining y.</p>
</td></tr>
<tr><td><code>m2y</code></td>
<td>
<p>the level 2 mediator (original or aggregated) matrix in explaining y (eg, f02ky(m.jk) &amp; m.jk).</p>
</td></tr>
<tr><td><code>m2</code></td>
<td>
<p>a list where the first item identify column numbers of level 2 mediators in m (i.e., c(l2,c2)). For every mediator identified by m2[[1]] and by that order, each of the rest item identify the column number(s) in m2y the (transformed) value(s) of the mediator in explaining y.</p>
</td></tr>
<tr><td><code>xm1</code></td>
<td>
<p>the (transformed) level 1 and level 2 predictor(s) in explaining level 1 mediators.</p>
</td></tr>
<tr><td><code>fm11</code></td>
<td>
<p>a list where the first item identify column numbers of level 1 mediators in m. For every mediator identified by fm11[[1]] and by that order, each of the rest item identify the column number(s) in xm1 the (transformed) level 1 predictor(s) in explaining the mediator.</p>
</td></tr>
<tr><td><code>fm12</code></td>
<td>
<p>a list where the first item identify column numbers of level 1 mediators in m. For every mediator identified by fm12[[1]] and by that order, each of the rest item identify the column number(s) in xm1 the (transformed/aggregated) level 2 predictor(s) in explaining the mediator.</p>
</td></tr>
<tr><td><code>m.2</code></td>
<td>
<p>a matrix of level 2 mediators (one row for each group).</p>
</td></tr>
<tr><td><code>xm2</code></td>
<td>
<p>the (transformed/aggregated) level 2 predictor(s) in explaining level 2 mediators (one row for each group).</p>
</td></tr>
<tr><td><code>fm22</code></td>
<td>
<p>a list where the first item identify column numbers of level 2 mediators in m. For every mediator identified by fm22[[1]] and by that order, each of the rest item identify the column number(s) in xm2 the (transformed) level 2 predictor(s) in explaining the mediator.</p>
</td></tr>
<tr><td><code>x1.der</code>, <code>m2y.der</code>, <code>m1y.der</code>, <code>xm2.der</code>, <code>xm1.der</code></td>
<td>
<p>the derivative of x1, m2y, m1y, xm2, and xm1 respectively.</p>
</td></tr>
<tr><td><code>f01km1.2</code></td>
<td>
<p>the first item is f01km1[[1]]. The rest are the column numbers of f01km1[[i]] in xm1.</p>
</td></tr>
<tr><td><code>f01km2.2</code></td>
<td>
<p>the first item is f01km2[[1]]. The rest are the column numbers of f01km2[[i]] in xm2.</p>
</td></tr>
<tr><td><code>f10km.2</code></td>
<td>
<p>the first item is f10km[[1]]. The rest are the column numbers of f10km[[i]] in xm1.</p>
</td></tr>
<tr><td><code>binx</code></td>
<td>
<p>the ith item of binx is TRUE if the ith predictor is binary, otherwise is FALSE.</p>
</td></tr>
<tr><td><code>parameter</code></td>
<td>
<p>The list of all arguments.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.211)
example1&lt;-data.org(x=sim.211$x, m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), 
                   f02ky=list(1,c("x","x^2")),  
                   f20ky=list(2,c("x","x^3")), 
                   f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                   f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),
                   level=sim.211$level) 

data(sim.111)
example2&lt;-data.org(sim.111$x, m=sim.111$m, 
                   f10y=list(1,c("x^2","sqrt(x+6)")), 
                   f20ky=list(2,c("x","x^3")), 
                   f10km=list(matrix(c(2,1),1),"log(x+2)"), 
                   level=sim.111$level) #f01y=list(1,c("x","log(x^2)")),

example3&lt;-data.org(x=cbind(sim.211$x,sim.111$x), m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")), 
                   f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                   f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
</code></pre>

<hr>
<h2 id='joint.effect'>
Find the joint effect of a list of mediators.
</h2><span id='topic+joint.effect'></span><span id='topic+print.joint.effect'></span>

<h3>Description</h3>

<p>This function provides the inference information (estimation, standard deviation, etc.) for the joint and relative effect of a list of mediators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>joint.effect(object,var.list,digits=4,...,alpha=0.05)
## S3 method for class 'joint.effect'
print(x,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="joint.effect_+3A_object">object</code></td>
<td>

<p>an &quot;boot.mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="joint.effect_+3A_x">x</code></td>
<td>

<p>an &quot;joint.effect&quot; object from the joint.effect function.
</p>
</td></tr>
<tr><td><code id="joint.effect_+3A_var.list">var.list</code></td>
<td>

<p>a list of mediators whose joint effects are of interest.
</p>
</td></tr>
<tr><td><code id="joint.effect_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="joint.effect_+3A_alpha">alpha</code></td>
<td>

<p>the significance level at which to draw the confidence bands.  
</p>
</td></tr>
<tr><td><code id="joint.effect_+3A_digits">digits</code></td>
<td>

<p>number of digits to be printed.  
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
data(sim.211)
data3&lt;-data.org(x=cbind(ifelse(sim.211$x&gt;1.9,1,0),sim.111$x), m=sim.211$m, 
                f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3.boot&lt;-boot.mlma(y=sim.211$y, data1=data3,boot=2) 
joint.effect(temp3.boot, var.list=c("m.4"))
</code></pre>

<hr>
<h2 id='mlma'>
Multilevel Mediation Analysis
</h2><span id='topic+mlma'></span>

<h3>Description</h3>

<p>The function transforms the data set and does multilevel mediation analysis.  The total, direct, and indirect effects will be returned as the results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlma(y, data1=NULL, x=data1$parameter$x, m=data1$parameter$m, 
               yref=NULL, xref=NULL, levelx=data1$parameter$levelx, 
               levely=data1$parameter$levely, 
               l1=data1$parameter$l1,l2=data1$parameter$l2, 
               c1=data1$parameter$c1, #levelx is the level of x
               c1r=data1$parameter$c1r, c2=data1$parameter$c2, 
               c2r=data1$parameter$c2r,level=data1$parameter$level,  
               weight=rep(1, nrow(data.frame(x))), 
               random="(1|level)", random.m1=NULL,intercept=TRUE, 
               family1=NULL, familym=vector("list",ncol(m)),
               covariates=NULL, cy1=NULL, cy2=NULL, cm=NULL,joint=NULL,
               f01y=data1$parameter$f01y,f10y=data1$parameter$f10y, 
               f02ky=data1$parameter$f02ky, f20ky=data1$parameter$f20ky, 
               f01km1=data1$parameter$f01km1,f01km2=data1$parameter$f01km2, 
               f10km=data1$parameter$f10km, data2=NULL, x.new=NULL, 
               m.new=NULL, level.new=level, weight.new=NULL,
               covariates.new=covariates,cov.mat=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mlma_+3A_y">y</code></td>
<td>

<p>the vector of the outcome variable.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_data1">data1</code></td>
<td>
<p>The transformed and organized data set from data.org.  If the data set has not been organized, leave data1=NULL (by default), and set the transformation functions (f arguments). Otherwise, set data1 as the output from the data.org function and do not include the arguments starting with fs.</p>
</td></tr>
<tr><td><code id="mlma_+3A_x">x</code></td>
<td>

<p>the vector of the predictive variable.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_m">m</code></td>
<td>

<p>the mediators. The program will identify the levels and types of each mediator if not specified by l1, l2, c1, or c2. A mediator is identified as categorical if the mediator is a factor, a character, or has only two unque values.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_yref">yref</code></td>
<td>

<p>the reference group of y if it is binary. By default it will be the first level of y.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_xref">xref</code></td>
<td>

<p>the reference group of x if it is binary. By default it will be the first level of x.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_levelx">levelx</code></td>
<td>

<p>the level of x (1 or 2). If it is not given, levelx will be decided by x.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_levely">levely</code></td>
<td>

<p>the level of y (1 or 2). If it is not given, levely will be decided by y.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_l1">l1</code></td>
<td>

<p>the column numbers of level 1 continuous mediators in m or the list of names of the level 1 continuous mediators.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_l2">l2</code></td>
<td>

<p>the column numbers of level 2 continuous mediators in m or the list of names of the level 2 continuous mediators.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_c1">c1</code></td>
<td>

<p>the column numbers of level 1 categorical mediators in m or the list of names of the level 1 categorical mediators.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_c1r">c1r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c1.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_c2">c2</code></td>
<td>

<p>the column numbers of level 2 categorical mediators in m or the list of names of the level 2 categorical mediators.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_c2r">c2r</code></td>
<td>

<p>the reference groups of categorical mediators specified by c2.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_level">level</code></td>
<td>

<p>a vector that record the group number for each observation.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_weight">weight</code></td>
<td>

<p>the weight of cases in groups.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_random">random</code></td>
<td>

<p>the random effect part for the full model. random = &quot;(1|level)&quot; by default.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_random.m1">random.m1</code></td>
<td>

<p>the random effect part for model explaining the mediators. If not null, 1st item of random.m1 is the list of level 1 mediators, following items are the random item of the same order. All other random effects are random = &quot;(1|level)&quot; if not specified here.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_intercept">intercept</code></td>
<td>

<p>True if fit an intercept to models, by default.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_covariates">covariates</code></td>
<td>

<p>the covariates matrix to explain the outcome, y, and/or the mediators, m.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_family1">family1</code></td>
<td>

<p>the glm family for the response variable y. If it is null, will be binomial with logic link for binary y and gaussian with identity link for continuous y.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_familym">familym</code></td>
<td>

<p>a list of length ncol(m), each item gives the glm family for the corresponding column of m. If an item is null, the family will be binomial with logic link for binary m and gaussian with identity link for continuous m.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_cy1">cy1</code></td>
<td>

<p>the column numbers of covariates that are level 1 and used to explain y.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_cy2">cy2</code></td>
<td>

<p>the column numbers of covariates that are level 2 and used to explain y.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_cm">cm</code></td>
<td>

<p>the column numbers of covariates that are used to explain m. cm[[1]] gives the mediators (in l1, cl, l2, or c2) that can be partially explained by covariates. Each of the rest items of the cm list shows the column number(s) in covariates that should be used to explain each mediator listed in cm[[1]] and by that order.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_joint">joint</code></td>
<td>

<p>the list of group(s) of mediators whose joint mediation effect is of interests. joint[[1]] list the levels of mediators in each group and by the order of the list. Note that if any mediator in the group is of level 2, the level of the group should be 2.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_f01y">f01y</code>, <code id="mlma_+3A_f10y">f10y</code>, <code id="mlma_+3A_f02ky">f02ky</code>, <code id="mlma_+3A_f20ky">f20ky</code>, <code id="mlma_+3A_f01km1">f01km1</code>, <code id="mlma_+3A_f01km2">f01km2</code>, <code id="mlma_+3A_f10km">f10km</code></td>
<td>

<p>the transformation functions as describe in the function <code>"<a href="#topic+data.org">data.org</a>"</code>.  Need these arguments only when org.data=T.
</p>
</td></tr>
<tr><td><code id="mlma_+3A_x.new">x.new</code>, <code id="mlma_+3A_m.new">m.new</code>, <code id="mlma_+3A_level.new">level.new</code>, <code id="mlma_+3A_weight.new">weight.new</code>, <code id="mlma_+3A_covariates.new">covariates.new</code></td>
<td>

<p>the settings that we want to make inferences on the mediation effects. 
</p>
</td></tr>
<tr><td><code id="mlma_+3A_data2">data2</code></td>
<td>
<p>The transformed and organized data set from data.org on the set of new x.new and m.new etc..  If the data set has not been organized, leave data2=NULL (by default).</p>
</td></tr>
<tr><td><code id="mlma_+3A_cov.mat">cov.mat</code></td>
<td>
<p>If true, save the estimated variances for mediation effects by normal assumption.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The multilevel mediation is based on the following linear multilevel additive models:
</p>
<p style="text-align: center;"><code class="reqn">Y_{ij} = u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j})+{\boldsymbol{\beta}_{10}^Y}^T\mathbf{f}_{10}^Y(X_{ij}-X_{.j})+\sum_{k=1}^K{\boldsymbol{\beta}_{20k}^Y}^T\mathbf{f}_{20k}^Y(M_{ijk}-M_{.jk})+{\boldsymbol{\beta}_{30}^Y}^T(\mathbf{Z}_{ij}-\mathbf{Z}_{.j})+r_{ij}^Y,</code>
</p>

<p>where </p>
<p style="text-align: center;"><code class="reqn">u_{0j}^Y(X_{.j}, \mathbf{M}_{.j}, \mathbf{Z}_{.j}) = c_{00}^Y + {\boldsymbol{\beta}_{01}^Y}^T\mathbf{f}_{01}^Y(X_{.j}) + \sum_{k=1}^K{\boldsymbol{\beta}_{02k}^Y}^T\mathbf{f}_{02k}^Y(M_{.jk}) + {\boldsymbol{\beta}_{03}^Y}^T\mathbf{Z}_{.j} + r_{0j}^Y.</code>
</p>

<p>For <code class="reqn">k=1,\ldots,K,</code>
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = u_{0jk}^M(X_{.j})+{\boldsymbol{\beta}_{10k}^M}^T\mathbf{f}_{10k}^M(X_{ij}-X_{.j})+r_{ijk}^M,</code>
</p>

<p style="text-align: center;"><code class="reqn">u_{0jk}^M(X_{.j}) = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M1}(X_{.j}) + r_{0jk}^M.</code>
</p>

<p>If for some k, <code class="reqn">M_k</code> is level 2 variable,
</p>
<p style="text-align: center;"><code class="reqn">M_{.jk} = c_{00k}^M + {\boldsymbol{\beta}_{01k}^M}^T\mathbf{f}_{01k}^{M2}(X_{.j}) + r_{0jk}^M.</code>
</p>
 
<p>Note that in the models, <code class="reqn">\mathbf{f}(\cdot)=(f_1(\cdot), f_2(\cdot), \cdots, f_l(\cdot))^T</code> is a set of l transformation functions on <code class="reqn">\cdot</code>, with the corresponding linear coefficients vector <code class="reqn">\boldsymbol{\beta}=(\beta_1, \beta_2, \cdots, \beta_l)^T</code>. <code class="reqn">\mathbf{f}</code> and l are known for model fitting. l may be different with <code class="reqn">\mathbf{f}</code> of different sub- and super-scripts.</p>


<h3>Value</h3>

<p>A &quot;mlma&quot; mode list will be returned with the following items:
</p>
<table>
<tr><td><code>de1</code></td>
<td>
<p>direct effect(s) of level 1 exposure(s). de1 is a matrix of dimension n by nx1, where n is the number of observations, and nx1 is the number of level 1 exposures.</p>
</td></tr>
<tr><td><code>de2</code></td>
<td>
<p>direct effect(s) of level 2 exposure(s). de2 is a matrix of dimension n2 by nx2, where n2 is the number of unique levels, and nx2 is the number of level 2 exposures.</p>
</td></tr>
<tr><td><code>ade1</code></td>
<td>
<p>average direct effect(s) of level 1 exposure(s). ade1 is a vector of length nx1.</p>
</td></tr>
<tr><td><code>ade2</code></td>
<td>
<p>average direct effect(s) of level 2 exposure(s). ade2 is a vector of length nx2.</p>
</td></tr>
<tr><td><code>te1</code></td>
<td>
<p>total effect of each level 1 exposure. te1 is a matrix of dimension n by nx1, where n is the number of observations, and nx1 is the number of level 1 exposures.</p>
</td></tr>
<tr><td><code>te2</code></td>
<td>
<p>total effect of each level 2 exposure. te2 is a matrix of dimension n2 by nx2, where n2 is the number of unique levels, and nx2 is the number of level 2 exposures.</p>
</td></tr>
<tr><td><code>ate1</code></td>
<td>
<p>average total effect(s) of level 1 exposure(s). ate1 is a vector of length nx1.</p>
</td></tr>
<tr><td><code>ate2</code></td>
<td>
<p>average total effect(s) of level 2 exposure(s). ate2 is a vector of length nx2.</p>
</td></tr>
<tr><td><code>ie1</code></td>
<td>
<p>level 1 indirect effect from level 1 exposure(s) to level 1 mediator(s) on the outcome. ie1 is an array of dimension (n,nm1,nx1), where nm1 is the number of level 1 mediators.</p>
</td></tr>
<tr><td><code>ie2</code></td>
<td>
<p>level 2 indirect effect from level 2 exposure(s) to level 2 mediator(s) on the outcome. ie2 is an array of dimension (n2,nm2,nx2), where nm2 is the number of level 2 mediators.</p>
</td></tr>
<tr><td><code>ie12</code></td>
<td>
<p>level 2 indirect effect from level 2 exposure(s) to level 1 mediator(s) on the outcome. ie12 is an array of dimension (n2,nm1,nx2).</p>
</td></tr>
<tr><td><code>aie1</code></td>
<td>
<p>level 1 average indirect effect from level 1 exposure(s) to level 1 mediator(s) on the outcome. aie1 is a matrix of dimension (nm1,nx1).</p>
</td></tr>
<tr><td><code>aie2</code></td>
<td>
<p>level 2 average indirect effect from level 2 exposure(s) to level 2 mediator(s) on the outcome. aie2 is a matrix of dimension (nm2,nx2).</p>
</td></tr>
<tr><td><code>aie12</code></td>
<td>
<p>level 2 average indirect effect from level 2 exposure(s) to level 1 mediator(s) on the outcome. aie12 is a matrix of dimension (nm1,nx2).</p>
</td></tr>
<tr><td><code>je1</code></td>
<td>
<p>joint level 1 indirect effect from level 1 exposure(s) to joint level 1 mediators on the outcome. je1 is an array of dimension (n,nj1,nx1), where nj1 is the number of groups of level 1 mediators.</p>
</td></tr>
<tr><td><code>je2</code></td>
<td>
<p>joint level 2 indirect effect from level 2 exposure(s) to joint level 2 mediators on the outcome. je2 is an array of dimension (n2,nj2,nx2), where nj2 is the number of groups oflevel 2 mediators.</p>
</td></tr>
<tr><td><code>je12</code></td>
<td>
<p>joint level 2 indirect effect from level 2 exposure(s) to joint level 1 mediators on the outcome. je12 is an array of dimension (n2,nj1,nx2).</p>
</td></tr>
<tr><td><code>aje1</code></td>
<td>
<p>average joint level 1 indirect effect from level 1 exposure(s) to joint level 1 mediators on the outcome. aje1 is a matrix of dimension (nj1,nx1).</p>
</td></tr>
<tr><td><code>aje2</code></td>
<td>
<p>average joint level 2 indirect effect from level 2 exposure(s) to joint level 2 mediators on the outcome. je2 is a matrix of dimension (nj2,nx2), where nj2 is the number of groups oflevel 2 mediators.</p>
</td></tr>
<tr><td><code>aje12</code></td>
<td>
<p>average joint level 2 indirect effect from level 2 exposure(s) to joint level 1 mediators on the outcome. je12 is a matrix of dimension (nj1,nx2).</p>
</td></tr>
<tr><td><code>f1</code></td>
<td>
<p>the overall multilevel model.</p>
</td></tr>
<tr><td><code>fm1</code></td>
<td>
<p>a list, where the first item identifies the level 1 mediators, and in that order, the following items give the prediction functions of the mediators.</p>
</td></tr>
<tr><td><code>fm2</code></td>
<td>
<p>a list, where the first item identifies the level 2 mediators, and in that order, the following items give the prediction functions of the mediators.</p>
</td></tr>



<tr><td><code>ie1_1</code>, <code>ie1_2</code>, <code>ie1_3</code>, <code>ie2_1</code>, <code>ie2_2</code>, <code>ie2_3</code></td>
<td>
<p>the first, second and third part of the corresponding indirect effects.</p>
</td></tr>
<tr><td><code>x</code></td>
<td>
<p>the matrix of the new exposure variable(s) (x.new).</p>
</td></tr>
<tr><td><code>x.j</code></td>
<td>
<p>the vector of the aggregated x at the higher level by the order of unique(level.new[!is.na(level.new)]).</p>
</td></tr>


<tr><td><code>data1</code></td>
<td>
<p>The results from data.org on the original data (x, m, etc.).</p>
</td></tr>
<tr><td><code>data2</code></td>
<td>
<p>The results from data.org on the new data (x.new, m.new, etc.).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#with a level 1 exposure
data(sim.111)
data2&lt;-data.org(sim.111$x, m=sim.111$m, 
                   f10y=list(1,c("x^2","sqrt(x+6)")), 
                   f20ky=list(2,c("x","x^3")), 
                   f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2&lt;-mlma(y=sim.111$y, data1=data2)

#can also do the above analysis using the following code
temp2&lt;-mlma(y=sim.111$y, x=sim.111$x, m=sim.111$m, 
           f10y=list(1,c("x^2","sqrt(x+6)")), 
           f20ky=list(2,c("x","x^3")), 
           f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
                
#with a level 2 exposure
data(sim.211)
data1&lt;-data.org(x=sim.211$x, m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")),  
                   f20ky=list(2,c("x","x^3")), f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                   f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),level=sim.211$level) 
temp1&lt;-mlma(y=sim.211$y, data1) 

#with both level 1 and 2 exposure
data3&lt;-data.org(x=cbind(sim.211$x,sim.111$x), m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")), 
                   f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                   f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3&lt;-mlma(y=sim.211$y, data3) 

</code></pre>

<hr>
<h2 id='plot.mlma'>
Plot &quot;mlma&quot; Object
</h2><span id='topic+plot.mlma'></span>

<h3>Description</h3>

<p>Plot the overall mediation effect or decomposed indirect effect from the selected mediator.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma'
plot(x,..., var=NULL, cate=FALSE, 
                    w2=rep(1,nrow(as.matrix(object$de2))))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mlma_+3A_x">x</code></td>
<td>

<p>an &quot;mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="plot.mlma_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="plot.mlma_+3A_var">var</code></td>
<td>

<p>the name of the mediator that is to be plotted.  If var is NULL, plot the relative mediation effects of all mediators.
</p>
</td></tr>
<tr><td><code id="plot.mlma_+3A_cate">cate</code></td>
<td>

<p>an indicator of whether the variable is categorical or not.
</p>
</td></tr>
<tr><td><code id="plot.mlma_+3A_w2">w2</code></td>
<td>

<p>the weight for observations at level 2, which should be the same order as unique(level[!is.na(level)]). The default is rep(1,length(object$de2)).
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plot the relative effects of direct effects and indirect effects of mediators at level 1 (if levelx=1) and level 2 respectively if var=NULL.  Otherwise, plot the indirect effect of var, the estimated differential effect of the predictor on var, and the predicted relationship between y and var at individual level and/or (aggregated) group level.
</p>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.211)
data1&lt;-data.org(x=sim.211$x, m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")),  
                   f20ky=list(2,c("x","x^3")), f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                   f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),level=sim.211$level) 
temp1&lt;-mlma(y=sim.211$y, data1) 
plot(temp1)
plot(temp1,var="m.1")
plot(temp1,var="m.3")
#plot(temp1,var="m.4")

data(sim.111)
data2&lt;-data.org(sim.111$x, m=sim.111$m, 
                   f10y=list(1,c("x^2","sqrt(x+6)")), 
                   f20ky=list(2,c("x","x^3")), 
                   f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2&lt;-mlma(y=sim.111$y, data1=data2)
plot(temp2)
#plot(temp2,var="m.2")
#plot(temp2,var="m.4")
plot(temp2,var="m.3")

data3&lt;-data.org(x=cbind(sim.211$x,sim.111$x), m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")), 
                   f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                   f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3&lt;-mlma(y=sim.211$y, data3) 
plot(temp3)
plot(temp3,var="m.1")
#plot(temp3,var="m.4")
plot(temp3,var="m.3")

</code></pre>

<hr>
<h2 id='plot.mlma.boot'>
Plot the &quot;mlma.boot&quot; Object
</h2><span id='topic+plot.mlma.boot'></span>

<h3>Description</h3>

<p>For the mediator identified by var, the function draws the level 1 and/or (aggregated) level 2 indirect effects versus the predictor and the confidence bands at alpha significance level. If var is NULL, draw the relative mediation effects with confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma.boot'
plot(x,..., var=NULL, alpha=0.05,quant=FALSE, plot.it=x$plot.it)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.mlma.boot_+3A_x">x</code></td>
<td>

<p>an &quot;mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="plot.mlma.boot_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="plot.mlma.boot_+3A_var">var</code></td>
<td>

<p>the name of the mediator that is to be plotted.  
</p>
</td></tr>
<tr><td><code id="plot.mlma.boot_+3A_alpha">alpha</code></td>
<td>

<p>the significance level at which to draw the confidence bands.  
</p>
</td></tr>
<tr><td><code id="plot.mlma.boot_+3A_quant">quant</code></td>
<td>

<p>if true, confidence interval is calculated using quantil when plot the relative effects. By default, the CIs are calculated using normal approximation.  This argument does nothing for the CIs calculated when var is not null.
</p>
</td></tr>
<tr><td><code id="plot.mlma.boot_+3A_plot.it">plot.it</code></td>
<td>

<p>If true, will plot confidence intervals.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.211)
data1&lt;-data.org(x=ifelse(sim.211$x&gt;2.2,1,0), m=sim.211$m, 
                f02ky=list(1,c("x","x^2")),  
                f20ky=list(2,c("x","x^3")), f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),level=sim.211$level) 
temp1.boot&lt;-boot.mlma(y=sim.211$y, data1=data1,boot=2)  
plot(temp1.boot)
plot(temp1.boot,var="m.1")
plot(temp1.boot,var="m.3")
#plot(temp1.boot,var="m.4")
</code></pre>

<hr>
<h2 id='print.mlma'>
Print &quot;mlma&quot; Object
</h2><span id='topic+print.mlma'></span>

<h3>Description</h3>

<p>print the level 1 and level 2 mediation effecs from the object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma'
print(x,...,w2=rep(1,nrow(as.matrix(object$de2))),digits=2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mlma_+3A_x">x</code></td>
<td>

<p>an &quot;mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="print.mlma_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="print.mlma_+3A_w2">w2</code></td>
<td>

<p>the weight for observations at level 2, which should be the same order as unique(level[!is.na(level)]). The default is rep(1,length(object$de2)).
</p>
</td></tr>
<tr><td><code id="print.mlma_+3A_digits">digits</code></td>
<td>

<p>the number of digits to print.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
#with a level 1 exposure
data(sim.111)
data2&lt;-data.org(sim.111$x, m=sim.111$m, 
                   f10y=list(1,c("x^2","sqrt(x+6)")), 
                   f20ky=list(2,c("x","x^3")), 
                   f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2&lt;-mlma(y=sim.111$y, data1=data2)
print(temp2)

#with a level 2 exposure
data(sim.211)
data1&lt;-data.org(x=sim.211$x, m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")),  
                   f20ky=list(2,c("x","x^3")), f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")),
                   f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"),level=sim.211$level) 
temp1&lt;-mlma(y=sim.211$y, data1) 
temp1

#with both level 1 and 2 exposure
data3&lt;-data.org(x=cbind(sim.211$x,sim.111$x), m=sim.211$m, 
                   f01y=list(1,c("x","log(x^2)")), f02ky=list(1,c("x","x^2")), 
                   f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                   f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3&lt;-mlma(y=sim.211$y, data3) 
temp3
</code></pre>

<hr>
<h2 id='print.mlma.boot'>
Print &quot;mlma.boot&quot; Object
</h2><span id='topic+print.mlma.boot'></span>

<h3>Description</h3>

<p>print the level 1 and level 2 mediation effecs from the object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma.boot'
print(x,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.mlma.boot_+3A_x">x</code></td>
<td>

<p>an &quot;mlma.boot&quot; object.
</p>
</td></tr>
<tr><td><code id="print.mlma.boot_+3A_...">...</code></td>
<td>
<p>other arguments</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
data2&lt;-data.org(ifelse(sim.111$x&gt;1.9,1,0), m=sim.111$m, 
                f10y=list(1,c("x^2","sqrt(x+6)")), 
                f20ky=list(2,c("x","x^3")), 
                f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2.boot&lt;-boot.mlma(y=sim.111$y, data1=data2,boot=2)

print(temp2.boot)
</code></pre>

<hr>
<h2 id='sim.111'>
Simulated 1-1-1 Data set 
</h2><span id='topic+sim.111'></span>

<h3>Description</h3>

<p>A simulated data set, where both predictor and outcome are level 1 variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("sim.111")</code></pre>


<h3>Format</h3>

<p>The data set contains 10 groups, each group has 30 observations. The format is list, where there are four elements:
</p>
<p>x: the level 1 continuous predictor.
</p>
<p>y: the level 1 continuous outcome.
</p>
<p>m: the matrix of mediators, where there are three level 1 mediators, where m.2 and m.3 are continuous, and m.4 is categorical with 3 levels.
</p>
<p>level: the group level for each observation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
</code></pre>

<hr>
<h2 id='sim.211'>
Simulated 2-1-1 Data
</h2><span id='topic+sim.211'></span>

<h3>Description</h3>

<p>A simulated data set, where the predictor is a level 2 and the outcome is a level 1 variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("sim.211")</code></pre>


<h3>Format</h3>

<p>The data set contains 10 groups, each group has 30 observations. The format is list, where there are four elements:
</p>
<p>x: the level 1 continuous predictor.
</p>
<p>y: the level 1 continuous outcome.
</p>
<p>m: the matrix of mediators, where there are one level 2 mediator, m.1, and two level 1 mediators, m.3 and m.4. m.4 is categorical with 3 levels.
</p>
<p>level: the group level for each observation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.211)
</code></pre>

<hr>
<h2 id='summary.mlma'>
Summary of &quot;mlma&quot; Object
</h2><span id='topic+summary.mlma'></span><span id='topic+print.summary.mlma'></span>

<h3>Description</h3>

<p>This function provides ANOVA tests on the predictors and mediators in the full model and on the predictors for models in explaining each mediators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma'
summary(object,...,type="III")
## S3 method for class 'summary.mlma'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mlma_+3A_object">object</code></td>
<td>

<p>an &quot;mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="summary.mlma_+3A_x">x</code></td>
<td>

<p>a summary.mlma.boot object created initially call to summary.mlma.boot.
</p>
</td></tr>
<tr><td><code id="summary.mlma_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="summary.mlma_+3A_type">type</code></td>
<td>

<p>type of test, &quot;II&quot;, &quot;III&quot;, 2, or 3.  
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
data2&lt;-data.org(ifelse(sim.111$x&gt;1.9,1,0), m=sim.111$m, 
                f10y=list(1,c("x^2","sqrt(x+6)")), 
                f20ky=list(2,c("x","x^3")), 
                f10km=list(matrix(c(2,1),1),"log(x+2)"), level=sim.111$level)
temp2&lt;-mlma(y=sim.111$y, data1=data2)
summary(temp2)
</code></pre>

<hr>
<h2 id='summary.mlma.boot'>
Summary of &quot;mlma.boot&quot; Object
</h2><span id='topic+summary.mlma.boot'></span><span id='topic+print.summary.mlma.boot'></span>

<h3>Description</h3>

<p>This function provide summary statistics for all mediation effects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'mlma.boot'
summary(object, ..., alpha = 0.05,RE=FALSE,digits=4)
## S3 method for class 'summary.mlma.boot'
print(x, ..., digits=x$digits)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.mlma.boot_+3A_object">object</code></td>
<td>

<p>an &quot;mlma&quot; object.
</p>
</td></tr>
<tr><td><code id="summary.mlma.boot_+3A_x">x</code></td>
<td>

<p>a summary.mlma.boot object created initially call to summary.mlma.boot.
</p>
</td></tr>
<tr><td><code id="summary.mlma.boot_+3A_...">...</code></td>
<td>

<p>arguments to be passed to methods.
</p>
</td></tr>
<tr><td><code id="summary.mlma.boot_+3A_alpha">alpha</code></td>
<td>

<p>the significance level at which to draw the confidence bands.  
</p>
</td></tr>
<tr><td><code id="summary.mlma.boot_+3A_re">RE</code></td>
<td>

<p>if true, print the relative effects, otherwise show the mediation effects.  
</p>
</td></tr>
<tr><td><code id="summary.mlma.boot_+3A_digits">digits</code></td>
<td>

<p>the number of digits to print.
</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Qingzhao Yu (qyu@lsuhsc.edu), Bin Li (bli@lsu.edu).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(sim.111)
data(sim.211)
data3&lt;-data.org(x=cbind(ifelse(sim.211$x&gt;1.9,1,0),sim.111$x), m=sim.211$m, 
                f20ky=list(2,c("x","x^3")), f01km1=list(matrix(c(2,1),1),"sqrt(x)+3"), 
                f01km2=list(matrix(c(1,1),1),c("x^1.2","x^2.3")), level=sim.211$level)
temp3.boot&lt;-boot.mlma(y=sim.211$y, data1=data3,boot=2) 
summary(temp3.boot, digits=2)
summary(temp3.boot, RE=TRUE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
