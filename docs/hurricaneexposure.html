<!DOCTYPE html><html><head><title>Help for package hurricaneexposure</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hurricaneexposure}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#county_distance'><p>Hurricane exposure by distance for counties</p></a></li>
<li><a href='#county_events'><p>Find events for storms by county</p></a></li>
<li><a href='#county_rain'><p>Hurricane exposure by rain for counties</p></a></li>
<li><a href='#county_wind'><p>Hurricane exposure by wind for counties</p></a></li>
<li><a href='#default_map'><p>Create a default map with eastern US states</p></a></li>
<li><a href='#distance_exposure'><p>Write storm distance exposure files</p></a></li>
<li><a href='#events_exposure'><p>Write storm events exposure files</p></a></li>
<li><a href='#filter_storm_data'><p>Filter hurricane datasets</p></a></li>
<li><a href='#filter_wind_data'><p>Filter hurricane wind dataset</p></a></li>
<li><a href='#get_eastern_map'><p>Get map data for eastern US states</p></a></li>
<li><a href='#hurr_choropleth'><p>Create a map customized for this package</p></a></li>
<li><a href='#interp_track'><p>Interpolate a storm track</p></a></li>
<li><a href='#map_counties'><p>Map counties</p></a></li>
<li><a href='#map_distance_exposure'><p>Map counties with distance exposure</p></a></li>
<li><a href='#map_event_exposure'><p>Map county-level exposure based on reported events</p></a></li>
<li><a href='#map_rain_exposure'><p>Map counties with rain exposure</p></a></li>
<li><a href='#map_tracks'><p>Plot Atlantic basin hurricane tracks</p></a></li>
<li><a href='#map_wind_exposure'><p>Map counties with wind exposure</p></a></li>
<li><a href='#multi_county_distance'><p>Hurricane exposure by distance for communities</p></a></li>
<li><a href='#multi_county_events'><p>Hurricane exposure by events for communities</p></a></li>
<li><a href='#multi_county_rain'><p>Hurricane exposure by rain for communities</p></a></li>
<li><a href='#multi_county_wind'><p>Hurricane exposure by wind for communities</p></a></li>
<li><a href='#rain_exposure'><p>Write storm rain exposure files</p></a></li>
<li><a href='#wind_exposure'><p>Write storm wind exposure files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Explore and Map County-Level Hurricane Exposure in the United
States</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-02-12</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows users to create time series of tropical storm
    exposure histories for chosen counties for a number of hazard metrics
    (wind, rain, distance from the storm, etc.). This package interacts
    with data available through the 'hurricaneexposuredata' package, which
    is available in a 'drat' repository. To access this data package, see the 
    instructions at <a href="https://github.com/geanders/hurricaneexposure">https://github.com/geanders/hurricaneexposure</a>. 
    The size of the 'hurricaneexposuredata' package is
    approximately 20 MB. This work was supported in part by grants from the National
    Institute of Environmental Health Sciences (R00ES022631), the National Science
    Foundation (1331399), and a NASA Applied Sciences Program/Public Health Program
    Grant (NNX09AV81G).</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/geanders/hurricaneexposure">https://github.com/geanders/hurricaneexposure</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/geanders/hurricaneexposure/issues">https://github.com/geanders/hurricaneexposure/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table (&ge; 1.12.8), dplyr (&ge; 0.8.3), ggmap (&ge; 3.0.0),
ggplot2 (&ge; 3.2.1), lazyeval (&ge; 0.2.2), lubridate (&ge; 1.7.4),
mapproj (&ge; 1.2.6), maps (&ge; 3.3.0), purrr (&ge; 0.3.3),
RColorBrewer (&ge; 1.1.2), rlang (&ge; 0.4.2), stringr (&ge; 1.4.0),
tidyr (&ge; 1.0.0)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>hurricaneexposuredata (&ge; 0.1.0), knitr (&ge; 1.26.0), pander
(&ge; 0.6.3), rmarkdown (&ge; 2.0.0), weathermetrics (&ge; 1.2.2)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Additional_repositories:</td>
<td><a href="https://geanders.github.io/drat">https://geanders.github.io/drat</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-02-12 16:48:22 UTC; georgianaanderson</td>
</tr>
<tr>
<td>Author:</td>
<td>Brooke Anderson [aut, cre],
  Meilin Yan [aut],
  Joshua Ferreri [aut],
  William Crosson [ctb],
  Mohammad Al-Hamdan [ctb],
  Andrea Schumacher [ctb],
  Dirk Eddelbuettel [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Brooke Anderson &lt;brooke.anderson@colostate.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-02-13 14:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='county_distance'>Hurricane exposure by distance for counties</h2><span id='topic+county_distance'></span>

<h3>Description</h3>

<p>This function takes a list of US counties,based on their 5-digit Federal
Information Processing Standard (FIPS) codes, boundaries on
the range of years to be considered, and thresholds for distance between each
county and the storm track for the county to be considered &quot;exposed&quot; to the
storm. Based on these inputs, the function returns a dataframe with the
subset of Atlantic basin storms meeting those criteria for each of the listed
counties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>county_distance(counties, start_year, end_year, dist_limit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="county_distance_+3A_counties">counties</code></td>
<td>
<p>Character vector of the five-digit Federal Information
Processing Standard (FIPS) codes for counties for which the user wants to
determine storm exposure.</p>
</td></tr>
<tr><td><code id="county_distance_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="county_distance_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="county_distance_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more information on how distances between counties and storm
tracks are calculated for this function, see the documentation for the
<code>closest_dist</code> dataset that comes with this package.
</p>


<h3>Value</h3>

<p>Returns a dataframe with a row for each county-storm
pair and with columns for:
</p>

<ul>
<li><p><code>storm_id</code>: Unique storm identifier with the storm name and year,
separated by a hyphen(e.g., &quot;Alberto-1988&quot;,
&quot;Katrina-2005&quot;)
</p>
</li>
<li><p><code>fips</code>: County's 5-digit Federal Information Processing Standard
(FIPS) code
</p>
</li>
<li><p><code>closest_date</code>: Date (based on local time) of the closest
approach of the storm to the county's population
mean center.
</p>
</li>
<li><p><code>storm_dist</code>: Minimum distance (in kilometers) between the storm's
track and the county's population mean center.
</p>
</li>
<li><p><code>local_time</code>: Local time of the closest approach of the storm to the
county's population mean center, based on storm tracks
linearly interpolated to 15-minute increments.
</p>
</li>
<li><p><code>closest_time_utc</code>: Time, in UTC, of the closest approach of the
storm to the county's population mean center,
based on storm tracks linearly interpolated to
15-minute increments.
</p>
</li></ul>



<h3>Note</h3>

<p>Only counties in states in the eastern half of the United States can
be processed by this function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

  county_distance(counties = c("22071", "51700"),
              start_year = 1995, end_year = 2005,
              dist_limit = 75)

}
</code></pre>

<hr>
<h2 id='county_events'>Find events for storms by county</h2><span id='topic+county_events'></span>

<h3>Description</h3>

<p>Takes a list of US counties, based on their 5-digit Federal Information Processing
Standard (FIPS) codes, boundaries on the range of years to be considered, and
the type of event (e.g., &quot;flood&quot;, &quot;tornado&quot;) and returns a list of all storms with
listings for that type of event for the counties. This output is based on listings in
the NOAA Storm Events database. See the help documentation for the <code>storm_events</code>
dataset for more information and references on the data source used by this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>county_events(counties, start_year, end_year, event_type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="county_events_+3A_counties">counties</code></td>
<td>
<p>Character vector of the five-digit Federal Information
Processing Standard (FIPS) codes for counties for which the user wants to
determine storm exposure.</p>
</td></tr>
<tr><td><code id="county_events_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="county_events_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="county_events_+3A_event_type">event_type</code></td>
<td>
<p>Character string with the type of event to use to identify
county exposures. Options include <code>"flood"</code>, <code>"tornado"</code>,
<code>"wind"</code>, and <code>"tropical_storm"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with a row for each county-storm pair and with
columns for:
</p>

<ul>
<li><p><code>fips</code>: County's 5-digit Federal Information Processing Standard
(FIPS) code
</p>
</li>
<li><p><code>storm_id</code>: Unique storm identifier with the storm name and year,
separated by a hyphen (e.g., &quot;Alberto-1988&quot;,
&quot;Katrina-2005&quot;)
</p>
</li>
<li><p><code>usa_atcf_id</code>: United States Automated Tropical Cyclone Forecasting
storm identifier
</p>
</li>
<li><p><code>closest_time_utc</code>: Time, in UTC, of the closest approach of the
storm to the county's population mean center,
based on storm tracks linearly interpolated to
15-minute increments.
</p>
</li>
<li><p><code>storm_dist</code>: Minimum distance (in kilometers) between the storm's
track and the county's population mean center.
</p>
</li>
<li><p><code>local_time</code>: Local time of the closest approach of the storm to the
county's population mean center, based on storm tracks
linearly interpolated to 15-minute increments.
</p>
</li>
<li><p><code>closest_date</code>: Date (based on local time) of the closest
approach of the storm to the county's population
mean center.
</p>
</li></ul>



<h3>Note</h3>

<p>Of the event types that this function can pull, only &quot;tornado&quot; and
&quot;wind&quot; are available for years before 1996. Therefore, this function will
pull listed tornado events or wind events for all years, but for any other
event type, you should not use a start year prior to 1996, as events of
other types were not recorded in the database before 1996.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

county_events(counties = c("37031", "37053", "37055"),
              start_year = 1996, end_year = 2018,
              event_type = "flood")

county_events(counties = c("37055"),
              start_year = 1996, end_year = 2018,
              event_type = "tropical_storm")
}
</code></pre>

<hr>
<h2 id='county_rain'>Hurricane exposure by rain for counties</h2><span id='topic+county_rain'></span>

<h3>Description</h3>

<p>This function takes a list of US counties, based on their 5-digit Federal
Information Processing Standard (FIPS) codes, boundaries on
the range of years to be considered, thresholds for distance between each
county and the storm track, as well as minimum rainfall over a certain time
window for the county to be considered &quot;exposed&quot; to the
storm. Based on these inputs, the function returns a dataframe with the
subset of Atlantic basin storms meeting those criteria for each of the listed
counties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>county_rain(
  counties,
  start_year,
  end_year,
  rain_limit,
  dist_limit,
  days_included = c(-2, -1, 0, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="county_rain_+3A_counties">counties</code></td>
<td>
<p>Character vector of the five-digit Federal Information
Processing Standard (FIPS) codes for counties for which the user wants to
determine storm exposure.</p>
</td></tr>
<tr><td><code id="county_rain_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="county_rain_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="county_rain_+3A_rain_limit">rain_limit</code></td>
<td>
<p>Minimum of rainfall, in millimeters, summed across the days
selected to be included (<code>days_included</code>), that must fall in a
county for the county to be classified as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="county_rain_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="county_rain_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector listing the days to include when
calculating total precipitation. Negative numbers are days before the
closest date of the storm to a county. For example,
<code>c(-1, 0, 1)</code> would calculate rain for a county as the sum of the
rainfall for the day before, the day of, and the day after the date when
the storm center was closest to the county center. Values can range from
-5 to 3 (i.e., at most, you can calculate the total rainfall from five days
to three days after the day when the storm is closest to the
county).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with a row for each county-storm pair and with
columns for:
</p>

<ul>
<li><p><code>storm_id</code>: Unique storm identifier with the storm name and year,
separated by a hyphen(e.g., &quot;Alberto-1988&quot;,
&quot;Katrina-2005&quot;)
</p>
</li>
<li><p><code>fips</code>: County's 5-digit Federal Information Processing Standard
(FIPS) code
</p>
</li>
<li><p><code>closest_date</code>: Date (based on local time) of the closest
approach of the storm to the county's population
mean center.
</p>
</li>
<li><p><code>storm_dist</code>: Minimum distance (in kilometers) between the storm's
track and the county's population mean center.
</p>
</li>
<li><p><code>tot_precip</code>: Cumulative rainfall, in millimeters, in the
county for the days selected using the
<code>days_included</code> option.
</p>
</li>
<li><p><code>local_time</code>: Local time of the closest approach of the storm to the
county's population mean center, based on storm tracks
linearly interpolated to 15-minute increments.
</p>
</li>
<li><p><code>closest_time_utc</code>: Time, in UTC, of the closest approach of the
storm to the county's population mean center,
based on storm tracks linearly interpolated to
15-minute increments.
</p>
</li></ul>



<h3>References</h3>

<p>Al-Hamdan MZ, Crosson WL, Economou SA, Estes MG, Estes SM, Hemmings SN,
Kent ST, Puckette M, Quattrochi DA, Rickman DL, Wade GM, McClure LA, 2014.
Environmental public health applications using remotely sensed data.
Geocarto International 29(1):85-98.
</p>
<p>North America Land Data Assimilation System (NLDAS) Daily Precipitation
years 1979-2011 on CDC WONDER Online Database, released 2012.
<a href="http://wonder.cdc.gov/wonder/help/Precipitation.html">http://wonder.cdc.gov/wonder/help/Precipitation.html</a>
</p>
<p>Rui H, Mocko D, 2014. README Document for North America Land Data
Assimilation System Phase 2 (NLDAS-2) Products. Goddard Earth Sciences
Data and Information Services Center.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

county_rain(counties = c("22071", "51700"),
            start_year = 1995, end_year = 2005,
            rain_limit = 100, dist_limit = 100)
}

</code></pre>

<hr>
<h2 id='county_wind'>Hurricane exposure by wind for counties</h2><span id='topic+county_wind'></span>

<h3>Description</h3>

<p>This function takes a list of US counties, based on their 5-digit Federal
Information Processing Standard (FIPS) codes, boundaries on
the range of years to be considered, and thresholds for wind speed (in meters
per second) (or, alternatively, duration of winds at or above 20 m / s in minutes)
for each  county to be considered &quot;exposed&quot; to the
storm. Based on these inputs, the function returns a dataframe with the
subset of Atlantic basin storms meeting those criteria for each of the listed
counties.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>county_wind(
  counties,
  start_year,
  end_year,
  wind_limit,
  wind_var = "vmax_sust",
  wind_source = "modeled"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="county_wind_+3A_counties">counties</code></td>
<td>
<p>Character vector of the five-digit Federal Information
Processing Standard (FIPS) codes for counties for which the user wants to
determine storm exposure.</p>
</td></tr>
<tr><td><code id="county_wind_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="county_wind_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="county_wind_+3A_wind_limit">wind_limit</code></td>
<td>
<p>A numeric vector of length one giving the minimum
wind speed (in meters per second) or duration of winds of 20 m / s or more
(in minutes) to use in the filter. The units of this variable will depend on
the user's choice for the <code>wind_var</code> parameter. If the Extended Best
Tracks wind radii are used as the source of the wind data, the sustained
winds will only be available for cutpoints of 34 knots, 50 knots, and 64
knots, so these values should be used (e.g., to get all counties with winds of
34 knots or higher, you could use <code>wind_limit = 17.4</code>, with the limit
given as a value just below 34 knots in the units meters per second).</p>
</td></tr>
<tr><td><code id="county_wind_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="county_wind_+3A_wind_source">wind_source</code></td>
<td>
<p>A character string specifying the source to use for the winds. Options
are <code>"modeled"</code>, for estimates based on running a wind model from Best
Tracks data inputs, and <code>"ext_tracks"</code>, for estimates based on
the wind radii in the Extended Best Tracks data. See the help files for the
datasets <code>storm_winds</code> and <code>ext_tracks_wind</code> in the
<code>hurricaneexposuredata</code> package for more details on each of these sources
for wind estimates. For the gust wind estimates, these are based on applying
a gust factor of 1.49 to the sustained wind estimates in both wind data sources.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more information on how wind speeds are modeled in this data,
see the documentation for the <code>stormwindmodel</code> R package.
</p>


<h3>Value</h3>

<p>Returns a dataframe with a row for each county-storm
pair and with columns for:
</p>

<ul>
<li><p><code>storm_id</code>: Unique storm identifier with the storm name and year,
separated by a hyphen(e.g., &quot;Alberto-1988&quot;,
&quot;Katrina-2005&quot;)
</p>
</li>
<li><p><code>fips</code>: County's 5-digit Federal Information Processing Standard
(FIPS) code
</p>
</li>
<li><p><code>max_sust</code>: Maximum sustained wind speed (in m / s)
</p>
</li>
<li><p><code>max_gust</code>: Maximum gust wind speed (in m / s)
</p>
</li>
<li><p><code>sust_dur</code>: Minutes sustained wind speed was 20 m / s or higher
</p>
</li>
<li><p><code>gust_dur</code>: Minutes gust wind speed was 20 m / s or higher (only
returned if the modeled winds are requested using <code>wind_source</code>)
</p>
</li>
<li><p><code>usa_atcf_id</code>: United States Automated Tropical Cyclone Forecasting
storm identifier
</p>
</li>
<li><p><code>closest_time_utc</code>: Time, in UTC, of the closest approach of the
storm to the county's population mean center,
based on storm tracks linearly interpolated to
15-minute increments.
</p>
</li>
<li><p><code>storm_dist</code>: Minimum distance (in kilometers) between the storm's
track and the county's population mean center.
</p>
</li>
<li><p><code>local_time</code>: Local time of the closest approach of the storm to the
county's population mean center, based on storm tracks
linearly interpolated to 15-minute increments.
</p>
</li>
<li><p><code>closest_date</code>: Date (based on local time) of the closest
approach of the storm to the county's population
mean center.
</p>
</li></ul>



<h3>Note</h3>

<p>Only counties in states in the eastern half of the United States can
be processed by this function. Winds are modeled at 15-minute increments, so
all duration estimates (<code>sust_dur</code> and <code>gust_dur</code> in the output)
will be divisible by 15.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

county_wind(counties = c("22071", "51700"),
            start_year = 1988, end_year = 2005,
            wind_limit = 20, wind_var = "vmax_sust")
}
</code></pre>

<hr>
<h2 id='default_map'>Create a default map with eastern US states</h2><span id='topic+default_map'></span>

<h3>Description</h3>

<p>Creates a <code>ggplot</code> object with the underlying map of all states in the
eastern section of the US that might be prone to hurricane-related
exposure. Other lines and points can be added to the output using
<code>ggplot2</code> plotting functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_map()
</code></pre>


<h3>Details</h3>

<p>Only states in the eastern half of the United States (i.e., ones
prone to exposure to Atlantic basin tropical storms) are included on this
map.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object that maps the states of the Eastern United States
</p>


<h3>Examples</h3>

<pre><code class='language-R'>default_map()

</code></pre>

<hr>
<h2 id='distance_exposure'>Write storm distance exposure files</h2><span id='topic+distance_exposure'></span>

<h3>Description</h3>

<p>This function takes an input of locations (either a vector of county FIPS
or a dataframe of multi-county FIPS, with all FIPS listed for each county)
and creates a dataframe with storm listings and dates that can be merged with
time series of health or other outcomes, giving the dates and exposures for all
storms meeting the given storm distance criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>distance_exposure(
  locations,
  start_year,
  end_year,
  dist_limit,
  out_dir,
  out_type = "csv"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="distance_exposure_+3A_locations">locations</code></td>
<td>
<p>Either a vector of FIPS county codes, for county-level
output, or a dataframe with columns for community identifier (<code>commun</code>)
and associated FIPS codes (<code>fips</code>), for multi-county community output.
See the examples for the proper format for this argument.</p>
</td></tr>
<tr><td><code id="distance_exposure_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="distance_exposure_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="distance_exposure_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="distance_exposure_+3A_out_dir">out_dir</code></td>
<td>
<p>Character string giving the pathname of the directory in which
to write output. This directory should already exist on your computer.</p>
</td></tr>
<tr><td><code id="distance_exposure_+3A_out_type">out_type</code></td>
<td>
<p>Character string giving the type of output files you'd like.
Options are <code>"csv"</code> (default) and <code>"rds"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Writes out a directory with rain exposure files for each county or
community indicated. For more on the columns in this output, see the
documentation for <code><a href="#topic+county_rain">county_rain</a></code> and
<code><a href="#topic+multi_county_rain">multi_county_rain</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

# For these examples to work, you will need to have a directory called "tmp"
# as a subdirectory of your home directory. These examples will create new
# directories with exposure output to that "tmp" directory.

# By county
distance_exposure(locations = c("22071", "51700"),
              start_year = 1995, end_year = 2005,
              dist_limit = 75,
              out_dir = "~/tmp/storms")

# For multi-county communities
communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                          fips = c("36005", "36047", "36061",
                          "36085", "36081", "36119",
                          "22071", "51700"))
distance_exposure(locations = communities,
              start_year = 1995, end_year = 2005,
              dist_limit = 75,
              out_dir = "~/tmp/storms")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='events_exposure'>Write storm events exposure files</h2><span id='topic+events_exposure'></span>

<h3>Description</h3>

<p>This function takes an input of locations (either a vector of county FIPS
or a dataframe of multi-county FIPS, with all FIPS listed for each county)
and creates a dataframe with storm listings and dates that can be merged with
time series of health or other outcomes, giving the dates and exposures for all
storms meeting the given storm events criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>events_exposure(
  locations,
  start_year,
  end_year,
  event_type,
  out_dir,
  out_type = "csv"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="events_exposure_+3A_locations">locations</code></td>
<td>
<p>Either a vector of FIPS county codes, for county-level
output, or a dataframe with columns for community identifier (<code>commun</code>)
and associated FIPS codes (<code>fips</code>), for multi-county community output.
See the examples for the proper format for this argument.</p>
</td></tr>
<tr><td><code id="events_exposure_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="events_exposure_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="events_exposure_+3A_event_type">event_type</code></td>
<td>
<p>Character string with the type of event to use to identify
county exposures. Options include <code>"flood"</code>, <code>"tornado"</code>,
<code>"wind"</code>, and <code>"tropical_storm"</code>.</p>
</td></tr>
<tr><td><code id="events_exposure_+3A_out_dir">out_dir</code></td>
<td>
<p>Character string with the filepath to the directory where the
data will be saved</p>
</td></tr>
<tr><td><code id="events_exposure_+3A_out_type">out_type</code></td>
<td>
<p>Character string with the type of file to save to. Options are
&quot;csv&quot; for a comma-separated file (default) and &quot;rds&quot; for an R object file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Writes out a directory with rain exposure files for each county or
community indicated. For more on the columns in this output, see the
documentation for <code><a href="#topic+county_rain">county_rain</a></code> and
<code><a href="#topic+multi_county_rain">multi_county_rain</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

# To run this example, you will need to have a directory named "tmp"
# as a subdirectory of your home directory.

# By county
events_exposure(locations = c("22071", "51700"),
                start_year = 1995, end_year = 2005,
                event_type = "flood",
                out_dir = "~/tmp/storms")
                }
 
## End(Not run)

</code></pre>

<hr>
<h2 id='filter_storm_data'>Filter hurricane datasets</h2><span id='topic+filter_storm_data'></span>

<h3>Description</h3>

<p>This function is a helper function for many of the the other functions in
this package that measure exposure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_storm_data(
  counties = NULL,
  storm = NULL,
  year_range = NULL,
  distance_limit = NULL,
  rain_limit = NULL,
  include_rain = FALSE,
  days_included = NULL,
  output_vars = c("fips")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_storm_data_+3A_counties">counties</code></td>
<td>
<p>A character vector listing all 5-digit county FIPS codes
for a subset of counties.</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_storm">storm</code></td>
<td>
<p>A character string giving the storm ID (e.g., &quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_year_range">year_range</code></td>
<td>
<p>A numeric vector of length two with the starting and
ending year to subset to.</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_distance_limit">distance_limit</code></td>
<td>
<p>A numeric vector of length one giving the maximum
distance (in kilometers) to use in the filter</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_rain_limit">rain_limit</code></td>
<td>
<p>A numeric vector of length one giving the minimum
rain (in millimeters) to use in the filter</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_include_rain">include_rain</code></td>
<td>
<p>A logical specifying whether to pull in rain data to use
in the filter or give as output (default is FALSE)</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector giving the lag numbers for days to
include when calculating the total rain over the storm period (e.g.,
<code>c(-1, 0, 1, 2)</code> would calculate the rain from the day before the
storm until two days after the storm). Values in this vector cannot be
lower than -3 or higher than 3.</p>
</td></tr>
<tr><td><code id="filter_storm_data_+3A_output_vars">output_vars</code></td>
<td>
<p>A character vector listing all the columns to include
in the output.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with storms filtered based on the input criteria to the
function. Columns in the output will vary depending on the user's
selections for the <code>output_vars</code> argument.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

filter_storm_data(counties = c("22071", "51700"), year_range = c(1988, 2011),
                  distance_limit = 250, rain_limit = 150,
                 include_rain = TRUE, days_included = c(-1, 0, 1),
                 output_vars = c("fips", "storm_id", "closest_date",
                                 "storm_dist", "tot_precip"))
filter_storm_data(storm = "Floyd-1999", include_rain = TRUE,
                 days_included = c(-1, 0, 1),
                 output_vars = c("fips", "tot_precip"))
}
</code></pre>

<hr>
<h2 id='filter_wind_data'>Filter hurricane wind dataset</h2><span id='topic+filter_wind_data'></span>

<h3>Description</h3>

<p>This function is a helper function for many of the the other functions in
this package that measure wind exposure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_wind_data(
  counties = NULL,
  storm = NULL,
  year_range = NULL,
  wind_limit = NULL,
  output_vars = "fips",
  wind_var = "vmax_sust",
  wind_source = "modeled"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_wind_data_+3A_counties">counties</code></td>
<td>
<p>A character vector listing all 5-digit county FIPS codes
for a subset of counties.</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_storm">storm</code></td>
<td>
<p>A character string giving the storm ID (e.g., &quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_year_range">year_range</code></td>
<td>
<p>A numeric vector of length two with the starting and
ending year to subset to.</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_wind_limit">wind_limit</code></td>
<td>
<p>A numeric vector of length one giving the minimum
wind speed (in meters per second) or duration of winds of 20 m / s or more
(in minutes) to use in the filter. The units of this variable will depend on
the user's choice for the <code>wind_var</code> parameter. If the Extended Best
Tracks wind radii are used as the source of the wind data, the sustained
winds will only be available for cutpoints of 34 knots, 50 knots, and 64
knots, so these values should be used (e.g., to get all counties with winds of
34 knots or higher, you could use <code>wind_limit = 17.4</code>, with the limit
given as a value just below 34 knots in the units meters per second).</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_output_vars">output_vars</code></td>
<td>
<p>A character vector listing all the columns to include
in the output.</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="filter_wind_data_+3A_wind_source">wind_source</code></td>
<td>
<p>A character string specifying the source to use for the winds. Options
are <code>"modeled"</code>, for estimates based on running a wind model from Best
Tracks data inputs, and <code>"ext_tracks"</code>, for estimates based on
the wind radii in the Extended Best Tracks data. See the help files for the
datasets <code>storm_winds</code> and <code>ext_tracks_wind</code> in the
<code>hurricaneexposuredata</code> package for more details on each of these sources
for wind estimates. For the gust wind estimates, these are based on applying
a gust factor of 1.49 to the sustained wind estimates in both wind data sources.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with storms filtered based on the input criteria to the
function. Columns in the output will vary depending on the user's
selections for the <code>output_vars</code> argument.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

filter_wind_data(counties = c("22071", "51700"), year_range = c(1988, 2011),
                 wind_limit = 20,
                 output_vars = c("fips", "storm_id", "vmax_sust"))
}
</code></pre>

<hr>
<h2 id='get_eastern_map'>Get map data for eastern US states</h2><span id='topic+get_eastern_map'></span>

<h3>Description</h3>

<p>Get map data for eastern US states
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_eastern_map(map = "county")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_eastern_map_+3A_map">map</code></td>
<td>
<p>A character string giving the map database from which to pull</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with map data pulled using the <code>map_data</code> function in
<code>ggplot2</code>, filtered to states in the eastern half of the United States.
</p>

<hr>
<h2 id='hurr_choropleth'>Create a map customized for this package</h2><span id='topic+hurr_choropleth'></span>

<h3>Description</h3>

<p>Creates a county choropleth map customized for displaying
hurricane exposure. This function is used as a helper function within other
mapping functions in the package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hurr_choropleth(
  map_data,
  metric = "distance",
  wind_var = "vmax_sust",
  wind_source = "modeled"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hurr_choropleth_+3A_map_data">map_data</code></td>
<td>
<p>A dataframe with columns with FIPS numbers (in numeric
class) for all counties in the eastern US (<code>region</code>) and the
exposure value (<code>value</code>)</p>
</td></tr>
<tr><td><code id="hurr_choropleth_+3A_metric">metric</code></td>
<td>
<p>Character string giving the metric to plot. Current options are
<code>"distance"</code>, <code>"wind"</code>, and <code>"rainfall"</code>. These options are used
to customize the color palette and scale of the choropleth map produced
by this function.</p>
</td></tr>
<tr><td><code id="hurr_choropleth_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="hurr_choropleth_+3A_wind_source">wind_source</code></td>
<td>
<p>A character string specifying the source to use for the winds. Options
are <code>"modeled"</code>, for estimates based on running a wind model from Best
Tracks data inputs, and <code>"ext_tracks"</code>, for estimates based on
the wind radii in the Extended Best Tracks data. See the help files for the
datasets <code>storm_winds</code> and <code>ext_tracks_wind</code> in the
<code>hurricaneexposuredata</code> package for more details on each of these sources
for wind estimates. For the gust wind estimates, these are based on applying
a gust factor of 1.49 to the sustained wind estimates in both wind data sources.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function only maps counties in states likely to be exposed
to Atlantic basin tropical storms.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object with a map of hurricane exposure in eastern
US counties
</p>

<hr>
<h2 id='interp_track'>Interpolate a storm track</h2><span id='topic+interp_track'></span>

<h3>Description</h3>

<p>This function takes a wider-spaced storm track (e.g., every 6 hours) and
interpolates to every 15 minutes. To do this, it uses natural cubic
spline interpolation using the 'spline' function from the 'stats' package.
The track is only interpolated if there are three or more observations
on the central location of the storm (this is almost always the case
for storms tracked in the HURDAT2 dataset).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interp_track(track)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interp_track_+3A_track">track</code></td>
<td>
<p>A dataframe with hurricane track data for a single storm</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with hurricane track data for a single storm,
interpolated to 15-minute intervals.
</p>

<hr>
<h2 id='map_counties'>Map counties</h2><span id='topic+map_counties'></span>

<h3>Description</h3>

<p>Map counties
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_counties(
  storm,
  metric = "distance",
  wind_var = "vmax_sust",
  days_included = c(-2, -1, 0, 1),
  add_track = TRUE,
  wind_source = "modeled"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_counties_+3A_storm">storm</code></td>
<td>
<p>Character string giving the name of the storm to plot (e.g.,
&quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="map_counties_+3A_metric">metric</code></td>
<td>
<p>Character string giving the metric to plot. Current options are
<code>"distance"</code>, <code>"wind"</code>, and <code>"rainfall"</code>. These options are used
to customize the color palette and scale of the choropleth map produced
by this function.</p>
</td></tr>
<tr><td><code id="map_counties_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="map_counties_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector listing the days to include when
calculating total precipitation. Negative numbers are days before the
closest date of the storm to a county. For example,
<code>c(-1, 0, 1)</code> would calculate rain for a county as the sum of the
rainfall for the day before, the day of, and the day after the date when
the storm center was closest to the county center. Values can range from
-5 to 3 (i.e., at most, you can calculate the total rainfall from five days
to three days after the day when the storm is closest to the
county).</p>
</td></tr>
<tr><td><code id="map_counties_+3A_add_track">add_track</code></td>
<td>
<p>TRUE / FALSE of whether to add the storm's track to the map. The
default is TRUE.</p>
</td></tr>
<tr><td><code id="map_counties_+3A_wind_source">wind_source</code></td>
<td>
<p>A character string specifying the source to use for the winds. Options
are <code>"modeled"</code>, for estimates based on running a wind model from Best
Tracks data inputs, and <code>"ext_tracks"</code>, for estimates based on
the wind radii in the Extended Best Tracks data. See the help files for the
datasets <code>storm_winds</code> and <code>ext_tracks_wind</code> in the
<code>hurricaneexposuredata</code> package for more details on each of these sources
for wind estimates. For the gust wind estimates, these are based on applying
a gust factor of 1.49 to the sustained wind estimates in both wind data sources.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function creates a choropleth map of counties in the eastern
part of the United States, showing distance from a storm track, maximum
wind speed (or duration of winds at or above 20 m / s), or total
rainfall over a given window of one or more days near the date of the storm's
closest approach.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

map_counties("Floyd-1999", metric = "rainfall", days_included = c(-2, -1, 0, 1))

map_counties("Katrina-2005", metric = "wind")
map_counties("Katrina-2005", metric = "wind", wind_var = "vmax_gust")
map_counties("Katrina-2005", metric = "wind", wind_var = "sust_dur")
map_counties("Katrina-2005", metric = "wind", wind_source = "ext_tracks")

#' map_counties("Michael-2018", metric = "wind")
map_counties("Michael-2018", metric = "wind", wind_var = "vmax_gust")
map_counties("Michael-2018", metric = "wind", wind_source = "ext_tracks")
}
</code></pre>

<hr>
<h2 id='map_distance_exposure'>Map counties with distance exposure</h2><span id='topic+map_distance_exposure'></span>

<h3>Description</h3>

<p>Map counties as &quot;exposed&quot; or &quot;unexposed&quot; based on the criterion that the
storm came within a given distance (specified by <code>dist_limit</code>) of
the county's population mean center.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_distance_exposure(storm, dist_limit, add_track = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_distance_exposure_+3A_storm">storm</code></td>
<td>
<p>Character string giving the name of the storm to plot (e.g.,
&quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="map_distance_exposure_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="map_distance_exposure_+3A_add_track">add_track</code></td>
<td>
<p>TRUE / FALSE of whether to add the storm's track to the map. The
default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plots a map showing whether eastern US counties were exposed or
unexposed to a specific storm based on a distance criterion.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {


floyd_map &lt;- map_distance_exposure(storm = "Floyd-1999", dist_limit = 75)
floyd_map

allison_map &lt;- map_distance_exposure(storm = "Allison-2001",
                                     dist_limit = 75)
map_tracks("Allison-2001", plot_points = FALSE, plot_object = allison_map)
}
</code></pre>

<hr>
<h2 id='map_event_exposure'>Map county-level exposure based on reported events</h2><span id='topic+map_event_exposure'></span>

<h3>Description</h3>

<p>Map counties as &quot;exposed&quot; or &quot;unexposed&quot; based on the criterion that the county
had an event listing of a specified type in the NOAA Storm Events database.
For more information on the underlying data, see the helpfile for the
<code>storm_events</code> dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_event_exposure(storm_id, event_type, add_track = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_event_exposure_+3A_storm_id">storm_id</code></td>
<td>
<p>Character vector with the storm for which to map events
(e.g., <code>"Katrina-2005"</code>)</p>
</td></tr>
<tr><td><code id="map_event_exposure_+3A_event_type">event_type</code></td>
<td>
<p>Character string with the type of event to use to identify
county exposures. Options include <code>"flood"</code>, <code>"tornado"</code>,
<code>"wind"</code>, and <code>"tropical_storm"</code>.</p>
</td></tr>
<tr><td><code id="map_event_exposure_+3A_add_track">add_track</code></td>
<td>
<p>TRUE / FALSE of whether to add the storm's track to the map. The
default is TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A map showing whether eastern US counties were exposed or unexposed
to a specific storm based on event listings.
</p>


<h3>Note</h3>

<p>Note that flood events are not available for any year before 1996.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

map_event_exposure(storm_id = "Floyd-1999", event_type = "flood")
map_event_exposure(storm_id = "Floyd-1999", event_type = "tornado")
map_event_exposure(storm_id = "Floyd-1999", event_type = "wind")
map_event_exposure(storm_id = "Floyd-1999", event_type = "tropical_storm")

map_event_exposure(storm_id = "Florence-2018", event_type = "flood")
map_event_exposure(storm_id = "Florence-2018", event_type = "tropical_storm")

map_event_exposure(storm_id = "Michael-2018", event_type = "wind")
map_event_exposure(storm_id = "Michael-2018", event_type = "tropical_storm")
}
</code></pre>

<hr>
<h2 id='map_rain_exposure'>Map counties with rain exposure</h2><span id='topic+map_rain_exposure'></span>

<h3>Description</h3>

<p>Map counties as &quot;exposed&quot; or &quot;unexposed&quot; based on the criteria that the
storm came within a given distance (specified by <code>dist_limit</code>) of
the county's population mean center and a certain amount of rain
<code>rain_limit</code> fell during a specified window of days (<code>days_included</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_rain_exposure(
  storm,
  rain_limit,
  dist_limit,
  days_included = c(-2, -1, 0, 1),
  add_track = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_rain_exposure_+3A_storm">storm</code></td>
<td>
<p>Character string giving the name of the storm to plot (e.g.,
&quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="map_rain_exposure_+3A_rain_limit">rain_limit</code></td>
<td>
<p>Minimum of rainfall, in millimeters, summed across the days
selected to be included (<code>days_included</code>), that must fall in a
county for the county to be classified as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="map_rain_exposure_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="map_rain_exposure_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector listing the days to include when
calculating total precipitation. Negative numbers are days before the
closest date of the storm to a county. For example,
<code>c(-1, 0, 1)</code> would calculate rain for a county as the sum of the
rainfall for the day before, the day of, and the day after the date when
the storm center was closest to the county center. Values can range from
-5 to 3 (i.e., at most, you can calculate the total rainfall from five days
to three days after the day when the storm is closest to the
county).</p>
</td></tr>
<tr><td><code id="map_rain_exposure_+3A_add_track">add_track</code></td>
<td>
<p>TRUE / FALSE of whether to add the storm's track to the map. The
default is TRUE.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

map_rain_exposure(storm = "Floyd-1999", rain_limit = 50, dist_limit = 100)

# Example of customizine track appearance
allison_map &lt;- map_rain_exposure(storm = "Allison-2001", rain_limit = 125,
                                 dist_limit = 100, days_included = -5:3,
                                 add_track = FALSE)
map_tracks("Allison-2001", plot_object = allison_map, plot_points = TRUE)
}
</code></pre>

<hr>
<h2 id='map_tracks'>Plot Atlantic basin hurricane tracks</h2><span id='topic+map_tracks'></span>

<h3>Description</h3>

<p>Plot the tracks of any selected storms in the hurricane tracking
dataset for the Atlantic basin. This function allows you to
plot a new map or add the tracks to an existing ggplot object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_tracks(
  storms,
  plot_object = NULL,
  padding = 2,
  plot_points = FALSE,
  alpha = 1,
  color = "firebrick"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_tracks_+3A_storms">storms</code></td>
<td>
<p>Character vector with the names of all storms to plot.
This parameter must use the unique storm identifiers from the
'storm_id' column of the 'hurr_tracks' dataframe.</p>
</td></tr>
<tr><td><code id="map_tracks_+3A_plot_object">plot_object</code></td>
<td>
<p>NULL or the name of a ggplot object to use as the
underlying plot object. If NULL, the function will generate a new
map of the eastern US states using 'default_map'.</p>
</td></tr>
<tr><td><code id="map_tracks_+3A_padding">padding</code></td>
<td>
<p>Numerical value giving the number of degrees to add to the
outer limits of the plot object (or default map if 'plot_object' is
left as NULL) when cropping hurricane tracks.</p>
</td></tr>
<tr><td><code id="map_tracks_+3A_plot_points">plot_points</code></td>
<td>
<p>TRUE / FALSE indicator of whether to include points,
as well as lines, when plotting the hurricane tracks. These points show
the times for which observations were recorded in the hurricane track data.</p>
</td></tr>
<tr><td><code id="map_tracks_+3A_alpha">alpha</code></td>
<td>
<p>Numerical value designating the amount of transparency to
use for plotting tracks.</p>
</td></tr>
<tr><td><code id="map_tracks_+3A_color">color</code></td>
<td>
<p>Character string giving the color to use to plot the tracks.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a ggplot object with plotting data for the storm tracks
of the selected storms. This object can be printed directly or added
to with other <code>ggplot2</code> commands.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

map_tracks(storms = "Sandy-2012")
map_tracks(storms = "Floyd-1999", plot_points = TRUE)
map_tracks(storms = c("Sandy-2012", "Floyd-1999"))
a &lt;- map_tracks(storms = "Sandy-2012", color = "blue", alpha = 0.3)
b &lt;- map_tracks(storms = "Floyd-1999", plot_object = a)
b
}
</code></pre>

<hr>
<h2 id='map_wind_exposure'>Map counties with wind exposure</h2><span id='topic+map_wind_exposure'></span>

<h3>Description</h3>

<p>Map counties as &quot;exposed&quot; or &quot;unexposed&quot; based on the criterion that the
storm had a certain wind speed (specified by <code>wind_limit</code>, in meters
per second).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>map_wind_exposure(
  storm,
  wind_var = "vmax_sust",
  wind_limit,
  add_track = TRUE,
  wind_source = "modeled"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map_wind_exposure_+3A_storm">storm</code></td>
<td>
<p>A character string giving the storm ID (e.g., &quot;Floyd-1999&quot;)</p>
</td></tr>
<tr><td><code id="map_wind_exposure_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="map_wind_exposure_+3A_wind_limit">wind_limit</code></td>
<td>
<p>A numeric vector of length one giving the minimum
wind speed (in meters per second) or duration of winds of 20 m / s or more
(in minutes) to use in the filter. The units of this variable will depend on
the user's choice for the <code>wind_var</code> parameter. If the Extended Best
Tracks wind radii are used as the source of the wind data, the sustained
winds will only be available for cutpoints of 34 knots, 50 knots, and 64
knots, so these values should be used (e.g., to get all counties with winds of
34 knots or higher, you could use <code>wind_limit = 17.4</code>, with the limit
given as a value just below 34 knots in the units meters per second).</p>
</td></tr>
<tr><td><code id="map_wind_exposure_+3A_add_track">add_track</code></td>
<td>
<p>TRUE / FALSE of whether to add the storm's track to the map. The
default is TRUE.</p>
</td></tr>
<tr><td><code id="map_wind_exposure_+3A_wind_source">wind_source</code></td>
<td>
<p>A character string specifying the source to use for the winds. Options
are <code>"modeled"</code>, for estimates based on running a wind model from Best
Tracks data inputs, and <code>"ext_tracks"</code>, for estimates based on
the wind radii in the Extended Best Tracks data. See the help files for the
datasets <code>storm_winds</code> and <code>ext_tracks_wind</code> in the
<code>hurricaneexposuredata</code> package for more details on each of these sources
for wind estimates. For the gust wind estimates, these are based on applying
a gust factor of 1.49 to the sustained wind estimates in both wind data sources.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Plots a map showing whether eastern US counties were exposed or
unexposed to a specific storm based on a wind criterion.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

map_wind_exposure(storm = "Beryl-1988", wind_limit = 15)
}
</code></pre>

<hr>
<h2 id='multi_county_distance'>Hurricane exposure by distance for communities</h2><span id='topic+multi_county_distance'></span>

<h3>Description</h3>

<p>This function takes a dataframe with multi-county communities and returns a
community-level dataframe of &quot;exposed&quot; storms, based on the shortest distance
between the storm's track and the population-based centers of each county
in the community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_county_distance(communities, start_year, end_year, dist_limit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_county_distance_+3A_communities">communities</code></td>
<td>
<p>A dataframe with the FIPS codes for all counties within
each community. It must include columns with a column identifier
(<code>commun</code>) and with the FIPS codes of counties included in each
community (<code>fips</code>). See the example code.</p>
</td></tr>
<tr><td><code id="multi_county_distance_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_distance_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_distance_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the same type dataframe as <code>county_distance</code>,
but with storms listed by community instead of county.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                         fips = c("36005", "36047", "36061",
                                  "36085", "36081", "36119",
                                  "22071", "51700"))
distance_df &lt;- multi_county_distance(communities = communities,
                                     start_year = 1995, end_year = 2005,
                                     dist_limit = 75)
}
</code></pre>

<hr>
<h2 id='multi_county_events'>Hurricane exposure by events for communities</h2><span id='topic+multi_county_events'></span>

<h3>Description</h3>

<p>This function takes a dataframe with multi-county communities and returns a
community-level dataframe of &quot;exposed&quot; storms, based on the type of the event.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_county_events(communities, start_year, end_year, event_type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_county_events_+3A_communities">communities</code></td>
<td>
<p>A dataframe with the FIPS codes for all counties within
each community. It must include columns with a column identifier
(<code>commun</code>) and with the FIPS codes of counties included in each
community (<code>fips</code>). See the example code.</p>
</td></tr>
<tr><td><code id="multi_county_events_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_events_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_events_+3A_event_type">event_type</code></td>
<td>
<p>Character string with the type of event to use to identify
county exposures. Options include <code>"flood"</code>, <code>"tornado"</code>,
<code>"wind"</code>, and <code>"tropical_storm"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the same type dataframe as <code>county_events</code>,
but with storms listed by community instead of county.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                         fips = c("36005", "36047", "36061",
                                  "36085", "36081", "36119",
                                  "22071", "51700"))
distance_df &lt;- multi_county_events(communities = communities,
                                     start_year = 1995, end_year = 2005,
                                     event_type = "flood")
}
</code></pre>

<hr>
<h2 id='multi_county_rain'>Hurricane exposure by rain for communities</h2><span id='topic+multi_county_rain'></span>

<h3>Description</h3>

<p>This function takes a dataframe with multi-county communities (see example for
the proper format) and returns a community-level dataframe of storms to which
the community was exposed, based on the average distance
between the storm's track and the population-based centers of each county
in the community and the given threshold of rainfall, summed over the days
included in the rainfall measurement.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_county_rain(
  communities,
  start_year,
  end_year,
  rain_limit,
  dist_limit,
  days_included = c(-2, -1, 0, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_county_rain_+3A_communities">communities</code></td>
<td>
<p>A dataframe with the FIPS codes for all counties within
each community. It must include columns with a column identifier
(<code>commun</code>) and with the FIPS codes of counties included in each
community (<code>fips</code>). See the example code.</p>
</td></tr>
<tr><td><code id="multi_county_rain_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_rain_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_rain_+3A_rain_limit">rain_limit</code></td>
<td>
<p>Minimum of rainfall, in millimeters, summed across the days
selected to be included (<code>days_included</code>), that must fall in a
county for the county to be classified as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="multi_county_rain_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="multi_county_rain_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector listing the days to include when
calculating total precipitation. Negative numbers are days before the
closest date of the storm to a county. For example,
<code>c(-1, 0, 1)</code> would calculate rain for a county as the sum of the
rainfall for the day before, the day of, and the day after the date when
the storm center was closest to the county center. Values can range from
-5 to 3 (i.e., at most, you can calculate the total rainfall from five days
to three days after the day when the storm is closest to the
county).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a dataframe with a row for each county-storm pair and with
columns for:
</p>

<ul>
<li><p><code>commun</code>: Each community's unique id
</p>
</li>
<li><p><code>storm_id</code>: Unique storm identifier with the storm name and year,
separated by a hyphen(e.g., &quot;Alberto-1988&quot;,
&quot;Katrina-2005&quot;)
</p>
</li>
<li><p><code>closest_date</code>: Date (based on local time) of the closest
approach of the storm to the county's population
mean center.
</p>
</li>
<li><p><code>local_time</code>: Local time of the closest approach of the storm to the
county's population mean center, based on storm tracks
linearly interpolated to 15-minute increments.
</p>
</li>
<li><p><code>closest_time_utc</code>: Time, in UTC, of the closest approach of the
storm to the county's population mean center,
based on storm tracks linearly interpolated to
15-minute increments.
</p>
</li>
<li><p><code>mean_dist</code>: Average of the minimum distance (in kilometers)
between the storm's track and the population
mean centers of all the counties in the
community.
</p>
</li>
<li><p><code>mean_rain</code>: Average of cumulative rainfall, in millimeters,
in the counties in the community for the days
selected using the <code>days_included</code> option.
</p>
</li>
<li><p><code>min_dist</code>: The smallest minimum distance (in kilometers)
between the storm's track and the population
mean centers of any of the counties in the
community.
</p>
</li>
<li><p><code>max_rain</code>: The maximum cumulative rainfall, in millimeters,
in any of the counties in the community for
the days selected using the <code>days_included</code>
option.
</p>
</li></ul>



<h3>References</h3>

<p>Al-Hamdan MZ, Crosson WL, Economou SA, Estes MG, Estes SM, Hemmings SN,
Kent ST, Puckette M, Quattrochi DA, Rickman DL, Wade GM, McClure LA, 2014.
Environmental public health applications using remotely sensed data.
Geocarto International 29(1):85-98.
</p>
<p>North America Land Data Assimilation System (NLDAS) Daily Precipitation
years 1979-2011 on CDC WONDER Online Database, released 2012.
<a href="http://wonder.cdc.gov/wonder/help/Precipitation.html">http://wonder.cdc.gov/wonder/help/Precipitation.html</a>
</p>
<p>Rui H, Mocko D, 2014. README Document for North America Land Data
Assimilation System Phase 2 (NLDAS-2) Products. Goddard Earth Sciences
Data and Information Services Center.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                         fips = c("36005", "36047", "36061",
                                  "36085", "36081", "36119",
                                  "22071", "51700"))
rain_storm_df &lt;- multi_county_rain(communities = communities,
                                   start_year = 1995, end_year = 2005,
                                   rain_limit = 100, dist_limit = 100)
}
</code></pre>

<hr>
<h2 id='multi_county_wind'>Hurricane exposure by wind for communities</h2><span id='topic+multi_county_wind'></span>

<h3>Description</h3>

<p>This function takes a dataframe with multi-county communities and returns a
community-level dataframe of &quot;exposed&quot; storms, based on the highest of the
maximum sustained wind speed for each county in the community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multi_county_wind(communities, start_year, end_year, wind_limit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multi_county_wind_+3A_communities">communities</code></td>
<td>
<p>A dataframe with the FIPS codes for all counties within
each community. It must include columns with a column identifier
(<code>commun</code>) and with the FIPS codes of counties included in each
community (<code>fips</code>). See the example code.</p>
</td></tr>
<tr><td><code id="multi_county_wind_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_wind_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="multi_county_wind_+3A_wind_limit">wind_limit</code></td>
<td>
<p>A numeric vector of length one giving the minimum
wind speed (in meters per second) or duration of winds of 20 m / s or more
(in minutes) to use in the filter. The units of this variable will depend on
the user's choice for the <code>wind_var</code> parameter. If the Extended Best
Tracks wind radii are used as the source of the wind data, the sustained
winds will only be available for cutpoints of 34 knots, 50 knots, and 64
knots, so these values should be used (e.g., to get all counties with winds of
34 knots or higher, you could use <code>wind_limit = 17.4</code>, with the limit
given as a value just below 34 knots in the units meters per second).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the same type dataframe as <code>county_rain</code>,
but with storms listed by community instead of county.
</p>


<h3>Note</h3>

<p>This function currently will only input a threshold for the sustained wind
metric. If you would like to use gust winds or duration of winds, you will need
to use the <code>county_wind</code> function to pull storms and aggregate to the
multi-county community level yourself.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                         fips = c("36005", "36047", "36061",
                                  "36085", "36081", "36119",
                                  "22071", "51700"))
wind_df &lt;- multi_county_wind(communities = communities,
                                     start_year = 1988, end_year = 2005,
                                     wind_limit = 20)
}
</code></pre>

<hr>
<h2 id='rain_exposure'>Write storm rain exposure files</h2><span id='topic+rain_exposure'></span>

<h3>Description</h3>

<p>This function takes an input of locations (either a vector of county FIPS
or a dataframe of multi-county FIPS, with all FIPS listed for each county;
see examples) and creates time series dataframes with the dates and exposures
for all storms meeting the given rainfall and storm distance criteria. These
exposure time series can then be merged with other time series (e.g.,
community-specific daily counts of health outcomes).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rain_exposure(
  locations,
  start_year,
  end_year,
  rain_limit,
  dist_limit,
  days_included = c(-2, -1, 0, 1),
  out_dir,
  out_type = "csv"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rain_exposure_+3A_locations">locations</code></td>
<td>
<p>Either a vector of FIPS county codes, for county-level
output, or a dataframe with columns for community identifier (<code>commun</code>)
and associated FIPS codes (<code>fips</code>), for multi-county community output.
See the examples for the proper format for this argument.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_rain_limit">rain_limit</code></td>
<td>
<p>Minimum of rainfall, in millimeters, summed across the days
selected to be included (<code>days_included</code>), that must fall in a
county for the county to be classified as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_dist_limit">dist_limit</code></td>
<td>
<p>Maximum distance, in kilometers, of how close the storm
track must come to the county's population mean center to classify
the county as &quot;exposed&quot; to the storm.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_days_included">days_included</code></td>
<td>
<p>A numeric vector listing the days to include when
calculating total precipitation. Negative numbers are days before the
closest date of the storm to a county. For example,
<code>c(-1, 0, 1)</code> would calculate rain for a county as the sum of the
rainfall for the day before, the day of, and the day after the date when
the storm center was closest to the county center. Values can range from
-5 to 3 (i.e., at most, you can calculate the total rainfall from five days
to three days after the day when the storm is closest to the
county).</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_out_dir">out_dir</code></td>
<td>
<p>Character string giving the pathname of the directory in which
to write output. This directory should already exist on your computer.</p>
</td></tr>
<tr><td><code id="rain_exposure_+3A_out_type">out_type</code></td>
<td>
<p>Character string giving the type of output files you'd like.
Options are <code>"csv"</code> (default) and <code>"rds"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function writes out rain exposure files for each county or
community indicated to the specified output directory (<code>out_dir</code>).
For more details on the columns in the output files, see the
documentation for <code><a href="#topic+county_rain">county_rain</a></code> and
<code><a href="#topic+multi_county_rain">multi_county_rain</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

# For these examples, you need to have a directory in your home
# directory called "tmp".

# By county
rain_exposure(locations = c("22071", "51700"),
              start_year = 1995, end_year = 2005,
              rain_limit = 100, dist_limit = 100,
              out_dir = "~/tmp/storms")

# For multi-county communities
communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                          fips = c("36005", "36047", "36061",
                          "36085", "36081", "36119",
                          "22071", "51700"))
rain_exposure(locations = communities,
              start_year = 1995, end_year = 2005,
              rain_limit = 100, dist_limit = 100,
              out_dir = "~/tmp/storms")
}

## End(Not run)
</code></pre>

<hr>
<h2 id='wind_exposure'>Write storm wind exposure files</h2><span id='topic+wind_exposure'></span>

<h3>Description</h3>

<p>This function takes an input of locations (either a vector of county FIPS
or a dataframe of multi-county FIPS, with all FIPS listed for each county)
and creates time series dataframes that can be merged with health time series,
giving the dates and exposures for all storms meeting the given
storm wind criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind_exposure(
  locations,
  start_year,
  end_year,
  wind_limit,
  wind_var,
  out_dir,
  out_type = "csv"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind_exposure_+3A_locations">locations</code></td>
<td>
<p>Either a vector of FIPS county codes, for county-level
output, or a dataframe with columns for community identifier (<code>commun</code>)
and associated FIPS codes (<code>fips</code>), for multi-county community output.
See the examples for the proper format for this argument.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_start_year">start_year</code></td>
<td>
<p>Four-digit integer with first year to consider.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_end_year">end_year</code></td>
<td>
<p>Four-digit integer with last year to consider.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_wind_limit">wind_limit</code></td>
<td>
<p>Vector giving the wind speed (in m / s) to use as a
threshold for classifying a county as &quot;exposed&quot; to a specific storm.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_wind_var">wind_var</code></td>
<td>
<p>A character string giving the wind variable to use. Choices
are <code>"vmax_sust"</code> (maximum sustained winds; default), <code>"vmax_gust"</code>
(maximum gust winds), <code>"sust_dur"</code> (minutes of sustained winds of 20 m / s
or higher) and <code>"gust_dur"</code> (minutes of gust winds of 20 m / s or higher).
If the Extended Best Tracks wind radii are used as the source of wind data,
the <code>"gust_dur"</code> option cannot be selected.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_out_dir">out_dir</code></td>
<td>
<p>Character string giving the pathname of the directory in which
to write output. This directory should already exist on your computer.</p>
</td></tr>
<tr><td><code id="wind_exposure_+3A_out_type">out_type</code></td>
<td>
<p>Character string giving the type of output files you'd like.
Options are <code>"csv"</code> (default) and <code>"rds"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Writes out a directory with rain exposure files for each county or
community indicated. For more on the columns in this output, see the
documentation for <code><a href="#topic+county_wind">county_wind</a></code> and
<code><a href="#topic+multi_county_wind">multi_county_wind</a></code>.
</p>


<h3>Note</h3>

<p>This function allows you to use different wind variables (sustained winds, which
is the default; gust winds; duration of sustained winds; duration of gust winds)
when pulling exposures by county. However, if pulling multi-county communities,
currently only the sustained winds metric can be used with this function.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Ensure that data package is available before running the example.
#  If it is not, see the `hurricaneexposure` package vignette for details
# on installing the required data package.
if (requireNamespace("hurricaneexposuredata", quietly = TRUE)) {

# You will need a directory named "tmp" in your home directory to
# run these examples.

# By county
wind_exposure(locations = c("22071", "51700"),
              start_year = 1988, end_year = 2005,
              wind_limit = 10,
              out_dir = "~/tmp/storms")

# For multi-county communities
communities &lt;- data.frame(community_name = c(rep("ny", 6), "no", "new"),
                          fips = c("36005", "36047", "36061",
                          "36085", "36081", "36119",
                          "22071", "51700"))
wind_exposure(locations = communities,
              start_year = 1988, end_year = 2005,
              wind_limit = 10,
              out_dir = "~/tmp/storms")
}

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
