<!DOCTYPE html><html><head><title>Help for package ISRaD</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ISRaD}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#check_numeric_minmax'><p>Check that a column is strictly numeric.</p></a></li>
<li><a href='#check_template_info_columns'><p>Check that column names in the info and template files match.</p></a></li>
<li><a href='#checkTemplateFiles'><p>Check ISRaD Template/Info files</p></a></li>
<li><a href='#compile'><p>Compile ISRaD data product</p></a></li>
<li><a href='#convert_fm_d14c'><p>convert_fm_d14c</p></a></li>
<li><a href='#future14C'><p>Future atmospheric 14C dataset for delta-delta calculation</p></a></li>
<li><a href='#Gaudinski_2001'><p>Gaudinski 2001 example dataset</p></a></li>
<li><a href='#Graven_2017'><p>Graven dataset for delta-delta calculation</p></a></li>
<li><a href='#Hua_2021'><p>Hua 2021 dataset for delta-delta calculation</p></a></li>
<li><a href='#is_israd_database'><p>Check whether an object is a valid ISRaD database.</p></a></li>
<li><a href='#ISRaD.extra'><p>ISRaD.extra</p></a></li>
<li><a href='#ISRaD.extra.calc_atm14c'><p>ISRaD.extra.calc_atm14c</p></a></li>
<li><a href='#ISRaD.extra.Cstocks'><p>ISRaD.extra.Cstocks</p></a></li>
<li><a href='#ISRaD.extra.delta_delta'><p>ISRaD.extra.delta_delta</p></a></li>
<li><a href='#ISRaD.extra.fill_CN'><p>ISRaD.extra.fill_c_to_n</p></a></li>
<li><a href='#ISRaD.extra.fill_coords'><p>ISRaD.extra.fill_coords</p></a></li>
<li><a href='#ISRaD.extra.fill_country'><p>ISRaD.extra.fill_country</p></a></li>
<li><a href='#ISRaD.extra.fill_dates'><p>ISRaD.extra.fill_dates</p></a></li>
<li><a href='#ISRaD.extra.fill_rc'><p>ISRaD.extra.fill_14c</p></a></li>
<li><a href='#ISRaD.extra.geospatial'><p>ISRaD.extra.geospatial</p></a></li>
<li><a href='#ISRaD.extra.geospatial.keys'><p>ISRaD.extra.geospatial.keys</p></a></li>
<li><a href='#ISRaD.extra.norm14c_year'><p>ISRaD.extra.norm14c_year</p></a></li>
<li><a href='#ISRaD.flatten'><p>ISRaD.flatten</p></a></li>
<li><a href='#ISRaD.getdata'><p>ISRaD.getdata</p></a></li>
<li><a href='#ISRaD.read.entry'><p>ISRaD.read.entry</p></a></li>
<li><a href='#ISRaD.rep.count.all'><p>ISRaD.rep.count.all</p></a></li>
<li><a href='#ISRaD.rep.count.frc'><p>ISRaD.rep.count.frc</p></a></li>
<li><a href='#ISRaD.rep.entry.stats'><p>ISRaD.rep.entry.stats</p></a></li>
<li><a href='#ISRaD.rep.site.map'><p>ISRaD.rep.site.map</p></a></li>
<li><a href='#ISRaD.report'><p>ISRaD.report</p></a></li>
<li><a href='#ISRaD.save.entry'><p>ISRaD.save.entry</p></a></li>
<li><a href='#lapply_df'><p>Run <code>lapply</code>, converting result to a data frame.</p></a></li>
<li><a href='#QAQC'><p>QAQC</p></a></li>
<li><a href='#read_template_file'><p>Read in the template file.</p></a></li>
<li><a href='#read_template_info_file'><p>Read in the template info file.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Tools and Data for the International Soil Radiocarbon Database</td>
</tr>
<tr>
<td>Version:</td>
<td>2.5.5</td>
</tr>
<tr>
<td>Description:</td>
<td>This is the central location for data and tools for the development,
    maintenance, analysis, and deployment of the International Soil Radiocarbon Database
    (ISRaD). ISRaD was developed as a collaboration between the U.S. Geological Survey
    Powell Center and the Max Planck Institute for Biogeochemistry. This R package provides
    tools for accessing and manipulating ISRaD data, compiling local data using the ISRaD
    data structure, and simple query and reporting functions for ISRaD. For more detailed
    information visit the ISRaD website at: <a href="https://soilradiocarbon.org/">https://soilradiocarbon.org/</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>readxl, writexl, terra, dplyr (&ge; 0.8), tidyr (&ge; 1.0), RCurl,
ggplot2, maps, httr, rio, rnaturalearth, sf</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-20 18:46:58 UTC; jeff</td>
</tr>
<tr>
<td>Author:</td>
<td>Alison Hoyt [aut],
  Jeffrey Beem-Miller [aut, cre],
  Shane Stoner [aut],
  J. Grey Monroe [aut],
  Caitlin Hicks-Pries [aut],
  Paul A. Levine [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeffrey Beem-Miller &lt;jbeem@bgc-jena.mpg.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-21 06:50:17 UTC</td>
</tr>
</table>
<hr>
<h2 id='check_numeric_minmax'>Check that a column is strictly numeric.</h2><span id='topic+check_numeric_minmax'></span>

<h3>Description</h3>

<p>Check that a column is strictly numeric.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_numeric_minmax(x, xname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_numeric_minmax_+3A_x">x</code></td>
<td>
<p>Column values, a vector</p>
</td></tr>
<tr><td><code id="check_numeric_minmax_+3A_xname">xname</code></td>
<td>
<p>Column name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing (run for its warning side effect).
</p>

<hr>
<h2 id='check_template_info_columns'>Check that column names in the info and template files match.</h2><span id='topic+check_template_info_columns'></span>

<h3>Description</h3>

<p>Check that column names in the info and template files match.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_template_info_columns(template, template_info, outfile, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_template_info_columns_+3A_template">template</code></td>
<td>
<p>Template structure read in from <code>ISRaD_Master_Template.xlsx</code></p>
</td></tr>
<tr><td><code id="check_template_info_columns_+3A_template_info">template_info</code></td>
<td>
<p>Template info structure read from <code>ISRaD_Template_Info.xlsx</code></p>
</td></tr>
<tr><td><code id="check_template_info_columns_+3A_outfile">outfile</code></td>
<td>
<p>File output is being written to</p>
</td></tr>
<tr><td><code id="check_template_info_columns_+3A_verbose">verbose</code></td>
<td>
<p>Print output? Logical</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if any mismatches occur.
</p>


<h3>Note</h3>

<p>This is typically called only from <code><a href="#topic+checkTemplateFiles">checkTemplateFiles</a></code>.
</p>

<hr>
<h2 id='checkTemplateFiles'>Check ISRaD Template/Info files</h2><span id='topic+checkTemplateFiles'></span>

<h3>Description</h3>

<p>Check that the template information file and the template file match appropriately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkTemplateFiles(outfile = "", verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkTemplateFiles_+3A_outfile">outfile</code></td>
<td>
<p>file to dump the output report. Defaults to an empty string that will print
to standard output</p>
</td></tr>
<tr><td><code id="checkTemplateFiles_+3A_verbose">verbose</code></td>
<td>
<p>if TRUE (default) will print output to specified outfile</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Used in compile() function, but primarily a development tool
</p>


<h3>Value</h3>

<p>Nothing (run for side effects).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>checkTemplateFiles()
</code></pre>

<hr>
<h2 id='compile'>Compile ISRaD data product</h2><span id='topic+compile'></span>

<h3>Description</h3>

<p>Compiles template files into ISRaD database format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile(
  dataset_directory,
  write_report = FALSE,
  write_out = FALSE,
  return_type = c("none", "list")[2],
  checkdoi = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_+3A_dataset_directory">dataset_directory</code></td>
<td>
<p>Directory where completed QAQCed template files are stored.</p>
</td></tr>
<tr><td><code id="compile_+3A_write_report">write_report</code></td>
<td>
<p>Boolean flag to write a log file of the
compilation. File will be in the specified
dataset_directory at &quot;database/ISRaD_log.txt&quot;. If a file with this name already
exists in this directory it will be overwritten.</p>
</td></tr>
<tr><td><code id="compile_+3A_write_out">write_out</code></td>
<td>
<p>Set to TRUE to write the compiled database file in .xlsx format
in dataset_directory</p>
</td></tr>
<tr><td><code id="compile_+3A_return_type">return_type</code></td>
<td>
<p>A string that defines return object.
Acceptable values are &quot;none&quot; or &quot;list&quot;; default is &quot;list&quot;.</p>
</td></tr>
<tr><td><code id="compile_+3A_checkdoi">checkdoi</code></td>
<td>
<p>Set to FALSE if you do not want to validate DOIs during QAQC. (Warning: time consuming).</p>
</td></tr>
<tr><td><code id="compile_+3A_verbose">verbose</code></td>
<td>
<p>Set to TRUE to print results of function to console.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
entry &lt;- ISRaD::Gaudinski_2001
# Save as .xlsx file
ISRaD.save.entry(
  entry = entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD"),
  outfile = file.path(tempdir(), "Gaudinski_2001.xlsx")
)
# Compile .xlsx file/s in dataset_directory into ISRaD database object
ISRaD.compiled &lt;- compile(tempdir(),
  write_report = TRUE, write_out = TRUE,
  return_type = "list", checkdoi = FALSE, verbose = TRUE
)


</code></pre>

<hr>
<h2 id='convert_fm_d14c'>convert_fm_d14c</h2><span id='topic+convert_fm_d14c'></span>

<h3>Description</h3>

<p>convert fraction modern to d14c and d14c to fraction modern
</p>


<h3>Usage</h3>

<pre><code class='language-R'>convert_fm_d14c(fm = NA, d14c = NA, obs_date_y, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="convert_fm_d14c_+3A_fm">fm</code></td>
<td>
<p>fraction modern</p>
</td></tr>
<tr><td><code id="convert_fm_d14c_+3A_d14c">d14c</code></td>
<td>
<p>delta 14c in per mille</p>
</td></tr>
<tr><td><code id="convert_fm_d14c_+3A_obs_date_y">obs_date_y</code></td>
<td>
<p>year of observation/sample collection</p>
</td></tr>
<tr><td><code id="convert_fm_d14c_+3A_verbose">verbose</code></td>
<td>
<p>prints message stating which conversion was performed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Convenience function for radiocarbon unit conversions. Recommended to set verbose = FALSE for batch conversions.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'>convert_fm_d14c(fm = 0.97057, obs_date_y = 2005)
convert_fm_d14c(d14c = -35.86611, obs_date_y = 2005)
</code></pre>

<hr>
<h2 id='future14C'>Future atmospheric 14C dataset for delta-delta calculation</h2><span id='topic+future14C'></span>

<h3>Description</h3>

<p>Predicted atmospheric 14C data for 2020-2025.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(future14C)
</code></pre>


<h3>Format</h3>

<p>dataframe
</p>


<h3>Details</h3>

<p>Future atmospheric 14C predictions for the period 2020 to 2025 are projected using a time series  model trained on data covering the period 2000-2019. See Sierra (2018) for model details.<br /><br />
</p>


<h3>References</h3>

<p>Sierra, C. &quot;Forecasting atmospheric radiocarbon decline to pre-bomb values&quot;, Radiocarbon, Vol 60, Nr 4, 2018, p 1055.1066 DOI:10.1017/RDC.2018.33
</p>

<hr>
<h2 id='Gaudinski_2001'>Gaudinski 2001 example dataset</h2><span id='topic+Gaudinski_2001'></span>

<h3>Description</h3>

<p>Gaudinski_2001 data set
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Gaudinski_2001)
</code></pre>


<h3>Format</h3>

<p>list
</p>


<h3>Details</h3>

<p>Example of an ISRaD entry. Selected as an example dataset as it contains data in all 8 tables of the ISRaD data structure: metadata, site, profile, flux, layer, interstitial, fraction, incubation.
</p>


<h3>References</h3>

<p>Gaudinski, J., 2001, Belowground carbon cycling in three temperate forests of the eastern United States, University of California Irvine, Ph.D. thesis
</p>

<hr>
<h2 id='Graven_2017'>Graven dataset for delta-delta calculation</h2><span id='topic+Graven_2017'></span>

<h3>Description</h3>

<p>Atmospheric 14C and 13C data for the period 1850-2016.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Graven_2017)
</code></pre>


<h3>Format</h3>

<p>dataframe
</p>


<h3>Details</h3>

<p>Data from Graven et al., 2017. Annual timestep. Three zones for 14C: 1) northern hemisphere, &quot;NHc14&quot; &gt; 30 deg N, 2) southern hemisphere, &quot;SHc14&quot; &gt; 30 deg S, 3) tropics, &quot;Tropicsc14&quot; &lt; 30 deg N &amp; &lt; 30 deg S. 13C data are the global annual averages.
</p>


<h3>References</h3>

<p>Graven, H., Allison, C. E., Etheridge, D. M., Hammer, S., Keeling, R. F., Levin, I., Meijer, H. A. J., Rubino, M., Tans, P. P., Trudinger, C. M., Vaughn, B. H., and White, J. W. C.: Compiled records of carbon isotopes in atmospheric CO2 for historical simulations in CMIP6, Geosci. Model Dev., 10, 4405–4417, https://doi.org/10.5194/gmd-10-4405-2017, 2017.
</p>

<hr>
<h2 id='Hua_2021'>Hua 2021 dataset for delta-delta calculation</h2><span id='topic+Hua_2021'></span>

<h3>Description</h3>

<p>Atmospheric 14C data for the period 1941-2019.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(Hua_2021)
</code></pre>


<h3>Format</h3>

<p>dataframe
</p>


<h3>Details</h3>

<p>Data from Hua et al., 2021. Original dataset had subannual resolution and five atmospheric zones: three in the northern hemisphere, two in the southern hemisphere (cf. Fig. 1, Hua et al., 2021). Data here are smoothed to annual means and averaged across the northern and southern hemispheres, yielding two atmopsheric zones: 1) northern hemisphere, &quot;NH14C&quot; &gt; 0 deg N, 2) southern hemisphere, &quot;SH14C&quot; &gt; 0 deg S. Original data available in supplemental table 2 of Hua et al. (2021), or from the SoilR package as object 'Hua2021' (note the data object has a different name in this package to prevent data masking).
</p>


<h3>References</h3>

<p>Hua, Q., Turnbull, J., Santos, G., Rakowski, A., Ancapichún, S., De Pol-Holz, R., . . . Turney, C. (2022). ATMOSPHERIC RADIOCARBON FOR THE PERIOD 1950–2019. Radiocarbon, 64(4), 723-745. doi:10.1017/RDC.2021.95
</p>

<hr>
<h2 id='is_israd_database'>Check whether an object is a valid ISRaD database.</h2><span id='topic+is_israd_database'></span>

<h3>Description</h3>

<p>A valid ISRaD database is a list with the following elements,
all of which must be <code><a href="base.html#topic+data.frame">data.frame</a></code> objects:
</p>

<ul>
<li><p><code>metadata</code> Metadata
</p>
</li>
<li><p><code>site</code> Site data
</p>
</li>
<li><p><code>profile</code> Profile data
</p>
</li>
<li><p><code>flux</code> Flux data
</p>
</li>
<li><p><code>layer</code> Layer data
</p>
</li>
<li><p><code>interstitial</code> Interstitial data
</p>
</li>
<li><p><code>fraction</code> Fraction data
</p>
</li>
<li><p><code>incubation</code> Incubation data
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>is_israd_database(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_israd_database_+3A_x">x</code></td>
<td>
<p>The object to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE.
</p>

<hr>
<h2 id='ISRaD.extra'>ISRaD.extra</h2><span id='topic+ISRaD.extra'></span>

<h3>Description</h3>

<p>Fills transformed and geospatial data where possible to generate an enhanced version of ISRaD.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra(database, geodata_directory)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object</p>
</td></tr>
<tr><td><code id="ISRaD.extra_+3A_geodata_directory">geodata_directory</code></td>
<td>
<p>directory where geospatial data are found</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Fills fraction modern, delta 14C, delta-delta, profile coordinates, bulk density, organic C concentration, and SOC stocks from entered data; fills soil and climatic data from external geospatial data products
</p>


<h3>Value</h3>

<p>New ISRaD_extra object with derived, transformed, and filled columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill ISRaD.extra data
database.x &lt;- ISRaD.extra(database,
  geodata_directory = system.file("extdata", "geodata_directory", package = "ISRaD")
)

</code></pre>

<hr>
<h2 id='ISRaD.extra.calc_atm14c'>ISRaD.extra.calc_atm14c</h2><span id='topic+ISRaD.extra.calc_atm14c'></span>

<h3>Description</h3>

<p>Calculates atmospheric 14c in the year of sampling for each record in an ISRaD object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.calc_atm14c(database, future = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.calc_atm14c_+3A_database">database</code></td>
<td>
<p>ISRaD object</p>
</td></tr>
<tr><td><code id="ISRaD.extra.calc_atm14c_+3A_future">future</code></td>
<td>
<p>Project atmospheric radiocarbon into the future?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates new column for atmospheric 14c (xxx_atm14c). Observation year and profile coordinates must be filled (use ISRaD.extra.fill_dates, and ISRaD.extra.fill_coords functions). The relevant atmospheric 14C data (northern or southern hemisphere) are determined by profile coordinates.<br /><br />
Atmospheric zones are limited to the northern or southern hemisphere, as differences in 14C in the source data (Hua et al., 2021) within either the northern or southern hemisphere are essentially zero after ~1980, and this is the period over which the majority of data in ISRaD were collected.<br /><br />
Future atmospheric 14C predictions for the period 2020 to 2025 are projected using a time series  model trained on data covering the period 2000-2019 (cf. Sierra, 2018).<br /><br />
</p>


<h3>Value</h3>

<p>ISRaD_data object with new atmospheric zone and atmospheric 14C columns in relevant tables.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller and C. Hicks-Pries
</p>


<h3>References</h3>

<p>Hua, Q., Turnbull, J., Santos, G., Rakowski, A., Ancapichún, S., De Pol-Holz, R., . . . Turney, C. (2022). ATMOSPHERIC RADIOCARBON FOR THE PERIOD 1950–2019. Radiocarbon, 64(4), 723-745. doi:10.1017/RDC.2021.95
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database.x &lt;- ISRaD.extra.fill_coords(database)
# Fill dates
database.x &lt;- ISRaD.extra.fill_dates(database.x)
# Fill delta 14C from fraction modern
database.x &lt;- ISRaD.extra.fill_rc(database.x)
# Fill atmospheric 14c
database.x &lt;- ISRaD.extra.calc_atm14c(database.x)
</code></pre>

<hr>
<h2 id='ISRaD.extra.Cstocks'>ISRaD.extra.Cstocks</h2><span id='topic+ISRaD.extra.Cstocks'></span>

<h3>Description</h3>

<p>Calculates soil organic carbon stock
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.Cstocks(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.Cstocks_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function first fills lyr_bd_samp, lyr_c_org, lyr_c_org, lyr_coarse_tot. Notes:<br /><br /> 1) SOC stocks can only be calculated if organic carbon concentration and bulk density data are available<br /><br /> 2) SOC stocks are calculated for the fine earth fraction (&lt;2mm).
</p>


<h3>Value</h3>

<p>ISRaD_data object with filled columns &quot;lyr_coarse_tot_filled&quot;, &quot;lyr_bd_samp_filled&quot;, &quot;lyr_c_inorg_filled&quot;, &quot;lyr_c_org_filled&quot;, &quot;lyr_soc_filled&quot;.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
database.x &lt;- ISRaD.extra.Cstocks(database)
</code></pre>

<hr>
<h2 id='ISRaD.extra.delta_delta'>ISRaD.extra.delta_delta</h2><span id='topic+ISRaD.extra.delta_delta'></span>

<h3>Description</h3>

<p>Calculates the difference between sample delta 14c and the atmosphere for the year of collection (delta-delta)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.delta_delta(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.delta_delta_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates new column for delta-delta value. Function &quot;ISRaD.extra.calc_atm14c&quot; should be run first.
</p>


<h3>Value</h3>

<p>ISRaD_data object with new delta-delta columns in relevant tables.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database.x &lt;- ISRaD.extra.fill_coords(database)
# Fill dates
database.x &lt;- ISRaD.extra.fill_dates(database.x)
# Fill delta 14C from fraction modern
database.x &lt;- ISRaD.extra.fill_rc(database.x)
# Fill atmospheric 14c
database.x &lt;- ISRaD.extra.calc_atm14c(database.x)
# Fill delta delta
database.x &lt;- ISRaD.extra.delta_delta(database.x)
</code></pre>

<hr>
<h2 id='ISRaD.extra.fill_CN'>ISRaD.extra.fill_c_to_n</h2><span id='topic+ISRaD.extra.fill_CN'></span>

<h3>Description</h3>

<p>Calculates missing C:N ratios for records with reported C and N data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.fill_CN(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.fill_CN_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When possible, missing C:N ratios are calculated for records in the layer and fraction tables using reported values for organic C and total N. Variable &quot;lyr_c_org_filled&quot; must exist for function to work on layer table data. If you are running the function on a standard ISRaD database object (i.e. NOT ISRaD_extra) it is recommended to run the function &quot;ISRaD.extra.Cstocks&quot; first in order to create and fill the required &quot;lyr_c_org_filled&quot; column.
</p>


<h3>Value</h3>

<p>ISRaD database object with gap-filled C:N data in new column &quot;&quot;
</p>


<h3>Author(s)</h3>

<p>Shane Stoner &amp; J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Create lyr_c_org_filled column
database.x &lt;- ISRaD.extra.Cstocks(database)
# Fill CN data
database.x &lt;- ISRaD.extra.fill_CN(database.x)
</code></pre>

<hr>
<h2 id='ISRaD.extra.fill_coords'>ISRaD.extra.fill_coords</h2><span id='topic+ISRaD.extra.fill_coords'></span>

<h3>Description</h3>

<p>Fills profile coordinates from site coordinates if profile coordinates not reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.fill_coords(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.fill_coords_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ISRaD_data object with filled profile coordinates.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database.x &lt;- ISRaD.extra.fill_coords(database)
</code></pre>

<hr>
<h2 id='ISRaD.extra.fill_country'>ISRaD.extra.fill_country</h2><span id='topic+ISRaD.extra.fill_country'></span>

<h3>Description</h3>

<p>Fills country code from profile coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.fill_country(database, continent = FALSE, region = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.fill_country_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object.</p>
</td></tr>
<tr><td><code id="ISRaD.extra.fill_country_+3A_continent">continent</code></td>
<td>
<p>Boolean noting whether a column should be added for extracted continent (8 continent model, including Oceania)</p>
</td></tr>
<tr><td><code id="ISRaD.extra.fill_country_+3A_region">region</code></td>
<td>
<p>Boolean noting whether a column should be added for extracted subregion</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ISRaD_data object with extracted country names.
</p>


<h3>Author(s)</h3>

<p>Shane Stoner &amp; J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database.x &lt;- ISRaD.extra.fill_coords(database)
# Fill country
database.x &lt;- ISRaD.extra.fill_country(database.x)
</code></pre>

<hr>
<h2 id='ISRaD.extra.fill_dates'>ISRaD.extra.fill_dates</h2><span id='topic+ISRaD.extra.fill_dates'></span>

<h3>Description</h3>

<p>Fills frc_obs_date_y and inc_obs_date_y columns from lyr_obs_date_y if not reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.fill_dates(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.fill_dates_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>QAQC does not require frc_obs_date_y or inc_obs_date_y fields to be filled in. Therefore it is recommended to run this function prior to running the functions &quot;ISRaD.extra.fill_rc&quot; and &quot;ISRaD.extra.calc_atm14c&quot;, which require xxx_obs_date_y data.
</p>


<h3>Value</h3>

<p>ISRaD_data object with filled frc_obs_date_y and inc_obs_date_y fields.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill dates
database.x &lt;- ISRaD.extra.fill_dates(database)
# Fraction table now has lyr_obs_date_y values in frc_obs_date_y field
</code></pre>

<hr>
<h2 id='ISRaD.extra.fill_rc'>ISRaD.extra.fill_14c</h2><span id='topic+ISRaD.extra.fill_rc'></span>

<h3>Description</h3>

<p>Fills delta 14c or fraction modern data if either are missing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.fill_rc(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.fill_rc_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Warning: xxx_obs_date_y columns must be filled for this to work! This function also fills standard deviation and sigma values. Note that this function replaces two older functions (&quot;ISRaD.extra.fill_fm&quot; and &quot;ISRaD.extra.fill_14c&quot;) from ISRaD v1.0 that did not work properly.
</p>


<h3>Value</h3>

<p>ISRaD_data object with filled radiocarbon data columns in all tables
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller &amp; A. Hoyt
</p>


<h3>References</h3>

<p>Stuiver and Polach, 1977
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Note that some flx_14c values are NA
is.na(database$flux$flx_14c)
is.na(database$layer$lyr_14c)
# Fill dates
database.x &lt;- ISRaD.extra.fill_dates(database)
# Fill rc values
database.x &lt;- ISRaD.extra.fill_rc(database.x)
# Missing radiocarbon data has now been filled if possible, e.g. column flx_14c in the "flux" table
is.na(database$flux$flx_14c)
</code></pre>

<hr>
<h2 id='ISRaD.extra.geospatial'>ISRaD.extra.geospatial</h2><span id='topic+ISRaD.extra.geospatial'></span>

<h3>Description</h3>

<p>Extracts data from a user-supplied raster file and adds data as a new variable at the profile level
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.geospatial(
  database,
  geodata_directory,
  CRS = "+proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.geospatial_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object</p>
</td></tr>
<tr><td><code id="ISRaD.extra.geospatial_+3A_geodata_directory">geodata_directory</code></td>
<td>
<p>Directory where geospatial data are found</p>
</td></tr>
<tr><td><code id="ISRaD.extra.geospatial_+3A_crs">CRS</code></td>
<td>
<p>Coordinate reference system used for geospatial datasets</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generic function that uses geographic coordinates of profiles to extract data from one or more raster files.
Raster data will be added as new variables at the profile level.<br /><br />
The new variable name will be a concatenation of &quot;pro_&quot;, and the file name (excluding the file extension).
The ISRaD file name convention for geospatial files uses a 6 component string, separated by &quot;_&quot;. Missing components can be replaced with &quot;x&quot; (&quot;x&quot;s will be dropped before creating variable names). The 6 components are as follows:<br /><br />
1) Short description of the data type, e.g. &quot;bd&quot; for bulk density<br />
2) Top layer depth or exact depth (numeric, cm)<br />
3) Bottom layer depth (numeric, cm)<br />
4) Year of data observation (numeric)<br />
5) Data units (e.g. mmyr for mean annual precipitation)<br />
6) Any relevant notes<br /><br />
Coordinate reference system can be specified with the &quot;CRS&quot; argument; default is WGS84. Note that all files in geodata_directory must use the same CRS.<br /><br />
</p>


<h3>Value</h3>

<p>Updated ISRaD_extra object with new columns at the profile level
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database &lt;- ISRaD.extra.fill_coords(database)
# Run function
# Note that geospatial data in pkg is only for the Gaudinski_2001 dataset
# Users may supply their own geospatial data as long as it can be read by the raster package
database.x &lt;- ISRaD.extra.geospatial(database,
  geodata_directory = system.file("extdata", "geodata_directory", package = "ISRaD")
)


</code></pre>

<hr>
<h2 id='ISRaD.extra.geospatial.keys'>ISRaD.extra.geospatial.keys</h2><span id='topic+ISRaD.extra.geospatial.keys'></span>

<h3>Description</h3>

<p>Recode numeric values from categorical geospatial data products
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.geospatial.keys(database, geodata_keys)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.geospatial.keys_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object</p>
</td></tr>
<tr><td><code id="ISRaD.extra.geospatial.keys_+3A_geodata_keys">geodata_keys</code></td>
<td>
<p>directory where geospatial data are found</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Generic function that reads .csv files paired with categorical raster data and recodes extracted data in the ISRaD_extra object.
For the function to work, the .csv filenames must be identical to the corresponding raster filenames (except for the file extension).
Additionally, the first column of the .csv file must contain the numeric identifier and the remaining column/s the corresponding character value/s.
</p>


<h3>Value</h3>

<p>Updated ISRaD_extra object with recoded columns.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database &lt;- ISRaD.extra.fill_coords(database)
# Fill geospatial data
database.x &lt;- ISRaD.extra.geospatial(database,
  geodata_directory = system.file("extdata", "geodata_directory", package = "ISRaD")
)
# Recode numeric data to categorical
database.x &lt;- ISRaD.extra.geospatial.keys(database.x,
  geodata_keys = system.file("extdata", "geodata_keys", package = "ISRaD")
)


</code></pre>

<hr>
<h2 id='ISRaD.extra.norm14c_year'>ISRaD.extra.norm14c_year</h2><span id='topic+ISRaD.extra.norm14c_year'></span>

<h3>Description</h3>

<p>Normalizes delta 14c values to a given year (norm_year)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.extra.norm14c_year(
  obs_d14c,
  obs_year,
  atm_zone,
  norm_year,
  df,
  slow = TRUE,
  tau = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_obs_d14c">obs_d14c</code></td>
<td>
<p>column name in df with observed delta 14c values to be normalized OR numeric value</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_obs_year">obs_year</code></td>
<td>
<p>column name in df with year in which obs_d14c was observed (sample collection year) OR numeric value</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_atm_zone">atm_zone</code></td>
<td>
<p>column name in df with atmospheric zone for obs_d14c OR character string. Notes: column values/character string must be one of c(&quot;NH14C&quot;, &quot;SH14C&quot;). &quot;NH14C&quot; &gt; 0 degrees latitude N; &quot;SHC14&quot; &gt; 0 latitude S.</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_norm_year">norm_year</code></td>
<td>
<p>desired normalization year (numeric)</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_df">df</code></td>
<td>
<p>data frame with columns for observed d14c (obs_d14c), observation year (obs_year), and atmospheric zone (atm_zone)</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_slow">slow</code></td>
<td>
<p>if TRUE (default) normalized 14c value will be fit using the slower solution for tau</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_tau">tau</code></td>
<td>
<p>if TRUE (default) the solution for tau will be returned along with the normalized 14c value</p>
</td></tr>
<tr><td><code id="ISRaD.extra.norm14c_year_+3A_verbose">verbose</code></td>
<td>
<p>Show progress bar? TRUE/FALSE (default = TRUE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be run on a data frame or with single value input. For the data frame method, the inputs 'obs_d14c', 'obs_year', and 'atm_zone' correspond to column names in the supplied data frame (see Example 1). For the single value method, the inputs for 'obs_d14c', 'obs_year', and 'atm_zone' are single values (Example 2).<br /><br />
The function works by creating a one pool steady-state model using atmospheric 14c over the period 1850 to 2021. Turnover time (tau^-1) is determined by fitting the model to the observed delta 14c (obs_d14c) in the given observation year (obs_year), and the normalized 14c value is calculated by running the model forwards or backwards to the desired normalization year (norm_year). Note that highly negative values of delta 14c (e.g. &lt; -100) are unaffected by normalization and are thus returned unchanged by the function.<br /><br />
The curvature of the bomb peak can lead to two viable solutions for tau in a one pool model. Determining which value is more appropriate depends on the carbon dynamics of the system and thus cannot be determined a priori (Trumbore 2000). The 'slow' parameter can be used to select which tau is used for calculating the normalized 14c value. If 'slow' = TRUE, and the algorithm is able to find two solutions for tau, the function will return normalized 14c values calculated with the slower of the two turnover time solutions. If &quot;slow&quot; = FALSE, the faster turnover time is used.<br /><br />
In certain cases the algorithm used to determine tau fails to converge. This situation arises when observed radiocarbon values are too high relative to the year of observation. This problem is well documented (Gaudinski et al. 2000), and can be solved by introducing a time-lag for the carbon inputs to the system. However, this functionality is beyond the scope of this function. If the algorithm fails to converge, the function will select the tau value giving the closest match for observed 14c in the given observation year and return norm_error = &quot;TRUE&quot;.<br /><br />
Example 1 shows how to run the function when the 'df' argument corresponds to a table from an ISRaD object, e.g. &quot;flux&quot;, &quot;layer&quot;, etc.<br />
Example 2 shows how to run the function when single values are supplied and 'df' is absent.<br /><br />
Note: There is no guarantee that normalized 14c values will be meaningful as the model assumes a well-mixed homogenous system, and this is rarely the case in soils.
</p>


<h3>Value</h3>

<p>data frame with new columns: &quot;norm_14c&quot;, &quot;norm_error&quot;, and optionally &quot;norm_tau&quot;; OR list with length = 3: &quot;norm_14c&quot;, &quot;norm_tau&quot;, &quot;norm_error&quot;. Note that if is parameter df is not NULL and obs_d14c contains an underscore, e.g. &quot;lyr_14c&quot;, supplied names will take the form &quot;lyr_norm_14c&quot;, &quot;lyr_norm_error&quot;, etc.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller and J. Randerson
</p>


<h3>References</h3>

<p>Gaudinski et al. 2000. Soil carbon cycling in a temperate forest: radiocarbon-based estimates of residence times, sequestration rates and partitioning of fluxes. Biogeochemistry 51: 33-69 <a href="https://doi.org/10.1023/A%3A1006301010014">doi:10.1023/A:1006301010014</a><br /><br />
Trumbore, S. 2000. Age of Soil Organic Matter and Soil Respiration: Radiocarbon Constraints on Belowground C Dynamics. Ecological Applications, 10(2): 399–411 <a href="https://doi.org/10.2307/2641102">doi:10.2307/2641102</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Fill profile coordinates
database.x &lt;- ISRaD.extra.fill_coords(database)
# Fill dates
database.x &lt;- ISRaD.extra.fill_dates(database.x)
# Fill delta 14C from fraction modern
database.x &lt;- ISRaD.extra.fill_rc(database.x)
# Fill atmospheric 14c
database.x &lt;- ISRaD.extra.calc_atm14c(database.x)
# Run normalization function for the year 2010 with layer data
# Example 1
database.x$layer &lt;- ISRaD.extra.norm14c_year(
  obs_d14c = "lyr_14c",
  obs_year = "lyr_obs_date_y",
  atm_zone = "pro_atm_zone",
  norm_year = 2010,
  tau = TRUE,
  df = database.x$layer,
  verbose = TRUE
)
# Example 2
ISRaD.extra.norm14c_year(
  obs_d14c = 182.8958,
  obs_year = 1996,
  atm_zone = "NH14C",
  norm_year = 2010
)
</code></pre>

<hr>
<h2 id='ISRaD.flatten'>ISRaD.flatten</h2><span id='topic+ISRaD.flatten'></span>

<h3>Description</h3>

<p>Joins tables in ISRaD based on linking variables and returns flat data frame/s
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.flatten(database, table)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.flatten_+3A_database">database</code></td>
<td>
<p>ISRaD dataset object: e.g. ISRaD_data, or ISRaD_extra</p>
</td></tr>
<tr><td><code id="ISRaD.flatten_+3A_table">table</code></td>
<td>
<p>ISRaD table of interest (&quot;flux&quot;, &quot;layer&quot;, &quot;interstitial&quot;, &quot;fraction&quot;, &quot;incubation&quot;). Must be entered with &quot;&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>ISRaD.extra.flatten generates 2-dimensional matrices for user-specified ISRaD tables by joining higher level tables (metadata, site, profile, layer) to lower level tables (layer, fraction, incubation, flux, interstitial).
</p>


<h3>Value</h3>

<p>A dataframe with nrow = nrow(table) and ncol = sum(ncol(meta), ncol(site), ncol(profile), ..., ncol(table))
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
fractions &lt;- ISRaD.flatten(database, "fraction")
layers &lt;- ISRaD.flatten(database, "layer")
</code></pre>

<hr>
<h2 id='ISRaD.getdata'>ISRaD.getdata</h2><span id='topic+ISRaD.getdata'></span>

<h3>Description</h3>

<p>Retrieves most recent version of ISRaD data from github
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.getdata(
  directory,
  dataset = "full",
  extra = FALSE,
  force_download = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.getdata_+3A_directory">directory</code></td>
<td>
<p>Location of ISRaD_database_files folder. If not found, it will be created.</p>
</td></tr>
<tr><td><code id="ISRaD.getdata_+3A_dataset">dataset</code></td>
<td>
<p>Specify which data you want. Options are c(&quot;full&quot;, flux&quot;,&quot;interstitial&quot;,&quot;incubation&quot;,&quot;fraction&quot;,&quot;layer&quot;)</p>
</td></tr>
<tr><td><code id="ISRaD.getdata_+3A_extra">extra</code></td>
<td>
<p>TRUE/FALSE. If TRUE, the ISRaD_extra object will be returned. If FALSE, ISRaD_data will be returned. Default is FALSE.</p>
</td></tr>
<tr><td><code id="ISRaD.getdata_+3A_force_download">force_download</code></td>
<td>
<p>TRUE/FALSE. If ISRaD_database files already exist in the specified directory, new data will not be downloaded by default. If force_download is set to TRUE, the newest data from github will be downloaded and overwrite any existing files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ISRaD data object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Return full dataset ("full")
ISRaD_full &lt;- ISRaD.getdata(tempdir(), dataset = "full", extra = FALSE)
# Return full dataset plus "extra" filled data
ISRaD_extra &lt;- ISRaD.getdata(tempdir(), dataset = "full", extra = TRUE)
# Return only fraction data, including filled fraction data
ISRaD_fractions &lt;- ISRaD.getdata(tempdir(), dataset = "fraction", extra = TRUE)
</code></pre>

<hr>
<h2 id='ISRaD.read.entry'>ISRaD.read.entry</h2><span id='topic+ISRaD.read.entry'></span>

<h3>Description</h3>

<p>Reads ISRaD data object from Excel file in standard template format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.read.entry(
  entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.read.entry_+3A_entry">entry</code></td>
<td>
<p>ISRaD data object.</p>
</td></tr>
<tr><td><code id="ISRaD.read.entry_+3A_template_file">template_file</code></td>
<td>
<p>Directory path and name of template file to use (defaults to the ISRaD_Master_Template file built into the package).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
entry &lt;- ISRaD::Gaudinski_2001
ISRaD.save.entry(
  entry = entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD"),
  outfile = file.path(tempdir(), "Gaudinski_2001.xlsx")
)
# Read in .xlsx file
ISRaD.read.entry(file.path(tempdir(), "Gaudinski_2001.xlsx"))

</code></pre>

<hr>
<h2 id='ISRaD.rep.count.all'>ISRaD.rep.count.all</h2><span id='topic+ISRaD.rep.count.all'></span>

<h3>Description</h3>

<p>Generates a report of counts of observations at each level of the database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.rep.count.all(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.rep.count.all_+3A_database">database</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble of observation counts, one column for each database table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
ISRaD.rep.count.all(database)
</code></pre>

<hr>
<h2 id='ISRaD.rep.count.frc'>ISRaD.rep.count.frc</h2><span id='topic+ISRaD.rep.count.frc'></span>

<h3>Description</h3>

<p>Generates a report of fraction level observations, including fraction scheme and properties. Note that this function only counts rows, not 14C observations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.rep.count.frc(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.rep.count.frc_+3A_database">database</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
ISRaD.rep.count.frc(database)
</code></pre>

<hr>
<h2 id='ISRaD.rep.entry.stats'>ISRaD.rep.entry.stats</h2><span id='topic+ISRaD.rep.entry.stats'></span>

<h3>Description</h3>

<p>Generates a report of metadata statistics for all entries
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.rep.entry.stats(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.rep.entry.stats_+3A_database">database</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
ISRaD.rep.entry.stats(database)
</code></pre>

<hr>
<h2 id='ISRaD.rep.site.map'>ISRaD.rep.site.map</h2><span id='topic+ISRaD.rep.site.map'></span>

<h3>Description</h3>

<p>Generates a world map showing locations of all ISRaD sites
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.rep.site.map(database)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.rep.site.map_+3A_database">database</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
# Obtain current ISRaD data
database &lt;- ISRaD.getdata(tempdir(), dataset = "full", extra = FALSE)
# Generate a map of all ISRaD sites
ISRaD.rep.site.map(database)


</code></pre>

<hr>
<h2 id='ISRaD.report'>ISRaD.report</h2><span id='topic+ISRaD.report'></span>

<h3>Description</h3>

<p>Generate basic summary reports of ISRaD data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.report(database, report)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.report_+3A_database">database</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
<tr><td><code id="ISRaD.report_+3A_report">report</code></td>
<td>
<p>Parameter to define which type of report is desired. The default is &quot;count.all&quot; other options include &quot;entry.stats&quot;, &quot;count.frc&quot;, or &quot;site.map&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wrapper for the simple reporting functions ISRaD.rep.count.all, ISRaD.rep.count.frc, ISRaD.rep.entry.stats, ISRaD.rep.site.map
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
database &lt;- ISRaD::Gaudinski_2001
# Report metadata statistics
ISRaD.report(database, report = "entry.stats")
# Report summary statistics for all levels of the database
ISRaD.report(database, report = "count.all")
# Generate a map of all ISRaD sites
ISRaD.report(database, report = "site.map")


</code></pre>

<hr>
<h2 id='ISRaD.save.entry'>ISRaD.save.entry</h2><span id='topic+ISRaD.save.entry'></span>

<h3>Description</h3>

<p>Saves ISRaD data object to .xlsx file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISRaD.save.entry(
  entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD"),
  outfile
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISRaD.save.entry_+3A_entry">entry</code></td>
<td>
<p>ISRaD data object</p>
</td></tr>
<tr><td><code id="ISRaD.save.entry_+3A_template_file">template_file</code></td>
<td>
<p>Directory path and name of template file to use (defaults to the ISRaD_Master_Template file built into the package). Not recommended to change this.</p>
</td></tr>
<tr><td><code id="ISRaD.save.entry_+3A_outfile">outfile</code></td>
<td>
<p>File name and path for .xlsx output</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to save a single entry (or a compiled database in the standard template format) to an .xlsx file.<br /><br />
Note: Replaces the function &quot;ISRaD.save.xlsx&quot; as that function depended on the package openxlsx, which was unstable at the time. This a simpler function and does not maintain the formatting of the template file. The code for the original function is available in the ISRaD github repository in the <a href="https://github.com/International-Soil-Radiocarbon-Database/ISRaD/tree/master/devScripts">devScripts</a> directory.
</p>


<h3>Author(s)</h3>

<p>J. Beem-Miller
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
entry &lt;- ISRaD::Gaudinski_2001
ISRaD.save.entry(
  entry = entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD"),
  outfile = file.path(tempdir(), "Gaudinski_2001.xlsx")
)

</code></pre>

<hr>
<h2 id='lapply_df'>Run <code><a href="base.html#topic+lapply">lapply</a></code>, converting result to a data frame.</h2><span id='topic+lapply_df'></span>

<h3>Description</h3>

<p>Run <code><a href="base.html#topic+lapply">lapply</a></code>, converting result to a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lapply_df(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lapply_df_+3A_...">...</code></td>
<td>
<p>Parameters to pass to lapply</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of the results with stringsAsFactors=FALSE.
</p>

<hr>
<h2 id='QAQC'>QAQC</h2><span id='topic+QAQC'></span>

<h3>Description</h3>

<p>Checks template files for data coherence, formatting, and data entry errors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>QAQC(
  file,
  writeQCreport = FALSE,
  outfile_QAQC = "",
  summaryStats = TRUE,
  dataReport = FALSE,
  checkdoi = TRUE,
  verbose = TRUE,
  local = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="QAQC_+3A_file">file</code></td>
<td>
<p>File path for template file to be checked</p>
</td></tr>
<tr><td><code id="QAQC_+3A_writeqcreport">writeQCreport</code></td>
<td>
<p>If TRUE, a text report of the QC output will be written to the outfile. Default is FALSE</p>
</td></tr>
<tr><td><code id="QAQC_+3A_outfile_qaqc">outfile_QAQC</code></td>
<td>
<p>Filename of the output file (if writeQCreport is TRUE). Default is NULL, with the outfile being written to the directory where the template file is stored and named according to the file being checked.</p>
</td></tr>
<tr><td><code id="QAQC_+3A_summarystats">summaryStats</code></td>
<td>
<p>Prints summary statistics. Default is TRUE.</p>
</td></tr>
<tr><td><code id="QAQC_+3A_datareport">dataReport</code></td>
<td>
<p>Prints list structure of database. Default is FALSE.</p>
</td></tr>
<tr><td><code id="QAQC_+3A_checkdoi">checkdoi</code></td>
<td>
<p>Set to FALSE if you do not want the QAQC check to validate DOIs (if TRUE this will be time consuming). Default is TRUE.</p>
</td></tr>
<tr><td><code id="QAQC_+3A_verbose">verbose</code></td>
<td>
<p>Set to TRUE to print results of function to console. Default is TRUE.</p>
</td></tr>
<tr><td><code id="QAQC_+3A_local">local</code></td>
<td>
<p>Set to FALSE to fetch most up-to-date template and template info files. If TRUE, the local files or files from CRAN package will be used. Default is TRUE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can also be called from the <a href="https://soilradiocarbon.org">ISRaD website</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Load example dataset Gaudinski_2001
entry &lt;- ISRaD::Gaudinski_2001
# Save as .xlsx file
ISRaD.save.entry(
  entry = entry,
  template_file = system.file("extdata", "ISRaD_Master_Template.xlsx", package = "ISRaD"),
  outfile = file.path(tempdir(), "Gaudinski_2001.xlsx")
)
# Run QAQC
QAQC(file.path(tempdir(), "Gaudinski_2001.xlsx"))


</code></pre>

<hr>
<h2 id='read_template_file'>Read in the template file.</h2><span id='topic+read_template_file'></span>

<h3>Description</h3>

<p>Read in the template file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_template_file(template_file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_template_file_+3A_template_file">template_file</code></td>
<td>
<p>Filename, character; if not provided, load the default from <code>extdata/</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with sheets of the template info file.
</p>

<hr>
<h2 id='read_template_info_file'>Read in the template info file.</h2><span id='topic+read_template_info_file'></span>

<h3>Description</h3>

<p>Read in the template info file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_template_info_file(template_info_file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_template_info_file_+3A_template_info_file">template_info_file</code></td>
<td>
<p>Filename, character; if not provided, load the default from <code>extdata/</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with sheets of the template info file.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
