<!DOCTYPE html><html lang="en"><head><title>Help for package restfulr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {restfulr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Credentials-class'><p>Credentials</p></a></li>
<li><a href='#CRUDProtocol-class'><p>CRUDProtocol</p></a></li>
<li><a href='#Media-class'><p>Media</p></a></li>
<li><a href='#MediaCache-class'><p>MediaCache</p></a></li>
<li><a href='#RestContainer-class'><p>RestContainer</p></a></li>
<li><a href='#RestUri-class'><p>RestUri</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>R Interface to RESTful Web Services</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.15</td>
</tr>
<tr>
<td>Author:</td>
<td>Michael Lawrence</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Michael Lawrence &lt;michafla@gene.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Models a RESTful service as if it were a nested R list.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/Artistic-2.0">Artistic-2.0</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>XML, RCurl, rjson, S4Vectors (&ge; 0.13.15), yaml</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.0), methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>getPass, rsolr, RUnit</td>
</tr>
<tr>
<td>Collate:</td>
<td>CRUDProtocol-class.R CacheInfo-class.R Credentials-class.R
HTTP-class.R Media-class.R MediaCache-class.R RestUri-class.R
RestContainer-class.R test_restfulr_package.R utils.R</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-15 21:06:20 UTC; larman</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-16 09:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Credentials-class'>Credentials</h2><span id='topic+class+3ACredentials'></span><span id='topic+Credentials-class'></span><span id='topic+credentials'></span><span id='topic+username'></span><span id='topic+username+2CCredentials-method'></span><span id='topic+password'></span><span id='topic+password+2CCredentials-method'></span>

<h3>Description</h3>

<p><code>Credentials</code> stores authentication credentials (username and
password). Note that it is easy to retrieve the password from this
object. There is no encryption or other security.
</p>


<h3>Accessors</h3>


<ul>
<li>
<p><code>username</code>: get the username as a string.

</p>
</li>
<li>
<p><code>password</code>: get the password as a plain text string.

</p>
</li></ul>



<h3>Author(s)</h3>

<p> Michael Lawrence </p>

<hr>
<h2 id='CRUDProtocol-class'>CRUDProtocol</h2><span id='topic+class+3ACRUDProtocol'></span><span id='topic+CRUDProtocol-class'></span>

<h3>Description</h3>

<p><code>CRUDProtocol</code> is a base class for implementing the communication
protocol for performing Create, Read, Update and Delete (CRUD)
operations on a resource identified by a
<code><a href="#topic+RestUri-class">RestUri</a></code>. Only HTTP is implemented by this
package, and it should serve as useful example for other
implementations.
</p>


<h3>Author(s)</h3>

<p> Michael Lawrence </p>

<hr>
<h2 id='Media-class'>Media</h2><span id='topic+class+3AMedia'></span><span id='topic+Media-class'></span><span id='topic+class+3Aapplication+2F+2A'></span><span id='topic+application+2F+2A-class'></span><span id='topic+class+3Aaudio+2F+2A'></span><span id='topic+audio+2F+2A-class'></span><span id='topic+class+3Aimage+2F+2A'></span><span id='topic+image+2F+2A-class'></span><span id='topic+class+3Amessage+2F+2A'></span><span id='topic+message+2F+2A-class'></span><span id='topic+class+3Amodel+2F+2A'></span><span id='topic+model+2F+2A-class'></span><span id='topic+class+3Amultipart+2F+2A'></span><span id='topic+multipart+2F+2A-class'></span><span id='topic+class+3Atext+2F+2A'></span><span id='topic+text+2F+2A-class'></span><span id='topic+class+3Avideo+2F+2A'></span><span id='topic+video+2F+2A-class'></span><span id='topic+class+3Atext+2Fplain'></span><span id='topic+text+2Fplain-class'></span><span id='topic+class+3Atext+2Fhtml'></span><span id='topic+text+2Fhtml-class'></span><span id='topic+class+3Atext+2Fcsv'></span><span id='topic+text+2Fcsv-class'></span><span id='topic+class+3Aapplication+2Fxml'></span><span id='topic+application+2Fxml-class'></span><span id='topic+class+3Aapplication+2Fjson'></span><span id='topic+application+2Fjson-class'></span><span id='topic+mediaCoercionTable'></span><span id='topic+length+2CNullMedia-method'></span><span id='topic+mediaTarget'></span><span id='topic+mediaTarget+2Capplication+2Fjson-method'></span><span id='topic+mediaTarget+2Capplication+2Fxml-method'></span><span id='topic+mediaTarget+2Ctext+2Fhtml-method'></span><span id='topic+mediaTarget+2Ctext+2Fcsv-method'></span><span id='topic+mediaTarget+2Ctext+2F+2A-method'></span><span id='topic+mediaTarget+2CNullMedia-method'></span><span id='topic+coerce+2Capplication+2Fjson+2Clist-method'></span><span id='topic+coerce+2Cdata.frame+2Ctext+2Fcsv-method'></span><span id='topic+coerce+2Capplication+2Fxml+2CXMLAbstractNode-method'></span><span id='topic+coerce+2Ctext+2Fcsv+2Cdata.frame-method'></span><span id='topic+coerce+2CANY+2CMedia-method'></span><span id='topic+coerce+2Clist+2Capplication+2Fjson-method'></span><span id='topic+coerce+2Cdata.frame+2CMedia-method'></span><span id='topic+show+2CMedia-method'></span>

<h3>Description</h3>

<p>The <code>Media</code> object represents a value identified by a URI. There
is a <code>Media</code> subclass for each media type, such as
&ldquo;text/csv&rdquo; or &ldquo;application/xml&rdquo;. Coercion methods (see
<code><a href="methods.html#topic+setAs">setAs</a></code>) define mappings between <code>Media</code> subclasses
and <span class="rlang"><b>R</b></span> objects. The user does not usually need to access this
functionality directly.
</p>


<h3>Type conversion</h3>

<p>Each <code>Media</code> subclass may be converted to/from one or more <span class="rlang"><b>R</b></span>
types. The mappings are established by <code><a href="methods.html#topic+setAs">setAs</a></code>.
</p>
<p>The following bi-directional mappings are built into the package:
</p>

<table>
<tr>
 <td style="text-align: left;">
    <code>application/xml</code>, <code>text/html</code> </td><td style="text-align: left;">
    <code><a href="XML.html#topic+XMLAbstractNode-class">XMLAbstractNode</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>application/json</code> </td><td style="text-align: left;"> <code>list</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>text/csv</code> </td><td style="text-align: left;"> <code>data.frame</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
    <code>text/*</code> </td><td style="text-align: left;"> <code>character</code>
  </td>
</tr>

</table>

<p>But call <code>mediaCoercionTable</code> to see what is defined in the
current session.
</p>
<p>The <code><a href="methods.html#topic+as">as</a></code> function is the canonical interface to converting
media to <span class="rlang"><b>R</b></span> objects. It (usefully) requires that the user specify the
target <span class="rlang"><b>R</b></span> type. For convenience, the <code>mediaTarget</code> generic
returns the default R type for a given <code>Media</code> object.
</p>
<p>To support a new media type, one should define a <code>Media</code> subclass
with the same name as the media type (<code>application/xml</code>), a
corresponding <code>mediaTarget</code> method, and all relevant
<code>coerce</code> methods. See the <code>Media</code> class hierarchy to
determine where the new type fits.
</p>


<h3>Helpers</h3>


<ul>
<li><p><code>mediaCoercionTable()</code>: Returns a character matrix with
columns &ldquo;from&rdquo; and &ldquo;to&rdquo;, indicating the available
coercions of media types to/from <span class="rlang"><b>R</b></span> objects.

</p>
</li></ul>



<h3>Author(s)</h3>

<p> Michael Lawrence </p>


<h3>Examples</h3>

<pre><code class='language-R'>txt &lt;- '{"json":{"rocks":true}}'
json &lt;- as(txt, "application/json")
as(json, mediaTarget(json))
</code></pre>

<hr>
<h2 id='MediaCache-class'>MediaCache</h2><span id='topic+class+3AMediaCache'></span><span id='topic+MediaCache-class'></span><span id='topic++24+3C-+2CMediaCache-method'></span><span id='topic++5B+5B+3C-+2CMediaCache-method'></span><span id='topic+MediaCache'></span><span id='topic+globalRestClientCache'></span>

<h3>Description</h3>

<p><code>MediaCache</code> is just an environment that restricts the types of
its elements to <code><a href="#topic+Media-class">Media</a></code>. Construct an instance by
calling <code>MediaCache</code>. The shared default for all REST clients is
returned by <code>globalRestClientCache</code>.
</p>


<h3>Author(s)</h3>

<p> Michael Lawrence </p>

<hr>
<h2 id='RestContainer-class'>RestContainer</h2><span id='topic+class+3ARestContainer'></span><span id='topic+RestContainer-class'></span><span id='topic+RestContainer'></span><span id='topic++5B+2CRestContainer-method'></span><span id='topic++5B+3C-+2CRestContainer-method'></span><span id='topic++24+2CRestContainer-method'></span><span id='topic++5B+5B+2CRestContainer-method'></span><span id='topic++24+3C-+2CRestContainer-method'></span><span id='topic++5B+5B+3C-+2CRestContainer-method'></span><span id='topic+show+2CRestContainer-method'></span>

<h3>Description</h3>

<p>The <code>RestContainer</code> object wraps a collection of resources with a
list-like interface. Values are stored and retrieved
using familiar accessors like <code>[[</code> and <code>[[&lt;-</code>. Coercion
between external media and <span class="rlang"><b>R</b></span> objects is based on the
<code><a href="#topic+Media-class">Media</a></code> framework.
</p>


<h3>Data access</h3>

<p>The <code>RestContainer</code> object maps familiar R list accessors to CRUD
operations on <code><a href="#topic+RestUri-class">RestUri</a></code>.
</p>

<ul>
<li>
<p><code>x[] &lt;- value</code>: Creates resources for the objects in
<code>value</code> at <code>x</code>. This is the
<code><a href="#topic+create">create</a></code>/<code>POST</code> operation. Unlike an R list, the
resources are added to the collection without removing any
existing resources. This inconsistency is unfortunate, so we might
change this behavior in the future.

</p>
</li>
<li>
<p><code>x$name</code>, <code>x[[i]]</code>: Reads the named element. This is the
<code><a href="#topic+read">read</a></code>/<code>GET</code> operation.

</p>
</li>
<li>
<p><code>x[i]</code>: Reads the named elements, which are returned in a
list. This is the vectorized <code><a href="#topic+read">read</a></code>/<code>GET</code>
operation. Unlike an R list, this is not an endomorphism, in that
the return value is dropped to a list and is no longer attached to
the REST interface.

</p>
</li>
<li>
<p><code>x$name &lt;- value</code>, <code>x[[i]] &lt;- value</code>: Updates the named
resource with <code>value</code>. This is the
<code><a href="#topic+update">update</a></code>/<code>PUT</code> operation.

</p>
</li>
<li>
<p><code>x[i] &lt;- value</code>: Updates resources at <code>x</code> with the
objects in <code>value</code>, a list. This is the
vectorized <code><a href="#topic+update">update</a></code>/<code>PUT</code> operation.

</p>
</li>
<li>
<p><code>x$name &lt;- NULL</code>, <code>x[[i]] &lt;- NULL</code>: Deletes the named
resource. This is the <code><a href="#topic+delete">delete</a></code>/<code>DELETE</code> operation.

</p>
</li></ul>



<h3>Constructor</h3>


<ul>
<li><p><code>RestContainer(...)</code>: Constructs an instance based on
<code><a href="#topic+RestUri">RestUri</a>(...)</code>.

</p>
</li></ul>



<h3>Author(s)</h3>

<p> Michael Lawrence </p>


<h3>See Also</h3>

<p><code><a href="#topic+RestUri-class">RestUri</a></code>, which is a lower-level but perhaps more
sensible interface.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>apache &lt;- RestContainer("http://wiki.apache.org")
apache$solr
</code></pre>

<hr>
<h2 id='RestUri-class'>RestUri</h2><span id='topic+class+3ARestUri'></span><span id='topic+RestUri-class'></span><span id='topic+create'></span><span id='topic+create+2CRestUri-method'></span><span id='topic+read'></span><span id='topic+read+2CRestUri-method'></span><span id='topic+update'></span><span id='topic+update+2CRestUri-method'></span><span id='topic+delete'></span><span id='topic+delete+2CRestUri-method'></span><span id='topic+create+2Ccharacter-method'></span><span id='topic+read+2Ccharacter-method'></span><span id='topic+update+2Ccharacter-method'></span><span id='topic+delete+2Ccharacter-method'></span><span id='topic+RestUri'></span><span id='topic++24+2CRestUri-method'></span><span id='topic++5B+5B+2CRestUri-method'></span><span id='topic++24+3C-+2CRestUri-method'></span><span id='topic++5B+5B+3C-+2CRestUri-method'></span><span id='topic++5B+2CRestUri-method'></span><span id='topic+container'></span><span id='topic+container+2CRestUri-method'></span><span id='topic+container+3C-'></span><span id='topic+container+3C-+2CRestUri-method'></span><span id='topic+purgeCache'></span><span id='topic+purgeCache+2CRestUri-method'></span><span id='topic+embedCredentials'></span><span id='topic+authenticate'></span><span id='topic+authenticate+2CRestUri-method'></span><span id='topic+credentials+2CRestUri-method'></span><span id='topic+show+2CRestUri-method'></span>

<h3>Description</h3>

<p>The <code>RestUri</code> object represents a resource accessible via a
RESTful interface. It extends <code>character</code> with a protocol, used
for accessing the data, as well as a cache. R objects are converted
to/from external media via the <code><a href="#topic+Media-class">Media</a></code> framework.
</p>


<h3>CRUD interface</h3>

<p>There are four canonical, abstract types of REST operations: create,
read, update, delete (CRUD). The CRUD model was borrowed from
traditional databases. The restfulr package maps those four operations
to R functions of the same name. The functions are generic, and there
are methods for <code>RestUri</code> and <code>character</code> (taken to be a
URI), described below.
</p>

<ul>
<li>
<p><code>create(x, value, ..., returnResponse=FALSE)</code>: Creates a
resource at <code>x</code> by converting <code>value</code> to a supported
media type. The ... become query parameters on <code>x</code>. If
<code>returnResponse</code> is <code>TRUE</code>, convert and return any
response sent from the endpoint. By default, <code>x</code> is returned,
to support chaining.  This corresponds to an HTTP <code>POST</code>.

</p>
</li>
<li>
<p><code>read(x, ...)</code>: Reads the resource at <code>x</code>, coerces it to
an R object, and returns the object. The ... become query
parameters on <code>x</code>. This corresponds to an HTTP <code>GET</code>.

</p>
</li>
<li>
<p><code>update(object, value, ...)</code>: Updates the resource at <code>x</code> by
converting <code>value</code> to a supported media type. The ...
become query parameters on <code>x</code>. This corresponds to an HTTP
<code>PUT</code>.

</p>
</li>
<li>
<p><code>delete(x, ...)</code>: Deletes the resource at <code>x</code>. This
corresponds to an HTTP <code>DELETE</code>.

</p>
</li></ul>



<h3>Constructor</h3>


<ul>
<li>
<p><code>RestUri(base.uri, protocol = CRUDProtocol(base.uri, ...),
        cache = globalRestClientCache(), ...)</code>: Constructs a
<code>RestUri</code> object, pointing to <code>base.uri</code>, a string
representation of the URI. The <code>protocol</code> (a
<code><a href="#topic+CRUDProtocol-class">CRUDProtocol</a></code> instance) is automatically
determined from the scheme of the URI. By default, all instances
share the same global <code>cache</code>, a
<code><a href="#topic+MediaCache-class">MediaCache</a></code> instance.

</p>
</li>
<li><p><code>x$name</code>: Extends the path of <code>x</code> by appending
<code>name</code>. This is a convenient way to narrow a URI and is
intuitive if one thinks of a tree of resources as a nested list.

</p>
</li>
<li><p><code>x[[i]]</code>: Extends the path of <code>x</code> by appending
<code>i</code>.

</p>
</li>
<li><p><code>x[...]</code>: Named arguments in <code>...</code> become query
parameters on <code>x</code>.

</p>
</li></ul>



<h3>Container support</h3>


<ul>
<li>
<p><code>container(x)</code>: Gets a <code><a href="#topic+RestContainer-class">RestContainer</a></code>
object for treating <code>x</code> as a list-like container.

</p>
</li></ul>



<h3>Authentication</h3>

<p>RestUri currently supports basic HTTP authentication. Call
<code>authenticate(x)</code> to add credentials to the RestUri
<code>x</code>. Retrieve the Credentials object with the <code>credentials</code>
accessor.
</p>
<p>Once a set of credentials has been entered, it is recorded for the URI
in &lsquo;<span class="file">$(HOME)/.local/config/restfulr/credentials.yaml</span>&rsquo;. The path
prefix can be changed via the <span class="env">XDG_CONFIG_DIR</span> environment
variable, according to the <abbr><span class="acronym">XDG</span></abbr> standard. The credential
cache is checked during authentication, so that a user does not need
to reenter credentials for the same URI.
</p>
<p>If the <span class="pkg">getPass</span> package is installed, we use it
for password entry. Otherwise, we rely on an implementation that
shows the password as it is entered, unless the user is in a terminal,
where we can hide input.
</p>


<h3>Utilities</h3>


<ul>
<li><p><code>embedCredentials(x)</code>: Embeds the internal credential
information into the URL itself, for interfacing with other tools,
like <code>utils::download.file</code>.

</p>
</li></ul>



<h3>Author(s)</h3>

<p> Michael Lawrence </p>


<h3>Examples</h3>

<pre><code class='language-R'>apache &lt;- RestUri("http://wiki.apache.org")
read(apache$solr)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
