<!DOCTYPE html><html><head><title>Help for package pkdata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pkdata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#conformDoses'><p>Create a Conforming Dose Data Set</p></a></li>
<li><a href='#fixDuplicates'><p>Remove Duplicate Dose Data</p></a></li>
<li><a href='#guessDateFormat'><p>Determine Format of Date and Date-Time Variables</p></a></li>
<li><a href='#imputeDoses'><p>Impute Dose Data</p></a></li>
<li><a href='#parse_dates'><p>Parse Date and Date-Time Variables</p></a></li>
<li><a href='#pkdata-internal'><p>Internal objects.</p></a></li>
<li><a href='#pkdata-package'><p>PK Data</p></a></li>
<li><a href='#prepareDoses'><p>Prepare the Dose Data Set</p></a></li>
<li><a href='#sortDoses'><p>Sort Dose Data Set</p></a></li>
<li><a href='#trimDoses'><p>Trim Dose Data Set</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Creates Pharmacokinetic/Pharmacodynamic (PK/PD) Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-09-28</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cole Beck &lt;cole.beck@vumc.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Prepare pharmacokinetic/pharmacodynamic (PK/PD) data for PK/PD analyses. 
    This package provides functions to standardize infusion and bolus dose data while
    linking it to drug level or concentration data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>lubridate</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-09-28 23:00:57 UTC; beckca</td>
</tr>
<tr>
<td>Author:</td>
<td>Cole Beck <a href="https://orcid.org/0000-0002-6849-6255"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Leena Choi [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-10-01 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='conformDoses'>Create a Conforming Dose Data Set</h2><span id='topic+conformDoses'></span>

<h3>Description</h3>

<p>Modify dose data such that it conforms for future use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conformDoses(
  doseData,
  idVar = "id",
  dateVar = "date.dose",
  infusionDoseTimeVar = NULL,
  infusionDoseVar = NULL,
  bolusDoseTimeVar = NULL,
  bolusDoseVar = NULL,
  otherDoseTimeVar = NULL,
  otherDoseVar = NULL,
  otherVars = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conformDoses_+3A_dosedata">doseData</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_idvar">idVar</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_datevar">dateVar</code></td>
<td>
<p>character string; name of date variable, defaults to date.dose</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_infusiondosevar">infusionDoseVar</code></td>
<td>
<p>character string; name of infusion dose variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_bolusdosetimevar">bolusDoseTimeVar</code></td>
<td>
<p>character string; name of bolus dose time variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_bolusdosevar">bolusDoseVar</code></td>
<td>
<p>character string; name of bolus dose variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_otherdosetimevar">otherDoseTimeVar</code></td>
<td>
<p>character string; name of additional dose time
variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_otherdosevar">otherDoseVar</code></td>
<td>
<p>character string; name of additional dose variable</p>
</td></tr>
<tr><td><code id="conformDoses_+3A_othervars">otherVars</code></td>
<td>
<p>character string; name of other variables within data set</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Date-time variables are given a consistent format.  Invalid records are
removed.  The data set is sorted by date.
</p>


<h3>Value</h3>

<p>data.frame, containing dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>

<hr>
<h2 id='fixDuplicates'>Remove Duplicate Dose Data</h2><span id='topic+fixDuplicates'></span>

<h3>Description</h3>

<p>Modify dose data to remove duplicate dose values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixDuplicates(
  data,
  idVar = "id",
  infusionDoseTimeVar = NULL,
  infusionDoseVar = NULL,
  moveBolus = FALSE,
  bolusDoseTimeVar = NULL,
  bolusDoseVar = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fixDuplicates_+3A_data">data</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_idvar">idVar</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_infusiondosevar">infusionDoseVar</code></td>
<td>
<p>character string; name of infusion dose variable</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_movebolus">moveBolus</code></td>
<td>
<p>logical; allow duplicate infusion doses to be categorized
as bolus</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_bolusdosetimevar">bolusDoseTimeVar</code></td>
<td>
<p>character string; name of bolus dose time variable</p>
</td></tr>
<tr><td><code id="fixDuplicates_+3A_bolusdosevar">bolusDoseVar</code></td>
<td>
<p>character string; name of bolus dose variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some duplicates can be adjusted by changing the date-time rounding.
Others may be converted from one dose type to another, such as moving
infusion to bolus.
</p>


<h3>Value</h3>

<p>data.frame, containing dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>

<hr>
<h2 id='guessDateFormat'>Determine Format of Date and Date-Time Variables</h2><span id='topic+guessDateFormat'></span>

<h3>Description</h3>

<p>Given a vector of dates or date-times, determine the format if one is used
consistently.  If inconsistentencies are found, the function will fail.
See <code><a href="base.html#topic+strptime">strptime</a></code> for examples of format specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guessDateFormat(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="guessDateFormat_+3A_x">x</code></td>
<td>
<p>character vector of dates or date-times</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>guessDateFormat</code> is rigid when determining the date format.  For
date-times it expects the date and time parts to be separated by a space.  It
does not recognize all format specifications, such as the AM/PM indicator.  
The time part should have at least one colon to separate hours from minutes.
The date part may have any separator as non-numerical values are removed
before parsing.
</p>


<h3>Value</h3>

<p>Returns a character string representing the format of the date-time
variables.
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("2014-01-15", "20140202")
guessDateFormat(x)
</code></pre>

<hr>
<h2 id='imputeDoses'>Impute Dose Data</h2><span id='topic+imputeDoses'></span>

<h3>Description</h3>

<p>Use last-observation-carried-forward to impute missing dose values by hour.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imputeDoses(
  data,
  idVar = "id",
  dateVar = "date.dose",
  infusionDoseTimeVar = NULL,
  infusionDoseVar = NULL,
  maxskips = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imputeDoses_+3A_data">data</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="imputeDoses_+3A_idvar">idVar</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="imputeDoses_+3A_datevar">dateVar</code></td>
<td>
<p>character string; name of date variable, defaults to date.dose</p>
</td></tr>
<tr><td><code id="imputeDoses_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="imputeDoses_+3A_infusiondosevar">infusionDoseVar</code></td>
<td>
<p>character string; name of infusion dose variable</p>
</td></tr>
<tr><td><code id="imputeDoses_+3A_maxskips">maxskips</code></td>
<td>
<p>integer; maximum number of missed doses that may be imputed</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Creates skips column
</p>


<h3>Value</h3>

<p>data.frame, containing dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>

<hr>
<h2 id='parse_dates'>Parse Date and Date-Time Variables</h2><span id='topic+parse_dates'></span>

<h3>Description</h3>

<p>Given a vector of dates or date-times, create Date or POSIXct variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_dates(x, tz = getOption("pkdata.tz", ""))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_dates_+3A_x">x</code></td>
<td>
<p>character vector of dates or date-times</p>
</td></tr>
<tr><td><code id="parse_dates_+3A_tz">tz</code></td>
<td>
<p>character string; specifies the time zone to be used for the
conversion.  Defaults to the current time zone.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>parse_dates</code> calls <code><a href="lubridate.html#topic+parse_date_time">parse_date_time</a></code> from the
lubridate package.  While <code><a href="lubridate.html#topic+parse_date_time">parse_date_time</a></code> accepts
multiple date formats, <code>parse_dates</code> requires a consistent format.
</p>


<h3>Value</h3>

<p>vector of Date or POSIXct objects
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- c("2014-01-15", "20140202")
parse_dates(x)
x &lt;- c("2014-01-15 01:51", "20140202 04:35:18")
parse_dates(x)
</code></pre>

<hr>
<h2 id='pkdata-internal'>Internal objects.</h2><span id='topic+pkdata-internal'></span><span id='topic+.onLoad'></span>

<h3>Description</h3>

<p>Internal objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.onLoad(...)
</code></pre>


<h3>Details</h3>

<p>This function should not be called by the user.
</p>

<hr>
<h2 id='pkdata-package'>PK Data</h2><span id='topic+pkdata-package'></span><span id='topic+pkdata'></span>

<h3>Description</h3>

<p>This package will prepare data sets for PK data analysis.
</p>


<h3>Author(s)</h3>

<p>Cole Beck, Leena Choi
</p>
<p>Maintainer: Cole Beck <a href="mailto:cole.beck@vumc.org">cole.beck@vumc.org</a>
</p>

<hr>
<h2 id='prepareDoses'>Prepare the Dose Data Set</h2><span id='topic+prepareDoses'></span>

<h3>Description</h3>

<p>Create a dose data set with conforming data, and remove invalid records.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepareDoses(
  doseData,
  drugLevelData,
  drugLevelID = "id",
  drugLevelTimeVar = "date.time",
  drugLevelVar = "fent.level",
  idVar = "id",
  dateVar = "date.dose",
  infusionDoseTimeVar = NULL,
  infusionDoseVar = NULL,
  bolusDoseTimeVar = NULL,
  bolusDoseVar = NULL,
  otherDoseTimeVar = NULL,
  otherDoseVar = NULL,
  otherVars = NULL,
  lookForward = 7
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepareDoses_+3A_dosedata">doseData</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_drugleveldata">drugLevelData</code></td>
<td>
<p>data.frame; data set with drug level data</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_druglevelid">drugLevelID</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_drugleveltimevar">drugLevelTimeVar</code></td>
<td>
<p>character string; name of date-time variable,
defaults to date.time</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_druglevelvar">drugLevelVar</code></td>
<td>
<p>character string; name of drug level variable, defaults
to fent.level</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_idvar">idVar</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_datevar">dateVar</code></td>
<td>
<p>character string; name of date variable, defaults to date.dose</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_infusiondosevar">infusionDoseVar</code></td>
<td>
<p>character string; name of infusion dose variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_bolusdosetimevar">bolusDoseTimeVar</code></td>
<td>
<p>character string; name of bolus dose time variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_bolusdosevar">bolusDoseVar</code></td>
<td>
<p>character string; name of bolus dose variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_otherdosetimevar">otherDoseTimeVar</code></td>
<td>
<p>character string; name of additional dose time
variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_otherdosevar">otherDoseVar</code></td>
<td>
<p>character string; name of additional dose variable</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_othervars">otherVars</code></td>
<td>
<p>character string; name of other variables within data set</p>
</td></tr>
<tr><td><code id="prepareDoses_+3A_lookforward">lookForward</code></td>
<td>
<p>integer; initializes the time frame window with the number
of days prior to the first drug level data; defaults to 7</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Wrapper function for <code><a href="#topic+conformDoses">conformDoses</a></code> and <code><a href="#topic+trimDoses">trimDoses</a></code>.
</p>


<h3>Value</h3>

<p>data.frame, containing dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>


<h3>Examples</h3>

<pre><code class='language-R'>options(pkdata.tz='America/Chicago')
dose.file &lt;- read.csv(system.file('extdata', 'dosage.csv', package = 'pkdata'),
                      stringsAsFactors = FALSE)
drug.level.file &lt;- read.csv(system.file('extdata', 'druglevel.csv', package = 'pkdata'),
                            stringsAsFactors = FALSE)
prepped &lt;- prepareDoses(dose.file, drug.level.file,
     infusionDoseTimeVar='inf.time', infusionDoseVar='inf.dose',
     bolusDoseTimeVar='bol.time', bolusDoseVar='bol.dose',
     otherDoseTimeVar='patch.time', otherDoseVar='patch.dose',
     otherVars=c('gender','weight'))
</code></pre>

<hr>
<h2 id='sortDoses'>Sort Dose Data Set</h2><span id='topic+sortDoses'></span>

<h3>Description</h3>

<p>Helper function to sort dose data set by ID and time variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sortDoses(
  data,
  idVar = "id",
  infusionDoseTimeVar = NULL,
  bolusDoseTimeVar = NULL,
  otherDoseTimeVar = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sortDoses_+3A_data">data</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="sortDoses_+3A_idvar">idVar</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="sortDoses_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="sortDoses_+3A_bolusdosetimevar">bolusDoseTimeVar</code></td>
<td>
<p>character string; name of bolus dose time variable</p>
</td></tr>
<tr><td><code id="sortDoses_+3A_otherdosetimevar">otherDoseTimeVar</code></td>
<td>
<p>character string; name of additional dose time
variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sort order will be the ID variable, then infusion time, bolus time, or other
dose date-time variables.
</p>


<h3>Value</h3>

<p>data.frame, containing dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>

<hr>
<h2 id='trimDoses'>Trim Dose Data Set</h2><span id='topic+trimDoses'></span>

<h3>Description</h3>

<p>Remove invalid doses by creating a time frame window constructed from drug
level data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trimDoses(
  doseData,
  drugLevelData,
  drugLevelID = "id",
  drugLevelTimeVar = "date.time",
  drugLevelVar = "fent.level",
  infusionDoseTimeVar = NULL,
  infusionDoseVar = NULL,
  bolusDoseTimeVar = NULL,
  bolusDoseVar = NULL,
  otherDoseTimeVar = NULL,
  otherDoseVar = NULL,
  lookForward = 7,
  last = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trimDoses_+3A_dosedata">doseData</code></td>
<td>
<p>data.frame; data set with dose information</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_drugleveldata">drugLevelData</code></td>
<td>
<p>data.frame; data set with drug level data</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_druglevelid">drugLevelID</code></td>
<td>
<p>character string; name of ID variable, defaults to id</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_drugleveltimevar">drugLevelTimeVar</code></td>
<td>
<p>character string; name of date-time variable,
defaults to date.time</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_druglevelvar">drugLevelVar</code></td>
<td>
<p>character string; name of drug level variable, defaults
to fent.level</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_infusiondosetimevar">infusionDoseTimeVar</code></td>
<td>
<p>character string; name of infusion dose time
variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_infusiondosevar">infusionDoseVar</code></td>
<td>
<p>character string; name of infusion dose variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_bolusdosetimevar">bolusDoseTimeVar</code></td>
<td>
<p>character string; name of bolus dose time variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_bolusdosevar">bolusDoseVar</code></td>
<td>
<p>character string; name of bolus dose variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_otherdosetimevar">otherDoseTimeVar</code></td>
<td>
<p>character string; name of additional dose time
variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_otherdosevar">otherDoseVar</code></td>
<td>
<p>character string; name of additional dose variable</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_lookforward">lookForward</code></td>
<td>
<p>integer; initializes the time frame window with the number
of days prior to the first drug level data; defaults to 7</p>
</td></tr>
<tr><td><code id="trimDoses_+3A_last">last</code></td>
<td>
<p>integer; sets the end of the time frame window to be &quot;last&quot; days
after the first dose date, rather than the date of the last drug level data</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The time frame window is generally seven days before drug level data up
through the last drug level data record.  The window can be adjusted by
setting the lookForward and last arguments.
</p>


<h3>Value</h3>

<p>data.frame, containing trimmed dose data
</p>


<h3>Author(s)</h3>

<p>Cole Beck
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
