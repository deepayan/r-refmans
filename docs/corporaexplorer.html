<!DOCTYPE html><html><head><title>Help for package corporaexplorer</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {corporaexplorer}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#corporaexplorer-deprecated'><p>Deprecated functions in package <span class="pkg">corporaexplorer</span></p></a></li>
<li><a href='#create_sotu_df'><p>Create a data frame with State of the Union texts and metadata</p></a></li>
<li><a href='#create_test_data'><p>Create test_data</p></a></li>
<li><a href='#demo_jane_austen'><p>Demo app: Jane Austen's novels</p></a></li>
<li><a href='#demo_sotu'><p>Demo apps: State of the Union addresses</p></a></li>
<li><a href='#explore'><p>Launch Shiny app for exploration of text collection</p></a></li>
<li><a href='#get_df'><p>Retrieve the document data frame from a corporaexplorerobject</p></a></li>
<li><a href='#get_matrix'><p>Split up returned list from matrix_via_r()</p></a></li>
<li><a href='#get_term_vector'><p>Split up returned list from matrix_via_r()</p></a></li>
<li><a href='#include_columns_for_ui_checkboxes'><p>Values for custom UI sidebar checkbox filtering</p></a></li>
<li><a href='#matrix_via_r'><p>Create document term matrix for fast search of single words</p></a></li>
<li><a href='#prepare_data'><p>Prepare data for corpus exploration</p></a></li>
<li><a href='#print.corporaexplorerobject'><p>Print corporaexplorerobject</p></a></li>
<li><a href='#run_corpus_explorer-deprecated'><p>Deprecated: run_corpus_explorer()</p></a></li>
<li><a href='#run_document_extractor'><p>Launch Shiny app for retrieval of documents from text collection</p></a></li>
<li><a href='#test_data'><p>A tiny test dataset to test basic functionality</p></a></li>
<li><a href='#transform_365'><p>Convert &quot;data_dok&quot; tibble to &quot;data_365&quot; tibble</p></a></li>
<li><a href='#transform_regular'><p>Adjusts data frame to corporaexplorer format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>A 'Shiny' App for Exploration of Text Collections</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Facilitates dynamic exploration of text collections through an
    intuitive graphical user interface and the power of regular expressions.
    The package contains 1) a helper function to convert a data frame to a
    'corporaexplorerobject', 2) a 'Shiny' app for fast and flexible exploration
    of a 'corporaexplorerobject', and 3) a 'Shiny' app for simple
    retrieval/extraction of documents from a 'corporaexplorerobject' in a
    reading-friendly format. The package also includes demo apps with which
    one can explore Jane Austen's novels and the State of the Union Addresses
    (data from the 'janeaustenr' and 'sotu' packages respectively).</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>data.table, dplyr, ggplot2, lubridate, magrittr, padr, plyr,
RColorBrewer, re2, rlang, rmarkdown, scales, shiny,
shinydashboard, shinyjs, shinyWidgets, stringi, stringr,
tibble, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>janeaustenr, shinytest, sotu, testthat</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> | file LICENSE</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-20 12:50:02 UTC</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://kgjerde.github.io/corporaexplorer/">https://kgjerde.github.io/corporaexplorer/</a>,
<a href="https://github.com/kgjerde/corporaexplorer">https://github.com/kgjerde/corporaexplorer</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/kgjerde/corporaexplorer/issues">https://github.com/kgjerde/corporaexplorer/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-20 12:15:28 UTC; Kristian</td>
</tr>
<tr>
<td>Author:</td>
<td>Kristian Lundby Gjerde [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Kristian Lundby Gjerde &lt;kristian.gjerde@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='corporaexplorer-deprecated'>Deprecated functions in package <span class="pkg">corporaexplorer</span></h2><span id='topic+corporaexplorer-deprecated'></span><span id='topic+run_corpus_explorer'></span>

<h3>Description</h3>

<p>The functions listed below are deprecated and will be defunct in
the near future.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_corpus_explorer(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="corporaexplorer-deprecated_+3A_...">...</code></td>
<td>
<p>For <code>run_corpus_explorer</code>,
arguments passed to <code>explore()</code></p>
</td></tr>
</table>


<h3><code>run_corpus_explorer</code></h3>

<p>For <code>run_corpus_explorer</code>, use <code><a href="#topic+explore">explore</a></code>.
</p>

<hr>
<h2 id='create_sotu_df'>Create a data frame with State of the Union texts and metadata</h2><span id='topic+create_sotu_df'></span>

<h3>Description</h3>

<p>From the &quot;sotu&quot; package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_sotu_df()
</code></pre>


<h3>Value</h3>

<p>data frame
</p>

<hr>
<h2 id='create_test_data'>Create test_data</h2><span id='topic+create_test_data'></span>

<h3>Description</h3>

<p>Create test_data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_test_data()
</code></pre>


<h3>Value</h3>

<p>A corporaexplorerobject used for testing
</p>

<hr>
<h2 id='demo_jane_austen'>Demo app: Jane Austen's novels</h2><span id='topic+demo_jane_austen'></span><span id='topic+run_janeausten_app'></span><span id='topic+create_janeausten_app'></span>

<h3>Description</h3>

<p><code>run_janeausten_app()</code> is a convenience function to directly
run the demo app without first creating
a corporaexplorerobject.
Equals <code>explore(create_janeausten_app())</code>.
Interrupt R to stop the
application (usually by pressing Ctrl+C or Esc).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_janeausten_app(...)

create_janeausten_app()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_jane_austen_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>explore()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The demo app's data are Jane Austen's six novels, retrieved
through the &quot;janeaustenr&quot; package
(<a href="https://github.com/juliasilge/janeaustenr">https://github.com/juliasilge/janeaustenr</a>) &ndash;
which must be installed for these functions to work &ndash;
and converted to a corporaexplorerobject as shown at
<a href="https://kgjerde.github.io/corporaexplorer/articles/jane_austen.html">https://kgjerde.github.io/corporaexplorer/articles/jane_austen.html</a>.
</p>


<h3>Value</h3>

<p><code>run_janeausten_app()</code> launches a Shiny app. <code>create_janeausten_app()</code> returns
a corporaexplorerobject.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Create corporaexplorerobject for demo app:
jane_austen &lt;- create_janeausten_app()

if(interactive()){

## Run the corporaexplorerobject:
explore(jane_austen)

## Or create and run the demo app in one step:

run_janeausten_app()

}
</code></pre>

<hr>
<h2 id='demo_sotu'>Demo apps: State of the Union addresses</h2><span id='topic+demo_sotu'></span><span id='topic+run_sotu_app'></span><span id='topic+create_sotu_app'></span><span id='topic+run_sotu_decade_app'></span><span id='topic+create_sotu_decade_app'></span>

<h3>Description</h3>

<p>Two demo apps exploring the United States Presidential State of the Union addresses.
The data are provided by the
<a href="https://CRAN.R-project.org/package=sotu">sotu</a>
package, and include all addresses through 2016.
Interrupt R to stop the application (usually by pressing Ctrl+C or Esc).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_sotu_app(...)

create_sotu_app()

run_sotu_decade_app(...)

create_sotu_decade_app()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_sotu_+3A_...">...</code></td>
<td>
<p>Arguments passed to <code>explore()</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>For details, see
<a href="https://kgjerde.github.io/corporaexplorer/articles/sotu.html">https://kgjerde.github.io/corporaexplorer/articles/sotu.html</a>.
</p>


<h3>Value</h3>

<p>The <code>run_sotu_*</code> functions launch a Shiny app.
The <code>create_sotu_*</code> functions return a <code>corporaexplorerobject</code>.
</p>

<hr>
<h2 id='explore'>Launch Shiny app for exploration of text collection</h2><span id='topic+explore'></span><span id='topic+explore0'></span>

<h3>Description</h3>

<p>Launch Shiny app for exploration of text collection. Interrupt R to stop the
application (usually by pressing Ctrl+C or Esc).
</p>
<p><code>explore()</code> explores a 'corporaexplorerobject'
created with the <code>prepare_data()</code> function.
App settings optionally specified in
the arguments to <code>explore()</code>.
</p>
<p><code>explore0()</code> is a convenience function to directly explore
a data frame or character vector
without first creating a corporaexplorerobject using
<code>prepare_data()</code>, instead creating one on the fly as the app
launches.
Functionally equivalent to
<code>explore(prepare_data(dataset, use_matrix = FALSE))</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>explore(
  corpus_object,
  search_options = list(),
  ui_options = list(),
  search_input = list(),
  plot_options = list(),
  ...
)

explore0(
  dataset,
  arguments_prepare_data = list(use_matrix = FALSE),
  arguments_explore = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="explore_+3A_corpus_object">corpus_object</code></td>
<td>
<p>A corporaexplorerobject created by
<code><a href="#topic+prepare_data">prepare_data</a></code>.</p>
</td></tr>
<tr><td><code id="explore_+3A_search_options">search_options</code></td>
<td>
<p>List. Specify how search operations in the app are
carried out. Available options:
</p>

<ul>
<li> <p><code>use_matrix</code> Logical. If the corporaexplorerobject contains a document
term matrix, should it be used for searches? (See
<code><a href="#topic+prepare_data">prepare_data</a></code>.) Defaults to <code>TRUE</code>.
</p>
</li>
<li> <p><code>regex_engine</code> Character. Specify regular expression engine to be used
(defaults to <code>"default"</code>). Available options:
</p>

<ul>
<li><p> &quot;default&quot;: use the <code>re2</code> package
(<a href="https://github.com/girishji/re2">https://github.com/girishji/re2</a>) for simple searches and the
<code>stringr</code> package (<a href="https://github.com/tidyverse/stringr">https://github.com/tidyverse/stringr</a> for
complex regexes (i.e. when special regex characters are used).
</p>
</li>
<li><p> &quot;stringr&quot;: use <code>stringr</code> for all searches.
</p>
</li>
<li><p> &quot;re2&quot;: use <code>re2</code> for all searches.
</p>
</li></ul>

</li>
<li> <p><code>optional_info</code> Logical. If <code>TRUE</code>, information about search method
(regex engine and whether the search was conducted in the document term
matrix or in the full text documents).
</p>
</li>
<li> <p><code>allow_unreasonable_patterns</code> Logical. If <code>FALSE</code>, the default, the app will
not allow patterns that will result in an enormous amount of hits or will
lead to a very slow search. (Examples of such patterns will include
'<code>.</code>' and '<code>\b</code>'.)
</p>
</li></ul>
</td></tr>
<tr><td><code id="explore_+3A_ui_options">ui_options</code></td>
<td>
<p>List. Specify custom app settings (see example below).
Currently available:
</p>

<ul>
<li> <p><code>font_size</code>. Character string specifying font size in
document view,
e.g. <code>"10px"</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="explore_+3A_search_input">search_input</code></td>
<td>
<p>List. Gives the opportunity to pre-populate
the following sidebar fields (see example below):
</p>

<ul>
<li> <p><code>search_terms</code>: The 'Term(s) to chart and highlight' field.
Character vector with maximum length 5.
</p>
</li>
<li> <p><code>highlight_terms</code>: The 'Additional terms for text highlighting' field.
Character vector.
</p>
</li>
<li> <p><code>filter_terms</code>: The 'Filter corpus?' field. Character vector.
</p>
</li>
<li> <p><code>case_sensitivity</code>: Should the 'Case sensitive search' box
be checked? Logical.
</p>
</li></ul>
</td></tr>
<tr><td><code id="explore_+3A_plot_options">plot_options</code></td>
<td>
<p>List. Specify custom plot settings (see example below).
Currently available:
</p>

<ul>
<li> <p><code>max_docs_in_wall_view</code>. Integer specifying the maximum number
of documents to be rendered in the 'document wall' view.
Default value is 12000.
</p>
</li>
<li> <p><code>plot_size_factor</code>. Numeric. Tweaks the corpus map plot's
height. Value &gt; 1 increases height, value &lt; 1 decreases height.
Ignored if value &lt;= 0.
</p>
</li>
<li> <p><code>documents_per_row_factor</code>. Numeric. Tweaks the number of
documents included in each row in 'document wall' view. Value &gt; 1
increases number of documents, value &lt; 1 decreases number of
documents. Ignored if value &lt;= 0.
</p>
</li>
<li> <p><code>document_tiles</code>. Integer specifying the number of tiles
used in the tile chart representing occurences of terms in document.
Ignored if value &lt; 1 or if value &gt; 50.
</p>
</li>
<li> <p><code>colours</code>. Character vector of length 1 to 6. Specify the
order of the colours used to represent search (and highlight) terms
in plots and documents. The default order and available colours are
defined by the character vector
<code>c("red", "blue", "green", "purple", "orange", "gray")</code>.
Passing e.g. <code>plot_options = list(colours = c("gray", "green"))</code>
will change that order to
<code>c("gray", "green", "red", "blue", "purple", "orange")</code>.
Arguments with duplicated colours or with colours not present in the
default character vector will be ignored.
</p>
</li>
<li> <p><code>tile_length</code>. Either <code>"scaled"</code> or <code>"uniform"</code>.
With <code>"scaled"</code>, the default, the length of the
tiles in document wall view and day corpus view
will vary according to length of document
(see the <code>tile_length_range</code> argument in <code>prepare_data()</code>).
If <code>"uniform"</code>, all tiles will be of equal length.
</p>
</li></ul>
</td></tr>
<tr><td><code id="explore_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="shiny.html#topic+runApp">runApp</a></code> in the Shiny
package.</p>
</td></tr>
<tr><td><code id="explore_+3A_dataset">dataset</code></td>
<td>
<p>Data frame or character vector as specified in <code>prepare_data()</code></p>
</td></tr>
<tr><td><code id="explore_+3A_arguments_prepare_data">arguments_prepare_data</code></td>
<td>
<p>List. Arguments to be passed to
<code>prepare_data()</code> in order to override this function's
default argument values.</p>
</td></tr>
<tr><td><code id="explore_+3A_arguments_explore">arguments_explore</code></td>
<td>
<p>List. Arguments to be passed to
<code>explore()</code> in order to override this function's
default argument values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For <code>explore0()</code>:
by default, no document term matrix will be generated,
meaning that the data will be prepared for exploration faster than
by using the default settings in <code>prepare_data()</code>,
but also that searches in the app are likely to be slower.
</p>


<h3>Value</h3>

<p>Launches a Shiny app.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Constructing test data frame:
dates &lt;- as.Date(paste(2011:2020, 1:10, 21:30, sep = "-"))
texts &lt;- paste0(
  "This is a document about ", month.name[1:10], ". ",
  "This is not a document about ", rev(month.name[1:10]), "."
)
titles &lt;- paste("Text", 1:10)
test_df &lt;- tibble::tibble(Date = dates, Text = texts, Title = titles)

# Converting to corporaexplorerobject:
corpus &lt;- prepare_data(test_df, corpus_name = "Test corpus")

if(interactive()){

# Running exploration app:
explore(corpus)
explore(corpus,
        search_options = list(optional_info = TRUE),
        ui_options = list(font_size = "10px"),
        search_input = list(search_terms = c("Tottenham", "Spurs")),
        plot_options = list(max_docs_in_wall_view = 12001,
                                        colours = c("gray", "green")))

# Running app to extract documents:
run_document_extractor(corpus)
}
if (interactive()) {

explore0(rep(sample(LETTERS), 10))

explore0(rep(sample(LETTERS), 10),
  arguments_explore = list(search_input = list(search_terms = "Z"))
)

}
</code></pre>

<hr>
<h2 id='get_df'>Retrieve the document data frame from a corporaexplorerobject</h2><span id='topic+get_df'></span>

<h3>Description</h3>

<p>Retrieve the document data frame from a corporaexplorerobject
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_df(x, make_normal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_df_+3A_x">x</code></td>
<td>
<p>corporaexplorerobject</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>

<hr>
<h2 id='get_matrix'>Split up returned list from matrix_via_r()</h2><span id='topic+get_matrix'></span>

<h3>Description</h3>

<p>Split up returned list from matrix_via_r()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_matrix(returned_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_matrix_+3A_returned_list">returned_list</code></td>
<td>
<p>Returned list from matrix_via_r()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Document term matrix (data.table).
</p>

<hr>
<h2 id='get_term_vector'>Split up returned list from matrix_via_r()</h2><span id='topic+get_term_vector'></span>

<h3>Description</h3>

<p>Split up returned list from matrix_via_r()
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_term_vector(returned_list)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_term_vector_+3A_returned_list">returned_list</code></td>
<td>
<p>Returned list from matrix_via_r()</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Word vector (character vector).
</p>

<hr>
<h2 id='include_columns_for_ui_checkboxes'>Values for custom UI sidebar checkbox filtering</h2><span id='topic+include_columns_for_ui_checkboxes'></span>

<h3>Description</h3>

<p>Values for custom UI sidebar checkbox filtering
</p>


<h3>Usage</h3>

<pre><code class='language-R'>include_columns_for_ui_checkboxes(new_df, columns_for_ui_checkboxes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="include_columns_for_ui_checkboxes_+3A_new_df">new_df</code></td>
<td>
<p>A &quot;data_dok&quot; tibble produced by <code>transform_regular</code></p>
</td></tr>
<tr><td><code id="include_columns_for_ui_checkboxes_+3A_columns_for_ui_checkboxes">columns_for_ui_checkboxes</code></td>
<td>
<p>Character. Character or factor column(s) in dataset.
Include sets of checkboxes in the app sidebar for
convenient filtering of corpus.
Typical useful for columns with a small set of unique
(and short) values.
Checkboxes will be arranged by <code>sort()</code>,
unless <code>columns_for_ui_checkboxes</code>
is a vector of factors, in which case the order will be according to
factor level order (easy relevelling with <code>forcats::fct_relevel()</code>).
To use a different
label in the sidebar than the columnn name,
simply pass a named character vector to <code>columns_for_ui_checkboxes</code>.
If <code>columns_for_ui_checkboxes</code> includes a column which is not
present in dataset, it will be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List: column_names; values. Or NULL.
</p>

<hr>
<h2 id='matrix_via_r'>Create document term matrix for fast search of single words</h2><span id='topic+matrix_via_r'></span>

<h3>Description</h3>

<p>The characters removed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matrix_via_r(df, matrix_without_punctuation = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix_via_r_+3A_df">df</code></td>
<td>
<p>A &quot;data_dok&quot; tibble</p>
</td></tr>
<tr><td><code id="matrix_via_r_+3A_matrix_without_punctuation">matrix_without_punctuation</code></td>
<td>
<p>Should punctuation and digits be stripped
from the text before constructing the document term matrix? If <code>TRUE</code>,
the default:
</p>

<ul>
<li><p> The corporaexplorer object will be lighter and most searches in
the corpus exploration app will be faster.
</p>
</li>
<li><p> Searches including punctuation and digits will be carried out in
the full text documents.
</p>
</li>
<li><p> The only &quot;risk&quot; with this strategy is that the corpus exploration
app in some cases can produce false positives. E.g. searching for the
term &quot;donkey&quot; will also find the term &quot;don%key&quot;.
This should not be a problem for the vast majority of use cases, but if
one so desires, there are three different solutions: set this parameter to
<code>FALSE</code>, create a corporaexplorerobject without a matrix by setting
the <code>use_matrix</code> parameter to <code>FALSE</code>, or run
<code><a href="#topic+explore">explore</a></code> with the
<code>use_matrix</code> parameter set to <code>FALSE</code>.
</p>
</li></ul>

<p>If <code>FALSE</code>, the corporaexplorer object will be larger, and most
simple searches will be slower.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List: 1) Document term matrix (data.table), 2) word vector (character
vector).
</p>

<hr>
<h2 id='prepare_data'>Prepare data for corpus exploration</h2><span id='topic+prepare_data'></span><span id='topic+prepare_data.data.frame'></span><span id='topic+prepare_data.character'></span>

<h3>Description</h3>

<p>Convert data frame or character vector to a ‘corporaexplorerobject’
for subsequent exploration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepare_data(dataset, ...)

## S3 method for class 'data.frame'
prepare_data(
  dataset,
  date_based_corpus = TRUE,
  grouping_variable = NULL,
  within_group_identifier = "Seq",
  columns_doc_info = c("Date", "Title", "URL"),
  corpus_name = NULL,
  use_matrix = TRUE,
  matrix_without_punctuation = TRUE,
  tile_length_range = c(1, 10),
  columns_for_ui_checkboxes = NULL,
  ...
)

## S3 method for class 'character'
prepare_data(
  dataset,
  corpus_name = NULL,
  use_matrix = TRUE,
  matrix_without_punctuation = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepare_data_+3A_dataset">dataset</code></td>
<td>
<p>Object to convert to corporaexplorerobject:
</p>

<ul>
<li><p> A data frame with a column &quot;Text&quot; (class
character), and optionally other columns.
If <code>date_based_corpus</code> is <code>TRUE</code> (the default),
<code>dataset</code> must contain a column &quot;Date&quot; (of class Date).
</p>
</li>
<li><p> Or a non-empty character vector.
</p>
</li></ul>
</td></tr>
<tr><td><code id="prepare_data_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to <code>prepare_data</code>.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_date_based_corpus">date_based_corpus</code></td>
<td>
<p>Logical. Set to <code>FALSE</code> if the corpus
is not to be organised according to document dates.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_grouping_variable">grouping_variable</code></td>
<td>
<p>Character string.
If <code>date_based_corpus</code> is <code>TRUE</code>, this argument is ignored.
If <code>date_based_corpus</code> is <code>FALSE</code>, this argument can be used
to group the documents, e.g. if <code>dataset</code> is organised by chapters
belonging to different books.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_within_group_identifier">within_group_identifier</code></td>
<td>
<p>Character string indicating column name in <code>dataset</code>.
<code>"Seq"</code>, the default, means the rows in each group are assigned
a numeric sequence 1:n where n is the number of rows in the group.
Used in document tab title in non-date based corpora.
If <code>date_based_corpus</code> is <code>TRUE</code>, this argument is ignored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_columns_doc_info">columns_doc_info</code></td>
<td>
<p>Character vector. The columns from <code>dataset</code> to display in
the &quot;document information&quot; tab in the corpus exploration app. By default
&quot;Date&quot;, &quot;Title&quot; and &quot;URL&quot; will be
displayed, if included. If <code>columns_doc_info</code> includes a column which is not
present in dataset, it will be ignored.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_corpus_name">corpus_name</code></td>
<td>
<p>Character string with name of corpus.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_use_matrix">use_matrix</code></td>
<td>
<p>Logical. Should the function create a document term matrix
for fast searching? If <code>TRUE</code>, data preparation will run longer and demand
more memory. If <code>FALSE</code>, the returning corporaexplorerobject will be more light-weight, but
searching will be slower.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_matrix_without_punctuation">matrix_without_punctuation</code></td>
<td>
<p>Should punctuation and digits be stripped
from the text before constructing the document term matrix? If <code>TRUE</code>,
the default:
</p>

<ul>
<li><p> The corporaexplorer object will be lighter and most searches in
the corpus exploration app will be faster.
</p>
</li>
<li><p> Searches including punctuation and digits will be carried out in
the full text documents.
</p>
</li>
<li><p> The only &quot;risk&quot; with this strategy is that the corpus exploration
app in some cases can produce false positives. E.g. searching for the
term &quot;donkey&quot; will also find the term &quot;don%key&quot;.
This should not be a problem for the vast majority of use cases, but if
one so desires, there are three different solutions: set this parameter to
<code>FALSE</code>, create a corporaexplorerobject without a matrix by setting
the <code>use_matrix</code> parameter to <code>FALSE</code>, or run
<code><a href="#topic+explore">explore</a></code> with the
<code>use_matrix</code> parameter set to <code>FALSE</code>.
</p>
</li></ul>

<p>If <code>FALSE</code>, the corporaexplorer object will be larger, and most
simple searches will be slower.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_tile_length_range">tile_length_range</code></td>
<td>
<p>Numeric vector of length two.
Fine-tune the tile lengths in document wall
and day corpus view. Tile length is calculated by
<code>scales::rescale(nchar(dataset$Text),
to = tile_length_range,
from = c(0, max(.)))</code>
Default is <code>c(1, 10)</code>.</p>
</td></tr>
<tr><td><code id="prepare_data_+3A_columns_for_ui_checkboxes">columns_for_ui_checkboxes</code></td>
<td>
<p>Character. Character or factor column(s) in dataset.
Include sets of checkboxes in the app sidebar for
convenient filtering of corpus.
Typical useful for columns with a small set of unique
(and short) values.
Checkboxes will be arranged by <code>sort()</code>,
unless <code>columns_for_ui_checkboxes</code>
is a vector of factors, in which case the order will be according to
factor level order (easy relevelling with <code>forcats::fct_relevel()</code>).
To use a different
label in the sidebar than the columnn name,
simply pass a named character vector to <code>columns_for_ui_checkboxes</code>.
If <code>columns_for_ui_checkboxes</code> includes a column which is not
present in dataset, it will be ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For data.frame: Each row in <code>dataset</code> is treated as a base differentiating unit in the corpus,
typically chapters in books, or a single document in document collections.
The following column names are reserved and cannot be used in <code>dataset</code>:
&quot;ID&quot;,
&quot;Text_original_case&quot;,
&quot;Tile_length&quot;,
&quot;Year&quot;,
&quot;Seq&quot;,
&quot;Weekday_n&quot;,
&quot;Day_without_docs&quot;,
&quot;Invisible_fake_date&quot;,
&quot;Tile_length&quot;.
</p>
<p>A character vector will be converted to a simple corporaexplorerobject
with no metadata.
</p>


<h3>Value</h3>

<p>A <code>corporaexplorer</code> object to be passed as argument to
<code><a href="#topic+explore">explore</a></code> and
<code><a href="#topic+run_document_extractor">run_document_extractor</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## From data.frame
# Constructing test data frame:
dates &lt;- as.Date(paste(2011:2020, 1:10, 21:30, sep = "-"))
texts &lt;- paste0(
  "This is a document about ", month.name[1:10], ". ",
  "This is not a document about ", rev(month.name[1:10]), "."
)
titles &lt;- paste("Text", 1:10)
test_df &lt;- tibble::tibble(Date = dates, Text = texts, Title = titles)

# Converting to corporaexplorerobject:
corpus &lt;- prepare_data(test_df, corpus_name = "Test corpus")

if(interactive()){
# Running exploration app:
explore(corpus)

# Running app to extract documents:
run_document_extractor(corpus)
}

## From character vector
alphabet_corpus &lt;- prepare_data(LETTERS)

if(interactive()){
# Running exploration app:
explore(alphabet_corpus)
}
</code></pre>

<hr>
<h2 id='print.corporaexplorerobject'>Print corporaexplorerobject</h2><span id='topic+print.corporaexplorerobject'></span>

<h3>Description</h3>

<p>Print corporaexplorerobject
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'corporaexplorerobject'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.corporaexplorerobject_+3A_x">x</code></td>
<td>
<p>A corporaexplorerobject</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Console-friendly output
</p>

<hr>
<h2 id='run_corpus_explorer-deprecated'>Deprecated: run_corpus_explorer()</h2><span id='topic+run_corpus_explorer-deprecated'></span>

<h3>Description</h3>

<p>Deprecated. Use <code>explore()</code> instead.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+corporaexplorer-deprecated">corporaexplorer-deprecated</a></code>
</p>

<hr>
<h2 id='run_document_extractor'>Launch Shiny app for retrieval of documents from text collection</h2><span id='topic+run_document_extractor'></span>

<h3>Description</h3>

<p>Shiny app for simple retrieval/extraction of
documents from a &quot;corporaexplorerobject&quot; in a reading-friendly format.
Interrupt R to stop the application (usually by pressing Ctrl+C or Esc).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run_document_extractor(corpus_object, max_html_docs = 400, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run_document_extractor_+3A_corpus_object">corpus_object</code></td>
<td>
<p>A <code>corporaexplorer</code> object created by
<code><a href="#topic+prepare_data">prepare_data</a></code>.</p>
</td></tr>
<tr><td><code id="run_document_extractor_+3A_max_html_docs">max_html_docs</code></td>
<td>
<p>The maximum number of documents allowed in one HTML report.</p>
</td></tr>
<tr><td><code id="run_document_extractor_+3A_...">...</code></td>
<td>
<p>Other arguments passed to <code><a href="shiny.html#topic+runApp">runApp</a></code> in the Shiny
package.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Constructing test data frame:
dates &lt;- as.Date(paste(2011:2020, 1:10, 21:30, sep = "-"))
texts &lt;- paste0(
  "This is a document about ", month.name[1:10], ". ",
  "This is not a document about ", rev(month.name[1:10]), "."
)
titles &lt;- paste("Text", 1:10)
test_df &lt;- tibble::tibble(Date = dates, Text = texts, Title = titles)

# Converting to corporaexplorer object:
corpus &lt;- prepare_data(test_df, corpus_name = "Test corpus")
if(interactive()){
# Running exploration app:
explore(corpus)

# Running app to extract documents:
run_document_extractor(corpus)
}
</code></pre>

<hr>
<h2 id='test_data'>A tiny test dataset to test basic functionality</h2><span id='topic+test_data'></span>

<h3>Description</h3>

<p>Created by <code>corporaexplorer:::create_test_data()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>test_data
</code></pre>


<h3>Format</h3>

<p>A corporaexplorerobject.
</p>

<hr>
<h2 id='transform_365'>Convert &quot;data_dok&quot; tibble to &quot;data_365&quot; tibble</h2><span id='topic+transform_365'></span>

<h3>Description</h3>

<p>Convert &quot;data_dok&quot; tibble to &quot;data_365&quot; tibble
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_365(new_df)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_365_+3A_new_df">new_df</code></td>
<td>
<p>A &quot;data_dok&quot; tibble produced by <code>transform_regular</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;data_365&quot; tibble.
</p>

<hr>
<h2 id='transform_regular'>Adjusts data frame to corporaexplorer format</h2><span id='topic+transform_regular'></span>

<h3>Description</h3>

<p>Adjusts data frame to corporaexplorer format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transform_regular(df, tile_length_range = c(1, 10))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transform_regular_+3A_df">df</code></td>
<td>
<p>Data frame with Date column (Date), Text column (character), and
optionally Title (character), URL (character), and Type (character)
columns.</p>
</td></tr>
<tr><td><code id="transform_regular_+3A_tile_length_range">tile_length_range</code></td>
<td>
<p>Numeric vector of length two.
Fine-tune the tile lengths in document wall
and day corpus view. Tile length is calculated by
<code>scales::rescale(nchar(dataset$Text),
to = tile_length_range,
from = c(0, max(.)))</code>
Default is <code>c(1, 10)</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble (&quot;data_dok&quot;)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
