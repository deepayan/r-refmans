<!DOCTYPE html><html><head><title>Help for package rameritrade</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rameritrade}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#rameritrade'><p>rameritrade: A package for using the TD Ameritrade API</p></a></li>
<li><a href='#td_accountData'><p>Get account balances positions, and orders returned as a list</p></a></li>
<li><a href='#td_auth_accessToken'><p>Auth Step 3: Get Access Token</p></a></li>
<li><a href='#td_auth_loginURL'><p>Auth Step 1: Generate LogIn URL</p></a></li>
<li><a href='#td_auth_refreshToken'><p>Auth Step 2: Obtain Refresh Token</p></a></li>
<li><a href='#td_cancelOrder'><p>Cancel an Open Order</p></a></li>
<li><a href='#td_marketHours'><p>Get Market Hours</p></a></li>
<li><a href='#td_optionChain'><p>Get Options Chain</p></a></li>
<li><a href='#td_orderDetail'><p>Get Details for a Single Order</p></a></li>
<li><a href='#td_orderSearch'><p>Search for orders by date</p></a></li>
<li><a href='#td_placeOrder'><p>Place Order for a specific account</p></a></li>
<li><a href='#td_priceHistory'><p>Get price history for a multiple securities</p></a></li>
<li><a href='#td_priceQuote'><p>Get Quotes for specified tickers in List form</p></a></li>
<li><a href='#td_symbolDetail'><p>Get ticker details</p></a></li>
<li><a href='#td_transactSearch'><p>Search for all Transaction types</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>'TD Ameritrade' API Interface for R</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.5</td>
</tr>
<tr>
<td>Author:</td>
<td>Anthony Balentine [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anthony Balentine &lt;exploringfinance1@gmail.com&gt;</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://exploringfinance.github.io/rameritrade/">https://exploringfinance.github.io/rameritrade/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/exploringfinance/rameritrade/issues">https://github.com/exploringfinance/rameritrade/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Use R to interface with the 'TD Ameritrade' API <a href="https://developer.tdameritrade.com/">https://developer.tdameritrade.com/</a>.
    Functions include authentication, trading, price requests, account information, and option 
    chains. A user will need a TD brokerage account and TD Ameritrade developer app. See README 
    for authentication process and examples.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr, urltools (&ge; 1.7.3), lubridate, dplyr, jsonlite,
magrittr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-02-22 02:31:52 UTC; rstudio</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-02-22 13:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='rameritrade'>rameritrade: A package for using the TD Ameritrade API</h2><span id='topic+rameritrade'></span>

<h3>Description</h3>

<p>The rameritrade package provides four categories of important functions:
</p>
 
<ol>
<li><p> authenticating into a TD Brokerage account
</p>
</li>
<li><p> working with orders 
</p>
</li>
<li><p> getting account information 
</p>
</li>
<li><p> pulling pricing/market data
</p>
</li></ol>



<h3>Details</h3>

<p>Details for the functions can be found within the function help pages. 
Detailed examples also available within the README.
</p>

<hr>
<h2 id='td_accountData'>Get account balances positions, and orders returned as a list</h2><span id='topic+td_accountData'></span>

<h3>Description</h3>

<p>Retrieves a account data for the accounts linked to the Access Token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_accountData(output = "df", accessToken = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_accountData_+3A_output">output</code></td>
<td>
<p>Use 'df' for a list of 3 data frames containing balances,
positions, and orders. Otherwise the data will be returned as a list of
lists</p>
</td></tr>
<tr><td><code id="td_accountData_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output will be either a list of three data frames or a list of three
lists that contain balances, positions, and orders for TD Ameritrade accounts
linked to the access token. For historical orders, see
<code><a href="#topic+td_orderSearch">td_orderSearch</a></code>. The default is for a data frame output which is
much cleaner.
</p>


<h3>Value</h3>

<p>a list of requested account details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# Generate a new access token
accessToken = td_auth_accessToken(refreshToken, 'consumerKey')

# Passing the accessToken is optional. The default will return balances
asDF = td_accountData()
asList = td_accountData('list',accessToken)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_auth_accessToken'>Auth Step 3: Get Access Token</h2><span id='topic+td_auth_accessToken'></span>

<h3>Description</h3>

<p>Get a new Access Token using a valid Refresh Token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_auth_accessToken(consumerKey, refreshToken)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_auth_accessToken_+3A_consumerkey">consumerKey</code></td>
<td>
<p>TD generated Consumer key for the registered TD app.
Essentially an API key.</p>
</td></tr>
<tr><td><code id="td_auth_accessToken_+3A_refreshtoken">refreshToken</code></td>
<td>
<p>An existing Refresh Token generated using
<code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>An Access Token is required for the functions within rameritrade. It serves
as a user login to a TD Brokerage account. The token is valid for 30 minutes
and allows the user to place trades, get account information, get order
history, pull historical stock prices, etc. A Refresh Token is required to
generate an Access Token. <code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code>  can be used to
generate Refresh Tokens which stay valid for 90 days. The Consumer Key is
generated automatically when an App is registered on the
<a href="https://developer.tdameritrade.com/">TD Ameritrade Developer</a> site. By
default, the Access Token is stored into options and will automatically be
passed to downstream functions. However, the user can also submit an Access
Token manually if multiple tokens are in use (for example: when managing more
than one log in.)
</p>
<p>When running this function manually (i.e. through RStudio), the function will
check for a default Access Token. If the default Access Token has not
expired, the user will be prompted to verify a new Access Token is desired.
This may be the case if more than one TD login is being used. When running
this function in a non-interactive environment (i.e. CRON Job), the default
behavior will be to refresh the Access Token.
</p>
<p>DISCLOSURE: This software is in no way affiliated, endorsed, or approved by
TD Ameritrade or any of its affiliates. It comes with absolutely no warranty
and should not be used in actual trading unless the user can read and
understand the source code. The functions within this package have been
tested under basic scenarios. There may be bugs or issues that could prevent
a user from executing trades or canceling trades. It is also possible trades
could be submitted in error. The user will use this package at their own
risk.
</p>


<h3>Value</h3>

<p>Access Token that is valid for 30 minutes. By default it is stored in
options.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+td_auth_loginURL">td_auth_loginURL</a></code> to generate a login url which leads
to an authorization code, <code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code> to generate a
Refresh Token using an existing Refresh Token or an authorization code with
a callback URL when logging in manually,  <code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>
to generate a new Access Token
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# A valid Refresh Token can be fed into the function below for a new Access Token
refreshToken = readRDS('/secure/location/')
accessToken = td_auth_accessToken('TD_CONSUMER_KEY', refreshToken)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_auth_loginURL'>Auth Step 1: Generate LogIn URL</h2><span id='topic+td_auth_loginURL'></span>

<h3>Description</h3>

<p>Create URL to grant App access to a TD Brokerage account
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_auth_loginURL(consumerKey, callbackURL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_auth_loginURL_+3A_consumerkey">consumerKey</code></td>
<td>
<p>TD generated Consumer key for the registered TD app.
Essentially an API key.</p>
</td></tr>
<tr><td><code id="td_auth_loginURL_+3A_callbackurl">callbackURL</code></td>
<td>
<p>User generated Callback URL for the registered TD app</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To use the TD Ameritrade API, both a TD Brokerage account and a registered
developer app are required. The developer app functions as a middle layer
between the brokerage account and the API. A developer app should be
registered on the <a href="https://developer.tdameritrade.com/">TD Ameritrade
Developer</a> site. Once logged in to the developer site, use My Apps to
register an application. An App will have a Consumer Key provided by TD that
functions as an API key. The Consumer Key is auto generated and can be found
under My Apps &gt; Keys. The user must also create a Callback URL. The Callback
URL can be anything. The example below assumes the Callback URL is
https://myTDapp.
</p>
<p>This function will use these two inputs to generate a URL where the user can
log in to their standard TD Ameritrade Brokerage Account and grant the
application access to the brokerage account, enabling the API. The
Authorization Code generated at the end of the log in process will feed into
<code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code>. For questions, please reference the
<a href="https://developer.tdameritrade.com/content/authentication-faq">TD
Ameritrade Authentication FAQ</a> or see the examples in the rameritrade readme.
If the callback URL uses punctuation, numbers, or an IP (e.g. 127.0.0.0.1),
the output of this function may not work. Please reference the TD
documentation to create the appropriate URL.
</p>


<h3>Value</h3>

<p>login url to grant app permission to TD Brokerage account
</p>


<h3>See Also</h3>

<p><code><a href="#topic+td_auth_loginURL">td_auth_loginURL</a></code> to generate a login url which leads
to an authorization code, <code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code> to generate a
Refresh Token using an existing Refresh Token or an authorization code with
a callback URL when loggin in manually,  <code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>
to generate a new Access Token
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Visit the URL generated from the function below to log in to a TD Brokerage account
# Once a successful log in is completed the landing page will be a blank page
# The full URL of the landing page is the Authorization Code for td_auth_refreshToken

loginURL = td_auth_loginURL('https://myTDapp','consumerKey')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_auth_refreshToken'>Auth Step 2: Obtain Refresh Token</h2><span id='topic+td_auth_refreshToken'></span>

<h3>Description</h3>

<p>Get a Refresh Token using the Authorization Code or an existing Refresh Token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_auth_refreshToken(consumerKey, callbackURL, codeToken)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_auth_refreshToken_+3A_consumerkey">consumerKey</code></td>
<td>
<p>TD generated Consumer key for the registered TD app.
Essentially an API key.</p>
</td></tr>
<tr><td><code id="td_auth_refreshToken_+3A_callbackurl">callbackURL</code></td>
<td>
<p>User generated Callback URL for the registered TD app</p>
</td></tr>
<tr><td><code id="td_auth_refreshToken_+3A_codetoken">codeToken</code></td>
<td>
<p>Will be either an authorization code when manually logging
in or a Refresh Token if the current Refresh Token is nearing expiration.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Once a URL has been generated using <code><a href="#topic+td_auth_loginURL">td_auth_loginURL</a></code>, a user
can visit that URL to log into a TD brokerage account, granting the TD app
access to the account. Once the button &quot;Allow&quot; is pressed, the user will be
redirected, potentially to &quot;This site can't be reached&quot;. This indicates a
successful log in. The URL of this page contains the Authorization Code.
Paste the entire URL, not just the Authorization Code, into
td_auth_refreshToken. The authorization code will be an extremely long alpha
numeric string starting with 'https'.
</p>
<p>The output of td_auth_refreshToken will be a Refresh Token which will be used
to gain access to the TD Brokerage account(s) going forward. The Refresh
Token will be valid for 90 days. Be sure to save the Refresh Token to a safe
location or the manual log in process will be required again. The user can use
td_auth_refreshToken to reset the token before expiration.
</p>
<p>The Refresh Token output should be saved in a very safe location, but also
accessible. It will be needed to generate an Access Token using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>, which is used for general account access.
The Access Token expires after 30 minutes.
</p>
<p>Note: When running this function interactively (e.g. through RStudio) using
an existing Refresh Token, the function will check the days left until
expiration for the Refresh Token being passed. If the remaining time is
greater than 15 days, the user will be prompted to verify that a new Refresh
Token should be created. The user can select to request a new token, but
there is no net benefit in doing so and TD encourages limiting new token
generation. When running this function in a non-interactive environment (e.g.
CRON Job), if the remaining time until expiration is greater than 15 days,
the default behavior will be to NOT reset the Refresh Token because the new
token will have the same access and capabilities as the existing token.
</p>


<h3>Value</h3>

<p>Refresh Token that is valid for 90 days
</p>


<h3>See Also</h3>

<p><code><a href="#topic+td_auth_loginURL">td_auth_loginURL</a></code> to generate a login url which leads
to an authorization code, <code><a href="#topic+td_auth_refreshToken">td_auth_refreshToken</a></code> to generate a
Refresh Token using an existing Refresh Token or an authorization code with
a callback URL when logging in manually,  <code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>
to generate a new Access Token
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Initial access will require manually logging in to the URL from td_auth_loginURL
# After a successful log in, the URL authorization code can be fed with a callbackURL
refreshToken = td_auth_refreshToken(consumerKey = 'TD_CONSUMER_KEY',
                                    callbackURL = 'https://myTDapp',
                                    codeToken = 'https://myTDapp/?code=Auhtorizationcode')

# If an existing Refresh Token exists. Pass this. CallbackURL is not needed.
refreshToken = readRDS('/secure/location/')
refreshToken = td_auth_refreshToken(consumerKey = 'TD_CONSUMER_KEY',
                                    codeToken = refreshToken)

# Save the Refresh Token somewhere safe where it can be retrieved
saveRDS(refreshToken,'/secure/location/')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_cancelOrder'>Cancel an Open Order</h2><span id='topic+td_cancelOrder'></span>

<h3>Description</h3>

<p>Pass an Order ID and Account number to cancel an existing open order
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_cancelOrder(orderId, accountNumber, accessToken = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_cancelOrder_+3A_orderid">orderId</code></td>
<td>
<p>A valid TD Ameritrade Order ID</p>
</td></tr>
<tr><td><code id="td_cancelOrder_+3A_accountnumber">accountNumber</code></td>
<td>
<p>The TD brokerage account number associated with the
Access Token</p>
</td></tr>
<tr><td><code id="td_cancelOrder_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>order API URL. Message confirming cancellation
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 

td_cancelOrder(orderId = 123456789, accountNumber = 987654321)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_marketHours'>Get Market Hours</h2><span id='topic+td_marketHours'></span>

<h3>Description</h3>

<p>Returns a list output for current day and specified market that details the
trading window
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_marketHours(
  marketType = c("EQUITY", "OPTION", "BOND", "FUTURE", "FOREX"),
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_marketHours_+3A_markettype">marketType</code></td>
<td>
<p>The asset class to pull:
'EQUITY','OPTION','BOND','FUTURE','FOREX'. Default is EQUITY</p>
</td></tr>
<tr><td><code id="td_marketHours_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>List output of times and if the current date is a trading day
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Access Token must be set using td_auth_accessToken
# Market hours for the current date
td_marketHours()
td_marketHours('2020-06-24', 'OPTION')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_optionChain'>Get Options Chain</h2><span id='topic+td_optionChain'></span>

<h3>Description</h3>

<p>Search an Option Chain for a specific ticker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_optionChain(
  ticker,
  strikes = 10,
  inclQuote = TRUE,
  startDate = Sys.Date(),
  endDate = Sys.Date() + 360,
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_optionChain_+3A_ticker">ticker</code></td>
<td>
<p>underlying ticker for the options chain</p>
</td></tr>
<tr><td><code id="td_optionChain_+3A_strikes">strikes</code></td>
<td>
<p>the number of strikes above and below the current strike</p>
</td></tr>
<tr><td><code id="td_optionChain_+3A_inclquote">inclQuote</code></td>
<td>
<p>set TRUE to include pricing details (will be delayed if
account is set for delayed quotes)</p>
</td></tr>
<tr><td><code id="td_optionChain_+3A_startdate">startDate</code></td>
<td>
<p>the start date for expiration (should be greater than or
equal to today). Format: yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="td_optionChain_+3A_enddate">endDate</code></td>
<td>
<p>the end date for expiration (should be greater than or equal
to today). Format: yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="td_optionChain_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Return a list containing two data frames. The first is the underlying data
for the symbol. The second item in the list is a data frame that contains the
options chain for the specified ticker.
</p>


<h3>Value</h3>

<p>a list of 2 data frames - underlying and options chain
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Pull all option contracts expiring over the next 6 months
# with 5 strikes above and below the at-the-money price
td_optionChain(ticker = 'SPY',
             strikes = 5,
             endDate = Sys.Date() + 180)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_orderDetail'>Get Details for a Single Order</h2><span id='topic+td_orderDetail'></span>

<h3>Description</h3>

<p>Pass an order ID and Account number to get details such as status, quantity,
ticker, executions (if applicable), account, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_orderDetail(orderId, accountNumber, accessToken = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_orderDetail_+3A_orderid">orderId</code></td>
<td>
<p>A valid TD Ameritrade Order ID</p>
</td></tr>
<tr><td><code id="td_orderDetail_+3A_accountnumber">accountNumber</code></td>
<td>
<p>The TD brokerage account number associated with the
Access Token</p>
</td></tr>
<tr><td><code id="td_orderDetail_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list of order details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessToken = td_auth_accessToken(refreshToken, 'consumerKey')

# Get order details for a single order
# Passing Access Token is optional once it's been set
td_orderDetail(orderId = 123456789, accountNumber = 987654321)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_orderSearch'>Search for orders by date</h2><span id='topic+td_orderSearch'></span>

<h3>Description</h3>

<p>Search for orders associated with a TD account over the previous 60 days. The
result is a list of three objects: 
</p>
 
<ol>
<li><p> jsonlite formatted extract of all orders 
</p>
</li>
<li><p> all entered orders with details 
</p>
</li>
<li><p> a data frame of all executed orders with the executions </p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>td_orderSearch(
  accountNumber,
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  maxResults = 50,
  orderStatus = "",
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_orderSearch_+3A_accountnumber">accountNumber</code></td>
<td>
<p>The TD brokerage account number associated with the
Access Token</p>
</td></tr>
<tr><td><code id="td_orderSearch_+3A_startdate">startDate</code></td>
<td>
<p>Orders from a certain date with. Format yyyy-mm-dd. TD
indicates there is a 60 day max, but this limit may not always apply</p>
</td></tr>
<tr><td><code id="td_orderSearch_+3A_enddate">endDate</code></td>
<td>
<p>Filter orders that occurred before a certain date. Format
yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="td_orderSearch_+3A_maxresults">maxResults</code></td>
<td>
<p>the max results to return in the query</p>
</td></tr>
<tr><td><code id="td_orderSearch_+3A_orderstatus">orderStatus</code></td>
<td>
<p>search by order status (ACCEPTED, FILLED, EXPIRED,
CANCELED, REJECTED, etc)</p>
</td></tr>
<tr><td><code id="td_orderSearch_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of three objects: a jsonlite formatted extract of all orders,
all entered orders with details, a data frame of all executed orders with
the executions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get all orders run over the last 50 days (up to 500)
td_orderSearch(accountNumber = 987654321, 
             startDate = Sys.Date()-days(50),
             maxResult = 500, orderStatus = 'FILLED')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_placeOrder'>Place Order for a specific account</h2><span id='topic+td_placeOrder'></span>

<h3>Description</h3>

<p>Place trades through the TD Ameritrade API using a range of parameters
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_placeOrder(
  accountNumber,
  ticker,
  quantity,
  instruction,
  orderType = "MARKET",
  limitPrice = NULL,
  stopPrice = NULL,
  assetType = c("EQUITY", "OPTION"),
  session = "NORMAL",
  duration = "DAY",
  stopPriceBasis = NULL,
  stopPriceType = NULL,
  stopPriceOffset = NULL,
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_placeOrder_+3A_accountnumber">accountNumber</code></td>
<td>
<p>The TD brokerage account number associated with the
Access Token</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_ticker">ticker</code></td>
<td>
<p>a valid Equity/ETF or option. If needed, use td_symbolDetail to
confirm. This should be a ticker/symbol, not a CUSIP</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_quantity">quantity</code></td>
<td>
<p>the number of shares to be bought or sold. Must be an
integer.</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_instruction">instruction</code></td>
<td>
<p>Equity instructions include 'BUY', 'SELL', 'BUY_TO_COVER',
or 'SELL_SHORT'. Options instructions include 'BUY_TO_OPEN',
'BUY_TO_CLOSE', 'SELL_TO_OPEN', or 'SELL_TO_CLOSE'</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_ordertype">orderType</code></td>
<td>
<p>MARKET, LIMIT (requiring limitPrice), STOP (requiring
stopPrice), STOP_LIMIT, TRAILING_STOP (requiring stopPriceBasis,
stopPriceType, stopPriceOffset)</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_limitprice">limitPrice</code></td>
<td>
<p>the limit price for a LIMIT or STOP_LIMIT order</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_stopprice">stopPrice</code></td>
<td>
<p>the stop price for a STOP or STOP_LIMIT order</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_assettype">assetType</code></td>
<td>
<p>EQUITY or OPTION. No other asset types are available at this
time. EQUITY is the default.</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_session">session</code></td>
<td>
<p>NORMAL for normal market hours, AM or PM for extended market
hours</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_duration">duration</code></td>
<td>
<p>how long will the trade stay open without a fill: DAY,
GOOD_UNTIL_CANCEL, FILL_OR_KILL</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_stoppricebasis">stopPriceBasis</code></td>
<td>
<p>LAST, BID, or ASK which is the basis for a STOP,
STOP_LIMIT, or TRAILING_STOP</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_stoppricetype">stopPriceType</code></td>
<td>
<p>the link to the stopPriceBasis. VALUE for dollar
difference or PERCENT for a percentage offset from the price basis</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_stoppriceoffset">stopPriceOffset</code></td>
<td>
<p>an integer that indicates the offset used for the
stopPriceType, 10 and PERCENT is a 10 percent offset from the current price
basis. 5 and VALUE is a 5 dollar offset from the current price basis</p>
</td></tr>
<tr><td><code id="td_placeOrder_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A valid account and access token must be passed. An access token will be
passed by default when <code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code> is executed
successfully and the token has not expired, which occurs after 30 minutes.
Only equities and options can be traded at this time. This function is built
to allow a single trade submission. More complex trades can be executed
through the API, but a custom function or submission will need to be
constructed. To build more custom trading strategies, reference the
<a href="https://developer.tdameritrade.com/account-access/apis">TD Ameritrade
API Instructions</a> or the
<a href="https://developer.tdameritrade.com/content/place-order-samples">order
sample guide</a>. A full list of the input parameters and details can be found
at the links above. Please note that in rare cases, the documentation may not
be accurate in the API section, so the Order Sample guide is a better
reference. TEST ALL ORDERS FIRST WITH SMALL DOLLAR AMOUNTS!!!
</p>
<p>Four parameters are required for submission: ticker, instruction, quantity,
and account number associated with the Access Token. The following parameters
default: session - NORMAL, duration - DAY, asset type - EQUITY, and order
type - MARKET
</p>


<h3>Value</h3>

<p>the trade id, account id, and other order details
</p>


<h3>Warning</h3>

<p>TRADES THAT ARE SUCCESSFULLY ENTERED WILL BE SUBMITTED
IMMEDIATELY THERE IS NO REVIEW PROCESS. THIS FUNCTION HAS HUNDREDS OF
POTENTIAL COMBINATIONS AND ONLY A HANDFUL HAVE BEEN TESTED. IT IS STRONGLY
RECOMMENDED TO TEST THE DESIRED ORDER ON A VERY SMALL QUANTITY WITH LITTLE
MONEY AT STAKE. ANOTHER OPTION IS TO USE LIMIT ORDERS FAR FROM THE CURRENT
PRICE. TD AMERITRADE HAS THEIR OWN ERROR HANDLING BUT IF A SUCCESSFUL
COMBINATION IS ENTERED IT COULD BE EXECUTED IMMEDIATELY. DOUBLE CHECK ALL
ENTRIES BEFORE SUBMITTING.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessToken = td_auth_accessToken(refreshToken, 'consumerKey')

# Set Account Number
accountNumber = 1234567890

# Standard market buy order
# Every order must have at least these 4 paramters
td_placeOrder(accountNumber = accountNumber,
            ticker = 'AAPL',
            quantity = 1,
            instruction = 'buy')

# Stop limit order - good until canceled
td_placeOrder(accountNumber = accountNumber,
            ticker = 'AAPL',
            quantity = 1,
            instruction = 'sell',
            duration = 'good_till_cancel',
            orderType = 'stop_limit',
            limitPrice = 98,
            stopPrice = 100)

# Trailing Stop Order
td_placeOrder(accountNumber = accountNumber,
            ticker='AAPL',
            quantity = 1,
            instruction='sell',
            orderType = 'trailing_stop',
            stopPriceBasis = 'BID',
            stopPriceType = 'percent',
            stopPriceOffset = 10)

# Option Order with a limit price
td_placeOrder(accountNumber = accountNumber,
            ticker = 'SLV_091820P24.5',
            quantity = 1,
            instruction = 'BUY_TO_OPEN',
            duration = 'Day',
            orderType = 'LIMIT',
            limitPrice = .02,
            assetType = 'OPTION')


## End(Not run)


</code></pre>

<hr>
<h2 id='td_priceHistory'>Get price history for a multiple securities</h2><span id='topic+td_priceHistory'></span>

<h3>Description</h3>

<p>Open, Close, High, Low, and Volume for one or more securities
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_priceHistory(
  tickers = c("AAPL", "MSFT"),
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  freq = c("daily", "1min", "5min", "10min", "15min", "30min"),
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_priceHistory_+3A_tickers">tickers</code></td>
<td>
<p>a vector of tickers - no more than 15 will be pulled. for
bigger requests, split up the request or use Tiingo, FMP Cloud, or other
free data providers</p>
</td></tr>
<tr><td><code id="td_priceHistory_+3A_startdate">startDate</code></td>
<td>
<p>the Starting point of the data</p>
</td></tr>
<tr><td><code id="td_priceHistory_+3A_enddate">endDate</code></td>
<td>
<p>the Ending point of the data</p>
</td></tr>
<tr><td><code id="td_priceHistory_+3A_freq">freq</code></td>
<td>
<p>the frequency of the interval. Can be daily, 1min, 5min, 10min,
15min, or 30min</p>
</td></tr>
<tr><td><code id="td_priceHistory_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pulls price history for a list of security based on the parameters that
include a date range and frequency of the interval. Depending on the
frequency interval, data can only be pulled back to a certain date. For
example, at a one minute interval, data can only be pulled for 30-35 days.
Prices are adjusted for splits but not dividends.
</p>
<p>PLEASE NOTE: Large data requests will take time to pull back because of the
looping nature. TD Does not allow bulk ticker request, so this is simply
running each ticker individually. For faster and better historical data
pulls, try Tiingo or FMP Cloud
</p>


<h3>Value</h3>

<p>a tibble of historical price data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Set the access token and a provide a vector of one or more tickers
refreshToken = readRDS('/secure/location/')
accessToken = td_auth_accessToken(refreshToken, 'consumerKey')
tickHist5min = td_priceHistory(c('TSLA','AAPL'), freq='5min')

# The default is daily. Access token is optional once it's been set
tickHistDay = td_priceHistory(c('SPY','IWM'), startDate = '1990-01-01')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_priceQuote'>Get Quotes for specified tickers in List form</h2><span id='topic+td_priceQuote'></span>

<h3>Description</h3>

<p>Enter tickers for real time or delayed quotes returned as a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_priceQuote(tickers = c("AAPL", "MSFT"), output = "df", accessToken = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_priceQuote_+3A_tickers">tickers</code></td>
<td>
<p>One or more tickers</p>
</td></tr>
<tr><td><code id="td_priceQuote_+3A_output">output</code></td>
<td>
<p>indication on whether the data should be returned as a list or
df. The default is 'df' for data frame, anything else would be a list.</p>
</td></tr>
<tr><td><code id="td_priceQuote_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Quotes may be delayed depending on agreement with TD Ameritrade. If the
account is set up for real-time quotes then this will return real-time.
Otherwise the quotes will be delayed.
</p>


<h3>Value</h3>

<p>a list or data frame with quote details for each valid ticker
submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Get stored refresh token
refreshToken = readRDS('/secure/location/')

# generate a new access token
accessToken = td_auth_accessToken('consumerKey', refreshToken)

# Pass one or more tickers as a vector
# accessToken is optional once it is set
quoteSPY = td_priceQuote('SPY')
quoteList = td_priceQuote(c('GOOG','TSLA'), output = 'list', accessToken)


## End(Not run)
</code></pre>

<hr>
<h2 id='td_symbolDetail'>Get ticker details</h2><span id='topic+td_symbolDetail'></span>

<h3>Description</h3>

<p>Get identifiers and fundamental data for a specific ticker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_symbolDetail(ticker, accessToken = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_symbolDetail_+3A_ticker">ticker</code></td>
<td>
<p>a valid ticker or symbol</p>
</td></tr>
<tr><td><code id="td_symbolDetail_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame of ticker details
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Details for Apple
td_symbolDetail('AAPL')


## End(Not run)
</code></pre>

<hr>
<h2 id='td_transactSearch'>Search for all Transaction types</h2><span id='topic+td_transactSearch'></span>

<h3>Description</h3>

<p>Can pull trades as well as transfers, dividend reinvestment, interest, etc.
Any activity associated with the account.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>td_transactSearch(
  accountNumber,
  startDate = Sys.Date() - 30,
  endDate = Sys.Date(),
  transType = "All",
  accessToken = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="td_transactSearch_+3A_accountnumber">accountNumber</code></td>
<td>
<p>The TD brokerage account number associated with the
Access Token</p>
</td></tr>
<tr><td><code id="td_transactSearch_+3A_startdate">startDate</code></td>
<td>
<p>Transactions after a certain date. Will not pull back
transactions older than 1 year. format yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="td_transactSearch_+3A_enddate">endDate</code></td>
<td>
<p>Filter transactions that occurred before a certain date.
format yyyy-mm-dd</p>
</td></tr>
<tr><td><code id="td_transactSearch_+3A_transtype">transType</code></td>
<td>
<p>Filter for a specific Transaction type. No entry will return
all types. For example: TRADE, CASH_IN_OR_CASH_OUT, CHECKING, DIVIDEND,
INTEREST, OTHER</p>
</td></tr>
<tr><td><code id="td_transactSearch_+3A_accesstoken">accessToken</code></td>
<td>
<p>A valid Access Token must be set using
<code><a href="#topic+td_auth_accessToken">td_auth_accessToken</a></code>. The most recent Access Token will be
used by default unless one is manually passed into the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a jsonlite data frame of transactions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# Access Token must be set using td_auth_accessToken
# Transactions for the last 5 days
td_transactSearch(accountNumber = 987654321, 
                startDate = Sys.Date()-days(5))


## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
