<!DOCTYPE html><html><head><title>Help for package tranSurv</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tranSurv}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#cKendall'><p>Conditional Kendall's tau</p></a></li>
<li><a href='#gof'><p>Goodness of fit based on left-truncated regression model</p></a></li>
<li><a href='#kendall'><p>Kendall's tau</p></a></li>
<li><a href='#plot.trSurvfit'><p>Plot the survival estimation based on the structural transformation model</p></a></li>
<li><a href='#pmcc'><p>Product-Moment Correlation Coefficient</p></a></li>
<li><a href='#Surv'><p>This is the <code>Surv</code> function imported from <code>survival</code></p></a></li>
<li><a href='#tranSurv-package'><p>tranSurv:Transformation Model Based Survival Curve Estimation with Dependent Left Truncation</p></a></li>
<li><a href='#trReg'><p>Fitting regression model via structural transformation model</p></a></li>
<li><a href='#trSurv.control'><p>Auxiliary for Controlling trSurvfit Fitting</p></a></li>
<li><a href='#trSurvfit'><p>Estimating survival curves via structural transformation model</p></a></li>
<li><a href='#wKendall'><p>Weighted conditional Kendall's tau</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Transformation Model Based Estimation of Survival and Regression
Under Dependent Truncation and Independent Censoring</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>Description:</td>
<td>A latent, quasi-independent truncation time is assumed to be linked with the observed dependent truncation time, the event time, and an unknown transformation parameter via a structural transformation model. The transformation parameter is chosen to minimize the conditional Kendall's tau (Martin and Betensky, 2005) &lt;<a href="https://doi.org/10.1198%2F016214504000001538">doi:10.1198/016214504000001538</a>&gt; or the regression coefficient estimates (Jones and Crowley, 1992) &lt;<a href="https://doi.org/10.2307%2F2336782">doi:10.2307/2336782</a>&gt;. The marginal distribution for the truncation time and the event time are completely left unspecified. The methodology is applied to survival curve estimation and regression analysis.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/stc04003/tranSurv">https://github.com/stc04003/tranSurv</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/stc04003/tranSurv/issues">https://github.com/stc04003/tranSurv/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>rootSolve, truncSP, survival, SQUAREM, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>MASS, boot</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-12 07:32:34 UTC; schiou</td>
</tr>
<tr>
<td>Author:</td>
<td>Sy Han (Steven) Chiou [aut, cre],
  Jing Qian [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sy Han (Steven) Chiou &lt;schiou@utdallas.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-12 09:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='cKendall'>Conditional Kendall's tau</h2><span id='topic+cKendall'></span>

<h3>Description</h3>

<p>Computes the conditional Kendall's tau and inference
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cKendall(
  trun,
  obs,
  delta = NULL,
  method = "MB",
  weights = NULL,
  a = 0,
  trans = "linear",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cKendall_+3A_trun">trun</code></td>
<td>
<p>left truncation time satisfying <code>trun</code> &lt;= <code>obs</code>.</p>
</td></tr>
<tr><td><code id="cKendall_+3A_obs">obs</code></td>
<td>
<p>observed failure time, must be the same length as <code>trun</code>, might be right-censored.</p>
</td></tr>
<tr><td><code id="cKendall_+3A_delta">delta</code></td>
<td>
<p>an optional 0-1 vector of censoring indicator (0 = censored, 1 = event) for <code>obs</code>.
If this vector is not specified, <code>cKendall</code> assumes no censoring and all observed failure time
denote events.</p>
</td></tr>
<tr><td><code id="cKendall_+3A_method">method</code></td>
<td>
<p>a character string specifying the different version of conditional Kendall's tau to be computed.
The following are permitted:
</p>

<dl>
<dt><code>MB</code></dt><dd><p>conditional Kendall's tau proposed in Martin and Betensky (2005) as <code class="reqn">\hat{\tau}_c,</code></p>
</dd>
<dt><code>IPW1</code></dt><dd><p>inverse probability weighted estimator proposed in Austin and Betensky (2014) as <code class="reqn">\hat{\tau}_{c2},</code></p>
</dd>
<dt><code>IPW2</code></dt><dd><p>restricted inverse probability weighted estimator proposed in Austin and Betensky (2014) as <code class="reqn">\hat{\tau}_{c3}.</code></p>
</dd>
</dl>
</td></tr>
<tr><td><code id="cKendall_+3A_weights">weights</code></td>
<td>
<p>an optional vector of sampling weights used when <code>method = IPW1</code> or <code>method = IPW2</code>.
Inverse probability censored weighting (IPCW) is the default.</p>
</td></tr>
<tr><td><code id="cKendall_+3A_a">a</code></td>
<td>
<p>a numeric transformation parameter. The default value is 0, which applies no transformation.
This parameter must be greater than <code>-1</code>.
See <code>?tranSurvfit</code> for the transformation model structure.</p>
</td></tr>
<tr><td><code id="cKendall_+3A_trans">trans</code></td>
<td>
<p>a character string specifying the transformation structure. The following are permitted:
</p>

<dl>
<dt>linear</dt><dd><p>linear transformation structure,</p>
</dd>
<dt>log</dt><dd><p>log-linear transformation structure,</p>
</dd>
<dt>exp</dt><dd><p>exponential transformation structure.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="cKendall_+3A_...">...</code></td>
<td>
<p>for future methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function performs statistical test for quasi-independence between truncation time and failure time.
The hypothesis test is based on the conditional Kendall's tau of Martin and Betensky (2005) and
the two versions of the inverse probability weighted Kendall's tau of Austin and Betensky (2014).
</p>
<p>The output contains the following components:
</p>

<dl>
<dt>PE</dt><dd><p>consistent point estimate of the conditional Kendall's tau.</p>
</dd>
<dt>SE</dt><dd><p>asymptotic standard error of the conditional Kendall's tau estimator.</p>
</dd>
<dt>STAT</dt><dd><p>the value of the normal test statistic.</p>
</dd>
<dt>p.value</dt><dd><p>the (Wald) p-value of the test.</p>
</dd>
<dt>trans</dt><dd><p>the transformation model (if applied).</p>
</dd>
<dt>a</dt><dd><p>the estimated transformation parameter.</p>
</dd>
</dl>



<h3>References</h3>

<p>Martin E. and Betensky R. A. (2005), Testing quasi-independence of failure and truncation times via conditional Kendall's tau,
<em>Journal of the American Statistical Association</em>, <b>100</b> (470): 484-492.
</p>
<p>Austin, M. D. and Betensky R. A. (2014), Eliminating bias due to censoring in Kendall's tau estimators for quasi-independence of truncation and failure,
<em>Computational Statistics &amp; Data Analysis</em>, <b>73</b>: 16-26.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+trSurvfit">trSurvfit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, sex == "Male" &amp; entry &lt; exit)
attach(chan)
cKendall(entry, exit, cens)
cKendall(entry, exit, cens, method = "IPW1")
cKendall(entry, exit, cens, method = "IPW2")
detach(chan)
</code></pre>

<hr>
<h2 id='gof'>Goodness of fit based on left-truncated regression model</h2><span id='topic+gof'></span>

<h3>Description</h3>

<p>Provide goodness-of-fit diagnostics for the transformation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gof(x, B = 200, P = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gof_+3A_x">x</code></td>
<td>
<p>an object of class <code>trSurvfit</code> returned by the <code>trSurvfit()</code> or the <code>trReg()</code> function or a survival object returned by the <code>Surv()</code>.</p>
</td></tr>
<tr><td><code id="gof_+3A_b">B</code></td>
<td>
<p>an integer value specifies the bootstrap size for the left-truncated regression model. A value greater than 2 is required.</p>
</td></tr>
<tr><td><code id="gof_+3A_p">P</code></td>
<td>
<p>an integer value specifies number of breakpoints to test the linearity of the transformation model.
When <code>P &gt; 0</code>, <code class="reqn">P</code> breakpoints divides the event times into <code class="reqn">P</code> equal spaced segments.
Piecewise linear function constructed from those segments of event times  are used in the left-truncated regression model,
and the overall significance testing if the coefficient estimates are equal is reported. 
Default value for <code>P</code> is 1. See <b>Details</b> for a description of the goodness of fit procedure.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The googness of fit assessment of the transformation model focus on the structure of the
transformation model, which has the form:
</p>
<p style="text-align: center;"><code class="reqn">h(U) = (1 + a)^{-1} \times (h(T) + ah(X)),</code>
</p>

<p>where <code class="reqn">T</code> is the truncation time, <code class="reqn">X</code> is the observed failure time,
<code class="reqn">U</code> is the transformed truncation time that is quasi-independent from <code class="reqn">X</code> and
<code class="reqn">h(\cdot)</code> is a monotonic transformation function.
With the condition, <code class="reqn">T &lt; X</code>, assumed to be satisfied,
the structure of the transformation model implies
</p>
<p style="text-align: center;"><code class="reqn">X - T = -(1 + a) E(U) + (1 + a) X - (1 + a) \times [U - E(U)] := \beta_0 + \beta_1X + \epsilon.</code>
</p>

<p>The regression estimates can be obtained by the left-truncated regression model (Karlsson and Lindmark, 2014).
To evaluate the goodness of fit of the transformation model,
the <code>gof()</code> function directly test the inearity in <code class="reqn">X</code> by considering larger model that are nonlinear in <code class="reqn">X</code>.
In particular, we expand the covariates <code class="reqn">X</code> to <code>P</code> piecewise linearity terms and test for equality of the associated coefficients.
</p>


<h3>Value</h3>

<p>A list containing the following elements
</p>

<dl>
<dt>coefficients</dt><dd><p>the regression coefficients of the left-truncated regression model.</p>
</dd>
<dt>pval</dt><dd><p>the p-value for the equality of the piecewise linearity terms in the expanded model. See <b>Details</b>.</p>
</dd>
</dl>



<h3>References</h3>

<p>Karlsson, M., Lindmark, A. (2014) truncSP: An R Package for Estimation of Semi-Parametric Truncated Linear Regression Models, <em>Journal of Statistical Software</em>, <b>57</b> (14), pp 1&ndash;19.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, entry &lt; exit)
fit &lt;- trReg(Surv(entry, exit, cens) ~ sex, data = chan)
gof(fit, B = 10)
</code></pre>

<hr>
<h2 id='kendall'>Kendall's tau</h2><span id='topic+kendall'></span>

<h3>Description</h3>

<p>Computes the unconditional Kendall's tau
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kendall(x, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kendall_+3A_x">x</code></td>
<td>
<p>a numeric vector.</p>
</td></tr>
<tr><td><code id="kendall_+3A_y">y</code></td>
<td>
<p>a numeric vector with compatible length to <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function computes the unconditional Kendall's tau (the Kendall rank correlation coefficient) for two variables.
The returned value is equivalent to that from <code>cor</code> with <code>method = "kendall"</code>, but <code>kendall</code> is
implemented in C.
</p>


<h3>Value</h3>

<p>The output is a numeric value for the unconditional Kendall's tau.
</p>


<h3>References</h3>

<p>Kendall, M. G. (1938), A new measure of rank correlation, <em>Biometrika</em>, 81&ndash;93.
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+cor">cor</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(MASS)
set.seed(1)
dat &lt;- mvrnorm(5000, c(0, 0), matrix(c(1, .5, .5, 1), 2))
## True kendall's tau is 2 * asin(.5) / pi
system.time(print(kendall(dat)))
system.time(print(cor(dat, method = "kendall")))
</code></pre>

<hr>
<h2 id='plot.trSurvfit'>Plot the survival estimation based on the structural transformation model</h2><span id='topic+plot.trSurvfit'></span>

<h3>Description</h3>

<p>Plot the survival estimation for an <code>trSurvfit</code>/<code>trReg</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'trSurvfit'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.trSurvfit_+3A_x">x</code></td>
<td>
<p>an object of class <code>trSurvfit</code> returned by the <code>trSurvfit()</code> or the <code>trReg()</code> function.</p>
</td></tr>
<tr><td><code id="plot.trSurvfit_+3A_...">...</code></td>
<td>
<p>graphical parameters to be passed to methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, entry &lt; exit)

plot(trReg(Surv(entry, exit, cens) ~ 1, data = chan))
</code></pre>

<hr>
<h2 id='pmcc'>Product-Moment Correlation Coefficient</h2><span id='topic+pmcc'></span>

<h3>Description</h3>

<p><code>pmcc</code> computes the conditional product-moment correlation coefficient proposed by Chen et al. (1996).
The conditional product-moment correlation coefficient uses only the uncensored events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pmcc(trun, obs, a = 0, trans = "linear")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pmcc_+3A_trun">trun</code></td>
<td>
<p>left truncation time satisfying <code>trun</code> &lt;= <code>obs</code>.</p>
</td></tr>
<tr><td><code id="pmcc_+3A_obs">obs</code></td>
<td>
<p>observed failure time, must be the same length as <code>trun</code>, might be right-censored.</p>
</td></tr>
<tr><td><code id="pmcc_+3A_a">a</code></td>
<td>
<p>a numeric transformation parameter. The default value is 0, which applies no transformation.
This parameter must be greater than <code>-1</code>.
See <code>?tranSurvfit</code> for the transformation model structure.</p>
</td></tr>
<tr><td><code id="pmcc_+3A_trans">trans</code></td>
<td>
<p>a character string specifying the transformation structure. The following are permitted:
</p>

<dl>
<dt>linear</dt><dd><p>linear transformation structure,</p>
</dd>
<dt>log</dt><dd><p>log-linear transformation structure,</p>
</dd>
<dt>exp</dt><dd><p>exponential transformation structure.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+trSurvfit">trSurvfit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, sex == "Male" &amp; entry &lt; exit &amp; cens == 1)
with(chan, pmcc(entry, exit)) ## cannot handle right censored data
</code></pre>

<hr>
<h2 id='Surv'>This is the <code>Surv</code> function imported from <code>survival</code></h2><span id='topic+Surv'></span><span id='topic+is.Surv'></span>

<h3>Description</h3>

<p>This function is imported from the <code>survival</code> package,
used to create survival objects to be fitted with <code>trReg()</code>
and <code>trSurvfit</code>. See <code><a href="survival.html#topic+Surv">Surv</a></code> for the
documentation on <code>Surv</code>.
</p>

<hr>
<h2 id='tranSurv-package'>tranSurv:Transformation Model Based Survival Curve Estimation with Dependent Left Truncation</h2><span id='topic+tranSurv'></span><span id='topic+tranSurv-package'></span>

<h3>Description</h3>

<p>A package that estimates survival curve under a dependent truncation and independent right censoring via a structural transformation method.
The package also includes hypothesis test of quasi-independence based on the conditional Kendall's tau of Martin and Betensky (2005) and
two versions of the inverse probability weighted Kendall's tau of Austin and Betensky (2014).
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Sy Han (Steven) Chiou <a href="mailto:schiou@utdallas.edu">schiou@utdallas.edu</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Jing Qian <a href="mailto:qian@schoolph.umass.edu">qian@schoolph.umass.edu</a>
</p>
</li></ul>



<h3>References</h3>

<p>Martin E. and Betensky R. A. (2005), Testing quasi-independence of failure and truncation times via conditional Kendall's tau,
<em>Journal of the American Statistical Association</em>, <b>100</b> (470): 484-492.
</p>
<p>Austin, M. D. and Betensky R. A. (2014), Eliminating bias due to censoring in Kendall's tau estimators for quasi-independence of truncation and failure,
<em>Computational Statistics &amp; Data Analysis</em>, <b>73</b>: 16-26.
</p>
<p>Chiou, S., Austin, M., Qian, J. and Betensky R. A. (2016), Transformation model estimation of survival under dependent truncation and independent censoring,
<em>Statistical Methods in Medical Research</em>, <b>28</b> (12): 3785-3798.
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/stc04003/tranSurv">https://github.com/stc04003/tranSurv</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/stc04003/tranSurv/issues">https://github.com/stc04003/tranSurv/issues</a>
</p>
</li></ul>


<hr>
<h2 id='trReg'>Fitting regression model via structural transformation model</h2><span id='topic+trReg'></span>

<h3>Description</h3>

<p><code>trReg</code> fits transformation model under dependent truncation and independent censoring via a structural transformation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trReg(
  formula,
  data,
  subset,
  tFun = "linear",
  method = c("kendall", "adjust"),
  B = 0,
  control = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trReg_+3A_formula">formula</code></td>
<td>
<p>a formula expression, of the form <code>response ~ predictors</code>.
The <code>response</code> is assumed to be a <code>survival::Surv</code> object with both left truncation and right censoring.
When there is no covariates, e.g., when the right hand side of the formula is <code>~ 1</code>, the <code>trReg()</code> function returns a <code>trSurvfit</code> object.
See <code>?survival::Surv</code> for more details.</p>
</td></tr>
<tr><td><code id="trReg_+3A_data">data</code></td>
<td>
<p>an optional data frame in which to interpret the variables occurring
in the <code>formula</code>.</p>
</td></tr>
<tr><td><code id="trReg_+3A_subset">subset</code></td>
<td>
<p>an optional vector specifying a subset of observations to be used in the fitting process.</p>
</td></tr>
<tr><td><code id="trReg_+3A_tfun">tFun</code></td>
<td>
<p>a character string specifying the transformation function or a user specified function indicating the relationship between <code class="reqn">X</code>, <code class="reqn">T</code>, and <code class="reqn">a</code>.
When <code>tFun</code> is a character, the following are permitted:
</p>

<dl>
<dt>linear</dt><dd><p>linear transformation structure,</p>
</dd>
<dt>log</dt><dd><p>log-linear transformation structure,</p>
</dd>
<dt>exp</dt><dd><p>exponential transformation structure.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="trReg_+3A_method">method</code></td>
<td>
<p>a character string specifying how the transformation parameter is estimated. The available options are <code>"kendall"</code> and <code>"adjust"</code>. See <b>Details</b>.</p>
</td></tr>
<tr><td><code id="trReg_+3A_b">B</code></td>
<td>
<p>a numerical value specifies the bootstrap size for estimating the standard error.
When <code>B = 0</code> (default), the bootstrap standard errors will not be computed.</p>
</td></tr>
<tr><td><code id="trReg_+3A_control">control</code></td>
<td>
<p>a list of control parameters. The following arguments are allowed:
</p>

<dl>
<dt><code>lower</code></dt><dd><p>The lower bound to search for the transformation parameter; default at -1.</p>
</dd>
<dt><code>upper</code></dt><dd><p>The upper bound to search for the transformation parameter; default at 20.</p>
</dd>
<dt><code>tol</code></dt><dd><p>The tolerance used in the search for the transformation parameter; default at 0.01.</p>
</dd>
<dt><code>G</code></dt><dd><p>The number of grids used in the search for the transformation parameter; default is 50.
A smaller <code>G</code> could results in faster search, but might be inaccurate.</p>
</dd>
<dt><code>Q</code></dt><dd><p>The number of cutpoints for the truncation time used when <code>method = "adjust"</code>. The default is 0.</p>
</dd>
<dt><code>P</code></dt><dd><p>The number of breakpoints to divide the event times into equally spaced segmenets.
When <code>P &gt; 1</code>, the latent truncation time, <code class="reqn">T'(a)</code> will be computed in each subset.
The transformation model is then applied to the aggregated data.</p>
</dd> 
<dt><code>a</code></dt><dd><p>The transformation parameter. When this is specified, the transformation model is applied based on the specified <code>a</code>.
When this is not specified, an optimized <code>a</code> will be determined by optimization one of the quasi-independence measure. See <b>Details</b>.</p>
</dd>
<dt><code>parallel</code></dt><dd><p>an logical value indicating whether parallel computation will be applied when <code>B &gt; 0</code>.</p>
</dd>
<dt><code>parCl</code></dt><dd><p>an integer value specifying the number of CPU cores to be used when <code>parallel = TRUE</code>.
The default value is half the CPU cores on the current host.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Details</h3>

<p>The main assumption on the structural transformation model is that it assumes there is a latent, quasi-independent truncation time
that is associated with the observed dependent truncation time, the event time, and an unknown dependence parameter
through a specified funciton.
The structure of the transformation model is of the form:
</p>
<p style="text-align: center;"><code class="reqn">h(U) = (1 + a)^{-1} \times (h(T) + ah(X)),</code>
</p>
<p> where <code class="reqn">T</code> is the truncation time, <code class="reqn">X</code> is the observed failure time,
<code class="reqn">U</code> is the transformed truncation time that is quasi-independent from <code class="reqn">X</code> and <code class="reqn">h(\cdot)</code> is a monotonic transformation function.
The condition, <code class="reqn">T &lt; X</code>, is assumed to be satisfied.
The quasi-independent truncation time, <code class="reqn">U</code>, is obtained by inverting the test for quasi-independence by one of the following methods:
</p>

<dl>
<dt><code>method = "kendall"</code></dt><dd><p> by minimizing the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding <code class="reqn">p</code>-value.
This is the same procedure used in the <code>trSUrvfit()</code> function.</p>
</dd>
<dt><code>method = "adjust"</code></dt><dd><p> includes a function of latent truncation time, <code class="reqn">U</code>, as a covariate.
A piece-wise function is constructed based on (<code class="reqn">Q + 1</code>) indicator functions on whether <code class="reqn">U</code> falls in the <code class="reqn">Q</code>th and the (<code class="reqn">Q+1</code>)th percentile,
where <code class="reqn">Q</code> is the number of cutpoints used. See <code>control</code> for details. 
The transformation parameter, <code class="reqn">a</code>, is then chosen to minimize the significance of the coefficient parameter.</p>
</dd></dl>



<h3>See Also</h3>

<p><code><a href="#topic+trSurvfit">trSurvfit</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, entry &lt; exit)
trReg(Surv(entry, exit, cens) ~ sex, data = chan)

</code></pre>

<hr>
<h2 id='trSurv.control'>Auxiliary for Controlling trSurvfit Fitting</h2><span id='topic+trSurv.control'></span>

<h3>Description</h3>

<p>Auxiliary function as user interface for <code>trSurvfit</code> fitting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trSurv.control(
  interval = c(-1, 20),
  lower = min(interval),
  upper = max(interval)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trSurv.control_+3A_interval">interval</code></td>
<td>
<p>a vector containing the end-points of the interval to be searched the transformation parameter.</p>
</td></tr>
<tr><td><code id="trSurv.control_+3A_lower">lower</code></td>
<td>
<p>the lower end-point of the interval to be searched.</p>
</td></tr>
<tr><td><code id="trSurv.control_+3A_upper">upper</code></td>
<td>
<p>the upper end-point of the interval to be searched.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+trSurvfit">trSurvfit</a></code>
</p>

<hr>
<h2 id='trSurvfit'>Estimating survival curves via structural transformation model</h2><span id='topic+trSurvfit'></span>

<h3>Description</h3>

<p><code>trSurvfit</code> estimates survival curves under dependent truncation and independent censoring via a structural transformation model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>trSurvfit(
  trun,
  obs,
  delta = NULL,
  tFun = "linear",
  plots = FALSE,
  control = trSurv.control(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="trSurvfit_+3A_trun">trun</code></td>
<td>
<p>left truncation time satisfying <code>trun</code> &lt;= <code>obs</code>.</p>
</td></tr>
<tr><td><code id="trSurvfit_+3A_obs">obs</code></td>
<td>
<p>observed failure time, must be the same length as <code>trun</code>, might be right-censored.</p>
</td></tr>
<tr><td><code id="trSurvfit_+3A_delta">delta</code></td>
<td>
<p>an optional 0-1 vector of censoring indicator (0 = censored, 1 = event) for <code>obs</code>.
If this vector is not specified, <code>cKendall</code> assumes no censoring and all observed failure time
denote events.</p>
</td></tr>
<tr><td><code id="trSurvfit_+3A_tfun">tFun</code></td>
<td>
<p>a character string specifying the transformation function or a user specified function indicating the relationship
between <code class="reqn">X</code>, <code class="reqn">T</code>, and <code class="reqn">a</code>.
When <code>tFun</code> is a character, the following are permitted:
</p>

<dl>
<dt>linear</dt><dd><p>linear transformation structure;</p>
</dd>
<dt>log</dt><dd><p>log-linear transformation structure;</p>
</dd>
<dt>exp</dt><dd><p>exponential transformation structure.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="trSurvfit_+3A_plots">plots</code></td>
<td>
<p>an optional logical value; if TRUE, a series of diagnostic plots as well as the survival curve for the observed failure time will be plotted.</p>
</td></tr>
<tr><td><code id="trSurvfit_+3A_control">control</code></td>
<td>
<p>controls the lower and upper bounds when <code>trans</code> is an user specified function.</p>
</td></tr>
<tr><td><code id="trSurvfit_+3A_...">...</code></td>
<td>
<p>for future methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A structural transformation model assumes there is a latent, quasi-independent truncation time
that is associated with the observed dependent truncation time, the event time, and an unknown dependence parameter
through a specified funciton.
The dependence parameter is chosen to either minimize the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding <code class="reqn">p</code>-value.
The marginal distribution for the truncation time and the event time are completely left unspecified.
</p>
<p>The structure of the transformation model is of the form:
</p>
<p style="text-align: center;"><code class="reqn">h(U) = (1 + a)^{-1} \times (h(T) + ah(X)),</code>
</p>
<p> where <code class="reqn">T</code> is the truncation time, <code class="reqn">X</code> is the observed failure time,
<code class="reqn">U</code> is the transformed truncation time that is quasi-independent from <code class="reqn">X</code> and <code class="reqn">h(\cdot)</code> is a monotonic transformation function.
The condition, <code class="reqn">T &lt; X</code>, is assumed to be satisfied.
The quasi-independent truncation time, <code class="reqn">U</code>, is obtained by inverting the test for quasi-independence by either minimizing
the absolute value of the restricted inverse probability weighted Kendall's tau or maximize the corresponding <code class="reqn">p</code>-value.
</p>
<p>At the current version, three transformation structures can be specified. <code>trans = "linear"</code> corresponds to </p>
<p style="text-align: center;"><code class="reqn">h(X) = 1;</code>
</p>

<p><code>trans = "log"</code> corresponds to </p>
<p style="text-align: center;"><code class="reqn">h(X) = log(X);</code>
</p>

<p><code>trans = "exp"</code> corresponds to </p>
<p style="text-align: center;"><code class="reqn">h(X) = exp(X).</code>
</p>



<h3>Value</h3>

<p>The output contains the following components:
</p>

<dl>
<dt><code>surv</code></dt><dd><p>is a <code>data.frame</code> contains the survival probabilities estimates.</p>
</dd>
<dt><code>byTau</code></dt><dd><p>a list contains the estimator of transformation parameter:
</p>

<dl>
<dt><code>par</code></dt><dd><p>is the best set of transformation parameter found;</p>
</dd>
<dt><code>obj</code></dt><dd><p>is the value of the inverse probability weighted Kendall's tau corresponding to 'par'.</p>
</dd></dl>

</dd>
<dt><code>byP</code></dt><dd><p>a list contains the estimator of transformation parameter:
</p>

<dl>
<dt><code>par</code></dt><dd><p>is the best set of transformation parameter found;</p>
</dd>
<dt><code>obj</code></dt><dd><p>is the value of the inverse probability weighted Kendall's tau corresponding to 'par'.</p>
</dd></dl>

</dd>
<dt><code>qind</code></dt><dd><p>a data frame consists of two quasi-independent variables:
</p>

<dl>
<dt><code>trun</code></dt><dd><p> is the transformed truncation time;</p>
</dd>
<dt><code>obs</code></dt><dd><p> is the corresponding uncensored failure time.</p>
</dd></dl>
</dd>
</dl>



<h3>References</h3>

<p>Martin E. and Betensky R. A. (2005), Testing quasi-independence of failure and truncation times via conditional Kendall's tau,
<em>Journal of the American Statistical Association</em>, <b>100</b> (470): 484-492.
</p>
<p>Austin, M. D. and Betensky R. A. (2014), Eliminating bias due to censoring in Kendall's tau estimators for quasi-independence of truncation and failure,
<em>Computational Statistics &amp; Data Analysis</em>, <b>73</b>: 16-26.
</p>
<p>Chiou, S., Austin, M., Qian, J. and Betensky R. A. (2018), Transformation model estimation of survival under dependent truncation and independent censoring,
<em>Statistical Methods in Medical Research</em>, <b>28</b> (12): 3785-3798.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, sex == "Male" &amp; entry &lt; exit)

## No display
(fit &lt;- with(chan, trSurvfit(entry, exit, cens)))

## With diagnostic plots and the survival estimate
with(chan, trSurvfit(entry, exit, cens, plots = TRUE))

## Plots survival estimate

plot(fit)
</code></pre>

<hr>
<h2 id='wKendall'>Weighted conditional Kendall's tau</h2><span id='topic+wKendall'></span>

<h3>Description</h3>

<p>This is function computes the perturbed version of the conditional Kendall's tau.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wKendall(trun, obs, delta = NULL, weights = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wKendall_+3A_trun">trun</code></td>
<td>
<p>left truncation time satisfying <code>trun</code> &lt;= <code>obs</code>.</p>
</td></tr>
<tr><td><code id="wKendall_+3A_obs">obs</code></td>
<td>
<p>observed failure time, must be the same length as <code>trun</code>, might be right-censored.</p>
</td></tr>
<tr><td><code id="wKendall_+3A_delta">delta</code></td>
<td>
<p>an optional 0-1 vector of censoring indicator (0 = censored, 1 = event) for <code>obs</code>.
If this vector is not specified, <code>cKendall</code> assumes no censoring and all observed failure time
denote events.</p>
</td></tr>
<tr><td><code id="wKendall_+3A_weights">weights</code></td>
<td>
<p>an optional perturbation weights.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(channing, package = "boot")
chan &lt;- subset(channing, sex == "Male" &amp; entry &lt; exit)
## When weights is not specified, this function reduces to condKendall()
with(chan, wKendall(entry, exit, cens))
mean(replicate(1000, with(chan, wKendall(entry, exit, cens, rexp(nrow(chan))))))
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
