<!DOCTYPE html><html lang="en-US"><head><title>Help for package teal.data</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {teal.data}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#teal.data-package'><p><code>teal.data</code>: Reproducible data model for <code>teal</code> applications</p></a></li>
<li><a href='#all.equal.join_keys'><p>Test if two objects are (nearly) equal</p></a></li>
<li><a href='#assert_compatible_keys'><p>Check Compatibility of keys</p></a></li>
<li><a href='#assert_compatible_keys2'><p>Verify key set compatibility</p></a></li>
<li><a href='#assert_parent_child'><p>Validate parent-child key</p></a></li>
<li><a href='#cdisc_data'><p>Data input for <code>teal</code> app</p></a></li>
<li><a href='#col_labels'><p>Variable labels</p></a></li>
<li><a href='#datanames'><p>Names of data sets in <code>teal_data</code> object</p></a></li>
<li><a href='#default_cdisc_join_keys'><p>List containing default joining keys for <code>CDISC</code> datasets</p></a></li>
<li><a href='#example_cdisc_data'><p>Generate sample CDISC datasets</p></a></li>
<li><a href='#get_code+2Cteal_data-method'><p>Get code from <code>teal_data</code> object</p></a></li>
<li><a href='#is_dag'><p>Checks whether a graph is a <code style="white-space: pre;">&#8288;Directed Acyclic Graph (DAG)&#8288;</code></p></a></li>
<li><a href='#join_key'><p>Create a relationship between a pair of datasets</p></a></li>
<li><a href='#join_keys'><p>Manage relationships between datasets using <code>join_keys</code></p></a></li>
<li><a href='#names.teal_data'><p>Names of data sets in <code>teal_data</code> object</p></a></li>
<li><a href='#names+26lt+3B-.join_keys'><p>The names of a <code>join_keys</code> object</p></a></li>
<li><a href='#new_join_keys'><p>Internal constructor</p></a></li>
<li><a href='#parents'><p>Get and set parents in <code>join_keys</code> object</p></a></li>
<li><a href='#rADAE'><p>Random adverse events</p></a></li>
<li><a href='#rADCM'><p>Random concomitant medications</p></a></li>
<li><a href='#rADEX'><p>Random response</p></a></li>
<li><a href='#rADLB'><p>Random lab analysis</p></a></li>
<li><a href='#rADRS'><p>Random response</p></a></li>
<li><a href='#rADSL'><p>Random patient listing</p></a></li>
<li><a href='#rADTR'><p>Random data <code>rADTR</code></p></a></li>
<li><a href='#rADTTE'><p>Random time to event analysis dataset</p></a></li>
<li><a href='#rADVS'><p>Random data <code>rADVS</code></p></a></li>
<li><a href='#show+2Cteal_data-method'><p>Show <code>teal_data</code> object</p></a></li>
<li><a href='#teal_data'><p>Comprehensive data integration function for <code>teal</code> applications</p></a></li>
<li><a href='#teal_data-class'><p>Reproducible data</p></a></li>
<li><a href='#topological_sort'><p>Topological graph sort</p></a></li>
<li><a href='#update_keys_given_parents'><p>Updates the keys of the datasets based on the parents</p></a></li>
<li><a href='#verify'><p>Verify code reproducibility</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Data Model for 'teal' Applications</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-01-27</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides a 'teal_data' class as a unified data model for
    'teal' applications focusing on reproducibility and relational data.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://insightsengineering.github.io/teal.data/">https://insightsengineering.github.io/teal.data/</a>,
<a href="https://github.com/insightsengineering/teal.data/">https://github.com/insightsengineering/teal.data/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insightsengineering/teal.data/issues">https://github.com/insightsengineering/teal.data/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0), teal.code (&ge; 0.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate (&ge; 2.1.0), lifecycle (&ge; 0.2.0), methods, rlang (&ge;
1.1.0), stats, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.42), rmarkdown (&ge; 2.23), testthat (&ge; 3.2.2),
withr (&ge; 2.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>lifecycle</td>
</tr>
<tr>
<td>Config/Needs/verdepcheck:</td>
<td>insightsengineering/teal.code,
mllg/checkmate, r-lib/lifecycle, r-lib/rlang, yihui/knitr,
rstudio/rmarkdown, r-lib/testthat, r-lib/withr</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>insightsengineering/nesttemplate</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Collate:</td>
<td>'cdisc_data.R' 'data.R' 'formatters_var_labels.R'
'deprecated.R' 'dummy_function.R' 'join_key.R' 'join_keys-c.R'
'join_keys-extract.R' 'join_keys-names.R' 'join_keys-parents.R'
'join_keys-print.R' 'join_keys-utils.R' 'join_keys.R'
'teal.data.R' 'teal_data-class.R' 'teal_data-constructor.R'
'teal_data-extract.R' 'teal_data-get_code.R'
'teal_data-names.R' 'teal_data-show.R' 'testhat-helpers.R'
'topological_sort.R' 'verify.R' 'zzz.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-01-28 19:20:02 UTC; unardid</td>
</tr>
<tr>
<td>Author:</td>
<td>Dawid Kaledkowski <a href="https://orcid.org/0000-0001-9533-457X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Aleksander Chlebowski
    <a href="https://orcid.org/0000-0001-5018-6294"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Marcin Kosinski [aut],
  Andre Verissimo <a href="https://orcid.org/0000-0002-2212-339X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Pawel Rucki [aut],
  Mahmoud Hallal [aut],
  Nikolas Burkoff [aut],
  Maciej Nasinski [aut],
  Konrad Pagacz [aut],
  Junlue Zhao [aut],
  Chendi Liao [rev],
  Dony Unardi [rev],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Dawid Kaledkowski &lt;dawid.kaledkowski@roche.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-01-28 20:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='teal.data-package'><code>teal.data</code>: Reproducible data model for <code>teal</code> applications</h2><span id='topic+teal.data'></span><span id='topic+teal.data-package'></span>

<h3>Description</h3>

<p>This package extends <code>teal</code> applications by module which
stores the data with they relationships (keys) and reproducible
code. Package offers also to load data from files, databases and
it's easily extendable by another data sources.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Dawid Kaledkowski <a href="mailto:dawid.kaledkowski@roche.com">dawid.kaledkowski@roche.com</a> (<a href="https://orcid.org/0000-0001-9533-457X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Aleksander Chlebowski <a href="mailto:aleksander.chlebowski@contractors.roche.com">aleksander.chlebowski@contractors.roche.com</a> (<a href="https://orcid.org/0000-0001-5018-6294">ORCID</a>)
</p>
</li>
<li><p> Marcin Kosinski <a href="mailto:marcin.kosinski.mk1@roche.com">marcin.kosinski.mk1@roche.com</a>
</p>
</li>
<li><p> Andre Verissimo <a href="mailto:andre.verissimo@roche.com">andre.verissimo@roche.com</a> (<a href="https://orcid.org/0000-0002-2212-339X">ORCID</a>)
</p>
</li>
<li><p> Pawel Rucki <a href="mailto:pawel.rucki@roche.com">pawel.rucki@roche.com</a>
</p>
</li>
<li><p> Mahmoud Hallal <a href="mailto:mahmoud.hallal@roche.com">mahmoud.hallal@roche.com</a>
</p>
</li>
<li><p> Nikolas Burkoff
</p>
</li>
<li><p> Maciej Nasinski
</p>
</li>
<li><p> Konrad Pagacz
</p>
</li>
<li><p> Junlue Zhao
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Chendi Liao <a href="mailto:chendi.liao@roche.com">chendi.liao@roche.com</a> [reviewer]
</p>
</li>
<li><p> Dony Unardi <a href="mailto:unardid@gene.com">unardid@gene.com</a> [reviewer]
</p>
</li>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://insightsengineering.github.io/teal.data/">https://insightsengineering.github.io/teal.data/</a>
</p>
</li>
<li> <p><a href="https://github.com/insightsengineering/teal.data/">https://github.com/insightsengineering/teal.data/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/insightsengineering/teal.data/issues">https://github.com/insightsengineering/teal.data/issues</a>
</p>
</li></ul>


<hr>
<h2 id='all.equal.join_keys'>Test if two objects are (nearly) equal</h2><span id='topic+all.equal.join_keys'></span>

<h3>Description</h3>

<p><code>all.equal(target, current)</code> is a utility to compare <code>join_keys</code> objects target
and current testing <code style="white-space: pre;">&#8288;near equality&#8288;</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'equal.join_keys'
all(target, current, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="all.equal.join_keys_+3A_target">target</code></td>
<td>
<p><span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="all.equal.join_keys_+3A_current">current</code></td>
<td>
<p>other <span class="rlang"><b>R</b></span> object, to be compared with <code>target</code>.</p>
</td></tr>
<tr><td><code id="all.equal.join_keys_+3A_...">...</code></td>
<td>
<p>further arguments for different methods. Not used with <code>join_keys</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If they are different, comparison is still made to some extent, and a report
of the differences is returned.
Do not use <code>all.equal</code> directly in if expressions—either use <code>isTRUE(all.equal(....))</code>
or identical if appropriate.
</p>
<p>The parents attribute comparison tolerates <code>NULL</code> and empty lists and will find
no difference.
</p>
<p>The list containing all the relationships is treated like a map and ignores
entries with <code>NULL</code> if they exist.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+all.equal">base::all.equal()</a></code>
</p>

<hr>
<h2 id='assert_compatible_keys'>Check Compatibility of keys</h2><span id='topic+assert_compatible_keys'></span>

<h3>Description</h3>

<p>Helper function to assert if two key sets contain incompatible keys.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_compatible_keys(join_key_1, join_key_2)
</code></pre>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if successful, otherwise raises error.
</p>

<hr>
<h2 id='assert_compatible_keys2'>Verify key set compatibility</h2><span id='topic+assert_compatible_keys2'></span>

<h3>Description</h3>

<p>Helper function to ensuring compatibility between two sets of keys
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_compatible_keys2(x, y)
</code></pre>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if successful, otherwise raises error.
</p>

<hr>
<h2 id='assert_parent_child'>Validate parent-child key</h2><span id='topic+assert_parent_child'></span>

<h3>Description</h3>

<p>Helper function checks the parent-child relations are valid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_parent_child(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="assert_parent_child_+3A_x">x</code></td>
<td>
<p>(<code>join_keys</code>) object to assert validity of relations</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>join_keys</code> invisibly
</p>

<hr>
<h2 id='cdisc_data'>Data input for <code>teal</code> app</h2><span id='topic+cdisc_data'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Function is a wrapper around <code><a href="#topic+teal_data">teal_data()</a></code> and guesses <code>join_keys</code>
for given datasets whose names match ADAM datasets names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cdisc_data(
  ...,
  join_keys = teal.data::default_cdisc_join_keys[names(rlang::list2(...))],
  code = character(0)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cdisc_data_+3A_...">...</code></td>
<td>
<p>any number of objects (presumably data objects) provided as <code>name = value</code> pairs.</p>
</td></tr>
<tr><td><code id="cdisc_data_+3A_join_keys">join_keys</code></td>
<td>
<p>(<code>join_keys</code> or single <code>join_key_set</code>)
optional object with datasets column names used for joining.
If empty then it would be automatically derived basing on intersection of datasets primary keys.
For ADAM datasets it would be automatically derived.</p>
</td></tr>
<tr><td><code id="cdisc_data_+3A_code">code</code></td>
<td>
<p>(<code>character</code>, <code>language</code>) optional code to reproduce the datasets provided in <code>...</code>.
Note this code is not executed and the <code>teal_data</code> may not be reproducible
</p>
<p>Use <code><a href="#topic+verify">verify()</a></code> to verify code reproducibility.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function checks if there were keys added to all data sets.
</p>


<h3>Value</h3>

<p>A <code>teal_data</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- cdisc_data(
  join_keys = join_keys(
    join_key("ADSL", "ADTTE", c("STUDYID" = "STUDYID", "USUBJID" = "USUBJID"))
  )
)

data &lt;- within(data, {
  ADSL &lt;- example_cdisc_data("ADSL")
  ADTTE &lt;- example_cdisc_data("ADTTE")
})

</code></pre>

<hr>
<h2 id='col_labels'>Variable labels</h2><span id='topic+col_labels'></span><span id='topic+col_labels+3C-'></span><span id='topic+col_relabel'></span>

<h3>Description</h3>

<p>Get or set variable labels in a <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_labels(x, fill = FALSE)

col_labels(x) &lt;- value

col_relabel(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="col_labels_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code> or <code>DataFrame</code>) data object</p>
</td></tr>
<tr><td><code id="col_labels_+3A_fill">fill</code></td>
<td>
<p>(<code>logical(1)</code>) specifying what to return if variable has no label</p>
</td></tr>
<tr><td><code id="col_labels_+3A_value">value</code></td>
<td>
<p>(<code>character</code>) vector of variable labels of length equal to number of columns in <code>x</code>;
if named, names must match variable names in <code>x</code> and will be used as key to set labels;
use <code>NA</code> to remove label from variable</p>
</td></tr>
<tr><td><code id="col_labels_+3A_...">...</code></td>
<td>
<p>name-value pairs, where name corresponds to a variable name in <code>x</code>
and value is the new variable label; use <code>NA</code> to remove label from variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Variable labels can be stored as a <code>label</code> attribute set on individual variables.
These functions get or set this attribute, either on all (<code>col_labels</code>) or some variables (<code>col_relabel</code>).
</p>


<h3>Value</h3>

<p>For <code>col_labels</code>, named character vector of variable labels, the names being the corresponding variable names.
If the <code>label</code> attribute is missing, the vector elements will be
the variable names themselves if <code>fill = TRUE</code> and <code>NA</code> if <code>fill = FALSE</code>.
</p>
<p>For <code style="white-space: pre;">&#8288;col_labels&lt;-&#8288;</code> and <code>col_relabel</code>, copy of <code>x</code> with variable labels modified.
</p>


<h3>Source</h3>

<p>These functions were taken from
<a href="https://cran.r-project.org/package=formatters">formatters</a> package, to reduce the complexity of
the dependency tree and rewritten.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- iris
col_labels(x)
col_labels(x) &lt;- paste("label for", names(iris))
col_labels(x)
y &lt;- col_relabel(x, Sepal.Length = "Sepal Length of iris flower")
col_labels(y)

</code></pre>

<hr>
<h2 id='datanames'>Names of data sets in <code>teal_data</code> object</h2><span id='topic+datanames'></span><span id='topic++60datanames+3C-.teal_data+60'></span><span id='topic+datanames+3C-'></span><span id='topic+names+3C-.teal_data'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a>
</p>
<p>Use <code>names()</code> instead of <code>datanames()</code>.
</p>
<p><code>datanames()</code> is deprecated. If object should be hidden, then use a <code>.</code> (dot)
prefix for the object's name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datanames(x)

datanames(x) &lt;- value

## S3 replacement method for class 'teal_data'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="datanames_+3A_x">x</code></td>
<td>
<p>(<code>teal_data</code> or <code>qenv_error</code>) object to access or modify</p>
</td></tr>
<tr><td><code id="datanames_+3A_value">value</code></td>
<td>
<p>(<code>character</code>) new value for <code style="white-space: pre;">&#8288;@datanames&#8288;</code>; all elements must be names of variables existing in <code style="white-space: pre;">&#8288;@.xData&#8288;</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The contents of <code style="white-space: pre;">&#8288;@datanames&#8288;</code> or <code>teal_data</code> object with updated <code style="white-space: pre;">&#8288;@datanames&#8288;</code>.
</p>

<hr>
<h2 id='default_cdisc_join_keys'>List containing default joining keys for <code>CDISC</code> datasets</h2><span id='topic+default_cdisc_join_keys'></span>

<h3>Description</h3>

<p>This data object is created at loading time from <code>cdisc_datasets/cdisc_datasets.yaml</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_cdisc_join_keys
</code></pre>


<h3>Format</h3>

<p>An object of class <code>join_keys</code> (inherits from <code>list</code>) of length 19.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='example_cdisc_data'>Generate sample CDISC datasets</h2><span id='topic+example_cdisc_data'></span>

<h3>Description</h3>

<p>Retrieves example CDISC datasets for use in examples and testing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_cdisc_data(
  dataname = c("ADSL", "ADAE", "ADLB", "ADCM", "ADEX", "ADRS", "ADTR", "ADTTE", "ADVS")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="example_cdisc_data_+3A_dataname">dataname</code></td>
<td>
<p>(<code>character(1)</code>) name of a CDISC dataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function returns a dummy dataset and should only be used within <code>teal.data</code>.
Note that the datasets are not created and maintained in <code>teal.data</code>, they are retrieved its dependencies.
</p>


<h3>Value</h3>

<p>A CDISC dataset as a <code>data.frame</code>.
</p>

<hr>
<h2 id='get_code+2Cteal_data-method'>Get code from <code>teal_data</code> object</h2><span id='topic+get_code+2Cteal_data-method'></span>

<h3>Description</h3>

<p>Retrieve code from <code>teal_data</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'teal_data'
get_code(
  object,
  deparse = TRUE,
  names = NULL,
  datanames = lifecycle::deprecated(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_code+2B2Cteal_data-method_+3A_object">object</code></td>
<td>
<p>(<code>teal_data</code>)</p>
</td></tr>
<tr><td><code id="get_code+2B2Cteal_data-method_+3A_deparse">deparse</code></td>
<td>
<p>(<code>logical</code>) flag specifying whether to return code as <code>character</code> (<code>deparse = TRUE</code>) or as
<code>expression</code> (<code>deparse = FALSE</code>).</p>
</td></tr>
<tr><td><code id="get_code+2B2Cteal_data-method_+3A_names">names</code></td>
<td>
<p>(<code>character</code>) Successor of <code>datanames</code>. Vector of dataset names to return the code for.
For more details see the &quot;Extracting dataset-specific code&quot; section.</p>
</td></tr>
<tr><td><code id="get_code+2B2Cteal_data-method_+3A_datanames">datanames</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> (<code>character</code>) vector of dataset names to return the code for.
For more details see the &quot;Extracting dataset-specific code&quot; section. Use <code>names</code> instead.</p>
</td></tr>
<tr><td><code id="get_code+2B2Cteal_data-method_+3A_...">...</code></td>
<td>
<p>Parameters passed to internal methods. Currently, the only supported parameter is <code>check_names</code>
(<code>logical(1)</code>) flag,  which is <code>TRUE</code> by default. Function warns about missing objects, if they do not exist in
<code>code</code> but are passed in <code>datanames</code>. To remove the warning, set <code>check_names = FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Retrieve code stored in <code style="white-space: pre;">&#8288;@code&#8288;</code>, which (in principle) can be used to recreate
all objects found in the environment (<code style="white-space: pre;">&#8288;@.xData&#8288;</code>).
Use <code>names</code> to limit the code to one or more of the datasets enumerated in
the environment.
</p>


<h3>Value</h3>

<p>Either a character string or an expression. If <code>names</code> is used to request a specific dataset,
only code that <em>creates</em> that dataset (not code that uses it) is returned. Otherwise, all contents of <code style="white-space: pre;">&#8288;@code&#8288;</code>.
</p>


<h3>Extracting dataset-specific code</h3>

<p>When <code>names</code> is specified, the code returned will be limited  to the lines needed to <em>create</em>
the requested datasets. The code stored in the <code style="white-space: pre;">&#8288;@code&#8288;</code> slot is analyzed statically to determine
which lines the datasets of interest depend upon. The analysis works well when objects are created
with standard infix assignment operators (see <code>?assignOps</code>) but it can fail in some situations.
</p>
<p>Consider the following examples:
</p>
<p><em>Case 1: Usual assignments.</em>
</p>
<div class="sourceCode r"><pre>data &lt;- teal_data() |&gt;
  within({
    foo &lt;- function(x) {
      x + 1
    }
    x &lt;- 0
    y &lt;- foo(x)
  })
get_code(data, names = "y")
</pre></div>
<p><code>x</code> has no dependencies, so <code>get_code(data, names = "x")</code> will return only the second call.<br />
<code>y</code> depends on <code>x</code> and <code>foo</code>, so <code>get_code(data, names = "y")</code> will contain all three calls.
</p>
<p><em>Case 2: Some objects are created by a function's side effects.</em>
</p>
<div class="sourceCode r"><pre>data &lt;- teal_data() |&gt;
  within({
    foo &lt;- function() {
      x &lt;&lt;- x + 1
    }
    x &lt;- 0
    foo()
    y &lt;- x
  })
get_code(data, names = "y")
</pre></div>
<p>Here, <code>y</code> depends on <code>x</code> but <code>x</code> is modified by <code>foo</code> as a side effect (not by reassignment)
and so <code>get_code(data, names = "y")</code> will not return the <code>foo()</code> call.<br />
To overcome this limitation, code dependencies can be specified manually.
Lines where side effects occur can be flagged by adding &quot;<code style="white-space: pre;">&#8288;# @linksto &lt;object name&gt;&#8288;</code>&quot; at the end.<br />
Note that <code>within</code> evaluates code passed to <code>expr</code> as is and comments are ignored.
In order to include comments in code one must use the <code>eval_code</code> function instead.
</p>
<div class="sourceCode r"><pre>data &lt;- teal_data() |&gt;
  eval_code("
    foo &lt;- function() {
      x &lt;&lt;- x + 1
    }
    x &lt;- 0
    foo() # @linksto x
    y &lt;- x
  ")
get_code(data, names = "y")
</pre></div>
<p>Now the <code>foo()</code> call will be properly included in the code required to recreate <code>y</code>.
</p>
<p>Note that two functions that create objects as side effects, <code>assign</code> and <code>data</code>, are handled automatically.
</p>
<p>Here are known cases where manual tagging is necessary:
</p>

<ul>
<li><p> non-standard assignment operators, <em>e.g.</em> <code style="white-space: pre;">&#8288;%&lt;&gt;%&#8288;</code>
</p>
</li>
<li><p> objects used as conditions in <code>if</code> statements: <code style="white-space: pre;">&#8288;if (&lt;condition&gt;)&#8288;</code>
</p>
</li>
<li><p> objects used to iterate over in <code>for</code> loops: <code style="white-space: pre;">&#8288;for(i in &lt;sequence&gt;)&#8288;</code>
</p>
</li>
<li><p> creating and evaluating language objects, <em>e.g.</em> <code style="white-space: pre;">&#8288;eval(&lt;call&gt;)&#8288;</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>tdata1 &lt;- teal_data()
tdata1 &lt;- within(tdata1, {
  a &lt;- 1
  b &lt;- a^5
  c &lt;- list(x = 2)
})
get_code(tdata1)
get_code(tdata1, names = "a")
get_code(tdata1, names = "b")

tdata2 &lt;- teal_data(x1 = iris, code = "x1 &lt;- iris")
get_code(tdata2)
get_code(verify(tdata2))

</code></pre>

<hr>
<h2 id='is_dag'>Checks whether a graph is a <code style="white-space: pre;">&#8288;Directed Acyclic Graph (DAG)&#8288;</code></h2><span id='topic+is_dag'></span>

<h3>Description</h3>

<p>Checks whether a graph is a <code style="white-space: pre;">&#8288;Directed Acyclic Graph (DAG)&#8288;</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_dag(graph)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_dag_+3A_graph">graph</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>) with node vector elements</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>logical(1)</code> <code>TRUE</code> if the graph is a <code>DAG</code>; <code>FALSE</code> otherwise
</p>

<hr>
<h2 id='join_key'>Create a relationship between a pair of datasets</h2><span id='topic+join_key'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Create a relationship between two datasets, <code>dataset_1</code> and <code>dataset_2</code>.
By default, this function establishes a directed relationship with <code>dataset_1</code> as the parent.
If <code>dataset_2</code> is not specified, the function creates a primary key for <code>dataset_1</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>join_key(dataset_1, dataset_2 = dataset_1, keys, directed = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="join_key_+3A_dataset_1">dataset_1</code>, <code id="join_key_+3A_dataset_2">dataset_2</code></td>
<td>
<p>(<code>character(1)</code>) Dataset names. When <code>dataset_2</code> is omitted,
a primary key for <code>dataset_1</code> is created.</p>
</td></tr>
<tr><td><code id="join_key_+3A_keys">keys</code></td>
<td>
<p>(optionally named <code>character</code>) Column mapping between the datasets,
where <code>names(keys)</code> maps columns in <code>dataset_1</code> corresponding to columns of
<code>dataset_2</code> given by the elements of <code>keys</code>.
</p>

<ul>
<li><p> If unnamed, the same column names are used for both datasets.
</p>
</li>
<li><p> If any element of the <code>keys</code> vector is empty with a non-empty name, then the name is
used for both datasets.
</p>
</li></ul>
</td></tr>
<tr><td><code id="join_key_+3A_directed">directed</code></td>
<td>
<p>(<code>logical(1)</code>) Flag that indicates whether it should create
a parent-child relationship between the datasets.
</p>

<ul>
<li> <p><code>TRUE</code> (default) <code>dataset_1</code> is the parent of <code>dataset_2</code>;
</p>
</li>
<li> <p><code>FALSE</code> when the relationship is undirected.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class <code>join_key_set</code> to be passed into <code>join_keys</code> function.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+join_keys">join_keys()</a></code>, <code><a href="#topic+parents">parents()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>join_key("d1", "d2", c("A"))
join_key("d1", "d2", c("A" = "B"))
join_key("d1", "d2", c("A" = "B", "C"))

</code></pre>

<hr>
<h2 id='join_keys'>Manage relationships between datasets using <code>join_keys</code></h2><span id='topic+join_keys'></span><span id='topic+join_keys.default'></span><span id='topic+join_keys.join_keys'></span><span id='topic+join_keys.teal_data'></span><span id='topic++5B.join_keys'></span><span id='topic++5B+3C-.join_keys'></span><span id='topic+c.join_keys'></span><span id='topic+c.join_key_set'></span><span id='topic+join_keys+3C-'></span><span id='topic+join_keys+3C-.join_keys'></span><span id='topic+join_keys+3C-.teal_data'></span><span id='topic+format.join_keys'></span><span id='topic+print.join_keys'></span>

<h3>Description</h3>

<p>Facilitates the creation and retrieval of relationships between datasets.
<code>join_keys</code> class extends <code>list</code> and contains keys connecting pairs of datasets.
Each element of the list contains keys for specific dataset.
Each dataset can have a relationship with itself (primary key) and with other datasets.
</p>
<p>Note that <code>join_keys</code> list is symmetrical and assumes a default direction, that is:
when keys are set between <code>ds1</code> and <code>ds2</code>, it defines <code>ds1</code> as the parent
in a parent-child relationship and the mapping is automatically mirrored between
<code>ds2</code> and <code>ds1</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## Constructor, getter and setter
join_keys(...)

## Default S3 method:
join_keys(...)

## S3 method for class 'join_keys'
join_keys(...)

## S3 method for class 'teal_data'
join_keys(...)

## S3 method for class 'join_keys'
x[i, j]

## S3 replacement method for class 'join_keys'
x[i, j, directed = TRUE] &lt;- value

## S3 method for class 'join_keys'
c(...)

## S3 method for class 'join_key_set'
c(...)

join_keys(x) &lt;- value

## S3 replacement method for class 'join_keys'
join_keys(x) &lt;- value

## S3 replacement method for class 'teal_data'
join_keys(x) &lt;- value

## S3 method for class 'join_keys'
format(x, ...)

## S3 method for class 'join_keys'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="join_keys_+3A_...">...</code></td>
<td>
<p>optional,
</p>

<ul>
<li><p> either <code>teal_data</code> or <code>join_keys</code> object to extract <code>join_keys</code>
</p>
</li>
<li><p> or any number of <code>join_key_set</code> objects to create <code>join_keys</code>
</p>
</li>
<li><p> or nothing to create an empty <code>join_keys</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="join_keys_+3A_x">x</code></td>
<td>
<p>(<code>join_keys</code>) empty object to set the new relationship pairs.
<code>x</code> is typically an object of <code>join_keys</code> class. When called with the <code>join_keys(x)</code>
or <code>join_keys(x) &lt;- value</code> then it can also take a supported class (<code>teal_data</code>, <code>join_keys</code>)</p>
</td></tr>
<tr><td><code id="join_keys_+3A_i">i</code>, <code id="join_keys_+3A_j">j</code></td>
<td>
<p>indices specifying elements to extract or replace. Index should be a
a character vector, but it can also take numeric, logical, <code>NULL</code> or missing.</p>
</td></tr>
<tr><td><code id="join_keys_+3A_directed">directed</code></td>
<td>
<p>(<code>logical(1)</code>) Flag that indicates whether it should create
a parent-child relationship between the datasets.
</p>

<ul>
<li> <p><code>TRUE</code> (default) <code>dataset_1</code> is the parent of <code>dataset_2</code>;
</p>
</li>
<li> <p><code>FALSE</code> when the relationship is undirected.
</p>
</li></ul>
</td></tr>
<tr><td><code id="join_keys_+3A_value">value</code></td>
<td>
<p>For <code style="white-space: pre;">&#8288;x[i, j, directed = TRUE)] &lt;- value&#8288;</code> (named/unnamed <code>character</code>)
Column mapping between datasets.
</p>
<p>For <code>join_keys(x) &lt;- value</code>: (<code>join_key_set</code> or list of <code>join_key_set</code>) relationship
pairs to add to <code>join_keys</code> list.
</p>
<p>[i, j, directed = TRUE)]: R:i,%20j,%20directed%20=%20TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>join_keys</code> object.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>join_keys()</code>: Returns an empty <code>join_keys</code> object when called without arguments.
</p>
</li>
<li> <p><code>join_keys(join_keys)</code>: Returns itself.
</p>
</li>
<li> <p><code>join_keys(teal_data)</code>: Returns the <code>join_keys</code> object contained in <code>teal_data</code> object.
</p>
</li>
<li> <p><code>join_keys(...)</code>: Creates a new object with one or more <code>join_key_set</code> parameters.
</p>
</li></ul>



<h3>Functions</h3>


<ul>
<li> <p><code>x[names]</code>: Returns a subset of the <code>join_keys</code> object for
given <code>names</code>, including parent <code>names</code> and symmetric mirror keys between
<code>names</code> in the result.
</p>
</li>
<li> <p><code>x[i, j]</code>: Returns join keys between datasets <code>i</code> and <code>j</code>,
including implicit keys inferred from their relationship with a parent.
</p>
</li></ul>


<ul>
<li> <p><code>x[i, j] &lt;- value</code>: Assignment of a key to pair <code style="white-space: pre;">&#8288;(i, j)&#8288;</code>.
</p>
</li>
<li> <p><code>x[i] &lt;- value</code>: This (without <code>j</code> parameter) <strong>is not</strong> a supported
operation for <code>join_keys</code>.
</p>
</li>
<li> <p><code>join_keys(x)[i, j] &lt;- value</code>: Assignment to <code>join_keys</code> object stored in <code>x</code>,
such as a <code>teal_data</code> object or <code>join_keys</code> object itself.
</p>
</li></ul>


<ul>
<li> <p><code>join_keys(x) &lt;- value</code>: Assignment of the <code>join_keys</code> in object with <code>value</code>.
<code>value</code> needs to be an object of class <code>join_keys</code> or <code>join_key_set</code>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+join_key">join_key()</a></code> for creating <code>join_keys_set</code>,
<code><a href="#topic+parents">parents()</a></code> for parent operations,
<code><a href="#topic+teal_data">teal_data()</a></code> for <code>teal_data</code> constructor <em>and</em>
<a href="#topic+default_cdisc_join_keys">default_cdisc_join_keys</a> for default CDISC keys.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Creating a new join keys ----

jk &lt;- join_keys(
  join_key("ds1", "ds1", "pk1"),
  join_key("ds2", "ds2", "pk2"),
  join_key("ds3", "ds3", "pk3"),
  join_key("ds1", "ds2", c(pk1 = "pk2")),
  join_key("ds1", "ds3", c(pk1 = "pk3"))
)

jk

# Getter for join_keys ---

jk["ds1", "ds2"]

# Subsetting join_keys ----

jk["ds1"]
jk[1:2]
jk[c("ds1", "ds2")]

# Setting a new primary key ---

jk["ds4", "ds4"] &lt;- "pk4"
jk["ds5", "ds5"] &lt;- "pk5"

# Setting a single relationship pair ---

jk["ds1", "ds4"] &lt;- c("pk1" = "pk4")

# Removing a key ---

jk["ds5", "ds5"] &lt;- NULL
# Merging multiple `join_keys` objects ---

jk_merged &lt;- c(
  jk,
  join_keys(
    join_key("ds4", keys = c("pk4", "pk4_2")),
    join_key("ds3", "ds4", c(pk3 = "pk4_2"))
  )
)
# note: merge can be performed with both join_keys and join_key_set

jk_merged &lt;- c(
  jk_merged,
  join_key("ds5", keys = "pk5"),
  join_key("ds1", "ds5", c(pk1 = "pk5"))
)
# Assigning keys via join_keys(x)[i, j] &lt;- value ----

obj &lt;- join_keys()
# or
obj &lt;- teal_data()

join_keys(obj)["ds1", "ds1"] &lt;- "pk1"
join_keys(obj)["ds2", "ds2"] &lt;- "pk2"
join_keys(obj)["ds3", "ds3"] &lt;- "pk3"
join_keys(obj)["ds1", "ds2"] &lt;- c(pk1 = "pk2")
join_keys(obj)["ds1", "ds3"] &lt;- c(pk1 = "pk3")

identical(jk, join_keys(obj))
# Setter for join_keys within teal_data ----

td &lt;- teal_data()
join_keys(td) &lt;- jk

join_keys(td)["ds1", "ds2"] &lt;- "new_key"
join_keys(td) &lt;- c(join_keys(td), join_keys(join_key("ds3", "ds2", "key3")))
join_keys(td)
</code></pre>

<hr>
<h2 id='names.teal_data'>Names of data sets in <code>teal_data</code> object</h2><span id='topic+names.teal_data'></span>

<h3>Description</h3>

<p>Functions to get the names of a <code>teal_data</code> object.
The names are obtained from the objects listed in the <code>qenv</code> environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'teal_data'
names(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="names.teal_data_+3A_x">x</code></td>
<td>
<p>A (<code>teal_data</code>) object to access or modify.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Objects named with a <code>.</code> (dot) prefix will be ignored and not returned.
To get the names of all objects, use <code>ls(x, all.names = TRUE)</code>, however, it
will not group the names by the join_keys topological structure.
</p>
<p>In order to rename objects in the <code>teal_data</code> object, use base R functions (see examples).
</p>


<h3>Value</h3>

<p>A character vector of names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>td &lt;- teal_data(iris = iris)
td &lt;- within(td, mtcars &lt;- mtcars)
names(td)

# hidden objects with dot-prefix
td &lt;- within(td, .CO2 &lt;- CO2)
names(td) # '.CO2' will not be returned

# rename objects
td &lt;- teal_data(iris = iris)
td &lt;- within(td, {
  new_iris &lt;- iris
  rm(iris)
})
names(td) # only 'new_iris' will be returned

</code></pre>

<hr>
<h2 id='names+26lt+3B-.join_keys'>The names of a <code>join_keys</code> object</h2><span id='topic+names+3C-.join_keys'></span>

<h3>Description</h3>

<p>The names of a <code>join_keys</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'join_keys'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="names+2B26lt+2B3B-.join_keys_+3A_x">x</code></td>
<td>
<p>an <span class="rlang"><b>R</b></span> object.</p>
</td></tr>
<tr><td><code id="names+2B26lt+2B3B-.join_keys_+3A_value">value</code></td>
<td>
<p>a character vector of up to the same length as <code>x</code>, or
<code>NULL</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='new_join_keys'>Internal constructor</h2><span id='topic+new_join_keys'></span>

<h3>Description</h3>

<p>Internal constructor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_join_keys()
</code></pre>


<h3>Value</h3>

<p>an empty <code>join_keys</code> list
</p>

<hr>
<h2 id='parents'>Get and set parents in <code>join_keys</code> object</h2><span id='topic+parents'></span><span id='topic+parents.join_keys'></span><span id='topic+parents.teal_data'></span><span id='topic+parents+3C-'></span><span id='topic+parents+3C-.join_keys'></span><span id='topic+parents+3C-.teal_data'></span><span id='topic+parent'></span>

<h3>Description</h3>

<p><code>parents()</code> facilitates the creation of dependencies between datasets by
assigning a parent-child relationship.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parents(x)

## S3 method for class 'join_keys'
parents(x)

## S3 method for class 'teal_data'
parents(x)

parents(x) &lt;- value

## S3 replacement method for class 'join_keys'
parents(x) &lt;- value

## S3 replacement method for class 'teal_data'
parents(x) &lt;- value

parent(x, dataset_name)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="parents_+3A_x">x</code></td>
<td>
<p>(<code>join_keys</code> or <code>teal_data</code>) object that contains &quot;parents&quot; information
to retrieve or manipulate.</p>
</td></tr>
<tr><td><code id="parents_+3A_value">value</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>) of <code>character</code> vectors.</p>
</td></tr>
<tr><td><code id="parents_+3A_dataset_name">dataset_name</code></td>
<td>
<p>(<code>character(1)</code>) Name of dataset to query on their parent.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each element is defined by a <code>list</code> element, where <code>list("child" = "parent")</code>.
</p>


<h3>Value</h3>

<p>a <code>list</code> of <code>character</code> representing the parents.
</p>
<p>For <code>parent(x, dataset_name)</code> returns <code>NULL</code> if parent does not exist.
</p>


<h3>Methods (by class)</h3>


<ul>
<li> <p><code>parents(join_keys)</code>: Retrieves parents of <code>join_keys</code> object.
</p>
</li>
<li> <p><code>parents(teal_data)</code>: Retrieves parents of <code>join_keys</code> inside <code>teal_data</code> object.
</p>
</li></ul>


<h3>Functions</h3>


<ul>
<li> <p><code>parents(x) &lt;- value</code>: Assignment of parents in <code>join_keys</code> object.
</p>
</li>
<li> <p><code>parents(join_keys) &lt;- value</code>: Assignment of parents of <code>join_keys</code> object.
</p>
</li>
<li> <p><code>parents(teal_data) &lt;- value</code>: Assignment of parents of <code>join_keys</code> inside <code>teal_data</code> object.
</p>
</li>
<li> <p><code>parent()</code>: Getter for individual parent.
</p>
</li></ul>


<h3>See Also</h3>

<p><code><a href="#topic+join_keys">join_keys()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get parents of join_keys ---

jk &lt;- default_cdisc_join_keys["ADEX"]
parents(jk)
# Get parents of join_keys inside teal_data object ---

td &lt;- teal_data(
  ADSL = rADSL,
  ADTTE = rADTTE,
  ADRS = rADRS,
  join_keys = default_cdisc_join_keys[c("ADSL", "ADTTE", "ADRS")]
)
parents(td)
# Assignment of parents ---

jk &lt;- join_keys(
  join_key("ds1", "ds2", "id"),
  join_key("ds5", "ds6", "id"),
  join_key("ds7", "ds6", "id")
)

parents(jk) &lt;- list(ds2 = "ds1")

# Setting individual parent-child relationship

parents(jk)["ds6"] &lt;- "ds5"
parents(jk)["ds7"] &lt;- "ds6"
# Assignment of parents of join_keys inside teal_data object ---

parents(td) &lt;- list("ADTTE" = "ADSL") # replace existing
parents(td)["ADRS"] &lt;- "ADSL" # add new parent
# Get individual parent ---

parent(jk, "ds2")
parent(td, "ADTTE")
</code></pre>

<hr>
<h2 id='rADAE'>Random adverse events</h2><span id='topic+rADAE'></span>

<h3>Description</h3>

<p>Random adverse events
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADAE
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 1934 rows and 92 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADCM'>Random concomitant medications</h2><span id='topic+rADCM'></span>

<h3>Description</h3>

<p>Random concomitant medications
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADCM
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 3685 rows and 83 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADEX'>Random response</h2><span id='topic+rADEX'></span>

<h3>Description</h3>

<p>Random exposure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADEX
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 6400 rows and 79 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADLB'>Random lab analysis</h2><span id='topic+rADLB'></span>

<h3>Description</h3>

<p>Random lab analysis
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADLB
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 8400 rows and 102 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADRS'>Random response</h2><span id='topic+rADRS'></span>

<h3>Description</h3>

<p>Random response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADRS
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 3200 rows and 65 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADSL'>Random patient listing</h2><span id='topic+rADSL'></span>

<h3>Description</h3>

<p>Random patient listing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADSL
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 400 rows and 55 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADTR'>Random data <code>rADTR</code></h2><span id='topic+rADTR'></span>

<h3>Description</h3>

<p>Random data <code>rADTR</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADTR
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 2800 rows and 76 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADTTE'>Random time to event analysis dataset</h2><span id='topic+rADTTE'></span>

<h3>Description</h3>

<p>Random time to event analysis dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADTTE
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 2000 rows and 67 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='rADVS'>Random data <code>rADVS</code></h2><span id='topic+rADVS'></span>

<h3>Description</h3>

<p>Random data <code>rADVS</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rADVS
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 16800 rows and 87 columns.
</p>


<h3>Source</h3>

<p>internal
</p>

<hr>
<h2 id='show+2Cteal_data-method'>Show <code>teal_data</code> object</h2><span id='topic+show+2Cteal_data-method'></span>

<h3>Description</h3>

<p>Prints <code>teal_data</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'teal_data'
show(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show+2B2Cteal_data-method_+3A_object">object</code></td>
<td>
<p>(<code>teal_data</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Input <code>teal_data</code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>teal_data()
teal_data(x = iris, code = "x = iris")
verify(teal_data(x = iris, code = "x = iris"))
</code></pre>

<hr>
<h2 id='teal_data'>Comprehensive data integration function for <code>teal</code> applications</h2><span id='topic+teal_data'></span><span id='topic++5B.teal_data'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>Initializes a data for <code>teal</code> application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>teal_data(..., join_keys = teal.data::join_keys(), code = character(0))

## S3 method for class 'teal_data'
x[names]
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="teal_data_+3A_...">...</code></td>
<td>
<p>any number of objects (presumably data objects) provided as <code>name = value</code> pairs.</p>
</td></tr>
<tr><td><code id="teal_data_+3A_join_keys">join_keys</code></td>
<td>
<p>(<code>join_keys</code> or single <code>join_key_set</code>)
optional object with datasets column names used for joining.
If empty then no joins between pairs of objects.</p>
</td></tr>
<tr><td><code id="teal_data_+3A_code">code</code></td>
<td>
<p>(<code>character</code>, <code>language</code>) optional code to reproduce the datasets provided in <code>...</code>.
Note this code is not executed and the <code>teal_data</code> may not be reproducible
</p>
<p>Use <code><a href="#topic+verify">verify()</a></code> to verify code reproducibility.</p>
</td></tr>
<tr><td><code id="teal_data_+3A_x">x</code></td>
<td>
<p>(<code>teal_data</code>)</p>
</td></tr>
<tr><td><code id="teal_data_+3A_names">names</code></td>
<td>
<p>(<code>character</code>) names of objects included in <code>teal_subset</code> to subset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A <code>teal_data</code> is meant to be used for reproducibility purposes. The class inherits from
<code><a href="teal.code.html#topic+qenv">teal.code::qenv</a></code> and we encourage to get familiar with <a href="https://CRAN.R-project.org/package=teal.code"><span class="pkg">teal.code</span></a> first.
<code>teal_data</code> has following characteristics:
</p>

<ul>
<li><p> It inherits from the environment and methods such as <code><a href="base.html#topic++24">$</a></code>, <code><a href="base.html#topic+get">get()</a></code>, <code><a href="base.html#topic+ls">ls()</a></code>, <code><a href="base.html#topic+as.list">as.list()</a></code>,
<code><a href="base.html#topic+parent.env">parent.env()</a></code> work out of the box.
</p>
</li>
<li> <p><code>teal_data</code> is a locked environment, and data modification is only possible through the
<code><a href="teal.code.html#topic+eval_code">teal.code::eval_code()</a></code> and <code><a href="teal.code.html#topic+eval_code">within.qenv()</a></code> functions.
</p>
</li>
<li><p> It stores metadata about the code used to create the data (see <code><a href="#topic+get_code+2Cteal_data-method">get_code()</a></code>).
</p>
</li>
<li><p> It supports slicing (see <code><a href="teal.code.html#topic+subset-qenv">teal.code::subset-qenv</a></code>)
</p>
</li>
<li><p> Is immutable which means that each code evaluation does not modify the original <code>teal_data</code>
environment directly.
</p>
</li>
<li><p> It maintains information about relationships between datasets (see <code><a href="#topic+join_keys">join_keys()</a></code>).
</p>
</li></ul>



<h3>Value</h3>

<p>A <code>teal_data</code> object.
</p>


<h3>Subsetting</h3>

<p><code>x[names]</code> subsets objects in <code>teal_data</code> environment and limit the code to the necessary needed to build limited
objects.
</p>


<h3>See Also</h3>

<p><code><a href="teal.code.html#topic+eval_code">teal.code::eval_code</a></code>, <code><a href="#topic+get_code+2Cteal_data-method">get_code()</a></code>, <code><a href="#topic+join_keys">join_keys()</a></code>, <code><a href="#topic+names.teal_data">names.teal_data()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>teal_data(x1 = iris, x2 = mtcars)


# Subsetting
data &lt;- teal_data()
data &lt;- eval_code(data, "a &lt;- 1;b&lt;-2")
data["a"]
data[c("a", "b")]

join_keys(data) &lt;- join_keys(join_key("a", "b", "x"))
join_keys(data["a"]) # should show empty keys
join_keys(data["b"])
join_keys(data)["a"] # should show empty keys
join_keys(data)["b"]

</code></pre>

<hr>
<h2 id='teal_data-class'>Reproducible data</h2><span id='topic+teal_data-class'></span>

<h3>Description</h3>

<p>Reproducible data container class. Inherits code tracking behavior from <code><a href="teal.code.html#topic+qenv-class">teal.code::qenv</a></code>.
</p>


<h3>Details</h3>

<p>This class provides an isolated environment in which to store and process data with all code being recorded.
The environment, code, data set names, and data joining keys are stored in their respective slots.
These slots should never be accessed directly, use the provided get/set functions.
</p>
<p>As code is evaluated in <code>teal_data</code>, messages and warnings are stored in their respective slots.
If errors are raised, a <code>qenv.error</code> object is returned.
</p>


<h3>Slots</h3>


<dl>
<dt><code>.xData</code></dt><dd><p>(<code>environment</code>) environment containing data sets and possibly
auxiliary variables.
Access variables with <code><a href="base.html#topic+get">get()</a></code>, <code><a href="base.html#topic++24">$</a></code>, <code><a href="teal.code.html#topic+get_var">teal.code::get_var()</a></code> or [<code>[[</code>].
No setter provided. Evaluate code to add variables into <code style="white-space: pre;">&#8288;@.xData&#8288;</code>.</p>
</dd>
<dt><code>code</code></dt><dd><p>(<code>list</code> of <code>character</code>) representing code necessary to reproduce the contents of <code>qenv</code>.
Access with <code><a href="teal.code.html#topic+get_code">teal.code::get_code()</a></code>.
No setter provided. Evaluate code to append code to the slot.</p>
</dd>
<dt><code>join_keys</code></dt><dd><p>(<code>join_keys</code>) object specifying joining keys for data sets in
<code style="white-space: pre;">&#8288;@.xData&#8288;</code>.
Access or modify with <code><a href="#topic+join_keys">join_keys()</a></code>.</p>
</dd>
<dt><code>verified</code></dt><dd><p>(<code>logical(1)</code>) flag signifying that code in <code style="white-space: pre;">&#8288;@code&#8288;</code> has been
proven to yield contents of <code style="white-space: pre;">&#8288;@.xData&#8288;</code>.
Used internally. See <code><a href="#topic+verify">verify()</a></code> for more details.</p>
</dd>
</dl>


<h3>Code</h3>

<p>Each code element is a character representing one call. Each element is named with the random
identifier to make sure uniqueness when joining. Each element has possible attributes:
</p>

<ul>
<li> <p><code>warnings</code> (<code>character</code>) the warnings output when evaluating the code element.
</p>
</li>
<li> <p><code>messages</code> (<code>character</code>) the messages output when evaluating the code element.
</p>
</li>
<li> <p><code>dependency</code> (<code>character</code>) names of objects that appear in this call and gets affected by this call,
separated by <code style="white-space: pre;">&#8288;&lt;-&#8288;</code> (objects on LHS of <code style="white-space: pre;">&#8288;&lt;-&#8288;</code> are affected by this line, and objects on RHS are affecting this line).
</p>
</li></ul>


<hr>
<h2 id='topological_sort'>Topological graph sort</h2><span id='topic+topological_sort'></span>

<h3>Description</h3>

<p>Graph is a <code>list</code> which for each node contains a vector of child nodes
in the returned list, parents appear before their children.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topological_sort(graph)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topological_sort_+3A_graph">graph</code></td>
<td>
<p>(<code style="white-space: pre;">&#8288;named list&#8288;</code>) with node vector elements</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Implementation of <code>Kahn</code> algorithm with a modification to maintain the order of input elements.
</p>

<hr>
<h2 id='update_keys_given_parents'>Updates the keys of the datasets based on the parents</h2><span id='topic+update_keys_given_parents'></span>

<h3>Description</h3>

<p>Updates the keys of the datasets based on the parents
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_keys_given_parents(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_keys_given_parents_+3A_x">x</code></td>
<td>
<p>(<code>join_keys</code>) object to update the keys.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(<code>self</code>) invisibly for chaining
</p>

<hr>
<h2 id='verify'>Verify code reproducibility</h2><span id='topic+verify'></span><span id='topic+verify+2Cteal_data-method'></span><span id='topic+verify+2Cqenv.error-method'></span>

<h3>Description</h3>

<p>Checks whether code in <code>teal_data</code> object reproduces the stored objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>verify(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="verify_+3A_x">x</code></td>
<td>
<p><code>teal_data</code> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If objects created by code in the <code style="white-space: pre;">&#8288;@code&#8288;</code> slot of <code>x</code> are <code>all_equal</code> to the
contents of the environment (<code style="white-space: pre;">&#8288;@.xData&#8288;</code> slot),
the function updates the <code style="white-space: pre;">&#8288;@verified&#8288;</code> slot to <code>TRUE</code> in the returned <code>teal_data</code> object.
Once verified, the slot will always be set to <code>TRUE</code>.
If the <code style="white-space: pre;">&#8288;@code&#8288;</code> fails to recreate objects in <code>teal_data</code>'s environment, an
error is raised.
</p>


<h3>Value</h3>

<p>Input <code>teal_data</code> object or error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tdata1 &lt;- teal_data()
tdata1 &lt;- within(tdata1, {
  a &lt;- 1
  b &lt;- a^5
  c &lt;- list(x = 2)
})
verify(tdata1)

tdata2 &lt;- teal_data(x1 = iris, code = "x1 &lt;- iris")
verify(tdata2)
verify(tdata2)@verified
tdata2@verified

tdata3 &lt;- teal_data()
tdata3 &lt;- within(tdata3, {
  stop("error")
})
try(verify(tdata3)) # fails


a &lt;- 1
b &lt;- a + 2
c &lt;- list(x = 2)
d &lt;- 5
tdata4 &lt;- teal_data(
  a = a, b = b, c = c, d = d,
  code = "a &lt;- 1
          b &lt;- a
          c &lt;- list(x = 2)
          e &lt;- 1"
)
tdata4
## Not run: 
verify(tdata4) # fails

## End(Not run)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
