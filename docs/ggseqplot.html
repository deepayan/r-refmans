<!DOCTYPE html><html><head><title>Help for package ggseqplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggseqplot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ggseqplot-package'><p>ggseqplot: Render Sequence Plots using 'ggplot2'</p></a></li>
<li><a href='#ggseqdplot'><p>Sequence Distribution Plot</p></a></li>
<li><a href='#ggseqeplot'><p>Sequence Entropy Plot</p></a></li>
<li><a href='#ggseqfplot'><p>Sequence Frequency Plot</p></a></li>
<li><a href='#ggseqiplot'><p>Sequence Index Plot</p></a></li>
<li><a href='#ggseqmsplot'><p>Modal State Sequence Plot</p></a></li>
<li><a href='#ggseqmtplot'><p>Mean time plot</p></a></li>
<li><a href='#ggseqrfplot'><p>Relative Frequency Sequence Plot</p></a></li>
<li><a href='#ggseqrplot'><p>Representative Sequence plot</p></a></li>
<li><a href='#ggseqtrplot'><p>Sequence Transition Rate Plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Render Sequence Plots using 'ggplot2'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.8.3</td>
</tr>
<tr>
<td>Description:</td>
<td>A set of wrapper functions that mainly re-produces most of the 
  sequence plots rendered with TraMineR::seqplot(). Whereas 'TraMineR' uses base 
  R to produce the plots this library draws on 'ggplot2'. 
  The plots are produced on the basis of a sequence object defined  
  with TraMineR::seqdef(). The package automates the reshaping and plotting 
  of sequence data. Resulting plots are of class 'ggplot', i.e. components 
  can be added and tweaked using '+' and regular 'ggplot2' functions. </td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://maraab23.github.io/ggseqplot/">https://maraab23.github.io/ggseqplot/</a>,
<a href="https://github.com/maraab23/ggseqplot">https://github.com/maraab23/ggseqplot</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/maraab23/ggseqplot/issues">https://github.com/maraab23/ggseqplot/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0), TraMineR (&ge; 2.2-5), ggplot2 (&ge; 3.4.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>RdMacros:</td>
<td>Rdpack</td>
</tr>
<tr>
<td>Imports:</td>
<td>colorspace, dplyr (&ge; 1.1.0), forcats (&ge; 1.0.0), ggh4x,
ggrepel, ggtext, glue, patchwork, purrr, Rdpack, rlang, tidyr,
usethis</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, ggthemes, hrbrthemes, knitr, rmarkdown, testthat (&ge;
3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-22 21:16:30 UTC; ba3gh6</td>
</tr>
<tr>
<td>Author:</td>
<td>Marcel Raab <a href="https://orcid.org/0000-0002-3097-1591"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marcel Raab &lt;marcel.raab@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-22 21:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ggseqplot-package'>ggseqplot: Render Sequence Plots using 'ggplot2'</h2><span id='topic+ggseqplot'></span><span id='topic+ggseqplot-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>A set of wrapper functions that mainly re-produces most of the sequence plots rendered with TraMineR::seqplot(). Whereas 'TraMineR' uses base R to produce the plots this library draws on 'ggplot2'. The plots are produced on the basis of a sequence object defined with TraMineR::seqdef(). The package automates the reshaping and plotting of sequence data. Resulting plots are of class 'ggplot', i.e. components can be added and tweaked using '+' and regular 'ggplot2' functions.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Marcel Raab <a href="mailto:marcel.raab@gmail.com">marcel.raab@gmail.com</a> (<a href="https://orcid.org/0000-0002-3097-1591">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://maraab23.github.io/ggseqplot/">https://maraab23.github.io/ggseqplot/</a>
</p>
</li>
<li> <p><a href="https://github.com/maraab23/ggseqplot">https://github.com/maraab23/ggseqplot</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/maraab23/ggseqplot/issues">https://github.com/maraab23/ggseqplot/issues</a>
</p>
</li></ul>


<hr>
<h2 id='ggseqdplot'>Sequence Distribution Plot</h2><span id='topic+ggseqdplot'></span>

<h3>Description</h3>

<p>Function for rendering state distribution plots with <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>
(Wickham 2016) instead of base R's <code><a href="base.html#topic+plot">plot</a></code>
function that is used by <code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code>
(Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqdplot(
  seqdata,
  no.n = FALSE,
  group = NULL,
  dissect = NULL,
  weighted = TRUE,
  with.missing = FALSE,
  border = FALSE,
  with.entropy = FALSE,
  linetype = "dashed",
  linecolor = "black",
  linewidth = 1,
  facet_ncol = NULL,
  facet_nrow = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqdplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_no.n">no.n</code></td>
<td>
<p>specifies if number of (weighted) sequences is shown (default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_dissect">dissect</code></td>
<td>
<p>if <code>"row"</code> or <code>"col"</code> are specified separate distribution plots instead of a stacked plot are displayed;
<code>"row"</code> and <code>"col"</code> display the distributions in one row or one column respectively; default is <code>NULL</code></p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_with.missing">with.missing</code></td>
<td>
<p>Specifies if missing states should be considered when computing the state distributions (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_with.entropy">with.entropy</code></td>
<td>
<p>add line plot of cross-sectional entropies at each sequence position</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_linetype">linetype</code></td>
<td>
<p>The linetype for the entropy subplot (<code>with.entropy==TRUE</code>) can be specified with an integer (0-6) or name (0 = blank, 1 = solid, 2 = dashed, 3 = dotted, 4 = dotdash, 5 = longdash, 6 = twodash); ; default is <code>"dashed"</code></p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_linecolor">linecolor</code></td>
<td>
<p>Specifies the color of the entropy line if <code>with.entropy==TRUE</code>; default is <code>"black"</code></p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_linewidth">linewidth</code></td>
<td>
<p>Specifies the width of the entropy line if <code>with.entropy==TRUE</code>; default is <code>1</code></p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqdplot_+3A_...">...</code></td>
<td>
<p>if group is specified additional arguments of <code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap</a></code>
such as <code>"labeller"</code> or <code>"strip.position"</code> can be used to change the appearance of the plot. Does
not work if <code>dissect</code> is used</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sequence distribution plots visualize the distribution of all states
by rendering a series of stacked bar charts at each position of the sequence.
Although this type of plot has been used in the life course studies for several
decades (see Blossfeld (1987) for an early application),
it should be noted that the size of the different bars in stacked bar charts
might be difficult to compare - particularly if the alphabet comprises many
states  (Wilke 2019). This issue can be addressed by breaking down
the aggregated  distribution specifying the <code>dissect</code> argument.  Moreover, it
is important to keep in mind that this plot type does not visualize individual
trajectories; instead it displays aggregated distributional information
(repeated cross-sections). For a more detailed discussion of this  type of
sequence visualization see, for example, Brzinsky-Fay (2014),
Fasang and Liao (2014), and Raab and Struffolino (2022).
</p>
<p>The function uses <code><a href="TraMineR.html#topic+seqstatd">TraMineR::seqstatd</a></code> to obtain state
distributions (and entropy values). This requires that the input data (<code>seqdata</code>)
are stored as state sequence object (class <code>stslist</code>) created with
the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function. The state distributions
are reshaped into a a long data format to enable plotting with <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>.
The stacked bars are rendered by calling <code><a href="ggplot2.html#topic+geom_bar">geom_bar</a></code>; if <code>entropy = TRUE</code>
entropy values are plotted with <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>. If the <code>group</code> or the
<code>dissect</code> argument are specified the sub-plots are produced by using
<code><a href="ggplot2.html#topic+facet_wrap">facet_wrap</a></code>. If both are specified the plots are rendered with
<code><a href="ggplot2.html#topic+facet_grid">facet_grid</a></code>.
</p>
<p>The data and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).
</p>


<h3>Value</h3>

<p>A sequence distribution plot created by using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>.
If stored as object the resulting list object (of class gg and ggplot) also
contains the data used for rendering the plot.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Blossfeld H (1987).
&ldquo;Labor-Market Entry and the Sexual Segregation of Careers in the Federal Republic of Germany.&rdquo;
<em>American Journal of Sociology</em>, <b>93</b>(1), 89&ndash;118.
<a href="https://doi.org/10.1086/228707">doi:10.1086/228707</a>.<br /><br /> Brzinsky-Fay C (2014).
&ldquo;Graphical Representation of Transitions and Sequences.&rdquo;
In Blanchard P, Bühlmann F, Gauthier J (eds.), <em>Advances in Sequence Analysis: Theory, Method, Applications</em>,  Life Course Research and Social Policies, 265&ndash;284.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-04969-4_14">doi:10.1007/978-3-319-04969-4_14</a>.<br /><br /> Fasang AE, Liao TF (2014).
&ldquo;Visualizing Sequences in the Social Sciences: Relative Frequency Sequence Plots.&rdquo;
<em>Sociological Methods &amp; Research</em>, <b>43</b>(4), 643&ndash;676.
<a href="https://doi.org/10.1177/0049124113506563">doi:10.1177/0049124113506563</a>.<br /><br /> Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Raab M, Struffolino E (2022).
<em>Sequence Analysis</em>, volume 190 of <em>Quantitative Applications in the Social Sciences</em>.
SAGE, Thousand Oaks, CA.
<a href="https://sa-book.github.io/">https://sa-book.github.io/</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.<br /><br /> Wilke C (2019).
<em>Fundamentals of Data Visualization: A Primer on Making Informative and Compelling Figures</em>.
O'Reilly Media, Sebastopol, CA.
ISBN 978-1-4920-3108-6.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# state distribution plots; grouped by sex
# with TraMineR::seqplot
seqdplot(actcal.seq, group = actcal$sex)
# with ggseqplot
ggseqdplot(actcal.seq, group = actcal$sex)
# with ggseqplot applying a few additional arguments, e.g. entropy line
ggseqdplot(actcal.seq, group = actcal$sex,
           no.n = TRUE, with.entropy = TRUE, border = TRUE)

# break down the stacked plot to ease comparisons of distributions
ggseqdplot(actcal.seq, group = actcal$sex, dissect = "row")

# make use of ggplot functions for modifying the plot
ggseqdplot(actcal.seq) +
  scale_x_discrete(labels = month.abb) +
  labs(title = "State distribution plot", x = "Month") +
  guides(fill = guide_legend(title = "Alphabet")) +
  theme_classic() +
  theme(plot.title = element_text(size = 30,
                                  margin = margin(0, 0, 20, 0)),
    plot.title.position = "plot")

</code></pre>

<hr>
<h2 id='ggseqeplot'>Sequence Entropy Plot</h2><span id='topic+ggseqeplot'></span>

<h3>Description</h3>

<p>Function for plotting the development of cross-sectional entropies across
sequence positions with <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016)
instead of base R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code> (Gabadinho et al. 2011).
Other than in <code><a href="TraMineR.html#topic+seqHtplot">TraMineR::seqHtplot</a></code> group-specific entropy
lines are displayed in a common plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqeplot(
  seqdata,
  group = NULL,
  weighted = TRUE,
  with.missing = FALSE,
  linewidth = 1,
  linecolor = "Okabe-Ito",
  gr.linetype = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqeplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_group">group</code></td>
<td>
<p>If grouping variable is specified plot shows one line for each group</p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_with.missing">with.missing</code></td>
<td>
<p>Specifies if missing states should be considered when computing the entropy index (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_linewidth">linewidth</code></td>
<td>
<p>Specifies the with of the entropy line; default is <code>1</code></p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_linecolor">linecolor</code></td>
<td>
<p>Specifies color palette for line(s); default is <code>"Okabe-Ito"</code> which contains up to 9 colors (first is black).
if more than 9 lines should be rendered, user has to specify an alternative color palette</p>
</td></tr>
<tr><td><code id="ggseqeplot_+3A_gr.linetype">gr.linetype</code></td>
<td>
<p>Specifies if line type should vary by group; hence only relevant if
group argument is specified; default is <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses <code><a href="TraMineR.html#topic+seqstatd">TraMineR::seqstatd</a></code>
to compute entropies. This requires that the input data (<code>seqdata</code>)
are stored as state sequence object (class <code>stslist</code>) created with the
<code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.
</p>
<p>The entropy values are plotted with <code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>. The data
and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).
</p>


<h3>Value</h3>

<p>A line plot of entropy values at each sequence position. If stored as object the resulting list
object also contains the data (long format) used for rendering the plot.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# sequences sorted by age in 2000 and grouped by sex
# with TraMineR::seqplot (entropies shown in two separate plots)
seqHtplot(actcal.seq, group = actcal$sex)
# with ggseqplot (entropies shown in one plot)
ggseqeplot(actcal.seq, group = actcal$sex)
ggseqeplot(actcal.seq, group = actcal$sex, gr.linetype = TRUE)

# manual color specification
ggseqeplot(actcal.seq, linecolor = "darkgreen")
ggseqeplot(actcal.seq, group = actcal$sex,
           linecolor = c("#3D98D3FF", "#FF363CFF"))
</code></pre>

<hr>
<h2 id='ggseqfplot'>Sequence Frequency Plot</h2><span id='topic+ggseqfplot'></span>

<h3>Description</h3>

<p>Function for rendering sequence index plot of the most frequent sequences of
a state sequence object using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016)
instead of base R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqfplot">TraMineR::seqplot</a></code> /
<code><a href="TraMineR.html#topic+plot.stslist.freq">TraMineR::plot.stslist.freq</a></code> (Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqfplot(
  seqdata,
  group = NULL,
  ranks = 1:10,
  weighted = TRUE,
  border = FALSE,
  proportional = TRUE,
  ylabs = "total",
  no.coverage = FALSE,
  facet_ncol = NULL,
  facet_nrow = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqfplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_ranks">ranks</code></td>
<td>
<p>specifies which of the most frequent sequences should be plotted;
default is the first ten (<code>1:10</code>); if set to 0 all sequences are displayed</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_proportional">proportional</code></td>
<td>
<p>if <code>TRUE</code> (default), the sequence heights are
displayed proportional to their frequencies</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_ylabs">ylabs</code></td>
<td>
<p>defines appearance of y-axis labels; default (<code>"total"</code>)
only labels min and max (i.e. cumulative relative frequency); if <code>"share"</code> labels indicate
relative frequency of each displayed sequence (note: overlapping labels are removed)</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_no.coverage">no.coverage</code></td>
<td>
<p>specifies if information on total coverage is shown as
caption or as part of the group/facet label if <code>ylabs == "share"</code>
(default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqfplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The subset of displayed sequences is obtained by an internal call of
<code><a href="TraMineR.html#topic+seqtab">TraMineR::seqtab</a></code>. The extracted sequences are plotted
by a call of <code><a href="#topic+ggseqiplot">ggseqiplot</a></code> which uses
<code><a href="ggplot2.html#topic+geom_rect">ggplot2::geom_rect</a></code> to render the sequences. The data
and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).
</p>
<p>Experienced ggplot2 users might notice the customized labeling of the
y-axes in the faceted plots (i.e. plots with specified <code>group</code> argument). This has
been achieved by utilizing the very helpful <code><a href="ggh4x.html#topic+ggh4x">ggh4x</a></code> library.
</p>


<h3>Value</h3>

<p>A sequence frequency plot created by using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>.
If stored as object the resulting list object (of class gg and ggplot) also
contains the data used for rendering the plot.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ggseqiplot">ggseqiplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# sequence frequency plot
# with TraMineR::seqplot
seqfplot(actcal.seq)
# with ggseqplot
ggseqfplot(actcal.seq)
# with ggseqplot applying additional arguments and some layout changes
ggseqfplot(actcal.seq,
           group = actcal$sex,
           ranks = 1:5,
           ylabs = "share") +
  scale_x_discrete(breaks = 1:12,
                   labels = month.abb,
                   expand = expansion(add = c(0.2, 0)))
</code></pre>

<hr>
<h2 id='ggseqiplot'>Sequence Index Plot</h2><span id='topic+ggseqiplot'></span>

<h3>Description</h3>

<p>Function for rendering sequence index plots with
<code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016) instead
of base R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code>
(Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqiplot(
  seqdata,
  no.n = FALSE,
  group = NULL,
  sortv = NULL,
  weighted = TRUE,
  border = FALSE,
  facet_scale = "free_y",
  facet_ncol = NULL,
  facet_nrow = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqiplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_no.n">no.n</code></td>
<td>
<p>specifies if number of (weighted) sequences is shown as part of
the y-axis title or group/facet title (default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_sortv">sortv</code></td>
<td>
<p>Vector of numerical values sorting the sequences or a sorting
method (either <code>"from.start"</code> or <code>"from.end"</code>). See details.</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_facet_scale">facet_scale</code></td>
<td>
<p>Specifies if y-scale in faceted plot should be free
(<code>"free_y"</code> is default) or <code>"fixed"</code></p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqiplot_+3A_...">...</code></td>
<td>
<p>if group is specified additional arguments of <code><a href="ggplot2.html#topic+facet_wrap">ggplot2::facet_wrap</a></code>
such as <code>"labeller"</code> or <code>"strip.position"</code> can be used to change the appearance of the plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sequence index plots have been introduced by
Scherer (2001) and display each sequence as
horizontally stacked bar or line. For a more detailed discussion of this
type of sequence visualization see, for example,
Brzinsky-Fay (2014),
Fasang and Liao (2014),
and Raab and Struffolino (2022).
</p>
<p>The function uses <code><a href="TraMineR.html#topic+seqformat">TraMineR::seqformat</a></code>
to reshape <code>seqdata</code> stored in wide format into a spell/episode format.
Then the data are further reshaped into the long format, i.e. for
every sequence each row in the data represents one specific sequence
position. For example, if we have 5 sequences of length 10, the long file
will have 50 rows. In the case of sequences of unequal length not every
sequence will contribute the same number of rows to the long data.
</p>
<p>The reshaped data are used as input for rendering the index plot using
ggplot2's <code><a href="ggplot2.html#topic+geom_rect">geom_rect</a></code>. <code>ggseqiplot</code> uses
<code><a href="ggplot2.html#topic+geom_rect">geom_rect</a></code> instead of <code><a href="ggplot2.html#topic+geom_tile">geom_tile</a></code>
because this allows for a straight forward implementation of weights.
If weights are specified for <code>seqdata</code> and <code>weighted=TRUE</code>
the sequence height corresponds to its weight.
</p>
<p>If weights and a grouping variable are used, and <code>facet_scale="fixed"</code>
the values of the y-axis are not labeled, because
<code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> reasonably does not allow for varying scales
when the facet scale is fixed.
</p>
<p>When a <code>sortv</code> is specified, the sequences are arranged in the order of
its values. With <code>sortv="from.start"</code> sequence data are sorted
according to the states of the alphabet in ascending order starting with the
first sequence position, drawing on succeeding positions in the case of
ties. Likewise, <code>sortv="from.end"</code> sorts a reversed version of the
sequence data, starting with the final sequence position turning to
preceding positions in case of ties.
</p>
<p>Note that the default aspect ratio of <code>ggseqiplot</code> is different from
<code><a href="TraMineR.html#topic+seqIplot">TraMineR::seqIplot</a></code>. This is most obvious
when <code>border=TRUE</code>. You can change the ratio either by adding code to
<code>ggseqiplot</code> or by specifying the ratio when saving the code with
<code><a href="ggplot2.html#topic+ggsave">ggsave</a></code>.
</p>


<h3>Value</h3>

<p>A sequence index plot. If stored as object the resulting list object
also contains the data (spell format) used for rendering the plot.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Brzinsky-Fay C (2014).
&ldquo;Graphical Representation of Transitions and Sequences.&rdquo;
In Blanchard P, Bühlmann F, Gauthier J (eds.), <em>Advances in Sequence Analysis: Theory, Method, Applications</em>,  Life Course Research and Social Policies, 265&ndash;284.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-04969-4_14">doi:10.1007/978-3-319-04969-4_14</a>.<br /><br /> Fasang AE, Liao TF (2014).
&ldquo;Visualizing Sequences in the Social Sciences: Relative Frequency Sequence Plots.&rdquo;
<em>Sociological Methods &amp; Research</em>, <b>43</b>(4), 643&ndash;676.
<a href="https://doi.org/10.1177/0049124113506563">doi:10.1177/0049124113506563</a>.<br /><br /> Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Raab M, Struffolino E (2022).
<em>Sequence Analysis</em>, volume 190 of <em>Quantitative Applications in the Social Sciences</em>.
SAGE, Thousand Oaks, CA.
<a href="https://sa-book.github.io/">https://sa-book.github.io/</a>.<br /><br /> Scherer S (2001).
&ldquo;Early Career Patterns: A Comparison of Great Britain and West Germany.&rdquo;
<em>European Sociological Review</em>, <b>17</b>(2), 119&ndash;144.
<a href="https://doi.org/10.1093/esr/17.2.119">doi:10.1093/esr/17.2.119</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# ex1 using weights
data(ex1)
ex1.seq &lt;- seqdef(ex1, 1:13, weights = ex1$weights)

# sequences sorted by age in 2000 and grouped by sex
# with TraMineR::seqplot
seqIplot(actcal.seq, group = actcal$sex, sortv = actcal$age00)
# with ggseqplot
ggseqiplot(actcal.seq, group = actcal$sex, sortv = actcal$age00)

# sequences of unequal length with missing state, and weights
seqIplot(ex1.seq)
ggseqiplot(ex1.seq)

# ... turn weights off and add border
seqIplot(ex1.seq, weighted = FALSE, border = TRUE)
ggseqiplot(ex1.seq, weighted = FALSE, border = TRUE)

</code></pre>

<hr>
<h2 id='ggseqmsplot'>Modal State Sequence Plot</h2><span id='topic+ggseqmsplot'></span>

<h3>Description</h3>

<p>Function for rendering modal state sequence plot with
<code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016) instead
of base R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code> (Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqmsplot(
  seqdata,
  no.n = FALSE,
  barwidth = NULL,
  group = NULL,
  weighted = TRUE,
  with.missing = FALSE,
  border = FALSE,
  facet_ncol = NULL,
  facet_nrow = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqmsplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_no.n">no.n</code></td>
<td>
<p>specifies if number of (weighted) sequences is shown (default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_barwidth">barwidth</code></td>
<td>
<p>specifies width of bars (default is <code>NULL</code>); valid range: (0, 1]</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_with.missing">with.missing</code></td>
<td>
<p>Specifies if missing states should be considered when computing the state distributions (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqmsplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses <code><a href="TraMineR.html#topic+seqmodst">TraMineR::seqmodst</a></code>
to obtain the modal states and their prevalence. This requires that the
input data (<code>seqdata</code>) are stored as state sequence object (class <code>stslist</code>)
created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.
</p>
<p>The data on the modal states and their prevalences are reshaped to be plotted with
<code><a href="ggplot2.html#topic+geom_bar">ggplot2::geom_bar</a></code>. The data
and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).
</p>


<h3>Value</h3>

<p>A modal state sequence plot. If stored as object the resulting list
object also contains the data (long format) used for rendering the plot
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# modal state sequence plot; grouped by sex
# with TraMineR::seqplot
seqmsplot(actcal.seq, group = actcal$sex)
# with ggseqplot
ggseqmsplot(actcal.seq, group = actcal$sex)
# with ggseqplot and some layout changes
ggseqmsplot(actcal.seq, group = actcal$sex, no.n = TRUE, border = FALSE, facet_nrow = 2)

</code></pre>

<hr>
<h2 id='ggseqmtplot'>Mean time plot</h2><span id='topic+ggseqmtplot'></span>

<h3>Description</h3>

<p>Function for rendering plot displaying the mean time spent in each state of
a state sequence object using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>
(Wickham 2016) instead of base R's
<code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code>
(Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqmtplot(
  seqdata,
  no.n = FALSE,
  group = NULL,
  weighted = TRUE,
  with.missing = FALSE,
  border = FALSE,
  error.bar = NULL,
  error.caption = TRUE,
  facet_scale = "fixed",
  facet_ncol = NULL,
  facet_nrow = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqmtplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_no.n">no.n</code></td>
<td>
<p>specifies if number of (weighted) sequences is shown
(default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_with.missing">with.missing</code></td>
<td>
<p>Specifies if missing states should be considered when
computing the state distributions (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_error.bar">error.bar</code></td>
<td>
<p>allows to add error bars either using the standard
deviation <code>"SD"</code> or the standard error <code>"SE"</code>; default plot is
without error bars</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_error.caption">error.caption</code></td>
<td>
<p>a caption is added if error bars are displayed; this
default behavior can be turned off by setting the argument to  <code>"FALSE"</code></p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_facet_scale">facet_scale</code></td>
<td>
<p>Specifies if y-scale in faceted plot should be
<code>"fixed"</code> (default) or <code>"free_y"</code></p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqmtplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The information on time spent in different states is obtained by an
internal call of <code><a href="TraMineR.html#topic+seqmeant">TraMineR::seqmeant</a></code>. This
requires that the input data (<code>seqdata</code>) are stored as state sequence
object (class <code>stslist</code>) created with the
<code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function. The resulting
output then is prepared to be plotted with
<code><a href="ggplot2.html#topic+geom_bar">ggplot2::geom_bar</a></code>. The data and
specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code>
and the respective functions).
</p>


<h3>Value</h3>

<p>A mean time plot created by using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>.
If stored as object the resulting list object (of class gg and ggplot) also
contains the data used for rendering the plot
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: actcal data set
data(actcal)

# We use only a sample of 300 cases
set.seed(1)
actcal &lt;- actcal[sample(nrow(actcal), 300), ]
actcal.lab &lt;- c("&gt; 37 hours", "19-36 hours", "1-18 hours", "no work")
actcal.seq &lt;- seqdef(actcal, 13:24, labels = actcal.lab)

# modal state sequence plot; grouped by sex
# with TraMineR::seqplot
seqmtplot(actcal.seq, group = actcal$sex)
# with ggseqplot
ggseqmtplot(actcal.seq, group = actcal$sex)
# with ggseqplot using additional arguments and some adjustments
ggseqmtplot(actcal.seq, no.n = TRUE, error.bar = "SE") +
 coord_flip() +
 theme(axis.text.y=element_blank(),
       axis.ticks.y = element_blank(),
       panel.grid.major.y = element_blank(),
       legend.position = "top")

</code></pre>

<hr>
<h2 id='ggseqrfplot'>Relative Frequency Sequence Plot</h2><span id='topic+ggseqrfplot'></span>

<h3>Description</h3>

<p>Function for rendering sequence index plots with <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>
instead of base R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqrfplot">TraMineR::seqrfplot</a></code>. Note that <code>ggseqrfplot</code>
uses <code><a href="patchwork.html#topic+patchwork">patchwork</a></code> to combine the different components of
the plot. The function and the documentation draw heavily from
<code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqrfplot(
  seqdata = NULL,
  diss = NULL,
  k = NULL,
  sortv = "mds",
  weighted = TRUE,
  grp.meth = "prop",
  squared = FALSE,
  pow = NULL,
  seqrfobject = NULL,
  border = FALSE,
  ylab = NULL,
  yaxis = TRUE,
  which.plot = "both",
  quality = TRUE,
  box.color = NULL,
  box.fill = NULL,
  box.alpha = NULL,
  outlier.jitter.height = 0,
  outlier.color = NULL,
  outlier.fill = NULL,
  outlier.shape = 19,
  outlier.size = 1.5,
  outlier.stroke = 0.5,
  outlier.alpha = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqrfplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the
<code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function. <code>seqdata</code> is
ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_diss">diss</code></td>
<td>
<p>pairwise dissimilarities between sequences in <code>seqdata</code>
(see <code><a href="TraMineR.html#topic+seqdist">TraMineR::seqdist</a></code>). <code>diss</code> is
ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_k">k</code></td>
<td>
<p>integer specifying the number of frequency groups. When <code>NULL</code>,
<code>k</code> is set as the minimum between 100 and the sum of weights over 10.
<code>k</code> is ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_sortv">sortv</code></td>
<td>
<p>optional sorting vector of length <code>nrow(diss)</code> that may be
used to compute the frequency groups. If <code>NULL</code>, the original data order
is used. If <code>mds</code> (default), the first MDS factor of <code>diss</code>
(<code>diss^2</code> when <code>squared=TRUE</code>) is used. Ties are randomly ordered.
Also allows for the usage of the string inputs:
<code>"from.start"</code> or <code>"from.end"</code> (see <code><a href="#topic+ggseqiplot">ggseqiplot</a></code>).
<code>sortv</code> is ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in
<code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is
<code>TRUE</code>, i.e. if available weights are used.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_grp.meth">grp.meth</code></td>
<td>
<p>Character string. One of <code>"prop"</code>, <code>"first"</code>,
and <code>"random"</code>. Grouping method. See details. <code>grp.meth</code> is ignored
if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_squared">squared</code></td>
<td>
<p>Logical. Should medoids (and computation of <code>sortv</code> when
applicable) be based on squared dissimilarities? (default is <code>FALSE</code>).
<code>squared</code> is ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_pow">pow</code></td>
<td>
<p>Dissimilarity power exponent (typically 1 or 2) for computation of
pseudo R2 and F. When <code>NULL</code>, pow is set as 1 when <code>squared = FALSE</code>,
and as 2 otherwise. <code>pow</code> is ignored if <code>seqrfobject</code> is specified.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_seqrfobject">seqrfobject</code></td>
<td>
<p>object of class <code>seqrf</code> generated with
<code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code>. Default is <code>NULL</code>;
either <code>seqrfobject</code> or <code>seqdata</code> and <code>diss</code> have to specified</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars of index plot are plotted with black outline;
default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_ylab">ylab</code></td>
<td>
<p>character string specifying title of y-axis. If <code>NULL</code> axis
title is &quot;Frequency group&quot;</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_yaxis">yaxis</code></td>
<td>
<p>Controls if a y-axis is plotted. When set as <code>TRUE</code>, index
of frequency groups is displayed.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_which.plot">which.plot</code></td>
<td>
<p>character string specifying which components of relative
frequency sequence plot should be displayed. Default is <code>"both"</code>. If set
to <code>"medoids"</code> only the index plot of medoids is shown.
If <code>"diss.to.med"</code> only the box plots of the group-specific distances to
the medoids are shown.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_quality">quality</code></td>
<td>
<p>specifies if representation quality is shown as figure caption;
default is <code>TRUE</code></p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_box.color">box.color</code></td>
<td>
<p>specifies color of boxplot borders; default is &quot;black</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_box.fill">box.fill</code></td>
<td>
<p>specifies fill color of boxplots; default is &quot;white&quot;</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_box.alpha">box.alpha</code></td>
<td>
<p>specifies alpha value of boxplot fill color; default is 1</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_outlier.jitter.height">outlier.jitter.height</code></td>
<td>
<p>if greater than 0 outliers are jittered vertically.
If greater than .375 height is automatically adjusted to be aligned with the box width.</p>
</td></tr>
<tr><td><code id="ggseqrfplot_+3A_outlier.color">outlier.color</code>, <code id="ggseqrfplot_+3A_outlier.fill">outlier.fill</code>, <code id="ggseqrfplot_+3A_outlier.shape">outlier.shape</code>, <code id="ggseqrfplot_+3A_outlier.size">outlier.size</code>, <code id="ggseqrfplot_+3A_outlier.stroke">outlier.stroke</code>, <code id="ggseqrfplot_+3A_outlier.alpha">outlier.alpha</code></td>
<td>
<p>parameters to change the appearance of the outliers. Uses defaults of
<code><a href="ggplot2.html#topic+geom_boxplot">ggplot2::geom_boxplot</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function renders relative frequency sequence plots using either an internal
call of <code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code> or by using an object of
class <code>"seqrf"</code> generated with <code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code>.
</p>
<p>For further details on the technicalities we refer to the excellent documentation
of <code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code>. A detailed account of
relative frequency index plot can be found in the original contribution by
Fasang and Liao (2014).
</p>
<p><code>ggseqrfplot</code> renders the medoid sequences extracted by
<code><a href="TraMineR.html#topic+seqrf">TraMineR::seqrf</a></code> with an internal call of
<code>ggseqiplot</code>. For the box plot depicting the distances to the medoids
<code>ggseqrfplot</code> uses <code><a href="ggplot2.html#topic+geom_boxplot">geom_boxplot</a></code> and
<code><a href="ggplot2.html#topic+geom_jitter">geom_jitter</a></code>. The latter is used for plotting the outliers.
</p>
<p>Note that <code>ggseqrfplot</code> renders in the box plots analogous to the those
produced by <code><a href="TraMineR.html#topic+seqrfplot">TraMineR::seqrfplot</a></code>. Actually,
the box plots produced with <code><a href="TraMineR.html#topic+seqrfplot">TraMineR::seqrfplot</a></code>
and  <code><a href="ggplot2.html#topic+geom_boxplot">ggplot2::geom_boxplot</a></code>
might slightly differ due to differences in the underlying computations of
<code><a href="grDevices.html#topic+boxplot.stats">grDevices::boxplot.stats</a></code> and
<code><a href="ggplot2.html#topic+stat_boxplot">ggplot2::stat_boxplot</a></code>.
</p>
<p>Note that <code>ggseqrfplot</code> uses <code><a href="patchwork.html#topic+patchwork">patchwork</a></code> to combine
the different components of the plot. If you want to adjust the appearance of
the composed plot, for instance by changing the plot theme, you should consult
the documentation material of <code><a href="patchwork.html#topic+patchwork">patchwork</a></code>.
</p>
<p>At this point <code>ggseqrfplot</code> does not support a grouping option. For
plotting multiple groups, I recommend to produce group specific seqrfobjects or
plots and to arrange them in a common plot using <code><a href="patchwork.html#topic+patchwork">patchwork</a></code>.
See Example 6 in the vignette for further details:
<code>vignette("ggseqplot", package = "ggseqplot")</code>
</p>


<h3>Value</h3>

<p>A relative frequency sequence plot using <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Fasang AE, Liao TF (2014).
&ldquo;Visualizing Sequences in the Social Sciences: Relative Frequency Sequence Plots.&rdquo;
<em>Sociological Methods &amp; Research</em>, <b>43</b>(4), 643&ndash;676.
<a href="https://doi.org/10.1177/0049124113506563">doi:10.1177/0049124113506563</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load additional library for fine-tuning the plots
library(patchwork)

# From TraMineR::seqprf
# Defining a sequence object with the data in columns 10 to 25
# (family status from age 15 to 30) in the biofam data set
data(biofam)
biofam.lab &lt;- c("Parent", "Left", "Married", "Left+Marr",
  "Child", "Left+Child", "Left+Marr+Child", "Divorced")

# Here, we use only 100 cases selected such that all elements
# of the alphabet be present.
# (More cases and a larger k would be necessary to get a meaningful example.)
biofam.seq &lt;- seqdef(biofam[501:600, 10:25], labels=biofam.lab,
                     weights=biofam[501:600,"wp00tbgs"])
diss &lt;- seqdist(biofam.seq, method = "LCS")


# Using 12 groups and default MDS sorting
# and original method by Fasang and Liao (2014)

# ... with TraMineR::seqrfplot (weights have to be turned off)
seqrfplot(biofam.seq, weighted = FALSE, diss = diss, k = 12,
          grp.meth="first", which.plot = "both")

# ... with ggseqrfplot
ggseqrfplot(biofam.seq, weighted = FALSE, diss = diss, k = 12, grp.meth="first")

# Arrange sequences by a user specified sorting variable:
# time spent in parental home; has ties
parentTime &lt;- seqistatd(biofam.seq)[, 1]
b.srf &lt;- seqrf(biofam.seq, diss=diss, k=12, sortv=parentTime)
# ... with ggseqrfplot (and some extra annotation using patchwork)
ggseqrfplot(seqrfobject = b.srf) +
  plot_annotation(title = "Sorted by time spent in parental home",
                  theme = theme(plot.title = element_text(hjust = 0.5, size = 18)))
</code></pre>

<hr>
<h2 id='ggseqrplot'>Representative Sequence plot</h2><span id='topic+ggseqrplot'></span>

<h3>Description</h3>

<p>Function for rendering representative sequence plots with
<code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016) instead of base
R's <code><a href="base.html#topic+plot">plot</a></code> function that is used by
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code> (Gabadinho et al. 2011).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqrplot(
  seqdata,
  diss,
  group = NULL,
  criterion = "density",
  coverage = 0.25,
  nrep = NULL,
  pradius = 0.1,
  dmax = NULL,
  border = FALSE,
  proportional = TRUE,
  weighted = TRUE,
  stats = TRUE,
  colored.stats = NULL,
  facet_ncol = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqrplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_diss">diss</code></td>
<td>
<p>pairwise dissimilarities between sequences in <code>seqdata</code> (see <code>TraMineR::seqdist</code>)</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_criterion">criterion</code></td>
<td>
<p>the representativeness criterion for sorting the candidate list. One of <code>"freq"</code> (sequence
frequency), <code>"density"</code> (neighborhood density), <code>"mscore"</code> (mean state frequency), <code>"dist"</code>
(centrality) and <code>"prob"</code> (sequence likelihood). See details.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_coverage">coverage</code></td>
<td>
<p>coverage threshold, i.e., minimum proportion of sequences that should have a representative in their
neighborhood (neighborhood radius is defined by <code>pradius</code>).</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_nrep">nrep</code></td>
<td>
<p>number of representative sequences. If <code>NULL</code> (default), the size of the representative set is
controlled by <code>coverage</code>.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_pradius">pradius</code></td>
<td>
<p>neighborhood
radius as a percentage of the maximum (theoretical)
distance <code>dmax</code>. Defaults to 0.1 (10%). Sequence <code class="reqn">y</code> is
redundant to sequence <code class="reqn">x</code> when it is in the neighborhood of <code class="reqn">x</code>, i.e., within a distance
<code>pradius*dmax</code> from <code class="reqn">x</code>.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_dmax">dmax</code></td>
<td>
<p>maximum theoretical distance. The <code>dmax</code> value is used to derive the neighborhood radius as <code>pradius*dmax</code>. If <code>NULL</code>, the value of <code>dmax</code> is derived from the dissimilarity matrix.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_border">border</code></td>
<td>
<p>if <code>TRUE</code> bars are plotted with black outline; default is <code>FALSE</code> (also accepts <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_proportional">proportional</code></td>
<td>
<p>if <code>TRUE</code> (default), the sequence heights are
displayed proportional to the number of represented sequences</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_stats">stats</code></td>
<td>
<p>if <code>TRUE</code> (default), mean discrepancy in each subset
defined by all sequences attributed to one representative sequence and the
mean distance to this representative sequence are displayed.</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_colored.stats">colored.stats</code></td>
<td>
<p>specifies if representatives in stats plot should be
color coded; only recommended if number of representatives is small;
if set to <code>NULL</code> (default) colors are used if n rep. &lt;= 10;
use <code>TRUE</code> or <code>FALSE</code> to change manually</p>
</td></tr>
<tr><td><code id="ggseqrplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>specifies the number of columns in the plot (relevant if !is.null(group))</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The representative sequence plot displays a set of distinct sequences as sequence index plot.
The set of representative sequences is extracted from the sequence data by an internal call of
<code><a href="TraMineR.html#topic+seqrep">TraMineR::seqrep</a></code> according to the criteria listed in the
arguments section above.
</p>
<p>The extracted sequences are plotted by a call of <code><a href="#topic+ggseqiplot">ggseqiplot</a></code> which uses
<code><a href="ggplot2.html#topic+geom_rect">ggplot2::geom_rect</a></code> to render the sequences. If <code>stats = TRUE</code> the
index plots are complemented by information on the &quot;quality&quot; of the representative sequences.
For further details on representative sequence plots see Gabadinho et al. (2011)
and the documentation of <code><a href="TraMineR.html#topic+plot.stslist.rep">TraMineR::plot.stslist.rep</a></code>,
<code><a href="TraMineR.html#topic+seqplot">TraMineR::seqplot</a></code>, and <code><a href="TraMineR.html#topic+seqrep">TraMineR::seqrep</a></code>.
</p>
<p>Note that <code>ggseqrplot</code> uses <code><a href="patchwork.html#topic+patchwork">patchwork</a></code> to combine the different components
of the plot. If you want to adjust the appearance of the composed plot, for instance by changing the
plot theme, you should consult the documentation material of <code><a href="patchwork.html#topic+patchwork">patchwork</a></code>.
</p>


<h3>Value</h3>

<p>A representative sequence plot using <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Gabadinho A, Ritschard G, Studer M, Müller NS (2011).
&ldquo;Extracting and Rendering Representative Sequences.&rdquo;
In Fred A, Dietz JLG, Liu K, Filipe J (eds.), <em>Knowledge Discovery, Knowlege Engineering and Knowledge Management</em>, volume 128, 94&ndash;106.
Springer, Berlin, Heidelberg.
<a href="https://doi.org/10.1007/978-3-642-19032-2_7">doi:10.1007/978-3-642-19032-2_7</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use examples from TraMineR
library(TraMineR)
# Defining a sequence object with the data in columns 10 to 25
# (family status from age 15 to 30) in the biofam data set
data(biofam)
# Use sample of 300 cases
set.seed(123)
biofam &lt;- biofam[sample(nrow(biofam),150),]
biofam.lab &lt;- c("Parent", "Left", "Married", "Left+Marr",
"Child", "Left+Child", "Left+Marr+Child", "Divorced")
biofam.seq &lt;- seqdef(biofam, 10:25, labels=biofam.lab)

# Computing the distance matrix
biofam.dhd &lt;- seqdist(biofam.seq, method="DHD")

# Representative sequence  plot (using defaults)
# ... with TraMineR::seqplot
seqrplot(biofam.seq, diss = biofam.dhd)

# ... with ggseqrplot
ggseqrplot(biofam.seq, diss = biofam.dhd)
</code></pre>

<hr>
<h2 id='ggseqtrplot'>Sequence Transition Rate Plot</h2><span id='topic+ggseqtrplot'></span>

<h3>Description</h3>

<p>Function for plotting transition rate matrix of sequence states internally
computed by <code><a href="TraMineR.html#topic+seqtrate">TraMineR::seqtrate</a></code> (Gabadinho et al. 2011).
Plot is generated using <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code> (Wickham 2016).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggseqtrplot(
  seqdata,
  dss = TRUE,
  group = NULL,
  no.n = FALSE,
  weighted = TRUE,
  with.missing = FALSE,
  labsize = NULL,
  axislabs = "labels",
  x_n.dodge = 1,
  facet_ncol = NULL,
  facet_nrow = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggseqtrplot_+3A_seqdata">seqdata</code></td>
<td>
<p>State sequence object (class <code>stslist</code>) created with the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_dss">dss</code></td>
<td>
<p>specifies if transition rates are computed for STS or DSS (default) sequences</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_group">group</code></td>
<td>
<p>A vector of the same length as the sequence data indicating group membership. When not NULL, a distinct plot is generated for each level of group.</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_no.n">no.n</code></td>
<td>
<p>specifies if number of (weighted) sequences is shown in grouped (faceted) graph</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_weighted">weighted</code></td>
<td>
<p>Controls if weights (specified in <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code>) should be used. Default is <code>TRUE</code>, i.e. if available weights are used</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_with.missing">with.missing</code></td>
<td>
<p>Specifies if missing state should be considered when computing the transition rates (default is <code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_labsize">labsize</code></td>
<td>
<p>Specifies the font size of the labels within the tiles (if not specified ggplot2's default is used)</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_axislabs">axislabs</code></td>
<td>
<p>specifies if sequence object's long &quot;labels&quot; (default) or the state names from its &quot;alphabet&quot; attribute should be used.</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_x_n.dodge">x_n.dodge</code></td>
<td>
<p>allows to print the labels of the x-axis in multiple rows to avoid overlapping.</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_facet_ncol">facet_ncol</code></td>
<td>
<p>Number of columns in faceted (i.e. grouped) plot</p>
</td></tr>
<tr><td><code id="ggseqtrplot_+3A_facet_nrow">facet_nrow</code></td>
<td>
<p>Number of rows in faceted (i.e. grouped) plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The transition rates are obtained by an internal call of
<code><a href="TraMineR.html#topic+seqtrate">TraMineR::seqtrate</a></code>.
This requires that the input data (<code>seqdata</code>)
are stored as state sequence object (class <code>stslist</code>) created with
the <code><a href="TraMineR.html#topic+seqdef">TraMineR::seqdef</a></code> function.
As STS based transition rates tend to be dominated by high values on the diagonal, it might be
worthwhile to examine DSS sequences instead (<code>dss = TRUE</code>)). In this case the resulting
plot shows the transition rates between episodes of distinct states.
</p>
<p>In any case (DSS or STS) the transitions rates are reshaped into a a long data format
to enable plotting with <code><a href="ggplot2.html#topic+ggplot2">ggplot2</a></code>. The resulting output then is
prepared to be plotted with  <code><a href="ggplot2.html#topic+geom_tile">ggplot2::geom_tile</a></code>.
The data and specifications used for rendering the plot can be obtained by storing the
plot as an object. The appearance of the plot can be adjusted just like with
every other ggplot (e.g., by changing the theme or the scale using <code>+</code> and
the respective functions).
</p>


<h3>Value</h3>

<p>A tile plot of transition rates.
</p>


<h3>Author(s)</h3>

<p>Marcel Raab
</p>


<h3>References</h3>

<p>Gabadinho A, Ritschard G, Müller NS, Studer M (2011).
&ldquo;Analyzing and Visualizing State Sequences in R with TraMineR.&rdquo;
<em>Journal of Statistical Software</em>, <b>40</b>(4), 1&ndash;37.
<a href="https://doi.org/10.18637/jss.v040.i04">doi:10.18637/jss.v040.i04</a>.<br /><br /> Wickham H (2016).
<em>ggplot2: Elegant Graphics for Data Analysis</em>,  Use R!, 2nd ed. edition.
Springer, Cham.
<a href="https://doi.org/10.1007/978-3-319-24277-4">doi:10.1007/978-3-319-24277-4</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use example data from TraMineR: biofam data set
data(biofam)

# We use only a sample of 300 cases
set.seed(10)
biofam &lt;- biofam[sample(nrow(biofam),300),]
biofam.lab &lt;- c("Parent", "Left", "Married", "Left+Marr",
                "Child", "Left+Child", "Left+Marr+Child", "Divorced")
biofam.seq &lt;- seqdef(biofam, 10:25, labels=biofam.lab, weights = biofam$wp00tbgs)

# Basic transition rate plot (with adjusted x-axis labels)
ggseqtrplot(biofam.seq, x_n.dodge = 2)

# Transition rate with group variable (with and without weights)
ggseqtrplot(biofam.seq, group=biofam$sex, x_n.dodge = 2)
ggseqtrplot(biofam.seq, group=biofam$sex, x_n.dodge = 2, weighted = FALSE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
