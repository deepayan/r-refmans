<!DOCTYPE html><html><head><title>Help for package osmapiR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {osmapiR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#osmapiR-package'><p>osmapiR: 'OpenStreetMap' API</p></a></li>
<li><a href='#authenticate_osmapi'><p>Authenticate or logout osmapiR</p></a></li>
<li><a href='#osm_api_versions'><p>Available API versions</p></a></li>
<li><a href='#osm_bbox_objects'><p>Retrieve map data by bounding box</p></a></li>
<li><a href='#osm_capabilities'><p>Capabilities of the API</p></a></li>
<li><a href='#osm_close_note'><p>Close or reopen notes</p></a></li>
<li><a href='#osm_comment_changeset_discussion'><p>Comment a changeset</p></a></li>
<li><a href='#osm_create_changeset'><p>Create, update, or close a changeset</p></a></li>
<li><a href='#osm_create_comment_note'><p>Create a new comment in a note</p></a></li>
<li><a href='#osm_create_gpx'><p>Create GPS trace</p></a></li>
<li><a href='#osm_create_note'><p>Create a new note</p></a></li>
<li><a href='#osm_create_object'><p>Create an OSM object</p></a></li>
<li><a href='#osm_delete_gpx'><p>Delete GPS traces</p></a></li>
<li><a href='#osm_delete_note'><p>Delete notes</p></a></li>
<li><a href='#osm_delete_object'><p>Delete an OSM object</p></a></li>
<li><a href='#osm_details_logged_user'><p>Details of the logged-in user</p></a></li>
<li><a href='#osm_diff_upload_changeset'><p>Diff (OsmChange format) upload to a changeset</p></a></li>
<li><a href='#osm_download_changeset'><p>Download a changeset in <code>OsmChange</code> format</p></a></li>
<li><a href='#osm_feed_notes'><p>RSS Feed of notes in a bbox</p></a></li>
<li><a href='#osm_get_changesets'><p>Get changesets</p></a></li>
<li><a href='#osm_get_data_gpx'><p>Download GPS Track Data</p></a></li>
<li><a href='#osm_get_gpx_metadata'><p>Download GPS Track Metadata</p></a></li>
<li><a href='#osm_get_notes'><p>Get notes</p></a></li>
<li><a href='#osm_get_objects'><p>Get OSM objects</p></a></li>
<li><a href='#osm_get_points_gps'><p>Get GPS Points</p></a></li>
<li><a href='#osm_get_preferences_user'><p>Get or set preferences for the logged-in user</p></a></li>
<li><a href='#osm_get_user_details'><p>Details of users</p></a></li>
<li><a href='#osm_hide_comment_changeset_discussion'><p>Hide or unhide a changeset comment</p></a></li>
<li><a href='#osm_history_object'><p>Get the history of an object</p></a></li>
<li><a href='#osm_list_gpxs'><p>List user's GPX traces</p></a></li>
<li><a href='#osm_permissions'><p>Retrieving permissions</p></a></li>
<li><a href='#osm_query_changesets'><p>Query changesets</p></a></li>
<li><a href='#osm_read_bbox_notes'><p>Retrieve notes by bounding box</p></a></li>
<li><a href='#osm_redaction_object'><p>Redact an object version</p></a></li>
<li><a href='#osm_relations_object'><p>Relations of an object</p></a></li>
<li><a href='#osm_search_notes'><p>Search for notes</p></a></li>
<li><a href='#osm_subscribe_changeset_discussion'><p>Subscribe or unsubscribe to a changeset discussion</p></a></li>
<li><a href='#osm_update_gpx'><p>Update GPS trace</p></a></li>
<li><a href='#osm_update_object'><p>Update an OSM object</p></a></li>
<li><a href='#osm_ways_node'><p>Ways of a node</p></a></li>
<li><a href='#osmapi_objects'><p>osmapi_objects constructor</p></a></li>
<li><a href='#osmchange_create'><p><code>osmchange</code> to create OSM objects</p></a></li>
<li><a href='#osmchange_delete'><p><code>osmchange</code> to delete existing OSM objects</p></a></li>
<li><a href='#osmchange_modify'><p><code>osmchange</code> to modify existing OSM objects</p></a></li>
<li><a href='#set_osmapi_connection'><p>Configure connections from osmapiR</p></a></li>
<li><a href='#tags_list2wide'><p>Change <code>tags</code> from a list column &lt;-&gt; columns for each key in wide format</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>'OpenStreetMap' API</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Joan Maspons &lt;joanmaspons@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Interface to 'OpenStreetMap API' for fetching and saving data
    from/to the 'OpenStreetMap' database
    (<a href="https://wiki.openstreetmap.org/wiki/API_v0.6">https://wiki.openstreetmap.org/wiki/API_v0.6</a>).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jmaspons.github.io/osmapiR/">https://jmaspons.github.io/osmapiR/</a>,
<a href="https://github.com/jmaspons/osmapiR">https://github.com/jmaspons/osmapiR</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jmaspons/osmapiR/issues">https://github.com/jmaspons/osmapiR/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>curl, httr2, xml2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>httptest2, httpuv, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>X-schema.org-keywords:</td>
<td>open street map, openstreetmap, OSM,
openstreetmap-api, osmapi, API</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-27 10:11:16 UTC; joan</td>
</tr>
<tr>
<td>Author:</td>
<td>Joan Maspons <a href="https://orcid.org/0000-0003-2286-8727"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Jon Harmon <a href="https://orcid.org/0000-0003-4781-4346"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [rev]
    (Jon reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/633),
  Carlos Cámara <a href="https://orcid.org/0000-0002-9378-0549"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [rev] (Carles reviewed the package for rOpenSci, see
    https://github.com/ropensci/software-review/issues/633)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-28 14:40:04 UTC</td>
</tr>
</table>
<hr>
<h2 id='osmapiR-package'>osmapiR: 'OpenStreetMap' API</h2><span id='topic+osmapiR'></span><span id='topic+osmapiR-package'></span>

<h3>Description</h3>

<p>Interface to 'OpenStreetMap API' for fetching and saving data from/to the 'OpenStreetMap' database (<a href="https://wiki.openstreetmap.org/wiki/API_v0.6">https://wiki.openstreetmap.org/wiki/API_v0.6</a>).
</p>


<h3>Details</h3>

<p>An R interface to <a href="https://wiki.openstreetmap.org/wiki/API_v0.6">OpenStreetMap API v0.6</a> for fetching and saving raw
geodata from/to the OpenStreetMap database. This package allows to access OSM maps data as well as map notes, GPS
traces, changelogs and users data. To access the OSM map data for purposes other than editing or exploring the
history of the objects see
<a href="https://github.com/jmaspons/osmapiR/blob/main/README.md#related-packages">Related packages</a>.
</p>
<p>You are responsible for following the <a href="https://operations.osmfoundation.org/policies/api/">API Usage Policy</a>.
You can modify the user agent of the requests by setting the option <code>osmapir.user_agent</code>:
</p>
<div class="sourceCode r"><pre>options(osmapir.user_agent = "my new user agent")
</pre></div>
<p>Respect and follow the
<a href="https://wiki.openstreetmap.org/wiki/Editing_Standards_and_Conventions">standards and conventions</a> of the
OpenStreetMap community. If you plan to do automated edits, check the
<a href="https://wiki.openstreetmap.org/wiki/Automated_Edits_code_of_conduct">Automated Edits code of conduct</a>.
</p>


<h3>Overview of the functions</h3>

<p>All function starting with <code style="white-space: pre;">&#8288;osm_*&#8288;</code> include calls to the server.
</p>


<h4>OSM objects</h4>



<h5>Get OSM objects</h5>

<p><code><a href="#topic+osm_bbox_objects">osm_bbox_objects()</a></code>
Retrieve map data by bounding box
</p>
<p><code><a href="#topic+osm_get_objects">osm_get_objects()</a></code>
Get OSM objects
</p>
<p><code><a href="#topic+osm_history_object">osm_history_object()</a></code>
Get the history of an object
</p>
<p><code><a href="#topic+osm_relations_object">osm_relations_object()</a></code>
Relations of an object
</p>
<p><code><a href="#topic+osm_ways_node">osm_ways_node()</a></code>
Ways of a node
</p>
<p><code><a href="#topic+osmapi_objects">osmapi_objects()</a></code>
osmapi_objects
</p>



<h5>Edit OSM objects</h5>

<p><code><a href="#topic+osm_create_object">osm_create_object()</a></code>
Create an OSM object
</p>
<p><code><a href="#topic+osm_delete_object">osm_delete_object()</a></code>
Delete an OSM object
</p>
<p><code><a href="#topic+osm_update_object">osm_update_object()</a></code>
Update an OSM object
</p>




<h4>Changesets</h4>

<p>Every modification of the standard OSM elements has to reference an open changeset. A changeset may contain tags
just like the other elements. A recommended tag for changesets is the key &rdquo;comment=*&rdquo; with a short human readable
description of the changes being made in that changeset. A new changeset can be opened at any time and a changeset
may be referenced from multiple API calls. Because of this it can be closed manually as the server can't know when
one changeset ends and another should begin. To avoid stale open changesets a mechanism is implemented to
automatically close changesets. See <a href="https://wiki.openstreetmap.org/wiki/Changeset">OSM wiki</a> for details.
</p>


<h5>Get changesets</h5>

<p><code><a href="#topic+osm_download_changeset">osm_download_changeset()</a></code>
Download a changeset in OsmChange format
</p>
<p><code><a href="#topic+osm_get_changesets">osm_get_changesets()</a></code>
Get changesets
</p>
<p><code><a href="#topic+osm_query_changesets">osm_query_changesets()</a></code>
Query changesets
</p>



<h5>Edit changeset</h5>

<p><code><a href="#topic+osm_create_changeset">osm_create_changeset()</a></code> <code><a href="#topic+osm_update_changeset">osm_update_changeset()</a></code> <code><a href="#topic+osm_close_changeset">osm_close_changeset()</a></code>
Create, update, or close a changeset
</p>
<p><code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code>
Diff (OsmChange format) upload to a changeset
</p>



<h5>Changeset's discussion&quot;</h5>

<p><code><a href="#topic+osm_comment_changeset_discussion">osm_comment_changeset_discussion()</a></code>
Comment a changeset
</p>
<p><code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion()</a></code> <code><a href="#topic+osm_unhide_comment_changeset_discussion">osm_unhide_comment_changeset_discussion()</a></code>
Hide or unhide a changeset comment
</p>
<p><code><a href="#topic+osm_subscribe_changeset_discussion">osm_subscribe_changeset_discussion()</a></code> <code><a href="#topic+osm_unsubscribe_changeset_discussion">osm_unsubscribe_changeset_discussion()</a></code>
Subscribe or unsubscribe to a changeset discussion
</p>




<h4>Map notes</h4>

<p>This functions provides access to the <a href="https://wiki.openstreetmap.org/wiki/Notes">notes</a> feature, which allows users
to add geo-referenced textual \&quot;post-it\&quot; notes.
</p>


<h5>Get map notes</h5>

<p><code><a href="#topic+osm_feed_notes">osm_feed_notes()</a></code>
RSS Feed of notes in a bbox
</p>
<p><code><a href="#topic+osm_get_notes">osm_get_notes()</a></code>
Get notes
</p>
<p><code><a href="#topic+osm_read_bbox_notes">osm_read_bbox_notes()</a></code>
Retrieve notes by bounding box
</p>
<p><code><a href="#topic+osm_search_notes">osm_search_notes()</a></code>
Search for notes
</p>



<h5>Edit map notes</h5>

<p>osm_close_note()] <code><a href="#topic+osm_reopen_note">osm_reopen_note()</a></code>
Close or reopen a note
</p>
<p><code><a href="#topic+osm_create_comment_note">osm_create_comment_note()</a></code>
Create a new comment in a note
</p>
<p><code><a href="#topic+osm_create_note">osm_create_note()</a></code>
Create a new note
</p>
<p><code><a href="#topic+osm_delete_note">osm_delete_note()</a></code>
Delete a note
</p>




<h4>GPS' traces</h4>

<p>In violation of the <a href="https://www.topografix.com/GPX/1/1/#type_trksegType">GPX standard</a> when downloading public GPX
traces through the API, all waypoints of non-trackable traces are randomized (or rather sorted by lat/lon) and
delivered as one trackSegment for privacy reasons. Trackable traces are delivered, sorted by descending upload time,
before the waypoints of non-trackable traces.
</p>


<h5>Get GPS traces</h5>

<p><code><a href="#topic+osm_get_data_gpx">osm_get_data_gpx()</a></code>
Download GPS Track Data
</p>
<p><code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata()</a></code>
Download GPS Track Metadata
</p>
<p><code><a href="#topic+osm_get_points_gps">osm_get_points_gps()</a></code>
Get GPS Points
</p>
<p><code><a href="#topic+osm_list_gpxs">osm_list_gpxs()</a></code>
List user's GPX traces
</p>



<h5>Edit GPS traces</h5>

<p><code><a href="#topic+osm_create_gpx">osm_create_gpx()</a></code>
Create GPS trace
</p>
<p><code><a href="#topic+osm_delete_gpx">osm_delete_gpx()</a></code>
Delete GPS trace
</p>
<p><code><a href="#topic+osm_update_gpx">osm_update_gpx()</a></code>
Update GPS trace
</p>




<h4>Users</h4>

<p><code><a href="#topic+osm_details_logged_user">osm_details_logged_user()</a></code>
Details of the logged-in user
</p>
<p><code><a href="#topic+osm_get_preferences_user">osm_get_preferences_user()</a></code> <code><a href="#topic+osm_set_preferences_user">osm_set_preferences_user()</a></code>
Get or set preferences of the logged-in user
</p>
<p><code><a href="#topic+osm_get_user_details">osm_get_user_details()</a></code>
Details of users
</p>



<h4>OsmChange</h4>

<p>The <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a> format can be uploaded to the server. This is
guaranteed to be running in a transaction. So either all the changes are applied or none. To avoid performance
issues when uploading multiple objects, the use of the <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code> is highly recommended.
</p>
<p><code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code>
Diff (OsmChange format) upload to a changeset
</p>
<p><code><a href="#topic+osm_download_changeset">osm_download_changeset()</a></code>
Download a changeset in OsmChange format
</p>
<p><code><a href="#topic+osmchange_create">osmchange_create()</a></code>
osmchange to create OSM objects
</p>
<p><code><a href="#topic+osmchange_delete">osmchange_delete()</a></code>
osmchange to delete existing OSM objects
</p>
<p><code><a href="#topic+osmchange_modify">osmchange_modify()</a></code>
osmchange to modify existing OSM objects
</p>



<h4>Methods</h4>

<p><code><a href="#topic+tags_list2wide">tags_list2wide()</a></code> <code><a href="#topic+tags_wide2list">tags_wide2list()</a></code>
Change tags from a list column &lt;-&gt; columns for each key in wide format
</p>



<h4>API</h4>

<p><code><a href="#topic+set_osmapi_connection">set_osmapi_connection()</a></code> <code><a href="#topic+get_osmapi_url">get_osmapi_url()</a></code> <code><a href="#topic+set_osmapi_url">set_osmapi_url()</a></code>
Configure connections from osmapiR
</p>
<p><code><a href="#topic+authenticate_osmapi">authenticate_osmapi()</a></code> <code><a href="#topic+logout_osmapi">logout_osmapi()</a></code>
Authenticate or logout osmapiR
</p>
<p><code><a href="#topic+osm_api_versions">osm_api_versions()</a></code>
Available API versions
</p>
<p><code><a href="#topic+osm_capabilities">osm_capabilities()</a></code>
Capabilities of the API
</p>
<p><code><a href="#topic+osm_permissions">osm_permissions()</a></code>
Retrieving permissions
</p>



<h4>For moderators</h4>

<p><code><a href="#topic+osm_delete_note">osm_delete_note()</a></code>
Delete a note
</p>
<p><code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion()</a></code> <code><a href="#topic+osm_unhide_comment_changeset_discussion">osm_unhide_comment_changeset_discussion()</a></code>
Hide or unhide a changeset comment
</p>
<p><code><a href="#topic+osm_redaction_object">osm_redaction_object()</a></code>
Redact an object version
</p>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Joan Maspons <a href="mailto:joanmaspons@gmail.com">joanmaspons@gmail.com</a> (<a href="https://orcid.org/0000-0003-2286-8727">ORCID</a>) [copyright holder]
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Jon Harmon (<a href="https://orcid.org/0000-0003-4781-4346">ORCID</a>) (Jon reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/633) [reviewer]
</p>
</li>
<li><p> Carlos Cámara (Carles reviewed the package for rOpenSci, see https://github.com/ropensci/software-review/issues/633) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://jmaspons.github.io/osmapiR/">https://jmaspons.github.io/osmapiR/</a>
</p>
</li>
<li> <p><a href="https://github.com/jmaspons/osmapiR">https://github.com/jmaspons/osmapiR</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/jmaspons/osmapiR/issues">https://github.com/jmaspons/osmapiR/issues</a>
</p>
</li></ul>


<hr>
<h2 id='authenticate_osmapi'>Authenticate or logout osmapiR</h2><span id='topic+authenticate_osmapi'></span><span id='topic+logout_osmapi'></span>

<h3>Description</h3>

<p>Log in/out osmapiR.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>authenticate_osmapi()

logout_osmapi()
</code></pre>


<h3>Details</h3>

<p>All functions that require authentication will trigger the log in if the session is not yet authenticated, so calling
this function is not really needed. Use <code>authenticate_osmapi</code> to sign in before executing scripts that require
authentication to avoid interruptions.
</p>


<h3>Value</h3>

<p>For <code>authenticate_osmapi</code>, print the user and permissions of the connection and return invisibly the display
name of the logged user. <code>logout_osmapi</code> clear the OAuth2 token and can be useful to change user.
</p>


<h3>See Also</h3>

<p>Other API functions: 
<code><a href="#topic+osm_api_versions">osm_api_versions</a>()</code>,
<code><a href="#topic+osm_capabilities">osm_capabilities</a>()</code>,
<code><a href="#topic+osm_permissions">osm_permissions</a>()</code>,
<code><a href="#topic+set_osmapi_connection">set_osmapi_connection</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
authenticate_osmapi()
logout_osmapi()

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_api_versions'>Available API versions</h2><span id='topic+osm_api_versions'></span>

<h3>Description</h3>

<p>Available API versions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_api_versions()
</code></pre>


<h3>Value</h3>

<p>A character vector with the supported versions
</p>


<h3>See Also</h3>

<p>Other API functions: 
<code><a href="#topic+authenticate_osmapi">authenticate_osmapi</a>()</code>,
<code><a href="#topic+osm_capabilities">osm_capabilities</a>()</code>,
<code><a href="#topic+osm_permissions">osm_permissions</a>()</code>,
<code><a href="#topic+set_osmapi_connection">set_osmapi_connection</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>osm_api_versions()
</code></pre>

<hr>
<h2 id='osm_bbox_objects'>Retrieve map data by bounding box</h2><span id='topic+osm_bbox_objects'></span>

<h3>Description</h3>

<p>The following command returns:
</p>

<ul>
<li><p> All nodes that are inside a given bounding box and any relations that reference them.
</p>
</li>
<li><p> All ways that reference at least one node that is inside a given bounding box, any relations that reference them
[the ways], and any nodes outside the bounding box that the ways may reference.
</p>
</li>
<li><p> All relations that reference one of the nodes, ways or relations included due to the above rules. (Does &rdquo;'not&rdquo;'
apply recursively, see explanation below.)
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>osm_bbox_objects(bbox, format = c("R", "xml", "json"), tags_in_columns = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_bbox_objects_+3A_bbox">bbox</code></td>
<td>
<p>Coordinates for the area to retrieve the map data from (<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>).</p>
</td></tr>
<tr><td><code id="osm_bbox_objects_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_bbox_objects_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the objects are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each OSM object with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that, while this command returns those relations that reference the aforementioned nodes and ways, the reverse
is not true: it does not (necessarily) return all of the nodes and ways that are referenced by these relations. This
prevents unreasonably-large result sets. For example, imagine the case where:
</p>

<ul>
<li><p> There is a relation named &quot;England&quot; that references every node in England.
</p>
</li>
<li><p> The nodes, ways, and relations are retrieved for a bounding box that covers a small portion of England.
While the result would include the nodes, ways, and relations as specified by the rules for the command, including
the &quot;England&quot; relation, it would (fortuitously) <strong>not</strong> include <strong>every</strong> node and way in England. If desired, the
nodes and ways referenced by the &quot;England&quot; relation could be retrieved by their respective IDs.
</p>
</li></ul>

<p>Also note that ways which intersect the bounding box but have no nodes within the bounding box will not be returned.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM object per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>. If <code>format = "json"</code>,
returns a list with a json structure following the <a href="https://wiki.openstreetmap.org/wiki/OSM_JSON">OSM_JSON format</a>.
</p>


<h3>Note</h3>

<p>For downloading data for purposes other than editing or exploring the history of the objects, perhaps is better to
use the Overpass API. A similar function to download OSM objects using Overpass, is implemented in the
<span class="pkg">osmdata</span> function <code>opq()</code>.
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_get_objects">osm_get_objects</a>()</code>,
<code><a href="#topic+osm_history_object">osm_history_object</a>()</code>,
<code><a href="#topic+osm_relations_object">osm_relations_object</a>()</code>,
<code><a href="#topic+osm_ways_node">osm_ways_node</a>()</code>,
<code><a href="#topic+osmapi_objects">osmapi_objects</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>map_data &lt;- osm_bbox_objects(bbox = c(1.8366775, 41.8336843, 1.8379971, 41.8344537))
## bbox as a character value also works (bbox = "1.8366775,41.8336843,1.8379971,41.8344537").
map_data
</code></pre>

<hr>
<h2 id='osm_capabilities'>Capabilities of the API</h2><span id='topic+osm_capabilities'></span>

<h3>Description</h3>

<p>Provide information about the capabilities and limitations of the current API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_capabilities()
</code></pre>


<h3>Details</h3>

<p>API:
</p>

<ul>
<li> <p><code>version</code> <code>minimum</code> and <code>maximum</code> are the API call versions that the server will accept.
</p>
</li>
<li> <p><code>area</code> <code>maximum</code> is the maximum area in square degrees that can be queried by API calls.
</p>
</li>
<li> <p><code>tracepoints</code> <code>per_page</code> is the maximum number of points in a single GPS trace. (Possibly incorrect)
</p>
</li>
<li> <p><code>waynodes</code> <code>maximum</code> is the maximum number of nodes that a way may contain.
</p>
</li>
<li> <p><code>relationmember</code> <code>maximum</code> is the maximum number of members that a relation may contain.
</p>
</li>
<li> <p><code>changesets</code> <code>maximum_elements</code> is the maximum number of combined nodes, ways and relations that can be contained
in a changeset.
</p>
</li>
<li> <p><code>changesets</code> <code>default_query_limit</code> and <code>maximum_query_limit</code> are the default and maximum values of the limit
parameter of <code><a href="#topic+osm_query_changesets">osm_query_changesets()</a></code>.
</p>
</li>
<li> <p><code>notes</code> <code>default_query_limit</code> and <code>maximum_query_limit</code> are the default and maximum values of the limit parameter
of notes bounding box queries (<code><a href="#topic+osm_read_bbox_notes">osm_read_bbox_notes()</a></code>) and search (<code><a href="#topic+osm_search_notes">osm_search_notes()</a></code>).
</p>
</li>
<li><p> The <code>status</code> element returns either <em>online</em>, <em>readonly</em> or <em>offline</em> for each of the database, API and GPX
API. The <code>database</code> field is informational, and the <code>API</code>/<code>GPX-API</code> fields indicate whether a client should expect
read and write requests to work (<em>online</em>), only read requests to work (<em>readonly</em>) or no requests to work
(<em>offline</em>).
</p>
</li></ul>

<p>Policy:
</p>

<ul>
<li><p> Imagery blacklist lists all aerial and map sources, which are not permitted for OSM usage due to copyright. Editors
must not show these resources as background layer.
</p>
</li></ul>



<h3>Value</h3>

<p>A list with the API capabilities and policies.
</p>


<h3>See Also</h3>

<p>Other API functions: 
<code><a href="#topic+authenticate_osmapi">authenticate_osmapi</a>()</code>,
<code><a href="#topic+osm_api_versions">osm_api_versions</a>()</code>,
<code><a href="#topic+osm_permissions">osm_permissions</a>()</code>,
<code><a href="#topic+set_osmapi_connection">set_osmapi_connection</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>osm_capabilities()
</code></pre>

<hr>
<h2 id='osm_close_note'>Close or reopen notes</h2><span id='topic+osm_close_note'></span><span id='topic+osm_reopen_note'></span>

<h3>Description</h3>

<p>Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_close_note(note_id)

osm_reopen_note(note_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_close_note_+3A_note_id">note_id</code></td>
<td>
<p>Note ids represented by a numeric or character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the closed map notes (same format as <code><a href="#topic+osm_get_notes">osm_get_notes()</a></code> with <code>format = "R"</code>).
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>osm_close_note()</code>: Close notes as fixed.
</p>
</li>
<li> <p><code>osm_reopen_note()</code>: Reopen closed notes.
</p>
</li></ul>


<h3>See Also</h3>

<p>Other edit notes' functions: 
<code><a href="#topic+osm_create_comment_note">osm_create_comment_note</a>()</code>,
<code><a href="#topic+osm_create_note">osm_create_note</a>()</code>,
<code><a href="#topic+osm_delete_note">osm_delete_note</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server
note &lt;- osm_create_note(lat = 41.38373, lon = 2.18233, text = "Testing osmapiR")
closed_note &lt;- osm_close_note(note$id)
closed_note
reopened_note &lt;- osm_reopen_note(note$id)
reopened_note
closed_note &lt;- osm_close_note(note$id) # leave it closed

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_comment_changeset_discussion'>Comment a changeset</h2><span id='topic+osm_comment_changeset_discussion'></span>

<h3>Description</h3>

<p>Add a comment to a changeset and subscribe to the discussion. The changeset must be closed. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_comment_changeset_discussion(changeset_id, comment)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_comment_changeset_discussion_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The id of the changeset to comment represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_comment_changeset_discussion_+3A_comment">comment</code></td>
<td>
<p>The text of the comment to post.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the changeset (same format as <code><a href="#topic+osm_get_changesets">osm_get_changesets()</a></code> with <code>format = "R"</code>).
</p>


<h3>See Also</h3>

<p>Other changeset discussion's functions: 
<code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion</a>()</code>,
<code><a href="#topic+osm_subscribe_changeset_discussion">osm_subscribe_changeset_discussion</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server
changeset &lt;- osm_get_changesets(300626)
updated_changeset &lt;- osm_comment_changeset_discussion(
  changeset_id = changeset$id,
  comment = "A new comment to test osmapiR"
)
updated_changeset

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_create_changeset'>Create, update, or close a changeset</h2><span id='topic+osm_create_changeset'></span><span id='topic+osm_update_changeset'></span><span id='topic+osm_close_changeset'></span>

<h3>Description</h3>

<p>Create, update, or close a changeset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_create_changeset(
  comment,
  ...,
  created_by = paste("osmapiR", getOption("osmapir.osmapir_version")),
  verbose = FALSE
)

osm_update_changeset(
  changeset_id,
  comment,
  ...,
  created_by = paste("osmapiR", getOption("osmapir.osmapir_version")),
  verbose = FALSE
)

osm_close_changeset(changeset_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_create_changeset_+3A_comment">comment</code></td>
<td>
<p>Tag comment is mandatory.</p>
</td></tr>
<tr><td><code id="osm_create_changeset_+3A_...">...</code></td>
<td>
<p>Arbitrary tags to add to the changeset as named parameters (key = &quot;value&quot;).</p>
</td></tr>
<tr><td><code id="osm_create_changeset_+3A_created_by">created_by</code></td>
<td>
<p>Tag with the client data. By default, <code style="white-space: pre;">&#8288;osmapiR x.y.z&#8288;</code>.</p>
</td></tr>
<tr><td><code id="osm_create_changeset_+3A_verbose">verbose</code></td>
<td>
<p>If <code>TRUE</code>, print the tags of the new changeset.</p>
</td></tr>
<tr><td><code id="osm_create_changeset_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The id of the changeset to update. The user issuing this API call has to be the same that created
the changeset.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://wiki.openstreetmap.org/wiki/Changeset">https://wiki.openstreetmap.org/wiki/Changeset</a> for details and the most common changeset's tags.
</p>
<p>When updating a changeset, unchanged tags have to be repeated in order to not be deleted.
</p>


<h3>Value</h3>

<p>The ID of the newly created changeset or a <code>data.frame</code> inheriting <code>osmapi_changesets</code> with the details of
the updated changeset.
</p>
<p>Nothing is returned upon successful closing of a changeset.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>osm_create_changeset()</code>: Open a new changeset for editing.
</p>
</li>
<li> <p><code>osm_update_changeset()</code>: Update the tags of an open changeset.
</p>
</li>
<li> <p><code>osm_close_changeset()</code>: Close a changeset. A changeset may already have been closed without the owner
issuing this API call. In this case an error code is returned.
</p>
</li></ul>


<h3>See Also</h3>

<p>Other edit changeset's functions: 
<code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server

chset_id &lt;- osm_create_changeset(
  comment = "Describe the changeset",
  source = "GPS;survey",
  hashtags = "#testing;#osmapiR"
)

chaset &lt;- osm_read_changeset(changeset_id = chset_id)
chaset

upd_chaset &lt;- osm_update_changeset(
  changeset_id = chset_id,
  comment = "Improved description of the changeset",
  hashtags = "#testing;#osmapiR"
)
upd_chaset

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_create_comment_note'>Create a new comment in a note</h2><span id='topic+osm_create_comment_note'></span>

<h3>Description</h3>

<p>Add a new comment to an existing note. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_create_comment_note(note_id, text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_create_comment_note_+3A_note_id">note_id</code></td>
<td>
<p>Note id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_create_comment_note_+3A_text">text</code></td>
<td>
<p>The comment as arbitrary text.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the map note and the new comment (same format as <code><a href="#topic+osm_get_notes">osm_get_notes()</a></code> with
<code>format = "R"</code>).
</p>


<h3>See Also</h3>

<p>Other edit notes' functions: 
<code><a href="#topic+osm_close_note">osm_close_note</a>()</code>,
<code><a href="#topic+osm_create_note">osm_create_note</a>()</code>,
<code><a href="#topic+osm_delete_note">osm_delete_note</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server
note &lt;- osm_get_notes(53726)
updated_note &lt;- osm_create_comment_note(note$id, text = "A new comment to the note")
updated_note

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_create_gpx'>Create GPS trace</h2><span id='topic+osm_create_gpx'></span>

<h3>Description</h3>

<p>Use this to upload a GPX file or archive of GPX files. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_create_gpx(
  file,
  description,
  tags,
  visibility = c("private", "public", "trackable", "identifiable")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_create_gpx_+3A_file">file</code></td>
<td>
<p>The GPX file path containing the track points.</p>
</td></tr>
<tr><td><code id="osm_create_gpx_+3A_description">description</code></td>
<td>
<p>The trace description. Cannot be empty.</p>
</td></tr>
<tr><td><code id="osm_create_gpx_+3A_tags">tags</code></td>
<td>
<p>A string containing tags for the trace. Can be empty.</p>
</td></tr>
<tr><td><code id="osm_create_gpx_+3A_visibility">visibility</code></td>
<td>
<p>One of the following: <code>private</code>, <code>public</code>, <code>trackable</code>, <code>identifiable</code>. For explanations see
<a href="https://www.openstreetmap.org/traces/mine">OSM trace upload page</a> or
<a href="https://wiki.openstreetmap.org/wiki/Visibility_of_GPS_traces">Visibility of GPS traces</a>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that for successful processing, the file must contain trackpoints (<code style="white-space: pre;">&#8288;&lt;trkpt&gt;&#8288;</code>), not only waypoints, and the
trackpoints must have a valid timestamp. Since the file is processed asynchronously, the call will complete
successfully even if the file cannot be processed. The file may also be a .tar, .tar.gz or .zip containing multiple
gpx files, although it will appear as a single entry in the upload log.
</p>


<h3>Value</h3>

<p>A number representing the ID of the new gpx.
</p>


<h3>See Also</h3>

<p>Other edit GPS traces' functions: 
<code><a href="#topic+osm_delete_gpx">osm_delete_gpx</a>()</code>,
<code><a href="#topic+osm_update_gpx">osm_update_gpx</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_gps_traces", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_create_note'>Create a new note</h2><span id='topic+osm_create_note'></span>

<h3>Description</h3>

<p>Create a new note
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_create_note(lat, lon, text, authenticate = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_create_note_+3A_lat">lat</code></td>
<td>
<p>Specifies the latitude in decimal degrees of the note.</p>
</td></tr>
<tr><td><code id="osm_create_note_+3A_lon">lon</code></td>
<td>
<p>Specifies the longitude in decimal degrees of the note.</p>
</td></tr>
<tr><td><code id="osm_create_note_+3A_text">text</code></td>
<td>
<p>A text field with arbitrary text containing the note.</p>
</td></tr>
<tr><td><code id="osm_create_note_+3A_authenticate">authenticate</code></td>
<td>
<p>If <code>TRUE</code> (default), the note is authored by the logged user. Otherwise, anonymous note.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the request is made as an authenticated user, the note is associated to that user account. If the OAuth access
token used does not have the <code>allow_write_notes</code> permission, it is created as an anonymous note instead.
</p>


<h3>Value</h3>

<p>Returns a data frame with the map note (same format as <code><a href="#topic+osm_get_notes">osm_get_notes()</a></code> with <code>format = "R"</code>).
</p>


<h3>See Also</h3>

<p>Other edit notes' functions: 
<code><a href="#topic+osm_close_note">osm_close_note</a>()</code>,
<code><a href="#topic+osm_create_comment_note">osm_create_comment_note</a>()</code>,
<code><a href="#topic+osm_delete_note">osm_delete_note</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server
new_note &lt;- osm_create_note(lat = 41.38373, lon = 2.18233, text = "Testing osmapiR")
new_note

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_create_object'>Create an OSM object</h2><span id='topic+osm_create_object'></span>

<h3>Description</h3>

<p>Creates a new element in an open changeset as specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_create_object(x, changeset_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_create_object_+3A_x">x</code></td>
<td>
<p>The new object data. Can be the path to an xml file, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> or a data.frame inheriting
or following the structure of an <code>osmapi_objects</code> object.</p>
</td></tr>
<tr><td><code id="osm_create_object_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The ID of an open changeset where to create the object. If missing, <code>x</code> should define the
changeset ID, otherwise it will be overwritten with <code>changeset_id</code>. Ignored if <code>x</code> is a path.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>x</code> is a data.frame, the columns <code>type</code>, <code>changeset</code>, <code>tags</code> must be present + column <code>members</code> for ways and
relations + <code>lat</code> and <code>lon</code> for nodes. For the xml format, see the
<a href="https://wiki.openstreetmap.org/wiki/API_v0.6#Create:_PUT_/api/0.6/%5Bnode%7Cway%7Crelation%5D/create">OSM wiki</a>.
</p>
<p>If multiple elements are provided only the first is created. The rest is discarded.
</p>


<h3>Value</h3>

<p>The ID of the newly created OSM object.
</p>


<h3>Note</h3>


<ul>
<li><p> This updates the bounding box of the changeset.
</p>
</li>
<li><p> The <code>role</code> attribute for relations is optional. An empty string is the default.
</p>
</li>
<li><p> To avoid performance issues when uploading multiple objects, the use of the <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code> is highly
recommended.
</p>
</li>
<li><p> The version of the created object will be 1.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other edit OSM objects' functions: 
<code><a href="#topic+osm_delete_object">osm_delete_object</a>()</code>,
<code><a href="#topic+osm_update_object">osm_update_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_osm", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_delete_gpx'>Delete GPS traces</h2><span id='topic+osm_delete_gpx'></span>

<h3>Description</h3>

<p>Use this to delete GPX files. Only usable by the owner account. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_delete_gpx(gpx_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_delete_gpx_+3A_gpx_id">gpx_id</code></td>
<td>
<p>The track ids represented by a numeric or a character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>NULL</code> invisibly.
</p>


<h3>See Also</h3>

<p>Other edit GPS traces' functions: 
<code><a href="#topic+osm_create_gpx">osm_create_gpx</a>()</code>,
<code><a href="#topic+osm_update_gpx">osm_update_gpx</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_gps_traces", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_delete_note'>Delete notes</h2><span id='topic+osm_delete_note'></span>

<h3>Description</h3>

<p>Hide (delete) notes. This request needs to be done as an authenticated user with moderator role.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_delete_note(note_id, text)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_delete_note_+3A_note_id">note_id</code></td>
<td>
<p>Note ids represented by a numeric or a character vector.</p>
</td></tr>
<tr><td><code id="osm_delete_note_+3A_text">text</code></td>
<td>
<p>A non-mandatory comment as text.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Use <code><a href="#topic+osm_reopen_note">osm_reopen_note()</a></code> to make the note visible again.
</p>


<h3>Value</h3>

<p>Returns a data frame with the hided map notes (same format as <code><a href="#topic+osm_get_notes">osm_get_notes()</a></code> with <code>format = "R"</code>).
</p>


<h3>See Also</h3>

<p>Other edit notes' functions: 
<code><a href="#topic+osm_close_note">osm_close_note</a>()</code>,
<code><a href="#topic+osm_create_comment_note">osm_create_comment_note</a>()</code>,
<code><a href="#topic+osm_create_note">osm_create_note</a>()</code>
</p>
<p>Other functions for moderators: 
<code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion</a>()</code>,
<code><a href="#topic+osm_redaction_object">osm_redaction_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
set_osmapi_connection("testing") # use the testing server
note &lt;- osm_create_note(lat = "40.7327375", lon = "0.1702526", text = "Test note to delete.")
del_note &lt;- osm_delete_note(note_id = note$id, text = "Hide note")
del_note

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_delete_object'>Delete an OSM object</h2><span id='topic+osm_delete_object'></span>

<h3>Description</h3>

<p>Expects a valid XML representation of the element to be deleted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_delete_object(x, changeset_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_delete_object_+3A_x">x</code></td>
<td>
<p>The object data. Can be the path of an xml file, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> or a data.frame inheriting
or following the structure of an <code>osmapi_objects</code> object.</p>
</td></tr>
<tr><td><code id="osm_delete_object_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The ID of an open changeset where to create the object. If missing, <code>x</code> should define the
changeset ID, otherwise it will be overwritten with <code>changeset_id</code>. Ignored if <code>x</code> is a path.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The version must match the version of the element you downloaded and the changeset must match the <code>id</code> of an open
changeset owned by the current authenticated user. It is allowed, but not necessary, to have tags on the element
except for lat/long which are required for nodes, without lat+lon the server gives 400 Bad request.
</p>
<p>If <code>x</code> is a data.frame, the columns <code>type</code>, <code>id</code>, <code>version</code> and <code>changeset</code> must be present + <code>lat</code> and <code>lon</code> for
nodes. For the xml format, see the
<a href="https://wiki.openstreetmap.org/wiki/API_v0.6#Delete:_DELETE_/api/0.6/%5Bnode%7Cway%7Crelation%5D/%23id">OSM wiki</a>.
</p>
<p>If multiple elements are provided only the first is deleted. The rest is discarded.
</p>


<h3>Value</h3>

<p>Returns the new version number of the object.
</p>


<h3>Note</h3>


<ul>
<li><p> This updates the bounding box of the changeset.
</p>
</li>
<li><p> To avoid performance issues when deleting multiple objects, the use of the <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code> is highly
recommended. This is also the only way to ensure that multiple objects are updated in a single database
transaction.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other edit OSM objects' functions: 
<code><a href="#topic+osm_create_object">osm_create_object</a>()</code>,
<code><a href="#topic+osm_update_object">osm_update_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_osm", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_details_logged_user'>Details of the logged-in user</h2><span id='topic+osm_details_logged_user'></span>

<h3>Description</h3>

<p>You can get the home location, the display name of the user and other details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_details_logged_user(format = c("R", "xml", "json"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_details_logged_user_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a list with the user details.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;osm version="0.6" generator="OpenStreetMap server"&gt;
	&lt;user display_name="Max Muster" account_created="2006-07-21T19:28:26Z" id="1234"&gt;
		&lt;contributor-terms agreed="true" pd="true"/&gt;
		&lt;img href="https://www.openstreetmap.org/attachments/users/images/000/000/1234/original/someLongURLOrOther.JPG"/&gt;
		&lt;roles&gt;&lt;/roles&gt;
		&lt;changesets count="4182"/&gt;
		&lt;traces count="513"/&gt;
		&lt;blocks&gt;
			&lt;received count="0" active="0"/&gt;
		&lt;/blocks&gt;
		&lt;home lat="49.4733718952806" lon="8.89285988577866" zoom="3"/&gt;
		&lt;description&gt;The description of your profile&lt;/description&gt;
		&lt;languages&gt;
			&lt;lang&gt;de-DE&lt;/lang&gt;
			&lt;lang&gt;de&lt;/lang&gt;
			&lt;lang&gt;en-US&lt;/lang&gt;
			&lt;lang&gt;en&lt;/lang&gt;
		&lt;/languages&gt;
		&lt;messages&gt;
			&lt;received count="1" unread="0"/&gt;
			&lt;sent count="0"/&gt;
		&lt;/messages&gt;
	&lt;/user&gt;
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<div class="sourceCode json"><pre>{
 "version": "0.6",
 "generator": "OpenStreetMap server",
 "user": {
  "id": 1234,
  "display_name": "Max Muster",
  "account_created": "2006-07-21T19:28:26Z",
  "description": "The description of your profile",
  "contributor_terms": {"agreed": True, "pd": True},
  "img": {"href": "https://www.openstreetmap.org/attachments/users/images/000/000/1234/original/someLongURLOrOther.JPG"},
  "roles": [],
  "changesets": {"count": 4182},
  "traces": {"count": 513},
  "blocks": {"received": {"count": 0, "active": 0}},
  "home": {"lat": 49.4733718952806, "lon": 8.89285988577866, "zoom": 3},
  "languages": ["de-DE", "de", "en-US", "en"],
  "messages": {"received": {"count": 1, "unread": 0},
  "sent": {"count": 0}}
 }
}
</pre></div>



<h3>See Also</h3>

<p>Other users' functions: 
<code><a href="#topic+osm_get_preferences_user">osm_get_preferences_user</a>()</code>,
<code><a href="#topic+osm_get_user_details">osm_get_user_details</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
usr_details &lt;- osm_details_logged_user()
usr_details

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_diff_upload_changeset'>Diff (OsmChange format) upload to a changeset</h2><span id='topic+osm_diff_upload_changeset'></span>

<h3>Description</h3>

<p>With this API call files in the <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a> format can be uploaded to
the server. This is guaranteed to be running in a transaction. So either all the changes are applied or none.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_diff_upload_changeset(changeset_id, osmcha, format = c("R", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_diff_upload_changeset_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The ID of the changeset this diff belongs to. The user issuing this API call has to be the same
that created the changeset.</p>
</td></tr>
<tr><td><code id="osm_diff_upload_changeset_+3A_osmcha">osmcha</code></td>
<td>
<p>The OsmChange data. Can be the path of an OsmChange file, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> or an
<code>osmapi_OsmChange</code> object (see <code style="white-space: pre;">&#8288;osmchange_*()&#8288;</code> functions).</p>
</td></tr>
<tr><td><code id="osm_diff_upload_changeset_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default) or <code>"xml"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To upload an OSC file it has to conform to the <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a>
specification with the following differences:
</p>

<ul>
<li><p> each element must carry a <code>changeset</code> and a <code>version</code> attribute (xml) / column (data.frame), except when you are
creating an element where the version is not required as the server sets that for you. The <code>changeset</code> must be the
same as the changeset ID being uploaded to.
</p>
</li>
<li><p> a <code style="white-space: pre;">&#8288;&lt;delete&gt;&#8288;</code> block in the OsmChange document may have an <code style="white-space: pre;">&#8288;if-unused&#8288;</code> attribute (the value of which is ignored)
(<code>action_type</code> column with <code style="white-space: pre;">&#8288;delete if-unused&#8288;</code> for data.frames). If this attribute is present, then the delete
operation(s) in this block are conditional and will only be executed if the object to be deleted is not used by
another object. Without the <code style="white-space: pre;">&#8288;if-unused&#8288;</code>, such a situation would lead to an error, and the whole diff upload would
fail. Setting the attribute will also cause deletions of already deleted objects to not generate an error.
</p>
</li>
<li> <p><a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a> documents generally have <code>user</code> and <code>uid</code> attributes
on each element. These are not required in the document uploaded to the API.
</p>
</li></ul>



<h3>Value</h3>

<p>If a diff is successfully applied and <code>format = "R"</code>, it returns a data frame with one row for each edited object.
For <code>format = "xml"</code>, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> is returned in the following
format:
</p>
<div class="sourceCode xml"><pre>&lt;diffResult generator="OpenStreetMap Server" version="0.6"&gt;
	&lt;node|way|relation old_id="#" new_id="#" new_version="#"/&gt;
	...
&lt;/diffResult&gt;
</pre></div>
<p>with one element for every object in the upload.
</p>
<p>Note that this can be counter-intuitive when the same element has appeared multiple times in the input then it will
appear multiple times in the output.</p>

<table>
<tr>
 <td style="text-align: left;">
   <strong>Attribute</strong> </td><td style="text-align: center;"> <strong>create</strong> </td><td style="text-align: center;"> <strong>modify</strong> </td><td style="text-align: center;"> <strong>delete</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   <strong>old_id</strong> </td><td style="text-align: center;"> same as uploaded element </td><td style="text-align: center;"> same as uploaded element </td><td style="text-align: center;"> same as uploaded element </td>
</tr>
<tr>
 <td style="text-align: left;">
   <strong>new_id</strong> </td><td style="text-align: center;"> new ID </td><td style="text-align: center;"> new ID ''or'' same as uploaded </td><td style="text-align: center;"> not present </td>
</tr>
<tr>
 <td style="text-align: left;">
   <strong>new_version</strong> </td><td style="text-align: center;"> new version </td><td style="text-align: center;"> new version </td><td style="text-align: center;"> not present </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Note</h3>


<ul>
<li><p> Processing stops at the first error, so if there are multiple conflicts in one diff upload, only the first problem
is reported.
</p>
</li>
<li><p> Refer to <code><a href="#topic+osm_capabilities">osm_capabilities()</a></code> &ndash;&gt; <code>changesets$maximum_elements</code> for the maximum number of changes permitted in a
changeset.
</p>
</li>
<li><p> There is currently no limit in the diff size on the Rails port. CGImap limits diff size to 50MB (uncompressed
size).
</p>
</li>
<li><p> Forward referencing of placeholder ids is not permitted and will be rejected by the API.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other edit changeset's functions: 
<code><a href="#topic+osm_create_changeset">osm_create_changeset</a>()</code>
</p>
<p>Other OsmChange's functions: 
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osmchange_create">osmchange_create</a>()</code>,
<code><a href="#topic+osmchange_delete">osmchange_delete</a>()</code>,
<code><a href="#topic+osmchange_modify">osmchange_modify</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_osm", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_download_changeset'>Download a changeset in <code>OsmChange</code> format</h2><span id='topic+osm_download_changeset'></span>

<h3>Description</h3>

<p>Returns the <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a> document describing all changes associated with the changeset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_download_changeset(changeset_id, format = c("R", "osc", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_download_changeset_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The id of the changeset represented by a numeric or a character value for which the OsmChange is
requested.</p>
</td></tr>
<tr><td><code id="osm_download_changeset_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default) or <code>"osc"</code> (<code>"xml"</code> is a synonym for <code>"osc"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> The result of calling this may change as long as the changeset is open.
</p>
</li>
<li><p> The elements in the OsmChange are sorted by timestamp and version number.
</p>
</li>
<li><p> There is <code><a href="#topic+osm_get_changesets">osm_get_changesets()</a></code> to get only information about the changeset itself.
</p>
</li></ul>



<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one row for each edit action in the changeset. If <code>format = "osc"</code>,
returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> in the <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange</a> format.
</p>


<h3>See Also</h3>

<p>Other get changesets' functions: 
<code><a href="#topic+osm_get_changesets">osm_get_changesets</a>()</code>,
<code><a href="#topic+osm_query_changesets">osm_query_changesets</a>()</code>
</p>
<p>Other OsmChange's functions: 
<code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset</a>()</code>,
<code><a href="#topic+osmchange_create">osmchange_create</a>()</code>,
<code><a href="#topic+osmchange_delete">osmchange_delete</a>()</code>,
<code><a href="#topic+osmchange_modify">osmchange_modify</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chaset &lt;- osm_download_changeset(changeset_id = 137003062)
chaset

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_feed_notes'>RSS Feed of notes in a bbox</h2><span id='topic+osm_feed_notes'></span>

<h3>Description</h3>

<p>RSS Feed of notes in a bbox
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_feed_notes(bbox)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_feed_notes_+3A_bbox">bbox</code></td>
<td>
<p>Coordinates for the area to retrieve the notes from (<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>). Floating point numbers in
degrees, expressing a valid bounding box, not larger than the configured size limit, 25 square degrees (see
<code>osm_capabilities()$note_area</code> and
<a href="https://github.com/openstreetmap/openstreetmap-website/blob/master/config/settings.yml#L27">this line in settings</a>
for the current value), not overlapping the dateline.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> in the <code>RSS</code> format.
</p>


<h3>See Also</h3>

<p>Other get notes' functions: 
<code><a href="#topic+osm_get_notes">osm_get_notes</a>()</code>,
<code><a href="#topic+osm_read_bbox_notes">osm_read_bbox_notes</a>()</code>,
<code><a href="#topic+osm_search_notes">osm_search_notes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>feed_notes &lt;- osm_feed_notes(bbox = c(0.8205414, 40.6686604, 0.8857727, 40.7493377))
## bbox as a character value also works (bbox = "0.8205414,40.6686604,0.8857727,40.7493377").
feed_notes
</code></pre>

<hr>
<h2 id='osm_get_changesets'>Get changesets</h2><span id='topic+osm_get_changesets'></span>

<h3>Description</h3>

<p>Returns the changesets with the given <code>changeset_id</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_changesets(
  changeset_id,
  include_discussion = FALSE,
  format = c("R", "xml", "json"),
  tags_in_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_changesets_+3A_changeset_id">changeset_id</code></td>
<td>
<p>A vector with ids of changesets to retrieve represented by a numeric or a character values.</p>
</td></tr>
<tr><td><code id="osm_get_changesets_+3A_include_discussion">include_discussion</code></td>
<td>
<p>Indicates whether the result should contain the changeset discussion or not.</p>
</td></tr>
<tr><td><code id="osm_get_changesets_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_get_changesets_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the changesets are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each changeset with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> The <code>uid</code> might not be available for changesets auto generated by the API v0.5 to API v0.6 transition
</p>
</li>
<li><p> The bounding box attributes will be missing for an empty changeset.
</p>
</li>
<li><p> The changeset bounding box is a rectangle that contains the bounding boxes of all objects changed in this
changeset. It is not necessarily the smallest possible rectangle that does so.
</p>
</li>
<li><p> This API call only returns information about the changeset itself but not the actual changes made to elements in
this changeset. To access this information use <code><a href="#topic+osm_download_changeset">osm_download_changeset()</a></code>.
</p>
</li></ul>



<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM changeset per row.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;osm&gt;
	&lt;changeset id="10" created_at="2008-11-08T19:07:39+01:00" open="true" user="fred" uid="123" min_lon="7.0191821" min_lat="49.2785426" max_lon="7.0197485" max_lat="49.2793101" comments_count="3" changes_count="10"&gt;
		&lt;tag k="created_by" v="JOSM 1.61"/&gt;
		&lt;tag k="comment" v="Just adding some streetnames"/&gt;
		...
		&lt;discussion&gt;
			&lt;comment date="2015-01-01T18:56:48Z" uid="1841" user="metaodi"&gt;
				&lt;text&gt;Did you verify those street names?&lt;/text&gt;
			&lt;/comment&gt;
			&lt;comment date="2015-01-01T18:58:03Z" uid="123" user="fred"&gt;
				&lt;text&gt;sure!&lt;/text&gt;
			&lt;/comment&gt;
			...
		&lt;/discussion&gt;
	&lt;/changeset&gt;
	&lt;changeset&gt;
	  ...
	&lt;/changeset&gt;
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "version": "0.6",
 "elements": [
  {"type": "changeset",
   "id": 10,
   "created_at": "2005-05-01T16:09:37Z",
   "closed_at": "2005-05-01T17:16:44Z",
   "open": False,
   "user": "Petter Reinholdtsen",
   "uid": 24,
   "minlat": 59.9513092,
   "minlon": 10.7719727,
   "maxlat": 59.9561501,
   "maxlon": 10.7994537,
   "comments_count": 1,
   "changes_count": 10,
   "discussion": [{"date": "2022-03-22T20:58:30Z", "uid": 15079200, "user": "Ethan White of Cheriton", "text": "wow no one have said anything here 3/22/2022\n"}]
  }, ...]
}
</pre></div>



<h3>See Also</h3>

<p>Other get changesets' functions: 
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osm_query_changesets">osm_query_changesets</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chaset &lt;- osm_get_changesets(changeset_id = 137595351, include_discussion = TRUE)
chaset
chaset$discussion

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_data_gpx'>Download GPS Track Data</h2><span id='topic+osm_get_data_gpx'></span>

<h3>Description</h3>

<p>Use this to download the full GPX file. Available without authentication if the file is marked public. Otherwise only
usable by the owner account and requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_data_gpx(gpx_id, format)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_data_gpx_+3A_gpx_id">gpx_id</code></td>
<td>
<p>The track id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_get_data_gpx_+3A_format">format</code></td>
<td>
<p>Format of the output. If missing (default), the response will be the exact file that was uploaded.
If <code>"R"</code>, a <code>data.frame</code>.
If <code>"gpx"</code>, the response will always be a GPX format file.
If <code>"xml"</code>, a <code>"xml"</code> file in an undocumented format.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If missing <code>format</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the original file data. If <code>format = "R"</code>, returns a
data frame with one point per row. If <code>format = "gpx"</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> in the GPX format. If
<code>format = "xml"</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> in an undocumented format.
</p>


<h3>Note</h3>

<p>If you request refers to a multi-file archive the response when you force gpx or xml format will consist of a
non-standard simple concatenation of the files.
</p>


<h3>See Also</h3>

<p>Other get GPS' functions: 
<code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata</a>()</code>,
<code><a href="#topic+osm_get_points_gps">osm_get_points_gps</a>()</code>,
<code><a href="#topic+osm_list_gpxs">osm_list_gpxs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
trk_data &lt;- osm_get_data_gpx(gpx_id = 3498170, format = "R")
trk_data

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_gpx_metadata'>Download GPS Track Metadata</h2><span id='topic+osm_get_gpx_metadata'></span>

<h3>Description</h3>

<p>Use this to access the metadata about GPX files. Available without authentication if the file is marked public.
Otherwise only usable by the owner account and requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_gpx_metadata(gpx_id, format = c("R", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_gpx_metadata_+3A_gpx_id">gpx_id</code></td>
<td>
<p>A vector of track ids represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_get_gpx_metadata_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default) or <code>"xml"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one trace per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;osm version="0.6" generator="OpenStreetMap server"&gt;
	&lt;gpx_file id="836619" name="track.gpx" lat="52.0194" lon="8.51807" uid="1234" user="Hartmut Holzgraefe" visibility="public" pending="false" timestamp="2010-10-09T09:24:19Z"&gt;
		&lt;description&gt;PHP upload test&lt;/description&gt;
		&lt;tag&gt;test&lt;/tag&gt;
		&lt;tag&gt;php&lt;/tag&gt;
	&lt;/gpx_file&gt;
	&lt;gpx_file&gt;
	  ...
	&lt;/gpx_file&gt;
&lt;/osm&gt;
</pre></div>


<h3>See Also</h3>

<p>Other get GPS' functions: 
<code><a href="#topic+osm_get_data_gpx">osm_get_data_gpx</a>()</code>,
<code><a href="#topic+osm_get_points_gps">osm_get_points_gps</a>()</code>,
<code><a href="#topic+osm_list_gpxs">osm_list_gpxs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
trk_meta &lt;- osm_get_gpx_metadata(gpx_id = 3498170)
trk_meta

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_notes'>Get notes</h2><span id='topic+osm_get_notes'></span>

<h3>Description</h3>

<p>Returns the existing note with the given ID.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_notes(note_id, format = c("R", "xml", "rss", "json", "gpx"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_notes_+3A_note_id">note_id</code></td>
<td>
<p>Note id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_get_notes_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, <code>"rss"</code>, <code>"json"</code> or <code>"gpx"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one map note per row.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;osm version="0.6" generator="OpenStreetMap server" copyright="OpenStreetMap and contributors" attribution="https://www.openstreetmap.org/copyright" license="https://opendatacommons.org/licenses/odbl/1-0/"&gt;
	&lt;note lon="0.1000000" lat="51.0000000"&gt;
		&lt;id&gt;16659&lt;/id&gt;
		&lt;url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659&lt;/url&gt;
		&lt;comment_url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/comment&lt;/comment_url&gt;
		&lt;close_url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/close&lt;/close_url&gt;
		&lt;date_created&gt;2019-06-15 08:26:04 UTC&lt;/date_created&gt;
		&lt;status&gt;open&lt;/status&gt;
		&lt;comments&gt;
			&lt;comment&gt;
				&lt;date&gt;2019-06-15 08:26:04 UTC&lt;/date&gt;
				&lt;uid&gt;1234&lt;/uid&gt;
				&lt;user&gt;userName&lt;/user&gt;
				&lt;user_url&gt;https://master.apis.dev.openstreetmap.org/user/userName&lt;/user_url&gt;
				&lt;action&gt;opened&lt;/action&gt;
				&lt;text&gt;ThisIsANote&lt;/text&gt;
				&lt;html&gt;&amp;lt;p&amp;gt;ThisIsANote&amp;lt;/p&amp;gt;&lt;/html&gt;
			&lt;/comment&gt;
			...
		&lt;/comments&gt;
	&lt;/note&gt;
	...
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "type": "FeatureCollection",
 "features": [
  {
   "type": "Feature",
   "geometry": {"type": "Point", "coordinates": [0.1000000, 51.0000000]},
   "properties": {
    "id": 16659,
    "url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659.json",
    "comment_url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/comment.json",
    "close_url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/close.json",
    "date_created": "2019-06-15 08:26:04 UTC",
    "status": "open",
    "comments": [
     {"date": "2019-06-15 08:26:04 UTC", "uid": 1234, "user": "userName", "user_url": "https://master.apis.dev.openstreetmap.org/user/userName", "action": "opened", "text": "ThisIsANote", "html": "&lt;p&gt;ThisIsANote&lt;/p&gt;"},
     ...
    ]
   }
  }
 ]
}
</pre></div>



<h4><code>format = "rss"</code> &amp; <code>format = "gpx"</code></h4>

<p>For <code>format</code> in <code>"rss"</code>, and <code>"gpx"</code>, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the corresponding format.
</p>



<h3>See Also</h3>

<p>Other get notes' functions: 
<code><a href="#topic+osm_feed_notes">osm_feed_notes</a>()</code>,
<code><a href="#topic+osm_read_bbox_notes">osm_read_bbox_notes</a>()</code>,
<code><a href="#topic+osm_search_notes">osm_search_notes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
note &lt;- osm_get_notes(note_id = "2067786")
note

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_objects'>Get OSM objects</h2><span id='topic+osm_get_objects'></span>

<h3>Description</h3>

<p>Retrieve objects by <code>type</code>, <code>id</code> and <code>version</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_objects(
  osm_type,
  osm_id,
  version,
  full_objects = FALSE,
  format = c("R", "xml", "json"),
  tags_in_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_objects_+3A_osm_type">osm_type</code></td>
<td>
<p>A vector with the type of the objects (<code>"node"</code>, <code>"way"</code> or <code>"relation"</code>). Recycled if it has a
different length than <code>osm_id</code>.</p>
</td></tr>
<tr><td><code id="osm_get_objects_+3A_osm_id">osm_id</code></td>
<td>
<p>Object ids represented by a numeric or a character vector.</p>
</td></tr>
<tr><td><code id="osm_get_objects_+3A_version">version</code></td>
<td>
<p>An optional vector with the version number for each object. If missing, the last version will be
retrieved. Recycled if it has different length than <code>osm_id</code>.</p>
</td></tr>
<tr><td><code id="osm_get_objects_+3A_full_objects">full_objects</code></td>
<td>
<p>If <code>TRUE</code>, retrieves all other objects referenced by ways or relations. Not compatible with
<code>version</code>.</p>
</td></tr>
<tr><td><code id="osm_get_objects_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_get_objects_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the objects are saved in a single list column <code style="white-space: pre;">&#8288;tags``` containing a &#8288;</code>data.frame<code style="white-space: pre;">&#8288;for each OSM object with the keys and values. If&#8288;</code>TRUE<code style="white-space: pre;">&#8288;, add a column for each key. Ignored if &#8288;</code>format != &quot;R&quot;'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>full_objects = TRUE</code> does not support specifying <code>version</code>.
For ways, <code>full_objects = TRUE</code> implies that it will return the way specified plus all nodes referenced by the way.
For a relation, it will return the following:
</p>

<ul>
<li><p> The relation itself
</p>
</li>
<li><p> All nodes, ways, and relations that are members of the relation
</p>
</li>
<li><p> Plus all nodes used by ways from the previous step
</p>
</li>
<li><p> The same recursive logic is not applied to relations. This means: If relation r1 contains way w1 and relation r2,
and w1 contains nodes n1 and n2, and r2 contains node n3, then a &quot;full&quot; request for r1 will give you r1, r2, w1,
n1, and n2. Not n3.
</p>
</li></ul>



<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM object per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>. If <code>format = "json"</code>,
returns a list with a json structure following the <a href="https://wiki.openstreetmap.org/wiki/OSM_JSON">OSM_JSON format</a>.
</p>
<p>Objects are sorted in the same order than <code>osm_id</code> except for <code>full_objects = TRUE</code>, where the nodes comes first,
then ways, and relations at the end as specified by
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>.
</p>


<h3>Note</h3>

<p>For downloading data for purposes other than editing or exploring the history of the objects, perhaps is better to
use the Overpass API. A similar function to download OSM objects by <code>type</code> and <code>id</code> using Overpass, is implemented in
the <span class="pkg">osmdata</span> function <code>opq_osm_id()</code>.
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_bbox_objects">osm_bbox_objects</a>()</code>,
<code><a href="#topic+osm_history_object">osm_history_object</a>()</code>,
<code><a href="#topic+osm_relations_object">osm_relations_object</a>()</code>,
<code><a href="#topic+osm_ways_node">osm_ways_node</a>()</code>,
<code><a href="#topic+osmapi_objects">osmapi_objects</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
obj &lt;- osm_get_objects(
  osm_type = c("node", "way", "way", "relation", "relation", "node"),
  osm_id = c("35308286", "13073736", "235744929", "40581", "341530", "1935675367"),
  version = c(1, 3, 2, 5, 7, 1)
)
obj

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_points_gps'>Get GPS Points</h2><span id='topic+osm_get_points_gps'></span>

<h3>Description</h3>

<p>Use this to retrieve the GPS track points that are inside a given bounding box (formatted in a GPX format).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_points_gps(bbox, page_number = 0, format = c("R", "gpx"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_points_gps_+3A_bbox">bbox</code></td>
<td>
<p>Coordinates for the area to retrieve the notes from (<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>). Floating point numbers in
degrees, expressing a valid bounding box. The maximal width (<code>right - left</code>) and height (<code>top - bottom</code>) of the
bounding box is 0.25 degree.</p>
</td></tr>
<tr><td><code id="osm_get_points_gps_+3A_page_number">page_number</code></td>
<td>
<p>Specifies which groups of 5,000 points, or page, to return. The API call does not return more
than 5,000 points at a time. In order to retrieve all of the points for a bounding box, set <code>page_number = -1</code>.
When this parameter is 0 (zero), the command returns the first 5,000 points; when it is 1, the command returns
points 5,001–10,000, etc. A vector is also valid (e.g. <code>0:2</code> to get the first 3 pages).</p>
</td></tr>
<tr><td><code id="osm_get_points_gps_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default) or <code>"gpx"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a list of data frames with the points for each trace. For public traces, the data frame
include the attributes <code>name</code>, <code>desc</code> and <code>url</code>.
</p>


<h4><code>format = "gpx"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;gpx version="1.0" creator="OpenStreetMap.org" xmlns="http://www.topografix.com/GPX/1/0"&gt;
	&lt;trk&gt;
		&lt;name&gt;20190626.gpx&lt;/name&gt;
		&lt;desc&gt;Footpaths near Blackweir Pond, Epping Forest&lt;/desc&gt;
		&lt;url&gt;https://api.openstreetmap.org/user/John%20Leeming/traces/3031013&lt;/url&gt;
		&lt;trkseg&gt;
			&lt;trkpt lat="51.6616100" lon="0.0534560"&gt;
				&lt;time&gt;2019-06-26T14:27:58Z&lt;/time&gt;
			&lt;/trkpt&gt;
			...
		&lt;/trkseg&gt;
		...
	&lt;/trk&gt;
	...
&lt;/gpx&gt;
</pre></div>

<ul>
<li><p> This response is NOT wrapped in an OSM xml parent element.
</p>
</li>
<li><p> The file format is GPX Version 1.0 which is not the current version. Verify that your tools support it.
</p>
</li></ul>




<h3>Note</h3>

<p>In violation of the <a href="https://www.topografix.com/GPX/1/1/#type_trksegType">GPX standard</a> when downloading public
GPX traces through the API, all waypoints of non-trackable traces are randomized (or rather sorted by lat/lon) and
delivered as one trackSegment for privacy reasons. Trackable traces are delivered, sorted by descending upload
time, before the waypoints of non-trackable traces.
</p>
<p>Private traces without <code>name</code>, <code>desc</code> and <code>url</code> can be separated in different items in the result if they get
split due to server pagination. Public traces are united using matching URL.
</p>


<h3>See Also</h3>

<p>Other get GPS' functions: 
<code><a href="#topic+osm_get_data_gpx">osm_get_data_gpx</a>()</code>,
<code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata</a>()</code>,
<code><a href="#topic+osm_list_gpxs">osm_list_gpxs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pts_gps &lt;- osm_get_points_gps(bbox = c(-0.3667545, 40.2153246, -0.3354263, 40.2364915))
## bbox as a character value also works(bbox = "-0.3667545,40.2153246,-0.3354263,40.2364915").
pts_gps

## get attributes
lapply(pts_gps, function(x) attributes(x)[c("name", "desc", "url")])
</code></pre>

<hr>
<h2 id='osm_get_preferences_user'>Get or set preferences for the logged-in user</h2><span id='topic+osm_get_preferences_user'></span><span id='topic+osm_set_preferences_user'></span>

<h3>Description</h3>

<p>Get or set preferences for the logged-in user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_preferences_user(key, format = c("R", "xml", "json"))

osm_set_preferences_user(key, value, all_prefs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_preferences_user_+3A_key">key</code></td>
<td>
<p>Returns a string with this preference's value. If missing, return all preferences.</p>
</td></tr>
<tr><td><code id="osm_get_preferences_user_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>. Only relevant when <code>key</code> is
missing.</p>
</td></tr>
<tr><td><code id="osm_get_preferences_user_+3A_value">value</code></td>
<td>
<p>A string with the preference value to set for <code>key</code>. If <code>NULL</code>, deletes the <code>key</code> preference.</p>
</td></tr>
<tr><td><code id="osm_get_preferences_user_+3A_all_prefs">all_prefs</code></td>
<td>
<p>A <code>data.frame</code>, <code>xml_document</code> or a json list following the format returned by
<code>osm_get_preferences_user()</code>. Also, a path to an xml file describing the user preferences.
<strong>All</strong> existing preferences are replaced by the newly uploaded set.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The sizes of the key and value are limited to 255 characters.
</p>
<p>The OSM server supports storing arbitrary user preferences. This can be used by editors, for example, to offer the
same configuration wherever the user logs in, instead of a locally-stored configuration. For an overview of
applications using the preferences-API and which key-schemes they use, see
<a href="https://wiki.openstreetmap.org/wiki/Preferences">this wiki page</a>.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with <code>key</code> and <code>value</code> columns of the user preferences.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;osm version="0.6" generator="OpenStreetMap server"&gt;
	&lt;preferences&gt;
		&lt;preference k="somekey" v="somevalue" /&gt;
		...
	&lt;/preferences&gt;
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "version": "0.6",
 "generator": "OpenStreetMap server",
 "preferences": {"somekey": "somevalue, ...}
}
</pre></div>



<h4>Set preferences</h4>

<p>Nothing is returned upon successful setting of user preferences.
</p>



<h3>See Also</h3>

<p>Other users' functions: 
<code><a href="#topic+osm_details_logged_user">osm_details_logged_user</a>()</code>,
<code><a href="#topic+osm_get_user_details">osm_get_user_details</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
prefs_ori &lt;- osm_get_preferences_user()
prefs_ori


osm_set_preferences_user(key = "osmapiR-test", value = "good!")
osm_get_preferences_user(key = "osmapiR-test")

osm_set_preferences_user(key = "osmapiR-test", value = NULL) # Delete pref

## Restore all preferences
osm_set_preferences_user(all_prefs = prefs_ori)

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_get_user_details'>Details of users</h2><span id='topic+osm_get_user_details'></span>

<h3>Description</h3>

<p>Details of users
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_get_user_details(user_id, format = c("R", "xml", "json"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_get_user_details_+3A_user_id">user_id</code></td>
<td>
<p>The ids of the users to retrieve the details for, represented by a numeric or a character value (not
the display names).</p>
</td></tr>
<tr><td><code id="osm_get_user_details_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For users not found, the result is empty. If <code>format = "R"</code>, returns a data frame with one user per row.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;osm version="0.6" generator="OpenStreetMap server"&gt;
	&lt;user id="12023" display_name="jbpbis" account_created="2007-08-16T01:35:56Z"&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;contributor-terms agreed="false"/&gt;
		&lt;img href="http://www.gravatar.com/avatar/c8c86cd15f60ecca66ce2b10cb6b9a00.jpg?s=256&amp;amp;d=http%3A%2F%2Fwww.openstreetmap.org%2Fassets%2Fusers%2Fimages%2Flarge-39c3a9dc4e778311af6b70ddcf447b58.png"/&gt;
		&lt;roles&gt;
		&lt;/roles&gt;
		&lt;changesets count="1"/&gt;
		&lt;traces count="0"/&gt;
		&lt;blocks&gt;
			&lt;received count="0" active="0"/&gt;
		&lt;/blocks&gt;
	&lt;/user&gt;
	&lt;user id="210447" display_name="siebh" account_created="2009-12-20T10:11:42Z"&gt;
		&lt;description&gt;&lt;/description&gt;
		&lt;contributor-terms agreed="true"/&gt;
		&lt;roles&gt;
		&lt;/roles&gt;
		&lt;changesets count="267"/&gt;
		&lt;traces count="1"/&gt;
		&lt;blocks&gt;
			&lt;received count="0" active="0"/&gt;
		&lt;/blocks&gt;
	&lt;/user&gt;
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "version": "0.6",
 "generator": "OpenStreetMap server",
 "users": [
  {"user": {"id": 12023, "display_name": "jbpbis", "account_created": "2007-08-16T01:35:56Z", "description": "", "contributor_terms": {"agreed": False}, "roles": [], "changesets": {"count": 1}, "traces": {"count": 0}, "blocks": {"received": {"count": 0, "active": 0}}}},
  {"user": {"id": 210447, "display_name": "siebh", "account_created": "2009-12-20T10:11:42Z", "description": "", "contributor_terms": {"agreed": True}, "roles": [], "changesets": {"count": 363}, "traces": {"count": 1}, "blocks": {"received": {"count": 0, "active": 0}}}}
 ]
}
</pre></div>



<h3>See Also</h3>

<p>Other users' functions: 
<code><a href="#topic+osm_details_logged_user">osm_details_logged_user</a>()</code>,
<code><a href="#topic+osm_get_preferences_user">osm_get_preferences_user</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
usrs &lt;- osm_get_user_details(user_id = c(1, 24, 44, 45, 46, 48, 49, 50))
usrs

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_hide_comment_changeset_discussion'>Hide or unhide a changeset comment</h2><span id='topic+osm_hide_comment_changeset_discussion'></span><span id='topic+osm_unhide_comment_changeset_discussion'></span>

<h3>Description</h3>

<p>This request needs to be done as an authenticated user with moderator role.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_hide_comment_changeset_discussion(comment_id)

osm_unhide_comment_changeset_discussion(comment_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_hide_comment_changeset_discussion_+3A_comment_id">comment_id</code></td>
<td>
<p>Note that the changeset comment id differs from the changeset id.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the changeset (same format as <code><a href="#topic+osm_get_changesets">osm_get_changesets()</a></code> with <code>format = "R"</code>).
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>osm_hide_comment_changeset_discussion()</code>: Sets visible flag on changeset comment to false.
</p>
</li>
<li> <p><code>osm_unhide_comment_changeset_discussion()</code>: Sets visible flag on changeset comment to true.
</p>
</li></ul>


<h3>See Also</h3>

<p>Other changeset discussion's functions: 
<code><a href="#topic+osm_comment_changeset_discussion">osm_comment_changeset_discussion</a>()</code>,
<code><a href="#topic+osm_subscribe_changeset_discussion">osm_subscribe_changeset_discussion</a>()</code>
</p>
<p>Other functions for moderators: 
<code><a href="#topic+osm_delete_note">osm_delete_note</a>()</code>,
<code><a href="#topic+osm_redaction_object">osm_redaction_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chdis &lt;- osm_get_changesets("265646", include_discussion = TRUE)
hide_com &lt;- osm_hide_comment_changeset_discussion(comment_id = chdis$discussion[[1]]$id[1])
unhide_com &lt;- osm_unhide_comment_changeset_discussion(comment_id = chdis$discussion[[1]]$id[1])

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_history_object'>Get the history of an object</h2><span id='topic+osm_history_object'></span>

<h3>Description</h3>

<p>Retrieves all old versions of an object from OSM.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_history_object(
  osm_type = c("node", "way", "relation"),
  osm_id,
  format = c("R", "xml", "json"),
  tags_in_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_history_object_+3A_osm_type">osm_type</code></td>
<td>
<p>Object type (<code>"node"</code>, <code>"way"</code> or <code>"relation"</code>).</p>
</td></tr>
<tr><td><code id="osm_history_object_+3A_osm_id">osm_id</code></td>
<td>
<p>Object id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_history_object_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_history_object_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the objects are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each OSM object with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with a version of the OSM object per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>. If <code>format = "json"</code>,
returns a list with a json structure following the <a href="https://wiki.openstreetmap.org/wiki/OSM_JSON">OSM_JSON format</a>.
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_bbox_objects">osm_bbox_objects</a>()</code>,
<code><a href="#topic+osm_get_objects">osm_get_objects</a>()</code>,
<code><a href="#topic+osm_relations_object">osm_relations_object</a>()</code>,
<code><a href="#topic+osm_ways_node">osm_ways_node</a>()</code>,
<code><a href="#topic+osmapi_objects">osmapi_objects</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
node &lt;- osm_history_object(osm_type = "node", osm_id = 35308286)
node

way &lt;- osm_history_object(osm_type = "way", osm_id = 13073736L)
way

rel &lt;- osm_history_object(osm_type = "relation", osm_id = "40581")
rel

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_list_gpxs'>List user's GPX traces</h2><span id='topic+osm_list_gpxs'></span>

<h3>Description</h3>

<p>Use this to get a list of GPX traces owned by the authenticated user. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_list_gpxs(format = c("R", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_list_gpxs_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default) or <code>"xml"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one trace per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> similar to <code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata()</a></code>. Example:
</p>
<div class="sourceCode xml"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;osm version="0.6" generator="OpenStreetMap server"&gt;
	&lt;gpx_file id="836619" name="track.gpx" lat="52.0194" lon="8.51807" uid="1234" user="Hartmut Holzgraefe" visibility="public" pending="false" timestamp="2010-10-09T09:24:19Z"&gt;
		&lt;description&gt;PHP upload test&lt;/description&gt;
		&lt;tag&gt;test&lt;/tag&gt;
		&lt;tag&gt;php&lt;/tag&gt;
	&lt;/gpx_file&gt;
	&lt;gpx_file id="836620" name="track.gpx" lat="52.1194" lon="8.61807" uid="1234" user="Hartmut Holzgraefe" visibility="public" pending="false" timestamp="2010-10-09T09:27:31Z"&gt;
		&lt;description&gt;PHP upload test 2&lt;/description&gt;
		&lt;tag&gt;test&lt;/tag&gt;
		&lt;tag&gt;php&lt;/tag&gt;
	&lt;/gpx_file&gt;
&lt;/osm&gt;
</pre></div>


<h3>See Also</h3>

<p>Other get GPS' functions: 
<code><a href="#topic+osm_get_data_gpx">osm_get_data_gpx</a>()</code>,
<code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata</a>()</code>,
<code><a href="#topic+osm_get_points_gps">osm_get_points_gps</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
traces &lt;- osm_list_gpxs()
traces

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_permissions'>Retrieving permissions</h2><span id='topic+osm_permissions'></span>

<h3>Description</h3>

<p>Returns the permissions granted to the current API connection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_permissions(format = c("R", "xml", "json"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_permissions_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently the following permissions can appear in the result, corresponding directly to the ones used in the OAuth
1.0a application definition:
</p>

<ul>
<li><p> allow_read_prefs (read user preferences)
</p>
</li>
<li><p> allow_write_prefs (modify user preferences)
</p>
</li>
<li><p> allow_write_diary (create diary entries, comments and make friends)
</p>
</li>
<li><p> allow_write_api (modify the map)
</p>
</li>
<li><p> allow_read_gpx (read private GPS traces)
</p>
</li>
<li><p> allow_write_gpx (upload GPS traces)
</p>
</li>
<li><p> allow_write_notes (modify notes)
</p>
</li></ul>



<h3>Value</h3>

<p>If the API client is not authorized, an empty list of permissions will be returned. Otherwise, the list will
be based on the granted scopes of the logged user.
</p>


<h3>Note</h3>

<p>For compatibility reasons, all OAuth 2.0 scopes will be prefixed by &quot;allow_&quot;, e.g. scope &quot;read_prefs&quot; will be
shown as permission &quot;allow_read_prefs&quot;.
</p>


<h3>See Also</h3>

<p>Other API functions: 
<code><a href="#topic+authenticate_osmapi">authenticate_osmapi</a>()</code>,
<code><a href="#topic+osm_api_versions">osm_api_versions</a>()</code>,
<code><a href="#topic+osm_capabilities">osm_capabilities</a>()</code>,
<code><a href="#topic+set_osmapi_connection">set_osmapi_connection</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
perms &lt;- osm_permissions()
perms

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_query_changesets'>Query changesets</h2><span id='topic+osm_query_changesets'></span>

<h3>Description</h3>

<p>This is an API method for querying changesets. It supports querying by different criteria.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_query_changesets(
  bbox,
  user,
  time,
  time_2,
  open,
  closed,
  changeset_ids,
  order = c("newest", "oldest"),
  limit = getOption("osmapir.api_capabilities")$api$changesets["default_query_limit"],
  format = c("R", "xml", "json"),
  tags_in_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_query_changesets_+3A_bbox">bbox</code></td>
<td>
<p>Find changesets within the given bounding box coordinates (<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>).</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_user">user</code></td>
<td>
<p>Find changesets by the user with the given user id (numeric) or display name (character).</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_time">time</code></td>
<td>
<p>Find changesets <strong>closed</strong> after this date and time. See details for the valid formats.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_time_2">time_2</code></td>
<td>
<p>find changesets that were <strong>closed</strong> after <code>time</code> and <strong>created</strong> before <code>time_2</code>. In other words, any
changesets that were open <strong>at some time</strong> during the given time range <code>time</code> to <code>time_2</code>.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_open">open</code></td>
<td>
<p>If <code>TRUE</code>, only finds changesets that are still <strong>open</strong> but excludes changesets that are closed or have
reached the element limit for a changeset (10,000 at the moment <code>osm_capabilities()$api$changesets</code>).</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_closed">closed</code></td>
<td>
<p>If <code>TRUE</code>, only finds changesets that are <strong>closed</strong> or have reached the element limit.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_changeset_ids">changeset_ids</code></td>
<td>
<p>Finds changesets with the specified ids.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_order">order</code></td>
<td>
<p>If <code>"newest"</code> (default), sort newest changesets first. If <code>"oldest"</code>, reverse order.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_limit">limit</code></td>
<td>
<p>Specifies the maximum number of changesets returned. 100 as the default value.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_query_changesets_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the changesets are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each changeset with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Where multiple queries are given the result will be those which match all of the requirements. The contents of the
returned document are the changesets and their tags. To get the full set of changes associated with a changeset, use
<code><a href="#topic+osm_download_changeset">osm_download_changeset()</a></code> on each changeset ID individually.
</p>
<p>Modification and extension of the basic queries above may be required to support rollback and other uses we find for
changesets.
</p>
<p>This call returns latest changesets matching criteria. The default ordering is newest first, but you can specify
<code>order = "oldest"</code> to reverse the sort order (see
<a href="https://github.com/openstreetmap/openstreetmap-website/blob/f1c6a87aa137c11d0aff5a4b0e563ac2c2a8f82d/app/controllers/api/changesets_controller.rb#L174">ordered by <code>created_at</code></a>
– see the <a href="https://github.com/openstreetmap/openstreetmap-website/blob/master/app/controllers/api/changesets_controller.rb#L174">current state</a>).
Reverse ordering cannot be combined with <code>time</code>.
</p>
<p>Te valid formats for <code>time</code> and <code>time_2</code> parameters are anything that
<a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/time/rdoc/Time.html#method-c-parse"><code>Time.parse</code> Ruby function</a> will parse.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM changeset per row.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;osm&gt;
	&lt;changeset id="10" created_at="2008-11-08T19:07:39+01:00" open="true" user="fred" uid="123" min_lon="7.0191821" min_lat="49.2785426" max_lon="7.0197485" max_lat="49.2793101" comments_count="3" changes_count="10"&gt;
		&lt;tag k="created_by" v="JOSM 1.61"/&gt;
		&lt;tag k="comment" v="Just adding some streetnames"/&gt;
		...
		&lt;discussion&gt;
			&lt;comment date="2015-01-01T18:56:48Z" uid="1841" user="metaodi"&gt;
				&lt;text&gt;Did you verify those street names?&lt;/text&gt;
			&lt;/comment&gt;
			&lt;comment date="2015-01-01T18:58:03Z" uid="123" user="fred"&gt;
				&lt;text&gt;sure!&lt;/text&gt;
			&lt;/comment&gt;
			...
		&lt;/discussion&gt;
	&lt;/changeset&gt;
	&lt;changeset ...&gt;
	  ...
	&lt;/changeset&gt;
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "version": "0.6",
 "elements": [
  {"type": "changeset",
   "id": 10,
   "created_at": "2005-05-01T16:09:37Z",
   "closed_at": "2005-05-01T17:16:44Z",
   "open": False,
   "user": "Petter Reinholdtsen",
   "uid": 24,
   "minlat": 59.9513092,
   "minlon": 10.7719727,
   "maxlat": 59.9561501,
   "maxlon": 10.7994537,
   "comments_count": 1,
   "changes_count": 10,
   "discussion": [{"date": "2022-03-22T20:58:30Z", "uid": 15079200, "user": "Ethan White of Cheriton", "text": "wow no one have said anything here 3/22/2022\n"}]
  }, ...]
}
</pre></div>



<h3>See Also</h3>

<p>Other get changesets' functions: 
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osm_get_changesets">osm_get_changesets</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
chst_ids &lt;- osm_query_changesets(changeset_ids = c(137627129, 137625624))
chst_ids

chsts &lt;- osm_query_changesets(
  bbox = c(-1.241112, 38.0294955, 8.4203171, 42.9186456),
  user = "Mementomoristultus",
  time = "2023-06-22T02:23:23Z",
  time_2 = "2023-06-22T00:38:20Z"
)
chsts

chsts2 &lt;- osm_query_changesets(
  bbox = c("-9.3015367,41.8073642,-6.7339533,43.790422"),
  user = "Mementomoristultus",
  closed = TRUE
)
chsts2

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_read_bbox_notes'>Retrieve notes by bounding box</h2><span id='topic+osm_read_bbox_notes'></span>

<h3>Description</h3>

<p>Returns the existing notes in the specified bounding box. The notes will be ordered by the date of their last change,
the most recent one will be first.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_read_bbox_notes(
  bbox,
  limit = 100,
  closed = 7,
  format = c("R", "xml", "rss", "json", "gpx")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_read_bbox_notes_+3A_bbox">bbox</code></td>
<td>
<p>Coordinates for the area to retrieve the notes from (<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>). Floating point numbers in
degrees, expressing a valid bounding box, not larger than the configured size limit, 25 square degrees, not
overlapping the dateline.</p>
</td></tr>
<tr><td><code id="osm_read_bbox_notes_+3A_limit">limit</code></td>
<td>
<p>Specifies the number of entries returned at max. A value between 1 and 10000 is valid. Default to 100.</p>
</td></tr>
<tr><td><code id="osm_read_bbox_notes_+3A_closed">closed</code></td>
<td>
<p>Specifies the number of days a note needs to be closed to no longer be returned. A value of 0 means
only open notes are returned. A value of -1 means all notes are returned. Default to 7.</p>
</td></tr>
<tr><td><code id="osm_read_bbox_notes_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, <code>"rss"</code>, <code>"json"</code> or <code>"gpx"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one map note per row.
</p>


<h4><code>format = "xml"</code></h4>

<p>Returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the following format:
</p>
<div class="sourceCode xml"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;osm version="0.6" generator="OpenStreetMap server" copyright="OpenStreetMap and contributors" attribution="https://www.openstreetmap.org/copyright" license="https://opendatacommons.org/licenses/odbl/1-0/"&gt;
	&lt;note lon="0.1000000" lat="51.0000000"&gt;
		&lt;id&gt;16659&lt;/id&gt;
		&lt;url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659&lt;/url&gt;
		&lt;comment_url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/comment&lt;/comment_url&gt;
		&lt;close_url&gt;https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/close&lt;/close_url&gt;
		&lt;date_created&gt;2019-06-15 08:26:04 UTC&lt;/date_created&gt;
		&lt;status&gt;open&lt;/status&gt;
		&lt;comments&gt;
			&lt;comment&gt;
				&lt;date&gt;2019-06-15 08:26:04 UTC&lt;/date&gt;
				&lt;uid&gt;1234&lt;/uid&gt;
				&lt;user&gt;userName&lt;/user&gt;
				&lt;user_url&gt;https://master.apis.dev.openstreetmap.org/user/userName&lt;/user_url&gt;
				&lt;action&gt;opened&lt;/action&gt;
				&lt;text&gt;ThisIsANote&lt;/text&gt;
				&lt;html&gt;&amp;lt;p&amp;gt;ThisIsANote&amp;lt;/p&amp;gt;&lt;/html&gt;
			&lt;/comment&gt;
			...
		&lt;/comments&gt;
	&lt;/note&gt;
	...
&lt;/osm&gt;
</pre></div>



<h4><code>format = "json"</code></h4>

<p>Returns a list with the following json structure:
</p>
<div class="sourceCode json"><pre>{
 "type": "FeatureCollection",
 "features": [
  {
   "type": "Feature",
   "geometry": {"type": "Point", "coordinates": [0.1000000, 51.0000000]},
   "properties": {
    "id": 16659,
    "url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659.json",
    "comment_url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/comment.json",
    "close_url": "https://master.apis.dev.openstreetmap.org/api/0.6/notes/16659/close.json",
    "date_created": "2019-06-15 08:26:04 UTC",
    "status": "open",
    "comments": [
     {"date": "2019-06-15 08:26:04 UTC", "uid": 1234, "user": "userName", "user_url": "https://master.apis.dev.openstreetmap.org/user/userName", "action": "opened", "text": "ThisIsANote", "html": "&lt;p&gt;ThisIsANote&lt;/p&gt;"},
     ...
    ]
   }
  }
 ]
}
</pre></div>



<h4><code>format = "rss"</code> &amp; <code>format = "gpx"</code></h4>

<p>For <code>format</code> in <code>"rss"</code>, and <code>"gpx"</code>, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the corresponding format.
</p>



<h3>Note</h3>

<p>The comment properties (<code>uid</code>, <code>user</code>, <code>user_url</code>) will be omitted if the comment was anonymous.
</p>


<h3>See Also</h3>

<p>Other get notes' functions: 
<code><a href="#topic+osm_feed_notes">osm_feed_notes</a>()</code>,
<code><a href="#topic+osm_get_notes">osm_get_notes</a>()</code>,
<code><a href="#topic+osm_search_notes">osm_search_notes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>notes &lt;- osm_read_bbox_notes(bbox = c(3.7854767, 39.7837403, 4.3347931, 40.1011851), limit = 10)
## bbox as a character value also works (bbox = "3.7854767,39.7837403,4.3347931,40.1011851").
notes
</code></pre>

<hr>
<h2 id='osm_redaction_object'>Redact an object version</h2><span id='topic+osm_redaction_object'></span>

<h3>Description</h3>

<p>Used by the <a href="https://wiki.openstreetmap.org/wiki/Data_working_group">Data Working Group</a> to hide old versions of
elements containing data privacy or copyright infringements. Only permitted for OSM accounts with the moderator role
(DWG and server admins).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_redaction_object(
  osm_type = c("node", "way", "relation"),
  osm_id,
  version,
  redaction_id
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_redaction_object_+3A_osm_type">osm_type</code></td>
<td>
<p>Object type (<code>"node"</code>, <code>"way"</code> or <code>"relation"</code>).</p>
</td></tr>
<tr><td><code id="osm_redaction_object_+3A_osm_id">osm_id</code></td>
<td>
<p>Object id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_redaction_object_+3A_version">version</code></td>
<td>
<p>Version of the object to redact.</p>
</td></tr>
<tr><td><code id="osm_redaction_object_+3A_redaction_id">redaction_id</code></td>
<td>
<p>If missing, then this is an unredact operation. If a redaction ID was specified, then set this
element to be redacted in that redaction.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>redaction_id</code> is listed on <a href="https://www.openstreetmap.org/redactions">https://www.openstreetmap.org/redactions</a>. More information can be found in
<a href="https://git.openstreetmap.org/rails.git/blob/HEAD:/app/controllers/redactions_controller.rb">the source</a>.
</p>


<h3>Value</h3>

<p>Nothing is returned upon successful redaction or unredaction of an object.
</p>


<h3>See Also</h3>

<p>Other functions for moderators: 
<code><a href="#topic+osm_delete_note">osm_delete_note</a>()</code>,
<code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## WARNING: this example will edit the OSM (testing) DB with your user!
# You will need a user with moderator role in the server to use `osm_redaction_object()`
set_osmapi_connection(server = "testing") # setting https://master.apis.dev.openstreetmap.org
x &lt;- data.frame(type = "node", lat = 0, lon = 0, name = "Test redaction.")
obj &lt;- osmapi_objects(x, tag_columns = "name")
changeset_id &lt;- osm_create_changeset(
  comment = "Test object redaction",
  hashtags = "#testing;#osmapiR"
)

node_id &lt;- osm_create_object(x = obj, changeset_id = changeset_id)
node_osm &lt;- osm_get_objects(osm_type = "node", osm_id = node_id)
deleted_version &lt;- osm_delete_object(x = node_osm, changeset_id = changeset_id)
redaction &lt;- osm_redaction_object(
  osm_type = node_osm$type, osm_id = node_osm$id, version = 1, redaction_id = 1
)
unredaction &lt;- osm_redaction_object(osm_type = node_osm$type, osm_id = node_osm$id, version = 1)
osm_close_changeset(changeset_id = changeset_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_relations_object'>Relations of an object</h2><span id='topic+osm_relations_object'></span>

<h3>Description</h3>

<p>Returns all (not deleted) relations in which the given object is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_relations_object(
  osm_type = c("node", "way", "relation"),
  osm_id,
  format = c("R", "xml", "json"),
  tags_in_columns = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_relations_object_+3A_osm_type">osm_type</code></td>
<td>
<p>Object type (<code>"node"</code>, <code>"way"</code> or <code>"relation"</code>).</p>
</td></tr>
<tr><td><code id="osm_relations_object_+3A_osm_id">osm_id</code></td>
<td>
<p>Object id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_relations_object_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_relations_object_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the objects are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each OSM object with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM object per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>. If <code>format = "json"</code>,
returns a list with a json structure following the <a href="https://wiki.openstreetmap.org/wiki/OSM_JSON">OSM_JSON format</a>.
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_bbox_objects">osm_bbox_objects</a>()</code>,
<code><a href="#topic+osm_get_objects">osm_get_objects</a>()</code>,
<code><a href="#topic+osm_history_object">osm_history_object</a>()</code>,
<code><a href="#topic+osm_ways_node">osm_ways_node</a>()</code>,
<code><a href="#topic+osmapi_objects">osmapi_objects</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>node &lt;- osm_relations_object(osm_type = "node", osm_id = 152364165)
node

way &lt;- osm_relations_object(osm_type = "way", osm_id = 372011578)
way

rel &lt;- osm_relations_object(osm_type = "relation", osm_id = 342792)
rel
</code></pre>

<hr>
<h2 id='osm_search_notes'>Search for notes</h2><span id='topic+osm_search_notes'></span>

<h3>Description</h3>

<p>Returns notes that match the specified query. If no query is provided, the most recently updated notes are returned.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_search_notes(
  q,
  user,
  bbox,
  from,
  to,
  closed = 7,
  sort = c("updated_at", "created_at"),
  order = c("newest", "oldest"),
  limit = getOption("osmapir.api_capabilities")$api$notes["default_query_limit"],
  format = c("R", "xml", "rss", "json", "gpx")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_search_notes_+3A_q">q</code></td>
<td>
<p>Text search query, matching either note text or comments.</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_user">user</code></td>
<td>
<p>Search for notes which the given user interacted with. The value can be the user id (<code>numeric</code>) or the
display name (<code>character</code>).</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_bbox">bbox</code></td>
<td>
<p>Search area expressed as a string or a numeric vector of 4 coordinates of a valid bounding box
(<code style="white-space: pre;">&#8288;left,bottom,right,top&#8288;</code>) in decimal degrees. Area must be at most 25 square degrees (see
<code>osm_capabilities()$note_area</code> and
<a href="https://github.com/openstreetmap/openstreetmap-website/blob/master/config/settings.yml#L27">this line in settings</a>
for the current value).</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_from">from</code></td>
<td>
<p>Beginning date range for <code>created_at</code> or <code>updated_at</code> (specified by <code>sort</code>). Preferably in
<a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> date format.</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_to">to</code></td>
<td>
<p>End date range for <code>created_at</code> or <code>updated_at</code> (specified by <code>sort</code>). Preferably in
<a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> date format. Only works when <code>from</code> is supplied.</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_closed">closed</code></td>
<td>
<p>Specifies the number of days a note needs to be closed to no longer be returned. A value of 0 means
only open notes are returned. A value of -1 means all notes are returned. 7 is the default.</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_sort">sort</code></td>
<td>
<p>Sort results by creation (<code>"created_at"</code>) or update date (<code>"updated_at"</code>, the default).</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_order">order</code></td>
<td>
<p>Sorting order. <code>"oldest"</code> is ascending order, <code>"newest"</code> is descending order (the default).</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_limit">limit</code></td>
<td>
<p>Maximum number of results between 1 and 10000 (may change, see <code>osm_capabilities()$api$notes</code> for the
current value). Default to 100.</p>
</td></tr>
<tr><td><code id="osm_search_notes_+3A_format">format</code></td>
<td>
<p>Format of the the returned list of notes. Can be <code>"R"</code> (default), <code>"xml"</code>, <code>"rss"</code>, <code>"json"</code> or
<code>"gpx"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The notes will be ordered by the date of their last change, the most recent one will be first.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one map note per row. If <code>format = "json"</code>, returns a list with the json
structure. For <code>format</code> in <code>"xml"</code>, <code>"rss"</code>, and <code>"gpx"</code>, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> with the corresponding format.
</p>


<h3>See Also</h3>

<p>Other get notes' functions: 
<code><a href="#topic+osm_feed_notes">osm_feed_notes</a>()</code>,
<code><a href="#topic+osm_get_notes">osm_get_notes</a>()</code>,
<code><a href="#topic+osm_read_bbox_notes">osm_read_bbox_notes</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>notes &lt;- osm_search_notes(
  q = "POI", bbox = "0.1594133,40.5229822,3.3222508,42.8615226",
  from = "2017-10-01", to = "2018-10-27T15:27A", limit = 10
)
notes

my_notes &lt;- osm_search_notes(
  user = "jmaspons", bbox = c(-0.1594133, 40.5229822, 3.322251, 42.861523),
  closed = -1, format = "json"
)
my_notes
</code></pre>

<hr>
<h2 id='osm_subscribe_changeset_discussion'>Subscribe or unsubscribe to a changeset discussion</h2><span id='topic+osm_subscribe_changeset_discussion'></span><span id='topic+osm_unsubscribe_changeset_discussion'></span>

<h3>Description</h3>

<p>Subscribe or unsubscribe to a changeset discussion
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_subscribe_changeset_discussion(changeset_id)

osm_unsubscribe_changeset_discussion(changeset_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_subscribe_changeset_discussion_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The id of the changeset represented by a numeric or a character value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the changeset information.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>osm_subscribe_changeset_discussion()</code>: Subscribe to the discussion of a changeset to receive notifications
for new comments.
</p>
</li>
<li> <p><code>osm_unsubscribe_changeset_discussion()</code>: Unsubscribe from the discussion of a changeset to stop receiving
notifications.
</p>
</li></ul>


<h3>See Also</h3>

<p>Other changeset discussion's functions: 
<code><a href="#topic+osm_comment_changeset_discussion">osm_comment_changeset_discussion</a>()</code>,
<code><a href="#topic+osm_hide_comment_changeset_discussion">osm_hide_comment_changeset_discussion</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set_osmapi_connection(server = "openstreetmap.org")
osm_subscribe_changeset_discussion(137595351)
osm_unsubscribe_changeset_discussion("137595351")

## End(Not run)
</code></pre>

<hr>
<h2 id='osm_update_gpx'>Update GPS trace</h2><span id='topic+osm_update_gpx'></span>

<h3>Description</h3>

<p>Use this to update a GPX info. Only usable by the owner account. Requires authentication.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_update_gpx(
  gpx_id,
  name,
  description,
  tags,
  visibility = c("private", "public", "trackable", "identifiable")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_update_gpx_+3A_gpx_id">gpx_id</code></td>
<td>
<p>The id of the track to update represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_update_gpx_+3A_name">name</code></td>
<td>
<p>The file name of the track. Usually, the file name when using <code><a href="#topic+osm_create_gpx">osm_create_gpx()</a></code>.</p>
</td></tr>
<tr><td><code id="osm_update_gpx_+3A_description">description</code></td>
<td>
<p>The trace description.</p>
</td></tr>
<tr><td><code id="osm_update_gpx_+3A_tags">tags</code></td>
<td>
<p>A string containing tags for the trace that will replace the current ones.</p>
</td></tr>
<tr><td><code id="osm_update_gpx_+3A_visibility">visibility</code></td>
<td>
<p>One of the following: <code>private</code>, <code>public</code>, <code>trackable</code>, <code>identifiable</code>. For explanations see
<a href="https://www.openstreetmap.org/traces/mine">OSM trace upload page</a> or
<a href="https://wiki.openstreetmap.org/wiki/Visibility_of_GPS_traces">Visibility of GPS traces</a>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Missing arguments won't be updated.
</p>


<h3>Value</h3>

<p>Returns a data frame with the updated metadata of the GPS trace. The same format that
<code><a href="#topic+osm_get_gpx_metadata">osm_get_gpx_metadata()</a></code> with <code>format = "R"</code>.
</p>


<h3>See Also</h3>

<p>Other edit GPS traces' functions: 
<code><a href="#topic+osm_create_gpx">osm_create_gpx</a>()</code>,
<code><a href="#topic+osm_delete_gpx">osm_delete_gpx</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_gps_traces", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_update_object'>Update an OSM object</h2><span id='topic+osm_update_object'></span>

<h3>Description</h3>

<p>Updates data from a preexisting element.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_update_object(x, changeset_id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_update_object_+3A_x">x</code></td>
<td>
<p>The new object data. Can be the path of an xml file, a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> or a data.frame inheriting
or following the structure of an <code>osmapi_objects</code> object.</p>
</td></tr>
<tr><td><code id="osm_update_object_+3A_changeset_id">changeset_id</code></td>
<td>
<p>The ID of an open changeset where to create the object. If missing, <code>x</code> should define the
changeset ID, otherwise it will be overwritten with <code>changeset_id</code>. Ignored if <code>x</code> is a path.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A full representation of the element as it should be after the update has to be provided. Any tags, way-node refs,
and relation members that remain unchanged must be in the update as well. A version number must be provided as well,
it must match the current version of the element in the database.
</p>
<p>If <code>x</code> is a data.frame, the columns <code>type</code>, <code>id</code>, <code>visible</code>, <code>version</code>, <code>changeset</code>, and <code>tags</code> must be present +
column <code>members</code> for ways and relations + <code>lat</code> and <code>lon</code> for nodes. For the xml format, see the
<a href="https://wiki.openstreetmap.org/wiki/API_v0.6#Update:_PUT_/api/0.6/%5Bnode%7Cway%7Crelation%5D/%23id">OSM wiki</a>.
</p>
<p>If multiple elements are provided only the first is updated. The rest is discarded.
</p>


<h3>Value</h3>

<p>Returns the new version number of the object.
</p>


<h3>Note</h3>


<ul>
<li><p> This updates the bounding box of the changeset.
</p>
</li>
<li><p> To avoid performance issues when updating multiple objects, the use of the <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code> is highly
recommended. This is also the only way to ensure that multiple objects are updated in a single database
transaction.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other edit OSM objects' functions: 
<code><a href="#topic+osm_create_object">osm_create_object</a>()</code>,
<code><a href="#topic+osm_delete_object">osm_delete_object</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>vignette("how_to_edit_osm", package = "osmapiR")
</code></pre>

<hr>
<h2 id='osm_ways_node'>Ways of a node</h2><span id='topic+osm_ways_node'></span>

<h3>Description</h3>

<p>Returns all the (not deleted) ways in which the given node is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osm_ways_node(node_id, format = c("R", "xml", "json"), tags_in_columns = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osm_ways_node_+3A_node_id">node_id</code></td>
<td>
<p>Node id represented by a numeric or a character value.</p>
</td></tr>
<tr><td><code id="osm_ways_node_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"xml"</code>, or <code>"json"</code>.</p>
</td></tr>
<tr><td><code id="osm_ways_node_+3A_tags_in_columns">tags_in_columns</code></td>
<td>
<p>If <code>FALSE</code> (default), the tags of the objects are saved in a single list column <code>tags</code>
containing a <code>data.frame</code> for each OSM object with the keys and values. If <code>TRUE</code>, add a column for each key.
Ignored if <code>format != "R"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a data frame with one OSM object per row. If <code>format = "xml"</code>, returns a
<a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OSM_XML#OSM_XML_file_format_notes">OSM_XML format</a>. If <code>format = "json"</code>,
returns a list with a json structure following the <a href="https://wiki.openstreetmap.org/wiki/OSM_JSON">OSM_JSON format</a>.
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_bbox_objects">osm_bbox_objects</a>()</code>,
<code><a href="#topic+osm_get_objects">osm_get_objects</a>()</code>,
<code><a href="#topic+osm_history_object">osm_history_object</a>()</code>,
<code><a href="#topic+osm_relations_object">osm_relations_object</a>()</code>,
<code><a href="#topic+osmapi_objects">osmapi_objects</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ways_node &lt;- osm_ways_node(node_id = 35308286)
ways_node
</code></pre>

<hr>
<h2 id='osmapi_objects'>osmapi_objects constructor</h2><span id='topic+osmapi_objects'></span>

<h3>Description</h3>

<p>osmapi_objects constructor
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osmapi_objects(x, tag_columns, keep_na_tags = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osmapi_objects_+3A_x">x</code></td>
<td>
<p><code>data.frame</code> representing OSM objects as rows. At least it has a <code>type</code> column with <code>node</code>, <code>way</code> or
<code>relation</code>.</p>
</td></tr>
<tr><td><code id="osmapi_objects_+3A_tag_columns">tag_columns</code></td>
<td>
<p>A vector indicating the name or position of the columns representing tags. If missing, it's
assumed that <code>tags</code> column contain the tags (see details).</p>
</td></tr>
<tr><td><code id="osmapi_objects_+3A_keep_na_tags">keep_na_tags</code></td>
<td>
<p>If <code>TRUE</code>, don't drop the empty tags specified in <code>tag_columns</code> and add <code>NA</code> as a value.
Useful to remove specific tags with <code><a href="#topic+osmchange_modify">osmchange_modify()</a></code> and specific <code>tag_keys</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>osmapi_objects</code>
</p>


<h3>See Also</h3>

<p>Other get OSM objects' functions: 
<code><a href="#topic+osm_bbox_objects">osm_bbox_objects</a>()</code>,
<code><a href="#topic+osm_get_objects">osm_get_objects</a>()</code>,
<code><a href="#topic+osm_history_object">osm_history_object</a>()</code>,
<code><a href="#topic+osm_relations_object">osm_relations_object</a>()</code>,
<code><a href="#topic+osm_ways_node">osm_ways_node</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame(
  type = c("node", "node", "way"), id = 1:3, name = c(NA, NA, "My way")
)
x$members &lt;- list(NULL, NULL, 1:2)
obj &lt;- osmapi_objects(x, tag_columns = "name")
obj
</code></pre>

<hr>
<h2 id='osmchange_create'><code>osmchange</code> to create OSM objects</h2><span id='topic+osmchange_create'></span>

<h3>Description</h3>

<p>Prepare data to create OSM objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osmchange_create(x, format = c("R", "osc", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osmchange_create_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+osmapi_objects">osmapi_objects</a> with columns <code>type</code>, <code>changeset</code> + column <code>members</code> for ways and relations + <code>lat</code>
and <code>lon</code> for nodes + tags if needed.</p>
</td></tr>
<tr><td><code id="osmchange_create_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"osc"</code> (<code>"xml"</code> is a synonym for <code>"osc"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Objects IDs are unknown and will be allocated by the server. If <code>id</code> column is missing in <code>x</code>, a negative
placeholders will be used. Check <a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange page</a> for details about
how to refer to objects still not created to define the members of relations and nodes of ways.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a <code>osmapi_OsmChange</code> data frame with one OSM edition per row.
If <code>format = "osc"</code> or <code>format = "xml"</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange format</a> that can be saved with <code><a href="xml2.html#topic+write_xml">xml2::write_xml()</a></code> and
opened in other applications such as JOSM.
</p>
<p>The results are  ready to send the editions to the servers with <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code>.
</p>


<h3>See Also</h3>

<p>Other OsmChange's functions: 
<code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset</a>()</code>,
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osmchange_delete">osmchange_delete</a>()</code>,
<code><a href="#topic+osmchange_modify">osmchange_modify</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(
  type = c("node", "node", "way", "relation"),
  id = -(1:4),
  lat = c(0, 1, NA, NA),
  lon = c(0, 1, NA, NA),
  name = c(NA, NA, "My way", "Our relation"),
  type.1 = c(NA, NA, NA, "Column clash!")
)
d$members &lt;- list(
  NULL, NULL, -(1:2),
  matrix(
    c("node", "-1", NA, "node", "-2", NA, "way", "-3", "outer"),
    nrow = 3, ncol = 3, byrow = TRUE, dimnames = list(NULL, c("type", "ref", "role"))
  )
)
obj &lt;- osmapi_objects(d, tag_columns = c(name = "name", type = "type.1"))
osmcha &lt;- osmchange_create(obj)
osmcha
</code></pre>

<hr>
<h2 id='osmchange_delete'><code>osmchange</code> to delete existing OSM objects</h2><span id='topic+osmchange_delete'></span>

<h3>Description</h3>

<p>Prepare data to delete OSM objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osmchange_delete(x, delete_if_unused = FALSE, format = c("R", "osc", "xml"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osmchange_delete_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+osmapi_objects">osmapi_objects</a> or <code>data.frame</code> with the columns <code>type</code> and <code>id</code> for the objects to delete. Other columns
will be ignored.</p>
</td></tr>
<tr><td><code id="osmchange_delete_+3A_delete_if_unused">delete_if_unused</code></td>
<td>
<p>If <code>TRUE</code>, the <code style="white-space: pre;">&#8288;if-unused&#8288;</code> attribute will be added (see details). Can be a vector of length
<code>nrow(x)</code>.</p>
</td></tr>
<tr><td><code id="osmchange_delete_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"osc"</code> (<code>"xml"</code> is a synonym for <code>"osc"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code style="white-space: pre;">&#8288;if-unused&#8288;</code> attribute is present, then the delete operation(s) in this block are conditional and will only be
executed if the object to be deleted is not used by another object. Without the <code style="white-space: pre;">&#8288;if-unused&#8288;</code>, such a situation would
lead to an error, and the whole diff upload would fail. Setting the attribute will also cause deletions of already
deleted objects to not generate an error.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a <code>osmapi_OsmChange</code> data frame with one OSM edition per row.
If <code>format = "osc"</code> or <code>format = "xml"</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange format</a> that can be saved with <code><a href="xml2.html#topic+write_xml">xml2::write_xml()</a></code> and
opened in other applications such as JOSM.
</p>
<p>The results are  ready to send the editions to the servers with <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code>.
</p>


<h3>See Also</h3>

<p>Other OsmChange's functions: 
<code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset</a>()</code>,
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osmchange_create">osmchange_create</a>()</code>,
<code><a href="#topic+osmchange_modify">osmchange_modify</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
obj_id &lt;- osmapi_objects(data.frame(
  type = c("way", "way", "relation", "node"),
  id = c("722379703", "629132242", "8387952", "4739010921")
))
osmchange_del &lt;- osmchange_delete(obj_id)

## End(Not run)
</code></pre>

<hr>
<h2 id='osmchange_modify'><code>osmchange</code> to modify existing OSM objects</h2><span id='topic+osmchange_modify'></span>

<h3>Description</h3>

<p>Prepare data to update tags, members and/or latitude and longitude.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>osmchange_modify(
  x,
  tag_keys,
  members = FALSE,
  lat_lon = FALSE,
  format = c("R", "osc", "xml")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="osmchange_modify_+3A_x">x</code></td>
<td>
<p>A <a href="#topic+osmapi_objects">osmapi_objects</a> with the columns <code>type</code> and <code>id</code> with unique combinations of values plus columns
specifying tags, members or latitude and longitude.</p>
</td></tr>
<tr><td><code id="osmchange_modify_+3A_tag_keys">tag_keys</code></td>
<td>
<p>A character vector with the keys of the tags that will be modified. If missing (default),
all tags will be updated, removed or created. If <code>FALSE</code>, don't modify tags.</p>
</td></tr>
<tr><td><code id="osmchange_modify_+3A_members">members</code></td>
<td>
<p>If <code>TRUE</code> and <code>x</code> has a <code>members</code> column, update the members of the ways and relations objects.</p>
</td></tr>
<tr><td><code id="osmchange_modify_+3A_lat_lon">lat_lon</code></td>
<td>
<p>If <code>TRUE</code> and <code>x</code> has a <code>lat</code> and <code>lon</code> columns, update the coordinates of the node objects.</p>
</td></tr>
<tr><td><code id="osmchange_modify_+3A_format">format</code></td>
<td>
<p>Format of the output. Can be <code>"R"</code> (default), <code>"osc"</code> (<code>"xml"</code> is a synonym for <code>"osc"</code>).</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> should be a <code>osmapi_objects</code> or follow the same format. Missing tags or tags with <code>NA</code> in the value will be
removed if <code>tag_keys</code> is not specified. See <code><a href="#topic+osm_get_objects">osm_get_objects()</a></code> for examples of the format.
</p>


<h3>Value</h3>

<p>If <code>format = "R"</code>, returns a <code>osmapi_OsmChange</code> data frame with one OSM edition per row.
If <code>format = "osc"</code> or <code>format = "xml"</code>, returns a <a href="xml2.html#topic+oldclass">xml2::xml_document</a> following the
<a href="https://wiki.openstreetmap.org/wiki/OsmChange">OsmChange format</a> that can be saved with <code><a href="xml2.html#topic+write_xml">xml2::write_xml()</a></code> and
opened in other applications such as JOSM.
</p>
<p>The results are  ready to send the editions to the servers with <code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset()</a></code>.
</p>


<h3>See Also</h3>

<p>Other OsmChange's functions: 
<code><a href="#topic+osm_diff_upload_changeset">osm_diff_upload_changeset</a>()</code>,
<code><a href="#topic+osm_download_changeset">osm_download_changeset</a>()</code>,
<code><a href="#topic+osmchange_create">osmchange_create</a>()</code>,
<code><a href="#topic+osmchange_delete">osmchange_delete</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
obj &lt;- osm_get_objects(
  osm_type = c("node", "way", "way", "relation", "relation", "node"),
  osm_id = c("35308286", "13073736", "235744929", "40581", "341530", "1935675367"),
  version = c(1, 3, 2, 5, 7, 1) # Old versions
)
osmch &lt;- osmchange_modify(obj)
osmch

## End(Not run)
</code></pre>

<hr>
<h2 id='set_osmapi_connection'>Configure connections from osmapiR</h2><span id='topic+set_osmapi_connection'></span><span id='topic+get_osmapi_url'></span><span id='topic+set_osmapi_url'></span>

<h3>Description</h3>

<p>Functions to configure the connections. Probably, you should only use <code>set_osmapi_connection</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_osmapi_connection(
  server = c("openstreetmap.org", "testing"),
  cache_authentication
)

get_osmapi_url()

set_osmapi_url(osmapi_url)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_osmapi_connection_+3A_server">server</code></td>
<td>
<p>If <code>openstreetmap.org</code> (default), the API calls will be performed to the servers in production. If
<code>testing</code>, the calls will be against <a href="https://master.apis.dev.openstreetmap.org">https://master.apis.dev.openstreetmap.org</a> without affecting the main OSM
data.</p>
</td></tr>
<tr><td><code id="set_osmapi_connection_+3A_cache_authentication">cache_authentication</code></td>
<td>
<p>If <code>TRUE</code>, the authentication token will be cached on disk. This reduces the number of
times that you need to re-authenticate at the cost of storing access credentials on disk. Cached tokens are
encrypted and automatically deleted 30 days after creation. If missing (default), no changes will be applied. On
package load time, the option is set to <code>FALSE</code> if it's not yet set.</p>
</td></tr>
<tr><td><code id="set_osmapi_connection_+3A_osmapi_url">osmapi_url</code></td>
<td>
<p>The desired API URL to send the calls.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When testing your software against the API you should consider using <a href="https://master.apis.dev.openstreetmap.org">https://master.apis.dev.openstreetmap.org</a>
instead of the live-api (<code>set_osmapi_connection("testing")</code>). Your account for the live service is not in the same
database, so you probably need a new username and password for the test service; please visit that page in a browser
to sign up.
</p>
<p><code>set_osmapi_url()</code> and <code>get_osmapi_url</code> only deal with the API base URL. On the other hand, <code>set_osmapi_connection</code>
also configure the authentication parameters needed for <code>PUT</code>, <code>POST</code> and <code>DELETE</code> calls.
</p>
<p>For further details, see <a href="https://wiki.openstreetmap.org/wiki/API_v0.6">https://wiki.openstreetmap.org/wiki/API_v0.6</a>.
</p>


<h3>Value</h3>

<p>Configure <code>.Options[grep("^osmapir\\.[a-z]+_(?!secret$)", names(.Options), perl = TRUE)]</code> :) and return
<code>osmapir.base_api_url</code>.
</p>


<h3>See Also</h3>

<p>Other API functions: 
<code><a href="#topic+authenticate_osmapi">authenticate_osmapi</a>()</code>,
<code><a href="#topic+osm_api_versions">osm_api_versions</a>()</code>,
<code><a href="#topic+osm_capabilities">osm_capabilities</a>()</code>,
<code><a href="#topic+osm_permissions">osm_permissions</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ori &lt;- get_osmapi_url()
set_osmapi_connection(server = "testing")
get_osmapi_url()
set_osmapi_connection(server = "openstreetmap.org")
get_osmapi_url()

## Restore options
if (ori == "https://api.openstreetmap.org") {
  set_osmapi_connection(server = "openstreetmap.org")
} else if (ori == "https://master.apis.dev.openstreetmap.org") {
  set_osmapi_connection(server = "testing")
} else {
  warning(
    "A non standard osmapiR connection detected (", ori,
    "). If you configured manually options like \"osmapir.base_api_url\" or \"osmapir.oauth_id\", ",
    "configure it again."
  )
}
</code></pre>

<hr>
<h2 id='tags_list2wide'>Change <code>tags</code> from a list column &lt;-&gt; columns for each key in wide format</h2><span id='topic+tags_list2wide'></span><span id='topic+tags_wide2list'></span>

<h3>Description</h3>

<p>Objects of classes <code>osmapi_objects</code> and <code>osmapi_changesets</code> can represent the tags in a column with a list with
a data.frame for each row with 2 columns for keys and values, or by columns for each key. These functions allow
to change the format of the tags.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_list2wide(x)

tags_wide2list(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tags_list2wide_+3A_x">x</code></td>
<td>
<p>An <code>osmapi_objects</code> or <code>osmapi_changesets</code> objects as returned by, for example, <code><a href="#topic+osm_get_objects">osm_get_objects()</a></code> or
<code><a href="#topic+osm_get_changesets">osm_get_changesets()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Both formats have advantages. Tags in a list of data.frames is a more compact representation and there is no risk of
clashes of column names and tag keys. Tags in columns make it easier to select rows by tags as in a regular
data.frame. Column name clashes are resolved and the original key names restored when transformed to tags list
format.
</p>
<p>By default, functions returning <code>osmapi_objects</code> or <code>osmapi_changesets</code> objects, use the the tags in a list column,
but can return the results in a wide format using the parameter <code>tags_in_columns = TRUE</code>.
</p>


<h3>Value</h3>

<p>A data frame with the same class and data than the original (<code>osmapi_objects</code> or <code>osmapi_changesets</code>) but with the
specified tags' format.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
peaks_wide &lt;- osm_get_objects(
  osm_type = "nodes", osm_id = c(35308286, 1935675367), tags_in_columns = TRUE
)
peaks_list &lt;- tags_wide2list(peaks_wide)

# tags in list format
peaks_list$tags

# Select peaks with `prominence` tag
peaks_wide[!is.na(peaks_wide$prominence), ]
peaks_list[sapply(peaks_list$tags, function(x) any(x$key == "prominence")), ]

cities_list &lt;- osm_get_objects(osm_type = "relations", osm_id = c("40581", "341530"))
# Column name clash:
cities_wide &lt;- tags_list2wide(cities_list)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
