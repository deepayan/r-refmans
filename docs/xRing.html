<!DOCTYPE html><html><head><title>Help for package xRing</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {xRing}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#addRing'><p>Add Tree-Ring Border(s)</p></a></li>
<li><a href='#calibrateFilm'><p>Calibrate Film</p></a></li>
<li><a href='#combineFrag'><p>Combine Fragments</p></a></li>
<li><a href='#correctRings'><p>Correct Tree-Ring Borders Interactively</p></a></li>
<li><a href='#detectEwLw'><p>Detect the Transition from Earlywood to Latewood</p></a></li>
<li><a href='#detectRings'><p>Detect Tree-Ring Borders</p></a></li>
<li><a href='#fitCalibrationModel'><p>Fit a Calibration Curve</p></a></li>
<li><a href='#getBorders'><p>Get Tree-Ring Borders</p></a></li>
<li><a href='#getDensity'><p>Get Density Values</p></a></li>
<li><a href='#getRwls'><p>Get Data-Frames With Ring Width and Density Values</p></a></li>
<li><a href='#getSteps'><p>Select the Steps of a Calibration Wedge Interactively</p></a></li>
<li><a href='#imCrop'><p>Crop Image Interactively</p></a></li>
<li><a href='#imDisplay'><p>Display Image Using tcltk Package</p></a></li>
<li><a href='#imRead'><p>Load Image From a File</p></a></li>
<li><a href='#measureProfiles'><p>Measure Profiles Interactively</p></a></li>
<li><a href='#PaPiRaw'>
<p>PaPiRaw</p></a></li>
<li><a href='#PaPiSpan'>
<p>PaPiSpan</p></a></li>
<li><a href='#plot'><p>Plot xRing and xRingList Objects</p></a></li>
<li><a href='#plotRings'><p>Plot xRing Objects</p></a></li>
<li><a href='#print'><p>Print xRing and xRingList Objects</p></a></li>
<li><a href='#removeRing'><p>Remove Tree-Ring Border(s)</p></a></li>
<li><a href='#selectProfiles'><p>Select Profile(s)</p></a></li>
<li><a href='#setLastYear'><p>Set Last Year</p></a></li>
<li><a href='#stepIncrease'><p>Calculate the Steps Thickness of the Calibration Wedge</p></a></li>
<li><a href='#toxRing'><p>Create an &quot;xRing&quot; Object</p></a></li>
<li><a href='#toxRingList'><p>Create a &quot;xRingList&quot; Object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Identify and Measure Tree Rings on X-Ray Micro-Density Profiles</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Contains functions to identify tree-ring borders based on X-ray micro-density profiles and a Graphical User Interface (GUI) to visualize density profiles and correct tree-ring borders. Campelo F, Mayer K, Grabner M. (2019) &lt;<a href="https://doi.org/10.1016%2Fj.dendro.2018.11.002">doi:10.1016/j.dendro.2018.11.002</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>detrendeR</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplR, imager, tcltk2, tkRplotR</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-04-22 11:52:47 UTC; fc</td>
</tr>
<tr>
<td>Author:</td>
<td>Filipe Campelo <a href="https://orcid.org/0000-0001-6022-9948"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph],
  Konrad Mayer [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Filipe Campelo &lt;fcampelo@ci.uc.pt&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-04-22 12:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='addRing'>Add Tree-Ring Border(s)</h2><span id='topic+addRing'></span>

<h3>Description</h3>

<p>Add a tree-ring border by defining the position of the new border
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addRing(object, x, series = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addRing_+3A_object">object</code></td>
<td>
<p>an object of class &quot;xRingList&quot; or &quot;xRing&quot;</p>
</td></tr>
<tr><td><code id="addRing_+3A_x">x</code></td>
<td>
<p>the position (number of the resp. pixel(s)) to set the new tree-ring border</p>
</td></tr>
<tr><td><code id="addRing_+3A_series">series</code></td>
<td>
<p>the name of the series to be changed when the <code>object</code> is &quot;xRingList&quot;, by default is <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a &quot;xRing&quot; or &quot;xRingList&quot; object with a tree-ring border added at the position <code>x</code> for the series given by <code>series</code> argument
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
plot(PaPi$"AFO1001a")
PaPi$AFO1001a &lt;- removeRing(PaPi$AFO1001a, 47)
plot(PaPi$"AFO1001a")
PaPi &lt;- addRing(PaPi, series = "AFO1001a", x = 47)
plot(PaPi$"AFO1001a")

</code></pre>

<hr>
<h2 id='calibrateFilm'>Calibrate Film</h2><span id='topic+calibrateFilm'></span>

<h3>Description</h3>

<p>Convenience function to do the whole calibration of a densitometry image in one function call internally calling <a href="#topic+getSteps">getSteps</a> and <a href="#topic+fitCalibrationModel">fitCalibrationModel</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calibrateFilm(
  im,
  thickness = stepIncrease(0.24, 7),
  density = 1.2922,
  plot = TRUE,
  auto = FALSE,
  nPixel = 50,
  plotAuto = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calibrateFilm_+3A_im">im</code></td>
<td>
<p>a grayscale image</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_thickness">thickness</code></td>
<td>
<p>a vector specifying the thickness of the calibration wedge at each step</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_density">density</code></td>
<td>
<p>the density of the reference material (i.e. the calibration wedge)</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_plot">plot</code></td>
<td>
<p>if TRUE the calibration model is displayed</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_auto">auto</code></td>
<td>
<p>logical. If TRUE, automatic detection of the steps given a line is carried out. Use with care</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_npixel">nPixel</code></td>
<td>
<p>if 'auto = TRUE': number of pixels gives the line width</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_plotauto">plotAuto</code></td>
<td>
<p>if TRUE the automatic detection of the grayscale values is displayed</p>
</td></tr>
<tr><td><code id="calibrateFilm_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to <a href="stats.html#topic+loess">loess</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class 'loess' representing the film calibration
</p>


<h3>See Also</h3>

<p><a href="#topic+getSteps">getSteps</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # read a sample file
  im &lt;- imRead(file = system.file("img", "AFO1046.1200dpi.png", package = "xRing"))

  # display the image
  imDisplay(im)

  # calibrate the film:
  calibration &lt;- calibrateFilm(im,
    thickness = stepIncrease(0.24, 7),
    density = 1.2922,
    plot = TRUE
  )
}

</code></pre>

<hr>
<h2 id='combineFrag'>Combine Fragments</h2><span id='topic+combineFrag'></span>

<h3>Description</h3>

<p>This function combines fragments by series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combineFrag(x, frag = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combineFrag_+3A_x">x</code></td>
<td>
<p>an &quot;xRingList&quot; object</p>
</td></tr>
<tr><td><code id="combineFrag_+3A_frag">frag</code></td>
<td>
<p>integer, defines the character position within the series name that identifies fragments. If <code>NULL</code> the function considers series with names having one more character as fragments</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;xRingList&quot; with merged fragments
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
PaPi.merge &lt;- combineFrag(PaPi, frag = 9)

</code></pre>

<hr>
<h2 id='correctRings'>Correct Tree-Ring Borders Interactively</h2><span id='topic+correctRings'></span>

<h3>Description</h3>

<p>A Graphical User Interface (GUI) to correct tree-ring borders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>correctRings(x, chrono = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="correctRings_+3A_x">x</code></td>
<td>
<p>an <code>xRingList</code> object</p>
</td></tr>
<tr><td><code id="correctRings_+3A_chrono">chrono</code></td>
<td>
<p>a data.frame with a reference chronology, if <code>NULL</code> a reference chronology is calculated using tree-ring width series from <code>x</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses the <code>tkRplot</code> function (tkRplotR package) to interact with X-ray microdensity profiles.
</p>


<h3>Value</h3>

<p>an <code>xRingList</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  data(PaPiRaw)
  data(PaPiSpan)
  PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
  PaPiCorrect &lt;- correctRings(PaPi)
}

</code></pre>

<hr>
<h2 id='detectEwLw'>Detect the Transition from Earlywood to Latewood</h2><span id='topic+detectEwLw'></span>

<h3>Description</h3>

<p>This function detects the end of earlywood and the start of latewood
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detectEwLw(x, ew = 0.5, lw = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detectEwLw_+3A_x">x</code></td>
<td>
<p>an &quot;xRingList&quot; object</p>
</td></tr>
<tr><td><code id="detectEwLw_+3A_ew">ew</code></td>
<td>
<p>defines the end of earlywood as the ratio of the density range. The default value is 0.5, which means that the end of earlywood is placed at the point where the density is half the range between the minimum and maximum density values within an annual ring</p>
</td></tr>
<tr><td><code id="detectEwLw_+3A_lw">lw</code></td>
<td>
<p>defines the start of latewood, the default value is <code>NULL</code>. When ew is 0.5 and lw is <code>NULL</code> the boundary between earlywood and latewood is placed where the density is half the range between the minimum and maximum density values within an annual ring</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an &quot;xRingList&quot; object with limits.ew and limits.lw added.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
PaPi.merge &lt;- combineFrag(PaPi, frag = 9)
PaPiRings &lt;- detectEwLw(PaPi.merge, ew = 0.5)

</code></pre>

<hr>
<h2 id='detectRings'>Detect Tree-Ring Borders</h2><span id='topic+detectRings'></span>

<h3>Description</h3>

<p>This function identifies tree-ring borders on X-ray microdensity profiles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detectRings(x, y = NULL, k = 3, minTrw = 3, threshold = 0.215)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detectRings_+3A_x">x</code></td>
<td>
<p>a dataframe with X-ray microdensity profiles or an &quot;xRingList&quot; object</p>
</td></tr>
<tr><td><code id="detectRings_+3A_y">y</code></td>
<td>
<p>a dataframe with the first and last year in columns and the series in rows, is <code>NULL</code> by default</p>
</td></tr>
<tr><td><code id="detectRings_+3A_k">k</code></td>
<td>
<p>width of the rolling window to find the local maximum and minimum (for more details please see the help of <code><a href="#topic+getBorders">getBorders</a></code> function)</p>
</td></tr>
<tr><td><code id="detectRings_+3A_mintrw">minTrw</code></td>
<td>
<p>integer width of the narrowest tree-ring, rings narrower than this value will not be considered</p>
</td></tr>
<tr><td><code id="detectRings_+3A_threshold">threshold</code></td>
<td>
<p>the minimum difference between local maximum and minimum density to identify a tree-ring border</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses the <code><a href="#topic+getBorders">getBorders</a></code> function to identify tree-ring borders based on the difference between local maximum and minimum density.
</p>


<h3>Value</h3>

<p><code>detectRings</code> returns an &quot;xRingList&quot; object, an S3 class with &quot;xRing&quot; lists as members, with the following elements:
</p>
<p><code>span</code> first and last year
</p>
<p><code>trw</code> gives the tree-ring width
</p>
<p><code>name</code> a <code>string</code> giving the series name
</p>
<p><code>limits</code> a <code>vector</code> with the position of the tree-ring borders
</p>
<p><code>years</code> a <code>vector</code> with the calendar year
</p>
<p><code>profile.raw</code> a <code>vector</code> with the input
</p>


<h3>See Also</h3>

<p><a href="#topic+getBorders">getBorders</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- toxRingList(PaPiRaw, PaPiSpan)
PaPi &lt;- detectRings(PaPi)
# give the same
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
# Because the last year is not supplied the last year for all series is the last calendar year
# as.numeric(format(Sys.time(), "%Y"))-1
PaPi &lt;- detectRings(PaPiRaw)

</code></pre>

<hr>
<h2 id='fitCalibrationModel'>Fit a Calibration Curve</h2><span id='topic+fitCalibrationModel'></span>

<h3>Description</h3>

<p>Fit a model to calibrate a film from X-ray densitometry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fitCalibrationModel(
  grayvalues,
  thickness = stepIncrease(0.24, 7),
  density = 1.2922,
  plot = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fitCalibrationModel_+3A_grayvalues">grayvalues</code></td>
<td>
<p>a numeric vector containing the gray values of the steps of the calibration wedge at various thicknesses given by the argument 'thickness'</p>
</td></tr>
<tr><td><code id="fitCalibrationModel_+3A_thickness">thickness</code></td>
<td>
<p>a vector specifying the thickness of the calibration wedge at each step.</p>
</td></tr>
<tr><td><code id="fitCalibrationModel_+3A_density">density</code></td>
<td>
<p>the density of the reference material</p>
</td></tr>
<tr><td><code id="fitCalibrationModel_+3A_plot">plot</code></td>
<td>
<p>if TRUE the calibration model is displayed</p>
</td></tr>
<tr><td><code id="fitCalibrationModel_+3A_...">...</code></td>
<td>
<p>further arguments to be passed to <a href="stats.html#topic+loess">loess</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class 'loess' representing the film calibration
</p>


<h3>See Also</h3>

<p><a href="#topic+getSteps">getSteps</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # read a sample file
  im &lt;- imRead(file = system.file("img", "AFO1046.1200dpi.png", package = "xRing"))

  # display the image
  imDisplay(im)

  # get the grayvalues from the calibration wedge on the film
  grayvalues &lt;- getSteps(im, 7)

  # calibrate the film by fitting a model:
  calibration &lt;- fitCalibrationModel(grayvalues,
    thickness = stepIncrease(0.24, 7),
    density = 1.2922,
    plot = TRUE
  )
}

</code></pre>

<hr>
<h2 id='getBorders'>Get Tree-Ring Borders</h2><span id='topic+getBorders'></span>

<h3>Description</h3>

<p>Identify tree-ring borders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBorders(x, k = 3, minTrw = 3, threshold = 0.215, addLastBorder = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getBorders_+3A_x">x</code></td>
<td>
<p>an object of class &quot;xRing&quot;</p>
</td></tr>
<tr><td><code id="getBorders_+3A_k">k</code></td>
<td>
<p>integer; width of the rolling window</p>
</td></tr>
<tr><td><code id="getBorders_+3A_mintrw">minTrw</code></td>
<td>
<p>integer; width of the narrowest tree-ring, rings narrower than this value will not be considered</p>
</td></tr>
<tr><td><code id="getBorders_+3A_threshold">threshold</code></td>
<td>
<p>the minimum difference between the local maximum and minimum density to detect tree-ring borders</p>
</td></tr>
<tr><td><code id="getBorders_+3A_addlastborder">addLastBorder</code></td>
<td>
<p>logical; if <code>FALSE</code> the last border is not added. If <code>TRUE</code> the last border is placed at the position of the last value.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function uses local maximum and minimum densities in order to detect tree-ring borders.
</p>


<h3>Value</h3>

<p>The <code>getBorders</code> function returns an object of lass &quot;xRing&quot; including the following elements:
</p>
<p><code>names</code> a <code>string</code> giving the series name
</p>
<p><code>span</code> the first and last year
</p>
<p><code>trw</code> a <code>data.frame</code> with tree-ring width
</p>
<p><code>limits</code> a <code>vector</code> with the position of the tree-ring borders
</p>
<p><code>years</code> a <code>vector</code> with the calendar year
</p>
<p><code>profile.raw</code> a <code>vector</code> with the raw X-ray values
</p>
<p><code>profile</code> a <code>vector</code> with the the smoothed X-ray values (if is supplied in the input)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data("PaPiRaw")
data("PaPiSpan")
AFO1001a &lt;- toxRing(PaPiRaw, PaPiSpan, "AFO1001a")
AFO1001a &lt;- getBorders(AFO1001a)

AFO1001a &lt;- toxRing(PaPiRaw, seriesName = "AFO1001a")
AFO1001a &lt;- getBorders(AFO1001a)

</code></pre>

<hr>
<h2 id='getDensity'>Get Density Values</h2><span id='topic+getDensity'></span>

<h3>Description</h3>

<p>Get wood density parameters by tree-ring.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDensity(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDensity_+3A_x">x</code></td>
<td>
<p>a &quot;xRingList&quot; or &quot;xRing&quot; object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a &quot;xRingList&quot; or &quot;xRing&quot; object with density values c(&quot;Dmean&quot;, &quot;Dmin&quot;, &quot;Dmax&quot;, &quot;Dew&quot;, &quot;Dlw&quot;) for each ring
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
PaPi.merge &lt;- combineFrag(PaPi, frag = 9)
PaPiRings &lt;- detectEwLw(PaPi.merge, ew = 0.5)

PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
PaPiRings &lt;- detectEwLw(PaPi, ew = 0.5)

# xRingList object
PaPiDen &lt;- getDensity(PaPiRings)

PaPiDen$AFO1001a[]
PaPiDen$AFO1001a$density

# xRing object
PaPi_AFO1001a &lt;- getDensity(PaPi$AFO1001a)
# the same
PaPi_1 &lt;- getDensity(PaPi[[1]])
identical(PaPi_AFO1001a, PaPi_1)

# do not work for PaPi[1]
# class(PaPi[1])
# getDensity(PaPi[1]) # 'list' class

</code></pre>

<hr>
<h2 id='getRwls'>Get Data-Frames With Ring Width and Density Values</h2><span id='topic+getRwls'></span>

<h3>Description</h3>

<p>Produce a list with 8 data.frames (trw, ew, lw, Dmean, Dew, Dlw, Dmin, Dmax ) that can be used by other packages (dplR, detrendeR)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getRwls(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getRwls_+3A_x">x</code></td>
<td>
<p>an &quot;xRingList&quot; object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with 8 elements:
</p>

<dl>
<dt>trw</dt><dd><p>a data.frame with tree-ring widths</p>
</dd>
<dt>ew</dt><dd><p>a data.frame with earlywood widths</p>
</dd>
<dt>lw </dt><dd><p>a data.frame with latewood widths</p>
</dd>
<dt>Dmean</dt><dd><p>a data.frame with mean tree-ring density</p>
</dd>
<dt>Dew</dt><dd><p>a data.frame with mean earlywood density</p>
</dd>
<dt>Dlw</dt><dd><p>a data.frame with mean latewood density</p>
</dd>
<dt>Dmin</dt><dd><p>a data.frame with the minimum ring density</p>
</dd>
<dt>Dmax</dt><dd><p>a data.frame with the maximum ring density</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
PaPi &lt;- combineFrag(PaPi)
PaPi &lt;- detectEwLw(PaPi)
rwls &lt;- getRwls(PaPi)
names(rwls)
library(dplR)
rwl.report(rwls$trw)
library(detrendeR)
RwlInfo(rwls$trw)

</code></pre>

<hr>
<h2 id='getSteps'>Select the Steps of a Calibration Wedge Interactively</h2><span id='topic+getSteps'></span>

<h3>Description</h3>

<p>Obtain the Grayvalue of Each Step of a Calibration Wedge
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSteps(im, nSteps = NULL, auto = FALSE, nPixel = 50)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSteps_+3A_im">im</code></td>
<td>
<p>an image.</p>
</td></tr>
<tr><td><code id="getSteps_+3A_nsteps">nSteps</code></td>
<td>
<p>number of steps of the calibration wedge to obtain grayvalues from.</p>
</td></tr>
<tr><td><code id="getSteps_+3A_auto">auto</code></td>
<td>
<p>logical. If TRUE, automatic detection of the steps given a line is carried out. Use with care.</p>
</td></tr>
<tr><td><code id="getSteps_+3A_npixel">nPixel</code></td>
<td>
<p>gives the line width when 'auto = TRUE'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # read a sample file
  im &lt;- imRead(file = system.file("img", "AFO1046.1200dpi.png", package = "xRing"))

  # display the image
  imDisplay(im)

  # get the grayvalues from the calibration wedge on the film
  steps &lt;- grayvalues &lt;- getSteps(im, 7) # select 7 ROIs
  steps1 &lt;- grayvalues &lt;- getSteps(im, 7, auto = TRUE) # select a single ROI
  cor(steps, steps1)
}

</code></pre>

<hr>
<h2 id='imCrop'>Crop Image Interactively</h2><span id='topic+imCrop'></span>

<h3>Description</h3>

<p>A GUI for cropping an image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imCrop(im)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imCrop_+3A_im">im</code></td>
<td>
<p>a cimg object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cropped image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {
  file_path &lt;-
    system.file("img", "AFO1046.1200dpi.png", package = "xRing")
  im &lt;- imRead(file_path)
  print(dim(im))
  im_crop &lt;- imCrop(im)
  print(dim(im_crop))
}

</code></pre>

<hr>
<h2 id='imDisplay'>Display Image Using tcltk Package</h2><span id='topic+imDisplay'></span>

<h3>Description</h3>

<p>xRing
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imDisplay(im, zoom = NULL, title = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imDisplay_+3A_im">im</code></td>
<td>
<p>an image (an object of class &quot;cimg&quot;)</p>
</td></tr>
<tr><td><code id="imDisplay_+3A_zoom">zoom</code></td>
<td>
<p>the zoom factor (ratio), for zoom = 1 the image is shown with no zoom (original size), when zoom is less than 1 the image is zoomed out. The default value of zoom is NULL.</p>
</td></tr>
<tr><td><code id="imDisplay_+3A_title">title</code></td>
<td>
<p>the window title</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tcltk object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  file_path &lt;- system.file("img", "AFO1046.1200dpi.png", package = "xRing")
  im &lt;- imRead(file_path)
  tkWin &lt;- imDisplay(im, zoom = .25)
  tkWin$env$ZOOM # 4 means 25% zoom
}

</code></pre>

<hr>
<h2 id='imRead'>Load Image From a File</h2><span id='topic+imRead'></span>

<h3>Description</h3>

<p>Load an image using the load.image function from imager package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>imRead(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="imRead_+3A_file">file</code></td>
<td>
<p>path to file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;cimg&quot;
</p>


<h3>See Also</h3>

<p>load.image
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  file_path &lt;- system.file("img", "AFO1046.1200dpi.png", package = "xRing")
  im &lt;- imRead(file_path)
  imDisplay(im)
}

</code></pre>

<hr>
<h2 id='measureProfiles'>Measure Profiles Interactively</h2><span id='topic+measureProfiles'></span>

<h3>Description</h3>

<p>Several profiles can be selected in an image and a calibration for that image is used to convert pixels into wood density
</p>


<h3>Usage</h3>

<pre><code class='language-R'>measureProfiles(im, nPixel = 50, cal = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="measureProfiles_+3A_im">im</code></td>
<td>
<p>an image</p>
</td></tr>
<tr><td><code id="measureProfiles_+3A_npixel">nPixel</code></td>
<td>
<p>the line width</p>
</td></tr>
<tr><td><code id="measureProfiles_+3A_cal">cal</code></td>
<td>
<p>calibration</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an xRingList object with all xRing objects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # read a sample file
  im &lt;- imRead(file = system.file("img", "AFO1046.1200dpi.png", package = "xRing"))

  # to display the image
  imDisplay(im)

  cal1 &lt;- calibrateFilm(im, thickness = stepIncrease(0.24, 7), density = 1.2922, plot = TRUE)
  profiles &lt;- measureProfiles(im, cal = cal1)
}

</code></pre>

<hr>
<h2 id='PaPiRaw'>
PaPiRaw
</h2><span id='topic+PaPiRaw'></span>

<h3>Description</h3>

<p>A dataframe with 44 series of wood density (g/m<sup>3</sup>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("PaPiRaw")</code></pre>


<h3>Format</h3>

<p>A data.frame containing 44 series in columns and 3111 values of wood density in rows.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(PaPiRaw)
plot(na.omit(PaPiRaw[,1]), type="l", ann = FALSE)
</code></pre>

<hr>
<h2 id='PaPiSpan'>
PaPiSpan
</h2><span id='topic+PaPiSpan'></span>

<h3>Description</h3>

<p>A dataframe giving the first and the last year of 44 series. The row names give the name of series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data("PaPiSpan")</code></pre>


<h3>Format</h3>

<p>A data frame with 44 observations on the following 2 variables.
</p>

<dl>
<dt><code>first</code></dt><dd><p>a numeric vector giving the first year</p>
</dd>
<dt><code>last</code></dt><dd><p>a numeric vector giving the last year</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>data(PaPiSpan)
head(PaPiSpan)
</code></pre>

<hr>
<h2 id='plot'>Plot xRing and xRingList Objects</h2><span id='topic+plot'></span><span id='topic+plot.xRing'></span><span id='topic+plot.xRingList'></span>

<h3>Description</h3>

<p>Plot method for objects of class &quot;xRing&quot; and &quot;xRingList&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xRing'
plot(x, years = NULL, EwLw = TRUE,  xlim = NULL, ylim = NULL, ...)

## S3 method for class 'xRingList'
plot(x, series = 1, years = NULL, EwLw = TRUE,  xlim = NULL, ylim = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_+3A_x">x</code></td>
<td>
<p>an object of class &quot;xRing&quot; or &quot;xRingList&quot;.</p>
</td></tr>
<tr><td><code id="plot_+3A_years">years</code></td>
<td>
<p>the years to be plotted, if <code>NULL</code> the whole time span is plotted.</p>
</td></tr>
<tr><td><code id="plot_+3A_ewlw">EwLw</code></td>
<td>
<p>logical. If <code>TRUE</code> the earlywood and latewood boundaries and width is plotted.</p>
</td></tr>
<tr><td><code id="plot_+3A_xlim">xlim</code></td>
<td>
<p>vector of length 2 giving the x limits for the plot.</p>
</td></tr>
<tr><td><code id="plot_+3A_ylim">ylim</code></td>
<td>
<p>the y limits of the plot.</p>
</td></tr>
<tr><td><code id="plot_+3A_...">...</code></td>
<td>
<p>other arguments to be passed to plotRings function</p>
</td></tr>
<tr><td><code id="plot_+3A_series">series</code></td>
<td>
<p>gives the name (or the index) of the series to be plotted, by default is 1 (i.e., the first series)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p><a href="#topic+plotRings">plotRings</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)

PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
class(PaPi)

PaPiRings &lt;- detectEwLw(PaPi, ew = 0.5)
plot(PaPiRings, series = "AFO1001a")

PaPiRings1 &lt;- detectEwLw(PaPi, ew = 0.35, lw = 0.55)
plot(PaPiRings1, series = "AFO1001a")

plot(PaPiRings, series = "AFO1001a", years = c(1990, 2000))
plot(PaPiRings$AFO1001a)

</code></pre>

<hr>
<h2 id='plotRings'>Plot xRing Objects</h2><span id='topic+plotRings'></span>

<h3>Description</h3>

<p>Plot &quot;xRing&quot; objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotRings(x, xlim = NULL, ylim = NULL, id = NULL, corr = NULL, EwLw = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotRings_+3A_x">x</code></td>
<td>
<p>an object of class &quot;xRing&quot;</p>
</td></tr>
<tr><td><code id="plotRings_+3A_xlim">xlim</code></td>
<td>
<p>the x limits of the plot. The default value, NULL, indicates that the whole profile will be plotted.</p>
</td></tr>
<tr><td><code id="plotRings_+3A_ylim">ylim</code></td>
<td>
<p>the y limits of the plot.</p>
</td></tr>
<tr><td><code id="plotRings_+3A_id">id</code></td>
<td>
<p>a sufix to be added to the name of the series (&lt;series_name&gt; [id])</p>
</td></tr>
<tr><td><code id="plotRings_+3A_corr">corr</code></td>
<td>
<p>value to be print at the top of the graph</p>
</td></tr>
<tr><td><code id="plotRings_+3A_ewlw">EwLw</code></td>
<td>
<p>logical. If <code>TRUE</code> the earlywood and latewood assignments are plotted, by default is <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>None. A plot is produced.
</p>


<h3>See Also</h3>

<p><a href="#topic+plot.xRing">plot.xRing</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  data(PaPiRaw)
  data(PaPiSpan)

  PaPi &lt;- detectRings(PaPiRaw[, 1, drop = FALSE], PaPiSpan)
  plotRings(PaPi$AFO1001a)
  plotRings(PaPi, series = "AFO1001a")
  plotRings(PaPi, series = "AFO1001a", xlim = c(120, 450))

  PaPi1 &lt;- detectEwLw(PaPi, ew = 0.5)
  plotRings(PaPi1, series = "AFO1001a", EwLw = FALSE)
  plotRings(PaPi1, series = "AFO1001a")
}

</code></pre>

<hr>
<h2 id='print'>Print xRing and xRingList Objects</h2><span id='topic+print'></span><span id='topic+print.xRing'></span><span id='topic+print.xRingList'></span>

<h3>Description</h3>

<p>Print method for objects of class &quot;xRing&quot; and &quot;xRingList&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'xRing'
print(x, ...)

## S3 method for class 'xRingList'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>the object of class &quot;xRing&quot; or &quot;xRingList&quot; to print</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p>additional parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
class(PaPi)
print(PaPi$AFO1001a)
PaPi$AFO1001a
PaPi$AFO1001a[]
print(PaPi)
PaPi

</code></pre>

<hr>
<h2 id='removeRing'>Remove Tree-Ring Border(s)</h2><span id='topic+removeRing'></span>

<h3>Description</h3>

<p>Remove the closest tree-ring border
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeRing(object, x, series = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeRing_+3A_object">object</code></td>
<td>
<p>an object of class &quot;xRing&quot; or &quot;xRingList&quot;</p>
</td></tr>
<tr><td><code id="removeRing_+3A_x">x</code></td>
<td>
<p>the position to delete the closest tree-ring border</p>
</td></tr>
<tr><td><code id="removeRing_+3A_series">series</code></td>
<td>
<p>the name of the series to be changed when the object is a &quot;xRingList&quot;, by default is NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;xRing&quot; or &quot;xRingList&quot; without the tree-ring border at the position <code>x</code> for the series given by <code>series</code> argument
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
plotRings(PaPi$AFO1001a)
abline(v = 60, lty = 2, col = 2)
PaPi$AFO1001a &lt;- removeRing(PaPi$AFO1001a, x = 60)
# PaPi$AFO1001a &lt;- removeRing(PaPi$AFO1001a, x = locator(1)$x)
plotRings(PaPi$AFO1001a)

</code></pre>

<hr>
<h2 id='selectProfiles'>Select Profile(s)</h2><span id='topic+selectProfiles'></span>

<h3>Description</h3>

<p>Uses a line to select a profile (or a region of interest), when selecting a radius the line should start at the pith side and end at the bark side of the sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectProfiles(im, nPixel = 50, cal = NULL, multiple = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectProfiles_+3A_im">im</code></td>
<td>
<p>an image</p>
</td></tr>
<tr><td><code id="selectProfiles_+3A_npixel">nPixel</code></td>
<td>
<p>the width of the line</p>
</td></tr>
<tr><td><code id="selectProfiles_+3A_cal">cal</code></td>
<td>
<p>calibration</p>
</td></tr>
<tr><td><code id="selectProfiles_+3A_multiple">multiple</code></td>
<td>
<p>a single or several profiles</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the average grayvalue along the selected line when a multiple is TRUE and a list when multiple is FALSE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (interactive()) {
  # read a sample file
  im &lt;- imRead(file = system.file("img", "AFO1046.1200dpi.png", package = "xRing"))

  # to display the image
  imDisplay(im)

  # select a profile
  profile &lt;- selectProfile(im)

  # to display the profile
  plot(profile, type = "l")
}

</code></pre>

<hr>
<h2 id='setLastYear'>Set Last Year</h2><span id='topic+setLastYear'></span>

<h3>Description</h3>

<p>Changes the calendar year of the last ring for a specific series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setLastYear(x, lastYear, series = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setLastYear_+3A_x">x</code></td>
<td>
<p>an &quot;xRing&quot; or &quot;xRingList&quot; object</p>
</td></tr>
<tr><td><code id="setLastYear_+3A_lastyear">lastYear</code></td>
<td>
<p>the new calendar year for the last tree ring</p>
</td></tr>
<tr><td><code id="setLastYear_+3A_series">series</code></td>
<td>
<p>individual series to be changed when the object is a &quot;xRingList&quot;, by default is NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the modified input object with new set last ring of the specified series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- detectRings(PaPiRaw, PaPiSpan)
plot(PaPi, series = "AFO1001b")
PaPi &lt;- setLastYear(PaPi, 2005, series = "AFO1001b")
plot(PaPi, series = "AFO1001b")

</code></pre>

<hr>
<h2 id='stepIncrease'>Calculate the Steps Thickness of the Calibration Wedge</h2><span id='topic+stepIncrease'></span>

<h3>Description</h3>

<p>convenience function to calculate the thickness of each steps of the calibration wedge for wedges with continous step increase.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stepIncrease(step.increase = 0.24, nsteps = 7)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stepIncrease_+3A_step.increase">step.increase</code></td>
<td>
<p>height increase per wedge step</p>
</td></tr>
<tr><td><code id="stepIncrease_+3A_nsteps">nsteps</code></td>
<td>
<p>total number of steps (the first step has the thickness of 0 - the area beside the wedge. Mention that when setting nsteps)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numeric vector
</p>

<hr>
<h2 id='toxRing'>Create an &quot;xRing&quot; Object</h2><span id='topic+toxRing'></span>

<h3>Description</h3>

<p>Converts a dataframe with X-ray microdensity profiles into an &quot;xRing&quot; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toxRing(x, y = NULL, seriesName)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toxRing_+3A_x">x</code></td>
<td>
<p>a dataframe with X-ray microdensity profiles</p>
</td></tr>
<tr><td><code id="toxRing_+3A_y">y</code></td>
<td>
<p>a dataframe with the numerical values of the first and last year in columns. The individual series are specified as row names.</p>
</td></tr>
<tr><td><code id="toxRing_+3A_seriesname">seriesName</code></td>
<td>
<p>the name of series from x and y to be used to produce the &quot;xRing&quot; object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an &quot;xRing&quot; object, an S3 class with the following elements:
</p>
<p><code>profile.raw</code> a <code>vector</code> with the input density profile
</p>
<p><code>span</code> first and last year
</p>
<p><code>name</code> a <code>string</code> giving the series name
</p>


<h3>See Also</h3>

<p><a href="#topic+toxRingList">toxRingList</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi.AFO1001a &lt;- toxRing(PaPiRaw, PaPiSpan, seriesName = "AFO1001a")
class(PaPi.AFO1001a)

</code></pre>

<hr>
<h2 id='toxRingList'>Create a &quot;xRingList&quot; Object</h2><span id='topic+toxRingList'></span>

<h3>Description</h3>

<p>Converts a dataframe with X-ray microdensity profiles in an &quot;xRingList&quot; object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toxRingList(x, y = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toxRingList_+3A_x">x</code></td>
<td>
<p>a dataframe with X-ray microdensity profiles</p>
</td></tr>
<tr><td><code id="toxRingList_+3A_y">y</code></td>
<td>
<p>a dataframe with the numerical values of the first and last year in columns. The individual series are specified as row names. By default is NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an &quot;xRingList&quot; object, an S3 class which list membera are &quot;xRing&quot; objects containing:
</p>
<p><code>profile.raw</code> a <code>vector</code> with the input density profile
</p>
<p><code>span</code> first and last year
</p>
<p><code>name</code> a <code>string</code> giving the series name
</p>


<h3>See Also</h3>

<p><a href="#topic+toxRing">toxRing</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(PaPiRaw)
data(PaPiSpan)
PaPi &lt;- toxRingList(PaPiRaw, PaPiSpan)
class(PaPi)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
