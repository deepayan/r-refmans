<!DOCTYPE html><html><head><title>Help for package hydrotoolbox</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hydrotoolbox}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#agg_table'><p>Aggregates a data frame to a larger time period</p></a></li>
<li><a href='#agg2annually'><p>Aggregates a data frame to annually resolution</p></a></li>
<li><a href='#agg2climatic'><p>Aggregates a data frame to climatic resolution</p></a></li>
<li><a href='#agg2daily'><p>Aggregates a data frame to daily resolution</p></a></li>
<li><a href='#agg2hourly'><p>Aggregates a data frame to hourly resolution</p></a></li>
<li><a href='#agg2monthly'><p>Aggregates a data frame to monthly resolution</p></a></li>
<li><a href='#build_table'><p>Create a basic data frame for plotting</p></a></li>
<li><a href='#check_class'><p>Check class for arguments</p></a></li>
<li><a href='#check_cross'><p>Check cross for argument coherence</p></a></li>
<li><a href='#check_length'><p>Check argument length</p></a></li>
<li><a href='#check_numeric'><p>Check numeric argument consistency</p></a></li>
<li><a href='#check_string'><p>Check string argument consistency</p></a></li>
<li><a href='#col_stats'><p>Get an specific matrix columns statistics.</p></a></li>
<li><a href='#cum_sum'><p>Cumulative sum</p></a></li>
<li><a href='#dual_y_table'><p>Rescale the data frame values in order to graph a dual y axis plot</p></a></li>
<li><a href='#fill_table'><p>Find non-reported dates and fill them with <code>NA_*</code></p></a></li>
<li><a href='#ggplot_table'><p>Creates suitable table for <code>ggplot2</code></p></a></li>
<li><a href='#hm_agg'><p>Aggregates the table inside a slot to a larger time period</p></a></li>
<li><a href='#hm_build'><p>Load native data files automatically</p></a></li>
<li><a href='#hm_build_generic'><p>Load native data files automatically</p></a></li>
<li><a href='#hm_create'><p>Creates an hydromet object.</p></a></li>
<li><a href='#hm_get'><p>Extract the slot</p></a></li>
<li><a href='#hm_melt'><p>Melt many objects into an <code>hydromet_compact</code> class object</p></a></li>
<li><a href='#hm_mutate'><p>Create, modify and delete columns inside a slot</p></a></li>
<li><a href='#hm_name'><p>Set new column names</p></a></li>
<li><a href='#hm_plot'><p>Methods to easily use <code>ggplot2</code> or <code>plotly</code> (interactive)</p></a></li>
<li><a href='#hm_report'><p>Get a summary report of your data</p></a></li>
<li><a href='#hm_set'><p>Set the data of an <code>hydromet</code> object or its subclass</p></a></li>
<li><a href='#hm_show'><p>Easy access to see your data</p></a></li>
<li><a href='#hm_subset'><p>Subset your data by dates</p></a></li>
<li><a href='#hydromet_compact-class'><p><code>hydromet</code> subclass for compact data</p></a></li>
<li><a href='#hydromet_station-class'><p><code>hydromet</code> subclass for store hydro-meteorological records.</p></a></li>
<li><a href='#hydromet-class'><p><code>hydromet</code> superclass object</p></a></li>
<li><a href='#interpolate'><p>Interpolation</p></a></li>
<li><a href='#mov_avg'><p>Moving average windows</p></a></li>
<li><a href='#qm_vol'><p>Monthly river discharge [m3/s] to volume [hm3]</p></a></li>
<li><a href='#read_aic'><p>Reads data from AIC</p></a></li>
<li><a href='#read_cr2'><p>Reads data from Explorador Climático (CR2 - Chile)</p></a></li>
<li><a href='#read_dgi'><p>Reads data from Departamento General de Irrigación - Hydrological Division</p>
(DGI - Mendoza - Argentina)</a></li>
<li><a href='#read_ianigla'><p>Reads data from Sistema de Monitoreo Meteorológico de Alta Montaña (IANIGLA - Argentina)</p></a></li>
<li><a href='#read_mnemos'><p>Reads data provided by MNEMOS software (SNIH - Argentina)</p></a></li>
<li><a href='#read_snih'><p>Reads data from Servicio Nacional de Información Hídrica <a href="https://back.argentina.gob.ar/obras-publicas/hidricas/base-de-datos-hidrologica-integrada">(SNIH - Argentina)</a></p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#report_miss'><p>Report <code>NA_real_</code> values inside a table.</p></a></li>
<li><a href='#rm_spike'><p>Remove spikes</p></a></li>
<li><a href='#roll_fun'><p>Rolling functions</p></a></li>
<li><a href='#set_threshold'><p>Set a threshold</p></a></li>
<li><a href='#set_value'><p>Set user defined values</p></a></li>
<li><a href='#swe_derive'><p>Snow Water Equivalent to melt or snowfall</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Hydrological Tools for Handling Hydro-Meteorological Data
Records</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-04-12</td>
</tr>
<tr>
<td>Author:</td>
<td>Ezequiel Toum &lt;etoum@mendoza-conicet.gob.ar&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ezequiel Toum &lt;etoum@mendoza-conicet.gob.ar&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Read, plot, manipulate and process hydro-meteorological data records (with special features for Argentina and Chile data-sets).</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, plotly, lubridate, utils, methods, readxl, reshape2,
magrittr, tibble, zoo, Rcpp</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://gitlab.com/ezetoum27/hydrotoolbox">https://gitlab.com/ezetoum27/hydrotoolbox</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://gitlab.com/ezetoum27/hydrotoolbox/-/issues">https://gitlab.com/ezetoum27/hydrotoolbox/-/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-12 19:07:50 UTC; eze</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-12 19:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='agg_table'>Aggregates a data frame to a larger time period</h2><span id='topic+agg_table'></span>

<h3>Description</h3>

<p>Aggregates a data frame to a larger time period
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg_table(
  x,
  col_name,
  fun,
  period,
  out_name = NULL,
  allow_na = 0,
  start_month = 1,
  end_month = 12
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg_table_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class <code>Date</code> or <code>POSIX*</code>
in the first column.</p>
</td></tr>
<tr><td><code id="agg_table_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg_table_+3A_fun">fun</code></td>
<td>
<p>string with supported aggregation function name (one per <span class="option">col_name</span>):
<span class="option">mean</span>, <span class="option">min</span>, <span class="option">max</span>, <span class="option">sum</span>, <span class="option">last</span> or <span class="option">first</span>.</p>
</td></tr>
<tr><td><code id="agg_table_+3A_period">period</code></td>
<td>
<p>string with the aggregation time-step: <span class="option">hourly</span>, <span class="option">daily</span>,
<span class="option">monthly</span>, <span class="option">annually</span> or <span class="option">climatic</span>. <b>NOTE</b>: the <span class="option">climatic</span>
option returns the all series annual statistics (<span class="option">fun</span>).</p>
</td></tr>
<tr><td><code id="agg_table_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with the output column(s) name(s). Default values coerce the original
name plus the <span class="option">fun</span> argument (e.g.: <code>tair_max</code>).</p>
</td></tr>
<tr><td><code id="agg_table_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of <code>NA_real_</code>
values. By default the function will not tolerate any <code>NA_real_</code> (and will return
<code>NA_real_</code> instead).</p>
</td></tr>
<tr><td><code id="agg_table_+3A_start_month">start_month</code></td>
<td>
<p>optional. Numeric value defining the first month of the annual
period (it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or
<span class="option">climatic</span>). Default sets to 1 (January). <b>NOTE</b>: keep in mind that if you
choose <span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td></tr>
<tr><td><code id="agg_table_+3A_end_month">end_month</code></td>
<td>
<p>optional. Numeric value defining the last month of the annual period
(it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or
<span class="option">climatic</span>). Default sets to 12 (December). <b>NOTE</b>: keep in mind that if
you choose <span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
         package = 'hydrotoolbox')

# read and load daily streamflow with default column name
guido_qd &lt;- read_snih(path = path, by = 'day', out_name = 'q(m3/s)')

# aggregate daily to monthly discharge
guido_q_month &lt;- agg_table(x = guido_qd, col_name = 'q(m3/s)',
                          fun = 'mean', period = 'monthly',
                          out_name = 'qm(m3/s)')

# suppose that we are interested on getting the annual maximum
# daily mean discharge for every hydrological year (since this
# station is located at the Mendoza River Basin ~32.9º S, we will
# consider that annual period starts on July)
guido_q_annual &lt;- agg_table(x = guido_qd, col_name = 'q(m3/s)',
                            fun = 'max', period = 'annually',
                            out_name = 'qmax(m3/s)',
                            start_month = 7, end_month = 6)

# now we want the mean, maximum and minimum monthly discharges
guido_q_stats &lt;- agg_table(x = guido_qd, col_name = rep('q(m3/s)', 3),
                           fun = c('mean', 'max', 'min'),
                           period = 'monthly')


</code></pre>

<hr>
<h2 id='agg2annually'>Aggregates a data frame to annually resolution</h2><span id='topic+agg2annually'></span>

<h3>Description</h3>

<p>Aggregates a data frame to annually resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg2annually(df, col_name, fun, allow_na = 0, start_month = 1, end_month = 12)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg2annually_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column.</p>
</td></tr>
<tr><td><code id="agg2annually_+3A_col_name">col_name</code></td>
<td>
<p>string (vector) with the name(s) of the column(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg2annually_+3A_fun">fun</code></td>
<td>
<p>string (vector) containing the name(s) of function(s) to use: mean, min, max, sum, last or first.</p>
</td></tr>
<tr><td><code id="agg2annually_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of NA_real_ values. By default the function will not tolerate any NA_real_ in an aggregation period (and will return NA_real_ instead).</p>
</td></tr>
<tr><td><code id="agg2annually_+3A_start_month">start_month</code></td>
<td>
<p>numeric value defining the first month of the annually period. Default sets to 1 (January).</p>
</td></tr>
<tr><td><code id="agg2annually_+3A_end_month">end_month</code></td>
<td>
<p>numeric value defining the last month of the annually period. Default sets to 12 (December).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>

<hr>
<h2 id='agg2climatic'>Aggregates a data frame to climatic resolution</h2><span id='topic+agg2climatic'></span>

<h3>Description</h3>

<p>Aggregates a data frame to climatic resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg2climatic(df, col_name, fun, allow_na = 0, start_month = 1, end_month = 12)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg2climatic_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column.</p>
</td></tr>
<tr><td><code id="agg2climatic_+3A_col_name">col_name</code></td>
<td>
<p>string (vector) with the name(s) of the column(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg2climatic_+3A_fun">fun</code></td>
<td>
<p>string (vector) containing the name(s) of function(s) to use: mean, min, max, sum, last or first.</p>
</td></tr>
<tr><td><code id="agg2climatic_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of NA_real_ values. By default the function will not tolerate any NA_real_ in an aggregation period (and will return NA_real_ instead).</p>
</td></tr>
<tr><td><code id="agg2climatic_+3A_start_month">start_month</code></td>
<td>
<p>numeric value defining the first month of the annually period. Default sets to 1 (January).</p>
</td></tr>
<tr><td><code id="agg2climatic_+3A_end_month">end_month</code></td>
<td>
<p>numeric value defining the last month of the annually period. Default sets to 12 (December).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>

<hr>
<h2 id='agg2daily'>Aggregates a data frame to daily resolution</h2><span id='topic+agg2daily'></span>

<h3>Description</h3>

<p>Aggregates a data frame to daily resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg2daily(df, col_name, fun, allow_na = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg2daily_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column.</p>
</td></tr>
<tr><td><code id="agg2daily_+3A_col_name">col_name</code></td>
<td>
<p>string (vector) with the name(s) of the column(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg2daily_+3A_fun">fun</code></td>
<td>
<p>string (vector) containing the name(s) of function(s) to use: mean, min, max, sum, last or first.</p>
</td></tr>
<tr><td><code id="agg2daily_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of NA_real_ values. By default the function will not tolerate any NA_real_ in an aggregation period (and will return NA_real_ instead).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>

<hr>
<h2 id='agg2hourly'>Aggregates a data frame to hourly resolution</h2><span id='topic+agg2hourly'></span>

<h3>Description</h3>

<p>Aggregates a data frame to hourly resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg2hourly(df, col_name, fun, allow_na = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg2hourly_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column.</p>
</td></tr>
<tr><td><code id="agg2hourly_+3A_col_name">col_name</code></td>
<td>
<p>string (vector) with the name(s) of the column(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg2hourly_+3A_fun">fun</code></td>
<td>
<p>string (vector) containing the name(s) of function(s) to use: mean, min, max, sum, last or first.</p>
</td></tr>
<tr><td><code id="agg2hourly_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of NA_real_ values. By default the function will not tolerate any NA_real_ in an aggregation period (and will return NA_real_ instead).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>

<hr>
<h2 id='agg2monthly'>Aggregates a data frame to monthly resolution</h2><span id='topic+agg2monthly'></span>

<h3>Description</h3>

<p>Aggregates a data frame to monthly resolution
</p>


<h3>Usage</h3>

<pre><code class='language-R'>agg2monthly(df, col_name, fun, allow_na = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="agg2monthly_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column.</p>
</td></tr>
<tr><td><code id="agg2monthly_+3A_col_name">col_name</code></td>
<td>
<p>string (vector) with the name(s) of the column(s) to aggregate.</p>
</td></tr>
<tr><td><code id="agg2monthly_+3A_fun">fun</code></td>
<td>
<p>string (vector) containing the name(s) of function(s) to use: mean, min, max, sum, last or first.</p>
</td></tr>
<tr><td><code id="agg2monthly_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of NA_real_ values. By default the function will not tolerate any NA_real_ in an aggregation period (and will return NA_real_ instead).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s).
</p>

<hr>
<h2 id='build_table'>Create a basic data frame for plotting</h2><span id='topic+build_table'></span>

<h3>Description</h3>

<p>Create a basic data frame for plotting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>build_table(hm_obj, slot_name, col_name, from = NULL, to = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="build_table_+3A_hm_obj">hm_obj</code></td>
<td>
<p>a valid <code>hydromet_xxx</code> class object.</p>
</td></tr>
<tr><td><code id="build_table_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the slot(s) to extract from the <code>hm_obj</code>.</p>
</td></tr>
<tr><td><code id="build_table_+3A_col_name">col_name</code></td>
<td>
<p>a list containing a vector string per slot with the name(s) of the column(s) to plot.</p>
</td></tr>
<tr><td><code id="build_table_+3A_from">from</code></td>
<td>
<p>string (or <code>POSIXct</code>) with the starting <code>date</code>. You can use 'from' without 'to'. In this case you will subset your data 'from' till the end.</p>
</td></tr>
<tr><td><code id="build_table_+3A_to">to</code></td>
<td>
<p>string (or <code>POSIXct</code>) with the ending <code>date</code>. You can use 'to' without 'from'. In this case you will subset your data from the beginning till 'to'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the date in the first column and the variables to plot on the others.
</p>

<hr>
<h2 id='check_class'>Check class for arguments</h2><span id='topic+check_class'></span>

<h3>Description</h3>

<p>Check class for arguments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_class(argument, target, arg_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_class_+3A_argument">argument</code></td>
<td>
<p>the argument to evaluate.</p>
</td></tr>
<tr><td><code id="check_class_+3A_target">target</code></td>
<td>
<p>string with the allowed class.</p>
</td></tr>
<tr><td><code id="check_class_+3A_arg_name">arg_name</code></td>
<td>
<p>string with argument name to print (just for error message)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error message if <span class="option">argument</span> does not fit the <span class="option">target</span> requirements
</p>

<hr>
<h2 id='check_cross'>Check cross for argument coherence</h2><span id='topic+check_cross'></span>

<h3>Description</h3>

<p>Check cross for argument coherence
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_cross(ref_arg, eval_arg, arg_names)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_cross_+3A_ref_arg">ref_arg</code></td>
<td>
<p>the argument for reference length.</p>
</td></tr>
<tr><td><code id="check_cross_+3A_eval_arg">eval_arg</code></td>
<td>
<p>the argument to evaluate.</p>
</td></tr>
<tr><td><code id="check_cross_+3A_arg_names">arg_names</code></td>
<td>
<p>vector string with arguments names (<code>ref_arg</code> and <code>eval_arg</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error message if <span class="option">eval_arg</span> does not fit the <span class="option">ref_arg</span> length.
</p>

<hr>
<h2 id='check_length'>Check argument length</h2><span id='topic+check_length'></span>

<h3>Description</h3>

<p>Check argument length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_length(argument, max_allow, arg_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_length_+3A_argument">argument</code></td>
<td>
<p>the argument to evaluate.</p>
</td></tr>
<tr><td><code id="check_length_+3A_max_allow">max_allow</code></td>
<td>
<p>maximum argument length</p>
</td></tr>
<tr><td><code id="check_length_+3A_arg_name">arg_name</code></td>
<td>
<p>string with argument name to print (just for error message)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error message if <span class="option">argument</span> does not fit the <span class="option">max_allow</span> requirements
</p>

<hr>
<h2 id='check_numeric'>Check numeric argument consistency</h2><span id='topic+check_numeric'></span>

<h3>Description</h3>

<p>Check numeric argument consistency
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_numeric(argument, target, arg_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_numeric_+3A_argument">argument</code></td>
<td>
<p>the argument to evaluate.</p>
</td></tr>
<tr><td><code id="check_numeric_+3A_target">target</code></td>
<td>
<p>allowed numeric values.</p>
</td></tr>
<tr><td><code id="check_numeric_+3A_arg_name">arg_name</code></td>
<td>
<p>string with argument name to print (just for error message)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error message if <span class="option">argument</span> does not fit the <span class="option">target</span> requirements
</p>

<hr>
<h2 id='check_string'>Check string argument consistency</h2><span id='topic+check_string'></span>

<h3>Description</h3>

<p>Check string argument consistency
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_string(argument, target, arg_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_string_+3A_argument">argument</code></td>
<td>
<p>the argument to evaluate.</p>
</td></tr>
<tr><td><code id="check_string_+3A_target">target</code></td>
<td>
<p>allowed string values.</p>
</td></tr>
<tr><td><code id="check_string_+3A_arg_name">arg_name</code></td>
<td>
<p>string with argument name to print (just for error message)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An error message if <span class="option">argument</span> does not fit the <span class="option">target</span> requirements
</p>

<hr>
<h2 id='col_stats'>Get an specific matrix columns statistics.</h2><span id='topic+col_stats'></span>

<h3>Description</h3>

<p>Get an specific matrix columns statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_stats(x, stats, allow_na)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col_stats_+3A_x">x</code></td>
<td>
<p>numeric matrix</p>
</td></tr>
<tr><td><code id="col_stats_+3A_stats">stats</code></td>
<td>
<p>string vector with the statistics to compute (sum, max, min, mean, first or last)</p>
</td></tr>
<tr><td><code id="col_stats_+3A_allow_na">allow_na</code></td>
<td>
<p>number of allowed NA_real_</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Numeric vector with one value per matrix column
</p>

<hr>
<h2 id='cum_sum'>Cumulative sum</h2><span id='topic+cum_sum'></span>

<h3>Description</h3>

<p>The function supports <code>NA_real_</code> values. It could be very
useful when dealing with incomplete precipitation series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cum_sum(x, col_name, out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cum_sum_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class <code>Date</code> or
<code>POSIX*</code> in the first column.</p>
</td></tr>
<tr><td><code id="cum_sum_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) where to apply the function.</p>
</td></tr>
<tr><td><code id="cum_sum_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s). If you set it
as <code>NULL</code>, the function will overwrite the original table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same table but with the new series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set path to file
path &lt;- system.file('extdata', 'ianigla_cuevas.csv',
         package = 'hydrotoolbox')

# read the file and add the new column with cumulative precipitation
cuevas &lt;-
  read_ianigla(path = path) %&gt;%
  cum_sum(col_name = 'Precip_Total', out_name = 'p_cum')

# plot it
plot(x = cuevas[ , 'date', drop = TRUE],
     y = cuevas[ , 'p_cum', drop = TRUE],
     col = 'red', type = 'l',
     xlab = 'Date', ylab = 'Pcum(mm)')

## End(Not run)


</code></pre>

<hr>
<h2 id='dual_y_table'>Rescale the data frame values in order to graph a dual y axis plot</h2><span id='topic+dual_y_table'></span>

<h3>Description</h3>

<p>Rescale the data frame values in order to graph a dual y axis plot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dual_y_table(df, y_left, y_right)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dual_y_table_+3A_df">df</code></td>
<td>
<p>data frame provided by <code>build_table</code> function.</p>
</td></tr>
<tr><td><code id="dual_y_table_+3A_y_left">y_left</code></td>
<td>
<p>string vector with column names of the variables to plot in the left y axis.</p>
</td></tr>
<tr><td><code id="dual_y_table_+3A_y_right">y_right</code></td>
<td>
<p>string vector with column names of the variables to plot in the right y axis.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing the rescaled data frame and the transformation formula.
</p>

<hr>
<h2 id='fill_table'>Find non-reported dates and fill them with <code>NA_*</code></h2><span id='topic+fill_table'></span>

<h3>Description</h3>

<p>Automatically finds non recorded date periods and fills
them with <code>NA_real_</code> values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fill_table(x, col_name = "all", by = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fill_table_+3A_x">x</code></td>
<td>
<p>data frame (or tibble) with class <code>Date</code> or <code>POSIX*</code>
in the first column.</p>
</td></tr>
<tr><td><code id="fill_table_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) to fill.</p>
</td></tr>
<tr><td><code id="fill_table_+3A_by">by</code></td>
<td>
<p>string with a valid time step (e.g.: <code>"month",
"day", "6 hour", "3 hour", "1 hour", "15 min"</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame (or tibble) with the date and the filled numeric variable(s).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# let's use a synthetic example to illustrate the use of the function
dates &lt;- seq.Date(from = as.Date('1980-01-01'),
                 to = as.Date('2020-01-01'), by = 'day' )
var   &lt;- runif(n = length(dates), min = 0, max = 100)

met_var &lt;- data.frame(date = dates, random = var)[-c(50:100, 251, 38) , ]

met_var_fill &lt;- fill_table(x = met_var, by = 'day')


</code></pre>

<hr>
<h2 id='ggplot_table'>Creates suitable table for <code>ggplot2</code></h2><span id='topic+ggplot_table'></span>

<h3>Description</h3>

<p>Creates suitable table for <code>ggplot2</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggplot_table(df, l_color, l_type, l_size, l_legend = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggplot_table_+3A_df">df</code></td>
<td>
<p>data frame with class Date or POSIXct in the first column and the variables to plot on the others.</p>
</td></tr>
<tr><td><code id="ggplot_table_+3A_l_color">l_color</code></td>
<td>
<p>string vector with a color for each line (data frame column).</p>
</td></tr>
<tr><td><code id="ggplot_table_+3A_l_type">l_type</code></td>
<td>
<p>string vector with the line type.</p>
</td></tr>
<tr><td><code id="ggplot_table_+3A_l_size">l_size</code></td>
<td>
<p>numeric vector with the line size.</p>
</td></tr>
<tr><td><code id="ggplot_table_+3A_l_legend">l_legend</code></td>
<td>
<p>string vector with the user name for legend labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame ready to use in <code>ggplot2</code>.
</p>

<hr>
<h2 id='hm_agg'>Aggregates the table inside a slot to a larger time period</h2><span id='topic+hm_agg'></span><span id='topic+hm_agg+2Chydromet_station-method'></span><span id='topic+hm_agg+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>This method allows you to get your data temporally aggregated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_agg(
  obj,
  slot_name,
  col_name,
  fun,
  period,
  out_name = NULL,
  allow_na = 0,
  start_month = 1,
  end_month = 12,
  relocate = NULL
)

## S4 method for signature 'hydromet_station'
hm_agg(
  obj,
  slot_name,
  col_name,
  fun,
  period,
  out_name = NULL,
  allow_na = 0,
  start_month = 1,
  end_month = 12,
  relocate = NULL
)

## S4 method for signature 'hydromet_compact'
hm_agg(
  obj,
  slot_name,
  col_name,
  fun,
  period,
  out_name = NULL,
  allow_na = 0,
  start_month = 1,
  end_month = 12
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_agg_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_slot_name">slot_name</code></td>
<td>
<p>string with the name of the slot to aggregate.</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) to aggregate.</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_fun">fun</code></td>
<td>
<p>string with supported aggregation function name (one per <span class="option">col_name</span>):
<span class="option">mean</span>, <span class="option">min</span>, <span class="option">max</span>, <span class="option">sum</span>, <span class="option">last</span> or <span class="option">first</span>.</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_period">period</code></td>
<td>
<p>string with the aggregation time-step: <span class="option">hourly</span>, <span class="option">daily</span>,
<span class="option">monthly</span>, <span class="option">annually</span> or <span class="option">climatic</span>. <b>NOTE 1</b>: the
<span class="option">climatic</span> option returns the all series annual statistics (<span class="option">fun</span>).
<b>NOTE 2</b>: when using <span class="option">annually</span> as <b>period</b>, the method will return
the starting dates in the first slot column.</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_out_name">out_name</code></td>
<td>
<p>string with the output column(s) name(s). Default values coerce the
original name plus the <span class="option">fun</span> argument (e.g.: <code>tair_max</code>).</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_allow_na">allow_na</code></td>
<td>
<p>optional. Numeric value with the maximum allowed number of <code>NA_real_</code>
values. By default the function will not tolerate any <code>NA_real_</code> (and will
return <code>NA_real_</code> instead).</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_start_month">start_month</code></td>
<td>
<p>optional. Numeric value defining the first month of the annual
period (it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or
<span class="option">climatic</span>). Default sets to 1 (January). <b>NOTE</b>: keep in mind that if
you choose <span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_end_month">end_month</code></td>
<td>
<p>optional. Numeric value defining the last month of the annual period
(it just make sense if <span class="option">period</span> is either <span class="option">annually</span> or <span class="option">climatic</span>).
Default sets to 12 (December). <b>NOTE</b>: keep in mind that if you choose
<span class="option">climatic</span> as period you have to round off a complete year (e.g.:
<code>..., start_month = 6, end_month = 5, ...</code>)</p>
</td></tr>
<tr><td><code id="hm_agg_+3A_relocate">relocate</code></td>
<td>
<p>optional. String with the name of the slot where to allocate the
aggregated table. It only make sense for <code>hydromet_station</code> class. When using
it you must keep in mind that all aggregated series are allocated in a single slot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the Date and the aggregated variable(s) inside the
specified slot.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_agg(hydromet_station)</code>: temporal aggregation method for station class
</p>
</li>
<li> <p><code>hm_agg(hydromet_compact)</code>: temporal aggregation method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# cuevas station
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# use the build method
hm_cuevas &lt;-
  hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
          )

# aggregate air temperature data to mean value
hm_agg(obj = hm_cuevas, slot_name = 'tair', col_name = 'tair(°C)',
      fun = 'mean', period = 'daily', out_name = 't_mean') %&gt;%
 hm_show(slot_name = 'tair')

# the previous command overwrites the original slot, so now we are going
# to relocate the agg values
hm_agg(obj = hm_cuevas, slot_name = 'tair',
      col_name = 'tair(°C)',
      fun = 'mean',
      period = 'daily',
      relocate = 'tmean',
      out_name = 'tmean(°C)',
      ) %&gt;%
 hm_show(slot_name = 'tmean')

## End(Not run)


</code></pre>

<hr>
<h2 id='hm_build'>Load native data files automatically</h2><span id='topic+hm_build'></span><span id='topic+hm_build+2Chydromet_station-method'></span>

<h3>Description</h3>

<p>The method allows you to automatically load your native data
inside the <code>hydromet_station</code> slots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_build(
  obj,
  bureau,
  path,
  file_name,
  slot_name,
  by,
  out_name = NULL,
  sheet = NULL
)

## S4 method for signature 'hydromet_station'
hm_build(
  obj,
  bureau,
  path,
  file_name,
  slot_name,
  by,
  out_name = NULL,
  sheet = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_build_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_station</code> class object.</p>
</td></tr>
<tr><td><code id="hm_build_+3A_bureau">bureau</code></td>
<td>
<p>string value containing <b>one</b> of the available options:
'aic', 'cr2', 'dgi', 'ianigla', 'mnemos' or 'snih'.</p>
</td></tr>
<tr><td><code id="hm_build_+3A_path">path</code></td>
<td>
<p>string vector with the path(s) to the <code>file_name</code> argument.
If you set a single string it will be recycled for all the files.</p>
</td></tr>
<tr><td><code id="hm_build_+3A_file_name">file_name</code></td>
<td>
<p>string vector with the native file(s) name(s).</p>
</td></tr>
<tr><td><code id="hm_build_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the slot(s) where to set the file(s) or sheet(s).</p>
</td></tr>
<tr><td><code id="hm_build_+3A_by">by</code></td>
<td>
<p>string vector with the time step of the series (e.g.: 'month', 'day', '6 hour', '3 hour',
'1 hour', '15 min' ). If you set it as 'none', the function will ignore automatic gap filling.
If you set a single string it will be recycled for all the files.</p>
</td></tr>
<tr><td><code id="hm_build_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
<tr><td><code id="hm_build_+3A_sheet">sheet</code></td>
<td>
<p>optional. Sheet to read. Either a string vector (the name of a sheet), or an integer
vector (the position of the sheet). If neither argument specifies the sheet, defaults to the first
sheet. This argument just make sense for:
</p>

<ul>
<li><p> 'aic': you must provide a single name or integer indicating the met-station to read.
</p>
</li>
<li><p> 'dgi': just keep it as <code>NULL</code>.
</p>
</li>
<li><p> 'mnemos': just keep it as <code>NULL</code>.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>hydromet_station</code> object with the required data loaded inside.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_build(hydromet_station)</code>: build method for hydromet station object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# path to all example files
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# ianigla file
hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
          ) %&gt;%
          hm_show()

# cr2 file
hm_create() %&gt;%
  hm_build(bureau = 'cr2', path = path,
           file_name = 'cr2_tmax_yeso_embalse.csv',
           slot_name = c('tmax'),
           by = 'day',
           out_name = c('tair(°C)' )
          )  %&gt;%
          hm_show()

# dgi file
hm_create() %&gt;%
  hm_build(bureau = 'dgi', path = path,
           file_name = 'dgi_toscas.xlsx',
           slot_name = c('swe', 'tmax',
           'tmin', 'tmean', 'rh', 'patm'),
           by = 'day' ) %&gt;%
          hm_show()

# snih file
hm_create() %&gt;%
  hm_build(bureau = 'snih', path = path,
           file_name = c('snih_hq_guido.xlsx',
           'snih_qd_guido.xlsx'),
           slot_name = c('hq', 'qd'),
           by = c('none', 'day') ) %&gt;%
          hm_show()

# aic    =&gt; you have to request for this files to AIC.

# mnemos =&gt; the data are the same of snih but generated
#           with MNEMOSIII software.

## End(Not run)

</code></pre>

<hr>
<h2 id='hm_build_generic'>Load native data files automatically</h2><span id='topic+hm_build_generic'></span><span id='topic+hm_build_generic+2Chydromet_station-method'></span>

<h3>Description</h3>

<p>The method allows you to automatically load your native data
inside the <code>hydromet_station</code> slots.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_build_generic(
  obj,
  path,
  file_name,
  slot_name,
  by = "none",
  out_name = NULL,
  sheet = NULL,
  FUN,
  ...
)

## S4 method for signature 'hydromet_station'
hm_build_generic(
  obj,
  path,
  file_name,
  slot_name,
  by = "none",
  out_name = NULL,
  sheet = NULL,
  FUN,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_build_generic_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_station</code> class object.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_path">path</code></td>
<td>
<p>string vector with the path(s) to the <code>file_name</code> argument.
If you set a single string it will be recycled for all the files.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_file_name">file_name</code></td>
<td>
<p>string vector with the native file(s) name(s).</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the slot(s) where to set the file(s) or sheet(s).</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_by">by</code></td>
<td>
<p>string vector with the time step of the series (e.g.: 'month',
day', '6 hour', '3 hour', '1 hour', '15 min' ). If you set it as <code>"none"</code>,
the function will ignore automatic gap filling. If you set a single string,
it will be recycled for all the files.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_out_name">out_name</code></td>
<td>
<p>optional. A list containing string vectors with user
defined variable(s) column(s) name(s). The list length should be
equal to the <code>slot_name</code> length.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_sheet">sheet</code></td>
<td>
<p>Sheet to read (only excel files). Either a string vector
(the name of a sheet) or an integer vector (the position of the sheet).
This argument just make sense for excel files.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_fun">FUN</code></td>
<td>
<p>function name for reading the data (e.g.: <code>read_csv()</code>). The method
will always use the <code>path + file</code> as first argument(s) to <code>FUN</code>.</p>
</td></tr>
<tr><td><code id="hm_build_generic_+3A_...">...</code></td>
<td>
<p><code>FUN</code> arguments to pass.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>hydromet_station</code> object with the required data loaded inside.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_build_generic(hydromet_station)</code>: build method for hydromet station object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# you can download the data from:
# https://gitlab.com/ezetoum27/hydrotoolbox/-/tree/master/my_data

# set the data path
my_path &lt;- "./home/my_folder/my_data"

#///////////////////////////////
# Rectangular data
# txt, csv, csv2 and others.
# See readr package.
#///////////////////////////////

library(readr)
#* Case 1: single file - many numeric variables

hm_create() %&gt;%
hm_build_generic(path = my_path,
                 file_name = "ianigla_cuevas.csv",
                 slot_name = c("tair", "rh", "patm",
                              "precip", "wspd", "wdir",
                              "kin", "hsnow", "tsoil"),
                 by = c("hour"),
                 FUN = read_csv,
                 col_select = !Est &amp; !YJday &amp; !hh.mm.ss &amp; !bat.Volts
                ) %&gt;%
 hm_show()

#* Case 2: multiple files (one per observation)
hm_create() %&gt;%
 hm_build_generic(path = my_path,
                  file_name = c("h_relativa_cuevas.csv",
                                "p_atm_cuevas.csv",
                                "precip_total_cuevas.csv",
                                "temp_aire_cuevas.csv",
                                "vel_viento_cuevas.csv"),
                  slot_name = c("rh", "patm", "precip",
                                "tair", "wspd"),
                  by = c("hour", "45 min", "30 min", "1 hour", "15 min"),
                  FUN = read_csv  ) %&gt;%
 hm_show()

#///////////////////////////////
# Excel files
# Recommended package =&gt; readxl
#///////////////////////////////

library(readxl)


#* Case 1: single file - one sheet - many numeric variables

hm_create() %&gt;%
 hm_build_generic(path = my_path,
                  file_name = "mnemos_guido.xlsx",
                  slot_name = c("qd"),
                  by = c("day"),
                  FUN = read_excel,
                  sheet = 1L,
                  skip = 3,
                  out_name = list("q_m3/s")
 ) %&gt;% hm_show()



#* Case 2: single file - multiple sheets (one per variable)

hm_create() %&gt;%
 hm_build_generic(path = my_path,
                  file_name = "mnemos_guido.xlsx",
                  slot_name = c("qd", "evap", "tair",
                                "tmax", "tmin"),
                  by = c(q = "day", evap =  "day", tair = "6 hour",
                         tmax = "day", tmin = "day"),
                  FUN = read_excel,
                  sheet = c(1L:5L),
                  skip = 3,
                  out_name = list( c("q_m3/s", "flag"),
                                   c("evap_mm", "flag"),
                                   c("tair", "flag"),
                                   c("tmax", "flag"),
                                   c("tmin", "flag")
                  )
 ) %&gt;%
 hm_show()

#* Case 3: multiple files - one sheet per file

hm_create() %&gt;%
  hm_build_generic(path = my_path,
                   file_name = c("discharge_daily.xlsx",
                                 "air_teperature_subdaily.xlsx"),
                   slot_name = c("qd", "tair"),
                   by = c(q = "day", tair = "6 hour"),
                   FUN = read_excel,
                   sheet = c(1L, 1L),
                   skip = 3,
                   out_name = list( c("q_m3/s", "flag"),
                                    c("tair", "flag"))
  ) %&gt;%
  hm_show()


## End(Not run)

</code></pre>

<hr>
<h2 id='hm_create'>Creates an hydromet object.</h2><span id='topic+hm_create'></span>

<h3>Description</h3>

<p>This function is the constructor of <code>hydromet</code> class and its subclass.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_create(class_name = "station")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_create_+3A_class_name">class_name</code></td>
<td>
<p>string with the name of the class. Valid arguments are:
<code>hydromet</code>, <code>station</code> or <code>compact</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An S4 object of class <code>hydromet</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create class 'hydromet'
hym_metadata &lt;- hm_create(class_name = 'hydromet')

# subclass 'station'
hym_station &lt;- hm_create(class_name = 'station')

# subclass 'compact'
hym_compact &lt;- hm_create(class_name = 'compact')

</code></pre>

<hr>
<h2 id='hm_get'>Extract the slot</h2><span id='topic+hm_get'></span><span id='topic+hm_get+2Chydromet-method'></span><span id='topic+hm_get+2Chydromet_station-method'></span><span id='topic+hm_get+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>Get the table (or metadata) that you want from an <code>hydromet</code> or <code>hydromet_XXX</code> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_get(obj, slot_name = NA_character_)

## S4 method for signature 'hydromet'
hm_get(obj, slot_name = NA_character_)

## S4 method for signature 'hydromet_station'
hm_get(obj, slot_name = NA_character_)

## S4 method for signature 'hydromet_compact'
hm_get(obj, slot_name = NA_character_)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_get_+3A_obj">obj</code></td>
<td>
<p>an <code>hydromet</code> or <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_get_+3A_slot_name">slot_name</code></td>
<td>
<p>string with slot to extract.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The required data frame or metadata.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_get(hydromet)</code>: get method for generic hydromet object
</p>
</li>
<li> <p><code>hm_get(hydromet_station)</code>: get method for station class
</p>
</li>
<li> <p><code>hm_get(hydromet_compact)</code>: get method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# set path to file
path_file &lt;- system.file('extdata', 'ianigla_cuevas.csv',
             package = 'hydrotoolbox')

# read file
cuevas &lt;-
     read_ianigla(path = path_file,
                  out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                             'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                              'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' ) )

# create and set one the variables
hm_cuevas &lt;-
 hm_create() %&gt;%
 hm_set(tair = cuevas[ , c('date', 'tair(°C)')],
        rh = cuevas[ , c("date", 'rh(%)')])


# now extract the slot of air temperature
head( hm_get(obj = hm_cuevas, slot_name = 'tair') )

# extract multiple data
out_list &lt;- list()
for(i in c("tair", "rh")){
 out_list[[ i ]] &lt;-
   hm_cuevas %&gt;%
   hm_get(slot_name = i)
 }


## End(Not run)

</code></pre>

<hr>
<h2 id='hm_melt'>Melt many objects into an <code>hydromet_compact</code> class object</h2><span id='topic+hm_melt'></span><span id='topic+hm_melt+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>This method allows you merge several tables (inside <code>hydromet_station</code> and/or
<code>hydromet_compact</code> class objects) into a single one and set them into the compact slot
(<code>hydromet_compact</code> class object).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_melt(obj, melt, slot_name, col_name, out_name = NULL)

## S4 method for signature 'hydromet_compact'
hm_melt(obj, melt, slot_name, col_name, out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_melt_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_compact</code> class object.</p>
</td></tr>
<tr><td><code id="hm_melt_+3A_melt">melt</code></td>
<td>
<p>string vector containing the  <code>hydromet_xxx</code> class objects names (as you
have in the <b>Global Environment</b>) that you want for melting.</p>
</td></tr>
<tr><td><code id="hm_melt_+3A_slot_name">slot_name</code></td>
<td>
<p>list (one element per <code>melt</code> vector name) with the slot(s) to
extract per every <code>hydromet_xxx</code> class object (as string vectors).</p>
</td></tr>
<tr><td><code id="hm_melt_+3A_col_name">col_name</code></td>
<td>
<p>string vector with the name of the variables to keep. You must comply
the following name convention <code>'melt_slot_variable'</code> (e.g.: 'guido_qd_Q(m3/s)' - where
<b>guido</b> is your object name, <b>qd</b> is the slot with daily mean river discharge
and <b>Q(m3/s)</b> is the required column name inside that slot). Another option is to set
this argument just with the string <code>'all'</code> and the method will preserve <b>all</b>
the slot(s) columns. Other minimal option is to choose the string <code>'last'</code>: in this
case you will get only the <b>last</b> column of each slot(s).</p>
</td></tr>
<tr><td><code id="hm_melt_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with the output names of the final table. If you
use the default value (<code>NULL</code>) the method will add the object and slot name
(provided in <code>melt</code> and <code>slot_name</code> argument) at the beginning of every column
(e.g.: <code>'guido_qd_q(m3/s)'</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>hydromet_compact</code> class object with a data frame inside the <code>compact</code>
slot with all variables that you provided in <code>col_name</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_melt(hydromet_compact)</code>: plot method for compact class
</p>
</li></ul>


<h3>Note</h3>

<p>Remember that all the chosen variables should have the same temporal resolution.
The method itself will not warn you about bad entries.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# lets say that we want to put together snow water equivalent from Toscas (dgi)
# and daily streamflow discharge from Guido (snih)

# path to all example files
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# on the first place we build the stations
# dgi file
toscas &lt;-
hm_create() %&gt;%
  hm_build(bureau = 'dgi', path = path,
           file_name = 'dgi_toscas.xlsx',
           slot_name = c('swe', 'tmax',
           'tmin', 'tmean', 'rh', 'patm'),
           by = 'day',
           out_name = c('swe', 'tmax',
           'tmin', 'tmean', 'rh', 'patm') )

# snih file
guido &lt;-
hm_create() %&gt;%
  hm_build(bureau = 'snih', path = path,
           file_name = c('snih_hq_guido.xlsx',
           'snih_qd_guido.xlsx'),
           slot_name = c('hq', 'qd'),
           by = c('none', 'day') )

# now we melt the requiered data
hm_create(class_name = 'compact') %&gt;%
     hm_melt(melt = c('toscas', 'guido'),
             slot_name = list(toscas = 'swe', guido = 'qd'),
             col_name = 'all',
             out_name = c('swe(mm)', 'qd(m3/s)')
             ) %&gt;%
       hm_plot(slot_name = 'compact',
               col_name = list( c('swe(mm)', 'qd(m3/s)') ),
               interactive = TRUE,
               line_color = c('dodgerblue', 'red'),
               y_lab = c('q(m3/s)', 'swe(mm)'),
               dual_yaxis = c('right', 'left')
                )

## End(Not run)


</code></pre>

<hr>
<h2 id='hm_mutate'>Create, modify and delete columns inside a slot</h2><span id='topic+hm_mutate'></span><span id='topic+hm_mutate+2Chydromet_station-method'></span><span id='topic+hm_mutate+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>This method allows you to modify whatever (except <code>'date'</code> column)
you want inside a slot data frame. Since this package was designed with the aim of providing
useful objects to store and track changes in hydro-meteorological series, is not recommend
to delete or change the original data, but it is upon to you.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_mutate(obj, slot_name, FUN, ...)

## S4 method for signature 'hydromet_station'
hm_mutate(obj, slot_name, FUN, ...)

## S4 method for signature 'hydromet_compact'
hm_mutate(obj, slot_name, FUN, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_mutate_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_mutate_+3A_slot_name">slot_name</code></td>
<td>
<p>string with the a valid name.</p>
</td></tr>
<tr><td><code id="hm_mutate_+3A_fun">FUN</code></td>
<td>
<p>function name. The function output must be a data frame with
the first column being the <code>Date</code>. Note that <code>hydrotoolbox</code> provides common
used hydrological functions: see for example <a href="#topic+mov_avg">mov_avg</a>. An interesting function to use is
<code>mutate</code> from <code>dplyr</code> package.</p>
</td></tr>
<tr><td><code id="hm_mutate_+3A_...">...</code></td>
<td>
<p><code>FUN</code> arguments to pass.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same object but with the modified slot's data frame
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_mutate(hydromet_station)</code>: method for station class.
</p>
</li>
<li> <p><code>hm_mutate(hydromet_compact)</code>: method for compact class.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# path to all example files
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# build the snih station file
guido &lt;-
hm_create() %&gt;%
  hm_build(bureau = 'snih', path = path,
           file_name = c('snih_hq_guido.xlsx',
           'snih_qd_guido.xlsx'),
           slot_name = c('hq', 'qd'),
           by = c('none', 'day') ) %&gt;%
  hm_name(slot_name = 'qd',
          col_name = 'q(m3/s)')

 # apply a moving average windows to streamflow records
hm_mutate(obj = guido, slot_name = 'qd',
          FUN = mov_avg, k = 10,
          pos = 'c', out_name = 'mov_avg') %&gt;%
 hm_plot(slot_name = 'qd',
         col_name = list(c('q(m3/s)', 'mov_avg') ),
         interactive = TRUE,
         line_color = c('dodgerblue', 'red3'),
         y_lab = 'Q(m3/s)',
         legend_lab = c('original', 'mov_avg')  )

## End(Not run)


</code></pre>

<hr>
<h2 id='hm_name'>Set new column names</h2><span id='topic+hm_name'></span><span id='topic+hm_name+2Chydromet_station-method'></span><span id='topic+hm_name+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>Change slot's column names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_name(obj, slot_name, col_name)

## S4 method for signature 'hydromet_station'
hm_name(obj, slot_name, col_name)

## S4 method for signature 'hydromet_compact'
hm_name(obj, slot_name, col_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_name_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_*</code> class object.</p>
</td></tr>
<tr><td><code id="hm_name_+3A_slot_name">slot_name</code></td>
<td>
<p>string with the a valid name.</p>
</td></tr>
<tr><td><code id="hm_name_+3A_col_name">col_name</code></td>
<td>
<p>string vector with new column names.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same object but with new column names.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_name(hydromet_station)</code>: set new column name for station class
</p>
</li>
<li> <p><code>hm_name(hydromet_compact)</code>: set new column name for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# path to all example files
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# we first build the snih station file
guido &lt;-
hm_create() %&gt;%
  hm_build(bureau = 'snih', path = path,
           file_name = c('snih_hq_guido.xlsx',
           'snih_qd_guido.xlsx'),
           slot_name = c('hq', 'qd'),
           by = c('none', 'day') )

 guido %&gt;% hm_show(slot_name = 'qd')

# now we can change default names
hm_name(obj = guido, slot_name = 'qd',
        col_name = 'q(m3/s)') %&gt;%
        hm_show(slot_name = 'qd')

## End(Not run)

</code></pre>

<hr>
<h2 id='hm_plot'>Methods to easily use <code>ggplot2</code> or <code>plotly</code> (interactive)</h2><span id='topic+hm_plot'></span><span id='topic+hm_plot+2Chydromet_station-method'></span><span id='topic+hm_plot+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>This method allows you to make plots (using simple and expressive arguments)
of the variables contained inside an <code>hydromet_XXX</code> class object.
The plot outputs can be static (<code>ggplot2</code>) or dynamic (<code>plotly</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_plot(
  obj,
  slot_name,
  col_name,
  interactive = FALSE,
  line_type = NULL,
  line_color = NULL,
  line_size = NULL,
  line_alpha = NULL,
  x_lab = "date",
  y_lab = "y",
  title_lab = NULL,
  legend_lab = NULL,
  dual_yaxis = NULL,
  from = NULL,
  to = NULL,
  scatter = NULL
)

## S4 method for signature 'hydromet_station'
hm_plot(
  obj,
  slot_name,
  col_name,
  interactive = FALSE,
  line_type = NULL,
  line_color = NULL,
  line_size = NULL,
  line_alpha = NULL,
  x_lab = "date",
  y_lab = "y",
  title_lab = NULL,
  legend_lab = NULL,
  dual_yaxis = NULL,
  from = NULL,
  to = NULL,
  scatter = NULL
)

## S4 method for signature 'hydromet_compact'
hm_plot(
  obj,
  slot_name,
  col_name,
  interactive = FALSE,
  line_type = NULL,
  line_color = NULL,
  line_size = NULL,
  line_alpha = NULL,
  x_lab = "date",
  y_lab = "y",
  title_lab = NULL,
  legend_lab = NULL,
  dual_yaxis = NULL,
  from = NULL,
  to = NULL,
  scatter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_plot_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the name of the slot(s) to use in plotting.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_col_name">col_name</code></td>
<td>
<p>list containing the column name of the variables to plot. Every element inside
the list belongs to the previous defined slot(s).</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_interactive">interactive</code></td>
<td>
<p>logical. Default value, <code>FALSE</code>, will return a <code>ggplot2</code>
class object. Otherwise you will get a <code>plotly</code> one.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_line_type">line_type</code></td>
<td>
<p>string with the name of the line dash type (<code>ggplot2</code>) or mode in
the <code>plotly</code> case. <code>ggplot2</code>: <code>'solid'</code> (default value), <code>'twodash'</code>,
<code>'longdash'</code>, <code>'dotted'</code>, <code>'dotdash'</code>, <code>'dashed'</code> or <code>'blank'</code>.
<code>plotly</code>: <code>'lines'</code> (default value), <code>'lines+markers'</code> or <code>'markers'</code>.
<b>NOTE:</b> when using <code>scatter</code> plot this arguments goes through the <code>shape</code>
argument (in <code>geom_point()</code>) as numeric.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_line_color">line_color</code></td>
<td>
<p>string with a valid <code>color</code> name. See <code>'colors()'</code> or
<a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf">Rcolor document</a>.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_line_size">line_size</code></td>
<td>
<p>numeric vector containing the size of every line to plot. If you use
the <code>NULL</code> value it will return the plots with default(s) for either
<code>ggplot2</code> or <code>plotly</code>.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_line_alpha">line_alpha</code></td>
<td>
<p>numeric vector with line(s) transparency. From 0 (invisible) to 1.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_x_lab">x_lab</code></td>
<td>
<p>string with <code>x axis</code> label. Default is <code>'Date'</code>.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_y_lab">y_lab</code></td>
<td>
<p>string with <code>y axis</code> label. In case you use <code>dual_yaxis</code>
argument you must supply both <code>c('ylab', 'y2lab')</code>.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_title_lab">title_lab</code></td>
<td>
<p>string with the title of the plot. Default is a plot without title.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_legend_lab">legend_lab</code></td>
<td>
<p>string vector with plot label(s) name(s).</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_dual_yaxis">dual_yaxis</code></td>
<td>
<p>string vector suggesting which variables are assign either to
the <code>'left'</code> or <code>'right'</code> y axis.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_from">from</code></td>
<td>
<p>string value for <code>'Date'</code> class or <code>POSIXct(lt)</code> class
for date-time data with the starting <code>Date</code>. You can use <code>'from'</code>
without <code>'to'</code>. In this case you will subset your data <code>'from'</code> till the end.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_to">to</code></td>
<td>
<p>string value for <code>'Date'</code> class or <code>POSIXct(lt)</code> class for date-time
data with the ending <code>Date</code>. You can use <code>'to'</code> without <code>'from'</code>.
In this case you will subset your data from the beginning till <code>'to'</code>.</p>
</td></tr>
<tr><td><code id="hm_plot_+3A_scatter">scatter</code></td>
<td>
<p>string vector (of length two) suggesting which variables goes in
the <code>'x'</code> and <code>'y'</code> axis respectively. Valid character entries
are <code>'x'</code> and <code>'y'</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ggplot2</code> or <code>plotly</code> object.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_plot(hydromet_station)</code>: plot method for station class
</p>
</li>
<li> <p><code>hm_plot(hydromet_compact)</code>: plot method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# lets work with the cuevas station
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# use the build method
hm_cuevas &lt;-
  hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
           )

# let's start by making a single variable static plot
hm_plot(obj = hm_cuevas, slot_name = 'tair',
        col_name = list('tair(°C)') )

# we add labels, change color, line type and we focus
# on specific date range
hm_plot(obj = hm_cuevas, slot_name = 'tair',
        col_name = list('tair(°C)'),
        line_type = 'longdash',
        line_color = 'dodgerblue',
        x_lab = 'Date time', y_lab = 'T(°C)',
        title_lab = 'Hourly temperature at Cuevas',
        legend_lab = 'Tair',
        from = ISOdate(2020, 7, 1),
        to = ISOdate(2020, 7, 5))

# compare air with soil temperature
hm_plot(obj = hm_cuevas, slot_name = c('tair', 'tsoil'),
        col_name = list('tair(°C)', 'tsoil(°C)'),
        line_type = c('longdash', 'solid'),
        line_color = c('dodgerblue', 'tan4'),
        x_lab = 'Date time', y_lab = 'T(°C)',
        title_lab = 'Hourly temperature at Cuevas',
        legend_lab = c('Tair', 'Tsoil'),
        from = ISOdate(2020, 7, 1),
        to = ISOdate(2020, 7, 5))

# let's add relative humidity on the right y-axis
hm_plot(obj = hm_cuevas, slot_name = c('tair', 'tsoil', 'rh'),
        col_name = list('tair(°C)', 'tsoil(°C)', 'rh(%)'),
        line_type = c('longdash', 'solid', 'solid'),
        line_color = c('dodgerblue', 'tan4', 'red'),
        x_lab = 'Date time', y_lab = c('T(°C)', 'RH(%)'),
        title_lab = 'Hourly meteo data at Cuevas',
        legend_lab = c('Tair', 'Tsoil', 'RH'),
        dual_yaxis = c('left', 'left', 'right'),
        from = ISOdate(2020, 7, 1),
        to = ISOdate(2020, 7, 5))

# we decide to analize the previous variables in detail
# with a dynamic plot
hm_plot(obj = hm_cuevas, slot_name = c('tair', 'tsoil', 'rh'),
        col_name = list('tair(°C)', 'tsoil(°C)', 'rh(%)'),
        line_color = c('dodgerblue', 'tan4', 'red'),
        x_lab = 'Date time', y_lab = c('T(°C)', 'RH(%)'),
        title_lab = 'Hourly meteo data at Cuevas',
        legend_lab = c('Tair', 'Tsoil', 'RH'),
        dual_yaxis = c('left', 'left', 'right'),
        interactive = TRUE)
# click on the Zoom icon and play a little...


# suppose now that we want to make a scatter plot to show
# the negative correlation between air temperature and
# relative humidity
hm_plot(obj = hm_cuevas, slot_name = c('tair', 'rh'),
        col_name = list('tair(°C)', 'rh(%)'),
        line_color = 'dodgerblue',
        x_lab = 'Tair', y_lab = 'RH',
        scatter = c('x', 'y') )

## End(Not run)


</code></pre>

<hr>
<h2 id='hm_report'>Get a summary report of your data</h2><span id='topic+hm_report'></span><span id='topic+hm_report+2Chydromet_station-method'></span><span id='topic+hm_report+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>Returns a list with two elements: the first one contains basic
statistics (<code>mean</code>, <code>sd</code>, <code>max</code> and <code>min</code>) values and
the second one is a table with summary of miss data (see also <a href="#topic+report_miss">report_miss</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_report(obj, slot_name, col_name = "all")

## S4 method for signature 'hydromet_station'
hm_report(obj, slot_name, col_name = "all")

## S4 method for signature 'hydromet_compact'
hm_report(obj, slot_name = "compact", col_name = "all")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_report_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_report_+3A_slot_name">slot_name</code></td>
<td>
<p>string with the name of the slot to report.</p>
</td></tr>
<tr><td><code id="hm_report_+3A_col_name">col_name</code></td>
<td>
<p>string vector with the column(s) name(s) to report. By default
the function will do it in all columns inside the slot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list summarizing basic statistics and missing data.
The missing data table presents a data frame (one per <code>col_name</code>)
with three columns: start-date, end-date and number of missing
time steps. In the last row of this table you will find the total
number of missing measurements (under &quot;time_step&quot; column). The
&quot;first&quot; and &quot;last&quot; columns will have a <code>NA_character</code> for
this last row.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_report(hydromet_station)</code>: report method for station class
</p>
</li>
<li> <p><code>hm_report(hydromet_compact)</code>: report method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# cuevas station
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# use the build method
hm_cuevas &lt;-
  hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
          )

# report incoming solar radiation
hm_report(obj = hm_cuevas, slot_name = 'kin')

## End(Not run)

</code></pre>

<hr>
<h2 id='hm_set'>Set the data of an <code>hydromet</code> object or its subclass</h2><span id='topic+hm_set'></span><span id='topic+hm_set+2Chydromet-method'></span><span id='topic+hm_set+2Chydromet_station-method'></span><span id='topic+hm_set+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>With this method you can set (or change) an specific slot value (change the table).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_set(
  obj = NULL,
  id = NULL,
  agency = NULL,
  station = NULL,
  lat = NULL,
  long = NULL,
  alt = NULL,
  country = NULL,
  province = NULL,
  river = NULL,
  active = NULL,
  basin_area = NULL,
  basin_eff = NULL,
  other_1 = NULL,
  other_2 = NULL,
  ...
)

## S4 method for signature 'hydromet'
hm_set(
  obj = NULL,
  id = NULL,
  agency = NULL,
  station = NULL,
  lat = NULL,
  long = NULL,
  alt = NULL,
  country = NULL,
  province = NULL,
  river = NULL,
  active = NULL,
  basin_area = NULL,
  basin_eff = NULL,
  other_1 = NULL,
  other_2 = NULL,
  ...
)

## S4 method for signature 'hydromet_station'
hm_set(
  obj = NULL,
  id = NULL,
  agency = NULL,
  station = NULL,
  lat = NULL,
  long = NULL,
  alt = NULL,
  country = NULL,
  province = NULL,
  river = NULL,
  active = NULL,
  basin_area = NULL,
  basin_eff = NULL,
  other_1 = NULL,
  other_2 = NULL,
  hq = NULL,
  hw = NULL,
  qh = NULL,
  qd = NULL,
  qa = NULL,
  qm = NULL,
  wspd = NULL,
  wdir = NULL,
  evap = NULL,
  anem = NULL,
  patm = NULL,
  rh = NULL,
  tair = NULL,
  tmax = NULL,
  tmin = NULL,
  tmean = NULL,
  tsoil = NULL,
  precip = NULL,
  rainfall = NULL,
  swe = NULL,
  hsnow = NULL,
  kin = NULL,
  kout = NULL,
  lin = NULL,
  lout = NULL,
  unvar = NULL
)

## S4 method for signature 'hydromet_compact'
hm_set(
  obj = NULL,
  id = NULL,
  agency = NULL,
  station = NULL,
  lat = NULL,
  long = NULL,
  alt = NULL,
  country = NULL,
  province = NULL,
  river = NULL,
  active = NULL,
  basin_area = NULL,
  basin_eff = NULL,
  other_1 = NULL,
  other_2 = NULL,
  compact = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_set_+3A_obj">obj</code></td>
<td>
<p>an <code>hydromet</code> or <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_id">id</code></td>
<td>
<p>ANY. This is the ID assigned by the agency.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_agency">agency</code></td>
<td>
<p>character. The name of the agency (or institution) that provides the data of the station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_station">station</code></td>
<td>
<p>character. The name of the (hydro)-meteorological station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_lat">lat</code></td>
<td>
<p>numeric. Latitude of the station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_long">long</code></td>
<td>
<p>numeric. Longitude of the station</p>
</td></tr>
<tr><td><code id="hm_set_+3A_alt">alt</code></td>
<td>
<p>numeric. Altitute of the station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_country">country</code></td>
<td>
<p>character. Country where the station is located. Argentina is set as default value.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_province">province</code></td>
<td>
<p>character. Name of the province where the station is located. Mendoza is set as default value.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_river">river</code></td>
<td>
<p>character. Basin river's name.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_active">active</code></td>
<td>
<p>logical. It indicates whether or not the station is currently operated. Default value is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_basin_area">basin_area</code></td>
<td>
<p>numeric. The basin area (km2) of the catchment upstream of the gauge.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_basin_eff">basin_eff</code></td>
<td>
<p>numeric. The effective area (km2) of the basin upstream of the gauge. In Canada, many basins have
variable contributing fractions. In these basins, the effective area of the basin contributes flow to the outlet at
least one year in two.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_other_1">other_1</code></td>
<td>
<p>ANY. It is the first free-to-fill slot in order to give you the chance to write extra information about your
hydro-met station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_other_2">other_2</code></td>
<td>
<p>ANY. It is the second free-to-fill slot in order to give you the chance to write extra information about your
hydro-met station.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_...">...</code></td>
<td>
<p>arguments to be passed to methods. They rely on the slots of the <code>obj</code> subclass.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_hq">hq</code></td>
<td>
<p>water-height vs stream-discharge measurements.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_hw">hw</code></td>
<td>
<p>water level records.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_qh">qh</code></td>
<td>
<p>hourly mean river discharge.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_qd">qd</code></td>
<td>
<p>daily mean river discharge.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_qa">qa</code></td>
<td>
<p>annual river discharge.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_qm">qm</code></td>
<td>
<p>monthly mean river discharge.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_wspd">wspd</code></td>
<td>
<p>wind speed.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_wdir">wdir</code></td>
<td>
<p>wind direction.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_evap">evap</code></td>
<td>
<p>pan-evaporation.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_anem">anem</code></td>
<td>
<p>anemometer wind speed records (usually installed above the pan-evap tank).</p>
</td></tr>
<tr><td><code id="hm_set_+3A_patm">patm</code></td>
<td>
<p>atmospheric pressure.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_rh">rh</code></td>
<td>
<p>relative humidity.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_tair">tair</code></td>
<td>
<p>air temperature (typically recorded at hourly time-step).</p>
</td></tr>
<tr><td><code id="hm_set_+3A_tmax">tmax</code></td>
<td>
<p>daily maximum recorded air temperature.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_tmin">tmin</code></td>
<td>
<p>daily minimum recorded air temperature.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_tmean">tmean</code></td>
<td>
<p>daily mean air temperature.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_tsoil">tsoil</code></td>
<td>
<p>soil temperature.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_precip">precip</code></td>
<td>
<p>total (snow and rain) precipitation records.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_rainfall">rainfall</code></td>
<td>
<p>liquid only precipitation measurements.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_swe">swe</code></td>
<td>
<p>snow water equivalent (typically recorded on snow pillows).</p>
</td></tr>
<tr><td><code id="hm_set_+3A_hsnow">hsnow</code></td>
<td>
<p>snow height from ultrasonic devices.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_kin">kin</code></td>
<td>
<p>incoming short-wave radiation.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_kout">kout</code></td>
<td>
<p>outgoing short-wave radiation.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_lin">lin</code></td>
<td>
<p>incoming long-wave radiation.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_lout">lout</code></td>
<td>
<p>outgoing long-wave radiation.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_unvar">unvar</code></td>
<td>
<p>reserved for non-considered variables.</p>
</td></tr>
<tr><td><code id="hm_set_+3A_compact">compact</code></td>
<td>
<p>data frame with Date as first column. All other columns are hydro-meteorological variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The hydromet object with the slots set.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_set(hydromet)</code>: set method for generic object
</p>
</li>
<li> <p><code>hm_set(hydromet_station)</code>: set method for <code>station</code> object
</p>
</li>
<li> <p><code>hm_set(hydromet_compact)</code>: set method for <code>compact</code> object
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create an hydro-met station
hm_guido &lt;- hm_create(class_name = 'station')

# assign altitude
hm_guido &lt;- hm_set(obj = hm_guido, alt = 2480)

# now we read streamflow - water height measurements
path_file &lt;- system.file('extdata', 'snih_hq_guido.xlsx',
package = 'hydrotoolbox')
guido_hq  &lt;- read_snih(path = path_file, by = 'none',
             out_name = c('h(m)', 'q(m3/s)',
                            'q_coarse_solid(kg/s)',
                            'q_fine_solid(kg/s)') )

# set the new data frame
 # note: you can do it manually but using the hm_build() method
 #       is stromgly recommended
hm_guido &lt;- hm_set(obj = hm_guido, hq = guido_hq)
hm_show(obj = hm_guido)

## End(Not run)

</code></pre>

<hr>
<h2 id='hm_show'>Easy access to see your data</h2><span id='topic+hm_show'></span><span id='topic+hm_show+2Chydromet-method'></span><span id='topic+hm_show+2Chydromet_station-method'></span><span id='topic+hm_show+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>This method shows the 'head', 'tail' or 'all'
data from specific slot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_show(obj, slot_name = "fill", show = "head")

## S4 method for signature 'hydromet'
hm_show(obj, slot_name = "fill", show = "head")

## S4 method for signature 'hydromet_station'
hm_show(obj, slot_name = "fill", show = "head")

## S4 method for signature 'hydromet_compact'
hm_show(obj, slot_name = "compact", show = "head")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_show_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_show_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the name of the slot(s) to show. Alternatively
you can use <code>'fill'</code> or <code>'empty'</code> to get the data frames with or without
data respectively.</p>
</td></tr>
<tr><td><code id="hm_show_+3A_show">show</code></td>
<td>
<p>string with either <code>'head'</code>, <code>'tail'</code> or <code>'all'</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It prints the data inside the required slot.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_show(hydromet)</code>: print method for hydromet class
</p>
</li>
<li> <p><code>hm_show(hydromet_station)</code>: print method for station class
</p>
</li>
<li> <p><code>hm_show(hydromet_compact)</code>: print method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# lets work with the cuevas station
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# use the build method
hm_cuevas &lt;-
  hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
          )

# now we want to know which are the slots with data
hm_show(obj = hm_cuevas)

# see the last values of our data
hm_show(obj = hm_cuevas, show = 'tail')

# print the entire tables
hm_show(obj = hm_cuevas, show = "all")

# or maybe we want to know which slot have no data
hm_show(obj = hm_cuevas, slot_name = 'empty')

# focus on specific slots
hm_show(obj = hm_cuevas, slot_name = c('kin', 'rh') )
hm_show(obj = hm_cuevas, slot_name = c('kin', 'rh'), show = 'tail' )

## End(Not run)

</code></pre>

<hr>
<h2 id='hm_subset'>Subset your data by dates</h2><span id='topic+hm_subset'></span><span id='topic+hm_subset+2Chydromet_station-method'></span><span id='topic+hm_subset+2Chydromet_compact-method'></span>

<h3>Description</h3>

<p>The method will subset the required slot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hm_subset(obj, slot_name = "all", from = NULL, to = NULL)

## S4 method for signature 'hydromet_station'
hm_subset(obj, slot_name = "all", from = NULL, to = NULL)

## S4 method for signature 'hydromet_compact'
hm_subset(obj, slot_name = "all", from = NULL, to = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hm_subset_+3A_obj">obj</code></td>
<td>
<p>a valid <code>hydromet_XXX</code> class object.</p>
</td></tr>
<tr><td><code id="hm_subset_+3A_slot_name">slot_name</code></td>
<td>
<p>string vector with the name(s) of the slot(s) to subset. If you use
'all' as argument the method will subset all the variables with data.</p>
</td></tr>
<tr><td><code id="hm_subset_+3A_from">from</code></td>
<td>
<p>string <code>Date</code> or <code>POSIX*</code> value with the starting date. You can
use <code>from</code> without <code>to</code>. In this case you will subset your data <code>from</code>
till the end.</p>
</td></tr>
<tr><td><code id="hm_subset_+3A_to">to</code></td>
<td>
<p>string <code>Date</code> or <code>POSIX*</code> value with the starting date. You can
use <code>to</code> without <code>from</code>. In this case you will subset your data from the
beginning till <code>to</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same <code>hydromet_XXX</code> class object provided in <code>obj</code> but subsetted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>hm_subset(hydromet_station)</code>: subset method for station class
</p>
</li>
<li> <p><code>hm_subset(hydromet_compact)</code>: subset method for compact class
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# cuevas station
path &lt;- system.file('extdata', package = 'hydrotoolbox')

# use the build method
hm_cuevas &lt;-
  hm_create() %&gt;%
  hm_build(bureau = 'ianigla', path = path,
           file_name = 'ianigla_cuevas.csv',
           slot_name = c('tair', 'rh', 'patm',
                         'precip', 'wspd', 'wdir',
                         'kin', 'hsnow', 'tsoil'),
           by = 'hour',
           out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                        'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                        'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' )
          )

# subset relative humidity and plot it
hm_subset(obj = hm_cuevas, slot_name = 'rh',
          from = ISOdate(2020, 2, 1),
          to = ISOdate(2020, 4, 1) ) %&gt;%
  hm_plot(slot_name = 'rh',
          col_name = list('rh(%)'),
          interactive = TRUE,
          y_lab = 'RH(%)' )

## End(Not run)

</code></pre>

<hr>
<h2 id='hydromet_compact-class'><code>hydromet</code> subclass for compact data</h2><span id='topic+hydromet_compact-class'></span><span id='topic+hydromet_compact'></span>

<h3>Description</h3>

<p>This subclass is useful for storing in a single data frame ready to use hydro-meteorological series or many variables of the same kind (e.g. lets say precipitation series).
</p>


<h3>Value</h3>

<p>A hydromet_compact class object.
</p>


<h3>Slots</h3>


<dl>
<dt><code>compact</code></dt><dd><p>data.frame with Date as first column (class 'Date' or 'POSIXct'). All other columns are the numeric hydro-meteorological variables (double). This subclass was though to join in a single table ready to use data (e.g. in modeling). You can also use it to put together variables of the same kind (e.g. precipitation records) to make some regional analysis.</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create an compact station
hm_create(class_name = "compact")

## End(Not run)
</code></pre>

<hr>
<h2 id='hydromet_station-class'><code>hydromet</code> subclass for store hydro-meteorological records.</h2><span id='topic+hydromet_station-class'></span><span id='topic+hydromet_station'></span>

<h3>Description</h3>

<p>A suitable object for store your hydro-meteorological data.
</p>


<h3>Value</h3>

<p>An hydromet_station class object.
</p>


<h3>Slots</h3>


<dl>
<dt><code>hq</code></dt><dd><p>water-height vs stream-discharge measurements.</p>
</dd>
<dt><code>hw</code></dt><dd><p>water level records.</p>
</dd>
<dt><code>qh</code></dt><dd><p>hourly mean river discharge.</p>
</dd>
<dt><code>qd</code></dt><dd><p>daily mean river discharge.</p>
</dd>
<dt><code>qm</code></dt><dd><p>monthly mean river discharge.</p>
</dd>
<dt><code>qa</code></dt><dd><p>annual river discharge.</p>
</dd>
<dt><code>wspd</code></dt><dd><p>wind speed.</p>
</dd>
<dt><code>wdir</code></dt><dd><p>wind direction.</p>
</dd>
<dt><code>evap</code></dt><dd><p>pan-evaporation.</p>
</dd>
<dt><code>anem</code></dt><dd><p>anemometer wind speed records (usually installed above the pan-evap tank).</p>
</dd>
<dt><code>patm</code></dt><dd><p>atmospheric pressure.</p>
</dd>
<dt><code>rh</code></dt><dd><p>relative humidity.</p>
</dd>
<dt><code>tair</code></dt><dd><p>air temperature (typically recorded at hourly time-step).</p>
</dd>
<dt><code>tmax</code></dt><dd><p>daily maximum recorded air temperature.</p>
</dd>
<dt><code>tmin</code></dt><dd><p>daily minimum recorded air temperature.</p>
</dd>
<dt><code>tmean</code></dt><dd><p>daily mean air temperature.</p>
</dd>
<dt><code>tsoil</code></dt><dd><p>soil temperature.</p>
</dd>
<dt><code>precip</code></dt><dd><p>total (snow and rain) precipitation records.</p>
</dd>
<dt><code>rainfall</code></dt><dd><p>liquid only precipitation measurements.</p>
</dd>
<dt><code>swe</code></dt><dd><p>snow water equivalent (typically recorded on snow pillows).</p>
</dd>
<dt><code>hsnow</code></dt><dd><p>snow height from ultrasonic devices.</p>
</dd>
<dt><code>kin</code></dt><dd><p>incoming short-wave radiation.</p>
</dd>
<dt><code>kout</code></dt><dd><p>outgoing short-wave radiation.</p>
</dd>
<dt><code>lin</code></dt><dd><p>incoming long-wave radiation.</p>
</dd>
<dt><code>lout</code></dt><dd><p>outgoing long-wave radiation.</p>
</dd>
<dt><code>unvar</code></dt><dd><p>reserved for non-considered variables.</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create an hydromet station
hm_create(class_name = "station")

## End(Not run)

</code></pre>

<hr>
<h2 id='hydromet-class'><code>hydromet</code> superclass object</h2><span id='topic+hydromet-class'></span><span id='topic+hydromet'></span>

<h3>Description</h3>

<p>A suitable object for store basic information about an hydro-meteorological station.
</p>


<h3>Value</h3>

<p>A basic hydromet class object. This class is provided in order to set the meta-data of the station.
</p>


<h3>Slots</h3>


<dl>
<dt><code>id</code></dt><dd><p>ANY. This is the ID assigned by the agency.</p>
</dd>
<dt><code>agency</code></dt><dd><p>string. The name of the agency (or institution) that provides the data of the station.</p>
</dd>
<dt><code>station</code></dt><dd><p>string. The name of the (hydro)-meteorological station.</p>
</dd>
<dt><code>lat</code></dt><dd><p>numeric. Latitude of the station.</p>
</dd>
<dt><code>long</code></dt><dd><p>numeric. Longitude of the station</p>
</dd>
<dt><code>alt</code></dt><dd><p>numeric. Altitude of the station.</p>
</dd>
<dt><code>country</code></dt><dd><p>string. Country where the station is located. Argentina is set as default value.</p>
</dd>
<dt><code>province</code></dt><dd><p>string. Name of the province where the station is located. Mendoza is set as default value.</p>
</dd>
<dt><code>river</code></dt><dd><p>string. Basin river's name.</p>
</dd>
<dt><code>active</code></dt><dd><p>logical. It indicates whether or not the station is currently operated. Default value is <code>TRUE</code>.</p>
</dd>
<dt><code>basin_area</code></dt><dd><p>numeric. The basin area (km2) of the catchment upstream of the gauge.</p>
</dd>
<dt><code>basin_eff</code></dt><dd><p>numeric. The effective area (km2) of the basin upstream of the gauge. In Canada, many basins have
variable contributing fractions. In these basins, the effective area of the basin contributes flow to the outlet at
least one year in two.</p>
</dd>
<dt><code>other_1</code></dt><dd><p>ANY. It is the first free-to-fill slot in order to give you the chance to write extra information about your
hydro-met station.</p>
</dd>
<dt><code>other_2</code></dt><dd><p>ANY. It is the second free-to-fill slot in order to give you the chance to write extra information about your
hydro-met station.</p>
</dd>
</dl>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# create class hydromet
hm_create(class_name = "hydromet")

## End(Not run)


</code></pre>

<hr>
<h2 id='interpolate'>Interpolation</h2><span id='topic+interpolate'></span>

<h3>Description</h3>

<p>This function applies interpolation to fill in missing
(or non-recorded) values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate(
  x,
  col_name,
  out_name = NULL,
  miss_table,
  threshold,
  method = "linear"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interpolate_+3A_x">x</code></td>
<td>
<p>data frame with class <code>Date</code> or <code>POSIX*</code>
in the first column and numeric on the others.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_col_name">col_name</code></td>
<td>
<p>string with column name of the series to interpolate.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column name. If you set
it as <code>NULL</code>, the function will overwrite the original data frame.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_miss_table">miss_table</code></td>
<td>
<p>data frame with three columns: first and last date
of interpolation (first and second column respectively). The last and
third column, is of class <code>numeric</code> with the number of steps
to interpolate. See <a href="#topic+report_miss">report_miss</a>.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_threshold">threshold</code></td>
<td>
<p>numeric variable with the maximum number of dates
in which to apply the interpolation.</p>
</td></tr>
<tr><td><code id="interpolate_+3A_method">method</code></td>
<td>
<p>string with the interpolation method. In this version only
<code>'linear'</code> method is allowed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data frame but with interpolated values.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# read cuevas station file
path &lt;- system.file('extdata', 'ianigla_cuevas.csv',
        package = 'hydrotoolbox')

cuevas &lt;- read_ianigla(path = path)

# get the miss_table
miss_data &lt;- report_miss(x = cuevas, col_name = 'Irradiancia')[[1]]

# apply interpolation function when gap is less than 3 hours
cuevas_interpo &lt;- interpolate(x = cuevas,
                              col_name = 'Irradiancia',
                              out_name = 'kin_interpo',
                              miss_table = miss_data,
                              threshold = 3)

report_miss(x = cuevas_interpo,
            col_name = c('Irradiancia', 'kin_interpo'))


</code></pre>

<hr>
<h2 id='mov_avg'>Moving average windows</h2><span id='topic+mov_avg'></span>

<h3>Description</h3>

<p>Smooth numeric series with a moving average windows.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mov_avg(
  x,
  col_name = "last",
  k,
  pos = "c",
  out_name = NULL,
  from = NULL,
  to = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mov_avg_+3A_x">x</code></td>
<td>
<p>data frame (or tibble) with class <code>Date</code> or
<code>POSIX*</code> in the first column.</p>
</td></tr>
<tr><td><code id="mov_avg_+3A_col_name">col_name</code></td>
<td>
<p>string vector with the column(s) name(s) of the series to smooth. The default value
uses the <code>'last'</code> column. Another single string choice is to use <code>'all'</code>.
Is important to keep in mind that this argument <b>commands</b>, so if you provide two columns
names, <code>k</code> and <code>pos</code> arguments must be of length two; if not the single value will
be recycled.</p>
</td></tr>
<tr><td><code id="mov_avg_+3A_k">k</code></td>
<td>
<p>numeric vector with the windows size. E.g.: <code>k = 5</code>.</p>
</td></tr>
<tr><td><code id="mov_avg_+3A_pos">pos</code></td>
<td>
<p>string vector with the position of the windows: </p>

<ul>
<li><p> 'c': center (default). The output value is in the middle of the window.
</p>
</li>
<li><p> 'l': left aligned. The output value is on the left, so the function weights
the <code>(k - 1)</code> values at the right side.
</p>
</li>
<li><p> 'r': right aligned. The output value is on the right, so the function weights
the <code>(k - 1)</code> values at the left side.
</p>
</li></ul>
</td></tr>
<tr><td><code id="mov_avg_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with new column names. If you set it as <code>NULL</code>
the function will overwrite the original series.</p>
</td></tr>
<tr><td><code id="mov_avg_+3A_from">from</code></td>
<td>
<p>optional. String value for <code>'Date'</code> class or <code>POSIX*</code> class for date-time
data containing the starting <code>Date</code>.</p>
</td></tr>
<tr><td><code id="mov_avg_+3A_to">to</code></td>
<td>
<p>optional. String value for <code>'Date'</code> class or <code>POSIX*</code> class for date-time
data containing the ending <code>Date</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data frame but with the smooth series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# read guido daily streamflow records
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
        package = 'hydrotoolbox')

# read and apply the function
qd_guido &lt;-
  read_snih(path = path, by = 'day', out_name = 'q(m3/s)') %&gt;%
  mov_avg(k = 5, out_name = 'q_smooth')



</code></pre>

<hr>
<h2 id='qm_vol'>Monthly river discharge [m3/s] to volume [hm3]</h2><span id='topic+qm_vol'></span>

<h3>Description</h3>

<p>Converts mean monthly river discharge [m3/s] to total volume discharge [hm3].
</p>


<h3>Usage</h3>

<pre><code class='language-R'>qm_vol(x, col_name, out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="qm_vol_+3A_x">x</code></td>
<td>
<p>data frame with class Date in the first column and
numeric on the others.</p>
</td></tr>
<tr><td><code id="qm_vol_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) where to apply the function.</p>
</td></tr>
<tr><td><code id="qm_vol_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s). If you set it as <code>NULL</code>,
the function will overwrite the original data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data frame but with the total volume discharge.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# read guido daily streamflow records
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
        package = 'hydrotoolbox')

# read, aggregate the function to monthly resolution and get the volume
qm_guido &lt;-
  read_snih(path = path, by = 'day', out_name = 'q(m3/s)') %&gt;%
  agg_table(col_name = 'q(m3/s)', fun = 'mean', period = 'monthly',
            out_name = 'qm(m3/s)') %&gt;%
  qm_vol(col_name = 'qm(m3/s)', out_name = 'vm(hm3)')


</code></pre>

<hr>
<h2 id='read_aic'>Reads data from AIC</h2><span id='topic+read_aic'></span>

<h3>Description</h3>

<p>Reads excel files provided by the AIC.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_aic(
  path,
  by = "day",
  out_name = NULL,
  sheet = NULL,
  skip = 12,
  get_sheet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_aic_+3A_path">path</code></td>
<td>
<p>path to the xlsx file.</p>
</td></tr>
<tr><td><code id="read_aic_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day', '6 hour',
'3 hour', '1 hour', '15 min' </code>). By default this argument is set to <code>'day'</code>. If
you set it as <code>'none'</code>, the function will ignore automatic gap filling.</p>
</td></tr>
<tr><td><code id="read_aic_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
<tr><td><code id="read_aic_+3A_sheet">sheet</code></td>
<td>
<p>optional. Sheet to read. Either a string (the name of a sheet), or an integer
(the position of the sheet). If neither argument specifies the sheet, defaults to the
first sheet.</p>
</td></tr>
<tr><td><code id="read_aic_+3A_skip">skip</code></td>
<td>
<p>optional. Minimum number of rows to skip before reading anything, be it
column names or data. Leading empty rows are automatically skipped, so this is a lower bound.</p>
</td></tr>
<tr><td><code id="read_aic_+3A_get_sheet">get_sheet</code></td>
<td>
<p>logical indicating whether you want to print available sheet names
(<code>TRUE</code>) in the file or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the xlsx file. Gaps between dates are filled with <code>NA_real_</code> and duplicated rows are eliminated automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# This files are provided by AIC under legal agreement only.

</code></pre>

<hr>
<h2 id='read_cr2'>Reads data from Explorador Climático (CR2 - Chile)</h2><span id='topic+read_cr2'></span>

<h3>Description</h3>

<p>Reads csv files downloaded from the CR2 web page as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_cr2(path, by = "day", out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_cr2_+3A_path">path</code></td>
<td>
<p>path to the csv file.</p>
</td></tr>
<tr><td><code id="read_cr2_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day',
'6 hour', '3 hour', '1 hour', '15 min' </code>). The default and unique possible
value is <code>'day'</code>.</p>
</td></tr>
<tr><td><code id="read_cr2_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s)
column(s) name(s).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the csv file. Gaps between dates are
filled with <code>NA_real_</code> and duplicated rows are eliminated automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# list cr2 files
list.files( system.file('extdata', package = 'hydrotoolbox'), pattern = 'cr2' )

# set path to file
path_tmax &lt;- system.file('extdata', 'cr2_tmax_yeso_embalse.csv',
             package = 'hydrotoolbox')

# read file with default colname
head( read_cr2(path = path_tmax) )

# assign a column name
head( read_cr2(path = path_tmax, out_name = 'tmax(°C)') )

</code></pre>

<hr>
<h2 id='read_dgi'>Reads data from Departamento General de Irrigación - Hydrological Division
(DGI - Mendoza - Argentina)</h2><span id='topic+read_dgi'></span>

<h3>Description</h3>

<p>Reads excel files provided by the DGI (Hydrological Division).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_dgi(path, by = "day", out_name = NULL, sheet = NULL, get_sheet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_dgi_+3A_path">path</code></td>
<td>
<p>path to the xlsx file.</p>
</td></tr>
<tr><td><code id="read_dgi_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day', '6 hour',
'3 hour', '1 hour', '15 min' </code>). By default this argument is set to <code>'day'</code>.
If you set it as <code>'none'</code>, the function will ignore automatic gap filling.</p>
</td></tr>
<tr><td><code id="read_dgi_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
<tr><td><code id="read_dgi_+3A_sheet">sheet</code></td>
<td>
<p>optional. Sheet to read. Either a string (the name of a sheet), or an integer
(the position of the sheet). If neither argument specifies the sheet, defaults to the first sheet.</p>
</td></tr>
<tr><td><code id="read_dgi_+3A_get_sheet">get_sheet</code></td>
<td>
<p>logical indicating whether you want to print available sheet names (<code>TRUE</code>)
in the file or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the xlsx file. Gaps between dates are filled
with <code>NA_real_</code> and duplicated rows are eliminated automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'dgi_toscas.xlsx',
             package = 'hydrotoolbox')

# because dgi files has multiple sheets we take a look
# on them
read_dgi(path = path_file, get_sheet = TRUE)

# read swe with default column names
head( read_dgi(path = path_file, sheet = 'swe') )

# assign name
head( read_dgi(path = path_file, sheet = 'swe', out_name = 'swe(mm)') )

# now read relative humidity
head( read_dgi(path = path_file, sheet = 'hr', out_name = 'rh(%)') )


</code></pre>

<hr>
<h2 id='read_ianigla'>Reads data from Sistema de Monitoreo Meteorológico de Alta Montaña (IANIGLA - Argentina)</h2><span id='topic+read_ianigla'></span>

<h3>Description</h3>

<p>Reads csv files downloaded from the Sistema de Monitoreo Meteorológico de Alta Montaña
web page as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_ianigla(path, by = "1 hour", out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_ianigla_+3A_path">path</code></td>
<td>
<p>path to the csv file.</p>
</td></tr>
<tr><td><code id="read_ianigla_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day', '6 hour', '3 hour',
'1 hour', '15 min' </code>). The default value is <code>'1 hour'</code>. If you set it as <code>'none'</code>,
the function will ignore automatic gap filling.</p>
</td></tr>
<tr><td><code id="read_ianigla_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the csv file. Gaps between dates are filled with
<code>NA_real_</code> and duplicated rows are eliminated automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'ianigla_cuevas.csv',
             package = 'hydrotoolbox')

# read with default names
head( read_ianigla(path = path_file) )

# set column names
head(
read_ianigla(path = path_file,
             out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                           'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                           'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)' ) )
)

</code></pre>

<hr>
<h2 id='read_mnemos'>Reads data provided by MNEMOS software (SNIH - Argentina)</h2><span id='topic+read_mnemos'></span>

<h3>Description</h3>

<p>Reads xlsx files generated with MNEMOS software.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_mnemos(
  path,
  by = "none",
  out_name = NULL,
  sheet = NULL,
  skip = 3,
  get_sheet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_mnemos_+3A_path">path</code></td>
<td>
<p>path to the xlsx file.</p>
</td></tr>
<tr><td><code id="read_mnemos_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day', '6 hour',
'3 hour', '1 hour', '15 min' </code>). If you set it as <code>'none'</code>, the function will ignore
automatic gap filling.</p>
</td></tr>
<tr><td><code id="read_mnemos_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
<tr><td><code id="read_mnemos_+3A_sheet">sheet</code></td>
<td>
<p>optional. Sheet to read. Either a string (the name of a sheet), or an integer
(the position of the sheet). If neither argument specifies the sheet, defaults to the
first sheet.</p>
</td></tr>
<tr><td><code id="read_mnemos_+3A_skip">skip</code></td>
<td>
<p>optional. Minimum number of rows to skip before reading anything, be it column
names or data. Leading empty rows are automatically skipped, so this is a lower bound.</p>
</td></tr>
<tr><td><code id="read_mnemos_+3A_get_sheet">get_sheet</code></td>
<td>
<p>logical indicating whether you want to print available variables (<code>TRUE</code>)
in every file sheet or not.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the specified sheet. Gaps between dates are
filled with <code>NA_real_</code> and duplicated rows are eliminated automatically. In case
you set <code>get_sheet = TRUE</code> the function will return a <code>list</code> with the variables
inside each sheet.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# list mnemos files
list.files( system.file('extdata', package = 'hydrotoolbox'), pattern = 'mnemos' )

# set path
path &lt;- system.file('extdata', 'mnemos_guido.xlsx',  package = 'hydrotoolbox')

# we can see which variables are inside the sheet's file
read_mnemos(path = path, get_sheet = TRUE)

# now we want to read the maximum temperature
tmax_guido &lt;- read_mnemos(path = path, by = 'day',
                          out_name = 'tmax(ºC)', sheet = '11413-016')



</code></pre>

<hr>
<h2 id='read_snih'>Reads data from Servicio Nacional de Información Hídrica <a href="https://back.argentina.gob.ar/obras-publicas/hidricas/base-de-datos-hidrologica-integrada">(SNIH - Argentina)</a></h2><span id='topic+read_snih'></span>

<h3>Description</h3>

<p>Reads excel files downloaded from the SNIH web page as a data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_snih(path, by, out_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_snih_+3A_path">path</code></td>
<td>
<p>path to the xlsx file.</p>
</td></tr>
<tr><td><code id="read_snih_+3A_by">by</code></td>
<td>
<p>string with the time step of the series (e.g.: <code>'month', 'day', '6 hour',
'3 hour', '1 hour', '15 min' </code>). If you set it as <code>'none'</code>, the function will
ignore automatic gap filling.</p>
</td></tr>
<tr><td><code id="read_snih_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with user defined variable(s) column(s) name(s).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with the data inside the xlsx file. Gaps between dates are
filled with <code>NA_real_</code> and duplicated rows are eliminated automatically.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'snih_qd_guido.xlsx', package = 'hydrotoolbox')

# read daily streamflow with default column name
head( read_snih(path = path_file, by = 'day') )

# now we use the function with column name
head( read_snih(path = path_file,  by = 'day', out_name = 'qd(m3/s)') )


</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='report_miss'>Report <code>NA_real_</code> values inside a table.</h2><span id='topic+report_miss'></span>

<h3>Description</h3>

<p>Creates a data frame with reported dates and number of
times-step of missing or not recorded data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>report_miss(x, col_name = "all")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="report_miss_+3A_x">x</code></td>
<td>
<p>data frame with hydro-meteo data. First column is date and
the second the numeric vector to be reported.</p>
</td></tr>
<tr><td><code id="report_miss_+3A_col_name">col_name</code></td>
<td>
<p>string vector with the column(s) name(s) to report.
By default the function will report all numeric columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing a data frame (one per <code>col_name</code>)
with three columns: start-date, end-date and number of missing
time steps. In the last row of the table you will find the total
number of missing measurements (under &quot;time_step&quot; column). That's why
under start and end-date columns you will find <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# read guido daily streamflow records
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
        package = 'hydrotoolbox')

# load raw data
qd_guido &lt;-
  read_snih(path = path, by = 'day', out_name = 'q(m3/s)') %&gt;%
  mov_avg(k = 5, out_name = 'q_smooth')

# get the data report
qd_guido %&gt;%
  report_miss()



</code></pre>

<hr>
<h2 id='rm_spike'>Remove spikes</h2><span id='topic+rm_spike'></span>

<h3>Description</h3>

<p>Remove spikes and set their value as <code>NA_real_</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rm_spike(x, col_name, out_name = NULL, tolerance)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rm_spike_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class Date or POSIX*
in the first column.</p>
</td></tr>
<tr><td><code id="rm_spike_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) where to apply the function.</p>
</td></tr>
<tr><td><code id="rm_spike_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s).
If you set it as <code>NULL</code>, the function will overwrite the
original table.</p>
</td></tr>
<tr><td><code id="rm_spike_+3A_tolerance">tolerance</code></td>
<td>
<p>numeric vector with the maximum tolerance between
a number and its successor. If you provide a single value it will
be recycled.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same table but with the peaks removed.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'ianigla_cuevas.csv',
             package = 'hydrotoolbox')

# read with default names
cuevas &lt;- read_ianigla(path = path_file,
                       out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                                    'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                                    'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)') )

# remove spikes in snow heigh series
cuevas %&gt;%
  rm_spike(col_name = 'hsnow(cm)',
           out_name = 'hsnow',
           tolerance = 50) # 50 cm of snow its OK for this zone


</code></pre>

<hr>
<h2 id='roll_fun'>Rolling functions</h2><span id='topic+roll_fun'></span>

<h3>Description</h3>

<p>It provides a generic function to rolling table columns.
Internally it is using <code>rollapplyr</code> from package <code>zoo</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>roll_fun(
  x,
  col_name = "last",
  k,
  pos = "c",
  FUN,
  ...,
  out_name = NULL,
  from = NULL,
  to = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="roll_fun_+3A_x">x</code></td>
<td>
<p>data frame (or tibble) with class <code>Date</code> or
<code>POSIX*</code> in the first column.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_col_name">col_name</code></td>
<td>
<p>string vector with the column(s) name(s) of the series to roll.
The default value uses the <code>'last'</code> column. Another single string choice
is to use <code>'all'</code>. Is important to keep in mind that this argument
<b>commands</b>, so if you provide two columns
names, <code>k</code> and <code>pos</code> arguments must be of length two; if not the
single value will be recycled.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_k">k</code></td>
<td>
<p>numeric vector with the windows size. E.g.: <code>k = 5</code>.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_pos">pos</code></td>
<td>
<p>string vector with the position of the windows: </p>

<ul>
<li><p> 'c': center (default). The output value is in the middle of the window.
</p>
</li>
<li><p> 'l': left aligned. The output value is on the left, so the function weights
the <code>(k - 1)</code> values at the right side.
</p>
</li>
<li><p> 'r': right aligned. The output value is on the right, so the function weights
the <code>(k - 1)</code> values at the left side.
</p>
</li></ul>
</td></tr>
<tr><td><code id="roll_fun_+3A_fun">FUN</code></td>
<td>
<p>the function to be applied.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_...">...</code></td>
<td>
<p>optional arguments to <code>FUN</code>.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_out_name">out_name</code></td>
<td>
<p>optional. String vector with new column names. If you set
it as <code>NULL</code> the function will overwrite the original series.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_from">from</code></td>
<td>
<p>optional. String value for <code>'Date'</code> class or <code>POSIX*</code>
class for date-time data containing the starting <code>Date</code>.</p>
</td></tr>
<tr><td><code id="roll_fun_+3A_to">to</code></td>
<td>
<p>optional. String value for <code>'Date'</code> class or <code>POSIX*</code>
class for date-time data containing the ending <code>Date</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same table but with the rolling series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# read guido daily streamflow records
path &lt;- system.file('extdata', 'snih_qd_guido.xlsx',
        package = 'hydrotoolbox')

# read and apply the function
qd_guido &lt;-
  read_snih(path = path, by = 'day', out_name = 'q(m3/s)') %&gt;%
  roll_fun(k = 5, FUN = mean, na.rm = TRUE,
   out_name = 'q_smooth')



</code></pre>

<hr>
<h2 id='set_threshold'>Set a threshold</h2><span id='topic+set_threshold'></span>

<h3>Description</h3>

<p>Set tolerable extreme values (maximum or minimum). Records greater or
equal than ('&gt;=') or lesser or equal than ('&lt;=') 'threshold' argument are set
to <code>NA_real_</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_threshold(x, col_name, out_name = NULL, threshold, case = "&gt;=")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_threshold_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class Date or POSIX* in the first column.</p>
</td></tr>
<tr><td><code id="set_threshold_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) where to apply the function.</p>
</td></tr>
<tr><td><code id="set_threshold_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s). If you set it
as <code>NULL</code>, the function will overwrite the original table.</p>
</td></tr>
<tr><td><code id="set_threshold_+3A_threshold">threshold</code></td>
<td>
<p>numeric vector with the threshold value(s).
If you provide a single value it will be recycled among <code>col_name</code> strings.</p>
</td></tr>
<tr><td><code id="set_threshold_+3A_case">case</code></td>
<td>
<p>string with either &quot;&gt;=&quot; (greater or equal than) or &quot;&lt;=&quot; (lesser or
equal than) symbol. Default string is &quot;&gt;=&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data frame but with the threshold set.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'ianigla_cuevas.csv',
             package = 'hydrotoolbox')

# read with default names
cuevas &lt;- read_ianigla(path = path_file,
                       out_name = c('tair(°C)', 'rh(%)', 'patm(mbar)',
                                    'p(mm)', 'wspd(km/hr)', 'wdir(°)',
                                    'kin(kW/m2)', 'hsnow(cm)', 'tsoil(°C)') )

# remove values higher than 1.50 meters
cuevas %&gt;%
  set_threshold(col_name = 'hsnow(cm)',
                out_name = 'hsnow_thres',
                threshold = 150 )


</code></pre>

<hr>
<h2 id='set_value'>Set user defined values</h2><span id='topic+set_value'></span>

<h3>Description</h3>

<p>Specify specific values between dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_value(x, col_name, out_name = NULL, value, from, to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_value_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class <code>Date</code> or <code>POSIX*</code>
in the first column.</p>
</td></tr>
<tr><td><code id="set_value_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) to set.</p>
</td></tr>
<tr><td><code id="set_value_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s). If you set it
as <code>NULL</code>, the function will overwrite the original data frame.</p>
</td></tr>
<tr><td><code id="set_value_+3A_value">value</code></td>
<td>
<p>numeric vector with the numeric values to set between
dates (<code>from</code> and <code>to</code>). If you provide a number it will be
recycled. When using a multiple dates (i.e.: &quot;date&quot; vector in <code>from</code>
and <code>to</code>) use a list with a numeric vector inside each element.</p>
</td></tr>
<tr><td><code id="set_value_+3A_from">from</code></td>
<td>
<p>string vector for <code>'Date'</code> class or <code>POSIX*</code> class
for date-time data with the starting date.</p>
</td></tr>
<tr><td><code id="set_value_+3A_to">to</code></td>
<td>
<p>string vector for <code>'Date'</code> class or <code>POSIX*</code> class
for date-time data with the ending date.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same table but with the set numeric values between the dates.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# create a data frame
dates   &lt;- seq.Date(from = as.Date('1990-01-01'), to = as.Date('1990-12-01'), by = 'm')
met_var &lt;- runif(n = 12, 0, 10)

met_table &lt;- data.frame(dates, met_var)

# set single value recycling
set_value(x = met_table, col_name = 'met_var', value = 10,
 from = '1990-01-01', to = '1990-06-01' )

# set different periods
set_value(x = met_table, col_name = 'met_var', value = list(NA_real_, c(1, 2) ),
 from = c('1990-01-01', '1990-11-01'), to = c('1990-06-01', '1990-12-01') )

# now set as new columns
set_value(x = met_table, col_name = 'met_var', out_name = 'met_set',
 value = list(NA_real_, c(1, 2) ),
 from = c('1990-01-01', '1990-11-01'),
  to = c('1990-06-01', '1990-12-01') )

</code></pre>

<hr>
<h2 id='swe_derive'>Snow Water Equivalent to melt or snowfall</h2><span id='topic+swe_derive'></span>

<h3>Description</h3>

<p>Derive melt or snowfall series from snow water
equivalent measurements (snow pillows measurements).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swe_derive(x, col_name, out_name = NULL, case)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="swe_derive_+3A_x">x</code></td>
<td>
<p>data frame or tibble with class Date or POSIX* in the
first column.</p>
</td></tr>
<tr><td><code id="swe_derive_+3A_col_name">col_name</code></td>
<td>
<p>string with column(s) name(s) where to apply the function.</p>
</td></tr>
<tr><td><code id="swe_derive_+3A_out_name">out_name</code></td>
<td>
<p>optional. String with new column(s) name(s). If you
set it as <code>NULL</code>, the function will overwrite the original table.</p>
</td></tr>
<tr><td><code id="swe_derive_+3A_case">case</code></td>
<td>
<p>string vector with &quot;sf&quot; (meaning snowfall) or &quot;m&quot; (meaning melt).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The same data frame but with the derived series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set path to file
path_file &lt;- system.file('extdata', 'dgi_toscas.xlsx',
             package = 'hydrotoolbox')

# swe table
swe_toscas &lt;- read_dgi(path = path_file,
                       sheet = 'swe',
                       out_name = 'swe(mm)')

# add melt and snowfall
swe_toscas &lt;-
  swe_toscas %&gt;%
  swe_derive(col_name = rep('swe(mm)', 2),
             out_name = c('melt(mm)', 'snowfall(mm)'),
             case = c('m', 'sf') )


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
