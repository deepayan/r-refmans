<!DOCTYPE html><html lang="en"><head><title>Help for package kollaR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {kollaR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#animated_fixation_plot'><p>Create GIF animation of fixations on a stimulus images</p></a></li>
<li><a href='#aoi_test'><p>Test whether a gaze coordinates are within or outside a rectangular or elliptical AOI.</p>
The aois df must contain the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value and
type where rect means that the AOI is a rectangle and circle that the AOI is a circle or ellipse
If a column called name is present, the output for each
AOI will be labelled accordingly. Otherwise, the output will be labelled according to the order of the AOI in the data frame.
The df 'gaze' must contain the variables onset, duration, x, and y.
Latency will be defined as the value in onset of the first detected gaze coordinate in the AOI Make sure
that the timestamps are correct!
The function can be used with gaze data either fixations, saccades, or single samples. Note that the output variables are not equally relevant for all types of
gaze data. For example, both total duration and latency are relevant in many analyses focusing on fixations, but total duration may be less relevant in analyses of
saccades.</a></li>
<li><a href='#cluster2m'><p>Fixation detection by two-means clustering</p></a></li>
<li><a href='#downsample_gaze'><p>Downsample gaze</p></a></li>
<li><a href='#draw_aois'><p>Draw one or more areas of interest, AOIs, on a stimulus image and save to the R prompt.</p>
The input is the path to a 2D image. Supported file formats: JPEG, BMP, PNG.
The function returns a data frame with all saved AOIs. By default, AOIs are drawn in a
coordinate system where y is 0 in the lower extreme of the image, e.g., an ascending y axis. Tobii eye trackers use a coordinate system with a descending
y-axis, e.g., x and y are 0 in the upper left corner of the image. Make sure that your AOIS match the coordinate system of your eye tracker output.
By setting the parameter reverse.y.axis to TRUE, the saved AOIs will be reformatted to fit a coordinate system with a descending y-axis.
All AOIS have the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value</a></li>
<li><a href='#filt_plot_2d'><p>Plot fixation filtered vs. raw or unfiltered gaze coordinates in 2D space.</p></a></li>
<li><a href='#filt_plot_temporal'><p>Plot fixation filtered vs. raw gaze coordinates</p></a></li>
<li><a href='#find.transition.weights'><p>Find transition weights for each sample in a gaze matrix.</p></a></li>
<li><a href='#idt_filter'><p>Dispersion-based fixation detection algorithm <code>(I-DT)</code></p></a></li>
<li><a href='#interpolate_with_margin'><p>Interpolate over gaps (subsequent NAs) in vector.</p></a></li>
<li><a href='#ivt_filter'><p>I-VT algorithm for fixation and saccade detection</p></a></li>
<li><a href='#kollaR-package'><p>Filtering, Visualization, and Analysis of Eye Tracking Data</p></a></li>
<li><a href='#merge_adjacent_fixations'><p>Merge adjacent fixations</p></a></li>
<li><a href='#plot_filter_results'><p>Plot validity measures from one or more fixation detection algorithms</p></a></li>
<li><a href='#plot_sample_velocity'><p>Plot the sample-to-sample velocity of eye tracking data.</p></a></li>
<li><a href='#plot_velocity_profiles'><p>Create ggplot of saccade velocity profiles</p></a></li>
<li><a href='#process_gaze'><p>Interpolation and smoothing of gaze-vector</p></a></li>
<li><a href='#sample.data.filtered'><p>Fixation-filtered sample-by-sample example data</p></a></li>
<li><a href='#sample.data.fixation1'><p>Fixations from 1 individual</p></a></li>
<li><a href='#sample.data.fixations'><p>Fixations from 7 individuals</p></a></li>
<li><a href='#sample.data.processed'><p>Pre-processed sample-by-sample example data</p></a></li>
<li><a href='#sample.data.saccades'><p>Saccades from 3 individuals</p></a></li>
<li><a href='#sample.data.unprocessed'><p>Unprocessed sample-by-sample example data</p></a></li>
<li><a href='#static_plot'><p>Plot fixations in 2D space overlaied on a stimulus image</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Filtering, Visualization and Analysis of Eye Tracking Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for analysing eye tracking data, including event detection (I-VT, I-DT and two means clustering),
  visualizations and area of interest (AOI) based analyses. See separate documentation for each function. The principles underlying I-VT and I-DT filters are described in 
  Salvucci &amp; Goldberg (2000,\doi{10.1145/355017.355028}). Two-means clustering is described in Hessels et al. (2017, \doi{10.3758/s13428-016-0822-1}).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, ggplot2, zoo, ggforce, tidyr, ggpubr, jpeg, patchwork,
shiny, plotly, base64enc, magick, scales</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-20 15:39:48 UTC; jolu7095</td>
</tr>
<tr>
<td>Author:</td>
<td>Johan Lundin Kleberg [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Johan Lundin Kleberg &lt;johan.lundin.kleberg@su.se&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-02-20 17:20:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='animated_fixation_plot'>Create GIF animation of fixations on a stimulus images</h2><span id='topic+animated_fixation_plot'></span>

<h3>Description</h3>

<p>This function plots and returns a .gif showing fixations on a background with one or multiple images, typically the stimuli.
The interval to plot is defined by sample numbers. Fixations must have the variables x, y, and onset. The function works with .jpg images. If paths to multiple images
are given, all will be displayed. Fixations are shown on a white background if no background images are defined. .gif images can be saved to a file.
Gaze data are plotted on a reversed y-axis where x and y are 0 is the upper left corner, corresponding to the structure of data from Tobii eye trackers. If there are multiple participants specified in the
variable id, each participant will get a unique color. You may get an error message if some participants lack data during single frames. This is usually no cause for concern.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>animated_fixation_plot(
  gazedata,
  xres = 1920,
  yres = 1080,
  plot.onset,
  plot.offset,
  background.images = NA,
  filename = "scanpath.gif",
  save.gif = FALSE,
  gif.dpi = 300,
  gazepoint.size = 2,
  n.loops = 1,
  show.legend = TRUE,
  id_color_map = NA,
  resolution.scaling = 0.5,
  framerate = 10,
  show.progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="animated_fixation_plot_+3A_gazedata">gazedata</code></td>
<td>
<p>Data frame with fixation data which must include columns for x and y coordinates as well as the
variable onset which indicates the onset of the fixation. Make sure the onset variables match the timing  the plot.onset and plot.offset input.
If the categorical or factor variable id is included, separate colors will represent each participant. Make sure the onset variables match the timing  the plot.onset and plot.offset input.</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_xres">xres</code></td>
<td>
<p>horizontal resolution of the screen or area to plot on. Default 1920</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_yres">yres</code></td>
<td>
<p>vertical resolution of the screen or area to plot on. Default 1080</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_plot.onset">plot.onset</code></td>
<td>
<p>Onset of the interval in the gaze_data$onset variable to plot in the same unit, typically milliseconds</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_plot.offset">plot.offset</code></td>
<td>
<p>Offset of the interval in the corresponding to the variable onset in the input data frame gazedata to plot in the same unit, typically milliseconds</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_background.images">background.images</code></td>
<td>
<p>data frame with information about background images to use as background. The data frame must include the variables min.x, min.y, max.x, and max.y variables representing
where the images should be placed on the background, the variable path specifying a full file path, and the onset and offset of each image in units corresponding to the time stamps of the gazedata
matrix. Background images should be in JPEG format. This is an example:
<code>
background.images &lt;- data.frame(
                      min.x = c(100, 800),
                      min.y = c(100, 100),
                      max.x = c(300, 100),
                      max.y = c(600, 600),
                      path = c("~/path_to_image1/image1.jpg", "~/path_to_image1/image2.jpg"),
                      onset = c(1, 4000),
                      offset = c(4000, 6000)</code></p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_filename">filename</code></td>
<td>
<p>Name of path where the .gif is saved</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_save.gif">save.gif</code></td>
<td>
<p>If TRUE, save the created .gif file under the name specified in the filename parameter</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_gif.dpi">gif.dpi</code></td>
<td>
<p>Resolution in dpi if .gif is saved. Lower values give smaller files.</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_gazepoint.size">gazepoint.size</code></td>
<td>
<p>Size of marker representing fixation coordinates.</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_n.loops">n.loops</code></td>
<td>
<p>Specify the number of times to play the plotted sequence. Default is 1. If n.loops is 0, the .gif will play in an eternal loop</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_show.legend">show.legend</code></td>
<td>
<p>If TRUE, show values of the variable id in legend</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_id_color_map">id_color_map</code></td>
<td>
<p>A character vector with HEX color codes for each id. If <code>NA</code>, a color map with unique colors for each id is created by the function.
You can create a specific color map for your data using the following code:
new_color_map &lt;-  <code>c("#FB61D7", "#00C094")</code>
names(new_color_map) &lt;-  <code>c("Id1", "Id2")</code></p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_resolution.scaling">resolution.scaling</code></td>
<td>
<p>Scaling of the original images and gaze data. Default is 0.5. Decreasing the size of the images can make the function quicker.
This can be useful if you want to assign specific colors for different groups</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_framerate">framerate</code></td>
<td>
<p>Frames per seconds of the returned animation. Default 10</p>
</td></tr>
<tr><td><code id="animated_fixation_plot_+3A_show.progress">show.progress</code></td>
<td>
<p>If TRUE, show progression of the function in the prompt</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a magick animation of raw and fixated values plotted on the y axis and sample number on the x axis
</p>

<hr>
<h2 id='aoi_test'>Test whether a gaze coordinates are within or outside a rectangular or elliptical AOI.
The aois df must contain the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value and
type where rect means that the AOI is a rectangle and circle that the AOI is a circle or ellipse
If a column called name is present, the output for each
AOI will be labelled accordingly. Otherwise, the output will be labelled according to the order of the AOI in the data frame.
The df 'gaze' must contain the variables onset, duration, x, and y.
Latency will be defined as the value in onset of the first detected gaze coordinate in the AOI Make sure
that the timestamps are correct!
The function can be used with gaze data either fixations, saccades, or single samples. Note that the output variables are not equally relevant for all types of
gaze data. For example, both total duration and latency are relevant in many analyses focusing on fixations, but total duration may be less relevant in analyses of
saccades.</h2><span id='topic+aoi_test'></span>

<h3>Description</h3>

<p>Test whether a gaze coordinates are within or outside a rectangular or elliptical AOI.
The aois df must contain the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value and
type where rect means that the AOI is a rectangle and circle that the AOI is a circle or ellipse
If a column called name is present, the output for each
AOI will be labelled accordingly. Otherwise, the output will be labelled according to the order of the AOI in the data frame.
The df 'gaze' must contain the variables onset, duration, x, and y.
Latency will be defined as the value in onset of the first detected gaze coordinate in the AOI Make sure
that the timestamps are correct!
The function can be used with gaze data either fixations, saccades, or single samples. Note that the output variables are not equally relevant for all types of
gaze data. For example, both total duration and latency are relevant in many analyses focusing on fixations, but total duration may be less relevant in analyses of
saccades.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aoi_test(gaze, aois, outside = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aoi_test_+3A_gaze">gaze</code></td>
<td>
<p>data frame with each row representing a gaze coordinate from a fixation, saccade, or sample. Must include the variables x, y, duration, and onset. Onset zero should
typically be trial onset</p>
</td></tr>
<tr><td><code id="aoi_test_+3A_aois">aois</code></td>
<td>
<p>data frame with AOIs.</p>
</td></tr>
<tr><td><code id="aoi_test_+3A_outside">outside</code></td>
<td>
<p>If FALSE, summarize data within AOIs. If TRUE, summarize data outside AOIs.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with total duration, number of occurrences and latency to first detected gaze coordinates for each AOI. Data are in long format.
</p>

<hr>
<h2 id='cluster2m'>Fixation detection by two-means clustering</h2><span id='topic+cluster2m'></span>

<h3>Description</h3>

<p>Identify fixations in a gaze matrix using identification by two-means clustering. The algorithm is based on Hessels et al 2017. Behavior research methods, 49, 1802-1823.
Data from the left and right eye are not processed separately. Adjust your analysis scripts to include this steps if you want the algorithm to include this step, as in Hessels et al 2017.
Input data must be a data frame with the variables timestamp, x.raw and y.raw as variables. Other variables can
be included but will be ignored. This function does not perform pre-processing in the form of interpolation or smoothing. Use the function process.gaze for this.
Timestamps are assumed to be in milliseconds. Default settings assume that x and y coordinates are in pixels.
The output data is a list with two data frames: fixations includes all detected fixations with coordinates, duration
and a number of other metrics, filt.gaze is a sample-by-sample data frame with time stamps, raw and filtered gaze coordinates for fixations.
If the input downsampling.factors is not empty, transition weights will be calculated based on the data in the original sampling rate and data at all sampling rate specified in this variable.
According to Hessels et al 2017, this step makes the analysis less vulnerable to noise in the data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cluster2m(
  gaze_raw,
  windowlength.ms = 200,
  distance.threshold = 0.7,
  one_degree = 40,
  window.step.size = 6,
  min.fixation.duration = 40,
  weight.threshold = 2,
  xcol = "x.raw",
  ycol = "y.raw",
  merge.ms.threshold = 40,
  downsampling.factors = NA,
  missing.samples.threshold = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cluster2m_+3A_gaze_raw">gaze_raw</code></td>
<td>
<p>Data frame with unfiltered gaze data. Include the variable timestamp with timing in ms and columns with raw
x and y data as specified by the parameters xcol and ycol or their default values</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_windowlength.ms">windowlength.ms</code></td>
<td>
<p>Length of the moving analysis windows</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_distance.threshold">distance.threshold</code></td>
<td>
<p>Subsequent fixations occurring withing this distance are merged. Set to 0 if you do not want to merge fixations.</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_one_degree">one_degree</code></td>
<td>
<p>One degree of the visual field in the unit of the raw x and y coordinates, typically pixels</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_window.step.size">window.step.size</code></td>
<td>
<p>Distance between starting points of subsequent analysis windows in samples</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_min.fixation.duration">min.fixation.duration</code></td>
<td>
<p>Minimum duration of accepted fixations. Shorter fixations are discarded</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_weight.threshold">weight.threshold</code></td>
<td>
<p>Samples with a transition weight exceeding it are candidates for fixation detection.</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_xcol">xcol</code></td>
<td>
<p>Name of the column where raw x values are stored. Default: x.raw</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_ycol">ycol</code></td>
<td>
<p>Name of the column where raw y values are stored. Default: y.raw</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_merge.ms.threshold">merge.ms.threshold</code></td>
<td>
<p>Only fixations occurring within this time window in milliseconds are merged</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_downsampling.factors">downsampling.factors</code></td>
<td>
<p>Factors to downsample the data by in calculating fixation weights. If downsampling.factors has the values <code>c(10, 2)</code>, transition weights will be calculated base on data in
the original sampling rate as well as the two donwsampled data sets.</p>
</td></tr>
<tr><td><code id="cluster2m_+3A_missing.samples.threshold">missing.samples.threshold</code></td>
<td>
<p>Remove fixations with a higher proportion of missing samples. Range 0 to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list including separate data frames for fixations and sample-by-sample data including filtered and unfiltered data.
The &quot;fixations&quot; data frame gives onset, offset, x, y, RMSD and missing samples of each fixation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gaze &lt;- cluster2m(sample.data.processed)
</code></pre>

<hr>
<h2 id='downsample_gaze'>Downsample gaze</h2><span id='topic+downsample_gaze'></span>

<h3>Description</h3>

<p>This function downs-samples gaze by a specified factor. Data are down-sampled by splitting the data in bins and calculating the mean of each bin.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downsample_gaze(data_in, ds.factor, xcol = "x", ycol = "y")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="downsample_gaze_+3A_data_in">data_in</code></td>
<td>
<p>Data frame which must contain the variables specified by the parameters xcol and ycol.</p>
</td></tr>
<tr><td><code id="downsample_gaze_+3A_ds.factor">ds.factor</code></td>
<td>
<p>The factor to down-sample by. For example, setting ds.factor to 10 down-samples data recorded at 1000 HZ to 100 HZ.</p>
</td></tr>
<tr><td><code id="downsample_gaze_+3A_xcol">xcol</code></td>
<td>
<p>Name of the column where raw x values are stored. Default: x</p>
</td></tr>
<tr><td><code id="downsample_gaze_+3A_ycol">ycol</code></td>
<td>
<p>Name of the column where raw y values are stored. Default: y</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Data frame with downsampled gaze data. The output variables are x, y, and the numbers of the first and last samples of the original data frame included in the bin.
</p>

<hr>
<h2 id='draw_aois'>Draw one or more areas of interest, AOIs, on a stimulus image and save to the R prompt.
The input is the path to a 2D image. Supported file formats: JPEG, BMP, PNG.
The function returns a data frame with all saved AOIs. By default, AOIs are drawn in a
coordinate system where y is 0 in the lower extreme of the image, e.g., an ascending y axis. Tobii eye trackers use a coordinate system with a descending
y-axis, e.g., x and y are 0 in the upper left corner of the image. Make sure that your AOIS match the coordinate system of your eye tracker output.
By setting the parameter reverse.y.axis to TRUE, the saved AOIs will be reformatted to fit a coordinate system with a descending y-axis.
All AOIS have the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value</h2><span id='topic+draw_aois'></span>

<h3>Description</h3>

<p>Draw one or more areas of interest, AOIs, on a stimulus image and save to the R prompt.
The input is the path to a 2D image. Supported file formats: JPEG, BMP, PNG.
The function returns a data frame with all saved AOIs. By default, AOIs are drawn in a
coordinate system where y is 0 in the lower extreme of the image, e.g., an ascending y axis. Tobii eye trackers use a coordinate system with a descending
y-axis, e.g., x and y are 0 in the upper left corner of the image. Make sure that your AOIS match the coordinate system of your eye tracker output.
By setting the parameter reverse.y.axis to TRUE, the saved AOIs will be reformatted to fit a coordinate system with a descending y-axis.
All AOIS have the variables x0, x1, y0 and y1. x0 is the minimum x value, y0 the minimum y value. x1 the maximum x value. y1 the maximum y value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>draw_aois(image.path, reverse.y.axis = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="draw_aois_+3A_image.path">image.path</code></td>
<td>
<p>path to a valid image file with the suffix .jpeg, .jpg, .png or .bmp</p>
</td></tr>
<tr><td><code id="draw_aois_+3A_reverse.y.axis">reverse.y.axis</code></td>
<td>
<p>If TRUE, save AOIs positioned on a reverse Y-axis where y is 0 in the upper end of the image. Note that AOIs will be converted to fit a reversed Y axis
before printed in the R prompt and saved, but will be shown in the original coordinate system when plotted inside the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with type and coordinates of drawn AOIs
</p>

<hr>
<h2 id='filt_plot_2d'>Plot fixation filtered vs. raw or unfiltered gaze coordinates in 2D space.</h2><span id='topic+filt_plot_2d'></span>

<h3>Description</h3>

<p>This function plots and returns a ggplot2 figure showing fixation filtered and raw gaze coordinates plotted against time.
The interval to plot can be defined as a proportion of the data frame or by sample numbers. This function uses one data.frame with fixations and one with sample-by-sample raw data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filt_plot_2d(
  raw.data,
  filtered.data,
  plot.window = c(NA, NA),
  raw.columns = c("x.raw", "y.raw"),
  filt.columns = c("x", "y"),
  fixation.radius = 40,
  xres = 1920,
  yres = 1080,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filt_plot_2d_+3A_raw.data">raw.data</code></td>
<td>
<p>gaze matrix which must include columns for filtered and unfiltered data as specified in the raw.columns parameter</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_filtered.data">filtered.data</code></td>
<td>
<p>Data frame with fixation data which must include columns for filtered x and y data as specified in the raw.columns parameter as well as the
variable onset which indicates the onset of the fixation. Make sure the onset varables match the timing in the raw.data df</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_plot.window">plot.window</code></td>
<td>
<p>vector defining the time window to plot. If left empty, the 50-65
&lt;0, they are assumed to be proportions, e.g., <code>plot.window = c(0.3,0.35)</code> plots the 30-35 percent of max.length interval of the data. Numbers &gt;1 are assumed to refer to sample order
in the data</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_raw.columns">raw.columns</code></td>
<td>
<p>Names of variable containing raw data. Default x.raw and y.raw</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_filt.columns">filt.columns</code></td>
<td>
<p>Names of variable containing filtered data. Default x and y</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_fixation.radius">fixation.radius</code></td>
<td>
<p>Radius of circles showing fixations.</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_xres">xres</code></td>
<td>
<p>horizontal resolution of the screen or area to plot on. Default 1920</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_yres">yres</code></td>
<td>
<p>vertical resolution of the screen or area to plot on. Default 1080</p>
</td></tr>
<tr><td><code id="filt_plot_2d_+3A_verbose">verbose</code></td>
<td>
<p>if TRUE, print the resulting plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot of raw and fixated values plotted on the y axis and sample number on the x axis
</p>

<hr>
<h2 id='filt_plot_temporal'>Plot fixation filtered vs. raw gaze coordinates</h2><span id='topic+filt_plot_temporal'></span>

<h3>Description</h3>

<p>This function plots and returns a ggplot2 figure showing two time series of gaze coordinates plotted against time.
The interval to plot can be defined as a proportion of the data frame or by sample numbers. Use this function to plot data before and after processing or filtering
to examine their effects. For example, unprocessed x or y coordinates can be plotted against x and y coordinates following pre-processing and/or a fixation filter.
Either the x or the y vector is plotted
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filt_plot_temporal(
  data_in,
  plot.window = c(NA, NA),
  var1 = "x.raw",
  var2 = "x",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filt_plot_temporal_+3A_data_in">data_in</code></td>
<td>
<p>gaze matrix which must include columns for filtered and unfiltered data as specified in the var1 and var2 paramters</p>
</td></tr>
<tr><td><code id="filt_plot_temporal_+3A_plot.window">plot.window</code></td>
<td>
<p>vector defining the time window to plot. If left empty, the 50-65
&lt;0, they are assumed to be proportions, e.g., <code>plot.window = c(0.3,0.35)</code> plots the 30-35
in the data</p>
</td></tr>
<tr><td><code id="filt_plot_temporal_+3A_var1">var1</code></td>
<td>
<p>Name of the first variable to plot. Default &quot;x.raw&quot;</p>
</td></tr>
<tr><td><code id="filt_plot_temporal_+3A_var2">var2</code></td>
<td>
<p>Name of the second variable to plot (overlayed on var1) Default: &quot;x&quot;</p>
</td></tr>
<tr><td><code id="filt_plot_temporal_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, print the resulting plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot with gaze coordinates plotted on the y axis and sample number on the x axis
</p>


<h3>Examples</h3>

<pre><code class='language-R'>new.plot &lt;- filt_plot_temporal(sample.data.filtered, plot.window = c(1000, 2000))
</code></pre>

<hr>
<h2 id='find.transition.weights'>Find transition weights for each sample in a gaze matrix.</h2><span id='topic+find.transition.weights'></span>

<h3>Description</h3>

<p>This function is used internally by the function cluster2m
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find.transition.weights(data_in, window.step.size = 6, windowsize)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="find.transition.weights_+3A_data_in">data_in</code></td>
<td>
<p>Input data</p>
</td></tr>
<tr><td><code id="find.transition.weights_+3A_window.step.size">window.step.size</code></td>
<td>
<p>Step size</p>
</td></tr>
<tr><td><code id="find.transition.weights_+3A_windowsize">windowsize</code></td>
<td>
<p>Window size</p>
</td></tr>
</table>


<h3>Value</h3>

<p>transition weights.
</p>

<hr>
<h2 id='idt_filter'>Dispersion-based fixation detection algorithm <code>(I-DT)</code></h2><span id='topic+idt_filter'></span>

<h3>Description</h3>

<p>Apply a dispersion-based fixation <code>(I-DT)</code> filter to the eye tracking data.
The algorithm identifies fixations as samples clustering within a spatial area.
The procedure is described in Blignaut 2009
Input data must be a data frame with the variables timestamp, x.raw and y.raw as variables. Other variables can
be included but will be ignored. This function does not perform pre-processing in the form of interpolation or smoothing. Use the function process.gaze for this.
Timestamps are assumed to be in milliseconds. Default settings assume that x and y coordinates are in pixels.
The output data is a list with two data frames: fixations includes all detected fixations with coordinates, duration
and a number of other metrics, filt.gaze is a sample-by-sample data frame with time stamps, raw and filtered gaze coordinates.
The function can be slow for long recordings and/or data recorded at high sampling rates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idt_filter(
  gaze_raw,
  one_degree = 40,
  dispersion.threshold = 1,
  min.duration = 50,
  xcol = "x.raw",
  ycol = "y.raw",
  distance.threshold = 0.7,
  merge.ms.threshold = 75,
  missing.samples.threshold = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="idt_filter_+3A_gaze_raw">gaze_raw</code></td>
<td>
<p>Data frame with unfiltered gaze data. Include the variable timestamp with timing in ms and columns with raw
x and y data as specified by the paramerers xcol and ycol or their default values</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_one_degree">one_degree</code></td>
<td>
<p>One degree of the visual field in the unit of the raw x and y coordinates, typically pixels</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_dispersion.threshold">dispersion.threshold</code></td>
<td>
<p>Maximum radius of fixation candidates. Samples clustering within a circle of this limit will be
classified as a fixation if the duration is long enough.</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_min.duration">min.duration</code></td>
<td>
<p>Minimum duration of fixations in milliseconds</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_xcol">xcol</code></td>
<td>
<p>Name of the column where raw x values are stored. Default: x.raw</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_ycol">ycol</code></td>
<td>
<p>Name of the column where raw y values are stored. Default: y.raw</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_distance.threshold">distance.threshold</code></td>
<td>
<p>Subsequent fixations occurring withing this distance are merged. Set to 0 if you don't want to merge fixations.</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_merge.ms.threshold">merge.ms.threshold</code></td>
<td>
<p>Only subsequent fixations occurring within this time window are merged</p>
</td></tr>
<tr><td><code id="idt_filter_+3A_missing.samples.threshold">missing.samples.threshold</code></td>
<td>
<p>Remove fixations with a higher proportion of missing samples. Range 0-1</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list including separate data frames for fixations and sample-by-sample data including filtered and unfiltered data.
The fixations data frame includes onset, offset, x, y, RMSD and missing samples of each fixation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>idt_data &lt;- idt_filter(sample.data.processed)
</code></pre>

<hr>
<h2 id='interpolate_with_margin'>Interpolate over gaps (subsequent NAs) in vector.</h2><span id='topic+interpolate_with_margin'></span>

<h3>Description</h3>

<p>Interpolate over gaps (subsequent NAs) in vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate_with_margin(data_in, marg, max_gap)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="interpolate_with_margin_+3A_data_in">data_in</code></td>
<td>
<p>Vector to interpolate in</p>
</td></tr>
<tr><td><code id="interpolate_with_margin_+3A_marg">marg</code></td>
<td>
<p>Margin in samples before and after gap to use for interpolation</p>
</td></tr>
<tr><td><code id="interpolate_with_margin_+3A_max_gap">max_gap</code></td>
<td>
<p>Maximum length of gaps in sample</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector with interpolated gaps
</p>

<hr>
<h2 id='ivt_filter'>I-VT algorithm for fixation and saccade detection</h2><span id='topic+ivt_filter'></span>

<h3>Description</h3>

<p>Apply an <code>I-VT</code> filter to the eye tracking data.
The algorithm identifies saccades as periods with sample-to-sample velocity above a threshold and fixations as periods between saccades.
See Salvucci and Goldberg 2000. Identifying fixations and saccades in eye tracking protocols. Proc. 2000 symposium on Eye tracking
research and applications for a description.
</p>
<p>Input data must be a data frame with the variables timestamp, x.raw and y.raw as variables. Other variables can
be included but will be ignored. This function does not perform pre-processing in the form of interpolation or smoothing. Use the function process.gaze for this.
Timestamps are assumed to be in milliseconds. Default settings assume that x and y coordinates are in pixels.
The output data is a list with three data frames: fixations includes all detected fixations with coordinates, duration
and a number of other metrics, saccades includes data for saccades, filt.gaze is a sample-by-sample data frame with time stamps, raw and filtered gaze coordinates for fixations.
The function has a number of parameters for removing potentially invalid fixations and saccades. The parameter min.fixation.duration can be used to remove unlikely
short fixations. If the parameter missing.samples threshold is set to a value lower than 1, fixations with a higher proportion of missing raw samples are removed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ivt_filter(
  gaze_raw,
  velocity.filter.ms = 20,
  velocity.threshold = 35,
  min.saccade.duration = 10,
  min.fixation.duration = 40,
  one_degree = 40,
  save.velocity.profiles = FALSE,
  xcol = "x.raw",
  ycol = "y.raw",
  distance.threshold = 0.7,
  merge.ms.threshold = 75,
  missing.samples.threshold = 0.5
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ivt_filter_+3A_gaze_raw">gaze_raw</code></td>
<td>
<p>Data frame with unfiltered gaze data. Include the variable timestamp with timing in ms and columns with raw
x and y data as specified by the parameters xcol and ycol or their default values</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_velocity.filter.ms">velocity.filter.ms</code></td>
<td>
<p>Window in milliseconds for moving average window used for smoothing the sample to sample velocity vector.</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_velocity.threshold">velocity.threshold</code></td>
<td>
<p>Velocity threshold for saccade detection in degrees/second</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_min.saccade.duration">min.saccade.duration</code></td>
<td>
<p>Minimum duration of saccades in milliseconds</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_min.fixation.duration">min.fixation.duration</code></td>
<td>
<p>Minimum duration of fixations in milliseconds</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_one_degree">one_degree</code></td>
<td>
<p>One degree of the visual field in the unit of the raw x and y coordinates, typically pixels</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_save.velocity.profiles">save.velocity.profiles</code></td>
<td>
<p>If TRUE, return velocity profiles of each detected saccade as a variable in the saccades data frame</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_xcol">xcol</code></td>
<td>
<p>Name of the column where raw x values are stored. Default: x.raw</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_ycol">ycol</code></td>
<td>
<p>Name of the column where raw y values are stored. Default: y.raw</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_distance.threshold">distance.threshold</code></td>
<td>
<p>Subsequent fixations occurring withing this distance are merged. Set to 0 if you don't want to merge fixations.</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_merge.ms.threshold">merge.ms.threshold</code></td>
<td>
<p>Subsequent fixations occuring within this time window and distance specified by distance.threshold are merged. Set to 0 if you don't want to merge fixations.</p>
</td></tr>
<tr><td><code id="ivt_filter_+3A_missing.samples.threshold">missing.samples.threshold</code></td>
<td>
<p>Remove fixations with a higher proportion of missing samples. Range 0 to 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list including separate data frames for fixations and sample-by-sample data including filtered and unfiltered data.
The fixations data frame gives onset, offset, x, y, RMSD and missing samples of each fixation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ivt_data &lt;- ivt_filter(sample.data.processed, velocity.threshold = 30, min.fixation.duration = 40)
</code></pre>

<hr>
<h2 id='kollaR-package'>Filtering, Visualization, and Analysis of Eye Tracking Data</h2><span id='topic+kollaR'></span>

<h3>Description</h3>

<p>Functions for analyzing eye-tracking data, including fixation filtering/event detection (I-VT, I-DT, and two-means clustering),
visualizations, and area of interest (AOI) based analyses. See separate documentation for each function. Make sure it works with your data. The principles underlying I-VT and I-DT filters are described in
Salvucci &amp; Goldberg (2000,<a href="https://doi.org/10.1145/355017.355028">doi:10.1145/355017.355028</a>). Two-means clustering is described in Hessels et al. (2017, <a href="https://doi.org/10.3758/s13428-016-0822-1">doi:10.3758/s13428-016-0822-1</a>).
</p>


<h3>Details</h3>

<p>Overview of functions:
Pre-processing (smoothing, interpolation, downsampling):'process_gaze', 'downsample_gaze'
</p>
<p>Fixation and Saccade Detection (Fixation Filters)**: 'ivt_filter', 'idt_filter', 'cluster2m'
</p>
<p>Visualization of Output from Fixation Filter and Preprocessing Algorithms: 'filt_plot_temporal', 'filt_plot_2d', 'plot_velocity_profiles',
'plot_sample_velocity', 'plot_filter_results'
</p>
<p>Visualization of Gaze Data: 'static_plot', 'animated_fixation_plot'
</p>
<p>AOI Based Analyses: 'draw_aoi', 'aoi_test'
</p>


<h3>Author(s)</h3>

<p>Johan Lundin Kleberg <a href="mailto:johan.lundin.kleberg@su.se">johan.lundin.kleberg@su.se</a>
</p>

<hr>
<h2 id='merge_adjacent_fixations'>Merge adjacent fixations</h2><span id='topic+merge_adjacent_fixations'></span>

<h3>Description</h3>

<p>Merge fixations which appear close in space and time. This function is called by other functions and typically
not used outside them
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_adjacent_fixations(
  fixations,
  gaze_raw,
  distance.threshold = 0.5,
  ms.threshold = 75,
  one_degree = 40
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="merge_adjacent_fixations_+3A_fixations">fixations</code></td>
<td>
<p>Data frame with fixations</p>
</td></tr>
<tr><td><code id="merge_adjacent_fixations_+3A_gaze_raw">gaze_raw</code></td>
<td>
<p>Data matrix with raw data. See description of the ivt_filter function</p>
</td></tr>
<tr><td><code id="merge_adjacent_fixations_+3A_distance.threshold">distance.threshold</code></td>
<td>
<p>Subsequent fixations occurring withing this distance are merged. Set to 0 if you don't want to merge fixations.</p>
</td></tr>
<tr><td><code id="merge_adjacent_fixations_+3A_ms.threshold">ms.threshold</code></td>
<td>
<p>Maximum time elapsed between fixations to be merged.</p>
</td></tr>
<tr><td><code id="merge_adjacent_fixations_+3A_one_degree">one_degree</code></td>
<td>
<p>One degree of the visual field in the scale of the x and y coordinates. Typically pixels</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new data frame with fixations
</p>

<hr>
<h2 id='plot_filter_results'>Plot validity measures from one or more fixation detection algorithms</h2><span id='topic+plot_filter_results'></span>

<h3>Description</h3>

<p>This function visualizes validity measures of fixations detected with one or more fixation detection algorithms.
The function is tested for fixation data frames generated with kollaR event detection algorithms. By default, the function can plot
Root Mean Square Deviations of detected fixations, fixation duration and the proportion of missing raw samples.
The output data is a ggplot which can be modified further outside the function.
If you want to use this function to compare more than one fixation detection algorithms, combine them using the function
rbind in base R. For example, <code>rbind(my_data1[["fixations"]], my_data2[["fixations"]])</code> would generate a combined data frame with the
fixations detected by two event classification procedures.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_filter_results(data_in, plot.variable = "rmsd")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_filter_results_+3A_data_in">data_in</code></td>
<td>
<p>Data frame with fixations to plot</p>
</td></tr>
<tr><td><code id="plot_filter_results_+3A_plot.variable">plot.variable</code></td>
<td>
<p>Variable to plot. If left empty, RMSD of fixations are plotted. Alternatives are &quot;rmsd&quot;, &quot;duration&quot;, &quot;missing.samples&quot;</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot with visualizations of the selected validity measure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_filter_results(data_in = sample.data.fixations, plot.variable = "rmsd")
</code></pre>

<hr>
<h2 id='plot_sample_velocity'>Plot the sample-to-sample velocity of eye tracking data.</h2><span id='topic+plot_sample_velocity'></span>

<h3>Description</h3>

<p>This function visualizes the sample-to-sample velocity in a period of eye tracking data. This can be helpful when determining a suitable velocity threshold for saccade detection
Input data must be a data frame with the variables timestamp, x.raw and y.raw as variables. Other variables can
be included but will be ignored. This function does not perform pre-processing in the form of interpolation or smoothing. Use the function process.gaze for this.
Timestamps are assumed to be in milliseconds. Default settings assume that x and y coordinates are in pixels.
The output data is a plot of sample-to-sample velocity in the selected interval.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_sample_velocity(
  data_in,
  velocity.filter.ms = 20,
  plot.window = c(NA, NA),
  xcol = "x.raw",
  ycol = "y.raw",
  threshold.line = NA,
  one_degree = 40,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_sample_velocity_+3A_data_in">data_in</code></td>
<td>
<p>Data frame with gaze data to plot. Include the variable timestamp with timing in ms and columns with raw
x and y data as specified by the paramerers xcol and ycol or their default values</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_velocity.filter.ms">velocity.filter.ms</code></td>
<td>
<p>Window in milliseconds for moving average window used for smoothing the sample-to-sample velocity vector.</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_plot.window">plot.window</code></td>
<td>
<p>vector defining the time window to plot. If left empty, the 50-65
&lt;0, they are assumed to be proportions, e.g., plot.window = c(0.3,0.35) plots the 30-35 percent of max.length interval of the data. Numbers &gt;1 are assumed to refer to sample order
in the data</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_xcol">xcol</code></td>
<td>
<p>Name of the column where raw x values are stored. Default: &quot;x.raw&quot;</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_ycol">ycol</code></td>
<td>
<p>Name of the column where raw y values are stored. Default: &quot;y.raw&quot;</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_threshold.line">threshold.line</code></td>
<td>
<p>Can be specified to add a line showing a potential velocity threshold for saccade detection. No threshold is shown if this parameter is NA</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_one_degree">one_degree</code></td>
<td>
<p>One degree of the visual field in the unit of the raw x and y coordinates, typically pixels</p>
</td></tr>
<tr><td><code id="plot_sample_velocity_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, print the resulting plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A ggplot showing the sample-to-sample velocity of the selected data interval
</p>


<h3>Examples</h3>

<pre><code class='language-R'>plot_sample_velocity(data_in = sample.data.processed, threshold.line = 35)

</code></pre>

<hr>
<h2 id='plot_velocity_profiles'>Create ggplot of saccade velocity profiles</h2><span id='topic+plot_velocity_profiles'></span>

<h3>Description</h3>

<p>This function plots and returns a ggplot showing velocity profiles of saccades plotted against time. Saccades should be generated with the ivt.filter functions with
the save.velosity.profiles parameter set to TRUE. The interval to plot is defined by saccade number as they appear in the sacccades data frame.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_velocity_profiles(saccades, onset = NA, offset = NA, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_velocity_profiles_+3A_saccades">saccades</code></td>
<td>
<p>data frame including saccades. Each saccade must have a list with a vector of the veloctity profiles</p>
</td></tr>
<tr><td><code id="plot_velocity_profiles_+3A_onset">onset</code></td>
<td>
<p>first saccade to plot. The value must correspond to a number in the variable &quot;number&quot; in the saccades data frame. If left empty, all saccades are plotted</p>
</td></tr>
<tr><td><code id="plot_velocity_profiles_+3A_offset">offset</code></td>
<td>
<p>last saccade to plot. The value must correspond to a number in the variable &quot;number&quot; in the saccades data frame.</p>
</td></tr>
<tr><td><code id="plot_velocity_profiles_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, print the resulting plot</p>
</td></tr>
</table>


<h3>Value</h3>

<p>ggplot with velocity profiles
</p>


<h3>Examples</h3>

<pre><code class='language-R'>new.plot &lt;- plot_velocity_profiles(sample.data.saccades, onset = 10, offset = 20)
</code></pre>

<hr>
<h2 id='process_gaze'>Interpolation and smoothing of gaze-vector</h2><span id='topic+process_gaze'></span>

<h3>Description</h3>

<p>Preprocessing of gaze vector
Interpolate over gaps in data and smooth the x and y vectors using a moving average filter.
The gaze vector must contain the variables timestamp, and variables containing unfiltered x
and y coordinates. Default names: x.raw and y.raw. Timestamps are assumed to be in
milliseconds. The unprocessed x and y variables are kept under the names x.unprocessed and y.unprocessed for comparison.
The function will add the variable timestamp.t to the data frame before returning. This is a theoretical timestamp based on the detected median sample-to-sample
timestamp difference as compared to the actual registered time stamps in the data. This can be useful in some validation analyses.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_gaze(
  gaze_raw,
  max_gap_ms = 75,
  marg_ms = 30,
  filter_ms = 15,
  xcol = "x.raw",
  ycol = "y.raw"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="process_gaze_+3A_gaze_raw">gaze_raw</code></td>
<td>
<p>Data frame containing unfiltered timestamp, x.raw and y.raw vectors.</p>
</td></tr>
<tr><td><code id="process_gaze_+3A_max_gap_ms">max_gap_ms</code></td>
<td>
<p>The maximum gaps defined as subsequent NAs in the data to interpolate over in milliseconds. Default 75 ms</p>
</td></tr>
<tr><td><code id="process_gaze_+3A_marg_ms">marg_ms</code></td>
<td>
<p>The margin in milliseconds before and after the gap to use as basis for interpolation.</p>
</td></tr>
<tr><td><code id="process_gaze_+3A_filter_ms">filter_ms</code></td>
<td>
<p>The size of the moving average window to use in smoothing. Default 15 ms</p>
</td></tr>
<tr><td><code id="process_gaze_+3A_xcol">xcol</code></td>
<td>
<p>Name of column containing unprocessed x coordinates</p>
</td></tr>
<tr><td><code id="process_gaze_+3A_ycol">ycol</code></td>
<td>
<p>Name of column containing unprocessed y coordinates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data frame with gaze data after interpolation and filtering
</p>


<h3>Examples</h3>

<pre><code class='language-R'>processed_gaze &lt;- process_gaze(sample.data.unprocessed)
</code></pre>

<hr>
<h2 id='sample.data.filtered'>Fixation-filtered sample-by-sample example data</h2><span id='topic+sample.data.filtered'></span>

<h3>Description</h3>

<p>This dataset contains data from 1 individuals during a free viewing tasks after pre-processing. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.filtered
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>timestamp</dt><dd><p>timestamp in ms recorded by the eye tracker</p>
</dd>
<dt>x.raw</dt><dd><p>unfiltered gaze position x</p>
</dd>
<dt>y.raw</dt><dd><p>unfiltered gaze position y</p>
</dd>
<dt>x</dt><dd><p>fixation filtered gaze position x</p>
</dd>
<dt>y</dt><dd><p>fixation filtered gaze position y</p>
</dd>
</dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='sample.data.fixation1'>Fixations from 1 individual</h2><span id='topic+sample.data.fixation1'></span>

<h3>Description</h3>

<p>This dataset contains fixation data from 1 individuals during a free viewing tasks. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.fixation1
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>x</dt><dd><p>fixation filtered gaze position x</p>
</dd>
<dt>y</dt><dd><p>fixation filtered gaze position y</p>
</dd>
<dt>duration</dt><dd><p>duration of fixation in milliseconds</p>
</dd>
<dt>onset</dt><dd><p>onset of fixation in milliseconds</p>
</dd>
<dt>offset</dt><dd><p>offset of fixation in milliseconds</p>
</dd>
<dt>rmsd</dt><dd><p>Root mean square deviation of included samples from the centroid of the fixation</p>
</dd>
<dt>fixation.filter</dt><dd><p>Name of the fixation filter algorithm </p>
</dd>
<dt>threshold</dt><dd><p>Threshold setting for the fixation filter algorithm</p>
</dd>
<dt>id</dt><dd><p>Participant id</p>
</dd>
</dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='sample.data.fixations'>Fixations from 7 individuals</h2><span id='topic+sample.data.fixations'></span>

<h3>Description</h3>

<p>This dataset contains fixation data from 7 individuals during a free viewing tasks. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.fixations
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>x</dt><dd><p>fixation filtered gaze position x</p>
</dd>
<dt>y</dt><dd><p>fixation filtered gaze position y</p>
</dd>
<dt>duration</dt><dd><p>duration of fixation in milliseconds</p>
</dd>
<dt>onset</dt><dd><p>onset of fixation in milliseconds</p>
</dd>
<dt>offset</dt><dd><p>offset of fixation in milliseconds</p>
</dd>
<dt>rmsd</dt><dd><p>Root mean square deviation of included samples from the centroid of the fixation</p>
</dd>
<dt>fixation.filter</dt><dd><p>Name of the fixation filter algorithm </p>
</dd>
<dt>threshold</dt><dd><p>Threshold setting for the fixation filter algorithm</p>
</dd>
<dt>id</dt><dd><p>Participant id</p>
</dd></dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='sample.data.processed'>Pre-processed sample-by-sample example data</h2><span id='topic+sample.data.processed'></span>

<h3>Description</h3>

<p>This dataset contains data from 1 individuals during a free viewing tasks after pre-processing. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.processed
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>id</dt><dd><p>participant number</p>
</dd>
<dt>timestamp</dt><dd><p>timestamp in ms recorded by the eye tracker</p>
</dd>
<dt>x.raw</dt><dd><p>gaze position x</p>
</dd>
<dt>y.raw</dt><dd><p>gaze position y</p>
</dd>
<dt>timestamp.t</dt><dd><p>&quot;'Theoretical timestamp' for comparison.&quot;</p>
</dd>
<dt>sample</dt><dd><p>sample nr in recording</p>
</dd>
</dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='sample.data.saccades'>Saccades from 3 individuals</h2><span id='topic+sample.data.saccades'></span>

<h3>Description</h3>

<p>This dataset contains saccade data from 3 individuals during a free viewing tasks. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.saccades
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>onset</dt><dd><p>onset of the saccade in ms</p>
</dd>
<dt>x.onset</dt><dd><p>gaze position x at onset</p>
</dd>
<dt>y.onset</dt><dd><p>gaze position y at onset </p>
</dd>
<dt>offset</dt><dd><p>offset of the saccade in ms</p>
</dd>
<dt>x.offset</dt><dd><p>gaze position x at offset</p>
</dd>
<dt>y.offset</dt><dd><p>gaze position y at offset </p>
</dd>
<dt>duration</dt><dd><p>duration of saccade in ms</p>
</dd>
<dt>amplitude</dt><dd><p>amplitude of saccade in degrees</p>
</dd>
<dt>peak.velocity</dt><dd><p>peak velocity of saccade</p>
</dd>
<dt>velocity.profile</dt><dd><p>velocity profile</p>
</dd>
<dt>id</dt><dd><p>participant number</p>
</dd>
</dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='sample.data.unprocessed'>Unprocessed sample-by-sample example data</h2><span id='topic+sample.data.unprocessed'></span>

<h3>Description</h3>

<p>This dataset contains data from 3 individuals during a free viewing tasks before pre-processing. Data were
recorded at 1200 Hz using a Tobii Pro Spectrum eye tracker
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample.data.unprocessed
</code></pre>


<h3>Format</h3>

<p>A data frame
</p>

<dl>
<dt>id</dt><dd><p>participant number</p>
</dd>
<dt>timestamp</dt><dd><p>timestamp in ms recorded by the eye tracker</p>
</dd>
<dt>x.raw</dt><dd><p>gaze position x</p>
</dd>
<dt>y.raw</dt><dd><p>gaze position y</p>
</dd>
</dl>



<h3>Source</h3>

<p>The dataset was stored in the package at 'data/example_data.RData'
</p>

<hr>
<h2 id='static_plot'>Plot fixations in 2D space overlaied on a stimulus image</h2><span id='topic+static_plot'></span>

<h3>Description</h3>

<p>This function plots and returns a ggplot2 figure showing fixations on a background with one or multiple images, typically the stimuli. Data can
represent one or multiple participants
The interval to plot is defined by sample numbers. Fixations must have the variables x, y, and onset. The function is tested with .jpg-images. If paths to multiple images
are given, all will be displayed. Fixations are shown on a white background if no background images are defined
</p>


<h3>Usage</h3>

<pre><code class='language-R'>static_plot(
  gazedata,
  xres = 1920,
  yres = 1080,
  plot.onset,
  plot.offset,
  background.images = NA,
  show.legend = TRUE,
  group.by = NA,
  gazepoint.size = 4,
  id_color_map = NA,
  connect.lines = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="static_plot_+3A_gazedata">gazedata</code></td>
<td>
<p>Data frame with fixation data which must include columns for x and y coordinates as well as the
variable onset which indicates the onset of the fixation. If the categorical or factor variable id is included, separate colors will represent each participant. Make sure the onset variables match the timing  the plot.onset and plot.offset input.</p>
</td></tr>
<tr><td><code id="static_plot_+3A_xres">xres</code></td>
<td>
<p>horizontal resolution of the screen or area to plot on. Default 1920</p>
</td></tr>
<tr><td><code id="static_plot_+3A_yres">yres</code></td>
<td>
<p>vertical resolution of the screen or area to plot on. Default 1080</p>
</td></tr>
<tr><td><code id="static_plot_+3A_plot.onset">plot.onset</code></td>
<td>
<p>Onset of the interval in the gaze_data$onset variable to plot in the same unit, typically milliseconds</p>
</td></tr>
<tr><td><code id="static_plot_+3A_plot.offset">plot.offset</code></td>
<td>
<p>Offset of the interval in the gaze_data$onset variable to plot in the same unit, typically milliseconds</p>
</td></tr>
<tr><td><code id="static_plot_+3A_background.images">background.images</code></td>
<td>
<p>data frame with background images to use as background. The data frame must include the variables min.x, min.y, max.x, and max.y variables representing
where the images should be placed on the background and the variable path specifying a full file path.
#Example:
<code>background.images &lt;- data.frame(
       path = "my_image.jpg",
       min.x = 1,
       min.y = 1,
       max.x = 200.
       max.y = 200)</code></p>
</td></tr>
<tr><td><code id="static_plot_+3A_show.legend">show.legend</code></td>
<td>
<p>If TRUE, show values in &quot;id&quot; in legend</p>
</td></tr>
<tr><td><code id="static_plot_+3A_group.by">group.by</code></td>
<td>
<p>If not NA, plot each level in the variable in a separate panel. For example group.by <code>=</code> &quot;group&quot; returns a separate panel for each group and group.by <code>=</code>&quot;id&quot;
returns a separate panel for each id.</p>
</td></tr>
<tr><td><code id="static_plot_+3A_gazepoint.size">gazepoint.size</code></td>
<td>
<p>Size of the circle illustrating the point of gaze</p>
</td></tr>
<tr><td><code id="static_plot_+3A_id_color_map">id_color_map</code></td>
<td>
<p>A ggplot color map specifying a color to plot for each id. ids should match the variable id'in the gazedata matrix. Set to NA to assign values automatically.</p>
</td></tr>
<tr><td><code id="static_plot_+3A_connect.lines">connect.lines</code></td>
<td>
<p>If TRUE, gaze coordinates are connected with lines</p>
</td></tr>
<tr><td><code id="static_plot_+3A_verbose">verbose</code></td>
<td>
<p>If TRUE, the resulting figure is displayed automatically</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot of raw and fixated values plotted on the y axis and sample number on the x axis
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
