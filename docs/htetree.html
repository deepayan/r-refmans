<!DOCTYPE html><html><head><title>Help for package htetree</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {htetree}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bundScript'><p>Include the Javascript Used in Shiny</p></a></li>
<li><a href='#causalTree'><p>Causal Effect Regression and Estimation Trees</p></a></li>
<li><a href='#causalTree.branch'><p>Compute the &quot;branches&quot; to be drawn for an <code>causalTree</code> object</p></a></li>
<li><a href='#causalTree.control'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#causalTree.matrix'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#causalTreecallback'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#causalTreeco'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#clearTemp'><p>Clear Temporary Files</p></a></li>
<li><a href='#est.causalTree'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#estimate.causalTree'><p>estimate causal Tree</p></a></li>
<li><a href='#formatg'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#getDefaultPath'><p>Get the Current Working Directory</p></a></li>
<li><a href='#getDensities'><p>Getting Distribution in Treatment and Control Groups</p></a></li>
<li><a href='#honest.causalTree'><p>Causal Effect Regression and Estimation Trees: One-step honest estimation</p></a></li>
<li><a href='#honest.est.causalTree'><p>honest re-estimation and change the frame of object using estimation sample</p></a></li>
<li><a href='#honest.est.rparttree'><p>honest re-estimation and change the frame of object using estimation sample</p></a></li>
<li><a href='#honest.rparttree'><p>Honest recursive partitioning Tree</p></a></li>
<li><a href='#hte_causalTree'><p>Estimate Heterogeneous Treatment Effect via Causal Tree</p></a></li>
<li><a href='#hte_forest'><p>Estimate Heterogeneous Treatment Effect via Random Forest</p></a></li>
<li><a href='#hte_ipw'><p>Estimate Heterogeneous Treatment Effect via Adjusted Causal Tree</p></a></li>
<li><a href='#hte_match'><p>Estimate Heterogeneous Treatment Effect via Adjusted Causal Tree</p></a></li>
<li><a href='#hte_plot'><p>Visualize the Estimated Results</p></a></li>
<li><a href='#hte_plot_line'><p>Visualize the Estimated Results</p></a></li>
<li><a href='#htetree.anova'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#importance'><p>Caclulate variable importance</p></a></li>
<li><a href='#init.causalForest'><p>Causal Effect Regression and Estimation Forests (Tree Ensembles)</p></a></li>
<li><a href='#makeplots'><p>Visualize Causal Tree and the Estimated Results</p></a></li>
<li><a href='#matchinleaves'><p>NN Matching in Leaves</p></a></li>
<li><a href='#model.frame.causalTree'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#na.causalTree'><p>Intermediate function for <code>causalTree</code></p></a></li>
<li><a href='#plotOutcomes'><p>Intermediate function for <code>hte_plot_line</code></p></a></li>
<li><a href='#runDynamic'><p>Visualize Causal Tree and Treatment Effects via Shiny</p></a></li>
<li><a href='#saveBCSS'><p>Save Javascript Embedded in Shiny App</p></a></li>
<li><a href='#saveFiles'><p>Save Necessary Files to Run Shiny App</p></a></li>
<li><a href='#saveGCSS'><p>Save CSS File Embedded in Shiny App</p></a></li>
<li><a href='#saveInd'><p>Save HTML Index Embedded in Shiny App</p></a></li>
<li><a href='#saveServ'><p>Save Shiny Server Temporarily</p></a></li>
<li><a href='#saveUI'><p>Save Shiny UI Temporarily</p></a></li>
<li><a href='#simulation.1'><p>A Simulated Dataset</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Causal Inference with Tree-Based Machine Learning Algorithms</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.18</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimating heterogeneous treatment effects with tree-based machine
    learning algorithms and visualizing estimated results in flexible and 
    presentation-ready ways. For more information, see Brand, Xu, Koch, 
    and Geraldo (2021) &lt;<a href="https://doi.org/10.1177%2F0081175021993503">doi:10.1177/0081175021993503</a>&gt;. Our current package 
    first started as a fork of the 'causalTree' package on 'GitHub' and we 
    greatly appreciate the authors for their extremely useful and free package.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, grf, partykit, data.tree, Matching, dplyr, jsonlite,
rpart, rpart.plot, shiny, stringr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>optmatch, haven, foreign, data.table, remotes, party</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-29 18:22:23 UTC; jiahuixu</td>
</tr>
<tr>
<td>Author:</td>
<td>Jiahui Xu [cre, aut],
  Tanvi Shinkre [aut],
  Jennie Brand [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jiahui Xu &lt;jiahuixu@ucla.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-29 18:50:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='bundScript'>Include the Javascript Used in Shiny</h2><span id='topic+bundScript'></span>

<h3>Description</h3>

<p>intermediate function used to include necessary javascript
to visualize tree structures and estimated treatment effect
in shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bundScript(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bundScript_+3A_...">...</code></td>
<td>
<p>There is no required arguments in this function. But user
could manipulate to include different css files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to pass the Javascript to Shiny.
</p>

<hr>
<h2 id='causalTree'>Causal Effect Regression and Estimation Trees</h2><span id='topic+causalTree'></span>

<h3>Description</h3>

<p>Fit a <code>causalTree</code> model to get an <code>rpart</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTree(
  formula,
  data,
  weights,
  treatment,
  subset,
  na.action = na.causalTree,
  split.Rule,
  split.Honest,
  HonestSampleSize,
  split.Bucket,
  bucketNum = 5,
  bucketMax = 100,
  cv.option,
  cv.Honest,
  minsize = 2L,
  x = FALSE,
  y = TRUE,
  propensity,
  control,
  split.alpha = 0.5,
  cv.alpha = 0.5,
  cv.gamma = 0.5,
  split.gamma = 0.5,
  cost,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTree_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response and features but
no interaction terms.  If this a a data frome, that is taken as
the model frame (see <code><a href="stats.html#topic+model.frame">model.frame</a>).</code></p>
</td></tr>
<tr><td><code id="causalTree_+3A_data">data</code></td>
<td>
<p>an optional data frame that includes the variables
named in the formula.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_treatment">treatment</code></td>
<td>
<p>a vector that indicates the treatment status of
each observation. 1 represents treated and 0 represents control.
Only binary treatment supported in this version.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_subset">subset</code></td>
<td>
<p>optional expression saying that only a subset of the
rows of the data should be used in the fit.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_split.rule">split.Rule</code></td>
<td>
<p>causalTree splitting options, one of <code>"TOT"</code>,
<code>"CT"</code>, <code>"fit"</code>, <code>"tstats"</code>, four splitting rules in
<code>causalTree</code>.  Note that the <code>"tstats"</code> alternative does
not have an associated cross-validation method <code>cv.option</code>;
see Athey and Imbens (2016) for a discussion.  Note further
that <code>split.Rule</code> and <code>cv.option</code> can mix and match.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_split.honest">split.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
used for <code>split.Rule</code> as <code>"CT"</code> or <code>"fit"</code>.
If set as <code>TRUE</code>, do honest splitting, with default
<code>split.alpha</code> = 0.5; if set as <code>FALSE</code>, do adaptive
splitting with <code>split.alpha</code> = 1.  The user choice of
<code>split.alpha</code> will be ignored if <code>split.Honest</code> is set
as <code>FALSE</code>, but will be respected
if set to <code>TRUE</code>.  For <code>split.Rule</code>=<code>"TOT"</code>,
there is no honest splitting option and
the parameter <code>split.alpha</code> does not matter.
For <code>split.Rule</code>=<code>"tstats"</code>, a value of <code>TRUE</code>
enables use of <code>split.alpha</code> in calculating the risk function,
which determines the order of pruning in cross-validation. Note also
that causalTree function returns the estimates from the training data,
no matter what the value of <code>split.Honest</code> is; the tree must be
re-estimated to get the honest estimates using <code>estimate.causalTree</code>.
The wrapper function <code>honest.CausalTree</code>
does honest estimation in one step and returns a tree.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_honestsamplesize">HonestSampleSize</code></td>
<td>
<p>number of observations anticipated to be used
in honest re-estimation after building the tree. This enters the
risk function used in both splitting and cross-validation.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_split.bucket">split.Bucket</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
used to specify whether to apply the discrete method in splitting the tree.
If set as <code>TRUE</code>, in splitting a node, the observations in a leaf will
be be partitioned into buckets, with each bucket containing <code>bucketNum</code>
treated and <code>bucketNum</code> control units, and where observations are
ordered prior to partitioning. Splitting will take place by bucket.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_bucketnum">bucketNum</code></td>
<td>
<p>number of observations in each bucket when set
<code>split.Bucket</code> = <code>TRUE</code>.  However, the code will override
this choice in order to guarantee that there are at least <code>minsize</code>
and at most <code>bucketMax</code> buckets.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_bucketmax">bucketMax</code></td>
<td>
<p>Option to choose maximum number of buckets to use in
splitting when set <code>split.Bucket</code> = <code>TRUE</code>,
<code>bucketNum</code> can change by choice of <code>bucketMax</code>.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_cv.option">cv.option</code></td>
<td>
<p>cross validation options, one of <code>"TOT"</code>,
<code>"matching"</code>, <code>"CT"</code>, <code>"fit"</code>, four cross validation
methods in <span class="pkg">causalTree</span>.  There is no <code>cv.option</code> for the
<code>split.Rule</code> <code>"tstats"</code>; see Athey and Imbens (2016) for
discussion.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_cv.honest">cv.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
only used for <code>cv.option</code> as <code>"CT"</code> or <code>"fit"</code>,
to specify whether to apply honest risk evalation function in cross
validation. If set <code>TRUE</code>, use honest risk function, otherwise use
adaptive risk function in cross validation.  If set <code>FALSE</code>, the user
choice of <code>cv.alpha</code> will be set to 1.  If set <code>TRUE</code>,
<code>cv.alpha</code> will default to 0.5, but the user choice of
<code>cv.alpha</code> will be respected.  Note that honest cv estimates
within-leaf variances and may perform better with larger leaf sizes
and/or small number of cross-validation sets.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_minsize">minsize</code></td>
<td>
<p>in order to split, each leaf must have at least
<code>minsize</code> treated cases and <code>minsize</code> control cases.
The default value is set as 2.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_x">x</code></td>
<td>
<p>keep a copy of the <code>x</code> matrix in the result.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_y">y</code></td>
<td>
<p>keep a copy of the dependent variable in the result.  If
missing and <code>model</code> is supplied this defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_propensity">propensity</code></td>
<td>
<p>propensity score used in <code>"TOT"</code> splitting
and <code>"TOT"</code>, honest <code>"CT"</code> cross validation methods. The
default value is the proportion of treated cases in all observations.
In this implementation, the propensity score is a constant for the whole
dataset.  Unit-specific propensity scores are not supported; however,
the user may use inverse propensity scores as case weights if desired.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_control">control</code></td>
<td>
<p>a list of options that control details of the
<code>rpart</code> algorithm.  See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_split.alpha">split.alpha</code></td>
<td>
<p>scale parameter between 0 and 1, used in splitting
risk evaluation function for <code>"CT"</code>. When <code>split.Honest = FALSE</code>,
<code>split.alpha</code> will be set as 1.  For <code>split.Rule</code>=<code>"tstats"</code>,
if <code>split.Honest</code>=<code>TRUE</code>, <code>split.alpha</code> is used in
calculating the risk function, which determines the order of pruning
in cross-validation.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_cv.alpha">cv.alpha</code></td>
<td>
<p>scale paramter between 0 and 1, used in cross validation
risk evaluation function for <code>"CT"</code> and <code>"fit"</code>.  When
<code>cv.Honest = FALSE</code>, <code>cv.alpha</code> will be set as 1.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_cv.gamma">cv.gamma</code>, <code id="causalTree_+3A_split.gamma">split.gamma</code></td>
<td>
<p>optional parameters used in evaluating policies.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_cost">cost</code></td>
<td>
<p>a vector of non-negative costs, one for each variable in
the model. Defaults to one for all variables. These are scalings to
be applied when considering splits, so the improvement on splitting
on a variable is divided by its cost in deciding which split to
choose.</p>
</td></tr>
<tr><td><code id="causalTree_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalTree</code>.  They are checked against the
list of valid arguments.  An example of a commonly set parameter would
be <code>xval</code>, which sets the number of cross-validation samples.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CausalTree differs from <code>rpart</code> function from <span class="pkg">rpart</span>
package in splitting rules and cross validation methods. Please check
Athey and Imbens, <em>Recursive Partitioning for Heterogeneous Causal
Effects</em> (2016) for more details.
</p>


<h3>Value</h3>

<p>An object of class <code>rpart</code>.  See <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>.
</p>


<h3>References</h3>

<p>Breiman L., Friedman J. H., Olshen R. A., and Stone, C. J. (1984)
<em>Classification and Regression Trees.</em>
Wadsworth.
</p>
<p>Athey, S and G Imbens (2016)  <em>Recursive Partitioning for Heterogeneous
Causal Effects</em>.  http://arxiv.org/abs/1504.01132
</p>


<h3>See Also</h3>

<p><code><a href="#topic+honest.causalTree">honest.causalTree</a></code>,
<code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>, <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>,
<code><a href="rpart.html#topic+summary.rpart">summary.rpart</a></code>, <code><a href="rpart.plot.html#topic+rpart.plot">rpart.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("htetree")
library("rpart")
library("rpart.plot")
tree &lt;- causalTree(y~ x1 + x2 + x3 + x4, data = simulation.1,
treatment = simulation.1$treatment,
split.Rule = "CT", cv.option = "CT", split.Honest = TRUE, cv.Honest = TRUE,
split.Bucket = FALSE, xval = 5,
cp = 0, minsize = 20, propensity = 0.5)

opcp &lt;- tree$cptable[,1][which.min(tree$cptable[,4])]

opfit &lt;- prune(tree, opcp)

rpart.plot(opfit)

fittree &lt;- causalTree(y~ x1 + x2 + x3 + x4, data = simulation.1,
                      treatment = simulation.1$treatment,
                      split.Rule = "fit", cv.option = "fit",
                      split.Honest = TRUE, cv.Honest = TRUE, split.Bucket = TRUE,
                      bucketNum = 5,
                      bucketMax = 200, xval = 10,
                      cp = 0, minsize = 20, propensity = 0.5)

tstatstree &lt;- causalTree(y~ x1 + x2 + x3 + x4, data = simulation.1,
                         treatment = simulation.1$treatment,
                         split.Rule = "tstats", cv.option = "CT",
                         cv.Honest = TRUE, split.Bucket = TRUE,
                         bucketNum = 10,
                         bucketMax = 200, xval = 5,
                         cp = 0, minsize = 20, propensity = 0.5)
</code></pre>

<hr>
<h2 id='causalTree.branch'>Compute the &quot;branches&quot; to be drawn for an <code>causalTree</code> object</h2><span id='topic+causalTree.branch'></span>

<h3>Description</h3>

<p>Compute the &quot;branches&quot; to be drawn for an <code>causalTree</code> object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTree.branch(x, y, node, branch)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTree.branch_+3A_x">x</code></td>
<td>
<p>covariates</p>
</td></tr>
<tr><td><code id="causalTree.branch_+3A_y">y</code></td>
<td>
<p>outcome</p>
</td></tr>
<tr><td><code id="causalTree.branch_+3A_node">node</code></td>
<td>
<p>node of the fitted tree</p>
</td></tr>
<tr><td><code id="causalTree.branch_+3A_branch">branch</code></td>
<td>
<p>branch of the fitted tree</p>
</td></tr>
</table>


<h3>Value</h3>

<p>number of branches to be drawn
</p>

<hr>
<h2 id='causalTree.control'>Intermediate function for <code>causalTree</code></h2><span id='topic+causalTree.control'></span>

<h3>Description</h3>

<p>Intermediate function for <code>causalTree</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTree.control(
  minsplit = 20L,
  minbucket = round(minsplit/3),
  cp = 0,
  maxcompete = 4L,
  maxsurrogate = 5L,
  usesurrogate = 2L,
  xval = 10L,
  surrogatestyle = 0L,
  maxdepth = 30L,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTree.control_+3A_minsplit">minsplit</code></td>
<td>
<p>minimum number of splits</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_minbucket">minbucket</code></td>
<td>
<p>minimum number of bucket</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_cp">cp</code></td>
<td>
<p>default is 0</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_maxcompete">maxcompete</code></td>
<td>
<p>maximum number of compete</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_maxsurrogate">maxsurrogate</code></td>
<td>
<p>maximum number of surrogate</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_usesurrogate">usesurrogate</code></td>
<td>
<p>initial number of surrogate</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_xval">xval</code></td>
<td>
<p>cross-validation</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_surrogatestyle">surrogatestyle</code></td>
<td>
<p>the style of surrogate</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_maxdepth">maxdepth</code></td>
<td>
<p>Maximum depth</p>
</td></tr>
<tr><td><code id="causalTree.control_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalTree</code>.  They are checked against the
list of valid arguments.  An example of a commonly set parameter would
be <code>xval</code>, which sets the number of cross-validation samples.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>parameters used to in <code>causalTree</code>
</p>

<hr>
<h2 id='causalTree.matrix'>Intermediate function for <code>causalTree</code></h2><span id='topic+causalTree.matrix'></span>

<h3>Description</h3>

<p>Intermediate function for <code>causalTree</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTree.matrix(frame)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTree.matrix_+3A_frame">frame</code></td>
<td>
<p>inherited from data.frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A covariate matrix used in the causal regression.
</p>

<hr>
<h2 id='causalTreecallback'>Intermediate function for <code>causalTree</code></h2><span id='topic+causalTreecallback'></span>

<h3>Description</h3>

<p>This routine sets up the callback code for user-written split
routines in causalTree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTreecallback(mlist, nobs, init)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTreecallback_+3A_mlist">mlist</code></td>
<td>
<p>a list of user written methods</p>
</td></tr>
<tr><td><code id="causalTreecallback_+3A_nobs">nobs</code></td>
<td>
<p>number of observations</p>
</td></tr>
<tr><td><code id="causalTreecallback_+3A_init">init</code></td>
<td>
<p>function name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>split method written by users
</p>

<hr>
<h2 id='causalTreeco'>Intermediate function for <code>causalTree</code></h2><span id='topic+causalTreeco'></span>

<h3>Description</h3>

<p>Compute the x-y coordinates for a tree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>causalTreeco(tree, parms)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="causalTreeco_+3A_tree">tree</code></td>
<td>
<p>an <code>causalTree</code> object</p>
</td></tr>
<tr><td><code id="causalTreeco_+3A_parms">parms</code></td>
<td>
<p>parms</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the x-y coordinates for a tree
</p>

<hr>
<h2 id='clearTemp'>Clear Temporary Files</h2><span id='topic+clearTemp'></span>

<h3>Description</h3>

<p>The files for shiny are saved in a temporary directory. The files can be
cleared manually using the 'clearTemp()' function, or will automatically
be cleared when you close R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clearTemp()
</code></pre>


<h3>Value</h3>

<p>no return value, to unlink files under the temp folder
</p>

<hr>
<h2 id='est.causalTree'>Intermediate function for <code>causalTree</code></h2><span id='topic+est.causalTree'></span>

<h3>Description</h3>

<p>Run down the built tree and get the final leaf ids for estimation sample
</p>


<h3>Usage</h3>

<pre><code class='language-R'>est.causalTree(fit, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="est.causalTree_+3A_fit">fit</code></td>
<td>
<p>an <code>causalTree</code> object</p>
</td></tr>
<tr><td><code id="est.causalTree_+3A_x">x</code></td>
<td>
<p>covariates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Intermediate estimation results for an <code>causalTree</code> object.
</p>

<hr>
<h2 id='estimate.causalTree'>estimate causal Tree</h2><span id='topic+estimate.causalTree'></span>

<h3>Description</h3>

<p>estimate causal Tree
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimate.causalTree(
  object,
  data,
  weights,
  treatment,
  na.action = na.causalTree
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimate.causalTree_+3A_object">object</code></td>
<td>
<p>A tree-structured fit <code>rpart</code> object, such as one
generated as a <code>causalTree</code> fit.</p>
</td></tr>
<tr><td><code id="estimate.causalTree_+3A_data">data</code></td>
<td>
<p>New data frame to be used for estimating effects within leaves.</p>
</td></tr>
<tr><td><code id="estimate.causalTree_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="estimate.causalTree_+3A_treatment">treatment</code></td>
<td>
<p>The treatment status of observations in the new
dataframe, where 1 represents treated and 0 represents control.</p>
</td></tr>
<tr><td><code id="estimate.causalTree_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When the leaf contains only treated or control cases, the function will
trace back to the leaf's parent node recursively until the parent can
be used to compute causal effect. Please see Athey and Imbens
<em>Machine Learning Methods for Estimating Heterogeneous Causal
Effects</em> (2015) for details.
</p>


<h3>Value</h3>

<p>Intermediate estimation results for an <code>causalTree</code> object
</p>

<hr>
<h2 id='formatg'>Intermediate function for <code>causalTree</code></h2><span id='topic+formatg'></span>

<h3>Description</h3>

<p>Intermediate function for <code>causalTree</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>formatg(x, digits = getOption("digits"), format = paste0("%.", digits, "g"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="formatg_+3A_x">x</code></td>
<td>
<p>input training data</p>
</td></tr>
<tr><td><code id="formatg_+3A_digits">digits</code></td>
<td>
<p>number of digits to be kept</p>
</td></tr>
<tr><td><code id="formatg_+3A_format">format</code></td>
<td>
<p>format of exported vector</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for formatting the exported estimates
</p>

<hr>
<h2 id='getDefaultPath'>Get the Current Working Directory</h2><span id='topic+getDefaultPath'></span>

<h3>Description</h3>

<p>get the current work directory and set it as the default directory to
save the shiny files temporarily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDefaultPath()
</code></pre>


<h3>Value</h3>

<p>a temporary file path
</p>

<hr>
<h2 id='getDensities'>Getting Distribution in Treatment and Control Groups</h2><span id='topic+getDensities'></span>

<h3>Description</h3>

<p>Getting the density of distribution in treatment and control groups,
which will be displayed in the
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDensities(treatment, outcome)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDensities_+3A_treatment">treatment</code></td>
<td>
<p>A character representing the name of treatment indicator.</p>
</td></tr>
<tr><td><code id="getDensities_+3A_outcome">outcome</code></td>
<td>
<p>A character representing the name of outcome variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>vector of corresponding densities for each value of outcome vector
</p>

<hr>
<h2 id='honest.causalTree'>Causal Effect Regression and Estimation Trees: One-step honest estimation</h2><span id='topic+honest.causalTree'></span>

<h3>Description</h3>

<p>Fit a <code>causalTree</code> model to get an honest causal tree,
with tree structure built on training sample (including cross-validation)
and leaf estimates taken from estimation sample.
Return an <code>rpart</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>honest.causalTree(
  formula,
  data,
  weights,
  treatment,
  subset,
  est_data,
  est_weights,
  est_treatment,
  est_subset,
  na.action = na.causalTree,
  split.Rule,
  split.Honest,
  HonestSampleSize,
  split.Bucket,
  bucketNum = 10,
  bucketMax = 40,
  cv.option,
  cv.Honest,
  minsize = 2L,
  model = FALSE,
  x = FALSE,
  y = TRUE,
  propensity,
  control,
  split.alpha = 0.5,
  cv.alpha = 0.5,
  cv.gamma = 0.5,
  split.gamma = 0.5,
  cost,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="honest.causalTree_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response and features but
no interaction terms.  If this a a data frome, that is taken as
the model frame (see <code><a href="stats.html#topic+model.frame">model.frame</a>).</code></p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_data">data</code></td>
<td>
<p>an optional data frame that includes the variables
named in the formula.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_treatment">treatment</code></td>
<td>
<p>a vector that indicates the treatment status of
each observation. 1 represents treated and 0 represents control.
Only binary treatment supported in this version.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_subset">subset</code></td>
<td>
<p>optional expression saying that only a subset of the
rows of the data should be used in the fit.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_est_data">est_data</code></td>
<td>
<p>data frame to be used for leaf estimates; the
estimation sample. Must contain the variables used in training the tree.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_est_weights">est_weights</code></td>
<td>
<p>optional case weights for estimation sample</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_est_treatment">est_treatment</code></td>
<td>
<p>treatment vector for estimation sample.
Must be same length as estimation data. A vector indicates the treatment
status of the data, 1 represents treated and 0 represents control.
Only binary treatment supported in this version.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_est_subset">est_subset</code></td>
<td>
<p>optional expression saying that only a subset of the
rows of the estimation data should be used in the fit of the
re-estimated tree.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_split.rule">split.Rule</code></td>
<td>
<p>causalTree splitting options, one of <code>"TOT"</code>,
<code>"CT"</code>, <code>"fit"</code>, <code>"tstats"</code>, four splitting rules in
<code>causalTree</code>.  Note that the <code>"tstats"</code> alternative does
not have an associated cross-validation method <code>cv.option</code>;
see Athey and Imbens (2016) for a discussion.  Note further
that <code>split.Rule</code> and <code>cv.option</code> can mix and match.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_split.honest">split.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
used for <code>split.Rule</code> as <code>"CT"</code> or <code>"fit"</code>.
If set as <code>TRUE</code>, do honest splitting, with default
<code>split.alpha</code> = 0.5; if set as <code>FALSE</code>, do adaptive
splitting with <code>split.alpha</code> = 1.  The user choice of
<code>split.alpha</code> will be ignored if <code>split.Honest</code> is set
as <code>FALSE</code>, but will be respected
if set to <code>TRUE</code>.  For <code>split.Rule</code>=<code>"TOT"</code>,
there is no honest splitting option and
the parameter <code>split.alpha</code> does not matter.
For <code>split.Rule</code>=<code>"tstats"</code>, a value of <code>TRUE</code>
enables use of <code>split.alpha</code> in calculating the risk function,
which determines the order of pruning in cross-validation. Note also
that causalTree function returns the estimates from the training data,
no matter what the value of <code>split.Honest</code> is; the tree must be
re-estimated to get the honest estimates using <code>estimate.causalTree</code>.
The wrapper function <code>honest.CausalTree</code>
does honest estimation in one step and returns a tree.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_honestsamplesize">HonestSampleSize</code></td>
<td>
<p>number of observations anticipated to be used
in honest re-estimation after building the tree. This enters the
risk function used in both splitting and cross-validation.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_split.bucket">split.Bucket</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
used to specify whether to apply the discrete method in splitting the tree.
If set as <code>TRUE</code>, in splitting a node, the observations in a leaf will
be be partitioned into buckets, with each bucket containing <code>bucketNum</code>
treated and <code>bucketNum</code> control units, and where observations are
ordered prior to partitioning. Splitting will take place by bucket.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_bucketnum">bucketNum</code></td>
<td>
<p>number of observations in each bucket when set
<code>split.Bucket</code> = <code>TRUE</code>.  However, the code will override
this choice in order to guarantee that there are at least <code>minsize</code>
and at most <code>bucketMax</code> buckets.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_bucketmax">bucketMax</code></td>
<td>
<p>Option to choose maximum number of buckets to use in
splitting when set <code>split.Bucket</code> = <code>TRUE</code>,
<code>bucketNum</code> can change by choice of <code>bucketMax</code>.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_cv.option">cv.option</code></td>
<td>
<p>cross validation options, one of <code>"TOT"</code>,
<code>"matching"</code>, <code>"CT"</code>, <code>"fit"</code>, four cross validation
methods in <span class="pkg">causalTree</span>.  There is no <code>cv.option</code> for the
<code>split.Rule</code> <code>"tstats"</code>; see Athey and Imbens (2016) for
discussion.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_cv.honest">cv.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
only used for <code>cv.option</code> as <code>"CT"</code> or <code>"fit"</code>,
to specify whether to apply honest risk evalation function in cross
validation. If set <code>TRUE</code>, use honest risk function, otherwise use
adaptive risk function in cross validation.  If set <code>FALSE</code>, the user
choice of <code>cv.alpha</code> will be set to 1.  If set <code>TRUE</code>,
<code>cv.alpha</code> will default to 0.5, but the user choice of
<code>cv.alpha</code> will be respected.  Note that honest cv estimates
within-leaf variances and may perform better with larger leaf sizes
and/or small number of cross-validation sets.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_minsize">minsize</code></td>
<td>
<p>in order to split, each leaf must have at least
<code>minsize</code> treated cases and <code>minsize</code> control cases.
The default value is set as 2.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_model">model</code></td>
<td>
<p>model frame of <code>causalTree</code>, same as <code>rpart</code></p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_x">x</code></td>
<td>
<p>keep a copy of the <code>x</code> matrix in the result.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_y">y</code></td>
<td>
<p>keep a copy of the dependent variable in the result.  If
missing and <code>model</code> is supplied this defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_propensity">propensity</code></td>
<td>
<p>propensity score used in <code>"TOT"</code> splitting
and <code>"TOT"</code>, honest <code>"CT"</code> cross validation methods. The
default value is the proportion of treated cases in all observations.
In this implementation, the propensity score is a constant for the whole
dataset.  Unit-specific propensity scores are not supported; however,
the user may use inverse propensity scores as case weights if desired.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_control">control</code></td>
<td>
<p>a list of options that control details of the
<code>rpart</code> algorithm.  See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_split.alpha">split.alpha</code></td>
<td>
<p>scale parameter between 0 and 1, used in splitting
risk evaluation function for <code>"CT"</code>. When <code>split.Honest = FALSE</code>,
<code>split.alpha</code> will be set as 1.  For <code>split.Rule</code>=<code>"tstats"</code>,
if <code>split.Honest</code>=<code>TRUE</code>, <code>split.alpha</code> is used in
calculating the risk function, which determines the order of pruning
in cross-validation.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_cv.alpha">cv.alpha</code></td>
<td>
<p>scale paramter between 0 and 1, used in cross validation
risk evaluation function for <code>"CT"</code> and <code>"fit"</code>.  When
<code>cv.Honest = FALSE</code>, <code>cv.alpha</code> will be set as 1.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_cv.gamma">cv.gamma</code>, <code id="honest.causalTree_+3A_split.gamma">split.gamma</code></td>
<td>
<p>optional parameters used in evaluating policies.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_cost">cost</code></td>
<td>
<p>a vector of non-negative costs, one for each variable in
the model. Defaults to one for all variables. These are scalings to
be applied when considering splits, so the improvement on splitting
on a variable is divided by its cost in deciding which split to
choose.</p>
</td></tr>
<tr><td><code id="honest.causalTree_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalTree</code>.  They are checked against the
list of valid arguments.  An example of a commonly set parameter would
be <code>xval</code>, which sets the number of cross-validation samples.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rpart</code>.  See <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>.
</p>


<h3>References</h3>

<p>Breiman L., Friedman J. H., Olshen R. A., and Stone, C. J. (1984)
<em>Classification and Regression Trees.</em>
Wadsworth.
</p>
<p>Athey, S and G Imbens (2016)  <em>Recursive Partitioning for
Heterogeneous Causal Effects</em>.  http://arxiv.org/abs/1504.01132
</p>


<h3>See Also</h3>

<p><code><a href="#topic+causalTree">causalTree</a></code>,
<code><a href="#topic+estimate.causalTree">estimate.causalTree</a></code>, <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>,
<code><a href="rpart.html#topic+summary.rpart">summary.rpart</a></code>, <code><a href="rpart.plot.html#topic+rpart.plot">rpart.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library("rpart")
library("rpart.plot")
library("htetree")
n &lt;- nrow(simulation.1)

trIdx &lt;- which(simulation.1$treatment == 1)

conIdx &lt;- which(simulation.1$treatment == 0)

train_idx &lt;- c(sample(trIdx, length(trIdx) / 2), sample(conIdx,
    length(conIdx) / 2))

train_data &lt;- simulation.1[train_idx, ]

est_data &lt;- simulation.1[-train_idx, ]

honestTree &lt;- honest.causalTree(y ~ x1 + x2 + x3 + x4, data = train_data,
     treatment = train_data$treatment,
     est_data = est_data,
     est_treatment = est_data$treatment,
     split.Rule = "CT", split.Honest = TRUE,
     HonestSampleSize = nrow(est_data),
     split.Bucket = TRUE, cv.option = "CT")

opcp &lt;-  honestTree$cptable[,1][which.min(honestTree$cptable[,4])]

opTree &lt;- prune(honestTree, opcp)

rpart.plot(opTree)
</code></pre>

<hr>
<h2 id='honest.est.causalTree'>honest re-estimation and change the frame of object using estimation sample</h2><span id='topic+honest.est.causalTree'></span>

<h3>Description</h3>

<p>honest re-estimation and change the frame of object using estimation sample
</p>


<h3>Usage</h3>

<pre><code class='language-R'>honest.est.causalTree(fit, x, wt, treatment, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="honest.est.causalTree_+3A_fit">fit</code></td>
<td>
<p>an <code>causalTree</code> object</p>
</td></tr>
<tr><td><code id="honest.est.causalTree_+3A_x">x</code></td>
<td>
<p>input training data</p>
</td></tr>
<tr><td><code id="honest.est.causalTree_+3A_wt">wt</code></td>
<td>
<p>optional weights</p>
</td></tr>
<tr><td><code id="honest.est.causalTree_+3A_treatment">treatment</code></td>
<td>
<p>treatment variable</p>
</td></tr>
<tr><td><code id="honest.est.causalTree_+3A_y">y</code></td>
<td>
<p>outcome variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rpart</code>.  See <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>.
</p>

<hr>
<h2 id='honest.est.rparttree'>honest re-estimation and change the frame of object using estimation sample</h2><span id='topic+honest.est.rparttree'></span>

<h3>Description</h3>

<p>honest re-estimation and change the frame of object using estimation sample
</p>


<h3>Usage</h3>

<pre><code class='language-R'>honest.est.rparttree(fit, x, wt, y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="honest.est.rparttree_+3A_fit">fit</code></td>
<td>
<p>an <code>causalTree</code> object</p>
</td></tr>
<tr><td><code id="honest.est.rparttree_+3A_x">x</code></td>
<td>
<p>input training data</p>
</td></tr>
<tr><td><code id="honest.est.rparttree_+3A_wt">wt</code></td>
<td>
<p>optional weights</p>
</td></tr>
<tr><td><code id="honest.est.rparttree_+3A_y">y</code></td>
<td>
<p>outcome variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Intermediate estimation results for an honest estimation of
<code>causalTree</code>.
</p>

<hr>
<h2 id='honest.rparttree'>Honest recursive partitioning Tree</h2><span id='topic+honest.rparttree'></span>

<h3>Description</h3>

<p>The recursive partitioning function, for R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>honest.rparttree(
  formula,
  data,
  weights,
  subset,
  est_data,
  est_weights,
  na.action = na.rpart,
  method,
  model = FALSE,
  x = FALSE,
  y = TRUE,
  parms,
  control,
  cost,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="honest.rparttree_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response and features but
no interaction terms.  If this a a data frome, that is taken as
the model frame (see <code><a href="stats.html#topic+model.frame">model.frame</a>).</code></p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_data">data</code></td>
<td>
<p>an optional data frame that includes the variables
named in the formula.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_subset">subset</code></td>
<td>
<p>optional expression saying that only a subset of the
rows of the data should be used in the fit.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_est_data">est_data</code></td>
<td>
<p>data frame to be used for leaf estimates; the
estimation sample. Must contain the variables used in training the tree.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_est_weights">est_weights</code></td>
<td>
<p>optional case weights for estimation sample</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_method">method</code></td>
<td>
<p>one of <code>"anova"</code>, <code>"poisson"</code>, <code>"class"</code>
or <code>"exp"</code>.  If <code>method</code> is missing then the routine tries
to make an intelligent guess.
If <code>y</code> is a survival object, then <code>method = "exp"</code> is assumed,
if <code>y</code> has 2 columns then <code>method = "poisson"</code> is assumed,
if <code>y</code> is a factor then <code>method = "class"</code> is assumed,
otherwise <code>method = "anova"</code> is assumed.
It is wisest to specify the method directly, especially as more
criteria may added to the function in future.
</p>
<p>Alternatively, <code>method</code> can be a list of functions named
<code>init</code>, <code>split</code> and <code>eval</code>.  Examples are given in
the file &lsquo;<span class="file">tests/usersplits.R</span>&rsquo; in the sources, and in the
vignettes &lsquo;User Written Split Functions&rsquo;.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_model">model</code></td>
<td>
<p>model frame of <code>causalTree</code>, same as <code>rpart</code></p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_x">x</code></td>
<td>
<p>keep a copy of the <code>x</code> matrix in the result.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_y">y</code></td>
<td>
<p>keep a copy of the dependent variable in the result.  If
missing and <code>model</code> is supplied this defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_parms">parms</code></td>
<td>
<p>optional parameters for the splitting function.<br />
Anova splitting has no parameters.<br />
Poisson splitting has a single parameter, the coefficient of variation of
the prior distribution on the rates.  The default value is 1.<br />
Exponential splitting has the same parameter as Poisson.<br />
For classification splitting, the list can contain any of:
the vector of prior probabilities (component <code>prior</code>), the loss matrix
(component <code>loss</code>) or the splitting index (component
<code>split</code>).  The priors must be positive and sum to 1.  The loss
matrix must have zeros on the diagonal and positive off-diagonal
elements.  The splitting index can be <code>gini</code> or
<code>information</code>.  The default priors are proportional to the data
counts, the losses default to 1, and the split defaults to
<code>gini</code>.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_control">control</code></td>
<td>
<p>a list of options that control details of the
<code>rpart</code> algorithm.  See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_cost">cost</code></td>
<td>
<p>a vector of non-negative costs, one for each variable in
the model. Defaults to one for all variables. These are scalings to
be applied when considering splits, so the improvement on splitting
on a variable is divided by its cost in deciding which split to
choose.</p>
</td></tr>
<tr><td><code id="honest.rparttree_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalTree</code>.  They are checked against the
list of valid arguments.  An example of a commonly set parameter would
be <code>xval</code>, which sets the number of cross-validation samples.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rpart</code> after running an honest recursive
partitioning tree.
.
</p>

<hr>
<h2 id='hte_causalTree'>Estimate Heterogeneous Treatment Effect via Causal Tree</h2><span id='topic+hte_causalTree'></span>

<h3>Description</h3>

<p>Estimate heterogeneous treatment effect via causal tree. In each leaf,
the treatment effect is the difference of mean outcome in treatment
group and control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_causalTree(
  outcomevariable,
  minsize = 20,
  crossvalidation = 20,
  data,
  treatment_indicator,
  ps_indicator,
  covariates,
  negative = FALSE,
  drawplot = TRUE,
  varlabel = NULL,
  maintitle = "Heterogeneous Treatment Effect Estimation",
  legend.x = 0.08,
  legend.y = 0.25,
  check = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_causalTree_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_minsize">minsize</code></td>
<td>
<p>the minimum number of observations in each leaf.
The default is set as 20.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_crossvalidation">crossvalidation</code></td>
<td>
<p>number of cross validations. The default
is set as 20.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column
name of the treatment indicator.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_ps_indicator">ps_indicator</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_negative">negative</code></td>
<td>
<p>a logical value indicating whether we expect the
treatment effect to be negative. The default is set as FALSE.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_drawplot">drawplot</code></td>
<td>
<p>a logical value indicating whether to plot the
model as part of the output. The default is set as TRUE.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_varlabel">varlabel</code></td>
<td>
<p>a named vector containing variable labels.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_maintitle">maintitle</code></td>
<td>
<p>a character string indicating the main title displayed
when plotting the tree and results. The default is set as
&quot;Heterogeneous Treatment Effect Estimation&quot;.</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_legend.x">legend.x</code>, <code id="hte_causalTree_+3A_legend.y">legend.y</code></td>
<td>
<p>x and y coordinate to position the legend.
The default is set as (0.08, 0.25).</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_check">check</code></td>
<td>
<p>if TRUE, generates 100 trees and outputs most common
tree structures and their frequency</p>
</td></tr>
<tr><td><code id="hte_causalTree_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>predicted treatment effect and the associated tree
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rpart)
library(htetree)
hte_causalTree(outcomevariable="outcome",
    data=data.frame("confounder"=c(0, 1, 1, 0, 1, 1),
                    "treatment"=c(0,0,0,1,1,1),
                    "prop_score"=c(0.4, 0.4, 0.5, 0.6, 0.6, 0.7),
                    "outcome"=c(1, 2, 2, 1, 4, 4)),
   treatment_indicator = "treatment",
   ps_indicator = "prop_score",
   covariates = "confounder")
</code></pre>

<hr>
<h2 id='hte_forest'>Estimate Heterogeneous Treatment Effect via Random Forest</h2><span id='topic+hte_forest'></span>

<h3>Description</h3>

<p>Estimate heterogeneous treatment effect via random forest.
In each leaf, the treatment effect is the difference of mean outcome
weighted by inverse propensity scores in treatment group and
control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_forest(
  outcomevariable,
  minsize = 20,
  crossvalidation = 20,
  data = edurose_mediation_20181126,
  treatment_indicator = "compcoll25",
  ps_indicator = "propsc_com25",
  ps_linear = "propsc_com25lin",
  covariates = c(linear_terms, ps_indicator),
  negative = FALSE,
  drawplot = TRUE,
  legend.x = 0.08,
  legend.y = 0.25,
  gf,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_forest_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_minsize">minsize</code></td>
<td>
<p>the minimum number of observations in each leaf.
The default is set as 20.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_crossvalidation">crossvalidation</code></td>
<td>
<p>number of cross validations. The default
is set as 20.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column
name of the treatment indicator.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_ps_indicator">ps_indicator</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_ps_linear">ps_linear</code></td>
<td>
<p>a character representing name  of  a  column  that
stores  linearized  propensity scores.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_negative">negative</code></td>
<td>
<p>a logical value indicating whether we expect the
treatment effect to be negative. The default is set as FALSE.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_drawplot">drawplot</code></td>
<td>
<p>a logical value indicating whether to plot the
model as part of the output. The default is set as TRUE.</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_legend.x">legend.x</code>, <code id="hte_forest_+3A_legend.y">legend.y</code></td>
<td>
<p>x and y coordinate to position the legend.
The default is set as (0.08, 0.25).</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_gf">gf</code></td>
<td>
<p>a fitted generalized random forest object</p>
</td></tr>
<tr><td><code id="hte_forest_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with three elements. The first one is the predicted outcome
for each unit. The second is an <code>causalTree</code> object with the tree split
information. The third is a <code>data.frame</code> summarizing the prediction
results.
</p>

<hr>
<h2 id='hte_ipw'>Estimate Heterogeneous Treatment Effect via Adjusted Causal Tree</h2><span id='topic+hte_ipw'></span>

<h3>Description</h3>

<p>Estimate heterogeneous treatment effect via adjusted causal tree.
In each leaf, the treatment effect is the difference of mean outcome
weighted by inverse propensity scores in treatment group and
control group.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_ipw(
  outcomevariable,
  minsize = 20,
  crossvalidation = 20,
  data,
  treatment_indicator,
  ps_indicator,
  ps_linear = NULL,
  covariates,
  negative = FALSE,
  drawplot = TRUE,
  varlabel = NULL,
  maintitle = "Heterogeneous Treatment Effect Estimation",
  legend.x = 0.08,
  legend.y = 0.25,
  check = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_ipw_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_minsize">minsize</code></td>
<td>
<p>the minimum number of observations in each leaf.
The default is set as 20.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_crossvalidation">crossvalidation</code></td>
<td>
<p>number of cross validations. The default
is set as 20.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column
name of the treatment indicator.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_ps_indicator">ps_indicator</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_ps_linear">ps_linear</code></td>
<td>
<p>a character representing name  of  a  column  that
stores  linearized  propensity scores.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_negative">negative</code></td>
<td>
<p>a logical value indicating whether we expect the
treatment effect to be negative. The default is set as FALSE.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_drawplot">drawplot</code></td>
<td>
<p>a logical value indicating whether to plot the
model as part of the output. The default is set as TRUE.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_varlabel">varlabel</code></td>
<td>
<p>a named vector containing variable labels.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_maintitle">maintitle</code></td>
<td>
<p>a character string indicating the main title displayed
when plotting the tree and results. The default is set as
&quot;Heterogeneous Treatment Effect Estimation&quot;.</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_legend.x">legend.x</code>, <code id="hte_ipw_+3A_legend.y">legend.y</code></td>
<td>
<p>x and y coordinate to position the legend.
The default is set as (0.08, 0.25).</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_check">check</code></td>
<td>
<p>if TRUE, generates 100 trees and outputs most common
tree structures and their frequency</p>
</td></tr>
<tr><td><code id="hte_ipw_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>predicted treatment effect and the associated tree
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rpart)
library(htetree)
hte_ipw(outcomevariable="outcome",
data=data.frame("confounder"=c(0, 1, 1, 0, 1, 1),
"treatment"=c(0,0,0,1,1,1), "prop_score"=c(0.4, 0.4, 0.5, 0.6, 0.6, 0.7),
"outcome"=c(1, 2, 2, 1, 4, 4)), treatment_indicator = "treatment",
ps_indicator = "prop_score", covariates = "confounder")
</code></pre>

<hr>
<h2 id='hte_match'>Estimate Heterogeneous Treatment Effect via Adjusted Causal Tree</h2><span id='topic+hte_match'></span>

<h3>Description</h3>

<p>Estimate heterogeneous treatment effect via adjusted causal tree.
In each leaf, the treatment effect estimated from nn matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_match(
  outcomevariable,
  minsize = 20,
  crossvalidation = 20,
  data,
  treatment_indicator,
  ps_indicator,
  ps_linear = NULL,
  covariates,
  negative = FALSE,
  drawplot = TRUE,
  con.num = 1,
  varlabel = NULL,
  maintitle = "Heterogeneous Treatment Effect Estimation",
  legend.x = 0.08,
  legend.y = 0.25,
  check = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_match_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_minsize">minsize</code></td>
<td>
<p>the minimum number of observations in each leaf.
The default is set as 20.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_crossvalidation">crossvalidation</code></td>
<td>
<p>number of cross validations. The default
is set as 20.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column
name of the treatment indicator.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_ps_indicator">ps_indicator</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_ps_linear">ps_linear</code></td>
<td>
<p>a character representing name  of  a  column  that
stores linearized  propensity scores.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="hte_match_+3A_negative">negative</code></td>
<td>
<p>a logical value indicating whether we expect the
treatment effect to be negative. The default is set as FALSE.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_drawplot">drawplot</code></td>
<td>
<p>a logical value indicating whether to plot the
model as part of the output. The default is set as TRUE.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_con.num">con.num</code></td>
<td>
<p>a number indicating the number of units from control
groups to be used in matching.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_varlabel">varlabel</code></td>
<td>
<p>a named vector containing variable labels.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_maintitle">maintitle</code></td>
<td>
<p>a character string indicating the main title displayed
when plotting the tree and results. The default is set as
&quot;Heterogeneous Treatment Effect Estimation&quot;.</p>
</td></tr>
<tr><td><code id="hte_match_+3A_legend.x">legend.x</code>, <code id="hte_match_+3A_legend.y">legend.y</code></td>
<td>
<p>x and y coordinate to position the legend.
The default is set as (0.08, 0.25).</p>
</td></tr>
<tr><td><code id="hte_match_+3A_check">check</code></td>
<td>
<p>if TRUE, generates 100 trees and outputs most common
tree structures and their frequency</p>
</td></tr>
<tr><td><code id="hte_match_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>predicted treatment effect and the associated tree
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rpart)
library(htetree)
hte_match(outcomevariable="outcome",
data=data.frame("x1"=c(0, 1, 1, 0, 1, 1),"x2"=c(3, 2, 1, 5, 7, 1),
"treatment"=c(0,0,0,1,1,1), "prop_score"=c(0.4, 0.4, 0.5, 0.6, 0.6, 0.7),
"outcome"=c(1, 2, 2, 1, 4, 4)), treatment_indicator = "treatment",
ps_indicator = "prop_score", covariates = c("x1","x2"))
</code></pre>

<hr>
<h2 id='hte_plot'>Visualize the Estimated Results</h2><span id='topic+hte_plot'></span>

<h3>Description</h3>

<p>The  function <code>hte_plot</code> takes  a  model  created  by causal tree, as
well as the adjusted version, and
plots  the  distribution of the outcome variable in treated
and control groups in each leaf of the  tree.
This  visualization  aims  to  show  how  the  predicted
treatment  effect changes with each split in the tree.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_plot(
  model,
  data,
  treatment_indicator = NULL,
  outcomevariable,
  propensity_score,
  plot.title = "Visualization of the Tree"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_plot_+3A_model">model</code></td>
<td>
<p>a tree model constructed by <code>hte_causalTree, hte_matchinleaves,
or hte_ipw</code>.</p>
</td></tr>
<tr><td><code id="hte_plot_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_plot_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column name
for the treatment variable in the causal setup.</p>
</td></tr>
<tr><td><code id="hte_plot_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_plot_+3A_propensity_score">propensity_score</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_plot_+3A_plot.title">plot.title</code></td>
<td>
<p>character representing the main title of the plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value
</p>

<hr>
<h2 id='hte_plot_line'>Visualize the Estimated Results</h2><span id='topic+hte_plot_line'></span>

<h3>Description</h3>

<p>The function <code>hte_plot_line</code> takes a model created by
causal tree, as well as the adjusted version, and plots the
different least squares models used to estimate heterogeneous
treatment effects(HTE) at each node.  At each node, this
visualization aims to show how the estimated treatment effect
differs when using ordinary least squares and weighted least
squares methods. The weighted least squares method in this
package uses
inverse propensity scores as weights, in order to reduce
bias due to confounding variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hte_plot_line(
  model,
  data,
  treatment_indicator = NULL,
  outcomevariable,
  propensity_score,
  plot.title = "Visualization of the Tree",
  gamma = 0,
  lambda = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hte_plot_line_+3A_model">model</code></td>
<td>
<p>a tree model constructed by <code>hte_causalTree, hte_matchinleaves,
or hte_ipw</code>.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column name
for the treatment variable in the causal setup.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_propensity_score">propensity_score</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_plot.title">plot.title</code></td>
<td>
<p>character representing the main title of the plot.</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_gamma">gamma</code>, <code id="hte_plot_line_+3A_lambda">lambda</code></td>
<td>
<p>numbers indicating the bias level used in
sensitivity analysis</p>
</td></tr>
<tr><td><code id="hte_plot_line_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, used for plotting the estimated results
with lines.
</p>

<hr>
<h2 id='htetree.anova'>Intermediate function for <code>causalTree</code></h2><span id='topic+htetree.anova'></span>

<h3>Description</h3>

<p>Intermediate function for <code>causalTree</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>htetree.anova(y, offset, wt)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="htetree.anova_+3A_y">y</code></td>
<td>
<p>outcome variable</p>
</td></tr>
<tr><td><code id="htetree.anova_+3A_offset">offset</code></td>
<td>
<p>this can be used to specify an a priori known
component
to be included in the linear predictor during fitting. This should be
<code>NULL</code> or a numeric vector of length equal to the number of cases.
One or more <a href="stats.html#topic+offset">offset</a> terms can be included in the formula instead or as
well, and
if more than one is specified their sum is used. See <a href="stats.html#topic+model.offset">model.offset</a>.</p>
</td></tr>
<tr><td><code id="htetree.anova_+3A_wt">wt</code></td>
<td>
<p>optional weights</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value.
</p>

<hr>
<h2 id='importance'>Caclulate variable importance</h2><span id='topic+importance'></span>

<h3>Description</h3>

<p>Each primary split is credited with the value of splits$improve
Each surrogate split gets split$adj times the primary split's value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>importance(fit)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="importance_+3A_fit">fit</code></td>
<td>
<p>a fitted <code>causalTree</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>same as the <code>importance</code> function in <span class="pkg">rpart</span>.
</p>

<hr>
<h2 id='init.causalForest'>Causal Effect Regression and Estimation Forests (Tree Ensembles)</h2><span id='topic+init.causalForest'></span><span id='topic+predict.causalForest'></span><span id='topic+causalForest'></span>

<h3>Description</h3>

<p>Build a random causal forest by fitting a user selected number of
<code>causalTree</code> models to get an ensemble of <code>rpart</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>init.causalForest(
  formula,
  data,
  treatment,
  weights = FALSE,
  cost = FALSE,
  num.trees,
  ncov_sample
)

## S3 method for class 'causalForest'
predict(object, newdata, predict.all = FALSE, type = "vector", ...)

causalForest(
  formula,
  data,
  treatment,
  na.action = na.causalTree,
  split.Rule = "CT",
  double.Sample = TRUE,
  split.Honest = TRUE,
  split.Bucket = FALSE,
  bucketNum = 5,
  bucketMax = 100,
  cv.option = "CT",
  cv.Honest = TRUE,
  minsize = 2L,
  propensity,
  control,
  split.alpha = 0.5,
  cv.alpha = 0.5,
  sample.size.total = floor(nrow(data)/10),
  sample.size.train.frac = 0.5,
  mtry = ceiling(ncol(data)/3),
  nodesize = 1,
  num.trees = nrow(data),
  cost = FALSE,
  weights = FALSE,
  ncolx,
  ncov_sample
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="init.causalForest_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response and features but no
interaction terms.  If this a a data frome, that is taken as the model frame
(see <code><a href="stats.html#topic+model.frame">model.frame</a>).</code></p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_data">data</code></td>
<td>
<p>an optional data frame that includes the variables
named in the formula.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_treatment">treatment</code></td>
<td>
<p>a vector that indicates the treatment status of
each observation. 1 represents treated and 0 represents control.
Only binary treatment supported in this version.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_weights">weights</code></td>
<td>
<p>optional case weights.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_cost">cost</code></td>
<td>
<p>a vector of non-negative costs, one for each variable in
the model. Defaults to one for all variables. These are scalings to
be applied when considering splits, so the improvement on splitting
on a variable is divided by its cost in deciding which split to
choose.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_num.trees">num.trees</code></td>
<td>
<p>Number of trees to be built in the causal forest</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_ncov_sample">ncov_sample</code></td>
<td>
<p>Number of covariates randomly sampled to
build each tree in the forest</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_object">object</code></td>
<td>
<p>a <code>causalTree</code> object</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_newdata">newdata</code></td>
<td>
<p>new data to predict</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_predict.all">predict.all</code></td>
<td>
<p>If TRUE, return predicted individual effect for
each observations. Otherwise, return the average effect.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_type">type</code></td>
<td>
<p>the type of returned object</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalForest</code>.  They are
checked against the
list of valid arguments.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_na.action">na.action</code></td>
<td>
<p>the default action deletes all observations for which
<code>y</code> is missing, but keeps those in which one or more predictors
are missing.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_split.rule">split.Rule</code></td>
<td>
<p>causalTree splitting options, one of <code>"TOT"</code>,
<code>"CT"</code>, <code>"fit"</code>, <code>"tstats"</code>, four splitting rules in
<code>causalTree</code>.  Note that the <code>"tstats"</code> alternative does
not have an associated cross-validation method <code>cv.option</code>;
see Athey and Imbens (2016)
for a discussion.  Note further that <code>split.Rule</code> and
<code>cv.option</code> can mix and match.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_double.sample">double.Sample</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
if set to True, causalForest will build honest trees.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_split.honest">split.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>, used
to decide the splitting rule of the trees.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_split.bucket">split.Bucket</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>,
used to specify whether to apply the discrete method in splitting the tree.
If set as <code>TRUE</code>, in splitting a node, the observations in a leaf
will be be partitioned into buckets, with each bucket containing
<code>bucketNum</code> treated and <code>bucketNum</code> control units, and where
observations are ordered prior to partitioning. Splitting will take
place by bucket.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_bucketnum">bucketNum</code></td>
<td>
<p>number of observations in each bucket when set
<code>split.Bucket</code> = <code>TRUE</code>.  However, the code will override
this choice in order to guarantee that there are at least <code>minsize</code>
and at most <code>bucketMax</code> buckets.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_bucketmax">bucketMax</code></td>
<td>
<p>Option to choose maximum number of buckets to use in
splitting when set <code>split.Bucket</code> = <code>TRUE</code>, <code>bucketNum</code>
can change by choice of <code>bucketMax</code>.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_cv.option">cv.option</code></td>
<td>
<p>cross validation options, one of <code>"TOT"</code>,
<code>"matching"</code>, <code>"CT"</code>, <code>"fit"</code>, four cross validation
methods in <span class="pkg">causalTree</span>.  There is no <code>cv.option</code> for
the <code>split.Rule</code> <code>"tstats"</code>; see Athey and Imbens (2016)
for discussion.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_cv.honest">cv.Honest</code></td>
<td>
<p>boolean option, <code>TRUE</code> or <code>FALSE</code>, only
used for <code>cv.option</code> as <code>"CT"</code> or <code>"fit"</code>, to specify
whether to apply honest risk evalation function in cross validation.
If set <code>TRUE</code>, use honest risk function, otherwise use adaptive
risk function in cross validation.  If set <code>FALSE</code>, the user
choice of <code>cv.alpha</code> will be set to 1.  If set
<code>TRUE</code>, <code>cv.alpha</code>
will default to 0.5, but the user choice of <code>cv.alpha</code> will be
respected.  Note that honest cv estimates within-leaf variances and
may perform better with larger leaf sizes and/or small number of
cross-validation sets.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_minsize">minsize</code></td>
<td>
<p>in order to split, each leaf must have at least
<code>minsize</code> treated cases and <code>minsize</code> control cases.
The default value is set as 2.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_propensity">propensity</code></td>
<td>
<p>propensity score used in <code>"TOT"</code> splitting
and <code>"TOT"</code>, honest <code>"CT"</code> cross validation methods.
The default value is the proportion of treated cases in all observations.
In this implementation, the propensity score is a constant for the whole
dataset.  Unit-specific propensity scores are not supported; however,
the user may use inverse propensity scores as case weights if desired.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_control">control</code></td>
<td>
<p>a list of options that control details of the
<code>rpart</code> algorithm.  See <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_split.alpha">split.alpha</code></td>
<td>
<p>scale parameter between 0 and 1, used in splitting
risk evaluation function for <code>"CT"</code>. When <code>split.Honest = FALSE</code>,
<code>split.alpha</code> will be set as 1.  For <code>split.Rule</code>=<code>"tstats"</code>,
if <code>split.Honest</code>=<code>TRUE</code>, <code>split.alpha</code> is used in
calculating the risk function, which determines the order of
pruning in cross-validation.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_cv.alpha">cv.alpha</code></td>
<td>
<p>scale paramter between 0 and 1, used in cross validation
risk evaluation function for <code>"CT"</code> and <code>"fit"</code>.  When
<code>cv.Honest = FALSE</code>, <code>cv.alpha</code> will be set as 1.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_sample.size.total">sample.size.total</code></td>
<td>
<p>Sample size used to build each tree in the
forest (sampled randomly with replacement).</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_sample.size.train.frac">sample.size.train.frac</code></td>
<td>
<p>Fraction of the sample size used for
building each tree (training). For eexample,  if the sample.size.total is
1000 and frac =0.5 then, 500 samples will be used to build the tree and
the other 500 samples will be used the evaluate the tree.</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_mtry">mtry</code></td>
<td>
<p>Number of data features used to build a tree
(This variable is not used presently).</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_nodesize">nodesize</code></td>
<td>
<p>Minimum number of observations for treated and
control cases in one leaf node</p>
</td></tr>
<tr><td><code id="init.causalForest_+3A_ncolx">ncolx</code></td>
<td>
<p>Total number of covariates</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CausalForest builds an ensemble of CausalTrees (See Athey and Imbens,
<em>Recursive Partitioning for Heterogeneous Causal
Effects</em> (2016)), by repeated random sampling of the data with replacement.
Further, each tree is built using a randomly sampled subset of all available
covariates. A causal forest object is a list of trees. To predict, call R's
predict function with new test data and the causalForest object (estimated
on the training data) obtained after calling the causalForest function.
During the prediction phase, the average value over all tree predictions
is returned as the final prediction by default.
To return the predictions of each tree in the forest for each test
observation, set the flag <code>predict.all=TRUE</code>
CausalTree differs from <code>rpart</code> function from <span class="pkg">rpart</span> package in
splitting rules and cross validation methods. Please check Athey
and Imbens, <em>Recursive Partitioning for Heterogeneous Causal
Effects</em> (2016) and Stefan Wager and Susan Athey, <em>Estimation and
Inference of Heterogeneous Treatment Effects using Random Forests
</em> for more details.
</p>


<h3>Value</h3>

<p>An object of class <code>rpart</code>.  See <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>.
</p>


<h3>References</h3>

<p>Breiman L., Friedman J. H., Olshen R. A., and Stone, C. J. (1984)
<em>Classification and Regression Trees.</em>
Wadsworth.
</p>
<p>Athey, S and G Imbens (2016)  <em>Recursive Partitioning for
Heterogeneous Causal Effects</em>.  http://arxiv.org/abs/1504.01132
</p>
<p>Wager,S and Athey, S (2015) <em>Estimation and Inference of Heterogeneous
Treatment Effects using Random Forests</em>
http://arxiv.org/abs/1510.04342
</p>


<h3>See Also</h3>

<p><code><a href="#topic+causalTree">causalTree</a></code>
<code><a href="#topic+honest.causalTree">honest.causalTree</a></code>,
<code><a href="rpart.html#topic+rpart.control">rpart.control</a></code>, <code><a href="rpart.html#topic+rpart.object">rpart.object</a></code>,
<code><a href="rpart.html#topic+summary.rpart">summary.rpart</a></code>, <code><a href="rpart.plot.html#topic+rpart.plot">rpart.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(rpart)
library("htetree")
cf &lt;- causalForest(y~x1+x2+x3+x4+x5+x6+x7+x8+x9+x10, data=simulation.1,
  treatment=simulation.1$treatment,
  split.Rule="CT", split.Honest=TRUE,
  split.Bucket=FALSE, bucketNum = 5,
  bucketMax = 100, cv.option="CT", cv.Honest=TRUE, minsize = 2L,
  split.alpha = 0.5, cv.alpha = 0.5,
  sample.size.total = floor(nrow(simulation.1) / 2),
  sample.size.train.frac = .5,
  mtry = ceiling(ncol(simulation.1)/3), nodesize = 3, num.trees= 5,
  ncolx=10,ncov_sample=3)

cfpredtest &lt;- predict.causalForest(cf, newdata=simulation.1[1:100,],
  type="vector")
</code></pre>

<hr>
<h2 id='makeplots'>Visualize Causal Tree and the Estimated Results</h2><span id='topic+makeplots'></span>

<h3>Description</h3>

<p>An intermediate function used for plotting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeplots(
  negative,
  opfit. = opfit,
  trainset,
  covariates,
  outcomevariable,
  data. = data,
  hte_effect_setup,
  varlabel,
  maintitle,
  legend.x = 0.8,
  legend.y = 0.25,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeplots_+3A_negative">negative</code></td>
<td>
<p>a logical value indicating whether we expect the
treatment effect to be negative. The default is set as FALSE.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_opfit.">opfit.</code></td>
<td>
<p>tree structure generated from causal tree algorithm.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_trainset">trainset</code></td>
<td>
<p>a data frame only containing the variables used in
the model and missings values are listwise deleted.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="makeplots_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_data.">data.</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_hte_effect_setup">hte_effect_setup</code></td>
<td>
<p>a empty list to store the adjusted treatment
effect.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_varlabel">varlabel</code></td>
<td>
<p>a named vector containing variable labels.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_maintitle">maintitle</code></td>
<td>
<p>a character string indicating the main title displayed
when plotting the tree and results. The default is set as
&quot;Heterogeneous Treatment Effect Estimation&quot;.</p>
</td></tr>
<tr><td><code id="makeplots_+3A_legend.x">legend.x</code>, <code id="makeplots_+3A_legend.y">legend.y</code></td>
<td>
<p>x and y coordinate to position the legend.
The default is set as (0.08, 0.25).</p>
</td></tr>
<tr><td><code id="makeplots_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot visualizing the tree and estimated treatment effect in each
node.
</p>

<hr>
<h2 id='matchinleaves'>NN Matching in Leaves</h2><span id='topic+matchinleaves'></span>

<h3>Description</h3>

<p>This intermediate function is used to adjust the heterogeneous treatment
effect estimated in each leaf with NN matching.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matchinleaves(
  trainset = match_data,
  covariates = covariates,
  outcomevariable = outcomevariable,
  hte_effect_setup = hte_effect_setup,
  treatment_indicator,
  con.num = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matchinleaves_+3A_trainset">trainset</code></td>
<td>
<p>a data frame only containing the variables used in
the model and missings values are listwise deleted.</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_covariates">covariates</code></td>
<td>
<p>a vector of column names of all
covariates (linear terms andpropensity score).</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_hte_effect_setup">hte_effect_setup</code></td>
<td>
<p>a empty list to store the adjusted treatment
effect.</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column
name of the treatment indicator.</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_con.num">con.num</code></td>
<td>
<p>a number indicating the number of units from control
groups to be used in matching</p>
</td></tr>
<tr><td><code id="matchinleaves_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list for summarizing the results after matching.
</p>

<hr>
<h2 id='model.frame.causalTree'>Intermediate function for <code>causalTree</code></h2><span id='topic+model.frame.causalTree'></span>

<h3>Description</h3>

<p>get model frame of causalTree, same as <a href="rpart.html#topic+rpart">rpart</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'causalTree'
model.frame(formula, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model.frame.causalTree_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">formula</a>, with a response but no interaction terms.
If this is a data frame, it is taken as the model frame (see
<a href="stats.html#topic+model.frame">model.frame</a>).</p>
</td></tr>
<tr><td><code id="model.frame.causalTree_+3A_...">...</code></td>
<td>
<p>arguments to <code><a href="rpart.html#topic+rpart.control">rpart.control</a></code> may also be
specified in the call to <code>causalTree</code>.  They are checked against the
list of valid arguments.  An example of a commonly set parameter would
be <code>xval</code>, which sets the number of cross-validation samples.
The parameter <code>minsize</code> is implemented differently in
<code>causalTree</code> than in <code>rpart</code>; we require a minimum of <code>minsize</code>
treated observations and a minimum of <code>minsize</code> control
observations in each leaf.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a model frame for <code>causalTree</code>.
</p>

<hr>
<h2 id='na.causalTree'>Intermediate function for <code>causalTree</code></h2><span id='topic+na.causalTree'></span>

<h3>Description</h3>

<p>requirement when missing values are included in sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na.causalTree(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na.causalTree_+3A_x">x</code></td>
<td>
<p>covariates</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, used for handling missing values when thy are
included in sample.
</p>

<hr>
<h2 id='plotOutcomes'>Intermediate function for <code>hte_plot_line</code></h2><span id='topic+plotOutcomes'></span>

<h3>Description</h3>

<p>Plots the
different least squares models used to estimate heterogeneous
treatment effects(HTE) at each node. At each node, this
visualization aims to show how the estimated treatment effect
differs when using ordinary least squares and weighted least
squares methods. The weighted least squares method in this
package uses
inverse propensity scores as weights, in order to reduce
bias due to confounding variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotOutcomes(
  treatment,
  outcome,
  propscores,
  confInt = TRUE,
  colbyWt = FALSE,
  ylab = "",
  xlab = "",
  title = "",
  gamma = 0,
  lambda = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotOutcomes_+3A_treatment">treatment</code></td>
<td>
<p>a character representing the column name
for the treatment variable in the causal setup</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_outcome">outcome</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_propscores">propscores</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_confint">confInt</code></td>
<td>
<p>a logical value indicating whether adding the 95
confidence interval. The default is set as <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_colbywt">colbyWt</code></td>
<td>
<p>a logical value indicating whether the points are
are colored according to inverse propensity scores. The default is
set as FALSE.</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_xlab">xlab</code>, <code id="plotOutcomes_+3A_ylab">ylab</code>, <code id="plotOutcomes_+3A_title">title</code></td>
<td>
<p>Characters representing the name for x axis,
y axis, and main title for each node.</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_gamma">gamma</code>, <code id="plotOutcomes_+3A_lambda">lambda</code></td>
<td>
<p>numbers indicating the bias level used in
sensitivity analysis</p>
</td></tr>
<tr><td><code id="plotOutcomes_+3A_...">...</code></td>
<td>
<p>further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A summary table after adjusting the estimates with
inverse probability weighting (ipw).
</p>

<hr>
<h2 id='runDynamic'>Visualize Causal Tree and Treatment Effects via Shiny</h2><span id='topic+runDynamic'></span>

<h3>Description</h3>

<p>Visualize Causal Tree and Treatment Effects via Shiny
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runDynamic(
  model,
  data,
  outcomevariable,
  treatment_indicator,
  propensity_score = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runDynamic_+3A_model">model</code></td>
<td>
<p>a tree model constructed by <code>hte_causalTree, hte_matchinleaves,
or hte_ipw</code>.</p>
</td></tr>
<tr><td><code id="runDynamic_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="runDynamic_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="runDynamic_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column name
for the treatment variable in the causal setup.</p>
</td></tr>
<tr><td><code id="runDynamic_+3A_propensity_score">propensity_score</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Shiny page.
</p>

<hr>
<h2 id='saveBCSS'>Save Javascript Embedded in Shiny App</h2><span id='topic+saveBCSS'></span>

<h3>Description</h3>

<p>Save Javascript Embedded in Shiny App
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveBCSS(filePath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveBCSS_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='saveFiles'>Save Necessary Files to Run Shiny App</h2><span id='topic+saveFiles'></span>

<h3>Description</h3>

<p>This function is to save files necessary to run Shiny app to
visualize causal tree and the estimated heterogeneous treatment
effects in an interactive way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveFiles(
  model,
  data,
  outcomevariable,
  treatment_indicator,
  propensity_score = "",
  filePath = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveFiles_+3A_model">model</code></td>
<td>
<p>a tree model constructed by <code>hte_causalTree, hte_matchinleaves,
or hte_ipw</code>.</p>
</td></tr>
<tr><td><code id="saveFiles_+3A_data">data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td></tr>
<tr><td><code id="saveFiles_+3A_outcomevariable">outcomevariable</code></td>
<td>
<p>a character representing the column name
of the outcome variable.</p>
</td></tr>
<tr><td><code id="saveFiles_+3A_treatment_indicator">treatment_indicator</code></td>
<td>
<p>a character representing the column name
for the treatment variable in the causal setup.</p>
</td></tr>
<tr><td><code id="saveFiles_+3A_propensity_score">propensity_score</code></td>
<td>
<p>a character representing the column name of
the propensity score.</p>
</td></tr>
<tr><td><code id="saveFiles_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='saveGCSS'>Save CSS File Embedded in Shiny App</h2><span id='topic+saveGCSS'></span>

<h3>Description</h3>

<p>Save CSS File Embedded in Shiny App
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveGCSS(filePath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveGCSS_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='saveInd'>Save HTML Index Embedded in Shiny App</h2><span id='topic+saveInd'></span>

<h3>Description</h3>

<p>Save HTML Index Embedded in Shiny App
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveInd(filePath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveInd_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='saveServ'>Save Shiny Server Temporarily</h2><span id='topic+saveServ'></span>

<h3>Description</h3>

<p>Save Shiny Server Temporarily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveServ(filePath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveServ_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='saveUI'>Save Shiny UI Temporarily</h2><span id='topic+saveUI'></span>

<h3>Description</h3>

<p>Save Shiny UI Temporarily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveUI(filePath)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveUI_+3A_filepath">filePath</code></td>
<td>
<p>a character string representing the path name
to save the files temporarily.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. It is used to save necessary files temporarily
to run Shiny App.
</p>

<hr>
<h2 id='simulation.1'>A Simulated Dataset</h2><span id='topic+simulation.1'></span>

<h3>Description</h3>

<p>A simulated dataset inherited from <code>causalTree</code> package
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulation.1
</code></pre>


<h3>Format</h3>

<p>## 'simulation.1'
A data frame with 500 observations on the following 12 variables.
</p>

<dl>
<dt><code>x1</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x2</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x3</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x4</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x5</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x6</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x7</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x8</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x9</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>x10</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>y</code></dt><dd><p>a numeric vector</p>
</dd>
<dt><code>treatment</code></dt><dd><p>a numeric vector</p>
</dd>
</dl>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
