<!DOCTYPE html><html><head><title>Help for package dbcsp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {dbcsp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#dbcsp-package'><p>Distance-Based Common Spatial Patterns</p></a></li>
<li><a href='#AR.data'><p>Skeleton data for 6 different actions.</p></a></li>
<li><a href='#boxplot.dbcsp'><p>Boxplot for dbcsp object</p></a></li>
<li><a href='#dbcsp-class'><p>S4 class for representing DB-CSP (Distance-Based Common Spatial Patterns)</p></a></li>
<li><a href='#plot.dbcsp'><p>Plot function implemented by dbcsp class</p></a></li>
<li><a href='#predict.dbcsp'><p>Predict function implemented by dbcsp class</p></a></li>
<li><a href='#print.dbcsp'><p>Print function implemented by dbcsp class</p></a></li>
<li><a href='#selectQ'><p>Select Q best dimension</p></a></li>
<li><a href='#summary.dbcsp'><p>Summary function implemented by dbcsp class</p></a></li>
<li><a href='#train.dbcsp'><p>Training process of a dbcsp object, using LDA classifier.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Distance-Based Common Spatial Patterns</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.2.1</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Itsaso Rodríguez-Moreno &lt;itsaso.rodriguez@ehu.eus&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A way to apply Distance-Based Common Spatial Patterns
    (DB-CSP) techniques in different fields, both classical Common Spatial
    Patterns (CSP) as well as DB-CSP. The method is composed of two
    phases: applying the DB-CSP algorithm and performing a classification.
    The main idea behind the CSP is to use a linear transform to project
    data into low-dimensional subspace with a projection matrix, in such a
    way that each row consists of weights for signals. This transformation
    maximizes the variance of two-class signal matrices.The dbcsp object
    is created to compute the projection vectors. For exploratory and
    descriptive purpose, plot and boxplot functions can be used. Functions
    train, predict and selectQ are implemented for the classification
    step.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>caret, R (&ge; 2.10), TSdist (&ge; 3.7)</td>
</tr>
<tr>
<td>Imports:</td>
<td>geigen, ggplot2, MASS, Matrix, methods, parallelDist, plyr,
stats, zoo</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-06-30 13:20:06 UTC; bee</td>
</tr>
<tr>
<td>Author:</td>
<td>Itziar Irigoien [aut],
  Concepción Arenas [aut],
  Itsaso Rodríguez-Moreno [cre, aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-06-30 14:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='dbcsp-package'>Distance-Based Common Spatial Patterns</h2><span id='topic+dbcsp-package'></span>

<h3>Description</h3>

<p>dbcsp is a package which offers a way to apply Distance-Based Common Spatial Patterns (DB-CSP) techniques in different fields, both classical Common Spatial Patterns (CSP) as well as DB-CSP.
</p>


<h3>Author(s)</h3>

<p>Itsaso Rodriguez Moreno <a href="mailto:itsaso.rodriguez@ehu.eus">itsaso.rodriguez@ehu.eus</a>
</p>
<p>Itziar Irigoien <a href="mailto:itziar.irigoien@ehu.eus">itziar.irigoien@ehu.eus</a>
</p>
<p>Concepción Arenas <a href="mailto:carenas@ub.edu">carenas@ub.edu</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># There is an example dataset called AR.data shipped with the package.

# It contains the skeleton data extracted from videos of people performing six different actions,
# recorded by a humanoid robot. So, it has 6 different classes.

# As the whole process is performed pairwise, first two classes are selected (some instances are
# saved to use later as test)

handshake &lt;- AR.data$handshake[1:15]
ignore &lt;- AR.data$ignore[1:15]

# Now, the dbcsp object can be created, where q represents the number of vectors used in
# the projection, the obtained filter will have 2*q dimension.

# By default, euclidean distance is used. To change it, just select another distance type.
# A mixture with euclidean distance and another one can be performed too, changing the mixture
# parameter value.

# mydbcsp &lt;- new('dbcsp', handshake, ignore, type="minkowski", p=0.2)

# A user-defined custom distance can be used too.

fn &lt;- function(x, y) mean(1 - cos(x - y))
mydbcsp &lt;- new("dbcsp", X1 = handshake, X2 = ignore, type="fn")

# Regarding the classification, train, predict and selectQ functions can be used.
# An LDA model can be train with the features extracted after performing the CSP, both with the
# train function or using the training=TRUE parameter when creating the dbcsp object

mydbcsp &lt;- new('dbcsp', handshake, ignore, q=10, training=TRUE, fold = 1)

# Once the object is created, print and summary functions can be used to see some details

print(mydbcsp)
summary(mydbcsp)

# The predict function returns the predicted labels for the selected test data.
# And if true_labels are indicated, the obtained accuracy is also printed

handshake_test &lt;- AR.data$handshake[41:45]
ignore_test &lt;- AR.data$ignore[41:45]
test_data &lt;- c(handshake_test, ignore_test)
true_labels &lt;- c(rep('handshake',length(handshake_test)),rep('ignore',length(ignore_test)))
predictions &lt;- predict(mydbcsp, test_data,true_labels)

# To help us deciding which is the best dimension to use when performing the CSP algorithm, the
# selectQ function can be used. Instead of using train_size to validate with train/test split,
# cross validation can be performed too.

bestQ &lt;- selectQ(mydbcsp, Q=c(2,3,5), train_size=0.8)

# A plot can also be obtained, which displays the signals before and after the CSP projection
# With the vectors parameter it can be decided which dimensions to show and if we just want to
# plot the transformed signals, the before parameter must be set to FALSE

plot(mydbcsp,class=2,index=1,before=FALSE,vectors = 1:5, legend=TRUE)

# A boxplot can also be obtained to show the features achieved after the CSP (the variances of
# the transformed signals) which are used to perform the classification
# In the CSP algorithm the vectors work in pairs (the first q vectors maximize the variance of
# one class and minimize the variance of the other, while the last q vectors do the opposite),
# by default the vectors are showed in pairs, but this can be changed.
# The logarithm of the variances are plotted, but the value of the variances are shown
# when changing show_log parameter to FALSE

boxplot(mydbcsp, vectors=c(2,4,8))

</code></pre>

<hr>
<h2 id='AR.data'>Skeleton data for 6 different actions.</h2><span id='topic+AR.data'></span>

<h3>Description</h3>

<p>A dataset containing the skeleton data extracted from videos of people performing
six different actions, recorded by a humanoid robot. Each class has several instances with
50 values (25 XY body keypoints extracted using OpenPose <a href="https://github.com/CMU-Perceptual-Computing-Lab/openpose">https://github.com/CMU-Perceptual-Computing-Lab/openpose</a>)
per frame of the video (92 frames).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AR.data
</code></pre>


<h3>Format</h3>

<p>A list of 6 different actions:
</p>

<dl>
<dt>come</dt><dd><p>Gesture for telling the robot to come to you. 46 instances of [50x92] matrices.</p>
</dd>
<dt>five</dt><dd><p>Gesture of 'high five'. 45 instances of [50x92] matrices.</p>
</dd>
<dt>handshake</dt><dd><p>Gesture of handshaking with the robot. 45 instances of [50x92] matrices.</p>
</dd>
<dt>hello</dt><dd><p>Gesture for telling hello to the robot. 44 instances of [50x92] matrices.</p>
</dd>
<dt>ignore</dt><dd><p>Ignore the robot, pass by. 46 instances of [50x92] matrices.</p>
</dd>
<dt>look_at</dt><dd><p>Stare at the robot in front of it. 46 instances of [50x92] matrices.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>X1 &lt;- AR.data$come
X2 &lt;- AR.data$five
mydbcsp &lt;- new('dbcsp',X1,X2)
</code></pre>

<hr>
<h2 id='boxplot.dbcsp'>Boxplot for dbcsp object</h2><span id='topic+boxplot.dbcsp'></span>

<h3>Description</h3>

<p>This function plots the variance of the selected vectors in a boxplot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
boxplot(x, vectors=1, pairs=TRUE, ordered_pairs=TRUE, show_log=TRUE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="boxplot.dbcsp_+3A_x">x</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="boxplot.dbcsp_+3A_vectors">vectors</code></td>
<td>
<p>integer or array of integers, indicating the index of the projected vectors to plot, by default <code>vectors=1</code>.</p>
</td></tr>
<tr><td><code id="boxplot.dbcsp_+3A_pairs">pairs</code></td>
<td>
<p>logical, if TRUE the pairs of the indicated vectors are also shown, by default <code>pairs=TRUE</code>.</p>
</td></tr>
<tr><td><code id="boxplot.dbcsp_+3A_ordered_pairs">ordered_pairs</code></td>
<td>
<p>logical, if TRUE the pairs are plotted next to each other, else pairs are plotted at the end, by default <code>ordered_pairs=TRUE</code>.</p>
</td></tr>
<tr><td><code id="boxplot.dbcsp_+3A_show_log">show_log</code></td>
<td>
<p>logical, if TRUE the logarithms of the variances are displayed, else the variances are displayed, by default <code>show_log=TRUE</code>.</p>
</td></tr>
<tr><td><code id="boxplot.dbcsp_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A boxplot with the variances of the selected vectors.
Vectors values must lie between 1 and 2*q, being q the number of dimensions used to perform the DB-CSP
algorithm when creating the <code><a href="#topic+dbcsp-class">dbcsp</a></code> object. The following should be
taken into account when plotting:
</p>

<ul>
<li><p> The first q values (1,...,q) are indicated as a1...aq
</p>
</li>
<li><p> The last q values (q+1,...,2*q) are indicated as b1...bq.
</p>
</li></ul>

<p>If <code>pairs=TRUE</code>, it is recommended that <code>vectors&lt;q</code> for better understanding,
since their pairs are plotted as well. In case that <code>vectors&gt;q</code>, it should be noted
that the values are displayed from b1 to bq, where b1 and bq represent q+1 vector and 2*q vector,
respectively.
</p>
<p>For example if <code>q=15</code> and <code>boxplot(object, vectors=16, pairs=FALSE)</code>, b1 (16-q=1) vector is
shown.
</p>
<p>Among the selected boxplots, the largest whiskers are obtained and just the outliers within these whiskers are shown, the rest are not displayed.
With the outliers which are outside the whiskers it is not possible to get a good visualization.
</p>


<h3>Value</h3>

<p>Displays the boxplot of the variances of the selected vectors.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come
y &lt;- AR.data$five
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
boxplot(mydbcsp)
boxplot(mydbcsp,vectors=1:4,pairs=FALSE)
boxplot(mydbcsp, vectors=c(1,4,7),ordered_pairs=FALSE)
</code></pre>

<hr>
<h2 id='dbcsp-class'>S4 class for representing DB-CSP (Distance-Based Common Spatial Patterns)</h2><span id='topic+dbcsp-class'></span>

<h3>Description</h3>

<p>An object of class dbcsp. 'dbcsp' stands for Distance-Based Common Spatial Patterns.
The object includes the Common Spatial Patterns filter obtained with the input lists and
using the distance method indicated.
</p>


<h3>Details</h3>

<p>If the lists of matrices <code>X1</code> or <code>X2</code> contain NA values, these are automatically interpolated by a linear interpolation
using <code><a href="zoo.html#topic+na.approx">na.approx</a></code> function. These new interpolated matrices are saved in the X1 and X2 slots of the object.
</p>
<p>The supported distances for <code>type</code> are these ones:
</p>

<ul>
<li><p> Included in <code><a href="TSdist.html#topic+TSDatabaseDistances">TSdist</a></code>: infnorm, ccor, sts, lb.keogh, edr, erp, lcss, fourier, tquest, dissim, acf, pacf, ar.lpc.ceps, ar.mah,
ar.mah.statistic, ar.mah.pvalue, ar.pic, cdm, cid, cor, cort, int.per, per, mindist.sax, ncd, pred, spec.glk, spec.isd,
spec.llr, pdc, frechet, tam.
</p>
</li>
<li><p> Included in <code><a href="parallelDist.html#topic+parallelDist">parallelDist</a></code>: bhjattacharyya, bray, canberra, chord, divergence, dtw, euclidean, fJaccard, geodesic, hellinger,
kullback, mahalanobis, manhattan, maximum, minkowski, podani, soergel, wave, whittaker.
</p>
</li>
<li><p> It is possible to use a custom distance. The name of the custom distance function is passed as character to the <code>type</code> parameter.
In order to use the <code><a href="parallelDist.html#topic+parallelDist">parallelDist</a></code> custom distance option, the custom function must be defined as
explained in &quot;<code>Details: User-defined distance functions</code>&quot; part of <code><a href="parallelDist.html#topic+parallelDist">parallelDist</a></code> documentation.
See Examples section below.
</p>
</li></ul>

<p>The additional parameters for the selected distance (see <code><a href="TSdist.html#topic+TSDatabaseDistances">TSdist</a></code>, <code><a href="parallelDist.html#topic+parallelDist">parallelDist</a></code>) can be passed
as parameters when creating the object, which will be saved in <code>more</code> slot. See Examples section below.
</p>
<p>The output is a list containing this information (<code>object@out</code>):
</p>

<ul>
<li> <p><code>vectors</code> The projection vectors obtained after applying CSP.
</p>
</li>
<li> <p><code>eig</code> The eigenvalues obtained after applying CSP.
</p>
</li>
<li> <p><code>proy</code> The variance values of the projected signals obtained after applying CSP.
</p>
</li></ul>

<p>And if <code>training=TRUE</code> the following values are also saved:
</p>

<ul>
<li> <p><code>acc</code> The mean accuracy value obtained for training data applying cross validation.
</p>
</li>
<li> <p><code>used_folds</code> List of the folds used in the cross validation.
</p>
</li>
<li> <p><code>folds_acc</code> Accuracy values for each of the folds of the cross validation.
</p>
</li>
<li> <p><code>model</code> The trained LDA classifier.
</p>
</li>
<li> <p><code>selected_q</code> The number of vectors used when training.
</p>
</li></ul>



<h3>Slots</h3>


<dl>
<dt><code>X1</code></dt><dd><p>list of matrices for data class 1.</p>
</dd>
<dt><code>X2</code></dt><dd><p>list of matrices for data class 2.</p>
</dd>
<dt><code>q</code></dt><dd><p>integer value indicating the number of vectors used in the projection, by default <code>q=15</code>.</p>
</dd>
<dt><code>labels</code></dt><dd><p>vector of two strings indicating labels names, by default names of variables X1 and X2.</p>
</dd>
<dt><code>type</code></dt><dd><p>string which sets the type of distance to be considered, by default <code>type='EUCL'</code>. See details section.</p>
</dd>
<dt><code>w</code></dt><dd><p>weight for the distances mixture D_mixture = w*D_euclidean + (1-w)*D_type, by default <code>w=0.5</code>.</p>
</dd>
<dt><code>mixture</code></dt><dd><p>logical value indicating whether to use distances mixture or not (EUCL + other), by default <code>mixture=FALSE</code>.</p>
</dd>
<dt><code>training</code></dt><dd><p>logical value indicating whether to perform the training or not.</p>
</dd>
<dt><code>fold</code></dt><dd><p>integer value, by default <code>fold=10</code>. It controls the number of partitions when training.
If <code>fold==1</code> a train/test split is performed, with p=0.2 for test indices.</p>
</dd>
<dt><code>seed</code></dt><dd><p>numeric value, by default <code>seed=NULL</code>. Set a seed to ensure reproducible results.</p>
</dd>
<dt><code>eig.tol</code></dt><dd><p>numeric value, by default <code>eig.tol=1e-06</code>, tolerance to convert distance matrix to be definite positive.</p>
</dd>
<dt><code>verbose</code></dt><dd><p>logical</p>
</dd>
<dt><code>more</code></dt><dd><p>list, additional parameters to be passed to the distance methods. See details section.</p>
</dd>
<dt><code>out</code></dt><dd><p>list containing the output.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-package">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To create an instance of a class dbcsp given data from 2 classes
x &lt;- AR.data$come[1:20]
y &lt;- AR.data$five[1:20]
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)

# CUSTOM DISTANCE
x &lt;- AR.data$come[1:10]
y &lt;- AR.data$five[1:10]
fn &lt;- function(x, y, eps=1) mean(1 - cos(x - y))*eps
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y, type="fn", eps=0.9)

</code></pre>

<hr>
<h2 id='plot.dbcsp'>Plot function implemented by dbcsp class</h2><span id='topic+plot.dbcsp'></span>

<h3>Description</h3>

<p>This function plots an instance before and/or after its DB-CSP projection.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
plot(x, class = 1, index = 1, vectors = 1:(x@q*2), pairs=TRUE,
     before = TRUE, after = TRUE, legend = FALSE, getsignals = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.dbcsp_+3A_x">x</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_class">class</code></td>
<td>
<p>integer, which of both classes to access (1 or 2), by default <code>class=1</code></p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_index">index</code></td>
<td>
<p>an integer, representing which instance of the class to plot, by default <code>index=1</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_vectors">vectors</code></td>
<td>
<p>an integer or vector of integers, representing the vectors to plot after the projection, by default all the vectors used in the projection are plotted <code>vectors=1:(x@q*2)</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_pairs">pairs</code></td>
<td>
<p>logical, if TRUE the pairs of the indicated vectors are also shown, by default <code>pairs=TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_before">before</code></td>
<td>
<p>logical, if TRUE the original signals are plotted, by default <code>before=TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_after">after</code></td>
<td>
<p>logical, if TRUE the signals after projection are plotted, by default <code>after=TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_legend">legend</code></td>
<td>
<p>logical, if true the legend of the transformed signals is shown, by default <code>legend=FALSE</code>. When plotting more than 15 pairs of signals (15*2=30 signals), the legend is not shown. If <code>before=TRUE</code> legends are not displayed.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_getsignals">getsignals</code></td>
<td>
<p>logical, if TRUE the projected signals for the selected class, instance and vectors are returned, by default <code>getsignals=FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot.dbcsp_+3A_...">...</code></td>
<td>
<p>optional arguments inherited from the <code><a href="graphics.html#topic+matplot">matplot</a></code> method.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It plots an instance before and/or after being projected with the DB-CSP filter.
Vectors values must lie between 1 and 2*q, being q the number of dimensions used to perform the DB-CSP
algorithm when creating the <code><a href="#topic+dbcsp-class">dbcsp</a></code> object. The following should be
taken into account when plotting:
</p>

<ul>
<li><p> The first q values (1,...,q) are indicated as a1...aq, and are plotted with solid lines.
</p>
</li>
<li><p> The last q values (q+1,...,2*q) are indicated as b1...bq, and are plotted with dashed lines.
</p>
</li></ul>

<p>If <code>pairs=TRUE</code>, it is recommended that <code>vectors&lt;q</code> for better understanding,
since their pairs are plotted as well. In case that <code>vectors&gt;q</code>, it should be noted
that the values are displayed from b1 to bq, where b1 and bq represent q+1 vector and 2*q vector,
respectively. The paired vectors (a1-b1, a2-b2, ...) are plotted with the same color, but different line type.
</p>
<p>For example if <code>q=15</code> and <code>plot(object, vectors=16, pairs=FALSE)</code>, b1 (16-q=1) vector is
shown.
</p>
<p>The number of rows and columns of the layout (mfrow, mfcol) can not be modified, as the function select them
according to <code>before</code> and <code>after</code> parameters.
</p>


<h3>Value</h3>

<p>Displays a plot of the selected instance before and/or after the DB-CSP filter projection.
The vectors shown after the projection are differentiated by the q first and q last vectors,
since the former maximize the variance of one class and minimize the variance of the other, while the latter do the opposite.
If <code>getsignals=TRUE</code>, a matrix with the projected signals shown in the plot is returned.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come
y &lt;- AR.data$five
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
plot(mydbcsp)
plot(mydbcsp,class=2,index=30,vectors=1:5,before=FALSE, legend=TRUE)
pSignals &lt;- plot(mydbcsp,class=2,index=30,vectors=1:5,before=FALSE, legend=TRUE,getsignals=TRUE)
</code></pre>

<hr>
<h2 id='predict.dbcsp'>Predict function implemented by dbcsp class</h2><span id='topic+predict.dbcsp'></span>

<h3>Description</h3>

<p>This function returns the labels predicted for the input instances. If <code>true_targets</code> are passed as parameter,
the accuracy obtained is printed too.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
predict(object, X_test, true_targets=NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="predict.dbcsp_+3A_object">object</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="predict.dbcsp_+3A_x_test">X_test</code></td>
<td>
<p>list of matrices for test data.</p>
</td></tr>
<tr><td><code id="predict.dbcsp_+3A_true_targets">true_targets</code></td>
<td>
<p>vector of true labels of the instances. Note that they must match the names of the labels used when training the model.</p>
</td></tr>
<tr><td><code id="predict.dbcsp_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It gives the predictions for the test data using the model saved in the object, which has been previously trained with
the <code><a href="#topic+train.dbcsp">train.dbcsp</a></code> function. If the <code>true_targets</code> are indicated, the confusion matrix and obtained accuracy value are
returned too.
</p>


<h3>Value</h3>

<p>The values returned by the LDA <code><a href="MASS.html#topic+predict.lda">predict</a></code> function, a list with these components:
</p>

<ul>
<li> <p><code>class</code> The MAP classification (a factor)
</p>
</li>
<li> <p><code>posterior</code> Posterior probabilities for the classes
</p>
</li>
<li> <p><code>x</code> The scores of test cases on up to dimen discriminant variables
</p>
</li></ul>

<p>If the <code>true_targets</code> are indicated, two more items are added to the output list:
</p>

<ul>
<li> <p><code>confusion_matrix</code> The confusion matrix obtained with predicted labels and true labels.
</p>
</li>
<li> <p><code>acc</code> The accuracy value obtained for the test instances.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come[1:20]
y &lt;- AR.data$five[1:20]
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
mydbcsp &lt;- train(mydbcsp,fold=3)
test_data &lt;- c(AR.data$come[20:24], AR.data$five[20:24])
test_labels &lt;- c(rep('x',5),rep('y',5))
predictions &lt;- predict(mydbcsp,test_data,test_labels)
# Predicted classes
print(predictions$class)
# Confusion matrix
print(predictions$confusion_matrix)
# Accuracy
print(predictions$acc)
</code></pre>

<hr>
<h2 id='print.dbcsp'>Print function implemented by dbcsp class</h2><span id='topic+print.dbcsp'></span>

<h3>Description</h3>

<p>This function prints information about <code><a href="#topic+dbcsp-class">dbcsp</a></code> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.dbcsp_+3A_x">x</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="print.dbcsp_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It provides information about the object and the class.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come[1:30]
y &lt;- AR.data$five[1:30]
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
print(mydbcsp)
</code></pre>

<hr>
<h2 id='selectQ'>Select Q best dimension</h2><span id='topic+selectQ'></span><span id='topic+selectQ+2Cdbcsp-method'></span>

<h3>Description</h3>

<p>This function applies DB-CSP and classification with different dimensions to see which gets the best outcomes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>selectQ(
  object,
  Q = c(1, 2, 3, 5, 10, 15),
  train_size = 0.75,
  CV = FALSE,
  folds = 10,
  seed = NULL
)

## S4 method for signature 'dbcsp'
selectQ(
  object,
  Q = c(1, 2, 3, 5, 10, 15),
  train_size = 0.75,
  CV = FALSE,
  folds = 10,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectQ_+3A_object">object</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="selectQ_+3A_q">Q</code></td>
<td>
<p>list of integers which represents the dimensions to use, by default <code>Q=c(1,2,3,5,10,15)</code>.</p>
</td></tr>
<tr><td><code id="selectQ_+3A_train_size">train_size</code></td>
<td>
<p>float between 0.0 and 1.0 representing the proportion of the dataset to include in the train split, by default <code>train_size=0.75</code>.</p>
</td></tr>
<tr><td><code id="selectQ_+3A_cv">CV</code></td>
<td>
<p>logical indicating if a cross validation must be performed or not (if TRUE, train_size is not used), by default <code>CV=FALSE</code>.</p>
</td></tr>
<tr><td><code id="selectQ_+3A_folds">folds</code></td>
<td>
<p>integer, number of folds to use if CV is performed.</p>
</td></tr>
<tr><td><code id="selectQ_+3A_seed">seed</code></td>
<td>
<p>numeric value, by default <code>seed=NULL</code>. Set a seed to ensure reproducible results.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> including the dimensions and their corresponding accuracy values.
If <code>CV=TRUE</code>, for each dimension, the standard deviation of the accuracy values of the folds is also included in the data frame.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come
y &lt;- AR.data$five
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
result &lt;- selectQ(mydbcsp)
print(result)
</code></pre>

<hr>
<h2 id='summary.dbcsp'>Summary function implemented by dbcsp class</h2><span id='topic+summary.dbcsp'></span>

<h3>Description</h3>

<p>This function provides a summary of the dbcsp object and information about the performed process.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary.dbcsp_+3A_object">object</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="summary.dbcsp_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It prints the following information:
</p>

<ul>
<li><p> Length and shape of the list of matrices of each class.
</p>
</li>
<li><p> The number of vectors (dimensions) used in the CSP projection.
</p>
</li>
<li><p> Distance used when performing the Common Spatial Patterns algorithm.
</p>
</li>
<li><p> If the training process has already been performed, the obtained training accuracy value.
</p>
</li></ul>



<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+train.dbcsp">train</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come[1:30]
y &lt;- AR.data$five[1:30]
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
summary(mydbcsp)
</code></pre>

<hr>
<h2 id='train.dbcsp'>Training process of a dbcsp object, using LDA classifier.</h2><span id='topic+train.dbcsp'></span>

<h3>Description</h3>

<p>This function applies DB-CSP to the instances and perform the training of a Linear Discriminant
Analysis (LDA) classifier using the object data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'dbcsp'
train(x, selected_q=x@q, fold=x@fold, seed=x@seed, verbose=TRUE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="train.dbcsp_+3A_x">x</code></td>
<td>
<p>object of class <code><a href="#topic+dbcsp-class">dbcsp</a></code>.</p>
</td></tr>
<tr><td><code id="train.dbcsp_+3A_selected_q">selected_q</code></td>
<td>
<p>integer value indicating the number of vectors to use when training the model, by default <code>selected_q=x@q</code>.</p>
</td></tr>
<tr><td><code id="train.dbcsp_+3A_fold">fold</code></td>
<td>
<p>integer value, by default <code>fold=x@fold</code>. It controls the number of partitions. If <code>fold==1</code> a train/test
split is performed, with p=0.2 for test indices.</p>
</td></tr>
<tr><td><code id="train.dbcsp_+3A_seed">seed</code></td>
<td>
<p>numeric value, by default <code>fold=x@seed</code>. Set a seed to ensure reproducible results.</p>
</td></tr>
<tr><td><code id="train.dbcsp_+3A_verbose">verbose</code></td>
<td>
<p>logical</p>
</td></tr>
<tr><td><code id="train.dbcsp_+3A_...">...</code></td>
<td>
<p>not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code><a href="#topic+dbcsp-class">dbcsp</a></code> object with the training results saved as list in <code>x@out</code>:
</p>

<ul>
<li> <p><code>vectors</code> The projection vectors obtained after applying CSP.
</p>
</li>
<li> <p><code>eig</code> The eigenvalues obtained after applying CSP.
</p>
</li>
<li> <p><code>proy</code> The variance values of the projected signals obtained after applying CSP.
</p>
</li>
<li> <p><code>acc</code> The mean accuracy value obtained for training data applying cross validation.
</p>
</li>
<li> <p><code>used_folds</code> List of the folds used in the cross validation.
</p>
</li>
<li> <p><code>folds_acc</code> Accuracy values for each of the folds of the cross validation.
</p>
</li>
<li> <p><code>model</code> The trained LDA classifier.
</p>
</li>
<li> <p><code>selected_q</code> The number of vectors used when training.
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+dbcsp-class">dbcsp</a></code>, <code><a href="#topic+print.dbcsp">print</a></code>, <code><a href="#topic+summary.dbcsp">summary</a></code>, <code><a href="#topic+selectQ">selectQ</a></code>, <code><a href="#topic+predict.dbcsp">predict</a></code>, <code><a href="#topic+plot.dbcsp">plot</a></code>, <code><a href="#topic+boxplot.dbcsp">boxplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read data from 2 classes
x &lt;- AR.data$come[1:20]
y &lt;- AR.data$five[1:20]
mydbcsp &lt;- new("dbcsp", X1 = x, X2 = y)
mydbcsp &lt;- train(mydbcsp,fold=3)
print(mydbcsp@out$acc)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
