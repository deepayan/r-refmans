<!DOCTYPE html><html lang="en"><head><title>Help for package nbc4va</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {nbc4va}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#csmf.nbc'><p>Calculate predicted CSMFs from a NBC model</p></a></li>
<li><a href='#internalCheckNBC'><p>Check arguments for nbc()</p></a></li>
<li><a href='#internalCheckNBCSummary'><p>Check arguments for summary.nbc()</p></a></li>
<li><a href='#internalGetCauseMetrics'><p>Calculate performance metrics table per cause</p></a></li>
<li><a href='#internalGetCSMFAcc'><p>Calculate CSMF accuracy</p></a></li>
<li><a href='#internalGetCSMFMaxError'><p>Calculate CSMF maximum error</p></a></li>
<li><a href='#internalGetMetrics'><p>Calculate overall performance metrics</p></a></li>
<li><a href='#internalNBC'><p>NBC algorithm source code</p></a></li>
<li><a href='#internalRoundFixedSum'><p>Round values to whole numbers while preserving the sum</p></a></li>
<li><a href='#internalSubAsRest'><p>Substitute values in a dataframe proportionally to all other values</p></a></li>
<li><a href='#nbc'><p>Train a NBC model</p></a></li>
<li><a href='#nbc4va'><p>nbc4va: Bayes Classifier for Verbal Autopsy Data</p></a></li>
<li><a href='#nbc4vaData'><p>Example of clean data in nbc4va</p></a></li>
<li><a href='#nbc4vaDataRaw'><p>Example of unclean data in nbc4va</p></a></li>
<li><a href='#nbc4vaGUI'><p>Web-based graphical user interface in nbc4va</p></a></li>
<li><a href='#nbc4vaIO'><p>Run nbc4va using file input and output</p></a></li>
<li><a href='#ova2nbc'><p>Translate open verbal autopsy arguments to train a NBC model</p></a></li>
<li><a href='#plot.nbc'><p>Bar plot of top predicted causes from a NBC model</p></a></li>
<li><a href='#print.nbc_summary'><p>Print top predicted causes from a NBC model</p></a></li>
<li><a href='#summary.nbc'><p>Summarize a NBC model with metrics</p></a></li>
<li><a href='#topCOD.nbc'><p>Cause of death predictions from a NBC model</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bayes Classifier for Verbal Autopsy Data</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-04-25</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Richard Wen &lt;rrwen.dev@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the Naive Bayes Classifier (NBC) algorithm
    used for Verbal Autopsy (VA) built on code from Miasnikof et al (2015) 
    &lt;<a href="https://doi.org/10.1186%2Fs12916-015-0521-2">doi:10.1186/s12916-015-0521-2</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics, methods, utils, shiny</td>
</tr>
<tr>
<td>Suggests:</td>
<td>bookdown, knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>Enhances:</td>
<td>openVA</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>Collate:</td>
<td>'nbc4va.R' 'nbc4va_data.R' 'nbc4va_validation.R'
'nbc4va_internal.R' 'nbc4va_main.R' 'nbc4va_extra.R'
'nbc4va_utility.R' 'nbc4va_wrapper.R'</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-09 12:05:12 UTC; rrwen</td>
</tr>
<tr>
<td>Author:</td>
<td>Richard Wen [aut, cre],
  Pierre Miasnikof [ctb],
  Vasily Giannakeas [ctb],
  Mireille Gomes [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-10 10:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='csmf.nbc'>Calculate predicted CSMFs from a NBC model</h2><span id='topic+csmf.nbc'></span>

<h3>Description</h3>

<p>Obtains the predicted Cause Specific Mortality Fraction (CSMF) from a result <code><a href="#topic+nbc">nbc</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>csmf.nbc(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="csmf.nbc_+3A_object">object</code></td>
<td>
<p>The result <code><a href="#topic+nbc">nbc</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>out A numeric vector of the predicted CSMFs in which the names are the corresponding causes.
</p>


<h3>See Also</h3>

<p>Other wrapper functions: 
<code><a href="#topic+topCOD.nbc">topCOD.nbc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Obtain the predicted CSMFs
predCSMF &lt;- csmf.nbc(results)

</code></pre>

<hr>
<h2 id='internalCheckNBC'>Check arguments for nbc()</h2><span id='topic+internalCheckNBC'></span>

<h3>Description</h3>

<p>Performs checks to ensure that the arguments passed to <code><a href="#topic+internalNBC">internalNBC</a></code> are correct.
This function will also auto-clean when appropriate, and display
warning messages of the cleaning tasks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalCheckNBC(train, test, known = TRUE, assume = FALSE, unknown = 99)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalCheckNBC_+3A_train">train</code></td>
<td>
<p>Dataframe of verbal autopsy train data (See <a href="https://rrwen.github.io/nbc4va/data">Data documentation</a>).
</p>

<ul>
<li><p> Columns (in order): ID, Cause, Symptom-1 to Symptom-n..
</p>
</li>
<li><p> ID (vectorof char): unique case identifiers
</p>
</li>
<li><p> Cause (vectorof char): observed causes for each case
</p>
</li>
<li><p> Symptom-n.. (vectorsof (1 OR 0)): 1 for presence, 0 for absence, other values are treated as unknown
</p>
</li>
<li><p> Unknown symptoms are imputed randomly from distributions of 1s and 0s per symptom column; if no 1s or 0s exist then the column is removed
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
  ID </td><td style="text-align: center;"> Cause </td><td style="text-align: center;"> S1 </td><td style="text-align: center;"> S2 </td><td style="text-align: center;"> S3 </td>
</tr>
<tr>
 <td style="text-align: center;">
  "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0</td>
</tr>
<tr>
 <td style="text-align: center;">
  "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
  "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="internalCheckNBC_+3A_test">test</code></td>
<td>
<p>Dataframe of verbal autopsy test data in the same format as <em>train</em> except if causes are not known:
</p>

<ul>
<li><p> The 2nd column (Cause) can be omitted if <em>known</em> is FALSE
</p>
</li></ul>
</td></tr>
<tr><td><code id="internalCheckNBC_+3A_known">known</code></td>
<td>
<p>TRUE to indicate that the <em>test</em> causes are available in the 2nd column and FALSE to indicate that they are not known</p>
</td></tr>
<tr><td><code id="internalCheckNBC_+3A_assume">assume</code></td>
<td>
<p>TRUE to set all symptoms not equal to 1 as 0 and FALSE to raise error if symptoms are not 0 or 1. This takes priority over <em>unknown</em>.</p>
</td></tr>
<tr><td><code id="internalCheckNBC_+3A_unknown">unknown</code></td>
<td>
<p>A single integer value which determines if a symptom is unknown as to if is present or absent.
</p>

<ul>
<li><p> The unknown values are substituted according to the proportion of the 1s and 0s per column
</p>
</li>
<li><p> Setting this to NULL will ignore this substitution
</p>
</li>
<li><p> All other values that are not the unknown value or 1 will be set to 0 after the substition
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>The following checks are applied to <em>train</em> and <em>test</em> to ensure they:
</p>

<ul>
<li><p> are a dataframe
</p>
</li>
<li><p> have required number of rows and columns
</p>
</li>
<li><p> have required data types for each column
</p>
</li>
<li><p> have required symptom values
</p>
</li>
<li><p> are in the same format
</p>
</li>
<li><p> have unique ids
</p>
</li></ul>



<h3>Value</h3>

<p>out A list object containing the checked inputs:
</p>

<ul>
<li><p> $train: dataframe of id, cause and symptoms
</p>
</li>
<li><p> $test: dataframe of id, cause and symptoms in the same format as <em>train</em>
</p>
</li>
<li><p> $known: TRUE if the <em>test</em> causes are known or FALSE if not
</p>
</li></ul>



<h3>See Also</h3>

<p>Other validation functions: 
<code><a href="#topic+internalCheckNBCSummary">internalCheckNBCSummary</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Check train and test inputs, error if it does not pass check
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
checked &lt;- nbc4va::internalCheckNBC(train, test)
train &lt;- checked$train
test &lt;- checked$test

</code></pre>

<hr>
<h2 id='internalCheckNBCSummary'>Check arguments for summary.nbc()</h2><span id='topic+internalCheckNBCSummary'></span>

<h3>Description</h3>

<p>Performs checks to ensure that the arguments passed to <code><a href="#topic+summary.nbc">summary.nbc</a></code> are correct.
This function will perform automatic data type conversions, and display warnings when appropriate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalCheckNBCSummary(object, top = 5, id = NULL, csmfa.obs = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalCheckNBCSummary_+3A_object">object</code></td>
<td>
<p>The result <code><a href="#topic+nbc">nbc</a></code> object.</p>
</td></tr>
<tr><td><code id="internalCheckNBCSummary_+3A_top">top</code></td>
<td>
<p>A number that produces top causes depending on <em>id</em>:
</p>

<ul>
<li><p> If (<em>id</em> is char): provide the <em>top</em> causes of the case by probability
</p>
</li>
<li><p> If (<em>id</em> is NULL): provide the <em>top</em> causes by predicted Cause Specific Mortality Fractions (CSMF)
</p>
</li></ul>
</td></tr>
<tr><td><code id="internalCheckNBCSummary_+3A_id">id</code></td>
<td>
<p>A character representing a case id in the test data.</p>
</td></tr>
<tr><td><code id="internalCheckNBCSummary_+3A_csmfa.obs">csmfa.obs</code></td>
<td>
<p>A character vector of the true causes for calculating the CSMF accuracy.</p>
</td></tr>
<tr><td><code id="internalCheckNBCSummary_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed if applicable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following checks are applied:
</p>

<ul>
<li> <p><em>object</em> is of class &quot;nbc&quot;
</p>
</li>
<li> <p><em>top</em> is a numeric value of length 1
</p>
</li>
<li> <p><em>id</em> is NULL or a character of length 1, and exists in the test data
</p>
</li>
<li> <p><em>csmfa.obs</em> is NULL or a character or vector of characters
</p>
</li></ul>



<h3>Value</h3>

<p>out A list object containing the checked inputs:
</p>

<ul>
<li><p> $object: an <code><a href="#topic+nbc">nbc</a></code> object
</p>
</li>
<li><p> $top: numeric value
</p>
</li>
<li><p> $id: NULL or character value
</p>
</li>
<li><p> $csmfa.obs: NULL or character vector
</p>
</li></ul>



<h3>See Also</h3>

<p>Other validation functions: 
<code><a href="#topic+internalCheckNBC">internalCheckNBC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Create an nbc
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Check the inputs before passing on to summary
checked &lt;- nbc4va::internalCheckNBCSummary(results, 5, "g85")
results &lt;- checked$object
top &lt;- checked$top
id &lt;- checked$id
csmfa.obs &lt;- checked$csmfa.obs

</code></pre>

<hr>
<h2 id='internalGetCauseMetrics'>Calculate performance metrics table per cause</h2><span id='topic+internalGetCauseMetrics'></span>

<h3>Description</h3>

<p>A table providing performance metrics per unique cause based on input predicted and observed cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalGetCauseMetrics(pred, obs, causes = unique(c(pred, obs)))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalGetCauseMetrics_+3A_pred">pred</code></td>
<td>
<p>Chracter vector of predicted causes for each case.</p>
</td></tr>
<tr><td><code id="internalGetCauseMetrics_+3A_obs">obs</code></td>
<td>
<p>Character vector of observed causes for each case.</p>
</td></tr>
<tr><td><code id="internalGetCauseMetrics_+3A_causes">causes</code></td>
<td>
<p>Character vector of all possible causes including ones that are not in the <em>pred</em> or <em>obs</em>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This code is built on the original performance metrics code provided by Dr. Mireille Gomes.
</p>


<h3>Value</h3>

<p>out Dataframe of a performance metrics per cause (see <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a>):
</p>

<ul>
<li><p> Columns: Cause, TruePositives, TrueNegatives, FalsePositives, FalseNegatives, PredictedFrequency, ObservedFrequency, Sensitivity, CSMFpredicted, CSMFobserved
</p>
</li>
<li><p> Cause (vectorof char): The unique causes from both the <em>obs</em> and <em>pred</em> inputs
</p>
</li>
<li><p> Sensitivity (vectorof double): the sensitivity for a cause
</p>
</li>
<li><p> CSMFpredicted (vectorof double): the cause specific mortality fraction for a cause given the predicted deaths
</p>
</li>
<li><p> CSMFobserved (vectorof double): the cause specific mortality fraction for a cause given the observed deaths
</p>
</li>
<li><p> TruePositives (vectorof double): The total number of true positives per cause
</p>
</li>
<li><p> TrueNegatives (vectorof double): The total number of true negatives per cause
</p>
</li>
<li><p> FalsePositives (vectorof double): The total number of false positives per cause
</p>
</li>
<li><p> FalseNegatives (vectorof double): The total number of false negatives per cause
</p>
</li>
<li><p> PredictedFrequency (vectorof double): The occurence of a cause in the <em>pred</em> input
</p>
</li>
<li><p> ObservedFrequency (vectorof double): The occurence of a cause in the <em>obs</em> input
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
  Cause </td><td style="text-align: center;"> Sensitivity </td><td style="text-align: center;"> Metric-n.. </td>
</tr>
<tr>
 <td style="text-align: center;">
  HIV </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> #.. </td>
</tr>
<tr>
 <td style="text-align: center;">
  Stroke </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> #..
</td>
</tr>

</table>



<h3>See Also</h3>

<p>Other internal functions: 
<code><a href="#topic+internalGetCSMFAcc">internalGetCSMFAcc</a>()</code>,
<code><a href="#topic+internalGetCSMFMaxError">internalGetCSMFMaxError</a>()</code>,
<code><a href="#topic+internalGetMetrics">internalGetMetrics</a>()</code>,
<code><a href="#topic+internalNBC">internalNBC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
pred &lt;- c("HIV", "Stroke", "HIV", "Stroke")
obs &lt;- c("HIV", "HIV", "Stroke", "Stroke")
cmetrics &lt;- nbc4va::internalGetCauseMetrics(pred, obs)

</code></pre>

<hr>
<h2 id='internalGetCSMFAcc'>Calculate CSMF accuracy</h2><span id='topic+internalGetCSMFAcc'></span>

<h3>Description</h3>

<p>Calculates the overall CSMF accuracy given any number of predicted
cases and any number of observed cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalGetCSMFAcc(pred, obs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalGetCSMFAcc_+3A_pred">pred</code></td>
<td>
<p>Chracter vector of predicted causes for each case.</p>
</td></tr>
<tr><td><code id="internalGetCSMFAcc_+3A_obs">obs</code></td>
<td>
<p>Character vector of observed causes for each case.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>csmfa Numeric value of the overall CSMF accuracy (see <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a>).
</p>


<h3>See Also</h3>

<p>Other internal functions: 
<code><a href="#topic+internalGetCSMFMaxError">internalGetCSMFMaxError</a>()</code>,
<code><a href="#topic+internalGetCauseMetrics">internalGetCauseMetrics</a>()</code>,
<code><a href="#topic+internalGetMetrics">internalGetMetrics</a>()</code>,
<code><a href="#topic+internalNBC">internalNBC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
pred &lt;- c("HIV", "Stroke", "HIV", "Stroke")
obs &lt;- c("HIV", "HIV", "Stroke", "Stroke")
csmfa &lt;- nbc4va::internalGetCSMFAcc(pred, obs)

</code></pre>

<hr>
<h2 id='internalGetCSMFMaxError'>Calculate CSMF maximum error</h2><span id='topic+internalGetCSMFMaxError'></span>

<h3>Description</h3>

<p>Calculates the CSMF maximum error given a set of observed cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalGetCSMFMaxError(obs)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalGetCSMFMaxError_+3A_obs">obs</code></td>
<td>
<p>Character vector of observed causes for each case.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>csmfMaxError Numeric value of the CSMF maximum error (see <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a>).
</p>


<h3>See Also</h3>

<p>Other internal functions: 
<code><a href="#topic+internalGetCSMFAcc">internalGetCSMFAcc</a>()</code>,
<code><a href="#topic+internalGetCauseMetrics">internalGetCauseMetrics</a>()</code>,
<code><a href="#topic+internalGetMetrics">internalGetMetrics</a>()</code>,
<code><a href="#topic+internalNBC">internalNBC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
obs &lt;- c("HIV", "HIV", "Stroke", "Stroke")
maxerror &lt;- nbc4va::internalGetCSMFMaxError(obs)

</code></pre>

<hr>
<h2 id='internalGetMetrics'>Calculate overall performance metrics</h2><span id='topic+internalGetMetrics'></span>

<h3>Description</h3>

<p>A vector providing overall performance metrics based on input predicted and observed cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalGetMetrics(
  pred,
  obs,
  causes = unique(c(pred, obs)),
  csmfa.obs = NULL,
  causeMetrics = internalGetCauseMetrics(pred, obs, causes)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalGetMetrics_+3A_pred">pred</code></td>
<td>
<p>Chracter vector of predicted causes for each case.</p>
</td></tr>
<tr><td><code id="internalGetMetrics_+3A_obs">obs</code></td>
<td>
<p>Character vector of observed causes for each case.</p>
</td></tr>
<tr><td><code id="internalGetMetrics_+3A_causes">causes</code></td>
<td>
<p>Character vector of all possible causes including ones that are not in the <em>pred</em> or <em>obs</em>.</p>
</td></tr>
<tr><td><code id="internalGetMetrics_+3A_csmfa.obs">csmfa.obs</code></td>
<td>
<p>A character vector of the true causes for calculating the CSMF accuracy.</p>
</td></tr>
<tr><td><code id="internalGetMetrics_+3A_causemetrics">causeMetrics</code></td>
<td>
<p>Dataframe of a performance metrics per cause (see <code><a href="#topic+internalGetCauseMetrics">internalGetCauseMetrics</a></code>):
</p>

<ul>
<li><p> Columns: Cause, TruePositives, TrueNegatives, FalsePositives, FalseNegatives, PredictedFrequency, ObservedFrequency, Sensitivity, CSMFpredicted, CSMFobserved
</p>
</li>
<li><p> Cause (vectorof char): The unique causes from both the <em>obs</em> and <em>pred</em> inputs
</p>
</li>
<li><p> TruePositives (vectorof double): The total number of true positives per cause
</p>
</li>
<li><p> TrueNegatives (vectorof double): The total number of true negatives per cause
</p>
</li>
<li><p> FalsePositives (vectorof double): The total number of false positives per cause
</p>
</li>
<li><p> FalseNegatives (vectorof double): The total number of false negatives per cause
</p>
</li>
<li><p> PredictedFrequency (vectorof double): The occurence of a cause in the <em>pred</em> input
</p>
</li>
<li><p> ObservedFrequency (vectorof double): The occurence of a cause in the <em>obs</em> input
</p>
</li>
<li><p> Sensitivity (vectorof double): the sensitivity for a cause
</p>
</li>
<li><p> CSMFpredicted (vectorof double): the cause specific mortality fraction for a cause given the predicted deaths
</p>
</li>
<li><p> CSMFobserved (vectorof double): the cause specific mortality fraction for a cause given the observed deaths
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Developer Note: Depends on the <code><a href="#topic+internalGetCSMFAcc">internalGetCSMFAcc</a></code> function to get the CSMF Accuracy.
</p>


<h3>Value</h3>

<p>metrics Named numeric vector of performance metrics (see <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a>):
</p>

<ul>
<li><p> Names: TruePositives, TrueNegatives, FalsePositives, FalseNegatives, Accuracy, Sensitivity, Specificity, PCCC, CSMFMaxError, CSMFaccuracy
</p>
</li>
<li><p> TruePositives (double): total number of true positives
</p>
</li>
<li><p> TrueNegatives (double): total number of true negatives
</p>
</li>
<li><p> FalsePositives (double): total number of false positives
</p>
</li>
<li><p> FalseNegatives (double): total number of false negatives
</p>
</li>
<li><p> Sensitivity (double): the overall sensitivity
</p>
</li>
<li><p> PCCC (double): the partial chance corrected concordance
</p>
</li>
<li><p> CSMFMaxError (double): the maximum Cause Specific Mortality Fraction Error
</p>
</li>
<li><p> CSMFaccuracy (double): the Cause Specific Mortaliy Fraction accuracy
</p>
</li></ul>



<h3>See Also</h3>

<p>Other internal functions: 
<code><a href="#topic+internalGetCSMFAcc">internalGetCSMFAcc</a>()</code>,
<code><a href="#topic+internalGetCSMFMaxError">internalGetCSMFMaxError</a>()</code>,
<code><a href="#topic+internalGetCauseMetrics">internalGetCauseMetrics</a>()</code>,
<code><a href="#topic+internalNBC">internalNBC</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
pred &lt;- c("HIV", "Stroke", "HIV", "Stroke")
obs &lt;- c("HIV", "HIV", "Stroke", "Stroke")
metrics &lt;- nbc4va::internalGetMetrics(pred, obs)

</code></pre>

<hr>
<h2 id='internalNBC'>NBC algorithm source code</h2><span id='topic+internalNBC'></span>

<h3>Description</h3>

<p>Performs Naive Bayes Classification given train and test (validation) datasets, as well as
additional information for the train and test data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalNBC(train, test, known = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalNBC_+3A_train">train</code></td>
<td>
<p>Dataframe of verbal autopsy train data (See <a href="https://rrwen.github.io/nbc4va/data">Data documentation</a>).
</p>

<ul>
<li><p> Columns (in order): ID, Cause, Symptom-1 to Symptom-n..
</p>
</li>
<li><p> ID (vectorof char): unique case identifiers
</p>
</li>
<li><p> Cause (vectorof char): observed causes for each case
</p>
</li>
<li><p> Symptom-n.. (vectorsof (1 OR 0)): 1 for presence, 0 for absence, other values are treated as unknown
</p>
</li>
<li><p> Unknown symptoms are imputed randomly from distributions of 1s and 0s per symptom column; if no 1s or 0s exist then the column is removed
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
  ID </td><td style="text-align: center;"> Cause </td><td style="text-align: center;"> S1 </td><td style="text-align: center;"> S2 </td><td style="text-align: center;"> S3 </td>
</tr>
<tr>
 <td style="text-align: center;">
  "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0</td>
</tr>
<tr>
 <td style="text-align: center;">
  "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
  "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="internalNBC_+3A_test">test</code></td>
<td>
<p>Dataframe of verbal autopsy test data in the same format as <em>train</em> except if causes are not known:
</p>

<ul>
<li><p> The 2nd column (Cause) can be omitted if <em>known</em> is FALSE
</p>
</li></ul>
</td></tr>
<tr><td><code id="internalNBC_+3A_known">known</code></td>
<td>
<p>TRUE to indicate that the <em>test</em> causes are available in the 2nd column and FALSE to indicate that they are not known</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function was built on code provided by <a href="https://bmcmedicine.biomedcentral.com/articles/10.1186/s12916-015-0521-2">Miasnikof <em>et al</em> (2015)</a>.
Edits to the code included the following improvements:
</p>

<ul>
<li><p> Causes can be character type
</p>
</li>
<li><p> Matrix operations for speed
</p>
</li>
<li><p> Removal of order dependence for causes
</p>
</li>
<li><p> Refactoring of variable names for clarity
</p>
</li>
<li><p> Included list structure of model data and details
</p>
</li>
<li><p> Argument validation
</p>
</li></ul>



<h3>Value</h3>

<p>out The result list object containing:
</p>

<ul>
<li><p> $prob.causes (vectorof double): the probabilities for each test case prediction by case id
</p>
</li>
<li><p> $pred.causes (vectorof char): the predictions for each <em>test</em> case by case id
</p>
</li>
<li><p> Additional values:
</p>

<ul>
<li><p> * indicates that the value is only available if <em>test</em> causes are known
</p>
</li>
<li><p> $train (dataframe): the input <em>train</em> data
</p>
</li>
<li><p> $train.ids (vectorof char): the ids of the <em>train</em> data
</p>
</li>
<li><p> $train.causes (vectorof char): the causes of the <em>train</em> data by case id
</p>
</li>
<li><p> $train.samples (double): the number of input <em>train</em> samples
</p>
</li>
<li><p> $test (dataframe): the input <em>test</em> data
</p>
</li>
<li><p> $test.ids (vectorof char): the ids of the <em>test</em> data
</p>
</li>
<li><p> $test.causes* (vectorof char): the causes of the <em>test</em> data by case id
</p>
</li>
<li><p> $test.samples (double): the number of input <em>test</em> samples
</p>
</li>
<li><p> $test.known (logical): whether the <em>test</em> causes are known
</p>
</li>
<li><p> $symptoms (vectorof char): all unique symptoms in order
</p>
</li>
<li><p> $causes (vectorof char): all possible unique causes of death
</p>
</li>
<li><p> $causes.train (vectorof char): all unique causes of death in the <em>train</em> data
</p>
</li>
<li><p> $causes.test* (vectorof char): all unique causes of death in the <em>test</em> data
</p>
</li>
<li><p> $causes.pred (vectorof char): all unique causes of death in the predicted cases
</p>
</li>
<li><p> $causes.obs* (vectorof char): all unique causes of death in the observed cases
</p>
</li>
<li><p> $pred (dataframe): a table of predictions for each <em>test</em> case, sorted by probability
</p>

<ul>
<li><p> Columns (in order): CaseID, TrueCause, Prediction-1 to Prediction-n..
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> TrueCause* (vectorof char): the observed causes of death
</p>
</li>
<li><p> Prediction-n.. (vectorsof char): the predicted causes of death,
where Prediction1 is the most probable cause, and Prediction-n is the least probable cause
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> Prediction1 </td><td style="text-align: center;"> Prediction2 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Stroke" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> "HIV" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Stroke"
    </td>
</tr>

</table>

</li>
<li><p> $obs* (dataframe): a table of observed causes matching <em>$pred</em> for each <em>test</em> case
</p>

<ul>
<li><p> Columns (in order): CaseID, TrueCause
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> TrueCause (vectorof char): the actual cause of death if applicable
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> TrueCause </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> "HIV" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> "Stroke" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> "HIV"
    </td>
</tr>

</table>

</li>
<li><p> $obs.causes* (vectorof char): all observed causes of death by case id
</p>
</li>
<li><p> $prob (dataframe): a table of probabilities of each cause for each test case
</p>

<ul>
<li><p> Columns (in order): CaseID, Cause-1 to Cause-n..
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> Cause-n.. (vectorsof double): probabilies for each cause of death
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> HIV </td><td style="text-align: center;"> Stroke </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> 0.5 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> 0.3 </td><td style="text-align: center;"> 0.7 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> 0.9 </td><td style="text-align: center;"> 0.1
    </td>
</tr>

</table>

</li></ul>

</li></ul>



<h3>Author(s)</h3>

<p>Pierre Miasnikof (Original), Vasily Giannakeas (Original), Richard Wen (Edits) &lt;<a href="mailto:wenr@smh.ca">wenr@smh.ca</a>&gt;
</p>


<h3>References</h3>


<ul>
<li><p> Miasnikof P, Giannakeas V, Gomes M, Aleksandrowicz L, Shestopaloff AY, Alam D, Tollman S, Samarikhalaj, Jha P. Naive Bayes classifiers for verbal autopsies: comparison to physician-based classification for 21,000 child and adult deaths. BMC Medicine. 2015;13:286. doi:10.1186/s12916-015-0521-2.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other internal functions: 
<code><a href="#topic+internalGetCSMFAcc">internalGetCSMFAcc</a>()</code>,
<code><a href="#topic+internalGetCSMFMaxError">internalGetCSMFMaxError</a>()</code>,
<code><a href="#topic+internalGetCauseMetrics">internalGetCauseMetrics</a>()</code>,
<code><a href="#topic+internalGetMetrics">internalGetMetrics</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Create naive bayes classifier on random train and test data
# Set "known" to indicate whether or not "test" causes are known
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc4va::internalNBC(train, test, known=TRUE)

# Obtain the probabilities and predictions
prob &lt;- results$prob.causes
pred &lt;- results$pred.causes

</code></pre>

<hr>
<h2 id='internalRoundFixedSum'>Round values to whole numbers while preserving the sum</h2><span id='topic+internalRoundFixedSum'></span>

<h3>Description</h3>

<p>Rounds a vector of values to whole numbers while preserving the sum (rounded if it is not a whole number) using the largest remainder method <a href="https://www.tcd.ie/Political_Science/people/michael_gallagher/ElectoralStudies1991.pdf">(Gallagher, 1991)</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>internalRoundFixedSum(v, roundSum = round)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalRoundFixedSum_+3A_v">v</code></td>
<td>
<p>A vector of values with decimal values and a whole number sum to round.</p>
</td></tr>
<tr><td><code id="internalRoundFixedSum_+3A_roundsum">roundSum</code></td>
<td>
<p>If the sum of the values in <em>v</em> is not a whole number, choose a rounding method to ensure it is a whole number.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>out A vector of <em>v</em> with the values rounded to whole numbers but with the whole number sum preserved.
</p>


<h3>References</h3>


<ul>
<li><p> Gallagher M. Proportionality, disproportionality and electoral systems. Electoral Studies. 1991;10(1)33-51. doi:10.1016/0261-3794(91)90004-C.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other data functions: 
<code><a href="#topic+internalSubAsRest">internalSubAsRest</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
dec &lt;- c(rep(50/2, 2), rep(50/3, 3))
whole &lt;- nbc4va::internalRoundFixedSum(dec)

</code></pre>

<hr>
<h2 id='internalSubAsRest'>Substitute values in a dataframe proportionally to all other values</h2><span id='topic+internalSubAsRest'></span>

<h3>Description</h3>

<p>Substitute a target value proportionally to the distribution of the rest of the values in a column, given the following conditions:
</p>

<ul>
<li><p> If a column contains only the target value, the column is removed
</p>
</li>
<li><p> If there are not enough target values to be distributed, then each target value will be
randomly sampled from the rest of the column values with replacement
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>internalSubAsRest(
  dataset,
  x,
  cols = 1:ncol(dataset),
  ignore = c(NA, NaN),
  removal = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="internalSubAsRest_+3A_dataset">dataset</code></td>
<td>
<p>A dataframe with value(s) of <em>x</em> in it.</p>
</td></tr>
<tr><td><code id="internalSubAsRest_+3A_x">x</code></td>
<td>
<p>A target value in dataframe to replace with the rest of values per column.</p>
</td></tr>
<tr><td><code id="internalSubAsRest_+3A_cols">cols</code></td>
<td>
<p>A numeric vector of columns to consider for substitution.</p>
</td></tr>
<tr><td><code id="internalSubAsRest_+3A_ignore">ignore</code></td>
<td>
<p>A vector of the rest of the values to ignore for substitution.</p>
</td></tr>
<tr><td><code id="internalSubAsRest_+3A_removal">removal</code></td>
<td>
<p>Set to TRUE to remove column(s) that consist only of <em>x</em> values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Pseudocode of algorithm:
</p>
<pre>
  SET dataset = table of values with columns and rows
  SET x = target value for substitution

  IF x in dataset:
    FOR EACH column y in a dataset:
      SET xv = all x values in y
      SET rest = all values not equal to x in y
      IF xv == values in y:
        REMOVE y in dataset
      IF number of unique values of rest == 1:
        MODIFY xv = rest
      IF number of xv values &lt; number of unique values of rest:
        SET xn = number of xv values
        MODIFY xv = random sample of rest with size xn
      ELSE:
        SET xn = number of xv values
        SET p = proportions of rest
        SET xnp = xn * p
        IF xnp has decimals:
          MODIFY xnp = round xnp such that sum(xnp) == xn via largest remainder method
        MODIFY xv = rest values with distribution of xnp
  RETURN dataset
</pre>


<h3>Value</h3>

<p>out A dataframe or list depending on <em>removal</em>:
</p>

<ul>
<li><p> if (<em>removal</em> is FALSE) return the <em>dataset</em> with values of <em>x</em> substituted by the rest of the values per column
</p>
</li>
<li><p> if (<em>removal</em> is TRUE) return a list with the following:
</p>

<ul>
<li><p> $removed (vectorof numeric): the removed column indices if the column(s) consists only of <em>x</em> values
</p>
</li>
<li><p> $dataset (dataframe): the <em>dataset</em> with values of <em>x</em> substituted by the rest of the values per column
</p>
</li></ul>

</li></ul>



<h3>See Also</h3>

<p>Other data functions: 
<code><a href="#topic+internalRoundFixedSum">internalRoundFixedSum</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaDataRaw)
unclean &lt;- nbc4vaDataRaw
clean &lt;- nbc4va::internalSubAsRest(unclean, 99)

</code></pre>

<hr>
<h2 id='nbc'>Train a NBC model</h2><span id='topic+nbc'></span>

<h3>Description</h3>

<p>Performs supervised Naive Bayes Classification on verbal autopsy data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nbc(train, test, known = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nbc_+3A_train">train</code></td>
<td>
<p>Dataframe of verbal autopsy train data (See <a href="https://rrwen.github.io/nbc4va/data">Data documentation</a>).
</p>

<ul>
<li><p> Columns (in order): ID, Cause, Symptom-1 to Symptom-n..
</p>
</li>
<li><p> ID (vectorof char): unique case identifiers
</p>
</li>
<li><p> Cause (vectorof char): observed causes for each case
</p>
</li>
<li><p> Symptom-n.. (vectorsof (1 OR 0)): 1 for presence, 0 for absence, other values are treated as unknown
</p>
</li>
<li><p> Unknown symptoms are imputed randomly from distributions of 1s and 0s per symptom column; if no 1s or 0s exist then the column is removed
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
  ID </td><td style="text-align: center;"> Cause </td><td style="text-align: center;"> S1 </td><td style="text-align: center;"> S2 </td><td style="text-align: center;"> S3 </td>
</tr>
<tr>
 <td style="text-align: center;">
  "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0</td>
</tr>
<tr>
 <td style="text-align: center;">
  "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
  "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="nbc_+3A_test">test</code></td>
<td>
<p>Dataframe of verbal autopsy test data in the same format as <em>train</em> except if causes are not known:
</p>

<ul>
<li><p> The 2nd column (Cause) can be omitted if <em>known</em> is FALSE
</p>
</li></ul>
</td></tr>
<tr><td><code id="nbc_+3A_known">known</code></td>
<td>
<p>TRUE to indicate that the <em>test</em> causes are available in the 2nd column and FALSE to indicate that they are not known</p>
</td></tr>
</table>


<h3>Value</h3>

<p>out The result nbc list object containing:
</p>

<ul>
<li><p> $prob.causes (vectorof double): the probabilities for each test case prediction by case id
</p>
</li>
<li><p> $pred.causes (vectorof char): the predictions for each <em>test</em> case by case id
</p>
</li>
<li><p> Additional values:
</p>

<ul>
<li><p> * indicates that the value is only available if <em>test</em> causes are known
</p>
</li>
<li><p> $train (dataframe): the input <em>train</em> data
</p>
</li>
<li><p> $train.ids (vectorof char): the ids of the <em>train</em> data
</p>
</li>
<li><p> $train.causes (vectorof char): the causes of the <em>train</em> data by case id
</p>
</li>
<li><p> $train.samples (double): the number of input <em>train</em> samples
</p>
</li>
<li><p> $test (dataframe): the input <em>test</em> data
</p>
</li>
<li><p> $test.ids (vectorof char): the ids of the <em>test</em> data
</p>
</li>
<li><p> $test.causes* (vectorof char): the causes of the <em>test</em> data by case id
</p>
</li>
<li><p> $test.samples (double): the number of input <em>test</em> samples
</p>
</li>
<li><p> $test.known (logical): whether the <em>test</em> causes are known
</p>
</li>
<li><p> $symptoms (vectorof char): all unique symptoms in order
</p>
</li>
<li><p> $causes (vectorof char): all possible unique causes of death
</p>
</li>
<li><p> $causes.train (vectorof char): all unique causes of death in the <em>train</em> data
</p>
</li>
<li><p> $causes.test* (vectorof char): all unique causes of death in the <em>test</em> data
</p>
</li>
<li><p> $causes.pred (vectorof char): all unique causes of death in the predicted cases
</p>
</li>
<li><p> $causes.obs* (vectorof char): all unique causes of death in the observed cases
</p>
</li>
<li><p> $pred (dataframe): a table of predictions for each <em>test</em> case, sorted by probability
</p>

<ul>
<li><p> Columns (in order): CaseID, TrueCause, Prediction-1 to Prediction-n..
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> TrueCause* (vectorof char): the observed causes of death
</p>
</li>
<li><p> Prediction-n.. (vectorsof char): the predicted causes of death,
where Prediction1 is the most probable cause, and Prediction-n is the least probable cause
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> Prediction1 </td><td style="text-align: center;"> Prediction2 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Stroke" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> "HIV" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Stroke"
    </td>
</tr>

</table>

</li>
<li><p> $obs* (dataframe): a table of observed causes matching <em>$pred</em> for each <em>test</em> case
</p>

<ul>
<li><p> Columns (in order): CaseID, TrueCause
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> TrueCause (vectorof char): the actual cause of death if applicable
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> TrueCause </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> "HIV" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> "Stroke" </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> "HIV"
    </td>
</tr>

</table>

</li>
<li><p> $obs.causes* (vectorof char): all observed causes of death by case id
</p>
</li>
<li><p> $prob (dataframe): a table of probabilities of each cause for each test case
</p>

<ul>
<li><p> Columns (in order): CaseID, Cause-1 to Cause-n..
</p>
</li>
<li><p> CaseID (vectorof char): case identifiers
</p>
</li>
<li><p> Cause-n.. (vectorsof double): probabilies for each cause of death
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
      CaseID </td><td style="text-align: center;"> HIV </td><td style="text-align: center;"> Stroke </td>
</tr>
<tr>
 <td style="text-align: center;">
      "a1" </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> 0.5 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "b2" </td><td style="text-align: center;"> 0.3 </td><td style="text-align: center;"> 0.7 </td>
</tr>
<tr>
 <td style="text-align: center;">
      "c3" </td><td style="text-align: center;"> 0.9 </td><td style="text-align: center;"> 0.1
    </td>
</tr>

</table>

</li></ul>

</li></ul>



<h3>References</h3>


<ul>
<li><p> Miasnikof P, Giannakeas V, Gomes M, Aleksandrowicz L, Shestopaloff AY, Alam D, Tollman S, Samarikhalaj, Jha P. Naive Bayes classifiers for verbal autopsies: comparison to physician-based classification for 21,000 child and adult deaths. BMC Medicine. 2015;13:286. doi:10.1186/s12916-015-0521-2.
</p>
</li></ul>



<h3>See Also</h3>

<p>Other main functions: 
<code><a href="#topic+plot.nbc">plot.nbc</a>()</code>,
<code><a href="#topic+print.nbc_summary">print.nbc_summary</a>()</code>,
<code><a href="#topic+summary.nbc">summary.nbc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
# Set "known" to indicate whether or not "test" causes are known
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test, known=TRUE)

# Obtain the probabilities and predictions
prob &lt;- results$prob.causes
pred &lt;- results$pred.causes

</code></pre>

<hr>
<h2 id='nbc4va'>nbc4va: Bayes Classifier for Verbal Autopsy Data</h2><span id='topic+nbc4va'></span>

<h3>Description</h3>

<p>An implementation of the Naive Bayes Classifier (NBC) algorithm
used for Verbal Autopsy (VA) built on code from <a href="https://bmcmedicine.biomedcentral.com/articles/10.1186/s12916-015-0521-2">Miasnikof et al (2015)</a> &lt;DOI:10.1186/s12916-015-0521-2&gt;.
<br /><br />
For documentation and help, please see:
<br /><br />
<a href="https://rrwen.github.io/nbc4va/">https://rrwen.github.io/nbc4va/</a>
</p>


<h3>Acknowledgements</h3>

<p>This package was developed at the Centre for Global Health Research (CGHR) in Toronto, Ontario, Canada. The original NBC algorithm code was developed by Pierre Miaskinof and Vasily Giannakeas.
The original performance metrics code was provided by Dr. Mireille Gomes whom also offered guidance in metrics implementation and user testing.
Special thanks to Richard Zehang Li for providing a standard structure for the package and Patrycja Kolpak for user testing of the GUI.
</p>


<h3>Author(s)</h3>

<p>Richard Wen &lt;<a href="mailto:rrwen.dev@gmail.com">rrwen.dev@gmail.com</a>&gt;
</p>


<h3>References</h3>

<p>Use <code>citation("nbc4va")</code> to view citation information for the nbc4va package.
</p>

<ul>
<li><p> Miasnikof P, Giannakeas V, Gomes M, Aleksandrowicz L, Shestopaloff AY, Alam D, Tollman S, Samarikhalaj, Jha P. Naive Bayes classifiers for verbal autopsies: comparison to physician-based classification for 21,000 child and adult deaths. BMC Medicine. 2015;13:286. doi:10.1186/s12916-015-0521-2.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(nbc4va)

# Quick start
# Follow the instructions in the web interface
nbc4vaGUI()

# View user guides for the nbc4va package
browseVignettes("nbc4va")

## End(Not run)

</code></pre>

<hr>
<h2 id='nbc4vaData'>Example of clean data in nbc4va</h2><span id='topic+nbc4vaData'></span>

<h3>Description</h3>

<p>A random generation of clean verbal autopsy synthetic data for use in demonstrating the nbc4va package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nbc4vaData
</code></pre>


<h3>Format</h3>

<p>A dataframe with 100 rows and 102 columns:
</p>

<ul>
<li><p> id (vectorof char): the case identifiers
</p>
</li>
<li><p> cause (vectorof char): the cause of death for each case
</p>
</li>
<li><p> symptom1..100 (vectorsof (1 OR 0)): whether the symptom is recorded as present (1) or not (0) for each case (row)
</p>
</li>
<li><p> Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
    id </td><td style="text-align: center;"> cause </td><td style="text-align: center;"> symptom1 </td><td style="text-align: center;"> symptom2 </td><td style="text-align: center;"> symptom3 </td>
</tr>
<tr>
 <td style="text-align: center;">
    "a27" </td><td style="text-align: center;"> "cause10" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0</td>
</tr>
<tr>
 <td style="text-align: center;">
    "k37" </td><td style="text-align: center;"> "cause2" </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
    "e57" </td><td style="text-align: center;"> "cause8" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 0
  </td>
</tr>

</table>

</li></ul>



<h3>Source</h3>

<p>Random generation using the <code><a href="base.html#topic+sample">sample</a></code> function with <code><a href="base.html#topic+set.seed">set.seed</a></code> set to 1.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)
</code></pre>

<hr>
<h2 id='nbc4vaDataRaw'>Example of unclean data in nbc4va</h2><span id='topic+nbc4vaDataRaw'></span>

<h3>Description</h3>

<p>A random generation of unclean verbal autopsy synthetic data for use in demonstrating the nbc4va package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nbc4vaDataRaw
</code></pre>


<h3>Format</h3>

<p>A dataframe with 100 rows and 102 columns:
</p>

<ul>
<li><p> id (vectorof char): the case identifiers
</p>
</li>
<li><p> cause (vectorof char): the cause of death for each case
</p>
</li>
<li><p> symptom1..100 (vectorsof (1 OR 0 OR 99)): whether the symptom is recorded as present (1), absent (0), or unknown (99) for each case (row)
</p>
</li>
<li><p> Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
    id </td><td style="text-align: center;"> cause </td><td style="text-align: center;"> symptom1 </td><td style="text-align: center;"> symptom2 </td><td style="text-align: center;"> symptom3 </td>
</tr>
<tr>
 <td style="text-align: center;">
    "a27" </td><td style="text-align: center;"> "cause10" </td><td style="text-align: center;"> 99 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
    "k37" </td><td style="text-align: center;"> "cause2" </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 99 </td><td style="text-align: center;"> 1</td>
</tr>
<tr>
 <td style="text-align: center;">
    "e57" </td><td style="text-align: center;"> "cause8" </td><td style="text-align: center;"> 1 </td><td style="text-align: center;"> 0 </td><td style="text-align: center;"> 99
  </td>
</tr>

</table>

</li></ul>



<h3>Details</h3>

<p><strong>Warning</strong>: This data may produce errors depending on how you use it in the package.
</p>


<h3>Source</h3>

<p>Random generation using the <code><a href="base.html#topic+sample">sample</a></code> function with <code><a href="base.html#topic+set.seed">set.seed</a></code> set to 1.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaDataRaw)
</code></pre>

<hr>
<h2 id='nbc4vaGUI'>Web-based graphical user interface in nbc4va</h2><span id='topic+nbc4vaGUI'></span>

<h3>Description</h3>

<p>A Graphical User Interface (GUI) for the nbc4va package using <a href="https://shiny.rstudio.com/">shiny</a>. <br /> <br />
<img src="../help/figures/nbcguiex.png" alt="nbcguiex.png" />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nbc4vaGUI()
</code></pre>


<h3>Details</h3>

<p>This function requires the shiny package, which can be installed via: <br /> <br />
<code>install.packages("shiny")</code> <br /> <br />
Use <em>esc</em> in the R console to stop the GUI. <br /> <br />
Please use a modern browser (e.g. latest firefox, chrome) for the best experience.
</p>


<h3>Value</h3>

<p>Creates a GUI for running nbc4va in a web browser.
</p>


<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+nbc4vaIO">nbc4vaIO</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(nbc4va)
nbc4vaGUI()

## End(Not run)

</code></pre>

<hr>
<h2 id='nbc4vaIO'>Run nbc4va using file input and output</h2><span id='topic+nbc4vaIO'></span>

<h3>Description</h3>

<p>Runs <code><a href="#topic+nbc">nbc</a></code> and uses <code><a href="#topic+summary.nbc">summary.nbc</a></code> on input data files or dataframes to output
result files or dataframes with data on predictions, probabilities, causes, and performance metrics in an easily accessible way.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nbc4vaIO(
  trainFile,
  testFile,
  known = TRUE,
  csmfaFile = NULL,
  saveFiles = TRUE,
  outDir = dirname(testFile),
  fileHeader = strsplit(basename(testFile), "\\.")[[1]][[1]],
  fileReader = read.csv,
  fileReaderIn = "file",
  fileReaderArgs = list(as.is = TRUE),
  fileWriter = write.csv,
  fileWriterIn = "x",
  fileWriterOut = "file",
  fileWriterArgs = list(row.names = FALSE),
  outExt = "csv"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="nbc4vaIO_+3A_trainfile">trainFile</code></td>
<td>
<p>A character value of the path to the data to be used as the <em>train</em> argument for <code><a href="#topic+nbc">nbc</a></code> or a dataframe of the <em>train</em> argument.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_testfile">testFile</code></td>
<td>
<p>A character value of the path to the data to be used as the <em>test</em> argument for <code><a href="#topic+nbc">nbc</a></code>  or a dataframe of the <em>test</em> argument.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_known">known</code></td>
<td>
<p>TRUE to indicate that the <em>test</em> causes are available in the 2nd column and FALSE to indicate that they are not known</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_csmfafile">csmfaFile</code></td>
<td>
<p>A character value of the path to the data to be used as the <em>csmfa.obs</em> argument for <code><a href="#topic+summary.nbc">summary.nbc</a></code> or a named vector of the <em>csmfa.obs</em> argument.
</p>

<ul>
<li><p> If (csmfaFile is char): the file must have only 1 column of the causes per case
</p>
</li></ul>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_savefiles">saveFiles</code></td>
<td>
<p>Set to TRUE to save the return object as files or FALSE to return the actual object</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_outdir">outDir</code></td>
<td>
<p>A character value of the path to the directory to store the output results files.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_fileheader">fileHeader</code></td>
<td>
<p>A character value of the file header name to use for the output results files.
</p>

<ul>
<li><p> The default is to use the name of the <em>testFile</em>
</p>
</li></ul>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filereader">fileReader</code></td>
<td>
<p>A function that is able to read the <em>trainFile</em> and the <em>testFile</em>.
</p>

<ul>
<li><p> The default is set to read csv files using <code><a href="utils.html#topic+read.csv">read.csv</a></code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filereaderin">fileReaderIn</code></td>
<td>
<p>A character value of the <em>fileReader</em> argument name that accepts a file path for reading as an input.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filereaderargs">fileReaderArgs</code></td>
<td>
<p>A list of the <em>fileReader</em> arguments to be called with <code><a href="base.html#topic+do.call">do.call</a></code>.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filewriter">fileWriter</code></td>
<td>
<p>A function that is able to write <code><a href="base.html#topic+data.frame">data.frame</a></code> objects to a file location.
</p>

<ul>
<li><p> The default is set to write csv files using <code><a href="utils.html#topic+write.csv">write.csv</a></code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filewriterin">fileWriterIn</code></td>
<td>
<p>A character value of the <em>fileWriter</em> argument name that accepts a dataframe for writing.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filewriterout">fileWriterOut</code></td>
<td>
<p>A character value of the <em>fileWriter</em> argument name that accepts a file path for writing as an output.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_filewriterargs">fileWriterArgs</code></td>
<td>
<p>A list of arguments of the <em>fileWriter</em> arguments to be called with <code><a href="base.html#topic+do.call">do.call</a></code>.</p>
</td></tr>
<tr><td><code id="nbc4vaIO_+3A_outext">outExt</code></td>
<td>
<p>A character value of the extension (without the period) to use for the result files.
</p>

<ul>
<li><p> The default is set to use the &quot;csv&quot; extension
</p>
</li></ul>


<ul>
<li><p> The default is the directory of the <em>testFile</em>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a> for details on the methodology and implementation
of the Naive Bayes Classifier algorithm. This function may also act as a wrapper for the
main nbc4va package functions.
</p>


<h3>Value</h3>

<p>out Vector or list of respective paths or data from the naive bayes classifier:
</p>

<ul>
<li><p> If (<em>saveFiles</em> is TRUE) return a named character vector of the following:
</p>

<ul>
<li><p> Names: dir, pred, prob, causes, summary
</p>
</li>
<li><p> dir (char): the path to the directory of the output files
</p>
</li>
<li><p> pred (char): the path to the prediction table file, where the columns of Pred1..PredN are ordered by the prediction probability with Pred1 being the most probable cause
</p>
</li>
<li><p> prob (char): the path to the probability table file, where the columns excluding the CaseID are the cause and each cell has a probability value
</p>
</li>
<li><p> causes (char): the path to the cause performance metrics table file, where each column is a metric and each row is a cause
</p>
</li>
<li><p> metrics (char): the path to the overall performance metrics table file, where each column is a metric
</p>
</li></ul>

</li>
<li><p> If (<em>saveFiles</em> is FALSE) return a list of the following:
</p>

<ul>
<li><p> Names: pred, prob, causes, summary
</p>
</li>
<li><p> pred (dataframe): the prediction table, where the columns of Pred1..PredN are ordered by the prediction probability with Pred1 being the most probable cause
</p>
</li>
<li><p> prob (dataframe): the probability table, where the columns excluding the CaseID are the cause and each cell has a probability value
</p>
</li>
<li><p> causes (dataframe): the cause performance metrics table, where each column is a metric and each row is a cause
</p>
</li>
<li><p> metrics (dataframe): the summary table, where each column is a performance metric
</p>
</li>
<li><p> nbc (object): the returned <code><a href="#topic+nbc">nbc</a></code> object
</p>
</li>
<li><p> nbc_summary (object): the returned <code><a href="#topic+summary.nbc">summary.nbc</a></code> object
</p>
</li></ul>

</li></ul>



<h3>See Also</h3>

<p>Other utility functions: 
<code><a href="#topic+nbc4vaGUI">nbc4vaGUI</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Split data into train and test sets
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]

# Save train and test data as csv in temp location
trainFile &lt;- tempfile(fileext=".csv")
testFile &lt;- tempfile(fileext=".csv")
write.csv(train, trainFile, row.names=FALSE)
write.csv(test, testFile, row.names=FALSE)

# Use nbc4vaIO via file input and output
# Set "known" to indicate whether test causes are known
outFiles &lt;- nbc4vaIO(trainFile, testFile, known=TRUE)

# Use nbc4vaIO as a wrapper
out &lt;- nbc4vaIO(train, test, known=TRUE, saveFiles=FALSE)

</code></pre>

<hr>
<h2 id='ova2nbc'>Translate open verbal autopsy arguments to train a NBC model</h2><span id='topic+ova2nbc'></span>

<h3>Description</h3>

<p>A wrapper function for creating an nbc object with the parameters specified by
the <a href="https://cran.r-project.org/package=openVA"><span class="pkg">openVA</span></a> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ova2nbc(symps.train, symps.test, causes.train, causes.table = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ova2nbc_+3A_symps.train">symps.train</code></td>
<td>
<p>Dataframe of verbal autopsy train data.
</p>

<ul>
<li><p> Columns (in order): ID, Cause, Symptom-1 to Symptom-n..
</p>
</li>
<li><p> ID (vectorof char): case identifiers
</p>
</li>
<li><p> Cause (vectorof char): observed causes for each case
</p>
</li>
<li><p> Symptom-n.. (vectorsof char): &quot;Y&quot; for presence, &quot;&quot; for absence, &quot;.&quot; for missing
</p>
</li></ul>

<p>Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
  ID </td><td style="text-align: center;"> Cause </td><td style="text-align: center;"> S1 </td><td style="text-align: center;"> S2 </td><td style="text-align: center;"> S3 </td>
</tr>
<tr>
 <td style="text-align: center;">
  "a1" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Y" </td><td style="text-align: center;"> "" </td><td style="text-align: center;"> "."</td>
</tr>
<tr>
 <td style="text-align: center;">
  "b2" </td><td style="text-align: center;"> "Stroke" </td><td style="text-align: center;"> "." </td><td style="text-align: center;"> "" </td><td style="text-align: center;"> "Y"</td>
</tr>
<tr>
 <td style="text-align: center;">
  "c3" </td><td style="text-align: center;"> "HIV" </td><td style="text-align: center;"> "Y" </td><td style="text-align: center;"> "Y" </td><td style="text-align: center;"> "."
</td>
</tr>

</table>
</td></tr>
<tr><td><code id="ova2nbc_+3A_symps.test">symps.test</code></td>
<td>
<p>Dataframe of verbal autopsy test data in the same format as <em>symps.train</em>.
</p>

<ul>
<li><p> If (<em>causes.train</em> is (vectorof char)): <em>symps.test</em> is assumed to not have a cause column
</p>
</li></ul>
</td></tr>
<tr><td><code id="ova2nbc_+3A_causes.train">causes.train</code></td>
<td>
<p>The train vector or column for the causes of death to use.
</p>

<ul>
<li><p> If (vectorof char): cause of death values with number of values equal to nrow(<em>symps.train</em>);
it is assumed that <em>symps.test</em> has no causes of death column
</p>
</li>
<li><p> If (char): name of cause of death column from <em>symps.train</em>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ova2nbc_+3A_causes.table">causes.table</code></td>
<td>
<p>Character list of unique causes to learn.
</p>

<ul>
<li><p> If (NULL): set to unique causes of death in <em>symps.train</em>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ova2nbc_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to avoid errors if necessary.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nbc An <code><a href="#topic+nbc">nbc</a></code> object with the following modifications:
</p>

<ul>
<li><p> $id (vectorof char): set to test data ids
</p>
</li>
<li><p> $prob (matrixof numeric): set to a matrix of likelihood for each cause of death for the test cases
</p>
</li>
<li><p> $CSMF (vectorof char): set to the predicted CSMFs with names for the corresponding causes
</p>
</li></ul>



<h3>References</h3>


<ul>
<li><p> Li Z, McCormick T, Clark S. openVA: Automated Method for Verbal Autopsy [Internet]. 2016. [cited 2016 Apr 29]. Available from: <a href="https://cran.r-project.org/package=openVA">https://cran.r-project.org/package=openVA</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(openVA)  # install.packages("openVA")
library(nbc4va)

# Obtain some openVA formatted data
data(RandomVA3) # cols: deathId, cause, symptoms..
train &lt;- RandomVA3[1:100, ]
test &lt;- RandomVA3[101:200, ]

# Run naive bayes classifier on openVA data
results &lt;- ova2nbc(train, test, "cause")

# Obtain the probabilities and predictions
prob &lt;- results$prob.causes
pred &lt;- results$pred.causes

## End(Not run)

</code></pre>

<hr>
<h2 id='plot.nbc'>Bar plot of top predicted causes from a NBC model</h2><span id='topic+plot.nbc'></span>

<h3>Description</h3>

<p>Plots the results from a <code><a href="#topic+nbc">nbc</a></code> object as a <code><a href="graphics.html#topic+barplot">barplot</a></code> for a number of causes based on
predicted Cause Specific Mortality Fraction (CSMF). <br /> <br />
<img src="../help/figures/plotnbcex.png" alt="plotnbcex.png" />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nbc'
plot(
  x,
  top.plot = length(x$causes.pred),
  min.csmf = 0,
  csmfa.obs = NULL,
  footnote = TRUE,
  footnote.color = "gray48",
  footnote.size = 0.7,
  main = paste("Naive Bayes Classifier: Top ", top.plot, " Causes by Predicted CSMF",
    sep = ""),
  xlab = "Predicted CSMF",
  col = "dimgray",
  horiz = TRUE,
  border = NA,
  las = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot.nbc_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+nbc">nbc</a></code> object.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_top.plot">top.plot</code></td>
<td>
<p>A number that produces top k causes depending on a Cause Specific Mortality Fraction (CSMF) measure.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_min.csmf">min.csmf</code></td>
<td>
<p>A number that represents the minimum CSMF measure for a cause to be included in the plot.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_csmfa.obs">csmfa.obs</code></td>
<td>
<p>A character vector of the true causes for calculating the CSMF accuracy.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_footnote">footnote</code></td>
<td>
<p>A boolean indicating whether to include a footnote containing details about the nbc or not.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_footnote.color">footnote.color</code></td>
<td>
<p>A character specifying the color of the footnote text.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_footnote.size">footnote.size</code></td>
<td>
<p>A numeric value specifying the size of the footnote text.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_main">main</code></td>
<td>
<p>A character value of the title to display.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_xlab">xlab</code></td>
<td>
<p>A character value of the x axis title.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_col">col</code></td>
<td>
<p>A character value of the color to use for the plot.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_horiz">horiz</code></td>
<td>
<p>Set to TRUE to draw bars horizontally and FALSE to draw bars vertically.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_border">border</code></td>
<td>
<p>A character value of the colors to use for the bar borders. Set to NA to disable.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_las">las</code></td>
<td>
<p>An integer value to determine if labels should be parallel or perpendicular to axis.</p>
</td></tr>
<tr><td><code id="plot.nbc_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed to <code><a href="graphics.html#topic+barplot">barplot</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a> for details on CSMF and CSMF accuracy.
</p>


<h3>Value</h3>

<p>Generates a bar plot the top predicted causes from the NBC model
</p>


<h3>See Also</h3>

<p><code><a href="graphics.html#topic+barplot">barplot</a></code>
</p>
<p>Other main functions: 
<code><a href="#topic+nbc">nbc</a>()</code>,
<code><a href="#topic+print.nbc_summary">print.nbc_summary</a>()</code>,
<code><a href="#topic+summary.nbc">summary.nbc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Plot the top 3 causes by CSMF
plot(results, top.plot=3)

</code></pre>

<hr>
<h2 id='print.nbc_summary'>Print top predicted causes from a NBC model</h2><span id='topic+print.nbc_summary'></span>

<h3>Description</h3>

<p>Prints a summary message from a <code><a href="#topic+summary.nbc">summary.nbc</a></code> object of
the top causes by probability or predicted Cause Specific Mortality Fraction (CSMF). <br /> <br />
<img src="../help/figures/printnbcex.png" alt="printnbcex.png" />
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nbc_summary'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.nbc_summary_+3A_x">x</code></td>
<td>
<p>A <code><a href="#topic+summary.nbc">summary.nbc</a></code> object.</p>
</td></tr>
<tr><td><code id="print.nbc_summary_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed if applicable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a> for details on CSMF and probability from the Naive Bayes Classifier.
</p>


<h3>Value</h3>

<p>Prints a summary of the top causes of death by probability for the NBC model.
</p>


<h3>See Also</h3>

<p>Other main functions: 
<code><a href="#topic+nbc">nbc</a>()</code>,
<code><a href="#topic+plot.nbc">plot.nbc</a>()</code>,
<code><a href="#topic+summary.nbc">summary.nbc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Print a summary of all the test data for the top 3 causes by predicted CSMF
brief &lt;- summary(results, top=3)
print(brief)

</code></pre>

<hr>
<h2 id='summary.nbc'>Summarize a NBC model with metrics</h2><span id='topic+summary.nbc'></span>

<h3>Description</h3>

<p>Summarizes the results from a <code><a href="#topic+nbc">nbc</a></code> object. The summary
can be either for a particular case or for the entirety of cases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'nbc'
summary(object, top = 5, id = NULL, csmfa.obs = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.nbc_+3A_object">object</code></td>
<td>
<p>The result <code><a href="#topic+nbc">nbc</a></code> object.</p>
</td></tr>
<tr><td><code id="summary.nbc_+3A_top">top</code></td>
<td>
<p>A number that produces top causes depending on <em>id</em>:
</p>

<ul>
<li><p> If (<em>id</em> is char): provide the <em>top</em> causes of the case by probability
</p>
</li>
<li><p> If (<em>id</em> is NULL): provide the <em>top</em> causes by predicted Cause Specific Mortality Fractions (CSMF)
</p>
</li></ul>
</td></tr>
<tr><td><code id="summary.nbc_+3A_id">id</code></td>
<td>
<p>A character representing a case id in the test data.</p>
</td></tr>
<tr><td><code id="summary.nbc_+3A_csmfa.obs">csmfa.obs</code></td>
<td>
<p>A character vector of the true causes for calculating the CSMF accuracy.</p>
</td></tr>
<tr><td><code id="summary.nbc_+3A_...">...</code></td>
<td>
<p>Additional arguments to be passed if applicable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://rrwen.github.io/nbc4va/methods">Methods documentation</a> for details on calculations and metrics.
</p>


<h3>Value</h3>

<p>out A summary object built from a <code><a href="#topic+nbc">nbc</a></code> object with modifications/additions:
</p>

<ul>
<li><p> If (<em>id</em> is char):
</p>

<ul>
<li><p> Additions to a <code><a href="#topic+nbc">nbc</a></code> object:
</p>

<ul>
<li><p> $id (char): the case <em>id</em> chosen by the user
</p>
</li>
<li><p> $top (numeric): the input number of <em>top</em> causes for <em>id</em>
</p>
</li>
<li><p> $top.prob (vectorof double): the <em>top</em> probabilities for <em>id</em>
</p>
</li></ul>

</li>
<li><p> The following are modified from a nbc object to be <em>id</em> specific:<br /> $test, $test.ids, $test.causes, $obs.causes, $prob, $prob.causes, $pred, $pred.causes
</p>
</li></ul>

</li>
<li><p> If (<em>id</em> is NULL):
</p>

<ul>
<li><p> Additions to the <code><a href="#topic+nbc">nbc</a></code> object:
</p>

<ul>
<li><p> * indicates that the item is only available if <em>test</em> causes are known
</p>
</li>
<li><p> ** indicates that the item ignores * if <em>csmfa.obs</em> is given
</p>
</li>
<li><p> $top.csmf.pred (vectorof double): the <em>top</em> predicted CSMFs by cause
</p>
</li>
<li><p> $top.csmf.obs* (vectorof double): the <em>top</em> observed CSMFs by cause
</p>
</li>
<li><p> $metrics.all** (vectorof double): a numeric vector of overall metrics.
</p>

<ul>
<li><p> Names: TruePositives, TrueNegatives, FalsePositives, FalseNegatives, Accuracy, Sensitivity, PCCC, CSMFMaxError, CSMFaccuracy
</p>
</li>
<li><p> TruePositives* (double): total number of true positives
</p>
</li>
<li><p> TrueNegatives* (double): total number of true negatives
</p>
</li>
<li><p> FalsePositives* (double): total number of false positives
</p>
</li>
<li><p> FalseNegatives* (double): total number of false negatives
</p>
</li>
<li><p> Sensitivity* (double): the overall sensitivity
</p>
</li>
<li><p> PCCC* (double): the partial chance corrected concordance
</p>
</li>
<li><p> CSMFMaxError** (double): the maximum Cause Specific Mortality Fraction Error
</p>
</li>
<li><p> CSMFaccuracy** (double): the Cause Specific Mortaliy Fraction accuracy
</p>
</li></ul>

</li>
<li><p> $metrics.causes (dataframe): a perfomance table of metrics by cause.
</p>

<ul>
<li><p> Columns: Cause, Sensitivity, CSMFpredicted, CSMFobserved
</p>
</li>
<li><p> Cause (vectorof char): The unique causes from both the <em>obs</em> and <em>pred</em> inputs
</p>
</li>
<li><p> Sensitivity* (vectorof double): the sensitivity for a cause
</p>
</li>
<li><p> CSMFpredicted (vectorof double): the cause specific mortality fraction for a cause given the predicted deaths
</p>
</li>
<li><p> CSMFobserved* (vectorof double): the cause specific mortality fraction for a cause given the observed deaths
</p>
</li>
<li><p> TruePositives (vectorof double): The total number of true positives per cause
</p>
</li>
<li><p> TrueNegatives (vectorof double): The total number of true negatives per cause
</p>
</li>
<li><p> FalsePositives (vectorof double): The total number of false positives per cause
</p>
</li>
<li><p> FalseNegatives (vectorof double): The total number of false negatives per cause
</p>
</li>
<li><p> PredictedFrequency (vectorof double): The occurence of a cause in the <em>pred</em> input
</p>
</li>
<li><p> ObservedFrequency (vectorof double): The occurence of a cause in the <em>obs</em> input
</p>
</li>
<li><p> Example:
</p>

<table>
<tr>
 <td style="text-align: center;">
              Cause </td><td style="text-align: center;"> Sensitivity </td><td style="text-align: center;"> Metric-n.. </td>
</tr>
<tr>
 <td style="text-align: center;">
              HIV </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> #.. </td>
</tr>
<tr>
 <td style="text-align: center;">
              Stroke </td><td style="text-align: center;"> 0.5 </td><td style="text-align: center;"> #..
            </td>
</tr>

</table>

</li></ul>

</li></ul>

</li></ul>

</li></ul>



<h3>See Also</h3>

<p>Other main functions: 
<code><a href="#topic+nbc">nbc</a>()</code>,
<code><a href="#topic+plot.nbc">plot.nbc</a>()</code>,
<code><a href="#topic+print.nbc_summary">print.nbc_summary</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Obtain a summary for the results
brief &lt;- summary(results, top=2)  # top 2 causes by CSMF for all test data
briefID &lt;- summary(results, id="v48")  # top 5 causes by probability for case "v48"

</code></pre>

<hr>
<h2 id='topCOD.nbc'>Cause of death predictions from a NBC model</h2><span id='topic+topCOD.nbc'></span>

<h3>Description</h3>

<p>Obtains the top causes of deaths for each testing case from a result <code><a href="#topic+nbc">nbc</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>topCOD.nbc(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="topCOD.nbc_+3A_object">object</code></td>
<td>
<p>The result <code><a href="#topic+nbc">nbc</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>out A dataframe of the top CODs:
</p>

<ul>
<li><p> Columns: ID, COD
</p>
</li>
<li><p> ID (vectorof char): The ids for each testing case
</p>
</li>
<li><p> COD (vectorof char): The top prediction for each testing case
</p>
</li></ul>



<h3>See Also</h3>

<p>Other wrapper functions: 
<code><a href="#topic+csmf.nbc">csmf.nbc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(nbc4va)
data(nbc4vaData)

# Run naive bayes classifier on random train and test data
train &lt;- nbc4vaData[1:50, ]
test &lt;- nbc4vaData[51:100, ]
results &lt;- nbc(train, test)

# Obtain the top cause of death predictions for the test data
topPreds &lt;- topCOD.nbc(results)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
