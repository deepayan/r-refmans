<!DOCTYPE html><html><head><title>Help for package foreSIGHT</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {foreSIGHT}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#barossa_obs'>
<p>Multi-site rainfall observations in the Barossa Valley used in examples and vignette</p></a></li>
<li><a href='#calculateAttributes'><p>Calculates the attributes of the hydroclimate time series</p></a></li>
<li><a href='#climdata'>
<p>Example climate projection data</p></a></li>
<li><a href='#createExpSpace'><p>Creates exposure space of hydroclimatic targets for generation of scenarios using 'generateScenarios'</p></a></li>
<li><a href='#egClimData'><p>Climate attributes from projections.</p></a></li>
<li><a href='#egMultiSiteSim'><p>Output from call to generateScenarios() using multi-site model (see example 5 in generateScenarios).</p></a></li>
<li><a href='#egScalPerformance'><p>Performance metrics of the tank model using simple scaled scenarios.</p></a></li>
<li><a href='#egScalSummary'><p>Summary of a simple scaled scenario.</p></a></li>
<li><a href='#egSimOATPerformance'><p>Performance metrics of the tank model using OAT scenarios.</p></a></li>
<li><a href='#egSimOATSummary'><p>Summary of a OAT scenario.</p></a></li>
<li><a href='#egSimPerformance'><p>Performance metrics of the tank model using regGrid scenarios.</p></a></li>
<li><a href='#egSimPerformance_systemB'><p>Performance metrics of an alternate tank model using regGrid scenarios.</p></a></li>
<li><a href='#egSimSummary'><p>Summary of a regGrid scenario.</p></a></li>
<li><a href='#foreSIGHT'><p>foreSIGHT: A package for Systems Insights from Generation of Hydroclimatic Timeseries</p></a></li>
<li><a href='#func_avg'><p>Calculates average of time series</p></a></li>
<li><a href='#func_avgDSD'><p>Calculates average dry spell duration (below threshold)</p></a></li>
<li><a href='#func_avgWSD'><p>Calculates average wet spell duration (below threshold)</p></a></li>
<li><a href='#func_CSL'><p>Calculates the cold season length</p></a></li>
<li><a href='#func_dyWet'><p>Calculates average rainfall on wet days (above threshold)</p></a></li>
<li><a href='#func_F0'><p>Calculates the number of frost days</p></a></li>
<li><a href='#func_GSL'><p>Calculates the growing season length</p></a></li>
<li><a href='#func_maxDSD'><p>Calculates maximum dry spell duration (below threshold)</p></a></li>
<li><a href='#func_maxWSD'><p>Calculates maximum wet spell duration (above threshold)</p></a></li>
<li><a href='#func_nWet'><p>Calculates number of wet days (above threshold)</p></a></li>
<li><a href='#func_P'><p>Calculates a quantile value</p></a></li>
<li><a href='#func_R'><p>Calculates the number of days above a threshold (often used for temperature)</p></a></li>
<li><a href='#func_rng'><p>Calculates the inter-quantile range</p></a></li>
<li><a href='#func_seasRatio'><p>Calculates seasonality ratio</p></a></li>
<li><a href='#func_tot'><p>Calculates total of time series</p></a></li>
<li><a href='#func_wettest6monPeakDay'><p>Calculates the day of year corresponding to the wettest 6 months</p></a></li>
<li><a href='#func_wettest6monSeasRatio'><p>Calculates the ratio of wet season to dry season rainfall, based on wettest6monPeakDay</p></a></li>
<li><a href='#generateScenario'><p>Produces time series of hydroclimatic variables for an exposure target.</p></a></li>
<li><a href='#generateScenarios'><p>Produces time series of hydroclimatic variables for an exposure space.</p></a></li>
<li><a href='#getSimSummary'><p>Produces a summary object containing the metadata of a full simulation</p></a></li>
<li><a href='#modCalibrator'><p>modCalibrator</p></a></li>
<li><a href='#modSimulator'><p>modSimulator</p></a></li>
<li><a href='#plotExpSpace'><p>Plots the location of points in a two-dimensional exposure space</p></a></li>
<li><a href='#plotMultiSiteScenarios'><p>Creates summary plots of the biases in the multi-site scenarios</p></a></li>
<li><a href='#plotOptions'><p>Plots the differences in performance metrics from two system options</p></a></li>
<li><a href='#plotPerformanceOAT'><p>Plots performance for one-at-a-time (OAT) perturbations in attributes</p></a></li>
<li><a href='#plotPerformanceSpace'><p>Plots a performance space using the system performance and scenarios as input</p></a></li>
<li><a href='#plotPerformanceSpaceMulti'><p>Plots contours of the number of performance thresholds exceeded in the perturbation space</p></a></li>
<li><a href='#plotScenarios'><p>Creates summary plots of the biases in the scenarios</p></a></li>
<li><a href='#runSystemModel'><p>Runs a system model and outputs the system performance</p></a></li>
<li><a href='#tank_obs'>
<p>Observations for demo tank model examples and vignette</p></a></li>
<li><a href='#tankPerformance'>
<p>A function to calculate difference performance from simulated tank behaviour</p></a></li>
<li><a href='#tankWrapper'><p>Wrapper function for a rain water tank system model</p></a></li>
<li><a href='#viewAttributeDef'><p>Prints the definition of an attribute</p></a></li>
<li><a href='#viewAttributeFuncs'><p>Prints the list of built-in attribute functions</p></a></li>
<li><a href='#viewDefaultOptimArgs'><p>Prints the default optimisation arguments</p></a></li>
<li><a href='#viewModelParameters'><p>Prints the names and bounds of the parameters of the stochastic models</p></a></li>
<li><a href='#viewModels'><p>Prints the available stochastic model options</p></a></li>
<li><a href='#viewTankMetrics'><p>Prints the names of the performance metrics of the rain water tank system model</p></a></li>
<li><a href='#viewVariables'><p>Prints the names of and units of valid variables</p></a></li>
<li><a href='#writeControlFile'><p>Writes a sample <code>controlFile.json</code> file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0),GA (&ge; 3.0.2)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2 (&ge; 3.3.0), directlabels, cowplot, stats, graphics,
grDevices, utils, moments, jsonlite, progress, rcorpora,
scales, viridisLite, fields, rlang, lattice, mvtnorm, Matrix,
SoilHyP, cmaes, dfoptim, RGN,</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.8), rmarkdown (&ge; 1.18),testthat, evd</td>
</tr>
<tr>
<td>Title:</td>
<td>Systems Insights from Generation of Hydroclimatic Timeseries</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ClimateAnalytics/foreSIGHT/issues">https://github.com/ClimateAnalytics/foreSIGHT/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>A tool to create hydroclimate scenarios, stress test systems and visualize system performance in scenario-neutral climate change impact assessments. Scenario-neutral approaches 'stress-test' the performance of a modelled system by applying a wide range of plausible hydroclimate conditions (see Brown &amp; Wilby (2012) &lt;<a href="https://doi.org/10.1029%2F2012EO410001">doi:10.1029/2012EO410001</a>&gt; and Prudhomme et al. (2010) &lt;<a href="https://doi.org/10.1016%2Fj.jhydrol.2010.06.043">doi:10.1016/j.jhydrol.2010.06.043</a>&gt;). These approaches allow the identification of hydroclimatic variables that affect the vulnerability of a system to hydroclimate variation and change. This tool enables the generation of perturbed time series using a range of approaches including simple scaling of observed time series (e.g. Culley et al. (2016) &lt;<a href="https://doi.org/10.1002%2F2015WR018253">doi:10.1002/2015WR018253</a>&gt;) and stochastic simulation of perturbed time series via an inverse approach (see Guo et al. (2018) &lt;<a href="https://doi.org/10.1016%2Fj.jhydrol.2016.03.025">doi:10.1016/j.jhydrol.2016.03.025</a>&gt;). It incorporates 'Richardson-type' weather generator model configurations documented in Richardson (1981) &lt;<a href="https://doi.org/10.1029%2FWR017i001p00182">doi:10.1029/WR017i001p00182</a>&gt;, Richardson and Wright (1984), as well as latent variable type model configurations documented in Bennett et al. (2018) &lt;<a href="https://doi.org/10.1016%2Fj.jhydrol.2016.12.043">doi:10.1016/j.jhydrol.2016.12.043</a>&gt;, Rasmussen (2013) &lt;<a href="https://doi.org/10.1002%2Fwrcr.20164">doi:10.1002/wrcr.20164</a>&gt;, Bennett et al. (2019) &lt;<a href="https://doi.org/10.5194%2Fhess-23-4783-2019">doi:10.5194/hess-23-4783-2019</a>&gt; to generate hydroclimate variables on a daily basis (e.g. precipitation, temperature, potential evapotranspiration) and allows a variety of different hydroclimate variable properties, herein called attributes, to be perturbed. Options are included for the easy integration of existing system models both internally in R and externally for seamless 'stress-testing'. A suite of visualization options for the results of a scenario-neutral analysis (e.g. plotting performance spaces and overlaying climate projection information) are also included. Version 1.0 of this package is described in Bennett et al. (2021) &lt;<a href="https://doi.org/10.1016%2Fj.envsoft.2021.104999">doi:10.1016/j.envsoft.2021.104999</a>&gt;. As further developments in scenario-neutral approaches occur the tool will be updated to incorporate these advances.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-17 11:17:03 UTC; a1065639</td>
</tr>
<tr>
<td>Author:</td>
<td>Bree Bennett <a href="https://orcid.org/0000-0002-2131-088X"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Sam Culley <a href="https://orcid.org/0000-0003-4798-8522"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Anjana Devanand <a href="https://orcid.org/0000-0001-9422-3894"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  David McInerney <a href="https://orcid.org/0000-0003-4876-8281"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Seth Westra <a href="https://orcid.org/0000-0003-4023-6061"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Danlu Guo <a href="https://orcid.org/0000-0003-1083-1214"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Holger Maier <a href="https://orcid.org/0000-0002-0277-6887"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ths]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David McInerney &lt;david.mcinerney@adelaide.edu.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-19 07:00:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='barossa_obs'>
Multi-site rainfall observations in the Barossa Valley used in examples and vignette
</h2><span id='topic+barossa_obs'></span>

<h3>Description</h3>

<p>Dataset of observed rainfall for multiple sites in the Barossa Valley based on SILO point data 
</p>


<h3>Format</h3>

<p>A list of observed rainfall data with elements <em>Year Month Day P</em>. <em>P</em> is a matrix with rows corresponding to dates, and columns corresponding to 13 sites in the Barossa Valley</p>


<h3>Source</h3>

<p>SILO point rainfall data obtained from <a href="https://www.longpaddock.qld.gov.au">https://www.longpaddock.qld.gov.au</a>. Data obtained for stations <em>23300, 23302, 23305, 23309, 23312, 23313, 23317, 23318, 23321, 23363, 23373, 23752, 23756</em>
for the period 1 Jan 1972 to 31 December 1999.
</p>

<hr>
<h2 id='calculateAttributes'>Calculates the attributes of the hydroclimate time series</h2><span id='topic+calculateAttributes'></span>

<h3>Description</h3>

<p><code>calculateAttributes</code> calculates the specified attributes of the input daily hydroclimate time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calculateAttributes(climateData, attSel, startYr = NULL, endYr = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calculateAttributes_+3A_climatedata">climateData</code></td>
<td>
<p>data.frame or list; daily climate data, the attributes of which are to be calculated. <br /> 
If <code>climateData</code> is a data.frame, it must have columns named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>. 
Note that the first three columns of the data.frame contain the year, month, and day of the data. 
The columns have to be named as specified. 
Data.frame format is applicable for single site data only. <br />
If <code>climateData</code> is a list, it must have elements named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>. List format is suitable for both single and multi-site data. 
For multi-site data, climate variables are specified as matrices, with columns for each site. <br />   
Use <code>viewModels()</code> to view the valid variable names. 
Please refer to data provided with the package that may be loaded using <code>data(tankDat)</code> and <code>data(barossaDat)</code> for examples of the expected format of single site and multi-site <code>climateData</code>.</p>
</td></tr>
<tr><td><code id="calculateAttributes_+3A_attsel">attSel</code></td>
<td>
<p>a vector; specifying the names of the attributes to be calculated.</p>
</td></tr>
<tr><td><code id="calculateAttributes_+3A_startyr">startYr</code></td>
<td>
<p>a number (default <code>NULL</code>); to specify the starting year to subset <code>climateData</code> if required. 
If <code>NULL</code>, <code>startYr</code> is starting year in the input <code>climateData</code>.</p>
</td></tr>
<tr><td><code id="calculateAttributes_+3A_endyr">endYr</code></td>
<td>
<p>a number (default <code>NULL</code>); to specify the ending year to subset <code>climateData</code> if required. 
If <code>NULL</code>, <code>endYr</code> is last year in the input <code>climateData</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a vector of attributes with names of the attributes (<code>attSel</code>). 
For multi-site data, names are combinations of attribute and site names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#----------------------------------------------------------------------
# Example 1: Single-site data.frame input
# load 'tank' example climate data available in the package
data("tankDat")
# specify rainfall and temperature attributes to calculate
attSel &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
tank_obs_atts &lt;- calculateAttributes(tank_obs, attSel = attSel)
#----------------------------------------------------------------------
# Example 2: Multi-site list input
# load 'Barossa' example climate data available in the package
data("barossaDat")
# specify rainfall attributes to calculate
attSel &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_P99")
barossa_obs_atts &lt;- calculateAttributes(tank_obs, attSel = attSel)
</code></pre>

<hr>
<h2 id='climdata'>
Example climate projection data
</h2><span id='topic+climdata'></span>

<h3>Description</h3>

<p>A dataframe of climate projection data for superposition on performance spaces via plotLayers
</p>


<h3>Format</h3>

<p>climdata is a dataframe with 12 rows and 3 columns
</p>

<dl>
<dt>climdata</dt><dd><p>A dataframe of climate attributes and performance in the form <em>P_ann_tot_m Temp_ann_avg_m performance</em>.</p>
</dd>
</dl>


<hr>
<h2 id='createExpSpace'>Creates exposure space of hydroclimatic targets for generation of scenarios using 'generateScenarios'</h2><span id='topic+createExpSpace'></span>

<h3>Description</h3>

<p><code>createExpSpace</code> returns a list containing the targets (<code>targetMat</code>) and the metadata (input arguments) used to create the exposure space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createExpSpace(
  attPerturb,
  attPerturbSamp,
  attPerturbMin,
  attPerturbMax,
  attPerturbType = "regGrid",
  attPerturbBy = NULL,
  attHold = NULL,
  attTargetsFile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createExpSpace_+3A_attperturb">attPerturb</code></td>
<td>
<p>A char vector; the names of the attributes to be perturbed. 
This vector can contain attributes of different hydroclimatic variables.</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_attperturbsamp">attPerturbSamp</code></td>
<td>
<p>An integer vector; the number of samples for each attribute <code>attPerturb</code>. 
The length of this vector should be equal to the length of <code>attPerturb</code>.</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_attperturbmin">attPerturbMin</code></td>
<td>
<p>A numeric vector; the minimum bounds for sampling of <code>attPerturb</code>. 
The length of this vector should be equal to the length of <code>attPerturb</code>. 
For variables like precipitation, evapotranspiration, radiation, etc. <code>attPerturbMin</code> should specified as a fraction of the original 
(eg: 0.9 = 90% of the original attribute). For temperature, <code>attPerturbMin</code> should be specified in K (eg: 0.9 = 0.9 K).</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_attperturbmax">attPerturbMax</code></td>
<td>
<p>A numeric vector; the maximum bounds for sampling of <code>attPerturb</code>. 
The length of this vector should be equal to the length of <code>attPerturb</code>. 
For variables like precipitation, evapotranspiration, radiation, etc. <code>attPerturbMax</code> should specified as a fraction of the original 
(eg: 0.9 = 90% of the original attribute). For temperature, <code>attPerturbMax</code> should be specified in K (eg: 0.9 = 0.9 K).
Note that to create a single sample of the attribute, <code>attPerturbSamp</code> could be specified as 1 with <code>attPerturbMin</code> and <code>attPerturbMax</code> specified as equal.</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_attperturbtype">attPerturbType</code></td>
<td>
<p>A string to specify the type of sampling, defaults to regular spacing. Valid sampling types are:
</p>

<ul>
<li><p> &quot;regGrid&quot; a regular grid sampling all the attributes specified in <code>attPerturb</code> simultaneously
</p>
</li>
<li><p> &quot;OAT&quot; one-at-a-time sampling of the attributes specified in <code>attPerturb</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="createExpSpace_+3A_attperturbby">attPerturbBy</code></td>
<td>
<p>A numeric vector; increment of values to create samples between <code>attPerturbMin</code> and <code>attPerturbMax</code>.
If <code>attPerturbBy</code> is specified, attPerturbSamp should be set as <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_atthold">attHold</code></td>
<td>
<p>A char vector; the names of the attributes to be held at historical levels. 
This vector can contain attributes of different hydroclimatic variables.</p>
</td></tr>
<tr><td><code id="createExpSpace_+3A_atttargetsfile">attTargetsFile</code></td>
<td>
<p>String specifying the full path to a CSV file containing the target exposure space. 
The column names in the file should correspond to the attributes specified in <code>attPerturb</code> and <code>attHold</code>. 
<code>attTargetsFile</code> is alternate way to specify exposure space targets that do not form a regular grid. 
If <code>attTargetsFile</code> is specified, the inputs arguments <code>attPerturbSamp</code>, <code>attPerturbMin</code>, <code>attPerturbMax</code>, 
and <code>attPerturbType</code> should be set to <code>NULL</code> and will not be used by the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See &quot;Detailed Tutorial: Climate 'Stress-Testing' using *fore*SIGHT&quot; vignette for specifying attribute names for <code>attPerturb</code> and <code>attHold</code>. The definition of the attribute can be viewed using the function <code>viewAttributeDef</code>.
</p>


<h3>Value</h3>

<p>The exposure space as a list containing the following fields:
</p>

<ul>
<li> <p><code>targetMat</code> a dataframe or matrix; each column is a perturb/hold attribute, each row is a point in the exposure space.
</p>
</li>
<li> <p><code>attRot</code> a char vector containing the one-at-a-time (&quot;OAT&quot;) attributes associated with <code>targetMat</code>, <code>attRot</code> is <code>NULL</code> for other types of sampling.
</p>
</li>
<li> <p><code>attPerturb</code>, <code>attHold</code>, <code>attPerturbSamp</code>, <code>attPerturbMin</code>, <code>attPerturbMax</code>, <code>attPerturbType</code> in the  function input arguments, if not <code>NULL</code>.
</p>
</li></ul>



<h3>See Also</h3>

<p><code>generateScenarios</code>, <code>viewAttributeDef</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the definition of any valid attribute
viewAttributeDef("P_ann_tot_m")

# To create an exposure space of points on a regular grid
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m")
attPerturbType &lt;- "regGrid"
attPerturbSamp &lt;- c(3, 1, 1)
attPerturbMin &lt;- c(0.9, 1, 1)
attPerturbMax &lt;- c(1.1, 1, 1)
attHold &lt;- c("P_Feb_tot_m", "P_SON_dyWet_m", "P_JJA_avgWSD_m", 
"P_MAM_tot_m", "P_DJF_avgDSD_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
expSpace &lt;- createExpSpace(attPerturb = attPerturb, attPerturbSamp = attPerturbSamp, 
attPerturbMin = attPerturbMin, attPerturbMax = attPerturbMax, 
attPerturbType = attPerturbType, attHold = attHold, attTargetsFile = NULL)

# Using attPerturbBy to specify the increment of perturbation (attPerturbSamp set to NULL)

attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m")
attPerturbType &lt;- "regGrid"
attPerturbMin &lt;- c(0.9, 1, 1)
attPerturbMax &lt;- c(1.1, 1, 1)
attPerturbBy &lt;- c(0.1, 0, 0)
attHold &lt;- c("P_Feb_tot_m", "P_SON_dyWet_m", "P_JJA_avgWSD_m", "P_MAM_tot_m", 
"P_DJF_avgDSD_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
expSpace &lt;- createExpSpace(attPerturb = attPerturb, attPerturbSamp = NULL, 
attPerturbMin = attPerturbMin, attPerturbMax = attPerturbMax, attPerturbType = attPerturbType, 
attPerturbBy = attPerturbBy, attHold = attHold, attTargetsFile = NULL)

# To create an exposure space of observed attributes without perturbation
# Note that attPerturbMin and attPerturbMax values are set to 1 for variables like precipitation, 
# and 0 for temperature 
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m", "Temp_DJF_avg_m")
attPerturbType &lt;- "regGrid"
attPerturbSamp &lt;- c(1, 1, 1, 1)
attPerturbMin &lt;- c(1, 1, 1, 0)
attPerturbMax &lt;- c(1, 1, 1, 0)
expSpace &lt;- createExpSpace(attPerturb = attPerturb, attPerturbSamp = attPerturbSamp, 
attPerturbMin = attPerturbMin, attPerturbMax = attPerturbMax, attPerturbType = attPerturbType, 
attHold = NULL, attTargetsFile = NULL)
</code></pre>

<hr>
<h2 id='egClimData'>Climate attributes from projections.</h2><span id='topic+egClimData'></span>

<h3>Description</h3>

<p>A example dataset containing the climate attribute values
in fraction/additive change
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egClimData
</code></pre>


<h3>Format</h3>

<p>A data frame with 6 rows and 6 variables:
</p>

<dl>
<dt>P_ann_tot_m</dt><dd><p>change in mean annual total P, fraction</p>
</dd>
<dt>P_ann_seasRatio</dt><dd><p>change in seasonal ratio of P, fraction</p>
</dd>
<dt>P_ann_nWet_m</dt><dd><p>change in the number of wet days, fraction</p>
</dd>
<dt>Temp_ann_avg_m</dt><dd><p>change in average annual Temp, additive</p>
</dd>
<dt>Name</dt><dd><p>name of the climate model</p>
</dd>
<dt>Avg. Deficit</dt><dd><p>performance metric values</p>
</dd>
</dl>


<hr>
<h2 id='egMultiSiteSim'>Output from call to generateScenarios() using multi-site model (see example 5 in generateScenarios).</h2><span id='topic+egMultiSiteSim'></span>

<h3>Description</h3>

<p>Output from call to generateScenarios() using multi-site model (see example 5 in generateScenarios).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egMultiSiteSim
</code></pre>


<h3>Format</h3>

<p>A list with 4 elements
</p>

<dl>
<dt>Rep1</dt><dd><p>List containing majority of simulation output, including output for different calibration stages </p>
</dd>
<dt>simDates</dt><dd><p>the dates of the simulation</p>
</dd>
<dt>expSpace</dt><dd><p>the exposure space of the simulation</p>
</dd>
<dt>controlFile</dt><dd><p>the setting in the control file</p>
</dd>
</dl>


<hr>
<h2 id='egScalPerformance'>Performance metrics of the tank model using simple scaled scenarios.</h2><span id='topic+egScalPerformance'></span>

<h3>Description</h3>

<p>Performance metrics of the tank model using simple scaled scenarios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egScalPerformance
</code></pre>


<h3>Format</h3>

<p>A list with 2 elements
</p>

<dl>
<dt>Avg. Deficit</dt><dd><p>average daily deficit of water, litres</p>
</dd>
<dt>Reliability</dt><dd><p>reliability of the tank, fraction</p>
</dd>
</dl>


<hr>
<h2 id='egScalSummary'>Summary of a simple scaled scenario.</h2><span id='topic+egScalSummary'></span>

<h3>Description</h3>

<p>Summary generated using the function <code>getSimSummary</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egScalSummary
</code></pre>


<h3>Format</h3>

<p>A list containing 3 elements
</p>

<dl>
<dt>simDates</dt><dd><p>the dates of the simulation</p>
</dd>
<dt>expSpace</dt><dd><p>the exposure space of the simulation</p>
</dd>
<dt>controlFile</dt><dd><p>&quot;scaling&quot;</p>
</dd>
</dl>


<hr>
<h2 id='egSimOATPerformance'>Performance metrics of the tank model using OAT scenarios.</h2><span id='topic+egSimOATPerformance'></span>

<h3>Description</h3>

<p>Performance metrics of the tank model using OAT scenarios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egSimOATPerformance
</code></pre>


<h3>Format</h3>

<p>A list with 2 elements
</p>

<dl>
<dt>Avg. Deficit</dt><dd><p>average daily deficit of water, litres</p>
</dd>
<dt>Reliability</dt><dd><p>reliability of the tank, fraction</p>
</dd>
</dl>


<hr>
<h2 id='egSimOATSummary'>Summary of a OAT scenario.</h2><span id='topic+egSimOATSummary'></span>

<h3>Description</h3>

<p>Summary generated using the function <code>getSimSummary</code> for
a scenarios generated using stochastic models for an OAT exposure space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egSimOATSummary
</code></pre>


<h3>Format</h3>

<p>A list containing 13 elements
</p>

<hr>
<h2 id='egSimPerformance'>Performance metrics of the tank model using regGrid scenarios.</h2><span id='topic+egSimPerformance'></span>

<h3>Description</h3>

<p>Performance metrics of the tank model using regGrid scenarios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egSimPerformance
</code></pre>


<h3>Format</h3>

<p>A list with 2 elements
</p>

<dl>
<dt>Avg. Deficit</dt><dd><p>average daily deficit of water, litres</p>
</dd>
<dt>Reliability</dt><dd><p>reliability of the tank, fraction</p>
</dd>
</dl>


<hr>
<h2 id='egSimPerformance_systemB'>Performance metrics of an alternate tank model using regGrid scenarios.</h2><span id='topic+egSimPerformance_systemB'></span>

<h3>Description</h3>

<p>Performance metrics of an alternate tank model using regGrid scenarios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egSimPerformance_systemB
</code></pre>


<h3>Format</h3>

<p>A list with 2 elements
</p>

<dl>
<dt>Avg. Deficit</dt><dd><p>average daily deficit of water, litres</p>
</dd>
<dt>Reliability</dt><dd><p>reliability of the tank, fraction</p>
</dd>
</dl>


<hr>
<h2 id='egSimSummary'>Summary of a regGrid scenario.</h2><span id='topic+egSimSummary'></span>

<h3>Description</h3>

<p>Summary generated using the function <code>getSimSummary</code> for
a scenarios generated using stochastic models for a regGrid exposure space
</p>


<h3>Usage</h3>

<pre><code class='language-R'>egSimSummary
</code></pre>


<h3>Format</h3>

<p>A list containing 13 elements
</p>

<hr>
<h2 id='foreSIGHT'>foreSIGHT: A package for Systems Insights from Generation of Hydroclimatic Timeseries</h2><span id='topic+foreSIGHT'></span>

<h3>Description</h3>

<p>A tool to create hydroclimate scenarios, stress test systems and visualize
system performance in scenario-neutral climate change impact assessments.
</p>

<hr>
<h2 id='func_avg'>Calculates average of time series</h2><span id='topic+func_avg'></span>

<h3>Description</h3>

<p>Calculates average of time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_avg(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_avg_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_avgDSD'>Calculates average dry spell duration (below threshold)</h2><span id='topic+func_avgDSD'></span>

<h3>Description</h3>

<p>Calculates average dry spell duration (below threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_avgDSD(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_avgDSD_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_avgDSD_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_avgWSD'>Calculates average wet spell duration (below threshold)</h2><span id='topic+func_avgWSD'></span>

<h3>Description</h3>

<p>Calculates average wet spell duration (below threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_avgWSD(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_avgWSD_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_avgWSD_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_CSL'>Calculates the cold season length</h2><span id='topic+func_CSL'></span>

<h3>Description</h3>

<p>Calculates the cold season length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_CSL(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_CSL_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_dyWet'>Calculates average rainfall on wet days (above threshold)</h2><span id='topic+func_dyWet'></span>

<h3>Description</h3>

<p>Calculates average rainfall on wet days (above threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_dyWet(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_dyWet_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_dyWet_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_F0'>Calculates the number of frost days</h2><span id='topic+func_F0'></span>

<h3>Description</h3>

<p>Calculates the number of frost days
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_F0(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_F0_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_GSL'>Calculates the growing season length</h2><span id='topic+func_GSL'></span>

<h3>Description</h3>

<p>Calculates the growing season length
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_GSL(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_GSL_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_maxDSD'>Calculates maximum dry spell duration (below threshold)</h2><span id='topic+func_maxDSD'></span>

<h3>Description</h3>

<p>Calculates maximum dry spell duration (below threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_maxDSD(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_maxDSD_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_maxDSD_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_maxWSD'>Calculates maximum wet spell duration (above threshold)</h2><span id='topic+func_maxWSD'></span>

<h3>Description</h3>

<p>Calculates maximum wet spell duration (above threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_maxWSD(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_maxWSD_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_maxWSD_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_nWet'>Calculates number of wet days (above threshold)</h2><span id='topic+func_nWet'></span>

<h3>Description</h3>

<p>Calculates number of wet days (above threshold)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_nWet(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_nWet_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_nWet_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_P'>Calculates a quantile value</h2><span id='topic+func_P'></span>

<h3>Description</h3>

<p>Calculates a quantile value
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_P(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_P_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_P_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$quant denoting the probability of the quantile</p>
</td></tr>
</table>

<hr>
<h2 id='func_R'>Calculates the number of days above a threshold (often used for temperature)</h2><span id='topic+func_R'></span>

<h3>Description</h3>

<p>Calculates the number of days above a threshold (often used for temperature)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_R(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_R_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_R_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$threshold denoting the threshold</p>
</td></tr>
</table>

<hr>
<h2 id='func_rng'>Calculates the inter-quantile range</h2><span id='topic+func_rng'></span>

<h3>Description</h3>

<p>Calculates the inter-quantile range
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_rng(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_rng_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_rng_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$lim denoting the probability limit width</p>
</td></tr>
</table>

<hr>
<h2 id='func_seasRatio'>Calculates seasonality ratio</h2><span id='topic+func_seasRatio'></span>

<h3>Description</h3>

<p>Calculates seasonality ratio
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_seasRatio(data, attArgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_seasRatio_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_seasRatio_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$indexWet corresponding to wet season and attArgs$indexDry dry season</p>
</td></tr>
</table>

<hr>
<h2 id='func_tot'>Calculates total of time series</h2><span id='topic+func_tot'></span>

<h3>Description</h3>

<p>Calculates total of time series
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_tot(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_tot_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_wettest6monPeakDay'>Calculates the day of year corresponding to the wettest 6 months</h2><span id='topic+func_wettest6monPeakDay'></span>

<h3>Description</h3>

<p>Calculates the day of year corresponding to the wettest 6 months
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_wettest6monPeakDay(data, attArgs = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_wettest6monPeakDay_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_wettest6monPeakDay_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$doy denoting the day of year for each value in the time series</p>
</td></tr>
</table>

<hr>
<h2 id='func_wettest6monSeasRatio'>Calculates the ratio of wet season to dry season rainfall, based on wettest6monPeakDay</h2><span id='topic+func_wettest6monSeasRatio'></span>

<h3>Description</h3>

<p>Calculates the ratio of wet season to dry season rainfall, based on wettest6monPeakDay
</p>


<h3>Usage</h3>

<pre><code class='language-R'>func_wettest6monSeasRatio(data, attArgs = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="func_wettest6monSeasRatio_+3A_data">data</code></td>
<td>
<p>is a vector, representing a time series</p>
</td></tr>
<tr><td><code id="func_wettest6monSeasRatio_+3A_attargs">attArgs</code></td>
<td>
<p>is a list, with attArgs$doy denoting the day of year for each value in the time series</p>
</td></tr>
</table>

<hr>
<h2 id='generateScenario'>Produces time series of hydroclimatic variables for an exposure target.</h2><span id='topic+generateScenario'></span>

<h3>Description</h3>

<p><code>generateScenario</code> is the base function used by <code>generateScenarios</code>.
The function produces time series of hydroclimatic variables using requested climate attributes that correspond to a single target in the exposure space.
The function argument definitions are detailed in the documentation of <code>generateScenarios</code>; please refer to that documentation using <code>?generateScenarios</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateScenario(
  reference,
  expTarg,
  simLengthNyrs = NULL,
  seedID = NULL,
  controlFile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateScenario_+3A_reference">reference</code></td>
<td>
<p>data.frame or list; contains reference daily climate data. <br />
For single site data, <code>reference</code> is a data.frame with columns named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>.
Note that the first three columns of the data.frame contain the year, month, and day of the data.
The columns have to be named as specified.
For multi-site data, <code>reference</code> is a list, with elements named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>. List format is suitable for both single and multi-site data.
Climate variables are specified as matrices, with columns for each site. <br />
Use <code>viewModels()</code> to view the valid variable names.
Please refer to data provided with the package that may be loaded using <code>data(tankDat)</code> and <code>data(barossaDat)</code> for examples of the expected format of single site and multi-site <code>reference</code>.</p>
</td></tr>
<tr><td><code id="generateScenario_+3A_exptarg">expTarg</code></td>
<td>
<p>a named vector; the attributes at the target location in the exposure space
<code>generateScenario</code> is intended to be used to adapt the functionality of <code>generateScenarios</code> for use in a parallel computing environment.</p>
</td></tr>
<tr><td><code id="generateScenario_+3A_simlengthnyrs">simLengthNyrs</code></td>
<td>
<p>a number; a scalar that specifies the length in years of each generated scenario. This argument is used only with stochastic generation.
If <code>NULL</code> (the default), the generated simulation will be as long as <code>reference</code>.</p>
</td></tr>
<tr><td><code id="generateScenario_+3A_seedid">seedID</code></td>
<td>
<p>a number; a scalar that specifies the seed to be used for the first replicate. Subsequent replicates will use seeds incremented by one.
If <code>seedID</code> is <code>NULL</code> (which is the default), the function will use a random seed for stochastic time series generation.
The seed used will be specified in the output. This argument is intended for use in cases that aim to reproduce an existing simulation.</p>
</td></tr>
<tr><td><code id="generateScenario_+3A_controlfile">controlFile</code></td>
<td>
<p>a string; to specify the model/optimisation options used for simulating time series data. The valid values are:
</p>

<ul>
<li> <p><code>NULL</code>: the simulation uses the foreSIGHT default stochastic model settings.
</p>
</li>
<li> <p><code>"scaling"</code>: the simulation uses scaling (simple/seasonal) instead of a stochastic model.
If all attributes in <em>expSpace</em> are annual totals/averages, then simple scaling is used.
If seasonality ratio attributes are also included in <em>expSpace</em>, then seasonal scaling is used.
</p>
</li>
<li> <p><code>path to a JSON file</code>: the JSON file contains advanced options specify the stochastic model and optimisation inputs.
These options can be used to change stochastic model types, overwrite default model parameter bounds, change default optimisation arguments, and set penalty attributes to be used in optimisation.
Please refer to the function <code>writeControlFile</code> in order to create an <code>controlFile</code> JSON file.
</p>
</li></ul>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>generateScenarios</code>
</p>

<hr>
<h2 id='generateScenarios'>Produces time series of hydroclimatic variables for an exposure space.</h2><span id='topic+generateScenarios'></span>

<h3>Description</h3>

<p><code>generateScenarios</code> produces time series of hydroclimatic variables using requested climate attributes that correspond to a target exposure space using a reference daily time series as an input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateScenarios(
  reference,
  expSpace,
  simLengthNyrs = NULL,
  numReplicates = 1,
  seedID = NULL,
  controlFile = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateScenarios_+3A_reference">reference</code></td>
<td>
<p>data.frame or list; contains reference daily climate data. <br />
For single site data, <code>reference</code> is a data.frame with columns named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>.
Note that the first three columns of the data.frame contain the year, month, and day of the data.
The columns have to be named as specified.
For multi-site data, <code>reference</code> is a list, with elements named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>. List format is suitable for both single and multi-site data.
Climate variables are specified as matrices, with columns for each site. <br />
Use <code>viewModels()</code> to view the valid variable names.
Please refer to data provided with the package that may be loaded using <code>data(tankDat)</code> and <code>data(barossaDat)</code> for examples of the expected format of single site and multi-site <code>reference</code>.</p>
</td></tr>
<tr><td><code id="generateScenarios_+3A_expspace">expSpace</code></td>
<td>
<p>a list; created using the function <code>createExpSpace</code></p>
</td></tr>
<tr><td><code id="generateScenarios_+3A_simlengthnyrs">simLengthNyrs</code></td>
<td>
<p>a number; a scalar that specifies the length in years of each generated scenario. This argument is used only with stochastic generation.
If <code>NULL</code> (the default), the generated simulation will be as long as <code>reference</code>.</p>
</td></tr>
<tr><td><code id="generateScenarios_+3A_numreplicates">numReplicates</code></td>
<td>
<p>a number; a scalar that specific the number of stochastic replicates to be generated. The default is 1.</p>
</td></tr>
<tr><td><code id="generateScenarios_+3A_seedid">seedID</code></td>
<td>
<p>a number; a scalar that specifies the seed to be used for the first replicate. Subsequent replicates will use seeds incremented by one.
If <code>seedID</code> is <code>NULL</code> (which is the default), the function will use a random seed for stochastic time series generation.
The seed used will be specified in the output. This argument is intended for use in cases that aim to reproduce an existing simulation.</p>
</td></tr>
<tr><td><code id="generateScenarios_+3A_controlfile">controlFile</code></td>
<td>
<p>a string; to specify the model/optimisation options used for simulating time series data. The valid values are:
</p>

<ul>
<li> <p><code>NULL</code>: the simulation uses the foreSIGHT default stochastic model settings.
</p>
</li>
<li> <p><code>"scaling"</code>: the simulation uses scaling (simple/seasonal) instead of a stochastic model.
If all attributes in <em>expSpace</em> are annual totals/averages, then simple scaling is used.
If seasonality ratio attributes are also included in <em>expSpace</em>, then seasonal scaling is used.
</p>
</li>
<li> <p><code>path to a JSON file</code>: the JSON file contains advanced options specify the stochastic model and optimisation inputs.
These options can be used to change stochastic model types, overwrite default model parameter bounds, change default optimisation arguments, and set penalty attributes to be used in optimisation.
Please refer to the function <code>writeControlFile</code> in order to create an <code>controlFile</code> JSON file.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list containing the time series data generated. The list can contain multiple replicates (named as <code>Rep1</code>, <code>Rep2</code> etc.) equal to the <code>numReplicates</code> function argument.
Each replicate can contain multiple targets (named as <code>Target1</code>, <code>Target2</code> etc.) based on the specified exposure space (<code>expSpace</code>). The <code>expSpace</code> and <code>controlFile</code> are also returned as part of this output list.
</p>


<h3>See Also</h3>

<p><code>createExpSpace</code>, <code>writeControlFile</code>, <code>viewModels</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: Simple scaling
#-----------------------------------------------------------------------
attPerturb&lt;-c("P_ann_tot_m","Temp_ann_avg_m")
attPerturbType = "regGrid"
attPerturbSamp = c(2, 2)
attPerturbMin = c(0.8, -1)
attPerturbMax = c(1.1, 1)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType)
data(tankDat)
simScaling &lt;- generateScenarios(reference = tank_obs,
                                expSpace = expSpace,
                                controlFile = "scaling")

# Example 2: Seasonal scaling
#-----------------------------------------------------------------------
attPerturb&lt;-c("P_ann_tot_m","P_ann_seasRatio")
attPerturbType = "regGrid"
attPerturbSamp = c(2, 2)
attPerturbMin = c(0.8, 0.9)
attPerturbMax = c(1.1, 1.2)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType)
data(tankDat)
seasScaling &lt;- generateScenarios(reference = tank_obs,
                                expSpace = expSpace,
                                controlFile = "scaling")

# Example 3: Stochastic simulation using foreSIGHT default settings
#----------------------------------------------------------------------
## Not run: 
# create an exposure space
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m")
attHold &lt;- c("P_Feb_tot_m", "P_SON_dyWet_m", "P_JJA_avgWSD_m", "P_MAM_tot_m",
"P_DJF_avgDSD_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
attPerturbType = "regGrid"
attPerturbSamp = c(2, 1, 1)
attPerturbMin = c(0.8, 1, 1)
attPerturbMax = c(1.1, 1, 1)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType,
                           attHold = attHold,
                           attTargetsFile = NULL)
# load example data available in foreSIGHT
data(tankDat)
# perform stochastic simulation
simStochastic &lt;- generateScenarios(reference = tank_obs,
                                   expSpace = expSpace,
                                   simLengthNyrs = 30)
                                   
## End(Not run)
# Example 4: Simple Scaling with multi-site data
#-----------------------------------------------------------------------
attPerturb &lt;- c("P_ann_tot_m","P_ann_seasRatio")
attPerturbType = "regGrid"
attPerturbSamp = c(3, 3)
attPerturbMin = c(0.8, 1.2)
attPerturbMax = c(0.8, 1.2)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType)
# load multi-site rainfall data
data(barossaDat)
# perform simple scaling
simScaling &lt;- generateScenarios(reference = barossa_obs,
                                expSpace = expSpace,
                                controlFile = "scaling")

# Example 5: Multi-site stochastic simulation
#-----------------------------------------------------------------------
## Not run: 
attPerturb &lt;- c("P_ann_tot_m")
attHold &lt;- c("P_ann_wettest6monSeasRatio","P_ann_wettest6monPeakDay",
"P_ann_P99","P_ann_avgWSD_m", "P_ann_nWetT0.999_m")
attPerturbType = "regGrid"
# consider unperturbed climates in this example
attPerturbSamp = attPerturbMin = attPerturbMax = c(1)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType,
                           attHold = attHold)
# load multi-site rainfall data
data(barossaDat)
# specify the penalty settings in a list
controlFileList &lt;- list()
controlFileList[["penaltyAttributes"]] &lt;- c("P_ann_tot_m",
"P_ann_wettest6monSeasRatio","P_ann_wettest6monPeakDay")
controlFileList[["penaltyWeights"]] &lt;- c(0.5,0.5,0.5)
# specify the alternate model selections
controlFileList[["modelType"]] &lt;- list()
controlFileList[["modelType"]][["P"]] &lt;- "latent"
# specify model parameter selection
controlFileList[["modelParameterVariation"]] &lt;- list()
controlFileList[["modelParameterVariation"]][["P"]] &lt;- "harmonic"
# specify settings for multi-site model
controlFileList[["spatialOptions"]] &lt;- list()
# specify spatial correlation perturbation factor
controlFileList[["spatialOptions"]][["spatCorFac"]] = 0.9
# write control file sttings to file
controlFileJSON &lt;- jsonlite::toJSON(controlFileList, pretty = TRUE, auto_unbox = TRUE)
write(controlFileJSON, file = paste0(tempdir(), "controlFile.json"))
# run multi-site stochastic simulation - this will take a long time (e.g. hours)
sim &lt;- generateScenarios(reference = barossa_obs, expSpace = expSpace,
                         controlFile = paste0(tempdir(), "controlFile.json"),seed=1)
## End(Not run)
</code></pre>

<hr>
<h2 id='getSimSummary'>Produces a summary object containing the metadata of a full simulation</h2><span id='topic+getSimSummary'></span>

<h3>Description</h3>

<p><code>getSimSummary</code> uses a full simulation generated using the function <code>generateScenarios</code> as input and outputs a summary object containing the
metadata of the full simulation. The output summary object may be used as an input to the plotting functions in this package. The output summary object
will be much smaller in size than the full simulation for ease of storage and use with the plotting functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSimSummary(sim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSimSummary_+3A_sim">sim</code></td>
<td>
<p>list; a simulation containing the scenarios generated using the function <code>generateScenarios</code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>generateScenarios</code>, <code>plotPerformanceSpace</code>, <code>plotPerformanceOAT</code>
</p>

<hr>
<h2 id='modCalibrator'>modCalibrator</h2><span id='topic+modCalibrator'></span>

<h3>Description</h3>

<p>Calibrates weather generator models specified using modelTag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modCalibrator(obs = NULL, modelTag = NULL, window = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modCalibrator_+3A_obs">obs</code></td>
<td>
<p>A dataframe of observed climate data in the form <em>Year Month
Day P Temp</em>.</p>
</td></tr>
<tr><td><code id="modCalibrator_+3A_modeltag">modelTag</code></td>
<td>
<p>A character vector of which stochastic models to use to
create each climate variable. Supported tags are shown in under details
below.</p>
</td></tr>
<tr><td><code id="modCalibrator_+3A_window">window</code></td>
<td>
<p>moving average window to calibrate daily gamma parameters for
the modelTag <code>"P-har-WGEN"</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>modelTag provides the main function with requested models. modelTag is
vector of any of the following supported models:
</p>

<ul>
<li> <p><code>"P-ann-wgen"</code> a four parameter annual rainfall model
</p>
</li>
<li> <p><code>"P-seas-wgen"</code> a 16 parameter seasonal rainfall model
(phase angles must be specified via modelInfoMod=list(&quot;P-har12-wgen-FS&quot;=fixedPars=c(x,x,x,x))
</p>
</li>
<li> <p><code>"P-har-wgen"</code> a harmonic rainfall model
</p>
</li>
<li> <p><code>"Temp-har-wgen"</code> a harmonic temperature model not conditional on rainfall
</p>
</li>
<li> <p><code>"Temp-har-wgen-wd"</code> a harmonic temperature model dependent on wet or
dry day
</p>
</li>
<li> <p><code>"Temp-har-wgen-wdsd"</code> a harmonic temperature model
where standard deviation parameters are dependent on wet or dry day
</p>
</li>
<li> <p><code>"PET-har-wgen"</code>a harmonic potential evapotranspiration model
</p>
</li>
<li> <p><code>"PET-har-wgen-wd"</code> a harmonic potential evapotranspiration model
dependent on wet or dry day
</p>
</li>
<li> <p><code>"Radn-har-wgen"</code> a harmonic solar radiation model (MJ/m2) </p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
data(tankDat)                               #Load tank data (tank_obs)
modelTag=c("P-ann-wgen","Temp-har-wgen")  #Select a rainfall and a temperature generator
out&lt;- modCalibrator(obs = tank_obs,         #Calibrate models
                    modelTag = modelTag)
</code></pre>

<hr>
<h2 id='modSimulator'>modSimulator</h2><span id='topic+modSimulator'></span>

<h3>Description</h3>

<p>Simulates using weather generator models specified using modelTag.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>modSimulator(
  datStart = NULL,
  datFinish = NULL,
  modelTag = NULL,
  parS = NULL,
  seed = NULL,
  file = NULL,
  IOmode = "suppress"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="modSimulator_+3A_datstart">datStart</code></td>
<td>
<p>A date string in an accepted date format e.g.
<em>&quot;01-10-1990&quot;</em>.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_datfinish">datFinish</code></td>
<td>
<p>A date string in an accepted date format e.g.
<em>&quot;01-10-1990&quot;</em>. Must occur after datStart.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_modeltag">modelTag</code></td>
<td>
<p>A character vector of which stochastic models to use to
create each climate variable. Supported tags are shown in details below.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_pars">parS</code></td>
<td>
<p>A list (names must match supplied modelTags) containing numeric
vectors of model parameters.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_seed">seed</code></td>
<td>
<p>Numeric. Seed value supplied to weather generator.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_file">file</code></td>
<td>
<p>Character. Specifies filename for simulation output.</p>
</td></tr>
<tr><td><code id="modSimulator_+3A_iomode">IOmode</code></td>
<td>
<p>A string that specifies the input-output mode for the time
series = &quot;verbose&quot;, &quot;dev&quot; or &quot;suppress&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>modelTag provides the main function with requested models. modelTag is
vector of any of the following supported models:
</p>

<ul>
<li> <p><code>"P-ann-wgen"</code> a four parameter annual rainfall model
</p>
</li>
<li> <p><code>"P-seas-wgen"</code> a 16 parameter seasonal rainfall model
(phase angles must be specified via modelInfoMod=list(&quot;P-har12-wgen-FS&quot;=fixedPars=c(x,x,x,x))
</p>
</li>
<li> <p><code>"P-har-wgen"</code> a harmonic rainfall model
</p>
</li>
<li> <p><code>"Temp-har-wgen"</code> a harmonic temperature model not conditional on rainfall
</p>
</li>
<li> <p><code>"Temp-har-wgen-wd"</code> a harmonic temperature model dependent on wet or
dry day
</p>
</li>
<li> <p><code>"Temp-har-wgen-wdsd"</code> a harmonic temperature model
where standard deviation parameters are dependent on wet or dry day
</p>
</li>
<li> <p><code>"PET-har-wgen"</code>a harmonic potential evapotranspiration model
</p>
</li>
<li> <p><code>"PET-har-wgen-wd"</code> a harmonic potential evapotranspiration model
dependent on wet or dry day
</p>
</li>
<li> <p><code>"Radn-har-wgen"</code> a harmonic solar radiation model (MJ/m2) </p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
data(tankDat); obs=tank_obs                     #Get observed data
modelTag=c("P-har-wgen","Temp-har-wgen")    #Select models
pars=modCalibrator(obs=obs,modelTag=modelTag)   #Calibrate models
sim=modSimulator(datStart="1970-01-01",         #Simulate!
                 datFinish="1999-12-31",
                 modelTag=modelTag,
                 parS=pars,
                 seed=123,
                 file=paste0("tester.csv"),
                 IOmode="verbose")
plot(sim$P[1:365])                             #Plot first year of rainfall

## End(Not run)
</code></pre>

<hr>
<h2 id='plotExpSpace'>Plots the location of points in a two-dimensional exposure space</h2><span id='topic+plotExpSpace'></span>

<h3>Description</h3>

<p>The function uses an exposure space created using the function <code>createExpSpace</code> as input and creates a plot of the 
two dimensional (2D) exposure space. <code>plotExpSpace</code> plots only 2D spaces consisting of samples of 2 attributes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotExpSpace(
  expSpace,
  y = expSpace[["attPerturb"]][1],
  x = expSpace[["attPerturb"]][2]
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotExpSpace_+3A_expspace">expSpace</code></td>
<td>
<p>list; an exposure space created using the function <code>createExpSpace</code></p>
</td></tr>
<tr><td><code id="plotExpSpace_+3A_y">y</code></td>
<td>
<p>a string; tag of a perturbed attribute to plot on the y-axis. Defaults to <code>expSpace[["attPerturb"]][1]</code>.</p>
</td></tr>
<tr><td><code id="plotExpSpace_+3A_x">x</code></td>
<td>
<p>a string; tag of a perturbed attribute to plot on the x-axis. Defaults to <code>expSpace[["attPerturb"]][2]</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The number of dimensions of an exposure space is equal to the number of perturbed attributes in that space. If the
exposure space has more than 2 dimensions (perturbed attributes), this function can be used to plot 2D slices of the space.
Note that the default arguments of this function is defined to plot a slice showing the first two dimensions of the space, 
arguments <code>x</code> and <code>y</code> may be specified to plot alternate dimensions.
</p>


<h3>See Also</h3>

<p><code>createExpSpace</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create an exposure space that has more than 2 dimensions
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_Feb_tot_m")
attHold &lt;- c("P_SON_dyWet_m", "P_JJA_avgWSD_m", "P_MAM_tot_m", "P_DJF_avgDSD_m", 
"Temp_ann_rng_m", "Temp_ann_avg_m")
attPerturbType = "regGrid"
attPerturbSamp = c(5, 5, 5)
attPerturbMin = c(0.8, 0.9, 0.85)
attPerturbMax = c(1, 1.1, 1.05)
expSpace &lt;- createExpSpace(attPerturb = attPerturb, 
                           attPerturbSamp = attPerturbSamp, 
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType,
                           attHold = attHold,
                           attTargetsFile = NULL)
# plot the first two dimensions
plotExpSpace(expSpace)
# plot another slice
plotExpSpace(expSpace, y = "P_ann_tot_m", x = "P_Feb_tot_m")
</code></pre>

<hr>
<h2 id='plotMultiSiteScenarios'>Creates summary plots of the biases in the multi-site scenarios</h2><span id='topic+plotMultiSiteScenarios'></span>

<h3>Description</h3>

<p><code>plotMultiSiteScenarios</code> uses a multi-site simulation performed using the function <code>generateScenarios</code> as input, 
and creates heatmaps that show biases in simulated attributes and spatial correlation. 
The function creates heatmaps (for each replicate and target) that show:
</p>

<ul>
<li><p>magnitude of biases in single site attributes
</p>
</li>
<li><p>magnitude of biases in catchment total attributes
</p>
</li>
<li><p>biases in spatial correlation
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>plotMultiSiteScenarios(
  reference,
  sim,
  attSel = NULL,
  targets = 1,
  reps = 1,
  stages = c("Stage1", "Stage2", "Stage3")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotMultiSiteScenarios_+3A_reference">reference</code></td>
<td>
<p>list; contains reference daily climate data, with elements named <em>year</em>, <em>month</em>, <em>day</em>, <em>*variable_name1*</em>, <em>*variable_name2*</em>. List format is suitable for both single and multi-site data. 
Climate variables are specified as matrices, with columns for each site. <br />   
Please refer to data provided with the package that may be loaded using <code>data(barossaDat)</code> for examples of the expected format of multi-site <code>reference</code>.</p>
</td></tr>
<tr><td><code id="plotMultiSiteScenarios_+3A_sim">sim</code></td>
<td>
<p>a list; contains a multi-site stochastic simulation created using the function <code>generateScenarios</code></p>
</td></tr>
<tr><td><code id="plotMultiSiteScenarios_+3A_attsel">attSel</code></td>
<td>
<p>a vector; contains names of selected attributes to be evaluated</p>
</td></tr>
<tr><td><code id="plotMultiSiteScenarios_+3A_targets">targets</code></td>
<td>
<p>a vector; contains set of targets in exposure space to be evaluated</p>
</td></tr>
<tr><td><code id="plotMultiSiteScenarios_+3A_reps">reps</code></td>
<td>
<p>a vector; contains replicates of stochastic simulation to be evaluated</p>
</td></tr>
<tr><td><code id="plotMultiSiteScenarios_+3A_stages">stages</code></td>
<td>
<p>a vector; contains names of approaches used to generate multi-site stochastic simulations ('Stage3' is recommended approach, while 'Stage1' and 'Stage2' show intermediate results)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns three R plots for each target and replicate showing the biases in single site attributes, catchment average attributes, and spatial correlations.
</p>


<h3>See Also</h3>

<p><code>generateScenarios</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data from multi-site simulation
data(egMultiSiteSim)
# plot performance of simulated time series in terms of single site 
# and catchment attributes, and correlation between sites
## Not run: 
plotMultiSiteScenarios(reference=barossa_obs,sim=egMultiSiteSim)

## End(Not run)
</code></pre>

<hr>
<h2 id='plotOptions'>Plots the differences in performance metrics from two system options</h2><span id='topic+plotOptions'></span>

<h3>Description</h3>

<p><code>plotOptions</code> uses the system model performances calculated using the function <code>runSystemModel</code> for two alternate system model options,
and the summary of the simulation generated using the functions <code>generateScenarios</code> &amp; <code>getSimSummary</code> as input. The function plots the differences in 
the performance metrics between the two options, and the changes in performance thresholds in the space. 
The user may specify the attributes to be used as the axes of the plot. The function contains arguments to control the finer details of the plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotOptions(
  performanceOpt1,
  performanceOpt2,
  sim,
  metric = NULL,
  attX = NULL,
  attY = NULL,
  topReps = NULL,
  opt1Label = "Option 1",
  opt2Label = "Option 2",
  titleText = paste0(opt2Label, " - ", opt1Label),
  perfThresh = NULL,
  perfThreshLabel = "Threshold",
  attSlices = NULL,
  climData = NULL,
  colMap = NULL,
  colLim = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotOptions_+3A_performanceopt1">performanceOpt1</code></td>
<td>
<p>a named list; contains the system model performance calculated using <code>runSystemModel</code> for system model option 1. 
If the list contains more than one performance metric, the argument <code>metric</code> can be used to specify the metric to be used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_performanceopt2">performanceOpt2</code></td>
<td>
<p>a named list; contains the system model performance calculated using <code>runSystemModel</code> for system model option 2. 
If the list contains more than one performance metric, the argument <code>metric</code> can be used to specify the metric to be used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_sim">sim</code></td>
<td>
<p>a list; summary of the simulation containing the scenarios generated using the function <code>generateScenarios</code> that is used to run the system model using <code>runSystemModel</code>.
The summary of the simulation may be obtained by using the function <code>getSimSummary</code> on the full simulation. The summary object is much smaller in size for ease of storage and use with the performance
plotting functions like <code>plotPerformanceSpace</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_metric">metric</code></td>
<td>
<p>a string; the name of the performance metric to be plotted. The argument can be used to select the metric from 
<code>performanceOpt1</code> and <code>performanceOpt2</code> lists for plotting. If <code>NULL</code> (the default), the first metric in the lists will be used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_attx">attX</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the xaxis. The attribute must be one of the perturbed attributes of <code>sim</code>.
Type <code>sim$expSpace$attPerturb</code> to view all perturbed attributes of <code>sim</code>. If <code>NULL</code> (default), the first perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_atty">attY</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the yaxis. The attribute must be another perturbed attribute of <code>sim</code>.
If <code>NULL</code>, the second perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_topreps">topReps</code></td>
<td>
<p>an integer (default is <code>NULL</code>); the number of &quot;top&quot; replicates in terms of simulation fitness to be used. If <code>topReps</code> is specified, <code>topReps</code>
number of replicates will be identified for each target and the average performance across these replicates will be plotted. If <code>NULL</code>, the average performance across all the replicates will be plotted.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_opt1label">opt1Label</code></td>
<td>
<p>a string; the text to label <code>performanceOpt1</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_opt2label">opt2Label</code></td>
<td>
<p>a string; the text to label <code>performanceOpt2</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_titletext">titleText</code></td>
<td>
<p>a string; text for the title of the plot. The default is <code>paste0(opt2Label, " - ", opt1Label)</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_perfthresh">perfThresh</code></td>
<td>
<p>a number; the minimum or maximum threshold value of the performance metric. A line will be drawn to mark this threshold value in the performance space.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_perfthreshlabel">perfThreshLabel</code></td>
<td>
<p>a string; the text to label <code>perfThresh</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_attslices">attSlices</code></td>
<td>
<p>a list; used to subset perturbed attributes in <code>sim</code> for the plot. This argument would typically be used in cases where there are more than two perturbed attributes.
The elements of the list correspond to the perturbed attributes to be subsetted and must be named using the attribute tag. Each element may contain a single value or a two-element vector specifying the minimum-maximum values.
If the element is a single value, the exposure space is sliced on this single value of the attribute. If minimum-maximum values are specified, the exposure space will be sliced to subset this range.
If <code>attSlices</code> includes <code>attX</code> or <code>attY</code>, these attributes will be sliced and the resulting plot will be a &quot;zoomed-in&quot; space.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_climdata">climData</code></td>
<td>
<p>data.frame; the values of attX and attY from other sources like climate models. This data will be plotted as points in the performance space.
The data frame may contain columns with values of the performance metric to be plotted and the &quot;Name&quot; of the dataset.
If the performance metric is available in the data.frame, the points will be coloured based on the performance <code>colMap</code> scale.
If the <code>Name</code> of the data is available in the data.frame, the points will be identified using the <code>Name</code>.
Please refer data provided with the package that may be loaded using <code>data("egClimData")</code> for an example of the expected format of <code>climData</code>.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_colmap">colMap</code></td>
<td>
<p>a vector of colours; to specify the colourmap to be used. If <code>NULL</code>, the default foreSIGHT colourmap is used.</p>
</td></tr>
<tr><td><code id="plotOptions_+3A_collim">colLim</code></td>
<td>
<p>a vector of 2 values; the minimum and maximum limits of the colour scale.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The plot of the differences in the performance metrics (option 2 - option 1) in a ggplot object.
</p>


<h3>See Also</h3>

<p><code>runSystemModel</code>, <code>plotPerformanceSpace</code>, <code>generateScenarios</code>, <code>getSimSummary</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load example datasets
data("egSimSummary")
data("egSimPerformance")       # performance of option1
data("egSimPerformance_systemB")  # performance of option2
data("egClimData")
plotOptions(egSimPerformance[1], egSimPerformance_systemB [1], egSimSummary, 
attX = "P_ann_seasRatio", attY = "P_ann_tot_m", topReps = 7, perfThreshLabel = "Threshold (28L)",
perfThresh = 28,  opt1Label = "System A", opt2Label = "System B", climData = egClimData)
</code></pre>

<hr>
<h2 id='plotPerformanceOAT'>Plots performance for one-at-a-time (OAT) perturbations in attributes</h2><span id='topic+plotPerformanceOAT'></span>

<h3>Description</h3>

<p><code>plotPerformanceOAT</code> uses the system model performance calculated using the function <code>runSystemModel</code> and 
the summary of the simulation generated using the function <code>generateScenarios</code> &amp; <code>getSimSummary</code> as input.
The function creates line plots, each panel shows the variations in performance with perturbations in a single attribute. The function is intended for 
use with simulations with attributes perturbed on a one-at-a-time (OAT) grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPerformanceOAT(
  performance,
  sim,
  metric = NULL,
  topReps = NULL,
  col = NULL,
  ylim = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotPerformanceOAT_+3A_performance">performance</code></td>
<td>
<p>a named list; contains the system model performance calculated using <code>runSystemModel</code>. 
If the list contains more than one performance metric, the first metric will be plotted.</p>
</td></tr>
<tr><td><code id="plotPerformanceOAT_+3A_sim">sim</code></td>
<td>
<p>a list; a summary of a simulation containing the scenarios generated using the function <code>generateScenarios</code> that is used to run the system model using <code>runSystemModel</code>.
The summary may be obtained using the function <code>getSimSummary</code></p>
</td></tr>
<tr><td><code id="plotPerformanceOAT_+3A_metric">metric</code></td>
<td>
<p>a string; the name of the performance metric to be plotted. The argument can be used to select a metric from performance for plotting.</p>
</td></tr>
<tr><td><code id="plotPerformanceOAT_+3A_topreps">topReps</code></td>
<td>
<p>an integer (default = NULL); the number of &quot;top&quot; replicates to be used. The &quot;top&quot; replicates will be identified for each target based on the simulation fitness. 
The average performance across <code>topReps</code> replicates will be plotted.</p>
</td></tr>
<tr><td><code id="plotPerformanceOAT_+3A_col">col</code></td>
<td>
<p>a colour; the colour of the lines. If <code>NULL</code>, the a default colour is used.</p>
</td></tr>
<tr><td><code id="plotPerformanceOAT_+3A_ylim">ylim</code></td>
<td>
<p>a vector of 2 values; the minimum and maximum limits of the y-axis (performance) scale.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The plots show the mean value of performance across replicates. The ranges between the minimum and maximum values of performance across replicates are shaded.
The function is intended for use with simulations containing attributes perturbed on an &quot;OAT&quot; grid. If the perturbations are on a &quot;regGrid&quot;, this function will subset 
OAT perturbations, if available, to create the plots. The function creates separate plots for perturbations in attributes of temperature and other variables.
The function may be called with <code>performance</code> argument specifying the metric to be plotted to plot other metrics.
</p>


<h3>Value</h3>

<p>The plot of the performance space and the ggplot object.
</p>


<h3>See Also</h3>

<p><code>runSystemModel</code>, <code>generateScenarios</code>, <code>plotPerformanceSpace</code>, <code>getSimSummary</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load example datasets
data("egSimSummary")
data("egSimPerformance")
plotPerformanceOAT(egSimPerformance[2], egSimSummary)
plotPerformanceOAT(egSimPerformance[1], egSimSummary)
# using the metric argument
plotPerformanceOAT(egSimPerformance, egSimSummary, metric = "Reliability (-)")
</code></pre>

<hr>
<h2 id='plotPerformanceSpace'>Plots a performance space using the system performance and scenarios as input</h2><span id='topic+plotPerformanceSpace'></span>

<h3>Description</h3>

<p><code>plotPerformanceSpace</code> uses the system model performance calculated using the function <code>runSystemModel</code> and
the summary of the simulation generated using the functions <code>generateScenarios</code> &amp; <code>getSimSummary</code> as input to plot the performance space of the system.
The user may specify the attributes to be used as the axes of the performance space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPerformanceSpace(
  performance,
  sim,
  metric = NULL,
  attX = NULL,
  attY = NULL,
  topReps = NULL,
  perfThresh = NULL,
  perfThreshLabel = "Threshold",
  attSlices = NULL,
  climData = NULL,
  colMap = NULL,
  colLim = NULL,
  contourBreaks = NULL,
  axesPercentLabel = FALSE,
  type = "heat.plot",
  noPlot = F
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotPerformanceSpace_+3A_performance">performance</code></td>
<td>
<p>a named list; contains the system model performance calculated using <code>runSystemModel</code>.
If the list contains more than one performance metric, the argument <code>metric</code> can be used to specify the metric to be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_sim">sim</code></td>
<td>
<p>a list; summary of the simulation containing the scenarios generated using the function <code>generateScenarios</code> that is used to run the system model using <code>runSystemModel</code>.
The summary of the simulation may be obtained by using the function <code>getSimSummary</code> on the full simulation. The summary object is much smaller in size for ease of storage and use with the performance
plotting functions like <code>plotPerformanceSpace</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_metric">metric</code></td>
<td>
<p>a string; the name of the performance metric to be plotted. The argument can be used to select a metric from <code>performance</code> for plotting.
If <code>NULL</code> (the default), the first metric in the list will be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_attx">attX</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the xaxis. The attribute must be one of the perturbed attributes of <code>sim</code>.
Type <code>sim$expSpace$attPerturb</code> to view all perturbed attributes of <code>sim</code>. If <code>NULL</code> (default), the first perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_atty">attY</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the yaxis. The attribute must be another perturbed attribute of <code>sim</code>.
If <code>NULL</code>, the second perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_topreps">topReps</code></td>
<td>
<p>an integer (default is <code>NULL</code>); the number of &quot;top&quot; replicates in terms of simulation fitness to be used. If <code>topReps</code> is specified, <code>topReps</code>
number of replicates will be identified for each target and the average performance across these replicates will be plotted. If <code>NULL</code>, the average performance across all the replicates will be plotted.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_perfthresh">perfThresh</code></td>
<td>
<p>a number; the minimum or maximum threshold value of the performance metric. A line will be drawn to mark this threshold value in the performance space.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_perfthreshlabel">perfThreshLabel</code></td>
<td>
<p>a string; the text to label <code>perfThresh</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_attslices">attSlices</code></td>
<td>
<p>a list; used to subset perturbed attributes in <code>sim</code> for the plot. This argument would typically be used in cases where there are more than two perturbed attributes.
The elements of the list correspond to the perturbed attributes to be subsetted and must be named using the attribute tag. Each element may contain a single value or a two-element vector specifying the minimum-maximum values.
If the element is a single value, the exposure space is sliced on this single value of the attribute. If minimum-maximum values are specified, the exposure space will be sliced to subset this range.
If <code>attSlices</code> includes <code>attX</code> or <code>attY</code>, these attributes will be sliced and the resulting plot will be a &quot;zoomed-in&quot; space.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_climdata">climData</code></td>
<td>
<p>data.frame; the values of attX and attY from other sources like climate models. This data will be plotted as points in the performance space.
The data frame may contain columns with values of the performance metric to be plotted and the &quot;Name&quot; of the dataset.
If the performance metric is available in the data.frame, the points will be coloured based on the performance <code>colMap</code> scale.
If the <code>Name</code> of the data is available in the data.frame, the points will be identified using the <code>Name</code>.
Please refer data provided with the package that may be loaded using <code>data("egClimData")</code> for an example of the expected format of <code>climData</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_colmap">colMap</code></td>
<td>
<p>a vector of colours; to specify the colourmap to be used. If <code>NULL</code>, the default foreSIGHT colourmap is used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_collim">colLim</code></td>
<td>
<p>a vector of 2 values; the minimum and maximum limits of the colour scale.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_contourbreaks">contourBreaks</code></td>
<td>
<p>a vector; specifies breaks in the performance metric</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_axespercentlabel">axesPercentLabel</code></td>
<td>
<p>a logical flag; if TRUE x and y axes to be displayed in terms of percentage change instead of fraction</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_type">type</code></td>
<td>
<p>a string; indicates type of plot as &quot;heat.plot&quot; (default) or &quot;filled.contour&quot;</p>
</td></tr>
<tr><td><code id="plotPerformanceSpace_+3A_noplot">noPlot</code></td>
<td>
<p>logical; indicates whether plots will be printed (<code>TRUE</code>) or not printed (<code>FALSE</code>) and only saved as an object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the space contains more than two perturbed attributes, the performance values are averaged across the perturbations in the attributes other than <code>attX</code> and <code>attY</code>.
The user may specify argument <code>attSlices</code> to slice the performance space at specific values of the other perturbed attributes. If <code>attSlices</code> are used to
specify minimum-maximum values to subset other perturbed attributes, the performance values are averaged across the subsetted perturbations in these attributes.
If the input performance list contains multiple performance metrics, the function plots the first metric.
The function may be called with <code>performance</code> argument specifying the metric to be plotted <code>plotPerformanceSpace(performance[2], sim)</code> to plot other metrics.
</p>


<h3>Value</h3>

<p>The plot of the performance space and the ggplot object.
</p>


<h3>See Also</h3>

<p><code>runSystemModel</code>, <code>generateScenarios</code>, <code>getSimSummary</code>, <code>plotPerformanceOAT</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load example datasets
data("egSimSummary")       # summary of stochastic simulation
data("egSimPerformance")   # system performance calculated using the stochastic simulation
data("egClimData")         # alternate climate data and system performance

plotPerformanceSpace(performance=egSimPerformance[2], sim=egSimSummary)

## Not run: 
# change plot style to "filled.contour" and specify contours - show contours from
# 0.76 to 0.9 in increments of 0.02
plotPerformanceSpace(type="filled.contour",performance=egSimPerformance[2],
                     sim=egSimSummary,contourBreaks=seq(0.76,0.9,0.02))


# adding climate data, using top 10 replicates
plotPerformanceSpace(performance=egSimPerformance[1], sim=egSimSummary,
                     topReps = 10, climData = egClimData)

# adding a threshold
plotPerformanceSpace(performance=egSimPerformance, sim=egSimSummary, metric = "Avg. Deficit (L)",
                     climData = egClimData, perfThresh = 27.5, perfThreshLabel = "Max Avg. Deficit")

# user specified colMap
plotPerformanceSpace(performance=egSimPerformance[1], sim=egSimSummary,
                     climData = egClimData, perfThresh = 27.5,
                     perfThreshLabel = "Max Avg. Deficit",
                     colMap = viridisLite::inferno(100))

#modify theme to change axes positioning to stacked vertically and left aligned
plotPerformanceSpace(performance=egSimPerformance[1], sim=egSimSummary,
                     climData = egClimData, perfThresh = 27.5,
                     perfThreshLabel = "Max Avg. Deficit",
                     colMap = viridisLite::inferno(100))+
ggplot2::theme(legend.box="vertical",
               legend.position="bottom",
               legend.box.just = "left",
               legend.margin = ggplot2::margin(t=0.01, r=0.1, b=0.01, l=0.1, "cm"),
               legend.justification=c(0.01,0.01))

# display fractional changes axes as percentage change
plotPerformanceSpace(performance=egSimPerformance, sim=egSimSummary,
                     metric = "Avg. Deficit (L)",
                     climData = egClimData, perfThresh = 27.5,
                     perfThreshLabel = "Max Avg. Deficit",
                     axesPercentLabel=TRUE)

# change displayed contours on performance space - show contours from 18 to 34 in increments of 2 L
plotPerformanceSpace(performance=egSimPerformance, sim=egSimSummary,
                     metric = "Avg. Deficit (L)",
                     climData = egClimData, perfThresh = 27.5,
                     perfThreshLabel = "Max Avg. Deficit",axesPercentLabel=TRUE,
                     contourBreaks=seq(18,34,2))

# change plot type to filled.contour style
plotPerformanceSpace(type="filled.contour",performance=egSimPerformance,
                     sim=egSimSummary, metric = "Avg. Deficit (L)",
                     climData = egClimData, perfThresh = 27.5,
                     perfThreshLabel = "Max Avg. Deficit",axesPercentLabel=TRUE,
                     contourBreaks=seq(18,34,2))

#example overlay points manually from a dataset in a similar style to egClimData
ptStyle= c(21,22, 24)  #select set of pt styles (e.g. hollow circle, square, triangle)
plotPerformanceSpace(performance=egSimPerformance[1], sim=egSimSummary,axesPercentLabel=TRUE)+
ggplot2::geom_point(data = egClimData,
                    mapping = ggplot2::aes(x = .data[["P_ann_tot_m"]],
                    y = .data[["P_ann_seasRatio"]],
                    shape = .data[["Name"]]),
                    show.legend = TRUE, size = 5, colour = "black", fill = "lightgray") +
ggplot2::scale_shape_manual(name = NULL, values = ptStyle,
                            guide = ggplot2::guide_legend(order = 2, nrow = 1))+
                   #one row of legend for specified ptStyle types
ggplot2::theme(legend.box="vertical", # vertical arrangement of items in legends
               legend.position="bottom", # position legends base of figure
               legend.justification=c(0,0)) # justification according to the plot area

# example of performance generated using simple scaled simulation
data("egScalPerformance")
data("egScalSummary")
data("egClimData")
plotPerformanceSpace(performance=egScalPerformance[1], sim=egScalSummary, climData = egClimData,
                     perfThresh = 28.25, perfThreshLabel = "Max Avg. Deficit")
                     
## End(Not run)
</code></pre>

<hr>
<h2 id='plotPerformanceSpaceMulti'>Plots contours of the number of performance thresholds exceeded in the perturbation space</h2><span id='topic+plotPerformanceSpaceMulti'></span>

<h3>Description</h3>

<p><code>plotPerformanceSpaceMulti</code> uses multiple system model performances calculated using the function <code>runSystemModel</code> and 
the summary of the simulation generated using the functions <code>generateScenarios</code> &amp; <code>getSimSummary</code> as input to plot filled contours showing the 
number of performance thresholds exceeded in the perturbation space.
The user may specify the attributes to be used as the axes of the perturbation space.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotPerformanceSpaceMulti(
  performance,
  sim,
  perfThreshMin,
  perfThreshMax,
  attX = NULL,
  attY = NULL,
  attSlices = NULL,
  topReps = NULL,
  climData = NULL,
  col = NULL,
  axesPercentLabel = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_performance">performance</code></td>
<td>
<p>a list; each element of the list should be a performance metric. May be calculated using the function <code>runSystemModel</code></p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_sim">sim</code></td>
<td>
<p>a list; summary of the simulation containing the scenarios generated using the function <code>generateScenarios</code> that is used to run the system model using <code>runSystemModel</code>.
The summary of the simulation may be obtained by using the function <code>getSimSummary</code> on the full simulation. The summary object is much smaller in size for ease of storage and use with the performance
plotting functions like <code>plotPerformanceSpace</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_perfthreshmin">perfThreshMin</code></td>
<td>
<p>a vector; the minimum threshold value of each performance metric. The length of the vector should be equal to <code>length(performance)</code>. 
If the metric does not have a minimum threshold, specify the corresponding element in <code>perfThreshMin</code> as <code>NA</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_perfthreshmax">perfThreshMax</code></td>
<td>
<p>a vector; the maximum threshold value of each performance metric. The length of the vector should be equal to <code>length(performance)</code>.
If the metric does not have a maximum threshold, specify the corresponding element in <code>perfThreshMax</code> as <code>NA</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_attx">attX</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the xaxis. The attribute must be one of the perturbed attributes of <code>sim</code>.
Type <code>sim$expSpace$attPerturb</code> to view all perturbed attributes of <code>sim</code>. If <code>NULL</code> (default), the first perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_atty">attY</code></td>
<td>
<p>a string; the tag of the perturbed attribute to plot on the yaxis. The attribute must be another perturbed attribute of <code>sim</code>.
If <code>NULL</code>, the second perturbed attribute of <code>sim</code> will be used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_attslices">attSlices</code></td>
<td>
<p>a list; used to subset perturbed attributes in <code>sim</code> for the plot. This argument would typically be used in cases where there are more than two perturbed attributes.
The elements of the list correspond to the perturbed attributes to be subsetted and must be named using the attribute tag. Each element may contain a single value or a two-element vector specifying the minimum-maximum values.
If the element is a single value, the exposure space is sliced on this single value of the attribute. If minimum-maximum values are specified, the exposure space will be sliced to subset this range.
If <code>attSlices</code> includes <code>attX</code> or <code>attY</code>, these attributes will be sliced and the resulting plot will be a &quot;zoomed-in&quot; space.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_topreps">topReps</code></td>
<td>
<p>an integer (default is <code>NULL</code>); the number of &quot;top&quot; replicates in terms of simulation fitness to be used. If <code>topReps</code> is specified, <code>topReps</code>
number of replicates will be identified for each target and the average performance across these replicates will be plotted. If <code>NULL</code>, the average performance across all the replicates will be plotted.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_climdata">climData</code></td>
<td>
<p>data.frame; the values of <code>attX</code> and <code>attY</code> from other sources like climate models. This data will be plotted as points in the perturbation space.
If the <code>Name</code> of the data is available in the data.frame, the points will be identified using the <code>Name</code>. 
Please refer data provided with the package that may be loaded using <code>data("egClimData")</code> for an example of the expected format of <code>climData</code>.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_col">col</code></td>
<td>
<p>a vector of colours; The length of the vector should at least be sufficient to assign unique colours to all
the different values in the generated plot. If <code>NULL</code>, the default foreSIGHT colours is used.</p>
</td></tr>
<tr><td><code id="plotPerformanceSpaceMulti_+3A_axespercentlabel">axesPercentLabel</code></td>
<td>
<p>a logical flag; if TRUE x and y axes to be displayed in terms of percentage change instead of fraction</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the space contains more than two perturbed attributes, the performance values are averaged across the perturbations in the attributes other than <code>attX</code> and <code>attY</code>.
The user may specify argument <code>attSlices</code> to slice the performance space at specific values of the other perturbed attributes. If <code>attSlices</code> are used to 
specify minimum-maximum values to subset other perturbed attributes, the performance values are averaged across the subsetted perturbations in these attributes. This function
cannot be used with <code>sim</code> perturbed on an &quot;OAT&quot; grid since contours of the number of performance thresholds exceeded cannot be calculated for an irregular perturbation space.
</p>


<h3>Value</h3>

<p>The plot showing the number of thresholds exceeded and the ggplot object.
</p>


<h3>See Also</h3>

<p><code>runSystemModel</code>, <code>generateScenarios</code>, <code>getSimSummary</code>, <code>plotPerformanceSpace</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load example datasets
data("egSimPerformance")
data("egSimSummary")
data("egClimData")

plotPerformanceSpaceMulti(performance=egSimPerformance, sim=egSimSummary, 
perfThreshMin = c(NA, 0.80), perfThreshMax = c(30, NA))

#replot with axes as percentage changes
plotPerformanceSpaceMulti(performance=egSimPerformance, sim=egSimSummary, 
perfThreshMin = c(NA, 0.80), perfThreshMax = c(30, NA),axesPercentLabel=TRUE)

# add alternate climate data and specify different colours for the plot
plotPerformanceSpaceMulti(performance=egSimPerformance, sim=egSimSummary, 
                          perfThreshMin = c(NA, 0.80),perfThreshMax = c(30, NA), 
                          climData = egClimData, col = viridisLite::magma(3))

# example using simple scaled simulations
data("egScalPerformance")
data("egScalSummary")
data("egClimData")
plotPerformanceSpaceMulti(performance=egScalPerformance, sim=egScalSummary, 
                          perfThreshMin = c(NA, 0.80),perfThreshMax = c(30, NA), 
                          climData = egClimData)

# replot with axes as percentage changes (Note: modifies fractional change attributes only)
plotPerformanceSpaceMulti(performance=egScalPerformance, sim=egScalSummary, 
                          perfThreshMin = c(NA, 0.80),perfThreshMax = c(30, NA), 
                          climData = egClimData,axesPercentLabel=TRUE)
</code></pre>

<hr>
<h2 id='plotScenarios'>Creates summary plots of the biases in the scenarios</h2><span id='topic+plotScenarios'></span>

<h3>Description</h3>

<p><code>plotScenarios</code> uses a simulation performed using the function <code>generateScenarios</code> as input and creates heatmaps that show
the biases in the simulated attributes with respect to the specified target values of the attributes.
The plots show the magnitude (absolute value) of the mean biases, and the standard deviation of biases across replicates. The heatmaps can be used
to evaluate how well the simulated attributes match the specified targets.
The biases are in units of percentage for attributes of variables like precipitation, and in units of degrees K for attributes of temperature.
The function creates two heatmaps that show:
</p>

<ul>
<li><p>magnitude of the mean biases across all the replicates
</p>
</li>
<li><p>standard deviation of biases across all the replicates
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>plotScenarios(
  sim,
  simName = NULL,
  writeToFile = FALSE,
  fileName = "plotScenarios.pdf",
  colMapRange = "default",
  plotAbs = T
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotScenarios_+3A_sim">sim</code></td>
<td>
<p>a list; contains a stochastic simulation or the summary of a stochastic simulation created using the function <code>generateScenarios</code></p>
</td></tr>
<tr><td><code id="plotScenarios_+3A_simname">simName</code></td>
<td>
<p>a string; defaults to <code>NULL</code>). User-specified name of the simulation that will used as the heading in the
saved pdf file to identify the simulation later. If <code>simName</code> is <code>NULL</code>, a random name will be assigned for the simulation.</p>
</td></tr>
<tr><td><code id="plotScenarios_+3A_writetofile">writeToFile</code></td>
<td>
<p>logical; defaults to <code>FALSE</code>. Specifies whether the plots should be saved to a pdf file.
If set to true, the heatmaps will be saved to a pdf file that would also contain summary pages that show the attributes, models, and optimisation settings used to create <code>sim</code>.</p>
</td></tr>
<tr><td><code id="plotScenarios_+3A_filename">fileName</code></td>
<td>
<p>a string; defaults to <code>"plotScenarios.pdf"</code>. Specifies the name of the pdf file to be written, if the file exists it will be overwritten.</p>
</td></tr>
<tr><td><code id="plotScenarios_+3A_colmaprange">colMapRange</code></td>
<td>
<p>a string; may be set to the character <code>"default"</code> or <code>"full"</code> or to a numeric vector of length 2.
The argument specifies the range of data spanned in the colormap of the heatmap.
If set to <code>"default"</code>, the colourmap limits of attributes that are in units of percentage is set to 0% to 10%,
and the colourmap limits of the attributes of temperature is set to 0 degrees K to 1 degrees K.
If set to <code>"full"</code>, the colourmap limits are set to the minimum and maximum values in the data.
If a numeric vector is specified, the colourmap limits are set to the first (minimum) and second (maximum) values in the vector.</p>
</td></tr>
<tr><td><code id="plotScenarios_+3A_plotabs">plotAbs</code></td>
<td>
<p>logical value, defaults to TRUE; determines whether the absolute value of the data is plotted (TRUE), or the raw value (which can be positive/negative) is plotted (FALSE).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>sim</code> may be a full stochastic simulation generated using the function <code>generateScenarrios</code> or the summary of the stochastic simulation
generated using <code>getSimSummary</code>
</p>


<h3>Value</h3>

<p>The function returns two R plots showing the biases in the targets of the scenarios generated using the function <code>generateScenarios</code>.
The figures may be saved to a pdf file by setting the <code>writeToFile</code> argument to <code>TRUE</code>.
</p>


<h3>See Also</h3>

<p><code>createExpSpace</code>, <code>generateScenarions</code>, <code>getSimSummary</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# the examples are nnot run since the run times are too long for CRAN
# create an exposure space
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m", "P_ann_R10_m")
attHold &lt;- c("P_Feb_tot_m", "P_SON_dyWet_m", "P_JJA_avgWSD_m", "P_MAM_tot_m",
"P_DJF_avgDSD_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
attPerturbType = "regGrid"
attPerturbSamp = c(2, 1, 1)
attPerturbMin = c(0.9, 1, 1)
attPerturbMax = c(1.1, 1, 1)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType,
                           attHold = attHold,
                           attTargetsFile = NULL)
# load example data available in foreSIGHT
data(tankDat)
# perform stochastic simulation
sim &lt;- generateScenarios(reference = tank_obs,
                         expSpace = expSpace,
                         simLengthNyrs = 30,
                         numReplicates = 2)
# plots heatmaps showing biases in simulated targets
plotScenarios(sim)
# to save the figures to a pdf file set writeToFile = TRUE
# using an example stochastic simulation summary provided with the package
data("egSimSummary")
plotScenarios(egSimSummary)

## End(Not run)
</code></pre>

<hr>
<h2 id='runSystemModel'>Runs a system model and outputs the system performance</h2><span id='topic+runSystemModel'></span>

<h3>Description</h3>

<p><code>runSystemModel</code> uses time series of hydroclimatic variables generated using the function <code>generateScenarios</code> as input to a systemModel and
collates the system performance for all the targets and replicates in the scenarios.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runSystemModel(sim, systemModel, systemArgs, metrics)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runSystemModel_+3A_sim">sim</code></td>
<td>
<p>list; a simulation containing the scenarios generated using the function <code>generateScenarios</code>.</p>
</td></tr>
<tr><td><code id="runSystemModel_+3A_systemmodel">systemModel</code></td>
<td>
<p>a function; The function runs the system model using climate data in a data.frame as input.
The function is expected to be created by the user for specific system models. <code>tankWrapper</code> is an example system model function available in this package.
<code>runSystemModel</code> calls the function <code>systemModel</code> with two arguments:
</p>

<ul>
<li> <p><code>data</code>: data.frame; the climate data in a data frame with columns named <em>year</em> <em>month</em> <em>day</em> <em>*variable_name1*</em> <em>*variable_name2*</em>. 
</p>
</li>
<li> <p><code>systemArgs</code>: list; containing the other arguments required by the system model.<code>systemModel</code> unpack the arguments from the list and uses them as required. 
</p>
</li>
<li> <p><code>metrics</code>: string vector; containing the names of the performance metrics that the system model returns. It is recommended that the
names also contain the units of the metric. See <code>viewTankMetrics()</code> for examples.
</p>
</li></ul>
</td></tr>
<tr><td><code id="runSystemModel_+3A_systemargs">systemArgs</code></td>
<td>
<p>a list; containing the input arguments to <code>systemModel</code>.</p>
</td></tr>
<tr><td><code id="runSystemModel_+3A_metrics">metrics</code></td>
<td>
<p>a string vector; the names of the performance metrics the <code>systemModel</code> function returns.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>runSystemModel</code> function code is structured to be simple and may be used as an example to create scripts that use scenarios
generated using <code>generateScenarios</code> to run system models in other programming languages. Type <code>runSystemModel</code> to view the function code.
The function <code>tankWrapper</code> in this package may be used as an example to create user defined functions for the <code>systemModel</code> argument.
Refer to <code>tankWrapper</code> to understand how the <code>systemModel</code> is expected to use <code>systemArgs</code> and return the calculated performance metrics.
The <code>systemModel</code> function is expected to return a named list of performance metrics. The elements of the vector should correspond to <code>metrics</code>.
</p>


<h3>Value</h3>

<p>The function returns a list containing the performance metrics calculated by the <code>systemModel</code>. Each element of the list corresponds to a performance metric and is named using the <code>metrics</code> argument.
Each element contains performance values calculated at all the target points in the exposure space in a matrix with nrow corresponding to the targets and ncol corresponding to the replicates.
</p>


<h3>See Also</h3>

<p><code>tankWrapper</code>, <code>generateScenarios</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example using tankWrapper as the systemModel
#=====================================================
## Not run: 
# create an exposure space
attPerturb &lt;- c("P_ann_tot_m", "P_ann_nWet_m")
attHold &lt;- c("P_Feb_tot_m", "P_SON_dyWet_m", "P_JJA_avgWSD_m", "P_MAM_tot_m",
"P_DJF_avgDSD_m", "Temp_ann_rng_m", "Temp_ann_avg_m")
attPerturbType = "regGrid"
attPerturbSamp = c(2, 2)
attPerturbMin = c(0.9, 0.9)
attPerturbMax = c(1.1, 1.1)
expSpace &lt;- createExpSpace(attPerturb = attPerturb,
                           attPerturbSamp = attPerturbSamp,
                           attPerturbMin = attPerturbMin,
                           attPerturbMax = attPerturbMax,
                           attPerturbType = attPerturbType,
                           attHold = attHold,
                           attTargetsFile = NULL)
# load example observed data available in foreSIGHT
data(tankDat)
# perform stochastic simulation
sim &lt;- generateScenarios(reference = tank_obs,
                                  expSpace = expSpace,
                                  simLengthNyrs = 30)
# use the simulation to run a system model
systemArgs &lt;- list(roofArea = 205, nPeople = 1, tankVol = 2400,
firstFlush = 2.0, write.file = FALSE)
tankMetrics &lt;- viewTankMetrics()
systemPerf = runSystemModel(sim = sim,
                            systemModel = tankWrapper,
                            systemArgs = systemArgs,
                            metrics = tankMetrics[1:2])
                            
## End(Not run)
</code></pre>

<hr>
<h2 id='tank_obs'>
Observations for demo tank model examples and vignette
</h2><span id='topic+tank_obs'></span>

<h3>Description</h3>

<p>Dataset of observations for tank model examples
</p>


<h3>Format</h3>

<p>A dataframe of observed climate data in the form <em>Year Month Day P Temp</em>.</p>

<hr>
<h2 id='tankPerformance'>
A function to calculate difference performance from simulated tank behaviour
</h2><span id='topic+tankPerformance'></span>

<h3>Description</h3>

<p>A function to calculate difference performance from simulated tank behaviour
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tankPerformance(data=NULL,
                      roofArea=50,   
                      nPeople=1,
                      tankVol=3000,
		      firstFlush=1,
                      write.file=TRUE,
                      fnam="tankperformance.csv")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tankPerformance_+3A_data">data</code></td>
<td>
<p>A dataframe of observed climate data in the form <em>Year Month Day P Temp</em>.</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_roofarea">roofArea</code></td>
<td>
<p> roof area in m2</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_npeople">nPeople</code></td>
<td>
<p>number of people using water</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_tankvol">tankVol</code></td>
<td>
<p>tank volume in L</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_firstflush">firstFlush</code></td>
<td>
<p>first flush depth over roof in mm</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_write.file">write.file</code></td>
<td>
<p>logical. write output tank timeseries to file T/F?</p>
</td></tr>
<tr><td><code id="tankPerformance_+3A_fnam">fnam</code></td>
<td>
<p>string indicating name of file</p>
</td></tr>
</table>

<hr>
<h2 id='tankWrapper'>Wrapper function for a rain water tank system model</h2><span id='topic+tankWrapper'></span>

<h3>Description</h3>

<p><code>tankWrapper</code> is a wrapper function for a rainwater tank system model in foreSIGHT. This function is used in examples in function help files and vignettes.
This function may also be used as an example to create wrapper functions for other system models with scenarios generated using foreSIGHT in <code>R</code> or other programming languages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tankWrapper(data, systemArgs, metrics)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tankWrapper_+3A_data">data</code></td>
<td>
<p>data.frame; contains observed daily precipitation and temperature to be used to run the rain water tank system model in a data.frame with columns named <em>year</em> <em>month</em> <em>day</em> <em>P</em> <em>Temp</em>. 
Note that the first three columns of the data.frame contain the year, month, and day of observation. The columns have to be named as specified.
Please refer data provided with the package that may be loaded using <code>data(tankDat)</code> for an example of the expected format of <code>data</code>.</p>
</td></tr>
<tr><td><code id="tankWrapper_+3A_systemargs">systemArgs</code></td>
<td>
<p>a list; contains the input arguments to the rain water tank system model. The valid fields in the list are:
</p>

<ul>
<li> <p><code>roofArea</code>: numeric; the roof area in sq.m
</p>
</li>
<li> <p><code>nPeople</code>: integer; number of people using water
</p>
</li>
<li> <p><code>tankVol</code>: numeric; volume of the tank in L
</p>
</li>
<li> <p><code>firstFlush</code>: numeric; first flush depth over roof in mm
</p>
</li>
<li> <p><code>write.file</code>: logical; indicates whether output is to be written to file
</p>
</li>
<li> <p><code>fnam</code>: string; name of the output file
</p>
</li></ul>
</td></tr>
<tr><td><code id="tankWrapper_+3A_metrics">metrics</code></td>
<td>
<p>string vector; the metrics of performance of the system model to be reported. The valid strings may be viewed using the function <code>viewTankMetrics()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function returns a list containing the calculated values of the performance metrics specified in <code>metrics</code> after running the system model.
</p>


<h3>See Also</h3>

<p><code>runSystemModel</code>, <code>viewTankMetrics</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># view available performance metrics
viewTankMetrics()
# load example climate data to run the system model
data(tankDat)
systemArgs &lt;- list(roofArea = 205, nPeople = 1, tankVol = 2400, 
firstFlush = 2.0, write.file = FALSE)
tankWrapper(tank_obs, systemArgs, 
metrics = c("average daily deficit (L)", "reliability (fraction)"))
</code></pre>

<hr>
<h2 id='viewAttributeDef'>Prints the definition of an attribute</h2><span id='topic+viewAttributeDef'></span>

<h3>Description</h3>

<p><code>viewAttributeDef</code> prints the short definition of a valid attribute
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewAttributeDef(attribute)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viewAttributeDef_+3A_attribute">attribute</code></td>
<td>
<p>A string; the name of the attribute.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>createExpSpace</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the definition of any valid attribute
viewAttributeDef("P_ann_tot_m")
</code></pre>

<hr>
<h2 id='viewAttributeFuncs'>Prints the list of built-in attribute functions</h2><span id='topic+viewAttributeFuncs'></span>

<h3>Description</h3>

<p><code>viewAttributeFuncs</code> prints the list of built-in attribute functions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewAttributeFuncs()
</code></pre>


<h3>See Also</h3>

<p><code>viewAttributeDef</code>, <code>createExpSpace</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the list of built-in functions used to calculate attributes
viewAttributeFuncs()
</code></pre>

<hr>
<h2 id='viewDefaultOptimArgs'>Prints the default optimisation arguments</h2><span id='topic+viewDefaultOptimArgs'></span>

<h3>Description</h3>

<p><code>viewDefautOptimArgs()</code> prints the default values of optimisation arguments (<code>optimisationArguments</code>) used by <code>generateScenarios</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewDefaultOptimArgs(optimizer = "RGN")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viewDefaultOptimArgs_+3A_optimizer">optimizer</code></td>
<td>
<p>A string for the numerical optimizer. Default optimizer is 'RGN'.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This a helper function that prints the default values of the optimisation arguments.
The user may specify alternate values of these arguments in fields named according to the corresponding argument name nested under
<code>optimisationArguments</code> in a JSON file to use as the <code>controlFile</code> input to the <code>generateScenarios</code> function.
</p>


<h3>See Also</h3>

<p><code>writeControlFile</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the default optimisation arguments
viewDefaultOptimArgs()
</code></pre>

<hr>
<h2 id='viewModelParameters'>Prints the names and bounds of the parameters of the stochastic models</h2><span id='topic+viewModelParameters'></span>

<h3>Description</h3>

<p><code>viewModelParameters</code> prints the names of the parameters of the stochastic model and its default minimum and maximum bounds.
The stochastic model is specified using the function arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewModelParameters(variable, modelType, modelParameterVariation)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viewModelParameters_+3A_variable">variable</code></td>
<td>
<p>A string; the name of the variable. Type <code>viewModels()</code> to view valid variable names</p>
</td></tr>
<tr><td><code id="viewModelParameters_+3A_modeltype">modelType</code></td>
<td>
<p>A string; the model type. Use <code>viewModels</code> to view the valid values.</p>
</td></tr>
<tr><td><code id="viewModelParameters_+3A_modelparametervariation">modelParameterVariation</code></td>
<td>
<p>A string; the parameter variation. Use <code>viewModels</code> to view the valid values.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The available stochastic models can be viewed using the function <code>viewModels()</code>.
This function prints the default ranges of the parameters of the stochastic model specified the
stochastic model of interest.
</p>


<h3>See Also</h3>

<p><code>viewModels</code>, <code>writeControlFile</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>viewModelParameters("P", "wgen", "annual")
viewModelParameters("P", "wgen", "harmonic")
</code></pre>

<hr>
<h2 id='viewModels'>Prints the available stochastic model options</h2><span id='topic+viewModels'></span>

<h3>Description</h3>

<p><code>viewModels</code> prints the stochastic model options available for the different hydroclimatic variables in foreSIGHT.
These options may be used to create an controlFile for input to function <code>generateScenarios</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewModels(variable = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="viewModels_+3A_variable">variable</code></td>
<td>
<p>String; the variable name. Type <code>viewModels()</code> without arguments to view the valid variable names.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code>writeControlFile</code>, <code>generateScenarios</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the valid variable names use the function without arguments
viewModels()

# Examples to view the model options available for different variables
viewModels("P")
viewModels("Temp")
viewModels("Radn")
viewModels("PET")
</code></pre>

<hr>
<h2 id='viewTankMetrics'>Prints the names of the performance metrics of the rain water tank system model</h2><span id='topic+viewTankMetrics'></span>

<h3>Description</h3>

<p><code>viewTankMetrics</code> prints the names of the performance metrics available in the example rain water tank system model. T
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewTankMetrics()
</code></pre>


<h3>Details</h3>

<p>This is a helper function that does not take any input arguments. The user may specify one or more of the metric names 
as the <code>metric</code> argument of <code>tankWrapper</code> to select the performance metrics from the tank system model.
to select the performance metrics.
</p>


<h3>See Also</h3>

<p><code>tankWrapper</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>viewTankMetrics()
</code></pre>

<hr>
<h2 id='viewVariables'>Prints the names of and units of valid variables</h2><span id='topic+viewVariables'></span>

<h3>Description</h3>

<p><code>viewVariables()</code> prints the names of valid variables and their units in the package. The user should input these variable
in the same units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewVariables()
</code></pre>


<h3>Details</h3>

<p>The function does not take any input arguments.
</p>


<h3>See Also</h3>

<p><code>generateScenarios</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To view the valid variables
viewVariables()
</code></pre>

<hr>
<h2 id='writeControlFile'>Writes a sample <code>controlFile.json</code> file</h2><span id='topic+writeControlFile'></span>

<h3>Description</h3>

<p><code>writeControlFile()</code> writes a sample <code>controlFile.json</code> file. The <code>controlFile.json</code> file is used to specify alternate model and optimisation options and used as an input to the function <code>generateScenarios</code>.
The user may use the sample file created by this function as a guide to create an &quot;<code>controlFile.json</code>&quot; file for their application.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeControlFile(
  jsonfile = "sample_controlFile.json",
  basic = TRUE,
  nml = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeControlFile_+3A_jsonfile">jsonfile</code></td>
<td>
<p>string; to specify the name of the json file to be written. The default name of the sample file is &quot;sample_controlFile.json&quot;.
The file will be written to the working directory of the user.</p>
</td></tr>
<tr><td><code id="writeControlFile_+3A_basic">basic</code></td>
<td>
<p>logical (<code>TRUE/FALSE</code>); used to specify whether a &quot;basic&quot; or &quot;advanced&quot; sample file is to be written. The default is <code>TRUE</code>.
A &quot;basic&quot; controlFile does not contain modelParameterBounds, and is sufficient for most applications.</p>
</td></tr>
<tr><td><code id="writeControlFile_+3A_nml">nml</code></td>
<td>
<p>list; the namelist to be written to the json file, as an R list. This argument may be used to create a JSON file using an controlFile from an existing simulation.
If this argument is set to NULL, the function writes the default model/optimisation options defined in the package to the json file.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function may be used without any input arguments to write a &quot;basic&quot; sample controlFile.
</p>


<h3>Value</h3>

<p>A json file. The file may be used as an example to create an &quot;<code>controlFile.json</code>&quot; file for input to <code>generateScenarios</code>.
An &quot;<code>controlFile.json</code>&quot; file may contain any subset of the fields listed below. The user may delete the unused fields from the file.
The exception cases where it is mandatory to specify two fields together in controlFile are detailed as part of the list below.
</p>

<ul>
<li> <p><strong><code>modelType</code></strong>: a list by variable. Each element of the list is a string specifying the type of stochastic model. if <code>modelType</code> is specified for a variable in controlFile,
<code>modelParameterVariation</code> should also be specified. This is because these two fields together define the stochastic model.
Use <code>viewModels()</code> to view the valid options for <code>modelType</code> by variable.
</p>
</li>
<li> <p><strong><code>modelParameterVariation</code></strong>: a list by variable. Each element of the list is a string specifying the type of the parameter variation (annual, seasonal, harmonic etc.) of the stochastic model.
if <code>modelParameterVariation</code> is specified for a variable in controlFile, <code>modelType</code> should also be specified.
This is because these two fields together define the stochastic model.
Use <code>viewModels()</code> to view valid options for <code>modelParameterVariation</code> by variable.
</p>
</li>
<li> <p><strong><code>modelParameterBounds</code></strong>: a nested list by variable. Each element is a list containing the bounds of the parameters of the chosen stochastic model.
This field exists to provide an option to overwrite the default bounds of the parameters of the stochastic model.
Careful consideration is recommended prior to setting <code>modelParameterBounds</code> in the controlFile to overwrite the defaults provided in the package.
</p>
</li>
<li> <p><strong><code>optimisationArguments</code></strong>: a list. Contains the optimisation options used by function <code>ga</code> from the <code>ga</code> package. Brief definitions are given below.
</p>

<ul>
<li> <p><code>optimizer</code>: the numerical optimization routine. Options include
<code>'RGN'</code> for Robust Gauss Newton (using <code>RGN::rgn</code>),
<code>'NM'</code> for Nelder-Mead (using <code>dfoptim::nmkb</code>),
<code>'SCE'</code> for Shuffled Complex Evolution (using <code>SoilHyP::SCEoptim</code>).
<code>'GA'</code> for Genetic Algorithm (using <code>GA::ga</code>),
Defaults to 'RGN'.
</p>
</li>
<li> <p><code>seed</code>: random seed used (for first multistart) in numerical optimization (often for determining random initial parameter values). Default is 1.
</p>
</li>
<li> <p><code>obj.func</code>: the type of objective function used (important only when penalty weights are not equal.
</p>
</li>
<li> <p><code>suggestions</code>: suggestions for starting values of parameters for optimisation.
Options include <code>'WSS'</code> (weighted sum of squares) and <code>SS_absPenalty</code> (sum of squares plus absolute penalty)
</p>
</li>
<li> <p><code>nMultiStart</code>: the number of multistarts used in optimization. Default is 5.
</p>
</li>
<li> <p><code>RGN.control</code>: RGN optional arguments specified by <code>control</code> list in <code>RGN::rgn</code>.
</p>
</li>
<li> <p><code>NM.control</code>: NM optional arguments specified by <code>control</code> list in <code>dfoptim::nmkb</code>.
</p>
</li>
<li> <p><code>SCE.control</code>: SCE optional arguments specified by <code>control</code> list in <code>SoilHyP::SCEoptim</code>.
</p>
</li>
<li> <p><code>GA.args</code>: GA optional arguments specified in <code>GA::ga</code>.
</p>
</li></ul>

</li>
<li> <p><strong><code>penaltyAttributes</code></strong>: a character vector of climate attributes to place specific focus on during targeting via the use of a penalty function during the optimisation process.
The <code>penaltyAttributes</code> should belong to <code>attPerturb</code> or <code>attHold</code> that are specified in the exposure space used as input to <code>generateScenarios</code>.
If <code>penaltyAttributes</code> are specified in the controlFile, <code>penaltyWeights</code> should also be specified.
</p>
</li>
<li> <p><strong><code>penaltyWeights</code></strong>: a numeric vector; the length of the vector should be equal to the length of <code>penaltyAttributes</code>.
<code>penaltyWeights</code> are the multipliers of the corresponding <code>penaltyAttributes</code> used during the optimisation.
</p>
</li></ul>



<h3>See Also</h3>

<p><code>generateScenarios</code>, <code>viewModels</code>, <code>viewDefaultOptimArgs</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# To write a sample controlFile
writeControlFile()

# To write an advanced sample controlFile
writeControlFile(jsonfile = "sample_controlFile_advanced.json", basic = FALSE)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
