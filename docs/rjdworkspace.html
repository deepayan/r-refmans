<!DOCTYPE html><html><head><title>Help for package rjdworkspace</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rjdworkspace}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#copy_ws'><p>Copy a WS</p></a></li>
<li><a href='#get_comment'><p>Extract comments</p></a></li>
<li><a href='#manipulate_sa_item'><p>Manipulate SaItems</p></a></li>
<li><a href='#replace_series'><p>Partial update of a workspace metadata</p></a></li>
<li><a href='#set_comment'><p>Change comment</p></a></li>
<li><a href='#set_metadata'><p>Set the metadata of a SaItem</p></a></li>
<li><a href='#set_name'><p>Set the name of a SaItem</p></a></li>
<li><a href='#set_spec'><p>Set the specification of a SaItem</p></a></li>
<li><a href='#set_ts'><p>Change the input time series of a SaItem</p></a></li>
<li><a href='#transfer_series'><p>Transfer_series</p></a></li>
<li><a href='#update_metadata'><p>Update the metadata from a workspace</p></a></li>
<li><a href='#update_path'><p>Update the path to the raw series file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Manipulate 'JDemetra+' Workspaces</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Set of tools to manipulate the 'JDemetra+' workspaces.
    Based on the 'RJDemetra' package (which interfaces with version 2 of the 'JDemetra+' (<a href="https://github.com/jdemetra/jdemetra-app">https://github.com/jdemetra/jdemetra-app</a>), the seasonal adjustment software officially
    recommended to the members of the European Statistical System (ESS) and the European System of Central Banks).
    This package provides access to additional workspace manipulation functions such as metadata manipulation, raw paths and wrangling of several workspaces simultaneously. 
    These additional functionalities are useful as part of a CVS data production chain.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>rJava (&ge; 0.9-8), RJDemetra, XML</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://joinup.ec.europa.eu/software/page/eupl">EUPL</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/InseeFrLab/rjdworkspace">https://github.com/InseeFrLab/rjdworkspace</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/InseeFrLab/rjdworkspace/issues">https://github.com/InseeFrLab/rjdworkspace/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-05-20 14:29:48 UTC; UTZK0M</td>
</tr>
<tr>
<td>Author:</td>
<td>Tanguy Barthelemy [aut, cre, art],
  Alain Quartier-la-Tente
    <a href="https://orcid.org/0000-0001-7890-3857"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Institut national de la statistique et des études économiques [cph]
    (https://www.insee.fr/),
  Anna Smyk [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Tanguy Barthelemy &lt;tanguy.barthelemy@insee.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-05-21 15:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='copy_ws'>Copy a WS</h2><span id='topic+copy_ws'></span>

<h3>Description</h3>

<p>Copy a WS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copy_ws(ws_name, from, to = tempdir(), overwrite = TRUE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copy_ws_+3A_ws_name">ws_name</code></td>
<td>
<p>the name of the WS</p>
</td></tr>
<tr><td><code id="copy_ws_+3A_from">from</code></td>
<td>
<p>the path to the folder containing the WS (the XML file + the WS
folder)</p>
</td></tr>
<tr><td><code id="copy_ws_+3A_to">to</code></td>
<td>
<p>the path to the new folder which will contains the WS (the XML
file + the WS folder)</p>
</td></tr>
<tr><td><code id="copy_ws_+3A_overwrite">overwrite</code></td>
<td>
<p>Overwrite existing file (Defaults to TRUE)</p>
</td></tr>
<tr><td><code id="copy_ws_+3A_verbose">verbose</code></td>
<td>
<p>A boolean to print indications on the processing status
(optional and TRUE by default)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the function returns invisibly (with <code>invisible()</code>) a boolean
specifying if the transfer was done or an error if the specified paths or
workspace don't exists
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Déplacement d'un WS dans un environnement temporaire
destination_dir &lt;- tempdir()

# Copy of a worspace in a temporary environment
copy_ws(
  ws_name = "ws_output",
  from = file.path(system.file("extdata", package = "rjdworkspace"), "WS"),
  to = destination_dir
)

</code></pre>

<hr>
<h2 id='get_comment'>Extract comments</h2><span id='topic+get_comment'></span>

<h3>Description</h3>

<p>Function to extract the comments of a workspace
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_comment(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_comment_+3A_x">x</code></td>
<td>
<p>the object from which the comments are retrieved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string or list of string with all the comment contained in a SA-Item, a SA-Processing or a workspace (depending on the argument <code>x</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")
ws_dir &lt;- file.path(system.file("extdata", package = "rjdworkspace"), "WS")

path_ws_to &lt;- file.path(ws_dir, "ws_output.xml")

ws_output &lt;- load_workspace(path_ws_to)
print(get_comment(ws_output))

sap_output &lt;- get_object(ws_output, pos = 3)
print(get_comment(sap_output))

sa_item &lt;- get_object(sap_output, pos = 3)
print(get_comment(sa_item))

</code></pre>

<hr>
<h2 id='manipulate_sa_item'>Manipulate SaItems</h2><span id='topic+manipulate_sa_item'></span><span id='topic+remove_sa_item'></span><span id='topic+remove_all_sa_item'></span><span id='topic+replace_sa_item'></span><span id='topic+add_new_sa_item'></span>

<h3>Description</h3>

<p>Functions to remove/replace/add a <code>sa_item</code> from/to a SA-Processing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>remove_sa_item(sap, pos = 1)

remove_all_sa_item(sap)

replace_sa_item(sap, pos = 1, sa_item)

add_new_sa_item(sap, sa_item)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manipulate_sa_item_+3A_sap">sap</code></td>
<td>
<p>the SA-Processing.</p>
</td></tr>
<tr><td><code id="manipulate_sa_item_+3A_pos">pos</code></td>
<td>
<p>the index of the <code>sa_item</code> to remove or to replace.</p>
</td></tr>
<tr><td><code id="manipulate_sa_item_+3A_sa_item">sa_item</code></td>
<td>
<p><code>sa_item</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The functions <code>remove_sa_item()</code>, <code>remove_all_sa_item()</code> and <code>replace_sa_item()</code> return invisibly (with <code>invisible()</code>) <code>TRUE</code> or an error.
The function <code>add_new_sa_item()</code> returns invisibly (with <code>invisible()</code>) the updated <code>SA-Item</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")

sa_x13 &lt;- jx13(series = ipi_c_eu[, "FR"])
sa_ts &lt;- jtramoseats(series = ipi_c_eu[, "FR"])

wk &lt;- new_workspace()
sap1 &lt;- new_multiprocessing(workspace = wk, name = "sap-1")
add_sa_item(workspace = wk, multiprocessing = "sap-1",
            sa_obj = sa_x13, name = "X13")
add_sa_item(workspace = wk, multiprocessing = "sap-1",
            sa_obj = sa_ts, name = "TramoSeats")

sa_item1 &lt;- get_object(x = sap1, pos = 1L)

remove_sa_item(sap = sap1, pos = 1L) # Remove the first sa-item
add_new_sa_item(sap = sap1, sa_item = sa_item1) # Add the sa-item at the end

# To replace the first sa_item by "sa_item1"
replace_sa_item(sap = sap1, pos = 1L, sa_item = sa_item1)
</code></pre>

<hr>
<h2 id='replace_series'>Partial update of a workspace metadata</h2><span id='topic+replace_series'></span><span id='topic+verif_duplicates'></span><span id='topic+verif_ws_duplicates'></span>

<h3>Description</h3>

<p><code>replace_series()</code> allows to update a selection of series by the same-named
series from another workspace. When only the metadata differs, it is the
partial version of the update_metadata function.
</p>
<p>Generic function to identify and return the duplicates in a list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_series(
  ws_from,
  ws_to,
  selected_series,
  mp_from_name,
  mp_to_name,
  verbose = TRUE
)

verif_duplicates(s)

verif_ws_duplicates(ws, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replace_series_+3A_ws_from">ws_from</code></td>
<td>
<p>The workspace containing the most up-to-date version of the
selected_series series</p>
</td></tr>
<tr><td><code id="replace_series_+3A_ws_to">ws_to</code></td>
<td>
<p>The workspace to update</p>
</td></tr>
<tr><td><code id="replace_series_+3A_selected_series">selected_series</code></td>
<td>
<p>The vector containing the series-to-update's names.</p>
</td></tr>
<tr><td><code id="replace_series_+3A_mp_from_name">mp_from_name</code></td>
<td>
<p>The name of the SA-Processing containing the series to
update (optional)</p>
</td></tr>
<tr><td><code id="replace_series_+3A_mp_to_name">mp_to_name</code></td>
<td>
<p>The name of the SA-Processing to update (optional)</p>
</td></tr>
<tr><td><code id="replace_series_+3A_verbose">verbose</code></td>
<td>
<p>A boolean to print indications on the processing
status (optional and TRUE by default)</p>
</td></tr>
<tr><td><code id="replace_series_+3A_s">s</code></td>
<td>
<p>a list of characters</p>
</td></tr>
<tr><td><code id="replace_series_+3A_ws">ws</code></td>
<td>
<p>The workspace to scan</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the arguments <code>mp_from_name</code> &amp; <code>mp_to_name</code> are unspecified, the
update will be performed using the workspaces' first SAProcessing.
If a series is specified in the selected_series vector is missing in a
workspace, no replacement will be performed and the function will return the
list of missing series. Otherwise, if all is well, the function returns the
workspace ws_to updated.
</p>
<p><code>verif_duplicates()</code> identifies and returns the duplicates in a list
<code>verif_ws_duplicates()</code> identifies duplicated series in a SAProcessing (SAP)
and SAProcessings in a workspace
</p>


<h3>Value</h3>

<p>the updated <code>workspace</code>
</p>
<p>If there are no duplicates, the function returns an empty data frame.
Otherwise, it returns a data frame giving the name and number of duplicates found within the argument (list).
</p>
<p>a list containing the name and number of occurences of duplicated SAPs and series
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")
dir_ws &lt;- tempdir()
template_ws &lt;- file.path(system.file("extdata", package = "rjdworkspace"),
                         "WS")
# Moving the WS in a temporary environment
copy_ws(
    ws_name = "ws_output",
    from = template_ws,
    to = dir_ws
)
copy_ws(
    ws_name = "ws_input",
    from = template_ws,
    to = dir_ws
)
path_ws_from &lt;- file.path(dir_ws, "ws_input.xml")
path_ws_to &lt;- file.path(dir_ws, "ws_output.xml")
ws_input &lt;- load_workspace(path_ws_from)
ws_output &lt;- load_workspace(path_ws_to)

replace_series(
    ws_from = ws_input,
    ws_to = ws_output,
    mp_from_name = "SAProcessing-2",
    mp_to_name = "SAProcessing-2",
    selected_series = c("RF1039", "RF1041"),
    verbose = TRUE
)

s &lt;- c("a", "b", "a", "c", "a", "c")
print(rjdworkspace:::verif_duplicates(s))

</code></pre>

<hr>
<h2 id='set_comment'>Change comment</h2><span id='topic+set_comment'></span>

<h3>Description</h3>

<p>Function to change the comments of a sa_item object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_comment(x, comment)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_comment_+3A_x">x</code></td>
<td>
<p>the sa_item of which the comments will be changed.</p>
</td></tr>
<tr><td><code id="set_comment_+3A_comment">comment</code></td>
<td>
<p>the new comment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new sa_item.
</p>

<hr>
<h2 id='set_metadata'>Set the metadata of a SaItem</h2><span id='topic+set_metadata'></span>

<h3>Description</h3>

<p>Function to set the name of a <code>"sa_item"</code> from the one contained in another <code>"sa_item"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_metadata(sa_from, sa_to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_metadata_+3A_sa_from">sa_from</code></td>
<td>
<p>the <code>"sa_item"</code> object from which the desired metadata is retrieved.</p>
</td></tr>
<tr><td><code id="set_metadata_+3A_sa_to">sa_to</code></td>
<td>
<p>the <code>"sa_item"</code> object to modify.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code>"sa_item"</code> with the specification of <code>sa_to</code> and the metadata of <code>sa_from</code>.
</p>

<hr>
<h2 id='set_name'>Set the name of a SaItem</h2><span id='topic+set_name'></span>

<h3>Description</h3>

<p>Function to set the name of a <code>"sa_item"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_name(sa_item, name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_name_+3A_sa_item">sa_item</code></td>
<td>
<p>a <code>"sa_item"</code> object.</p>
</td></tr>
<tr><td><code id="set_name_+3A_name">name</code></td>
<td>
<p>the new name.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code>"sa_item"</code> with the new name.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")

sa_x13 &lt;- jx13(series = ipi_c_eu[, "FR"])

wk &lt;- new_workspace()
sap1 &lt;- new_multiprocessing(workspace = wk, name = "sap-1")

add_sa_item(workspace = wk, multiprocessing = "sap-1",
            sa_obj = sa_x13, name = "Wrong name")

sa_item1 &lt;- get_object(x = sap1, pos = 1L)

new_sa_item &lt;- set_name(sa_item = sa_item1, name = "Good name")
replace_sa_item(sap = sap1, pos = 1L, sa_item = new_sa_item)

# The first sa_item of sap1 is now "Good name"
get_name(x = get_object(x = sap1, pos = 1L))

</code></pre>

<hr>
<h2 id='set_spec'>Set the specification of a SaItem</h2><span id='topic+set_spec'></span>

<h3>Description</h3>

<p>Function to set the specification of a <code>"sa_item"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_spec(sa_item, spec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_spec_+3A_sa_item">sa_item</code></td>
<td>
<p>a <code>"sa_item"</code> object.</p>
</td></tr>
<tr><td><code id="set_spec_+3A_spec">spec</code></td>
<td>
<p>the object into which the new specification is extracted/stored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new <code>"sa_item"</code> with the new specification
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")

sa_x13 &lt;- jx13(series = ipi_c_eu[, "FR"])
sa_ts &lt;- jtramoseats(series = ipi_c_eu[, "FR"])

wk &lt;- new_workspace()
sap1 &lt;- new_multiprocessing(workspace = wk, name = "sap-1")

add_sa_item(
    workspace = wk,
    multiprocessing = "sap-1",
    sa_obj = sa_x13,
    name = "tramo seats"
)

sa_item1 &lt;- get_object(x = sap1, pos = 1L)
new_sa_item &lt;- set_spec(sa_item = sa_item1, spec = sa_ts)

# The first sa_item is now seasonally adjusted with TRAMO-SEATS
replace_sa_item(sap = sap1, pos = 1, sa_item = new_sa_item)

</code></pre>

<hr>
<h2 id='set_ts'>Change the input time series of a SaItem</h2><span id='topic+set_ts'></span>

<h3>Description</h3>

<p>Function to change the input time series of a SaItem
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_ts(sa_item, ts)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_ts_+3A_sa_item">sa_item</code></td>
<td>
<p>the <code>sa_item</code> to modify.</p>
</td></tr>
<tr><td><code id="set_ts_+3A_ts">ts</code></td>
<td>
<p>the new <code><a href="stats.html#topic+ts">stats::ts()</a></code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>sa_item</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")

# Definition of the original time series
sa_x13 &lt;- jx13(series = ipi_c_eu[, "FR"])

wk &lt;- new_workspace()
sap1 &lt;- new_multiprocessing(workspace = wk, name = "sap-1")

# Adding a new SA-Item (`sa_x13`) to `sap1`
add_sa_item(workspace = wk, multiprocessing = "sap-1",
            sa_obj = sa_x13, name = "X13")

# Retrieving the adjusted series
sa_item1 &lt;- get_object(x = sap1, pos = 1L)

# Creation of a new sa_item and change of the input time series
new_sa_item &lt;- set_ts(sa_item = sa_item1, ts = ipi_c_eu[, "BE"])
# Replacement of the series in the workspace
replace_sa_item(sap = sap1, pos = 1L, sa_item = new_sa_item)

</code></pre>

<hr>
<h2 id='transfer_series'>Transfer_series</h2><span id='topic+transfer_series'></span>

<h3>Description</h3>

<p>To copy &amp; paste series from one workspace to another
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transfer_series(
  ws_from,
  ws_to,
  selected_series,
  pos_sap_from,
  pos_sap_to,
  name_sap_from,
  name_sap_to,
  verbose = TRUE,
  create_sap = TRUE,
  replace_series = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transfer_series_+3A_ws_from">ws_from</code></td>
<td>
<p>The workspace containing the additionnal series</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_ws_to">ws_to</code></td>
<td>
<p>The workspace to add series to</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_selected_series">selected_series</code></td>
<td>
<p>The vector containing the series-to-update's names.</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_pos_sap_from">pos_sap_from</code></td>
<td>
<p>The position of the SA-Processing to transfer the series
from</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_pos_sap_to">pos_sap_to</code></td>
<td>
<p>The position of the SA-Processing to transfer the series to</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_name_sap_from">name_sap_from</code></td>
<td>
<p>The name of the SA-Processing to transfer the series
from (optional)</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_name_sap_to">name_sap_to</code></td>
<td>
<p>The name of the SA-Processing to transfer the series to
(optional)</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_verbose">verbose</code></td>
<td>
<p>A boolean to print indications on the processing
status (optional and TRUE by default)</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_create_sap">create_sap</code></td>
<td>
<p>A boolean to create a new SA-Processing if not existing
(optional)</p>
</td></tr>
<tr><td><code id="transfer_series_+3A_replace_series">replace_series</code></td>
<td>
<p>A boolean to replace existing series (optional)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To use this function you need to first launch <code>load_workspace</code> and after
<code>save_workspace</code> to save the changes.
</p>
<p><code>name_sap_to</code> and <code>name_sap_from</code> refer to the SAP's name and not SAP's
file's name.
</p>
<p>The transfer will fail if:
- <code>name_sap_from</code> doesn't exist
- <code>pos_sap_from</code> &lt; 0 or exceed the maximum number of SAP
- <code>pos_sap_to</code> &lt; 0 or exceed the maximum number of SAP
- The arguments <code>pos_sap_from</code> and <code>name_sap_from</code> are refering to
differents objects.
- The arguments <code>pos_sap_to</code> and <code>name_sap_to</code> are refering to
differents objects.
</p>
<p>If <code>name_sap_to</code> and <code>pos_sap_to</code> are unspecified, the update will be
performed using the workspaces' first SAProcessing (same for the SAP from).
However if the informations of one on the two SAP (from or to) are specified
(name or position), they will be attributed by default to the other
worskpace.
</p>
<p>If <code>name_sap_to</code> doesn't refer to an existing SAP, a new SAP will be created
(if <code>create_sap</code> is <code>TRUE</code>).
</p>
<p>If a sa_item has a specification which uses external regressor, you have to
be sure that the regressors are also in the destination workspace.
</p>


<h3>Value</h3>

<p>the <code>workspace</code> ws_to augmented with series present in ws_from and
not already in ws_to
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")
dir_ws &lt;- tempdir()
template_ws &lt;- file.path(system.file("extdata", package = "rjdworkspace"),
                         "WS")
# Moving the WS in a temporary environment
copy_ws(
    ws_name = "ws_output",
    from = template_ws,
    to = dir_ws
)
copy_ws(
    ws_name = "ws_input",
    from = template_ws,
    to = dir_ws
)
path_ws_from &lt;- file.path(dir_ws, "ws_input.xml")
path_ws_to &lt;- file.path(dir_ws, "ws_output.xml")
ws_input &lt;- load_workspace(path_ws_from)
ws_output &lt;- load_workspace(path_ws_to)

# Existing SAP
transfer_series(
    ws_from = ws_input,
    ws_to = ws_output,
    name_sap_from = "SAProcessing-1",
    name_sap_to = "SAProcessing-1",
    verbose = TRUE
)

transfer_series(
    ws_from = ws_input,
    ws_to = ws_output,
    pos_sap_from = 1,
    pos_sap_to = 1,
    verbose = TRUE
)

# Existing series
transfer_series(
    ws_from = ws_input, ws_to = ws_output,
    pos_sap_from = 2,
    pos_sap_to = 2,
    verbose = TRUE,
    replace_series = FALSE
)
transfer_series(
    ws_from = ws_input, ws_to = ws_output,
    pos_sap_from = 2,
    pos_sap_to = 2,
    verbose = TRUE,
    replace_series = TRUE
)

# Create a new SAP
# transfer_series(ws_from = ws_input, ws_to = ws_output,
#                 name_sap_from = "SAProcessing-1",
#                 name_sap_to = "New-SAProcessing-from-R",
#                 verbose = TRUE,
#                 create = FALSE)

transfer_series(
    ws_from = ws_input, ws_to = ws_output,
    name_sap_from = "SAProcessing-1",
    name_sap_to = "New-SAProcessing-from-R",
    verbose = TRUE,
    create = TRUE
)

RJDemetra::save_workspace(workspace = ws_output, file = path_ws_to)

</code></pre>

<hr>
<h2 id='update_metadata'>Update the metadata from a workspace</h2><span id='topic+update_metadata'></span><span id='topic+update_metadata_roughly'></span>

<h3>Description</h3>

<p>Functions to update the metadata of a workspace by those contained in
another one
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_metadata(ws_from, ws_to)

update_metadata_roughly(ws_from, ws_to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_metadata_+3A_ws_from">ws_from</code></td>
<td>
<p>Workspace that contains the new metadata.</p>
</td></tr>
<tr><td><code id="update_metadata_+3A_ws_to">ws_to</code></td>
<td>
<p>Workspace to update.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>update_metadata()</code> checks the SA-Processings and SaItems' names
within the two workspaces before updating ws_to's metadata.
<code>update_metadata_roughly()</code> does not do any checks: <code>ws_to</code>'s first
SA-Processing's first SaItem metadata
is updated with <code>ws_from</code>'s first SA-Processing's first SaItem metadata.
Both functions create and return a new workspace containing
the updated series.
</p>


<h3>Value</h3>

<p>the updated <code>workspace</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")

path_to_ws1 &lt;- file.path(
    system.file("extdata", package = "rjdworkspace"),
    "WS/ws_example_1.xml"
)
path_to_ws2 &lt;- file.path(
    system.file("extdata", package = "rjdworkspace"),
    "WS/ws_example_2.xml"
)

ws_1 &lt;- load_workspace(path_to_ws1)
compute(ws_1)
ws_2 &lt;- load_workspace(path_to_ws2)
compute(ws_2)

updated_workspace &lt;- update_metadata_roughly(ws_from = ws_1, ws_to = ws_2)
path_to_output &lt;- file.path(tempdir(), "ws_update_meta_roughly.xml")
save_workspace(workspace = updated_workspace, file = path_to_output)

updated_workspace &lt;- update_metadata(ws_from = ws_1, ws_to = ws_2)
path_to_output &lt;- file.path(tempdir(), "ws_update_meta.xml")
save_workspace(workspace = updated_workspace, file = path_to_output)

</code></pre>

<hr>
<h2 id='update_path'>Update the path to the raw series file</h2><span id='topic+update_path'></span>

<h3>Description</h3>

<p>Function to update the path of the raw data file in a workspace.
This function works with .csv, .xls and .xlsx format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_path(ws_xml_path, raw_data_path, pos_sap, pos_sa_item, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_path_+3A_ws_xml_path">ws_xml_path</code></td>
<td>
<p>the path to the xml file of the workspace</p>
</td></tr>
<tr><td><code id="update_path_+3A_raw_data_path">raw_data_path</code></td>
<td>
<p>the new path to the raw data</p>
</td></tr>
<tr><td><code id="update_path_+3A_pos_sap">pos_sap</code></td>
<td>
<p>the index of the SA-Processing containing the series
(Optional)</p>
</td></tr>
<tr><td><code id="update_path_+3A_pos_sa_item">pos_sa_item</code></td>
<td>
<p>the index of the SA-Item containing the series (Optional)</p>
</td></tr>
<tr><td><code id="update_path_+3A_verbose">verbose</code></td>
<td>
<p>A boolean to print indications on the processing
status (optional and TRUE by default)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument <code>pos_sap</code> and <code>pos_sa_item</code> are optional.
If <code>pos_sa_item</code> is not supplied, all SA-Item will be updated.
If <code>pos_sap</code> is not supplied, all SA-Processing will be updated.
</p>
<p>If <code>pos_sa_item</code> is supplied, <code>pos_sap</code> must be specified.
</p>
<p>It's also important that the new data file has the same structure as the
previous file :
- same column names
- same column position
- same extension and format (.csv, .xls or .xlsx)
</p>


<h3>Value</h3>

<p>the <code>workspace</code> ws_to augmented with series present in ws_from and
not already in ws_to
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library("RJDemetra")
new_dir &lt;- tempdir()
ws_template_path &lt;- file.path(system.file("extdata", package = "rjdworkspace"),
                         "WS")

# Moving the WS in a temporary environment
copy_ws(
    ws_name = "ws_example_path",
    from = ws_template_path,
    to = new_dir
)

# Moving the raw data in a temporary environment
data_path &lt;- file.path(system.file("extdata", package = "rjdworkspace"),
                       "data_file.csv")
file.copy(
    from = data_path,
    to = new_dir
)

path_ws &lt;- file.path(new_dir, "ws_example_path.xml")
new_raw_data_path &lt;- file.path(new_dir, "data_file.csv")

update_path(
    ws_xml_path = path_ws,
    raw_data_path = new_raw_data_path,
    pos_sap = 1L,
    pos_sa_item = 1L:2L
)
update_path(
    ws_xml_path = path_ws,
    raw_data_path = new_raw_data_path,
    pos_sap = 1L
)
update_path(
    ws_xml_path = path_ws,
    raw_data_path = new_raw_data_path
)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
