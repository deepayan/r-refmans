<!DOCTYPE html><html lang="en"><head><title>Help for package RSocrata</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RSocrata}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#fieldName'><p>Convert Socrata human-readable column name to field name</p></a></li>
<li><a href='#isFourByFour'><p>Checks the validity of the syntax for a potential Socrata dataset Unique Identifier, also known as a 4x4.</p></a></li>
<li><a href='#ls.socrata'><p>List datasets available from a Socrata domain</p></a></li>
<li><a href='#posixify'><p>Convert Socrata calendar_date string to POSIX</p></a></li>
<li><a href='#read.socrata'><p>Get a full Socrata data set as an R data frame</p></a></li>
<li><a href='#validateUrl'><p>Convert, if necessary, URL to valid REST API URL supported by Socrata.</p></a></li>
<li><a href='#write.socrata'><p>Write to a Socrata dataset (full replace or upsert)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download or Upload 'Socrata' Data Sets</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides easier interaction with
    'Socrata' open data portals <a href="https://dev.socrata.com">https://dev.socrata.com</a>.
    Users can provide a 'Socrata' data set resource URL,
    or a 'Socrata' Open Data API (SODA) web query,
    or a 'Socrata' "human-friendly" URL,
    returns an R data frame. Converts dates to 'POSIX'
    format and manages throttling by 'Socrata'.
    Users can upload data to 'Socrata' portals directly
    from R.</td>
</tr>
<tr>
<td>Version:</td>
<td>1.7.15-1</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-13</td>
</tr>
<tr>
<td>Author:</td>
<td>Hugh Devlin, Ph. D., Tom Schenk, Jr., Gene Leynes, Nick Lucius, John Malc, Mark Silverberg, and Peter Schmeideskamp</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>"Gene Leynes" &lt;developers@cityofchicago.org&gt;</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>httr (&ge; 1.0.0), jsonlite (&ge; 0.9.16), mime (&ge; 0.3), plyr (&ge;
1.8.4)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 0.10.0), roxygen2 (&ge; 4.1.0), readr (&ge; 0.2.2)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/Chicago/RSocrata">https://github.com/Chicago/RSocrata</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Chicago/RSocrata/issues">https://github.com/Chicago/RSocrata/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-30 19:22:44 UTC; 375492</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-31 07:30:11 UTC</td>
</tr>
</table>
<hr>
<h2 id='fieldName'>Convert Socrata human-readable column name to field name</h2><span id='topic+fieldName'></span>

<h3>Description</h3>

<p>Convert Socrata human-readable column name,
as it might appear in the first row of data,
to field name as it might appear in the HTTP header;
that is, lower case, periods replaced with underscores#'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fieldName(humanName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fieldName_+3A_humanname">humanName</code></td>
<td>
<p>- a Socrata human-readable column name</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Socrata field name
</p>


<h3>Author(s)</h3>

<p>Hugh J. Devlin, Ph. D. <a href="mailto:Hugh.Devlin@cityofchicago.org">Hugh.Devlin@cityofchicago.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>fieldName("Number.of.Stations") # number_of_stations
</code></pre>

<hr>
<h2 id='isFourByFour'>Checks the validity of the syntax for a potential Socrata dataset Unique Identifier, also known as a 4x4.</h2><span id='topic+isFourByFour'></span>

<h3>Description</h3>

<p>Will check the validity of a potential dataset unique identifier
supported by Socrata. It will provide an exception if the syntax
does not align to Socrata unique identifiers. It only checks for
the validity of the syntax, but does not check if it actually exists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isFourByFour(fourByFour)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="isFourByFour_+3A_fourbyfour">fourByFour</code></td>
<td>
<p>- a string; character vector of length one</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE if is valid Socrata unique identifier, FALSE otherwise
</p>


<h3>Author(s)</h3>

<p>Tom Schenk Jr <a href="mailto:tom.schenk@cityofchicago.org">tom.schenk@cityofchicago.org</a>
</p>

<hr>
<h2 id='ls.socrata'>List datasets available from a Socrata domain</h2><span id='topic+ls.socrata'></span>

<h3>Description</h3>

<p>List datasets available from a Socrata domain
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ls.socrata(url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ls.socrata_+3A_url">url</code></td>
<td>
<p>- A Socrata URL. This simply points to the site root.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an R data frame containing a listing of datasets along with
various metadata.
</p>


<h3>Author(s)</h3>

<p>Peter Schmiedeskamp <a href="mailto:pschmied@uw.edu">pschmied@uw.edu</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Download list of data sets
df &lt;- ls.socrata("https://soda.demo.socrata.com")
# Check schema definition for metadata
attributes(df)

## End(Not run)
</code></pre>

<hr>
<h2 id='posixify'>Convert Socrata calendar_date string to POSIX</h2><span id='topic+posixify'></span>

<h3>Description</h3>

<p>Convert Socrata calendar_date string to POSIX
</p>


<h3>Usage</h3>

<pre><code class='language-R'>posixify(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="posixify_+3A_x">x</code></td>
<td>
<p>- character vector in one of two Socrata calendar_date formats</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a POSIX date
</p>


<h3>Author(s)</h3>

<p>Hugh J. Devlin, Ph. D. <a href="mailto:Hugh.Devlin@cityofchicago.org">Hugh.Devlin@cityofchicago.org</a>
</p>

<hr>
<h2 id='read.socrata'>Get a full Socrata data set as an R data frame</h2><span id='topic+read.socrata'></span>

<h3>Description</h3>

<p>Manages throttling and POSIX date-time conversions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.socrata(
  url,
  app_token = NULL,
  email = NULL,
  password = NULL,
  stringsAsFactors = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read.socrata_+3A_url">url</code></td>
<td>
<p>- A Socrata resource URL, 
or a Socrata &quot;human-friendly&quot; URL, 
or Socrata Open Data Application Program Interface (SODA) query 
requesting a comma-separated download format (.csv suffix), 
May include SoQL parameters, 
but is assumed to not include a SODA offset parameter</p>
</td></tr>
<tr><td><code id="read.socrata_+3A_app_token">app_token</code></td>
<td>
<p>- a string; SODA API token used to query the data 
portal <a href="https://dev.socrata.com/consumers/getting-started.html">https://dev.socrata.com/consumers/getting-started.html</a></p>
</td></tr>
<tr><td><code id="read.socrata_+3A_email">email</code></td>
<td>
<p>- Optional. The email to the Socrata account with read access to the dataset</p>
</td></tr>
<tr><td><code id="read.socrata_+3A_password">password</code></td>
<td>
<p>- Optional. The password associated with the email to the Socrata account</p>
</td></tr>
<tr><td><code id="read.socrata_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>- Optional. Should character columns be converted to factor (TRUE or FALSE)?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an R data frame with POSIX dates
</p>


<h3>Author(s)</h3>

<p>Hugh J. Devlin, Ph. D. <a href="mailto:Hugh.Devlin@cityofchicago.org">Hugh.Devlin@cityofchicago.org</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Human-readable URL:
url &lt;- "https://soda.demo.socrata.com/dataset/USGS-Earthquakes-for-2012-11-01-API/4334-bgaj"
df &lt;- read.socrata(url)
# SoDA URL:
df &lt;- read.socrata("https://soda.demo.socrata.com/resource/4334-bgaj.csv")
# Download private dataset
socrataEmail &lt;- Sys.getenv("SOCRATA_EMAIL", "mark.silverberg+soda.demo@socrata.com")
socrataPassword &lt;- Sys.getenv("SOCRATA_PASSWORD", "7vFDsGFDUG")
privateResourceToReadCsvUrl &lt;- "https://soda.demo.socrata.com/resource/a9g2-feh2.csv" # dataset
read.socrata(url = privateResourceToReadCsvUrl, email = socrataEmail, password = socrataPassword)
# Using an API key to read datasets (reduces throttling)
token &lt;- "ew2rEMuESuzWPqMkyPfOSGJgE"
df &lt;- read.socrata("https://soda.demo.socrata.com/resource/4334-bgaj.csv", 
                   app_token = token)
nrow(df)
closeAllConnections()

## End(Not run)
</code></pre>

<hr>
<h2 id='validateUrl'>Convert, if necessary, URL to valid REST API URL supported by Socrata.</h2><span id='topic+validateUrl'></span>

<h3>Description</h3>

<p>Will convert a human-readable URL to a valid REST API call
supported by Socrata. It will accept a valid API URL if provided
by users and will also convert a human-readable URL to a valid API
URL. Will accept queries with optional API token as a separate
argument or will also accept API token in the URL query. Will
resolve conflicting API token by deferring to original URL.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validateUrl(url, app_token)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validateUrl_+3A_url">url</code></td>
<td>
<p>- a string; character vector of length one</p>
</td></tr>
<tr><td><code id="validateUrl_+3A_app_token">app_token</code></td>
<td>
<p>- a string; SODA API token used to query the data 
portal <a href="https://dev.socrata.com/consumers/getting-started.html">https://dev.socrata.com/consumers/getting-started.html</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a - valid Url
</p>


<h3>Author(s)</h3>

<p>Tom Schenk Jr <a href="mailto:tom.schenk@cityofchicago.org">tom.schenk@cityofchicago.org</a>
</p>

<hr>
<h2 id='write.socrata'>Write to a Socrata dataset (full replace or upsert)</h2><span id='topic+write.socrata'></span>

<h3>Description</h3>

<p>Method for updating Socrata datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.socrata(
  dataframe,
  dataset_json_endpoint,
  update_mode,
  email,
  password,
  app_token = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.socrata_+3A_dataframe">dataframe</code></td>
<td>
<p>- dataframe to upload to Socrata</p>
</td></tr>
<tr><td><code id="write.socrata_+3A_dataset_json_endpoint">dataset_json_endpoint</code></td>
<td>
<p>- Socrata Open Data Application Program Interface (SODA) endpoint (JSON only for now)</p>
</td></tr>
<tr><td><code id="write.socrata_+3A_update_mode">update_mode</code></td>
<td>
<p>- &quot;UPSERT&quot; or &quot;REPLACE&quot;; consult https://dev.socrata.com/publishers/getting-started.html</p>
</td></tr>
<tr><td><code id="write.socrata_+3A_email">email</code></td>
<td>
<p>- The email to the Socrata account with read access to the dataset</p>
</td></tr>
<tr><td><code id="write.socrata_+3A_password">password</code></td>
<td>
<p>- The password associated with the email to the Socrata account</p>
</td></tr>
<tr><td><code id="write.socrata_+3A_app_token">app_token</code></td>
<td>
<p>- a (non-required) string; SODA API token can be used to query the data 
portal <a href="https://dev.socrata.com/consumers/getting-started.html">https://dev.socrata.com/consumers/getting-started.html</a></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Mark Silverberg <a href="mailto:mark.silverberg@socrata.com">mark.silverberg@socrata.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Store user email and password
socrataEmail &lt;- Sys.getenv("SOCRATA_EMAIL", "mark.silverberg+soda.demo@socrata.com")
socrataPassword &lt;- Sys.getenv("SOCRATA_PASSWORD", "7vFDsGFDUG")

datasetToAddToUrl &lt;- "https://soda.demo.socrata.com/resource/xh6g-yugi.json" # dataset

# Generate some data
x &lt;- sample(-1000:1000, 1)
y &lt;- sample(-1000:1000, 1)
df_in &lt;- data.frame(x,y)

# Upload to Socrata
write.socrata(df_in,datasetToAddToUrl,"UPSERT",socrataEmail,socrataPassword)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
