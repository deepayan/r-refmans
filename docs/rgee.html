<!DOCTYPE html><html><head><title>Help for package rgee</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rgee}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#ee'><p>Main Earth Engine module</p></a></li>
<li><a href='#ee_as_rast'><p>Convert an Earth Engine (EE) image in a SpatRaster object</p></a></li>
<li><a href='#ee_as_raster'><p>Convert an Earth Engine (EE) image in a raster object</p></a></li>
<li><a href='#ee_as_sf'><p>Convert an Earth Engine table into a sf object</p></a></li>
<li><a href='#ee_as_stars'><p>Convert an Earth Engine (EE) image in a stars object</p></a></li>
<li><a href='#ee_as_thumbnail'><p>Create an R spatial gridded object from an EE thumbnail image</p></a></li>
<li><a href='#ee_Authenticate'><p>Prompts the user to authorize access to Earth Engine via OAuth2.</p></a></li>
<li><a href='#ee_check-tools'><p>Interface to check Python and non-R dependencies</p></a></li>
<li><a href='#ee_clean_container'><p>Delete files from either a Folder (Google Drive) or a Bucket (GCS)</p></a></li>
<li><a href='#ee_clean_pyenv'><p>Remove rgee system variables from .Renviron</p></a></li>
<li><a href='#ee_clean_user_credentials'><p>Clean credentials for a specific user</p></a></li>
<li><a href='#ee_drive_to_local'><p>Move results from Google Drive to a local directory</p></a></li>
<li><a href='#ee_extract'><p>Extract values from EE Images or ImageCollections objects</p></a></li>
<li><a href='#ee_gcs_to_local'><p>Move results from Google Cloud Storage to a local directory</p></a></li>
<li><a href='#ee_get_assethome'><p>Get the Asset home name</p></a></li>
<li><a href='#ee_get_date_ic'><p>Get the date of a EE ImageCollection</p></a></li>
<li><a href='#ee_get_date_img'><p>Get the date of a EE Image</p></a></li>
<li><a href='#ee_get_earthengine_path'><p>Get the path where the credentials are stored</p></a></li>
<li><a href='#ee_help'><p>Documentation for Earth Engine Objects</p></a></li>
<li><a href='#ee_image_info'><p>Approximate size of an EE Image object</p></a></li>
<li><a href='#ee_image_to_asset'><p>Creates a task to export an EE Image to their EE Assets.</p></a></li>
<li><a href='#ee_image_to_drive'><p>Creates a task to export an EE Image to Drive.</p></a></li>
<li><a href='#ee_image_to_gcs'><p>Creates a task to export an EE Image to Google Cloud Storage.</p></a></li>
<li><a href='#ee_imagecollection_to_local'><p>Save an EE ImageCollection to the local system.</p></a></li>
<li><a href='#ee_Initialize'><p>Authenticate and Initialize Earth Engine</p></a></li>
<li><a href='#ee_install'><p>Create an isolated Python virtual environment with all rgee dependencies.</p></a></li>
<li><a href='#ee_install_set_pyenv'><p>Specify a Python environment for rgee</p></a></li>
<li><a href='#ee_install_upgrade'><p>Upgrade the Earth Engine Python API</p></a></li>
<li><a href='#ee_manage-tools'><p>Interface to manage the Earth Engine Asset</p></a></li>
<li><a href='#ee_monitoring'><p>Monitoring Earth Engine task progress</p></a></li>
<li><a href='#ee_print'><p>Print and return metadata about Spatial Earth Engine Objects</p></a></li>
<li><a href='#ee_table_to_asset'><p>Creates a task to export a FeatureCollection to an EE table asset.</p></a></li>
<li><a href='#ee_table_to_drive'><p>Creates a task to export a FeatureCollection to Google Drive.</p></a></li>
<li><a href='#ee_table_to_gcs'><p>Creates a task to export a FeatureCollection to Google Cloud Storage.</p></a></li>
<li><a href='#ee_user_info'><p>Display the credentials and general info of the initialized user</p></a></li>
<li><a href='#ee_users'><p>Display the credentials of all users as a table</p></a></li>
<li><a href='#ee_utils_cog_metadata'><p>Return metadata of a COG tile server</p></a></li>
<li><a href='#ee_utils_create_json'><p>Convert an R list into a JSON file in the temp() file</p></a></li>
<li><a href='#ee_utils_create_manifest_image'><p>Create a manifest to upload an image</p></a></li>
<li><a href='#ee_utils_create_manifest_table'><p>Create a manifest to upload a table</p></a></li>
<li><a href='#ee_utils_dataset_display'><p>Search into the Earth Engine Data Catalog</p></a></li>
<li><a href='#ee_utils_future_value'><p>The value of a future or the values of all elements in a container</p></a></li>
<li><a href='#ee_utils_get_crs'><p>Convert EPSG, ESRI or SR-ORG code into a OGC WKT</p></a></li>
<li><a href='#ee_utils_py_to_r'><p>Convert between Python and R objects</p></a></li>
<li><a href='#ee_utils_pyfunc'><p>Wrap an R function in a Python function with the same signature.</p></a></li>
<li><a href='#ee_utils_sak_copy'><p>Stores a Service account key (SaK) inside the EE folder</p></a></li>
<li><a href='#ee_utils_sak_validate'><p>Validate a Service account key (SaK)</p></a></li>
<li><a href='#ee_utils_shp_to_zip'><p>Create a zip file from an sf object</p></a></li>
<li><a href='#ee_version'><p>Earth Engine API version</p></a></li>
<li><a href='#eedate_to_rdate'><p>Pass an Earth Engine date object to R</p></a></li>
<li><a href='#gcs_to_ee_image'><p>Move a GeoTIFF image from GCS to their EE assets</p></a></li>
<li><a href='#gcs_to_ee_table'><p>Move a zipped shapefile from GCS to their EE Assets</p></a></li>
<li><a href='#local_to_gcs'><p>Upload local files to Google Cloud Storage</p></a></li>
<li><a href='#Map'><p>R6 object (Map) to display Earth Engine (EE) spatial objects</p></a></li>
<li><a href='#map-operator'><p>EarthEngineMap + EarthEngineMap; adds data from the second map to the first</p></a></li>
<li><a href='#print.ee.computedobject.ComputedObject'><p>print Earth Engine object</p></a></li>
<li><a href='#R6Map'><p>R6 class to display Earth Engine (EE) spatial objects</p></a></li>
<li><a href='#raster_as_ee'><p>Convert a Raster* object into an EE Image object</p></a></li>
<li><a href='#rdate_to_eedate'><p>Pass an R date object to Earth Engine</p></a></li>
<li><a href='#rgee-package'><p>rgee: An R package for interacting with Google Earth Engine</p></a></li>
<li><a href='#sf_as_ee'><p>Convert an sf object to an EE object</p></a></li>
<li><a href='#stars_as_ee'><p>Convert a stars or stars-proxy object into an EE Image object</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>R Bindings for Calling the 'Earth Engine' API</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>Description:</td>
<td>Earth Engine <a href="https://earthengine.google.com/">https://earthengine.google.com/</a> client library for R. All
  of the 'Earth Engine' API classes, modules, and functions are made available. Additional
  functions implemented include importing (exporting) of Earth Engine spatial objects, 
  extraction of time series, interactive map display, assets management interface, 
  and metadata display. See <a href="https://r-spatial.github.io/rgee/">https://r-spatial.github.io/rgee/</a> for further details.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2.0)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods, reticulate (&ge; 1.27), rstudioapi (&ge; 0.7), leaflet
(&ge; 2.0.2), magrittr, jsonlite, processx, leafem, crayon, R6,
cli</td>
</tr>
<tr>
<td>Suggests:</td>
<td>magick, geojsonio, sf, stars, googledrive (&ge; 2.0.0), gargle,
httr, digest, testthat, future, terra, covr, knitr, rmarkdown,
png, googleCloudStorageR, leaflet.extras2, spelling, raster</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/r-spatial/rgee/">https://github.com/r-spatial/rgee/</a>,
<a href="https://r-spatial.github.io/rgee/">https://r-spatial.github.io/rgee/</a>,
<a href="https://github.com/google/earthengine-api/">https://github.com/google/earthengine-api/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/r-spatial/rgee/issues/">https://github.com/r-spatial/rgee/issues/</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-27 08:03:41 UTC; gonzalo</td>
</tr>
<tr>
<td>Author:</td>
<td>Cesar Aybar <a href="https://orcid.org/0000-0003-2745-9535"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre],
  Wu Qiusheng <a href="https://orcid.org/0000-0001-5437-4073"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Lesly Bautista <a href="https://orcid.org/0000-0003-3523-8687"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Roy Yali <a href="https://orcid.org/0000-0003-4542-3755"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Antony Barja <a href="https://orcid.org/0000-0001-5921-2858"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Kevin Ushey [ctb],
  Jeroen Ooms <a href="https://orcid.org/0000-0002-4035-0289"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Tim Appelhans [ctb],
  JJ Allaire [ctb],
  Yuan Tang [ctb],
  Samapriya Roy [ctb],
  MariaElena Adauto <a href="https://orcid.org/0000-0002-2154-2429"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Gabriel Carrasco <a href="https://orcid.org/0000-0002-6945-0419"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Henrik Bengtsson [ctb],
  Jeffrey Hollister [rev] (Hollister reviewed the package for JOSS, see
    https://github.com/openjournals/joss-reviews/issues/2272/),
  Gennadii Donchyts [rev] (Gena reviewed the package for JOSS, see
    https://github.com/openjournals/joss-reviews/issues/2272/),
  Marius Appel [rev] (Appel reviewed the package for JOSS, see
    https://github.com/openjournals/joss-reviews/issues/2272/)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Cesar Aybar &lt;csaybar@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-27 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>

<hr>
<h2 id='ee'>Main Earth Engine module</h2><span id='topic+ee'></span>

<h3>Description</h3>

<p>Interface to main Earth Engine module. Provides access to the top level
classes and functions as well as sub-modules (e.g. <code>ee$Image</code>,
<code>ee$FeatureCollection$first</code>, etc.).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee
</code></pre>


<h3>Format</h3>

<p>Earth Engine module
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize()

ee_img &lt;- ee$Image(0)
ee_ic &lt;- ee$ImageCollection(ee_img)

print(ee_img$getInfo())
print(ee_ic$getInfo())

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_as_rast'>Convert an Earth Engine (EE) image in a SpatRaster object</h2><span id='topic+ee_as_rast'></span>

<h3>Description</h3>

<p>Convert an ee$Image in a SpatRaster object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_as_rast(
  image,
  region = NULL,
  dsn = NULL,
  via = "drive",
  container = "rgee_backup",
  scale = NULL,
  maxPixels = 1e+09,
  grid_batch = 1024 * 1024,
  lazy = FALSE,
  public = FALSE,
  add_metadata = TRUE,
  timePrefix = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_as_rast_+3A_image">image</code></td>
<td>
<p>ee$Image to be converted into a SpatRaster object.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_region">region</code></td>
<td>
<p>EE Geometry (ee$Geometry$Polygon) which specifies the region
to export. CRS needs to be the same that the argument <code>image</code>.
Otherwise, it will be forced. If not specified, image bounds are taken.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary file is
created.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_via">via</code></td>
<td>
<p>Character. Method to export the image. Three methods are
implemented: &quot;getDownloadURL&quot;, &quot;drive&quot;, &quot;gcs&quot;. For &quot;drive&quot; and &quot;gcs&quot; see details.
Use &quot;getDownloadURL&quot; for small images.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_scale">scale</code></td>
<td>
<p>Numeric. The resolution in meters per pixel. Defaults
to the native resolution of the image.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Numeric. The maximum allowable number of pixels in the exported
image. If the exported region covers more pixels than the specified limit in the
given projection, the task will fail. Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_grid_batch">grid_batch</code></td>
<td>
<p>Numeric. Argument used if via is set as &quot;getDownloadURL&quot;. The number of
pixels to download in each batch without considering the number of bands. Default
to 1048576 -(1024*1024).</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
See details.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the image is created.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_add_metadata">add_metadata</code></td>
<td>
<p>Add metadata to the stars_proxy object. See details.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Logical. Add current date and time (<code>Sys.time()</code>) as
a prefix to files to export. This parameter helps to avoid exported files
with the same name. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_as_rast_+3A_...">...</code></td>
<td>
<p>Extra exporting argument. See <a href="#topic+ee_image_to_drive">ee_image_to_drive</a> and
<a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_as_rast</code> supports the download of <code>ee$Images</code> using: &quot;drive&quot;
(<a href="https://CRAN.R-project.org/package=googledrive">Google Drive</a>) and &quot;gcs&quot;
(<a href="https://CRAN.R-project.org/package=googleCloudStorageR">
Google Cloud Storage</a>). In both cases, <code>ee_as_rast</code> performs as follows:
</p>

<ul>
<li><p>1. A task is started (i.e., <code>ee$batch$Task$start()</code>) to
move the <code>ee$Image</code> from Earth Engine to the intermediate container
specified in the argument <code>via</code>.
</p>
</li>
<li><p>2. If the argument <code>lazy</code> is TRUE, the task is not be
monitored. This is useful to lunch several tasks simultaneously and
calls them later using <code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code> or
<code><a href="future.html#topic+value">future::value</a></code>. At the end of this step,
the <code>ee$Image</code> is stored on the path specified in the argument
<code>dsn</code>.
</p>
</li>
<li><p>3. Finally, if the argument <code>add_metadata</code> is TRUE, a list
with the following elements are added to the stars-proxy object.
</p>

<ul>
<li><p><b>if via is &quot;drive&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>drive_name: </b>Name of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_id: </b>Id of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_download_link: </b>Download link to the image.
</p>
</li></ul>

</li></ul>


<ul>
<li><p><b>if via is &quot;gcs&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>gcs_name: </b>Name of the Image in Google Cloud Storage.
</p>
</li>
<li><p><b>gcs_bucket: </b>Name of the bucket.
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Format of the image.
</p>
</li>
<li><p><b>gcs_public_link: </b>Download link to the image.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the image.
</p>
</li></ul>

</li></ul>

<p>Run <code>attr(stars, "metadata")</code> to get the list.

</p>
</li></ul>

<p>For getting more information about exporting data from Earth Engine, take
a look at the
<a href="https://developers.google.com/earth-engine/guides/exporting">Google
Earth Engine Guide - Export data</a>.
</p>


<h3>Value</h3>

<p>A SpatRaster object
</p>


<h3>See Also</h3>

<p>Other image download functions: 
<code><a href="#topic+ee_as_raster">ee_as_raster</a>()</code>,
<code><a href="#topic+ee_as_stars">ee_as_stars</a>()</code>,
<code><a href="#topic+ee_as_thumbnail">ee_as_thumbnail</a>()</code>,
<code><a href="#topic+ee_imagecollection_to_local">ee_imagecollection_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize(drive = TRUE, gcs = TRUE)
ee_user_info()

# Define an image.
img &lt;- ee$Image("LANDSAT/LC08/C01/T1_SR/LC08_038029_20180810")$
  select(c("B4", "B3", "B2"))$
  divide(10000)

# OPTIONAL display it using Map
Map$centerObject(eeObject = img)
Map$addLayer(eeObject = img, visParams = list(max = 0.4,gamma=0.1))

# Define an area of interest.
geometry &lt;- ee$Geometry$Rectangle(
  coords = c(-110.8, 44.6, -110.6, 44.7),
  proj = "EPSG:4326",
  geodesic = FALSE
)

## getDownloadURL - Method 01 (for small images)
img_02 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  scale = 10
)

## drive - Method 02
# Simple
img_02 &lt;- ee_as_rast(
  image = img,
  region = geometry,
  via = "drive"
)

# Lazy
img_02 &lt;- ee_as_rast(
  image = img,
  region = geometry,
  via = "drive",
  lazy = TRUE
)

img_02_result &lt;- img_02 %&gt;% ee_utils_future_value()
attr(img_02_result, "metadata") # metadata

## gcs - Method 03
# Simple
img_03 &lt;- ee_as_rast(
 image = img,
 region = geometry,
 container = "rgee_dev",
 via = "gcs"
)

# Lazy
img_03 &lt;- ee_as_rast(
 image = img,
 region = geometry,
 container = "rgee_dev",
 lazy = TRUE,
 via = "gcs"
)

img_03_result &lt;- img_03 %&gt;% ee_utils_future_value()
attr(img_03_result, "metadata") # metadata

# OPTIONAL: clean containers
# ee_clean_container(name = "rgee_backup", type = "drive")
# ee_clean_container(name = "rgee_dev", type = "gcs")

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_as_raster'>Convert an Earth Engine (EE) image in a raster object</h2><span id='topic+ee_as_raster'></span>

<h3>Description</h3>

<p>Convert an ee$Image in a raster object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_as_raster(
  image,
  region = NULL,
  dsn = NULL,
  via = "drive",
  container = "rgee_backup",
  scale = NULL,
  maxPixels = 1e+09,
  lazy = FALSE,
  public = FALSE,
  add_metadata = TRUE,
  timePrefix = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_as_raster_+3A_image">image</code></td>
<td>
<p>ee$Image to be converted into a raster object.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_region">region</code></td>
<td>
<p>EE Geometry (ee$Geometry$Polygon) which specifies the region
to export. CRS needs to be the same that the argument <code>image</code>.
Otherwise, it will be forced. If not specified, image bounds are taken.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary file is
created.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_via">via</code></td>
<td>
<p>Character. Method to export the image. Two methods are
implemented: &quot;drive&quot;, &quot;gcs&quot;. See details.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_scale">scale</code></td>
<td>
<p>Numeric. The resolution in meters per pixel. Defaults
to the native resolution of the image.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Numeric. The maximum allowed number of pixels in the
exported image. The task will fail if the exported region covers
more pixels in the specified projection. Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
See details.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the image is created.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_add_metadata">add_metadata</code></td>
<td>
<p>Add metadata to the stars_proxy object. See details.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Logical. Add current date and time (<code>Sys.time()</code>) as
a prefix to files to export. This parameter helps to avoid exported files
with the same name. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_as_raster_+3A_...">...</code></td>
<td>
<p>Extra exporting argument. See <a href="#topic+ee_image_to_drive">ee_image_to_drive</a> and
<a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_as_raster</code> supports the download of <code>ee$Images</code>
by two different options: &quot;drive&quot;
(<a href="https://CRAN.R-project.org/package=googledrive">Google Drive</a>) and &quot;gcs&quot;
(<a href="https://CRAN.R-project.org/package=googleCloudStorageR">
Google Cloud Storage</a>). In both cases, <code>ee_as_stars</code> works as follow:
</p>

<ul>
<li><p>1. A task is started (i.e., <code>ee$batch$Task$start()</code>) to
move the <code>ee$Image</code> from Earth Engine to the intermediate container
specified in the argument <code>via</code>.
</p>
</li>
<li><p>2. If the argument <code>lazy</code> is TRUE, the task is not be
monitored. This is useful to lunch several tasks simultaneously and
calls them later using <code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code> or
<code><a href="future.html#topic+value">future::value</a></code>. At the end of this step,
the <code>ee$Image</code> is stored on the path specified in the argument
<code>dsn</code>.
</p>
</li>
<li><p>3. Finally, if the argument <code>add_metadata</code> is TRUE, a list
with the following elements are added to the stars-proxy object.
</p>

<ul>
<li><p><b>if via is &quot;drive&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>drive_name: </b>Name of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_id: </b>Id of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_download_link: </b>Download link to the image.
</p>
</li></ul>

</li></ul>


<ul>
<li><p><b>if via is &quot;gcs&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>gcs_name: </b>Name of the Image in Google Cloud Storage.
</p>
</li>
<li><p><b>gcs_bucket: </b>Name of the bucket.
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Format of the image.
</p>
</li>
<li><p><b>gcs_public_link: </b>Download link to the image.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the image.
</p>
</li></ul>

</li></ul>

<p>Run <code>raster@history@metadata</code> to get the list.

</p>
</li></ul>

<p>For getting more information about exporting data from Earth Engine, take
a look at the
<a href="https://developers.google.com/earth-engine/guides/exporting">Google
Earth Engine Guide - Export data</a>.
</p>


<h3>Value</h3>

<p>A RasterStack object
</p>


<h3>See Also</h3>

<p>Other image download functions: 
<code><a href="#topic+ee_as_rast">ee_as_rast</a>()</code>,
<code><a href="#topic+ee_as_stars">ee_as_stars</a>()</code>,
<code><a href="#topic+ee_as_thumbnail">ee_as_thumbnail</a>()</code>,
<code><a href="#topic+ee_imagecollection_to_local">ee_imagecollection_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize(drive = TRUE, gcs = TRUE)
ee_user_info()

# Define an image.
img &lt;- ee$Image("LANDSAT/LC08/C01/T1_SR/LC08_038029_20180810")$
  select(c("B4", "B3", "B2"))$
  divide(10000)

# OPTIONAL display it using Map
Map$centerObject(eeObject = img)
Map$addLayer(eeObject = img, visParams = list(max = 0.4,gamma=0.1))

# Define an area of interest.
geometry &lt;- ee$Geometry$Rectangle(
  coords = c(-110.8, 44.6, -110.6, 44.7),
  proj = "EPSG:4326",
  geodesic = FALSE
)

## drive - Method 01
# Simple
img_02 &lt;- ee_as_raster(
  image = img,
  region = geometry,
  via = "drive"
)

# Lazy
img_02 &lt;- ee_as_raster(
  image = img,
  region = geometry,
  via = "drive",
  lazy = TRUE
)

img_02_result &lt;- img_02 %&gt;% ee_utils_future_value()
img_02_result@history$metadata # metadata

## gcs - Method 02
# Simple
img_03 &lt;- ee_as_raster(
 image = img,
 region = geometry,
 container = "rgee_dev",
 via = "gcs"
)

# Lazy
img_03 &lt;- ee_as_raster(
 image = img,
 region = geometry,
 container = "rgee_dev",
 lazy = TRUE,
 via = "gcs"
)

img_03_result &lt;- img_03 %&gt;% ee_utils_future_value()
img_03_result@history$metadata # metadata

# OPTIONAL: clean containers
# ee_clean_container(name = "rgee_backup", type = "drive")
# ee_clean_container(name = "rgee_dev", type = "gcs")

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_as_sf'>Convert an Earth Engine table into a sf object</h2><span id='topic+ee_as_sf'></span>

<h3>Description</h3>

<p>Convert an Earth Engine table into a sf object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_as_sf(
  x,
  dsn,
  overwrite = TRUE,
  via = "getInfo",
  container = "rgee_backup",
  crs = NULL,
  maxFeatures = 5000,
  selectors = NULL,
  lazy = FALSE,
  public = FALSE,
  add_metadata = TRUE,
  timePrefix = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_as_sf_+3A_x">x</code></td>
<td>
<p>Earth Engine table (ee$FeatureCollection) to be converted into a sf
object.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. In case <code>dsn</code> is missing,
a shapefile is created in the <code>tmp()</code> directory.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Delete data source <code>dsn</code> before attempting
to write?.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_via">via</code></td>
<td>
<p>Character. Method to export the image. Three method are
implemented: &quot;getInfo&quot;, &quot;drive&quot;, &quot;gcs&quot;. See details.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported into (ignored if <code>via</code> is not defined as &quot;drive&quot; or
&quot;gcs&quot;).</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_crs">crs</code></td>
<td>
<p>Integer or Character. Coordinate Reference System (CRS)
for the EE table. If it is NULL, <code>ee_as_sf</code> will take the CRS of
the first element.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_maxfeatures">maxFeatures</code></td>
<td>
<p>Numeric. The maximum number of features allowed for export (ignore if <code>via</code> is not set as &quot;getInfo&quot;). The task will fail
if the exported region covers more features than the specified in
<code>maxFeatures</code>. Default is 5000.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_selectors">selectors</code></td>
<td>
<p>List of properties to include in the output, as a
list/vector of strings or a comma-separated string. By default, all properties are
included.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
Ignore if <code>via</code> is set as &quot;getInfo&quot;. See details.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the file is created.
See details.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_add_metadata">add_metadata</code></td>
<td>
<p>Add metadata to the sf object. See details.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Logical. Add current date and time (<code>Sys.time()</code>) as
a prefix to export files. This parameter helps to prevent exported files from
having the same name. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_as_sf_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_as_sf</code> supports the download of <code>ee$Geometry</code>, <code>ee$Feature</code>,
and <code>ee$FeatureCollection</code> by three different options:
&quot;getInfo&quot; (which make an REST call to retrieve the data), &quot;drive&quot;
(which use <a href="https://CRAN.R-project.org/package=googledrive">Google Drive</a>)
and &quot;gcs&quot; (which use <a href="https://CRAN.R-project.org/package=googleCloudStorageR">
Google Cloud Storage</a>). The advantage of using &quot;getInfo&quot; is a
direct and faster download. However, there is a limit of 5000 features by
request, which makes it not recommendable for large FeatureCollection. Instead of
&quot;getInfo&quot;, the &quot;drive&quot; and &quot;gcs&quot; options are suitable for large FeatureCollections
because they use an intermediate container. When <code>via</code> is set as &quot;drive&quot; or &quot;gcs&quot;
<code>ee_as_sf</code> performs the following steps:
</p>

<ul>
<li><p>1. A task is started (i.e., <code>ee$batch$Task$start()</code>) to
move the EE Table from Earth Engine to the file storage system (Google Drive
or Google Cloud Storage) specified in the <code>via</code> argument.
</p>
</li>
<li><p>2. If the argument <code>lazy</code> is TRUE, the task will not be
monitored. This is useful for launching several tasks simultaneously and
calling them later using <code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code> or
<code><a href="future.html#topic+value">future::value</a></code>. At the end of this step,
the EE Table is stored under the path specified by the argument
<code>dsn</code>.
</p>
</li>
<li><p>3. Finally, if the argument <code>add_metadata</code> is TRUE, a list
with the following elements is added to the sf object.
</p>

<ul>
<li><p><b>if via is &quot;drive&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Earth Engine task name.
</p>
</li>
<li><p><b>drive_name: </b>Google Drive table name
</p>
</li>
<li><p><b>drive_id: </b>Google Drive table ID
</p>
</li>
<li><p><b>drive_download_link: </b>Link to download the table
</p>
</li></ul>

</li></ul>


<ul>
<li><p><b>if via is &quot;gcs&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Earth Engine task name.
</p>
</li>
<li><p><b>gcs_name: </b>Google Cloud Storage table name
</p>
</li>
<li><p><b>gcs_bucket: </b>Bucket name
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Table format
</p>
</li>
<li><p><b>gcs_public_link: </b>Link to download the table.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the table.
</p>
</li></ul>

</li></ul>

<p>Run <code>attr(sf, "metadata")</code> to get the list.

</p>
</li></ul>

<p>To get more information about exporting data from Earth Engine, take
a look at the
<a href="https://developers.google.com/earth-engine/guides/exporting">Google
Earth Engine Guide - Export data</a>.
</p>


<h3>Value</h3>

<p>An sf object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize(drive = TRUE, gcs = TRUE)

# Region of interest
roi &lt;- ee$Geometry$Polygon(list(
  c(-122.275, 37.891),
  c(-122.275, 37.868),
  c(-122.240, 37.868),
  c(-122.240, 37.891)
))

# TIGER: US Census Blocks Dataset
blocks &lt;- ee$FeatureCollection("TIGER/2010/Blocks")
subset &lt;- blocks$filterBounds(roi)
sf_subset &lt;- ee_as_sf(x = subset)
plot(sf_subset)

# Create Random points in Earth Engine
region &lt;- ee$Geometry$Rectangle(-119.224, 34.669, -99.536, 50.064)
ee_help(ee$FeatureCollection$randomPoints)
ee_randomPoints &lt;- ee$FeatureCollection$randomPoints(region, 100)

# Download via GetInfo
sf_randomPoints &lt;- ee_as_sf(ee_randomPoints)
plot(sf_randomPoints)

# Download via drive
sf_randomPoints_drive &lt;- ee_as_sf(
  x = ee_randomPoints,
  via = 'drive'
)

# Download via GCS
sf_randomPoints_gcs &lt;- ee_as_sf(
 x = subset,
 via = 'gcs',
 container = 'rgee_dev' #GCS bucket name
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_as_stars'>Convert an Earth Engine (EE) image in a stars object</h2><span id='topic+ee_as_stars'></span>

<h3>Description</h3>

<p>Convert an ee$Image in a stars object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_as_stars(
  image,
  region = NULL,
  dsn = NULL,
  via = "drive",
  container = "rgee_backup",
  scale = NULL,
  maxPixels = 1e+09,
  grid_batch = 1024 * 1024,
  lazy = FALSE,
  public = FALSE,
  add_metadata = TRUE,
  timePrefix = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_as_stars_+3A_image">image</code></td>
<td>
<p>ee$Image to be converted into a 'stars' object.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_region">region</code></td>
<td>
<p>EE Geometry (ee$Geometry$Polygon) that specifies the region
to export. CRS needs to be the same that the argument <code>image</code>.
Otherwise, it will be forced. If not specified, image bounds are taken.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary file is
created.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_via">via</code></td>
<td>
<p>Character. Method to export the image. Three methods are
available: &quot;getDownloadURL&quot;, &quot;drive&quot;, &quot;gcs&quot;. For &quot;drive&quot; and &quot;gcs&quot; see details.
Use &quot;getDownloadURL&quot; for small images. Default &quot;getDownloadURL&quot;.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_scale">scale</code></td>
<td>
<p>Numeric. Image resolution given in meters per pixel. Defaults
to the native resolution of the image.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Numeric. The maximum allowable number of pixels in the exported
image. If the exported region covers more pixels than the specified limit in the
given projection, the task will fail. Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_grid_batch">grid_batch</code></td>
<td>
<p>Numeric. Argument used if 'via' is set as &quot;getDownloadURL&quot;.
The number of pixels to download in each batch without considering the number
of bands. Default to 1048576 -(1024*1024).</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
See details.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the image is created.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_add_metadata">add_metadata</code></td>
<td>
<p>Add metadata to the stars_proxy object. See details.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Logical. Add current date and time (<code>Sys.time()</code>) as
a prefix to export files. This parameter helps to avoid exported files
with the same name. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_as_stars_+3A_...">...</code></td>
<td>
<p>Extra exporting argument. See <a href="#topic+ee_image_to_drive">ee_image_to_drive</a> and
<a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_as_stars</code> supports the download of <code>ee$Images</code>
by two different options: &quot;drive&quot;
(<a href="https://CRAN.R-project.org/package=googledrive">Google Drive</a>) and &quot;gcs&quot;
(<a href="https://CRAN.R-project.org/package=googleCloudStorageR">
Google Cloud Storage</a>). In both cases, <code>ee_as_stars</code> works as follow:
</p>

<ul>
<li><p>1. A task is started (i.e. <code>ee$batch$Task$start()</code>) to
move the <code>ee$Image</code> from Earth Engine to the intermediate container
specified in the argument <code>via</code>.
</p>
</li>
<li><p>2. If the argument <code>lazy</code> is TRUE, the task will not be
monitored. This is useful to lunch several tasks simultaneously and
calls them later using <code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code> or
<code><a href="future.html#topic+value">future::value</a></code>. At the end of this step,
the <code>ee$Image</code> is stored on the path specified in the argument
<code>dsn</code>.
</p>
</li>
<li><p>3. Finally, if the argument <code>add_metadata</code> is TRUE, a list
with the following elements is added to the stars-proxy object.
</p>

<ul>
<li><p><b>if via is &quot;drive&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>drive_name: </b>Name of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_id: </b>Id of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_download_link: </b>Download link to the image.
</p>
</li></ul>

</li></ul>


<ul>
<li><p><b>if via is &quot;gcs&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>gcs_name: </b>Name of the Image in Google Cloud Storage.
</p>
</li>
<li><p><b>gcs_bucket: </b>Name of the bucket.
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Format of the image.
</p>
</li>
<li><p><b>gcs_public_link: </b>Download link to the image.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the image.
</p>
</li></ul>

</li></ul>

<p>Run <code>attr(stars, "metadata")</code> to get the list.

</p>
</li></ul>

<p>For getting more information about exporting data from Earth Engine, take
a look at the
<a href="https://developers.google.com/earth-engine/guides/exporting">Google
Earth Engine Guide - Export data</a>.
</p>


<h3>Value</h3>

<p>A stars-proxy object
</p>


<h3>See Also</h3>

<p>Other image download functions: 
<code><a href="#topic+ee_as_raster">ee_as_raster</a>()</code>,
<code><a href="#topic+ee_as_rast">ee_as_rast</a>()</code>,
<code><a href="#topic+ee_as_thumbnail">ee_as_thumbnail</a>()</code>,
<code><a href="#topic+ee_imagecollection_to_local">ee_imagecollection_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize(drive = TRUE, gcs = TRUE)
ee_user_info()

# Define an image.
img &lt;- ee$Image("LANDSAT/LC08/C01/T1_SR/LC08_038029_20180810")$
  select(c("B4", "B3", "B2"))$
  divide(10000)

# OPTIONAL display it using Map
Map$centerObject(eeObject = img)
Map$addLayer(eeObject = img, visParams = list(max = 0.4,gamma=0.1))

# Define an area of interest.
geometry &lt;- ee$Geometry$Rectangle(
  coords = c(-110.8, 44.6, -110.6, 44.7),
  proj = "EPSG:4326",
  geodesic = FALSE
)

## getDownloadURL - Method 01 (for small images)
img_02 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  scale = 10
)

## drive - Method 02
# Simple
img_02 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  via = "drive"
)

# Lazy
img_02 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  via = "drive",
  lazy = TRUE
)

img_02_result &lt;- img_02 %&gt;% ee_utils_future_value()
attr(img_02_result, "metadata") # metadata

## gcs - Method 03
# Simple
img_03 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  container = "rgee_dev",
  via = "gcs"
)

# Lazy
img_03 &lt;- ee_as_stars(
  image = img,
  region = geometry,
  container = "rgee_dev",
  lazy = TRUE,
  via = "gcs"
)

img_03_result &lt;- img_03 %&gt;% ee_utils_future_value()
attr(img_03_result, "metadata") # metadata

# OPTIONAL: clean containers
# ee_clean_container(name = "rgee_backup", type = "drive")
# ee_clean_container(name = "rgee_dev", type = "gcs")

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_as_thumbnail'>Create an R spatial gridded object from an EE thumbnail image</h2><span id='topic+ee_as_thumbnail'></span>

<h3>Description</h3>

<p>Wrapper function around <code>ee$Image$getThumbURL</code> to create a stars or
RasterLayer R object from a
<a href="https://developers.google.com/earth-engine/guides/image_visualization">EE thumbnail image</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_as_thumbnail(
  image,
  region,
  dimensions,
  vizparams = NULL,
  raster = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_as_thumbnail_+3A_image">image</code></td>
<td>
<p>EE Image object to be converted into a stars object.</p>
</td></tr>
<tr><td><code id="ee_as_thumbnail_+3A_region">region</code></td>
<td>
<p>EE Geometry Rectangle (ee$Geometry$Rectangle) specifies the region to be exported.
The CRS must match the 'x' argument; otherwise, it will be forced.</p>
</td></tr>
<tr><td><code id="ee_as_thumbnail_+3A_dimensions">dimensions</code></td>
<td>
<p>Numeric vector of length 2 that specifies the dimensions of the thumbnail image in pixels.
If only one integer is provided, it determines the size of the larger dimension of the image and scales
the other dimension proportionally. Defaults to 512 pixels for the larger image aspect dimension.</p>
</td></tr>
<tr><td><code id="ee_as_thumbnail_+3A_vizparams">vizparams</code></td>
<td>
<p>A list containing the visualization parameters.See details.</p>
</td></tr>
<tr><td><code id="ee_as_thumbnail_+3A_raster">raster</code></td>
<td>
<p>Logical. Should the thumbnail image be saved as a
RasterStack object?</p>
</td></tr>
<tr><td><code id="ee_as_thumbnail_+3A_quiet">quiet</code></td>
<td>
<p>logical; suppress info messages.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>vizparams</code> set up the details of the thumbnail image. With
<code>ee_as_thumbnail</code> allows exporting only one-band (G) or three-band
(RGB) images. Several parameters can be passed on to control color,
intensity, the maximum and minimum values, etc. The table below provides
all the parameters that admit <code>ee_as_thumbnail</code>.
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Parameter</strong></td><td style="text-align: left;"> <strong>Description</strong>  </td><td style="text-align: left;"> <strong>Type</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bands</strong>    </td><td style="text-align: left;">  Comma-delimited list of three band (RGB) </td><td style="text-align: left;">  list </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>min</strong>      </td><td style="text-align: left;">  Value(s) to map to 0 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>max</strong>      </td><td style="text-align: left;">  Value(s) to map to 1 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gain</strong>     </td><td style="text-align: left;">  Value(s) by which to multiply each pixel value </td><td style="text-align: left;">
number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bias</strong>     </td><td style="text-align: left;">  Value(s) to add to each Digital Number
value </td><td style="text-align: left;"> number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gamma</strong>    </td><td style="text-align: left;">  Gamma correction factor(s) </td><td style="text-align: left;">  number or list of
three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>palette</strong>  </td><td style="text-align: left;">  List of CSS-style color strings
(single-band only) </td><td style="text-align: left;">  comma-separated list of hex strings </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>opacity</strong>   </td><td style="text-align: left;">  The opacity of the layer (from 0 to 1)  </td><td style="text-align: left;">  number </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>An stars or Raster object depending on the <code>raster</code> argument.
</p>


<h3>See Also</h3>

<p>Other image download functions: 
<code><a href="#topic+ee_as_raster">ee_as_raster</a>()</code>,
<code><a href="#topic+ee_as_rast">ee_as_rast</a>()</code>,
<code><a href="#topic+ee_as_stars">ee_as_stars</a>()</code>,
<code><a href="#topic+ee_imagecollection_to_local">ee_imagecollection_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(raster)
library(stars)
library(rgee)

ee_Initialize()

nc &lt;- st_read(system.file("shp/arequipa.shp", package = "rgee"))
dem_palette &lt;- c(
  "#008435", "#1CAC17", "#48D00C", "#B3E34B", "#F4E467",
  "#F4C84E", "#D59F3C", "#A36D2D", "#C6A889", "#FFFFFF"
)

## DEM data -SRTM v4.0
image &lt;- ee$Image("CGIAR/SRTM90_V4")
world_region &lt;- ee$Geometry$Rectangle(
  coords = c(-180,-60,180,60),
  proj = "EPSG:4326",
  geodesic = FALSE
)

## world - elevation
world_dem &lt;- ee_as_thumbnail(
  image = image,
  region = world_region,
  dimensions = 1024,
  vizparams = list(min = 0, max = 5000)
)

world_dem[world_dem &lt;= 0] &lt;- NA
world_dem &lt;- world_dem * 5000

plot(
  x = world_dem, col = dem_palette, breaks = "equal",
  reset = FALSE, main = "SRTM - World"
)

## Arequipa-Peru
arequipa_region &lt;- nc %&gt;%
  st_bbox() %&gt;%
  st_as_sfc() %&gt;%
  sf_as_ee()

arequipa_dem &lt;- ee_as_thumbnail(
  image = image,
  region = arequipa_region$buffer(1000)$bounds(),
  dimensions = 512,
  vizparams = list(min = 0, max = 5000)
)

arequipa_dem &lt;- arequipa_dem * 5000
st_crs(arequipa_dem) &lt;- 4326
plot(
  x = arequipa_dem[nc], col = dem_palette, breaks = "equal",
  reset = FALSE, main = "SRTM - Arequipa"
)

suppressWarnings(plot(
  x = nc, col = NA, border = "black", add = TRUE,
  lwd = 1.5
))
dev.off()

## LANDSAT 8
img &lt;- ee$Image("LANDSAT/LC08/C01/T1_SR/LC08_038029_20180810")$
  select(c("B4", "B3", "B2"))
Map$centerObject(img)
Map$addLayer(img, list(min = 0, max = 5000, gamma = 1.5))

## Teton Wilderness
l8_img &lt;- ee_as_thumbnail(
  image = img,
  region = img$geometry()$bounds(),
  dimensions = 1024,
  vizparams = list(min = 0, max = 5000, gamma = 1.5),
  raster = TRUE
)
crs(l8_img) &lt;- "+proj=longlat +datum=WGS84 +no_defs"
plotRGB(l8_img, stretch = "lin")

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_Authenticate'>Prompts the user to authorize access to Earth Engine via OAuth2.</h2><span id='topic+ee_Authenticate'></span>

<h3>Description</h3>

<p>Prompts the user to authorize access to Earth Engine via OAuth2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_Authenticate(
  user = NULL,
  earthengine = TRUE,
  drive = FALSE,
  gcs = FALSE,
  authorization_code = NULL,
  code_verifier = NULL,
  auth_mode = "notebook",
  scopes = NULL,
  quiet = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_Authenticate_+3A_user">user</code></td>
<td>
<p>Character (optional). If is a character, the credentials are saved in
the dirpath: ~/.config/earthengine/$user. If is NULL, the credentials are stored
in ~/.config/earthengine.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_earthengine">earthengine</code></td>
<td>
<p>Logical (optional). If TRUE, the EarthEngine credential
is cached in the path <code>~/.config/earthengine/</code>.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_drive">drive</code></td>
<td>
<p>Logical (optional). If TRUE, the drive credential
is cached in the path <code>~/.config/earthengine/</code>.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_gcs">gcs</code></td>
<td>
<p>Logical (optional). If TRUE, the Google Cloud Storage
credential is cached in the path <code>~/.config/earthengine/</code>.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_authorization_code">authorization_code</code></td>
<td>
<p>An optional authorization code.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_code_verifier">code_verifier</code></td>
<td>
<p>PKCE verifier to prevent auth code stealing.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_auth_mode">auth_mode</code></td>
<td>
<p>The authentication mode. One of:
</p>

<ul>
<li><p>1. paste - send user to accounts.google.com to get a pastable token
</p>
</li>
<li><p>2. notebook - send user to notebook authenticator page
</p>
</li>
<li><p>3. gcloud - use gcloud to obtain credentials (will set appdefault)
</p>
</li>
<li><p>4. appdefault - read from existing $GOOGLE_APPLICATION_CREDENTIALS file
</p>
</li>
<li><p>5. None - a default mode is chosen based on your environment.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_scopes">scopes</code></td>
<td>
<p>List of scopes to use for authentication. Defaults to
'https://www.googleapis.com/auth/earthengine' or
'https://www.googleapis.com/auth/devstorage.full_control'</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_quiet">quiet</code></td>
<td>
<p>If TRUE, do not require interactive prompts and force &ndash;no-browser mode for gcloud.</p>
</td></tr>
<tr><td><code id="ee_Authenticate_+3A_verbose">verbose</code></td>
<td>
<p>Logical. Suppress info messages.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

# Simple init - Load just the Earth Engine credential
ee_Authenticate()

# At Server side
ee_Authenticate(quiet=TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='ee_check-tools'>Interface to check Python and non-R dependencies</h2><span id='topic+ee_check-tools'></span><span id='topic+ee_check'></span><span id='topic+ee_check_python'></span><span id='topic+ee_check_python_packages'></span><span id='topic+ee_check_credentials'></span><span id='topic+ee_check_gcloud'></span>

<h3>Description</h3>

<p>R function for checking Google credentials (Google Earth Engine,
Google Drive and Google Cloud Storage), Python environment and
Third-Party Python Packages used by rgee. Besides, from v0.1.304,
earthengine-api (Python side) requires gcloud to manage
authentication (see <a href="#topic+ee_Authenticate">ee_Authenticate</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_check(user = NULL, quiet = FALSE)

ee_check_python(quiet = FALSE)

ee_check_python_packages(quiet = FALSE)

ee_check_credentials(quiet = FALSE)

ee_check_gcloud()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_check-tools_+3A_user">user</code></td>
<td>
<p>Character.User to check credentials. If this parameter is not defined,
then the check for credentials will be skipped.</p>
</td></tr>
<tr><td><code id="ee_check-tools_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for checking non-R rgee dependencies.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_check_python()
ee_check_python_packages()
ee_check_credentials()
ee_check_gcloud()
ee_check() # put them all together

## Install gcloud in Unix systems
## 1. Download/Install gcloud
# system("curl -sSL https://sdk.cloud.google.com | bash")
## 2. Set the PATH ENV
# sdkpath &lt;- sprintf("%s/google-cloud-sdk/bin/", Sys.getenv("HOME"))
# Sys.setenv(PATH=sprintf("%s:%s", Sys.getenv("PATH"), sdkpath))

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_clean_container'>Delete files from either a Folder (Google Drive) or a Bucket (GCS)</h2><span id='topic+ee_clean_container'></span>

<h3>Description</h3>

<p>Delete all files from a folder (Google Drive) or a bucket
(Google Cloud Storage). Caution: this action will permanently delete any backup
files that were generated using <code>ee_as_stars</code> and <code>ee_as_sf</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_clean_container(name = "rgee_backup", type = "drive", quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_clean_container_+3A_name">name</code></td>
<td>
<p>Character. Name of the folder (Google Drive) or bucket (GCS)
to delete all files.</p>
</td></tr>
<tr><td><code id="ee_clean_container_+3A_type">type</code></td>
<td>
<p>Character. Name of the file storage web service. 'drive'
and 'gcs' are supported.</p>
</td></tr>
<tr><td><code id="ee_clean_container_+3A_quiet">quiet</code></td>
<td>
<p>logical. Suppress info message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for cleaning Google Drive or Google
Cloud Storage container.
</p>


<h3>See Also</h3>

<p>Other ee_clean functions: 
<code><a href="#topic+ee_clean_pyenv">ee_clean_pyenv</a>()</code>,
<code><a href="#topic+ee_clean_user_credentials">ee_clean_user_credentials</a>()</code>
</p>

<hr>
<h2 id='ee_clean_pyenv'>Remove rgee system variables from .Renviron</h2><span id='topic+ee_clean_pyenv'></span>

<h3>Description</h3>

<p>Remove rgee system variables from .Renviron
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_clean_pyenv(Renviron = "global")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_clean_pyenv_+3A_renviron">Renviron</code></td>
<td>
<p>Character. If it is &quot;global&quot; the environment variables in
the .Renviron located in the Sys.getenv(&quot;HOME&quot;) folder will be deleted. On the
other hand, if it is &quot;local&quot; the environment variables in the .Renviron on the
working directory (getwd()) will be deleted. Finally, users can also set a
specific path (see examples).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for cleaning environmental variables in
their system.
</p>


<h3>See Also</h3>

<p>Other ee_clean functions: 
<code><a href="#topic+ee_clean_container">ee_clean_container</a>()</code>,
<code><a href="#topic+ee_clean_user_credentials">ee_clean_user_credentials</a>()</code>
</p>

<hr>
<h2 id='ee_clean_user_credentials'>Clean credentials for a specific user</h2><span id='topic+ee_clean_user_credentials'></span>

<h3>Description</h3>

<p>Clean credentials for a specific user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_clean_user_credentials(
  user = NULL,
  earthengine = TRUE,
  drive = TRUE,
  gcs = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_clean_user_credentials_+3A_user">user</code></td>
<td>
<p>Character (optional, e.g. <code>data.colec.fbf</code>). The user
to remove credentials (See <code>~/.config/earthengine/</code>). A 'user' represents
a set of credentials that certificate a specific Google identity.</p>
</td></tr>
<tr><td><code id="ee_clean_user_credentials_+3A_earthengine">earthengine</code></td>
<td>
<p>Logical. Earthengine credential.</p>
</td></tr>
<tr><td><code id="ee_clean_user_credentials_+3A_drive">drive</code></td>
<td>
<p>Logical. Google Drive credential.</p>
</td></tr>
<tr><td><code id="ee_clean_user_credentials_+3A_gcs">gcs</code></td>
<td>
<p>Logical. Google Cloud Storage credential.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for cleaning the path <code>~/.config/earthengine/</code>
</p>


<h3>See Also</h3>

<p>Other ee_clean functions: 
<code><a href="#topic+ee_clean_container">ee_clean_container</a>()</code>,
<code><a href="#topic+ee_clean_pyenv">ee_clean_pyenv</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

# Delete caducated credentials for a specific user
ee_clean_user_credentials(earthengine=TRUE, drive=TRUE)
ee_users()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_drive_to_local'>Move results from Google Drive to a local directory</h2><span id='topic+ee_drive_to_local'></span>

<h3>Description</h3>

<p>Move results of an EE task saved in Google Drive to a local directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_drive_to_local(
  task,
  dsn,
  overwrite = TRUE,
  consider = TRUE,
  public = FALSE,
  metadata = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_drive_to_local_+3A_task">task</code></td>
<td>
<p>A generated list obtained after completing an Earth Engine task. See details.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary
file will be assigned.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_overwrite">overwrite</code></td>
<td>
<p>A boolean argument that indicates
whether filename should be overwritten. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_consider">consider</code></td>
<td>
<p>Interactive. See details.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the Google Drive resource is
created.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_metadata">metadata</code></td>
<td>
<p>Logical. If TRUE, the metadata related to the Google
Drive resource will be exported. See details.</p>
</td></tr>
<tr><td><code id="ee_drive_to_local_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The task argument requires a status of &quot;COMPLETED&quot; because
the parameters required to identify EE items in Google Drive
are retrieved from  <br /> <code>ee$batch$Export$*$toDrive(...)$start()$status()</code>.
</p>
<p>Due to the fact that Google Drive allows users to create files with the
same name, the <code>consider</code> argument is required. It use an interactive
R session by default to assist users in identifying the specific files
they wish to download. Additionally, &quot;last&quot; and &quot;all&quot; settings are
provided. &quot;last&quot; will only download the most recently saved file in
Google Drive, whereas &quot;all&quot; will download all files with the same name.
</p>
<p>Finally, if the argument <code>metadata</code> is TRUE, a list containing the
following elements is exported and appended to the output filename (dsn):
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>drive_name: </b>Name of the Table in Google Drive.
</p>
</li>
<li><p><b>drive_id: </b>Id of the Table in Google Drive.
</p>
</li>
<li><p><b>drive_download_link: </b>Download link to the table.
</p>
</li></ul>



<h3>Value</h3>

<p>If <code>metadata</code> is FALSE, will return the filename of the Google
Drive resource on their system. Otherwise, a list with two elements
(<code>dns</code> and <code>metadata</code>) is returned.
</p>


<h3>See Also</h3>

<p>Other generic download functions: 
<code><a href="#topic+ee_gcs_to_local">ee_gcs_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(drive = TRUE)

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)

ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()


# Get the mean annual NDVI for 2011
cloudMaskL457 &lt;- function(image) {
  qa &lt;- image$select("pixel_qa")
  cloud &lt;- qa$bitwiseAnd(32L)$
    And(qa$bitwiseAnd(128L))$
    Or(qa$bitwiseAnd(8L))
  mask2 &lt;- image$mask()$reduce(ee$Reducer$min())
  image &lt;- image$updateMask(cloud$Not())$updateMask(mask2)
  image$normalizedDifference(list("B4", "B3"))
}

ic_l5 &lt;- ee$ImageCollection("LANDSAT/LT05/C01/T1_SR")$
  filterBounds(ee$FeatureCollection(ee_ROI))$
  filterDate("2011-01-01", "2011-12-31")$
  map(cloudMaskL457)

# Create simple composite
mean_l5 &lt;- ic_l5$mean()$rename("NDVI")
mean_l5 &lt;- mean_l5$reproject(crs = "EPSG:4326", scale = 500)
mean_l5_Amarakaeri &lt;- mean_l5$clip(ee_ROI)

# Move results from Earth Engine to Drive
task_img &lt;- ee_image_to_drive(
  image = mean_l5_Amarakaeri,
  folder = "Amarakaeri",
  fileFormat = "GEO_TIFF",
  region = ee_ROI,
  fileNamePrefix = "my_image_demo"
)

task_img$start()
ee_monitoring(task_img)

# Move results from Drive to local
img &lt;- ee_drive_to_local(task = task_img)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_extract'>Extract values from EE Images or ImageCollections objects</h2><span id='topic+ee_extract'></span>

<h3>Description</h3>

<p>Extract values from an <code>ee$Image</code> based on the locations of a geometry object.
Users can utilize  <code>ee$Geometry$*</code>, <code>ee$Feature</code>, <code>ee$FeatureCollection</code>,
sf or sfc object for spatial filter.
This function emulates the functionality of the existing <a href="raster.html#topic+extract">extract</a> method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_extract(
  x,
  y,
  fun = ee$Reducer$mean(),
  scale = NULL,
  sf = FALSE,
  via = "getInfo",
  container = "rgee_backup",
  lazy = FALSE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_extract_+3A_x">x</code></td>
<td>
<p>ee$Image.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_y">y</code></td>
<td>
<p>ee$Geometry$*, ee$Feature, ee$FeatureCollection, sfc or sf objects.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_fun">fun</code></td>
<td>
<p>ee$Reducer object. Function to summarize the values. The function
must take a single numeric value as an argument and return a single value.
See details.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_scale">scale</code></td>
<td>
<p>A nominal scale given in meters of the Image projection to work in.
By default 1000.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_sf">sf</code></td>
<td>
<p>Logical. Should the function return an sf object?</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_via">via</code></td>
<td>
<p>Character. Method for exporting the image.
Three methods are available: &quot;getInfo&quot;, &quot;drive&quot;, &quot;gcs&quot;.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to export the image into (ignore if <code>via</code> is not defined as &quot;drive&quot; or
&quot;gcs&quot;).</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
Ignore if <code>via</code> is set as &quot;getInfo&quot;. See details.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
<tr><td><code id="ee_extract_+3A_...">...</code></td>
<td>
<p>ee$Image$reduceRegions additional parameters. See
<code>ee_help(ee$Image$reduceRegions)</code> for more details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The reducer functions that return one value are:
</p>

<ul>
<li>  <p><strong>allNonZero</strong>: Returns a Reducer that returns 1 if all of its
inputs are non-zero, 0 otherwise. <br />
</p>
</li>
<li> <p><strong>anyNonZero</strong>: Returns a Reducer that returns 1 if any of its
inputs are non-zero, 0 otherwise. <br />
</p>
</li>
<li> <p><strong>bitwiseAnd</strong>: Returns a Reducer that computes the bitwise-and
summation of its inputs.
</p>
</li>
<li> <p><strong>bitwiseOr</strong>: Returns a Reducer that computes the bitwise-or
summation of its inputs.
</p>
</li>
<li> <p><strong>count</strong>: Returns a Reducer that computes the number of
non-null inputs.
</p>
</li>
<li> <p><strong>first</strong>: Returns a Reducer that returns the first of its inputs.
</p>
</li>
<li> <p><strong>firstNonNull</strong>: Returns a Reducer that returns the first of
its non-null inputs.
</p>
</li>
<li> <p><strong>kurtosis</strong>: Returns a Reducer that Computes the kurtosis of
its inputs.
</p>
</li>
<li> <p><strong>last</strong>: Returns a Reducer that returns the last of its inputs.
</p>
</li>
<li> <p><strong>lastNonNull</strong>: Returns a Reducer that returns the last of its
non-null inputs.
</p>
</li>
<li> <p><strong>max</strong>: Creates a reducer that outputs the maximum value of
its (first) input. If numInputs is greater than one, also outputs the
corresponding values of the additional inputs.
</p>
</li>
<li> <p><strong>mean</strong>: Returns a Reducer that computes the (weighted)
arithmetic mean of its inputs.
</p>
</li>
<li> <p><strong>median</strong>: Create a reducer that will compute the median of
the inputs. For small numbers of inputs (up to maxRaw) the median will be
computed directly; for larger numbers of inputs the median will be derived
from a histogram.
</p>
</li>
<li> <p><strong>min</strong>: Creates a reducer that outputs the minimum value
of its (first) input.  If numInputs is greater than one, also outputs
additional inputs.
</p>
</li>
<li> <p><strong>mode</strong>: Create a reducer that will compute the mode of the
inputs.  For small numbers of inputs (up to maxRaw) the mode will be
computed directly; for larger numbers of inputs the mode will be derived
from a histogram.
</p>
</li>
<li> <p><strong>product</strong>: Returns a Reducer that computes the product of
its inputs.
</p>
</li>
<li> <p><strong>sampleStdDev</strong>: Returns a Reducer that computes the sample
standard deviation of its inputs.
</p>
</li>
<li> <p><strong>sampleVariance</strong>: Returns a Reducer that computes the sample
variance of its inputs.
</p>
</li>
<li> <p><strong>stdDev</strong>: Returns a Reducer that computes the standard
deviation of its inputs.
</p>
</li>
<li> <p><strong>sum</strong>: Returns a Reducer that computes the (weighted) sum
of its inputs.
</p>
</li>
<li> <p><strong>variance</strong>: Returns a Reducer that computes the variance
of its inputs.
</p>
</li></ul>



<h3>Value</h3>

<p>A data.frame or an sf object depending on the sf argument.
Column names are extracted from band names. Use <code>ee$Image$rename</code> to
rename the bands of an <code>ee$Image</code>. See <code>ee_help(ee$Image$rename)</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)

ee_Initialize(gcs = TRUE, drive = TRUE)

# Define a Image or ImageCollection: Terraclimate
terraclimate &lt;- ee$ImageCollection("IDAHO_EPSCOR/TERRACLIMATE") %&gt;%
 ee$ImageCollection$filterDate("2001-01-01", "2002-01-01") %&gt;%
ee$ImageCollection$map(
   function(x) {
     date &lt;- ee$Date(x$get("system:time_start"))$format('YYYY_MM_dd')
     name &lt;- ee$String$cat("Terraclimate_pp_", date)
     x$select("pr")$rename(name)
   }
 )

# Define a geometry
nc &lt;- st_read(
 dsn = system.file("shape/nc.shp", package = "sf"),
 stringsAsFactors = FALSE,
 quiet = TRUE
)


#Extract values - getInfo
ee_nc_rain &lt;- ee_extract(
 x = terraclimate,
 y = nc["NAME"],
 scale = 250,
 fun = ee$Reducer$mean(),
 sf = TRUE
)

# Extract values - drive (lazy = TRUE)
ee_nc_rain &lt;- ee_extract(
 x = terraclimate,
 y = nc["NAME"],
 scale = 250,
 fun = ee$Reducer$mean(),
 via = "drive",
 lazy = TRUE,
 sf = TRUE
)
ee_nc_rain &lt;- ee_nc_rain %&gt;% ee_utils_future_value()

# Extract values - gcs (lazy = FALSE)
ee_nc_rain &lt;- ee_extract(
 x = terraclimate,
 y = nc["NAME"],
 scale = 250,
 fun = ee$Reducer$mean(),
 via = "gcs",
 container = "rgee_dev",
 sf = TRUE
)

# Spatial plot
plot(
 ee_nc_rain["X200101_Terraclimate_pp_2001_01_01"],
 main = "2001 Jan Precipitation - Terraclimate",
 reset = FALSE
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_gcs_to_local'>Move results from Google Cloud Storage to a local directory</h2><span id='topic+ee_gcs_to_local'></span>

<h3>Description</h3>

<p>Move results of an EE task saved in Google Cloud Storage to a local
directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_gcs_to_local(
  task,
  dsn,
  public = FALSE,
  metadata = FALSE,
  overwrite = TRUE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_gcs_to_local_+3A_task">task</code></td>
<td>
<p>List generated after the EE task is correctly finished. See details.</p>
</td></tr>
<tr><td><code id="ee_gcs_to_local_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary
file (i.e. <code>tempfile()</code>) will be assigned.</p>
</td></tr>
<tr><td><code id="ee_gcs_to_local_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to Google Cloud Storage
resource is created. &quot;Public Access Prevention&quot; may need to be removed.
In addition, the bucket access control configuration must be &quot;fine-grained&quot;.
See GCS public files documentation for more details.</p>
</td></tr>
<tr><td><code id="ee_gcs_to_local_+3A_metadata">metadata</code></td>
<td>
<p>Logical. If TRUE, export the metadata related to the Google
Cloud Storage resource. See details.</p>
</td></tr>
<tr><td><code id="ee_gcs_to_local_+3A_overwrite">overwrite</code></td>
<td>
<p>A boolean argument that indicates
whether &quot;filename&quot; should be overwritten. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_gcs_to_local_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The task argument requires a status of &quot;COMPLETED&quot; because
the parameters required to identify EE items in Google Drive
are retrieved from <code>ee$batch$Export$*$toCloudStorage(...)$start()$status()</code>.
</p>
<p>If the argument <code>metadata</code> is TRUE, a list containing the following
elements is exported and appended to the output filename (dsn):
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>gcs_name: </b>Name of the Table in Google Cloud Storage.
</p>
</li>
<li><p><b>gcs_bucket: </b>Name of the bucket.
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Format of the table.
</p>
</li>
<li><p><b>gcs_public_link: </b>Download link to the table.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the table.
</p>
</li></ul>



<h3>Value</h3>

<p>If <code>metadata</code> is FALSE, will return the filename of the Google
Cloud Storage resource on their system. Otherwise, a list with two elements
(<code>dns</code> and <code>metadata</code>) is returned.
</p>


<h3>See Also</h3>

<p>Other generic download functions: 
<code><a href="#topic+ee_drive_to_local">ee_drive_to_local</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(gcs = TRUE)

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()


# Get the mean annual NDVI for 2011
cloudMaskL457 &lt;- function(image) {
  qa &lt;- image$select("pixel_qa")
  cloud &lt;- qa$bitwiseAnd(32L)$
    And(qa$bitwiseAnd(128L))$
    Or(qa$bitwiseAnd(8L))
  mask2 &lt;- image$mask()$reduce(ee$Reducer$min())
  image &lt;- image$updateMask(cloud$Not())$updateMask(mask2)
  image$normalizedDifference(list("B4", "B3"))
}

ic_l5 &lt;- ee$ImageCollection("LANDSAT/LT05/C01/T1_SR")$
  filterBounds(ee$FeatureCollection(ee_ROI))$
  filterDate("2011-01-01", "2011-12-31")$
  map(cloudMaskL457)

# Create simple composite
mean_l5 &lt;- ic_l5$mean()$rename("NDVI")
mean_l5 &lt;- mean_l5$reproject(crs = "EPSG:4326", scale = 500)
mean_l5_Amarakaeri &lt;- mean_l5$clip(ee_ROI)

# Move results from Earth Engine to Drive
task_img &lt;- ee_image_to_gcs(
   image = mean_l5_Amarakaeri,
   bucket = "rgee_dev",
   fileFormat = "GEO_TIFF",
   region = ee_ROI,
   fileNamePrefix = "my_image_demo"
)

task_img$start()
ee_monitoring(task_img)

# Move results from Drive to local
img &lt;- ee_gcs_to_local(task = task_img)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_get_assethome'>Get the Asset home name</h2><span id='topic+ee_get_assethome'></span>

<h3>Description</h3>

<p>Get the Asset home name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_get_assethome()
</code></pre>


<h3>Value</h3>

<p>Character. The name of the Earth Engine Asset home
(e.g. users/datacolecfbf)
</p>


<h3>See Also</h3>

<p>Other path utils: 
<code><a href="#topic+ee_get_earthengine_path">ee_get_earthengine_path</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()
ee_get_assethome()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_get_date_ic'>Get the date of a EE ImageCollection</h2><span id='topic+ee_get_date_ic'></span>

<h3>Description</h3>

<p>Get the date of a EE ImageCollection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_get_date_ic(x, time_end = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_get_date_ic_+3A_x">x</code></td>
<td>
<p>ee$ImageCollection object</p>
</td></tr>
<tr><td><code id="ee_get_date_ic_+3A_time_end">time_end</code></td>
<td>
<p>Logical. If TRUE, the <code>system:time_end</code> property is
also returned. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>system:time_start</code> Sets the start period of data acquisition while
<code>system:time_end</code> does the same for the end period. See the
<a href="https://developers.google.com/earth-engine/glossary/">Earth Engine glossary</a>
for getting more information.
</p>


<h3>Value</h3>

<p>A data.frame with the columns: <code>id</code> (ID of the image),
<code>time_start</code>, and <code>time_end</code> (only if the argument <code>time_end</code> is
set as TRUE). The number of rows depends on the number of images
(<code>ee$ImageCollection$size</code>).
</p>


<h3>See Also</h3>

<p>Other date functions: 
<code><a href="#topic+ee_get_date_img">ee_get_date_img</a>()</code>,
<code><a href="#topic+eedate_to_rdate">eedate_to_rdate</a>()</code>,
<code><a href="#topic+rdate_to_eedate">rdate_to_eedate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)
ee_Initialize()

nc &lt;- st_read(system.file("shape/nc.shp", package = "sf")) %&gt;%
  st_transform(4326) %&gt;%
  sf_as_ee()

ee_s2 &lt;- ee$ImageCollection("COPERNICUS/S2")$
  filterDate("2016-01-01", "2016-01-31")$
  filterBounds(nc)

ee_get_date_ic(ee_s2)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_get_date_img'>Get the date of a EE Image</h2><span id='topic+ee_get_date_img'></span>

<h3>Description</h3>

<p>Get the date of a EE Image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_get_date_img(x, time_end = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_get_date_img_+3A_x">x</code></td>
<td>
<p>ee$Image or ee$ImageCollection object</p>
</td></tr>
<tr><td><code id="ee_get_date_img_+3A_time_end">time_end</code></td>
<td>
<p>Logical. If TRUE, the <code>system:time_end</code> property is
also returned. See details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>system:time_start</code> sets the start period of data acquisition while
<code>system:time_end</code> does the same for the end period. See the
<a href="https://developers.google.com/earth-engine/glossary/">Earth Engine glossary</a>
for getting more information.
</p>


<h3>Value</h3>

<p>An List object with the elements: id, time_start and time_end
(only if the <code>time_end</code> argument is TRUE).
</p>


<h3>See Also</h3>

<p>Other date functions: 
<code><a href="#topic+ee_get_date_ic">ee_get_date_ic</a>()</code>,
<code><a href="#topic+eedate_to_rdate">eedate_to_rdate</a>()</code>,
<code><a href="#topic+rdate_to_eedate">rdate_to_eedate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

l8 &lt;- ee$Image('LANDSAT/LC08/C01/T1_TOA/LC08_044034_20140318')
ee_get_date_img(l8)
srtm &lt;- ee$Image('CGIAR/SRTM90_V4')
ee_get_date_img(srtm, time_end = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_get_earthengine_path'>Get the path where the credentials are stored</h2><span id='topic+ee_get_earthengine_path'></span>

<h3>Description</h3>

<p>Get the path where the credentials are stored
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_get_earthengine_path()
</code></pre>


<h3>Value</h3>

<p>A character that represents the path credential of a specific
user
</p>


<h3>See Also</h3>

<p>Other path utils: 
<code><a href="#topic+ee_get_assethome">ee_get_assethome</a>()</code>
</p>

<hr>
<h2 id='ee_help'>Documentation for Earth Engine Objects</h2><span id='topic+ee_help'></span>

<h3>Description</h3>

<p>Documentation for Earth Engine Objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_help(eeobject, browser = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_help_+3A_eeobject">eeobject</code></td>
<td>
<p>Earth Engine Object to print documentation.</p>
</td></tr>
<tr><td><code id="ee_help_+3A_browser">browser</code></td>
<td>
<p>Logical. Display documentation in the browser.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for displaying Earth Engine documentation.
</p>


<h3>See Also</h3>

<p>Other helper functions: 
<code><a href="#topic+ee_monitoring">ee_monitoring</a>()</code>,
<code><a href="#topic+ee_print">ee_print</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

ee$Image()$geometry()$centroid %&gt;% ee_help()
ee$Image()$geometry() %&gt;% ee_help()
ee$Geometry$Rectangle(c(-110.8, 44.6, -110.6, 44.7)) %&gt;% ee_help()
ee$Image %&gt;% ee_help()
ee$Image %&gt;% ee_help(browser = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_image_info'>Approximate size of an EE Image object</h2><span id='topic+ee_image_info'></span>

<h3>Description</h3>

<p>Get the approximate number of rows, cols, and size of a single-band
Earth Engine Image.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_image_info(
  image,
  band_metadata = NULL,
  getsize = TRUE,
  compression_ratio = 20,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_image_info_+3A_image">image</code></td>
<td>
<p>Single-band EE Image object.</p>
</td></tr>
<tr><td><code id="ee_image_info_+3A_band_metadata">band_metadata</code></td>
<td>
<p>A list with image properties. If NULL it will be  automatically generated.</p>
</td></tr>
<tr><td><code id="ee_image_info_+3A_getsize">getsize</code></td>
<td>
<p>Logical. If TRUE, the function will estimate the size
of the object</p>
</td></tr>
<tr><td><code id="ee_image_info_+3A_compression_ratio">compression_ratio</code></td>
<td>
<p>Numeric. Measurement of the relative data size
reduction produced by a data compression algorithm (ignored if
<code>getsize</code> is FALSE). By default is 20.</p>
</td></tr>
<tr><td><code id="ee_image_info_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing information about the number of rows (nrow),
number of columns (ncol), total number of pixels (total_pixel), and image
size (image_size).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

# World SRTM
srtm &lt;- ee$Image("CGIAR/SRTM90_V4")
ee_image_info(srtm)

# Landast8
l8 &lt;- ee$Image("LANDSAT/LC08/C01/T1_SR/LC08_038029_20180810")$select("B4")
ee_image_info(l8)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_image_to_asset'>Creates a task to export an EE Image to their EE Assets.</h2><span id='topic+ee_image_to_asset'></span>

<h3>Description</h3>

<p>Creates a task to export an EE Image to their EE Assets.
This function is a wrapper around <code>ee$batch$Export$image$toAsset(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_image_to_asset(
  image,
  description = "myExportImageTask",
  assetId = NULL,
  overwrite = FALSE,
  pyramidingPolicy = NULL,
  dimensions = NULL,
  region = NULL,
  scale = NULL,
  crs = NULL,
  crsTransform = NULL,
  maxPixels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_image_to_asset_+3A_image">image</code></td>
<td>
<p>The image to be exported.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_description">description</code></td>
<td>
<p>Human-readable name of the task.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_assetid">assetId</code></td>
<td>
<p>The destination asset ID.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_overwrite">overwrite</code></td>
<td>
<p>Specifies whether to overwrite the assetId if it already exists.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_pyramidingpolicy">pyramidingPolicy</code></td>
<td>
<p>The pyramiding policy to apply to each band
in the image, a dictionary keyed by band name. Values must be one
of: &quot;mean&quot;, &quot;sample&quot;, &quot;min&quot;, &quot;max&quot;, or &quot;mode&quot;. Defaults to &quot;mean&quot;.
A special key, &quot;.default&quot;, may be used to change the default for all bands.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_dimensions">dimensions</code></td>
<td>
<p>Defines the image dimensions for export.
It can be specified as a single positive integer for the maximum dimension
or in &quot;WIDTHxHEIGHT&quot; format, where WIDTH and HEIGHT are positive integers.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_region">region</code></td>
<td>
<p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. It can be specified as nested lists
of numbers or a serialized string. Defaults to the image's region.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_scale">scale</code></td>
<td>
<p>Resolution given in meters per pixel. Defaults to the native
resolution of the image asset unless a crsTransform is specified.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_crs">crs</code></td>
<td>
<p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_crstransform">crsTransform</code></td>
<td>
<p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the exported
image's projection, in the order:
xScale, xShearing, xTranslation, yShearing, yScale, and yTranslation.
Defaults to the image's native CRS transform.</p>
</td></tr>
<tr><td><code id="ee_image_to_asset_+3A_maxpixels">maxPixels</code></td>
<td>
<p>The maximum allowed number of pixels in the exported
image. The task will fail if the exported region covers more pixels
in the specified projection. Defaults to 100,000,000. **kwargs: Holds
other keyword arguments that may have been deprecated, such
as 'crs_transform'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted task
</p>


<h3>See Also</h3>

<p>Other image export task creator: 
<code><a href="#topic+ee_image_to_drive">ee_image_to_drive</a>()</code>,
<code><a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize()

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()


# Get the mean annual NDVI for 2011
cloudMaskL457 &lt;- function(image) {
  qa &lt;- image$select("pixel_qa")
  cloud &lt;- qa$bitwiseAnd(32L)$
    And(qa$bitwiseAnd(128L))$
    Or(qa$bitwiseAnd(8L))
  mask2 &lt;- image$mask()$reduce(ee$Reducer$min())
  image &lt;- image$updateMask(cloud$Not())$updateMask(mask2)
  image$normalizedDifference(list("B4", "B3"))
}

ic_l5 &lt;- ee$ImageCollection("LANDSAT/LT05/C01/T1_SR")$
  filterBounds(ee$FeatureCollection(ee_ROI))$
  filterDate("2011-01-01", "2011-12-31")$
  map(cloudMaskL457)

# Create simple composite
mean_l5 &lt;- ic_l5$mean()$rename("NDVI")
mean_l5 &lt;- mean_l5$reproject(crs = "EPSG:4326", scale = 500)
mean_l5_Amarakaeri &lt;- mean_l5$clip(ee_ROI)

# Move results from Earth Engine to Drive
assetid &lt;- paste0(ee_get_assethome(), '/l5_Amarakaeri')
task_img &lt;- ee_image_to_asset(
  image = mean_l5_Amarakaeri,
  assetId = assetid,
  overwrite = TRUE,
  scale = 500,
  region = ee_ROI
)

task_img$start()
ee_monitoring(task_img)

ee_l5 &lt;- ee$Image(assetid)
Map$centerObject(ee_l5)
Map$addLayer(ee_l5)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_image_to_drive'>Creates a task to export an EE Image to Drive.</h2><span id='topic+ee_image_to_drive'></span>

<h3>Description</h3>

<p>Creates a task to export an EE Image to Drive.
This function is a wrapper around <br />
<code>ee$batch$Export$image$toDrive(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_image_to_drive(
  image,
  description = "myExportImageTask",
  folder = "rgee_backup",
  fileNamePrefix = NULL,
  timePrefix = TRUE,
  dimensions = NULL,
  region = NULL,
  scale = NULL,
  crs = NULL,
  crsTransform = NULL,
  maxPixels = NULL,
  shardSize = NULL,
  fileDimensions = NULL,
  skipEmptyTiles = NULL,
  fileFormat = NULL,
  formatOptions = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_image_to_drive_+3A_image">image</code></td>
<td>
<p>Image to be exported.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_description">description</code></td>
<td>
<p>User-friendly name of the task.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_folder">folder</code></td>
<td>
<p>Folder name in the user's Drive account where the export will be stored.
Default is &quot;rgee-backup&quot;.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_filenameprefix">fileNamePrefix</code></td>
<td>
<p>Prefix for the export filename in Google Drive. Defaults to
the task name.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Prefixes the current date and time to the exported files.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_dimensions">dimensions</code></td>
<td>
<p>Defines the image dimensions for export.
It can be specified as a single positive integer for the maximum dimension
or in &quot;WIDTHxHEIGHT&quot; format, where WIDTH and HEIGHT are positive integers.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_region">region</code></td>
<td>
<p>The lon,lat coordinates for a LinearRing or Polygon specifying
the region to export. It can be specified as nested lists of numbers or a
serialized string. Defaults to the image's region.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_scale">scale</code></td>
<td>
<p>Image resolution in meters per pixel. Defaults to the native
resolution of the image asset unless a crsTransform is specified.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_crs">crs</code></td>
<td>
<p>Coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_crstransform">crsTransform</code></td>
<td>
<p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the exported
image's projection, in the order: xScale, xShearing, xTranslation,
yShearing, yScale, and yTranslation. Defaults to the image's native
CRS transform.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Maximum number of pixels allowed in the exported image.
The task will fail if the exported region exceeds this limit in the specified projection.
Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_shardsize">shardSize</code></td>
<td>
<p>Size given in pixels of the shards in which the image
will be computed. Defaults to 256.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_filedimensions">fileDimensions</code></td>
<td>
<p>Defines the pixel dimensions for each image file when the image size exceeds
the capacity of a single file.To indicate a square shape, use a single number;
for width and height, use a list of two dimensions.
Please note that the image will be clipped to the overall image dimensions.
The specified file dimensions must be a multiple of the shardSize.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_skipemptytiles">skipEmptyTiles</code></td>
<td>
<p>If TRUE, skip writing empty (i.e., fully-masked)
image tiles. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_fileformat">fileFormat</code></td>
<td>
<p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults to 'GeoTIFF'.</p>
</td></tr>
<tr><td><code id="ee_image_to_drive_+3A_formatoptions">formatOptions</code></td>
<td>
<p>A dictionary of string keys to format-specific
options. **kwargs: Holds other keyword arguments that may have been
deprecated, such as 'crs_transform', 'driveFolder', and 'driveFileNamePrefix'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted task that exports the image to Drive.
</p>


<h3>See Also</h3>

<p>Other image export task creator: 
<code><a href="#topic+ee_image_to_asset">ee_image_to_asset</a>()</code>,
<code><a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(drive = TRUE)

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)

ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()


# Get the mean annual NDVI for 2011
cloudMaskL457 &lt;- function(image) {
  qa &lt;- image$select("pixel_qa")
  cloud &lt;- qa$bitwiseAnd(32L)$
    And(qa$bitwiseAnd(128L))$
    Or(qa$bitwiseAnd(8L))
  mask2 &lt;- image$mask()$reduce(ee$Reducer$min())
  image &lt;- image$updateMask(cloud$Not())$updateMask(mask2)
  image$normalizedDifference(list("B4", "B3"))
}

ic_l5 &lt;- ee$ImageCollection("LANDSAT/LT05/C01/T1_SR")$
  filterBounds(ee$FeatureCollection(ee_ROI))$
  filterDate("2011-01-01", "2011-12-31")$
  map(cloudMaskL457)

# Create simple composite
mean_l5 &lt;- ic_l5$mean()$rename("NDVI")
mean_l5 &lt;- mean_l5$reproject(crs = "EPSG:4326", scale = 500)
mean_l5_Amarakaeri &lt;- mean_l5$clip(ee_ROI)

# Move results from Earth Engine to Drive
task_img &lt;- ee_image_to_drive(
  image = mean_l5_Amarakaeri,
  fileFormat = "GEO_TIFF",
  region = ee_ROI,
  fileNamePrefix = "my_image_demo"
)

task_img$start()
ee_monitoring(task_img)

# Move results from Drive to local
ee_drive_to_local(task = task_img)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_image_to_gcs'>Creates a task to export an EE Image to Google Cloud Storage.</h2><span id='topic+ee_image_to_gcs'></span>

<h3>Description</h3>

<p>Creates a task to export an EE Image to Google Cloud Storage.
This function is a wrapper around
<code>ee$batch$Export$image$toCloudStorage(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_image_to_gcs(
  image,
  description = "myExportImageTask",
  bucket = NULL,
  fileNamePrefix = NULL,
  timePrefix = TRUE,
  dimensions = NULL,
  region = NULL,
  scale = NULL,
  crs = NULL,
  crsTransform = NULL,
  maxPixels = NULL,
  shardSize = NULL,
  fileDimensions = NULL,
  skipEmptyTiles = NULL,
  fileFormat = NULL,
  formatOptions = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_image_to_gcs_+3A_image">image</code></td>
<td>
<p>The image to be exported.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_description">description</code></td>
<td>
<p>User-friendly name of the task.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_bucket">bucket</code></td>
<td>
<p>Cloud Storage bucket name for the export.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_filenameprefix">fileNamePrefix</code></td>
<td>
<p>Cloud Storage object name prefix for the export.
Defaults to the name of the task.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Prefixes the current date and time to the exported files</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_dimensions">dimensions</code></td>
<td>
<p>Defines the image dimensions for export.
It can be specified as a single positive integer for the maximum dimension
or in &quot;WIDTHxHEIGHT&quot; format, where WIDTH and HEIGHT are positive integers.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_region">region</code></td>
<td>
<p>The lon,lat coordinates for a LinearRing or Polygon
specifying the region to export. It can be specified as nested lists
of numbers or a serialized string. Defaults to the image's region.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_scale">scale</code></td>
<td>
<p>Image resolution in meters per pixel. Defaults to the native
resolution of the image asset unless a crsTransform is specified.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_crs">crs</code></td>
<td>
<p>The coordinate reference system of the exported image's
projection. Defaults to the image's default projection.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_crstransform">crsTransform</code></td>
<td>
<p>A comma-separated string of 6 numbers describing
the affine transform of the coordinate reference system of the exported
image's projection, in the order:
xScale, xShearing, xTranslation, yShearing, yScale, and yTranslation.
Defaults to the image's native CRS transform.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Maximum number of pixels allowed in the exported image.
The task will fail if the exported region exceeds this limit in the specified projection.
Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_shardsize">shardSize</code></td>
<td>
<p>Size given in pixels of the shards in which the image
will be computed. Defaults to 256.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_filedimensions">fileDimensions</code></td>
<td>
<p>Defines the pixel dimensions for each image file when the image size exceeds
the capacity of a single file.To indicate a square shape, use a single number;
for width and height, use a list of two dimensions.
Please note that the image will be clipped to the overall image dimensions.
The specified file dimensions must be a multiple of the shardSize.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_skipemptytiles">skipEmptyTiles</code></td>
<td>
<p>If TRUE, skip writing empty (i.e., fully-masked)
image tiles. Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_fileformat">fileFormat</code></td>
<td>
<p>The string file format to which the image is exported.
Currently only 'GeoTIFF' and 'TFRecord' are supported, defaults
to 'GeoTIFF'.</p>
</td></tr>
<tr><td><code id="ee_image_to_gcs_+3A_formatoptions">formatOptions</code></td>
<td>
<p>A dictionary of string keys to format-specific
options. **kwargs: Holds other keyword arguments that may have been
deprecated, such as 'crs_transform'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted Task that exports the image to Google Cloud Storage.
</p>


<h3>See Also</h3>

<p>Other image export task creator: 
<code><a href="#topic+ee_image_to_asset">ee_image_to_asset</a>()</code>,
<code><a href="#topic+ee_image_to_drive">ee_image_to_drive</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(gcs = TRUE)

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()


# Get the mean annual NDVI for 2011
cloudMaskL457 &lt;- function(image) {
  qa &lt;- image$select("pixel_qa")
  cloud &lt;- qa$bitwiseAnd(32L)$
    And(qa$bitwiseAnd(128L))$
    Or(qa$bitwiseAnd(8L))
  mask2 &lt;- image$mask()$reduce(ee$Reducer$min())
  image &lt;- image$updateMask(cloud$Not())$updateMask(mask2)
  image$normalizedDifference(list("B4", "B3"))
}

ic_l5 &lt;- ee$ImageCollection("LANDSAT/LT05/C01/T1_SR")$
  filterBounds(ee$FeatureCollection(ee_ROI))$
  filterDate("2011-01-01", "2011-12-31")$
  map(cloudMaskL457)

# Create simple composite
mean_l5 &lt;- ic_l5$mean()$rename("NDVI")
mean_l5 &lt;- mean_l5$reproject(crs = "EPSG:4326", scale = 500)
mean_l5_Amarakaeri &lt;- mean_l5$clip(ee_ROI)

# Move results from Earth Engine to GCS
task_img &lt;- ee_image_to_gcs(
 image = mean_l5_Amarakaeri,
 bucket = "rgee_dev",
 fileFormat = "GEO_TIFF",
 region = ee_ROI,
 fileNamePrefix = "my_image_demo"
)

task_img$start()
ee_monitoring(task_img)

# Move results from GCS to local
ee_gcs_to_local(task = task_img)


## End(Not run)
</code></pre>

<hr>
<h2 id='ee_imagecollection_to_local'>Save an EE ImageCollection to the local system.</h2><span id='topic+ee_imagecollection_to_local'></span>

<h3>Description</h3>

<p>Save an EE ImageCollection to the local system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_imagecollection_to_local(
  ic,
  region,
  dsn = NULL,
  via = "drive",
  container = "rgee_backup",
  scale = NULL,
  maxPixels = 1e+09,
  lazy = FALSE,
  public = TRUE,
  add_metadata = TRUE,
  timePrefix = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_imagecollection_to_local_+3A_ic">ic</code></td>
<td>
<p>ee$ImageCollection to be saved to the system.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_region">region</code></td>
<td>
<p>EE Geometry (ee$Geometry$Polygon). The
CRS needs to be the same that the <code>ic</code> argument. Otherwise, it will be
forced.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_dsn">dsn</code></td>
<td>
<p>Character. Output filename. If missing, a temporary file will
be created for each image.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_via">via</code></td>
<td>
<p>Character. Method to export the image. Two methods are available:
&quot;drive&quot;, &quot;gcs&quot;. See details.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_container">container</code></td>
<td>
<p>Character. Name of the folder ('drive') or bucket ('gcs')
to be exported into (ignored if <code>via</code> is not defined as &quot;drive&quot; or
&quot;gcs&quot;).</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_scale">scale</code></td>
<td>
<p>Numeric. The resolution in meters per pixel. Defaults
to the native resolution of the image.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_maxpixels">maxPixels</code></td>
<td>
<p>Numeric. The maximum allowable number of pixels in the exported image.
If the exported region covers more pixels than the specified limit in the given projection,
the task will fail. Defaults to 100,000,000.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_lazy">lazy</code></td>
<td>
<p>Logical. If TRUE, a <code><a href="future.html#topic+sequential">
future::sequential</a></code> object is created to evaluate the task in the future.
See details.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_public">public</code></td>
<td>
<p>Logical. If TRUE, a public link to the image is created.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_add_metadata">add_metadata</code></td>
<td>
<p>Add metadata to the stars_proxy object. See details.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Logical. Add current date and time (<code>Sys.time()</code>) as
a prefix to export files. This parameter helps to avoid exporting files
with the same name. By default TRUE.</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_imagecollection_to_local_+3A_...">...</code></td>
<td>
<p>Extra exporting argument. See <a href="#topic+ee_image_to_drive">ee_image_to_drive</a> and</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_imagecollection_to_local</code> supports the download of <code>ee$Images</code>
using two different options: &quot;drive&quot;
(<a href="https://CRAN.R-project.org/package=googledrive">Google Drive</a>) and &quot;gcs&quot;
(<a href="https://CRAN.R-project.org/package=googleCloudStorageR">
Google Cloud Storage</a>). In both cases, <code>ee_imagecollection_to_local</code>
works as follow:
</p>

<ul>
<li><p>1. A task  is initiate (i.e., <code>ee$batch$Task$start()</code>) to
transfer the <code>ee$Image</code> from Earth Engine to the intermediate container
specified in the argument <code>via</code>.
</p>
</li>
<li><p>2. If the argument <code>lazy</code> is TRUE, the task will not be
monitored. This is useful to lunch several tasks simultaneously and
calls them later using <code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code> or
<code><a href="future.html#topic+value">future::value</a></code>. At the end of this step,
the <code>ee$Images</code> are stored on the path specified in the argument
<code>dsn</code>.
</p>
</li>
<li><p>3. Finally, if the <code>add_metadata</code>  argument is set to TRUE,
a list containing the following elements will be appended to the <code>dsn</code> argument.
</p>

<ul>
<li><p><b>if via is &quot;drive&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>drive_name: </b>Name of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_id: </b>Id of the Image in Google Drive.
</p>
</li>
<li><p><b>drive_download_link: </b>Download link to the image.
</p>
</li></ul>

</li></ul>


<ul>
<li><p><b>if via is &quot;gcs&quot;:</b>
</p>

<ul>
<li><p><b>ee_id: </b>Name of the Earth Engine task.
</p>
</li>
<li><p><b>gcs_name: </b>Name of the Image in Google Cloud Storage.
</p>
</li>
<li><p><b>gcs_bucket: </b>Name of the bucket.
</p>
</li>
<li><p><b>gcs_fileFormat: </b>Format of the image.
</p>
</li>
<li><p><b>gcs_public_link: </b>Download link to the image.
</p>
</li>
<li><p><b>gcs_URI: </b>gs:// link to the image.
</p>
</li></ul>

</li></ul>


</li></ul>

<p>For getting more information about exporting data from Earth Engine, take
a look at the
<a href="https://developers.google.com/earth-engine/guides/exporting">Google
Earth Engine Guide - Export data</a>.
</p>


<h3>Value</h3>

<p>If add_metadata is FALSE, <code>ee_imagecollection_to_local</code> will
return a character vector containing the filename of the images downloaded.
Otherwise, if add_metadata is TRUE, will return a list with extra information
related to the exportation (see details).
</p>


<h3>See Also</h3>

<p>Other image download functions: 
<code><a href="#topic+ee_as_raster">ee_as_raster</a>()</code>,
<code><a href="#topic+ee_as_rast">ee_as_rast</a>()</code>,
<code><a href="#topic+ee_as_stars">ee_as_stars</a>()</code>,
<code><a href="#topic+ee_as_thumbnail">ee_as_thumbnail</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(raster)
ee_Initialize(drive = TRUE, gcs = TRUE)

# USDA example
loc &lt;- ee$Geometry$Point(-99.2222, 46.7816)
collection &lt;- ee$ImageCollection('USDA/NAIP/DOQQ')$
  filterBounds(loc)$
  filterDate('2008-01-01', '2020-01-01')$
  filter(ee$Filter$listContains("system:band_names", "N"))

# From ImageCollection to local directory
ee_crs &lt;- collection$first()$projection()$getInfo()$crs
geometry &lt;- collection$first()$geometry(proj = ee_crs)$bounds()
tmp &lt;- tempdir()

## Using drive
# one by once
ic_drive_files_1 &lt;- ee_imagecollection_to_local(
  ic = collection,
  region = geometry,
  scale = 250,
  dsn = file.path(tmp, "drive_")
)

# all at once
ic_drive_files_2 &lt;- ee_imagecollection_to_local(
  ic = collection,
  region = geometry,
  scale = 250,
  lazy = TRUE,
  dsn = file.path(tmp, "drive_")
)

# From Google Drive to client-side
doqq_dsn &lt;- ic_drive_files_2 %&gt;% ee_utils_future_value()
sapply(doqq_dsn, '[[', 1)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_Initialize'>Authenticate and Initialize Earth Engine</h2><span id='topic+ee_Initialize'></span>

<h3>Description</h3>

<p>Authorize rgee to manage Earth Engine resources, Google
Drive, and Google Cloud Storage. The <code>ee_initialize()</code> via
web-browser will ask users to sign into your Google account and
allows you to grant permission to manage resources. This function is
a wrapper around <code>rgee::ee$Initialize()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_Initialize(
  user = NULL,
  drive = FALSE,
  gcs = FALSE,
  credentials = "persistent",
  opt_url = NULL,
  cloud_api_key = NULL,
  http_transport = NULL,
  project = NULL,
  quiet = FALSE,
  auth_mode = "notebook",
  auth_quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_Initialize_+3A_user">user</code></td>
<td>
<p>Character (optional, e.g. <code>data.colec.fbf</code>).  The user parameter
is used to create a folder inside the path <code>~/.config/earthengine/</code>
where all the credentials for a specific Google identity are saved.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_drive">drive</code></td>
<td>
<p>Logical (optional). If set to TRUE, the drive credential will be
cached in the path <code>~/.config/earthengine/</code>.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_gcs">gcs</code></td>
<td>
<p>Logical (optional). If TRUE, the Google Cloud Storage
credential will be cached in the path <code>~/.config/earthengine/</code>.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_credentials">credentials</code></td>
<td>
<p>OAuth2 GEE credentials. 'persistent' (default) means it will
use the GEE credentials already stored in the filesystem. If the credentials are not found,
it will raise an explanatory exception guiding the user to create those credentials.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_opt_url">opt_url</code></td>
<td>
<p>The base url for the EarthEngine REST API to connect to.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_cloud_api_key">cloud_api_key</code></td>
<td>
<p>An optional API key to use the Cloud API.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_http_transport">http_transport</code></td>
<td>
<p>The HTTP transport method to use for making requests</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_project">project</code></td>
<td>
<p>The client project ID or number to be used for making API calls.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info messages.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_auth_mode">auth_mode</code></td>
<td>
<p>The authentication mode. One of:
</p>

<ul>
<li><p>1. paste - send user to accounts.google.com to get a pastable token
</p>
</li>
<li><p>2. notebook - send user to notebook authenticator page
</p>
</li>
<li><p>3. gcloud - use gcloud to obtain credentials (will set appdefault)
</p>
</li>
<li><p>4. appdefault - read from existing $GOOGLE_APPLICATION_CREDENTIALS file
</p>
</li>
<li><p>5. None - a default mode is chosen based on your environment.
</p>
</li></ul>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_auth_quiet">auth_quiet</code></td>
<td>
<p>Logical. <a href="#topic+ee_Authenticate">ee_Authenticate</a> quiet parameter. If TRUE,
do not require interactive prompts and force &ndash;no-browser mode for gcloud.</p>
</td></tr>
<tr><td><code id="ee_Initialize_+3A_...">...</code></td>
<td>
<p>Extra exporting argument. See <a href="#topic+ee_Authenticate">ee_Authenticate</a>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>ee_Initialize()</code> can manage Google Drive, and Google
Cloud Storage resources using the R packages googledrive and
googlecloudStorageR, respectively. By default, rgee does not require
them. These are only necessary to enable rgee I/O functionality.
All user credentials are saved in the directory
<code>~/.config/earthengine/</code>.
</p>


<h3>Value</h3>

<p>No return value, called for initializing the earthengine-api.
</p>


<h3>See Also</h3>

<p>Other session management functions: 
<code><a href="#topic+ee_user_info">ee_user_info</a>()</code>,
<code><a href="#topic+ee_users">ee_users</a>()</code>,
<code><a href="#topic+ee_version">ee_version</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

# Simple init - Load just the Earth Engine credential
ee_Initialize()
ee_user_info()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_install'>Create an isolated Python virtual environment with all rgee dependencies.</h2><span id='topic+ee_install'></span>

<h3>Description</h3>

<p>Create an isolated Python virtual environment with all rgee dependencies.
<code>ee_install</code> realize the following six (6) tasks:
</p>

<ul>
<li><p>1. IIf you do not have a Python environment installed, it will display
an interactive menu to install <a href="https://docs.conda.io/en/latest/miniconda.html">Miniconda</a>
(a free minimal installer for conda).
</p>
</li>
<li><p>2. If it exists, the previous Python environment specified in
the <code>py_env</code> argument will be deleted.
</p>
</li>
<li><p>3. Create a new Python environment (See <code>py_env</code>) argument.
</p>
</li>
<li><p>4. Set the environment variable EARTHENGINE_PYTHON and EARTHENGINE_ENV.
It is used to define RETICULATE_PYTHON when the library is loaded. See this
<a href="https://rstudio.github.io/reticulate/articles/versions.html">article</a>
for further details.
</p>
</li>
<li><p>5. Install rgee Python dependencies. Using <code>reticulate::py_install</code>.
</p>
</li>
<li><p>6. Interactive menu to confirm if restart the R session to see changes.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ee_install(
  py_env = "rgee",
  earthengine_version = ee_version(),
  python_version = "3.8",
  confirm = interactive()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_install_+3A_py_env">py_env</code></td>
<td>
<p>Character. The name, or full path, of the Python environment
to be used by rgee.</p>
</td></tr>
<tr><td><code id="ee_install_+3A_earthengine_version">earthengine_version</code></td>
<td>
<p>Character. The Earth Engine Python API version
to install. By default <code>rgee::ee_version()</code>.</p>
</td></tr>
<tr><td><code id="ee_install_+3A_python_version">python_version</code></td>
<td>
<p>Only Windows users. The Python version to be used
in this conda environment. If set to NULL, the default Python package will be used.
For example, you can specify python_version = &quot;3.6&quot; to request the creation of the
conda environment with a copy of Python 3.6.</p>
</td></tr>
<tr><td><code id="ee_install_+3A_confirm">confirm</code></td>
<td>
<p>Logical. Confirm before restarting R?.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for installing non-R dependencies.
</p>


<h3>See Also</h3>

<p>Other ee_install functions: 
<code><a href="#topic+ee_install_set_pyenv">ee_install_set_pyenv</a>()</code>,
<code><a href="#topic+ee_install_upgrade">ee_install_upgrade</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
# ee_install()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_install_set_pyenv'>Specify a Python environment for rgee</h2><span id='topic+ee_install_set_pyenv'></span>

<h3>Description</h3>

<p>Specify a Python environment to use with rgee. This function creates
a .Renviron file that contains two environmental variables: 'EARTHENGINE PYTHON'
and 'EARTHENGINE ENV'. If an .Renviron file is already in use, <code>ee_install_set_pyenv</code> will
append the two previous environmental variables to the end of the file. If the prior two
environmental variables were previously set, <code>ee_install_set_pyenv</code> will simply overwrite them.
See details to get more information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_install_set_pyenv(
  py_path,
  py_env = NULL,
  Renviron = "global",
  confirm = interactive(),
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_install_set_pyenv_+3A_py_path">py_path</code></td>
<td>
<p>The path to a Python interpreter</p>
</td></tr>
<tr><td><code id="ee_install_set_pyenv_+3A_py_env">py_env</code></td>
<td>
<p>The name of the conda or venv environment. If
NULL, <code><a href="#topic+ee_install_upgrade">ee_install_upgrade</a></code> and <code><a href="reticulate.html#topic+py_install">py_install</a></code> functions will not work.</p>
</td></tr>
<tr><td><code id="ee_install_set_pyenv_+3A_renviron">Renviron</code></td>
<td>
<p>Character. If it is &quot;global&quot; the environment variables are set in
the .Renviron located in the Sys.getenv(&quot;HOME&quot;) folder. On the other hand,  if
it is &quot;local&quot; the environment variables are set in the .Renviron on the
working directory (getwd()). Finally, users can also enter a specific path
(see examples).</p>
</td></tr>
<tr><td><code id="ee_install_set_pyenv_+3A_confirm">confirm</code></td>
<td>
<p>Logical. Confirm before restarting R?.</p>
</td></tr>
<tr><td><code id="ee_install_set_pyenv_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The 'EARTHENGINE_PYTHON' set the Python interpreter path to use with rgee.
In the other hand, the 'EARTHENGINE ENV' set the Python environment name. Both
variables are storage in an .Renviron file. See <code><a href="base.html#topic+Startup">Startup</a></code> documentation to
get more information about startup files in R.
</p>


<h3>Value</h3>

<p>no return value, called for setting EARTHENGINE_PYTHON in .Renviron
</p>


<h3>See Also</h3>

<p>Other ee_install functions: 
<code><a href="#topic+ee_install_upgrade">ee_install_upgrade</a>()</code>,
<code><a href="#topic+ee_install">ee_install</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

## IMPORTANT: Change 'py_path' argument according to your own Python PATH
## For Anaconda users - Windows OS
## OBS: Anaconda Python PATH can vary, run where anaconda in console.
# win_py_path = paste0(
#    "C:/Users/UNICORN/AppData/Local/Programs/Python/",
#    "Python37/python.exe"
# )
# ee_install_set_pyenv(
#   py_path = win_py_path,
#   py_env = "rgee" # Change it for your own Python ENV
# )

## For Anaconda users - MacOS users
# ee_install_set_pyenv(
#   py_path = "/Users/UNICORN/opt/anaconda3/bin/python",
#   py_env = "rgee" # Change it for your own Python ENV
# )
#
## For Miniconda users - Windows OS
# win_py_path = paste0(
#   "C:/Users/UNICORN/AppData/Local/r-miniconda/envs/rgee/",
#   "python.exe"
# )
# ee_install_set_pyenv(
#   py_path = win_py_path,
#   py_env = "rgee" # Change it for your own Python ENV
# )

## For Miniconda users - Linux/MacOS users
# unix_py_path = paste0(
#   "/home/UNICORN/.local/share/r-miniconda/envs/",
#   "rgee/bin/python3"
# )
# ee_install_set_pyenv(
#   py_path = unix_py_path,
#   py_env = "rgee" # Change it for your own Python ENV
# )

## For virtualenv users - Linux/MacOS users
# ee_install_set_pyenv(
#   py_path = "/home/UNICORN/.virtualenvs/rgee/bin/python",
#   py_env = "rgee" # Change it for your own Python ENV
# )

## For Python root user - Linux/MacOS users
# ee_install_set_pyenv(
#   py_path = "/usr/bin/python3",
#   py_env = NULL,
#   Renviron = "global" # Save ENV variables in the global .Renv file
# )

# ee_install_set_pyenv(
#   py_path = "/usr/bin/python3",
#   py_env = NULL,
#   Renviron = "local" # Save ENV variables in a local .Renv file
# )

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_install_upgrade'>Upgrade the Earth Engine Python API</h2><span id='topic+ee_install_upgrade'></span>

<h3>Description</h3>

<p>Upgrade the Earth Engine Python API
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_install_upgrade(
  version = NULL,
  earthengine_env = Sys.getenv("EARTHENGINE_ENV")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_install_upgrade_+3A_version">version</code></td>
<td>
<p>Character. The Earth Engine Python API version to upgrade.
By default <code>rgee::ee_version()</code>.</p>
</td></tr>
<tr><td><code id="ee_install_upgrade_+3A_earthengine_env">earthengine_env</code></td>
<td>
<p>Character. The name, or full path, of the
environment in which the earthengine-api packages are to be installed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>no return value, called to upgrade the earthengine-api Python package
</p>


<h3>See Also</h3>

<p>Other ee_install functions: 
<code><a href="#topic+ee_install_set_pyenv">ee_install_set_pyenv</a>()</code>,
<code><a href="#topic+ee_install">ee_install</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
# ee_install_upgrade()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_manage-tools'>Interface to manage the Earth Engine Asset</h2><span id='topic+ee_manage-tools'></span><span id='topic+ee_manage_create'></span><span id='topic+ee_manage_delete'></span><span id='topic+ee_manage_assetlist'></span><span id='topic+ee_manage_quota'></span><span id='topic+ee_manage_copy'></span><span id='topic+ee_manage_move'></span><span id='topic+ee_manage_set_properties'></span><span id='topic+ee_manage_delete_properties'></span><span id='topic+ee_manage_asset_access'></span><span id='topic+ee_manage_task'></span><span id='topic+ee_manage_cancel_all_running_task'></span><span id='topic+ee_manage_asset_size'></span>

<h3>Description</h3>

<p>R functions to manage the Earth Engine Asset. The interface allows users
to create and eliminate folders, move and copy assets, set and delete
properties, handle access control lists, and manage and/or cancel tasks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_manage_create(path_asset, asset_type = "Folder", quiet = FALSE)

ee_manage_delete(path_asset, quiet = FALSE, strict = TRUE)

ee_manage_assetlist(path_asset, quiet = FALSE, strict = TRUE)

ee_manage_quota(quiet = FALSE)

ee_manage_copy(path_asset, final_path, strict = TRUE, quiet = FALSE)

ee_manage_move(path_asset, final_path, strict = TRUE, quiet = FALSE)

ee_manage_set_properties(path_asset, add_properties, strict = TRUE)

ee_manage_delete_properties(path_asset, del_properties = "ALL", strict = TRUE)

ee_manage_asset_access(
  path_asset,
  owner = NULL,
  editor = NULL,
  viewer = NULL,
  all_users_can_read = TRUE,
  quiet = FALSE
)

ee_manage_task(cache = FALSE)

ee_manage_cancel_all_running_task()

ee_manage_asset_size(path_asset, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_manage-tools_+3A_path_asset">path_asset</code></td>
<td>
<p>Character. Name of the EE asset (Table, Image, Folder or
ImageCollection).</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_asset_type">asset_type</code></td>
<td>
<p>Character. The asset type to create ('Folder' or
'ImageCollection').</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_strict">strict</code></td>
<td>
<p>Character vector. If TRUE, the existence of the asset will be
evaluated before performing the task.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_final_path">final_path</code></td>
<td>
<p>Character. Output filename
(e.g users/datacolecfbf/ic_moved)</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_add_properties">add_properties</code></td>
<td>
<p>List. Set of parameters to established as a property
of an EE object. See details.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_del_properties">del_properties</code></td>
<td>
<p>Character. Names of properties to be deleted. See
details.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_owner">owner</code></td>
<td>
<p>Character vector. Define owner user in the IAM Policy.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_editor">editor</code></td>
<td>
<p>Character vector. Define editor users in the IAM Policy.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_viewer">viewer</code></td>
<td>
<p>Character vector. Define viewer users in the IAM Policy.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_all_users_can_read">all_users_can_read</code></td>
<td>
<p>Logical. All users can see the asset element.</p>
</td></tr>
<tr><td><code id="ee_manage-tools_+3A_cache">cache</code></td>
<td>
<p>Logical. If TRUE, the task report will be saved
in the /temp directory and used when the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the argument <code>del_properties</code> is 'ALL',
<a href="#topic+rgee">ee_manage_delete_properties</a> will delete all
the properties.
</p>


<h3>Author(s)</h3>

<p>Samapriya Roy, adapted to R and improved by csaybar.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize()
ee_user_info()

# Change datacolecfbf by your EE user to be able to reproduce
user &lt;- ee_get_assethome()
addm &lt;- function(x) sprintf("%s/%s",user, x)
# 1. Create a folder or Image Collection
# Change path asset according to your specific user
ee_manage_create(addm("rgee"))

# 1. List all the elements inside a folder or a ImageCollection
ee_manage_assetlist(path_asset = addm("rgee"))

# 2. Create a Folder or a ImageCollection
ee_manage_create(
  path_asset = addm("rgee/rgee_folder"),
  asset_type = "Folder"
)

ee_manage_create(
  path_asset = addm("rgee/rgee_ic"),
  asset_type = "ImageCollection"
)

ee_manage_assetlist(path_asset = addm("rgee"))

# 3. Shows Earth Engine quota
ee_manage_quota()

# 4. Move an EE object to another folder
ee_manage_move(
  path_asset = addm("rgee/rgee_ic"),
  final_path = addm("rgee/rgee_folder/rgee_ic_moved")
)

ee_manage_assetlist(path_asset = addm("rgee/rgee_folder"))

# 5. Set properties to an EE object.
ee_manage_set_properties(
  path_asset = addm("rgee/rgee_folder/rgee_ic_moved"),
  add_properties = list(message = "hello-world", language = "R")
)

ic_id &lt;- addm("rgee/rgee_folder/rgee_ic_moved")
test_ic &lt;- ee$ImageCollection(ic_id)
test_ic$getInfo()

# 6. Delete properties
ee_manage_delete_properties(
  path_asset = addm("rgee/rgee_folder/rgee_ic_moved"),
  del_properties = c("message", "language")
)
test_ic$getInfo()

# 7. Create a report based on all the tasks
# that are running or have already been completed.
ee_manage_task()

# 8. Cancel all the running task
ee_manage_cancel_all_running_task()

# 9. Delete EE objects or folders
ee_manage_delete(addm("rgee/"))

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_monitoring'>Monitoring Earth Engine task progress</h2><span id='topic+ee_monitoring'></span><span id='topic+ee_check_task_status'></span>

<h3>Description</h3>

<p>Monitoring Earth Engine task progress
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_monitoring(
  task,
  task_time = 5,
  eeTaskList = FALSE,
  quiet = FALSE,
  max_attempts = 5
)

ee_check_task_status(task, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_monitoring_+3A_task">task</code></td>
<td>
<p>List generated after a task is started (i.e., after run
<code>ee$batch$Task$start()</code>) or a character that represents the ID of a EE
task started.</p>
</td></tr>
<tr><td><code id="ee_monitoring_+3A_task_time">task_time</code></td>
<td>
<p>Numeric. How often (in seconds) should a task be polled?</p>
</td></tr>
<tr><td><code id="ee_monitoring_+3A_eetasklist">eeTaskList</code></td>
<td>
<p>Logical. If <code>TRUE</code>, all Earth Engine tasks will be
listed.</p>
</td></tr>
<tr><td><code id="ee_monitoring_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_monitoring_+3A_max_attempts">max_attempts</code></td>
<td>
<p>Number of times to monitor the tasks before ending.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>ee$batch$Task</code> object with a state &quot;COMPLETED&quot; or &quot;FAILED&quot;
according to the Earth Engine server's response.
</p>


<h3>See Also</h3>

<p>Other helper functions: 
<code><a href="#topic+ee_help">ee_help</a>()</code>,
<code><a href="#topic+ee_print">ee_print</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()
ee_monitoring(eeTaskList = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_print'>Print and return metadata about Spatial Earth Engine Objects</h2><span id='topic+ee_print'></span><span id='topic+ee_print.ee.geometry.Geometry'></span><span id='topic+ee_print.ee.feature.Feature'></span><span id='topic+ee_print.ee.featurecollection.FeatureCollection'></span><span id='topic+ee_print.ee.image.Image'></span><span id='topic+ee_print.ee.imagecollection.ImageCollection'></span>

<h3>Description</h3>

<p>Print and return metadata about Spatial Earth Engine Objects.
<code>ee_print</code> can retrieve information about the number of images
or features, number of bands or geometries, number of pixels, geotransform,
data type, properties, and object size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_print(eeobject, ...)

## S3 method for class 'ee.geometry.Geometry'
ee_print(eeobject, ..., clean = FALSE, quiet = FALSE)

## S3 method for class 'ee.feature.Feature'
ee_print(eeobject, ..., clean = FALSE, quiet = FALSE)

## S3 method for class 'ee.featurecollection.FeatureCollection'
ee_print(eeobject, ..., f_index = 0, clean = FALSE, quiet = FALSE)

## S3 method for class 'ee.image.Image'
ee_print(
  eeobject,
  ...,
  img_band,
  time_end = TRUE,
  compression_ratio = 20,
  clean = FALSE,
  quiet = FALSE
)

## S3 method for class 'ee.imagecollection.ImageCollection'
ee_print(
  eeobject,
  ...,
  time_end = TRUE,
  img_index = 0,
  img_band,
  compression_ratio = 20,
  clean = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_print_+3A_eeobject">eeobject</code></td>
<td>
<p>Earth Engine Object. Available for: Geometry, Feature,
FeatureCollection, Image or ImageCollection.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="ee_print_+3A_clean">clean</code></td>
<td>
<p>Logical. If TRUE, the cache will be cleaned.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
<tr><td><code id="ee_print_+3A_f_index">f_index</code></td>
<td>
<p>Numeric. Index of the <code>ee$FeatureCollection</code> to fetch.
Relevant just for <code>ee$FeatureCollection</code> objects.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_img_band">img_band</code></td>
<td>
<p>Character. Band name of the <code>ee$Image</code> to fetch.
Relevant just for <code>ee$ImageCollection</code> and <code>ee$Image</code> objects.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_time_end">time_end</code></td>
<td>
<p>Logical. If TRUE, the system:time_end property in ee$Image
is also returned. See <code>rgee::ee_get_date_img</code> for details.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_compression_ratio">compression_ratio</code></td>
<td>
<p>Numeric. Measurement of the relative data size
reduction produced by a data compression algorithm (ignored if <code>eeobject</code>
is not an <code>ee$Image</code> or <code>ee$ImageCollection</code>). By default is 20.</p>
</td></tr>
<tr><td><code id="ee_print_+3A_img_index">img_index</code></td>
<td>
<p>Numeric. Index of the <code>ee$ImageCollection</code> to fetch.
Relevant just for <code>ee$ImageCollection</code> objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the metadata of the Earth Engine object.
</p>


<h3>See Also</h3>

<p>Other helper functions: 
<code><a href="#topic+ee_help">ee_help</a>()</code>,
<code><a href="#topic+ee_monitoring">ee_monitoring</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

# Geometry
geom &lt;- ee$Geometry$Rectangle(-10,-10,10,10)
Map$addLayer(geom)
ee_print(geom)

# Feature
feature &lt;- ee$Feature(geom, list(rgee = "ee_print", data = TRUE))
ee_print(feature)

# FeatureCollection
featurecollection &lt;- ee$FeatureCollection(feature)
ee_print(featurecollection)

# Image
srtm &lt;- ee$Image("CGIAR/SRTM90_V4")
ee_print(srtm)

srtm_clip &lt;- ee$Image("CGIAR/SRTM90_V4")$clip(geom)
srtm_metadata &lt;- ee_print(srtm_clip)
srtm_metadata$img_bands_names

# ImageCollection
object &lt;- ee$ImageCollection("LANDSAT/LC08/C01/T1_TOA")$
  filter(ee$Filter()$eq("WRS_PATH", 44))$
  filter(ee$Filter()$eq("WRS_ROW", 34))$
  filterDate("2014-03-01", "2014-08-01")$
  aside(ee_print)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_table_to_asset'>Creates a task to export a FeatureCollection to an EE table asset.</h2><span id='topic+ee_table_to_asset'></span>

<h3>Description</h3>

<p>Creates a task to export a FeatureCollection to an EE table asset.
This function is a wrapper around <code>ee$batch$Export$table$toAsset(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_table_to_asset(
  collection,
  description = "myExportTableTask",
  assetId = NULL,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_table_to_asset_+3A_collection">collection</code></td>
<td>
<p>The feature collection to be exported.</p>
</td></tr>
<tr><td><code id="ee_table_to_asset_+3A_description">description</code></td>
<td>
<p>Human-readable name of the task.</p>
</td></tr>
<tr><td><code id="ee_table_to_asset_+3A_assetid">assetId</code></td>
<td>
<p>The destination asset ID. **kwargs: Holds other
keyword arguments that may have been deprecated.</p>
</td></tr>
<tr><td><code id="ee_table_to_asset_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, the assetId will be overwritten if
it exists.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted Task that exports the table to Earth Engine Asset.
</p>


<h3>See Also</h3>

<p>Other vector export task creator: 
<code><a href="#topic+ee_table_to_drive">ee_table_to_drive</a>()</code>,
<code><a href="#topic+ee_table_to_gcs">ee_table_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize()

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()

amk_fc &lt;- ee$FeatureCollection(
  list(ee$Feature(ee_ROI, list(name = "Amarakaeri")))
)

assetid &lt;- paste0(ee_get_assethome(), '/geom_Amarakaeri')
task_vector &lt;- ee_table_to_asset(
  collection = amk_fc,
  overwrite = TRUE,
  assetId = assetid
)
task_vector$start()
ee_monitoring(task_vector) # optional

ee_fc &lt;- ee$FeatureCollection(assetid)
Map$centerObject(ee_fc)
Map$addLayer(ee_fc)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_table_to_drive'>Creates a task to export a FeatureCollection to Google Drive.</h2><span id='topic+ee_table_to_drive'></span>

<h3>Description</h3>

<p>Creates a task to export a FeatureCollection to Google Drive.
This function is a wrapper around <code>ee$batch$Export$table$toDrive(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_table_to_drive(
  collection,
  description = "myExportTableTask",
  folder = "rgee_backup",
  fileNamePrefix = NULL,
  timePrefix = TRUE,
  fileFormat = NULL,
  selectors = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_table_to_drive_+3A_collection">collection</code></td>
<td>
<p>The feature collection to be exported.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_description">description</code></td>
<td>
<p>User-friendly name of the task.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_folder">folder</code></td>
<td>
<p>The name of a unique folder in your Drive
account to export into. Defaults to the root of the drive.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_filenameprefix">fileNamePrefix</code></td>
<td>
<p>The Google Drive filename for the
export. Defaults to the name of the task.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Add current date and time as a prefix to files to export.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_fileformat">fileFormat</code></td>
<td>
<p>The output format: &quot;CSV&quot; (default), &quot;GeoJSON&quot;,
&quot;KML&quot;, &quot;KMZ&quot;, &quot;SHP&quot;, or &quot;TFRecord&quot;.</p>
</td></tr>
<tr><td><code id="ee_table_to_drive_+3A_selectors">selectors</code></td>
<td>
<p>A list of properties to include in the output,
as a list of strings or a comma-separated string. By default, all
properties are included. **kwargs: Holds other keyword arguments
that may have been deprecated such as 'driveFolder' and
'driveFileNamePrefix'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted Task that exports the table to Google Drive.
</p>


<h3>See Also</h3>

<p>Other vector export task creator: 
<code><a href="#topic+ee_table_to_asset">ee_table_to_asset</a>()</code>,
<code><a href="#topic+ee_table_to_gcs">ee_table_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(drive = TRUE)


# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()

amk_fc &lt;- ee$FeatureCollection(
  list(ee$Feature(ee_ROI, list(name = "Amarakaeri")))
)

task_vector &lt;- ee_table_to_drive(
  collection = amk_fc,
  fileFormat = "GEO_JSON",
  fileNamePrefix = "geom_Amarakaeri"
)
task_vector$start()
ee_monitoring(task_vector) # optional
ee_drive_to_local(task = task_vector)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_table_to_gcs'>Creates a task to export a FeatureCollection to Google Cloud Storage.</h2><span id='topic+ee_table_to_gcs'></span>

<h3>Description</h3>

<p>Creates a task to export a FeatureCollection to Google Cloud Storage.
This function is a wrapper around
<code>ee$batch$Export$table$toCloudStorage(...)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_table_to_gcs(
  collection,
  description = "myExportTableTask",
  bucket = NULL,
  fileNamePrefix = NULL,
  timePrefix = TRUE,
  fileFormat = NULL,
  selectors = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_table_to_gcs_+3A_collection">collection</code></td>
<td>
<p>The feature collection to be exported.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_description">description</code></td>
<td>
<p>User-friendly name of the task.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_bucket">bucket</code></td>
<td>
<p>The name of a Cloud Storage bucket for the export.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_filenameprefix">fileNamePrefix</code></td>
<td>
<p>Cloud Storage object name prefix
for the export. Defaults to the name of the task.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_timeprefix">timePrefix</code></td>
<td>
<p>Prefixes the current date and time to the exported files.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_fileformat">fileFormat</code></td>
<td>
<p>The output format: &quot;CSV&quot; (default),
&quot;GeoJSON&quot;, &quot;KML&quot;, &quot;KMZ&quot;, &quot;SHP&quot;, or &quot;TFRecord&quot;.</p>
</td></tr>
<tr><td><code id="ee_table_to_gcs_+3A_selectors">selectors</code></td>
<td>
<p>The list of properties to include in the output,
as a list of strings or a comma-separated string. By default, all
properties are included. **kwargs: Holds other keyword arguments
that may have been deprecated such as 'outputBucket'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An unstarted Task that exports the table to Google Cloud Storage.
</p>


<h3>See Also</h3>

<p>Other vector export task creator: 
<code><a href="#topic+ee_table_to_asset">ee_table_to_asset</a>()</code>,
<code><a href="#topic+ee_table_to_drive">ee_table_to_drive</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
library(sf)

ee_users()
ee_Initialize(gcs = TRUE)

# Define study area (local -&gt; earth engine)
# Communal Reserve Amarakaeri - Peru
rlist &lt;- list(xmin = -71.13, xmax = -70.95,ymin = -12.89, ymax = -12.73)
ROI &lt;- c(rlist$xmin, rlist$ymin,
         rlist$xmax, rlist$ymin,
         rlist$xmax, rlist$ymax,
         rlist$xmin, rlist$ymax,
         rlist$xmin, rlist$ymin)
ee_ROI &lt;- matrix(ROI, ncol = 2, byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon() %&gt;%
  st_sfc() %&gt;%
  st_set_crs(4326) %&gt;%
  sf_as_ee()

amk_fc &lt;- ee$FeatureCollection(
  list(ee$Feature(ee_ROI, list(name = "Amarakaeri")))
)

task_vector &lt;- ee_table_to_gcs(
  collection = amk_fc,
  bucket = "rgee_dev",
  fileFormat = "SHP",
  fileNamePrefix = "geom_Amarakaeri"
)
task_vector$start()
ee_monitoring(task_vector) # optional
amk_geom &lt;- ee_gcs_to_local(task = task_vector)
plot(sf::read_sf(amk_geom[3]), border = "red", lwd = 10)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_user_info'>Display the credentials and general info of the initialized user</h2><span id='topic+ee_user_info'></span>

<h3>Description</h3>

<p>Display the credentials and general info of the initialized user
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_user_info(quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_user_info_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with information about the Earth Engine user.
</p>


<h3>See Also</h3>

<p>Other session management functions: 
<code><a href="#topic+ee_Initialize">ee_Initialize</a>()</code>,
<code><a href="#topic+ee_users">ee_users</a>()</code>,
<code><a href="#topic+ee_version">ee_version</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()
ee_user_info()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_users'>Display the credentials of all users as a table</h2><span id='topic+ee_users'></span>

<h3>Description</h3>

<p>Display Earth Engine, Google Drive, and Google Cloud Storage Credentials as
a table.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_users(quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_users_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info messages.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with credential information of all users.
</p>


<h3>See Also</h3>

<p>Other session management functions: 
<code><a href="#topic+ee_Initialize">ee_Initialize</a>()</code>,
<code><a href="#topic+ee_user_info">ee_user_info</a>()</code>,
<code><a href="#topic+ee_version">ee_version</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_users()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_cog_metadata'>Return metadata of a COG tile server</h2><span id='topic+ee_utils_cog_metadata'></span>

<h3>Description</h3>

<p>Return metadata of a COG tile server
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_cog_metadata(
  resource,
  visParams,
  titiler_server = "https://api.cogeo.xyz/"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_cog_metadata_+3A_resource">resource</code></td>
<td>
<p>Character that represents a COG tile server file.</p>
</td></tr>
<tr><td><code id="ee_utils_cog_metadata_+3A_visparams">visParams</code></td>
<td>
<p>Visualization parameters see &quot;https://api.cogeo.xyz/docs&quot;.</p>
</td></tr>
<tr><td><code id="ee_utils_cog_metadata_+3A_titiler_server">titiler_server</code></td>
<td>
<p>TiTiler endpoint. Defaults to &quot;https://api.cogeo.xyz/&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A metadata list for a COG file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 library(rgee)

server &lt;- "https://s3-us-west-2.amazonaws.com/planet-disaster-data/hurricane-harvey/"
file &lt;- "SkySat_Freeport_s03_20170831T162740Z3.tif"
resource &lt;- paste0(server, file)
visParams &lt;- list(nodata = 0, expression = "B3, B2, B1", rescale = "3000, 13500")
ee_utils_cog_metadata(resource, visParams)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_create_json'>Convert an R list into a JSON file in the temp() file</h2><span id='topic+ee_utils_create_json'></span>

<h3>Description</h3>

<p>Convert an R list into a JSON file in the temp() file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_create_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_create_json_+3A_x">x</code></td>
<td>
<p>List to convert into a JSON file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A JSON file saved in a /tmp dir.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_utils_create_json(list(a=10,b=10))

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_create_manifest_image'>Create a manifest to upload an image</h2><span id='topic+ee_utils_create_manifest_image'></span>

<h3>Description</h3>

<p>Create a manifest to upload a GeoTIFF to Earth Engine asset folder. The
&quot;manifest&quot; is simply a JSON file that describe all the upload parameters. See
<a href="https://developers.google.com/earth-engine/guides/image_manifest">https://developers.google.com/earth-engine/guides/image_manifest</a> to get more
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_create_manifest_image(
  gs_uri,
  assetId,
  properties = NULL,
  start_time = "1970-01-01",
  end_time = "1970-01-01",
  pyramiding_policy = "MEAN",
  returnList = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_create_manifest_image_+3A_gs_uri">gs_uri</code></td>
<td>
<p>Character. GCS full path of the image to upload to Earth Engine assets,
e.g. gs://rgee_dev/l8.tif</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_assetid">assetId</code></td>
<td>
<p>Character. How to call the file once uploaded
to the Earth Engine Asset. e.g. users/datacolecfbf/l8.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_properties">properties</code></td>
<td>
<p>List. Set of parameters to be set up as properties
of the EE object.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_start_time">start_time</code></td>
<td>
<p>Character. Sets the start time property (system:time_start).
It could be a number (timestamp) or a date.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_end_time">end_time</code></td>
<td>
<p>Character. Sets the end time property (system:time_end).
It could be a number (timestamp) or a date.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_pyramiding_policy">pyramiding_policy</code></td>
<td>
<p>Character. The pyramid reduction policy to use.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_returnlist">returnList</code></td>
<td>
<p>Logical. If TRUE will return the &quot;manifest&quot; as a list. Otherwise,
will return a JSON file.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_image_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>returnList</code> is TRUE, a list otherwise a JSON file.
</p>


<h3>See Also</h3>

<p>Other generic upload functions: 
<code><a href="#topic+ee_utils_create_manifest_table">ee_utils_create_manifest_table</a>()</code>,
<code><a href="#topic+local_to_gcs">local_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

tif &lt;- system.file("tif/L7_ETMs.tif", package = "stars")

# Return a JSON file
ee_utils_create_manifest_image(
  gs_uri = "gs://rgee_dev/l8.tif",
  assetId = "users/datacolecfbf/l8"
)

# Return a list
ee_utils_create_manifest_image(
  gs_uri = "gs://rgee_dev/l8.tif",
  assetId = "users/datacolecfbf/l8",
  returnList = TRUE
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_create_manifest_table'>Create a manifest to upload a table</h2><span id='topic+ee_utils_create_manifest_table'></span>

<h3>Description</h3>

<p>Create a manifest to upload a zipped shapefile to Earth Engine assets folder. The
&quot;manifest&quot; is simply a JSON file that describe all the upload parameters. See
<a href="https://developers.google.com/earth-engine/guides/image_manifest">https://developers.google.com/earth-engine/guides/image_manifest</a> to get more
details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_create_manifest_table(
  gs_uri,
  assetId,
  start_time = "1970-01-01",
  end_time = "1970-01-01",
  properties = NULL,
  returnList = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_create_manifest_table_+3A_gs_uri">gs_uri</code></td>
<td>
<p>Character. GCS full path of the table to upload to Earth Engine assets
e.g. gs://rgee_dev/nc.zip</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_assetid">assetId</code></td>
<td>
<p>Character. How to call the file once uploaded
to the Earth Engine Asset. e.g. users/datacolecfbf/nc.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_start_time">start_time</code></td>
<td>
<p>Character. Sets the start time property (system:time_start).
It could be a number (timestamp) or a date.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_end_time">end_time</code></td>
<td>
<p>Character. Sets the end time property (system:time_end).
It could be a number (timestamp) or a date.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_properties">properties</code></td>
<td>
<p>List. Set of parameters to be set up as properties
of the EE object.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_returnlist">returnList</code></td>
<td>
<p>Logical. If TRUE will return the &quot;manifest&quot; as a list otherwise
will return a JSON file.</p>
</td></tr>
<tr><td><code id="ee_utils_create_manifest_table_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If <code>returnList</code> is TRUE, a list otherwise a JSON file.
</p>


<h3>See Also</h3>

<p>Other generic upload functions: 
<code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a>()</code>,
<code><a href="#topic+local_to_gcs">local_to_gcs</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)
ee_Initialize(gcs = TRUE)

x &lt;- st_read(system.file("shape/nc.shp", package = "sf"))
shp_dir &lt;- sprintf("%s.shp", tempfile())
geozip_dir &lt;- ee_utils_shp_to_zip(x, shp_dir)

# Return a JSON file
manifest &lt;- ee_utils_create_manifest_table(
  gs_uri = "gs://rgee_dev/nc.zip",
  assetId = "users/datacolecfbf/nc"
)

# Return a list
ee_utils_create_manifest_table(
  gs_uri = "gs://rgee_dev/nc.zip",
  assetId = "users/datacolecfbf/nc",
  returnList = TRUE
)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_dataset_display'>Search into the Earth Engine Data Catalog</h2><span id='topic+ee_utils_dataset_display'></span>

<h3>Description</h3>

<p>Search into the Earth Engine Data Catalog
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_dataset_display(ee_search_dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_dataset_display_+3A_ee_search_dataset">ee_search_dataset</code></td>
<td>
<p>Character that represents the EE dataset ID.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for displaying the Earth Engine dataset in the browser.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 library(rgee)

 ee_datasets &lt;- c("WWF/HydroSHEDS/15DIR", "WWF/HydroSHEDS/03DIR")
 ee_utils_dataset_display(ee_datasets)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_future_value'>The value of a future or the values of all elements in a container</h2><span id='topic+ee_utils_future_value'></span>

<h3>Description</h3>

<p>Gets the value of a future or the values of all elements (including futures)
in a container such as a list, an environment, or a list environment.
If one or more futures is unresolved, then this function blocks until all
queried futures are resolved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_future_value(future, stdout = TRUE, signal = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_future_value_+3A_future">future</code></td>
<td>
<p>x A Future, an environment, a list, or a list environment.</p>
</td></tr>
<tr><td><code id="ee_utils_future_value_+3A_stdout">stdout</code></td>
<td>
<p>If TRUE, standard output captured while resolving futures
is relayed, otherwise not.</p>
</td></tr>
<tr><td><code id="ee_utils_future_value_+3A_signal">signal</code></td>
<td>
<p>If TRUE, <a href="base.html#topic+conditions">conditions</a> captured while resolving
futures are relayed, otherwise not.</p>
</td></tr>
<tr><td><code id="ee_utils_future_value_+3A_...">...</code></td>
<td>
<p>All arguments used by the S3 methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>value()</code> of a Future object returns the value of the future, which can
be any type of <span class="rlang"><b>R</b></span> object.
</p>
<p><code>value()</code> of a list, an environment, or a list environment returns an
object with the same number of elements and of the same class.
Names and dimension attributes are preserved, if available.
All future elements are replaced by their corresponding <code>value()</code> values.
For all other elements, the existing object is kept as-is.
</p>
<p>If <code>signal</code> is TRUE and one of the futures produces an error, then
that error is produced.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson <a href="https://github.com/HenrikBengtsson/">https://github.com/HenrikBengtsson/</a>
</p>

<hr>
<h2 id='ee_utils_get_crs'>Convert EPSG, ESRI or SR-ORG code into a OGC WKT</h2><span id='topic+ee_utils_get_crs'></span>

<h3>Description</h3>

<p>Convert EPSG, ESRI or SR-ORG code into a OGC WKT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_get_crs(code)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_get_crs_+3A_code">code</code></td>
<td>
<p>The projection code.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character which represents the same projection in WKT2 string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_utils_get_crs("SR-ORG:6864")
ee_utils_get_crs("EPSG:4326")
ee_utils_get_crs("ESRI:37002")

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_py_to_r'>Convert between Python and R objects</h2><span id='topic+ee_utils_py_to_r'></span>

<h3>Description</h3>

<p>Convert between Python and R objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_py_to_r(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_py_to_r_+3A_x">x</code></td>
<td>
<p>A python object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An R object
</p>


<h3>See Also</h3>

<p>Other ee_utils functions: 
<code><a href="#topic+ee_utils_pyfunc">ee_utils_pyfunc</a>()</code>,
<code><a href="#topic+ee_utils_shp_to_zip">ee_utils_shp_to_zip</a>()</code>
</p>

<hr>
<h2 id='ee_utils_pyfunc'>Wrap an R function in a Python function with the same signature.</h2><span id='topic+ee_utils_pyfunc'></span>

<h3>Description</h3>

<p>This function could wrap an R function in a Python
function with the same signature. Note that the signature of the
R function must not contain esoteric Python-incompatible constructs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_pyfunc(f)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_pyfunc_+3A_f">f</code></td>
<td>
<p>An R function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Python function that calls the R function <code>f</code> with the same
signature.
</p>


<h3>Note</h3>

<p><code><a href="reticulate.html#topic+py_func">py_func</a></code> has been renamed to ee_utils_pyfunc
just to maintain the rgee functions name's style. All recognition
for this function must always be given to <span class="pkg">reticulate</span>.
</p>


<h3>Author(s)</h3>

<p>Yuan Tang and J.J. Allaire
</p>


<h3>See Also</h3>

<p>Other ee_utils functions: 
<code><a href="#topic+ee_utils_py_to_r">ee_utils_py_to_r</a>()</code>,
<code><a href="#topic+ee_utils_shp_to_zip">ee_utils_shp_to_zip</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

# Earth Engine List
ee_SimpleList &lt;- ee$List$sequence(0, 12)
ee_NewList &lt;- ee_SimpleList$map(
  ee_utils_pyfunc(
    function(x) {
      ee$Number(x)$add(x)
    }
  )
)

ee_NewList$getInfo()

# Earth Engine ImageCollection
constant1 &lt;- ee$Image(1)
constant2 &lt;- ee$Image(2)
ee_ic &lt;- ee$ImageCollection(c(constant2, constant1))
ee_newic &lt;- ee_ic$map(
  ee_utils_pyfunc(
    function(x) ee$Image(x)$add(x)
  )
)
ee_newic$mean()$getInfo()$type

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_sak_copy'>Stores a Service account key (SaK) inside the EE folder</h2><span id='topic+ee_utils_sak_copy'></span>

<h3>Description</h3>

<p>Copy SaK in the ~/.config/earthengine/$USER.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_sak_copy(sakfile, users = NULL, delete = FALSE, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_sak_copy_+3A_sakfile">sakfile</code></td>
<td>
<p>Character. SaK filename. If missing, the SaK of the first user is used.</p>
</td></tr>
<tr><td><code id="ee_utils_sak_copy_+3A_users">users</code></td>
<td>
<p>Character. The user related to the SaK file. A SaK
file can be related to multiple users.</p>
</td></tr>
<tr><td><code id="ee_utils_sak_copy_+3A_delete">delete</code></td>
<td>
<p>Logical. If TRUE, the SaK filename is deleted after copy.</p>
</td></tr>
<tr><td><code id="ee_utils_sak_copy_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize()

# sakfile &lt;- "/home/rgee_dev/sak_file.json"
## Copy sakfile to the users 'csaybar' and 'ndef'
# ee_utils_sak_copy(sakfile = sakfile, users = c("csaybar", "ndef"))

# # Copy the sakfile of the user1 to the user2 and user3.
# ee_utils_sak_copy(users = c("csaybar", "ndef", "ryali93"))

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_sak_validate'>Validate a Service account key (SaK)</h2><span id='topic+ee_utils_sak_validate'></span>

<h3>Description</h3>

<p>Validate a Service account key (SaK). local_to_gcs, raster_as_ee,
stars_as_ee, and sf_as_ee(via = &quot;gcs_to_asset&quot;, ...) need that the SaK
have privileges to write/read objects in a GCS bucket.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_sak_validate(sakfile, bucket, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_sak_validate_+3A_sakfile">sakfile</code></td>
<td>
<p>Character. SaK filename.</p>
</td></tr>
<tr><td><code id="ee_utils_sak_validate_+3A_bucket">bucket</code></td>
<td>
<p>Character. Name of the GCS bucket. If bucket is not set,
rgee will tries to create a bucket using <code>googleCloudStorageR::gcs_create_bucket</code>.</p>
</td></tr>
<tr><td><code id="ee_utils_sak_validate_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)

ee_Initialize(gcs = TRUE)

# Check a specific SaK
sakfile &lt;- "/home/rgee_dev/sak_file.json"
ee_utils_sak_validate(sakfile, bucket = "rgee_dev")

# Check the SaK for the current user
ee_utils_sak_validate()

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_utils_shp_to_zip'>Create a zip file from an sf object</h2><span id='topic+ee_utils_shp_to_zip'></span>

<h3>Description</h3>

<p>Create a zip file from an sf object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_utils_shp_to_zip(
  x,
  filename,
  SHP_EXTENSIONS = c("dbf", "prj", "shp", "shx")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ee_utils_shp_to_zip_+3A_x">x</code></td>
<td>
<p>sf object</p>
</td></tr>
<tr><td><code id="ee_utils_shp_to_zip_+3A_filename">filename</code></td>
<td>
<p>data source name</p>
</td></tr>
<tr><td><code id="ee_utils_shp_to_zip_+3A_shp_extensions">SHP_EXTENSIONS</code></td>
<td>
<p>file extension of the files to save
into the zip file. By default: &quot;dbf&quot;, &quot;prj&quot;, &quot;shp&quot;, &quot;shx&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. The full path of the created zip file.
</p>


<h3>See Also</h3>

<p>Other ee_utils functions: 
<code><a href="#topic+ee_utils_py_to_r">ee_utils_py_to_r</a>()</code>,
<code><a href="#topic+ee_utils_pyfunc">ee_utils_pyfunc</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)
ee_Initialize(gcs = TRUE)

# Create sf object
nc &lt;- st_read(system.file("shape/nc.shp", package="sf"))
zipfile &lt;- ee_utils_shp_to_zip(nc)

## End(Not run)
</code></pre>

<hr>
<h2 id='ee_version'>Earth Engine API version</h2><span id='topic+ee_version'></span>

<h3>Description</h3>

<p>Earth Engine API version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ee_version()
</code></pre>


<h3>Value</h3>

<p>Character. Earth Engine Python API version used to build rgee.
</p>


<h3>See Also</h3>

<p>Other session management functions: 
<code><a href="#topic+ee_Initialize">ee_Initialize</a>()</code>,
<code><a href="#topic+ee_user_info">ee_user_info</a>()</code>,
<code><a href="#topic+ee_users">ee_users</a>()</code>
</p>

<hr>
<h2 id='eedate_to_rdate'>Pass an Earth Engine date object to R</h2><span id='topic+eedate_to_rdate'></span>

<h3>Description</h3>

<p>Pass an Earth Engine date object to R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eedate_to_rdate(ee_date, timestamp = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eedate_to_rdate_+3A_ee_date">ee_date</code></td>
<td>
<p>ee$date object (ee$Date)</p>
</td></tr>
<tr><td><code id="eedate_to_rdate_+3A_timestamp">timestamp</code></td>
<td>
<p>Logical. If TRUE, return the date in milliseconds
from the Unix Epoch (1970-01-01 00:00:00 UTC). Otherwise, return the
date as a POSIXct object. By default FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>eedate_to_rdate</code> is essential to avoid potential errors that
might appear when users need to retrieve dates. Currently,
R integer only supports 32 bit signed (such integers can only
count up to about 2 billion). This range is notably insufficient for dealing
with GEE date objects represented by timestamps in milliseconds since the
UNIX epoch. <code>eedate_to_rdate</code> uses Python in the backend to obtain the
date and convert it in float before exporting to R.
</p>


<h3>Value</h3>

<p><code>eedate_to_rdate</code> will return either a numeric timestamp or
a POSIXct object depending on the <code>timestamp</code> argument.
</p>


<h3>See Also</h3>

<p>Other date functions: 
<code><a href="#topic+ee_get_date_ic">ee_get_date_ic</a>()</code>,
<code><a href="#topic+ee_get_date_img">ee_get_date_img</a>()</code>,
<code><a href="#topic+rdate_to_eedate">rdate_to_eedate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()

eeDate &lt;- ee$Date$fromYMD(2010,1,1)
eedate_to_rdate(eeDate,timestamp = TRUE) # good
eeDate$getInfo()$value # bad

## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_to_ee_image'>Move a GeoTIFF image from GCS to their EE assets</h2><span id='topic+gcs_to_ee_image'></span>

<h3>Description</h3>

<p>Move a GeoTIFF image from GCS to their EE assets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_to_ee_image(
  manifest,
  overwrite = FALSE,
  command_line_tool_path = NULL,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_to_ee_image_+3A_manifest">manifest</code></td>
<td>
<p>Character. Manifest upload file. See <code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a></code>.</p>
</td></tr>
<tr><td><code id="gcs_to_ee_image_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, the assetId will be overwritten if
it exists.</p>
</td></tr>
<tr><td><code id="gcs_to_ee_image_+3A_command_line_tool_path">command_line_tool_path</code></td>
<td>
<p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="gcs_to_ee_image_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. The Earth Engine asset ID.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
ee_Initialize("csaybar", gcs = TRUE)

# 1. Read GeoTIFF file and create a output filename
tif &lt;- system.file("tif/L7_ETMs.tif", package = "stars")
x &lt;- read_stars(tif)
assetId &lt;- sprintf("%s/%s",ee_get_assethome(),'stars_l7')

# 2. From local to gcs
gs_uri &lt;- local_to_gcs(
  x = tif,
  bucket = 'rgee_dev' # Insert your own bucket here!
)

# 3. Create an Image Manifest
manifest &lt;- ee_utils_create_manifest_image(gs_uri, assetId)

# 4. From GCS to Earth Engine
gcs_to_ee_image(
  manifest = manifest,
  overwrite = TRUE
)

# OPTIONAL: Monitoring progress
ee_monitoring()

# OPTIONAL: Display results
ee_stars_01 &lt;- ee$Image(assetId)
ee_stars_01$bandNames()$getInfo()

Map$centerObject(ee_stars_01)
Map$addLayer(ee_stars_01, list(min = 0, max = 255, bands = c("b3", "b2", "b1")))

## End(Not run)
</code></pre>

<hr>
<h2 id='gcs_to_ee_table'>Move a zipped shapefile from GCS to their EE Assets</h2><span id='topic+gcs_to_ee_table'></span>

<h3>Description</h3>

<p>Move a zipped shapefile from GCS to their EE Assets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gcs_to_ee_table(
  manifest,
  command_line_tool_path = NULL,
  overwrite = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="gcs_to_ee_table_+3A_manifest">manifest</code></td>
<td>
<p>Character. manifest upload file. See <code><a href="#topic+ee_utils_create_manifest_table">ee_utils_create_manifest_table</a></code>.</p>
</td></tr>
<tr><td><code id="gcs_to_ee_table_+3A_command_line_tool_path">command_line_tool_path</code></td>
<td>
<p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="gcs_to_ee_table_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, the assetId will be overwritten if
it exists.</p>
</td></tr>
<tr><td><code id="gcs_to_ee_table_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. The Earth Engine asset ID.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)
ee_Initialize(gcs = TRUE)

# 1. Read dataset and create a output filename
x &lt;- st_read(system.file("shape/nc.shp", package = "sf"))
assetId &lt;- sprintf("%s/%s", ee_get_assethome(), 'toy_poly_gcs')

# 2. From sf to .shp
shp_dir &lt;- sprintf("%s.shp", tempfile())
geozip_dir &lt;- ee_utils_shp_to_zip(x, shp_dir)

# 3. From local to gcs
gcs_filename &lt;- local_to_gcs(
 x = geozip_dir,
 bucket = "rgee_dev" # Insert your own bucket here!
)

# 4. Create Table Manifest
manifest &lt;- ee_utils_create_manifest_table(
 gs_uri = gcs_filename,
 assetId = assetId
)

# 5. From GCS to Earth Engine
ee_nc &lt;- gcs_to_ee_table(manifest, overwrite = TRUE)
ee_monitoring()
Map$addLayer(ee$FeatureCollection(ee_nc))

## End(Not run)
</code></pre>

<hr>
<h2 id='local_to_gcs'>Upload local files to Google Cloud Storage</h2><span id='topic+local_to_gcs'></span>

<h3>Description</h3>

<p>Upload images or tables to Google Cloud Storage
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_to_gcs(x, bucket = NULL, predefinedAcl = "bucketLevel", quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="local_to_gcs_+3A_x">x</code></td>
<td>
<p>Character. filename.</p>
</td></tr>
<tr><td><code id="local_to_gcs_+3A_bucket">bucket</code></td>
<td>
<p>bucket name you are uploading to</p>
</td></tr>
<tr><td><code id="local_to_gcs_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Passed to
<code>googleCloudStorageR::gcs_upload</code>.</p>
</td></tr>
<tr><td><code id="local_to_gcs_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character that represents the full path of the object in the GCS
bucket specified.
</p>


<h3>See Also</h3>

<p>Other generic upload functions: 
<code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a>()</code>,
<code><a href="#topic+ee_utils_create_manifest_table">ee_utils_create_manifest_table</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)

# Initialize a specific Earth Engine account and
# Google Cloud Storage credentials
ee_Initialize(gcs = TRUE)

# # Define an image.
tif &lt;- system.file("tif/L7_ETMs.tif", package = "stars")
local_to_gcs(x = tif, bucket = 'rgee_dev')

## End(Not run)
</code></pre>

<hr>
<h2 id='Map'>R6 object (Map) to display Earth Engine (EE) spatial objects</h2><span id='topic+Map'></span>

<h3>Description</h3>

<p>Create interactive visualizations of spatial EE objects
(ee$FeatureCollection, ee$ImageCollection, ee$Geometry, ee$Feature, and
ee$Image.) using <code>leaflet</code> in the backend.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Map
</code></pre>


<h3>Format</h3>

<p>An object of class environment with the
following functions:
</p>

<ul>
<li>  <p><strong>addLayer(eeObject, visParams, name = NULL, shown = TRUE,
opacity = 1, titiler_viz_convert = TRUE,
titiler_server = &quot;https://api.cogeo.xyz/&quot;)</strong>: Adds a given EE object to the
map as a layer. <br />
</p>

<ul>
<li> <p><strong>eeObject:</strong> The object to add to the interactive map.<br />
</p>
</li>
<li> <p><strong>visParams:</strong> List of parameters for visualization.
See details.<br />
</p>
</li>
<li> <p><strong>name:</strong> The name of the layer.<br />
</p>
</li>
<li> <p><strong>shown:</strong> A flag indicating whether the
layer should be on by default. <br />
</p>
</li>
<li> <p><strong>opacity:</strong> The layer's opacity is represented as a number
between 0 and 1. Defaults to 1. <br />
</p>
</li>
<li> <p><strong>titiler_viz_convert:</strong> Logical. If it is TRUE, Map$addLayer
will transform the visParams to titiler style. Ignored if eeObject is
not a COG file. <br />
</p>
</li>
<li> <p><strong>titiler_server:</strong> TiTiler endpoint. Defaults to
&quot;https://api.cogeo.xyz/&quot;.
</p>
</li></ul>

</li>
<li>  <p><strong>addLayers(eeObject, visParams, name = NULL, shown = TRUE,
opacity = 1)</strong>: Adds a given ee$ImageCollection to the map
as multiple layers. <br />
</p>

<ul>
<li> <p><strong>eeObject:</strong> The ee$ImageCollection to add to the interactive map.<br />
</p>
</li>
<li> <p><strong>visParams:</strong> List of parameters for visualization.
See details.<br />
</p>
</li>
<li> <p><strong>name:</strong> The name of layers.<br />
</p>
</li>
<li> <p><strong>shown:</strong> A flag indicating whether
layers should be on by default. <br />
</p>
</li>
<li> <p><strong>opacity:</strong> The layer's opacity is represented as a number
between 0 and 1. Defaults to 1. <br />
</p>
</li>
<li> <p><strong>nmax:</strong> Numeric. The maximum number of images to display.
By default 5.
</p>
</li></ul>

</li>
<li>  <p><strong>addLegend(visParams, name = &quot;Legend&quot;, position = c(&quot;bottomright&quot;,
&quot;topright&quot;, &quot;bottomleft&quot;, &quot;topleft&quot;), color_mapping= &quot;numeric&quot;, opacity = 1, ...)</strong>:
Adds a given ee$ImageCollection to the map as multiple layers. <br />
</p>

<ul>
<li> <p><strong>visParams:</strong> List of parameters for visualization.<br />
</p>
</li>
<li> <p><strong>name:</strong> The title of the legend.<br />
</p>
</li>
<li> <p><strong>position:</strong> Character. The position of the legend. By default bottomright. <br />
</p>
</li>
<li> <p><strong>color_mapping:</strong> Map data values (numeric or factor/character) to
colors according to a given palette. Use &quot;numeric&quot; (&quot;discrete&quot;) for continuous
(categorical) data. For display characters use &quot;character&quot; and add to visParams
the element &quot;values&quot; containing the desired character names. <br />
</p>
</li>
<li> <p><strong>opacity:</strong> The legend's opacity is represented as a number between 0
and 1. Defaults to 1. <br />
</p>
</li>
<li> <p><strong>...:</strong> Extra legend creator arguments. See <a href="leaflet.html#topic+addLegend">addLegend</a>. <br />
</p>
</li></ul>

</li>
<li> <p><strong>setCenter(lon = 0, lat = 0, zoom = NULL)</strong>: Centers the map
view at the given coordinates with the given zoom level. If no zoom level
is provided, it uses 1 by default.
</p>

<ul>
<li> <p><strong>lon:</strong> The longitude of the center, in degrees.<br />
</p>
</li>
<li> <p><strong>lat:</strong> The latitude of the center, in degrees.<br />
</p>
</li>
<li> <p><strong>zoom:</strong> The zoom level, from 1 to 24.
</p>
</li></ul>

</li>
<li> <p><strong>setZoom(zoom = NULL)</strong>: Sets the zoom level of the map.
</p>

<ul>
<li> <p><strong>zoom:</strong> The zoom level, from 1 to 24.
</p>
</li></ul>

</li>
<li> <p><strong>centerObject(eeObject, zoom = NULL,
maxError = ee$ErrorMargin(1))</strong>: Centers the
map view on a given object. If no zoom level is provided, it will
be predicted according to the bounds of the Earth Engine object specified.
</p>

<ul>
<li> <p><strong>eeObject:</strong> EE object.<br />
</p>
</li>
<li> <p><strong>zoom:</strong> The zoom level, from 1 to 24.
</p>
</li>
<li> <p><strong>maxError:</strong> 	Max error when input
image must be reprojected to an explicitly
requested result projection or geodesic state.
</p>
</li></ul>

</li></ul>



<h3>Details</h3>

<p><code>Map</code> use the Earth Engine method
<a href="https://developers.google.com/earth-engine/api_docs#ee.data.getmapid/">
getMapId</a> to fetch and return an ID dictionary being used to create
layers in a <code>leaflet</code> object. Users can specify visualization
parameters to Map$addLayer by using the visParams argument. Each Earth
Engine spatial object has a specific format. For
<code>ee$Image</code>, the
<a href="https://developers.google.com/earth-engine/guides/image_visualization">
parameters</a> available are:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Parameter</strong></td><td style="text-align: left;"> <strong>Description</strong>  </td><td style="text-align: left;"> <strong>Type</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bands</strong>    </td><td style="text-align: left;">  Comma-delimited list of three band (RGB) </td><td style="text-align: left;">  list </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>min</strong>      </td><td style="text-align: left;">  Value(s) to map to 0 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>max</strong>      </td><td style="text-align: left;">  Value(s) to map to 1 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gain</strong>     </td><td style="text-align: left;">  Value(s) by which to multiply each pixel value </td><td style="text-align: left;">
number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bias</strong>     </td><td style="text-align: left;">  Value(s) to add to each Digital Number
value </td><td style="text-align: left;"> number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gamma</strong>    </td><td style="text-align: left;">  Gamma correction factor(s) </td><td style="text-align: left;">  number or list of
three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>palette</strong>  </td><td style="text-align: left;">  List of CSS-style color strings
(single-band only) </td><td style="text-align: left;">  comma-separated list of hex strings </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>opacity</strong>   </td><td style="text-align: left;">  The opacity of the layer (from 0 to 1)  </td><td style="text-align: left;">  number </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If you add an <code>ee$Image</code> to Map$addLayer without any additional
parameters, by default it assigns the first three bands to red,
green, and blue bands, respectively. The default stretch is based on the
min-max range. On the other hand, the available parameters for
<code>ee$Geometry</code>, <code>ee$Feature</code>, and <code>ee$FeatureCollection</code>
are:
</p>

<ul>
<li> <p><strong>color</strong>: A hex string in the format RRGGBB specifying the
color to use for drawing the features. By default #000000.
</p>
</li>
<li> <p><strong>pointRadius</strong>: The radius of the point markers. By default 3.
</p>
</li>
<li> <p><strong>strokeWidth</strong>: The width of lines and polygon borders. By
default 3.
</p>
</li></ul>



<h3>Value</h3>

<p>Object of class leaflet, with the following extra parameters: tokens, name,
opacity, shown, min, max, palette, and legend. Use the $ method to retrieve
the data (e.g. m$rgee$min).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)

ee_Initialize()

# Case 1: Geometry*
geom1 &lt;- ee$Geometry$Point(list(-73.53, -15.75))
Map$centerObject(geom1, zoom = 8)
m1 &lt;- Map$addLayer(
  eeObject = geom1,
  visParams = list(
    pointRadius = 10,
    color = "FF0000"
  ),
  name = "Geometry-Arequipa"
)

# Case 2: Feature
feature_arq &lt;- ee$Feature(ee$Geometry$Point(list(-72.53, -15.75)))
m2 &lt;- Map$addLayer(
  eeObject = feature_arq,
  name = "Feature-Arequipa"
)
m2 + m1

# Case 4: Image
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")
Map$centerObject(image)
m4 &lt;- Map$addLayer(
  eeObject = image,
  visParams = list(
    bands = c("B4", "B3", "B2"),
    max = 10000
  ),
  name = "SF"
)

# Case 5: ImageCollection
nc &lt;- st_read(system.file("shape/nc.shp", package = "sf")) %&gt;%
  st_transform(4326) %&gt;%
  sf_as_ee()

ee_s2 &lt;- ee$ImageCollection("COPERNICUS/S2")$
  filterDate("2016-01-01", "2016-01-31")$
  filterBounds(nc)
ee_s2 &lt;- ee$ImageCollection(ee_s2$toList(2))

Map$centerObject(nc$geometry())
m5 &lt;- Map$addLayers(ee_s2)
m5

# Case 6: Map comparison
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")
Map$centerObject(image)
m_ndvi &lt;- Map$addLayer(
  eeObject = image$normalizedDifference(list("B5", "B4")),
  visParams = list(min = 0, max = 0.7),
  name = "SF_NDVI"
) + Map$addLegend(list(min = 0, max = 0.7), name = "NDVI", position = "bottomright", bins = 4)
m6 &lt;- m4 | m_ndvi
m6

# Case 7: digging up the metadata
m6$rgee$tokens
m5$rgee$tokens

# Case 8: COG support
# See parameters here: https://api.cogeo.xyz/docs

server &lt;- "https://storage.googleapis.com/pdd-stac/disasters/"
file &lt;- "hurricane-harvey/0831/20170831_172754_101c_3B_AnalyticMS.tif"
resource &lt;- paste0(server, file)
visParams &lt;- list(bands = c("B3", "B2", "B1"), min = 3000, max = 13500, nodata = 0)
Map$centerObject(resource)
Map$addLayer(resource, visParams = visParams, shown = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='map-operator'>EarthEngineMap + EarthEngineMap; adds data from the second map to the first</h2><span id='topic+map-operator'></span><span id='topic++2B.EarthEngineMap'></span><span id='topic++7C.EarthEngineMap'></span><span id='topic++7C+2C'></span><span id='topic+EarthEngineMap+2C'></span><span id='topic+EarthEngineMap-method'></span>

<h3>Description</h3>

<p>EarthEngineMap + EarthEngineMap; adds data from the second map to the first
</p>
<p>EarthEngineMap | EarthEngineMap provides a slider in the middle to compare two maps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'EarthEngineMap'
e1 + e2

## S3 method for class 'EarthEngineMap'
e1 | e2
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="map-operator_+3A_e1">e1</code></td>
<td>
<p>an EarthEngineMap object.</p>
</td></tr>
<tr><td><code id="map-operator_+3A_e2">e2</code></td>
<td>
<p>an EarthEngineMap object.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>tim-salabim. Adapted from mapview code.
</p>

<hr>
<h2 id='print.ee.computedobject.ComputedObject'>print Earth Engine object</h2><span id='topic+print.ee.computedobject.ComputedObject'></span><span id='topic+print'></span>

<h3>Description</h3>

<p>print Earth Engine object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ee.computedobject.ComputedObject'
print(x, ..., type = getOption("rgee.print.option"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.ee.computedobject.ComputedObject_+3A_x">x</code></td>
<td>
<p>Earth Engine spatial object.</p>
</td></tr>
<tr><td><code id="print.ee.computedobject.ComputedObject_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="print.ee.computedobject.ComputedObject_+3A_type">type</code></td>
<td>
<p>Character. What to show about the x object?. Three options are
supported: &quot;json&quot;, &quot;simply&quot;, &quot;ee_print&quot;. By default &quot;simply&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for displaying Earth Engine objects.
</p>

<hr>
<h2 id='R6Map'>R6 class to display Earth Engine (EE) spatial objects</h2><span id='topic+R6Map'></span>

<h3>Description</h3>

<p>Create interactive visualizations of spatial EE objects
(ee$Geometry, ee$Image, ee$Feature, and ee$FeatureCollection)
using <code>leaflet</code>.
</p>


<h3>Details</h3>

<p><code>R6Map</code> uses the Earth Engine method
<a href="https://developers.google.com/earth-engine/api_docs#ee.data.getmapid/">
getMapId</a> to fetch and return an ID dictionary used to create
layers in a <code>leaflet</code> object. Users can specify visualization
parameters to Map$addLayer by using the visParams argument. Each Earth
Engine spatial object has a specific format. For
<code>ee$Image</code>, the
<a href="https://developers.google.com/earth-engine/guides/image_visualization">
parameters</a> available are:
</p>

<table>
<tr>
 <td style="text-align: left;">
<strong>Parameter</strong></td><td style="text-align: left;"> <strong>Description</strong>  </td><td style="text-align: left;"> <strong>Type</strong></td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bands</strong>    </td><td style="text-align: left;">  Comma-delimited list of three band (RGB) </td><td style="text-align: left;">  list </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>min</strong>      </td><td style="text-align: left;">  Value(s) to map to 0 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>max</strong>      </td><td style="text-align: left;">  Value(s) to map to 1 </td><td style="text-align: left;">  number or list of three
numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gain</strong>     </td><td style="text-align: left;">  Value(s) by which to multiply each pixel value </td><td style="text-align: left;">
number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>bias</strong>     </td><td style="text-align: left;">  Value(s) to add to each Digital Number
value </td><td style="text-align: left;"> number or list of three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>gamma</strong>    </td><td style="text-align: left;">  Gamma correction factor(s) </td><td style="text-align: left;">  number or list of
three numbers, one for each band </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>palette</strong>  </td><td style="text-align: left;">  List of CSS-style color strings
(single-band only) </td><td style="text-align: left;">  comma-separated list of hex strings </td>
</tr>
<tr>
 <td style="text-align: left;">
<strong>opacity</strong>   </td><td style="text-align: left;">  The opacity of the layer (from 0 to 1)  </td><td style="text-align: left;">  number </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>If you add an <code>ee$Image</code> to Map$addLayer without any additional
parameters. By default it assigns the first three bands to red,
green, and blue bands, respectively. The default stretch is based on the
min-max range. On the other hand, the available parameters for
<code>ee$Geometry</code>, <code>ee$Feature</code>, and <code>ee$FeatureCollection</code>
are:
</p>

<ul>
<li> <p><strong>color</strong>: A hex string in the format RRGGBB specifying the
color to use for drawing the features. By default #000000.
</p>
</li>
<li> <p><strong>pointRadius</strong>: The radius of the point markers. By default 3.
</p>
</li>
<li> <p><strong>strokeWidth</strong>: The width of lines and polygon borders. By
default 3.
</p>
</li></ul>



<h3>Value</h3>

<p>Object of class <code>leaflet</code> and <code>EarthEngineMap</code>, with the
following extra parameters: tokens, name, opacity, shown, min, max, palette,
position, and legend. Use the $ method to retrieve the data (e.g., m$rgee$min).
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>lon</code></dt><dd><p>The longitude of the center, in degrees.</p>
</dd>
<dt><code>lat</code></dt><dd><p>The latitude of the center, in degrees.</p>
</dd>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24.</p>
</dd>
<dt><code>save_maps</code></dt><dd><p>Should <code>R6Map</code> save the previous maps?. If TRUE, Map
will work in an OOP style. Otherwise it will be a functional programming
style.</p>
</dd>
<dt><code>previous_map_left</code></dt><dd><p>Container on maps in the left side.</p>
</dd>
<dt><code>previous_map_right</code></dt><dd><p>Container on maps in the right side.</p>
</dd>
</dl>

</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-EarthEngineMap-new"><code>R6Map$new()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-reset"><code>R6Map$reset()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-print"><code>R6Map$print()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-setCenter"><code>R6Map$setCenter()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-setZoom"><code>R6Map$setZoom()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-centerObject"><code>R6Map$centerObject()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-addLayer"><code>R6Map$addLayer()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-addLayers"><code>R6Map$addLayers()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-addLegend"><code>R6Map$addLegend()</code></a>
</p>
</li>
<li> <p><a href="#method-EarthEngineMap-clone"><code>R6Map$clone()</code></a>
</p>
</li></ul>


<hr>
<a id="method-EarthEngineMap-new"></a>



<h4>Method <code>new()</code></h4>

<p>Constructor of R6Map.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$new(lon = 0, lat = 0, zoom = 1, save_maps = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lon</code></dt><dd><p>The longitude of the center, in degrees. By default -76.942478.</p>
</dd>
<dt><code>lat</code></dt><dd><p>The latitude of the center, in degrees. By default -12.172116.</p>
</dd>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24. By default 18.</p>
</dd>
<dt><code>save_maps</code></dt><dd><p>Should <code>R6Map</code> save previous maps?.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>EarthEngineMap</code> object.
</p>


<hr>
<a id="method-EarthEngineMap-reset"></a>



<h4>Method <code>reset()</code></h4>

<p>Reset to initial arguments.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$reset(lon = 0, lat = 0, zoom = 1, save_maps = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lon</code></dt><dd><p>The longitude of the center, in degrees. By default -76.942478.</p>
</dd>
<dt><code>lat</code></dt><dd><p>The latitude of the center, in degrees. By default -12.172116.</p>
</dd>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24. By default 18.</p>
</dd>
<dt><code>save_maps</code></dt><dd><p>Should <code>R6Map</code> save previous maps?.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A new <code>EarthEngineMap</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(rgee)
ee_Initialize()

# Load an Image
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")

# Create
Map &lt;- R6Map$new()
Map$centerObject(image)

# Simple display: Map just will
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 10000, bands = c("B4", "B3", "B2")),
  name = "l8_01"
)
Map # display map

Map$reset() # Reset arguments
Map
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-print"></a>



<h4>Method <code>print()</code></h4>

<p>Display a <code>EarthEngineMap</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$print()</pre></div>



<h5>Returns</h5>

<p>An <code>EarthEngineMap</code> object.
</p>


<hr>
<a id="method-EarthEngineMap-setCenter"></a>



<h4>Method <code>setCenter()</code></h4>

<p>Centers the map view at the given coordinates with the given zoom level. If
no zoom level is provided, it uses 10 by default.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$setCenter(lon = 0, lat = 0, zoom = 10)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>lon</code></dt><dd><p>The longitude of the center, in degrees. By default -76.942478.</p>
</dd>
<dt><code>lat</code></dt><dd><p>The latitude of the center, in degrees. By default -12.172116.</p>
</dd>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24. By default 18.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>No return value, called to set initial coordinates and zoom.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
Map$setCenter(lon = -76, lat = 0, zoom = 5)
Map

# Map$lat
# Map$lon
# Map$zoom
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-setZoom"></a>



<h4>Method <code>setZoom()</code></h4>

<p>Sets the zoom level of the map.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$setZoom(zoom = 10)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24. By default 10.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>No return value, called to set zoom.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
Map$setZoom(zoom = 4)
Map

# Map$lat
# Map$lon
# Map$zoom
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-centerObject"></a>



<h4>Method <code>centerObject()</code></h4>

<p>Centers the map view on a given object. If no zoom level is provided, it
will be predicted according to the bounds of the Earth Engine object
specified.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$centerObject(
  eeObject,
  zoom = NULL,
  maxError = ee$ErrorMargin(1),
  titiler_server = "https://api.cogeo.xyz/"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>eeObject</code></dt><dd><p>Earth Engine spatial object.</p>
</dd>
<dt><code>zoom</code></dt><dd><p>The zoom level, from 1 to 24. By default NULL.</p>
</dd>
<dt><code>maxError</code></dt><dd><p>Max error when input image must be reprojected to an
explicitly requested result projection or geodesic state.</p>
</dd>
<dt><code>titiler_server</code></dt><dd><p>TiTiler endpoint. Defaults to &quot;https://api.cogeo.xyz/&quot;.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>No return value, called to set zoom.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")
Map$centerObject(image)
Map
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-addLayer"></a>



<h4>Method <code>addLayer()</code></h4>

<p>Adds a given Earth Engine spatial object to the map as a layer
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$addLayer(
  eeObject,
  visParams = NULL,
  name = NULL,
  shown = TRUE,
  opacity = 1,
  position = NULL,
  titiler_viz_convert = TRUE,
  titiler_server = "https://api.cogeo.xyz/"
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>eeObject</code></dt><dd><p>The Earth Engine spatial object to display in the interactive map.</p>
</dd>
<dt><code>visParams</code></dt><dd><p>List of parameters for visualization. See details.</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of layers.</p>
</dd>
<dt><code>shown</code></dt><dd><p>A flag indicating whether layers should be on by default.</p>
</dd>
<dt><code>opacity</code></dt><dd><p>The layer's opacity is represented as a number between 0 and 1. Defaults to 1.</p>
</dd>
<dt><code>position</code></dt><dd><p>Character. Activate panel creation. If &quot;left&quot; the map will be displayed in
the left panel. Otherwise, if it is &quot;right&quot; the map will be displayed in the right panel.
By default NULL (No panel will be created).</p>
</dd>
<dt><code>titiler_viz_convert</code></dt><dd><p>Logical. If it is TRUE, Map$addLayer will transform the
visParams to titiler style. Ignored if eeObject is not a COG file.</p>
</dd>
<dt><code>titiler_server</code></dt><dd><p>TiTiler endpoint. Defaults to &quot;https://api.cogeo.xyz/&quot;.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>An <code>EarthEngineMap</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(rgee)
ee_Initialize()

# Load an Image
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")

# Create
Map &lt;- R6Map$new()
Map$centerObject(image)

# Simple display: Map just will
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 10000, bands = c("B4", "B3", "B2")),
  name = "l8_01"
)

Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 20000, bands = c("B4", "B3", "B2")),
  name = "l8_02"
)

# Simple display: Map just will (if the position is not specified it will
# be saved on the right side)
Map$reset() # Reset Map to the initial arguments.
Map$centerObject(image)
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max=10000, bands = c("B4", "B3", "B2")),
  name = "l8_left",
  position = "left"
)

Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max=20000, bands = c("B4", "B3", "B2")),
  name = "l8_right"
)

Map$reset()
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-addLayers"></a>



<h4>Method <code>addLayers()</code></h4>

<p>Adds a given ee$ImageCollection to the map as multiple layers.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$addLayers(
  eeObject,
  visParams = NULL,
  nmax = 5,
  name = NULL,
  shown = TRUE,
  position = NULL,
  opacity = 1
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>eeObject</code></dt><dd><p>ee$ImageCollection to display in the interactive map.</p>
</dd>
<dt><code>visParams</code></dt><dd><p>List of parameters for visualization. See details.</p>
</dd>
<dt><code>nmax</code></dt><dd><p>Numeric. The maximum number of images to display. By default 5.</p>
</dd>
<dt><code>name</code></dt><dd><p>The name of layers.</p>
</dd>
<dt><code>shown</code></dt><dd><p>A flag indicating whether layers should be on by default.</p>
</dd>
<dt><code>position</code></dt><dd><p>Character. Activate panel creation. If &quot;left&quot; the map will be displayed in
the left panel. Otherwise, if it is &quot;right&quot; the map will be displayed in the right panel.
By default NULL (No panel will be created).</p>
</dd>
<dt><code>opacity</code></dt><dd><p>The layer's opacity is represented as a number between 0 and 1. Defaults to 1.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A <code>EarthEngineMap</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(sf)
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()

nc &lt;- st_read(system.file("shape/nc.shp", package = "sf")) %&gt;%
  st_transform(4326) %&gt;%
  sf_as_ee()

ee_s2 &lt;- ee$ImageCollection("COPERNICUS/S2")$
  filterDate("2016-01-01", "2016-01-31")$
  filterBounds(nc)
ee_s2 &lt;- ee$ImageCollection(ee_s2$toList(2))

Map$centerObject(nc$geometry())
Map$addLayers(eeObject = ee_s2,position = "right")

# digging up the metadata
Map$previous_map_right$rgee$tokens

Map$reset()
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-addLegend"></a>



<h4>Method <code>addLegend()</code></h4>

<p>Adds a color legend to an EarthEngineMap.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$addLegend(
  visParams,
  name = "Legend",
  position = c("bottomright", "topright", "bottomleft", "topleft"),
  color_mapping = "numeric",
  opacity = 1,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>visParams</code></dt><dd><p>List of parameters for visualization.</p>
</dd>
<dt><code>name</code></dt><dd><p>The title of the legend.</p>
</dd>
<dt><code>position</code></dt><dd><p>Character. The position of the legend. By default bottomright.</p>
</dd>
<dt><code>color_mapping</code></dt><dd><p>Map data values (numeric or factor/character) to
colors according to a given palette. Use &quot;numeric&quot; (&quot;discrete&quot;) for continuous
(categorical) data. For display characters use &quot;character&quot; and add to visParams
the element &quot;values&quot; containing the desired character names.</p>
</dd>
<dt><code>opacity</code></dt><dd><p>The legend's opacity is represented as a number between 0
and 1. Defaults to 1.</p>
</dd>
<dt><code>...</code></dt><dd><p>Extra legend creator arguments. See <a href="leaflet.html#topic+addLegend">addLegend</a>.</p>
</dd>
</dl>

</div>



<h5>Returns</h5>

<p>A <code>EarthEngineMap</code> object.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>\dontrun{
library(leaflet)
library(rgee)
ee_Initialize()

Map$reset()

# Load MODIS ImageCollection
imgcol &lt;- ee$ImageCollection$Dataset$MODIS_006_MOD13Q1

# Parameters for visualization
labels &lt;- c("good", "marginal", "snow", "cloud")
cols   &lt;- c("#999999", "#00BFC4", "#F8766D", "#C77CFF")
vis_qc &lt;- list(min = 0, max = 3, palette = cols, bands = "SummaryQA", values = labels)

# Create interactive map
m_qc &lt;- Map$addLayer(imgcol$median(), vis_qc, "QC")

# continous palette
Map$addLegend(vis_qc)

# categorical palette
Map$addLegend(vis_qc, name = "Legend1", color_mapping = "discrete")

# character palette
Map$addLegend(vis_qc, name = "Legend2", color_mapping = "character")
}
</pre>
</div>


<hr>
<a id="method-EarthEngineMap-clone"></a>



<h4>Method <code>clone()</code></h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>R6Map$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p>
</dd>
</dl>

</div>




<h3>Examples</h3>

<pre><code class='language-R'>
## ------------------------------------------------
## Method `R6Map$reset`
## ------------------------------------------------

## Not run: 
library(rgee)
ee_Initialize()

# Load an Image
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")

# Create
Map &lt;- R6Map$new()
Map$centerObject(image)

# Simple display: Map just will
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 10000, bands = c("B4", "B3", "B2")),
  name = "l8_01"
)
Map # display map

Map$reset() # Reset arguments
Map

## End(Not run)

## ------------------------------------------------
## Method `R6Map$setCenter`
## ------------------------------------------------

## Not run: 
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
Map$setCenter(lon = -76, lat = 0, zoom = 5)
Map

# Map$lat
# Map$lon
# Map$zoom

## End(Not run)

## ------------------------------------------------
## Method `R6Map$setZoom`
## ------------------------------------------------

## Not run: 
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
Map$setZoom(zoom = 4)
Map

# Map$lat
# Map$lon
# Map$zoom

## End(Not run)

## ------------------------------------------------
## Method `R6Map$centerObject`
## ------------------------------------------------

## Not run: 
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")
Map$centerObject(image)
Map

## End(Not run)

## ------------------------------------------------
## Method `R6Map$addLayer`
## ------------------------------------------------

## Not run: 
library(rgee)
ee_Initialize()

# Load an Image
image &lt;- ee$Image("LANDSAT/LC08/C01/T1/LC08_044034_20140318")

# Create
Map &lt;- R6Map$new()
Map$centerObject(image)

# Simple display: Map just will
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 10000, bands = c("B4", "B3", "B2")),
  name = "l8_01"
)

Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max = 20000, bands = c("B4", "B3", "B2")),
  name = "l8_02"
)

# Simple display: Map just will (if the position is not specified it will
# be saved on the right side)
Map$reset() # Reset Map to the initial arguments.
Map$centerObject(image)
Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max=10000, bands = c("B4", "B3", "B2")),
  name = "l8_left",
  position = "left"
)

Map$addLayer(
  eeObject = image,
  visParams = list(min=0, max=20000, bands = c("B4", "B3", "B2")),
  name = "l8_right"
)

Map$reset()

## End(Not run)

## ------------------------------------------------
## Method `R6Map$addLayers`
## ------------------------------------------------

## Not run: 
library(sf)
library(rgee)

ee_Initialize()

Map &lt;- R6Map$new()

nc &lt;- st_read(system.file("shape/nc.shp", package = "sf")) %&gt;%
  st_transform(4326) %&gt;%
  sf_as_ee()

ee_s2 &lt;- ee$ImageCollection("COPERNICUS/S2")$
  filterDate("2016-01-01", "2016-01-31")$
  filterBounds(nc)
ee_s2 &lt;- ee$ImageCollection(ee_s2$toList(2))

Map$centerObject(nc$geometry())
Map$addLayers(eeObject = ee_s2,position = "right")

# digging up the metadata
Map$previous_map_right$rgee$tokens

Map$reset()

## End(Not run)

## ------------------------------------------------
## Method `R6Map$addLegend`
## ------------------------------------------------

## Not run: 
library(leaflet)
library(rgee)
ee_Initialize()

Map$reset()

# Load MODIS ImageCollection
imgcol &lt;- ee$ImageCollection$Dataset$MODIS_006_MOD13Q1

# Parameters for visualization
labels &lt;- c("good", "marginal", "snow", "cloud")
cols   &lt;- c("#999999", "#00BFC4", "#F8766D", "#C77CFF")
vis_qc &lt;- list(min = 0, max = 3, palette = cols, bands = "SummaryQA", values = labels)

# Create interactive map
m_qc &lt;- Map$addLayer(imgcol$median(), vis_qc, "QC")

# continous palette
Map$addLegend(vis_qc)

# categorical palette
Map$addLegend(vis_qc, name = "Legend1", color_mapping = "discrete")

# character palette
Map$addLegend(vis_qc, name = "Legend2", color_mapping = "character")

## End(Not run)
</code></pre>

<hr>
<h2 id='raster_as_ee'>Convert a Raster* object into an EE Image object</h2><span id='topic+raster_as_ee'></span>

<h3>Description</h3>

<p>Convert a Raster* object into an EE Image object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>raster_as_ee(
  x,
  assetId,
  bucket = NULL,
  predefinedAcl = "bucketLevel",
  command_line_tool_path = NULL,
  overwrite = FALSE,
  monitoring = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="raster_as_ee_+3A_x">x</code></td>
<td>
<p>RasterLayer, RasterStack or RasterBrick object to be converted into
an ee$Image.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_assetid">assetId</code></td>
<td>
<p>Character. Destination asset ID for the uploaded file.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_bucket">bucket</code></td>
<td>
<p>Character. Name of the GCS bucket.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Passed to
<code>googleCloudStorageR::gcs_upload</code>.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_command_line_tool_path">command_line_tool_path</code></td>
<td>
<p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, the assetId will be overwritten.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_monitoring">monitoring</code></td>
<td>
<p>Logical. If TRUE the exportation task will be monitored.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
<tr><td><code id="raster_as_ee_+3A_...">...</code></td>
<td>
<p>parameter(s) passed on to <code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An ee$Image object
</p>


<h3>See Also</h3>

<p>Other image upload functions: 
<code><a href="#topic+stars_as_ee">stars_as_ee</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(raster)
library(stars)
library(rgee)

ee_Initialize(gcs = TRUE)

# Get the filename of a image
tif &lt;- system.file("tif/L7_ETMs.tif", package = "stars")
x &lt;- stack(tif)
assetId &lt;- sprintf("%s/%s",ee_get_assethome(),'raster_l7')

# Method 1
# 1. Move from local to gcs
gs_uri &lt;- local_to_gcs(x = tif, bucket = 'rgee_dev')

# 2. Create a manifest
manifest &lt;- ee_utils_create_manifest_image(gs_uri, assetId)

# 3. Pass from gcs to asset
gcs_to_ee_image(
 manifest = manifest,
 overwrite = TRUE
)

# OPTIONAL: Monitoring progress
ee_monitoring(max_attempts = Inf)

# OPTIONAL: Display results
ee_stars_01 &lt;- ee$Image(assetId)
Map$centerObject(ee_stars_01)
Map$addLayer(ee_stars_01, list(min = 0, max = 255))

# Method 2
ee_stars_02 &lt;- raster_as_ee(
 x = x,
 overwrite = TRUE,
 assetId = assetId,
 bucket = "rgee_dev"
)
Map$centerObject(ee_stars_02)
Map$addLayer(ee_stars_02, list(min = 0, max = 255))

## End(Not run)
</code></pre>

<hr>
<h2 id='rdate_to_eedate'>Pass an R date object to Earth Engine</h2><span id='topic+rdate_to_eedate'></span>

<h3>Description</h3>

<p>Pass an R date object (&quot;Date&quot;, &quot;Numeric&quot;, &quot;character&quot;, &quot;POSIXt&quot;,
and &quot;POSIXct&quot;) to Google Earth Engine (ee$Date).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rdate_to_eedate(date, timestamp = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rdate_to_eedate_+3A_date">date</code></td>
<td>
<p>R date object</p>
</td></tr>
<tr><td><code id="rdate_to_eedate_+3A_timestamp">timestamp</code></td>
<td>
<p>Logical. By default, FALSE. If TRUE, return the date in milliseconds
from the Unix Epoch (1970-01-01 00:00:00 UTC). Otherwise, return a
EE date object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>rdate_to_eedate</code> will return either a numeric timestamp or
an ee$Date depending on the <code>timestamp</code> argument.
</p>


<h3>See Also</h3>

<p>Other date functions: 
<code><a href="#topic+ee_get_date_ic">ee_get_date_ic</a>()</code>,
<code><a href="#topic+ee_get_date_img">ee_get_date_img</a>()</code>,
<code><a href="#topic+eedate_to_rdate">eedate_to_rdate</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
ee_Initialize()
rdate_to_eedate('2000-01-01')
rdate_to_eedate(315532800000) # float number

## End(Not run)
</code></pre>

<hr>
<h2 id='rgee-package'>rgee: An R package for interacting with Google Earth Engine</h2><span id='topic+rgee'></span><span id='topic+rgee-package'></span>

<h3>Description</h3>

<p>Google Earth Engine (Gorelick et al., 2017) is a cloud computing platform
designed for planetary-scale environmental data analysis that only can be
accessed via the Earth Engine code editor, third-party web apps, and the
JavaScript and Python client libraries. <code>rgee</code> is a non-official
client library for R that uses <code>reticulate</code> to wrap the Earth Engine
Python API and provide R users with a familiar interface, rapid development
features, and flexibility to analyze data using open-source, R third-party
packages.
</p>


<h3>Details</h3>

<p>The package implements and supports:
</p>

<ul>
<li><p> Earth Engine Module
</p>
</li>
<li><p> Install or set all rgee dependencies
</p>
</li>
<li><p> Check non-R dependencies
</p>
</li>
<li><p> Clean non-R dependencies
</p>
</li>
<li><p> Session management
</p>
</li>
<li><p> Transform an R Date to an EE Date or vice versa
</p>
</li>
<li><p> Create Interactive visualization Maps
</p>
</li>
<li><p> Image download
</p>
</li>
<li><p> Vector download
</p>
</li>
<li><p> Generic download
</p>
</li>
<li><p> Assets management
</p>
</li>
<li><p> Upload raster
</p>
</li>
<li><p> Upload vector
</p>
</li>
<li><p> Upload generic
</p>
</li>
<li><p> Extract values
</p>
</li>
<li><p> Helper functions
</p>
</li>
<li><p> Utils functions
</p>
</li></ul>



<h3>I. Earth Engine Module</h3>

<p>Interface to main Earth Engine module. Provides access to top level classes
and functions as well as sub-modules (e.g. ee$Image, ee$FeatureCollection$first, etc.).
</p>

<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee">ee</a></code></td><td style="text-align: left;"> Main Earth Engine module. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>II. Install or set non-R rgee dependencies</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_install">ee_install</a></code></td><td style="text-align: left;"> Create an isolated Python virtual environment with all rgee dependencies. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_install_set_pyenv">ee_install_set_pyenv</a></code></td><td style="text-align: left;"> Configure which version of Python to use with rgee. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_install_upgrade">ee_install_upgrade</a></code></td><td style="text-align: left;"> Upgrade the Earth Engine Python API. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>III. Check non-R dependencies</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_check">ee_check</a></code></td><td style="text-align: left;"> Check all non-R dependencies. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_check_python">ee_check_python</a></code></td><td style="text-align: left;"> Check Python environment. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_check_credentials">ee_check_credentials</a></code></td><td style="text-align: left;"> Check Google credentials. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_check_python_packages">ee_check_python_packages</a></code></td><td style="text-align: left;"> Check Python packages: earthengine-api and numpy. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>IV. Clean container, credentials, or rgee system variables</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_clean_container">ee_clean_container</a></code></td><td style="text-align: left;"> Delete files from either a Folder or a Bucket. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_clean_pyenv">ee_clean_pyenv</a></code></td><td style="text-align: left;"> Remove rgee system variables from .Renviron. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>V. Session management</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_Initialize">ee_Initialize</a></code></td><td style="text-align: left;"> Authenticate and Initialize Earth Engine. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_version">ee_version</a></code></td><td style="text-align: left;"> Earth Engine API version. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_user_info">ee_user_info</a></code></td><td style="text-align: left;"> Display the credentials and general info of the initialized user. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_users">ee_users</a></code></td><td style="text-align: left;"> Display the credentials of all users as a table. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_get_assethome">ee_get_assethome</a></code></td><td style="text-align: left;"> Get the Asset home name. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_get_earthengine_path">ee_get_earthengine_path</a></code></td><td style="text-align: left;"> Get the path where the credentials are stored. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>VII. Transform an R Date to an EE Date or vice versa</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+eedate_to_rdate">eedate_to_rdate</a></code></td><td style="text-align: left;"> Pass an Earth Engine date object to R. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+rdate_to_eedate">rdate_to_eedate</a></code></td><td style="text-align: left;"> Pass an R date object to Earth Engine. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_get_date_img">ee_get_date_img</a></code></td><td style="text-align: left;"> Get the date of a EE Image. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_get_date_ic">ee_get_date_ic</a></code></td><td style="text-align: left;"> Get the date of a EE ImageCollection. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>VIII. Visualization Map</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+Map">Map</a></code></td><td style="text-align: left;"> R6 object (Map) to display Earth Engine (EE) spatial objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+R6Map">R6Map</a></code></td><td style="text-align: left;"> R6 class to display Earth Engine (EE) spatial objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>IX. Image download</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_as_raster">ee_as_raster</a></code></td><td style="text-align: left;"> Convert an Earth Engine (EE) image in a raster object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_as_stars">ee_as_stars</a></code></td><td style="text-align: left;"> Convert an Earth Engine (EE) image in a stars object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_as_thumbnail">ee_as_thumbnail</a></code></td><td style="text-align: left;"> Create an R spatial gridded object from an EE thumbnail image. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_image_to_asset">ee_image_to_asset</a></code></td><td style="text-align: left;"> Creates a task to export an EE Image to their EE Assets. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_image_to_drive">ee_image_to_drive</a></code></td><td style="text-align: left;"> Creates a task to export an EE Image to Drive. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_image_to_gcs">ee_image_to_gcs</a></code></td><td style="text-align: left;"> Creates a task to export an EE Image to Google Cloud Storage. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_image_info">ee_image_info</a></code></td><td style="text-align: left;"> Approximate size of an EE Image object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_imagecollection_to_local">ee_imagecollection_to_local</a></code></td><td style="text-align: left;"> Save an EE ImageCollection in their local system. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>X. Vector download</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_as_sf">ee_as_sf</a></code></td><td style="text-align: left;"> Convert an Earth Engine table in an sf object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_table_to_asset">ee_table_to_asset</a></code></td><td style="text-align: left;"> Creates a task to export a FeatureCollection to an EE table asset. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_table_to_drive">ee_table_to_drive</a></code></td><td style="text-align: left;"> Creates a task to export a FeatureCollection to Google Drive. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_table_to_gcs">ee_table_to_gcs</a></code></td><td style="text-align: left;"> Creates a task to export a FeatureCollection to Google Cloud Storage. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XI. Generic download</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_drive_to_local">ee_drive_to_local</a></code></td><td style="text-align: left;"> Move results from Google Drive to a local directory. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_gcs_to_local">ee_gcs_to_local</a></code></td><td style="text-align: left;"> Move results from Google Cloud Storage to a local directory. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XII. Assets management</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_manage-tools">ee_manage-tools</a></code></td><td style="text-align: left;"> Interface to manage the Earth Engine Asset. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XIII. Upload raster</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+stars_as_ee">stars_as_ee</a></code></td><td style="text-align: left;"> Convert a stars or stars-proxy object into an EE Image object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+raster_as_ee">raster_as_ee</a></code></td><td style="text-align: left;"> Convert a Raster* object into an EE Image object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+gcs_to_ee_image">gcs_to_ee_image</a></code></td><td style="text-align: left;"> Move a GeoTIFF image from GCS to their EE assets. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XIV. Upload vector</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+gcs_to_ee_table">gcs_to_ee_table</a></code></td><td style="text-align: left;"> Move a zipped shapefile from GCS to their EE Assets. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+sf_as_ee">sf_as_ee</a></code></td><td style="text-align: left;"> Convert an sf object to an EE object. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XV. Upload generic</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+local_to_gcs">local_to_gcs</a></code></td><td style="text-align: left;"> Upload local files to Google Cloud Storage. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XVI. Extract values</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_extract">ee_extract</a></code></td><td style="text-align: left;"> Extract values from EE Images or ImageCollections objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XVII. Helper functions</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_help">ee_help</a></code></td><td style="text-align: left;"> Documentation for Earth Engine Objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_print">ee_print</a></code></td><td style="text-align: left;"> Print and return metadata about Spatial Earth Engine Objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_monitoring">ee_monitoring</a></code></td><td style="text-align: left;"> Monitoring Earth Engine task progress. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+print">print</a></code></td><td style="text-align: left;"> Print Earth Engine objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>XVIII. Utils functions</h3>


<table>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_py_to_r">ee_utils_py_to_r</a></code></td><td style="text-align: left;"> Convert between Python and R objects. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_pyfunc">ee_utils_pyfunc</a></code></td><td style="text-align: left;"> Wrap an R function in a Python function with the same signature. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_shp_to_zip">ee_utils_shp_to_zip</a></code></td><td style="text-align: left;"> Create a zip file from an sf object. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_create_json">ee_utils_create_json</a></code></td><td style="text-align: left;"> Convert a R list into a JSON file. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a></code></td><td style="text-align: left;"> Create a manifest to upload an image. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_create_manifest_table">ee_utils_create_manifest_table</a></code></td><td style="text-align: left;"> Create a manifest to upload a table. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_get_crs">ee_utils_get_crs</a></code></td><td style="text-align: left;"> Convert EPSG, ESRI or SR-ORG code into a OGC WKT. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_future_value">ee_utils_future_value</a></code></td><td style="text-align: left;"> The value of a future or the values of all elements in a container. </td>
</tr>
<tr>
 <td style="text-align: left;">
<code><a href="#topic+ee_utils_dataset_display">ee_utils_dataset_display</a></code></td><td style="text-align: left;"> Search into the Earth Engine Data Catalog. </td>
</tr>
<tr>
 <td style="text-align: left;">
---------------------------</td><td style="text-align: left;"> --------------------------------------------------------------------------------------------------- </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Acknowledgments</h3>

<p>We want to offer a special thanks to Justin Braaten for his wise and
helpful comments in the whole development of rgee. As well, we would like
to mention the following third-party R/Python packages for contributing
indirectly to the improvement of rgee:
</p>

<ul>
<li><p> gee_asset_manager - Lukasz Tracewski
</p>
</li>
<li><p> geeup - Samapriya Roy
</p>
</li>
<li><p> geeadd - Samapriya Roy
</p>
</li>
<li><p> eemont - David Montero Loaiza
</p>
</li>
<li><p> cartoee - Kel Markert
</p>
</li>
<li><p> geetools - Rodrigo E. Principe
</p>
</li>
<li><p> landsat-extract-gee - Loc Dutrieux
</p>
</li>
<li><p> earthEngineGrabR - JesJehle
</p>
</li>
<li><p> sf - Edzer Pebesma
</p>
</li>
<li><p> stars - Edzer Pebesma
</p>
</li>
<li><p> gdalcubes - Marius Appel
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Cesar Aybar <a href="mailto:csaybar@gmail.com">csaybar@gmail.com</a> (<a href="https://orcid.org/0000-0003-2745-9535">ORCID</a>)
</p>
<p>Other contributors:
</p>

<ul>
<li><p> Wu Qiusheng <a href="mailto:giswqs@gmail.com">giswqs@gmail.com</a> (<a href="https://orcid.org/0000-0001-5437-4073">ORCID</a>) [contributor]
</p>
</li>
<li><p> Lesly Bautista <a href="mailto:leslyarcelly.213@gmail.com">leslyarcelly.213@gmail.com</a> (<a href="https://orcid.org/0000-0003-3523-8687">ORCID</a>) [contributor]
</p>
</li>
<li><p> Roy Yali <a href="mailto:ryali93@gmail.com">ryali93@gmail.com</a> (<a href="https://orcid.org/0000-0003-4542-3755">ORCID</a>) [contributor]
</p>
</li>
<li><p> Antony Barja <a href="mailto:antony.barja8@gmail.com">antony.barja8@gmail.com</a> (<a href="https://orcid.org/0000-0001-5921-2858">ORCID</a>) [contributor]
</p>
</li>
<li><p> Kevin Ushey <a href="mailto:kevin@rstudio.com">kevin@rstudio.com</a> [contributor]
</p>
</li>
<li><p> Jeroen Ooms <a href="mailto:jeroen@berkeley.edu">jeroen@berkeley.edu</a> (<a href="https://orcid.org/0000-0002-4035-0289">ORCID</a>) [contributor]
</p>
</li>
<li><p> Tim Appelhans <a href="mailto:tim.appelhans@gmail.com">tim.appelhans@gmail.com</a> [contributor]
</p>
</li>
<li><p> JJ Allaire <a href="mailto:jj@rstudio.com">jj@rstudio.com</a> [contributor]
</p>
</li>
<li><p> Yuan Tang <a href="mailto:terrytangyuan@gmail.com">terrytangyuan@gmail.com</a> [contributor]
</p>
</li>
<li><p> Samapriya Roy <a href="mailto:samapriya.roy@gmail.com">samapriya.roy@gmail.com</a> [contributor]
</p>
</li>
<li><p> MariaElena Adauto <a href="mailto:2a.mariaelena@gmail.com">2a.mariaelena@gmail.com</a> (<a href="https://orcid.org/0000-0002-2154-2429">ORCID</a>) [contributor]
</p>
</li>
<li><p> Gabriel Carrasco <a href="mailto:gabriel.carrasco@upch.pe">gabriel.carrasco@upch.pe</a> (<a href="https://orcid.org/0000-0002-6945-0419">ORCID</a>) [contributor]
</p>
</li>
<li><p> Henrik Bengtsson <a href="mailto:henrikb@braju.com">henrikb@braju.com</a> [contributor]
</p>
</li>
<li><p> Jeffrey Hollister <a href="mailto:hollister.jeff@epa.gov">hollister.jeff@epa.gov</a> (Hollister reviewed the package for JOSS, see https://github.com/openjournals/joss-reviews/issues/2272/) [reviewer]
</p>
</li>
<li><p> Gennadii Donchyts (Gena reviewed the package for JOSS, see https://github.com/openjournals/joss-reviews/issues/2272/) [reviewer]
</p>
</li>
<li><p> Marius Appel <a href="mailto:marius.appel@uni-muenster.de">marius.appel@uni-muenster.de</a> (Appel reviewed the package for JOSS, see https://github.com/openjournals/joss-reviews/issues/2272/) [reviewer]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/r-spatial/rgee/">https://github.com/r-spatial/rgee/</a>
</p>
</li>
<li> <p><a href="https://r-spatial.github.io/rgee/">https://r-spatial.github.io/rgee/</a>
</p>
</li>
<li> <p><a href="https://github.com/google/earthengine-api/">https://github.com/google/earthengine-api/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/r-spatial/rgee/issues/">https://github.com/r-spatial/rgee/issues/</a>
</p>
</li></ul>


<hr>
<h2 id='sf_as_ee'>Convert an sf object to an EE object</h2><span id='topic+sf_as_ee'></span>

<h3>Description</h3>

<p>Load an sf object to Earth Engine.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf_as_ee(
  x,
  via = "getInfo",
  assetId = NULL,
  bucket = NULL,
  predefinedAcl = "bucketLevel",
  command_line_tool_path = NULL,
  overwrite = TRUE,
  monitoring = TRUE,
  proj = "EPSG:4326",
  evenOdd = TRUE,
  geodesic = NULL,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sf_as_ee_+3A_x">x</code></td>
<td>
<p>object of class sf, sfc or sfg.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_via">via</code></td>
<td>
<p>Character. Upload method for sf objects. Three methods are
implemented: 'getInfo', 'getInfo_to_asset' and 'gcs_to_asset'. See details.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_assetid">assetId</code></td>
<td>
<p>Character. Destination asset ID for the uploaded file. Ignore
if <code>via</code> argument is &quot;getInfo&quot;.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_bucket">bucket</code></td>
<td>
<p>Character. Name of the bucket (GCS) to save intermediate files
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Passed to
<code>googleCloudStorageR::gcs_upload</code>.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_command_line_tool_path">command_line_tool_path</code></td>
<td>
<p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_overwrite">overwrite</code></td>
<td>
<p>A boolean argument that indicates indicating
whether &quot;filename&quot; should be overwritten. Ignore if <code>via</code> argument
is &quot;getInfo&quot;. By default TRUE.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_monitoring">monitoring</code></td>
<td>
<p>Logical. Ignore if via is not set as
<code>getInfo_to_asset</code> or <code>gcs_to_asset</code>. If TRUE the exportation task
will be monitored.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_proj">proj</code></td>
<td>
<p>Integer or character. Coordinate Reference System (CRS) for the
EE object, defaults to &quot;EPSG:4326&quot; (x=longitude, y=latitude).</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_evenodd">evenOdd</code></td>
<td>
<p>Logical. Ignored if <code>x</code> is not a Polygon. If TRUE,
polygon interiors will be determined by the even/odd rule, where a point
is inside if it crosses an odd number of edges to reach a point at infinity.
Otherwise polygons use the left-inside rule, where interiors are on the
left side of the shell's edges when walking the vertices in the given order.
If unspecified, defaults to TRUE.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_geodesic">geodesic</code></td>
<td>
<p>Logical. Ignored if <code>x</code> is not a Polygon or LineString.
Whether line segments should be interpreted as spherical geodesics. If
FALSE, indicates that line segments should be interpreted as planar lines
in the specified CRS. If absent, defaults to TRUE if the CRS is geographic
(including the default EPSG:4326), or to FALSE if the CRS is projected.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
<tr><td><code id="sf_as_ee_+3A_...">...</code></td>
<td>
<p><code><a href="#topic+ee_utils_create_manifest_table">ee_utils_create_manifest_table</a></code> arguments might be included.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>sf_as_ee</code> supports the upload of <code>sf</code> objects by three different
options: &quot;getInfo&quot; (default), &quot;getInfo_to_asset&quot;, and &quot;gcs_to_asset&quot;. <code>getInfo</code>
transforms sf objects (sfg, sfc, or sf) to GeoJSON (using <code>geojsonio::geojson_json</code>)
and then encrusted them in an HTTP request using the server-side objects that are
implemented in the Earth Engine API (i.e. ee$Geometry$...). If the sf object is too
large (~ &gt;1Mb) is likely to cause bottlenecks since it is a temporary
file that is not saved in your EE Assets (server-side). The second option implemented
is 'getInfo_to_asset'. It is similar to the previous one, with the difference
that after create the server-side object will save it in your Earth Engine
Assets. For dealing with very large spatial objects is preferable to use the
third option 'gcs_to_asset'. This option firstly saves the sf object as a *.shp
file in the /temp directory. Secondly, using the function <code>local_to_gcs</code>
will move the shapefile from local to Google Cloud Storage. Finally, using
the function <code>gcs_to_ee_table</code> the ESRI shapefile will be loaded
to their EE Assets. See <a href="https://developers.google.com/earth-engine/guides/table_upload/">Importing
table data</a> documentation for more details.
</p>


<h3>Value</h3>

<p>When <code>via</code> is &quot;getInfo&quot; and <code>x</code> is either an sf or sfc object
with multiple geometries will return an <code>ee$FeatureCollection</code>. For
single sfc and sfg objects will return an <code>ee$Geometry$...</code>.
</p>
<p>If <code>via</code> is either &quot;getInfo_to_asset&quot; or &quot;gcs_to_asset&quot; always will
return an <code>ee$FeatureCollection</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(sf)
ee_Initialize()

# 1. Handling geometry parameters
# Simple
ee_x &lt;- st_read(system.file("shape/nc.shp", package = "sf")) %&gt;%
  sf_as_ee()

Map$centerObject(eeObject = ee_x)
Map$addLayer(ee_x)

# Create a right-inside polygon.
toy_poly &lt;- matrix(data = c(-35,-10,-35,10,35,10,35,-10,-35,-10),
                   ncol = 2,
                   byrow = TRUE) %&gt;%
  list() %&gt;%
  st_polygon()

holePoly &lt;- sf_as_ee(x = toy_poly, evenOdd = FALSE)

# Create an even-odd version of the polygon.
evenOddPoly &lt;- sf_as_ee(toy_poly, evenOdd = TRUE)

# Create a point to test the insideness of the polygon.
pt &lt;- ee$Geometry$Point(c(1.5, 1.5))

# Check insideness with a contains operator.
print(holePoly$contains(pt)$getInfo() %&gt;% ee_utils_py_to_r())
print(evenOddPoly$contains(pt)$getInfo() %&gt;% ee_utils_py_to_r())

# 2. Upload small geometries to EE asset
assetId &lt;- sprintf("%s/%s", ee_get_assethome(), 'toy_poly')
eex &lt;- sf_as_ee(
 x = toy_poly,
 overwrite = TRUE,
 assetId = assetId,
 via = "getInfo_to_asset")
# 3. Upload large geometries to EE asset
ee_Initialize(gcs = TRUE)
assetId &lt;- sprintf("%s/%s", ee_get_assethome(), 'toy_poly_gcs')
eex &lt;- sf_as_ee(
  x = toy_poly,
  overwrite = TRUE,
  assetId = assetId,
  bucket = 'rgee_dev',
  monitoring = FALSE,
  via = 'gcs_to_asset'
)
ee_monitoring(max_attempts = Inf)

## End(Not run)
</code></pre>

<hr>
<h2 id='stars_as_ee'>Convert a stars or stars-proxy object into an EE Image object</h2><span id='topic+stars_as_ee'></span>

<h3>Description</h3>

<p>Convert a stars or stars-proxy object into an EE Image object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stars_as_ee(
  x,
  assetId,
  bucket = NULL,
  predefinedAcl = "bucketLevel",
  command_line_tool_path = NULL,
  overwrite = FALSE,
  monitoring = TRUE,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="stars_as_ee_+3A_x">x</code></td>
<td>
<p>stars or stars-proxy object to be converted into an ee$Image.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_assetid">assetId</code></td>
<td>
<p>Character. Destination asset ID for the uploaded file.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_bucket">bucket</code></td>
<td>
<p>Character. Name of the GCS bucket.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_predefinedacl">predefinedAcl</code></td>
<td>
<p>Specify user access to object. Passed to
<code>googleCloudStorageR::gcs_upload</code>.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_command_line_tool_path">command_line_tool_path</code></td>
<td>
<p>Character. Path to the Earth Engine command line
tool (CLT). If NULL, rgee assumes that CLT is set in the system PATH.
(ignore if <code>via</code> is not defined as &quot;gcs_to_asset&quot;).</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. If TRUE, the assetId will be overwritten.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_monitoring">monitoring</code></td>
<td>
<p>Logical. If TRUE the exportation task will be monitored.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress info message.</p>
</td></tr>
<tr><td><code id="stars_as_ee_+3A_...">...</code></td>
<td>
<p>parameter(s) passed on to <code><a href="#topic+ee_utils_create_manifest_image">ee_utils_create_manifest_image</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An ee$Image object
</p>


<h3>See Also</h3>

<p>Other image upload functions: 
<code><a href="#topic+raster_as_ee">raster_as_ee</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(rgee)
library(stars)
ee_Initialize(gcs = TRUE)

# Get the filename of a image
tif &lt;- system.file("tif/L7_ETMs.tif", package = "stars")
x &lt;- read_stars(tif)
assetId &lt;- sprintf("%s/%s",ee_get_assethome(),'stars_l7')

# # Method 1
# 1. Move from local to gcs
gs_uri &lt;- local_to_gcs(x = tif, bucket = 'rgee_dev')

# 2. Create a manifest
manifest &lt;- ee_utils_create_manifest_image(gs_uri, assetId)

# 3. Pass from gcs to asset
gcs_to_ee_image(
  manifest = manifest,
  overwrite = TRUE
)

# OPTIONAL: Monitoring progress
ee_monitoring(max_attempts = Inf)

# OPTIONAL: Display results
ee_stars_01 &lt;- ee$Image(assetId)
Map$centerObject(ee_stars_01)
Map$addLayer(ee_stars_01, list(min = 0, max = 255))

# Method 2
ee_stars_02 &lt;- stars_as_ee(
 x = x,
 overwrite = TRUE,
 assetId = assetId,
 bucket = "rgee_dev"
)
Map$centerObject(ee_stars_02)
Map$addLayer(ee_stars_02, list(min = 0, max = 255))

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
