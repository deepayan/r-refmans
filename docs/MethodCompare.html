<!DOCTYPE html><html><head><title>Help for package MethodCompare</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {MethodCompare}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bias_plot'><p>Bias plot</p></a></li>
<li><a href='#bland_altman_plot'><p>Extended Bland-Atlman limits of agreement (LoA) plot</p></a></li>
<li><a href='#compare_plot'><p>Comparison plot</p></a></li>
<li><a href='#data1'><p>Simulated dataset 1</p></a></li>
<li><a href='#data2'><p>Simulated dataset 2</p></a></li>
<li><a href='#data3'><p>Simulated dataset 3</p></a></li>
<li><a href='#measure_compare'><p>Estimation of the amount of bias of the new measurement method relative to the</p>
reference method, with possibly heteroscedastic variance of the measurement errors</a></li>
<li><a href='#MethodCompare'><p>MethodCompare</p></a></li>
<li><a href='#precision_plot'><p>Precision plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Bias and Precision Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2021-12-30</td>
</tr>
<tr>
<td>Author:</td>
<td>Mingkai Peng, Patrick Taffé, Tyler Williamson</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Patrick Taffé &lt;patrick.taffe@unisante.ch&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of the methodology from the paper entitled
    "Effective plots to assess bias and precision in method comparison studies"
    published in Statistical Methods in Medical Research, P. Taffé (2018) &lt;<a href="https://doi.org/10.1177%2F0962280218759693">doi:10.1177/0962280218759693</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10),nlme</td>
</tr>
<tr>
<td>Imports:</td>
<td>graphics,stats</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>TRUE</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-12-30 09:09:01 UTC; ptaffe</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-01-05 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bias_plot'>Bias plot</h2><span id='topic+bias_plot'></span>

<h3>Description</h3>

<p>This function draws the &quot;bias plot&quot;, which is used to visually assess the bias of the new method relative to the reference method. 
It is obtained by graphing a scatter plot of y1 (new method) and y2 (reference method) versus the BLUP of y2 along with the two regression lines, and adds a second scale on the right axis showing the relationship between the estimated amount of bias and BLUP of y2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bias_plot(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bias_plot_+3A_object">object</code></td>
<td>
<p>an object returned by a call to <a href="#topic+measure_compare">measure_compare</a></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### load the data
data(data1)
### analysis
measure_model &lt;- measure_compare(data1)
### Bias plot
bias_plot(measure_model)
</code></pre>

<hr>
<h2 id='bland_altman_plot'>Extended Bland-Atlman limits of agreement (LoA) plot</h2><span id='topic+bland_altman_plot'></span>

<h3>Description</h3>

<p>This function produces the extended Bland-Altman Limits of Agreement (LoA) plot
when there are repeated measurements with possibly heteroscedastic variance of 
measurement errors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bland_altman_plot(data, new = "y1", Ref = "y2", ID = "id", fill = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bland_altman_plot_+3A_data">data</code></td>
<td>
<p>a dataframe contains the object identification number (id),
the measurement values from the new measurement method (y1) and those from
the reference standard (y2)</p>
</td></tr>
<tr><td><code id="bland_altman_plot_+3A_new">new</code></td>
<td>
<p>specify the variable name or location for the new measurement method</p>
</td></tr>
<tr><td><code id="bland_altman_plot_+3A_ref">Ref</code></td>
<td>
<p>specify the variable name or location for the reference  measuerment method</p>
</td></tr>
<tr><td><code id="bland_altman_plot_+3A_id">ID</code></td>
<td>
<p>specify the variable name for location for the subject identification number (id)</p>
</td></tr>
<tr><td><code id="bland_altman_plot_+3A_fill">fill</code></td>
<td>
<p>logical. if <code>TRUE</code> use the average value for new methods to
fill out the missing value (only useful for drawing a plot with all the
measurements by the reference standard)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions computes the limits of agreement (LoA) when there are
repeated measurements and possibly heteroscedastic variance of measurement errors
</p>


<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Load the data
data(data1)
### Bland and Altman's plot
bland_altman_plot(data1)
</code></pre>

<hr>
<h2 id='compare_plot'>Comparison plot</h2><span id='topic+compare_plot'></span>

<h3>Description</h3>

<p>This function allows the visualization of the bias-corrected values (i.e.
recalibrated values, variable y1_corr) of the new measurement method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compare_plot(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compare_plot_+3A_object">object</code></td>
<td>
<p>an object returned by a call to <a href="#topic+measure_compare">measure_compare</a></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### load the data
data(data1)
### analysis
measure_model &lt;- measure_compare(data1)
### compare plot
compare_plot(measure_model)

</code></pre>

<hr>
<h2 id='data1'>Simulated dataset 1</h2><span id='topic+data1'></span>

<h3>Description</h3>

<p>In the simulated dataset 1, each subject has 1 measurement value from the new method
and 10 to 15 measurement values from the reference method.
Compared to the reference method, the new method has
differential bias of -4 and proportional bias of 1.2. Variance of the new method
is smaller than that for the reference method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data1
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 1255 rows and 3 columns.</p>


<h3>Details</h3>

<p>A data frame with three variables:
</p>

<dl>
<dt><code>id</code></dt><dd><p>identification number for subjects</p>
</dd>
<dt><code>y1</code></dt><dd><p>values from the new measurement method</p>
</dd>
<dt><code>y2</code></dt><dd><p>values from the reference measurement method</p>
</dd>
</dl>

<p>Dataset 1 was created based on the following equations:
</p>
<p style="text-align: center;"><code class="reqn">y_{1i}=-4+1.2x_i+\varepsilon_{1i}, \varepsilon_{1i} \mid x_i \sim N(0,(1+0.1x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">y_{2ij}=x_i+\varepsilon_{2ij},\varepsilon_{2ij} \mid x_i\sim N(0,(2+0.2x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">x_i\sim Uniform[10-40]</code>
</p>

<p>for <code class="reqn">i = 1, 2, \ldots, 100</code>, <code class="reqn">j=1,2,\ldots,n_{2i}</code> and
the number of repeated measurements for each subject <code class="reqn">i</code>
from the reference standard was <code class="reqn">n_{2i} \sim Uniform[10-15]</code>.
</p>

<hr>
<h2 id='data2'>Simulated dataset 2</h2><span id='topic+data2'></span>

<h3>Description</h3>

<p>In the simulated dataset 2, each subject has 1 to 5 measurement values from the new method
and 10 to 15 measurement values from the reference method.
Compared to the reference method, the new method has
differential bias of -4 and proportional bias of 1.2. Variance of the new method
is smaller than that for the reference method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data2
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 1239 rows and 3 columns.</p>


<h3>Details</h3>

<p>@format A data frame with three variables:
</p>

<dl>
<dt><code>id</code></dt><dd><p>identification number for subjects</p>
</dd>
<dt><code>y1</code></dt><dd><p>values from the new measurement method</p>
</dd>
<dt><code>y2</code></dt><dd><p>values from the reference measurement method</p>
</dd>
</dl>

<p>Dataset 2 was created based on the following equations:
</p>
<p style="text-align: center;"><code class="reqn">y_{1ij}=-4+1.2x_{i}+\varepsilon_{1ij}, \varepsilon_{1ij} \mid x_i \sim N(0,(1+0.1x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">y_{2ij}=x_i+\varepsilon_{2ij},\varepsilon_{2ij} \mid x_i\sim N(0,(2+0.2x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">x_i\sim Uniform[10-40]</code>
</p>

<p>for <code class="reqn">i = 1, 2, \ldots, 100</code>, <code class="reqn">j=1,2,\ldots,n_{1i} / n_{2i}</code> and
the number of repeated measurements for each subject <code class="reqn">i</code>
from the new and reference method was <code class="reqn">n_{1i} \sim Uniform[1-5]</code> and
<code class="reqn">n_{2i} \sim Uniform[10-15]</code> respectively.
</p>

<hr>
<h2 id='data3'>Simulated dataset 3</h2><span id='topic+data3'></span>

<h3>Description</h3>

<p>In the simulated dataset 3, each subject has 1 to 5 measurement values from the new method
and 10 to 15 measurement values from the reference method.
Compared to the reference method, the new method has
differential bias of 3 and proportional bias of 0.9. Variance of the new method
is larger than that for the reference method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data3
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 1250 rows and 3 columns.</p>


<h3>Details</h3>

<p>@format A data frame with three variables:
</p>

<dl>
<dt><code>id</code></dt><dd><p>identification number for subjects</p>
</dd>
<dt><code>y1</code></dt><dd><p>values from the new measurement method</p>
</dd>
<dt><code>y2</code></dt><dd><p>values from the reference measurement method</p>
</dd>
</dl>

<p>Dataset 3 was created based on the following equations:
</p>
<p style="text-align: center;"><code class="reqn">y_{1ij}=3+0.9x_{i}+\varepsilon_{1ij}, \varepsilon_{1ij} \mid x_i \sim N(0,(2+0.06x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">y_{2ij}=x_i+\varepsilon_{2ij},\varepsilon_{2ij} \mid x_i\sim N(0,(1+0.01x_i)^2)</code>
</p>

<p style="text-align: center;"><code class="reqn">x_i\sim Uniform[10-40]</code>
</p>

<p>for <code class="reqn">i = 1, 2, \ldots, 100</code>, <code class="reqn">j=1,2,\ldots,n_{1i} / n_{2i}</code> and
the number of repeated measurements for each subject <code class="reqn">i</code>
from the new and reference method was <code class="reqn">n_{1i} \sim Uniform[1-5]</code> and
<code class="reqn">n_{2i} \sim Uniform[10-15]</code> respectively.
</p>

<hr>
<h2 id='measure_compare'>Estimation of the amount of bias of the new measurement method relative to the
reference method, with possibly heteroscedastic variance of the measurement errors</h2><span id='topic+measure_compare'></span>

<h3>Description</h3>

<p>This function implements the methodology reported in the paper:
Taffé P. Effective plots to assess bias and precision in method comparison studies. Stat Methods Med Res 2018;27:1650-1660.
Other relevant references:
Taffé P, Peng M, Stagg V, Williamson T. Biasplot: A package to effective plots to assess bias and precision in method comparison studies. Stata J 2017;17:208-221.
Taffé P, Peng M, Stagg V, Williamson T. MethodCompare: An R package to assess bias and precision in method comparison studies. Stat Methods Med Res 2019;28:2557-2565.
Taffé P, Halfon P, Halfon M. A new statistical methodology to assess bias and precision overcomes the defects of the Bland &amp; Altman method. J Clin Epidemiol 2020;124:1-7.
Taffé P. Assessing bias, precision, and agreement in method comparison studies. Stat Methods Med Res 2020;29:778-796.
Taffé P. When can the Bland-Altman limits of agreement method be used and when it should not be used. J Clin Epidemiol 2021; 137:176-181.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>measure_compare(data, new = "y1", Ref = "y2", ID = "id")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="measure_compare_+3A_data">data</code></td>
<td>
<p>a dataframe containing the identification number of the subject (id),
the measurement values from the new measurement method (y1) and those
from the reference method).</p>
</td></tr>
<tr><td><code id="measure_compare_+3A_new">new</code></td>
<td>
<p>specify the variable name or location of the new measurement method</p>
</td></tr>
<tr><td><code id="measure_compare_+3A_ref">Ref</code></td>
<td>
<p>specify the variable name or location of the reference standard</p>
</td></tr>
<tr><td><code id="measure_compare_+3A_id">ID</code></td>
<td>
<p>specify the variable name for location of the subject identification
number</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This functions implements the new estimation procedure to assess bias and precision of a new measurement method
with respect to a reference standard, as well as
Bland &amp; Altman's limits of agreement extended to the setting of
possibly heteroscedastic variance of the measurement errors.
</p>


<h3>Value</h3>

<p>The function returns a list with the following items:
</p>

<ul>
<li><p> Bias: differential and proportional bias for new method and the
associated 95 percent confidence intervals
</p>
</li>
<li><p> Models: list of models fitted in estimation procedure
</p>
</li>
<li><p> Ref: a data frame containing the various variables used to
compute the bias and precision plots, as well the smooth standard errors
estimates of the reference standard
</p>
</li>
<li><p> New: a data frame containing the various variables used to compute
the bias and precision plots, as well the smooth standard errors estimates
of the new measurement method
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### Load the data
data(data1)
### Analysis
measure_model &lt;- measure_compare(data1)
</code></pre>

<hr>
<h2 id='MethodCompare'>MethodCompare</h2><span id='topic+MethodCompare'></span>

<h3>Description</h3>

<p>The package &quot;MethodCompare&quot; allows one to assess bias and precision of a new measurement method with respect to a reference method (also called &quot;reference standard&quot;).
It requires repeated measurements by at least one of the two measurement methods.  
</p>
<p>In this implementation, it is assumed by default that the reference method has repeated measurements
and the new method may have as few as only one measurement per individual (The methodology can be adapted if you have more repeated measurements 
by the new method than by the reference method, see ref. below).  
</p>
<p>A manuscript with details concerning the methodology and its application can be found:
</p>
<p>&lt;doi:10.1177/0962280218759693&gt;
</p>
<p>It implements the methodology developped in:  
</p>
<p>Taffé P. Effective plots to assess bias and precision in method comparison studies. Stat Methods Med Res 2018;27:1650-1660.  
</p>
<p>NB: Further methodological developpements have been made and will be implemented in a future version of the package:
</p>
<p>Taffé P. Assessing bias, precision, and agreement in method comparison studies. Stat Methods Med Res 2020;29:778-796. doi:10.1177/0962280218759693
</p>
<p>For other relevant references:
</p>
<p>Taffé P, Peng M, Stagg V, Williamson T. Biasplot: A package to effective plots to assess bias and precision in method comparison studies. Stata J 2017;17:208-221.
</p>
<p>Taffé P, Peng M, Stagg V, Williamson T. MethodCompare: An R package to assess bias and precision in method comparison studies. Stat Methods Med Res 2019;28:2557-2565.
</p>
<p>Taffé P, Halfon P, Halfon M. A new statistical methodology to assess bias and precision overcomes the defects of the Bland &amp; Altman method. J Clin Epidemiol 2020;124:1-7.
</p>
<p>Taffé P. When can the Bland-Altman limits of agreement method be used and when it should not be used. J Clin Epidemiol 2021; 137:176-181.
</p>


<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>

<hr>
<h2 id='precision_plot'>Precision plot</h2><span id='topic+precision_plot'></span>

<h3>Description</h3>

<p>This plot allows the visual comparison of the precision (i.e. standard deviation)
of the new measurement method with that of the reference standard, by creating
a scatter plot of the estimated standard deviations against the best linear
prediction (BLUP) of the true latent trait x.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>precision_plot(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="precision_plot_+3A_object">object</code></td>
<td>
<p>an object returned by a call to <a href="#topic+measure_compare">measure_compare</a></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Mingkai Peng &amp; Patrick Taffé
</p>


<h3>Examples</h3>

<pre><code class='language-R'>### load the data
data(data1)
### analysis
measure_model &lt;- measure_compare(data1)
### Precision plot
precision_plot(measure_model)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
