<!DOCTYPE html><html><head><title>Help for package crunch</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {crunch}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#crunch-package'><p>crunch: Crunch.io Data Tools</p></a></li>
<li><a href='#AbstractCategories-class'><p>Abstract categories</p></a></li>
<li><a href='#addGeoMetadata'><p>Add geodata metadata to a crunch variable</p></a></li>
<li><a href='#addSubvariable'><p>Add subvariable to an array</p></a></li>
<li><a href='#addSummaryStat'><p>Add summary statistics to a CrunchCube</p></a></li>
<li><a href='#addVariables'><p>Add multiple variables to a dataset</p></a></li>
<li><a href='#aliases'><p>Get and set names, aliases on Catalog-type objects</p></a></li>
<li><a href='#appendDataset'><p>Append one Crunch dataset to another</p></a></li>
<li><a href='#appendStream'><p>Manually trigger a pending append to a dataset</p></a></li>
<li><a href='#applyAgainst'><p>apply a function against a dimension</p></a></li>
<li><a href='#archive-and-publish'><p>Get and set &quot;archived&quot; and &quot;published&quot; status of a dataset</p></a></li>
<li><a href='#as-vector'><p>Convert Variables to local R objects</p></a></li>
<li><a href='#as.environment,CrunchDataset-method'><p>as.environment method for CrunchDataset</p></a></li>
<li><a href='#as.Text'><p>as.* methods for variables</p></a></li>
<li><a href='#automation-undo'><p>Undo behavior of a Crunch Automation Script</p></a></li>
<li><a href='#availableGeodataFeatures'><p>Get the property features for available geographies</p></a></li>
<li><a href='#batches'><p>See the appended batches of this dataset</p></a></li>
<li><a href='#buildDelimRegex'><p>Build Regex to find  delimited items.</p></a></li>
<li><a href='#c-categories'><p>S3 method to concatenate Categories and Category objects</p></a></li>
<li><a href='#calcTransforms'><p>Given a vector of values and elements, calculate the insertions</p></a></li>
<li><a href='#catalog-dataframes'><p>as.data.frame method for catalog objects</p></a></li>
<li><a href='#catalogToDataFrame'><p>A utility to return a data.frame from a ShojiCatalog.</p></a></li>
<li><a href='#Categories-class'><p>Categories in CategoricalVariables</p></a></li>
<li><a href='#categoriesFromLevels'><p>Convert a factor's levels into Crunch categories.</p></a></li>
<li><a href='#cd'><p>Change to different folder</p></a></li>
<li><a href='#changeCategoryID'><p>Change the id of a category for a categorical variable</p></a></li>
<li><a href='#check_margins'><p>Check validity of margins</p></a></li>
<li><a href='#checkInstalledPackages'><p>Check if a user has packages installed</p></a></li>
<li><a href='#cleanseBatches'><p>Remove batches from a dataset</p></a></li>
<li><a href='#collapse_dims'><p>Collapse an array from a CrunchCube by summing</p></a></li>
<li><a href='#collapseCategories'><p>Combine Categories in place</p></a></li>
<li><a href='#combine'><p>Combine categories or responses</p></a></li>
<li><a href='#compareDatasets'><p>Compare two datasets to see how they will append</p></a></li>
<li><a href='#conditionalTransform'><p>Conditional transformation</p></a></li>
<li><a href='#consent'><p>Give consent to do things that require permission</p></a></li>
<li><a href='#ContextManager'><p>Context managers</p></a></li>
<li><a href='#copyFolders'><p>Copy the folder structure from one dataset to another.</p></a></li>
<li><a href='#copyOrder'><p>Copy the variable order from one dataset to another.</p></a></li>
<li><a href='#copyOrderGroup'><p>Copy the order of a <code>VariableGroup</code> (or individual variable URL) from <code>VariableOrder</code></p></a></li>
<li><a href='#copyVariable'><p>Copy a variable</p></a></li>
<li><a href='#createDataset'><p>Create an empty dataset</p></a></li>
<li><a href='#createSubvarDeriv'><p>Create subvariable derivation expressions</p></a></li>
<li><a href='#createWithMetadataAndFile'><p>Make a dataset with metadata and a CSV</p></a></li>
<li><a href='#createWithPreparedData'><p>Upload a prepared data.frame with metadata to Crunch</p></a></li>
<li><a href='#crtabs'><p>Crunch xtabs: Crosstab and otherwise aggregate variables in a Crunch Dataset</p></a></li>
<li><a href='#crunch_sitrep'><p>Crunch situation report</p></a></li>
<li><a href='#crunch_user_agent'><p>Generate or extend the User-Agent string</p></a></li>
<li><a href='#crunch-api-key'><p>Crunch API Keys</p></a></li>
<li><a href='#crunch-extract'><p>Extract and modify Crunch objects</p></a></li>
<li><a href='#crunch-summary'><p>Summary methods for Crunch Variables</p></a></li>
<li><a href='#crunch-uni'><p>Univariate statistics on Crunch objects</p></a></li>
<li><a href='#crunchAPI'><p>Main Crunch API handling function</p></a></li>
<li><a href='#crunchBox'><p>Make a CrunchBox</p></a></li>
<li><a href='#CrunchDataFrame'><p>CrunchDataFrame</p></a></li>
<li><a href='#CrunchDataset-class'><p>Crunch Datasets</p></a></li>
<li><a href='#CrunchGeography-class'><p>Geography properties for crunch variables</p></a></li>
<li><a href='#CrunchVariable-class'><p>Variables in Crunch</p></a></li>
<li><a href='#cube-computing'><p>Work with CrunchCubes, MultitableResults, and TabBookResults</p></a></li>
<li><a href='#cube-residuals'><p>Calculate standardized residuals from a CrunchCube</p></a></li>
<li><a href='#cubeMeasureType'><p>Get measure type of cube result</p></a></li>
<li><a href='#cut,DatetimeVariable-method'><p>Cut a Datetime Crunch variable</p></a></li>
<li><a href='#cut,NumericVariable-method'><p>Cut a numeric Crunch variable</p></a></li>
<li><a href='#dashboard'><p>View or set a dashboard URL</p></a></li>
<li><a href='#dataset-to-R'><p>as.data.frame method for CrunchDataset</p></a></li>
<li><a href='#DatasetOrder-class'><p>Organize Datasets</p></a></li>
<li><a href='#datasetReference'><p>Get a Crunch object's dataset URL</p></a></li>
<li><a href='#datasets'><p>Get a catalog of datasets</p></a></li>
<li><a href='#decks'><p>Get a dataset's DeckCatalog</p></a></li>
<li><a href='#delete'><p>Delete a Crunch object from the server</p></a></li>
<li><a href='#deleteDataset'><p>Delete a dataset from the dataset list</p></a></li>
<li><a href='#deleteSubvariables'><p>Delete subvariables from an array</p></a></li>
<li><a href='#deleteVariables'><p>Delete Variables Within a Dataset</p></a></li>
<li><a href='#derivation'><p>Get or set a derived variable's expression</p></a></li>
<li><a href='#deriveArray'><p>Make a Categorical Array or Multiple Response variable</p></a></li>
<li><a href='#describe-entity'><p>Name, alias, and description for Crunch objects</p></a></li>
<li><a href='#dichotomize'><p>Indicate how categories represent a dichotomized value</p></a></li>
<li><a href='#dimension-comparison'><p>Column and row comparison</p></a></li>
<li><a href='#dimension-comparison-pairwise'><p>Pairwise column and row comparison</p></a></li>
<li><a href='#dimensions'><p>Methods on Cube objects</p></a></li>
<li><a href='#dimSums'><p>Collapse an array from a CrunchCube by summing across dimensions to remove</p></a></li>
<li><a href='#dropRows'><p>Permanently delete rows from a dataset</p></a></li>
<li><a href='#duplicated'><p>&quot;duplicated&quot; method for Crunch objects</p></a></li>
<li><a href='#email'><p>Extract the email from a User Entity</p></a></li>
<li><a href='#embedCrunchBox'><p>Get HTML for embedding a CrunchBox</p></a></li>
<li><a href='#ensureValidCase'><p>Validate case statements for case variables</p></a></li>
<li><a href='#entity'><p>Methods for ShojiTuples</p></a></li>
<li><a href='#envOrOption'><p>Get/set options (user-specified, in environment, or in R options)</p></a></li>
<li><a href='#escapeRegex'><p>Escape a regular expression</p></a></li>
<li><a href='#exclusion'><p>View and set exclusion filters</p></a></li>
<li><a href='#exportDataset'><p>Export a dataset to a file</p></a></li>
<li><a href='#exportDeck'><p>Export a Crunch Deck</p></a></li>
<li><a href='#expressions'><p>Construct Crunch Expressions from Crunch Database Functions</p></a></li>
<li><a href='#expressions-internal'><p>Crunch expressions internal</p></a></li>
<li><a href='#fillExpr'><p>Expression to fill a variable from another</p></a></li>
<li><a href='#filter'><p>Get and set slide analyses</p></a></li>
<li><a href='#filters'><p>Get or set a dataset's filters</p></a></li>
<li><a href='#flattenOrder'><p>Remove nesting of groups within an order/group</p></a></li>
<li><a href='#flipArrays'><p>Rearrange array subvariables</p></a></li>
<li><a href='#folder'><p>Find and move entities to a new folder</p></a></li>
<li><a href='#forceVariableCatalog'><p>Force variables catalog to be loaded</p></a></li>
<li><a href='#forkDataset'><p>Create a fork of a dataset</p></a></li>
<li><a href='#fortify'><p>Fortify crunch objects for use with ggplot</p></a></li>
<li><a href='#generateNumCutLabels'><p>Generate Labels for the cut function</p></a></li>
<li><a href='#generateWeightEntry'><p>Generate entry for makeWeight</p></a></li>
<li><a href='#getAccountUserCatalog'><p>Find all users on your account</p></a></li>
<li><a href='#getDimTypes'><p>Get dimension type</p></a></li>
<li><a href='#getTeams'><p>Retrieve your teams</p></a></li>
<li><a href='#grabColNames'><p>grab column names for subsetting crdfs</p></a></li>
<li><a href='#grabRowInd'><p>grab row indicators for subsetting crdfs</p></a></li>
<li><a href='#grouped'><p>Get grouped or ungrouped OrderGroups</p></a></li>
<li><a href='#handleAPIresponse'><p>Do the right thing with the HTTP response</p></a></li>
<li><a href='#hasFunction'><p>Check if a package has a function installed</p></a></li>
<li><a href='#http-methods'><p>HTTP methods for communicating with the Crunch API</p></a></li>
<li><a href='#index'><p>Get the body of a Catalog</p></a></li>
<li><a href='#index.table'><p>Calculate an index table for a CrunchCube</p></a></li>
<li><a href='#Insertions-class'><p>Insert categories in transformations</p></a></li>
<li><a href='#interactVariables'><p>Create a variable by interacting categorical variables</p></a></li>
<li><a href='#is-na-categories'><p>is.na for Categories</p></a></li>
<li><a href='#is-public'><p>View and modify the &quot;public&quot; attribute of artifacts</p></a></li>
<li><a href='#is.editor'><p>Read and set edit privileges</p></a></li>
<li><a href='#is.TRUEorFALSE'><p>Check that a value is TRUE or FALSE</p></a></li>
<li><a href='#is.VariableDefinition'><p>Test whether a Crunch object belongs to a class</p></a></li>
<li><a href='#is.weight&lt;-'><p>Dataset weights</p></a></li>
<li><a href='#joinDatasets'><p>Add columns from one dataset to another, joining on a key</p></a></li>
<li><a href='#length'><p>Length of Crunch objects</p></a></li>
<li><a href='#listDatasetGadget'><p>Open dataset selector</p></a></li>
<li><a href='#listDatasets'><p>Get the names of datasets in a project</p></a></li>
<li><a href='#loadDataset'><p>Load a Crunch Dataset</p></a></li>
<li><a href='#lock'><p>Lock and unlock a dataset for editing</p></a></li>
<li><a href='#logout'><p>DEPRECATED! Authenticate with the Crunch API</p></a></li>
<li><a href='#makeArrayGadget'><p>Array builder</p></a></li>
<li><a href='#makeCaseVariable'><p>Make a case variable</p></a></li>
<li><a href='#makeCaseWhenVariable'><p>Create a categorical or numeric variable based on conditions</p></a></li>
<li><a href='#makeDimTransform'><p>Helper for creating slide dimension transformations for dashboards and exports</p></a></li>
<li><a href='#makeInsertion'><p>Convert a child class of Insertion into a proper Insertion</p></a></li>
<li><a href='#makeMarginMap'><p>Make a map of margins</p></a></li>
<li><a href='#makeMRFromText'><p>Create Multiple Response Variable from Delimited lists</p></a></li>
<li><a href='#makeWeight'><p>Generate a weight variable</p></a></li>
<li><a href='#margin-translation'><p>Convert from user margins to real cube margins or vice versa</p></a></li>
<li><a href='#matchCatToFeat'><p>Match categories with features from geodata</p></a></li>
<li><a href='#me'><p>My user entity</p></a></li>
<li><a href='#members'><p>Manage access to datasets and other objects</p></a></li>
<li><a href='#merge'><p>Merge a CrunchDataFrame</p></a></li>
<li><a href='#mergeFork'><p>Merge changes to a dataset from a fork</p></a></li>
<li><a href='#moveLastElement'><p>Move and delete last element of a vector</p>
This moves the last element of a vector to an index, then deletes the last
element, it is broken out for testing purposes</a></li>
<li><a href='#multitables'><p>Multitable entities for a dataset</p></a></li>
<li><a href='#mv'><p>Functions to manipulate variables' or project's folder structure</p></a></li>
<li><a href='#na.omit'><p>Omit missing categories</p></a></li>
<li><a href='#ncol'><p>Dataset dimensions</p></a></li>
<li><a href='#newDataset'><p>Upload data to Crunch to make a new dataset</p></a></li>
<li><a href='#newDatasetByColumn'><p>Upload a data.frame column-by-column to make a new dataset</p></a></li>
<li><a href='#newDatasetFromFile'><p>Upload a file to Crunch to make a new dataset</p></a></li>
<li><a href='#newDeck'><p>Create an empty Crunch Deck</p></a></li>
<li><a href='#newExampleDataset'><p>Import a fixture dataset for testing</p></a></li>
<li><a href='#newFilter'><p>Create a new filter</p></a></li>
<li><a href='#newMultitable'><p>Create a new Multitable</p></a></li>
<li><a href='#newProject'><p>Create a new folder</p></a></li>
<li><a href='#newSlide'><p>Append a new slide to a Crunch Deck</p></a></li>
<li><a href='#notifyIfNewVersion'><p>See if there's a new version of the package on GitHub</p></a></li>
<li><a href='#noTransforms'><p>Remove transformations from a CrunchCube</p></a></li>
<li><a href='#ordering'><p>Get and set VariableOrder</p></a></li>
<li><a href='#owner'><p>Get and set the owner of a dataset</p></a></li>
<li><a href='#owners'><p>See who owns these datasets</p></a></li>
<li><a href='#palettes'><p>Get the palettes from a crunch object</p></a></li>
<li><a href='#pendingStream'><p>Get the pending streams for a dataset</p></a></li>
<li><a href='#pk'><p>Get and set the primary key for a Crunch dataset</p></a></li>
<li><a href='#pollProgress'><p>Check a Crunch progress URL until it finishes</p></a></li>
<li><a href='#popSize'><p>Get and set the market size for Crunch datasets</p></a></li>
<li><a href='#preCrunchBoxCheck'><p>Check if a dataset will make a good CrunchBox</p></a></li>
<li><a href='#prepareDataForCrunch'><p>Translate a data.frame to Crunch format</p></a></li>
<li><a href='#projects'><p>List project folders</p></a></li>
<li><a href='#publicFolder'><p>Hide/Unhide or Privatize/Deprivatize Variables</p></a></li>
<li><a href='#reassignUser'><p>Reassign all Crunch objects from a user</p></a></li>
<li><a href='#refresh'><p>Get a fresh copy from the server</p></a></li>
<li><a href='#removeEmptyGroups'><p>Remove OrderGroups with no entities</p></a></li>
<li><a href='#reorderSlides'><p>Reorder slides in a CrunchDeck</p></a></li>
<li><a href='#replaceCharWithNumeric'><p>Transform character vectors into indices</p></a></li>
<li><a href='#replaceMissingWithTRUE'><p>Replace missing elements with TRUE</p></a></li>
<li><a href='#resolution'><p>Methods for Datetime variable resolutions</p></a></li>
<li><a href='#restoreVersion'><p>Restore a dataset to a previously saved version</p></a></li>
<li><a href='#retry'><p>Retry</p></a></li>
<li><a href='#rmdir'><p>Delete a folder</p></a></li>
<li><a href='#rowCount'><p>Create variables based on row-wise functions for crunch Multiple Response Variables</p></a></li>
<li><a href='#rowDistinct'><p>Create variables useful for determining whether a row's values are suspicious</p></a></li>
<li><a href='#runCrunchAutomation'><p>Run a crunch automation script</p></a></li>
<li><a href='#saveVersion'><p>Create a new saved version</p></a></li>
<li><a href='#scoreCatToFeat'><p>Score similarity between a feature dataframe and categories</p></a></li>
<li><a href='#scripts'><p>Crunch Automation scripts entities for a dataset</p></a></li>
<li><a href='#searchDatasets'><p>Search Crunch for datasets.</p></a></li>
<li><a href='#self'><p>Get the URL of this object</p></a></li>
<li><a href='#serialPaste'><p>Make a prose list</p></a></li>
<li><a href='#session'><p>Get various catalogs for your Crunch session</p></a></li>
<li><a href='#session-extract'><p>Extract catalogs from a Session object</p></a></li>
<li><a href='#set_crunch_config'><p>Set or modify general Crunch API request configuration</p></a></li>
<li><a href='#setCrunchAPI'><p>Change which server to point to</p></a></li>
<li><a href='#setEntitySlot'><p>Base setter for Crunch objects</p></a></li>
<li><a href='#setEntitySlotWrapBody'><p>Setter for Crunch objects that wraps in a &quot;body&quot;</p></a></li>
<li><a href='#setMultiEntitySlots'><p>setter for Crunch objects that allows a single request to update multiple parts of an entity</p></a></li>
<li><a href='#setName'><p>Change the name of the current folder</p></a></li>
<li><a href='#setNames'><p>Change the name of the entities in a catalog</p></a></li>
<li><a href='#setOrder'><p>Change the order of entities in folder</p></a></li>
<li><a href='#settings'><p>View and modify dataset-level settings</p></a></li>
<li><a href='#setupCrunchAuth'><p>Helper for switching between API keys and urls</p></a></li>
<li><a href='#share'><p>Share a dataset</p></a></li>
<li><a href='#shojifyDatasetMetadata'><p>Wrap variable metadata inside a dataset entity</p></a></li>
<li><a href='#ShojiObject-class'><p>Mix-in class for multiple inheritance of variables and datasets.</p></a></li>
<li><a href='#ShojiOrder-slots'><p>Manipulate VariableGroup and VariableOrder</p></a></li>
<li><a href='#shojiURL'><p>Get a resource URL from a Shoji Object</p></a></li>
<li><a href='#show'><p>Show methods for Crunch objects</p></a></li>
<li><a href='#showMissing'><p>Modify cube missing behavior</p></a></li>
<li><a href='#showTransforms'><p>Show transformations on a Crunch object</p></a></li>
<li><a href='#skipMissingCategories'><p>Handle missing categories in CrunchCube</p></a></li>
<li><a href='#slideCategories'><p>Create sliding subvariable definitions</p></a></li>
<li><a href='#slideMarkdown'><p>Add a new markdown slide to a deck</p></a></li>
<li><a href='#slides'><p>Access the slides of a CrunchDeck</p></a></li>
<li><a href='#SO_schema'><p>Schema for the 2017 Stack Overflow developer survey</p></a></li>
<li><a href='#SO_survey'><p>R users who responded to the 2017 Stack Overflow developer survey</p></a></li>
<li><a href='#streaming'><p>Set the streaming property of a dataset</p></a></li>
<li><a href='#streamRows'><p>Stream data to a Crunch dataset</p></a></li>
<li><a href='#Subtotal-class'><p>Subtotals and headings</p></a></li>
<li><a href='#subtotalArray'><p>Calculate the transforms from a CrunchCube</p></a></li>
<li><a href='#subtypeInsertion'><p>Convert from Insertion to Insertion subtypes</p></a></li>
<li><a href='#Subvariables-class'><p>Subvariables in Array Variables</p></a></li>
<li><a href='#SummaryStat-class'><p>Summary insertions</p></a></li>
<li><a href='#tabBook'><p>Compute a Tab Book</p></a></li>
<li><a href='#tabbook-dim'><p>TabBookResult and MultitableResult dimension</p></a></li>
<li><a href='#table'><p>Table function for Crunch objects</p></a></li>
<li><a href='#team'><p>Share Crunch assets with a team</p></a></li>
<li><a href='#temp.options'><p>Set some global options temporarily</p></a></li>
<li><a href='#titles'><p>Manipulate deck titles</p></a></li>
<li><a href='#tojson-crunch'><p>toJSON methods for Crunch objects</p></a></li>
<li><a href='#tokenAuth'><p>Add an auth token manually</p></a></li>
<li><a href='#toVariable'><p>Generic method for converting objects to Crunch representations</p></a></li>
<li><a href='#Transforms-class'><p>Transformations of variable and cube views</p></a></li>
<li><a href='#translateCubeIndex'><p>Translate user facing cube subset to programmatic cube subset</p></a></li>
<li><a href='#translateHidden'><p>Translate provided index to an index which accounts for hidden categories.</p></a></li>
<li><a href='#type'><p>Change Crunch variable types</p></a></li>
<li><a href='#unbind'><p>Split an array or multiple-response variable into its CategoricalVariables</p></a></li>
<li><a href='#unshare'><p>Revoke a user's access to a dataset</p></a></li>
<li><a href='#urls,ShojiCatalog-method'><p>Get the URLs contained in a Catalog or Order object</p></a></li>
<li><a href='#users'><p>Get information about users who have access to a dataset</p></a></li>
<li><a href='#validateNamesInDims'><p>error iff the names are not a dimension in the cube provided</p></a></li>
<li><a href='#var-categories'><p>Get and set Categories on Variables</p></a></li>
<li><a href='#VariableCatalog-class'><p>Collection of Variables within a Dataset</p></a></li>
<li><a href='#VariableDefinition'><p>Construct a variable definition</p></a></li>
<li><a href='#variableMetadata'><p>Get all variable metadata for a dataset</p></a></li>
<li><a href='#VariableOrder-class'><p>Organize Variables within a Dataset</p></a></li>
<li><a href='#variables'><p>Access a catalog of variables</p></a></li>
<li><a href='#versions'><p>Access the saved versions of a dataset</p></a></li>
<li><a href='#webApp'><p>View a Crunch Object in the Web Application</p></a></li>
<li><a href='#weightVariables'><p>Get a dataset's weightVariables</p></a></li>
<li><a href='#weightVariables&lt;-'><p>Change which variables can be set as a dataset's weight.</p></a></li>
<li><a href='#which'><p>&quot;which&quot; method for CrunchLogicalExpr</p></a></li>
<li><a href='#with-context-manager'><p>Context manager's &quot;with&quot; method</p></a></li>
<li><a href='#write.csv.gz'><p>Write CSV to a compressed file</p></a></li>
<li><a href='#writePreparedData'><p>Persist to disk a prepared data.frame and metadata</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Crunch.io Data Tools</td>
</tr>
<tr>
<td>Description:</td>
<td>The Crunch.io service <a href="https://crunch.io/">https://crunch.io/</a> provides a cloud-based
    data store and analytic engine, as well as an intuitive web interface.
    Using this package, analysts can interact with and manipulate Crunch
    datasets from within R. Importantly, this allows technical researchers to
    collaborate naturally with team members, managers, and clients who prefer a
    point-and-click interface.</td>
</tr>
<tr>
<td>Version:</td>
<td>1.30.4</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://crunch.io/r/crunch/">https://crunch.io/r/crunch/</a>, <a href="https://github.com/Crunch-io/rcrunch">https://github.com/Crunch-io/rcrunch</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/Crunch-io/rcrunch/issues">https://github.com/Crunch-io/rcrunch/issues</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/LGPL-3">LGPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>abind, crayon, curl, grDevices, httr (&ge; 1.0.0), httpcache (&ge;
0.1.4), jsonlite (&ge; 0.9.15), methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>base64enc, covr, crunchy, devtools, haven, httptest (&ge;
3.0.0), knitr, lintr, magrittr, mime, rmarkdown, rstudioapi,
spelling, styler, testthat (&ge; 2.0.0), withr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Collate:</td>
<td>'AllClasses.R' 'AllGenerics.R' 'variable-definition.R'
'R-to-variable.R' 'SO-survey.R' 'abstract-categories.R'
'abstract-category.R' 'add-subvariable.R' 'add-variable.R'
'api.R' 'append-dataset.R' 'archive-and-publish.R'
'as-data-frame.R' 'as-vector.R' 'auth.R' 'automation.R'
'batches.R' 'case-variables.R' 'case-when-variable.R'
'categories.R' 'category.R' 'change-category-id.R'
'combine-categories.R' 'compare-categories.R'
'compare-datasets.R' 'compare-subvariables.R'
'compare-variables.R' 'compare.R' 'conditional-transform.R'
'consent.R' 'context-manager.R' 'copy.R' 'crunch-data-frame.R'
'crunch.R' 'crunchbox.R' 'cube-collapse-dimensions.R'
'cube-dims.R' 'cube-index-table.R' 'cube-query.R'
'cube-residuals.R' 'cube-result.R' 'cube-subset.R'
'transform.R' 'cube-transforms.R' 'cube-variables.R' 'cut.R'
'dataset-catalog.R' 'dataset-extract.R' 'dataset-order.R'
'dataset-reference.R' 'dataset-stream.R' 'dataset-update.R'
'dataset.R' 'datetime.R' 'shoji-catalog.R' 'decks.R' 'delete.R'
'dichotomize.R' 'dimension-transforms.R' 'drop-rows.R'
'edit-lock.R' 'export-dataset.R' 'expressions.R'
'fill-variable.R' 'filters.R' 'folders.R' 'fork-and-merge.R'
'formula.R' 'gadgets.R' 'geo.R' 'get-datasets.R' 'github.R'
'hide-variables.R' 'insertions.R' 'interact.R' 'join-dataset.R'
'json.R' 'length.R' 'make-array.R' 'members.R'
'merge-crunch-data-frame.R' 'misc.R' 'multitables.R'
'new-dataset.R' 'ordering.R' 'palettes.R'
'permission-catalog.R' 'permissions.R' 'show.R'
'pretty-print.R' 'private-variables.R' 'progress.R'
'project-folder.R' 'projects.R' 'rowwise.R' 'search.R'
'session.R' 'share.R' 'shoji-entity.R' 'shoji-folder.R'
'shoji-order-slots.R' 'shoji-order.R' 'shoji.R' 'slides.R'
'sliding-categories.R' 'subtotals-and-headings.R'
'subvariables.R' 'summary-insertions.R' 'tab-book.R' 'teams.R'
'transform-calculate.R' 'tuple.R' 'univariate.R' 'user-info.R'
'user.R' 'variable-as-methods.R' 'variable-catalog.R'
'variable-derivation.R' 'variable-folder.R'
'variable-metadata.R' 'variable-order.R' 'variable-summary.R'
'variable-type.R' 'variable-update.R' 'variable.R'
'variables.R' 'versions.R' 'weight.R' 'zcl.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-17 03:00:15 UTC; gregfreedmanellis</td>
</tr>
<tr>
<td>Author:</td>
<td>Greg Freedman Ellis [aut, cre],
  Jonathan Keane [aut],
  Mike Malecki [aut],
  Neal Richardson [aut],
  Gordon Shotwell [aut],
  Aljaž Sluga [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Greg Freedman Ellis &lt;greg@crunch.io&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-17 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='crunch-package'>crunch: Crunch.io Data Tools</h2><span id='topic+crunch'></span><span id='topic+crunch-package'></span>

<h3>Description</h3>

<p>The Crunch.io service <a href="https://crunch.io/">https://crunch.io/</a> provides a cloud-based data store and analytic engine, as well as an intuitive web interface. Using this package, analysts can interact with and manipulate Crunch datasets from within R. Importantly, this allows technical researchers to collaborate naturally with team members, managers, and clients who prefer a point-and-click interface.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Greg Freedman Ellis <a href="mailto:greg@crunch.io">greg@crunch.io</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Jonathan Keane <a href="mailto:jkeane@gmail.com">jkeane@gmail.com</a>
</p>
</li>
<li><p> Mike Malecki <a href="mailto:mike@crunch.io">mike@crunch.io</a>
</p>
</li>
<li><p> Neal Richardson <a href="mailto:neal.p.richardson@gmail.com">neal.p.richardson@gmail.com</a>
</p>
</li>
<li><p> Gordon Shotwell <a href="mailto:gordon.shotwell@gmail.com">gordon.shotwell@gmail.com</a>
</p>
</li>
<li><p> Aljaž Sluga <a href="mailto:aljaz.sluga@crunch.io">aljaz.sluga@crunch.io</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://crunch.io/r/crunch/">https://crunch.io/r/crunch/</a>
</p>
</li>
<li> <p><a href="https://github.com/Crunch-io/rcrunch">https://github.com/Crunch-io/rcrunch</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/Crunch-io/rcrunch/issues">https://github.com/Crunch-io/rcrunch/issues</a>
</p>
</li></ul>


<hr>
<h2 id='AbstractCategories-class'>Abstract categories</h2><span id='topic+AbstractCategories-class'></span><span id='topic+AbstractCategory'></span><span id='topic+AbstractCategories'></span><span id='topic+AbstractCategory-class'></span>

<h3>Description</h3>

<p>An abstract class that categories, elements, insertions, etc. fall under
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AbstractCategories(..., data = NULL)

AbstractCategory(..., data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="AbstractCategories-class_+3A_data">data</code></td>
<td>
<p>For the constructor functions <code>AbstractCategory</code> and
<code>AbstractCategories</code>, you can either pass in attributes via <code>...</code> or you
can create the objects with a fully defined <code>list</code> representation of
the objects via the <code>data</code> argument. See the examples.</p>
</td></tr>
</table>

<hr>
<h2 id='addGeoMetadata'>Add geodata metadata to a crunch variable</h2><span id='topic+addGeoMetadata'></span>

<h3>Description</h3>

<p>If the variable matches a single geographic shapefile hosted by crunch,
<code>addGeoMetadata</code> will make the appropriate <code><a href="#topic+CrunchGeography">CrunchGeography</a></code> to add to a
variable's <code><a href="#topic+geo">geo()</a></code> metadata. It matches based on how well the contents of the
variable match the feature properties that are in each shapefile.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addGeoMetadata(variable, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addGeoMetadata_+3A_variable">variable</code></td>
<td>
<p>a Crunch variable to use for matching. This must be either
a text or a categorical variable.</p>
</td></tr>
<tr><td><code id="addGeoMetadata_+3A_...">...</code></td>
<td>
<p>arguments passed on to <code><a href="#topic+matchCatToFeat">matchCatToFeat()</a></code> for example a set of
available geographic features as <code>all_features</code> if you want to limit the
number of features to be considered.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If more than one property of the same geographic shapefile has the same
highest matching score, the first one will be used.
</p>
<p>If more than one geographic shapefile has the same highest matching score, an
error will be printed listing the geographic shapefiles that matched.
Information from this error can be used to setup an appropriate
<code><a href="#topic+CrunchGeography">CrunchGeography</a></code> by hand to connect a variable with the metadata needed.
</p>


<h3>Value</h3>

<p>a <code><a href="#topic+CrunchGeography">CrunchGeography</a></code> object that can be assigned into <code>geo(variable)</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo(ds$state) &lt;- addGeoMetadata(ds$state)

## End(Not run)
</code></pre>

<hr>
<h2 id='addSubvariable'>Add subvariable to an array</h2><span id='topic+addSubvariable'></span><span id='topic+addSubvariables'></span>

<h3>Description</h3>

<p>Add subvariable to an array
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addSubvariable(variable, subvariable)

addSubvariables(variable, subvariable)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addSubvariable_+3A_variable">variable</code></td>
<td>
<p>the array variable to modify</p>
</td></tr>
<tr><td><code id="addSubvariable_+3A_subvariable">subvariable</code></td>
<td>
<p>the subvariable to add, or a list of those to add, or a
dataset subset. You can supply variables, variable definitions or lists of
variables and variable definitions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>variable</code> with the indicated subvariables added.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+subvariables">subvariables()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds$allpets &lt;- addSubvariable(ds$allpets, ds$allpets_4)
ds$petloc &lt;- addSubvariables(ds$petloc, ds[c("petloc_school", "petloc_daycare")])

## End(Not run)
</code></pre>

<hr>
<h2 id='addSummaryStat'>Add summary statistics to a CrunchCube</h2><span id='topic+addSummaryStat'></span>

<h3>Description</h3>

<p>Use <code>addSummaryStat()</code> to add a summary statistic to a CrunchCube object. If
not otherwise specified, the summary statistic will be <code>mean</code> and be placed
at the bottom of the cube. You can change those defaults by passing any value
you can use with <code>SummaryStat()</code> (e.g. <code>position</code>, <code>categories</code>, <code>after</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addSummaryStat(cube, stat = c("mean", "median"), var, margin, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addSummaryStat_+3A_cube">cube</code></td>
<td>
<p>a CrunchCube to add stats to</p>
</td></tr>
<tr><td><code id="addSummaryStat_+3A_stat">stat</code></td>
<td>
<p>a character with the summary statistic to include (default: &quot;mean&quot;)</p>
</td></tr>
<tr><td><code id="addSummaryStat_+3A_var">var</code></td>
<td>
<p>a character with the name of the dimension variable to add the
summary statistic for generally the alias of the variable in Crunch, but
might include Crunch functions like <code>rollup()</code>, <code>bin()</code>, etc.</p>
</td></tr>
<tr><td><code id="addSummaryStat_+3A_margin">margin</code></td>
<td>
<p>which margin should the summary statistic be applied for (used
in the cases of categorical arrays where a variable might contribute more
than one margin)</p>
</td></tr>
<tr><td><code id="addSummaryStat_+3A_...">...</code></td>
<td>
<p>options to pass to <code>SummaryStat()</code> (e.g., position, after, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a CrunchCube with the summary statistic Insertion added to the
transforms of the variable specified
</p>


<h3>See Also</h3>

<p>SummaryStat
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
pet_feelings
#                   animals
# feelings            cats dogs
#  extremely happy      9    5
#  somewhat happy      12   12
#  neutral             12    7
#  somewhat unhappy    10   10
#  extremely unhappy   11   12

# add a mean summary statistic to a CrunchCube
addSummaryStat(pet_feelings, stat = "mean", var = "feelings")
#                 animals
# feelings                      cats             dogs
#  extremely happy                9                5
#   somewhat happy               12               12
#          neutral               12                7
# somewhat unhappy               10               10
# extremely unhappy               11               12
#             mean 4.90740740740741 4.34782608695652

# we can also store the CrunchCube for use elsewhere
pet_feelings &lt;- addSummaryStat(pet_feelings, stat = "mean", var = "feelings")
pet_feelings
#                 animals
# feelings                      cats             dogs
#  extremely happy                9                5
#   somewhat happy               12               12
#          neutral               12                7
# somewhat unhappy               10               10
# extremely unhappy               11               12
#             mean 4.90740740740741 4.34782608695652

# `addSummaryStat` returns a CrunchCube that has had the summary statistic
# added to it, so that you can still use the Crunch logic for multiple
# response variables, missingness, etc.
class(pet_feelings)
# [1] "CrunchCube"
# attr(,"package")
# [1] "crunch"

# Since `pet_feelings` is a CrunchCube, although it has similar properties
# and behaviors to arrays, it is not a R array:
is.array(pet_feelings)
# [1] FALSE

# cleanup transforms
transforms(pet_feelings) &lt;- NULL
# add a median summary statistic to a CrunchCube
pet_feelings &lt;- addSummaryStat(pet_feelings, stat = "median", var = "feelings")
pet_feelings
#                 animals
# feelings             cats    dogs
#  extremely happy       9       5
#   somewhat happy      12      12
#          neutral      12       7
# somewhat unhappy      10      10
# extremely unhappy      11      12
#           median       5       5

# additionally, if you want a true matrix object from the CrunchCube, rather
# than the CrunchCube object itself, `applyTransforms()` will return the
# array with the summary statistics (just like subtotals and headings)
pet_feelings_array &lt;- applyTransforms(pet_feelings)
pet_feelings_array
#                 animals
# feelings             cats    dogs
#  extremely happy       9       5
#   somewhat happy      12      12
#          neutral      12       7
# somewhat unhappy      10      10
# extremely unhappy      11      12
#           median       5       5

# and we can see that this is an array and no longer a CrunchCube
is.array(pet_feelings_array)
# [1] TRUE

## End(Not run)

</code></pre>

<hr>
<h2 id='addVariables'>Add multiple variables to a dataset</h2><span id='topic+addVariables'></span>

<h3>Description</h3>

<p>This function lets you add more than one variable at a time to a dataset.
If you have multiple variables to add, this function will be faster than
doing <code>ds$var &lt;- value</code> assignment because it doesn't refresh the
dataset's state in between variable POST requests.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>addVariables(dataset, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="addVariables_+3A_dataset">dataset</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="addVariables_+3A_...">...</code></td>
<td>
<p><code><a href="#topic+VariableDefinition">VariableDefinition</a></code>s or a list of
VariableDefinitions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataset</code> with the new variables added (invisibly)
</p>

<hr>
<h2 id='aliases'>Get and set names, aliases on Catalog-type objects</h2><span id='topic+aliases'></span><span id='topic+describe-catalog'></span><span id='topic+aliases+3C-'></span><span id='topic+descriptions'></span><span id='topic+descriptions+3C-'></span><span id='topic+types'></span><span id='topic+emails'></span><span id='topic+timestamps'></span><span id='topic+scriptBody'></span><span id='topic+names'></span><span id='topic+names+3C-'></span><span id='topic+ids'></span><span id='topic+ids+3C-'></span><span id='topic+values'></span><span id='topic+values+3C-'></span><span id='topic+dates'></span><span id='topic+dates+3C-'></span><span id='topic+names+2CAbstractCategories-method'></span><span id='topic+names+3C-+2CAbstractCategories-method'></span><span id='topic+ids+2CAbstractCategories-method'></span><span id='topic+timestamps+2CScriptCatalog-method'></span><span id='topic+timestamps+2CScript-method'></span><span id='topic+scriptBody+2CScript-method'></span><span id='topic+names+2CBatchCatalog-method'></span><span id='topic+ids+3C-+2CCategories-method'></span><span id='topic+values+2CCategories-method'></span><span id='topic+values+3C-+2CCategories-method'></span><span id='topic+dates+2CCategories-method'></span><span id='topic+dates+3C-+2CCategories-method'></span><span id='topic+names.CrunchDataFrame'></span><span id='topic+names+2CCrunchCube-method'></span><span id='topic+aliases+2CCrunchCube-method'></span><span id='topic+descriptions+2CCrunchCube-method'></span><span id='topic+types+2CCrunchCube-method'></span><span id='topic+notes+2CCrunchCube-method'></span><span id='topic+names+2CCrunchDataset-method'></span><span id='topic+names+2CShojiCatalog-method'></span><span id='topic+names+3C-+2CShojiCatalog-method'></span><span id='topic+emails+2CShojiCatalog-method'></span><span id='topic+names+2CCrunchDeck-method'></span><span id='topic+names+3C-+2CCrunchDeck-method'></span><span id='topic+types+2CCrunchDeck-method'></span><span id='topic+names+3C-+2CMultitableCatalog-method'></span><span id='topic+types+2CShojiFolder-method'></span><span id='topic+names+2CShojiOrder-method'></span><span id='topic+names+2COrderGroup-method'></span><span id='topic+names+2CSlideCatalog-method'></span><span id='topic+names+3C-+2CSlideCatalog-method'></span><span id='topic+types+2CSlideCatalog-method'></span><span id='topic+names+2CArrayVariable-method'></span><span id='topic+names+2CTabBookResult-method'></span><span id='topic+aliases+2CTabBookResult-method'></span><span id='topic+descriptions+2CTabBookResult-method'></span><span id='topic+names+2CMultitableResult-method'></span><span id='topic+aliases+2CMultitableResult-method'></span><span id='topic+descriptions+2CMultitableResult-method'></span><span id='topic+aliases+2CVariableCatalog-method'></span><span id='topic+aliases+3C-+2CVariableCatalog-method'></span><span id='topic+notes+2CVariableCatalog-method'></span><span id='topic+notes+3C-+2CVariableCatalog-method'></span><span id='topic+descriptions+2CVariableCatalog-method'></span><span id='topic+descriptions+3C-+2CVariableCatalog-method'></span><span id='topic+types+2CVariableCatalog-method'></span><span id='topic+ids+2CVariableCatalog-method'></span><span id='topic+aliases+2CVariableFolder-method'></span><span id='topic+types+2Clist-method'></span><span id='topic+names+2CVersionCatalog-method'></span><span id='topic+descriptions+2CVersionCatalog-method'></span><span id='topic+timestamps+2CVersionCatalog-method'></span>

<h3>Description</h3>

<p>These methods let you get and set names and aliases for variables in a
Dataset's catalog, or within <code><a href="#topic+Subvariables">Subvariables</a></code> in an array
variable. They work like the base R names methods.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aliases(x)

aliases(x) &lt;- value

descriptions(x)

descriptions(x) &lt;- value

emails(x)

types(x)

timestamps(x)

ids(x)

ids(x) &lt;- value

values(x)

values(x) &lt;- value

scriptBody(x)

dates(x)

dates(x) &lt;- value

## S4 method for signature 'AbstractCategories'
names(x)

## S4 replacement method for signature 'AbstractCategories'
names(x) &lt;- value

## S4 method for signature 'AbstractCategories'
ids(x)

## S4 method for signature 'ScriptCatalog'
timestamps(x)

## S4 method for signature 'Script'
timestamps(x)

## S4 method for signature 'Script'
scriptBody(x)

## S4 method for signature 'BatchCatalog'
names(x)

## S4 replacement method for signature 'Categories'
ids(x) &lt;- value

## S4 method for signature 'Categories'
values(x)

## S4 replacement method for signature 'Categories'
values(x) &lt;- value

## S4 method for signature 'Categories'
dates(x)

## S4 replacement method for signature 'Categories'
dates(x) &lt;- value

## S3 method for class 'CrunchDataFrame'
names(x)

## S4 method for signature 'CrunchCube'
names(x)

## S4 method for signature 'CrunchCube'
aliases(x)

## S4 method for signature 'CrunchCube'
descriptions(x)

## S4 method for signature 'CrunchCube'
types(x)

## S4 method for signature 'CrunchCube'
notes(x)

## S4 method for signature 'CrunchDataset'
names(x)

## S4 method for signature 'ShojiCatalog'
names(x)

## S4 replacement method for signature 'ShojiCatalog'
names(x) &lt;- value

## S4 method for signature 'ShojiCatalog'
emails(x)

## S4 method for signature 'CrunchDeck'
names(x)

## S4 replacement method for signature 'CrunchDeck'
names(x) &lt;- value

## S4 method for signature 'CrunchDeck'
types(x)

## S4 replacement method for signature 'MultitableCatalog'
names(x) &lt;- value

## S4 method for signature 'ShojiFolder'
types(x)

## S4 method for signature 'ShojiOrder'
names(x)

## S4 method for signature 'OrderGroup'
names(x)

## S4 method for signature 'SlideCatalog'
names(x)

## S4 replacement method for signature 'SlideCatalog'
names(x) &lt;- value

## S4 method for signature 'SlideCatalog'
types(x)

## S4 method for signature 'ArrayVariable'
names(x)

## S4 method for signature 'TabBookResult'
names(x)

## S4 method for signature 'TabBookResult'
aliases(x)

## S4 method for signature 'TabBookResult'
descriptions(x)

## S4 method for signature 'MultitableResult'
names(x)

## S4 method for signature 'MultitableResult'
aliases(x)

## S4 method for signature 'MultitableResult'
descriptions(x)

## S4 method for signature 'VariableCatalog'
aliases(x)

## S4 replacement method for signature 'VariableCatalog'
aliases(x) &lt;- value

## S4 method for signature 'VariableCatalog'
notes(x)

## S4 replacement method for signature 'VariableCatalog'
notes(x) &lt;- value

## S4 method for signature 'VariableCatalog'
descriptions(x)

## S4 replacement method for signature 'VariableCatalog'
descriptions(x) &lt;- value

## S4 method for signature 'VariableCatalog'
types(x)

## S4 method for signature 'VariableCatalog'
ids(x)

## S4 method for signature 'VariableFolder'
aliases(x)

## S4 method for signature 'list'
types(x)

## S4 method for signature 'VersionCatalog'
names(x)

## S4 method for signature 'VersionCatalog'
descriptions(x)

## S4 method for signature 'VersionCatalog'
timestamps(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aliases_+3A_x">x</code></td>
<td>
<p>a <code>VariableCatalog</code>, <code>Subvariables</code>, or similar object</p>
</td></tr>
<tr><td><code id="aliases_+3A_value">value</code></td>
<td>
<p>For the setters, an appropriate-length character vector to
assign</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the Dataset <code>names</code> method returns the aliases of its
variables by default. This behavior is controlled by
<code>envOrOption("crunch.namekey.dataset")</code>.
Set <code>options(crunch.namekey.dataset="name")</code> if you wish to use
variable names. See the variables vignette for more information.
</p>


<h3>Value</h3>

<p>Getters return the character object in the specified slot; setters
return <code>x</code> duly modified.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Subvariables">Subvariables</a></code> <code><a href="#topic+Categories">Categories</a></code> <code><a href="base.html#topic+names">base::names()</a></code>
<code>vignette("variables", package="crunch")</code>
</p>

<hr>
<h2 id='appendDataset'>Append one Crunch dataset to another</h2><span id='topic+appendDataset'></span>

<h3>Description</h3>

<p>With Crunch, you can add additional rows to a dataset by appending a second
dataset to the bottom of the original dataset. Crunch makes intelligent
guesses to align the variables between the two datasets and to harmonize the
categories and subvariables of variables, as appropriate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appendDataset(dataset1, dataset2, upsert = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="appendDataset_+3A_dataset1">dataset1</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="appendDataset_+3A_dataset2">dataset2</code></td>
<td>
<p>another CrunchDataset, or possibly a data.frame. If
<code>dataset2</code> is not a Crunch dataset, it will be uploaded as a new
dataset before appending. If it is a CrunchDataset, it may be subsetted with
a filter expression on the rows and a selection of variables on the columns.</p>
</td></tr>
<tr><td><code id="appendDataset_+3A_upsert">upsert</code></td>
<td>
<p>Logical: should the append instead &quot;update&quot; rows based on the
primary key variable and &quot;insert&quot; (append) where the primary key values are
new? Default is <code>FALSE</code>. Note that this upserting behavior requires a primary
key variable to have been set previously; see <code><a href="#topic+pk">pk()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Variables are matched between datasets based on their aliases. Variables
present in only one of the two datasets are fine; they're handled by filling
in with missing values for the rows corresponding to the dataset where they
don't exist. For variables present in both datasets, you will have best
results if you ensure that the two datasets have the same variable names
and types, and that their categorical and array variables have consistent
categories. To preview how datasets will align when appended, see
<code><a href="#topic+compareDatasets">compareDatasets()</a></code>.
</p>
<p>Particularly if you're appending to datasets that are already shared with
others, you may want to use the fork-edit-merge workflow when appending
datasets. This allows you to verify your changes before releasing them to
the other viewers of the dataset. To do this fork the dataset with
<code><a href="#topic+forkDataset">forkDataset()</a></code>, append the new data to the fork, ensure that the append
worked as expected, and then merge the fork back to the original dataset
with <code>mergeFork()</code>. For more, see <code>vignette("fork-and-merge", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p><code>dataset1</code>, updated with <code>dataset2</code>, potentially filtered on rows and
variables, appended to it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("Survey, 2016")
new_wave &lt;- loadDataset("Survey, 2017")
ds &lt;- appendDataset(ds, new_wave)

## End(Not run)
</code></pre>

<hr>
<h2 id='appendStream'>Manually trigger a pending append to a dataset</h2><span id='topic+appendStream'></span>

<h3>Description</h3>

<p>Crunch allows you to stream data to a dataset. Streaming data is useful for
datasets which have frequent updates (see the
<a href="https://crunch.io/api/reference/#post-/datasets/-dataset_id-/stream/">Crunch API documentation</a>
for more information). Crunch automatically appends streamed data
periodically; however, if you would like to trigger appending pending
streamed data to a dataset, you can call <code>appendStream()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appendStream(ds)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="appendStream_+3A_ds">ds</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the dataset with pending stream data appended.
</p>

<hr>
<h2 id='applyAgainst'>apply a function against a dimension</h2><span id='topic+applyAgainst'></span>

<h3>Description</h3>

<p>Similar to other <code>apply</code> functions, this takes an array and applies the
function against the  dimensions (specified in the <code>MARGIN</code> argument). These
dimensions must be a single number (unlike many <code>apply</code> functions). See the
examples below, where we use the function <code>add_one_hundred</code> to add <code>100</code> on
to the end of each <code>MARGIN</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>applyAgainst(X, MARGIN, FUN, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="applyAgainst_+3A_x">X</code></td>
<td>
<p>an array</p>
</td></tr>
<tr><td><code id="applyAgainst_+3A_margin">MARGIN</code></td>
<td>
<p>the dimension to apply the function against</p>
</td></tr>
<tr><td><code id="applyAgainst_+3A_fun">FUN</code></td>
<td>
<p>the function to be applied</p>
</td></tr>
<tr><td><code id="applyAgainst_+3A_...">...</code></td>
<td>
<p>optional arguments to 'FUN&ldquo;</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>FUN</code> can be any function that takes a vector and returns a vector, but one
common use case is a function that adds new entries to the vector,
effectively expanding the array in the dimension given.
</p>


<h3>Value</h3>

<p>an array with the function applied
</p>


<h3>Examples</h3>

<pre><code class='language-R'>array &lt;- array(c(1:24), dim = c(4, 3, 2))
array
# , , 1
#
#      [,1] [,2] [,3]
# [1,]    1    5    9
# [2,]    2    6   10
# [3,]    3    7   11
# [4,]    4    8   12
#
# , , 2
#
#      [,1] [,2] [,3]
# [1,]   13   17   21
# [2,]   14   18   22
# [3,]   15   19   23
# [4,]   16   20   24

add_one_hundred &lt;- function(x) c(x, 100)

crunch:::applyAgainst(array, 1, add_one_hundred)
# , , 1
#
#      [,1] [,2] [,3]
# [1,]    1    5    9
# [2,]    2    6   10
# [3,]    3    7   11
# [4,]    4    8   12
# [5,]  100  100  100
#
# , , 2
#
#      [,1] [,2] [,3]
# [1,]   13   17   21
# [2,]   14   18   22
# [3,]   15   19   23
# [4,]   16   20   24
# [5,]  100  100  100

crunch:::applyAgainst(array, 2, add_one_hundred)
# , , 1
#
#      [,1] [,2] [,3] [,4]
# [1,]    1    5    9  100
# [2,]    2    6   10  100
# [3,]    3    7   11  100
# [4,]    4    8   12  100
#
# , , 2
#
#      [,1] [,2] [,3] [,4]
# [1,]   13   17   21  100
# [2,]   14   18   22  100
# [3,]   15   19   23  100
# [4,]   16   20   24  100

crunch:::applyAgainst(array, 3, add_one_hundred)
# , , 1
#
#      [,1] [,2] [,3]
# [1,]    1    5    9
# [2,]    2    6   10
# [3,]    3    7   11
# [4,]    4    8   12
#
# , , 2
#
#      [,1] [,2] [,3]
# [1,]   13   17   21
# [2,]   14   18   22
# [3,]   15   19   23
# [4,]   16   20   24
#
# , , 3
#
#      [,1] [,2] [,3]
# [1,]  100  100  100
# [2,]  100  100  100
# [3,]  100  100  100
# [4,]  100  100  100
</code></pre>

<hr>
<h2 id='archive-and-publish'>Get and set &quot;archived&quot; and &quot;published&quot; status of a dataset</h2><span id='topic+archive-and-publish'></span><span id='topic+archive'></span><span id='topic+is.archived'></span><span id='topic+is.draft'></span><span id='topic+is.published'></span><span id='topic+is.archived+3C-'></span><span id='topic+is.draft+3C-'></span><span id='topic+is.published+3C-'></span><span id='topic+publish'></span><span id='topic+is.archived+2CCrunchDataset-method'></span><span id='topic+is.draft+2CCrunchDataset-method'></span><span id='topic+is.published+2CCrunchDataset-method'></span><span id='topic+is.archived+3C-+2CCrunchDataset+2Clogical-method'></span><span id='topic+is.draft+3C-+2CCrunchDataset+2Clogical-method'></span><span id='topic+is.published+3C-+2CCrunchDataset+2Clogical-method'></span><span id='topic+is.archived+2CDatasetCatalog-method'></span><span id='topic+is.draft+2CDatasetCatalog-method'></span><span id='topic+is.published+2CDatasetCatalog-method'></span><span id='topic+is.archived+3C-+2CDatasetCatalog+2Clogical-method'></span><span id='topic+is.draft+3C-+2CDatasetCatalog+2Clogical-method'></span><span id='topic+is.published+3C-+2CDatasetCatalog+2Clogical-method'></span>

<h3>Description</h3>

<p>&quot;Archived&quot; datasets are excluded from some views. &quot;Draft&quot; datasets are
visible only to editors, while published datasets are available to all viewers.
A dataset can either be published or in draft, but not both.
These properties are accessed and set with the &quot;is&quot; methods. You can also
set the properties by assigning into the function. The verb functions
<code>archive</code> and <code>publish</code> are alternate versions of the setters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.archived(x)

is.archived(x) &lt;- value

is.draft(x)

is.draft(x) &lt;- value

is.published(x)

is.published(x) &lt;- value

## S4 method for signature 'CrunchDataset'
is.archived(x)

## S4 method for signature 'CrunchDataset'
is.draft(x)

## S4 method for signature 'CrunchDataset'
is.published(x)

## S4 replacement method for signature 'CrunchDataset,logical'
is.archived(x) &lt;- value

archive(x)

## S4 replacement method for signature 'CrunchDataset,logical'
is.draft(x) &lt;- value

## S4 replacement method for signature 'CrunchDataset,logical'
is.published(x) &lt;- value

publish(x)

## S4 method for signature 'DatasetCatalog'
is.archived(x)

## S4 method for signature 'DatasetCatalog'
is.draft(x)

## S4 method for signature 'DatasetCatalog'
is.published(x)

## S4 replacement method for signature 'DatasetCatalog,logical'
is.archived(x) &lt;- value

## S4 replacement method for signature 'DatasetCatalog,logical'
is.draft(x) &lt;- value

## S4 replacement method for signature 'DatasetCatalog,logical'
is.published(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="archive-and-publish_+3A_x">x</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="archive-and-publish_+3A_value">value</code></td>
<td>
<p>logical</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For the getters, the logical value of whether the dataset is
archived, in draft mode, or published, where draft and published are
inverses. The setters return the dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("mtcars")
is.draft(ds) # FALSE
is.published(ds) # TRUE
identical(is.draft(ds), !is.published(ds))
# Can make a dataset a "draft" by:
is.draft(ds) &lt;- TRUE
is.published(ds) # FALSE
# Could also have set is.published(ds) &lt;- FALSE
# Now, can go the other way by setting is.draft, is.published, or:
ds &lt;- publish(ds)
is.published(ds) # TRUE

is.archived(ds) # FALSE
is.archived(ds) &lt;- TRUE
is.archived(ds) # TRUE
# Could have achieved the same effect by:
ds &lt;- archive(ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='as-vector'>Convert Variables to local R objects</h2><span id='topic+as-vector'></span><span id='topic+as.vector'></span><span id='topic+as.vector+2CCrunchVariable-method'></span><span id='topic+as.vector+2CCrunchExpr-method'></span>

<h3>Description</h3>

<p>Crunch Variables reside on the server, allowing you to work with
datasets that are too big to bring into memory on your machine. Many
functions, such as <code>max</code>, <code>mean</code>, and <code><a href="#topic+crtabs">crtabs()</a></code>, translate your commands
into API queries and return only the result. But, not every operation you'll
want to perform has been implemented on the Crunch servers. If you need to do
something beyond what is currently supported, you can bring a variable's
data into R with <code>as.vector(ds$var)</code> and work with it like any
other R vector.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'CrunchVariable'
as.vector(x, mode = "any")

## S4 method for signature 'CrunchExpr'
as.vector(x, mode = "any")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as-vector_+3A_x">x</code></td>
<td>
<p>a CrunchVariable</p>
</td></tr>
<tr><td><code id="as-vector_+3A_mode">mode</code></td>
<td>
<p>for Categorical variables, one of either &quot;factor&quot; (default,
which returns the values as factor); &quot;numeric&quot; (which returns the numeric
values); or &quot;id&quot; (which returns the category ids). If &quot;id&quot;, values
corresponding to missing categories will return as the underlying integer
codes; i.e., the R representation will not have any <code>NA</code> elements. Otherwise,
missing categories will all be returned <code>NA</code>. For non-Categorical
variables, the <code>mode</code> argument is ignored.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>as.vector</code> transfers data from Crunch to a local R session. Note:
<code>as.vector</code> returns the vector in the row order of the dataset. If filters
are set that specify an order that is different from the row order of the
dataset, the results will ignore that order. If you need the vector ordered
in that way, use syntax like <code>as.vector(ds$var)[c(10, 5, 2)]</code> instead.
</p>


<h3>Value</h3>

<p>an R vector of the type corresponding to the Variable. E.g.
CategoricalVariable yields type factor by default, NumericVariable yields
numeric, etc.
</p>


<h3>See Also</h3>

<p><a href="#topic+as.data.frame.CrunchDataset">as.data.frame</a> for another interface
for (lazily) fetching data from the server as needed; <code><a href="#topic+exportDataset">exportDataset()</a></code> for
pulling all of the data from a dataset.
</p>

<hr>
<h2 id='as.environment+2CCrunchDataset-method'>as.environment method for CrunchDataset</h2><span id='topic+as.environment+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>This method allows you to <code>eval</code> within a Dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'CrunchDataset'
as.environment(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.environment+2B2CCrunchDataset-method_+3A_x">x</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an environment in which named objects are (promises that return)
CrunchVariables.
</p>

<hr>
<h2 id='as.Text'>as.* methods for variables</h2><span id='topic+as.Text'></span><span id='topic+as.Numeric'></span><span id='topic+as.Categorical'></span><span id='topic+as.Datetime'></span><span id='topic+variable-as-methods'></span><span id='topic+as.Numeric+2CCrunchVariable-method'></span><span id='topic+as.Text+2CCrunchVariable-method'></span><span id='topic+as.Categorical+2CCrunchVariable-method'></span><span id='topic+as.Datetime+2CCrunchVariable-method'></span><span id='topic+as.double.CrunchVariable'></span><span id='topic+as.character.CrunchVariable'></span><span id='topic+as.Numeric+2CCrunchExpr-method'></span><span id='topic+as.Text+2CCrunchExpr-method'></span><span id='topic+as.Categorical+2CCrunchExpr-method'></span><span id='topic+as.Datetime+2CCrunchExpr-method'></span><span id='topic+as.double.CrunchExpr'></span><span id='topic+as.character.CrunchExpr'></span>

<h3>Description</h3>

<p>Use the as.* family of functions to make a derived copy of a variable that
has been converted into a new type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.Text(x, ...)

as.Numeric(x)

as.Categorical(x, ...)

as.Datetime(x, format = "%Y-%m-%d %H:%M:%S", resolution, offset)

## S4 method for signature 'CrunchVariable'
as.Numeric(x)

## S4 method for signature 'CrunchVariable'
as.Text(x, format)

## S4 method for signature 'CrunchVariable'
as.Categorical(x, format)

## S4 method for signature 'CrunchVariable'
as.Datetime(x, format = "%Y-%m-%d %H:%M:%S", resolution, offset)

## S3 method for class 'CrunchVariable'
as.double(x, ...)

## S3 method for class 'CrunchVariable'
as.character(x, ...)

## S4 method for signature 'CrunchExpr'
as.Numeric(x)

## S4 method for signature 'CrunchExpr'
as.Text(x, format)

## S4 method for signature 'CrunchExpr'
as.Categorical(x, format)

## S4 method for signature 'CrunchExpr'
as.Datetime(x, format = "%Y-%m-%d %H:%M:%S", resolution, offset)

## S3 method for class 'CrunchExpr'
as.double(x, ...)

## S3 method for class 'CrunchExpr'
as.character(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.Text_+3A_x">x</code></td>
<td>
<p>a Crunch variable to derive and convert to a new type</p>
</td></tr>
<tr><td><code id="as.Text_+3A_...">...</code></td>
<td>
<p>additional arguments for <code>as.character</code> and <code>as.numeric</code>, ignored when used with
Crunch variables</p>
</td></tr>
<tr><td><code id="as.Text_+3A_format">format</code></td>
<td>
<p>for <code>as.Datetime</code>, when the variable in <code>x</code> is a text or
categorical variable, <code>format</code> is the typographical format that the datetime
is already formatted in that needs to be parse from (default:
<code>"%Y-%m-%d %H:%M:%S"</code>); for <code>as.Text</code> and  <code>as.Categorical</code>, is
the typographical format that the datetime is to be formatted as (e.g.
<code>"%Y-%m-%d %H:%M:%S"</code> for &quot;2018-01-08 12:39:57&quot;, the default if
no rollup resolution is specified on the source variable. If a rollup
resolution is specified, a reasonable default will be used.).</p>
</td></tr>
<tr><td><code id="as.Text_+3A_resolution">resolution</code></td>
<td>
<p>for <code>as.Datetime</code>, when the variable in <code>x</code> is a numeric
variable, the resolution of the number (e.g. <code>"ms"</code> for milliseconds, <code>"s"</code>
for seconds, etc. see <a href="#topic+expressions">expressions</a> for more information about valid values.)</p>
</td></tr>
<tr><td><code id="as.Text_+3A_offset">offset</code></td>
<td>
<p>for <code>as.Datetime</code>, when the variable in <code>x</code> is a numeric the, a
character of the offset to count from in the shape &quot;2018-01-08 12:39:57&quot;. If
not supplied, Crunch's default of 1970-01-01 00:00:00 will be used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each type of Crunch variable (text, numeric, categorical, etc.) has an <code style="white-space: pre;">&#8288;as.*&#8288;</code>
function (<code>as.Text</code>, <code>as.Numeric</code>, and <code>as.Categorical</code> respectively) that
takes the input given as <code>x</code>, and makes a new derived variable that is now of
the type specified. See below for detailed examples.
</p>
<p>For <code>as.Text</code> and <code>as.Numeric</code>, aliases to the R-native functions
<code>as.character</code> and <code>as.numeric</code> are provided for convenience.
</p>


<h3>Value</h3>

<p>a <code>CrunchExpr</code> to be used as the derivation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# ds$v1 is of type Text
is.Text(ds$v1)
# [1] TRUE

# that has strings of numbers
as.vector(ds$v1)
# [1] "32"   "8"    "4096" "1024"

# convert this to a numeric variable with the alias `v1_numeric`
ds$v1_numeric &lt;- as.Numeric(ds$v1)

# the values are the same, but are now numerics and the type is Numeric
as.vector(ds$v1_numeric)
# [1]   32    8 4096 1024
is.Numeric(ds$v1_numeric)
# [1] TRUE

# this new variable is derived, so if new data is appended or streamed, the
# new rows of data will be updated.
is.derived(ds$v1_numeric)
# [1] TRUE

## End(Not run)
</code></pre>

<hr>
<h2 id='automation-undo'>Undo behavior of a Crunch Automation Script</h2><span id='topic+automation-undo'></span><span id='topic+undoScript'></span><span id='topic+revertScript'></span><span id='topic+scriptSavepoint'></span><span id='topic+undoScript+2CCrunchDataset+2CScript-method'></span><span id='topic+undoScript+2CCrunchDataset+2CANY-method'></span><span id='topic+revertScript+2CCrunchDataset+2CScript-method'></span><span id='topic+revertScript+2CCrunchDataset+2CANY-method'></span><span id='topic+scriptSavepoint+2CScript-method'></span>

<h3>Description</h3>

<p>There are two ways to revert the output of a script:
</p>

<ul>
<li> <p><code>undoScript()</code> - A &quot;softer&quot; delete of a script's created artifacts and variables, or
</p>
</li>
<li> <p><code>revertScript()</code> - A &quot;harder&quot; revert that returns the dataset to the state it was before
running such script.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>undoScript(dataset, x)

revertScript(dataset, x)

scriptSavepoint(x)

## S4 method for signature 'CrunchDataset,Script'
undoScript(dataset, x)

## S4 method for signature 'CrunchDataset,ANY'
undoScript(dataset, x)

## S4 method for signature 'CrunchDataset,Script'
revertScript(dataset, x)

## S4 method for signature 'CrunchDataset,ANY'
revertScript(dataset, x)

## S4 method for signature 'Script'
scriptSavepoint(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="automation-undo_+3A_dataset">dataset</code></td>
<td>
<p>A <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="automation-undo_+3A_x">x</code></td>
<td>
<p>A <code>Script</code> or index for a <code>ScriptCatalog</code> (generally a number)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The difference between both is that a hard revert restores the dataset, as it drops all
ensuing scripts and their output (artifacts and variables), while an undo only deletes the
artifacts and variables created by this script, but changes made by other scripts and this
script's record will remain in place.
</p>
<p>The function <code>scriptSavepoint()</code> gets the version object
</p>


<h3>Value</h3>

<p>For <code>undoScript()</code> and <code>revertSctipt()</code>, invisibly return the updated dataset.
For <code>scriptSavePoint()</code> a version list object that can be used in <code><a href="#topic+restoreVersion">restoreVersion()</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runCrunchAutomation">runCrunchAutomation()</a></code> &amp; <code><a href="#topic+script-catalog">script-catalog</a></code>
</p>

<hr>
<h2 id='availableGeodataFeatures'>Get the property features for available geographies</h2><span id='topic+availableGeodataFeatures'></span>

<h3>Description</h3>

<p>Get the property features for available geographies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>availableGeodataFeatures(
  x = getAPIRoot(),
  geodatum_fields = c("name", "description", "location")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="availableGeodataFeatures_+3A_x">x</code></td>
<td>
<p>an API root address (default: the R-session default)</p>
</td></tr>
<tr><td><code id="availableGeodataFeatures_+3A_geodatum_fields">geodatum_fields</code></td>
<td>
<p>character, what pieces of information about each
geodatum should be retained? (default: 'c(&quot;name&quot;, &quot;description&quot;, &quot;location&quot;)&ldquo;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a dataframe with all of the available features and
geographies for matching
</p>

<hr>
<h2 id='batches'>See the appended batches of this dataset</h2><span id='topic+batches'></span>

<h3>Description</h3>

<p>See the appended batches of this dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batches(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batches_+3A_x">x</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>BatchCatalog</code>
</p>

<hr>
<h2 id='buildDelimRegex'>Build Regex to find  delimited items.</h2><span id='topic+buildDelimRegex'></span>

<h3>Description</h3>

<p>A delimited item <code>maple</code> can appear in a list in four ways
</p>

<ol>
<li><p> At the start of a list <code style="white-space: pre;">&#8288;maple; oak&#8288;</code>
</p>
</li>
<li><p> In the middle of a list <code style="white-space: pre;">&#8288;oak; maple; birch&#8288;</code>
</p>
</li>
<li><p> At the end of a list <code style="white-space: pre;">&#8288;oak; maple&#8288;</code>
</p>
</li>
<li><p> Alone with no delimiters <code>maple</code>
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>buildDelimRegex(str, delim)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="buildDelimRegex_+3A_str">str</code></td>
<td>
<p>A string whose presence indicates a selection</p>
</td></tr>
<tr><td><code id="buildDelimRegex_+3A_delim">delim</code></td>
<td>
<p>The delimiter separating the responses</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function builds a regex expression which captures those four cases It
is mostly broken out of <code><a href="#topic+createSubvarDeriv">createSubvarDeriv()</a></code> for testing purposes.
</p>


<h3>Value</h3>

<p>A character string
</p>

<hr>
<h2 id='c-categories'>S3 method to concatenate Categories and Category objects</h2><span id='topic+c-categories'></span><span id='topic+c.Categories'></span><span id='topic+c.Category'></span>

<h3>Description</h3>

<p>S3 method to concatenate Categories and Category objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Categories'
c(...)

## S3 method for class 'Category'
c(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="c-categories_+3A_...">...</code></td>
<td>
<p>see <code><a href="base.html#topic+c">c</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code><a href="#topic+Categories">Categories</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>cat.a &lt;- Category(name = "First", id = 1, numeric_value = 1, missing = FALSE)
cat.b &lt;- Category(name = "Second", id = 2)
cat.c &lt;- Category(name = "Third", id = 3, missing = TRUE)
cats.1 &lt;- Categories(cat.a, cat.b)
identical(cats.1, c(cat.a, cat.b))
identical(c(cats.1, cat.c), Categories(cat.a, cat.b, cat.c))
</code></pre>

<hr>
<h2 id='calcTransforms'>Given a vector of values and elements, calculate the insertions</h2><span id='topic+calcTransforms'></span><span id='topic+calcInsertions'></span>

<h3>Description</h3>

<p>Given a vector of values and elements, calculate the insertions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calcTransforms(array, insert_funcs, dim_names = names(insert_funcs))

calcInsertions(vec, insert_funcs, dim_names = names(insert_funcs))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="calcTransforms_+3A_insert_funcs">insert_funcs</code></td>
<td>
<p>a (named) list of functions that return the correct vector
of the array (with desired insertions and transformations included)</p>
</td></tr>
<tr><td><code id="calcTransforms_+3A_dim_names">dim_names</code></td>
<td>
<p>the names of the dimensions (although this is calculable at
call-time, it's much more efficient to provide this to the call)</p>
</td></tr>
<tr><td><code id="calcTransforms_+3A_vec">vec</code>, <code id="calcTransforms_+3A_array">array</code></td>
<td>
<p>values to transform (a single dimension of an array)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the values given in <code>vec</code>, with any insertions specified in
<code>trans</code> calculated and inserted
</p>

<hr>
<h2 id='catalog-dataframes'>as.data.frame method for catalog objects</h2><span id='topic+catalog-dataframes'></span><span id='topic+as.data.frame.VariableCatalog'></span><span id='topic+as.data.frame.ShojiCatalog'></span><span id='topic+as.data.frame.BatchCatalog'></span><span id='topic+as.data.frame.FilterCatalog'></span><span id='topic+as.data.frame.UserCatalog'></span>

<h3>Description</h3>

<p>This method gives you a view of a catalog, such as a <code>VariableCatalog</code>, as a
<code>data.frame</code> in order to facilitate further exploration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'VariableCatalog'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  keys = c("alias", "name", "type"),
  ...
)

## S3 method for class 'ShojiCatalog'
as.data.frame(x, row.names = NULL, optional = FALSE, ...)

## S3 method for class 'BatchCatalog'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  keys = c("id", "status"),
  ...
)

## S3 method for class 'FilterCatalog'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  keys = c("name", "id", "is_public"),
  ...
)

## S3 method for class 'UserCatalog'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  keys = c("name", "email", "teams", "collaborator"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catalog-dataframes_+3A_x">x</code></td>
<td>
<p>A catalog object</p>
</td></tr>
<tr><td><code id="catalog-dataframes_+3A_row.names">row.names</code></td>
<td>
<p>A character vector of elements to use as row labels for the
resulting data.frame, or <code>NULL</code>, the default, adds no row labels.</p>
</td></tr>
<tr><td><code id="catalog-dataframes_+3A_optional">optional</code></td>
<td>
<p>part of <code>as.data.frame</code> signature. Ignored.</p>
</td></tr>
<tr><td><code id="catalog-dataframes_+3A_keys">keys</code></td>
<td>
<p>A character vector of the catalog attributes that you
would like included in the data.frame. To include all attributes, set keys to
<code>TRUE</code>, which is the default for some catalogs. Other catalog classes specify
a narrower default:
</p>

<ul>
<li><p> VariableCatalog: <code>c("alias", "name", "type")</code>
</p>
</li>
<li><p> BatchCatalog: <code>c("id", "status")</code>
</p>
</li>
<li><p> FilterCatalog: <code>c("name", "id", "is_public")</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="catalog-dataframes_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>data.frame</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Modifying the <code>data.frame</code> produced by this function will not update the
objects on the Crunch server. Other methods exist for updating the metadata
in the variable catalog, for example. See <code>vingette("variables", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> including metadata about each entity contained in the
catalog. The fields in the data.frame match the <code>keys</code> argument
provided to the function, and each row represents a entity.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("iris")
vars &lt;- variables(ds)
var_df &lt;- as.data.frame(vars, keys = TRUE)
# With row names
as.data.frame(vars, row.names = urls(vars))

## End(Not run)

</code></pre>

<hr>
<h2 id='catalogToDataFrame'>A utility to return a data.frame from a ShojiCatalog.</h2><span id='topic+catalogToDataFrame'></span>

<h3>Description</h3>

<p>This is an internal function called by the various <code>as.data.frame</code> methods.
Use <code>as.data.frame</code> instead of calling this directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catalogToDataFrame(
  x,
  keys = TRUE,
  rownames = NULL,
  list_columns = c("subvariables", "subvariables_catalog"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catalogToDataFrame_+3A_x">x</code></td>
<td>
<p><code>ShojiCatalog</code> or subclass</p>
</td></tr>
<tr><td><code id="catalogToDataFrame_+3A_keys">keys</code></td>
<td>
<p>character vector of attribute names from each catalog tuple to
include in the result. Default is TRUE, which means all.</p>
</td></tr>
<tr><td><code id="catalogToDataFrame_+3A_rownames">rownames</code></td>
<td>
<p>See <code><a href="base.html#topic+data.frame">base::data.frame()</a></code> for the <code>row.names</code>
argument. The difference here is that if <code>rownames</code> is explicitly set as
<code>NULL</code>, the resulting object will not have row names set. By default, row
names will be the URLs of the catalog tuples.</p>
</td></tr>
<tr><td><code id="catalogToDataFrame_+3A_list_columns">list_columns</code></td>
<td>
<p>A character vector of the names of the attributes that
should be stored in a list-column. Currently ignored.</p>
</td></tr>
<tr><td><code id="catalogToDataFrame_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>data.frame</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Some of the attributes of a <code>ShojiCatalog</code> will not naturally fit in
a conventional data.frame. For example, an array variable contains a list of
subvariables, and these subvariables will not easily fit in a single row of a
data.frame. In this case, the list of subvariables are stored in a
list-column in the resulting data.frame.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> view of the catalog
</p>

<hr>
<h2 id='Categories-class'>Categories in CategoricalVariables</h2><span id='topic+Categories-class'></span><span id='topic+Categories'></span><span id='topic+Category-class'></span><span id='topic+Category'></span>

<h3>Description</h3>

<p>CategoricalVariables, as well as the array types composed from
Categoricals, contain Categories. Categories are a subclass of list that
contains only Category objects. Category objects are themselves subclasses of
lists and contain the following fields:
</p>

<ul>
<li><p> &quot;name&quot;: The name of the category, must be unique within a set of categories
</p>
</li>
<li><p> &quot;id&quot;: An integer that uniquely identifies the category
</p>
</li>
<li><p> &quot;numeric_value&quot;: A numeric value associated with the category (defaults to NA
meaning that no value is associated, <em>not</em> that the category is missing)
</p>
</li>
<li><p> &quot;missing&quot;: Logical indicating whether the category should be considered missing
(defaults to <code>FALSE</code>)
</p>
</li>
<li><p> &quot;selected&quot;: Logical indicating whether the category is selected or not (defaults
to <code>FALSE</code>)
</p>
</li>
<li><p> &quot;date&quot;: A string indicating a day or range of days that should be associated with the
category. Accepted formats are &quot;YYYY-MM-DD&quot; (&quot;2020-01-01&quot;) for a day,
&quot;YYYY-WXX&quot; (&quot;2020-W01&quot;) for an ISO week (a week that starts on a Monday,
with the first week of the year being the first week with more than 4 days in it),
&quot;YYYY-MM&quot; (&quot;2020-01&quot;) for a month, &quot;YYYY&quot; (&quot;2020&quot;) for a year, or
&quot;YYYY-MM-DD,YYYY-MM-DD&quot; (&quot;2020-01-01,2020-01-10&quot;) for a range of days.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>Categories(..., data = NULL)

Category(..., data = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Categories-class_+3A_...">...</code></td>
<td>
<p>Category attributes</p>
</td></tr>
<tr><td><code id="Categories-class_+3A_data">data</code></td>
<td>
<p>For the constructor functions <code>Category</code> and
<code>Categories</code>, you can either pass in attributes via <code>...</code> or you
can create the objects with a fully defined <code>list</code> representation of
the objects via the <code>data</code> argument. See the examples.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>cat.a &lt;- Category(name = "First", id = 1, numeric_value = 1, missing = FALSE)
cat.b &lt;- Category(data = list(name = "First", id = 1, numeric_value = 1, missing = FALSE))
identical(cat.a, cat.b)
cat.c &lt;- Category(name = "Second", id = 2)
cats.1 &lt;- Categories(cat.a, cat.c)
cats.2 &lt;- Categories(data = list(cat.a, cat.c))
identical(cats.1, cats.2)
</code></pre>

<hr>
<h2 id='categoriesFromLevels'>Convert a factor's levels into Crunch categories.</h2><span id='topic+categoriesFromLevels'></span>

<h3>Description</h3>

<p>Crunch categorical variables have slightly richer metadata than R's
factor variables. This function generates a list of category data from
a factor's levels which can then be further manipulated in R before being
imported into Crunch.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>categoriesFromLevels(level_vect)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="categoriesFromLevels_+3A_level_vect">level_vect</code></td>
<td>
<p>A character vector containing the levels of a factor. Usually
obtained by running <code><a href="base.html#topic+levels">base::levels()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with each category levels id, name, numeric_value, and missingness.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
categoriesFromLevels(levels(iris$Species))
</code></pre>

<hr>
<h2 id='cd'>Change to different folder</h2><span id='topic+cd'></span>

<h3>Description</h3>

<p>Like <code>cd</code> in a file system, this function takes you to a different folder,
given a relative path specification.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cd(x, path, create = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cd_+3A_x">x</code></td>
<td>
<p>A <code>CrunchDataset</code> or <code>Folder</code> (<code>VariableFolder</code> or <code>ProjectFolder</code>)</p>
</td></tr>
<tr><td><code id="cd_+3A_path">path</code></td>
<td>
<p>A character &quot;path&quot; to the folder: either a
vector of nested folder names or a single string with nested folders
separated by a delimiter (&quot;/&quot; default, configurable via
<code>options(crunch.delimiter)</code>). The path is interpreted as
relative to the location of the folder <code>x</code> (when <code>x</code> is a dataset, that
means the root, top-level folder). <code>path</code> may also be a <code>Folder</code> object.</p>
</td></tr>
<tr><td><code id="cd_+3A_create">create</code></td>
<td>
<p>logical: if the folder indicated by <code>path</code> does not exist,
should it be created? Default is <code>FALSE</code>. Argument mainly exists for the
convenience of <code>mv()</code>, which moves entities to a folder and ensures that
the folder exists. You can call <code>cd</code> directly with <code>create=TRUE</code>, though that
seems unnatural.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>Folder</code> (<code>VariableFolder</code> or <code>ProjectFolder</code>)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mv">mv()</a></code> to move entities to a folder; <code><a href="#topic+rmdir">rmdir()</a></code> to delete a folder;
<code><a href="base.html#topic+getwd">base::setwd()</a></code> if you literally want to change your working
directory in your local file system, which <code>cd()</code> does not do
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("Example survey")
demo &lt;- cd(ds, "Demographics")
names(demo)
# Or with %&gt;%
require(magrittr)
ds &lt;- ds %&gt;%
    cd("Demographics") %&gt;%
    names()
# Can combine with mv() and move things with relative paths
ds %&gt;%
    cd("Key Performance Indicators/Brand X") %&gt;%
    mv("nps_x", "../Net Promoters")

## End(Not run)
</code></pre>

<hr>
<h2 id='changeCategoryID'>Change the id of a category for a categorical variable</h2><span id='topic+changeCategoryID'></span>

<h3>Description</h3>

<p>Changes the id of a category from an existing value to a new one. The
variable can be a categorical, categorical array, or multiple response
variable. The category changed will have the same numeric value and missing
status as before. The one exception to this is if the numeric value is the
same as the id, then the new numeric value will be the same as the new id.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>changeCategoryID(variable, from, to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="changeCategoryID_+3A_variable">variable</code></td>
<td>
<p>the variable in a crunch dataset that will be changed (note:
the variable must be categorical, categorical array, or multiple response)</p>
</td></tr>
<tr><td><code id="changeCategoryID_+3A_from">from</code></td>
<td>
<p>the (old) id identifying the category you want to change</p>
</td></tr>
<tr><td><code id="changeCategoryID_+3A_to">to</code></td>
<td>
<p>the (new) id for the category</p>
</td></tr>
</table>


<h3>Details</h3>

<p>It is highly recommended to disable any exclusion filter before using
<code>changeCategoryID</code>, especially if it is being called multiple times in quick
succession (e.g. as part of an automated script). If a problematic exclusion
is encountered <code>changeCategoryID</code> will attempt to disable and re-enable the
exclusion, but that process will be repeated for every call made which could
have adverse consequences (not to mention slow down processing time).
</p>


<h3>Value</h3>

<p><code>variable</code> with category <code>from</code> and all associated data values mapped
to id <code>to</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds$country &lt;- changeCategoryID(ds$country, 2, 6)

## End(Not run)
</code></pre>

<hr>
<h2 id='check_margins'>Check validity of margins</h2><span id='topic+check_margins'></span>

<h3>Description</h3>

<p>A helper function to check if margins supplied are compatible with the
dimensions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_margins(margin, selecteds)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_margins_+3A_margin">margin</code></td>
<td>
<p>the margin(s) being specified</p>
</td></tr>
<tr><td><code id="check_margins_+3A_selecteds">selecteds</code></td>
<td>
<p>which dimensions are selected</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None
</p>

<hr>
<h2 id='checkInstalledPackages'>Check if a user has packages installed</h2><span id='topic+checkInstalledPackages'></span>

<h3>Description</h3>

<p>Check if a user has packages installed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>checkInstalledPackages(pkgs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="checkInstalledPackages_+3A_pkgs">pkgs</code></td>
<td>
<p>a character vector of package names to check.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing, called for side effects
</p>

<hr>
<h2 id='cleanseBatches'>Remove batches from a dataset</h2><span id='topic+cleanseBatches'></span>

<h3>Description</h3>

<p>Sometimes append operations do not succeed, whether due to conflicts between
the two datasets or other server-side issues. Failed appends can leave behind
&quot;error&quot; status batch records, which can cause confusion. This function lets
you delete batches that don't match the status or statuses you want to keep.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanseBatches(dataset, keep = c("imported", "appended"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleanseBatches_+3A_dataset">dataset</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="cleanseBatches_+3A_keep">keep</code></td>
<td>
<p>character the statuses that you want to keep. By default, batches
that don't have either &quot;imported&quot; or &quot;appended&quot; status will be deleted.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataset</code> with the specified batches removed.
</p>

<hr>
<h2 id='collapse_dims'>Collapse an array from a CrunchCube by summing</h2><span id='topic+collapse_dims'></span>

<h3>Description</h3>

<p>This is an internal function that powers <code>dimSums()</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapse_dims(array_in, margins_to_collapse, collapsed_items)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="collapse_dims_+3A_array_in">array_in</code></td>
<td>
<p>the array from a CrunchCube to collapse</p>
</td></tr>
<tr><td><code id="collapse_dims_+3A_margins_to_collapse">margins_to_collapse</code></td>
<td>
<p>the margins that should be collapsed</p>
</td></tr>
<tr><td><code id="collapse_dims_+3A_collapsed_items">collapsed_items</code></td>
<td>
<p>vector of logicals if any of the dimensions in
<code>margins_to_collapse</code> are of the <code style="white-space: pre;">&#8288;_items&#8288;</code> type</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a duly-collapsed array
</p>

<hr>
<h2 id='collapseCategories'>Combine Categories in place</h2><span id='topic+collapseCategories'></span>

<h3>Description</h3>

<p>This function allows you to combine the categories of a variable without
making a copy of the variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>collapseCategories(var, from, to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="collapseCategories_+3A_var">var</code></td>
<td>
<p>A categorical Crunch variable</p>
</td></tr>
<tr><td><code id="collapseCategories_+3A_from">from</code></td>
<td>
<p>A character vector of categories you want to combine.</p>
</td></tr>
<tr><td><code id="collapseCategories_+3A_to">to</code></td>
<td>
<p>A character string with the destination category.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the variable duly modified
</p>


<h3>See Also</h3>

<p><code><a href="#topic+combine">combine()</a></code>
</p>

<hr>
<h2 id='combine'>Combine categories or responses</h2><span id='topic+combine'></span><span id='topic+combineCategories'></span><span id='topic+combineResponses'></span>

<h3>Description</h3>

<p>Crunch allows you to create a new categorical variable by combining
the categories of another variable. For instance, you might want to
recode a categorical variable with three categories small, medium, and large
to one that has just small and large.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>combine(variable, combinations = list(), ...)

combineCategories(variable, combinations = list(), ...)

combineResponses(variable, combinations = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="combine_+3A_variable">variable</code></td>
<td>
<p>Categorical, Categorical Array, or Multiple Response
variable</p>
</td></tr>
<tr><td><code id="combine_+3A_combinations">combinations</code></td>
<td>
<p>list of named lists containing
</p>

<ol>
<li><p> &quot;categories&quot;: category ids or names for categorical types, or for multiple response,
&quot;responses&quot;: subvariable names, aliases, or positional indices;
</p>
</li>
<li><p> a &quot;name&quot; for the new category or response; and
</p>
</li>
<li><p> optionally, other category (&quot;missing&quot;, &quot;numeric_value&quot;) or subvariable
(&quot;alias&quot;, &quot;description&quot;) attributes. If <code>combinations</code> is omitted, the resulting variable will
essentially be a copy (but see <code><a href="#topic+copy">copy()</a></code> for a more natural way to copy variables.
</p>
</li></ol>
</td></tr>
<tr><td><code id="combine_+3A_...">...</code></td>
<td>
<p>Additional variable metadata for the new derived variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Categorical and categorical array variables can have their
categories combined (by specifying <code>categories</code> in the <code>combinations</code>
argument). Multiple response variables can only have their responses (or
items) combined (by specifying <code>responses</code> in the <code>combinations</code> argument).
Categorical array items are not able to be combined together (even by
specifying <code>responses</code>).
</p>
<p><code>dplyr</code> users may experience a name conflict between <code>crunch::combine()</code> and
<code>dplyr:: combine()</code>. To avoid this, you can either explicitly use the
<code style="white-space: pre;">&#8288;crunch::&#8288;</code> prefix, or you can call <code>combineCategories()</code> and
<code>combineResponses()</code>, provided for disambiguation.
</p>


<h3>Value</h3>

<p>A <code><a href="#topic+VariableDefinition">VariableDefinition</a></code> that will create the new combined-category or
-response derived variable. Categories/responses not referenced in <code>combinations</code> will be
appended to the end of the combinations.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds$fav_pet2 &lt;- combine(ds$fav_pet,
    name = "Pets (combined)",
    combinations = list(
        list(name = "Mammals", categories = c("Cat", "Dog")),
        list(name = "Reptiles", categories = c("Snake", "Lizard"))
    )
)
ds$pets_owned2 &lt;- combine(ds$allpets,
    name = "Pets owned (collapsed)",
    combinations = list(list(name = "Mammals", responses = c("Cat", "Dog")))
)

## End(Not run)
</code></pre>

<hr>
<h2 id='compareDatasets'>Compare two datasets to see how they will append</h2><span id='topic+compareDatasets'></span>

<h3>Description</h3>

<p>When one dataset is appended to another, variables and subvariables are
matched on their aliases, and then categories for variables that have them
are matched on category name. This function lines up the metadata between
two datasets as the append operation will so that you can inspect how well
the datasets will align before you do the append.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compareDatasets(A, B)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compareDatasets_+3A_a">A</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="compareDatasets_+3A_b">B</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calling <code>summary</code> on the return of this function will print an
overview of places where the matching on variable alias and category name
may lead to undesired outcomes, enabling you to alter one or both datasets
to result in better alignment.
</p>


<h3>Value</h3>

<p>An object of class 'compareDatasets', a list of three elements: (1)
'variables', a data.frame of variable metadata joined on alias; (2)
'categories', a list of data.frames of category metadata joined on category
name, one for each variable with categories; and (3) 'subvariables', a
list of data.frames of subvariable metadata joined on alias, one for each
array variable.
</p>
<p>Summary output reports on (1) variables that, when matched across datasets
by alias, have different types; (2) variables that have the same name but
don't match on alias; (3) for variables that match and have categories,
any categories that have the same id but don't match on name; (4) for
array variables that match, any subvariables that have the same name but
don't match on alias; and (5) array variables that, after assembling the
union of their subvariables, point to subvariables that belong to other
arrays.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
comp &lt;- compareDataset(ds1, ds2)
summary(comp)

## End(Not run)
</code></pre>

<hr>
<h2 id='conditionalTransform'>Conditional transformation</h2><span id='topic+conditionalTransform'></span>

<h3>Description</h3>

<p>Create a new variable that has values when specific conditions are met.
Conditions are specified using a series of formulas: the left-hand side is
the condition that must be true (a <code>CrunchLogicalExpr</code>) and the right-hand
side is where to get the value if the condition on the left-hand side is
true. This is commonly a Crunch variable but may be a string or numeric
value, depending on the type of variable you're constructing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>conditionalTransform(
  ...,
  data,
  else_condition = NA,
  type = NULL,
  categories = NULL,
  formulas = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="conditionalTransform_+3A_...">...</code></td>
<td>
<p>a list of conditions to evaluate (as formulas, see Details) as well as
other properties to pass to the new conditional variable (i.e. alias, description)</p>
</td></tr>
<tr><td><code id="conditionalTransform_+3A_data">data</code></td>
<td>
<p>a Crunch dataset object to use</p>
</td></tr>
<tr><td><code id="conditionalTransform_+3A_else_condition">else_condition</code></td>
<td>
<p>a default value to use if none of the conditions are
true (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="conditionalTransform_+3A_type">type</code></td>
<td>
<p>a character that is either &quot;categorical&quot;, &quot;text&quot;, &quot;numeric&quot; what
type of output should be returned? If <code>NULL</code>, the type of the source
variable will be used. (default: <code>NULL</code>) The source variables will be
converted to this type if necessary.</p>
</td></tr>
<tr><td><code id="conditionalTransform_+3A_categories">categories</code></td>
<td>
<p>a vector of characters if <code>type="categorical"</code>, these are
all of the categories that should be in the resulting variable, in the order
they should be in the resulting variable or a set of Crunch categories.</p>
</td></tr>
<tr><td><code id="conditionalTransform_+3A_formulas">formulas</code></td>
<td>
<p>a list of conditions to evaluate (as formulas, see Details). If
specified, <code>...</code> must not contain other formulas specifying conditions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The type of the new variable can depend on the type(s) of the source
variable(s).  By default (<code>type=NULL</code>), the type of the new variable will be
the type of all of the source variables (that is, if all of the source
variables are text, the new variable type will be text, if all of the
source variables are categorical, the new variable will be categorical).
If there are multiple types in the source variables, the result will be a
text variable. The default behavior can be overridden by specifying
<code>type = "categorical"</code>, <code>"text"</code>, or <code>"numeric"</code>.
</p>
<p><code>conditionalTransform</code> is similar to <code>makeCaseVariable</code>; however,
<code>conditionalTransform</code> can use other Crunch variables as a source of a
variable, whereas, <code>makeCaseVariable</code> can only use characters. This
additional power comes at a cost: <code>makeCaseVariable</code> can be executed
entirely on Crunch servers, so no data needs to be downloaded or uploaded
to/from the local R session. <code>conditionalTransform</code> on the other hand will
download the data necessary to construct the new variable.
</p>


<h3>Value</h3>

<p>a Crunch <code>VariableDefinition</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

ds$cat_opinion &lt;- conditionalTransform(pet1 == "Cat" ~ Opinion1,
    pet2 == "Cat" ~ Opinion2,
    pet3 == "Cat" ~ Opinion3,
    data = ds,
    name = "Opinion of Cats"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='consent'>Give consent to do things that require permission</h2><span id='topic+consent'></span><span id='topic+with_consent'></span>

<h3>Description</h3>

<p>Potentially destructive actions require that you confirm that you really
want to do them. If you're running a script and you know that you want to
perform those actions, you can preemptively provide <code>consent</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>consent()

with_consent(expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="consent_+3A_expr">expr</code></td>
<td>
<p>Code to evaluate with consent</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>consent</code> returns an S3 class &quot;contextManager&quot; object, which
you can use with <code>with</code>. <code>with_consent</code> evaluates its arguments
inside the <code>consent</code> context.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+with-context-manager">with-context-manager</a></code> <code><a href="#topic+ContextManager">ContextManager</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
with(consent(), delete(ds))
# Equivalent to:
with_consent(delete(ds))

## End(Not run)
</code></pre>

<hr>
<h2 id='ContextManager'>Context managers</h2><span id='topic+ContextManager'></span><span id='topic+contextManager'></span>

<h3>Description</h3>

<p>Context managers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ContextManager(
  enter = function() {
 },
  exit = function() {
 },
  error = NULL,
  as = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ContextManager_+3A_enter">enter</code></td>
<td>
<p>function to run before taking actions</p>
</td></tr>
<tr><td><code id="ContextManager_+3A_exit">exit</code></td>
<td>
<p>function to run after taking actions</p>
</td></tr>
<tr><td><code id="ContextManager_+3A_error">error</code></td>
<td>
<p>optional function to run if an error is thrown</p>
</td></tr>
<tr><td><code id="ContextManager_+3A_as">as</code></td>
<td>
<p>character optional way to specify a default name for assigning
the return of the enter function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an S3 class &quot;contextManager&quot; object
</p>


<h3>See Also</h3>

<p><code>with-context-manager</code>
</p>

<hr>
<h2 id='copyFolders'>Copy the folder structure from one dataset to another.</h2><span id='topic+copyFolders'></span>

<h3>Description</h3>

<p>Copy the folder structure from one dataset to another.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyFolders(source, target)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyFolders_+3A_source">source</code></td>
<td>
<p>the dataset you want to copy the order from</p>
</td></tr>
<tr><td><code id="copyFolders_+3A_target">target</code></td>
<td>
<p>the dataset you want to copy the order to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns the target dataset with source's folder structure
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- copyFolders(ds1, ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='copyOrder'>Copy the variable order from one dataset to another.</h2><span id='topic+copyOrder'></span>

<h3>Description</h3>

<p><code>copyOrder</code> is deprecated and will be removed in a future version. Instead,
you should use the <code><a href="#topic+copyFolders">copyFolders</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyOrder(source, target)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyOrder_+3A_source">source</code></td>
<td>
<p>the dataset you wan to copy the order from</p>
</td></tr>
<tr><td><code id="copyOrder_+3A_target">target</code></td>
<td>
<p>the dataset you want to copy the order to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns an object of class <code><a href="#topic+VariableOrder">VariableOrder</a></code> (which can be assigned
to a dataset with <code><a href="#topic+ordering">ordering</a></code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ordering(ds) &lt;- copyOrder(ds1, ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='copyOrderGroup'>Copy the order of a <code>VariableGroup</code> (or individual variable URL) from <code>VariableOrder</code></h2><span id='topic+copyOrderGroup'></span>

<h3>Description</h3>

<p>Copy the order of a <code>VariableGroup</code> (or individual variable URL) from <code>VariableOrder</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyOrderGroup(group, source_map, target_map)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyOrderGroup_+3A_group">group</code></td>
<td>
<p>the group or variable URL to be copied</p>
</td></tr>
<tr><td><code id="copyOrderGroup_+3A_source_map">source_map</code></td>
<td>
<p>url to alias map for source variables</p>
</td></tr>
<tr><td><code id="copyOrderGroup_+3A_target_map">target_map</code></td>
<td>
<p>alias to url map for target variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns either a <code><a href="#topic+VariableGroup">VariableGroup</a></code> (if a group is supplied) or a URL
(if just a variable URL is supplied)
</p>

<hr>
<h2 id='copyVariable'>Copy a variable</h2><span id='topic+copyVariable'></span><span id='topic+copy'></span>

<h3>Description</h3>

<p>Makes a copy of a Crunch variable on the server.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyVariable(x, deep = FALSE, ...)

copy(x, deep = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyVariable_+3A_x">x</code></td>
<td>
<p>a CrunchVariable to copy</p>
</td></tr>
<tr><td><code id="copyVariable_+3A_deep">deep</code></td>
<td>
<p>logical: should this be a deep copy, in which there is no
dependence on the original variable, or a shallow one, in which the copy
is more of a symbolic link? Default is <code>FALSE</code>, meaning symlink.</p>
</td></tr>
<tr><td><code id="copyVariable_+3A_...">...</code></td>
<td>
<p>Additional metadata to give to the new variable. If not given,
the new variable will have a name that is the same as the original but with
&quot; (copy)&quot; appended, and its alias will be the old alias with &quot;_copy&quot;
appended.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Copies can be shallow (linked) or deep. Shallow copying is faster and is preferable
unless a true hard copy is required. Shallow copies are effectively pointers to the
original variable, and then you append data to the original
variable or otherwise alter its values, the values in the copy automatically
update. This linking may be desirable, but it comes with some limitations.
First, you cannot edit the values of the copy independently of the original.
Second, some attributes of the copy are immutable: of note, properties of
categories cannot be altered independently in the copy, but you can alter Subvariable names and
ordering within arrays.
</p>


<h3>Value</h3>

<p>a VariableDefinition for the copied variable. Assign into a Dataset
to make the copy happen.
</p>

<hr>
<h2 id='createDataset'>Create an empty dataset</h2><span id='topic+createDataset'></span>

<h3>Description</h3>

<p>Use only if you're writing a function to create a Crunch dataset from a
custom data structure. If you have a <code>data.frame</code>, just call
<code><a href="#topic+newDataset">newDataset()</a></code> on it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createDataset(name, body, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createDataset_+3A_name">name</code></td>
<td>
<p>character, the name to give the new Crunch dataset. This is
required.</p>
</td></tr>
<tr><td><code id="createDataset_+3A_body">body</code></td>
<td>
<p>list correctly formatted metadata definition for a dataset. See
the <a href="https://crunch.io/api/reference/#post-/datasets/">Crunch API documentation</a>.</p>
</td></tr>
<tr><td><code id="createDataset_+3A_...">...</code></td>
<td>
<p>additional arguments for the POST to create the dataset, such as
&quot;description&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class CrunchDataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newDataset">newDataset()</a></code>
</p>

<hr>
<h2 id='createSubvarDeriv'>Create subvariable derivation expressions</h2><span id='topic+createSubvarDeriv'></span>

<h3>Description</h3>

<p>This function creates a single subvariable definition based on a character string
to search for and an originating variable. It uses regex to determine whether
a string is present in a delimited list, then substitutes the user supplied values
to indicate selection, non-selection, and missingness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSubvarDeriv(var, str, delim, selected, not_selected, unanswered)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createSubvarDeriv_+3A_var">var</code></td>
<td>
<p>The variable containing the delimited responses</p>
</td></tr>
<tr><td><code id="createSubvarDeriv_+3A_str">str</code></td>
<td>
<p>A string whose presence indicates a selection</p>
</td></tr>
<tr><td><code id="createSubvarDeriv_+3A_delim">delim</code></td>
<td>
<p>The delimiter separating the responses</p>
</td></tr>
<tr><td><code id="createSubvarDeriv_+3A_selected">selected</code></td>
<td>
<p>A character string used to indicate a selection, defaults to
&quot;selected&quot;</p>
</td></tr>
<tr><td><code id="createSubvarDeriv_+3A_not_selected">not_selected</code></td>
<td>
<p>Character string identifying non-selection, defaults to
&quot;not_selected&quot;</p>
</td></tr>
<tr><td><code id="createSubvarDeriv_+3A_unanswered">unanswered</code></td>
<td>
<p>Character string indicating non-response, defaults to NA.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A VariableDefinition
</p>

<hr>
<h2 id='createWithMetadataAndFile'>Make a dataset with metadata and a CSV</h2><span id='topic+createWithMetadataAndFile'></span>

<h3>Description</h3>

<p>This function just takes what you give it and POSTs to Crunch. No
validation, no automatic wrapping in the Shoji envelope, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createWithMetadataAndFile(metadata, file, strict = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createWithMetadataAndFile_+3A_metadata">metadata</code></td>
<td>
<p>a list representation of the dataset's metadata, which
will be JSON-serialized and POSTed.</p>
</td></tr>
<tr><td><code id="createWithMetadataAndFile_+3A_file">file</code></td>
<td>
<p>a path to a CSV file, optionally zipped, that corresponds to
the above metadata.</p>
</td></tr>
<tr><td><code id="createWithMetadataAndFile_+3A_strict">strict</code></td>
<td>
<p>logical: must the metadata exactly match the data? Default is
TRUE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>On success, a new dataset.
</p>

<hr>
<h2 id='createWithPreparedData'>Upload a prepared data.frame with metadata to Crunch</h2><span id='topic+createWithPreparedData'></span>

<h3>Description</h3>

<p>If you have manually created a Crunch dataset object with <code><a href="#topic+prepareDataForCrunch">prepareDataForCrunch()</a></code>
this function allows you to upload it to the app.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createWithPreparedData(data, metadata = attr(data, "metadata"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createWithPreparedData_+3A_data">data</code></td>
<td>
<p>a data.frame that meets the Crunch API specification, as returned
by <code><a href="#topic+prepareDataForCrunch">prepareDataForCrunch()</a></code>, or a character path to a file or URL
where such data has been written as CSV.</p>
</td></tr>
<tr><td><code id="createWithPreparedData_+3A_metadata">metadata</code></td>
<td>
<p>list of Crunch metadata that corresponds to <code>data</code>.
Default is the &quot;metadata&quot; attribute of <code>data</code>, as returned by
<code>prepareDataForCrunch</code>, or a character path to a file where such
metadata has been written as JSON.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A CrunchDataset.
</p>

<hr>
<h2 id='crtabs'>Crunch xtabs: Crosstab and otherwise aggregate variables in a Crunch Dataset</h2><span id='topic+crtabs'></span>

<h3>Description</h3>

<p>Create a contingency table or other aggregation from cross-classifying
variables in a CrunchDataset, expanding on the notation allowed in
<code><a href="stats.html#topic+xtabs">stats::xtabs()</a></code> to tailor to the kinds of calculations available in crunch.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crtabs(
  formula,
  data,
  weight = crunch::weight(data),
  useNA = c("no", "ifany", "always")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crtabs_+3A_formula">formula</code></td>
<td>
<p>a <a href="stats.html#topic+formula">stats::formula</a> object that specifies that query
to calculate. See Details for more information.</p>
</td></tr>
<tr><td><code id="crtabs_+3A_data">data</code></td>
<td>
<p>an object of class <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="crtabs_+3A_weight">weight</code></td>
<td>
<p>a CrunchVariable that has been designated as a potential
weight variable for <code>data</code>, or <code>NULL</code> for unweighted results.
Default is the currently applied <code><a href="#topic+weight">weight()</a></code>.</p>
</td></tr>
<tr><td><code id="crtabs_+3A_usena">useNA</code></td>
<td>
<p>whether to include missing values in tabular results. See
<code><a href="base.html#topic+table">base::table()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are 3 types of queries supported:
</p>

<ul>
<li><p> Crosstabs: Share the most in common with <code><a href="stats.html#topic+xtabs">stats::xtabs()</a></code>, are defined by
a formula with only a right hand side, with each dimension specified on the
right-hand side, separated by a <code>+</code>. A dimension are generally variables, but
categorical array variables contribute 2 dimensions, &ldquo;categories&rdquo; and
&ldquo;subvariables&rdquo;.
If you just use the categorical array variable directly, the subvariables dimensions
will be added first and the categories second, but you can choose their order by
specifying both <code>categories(var)</code> and <code>subvariables(var)</code> (where <code>var</code> is a
Categorical Array CrunchVariable).
</p>
</li>
<li><p> Aggregations: An extension to 'Crosstabs' where you can select one or more
measures by putting them in the left-hand side of the formula. Multiple measures
can be placed in a list to calculate them together. The currently supported
measures are <code>mean(var)</code>, <code>n()</code> (the same as a crosstab), <code>min(var)</code>, <code>max(var)</code>,
<code>sd(var)</code>, <code>sum(var)</code> and <code>median(var)</code> (where <code>var</code> is a CrunchVariable).
</p>
</li>
<li><p> Scorecards: When you want to compare multiple MR variables with the same
subvariables, you can use a scorecard to create a tabulation where they are
lined up. Scorecard queries cannot be combined with the other types. Use
the <code>scorecard(..., vars = NULL)</code> (where <code>...</code> is a set of MR variables or
<code>vars</code> is a list of them).
</p>
</li></ul>



<h3>Value</h3>

<p>an object of class <code>CrunchCube</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weight">weight()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Crosstab of people by `age_cat`:
crtabs(~age_cat, ds)

# Aggregation of means of income by `age_cat`
crtabs(mean(income) ~ age_cat, ds)

# Scorecard of multiple MRs with aligned subvariables
crtabs(~scorecard(trust_mr, value_mr, quality_mr), ds)
# Can also pre-define the variables in a scorecard with
mr_list &lt;- list(ds$trust_mr, ds$value_mr, ds$quality_mr)
crtabs(~scorecard(vars = mr_list), ds)

# Crosstab of people by `age_cat` and the reasons for enjoying a brand (cat array)
crtabs(~age_cat + enjoy_array, ds)

# Crosstab of people by `age_cat` and the `enjoy_array` (cat array)
# But manually choosing the order of the dimensions
crtabs(~subvariables(enjoy_array) + age_cat + categories(enjoy_array), ds)

# Aggregation of means &amp; standard deviations of income by `age_cat`
crtabs(list(mean = mean(income), sd = sd(income)) ~ age_cat, ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='crunch_sitrep'>Crunch situation report</h2><span id='topic+crunch_sitrep'></span>

<h3>Description</h3>

<p>Get a  situation report on how R will connect to crunch.io
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crunch_sitrep(redact = TRUE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunch_sitrep_+3A_redact">redact</code></td>
<td>
<p>Whether to redact the API key found (default TRUE)</p>
</td></tr>
<tr><td><code id="crunch_sitrep_+3A_verbose">verbose</code></td>
<td>
<p>Whether to print information to the console (default TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, a list with information about the API
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
crunch_sitrep()

## End(Not run)
</code></pre>

<hr>
<h2 id='crunch_user_agent'>Generate or extend the User-Agent string</h2><span id='topic+crunch_user_agent'></span>

<h3>Description</h3>

<p>By default, the names and versions of curl, httr, and any attached Crunch
packages are included in the User-Agent request header. You can add to this
using this function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crunch_user_agent(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunch_user_agent_+3A_...">...</code></td>
<td>
<p>Additional character terms to add to the User-Agent string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The User-Agent string. Provide this appropriately in requests or set
globally with <code><a href="#topic+set_crunch_config">set_crunch_config()</a></code>.
</p>

<hr>
<h2 id='crunch-api-key'>Crunch API Keys</h2><span id='topic+crunch-api-key'></span>

<h3>Description</h3>

<p>The rcrunch package recommends using API keys for authentication.
</p>


<h3>Details</h3>

<p>To get an API key for your account, follow the instructions in the
<a href="https://help.crunch.io/hc/en-us/articles/4415963337869-API-Keys">crunch help desk</a>
</p>
<p>The rcrunch package looks for the key in the environmental variable
&quot;R_CRUNCH_API_KEY&quot; or the option &quot;crunch.api.key&quot; (see <code><a href="#topic+envOrOption">envOrOption()</a></code>
for details).
</p>
<p>One way to establish your key is to add it to your &quot;.Renviron&quot;
file. This file is located in your home directory (you can
use <code>usethis::edit_r_environ()</code> to open the file if you have the
<code>usethis</code> package installed). The .Renviron file has the name of the
environment variable, followed by an equal sign and then the value. It
is good practice to set the API host too, (usually equal to
&quot;https://app.crunch.io/api/&quot;).
</p>
<div class="sourceCode"><pre>R_CRUNCH_API=https://app.crunch.io/api/
R_CRUNCH_API_KEY=YOUR_SECRET_KEY
</pre></div>
<p>You can either restart your session, or run <code>readRenviron("~/.Renviron")</code>
and then rcrunch will know to use your key going forward.
</p>

<hr>
<h2 id='crunch-extract'>Extract and modify Crunch objects</h2><span id='topic+crunch-extract'></span><span id='topic++5B+2CAbstractCategories+2CANY+2CANY-method'></span><span id='topic++5B+2CAbstractCategories+2Ccharacter+2CANY-method'></span><span id='topic++5B+2CAbstractCategories+2Cnumeric+2CANY-method'></span><span id='topic++5B+3C-+2CAbstractCategories+2Ccharacter+2CANY+2CANY-method'></span><span id='topic++5B+5B+2CAbstractCategories+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2CAbstractCategories+2Ccharacter+2CANY+2CANY-method'></span><span id='topic++24+2CAbstractCategory-method'></span><span id='topic++24+3C-+2CAbstractCategory-method'></span><span id='topic++5B+5B+2CScriptCatalog+2Cnumeric-method'></span><span id='topic++5B+3C-+2CCategories+2CANY+2CANY+2CANY-method'></span><span id='topic++5B.CrunchDataFrame'></span><span id='topic++5B+3C-.CrunchDataFrame'></span><span id='topic++5B+5B.CrunchDataFrame'></span><span id='topic++5B+5B+3C-.CrunchDataFrame'></span><span id='topic++24.CrunchDataFrame'></span><span id='topic++24+3C-.CrunchDataFrame'></span><span id='topic++5B+2CCubeDims+2CANY+2CANY-method'></span><span id='topic++5B+2CCrunchCube+2CANY+2CANY-method'></span><span id='topic++5B+5B+3C-+2CTransformsList+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+2CDatasetCatalog+2Cnumeric-method'></span><span id='topic++5B+5B+3C-+2CDatasetCatalog+2Ccharacter+2Cmissing+2CDatasetTuple-method'></span><span id='topic++5B+2CCrunchDataset+2CANY+2CANY-method'></span><span id='topic++5B+2CCrunchDataset+2Clogical+2Cmissing-method'></span><span id='topic++5B+2CCrunchDataset+2Ccharacter+2CANY-method'></span><span id='topic++5B+2CCrunchDataset+2CVariableGroup+2CANY-method'></span><span id='topic++5B+2CCrunchDataset+2CVariableOrder+2CANY-method'></span><span id='topic++5B+2CCrunchDataset+2Cmissing+2CANY-method'></span><span id='topic++5B+2CCrunchDataset+2CCrunchLogicalExpr+2Cmissing-method'></span><span id='topic++5B+2CCrunchDataset+2CCrunchLogicalExpr+2CANY-method'></span><span id='topic+subset+2CCrunchDataset-method'></span><span id='topic++5B+5B+2CCrunchDataset+2CANY-method'></span><span id='topic++5B+5B+2CCrunchDataset+2Ccharacter-method'></span><span id='topic++24+2CCrunchDataset-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2Ccharacter+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2CANY+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2Ccharacter+2Cmissing+2CANY-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2Ccharacter+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++24+3C-+2CCrunchDataset-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2Ccharacter+2Cmissing+2CCrunchGeography-method'></span><span id='topic++5B+5B+3C-+2CCrunchDataset+2CANY+2Cmissing+2CCrunchGeography-method'></span><span id='topic++5B+3C-+2CCrunchDataset+2CANY+2Cmissing+2Clist-method'></span><span id='topic++5B+3C-+2CCrunchDataset+2CANY+2Cmissing+2CCrunchDataset-method'></span><span id='topic++5B+3C-+2CCrunchDataset+2CCrunchExpr+2CANY+2CANY-method'></span><span id='topic++5B+2CShojiCatalog+2Ccharacter+2CANY-method'></span><span id='topic++5B+2CShojiCatalog+2Cnumeric+2CANY-method'></span><span id='topic++5B+2CShojiCatalog+2Clogical+2CANY-method'></span><span id='topic++5B+2CShojiCatalog+2CANY+2CANY-method'></span><span id='topic++5B+5B+2CShojiCatalog+2CANY-method'></span><span id='topic++5B+5B+2CShojiCatalog+2Ccharacter-method'></span><span id='topic++24+2CShojiCatalog-method'></span><span id='topic++24+3C-+2CShojiCatalog-method'></span><span id='topic++5B+3C-+2CShojiCatalog+2CANY+2Cmissing+2CShojiCatalog-method'></span><span id='topic++5B+5B+2CDeckCatalog+2CANY-method'></span><span id='topic++5B+5B+2CDeckCatalog+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2CDeckCatalog+2CANY+2Cmissing+2CCrunchDeck-method'></span><span id='topic++5B+5B+3C-+2CCrunchDeck+2CANY+2Cmissing+2CAnalysisCatalog-method'></span><span id='topic++5B+5B+3C-+2CSlideCatalog+2CANY+2Cmissing+2CCrunchSlide-method'></span><span id='topic++5B+5B+3C-+2CAnalysisCatalog+2CANY+2Cmissing+2CAnalysis-method'></span><span id='topic++5B+5B+2CCrunchDeck+2CANY-method'></span><span id='topic++5B+5B+3C-+2CCrunchDeck+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+2CCrunchExpr+2CCrunchLogicalExpr+2CANY-method'></span><span id='topic++5B+2CCrunchExpr+2Clogical+2CANY-method'></span><span id='topic++5B+2CCrunchExpr+2Cnumeric+2CANY-method'></span><span id='topic++5B+5B+2CFilterCatalog+2Cnumeric-method'></span><span id='topic++5B+5B+3C-+2CFilterCatalog+2Ccharacter+2Cmissing+2CCrunchLogicalExpr-method'></span><span id='topic++5B+5B+3C-+2CFilterCatalog+2Cnumeric+2Cmissing+2CCrunchLogicalExpr-method'></span><span id='topic++5B+5B+3C-+2CFilterCatalog+2Ccharacter+2Cmissing+2CCrunchFilter-method'></span><span id='topic++5B+5B+3C-+2CFilterCatalog+2Cnumeric+2Cmissing+2CCrunchFilter-method'></span><span id='topic++5B+5B+2CMemberCatalog+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2CMemberCatalog+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+5B+3C-+2CMemberCatalog+2Ccharacter+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+2CMultitableCatalog+2Cnumeric-method'></span><span id='topic++5B+5B+3C-+2CMultitableCatalog+2Ccharacter+2Cmissing+2Cformula-method'></span><span id='topic++5B+5B+3C-+2CMultitableCatalog+2Cnumeric+2Cmissing+2Cformula-method'></span><span id='topic++5B+5B+3C-+2CMultitableCatalog+2CANY+2Cmissing+2CMultitable-method'></span><span id='topic++5B+5B+3C-+2CMultitableCatalog+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+2CPermissionCatalog+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2CProjectFolder+2Ccharacter+2Cmissing+2Clist-method'></span><span id='topic++5B+5B+3C-+2CProjectFolder+2Ccharacter+2Cmissing+2CProjectFolder-method'></span><span id='topic++5B+5B+2CShojiFolder+2Cnumeric-method'></span><span id='topic++5B+5B+2CShojiFolder+2Ccharacter-method'></span><span id='topic++5B+2CShojiOrder+2CANY+2CANY-method'></span><span id='topic++5B+2CShojiOrder+2Ccharacter+2CANY-method'></span><span id='topic++5B+5B+2CShojiOrder+2CANY-method'></span><span id='topic++5B+5B+2CShojiOrder+2Ccharacter-method'></span><span id='topic++24+2CShojiOrder-method'></span><span id='topic++5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2CShojiOrder-method'></span><span id='topic++5B+3C-+2CShojiOrder+2CANY+2Cmissing+2CShojiOrder-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2Clist-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2COrderGroup-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2CANY+2Cmissing+2COrderGroup-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+3C-+2CShojiOrder+2Ccharacter+2Cmissing+2CShojiOrder-method'></span><span id='topic++24+3C-+2CShojiOrder-method'></span><span id='topic++5B+2COrderGroup+2CANY+2CANY-method'></span><span id='topic++5B+2COrderGroup+2Ccharacter+2CANY-method'></span><span id='topic++5B+5B+2COrderGroup+2Ccharacter-method'></span><span id='topic++5B+5B+2COrderGroup+2CANY-method'></span><span id='topic++24+2COrderGroup-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Ccharacter+2Cmissing+2Clist-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Ccharacter+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Ccharacter+2Cmissing+2CShojiOrder-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Ccharacter+2Cmissing+2COrderGroup-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2CANY+2Cmissing+2COrderGroup-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Cnumeric+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+3C-+2COrderGroup+2Ccharacter+2Cmissing+2CNULL-method'></span><span id='topic++24+3C-+2COrderGroup-method'></span><span id='topic++5B+5B+2CSlideCatalog+2CANY-method'></span><span id='topic++5B+5B+3C-+2CSlideCatalog+2Cnumeric+2Cmissing+2CCrunchSlide-method'></span><span id='topic++5B+5B+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic++5B+5B+3C-+2CCrunchAnalysisSlide+2CANY+2CANY+2CANY-method'></span><span id='topic++5B+5B+2CAnalysisCatalog+2CANY-method'></span><span id='topic++5B+5B+3C-+2CAnalysisCatalog+2Cnumeric+2Cmissing+2Cformula-method'></span><span id='topic++5B+5B+3C-+2CAnalysisCatalog+2Cnumeric+2Cmissing+2CAnalysis-method'></span><span id='topic++5B+5B+3C-+2CAnalysisCatalog+2Cnumeric+2Cmissing+2Clist-method'></span><span id='topic++5B+5B+2CSubvariables+2Ccharacter-method'></span><span id='topic++5B+5B+2CSubvariables+2Cnumeric-method'></span><span id='topic++5B+2CSubvariables+2Ccharacter+2CANY-method'></span><span id='topic++5B+5B+3C-+2CSubvariables+2Ccharacter+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+5B+3C-+2CSubvariables+2CANY+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+5B+3C-+2CSubvariables+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++5B+5B+3C-+2CSubvariables+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+3C-+2CSubvariables+2Ccharacter+2Cmissing+2CSubvariables-method'></span><span id='topic++5B+3C-+2CSubvariables+2CANY+2Cmissing+2CSubvariables-method'></span><span id='topic++5B+3C-+2CSubvariables+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+2CArrayVariable+2Ccharacter+2CANY-method'></span><span id='topic++5B+2CArrayVariable+2Cmissing+2CANY-method'></span><span id='topic++5B+2CArrayVariable+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+5B+2CArrayVariable+2CANY-method'></span><span id='topic++5B+5B+2CArrayVariable+2Ccharacter-method'></span><span id='topic++24+2CArrayVariable-method'></span><span id='topic++5B+5B+3C-+2CArrayVariable+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+5B+3C-+2CArrayVariable+2Ccharacter+2Cmissing+2CANY-method'></span><span id='topic++24+3C-+2CArrayVariable-method'></span><span id='topic++5B+5B+2CTabBookResult+2Cnumeric-method'></span><span id='topic++5B+5B+2CTabBookResult+2Ccharacter-method'></span><span id='topic++5B+5B+2CMultitableResult+2CANY-method'></span><span id='topic++5B+5B+2CTeamCatalog+2Cnumeric-method'></span><span id='topic++5B+5B+3C-+2CTeamCatalog+2Ccharacter+2Cmissing+2Clist-method'></span><span id='topic++5B+5B+3C-+2CTeamCatalog+2Ccharacter+2Cmissing+2CCrunchTeam-method'></span><span id='topic++5B+2CUserCatalog+2Ccharacter+2CANY-method'></span><span id='topic++5B+5B+2CUserCatalog+2Ccharacter-method'></span><span id='topic++5B+5B+2CVariableCatalog+2Cnumeric-method'></span><span id='topic++5B+5B+3C-+2CVariableCatalog+2Ccharacter+2Cmissing+2CVariableTuple-method'></span><span id='topic++5B+5B+3C-+2CVariableCatalog+2Ccharacter+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+2CVariableCatalog+2CVariableOrder+2CANY-method'></span><span id='topic++5B+2CVariableCatalog+2CVariableGroup+2CANY-method'></span><span id='topic++5B+3C-+2CVariableCatalog+2CVariableOrder+2Cmissing+2CVariableCatalog-method'></span><span id='topic++5B+3C-+2CVariableCatalog+2CVariableGroup+2Cmissing+2CVariableCatalog-method'></span><span id='topic++5B+5B+3C-+2CVariableOrder+2Ccharacter+2Cmissing+2CCrunchDataset-method'></span><span id='topic++5B+5B+3C-+2CVariableGroup+2Ccharacter+2Cmissing+2CCrunchDataset-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2CANY-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2CNULL-method'></span><span id='topic++5B+3C-+2CTextVariable+2CANY+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+3C-+2CNumericVariable+2CANY+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2CDatetimeVariable+2CANY+2Cmissing+2CDate-method'></span><span id='topic++5B+3C-+2CDatetimeVariable+2CANY+2Cmissing+2CPOSIXt-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2CCrunchExpr-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2CCrunchVariable-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2CCrunchLogicalExpr-method'></span><span id='topic++5B+3C-+2CCategoricalVariable+2CANY+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2CCategoricalVariable+2CANY+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+3C-+2CCategoricalVariable+2CANY+2Cmissing+2Cfactor-method'></span><span id='topic++5B+3C-+2CCategoricalArrayVariable+2CANY+2Cmissing+2Cnumeric-method'></span><span id='topic++5B+3C-+2CCategoricalArrayVariable+2CANY+2Cmissing+2Ccharacter-method'></span><span id='topic++5B+3C-+2CCategoricalArrayVariable+2CANY+2Cmissing+2Cfactor-method'></span><span id='topic++5B+3C-+2CCrunchVariable+2CANY+2Cmissing+2Clogical-method'></span><span id='topic+is.na+3C-+2CCrunchVariable+2CANY-method'></span><span id='topic++5B+2CCrunchVariable+2CCrunchExpr+2CANY-method'></span><span id='topic++5B+2CCrunchVariable+2Cnumeric+2CANY-method'></span><span id='topic++5B+2CCrunchVariable+2Clogical+2CANY-method'></span>

<h3>Description</h3>

<p>Extract and modify Crunch objects
</p>
<p>This function is no-op because the items are already updated on the server
with other methods called prior to it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'AbstractCategories,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'AbstractCategories,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'AbstractCategories,numeric,ANY'
x[i, j, ..., drop = TRUE]

## S4 replacement method for signature 'AbstractCategories,character,ANY,ANY'
x[i, j, ...] &lt;- value

## S4 method for signature 'AbstractCategories,character'
x[[i, j, ...]]

## S4 replacement method for signature 'AbstractCategories,character,ANY,ANY'
x[[i, j, ...]] &lt;- value

## S4 method for signature 'AbstractCategory'
x$name

## S4 replacement method for signature 'AbstractCategory'
x$name &lt;- value

## S4 method for signature 'ScriptCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'Categories,ANY,ANY,ANY'
x[i, j, ...] &lt;- value

## S3 method for class 'CrunchDataFrame'
x[i, j, drop = TRUE]

## S3 replacement method for class 'CrunchDataFrame'
x[i, j] &lt;- value

## S3 method for class 'CrunchDataFrame'
x[[i]]

## S3 replacement method for class 'CrunchDataFrame'
x[[i]] &lt;- value

## S3 method for class 'CrunchDataFrame'
x$i

## S3 replacement method for class 'CrunchDataFrame'
x$i &lt;- value

## S4 method for signature 'CubeDims,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchCube,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 replacement method for signature 'TransformsList,ANY,missing,'NULL''
x[[i, j]] &lt;- value

## S4 method for signature 'DatasetCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'DatasetCatalog,character,missing,DatasetTuple'
x[[i, j]] &lt;- value

## S4 method for signature 'CrunchDataset,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchDataset,logical,missing'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchDataset,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchDataset,VariableGroup,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchDataset,VariableOrder,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchDataset,missing,ANY'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchDataset,CrunchLogicalExpr,missing'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchDataset,CrunchLogicalExpr,ANY'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchDataset'
subset(x, ...)

## S4 method for signature 'CrunchDataset,ANY'
x[[i, ..., drop = FALSE]]

## S4 method for signature 'CrunchDataset,character'
x[[i, ..., drop = FALSE]]

## S4 method for signature 'CrunchDataset'
x$name

## S4 replacement method for signature 'CrunchDataset,character,missing,CrunchVariable'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,missing,CrunchVariable'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,character,missing,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,ANY,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,character,missing,'NULL''
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,missing,'NULL''
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset'
x$name &lt;- value

## S4 replacement method for signature 'CrunchDataset,character,missing,CrunchGeography'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,missing,CrunchGeography'
x[[i]] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,missing,list'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchDataset,ANY,missing,CrunchDataset'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchDataset,CrunchExpr,ANY,ANY'
x[i, j] &lt;- value

## S4 method for signature 'ShojiCatalog,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiCatalog,numeric,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiCatalog,logical,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiCatalog,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiCatalog,ANY'
x[[i, j, ...]]

## S4 method for signature 'ShojiCatalog,character'
x[[i, j, ...]]

## S4 method for signature 'ShojiCatalog'
x$name

## S4 replacement method for signature 'ShojiCatalog'
x$name &lt;- value

## S4 replacement method for signature 'ShojiCatalog,ANY,missing,ShojiCatalog'
x[i, j] &lt;- value

## S4 method for signature 'DeckCatalog,ANY'
x[[i, j, ...]]

## S4 method for signature 'DeckCatalog,character'
x[[i, j, ...]]

## S4 replacement method for signature 'DeckCatalog,ANY,missing,CrunchDeck'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'CrunchDeck,ANY,missing,AnalysisCatalog'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'SlideCatalog,ANY,missing,CrunchSlide'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'AnalysisCatalog,ANY,missing,Analysis'
x[[i, j]] &lt;- value

## S4 method for signature 'CrunchDeck,ANY'
x[[i, j, ...]]

## S4 replacement method for signature 'CrunchDeck,ANY,ANY,ANY'
x[[i, j]] &lt;- value

## S4 method for signature 'CrunchExpr,CrunchLogicalExpr,ANY'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchExpr,logical,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchExpr,numeric,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'FilterCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'FilterCatalog,character,missing,CrunchLogicalExpr'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'FilterCatalog,numeric,missing,CrunchLogicalExpr'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'FilterCatalog,character,missing,CrunchFilter'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'FilterCatalog,numeric,missing,CrunchFilter'
x[[i, j]] &lt;- value

## S4 method for signature 'MemberCatalog,character'
x[[i, j, ...]]

## S4 replacement method for signature 'MemberCatalog,ANY,missing,ANY'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'MemberCatalog,character,missing,'NULL''
x[[i, j]] &lt;- value

## S4 method for signature 'MultitableCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'MultitableCatalog,character,missing,formula'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'MultitableCatalog,numeric,missing,formula'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'MultitableCatalog,ANY,missing,Multitable'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'MultitableCatalog,ANY,missing,'NULL''
x[[i, j]] &lt;- value

## S4 method for signature 'PermissionCatalog,character'
x[[i, j, ...]]

## S4 replacement method for signature 'ProjectFolder,character,missing,list'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ProjectFolder,character,missing,ProjectFolder'
x[[i, j]] &lt;- value

## S4 method for signature 'ShojiFolder,numeric'
x[[i, ..., drop = FALSE]]

## S4 method for signature 'ShojiFolder,character'
x[[i, ..., drop = FALSE]]

## S4 method for signature 'ShojiOrder,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiOrder,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ShojiOrder,ANY'
x[[i, j, ...]]

## S4 method for signature 'ShojiOrder,character'
x[[i, j, ...]]

## S4 method for signature 'ShojiOrder'
x$name

## S4 replacement method for signature 'ShojiOrder,character,missing,ShojiOrder'
x[i, j] &lt;- value

## S4 replacement method for signature 'ShojiOrder,ANY,missing,ShojiOrder'
x[i, j] &lt;- value

## S4 replacement method for signature 'ShojiOrder,character,missing,list'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,character,missing,character'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,character,missing,OrderGroup'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,ANY,missing,OrderGroup'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,ANY,missing,ANY'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,ANY,missing,'NULL''
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,character,missing,'NULL''
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder,character,missing,ShojiOrder'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'ShojiOrder'
x$name &lt;- value

## S4 method for signature 'OrderGroup,ANY,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'OrderGroup,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'OrderGroup,character'
x[[i, j, ...]]

## S4 method for signature 'OrderGroup,ANY'
x[[i, j, ...]]

## S4 method for signature 'OrderGroup'
x$name

## S4 replacement method for signature 'OrderGroup,character,missing,list'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,character,missing,character'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,character,missing,ShojiOrder'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,character,missing,OrderGroup'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,ANY,missing,OrderGroup'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,numeric,missing,'NULL''
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup,character,missing,'NULL''
x[[i, j]] &lt;- value

## S4 replacement method for signature 'OrderGroup'
x$name &lt;- value

## S4 method for signature 'SlideCatalog,ANY'
x[[i, j, ...]]

## S4 replacement method for signature 'SlideCatalog,numeric,missing,CrunchSlide'
x[[i, j]] &lt;- value

## S4 method for signature 'CrunchAnalysisSlide,ANY'
x[[i, j, ...]]

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY,ANY,ANY'
x[[i, j]] &lt;- value

## S4 method for signature 'AnalysisCatalog,ANY'
x[[i, j, ...]]

## S4 replacement method for signature 'AnalysisCatalog,numeric,missing,formula'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'AnalysisCatalog,numeric,missing,Analysis'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'AnalysisCatalog,numeric,missing,list'
x[[i, j]] &lt;- value

## S4 method for signature 'Subvariables,character'
x[[i, j, ...]]

## S4 method for signature 'Subvariables,numeric'
x[[i, j, ...]]

## S4 method for signature 'Subvariables,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 replacement method for signature 'Subvariables,character,missing,CrunchVariable'
x[[i]] &lt;- value

## S4 replacement method for signature 'Subvariables,ANY,missing,CrunchVariable'
x[[i]] &lt;- value

## S4 replacement method for signature 'Subvariables,ANY,missing,'NULL''
x[[i]] &lt;- value

## S4 replacement method for signature 'Subvariables,ANY,missing,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'Subvariables,character,missing,Subvariables'
x[i] &lt;- value

## S4 replacement method for signature 'Subvariables,ANY,missing,Subvariables'
x[i] &lt;- value

## S4 replacement method for signature 'Subvariables,ANY,missing,ANY'
x[i] &lt;- value

## S4 method for signature 'ArrayVariable,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ArrayVariable,missing,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ArrayVariable,missing,character'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'ArrayVariable,ANY'
x[[i, j, ...]]

## S4 method for signature 'ArrayVariable,character'
x[[i, j, ...]]

## S4 method for signature 'ArrayVariable'
x$name

## S4 replacement method for signature 'ArrayVariable,ANY,missing,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'ArrayVariable,character,missing,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'ArrayVariable'
x$name &lt;- value

## S4 method for signature 'TabBookResult,numeric'
x[[i, j, ...]]

## S4 method for signature 'TabBookResult,character'
x[[i, j, ...]]

## S4 method for signature 'MultitableResult,ANY'
x[[i, j, ...]]

## S4 method for signature 'TeamCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'TeamCatalog,character,missing,list'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'TeamCatalog,character,missing,CrunchTeam'
x[[i, j]] &lt;- value

## S4 method for signature 'UserCatalog,character,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'UserCatalog,character'
x[[i, j, ...]]

## S4 method for signature 'VariableCatalog,numeric'
x[[i, j, ...]]

## S4 replacement method for signature 'VariableCatalog,character,missing,VariableTuple'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'VariableCatalog,character,missing,CrunchVariable'
x[[i, j]] &lt;- value

## S4 method for signature 'VariableCatalog,VariableOrder,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'VariableCatalog,VariableGroup,ANY'
x[i, j, ..., drop = TRUE]

## S4 replacement method for signature 
## 'VariableCatalog,VariableOrder,missing,VariableCatalog'
x[i, j] &lt;- value

## S4 replacement method for signature 
## 'VariableCatalog,VariableGroup,missing,VariableCatalog'
x[i, j] &lt;- value

## S4 replacement method for signature 'VariableOrder,character,missing,CrunchDataset'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'VariableGroup,character,missing,CrunchDataset'
x[[i, j]] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,ANY'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,'NULL''
x[i, j] &lt;- value

## S4 replacement method for signature 'TextVariable,ANY,missing,character'
x[i, j] &lt;- value

## S4 replacement method for signature 'NumericVariable,ANY,missing,numeric'
x[i, j] &lt;- value

## S4 replacement method for signature 'DatetimeVariable,ANY,missing,Date'
x[i, j] &lt;- value

## S4 replacement method for signature 'DatetimeVariable,ANY,missing,POSIXt'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,CrunchExpr'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,CrunchVariable'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,CrunchLogicalExpr'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalVariable,ANY,missing,numeric'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalVariable,ANY,missing,character'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalVariable,ANY,missing,factor'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,ANY,missing,numeric'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,ANY,missing,character'
x[i, j] &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,ANY,missing,factor'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY,missing,logical'
x[i, j] &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY'
is.na(x) &lt;- value

## S4 method for signature 'CrunchVariable,CrunchExpr,ANY'
x[i, j, ..., drop = FALSE]

## S4 method for signature 'CrunchVariable,numeric,ANY'
x[i, j, ..., drop = TRUE]

## S4 method for signature 'CrunchVariable,logical,ANY'
x[i, j, ..., drop = TRUE]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunch-extract_+3A_x">x</code></td>
<td>
<p>a Crunch object (Dataset, Variable, <code>CrunchExpr</code>, Catalog,
<code>CrunchCube</code>, etc.)</p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_i">i</code></td>
<td>
<p>The elements to extract; as with R, this can generally be (1) a
logical vector of length matching <code>x</code>; (2) a character vector of appropriate
length, which can generally be URLs or also names, aliases, or other
identifier; (3) integer indices, potentially negative, to select. Datasets
and Variables can also be subset by <code>CrunchExpr</code>. Note that when subsetting
Datasets and variables by R vectors, the input <code>i</code> is turned into a
<code>CrunchExpr</code> so that it can be used in API queries.</p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_j">j</code></td>
<td>
<p>For two-dimensional objects, elements to take from the columnar
dimension. Note that Datasets work like <code>data.frame</code>s in that you can extract
columns either by <code>ds[, j]</code> or by the list-like <code>ds[i]</code> (with no comma).</p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_...">...</code></td>
<td>
<p>additional arguments supported by some methods. For example, some
catalogs support a <code>secondary</code> vector of elements to match
against like <code>emails(x)</code> or <code>owners(x)</code>; by default this is <code>names(x)</code>. This
lets (for example) you to look up variables by URL but fall back to name.</p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_drop">drop</code></td>
<td>
<p>Ignored and always assumed <code>FALSE</code></p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_value">value</code></td>
<td>
<p>For updating, an object of the appropriate class and size to
insert. This is generally the same class of object you would get from the
extract method; i.e. for <code>x[[i]] &lt;- value</code>, <code>value</code> must be the same class
as <code>x[[i]]</code>. Exceptions include <code>ds$var &lt;- VariableDefinition(...)</code> to create
a new variable, and <code>ds$var[i] &lt;- value</code>, which can take R vectors and
<code>CrunchExpr</code>.</p>
</td></tr>
<tr><td><code id="crunch-extract_+3A_name">name</code></td>
<td>
<p>for <code>$</code>, the same as <code>i</code> for <code>[[</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>[</code> generally returns a subset of <code>x</code>, same class and &quot;self&quot; URL;
when subsetting with a <code>CrunchExpr</code>, the expression is recorded in an
attribute of the object. <code>[[</code> and <code>$</code>
return appropriate extractions from <code>x</code>, wherever possible without making an
additional API request. The assignment methods return <code>x</code> appropriately
updated. Most assignment methods do not make an API request except where
they clearly are used to create a new entity (as in assigning a variable
definition to a Dataset); for editing metadata attributes, these methods
generally assume that the API request to set the changes on the server
happens in a different method (e.g. in <code>names(variables(ds)[1:5]) &lt;- value</code>,
assignment happens in the <code style="white-space: pre;">&#8288;names&lt;-&#8288;</code> method).
</p>

<hr>
<h2 id='crunch-summary'>Summary methods for Crunch Variables</h2><span id='topic+crunch-summary'></span><span id='topic+summary.CategoricalVariable'></span><span id='topic+summary.NumericVariable'></span>

<h3>Description</h3>

<p>Summary methods for Crunch Variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CategoricalVariable'
summary(object, ...)

## S3 method for class 'NumericVariable'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunch-summary_+3A_object">object</code></td>
<td>
<p>A Variable</p>
</td></tr>
<tr><td><code id="crunch-summary_+3A_...">...</code></td>
<td>
<p>additional arguments, ignored (they're in the summary.default)
signature</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a summary response. Categorical variable summaries should work like
summary.factor; Numeric variables should be like summary.numeric. Other
Variable types are not yet supported.
</p>

<hr>
<h2 id='crunch-uni'>Univariate statistics on Crunch objects</h2><span id='topic+crunch-uni'></span><span id='topic+mean'></span><span id='topic+sd'></span><span id='topic+median'></span><span id='topic+min'></span><span id='topic+max'></span><span id='topic+mean+2CCrunchVariable-method'></span><span id='topic+mean+2CNumericVariable-method'></span><span id='topic+sd+2CCrunchVariable-method'></span><span id='topic+sd+2CNumericVariable-method'></span><span id='topic+min+2CCrunchVariable-method'></span><span id='topic+min+2CNumericVariable-method'></span><span id='topic+min+2CDatetimeVariable-method'></span><span id='topic+max+2CCrunchVariable-method'></span><span id='topic+max+2CNumericVariable-method'></span><span id='topic+max+2CDatetimeVariable-method'></span>

<h3>Description</h3>

<p>Univariate statistics on Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean(x, ...)

sd(x, na.rm = FALSE)

median(x, na.rm = FALSE, ...)

## S4 method for signature 'CrunchVariable'
mean(x, ...)

## S4 method for signature 'NumericVariable'
mean(x, ...)

## S4 method for signature 'CrunchVariable'
sd(x, na.rm = FALSE)

## S4 method for signature 'NumericVariable'
sd(x, na.rm = FALSE)

## S4 method for signature 'CrunchVariable'
min(x, na.rm)

## S4 method for signature 'NumericVariable'
min(x, na.rm = FALSE)

## S4 method for signature 'DatetimeVariable'
min(x, na.rm = FALSE)

## S4 method for signature 'CrunchVariable'
max(x, na.rm)

## S4 method for signature 'NumericVariable'
max(x, na.rm = FALSE)

## S4 method for signature 'DatetimeVariable'
max(x, na.rm = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunch-uni_+3A_x">x</code></td>
<td>
<p>a NumericVariable, or for <code>min</code> and <code>max</code>, a NumericVariable or
DatetimeVariable</p>
</td></tr>
<tr><td><code id="crunch-uni_+3A_...">...</code></td>
<td>
<p>additional arguments to summary statistic function</p>
</td></tr>
<tr><td><code id="crunch-uni_+3A_na.rm">na.rm</code></td>
<td>
<p>logical: exclude missings?</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="base.html#topic+mean">base::mean()</a></code> <code><a href="stats.html#topic+sd">stats::sd()</a></code> <code><a href="stats.html#topic+median">stats::median()</a></code> <code><a href="base.html#topic+Extremes">base::min()</a></code>
<code><a href="base.html#topic+Extremes">base::max()</a></code>
</p>

<hr>
<h2 id='crunchAPI'>Main Crunch API handling function</h2><span id='topic+crunchAPI'></span>

<h3>Description</h3>

<p>Main Crunch API handling function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crunchAPI(
  http.verb,
  url,
  config = list(),
  status.handlers = list(),
  progress.handler = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunchAPI_+3A_http.verb">http.verb</code></td>
<td>
<p>character in GET, PUT, POST, PATCH, DELETE</p>
</td></tr>
<tr><td><code id="crunchAPI_+3A_url">url</code></td>
<td>
<p>character URL to do the verb on</p>
</td></tr>
<tr><td><code id="crunchAPI_+3A_config">config</code></td>
<td>
<p>list of config parameters. See httr documentation.</p>
</td></tr>
<tr><td><code id="crunchAPI_+3A_status.handlers">status.handlers</code></td>
<td>
<p>named list of specific HTTP statuses and a response
function to call in the case where that status is returned. Passed to the
<code><a href="#topic+handleAPIresponse">handleAPIresponse()</a></code> function.</p>
</td></tr>
<tr><td><code id="crunchAPI_+3A_progress.handler">progress.handler</code></td>
<td>
<p>an optional function that resolves errors raised
during an async request. Passed to the <code><a href="#topic+pollProgress">pollProgress()</a></code> function.</p>
</td></tr>
<tr><td><code id="crunchAPI_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>GET</code>, <code>PUT</code>,
<code>POST</code>, <code>PATCH</code>, or <code>DELETE</code></p>
</td></tr>
</table>

<hr>
<h2 id='crunchBox'>Make a CrunchBox</h2><span id='topic+crunchBox'></span><span id='topic+CrunchBox'></span>

<h3>Description</h3>

<p>CrunchBoxes allow you to publish results to the world.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crunchBox(
  dataset,
  filters = crunch::filters(dataset),
  weight = crunch::weight(dataset),
  brand_colors,
  static_colors,
  category_color_lookup,
  ...
)

CrunchBox(
  dataset,
  filters = crunch::filters(dataset),
  weight = crunch::weight(dataset),
  brand_colors,
  static_colors,
  category_color_lookup,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crunchBox_+3A_dataset">dataset</code></td>
<td>
<p>A CrunchDataset, potentially a selection of variables from it</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_filters">filters</code></td>
<td>
<p>FilterCatalog, or <code>NULL</code> for no filters. Default all
filters in your catalog, <code>filters(dataset)</code>.</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_weight">weight</code></td>
<td>
<p>a CrunchVariable that has been designated as a potential
weight variable for <code>dataset</code>, or <code>NULL</code> for unweighted results.
Default is the currently applied <code><a href="#topic+weight">weight()</a></code>.</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_brand_colors">brand_colors</code></td>
<td>
<p>an optional color vector of length 3 or less, or a named
list with names 'primary', 'secondary', and 'message'. See &quot;Details&quot; for more
about color specification.</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_static_colors">static_colors</code></td>
<td>
<p>an optional vector of colors to use for categorical
plots. Bars and lines are colored in the order of <code>static_colors</code>. See
&quot;Details&quot; for more about color specification.</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_category_color_lookup">category_color_lookup</code></td>
<td>
<p>an optional list of category names to colors
to use for that category, wherever it appears in the data. This allows you
to always see a category displayed in a specific color. See
&quot;Details&quot; for more about color specification.</p>
</td></tr>
<tr><td><code id="crunchBox_+3A_...">...</code></td>
<td>
<p>additional metadata for the box, such as &quot;title&quot;, &quot;header&quot;, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In addition to specifying the variables and filters to include in your
CrunchBox, you can provide custom color palettes. The arguments
<code>brand_colors</code>, <code>static_colors</code>, and <code>category_color_lookup</code> allow you to
provide color lists to use. Colors should be either a valid hexadecimal
string representation, like &quot;#fa1af1&quot;, or they may also be an R named color,
such as &quot;darkgreen&quot;.
</p>


<h3>Value</h3>

<p>The URL to the newly created box.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+preCrunchBoxCheck">preCrunchBoxCheck()</a></code> to provide guidance on what you're including in the
CrunchBox
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Creating a CrunchBox with three variables
crunchBox(ds[c("var1", "var2", "var3")], title = "New CrunchBox")

# Creating a CrunchBox changing primary, secondary, and message brand colors
crunchBox(ds[c("var1", "var2", "var3")],
    title = "Branded CrunchBox",
    brand_colors = c("#ff0aa4", "#af17ff", "#260aff")
)

# Creating a CrunchBox changing category-specific colors
crunchBox(ds[c("var1", "var2", "var3")],
    title = "CrunchBox with category colors",
    category_color_lookup = list(
        "agree" = "#ff0aa4",
        "disagree" = "#af17ff",
        "don't know" = "#260aff"
    )
)

## End(Not run)

</code></pre>

<hr>
<h2 id='CrunchDataFrame'>CrunchDataFrame</h2><span id='topic+CrunchDataFrame'></span><span id='topic+dim.CrunchDataFrame'></span>

<h3>Description</h3>

<p>CrunchDataFrames are designed to mimic the ways that <code><a href="base.html#topic+data.frame">data.frame</a></code>s are used.
They should be a drop-in replacement in many places where data.frames are used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CrunchDataFrame'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CrunchDataFrame_+3A_x">x</code></td>
<td>
<p>a CrunchDataFrame</p>
</td></tr>
</table>


<h3>Details</h3>

<p>CrunchDataFrames are generated not by downloading all of the variables from
a dataset, but rather only the variables that are needed by subsequent
functions. So, if you create a CrunchDataFrame, and then run a linear model
using <code>lm()</code>, only the variables used by the linear model will be downloaded.
</p>
<p>CrunchDataFrames can be altered (that is: adding more columns, removing
columns, subsetting rows, etc.) with the same <code>[</code>, <code>[[</code>, and <code>$</code> syntax as
data.frames.
</p>

<hr>
<h2 id='CrunchDataset-class'>Crunch Datasets</h2><span id='topic+CrunchDataset-class'></span><span id='topic+CrunchDataset'></span>

<h3>Description</h3>

<p>Crunch Datasets
</p>

<hr>
<h2 id='CrunchGeography-class'>Geography properties for crunch variables</h2><span id='topic+CrunchGeography-class'></span><span id='topic+CrunchGeography'></span><span id='topic+Geodata-class'></span><span id='topic+Geodata'></span><span id='topic+geo'></span><span id='topic+geo+3C-'></span><span id='topic+geo+2CCrunchVariable-method'></span><span id='topic+geo+3C-+2CCrunchVariable+2CCrunchGeography-method'></span><span id='topic+geo+3C-+2CCrunchVariable+2CNULL-method'></span><span id='topic+availableGeodata'></span>

<h3>Description</h3>

<p>Crunch stores geographic data as variable metadata. There are a number of
functions that help access and change this metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CrunchGeography(..., data = NULL)

geo(x)

geo(x) &lt;- value

## S4 method for signature 'CrunchVariable'
geo(x)

## S4 replacement method for signature 'CrunchVariable,CrunchGeography'
geo(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,'NULL''
geo(x) &lt;- value

availableGeodata(x = getAPIRoot())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="CrunchGeography-class_+3A_...">...</code></td>
<td>
<p>for <code>CrunchGeography</code>, named arguments from which to construct a
<code>CrunchGeography</code>: <code>geodatum</code>, <code>feature_key</code>, and <code>match_field</code></p>
</td></tr>
<tr><td><code id="CrunchGeography-class_+3A_data">data</code></td>
<td>
<p>for <code>CrunchGeography</code>, list of named arguments from which to construct a
<code>CrunchGeography</code>: <code>geodatum</code>, <code>feature_key</code>, and <code>match_field</code></p>
</td></tr>
<tr><td><code id="CrunchGeography-class_+3A_x">x</code></td>
<td>
<p>a crunch variable</p>
</td></tr>
<tr><td><code id="CrunchGeography-class_+3A_value">value</code></td>
<td>
<p>value of the geography property to set</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>geo</code> retrieves the geographic information associate with a variable.
If there is geographic information it returns an object of class
<code>CrunchGeography</code> otherwise it returns <code>NULL</code>.
</p>
<p><code>CrunchGeography</code> objects store geography metadata from a variable. There are three slots:
</p>

<ul>
<li> <p><code>geodatum</code> an object of class CrunchGeodata which stores references
to the Crunch-hosted (geo|topo)json to use
</p>
</li>
<li> <p><code>feature_key</code> a character string representing the feature inside of the
(geo|topo)json which is used to match <code>match_field</code> (e.g. properties.name)
</p>
</li>
<li> <p><code>match_field</code> a character string representing the variable metadata information which is used
to match <code>feature_key</code> to (e.g. name)
</p>
</li></ul>



<h3>Value</h3>

<p>geographic information of class <code>CrunchGeography</code> (<code>NULL</code> if there is none)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
geo(ds$location)

geo(ds$location)$feature_key &lt;- "properties.name"
geo(ds$location)$match_field &lt;- "name"

## End(Not run)
</code></pre>

<hr>
<h2 id='CrunchVariable-class'>Variables in Crunch</h2><span id='topic+CrunchVariable-class'></span><span id='topic+NumericVariable-class'></span><span id='topic+NumericVariable'></span><span id='topic+CategoricalVariable-class'></span><span id='topic+CategoricalVariable'></span><span id='topic+TextVariable-class'></span><span id='topic+TextVariable'></span><span id='topic+DatetimeVariable-class'></span><span id='topic+DatetimeVariable'></span><span id='topic+CategoricalArrayVariable-class'></span><span id='topic+CategoricalArrayVariable'></span><span id='topic+MultipleResponseVariable-class'></span><span id='topic+MultipleResponseVariable'></span><span id='topic+NumericArrayVariable-class'></span><span id='topic+NumericArrayVariable'></span>

<h3>Description</h3>

<p>Variables are S4 objects. All inherit from the base class
<code>CrunchVariable</code>.
</p>


<h3>Slots</h3>


<dl>
<dt><code>filter</code></dt><dd><p>either <code>NULL</code> or <code>CrunchLogicalExpr</code></p>
</dd>
<dt><code>tuple</code></dt><dd><p><code>VariableTuple</code></p>
</dd>
</dl>

<hr>
<h2 id='cube-computing'>Work with CrunchCubes, MultitableResults, and TabBookResults</h2><span id='topic+cube-computing'></span><span id='topic+margin.table'></span><span id='topic+prop.table'></span><span id='topic+bases'></span><span id='topic+round'></span><span id='topic+prop.table+2CCrunchCube-method'></span><span id='topic+round+2CCrunchCube-method'></span><span id='topic+bases+2CCrunchCube-method'></span><span id='topic+margin.table+2CCrunchCube-method'></span><span id='topic+prop.table+2CMultitableResult-method'></span><span id='topic+prop.table+2CTabBookResult-method'></span><span id='topic+bases+2CTabBookResult-method'></span><span id='topic+bases+2CMultitableResult-method'></span>

<h3>Description</h3>

<p>These functions provide an interface like <code><a href="base.html#topic+marginSums">base::margin.table()</a></code> and
<code><a href="base.html#topic+proportions">base::prop.table()</a></code> for the CrunchCube object. CrunchCubes
contain richer metadata than standard R <code>array</code> objects, and they also conceal certain
complexity in the data structures from the user. In particular,
multiple-response variables are generally represented as single dimensions in
result tables, but in the actual data, they may comprise two dimensions.
These methods understand the subtleties in the Crunch data types and
correctly compute margins and percentages off of them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>margin.table(x, margin = NULL)

prop.table(x, margin = NULL)

bases(x, margin = NULL)

## S4 method for signature 'CrunchCube'
prop.table(x, margin = NULL)

## S4 method for signature 'CrunchCube'
round(x, digits = 0)

## S4 method for signature 'CrunchCube'
bases(x, margin = NULL)

## S4 method for signature 'CrunchCube'
margin.table(x, margin = NULL)

## S4 method for signature 'MultitableResult'
prop.table(x, margin = NULL)

## S4 method for signature 'TabBookResult'
prop.table(x, margin = NULL)

## S4 method for signature 'TabBookResult'
bases(x, margin = NULL)

## S4 method for signature 'MultitableResult'
bases(x, margin = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cube-computing_+3A_x">x</code></td>
<td>
<p>a CrunchCube</p>
</td></tr>
<tr><td><code id="cube-computing_+3A_margin">margin</code></td>
<td>
<p>index, or vector of indices to generate margin for. See
<code><a href="base.html#topic+proportions">base::prop.table()</a></code>. <code>bases()</code> accepts <code>0</code> as an additional
valid value for <code>margin</code>, which yields the unweighted counts for the query.</p>
</td></tr>
<tr><td><code id="cube-computing_+3A_digits">digits</code></td>
<td>
<p>For <code>round</code>, the number of decimal places to round to. See
<code><a href="base.html#topic+Round">base::round()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions also generalize to MultitableResults and TabBookResults,
which are returned from a <code><a href="#topic+tabBook">tabBook()</a></code> request. When called on one of those
objects, they effectively apply over each CrunchCube contained in them.
</p>
<p><code>bases</code> is an additional method for CrunchCubes. When making weighted
requests, <code>bases</code> allows you to access the unweighted counts for every cell
in the resulting table (array). The <code>bases</code> function takes a &quot;margin&quot;
argument to work like <code>margin.table</code>, or with <code>margin=0</code> gives all cell
counts.
</p>


<h3>Value</h3>

<p>When called on CrunchCubes, these functions return an <code>array</code>.
Calling prop.table on a MultitableResult returns a list of prop.tables of
the CrunchCubes it contains. Likewise, prop.table on a TabBookResult
returns a list of lists of prop.tables.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+margin.table">margin.table()</a></code> <code><a href="#topic+prop.table">prop.table()</a></code>
</p>

<hr>
<h2 id='cube-residuals'>Calculate standardized residuals from a CrunchCube</h2><span id='topic+cube-residuals'></span><span id='topic+rstandard+2CCrunchCube-method'></span><span id='topic+zScores'></span><span id='topic+zScores+2CCrunchCube-method'></span><span id='topic+rstandard'></span>

<h3>Description</h3>

<p>Standardized residuals, <code>(observed - expected) / sqrt(V)</code>, where
<code>V</code> is the residual cell variance (Agresti, 2007, section 2.4.5).
Special care is taken for multiple-response variables which are in effect a
series of separate tables where &lsquo;not selected&rsquo; cells for each item are
are hidden.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>zScores(x)

## S4 method for signature 'CrunchCube'
zScores(x)

rstandard(model)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cube-residuals_+3A_x">x</code></td>
<td>
<p>A CrunchCube representing a contingency table</p>
</td></tr>
<tr><td><code id="cube-residuals_+3A_model">model</code></td>
<td>
<p>A CrunchCube representing a contingency table (for <code>rstandard()</code>
only)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an array of standardized residuals or Z-scores from the hypothesis
being tested. The default method is that the joint distributions of
(weighted) counts are equal to the marginal distributions of the table.
</p>


<h3>References</h3>

<p>Agresti, A. (2007)
<em>An Introduction to Categorical Data Analysis, 2nd ed.</em>,
New York: John Wiley &amp; Sons. Page 38.
</p>


<h3>See Also</h3>

<p><a href="stats.html#topic+chisq.test">stats::chisq.test</a>
</p>

<hr>
<h2 id='cubeMeasureType'>Get measure type of cube result</h2><span id='topic+cubeMeasureType'></span><span id='topic+cubeMeasureType+2CCrunchCube-method'></span>

<h3>Description</h3>

<p>Returns a string describing the measure type of the cube result,
such as &quot;count&quot;, &quot;mean&quot;, &quot;sd&quot;, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cubeMeasureType(x, measure = NULL)

## S4 method for signature 'CrunchCube'
cubeMeasureType(x, measure = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cubeMeasureType_+3A_x">x</code></td>
<td>
<p>A <code>CrunchCube</code></p>
</td></tr>
<tr><td><code id="cubeMeasureType_+3A_measure">measure</code></td>
<td>
<p>Which measure in the cube to check, can index by position
with numbers or by name. NULL, the default, will select a &quot;sum&quot; type measure
first, &quot;mean&quot; if no sum is available, and will use the cube's names in alphabetic
order if there are no &quot;sum&quot; or &quot;mean&quot; measures (or if a tie breaker between two
measure types is needed).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A string describing the cube's measure type
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cube1 &lt;- crtabs(~allpets, ds)
cubeMeasureType(cube1)
#&gt; "count"

cube2 &lt;- crtabs(list(a = n(), b = mean(age)) ~ allpets, ds)
cubeMeasureType(cube2)
#&gt; "count"
cubeMeasureType(cube2, "b")
#&gt; "mean"

## End(Not run)
</code></pre>

<hr>
<h2 id='cut+2CDatetimeVariable-method'>Cut a Datetime Crunch variable</h2><span id='topic+cut+2CDatetimeVariable-method'></span>

<h3>Description</h3>

<p><code>crunch::cut()</code> is equivalent to <code>base::cut()</code> except that it operates on
Crunch variables instead of in-memory R objects. The function takes a Datetime
variable and derives a new categorical variable from it based on the <code>breaks</code>
argument. You can either break the variable into evenly spaced categories by
specifying an interval using a string that defines a period or a vector containing
the start and end point of each category. For example, specifying
<code>breaks = "2 weeks"</code> will break the datetime data into 2 week size bins
while <code style="white-space: pre;">&#8288;breaks = as.Date(c("2020-01-01", "2020-01-15" "2020-02-01"))&#8288;</code>
will recode the data into two groups based on
whether the numeric vector falls between January 1 and 14 or January 15 and 31
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DatetimeVariable'
cut(x, breaks, labels = NULL, dates = NULL, name, right = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_x">x</code></td>
<td>
<p>A Crunch <code>DatetimeVariable</code></p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_breaks">breaks</code></td>
<td>
<p>Either a numeric vector of two or more unique cut point datetimes
or a single string giving the interval size into which <code>x</code> is to be
cut with a number optionally at the beginning nd &quot;day&quot;, &quot;weeks&quot;, &quot;months&quot;,
a &quot;quarters&quot; or &quot;years&quot;. If specifying cut points, values that are less than
the smallest value in <code>breaks</code> or greater than the largest value in <code>breaks</code>
will be marked missing in the resulting categorical variable.</p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_labels">labels</code></td>
<td>
<p>A character vector representing the labels for the levels of
the resulting categories. The length of the labels argument should be the
same as the number of categories, which is one fewer than the number of
breaks. If not specified, labels are constructed with a formatting like
&quot;YYYY/MM/DD - YYYY/MM/DD&quot; (for example (&quot;2020/01/01 - 2020/01/14&quot;))</p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_dates">dates</code></td>
<td>
<p>(Optionally) A character vector with the date strings that should
be associated with the resulting categories. These dates can have the form
&quot;YYYY-MM-DD&quot;, &quot;YYYY-MM&quot;, &quot;YYYY&quot;, &quot;YYYY-WXX&quot; (where &quot;XX&quot; is the ISO week number) or
&quot;YYYY-MM-DD,YYYY-MM-DD&quot;. If left <code>NULL</code>, it will be created from the categories.</p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_name">name</code></td>
<td>
<p>The name of the resulting Crunch variable as a character string.</p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_right">right</code></td>
<td>
<p>logical, indicating if the intervals should be closed on the
right (and open on the left) or vice versa. This only applies if giving a
vector of break points.</p>
</td></tr>
<tr><td><code id="cut+2B2CDatetimeVariable-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <a href="#topic+makeCaseVariable">makeCaseVariable</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Crunch <code><a href="#topic+VariableDefinition">VariableDefinition</a></code>. Assign it into the dataset to create
it as a derived variable on the server.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("example")
ds$month_cat &lt;- cut(ds$date, breaks = "month", name = "monthly")
ds$four_weeks_cat &lt;- cut(ds$date, breaks = "4 weeks", name = "four week categorical date")

ds$wave_cat &lt;- cut(
    ds$date,
    as.Date(c("2020-01-01", "2020-02-15", "2020-04-01", "2020-05-15")),
    labels = c("wave1", "wave2", "wave3"),
    name = "wave var"
  )

## End(Not run)
</code></pre>

<hr>
<h2 id='cut+2CNumericVariable-method'>Cut a numeric Crunch variable</h2><span id='topic+cut+2CNumericVariable-method'></span>

<h3>Description</h3>

<p><code>crunch::cut()</code> is equivalent to <code>base::cut()</code> except that it operates on
Crunch variables instead of in-memory R objects. The function takes a numeric
variable and derives a new categorical variable from it based on the <code>breaks</code>
argument. You can either break the variable into evenly spaced categories by
specifying the number of breaks, or specify a numeric vector identifying
the start and end point of each category. For example, specifying
<code>breaks = 5</code> will break the numeric data into five evenly spaced portions
while <code>breaks = c(1, 5, 10)</code> will recode the data into two groups based on
whether the numeric vector falls between 1 and 5 or 5 and 10.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'NumericVariable'
cut(
  x,
  breaks,
  labels = NULL,
  name,
  include.lowest = FALSE,
  right = TRUE,
  dig.lab = 3,
  ordered_result = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_x">x</code></td>
<td>
<p>A Crunch <code>NumericVariable</code></p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_breaks">breaks</code></td>
<td>
<p>Either a numeric vector of two or more unique cut points
or a single number giving the number of intervals into which <code>x</code> is to be
cut. If specifying cut points, values that are less than the smallest value
in <code>breaks</code> or greater than the largest value in <code>breaks</code> will be marked
missing in the resulting categorical variable.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_labels">labels</code></td>
<td>
<p>A character vector representing the labels for the levels of
the resulting categories. The length of the labels argument should be the
same as the number of categories, which is one fewer than the number of
breaks. If not specified, labels are constructed using interval notation.
For example, <code style="white-space: pre;">&#8288;[1, 5)&#8288;</code> indicates that the category goes from 1 to 5. The
bracket shape indicates whether the boundary value is included in the
category, i.e. whether it is &quot;closed&quot;. <code style="white-space: pre;">&#8288;[1, 5)&#8288;</code> indicates that the interval
includes (is closed on) 1 but does not include (is open on) 5.
If labels = FALSE, simple integer codes are returned instead of a factor.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_name">name</code></td>
<td>
<p>The name of the resulting Crunch variable as a character string.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_include.lowest">include.lowest</code></td>
<td>
<p>logical, indicating if an <code>x[i]</code> equal to the lowest
(or highest, for right = FALSE) <code>breaks</code> value should be included.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_right">right</code></td>
<td>
<p>logical, indicating if the intervals should be closed on the
right (and open on the left) or vice versa.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_dig.lab">dig.lab</code></td>
<td>
<p>integer which is used when labels are not given.
It determines the number of digits used in formatting the break numbers.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_ordered_result">ordered_result</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="cut+2B2CNumericVariable-method_+3A_...">...</code></td>
<td>
<p>further arguments passed to <a href="#topic+makeCaseVariable">makeCaseVariable</a></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Crunch <code><a href="#topic+VariableDefinition">VariableDefinition</a></code>. Assign it into the dataset to create
it as a derived variable on the server.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("mtcars")
ds$cat_var &lt;- cut(ds$mpg,
    breaks = c(10, 15, 20),
    labels = c("small", "medium"), name = "Fuel efficiency"
)
ds$age &lt;- sample(1:100, 32)
ds$age4 &lt;- cut(df$age, c(0, 30, 45, 65, 200),
    c("Youth", "Adult", "Middle-aged", "Elderly"),
    name = "Age (4 category)"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='dashboard'>View or set a dashboard URL</h2><span id='topic+dashboard'></span><span id='topic+setDashboardURL'></span><span id='topic+dashboard+3C-'></span>

<h3>Description</h3>

<p>You can designate a dashboard that will show when the dataset is loaded in
the Crunch web app. This dashboard could be a Crunch Shiny (&quot;Crunchy&quot;) app,
a CrunchBox, an RMarkdown website or something else.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dashboard(x)

setDashboardURL(x, value)

dashboard(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dashboard_+3A_x">x</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="dashboard_+3A_value">value</code></td>
<td>
<p>For the setter, a URL (character) or <code>NULL</code> to unset the
dashboard.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The getter returns a URL (character) or <code>NULL</code>. The setter
returns the dataset (<code>x</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dashboard(ds) &lt;- "https://shiny.crunch.io/example/"

## End(Not run)
</code></pre>

<hr>
<h2 id='dataset-to-R'>as.data.frame method for CrunchDataset</h2><span id='topic+dataset-to-R'></span><span id='topic+as.data.frame.CrunchDataset'></span><span id='topic+as.data.frame.CrunchDataFrame'></span>

<h3>Description</h3>

<p>This method is defined principally so that you can use a <code>CrunchDataset</code> as
a <code>data</code> argument to other R functions (such as <code><a href="stats.html#topic+lm">stats::lm()</a></code>) without
needing to download the whole dataset. You can, however, choose to download
a true <code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CrunchDataset'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  force = FALSE,
  categorical.mode = "factor",
  row.order = NULL,
  include.hidden = TRUE,
  ...
)

## S3 method for class 'CrunchDataFrame'
as.data.frame(
  x,
  row.names = NULL,
  optional = FALSE,
  include.hidden = attr(x, "include.hidden"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dataset-to-R_+3A_x">x</code></td>
<td>
<p>a <code>CrunchDataset</code> or <code>CrunchDataFrame</code></p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_row.names">row.names</code></td>
<td>
<p>part of <code>as.data.frame</code> signature. Ignored.</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_optional">optional</code></td>
<td>
<p>part of <code>as.data.frame</code> signature. Ignored.</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_force">force</code></td>
<td>
<p>logical: actually coerce the dataset to <code>data.frame</code>, or
leave the columns as unevaluated promises. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_categorical.mode">categorical.mode</code></td>
<td>
<p>what mode should categoricals be pulled as? One of
factor, numeric, id (default: factor)</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_row.order">row.order</code></td>
<td>
<p>vector of indices. Which, and their order, of the rows of
the dataset should be presented as (default: <code>NULL</code>). If <code>NULL</code>, then the
Crunch Dataset order will be used.</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_include.hidden">include.hidden</code></td>
<td>
<p>logical: should hidden variables be included? (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="dataset-to-R_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code>as.data.frame</code> (default method).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default, the <code>as.data.frame</code> method for <code>CrunchDataset</code> does not return a
<code>data.frame</code> but instead <code>CrunchDataFrame</code>, which behaves like  a
<code>data.frame</code> without bringing the whole dataset into memory.
When you access the variables of a <code>CrunchDataFrame</code>,
you get an R vector, rather than a <code>CrunchVariable</code>. This allows modeling functions
that require select columns of a dataset to retrieve only those variables from
the remote server, rather than pulling the entire dataset into local
memory.
</p>
<p>If you call <code>as.data.frame()</code> on a <code>CrunchDataset</code> with <code>force = TRUE</code>, you
will instead get a true <code>data.frame</code>. You can also get this <code>data.frame</code> by
calling <code>as.data.frame</code> on a <code>CrunchDataFrame</code> (effectively calling
<code>as.data.frame</code> on the dataset twice)
</p>
<p>When a <code>data.frame</code> is returned, the function coerces Crunch Variable
values into their R equivalents using the following rules:
</p>

<ul>
<li><p> Numeric variables become numeric vectors
</p>
</li>
<li><p> Text variables become character vectors
</p>
</li>
<li><p> Datetime variables become either <code>Date</code> or <code>POSIXt</code> vectors
</p>
</li>
<li><p> Categorical variables become either factors with
levels matching the Crunch Variable's categories (the default), or, if
<code>categorical.mode</code> is specified as &quot;id&quot; or &quot;numeric&quot;, a numeric vector of
category ids or numeric values, respectively
</p>
</li>
<li><p> Array variables (Categorical Array, Multiple Response) are decomposed into
their constituent categorical subvariables. An array with three subvariables,
for example, will result in three columns in the <code>data.frame</code>.
</p>
</li></ul>

<p>Column names in the <code>data.frame</code> are the variable/subvariable aliases.
</p>


<h3>Value</h3>

<p>When called on a <code>CrunchDataset</code>, the method returns an object of
class <code>CrunchDataFrame</code> unless <code>force = TRUE</code>, in which case the return is a
<code>data.frame</code>. For <code>CrunchDataFrame</code>, the method returns a <code>data.frame</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+as.vector">as.vector()</a></code>
</p>

<hr>
<h2 id='DatasetOrder-class'>Organize Datasets</h2><span id='topic+DatasetOrder-class'></span><span id='topic+DatasetOrder'></span><span id='topic+DatasetGroup-class'></span><span id='topic+DatasetGroup'></span>

<h3>Description</h3>

<p>A DatasetOrder object is a subclass of <code>list</code> that contains
DatasetGroups. DatasetGroup objects contain a group name and an set of
&quot;entities&quot;, which can be dataset references or other nested DatasetGroups.
</p>


<h3>Details</h3>

<p>This API is deprecated. Use folders instead.
</p>


<h3>Slots</h3>


<dl>
<dt><code>group</code></dt><dd><p>character, the name of the DatasetGroup. In the constructor and
more generally, this field can be referenced as &quot;name&quot; as well.</p>
</dd>
<dt><code>entities</code></dt><dd><p>a character vector of dataset URLs, or a list containing a
combination of dataset URLs and DatasetGroup objects.</p>
</dd>
</dl>

<hr>
<h2 id='datasetReference'>Get a Crunch object's dataset URL</h2><span id='topic+datasetReference'></span><span id='topic+datasetReference+2CCrunchDataset-method'></span><span id='topic+datasetReference+2CCrunchVariable-method'></span><span id='topic+datasetReference+2CCrunchExpr-method'></span><span id='topic+datasetReference+2CShojiObject-method'></span><span id='topic+datasetReference+2Ccharacter-method'></span><span id='topic+datasetReference+2CANY-method'></span>

<h3>Description</h3>

<p>Get a Crunch object's dataset URL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datasetReference(x)

## S4 method for signature 'CrunchDataset'
datasetReference(x)

## S4 method for signature 'CrunchVariable'
datasetReference(x)

## S4 method for signature 'CrunchExpr'
datasetReference(x)

## S4 method for signature 'ShojiObject'
datasetReference(x)

## S4 method for signature 'character'
datasetReference(x)

## S4 method for signature 'ANY'
datasetReference(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datasetReference_+3A_x">x</code></td>
<td>
<p>a Crunch object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The URL of the dataset which contains that object
</p>

<hr>
<h2 id='datasets'>Get a catalog of datasets</h2><span id='topic+datasets'></span><span id='topic+datasets+3C-'></span>

<h3>Description</h3>

<p>Crunch datasets are collected in folders called &quot;projects&quot;. <code>datasets()</code> can
be used to filter a project's contents to see only datasets (and not other
projects). You can also use it to pull a catalog of datasets from search
results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>datasets(x = getAPIRoot())

datasets(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="datasets_+3A_x">x</code></td>
<td>
<p>a <code>ProjectFolder</code> or <code>SearchResults</code> that may contain datasets</p>
</td></tr>
<tr><td><code id="datasets_+3A_value">value</code></td>
<td>
<p>For assignment, a <code>CrunchDataset</code> to move</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code style="white-space: pre;">&#8288;datasets()&lt;-&#8288;</code> assignment function provides an alternative method for
moving a dataset into a project. This may be more convenient in some cases
than using <code><a href="#topic+mv">mv()</a></code>.
</p>


<h3>Value</h3>

<p>When <code>x</code> is a <code>ProjectFolder</code>, <code>datasets()</code> returns the folder with
its &quot;index&quot; filtered to contain only datasets; otherwise, it returns an
object of class <code>DatasetCatalog</code>. The assignment function returns the
project <code>x</code> with the given dataset added to it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Get the names of the datasets contained in a project
projects() %&gt;%
    cd("Important Clients") %&gt;%
    datasets() %&gt;%
    names()
# The assignment method lets you move a dataset to a project
proj &lt;- cd(projects(), "Important Clients")
ds &lt;- loadDataset("New important client survey")
datasets(proj) &lt;- ds

## End(Not run)
</code></pre>

<hr>
<h2 id='decks'>Get a dataset's DeckCatalog</h2><span id='topic+decks'></span><span id='topic+decks+3C-'></span><span id='topic+decks+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Crunch decks are stored in catalogs. This function returns those catalogs so
that you can access and manipulate decks in R.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>decks(x)

decks(x) &lt;- value

## S4 method for signature 'CrunchDataset'
decks(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="decks_+3A_x">x</code></td>
<td>
<p>a Crunch Dataset</p>
</td></tr>
<tr><td><code id="decks_+3A_value">value</code></td>
<td>
<p>a <code>CrunchDeck</code> to add</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a DeckCatalog
</p>

<hr>
<h2 id='delete'>Delete a Crunch object from the server</h2><span id='topic+delete'></span><span id='topic+delete+2CCrunchDataset-method'></span><span id='topic+delete+2CDatasetTuple-method'></span><span id='topic+delete+2CCrunchDeck-method'></span><span id='topic+delete+2CCrunchSlide-method'></span><span id='topic+delete+2CMultitable-method'></span><span id='topic+delete+2CCrunchTeam-method'></span><span id='topic+delete+2CCrunchVariable-method'></span><span id='topic+delete+2CVariableTuple-method'></span><span id='topic+delete+2CShojiFolder-method'></span><span id='topic+delete+2CShojiTuple-method'></span><span id='topic+delete+2CShojiObject-method'></span><span id='topic+delete+2CANY-method'></span>

<h3>Description</h3>

<p>These methods delete entities, notably Datasets and Variables within them,
from the server. This action is permanent and cannot be undone, so it
should not be done lightly. Consider instead using <code>archive</code>
for datasets and <code>hide</code> for variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>delete(x, ...)

## S4 method for signature 'CrunchDataset'
delete(x, ...)

## S4 method for signature 'DatasetTuple'
delete(x, ...)

## S4 method for signature 'CrunchDeck'
delete(x, ...)

## S4 method for signature 'CrunchSlide'
delete(x, ...)

## S4 method for signature 'Multitable'
delete(x, ...)

## S4 method for signature 'CrunchTeam'
delete(x, ...)

## S4 method for signature 'CrunchVariable'
delete(x, ...)

## S4 method for signature 'VariableTuple'
delete(x, ...)

## S4 method for signature 'ShojiFolder'
delete(x, ...)

## S4 method for signature 'ShojiTuple'
delete(x, ...)

## S4 method for signature 'ShojiObject'
delete(x, ...)

## S4 method for signature 'ANY'
delete(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="delete_+3A_x">x</code></td>
<td>
<p>a Crunch object</p>
</td></tr>
<tr><td><code id="delete_+3A_...">...</code></td>
<td>
<p>additional arguments, generally ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Deleting requires confirmation. In an interactive session, you will be asked
to confirm. To avoid that prompt, or to delete objects from a
non-interactive session, wrap the call in <code><a href="#topic+with_consent">with_consent()</a></code> to give
your permission to delete.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+hide">hide()</a></code> <code><a href="#topic+deleteDataset">deleteDataset()</a></code> <code><a href="#topic+deleteVariables">deleteVariables()</a></code> <code><a href="#topic+deleteSubvariables">deleteSubvariables()</a></code>
</p>

<hr>
<h2 id='deleteDataset'>Delete a dataset from the dataset list</h2><span id='topic+deleteDataset'></span>

<h3>Description</h3>

<p>This function lets you delete a dataset without first loading it, which is
faster.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deleteDataset(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deleteDataset_+3A_x">x</code></td>
<td>
<p>The name (character) of a dataset, a path to a dataset, or a
<code>CrunchDataset</code>. Unless <code>x</code> is a parsed folder path, it can only be of
length 1&ndash;for your protection, this function is not vectorized.</p>
</td></tr>
<tr><td><code id="deleteDataset_+3A_...">...</code></td>
<td>
<p>additional parameters passed to <code><a href="#topic+delete">delete()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function also works on <code>CrunchDataset</code> objects, just like
<code><a href="#topic+delete">delete()</a></code>, which may be useful if you have loaded another
package that masks the <code>crunch::delete()</code> method.
</p>


<h3>Value</h3>

<p>(Invisibly) the API response from deleting the dataset
</p>


<h3>See Also</h3>

<p><code><a href="#topic+delete">delete()</a></code>; <code><a href="#topic+cd">cd()</a></code> for details of parsing and walking dataset
folder/project paths.
</p>

<hr>
<h2 id='deleteSubvariables'>Delete subvariables from an array</h2><span id='topic+deleteSubvariables'></span><span id='topic+deleteSubvariable'></span>

<h3>Description</h3>

<p>Deleting variables requires confirmation. In an interactive session, you will be asked
to confirm. To avoid that prompt, or to delete subvariables from a
non-interactive session, wrap the call in <code><a href="#topic+with_consent">with_consent()</a></code> to give
your permission to delete.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deleteSubvariables(variable, to.delete)

deleteSubvariable(variable, to.delete)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deleteSubvariables_+3A_variable">variable</code></td>
<td>
<p>the array variable</p>
</td></tr>
<tr><td><code id="deleteSubvariables_+3A_to.delete">to.delete</code></td>
<td>
<p>aliases (following <code>crunch.namekey.dataset</code>) or indices
of variables to delete.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To delete the subvariables the function unbinds the array, deletes the subvariable, and
then binds the remaining subvariables into a new array.
</p>


<h3>Value</h3>

<p>a new version of variable without the indicated subvariables
</p>


<h3>See Also</h3>

<p><code><a href="#topic+deleteVariable">deleteVariable()</a></code> <code><a href="#topic+delete">delete()</a></code>
</p>

<hr>
<h2 id='deleteVariables'>Delete Variables Within a Dataset</h2><span id='topic+deleteVariables'></span><span id='topic+deleteVariable'></span>

<h3>Description</h3>

<p>This function permanently deletes a variable from a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deleteVariables(dataset, variables)

deleteVariable(dataset, variables)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deleteVariables_+3A_dataset">dataset</code></td>
<td>
<p>the Dataset to modify</p>
</td></tr>
<tr><td><code id="deleteVariables_+3A_variables">variables</code></td>
<td>
<p>aliases (following <code>crunch.namekey.dataset</code>) or indices
of variables to delete.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In an interactive session, you will be prompted to confirm that you
wish to delete the variable. To avoid that prompt, or to delete variables from a
non-interactive session, wrap the call in <code><a href="#topic+with_consent">with_consent()</a></code> to give
your permission to delete.
</p>


<h3>Value</h3>

<p>(invisibly) <code>dataset</code> with the specified variables deleted
</p>


<h3>See Also</h3>

<p><code><a href="#topic+delete">delete()</a></code>; <code><a href="#topic+deleteSubvariable">deleteSubvariable()</a></code>; For a non-destructive
alternative, see <code><a href="#topic+hide">hide()</a></code>.
</p>

<hr>
<h2 id='derivation'>Get or set a derived variable's expression</h2><span id='topic+derivation'></span><span id='topic+derivation+3C-'></span><span id='topic+is.derived'></span><span id='topic+is.derived+3C-'></span><span id='topic+derivations'></span><span id='topic+derivation+2CCrunchVariable-method'></span><span id='topic+derivation+3C-+2CCrunchVariable+2CANY-method'></span><span id='topic+derivation+3C-+2CCrunchVariable+2CNULL-method'></span><span id='topic+is.derived+2CCrunchVariable-method'></span><span id='topic+is.derived+3C-+2CCrunchVariable+2Clogical-method'></span>

<h3>Description</h3>

<p>Get a derived variable's derivation formula as a <a href="#topic+expressions">CrunchExpr</a> with
<code>derivation(variable)</code>. Set (change) a derived variable's derivation with
<code>derivation(variable) &lt;- expression</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>derivation(x)

derivation(x) &lt;- value

is.derived(x)

is.derived(x) &lt;- value

## S4 method for signature 'CrunchVariable'
derivation(x)

## S4 replacement method for signature 'CrunchVariable,ANY'
derivation(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,'NULL''
derivation(x) &lt;- value

## S4 method for signature 'CrunchVariable'
is.derived(x)

## S4 replacement method for signature 'CrunchVariable,logical'
is.derived(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="derivation_+3A_x">x</code></td>
<td>
<p>a variable</p>
</td></tr>
<tr><td><code id="derivation_+3A_value">value</code></td>
<td>
<p>a <code>CrunchExpr</code> to be used as the derivation (for the setter
only) or <code>NULL</code> to integrate a derived variable. For <code>is.derived</code>, <code>FALSE</code>
can be used to integrate a derived variable.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To break a derivation link between a derived variable and the originating variable, set
the derivation value of the derived variable to <code>NULL</code> with <code>derivation(variable) &lt;- NULL</code>
</p>
<p><code>is.derived</code> can be used to see if a variable is derived or not. Additionally
setting a derived variable's <code>is.derived</code> to <code>FALSE</code> will break the derivation link between
two variables.
</p>


<h3>Value</h3>

<p>a <code>CrunchExpr</code> of the derivation for <code>derivation</code>; a logical for
<code>is.derived</code>; the variable given in <code>x</code> for <code style="white-space: pre;">&#8288;is.derived&lt;-&#8288;</code> returns
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

ds$derived_v1 &lt;- ds$v1 + 5

derivation(ds$derived_v1)
# Crunch expression: v1 + 5

derivation(ds$derived_v1) &lt;- ds$v1 + 10
derivation(ds$derived_v1)
# Crunch expression: v1 + 10

is.derived(ds$derived_v1)
# TRUE

# to integrate or instantiate the variable in place (remove the link between
# variable v1 and the derivation) you can:
derivation(ds$derived_v1) &lt;- NULL

# after integrating, the derived variable is no longer derived.
is.derived(ds$derived_v1)
# FALSE

# Derivations can be updated with arbitrary expressions.
# Consider a numeric case variable that combines weights
# calculated separately in a separate variable
# for each of several waves:
ds$weight &lt;- makeCaseWhenVariable(
    ds$wave == 1 ~ ds$weight_wave1,
    ds$wave == 2 ~ ds$weight_wave2,
    ds$wave == 3 ~ ds$weight_wave3,
    name = "Weight"
)

# When a new wave is added, update the derivation
# of the weight to add the new condition and source
# column.
derivation(ds$weight) &lt;- caseWhenExpr(
    ds$wave == 1 ~ ds$weight_wave1,
    ds$wave == 2 ~ ds$weight_wave2,
    ds$wave == 3 ~ ds$weight_wave3,
    ds$wave == 4 ~ ds$weight_wave4
)

## End(Not run)
</code></pre>

<hr>
<h2 id='deriveArray'>Make a Categorical Array or Multiple Response variable</h2><span id='topic+deriveArray'></span><span id='topic+makeArray'></span><span id='topic+makeMR'></span>

<h3>Description</h3>

<p>In most situations we recommend using <code>deriveArray</code> which leaves your
subvariables in the dataset. <code>makeArray</code> <em>removes</em> component subvariables
from your dataset. Array variables are composed of a set of &quot;subvariables&quot;
bound together for display  in the app. For example, you might have a set of
survey questions that ask how the respondent would rate a TV show from 1-5.
Array variables allow you to display all of their ratings in a compact table
rather than a set of distinct variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deriveArray(subvariables, name, selections, numeric = NULL, ...)

makeArray(subvariables, name, ...)

makeMR(subvariables, name, selections, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deriveArray_+3A_subvariables">subvariables</code></td>
<td>
<p>a list of Variable objects to bind together, or a
Dataset subset which contains only the Variables to bind.</p>
</td></tr>
<tr><td><code id="deriveArray_+3A_name">name</code></td>
<td>
<p>character, the name that the new Categorical Array variable
should have.</p>
</td></tr>
<tr><td><code id="deriveArray_+3A_selections">selections</code></td>
<td>
<p>character (preferred, indicating the names of the
categories), or numeric (indicating the IDs of the categories
in the combined array, which may not be the same as in the original
variables - also note that a category's ID is not the same thing
as its <code>numeric_value</code>). Required for <code>makeMR</code>; optional for
<code>deriveArray</code>; ignored in <code>makeArray</code>.</p>
</td></tr>
<tr><td><code id="deriveArray_+3A_numeric">numeric</code></td>
<td>
<p>Logical indicating whether the array should be a numeric
array or categorical array. <code>NULL</code> the default will guess numeric if
all variables are known to be numeric and categorical if all are
categorical. If any subvariables are created from expressions, then
their type cannot be guessed and so <code>numeric</code> must be specified.</p>
</td></tr>
<tr><td><code id="deriveArray_+3A_...">...</code></td>
<td>
<p>Optional additional attributes to set on the new variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A VariableDefinition that when added to a Dataset will create the
categorical-array or multiple-response variable. <code>deriveArray</code> will
make a derived array expression (or a derived multiple response expression
if <code>selections</code> are supplied), while <code>makeArray</code> and <code>makeMR</code>
return an expression that &quot;binds&quot; variables together, removing them from
independent existence.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Categorical Array - Variables from list of variables
ds$enjoy_cat2 &lt;- deriveArray(
    list(ds$enjoy1, ds$enjoy2),
    "Enjoy activities"
)

# Categorical Array - Variables from var catalog
# (result is the same as `ds$enjoy_cat1` above)
ds$enjoy_cat2 &lt;- deriveArray(
    ds[c("enjoy1", "enjoy2")],
    "Enjoy activities v2"
)

# Multiple Response (selections as character names)
ds$enjoy_mr1 &lt;- deriveArray(
    list(ds$enjoy1, ds$enjoy2),
    "Enjoy activities very much or a little",
    selections = c("Very much", "A little")
)

# Numeric Array
ds$rating_numa &lt;- deriveArray(
    list(ds$rating1, ds$rating2),
    "Activity Rating"
)

# Using VarDef to specify metadata (and thus needing to specify type)
ds$enjoy_mr &lt;- deriveArray(
    list(
        VarDef(ds$enjoy1 == "Very much", name = "enjoy brand 1"),
        VarDef(ds$enjoy2 == "Very much", name = "enjoy brand 2")
    ),
    "Enjoy activities with custom names"
)

# Multiple Response (selections as ids, same as ds$enjoy_mr1)
# Be careful `ids(categories(ds$enjoy1))` is not necessarily the same as
# `values(categories(ds$enjoy1))`
ds$enjoy_mr1 &lt;- deriveArray(
    list(ds$enjoy1, ds$enjoy2),
    "Enjoy activities very much or a little v2",
    selections = c(1, 2)
)

## End(Not run)
</code></pre>

<hr>
<h2 id='describe-entity'>Name, alias, and description for Crunch objects</h2><span id='topic+describe-entity'></span><span id='topic+describe'></span><span id='topic+name'></span><span id='topic+name+3C-'></span><span id='topic+description'></span><span id='topic+description+3C-'></span><span id='topic+alias'></span><span id='topic+alias+3C-'></span><span id='topic+startDate'></span><span id='topic+startDate+3C-'></span><span id='topic+endDate'></span><span id='topic+endDate+3C-'></span><span id='topic+notes'></span><span id='topic+notes+3C-'></span><span id='topic+digits'></span><span id='topic+digits+3C-'></span><span id='topic+uniformBasis'></span><span id='topic+uniformBasis+3C-'></span><span id='topic+id'></span><span id='topic+value'></span><span id='topic+value+3C-'></span><span id='topic+name+2CAbstractCategory-method'></span><span id='topic+name+3C-+2CAbstractCategory-method'></span><span id='topic+name+3C-+2CNULL-method'></span><span id='topic+id+2CAbstractCategory-method'></span><span id='topic+value+2CCategory-method'></span><span id='topic+value+3C-+2CCategory-method'></span><span id='topic+dates+2CCategory-method'></span><span id='topic+dates+3C-+2CCategory-method'></span><span id='topic+name+2CCrunchDataset-method'></span><span id='topic+name+3C-+2CCrunchDataset-method'></span><span id='topic+description+2CCrunchDataset-method'></span><span id='topic+description+3C-+2CCrunchDataset-method'></span><span id='topic+startDate+2CCrunchDataset-method'></span><span id='topic+startDate+3C-+2CCrunchDataset-method'></span><span id='topic+endDate+2CCrunchDataset-method'></span><span id='topic+endDate+3C-+2CCrunchDataset-method'></span><span id='topic+id+2CCrunchDataset-method'></span><span id='topic+notes+2CCrunchDataset-method'></span><span id='topic+notes+3C-+2CCrunchDataset-method'></span><span id='topic+name+3C-+2CCrunchDeck-method'></span><span id='topic+description+2CCrunchDeck-method'></span><span id='topic+description+3C-+2CCrunchDeck-method'></span><span id='topic+description+2CGeodata-method'></span><span id='topic+name+3C-+2CMultitable-method'></span><span id='topic+name+3C-+2CProjectFolder-method'></span><span id='topic+name+2CProjectFolder-method'></span><span id='topic+name+2CShojiObject-method'></span><span id='topic+name+3C-+2CVariableFolder-method'></span><span id='topic+alias+2CVariableTuple-method'></span><span id='topic+description+2CVariableTuple-method'></span><span id='topic+notes+2CVariableTuple-method'></span><span id='topic+name+2CCrunchVariable-method'></span><span id='topic+name+3C-+2CCrunchVariable-method'></span><span id='topic+id+2CCrunchVariable-method'></span><span id='topic+description+2CCrunchVariable-method'></span><span id='topic+description+3C-+2CCrunchVariable-method'></span><span id='topic+alias+2CCrunchVariable-method'></span><span id='topic+alias+3C-+2CCrunchVariable-method'></span><span id='topic+notes+2CCrunchVariable-method'></span><span id='topic+notes+3C-+2CCrunchVariable-method'></span><span id='topic+digits+2CCrunchVariable-method'></span><span id='topic+digits+3C-+2CNumericVariable-method'></span><span id='topic+digits+3C-+2CCrunchVariable-method'></span><span id='topic+uniformBasis+2CMultipleResponseVariable-method'></span><span id='topic+uniformBasis+3C-+2CMultipleResponseVariable-method'></span>

<h3>Description</h3>

<p>Name, alias, and description for Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>name(x)

name(x) &lt;- value

id(x)

value(x)

value(x) &lt;- value

description(x)

description(x) &lt;- value

startDate(x)

startDate(x) &lt;- value

endDate(x)

endDate(x) &lt;- value

alias(object, ...)

alias(x) &lt;- value

digits(x)

digits(x) &lt;- value

uniformBasis(x)

uniformBasis(x) &lt;- value

notes(x)

notes(x) &lt;- value

## S4 method for signature 'AbstractCategory'
name(x)

## S4 replacement method for signature 'AbstractCategory'
name(x) &lt;- value

## S4 replacement method for signature ''NULL''
name(x) &lt;- value

## S4 method for signature 'AbstractCategory'
id(x)

## S4 method for signature 'Category'
value(x)

## S4 replacement method for signature 'Category'
value(x) &lt;- value

## S4 method for signature 'Category'
dates(x)

## S4 replacement method for signature 'Category'
dates(x) &lt;- value

## S4 method for signature 'CrunchDataset'
name(x)

## S4 replacement method for signature 'CrunchDataset'
name(x) &lt;- value

## S4 method for signature 'CrunchDataset'
description(x)

## S4 replacement method for signature 'CrunchDataset'
description(x) &lt;- value

## S4 method for signature 'CrunchDataset'
startDate(x)

## S4 replacement method for signature 'CrunchDataset'
startDate(x) &lt;- value

## S4 method for signature 'CrunchDataset'
endDate(x)

## S4 replacement method for signature 'CrunchDataset'
endDate(x) &lt;- value

## S4 method for signature 'CrunchDataset'
id(x)

## S4 method for signature 'CrunchDataset'
notes(x)

## S4 replacement method for signature 'CrunchDataset'
notes(x) &lt;- value

## S4 replacement method for signature 'CrunchDeck'
name(x) &lt;- value

## S4 method for signature 'CrunchDeck'
description(x)

## S4 replacement method for signature 'CrunchDeck'
description(x) &lt;- value

## S4 method for signature 'Geodata'
description(x)

## S4 replacement method for signature 'Multitable'
name(x) &lt;- value

## S4 replacement method for signature 'ProjectFolder'
name(x) &lt;- value

## S4 method for signature 'ProjectFolder'
name(x)

## S4 method for signature 'ShojiObject'
name(x)

## S4 replacement method for signature 'VariableFolder'
name(x) &lt;- value

## S4 method for signature 'VariableTuple'
alias(object)

## S4 method for signature 'VariableTuple'
description(x)

## S4 method for signature 'VariableTuple'
notes(x)

## S4 method for signature 'CrunchVariable'
name(x)

## S4 replacement method for signature 'CrunchVariable'
name(x) &lt;- value

## S4 method for signature 'CrunchVariable'
id(x)

## S4 method for signature 'CrunchVariable'
description(x)

## S4 replacement method for signature 'CrunchVariable'
description(x) &lt;- value

## S4 method for signature 'CrunchVariable'
alias(object)

## S4 replacement method for signature 'CrunchVariable'
alias(x) &lt;- value

## S4 method for signature 'CrunchVariable'
notes(x)

## S4 replacement method for signature 'CrunchVariable'
notes(x) &lt;- value

## S4 method for signature 'CrunchVariable'
digits(x)

## S4 replacement method for signature 'NumericVariable'
digits(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable'
digits(x) &lt;- value

## S4 method for signature 'MultipleResponseVariable'
uniformBasis(x)

## S4 replacement method for signature 'MultipleResponseVariable'
uniformBasis(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="describe-entity_+3A_x">x</code></td>
<td>
<p>a Dataset or Variable.</p>
</td></tr>
<tr><td><code id="describe-entity_+3A_value">value</code></td>
<td>
<p>For the setters, a length-1 character vector to assign</p>
</td></tr>
<tr><td><code id="describe-entity_+3A_object">object</code></td>
<td>
<p>Same as <code>x</code> but for the <code>alias</code> method, in order to
match the generic from another package.</p>
</td></tr>
<tr><td><code id="describe-entity_+3A_...">...</code></td>
<td>
<p>additional arguments in the <code>alias</code> generic, ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Getters return the character object in the specified slot; setters
return <code>x</code> duly modified.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Categories">Categories</a></code> <code><a href="#topic+describe-catalog">describe-catalog</a></code>
</p>

<hr>
<h2 id='dichotomize'>Indicate how categories represent a dichotomized value</h2><span id='topic+dichotomize'></span><span id='topic+is.dichotomized'></span><span id='topic+undichotomize'></span><span id='topic+is.selected'></span><span id='topic+is.selected+3C-'></span><span id='topic+is.dichotomized+2CCategories-method'></span><span id='topic+dichotomize+2CCategories+2Cnumeric-method'></span><span id='topic+dichotomize+2CCategories+2Clogical-method'></span><span id='topic+dichotomize+2CCategories+2Ccharacter-method'></span><span id='topic+undichotomize+2CCategories-method'></span><span id='topic+dichotomize+2CCategoricalVariable+2CANY-method'></span><span id='topic+dichotomize+2CCategoricalArrayVariable+2CANY-method'></span><span id='topic+undichotomize+2CCategoricalVariable-method'></span><span id='topic+undichotomize+2CCategoricalArrayVariable-method'></span><span id='topic+is.selected+2CCategories-method'></span><span id='topic+is.selected+3C-+2CCategories-method'></span><span id='topic+is.selected+2CCategory-method'></span><span id='topic+is.selected+3C-+2CCategory-method'></span>

<h3>Description</h3>

<p>Multiple Response variables are Categorical Arrays in which one
or more categories are set as &quot;selected&quot;. These methods allow you to view
and set that attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.dichotomized(x)

dichotomize(x, i)

undichotomize(x)

is.selected(x)

is.selected(x) &lt;- value

## S4 method for signature 'Categories'
is.dichotomized(x)

## S4 method for signature 'Categories,numeric'
dichotomize(x, i)

## S4 method for signature 'Categories,logical'
dichotomize(x, i)

## S4 method for signature 'Categories,character'
dichotomize(x, i)

## S4 method for signature 'Categories'
undichotomize(x)

## S4 method for signature 'CategoricalVariable,ANY'
dichotomize(x, i)

## S4 method for signature 'CategoricalArrayVariable,ANY'
dichotomize(x, i)

## S4 method for signature 'CategoricalVariable'
undichotomize(x)

## S4 method for signature 'CategoricalArrayVariable'
undichotomize(x)

## S4 method for signature 'Categories'
is.selected(x)

## S4 replacement method for signature 'Categories'
is.selected(x) &lt;- value

## S4 method for signature 'Category'
is.selected(x)

## S4 replacement method for signature 'Category'
is.selected(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dichotomize_+3A_x">x</code></td>
<td>
<p>Categories or a Variable subclass that has Categories</p>
</td></tr>
<tr><td><code id="dichotomize_+3A_i">i</code></td>
<td>
<p>For the <code>dichotomize</code> methods, the numeric or logical indices
of the categories to mark as &quot;selected&quot;, or if character, the Category
&quot;names&quot;. Note that unlike some other categorical variable methods,
numeric indices are positional, not with reference to category ids.</p>
</td></tr>
<tr><td><code id="dichotomize_+3A_value">value</code></td>
<td>
<p>For <code style="white-space: pre;">&#8288;is.selected&lt;-&#8288;</code>,
A logical vector indicating whether the category should be selected.
For a single category the value should be either <code>TRUE</code> or <code>FALSE</code>. To change the
selection status for a <code>Categories</code> object, supply a logical vector which is the
same length as the number of categories.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dichotomize</code> lets you specify which categories are &quot;selected&quot;, while
<code>undichotomize</code> strips that selection information. Dichotomize converts
a Categorical Array to a Multiple Response, and undichotomize does the reverse.
<code>is.dichotomized</code> reports whether categories have any selected values.
</p>
<p><code>is.selected</code> is lower level and maps more directly onto the &quot;selected&quot;
attributes of categories. The best illustration of this difference is that
<code>is.selected(categories(var))</code> returns a logical vector, a value for each
category, while <code>is.dichotomized(categories(var))</code> returns a single
<code>TRUE/FALSE</code> value.
</p>


<h3>Value</h3>

<p>Categories or the Variable, (un)dichotomized accordingly
</p>


<h3>See Also</h3>

<p><code><a href="#topic+describe-entity">describe-entity</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- newExampleDataset()
is.MR(ds$allpets)
is.dichotomized(categories(ds$allpets))
is.selected(categories(ds$allpets))
ds$allpets &lt;- undichotomize(ds$allpets)
is.CA(ds$allpets)
ds$allpets &lt;- dichotomize(ds$allpets, "selected")
is.MR(ds$allpets)

## End(Not run)
</code></pre>

<hr>
<h2 id='dimension-comparison'>Column and row comparison</h2><span id='topic+dimension-comparison'></span><span id='topic+compareCols'></span><span id='topic+compareRows'></span><span id='topic+compareDims'></span>

<h3>Description</h3>

<p>Comparing a column or row with a baseline column or row. This calculates the
z-score for the cells when comparing <code>x</code> to the baseline columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compareCols(cube, ...)

compareRows(cube, ...)

compareDims(cube, dim = c("cols", "rows"), baseline, x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimension-comparison_+3A_cube">cube</code></td>
<td>
<p>a cube to calculate the comparison on</p>
</td></tr>
<tr><td><code id="dimension-comparison_+3A_...">...</code></td>
<td>
<p>arguments passed from <code>compareRows()</code> or <code>compareCols()</code> to
<code>compareDims()</code> (i.e. <code>baseline</code> and <code>x</code>)</p>
</td></tr>
<tr><td><code id="dimension-comparison_+3A_dim">dim</code></td>
<td>
<p>which dimension is being compared (<code>rows</code> or <code>cols</code>, only valid
for <code>compareDims()</code>)</p>
</td></tr>
<tr><td><code id="dimension-comparison_+3A_baseline">baseline</code></td>
<td>
<p>a character, the column to use as a baseline to compare <code>x</code>
against</p>
</td></tr>
<tr><td><code id="dimension-comparison_+3A_x">x</code></td>
<td>
<p>a character, the column to compare against the baseline</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the z-score for the column or row given in <code>x</code>
</p>

<hr>
<h2 id='dimension-comparison-pairwise'>Pairwise column and row comparison</h2><span id='topic+dimension-comparison-pairwise'></span><span id='topic+compareColsPairwise'></span><span id='topic+compareRowsPairwise'></span><span id='topic+compareDimsPairwise'></span>

<h3>Description</h3>

<p>Given a single baseline column compare each other row or column against this
baseline. Internally this function uses <code>compareDims()</code> iteratively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compareColsPairwise(cube, ...)

compareRowsPairwise(cube, ...)

compareDimsPairwise(cube, dim = c("cols", "rows"), baseline)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimension-comparison-pairwise_+3A_cube">cube</code></td>
<td>
<p>a cube to calculate the comparison on</p>
</td></tr>
<tr><td><code id="dimension-comparison-pairwise_+3A_...">...</code></td>
<td>
<p>arguments passed from <code>compareRowsPairwise()</code> or
<code>compareColsPairwise()</code> to <code>compareDimsPairwise()</code> (i.e. <code>baseline</code>)</p>
</td></tr>
<tr><td><code id="dimension-comparison-pairwise_+3A_dim">dim</code></td>
<td>
<p>which dimension is being compared (<code>rows</code> or <code>cols</code>, only valid
for <code>compareDims()</code>)</p>
</td></tr>
<tr><td><code id="dimension-comparison-pairwise_+3A_baseline">baseline</code></td>
<td>
<p>a character, the column to use as a baseline to compare
against all other columns</p>
</td></tr>
</table>


<h3>Details</h3>

<p><em>Warning</em> since there is more than one comparison being made against each
baseline the z-scores, and especially the p-values derived from these
z-scores should be interpreted with caution. Using standard p-value cutoffs
will result in anti-conservative interpretations because of the
<a href="https://en.wikipedia.org/wiki/Multiple_comparisons_problem">multiple
comparisons problem</a>.
Adjustments to p-value cut offs (e.g.
<a href="https://en.wikipedia.org/wiki/Bonferroni_correction">Bonferonni correction</a>)
should be used when interpreting z-scores from the
<code style="white-space: pre;">&#8288;compare[Rows|Cols|Dims]Pairwise()&#8288;</code> family of functions.
</p>


<h3>Value</h3>

<p>an array of z-score for the all the columns or rows compared to
<code>baseline</code>. The <code>baseline</code> column is all 0s
</p>

<hr>
<h2 id='dimensions'>Methods on Cube objects</h2><span id='topic+dimensions'></span><span id='topic+dimensions+3C-'></span><span id='topic+measures'></span><span id='topic+cube-methods'></span><span id='topic+dimnames+2CCubeDims-method'></span><span id='topic+dim+2CCubeDims-method'></span><span id='topic+is.na+2CCubeDims-method'></span><span id='topic+dimensions+2CCrunchCube-method'></span><span id='topic+dimensions+3C-+2CCrunchCube+2CCubeDims-method'></span><span id='topic+dim+2CCrunchCube-method'></span><span id='topic+dimnames+2CCrunchCube-method'></span><span id='topic+measures+2CCrunchCube-method'></span>

<h3>Description</h3>

<p>These methods provide an <code>array</code>-like interface to the CrunchCube
object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dimensions(x)

dimensions(x) &lt;- value

measures(x)

## S4 method for signature 'CubeDims'
dimnames(x)

## S4 method for signature 'CubeDims'
dim(x)

## S4 method for signature 'CubeDims'
is.na(x)

## S4 method for signature 'CrunchCube'
dimensions(x)

## S4 replacement method for signature 'CrunchCube,CubeDims'
dimensions(x) &lt;- value

## S4 method for signature 'CrunchCube'
dim(x)

## S4 method for signature 'CrunchCube'
dimnames(x)

## S4 method for signature 'CrunchCube'
measures(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimensions_+3A_x">x</code></td>
<td>
<p>a CrunchCube or its CubeDims component.</p>
</td></tr>
<tr><td><code id="dimensions_+3A_value">value</code></td>
<td>
<p>for <code style="white-space: pre;">&#8288;dimensions&lt;-&#8288;</code> a <code>CubeDims</code> object to overwrite a CrunchCube
dimensions</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Generally, the same shape of result that each of these functions
return when applied to an <code>array</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cube-computing">cube-computing</a></code> <code><a href="base.html#topic+array">base::array</a></code>
</p>

<hr>
<h2 id='dimSums'>Collapse an array from a CrunchCube by summing across dimensions to remove</h2><span id='topic+dimSums'></span>

<h3>Description</h3>

<p>Typically when collapsing a crosstab you can just sum across the dimensions
that you want to collapse across. However, because we have array-type
questions/dimensions we have to be a little bit smarter. We cannot sum across
any subvariable dimension (dimension types ending with &quot;_items&quot;) because that
would inflate the number of respondents by approximately the number of
subvariables. Instead, we take the mean across any &quot;_items&quot; dimension. In
principle, we could just take a single item or <code>unique</code> across the &quot;_items&quot;
dimensions, however due to floating point differences + rounding there are
minute differences that pop up, <code>mean</code> smooths over those tiny differences.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dimSums(x, margin = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dimSums_+3A_x">x</code></td>
<td>
<p>the CrunchCube to collapse</p>
</td></tr>
<tr><td><code id="dimSums_+3A_margin">margin</code></td>
<td>
<p>the margins that should be summed within (in other words: the
dimension that will be retained)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>dimSums</code> returns a cube that retains the dimensions given in <code>margin</code> and
collapses all the others. This is useful if you want to get counts that are
equivalent to a univariate cube from a multivariate cube. For example
<code>dimSums(crtabs(~ fruit + pets, ds), 1)</code> will be equal to <code>crtabs(~ fruit, ds)</code> and <code>dimSums(crtabs(~ fruit + pets, ds), 2)</code> will be equal to <code>crtabs(~ pets, ds)</code>.
</p>


<h3>Value</h3>

<p>a duly-collapsed CrunchCube
</p>

<hr>
<h2 id='dropRows'>Permanently delete rows from a dataset</h2><span id='topic+dropRows'></span>

<h3>Description</h3>

<p>Permanently delete rows from a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dropRows(dataset, expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dropRows_+3A_dataset">dataset</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="dropRows_+3A_expr">expr</code></td>
<td>
<p>a <code>CrunchLogicalExpr</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataset</code> without the rows indicated by <code>expr</code>
</p>


<h3>See Also</h3>

<p><a href="#topic+exclusion">exclusion</a> for a non-destructive way to suppress rows
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- dropRows(ds, ds$gender == "Male")

## End(Not run)
</code></pre>

<hr>
<h2 id='duplicated'>&quot;duplicated&quot; method for Crunch objects</h2><span id='topic+duplicated'></span><span id='topic+duplicated+2CCrunchVariable-method'></span><span id='topic+duplicated+2CCrunchExpr-method'></span>

<h3>Description</h3>

<p>&quot;duplicated&quot; method for Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>duplicated(x, incomparables = FALSE, ...)

## S4 method for signature 'CrunchVariable'
duplicated(x, incomparables = FALSE, ...)

## S4 method for signature 'CrunchExpr'
duplicated(x, incomparables = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="duplicated_+3A_x">x</code></td>
<td>
<p><code>CrunchVariable</code> or <code>CrunchExpr</code></p>
</td></tr>
<tr><td><code id="duplicated_+3A_incomparables">incomparables</code></td>
<td>
<p>Ignored</p>
</td></tr>
<tr><td><code id="duplicated_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>CrunchLogicalExpr</code> that evaluates <code>TRUE</code> for all repeated
entries after the first occurrence of a value.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+duplicated">base::duplicated()</a></code>
</p>

<hr>
<h2 id='email'>Extract the email from a User Entity</h2><span id='topic+email'></span><span id='topic+email+2CUserEntity-method'></span>

<h3>Description</h3>

<p>Extract the email from a User Entity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>email(x)

## S4 method for signature 'UserEntity'
email(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="email_+3A_x">x</code></td>
<td>
<p>a UserEntity returned from <code>me()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string of the user's email
</p>

<hr>
<h2 id='embedCrunchBox'>Get HTML for embedding a CrunchBox</h2><span id='topic+embedCrunchBox'></span>

<h3>Description</h3>

<p><code><a href="#topic+crunchBox">crunchBox()</a></code> returns a URL to the box data that it generates, but
in order to view it in a CrunchBox or to embed it on a website, you'll need
to translate that to the Box's public URL and wrap it in some HTML. This function
takes a CrunchBox and returns the HTML which you can embed in a website.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>embedCrunchBox(box, title = NULL, logo = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="embedCrunchBox_+3A_box">box</code></td>
<td>
<p>character URL of the box data, as returned by <code>crunchBox()</code></p>
</td></tr>
<tr><td><code id="embedCrunchBox_+3A_title">title</code></td>
<td>
<p>character title for the Box, to appear above the iframe. Default
is <code>NULL</code>, meaning no title shown</p>
</td></tr>
<tr><td><code id="embedCrunchBox_+3A_logo">logo</code></td>
<td>
<p>character URL of a logo to show instead of a title. Default is
<code>NULL</code>, meaning no logo shown. If both logo and title are provided, only the
logo will be shown. Note also that logo must be a URL of a hosted image: it
cannot be a path to a local file.</p>
</td></tr>
<tr><td><code id="embedCrunchBox_+3A_...">...</code></td>
<td>
<p>Additional arguments, not currently used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Prints the HTML markup to the screen and also returns it invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+crunchBox">crunchBox()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
box &lt;- crunchBox(ds)
embedCrunchBox(box, logo = "//myco.example/img/logo_200px.png")

## End(Not run)
</code></pre>

<hr>
<h2 id='ensureValidCase'>Validate case statements for case variables</h2><span id='topic+ensureValidCase'></span>

<h3>Description</h3>

<p>Validate case statements for case variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensureValidCase(case)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ensureValidCase_+3A_case">case</code></td>
<td>
<p>a list for one case to test
</p>
<p>List elements:
</p>

<ol>
<li> <p><code>id</code>: an integer to use for this category when a case variable is made
(default: none, one will automatically be assigned when the case variable
is made)
</p>
</li>
<li> <p><code>name</code>: a character identifier for this case
</p>
</li>
<li> <p><code>expression</code>: a <code>CrunchLogicalExpr</code> that sets the conditions for the case, or &quot;else&quot;
</p>
</li>
<li> <p><code>numeric_value</code>: a numeric that is the value this case should take on
when analyzing the data numerically (mean, standard deviation, etc.)
</p>
</li>
<li> <p><code>missing</code> a logical indicating if this case should be treated as missing
</p>
</li></ol>
</td></tr>
</table>

<hr>
<h2 id='entity'>Methods for ShojiTuples</h2><span id='topic+entity'></span><span id='topic++24+2CShojiEntity-method'></span><span id='topic++24+3C-+2CShojiEntity-method'></span><span id='topic++5B+5B+2CShojiEntity+2CANY-method'></span><span id='topic++5B+5B+3C-+2CShojiEntity+2CANY+2CANY+2CANY-method'></span><span id='topic+tuple-methods'></span><span id='topic+refresh+2CShojiTuple-method'></span><span id='topic++24+2CShojiTuple-method'></span><span id='topic++24+3C-+2CShojiTuple-method'></span><span id='topic++5B+5B+2CShojiTuple+2CANY-method'></span><span id='topic++5B+5B+3C-+2CShojiTuple+2CANY+2CANY+2CANY-method'></span><span id='topic+self+2CShojiTuple-method'></span><span id='topic+entity+2CVariableTuple-method'></span><span id='topic+entity+2CCrunchVariable-method'></span><span id='topic+entity+2CDatasetTuple-method'></span><span id='topic+id+2CDatasetTuple-method'></span><span id='topic+name+2CShojiTuple-method'></span><span id='topic+name+3C-+2CShojiTuple-method'></span><span id='topic+type+2CShojiTuple-method'></span>

<h3>Description</h3>

<p>ShojiTuples are objects extracted from ShojiCatalogs. They are internally
used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>entity(x)

## S4 method for signature 'ShojiEntity'
x$name

## S4 replacement method for signature 'ShojiEntity'
x$name &lt;- value

## S4 method for signature 'ShojiEntity,ANY'
x[[i]]

## S4 replacement method for signature 'ShojiEntity,ANY,ANY,ANY'
x[[i]] &lt;- value

## S4 method for signature 'ShojiTuple'
refresh(x)

## S4 method for signature 'ShojiTuple'
x$name

## S4 replacement method for signature 'ShojiTuple'
x$name &lt;- value

## S4 method for signature 'ShojiTuple,ANY'
x[[i]]

## S4 replacement method for signature 'ShojiTuple,ANY,ANY,ANY'
x[[i]] &lt;- value

## S4 method for signature 'ShojiTuple'
self(x)

## S4 method for signature 'VariableTuple'
entity(x)

## S4 method for signature 'CrunchVariable'
entity(x)

## S4 method for signature 'DatasetTuple'
entity(x)

## S4 method for signature 'DatasetTuple'
id(x)

## S4 method for signature 'ShojiTuple'
name(x)

## S4 replacement method for signature 'ShojiTuple'
name(x) &lt;- value

## S4 method for signature 'ShojiTuple'
type(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="entity_+3A_x">x</code></td>
<td>
<p>a Tuple</p>
</td></tr>
<tr><td><code id="entity_+3A_name">name</code></td>
<td>
<p>a Tuple slot to get or set</p>
</td></tr>
<tr><td><code id="entity_+3A_value">value</code></td>
<td>
<p>What to set in a given slot</p>
</td></tr>
<tr><td><code id="entity_+3A_i">i</code></td>
<td>
<p>In [[, a Tuple slot to get</p>
</td></tr>
</table>

<hr>
<h2 id='envOrOption'>Get/set options (user-specified, in environment, or in R options)</h2><span id='topic+envOrOption'></span><span id='topic+set_crunch_opts'></span>

<h3>Description</h3>

<p>These functions allow for a consistent framework of options for the
crunch package. When retrieving options, <code>envOrOption()</code> first
looks for options set with the <code>set_crunch_opts()</code>, followed by
options in the environment (see <code><a href="base.html#topic+Sys.getenv">Sys.getenv()</a></code>)
and finally in the R options (see <code><a href="base.html#topic+options">options</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>envOrOption(opt, default = NULL, expect_lgl = FALSE, expect_num = FALSE)

set_crunch_opts(..., .source = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="envOrOption_+3A_opt">opt</code></td>
<td>
<p>the option to get/set</p>
</td></tr>
<tr><td><code id="envOrOption_+3A_default">default</code></td>
<td>
<p>if the specified option is not set in either the option or as
an environment variable, use this instead.</p>
</td></tr>
<tr><td><code id="envOrOption_+3A_...">...</code></td>
<td>
<p>Named arguments describing which options to set</p>
</td></tr>
<tr><td><code id="envOrOption_+3A_.source">.source</code></td>
<td>
<p>(Optional) A character vector describing where the option was set from</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Environment variables are generally set at the operating system level,
but R does look at a file called <code>.Renviron</code> on startup, and you can
also set them using the function <code><a href="base.html#topic+Sys.setenv">Sys.setenv()</a></code>. Options are generally
set using a <code>options()</code> function in the <code>.Rprofile</code> file, but can be
set using that function anywhere.
</p>
<p>The main <code>crunch</code> R package uses the following options (note that
the option name is in all capital letters, with &quot;.&quot; replaced with
&quot;<em>&quot; and a &quot;R</em>&quot; prefix when used as an environment variable):</p>

<table>
<tr>
 <td style="text-align: left;">
   Option name </td><td style="text-align: left;"> Env variable </td><td style="text-align: left;"> Default value </td><td style="text-align: left;"> Explanation </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.api </td><td style="text-align: left;"> R_CRUNCH_API </td><td style="text-align: left;"> "https://app.crunch.io/api/" </td><td style="text-align: left;"> URL of API to use </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.api.key </td><td style="text-align: left;"> R_CRUNCH_API_KEY </td><td style="text-align: left;">  </td><td style="text-align: left;"> Key to use to authenticate with crunch (see <code>help('crunch-api-key')</code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.show.progress </td><td style="text-align: left;"> R_CRUNCH_SHOW_PROGRESS </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to show progress bars during interactive sessions </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.timeout </td><td style="text-align: left;"> R_CRUNCH_TIMEOUT </td><td style="text-align: left;"> 900 </td><td style="text-align: left;"> Number of seconds to wait before timing out a request </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.show.progress.url </td><td style="text-align: left;"> R_CRUNCH_SHOW_PROGRESS_URL </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> Whether to show the URL when checking progress </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch_retry_wait </td><td style="text-align: left;"> R_CRUNCH_RETRY_WAIT </td><td style="text-align: left;"> 0.1 </td><td style="text-align: left;"> Number of seconds to wait before retrying a download </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.require.confirmation </td><td style="text-align: left;"> R_CRUNCH_REQUIRE_CONFIRMATION </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to require confirmation for destructive actions (like <code><a href="#topic+delete">delete()</a></code>) </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.warn.hidden </td><td style="text-align: left;"> R_CRUNCH_WARN_HIDDEN </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to warn when using a hidden variable </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.warn.private </td><td style="text-align: left;"> R_CRUNCH_WARN_PRIVATE </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to warn when using a private variable </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.names.includes.hidden.private.variables </td><td style="text-align: left;"> R_NAMES_INCLUDES_HIDDEN_PRIVATE_VARIABLES </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to include hidden/private variables from names(ds) </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.order.var.catalog </td><td style="text-align: left;"> R_CRUNCH_ORDER_VAR_CATALOG </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to set the variable catalog in the order of the hierarchical order </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.delimiter </td><td style="text-align: left;"> R_CRUNCH_DELIMITER </td><td style="text-align: left;"> "/" </td><td style="text-align: left;"> What to use as a delimiter when printing folder paths </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.check.updates </td><td style="text-align: left;"> R_CRUNCH_CHECK_UPDATES </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to check for updates to the crunch package </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.debug </td><td style="text-align: left;"> R_CRUNCH_DEBUG </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> Whether to print verbose information for debugging </td>
</tr>
<tr>
 <td style="text-align: left;">
   test.verify.ssl </td><td style="text-align: left;"> R_TEST_VERIFY_SSL </td><td style="text-align: left;"> TRUE </td><td style="text-align: left;"> Whether to verify ssl in curl during crunch tests </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.stabilize.query </td><td style="text-align: left;"> R_CRUNCH_STABILIZE_QUERY </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> Whether to stabilize JSON objects for saving as <code>httptest</code> objects </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.namekey.dataset </td><td style="text-align: left;"> R_CRUNCH_NAMEKEY_DATASET </td><td style="text-align: left;"> "alias" </td><td style="text-align: left;"> What variable identifier (alias or name) to use for a dataset's variables </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.namekey.array </td><td style="text-align: left;"> R_CRUNCH_NAMEKEY_ARRAY </td><td style="text-align: left;"> "alias" </td><td style="text-align: left;"> What variable identifier (alias or name) to use for an array's subvariables </td>
</tr>
<tr>
 <td style="text-align: left;">
   crunch.namekey.variableorder </td><td style="text-align: left;"> R_CRUNCH_NAMEKEY_VARIABLEORDER </td><td style="text-align: left;"> "name" </td><td style="text-align: left;"> What variable identifier (alias or name) to use for an order's variables </td>
</tr>
<tr>
 <td style="text-align: left;">
   use.legacy.tabbook.endpoint </td><td style="text-align: left;"> R_USE_LEGACY_TABBOOK_ENDPOINT </td><td style="text-align: left;"> FALSE </td><td style="text-align: left;"> (Deprecated) Whether to use legacy tabbook endpoint in <code><a href="#topic+tabBook">tabBook()</a></code> </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Value</h3>

<p>the value of the option
</p>

<hr>
<h2 id='escapeRegex'>Escape a regular expression</h2><span id='topic+escapeRegex'></span>

<h3>Description</h3>

<p>This function takes a string and escapes all of the special characters in the
string. For example, the <code>.</code> in <code>VB.NET</code> will be escaped with a slash (though
regular R printing will make it look like there are two slashes).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>escapeRegex(string)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="escapeRegex_+3A_string">string</code></td>
<td>
<p>A regular expression to escape</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>string</code>, escaped.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
escapeRegex("Tom&amp;Jerry")
escapeRegex(".Net")

## End(Not run)
</code></pre>

<hr>
<h2 id='exclusion'>View and set exclusion filters</h2><span id='topic+exclusion'></span><span id='topic+exclusion+3C-'></span>

<h3>Description</h3>

<p>Exclusion filters express logic that defines a set of rows that should be
dropped from the dataset. The rows aren't permanently deleted&mdash;you can
recover them at any time by removing the exclusion filter&mdash;but they are
omitted from all views and calculations, as if they had been deleted.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exclusion(x)

exclusion(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exclusion_+3A_x">x</code></td>
<td>
<p>a Dataset</p>
</td></tr>
<tr><td><code id="exclusion_+3A_value">value</code></td>
<td>
<p>an object of class <code>CrunchLogicalExpr</code>, or <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that exclusion filters work opposite from how &quot;normal&quot; filters work.
That is, a regular filter expression defines the subset of rows to operate
on: it says &quot;keep these rows.&quot; An exclusion filter defines which rows to
omit. Applying a filter expression as a query filter will have the
opposite effect if applied as an exclusion. Indeed, applying it as both
query filter and exclusion at the same time will result in 0 rows.
</p>


<h3>Value</h3>

<p><code>exclusion</code> returns a <code>CrunchFilter</code> if there is one,
else <code>NULL</code>. The setter returns <code>x</code> with the filter set.
</p>

<hr>
<h2 id='exportDataset'>Export a dataset to a file</h2><span id='topic+exportDataset'></span><span id='topic+write.csv'></span><span id='topic+write.csv+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>This function allows you to write a CrunchDataset to a .csv or SPSS .sav file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportDataset(
  dataset,
  file,
  format = c("csv", "spss", "parquet"),
  categorical = c("name", "id"),
  na = NULL,
  varlabel = c("name", "description"),
  include.hidden = FALSE,
  ...
)

## S4 method for signature 'CrunchDataset'
write.csv(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportDataset_+3A_dataset">dataset</code></td>
<td>
<p>CrunchDataset, which may have been subsetted with a filter
expression on the rows and a selection of variables on the columns.</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_file">file</code></td>
<td>
<p>character local filename to write to</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_format">format</code></td>
<td>
<p>character export format: currently supported values are &quot;csv&quot;
and &quot;spss&quot; (and experimental support for &quot;parquet&quot;).</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_categorical">categorical</code></td>
<td>
<p>character: export categorical values to CSV as category
&quot;name&quot; (default) or &quot;id&quot;. Ignored by the SPSS exporter.</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_na">na</code></td>
<td>
<p>Similar to the argument in <code><a href="utils.html#topic+write.table">utils::write.table()</a></code>, 'na'
lets you control how missing values are written into the CSV file.
Supported values are:
</p>

<ol>
<li> <p><code>NULL</code>, the default, which means that
categorical variables will have the category name or id as the value, and
numeric, text, and datetime variables will have the missing reason string;
</p>
</li>
<li><p> A string to use for missing values.
</p>
</li>
<li> <p><code>""</code> means that empty cells will be written for missing values for all types.
</p>
</li></ol>
</td></tr>
<tr><td><code id="exportDataset_+3A_varlabel">varlabel</code></td>
<td>
<p>For SPSS export, which Crunch metadata field should be used
as variable labels? Default is &quot;name&quot;, but &quot;description&quot; is another valid
value.</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_include.hidden">include.hidden</code></td>
<td>
<p>logical: should hidden variables be included? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_...">...</code></td>
<td>
<p>additional options. See the API documentation. Currently supported
boolean options include 'include_personal' for personal variables (default:
<code>FALSE</code>) and 'prefix_subvariables' for SPSS format: whether to include
the array variable's name in each of its subvariables &quot;varlabels&quot; (default:
<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="exportDataset_+3A_x">x</code></td>
<td>
<p>(for write.csv) CrunchDataset, which may have been subsetted with a filter
expression on the rows and a selection of variables on the columns.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, <code>file</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
csv_file &lt;- exportDataset(ds, "data.csv")
data &lt;- read.csv(csv_file)

# parquet will likely read more quickly and be a smaller download size
parquet_file &lt;- exportDataset(ds, "data.parquet")
# data &lt;- arrow::read_parquet(parquet_file) # The arrow package can read parquet files

## End(Not run)
</code></pre>

<hr>
<h2 id='exportDeck'>Export a Crunch Deck</h2><span id='topic+exportDeck'></span>

<h3>Description</h3>

<p>Crunch decks can be exported as excel or json files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exportDeck(deck, file, format = c("xlsx", "pptx", "json"), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exportDeck_+3A_deck">deck</code></td>
<td>
<p>A CrunchDeck</p>
</td></tr>
<tr><td><code id="exportDeck_+3A_file">file</code></td>
<td>
<p>The file path to save the exported deck</p>
</td></tr>
<tr><td><code id="exportDeck_+3A_format">format</code></td>
<td>
<p>Either <code>"xlsx"</code>, <code>"pptx"</code>, or <code>"json"</code></p>
</td></tr>
<tr><td><code id="exportDeck_+3A_...">...</code></td>
<td>
<p>Further options to be passed on to the API</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the filename (<code>file</code>, if specified, or the the autogenerated file
name).
</p>

<hr>
<h2 id='expressions'>Construct Crunch Expressions from Crunch Database Functions</h2><span id='topic+expressions'></span><span id='topic+crunchdbFunc'></span>

<h3>Description</h3>

<p>Crunch Expressions, i.e. <code>CrunchExpr</code> and <code>CrunchLogicalExpr</code>,
encapsulate derivations of Crunch variables, possibly composed of other functions
which are only evaluated when sent to the server when creating a variable using <code><a href="#topic+VarDef">VarDef()</a></code>
or using <code><a href="#topic+as.vector">as.vector()</a></code> to get data. The crunch database functions can be found in the
<a href="https://help.crunch.io/hc/en-us/articles/360042411792-Expressions">Help Center</a>,
and can be called directly via <code>crunchdbFunc()</code>m but many have also been wrapped
in native R functions, and are described in the details section below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crunchdbFunc(fun, x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expressions_+3A_fun">fun</code></td>
<td>
<p>The name of the crunch database function to call</p>
</td></tr>
<tr><td><code id="expressions_+3A_x">x</code></td>
<td>
<p>An input, a crunch variable, expression or R object</p>
</td></tr>
<tr><td><code id="expressions_+3A_...">...</code></td>
<td>
<p>Other arguments passed to the database function</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Logical expressions
</p>

<ul>
<li><p> These logical operators <code>==</code>, <code>!=</code>, <code>&amp;</code>, <code>|</code>, <code>!</code>,<code>%in%</code>  work the same way as their
base R counterparts
</p>
</li>
<li> <p><code>is.selected(x)</code> return <code>CrunchLogicalExpr</code> whether a value is in a selected category
</p>
</li>
<li> <p><code>rowAny(x)</code> and <code>rowAll(x)</code> work row-wise on <code>MultipleResponse</code> Variables (and expressions),
though <code>na.rm</code> is not implemented for <code>all(x)</code>.
<code style="white-space: pre;">&#8288;%ornm%&#8288;</code> is similar to <code>|</code>, but where &quot;not selected&quot; beats &quot;missing&quot; (so <code>FALSE %ornm% NA</code>
is <code>FALSE</code> instead of <code>NA</code> as it would be with <code>FALSE | NA</code>)
</p>
</li></ul>

<p>Comparisons
</p>

<ul>
<li><p> Comparison operators <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code> work the same way as their base R counterparts.
</p>
</li>
<li> <p><code>crunchBetween(x, lower, upper, inclusive)</code> to provide lower and upper bounds in a single
expression.
</p>
</li></ul>

<p>Missing data expressions
</p>

<ul>
<li> <p><code>is.na(x)</code>, <code>is.valid(x)</code> return <code>CrunchLogicalExpr</code> whether a single variable (or expression
that creates one) is missing (or not missing).
</p>
</li>
<li> <p><code>rowAnyNA(x)</code>, <code>rowAllNA(x)</code> return <code>CrunchLogicalExpr</code> whether any/all values in an
array variable (or expression that creates one) are missing.
</p>
</li>
<li> <p><code>complete.cases(x)</code> returns an expression that is &quot;selected&quot; if all cases are non-missing,
&quot;missing&quot; if they are all missing, and &quot;other&quot; otherwise.
</p>
</li></ul>

<p>Selection expressions
</p>

<ul>
<li> <p><code>selectCategories(x, selections, collapse = TRUE)</code> takes a categorical variable (or array)
and marks categories as selected. <code>selections</code> should be a list of category names or
values. If <code>collapse</code> is <code>TRUE</code>, (the default), it collapses the categories to &quot;selected&quot;,
&quot;other&quot; and &quot;missing&quot;, but it is <code>FALSE</code>, then the old categories are preserved.
</p>
</li>
<li> <p><code>asSelected(x)</code> returns an expression that condenses a categorical into 3 categories
(&quot;selected&quot;, &quot;other&quot; or &quot;missing&quot;)
</p>
</li>
<li> <p><code>selectedDepth(x)</code> returns an expression that creates a numeric variable that counts the
number of selections across rows of an array variable (or expression that creates one)
</p>
</li>
<li> <p><code>arraySelections(x)</code> returns an expression that takes an array and creates an array with
each variable condensed to &quot;selected&quot;, &quot;other&quot; or &quot;missing&quot; and an extra subvariable
&quot;<strong>any</strong>&quot; that indicates whether any is selected.
</p>
</li>
<li> <p><code>alterCategoriesExpr(x, categories = NULL, category_order = NULL, subvariables = NULL)</code>
Change the category names, order, or subvariable names of categorical or Array variables
(can only modify existing ones, not add or remove categories or subvariables).
<code>categories</code> is a <code>Categories</code> object or a list of lists, each with a <code>name</code> indicating
the new name, as well as an <code>id</code> or <code>old_name</code> to identify which category to modify.
<code>category_order</code> is either a numeric vector indicating category ids or a character vector
indicating the names of the categories in the order they should be displayed
(note that all categories must be specified). <code>subvariables</code> is  a list of lists, each with
a <code>name</code> to rename the subvariable and an <code>alias</code>, <code>old_nam</code> or <code>id</code> to identify the
subvariable. When <code>x</code> is an expression, all categories and subvariables must be identified
by <code>id</code>.
</p>
</li></ul>

<p>Array expressions
</p>

<ul>
<li> <p><code>makeFrame(x, numeric = NULL)</code> an expression that creates an array from existing
variables or expressions, see <code>deriveArray()</code> for more details
</p>
</li>
<li> <p><code>arraySubsetExpr(x, subvars, subvar_id = c("alias", "name", "id"))</code> Take a subset of an
existing array variable, identifying the subvariables by alias, name, or id (if <code>x</code> is
an expression, you must use id).
</p>
</li>
<li> 
<div class="sourceCode"><pre> alterArrayExpr(
   x,
   add = NULL,
   order = NULL,
   order_id = c("alias", "name", "id"),
   remove = NULL,
   remove_id = c("alias", "name", "id"),
   subreferences = NULL,
   subreferences_id = c("alias", "name", "id")
)
</pre></div>
<p>Add, reorder, remove or rename subvariables on an an array variable <code>x</code>. The <code>add</code> argument is
a list of variables or expressions, optionally named with the id they should have. <code>order</code>
and <code>remove</code> are vectors of aliases, names or ids (specify which with <code>order_id</code>/<code>remove_id</code>).
The <code>subreferences</code> object is a list of lists that are named the alias, name, or id (again
specify which with <code>subreferences_id</code>) with metadata information like name and alias in the
list.
</p>
</li></ul>

<p>Miscellaneous expressions
</p>

<ul>
<li> <p><code>caseExpr(..., cases)</code> Create a categorical variable from
a set of logical expressions that when met are assigned to a category. See
<code><a href="#topic+makeCaseVariable">makeCaseVariable()</a></code> for more details.
</p>
</li>
<li> <p><code>bin(x)</code> returns a column's values binned into equidistant bins.
</p>
</li>
<li> <p><code>nchar(x)</code> returns a numeric value indicating the length of a string (or missing reason)
in a <code>TextVariable</code> (or expression that creates one)
</p>
</li>
<li> <p><code>unmissing(x)</code> for a <code>NumericVariable</code> (or expression that creates one) return the values of
the data, ignoring the ones set to missing.
</p>
</li>
<li> <p><code>trim(x, min, max)</code> for a <code>NumericVariable</code> (or expression that creates one) return values
that where all values less than <code>min</code> have been replaced with <code>min</code> and all values greater
than <code>max</code> have been
</p>
</li>
<li> <p><code>crunchDifftime(e1, e2, resolution)</code> Gets the difference between two datetimes as a number
with specified resolution units (one of <code>c("Y", "Q", "M", "W", "D", "h", "m", "s", "ms")</code>).
</p>
</li>
<li> <p><code>datetimeFromCols(year, month, day, hours, minutes, seconds)</code> create a <code>Datetime</code> variable
from numeric variables or expressions (<code>year</code>, <code>month</code>, and <code>day</code> are required, but <code>hours</code>,
<code>minutes</code>, and <code>seconds</code> are optional)
</p>
</li>
<li> <p><code>rollup(x, resolution)</code> sets the resolution of a datetime variable or expression, see
<code><a href="#topic+resolution">resolution()</a></code>
</p>
</li></ul>


<hr>
<h2 id='expressions-internal'>Crunch expressions internal</h2><span id='topic+expressions-internal'></span><span id='topic++25in+25'></span><span id='topic++3D+3D'></span><span id='topic++21+3D'></span><span id='topic++21'></span><span id='topic+crunchDifftime'></span><span id='topic+datetimeFromCols'></span><span id='topic++25ornm+25'></span><span id='topic++21+2CCrunchExpr-method'></span><span id='topic++25in+25+2CCategoricalVariable+2Ccharacter-method'></span><span id='topic++25in+25+2CCategoricalVariable+2Cfactor-method'></span><span id='topic++25in+25+2CTextVariable+2Ccharacter-method'></span><span id='topic++25in+25+2CNumericVariable+2Cnumeric-method'></span><span id='topic++25in+25+2CDatetimeVariable+2CDate-method'></span><span id='topic++25in+25+2CDatetimeVariable+2CPOSIXt-method'></span><span id='topic++25in+25+2CDatetimeVariable+2Ccharacter-method'></span><span id='topic++25in+25+2CCategoricalVariable+2Cnumeric-method'></span><span id='topic++3D+3D+2CCategoricalVariable+2Cnumeric-method'></span><span id='topic++3D+3D+2CCategoricalVariable+2Ccharacter-method'></span><span id='topic++3D+3D+2CCategoricalVariable+2Cfactor-method'></span><span id='topic++21+3D+2CCategoricalVariable+2Cnumeric-method'></span><span id='topic++21+3D+2CCategoricalVariable+2Ccharacter-method'></span><span id='topic++21+3D+2CCategoricalVariable+2Cfactor-method'></span><span id='topic+is.na+2CCrunchVarOrExpr-method'></span><span id='topic+is.valid'></span><span id='topic+bin'></span><span id='topic+selectCategories'></span><span id='topic+crunchBetween'></span><span id='topic+rowAll'></span><span id='topic+rowAny'></span><span id='topic+rowAnyNA'></span><span id='topic+rowAllNA'></span><span id='topic+complete.cases+2CCrunchVarOrExpr-method'></span><span id='topic+is.selected+2CCrunchVarOrExpr-method'></span><span id='topic+asSelected'></span><span id='topic+selectedDepth'></span><span id='topic+arraySelections'></span><span id='topic+nchar+2CCrunchVarOrExpr-method'></span><span id='topic+trim'></span><span id='topic+alterCategoriesExpr'></span><span id='topic+alterArrayExpr'></span><span id='topic+arraySubsetExpr'></span><span id='topic+makeFrame'></span>

<h3>Description</h3>

<p>See <code><a href="#topic+expressions">expressions</a></code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>x %in% table

crunchDifftime(e1, e2, resolution = NULL)

datetimeFromCols(year, month, day, hour = NULL, minute = NULL, second = NULL)

e1 %ornm% e2

## S4 method for signature 'CrunchExpr'
!x

## S4 method for signature 'CategoricalVariable,character'
x %in% table

## S4 method for signature 'CategoricalVariable,factor'
x %in% table

## S4 method for signature 'TextVariable,character'
x %in% table

## S4 method for signature 'NumericVariable,numeric'
x %in% table

## S4 method for signature 'DatetimeVariable,Date'
x %in% table

## S4 method for signature 'DatetimeVariable,POSIXt'
x %in% table

## S4 method for signature 'DatetimeVariable,character'
x %in% table

## S4 method for signature 'CategoricalVariable,numeric'
x %in% table

## S4 method for signature 'CategoricalVariable,numeric'
e1 == e2

## S4 method for signature 'CategoricalVariable,character'
e1 == e2

## S4 method for signature 'CategoricalVariable,factor'
e1 == e2

## S4 method for signature 'CategoricalVariable,numeric'
e1 != e2

## S4 method for signature 'CategoricalVariable,character'
e1 != e2

## S4 method for signature 'CategoricalVariable,factor'
e1 != e2

## S4 method for signature 'CrunchVarOrExpr'
is.na(x)

is.valid(x)

bin(x)

selectCategories(x, selections, collapse = TRUE)

crunchBetween(x, lower, upper, inclusive = c(TRUE, FALSE))

rowAll(x, na.rm = FALSE)

rowAny(x, na.rm = FALSE)

rowAnyNA(x)

rowAllNA(x)

## S4 method for signature 'CrunchVarOrExpr'
complete.cases(x, ...)

## S4 method for signature 'CrunchVarOrExpr'
is.selected(x)

asSelected(x)

selectedDepth(x)

arraySelections(x)

## S4 method for signature 'CrunchVarOrExpr'
nchar(x, type = "chars", allowNA = FALSE, keepNA = NA)

trim(x, min, max)

alterCategoriesExpr(
  x,
  categories = NULL,
  category_order = NULL,
  subvariables = NULL
)

alterArrayExpr(
  x,
  add = NULL,
  order = NULL,
  order_id = c("alias", "name", "id"),
  remove = NULL,
  remove_id = c("alias", "name", "id"),
  subreferences = NULL,
  subreferences_id = c("alias", "name", "id")
)

arraySubsetExpr(x, subvars, subvar_id = c("alias", "name", "id"))

makeFrame(x, numeric = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expressions-internal_+3A_x">x</code>, <code id="expressions-internal_+3A_e1">e1</code>, <code id="expressions-internal_+3A_e2">e2</code></td>
<td>
<p>inputs</p>
</td></tr>
<tr><td><code id="expressions-internal_+3A_table">table</code>, <code id="expressions-internal_+3A_na.rm">na.rm</code>, <code id="expressions-internal_+3A_upper">upper</code>, <code id="expressions-internal_+3A_lower">lower</code>, <code id="expressions-internal_+3A_inclusive">inclusive</code>, <code id="expressions-internal_+3A_selections">selections</code>, <code id="expressions-internal_+3A_collapse">collapse</code></td>
<td>
<p>cases,data,resolution,year,month,day,hours,minutes,seconds,min,max,categories,category_order,
subvariables,remove,remove_id,subreferences,subreferences_id
Other parameters used in some functions, see details of <code><a href="#topic+expressions">expressions</a></code> for more details.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Most functions return a CrunchExpr or CrunchLogicalExpr.
<code>as.vector</code> returns an R vector.
</p>

<hr>
<h2 id='fillExpr'>Expression to fill a variable from another</h2><span id='topic+fillExpr'></span>

<h3>Description</h3>

<p>Given a categorical variable, assign one or more categories to be filled in by
another existing variable or crunch expression. (Categories not filled in will
remain unchanged ).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fillExpr(x, fills, ..., data = NULL, type = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fillExpr_+3A_x">x</code></td>
<td>
<p>a Categorical (Array) variable</p>
</td></tr>
<tr><td><code id="fillExpr_+3A_fills">fills</code></td>
<td>
<p>a list of lists that each have a &quot;fill&quot; item that is a variable or expression
as well as one of an &quot;id&quot;, &quot;name&quot;, or &quot;value&quot; that will be matched to the categories of x
If x is an expression, the fills must be an id</p>
</td></tr>
<tr><td><code id="fillExpr_+3A_...">...</code></td>
<td>
<p>A sequence of named expressions or variables to use as fills, where the name will be
matched to the existing categories</p>
</td></tr>
<tr><td><code id="fillExpr_+3A_data">data</code></td>
<td>
<p>(optional) a crunch dataset to use. Specifying this means you don't have to put
<code style="white-space: pre;">&#8288;dataset$&#8288;</code> in front of each variable name</p>
</td></tr>
<tr><td><code id="fillExpr_+3A_type">type</code></td>
<td>
<p>The type of the variable to output (either &quot;categorical&quot; or &quot;numeric&quot;), only
required if all fills are expressions and so their type cannot be guessed automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>CrunchExpression</code> that assigns categories to filling variables
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
fillExpr(
    ds$v1,
    fills = list(
        list(fill = ds$v2, name = "dog")
    )
)
fillExpr(v1, "dog" = ds$v2)

# the dataset can be specified with data=
fillExpr(v1, "dog" = v2, data = ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='filter'>Get and set slide analyses</h2><span id='topic+filter'></span><span id='topic+filter+3C-'></span><span id='topic+weight+3C-+2CCrunchDeck+2CANY-method'></span><span id='topic+filter+3C-+2CCrunchDeck-method'></span><span id='topic+filters+3C-+2CCrunchDeck+2CANY-method'></span><span id='topic+transforms+2CCrunchAnalysisSlide-method'></span><span id='topic+transforms+2CAnalysisCatalog-method'></span><span id='topic+transforms+2CAnalysis-method'></span><span id='topic+transforms+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+transforms+3C-+2CAnalysisCatalog+2CANY-method'></span><span id='topic+transforms+3C-+2CAnalysis+2CANY-method'></span><span id='topic+analyses'></span><span id='topic+analysis'></span><span id='topic+analysis+3C-'></span><span id='topic+query+3C-'></span><span id='topic+cube'></span><span id='topic+cubes'></span><span id='topic+displaySettings'></span><span id='topic+displaySettings+3C-'></span><span id='topic+vizSpecs'></span><span id='topic+vizSpecs+3C-'></span><span id='topic+type+2CCrunchSlide-method'></span><span id='topic+analyses+2CCrunchAnalysisSlide-method'></span><span id='topic+analysis+2CCrunchAnalysisSlide-method'></span><span id='topic+analysis+3C-+2CCrunchAnalysisSlide+2Cformula-method'></span><span id='topic+analysis+3C-+2CCrunchAnalysisSlide+2CAnalysis-method'></span><span id='topic+analysis+3C-+2CCrunchAnalysisSlide+2Clist-method'></span><span id='topic+filter+2CCrunchAnalysisSlide-method'></span><span id='topic+filters+2CCrunchAnalysisSlide-method'></span><span id='topic+filters+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+query+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+cubes+2CCrunchAnalysisSlide-method'></span><span id='topic+cube+2CCrunchAnalysisSlide-method'></span><span id='topic+displaySettings+2CCrunchAnalysisSlide-method'></span><span id='topic+displaySettings+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+vizSpecs+2CCrunchAnalysisSlide-method'></span><span id='topic+vizSpecs+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+cubes+2CAnalysisCatalog-method'></span><span id='topic+displaySettings+2CAnalysisCatalog-method'></span><span id='topic+displaySettings+3C-+2CAnalysisCatalog+2Clist-method'></span><span id='topic+vizSpecs+2CAnalysisCatalog-method'></span><span id='topic+vizSpecs+3C-+2CAnalysisCatalog+2Clist-method'></span><span id='topic+query+3C-+2CAnalysis+2Cformula-method'></span><span id='topic+formulaToSlideQuery'></span><span id='topic+cube+2CAnalysis-method'></span><span id='topic+displaySettings+2CAnalysis-method'></span><span id='topic+displaySettings+3C-+2CAnalysis+2CANY-method'></span><span id='topic+vizSpecs+2CAnalysis-method'></span><span id='topic+vizSpecs+3C-+2CAnalysis+2CANY-method'></span><span id='topic+filter+2CAnalysis-method'></span><span id='topic+filters+2CAnalysis-method'></span><span id='topic+filter+2CANY-method'></span><span id='topic+filter+3C-+2CCrunchAnalysisSlide-method'></span><span id='topic+filter+3C-+2CAnalysis-method'></span><span id='topic+filters+3C-+2CAnalysis+2CCrunchLogicalExpr-method'></span><span id='topic+filters+3C-+2CAnalysis+2CCrunchFilter-method'></span><span id='topic+filters+3C-+2CAnalysis+2CNULL-method'></span><span id='topic+filters+3C-+2CAnalysis+2Clist-method'></span><span id='topic+slideQueryEnv'></span><span id='topic+cubes+2CCrunchDeck-method'></span><span id='topic+weight+2CCrunchAnalysisSlide-method'></span><span id='topic+weight+3C-+2CCrunchAnalysisSlide+2CANY-method'></span><span id='topic+weight+2CAnalysis-method'></span>

<h3>Description</h3>

<p>Slides are composed of analyses, which are effectively <code>CrunchCubes</code> with some
additional metadata. You can get and set a slide's Analysis Catalog with the
<code>analyses</code> method, and access an individual analysis with <code>analysis</code>. There
are also helpers to get and set the components of the analysis such as <code>filter()</code>,
<code>weight()</code>, <code>transforms()</code>, <code>displaySettings()</code> and <code>vizSpecs()</code>. You can also
get the <code>CrunchCube</code> from an analysis using <code>cube()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter(x, ...)

filter(x) &lt;- value

## S4 replacement method for signature 'CrunchDeck,ANY'
weight(x) &lt;- value

## S4 replacement method for signature 'CrunchDeck'
filter(x) &lt;- value

## S4 replacement method for signature 'CrunchDeck,ANY'
filters(x) &lt;- value

## S4 method for signature 'CrunchAnalysisSlide'
transforms(x)

## S4 method for signature 'AnalysisCatalog'
transforms(x)

## S4 method for signature 'Analysis'
transforms(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
transforms(x) &lt;- value

## S4 replacement method for signature 'AnalysisCatalog,ANY'
transforms(x) &lt;- value

## S4 replacement method for signature 'Analysis,ANY'
transforms(x) &lt;- value

analyses(x)

analysis(x)

analysis(x) &lt;- value

query(x) &lt;- value

cube(x)

cubes(x)

displaySettings(x)

displaySettings(x) &lt;- value

vizSpecs(x)

vizSpecs(x) &lt;- value

## S4 method for signature 'CrunchSlide'
type(x)

## S4 method for signature 'CrunchAnalysisSlide'
analyses(x)

## S4 method for signature 'CrunchAnalysisSlide'
analysis(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,formula'
analysis(x) &lt;- value

## S4 replacement method for signature 'CrunchAnalysisSlide,Analysis'
analysis(x) &lt;- value

## S4 replacement method for signature 'CrunchAnalysisSlide,list'
analysis(x) &lt;- value

## S4 method for signature 'CrunchAnalysisSlide'
filter(x, ...)

## S4 method for signature 'CrunchAnalysisSlide'
filters(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
filters(x) &lt;- value

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
query(x) &lt;- value

## S4 method for signature 'CrunchAnalysisSlide'
cubes(x)

## S4 method for signature 'CrunchAnalysisSlide'
cube(x)

## S4 method for signature 'CrunchAnalysisSlide'
displaySettings(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
displaySettings(x) &lt;- value

## S4 method for signature 'CrunchAnalysisSlide'
vizSpecs(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
vizSpecs(x) &lt;- value

## S4 method for signature 'AnalysisCatalog'
cubes(x)

## S4 method for signature 'AnalysisCatalog'
displaySettings(x)

## S4 replacement method for signature 'AnalysisCatalog,list'
displaySettings(x) &lt;- value

## S4 method for signature 'AnalysisCatalog'
vizSpecs(x)

## S4 replacement method for signature 'AnalysisCatalog,list'
vizSpecs(x) &lt;- value

## S4 replacement method for signature 'Analysis,formula'
query(x) &lt;- value

formulaToSlideQuery(query, dataset)

## S4 method for signature 'Analysis'
cube(x)

## S4 method for signature 'Analysis'
displaySettings(x)

## S4 replacement method for signature 'Analysis,ANY'
displaySettings(x) &lt;- value

## S4 method for signature 'Analysis'
vizSpecs(x)

## S4 replacement method for signature 'Analysis,ANY'
vizSpecs(x) &lt;- value

## S4 method for signature 'Analysis'
filter(x, ...)

## S4 method for signature 'Analysis'
filters(x)

## S4 method for signature 'ANY'
filter(x, ...)

## S4 replacement method for signature 'CrunchAnalysisSlide'
filter(x) &lt;- value

## S4 replacement method for signature 'Analysis'
filter(x) &lt;- value

## S4 replacement method for signature 'Analysis,CrunchLogicalExpr'
filters(x) &lt;- value

## S4 replacement method for signature 'Analysis,CrunchFilter'
filters(x) &lt;- value

## S4 replacement method for signature 'Analysis,'NULL''
filters(x) &lt;- value

## S4 replacement method for signature 'Analysis,list'
filters(x) &lt;- value

slideQueryEnv(weight, filter)

## S4 method for signature 'CrunchDeck'
cubes(x)

## S4 method for signature 'CrunchAnalysisSlide'
weight(x)

## S4 replacement method for signature 'CrunchAnalysisSlide,ANY'
weight(x) &lt;- value

## S4 method for signature 'Analysis'
weight(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_+3A_x">x</code></td>
<td>
<p>a <code>CrunchSlide</code>, <code>AnalysisCatalog</code>, or <code>Analysis</code></p>
</td></tr>
<tr><td><code id="filter_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="filter_+3A_value">value</code></td>
<td>
<p>for the setter, an object to set it</p>
</td></tr>
<tr><td><code id="filter_+3A_query">query</code></td>
<td>
<p>For <code>formulaToSlideQuery()</code>, a formula that specifies the query, as in
<code>newSlide()</code>. See Details of <code><a href="#topic+crtabs">crtabs()</a></code> for more information.</p>
</td></tr>
<tr><td><code id="filter_+3A_dataset">dataset</code></td>
<td>
<p>For <code>formulaToSlideQuery()</code>, a <code>CrunchDataset</code> that the variables in
<code>query</code> refer to.</p>
</td></tr>
<tr><td><code id="filter_+3A_weight">weight</code></td>
<td>
<p>For <code>slideQueryEnv()</code> a crunch variable to use as a weight or <code>NULL</code>
to indicate no weight should be used.</p>
</td></tr>
<tr><td><code id="filter_+3A_filter">filter</code></td>
<td>
<p>for <code>slideQueryEnv()</code>, a <code>CrunchFilter</code> or <code>CrunchExpression</code> to filter
the slide.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For more complex objects like <code>displaySettings()</code>, <code>vizSpecs()</code> and <code>transforms()</code>,
the <a href="https://crunch.io/api/reference/#patch-/datasets/-dataset_id-/decks/-deck_id-/slides/-slide_id-/analyses/-analysis_id-/">API documentation</a>
provides more details.
</p>
<p>Advanced users of the API can assign a list to  <code style="white-space: pre;">&#8288;analysis&lt;-&#8288;</code> to specify settings
on the analyses that are not otherwise available in <code>rcrunch</code>. The helpers
<code>formulaToSlideQuery()</code> and <code>slideQueryEnv()</code> help you create objects for the
<code>query</code> and <code>query_environment</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Examples of setting analysis details (in general these setters work on
# the slide, analysis catalog and analysis, but for brevity the examples only
# show on the slide)

# Change the filter
filters(slide) &lt;- NULL # to remove a filter
filters(slide) &lt;- filters(ds)[["My filter"]]
filters(slide) &lt;- list( # Can set multiple filter
    filters(ds)[["My filter"]],
    ds$age_grp == "18-35"
)
filters(deck) &lt;- filters(ds)[["My filter"]] # Can set the same filter on a whole deck too

# Change the weight
weight(slide) &lt;- NULL # to remove
weight(slide) &lt;- ds$weight
weight(deck) &lt;- ds$weight # Can set the same weight on a whole deck too

# Change the transforms
transforms(slide) &lt;- list(rows_dimension = makeDimTransform(hide = "Neutral"))

# Change the displaySettings
displaySettings(slide) &lt;- list(vizType = "groupedBarPlot")

# Change the vizSpecs
# viz_specs can get quite long, see
# https://crunch.io/api/reference/#post-/datasets/-dataset_id-/decks/-deck_id-/slides/
vizSpecs(slide) &lt;- viz_specs

# Change the query
#' query(slide) &lt;- ~ cyl + wt

## End(Not run)
</code></pre>

<hr>
<h2 id='filters'>Get or set a dataset's filters</h2><span id='topic+filters'></span><span id='topic+filters+3C-'></span><span id='topic+filter-catalog'></span><span id='topic+filters+2CCrunchDataset-method'></span><span id='topic+filters+3C-+2CCrunchDataset+2CANY-method'></span>

<h3>Description</h3>

<p>You can build and save filters in the Crunch web app, and these filters
are stored in a <code>FilterCatalog</code>. This function allows you to retrieve
and modify those filters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filters(x)

filters(x) &lt;- value

## S4 method for signature 'CrunchDataset'
filters(x)

## S4 replacement method for signature 'CrunchDataset,ANY'
filters(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filters_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="filters_+3A_value">value</code></td>
<td>
<p>for the setter, a FilterCatalog</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class FilterCatalog containing references to Filter
entities usable in the web application. (Setter returns the Dataset.)
</p>

<hr>
<h2 id='flattenOrder'>Remove nesting of groups within an order/group</h2><span id='topic+flattenOrder'></span>

<h3>Description</h3>

<p>This function reduces a potentially nested order to its flattened
representation, containing no nested groups. Entities are ordered in the
result by their first appearance in the order object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flattenOrder(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flattenOrder_+3A_x">x</code></td>
<td>
<p>VariableOrder, DatasetOrder, VariableGroup, or DatasetGroup; or a
CrunchDataset or catalog that has an <code>ordering</code> property.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, or its order resource, flattened.
</p>

<hr>
<h2 id='flipArrays'>Rearrange array subvariables</h2><span id='topic+flipArrays'></span>

<h3>Description</h3>

<p>Sometimes it is useful to group subvariables across arrays in order to
compare them more easily. This function generates a set of derived views of
common subvariables across arrays. Because they are derived, they share data
with the underlying array variables, and they are thus automatically updated
when new data is appended.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flipArrays(variables, suffix = ", flipped")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flipArrays_+3A_variables">variables</code></td>
<td>
<p>List of variables, a variable catalog, or a dataset subset
containing the categorical array or multiple response variables you want to
rearrange.</p>
</td></tr>
<tr><td><code id="flipArrays_+3A_suffix">suffix</code></td>
<td>
<p>character string to append to the new variable names. Pass
<code>""</code> if you don't want it to append anything.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of derived VariableDefinitions, one per unique subvariable
name across all <code>variables</code>. Each variable in <code>variables</code> that
contains this subvariable will appear as a subvariable in these new derived
array definitions. Use <code><a href="#topic+addVariables">addVariables</a></code> to add these to your dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- addVariables(ds, flipArrays(ds[c("petloc", "petloc2")], suffix = ", rearranged"))

## End(Not run)
</code></pre>

<hr>
<h2 id='folder'>Find and move entities to a new folder</h2><span id='topic+folder'></span><span id='topic+folder+3C-'></span>

<h3>Description</h3>

<p>Find and move entities to a new folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>folder(x)

folder(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="folder_+3A_x">x</code></td>
<td>
<p>For <code>folder</code>, a Variable to find. For folder assignment, a Variable,
selection of variables in a
Dataset, or any other object that can be moved to a folder.</p>
</td></tr>
<tr><td><code id="folder_+3A_value">value</code></td>
<td>
<p>For assignment, a character &quot;path&quot; to the folder: either a
vector of nested folder names or a single string with nested folders
separated by a delimiter (&quot;/&quot; default)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>folder</code> returns the parent folder of <code>x</code>, or <code>NULL</code> if the <code>x</code> is the root
level. <code style="white-space: pre;">&#8288;folder&lt;-&#8288;</code> returns the
<code>x</code> input, having been moved to the requested location.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mv">mv()</a></code> <code><a href="#topic+cd">cd()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("Example survey")
folder(ds$income) &lt;- "Demographics/Economic"
folder(ds$income)
## [1] "Demographics"    "Economic"

## End(Not run)
</code></pre>

<hr>
<h2 id='forceVariableCatalog'>Force variables catalog to be loaded</h2><span id='topic+forceVariableCatalog'></span>

<h3>Description</h3>

<p>Variables catalogs are generally loaded lazily, but this function
allows you to force them to be loaded once.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forceVariableCatalog(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forceVariableCatalog_+3A_x">x</code></td>
<td>
<p>A crunch dataset</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>forceVariableCatalog()</code> function is probably most useful when writing tests
because it allows you to be more certain about when API calls are made.
</p>
<p>Another situation where you may care about when API calls for loading
the variables are made is when you are loading many datasets at the same
time (~15+) and referring to their variables later. In this situation,
it can be faster to turn off the variables catalog with the option
<code>crunch.lazy.variable.catalog</code> because there is a limit to the number of
datasets your user can hold open at the same time and so at some point the server
will have to unload and then reload the datasets. However, it's probably even faster
if you are able to alter your code so that it operates on datasets sequentially.
</p>


<h3>Value</h3>

<p>A dataset with it's variable catalogs filled in
</p>

<hr>
<h2 id='forkDataset'>Create a fork of a dataset</h2><span id='topic+forkDataset'></span>

<h3>Description</h3>

<p>Forking a dataset makes a copy of the data that is linked by Crunch's version
control system to the original dataset. When you make edits to a fork, users
of the original dataset do not see the changes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>forkDataset(dataset, name = defaultForkName(dataset), draft = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="forkDataset_+3A_dataset">dataset</code></td>
<td>
<p>The <code>CrunchDataset</code> to fork</p>
</td></tr>
<tr><td><code id="forkDataset_+3A_name">name</code></td>
<td>
<p>character name to give the fork. If omitted, one will be provided
for you</p>
</td></tr>
<tr><td><code id="forkDataset_+3A_draft">draft</code></td>
<td>
<p>logical: Should the dataset be a draft, visible only to
those with edit permissions? Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="forkDataset_+3A_...">...</code></td>
<td>
<p>Additional dataset metadata to provide to the fork</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A common strategy for revising a dataset that has been shared with others is
to fork it,
make changes to the fork, and then merge those changes back into the original
dataset.
This workflow allows you to edit a dataset and review changes before
publishing them, so that you don't accidentally send your clients
incorrect data. For more on this workflow, see
<code>vignette("fork-and-merge", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p>The new fork, a <code>CrunchDataset</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mergeFork">mergeFork()</a></code>
</p>

<hr>
<h2 id='fortify'>Fortify crunch objects for use with ggplot</h2><span id='topic+fortify'></span><span id='topic+fortify.CrunchDataFrame'></span><span id='topic+fortify.CrunchDataset'></span>

<h3>Description</h3>

<p>Fortify crunch objects for use with ggplot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fortify.CrunchDataFrame(model, data, ...)

fortify.CrunchDataset(model, data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fortify_+3A_model">model</code></td>
<td>
<p>model or other R object to convert to data frame</p>
</td></tr>
<tr><td><code id="fortify_+3A_data">data</code></td>
<td>
<p>original dataset, if needed</p>
</td></tr>
<tr><td><code id="fortify_+3A_...">...</code></td>
<td>
<p>other arguments passed to methods</p>
</td></tr>
</table>

<hr>
<h2 id='generateNumCutLabels'>Generate Labels for the cut function</h2><span id='topic+generateNumCutLabels'></span>

<h3>Description</h3>

<p>A convenience function to generate labels for the cut function. This
function is extracted from <code><a href="base.html#topic+cut">base::cut()</a></code> and is broken out to make it easier
to test. It is not meant to be called on its own.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateNumCutLabels(dig.lab, breaks, nb, right, include.lowest)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateNumCutLabels_+3A_dig.lab">dig.lab</code></td>
<td>
<p>see <code>cut()</code></p>
</td></tr>
<tr><td><code id="generateNumCutLabels_+3A_breaks">breaks</code></td>
<td>
<p>see <code>cut()</code></p>
</td></tr>
<tr><td><code id="generateNumCutLabels_+3A_nb">nb</code></td>
<td>
<p>The number of breaks, equal to the small of 2 or the number of breaks</p>
</td></tr>
<tr><td><code id="generateNumCutLabels_+3A_right">right</code></td>
<td>
<p>see <code>cut()</code></p>
</td></tr>
<tr><td><code id="generateNumCutLabels_+3A_include.lowest">include.lowest</code></td>
<td>
<p>see<code>cut()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of labels
</p>

<hr>
<h2 id='generateWeightEntry'>Generate entry for <a href="#topic+makeWeight">makeWeight</a></h2><span id='topic+generateWeightEntry'></span>

<h3>Description</h3>

<p>Utility function to catch formula errors passed to <a href="#topic+makeWeight">makeWeight</a>, and to
generate the appropriate entry.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>generateWeightEntry(expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="generateWeightEntry_+3A_expr">expr</code></td>
<td>
<p>An expression</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the variable id and the target weights.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
validateWeightExpression(ds$var ~ c(10, 30, 60))

## End(Not run)
</code></pre>

<hr>
<h2 id='getAccountUserCatalog'>Find all users on your account</h2><span id='topic+getAccountUserCatalog'></span>

<h3>Description</h3>

<p>Find all users on your account
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAccountUserCatalog(x = shojiURL(getAccount(), "catalogs", "users"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getAccountUserCatalog_+3A_x">x</code></td>
<td>
<p>URL of the user catalog. The default is your own user catalog and
you should not need to change this default.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>UserCatalog</code>
</p>

<hr>
<h2 id='getDimTypes'>Get dimension type</h2><span id='topic+getDimTypes'></span>

<h3>Description</h3>

<p>This function returns the specific type of each cube dimension. This is useful
when cubes contain array variables because it identifies the dimensions of
the cube which refer to the different parts of array variable:
</p>

<ul>
<li> <p><code>ca_items</code>: Categorical array items
</p>
</li>
<li> <p><code>ca_categories</code>: The categories of the categorical array
</p>
</li>
<li> <p><code>mr_items</code>: Multiple response options or items
</p>
</li>
<li> <p><code>mr_selections</code>: The selection status for a multiple response variable
</p>
</li>
<li> <p><code>numarray_items</code>: Numeric array items
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>getDimTypes(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getDimTypes_+3A_x">x</code></td>
<td>
<p>a CrunchCube or CubeDims object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of dimension types, similar to <code>types()</code>, except that
the array variable types are more specific.
</p>

<hr>
<h2 id='getTeams'>Retrieve your teams</h2><span id='topic+getTeams'></span>

<h3>Description</h3>

<p>Teams contain a list of users. You can grant access to a group of
users by inviting the team. You can also share a set of
datasets with a user all at once by adding the user to a team that contains
those datasets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getTeams()
</code></pre>


<h3>Details</h3>

<p><code>getTeams()</code> returns your <code>TeamCatalog</code>. You can extract an individual team
by name, or create a team by assigning into the function.
To create a team by  assignment, assign a list to
<code>teams("myteam") &lt;- value_list</code>. The <code>value_list</code> can either empty
(to just create a team with that name), or can contain a &quot;members&quot; element
with the emails or URLs of users to add to the team. Users can be also be
added later with the <code style="white-space: pre;">&#8288;members&lt;-&#8288;</code>  method.
</p>


<h3>Value</h3>

<p>A <code>TeamCatalog</code>. Extract an individual team by name. Create
a team by assigning in with a new name.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+members">members</a></code>
</p>

<hr>
<h2 id='grabColNames'>grab column names for subsetting crdfs</h2><span id='topic+grabColNames'></span>

<h3>Description</h3>

<p>Take a character, logical, or integer vector and return the appropriate names
of the crdf to subset. Disallow logicals (in the case of <code>[[</code> subsetting, to
conform with <code>data.frame</code> methods)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grabColNames(x, j, allow_logical = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grabColNames_+3A_x">x</code></td>
<td>
<p>crdf to grab columns from</p>
</td></tr>
<tr><td><code id="grabColNames_+3A_j">j</code></td>
<td>
<p>character, logical, or integer vector specifying the columns to grab</p>
</td></tr>
<tr><td><code id="grabColNames_+3A_allow_logical">allow_logical</code></td>
<td>
<p>logical should logical subsetting be allowed? (default: TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character names of the columns of the crdf to select
</p>

<hr>
<h2 id='grabRowInd'>grab row indicators for subsetting crdfs</h2><span id='topic+grabRowInd'></span>

<h3>Description</h3>

<p>grab row indicators for subsetting crdfs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grabRowInd(x, i)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grabRowInd_+3A_x">x</code></td>
<td>
<p>crdf to grab rows from</p>
</td></tr>
<tr><td><code id="grabRowInd_+3A_i">i</code></td>
<td>
<p>logical or integer vector specifying the rows to grab</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integers of the rows of the crdf to select
</p>

<hr>
<h2 id='grouped'>Get grouped or ungrouped OrderGroups</h2><span id='topic+grouped'></span><span id='topic+ungrouped'></span>

<h3>Description</h3>

<p>&quot;ungrouped&quot; is an OrderGroup that contains all entities not found
in groups at a given level of nesting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grouped(order.obj)

ungrouped(order.obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grouped_+3A_order.obj">order.obj</code></td>
<td>
<p>an subclass of ShojiOrder or OrderGroup</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>grouped()</code>, an Order/Group, respectively, with &quot;ungrouped&quot;
omitted. For <code>ungrouped()</code>, an OrderGroup subclass.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+VariableOrder">VariableOrder</a></code>
</p>

<hr>
<h2 id='handleAPIresponse'>Do the right thing with the HTTP response</h2><span id='topic+handleAPIresponse'></span>

<h3>Description</h3>

<p>Do the right thing with the HTTP response
</p>


<h3>Usage</h3>

<pre><code class='language-R'>handleAPIresponse(response, special.statuses = list(), progress.handler = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="handleAPIresponse_+3A_response">response</code></td>
<td>
<p>an httr response object</p>
</td></tr>
<tr><td><code id="handleAPIresponse_+3A_special.statuses">special.statuses</code></td>
<td>
<p>an optional named list of functions by status code.</p>
</td></tr>
<tr><td><code id="handleAPIresponse_+3A_progress.handler">progress.handler</code></td>
<td>
<p>an optional function to handle errors reported by
a progress result. Default NULL prints the string <code>message</code>; other
functions required to handle non-string messages in progress responses.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The full HTTP response object, just the content, or any other
status-specific action
</p>

<hr>
<h2 id='hasFunction'>Check if a package has a function installed</h2><span id='topic+hasFunction'></span>

<h3>Description</h3>

<p>This is useful for handling if the user has the correct version of a suggested
package installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hasFunction(fun, pkg)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hasFunction_+3A_fun">fun</code></td>
<td>
<p>a string, name of the function to search for</p>
</td></tr>
<tr><td><code id="hasFunction_+3A_pkg">pkg</code></td>
<td>
<p>a string, the package to search for the function in</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical
</p>

<hr>
<h2 id='http-methods'>HTTP methods for communicating with the Crunch API</h2><span id='topic+http-methods'></span><span id='topic+crGET'></span><span id='topic+crPUT'></span><span id='topic+crPATCH'></span><span id='topic+crPOST'></span><span id='topic+crDELETE'></span>

<h3>Description</h3>

<p>These methods let you communicate with the Crunch API, for more background
see <a href="https://crunch.io/r/crunch/articles/crunch-internals.html">Crunch Internals</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>crGET(url, config = list(), ...)

crPUT(url, config = list(), ..., body)

crPATCH(url, config = list(), ..., body)

crPOST(url, config = list(), ..., body)

crDELETE(url, config = list(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="http-methods_+3A_url">url</code>, <code id="http-methods_+3A_config">config</code>, <code id="http-methods_+3A_body">body</code>, <code id="http-methods_+3A_...">...</code></td>
<td>
<p>see <code><a href="#topic+crunchAPI">crunchAPI</a></code> for details. <code>url</code> is the first
named argument and is required; <code>body</code> is also required for PUT,
PATCH, and POST.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depends on the response status of the HTTP request and any custom
handlers.
</p>

<hr>
<h2 id='index'>Get the body of a Catalog</h2><span id='topic+index'></span><span id='topic+index+3C-'></span><span id='topic+shoji-index'></span><span id='topic+index+2CShojiCatalog-method'></span><span id='topic+index+3C-+2CShojiCatalog-method'></span>

<h3>Description</h3>

<p>The core of Catalog data is in its &quot;index&quot;. These methods get and set that
slot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>index(x)

index(x) &lt;- value

## S4 method for signature 'ShojiCatalog'
index(x)

## S4 replacement method for signature 'ShojiCatalog'
index(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="index_+3A_x">x</code></td>
<td>
<p>a Catalog (VariableCatalog, Subvariables, or similar object)</p>
</td></tr>
<tr><td><code id="index_+3A_value">value</code></td>
<td>
<p>For the setters, an appropriate-length list to
assign</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Getters return the list object in the &quot;index&quot; slot; setters
return <code>x</code> duly modified.
</p>

<hr>
<h2 id='index.table'>Calculate an index table for a CrunchCube</h2><span id='topic+index.table'></span>

<h3>Description</h3>

<p>Index tables are percentages of percentages. They take the percentage from
<code>prop.table(cube, margin)</code> and, by default, divide that by the proportions of
the other margin. The <code>baseline</code> argument can be used to provide baseline
proportions to compare against.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>index.table(x, margin, baseline)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="index.table_+3A_x">x</code></td>
<td>
<p>A CrunchCube to calculate index table for</p>
</td></tr>
<tr><td><code id="index.table_+3A_margin">margin</code></td>
<td>
<p>which margin to index against (1 for rows, 2 for columns)</p>
</td></tr>
<tr><td><code id="index.table_+3A_baseline">baseline</code></td>
<td>
<p>an arbitrary set of proportions to compare the table given in
<code>x</code> to. Useful for comparing two separate cubes. <code>baseline</code> must have the
same length as the extent of the dimension given in <code>margin</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>index.table()</code> is only implemented for 2 dimensional cubes. If you need to
calculate indexes for a higher dimension Cube, please slice the cube first.
</p>


<h3>Value</h3>

<p>an array of percentages indexed to the margin provided
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cube_object
#    v7
# v4  C E
#   B 5 2
#   C 5 3
index.table(cube_object, 1)
#    v7
# v4         C         E
#   B 107.1429  85.71429
#   C  93.7500 112.50000
index.table(cube_object, 2)
#    v7
# v4    C   E
#   B 100  80
#   C 100 120
index.table(cube_object, 2, c(0.6, 0.4))
#    v7
# v4          C         E
#   B  83.33333  66.66667
#   C 125.00000 150.00000

## End(Not run)

</code></pre>

<hr>
<h2 id='Insertions-class'>Insert categories in transformations</h2><span id='topic+Insertions-class'></span><span id='topic+Insertions'></span><span id='topic+Insertion-class'></span><span id='topic+Insertion'></span><span id='topic+.Insertion'></span><span id='topic+anchor'></span><span id='topic+anchors'></span><span id='topic+anchor+3C-'></span><span id='topic+arguments'></span><span id='topic+arguments+3C-'></span><span id='topic+func'></span><span id='topic+funcs'></span><span id='topic+func+3C-'></span><span id='topic+anchor+3C-+2CInsertion-method'></span><span id='topic+anchor+3C-+2CSubtotal-method'></span><span id='topic+anchor+3C-+2CHeading-method'></span><span id='topic+anchor+3C-+2CSummaryStat-method'></span><span id='topic+subtotals+3C-+2CInsertion+2CANY-method'></span><span id='topic+arguments+3C-+2CInsertion-method'></span><span id='topic+arguments+3C-+2CSubtotal-method'></span><span id='topic+arguments+3C-+2CHeading-method'></span><span id='topic+arguments+3C-+2CSummaryStat-method'></span><span id='topic+arguments+2CInsertion-method'></span><span id='topic+arguments+2CSubtotal-method'></span><span id='topic+arguments+2CHeading-method'></span><span id='topic+arguments+2CSummaryStat-method'></span><span id='topic+anchor+2CInsertion-method'></span><span id='topic+anchor+2CSubtotal-method'></span><span id='topic+anchor+2CHeading-method'></span><span id='topic+anchor+2CSummaryStat-method'></span><span id='topic+func+2CInsertion-method'></span><span id='topic+func+2CSubtotal-method'></span><span id='topic+func+2CHeading-method'></span><span id='topic+func+2CSummaryStat-method'></span><span id='topic+anchors+2CInsertions-method'></span><span id='topic+funcs+2CInsertions-method'></span>

<h3>Description</h3>

<p>Insertions allow you to insert new categories into a categorical-like
response on a variable's <a href="#topic+Transforms">transformations</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Insertions(..., data = NULL)

Insertion(...)

.Insertion(..., data = NULL)

anchor(x, ...)

anchors(x)

anchor(x) &lt;- value

arguments(x, ...)

arguments(x) &lt;- value

func(x)

funcs(x)

## S4 replacement method for signature 'Insertion'
anchor(x) &lt;- value

## S4 replacement method for signature 'Subtotal'
anchor(x) &lt;- value

## S4 replacement method for signature 'Heading'
anchor(x) &lt;- value

## S4 replacement method for signature 'SummaryStat'
anchor(x) &lt;- value

## S4 replacement method for signature 'Insertion,ANY'
subtotals(x) &lt;- value

## S4 replacement method for signature 'Insertion'
arguments(x) &lt;- value

## S4 replacement method for signature 'Subtotal'
arguments(x) &lt;- value

## S4 replacement method for signature 'Heading'
arguments(x) &lt;- value

## S4 replacement method for signature 'SummaryStat'
arguments(x) &lt;- value

## S4 method for signature 'Insertion'
arguments(x)

## S4 method for signature 'Subtotal'
arguments(x, var_items)

## S4 method for signature 'Heading'
arguments(x)

## S4 method for signature 'SummaryStat'
arguments(x, var_items)

## S4 method for signature 'Insertion'
anchor(x, ...)

## S4 method for signature 'Subtotal'
anchor(x, var_items)

## S4 method for signature 'Heading'
anchor(x, var_items)

## S4 method for signature 'SummaryStat'
anchor(x, var_items)

## S4 method for signature 'Insertion'
func(x)

## S4 method for signature 'Subtotal'
func(x)

## S4 method for signature 'Heading'
func(x)

## S4 method for signature 'SummaryStat'
func(x)

## S4 method for signature 'Insertions'
anchors(x)

## S4 method for signature 'Insertions'
funcs(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Insertions-class_+3A_...">...</code></td>
<td>
<p>additional arguments to <code>[</code>, ignored</p>
</td></tr>
<tr><td><code id="Insertions-class_+3A_data">data</code></td>
<td>
<p>For the constructor functions <code>Insertion</code> and
<code>Insertions</code>, you can either pass in attributes via <code>...</code> or you
can create the objects with a fully defined <code>list</code> representation of
the objects via the <code>data</code> argument. See the examples.</p>
</td></tr>
<tr><td><code id="Insertions-class_+3A_x">x</code></td>
<td>
<p>For the attribute getters and setters, an object of class
Insertion or Insertions</p>
</td></tr>
<tr><td><code id="Insertions-class_+3A_value">value</code></td>
<td>
<p>For <code style="white-space: pre;">&#8288;[&lt;-&#8288;</code>, the replacement Insertion to insert</p>
</td></tr>
<tr><td><code id="Insertions-class_+3A_var_items">var_items</code></td>
<td>
<p>categories (from <code><a href="#topic+categories">categories()</a></code>) or subvariables (from
<code><a href="#topic+subvariables">subvariables()</a></code> to used by the <code>arguments</code> and <code>anchor</code> methods when
needed to translate between category/subvariable names and category
ids/aliases.</p>
</td></tr>
</table>


<h3>Working with Insertions</h3>

<p>Insertions are used to add information about a variable or CrunchCube that
extends the data in the dataset but does not alter it. This new data
includes: aggregations like <a href="#topic+SubtotalsHeadings">subtotals</a> that sum the count
of more than on category together or <a href="#topic+SubtotalsHeadings">headings</a> which can
be added between categories.
</p>
<p><code>Insertions</code> objects are containers for individual <code>Insertion</code> objects. The
individual <code>Insertion</code>s contain all the information needed to calculate,
apply, and display insertions to CrunchCubes and categorical variables.
</p>
<p>An <code>Insertion</code> must have two properties:
</p>

<ul>
<li> <p><code>anchor</code> - which is the id of the category the insertion should follow
</p>
</li>
<li> <p><code>name</code> - the string to display
</p>
</li></ul>

<p>Additionally, <code>Insertions</code> may also have the following two properties (though
if they have one, they must have the other):
</p>

<ul>
<li> <p><code>function</code> - the function to use to aggregate (e.g. &quot;subtotal&quot;)
</p>
</li>
<li> <p><code>args</code> - the category ids to use as operands to the <code>function</code> above.
</p>
</li></ul>

<p>Although it is possible to make both subtotals and headings using <code>Insertion</code>
alone, it is much easier and safer to use the functions
<a href="#topic+SubtotalsHeadings">Subtotal()</a> and <a href="#topic+SubtotalsHeadings">Heading()</a> instead.
Not only are they more transparent, they also are quicker to type, accept
both category names as well as ids, and have easier to remember argument
names.
</p>

<hr>
<h2 id='interactVariables'>Create a variable by interacting categorical variables</h2><span id='topic+interactVariables'></span>

<h3>Description</h3>

<p><code>interactVariables</code> takes two or more variables and creates a new one that
is the cartesian product expansion of their unique values. For example, if
we cross ethnicity (with 2 categories) and race (with 4 categories), the new
variable would have 8 valid categories (e.g. black:hispanic, white:hispanic,
black:non-hispanic, etc.) and 7 categories where at least one of the
variables is missing (e.g. white:No Data).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interactVariables(..., name, collapse_missings = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interactVariables_+3A_...">...</code></td>
<td>
<p>a sequence of categorical variables to make an interaction from
as well as other properties to pass about the case variable (i.e. alias,
description)</p>
</td></tr>
<tr><td><code id="interactVariables_+3A_name">name</code></td>
<td>
<p>a character to use as the name for the interaction variable</p>
</td></tr>
<tr><td><code id="interactVariables_+3A_collapse_missings">collapse_missings</code></td>
<td>
<p>a logical indicating whether to combine all
new categories that are formed from existing missing categories into
a single one (defaults to <code>FALSE</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="#topic+VariableDefinition">VariableDefinition</a></code> that creates the new interaction variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds$ethn_race &lt;- interactVariables(
  ds$ethnicity, ds$race, name = "Interaction of ethnicity and race"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='is-na-categories'>is.na for Categories</h2><span id='topic+is-na-categories'></span><span id='topic+is.na+2CCategories-method'></span><span id='topic+is.na+3C-+2CCategories+2Ccharacter-method'></span><span id='topic+is.na+3C-+2CCategories+2Clogical-method'></span><span id='topic+is.na+2CCategory-method'></span><span id='topic+is.na+3C-+2CCategory+2Clogical-method'></span>

<h3>Description</h3>

<p>Crunch categorical variables allow you to set multiple categories as missing.
For instance, you might have &quot;not answered&quot; and &quot;doesn't know&quot; both coded as
missing. This function returns a logical vector of all dataset entries that
fall into any of the missing categories. It also allows you to append
additional categories to the list of missing categories using the setter.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Categories'
is.na(x)

## S4 replacement method for signature 'Categories,character'
is.na(x) &lt;- value

## S4 replacement method for signature 'Categories,logical'
is.na(x) &lt;- value

## S4 method for signature 'Category'
is.na(x)

## S4 replacement method for signature 'Category,logical'
is.na(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is-na-categories_+3A_x">x</code></td>
<td>
<p>Categories or a single Category</p>
</td></tr>
<tr><td><code id="is-na-categories_+3A_value">value</code></td>
<td>
<p>To change the missingness of categories, supply either:
</p>

<ol>
<li><p> a logical vector of equal length of the categories (or length 1 for the
Category method); or
</p>
</li>
<li><p> the names of the categories to mark as missing.
If supplying the latter, any categories already indicated as missing will
remain missing.
</p>
</li></ol>
</td></tr>
</table>


<h3>Value</h3>

<p>Getters return logical, a named vector in the case of the Categories
method; setters return <code>x</code> duly modified.
</p>

<hr>
<h2 id='is-public'>View and modify the &quot;public&quot; attribute of artifacts</h2><span id='topic+is-public'></span><span id='topic+is.public+3C-'></span><span id='topic+is.public'></span><span id='topic+is.public+2CCrunchFilter-method'></span><span id='topic+is.public+3C-+2CCrunchFilter-method'></span><span id='topic+is.public+2CCrunchDeck-method'></span><span id='topic+is.public+3C-+2CCrunchDeck-method'></span><span id='topic+is.public+2CMultitableCatalog-method'></span><span id='topic+is.public+3C-+2CMultitableCatalog-method'></span><span id='topic+is.public+2CMultitable-method'></span><span id='topic+is.public+3C-+2CMultitable-method'></span>

<h3>Description</h3>

<p>View and modify whether all dataset viewers have access to the dataset. This
will return <code>FALSE</code> if the dataset is in draft.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.public(x)

is.public(x) &lt;- value

## S4 method for signature 'CrunchFilter'
is.public(x)

## S4 replacement method for signature 'CrunchFilter'
is.public(x) &lt;- value

## S4 method for signature 'CrunchDeck'
is.public(x)

## S4 replacement method for signature 'CrunchDeck'
is.public(x) &lt;- value

## S4 method for signature 'MultitableCatalog'
is.public(x)

## S4 replacement method for signature 'MultitableCatalog'
is.public(x) &lt;- value

## S4 method for signature 'Multitable'
is.public(x)

## S4 replacement method for signature 'Multitable'
is.public(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is-public_+3A_x">x</code></td>
<td>
<p>a Crunch object</p>
</td></tr>
<tr><td><code id="is-public_+3A_value">value</code></td>
<td>
<p>an attribute to set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>is.public</code>, a logical value for whether the object is
flagged as shared with all dataset viewers. (Its setter thus takes a
logical value as well.) Catalogs of datasets return a vector of logicals
corresponding to the length of the catalog, while entities return a single value.
</p>

<hr>
<h2 id='is.editor'>Read and set edit privileges</h2><span id='topic+is.editor'></span><span id='topic+is.editor+3C-'></span><span id='topic+is.editor+2CMemberCatalog-method'></span><span id='topic+is.editor+3C-+2CMemberCatalog+2Clogical-method'></span><span id='topic+is.editor+2CPermissionCatalog-method'></span><span id='topic+is.editor+2CPermissionTuple-method'></span>

<h3>Description</h3>

<p>Read and set edit privileges
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.editor(x)

is.editor(x) &lt;- value

## S4 method for signature 'MemberCatalog'
is.editor(x)

## S4 replacement method for signature 'MemberCatalog,logical'
is.editor(x) &lt;- value

## S4 method for signature 'PermissionCatalog'
is.editor(x)

## S4 method for signature 'PermissionTuple'
is.editor(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.editor_+3A_x">x</code></td>
<td>
<p>PermissionCatalog or MemberCatalog</p>
</td></tr>
<tr><td><code id="is.editor_+3A_value">value</code></td>
<td>
<p>For the setter, logical: should the indicated users be allowed
to edit the associated object?</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>is.editor</code> returns a logical vector corresponding to whether
the users in the catalog can edit or not.<code style="white-space: pre;">&#8288;is.editor&lt;-&#8288;</code> returns the
catalog, modified.
</p>

<hr>
<h2 id='is.TRUEorFALSE'>Check that a value is TRUE or FALSE</h2><span id='topic+is.TRUEorFALSE'></span>

<h3>Description</h3>

<p>Check that a value is TRUE or FALSE
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.TRUEorFALSE(value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.TRUEorFALSE_+3A_value">value</code></td>
<td>
<p>Value to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if <code>value</code> is either <code>TRUE</code> or <code>FALSE</code>, <code>FALSE</code> otherwise
</p>

<hr>
<h2 id='is.VariableDefinition'>Test whether a Crunch object belongs to a class</h2><span id='topic+is.VariableDefinition'></span><span id='topic+is.VarDef'></span><span id='topic+is.script'></span><span id='topic+is.dataset'></span><span id='topic+is.CrunchExpr'></span><span id='topic+is.Expr'></span><span id='topic+is.Geodata'></span><span id='topic+is.shoji'></span><span id='topic+is.variable'></span><span id='topic+is.Numeric'></span><span id='topic+is.Categorical'></span><span id='topic+is.Text'></span><span id='topic+is.Datetime'></span><span id='topic+is.Multiple'></span><span id='topic+is.MR'></span><span id='topic+is.MultipleResponse'></span><span id='topic+is.CA'></span><span id='topic+is.CategoricalArray'></span><span id='topic+is.NumericArray'></span><span id='topic+is.Array'></span>

<h3>Description</h3>

<p>Test whether a Crunch object belongs to a class
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.VariableDefinition(x)

is.VarDef(x)

is.script(x)

is.dataset(x)

is.CrunchExpr(x)

is.Expr(x)

is.Geodata(x)

is.shoji(x)

is.variable(x)

is.Numeric(x)

is.Categorical(x)

is.Text(x)

is.Datetime(x)

is.Multiple(x)

is.MR(x)

is.MultipleResponse(x)

is.CA(x)

is.CategoricalArray(x)

is.NumericArray(x)

is.Array(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.VariableDefinition_+3A_x">x</code></td>
<td>
<p>an object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical
</p>

<hr>
<h2 id='is.weight+26lt+3B-'>Dataset weights</h2><span id='topic+is.weight+3C-'></span><span id='topic+weight'></span><span id='topic+weight+3C-'></span><span id='topic+weight+3C-+2CAnalysis+2CCrunchVariable-method'></span><span id='topic+weight+3C-+2CAnalysis+2CNULL-method'></span><span id='topic+weight+2CCrunchDataset-method'></span><span id='topic+weight+3C-+2CCrunchDataset+2CANY-method'></span><span id='topic+is.weight'></span><span id='topic+is.weight+3C-+2CNumericVariable-method'></span>

<h3>Description</h3>

<p><code>weight</code> lets you view and set your user's currently applied weight on the
server. <code>weightVariables</code> lets you view all of the variables that have been
designated as valid to use as weights.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.weight(x) &lt;- value

weight(x)

weight(x) &lt;- value

## S4 replacement method for signature 'Analysis,CrunchVariable'
weight(x) &lt;- value

## S4 replacement method for signature 'Analysis,'NULL''
weight(x) &lt;- value

## S4 method for signature 'CrunchDataset'
weight(x)

## S4 replacement method for signature 'CrunchDataset,ANY'
weight(x) &lt;- value

is.weight(x)

## S4 replacement method for signature 'NumericVariable'
is.weight(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.weight+2B26lt+2B3B-_+3A_x">x</code></td>
<td>
<p>a Dataset</p>
</td></tr>
<tr><td><code id="is.weight+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>a Variable, VariableDefinition, or <code>NULL</code>. If a
VariableDefinition is passed, the variable will first be created and then set
as the datasets weight. Set to <code>NULL</code> to remove existing weights from the
dataset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For the <code>weight</code> getter, a Variable if there is a weight, else
NULL. For the setter, x, modified accordingly. <code>weightVariables</code> returns
the aliases (or names, according to <code>options(crunch.namekey.dataset)</code>),
of the variables designated as weights.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weightVariables">weightVariables()</a></code> <code><a href="#topic+makeWeight">makeWeight()</a></code>
</p>

<hr>
<h2 id='joinDatasets'>Add columns from one dataset to another, joining on a key</h2><span id='topic+joinDatasets'></span><span id='topic+extendDataset'></span><span id='topic+merge.CrunchDataset'></span>

<h3>Description</h3>

<p>As <code><a href="base.html#topic+merge">base::merge()</a></code> does for <code>data.frame</code>s, this function takes two datasets,
matches rows based on a specified key variable, and adds columns from one to
the other.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>joinDatasets(
  x,
  y,
  by = intersect(names(x), names(y)),
  by.x = by,
  by.y = by,
  all = FALSE,
  all.x = TRUE,
  all.y = FALSE,
  copy = TRUE
)

extendDataset(
  x,
  y,
  by = intersect(names(x), names(y)),
  by.x = by,
  by.y = by,
  all = FALSE,
  all.x = TRUE,
  all.y = FALSE,
  ...
)

## S3 method for class 'CrunchDataset'
merge(
  x,
  y,
  by = intersect(names(x), names(y)),
  by.x = by,
  by.y = by,
  all = FALSE,
  all.x = TRUE,
  all.y = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="joinDatasets_+3A_x">x</code></td>
<td>
<p>CrunchDataset to add data to</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_y">y</code></td>
<td>
<p>CrunchDataset to copy data from. May be filtered by rows and/or
columns.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_by">by</code></td>
<td>
<p>character, optional shortcut for specifying <code>by.x</code> and
<code>by.y</code> by alias if the key variables have the same alias in both
datasets.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_by.x">by.x</code></td>
<td>
<p>CrunchVariable in <code>x</code> on which to join, or the alias
(following <code>crunch.namekey.dataset</code> of a variable. Must be type
numeric or text and have all unique, non-missing values.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_by.y">by.y</code></td>
<td>
<p>CrunchVariable in <code>y</code> on which to join, or the alias
(following <code>crunch.namekey.dataset</code> of a variable. Must be type
numeric or text and have all unique, non-missing values.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_all">all</code></td>
<td>
<p>logical: should all rows in x and y be kept, i.e. a &quot;full outer&quot;
join? Only <code>FALSE</code> is currently supported.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_all.x">all.x</code></td>
<td>
<p>logical: should all rows in x be kept, i.e. a &quot;left outer&quot;
join? Only <code>TRUE</code> is currently supported.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_all.y">all.y</code></td>
<td>
<p>logical: should all rows in y be kept, i.e. a &quot;right outer&quot;
join? Only <code>FALSE</code> is currently supported.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_copy">copy</code></td>
<td>
<p>logical: make a virtual or materialized join. Default is
<code>TRUE</code>, which means materialized. Virtual joins are in fact not currently
implemented, so the default is the only valid value.</p>
</td></tr>
<tr><td><code id="joinDatasets_+3A_...">...</code></td>
<td>
<p>additional arguments, ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Since joining two datasets can sometimes produce unexpected results if the
keys differ between the two datasets, you may want to follow the
fork-edit-merge workflow for this operation. To do this, fork the dataset
with <code><a href="#topic+forkDataset">forkDataset()</a></code>, join the new data to the fork, ensure that
the resulting dataset is correct, and merge it back to the original dataset
with <code><a href="#topic+mergeFork">mergeFork()</a></code>. For more, see
<code>vignette("fork-and-merge", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p><code>x</code> extended by the columns of <code>y</code>, matched on the &quot;by&quot; variables.
</p>

<hr>
<h2 id='length'>Length of Crunch objects</h2><span id='topic+length'></span><span id='topic+length+2CCrunchDeck-method'></span><span id='topic+length+2CShojiCatalog-method'></span><span id='topic+length+2CShojiOrder-method'></span><span id='topic+length+2COrderGroup-method'></span><span id='topic+length+2CTabBookResult-method'></span><span id='topic+length+2CMultitableResult-method'></span>

<h3>Description</h3>

<p>Length of Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'CrunchDeck'
length(x)

## S4 method for signature 'ShojiCatalog'
length(x)

## S4 method for signature 'ShojiOrder'
length(x)

## S4 method for signature 'OrderGroup'
length(x)

## S4 method for signature 'TabBookResult'
length(x)

## S4 method for signature 'MultitableResult'
length(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="length_+3A_x">x</code></td>
<td>
<p>a Crunch object (catalog, order, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Integer: the number of elements in the catalog, group, folder, etc.
</p>

<hr>
<h2 id='listDatasetGadget'>Open dataset selector</h2><span id='topic+listDatasetGadget'></span>

<h3>Description</h3>

<p>Open dataset selector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listDatasetGadget(kind = c("active", "all", "archived"), refresh = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="listDatasetGadget_+3A_kind">kind</code></td>
<td>
<p>character specifying whether to look in active, archived, or all
datasets. Default is &quot;active&quot;, i.e. non-archived.</p>
</td></tr>
<tr><td><code id="listDatasetGadget_+3A_refresh">refresh</code></td>
<td>
<p>logical: should the function check the Crunch API for new
datasets? Default is FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>loadDataset()</code> call is pasted into your RStudio session
</p>

<hr>
<h2 id='listDatasets'>Get the names of datasets in a project</h2><span id='topic+listDatasets'></span>

<h3>Description</h3>

<p><code>listDatasets()</code> is a convenience function for quickly seeing what datasets
are in a project. It is equivalent to <code>names(datasets(proj))</code>, with some
additional optional arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listDatasets(
  kind = c("active", "all", "archived"),
  project = NULL,
  refresh = FALSE,
  shiny = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="listDatasets_+3A_kind">kind</code></td>
<td>
<p>character specifying whether to look in active, archived, or all
datasets. Default is &quot;active&quot;, i.e. non-archived.</p>
</td></tr>
<tr><td><code id="listDatasets_+3A_project">project</code></td>
<td>
<p><code>ProjectFolder</code> entity, character name of a project, or
<code>NULL</code>, the default. If a Project entity or reference is supplied, the
function will display datasets from that Project's datasets. If <code>NULL</code>,
your personal folder will be used.</p>
</td></tr>
<tr><td><code id="listDatasets_+3A_refresh">refresh</code></td>
<td>
<p>logical: should the function check the Crunch API for new
datasets? Default is FALSE.</p>
</td></tr>
<tr><td><code id="listDatasets_+3A_shiny">shiny</code></td>
<td>
<p>logical: launch a Shiny gadget to help select the right dataset.
The gadget will return a valid <code>loadDataset()</code> call which loads the selected
dataset. The gadget requires RStudio, as well as the <code>crunchy</code> package.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Specifying <code>listDatasets(shiny = TRUE)</code> will, instead of printing dataset
names, load a Shiny gadget that provides a GUI for navigating the project
tree to find a dataset, if you're running in RStudio.
</p>


<h3>Value</h3>

<p>A character vector of dataset names, each of which would be a valid
input for <code><a href="#topic+loadDataset">loadDataset()</a></code>
</p>

<hr>
<h2 id='loadDataset'>Load a Crunch Dataset</h2><span id='topic+loadDataset'></span>

<h3>Description</h3>

<p>This function gives you a Dataset object, which refers to a dataset hosted on
the Crunch platform. With this Dataset, you can perform lots of data cleaning
and analysis as if the dataset were fully resident on your computer, without
having to pull data locally.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadDataset(
  dataset,
  kind = c("active", "all", "archived"),
  project = NULL,
  refresh = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadDataset_+3A_dataset">dataset</code></td>
<td>
<p>character, the name or path to a Crunch dataset to load, or a
dataset URL. If <code>dataset</code> is a path to a dataset in a project, the path will
be be parsed and walked, relative to <code>project</code> if specified, and the
function will look for the dataset inside that project. If no path is
specified and no <code>project</code> provided, the function will call a search API to
do an exact string match on dataset names.</p>
</td></tr>
<tr><td><code id="loadDataset_+3A_kind">kind</code></td>
<td>
<p>character specifying whether to look in active, archived, or all
datasets. Default is &quot;active&quot;, i.e. non-archived.</p>
</td></tr>
<tr><td><code id="loadDataset_+3A_project">project</code></td>
<td>
<p><code>ProjectFolder</code> entity, character name (path) to a project, or
<code>NULL</code>, the default. If a Project entity or reference is supplied, either
here or as a path in <code>dataset</code>, the dataset lookup will be limited to that
project only.</p>
</td></tr>
<tr><td><code id="loadDataset_+3A_refresh">refresh</code></td>
<td>
<p>logical: should the function check the Crunch API for new
datasets? Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>You can specify a dataset to load by its human-friendly &quot;name&quot;, possibly also
by indicating a project (folder) to find it in. This makes code more
readable, but it does mean that if the dataset is renamed or moved to a
different folder, your code may no longer work. The fastest, most reliable
way to use <code>loadDataset()</code> is to provide a URL to the dataset&ndash;the dataset's
URL will never change.
</p>


<h3>Value</h3>

<p>An object of class <code>CrunchDataset</code>.
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+cd">cd()</a></code> for details of parsing and walking dataset folder/project
paths.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDatasets("A special dataset")
ds2 &lt;- loadDatasets("~/My dataset")
ds3 &lt;- loadDataset("My dataset", project = "~") # Same as ds2
ds4 &lt;- loadDataset("https://app.crunch.io/api/datasets/bd3ad2/")

## End(Not run)
</code></pre>

<hr>
<h2 id='lock'>Lock and unlock a dataset for editing</h2><span id='topic+lock'></span><span id='topic+unlock'></span>

<h3>Description</h3>

<p>Crunch allows a single active editor. If you have edit privileges but are
not currently editing the dataset, you must unlock the dataset before
making changes. You may then lock the dataset when you're done editing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lock(dataset)

unlock(dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lock_+3A_dataset">dataset</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataset</code>, invisibly, after having set the current editor.
</p>

<hr>
<h2 id='logout'>DEPRECATED! Authenticate with the Crunch API</h2><span id='topic+logout'></span><span id='topic+login'></span><span id='topic+resetPassword'></span>

<h3>Description</h3>

<p>A deprecated method to authenticate to the crunch.io API. See <code><a href="#topic+crunch-api-key">crunch-api-key</a></code>
for the currently supported method, as <code>login()</code>, <code>logout()</code> and <code>resetPassword</code>()
no longer work.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>logout()

login(...)

resetPassword(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="logout_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>

<hr>
<h2 id='makeArrayGadget'>Array builder</h2><span id='topic+makeArrayGadget'></span>

<h3>Description</h3>

<p>Launch array builder gadget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeArrayGadget()
</code></pre>


<h3>Details</h3>

<p>Categorical Array and Multiple Response variables can be difficult to
construct without being able to investigate the available variables, and
their categories. This shiny gadget lets you select subvariables from the
dataset list, and ensures that those variables have consistent categories. To
use the gadget you must have at least one CrunchDataset loaded into the global
environment.
</p>


<h3>Value</h3>

<p>a valid call to <code>makeArray()</code> or <code>makeMR()</code>
</p>

<hr>
<h2 id='makeCaseVariable'>Make a case variable</h2><span id='topic+makeCaseVariable'></span><span id='topic+caseExpr'></span>

<h3>Description</h3>

<p>The <code>makeCaseVariable</code> function derives a variable using values from other
variables. These are evaluated in the order they are supplied in the list
as the <code>cases</code> argument (they proceed in an IF, ELSE IF, ELSE IF, ..., ELSE
fashion); the first one that matches selects the corresponding value from
the case list. <code>caseExpr()</code> is a version that returns an expression that
could be used when creating complex variables, see <code><a href="#topic+expressions">expressions</a></code> for
more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeCaseVariable(..., cases, data = NULL, name)

caseExpr(..., cases)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeCaseVariable_+3A_...">...</code></td>
<td>
<p>a sequence of named expressions to use as cases as well as other
properties to pass about the case variable (i.e. alias, description)</p>
</td></tr>
<tr><td><code id="makeCaseVariable_+3A_cases">cases</code></td>
<td>
<p>a list of lists with each case condition to use each must
include at least a <code>name</code> and an <code>expression</code> element. Cases may also include
<code>missing</code> (logical) and <code>numeric_value</code> (numeric).</p>
</td></tr>
<tr><td><code id="makeCaseVariable_+3A_data">data</code></td>
<td>
<p>(optional) a crunch dataset to use. Specifying this means you
don't have to put <code style="white-space: pre;">&#8288;dataset$&#8288;</code> in front of each variable name.</p>
</td></tr>
<tr><td><code id="makeCaseVariable_+3A_name">name</code></td>
<td>
<p>a character to use as the name of the case variable to create</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are two ways to specify cases, but you must pick only one (note these
two will produce the same case variable):
</p>

<ol>
<li><p> When you just want to specify conditions, you can use named conditions:
<code>makeCaseVariable(case1=ds$v1 == 1, case2=ds$v2 == 2, name="new case")</code>
</p>
</li>
<li><p> You can also use the <code>cases</code> argument, which is useful when you want to
provide category ids, numeric values, or missingness:
<code>makeCaseVariable(   cases=list( list(expression=ds$v1 == 1, name="case1"), list(expression=ds$v2 == 2, name="case2")   ),   name="new case" )</code>
</p>
</li></ol>

<p>Rows in the dataset that do not match any of the provided &quot;cases&quot; will
be assigned to an &quot;else&quot; category. By default, Crunch will use the system
missing &quot;No Data&quot; category. Alternatively, you can provide an else
case definition for these rows by including as the last &quot;case&quot; you provide
one with its <code>expression</code> set to the string &quot;else&quot;. See the examples for
details.
</p>


<h3>Value</h3>

<p>A <code><a href="#topic+VariableDefinition">VariableDefinition</a></code> that will create the new
case variable when assigned into the Dataset.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
makeCaseVariable(case1 = ds$v1 == 1, case2 = ds$v2 == 2, name = "new case")
makeCaseVariable(
    cases = list(
        list(expression = ds$v1 == 1, name = "case1"),
        list(expression = ds$v2 == 2, name = "case2")
    ),
    name = "new case"
)

# different ways to specify else cases
makeCaseVariable(
    cases = list(
        list(expression = ds$v1 == 1, name = "case1"),
        list(expression = ds$v2 == 2, name = "case2"),
        list(expression = "else", name = "other")
    ),
    name = "new case"
)
makeCaseVariable(case1 = ds$v1 == 1, case2 = ds$v2 == 2, other = "else", name = "new case")

# the dataset can be specified with data=
makeCaseVariable(case1 = v1 == 1, case2 = v2 == 2, data = ds, name = "new case")

## End(Not run)
</code></pre>

<hr>
<h2 id='makeCaseWhenVariable'>Create a categorical or numeric variable based on conditions</h2><span id='topic+makeCaseWhenVariable'></span><span id='topic+caseWhenExpr'></span>

<h3>Description</h3>

<p>Conditions are specified using a series of formulas: the left-hand side is
the condition that must be true (a <code>CrunchLogicalExpr</code>) and the right-hand
side is where to get the value if the condition on the left-hand side is
true. When creating a categorical variable, the right-hand side must be
a <code>Category</code> or a categorical <code>CrunchVariable</code> or <code>CrunchExpression</code>, while
for numeric variables it is a single number or variable or expression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeCaseWhenVariable(..., data = NULL, cases = NULL, name, type = NULL)

caseWhenExpr(..., data = NULL, cases = NULL, type = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeCaseWhenVariable_+3A_...">...</code></td>
<td>
<p>formulas where the left hand side is a <code>CrunchLogicalExpression</code> (or <code>TRUE</code>
to indicate the &quot;else&quot; case that will be met if all the other expression are
not met) and the right hand side is a CrunchVariable that should be filled in,
a <code>Category</code> object describing the Category it should be used, a string
which will be the name of the <code>Category</code> or <code>NA</code> to indicate that it should
be replaced with the system missing value. For <code>makeCaseWhenVariable()</code>
non-formula arguments will be passed to <code style="white-space: pre;">&#8288;[VarDef()]&#8288;</code></p>
</td></tr>
<tr><td><code id="makeCaseWhenVariable_+3A_data">data</code></td>
<td>
<p>A CrunchDataset to use if variable aliases are left bare in the
formulas.</p>
</td></tr>
<tr><td><code id="makeCaseWhenVariable_+3A_cases">cases</code></td>
<td>
<p>A list of formulas that match the description in <code>...</code> or a list of
lists with named items, &quot;expression&quot; (like the left-hand side of the formulas above),
&quot;fill&quot; for a variable to fill in, or &quot;name&quot;, &quot;id&quot;, and other items that describe a
category.</p>
</td></tr>
<tr><td><code id="makeCaseWhenVariable_+3A_name">name</code></td>
<td>
<p>For <code>makeCaseWhenVariable()</code> the name of the variable to create.</p>
</td></tr>
<tr><td><code id="makeCaseWhenVariable_+3A_type">type</code></td>
<td>
<p>The type of the variable to output (either &quot;categorical&quot; or &quot;numeric&quot;), only
required if all fills are expressions and so their type cannot be guessed automatically.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>makeCaseWhenVariable()</code> returns a <code>VariableDefinition</code> and
<code>caseWhenExpr()</code> returns an expression
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Creating categorical variables
ds$new_var &lt;- makeCaseWhenVariable(
   ds$x %in% c("a", "b") ~ ds$y, # can fill with a variable
   ds$x %in% c("c", "d") ~ Category(name = "c or d", numeric_value = 10), # or a Category
   # If none of the categories match, will be set to missing unless you
   # specify an "else" case with `TRUE` in the left hand side
   TRUE ~ Category(name = "catch all"),
   name = "combined x and y"
)

ds$brand_x_pref &lt;- makeCaseWhenVariable(
   ds$brand[[1]] == "Brand X" ~ ds$pref[[1]],
   ds$brand[[2]] == "Brand X" ~ ds$pref[[2]],
   ds$brand[[3]] == "Brand X" ~ ds$pref[[3]],
   name = "brand x preference"
)

ds$x_among_aware &lt;- makeCaseWhenVariable(
   ds$aware_x == "Yes" ~ ds$x,
   TRUE ~ Category(name = "(Not aware)", missing = TRUE),
   name = "x (among respondents aware of x)"
)

ds$new_num_var &lt;- makeCaseWhenVariable(
  ds$x %in% c("a", "b") ~ ds$z, # LHS as before, RHS can be numeric variables,
  ds$x == "c" ~ ds$z * 10, # expressions,
  ds$x == "d" ~ 100, # or numbers
  name = "New numeric variable"
)

ds$capped_z &lt;- makeCaseWhenVariable(
  ds$z &gt; 10 ~ 10,
  TRUE ~ ds$z,
  name = "Capped z"
)

# caseWhenExpr can be used inside other expressions
ds$brand_x_prefer_high &lt;- VarDef(
   selectCategories(
       caseWhenExpr(
           ds$brand_shown[[1]] == "Brand X" ~ ds$ratings[[1]],
           ds$brand_shown[[2]] == "Brand X" ~ ds$ratings[[2]],
           ds$brand_shown[[3]] == "Brand X" ~ ds$ratings[[3]]
       ),
       c("Best", "Very Good")
   ),
   name = "Rate X highly"
)

# Using lists in `cases` argument can be helpful when working programmatically
source_var &lt;- ds$x
inclusion_condition &lt;- ds$skipped_x != "Yes"

ds$x2_among_aware &lt;- makeCaseWhenVariable(
   cases = list(list(fill = source_var, expression = inclusion_condition)),
   name = "x2 among aware"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='makeDimTransform'>Helper for creating slide dimension transformations for dashboards and exports</h2><span id='topic+makeDimTransform'></span>

<h3>Description</h3>

<p>When displayed in a Crunch Dashboard or exported, crunch slides can have transformations
that customize their display. This is a helper to form the correct data structure for
the functions <code><a href="#topic+newSlide">newSlide()</a></code> for setting the transformation directly. For more details see the
<a href="https://crunch.io/api/reference/#post-/datasets/-dataset_id-/decks/-deck_id-/slides/">API documentation</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeDimTransform(
  colors = NULL,
  hide = NULL,
  rename = NULL,
  order = NULL,
  name = NULL,
  description = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeDimTransform_+3A_colors">colors</code></td>
<td>
<p>A crunch <code>AnalyticPalettes</code> (<code><a href="#topic+palettes">palettes()</a></code>) or a vector of color RGB hex color
codes that will be used for the color of graphs in the dashboard (used in the order of
appearance of categories/subvariables).</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_hide">hide</code></td>
<td>
<p>A vector of category names/ids or subvariable names/aliases to hide from display</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_rename">rename</code></td>
<td>
<p>A named vector of category names/ids or subvariable names/aliases to override
their default values</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_order">order</code></td>
<td>
<p>A vector of category names/ids or subvariable names/aliases to override the
default ordering of the dimension.</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_name">name</code></td>
<td>
<p>A name for the dimension, overrides the variable's name</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_description">description</code></td>
<td>
<p>A description for the dimension, overrides the variable's description</p>
</td></tr>
<tr><td><code id="makeDimTransform_+3A_...">...</code></td>
<td>
<p>Other arguments, passed directly to the API for future expansion</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Hiding an element
transforms(slide) &lt;- list(rows_dimension = makeDimTransform(hide = "Neutral"))

# Using an existing saved palette
transforms(slide) &lt;- list(rows_dimension = makeDimTransform(
    colors = defaultPalette(ds)
))

# Setting specific colors
transform(slide) &lt;- list(rows_dimension = makeDimTransform(
     colors = c("#af8dc3", "#f7f7f7", "#7fbf7b")
))

# Reordering &amp; renaming elements
transforms(slide) &lt;- list(
     rows_dimension = makeDimTransform(
         rename = c("V. Good" = "Very Good", "V. Bad" = "Very Bad"),
         order = 5:1
     ),
     columns_dimension = makeDimTransform(order = c("Brand X", "Brand A", "Brand B"))
)

## End(Not run)

</code></pre>

<hr>
<h2 id='makeInsertion'>Convert a child class of Insertion into a proper Insertion</h2><span id='topic+makeInsertion'></span><span id='topic+makeInsertion+2CSubtotal-method'></span><span id='topic+makeInsertion+2CHeading-method'></span><span id='topic+makeInsertion+2CInsertion-method'></span><span id='topic+makeInsertion+2CSummaryStat-method'></span>

<h3>Description</h3>

<p>The Crunch API expects that <a href="#topic+SubtotalsHeadings">Subtotals, Headings</a>, and
other insertions all have the same shape. Before sending insertions to the
server, we need to call <code>makeInsertion</code> on any insertions to make sure they
are proper <code>Insertion</code>s. This process sometimes requires a variable's
categories object (e.g. in order to convert from category names to category
ids)
</p>
<p>The Crunch API expects that <a href="#topic+SubtotalsHeadings">Subtotals, Headings</a>, and
other insertions all have the same shape. Before sending insertions to the
server, we need to call <code>makeInsertion</code> on any insertions to make sure they
are proper <code>Insertion</code>s. This process sometimes requires a variable's
categories object (e.g. in order to convert from category names to category
ids)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Subtotal'
makeInsertion(x, var_items, alias)

## S4 method for signature 'Heading'
makeInsertion(x, var_items, alias)

## S4 method for signature 'Insertion'
makeInsertion(x, var_items, alias)

## S4 method for signature 'Subtotal'
makeInsertion(x, var_items, alias)

## S4 method for signature 'Heading'
makeInsertion(x, var_items, alias)

## S4 method for signature 'Insertion'
makeInsertion(x, var_items, alias)

## S4 method for signature 'SummaryStat'
makeInsertion(x, var_items, alias)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeInsertion_+3A_x">x</code></td>
<td>
<p>an object the is a child of <a href="#topic+Insertions">Insertion</a> (e.g.
<code>Subtotal</code>, <code>Heading</code>)</p>
</td></tr>
<tr><td><code id="makeInsertion_+3A_var_items">var_items</code></td>
<td>
<p>Either categories (from <code>categories(variable)</code>) or subvariables
(from <code>subvariables(variable)</code>) to used by
<code>makeInsertions</code> to make <code>Insertions</code> from a child object (e.g. <code>Subtotal</code> or
<code>Heading</code>).</p>
</td></tr>
<tr><td><code id="makeInsertion_+3A_alias">alias</code></td>
<td>
<p>The alias of the variable the insertion is being added to, only
needed for MR insertions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an Insertion object
</p>
<p>an Insertion object
</p>

<hr>
<h2 id='makeMarginMap'>Make a map of margins</h2><span id='topic+makeMarginMap'></span>

<h3>Description</h3>

<p>Useful when converting to and from user and real cube dimension indexes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeMarginMap(dimTypes)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeMarginMap_+3A_dimtypes">dimTypes</code></td>
<td>
<p>dimension types from <code>getDimTypes()</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of margins, the length of which is the length of the real
cube, the values are the user cube dimensions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
makeMarginMap(getDimTypes(cat_by_cat_cube))
# 1 2

makeMarginMap(getDimTypes(MR_by_cat_cube))
# 1 1 2

makeMarginMap(getDimTypes(cat_by_MR_cube))
# 1 2 2

makeMarginMap(getDimTypes(MR_by_MR_cube))
# 1 1 2 2

## End(Not run)

</code></pre>

<hr>
<h2 id='makeMRFromText'>Create Multiple Response Variable from Delimited lists</h2><span id='topic+makeMRFromText'></span>

<h3>Description</h3>

<p>Surveys often record multiple response questions in delimited lists where
each respondent's selections are separated by a delimiter like <code style="white-space: pre;">&#8288;;&#8288;</code> or <code>|</code>.
This function breaks the delimited responses into subvariables, uploads those
subvariables to Crunch, and finally creates a multiple response variable from
them.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeMRFromText(
  var,
  delim,
  name,
  selected = "selected",
  not_selected = "not_selected",
  unanswered = NA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeMRFromText_+3A_var">var</code></td>
<td>
<p>The variable containing the delimited responses</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_delim">delim</code></td>
<td>
<p>The delimiter separating the responses</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_name">name</code></td>
<td>
<p>The name of the resulting MR variable</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_selected">selected</code></td>
<td>
<p>A character string used to indicate a selection, defaults to
&quot;selected&quot;</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_not_selected">not_selected</code></td>
<td>
<p>Character string identifying non-selection, defaults to
&quot;not_selected&quot;</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_unanswered">unanswered</code></td>
<td>
<p>Character string indicating non-response, defaults to NA.</p>
</td></tr>
<tr><td><code id="makeMRFromText_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed on to <code><a href="#topic+makeMR">makeMR()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Multiple response variable definition
</p>

<hr>
<h2 id='makeWeight'>Generate a weight variable</h2><span id='topic+makeWeight'></span>

<h3>Description</h3>

<p>This function allows you to generate a weight variable by supplying a set of
categorical variables and the target distribution for each of the variables'
categories. Weights are computed by iteratively 'raking' conditional 'cells'
to the provided marginal targets.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeWeight(..., name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeWeight_+3A_...">...</code></td>
<td>
<p>A series of expressions of the form <code>variable ~ target_weights</code>.
The variable must be a categorical Crunch variable, and the target weights
must be a numeric vector whose length should be equal to the number of
categories contained in the variable, and whose sum is equal to 100 or 1. If
you supply fewer target weights than there are categories <code>makeWeight</code> will
pad the target weight vector with 0s.</p>
</td></tr>
<tr><td><code id="makeWeight_+3A_name">name</code></td>
<td>
<p>The name of the resulting variable</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For instance, if you wanted to create a
weight variable which equally weighted four categories stored in <code>ds$var</code>
you would call <code>ds$weight1 &lt;- makeWeight(ds$var ~ c(25, 25, 25, 25), name = "weight1")</code>.
Note that <code>makeWeight</code> returns a <code>VariableDefinition</code>, an expression that
when assigned into your Dataset becomes a derived variable. This does not on
its own set the new variable as &quot;the weight&quot; for your dataset. To set that
attribute, use <code><a href="#topic+weight">weight()</a></code>. Alternatively, you can also create the variable
and set the weight attribute in one step with
<code>weight(ds) &lt;- makeWeight(ds$var ~ c(25, 25, 25, 25), name = "weight1")</code>.
</p>


<h3>Value</h3>

<p>A crunch <code><a href="#topic+VariableDefinition">VariableDefinition()</a></code> of the weight variable
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weight+3C-">weight&lt;-()</a></code>; <code><a href="#topic+settings">settings()</a></code> for the &quot;default weight&quot; for other
dataset viewers.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
mtcars$cyl &lt;- as.factor(mtcars$cyl)
mtcars$gear &lt;- as.factor(mtcars$gear)
ds &lt;- newDataset(mtcars)
# Create a new "raked" variable
ds$weight &lt;- makeWeight(ds$cyl ~ c(30, 30, 40, 0),
    ds$gear ~ c(20, 20, 60, 0),
    name = "weight"
)
summary(ds$weight)
# ds$weight is not "the weight" for the dataset unless you set it:
weight(ds) &lt;- ds$weight
# Or, you can create the variable and set as weight in one step:
weight(ds) &lt;- makeWeight(ds$var ~ c(25, 25, 25, 25), name = "weight2")

## End(Not run)
</code></pre>

<hr>
<h2 id='margin-translation'>Convert from user margins to real cube margins or vice versa</h2><span id='topic+margin-translation'></span><span id='topic+user2realMargin'></span><span id='topic+real2userMargin'></span>

<h3>Description</h3>

<p>It is helpful to programmatically move from user-specified margins to real
cube margins that apply to the higher-dimensional real cube (with
<code>user2realMargin</code>). Or to move from the higher-dimensional real cube to user cube
(with <code>real2userMargin</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>user2realMargin(margin, dimTypes = getDimTypes(cube), cube)

real2userMargin(margin, dimTypes = getDimTypes(cube), cube, dedupe = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="margin-translation_+3A_margin">margin</code></td>
<td>
<p>the margin or margins for the user cube to be translated</p>
</td></tr>
<tr><td><code id="margin-translation_+3A_dimtypes">dimTypes</code></td>
<td>
<p>dimension types from <code>getDimTypes()</code> (by default:
<code>getDimTypes(cube)</code>)</p>
</td></tr>
<tr><td><code id="margin-translation_+3A_cube">cube</code></td>
<td>
<p>the cube to translate the margin for (optional if <code>dimTypes</code> is
explicitly supplied)</p>
</td></tr>
<tr><td><code id="margin-translation_+3A_dedupe">dedupe</code></td>
<td>
<p>logical, should the user dimensions in the result be
deduplicated (for <code>real2userMargin</code> only)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>margin or margins in the higher-dimension real cube
</p>

<hr>
<h2 id='matchCatToFeat'>Match categories with features from geodata</h2><span id='topic+matchCatToFeat'></span>

<h3>Description</h3>

<p>Match categories with features from geodata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>matchCatToFeat(categories, all_features = availableGeodataFeatures())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matchCatToFeat_+3A_categories">categories</code></td>
<td>
<p>a vector of categories to match</p>
</td></tr>
<tr><td><code id="matchCatToFeat_+3A_all_features">all_features</code></td>
<td>
<p>a dataframe of all available geodata features. (default:
downloaded from Crunch servers)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>geodatum to associate with the variable that produced categories
</p>

<hr>
<h2 id='me'>My user entity</h2><span id='topic+me'></span>

<h3>Description</h3>

<p>Get the user entity of the currently authenticated user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>me()
</code></pre>


<h3>Value</h3>

<p>A UserEntity
</p>

<hr>
<h2 id='members'>Manage access to datasets and other objects</h2><span id='topic+members'></span><span id='topic+members+3C-'></span><span id='topic+permissions'></span><span id='topic+members+2CProjectFolder-method'></span><span id='topic+members+3C-+2CProjectFolder+2CMemberCatalog-method'></span><span id='topic+members+2CCrunchTeam-method'></span><span id='topic+members+3C-+2CProjectFolder+2Ccharacter-method'></span><span id='topic+members+3C-+2CCrunchTeam+2CMemberCatalog-method'></span><span id='topic+members+3C-+2CCrunchTeam+2Ccharacter-method'></span>

<h3>Description</h3>

<p>These methods allow you to work with teams.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>members(x)

members(x) &lt;- value

permissions(x)

## S4 method for signature 'ProjectFolder'
members(x)

## S4 replacement method for signature 'ProjectFolder,MemberCatalog'
members(x) &lt;- value

## S4 method for signature 'CrunchTeam'
members(x)

## S4 replacement method for signature 'ProjectFolder,character'
members(x) &lt;- value

## S4 replacement method for signature 'CrunchTeam,MemberCatalog'
members(x) &lt;- value

## S4 replacement method for signature 'CrunchTeam,character'
members(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="members_+3A_x">x</code></td>
<td>
<p><code>CrunchDataset</code>, <code>ProjectFolder</code>, or <code>CrunchTeam</code></p>
</td></tr>
<tr><td><code id="members_+3A_value">value</code></td>
<td>
<p>for <code style="white-space: pre;">&#8288;members&lt;-&#8288;</code>, a character vector of emails or URLs of
users to add to the team.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>members()</code> returns a
<code>MemberCatalog</code>, which has references to the users that are members
of the team. <code style="white-space: pre;">&#8288;members&lt;-&#8288;</code> returns <code>x</code> with the given users added
to the members catalog. <code>permissions()</code> returns a <code>PermissionCatalog</code> with
similar semantics.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+users">users()</a></code>
</p>

<hr>
<h2 id='merge'>Merge a CrunchDataFrame</h2><span id='topic+merge'></span><span id='topic+merge.CrunchDataFrame'></span>

<h3>Description</h3>

<p><code>merge</code>ing a CrunchDataFrame with a local dataframe is useful in situations
where you have new information in your local R session that you want to
connect with Crunch data. For example, for making
plots with Crunch and non-Crunch data. It produces a hybrid CrunchDataFrame
that has the local data attached to it, but like normal CrunchDataFrames
it is still judicious about downloading data from the server only when it
is needed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CrunchDataFrame'
merge(
  x,
  y,
  by = intersect(names(x), names(y)),
  by.x = by,
  by.y = by,
  sort = c("x", "y"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_+3A_x">x</code></td>
<td>
<p>a CrunchDataFrame</p>
</td></tr>
<tr><td><code id="merge_+3A_y">y</code></td>
<td>
<p>a standard data.frame</p>
</td></tr>
<tr><td><code id="merge_+3A_by">by</code></td>
<td>
<p>name of the variable to match in both data sources (default: the
intersection of the names of x and y)</p>
</td></tr>
<tr><td><code id="merge_+3A_by.x">by.x</code></td>
<td>
<p>name of the variable to match in x</p>
</td></tr>
<tr><td><code id="merge_+3A_by.y">by.y</code></td>
<td>
<p>name of the variable to match in y</p>
</td></tr>
<tr><td><code id="merge_+3A_sort">sort</code></td>
<td>
<p>character, either &quot;x&quot; or &quot;y&quot; (default: &quot;x&quot;). Which of the inputs
should be used for the output order. Unlike merge.data.frame,
<code>merge.CrunchDataFrame</code> will not re-sort the order of the output. It will use
the order of either <code>x</code> or <code>y</code>.</p>
</td></tr>
<tr><td><code id="merge_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Merging a CrunchDataFrame with a local dataframe does not allow specifying
all rows from both sources. Instead, the resulting CrunchDataFrame will
include all of the rows in whichever source is used for sorting (x or y). So
if you specify <code>sort="x"</code> (the default) all rows of x will be present but
rows in y that do not match with rows in x will not be present.
</p>
<p>Merging a CrunchDataFrame with a local dataframe is experimental and might
result in unexpected results. One known issue is that using <code>merge</code> on a
CrunchDataFrame will change the both the CrunchDataFrame used as input as
well as create a new CrunchDataFrame.
</p>


<h3>Value</h3>

<p>a CrunchDataFrame with columns from both <code>x</code> and <code>y</code>
</p>

<hr>
<h2 id='mergeFork'>Merge changes to a dataset from a fork</h2><span id='topic+mergeFork'></span>

<h3>Description</h3>

<p>Crunch datasets include information about the dataset's revision history.
This function takes the changes made on a dataset fork and adds them to the
revision history of the parent dataset, like a merge of branches in a
version control system.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mergeFork(dataset, fork, autorollback = TRUE, force = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mergeFork_+3A_dataset">dataset</code></td>
<td>
<p>The <code>CrunchDataset</code> to merge to</p>
</td></tr>
<tr><td><code id="mergeFork_+3A_fork">fork</code></td>
<td>
<p>The <code>CrunchDataset</code>, which must be a fork from <code>dataset</code>, that is
to be merged in.</p>
</td></tr>
<tr><td><code id="mergeFork_+3A_autorollback">autorollback</code></td>
<td>
<p>logical If the merge fails, should <code>dataset</code> be restored
to its state prior to the merge, or should it be left in its partially
merged state for debugging and manual fixing? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="mergeFork_+3A_force">force</code></td>
<td>
<p>logical Attempt to push through merge conflicts by dropping all
changes to <code>dataset</code> that occurred after <code>fork</code> diverged from and take only
the changes from <code>fork</code>? Default is <code>FALSE</code>. You should only use <code>force=TRUE</code>
after first attempting and failing to merge without forcing.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All modifications of a dataset record actions in its revision history. For
example, if you add a variable to the dataset, that action is recorded. The
sum of these records is a dataset's revision history, and it is possible
to merge in the revision history of a dataset that has been forked.
</p>
<p>This function is most often used in conjunction with <code><a href="#topic+forkDataset">forkDataset()</a></code> to
create a copy of a dataset, make some changes to that copy, and then merge
the changes back into the original dataset. For more on this workflow, see
<code>vignette("fork-and-merge", package = "crunch")</code>.
</p>


<h3>Value</h3>

<p><code>dataset</code> with changes from <code>fork</code> merged to it.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+forkDataset">forkDataset()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("My survey")
fork &lt;- forkDataset(ds)
# Do stuff to fork
ds &lt;- mergeFork(ds, fork)
# Now the changes you did to fork are also on ds

## End(Not run)
</code></pre>

<hr>
<h2 id='moveLastElement'>Move and delete last element of a vector
This moves the last element of a vector to an index, then deletes the last
element, it is broken out for testing purposes</h2><span id='topic+moveLastElement'></span>

<h3>Description</h3>

<p>Move and delete last element of a vector
This moves the last element of a vector to an index, then deletes the last
element, it is broken out for testing purposes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moveLastElement(v, idx)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moveLastElement_+3A_v">v</code></td>
<td>
<p>a vector</p>
</td></tr>
<tr><td><code id="moveLastElement_+3A_idx">idx</code></td>
<td>
<p>The index to move the last element to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector
</p>

<hr>
<h2 id='multitables'>Multitable entities for a dataset</h2><span id='topic+multitables'></span><span id='topic+multitables+3C-'></span><span id='topic+multitable-catalog'></span><span id='topic+multitables+2CCrunchDataset-method'></span><span id='topic+multitables+3C-+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Multitable entities for a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multitables(x)

multitables(x) &lt;- value

## S4 method for signature 'CrunchDataset'
multitables(x)

## S4 replacement method for signature 'CrunchDataset'
multitables(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="multitables_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="multitables_+3A_value">value</code></td>
<td>
<p>for the assignment method, a MultitableCatalog</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class MultitableCatalog containing references to
Multitable entities. (Setter returns the Dataset.)
</p>

<hr>
<h2 id='mv'>Functions to manipulate variables' or project's folder structure</h2><span id='topic+mv'></span><span id='topic+mkdir'></span>

<h3>Description</h3>

<p>Variables in Crunch datasets are organized into folders, like in a file
system. Datasets are similarly organized into hierarchical Projects.
These functions allow you to create new folders and move objects into
folders. Their names, <code>mv</code> and <code>mkdir</code>, suggest their Unix file utility
inspiration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mv(x, what, path)

mkdir(x, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mv_+3A_x">x</code></td>
<td>
<p>A <code>CrunchDataset</code> or <code>Folder</code> (<code>VariableFolder</code> or <code>ProjectFolder</code>)</p>
</td></tr>
<tr><td><code id="mv_+3A_what">what</code></td>
<td>
<p>A Variable, selection of variables from <code>dataset</code>, or any
other object that can be moved to a folder (e.g. a dataset when organizing
projects).</p>
</td></tr>
<tr><td><code id="mv_+3A_path">path</code></td>
<td>
<p>A character &quot;path&quot; to the folder: either a
vector of nested folder names or a single string with nested folders
separated by a delimiter (&quot;/&quot; default, configurable via
<code>options(crunch.delimiter)</code>). The path is interpreted as
relative to the location of the folder <code>x</code> (when <code>x</code> is a dataset, that
means the root, top-level folder). <code>path</code> may also be a <code>Folder</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions have some differences from the strict behavior of their Unix
ancestors. For one, they work recursively, without additional arguments:
<code>mkdir</code> will make every directory necessary to construct the requested path,
even if all parent directories didn't already exist; and <code>mv</code> doesn't
require that the directory to move to already exist&mdash;it will effectively
call <code>mkdir</code> along the way.
</p>


<h3>Value</h3>

<p><code>x</code>, with the folder at <code>path</code> guaranteed to be created, and for
<code>mv</code>, containing <code>what</code> moved into it.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cd">cd()</a></code> to select a folder by path; <code><a href="#topic+rmdir">rmdir()</a></code> to delete a folder;
<code><a href="#topic+folder">folder()</a></code> to identify and set an object's parent folder;
<code><a href="base.html#topic+files2">base::dir.create()</a></code>
if you literally want to create a directory in your local file system, which
<code>mkdir()</code> does not do
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("Example survey")
ds &lt;- mv(ds, c("gender", "age", "educ"), "Demographics")
ds &lt;- mkdir(ds, "Key Performance Indicators/Brand X")
# These can also be chained together
require(magrittr)
ds &lt;- ds %&gt;%
    mv(c("aware_x", "nps_x"), "Key Performance Indicators/Brand X") %&gt;%
    mv(c("aware_y", "nps_y"), "Key Performance Indicators/Brand Y")
# Can combine with cd() and move things with relative paths
ds %&gt;%
    cd("Key Performance Indicators/Brand X") %&gt;%
    mv("nps_x", "../Net Promoters")
# Can combine with folder() to move objects to the same place as something else
ds %&gt;% mv("nps_y", folder(ds$nps_x))
# Now let's put ds in a Project
projects() %&gt;%
    mv(ds, "Brand Tracking Studies")

## End(Not run)
</code></pre>

<hr>
<h2 id='na.omit'>Omit missing categories</h2><span id='topic+na.omit'></span><span id='topic+na-omit-categories'></span><span id='topic+na.omit+2CCategories-method'></span>

<h3>Description</h3>

<p>Omit missing categories
</p>


<h3>Usage</h3>

<pre><code class='language-R'>na.omit(object, ...)

## S4 method for signature 'Categories'
na.omit(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="na.omit_+3A_object">object</code></td>
<td>
<p>Categories</p>
</td></tr>
<tr><td><code id="na.omit_+3A_...">...</code></td>
<td>
<p>additional arguments, ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>object</code> with any categories that have missing: TRUE excluded
</p>

<hr>
<h2 id='ncol'>Dataset dimensions</h2><span id='topic+ncol'></span><span id='topic+dim-dataset'></span><span id='topic+dim+2CCrunchDataset-method'></span><span id='topic+ncol+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Dataset dimensions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ncol(x)

## S4 method for signature 'CrunchDataset'
dim(x)

## S4 method for signature 'CrunchDataset'
ncol(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ncol_+3A_x">x</code></td>
<td>
<p>a Dataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>integer vector of length 2, indicating the number of rows and
non-hidden variables in the dataset. Array subvariables are excluded from
the column count.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+dim">base::dim()</a></code>
</p>

<hr>
<h2 id='newDataset'>Upload data to Crunch to make a new dataset</h2><span id='topic+newDataset'></span>

<h3>Description</h3>

<p>This function creates a new dataset on the Crunch server with either a
data.frame or similar object in your R session, a file, or a URL to a file.
It captures available metadata from your R object and translates it into
Crunch types.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newDataset(x, name = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newDataset_+3A_x">x</code></td>
<td>
<p>a <code>data.frame</code> or other rectangular R data object, or a string
file name or URL to upload to create a dataset. The file may be a compressed
Zip file containing a single file in CSV or SPSS format.</p>
</td></tr>
<tr><td><code id="newDataset_+3A_name">name</code></td>
<td>
<p>character name to give the new Crunch dataset. By default the
function uses the name of the R object, or, if passing a file, the file name.</p>
</td></tr>
<tr><td><code id="newDataset_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code><a href="#topic+createDataset">createDataset()</a></code>, or <code>schema</code> if
you're upload Triple-S</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you have an SPSS file, it is better specify the file name directly rather
than first reading it into R. Uploading SPSS files directly to Crunch will
preserve metadata that is stripped by the R import, regardless of the library
used to read it into R.
</p>
<p>If you have Triple-S files, you can import those directly to Crunch like you
can with SPSS files. You should use the filename to the data file (ending in
<code>.asc</code> or <code>.dat</code>) as the <code>x</code> argument and use the metadata file (ending in
<code>.sss</code> or <code>.xml</code>) as the <code>schema</code> argument.
</p>


<h3>Value</h3>

<p>If successful, an object of class CrunchDataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newDatasetFromFile">newDatasetFromFile()</a></code>; <code><a href="#topic+newDatasetByColumn">newDatasetByColumn()</a></code> for an alternate
upload method.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- newDataset(mtcars, "cars")
ds &lt;- newDataset("mysurvey.sav")

## End(Not run)
</code></pre>

<hr>
<h2 id='newDatasetByColumn'>Upload a data.frame column-by-column to make a new dataset</h2><span id='topic+newDatasetByColumn'></span>

<h3>Description</h3>

<p>Use this version if you have lots of variables, under 1M rows, perhaps
backed by <code>ff</code> or other memory-mapped files, and time to kill. You really
probably want <code><a href="#topic+newDataset">newDataset()</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newDatasetByColumn(
  x,
  name = deparseAndFlatten(substitute(x), max_length = 40),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newDatasetByColumn_+3A_x">x</code></td>
<td>
<p>a data.frame or other rectangular R object</p>
</td></tr>
<tr><td><code id="newDatasetByColumn_+3A_name">name</code></td>
<td>
<p>character, the name to give the new Crunch dataset. Default is
the name of the R object passed in <code>x</code></p>
</td></tr>
<tr><td><code id="newDatasetByColumn_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <code><a href="#topic+createDataset">createDataset()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, an object of class CrunchDataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newDataset">newDataset()</a></code>
</p>

<hr>
<h2 id='newDatasetFromFile'>Upload a file to Crunch to make a new dataset</h2><span id='topic+newDatasetFromFile'></span>

<h3>Description</h3>

<p>This function allows you to upload a <code>.csv</code> or <code>.sav</code> file directly to Crunch
without first reading it into R. This is useful both because it preserves SPSS
metadata that is lost when reading <code>.sav</code> files into R and because it is more
efficient just to upload the file to the server.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newDatasetFromFile(x, name = basename(x), schema, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newDatasetFromFile_+3A_x">x</code></td>
<td>
<p>character, the path to a local file to upload, or a URL. This
should either be a <code>.csv</code>, <code>.sav</code> (SPSS), <code>.asc</code> (Triple-S data), or <code>.dat</code>
(Triple-S data) file</p>
</td></tr>
<tr><td><code id="newDatasetFromFile_+3A_name">name</code></td>
<td>
<p>character, the name to give the new Crunch dataset. By default
the name of the dataset will be the filename</p>
</td></tr>
<tr><td><code id="newDatasetFromFile_+3A_schema">schema</code></td>
<td>
<p>character, the path to a local file to upload, or a URL. The
file specifies the dataset schema (variable types, categories, etc.) to
use. Currently only implemented for Triple-S files. This should either be a
<code>.xml</code> or <code>.sss</code> file (both are possible for Triple-S metadata files)</p>
</td></tr>
<tr><td><code id="newDatasetFromFile_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <a href="#topic+createDataset">createDataset</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>You no longer need to call this function directly: you can call
<code><a href="#topic+newDataset">newDataset()</a></code> and pass the filename or URL, and it will handle it for you,
thereby saving you eight keystrokes.
</p>


<h3>Value</h3>

<p>On success, an object of class <a href="#topic+CrunchDataset">CrunchDataset</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newDataset">newDataset()</a></code>
</p>

<hr>
<h2 id='newDeck'>Create an empty Crunch Deck</h2><span id='topic+newDeck'></span>

<h3>Description</h3>

<p>Create an empty Crunch Deck
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newDeck(dataset, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newDeck_+3A_dataset">dataset</code></td>
<td>
<p>A Crunch Dataset</p>
</td></tr>
<tr><td><code id="newDeck_+3A_name">name</code></td>
<td>
<p>The name of the Deck</p>
</td></tr>
<tr><td><code id="newDeck_+3A_...">...</code></td>
<td>
<p>Further attributes of the deck such as the description, see API
docs for options.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>CrunchDeck</code> that was created.
</p>

<hr>
<h2 id='newExampleDataset'>Import a fixture dataset for testing</h2><span id='topic+newExampleDataset'></span>

<h3>Description</h3>

<p>The <code>crunch</code> package includes some data for you to explore the features of
the platform. Use this function to upload one to create a demo dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newExampleDataset(name = "pets")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newExampleDataset_+3A_name">name</code></td>
<td>
<p>string name of the fixture dataset. Currently &quot;pets&quot; is the only
one available.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A new <code>CrunchDataset</code> entity.
</p>

<hr>
<h2 id='newFilter'>Create a new filter</h2><span id='topic+newFilter'></span>

<h3>Description</h3>

<p>This function creates a new filter for a CrunchDataset. You can achieve the same results
by assigning into a dataset's filters catalog using<code><a href="#topic+filters">filters()</a></code>, but this may be a more natural
way to think of the action, particularly when you want to do something with
the filter entity after you create it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newFilter(name, expression, catalog = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newFilter_+3A_name">name</code></td>
<td>
<p>character name for the filter</p>
</td></tr>
<tr><td><code id="newFilter_+3A_expression">expression</code></td>
<td>
<p>CrunchLogicalExpr with which to make a filter entity</p>
</td></tr>
<tr><td><code id="newFilter_+3A_catalog">catalog</code></td>
<td>
<p>FilterCatalog in which to create the new filter. May also
provide a dataset entity. If omitted, the function will attempt to infer the
dataset (and thus its FilterCatalog) from the contents of <code>expression</code>.</p>
</td></tr>
<tr><td><code id="newFilter_+3A_...">...</code></td>
<td>
<p>Additional filter attributes to set, such as <code>is_public</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>CrunchFilter</code> object.
</p>

<hr>
<h2 id='newMultitable'>Create a new Multitable</h2><span id='topic+newMultitable'></span>

<h3>Description</h3>

<p>Multitables, or &quot;banners&quot; or &quot;crossbreaks&quot;, define a set of variables or
or query expressions to crosstab with as a unit. They are used in the Crunch
web app to display tables side by side, as well as to define one dimension
of a tab book.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newMultitable(formula, data, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newMultitable_+3A_formula">formula</code></td>
<td>
<p>an object of class 'formula' object with the
cross-classifying variables separated by '+' on the right-hand side.
Following how <code><a href="stats.html#topic+formula">stats::formula()</a></code> works in R, it should start
with &quot;~&quot;. Variables on left-hand side of the formula have no meaning in this
function.</p>
</td></tr>
<tr><td><code id="newMultitable_+3A_data">data</code></td>
<td>
<p>an object of class <code>CrunchDataset</code> in which to create the
multitable, and to which the variables referenced in <code>formula</code> belong.</p>
</td></tr>
<tr><td><code id="newMultitable_+3A_name">name</code></td>
<td>
<p>character name to give the new multitable object. If omitted,
a default name will be derived from <code>formula</code>.</p>
</td></tr>
<tr><td><code id="newMultitable_+3A_...">...</code></td>
<td>
<p>Additional multitable attributes to set. Options include
<code>is_public</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>Multitable</code>
</p>


<h3>See Also</h3>

<p><code><a href="stats.html#topic+formula">stats::formula</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
m &lt;- newMultitable(~ gender + age4 + marstat, data = ds)
name(m) # [1] "gender + age4 + marstat"

## End(Not run)
</code></pre>

<hr>
<h2 id='newProject'>Create a new folder</h2><span id='topic+newProject'></span>

<h3>Description</h3>

<p>This function creates a new project. You can achieve the same results by
assigning into the projects catalog, but this may be a more natural way to
think of the action, particularly when you want to do something with the
project entity after you create it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newProject(name, members = NULL, catalog = projects(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newProject_+3A_name">name</code></td>
<td>
<p>character name for the project</p>
</td></tr>
<tr><td><code id="newProject_+3A_members">members</code></td>
<td>
<p>Optional character vector of emails or user URLs to add as
project members.</p>
</td></tr>
<tr><td><code id="newProject_+3A_catalog">catalog</code></td>
<td>
<p>ProjectFolder in which to create the new project. There is
only one project catalog currently, <code><a href="#topic+projects">projects()</a></code>, but this is left here
so that all <code style="white-space: pre;">&#8288;new*&#8288;</code> functions follow the same pattern.</p>
</td></tr>
<tr><td><code id="newProject_+3A_...">...</code></td>
<td>
<p>Additional project attributes to set</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>ProjectFolder</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mkdir">mkdir()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
proj &lt;- newProject("A project name")
# That is equivalent to doing:
p &lt;- projects()
p[["A project name"]] &lt;- list()
proj &lt;- p[["A project name"]]

proj2 &lt;- newProject("Another project", members = "you@yourco.com")
# That is equivalent to doing:
p[["Another project"]] &lt;- list(members = "you@yourco.com")
proj &lt;- p[["Another project"]]

## End(Not run)
</code></pre>

<hr>
<h2 id='newSlide'>Append a new slide to a Crunch Deck</h2><span id='topic+newSlide'></span>

<h3>Description</h3>

<p>Append a new slide to a Crunch Deck
</p>


<h3>Usage</h3>

<pre><code class='language-R'>newSlide(
  deck,
  query = NULL,
  display_settings = list(),
  title = "",
  subtitle = "",
  filter = NULL,
  weight = NULL,
  viz_specs = NULL,
  transform = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="newSlide_+3A_deck">deck</code></td>
<td>
<p>A Crunch Deck</p>
</td></tr>
<tr><td><code id="newSlide_+3A_query">query</code></td>
<td>
<p>A formula definition of a query to be used by the slide. See
Details of <code><a href="#topic+crtabs">crtabs()</a></code> for more information about making queries.</p>
</td></tr>
<tr><td><code id="newSlide_+3A_display_settings">display_settings</code></td>
<td>
<p>(optional) A list of display settings. If omitted,
slide will be a table of column percentages with hypothesis test highlighting
enabled. The most common setting used is <code>vizType</code>, which can be:
<code>table</code>, <code>groupedBarPlot</code>, <code>stackedBarPlot</code>, <code>horizontalBarPlot</code>,
<code>horizontalStackedBarPlot</code>, <code>donut</code>, and (if the second variable in the
query formula is a wave variable) <code>timeplot</code>.
In addition, <code>showValueLabels</code> (logical) controls whether the web app and
exports show labels on bars or arcs of donuts.</p>
</td></tr>
<tr><td><code id="newSlide_+3A_title">title</code></td>
<td>
<p>The slide's title</p>
</td></tr>
<tr><td><code id="newSlide_+3A_subtitle">subtitle</code></td>
<td>
<p>The slide's subtitle</p>
</td></tr>
<tr><td><code id="newSlide_+3A_filter">filter</code></td>
<td>
<p>a <code>CrunchLogicalExpression</code>, a crunch <code>filter</code> object or
a vector of names of <code><a href="#topic+filters">filters</a></code> defined in the dataset (defaults
to <code>NULL</code>, using all data).</p>
</td></tr>
<tr><td><code id="newSlide_+3A_weight">weight</code></td>
<td>
<p>A weight variable (defaults to NULL, meaning no weight)</p>
</td></tr>
<tr><td><code id="newSlide_+3A_viz_specs">viz_specs</code></td>
<td>
<p>Another set of options for the display of the slide, see
the <a href="https://crunch.io/api/reference/#post-/datasets/-dataset_id-/decks/-deck_id-/slides/">API documentation</a>
for more information.</p>
</td></tr>
<tr><td><code id="newSlide_+3A_transform">transform</code></td>
<td>
<p>A list of slide transformations, usually created using the function
<code><a href="#topic+makeDimTransform">makeDimTransform()</a></code>.</p>
</td></tr>
<tr><td><code id="newSlide_+3A_...">...</code></td>
<td>
<p>Further options to be passed on to the API</p>
</td></tr>
</table>


<h3>Value</h3>

<p>CrunchSlide object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newMarkdownSlide">newMarkdownSlide</a></code> for creating a markdown slide
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
newSlide(
    main_deck,
    ~ cyl + wt,
    title = "Cyl and Weight",
    subtitle = "2017 Data"
)

# Grouped bar plot
newSlide(
    main_deck,
    ~ approval + age4,
    title = "Approval by age group",
    display_settings = list(
        vizType = "groupedBarPlot",
        showValueLabels = TRUE
    ),
    subtitle = "2017 Data"
)

# Horizontal stacked bars
newSlide(
    main_deck,
    ~ approval + age4,
    title = "Approval by age group",
    display_settings = list(
        vizType = "horizontalStackedBarPlot"
    ),
    subtitle = "2017 Data"
)

# A donut is only suitable for a single variable
newSlide(
    main_deck,
    ~ approval,
    title = "Approval of new feature",
    display_settings = list(
        vizType = "donut",
        showValueLabels = FALSE
    ),
    subtitle = "2017 Data"
)

# A Grouped bar plot with slide transformations to hide a category
newSlide(
    main_deck,
    ~ approval + age4,
    title = "Approval by age group",
    display_settings = list(
        vizType = "groupedBarPlot",
        showValueLabels = TRUE
    ),
    transform = list(rows_dimension = makeDimTransform(hide = "Neutral")),
    subtitle = "2017 Data"
)

# Example of advanced options being set:
# viz_specs can get quite long, see
# https://crunch.io/api/reference/#post-/datasets/-dataset_id-/decks/-deck_id-/slides/
viz_specs &lt;- list(
    default = list(
        format = list(
            decimal_places = list(percentages = 0L, other = 2L),
            show_empty = FALSE
        )
    ),
    table = list(
        measures = c("col_percent", "pairwise_t_test"),
        page_layout = list(
            rows = list(
                top = list(),
                bottom = c("base_unweighted", "scale_mean", "significant_columns")
            ),
            measure_layout = "long"
        ),
        pairwise_comparison = list(sig_threshold = c(0.05, 0.01)),
        format = list(pval_colors = FALSE)
    )
)

newSlide(
    main_deck,
    ~categories(fav_array)+subvariables(fav_array),
    display_settings = list(viz_type = list(value = "table")),
    title = "custom slide",
    filter = filters(ds)[[1]],
    weight = ds$weight,
    viz_specs = viz_specs
)

# Can also specify `analyses` directly, which allows for very advanced use.
# `formulaToSlideQuery()` and `slideQueryEnv()` help describe the API
newSlide(
    main_deck,
    title = "custom slide",
    analyses = list(list(
        query = formulaToSlideQuery(~categories(fav_array)+subvariables(fav_array), ds),
        query_environment = slideQueryEnv(filter = filters(ds)[[1]]),
        display_settings = list(viz_type = list(value = "table")),
        viz_specs = viz_specs
    ))
)

## End(Not run)
</code></pre>

<hr>
<h2 id='notifyIfNewVersion'>See if there's a new version of the package on GitHub</h2><span id='topic+notifyIfNewVersion'></span><span id='topic+checkForNewVersion'></span>

<h3>Description</h3>

<p><code>checkForNewVersion</code> looks for a tagged version on GitHub and compares with
the version number of the currently installed package. <code>notifyIfNewVersion</code>
wraps it and displays a message if there is a new version. It is called in
<code>.onLoad()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>notifyIfNewVersion(
  package = "crunch",
  github = "Crunch-io/rcrunch",
  installed.version = as.character(packageVersion(package))
)

checkForNewVersion(github, installed.version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="notifyIfNewVersion_+3A_package">package</code></td>
<td>
<p>character package name</p>
</td></tr>
<tr><td><code id="notifyIfNewVersion_+3A_github">github</code></td>
<td>
<p>character &quot;organization/repo&quot; of your package on GitHub</p>
</td></tr>
<tr><td><code id="notifyIfNewVersion_+3A_installed.version">installed.version</code></td>
<td>
<p>character the currently installed version string</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>checkForNewVersion</code> returns the version string if there is a new
version, or NULL. <code>notifyIfNewVersion</code> returns nothing invisibly, called for
its side effects.
</p>

<hr>
<h2 id='noTransforms'>Remove transformations from a CrunchCube</h2><span id='topic+noTransforms'></span>

<h3>Description</h3>

<p>Remove transformations from a CrunchCube
</p>


<h3>Usage</h3>

<pre><code class='language-R'>noTransforms(cube)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="noTransforms_+3A_cube">cube</code></td>
<td>
<p>a CrunchCube</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the CrunchCube with no transformations
</p>


<h3>Removing transforms</h3>

<p><code>noTransforms()</code> is useful if you don't want to see or use any transformations like
Subtotals and Headings. This action only applies to the CrunchCube object in
R: it doesn't actually change the variables on Crunch servers or the query
that generated the CrunchCube.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# A CrunchCube with a heading and subtotals
crtabs(~opinion, ds)
#               All opinions
#             Strongly Agree 23
#             Somewhat Agree 24
#                      Agree 47
# Neither Agree nor Disagree 18
#          Somewhat Disagree 16
#          Strongly Disagree 19
#                   Disagree 35

noTransforms(crtabs(~opinion, ds))
#             Strongly Agree             Somewhat Agree Neither Agree nor Disagree
#                         23                         24                         18
#          Somewhat Disagree          Strongly Disagree
#                         16                         19

## End(Not run)

</code></pre>

<hr>
<h2 id='ordering'>Get and set VariableOrder</h2><span id='topic+ordering'></span><span id='topic+ordering+3C-'></span><span id='topic+ordering+2CCrunchDataset-method'></span><span id='topic+ordering+3C-+2CCrunchDataset-method'></span><span id='topic+ordering+2CVariableCatalog-method'></span><span id='topic+ordering+3C-+2CVariableCatalog-method'></span><span id='topic+ordering+2CDatasetCatalog-method'></span><span id='topic+ordering+2CProjectFolder-method'></span><span id='topic+ordering+3C-+2CDatasetCatalog-method'></span><span id='topic+ordering+3C-+2CProjectFolder-method'></span>

<h3>Description</h3>

<p>The <code>ordering</code> methods allow you to get and set a <code><a href="#topic+VariableOrder">VariableOrder</a></code> on a
<code><a href="#topic+CrunchDataset">CrunchDataset</a></code> or on the <code><a href="#topic+VariableCatalog">VariableCatalog</a></code> that the dataset contains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ordering(x)

ordering(x) &lt;- value

## S4 method for signature 'CrunchDataset'
ordering(x)

## S4 replacement method for signature 'CrunchDataset'
ordering(x) &lt;- value

## S4 method for signature 'VariableCatalog'
ordering(x)

## S4 replacement method for signature 'VariableCatalog'
ordering(x) &lt;- value

## S4 method for signature 'DatasetCatalog'
ordering(x)

## S4 method for signature 'ProjectFolder'
ordering(x)

## S4 replacement method for signature 'DatasetCatalog'
ordering(x) &lt;- value

## S4 replacement method for signature 'ProjectFolder'
ordering(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ordering_+3A_x">x</code></td>
<td>
<p>a VariableCatalog or CrunchDataset</p>
</td></tr>
<tr><td><code id="ordering_+3A_value">value</code></td>
<td>
<p>a valid VariableOrder object</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>ordering</code> returns a VariableOrder object, while
<code style="white-space: pre;">&#8288;ordering&lt;-&#8288;</code> sets the VariableOrder
</p>

<hr>
<h2 id='owner'>Get and set the owner of a dataset</h2><span id='topic+owner'></span><span id='topic+owner+3C-'></span><span id='topic+dataset-owner'></span><span id='topic+owner+2CCrunchDataset-method'></span><span id='topic+owner+3C-+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Get and set the owner of a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>owner(x)

owner(x) &lt;- value

## S4 method for signature 'CrunchDataset'
owner(x)

## S4 replacement method for signature 'CrunchDataset'
owner(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="owner_+3A_x">x</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="owner_+3A_value">value</code></td>
<td>
<p>For the setter, either a URL (character) or a Crunch object
with a <code>self</code> method. Users and Projects are valid objects to assign
as dataset owners.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The dataset.
</p>

<hr>
<h2 id='owners'>See who owns these datasets</h2><span id='topic+owners'></span><span id='topic+ownerNames'></span>

<h3>Description</h3>

<p>See who owns these datasets
</p>


<h3>Usage</h3>

<pre><code class='language-R'>owners(x)

ownerNames(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="owners_+3A_x">x</code></td>
<td>
<p>DatasetCatalog</p>
</td></tr>
</table>


<h3>Value</h3>

<p>For <code>owners</code>, the URLs of the users or projects that own
these datasets. For <code>ownerNames</code>, their names.
</p>

<hr>
<h2 id='palettes'>Get the palettes from a crunch object</h2><span id='topic+palettes'></span><span id='topic+defaultPalette'></span><span id='topic+palettes+2CCrunchDataset-method'></span><span id='topic+defaultPalette+2CCrunchDataset-method'></span><span id='topic+defaultPalette+2CAnalyticPalettes-method'></span>

<h3>Description</h3>

<p><code>CrunchDataset</code>s have color palettes associated with them
that can be used as default colors for dashboard tiles. One of
them can be assigned the &quot;default&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>palettes(x)

defaultPalette(x, ...)

## S4 method for signature 'CrunchDataset'
palettes(x)

## S4 method for signature 'CrunchDataset'
defaultPalette(x, ...)

## S4 method for signature 'AnalyticPalettes'
defaultPalette(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="palettes_+3A_x">x</code></td>
<td>
<p>A crunch object, like a <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="palettes_+3A_...">...</code></td>
<td>
<p>ignored (reserved for future expansion)</p>
</td></tr>
</table>

<hr>
<h2 id='pendingStream'>Get the pending streams for a dataset</h2><span id='topic+pendingStream'></span>

<h3>Description</h3>

<p>Retrieves the number of pending messages. Use <code><a href="#topic+appendStream">appendStream()</a></code> to
append all pending streamed rows to the dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pendingStream(ds)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pendingStream_+3A_ds">ds</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>number of pending messages in the stream for the dataset
</p>

<hr>
<h2 id='pk'>Get and set the primary key for a Crunch dataset</h2><span id='topic+pk'></span><span id='topic+pk+3C-'></span>

<h3>Description</h3>

<p>A primary key is a variable in a dataset that has a unique value for every
row. A variable must be either numeric or text type and have no duplicate or
missing values. A primary key on a dataset causes appends to that dataset
that have the rows with the same primary key value(s) as the first dataset
to update the existing rows rather than inserting new ones.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pk(x)

pk(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pk_+3A_x">x</code></td>
<td>
<p>a Dataset</p>
</td></tr>
<tr><td><code id="pk_+3A_value">value</code></td>
<td>
<p>For the setter, a single Variable to use as the primary key or
<code>NULL</code> to remove the primary key.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Getter returns the Variable object that is used as the primary key
(<code>NULL</code> if there is no primary key); setter returns <code>x</code> duly modified.
</p>

<hr>
<h2 id='pollProgress'>Check a Crunch progress URL until it finishes</h2><span id='topic+pollProgress'></span>

<h3>Description</h3>

<p>You'll probably only call this function if progress polling times out and its
error message tells you to call <code>pollProgress</code> to resume.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pollProgress(progress_url, wait = 0.5, error_handler = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pollProgress_+3A_progress_url">progress_url</code></td>
<td>
<p>A Crunch progress URL</p>
</td></tr>
<tr><td><code id="pollProgress_+3A_wait">wait</code></td>
<td>
<p>Number of seconds to wait between polling. This time is increased
20 percent on each poll.</p>
</td></tr>
<tr><td><code id="pollProgress_+3A_error_handler">error_handler</code></td>
<td>
<p>An optional function that takes the status object
when the progress is less than 0 (meaning the request failed)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The percent completed of the progress. Assuming the
<code>options(crunch.timeout)</code> (default: 15 minutes) hasn't been reached, this
will be 100. If the timeout is reached, it will be the last reported progress
value.
</p>

<hr>
<h2 id='popSize'>Get and set the market size for Crunch datasets</h2><span id='topic+popSize'></span><span id='topic+popMagnitude'></span><span id='topic+popSize+3C-'></span><span id='topic+popMagnitude+3C-'></span><span id='topic+setPopulation'></span><span id='topic+population'></span><span id='topic+popSize+2CCrunchDataset-method'></span><span id='topic+popSize+3C-+2CCrunchDataset-method'></span><span id='topic+popMagnitude+2CCrunchDataset-method'></span><span id='topic+popMagnitude+3C-+2CCrunchDataset-method'></span><span id='topic+setPopulation+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Crunch Datasets allow you to set a target population size in order to extrapolate
population estimates from survey percentages. These functions let you work with
the population size and magnitude.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>popSize(x)

popMagnitude(x)

popSize(x) &lt;- value

popMagnitude(x) &lt;- value

setPopulation(x, size, magnitude)

## S4 method for signature 'CrunchDataset'
popSize(x)

## S4 replacement method for signature 'CrunchDataset'
popSize(x) &lt;- value

## S4 method for signature 'CrunchDataset'
popMagnitude(x)

## S4 replacement method for signature 'CrunchDataset'
popMagnitude(x) &lt;- value

## S4 method for signature 'CrunchDataset'
setPopulation(x, size, magnitude)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="popSize_+3A_x">x</code></td>
<td>
<p>a Crunch Dataset</p>
</td></tr>
<tr><td><code id="popSize_+3A_value">value</code></td>
<td>
<p>For the setters, the <code>size</code> or <code>magnitude</code> to be set</p>
</td></tr>
<tr><td><code id="popSize_+3A_size">size</code></td>
<td>
<p>the target population size, to remove a population set to <code>NULL</code></p>
</td></tr>
<tr><td><code id="popSize_+3A_magnitude">magnitude</code></td>
<td>
<p>the order of magnitude with which to display the population
size. Must be either <code>3</code>, <code>6</code>, or <code>9</code> for thousands, millions, and billions respectively.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>popSize</code> and <code>popMagnitude</code> return the population size or
magnitude. <code>setPopulation</code> returns the modified dataset.
</p>

<hr>
<h2 id='preCrunchBoxCheck'>Check if a dataset will make a good CrunchBox</h2><span id='topic+preCrunchBoxCheck'></span>

<h3>Description</h3>

<p>CrunchBoxes allows you to share data with the world in a simple, easy to embed format.
However, not all datasets naturally translate to the CrunchBox format. This
function checks your dataset to see if it has variable &amp; category definitions
that will work well with the CrunchBox format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>preCrunchBoxCheck(dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="preCrunchBoxCheck_+3A_dataset">dataset</code></td>
<td>
<p>CrunchDataset, potentially subsetted on variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, the dataset. Called for side-effect of printing things.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+CrunchBox">CrunchBox</a></code>
</p>

<hr>
<h2 id='prepareDataForCrunch'>Translate a data.frame to Crunch format</h2><span id='topic+prepareDataForCrunch'></span>

<h3>Description</h3>

<p>This is called within <code>newDataset</code> to extract the Crunch metadata
from the data and to transform the data to match the extracted metadata. You
can call this directly in order to tailor the data import flow more finely.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prepareDataForCrunch(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prepareDataForCrunch_+3A_data">data</code></td>
<td>
<p>A <code>data.frame</code> or other rectangular R object</p>
</td></tr>
<tr><td><code id="prepareDataForCrunch_+3A_...">...</code></td>
<td>
<p>additional arguments passed to <a href="#topic+createDataset">createDataset</a>.
&quot;name&quot; will be required by the Crunch server but is not required by this
function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame that is a transformation of <code>data</code> suitable for
uploading to Crunch, also containing a &quot;metadata&quot; attribute that is
the associated Crunch metadata.
</p>


<h3>See Also</h3>

<p>createWithPreparedData writePreparedData
</p>

<hr>
<h2 id='projects'>List project folders</h2><span id='topic+projects'></span>

<h3>Description</h3>

<p>List project folders
</p>


<h3>Usage</h3>

<pre><code class='language-R'>projects(x = getAPIRoot())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="projects_+3A_x">x</code></td>
<td>
<p>a <code>ShojiObject</code> that has an associated catalog. If omitted,
the default value for <code>x</code> means that you will load the user's primary
folder. (Currently, there are no other folders to load.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>ProjectFolder</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
myprojects &lt;- projects()
proj &lt;- myprojects[["Project name"]]

## End(Not run)
</code></pre>

<hr>
<h2 id='publicFolder'>Hide/Unhide or Privatize/Deprivatize Variables</h2><span id='topic+publicFolder'></span><span id='topic+hiddenFolder'></span><span id='topic+privateFolder'></span><span id='topic+hide'></span><span id='topic+unhide'></span><span id='topic+privatize'></span><span id='topic+deprivatize'></span><span id='topic+publicFolder+2CCrunchDataset-method'></span><span id='topic+publicFolder+2CVariableCatalog-method'></span><span id='topic+publicFolder+2CVariableFolder-method'></span><span id='topic+hiddenFolder+2CCrunchDataset-method'></span><span id='topic+hiddenFolder+2CVariableCatalog-method'></span><span id='topic+hiddenFolder+2CVariableFolder-method'></span><span id='topic+hide+2CCrunchVariable-method'></span><span id='topic+hide+2CVariableCatalog-method'></span><span id='topic+unhide+2CCrunchVariable-method'></span><span id='topic+unhide+2CVariableCatalog-method'></span><span id='topic+hideVariables'></span><span id='topic+hiddenVariables+3C-'></span><span id='topic+unhideVariables'></span><span id='topic+hiddenVariables'></span><span id='topic+privateFolder+2CCrunchDataset-method'></span><span id='topic+privateFolder+2CVariableCatalog-method'></span><span id='topic+privateFolder+2CVariableFolder-method'></span><span id='topic+privatize+2CCrunchVariable-method'></span><span id='topic+privatize+2CVariableCatalog-method'></span><span id='topic+deprivatize+2CCrunchVariable-method'></span><span id='topic+deprivatize+2CVariableCatalog-method'></span><span id='topic+privatise'></span><span id='topic+deprivatise'></span><span id='topic+privatizeVariables'></span><span id='topic+privatiseVariables'></span><span id='topic+privateVariables+3C-'></span><span id='topic+deprivatizeVariables'></span><span id='topic+deprivatiseVariables'></span><span id='topic+privateVariables'></span>

<h3>Description</h3>

<p>The public folder is the top level folder of all regular public variables.
Both hidden and private are hidden from most views in crunch by default.
Hidden variables can be accessed by an user, while private variables
(and all variables derived from them) are only accessible
by users granted &quot;editor&quot; access to the dataset and so can be used to secure
personally identifiable information from non-editors of a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publicFolder(x)

hiddenFolder(x)

privateFolder(x)

hide(x)

unhide(x)

privatize(x)

deprivatize(x)

## S4 method for signature 'CrunchDataset'
publicFolder(x)

## S4 method for signature 'VariableCatalog'
publicFolder(x)

## S4 method for signature 'VariableFolder'
publicFolder(x)

## S4 method for signature 'CrunchDataset'
hiddenFolder(x)

## S4 method for signature 'VariableCatalog'
hiddenFolder(x)

## S4 method for signature 'VariableFolder'
hiddenFolder(x)

## S4 method for signature 'CrunchVariable'
hide(x)

## S4 method for signature 'VariableCatalog'
hide(x)

## S4 method for signature 'CrunchVariable'
unhide(x)

## S4 method for signature 'VariableCatalog'
unhide(x)

hideVariables(dataset, variables)

hiddenVariables(x) &lt;- value

unhideVariables(dataset, variables)

hiddenVariables(dataset, key = namekey(dataset))

## S4 method for signature 'CrunchDataset'
privateFolder(x)

## S4 method for signature 'VariableCatalog'
privateFolder(x)

## S4 method for signature 'VariableFolder'
privateFolder(x)

## S4 method for signature 'CrunchVariable'
privatize(x)

## S4 method for signature 'VariableCatalog'
privatize(x)

## S4 method for signature 'CrunchVariable'
deprivatize(x)

## S4 method for signature 'VariableCatalog'
deprivatize(x)

privatise(x)

deprivatise(x)

privatizeVariables(dataset, variables)

privatiseVariables(dataset, variables)

privateVariables(x) &lt;- value

deprivatizeVariables(dataset, variables)

deprivatiseVariables(dataset, variables)

privateVariables(dataset, key = namekey(dataset))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publicFolder_+3A_x">x</code></td>
<td>
<p>a Variable, VariableCatalog, or dataset to hide/unhide/privatize/deprivatize</p>
</td></tr>
<tr><td><code id="publicFolder_+3A_dataset">dataset</code></td>
<td>
<p>A dataset</p>
</td></tr>
<tr><td><code id="publicFolder_+3A_variables">variables</code></td>
<td>
<p>Variables to change status of</p>
</td></tr>
<tr><td><code id="publicFolder_+3A_value">value</code></td>
<td>
<p>Replacement values for assignment methods.</p>
</td></tr>
<tr><td><code id="publicFolder_+3A_key">key</code></td>
<td>
<p>(for <code>hiddenVariables()</code> / <code>privateVariables()</code> the Variable attribute to
return. Default is &quot;alias&quot;, following <code>envOrOption("crunch.namekey.dataset")</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>There are several ways to assign variables into these categories
and access them:
</p>

<ul>
<li> <p><code>hideVariables()</code> / <code>privatizeVariables()</code> - take a character vector of variable aliases
and makes them hidden/private. (<code>unhideVariables()</code> / <code>deprivatizeVariables()</code> put them
back in the main variable catalog).
</p>
</li>
<li> <p><code>hide()</code> / <code>privatize()</code> - take a <code>CrunchVariable</code> or <code>VariableCatalog</code> and
make them hidden/private. (<code>unhide()</code> / <code>deprivatize()</code> put them back in the main
variable catalog).
</p>
</li>
<li> <p><code>hiddenFolder()</code> / <code>privateFolder()</code> / <code>publicFolder()</code> - take a dataset and return a folder that
contains the public/hidden/private variables. This folder is like other <code>CrunchFolder</code>s and
so you can use <code><a href="#topic+mkdir">mkdir()</a></code> to create subfolders and <code><a href="#topic+mv">mv()</a></code> to move them in/out.
</p>
</li>
<li> <p><code>hiddenVariables()</code> / <code>privateVariabiles()</code> - return a character vector of variables
that are hidden/private. You can assign into the catalog to add variables or
assign to <code>NULL</code> to remove all of them.
</p>
</li></ul>


<hr>
<h2 id='reassignUser'>Reassign all Crunch objects from a user</h2><span id='topic+reassignUser'></span>

<h3>Description</h3>

<p>If you want to transfer all teams, projects, and datasets owned by one user
to another you can with <code>reassignUser</code>. To have permission to use
<code>reassignUser</code> you must be an account admin and be from the same account
as the user who is being reassigned. This is useful if a user leaves your
organization and you want to transfer all of the teams, projects, and
datasets they own to someone else.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reassignUser(from, to)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reassignUser_+3A_from">from</code></td>
<td>
<p>a character of the email address of the user to reassign from</p>
</td></tr>
<tr><td><code id="reassignUser_+3A_to">to</code></td>
<td>
<p>a character of the email address of the user who should be the new
owner</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user given in <code>to</code> will become the owner of all of the teams, projects,
and datasets that were previously owned by the user given in <code>from</code>.
</p>
<p>Reassigning requires confirmation. In an interactive session, you will be
asked to confirm. To avoid that prompt, or to reassign datasets from a
non-interactive session, wrap the call in <code><a href="#topic+with_consent">with_consent()</a></code> to give your
permission to reassign
</p>


<h3>Value</h3>

<p><code>NULL</code> if successful
</p>

<hr>
<h2 id='refresh'>Get a fresh copy from the server</h2><span id='topic+refresh'></span><span id='topic+refresh+2CCrunchDataset-method'></span><span id='topic+refresh+2CShojiObject-method'></span><span id='topic+refresh+2CCrunchVariable-method'></span>

<h3>Description</h3>

<p>Crunch objects generally keep themselves in sync with the server when you
manipulate them, but some operations cause the local version to diverge from
the version on the server. For instance, someone else may have
modified the dataset you're working on, or maybe
you have modified a variable outside of the context of its dataset.
<code>refresh()</code> allows you to get back in sync.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>refresh(x)

## S4 method for signature 'CrunchDataset'
refresh(x)

## S4 method for signature 'ShojiObject'
refresh(x)

## S4 method for signature 'CrunchVariable'
refresh(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="refresh_+3A_x">x</code></td>
<td>
<p>pretty much any Crunch object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a new version of <code>x</code>
</p>

<hr>
<h2 id='removeEmptyGroups'>Remove OrderGroups with no entities</h2><span id='topic+removeEmptyGroups'></span>

<h3>Description</h3>

<p>This function recurses through a <code>ShojiOrder</code>/<code>OrderGroup</code> and
removes any groups that contain no entities.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeEmptyGroups(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeEmptyGroups_+3A_x">x</code></td>
<td>
<p>VariableOrder, DatasetOrder, VariableGroup, or DatasetGroup</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code> with empty groups removed.
</p>

<hr>
<h2 id='reorderSlides'>Reorder slides in a CrunchDeck</h2><span id='topic+reorderSlides'></span>

<h3>Description</h3>

<p>Reorder slides in a CrunchDeck
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reorderSlides(x, order)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reorderSlides_+3A_x">x</code></td>
<td>
<p>A SlideCatalog</p>
</td></tr>
<tr><td><code id="reorderSlides_+3A_order">order</code></td>
<td>
<p>The numeric order for slides to be reordered to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A SlideCatalog
</p>

<hr>
<h2 id='replaceCharWithNumeric'>Transform character vectors into indices</h2><span id='topic+replaceCharWithNumeric'></span>

<h3>Description</h3>

<p>When a user supplies character strings to subset a cube, we need to translate it
into a numeric index to subset the cube. This function does that as well as
some error checking. It is broken out for testing.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replaceCharWithNumeric(cat_names, idx, visible = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replaceCharWithNumeric_+3A_cat_names">cat_names</code></td>
<td>
<p>The category names for a given dimension</p>
</td></tr>
<tr><td><code id="replaceCharWithNumeric_+3A_idx">idx</code></td>
<td>
<p>The index</p>
</td></tr>
<tr><td><code id="replaceCharWithNumeric_+3A_visible">visible</code></td>
<td>
<p>whether or not a category is visible to the user</p>
</td></tr>
</table>

<hr>
<h2 id='replaceMissingWithTRUE'>Replace missing elements with TRUE</h2><span id='topic+replaceMissingWithTRUE'></span>

<h3>Description</h3>

<p>When subsetting, missingness stands in for selecting all of the elements of that
dimension. This gets tricky when you are selecting n dimensions and so need to
capture the dimensions with <code>...</code>.  This function checks if an element of a list
is missing and replaces that element with <code>TRUE</code> in order to handle this case.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replaceMissingWithTRUE(l)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replaceMissingWithTRUE_+3A_l">l</code></td>
<td>
<p>a list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list
</p>

<hr>
<h2 id='resolution'>Methods for Datetime variable resolutions</h2><span id='topic+resolution'></span><span id='topic+resolution+3C-'></span><span id='topic+rollup'></span><span id='topic+rollupResolution'></span><span id='topic+rollupResolution+3C-'></span>

<h3>Description</h3>

<p>Datetime data has a &quot;resolution&quot;, the units of the values.
<code>resolution()</code> exposes that property and <code style="white-space: pre;">&#8288;resolution&lt;-&#8288;</code> lets you set it.
&quot;Rollups&quot; are a way of binning datetime data into meaningful units.
<code>rollup()</code> lets you create an expression that you can query with. Datetime
variables also have a <code>rollupResolution()</code> attribute that is the default
resolution they will roll-up to, if not specified in <code>rollup()</code>;
<code style="white-space: pre;">&#8288;rollupResolution&lt;-&#8288;</code> lets you set that.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resolution(x)

resolution(x) &lt;- value

rollup(x, resolution = rollupResolution(x))

rollupResolution(x)

rollupResolution(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resolution_+3A_x">x</code></td>
<td>
<p>a Datetime variable</p>
</td></tr>
<tr><td><code id="resolution_+3A_value">value</code></td>
<td>
<p>a resolution string. Valid resolutions in Crunch are
<code>c("Y", "Q", "M", "W", "D", "h", "m", "s", "ms")</code>. <code>NULL</code> is also valid for
<code style="white-space: pre;">&#8288;rollupResolution&lt;-&#8288;</code> but not for <code style="white-space: pre;">&#8288;resolution&lt;-&#8288;</code>.</p>
</td></tr>
<tr><td><code id="resolution_+3A_resolution">resolution</code></td>
<td>
<p>Same as <code>value</code>, in <code>rollup()</code>. This may be <code>NULL</code>, in
which case the server will determine an appropriate resolution based on the
range of the data.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that <code>resolution</code> is a property of the data while <code>rollupResolution</code> is
metadata. Setting <code>resolution</code> alters the column data, and if setting a more
coarse resolution (e.g. going from &quot;s&quot; to &quot;m&quot;), it cannot be reversed.
Setting <code>rollupResolution</code> is non-destructive.
</p>


<h3>Value</h3>

<p><code>resolution()</code> and <code>rollupResolution()</code> return the resolution string
for datetime variables, <code>NULL</code> otherwise. The setters return the variable
entity after modifying the state on the server. <code>rollup()</code> returns a
<code>CrunchExpr</code> expression.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
resolution(ds$starttime)
## [1] "ms"
resolution(ds$starttime) &lt;- "s"
rollup(ds$starttime)
rollup(ds$starttime, "D")
rollupResolution(ds$starttime) &lt;- "D"
crtabs(~ rollup(starttime), data = ds)

## End(Not run)
</code></pre>

<hr>
<h2 id='restoreVersion'>Restore a dataset to a previously saved version</h2><span id='topic+restoreVersion'></span>

<h3>Description</h3>

<p>You can save a version of a dataset using <code><a href="#topic+saveVersion">saveVersion()</a></code>.
Savepoints are also created automatically by
certain Crunch functions that make major changes to the dataset. You can
get the list of saved versions with the <code><a href="#topic+versions">versions()</a></code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restoreVersion(dataset, version)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restoreVersion_+3A_dataset">dataset</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="restoreVersion_+3A_version">version</code></td>
<td>
<p>either the name (&quot;description&quot;) of the version to restore to
or the integer index of the version, as given by <code>versions(dataset)</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>dataset</code>, rolled back to <code>version</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+versions">versions</a> <a href="#topic+saveVersion">saveVersion</a>
</p>

<hr>
<h2 id='retry'>Retry</h2><span id='topic+retry'></span>

<h3>Description</h3>

<p>Retry an expression. This is useful for situations where a web resource is not yet available.
You can set <code>options("crunch_retry_wait" = X)</code> some number larger than the default 0.1 in
your script if you are working with large exports.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retry(
  expr,
  wait = envOrOption("crunch_retry_wait", default = 0.1, expect_num = TRUE),
  max.tries = 10
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retry_+3A_expr">expr</code></td>
<td>
<p>An expression</p>
</td></tr>
<tr><td><code id="retry_+3A_wait">wait</code></td>
<td>
<p>The time in seconds to wait before retrying the expression. Defaults to 0.1.</p>
</td></tr>
<tr><td><code id="retry_+3A_max.tries">max.tries</code></td>
<td>
<p>The number of times to retry the expression</p>
</td></tr>
</table>

<hr>
<h2 id='rmdir'>Delete a folder</h2><span id='topic+rmdir'></span>

<h3>Description</h3>

<p>Like <code>rmdir</code> in a file system, this function removes a folder. Unlike the
file-system version, it does not require the folders to be empty.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rmdir(x, path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rmdir_+3A_x">x</code></td>
<td>
<p>A <code>CrunchDataset</code> or <code>Folder</code> (<code>VariableFolder</code> or <code>ProjectFolder</code>)</p>
</td></tr>
<tr><td><code id="rmdir_+3A_path">path</code></td>
<td>
<p>A character &quot;path&quot; to the folder: either a
vector of nested folder names or a single string with nested folders
separated by a delimiter (&quot;/&quot; default, configurable via
<code>options(crunch.delimiter)</code>). The path is interpreted as
relative to the location of the folder <code>x</code> (when <code>x</code> is a dataset, that
means the root, top-level folder). <code>path</code> may also be a <code>Folder</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+mv">mv()</a></code> to move entities to a folder; <code><a href="#topic+cd">cd()</a></code> to select a folder;
<code><a href="base.html#topic+files">file.remove()</a></code> if you literally want to delete a directory
from your local file system, which <code>rmdir()</code> does not do
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- loadDataset("Example survey")
rmdir(ds, "Demographics")
# Or with %&gt;%
require(magrittr)
ds &lt;- ds %&gt;%
    rmdir("Demographics")

## End(Not run)
</code></pre>

<hr>
<h2 id='rowCount'>Create variables based on row-wise functions for crunch Multiple Response Variables</h2><span id='topic+rowCount'></span>

<h3>Description</h3>

<p>Quickly generate new variables that are based on row-wise summaries of Multiple Response
Variables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rowCount(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rowCount_+3A_x">x</code></td>
<td>
<p>A crunch variable or expression</p>
</td></tr>
<tr><td><code id="rowCount_+3A_name">name</code></td>
<td>
<p>a character to use as the name of the case variable to create</p>
</td></tr>
<tr><td><code id="rowCount_+3A_...">...</code></td>
<td>
<p>description, alias, and other metadata passed to <code><a href="#topic+VarDef">VarDef()</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Variable Definition
</p>


<h3>See Also</h3>

<p><code><a href="#topic+expressions">expressions</a></code> for the more flexible expressions that power
these functions and <code><a href="#topic+rowDistinct">rowDistinct()</a></code> for other row-wise functions
</p>

<hr>
<h2 id='rowDistinct'>Create variables useful for determining whether a row's values are suspicious</h2><span id='topic+rowDistinct'></span><span id='topic+straightlineResponse'></span>

<h3>Description</h3>

<p><code>rowDistinct()</code> finds the number of unique values given per row of variables in an array
<code>CrunchVariable</code>. <code>straightlineResponse()</code> returns a <code>selection</code> variable that indicates
whether the responses are identical. When a row has all columns that are missing of the
same type, it will return <code>Selected</code>, but will missing if any other number of values is missing
(or there are multiple types of missing).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rowDistinct(x, name, ..., na.rm = TRUE)

straightlineResponse(x, name, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="rowDistinct_+3A_x">x</code></td>
<td>
<p>A <code>CrunchVariable</code>that is an an array, that unique values should be counted across.</p>
</td></tr>
<tr><td><code id="rowDistinct_+3A_name">name</code></td>
<td>
<p>a character to use as the name of the case variable to create</p>
</td></tr>
<tr><td><code id="rowDistinct_+3A_...">...</code></td>
<td>
<p>Optional attributes, like <code>description</code>, to set on the new variable (passed to
<code>VarDef()</code>)</p>
</td></tr>
<tr><td><code id="rowDistinct_+3A_na.rm">na.rm</code></td>
<td>
<p>Whether to count missing data as a separate category (all missing categories will
be lumped together)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A Variable Definition, which can be used to create a new <code>CrunchVariable</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+rowCount">rowCount()</a></code> for other row-wise functions
</p>

<hr>
<h2 id='runCrunchAutomation'>Run a crunch automation script</h2><span id='topic+runCrunchAutomation'></span><span id='topic+showScriptErrors'></span>

<h3>Description</h3>

<p>Crunch Automation is a custom scripting language that allows you to
execute common Crunch commands. The syntax is described in the
<a href="https://help.crunch.io/hc/en-us/categories/360004356012-Crunch-Automation">Crunch API documentation</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runCrunchAutomation(
  x,
  script,
  is_file = string_is_file_like(script),
  encoding = "UTF-8",
  ...
)

showScriptErrors()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="runCrunchAutomation_+3A_x">x</code></td>
<td>
<p>A crunch dataset or project folder (for backwards compatibility,
<code>dataset</code> is also accepted)</p>
</td></tr>
<tr><td><code id="runCrunchAutomation_+3A_script">script</code></td>
<td>
<p>A path to a text file containing a Crunch Automation script
or a character vector of length 1 or more with Crunch Automation commands (see <code>Details</code>)</p>
</td></tr>
<tr><td><code id="runCrunchAutomation_+3A_is_file">is_file</code></td>
<td>
<p>The default guesses whether a file or string was
used in the <code>script</code> argument, but you can override the heuristics
by specifying <code>TRUE</code> for a file, and <code>FALSE</code> for a string.</p>
</td></tr>
<tr><td><code id="runCrunchAutomation_+3A_encoding">encoding</code></td>
<td>
<p>Optional encoding to convert <strong>from</strong>, defaults to UTF-8.
The API accepts only UTF-8, so all text will be converted to UTF-8 before
being sent to the server.</p>
</td></tr>
<tr><td><code id="runCrunchAutomation_+3A_...">...</code></td>
<td>
<p>Additional options, such as <code>dry_run = TRUE</code>, passed on
to the API if x is a dataset (if x is a project folder, an error is thrown)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If a character vector with length bigger than 1 is passed to <code>script</code>,
it's converted to a string by concatenating its elements together using
line breaks.
</p>


<h3>Value</h3>

<p>For <code>runCrunchAutomation()</code>: an updated dataset/project folder (invisibly),
For <code>showScriptErrors()</code>, when run after a failure, a list with two items:
<code>script</code>: that contains the script string sent to the server and <code>errors</code> which is a
<code>data.frame</code> with details about the errors sent from the server.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+automation-undo">automation-undo</a></code> &amp; <code><a href="#topic+script-catalog">script-catalog</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Can use a path to a file:
script_file &lt;- "crunch_automation.txt"
ds &lt;- runCrunchAutomation(ds, script_file)

# Or a string directly:
ds &lt;- runCrunchAutomation(ds, "RENAME v1 TO age;")

# A "dry run" that validates the script but does not run it:
runCrunchAutomation(ds, "RENAME V1 TO age;", dry_run = TRUE)

# After a failed run, some error information prints to console,
# But more details are available with function:
showScriptErrors()

# After a successful run, can look at scripts:
scripts(ds)

# Run Crunch Automation on a folder:
my_folder &lt;- cd(projects(), "folder1")
runCrunchAutomation(my_folder, 'CREATE FOLDER "folder2";')

## End(Not run)
</code></pre>

<hr>
<h2 id='saveVersion'>Create a new saved version</h2><span id='topic+saveVersion'></span>

<h3>Description</h3>

<p>Crunch datasets can be saved and restored using <code>saveVersion</code> and <code><a href="#topic+restoreVersion">restoreVersion()</a></code>.
Some Crunch functions, such as <code><a href="#topic+appendDataset">appendDataset()</a></code> create new savepoints automatically. To
see the list of savepoints use <code><a href="#topic+versions">versions()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveVersion(
  dataset,
  description = paste("Version", length(versions(dataset)) + 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveVersion_+3A_dataset">dataset</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
<tr><td><code id="saveVersion_+3A_description">description</code></td>
<td>
<p>character name to give the saved version, as in a
commit message. You are encouraged, though not strictly required, to give
versions unique descriptions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly, the URL of the newly created version
</p>


<h3>See Also</h3>

<p><a href="#topic+versions">versions</a> <a href="#topic+restoreVersion">restoreVersion</a>
</p>

<hr>
<h2 id='scoreCatToFeat'>Score similarity between a feature dataframe and categories</h2><span id='topic+scoreCatToFeat'></span>

<h3>Description</h3>

<p>Implemented using the Jaccard index, where a number closer to 1 is
more similar.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scoreCatToFeat(features, categories)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scoreCatToFeat_+3A_features">features</code></td>
<td>
<p>a vector of features to match (usually from a subset of the
output <code style="white-space: pre;">&#8288;[availableGeodataFeatures]&#8288;</code>) with a single property for a single geodatum.</p>
</td></tr>
<tr><td><code id="scoreCatToFeat_+3A_categories">categories</code></td>
<td>
<p>a vector of categories to match</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the Jaccard index for the values of the property given in
feat_df and the vector of categories
</p>

<hr>
<h2 id='scripts'>Crunch Automation scripts entities for a dataset</h2><span id='topic+scripts'></span><span id='topic+script-catalog'></span><span id='topic+scripts+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Crunch Automation scripts entities for a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scripts(x)

## S4 method for signature 'CrunchDataset'
scripts(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scripts_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class &quot;ScriptCatalog&quot; containing references to
Script entities.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+runCrunchAutomation">runCrunchAutomation()</a></code> &amp; <code><a href="#topic+automation-undo">automation-undo</a></code>
</p>

<hr>
<h2 id='searchDatasets'>Search Crunch for datasets.</h2><span id='topic+searchDatasets'></span>

<h3>Description</h3>

<p><code>searchDatasets</code> searches datasets' metadata for matches to the <code>query</code>
argument. This search will include variable names, aliases, categories, but not the content
of text variables. See <a href="https://crunch.io/api/reference/#get-/search/">the API Documentation</a> for
more information about searching Crunch.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>searchDatasets(query, f = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="searchDatasets_+3A_query">query</code></td>
<td>
<p>the text to search for in datasets and their variables (note:
only alpha characters will be used, numbers and other characters will be discarded.)</p>
</td></tr>
<tr><td><code id="searchDatasets_+3A_f">f</code></td>
<td>
<p>A list of filter parameters, see the filter parameters of
<a href="https://crunch.io/api/reference/#get-/search/">the API Documentation</a>
for more details.</p>
</td></tr>
<tr><td><code id="searchDatasets_+3A_...">...</code></td>
<td>
<p>additional options provided to the search endpoint.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If successful, an object of class SearchResults
</p>

<hr>
<h2 id='self'>Get the URL of this object</h2><span id='topic+self'></span><span id='topic+self+2CShojiObject-method'></span><span id='topic+self+2CCrunchVariable-method'></span>

<h3>Description</h3>

<p>Get the URL of this object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>self(x)

## S4 method for signature 'ShojiObject'
self(x)

## S4 method for signature 'CrunchVariable'
self(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="self_+3A_x">x</code></td>
<td>
<p>a Crunch object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the URL for <code>x</code>
</p>

<hr>
<h2 id='serialPaste'>Make a prose list</h2><span id='topic+serialPaste'></span>

<h3>Description</h3>

<p>Function to paste together a list of items, separated by commas (if more
than 2), and with the last one having the collapse string.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>serialPaste(x, collapse = "and")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="serialPaste_+3A_x">x</code></td>
<td>
<p>vector or list</p>
</td></tr>
<tr><td><code id="serialPaste_+3A_collapse">collapse</code></td>
<td>
<p>default=&quot;and&quot;</p>
</td></tr>
</table>

<hr>
<h2 id='session'>Get various catalogs for your Crunch session</h2><span id='topic+session'></span>

<h3>Description</h3>

<p>Get various catalogs for your Crunch session
</p>


<h3>Usage</h3>

<pre><code class='language-R'>session()
</code></pre>


<h3>Value</h3>

<p>A Session object. Access dataset and project catalogs from it.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
cr &lt;- session()
cr$datasets
cr$projects

## End(Not run)
</code></pre>

<hr>
<h2 id='session-extract'>Extract catalogs from a Session object</h2><span id='topic+session-extract'></span><span id='topic++5B+5B+2CSession+2CANY-method'></span><span id='topic++24+2CSession-method'></span><span id='topic++5B+5B+3C-+2CSession+2CANY+2CANY+2CANY-method'></span><span id='topic++24+3C-+2CSession-method'></span>

<h3>Description</h3>

<p>Extract catalogs from a Session object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Session,ANY'
x[[i, ..., drop = FALSE]]

## S4 method for signature 'Session'
x$name

## S4 replacement method for signature 'Session,ANY,ANY,ANY'
x[[i]] &lt;- value

## S4 replacement method for signature 'Session'
x$name &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="session-extract_+3A_x">x</code></td>
<td>
<p>a Session object</p>
</td></tr>
<tr><td><code id="session-extract_+3A_i">i</code></td>
<td>
<p>which catalog to load. Supported values are &quot;datasets&quot; and &quot;projects&quot;</p>
</td></tr>
<tr><td><code id="session-extract_+3A_...">...</code></td>
<td>
<p>additional arguments, ignored.</p>
</td></tr>
<tr><td><code id="session-extract_+3A_drop">drop</code></td>
<td>
<p>Invalid</p>
</td></tr>
<tr><td><code id="session-extract_+3A_name">name</code></td>
<td>
<p>for <code>$</code>, the same as <code>i</code> for <code>[</code></p>
</td></tr>
<tr><td><code id="session-extract_+3A_value">value</code></td>
<td>
<p>For updating, an object of the appropriate class and size to
insert. In practice <code>value</code> is ignored; Session objects hold no state
and it is assumed that any state modification on the server happens in other
methods.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The requested catalog when extracting; a Session object if assigning.
</p>


<h3>See Also</h3>

<p><code>session</code>
</p>

<hr>
<h2 id='set_crunch_config'>Set or modify general Crunch API request configuration</h2><span id='topic+set_crunch_config'></span>

<h3>Description</h3>

<p>Set or modify general Crunch API request configuration
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_crunch_config(
  cfg = c(config(postredir = 3), add_headers(`user-agent` = crunch_user_agent())),
  update = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_crunch_config_+3A_cfg">cfg</code></td>
<td>
<p>A <code><a href="httr.html#topic+config">httr::config()</a></code> object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of length one containing the configuration that was set; this
function is called primarily for its side effects.
</p>

<hr>
<h2 id='setCrunchAPI'>Change which server to point to</h2><span id='topic+setCrunchAPI'></span>

<h3>Description</h3>

<p>A convenience function for changing where you want the Crunch package to try
to connect to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setCrunchAPI(subdomain, port = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setCrunchAPI_+3A_subdomain">subdomain</code></td>
<td>
<p>the subdomain to use</p>
</td></tr>
<tr><td><code id="setCrunchAPI_+3A_port">port</code></td>
<td>
<p>on optional port to use</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nothing
</p>


<h3>Examples</h3>

<pre><code class='language-R'>setCrunchAPI("local", 8080)
setCrunchAPI("app")
</code></pre>

<hr>
<h2 id='setEntitySlot'>Base setter for Crunch objects</h2><span id='topic+setEntitySlot'></span>

<h3>Description</h3>

<p>Base setter for Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setEntitySlot(x, i, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setEntitySlot_+3A_x">x</code></td>
<td>
<p>a ShojiObject or subclass thereof</p>
</td></tr>
<tr><td><code id="setEntitySlot_+3A_i">i</code></td>
<td>
<p>character the slot name to update</p>
</td></tr>
<tr><td><code id="setEntitySlot_+3A_value">value</code></td>
<td>
<p>whatever the new value of that slot should be</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x modified accordingly.
</p>

<hr>
<h2 id='setEntitySlotWrapBody'>Setter for Crunch objects that wraps in a &quot;body&quot;</h2><span id='topic+setEntitySlotWrapBody'></span>

<h3>Description</h3>

<p>Variable Folders require an extra list(body = ...)
compared to other places where we use <code>setEntitySlot()</code>
is used. This may be a bug, see pivotal url in comments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setEntitySlotWrapBody(x, i, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setEntitySlotWrapBody_+3A_x">x</code></td>
<td>
<p>a ShojiObject or subclass thereof</p>
</td></tr>
<tr><td><code id="setEntitySlotWrapBody_+3A_i">i</code></td>
<td>
<p>character the slot name to update</p>
</td></tr>
<tr><td><code id="setEntitySlotWrapBody_+3A_value">value</code></td>
<td>
<p>whatever the new value of that slot should be</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x modified accordingly.
</p>

<hr>
<h2 id='setMultiEntitySlots'>setter for Crunch objects that allows a single request to update multiple parts of an entity</h2><span id='topic+setMultiEntitySlots'></span>

<h3>Description</h3>

<p>setter for Crunch objects that allows a single request to update multiple parts of an entity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setMultiEntitySlots(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setMultiEntitySlots_+3A_x">x</code></td>
<td>
<p>a ShojiObject or subclass thereof</p>
</td></tr>
<tr><td><code id="setMultiEntitySlots_+3A_...">...</code></td>
<td>
<p>Named arguments where the names are the slot name to update and the values
are the values that they should be updated to include.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>x modified accordingly.
</p>

<hr>
<h2 id='setName'>Change the name of the current folder</h2><span id='topic+setName'></span>

<h3>Description</h3>

<p>If you just need to change the name of the folder you are currently in, you
can use <code>setName()</code>. It doesn't move variables or change anything
other than the name of the current folder.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setName(object, nm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setName_+3A_object">object</code></td>
<td>
<p>A <code>Folder</code></p>
</td></tr>
<tr><td><code id="setName_+3A_nm">nm</code></td>
<td>
<p>A character that is the new name the folder should have</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>object</code>, with its name duly changed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cd">cd()</a></code> and <code><a href="#topic+mv">mv()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- ds %&gt;%
    cd("Demographics") %&gt;%
    setName("Key Demos.")

## End(Not run)
</code></pre>

<hr>
<h2 id='setNames'>Change the name of the entities in a catalog</h2><span id='topic+setNames'></span><span id='topic+setNames+2CShojiCatalog-method'></span>

<h3>Description</h3>

<p>This is an alternative to assigning <code>names(catalog) &lt;- something</code>, suitable
for inclusion in a pipeline.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setNames(object, nm)

## S4 method for signature 'ShojiCatalog'
setNames(object, nm)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setNames_+3A_object">object</code></td>
<td>
<p>A catalog object, such as <code>VariableFolder</code></p>
</td></tr>
<tr><td><code id="setNames_+3A_nm">nm</code></td>
<td>
<p>A character vector of new names of the same length as the number
of entities in the index</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>object</code>, with the names of its children duly changed
</p>


<h3>See Also</h3>

<p><code><a href="#topic+cd">cd()</a></code> and <code><a href="#topic+mv">mv()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
ds &lt;- ds %&gt;%
    cd("Demographics") %&gt;%
    setNames(c("Gender (4 category)", "Birth year", "Race (5 category)"))

## End(Not run)

</code></pre>

<hr>
<h2 id='setOrder'>Change the order of entities in folder</h2><span id='topic+setOrder'></span>

<h3>Description</h3>

<p>Change the order of entities in folder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setOrder(folder, ord)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setOrder_+3A_folder">folder</code></td>
<td>
<p>A <code>VariableFolder</code> or other <code style="white-space: pre;">&#8288;*Folder&#8288;</code> object</p>
</td></tr>
<tr><td><code id="setOrder_+3A_ord">ord</code></td>
<td>
<p>A vector of integer indices or character references to objects
contained in the folder</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>folder</code> with the order dictated by <code>ord</code>. The function also persists
that order on the server.
</p>

<hr>
<h2 id='settings'>View and modify dataset-level settings</h2><span id='topic+settings'></span><span id='topic+settings+3C-'></span>

<h3>Description</h3>

<p>These methods allow access and control over dataset settings. Currently
supported settings include:
</p>

<ul>
<li><p> User Authorizations for view-only users ('viewers_can_export', 'viewers_can_share', and
'viewers_can_change_weight'); and
</p>
</li>
<li><p> 'weight', which determines the default weighting variable for the dataset
Additional settings will be added in the future. See
https://crunch.io/api/reference/#post-/datasets/
-&gt; request body model -&gt; settings key, for an up-to-date
list of settings supported throughout the Crunch system. Clients may also
provide and use custom settings if they choose.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>settings(x)

settings(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="settings_+3A_x">x</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
<tr><td><code id="settings_+3A_value">value</code></td>
<td>
<p>A settings object (<code>ShojiEntity</code>), for the setter</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The getter returns a settings object (<code>ShojiEntity</code>). The setter
returns the dataset (<code>x</code>), duly modified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
settings(ds)
settings(ds)$viewers_can_export &lt;- TRUE
settings(ds)$weight &lt;- ds$myWeightVariable

## End(Not run)
</code></pre>

<hr>
<h2 id='setupCrunchAuth'>Helper for switching between API keys and urls</h2><span id='topic+setupCrunchAuth'></span>

<h3>Description</h3>

<p>Credentials can be stored in the options or environment variables with the following
structure (option = <code style="white-space: pre;">&#8288;crunch.api.&lt;ID&gt;&#8288;</code> or environment variable <code style="white-space: pre;">&#8288;R_CRUNCH_API_&lt;ID&gt;&#8288;</code>) where
<code style="white-space: pre;">&#8288;&lt;ID&gt;&#8288;</code> is a string. Then you can use this function to choose which credentials you want to use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setupCrunchAuth(id)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setupCrunchAuth_+3A_id">id</code></td>
<td>
<p>A string indicating the id of the credentials</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Using crunch options:
set_crunch_opts(
    crunch.api.account1 = "https://company1.crunch.io/api/",
    crunch.api.key.account1 = "MY KEY"
)

# Or with environment variables
Sys.setenv(
    "R_CRUNCH_API_ACCOUNT2" = "https://company2.crunch.io/api/",
    "R_CRUNCH_API_KEY_ACCOUNT2" = "ANOTHER KEY"
)

# Can now switch between accounts
setupCrunchAuth("account1")
crunch_sitrep()

setupCrunchAuth("account2")
crunch_sitrep()

## End(Not run)

</code></pre>

<hr>
<h2 id='share'>Share a dataset</h2><span id='topic+share'></span>

<h3>Description</h3>

<p>Share a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>share(dataset, users, edit = FALSE, notify = TRUE, message = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="share_+3A_dataset">dataset</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="share_+3A_users">users</code></td>
<td>
<p>character: email address(es) or URLs of the users or teams with
whom to share the dataset. If there is no Crunch user associated with an
email, an invitation will be sent.</p>
</td></tr>
<tr><td><code id="share_+3A_edit">edit</code></td>
<td>
<p>logical: should the specified user(s) be given edit privileges
on the dataset? Default is <code>FALSE</code>. <code>edit</code> can be a single value
or, if inviting multiple users, a vector of logical values of equal length
of the number of emails given.</p>
</td></tr>
<tr><td><code id="share_+3A_notify">notify</code></td>
<td>
<p>logical: should users who are getting new privileges on this
dataset be sent an email informing them of this fact? Default is
<code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="share_+3A_message">message</code></td>
<td>
<p>character: a message to send to the users who are receiving new
privileges.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, the dataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+unshare">unshare</a></code>
</p>

<hr>
<h2 id='shojifyDatasetMetadata'>Wrap variable metadata inside a dataset entity</h2><span id='topic+shojifyDatasetMetadata'></span>

<h3>Description</h3>

<p>Wrap variable metadata inside a dataset entity
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shojifyDatasetMetadata(metadata, order = I(names(metadata)), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shojifyDatasetMetadata_+3A_metadata">metadata</code></td>
<td>
<p>list of variable metadata</p>
</td></tr>
<tr><td><code id="shojifyDatasetMetadata_+3A_order">order</code></td>
<td>
<p>a valid &quot;order&quot; payload: list containing either aliases or
list(group, entities)</p>
</td></tr>
<tr><td><code id="shojifyDatasetMetadata_+3A_...">...</code></td>
<td>
<p>dataset entity metadata. &quot;name&quot; is required.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>list suitable for JSONing and POSTing to create a dataset
</p>

<hr>
<h2 id='ShojiObject-class'>Mix-in class for multiple inheritance of variables and datasets.</h2><span id='topic+ShojiObject-class'></span><span id='topic+ShojiObject'></span>

<h3>Description</h3>

<p>Exists for common methods in interacting with Crunch API only. Has no
Extract methods declared so as not to conflict with the
vector/list/data.frame methods jointly inherited in CrunchVariable and
CrunchDataset.
</p>

<hr>
<h2 id='ShojiOrder-slots'>Manipulate VariableGroup and VariableOrder</h2><span id='topic+ShojiOrder-slots'></span><span id='topic+entities'></span><span id='topic+entities+3C-'></span><span id='topic+entities+2COrderGroup-method'></span><span id='topic+entities+2CShojiOrder-method'></span><span id='topic+entities+2Clist-method'></span><span id='topic+entities+3C-+2COrderGroup-method'></span><span id='topic+entities+3C-+2CShojiOrder-method'></span><span id='topic+name+2COrderGroup-method'></span><span id='topic+name+3C-+2COrderGroup-method'></span><span id='topic+names+3C-+2CShojiOrder-method'></span>

<h3>Description</h3>

<p>Manipulate VariableGroup and VariableOrder
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'OrderGroup'
entities(x, simplify = FALSE)

## S4 method for signature 'ShojiOrder'
entities(x, simplify = FALSE)

## S4 method for signature 'list'
entities(x, simplify = FALSE)

## S4 replacement method for signature 'OrderGroup'
entities(x) &lt;- value

## S4 replacement method for signature 'ShojiOrder'
entities(x) &lt;- value

## S4 method for signature 'OrderGroup'
name(x)

## S4 replacement method for signature 'OrderGroup'
name(x) &lt;- value

## S4 replacement method for signature 'ShojiOrder'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ShojiOrder-slots_+3A_x">x</code></td>
<td>
<p>a VariableGroup or VariableOrder</p>
</td></tr>
<tr><td><code id="ShojiOrder-slots_+3A_simplify">simplify</code></td>
<td>
<p>logical: should variable URLs inside of groups be flattened
or preserved in their nested lists? Default is<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ShojiOrder-slots_+3A_value">value</code></td>
<td>

<ol>
<li><p> For name, a character (length-1 vector); for names, a character
vector of equal length to the number of VariableGroups being modified; for
entities, either a character vector of variable URLs or a list containing a
combination of variable URLs and VariableGroups. Note that group names must
be unique, should be greater than 0 characters long, and &quot;ungrouped&quot; is a
reserved group name.
</p>
</li></ol>
</td></tr>
</table>


<h3>Value</h3>


<ul>
<li> <p><code>entities</code> returns Variable references and VariableGroups;
</p>
</li>
<li> <p><code>names</code> returns group names;
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+VariableOrder">VariableOrder</a></code> <code><a href="#topic+grouped">grouped</a></code>
</p>

<hr>
<h2 id='shojiURL'>Get a resource URL from a Shoji Object</h2><span id='topic+shojiURL'></span>

<h3>Description</h3>

<p>Get a resource URL from a Shoji Object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shojiURL(
  x,
  collection = c("catalogs", "views", "fragments", "orders"),
  key,
  mustWork = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shojiURL_+3A_x">x</code></td>
<td>
<p>a shojiObject</p>
</td></tr>
<tr><td><code id="shojiURL_+3A_collection">collection</code></td>
<td>
<p>one of c(&quot;catalogs&quot;, &quot;views&quot;, &quot;fragments&quot;, &quot;orders&quot;)</p>
</td></tr>
<tr><td><code id="shojiURL_+3A_key">key</code></td>
<td>
<p>character name of the URL to get from <code>collection</code></p>
</td></tr>
<tr><td><code id="shojiURL_+3A_mustwork">mustWork</code></td>
<td>
<p>logical: error if the URL is not found? Default is <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>The indicated URL, or if it does not exist and <code>mustWork</code> is not
<code>TRUE</code>, <code>NULL</code>.
</p>

<hr>
<h2 id='show'>Show methods for Crunch objects</h2><span id='topic+show'></span><span id='topic+show+2CShojiObject-method'></span><span id='topic+show+2CCrunchVariable-method'></span><span id='topic+show+2CCategory-method'></span><span id='topic+show+2CCategories-method'></span><span id='topic+show+2CInsertion-method'></span><span id='topic+show+2CInsertions-method'></span><span id='topic+show+2CCrunchExpr-method'></span><span id='topic+show+2CCrunchLogicalExpr-method'></span><span id='topic+show+2CAnalyticPalettes-method'></span><span id='topic+show+2CAnalyticPalette-method'></span><span id='topic+show+2CCrunchCube-method'></span><span id='topic+show+2COrderGroup-method'></span><span id='topic+show+2CCrunchGeography-method'></span><span id='topic+show+2CDeckCatalog-method'></span><span id='topic+show+2CCrunchDeck-method'></span><span id='topic+show+2CCrunchSlide-method'></span><span id='topic+show+2CCrunchAnalysisSlide-method'></span><span id='topic+show+2CCrunchMarkdownSlide-method'></span><span id='topic+show+2CMultitableResult-method'></span><span id='topic+show+2CShojiFolder-method'></span>

<h3>Description</h3>

<p>Show methods for Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show(object)

## S4 method for signature 'ShojiObject'
show(object)

## S4 method for signature 'CrunchVariable'
show(object)

## S4 method for signature 'Category'
show(object)

## S4 method for signature 'Categories'
show(object)

## S4 method for signature 'Insertion'
show(object)

## S4 method for signature 'Insertions'
show(object)

## S4 method for signature 'CrunchExpr'
show(object)

## S4 method for signature 'CrunchLogicalExpr'
show(object)

## S4 method for signature 'AnalyticPalettes'
show(object)

## S4 method for signature 'AnalyticPalette'
show(object)

## S4 method for signature 'CrunchCube'
show(object)

## S4 method for signature 'OrderGroup'
show(object)

## S4 method for signature 'CrunchGeography'
show(object)

## S4 method for signature 'DeckCatalog'
show(object)

## S4 method for signature 'CrunchDeck'
show(object)

## S4 method for signature 'CrunchSlide'
show(object)

## S4 method for signature 'CrunchAnalysisSlide'
show(object)

## S4 method for signature 'CrunchMarkdownSlide'
show(object)

## S4 method for signature 'MultitableResult'
show(object)

## S4 method for signature 'ShojiFolder'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_+3A_object">object</code></td>
<td>
<p>the object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly
</p>


<h3>See Also</h3>

<p><code><a href="methods.html#topic+show">methods::show</a></code>
</p>

<hr>
<h2 id='showMissing'>Modify cube missing behavior</h2><span id='topic+showMissing'></span><span id='topic+hideMissing'></span><span id='topic+showIfAny'></span><span id='topic+cube-missingness'></span><span id='topic+showMissing+2CCrunchCube-method'></span><span id='topic+hideMissing+2CCrunchCube-method'></span><span id='topic+showIfAny+2CCrunchCube-method'></span>

<h3>Description</h3>

<p>By default, CrunchCubes do not show entries for missing categories. You can
include missing values in a <code>cube</code> with <code>showMissing(cube)</code> and hide them
again with <code>hideMissing(cube)</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showMissing(cube)

hideMissing(cube)

showIfAny(cube)

## S4 method for signature 'CrunchCube'
showMissing(cube)

## S4 method for signature 'CrunchCube'
hideMissing(cube)

## S4 method for signature 'CrunchCube'
showIfAny(cube)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showMissing_+3A_cube">cube</code></td>
<td>
<p>a CrunchCube</p>
</td></tr>
</table>

<hr>
<h2 id='showTransforms'>Show transformations on a Crunch object</h2><span id='topic+showTransforms'></span><span id='topic+showTransforms+2CCategoricalVariable-method'></span><span id='topic+showTransforms+2CCrunchCube-method'></span>

<h3>Description</h3>

<p><code style="white-space: pre;">&#8288;showTransforms([variable])&#8288;</code> shows a summary of a categorical variable that
has transforms with the transforms calculated and applied. This is useful to
see what kind transforms exist before including the variable in a CrunchCube.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>showTransforms(x)

## S4 method for signature 'CategoricalVariable'
showTransforms(x)

## S4 method for signature 'CrunchCube'
showTransforms(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="showTransforms_+3A_x">x</code></td>
<td>
<p>a Categorical variable or CrunchCube</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code style="white-space: pre;">&#8288;showTransforms([CrunchCube])&#8288;</code> shows the CrunchCube with all transforms
calculated and applied. This is the default display method for cubes, so
should not be frequently needed.
</p>
<p>In both cases, an array is returned that includes the values of both the
underlying data (either category counts or CrunchCube cell values) as well as
the transformations applied.
</p>


<h3>Value</h3>

<p>summary of the variable, or the full CrunchCube with transforms applied
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
showTransforms(ds$variable)

## End(Not run)
</code></pre>

<hr>
<h2 id='skipMissingCategories'>Handle missing categories in CrunchCube</h2><span id='topic+skipMissingCategories'></span>

<h3>Description</h3>

<p>Missing categories are not displayed when <code>cube@useNA</code> is set to <code>"no"</code> or <code>ifANy</code>.
The way we handle these cases is to change the <code>useNA</code> setting to <code>always</code>, subset
the cube, and then change it back to the original value. For this to work we
need to translate the indices that the user supplied to properly skip over hidden
categories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>skipMissingCategories(cube, index, drop)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="skipMissingCategories_+3A_cube">cube</code></td>
<td>
<p>a CrunchCube</p>
</td></tr>
<tr><td><code id="skipMissingCategories_+3A_index">index</code></td>
<td>
<p>the user supplied index</p>
</td></tr>
<tr><td><code id="skipMissingCategories_+3A_drop">drop</code></td>
<td>
<p>whether dimensions should be dropped</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list translated indexes
</p>

<hr>
<h2 id='slideCategories'>Create sliding subvariable definitions</h2><span id='topic+slideCategories'></span>

<h3>Description</h3>

<p>Create a multiple response array variable by sliding through category levels
and selecting potentially overlapping sets of categories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slideCategories(variable, step, width, ..., complete = TRUE, useNA = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="slideCategories_+3A_variable">variable</code></td>
<td>
<p>A categorical crunch variable</p>
</td></tr>
<tr><td><code id="slideCategories_+3A_step">step</code></td>
<td>
<p>number of categories between starting points of groups</p>
</td></tr>
<tr><td><code id="slideCategories_+3A_width">width</code></td>
<td>
<p>number of categories wide the grouping should be</p>
</td></tr>
<tr><td><code id="slideCategories_+3A_...">...</code></td>
<td>
<p>additional attributes to be included in the <code>VariableDefinition</code>,
can be either functions that take the category names to be included in the
sliding group and returns a single string, or a character vector the same length
as the number of subvariables that will be created.</p>
</td></tr>
<tr><td><code id="slideCategories_+3A_complete">complete</code></td>
<td>
<p>whether to only include category groupings that are as wide as width
(defaults to <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="slideCategories_+3A_usena">useNA</code></td>
<td>
<p>whether to use missing categories from the original variable (defaults
to <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of <code>VariableDefinition</code>s appropriate for use in <code>deriveArray()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
data &lt;- data.frame(
    wave = factor(c("a", "b", "c", "d", "e"))
)

ds &lt;- newDataset(data, "Sliding Categories")

# Make an MR variable where subvariable is 1 step apart, and with 3 categories wide
# and name subvariables with vector
ds$wave_step1_wide3 &lt;- deriveArray(
   slideCategories(ds$wave, step = 1, width = 3, name = c("a - c", "b - d", "c - e")),
   "Sliding example 1"
)

# You can also make names (and other subvariable metadata like alias or description)
# with a function:
ds$wave_step2_wide2 &lt;- deriveArray(
   slideCategories(
     ds$wave,
     step = 2,
     width = 2,
     name = function(x) paste(x[1], "-", x[length(x)])
   ),
   "Sliding example 2"
)

## End(Not run)
</code></pre>

<hr>
<h2 id='slideMarkdown'>Add a new markdown slide to a deck</h2><span id='topic+slideMarkdown'></span><span id='topic+slideMarkdown+3C-'></span><span id='topic+newMarkdownSlide'></span><span id='topic+markdownSlideImage'></span><span id='topic+slideMarkdown+2CCrunchMarkdownSlide-method'></span><span id='topic+slideMarkdown+3C-+2CCrunchMarkdownSlide+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Markdown slides allow you to add rich text tiles to your Crunch Dashboards.
<code>markdownSlideImage()</code> is a helper for embedding the data of an image from
your computer into the slide.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slideMarkdown(x)

slideMarkdown(x) &lt;- value

newMarkdownSlide(deck, ..., title = "", subtitle = "")

markdownSlideImage(file)

## S4 method for signature 'CrunchMarkdownSlide'
slideMarkdown(x)

## S4 replacement method for signature 'CrunchMarkdownSlide,character'
slideMarkdown(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="slideMarkdown_+3A_x">x</code></td>
<td>
<p>A <code>CrunchMarkdownSlide</code></p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_value">value</code></td>
<td>
<p>A string to replace the markdown content with</p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_deck">deck</code></td>
<td>
<p>A Crunch Deck</p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_...">...</code></td>
<td>
<p>Unnamed arguments are text that are combined to create the markdown body
named arguments are passed to the API.</p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_title">title</code></td>
<td>
<p>The slide's title</p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_subtitle">subtitle</code></td>
<td>
<p>The slide's subtitle</p>
</td></tr>
<tr><td><code id="slideMarkdown_+3A_file">file</code></td>
<td>
<p>File path to an image</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>MarkdownCrunchSlide</code>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+newSlide">newSlide()</a></code> for creating an analysis slide
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
newMarkdownSlide(deck, "We contacted 1,000 people by telephone", title = "Methodology")

newMarkdownSlide(
    deck,
    "The 3 most **popular** vegetables are:\n",
    "- Fennel\n",
    "- Carrots\n",
    "- Avocado\n",
    title = "Key findings"
)

newMarkdownSlide(
    deck,
    "crunch.io: ",
    markdownSlideImage("logo.png")
)

## End(Not run)
</code></pre>

<hr>
<h2 id='slides'>Access the slides of a CrunchDeck</h2><span id='topic+slides'></span><span id='topic+slides+3C-'></span><span id='topic+slides+2CCrunchDeck-method'></span><span id='topic+slides+3C-+2CCrunchDeck-method'></span>

<h3>Description</h3>

<p>Return a <code>SlideCatalog</code> from a <code>CrunchDeck</code>. All slide catalog methods should be
available for <code>CrunchDecks</code>, but this function is used internally to model the
API.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>slides(x)

slides(x) &lt;- value

## S4 method for signature 'CrunchDeck'
slides(x)

## S4 replacement method for signature 'CrunchDeck'
slides(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="slides_+3A_x">x</code></td>
<td>
<p>a CrunchDeck</p>
</td></tr>
<tr><td><code id="slides_+3A_value">value</code></td>
<td>
<p>a <code>SlideCatalog</code> or <code>CrunchSlide</code> to add</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>SlideCatalog</code>
</p>

<hr>
<h2 id='SO_schema'>Schema for the 2017 Stack Overflow developer survey</h2><span id='topic+SO_schema'></span>

<h3>Description</h3>

<p>Survey questions and variable names for the 2017 Stack Overflow Developers
Survey #'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SO_schema
</code></pre>


<h3>Format</h3>

<p>A data frame with 23 rows and 2 variables.
</p>

<dl>
<dt>Column</dt><dd><p>The column name of the survey data frame</p>
</dd>
<dt>Question</dt><dd><p>Question asked of respondents</p>
</dd>
</dl>


<hr>
<h2 id='SO_survey'>R users who responded to the 2017 Stack Overflow developer survey</h2><span id='topic+SO_survey'></span>

<h3>Description</h3>

<p>A slightly modified version of the 2017 Stack Overflow developer survey. The
dataset is filtered to only include respondents who have used R before, and
to include illustrative variable types.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SO_survey
</code></pre>


<h3>Format</h3>

<p>A data frame with 1634 rows and 25 variables.
</p>

<dl>
<dt>Respondent</dt><dd><p>Respondent ID number</p>
</dd>
<dt>Professional</dt><dd><p>Which of the following best describes you?</p>
</dd>
<dt>Country</dt><dd><p>In which country do you currently live?</p>
</dd>
<dt>CompanySize</dt><dd><p>In terms of the number of employees, how large is the company or organization you work for?</p>
</dd>
<dt>CareerSatisfaction</dt><dd><p>Career satisfaction rating</p>
</dd>
<dt>JobSatisfaction</dt><dd><p>Job satisfaction rating</p>
</dd>
<dt>ImportantHiringAlgorithms</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Knowledge of algorithms and data structures</p>
</dd>
<dt>ImportantHiringTechExp</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Experience with specific tools (libraries, frameworks, etc.) used by the employer</p>
</dd>
<dt>ImportantHiringCommunication</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Communication skills</p>
</dd>
<dt>ImportantHiringOpenSource</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Contributions to open source projects</p>
</dd>
<dt>ImportantHiringPMExp</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Experience with specific project management tools &amp; techniques</p>
</dd>
<dt>ImportantHiringCompanies</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Previous companies worked at</p>
</dd>
<dt>ImportantHiringTitles</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Previous job titles held</p>
</dd>
<dt>ImportantHiringEducation</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Educational credentials (e.g. schools attended, specific field of study, grades earned)</p>
</dd>
<dt>ImportantHiringRep</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Stack Overflow reputation</p>
</dd>
<dt>ImportantHiringGettingThingsDone</dt><dd><p>Congratulations! You've just been put in charge of technical recruiting at Globex, a multinational high- tech firm. This job comes with a corner office, and you have an experienced staff of recruiters at your disposal. They want to know what they should prioritize when recruiting software developers. How important should each of the following be in Globex's hiring process? Track record of getting things done</p>
</dd>
<dt>Gender</dt><dd><p>Which of the following do you currently identify as?</p>
</dd>
<dt>Race</dt><dd><p>Which of the following do you identify as?</p>
</dd>
<dt>Salary</dt><dd><p>What is your current annual base salary, before taxes, and excluding bonuses, grants, or other compensation?</p>
</dd>
<dt>ExpectedSalary</dt><dd><p>You said before that you are currently learning how to program. When you have completed your studies, what annual salary do you expect to earn in your first job after graduation?</p>
</dd>
<dt>TabsSpaces</dt><dd><p>Tabs or spaces?</p>
</dd>
<dt>WantWorkLanguage</dt><dd><p>Which of the following languages have you done extensive development work in over the past year, and which do you want to work in over the next year?</p>
</dd>
<dt>HaveWorkedLanguage</dt><dd><p>Which of the following languages have you done extensive development work in over the past year, and which do you want to work in over the next year?</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://insights.stackoverflow.com/survey/">https://insights.stackoverflow.com/survey/</a>
</p>

<hr>
<h2 id='streaming'>Set the streaming property of a dataset</h2><span id='topic+streaming'></span><span id='topic+streaming+3C-'></span>

<h3>Description</h3>

<p>Only datasets that have their streaming property set to &quot;streaming&quot; can
have rows streamed to them. Before attempting to streaming rows (with
<a href="#topic+streamRows">streamRows</a> for example), the dataset has to be set up to stream rows. Use
<code>streaming(ds)</code> to get the streaming status, and <code>streaming(ds) &lt;- "streaming"</code> to set the streaming status.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streaming(x)

streaming(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="streaming_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="streaming_+3A_value">value</code></td>
<td>
<p>for setting only (values can be: <code>"no"</code>, <code>"streaming"</code>, or
<code>"finished"</code>)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the streaming status
</p>

<hr>
<h2 id='streamRows'>Stream data to a Crunch dataset</h2><span id='topic+streamRows'></span>

<h3>Description</h3>

<p>Stream data to a Crunch dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>streamRows(ds, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="streamRows_+3A_ds">ds</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="streamRows_+3A_data">data</code></td>
<td>
<p>a data.frame with data to send as a stream, The given data values
must be in the Crunch I/O format (for example, category ids instead of
names or numeric_values)</p>
</td></tr>
</table>

<hr>
<h2 id='Subtotal-class'>Subtotals and headings</h2><span id='topic+Subtotal-class'></span><span id='topic+Subtotal'></span><span id='topic+Heading-class'></span><span id='topic+Heading'></span><span id='topic+subtotals'></span><span id='topic+subtotals+3C-'></span><span id='topic+SubtotalsHeadings'></span><span id='topic+is.Subtotal'></span><span id='topic+is.Heading'></span><span id='topic+are.Subtotals'></span><span id='topic+are.Headings'></span><span id='topic+subtotals+2CCrunchVariable-method'></span><span id='topic+subtotals+2CVariableTuple-method'></span><span id='topic+subtotals+3C-+2CCrunchVariable+2CANY-method'></span><span id='topic+subtotals+3C-+2CCrunchVariable+2CNULL-method'></span>

<h3>Description</h3>

<p>Subtotals and headings for Categorical Variables and Multiple Response
Variables. These are especially useful for making aggregates across
multiple categories (sometimes referred to as <em>nets</em>, <em>top box</em>, or
<em>top 2 box</em>).
</p>
<p>Subtotals and headings for Categorical Variables and Multiple Response
Variables. These are especially useful for making aggregates across
multiple categories (sometimes referred to as <em>nets</em>, <em>top box</em>, or
<em>top 2 box</em>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Subtotal(
  name,
  categories = NULL,
  position = c("relative", "top", "bottom"),
  after = NULL,
  before = NULL,
  negative = NULL,
  na.rm = TRUE,
  variable = NULL,
  id = NULL,
  alias = NULL
)

Heading(name, position = c("relative", "top", "bottom"), after = NULL)

subtotals(x)

subtotals(x) &lt;- value

Subtotal(
  name,
  categories = NULL,
  position = c("relative", "top", "bottom"),
  after = NULL,
  before = NULL,
  negative = NULL,
  na.rm = TRUE,
  variable = NULL,
  id = NULL,
  alias = NULL
)

is.Subtotal(x)

is.Heading(x)

are.Subtotals(x)

are.Headings(x)

Heading(name, position = c("relative", "top", "bottom"), after = NULL)

## S4 method for signature 'CrunchVariable'
subtotals(x)

## S4 method for signature 'VariableTuple'
subtotals(x)

## S4 replacement method for signature 'CrunchVariable,ANY'
subtotals(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,'NULL''
subtotals(x) &lt;- value

Subtotal(
  name,
  categories = NULL,
  position = c("relative", "top", "bottom"),
  after = NULL,
  before = NULL,
  negative = NULL,
  na.rm = TRUE,
  variable = NULL,
  id = NULL,
  alias = NULL
)

is.Subtotal(x)

is.Heading(x)

are.Subtotals(x)

are.Headings(x)

Heading(name, position = c("relative", "top", "bottom"), after = NULL)

## S4 method for signature 'CrunchVariable'
subtotals(x)

## S4 method for signature 'VariableTuple'
subtotals(x)

## S4 replacement method for signature 'CrunchVariable,ANY'
subtotals(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,'NULL''
subtotals(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Subtotal-class_+3A_name">name</code></td>
<td>
<p>character the name of the subtotal or heading</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_categories">categories</code></td>
<td>
<p>character or numeric the category names or ids for subtotal
only</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_position">position</code></td>
<td>
<p>character one of &quot;relative&quot;, &quot;top&quot;, or &quot;bottom&quot;. Determines
the position of the subtotal or heading, either at the top, bottom, or
relative to another category in the cube (default).</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_after">after</code></td>
<td>
<p>character or numeric if <code>position</code> is &quot;relative&quot;, then the
category name or id to position the subtotal or heading after. If not supplied
this defaults to the last of the <code>categories</code> supplied to <code>Subtotal</code>.</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_before">before</code></td>
<td>
<p>character or numeric if <code>position</code> is &quot;relative&quot; and also the
subtotal is on a Multiple Response variable only.</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_negative">negative</code></td>
<td>
<p>character or numeric of the category names or ids to be subtracted
for subtotals only</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_na.rm">na.rm</code></td>
<td>
<p>For Multiple Response subtotals, whether to remove missings before
calculating the subtotal (so that if <code>na.rm=TRUE</code> and there is one missing and
one selected, the response would selected instead of missing). This defaults to
<code>TRUE</code> to match how the crunch web application behaves.</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_variable">variable</code></td>
<td>
<p>For Multiple Response subtotals, the parent MR variable that
contains the subvariables that are being subtotaled (defaults to the variable
that is having the Subtotal added to it)</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_id">id</code></td>
<td>
<p>For Multiple Response subtotals, an optional number or string to use
as the new insertion's id (defaults to a sequential number).</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_alias">alias</code></td>
<td>
<p>For Multiple Response subtotals, an optional string to use as the
new insertion's alias (defaults to letting the server choose the alias)</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_x">x</code></td>
<td>
<p>either a variable or CrunchCube object to add or get subtotal
transforms for, for <code>is.Subtotal()</code> and <code>is.Heading()</code> an object to test if
it is either a Subtotal or Heading</p>
</td></tr>
<tr><td><code id="Subtotal-class_+3A_value">value</code></td>
<td>
<p>For <code style="white-space: pre;">&#8288;[&lt;-&#8288;</code>, the replacement Subtotal to insert</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To see the subtotals or headings set for a variable, use <code>subtotals(variable)</code>
</p>
<p>To see the subtotals or headings set for a variable, use <code>subtotals(variable)</code>
</p>


<h3>Adding Subtotals and Headings</h3>

<p>Subtotals and headings can be added either by passing a list of <code>Subtotal</code>s
or <code>Heading</code>s, or they can be added one at a time by passing <code>Subtotal</code> or
<code>Heading</code> to <code>subtotals(variable)</code> alone.
</p>
<p>Adding subtotals or headings is additive; meaning that subtotals or headings
that are already set on the variable are not removed when new subtotals or
headings are added. To remove all subtotals and headings, set
<code>subtotals(variable)</code> to <code>NULL</code>.
</p>
<p>To get an array of just the subtotal rows from a CrunchCube, use the function
<code>subtotalArray(CrunchCube)</code>.
</p>
<p>Subtotals and headings can be added either by passing a list of <code>Subtotal</code>s
or <code>Heading</code>s, or they can be added one at a time by passing <code>Subtotal</code> or
<code>Heading</code> to <code>subtotals(variable)</code> alone.
</p>
<p>Adding subtotals or headings is additive; meaning that subtotals or headings
that are already set on the variable are not removed when new subtotals or
headings are added. To remove all subtotals and headings, set
<code>subtotals(variable)</code> to <code>NULL</code>.
</p>
<p>To get an array of just the subtotal rows from a CrunchCube, use the function
<code>subtotalArray(CrunchCube)</code>.
</p>


<h3>Working with Subtotals and headings</h3>

<p>When interacting programmatically with Subtotals and Headings, it can be
useful to be able to tell if something is a Subtotal or a Heading. The <code style="white-space: pre;">&#8288;is.*&#8288;</code>
family of methods are useful here: the singular versions (<code>is.Subtotal</code> and
<code>is.Heading</code>) take a single object and returns <code>TRUE</code> if the object is either
a Subtotal or a Heading and <code>FALSE</code> if not; the plural versions
(<code>are.Subtotals</code> and <code>are.Headings</code>) take a list of objects (including an
<code>Insertions</code> object) and returns a vector of <code>TRUE</code>/<code>FALSE</code>s.
</p>
<p>When interacting programmatically with Subtotals and Headings, it can be
useful to be able to tell if something is a Subtotal or a Heading. The <code style="white-space: pre;">&#8288;is.*&#8288;</code>
family of methods are useful here: the singular versions (<code>is.Subtotal</code> and
<code>is.Heading</code>) take a single object and returns <code>TRUE</code> if the object is either
a Subtotal or a Heading and <code>FALSE</code> if not; the plural versions
(<code>are.Subtotals</code> and <code>are.Headings</code>) take a list of objects (including an
<code>Insertions</code> object) and returns a vector of <code>TRUE</code>/<code>FALSE</code>s.
</p>


<h3>Removing transforms</h3>

<p><code>noTransforms()</code> is useful if you don't want to see or use any transformations like
Subtotals and Headings. This action only applies to the CrunchCube object in
R: it doesn't actually change the variables on Crunch servers or the query
that generated the CrunchCube.
</p>
<p><code>noTransforms()</code> is useful if you don't want to see or use any transformations like
Subtotals and Headings. This action only applies to the CrunchCube object in
R: it doesn't actually change the variables on Crunch servers or the query
that generated the CrunchCube.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# given a variable ds$opinion, with categories: Strongly Agree, Somewhat
# Agree, Neither Agree nor Disagree, Somewhat Disagree, and Strongly Disagree,
# to make two subtotals for Agree and Disagree:
subtotals(ds$opinion) &lt;- list(
    Subtotal(
        name = "Agree",
        categories = c("Strongly Agree", "Somewhat Agree"),
        after = "Somewhat Agree"
    ),
    Subtotal(
        name = "Disagree",
        categories = c("Strongly Disagree", "Somewhat Disagree"),
        after = "Strongly Disagree"
    )
)

# headings can also be added:
subtotals(ds$opinion) &lt;- Heading(name = "All opinions", position = "top")

# to see the subtotals and headings associated with a variable
subtotals(ds$opinion)
#        anchor         name     func    args
# 1      2        Agree subtotal 1 and 2
# 2      4     Disagree subtotal 4 and 5
# 3      0 All opinions     &lt;NA&gt;      NA

# when you use a variable with subtotals and headings in a cube, you see them
# by default
opinion_cube &lt;- crtabs(~opinion, ds)
opinion_cube
#               All opinions
#             Strongly Agree 23
#             Somewhat Agree 24
#                      Agree 47
# Neither Agree nor Disagree 18
#          Somewhat Disagree 16
#          Strongly Disagree 19
#                   Disagree 35


# to get just the subtotals,
subtotalArray(opinion_cube)
#    Agree Disagree
#       47       35

# to remove all subtotals and headings
subtotals(ds$opinion) &lt;- NULL
crtabs(~opinion, ds)
#             Strongly Agree 23
#             Somewhat Agree 24
# Neither Agree nor Disagree 18
#          Somewhat Disagree 16
#          Strongly Disagree 19

# if you want to temporarily remove subtotals and headings, you can with `noTransforms`
noTransforms(crtabs(~opinion, ds))
#             Strongly Agree             Somewhat Agree Neither Agree nor Disagree
#                         23                         24                         18
#          Somewhat Disagree          Strongly Disagree
#                         16                         19

## End(Not run)

## Not run: 
# given a variable ds$opinion, with categories: Strongly Agree, Somewhat
# Agree, Neither Agree nor Disagree, Somewhat Disagree, and Strongly Disagree,
# to make two subtotals for Agree and Disagree:
subtotals(ds$opinion) &lt;- list(
    Subtotal(
        name = "Agree",
        categories = c("Strongly Agree", "Somewhat Agree"),
        after = "Somewhat Agree"
    ),
    Subtotal(
        name = "Disagree",
        categories = c("Strongly Disagree", "Somewhat Disagree"),
        after = "Strongly Disagree"
    )
)

# headings can also be added:
subtotals(ds$opinion) &lt;- Heading(name = "All opinions", position = "top")

# to see the subtotals and headings associated with a variable
subtotals(ds$opinion)
#        anchor         name     func    args
# 1      2        Agree subtotal 1 and 2
# 2      4     Disagree subtotal 4 and 5
# 3      0 All opinions     &lt;NA&gt;      NA

# when you use a variable with subtotals and headings in a cube, you see them
# by default
opinion_cube &lt;- crtabs(~opinion, ds)
opinion_cube
#               All opinions
#             Strongly Agree 23
#             Somewhat Agree 24
#                      Agree 47
# Neither Agree nor Disagree 18
#          Somewhat Disagree 16
#          Strongly Disagree 19
#                   Disagree 35


# to get just the subtotals,
subtotalArray(opinion_cube)
#    Agree Disagree
#       47       35

# to remove all subtotals and headings
subtotals(ds$opinion) &lt;- NULL
crtabs(~opinion, ds)
#             Strongly Agree 23
#             Somewhat Agree 24
# Neither Agree nor Disagree 18
#          Somewhat Disagree 16
#          Strongly Disagree 19

# if you want to temporarily remove subtotals and headings, you can with `noTransforms`
noTransforms(crtabs(~opinion, ds))
#             Strongly Agree             Somewhat Agree Neither Agree nor Disagree
#                         23                         24                         18
#          Somewhat Disagree          Strongly Disagree
#                         16                         19

## End(Not run)

</code></pre>

<hr>
<h2 id='subtotalArray'>Calculate the transforms from a CrunchCube</h2><span id='topic+subtotalArray'></span><span id='topic+subtotalArray+2CCrunchCube-method'></span><span id='topic+applyTransforms'></span>

<h3>Description</h3>

<p><code>applyTransforms</code> calculates transforms (e.g. <a href="#topic+SubtotalsHeadings">Subtotals</a>) on a CrunchCube.
Currently only the row transforms are supported. This is useful if you want
to use the values from the subtotals of the CrunchCube in an analysis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subtotalArray(x, ...)

## S4 method for signature 'CrunchCube'
subtotalArray(x, headings = FALSE)

applyTransforms(
  x,
  array = cubeToArray(x),
  transforms_list = transforms(x),
  dims_list = dimensions(x),
  useNA = x@useNA,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subtotalArray_+3A_x">x</code></td>
<td>
<p>a CrunchCube</p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_...">...</code></td>
<td>
<p>arguments to pass to <code>calcTransforms</code>, for example <code>include</code></p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_headings">headings</code></td>
<td>
<p>for <code>subtotalArray</code>: a logical indicating if the headings
should be included with the subtotals (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_array">array</code></td>
<td>
<p>an array to use, if not using the default array from the cube
itself. (Default: not used, pulls an array from the cube directly)</p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_transforms_list">transforms_list</code></td>
<td>
<p>list of transforms to be applied (default:
<code>transforms(x)</code>)</p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_dims_list">dims_list</code></td>
<td>
<p>list of dimensions that correspond to <code>array</code> (default:
<code>dimensions(x)</code>)</p>
</td></tr>
<tr><td><code id="subtotalArray_+3A_usena">useNA</code></td>
<td>
<p><code>useNA</code> parameter from the CrunchCube to use (default:
<code>x@useNA</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Including the <code>include</code> argument allows you to specify which parts of the
CrunchCube to return. The options can be any of the following: &quot;cube_cells&quot;
for the untransformed values from the cube itself, &quot;subtotals&quot; for the
subtotal insertions, and &quot;headings&quot; for any additional headings. Any
combination of these can be given, by default all will be given.
</p>
<p><code>subtotalArray(cube)</code> is a convenience function that is equivalent to
<code>applyTransforms(cube, include = c("subtotals"))</code>
</p>


<h3>Value</h3>

<p>an array with any transformations applied
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# to get an array of just the subtotals
subtotalArray(crtabs(~opinion, ds))
#    Agree Disagree
#       47       35

# to get the full array with the subtotals but not headings
applyTransforms(crtabs(~opinion, ds), include = c("cube_cells", "subtotals"))
#             Strongly Agree             Somewhat Agree                      Agree
#                         23                         24                         47
# Neither Agree nor Disagree          Strongly Disagree                   Disagree
#                         18                         19                         35
#          Somewhat Disagree
#                         16
# to get the full array with the headings but not subtotals
applyTransforms(crtabs(~opinion, ds), include = c("cube_cells", "headings"))
#               All opinions             Strongly Agree             Somewhat Agree
#                         NA                         23                         24
# Neither Agree nor Disagree          Strongly Disagree          Somewhat Disagree
#                         18                         19                         16

## End(Not run)

</code></pre>

<hr>
<h2 id='subtypeInsertion'>Convert from Insertion to Insertion subtypes</h2><span id='topic+subtypeInsertion'></span><span id='topic+subtypeInsertions'></span>

<h3>Description</h3>

<p>Convert from Insertions with only Insertion objects (the only kind that are
available from the Crunch API) to the more user-friendly and user-facing
Subtotal and Heading object classes.
</p>
<p>Convert from Insertions with only Insertion objects (the only kind that are
available from the Crunch API) to the more user-friendly and user-facing
Subtotal and Heading object classes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subtypeInsertions(inserts)

subtypeInsertion(insert)

subtypeInsertions(inserts)

subtypeInsertion(insert)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="subtypeInsertion_+3A_inserts">inserts</code></td>
<td>
<p>an <code>Insertions</code> object for <code>subtypeInsertions</code></p>
</td></tr>
<tr><td><code id="subtypeInsertion_+3A_insert">insert</code></td>
<td>
<p>a single <code>Insertion</code> object for <code>subtypeInsertion</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an <code>Insertions</code> object with members subtyped for <code>subtypeInsertions</code>
or a <code>Subtotal</code>, <code>Heading</code>, or <code>Insertion</code> for <code>subtypeInsertion</code>
</p>
<p>an <code>Insertions</code> object with members subtyped for <code>subtypeInsertions</code>
or a <code>Subtotal</code>, <code>Heading</code>, or <code>Insertion</code> for <code>subtypeInsertion</code>
</p>

<hr>
<h2 id='Subvariables-class'>Subvariables in Array Variables</h2><span id='topic+Subvariables-class'></span><span id='topic+Subvariables'></span><span id='topic+subvariables'></span><span id='topic+subvariables+3C-'></span><span id='topic+subvariables+2CArrayVariable-method'></span><span id='topic+subvariables+2CCrunchVariable-method'></span><span id='topic+subvariables+2CVariableTuple-method'></span><span id='topic+subvariables+3C-+2CArrayVariable+2CANY-method'></span><span id='topic+subvariables+3C-+2CArrayVariable+2CSubvariables-method'></span>

<h3>Description</h3>

<p>Multiple-response and categorical-array variables are higher order variables which
are made up of sets of subvariables. These methods allow you to retrieve and change
the subvariables of a multiple-response or categorical-array variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>subvariables(x)

subvariables(x) &lt;- value

## S4 method for signature 'ArrayVariable'
subvariables(x)

## S4 method for signature 'CrunchVariable'
subvariables(x)

## S4 method for signature 'VariableTuple'
subvariables(x)

## S4 replacement method for signature 'ArrayVariable,ANY'
subvariables(x) &lt;- value

## S4 replacement method for signature 'ArrayVariable,Subvariables'
subvariables(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Subvariables-class_+3A_x">x</code></td>
<td>
<p>A Variable or Subvariables object</p>
</td></tr>
<tr><td><code id="Subvariables-class_+3A_value">value</code></td>
<td>
<p>For the setters, the appropriate values to set</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Subvariables can be accessed from array variables (including multiple
response) with the <code>subvariables</code> method. They can be assigned back
with the <code style="white-space: pre;">&#8288;subvariables&lt;-&#8288;</code> setter, but there are limitations to what
is supported. Specifically, you can reorder subvariables, but you cannot
add or remove subvariables by <code style="white-space: pre;">&#8288;subvariables&lt;-&#8288;</code> assignment. See
<code><a href="#topic+deleteSubvariable">deleteSubvariable</a></code> to remove subvariables from an array.
</p>
<p>Subvariables have a <code>names</code> attribute that can be accessed, showing
the display names of the subvariables. These can be set with the
<code style="white-space: pre;">&#8288;names&lt;-&#8288;</code> method.
</p>
<p>Finally, subvariables can be accessed as regular (categorical) variables
with the <code>$</code> and <code>[[</code> extract methods.
</p>
<p>See the vignette on array variables for further details and examples.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+describe-catalog">describe-catalog</a></code> <code><a href="#topic+deleteSubvariable">deleteSubvariable</a></code>
<code>vignette("array-variables", package="crunch")</code>
</p>

<hr>
<h2 id='SummaryStat-class'>Summary insertions</h2><span id='topic+SummaryStat-class'></span><span id='topic+SummaryStat'></span><span id='topic+is.SummaryStat'></span><span id='topic+are.SummaryStats'></span>

<h3>Description</h3>

<p>Just like <code>subtotals()</code>s, summary statistics can
be inserted into cubes. <code>SummaryStat()</code> makes an object of type <code>SummaryStat</code>
which can be added on to a CrunchCube's <code>insertions</code> to add the specified
summary statistic. Currently only <code>mean</code> and <code>median</code> are supported; both
use weighted algorithms to go from counts and numeric values of
categories to the expected statistic. Although <code>SummaryStat</code> objects can be
made by hand, it is recommended instead to use the <code>addSummaryStat()</code>
function which is much quicker and easier to simply add a summary
statistic to an existing CrunchCube.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SummaryStat(
  name,
  stat,
  categories = NULL,
  position = c("relative", "top", "bottom"),
  after = NULL,
  before = NULL,
  includeNA = FALSE
)

SummaryStat(
  name,
  stat,
  categories = NULL,
  position = c("relative", "top", "bottom"),
  after = NULL,
  before = NULL,
  includeNA = FALSE
)

is.SummaryStat(x)

are.SummaryStats(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SummaryStat-class_+3A_name">name</code></td>
<td>
<p>character the name of the summary statistic</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_stat">stat</code></td>
<td>
<p>a function to calculate the summary (e.g. <code>mean</code> or <code>median</code>)</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_categories">categories</code></td>
<td>
<p>character or numeric the category names or ids to be
included in the summary statistic, if empty all categories</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_position">position</code></td>
<td>
<p>character one of &quot;relative&quot;, &quot;top&quot;, or &quot;bottom&quot;. Determines
the position of the subtotal or heading, either at the top, bottom, or
relative to another category in the cube (default)</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_after">after</code></td>
<td>
<p>character or numeric if <code>position</code> is &quot;relative&quot;, then the
category name or id to position the subtotal or heading after</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_before">before</code></td>
<td>
<p>character or numeric if <code>position</code> is relative (and the
insertion type allows it - currently only MR subtotals).</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_includena">includeNA</code></td>
<td>
<p>should missing categories be included in the summary?</p>
</td></tr>
<tr><td><code id="SummaryStat-class_+3A_x">x</code></td>
<td>
<p>for <code>is.SummaryStat()</code> only, an object to test if
it is a <code>SummaryStat</code> object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Summary statistics are intended only for CrunchCube objects, and are not able
to be set on Crunch variables.
</p>


<h3>Removing transforms</h3>

<p><code>noTransforms()</code> is useful if you don't want to see or use any transformations like
Subtotals and Headings. This action only applies to the CrunchCube object in
R: it doesn't actually change the variables on Crunch servers or the query
that generated the CrunchCube.
</p>

<hr>
<h2 id='tabBook'>Compute a Tab Book</h2><span id='topic+tabBook'></span>

<h3>Description</h3>

<p>This function allows you to generate a tab book from a multitable and data.
As with other functions, you can select the rows and columns you want to
work with by subsetting the <code>dataset</code> you pass into the function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tabBook(
  multitable,
  dataset,
  weight = crunch::weight(dataset),
  output_format = c("json", "xlsx", "csv"),
  file,
  filter = NULL,
  use_legacy_endpoint = envOrOption("use.legacy.tabbook.endpoint", FALSE, expect_lgl =
    TRUE),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabBook_+3A_multitable">multitable</code></td>
<td>
<p>a <code>Multitable</code> object</p>
</td></tr>
<tr><td><code id="tabBook_+3A_dataset">dataset</code></td>
<td>
<p>CrunchDataset, which may be subset with a filter expression
on the rows, and a selection of variables to use on the columns.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_weight">weight</code></td>
<td>
<p>a CrunchVariable that has been designated as a potential
weight variable for <code>dataset</code>, or <code>NULL</code> for unweighted results.
Default is the currently applied <code><a href="#topic+weight">weight</a></code>.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_output_format">output_format</code></td>
<td>
<p>character export format: currently supported values are &quot;json&quot;
(default), &quot;xlsx&quot; and &quot;csv&quot;.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_file">file</code></td>
<td>
<p>character local filename to write to. A default filename will be
generated from the <code>multitable</code>'s name if one is not supplied and the
&quot;xlsx&quot; format is requested. Not required for &quot;json&quot; format export.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_filter">filter</code></td>
<td>
<p>a Crunch <code>filter</code> object or a vector of names
of <code><a href="#topic+filters">filters</a></code> defined in the dataset.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_use_legacy_endpoint">use_legacy_endpoint</code></td>
<td>
<p>Logical, indicating whether to use a 'legacy'
endpoint for compatibility (this endpoint will be removed in the future).
Defaults to <code>FALSE</code>, but can be set in the function, or with the environment
variable <code>R_USE_LEGACY_TABBOOK_ENDPOINT</code> or R option
<code>use.legacy.tabbook.endpoint</code>.</p>
</td></tr>
<tr><td><code id="tabBook_+3A_...">...</code></td>
<td>
<p>Additional &quot;options&quot; passed to the tab book POST request.
More details can be found
<a href="https://crunch.io/api/reference/#post-/datasets/-dataset_id-/multitables/">in the crunch API documentation</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>By specifying a &quot;json&quot; <code>format</code>, instead of generating an Excel
workbook, you'll get a TabBookResult object, containing nested CrunchCube
results. You can then further format these and construct custom tab reports.
</p>


<h3>Value</h3>

<p>If &quot;json&quot; format is requested, the function returns an object of
class <code>TabBookResult</code>, containing a list of <code>MultitableResult</code>
objects, which themselves contain <code>CrunchCube</code>s. If &quot;xlsx&quot; or &quot;csv&quot;, is requested,
the function invisibly returns the filename (<code>file</code>, if specified, or the
the autogenerated file name). If you request &quot;json&quot; and wish to access the
JSON data underlying the <code>TabBookResult</code>, pass in a path for <code>file</code>
and you will get a JSON file written there as well.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Excel export
m &lt;- newMultitable(~ gender + age4 + marstat, data = ds)
tabBook(m, ds, format = "xlsx", file = "wealthy-tab-book.xlsx", filter = "wealthy")

# csv export
tabBook(
    m,
    ds[c("q5a", "q8", "q2a_1", "q2a_2")],
    output_format = "csv",
    file = "tabbook.csv",
    format = list(
        pval_colors = FALSE,
        decimal_places = list(percentages = 0L, other = 2L),
        show_empty = FALSE
    ),
    sig_threshold = 0.05,
    doc_layout = list(toc = FALSE, variable_sheets = "one_sheet"),
    fields = c(
        "col_percent", "row_percent", "count_unweighted", "mean",
        "valid_count_weighted", "valid_count_unweighted"
    ),
    page_layout = list(
        rows = list(
            top = c("base_weighted", "base_unweighted"),
            bottom = c("scale_mean", "scale_median")
        ),
        measure_layout = "long"
    )
)

# JSON export (loads into R)
book &lt;- tabBook(m, ds)
tables &lt;- prop.table(book, 2)


## End(Not run)
</code></pre>

<hr>
<h2 id='tabbook-dim'>TabBookResult and MultitableResult dimension</h2><span id='topic+tabbook-dim'></span><span id='topic+dim+2CTabBookResult-method'></span>

<h3>Description</h3>

<p>TabBookResult and MultitableResult dimension
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'TabBookResult'
dim(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tabbook-dim_+3A_x">x</code></td>
<td>
<p>a TabBookResult or MultitableResult</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns what you'd expect.
</p>

<hr>
<h2 id='table'>Table function for Crunch objects</h2><span id='topic+table'></span>

<h3>Description</h3>

<p>Table function for Crunch objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table(..., exclude, useNA = c("no", "ifany", "always"), dnn, deparse.level)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_+3A_...">...</code></td>
<td>
<p>CrunchVariables to tabulate</p>
</td></tr>
<tr><td><code id="table_+3A_exclude">exclude</code></td>
<td>
<p>see <code><a href="base.html#topic+table">base::table</a></code></p>
</td></tr>
<tr><td><code id="table_+3A_usena">useNA</code></td>
<td>
<p>see <code><a href="base.html#topic+table">base::table</a></code></p>
</td></tr>
<tr><td><code id="table_+3A_dnn">dnn</code></td>
<td>
<p>see <code><a href="base.html#topic+table">base::table</a></code></p>
</td></tr>
<tr><td><code id="table_+3A_deparse.level">deparse.level</code></td>
<td>
<p>see <code><a href="base.html#topic+table">base::table</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a table object
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+table">base::table</a></code>
</p>

<hr>
<h2 id='team'>Share Crunch assets with a team</h2><span id='topic+team'></span><span id='topic+team+2CCrunchFilter-method'></span><span id='topic+team+2CMultitable-method'></span><span id='topic+team+2CCrunchDeck-method'></span><span id='topic+team+3C-'></span><span id='topic+team+3C-+2CCrunchFilter-method'></span><span id='topic+team+3C-+2CMultitable-method'></span><span id='topic+team+3C-+2CCrunchDeck-method'></span>

<h3>Description</h3>

<p>You can share filters and multitables with a team that you are on. This will
give all team members access to view and edit these filters. Use <code>getTeams()</code>
to see what teams you are on.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>team(x)

## S4 method for signature 'CrunchFilter'
team(x)

## S4 method for signature 'Multitable'
team(x)

## S4 method for signature 'CrunchDeck'
team(x)

team(x) &lt;- value

## S4 replacement method for signature 'CrunchFilter'
team(x) &lt;- value

## S4 replacement method for signature 'Multitable'
team(x) &lt;- value

## S4 replacement method for signature 'CrunchDeck'
team(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="team_+3A_x">x</code></td>
<td>
<p>a <code>CrunchFilter</code> or <code>Multitable</code></p>
</td></tr>
<tr><td><code id="team_+3A_value">value</code></td>
<td>
<p>a <code>CrunchTeam</code> or url for a Crunch team</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>CrunchTeam</code> that the asset is shared with.
</p>

<hr>
<h2 id='temp.options'>Set some global options temporarily</h2><span id='topic+temp.options'></span><span id='topic+temp.option'></span>

<h3>Description</h3>

<p>Set some global options temporarily
</p>


<h3>Usage</h3>

<pre><code class='language-R'>temp.options(..., crunch = list())

temp.option(..., crunch = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="temp.options_+3A_...">...</code></td>
<td>
<p>named options to set using <code>options()</code></p>
</td></tr>
<tr><td><code id="temp.options_+3A_crunch">crunch</code></td>
<td>
<p>named list of options to set in crunch's higher priority
options environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an S3 class &quot;contextManager&quot; object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+with-context-manager">with-context-manager</a></code> <code><a href="#topic+ContextManager">ContextManager</a></code>
</p>

<hr>
<h2 id='titles'>Manipulate deck titles</h2><span id='topic+titles'></span><span id='topic+titles+3C-'></span><span id='topic+title'></span><span id='topic+title+3C-'></span><span id='topic+subtitles'></span><span id='topic+subtitles+3C-'></span><span id='topic+subtitle'></span><span id='topic+subtitle+3C-'></span><span id='topic+titles+2CCrunchDeck-method'></span><span id='topic+titles+3C-+2CCrunchDeck-method'></span><span id='topic+subtitles+2CCrunchDeck-method'></span><span id='topic+subtitles+3C-+2CCrunchDeck-method'></span><span id='topic+titles+2CSlideCatalog-method'></span><span id='topic+titles+3C-+2CSlideCatalog-method'></span><span id='topic+subtitles+2CSlideCatalog-method'></span><span id='topic+subtitles+3C-+2CSlideCatalog-method'></span><span id='topic+title+2CCrunchSlide-method'></span><span id='topic+title+3C-+2CCrunchSlide-method'></span><span id='topic+subtitle+2CCrunchSlide-method'></span><span id='topic+subtitle+3C-+2CCrunchSlide-method'></span>

<h3>Description</h3>

<p>Crunch slides have titles and subtitles. You can change these features at
either the deck level by assigning a character vector which is
the same length as the deck to the CrunchDeck, or by assigning character strings to the
the slide.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>titles(x)

titles(x) &lt;- value

title(x)

title(x) &lt;- value

subtitles(x, value)

subtitles(x) &lt;- value

subtitle(x, value)

subtitle(x) &lt;- value

## S4 method for signature 'CrunchDeck'
titles(x)

## S4 replacement method for signature 'CrunchDeck'
titles(x) &lt;- value

## S4 method for signature 'CrunchDeck'
subtitles(x)

## S4 replacement method for signature 'CrunchDeck'
subtitles(x) &lt;- value

## S4 method for signature 'SlideCatalog'
titles(x)

## S4 replacement method for signature 'SlideCatalog'
titles(x) &lt;- value

## S4 method for signature 'SlideCatalog'
subtitles(x)

## S4 replacement method for signature 'SlideCatalog'
subtitles(x) &lt;- value

## S4 method for signature 'CrunchSlide'
title(x)

## S4 replacement method for signature 'CrunchSlide'
title(x) &lt;- value

## S4 method for signature 'CrunchSlide'
subtitle(x)

## S4 replacement method for signature 'CrunchSlide'
subtitle(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="titles_+3A_x">x</code></td>
<td>
<p>a <code>CrunchDeck</code> or <code>CrunchSlide</code></p>
</td></tr>
<tr><td><code id="titles_+3A_value">value</code></td>
<td>
<p>character, the new title or subtitle</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>x</code>, modified
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
titles(deck)
titles(deck) &lt;- c(new_title1, new_title2)
slide &lt;- deck[[1]]
title(slide) &lt;- "new title"
subtitle(slide) &lt;- "new subtitle"
subtitles(deck)

## End(Not run)
</code></pre>

<hr>
<h2 id='tojson-crunch'>toJSON methods for Crunch objects</h2><span id='topic+tojson-crunch'></span><span id='topic+jsonprep'></span><span id='topic+jsonprep+2CAbstractCategories-method'></span><span id='topic+jsonprep+2CANY-method'></span><span id='topic+jsonprep+2CShojiOrder-method'></span><span id='topic+jsonprep+2COrderGroup-method'></span><span id='topic+toJSON'></span>

<h3>Description</h3>

<p><code>crunch</code> uses the <code>jsonlite</code> package for JSON serialization and
deserialization. Unfortunately, <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code>
does not allow for defining S4 methods for other object types. So,
<code>crunch::toJSON</code> wraps <code>jsonprep</code>, which exists to translate
objects to base R objects, which <code>jsonlite::toJSON</code> can handle.
<code>jsonprep</code> is defined as an S4 generic, and it is exported, so you can define
methods for it if you have other
objects that you want to successfully serialize to JSON.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>jsonprep(x, ...)

## S4 method for signature 'AbstractCategories'
jsonprep(x, ...)

## S4 method for signature 'ANY'
jsonprep(x, ...)

## S4 method for signature 'ShojiOrder'
jsonprep(x, ...)

## S4 method for signature 'OrderGroup'
jsonprep(x, ...)

toJSON(x, ..., for_query_string = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tojson-crunch_+3A_x">x</code></td>
<td>
<p>the object</p>
</td></tr>
<tr><td><code id="tojson-crunch_+3A_...">...</code></td>
<td>
<p>additional arguments</p>
</td></tr>
<tr><td><code id="tojson-crunch_+3A_for_query_string">for_query_string</code></td>
<td>
<p>If <code>TRUE</code>, and <code>crunch.stabilize.query</code> option
is also set to <code>TRUE</code>, then dictionary items in the JSON are
sorted alphabetically, which can be useful when capturing
mocks using &quot;httptest&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>jsonprep</code> returns a base R object that <code>jsonlite::toJSON</code>
can handle. <code>toJSON</code> returns the JSON-serialized character object.
</p>


<h3>See Also</h3>

<p><code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code>
</p>

<hr>
<h2 id='tokenAuth'>Add an auth token manually</h2><span id='topic+tokenAuth'></span>

<h3>Description</h3>

<p>Set the auth token with a token you provide. Also modify
the user-agent to include the service this is coming from.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tokenAuth(token, ua = NULL, source = "tokenAuth")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tokenAuth_+3A_token">token</code></td>
<td>
<p>character auth token</p>
</td></tr>
<tr><td><code id="tokenAuth_+3A_ua">ua</code></td>
<td>
<p>character optional string to add to the User-Agent request header</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing; called for its side effects.
</p>

<hr>
<h2 id='toVariable'>Generic method for converting objects to Crunch representations</h2><span id='topic+toVariable'></span><span id='topic+toVariable+2CCrunchVarOrExpr-method'></span><span id='topic+toVariable+2Ccharacter-method'></span><span id='topic+toVariable+2Cnumeric-method'></span><span id='topic+toVariable+2Cfactor-method'></span><span id='topic+toVariable+2CDate-method'></span><span id='topic+toVariable+2CPOSIXt-method'></span><span id='topic+toVariable+2CAsIs-method'></span><span id='topic+toVariable+2CVariableDefinition-method'></span><span id='topic+toVariable+2Clogical-method'></span><span id='topic+toVariable+2Clabelled-method'></span><span id='topic+toVariable+2Chaven_labelled-method'></span><span id='topic+toVariable+2Clabelled_spss-method'></span><span id='topic+toVariable+2Chaven_labelled_spss-method'></span>

<h3>Description</h3>

<p>R objects are converted to Crunch objects using the following rules:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>toVariable(x, ...)

## S4 method for signature 'CrunchVarOrExpr'
toVariable(x, ...)

## S4 method for signature 'character'
toVariable(x, ...)

## S4 method for signature 'numeric'
toVariable(x, ...)

## S4 method for signature 'factor'
toVariable(x, ...)

## S4 method for signature 'Date'
toVariable(x, ...)

## S4 method for signature 'POSIXt'
toVariable(x, ...)

## S4 method for signature 'AsIs'
toVariable(x, ...)

## S4 method for signature 'VariableDefinition'
toVariable(x, ...)

## S4 method for signature 'logical'
toVariable(x, ...)

## S4 method for signature 'labelled'
toVariable(x, ...)

## S4 method for signature 'haven_labelled'
toVariable(x, ...)

## S4 method for signature 'labelled_spss'
toVariable(x, ...)

## S4 method for signature 'haven_labelled_spss'
toVariable(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="toVariable_+3A_x">x</code></td>
<td>
<p>An R vector you want to turn into a Crunch variable</p>
</td></tr>
<tr><td><code id="toVariable_+3A_...">...</code></td>
<td>
<p>Additional metadata fields for the variable, such as &quot;name&quot; and
&quot;description&quot;. See the <a href="https://crunch.io/api/reference/#post-/datasets/-dataset_id-/variables/">API documentation</a>
for a complete list of valid attributes.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Character vectors are converted into Crunch text variables
</p>
</li>
<li><p> Numeric vectors are converted into Crunch numeric variables
</p>
</li>
<li><p> Factors are converted to categorical variables
</p>
</li>
<li><p> Date and POSIXt vectors are converted into Crunch datetime variables
</p>
</li>
<li><p> Logical vectors are converted to Crunch categorical variables
</p>
</li>
<li> <p><code><a href="#topic+VariableDefinition">VariableDefinition()</a></code>s are not converted, but the function can still
append additional metadata
</p>
</li></ul>

<p>If you have other object types you wish to convert to Crunch variables,
you can declare methods for <code>toVariable</code>.
</p>


<h3>Value</h3>

<p>A <code>VariableDefinition</code> object. To add this to a dataset, either
assign it into the dataset (like <code>ds$newvar &lt;- toVariable(...)</code>) or call
<code><a href="#topic+addVariables">addVariables()</a></code>. If you're adding a column of data to a dataset, it must be
as long as the number of rows in the dataset, or it may be a single value to
be recycled for all rows.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+VariableDefinition">VariableDefinition()</a></code> <code><a href="#topic+addVariables">addVariables()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>var1 &lt;- rnorm(10)
toVariable(var1)
toVariable(var1, name = "Random", description = "Generated in R")
## Not run: 
ds$random &lt;- toVariable(var1, name = "Random")
# Or, this way:
ds &lt;- addVariables(ds, toVariable(var1, name = "Random"))

## End(Not run)
</code></pre>

<hr>
<h2 id='Transforms-class'>Transformations of variable and cube views</h2><span id='topic+Transforms-class'></span><span id='topic+Transforms'></span><span id='topic+TransformsList-class'></span><span id='topic+TransformsList'></span><span id='topic+transforms'></span><span id='topic+transforms+3C-'></span><span id='topic+transforms+2CCrunchVariable-method'></span><span id='topic+transforms+2CVariableTuple-method'></span><span id='topic+transforms+3C-+2CCrunchVariable+2CTransforms-method'></span><span id='topic+transforms+3C-+2CCrunchVariable+2CNULL-method'></span><span id='topic+transforms+2CCrunchCube-method'></span><span id='topic+transforms+2CVariableCatalog-method'></span><span id='topic+transforms+3C-+2CCrunchCube+2CANY-method'></span><span id='topic+transforms+3C-+2CCrunchCube+2CTransformsList-method'></span><span id='topic+transforms+3C-+2CCrunchCube+2CNULL-method'></span>

<h3>Description</h3>

<p>Transformations allow you to change how a variable or cube is displayed
without changing the underlying data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Transforms(..., data = NULL)

TransformsList(..., data = NULL)

transforms(x)

transforms(x) &lt;- value

## S4 method for signature 'CrunchVariable'
transforms(x)

## S4 method for signature 'VariableTuple'
transforms(x)

## S4 replacement method for signature 'CrunchVariable,Transforms'
transforms(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,'NULL''
transforms(x) &lt;- value

## S4 method for signature 'CrunchCube'
transforms(x)

## S4 method for signature 'VariableCatalog'
transforms(x)

## S4 replacement method for signature 'CrunchCube,ANY'
transforms(x) &lt;- value

## S4 replacement method for signature 'CrunchCube,TransformsList'
transforms(x) &lt;- value

## S4 replacement method for signature 'CrunchCube,'NULL''
transforms(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Transforms-class_+3A_...">...</code></td>
<td>
<p>For the constructor function <code>Transforms</code> you can pass
in attributes via <code>...</code></p>
</td></tr>
<tr><td><code id="Transforms-class_+3A_data">data</code></td>
<td>
<p>For the constructor function <code>Transforms</code> you can either pass in
attributes via <code>...</code> or you can create the objects with a fully defined
<code>list</code> representation of the objects via the <code>data</code> argument. See the examples.</p>
</td></tr>
<tr><td><code id="Transforms-class_+3A_x">x</code></td>
<td>
<p>For the attribute getters and setters, an object of class
Transforms</p>
</td></tr>
<tr><td><code id="Transforms-class_+3A_value">value</code></td>
<td>
<p>For the setter, the replacement Transforms to insert</p>
</td></tr>
</table>


<h3>Getting transformations</h3>

<p>The <code>transforms(x)</code> methods can be used with Variables and CrunchCubes to get
what transformations are currently set. For variables, they return a single
<code>Transforms</code> object that includes all transformations for the variable. For
CrunchCubes, it returns a named list with the same length as the number of
dimensions of the cube with each dimension's transformations.
</p>
<p>Currently, <a href="#topic+Insertions">Insertions</a> (e.g. <a href="#topic+SubtotalsHeadings">Subtotal()</a> and
<a href="#topic+SubtotalsHeadings">Heading()</a>) are the only type of transformations that are
supported.
</p>


<h3>Setting transformations on a variable</h3>

<p>The <code>transforms(x) &lt;- value</code> methods can be used to assign transformations
for a specific variable. <code>value</code>
must be a <code>Transforms</code> object. This allows you to set transformations on
categorical variables. These transformations will automatically show up in
any new CrunchCubes that contain this variable.
</p>


<h3>Setting transformations on a CrunchCube</h3>

<p>The <code>transforms(x) &lt;- value</code> methods can also be used to assign
transformations to a CrunchCube that has already been calculated. <code>value</code>
must be a named list of <code>Transforms</code> objects. The names of this list must
correspond to dimensions in the cube (those dimensions correspondences are
matched based on variable aliases). You don't have to provide an entry for
each dimension, but any dimension you do provide will be overwritten fully.
</p>


<h3>Removing transformations</h3>

<p>To remove transformations from a variable or CrunchCube, use
<code>transforms(x) &lt;- NULL</code>.
</p>

<hr>
<h2 id='translateCubeIndex'>Translate user facing cube subset to programmatic cube subset</h2><span id='topic+translateCubeIndex'></span>

<h3>Description</h3>

<p>Cubes that include multiple response variables create a special kind of
complexity. Multiple response variables are actually 2d arrays with the
responses along one dimension (<code>cat</code>, <code>dog</code>, <code>fish</code>) and the selection
status along the second dimension (<code>selected</code>, <code>not_selected</code>). When an MR
variable is crossed with a categorical variable it creates a 3d array with
the categorical variable's categories along one dimension and the MR
dimensions on the other two.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translateCubeIndex(x, subset, drop)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="translateCubeIndex_+3A_x">x</code></td>
<td>
<p>a Crunch Cube</p>
</td></tr>
<tr><td><code id="translateCubeIndex_+3A_subset">subset</code></td>
<td>
<p>a list of array extent indices (for the user-cube)</p>
</td></tr>
<tr><td><code id="translateCubeIndex_+3A_drop">drop</code></td>
<td>
<p>whether to drop unnecessary dimensions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The complexity is that while the real MR cube includes two dimensions per MR,
we only show the user one dimension per MR which represents only the
<code>selected</code> items. This means that every cube has two different
representations, the low dimensional user cube, and the higher dimensional
real cube. This function translates user cube subsets into the higher
dimensional subset. In the case above, the user would see a 2d cube and
subset it with <code>user_cube[1:2, 1:2]</code> in order to subset the programmatic cube
we need to translate this to <code>prog_cube[1:2, 1:2, ]</code> in order to select the
right variables of the high dimensional cube.
</p>


<h3>Value</h3>

<p>a list of array extent indices (for the real-cube)
</p>

<hr>
<h2 id='translateHidden'>Translate provided index to an index which accounts for hidden categories.</h2><span id='topic+translateHidden'></span>

<h3>Description</h3>

<p>When the user subsets a cube in which &quot;useNA&quot; is either &quot;no&quot; or &quot;ifAny&quot; they
are not interacting with hidden categories. This function takes the index which
they provide and translates it to an index which includes hidden categories.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>translateHidden(index, not_hidden, drop = TRUE, vis = not_hidden)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="translateHidden_+3A_index">index</code></td>
<td>
<p>The index to be translated</p>
</td></tr>
<tr><td><code id="translateHidden_+3A_not_hidden">not_hidden</code></td>
<td>
<p>Logical, <code>TRUE</code> indicates a category is not hidden.</p>
</td></tr>
<tr><td><code id="translateHidden_+3A_drop">drop</code></td>
<td>
<p>Should dimensions with a single category be dropped</p>
</td></tr>
<tr><td><code id="translateHidden_+3A_vis">vis</code></td>
<td>
<p>Logical, is a category visible or not. Because of the <code>useNA</code> behavior,
categories can be visible even if they are hidden.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For example, if <code>v</code> includes c(&quot;cat1&quot;, &quot;hidden_cat&quot;, &quot;cat2&quot;) and <code>useNA</code> is
&quot;no&quot;. The user will see <code>v</code> as c(&quot;cat1&quot;, &quot;cat2&quot;) and might subset it with
<code>v[c(2,1)]</code>. We need to skip over the hidden category and change the index
to account for any hidden categories which might appear in the vector. Here
the translated index would be <code style="white-space: pre;">&#8288;c(3,1&#8288;</code>. This function does all of that.
</p>


<h3>Value</h3>

<p>The translated index
</p>

<hr>
<h2 id='type'>Change Crunch variable types</h2><span id='topic+type'></span><span id='topic+type+3C-'></span><span id='topic+type+2CCrunchVariable-method'></span><span id='topic+type+2CVariableEntity-method'></span><span id='topic+type+3C-+2CCrunchVariable-method'></span>

<h3>Description</h3>

<p>Numeric, text, and categorical variables can be cast to one another by
assigning them a new &quot;type&quot;. This modifies the storage of the data on the
server and should only be done in narrow circumstances, as in when importing
data from a different file format has resulted in incorrect types being
specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>type(x)

type(x) &lt;- value

## S4 method for signature 'CrunchVariable'
type(x)

## S4 method for signature 'VariableEntity'
type(x)

## S4 replacement method for signature 'CrunchVariable'
type(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="type_+3A_x">x</code></td>
<td>
<p>a Variable</p>
</td></tr>
<tr><td><code id="type_+3A_value">value</code></td>
<td>
<p>For the setter, a character value in c(&quot;numeric&quot;, &quot;text&quot;,
&quot;categorical&quot;)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Getter returns character; setter returns <code>x</code> duly modified.
</p>

<hr>
<h2 id='unbind'>Split an array or multiple-response variable into its CategoricalVariables</h2><span id='topic+unbind'></span>

<h3>Description</h3>

<p>Split an array or multiple-response variable into its CategoricalVariables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unbind(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unbind_+3A_x">x</code></td>
<td>
<p>an <code>ArrayVariable</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>invisibly, the API response from DELETEing the array variable
definition. If you <code><a href="#topic+refresh">refresh()</a></code> the corresponding dataset after
unbinding, you should see the array variable removed and its subvariables
promoted to regular variables.
</p>

<hr>
<h2 id='unshare'>Revoke a user's access to a dataset</h2><span id='topic+unshare'></span>

<h3>Description</h3>

<p>Revoke a user's access to a dataset
</p>


<h3>Usage</h3>

<pre><code class='language-R'>unshare(dataset, users)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="unshare_+3A_dataset">dataset</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="unshare_+3A_users">users</code></td>
<td>
<p>character: email address(es) or URLs of the users or teams to
unshare with.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, the dataset.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+share">share</a></code>
</p>

<hr>
<h2 id='urls+2CShojiCatalog-method'>Get the URLs contained in a Catalog or Order object</h2><span id='topic+urls+2CShojiCatalog-method'></span><span id='topic+urls'></span><span id='topic+urls+2Clist-method'></span><span id='topic+urls+2Ccharacter-method'></span><span id='topic+urls+2CShojiOrder-method'></span><span id='topic+urls+2COrderGroup-method'></span><span id='topic+urls+2CCrunchVariable-method'></span><span id='topic+urls+2CCrunchDataset-method'></span>

<h3>Description</h3>

<p>Sometimes it is useful to extract flattened vector of URLs from more
complex objects for purposes like subsetting or doing set comparisons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'ShojiCatalog'
urls(x)

## S4 method for signature 'list'
urls(x)

## S4 method for signature 'character'
urls(x)

## S4 method for signature 'ShojiOrder'
urls(x)

## S4 method for signature 'OrderGroup'
urls(x)

## S4 method for signature 'CrunchVariable'
urls(x)

## S4 method for signature 'CrunchDataset'
urls(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="urls+2B2CShojiCatalog-method_+3A_x">x</code></td>
<td>
<p>a Catalog, Order, or Group object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of URLs
</p>

<hr>
<h2 id='users'>Get information about users who have access to a dataset</h2><span id='topic+users'></span><span id='topic+users+2CCrunchDataset-method'></span><span id='topic+users+2CDatasetTuple-method'></span><span id='topic+users+2CProjectFolder-method'></span>

<h3>Description</h3>

<p>Get user metadata about all of the users that have access to a particular
Crunch object like a dataset or project. Returns a <code>UserCatalog</code> object which
can be translated into a data.frame with <code><a href="#topic+catalogToDataFrame">catalogToDataFrame()</a></code> if information
needs to be extracted, queried, transformed, etc.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>users(x)

## S4 method for signature 'CrunchDataset'
users(x)

## S4 method for signature 'DatasetTuple'
users(x)

## S4 method for signature 'ProjectFolder'
users(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="users_+3A_x">x</code></td>
<td>
<p>a <code>CrunchDataset</code>, <code>DatasetTuple</code>, or <code>ProjectFolder</code> object to get
users from</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>UserCatalog</code> with information about users who have access to the
dataset
</p>

<hr>
<h2 id='validateNamesInDims'>error iff the names are not a dimension in the cube provided</h2><span id='topic+validateNamesInDims'></span>

<h3>Description</h3>

<p>error iff the names are not a dimension in the cube provided
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validateNamesInDims(names, cube, what = "transforms")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validateNamesInDims_+3A_names">names</code></td>
<td>
<p>the names to check for in the cube</p>
</td></tr>
<tr><td><code id="validateNamesInDims_+3A_cube">cube</code></td>
<td>
<p>a CrunchCube object to check</p>
</td></tr>
<tr><td><code id="validateNamesInDims_+3A_what">what</code></td>
<td>
<p>a character describing what is being checked (default: transforms
) to include in the error to make it easier for users to see what is failing.</p>
</td></tr>
</table>

<hr>
<h2 id='var-categories'>Get and set Categories on Variables</h2><span id='topic+var-categories'></span><span id='topic+categories'></span><span id='topic+categories+3C-'></span><span id='topic+categories+2CVariableTuple-method'></span><span id='topic+categories+2CCrunchVariable-method'></span><span id='topic+categories+2CCategoricalVariable-method'></span><span id='topic+categories+2CCategoricalArrayVariable-method'></span><span id='topic+categories+2CVariableEntity-method'></span><span id='topic+categories+3C-+2CCategoricalVariable+2CCategories-method'></span><span id='topic+categories+3C-+2CCategoricalArrayVariable+2CCategories-method'></span><span id='topic+categories+3C-+2CCategoricalVariable+2Cnumeric-method'></span><span id='topic+categories+3C-+2CCategoricalVariable+2Ccharacter-method'></span><span id='topic+categories+3C-+2CCategoricalVariable+2CANY-method'></span><span id='topic+categories+3C-+2CCategoricalArrayVariable+2Cnumeric-method'></span><span id='topic+categories+3C-+2CCategoricalArrayVariable+2Ccharacter-method'></span><span id='topic+categories+3C-+2CCategoricalArrayVariable+2CANY-method'></span><span id='topic+categories+3C-+2CCrunchVariable+2CANY-method'></span>

<h3>Description</h3>

<p>Get and set Categories on Variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>categories(x)

categories(x) &lt;- value

## S4 method for signature 'VariableTuple'
categories(x)

## S4 method for signature 'CrunchVariable'
categories(x)

## S4 method for signature 'CategoricalVariable'
categories(x)

## S4 method for signature 'CategoricalArrayVariable'
categories(x)

## S4 method for signature 'VariableEntity'
categories(x)

## S4 replacement method for signature 'CategoricalVariable,Categories'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,Categories'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalVariable,numeric'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalVariable,character'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalVariable,ANY'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,numeric'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,character'
categories(x) &lt;- value

## S4 replacement method for signature 'CategoricalArrayVariable,ANY'
categories(x) &lt;- value

## S4 replacement method for signature 'CrunchVariable,ANY'
categories(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="var-categories_+3A_x">x</code></td>
<td>
<p>a Variable</p>
</td></tr>
<tr><td><code id="var-categories_+3A_value">value</code></td>
<td>
<p>for the setters, an object of class Categories to set.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Getters return Categories; setters return <code>x</code> duly modified.
</p>

<hr>
<h2 id='VariableCatalog-class'>Collection of Variables within a Dataset</h2><span id='topic+VariableCatalog-class'></span><span id='topic+VariableCatalog'></span>

<h3>Description</h3>

<p>A VariableCatalog contains references to all variables in a dataset, plus
some descriptive metadata about each. Each VariableCatalog also contains a
<code><a href="#topic+VariableOrder">VariableOrder</a></code> that governs how variables within it are
organized.
</p>

<hr>
<h2 id='VariableDefinition'>Construct a variable definition</h2><span id='topic+VariableDefinition'></span><span id='topic+VarDef'></span>

<h3>Description</h3>

<p>Crunch variables are created by posting a <code>VariableDefinition</code> to the Crunch server.
The <code>VariableDefinition</code> contains the information the server requires to
calculate the variable. This can information can either be in the form
of the actual data which you would like to include in the variable, or a derivation
which tells the server how to derive the new variable from existing ones.
This function converts an R vector or set of attributes into a variable definition which
can be posted to the server.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>VariableDefinition(data, ...)

VarDef(data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="VariableDefinition_+3A_data">data</code></td>
<td>
<p>an R vector of data to convert to the Crunch payload format.
See <a href="#topic+toVariable">toVariable</a> for how R data types are converted. This function can
also be used to construct a <code>VariableDefinition</code> directly by passing
attributes to <code>...</code>. This is only recommended for advanced users who are
familiar with the Crunch API.</p>
</td></tr>
<tr><td><code id="VariableDefinition_+3A_...">...</code></td>
<td>
<p>additional attributes to be included in the <code>VariableDefinition</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>VariableDefinition</code> object, ready to POST to Crunch.
</p>


<h3>See Also</h3>

<p><code>toVariable</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>VariableDefinition(rnorm(5),
    name = "Some numbers",
    description = "Generated pseudorandomly from the normal distribution"
)
VarDef(
    name = "Integers", values = 1:5, type = "numeric",
    description = "When creating variable definitions with 'values', you must
    specify 'type', and categorical variables will require 'categories'."
)
</code></pre>

<hr>
<h2 id='variableMetadata'>Get all variable metadata for a dataset</h2><span id='topic+variableMetadata'></span>

<h3>Description</h3>

<p>Crunch stores variable information in several catalogs containing information
abut the variable class, its missingness and subvariables. This function allows you
to access that information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variableMetadata(dataset)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variableMetadata_+3A_dataset">dataset</code></td>
<td>
<p>CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A VariableCatalog with all variable properties, including categories
and subvariables.
</p>

<hr>
<h2 id='VariableOrder-class'>Organize Variables within a Dataset</h2><span id='topic+VariableOrder-class'></span><span id='topic+VariableOrder'></span><span id='topic+VariableGroup-class'></span><span id='topic+VariableGroup'></span>

<h3>Description</h3>

<p>Variables in the Crunch web application can be viewed in an ordered,
hierarchical list. These objects and methods allow you to modify that order
from R.
</p>


<h3>Details</h3>

<p>A VariableOrder object is a subclass of <code>list</code> that contains
VariableGroups. VariableGroup objects contain a group name and an set of
&quot;entities&quot;, which can be variable references or other nested VariableGroups.
</p>


<h3>Slots</h3>


<dl>
<dt><code>group</code></dt><dd><p>character, the name of the VariableGroup. In the constructor and
more generally, this field can be referenced as &quot;name&quot; as well.</p>
</dd>
<dt><code>entities</code></dt><dd><p>a character vector of variable URLs, or a list containing a
combination of variable URLs and VariableGroup objects.</p>
</dd>
<dt><code>duplicates</code></dt><dd><p>logical: should duplicate variable references be allowed in
this object? Deprecated field: duplicates are never allowed.</p>
</dd>
<dt><code>vars</code></dt><dd><p>either <code>NULL</code> or a <code><a href="#topic+VariableCatalog">VariableCatalog()</a></code>. If not
<code>NULL</code>, it will be used to look up variable names from the URLs.</p>
</dd>
</dl>

<hr>
<h2 id='variables'>Access a catalog of variables</h2><span id='topic+variables'></span><span id='topic+dataset-variables'></span><span id='topic+variables+3C-'></span><span id='topic+allVariables'></span><span id='topic+allVariables+3C-'></span><span id='topic+variables+2CCubeDims-method'></span><span id='topic+variables+2CCrunchCube-method'></span><span id='topic+variables+2CCrunchDataset-method'></span><span id='topic+variables+3C-+2CCrunchDataset+2CVariableCatalog-method'></span><span id='topic+allVariables+2CCrunchDataset-method'></span><span id='topic+allVariables+3C-+2CCrunchDataset+2CVariableCatalog-method'></span><span id='topic+variables+2CSearchResults-method'></span><span id='topic+variables+2CVariableFolder-method'></span>

<h3>Description</h3>

<p>Datasets contain collections of variables. For some purposes, such as
editing variables' metadata, it is helpful to access these variable catalogs
more directly. Other objects, such as cubes and folders, also define
<code>variables()</code> methods that expose variable metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variables(x)

variables(x) &lt;- value

allVariables(x)

allVariables(x) &lt;- value

## S4 method for signature 'CubeDims'
variables(x)

## S4 method for signature 'CrunchCube'
variables(x)

## S4 method for signature 'CrunchDataset'
variables(x)

## S4 replacement method for signature 'CrunchDataset,VariableCatalog'
variables(x) &lt;- value

## S4 method for signature 'CrunchDataset'
allVariables(x)

## S4 replacement method for signature 'CrunchDataset,VariableCatalog'
allVariables(x) &lt;- value

## S4 method for signature 'SearchResults'
variables(x)

## S4 method for signature 'VariableFolder'
variables(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="variables_+3A_x">x</code></td>
<td>
<p>a Dataset</p>
</td></tr>
<tr><td><code id="variables_+3A_value">value</code></td>
<td>
<p>For the setters, a VariableCatalog to assign.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For datasets, <code>variables()</code> returns only the active variables in the dataset,
while <code>allVariables()</code> returns all variables, including hidden variables.
<code>allVariables()</code> is not defined for other objects.
</p>


<h3>Value</h3>

<p>All methods return a <code>VariableCatalog</code> except the <code>VariableFolder</code>
method, which returns a subset of <code>x</code> containing only variable references.
Assignment functions return <code>x</code> with the changes made.
</p>

<hr>
<h2 id='versions'>Access the saved versions of a dataset</h2><span id='topic+versions'></span>

<h3>Description</h3>

<p>This function allows you to see a dataset's savepoints. These can then
be passed to <code><a href="#topic+restoreVersion">restoreVersion()</a></code> to load the previously saved version of a dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>versions(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="versions_+3A_x">x</code></td>
<td>
<p>a <code>CrunchDataset</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>VersionCatalog</code>. Supported methods on the
catalog include &quot;names&quot; and &quot;timestamps&quot;.
</p>


<h3>See Also</h3>

<p><a href="#topic+saveVersion">saveVersion</a> <a href="#topic+restoreVersion">restoreVersion</a>
</p>

<hr>
<h2 id='webApp'>View a Crunch Object in the Web Application</h2><span id='topic+webApp'></span>

<h3>Description</h3>

<p>Convenience function that will use your system's &quot;open&quot; command to open
a Crunch object in our web application in your default browser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>webApp(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="webApp_+3A_x">x</code></td>
<td>
<p>a Crunch Dataset or Variable</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing; called for side effect of opening your web browser.
</p>

<hr>
<h2 id='weightVariables'>Get a dataset's weightVariables</h2><span id='topic+weightVariables'></span><span id='topic+weightVariables+2CCrunchDataset-method'></span><span id='topic+weightVariables+2CVariableCatalog-method'></span>

<h3>Description</h3>

<p>Get a dataset's weightVariables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weightVariables(x)

## S4 method for signature 'CrunchDataset'
weightVariables(x)

## S4 method for signature 'VariableCatalog'
weightVariables(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weightVariables_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>weightVariables</code> returns a character vector of the aliases of the
variables that are eligible to be used as weights.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+weight">weight()</a></code> <code><a href="#topic+makeWeight">makeWeight()</a></code> <code><a href="#topic+modifyWeightVariables">modifyWeightVariables()</a></code>
</p>

<hr>
<h2 id='weightVariables+26lt+3B-'>Change which variables can be set as a dataset's weight.</h2><span id='topic+weightVariables+3C-'></span><span id='topic+is.weightVariable+3C-'></span><span id='topic+modifyWeightVariables'></span><span id='topic+weightVariables+3C-+2CCrunchDataset-method'></span><span id='topic+is.weightVariable'></span><span id='topic+is.weightVariable+3C-+2CNumericVariable-method'></span>

<h3>Description</h3>

<p><code>modifyWeightVariables</code> allows you to change the variables which are eligible
to be used as a dataset's weight. You can also add variables to the weight variables
catalog by assignment with <code>weightVariables(ds) &lt;- "weight"</code> or
<code>is.weightVariable(ds$weight) &lt;- TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>weightVariables(x) &lt;- value

is.weightVariable(x) &lt;- value

modifyWeightVariables(x, vars, type = "append")

## S4 replacement method for signature 'CrunchDataset'
weightVariables(x) &lt;- value

is.weightVariable(x)

## S4 replacement method for signature 'NumericVariable'
is.weightVariable(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="weightVariables+2B26lt+2B3B-_+3A_x">x</code></td>
<td>
<p>a CrunchDataset</p>
</td></tr>
<tr><td><code id="weightVariables+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>For the <code>weightVariables()</code> and <code>is.weightVariable</code> setters the
variables to append to a dataset's weightVariables.</p>
</td></tr>
<tr><td><code id="weightVariables+2B26lt+2B3B-_+3A_vars">vars</code></td>
<td>
<p>Variables to add or remove  this can be a numeric Crunch variable,
list of numeric Crunch variables or a character vector with the aliases of
numeric Crunch variables. Setting vars to <code>NULL</code> clears a datasets <code>weightVariables</code></p>
</td></tr>
<tr><td><code id="weightVariables+2B26lt+2B3B-_+3A_type">type</code></td>
<td>
<p>a character string determining how the weightVariables
will be modified:
</p>

<ul>
<li> <p><code>"append"</code> : add <code>vars</code> to the current weight variables
</p>
</li>
<li> <p><code>"remove"</code> : remove <code>vars</code> from the current list of weight variables
</p>
</li>
<li> <p><code>"replace"</code>: replace the current weight variables with <code>vars</code>
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Editors can change which variables can be set as the weighting variable
for a dataset. For instance if several weights have been calculated they
can let the user choose which of those variables to use a weight, but prevent
the user from choosing other variables as weight. This function allows you
to change the <code>weightVariables</code> of a dataset.
</p>


<h3>Value</h3>

<p>a CrunchDataset
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
modifyweightVariables(ds, "weight", "append")
weightVariables(ds) &lt;- list(ds$weight, ds$weight2)
weightVariables(ds) &lt;- NULL
weightVariables(ds) &lt;- c("weight", "weight2")
is.weightVariables(ds$weight) &lt;- TRUE

## End(Not run)
</code></pre>

<hr>
<h2 id='which'>&quot;which&quot; method for CrunchLogicalExpr</h2><span id='topic+which'></span><span id='topic+which+2CCrunchLogicalExpr-method'></span>

<h3>Description</h3>

<p>&quot;which&quot; method for CrunchLogicalExpr
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'CrunchLogicalExpr'
which(x, arr.ind = FALSE, useNames = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="which_+3A_x">x</code></td>
<td>
<p>CrunchLogicalExpr</p>
</td></tr>
<tr><td><code id="which_+3A_arr.ind">arr.ind</code></td>
<td>
<p>Ignored</p>
</td></tr>
<tr><td><code id="which_+3A_usenames">useNames</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Integer row indices where <code>x</code> is true. Note that this does not
return a Crunch expression. Use this when you need to translate to R values.
For filtering a Crunch expression by <code>x</code>, don't use <code>which</code>.
</p>

<hr>
<h2 id='with-context-manager'>Context manager's &quot;with&quot; method</h2><span id='topic+with-context-manager'></span><span id='topic+with.contextManager'></span>

<h3>Description</h3>

<p>Context manager's &quot;with&quot; method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'contextManager'
with(data, expr, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="with-context-manager_+3A_data">data</code></td>
<td>
<p><code><a href="#topic+contextManager">contextManager</a></code></p>
</td></tr>
<tr><td><code id="with-context-manager_+3A_expr">expr</code></td>
<td>
<p>code to evaluate within that context</p>
</td></tr>
<tr><td><code id="with-context-manager_+3A_...">...</code></td>
<td>
<p>additional arguments. One additional supported argument is &quot;as&quot;,
which lets you assign the return of your &quot;enter&quot; function to an object you
can access.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ContextManager">ContextManager</a></code>
</p>

<hr>
<h2 id='write.csv.gz'>Write CSV to a compressed file</h2><span id='topic+write.csv.gz'></span>

<h3>Description</h3>

<p>Write CSV to a compressed file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.csv.gz(x, file, na = "", row.names = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write.csv.gz_+3A_x">x</code></td>
<td>
<p>A data.frame or similar CSV-writable object</p>
</td></tr>
<tr><td><code id="write.csv.gz_+3A_file">file</code></td>
<td>
<p>character destination to write the gzipped CSV to</p>
</td></tr>
<tr><td><code id="write.csv.gz_+3A_na">na</code></td>
<td>
<p>See <code><a href="utils.html#topic+write.table">utils::write.csv()</a></code>. This just changes
the default to a Crunch-friendly empty string.</p>
</td></tr>
<tr><td><code id="write.csv.gz_+3A_row.names">row.names</code></td>
<td>
<p>logical: write out row names? See
<code><a href="utils.html#topic+write.table">utils::write.csv()</a></code>.</p>
</td></tr>
<tr><td><code id="write.csv.gz_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>write.csv</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A csv file written to dist
</p>

<hr>
<h2 id='writePreparedData'>Persist to disk a prepared data.frame and metadata</h2><span id='topic+writePreparedData'></span>

<h3>Description</h3>

<p>Persist to disk a prepared data.frame and metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writePreparedData(data, metadata = attr(data, "metadata"), file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writePreparedData_+3A_data">data</code></td>
<td>
<p>a data.frame that meets the Crunch API specification, as returned
by <code><a href="#topic+prepareDataForCrunch">prepareDataForCrunch()</a></code>.</p>
</td></tr>
<tr><td><code id="writePreparedData_+3A_metadata">metadata</code></td>
<td>
<p>list of Crunch metadata that corresponds to <code>data</code>.
Default is the &quot;metadata&quot; attribute of <code>data</code>, as returned by
<code><a href="#topic+prepareDataForCrunch">prepareDataForCrunch()</a></code>.</p>
</td></tr>
<tr><td><code id="writePreparedData_+3A_file">file</code></td>
<td>
<p>character file path, without extension, to write to.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of length 2: given a value of
<code>file="example"</code>, it would return c(&quot;example.csv.gz&quot;, &quot;example.json&quot;).
The function, of course, is called for its side effects of writing a gzipped
CSV and a JSON file to those locations.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
