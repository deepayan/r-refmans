<!DOCTYPE html><html lang="en"><head><title>Help for package aMNLFA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {aMNLFA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aMNLFA.DIFplot'><p>aMNLFA plotting function for aMNLFA.prune() results</p></a></li>
<li><a href='#aMNLFA.final'><p>aMNLFA simultaneous model fitting function</p></a></li>
<li><a href='#aMNLFA.initial'><p>aMNLFA initial model fitting function</p></a></li>
<li><a href='#aMNLFA.itemplots'><p>aMNLFA item plotting function</p></a></li>
<li><a href='#aMNLFA.object'><p>aMNLFA object function</p></a></li>
<li><a href='#aMNLFA.prune'><p>aMNLFA simultaneous model fitting function</p></a></li>
<li><a href='#aMNLFA.sample'><p>aMNLFA sampling function</p></a></li>
<li><a href='#aMNLFA.scores'><p>aMNLFA score generating function</p></a></li>
<li><a href='#aMNLFA.simultaneous'><p>aMNLFA simultaneous model fitting function</p></a></li>
<li><a href='#fixPath'><p>helper function - removes the final slash at the end of a given string</p></a></li>
<li><a href='#write.inp.file'><p>helper function for writing out Mplus inputs</p></a></li>
<li><a href='#xstudy'><p>Simulated cross-study data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Automated Moderated Nonlinear Factor Analysis Using 'M-plus'</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Automated generation, running, and interpretation of moderated nonlinear factor analysis models for obtaining scores from observed variables, using the method described by Gottfredson and colleagues (2019) &lt;<a href="https://doi.org/10.1016%2Fj.addbeh.2018.10.031">doi:10.1016/j.addbeh.2018.10.031</a>&gt;. This package creates M-plus input files which may be run iteratively to test two different types of covariate effects on items: (1) latent variable impact (both mean and variance); and (2) differential  item functioning. After sequentially testing for all effects, it also creates a final model by including all significant effects after adjusting for multiple comparisons. Finally, the package creates a scoring model which uses the final values of parameter estimates to generate latent variable scores. \n\n This package generates TEMPLATES for M-plus inputs, which can and should be inspected, altered, and run by the user. In addition to being presented without warranty of any kind, the package is provided under the assumption that everyone who uses it is reading, interpreting, understanding, and altering every M-plus input and output file. There is no one right way to implement moderated nonlinear factor analysis, and this package exists solely to save users time as they generate M-plus syntax according to their own judgment.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0), utils</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, graphics, stats, ggplot2, MplusAutomation,
reshape2, gridExtra, stringr, plyr, devtools, dplyr, stringi</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-01-13 22:54:48 UTC; colev</td>
</tr>
<tr>
<td>Author:</td>
<td>Veronica Cole [aut, cre],
  Nisha Gottfredson [aut],
  Michael Giordano [aut],
  Isabella Stallworthy [aut],
  Meriah DeJoseph [aut],
  Robin Sifre [aut],
  Tim Janssen [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Veronica Cole &lt;colev@wfu.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-02-13 18:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='aMNLFA.DIFplot'>aMNLFA plotting function for aMNLFA.prune() results</h2><span id='topic+aMNLFA.DIFplot'></span>

<h3>Description</h3>

<p>This function gives the user a plot corresponding to loading, intercept, or threshold DIF from the aMNLFA.prune() function
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.DIFplot(diflist, diftype, log = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.DIFplot_+3A_diflist">diflist</code></td>
<td>
<p>The listing of results from aMNLFA.prune(), which contains the DIF tables (as well as impact tables, which aren't used here)</p>
</td></tr>
<tr><td><code id="aMNLFA.DIFplot_+3A_diftype">diftype</code></td>
<td>
<p>The type of DIF the user wants plot for. Options include &quot;loading&quot; (for loading DIF), &quot;intercept&quot; (for intercept DIF when threshold DIF is not tested), &quot;threshold.highest&quot; (which uses only the largest test statistic across all categories when threshold DIF is tested), and &quot;threshold.all&quot; (which uses the test statistic for all categories when threshold DIF is tested)</p>
</td></tr>
<tr><td><code id="aMNLFA.DIFplot_+3A_log">log</code></td>
<td>
<p>Logical. If TRUE, plot the y axis on a log scale. Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value; generates a plot using base R.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/extdata")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
   
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 prune.object &lt;- aMNLFA.prune(ob)
 aMNLFA.DIFplot(prune.object, "loading", log = FALSE)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.final'>aMNLFA simultaneous model fitting function</h2><span id='topic+aMNLFA.final'></span>

<h3>Description</h3>

<p>This function generates the simultaneous aMNLFA model from all the initial inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.final(
  input.object,
  mchoice = "actual",
  method = "BH",
  highest.category = TRUE,
  keepmean = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.final_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
<tr><td><code id="aMNLFA.final_+3A_mchoice">mchoice</code></td>
<td>
<p>String representing the method of determining the number of tests, denoted m. Options include &quot;actual&quot;, which uses the number of effects actually tested in the round 2 model as m, and &quot;ibc&quot;, which uses the maximum number of all possible tests &ndash; i.e., the number of items times the number of covariates. Defaults to &quot;actual&quot;.</p>
</td></tr>
<tr><td><code id="aMNLFA.final_+3A_method">method</code></td>
<td>
<p>String representing the method of adjusting for multiple comparisons. Options include &quot;bh&quot;, which invokes Benjamini-Hochberg correction with m defined using the mchoice parameter, and &quot;bonferroni&quot;, which invokes a Bonferroni correction with m defined using the mchoice parameter.  Defaults to &quot;bh&quot;.</p>
</td></tr>
<tr><td><code id="aMNLFA.final_+3A_highest.category">highest.category</code></td>
<td>
<p>Boolean. If threshold DIF is tested, should only the category with the highest value of the test statistic be used when adjusting p. values? Defaults to TRUE, which corresponds to the results from &quot;threshold.highest&quot; in the aMNLFA.prune() step. If FALSE, all threshold effects will be considered, even those below the maximum value for a given item, which corresponds to the &quot;thresholds.all&quot; option in the aMNLFA.prune() step.</p>
</td></tr>
<tr><td><code id="aMNLFA.final_+3A_keepmean">keepmean</code></td>
<td>
<p>Boolean. If intercept or loading DIF are present, should the corresponding mean impact effect be retained? Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. Generates a file entitled &quot;round3calibration.inp&quot;, to be run in <em>Mplus</em>, in the directory specified in the aMNLFA.object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> ## Not run: 
 wd  &lt;-  tempdir()
 first &lt;- paste0(system.file(package='aMNLFA'),"/extdata")
 the.list  &lt;-  list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
   
 ob  &lt;-  aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.simultaneous(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.initial'>aMNLFA initial model fitting function</h2><span id='topic+aMNLFA.initial'></span>

<h3>Description</h3>

<p>This function generates the initial itemwise aMNLFA models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.initial(input.object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.initial_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/examplefiles")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.initial(ob)
 
## End(Not run)
 
</code></pre>

<hr>
<h2 id='aMNLFA.itemplots'>aMNLFA item plotting function</h2><span id='topic+aMNLFA.itemplots'></span>

<h3>Description</h3>

<p>This function generates plots of item endorsement by time, and by each covariate. This is necessary for determining which covariates to use in the MNLFA.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.itemplots(input.object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.itemplots_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/examplefiles")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.itemplots(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.object'>aMNLFA object function</h2><span id='topic+aMNLFA.object'></span>

<h3>Description</h3>

<p>This function creates an aMNLFA object based on user specifications to pass to aMNLFA functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.object(
  dir,
  mrdata,
  indicators = NULL,
  catindicators = NULL,
  countindicators = NULL,
  meanimpact = NULL,
  varimpact = NULL,
  measinvar = NULL,
  factors = NULL,
  time = NULL,
  auxiliary = NULL,
  ID = NULL,
  thresholds = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.object_+3A_dir">dir</code></td>
<td>
<p>The directory in which data, inputs, and outputs are to be stored. Must be supplied.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_mrdata">mrdata</code></td>
<td>
<p>The R dataframe containing the multiple-record dataset. Must be supplied.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_indicators">indicators</code></td>
<td>
<p>The names of all indicators (items, observed variables) in the MNLFA.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_catindicators">catindicators</code></td>
<td>
<p>The list of indicators which are categorical. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_countindicators">countindicators</code></td>
<td>
<p>The list of indicators which are count. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_meanimpact">meanimpact</code></td>
<td>
<p>The list of covariates (predictors) which may generate impact on the latent variable mean. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_varimpact">varimpact</code></td>
<td>
<p>The list of covariates (predictors) which may generate impact on the latent variable variance. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_measinvar">measinvar</code></td>
<td>
<p>The list of covariates (predictors) which may generate DIF. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_factors">factors</code></td>
<td>
<p>The list of covariates which are categorical. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_time">time</code></td>
<td>
<p>The variable which indexes time (or multiple records within a single case). If left blank, assumes single-record data. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_auxiliary">auxiliary</code></td>
<td>
<p>The list of variables to be considered as auxiliary (i.e., retained in the dataset but not used in the analysis). Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_id">ID</code></td>
<td>
<p>The variable which identifies cases. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="aMNLFA.object_+3A_thresholds">thresholds</code></td>
<td>
<p>A Boolean operator indicating whether to test for threshold DIF.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/examplefiles")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
 
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
## End(Not run)
 
</code></pre>

<hr>
<h2 id='aMNLFA.prune'>aMNLFA simultaneous model fitting function</h2><span id='topic+aMNLFA.prune'></span>

<h3>Description</h3>

<p>This function generates the simultaneous aMNLFA model from all the initial inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.prune(input.object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.prune_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list (entitled summary) with the following elements:
</p>

<ul>
<li> <p>indicators a list of indicators as specified by the user in the aMNLFA.object()
</p>
</li>
<li> <p>measinvar a list of measurement invariance variables as specified by the user in the aMNLFA.object()
</p>
</li>
<li> <p>meanimpact parameter values, standard errors, test statistics, and p. values for all mean impact effects tested in the simultaneous model
</p>
</li>
<li> <p>varimpact parameter values, standard errors, test statistics, and p. values for all variance impact effects tested in the simultaneous model
</p>
</li>
<li> <p>loadingDIF parameter values, standard errors, test statistics, and p. values for all loading DIF effects tested in the simultaneous model. Also includes critical values for different corrections according to the number of tests, <em>m</em>: Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the actual number of tests included in the model (BH.actual and bon.actual, respectively); Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the number of items times the number of covariates (BH.ibc and bon.ibc, respectively).  
</p>
</li>
<li> <p>interceptDIF If thresholds = FALSE in the corresponding aMNLFA.object: parameter values, standard errors, test statistics, and p. values for all intercept DIF effects tested in the simultaneous model. Also includes critical values for different corrections according to the number of tests, <em>m</em>: Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the actual number of tests included in the model (BH.actual and bon.actual, respectively); Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the number of items times the number of covariates (BH.ibc and bon.ibc, respectively).  
</p>
</li>
<li> <p>tDIF_highest If thresholds = TRUE in the corresponding aMNLFA.object: parameter values, standard errors, test statistics, and p. values for all threshold DIF effects tested in the simultaneous model, with tests performed only on the category with the largest test statistic for each item. Also includes critical values for different corrections according to the number of tests, <em>m</em>: Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the actual number of tests included in the model (BH.actual and bon.actual, respectively); Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the number of items times the number of covariates (BH.ibc and bon.ibc, respectively).  
</p>
</li>
<li> <p>tDIF_all If thresholds = TRUE in the corresponding aMNLFA.object: parameter values, standard errors, test statistics, and p. values for all threshold DIF effects tested in the simultaneous model, with tests performed on all categories for each item. Also includes critical values for different corrections according to the number of tests, <em>m</em>: Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the actual number of tests included in the model (BH.actual and bon.actual, respectively); Benjamini-Hochberg or Bonferroni with <em>m</em> defined as the number of items times the number of covariates (BH.ibc and bon.ibc, respectively).  
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/extdata")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
   
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.prune(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.sample'>aMNLFA sampling function</h2><span id='topic+aMNLFA.sample'></span>

<h3>Description</h3>

<p>This function generates a single-record dataset using a random sample of time points from the multiple-record sample.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.sample(input.object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.sample_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. Generates a calibration data file in the directory specified in the aMNLFA.object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/extdata")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
 
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.sample(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.scores'>aMNLFA score generating function</h2><span id='topic+aMNLFA.scores'></span>

<h3>Description</h3>

<p>This function creates scores generated using aMNLFA. Can only be run after the final model has been fit &ndash; i.e., after the aMNLFA.final function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.scores(input.object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.scores_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. Generates an INP file to be run in <em>Mplus</em> to generate scores in the directory specified in the aMNLFA.object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/extdata")
 the.list &lt;- list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
 
 ob &lt;- aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("BIN_", 1:12),
 catindicators = paste0("BIN_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.scores(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='aMNLFA.simultaneous'>aMNLFA simultaneous model fitting function</h2><span id='topic+aMNLFA.simultaneous'></span>

<h3>Description</h3>

<p>This function generates the simultaneous aMNLFA model from all the initial inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aMNLFA.simultaneous(input.object, keepmean = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aMNLFA.simultaneous_+3A_input.object">input.object</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
<tr><td><code id="aMNLFA.simultaneous_+3A_keepmean">keepmean</code></td>
<td>
<p>Boolean. If intercept or loading DIF are present, should the corresponding mean impact effect be retained? Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value. Generates a file entitled &quot;round3calibration.inp&quot;, to be run in <em>Mplus</em>, in the directory specified in the aMNLFA.object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 wd  &lt;-  tempdir()
 first &lt;- paste0(system.file(package='aMNLFA'),"/extdata")
 the.list  &lt;-  list.files(first,full.names=TRUE)
 file.copy(the.list,wd,overwrite=TRUE)
   
 ob  &lt;-  aMNLFA::aMNLFA.object(dir = wd, 
 mrdata = xstudy, 
 indicators = paste0("bin_", 1:12),
 catindicators = paste0("bin_", 1:12), 
 meanimpact = c("AGE", "GENDER", "STUDY"), 
 varimpact = c("AGE", "GENDER", "STUDY"), 
 measinvar = c("AGE", "GENDER", "STUDY"),
 factors = c("GENDER", "STUDY"),
 ID = "ID",
 thresholds = FALSE)
 
 aMNLFA.simultaneous(ob)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='fixPath'>helper function - removes the final slash at the end of a given string</h2><span id='topic+fixPath'></span>

<h3>Description</h3>

<p>This function generates the initial itemwise aMNLFA models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixPath(somecharacter)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fixPath_+3A_somecharacter">somecharacter</code></td>
<td>
<p>The aMNLFA object (created using the aMNLFA.object function) which provides instructions for the function.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>outcharacter - string with slash at the end deleted
</p>


<h3>Examples</h3>

<pre><code class='language-R'> wd &lt;- tempdir()
 first&lt;-paste0(system.file(package='aMNLFA'),"/examplefiles")
 fixPath(first)
</code></pre>

<hr>
<h2 id='write.inp.file'>helper function for writing out Mplus inputs</h2><span id='topic+write.inp.file'></span>

<h3>Description</h3>

<p>This function generates the initial itemwise aMNLFA models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write.inp.file(df, outfile)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write.inp.file_+3A_df">df</code></td>
<td>
<p>- the Mplus code to be written out, in a data frame</p>
</td></tr>
<tr><td><code id="write.inp.file_+3A_outfile">outfile</code></td>
<td>
<p>- a directory to which the Mplus code should be written</p>
</td></tr>
</table>


<h3>Value</h3>

<p>outcharacter - string with slash at the end deleted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 ## Not run: 
 wd &lt;- tempdir()
 somestring &lt;- as.data.frame("This is some text which would be written to an Mplus file.")
 write.inp.file(somestring, wd)
 
## End(Not run)
</code></pre>

<hr>
<h2 id='xstudy'>Simulated cross-study data</h2><span id='topic+xstudy'></span>

<h3>Description</h3>

<p>Data are simulated as part of a larger study 
(Curran et al., 2016; Curran et al., under review).
Meant to simulate a dataset pooled across two studies, with 
12 indicators and 3 moderators (age, gender, and study).
Impact and DIF exist on the basis of these moderators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(xstudy)
</code></pre>


<h3>Format</h3>

<p>A data frame with 500 rows and 25 columns. The 25 variables are:
</p>

<dl>
<dt>ID</dt><dd><p>Unique identifier</p>
</dd>
<dt>AGE</dt><dd><p>Age in years, centered around age 13</p>
</dd>
<dt>GENDER</dt><dd><p>Effect-coded gender</p>
</dd>
<dt>STUDY</dt><dd><p>Effect-coded study membership</p>
</dd>
<dt>STUDYAGE</dt><dd><p>Interaction between age and study</p>
</dd>
<dt>TRUEETA</dt><dd><p>True score on latent variable for each subject &ndash; not used in analysis</p>
</dd>
<dt>STUDYETA</dt><dd><p>Interaction between study and score &ndash; not used in analysis</p>
</dd>
<dt>ZETA</dt><dd><p>Deviation score &ndash; not used in analysis</p>
</dd>
<dt>W</dt><dd><p>External covariate for original simulation &ndash; not used in analysis</p>
</dd>
<dt>Z1</dt><dd><p>External outcome for original simulation &ndash; not used in analysis</p>
</dd>
<dt>Z2</dt><dd><p>External outcome for original simulation &ndash; not used in analysis</p>
</dd>
<dt>Z3</dt><dd><p>External outcome for original simulation &ndash; not used in analysis</p>
</dd>
<dt>Z4</dt><dd><p>External outcome for original simulation &ndash; not used in analysis</p>
</dd>
<dt>BIN_1</dt><dd><p>Binary item 1</p>
</dd>
<dt>BIN_2</dt><dd><p>Binary item 2</p>
</dd>
<dt>BIN_3</dt><dd><p>Binary item 3</p>
</dd>
<dt>BIN_4</dt><dd><p>Binary item 4</p>
</dd>
<dt>BIN_5</dt><dd><p>Binary item 5</p>
</dd>
<dt>BIN_6</dt><dd><p>Binary item 6</p>
</dd>
<dt>BIN_7</dt><dd><p>Binary item 7</p>
</dd>
<dt>BIN_8</dt><dd><p>Binary item 8</p>
</dd>
<dt>BIN_9</dt><dd><p>Binary item 9</p>
</dd>
<dt>BIN_10</dt><dd><p>Binary item 10</p>
</dd>
<dt>BIN_11</dt><dd><p>Binary item 11</p>
</dd>
<dt>BIN_12</dt><dd><p>Binary item 12</p>
</dd>
</dl>



<h3>Source</h3>

<p>Curran et al., 2016 (<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5526637/">PubMed</a>)
</p>


<h3>References</h3>

<p>Curran et al., 2016 Structural Equation Modeling 23(6), 827-844.
(<a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5526637/">PubMed</a>)
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
