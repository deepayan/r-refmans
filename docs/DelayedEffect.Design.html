<!DOCTYPE html><html lang="en"><head><title>Help for package DelayedEffect.Design</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DelayedEffect.Design}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DelayedEffect.Design'>
<p>Sample size and power calculations using the APPLE, SEPPLE, APPLE+ and SEPPLE+ methods</p></a></li>
<li><a href='#data'>
<p>Data for examples</p></a></li>
<li><a href='#GPW.logrank'><p>Generalized Piecewise Weighted Logrank Test</p></a></li>
<li><a href='#HR.APPLE'><p>APPLE hazard ratio computation</p></a></li>
<li><a href='#HR.APPLE.plus'><p>APPLE+ hazard ratio computation</p></a></li>
<li><a href='#N.APPLE'><p>APPLE sample size computation</p></a></li>
<li><a href='#N.APPLE.plus'><p>APPLE+ sample size computation</p></a></li>
<li><a href='#pow.APPLE'><p>APPLE power computation</p></a></li>
<li><a href='#pow.APPLE.plus'><p>APPLE+ power computation</p></a></li>
<li><a href='#pow.SEPPLE'><p>SEPPLE power computation</p></a></li>
<li><a href='#pow.SEPPLE.plus'><p>SEPPLE+ power computation</p></a></li>
<li><a href='#pow.SEPPLE.random.DE'><p>SEPPLE+ power computation</p></a></li>
<li><a href='#pow.sim.logrk'><p>Simulated log-rank power computation</p></a></li>
<li><a href='#pow.sim.logrk.random.DE'><p>Simulated log-rank power computation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Sample Size and Power Calculations using the APPLE, SEPPLE,
APPLE+ and SEPPLE+ Methods</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-08-18</td>
</tr>
<tr>
<td>Author:</td>
<td>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;, Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides sample size and power calculations when the treatment time-lag effect is present and the lag duration is either homogeneous across the individual subject, or varies heterogeneously from individual to individual within a certain domain and following a specific pattern. The methods used are described in Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017) &lt;<a href="https://doi.org/10.1002%2Fsim.7157">doi:10.1002/sim.7157</a>&gt;.</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bill Wheeler &lt;wheelerb@imsweb.com&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-18 20:25:16 UTC; wheelerwi</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-21 13:40:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='DelayedEffect.Design'>
Sample size and power calculations using the APPLE, SEPPLE, APPLE+ and SEPPLE+ methods
</h2><span id='topic+DelayedEffect.Design'></span><span id='topic+DelayedEffect.Design-package'></span>

<h3>Description</h3>

<p>An R package for sample size and power calculation when the treatment time-lag 
effect is present. The package incorporates two specific lag assumptions: <br />
1. the lag duration is homogeneous across the individual subject; <br />
2. the lag duration varies heterogeneously from individual to individual within a 
certain domain and following a specific pattern.
</p>


<h3>Details</h3>

<p>The four new methods in this package for performing the sample size and power calculations are:<br />
1. Analytic Power calculation method based on Piecewise weighted Log-rank tEst (APPLE), <br />
2. Simulation-based Empirical Power calculation method based on Piecewise weighted Log-rank tEst (SEPPLE), <br />
3.  Analytic Power calculation method based on generalized Piecewise weighted Log-rank tEst
with random treatment time-lag effect (APPLE+), <br />
4. Simulation-based Empirical Power calculation method based on generalized Piecewise weighted 
Log-rank tEst with random treatment time-lag effect (SEPPLE+). <br />
See the reference for details of these methods.
Specifically, APPLE and SEPPLE assume that the lag duration is homogeneous across the individual subject,
whereas APPLE and SEPPLE assume that the lag duration varies heterogeneously from individual to individual 
or from study to study within a certain domain and following a specific pattern.  
The functions for computing power corresponding to the above methods are pow.APPLE, pow.SEPPLE, pow.APPLE.plus,
pow.SEPPLE.plus and pow.SEPPLE.random.DE. These can be compared to pow.sim.logrk and pow.sim.logrk.rankdom.DE 
which compute the power from a simulation-based algorithm using the regular log-rank test which ignores the 
existence of lag effects. 
The package also includes the function N.APPLE, N.APPLE.plus to back calculate the sample size given the power 
and hazard ratio, and the functions HR.APPLE and HR.APPLE.plus to back calculate the hazard ratio given the 
power and sample size, respectively, using the close-from APPLE and APPLE+ methods.
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>

<hr>
<h2 id='data'>
Data for examples
</h2><span id='topic+data'></span>

<h3>Description</h3>

<p>Data for examples.
</p>


<h3>Details</h3>

<p> A data frame used in the examples. 
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 data(data, package="DelayedEffect.Design")

 # Display some of the data
 data[1:5, ]
</code></pre>

<hr>
<h2 id='GPW.logrank'>Generalized Piecewise Weighted Logrank Test</h2><span id='topic+GPW.logrank'></span>

<h3>Description</h3>

<p>Compute the p-value based on the 
generalized piecewise weighted log-rank test when the treatment 
time-lag effect is present and the lag duration 
varies heterogeneously from individual to individual or from study to study, within a
certain domain and following a uniform pattern.                      
</p>


<h3>Usage</h3>

<pre><code class='language-R'>GPW.logrank(data, obs.time, time.to.event, event.status, trt.group, tl, tu) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="GPW.logrank_+3A_data">data</code></td>
<td>
<p>Data frame</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_obs.time">obs.time</code></td>
<td>
<p>Column name in <code>data</code> for the observational time.</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_time.to.event">time.to.event</code></td>
<td>
<p>Column name in <code>data</code> for the event time.</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_event.status">event.status</code></td>
<td>
<p>Column name in <code>data</code> for the event status, where
0 denotes being censored, and 1 denotes events.</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_trt.group">trt.group</code></td>
<td>
<p>Column name in <code>data</code> for the treatment group, where
0 denotes controls, and 1 denotes treated subjects.</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="GPW.logrank_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
</table>


<h3>Value</h3>

<p> The p-value of the test.
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.SEPPLE.plus">pow.SEPPLE.plus</a></code> </p>


<h3>Examples</h3>

<pre><code class='language-R'>  data(data, package="DelayedEffect.Design")
  GPW.logrank(data, "X", "time_to_event", "event_status", "Z", 30, 30*11) 
</code></pre>

<hr>
<h2 id='HR.APPLE'>APPLE hazard ratio computation</h2><span id='topic+HR.APPLE'></span>

<h3>Description</h3>

<p>Perform the post-delay hazard ratio calculation given power and sample size using the close-form
APPLE method based on the piecewise weighted log-rank test when the treatment time-lag effect is
present and the lag duration is homogeneous across the individual subject                     
</p>


<h3>Usage</h3>

<pre><code class='language-R'> HR.APPLE(lambda1, t1, p, N, tao, A, beta, ap=0.5, alpha=0.05) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="HR.APPLE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard or NULL (see details)</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_t1">t1</code></td>
<td>
<p>Delayed duration or NULL (see details)</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_p">p</code></td>
<td>
<p>Proportion of subjects who survive beyond the delayed period or NULL (see details)</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_beta">beta</code></td>
<td>
<p>Type II error rate; Power=1-beta</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="HR.APPLE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE is an acronym for: <br />
Analytic Power calculation method based on Piecewise weighted Log-rank tEst.
See the reference for details of this method.
</p>
<p>Out of the three input parameters <code>lambda1</code>, <code>t1</code> and <code>p</code>,
only two need to be specified, the remaining one will be computed
internally from the formula <code>lambda1 = -log(p)/t1</code>.
If all three are not NULL, then 
<code>lambda1</code> will be set to <code>-log(p)/t1</code> regardless of the user input value. 
</p>


<h3>Value</h3>

<p> The hazard ratio
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE">pow.APPLE</a></code>, <code><a href="#topic+N.APPLE">N.APPLE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- NULL
  t1      &lt;- 183
  p       &lt;- 0.7
  N       &lt;- 200
  tao     &lt;- 365*3
  A       &lt;- 365
  beta    &lt;- 0.2
  HR.APPLE(lambda1, t1, p, N, tao, A, beta)
</code></pre>

<hr>
<h2 id='HR.APPLE.plus'>APPLE+ hazard ratio computation</h2><span id='topic+HR.APPLE.plus'></span>

<h3>Description</h3>

<p>Perform the post-delay hazard ratio calculation given power and sample size using the close-form
APPLE+ method based on the generalized piecewise weighted log-rank test when the treatment time-lag effect is
present and the lag duration varies heterogeneously from individual to individual
or from study to study, within a certain domain and following a specific pattern.                     
</p>


<h3>Usage</h3>

<pre><code class='language-R'> HR.APPLE.plus(lambda1, tl, tu, N, tao, A, beta, ap=0.5, alpha=0.05) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="HR.APPLE.plus_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
<tr><td><code id="HR.APPLE.plus_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_beta">beta</code></td>
<td>
<p>Type II error rate; Power=1-beta</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="HR.APPLE.plus_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE+ is an acronym for: <br />
Analytic Power calculation method based on generalized Piecewise weighted Log-rank tEst
with random treatment time-lag effect.
See the reference for details of this method.
</p>


<h3>Value</h3>

<p> The hazard ratio
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE.plus">pow.APPLE.plus</a></code>, <code><a href="#topic+N.APPLE.plus">N.APPLE.plus</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  N       &lt;- 200
  tao     &lt;- 365*3
  A       &lt;- 365
  beta    &lt;- 0.2
  HR.APPLE.plus(lambda1, tl, tu, N, tao, A, beta)
</code></pre>

<hr>
<h2 id='N.APPLE'>APPLE sample size computation</h2><span id='topic+N.APPLE'></span>

<h3>Description</h3>

<p>Perform the sample size calculation given the power and post-delay hazard ratio using the closeform
APPLE method based on the piecewise weighted log-rank test when the treatment time-lag
effect is present and the lag duration is homogeneous across the individual subject                          
</p>


<h3>Usage</h3>

<pre><code class='language-R'> N.APPLE(lambda1, t1, p, HR, tao, A, beta, ap=0.5, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="N.APPLE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard or NULL (see details)</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_t1">t1</code></td>
<td>
<p>Delayed duration or NULL (see details)</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_p">p</code></td>
<td>
<p>Proportion of subjects who survive beyond the delayed period or NULL (see details)</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_beta">beta</code></td>
<td>
<p>Type II error rate; Power=1-beta</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="N.APPLE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE is an acronym for: <br />
Analytic Power calculation method based on Piecewise weighted Log-rank tEst.
See the reference for details of this method. 
</p>
<p>Out of the three input parameters <code>lambda1</code>, <code>t1</code> and <code>p</code>,
only two need to be specified, the remaining one will be computed
internally from the formula <code>lambda1 = -log(p)/t1</code>.
If all three are not NULL, then 
<code>lambda1</code> will be set to <code>-log(p)/t1</code> regardless of the user input value. 
</p>


<h3>Value</h3>

<p> The sample size
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE">pow.APPLE</a></code>, <code><a href="#topic+HR.APPLE">HR.APPLE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- NULL
  t1      &lt;- 183
  p       &lt;- 0.7
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  beta    &lt;- 0.2
  N.APPLE(lambda1, t1, p, HR, tao, A, beta)
</code></pre>

<hr>
<h2 id='N.APPLE.plus'>APPLE+ sample size computation</h2><span id='topic+N.APPLE.plus'></span>

<h3>Description</h3>

<p>Perform the sample size calculation given the power and post-delay hazard ratio using the close-form
APPLE+ method based on the generalized piecewise weighted log-rank test when the treatment time-lag
effect is present and the lag duration varies heterogeneously from individual to individual
or from study to study, within a certain domain and following a specific pattern.                       
</p>


<h3>Usage</h3>

<pre><code class='language-R'> N.APPLE.plus(lambda1, tl, tu, HR, tao, A, beta, ap=0.5, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="N.APPLE.plus_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
<tr><td><code id="N.APPLE.plus_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio after <code>tu</code>, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_beta">beta</code></td>
<td>
<p>Type II error rate; Power=1-beta</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="N.APPLE.plus_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE+ is an acronym for: <br />
Analytic Power calculation method based on generalized Piecewise weighted Log-rank tEst
with random treatment time-lag effect.
See the reference for details of this method. 
</p>


<h3>Value</h3>

<p> The sample size
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE.plus">pow.APPLE.plus</a></code>, <code><a href="#topic+HR.APPLE.plus">HR.APPLE.plus</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  HR      &lt;- 1.3
  tao     &lt;- 365*3
  A       &lt;- 365
  beta    &lt;- 0.2
  N.APPLE.plus(lambda1, tl, tu, HR, tao, A, beta)
</code></pre>

<hr>
<h2 id='pow.APPLE'>APPLE power computation</h2><span id='topic+pow.APPLE'></span>

<h3>Description</h3>

<p>Perform the power calculation using the close-form APPLE method based on the piecewise
weighted log-rank test when the treatment time-lag effect is present and the lag duration 
is homogeneous across the individual subject                           
</p>


<h3>Usage</h3>

<pre><code class='language-R'> pow.APPLE(lambda1, t1, p, N, HR, tao, A, ap=0.5, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.APPLE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_t1">t1</code></td>
<td>
<p>Delayed duration or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_p">p</code></td>
<td>
<p>Proportion of subjects who survive beyond the delayed period or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.APPLE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE is an acronym for: <br />
Analytic Power calculation method based on Piecewise weighted Log-rank tEst.
See the reference for details of this method. 
</p>
<p>Out of the three input parameters <code>lambda1</code>, <code>t1</code> and <code>p</code>,
only two need to be specified, the remaining one will be computed
internally from the formula <code>lambda1 = -log(p)/t1</code>.
If all three are not NULL, then 
<code>lambda1</code> will be set to <code>-log(p)/t1</code> regardless of the user input value. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+N.APPLE">N.APPLE</a></code>, <code><a href="#topic+HR.APPLE">HR.APPLE</a></code>, <code><a href="#topic+pow.SEPPLE">pow.SEPPLE</a></code>, <code><a href="#topic+pow.sim.logrk">pow.sim.logrk</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- NULL
  t1      &lt;- 183
  p       &lt;- 0.7
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  pow.APPLE(lambda1, t1, p, N, HR, tao, A)
</code></pre>

<hr>
<h2 id='pow.APPLE.plus'>APPLE+ power computation</h2><span id='topic+pow.APPLE.plus'></span>

<h3>Description</h3>

<p>Perform the power calculation using the close-form APPLE+ method based on the generalized piecewise
weighted log-rank test when the treatment time-lag effect is present and the lag duration 
varies heterogeneously from individual to individual or from study to study, within a
certain domain and following a specific pattern.                       
</p>


<h3>Usage</h3>

<pre><code class='language-R'> pow.APPLE.plus(lambda1, tl, tu, N, HR, tao, A, ap=0.5, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.APPLE.plus_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
<tr><td><code id="pow.APPLE.plus_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio after <code>tu</code>, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.APPLE.plus_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>APPLE+ is an acronym for: <br />
Analytic Power calculation method based on generalized Piecewise weighted Log-rank tEst
with random treatment time-lag effect.
See the reference for details of this method. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+N.APPLE.plus">N.APPLE.plus</a></code>, <code><a href="#topic+HR.APPLE.plus">HR.APPLE.plus</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  N       &lt;- 200
  HR      &lt;- 1.3
  tao     &lt;- 365*3
  A       &lt;- 365
  pow.APPLE.plus(lambda1, tl, tu, N, HR, tao, A)
</code></pre>

<hr>
<h2 id='pow.SEPPLE'>SEPPLE power computation</h2><span id='topic+pow.SEPPLE'></span>

<h3>Description</h3>

<p>Perform the power calculation using the numeric SEPPLE method based on the piecewise
weighted log-rank test when the treatment time-lag effect is present and the lag duration 
is homogeneous across the individual subject                          
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pow.SEPPLE(lambda1, t1, p, N, HR, tao, A, ap=0.5, alpha=0.05, nsim=10000) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.SEPPLE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_t1">t1</code></td>
<td>
<p>Delayed duration or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_p">p</code></td>
<td>
<p>Proportion of subjects who survive beyond the delayed period or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE_+3A_nsim">nsim</code></td>
<td>
<p>Number of simulations. The default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SEPPLE is an acronym for: <br />
Simulation-based Empirical Power calculation method based on Piecewise weighted Log-rank
tEst. See the reference for details of this method. 
</p>
<p>Out of the three input parameters <code>lambda1</code>, <code>t1</code> and <code>p</code>,
only two need to be specified, the remaining one will be computed
internally from the formula <code>lambda1 = -log(p)/t1</code>.
If all three are not NULL, then 
<code>lambda1</code> will be set to <code>-log(p)/t1</code> regardless of the user input value. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</p>


<h3>References</h3>

<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE">pow.APPLE</a></code>, <code><a href="#topic+pow.sim.logrk">pow.sim.logrk</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- NULL
  t1      &lt;- 183
  p       &lt;- 0.7
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  pow.SEPPLE(lambda1, t1, p, N, HR, tao, A, nsim=1000)
</code></pre>

<hr>
<h2 id='pow.SEPPLE.plus'>SEPPLE+ power computation</h2><span id='topic+pow.SEPPLE.plus'></span>

<h3>Description</h3>

<p>Perform the power calculation using the numeric SEPPLE+ method based on the 
generalized piecewise
weighted log-rank test when the treatment time-lag effect is present and the lag duration 
varies heterogeneously from individual to individual or from study to study, within a
certain domain and following a specific pattern.                      
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pow.SEPPLE.plus(lambda1, tl, tu, N, HR, tao, A, dist="uniform",
              shape1=NULL, shape2=NULL, ap=0.5, alpha=0.05, nsim=10000) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.SEPPLE.plus_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
<tr><td><code id="pow.SEPPLE.plus_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio after tu, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_dist">dist</code></td>
<td>
<p>One of &quot;uniform&quot;, &quot;beta&quot; or &quot;gamma&quot;, for the lag distribution</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_shape1">shape1</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_shape2">shape2</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.plus_+3A_nsim">nsim</code></td>
<td>
<p>Number of simulations. The default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SEPPLE+ is an acronym for: <br />
Simulation-based Empirical Power calculation method based on generalized Piecewise weighted Log-rank
tEst with random treatment time-lag effect. 
See the reference for details of this method. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.SEPPLE.random.DE">pow.SEPPLE.random.DE</a></code>, <code><a href="#topic+pow.sim.logrk.random.DE">pow.sim.logrk.random.DE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  shape1  &lt;- 5
  shape2  &lt;- 5
  pow.SEPPLE.plus(lambda1, tl, tu, N, HR, tao, A, dist="beta", 
                  shape1=shape1, shape2=shape2, nsim=1000)
</code></pre>

<hr>
<h2 id='pow.SEPPLE.random.DE'>SEPPLE+ power computation</h2><span id='topic+pow.SEPPLE.random.DE'></span>

<h3>Description</h3>

<p>Perform the power calculation using the numeric SEPPLE method based on the piecewise
weighted log-rank test when the treatment time-lag effect is present and the lag duration varies
heterogeneously from individual to individual or from study to study, within a certain domain and
following a specific pattern. The purpose of this function is to evaluate the property of SEPPLE
which assumes the lag duration is homogeneous across the individual subject, when applied under
the random scenario where the lag duration, in fact, varies heterogeneously.                          
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pow.SEPPLE.random.DE(lambda1, tl, tu, N, HR, tao, A, t.fixed, dist="uniform",
              shape1=NULL, shape2=NULL, ap=0.5, alpha=0.05, nsim=10000) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.SEPPLE.random.DE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio after <code>tu</code>, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_t.fixed">t.fixed</code></td>
<td>
<p>Fixed duration in SEPPLE</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_dist">dist</code></td>
<td>
<p>One of &quot;uniform&quot;, &quot;beta&quot; or &quot;gamma&quot;, for the lag distribution</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_shape1">shape1</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_shape2">shape2</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
<tr><td><code id="pow.SEPPLE.random.DE_+3A_nsim">nsim</code></td>
<td>
<p>Number of simulations. The default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>SEPPLE+ is an acronym for: <br />
Simulation-based Empirical Power calculation method based on generalized Piecewise weighted Log-rank
tEst with random treatment time-lag effect.
See the reference for details of this method. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.SEPPLE.plus">pow.SEPPLE.plus</a></code>, <code><a href="#topic+pow.sim.logrk.random.DE">pow.sim.logrk.random.DE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  t.fixed &lt;- (tl+tu)/2
  shape1  &lt;- 5
  shape2  &lt;- 5
  pow.SEPPLE.random.DE(lambda1, tl, tu, N, HR, tao, A, t.fixed, dist="beta", 
                       shape1=shape1, shape2=shape2, nsim=1000)
</code></pre>

<hr>
<h2 id='pow.sim.logrk'>Simulated log-rank power computation</h2><span id='topic+pow.sim.logrk'></span>

<h3>Description</h3>

<p>Perform the power calculation using a simulation-based method based on the regular log-rank
test when the treatment time-lag effect is present and the lag duration is homogeneous across the 
individual subject                          
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pow.sim.logrk(lambda1, t1, p, N, HR, tao, A, ap=0.5, alpha=0.05, nsim=10000) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.sim.logrk_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_t1">t1</code></td>
<td>
<p>Delayed duration or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_p">p</code></td>
<td>
<p>Proportion of subjects who survive beyond the delayed period or NULL (see details)</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk_+3A_nsim">nsim</code></td>
<td>
<p>Number of simulations. The default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Out of the three input parameters <code>lambda1</code>, <code>t1</code> and <code>p</code>,
only two need to be specified, the remaining one will be computed
internally from the formula <code>lambda1 = -log(p)/t1</code>.
If all three are not NULL, then 
<code>lambda1</code> will be set to <code>-log(p)/t1</code> regardless of the user input value. 
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt;, Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;
</p>


<h3>References</h3>

<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.APPLE">pow.APPLE</a></code>, <code><a href="#topic+pow.SEPPLE">pow.SEPPLE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- NULL
  t1      &lt;- 183
  p       &lt;- 0.7
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  pow.sim.logrk(lambda1, t1, p, N, HR, tao, A, nsim=1000)
</code></pre>

<hr>
<h2 id='pow.sim.logrk.random.DE'>Simulated log-rank power computation</h2><span id='topic+pow.sim.logrk.random.DE'></span>

<h3>Description</h3>

<p>Perform the power calculation using a simulation-based method based on the regular log-rank
test when the treatment time-lag effect is present and the lag duration 
varies heterogeneously from
individual to individual or from study to study, within a certain domain and following a specific
pattern.                       
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pow.sim.logrk.random.DE(lambda1, tl, tu, N, HR, tao, A, dist="uniform",
              shape1=NULL, shape2=NULL, ap=0.5, alpha=0.05, nsim=10000) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="pow.sim.logrk.random.DE_+3A_lambda1">lambda1</code></td>
<td>
<p>Baseline hazard</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_tl">tl</code></td>
<td>
<p>Lower bound of delayed duration domain</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_tu">tu</code></td>
<td>
<p>Upper bound of delayed duration domain</p>
</td></tr>  
<tr><td><code id="pow.sim.logrk.random.DE_+3A_n">N</code></td>
<td>
<p>Sample size</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_hr">HR</code></td>
<td>
<p>Post-delay hazard ratio after <code>tu</code>, defined as the post-delay hazard rate of the treatment group compared to that of the control group</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_tao">tao</code></td>
<td>
<p>Total study duration</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_a">A</code></td>
<td>
<p>Total enrollment duration</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_dist">dist</code></td>
<td>
<p>One of &quot;uniform&quot;, &quot;beta&quot; or &quot;gamma&quot;, for the lag distribution</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_shape1">shape1</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_shape2">shape2</code></td>
<td>
<p>NULL or a positive parameter value for the <code>beta</code> or
<code>gamma</code> distribution.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_ap">ap</code></td>
<td>
<p>Experimental-control allocation ratio. The default is 0.5.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_alpha">alpha</code></td>
<td>
<p>Type I error rate (two-sided). The default is 0.05.</p>
</td></tr>
<tr><td><code id="pow.sim.logrk.random.DE_+3A_nsim">nsim</code></td>
<td>
<p>Number of simulations. The default is 10000.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The regular log-rank test is used here
</p>


<h3>Value</h3>

<p> The power
</p>


<h3>Author(s)</h3>

<p>Zhenzhen Xu &lt;Zhenzhen.Xu@fda.hhs.gov&gt; , Boguang Zhen&lt;Boguang.Zhen@fda.hhs.gov&gt;,
Yongsoek Park &lt;yongpark@pitt.edu&gt; and Bin Zhu &lt;bin.zhu@nih.gov&gt;</p>


<h3>References</h3>

<p>Xu, Z., Park, Y., Zhen, B. &amp; Zhu, B. (2017). 
Achieving optimal power of logrank test with random treatment time-lag effect. 
Biometrika. Under review. 
</p>
<p>Xu, Z., Zhen, B., Park, Y., &amp; Zhu, B. (2017). Designing therapeutic cancer vaccine trials with
delayed treatment effect. Statistics in medicine, 36(4), 592-605.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pow.SEPPLE.plus">pow.SEPPLE.plus</a></code>, <code><a href="#topic+pow.SEPPLE.random.DE">pow.SEPPLE.random.DE</a></code></p>


<h3>Examples</h3>

<pre><code class='language-R'>  lambda1 &lt;- 0.001982
  tl      &lt;- 30
  tu      &lt;- 30*11
  N       &lt;- 200
  HR      &lt;- 0.55
  tao     &lt;- 365*3
  A       &lt;- 365
  shape1  &lt;- 5
  shape2  &lt;- 5
  pow.sim.logrk.random.DE(lambda1, tl, tu, N, HR, tao, A, dist="beta",
                          shape1=shape1, shape2=shape2, nsim=1000)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
