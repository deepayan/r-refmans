<!DOCTYPE html><html><head><title>Help for package aoos</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {aoos}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#.genericTest'><p>Generic Test</p></a></li>
<li><a href='#+25g+25'><p>Wrapper for writing S4 generics and methods</p></a></li>
<li><a href='#+25type+25'><p>Types</p></a></li>
<li><a href='#Accessor-class'><p>Accessor class</p></a></li>
<li><a href='#aoos-class'><p>Class aoos</p></a></li>
<li><a href='#Binary-class'><p>Binary-class</p></a></li>
<li><a href='#defineClass'><p>Define a new class</p></a></li>
<li><a href='#defineRefClass'><p>Define a Reference Class</p></a></li>
<li><a href='#envCopy'><p>Helpers for environments</p></a></li>
<li><a href='#parser_+25m+25'><p>Parser for roxygen documentation</p></a></li>
<li><a href='#print.Print'><p>S3 helper classes</p></a></li>
<li><a href='#Private-class'><p>Private class</p></a></li>
<li><a href='#publicFunction'><p>Constructors for public members</p></a></li>
<li><a href='#retList'><p>Generic constructor function</p></a></li>
<li><a href='#Show-class'><p>Show class</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Another Object Orientation System</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2017-05-06</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/wahani/aoos/issues">https://github.com/wahani/aoos/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://wahani.github.io/aoos">https://wahani.github.io/aoos</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Another implementation of object-orientation in R. It provides
    syntactic sugar for the S4 class system and two alternative new
    implementations. One is an experimental version built around S4
    and the other one makes it more convenient to work with lists as objects.</td>
</tr>
<tr>
<td>Depends:</td>
<td>methods, R(&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, utils, roxygen2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, rbenchmark, R6, rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>TRUE</td>
</tr>
<tr>
<td>Collate:</td>
<td>'DC-Binary.R' 'DC-Show.R' 'DC-aoos.R' 'DC-defineClass.R'
'DC-public-interfaces.R' 'NAMESPACE.R' 'RL-Infix.R'
'RL-envHelper.R' 'RL-retList.R' 'S4-expressions.R'
'S4-generics.R' 'S4-generics-test.R' 'S4-roxygen-parser.R'
'S4-types.R' 'S4RC-Accessor.R' 'S4RC-Private.R'
'S4RC-defineRefClass.R'</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-05-06 18:26:45 UTC; sebastian</td>
</tr>
<tr>
<td>Author:</td>
<td>Sebastian Warnholz [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Sebastian Warnholz &lt;wahani@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-05-07 05:33:32 UTC</td>
</tr>
</table>
<hr>
<h2 id='.genericTest'>Generic Test</h2><span id='topic+.genericTest'></span><span id='topic+.genericTest+2Cnumeric-method'></span>

<h3>Description</h3>

<p>This generic function only exists to test that the rexygen2 parser work
correctly. Just ignore it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.genericTest(x, ...)

## S4 method for signature 'numeric'
.genericTest(x, ..., methodParam = function() 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".genericTest_+3A_x">x</code></td>
<td>
<p>Object</p>
</td></tr>
<tr><td><code id=".genericTest_+3A_...">...</code></td>
<td>
<p>Object</p>
</td></tr>
<tr><td><code id=".genericTest_+3A_methodparam">methodParam</code></td>
<td>
<p>Object</p>
</td></tr>
</table>

<hr>
<h2 id='+25g+25'>Wrapper for writing S4 generics and methods</h2><span id='topic++25g+25'></span><span id='topic++25m+25'></span>

<h3>Description</h3>

<p>These are two wrappers around <code>setGeneric</code> and <code>setMethod</code>. A
relevant difference is that generics and methods are stored in the
environment in which  <code>%g%</code> and <code>%m%</code> are called and not in the
top-environment. Furthermore both functions have side effects in that they
will call <code><a href="utils.html#topic+globalVariables">globalVariables</a></code> for the arguments and name of the
generic.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %g% rhs

lhs %m% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25g+2B25_+3A_lhs">lhs</code></td>
<td>
<p>see details</p>
</td></tr>
<tr><td><code id="+2B25g+2B25_+3A_rhs">rhs</code></td>
<td>
<p>the body as an expression</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Syntax for the left hand side:
<br /><code>[&lt;valueClass&gt;:]&lt;genericName&gt;(&lt;argList&gt;)</code>
<br /> - <code>valueClass</code> optional, is the class of the return value (see
<a href="methods.html#topic+setGeneric">setGeneric</a>)
<br /> - <code>genericName</code> the name of the generic function
<br /> - <code>argList</code> are <code>name = value</code> or <code>name ~ type</code>
expressions. Name-Value expressions are just like in a function definition.
Name-Type expressions are used to define the signature of a method (see
<a href="methods.html#topic+setMethod">setMethod</a>). See <a href="#topic++25type+25">%type%</a> and the examples how to work with 
them.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A new generic function and a method:
numeric : generic(x) %g% standardGeneric("generic") 
generic(x ~ numeric) %m% x
generic(1)

# Polymorphic methods in an object:
Object &lt;- function() {
  numeric : generic(x) %g% standardGeneric("generic") 
  generic(x ~ numeric) %m% x
  retList("Object")
}
Object()$generic(1)

# Class Unions:
## This generic allows for return values of type numeric or character:
'numeric | character' : generic(x) %g% standardGeneric("generic")

## This method also allows for numeric or character as argument:
generic(x ~ character | numeric) %m% x
generic(1)
generic("")

</code></pre>

<hr>
<h2 id='+25type+25'>Types</h2><span id='topic++25type+25'></span>

<h3>Description</h3>

<p>This function can be used to define new S4-classes which are called Type.
They have an initialize method and in the introduced syntax init-method and
S4-class definition build a unit, hence a type. This simply captures a
typical <code>setClass</code> then <code>setMethod("initialize", ...)</code> pattern
where often some redundancy is introduced. The function has side effects due
to calling <code>setClass</code>, <code>setMethod</code> and assigning the constructor
function to the types name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %type% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25type+2B25_+3A_lhs">lhs</code></td>
<td>
<p>an expression of the form:
<br /><code>[&lt;parent-name&gt;:]&lt;type-name&gt;([&lt;slots&gt;])</code>
<br /> - &lt;parent-name&gt; optional, the name of the S4-class/type to inherit from, 
seperated by <code>:</code>
<br /> - &lt;type-name&gt; the name for the new type and constructor function.
<br /> - &lt;slots&gt; optional, <code>name = value</code> or <code>name ~ type</code>
expressions. Name-Value expressions are used to construct a prototype. From
the prototype the class of the slot will be inferred. They are also the
defaults in the type constructor. Name-Type expressions define the classes of
the slots. If no value (or type) is supplied, <code>ANY</code> is assumed.</p>
</td></tr>
<tr><td><code id="+2B25type+2B25_+3A_rhs">rhs</code></td>
<td>
<p>the body of the initialize method as expression. It will be called
with <code>.Object</code> and <code>...</code> as arguments. <code>.Object</code> should be
the return value. With <code>.Object</code> there is an instance of the type on
which assertions can be formulated. Prior to the body (rhs) <code>.Object
&lt;- callNextMethod()</code> will be evaluated which enables proper initialization
of your type and its inherited fields. See <a href="methods.html#topic+initialize">initialize</a> for
details.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>Name-Type</code> expressions are also used in <a href="#topic++25m+25">%m%</a>. Besides this you
can formulate type unions in type expressions or the inheritance structure.
This has a side effect in that <a href="methods.html#topic+setClassUnion">setClassUnion</a> is called. Whenever you
write a type you can replace the name by an expression of the form:
<code>type1 | type2</code>. Outside the slots or argument list of a method these
expressions have to be quoted. In this example the following expression is
evaluated for you: <code>setClassUnion("type1ORtype2", c("type1", "type2"))</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># This will create an S4-class named 'Test' with two slots; x = "numeric"
# and y = "list"; prototype: list(x = 1, y = list()); and an initialize
# method where some checks are performed.

Test(x = 1, y = list()) %type% {
  stopifnot(.Object@x &gt; 0)
  .Object
}

# This will create an S4-class named 'Numeric' with a slot and some tests.

numeric : Numeric(metaInfo = character()) %type% {
  stopifnot(length(.Object) &gt; 0)
  stopifnot(all(.Object &gt; 0))
  .Object
}

# This will create an S4-class with slots, where the constructor function has
# no defaults. All slots will allow for ANY type.

Anything(x, y ~ ANY, z = NULL) %type% .Object
## Not run: 
  Anything() # error because x and y are missing

## End(Not run)

# Type Unions:
'character | numeric' : Either(either ~ character | numeric) %type% .Object
Either("", 1)

</code></pre>

<hr>
<h2 id='Accessor-class'>Accessor class</h2><span id='topic+Accessor-class'></span><span id='topic++24+2CAccessor-method'></span><span id='topic++24+3C-+2CAccessor-method'></span>

<h3>Description</h3>

<p>This is a virtual class to be contained in other class definitions. It overrides the default accessor <code>$</code> and is intended to be used with the aoos class system (<code><a href="#topic+defineClass">defineClass</a></code>). Inherit from this class if you want to access public fields in the same way you access lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Accessor'
x$name

## S4 replacement method for signature 'Accessor'
x$name &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Accessor-class_+3A_x">x</code></td>
<td>
<p>object</p>
</td></tr>
<tr><td><code id="Accessor-class_+3A_name">name</code></td>
<td>
<p>member name</p>
</td></tr>
<tr><td><code id="Accessor-class_+3A_value">value</code></td>
<td>
<p>value to assign to.</p>
</td></tr>
</table>

<hr>
<h2 id='aoos-class'>Class aoos</h2><span id='topic+aoos-class'></span><span id='topic+show+2Caoos-method'></span><span id='topic++24+2Caoos-method'></span><span id='topic++24+3C-+2Caoos-method'></span><span id='topic+summary.aoos'></span><span id='topic+as.environment+2Caoos-method'></span>

<h3>Description</h3>

<p>This is an environment with some methods. Every class defined by <code>defineClass</code> will inherit from aoos. Summary will show a list of public and private members with approximated memory usage.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'aoos'
show(object)

## S4 method for signature 'aoos'
x$name

## S4 replacement method for signature 'aoos'
x$name &lt;- value

## S3 method for class 'aoos'
summary(object, ...)

## S4 method for signature 'aoos'
as.environment(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="aoos-class_+3A_object">object</code></td>
<td>
<p>object</p>
</td></tr>
<tr><td><code id="aoos-class_+3A_x">x</code></td>
<td>
<p>object</p>
</td></tr>
<tr><td><code id="aoos-class_+3A_name">name</code></td>
<td>
<p>member name</p>
</td></tr>
<tr><td><code id="aoos-class_+3A_value">value</code></td>
<td>
<p>value to assign to. Will throw an error.</p>
</td></tr>
<tr><td><code id="aoos-class_+3A_...">...</code></td>
<td>
<p>arguments passed to method (not used).</p>
</td></tr>
</table>

<hr>
<h2 id='Binary-class'>Binary-class</h2><span id='topic+Binary-class'></span>

<h3>Description</h3>

<p>This is a virtual class to be contained in other class definitions. It can be used to define binary operators, e.g. <code>+</code> or <code>-</code>, inside an aoos class definition (<code><a href="#topic+defineClass">defineClass</a></code>).
</p>


<h3>Details</h3>

<p>At the moment you can define binary operators as methods by naming them as <code>.&lt;binaryOperator&gt;</code> (see the example). This is implemented for the following operators: <code>+, -, *, /, %%, ^, &lt;, &gt;, ==, &gt;=, &lt;=, &amp;</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>Rational &lt;- defineClass("Rational", contains = c("Show", "Binary"), {

  numer &lt;- 0
  denom &lt;- 1
  .g &lt;- 1
  
  .gcd &lt;- function(a, b) if(b == 0) a else Recall(b, a %% b)

  init &lt;- function(numer, denom) {
    .self$.g &lt;- .gcd(numer, denom)
    .self$numer &lt;- numer / .g
    .self$denom &lt;- denom / .g
  }
  
  show &lt;- function() {
    cat(paste0(.self$numer, "/", .self$denom, "\n"))
  }
  
  ".+" &lt;- function(that) {
    Rational(numer = numer * that$denom + that$numer * denom,
             denom = denom * that$denom)
  }
  
  neg &lt;- function() {
    Rational(numer = -.self$numer,
             denom = .self$denom)
  }
  
  ".-" &lt;- function(that) {
     .self + that$neg()
  }
  
})

rational &lt;- Rational(2, 3)
rational + rational
rational$neg()
rational - rational
</code></pre>

<hr>
<h2 id='defineClass'>Define a new class</h2><span id='topic+defineClass'></span><span id='topic+private'></span><span id='topic+private+2Cpublic-method'></span><span id='topic+public'></span><span id='topic+public+2Cfunction-method'></span><span id='topic+public+2Cprivate-method'></span><span id='topic+public+2Cpublic-method'></span>

<h3>Description</h3>

<p>This is an experimental implementation of reference classes. Use <code><a href="#topic+defineRefClass">defineRefClass</a></code> or <code><a href="#topic+retList">retList</a></code> instead. <code>defineClass</code> has side effects. The constructor is the return value of <code>defineClass</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineClass(name, expr, contains = NULL)

private(x)

## S4 method for signature 'public'
private(x)

public(x = NULL, validity = function(x) TRUE)

## S4 method for signature ''function''
public(x = NULL, validity = function(x) TRUE)

## S4 method for signature 'private'
public(x = NULL, validity = function(x) TRUE)

## S4 method for signature 'public'
public(x = NULL, validity = function(x) TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineClass_+3A_name">name</code></td>
<td>
<p>character name of the class</p>
</td></tr>
<tr><td><code id="defineClass_+3A_expr">expr</code></td>
<td>
<p>expression</p>
</td></tr>
<tr><td><code id="defineClass_+3A_contains">contains</code></td>
<td>
<p>character name of class from which to inherit</p>
</td></tr>
<tr><td><code id="defineClass_+3A_x">x</code></td>
<td>
<p>an object made public</p>
</td></tr>
<tr><td><code id="defineClass_+3A_validity">validity</code></td>
<td>
<p>function to check the validity of an object</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>defineClass</code> creates a S4-Class which can be used for standard S4 method dispatch. It will also set the method 'initialize' which need not to be changed. If you want to have some operations carried out on initialization use a function definition named <code>init</code> as part of <code>expr</code>. The return value from <code>defineClass</code> is the constructor function. It has the argument <code>...</code> which will be passed to <code>init</code>.
</p>
<p>All classes defined with <code>defineClass</code> inherit from class &quot;aoos&quot; which is a S4-class containing an environment. In that environment <code>expr</code> is evaluated; for inheritance, all <code>expr</code> from all parents will be evaluated first.
</p>
<p>Everything in <code>expr</code> will be part of the new class definition. A leading dot in a name will be interpreted as private. You can use <code>public</code> and <code>private</code> to declare private and public members explicitly. If <code>x</code> in a call to <code>public</code> is a function it will be a public member function (method). For any other class the return value of <code>public</code> is a get and set method. If called without argument it will get the value, if called with argument it will set the value. You can define a validity function which will be called whenever the set method is called. Objects which inherit from class <code>environment</code> can be accessed directly, i.e. not via get/set methods. If you want to access fields without get/set methods, you can use the class <code><a href="#topic+Accessor-class">Accessor-class</a></code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Accessor-class">Accessor-class</a></code>, <code><a href="#topic+Binary-class">Binary-class</a></code>, <code><a href="#topic+Show-class">Show-class</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>test &lt;- defineClass("test", {
  x &lt;- "Working ..."
  .y &lt;- 0
  doSomething &lt;- public(function() {
    self$.y &lt;- .y + 1
    cat(x(), "\n")
    invisible(self)
  })
})
instance &lt;- test()
## Not run: 
instance$.y # error

## End(Not run)
instance$doSomething()$doSomething()
instance$x()
instance$x(2)
instance$x()

# Example for reference classes as field
MoreTesting &lt;- defineClass("MoreTesting", {
  refObj &lt;- test()
})
instance &lt;- MoreTesting()
instance$refObj$x()
</code></pre>

<hr>
<h2 id='defineRefClass'>Define a Reference Class</h2><span id='topic+defineRefClass'></span>

<h3>Description</h3>

<p>This is a wrapper around <code><a href="methods.html#topic+setRefClass">setRefClass</a></code>. All arguments are defined in an expression (instead of lists) which improves readability of the code. Besides that, no additional features are added.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>defineRefClass(expr)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="defineRefClass_+3A_expr">expr</code></td>
<td>
<p>an expression</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+Private-class">Private-class</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  vignette("Introduction", "aoos")

## End(Not run)

# Minimal example:
Test &lt;- defineRefClass({
  Class &lt;- "Test" # this is passed as argument to setRefClass
  x &lt;- "character" # all objects which are not functions are fields
  do &lt;- function() cat("Yes, Yes, I'm working...") # a method
})

test &lt;- Test()
test$x &lt;- "a"
test$do()

# Inheritance and privacy:
pTest &lt;- defineRefClass({
  Class &lt;- "pTest"
  # Privacy is solved by inheriting from a class 'Private' which redefines
  # the methods for access.
  contains &lt;- c("Test", "Private") # passed as argument to setRefClass

  .y &lt;- "numeric" # this is going to be 'private'

  doSomething &lt;- function() {
    .self$.y &lt;- 42
    cat(x, .y, "\n")
    invisible(.self)
  }
})

instance &lt;- pTest()
instance$x &lt;- "Value of .y:"
instance$doSomething()

# A notion of privacy:
stopifnot(inherits(try(instance$.y), "try-error"))
stopifnot(inherits(try(instance$.y &lt;- 2), "try-error"))
</code></pre>

<hr>
<h2 id='envCopy'>Helpers for environments</h2><span id='topic+envCopy'></span><span id='topic+envMerge'></span>

<h3>Description</h3>

<p>Functions to help working with environments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>envCopy(from, to)

envMerge(x, with)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="envCopy_+3A_from">from</code></td>
<td>
<p>environment</p>
</td></tr>
<tr><td><code id="envCopy_+3A_to">to</code></td>
<td>
<p>environment</p>
</td></tr>
<tr><td><code id="envCopy_+3A_x">x</code></td>
<td>
<p>environment</p>
</td></tr>
<tr><td><code id="envCopy_+3A_with">with</code></td>
<td>
<p>environment</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>envCopy</code> tries to copy all objects in a given environment into the environment 'to'. Returns the names of copied objects.
</p>
<p><code>envMerge</code> will merge x and with. Merge will copy all objects from x to with. Prior to that, the environment of functions are changed to be with iff functions in x have environment x; else the environment of functions are preserved.
</p>


<h3>See Also</h3>

<p><a href="#topic+retList">retList</a> where these are relevant.
</p>

<hr>
<h2 id='parser_+25m+25'>Parser for roxygen documentation</h2><span id='topic+parser_+25m+25'></span><span id='topic+parser_+25g+25'></span><span id='topic+parser_+25type+25'></span>

<h3>Description</h3>

<p>These functions are used by roxygen2 for generating documentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>"parser_%m%"(call, env, block)

"parser_%g%"(call, env, block)

"parser_%type%"(call, env, block)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parser_+2B25m+2B25_+3A_call">call</code></td>
<td>
<p>a call</p>
</td></tr>
<tr><td><code id="parser_+2B25m+2B25_+3A_env">env</code></td>
<td>
<p>an environment</p>
</td></tr>
<tr><td><code id="parser_+2B25m+2B25_+3A_block">block</code></td>
<td>
<p>is ignored</p>
</td></tr>
</table>

<hr>
<h2 id='print.Print'>S3 helper classes</h2><span id='topic+print.Print'></span><span id='topic++2B.Infix'></span><span id='topic+-.Infix'></span><span id='topic++2F.Infix'></span><span id='topic++25+25.Infix'></span><span id='topic++5E.Infix'></span><span id='topic++3C.Infix'></span><span id='topic++3E.Infix'></span><span id='topic++3D+3D.Infix'></span><span id='topic++3E+3D.Infix'></span><span id='topic++3C+3D.Infix'></span><span id='topic++26.Infix'></span><span id='topic++21.Infix'></span><span id='topic+as.environment.Infix'></span>

<h3>Description</h3>

<p>There is no formal class definition for S3. Simply add 'Infix' or 'Print' to the class attribute and it inherits the methods. It is the same as <code><a href="#topic+Binary-class">Binary-class</a></code> or <code><a href="#topic+Show-class">Show-class</a></code> just for S3. This is inteded to be used with <code><a href="#topic+retList">retList</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Print'
print(x, ...)

## S3 method for class 'Infix'
e1 + e2

## S3 method for class 'Infix'
e1 - e2

## S3 method for class 'Infix'
e1 / e2

## S3 method for class 'Infix'
e1 %% e2

## S3 method for class 'Infix'
e1 ^ e2

## S3 method for class 'Infix'
e1 &lt; e2

## S3 method for class 'Infix'
e1 &gt; e2

## S3 method for class 'Infix'
e1 == e2

## S3 method for class 'Infix'
e1 &gt;= e2

## S3 method for class 'Infix'
e1 &lt;= e2

## S3 method for class 'Infix'
e1 &amp; e2

## S3 method for class 'Infix'
!x

## S3 method for class 'Infix'
as.environment(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.Print_+3A_x">x</code></td>
<td>
<p>an object</p>
</td></tr>
<tr><td><code id="print.Print_+3A_...">...</code></td>
<td>
<p>arguments passed to the local print method.</p>
</td></tr>
<tr><td><code id="print.Print_+3A_e1">e1</code></td>
<td>
<p>lhs operand</p>
</td></tr>
<tr><td><code id="print.Print_+3A_e2">e2</code></td>
<td>
<p>rhs operand</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The lhs is coerced with <code>as.environment</code> and in that environment the binary operators must be found and named as <code>.&lt;binaryOperator&gt;</code> (see the example for <code><a href="#topic+retList">retList</a></code>). This is implemented for the following operators: <code>+, -, *, /, %%, ^, &lt;, &gt;, ==, &gt;=, &lt;=, &amp;</code>. Also part of the operators you can implement with Infix is <code>!</code>, although it is unary.
</p>


<h3>See Also</h3>

<p><a href="#topic+Binary-class">Binary-class</a>, <a href="#topic+retList">retList</a>
</p>

<hr>
<h2 id='Private-class'>Private class</h2><span id='topic+Private-class'></span><span id='topic++24+2CPrivate-method'></span><span id='topic++24+3C-+2CPrivate-method'></span><span id='topic++5B+5B+2CPrivate-method'></span><span id='topic++5B+5B+3C-+2CPrivate-method'></span>

<h3>Description</h3>

<p>This is a virtual class to be contained in other class definitions. It overrides the default subset functions <code>$</code> and <code>[[</code> such that private member of a class can not be accessed. Private is every object which has a name with a leading &quot;.&quot; (<code>grepl("^\\.", name)</code>). After this check the standard method for class 'envRefClass' is called or an error is reported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Private'
x$name

## S4 replacement method for signature 'Private'
x$name &lt;- value

## S4 method for signature 'Private'
x[[i, j, ...]]

## S4 replacement method for signature 'Private'
x[[i, j, ...]] &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Private-class_+3A_x">x</code></td>
<td>
<p>the object</p>
</td></tr>
<tr><td><code id="Private-class_+3A_name">name</code></td>
<td>
<p>name of field or method</p>
</td></tr>
<tr><td><code id="Private-class_+3A_value">value</code></td>
<td>
<p>any object</p>
</td></tr>
<tr><td><code id="Private-class_+3A_i">i</code></td>
<td>
<p>like name</p>
</td></tr>
<tr><td><code id="Private-class_+3A_j">j</code></td>
<td>
<p>ignored</p>
</td></tr>
<tr><td><code id="Private-class_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+defineRefClass">defineRefClass</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ClassWithPrivateField &lt;- defineRefClass({
  Class &lt;- "ClassWithPrivateField"
  contains &lt;- "Private"
  
  .p &lt;- "numeric"
  
  getP &lt;- function() .p
  setP &lt;- function(v) .self$.p &lt;- v
})

test &lt;- ClassWithPrivateField()
stopifnot(inherits(try(test$.p), "try-error"))
stopifnot(inherits(try(test$.p &lt;- 2), "try-error"))
stopifnot(inherits(try(test[[".p"]]), "try-error"))
stopifnot(inherits(try(test[[".p"]] &lt;- 2), "try-error"))
</code></pre>

<hr>
<h2 id='publicFunction'>Constructors for public members</h2><span id='topic+publicFunction'></span><span id='topic+publicValue'></span><span id='topic++24+2CpublicEnv-method'></span>

<h3>Description</h3>

<p>These functions are used internally. You should not rely on them. Use <code><a href="#topic+public">public</a></code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>publicFunction(fun)

publicValue(x = NULL, validity = function(x) TRUE)

## S4 method for signature 'publicEnv'
x$name
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="publicFunction_+3A_fun">fun</code></td>
<td>
<p>function definition</p>
</td></tr>
<tr><td><code id="publicFunction_+3A_x">x</code></td>
<td>
<p>a default value</p>
</td></tr>
<tr><td><code id="publicFunction_+3A_validity">validity</code></td>
<td>
<p>an optional validity function for the set method. Returns TRUE or FALSE.</p>
</td></tr>
<tr><td><code id="publicFunction_+3A_name">name</code></td>
<td>
<p>name of member in refernece object</p>
</td></tr>
</table>

<hr>
<h2 id='retList'>Generic constructor function</h2><span id='topic+retList'></span><span id='topic+funNames'></span><span id='topic+asEnv'></span><span id='topic+stripSelf'></span>

<h3>Description</h3>

<p>This functions can be used to construct a list with class attribute and
merged with another list called super. The constructed list will contain (by
default) all visible objects from the environment from which <code>retList</code>
is called.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>retList(class = NULL, public = ls(envir), super = list(),
  superEnv = asEnv(super), mergeFun = envMerge, envir = parent.frame())

funNames(envir = parent.frame())

asEnv(x)

stripSelf(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="retList_+3A_class">class</code></td>
<td>
<p>character giving the class name.</p>
</td></tr>
<tr><td><code id="retList_+3A_public">public</code></td>
<td>
<p>character with the names to include.</p>
</td></tr>
<tr><td><code id="retList_+3A_super">super</code></td>
<td>
<p>a list/object to be extended.</p>
</td></tr>
<tr><td><code id="retList_+3A_superenv">superEnv</code></td>
<td>
<p>environment where new methods will live in.</p>
</td></tr>
<tr><td><code id="retList_+3A_mergefun">mergeFun</code></td>
<td>
<p>function with two arguments. Knows how to join/merge
environments - <code>mergeFun(envir, superEnv)</code>. Default: <a href="#topic+envMerge">envMerge</a>.</p>
</td></tr>
<tr><td><code id="retList_+3A_envir">envir</code></td>
<td>
<p>this is the environment you want to convert into the list.
Default is the environment from which the function is called.</p>
</td></tr>
<tr><td><code id="retList_+3A_x">x</code></td>
<td>
<p>a list</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>funNames</code> returns the names of functions in the environment
from which it is called.
</p>
<p><code>asEnv</code> trys to find an environment for x. If x is NULL or an
empty list, the function returns <code>NULL</code>. (Else) If x has an attribute
called <code>.self</code> it is this attribute which is returned. (Else) If x is
a list it is converted to an environment.
</p>


<h3>See Also</h3>

<p><a href="base.html#topic+ls">ls</a>, <a href="#topic++2B.Infix">+.Infix</a>, <a href="#topic+print.Print">print.Print</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># To get a quick overview of the package:
vignette("Introduction", "aoos")

# To get more infos about retList:
vignette("retListClasses", "aoos")

# To get some infos about performance:
vignette("performance", "aoos")

# A simple class with one method:
Test &lt;- function(.x) {
  getX &lt;- function() .x
  retList("Test")
}

stopifnot(Test(2)$getX() == 2)

# A second example inheriting from Test
Test2 &lt;- function(.y) {
  getX2 &lt;- function() .x * 2
  retList("Test2", super = Test(.y))
}

stopifnot(Test2(2)$getX() == 2)
stopifnot(Test2(2)$getX2() == 4)

### Rational numbers example with infix operators and print method

Rational &lt;- function(numer, denom) {

  gcd &lt;- function(a, b) if(b == 0) a else Recall(b, a %% b)

  g &lt;- gcd(numer, denom)
  numer &lt;- numer / g
  denom &lt;- denom / g

  print &lt;- function(x, ...) cat(paste0(numer, "/", denom, "\n"))

  ".+" &lt;- function(that) {
    Rational(numer = numer * that$denom + that$numer * denom,
             denom = denom * that$denom)
  }

  ".-" &lt;- function(that) {
    if (missing(that)) {
      Rational(-numer, denom)
    } else {
      .self + (-that)
    }
  }

  # Return only what should be visible from this scope:
  retList(c("Rational", "Infix", "Print"),
          c("numer", "denom", "neg", "print"))

}

rational &lt;- Rational(2, 3)
rational + rational
rational - rational
</code></pre>

<hr>
<h2 id='Show-class'>Show class</h2><span id='topic+Show-class'></span><span id='topic+show+2CShow-method'></span>

<h3>Description</h3>

<p>This is a virtual class to be contained in other class definitions. It overrides the default show method and is intended to be used with the aoos class system (<code><a href="#topic+defineClass">defineClass</a></code>). The show method will simply look for a method <code>show</code> defined as member of a class definition.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Show'
show(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Show-class_+3A_object">object</code></td>
<td>
<p>an object inheriting from <code>Show</code></p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+defineClass">defineClass</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ClassWithShowMethod &lt;- defineClass("ClassWithShowMethod", contains = "Show", {
  show &lt;- function() print(summary(.self))
})

ClassWithShowMethod()
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
