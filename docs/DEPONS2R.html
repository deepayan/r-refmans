<!DOCTYPE html><html><head><title>Help for package DEPONS2R</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DEPONS2R}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ais.to.DeponsShips'><p>Convert ship tracks to DeponsShips object</p></a></li>
<li><a href='#aisdata'><p>Position for three ships in the inner Danish waters</p></a></li>
<li><a href='#bathymetry'><p>Bathymetry of the Kattegat area</p></a></li>
<li><a href='#bbox'><p>Get bbox from Depons* object</p></a></li>
<li><a href='#coastline'><p>Coastline of Northern Europe</p></a></li>
<li><a href='#crs'><p>Get or set map projection in Depons* objects</p></a></li>
<li><a href='#DEPONS2R'><p>Package for analyzing DEPONS simulation output</p></a></li>
<li><a href='#DeponsBlockdyn-class'><p>DeponsBlockdyn-class</p></a></li>
<li><a href='#DeponsDyn-class'><p>DeponsDyn-class</p></a></li>
<li><a href='#DeponsRaster-class'><p>DeponsRaster-class</p></a></li>
<li><a href='#DeponsShips-class'><p>DeponsShips-class</p></a></li>
<li><a href='#DeponsTrack-class'><p>DeponsTrack-class</p></a></li>
<li><a href='#dyn'><p>Extract population dynamics from objects</p></a></li>
<li><a href='#get.latest.sim'><p>Get name of newest file</p></a></li>
<li><a href='#get.simtime'><p>Get simulation date</p></a></li>
<li><a href='#interpolate.ais.data'><p>Interpolate AIS data</p></a></li>
<li><a href='#landscape+26lt+3B-'><p>Get or set the landscape name</p></a></li>
<li><a href='#make.blocksraster'><p>Makes new file with blocks</p></a></li>
<li><a href='#make.clip.poly'><p>Make clipping polygon from bbox</p></a></li>
<li><a href='#make.windfarms'><p>Make wind farm construction scenario</p></a></li>
<li><a href='#plot+2CDeponsBlockdyn+2Cmissing-method'><p>Plot a DeponsBlockdyn object</p></a></li>
<li><a href='#plot+2CDeponsDyn+2Cmissing-method'><p>Plot a DeponsDyn object</p></a></li>
<li><a href='#plot+2CDeponsRaster+2CANY-method'><p>Plot a DeponsRaster object</p></a></li>
<li><a href='#plot+2CDeponsShips+2Cmissing-method'><p>Plot a DeponsShips object</p></a></li>
<li><a href='#plot+2CDeponsTrack+2Cmissing-method'><p>Plot a DeponsTrack object</p></a></li>
<li><a href='#porpoisebdyn'><p>Simulated porpoise population dynamics</p></a></li>
<li><a href='#porpoisedyn'><p>Simulated porpoise population dynamics</p></a></li>
<li><a href='#porpoisetrack'><p>Simulated porpoise track</p></a></li>
<li><a href='#read.DeponsBlockdyn'><p>Reading simulated population count for blocks</p></a></li>
<li><a href='#read.DeponsDyn'><p>Reading DEPONS simulation output</p></a></li>
<li><a href='#read.DeponsParam'><p>Read simulation parameters</p></a></li>
<li><a href='#read.DeponsRaster'><p>Reading DEPONS raster files</p></a></li>
<li><a href='#read.DeponsShips'><p>Read DEPONS ship files</p></a></li>
<li><a href='#read.DeponsTrack'><p>Reading DEPONS track files</p></a></li>
<li><a href='#routes'><p>Get or define routes in DeponsShips objects</p></a></li>
<li><a href='#shipdata'><p>Hypothetical ships on  routes through Kattegat</p></a></li>
<li><a href='#ships'><p>Get or define ships in DeponsShips objects</p></a></li>
<li><a href='#startday'><p>Get or set start date for simulation</p></a></li>
<li><a href='#Summary-methods'><p>Summary</p></a></li>
<li><a href='#tick.to.time'><p>Convert tick number to date</p></a></li>
<li><a href='#title+26lt+3B-'><p>Get or set the title of Depons* objects</p></a></li>
<li><a href='#write+2CDeponsShips-method'><p>Write DEPONS ship files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Read, Plot and Analyse Output from the DEPONS Model</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.2</td>
</tr>
<tr>
<td>Author:</td>
<td>Jacob Nabe-Nielsen and Caitlin K. Frankish</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jacob Nabe-Nielsen &lt;jnn@ecos.au.dk&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Methods for analyzing population dynamics and movement tracks simulated using the DEPONS model <a href="https://www.depons.eu">https://www.depons.eu</a> (v.3.0), for manipulating input raster files, shipping routes and for analyzing sound propagated from ships.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>LazyDataCompression:</td>
<td>xz</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>raster, methods, sp, sf, terra, utils, grDevices, xml2,
jsonlite</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-09-18 16:52:33 UTC; au155800</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-09-18 20:40:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='ais.to.DeponsShips'>Convert ship tracks to DeponsShips object</h2><span id='topic+ais.to.DeponsShips'></span>

<h3>Description</h3>

<p>Convert Automatic Identification System (AIS) data for ships to
ship track objects. This is done by cropping one or more ship tracks to the
extent of a landscape and converting the data to a <code>DeponsShips-class</code>
object. If the AIS data does not include ship positions recorded in half-hour
steps, the tracks are interpolated to make objects suitable for use in DEPONS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ais.to.DeponsShips(data, landsc, title = "NA", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ais.to.DeponsShips_+3A_data">data</code></td>
<td>
<p>data.frame with ship positions and the times at which the
positions were recorded. Must contain the columns 'id', 'time' (of the form
&quot;
type, character), 'length' (ship length, meters), 'x', and 'y' (position,
meters/UTM).</p>
</td></tr>
<tr><td><code id="ais.to.DeponsShips_+3A_landsc">landsc</code></td>
<td>
<p>A <code>DeponsRaster</code> object corresponding to the
landscape that the ships move in. It is assumed that the spatial projection
of the ship positions corresponds to that of the DeponsRaster object</p>
</td></tr>
<tr><td><code id="ais.to.DeponsShips_+3A_title">title</code></td>
<td>
<p>Title of the output object</p>
</td></tr>
<tr><td><code id="ais.to.DeponsShips_+3A_...">...</code></td>
<td>
<p>Optional parameters, including 'startday' and 'endday'
(&quot;
from 'data'. If startday = endday the output object will contain up to
49 positions from the selected date for each vessel track.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>DeponsShips</code> object containing one or more ships
assigned to each of the routes in the object. All ships on a particular
route move at the same speed along the route. The routes are
defined by x and y coordinates based on the same coordinate reference
system as the landscape they are located in. The speed that ships use after
reaching a particular position (a particular 'virtual buoy') is calculated
from the distance to the following position, and the time it takes reaching
that position. If speed is included in the input AIS data, this is NOT used.
The routes include one position per half-hour time step, corresponding to
the default time step used in the DEPONS model. If input data does not
include one position per half hour, new positions are generated using linear
interpolation. If the input data contains many positions in a particular
half-hour interval, only the positions closest to the half-hour interval are
used. The routes contain information about the number of half-hour
intervals were ships 'pause' at a particular location, e.g. in a
port. These are calculated based on the input AIS data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+aisdata">aisdata</a></code> for an example of data that can be used as
input to ais.to.DeponsShips. The function builds on
<code><a href="#topic+interpolate.ais.data">interpolate.ais.data</a></code>, which interpolates tracks to ensure
that there is a position every 30 minutes.
See <code><a href="#topic+write.DeponsShips">write.DeponsShips</a></code> for conversion of
<code>DeponsShips</code> objects to json-files to be used in DEPONS. Use
<code><a href="#topic+routes">routes</a></code>, <code><a href="#topic+ships">ships</a></code>, and <code><a href="#topic+title">title</a></code> for
inspection/modification of the ship tracks.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(aisdata)
plot(aisdata$x, aisdata$y, type="n", asp=1)
ids &lt;- sort(unique(aisdata$id))
my.colors &lt;- heat.colors(length(ids))
for (i in 1:length(ids)) {
  id &lt;- ids[i]
  points(aisdata$x[aisdata$id==id], aisdata$y[aisdata$id==id],
     cex=0.6, col=my.colors[i])
}
data(bathymetry)
plot(bathymetry, add=TRUE)
depons.ais &lt;- ais.to.DeponsShips(aisdata, bathymetry)
the.routes &lt;- routes(depons.ais)
for (i in 1:length(ids)) {
points(the.routes[[i]]$x, the.routes[[i]]$y,
        cex=0.6, pch=16, col=my.colors[i])
}
depons.ais &lt;- ais.to.DeponsShips(aisdata, bathymetry,
   startday="2015-12-20", endday="2015-12-20")
routes(depons.ais)
aisdata2 &lt;- aisdata
aisdata2$time &lt;- format(as.POSIXct(aisdata$time)+300)
depons.ais2 &lt;- ais.to.DeponsShips(aisdata2, bathymetry,
                               startday="2015-12-20", endday="2015-12-21")
routes(depons.ais2)
</code></pre>

<hr>
<h2 id='aisdata'>Position for three ships in the inner Danish waters</h2><span id='topic+aisdata'></span>

<h3>Description</h3>

<p>Automatic identification system (AIS) data for three ships
in Kattegat and the Western Baltic from 20 Dec 2015. The data set includes
the variables id (the Maritime Mobile Service Identity number), time,
speed (in knots), type, length (in metres), x and y (which provide the
coordinates of the ship at a given time. The coordinates use the UTM zone 32
projection (CRS = &quot;+proj=utm +zone=32 +units=m +no_defs +datum=WGS84&quot;).
</p>


<h3>Format</h3>

<p>data.frame
</p>

<hr>
<h2 id='bathymetry'>Bathymetry of the Kattegat area</h2><span id='topic+bathymetry'></span>

<h3>Description</h3>

<p>The standard bathymetry file for Kattegat which is used in DEPONS
simulations. It is based on a raster file with 1000 rows and 600 columns
where each grid cell corresponds to 400 m x 400 m. Cells on land are
assigned a missing data value of -9999.
</p>
<p>The Kattegat landscapes use the UTM zone 32 projection, (EPSG:32632) as in
the study by Nabe-Nielsen et al (2014). The corresponding proj4string is
&quot;+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs&quot;
(see <a href="https://epsg.io/32632">https://epsg.io/32632</a>).
</p>


<h3>Format</h3>

<p>DeponsRaster
</p>


<h3>References</h3>

<p>Nabe-Nielsen, J., Sibly, R. M., Tougaard, J., Teilmann, J., &amp;
Sveegaard, S. (2014). Effects of noise and by-catch on a Danish harbour
porpoise population. Ecological Modelling, 272, 242–251.
<a href="https://doi.org/10.1016/j.ecolmodel.2013.09.025">doi:10.1016/j.ecolmodel.2013.09.025</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsRaster-class">DeponsRaster-class</a></code>
</p>

<hr>
<h2 id='bbox'>Get bbox from Depons* object</h2><span id='topic+bbox'></span><span id='topic+bbox+2CDeponsRaster-method'></span><span id='topic+bbox+2CDeponsTrack-method'></span>

<h3>Description</h3>

<p>Retrieves spatial bounding box from object. If a Depons* object
is a DeponsTrack object containing multiple track, the box bounds all tracks.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsRaster'
bbox(obj)

## S4 method for signature 'DeponsTrack'
bbox(obj)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bbox_+3A_obj">obj</code></td>
<td>
<p>DeponsRaster or DeponsTrack object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>matrix</code> defining the northern, southern, eastern and
western boundary of a DeponsRaster object or of one or more DeponsTrack
objects.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+make.clip.poly">make.clip.poly</a></code>
</p>

<hr>
<h2 id='coastline'>Coastline of Northern Europe</h2><span id='topic+coastline'></span>

<h3>Description</h3>

<p>An object of class <code><a href="sp.html#topic+SpatialPolygonsDataFrame">SpatialPolygonsDataFrame</a></code> showing the
coastline of the North Sea, Kattegat, and the Western Baltic. The map projection
used is ETRS89 – EPSG:3035 projection as for the North Sea raster files used
by DEPONS. The corresponding proj4string is &quot;+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000
+y_0=3210000 +datum=WGS84 +units=m +no_defs&quot;.
</p>


<h3>Format</h3>

<p>SpatialPolygonsDataFrame
</p>

<hr>
<h2 id='crs'>Get or set map projection in Depons* objects</h2><span id='topic+crs'></span><span id='topic+crs+2CDeponsTrack-method'></span><span id='topic+crs+3C-+2CDeponsTrack-method'></span><span id='topic+crs+3C-+2CDeponsShips-method'></span><span id='topic+crs+2CDeponsRaster-method'></span><span id='topic+crs+2CDeponsShips-method'></span><span id='topic+crs+3C-'></span><span id='topic+crs+3C-+2CDeponsRaster-method'></span>

<h3>Description</h3>

<p>Get or set the map projection (also known as coordinate reference
system, crs) of DeponsRaster and DeponsTrack objects. For sp objects the
text string defining the crs is called the <code><a href="sp.html#topic+proj4string">proj4string</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsTrack'
crs(x)

## S4 method for signature 'DeponsShips'
crs(x)

## S4 method for signature 'DeponsRaster'
crs(x)

## S4 replacement method for signature 'DeponsTrack'
crs(x) &lt;- value

## S4 replacement method for signature 'DeponsShips'
crs(x) &lt;- value

## S4 replacement method for signature 'DeponsRaster'
crs(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="crs_+3A_x">x</code></td>
<td>
<p>Object of class class <code>DeponsRaster</code>, <code>DeponsShips</code> or
<code>DeponsTrack</code></p>
</td></tr>
<tr><td><code id="crs_+3A_value">value</code></td>
<td>
<p><code><a href="raster.html#topic+proj4string">proj4string</a></code> identifying the map projection</p>
</td></tr>
</table>

<hr>
<h2 id='DEPONS2R'>Package for analyzing DEPONS simulation output</h2><span id='topic+DEPONS2R'></span>

<h3>Description</h3>

<p>Methods for analyzing population dynamics and movement tracks
simulated using the DEPONS model (v.3.0; <a href="http://www.depons.eu">http://www.depons.eu</a>), for
manipulating input raster files, shipping routes and for analyzing sound
propagated from ships.
</p>
<p>The classes used in DEPONS2R include:
</p>

<ul>
<li> <p><code><a href="#topic+DeponsTrack-class">DeponsTrack</a></code> movement tracks, read from &quot;RandomPorpoise.XXX.csv&quot; files
</p>
</li>
<li> <p><code><a href="#topic+DeponsDyn-class">DeponsDyn</a></code> population dynamics data, from &quot;Statistics.XXX.csv&quot; files
</p>
</li>
<li> <p><code><a href="#topic+DeponsBlockdyn-class">DeponsBlockdyn</a></code> data from &quot;PorpoisePerBlock.XXX.csv&quot; files
</p>
</li>
<li> <p><code><a href="#topic+DeponsShips-class">DeponsShips</a></code> data from &quot;ships.json&quot; files or from AIS data
</p>
</li></ul>

<p>Here the <code>DeponsDyn</code> data include both changes in population size and energetics
through time for the entire landscape, whereas <code>DeponsBlockdyn</code> data include
variations in population size in different parts (or 'blocks') of the landscape.
XXX is the date and time when the simulation was finished.
</p>

<hr>
<h2 id='DeponsBlockdyn-class'>DeponsBlockdyn-class</h2><span id='topic+DeponsBlockdyn-class'></span>

<h3>Description</h3>

<p>Stores objects containing population size for different parts of
the landscape (i.e. different 'blocks')
</p>


<h3>Details</h3>

<p>The <code>dyn</code> slot contains a data frame with the columns 'tick',
which indicates the number of half-hourly time steps since the start of the
simulation; a column 'block' indicating the region of the landscape where
animals were counted, a 'count' column with the number of animals in that block
and tick. The 'real.time' column shows the real-world equivalent to 'tick, i.e.
the time that has passed since 'startday'.
</p>


<h3>Slots</h3>


<dl>
<dt><code>title</code></dt><dd><p>Character. Name of the object or simulation</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Character. Identifier for the landscape used in the DEPONS
simulations. The landscapes 'DanTysk', 'Gemini', 'Kattegat', 'North Sea',
'Homogeneous', and 'User defined' are distributed with the DEPONS model.</p>
</dd>
<dt><code>simtime</code></dt><dd><p><code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> object with the date and time when the simulation was
finished. This is read from the name of the imput file.</p>
</dd>
<dt><code>startday</code></dt><dd><p>POSIXlt object with the first day of the simulation, i.e.
the first day in the period that the simulations are intended to represent in
the real world.</p>
</dd>
<dt><code>dyn</code></dt><dd><p>Data frame with simulation output.</p>
</dd>
</dl>


<h3>Note</h3>

<p>DeponsBlockdyn-objects are usually read in from csv files produced during
DEPONS simulations. These files are named 'PorpoisePerBlock.XXX.csv', where XXX
indicates the date and time when the simulation was finished.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.DeponsBlockdyn">plot.DeponsBlockdyn</a></code> and
<code><a href="#topic+read.DeponsBlockdyn">read.DeponsBlockdyn</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a.DeponsBlockdyn &lt;- new("DeponsBlockdyn")
a.DeponsBlockdyn
</code></pre>

<hr>
<h2 id='DeponsDyn-class'>DeponsDyn-class</h2><span id='topic+DeponsDyn-class'></span>

<h3>Description</h3>

<p>Stores objects containing population dynamics output and energetic
output simulated using the DEPONS model.
</p>


<h3>Details</h3>

<p>The following columns are included in the simulation output data
frame: 'tick', which indicates the number of half-hourly time steps since the
start of the simulation; 'count', which indicates the population size at a
given time; 'anim.e', showing the average amount of energy stored by simulated
animals; 'lands.e', which shows the total amount of energy in the landscape,
and 'real.time' which shows the time relative to 'startday'.
</p>


<h3>Slots</h3>


<dl>
<dt><code>title</code></dt><dd><p>Character. Name of the object or simulation</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Character. Identifier for the landscape used in the DEPONS
simulations. The landscapes 'DanTysk', 'Gemini', 'Kattegat', 'North Sea',
'Homogeneous', and 'User defined' are distributed with the DEPONS model.</p>
</dd>
<dt><code>simtime</code></dt><dd><p><code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> object with the date and time when the
simulation was finished. This is read from the name of the imput file.</p>
</dd>
<dt><code>startday</code></dt><dd><p>POSIXlt object with the first day of the simulation, i.e.
the first day in the period that the simulations are intended to represent in
the real world.</p>
</dd>
<dt><code>dyn</code></dt><dd><p>Data frame with simulation output.</p>
</dd>
</dl>


<h3>Note</h3>

<p>DeponsDyn-objects are usually read in from csv files produced during
DEPONS simulations. These files are named 'Statistics.XXX.csv', where XXX
indicates the date and time when the simulation was finished.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.DeponsDyn">plot.DeponsDyn</a></code> and
<code><a href="#topic+read.DeponsDyn">read.DeponsDyn</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a.DeponsDyn &lt;- new("DeponsDyn")
a.DeponsDyn
</code></pre>

<hr>
<h2 id='DeponsRaster-class'>DeponsRaster-class</h2><span id='topic+DeponsRaster-class'></span>

<h3>Description</h3>

<p>Stores objects containing raster landscapes used as input in
DEPONS simulations.
</p>


<h3>Slots</h3>


<dl>
<dt><code>type</code></dt><dd><p>Character. Identifies the kind of data stored in the raster; should
be 'food', 'patches', bathymetry', 'dtc', 'salinity', 'blocks' or 'NA'.</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Character  Identifier for the landscape used in the DEPONS
simulations. The landscapes 'DanTysk', 'Gemini', 'Kattegat', 'North Sea',
'Homogeneous', and 'User defined' are distributed with the DEPONS model.</p>
</dd>
<dt><code>crs</code></dt><dd><p>Object of class &quot;CRS&quot;, i.e. the coordinate reference system. This
is provided as a <code><a href="sp.html#topic+proj4string">proj4string</a></code> text string.</p>
</dd>
<dt><code>header</code></dt><dd><p>Data frame with data on number of columns and rows in the
input raster, the coordinates of the lower left corner, the size of each
grid cell and the integer value used to represent missing data.</p>
</dd>
<dt><code>ext</code></dt><dd><p>Data frame with the extent of the landscape.</p>
</dd>
<dt><code>data</code></dt><dd><p>The actual data values for each of the grid cells.</p>
</dd>
</dl>


<h3>Note</h3>

<p>DeponsRaster-objects are typically read in from ascii raster files that
have been used for DEPONS simulations.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot.DeponsRaster">plot.DeponsRaster</a></code>, <code><a href="#topic+read.DeponsRaster">read.DeponsRaster</a></code> and
<code><a href="#topic+make.blocksraster">make.blocksraster</a></code>. <code><a href="#topic+bathymetry">bathymetry</a></code> is an example
of a <code>DeponsRaster</code>-object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a.deponsraster &lt;- new("DeponsRaster")
a.deponsraster
</code></pre>

<hr>
<h2 id='DeponsShips-class'>DeponsShips-class</h2><span id='topic+DeponsShips-class'></span>

<h3>Description</h3>

<p>Objects containing ship routes and ships
</p>
<p>Methods for manipulating, plotting and analyzing ship routes
and ship agents used in DEPONS simulations.
</p>


<h3>Slots</h3>


<dl>
<dt><code>title</code></dt><dd><p>Name of the object (character)</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Name of the landscape that the ships occur in (character)</p>
</dd>
<dt><code>crs</code></dt><dd><p>CRS object providing the coordinate reference system used; see
<code><a href="sp.html#topic+CRS">CRS</a></code> for details</p>
</dd>
<dt><code>routes</code></dt><dd><p><code>data.frame</code> geographic positions of the 'virtual buoys'
that define one or more ship routes that ship agents follow, and the speed
that the ships should use when following this route. They also provide
information about how long ships should use speed zero when reaching a
specific buoy ('i.e. 'pause', measured in minutes). Can be extracted
using the <code><a href="#topic+routes">routes</a></code> function.</p>
</dd>
<dt><code>ships</code></dt><dd><p><code>data.frame</code> defining each of the ships occurring in DEPONS
simulations, and the routes they occur on. The data frame includes the variables
'name', 'type', 'length', and 'route'. Info can be extracted using the
<code><a href="#topic+ships">ships</a></code> function.</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+plot.DeponsShips">plot.DeponsShips</a></code>,
and <code><a href="#topic+read.DeponsShips">read.DeponsShips</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(shipdata)
ships(shipdata)[1:10,]
routes(shipdata)
plot(shipdata, col=c("red", "purple", "blue"))
</code></pre>

<hr>
<h2 id='DeponsTrack-class'>DeponsTrack-class</h2><span id='topic+DeponsTrack-class'></span>

<h3>Description</h3>

<p>Stores objects containing animal movement tracks simulated using
the DEPONS model
</p>
<p>Classes for manipulating and plotting movement
tracks generated with DEPONS.
</p>


<h3>Slots</h3>


<dl>
<dt><code>title</code></dt><dd><p>Name of the object (character)</p>
</dd>
<dt><code>landscape</code></dt><dd><p>Name of the object (character)</p>
</dd>
<dt><code>simtime</code></dt><dd><p>POSIXlt object with the date and time when the simulation was
finished. This is read from the name of the imput file.</p>
</dd>
<dt><code>crs</code></dt><dd><p>CRS object providing the coordinate reference system used; see
<code><a href="sf.html#topic+st_crs">st_crs</a></code> for details</p>
</dd>
<dt><code>tracks</code></dt><dd><p>Listwith one or more tracks, each stored
as a <code><a href="sp.html#topic+SpatialPointsDataFrame">SpatialPointsDataFrame</a></code> object)</p>
</dd>
</dl>


<h3>See Also</h3>

<p><code><a href="#topic+plot.DeponsTrack">plot.DeponsTrack</a></code> and
<code><a href="#topic+read.DeponsTrack">read.DeponsTrack</a></code>
</p>

<hr>
<h2 id='dyn'>Extract population dynamics from objects</h2><span id='topic+dyn'></span><span id='topic+dyn+2CDeponsDyn-method'></span><span id='topic+dyn+2CDeponsBlockdyn-method'></span>

<h3>Description</h3>

<p>Extract population dynamics from objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsDyn'
dyn(x)

## S4 method for signature 'DeponsBlockdyn'
dyn(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dyn_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsBlockdyn</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='get.latest.sim'>Get name of newest file</h2><span id='topic+get.latest.sim'></span>

<h3>Description</h3>

<p>Returns the name of the newest simulation output of a particular
type within the specified directory. The date and time are extracted from the
file name.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.latest.sim(type = "dyn", dir)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.latest.sim_+3A_type">type</code></td>
<td>
<p>Type of simulation output to check; can be one of:
&quot;dyn&quot; (for looking in &quot;Statistics.XX.csv&quot; files),
&quot;blockdyn&quot; (for looking in &quot;PorpoisePerBlock.XX.csv&quot; files)
&quot;track&quot; (for looking in &quot;RandomPorpoise.XX.csv&quot; files).</p>
</td></tr>
<tr><td><code id="get.latest.sim_+3A_dir">dir</code></td>
<td>
<p>Directory to look for simulation output in (character string)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string with the name of the most recent simulation output
file.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.DeponsBlockdyn">read.DeponsBlockdyn</a></code> for example.
</p>

<hr>
<h2 id='get.simtime'>Get simulation date</h2><span id='topic+get.simtime'></span>

<h3>Description</h3>

<p>Returns the date and time when a specific simulation was finished,
obtained from the date stored as part of the file name. The date format is system
dependent, but the function attemts to extract the data assuming that either
the English or the local language is used.
(a <code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> object)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.simtime(fname = NULL, tz = "GMT")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get.simtime_+3A_fname">fname</code></td>
<td>
<p>Character string with name of the file to extract the simulation
date from, including the path</p>
</td></tr>
<tr><td><code id="get.simtime_+3A_tz">tz</code></td>
<td>
<p>Time zone</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>POSIXlt</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.latest.sim">get.latest.sim</a></code>
</p>

<hr>
<h2 id='interpolate.ais.data'>Interpolate AIS data</h2><span id='topic+interpolate.ais.data'></span>

<h3>Description</h3>

<p>Interpolates ship movement tracks obtained from Automatic
Identification System (AIS) data to obtain exactly one position per 30
minutes. The first and last position in the original track are omitted
unless minutes = 0 or 30 and seconds = 0.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>interpolate.ais.data(aisdata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="interpolate.ais.data_+3A_aisdata">aisdata</code></td>
<td>
<p>Data frame including the columns 'id' (ship identifier),
'time' (text string readable by <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>), 'x' and 'y'
(recorded ship position, unit: meters), and potentially additional columns</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a data frame with the same columns as the input data
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read.DeponsShips">read.DeponsShips</a></code> and <code><a href="#topic+ais.to.DeponsShips">ais.to.DeponsShips</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(aisdata)
ais.testdata &lt;- aisdata[c(12,14,16) ,]
plot(ais.testdata[c("x", "y")], asp=1, col="green", pch=16, xlim=c(780000, 837000))
lines(ais.testdata[c("x", "y")])
# Add 600 sec to 'time' to mis-allign with intervcal needed
ais.testdata$time &lt;- format(as.POSIXlt(ais.testdata$time)+600)
text(ais.testdata[c("x", "y")]-900, ais.testdata$time, adj=0, cex=0.5)
interpolated &lt;- interpolate.ais.data(ais.testdata)
points(interpolated[,c("x", "y")], col="red")
text(interpolated[c("x", "y")]-900, interpolated$time, adj=0, cex=0.5)
legend("bottomright", bty="n", pch=c(16, 1), col=c("green", "red"),
    legend=c("original positions", "interpolated"))
</code></pre>

<hr>
<h2 id='landscape+26lt+3B-'>Get or set the landscape name</h2><span id='topic+landscape+3C-'></span><span id='topic+landscape+3C-+2CDeponsTrack-method'></span><span id='topic+landscape'></span><span id='topic+landscape+2CDeponsTrack-method'></span><span id='topic+landscape+2CDeponsDyn-method'></span><span id='topic+landscape+3C-+2CDeponsDyn-method'></span><span id='topic+landscape+2CDeponsBlockdyn-method'></span><span id='topic+landscape+3C-+2CDeponsBlockdyn-method'></span>

<h3>Description</h3>

<p>Get or set the landscape name
</p>
<p>Get or set the landscape name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 replacement method for signature 'DeponsTrack'
landscape(x) &lt;- value

## S4 method for signature 'DeponsTrack'
landscape(x)

## S4 replacement method for signature 'DeponsDyn'
landscape(x) &lt;- value

## S4 method for signature 'DeponsDyn'
landscape(x)

## S4 replacement method for signature 'DeponsBlockdyn'
landscape(x) &lt;- value

## S4 method for signature 'DeponsBlockdyn'
landscape(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="landscape+2B26lt+2B3B-_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsBlockdyn</code>.</p>
</td></tr>
<tr><td><code id="landscape+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>Name of the landscape (character)</p>
</td></tr>
</table>

<hr>
<h2 id='make.blocksraster'>Makes new file with blocks</h2><span id='topic+make.blocksraster'></span><span id='topic+make.blocksraster+2CDeponsRaster-method'></span>

<h3>Description</h3>

<p>Produces a DeponsRaster object of type='blocks' for use in DEPONS
simulations. This allows animals to be counted within specific regions (blocks)
of the landscape during the simulation. The new blocks can be specified as
either matrices or SpatialPolygons objects. For matrices, the blocks are
defined as the smallest rectangle that includes all the specified positions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsRaster'
make.blocksraster(
  template,
  blocks = NA,
  blockvals = NULL,
  NAvalue = -9999,
  plot = FALSE,
  fname = NULL,
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.blocksraster_+3A_template">template</code></td>
<td>
<p>DeponsRaster object used as template for new blocks file</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_blocks">blocks</code></td>
<td>
<p>list of areas to be used for new blocks. Each item in 'blocks'
should be a matrix (with two columns, corresponding to x- and y-coordinates)
or a SpatialPolygons object</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_blockvals">blockvals</code></td>
<td>
<p>Vector of integer values defining the labels of the new blocks.
The first value defines the background value, so the length of 'blockvals'
should equal the number of blocks plus 1</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_navalue">NAvalue</code></td>
<td>
<p>Value used for missing data in the output object</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_plot">plot</code></td>
<td>
<p>If TRUE, the raster block is plotted</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_fname">fname</code></td>
<td>
<p>Name of the output raster file (character string ending with
'.asc'). No file is written to disk if fname is not provided.</p>
</td></tr>
<tr><td><code id="make.blocksraster_+3A_overwrite">overwrite</code></td>
<td>
<p>Whether to replace existing file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>RasterLayer</code> object defining different subregions of the
landscape where animals should be counted.
</p>


<h3>Note</h3>

<p>The blocks file should not be modified when running DEPONS
simulations using the 'Kattegat' landscape. In this landscape the simulated
animals use the blocks file for navigation. Also note that blocks are added
to the new blocks raster in the order they are file in the order in which
they are listed in 'blocks', so the order mattes if the blocks overlap.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#Load file to use as template for new blocks file
data("bathymetry")

# Make list of blocks to create
new.blocks &lt;- list()
x &lt;- runif(8, 700000, 760000)
y &lt;- runif(8, 6200000, 6300000)
new.blocks[[1]] &lt;- cbind(x,y)
x &lt;- c(600000, 635000, 670000, 635000)
y &lt;- c(6150000, 6200000, 6150000, 6100000)
library(sp)
srl &lt;- list(Polygon(cbind(x,y)))
Srl &lt;- list(Polygons(srl, ID=as.vector("p")))
new.blocks[[2]] &lt;- SpatialPolygons(Srl, proj4string=crs(bathymetry))

make.blocksraster(bathymetry, new.blocks, plot=TRUE)
points(new.blocks[[1]])
plot(new.blocks[[2]], add=TRUE)


the.dir &lt;- tempdir()
make.blocksraster(bathymetry, new.blocks, fname=paste0(the.dir, "/test.asc"))

</code></pre>

<hr>
<h2 id='make.clip.poly'>Make clipping polygon from bbox</h2><span id='topic+make.clip.poly'></span><span id='topic+make.clip.poly+2Cmatrix-method'></span>

<h3>Description</h3>

<p>Makes a polygon from a bounding box to use for
clipping the coastline, or other SpatialPolygons objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'matrix'
make.clip.poly(bbox, crs)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.clip.poly_+3A_bbox">bbox</code></td>
<td>
<p>2x2 matrix</p>
</td></tr>
<tr><td><code id="make.clip.poly_+3A_crs">crs</code></td>
<td>
<p>CRS object defining the projection of the SpatialPolygons object
to be clipped</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>SpatialPolygons</code> object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bbox">bbox</a></code> for creation of bbox matrix from DeponsRaster
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(bathymetry)
bbox &lt;- cbind("min"=c(549517, 6155000), "max"=c(636000, 6210000))
rownames(bbox) &lt;- c("x", "y")
clip.poly &lt;- make.clip.poly(bbox, crs(bathymetry))
</code></pre>

<hr>
<h2 id='make.windfarms'>Make wind farm construction scenario</h2><span id='topic+make.windfarms'></span>

<h3>Description</h3>

<p>Produce a hypothetical wind farm construction scenario, specifying
the position and timing of individual piling events, as well as the sound
source level. All wind farms are assumed to consist of the same number of
turbines, laid out in a rectangular grid. The start and end tick (i.e. the
number of half-hour intervals since simulation start) is generated based on
provided values for the time it required for each piling and the time between
piling events.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make.windfarms(
  area.file,
  area.def,
  n.wf,
  n.turb,
  turb.dist,
  min.wf.dist,
  impact,
  constr.start,
  constr.end,
  constr.time,
  constr.break,
  iterate = 10000,
  verbose = FALSE,
  wf.coords = "random"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make.windfarms_+3A_area.file">area.file</code></td>
<td>
<p>Name of the raster file specifying where the wind farms
should be constructed.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_area.def">area.def</code></td>
<td>
<p>Value in <code>area.file</code> for the areas were wind farms can
be located</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_n.wf">n.wf</code></td>
<td>
<p>Number of wind farms to construct</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_n.turb">n.turb</code></td>
<td>
<p>Total number of turbines to construct</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_turb.dist">turb.dist</code></td>
<td>
<p>Distance between turbines within a wind farm (meters)</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_min.wf.dist">min.wf.dist</code></td>
<td>
<p>Minimum distance between wind farms (meters)</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_impact">impact</code></td>
<td>
<p>Sound source level (dB); sound emitted from turbines during
construction, i.e. from tickStart to tickEnd (including both start and end)</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_constr.start">constr.start</code></td>
<td>
<p>The tick at which construction of the first turbine starts.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_constr.end">constr.end</code></td>
<td>
<p>The tick at which construction of the very last turbine in
the last wind farm ends.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_constr.time">constr.time</code></td>
<td>
<p>The time it takes to construct a single wind turbine
(number of ticks).</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_constr.break">constr.break</code></td>
<td>
<p>Break between individual pilings within a wind farm,
counted in number of half-hour 'ticks'.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_iterate">iterate</code></td>
<td>
<p>Number of times to try finding a spot for a new wind farm that
is sufficiently far from the nearest neighbouring wind farm (&gt;min.wf.dist).
The number also defines the number of random positions to search through.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_verbose">verbose</code></td>
<td>
<p>Logical; whether messages should be printed to console.</p>
</td></tr>
<tr><td><code id="make.windfarms_+3A_wf.coords">wf.coords</code></td>
<td>
<p>Possible location of the south-western corner of the wind
farms. Defaults to the text &quot;random&quot;, but can also be a data frame with
coordinates in the columns x and y.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame specifying the position of each turbine in a wind farm,
along with the start time and end time for pile driving of the turbine
foundation and the sound source level during pile driving. Can be
exported as a text file and used for controlling DEPONS simulations.
</p>


<h3>Note</h3>

<p>The parameters <code>constr.start</code>, <code>constr.end</code>, <code>constr.time</code>,
and <code>constr.break</code> are truncated to nearest integer value. Construction
of wind farms starts in WF001 at tick <code>constr.start</code>. Each turbine
foundation is piled over a period of <code>constr.time</code>, followed by a
noise-free period of <code>constr.break</code>. Several pile driving operations may
take place at the same time, to ensure that the last piling ends before <code>constr.end</code>.
</p>

<hr>
<h2 id='plot+2CDeponsBlockdyn+2Cmissing-method'>Plot a DeponsBlockdyn object</h2><span id='topic+plot+2CDeponsBlockdyn+2Cmissing-method'></span><span id='topic+plot.DeponsBlockdyn'></span>

<h3>Description</h3>

<p>Plot population dynamics simulated with DEPONS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsBlockdyn,missing'
plot(x, y, dilute = 5, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CDeponsBlockdyn+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>DeponsBlockdyn object</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsBlockdyn+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsBlockdyn+2B2Cmissing-method_+3A_dilute">dilute</code></td>
<td>
<p>Integer. Plot only one in every 'dilute' values. Defaults to
5, which yields a plot of the first simulated value and one in every five of
the following values.</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsBlockdyn+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>Optional plotting parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>data.frame</code> listing blocks where no animals were counted
(returned invisibly)
</p>


<h3>Note</h3>

<p>The function returns a data frame with numbers of blocks with no agents.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("porpoisebdyn")
my.col &lt;- c("red", "darkgreen", "orange")
plot(porpoisebdyn, col=my.col)
legend("bottomright", bty="n", fill=my.col, legend=paste("Block", 0:2))

# Show all data points for small range of x-values
plot(porpoisebdyn, xlim=c(1950, 2050), ylim=c(4850, 5050), type="p", dilute=1, col=my.col)
</code></pre>

<hr>
<h2 id='plot+2CDeponsDyn+2Cmissing-method'>Plot a DeponsDyn object</h2><span id='topic+plot+2CDeponsDyn+2Cmissing-method'></span><span id='topic+plot.DeponsDyn'></span>

<h3>Description</h3>

<p>Plot population dynamics simulated with DEPONS
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsDyn,missing'
plot(x, y, dilute = 5, plot.energy = TRUE, plot.legend = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>DeponsDyn object</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_dilute">dilute</code></td>
<td>
<p>Integer. Plot only one in every 'dilute' values. Defaults to
5, which yields a plot of the first simulated value and one in every five of
the following values.</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_plot.energy">plot.energy</code></td>
<td>
<p>If set to TRUE it plots the amount of energy stored in
simulated and in the landscape in addition to the population count</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_plot.legend">plot.legend</code></td>
<td>
<p>If set to TRUE, a legend is plotted</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsDyn+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>Optional plotting parameters</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("porpoisedyn")

# Plot for specific range of years
rg &lt;- c(as.POSIXlt("2011-01-01"), as.POSIXlt("2018-12-31"))
plot(porpoisedyn, xlim=as.POSIXct(rg), plot.energy=TRUE)

## Not run: 
# Read data from default DEPONS simulation directory:
sim.dir &lt;- "/Applications/DEPONS 2.1/DEPONS"
new.sim.name &lt;- get.latest.sim(dir=sim.dir)
new.sim.out &lt;- read.DeponsDyn(fname=paste(sim.dir, new.sim.name, sep="/"))
plot(new.sim.out)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot+2CDeponsRaster+2CANY-method'>Plot a DeponsRaster object</h2><span id='topic+plot+2CDeponsRaster+2CANY-method'></span><span id='topic+plot.DeponsRaster'></span><span id='topic+plot+2CDeponsRaster+2CDeponsTrack-method'></span>

<h3>Description</h3>

<p>Plot the values in a DeponsRaster object. Porpoisetracks or
other kinds of lines, poits etc. can be drawn on top of the plot by adding
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsRaster,ANY'
plot(x, y, col, trackToPlot = 1, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CDeponsRaster+2B2CANY-method_+3A_x">x</code></td>
<td>
<p><code>DeponsRaster</code> object</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsRaster+2B2CANY-method_+3A_y">y</code></td>
<td>
<p>A <code>DeponsTrack</code> object or missing</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsRaster+2B2CANY-method_+3A_col">col</code></td>
<td>
<p>A color palette, i.e. a vector of n contiguous colors. Reasonable
defaults are provided.</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsRaster+2B2CANY-method_+3A_tracktoplot">trackToPlot</code></td>
<td>
<p>Integer indicating which track to plot if the DeponsTrack
object contains more than one track. Ignored if <code>y</code> is missing</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsRaster+2B2CANY-method_+3A_...">...</code></td>
<td>
<p>Other optional plotting parameters, including 'axes', 'legend',
and 'main'.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>


<h3>See Also</h3>

<p>See method for <code><a href="raster.html#topic+plot">plot</a></code> in the <code>raster</code>
package for plotting parameters and <code><a href="#topic+plot.DeponsTrack">plot.DeponsTrack</a></code> for
plotting of DeponsRasters cropped to the extent of tracks.
</p>

<hr>
<h2 id='plot+2CDeponsShips+2Cmissing-method'>Plot a DeponsShips object</h2><span id='topic+plot+2CDeponsShips+2Cmissing-method'></span><span id='topic+plot.DeponsShips'></span>

<h3>Description</h3>

<p>Plot the tracks that ship agents move along in DEPONS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsShips,missing'
plot(x, y, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CDeponsShips+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>DeponsShips object</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsShips+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsShips+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>Optional plotting parameters, including 'col', 'main',
'add.legend', and 'legend.xy' (defaults to 'topright' when add.legend=TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(shipdata)
plot(shipdata, col=c("red", "green", "blue"))


# convert route coordinate units from 'grid squares' to UTM
data(bathymetry)
out &lt;- summary(bathymetry)
left &lt;- out[[4]][1]
bottom &lt;- out[[4]][2]
for (i in 1:3) {
    newroute &lt;- shipdata@routes[[2]][[i]]*400
    newroute$x &lt;- newroute$x + as.numeric(left)
    newroute$y &lt;- newroute$y + as.numeric(bottom)
    shipdata@routes[[2]][[i]] &lt;- newroute
    }

# Reproject coastline and clip to size of Kattegat landscape
library(sp)
data(bathymetry)
data(coastline)
coastline_sf &lt;- sf::st_as_sf(coastline)
coastline2 &lt;- sf::st_transform(coastline_sf, crs(bathymetry))
bbox &lt;- bbox(bathymetry)
clip.poly &lt;- make.clip.poly(bbox, crs(bathymetry))
plot(shipdata, col=c("red", "green", "blue"), add=TRUE, add.legend=TRUE)
plot(clip.poly, add=TRUE)

</code></pre>

<hr>
<h2 id='plot+2CDeponsTrack+2Cmissing-method'>Plot a DeponsTrack object</h2><span id='topic+plot+2CDeponsTrack+2Cmissing-method'></span><span id='topic+plot.DeponsTrack'></span>

<h3>Description</h3>

<p>Plot the coordinates in a movement track simulated with DEPONS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsTrack,missing'
plot(x, y, trackToPlot = 1, add = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot+2B2CDeponsTrack+2B2Cmissing-method_+3A_x">x</code></td>
<td>
<p>DeponsTrack object</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsTrack+2B2Cmissing-method_+3A_y">y</code></td>
<td>
<p>Not used</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsTrack+2B2Cmissing-method_+3A_tracktoplot">trackToPlot</code></td>
<td>
<p>Integer; indicates which track to plot if there is more
than one track in the object. Defaults to 1</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsTrack+2B2Cmissing-method_+3A_add">add</code></td>
<td>
<p>Logical, whether to add the track to an existing plot
one animal was tracked during the simulation.</p>
</td></tr>
<tr><td><code id="plot+2B2CDeponsTrack+2B2Cmissing-method_+3A_...">...</code></td>
<td>
<p>Optional plotting parameters</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(porpoisetrack)
data("porpoisetrack")
plot(porpoisetrack)
</code></pre>

<hr>
<h2 id='porpoisebdyn'>Simulated porpoise population dynamics</h2><span id='topic+porpoisebdyn'></span>

<h3>Description</h3>

<p>An object of class <code>DeponsBlockdyn</code> with output from a DEPONS
simulation based on the North Sea landscape, using a landscape divided into
two blocks. Numbers of animals are counted per block.
</p>


<h3>Format</h3>

<p>DeponsBlockdyn
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsBlockdyn-class">DeponsBlockdyn-class</a></code>, <code><a href="#topic+porpoisedyn">porpoisedyn</a></code>
</p>

<hr>
<h2 id='porpoisedyn'>Simulated porpoise population dynamics</h2><span id='topic+porpoisedyn'></span>

<h3>Description</h3>

<p>An object of class <code>DeponsDyn</code> with output from a DEPONS
simulation based on the Kattegat landscape, assuming that the simulation
represents the period 2010-01-01 onward in the real world. Number of animals
and energy availability is recorded for the entire landscape.
</p>


<h3>Format</h3>

<p>DeponsDyn
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsDyn-class">DeponsDyn-class</a></code>, <code><a href="#topic+porpoisebdyn">porpoisebdyn</a></code>
</p>

<hr>
<h2 id='porpoisetrack'>Simulated porpoise track</h2><span id='topic+porpoisetrack'></span>

<h3>Description</h3>

<p>An object with five elements: <code>title</code>, <code>landscape</code>,
<code>simtime</code>, <code>crs</code>, and <code>tracks</code>. The <code>crs</code> stores information
about the map projection used (&quot;+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs&quot;).
The <code>tracks</code> element is a list of objects of class
<code><a href="sp.html#topic+SpatialPointsDataFrame">SpatialPointsDataFrame</a></code>, each ofwhich corresponds to one
simulated animal. <code>simtime</code> is the simulation date.
</p>


<h3>Format</h3>

<p>DeponsTrack
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsTrack-class">DeponsTrack-class</a></code>
</p>

<hr>
<h2 id='read.DeponsBlockdyn'>Reading simulated population count for blocks</h2><span id='topic+read.DeponsBlockdyn'></span>

<h3>Description</h3>

<p>Function for reading DEPONS simulation output with number of
animals per block for each time step.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsBlockdyn(
  fname,
  title = "NA",
  landscape = "NA",
  simtime = "NA",
  startday = "NA"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsBlockdyn_+3A_fname">fname</code></td>
<td>
<p>Name of the file (character) that contains movement data
generated by DEPONS. The name includes the path to the directory if this is
not the current working directory.</p>
</td></tr>
<tr><td><code id="read.DeponsBlockdyn_+3A_title">title</code></td>
<td>
<p>Optional character string giving name of simulation</p>
</td></tr>
<tr><td><code id="read.DeponsBlockdyn_+3A_landscape">landscape</code></td>
<td>
<p>The landscape used in the simulation</p>
</td></tr>
<tr><td><code id="read.DeponsBlockdyn_+3A_simtime">simtime</code></td>
<td>
<p>Optional text string with date of simulation (format:
yyyy-mm-dd). If not provided this is obtained from name of input file</p>
</td></tr>
<tr><td><code id="read.DeponsBlockdyn_+3A_startday">startday</code></td>
<td>
<p>The start of the period that the  simulation represents, i.e.
the real-world equivalent of 'tick 1' (POSIXlt)</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>DeponsBlockdyn</code> object
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+DeponsBlockdyn-class">DeponsBlockdyn-class</a></code> for details on what is stored in
the output object and <code><a href="#topic+read.DeponsParam">read.DeponsParam</a></code> for reading the parameters
used in the simulation.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# File loaded from default location
the.file &lt;- "/Applications/DEPONS 2.1/DEPONS/PorpoisePerBlock.2020.Sep.02.20_24_17.csv"
file.exists(the.file)
porpoise.blockdyn &lt;- read.DeponsBlockdyn(fname=the.file,
  title="Test simulation with two blocks", landscape="North Sea")
porpoise.blockdyn

# Get the latest simulation
the.file &lt;- get.latest.sim(type="blockdyn", dir="/Applications/DEPONS 2.1/DEPONS")
owd &lt;- getwd()
setwd("/Applications/DEPONS 2.1/DEPONS")
porpoise.blockdyn &lt;- read.DeponsBlockdyn(fname=the.file)
setwd(owd)

## End(Not run)
</code></pre>

<hr>
<h2 id='read.DeponsDyn'>Reading DEPONS simulation output</h2><span id='topic+read.DeponsDyn'></span>

<h3>Description</h3>

<p>Function  for reading simulation output produced by DEPONS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsDyn(
  fname,
  title = "NA",
  landscape = "NA",
  simtime = "NA",
  startday = "NA",
  timestep = 30,
  tz = "GMT"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsDyn_+3A_fname">fname</code></td>
<td>
<p>Name of the file (character) that contains number of
animals for each time step during the simulation, along with their energy and
the amount of food in the landscape. The name includes the path to the directory
if this is not the current working directory.</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_title">title</code></td>
<td>
<p>Optional character string giving name of simulation</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_landscape">landscape</code></td>
<td>
<p>The landscape used in the simulation</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_simtime">simtime</code></td>
<td>
<p>Optional character string with the date and time when the
simulation finished (format yyyy-mm-dd). If not provided this is obtained
from name of input file</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_startday">startday</code></td>
<td>
<p>The start of the period that the  simulation represents, i.e.
the real-world equivalent of 'tick 1' (character string of the
form 'yyyy-mm-dd', or POSIXlt)</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_timestep">timestep</code></td>
<td>
<p>Time step used in the model, in minutes. Defaults to 30 in
DEPONS.</p>
</td></tr>
<tr><td><code id="read.DeponsDyn_+3A_tz">tz</code></td>
<td>
<p>Time zone.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>DeponsDyn</code> object containing simulation output
</p>


<h3>See Also</h3>

<p>See <code><a href="#topic+DeponsDyn-class">DeponsDyn-class</a></code> for details on what is stored in
the output object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
dyn.file &lt;- "/Applications/DEPONS 2.1/DEPONS/Statistics.2020.Sep.02.20_24_17.csv"
file.exists(dyn.file)
porpoisedyn &lt;- read.DeponsDyn(dyn.file, startday=as.POSIXlt("2010-01-01"))
porpoisedyn

## End(Not run)
</code></pre>

<hr>
<h2 id='read.DeponsParam'>Read simulation parameters</h2><span id='topic+read.DeponsParam'></span>

<h3>Description</h3>

<p>Read the parameters that were used for running a specific DEPONS
simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsParam(fname)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsParam_+3A_fname">fname</code></td>
<td>
<p>Name of the XML file (character) that contains the parameter
list used for running a DEPONS simulation. The name includes the path to the
directory if this is not the current working directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The parameter file can be generated from within DEPONS by pressing the
'Save' icon after modifying the user settings on the 'Parameters' tab within
the main DEPONS model window. See TRACE document for details regarding the
parameters in the model: <a href="https://github.com/jacobnabe/DEPONS">https://github.com/jacobnabe/DEPONS</a>. It is strongly recommended that the parameter
list is stored with the simulation output.
</p>


<h3>Value</h3>

<p>Data frame containing all parameters used in a specific
simulation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# Parameters read from file created by DEPONS run in interactive mode
the.file &lt;- "/Applications/DEPONS 2.1/DEPONS/DEPONS.rs/parameters.xml"
pfile &lt;- read.DeponsParam(the.file)

## End(Not run)
</code></pre>

<hr>
<h2 id='read.DeponsRaster'>Reading DEPONS raster files</h2><span id='topic+read.DeponsRaster'></span>

<h3>Description</h3>

<p>Function  for reading raster files that have been used in DEPONS
simulations. DEPONS rasters define amount of food available for simulated
animals, spatial distribution of food patches, bathymetry, and distance to
coast (dtc). The 'blocks' raster enables the user to count animals in
specific parts of the landscape during simulations. See Nabe-Nielsen et al.
(2018) for details regarding these files. In DEPONS 2.0 the salinity raster
file was introduced; see TRACE document for details:
<a href="https://github.com/jacobnabe/DEPONS">https://github.com/jacobnabe/DEPONS</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsRaster(fname, type = "NA", landscape = "NA", crs = "NA")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsRaster_+3A_fname">fname</code></td>
<td>
<p>Filename (character), including the path to the DEPONS raster
file.</p>
</td></tr>
<tr><td><code id="read.DeponsRaster_+3A_type">type</code></td>
<td>
<p>The kind of data stored in the raster; c('food', 'patches',
'bathymetry', 'dtc', 'salinity', 'blocks').</p>
</td></tr>
<tr><td><code id="read.DeponsRaster_+3A_landscape">landscape</code></td>
<td>
<p>Identifier for the landscape used in the DEPONS simulations;
typically set to 'North Sea'.</p>
</td></tr>
<tr><td><code id="read.DeponsRaster_+3A_crs">crs</code></td>
<td>
<p>CRS-object providing the map projection (see <a href="sp.html#topic+CRS">CRS</a>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a DeponsRaster object. The object inherits slots from the
&quot;RasterLayer&quot; class, including &quot;title&quot;, which is used for storing the file
name.
</p>


<h3>References</h3>

<p>Nabe-Nielsen, J., van Beest, F. M., Grimm, V., Sibly, R. M.,
Teilmann, J., &amp; Thompson, P. M. (2018). Predicting the impacts of
anthropogenic disturbances on marine populations. Conservation Letters,
11(5), e12563. <a href="https://doi.org/10.1111/conl.12563">doi:10.1111/conl.12563</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsRaster-class">DeponsRaster-class</a></code>
</p>

<hr>
<h2 id='read.DeponsShips'>Read DEPONS ship files</h2><span id='topic+read.DeponsShips'></span>

<h3>Description</h3>

<p>Function  for reading the json-files that are used for controlling
how ship agents behave in DEPONS. Ships move along pre-defined routes in 30-min
time steps. The routes are defined by the fix-points provided in the
json file, and the geographic projection is assumed to match that of the
landscape.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsShips(fname, title = "NA", landscape = "NA", crs = as.character(NA))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsShips_+3A_fname">fname</code></td>
<td>
<p>Name of the file (character) where ship routes and ships
are defined.</p>
</td></tr>
<tr><td><code id="read.DeponsShips_+3A_title">title</code></td>
<td>
<p>Optional character string with the name of the simulation</p>
</td></tr>
<tr><td><code id="read.DeponsShips_+3A_landscape">landscape</code></td>
<td>
<p>Optional character string with the landscape used in the
simulation</p>
</td></tr>
<tr><td><code id="read.DeponsShips_+3A_crs">crs</code></td>
<td>
<p>Character, coordinate reference system (map projection)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object with the elements <code>title</code> <code>landscape</code>,
<code>crs</code>, <code>routes</code> and <code>ships</code>.
</p>

<hr>
<h2 id='read.DeponsTrack'>Reading DEPONS track files</h2><span id='topic+read.DeponsTrack'></span>

<h3>Description</h3>

<p>Function  for reading movement tracks produced by DEPONS. These
describe movements of simulated animals within the simulation landscape, where
the positions after each 30-min time step are provided using the coordinate
reference system that were used for generating these landscapes.See
van Beest et al. (2018) and Nabe-Nielsen et al. (2013) for details regarding
how these files were generated as a balance between correlated random walk
behaviour and spatial memory behaviour, which allows animals to return to
previously visited food patches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.DeponsTrack(
  fname,
  title = "NA",
  landscape = "NA",
  simtime = "NA",
  crs = as.character(NA),
  tz = "UTC"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.DeponsTrack_+3A_fname">fname</code></td>
<td>
<p>Name of the file (character) that contains movement data
generated by DEPONS. The name includes the path to the directory if this is
not the current working directory.</p>
</td></tr>
<tr><td><code id="read.DeponsTrack_+3A_title">title</code></td>
<td>
<p>Optional character string giving name of simulation</p>
</td></tr>
<tr><td><code id="read.DeponsTrack_+3A_landscape">landscape</code></td>
<td>
<p>Optional character string with the landscape used in the
simulation</p>
</td></tr>
<tr><td><code id="read.DeponsTrack_+3A_simtime">simtime</code></td>
<td>
<p>Character sting with date of simulation (format yyyy-mm-dd).
If not provided this is obtained from name of input file</p>
</td></tr>
<tr><td><code id="read.DeponsTrack_+3A_crs">crs</code></td>
<td>
<p>Character, coordinate reference system (map projection)</p>
</td></tr>
<tr><td><code id="read.DeponsTrack_+3A_tz">tz</code></td>
<td>
<p>Time zone used in simulations. Defaults to UTC/GMT.
#'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>DeponsTrack</code> object with the elements <code>title</code>,
<code>simtime</code>, <code>crs</code>, and <code>tracks</code>. The <code>date</code> is extracted
from input data if not provided explicitly and stored as a
<code><a href="base.html#topic+POSIXlt">POSIXlt</a></code> object. The element <code>tracks</code> is a list of objects
of class <a href="sp.html#topic+SpatialPointsDataFrame">SpatialPointsDataFrame</a>, each of which corresponds to one
simulated animal (several animals can be tracked in one simulation).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(porpoisetrack) # Load data for use in example

# Use standard DEPONS coordinate reference system / map projection:
the.crs &lt;- "+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000
 +datum=WGS84 +units=m +no_defs"

## Not run: 
one.fname &lt;- "~/Applications/DEPONS/
  RandomPorpoise.2020.Jul.31.09_43_10.csv"

porpoisetrack &lt;- read.DeponsTrack(one.fname, title="Track simulated using DEPONS 2.0",
  crs=the.crs)


## End(Not run)

# Plot the first of the simulated tracks
plot(porpoisetrack)
</code></pre>

<hr>
<h2 id='routes'>Get or define routes in DeponsShips objects</h2><span id='topic+routes'></span><span id='topic+routes+2CDeponsShips-method'></span><span id='topic+routes+3C-+2CDeponsShips-method'></span><span id='topic+routes+3C-'></span>

<h3>Description</h3>

<p>Get or define routes in DeponsShips objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsShips'
routes(x)

## S4 replacement method for signature 'DeponsShips'
routes(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="routes_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsShips</code></p>
</td></tr>
<tr><td><code id="routes_+3A_value">value</code></td>
<td>
<p>list with one named element per shipping route. Each element is
a data frame with the variables x, y, speed, and 'pause' which define the
coordinates of the fix-points on the shipping routes and the speeds that ships
have after passing the fix point and until reaching the next fix point. The
variable 'pause' instructs ships about how many minutes to wait before continuing
to move.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>The unit of 'speed' is knots.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+ships">ships</a></code>
</p>

<hr>
<h2 id='shipdata'>Hypothetical ships on  routes through Kattegat</h2><span id='topic+shipdata'></span>

<h3>Description</h3>

<p>The ship routes and ships used in the study by Nabe-Nielsen et
al. (2014). The fix points that define the routes use the UTM zone 32
projection, (EPSG:32632; see <a href="https://epsg.io/32632">https://epsg.io/32632</a>).
</p>
<p>The definitions of the ships has been modified since earlier versions of
DEPONS (i.e. 2.1 and erlier) in that it now includes ship length, type, and
speed (in knots). These are used for calculating the sound source level
(following McGilliwray)
</p>
<p>Automatic identification system (AIS) data for three ships
in Kattegat and the Western Baltic from 20 Dec 2015. The data set includes
the variables id (the Maritime Mobile Service Identity number), time,
speed (in knots), type, length (in meters), x and y (which provide the
coordinates of the ship at a given time. The coordinates use the UTM zone 32
projection (CRS = &quot;+proj=utm +zone=32 +units=m +no_defs +datum=WGS84&quot;). Data
were downloaded from the Danish Maritime Authority web page
(<a href="https://dma.dk">https://dma.dk</a>).
</p>


<h3>Format</h3>

<p>DeponsShips
</p>
<p>data.frame
</p>


<h3>References</h3>

<p>MacGillivray A &amp; de Jong C (2021). A Reference Spectrum Model for Estimating
Source Levels of Marine Shipping Based on Automated Identification System
Data. J Mar Sci Eng 9:369 . <a href="https://doi.org/10.3390/jmse9040369">doi:10.3390/jmse9040369</a>
</p>
<p>Nabe-Nielsen, J., Sibly, R. M., Tougaard, J., Teilmann, J., &amp;
Sveegaard, S. (2014). Effects of noise and by-catch on a Danish harbour
porpoise population. Ecological Modelling, 272, 242–251.
<a href="https://doi.org/10.1016/j.ecolmodel.2013.09.025">doi:10.1016/j.ecolmodel.2013.09.025</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+DeponsShips-class">DeponsShips-class</a></code>
</p>

<hr>
<h2 id='ships'>Get or define ships in DeponsShips objects</h2><span id='topic+ships'></span><span id='topic+ships+2CDeponsShips-method'></span><span id='topic+ships+3C-+2CDeponsShips-method'></span><span id='topic+ships+3C-'></span>

<h3>Description</h3>

<p>Get or define ships in DeponsShips objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsShips'
ships(x)

ships(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ships_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsShips</code></p>
</td></tr>
<tr><td><code id="ships_+3A_value">value</code></td>
<td>
<p>data frame with the 'name', 'type', 'length', and 'route' of
ships to be simulated, as well as 'tickStart' and 'tickEnd' defining when
the ships are to be included in simulations. 'route' is one of the shipping
routes defined in the DeponsShips object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="#topic+routes">routes</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(shipdata)
ships(shipdata)
</code></pre>

<hr>
<h2 id='startday'>Get or set start date for simulation</h2><span id='topic+startday'></span><span id='topic+startday+2CDeponsBlockdyn-method'></span><span id='topic+startday+2CDeponsDyn-method'></span><span id='topic+startday+3C-'></span><span id='topic+startday+3C-+2CDeponsBlockdyn-method'></span><span id='topic+startday+3C-+2CDeponsDyn-method'></span>

<h3>Description</h3>

<p>Get or set start date for simulation
</p>
<p>Get or set start date for simulation
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsBlockdyn'
startday(x)

## S4 method for signature 'DeponsDyn'
startday(x)

## S4 replacement method for signature 'DeponsBlockdyn'
startday(x) &lt;- value

## S4 replacement method for signature 'DeponsDyn'
startday(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="startday_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsDyn</code></p>
</td></tr>
<tr><td><code id="startday_+3A_value">value</code></td>
<td>
<p>POSIXlt or character string of the form 'yyyy-mm-dd'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The start date indicates the start of the period that the simulation
is supposed to represent.
</p>
<p>The start date indicates the start of the period that the simulation
is supposed to represent.
</p>


<h3>Note</h3>

<p>The assignment of a new start time is currently quite time consuming.
</p>

<hr>
<h2 id='Summary-methods'>Summary</h2><span id='topic+Summary-methods'></span><span id='topic+summary'></span><span id='topic+summary+2CDeponsBlockdyn-method'></span><span id='topic+summary+2CDeponsDyn-method'></span><span id='topic+summary+2CDeponsRaster-method'></span><span id='topic+summary+2CDeponsShips-method'></span><span id='topic+summary+2CDeponsTrack-method'></span>

<h3>Description</h3>

<p>Summarizes different kinds of objects created based on output
from the DEPONS model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsBlockdyn'
summary(object)

## S4 method for signature 'DeponsDyn'
summary(object)

## S4 method for signature 'DeponsRaster'
summary(object)

## S4 method for signature 'DeponsShips'
summary(object)

## S4 method for signature 'DeponsTrack'
summary(object)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Summary-methods_+3A_object">object</code></td>
<td>
<p>Depons* object</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The summary method is available for <code><a href="#topic+DeponsTrack-class">DeponsTrack-class</a></code>,
<code><a href="#topic+DeponsDyn-class">DeponsDyn-class</a></code>, <code><a href="#topic+DeponsRaster-class">DeponsRaster-class</a></code>,
and <code><a href="#topic+DeponsBlockdyn-class">DeponsBlockdyn-class</a></code>-objects.
</p>


<h3>Value</h3>

<p>list summarizing the DeponsBlockdyn object
</p>
<p>table summarizing the DeponsBlockdyn object
</p>
<p>list summarizing the DeponsRaster object
</p>
<p>list summarizing the DeponsTrack object
</p>

<hr>
<h2 id='tick.to.time'>Convert tick number to date</h2><span id='topic+tick.to.time'></span>

<h3>Description</h3>

<p>Converts the number of ticks since the start of the simulation
to a specific date while taking into account that DEPONS assumes that there
are 360 days in a simulation year.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tick.to.time(tick, timestep = 30, origin = "2010-01-01", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tick.to.time_+3A_tick">tick</code></td>
<td>
<p>Numeric, or numeric vector; tick number</p>
</td></tr>
<tr><td><code id="tick.to.time_+3A_timestep">timestep</code></td>
<td>
<p>Numeric; length of each simulation time step, in minutes.
Defaults to 30 minutes.</p>
</td></tr>
<tr><td><code id="tick.to.time_+3A_origin">origin</code></td>
<td>
<p>Character. The first day in the period that the simulation represents,
format: 'yyyy-mm-dd'.</p>
</td></tr>
<tr><td><code id="tick.to.time_+3A_...">...</code></td>
<td>
<p>Optional parameters, including time zone (tz)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>object of class <code><a href="base.html#topic+as.POSIXlt">as.POSIXlt</a></code>
</p>


<h3>Note</h3>

<p>The function assumes that there are 30 days in each month, except in
January, February and March with 31, 28 and 31 days, respectively.
</p>

<hr>
<h2 id='title+26lt+3B-'>Get or set the title of Depons* objects</h2><span id='topic+title+3C-'></span><span id='topic+title+3C-+2CDeponsDyn-method'></span><span id='topic+title+3C-+2CDeponsShips-method'></span><span id='topic+title'></span><span id='topic+title+2CDeponsTrack-method'></span><span id='topic+title+3C-+2CDeponsTrack-method'></span><span id='topic+title+2CDeponsDyn-method'></span><span id='topic+title+2CDeponsShips-method'></span>

<h3>Description</h3>

<p>Get or set the title of Depons* objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 replacement method for signature 'DeponsTrack'
title(x) &lt;- value

## S4 replacement method for signature 'DeponsDyn'
title(x) &lt;- value

## S4 replacement method for signature 'DeponsShips'
title(x) &lt;- value

## S4 method for signature 'DeponsTrack'
title(x, value)

## S4 method for signature 'DeponsDyn'
title(x, value)

## S4 method for signature 'DeponsShips'
title(x, value)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="title+2B26lt+2B3B-_+3A_x">x</code></td>
<td>
<p>Object of class <code>DeponsTrack</code>, <code>DeponsDyn</code>,
<code>DeponsBlockdyn</code> or <code>DeponsShips</code></p>
</td></tr>
<tr><td><code id="title+2B26lt+2B3B-_+3A_value">value</code></td>
<td>
<p>Character string</p>
</td></tr>
</table>

<hr>
<h2 id='write+2CDeponsShips-method'>Write DEPONS ship files</h2><span id='topic+write+2CDeponsShips-method'></span><span id='topic+write.DeponsShips'></span>

<h3>Description</h3>

<p>Function  for writing a json-file for controlling
how ship agents behave in DEPONS. Ships move along pre-defined routes in 30-min
time steps. The routes are defined by the fix-points provided in the
json file, and the geographic projection is assumed to match that of the
landscape. The projection is not stored as part of the json file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'DeponsShips'
write(x, file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write+2B2CDeponsShips-method_+3A_x">x</code></td>
<td>
<p>Name of the DeponsShips object to be exported</p>
</td></tr>
<tr><td><code id="write+2B2CDeponsShips-method_+3A_file">file</code></td>
<td>
<p>Name of the output file (character)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>


<h3>Note</h3>

<p>The exported json file is intended for use in DEPONS 2.3 or later
(released July 2022) where the sound pressure level (SPL) is calculated
within DEPONS based on ship type, ship length and speed.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
