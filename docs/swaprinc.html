<!DOCTYPE html><html><head><title>Help for package swaprinc</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {swaprinc}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#compswap'><p>Compare swaprinc Models</p></a></li>
<li><a href='#swaprinc'><p>Swap in Principal Components</p></a></li>
<li><a href='#swaprinc_loud'><p>Swap in Principal Components (Loud Version of swaprinc)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Swap Principal Components into Regression Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Obtaining accurate and stable estimates of regression coefficients
    can be challenging when the suggested statistical model has issues related to
    multicollinearity, convergence, or overfitting. One solution is to use
    principal component analysis (PCA) results in the regression, as discussed in
    Chan and Park (2005) &lt;<a href="https://doi.org/10.1080%2F01446190500039812">doi:10.1080/01446190500039812</a>&gt;. The swaprinc() package
    streamlines comparisons between a raw regression model with the full set of
    raw independent variables and a principal component regression model where
    principal components are estimated on a subset of the independent variables,
    then swapped into the regression model in place of those variables. The
    swaprinc() function compares one raw regression model to one principal
    component regression model, while the compswap() function compares one raw
    regression model to many principal component regression models. Package
    functions include parameters to center, scale, and undo centering and scaling,
    as described by Harvey and Hansen (2022)
    <a href="https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf">https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf</a>.
    Additionally, the package supports using Gifi methods to extract principal
    components from categorical variables, as outlined by Rossiter (2021)
    <a href="https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html#2_Package">https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html#2_Package</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mncube/swaprinc">https://github.com/mncube/swaprinc</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mncube/swaprinc/issues">https://github.com/mncube/swaprinc/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>broom, broom.mixed, dplyr, Gifi, lme4, magrittr, rlang,
tidyselect</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-04-14 15:47:08 UTC; Administrator</td>
</tr>
<tr>
<td>Author:</td>
<td>Mackson Ncube [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Mackson Ncube &lt;macksonncube.stats@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-04-17 10:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='compswap'>Compare swaprinc Models</h2><span id='topic+compswap'></span>

<h3>Description</h3>

<p>The <code>swaprinc</code> function compares a regression model using raw variables to a
model with principal components swapped in. The <code>compswap</code> function compares
a regression model with raw variables to multiple models with principal
components swapped in. Parameter lists are recycled to ensure they are the
same length as the longest parameter list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compswap(
  data,
  formula,
  engine = "stats",
  .prc_eng_list = list("stats"),
  .pca_varlist = list(c(NULL)),
  .n_pca_list = list(NULL),
  .lpca_center_list = list("none"),
  .lpca_scale_list = list("none"),
  .lpca_undo_list = list(FALSE),
  .gifi_transform_list = list("none"),
  .gifi_trans_vars_list = list(c(NULL)),
  .gifi_trans_dims_list = list(NULL),
  .no_tresp_list = list(FALSE),
  .miss_handler_list = list("none"),
  .model_options_list = list("noaddpars"),
  .prcomp_options_list = list("noaddpars"),
  .gifi_princals_options_list = list("noaddpars"),
  .gifi_trans_options_list = list("noaddpars")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compswap_+3A_data">data</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="compswap_+3A_formula">formula</code></td>
<td>
<p>A quoted model formula</p>
</td></tr>
<tr><td><code id="compswap_+3A_engine">engine</code></td>
<td>
<p>The engine for fitting the model.  Options are &quot;stats&quot; or&quot;lme4&quot;.</p>
</td></tr>
<tr><td><code id="compswap_+3A_.prc_eng_list">.prc_eng_list</code></td>
<td>
<p>A list of prc_eng values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.pca_varlist">.pca_varlist</code></td>
<td>
<p>A list of pca_vars (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.n_pca_list">.n_pca_list</code></td>
<td>
<p>A list of n_pca_components (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.lpca_center_list">.lpca_center_list</code></td>
<td>
<p>A list of lpca_center values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.lpca_scale_list">.lpca_scale_list</code></td>
<td>
<p>A list of lpca_scale values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.lpca_undo_list">.lpca_undo_list</code></td>
<td>
<p>A list of lpca_undo values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.gifi_transform_list">.gifi_transform_list</code></td>
<td>
<p>A list of gifi_transform values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.gifi_trans_vars_list">.gifi_trans_vars_list</code></td>
<td>
<p>A list of gifi_trans_vars values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.gifi_trans_dims_list">.gifi_trans_dims_list</code></td>
<td>
<p>A list of gifi_trans_dims values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.no_tresp_list">.no_tresp_list</code></td>
<td>
<p>A list of no_tresp values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.miss_handler_list">.miss_handler_list</code></td>
<td>
<p>A list of miss_handler values (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.model_options_list">.model_options_list</code></td>
<td>
<p>A list of model_options (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.prcomp_options_list">.prcomp_options_list</code></td>
<td>
<p>A list of prcomp_options (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.gifi_princals_options_list">.gifi_princals_options_list</code></td>
<td>
<p>A list of gifi_princals_options (see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="compswap_+3A_.gifi_trans_options_list">.gifi_trans_options_list</code></td>
<td>
<p>A list of gifi_trans_options (see swaprinc documentation)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing a list of fitted models and a comparison metrics
data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Load the iris dataset
data(iris)

# Define the formula
formula &lt;- "Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width"

# Define the pca_varlist
pca_varlist &lt;- list(c("Sepal.Width", "Petal.Length"),
                   c("Sepal.Width", "Petal.Width"))

# Define the n_pca_list
n_pca_list &lt;- list(2, 2)

# Set scaling values
lpca_center_list &lt;- list("none", "none")
lpca_scale_list &lt;- list("none", "none")
lpca_undo_list &lt;- list(FALSE, FALSE)

# Run compswap
compswap_results &lt;- compswap(data = iris,
                            formula = formula,
                            engine = "stats",
                            .pca_varlist = pca_varlist,
                            .n_pca_list = n_pca_list,
                            .lpca_center_list = lpca_center_list,
                            .lpca_scale_list = lpca_scale_list,
                            .lpca_undo_list = lpca_undo_list)
</code></pre>

<hr>
<h2 id='swaprinc'>Swap in Principal Components</h2><span id='topic+swaprinc'></span>

<h3>Description</h3>

<p>Compare a regression model using raw variables with another model where principal
components are extracted from a subset of the raw independent variables, and
a user-defined number of these principal components are then used to replace
the original subset of variables in the regression model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swaprinc(
  data,
  formula,
  engine = "stats",
  prc_eng = "stats",
  pca_vars,
  n_pca_components,
  norun_raw = FALSE,
  lpca_center = "none",
  lpca_scale = "none",
  lpca_undo = FALSE,
  gifi_transform = "none",
  gifi_trans_vars,
  gifi_trans_dims,
  no_tresp = FALSE,
  miss_handler = "none",
  model_options = "noaddpars",
  prcomp_options = "noaddpars",
  gifi_princals_options = "noaddpars",
  gifi_trans_options = "noaddpars"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="swaprinc_+3A_data">data</code></td>
<td>
<p>A dataframe</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_formula">formula</code></td>
<td>
<p>A quoted model formula</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_engine">engine</code></td>
<td>
<p>The engine for fitting the model.  Options are 'stats' or 'lme4'.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_prc_eng">prc_eng</code></td>
<td>
<p>Then engine or extracting principal components.  Options are
'stats', 'Gifi', and 'stats_Gifi'.  The stats_Gifi engine uses
<code>tidyselect::where(is.numeric)</code> to select the pca_vars for <code>stats::prcomp</code> and
<code>-tidyselect::where(is.numeric)</code> to select the pca_vars for <code>Gifi::princals</code>.
Read Rossiter (2021) for more on princals.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_pca_vars">pca_vars</code></td>
<td>
<p>Variables to include in the principal component analysis.
These variables will be swapped out for principal components</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_n_pca_components">n_pca_components</code></td>
<td>
<p>The number of principal components to include in the
model. If using a complex prc_eng (i.e., stats_Gifi) then provide a named
vector (i.e., n_pca_components = c(&quot;stats&quot; = 2, &quot;Gifi&quot; = 3)).</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_norun_raw">norun_raw</code></td>
<td>
<p>Include regression on raw variables if TRUE, exclude if FALSE.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_lpca_center">lpca_center</code></td>
<td>
<p>Center data as in the Step-by-Step PCA vignette
(Harvey &amp; Hanson, 2022).  Only numeric variables will be included in the
centering.  Parameter takes values 'all' to center raw and pca variables, 'raw'
to only center variables for the raw variable model fitting, 'pca' to only
center pca_vars before pca regression model fitting, and 'none' to skip lpca
centering.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_lpca_scale">lpca_scale</code></td>
<td>
<p>Scale data as in the Step-by-Step PCA vignette.  Only
numeric variables will be included in the scaling.  Parameter takes values
'all' to scale raw and pca variables, 'raw' to only scale variables for the
raw variable model fitting, 'pca' to only scale pca_vars before pca regression
model fitting, and 'none' to skip lpca scaling.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_lpca_undo">lpca_undo</code></td>
<td>
<p>Undo centering and scaling of pca_vars as in the Step-by-Step
PCA vignette.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_gifi_transform">gifi_transform</code></td>
<td>
<p>Use Gifi optimal scaling to transform a set of variables.
Parameter takes values 'none', 'all', 'raw', and 'pca'</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_gifi_trans_vars">gifi_trans_vars</code></td>
<td>
<p>A vector of variables to include in the Gifi optimal
scaling transformation</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_gifi_trans_dims">gifi_trans_dims</code></td>
<td>
<p>Number of dimensions to extract in the Gifi optimal
scaling transformation algorithm</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_no_tresp">no_tresp</code></td>
<td>
<p>When set to <code>TRUE</code>, no_tresp (No transform response) will exclude
the response variable from from pre-modeling and pre-pca transformations.
Specifically, setting no_tresp to TRUE will exclude the response variable from
the transformation specified in lpca_center and lpca_scale.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_miss_handler">miss_handler</code></td>
<td>
<p>Choose how <code>swaprinc</code> handles missing data on the input
data.  Default is 'none'.  Use 'omit' for complete case analysis.</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_model_options">model_options</code></td>
<td>
<p>Pass additional arguments to statistical modeling functions
(i.e., <code>stats::lm</code>, <code>stats::glm</code>, <code>lme4::lmer</code>, <code>lme4::glmer</code>) Default is
'noaddpars' (no additional parameters)</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_prcomp_options">prcomp_options</code></td>
<td>
<p>Pass additional arguments to <code>stats::prcomp</code> for
prc_eng = 'stats' and prc_eng = 'stats_Gifi' call. Default is 'noaddpars'
(no additional parameters)</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_gifi_princals_options">gifi_princals_options</code></td>
<td>
<p>Pass additional arguments to <code>Gifi::princals</code> for
prc_eng = 'Gifi' and prc_eng = 'stats_Gifi' call. Default is 'noaddpars'
(no additional parameters)</p>
</td></tr>
<tr><td><code id="swaprinc_+3A_gifi_trans_options">gifi_trans_options</code></td>
<td>
<p>Pass additional arguments to <code>Gifi::princals</code> for
gifi_transform.  Default is 'noaddpars' (no additional parameters)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with fitted models
</p>


<h3>References</h3>


<ol>
<li><p> Rossiter, D. G.  Nonlinear Principal Components Analysis: Multivariate Analysis with Optimal Scaling (MVAOS). (2021) <a href="https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html">https://www.css.cornell.edu/faculty/dgr2/_static/files/R_html/NonlinearPCA.html</a>
</p>
</li>
<li><p> Harvey, D. T., &amp; Hanson, B. A. Step-by-Step PCA. (2022) <a href="https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf">https://cran.r-project.org/package=LearnPCA/vignettes/Vig_03_Step_By_Step_PCA.pdf</a>
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>data(iris)
res &lt;- swaprinc(iris,
"Sepal.Length ~ Sepal.Width + Petal.Length + Petal.Width",
pca_vars = c("Sepal.Width", "Petal.Length", "Petal.Width"),
n_pca_components = 2)
</code></pre>

<hr>
<h2 id='swaprinc_loud'>Swap in Principal Components (Loud Version of swaprinc)</h2><span id='topic+swaprinc_loud'></span>

<h3>Description</h3>

<p>Swap in Principal Components (Loud Version of swaprinc)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>swaprinc_loud(
  data,
  formula,
  engine,
  prc_eng,
  pca_vars,
  n_pca_components,
  norun_raw,
  lpca_center,
  lpca_scale,
  lpca_undo,
  gifi_transform,
  gifi_trans_vars,
  gifi_trans_dims,
  no_tresp,
  miss_handler,
  model_options,
  prcomp_options,
  gifi_princals_options,
  gifi_trans_options
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="swaprinc_loud_+3A_data">data</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_formula">formula</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_engine">engine</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_prc_eng">prc_eng</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_pca_vars">pca_vars</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_n_pca_components">n_pca_components</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_norun_raw">norun_raw</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_lpca_center">lpca_center</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_lpca_scale">lpca_scale</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_lpca_undo">lpca_undo</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_gifi_transform">gifi_transform</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_gifi_trans_vars">gifi_trans_vars</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_gifi_trans_dims">gifi_trans_dims</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_no_tresp">no_tresp</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_miss_handler">miss_handler</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_model_options">model_options</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_prcomp_options">prcomp_options</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_gifi_princals_options">gifi_princals_options</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
<tr><td><code id="swaprinc_loud_+3A_gifi_trans_options">gifi_trans_options</code></td>
<td>
<p>(see swaprinc documentation)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>(see swaprinc documentation)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
#(see swaprinc documentation)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
