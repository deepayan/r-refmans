<!DOCTYPE html><html><head><title>Help for package leafSTAR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {leafSTAR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Ahmes'><p>Application for smartphones for measuring the position angles of flat, tilted surfaces.</p></a></li>
<li><a href='#dihedral'><p>Calculate the dihedral angle between two planes</p></a></li>
<li><a href='#fixfile'><p>Fix the output of 'Ahmes' 1.0</p></a></li>
<li><a href='#fixhour'><p>Fix the hour format</p></a></li>
<li><a href='#guava'><p>Leaf angles of guava trees</p></a></li>
<li><a href='#olea'><p>Leaf angles of olive tree measured with 'Ahmes' 1.0</p></a></li>
<li><a href='#olive'><p>Leaf angles of olive tree measured with a compass and inclinometer</p></a></li>
<li><a href='#orchids'><p>Leaf and pseudobulb angles of epiphytic orchids</p></a></li>
<li><a href='#sal'><p>Calculate the projected surface area of a tilted plane</p></a></li>
<li><a href='#simu.star'><p>Calculate simulated silhouette to area ratios</p></a></li>
<li><a href='#simu.star.app'><p>Calculate simulated silhouette to area ratios from 'Ahmes' 1.0</p></a></li>
<li><a href='#star'><p>Calculate the silhouette to area ratio</p></a></li>
<li><a href='#star.app'><p>Calculate the silhouette to area ratio from 'Ahmes' 1.0</p></a></li>
<li><a href='#tilt'><p>Calculate the tilt angle</p></a></li>
<li><a href='#tropical'><p>Leaf angles of tropical canopy trees measured with traditional instrumentation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Silhouette to Area Ratio of Tilted Surfaces</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Agustina Ventre Lespiaucq [aut, cre], Silvia Santamaria Bueno [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Agustina Ventre Lespiaucq &lt;aguslespiaucq@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Implementation of trigonometric functions to calculate the exposure of flat, tilted surfaces, such as leaves and slopes, to direct solar radiation. It implements the equations in A.G. Escribano-Rocafort, A. Ventre-Lespiaucq, C. Granado-Yela, et al. (2014) &lt;<a href="https://doi.org/10.1111%2F2041-210X.12141">doi:10.1111/2041-210X.12141</a>&gt; in a few user-friendly R functions. All functions handle data obtained with 'Ahmes' 1.0 for Android, as well as more traditional data sources (compass, protractor, inclinometer). The main function (star()) calculates the potential exposure of flat, tilted surfaces to direct solar radiation (silhouette to area ratio, STAR). It is equivalent to the ratio of the leaf projected area to total leaf area, but instead of using area data it uses spatial position angles, such as pitch, roll and course, and information on the geographical coordinates, hour, and date. The package includes additional functions to recalculate STAR with custom settings of location and time, to calculate the tilt angle of a surface, and the minimum angle between two non-orthogonal planes.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4.1)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-09-18 13:26:03 UTC; silvia.santamaria</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-09-18 13:37:22 UTC</td>
</tr>
</table>
<hr>
<h2 id='Ahmes'>Application for smartphones for measuring the position angles of flat, tilted surfaces.</h2><span id='topic+Ahmes'></span>

<h3>Description</h3>

<p>Application for smartphones that allows to characterize the 3-dimensional position of flat surfaces. It measures four position angles, namely pitch, roll, azimuth and course relative to the Earth's magnetic and gravitational fields using the integrated sensors of the cell phone. The latest version is 'Ahmes' 1.0 and runs under Android 2.2 or later version.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Ahmes
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 1.</p>


<h3>Details</h3>

<p>The details of 'Ahmes' are described in Escribano-Rocafort et al. (2014).
</p>


<h3>References</h3>

<p><strong>Ahmes 1.0</strong> <a href="https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en">https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en</a>
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014)</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>

<hr>
<h2 id='dihedral'>Calculate the dihedral angle between two planes</h2><span id='topic+dihedral'></span>

<h3>Description</h3>

<p>Calculate the minimum angle between two non-orthogonal planes, such as the angle describing leaf torsion, the angle between two halves of conduplicate or plicate leaves, the angle between the petiole and the branch, between two leaves and between two branches.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dihedral(plane1, plane2, Ahmes = FALSE, ID = NULL, pitch1, roll1, course1,
  pitch2, roll2, course2, horiz = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dihedral_+3A_plane1">plane1</code>, <code id="dihedral_+3A_plane2">plane2</code></td>
<td>
<p>Objects of class data.frame containing the angles of plane1 and plane2 and row labels.</p>
</td></tr>
<tr><td><code id="dihedral_+3A_ahmes">Ahmes</code></td>
<td>
<p>Logical. Do data come from 'Ahmes'? Defaults to FALSE</p>
</td></tr>
<tr><td><code id="dihedral_+3A_id">ID</code></td>
<td>
<p>An optional vector with the labels of the observations. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="dihedral_+3A_pitch1">pitch1</code>, <code id="dihedral_+3A_pitch2">pitch2</code></td>
<td>
<p>Numeric. The name of the variables containing the pitch angles of planes 1 and 2 in degrees. See details.</p>
</td></tr>
<tr><td><code id="dihedral_+3A_roll1">roll1</code>, <code id="dihedral_+3A_roll2">roll2</code></td>
<td>
<p>Numeric. The name of the variables containing the roll angles of planes 1 and 2 in degrees. See details.</p>
</td></tr>
<tr><td><code id="dihedral_+3A_course1">course1</code>, <code id="dihedral_+3A_course2">course2</code></td>
<td>
<p>Numeric. The name of the variables containing the course angles of planes 1 and 2 in degrees. See details.</p>
</td></tr>
<tr><td><code id="dihedral_+3A_horiz">horiz</code></td>
<td>
<p>Logical. Set the position of the start (zero, 0) of pitch, roll and tilt angle data. <code>horiz = F</code> indicates the zero is located at zenith. This is the reference system used by Ahmes. <code>horiz = T</code> indicates the start is at the horizon. To use tilt in further calculations (<code><a href="#topic+star">star</a></code>, <code><a href="#topic+sal">sal</a></code>...), angle data should be expressed in the horizontal reference system (0 = horizon). Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>pitch</code> values span from 0 to 180 degrees. If <code>horiz = TRUE</code> (default) 0 and 180 refer to the flat horizontal surface and 90 refers to the flat vertical surface. If <code>horiz = FALSE</code> 0 and 180 refer to the flat vertical surface and 90 refers to the flat horizontal surface.
</p>
<p><code>roll</code> values span from 0 to 180 degrees.
</p>
<p><code>course</code> values span from 0 (North) to 360 degrees, clockwise. Course is the angle between north and the horizontal projection of a normal vector to the surface.
</p>
<p>For a graphical explanation of leaf angles, see Fig. 2 in  Escribano-Rocafort et al. (2014).
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><code>dihedral</code> <strong>Santalo, L.A. (1970).</strong> Vectores y tensores con sus aplicaciones. p. 61, 8 Edicion. EUDEBA (eds), Buenos Aires, Argentina.
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>
<p><code>orchids</code> <strong>Ventre-Lespiaucq, A.B., Delgado, J.A., Ospina-Calderon, N.H., Otero, J.T., Escudero, A., Sanchez, M.A., Balaguer, L., Flanagan, N.S. (2017).</strong> A tropical epiphytic orchid uses a low-light interception strategy in a spatially heterogeneous light environment. Biotropica, 49:318-327. doi:10.1111/btp.12425.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(orchids)
  pseudobulbs&lt;-subset(orchids,organ=="pseudobulb") #subset
  leaves&lt;-subset(orchids,organ=="leaf")
  dihedral(plane1=pseudobulbs,plane2=leaves,Ahmes=FALSE,ID=NULL,pitch1=pseudobulbs$pitch,
  roll1=pseudobulbs$roll,course1=pseudobulbs$course,pitch2=leaves$pitch,roll2=leaves$roll,
  course2=leaves$course,horiz=FALSE)  
#dihedral()
</code></pre>

<hr>
<h2 id='fixfile'>Fix the output of 'Ahmes' 1.0</h2><span id='topic+fixfile'></span>

<h3>Description</h3>

<p>Convert the output of 'Ahmes' 1.0 to a dataframe that can be handled by <code>'leafSTAR'</code> and <code>'R'</code> in general.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixfile(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fixfile_+3A_x">x</code></td>
<td>
<p>The output of 'Ahmes' 1.0. A .csv file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function does not modify the original dataset. To have a permanent fixed version of the data, see Example. If using the new data within the package, be aware that the argument <code>Ahmes</code> should be set to <code>FALSE</code>.
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Ahmes">Ahmes</a></code>, <code><a href="#topic+fixhour">fixhour</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(olea)
 olea_fixed&lt;-fixfile(olea) ## Store the fixed file as a new object.
#fixfile()
</code></pre>

<hr>
<h2 id='fixhour'>Fix the hour format</h2><span id='topic+fixhour'></span>

<h3>Description</h3>

<p>Convert the hour from sexagesimal character to decimal numeric format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fixhour(x, seconds = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fixhour_+3A_x">x</code></td>
<td>
<p>A character vector with the hour expressed as sexagesimal characters HH:MM or HH:MM:SS.</p>
</td></tr>
<tr><td><code id="fixhour_+3A_seconds">seconds</code></td>
<td>
<p>Logical. Is the hour expressed as HH:MM:SS (<code>seconds=TRUE</code>) or as HH:MM (<code>seconds=FALSE</code>)? Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Silvia Santamaria Bueno.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fixfile">fixfile</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>datahours&lt;-c("00:30","10:00","18:20","20:55")
 datahours_fixed&lt;-fixhour(datahours,seconds=FALSE)
#fixhour()
</code></pre>

<hr>
<h2 id='guava'>Leaf angles of guava trees</h2><span id='topic+guava'></span>

<h3>Description</h3>

<p>The guava data frame has 239 rows and 11 columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>guava
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>
<p><strong>tree.ID</strong> Identification of the tree. 
</p>
<p><strong>leaf.ID</strong> Identification of the leaf.
</p>
<p><strong>measure.ID</strong> Number of observation (from 'Ahmes').
</p>
<p><strong>sector</strong> Sector of the tree where leaf data was collected, with five levels corresponding to the north, east, south, and west sectors of the crown base (1N, 2E, 3S, 4W, respectively) and the top crown sector (5A).
</p>
<p><strong>azimuth</strong> Azimuth angle in degrees.
</p>
<p><strong>pitch</strong> Pitch angle in degrees.
</p>
<p><strong>roll</strong> Roll angle in degrees.
</p>
<p><strong>course</strong> Course angle in degrees with the zero placed at South (old 'Ahmes' version)
</p>
<p><strong>LA.cm2</strong> Leaf area. 
</p>
<p><strong>tilt.degrees</strong> Tilt angle calculated from pitch and roll with a changed reference system (<code>horiz = T</code>).
</p>
<p><strong>course.degrees</strong> Course angle in degrees with the zero placed at North (latest 'Ahmes' version 1.0).</p>


<h3>Details</h3>

<p>These data are measurements of four leaf position angles of 239 leaves in five guava trees (<em>Psidium guajava</em>), each leaf in a row. <code>guava</code> is an object of class <code>data.frame</code> and results from applying the function <code><a href="#topic+fixfile">fixfile</a></code> to the output of an earlier version of 'Ahmes', where the reference for course was placed at South.
</p>


<h3>References</h3>

<p><code>guava</code> <strong>Ventre-Lespiaucq, A., et al.</strong> Unpublished data.
</p>
<p><strong>Ahmes 1.0</strong> <a href="https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en">https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en</a>
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014)</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>

<hr>
<h2 id='olea'>Leaf angles of olive tree measured with 'Ahmes' 1.0</h2><span id='topic+olea'></span>

<h3>Description</h3>

<p>The olea data frame has 24 rows and 15 columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>olea
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>
<p><strong>Num.Medida</strong> Number of observation. 
</p>
<p><strong>Cabeceo</strong> Pitch angle in degrees.
</p>
<p><strong>Alabeo</strong> Roll angle in degrees.
</p>
<p><strong>Azimuth</strong> Azimuth angle in degrees.
</p>
<p><strong>Rumbo</strong> Course angle in degrees.
</p>
<p><strong>Estado_Brujula</strong> Compass_State. The values depend on the sensors of each cell phone.
</p>
<p><strong>Estado_Acelerometro</strong> Accelerometer_State. The values depend on the sensors of each cell phone.
</p>
<p><strong>Estado_Campo_Magnetico</strong> Magnetic_Field_State. The values depend on the sensors of each cell phone.
</p>
<p><strong>Fecha</strong> Date. Note this is a date-hour column. See details.
</p>
<p><strong>Hora</strong> Hour. Instead of the hour, it contains the values of the next column. See details.
</p>
<p><strong>Bateria</strong> Battery. State of the battery.
</p>
<p><strong>Temperatura</strong> Temperature. Only available when using temperature sensors coupled to the cell phone.  
</p>
<p><strong>Presion</strong> Pressure. Only available when using pressure sensors coupled to the cell phone.
</p>
<p><strong>Error_Relativo</strong> Relative error. See Escribano-Rocafort et al. (2014). 
</p>
<p><strong>Empty column</strong></p>


<h3>Details</h3>

<p>These data are measurements of four leaf position angles of 20 leaves in an olive tree (<em>Olea europaea</em>), each leaf in a row. The format of the data is an example of the raw output from 'Ahmes' 1.0. <code>olea</code> is a .csv file. This file presents some issues that need to be corrected. There are four extra rows to be deleted (1:3, final row). The hour and date are in the same colum, which needs to be separated in order to extract hour and date information directly from the data. This makes column headers to be displaced from columns 10 to 15. In addition, the headers of the output of Ahmes are provided in Spanish. Function <code><a href="#topic+fixfile">fixfile</a></code> implements solutions to these issues and renames the variables in English.
</p>


<h3>References</h3>

<p><code>olea</code> <strong>Ventre-Lespiaucq, A., Santamaria Bueno, S.</strong>, unpublished data.
</p>
<p><strong>Ahmes 1.0</strong> <a href="https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en">https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en</a>
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014)</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>

<hr>
<h2 id='olive'>Leaf angles of olive tree measured with a compass and inclinometer</h2><span id='topic+olive'></span>

<h3>Description</h3>

<p>The olive data frame has 20 rows and 10 columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>olive
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>
<p><strong>location</strong> Where measurements were taken. 
</p>
<p><strong>latitude</strong> Latitude where measurements were taken, in decimal format.
</p>
<p><strong>longitude</strong> Longitude where measurements were taken, in decimal format.
</p>
<p><strong>date</strong> Date.
</p>
<p><strong>hour</strong> Hour.
</p>
<p><strong>tz</strong> UTC time zone. Time zones west of Greenwich should be indicated with a minus sign (e.g., <code>tz = -2</code>).
</p>
<p><strong>leaf.ID</strong> Identification of the leaf.
</p>
<p><strong>tilt</strong> Tilt angle measured with a digital clinometer.
</p>
<p><strong>course</strong> Course angle measured with a compass.
</p>
<p><strong>azimuth</strong> Azimuth angle measured with a compass.</p>


<h3>Details</h3>

<p>These data are measurements of three leaf position angles of 20 leaves in an olive tree (<em>Olea europaea</em>), each leaf in a row. This dataset is an example of compass and inclinometer measurements. Tilt was measured instead of pitch and roll. The data.frame includes data on the geographic location, date and time. All these variables can be used directly as arguments in the functions of the <code><a href="#topic+star">star</a></code> family.
</p>


<h3>References</h3>

<p><code>olive</code> <strong>Ventre-Lespiaucq, A., Santamaria Bueno, S.</strong>, unpublished data.
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014)</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>

<hr>
<h2 id='orchids'>Leaf and pseudobulb angles of epiphytic orchids</h2><span id='topic+orchids'></span>

<h3>Description</h3>

<p>The <code>orchids</code> data.frame has 500 rows and 7 columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>orchids
</code></pre>


<h3>Format</h3>

<p>This data.frame contains the following columns:
</p>
<p><strong>measure.ID</strong> Number of observation (from Ahmes).
</p>
<p><strong>orchid.ID</strong> Identification of the orchid.
</p>
<p><strong>organ</strong> Tags each observation with &quot;leaf&quot; or &quot;pseudobulb&quot;.
</p>
<p><strong>module</strong> Identifies the leaf-pseudobulb pair.
</p>
<p><strong>pitch</strong> Pitch angle in degrees.
</p>
<p><strong>roll</strong> Roll angle in degrees.
</p>
<p><strong>course</strong> Course angle in degrees.</p>


<h3>Details</h3>

<p>Subset of the dataset in Ventre-Lespiaucq et al. (2017). These data are measurements of three leaf position angles of 250 leaf-pseudobulb pairs in 84 epiphytic orchids (<em>Rodriguezia granadensis</em>). Each row contains either pseudobulb or leaf angle data.
</p>


<h3>References</h3>

<p><code>orchids</code> <strong>Ventre-Lespiaucq, A., Delgado, J.A., Ospina-Calderon, N.H., Otero, J.T., Escudero, A., Sanchez, M.A., Balaguer, L., Flanagan, N.S. (2017)</strong> A tropical epiphytic orchid uses a low-light interception strategy in a spatially heterogeneous light environment. Biotropica 49:318-327. doi:10.1111/btp.12425.
</p>
<p><strong>Ahmes 1.0</strong> <a href="https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en">https://play.google.com/store/apps/details?id=com.movil.hoja.movihoja.ahmes&amp;hl=en</a>
</p>
<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014)</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>

<hr>
<h2 id='sal'>Calculate the projected surface area of a tilted plane</h2><span id='topic+sal'></span>

<h3>Description</h3>

<p>Retrieves the projected area of the surface in area units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sal(x, LA)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sal_+3A_x">x</code></td>
<td>
<p>Numeric vector, commonly the output of functions of the <code><a href="#topic+star">star</a></code> family, containing STAR (%).</p>
</td></tr>
<tr><td><code id="sal_+3A_la">LA</code></td>
<td>
<p>Numeric vector containing the total area of the surface of each observation.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>See Also</h3>

<p>SAL can be calculated with STAR data coming from <code><a href="#topic+star">star</a></code>, <code><a href="#topic+simu.star">simu.star</a></code>, <code><a href="#topic+star.app">star.app</a></code>, and <code><a href="#topic+simu.star.app">simu.star.app</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(guava)
 ## Calculate SAL for a given location, date and time
    gua&lt;-star(guava,lat=40.82,long=-4.21,local.time=12,tz=1,
         Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
         horiz=FALSE,course=guava$course,date=30,o.format=NULL)
         sal(gua,LA=guava$LA.cm2)

 ## Calculate SAL from simu.star() 
    sim.gua&lt;-simu.star(guava,lat=40.82,long=-4.21,local.time=12,tz=1,
             Ahmes=FALSE,ID=NULL, pitch=guava$pitch,roll=guava$roll,
             horiz=FALSE,course=guava$course,date=30,o.format=NULL,
             c.hour=c(7,9.5,12),c.date=30,c.lat=40.8,c.long=-4.2,c.tz=1,
             LA=guava$LA.cm2,details=TRUE)
             sal.guava&lt;-sal(sim.gua$STAR,LA=sim.gua$LA)
#sal()
</code></pre>

<hr>
<h2 id='simu.star'>Calculate simulated silhouette to area ratios</h2><span id='topic+simu.star'></span>

<h3>Description</h3>

<p>Recalculate the percentage of potential exposure of flat, tilted surfaces to direct solar radiation with different custom settings of location and time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simu.star(x, lat = NULL, long = NULL, local.time = NULL, tz = NULL,
  Ahmes = F, ID = NULL, pitch, roll, tilt.ang = NULL, horiz = T, course,
  date = NULL, o.format = NULL, c.hour = NULL, c.date = NULL,
  c.long = NULL, c.lat = NULL, c.tz = NULL, LA = NULL, details = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simu.star_+3A_x">x</code></td>
<td>
<p>A dataframe with observations in the rows and at least two spatial position angles in the columns (see Details). Data can come either from 'Ahmes' 1.0 or from measurements performed with traditional instrumentation.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_lat">lat</code></td>
<td>
<p>A vector with the latitude of each observation in decimal format. If all observations correspond to the same latitude, <code>lat</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star_+3A_long">long</code></td>
<td>
<p>A vector with the longitude of each observation in decimal format. If all observations correspond to the same longitude, <code>long</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star_+3A_local.time">local.time</code></td>
<td>
<p>A numeric vector with the local time of each observation in decimal format. Hours from 00 to 24. Minutes in decimal format, from 0 to 99. E.g., 12:30 should be written as 12.50. If available, seconds should also be specified in decimal format. See <code><a href="#topic+fixhour">fixhour</a></code>. If all observations correspond to the same local time, <code>local.time</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star_+3A_tz">tz</code></td>
<td>
<p>A vector with the time zone of each observation. If all observations correspond to the same time zone, <code>tz</code> can be introduced directly as a single number. Time zones located at the West of Greenwich are negative, and at the East are positive; e.g., for Colombia, <code>tz</code> = -5; for Reunion Island, <code>tz</code> = 4.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_ahmes">Ahmes</code></td>
<td>
<p>Logical. Do data come from 'Ahmes' 1.0? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_id">ID</code></td>
<td>
<p>An optional vector with the labels of the observations. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_pitch">pitch</code></td>
<td>
<p>A vector with pitch angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_roll">roll</code></td>
<td>
<p>A vector with roll rotation angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_tilt.ang">tilt.ang</code></td>
<td>
<p>A vector with tilt angles in degrees. Tilt is calculated from pitch and roll angles. This argument allows to specify tilt directly if available.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_horiz">horiz</code></td>
<td>
<p>Logical. Set the position of the start (zero, 0) of pitch, roll and tilt angle data. <code>horiz = F</code> indicates the zero is located at zenith. This is the reference system used by Ahmes. <code>horiz = T</code> indicates the start is at the horizon. To use tilt in further calculations (<code><a href="#topic+star">star</a></code>, <code><a href="#topic+sal">sal</a></code>...), angle data should be expressed in the horizontal reference system (0 = horizon). Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_course">course</code></td>
<td>
<p>A vector with course angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_date">date</code></td>
<td>
<p>A vector containing the date(s) when observations were made. If input data do not come from 'Ahmes', <code>o.format</code> needs to be specified. See details.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_o.format">o.format</code></td>
<td>
<p>A character indicating the date format in the input data. It is similar to the argument <code>format</code> in the function <code>as.Date{base}</code>. Defaults to <code>NULL</code>. See details and examples.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_c.hour">c.hour</code></td>
<td>
<p>A vector of custom hours of length equal to or greater than 1. Hours in decimal format, from 0 to 24. Minutes in decimal format, from 0 to 99. E.g., 12:30 should be written as 12.50. If available, seconds should also be specified in decimal format. See <code><a href="#topic+fixhour">fixhour</a></code>. If all observations correspond to the same local time, <code>local.time</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star_+3A_c.date">c.date</code></td>
<td>
<p>A vector of custom dates of length equal to or greater than 1.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_c.long">c.long</code></td>
<td>
<p>A vector of custom longitude coordinates in decimal format.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_c.lat">c.lat</code></td>
<td>
<p>A vector of custom latitude coordinates in decimal format.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_c.tz">c.tz</code></td>
<td>
<p>A vector of custom time zone/s. Time zones located at the West of Greenwich are negative; e.g., for Colombia, <code>c.tz</code> = -5; for Reunion Island, <code>c.tz</code> = 4.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_la">LA</code></td>
<td>
<p>Indicates whether leaf area data needs to be replicated to match the dimensions of the dataframe corresponding to the custom factors (see 'custom settings' in Details). When <code>LA</code> is specified, all the five custom factors (<code>c.hour</code>, <code>c.date</code>, <code>c.lat</code>, <code>c.long</code>, <code>c.tz</code>) need to be specified (i.e., they should be different from <code>NULL</code>). Defaults to <code>NULL</code>. <code>LA</code> does not affect the calculation of STAR. See examples.</p>
</td></tr>
<tr><td><code id="simu.star_+3A_details">details</code></td>
<td>
<p>Logical. If (<code>details =FALSE</code>) the output of <code>simu.star()</code> is a vector with STAR values. If <code>details = TRUE</code> the output is the complete dataset plus a column with STAR values. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> may also content geographical coordinates and hour and date information.
</p>
<p><code>date</code> Internally the function uses Julian dates. Julian date is the recommended input format. Conversion tables are available at <a href="https://landweb.nascom.nasa.gov/browse/calendar.html">https://landweb.nascom.nasa.gov/browse/calendar.html</a> for leap and regular years.
</p>
<p><code>o.format</code> Needs to be specified if <code>Ahmes = FALSE</code> AND input data format is other than Julian or the default formats handled by <code>as.Date{base}</code> (&quot;%Y/%m/%d&quot; and &quot;%Y-%m-%d&quot;). When <code>Ahmes = TRUE</code>, <code>o.format</code> is not needed because functions from the <code><a href="#topic+Ahmes">Ahmes</a></code> family solve date issues internally.
</p>
<p><code>pitch</code> values span from 0 to 180 degrees. If <code>horiz = TRUE</code> (default) 0 and 180 refer to the flat horizontal surface and 90 refers to the flat vertical surface. If <code>horiz = FALSE</code> 0 and 180 refer to the flat vertical surface and 90 refers to the flat horizontal surface.
</p>
<p><code>roll</code> values span from 0 to 180 degrees.
</p>
<p><code>course</code> values span from 0 (North) to 360 degrees, clockwise. Course is the angle between north and the horizontal projection of a normal vector to the surface.
</p>
<p>For a graphical explanation, see Fig. 2 in Escribano-Rocafort et al. (2014).
</p>
<p>Custom settings. In the functions of the <code>simu</code> family, the original dataframe is repeated as a block times the number of levels of the custom arguments specified (<code>c.hour</code>, <code>c.date</code>, <code>c.lat</code>, <code>c.long</code>, and <code>c.tz</code>). E.g., if a dataset with 10 observations is to be recalculated at two days of the year, the function will create a new dataframe with 20 rows (10 observation X 2 days). For this reason, <code>LA</code> needs to be specified if the user intends to calculate SAL using the output of <code>simu.star()</code>. In addition, the argument <code>details</code> allows the user to visualize the new dataframe created by the function.
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simu.star.app">simu.star.app</a></code>, <code><a href="#topic+star">star</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># With custom vectors from outside of the dataframe
 data(guava)
  myhours&lt;-seq(8,16,0.25) # Create a vector of hours from 8:00 to 16:00 every 15 minutes.
  mydates&lt;-seq(1,365,60) # Create a vector of days from January 1st to December 31st, 
                         # every 60 days.
  myguava&lt;-simu.star(guava,lat=40.8,long=-4.2,local.time=6,tz=1,
           Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
           horiz=FALSE,course=guava$course,date=30,o.format=NULL,
           c.hour=myhours,c.date=mydates,c.long=NULL,c.lat=NULL, 
           c.tz=NULL, LA=NULL)

 # LA is not NULL
  wrong&lt;-simu.star(guava,lat=40.8,long=-4.2,local.time=6,tz=1,
         Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
         horiz=FALSE,course=guava$course,date=30,o.format=NULL,
         c.hour=c(7,9.5,12),c.date=c(0,180),LA=guava$LA.cm2,details=TRUE)
     # Some custom settings are missing. STAR is retrieved as if LA = NULL, 
     # meaning LA data will not be readily available for calculating SAL. 

  correct&lt;-simu.star(guava,lat=40.8,long=-4.2,local.time=6,tz=1,
           Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
           horiz=FALSE,course=guava$course,date=30,o.format=NULL,
           c.hour=c(7,9.5,12),c.date=c(0,180),c.lat=40.8,c.long=-4.2, 
           c.tz=1, LA=guava$LA.cm2,details=TRUE)
     # Returns LA and STAR

 # LA is NULL
  correct1&lt;-simu.star(guava,lat=40.8,long=-4.2,local.time=6,tz=1,
            Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
            horiz=FALSE,course=guava$course,date=30,o.format=NULL,
            c.hour=c(7,9.5,12),c.date=c(0,180),c.long=NULL,c.lat=NULL, 
            c.tz=NULL, LA=NULL,details=TRUE)
          # Is the same as
  correct2&lt;-simu.star(guava,lat=40.8,long=-4.2,local.time=6,tz=1,
            Ahmes=FALSE,ID=NULL,pitch=guava$pitch,roll=guava$roll,
            horiz=FALSE,course=guava$course,date=30,o.format=NULL,
            c.hour=c(7,9.5,12),c.date=c(0,180),details=TRUE)
#simu.star() 
</code></pre>

<hr>
<h2 id='simu.star.app'>Calculate simulated silhouette to area ratios from 'Ahmes' 1.0</h2><span id='topic+simu.star.app'></span>

<h3>Description</h3>

<p>This is a version of simu.star function that only works with the output of 'Ahmes' 1.0. <code>simu.star.app()</code> re-calculates the percentage of potential exposure of flat, tilted surfaces to direct solar radiation with different custom settings of location and time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simu.star.app(x, lat, long, tz, o.format = NULL, c.hour = NULL,
  c.date = NULL, c.long = NULL, c.lat = NULL, c.tz = NULL, LA = NULL,
  details = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simu.star.app_+3A_x">x</code></td>
<td>
<p>Output of 'Ahmes' 1.0. A .csv file.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_lat">lat</code></td>
<td>
<p>A vector with the latitude of each observation in decimal format. If all observations correspond to the same latitude, <code>lat</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_long">long</code></td>
<td>
<p>A vector with the longitude of each observation in decimal format. If all observations correspond to the same longitude, <code>long</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_tz">tz</code></td>
<td>
<p>A vector with the time zone of each observation. If all observations correspond to the same time zone, <code>tz</code> can be introduced directly as a single number (see examples). Time zones located at the West of Greenwich are negative, and at the East are positive; e.g., for Colombia, <code>tz</code> = -5; for Reunion Island, <code>tz</code> = 4.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_o.format">o.format</code></td>
<td>
<p>A character indicating the date format in the input data. It is similar to the argument <code>format</code> in the function <code>as.Date{base}</code>. Defaults to <code>NULL</code>. See details and examples.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_c.hour">c.hour</code></td>
<td>
<p>A vector of custom hours of length equal to or greater than 1. Hours in decimal format, from 0 to 24. Minutes in decimal format, from 0 to 99. E.g., 12:30 should be written as 12.50. If available, seconds should also be specified in decimal format. See <code><a href="#topic+fixhour">fixhour</a></code>. If all observations correspond to the same local time, <code>local.time</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_c.date">c.date</code></td>
<td>
<p>A vector of custom dates of length equal to or greater than 1.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_c.long">c.long</code></td>
<td>
<p>A vector of custom longitude coordinates in decimal format.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_c.lat">c.lat</code></td>
<td>
<p>A vector of custom latitude coordinates in decimal format.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_c.tz">c.tz</code></td>
<td>
<p>A vector of custom time zone/s. Time zones located at the West of Greenwich are negative; e.g., for Colombia, <code>c.tz</code> = -5; for Reunion Island, <code>c.tz</code> = 4.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_la">LA</code></td>
<td>
<p>Indicates whether leaf area data needs to be replicated to match the dimensions of the dataframe corresponding to the custom factors (see 'custom settings' in Details). When <code>LA</code> is specified, all the five custom factors (<code>c.hour</code>, <code>c.date</code>, <code>c.lat</code>, <code>c.long</code>, <code>c.tz</code>) need to be specified (i.e., they should be different from <code>NULL</code>). Defaults to <code>NULL</code>. <code>LA</code> does not affect the calculation of STAR. See examples.</p>
</td></tr>
<tr><td><code id="simu.star.app_+3A_details">details</code></td>
<td>
<p>Logical. If (<code>details =FALSE</code>), the output of <code>simu.star.app()</code> is a vector with STAR values. If <code>details = TRUE</code> the output is the complete dataset plus a column with STAR values. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calls <code><a href="#topic+fixfile">fixfile</a></code> internally before calculating STAR. However, it does not modify the original dataset. To have a permanent fixed version of the data, use <code>new.file&lt;-fixfile(your.data)</code>. If using <code>new.file</code> within the package, be aware that the argument <code>Ahmes</code> should be set to <code>FALSE</code>.
</p>
<p><code>o.format</code> Needs to be specified if <code>Ahmes = FALSE</code> AND input data format is other than Julian or the default formats handled by <code>as.Date{base}</code> (&quot;%Y/%m/%d&quot; and &quot;%Y-%m-%d&quot;). When <code>Ahmes = TRUE</code>, <code>o.format</code> is not needed because functions of the <code><a href="#topic+Ahmes">Ahmes</a></code> family solve date issues internally.
</p>
<p>Custom settings. In the functions of the <code>simu</code> family, the original dataframe is repeated as a block times the number of levels of the custom arguments specified (<code>c.hour</code>, <code>c.date</code>, <code>c.lat</code>, <code>c.long</code>, and <code>c.tz</code>). E.g., if a dataset with 10 observations is to be recalculated at two days of the year, the function will create a new dataframe with 20 rows (10 observation X 2 days). For this reason, <code>LA</code> needs to be specified if the user intends to calculate SAL using the output of <code>simu.star</code>. In addition, the argument <code>details</code> allows the user to visualize the new dataframe created by the function.
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fixfile">fixfile</a></code>, <code><a href="#topic+simu.star">simu.star</a></code>, <code><a href="#topic+star.app">star.app</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(olea)
simustar_olea&lt;-simu.star.app(olea,lat=40,long=4,tz=2,
 c.hour=c(8,12,18),c.date=c(1,60,120,180,240))

#simu.star.app()
</code></pre>

<hr>
<h2 id='star'>Calculate the silhouette to area ratio</h2><span id='topic+star'></span>

<h3>Description</h3>

<p>Calculate the percentage of potential exposure of flat, tilted surfaces to direct solar radiation. It is equivalent to the ratio of the surface projected area to total surface area, but instead of using area data it uses spatial position angles (pitch, roll and course or tilt and course), geographical coordinates, hour and date information. This function implements equation 3 in Escribano-Rocafort et al. (2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>star(x, lat, long, local.time = NULL, tz, Ahmes = F, ID = NULL,
  pitch = NULL, roll = NULL, horiz = T, tilt.ang = NULL,
  course = NULL, date = NULL, o.format = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="star_+3A_x">x</code></td>
<td>
<p>A dataframe with observations in the rows and at least two spatial position angles in the columns (see Details). Data can either come from 'Ahmes' 1.0 or from measurements performed with traditional instrumentation.</p>
</td></tr>
<tr><td><code id="star_+3A_lat">lat</code></td>
<td>
<p>A vector with the latitude of each observation in decimal format. If all observations correspond to the same latitude, <code>lat</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="star_+3A_long">long</code></td>
<td>
<p>A vector with the longitude of each observation in decimal format. If all observations correspond to the same longitude, <code>long</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="star_+3A_local.time">local.time</code></td>
<td>
<p>A numeric vector with the approximate local time of each observation in decimal format. Hours from 0 to 24. Minutes in decimal format, from 0 to 99. E.g., 12:30 should be written as 12.50. If available, seconds should also be specified in decimal format. See <code><a href="#topic+fixhour">fixhour</a></code>. If all observations correspond to the same local time, <code>local.time</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="star_+3A_tz">tz</code></td>
<td>
<p>A vector with the time zone of each observation. If all observations correspond to the same time zone, <code>tz</code> can be introduced directly as a single number (see examples). Time zones located at the West of Greenwich are negative, and at the East are positive; e.g., for Colombia, <code>tz</code> = -5; for Reunion Island, <code>tz</code> = 4.</p>
</td></tr>
<tr><td><code id="star_+3A_ahmes">Ahmes</code></td>
<td>
<p>Logical. Do data come from 'Ahmes' 1.0? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="star_+3A_id">ID</code></td>
<td>
<p>An optional vector with the labels of the observations. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="star_+3A_pitch">pitch</code></td>
<td>
<p>A vector with pitch angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="star_+3A_roll">roll</code></td>
<td>
<p>A vector with roll rotation angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="star_+3A_horiz">horiz</code></td>
<td>
<p>Logical. Set the position of the start (zero, 0) of pitch, roll and tilt angle data. <code>horiz = F</code> indicates the zero is located at zenith. This is the reference system used by 'Ahmes'. <code>horiz = T</code> indicates the start is at the horizon. To use tilt in further calculations (<code><a href="#topic+simu.star">simu.star</a></code>, <code><a href="#topic+sal">sal</a></code>...), angle data should be expressed in the horizontal reference system (0 = horizon). Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="star_+3A_tilt.ang">tilt.ang</code></td>
<td>
<p>A vector with tilt angles in degrees. Tilt is calculated from <code>pitch</code> and <code>roll</code> angles. This argument allows to specify tilt directly if available.</p>
</td></tr>
<tr><td><code id="star_+3A_course">course</code></td>
<td>
<p>A vector with course angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="star_+3A_date">date</code></td>
<td>
<p>A vector containing the date(s) when observations were made. If input data do not come from 'Ahmes', <code>o.format</code> needs to be specified. See details.</p>
</td></tr>
<tr><td><code id="star_+3A_o.format">o.format</code></td>
<td>
<p>A character indicating the date format in the input data. It is similar to the argument <code>format</code> in the function <code>as.Date{base}</code>. Defaults to <code>NULL</code>. See details and examples.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>x</code> may also content geographical coordinates and hour and date information.
</p>
<p><code>date</code> Internally the function uses Julian dates. Julian date is the recommended input format. Conversion tables are available at <a href="https://landweb.nascom.nasa.gov/browse/calendar.html">https://landweb.nascom.nasa.gov/browse/calendar.html</a> for leap and regular years.
</p>
<p><code>o.format</code> Needs to be specified if <code>Ahmes = FALSE</code> AND input data format is other than Julian or the default formats handled by <code>as.Date{base}</code> (&quot;%Y/%m/%d&quot; and &quot;%Y-%m-%d&quot;). When <code>Ahmes = TRUE</code>, <code>o.format</code> is not needed because functions of the <code><a href="#topic+Ahmes">Ahmes</a></code> family solve date issues internally.
</p>
<p><code>pitch</code> values span from 0 to 180 degrees. If <code>horiz = TRUE</code> (default) 0 and 180 refer to the flat horizontal surface and 90 refers to the flat vertical surface. If <code>horiz = FALSE</code> 0 and 180 refer to the flat vertical surface and 90 refers to the flat horizontal surface.
</p>
<p><code>roll</code> values span from 0 to 180 degrees.
</p>
<p><code>course</code> values span from 0 (North) to 360 degrees, clockwise. Course is the angle between north and the horizontal projection of a normal vector to the surface.
</p>
<p>For a graphical explanation, see Fig. 2 in Escribano-Rocafort et al. (2014).
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Example with an 'Ahmes'-type input
data(olea)
star_olea&lt;-star(olea,lat=40,long=4,tz=2,Ahmes=TRUE)
 # Add results to the original dataset
    olea1&lt;-fixfile(olea) # Fix the original dataset
    olea2&lt;-cbind(olea1,as.data.frame(star_olea))

 # Example with an input different to 'Ahmes' data
  data(olive)
   star_olive&lt;-star(olive,lat=olive$latitude,long=olive$longitude,
               local.time=olive$hour,tz=olive$tz, Ahmes=FALSE,
               ID=olive$leafID,tilt.ang=olive$tilt,horiz=TRUE,
               course=olive$course,date=olive$date)
  # Add results to the original dataset.
   olive2&lt;-cbind(olive,as.data.frame(star_olive)) # Since it does not
                                                 # come from 'Ahmes', 
                                                 # it is not necessary 
                                                 # to run fixfile().

## Input date formats. The three examples give the same result.
   # 1. With Julian date
        julian_olive&lt;-star(olive,lat=olive$latitude,long=olive$longitude,
                      local.time=olive$hour,tz=olive$tz,
                      Ahmes=FALSE,ID=olive$leafID,tilt.ang=olive$tilt,horiz=TRUE,
                      course=olive$course,date=25) # January 25th
 
   # 2. With standard date
        std_olive&lt;-star(olive,lat=olive$latitude,long=olive$longitude,
                   local.time=olive$hour,tz=olive$tz,
                   Ahmes=FALSE,ID=olive$leafID,tilt.ang=olive$tilt,horiz=TRUE,
                   course=olive$course,date="2017/01/25") # January 25th 2017.
                         # Date should be quoted. o.format is not needed.

   # 3. With non-standard date
        nonstd_olive&lt;-star(olive,lat=olive$latitude,long=olive$longitude,
                      local.time=olive$hour,tz=olive$tz, Ahmes=FALSE,
                      ID=olive$leafID,tilt.ang=olive$tilt,horiz=TRUE,
                      course=olive$course,date="25/01/2017",o.format="%d/%m/%Y") 
               # January 25th 2017. Date should be quoted. o.format is necessary.

# star()
</code></pre>

<hr>
<h2 id='star.app'>Calculate the silhouette to area ratio from 'Ahmes' 1.0</h2><span id='topic+star.app'></span>

<h3>Description</h3>

<p>This is a version of <code>star()</code> function that only works with the output of 'Ahmes' 1.0. This function calculates the percentage of potential exposure of flat, tilted surfaces to direct solar radiation. It is equivalent to the ratio of the surface projected area to total surface area, but instead of using area data it uses spatial position angles (pitch, roll and course or tilt and course), geographical coordinates, hour and date information. This function implements equation 3 in Escribano-Rocafort et al. (2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>star.app(x, lat, long, tz)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="star.app_+3A_x">x</code></td>
<td>
<p>Output of 'Ahmes' 1.0, a .csv file.</p>
</td></tr>
<tr><td><code id="star.app_+3A_lat">lat</code></td>
<td>
<p>A vector with the latitude of each observation in decimal format. If all observations correspond to the same latitude, <code>lat</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="star.app_+3A_long">long</code></td>
<td>
<p>A vector with the longitude of each observation in decimal format. If all observations correspond to the same longitude, <code>long</code> can be introduced directly as a single number (see examples).</p>
</td></tr>
<tr><td><code id="star.app_+3A_tz">tz</code></td>
<td>
<p>A vector with the time zone of each observation. If all observations correspond to the same time zone, <code>tz</code> can be introduced directly as a single number. Time zones located at the West of Greenwich are negative, and at the East are positive; e.g., for Colombia, <code>tz</code> = -5; for Reunion Island, <code>tz</code> = 4.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function calls <code><a href="#topic+fixfile">fixfile</a></code> internally before calculating STAR. However, it does not modify the original dataset. To have a permanent fixed version of the data, use <code>new.file&lt;-fixfile(your.data)</code>. If using <code>new.file</code> within the package, be aware that the argument <code>Ahmes</code> should be set to <code>FALSE</code>.
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fixfile">fixfile</a></code>, <code><a href="#topic+star">star</a></code>, <code><a href="#topic+simu.star.app">simu.star.app</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(olea)
  starapp_olea&lt;-star.app(olea,lat=40,long=4,tz=2)

 ## Add results to the original dataset
  olea1&lt;-fixfile(olea) ## Fix the original dataset
  olea2&lt;-cbind(olea1,as.data.frame(starapp_olea))

#star.app()
</code></pre>

<hr>
<h2 id='tilt'>Calculate the tilt angle</h2><span id='topic+tilt'></span>

<h3>Description</h3>

<p>Calculate the tilt angle of a tilted surface from pitch and roll angles.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tilt(x, Ahmes = F, ID = NULL, pitch, roll, horiz = T)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tilt_+3A_x">x</code></td>
<td>
<p>A dataframe with observations in the rows and at least two spatial position angles in the columns. Data can come either from 'Ahmes' 1.0 or from measurements performed with traditional instrumentation.</p>
</td></tr>
<tr><td><code id="tilt_+3A_ahmes">Ahmes</code></td>
<td>
<p>Logical. Do data come from 'Ahmes'? Defaults to FALSE.</p>
</td></tr>
<tr><td><code id="tilt_+3A_id">ID</code></td>
<td>
<p>An optional vector with the labels of the observations. Defaults to <code>NULL</code>.</p>
</td></tr>
<tr><td><code id="tilt_+3A_pitch">pitch</code></td>
<td>
<p>A vector with pitch angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="tilt_+3A_roll">roll</code></td>
<td>
<p>A vector with roll angles in degrees. See details.</p>
</td></tr>
<tr><td><code id="tilt_+3A_horiz">horiz</code></td>
<td>
<p>Logical. Set the position of the start (zero, 0) of pitch, roll and tilt angle data. <code>horiz = F</code> indicates the zero is located at zenith. This is the reference system used by 'Ahmes'. <code>horiz = T</code> indicates the start is at the horizon. To use tilt in further calculations (<code><a href="#topic+star">star</a></code>, <code><a href="#topic+sal">sal</a></code>...), angle data should be expressed in the horizontal reference system (0 = horizon). Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output of <code>tilt()</code> is a matrix with two columns &quot;tilt.raw&quot; and &quot;tilt&quot;. &quot;tilt.raw&quot; contains tilt values relative to the zenith. &quot;tilt&quot; contains tilt values relative to the horizon. The latter are used in the equations of the <code>star()</code> family. When <code>horiz = T</code>, &quot;tilt&quot; = &quot;tilt.raw&quot;.
</p>
<p><code>pitch</code> values span from 0 to 180 degrees. If <code>horiz = TRUE</code> (default) 0 and 180 refer to the flat horizontal surface and 90 refers to the flat vertical surface. If <code>horiz = FALSE</code> 180 refers to the flat vertical surface and 90 refers to the flat horizontal surface.
</p>
<p><code>roll</code> values span from 0 to 180 degrees.
</p>
<p>For a graphical explanation, see Fig. 2 in Escribano-Rocafort et al. (2014).
</p>


<h3>Author(s)</h3>

<p>Agustina Ventre-Lespiaucq and Silvia Santamaria Bueno.
</p>


<h3>References</h3>

<p><strong>Escribano-Rocafort, A.G., Ventre-Lespiaucq, A.B., Granado-Yela, C., Lopez-Pintor, A., Delgado, J.A., Munoz, V., Dorado, G.A., Balaguer, L. (2014).</strong> Simplifying data acquisition in plant canopies- Measurements of leaf angles with a cell phone. Methods in Ecology and Evolution 5:132-140. doi:10.1111/2041-210X.12141.
</p>
<p><code>tropical</code> <strong>Posada, J.M., Lechowicz, M.J., Kitajima, K. (2009).</strong> Optimal photosynthetic use of light by tropical tree crowns achieved by adjustment of individual leaf angles and nitrogen content. Annals of Botany, 103: 795-805. doi:10.1093/aob/mcn265.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Data comes from 'Ahmes'
data(olea)
    tilt_olea&lt;-tilt(olea,Ahmes=TRUE)

 # Data comes from other sources
   data(tropical)
    tropi_tilt&lt;-tilt(tropical,pitch=tropical$pitch,roll=tropical$roll,horiz=TRUE)
    tropical2&lt;-cbind(tropical,as.data.frame(tropi_tilt)) 
    # When horiz = TRUE, tilt.raw = tilt!

   data(guava)
    tilt_guava&lt;-tilt(guava,pitch=guava$pitch,roll=guava$roll,horiz=FALSE) 
    # horiz = FALSE

#tilt()
</code></pre>

<hr>
<h2 id='tropical'>Leaf angles of tropical canopy trees measured with traditional instrumentation</h2><span id='topic+tropical'></span>

<h3>Description</h3>

<p>The tropical data frame has 41 rows and 4 columns
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tropical
</code></pre>


<h3>Format</h3>

<p>This data frame contains the following columns:
</p>
<p><strong>species</strong> A code for each species (letters) and individuals (numbers) 
</p>
<p><strong>environment</strong>  Factor with three levels of exposure to solar radiation.
</p>
<p><strong>pitch</strong> Pitch angle in degrees.
</p>
<p><strong>roll</strong> Roll angle in degrees.</p>


<h3>Details</h3>

<p>These data are a subset of leaf angle data in Posada et al. (2009) measured with a compass and a protractor. Contains measurements of two leaf position angles of 41 leaves in two individuals of (<em>Castilla elastica</em>) and one of (<em>Ficus insipida</em>), each leaf in a row. The format of the data is an example of a field-data table handled by <code>'leafSTAR'</code>.
</p>


<h3>References</h3>

<p><code>tropical</code> <strong>Posada, J.M., Lechowicz, M.J., Kitajima, K. (2009)</strong> Optimal photosynthetic use of light by tropical tree crowns achieved by adjustment of individual leaf angles and nitrogen content. Annals of Botany, 103: 795-805. doi:10.1093/aob/mcn265.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
