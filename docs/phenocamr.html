<!DOCTYPE html><html><head><title>Help for package phenocamr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {phenocamr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#contract_phenocam'><p>Contracts the file from 1-day to a 3-day time step</p></a></li>
<li><a href='#daylength'><p>Calculates day length (in hours) and the solar elevation</p></a></li>
<li><a href='#detect_outliers'><p>Detect outliers in PhenoCam time series</p></a></li>
<li><a href='#download_phenocam'><p>Downloads PhenoCam time series</p></a></li>
<li><a href='#expand_phenocam'><p>Expand a PhenoCam time series from 3-day to a 1-day time step</p></a></li>
<li><a href='#grvi'><p>Calculate green-red vegetation index (GRVI)</p></a></li>
<li><a href='#list_rois'><p>List all site regions-of-interst (ROIs)</p></a></li>
<li><a href='#list_sites'><p>List all site meta-data</p></a></li>
<li><a href='#merge_daymet'><p>Merge Daymet data with a PhenoCam time series</p></a></li>
<li><a href='#merge_modis'><p>Merge ORNL MODIS data with a PhenoCam time series</p></a></li>
<li><a href='#normalize_ts'><p>Normalize PhenoCam time series</p></a></li>
<li><a href='#optimal_span'><p>Calculates the optimal span for a loess spline</p></a></li>
<li><a href='#phenocam_explorer'><p>Starts the phenocamr shiny interface</p></a></li>
<li><a href='#phenophases'><p>Calculates phenophases</p></a></li>
<li><a href='#process_phenocam'><p>Function to post-process PhenoCam time series</p></a></li>
<li><a href='#read_phenocam'><p>Read PhenoCam time series data</p></a></li>
<li><a href='#smooth_ts'><p>Smooth a PhenoCam time series</p></a></li>
<li><a href='#transition_dates'><p>Calculates transition dates for a PhenoCam time series</p></a></li>
<li><a href='#truncate_phenocam'><p>Truncate a PhenoCam time series</p></a></li>
<li><a href='#write_phenocam'><p>Write a phenocamr data structure to file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Facilitates 'PhenoCam' Data Access and Time Series
Post-Processing</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.5</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Programmatic interface to the 'PhenoCam' web services (<a href="https://phenocam.nau.edu/webcam">https://phenocam.nau.edu/webcam</a>).
    Allows for easy downloading of 'PhenoCam' data directly to your R workspace
    or your computer and provides post-processing routines for consistent and easy
    timeseries outlier detection, smoothing and estimation of phenological transition dates.
    Methods for this package are described in detail in Hufkens et. al (2018) &lt;<a href="https://doi.org/10.1111%2F2041-210X.12970">doi:10.1111/2041-210X.12970</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6)</td>
</tr>
<tr>
<td>Imports:</td>
<td>jsonlite, changepoint, httr, zoo, utils, graphics, stats,
memoise, daymetr, MODISTools</td>
</tr>
<tr>
<td>Suggests:</td>
<td>shiny, covr, testthat, knitr, rmarkdown, shinydashboard,
leaflet, plotly, DT</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL-3</a></td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bluegreen-labs/phenocamr">https://github.com/bluegreen-labs/phenocamr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bluegreen-labs/phenocamr/issues">https://github.com/bluegreen-labs/phenocamr/issues</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-07-20 20:11:00 UTC; khufkens</td>
</tr>
<tr>
<td>Author:</td>
<td>Koen Hufkens <a href="https://orcid.org/0000-0002-5070-8109"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  BlueGreen Labs [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Koen Hufkens &lt;koen.hufkens@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-07-20 23:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='contract_phenocam'>Contracts the file from 1-day to a 3-day time step</h2><span id='topic+contract_phenocam'></span>

<h3>Description</h3>

<p>Reverts the 'expand_phenocam()' function in order
to save space and generate files as outlined in
the cited data paper. This routine is used as a 
post-production measure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>contract_phenocam(
  data,
  internal = TRUE,
  no_padding = FALSE,
  out_dir = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="contract_phenocam_+3A_data">data</code></td>
<td>
<p>a phenocam data file with a 1 or 3 day time step</p>
</td></tr>
<tr><td><code id="contract_phenocam_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="contract_phenocam_+3A_no_padding">no_padding</code></td>
<td>
<p>allow for padding to REMAIN or not
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="contract_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data (default = tempdir())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A contracted PhenoCam 3-day time series to its original 3-day time
step (if provided at a 1-day interval), also removes padding introduced
by processing for 1-day data.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# Overwrites the original file, increasing
# it's file size.
expand_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

# Contracts the file to it's original size, skipping
# two days.
contract_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

## End(Not run)
</code></pre>

<hr>
<h2 id='daylength'>Calculates day length (in hours) and the solar elevation</h2><span id='topic+daylength'></span>

<h3>Description</h3>

<p>This routine uses Forsythe et al. 1995.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>daylength(doy, latitude)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="daylength_+3A_doy">doy</code></td>
<td>
<p>a vector with doy values 1 - 365(6)</p>
</td></tr>
<tr><td><code id="daylength_+3A_latitude">latitude</code></td>
<td>
<p>a given latitude</p>
</td></tr>
</table>


<h3>Value</h3>

<p>nested list with daylength (daylength) and
solar elevation (solar_elev) elements
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# calcualte the hours of sunlight and solar elevation on day of year 1
# and latitude 51
ephem &lt;- daylength(1, 51)
print(ephem)

## End(Not run)
</code></pre>

<hr>
<h2 id='detect_outliers'>Detect outliers in PhenoCam time series</h2><span id='topic+detect_outliers'></span>

<h3>Description</h3>

<p>The function fills in the existing column to hold outlier flags,
and either overwrites the original file or outputs a data structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>detect_outliers(
  data,
  iterations = 20,
  sigma = 2,
  grvi = FALSE,
  snowflag = FALSE,
  plot = FALSE,
  internal = TRUE,
  out_dir = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="detect_outliers_+3A_data">data</code></td>
<td>
<p>PhenoCam data structure or filename</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_iterations">iterations</code></td>
<td>
<p>number of itterations in order to detect outliers ()</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_sigma">sigma</code></td>
<td>
<p>number of deviations to exclude outliers at</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_grvi">grvi</code></td>
<td>
<p>reverse the direction of the screening intervals
to accomodate for GRVI outliers</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_snowflag">snowflag</code></td>
<td>
<p>use manual snow flag labels as outliers</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_plot">plot</code></td>
<td>
<p>visualize the process, mostly for debugging
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)
to accomodate for GRVI outliers</p>
</td></tr>
<tr><td><code id="detect_outliers_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data (do not detect outliers)
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3",
                  outlier_detection = FALSE)

# detect outliers in the downloaded file
detect_outliers(file.path(tempdir(),"harvard_DB_1000_3day.csv"))


## End(Not run)
</code></pre>

<hr>
<h2 id='download_phenocam'>Downloads PhenoCam time series</h2><span id='topic+download_phenocam'></span>

<h3>Description</h3>

<p>This is a wrapper around most of all the other functions.
It downloads a time series and extract relevant phenological transition
dates or phenophases.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>download_phenocam(
  site = "harvard$",
  veg_type = NULL,
  frequency = "3",
  roi_id = NULL,
  outlier_detection = TRUE,
  smooth = TRUE,
  contract = FALSE,
  daymet = FALSE,
  trim_daymet = TRUE,
  trim = NULL,
  phenophase = FALSE,
  out_dir = tempdir(),
  internal = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="download_phenocam_+3A_site">site</code></td>
<td>
<p>the site name, as mentioned on the PhenoCam web page expressed
as a regular expression (&quot;harvard$&quot; == exact match)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_veg_type">veg_type</code></td>
<td>
<p>vegetation type (DB, EN, ... default = ALL)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_frequency">frequency</code></td>
<td>
<p>frequency of the time series product (1, 3, &quot;roistats&quot;)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_roi_id">roi_id</code></td>
<td>
<p>the id of the ROI to download (default = ALL)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_outlier_detection">outlier_detection</code></td>
<td>
<p>TRUE or FALSE, detect outliers</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_smooth">smooth</code></td>
<td>
<p>smooth data (logical, default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_contract">contract</code></td>
<td>
<p>contract 3-day data (logical, default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_daymet">daymet</code></td>
<td>
<p>TRUE or FALSE, merges the daymet data</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_trim_daymet">trim_daymet</code></td>
<td>
<p>TRUE or FALSE, trims data to match PhenoCam data</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_trim">trim</code></td>
<td>
<p>year (numeric) to which to constrain the output (default = <code>NULL</code>)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_phenophase">phenophase</code></td>
<td>
<p>logical, calculate transition dates (default = <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store downloaded data 
(default = tempdir())</p>
</td></tr>
<tr><td><code id="download_phenocam_+3A_internal">internal</code></td>
<td>
<p>allow for the data element to be returned to the workspace</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Downloaded files in out_dir of requested time series products, as well
as derived phenophase estimates based upon these time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download the first ROI time series for the Harvard PhenoCam site
# at an aggregation frequency of 3-days.
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")
 
# read phenocam data into phenocamr data structure                  
df &lt;- read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
                  

## End(Not run)
</code></pre>

<hr>
<h2 id='expand_phenocam'>Expand a PhenoCam time series from 3-day to a 1-day time step</h2><span id='topic+expand_phenocam'></span>

<h3>Description</h3>

<p>Necessary step to guarantee consistent data processing between 1 and 3-day
data products. Should rarely be used independent of 'download_phenocam()'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_phenocam(data, truncate = NULL, internal = TRUE, out_dir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_phenocam_+3A_data">data</code></td>
<td>
<p>a PhenoCam file</p>
</td></tr>
<tr><td><code id="expand_phenocam_+3A_truncate">truncate</code></td>
<td>
<p>year (numerical), limit the time series
to a particular year (default = NULL)</p>
</td></tr>
<tr><td><code id="expand_phenocam_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="expand_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data (default = tempdir())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Expanded PhenoCam data structure or file, including 90 day padding
if requested.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# Overwrites the original file, increasing
# it's file size.
expand_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

# Contracts the file to it's original size, skipping
# two days.
contract_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

## End(Not run)
</code></pre>

<hr>
<h2 id='grvi'>Calculate green-red vegetation index (GRVI)</h2><span id='topic+grvi'></span>

<h3>Description</h3>

<p>The GRVI is defined as the normalized ratio between the red and green channel
of a RGB image or digital number triplet. However, the blue channel can be
used as well using a weighting factor. As such a paramter vector is provided
so different channels / DN can be weighted separately.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>grvi(data, par = c(1, 1, 1), internal = TRUE, out_dir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="grvi_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file or data frame (when using a file provide a
full path if not in the current working directory)</p>
</td></tr>
<tr><td><code id="grvi_+3A_par">par</code></td>
<td>
<p>grvi parameters (digital number weights)</p>
</td></tr>
<tr><td><code id="grvi_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="grvi_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Inserts a GRVI data column into the provided PhenoCam
data structure or file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# with defaults, outputting a data frame
# with smoothed values, overwriting the original

# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# calculate and append the GRVI for a file (overwrites the original)
grvi(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

# as all functions this also works on a PhenoCam data structure
df &lt;- read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
df &lt;- grvi(df, par = c(1, 1, 0))

## End(Not run)
</code></pre>

<hr>
<h2 id='list_rois'>List all site regions-of-interst (ROIs)</h2><span id='topic+list_rois'></span>

<h3>Description</h3>

<p>The ROI list can be helpful in determining which time series to download
using 'download_phenocam()'.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_rois(out_dir = tempdir(), internal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_rois_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory (default = tempdir())</p>
</td></tr>
<tr><td><code id="list_rois_+3A_internal">internal</code></td>
<td>
<p>TRUE or FALSE (default = TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with ROIs for all available cameras
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download the site meta-data
df &lt;- list_rois()

## End(Not run)
</code></pre>

<hr>
<h2 id='list_sites'>List all site meta-data</h2><span id='topic+list_sites'></span>

<h3>Description</h3>

<p>The site list can be helpful in determining which time series to download
using 'download_phenocam()'. The site list also includes meta-data 
concerning plant functional types, general climatological
conditions such as mean annual temperature or geographic location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>list_sites(out_dir = tempdir(), internal = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="list_sites_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory (default = tempdir())</p>
</td></tr>
<tr><td><code id="list_sites_+3A_internal">internal</code></td>
<td>
<p>TRUE or FALSE (default = TRUE)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with meta-data for all available sites.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download the site meta-data
df &lt;- list_sites()

## End(Not run)
</code></pre>

<hr>
<h2 id='merge_daymet'>Merge Daymet data with a PhenoCam time series</h2><span id='topic+merge_daymet'></span>

<h3>Description</h3>

<p>Combine PhenoCam time series with matching climatological variables from
Daymet.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_daymet(data, trim = FALSE, internal = TRUE, out_dir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_daymet_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file or data structure</p>
</td></tr>
<tr><td><code id="merge_daymet_+3A_trim">trim</code></td>
<td>
<p>logical, trim the daymet data to the length of the
PhenoCam time series or include the whole Daymet time series (1980-current).
(default = <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="merge_daymet_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="merge_daymet_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data (default = tempdir())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A PhenoCam data structure or file which combines PhenoCam time series
data with Daymet based climate values (columns will be added).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# merge data with daymet data
merge_daymet(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

## End(Not run)
</code></pre>

<hr>
<h2 id='merge_modis'>Merge ORNL MODIS data with a PhenoCam time series</h2><span id='topic+merge_modis'></span>

<h3>Description</h3>

<p>Combine PhenoCam time series with MODIS data for matching dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>merge_modis(
  data,
  product,
  band,
  trim = FALSE,
  internal = TRUE,
  out_dir = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="merge_modis_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file or data structure</p>
</td></tr>
<tr><td><code id="merge_modis_+3A_product">product</code></td>
<td>
<p>which MODIS product to query (character vector)</p>
</td></tr>
<tr><td><code id="merge_modis_+3A_band">band</code></td>
<td>
<p>which MODIS band(s) to include (character vector)</p>
</td></tr>
<tr><td><code id="merge_modis_+3A_trim">trim</code></td>
<td>
<p>logical, trim the MODIS data to the length of the
PhenoCam time series or include the whole Daymet time series (1980-current).
(default = <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="merge_modis_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="merge_modis_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data (default = tempdir())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A PhenoCam data structure or file which combines PhenoCam time series
data with MODIS values (columns will be added). Data is queried from the
ORNL MODIS subsets service using the 'MODISTools' package, please consult 
either sources on product and band names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# merge data with daymet data
df &lt;-  merge_modis(file.path(tempdir(),
"harvard_DB_1000_3day.csv"),
product = "MOD13Q1",
band = "250m_16_days_NDVI")

## End(Not run)
</code></pre>

<hr>
<h2 id='normalize_ts'>Normalize PhenoCam time series</h2><span id='topic+normalize_ts'></span>

<h3>Description</h3>

<p>Normalize PhenoCam data between 0-1 to to standardize
further processing, independent of the relative amplitude
of the time series (works on vectors not data frames).
For internal use only.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>normalize_ts(df, percentile = 90)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="normalize_ts_+3A_df">df</code></td>
<td>
<p>a PhenoCam data frame</p>
</td></tr>
<tr><td><code id="normalize_ts_+3A_percentile">percentile</code></td>
<td>
<p>percentile value to interprete</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A normalized PhenoCam time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Internal function only, should not be used stand-alone.
# As such no documentation is provided.
</code></pre>

<hr>
<h2 id='optimal_span'>Calculates the optimal span for a loess spline</h2><span id='topic+optimal_span'></span>

<h3>Description</h3>

<p>The optimal span is calculated based upon the bayesian information
criterion (BIC).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>optimal_span(
  y,
  x = NULL,
  weights = NULL,
  step = 0.01,
  label = NULL,
  plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="optimal_span_+3A_y">y</code></td>
<td>
<p>a vector with measurement values to smooth</p>
</td></tr>
<tr><td><code id="optimal_span_+3A_x">x</code></td>
<td>
<p>a vector with dates / time steps</p>
</td></tr>
<tr><td><code id="optimal_span_+3A_weights">weights</code></td>
<td>
<p>optional values to weigh the loess fit with</p>
</td></tr>
<tr><td><code id="optimal_span_+3A_step">step</code></td>
<td>
<p>span increment size</p>
</td></tr>
<tr><td><code id="optimal_span_+3A_label">label</code></td>
<td>
<p>title to be used when plotting function output</p>
</td></tr>
<tr><td><code id="optimal_span_+3A_plot">plot</code></td>
<td>
<p>plot visual output of the optimization routine</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an optimal span to smooth a provided vector using 
the 'loess()' smoother.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Internal function only, should not be used stand-alone.
l &lt;- sin(seq(1,10,0.01))
l &lt;- l + runif(length(l))
optimal_span(l, plot = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='phenocam_explorer'>Starts the phenocamr shiny interface</h2><span id='topic+phenocam_explorer'></span>

<h3>Description</h3>

<p>The GUI allows you to interactively download
data and visualize time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phenocam_explorer()
</code></pre>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# Starts the PhenoCam explorer GUI in a browser
phenocam_explorer()

## End(Not run)
</code></pre>

<hr>
<h2 id='phenophases'>Calculates phenophases</h2><span id='topic+phenophases'></span>

<h3>Description</h3>

<p>This routine combines a forward and backward
run of transition_dates function to calculate the phenophases in both
rising and falling parts of a PhenoCam time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>phenophases(data, mat, internal = TRUE, out_dir = tempdir(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="phenophases_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file (or data frame)</p>
</td></tr>
<tr><td><code id="phenophases_+3A_mat">mat</code></td>
<td>
<p>mean annual temperature</p>
</td></tr>
<tr><td><code id="phenophases_+3A_internal">internal</code></td>
<td>
<p>return PhenoCam data file or data frame</p>
</td></tr>
<tr><td><code id="phenophases_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory</p>
</td></tr>
<tr><td><code id="phenophases_+3A_...">...</code></td>
<td>
<p>pass parameters to the transition_dates() function</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Estimates of transition dates for both rising and falling parts of a
PhenoCam time series. All time series are evaluated (gcc_90, gcc_75, etc).
The function returns a nested list with UNIX time based values
including uncertainties on these estimates and their associated 
thresholds. When written to disk UNIX dates are converted to YYYY-MM-DD.
The nested list has named locations rising and falling, or location 1 and 2
in the list respectivelly.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# downloads a time series
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# read in data as data frame and calculate phenophases
df &lt;- read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
my_dates &lt;- phenophases(df, internal = TRUE)

# print results
print(my_dates)

## End(Not run)
</code></pre>

<hr>
<h2 id='process_phenocam'>Function to post-process PhenoCam time series</h2><span id='topic+process_phenocam'></span>

<h3>Description</h3>

<p>Wrapper around other more basic funtions, in order to generate phenocam
data products.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>process_phenocam(
  file,
  outlier_detection = TRUE,
  smooth = TRUE,
  contract = FALSE,
  expand = TRUE,
  truncate,
  phenophase = TRUE,
  snow_flag = FALSE,
  penalty = 0.5,
  out_dir = tempdir(),
  internal = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="process_phenocam_+3A_file">file</code></td>
<td>
<p>1 or 3-day PhenoCam time series file path</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_outlier_detection">outlier_detection</code></td>
<td>
<p>TRUE or FALSE, detect outliers</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_smooth">smooth</code></td>
<td>
<p>smooth data (logical, default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_contract">contract</code></td>
<td>
<p>contract 3-day data upon output
(logical, default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_expand">expand</code></td>
<td>
<p>expand 3-day data upon input 
(logical, default is <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_truncate">truncate</code></td>
<td>
<p>year (numeric) to which to constrain the output</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_phenophase">phenophase</code></td>
<td>
<p>logical, calculate transition dates (default = <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_snow_flag">snow_flag</code></td>
<td>
<p>integrate snow flags?</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_penalty">penalty</code></td>
<td>
<p>how sensitive is the change point algorithm, lower is more
sensitve (&lt; 1, default = 0.5)</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store downloaded data 
(default = tempdir())</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_internal">internal</code></td>
<td>
<p>allow for the data element to be returned to the workspace</p>
</td></tr>
<tr><td><code id="process_phenocam_+3A_...">...</code></td>
<td>
<p>additional parameters to be forwarded to the phenophases()
function, used internally in the routine</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Downloaded files in out_dir of requested time series products, as well
as derived phenophase estimates based upon these time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download the first ROI time series for the Harvard PhenoCam site
# at an aggregation frequency of 3-days.
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")
 
# read phenocam data into phenocamr data structure                  
df &lt;- process_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
                  

## End(Not run)
</code></pre>

<hr>
<h2 id='read_phenocam'>Read PhenoCam time series data</h2><span id='topic+read_phenocam'></span>

<h3>Description</h3>

<p>Reads PhenoCam data into a nested list, preserving
header data and critical file name information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_phenocam(filename)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read_phenocam_+3A_filename">filename</code></td>
<td>
<p>a PhenoCam data file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A nested data structure including site meta-data, the full
header and the data as a 'data.frame()'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data (do not smooth)
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3",
                  smooth = FALSE)

# read the phenocamo data file
df = read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

# print data structure
print(summary(df))

# write the phenocamo data file
write_phenocam(df, out_dir = tempdir())

## End(Not run)
</code></pre>

<hr>
<h2 id='smooth_ts'>Smooth a PhenoCam time series</h2><span id='topic+smooth_ts'></span>

<h3>Description</h3>

<p>Smooths time series iteratively using a Akaike information criterion (AIC) 
to find an optimal smoothing parameter and curve.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smooth_ts(
  data,
  metrics = c("gcc_mean", "gcc_50", "gcc_75", "gcc_90", "rcc_mean", "rcc_50", "rcc_75",
    "rcc_90"),
  force = TRUE,
  internal = TRUE,
  out_dir = tempdir()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smooth_ts_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file or data structure</p>
</td></tr>
<tr><td><code id="smooth_ts_+3A_metrics">metrics</code></td>
<td>
<p>which metrics to process, normally all default ones</p>
</td></tr>
<tr><td><code id="smooth_ts_+3A_force">force</code></td>
<td>
<p><code>TRUE</code> / <code>FALSE</code>, force reprocessing?</p>
</td></tr>
<tr><td><code id="smooth_ts_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="smooth_ts_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An PhenoCam data structure or file with optimally smoothed time series
objects added to the original file. Smoothing is required for 'phenophase()'
and 'transition_dates()' functions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# with defaults, outputting a data frame
# with smoothed values, overwriting the original

# download demo data (do not smooth)
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3",
                  smooth = FALSE)

# smooth the downloaded file (and overwrite the original)
smooth_ts(file.path(tempdir(),"harvard_DB_1000_3day.csv"))

# the function also works on a PhenoCam data frame
df &lt;- read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
df &lt;- smooth_ts(df)

## End(Not run)
</code></pre>

<hr>
<h2 id='transition_dates'>Calculates transition dates for a PhenoCam time series</h2><span id='topic+transition_dates'></span>

<h3>Description</h3>

<p>Segments of a PhenoCam time series and calculates threshold based transition
dates for all segments. This function is rarely called stand alone and
'phenophases()' should be preferred when evaluating PhenoCam time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>transition_dates(
  data,
  lower_thresh = 0.1,
  middle_thresh = 0.25,
  upper_thresh = 0.5,
  percentile = 90,
  penalty = 0.5,
  seg_length = 14,
  reverse = FALSE,
  plot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="transition_dates_+3A_data">data</code></td>
<td>
<p>a PhenoCam data file or data structure</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_lower_thresh">lower_thresh</code></td>
<td>
<p>the minimum threshold used (default = 0.1)</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_middle_thresh">middle_thresh</code></td>
<td>
<p>the middle threshold used (default = 0.25)</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_upper_thresh">upper_thresh</code></td>
<td>
<p>the maximum threshold used (default = 0.5)</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_percentile">percentile</code></td>
<td>
<p>time series percentiles to process (mean, 50, 75, 90)</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_penalty">penalty</code></td>
<td>
<p>how sensitive is the algorithm, lower is more sensitve (&lt; 1 )</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_seg_length">seg_length</code></td>
<td>
<p>minimum length of a segment to be evaluated</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_reverse">reverse</code></td>
<td>
<p>flip the direction of the processing</p>
</td></tr>
<tr><td><code id="transition_dates_+3A_plot">plot</code></td>
<td>
<p>plot for debugging purposes</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Transition date estimates in UNIX time, including uncertainties
and the threshold values estimated for each section of a time series.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")

# read the data and calculate transition dates
df &lt;- read_phenocam(file.path(tempdir(),"harvard_DB_1000_3day.csv"))
my_dates &lt;- transition_dates(df,
                            lower_thresh = 0.1,
                            middle_thresh = 0.25,
                            upper_thresh = 0.5,
                            percentile = 90,
                            reverse = FALSE,
                            plot = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='truncate_phenocam'>Truncate a PhenoCam time series</h2><span id='topic+truncate_phenocam'></span>

<h3>Description</h3>

<p>The 'expand_phenocam()' function provides a similar functionality and is
prefered. This function remains as it might serve a purpose to some. Might
be deprecated in the future.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>truncate_phenocam(data, year = 2015, internal = TRUE, out_dir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="truncate_phenocam_+3A_data">data</code></td>
<td>
<p>a PhenoCam file or data frame</p>
</td></tr>
<tr><td><code id="truncate_phenocam_+3A_year">year</code></td>
<td>
<p>the last valid year, discard the rest</p>
</td></tr>
<tr><td><code id="truncate_phenocam_+3A_internal">internal</code></td>
<td>
<p>return a data structure if given a file on disk
(<code>TRUE</code> / <code>FALSE</code> = default)</p>
</td></tr>
<tr><td><code id="truncate_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data (default = tempdir())</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A truncated PhenoCam data structure or file, with data limited to
the year specified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3")
                  
# overwrites the original file, increasing
# decreasing the file size, with given year as maximum.
truncate_phenocam(file.paste(tempdir(),"harvard_DB_1000_3day.csv"),
                  year = 2015)

## End(Not run)
</code></pre>

<hr>
<h2 id='write_phenocam'>Write a phenocamr data structure to file</h2><span id='topic+write_phenocam'></span>

<h3>Description</h3>

<p>Writes a nested data structure of class phenocamr to file, reconstructing
the original data structure from included headers and data components.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_phenocam(df = NULL, out_dir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="write_phenocam_+3A_df">df</code></td>
<td>
<p>a nested data structure of class phenocamr</p>
</td></tr>
<tr><td><code id="write_phenocam_+3A_out_dir">out_dir</code></td>
<td>
<p>output directory where to store data</p>
</td></tr>
</table>


<h3>Value</h3>

<p>writes PhenoCam data structure to file, retains proper header info
and inserts a processing time stamp.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
# download demo data (do not smooth)
download_phenocam(site = "harvard$",
                  veg_type = "DB",
                  roi_id = "1000",
                  frequency = "3",
                  smooth = FALSE)

# read the phenocamo data file
df = read_phenocam(file.paste(tempdir(),"harvard_DB_1000_3day.csv"))

# print data structure
print(summary(df))
 
# write the phenocamo data file
write_phenocam(df, out_dir = tempdir())

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
