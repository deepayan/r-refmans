<!DOCTYPE html><html lang="en"><head><title>Help for package klsh</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {klsh}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#bag_of_word_ify'><p>Function to convert a record into a bag of tokens with a fieldwise flag</p></a></li>
<li><a href='#bag_signatures'><p>Function that reduces a bag of words into a signature matrix using multiple</p>
random projections</a></li>
<li><a href='#block.ids.from.blocking'><p>Returns the block ids associated with a blocking method.</p></a></li>
<li><a href='#calc_idf'><p>Function to calculate the inverse document frequency given a shingled bag of words</p></a></li>
<li><a href='#confusion.from.blocking'><p>Perform evaluations (recall) for blocking.</p></a></li>
<li><a href='#klsh'><p>Function that reduces a bag of words into a signature matrix using multiple</p>
random projections</a></li>
<li><a href='#reduction.ratio'><p>Returns the reduction ratio associated with a blocking method</p></a></li>
<li><a href='#reduction.ratio.from.blocking'><p>Returns the reduction ratio associated with a blocking method</p></a></li>
<li><a href='#rproject_bags'><p>Function that generates unit random vectors and</p>
takes (weighted) projections onto the random unit vectors given a bag of words</a></li>
<li><a href='#sacks_of_bags_of_words'><p>Function to convert all records into a bag of tokens</p></a></li>
<li><a href='#tokenify'><p>Function to token a string into its k components</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Blocking for Record Linkage</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.2), blink, stats, utils, plyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp, stringi, SnowballC</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, ggplot2, rmarkdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Description:</td>
<td>An implementation of the blocking algorithm KLSH in Steorts, Ventura, Sadinle, Fienberg (2014) &lt;<a href="https://doi.org/10.1007%2F978-3-319-11257-2_20">doi:10.1007/978-3-319-11257-2_20</a>&gt;, which is a k-means variant of locality sensitive hashing. The method is illustrated with examples and a vignette. </td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1.9000</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-10-14 10:06:18 UTC; rebeccasteorts</td>
</tr>
<tr>
<td>Author:</td>
<td>Rebecca Steorts [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rebecca Steorts &lt;beka@stat.duke.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-10-22 15:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='bag_of_word_ify'>Function to convert a record into a bag of tokens with a fieldwise flag</h2><span id='topic+bag_of_word_ify'></span>

<h3>Description</h3>

<p>Function to convert a record into a bag of tokens with a fieldwise flag
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bag_of_word_ify(record, k, fieldwise = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bag_of_word_ify_+3A_record">record</code></td>
<td>
<p>String or record</p>
</td></tr>
<tr><td><code id="bag_of_word_ify_+3A_k">k</code></td>
<td>
<p>Parameter k, which is the number of shingle, tokens, or grams to break the string into</p>
</td></tr>
<tr><td><code id="bag_of_word_ify_+3A_fieldwise">fieldwise</code></td>
<td>
<p>Flag where the defalt setting to include the record as the entire string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes the bag of tokens for a string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
bag_of_word_ify(data.500[1,c(-2)],k=2)
bag_of_word_ify(data.500[300,c(-2)],k=2)
names(bag_of_word_ify(data.500[300,c(-2)],k=2))
</code></pre>

<hr>
<h2 id='bag_signatures'>Function that reduces a bag of words into a signature matrix using multiple
random projections</h2><span id='topic+bag_signatures'></span>

<h3>Description</h3>

<p>Function that reduces a bag of words into a signature matrix using multiple
random projections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bag_signatures(sack_of_bags, p, weighting_table)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bag_signatures_+3A_sack_of_bags">sack_of_bags</code></td>
<td>
<p>Sack of bag of words</p>
</td></tr>
<tr><td><code id="bag_signatures_+3A_p">p</code></td>
<td>
<p>Number of random projections p</p>
</td></tr>
<tr><td><code id="bag_signatures_+3A_weighting_table">weighting_table</code></td>
<td>
<p>Weighting table (inverse document frequency)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes a signature matrix using multiple random projections and
the inverse document frequency weights
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
sack &lt;- sacks_of_bags_of_words(data.500[1:3,c(-2)],k=2)
idf &lt;- calc_idf(sack)
bag_signatures(sack, p=5, idf)
</code></pre>

<hr>
<h2 id='block.ids.from.blocking'>Returns the block ids associated with a blocking method.</h2><span id='topic+block.ids.from.blocking'></span>

<h3>Description</h3>

<p>Returns the block ids associated with a blocking method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>block.ids.from.blocking(blocking)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="block.ids.from.blocking_+3A_blocking">blocking</code></td>
<td>
<p>A list of the blocks.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of the blocks ids that corresponds to each block
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("RLdata500")
klsh.blocks &lt;- klsh(RLdata500, p=20, num.blocks=5, k=2)
block.ids.from.blocking(klsh.blocks)
</code></pre>

<hr>
<h2 id='calc_idf'>Function to calculate the inverse document frequency given a shingled bag of words</h2><span id='topic+calc_idf'></span>

<h3>Description</h3>

<p>Function to calculate the inverse document frequency given a shingled bag of words
</p>


<h3>Usage</h3>

<pre><code class='language-R'>calc_idf(sack_of_bags)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="calc_idf_+3A_sack_of_bags">sack_of_bags</code></td>
<td>
<p>Sack of bag of words</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes the inverse document frequency for a bag of words
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
sack &lt;- sacks_of_bags_of_words(data.500[1:3,c(-2)],k=2)
(idf &lt;- calc_idf(sack))
match(names(sack[[1]]), names(idf))
</code></pre>

<hr>
<h2 id='confusion.from.blocking'>Perform evaluations (recall) for blocking.</h2><span id='topic+confusion.from.blocking'></span>

<h3>Description</h3>

<p>Perform evaluations (recall) for blocking.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>confusion.from.blocking(blocking, true_ids, recall.only = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="confusion.from.blocking_+3A_blocking">blocking</code></td>
<td>
<p>A list of the blocks</p>
</td></tr>
<tr><td><code id="confusion.from.blocking_+3A_true_ids">true_ids</code></td>
<td>
<p>The true identifiers for comparisons</p>
</td></tr>
<tr><td><code id="confusion.from.blocking_+3A_recall.only">recall.only</code></td>
<td>
<p>Flag that when true only prints the recall, otherwise
prints many evaluation metrics in a list</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of that returns the recall and the precision
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("RLdata500")
klsh.blocks &lt;- klsh(RLdata500, p=20, num.blocks=5, k=2)
confusion.from.blocking(klsh.blocks, identity.RLdata500)
confusion.from.blocking(klsh.blocks, identity.RLdata500, recall.only=TRUE)
</code></pre>

<hr>
<h2 id='klsh'>Function that reduces a bag of words into a signature matrix using multiple
random projections</h2><span id='topic+klsh'></span>

<h3>Description</h3>

<p>Function that reduces a bag of words into a signature matrix using multiple
random projections
</p>


<h3>Usage</h3>

<pre><code class='language-R'>klsh(r.set, p, num.blocks, k, fieldwise = FALSE, quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="klsh_+3A_r.set">r.set</code></td>
<td>
<p>Set of records</p>
</td></tr>
<tr><td><code id="klsh_+3A_p">p</code></td>
<td>
<p>Number of random projections p</p>
</td></tr>
<tr><td><code id="klsh_+3A_num.blocks">num.blocks</code></td>
<td>
<p>The total number of desired blocks</p>
</td></tr>
<tr><td><code id="klsh_+3A_k">k</code></td>
<td>
<p>The total number of tokens</p>
</td></tr>
<tr><td><code id="klsh_+3A_fieldwise">fieldwise</code></td>
<td>
<p>Flag with default FALSE</p>
</td></tr>
<tr><td><code id="klsh_+3A_quiet">quiet</code></td>
<td>
<p>Flag to turn on printed progress, default to TRUE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The blocks from performing KLSH
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
klsh.blocks &lt;- klsh(data.500, p=20, num.blocks=5, k=2)
</code></pre>

<hr>
<h2 id='reduction.ratio'>Returns the reduction ratio associated with a blocking method</h2><span id='topic+reduction.ratio'></span>

<h3>Description</h3>

<p>Returns the reduction ratio associated with a blocking method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduction.ratio(block.labels)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reduction.ratio_+3A_block.labels">block.labels</code></td>
<td>
<p>A list of the blocks labels.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The reduction ratio
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("RLdata500")
klsh.blocks &lt;- klsh(RLdata500, p=20, num.blocks=5, k=2)
block.ids &lt;- block.ids.from.blocking(klsh.blocks)
reduction.ratio(block.ids)
</code></pre>

<hr>
<h2 id='reduction.ratio.from.blocking'>Returns the reduction ratio associated with a blocking method</h2><span id='topic+reduction.ratio.from.blocking'></span>

<h3>Description</h3>

<p>Returns the reduction ratio associated with a blocking method
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reduction.ratio.from.blocking(blocking)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="reduction.ratio.from.blocking_+3A_blocking">blocking</code></td>
<td>
<p>The actual blocks</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The reduction ratio
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("RLdata500")
klsh.blocks &lt;- klsh(RLdata500, p=20, num.blocks=5, k=2)
reduction.ratio.from.blocking(klsh.blocks)
</code></pre>

<hr>
<h2 id='rproject_bags'>Function that generates unit random vectors and 
takes (weighted) projections onto the random unit vectors given a bag of words</h2><span id='topic+rproject_bags'></span>

<h3>Description</h3>

<p>Function that generates unit random vectors and 
takes (weighted) projections onto the random unit vectors given a bag of words
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rproject_bags(sack_of_bags, weighting_table)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rproject_bags_+3A_sack_of_bags">sack_of_bags</code></td>
<td>
<p>Sack of bag of words</p>
</td></tr>
<tr><td><code id="rproject_bags_+3A_weighting_table">weighting_table</code></td>
<td>
<p>Weighting table (inverse document frequency)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes the inverse document frequency for a bag of words
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
sack &lt;- sacks_of_bags_of_words(data.500[1:3,c(-2)],k=2)
idf &lt;- calc_idf(sack)
match(names(sack[[1]]), names(idf))
rproject_bags(sack, idf)
</code></pre>

<hr>
<h2 id='sacks_of_bags_of_words'>Function to convert all records into a bag of tokens</h2><span id='topic+sacks_of_bags_of_words'></span>

<h3>Description</h3>

<p>Function to convert all records into a bag of tokens
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sacks_of_bags_of_words(r.set, k, fieldwise = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sacks_of_bags_of_words_+3A_r.set">r.set</code></td>
<td>
<p>Record set</p>
</td></tr>
<tr><td><code id="sacks_of_bags_of_words_+3A_k">k</code></td>
<td>
<p>Parameter k, which is the number of shingle, tokens, or grams to break the string into</p>
</td></tr>
<tr><td><code id="sacks_of_bags_of_words_+3A_fieldwise">fieldwise</code></td>
<td>
<p>Flag where the defalt setting to include the record as the entire string</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes the bag of tokens for a record set
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(RLdata500)
data.500 &lt;- RLdata500[-c(2,4)]
sacks_of_bags_of_words(data.500[1:3,c(-2)],k=2)
</code></pre>

<hr>
<h2 id='tokenify'>Function to token a string into its k components</h2><span id='topic+tokenify'></span>

<h3>Description</h3>

<p>Function to token a string into its k components
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tokenify(string, k)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tokenify_+3A_string">string</code></td>
<td>
<p>A string or record</p>
</td></tr>
<tr><td><code id="tokenify_+3A_k">k</code></td>
<td>
<p>A parameter k, which is the number of shingle, tokens, or grams to break the string into</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Computes the tokenized or grammed version of a string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tokenify("Alexander",2)
tokenify("Alexander Smith", 2)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
