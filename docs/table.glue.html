<!DOCTYPE html><html><head><title>Help for package table.glue</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {table.glue}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#as_inline'><p>Convert table data to inline list</p></a></li>
<li><a href='#bracket_drop'><p>Bracket helpers</p></a></li>
<li><a href='#format_big'><p>Format values left of decimal</p></a></li>
<li><a href='#format_decimal'><p>Format decimal symbol</p></a></li>
<li><a href='#format_missing'><p>Format missing values</p></a></li>
<li><a href='#format_small'><p>Format values right of decimal</p></a></li>
<li><a href='#nhanes'><p>NHANES blood pressure data</p></a></li>
<li><a href='#round_half_up'><p>Set rules for rounding ties</p></a></li>
<li><a href='#round_spec'><p>Make a rounding specification</p></a></li>
<li><a href='#round_using_magnitude'><p>Set rules for rounding numbers</p></a></li>
<li><a href='#table_ester'><p>Round estimates and their corresponding errors</p></a></li>
<li><a href='#table_glue'><p>Expressive rounding for table values</p></a></li>
<li><a href='#table_pvalue'><p>Round p-values</p></a></li>
<li><a href='#table_value'><p>General rounding for tables</p></a></li>
<li><a href='#table.glue-package'><p>table.glue: Make and Apply Customized Rounding Specifications for Tables</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Make and Apply Customized Rounding Specifications for Tables</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.3</td>
</tr>
<tr>
<td>Description:</td>
<td>Translate double and integer valued data into
    character values formatted for tabulation in manuscripts
    or other types of academic reports. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, covr, knitr, rmarkdown, magrittr, dplyr, tidyr,
tibble, gt</td>
</tr>
<tr>
<td>Imports:</td>
<td>glue, stringi</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bcjaeger/table.glue">https://github.com/bcjaeger/table.glue</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bcjaeger/table.glue/issues">https://github.com/bcjaeger/table.glue/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-06 14:04:38 UTC; bjaeger</td>
</tr>
<tr>
<td>Author:</td>
<td>Byron Jaeger <a href="https://orcid.org/0000-0001-7399-2299"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Byron Jaeger &lt;bjaeger@wakehealth.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-07 08:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='as_inline'>Convert table data to inline list</h2><span id='topic+as_inline'></span>

<h3>Description</h3>

<p>Convert table data to inline list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_inline(data, tbl_variables, tbl_values)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_inline_+3A_data">data</code></td>
<td>
<p>a data frame.</p>
</td></tr>
<tr><td><code id="as_inline_+3A_tbl_variables">tbl_variables</code></td>
<td>
<p>column names that will be used to form groups in the table</p>
</td></tr>
<tr><td><code id="as_inline_+3A_tbl_values">tbl_values</code></td>
<td>
<p>column names that contains table values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list of <code>tbl_values</code> values for each permutation of <code>tbl_variables</code>
</p>


<h3>Note</h3>

<p>variables in <code>tbl_variables</code> that have missing values will be
have their missing values converted into an explicit category named
variable_missing, where 'variable' is the name of the variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
example_data &lt;- data.frame(
  sex = c("female", "male"),
  height = c("158 (154 - 161)", "178 (175 - 188)")
)

as_inline(example_data, tbl_variables = 'sex', tbl_values = 'height')

car_data &lt;- mtcars
car_data$car_name &lt;- rownames(mtcars)
as_inline(car_data, tbl_variables = 'car_name', tbl_values = 'mpg')

</code></pre>

<hr>
<h2 id='bracket_drop'>Bracket helpers</h2><span id='topic+bracket_drop'></span><span id='topic+bracket_extract'></span><span id='topic+bracket_insert_left'></span><span id='topic+bracket_insert_right'></span><span id='topic+bracket_point_estimate'></span><span id='topic+bracket_lower_bound'></span><span id='topic+bracket_upper_bound'></span>

<h3>Description</h3>

<p>If you have table values that take the form
<em>point estimate (uncertainty estimate)</em>, you can use these
functions to access specific parts of the table value.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bracket_drop(x, bracket_left = "(", bracket_right = ")")

bracket_extract(
  x,
  bracket_left = "(",
  bracket_right = ")",
  drop_bracket = FALSE
)

bracket_insert_left(x, string, bracket_left = "(", bracket_right = ")")

bracket_insert_right(x, string, bracket_left = "(", bracket_right = ")")

bracket_point_estimate(x, bracket_left = "(", bracket_right = ")")

bracket_lower_bound(
  x,
  bracket_left = "(",
  separator = ",",
  bracket_right = ")"
)

bracket_upper_bound(
  x,
  bracket_left = "(",
  separator = ",",
  bracket_right = ")"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bracket_drop_+3A_x">x</code></td>
<td>
<p>a character vector where each value contains a point
estimate and confidence limits.</p>
</td></tr>
<tr><td><code id="bracket_drop_+3A_bracket_left">bracket_left</code></td>
<td>
<p>a character value specifying what symbol is
used to bracket the left hand side of the confidence interval</p>
</td></tr>
<tr><td><code id="bracket_drop_+3A_bracket_right">bracket_right</code></td>
<td>
<p>a character value specifying what symbol is
used to bracket the right hand side of the confidence interval</p>
</td></tr>
<tr><td><code id="bracket_drop_+3A_drop_bracket">drop_bracket</code></td>
<td>
<p>a logical value (<code>TRUE</code> or <code>FALSE</code>). If <code>TRUE</code>,
then the symbols on the left and right hand side of the interval
will not be included in the returned value. If <code>FALSE</code>, these symbols
will be included.</p>
</td></tr>
<tr><td><code id="bracket_drop_+3A_string">string</code></td>
<td>
<p>a character value of a string that will be inserted
into the left or right side of the bracket.</p>
</td></tr>
<tr><td><code id="bracket_drop_+3A_separator">separator</code></td>
<td>
<p>a character value specifying what symbol is used
to separate the lower and upper bounds of the interval.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character value with length equal to the length of <code>x</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tbl_value &lt;- "12.1 (95% CI: 9.1, 15.1)"
bracket_drop(tbl_value)
bracket_point_estimate(tbl_value)
bracket_extract(tbl_value, drop_bracket = TRUE)
bracket_lower_bound(tbl_value)
bracket_upper_bound(tbl_value)

</code></pre>

<hr>
<h2 id='format_big'>Format values left of decimal</h2><span id='topic+format_big'></span>

<h3>Description</h3>

<p>Values to the left of the decimal are generally called 'big' since they
are larger than values to the right of the decimal. <code>format_big()</code>
lets you update the settings of a <code>rounding_specification</code> object
(see <a href="#topic+round_spec">round_spec</a>) so that values left of the decimal will be printed
with a specific format (see examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_big(rspec, mark = ",", interval = 3L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_big_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="format_big_+3A_mark">mark</code></td>
<td>
<p>a character value used to separate number groups to the
left of the decimal point. See <a href="base.html#topic+prettyNum">prettyNum</a> for more details on this.
Set this input to &rdquo; to negate it's effect.</p>
</td></tr>
<tr><td><code id="format_big_+3A_interval">interval</code></td>
<td>
<p>a numeric value indicating the size of number groups
for numbers left of the decimal.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
big_x &lt;- 1234567

rspec &lt;- format_big(round_spec(), mark = '|', interval = 3)

table_value(big_x, rspec) # returns "1|234|567"

</code></pre>

<hr>
<h2 id='format_decimal'>Format decimal symbol</h2><span id='topic+format_decimal'></span>

<h3>Description</h3>

<p><code>format_decimal()</code> lets you update the settings of a
<code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>) so that
the decimal is represented by a user-specified mark.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_decimal(rspec, mark = ".")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_decimal_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="format_decimal_+3A_mark">mark</code></td>
<td>
<p>a character value used to represent the decimal point.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>See Also</h3>

<p>Other formatting helpers: 
<code><a href="#topic+format_small">format_small</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
small_x &lt;- 0.1234567

rspec &lt;- round_spec()
rspec &lt;- round_using_decimal(rspec, digits = 7)
rspec &lt;- format_decimal(rspec, mark = '*')

table_value(small_x, rspec)

</code></pre>

<hr>
<h2 id='format_missing'>Format missing values</h2><span id='topic+format_missing'></span>

<h3>Description</h3>

<p><code>format_missing()</code> updates a <code>rounding_specification</code> object so that
missing values are printed as the user specifies.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_missing(rspec, replace_na_with)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_missing_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="format_missing_+3A_replace_na_with">replace_na_with</code></td>
<td>
<p>a character value that replaces missing values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
rspec &lt;- round_spec()
rspec &lt;- format_missing(rspec, 'oh no!')
table_value(x = c(pi, NA), rspec)

</code></pre>

<hr>
<h2 id='format_small'>Format values right of decimal</h2><span id='topic+format_small'></span>

<h3>Description</h3>

<p>Values to the right of the decimal are generally called 'small' since they
are smaller than values to the left of the decimal. <code>format_small()</code>
lets you update the settings of a <code>rounding_specification</code> object
(see <a href="#topic+round_spec">round_spec</a>) so that values right of the decimal will be printed
with a specific format (see examples).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_small(rspec, mark = "", interval = 5L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_small_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="format_small_+3A_mark">mark</code></td>
<td>
<p>a character value used to separate number groups to the
right of the decimal point. See <a href="base.html#topic+prettyNum">prettyNum</a> for more details on this.
Set this input to &rdquo; to negate it's effect.</p>
</td></tr>
<tr><td><code id="format_small_+3A_interval">interval</code></td>
<td>
<p>a numeric value indicating the size of number groups
for numbers left of the decimal.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>See Also</h3>

<p>Other formatting helpers: 
<code><a href="#topic+format_decimal">format_decimal</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
small_x &lt;- 0.1234567

rspec &lt;- round_spec()
rspec &lt;- round_using_decimal(rspec, digits = 7)
rspec &lt;- format_small(rspec, mark = '*', interval = 1)

table_value(small_x, rspec)

</code></pre>

<hr>
<h2 id='nhanes'>NHANES blood pressure data</h2><span id='topic+nhanes'></span>

<h3>Description</h3>

<p>The US National Health and Nutrition Examination Survey
(NHANES) was designed to assess the health and nutritional status of the
non-institutionalized US population and was conducted by the National
Center for Health Statistics of the Centers for Disease Control and
Prevention (1). Since 1999-2000, NHANES has been conducted in two-year
cycles using a multistage probability sampling design to select
participants. Each cycle is independent with different participants
recruited.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nhanes
</code></pre>


<h3>Format</h3>

<p>A data frame with columns:
</p>

<dl>
<dt>exam</dt><dd><p>NHANES exam: 2013-2014, 2015-2016, or 2017-2018</p>
</dd>
<dt>seqn</dt><dd><p>survey participant identifier</p>
</dd>
<dt>psu</dt><dd><p>primary sampling unit</p>
</dd>
<dt>strata</dt><dd><p>survey strata</p>
</dd>
<dt>wts_mec_2yr</dt><dd><p>2 year mobile examination weights</p>
</dd>
<dt>exam_status</dt><dd><p>exam status. Participants either completed both the NHANES interview and exam or just the interview.</p>
</dd>
<dt>age</dt><dd><p>participant's age, in years</p>
</dd>
<dt>sex</dt><dd><p>participant's sex</p>
</dd>
<dt>race_ethnicity</dt><dd><p>participant's race and ethnicity</p>
</dd>
<dt>education</dt><dd><p>participant's education</p>
</dd>
<dt>pregnant</dt><dd><p>pregancy status</p>
</dd>
<dt>bp_sys_mmhg</dt><dd><p>participant's systolic blood pressure, mm Hg</p>
</dd>
<dt>bp_dia_mmhg</dt><dd><p>participant's diastolic blood pressure, mm Hg</p>
</dd>
<dt>n_msr_sbp</dt><dd><p>the number of valid systolic blood pressure readings</p>
</dd>
<dt>n_msr_dbp</dt><dd><p>the number of valid diastolic blood pressure readings</p>
</dd>
<dt>bp_high_aware</dt><dd><p>was participant ever told they had high blood pressure by a medical professional?</p>
</dd>
<dt>meds_bp</dt><dd><p>is participant currently using medication to lower their blood pressure?</p>
</dd>
</dl>



<h3>Note</h3>

<p>Blood pressure measurements
</p>
<p>The same protocol was followed to measure systolic and diastolic
blood pressure (SBP and DBP) in each NHANES cycle. After survey
participants had rested 5 minutes, their BP was measured by a
trained physician using a mercury sphygmomanometer and an
appropriately sized cuff. Three BP measurements were obtained at
30 second intervals.
</p>


<h3>Source</h3>

<p>NHANES website, <a href="https://www.cdc.gov/nchs/nhanes/index.htm">https://www.cdc.gov/nchs/nhanes/index.htm</a>
</p>


<h3>References</h3>


<ol>
<li><p> National health and nutrition examination survey homepage,
available at https://www.cdc.gov/nchs/nhanes/index.htm.
Accessed on 09/07/2020.
</p>
</li></ol>



<h3>Examples</h3>

<pre><code class='language-R'>nhanes

</code></pre>

<hr>
<h2 id='round_half_up'>Set rules for rounding ties</h2><span id='topic+round_half_up'></span><span id='topic+round_half_even'></span>

<h3>Description</h3>

<p>Rounding a number x to the nearest integer requires some tie-breaking
rule for those cases when x is exactly half-way between two integers,
that is, when the fraction part of x is exactly 0.5. The
<code>round_half_up()</code> function implements a tie-breaking rule that
consistently rounds half units upward. Although this creates a slight
bias toward larger rounded outputs, it is widely used in many disciplines.
The <code>round_half_even()</code> function breaks ties by rounding to the nearest
even unit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_half_up(rspec)

round_half_even(rspec)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_half_up_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>See Also</h3>

<p>Other rounding helpers: 
<code><a href="#topic+round_using_magnitude">round_using_magnitude</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# note base R behavior rounds to even:
round(0.5) # --&gt; 0
round(1.5) # --&gt; 2
round(2.5) # --&gt; 2

# make rspec that rounds up
rspec &lt;- round_half_up(round_spec())
rspec &lt;- round_using_decimal(rspec, digits = 0)

# check
table_value(0.5, rspec) # --&gt; 1
table_value(1.5, rspec) # --&gt; 2
table_value(2.5, rspec) # --&gt; 3

# make rspec that rounds even
rspec &lt;- round_half_even(round_spec())
rspec &lt;- round_using_decimal(rspec, digits = 0)

# check
table_value(0.5, rspec) # --&gt; 0
table_value(1.5, rspec) # --&gt; 2
table_value(2.5, rspec) # --&gt; 2
</code></pre>

<hr>
<h2 id='round_spec'>Make a rounding specification</h2><span id='topic+round_spec'></span>

<h3>Description</h3>

<p><code>round_spec()</code> creates a rounding specification object with default
settings. The settings of a rounding specification object can be
updated using functions in the <code>round_</code> (see <a href="#topic+round_half_up">round_half_up</a>,
<a href="#topic+round_half_even">round_half_even</a>, <a href="#topic+round_using_signif">round_using_signif</a>, <a href="#topic+round_using_decimal">round_using_decimal</a>,
and <a href="#topic+round_using_magnitude">round_using_magnitude</a>) and <code>format_</code> (see <a href="#topic+format_missing">format_missing</a>,
<a href="#topic+format_big">format_big</a>, <a href="#topic+format_small">format_small</a>, and <a href="#topic+format_decimal">format_decimal</a>) families.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round_spec(force_default = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_spec_+3A_force_default">force_default</code></td>
<td>
<p>a logical value. If <code>TRUE</code>, then <code>round_spec()</code>
ignores global options and uses its factory default values.
If <code>FALSE</code>, <code>round_spec()</code> will access global options to determine
its settings.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Rounding specifications are meant to be passed into the <a href="#topic+table_glue">table_glue</a>
and <a href="#topic+table_value">table_value</a> functions. The specification can also be passed into
<code>table_</code> functions implicitly by saving a rounding specification into
the global options.
</p>
<p>The <code>round_spec()</code> function intentionally uses no input arguments.
This is to encourage users to develop rounding specifications
using the <code>round_</code> and <code>format_</code> families in conjunction with
the pipe (<code style="white-space: pre;">&#8288;%&gt;%&#8288;</code>) operator.
</p>


<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
rspec &lt;- round_spec()

table_value(x = pi, rspec)

</code></pre>

<hr>
<h2 id='round_using_magnitude'>Set rules for rounding numbers</h2><span id='topic+round_using_magnitude'></span><span id='topic+round_using_signif'></span><span id='topic+round_using_decimal'></span>

<h3>Description</h3>

<p>These functions update a <code>rounding_specification</code> object (see
<a href="#topic+round_spec">round_spec</a>) so that a particular approach to rounding is applied:
</p>

<ul>
<li><p> round to a dynamic decimal place based on magnitude
of the rounded number (<code>round_using_magnitude()</code>)
</p>
</li>
<li><p> round to a specific number of significant
digits (<code>round_using_signif()</code>)
</p>
</li>
<li><p> round to a specific decimal place (<code>round_using_decimal()</code>)
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>round_using_magnitude(rspec, digits = c(2, 1, 0), breaks = c(1, 10, Inf))

round_using_signif(rspec, digits = 2)

round_using_decimal(rspec, digits = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round_using_magnitude_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="round_using_magnitude_+3A_digits">digits</code></td>
<td>
<p>for <code>round_using_decimal()</code> and <code>round_using_signif</code>,
a numeric value specifying the number of decimal places and
significant digits to round to, respectively.
For <code>round_using_magnitude()</code>, <code>digits</code> should be a numeric vector
of equal length to <code>breaks</code> that indicates how many decimals to
round to in the numeric range designated by <code>breaks</code>.
(see notes for example).</p>
</td></tr>
<tr><td><code id="round_using_magnitude_+3A_breaks">breaks</code></td>
<td>
<p>(only relevant if rounding based on magnitude)
a positive, monotonically increasing numeric vector
designating rounding boundaries.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>digits</code> and <code>breaks</code> must be used in coordination with each other
when rounding based on magnitude. For example, using
<code>breaks = c(1, 10, Inf)</code> and <code>decimals = c(2, 1, 0)</code>,
</p>

<ul>
<li><p> numbers whose absolute value is &lt; 1 are rounded to 2 decimal places,
</p>
</li>
<li><p> numbers whose absolute value is &gt;= 1 and &lt; 10 are rounding to 1
decimal place, and
</p>
</li>
<li><p> numbers whose absolute value is &gt;= 10 are rounding to 0 decimal places.
The use of magnitude to guide rounding rules is extremely flexible and
can be used for many different applications (e.g., see <a href="#topic+table_pvalue">table_pvalue</a>).
Rounding by magnitude is similar in some ways to rounding to a set
number of significant digits but not entirely the same (see examples).
</p>
</li></ul>



<h3>Value</h3>

<p>an object of class <code>rounding_specification</code>.
</p>


<h3>See Also</h3>

<p>Other rounding helpers: 
<code><a href="#topic+round_half_up">round_half_up</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- c(pi, exp(1))
x &lt;- c(x, x*10, x*100, x*1000)

# make one specification using each rounding approach
specs &lt;- list(
  magnitude = round_using_magnitude(round_spec()),
  decimal = round_using_decimal(round_spec()),
  signif = round_using_signif(round_spec())
)

# apply all three rounding specifications to x
# notice how the rounding specifications are in agreement
# for smaller values of x but their answers are different
# for larger values of x.

sapply(specs, function(rspec) table_value(x, rspec))

# output:
#  magnitude   decimal    signif
# [1,] "3.1"     "3.1"     "3.1"
# [2,] "2.7"     "2.7"     "2.7"
# [3,] "31"      "31.4"    "31.0"
# [4,] "27"      "27.2"    "27.0"
# [5,] "314"     "314.2"   "310.0"
# [6,] "272"     "271.8"   "270.0"
# [7,] "3,142"   "3,141.6" "3,100.0"
# [8,] "2,718"   "2,718.3" "2,700.0"
</code></pre>

<hr>
<h2 id='table_ester'>Round estimates and their corresponding errors</h2><span id='topic+table_ester'></span><span id='topic+table_estin'></span>

<h3>Description</h3>

<p>Though they are not easy to find in print, there are some general
conventions for rounding numbers. When rounding a summary statistic
such as the mean or median, the number of rounded digits shown
should be governed by the precision of the statistic. For instance,
authors are usually asked to present means plus or minus standard
deviations in published research, or regression coefficients plus
or minus the standard error. The convention applied here is to
</p>

<ol>
<li><p> find the place of the first significant digit of the error
</p>
</li>
<li><p> round the estimate to that place
</p>
</li>
<li><p> round the error to 1 additional place
</p>
</li>
<li><p> present the combination in a form such as estimate (error) or estimate +/- error
</p>
</li></ol>



<h3>Usage</h3>

<pre><code class='language-R'>table_ester(
  estimate,
  error,
  form = "{estimate} ± {error}",
  majority_rule = FALSE
)

table_estin(
  estimate,
  lower,
  upper,
  form = "{estimate} ({lower}, {upper})",
  majority_rule = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_ester_+3A_estimate">estimate</code></td>
<td>
<p>a numeric vector of estimate values.</p>
</td></tr>
<tr><td><code id="table_ester_+3A_error">error</code></td>
<td>
<p>a numeric vector of error values. All errors should be &gt;0.</p>
</td></tr>
<tr><td><code id="table_ester_+3A_form">form</code></td>
<td>
<p>a character value that indicates how the error and estimate
should be formatted together. Users can specify anything they like
as long as they use the terms <code>estimate</code> and <code>error</code> to refer to the
estimate and error values, respectively, and encapsulate those terms
inside of curly brackets, i.e.,   . For instance, if estimate = 1.23
and error = 0.45, then <code>form</code> = &quot;estimate (error)&quot; will return
&quot;1.2 (0.45)&quot;, a common format used in  presentation of the point and
error combination. The default <code>form</code> gives output in the form of
1.2 +/- 0.45.</p>
</td></tr>
<tr><td><code id="table_ester_+3A_majority_rule">majority_rule</code></td>
<td>
<p>a logical value. If <code>TRUE</code>, then the most common
digit used for rounding will be used to round every number given.
Within a single table, consistency in saving digits may be desirable,
so all numbers may be rounded to the place  indicated by the majority
of the numbers. Notably, if a user wants to exercise more control
over the number of decimals shown, they should use <code><a href="#topic+table_glue">table_glue()</a></code>
with a customized rounding specification (see <a href="#topic+round_spec">round_spec</a>).</p>
</td></tr>
<tr><td><code id="table_ester_+3A_lower">lower</code></td>
<td>
<p>the lower-bound of an interval for the estimate.</p>
</td></tr>
<tr><td><code id="table_ester_+3A_upper">upper</code></td>
<td>
<p>the upper-bound of an interval for the estimate.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector
</p>


<h3>References</h3>

<p>Blackstone, Eugene H. &quot;Rounding numbers&quot; (2016):
<em>The Journal of Thoracic and Cardiovascular Surgery</em>.
DOI: https://doi.org/10.1016/j.jtcvs.2016.09.003
</p>


<h3>See Also</h3>

<p>Other table helpers: 
<code><a href="#topic+table_glue">table_glue</a>()</code>,
<code><a href="#topic+table_pvalue">table_pvalue</a>()</code>,
<code><a href="#topic+table_value">table_value</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# ---- examples are taken from Blackstone, 2016 ----

# Example 1: ----
# Mean age is 72.17986, and the standard deviation (SD) is 9.364132.
## Steps:
## - Nine is the first significant figure of the SD.
## - Nine is in the ones place. Thus...
##   + round the mean to the ones place (i.e., round(x, digits = 0))
##   + round the SD to the tenths place (i.e., round(x, digits = 1))
table_ester(estimate = 72.17986, error = 9.364132)
# &gt; [1] 72 +/- 9.4

# an estimated lower and upper bound for 95% confidence limits
lower &lt;- 72.17986 - 1.96 * 9.364132
upper &lt;- 72.17986 + 1.96 * 9.364132
table_estin(estimate = 72.17986, lower = lower, upper = upper,
            form = "{estimate} (95% CI: {lower}, {upper})")
# &gt; [1] "72 (95% CI: 54, 91)"

# Example 2: ----
# Mean cost is $72,347.23, and the standard deviation (SD) is $23,994.06.
## Steps:
## - Two is the first significant figure of the SD.
## - Nine is in the ten thousands place. Thus...
##   + round mean to the 10-thousands place (i.e., round(x, digits = -4))
##   + round SD to the thousands place (i.e., round(x, digits = -3))
table_ester(estimate = 72347.23, error = 23994.06)
# &gt; [1] "70,000 +/- 24,000"

# an estimated lower and upper bound for 95% confidence limits
lower &lt;- 72347.23 - 1.96 * 23994.06
upper &lt;- 72347.23 + 1.96 * 23994.06
table_estin(estimate = 72347.23, lower = lower, upper = upper,
            form = "{estimate} (95% CI: {lower} - {upper})")
# &gt; [1] "70,000 (95% CI: 30,000 - 120,000)"


</code></pre>

<hr>
<h2 id='table_glue'>Expressive rounding for table values</h2><span id='topic+table_glue'></span>

<h3>Description</h3>

<p>Expressive rounding for table values
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_glue(..., rspec = NULL, .sep = "", .envir = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_glue_+3A_...">...</code></td>
<td>
<p>strings to round and format. Multiple inputs are concatenated
together. Named arguments are <strong>not</strong> supported.</p>
</td></tr>
<tr><td><code id="table_glue_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object. If no <code>rspec</code>
is given, a default setting will round values to decimal places
based on the magnitude of the values.</p>
</td></tr>
<tr><td><code id="table_glue_+3A_.sep">.sep</code></td>
<td>
<p>Separator used to separate elements</p>
</td></tr>
<tr><td><code id="table_glue_+3A_.envir">.envir</code></td>
<td>
<p>environment to evaluate each expression in.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of length equal to the vectors supplied in <code>...</code>
</p>


<h3>See Also</h3>

<p>Other table helpers: 
<code><a href="#topic+table_ester">table_ester</a>()</code>,
<code><a href="#topic+table_pvalue">table_pvalue</a>()</code>,
<code><a href="#topic+table_value">table_value</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
x &lt;- runif(10)
y &lt;- runif(10)

table_glue("{x} / {y} = {x/y}")

table_glue("{x}", "({100 * y}%)", .sep = ' ')

df = data.frame(x = 1:10, y=1:10)

table_glue("{x} / {y} = {as.integer(x/y)}", .envir = df)
table_glue("{x} / {y} = {as.integer(x/y)}")

with(df, table_glue("{x} / {y} = {as.integer(x/y)}"))

mtcars$car &lt;- rownames(mtcars)
# use the default rounding specification
table_glue(
  "the {car} gets ~{mpg} miles/gallon and weighs ~{wt} thousand lbs",
  .envir = mtcars[1:3, ]
)

# use your own rounding specification
rspec &lt;- round_spec()
rspec &lt;- round_using_decimal(rspec, digits = 1)

table_glue(
  "the {car} gets ~{mpg} miles/gallon and weighs ~{wt} thousand lbs",
  rspec = rspec,
  .envir = mtcars[1:3, ]
)
</code></pre>

<hr>
<h2 id='table_pvalue'>Round p-values</h2><span id='topic+table_pvalue'></span>

<h3>Description</h3>

<p>When presenting p-values, journals tend to request a lot of finessing.
<code>table_pvalue()</code> is meant to do almost all of the finessing for you.
The part it does not do is <em>interpret</em> the p-value. For that,
please see the guideline on interpretation of p-values by the American
Statistical Association (Wasserstein, 2016). The six main statements
on p-value usage are included in the &quot;Interpreting p-values&quot; section
below.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_pvalue(
  x,
  round_half_to = "even",
  decimals_outer = 3L,
  decimals_inner = 2L,
  alpha = 0.05,
  bound_inner_low = 0.01,
  bound_inner_high = 0.99,
  bound_outer_low = 0.001,
  bound_outer_high = 0.999,
  miss_replace = "--",
  drop_leading_zero = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_pvalue_+3A_x">x</code></td>
<td>
<p>a vector of numeric values. All values should be &gt; 0 and &lt; 1.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_round_half_to">round_half_to</code></td>
<td>
<p>a character value indicating how to break ties when
the rounded unit is exactly halfway between two rounding points.
See <a href="#topic+round_half_even">round_half_even</a> and <a href="#topic+round_half_up">round_half_up</a> for details. Valid inputs
are 'even' and 'up'.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_decimals_outer">decimals_outer</code></td>
<td>
<p>number of decimals to print when
p &gt; bound_outer_high or p &lt; bound_outer_low.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_decimals_inner">decimals_inner</code></td>
<td>
<p>number of decimals to print when
<code>bound_outer_low</code> &lt; p &lt; <code>bound_outer_high</code>.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_alpha">alpha</code></td>
<td>
<p>a numeric value indicating the significance level,
i.e. the probability that you will make the mistake of rejecting
the null hypothesis when it is true.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_bound_inner_low">bound_inner_low</code></td>
<td>
<p>the lower bound of the inner range.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_bound_inner_high">bound_inner_high</code></td>
<td>
<p>the upper bound of the inner range.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_bound_outer_low">bound_outer_low</code></td>
<td>
<p>the lowest value printed. Values lower than the
threshold will be printed as &lt;threshold.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_bound_outer_high">bound_outer_high</code></td>
<td>
<p>the highest value printed. Values higher than the
threshold will be printed as &gt;threshold.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_miss_replace">miss_replace</code></td>
<td>
<p>a character value that replaces missing values.</p>
</td></tr>
<tr><td><code id="table_pvalue_+3A_drop_leading_zero">drop_leading_zero</code></td>
<td>
<p>a logical value. If <code>TRUE</code>, the leading 0
is dropped for all p-values. So, '0.04' will become '.04'. If <code>FALSE</code>,
no leading zeroes are dropped.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector
</p>


<h3>Interpreting p-values</h3>

<p>The American Statistical Association (ASA) defines the p-value as follows:
</p>
<p>A p-value is the probability under a specified statistical model that a statistical summary of the data (e.g., the sample mean difference between two compared groups) would be equal to or more extreme than its observed value.
</p>
<p>It then provides six principles to guide p-value usage:
</p>

<ol>
<li><p> P-values can indicate how incompatible the data are with a specified statistical model.A p-value provides one approach to summarizing the incompatibility between a particular set of data and a proposed model for the data. The most common context is a model, constructed under a set of assumptions, together with a so-called &quot;null hypothesis&quot;. Often the null hypothesis postulates the absence of an effect, such as no difference between two groups, or the absence of a relationship between a factor and an outcome. The smaller the p-value, the greater the statistical incompatibility of the data with the null hypothesis, if the underlying assumptions used to calculate the p-value hold. This incompatibility can be interpreted as casting doubt on or providing evidence against the null hypothesis or the underlying assumptions.
</p>
</li>
<li><p> P-values do not measure the probability that the studied hypothesis is true, or the probability that the data were produced by random chance alone. Researchers often wish to turn a p-value into a statement about the truth of a null hypothesis, or about the probability that random chance produced the observed data. The p-value is neither. It is a statement about data in relation to a specified hypothetical explanation, and is not a statement about the explanation itself.
</p>
</li>
<li><p> Scientific conclusions and business or policy decisions should not be based only on whether a p-value passes a specific threshold. Practices that reduce data analysis or scientific inference to mechanical &quot;bright-line&quot; rules (such as &quot;p &lt; 0.05&quot;) for justifying scientific claims or conclusions can lead to erroneous beliefs and poor decision making. A conclusion does not immediately become &quot;true&quot; on one side of the divide and &quot;false&quot; on the other. Researchers should bring many contextual factors into play to derive scientific inferences, including the design of a study, the quality of the measurements, the external evidence for the phenomenon under study, and the validity of assumptions that underlie the data analysis. Pragmatic considerations often require binary, &quot;yes-no&quot; decisions, but this does not mean that p-values alone can ensure that a decision is correct or incorrect. The widespread use of &quot;statistical significance&quot; (generally interpreted as &quot;p&lt;0.05&quot;) as a license for making a claim of a scientific finding (or implied truth) leads to considerable distortion of the scientific process.
</p>
</li>
<li><p> Proper inference requires full reporting and transparency P-values and related analyses should not be reported selectively. Conducting multiple analyses of the data and reporting only those with certain p-values (typically those passing a significance threshold) renders the reported p-values essentially uninterpretable. Cherry picking promising findings, also known by such terms as data dredging, significance chasing, significance questing, selective inference, and &quot;p-hacking,&quot; leads to a spurious excess of statistically significant results in the published literature and should be vigorously avoided. One need not formally carry out multiple statistical tests for this problem to arise: Whenever a researcher chooses what to present based on statistical results, valid interpretation of those results is severely compromised if the reader is not informed of the choice and its basis. Researchers should disclose the number of hypotheses explored during the study, all data collection decisions, all statistical analyses conducted, and all p-values computed. Valid scientific conclusions based on p-values and related statistics cannot be drawn without at least knowing how many and which analyses were conducted, and how those analyses (including p-values) were selected for reporting.
</p>
</li>
<li><p> A p-value, or statistical significance, does not measure the size of an effect or the importance of a result. Statistical significance is not equivalent to scientific, human, or economic significance. Smaller p-values do not necessarily imply the presence of larger or more important effects, and larger p-values do not imply a lack of importance or even lack of effect. Any effect, no matter how tiny, can produce a small p-value if the sample size or measurement precision is high enough, and large effects may produce unimpressive p-values if the sample size is small or measurements are imprecise. Similarly, identical estimated effects will have different p-values if the precision of the estimates differs.
</p>
</li>
<li><p> By itself, a p-value does not provide a good measure of evidence regarding a model or hypothesis. Researchers should recognize that a p-value without context or other evidence provides limited information. For example, a p-value near 0.05 taken by itself offers only weak evidence against the null hypothesis. Likewise, a relatively large p-value does not imply evidence in favor of the null hypothesis; many other hypotheses may be equally or more consistent with the observed data. For these reasons, data analysis should not end with the calculation of a p-value when other approaches are appropriate and feasible.
</p>
</li></ol>



<h3>References</h3>

<p>Wasserstein, Ronald L., and Nicole A. Lazar.
&quot;The ASA statement on p-values: context, process, and purpose.&quot; (2016):
<em>The American Statistician</em>: 129-133.
DOI: https://doi.org/10.1080/00031305.2016.1154108
</p>


<h3>See Also</h3>

<p>Other table helpers: 
<code><a href="#topic+table_ester">table_ester</a>()</code>,
<code><a href="#topic+table_glue">table_glue</a>()</code>,
<code><a href="#topic+table_value">table_value</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Guideline by the American Medical Association Manual of Style:
# Round p-values to 2 or 3 digits after the decimal point depending
# on the number of zeros. For example,
## - Change .157 to .16.
## - Change .037 to .04.
## - Don't change .047 to .05, because it will no longer be significant.
## - Keep .003 as is because 2 zeros after the decimal are fine.
## - Change .0003 or .00003 or .000003 to &lt;.001
#
# In addition, the guideline states that "expressing P to more than 3
# significant digits does not add useful information." You may or may not
# agree with this guideline (I do not agree with parts of it),
# but you will (hopefully) appreciate `table_pvalue()` automating these
# recommendations if you submit papers to journals associated with
# the American Medical Association.

pvals_ama &lt;- c(0.157, 0.037, 0.047, 0.003, 0.0003, 0.00003, 0.000003)

table_pvalue(pvals_ama)
# &gt; [1] ".16"   ".04"   ".047"  ".003"  "&lt;.001" "&lt;.001" "&lt;.001"

# `table_pvalue()` will fight valiantly to keep your p-value &lt; alpha if
# it is &lt; alpha. If it's &gt;= alpha, `table_pvalue()` treats it normally.

pvals_close &lt;- c(0.04998, 0.05, 0.050002)

table_pvalue(pvals_close)
# &gt; [1] ".04998" ".05"    ".05"

</code></pre>

<hr>
<h2 id='table_value'>General rounding for tables</h2><span id='topic+table_value'></span>

<h3>Description</h3>

<p><code>table_value()</code> casts numeric vectors into character vectors.
The main purpose of <code>table_value()</code> is to round and format
numeric data for presentation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table_value(x, rspec = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table_value_+3A_x">x</code></td>
<td>
<p>a vector of numeric values.</p>
</td></tr>
<tr><td><code id="table_value_+3A_rspec">rspec</code></td>
<td>
<p>a <code>rounding_specification</code> object. If no <code>rspec</code>
is given, a default setting will round values to decimal places
based on the magnitude of the values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector of character values (rounded numbers).
</p>


<h3>See Also</h3>

<p>Other table helpers: 
<code><a href="#topic+table_ester">table_ester</a>()</code>,
<code><a href="#topic+table_glue">table_glue</a>()</code>,
<code><a href="#topic+table_pvalue">table_pvalue</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
table_value(0.123)
table_value(1.23)
table_value(12.3)

with(mtcars, table_value(disp))

</code></pre>

<hr>
<h2 id='table.glue-package'>table.glue: Make and Apply Customized Rounding Specifications for Tables</h2><span id='topic+table.glue'></span><span id='topic+table.glue-package'></span>

<h3>Description</h3>

<p>Translate double and integer valued data into character values formatted for tabulation in manuscripts or other types of academic reports.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Byron Jaeger <a href="mailto:bcjaeger@uab.edu">bcjaeger@uab.edu</a> (<a href="https://orcid.org/0000-0001-7399-2299">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/bcjaeger/table.glue">https://github.com/bcjaeger/table.glue</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bcjaeger/table.glue/issues">https://github.com/bcjaeger/table.glue/issues</a>
</p>
</li></ul>


</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
