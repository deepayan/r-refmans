<!DOCTYPE html><html lang="en"><head><title>Help for package TBFmultinomial</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {TBFmultinomial}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#TBFmultinomial-package'><p>Objective Bayesian variable selection for multinomial regression and</p>
discrete time-to-event models with competing risks</a></li>
<li><a href='#AIC_BIC_based_marginalLikelihood'><p>Marginal likelihoods based on AIC or BIC</p></a></li>
<li><a href='#all_formulas'><p>Formulas of all the candidate models</p></a></li>
<li><a href='#as.data.frame.PMP'><p>Convert a PMP object into a data frame</p></a></li>
<li><a href='#CSVS'><p>Cause-specific variable selection (CSVS)</p></a></li>
<li><a href='#model_priors'><p>Prior model probability</p></a></li>
<li><a href='#PIPs_by_landmarking'><p>Posterior inclusion probabilities (PIPs) by landmarking</p></a></li>
<li><a href='#plot_CSVS'><p>Plot a CSVS object</p></a></li>
<li><a href='#PMP'><p>Posterior model probability</p></a></li>
<li><a href='#PMP-class'><p>Class for PMP objects</p></a></li>
<li><a href='#postInclusionProb'><p>Posterior inclusion probability (PIP)</p></a></li>
<li><a href='#sample_multinomial'><p>Samples from a PMP object</p></a></li>
<li><a href='#TBF'><p>Test-based Bayes factor</p></a></li>
<li><a href='#TBF_ingredients'><p>Ingredients to calculate the TBF</p></a></li>
<li><a href='#VAP_data'><p>Data on VAP acquistion in one ICU</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>TBF Methodology Extension for Multinomial Outcomes</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Description:</td>
<td>Extends the test-based Bayes factor (TBF) methodology to multinomial regression models and discrete time-to-event models with competing risks. The TBF methodology has been well developed and implemented for the generalised linear model [Held et al. (2015) &lt;<a href="https://doi.org/10.1214%2F14-STS510">doi:10.1214/14-STS510</a>&gt;] and for the Cox model [Held et al. (2016) &lt;<a href="https://doi.org/10.1002%2Fsim.7089">doi:10.1002/sim.7089</a>&gt;].</td>
</tr>
<tr>
<td>Depends:</td>
<td>VGAM, nnet, parallel, stats, stringr, plotrix, methods</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, splines</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Rachel Heyard [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Rachel Heyard &lt;rachel.heyard@uzh.ch&gt;</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2018-10-09 09:02:31 UTC; rachel</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2018-10-12 13:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='TBFmultinomial-package'>Objective Bayesian variable selection for multinomial regression and
discrete time-to-event models with competing risks</h2><span id='topic+TBFmultinomial-package'></span><span id='topic+TBFmultinomial'></span>

<h3>Description</h3>

<p>Extension of the TBF methdology introduced by Held et al. (2015) &lt;doi:10.1214/14-STS510&gt; to discrete time-to-event models with competing risks (also applicable to the multinomial regression model)
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard <a href="mailto:rachel.heyard@uzh.ch">rachel.heyard@uzh.ch</a>
</p>

<hr>
<h2 id='AIC_BIC_based_marginalLikelihood'>Marginal likelihoods based on AIC or BIC</h2><span id='topic+AIC_BIC_based_marginalLikelihood'></span>

<h3>Description</h3>

<p>This function computes the marginal likelihoods based on the AIC or on the
BIC, that will later be used to calculate the TBF.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>AIC_BIC_based_marginalLikelihood(fullModel = NULL, candidateModels = NULL,
  data, discreteSurv = TRUE, AIC = TRUE, package = "nnet", maxit = 150,
  numberCores = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_candidatemodels">candidateModels</code></td>
<td>
<p>Instead of defining the full model we can also
specify the candidate models whose deviance statistic and d.o.f should be
computed</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_data">data</code></td>
<td>
<p>the data</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a &lsquo;simple&rsquo;
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_aic">AIC</code></td>
<td>
<p>if <code>TRUE</code>, AIC will be used, else we use BIC</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_package">package</code></td>
<td>
<p>Which package should be used to fit the models; by default
the <code>nnet</code> package is used; we could also specify to use the package
'VGAM'</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_maxit">maxit</code></td>
<td>
<p>Only needs to be specified with package <code>nnet</code>: maximal
number of iterations</p>
</td></tr>
<tr><td><code id="AIC_BIC_based_marginalLikelihood_+3A_numbercores">numberCores</code></td>
<td>
<p>How many cores should be used in parallel?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a vector with the marginal likelihoods of all candidate models
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data extraction:
data("VAP_data")

# the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here the define time as a spline with 3 knots

# now we can compute the marginal likelihoods based on the AIC f.ex:
mL_AIC &lt;-
AIC_BIC_based_marginalLikelihood(fullModel = FULL,
                                 data = VAP_data,
                                 discreteSurv = TRUE,
                                 AIC = TRUE)
</code></pre>

<hr>
<h2 id='all_formulas'>Formulas of all the candidate models</h2><span id='topic+all_formulas'></span>

<h3>Description</h3>

<p>This function retrieves the formulas of all the candidate models if the
reference model is the null / baseline model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>all_formulas(fullModel, discreteSurv = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="all_formulas_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="all_formulas_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a &lsquo;simple&rsquo;
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector with all the formulas; the first one will be the
reference model; the last element will be the full model.
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("VAP_data")
FULL &lt;- outcome ~ ns(day, df = 4) + male + type + SOFA
models &lt;- TBFmultinomial:::all_formulas(fullModel = FULL,
discreteSurv = TRUE)
# models

</code></pre>

<hr>
<h2 id='as.data.frame.PMP'>Convert a PMP object into a data frame</h2><span id='topic+as.data.frame.PMP'></span>

<h3>Description</h3>

<p>This function takes a PMP object an returns a <code>data.frame</code> summarising
the information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'PMP'
as.data.frame(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as.data.frame.PMP_+3A_x">x</code></td>
<td>
<p>valid <code><a href="#topic+PMP">PMP</a></code> object</p>
</td></tr>
<tr><td><code id="as.data.frame.PMP_+3A_...">...</code></td>
<td>
<p>arguments to be passed to <code>data.frame</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code> with the posterior and prior probabilities as
well as the definition of the models
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>

<hr>
<h2 id='CSVS'>Cause-specific variable selection (CSVS)</h2><span id='topic+CSVS'></span>

<h3>Description</h3>

<p>This function performs CSVS given a model fitted using the <code>multinom()</code>
function of the <code>nnet</code> package or the <code>vglm()</code> function of the
<code>VGAM</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>CSVS(g, model, discreteSurv = TRUE, nbIntercepts = NULL, package = "nnet")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="CSVS_+3A_g">g</code></td>
<td>
<p>the estimated g, must be fixed to one value</p>
</td></tr>
<tr><td><code id="CSVS_+3A_model">model</code></td>
<td>
<p>the model fitted using either <code>nnet</code> or <code>VGAM</code></p>
</td></tr>
<tr><td><code id="CSVS_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="CSVS_+3A_nbintercepts">nbIntercepts</code></td>
<td>
<p>how many cause-specific intercepts are there? they</p>
</td></tr>
<tr><td><code id="CSVS_+3A_package">package</code></td>
<td>
<p>Which package has been used to fit the model, <code>nnet</code>
or <code>VGAM</code>?</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># data extraction:
data("VAP_data")

# the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here the define time as a spline with 3 knots

# we first need to fit the multinomial model:
model_full &lt;- multinom(formula = FULL, data = VAP_data,
                       maxit = 150, trace = FALSE)

G &lt;- 9 # let's suppose g equals to nine

# then we proceed to CSVS
CSVS_nnet &lt;- CSVS(g = G, model = model_full,
                  discreteSurv = TRUE, package = 'nnet')
</code></pre>

<hr>
<h2 id='model_priors'>Prior model probability</h2><span id='topic+model_priors'></span>

<h3>Description</h3>

<p>This function computes the prior model probabilities of the candidate
models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_priors(fullModel, discreteSurv = TRUE, modelPrior = "flat")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_priors_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="model_priors_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean var telling us whether a 'simple' multinomial
regression is looked for or if the goal is a discrete survival-time model
for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="model_priors_+3A_modelprior">modelPrior</code></td>
<td>
<p>what prior should be used on the model space?
<code>modelPrior</code> should be included in {<code>'flat','dependent'</code>}
where <code>'flat'</code> means a uniform pior and <code>'dependent'</code> sets a
multiplicity-corrected model prior on the model space.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a numerical vector with the prior model probabilities
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here we define time as a spline with 3 knots

priors &lt;- model_priors(fullModel = FULL, discreteSurv = TRUE,
                       modelPrior = 'dependent')
</code></pre>

<hr>
<h2 id='PIPs_by_landmarking'>Posterior inclusion probabilities (PIPs) by landmarking</h2><span id='topic+PIPs_by_landmarking'></span>

<h3>Description</h3>

<p>This function gives us the PIPs for each landmark.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PIPs_by_landmarking(fullModel, data, discreteSurv = TRUE, numberCores = 1,
  package = "nnet", maxit = 150, prior = "flat", method = "LEB",
  landmarkLength = 1, lastlandmark, timeVariableName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PIPs_by_landmarking_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_data">data</code></td>
<td>
<p>the data frame with all the information</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_numbercores">numberCores</code></td>
<td>
<p>How many cores should be used in parallel?</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_package">package</code></td>
<td>
<p>Which package should be used to fit the models; by default
the <code>nnet</code> package is used; we could also specify to use the package
'VGAM'</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_maxit">maxit</code></td>
<td>
<p>Only needs to be specified with package <code>nnet</code>: maximal
number of iterations</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_prior">prior</code></td>
<td>
<p>Prior on the model space</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_method">method</code></td>
<td>
<p>Method for the g definition</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_landmarklength">landmarkLength</code></td>
<td>
<p>Length of the landmark, by default we use each day</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_lastlandmark">lastlandmark</code></td>
<td>
<p>Where will be the last landmark?</p>
</td></tr>
<tr><td><code id="PIPs_by_landmarking_+3A_timevariablename">timeVariableName</code></td>
<td>
<p>What is the name of the variable indicating time?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list with the PIPs for each landmark
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># extract the data:
data("VAP_data")

# the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here we define time as a spline with 3 knots

PIPs_landmark &lt;- PIPs_by_landmarking(fullModel = FULL, data = VAP_data,
                                     discreteSurv = TRUE, numberCores = 1,
                                     package = 'nnet', maxit = 150,
                                     prior = 'flat',  method = 'LEB',
                                     landmarkLength = 7, lastlandmark = 21,
                                     timeVariableName = 'day')
</code></pre>

<hr>
<h2 id='plot_CSVS'>Plot a CSVS object</h2><span id='topic+plot_CSVS'></span>

<h3>Description</h3>

<p>Plot a CSVS object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_CSVS(CSVSobject, namesVar = NULL, shrunken = FALSE,
  standardized = FALSE, numberIntercepts, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_CSVS_+3A_csvsobject">CSVSobject</code></td>
<td>
<p>valid <code><a href="#topic+CSVS">CSVS</a></code> object</p>
</td></tr>
<tr><td><code id="plot_CSVS_+3A_namesvar">namesVar</code></td>
<td>
<p>names of the variables</p>
</td></tr>
<tr><td><code id="plot_CSVS_+3A_shrunken">shrunken</code></td>
<td>
<p>should the coefficients be shrunken?</p>
</td></tr>
<tr><td><code id="plot_CSVS_+3A_standardized">standardized</code></td>
<td>
<p>should the coefficients be standardized?</p>
</td></tr>
<tr><td><code id="plot_CSVS_+3A_numberintercepts">numberIntercepts</code></td>
<td>
<p>how many cause-specific intercepts are in the
model for each outcome</p>
</td></tr>
<tr><td><code id="plot_CSVS_+3A_...">...</code></td>
<td>
<p>parameters for plot</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>

<hr>
<h2 id='PMP'>Posterior model probability</h2><span id='topic+PMP'></span>

<h3>Description</h3>

<p>This function computes the posterior probability of all candidate models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>PMP(fullModel = NULL, candidateModels = NULL, data = NULL,
  discreteSurv = TRUE, modelPrior = NULL, method = "LEB",
  prior = "flat", package = "nnet", maxit = 150, numberCores = 1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="PMP_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="PMP_+3A_candidatemodels">candidateModels</code></td>
<td>
<p>Instead of defining the full model we can also
specify the candidate models whose deviance statistic and d.o.f should be
computed</p>
</td></tr>
<tr><td><code id="PMP_+3A_data">data</code></td>
<td>
<p>the data frame with all the information</p>
</td></tr>
<tr><td><code id="PMP_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="PMP_+3A_modelprior">modelPrior</code></td>
<td>
<p>optionaly the model priors can be computed before if
candidateModels is different from NULL.</p>
</td></tr>
<tr><td><code id="PMP_+3A_method">method</code></td>
<td>
<p>tells us which method for the definition of g should be
used. Possibilities are: <code>LEB</code>, <code>GEB</code>, <code>g=n</code>, <code>hyperG</code>,
<code>ZS</code>, <code>ZSadapted</code> and <code>hyperGN</code></p>
</td></tr>
<tr><td><code id="PMP_+3A_prior">prior</code></td>
<td>
<p>should a dependent or a flat prior be used on the model space?
Only needed if <code>method = `GEB`</code>.</p>
</td></tr>
<tr><td><code id="PMP_+3A_package">package</code></td>
<td>
<p>Which package should be used to fit the models; by default
the <code>nnet</code> package is used; we could also specify to use the package
'VGAM'</p>
</td></tr>
<tr><td><code id="PMP_+3A_maxit">maxit</code></td>
<td>
<p>Only needs to be specified with package <code>nnet</code>: maximal
number of iterations</p>
</td></tr>
<tr><td><code id="PMP_+3A_numbercores">numberCores</code></td>
<td>
<p>How many cores should be used in parallel?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>TBF.ingredients</code>
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># extract the data:
data("VAP_data")

# the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here we define time as a spline with 3 knots

# computation of the posterior model probabilities:
test &lt;- PMP(fullModel = FULL, data = VAP_data,
            discreteSurv = TRUE, maxit = 150)
class(test)

</code></pre>

<hr>
<h2 id='PMP-class'>Class for PMP objects</h2><span id='topic+PMP-class'></span>

<h3>Description</h3>

<p>Class for PMP objects
</p>

<hr>
<h2 id='postInclusionProb'>Posterior inclusion probability (PIP)</h2><span id='topic+postInclusionProb'></span>

<h3>Description</h3>

<p>This function computes the PIPs of all potential predictors
</p>


<h3>Usage</h3>

<pre><code class='language-R'>postInclusionProb(object)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="postInclusionProb_+3A_object">object</code></td>
<td>
<p>An object of class <code>PMP</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an named vector with all PIPs
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>


<h3>Examples</h3>

<pre><code class='language-R'># extract the data:
data("VAP_data")

# the definition of the full model with three potential predictors:
FULL &lt;- outcome ~ ns(day, df = 4) + gender + type + SOFA
# here we define time as a spline with 3 knots

# computation of the posterior model probabilities:
test &lt;- PMP(fullModel = FULL, data = VAP_data,
            discreteSurv = TRUE, maxit = 150)
class(test)

#computation of the posterior inclusion probabilities:
postInclusionProb(test)

</code></pre>

<hr>
<h2 id='sample_multinomial'>Samples from a PMP object</h2><span id='topic+sample_multinomial'></span>

<h3>Description</h3>

<p>This function samples from a specific model inside a <code>PMP</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sample_multinomial(PMP_object, shrink = TRUE, data, which = "MPM",
  discreteSurv = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="sample_multinomial_+3A_pmp_object">PMP_object</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="sample_multinomial_+3A_shrink">shrink</code></td>
<td>
<p>should the coefficients be shrunken towards their prior mean?</p>
</td></tr>
<tr><td><code id="sample_multinomial_+3A_data">data</code></td>
<td>
<p>the (training) data frame with all the information</p>
</td></tr>
<tr><td><code id="sample_multinomial_+3A_which">which</code></td>
<td>
<p>which model should be sampled from? either an integer, 'MPM'
or 'MAP'</p>
</td></tr>
<tr><td><code id="sample_multinomial_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns an object with the model coefficients and supplementary
information
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>

<hr>
<h2 id='TBF'>Test-based Bayes factor</h2><span id='topic+TBF'></span>

<h3>Description</h3>

<p>This function computes the TBF as well as g
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TBF(ingredients = NULL, fullModel = NULL, method = "LEB", data = NULL,
  discreteSurv = TRUE, prior = NULL, package = "nnet", maxit = 150)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TBF_+3A_ingredients">ingredients</code></td>
<td>
<p><code>TBF_ingredients_object</code> ingredients for the TBF
(and g) calculation.</p>
</td></tr>
<tr><td><code id="TBF_+3A_fullmodel">fullModel</code></td>
<td>
<p>if <code>ingredients</code> is <code>NULL</code>, formula of the model
including all potential variables</p>
</td></tr>
<tr><td><code id="TBF_+3A_method">method</code></td>
<td>
<p>tells us which method for the definition of g should be
used. Possibilities are: <code>LEB</code>, <code>GEB</code>, <code>g=n</code>, <code>hyperG</code>,
<code>ZS</code>, <code>ZSadapted</code> and <code>hyperGN</code></p>
</td></tr>
<tr><td><code id="TBF_+3A_data">data</code></td>
<td>
<p>the data frame with all the information. Only needed if
<code>ingredients</code> is <code>NULL</code></p>
</td></tr>
<tr><td><code id="TBF_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="TBF_+3A_prior">prior</code></td>
<td>
<p>should a dependent or a flat prior be used on the model space?
Only needed if <code>method = `GEB`</code>.</p>
</td></tr>
<tr><td><code id="TBF_+3A_package">package</code></td>
<td>
<p>Which package should be used to fit the models; by default
the <code>nnet</code> package is used; we could also specify to use the package
'VGAM'</p>
</td></tr>
<tr><td><code id="TBF_+3A_maxit">maxit</code></td>
<td>
<p>Only needs to be specified with package <code>nnet</code>: maximal
number of iterations</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the TBF and the g (if it is fixed) for all the
candidate models.
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>

<hr>
<h2 id='TBF_ingredients'>Ingredients to calculate the TBF</h2><span id='topic+TBF_ingredients'></span>

<h3>Description</h3>

<p>This function calculates the ingredients needed to
compute the TBFs: like the deviances with their degrees of freedom of the
relevant candidate models.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>TBF_ingredients(fullModel = NULL, data, discreteSurv = FALSE,
  numberCores = 1, candidateModels = NULL, package = "nnet",
  maxit = 150)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="TBF_ingredients_+3A_fullmodel">fullModel</code></td>
<td>
<p>formula of the model including all potential variables</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_data">data</code></td>
<td>
<p>the data frame with all the information</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_discretesurv">discreteSurv</code></td>
<td>
<p>Boolean variable telling us whether a 'simple'
multinomial regression is looked for or if the goal is a discrete
survival-time model for multiple modes of failure is needed.</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_numbercores">numberCores</code></td>
<td>
<p>How many cores should be used in parallel?</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_candidatemodels">candidateModels</code></td>
<td>
<p>Instead of defining the full model we can also
specify the candidate models whose deviance statistic and d.o.f should be
computed</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_package">package</code></td>
<td>
<p>Which package should be used to fit the models; by default
the <code>nnet</code> package is used; we could also specify to use the package
'VGAM'</p>
</td></tr>
<tr><td><code id="TBF_ingredients_+3A_maxit">maxit</code></td>
<td>
<p>Only needs to be specified with package <code>nnet</code>: maximal
number of iterations</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an object of class <code>TBF.ingredients</code>
</p>


<h3>Author(s)</h3>

<p>Rachel Heyard
</p>

<hr>
<h2 id='VAP_data'>Data on VAP acquistion in one ICU</h2><span id='topic+VAP_data'></span>

<h3>Description</h3>

<p>It is a tiny subset of the OUTCOMEREA database whose only perhaps will be to
test an illustrate the functions of this package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(VAP_data)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1640 rows and 7 variables on 90 distinct patients:
</p>

<dl>
<dt>ID</dt><dd><p>distinct ID for each patient</p>
</dd>
<dt>day</dt><dd><p>day of ventilation, day = 1 is the first day of ventilation</p>
</dd>
<dt>type</dt><dd><p>is it a medical or a surgical patient</p>
</dd>
<dt>gender</dt><dd><p>gender of the patient, 1 = male, 0 = female</p>
</dd>
<dt>SAPSadmission</dt><dd><p>the SAPS 2 score at admission to the ICU</p>
</dd>
<dt>SOFA</dt><dd><p>the daily SOFA score</p>
</dd>
<dt>outcome</dt><dd><p>final outcome after the first observation period</p>
</dd>
</dl>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
