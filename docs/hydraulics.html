<!DOCTYPE html><html><head><title>Help for package hydraulics</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hydraulics}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#atmos_table'><p>Tabulates into a tibble some properties of the standard atmosphere: temperature,</p>
density, and pressure.</a></li>
<li><a href='#atmosprops'><p>Functions to calculate ICAO standard atmospheric properties: temperature,</p>
density, and pressure.</a></li>
<li><a href='#colebrook'><p>Calculates the Darcy-Weisbach Friction Factor f</p></a></li>
<li><a href='#darcyweisbach'><p>Solves the Darcy-Weisbach Equation for the either head loss (hf),</p>
flow rate (Q), diameter (D), or roughness height (ks).</a></li>
<li><a href='#direct_step'><p>Uses the direct step method to find the distance between two known depths</p>
in a trapezoidal channel</a></li>
<li><a href='#hardycross'><p>Applies the Hardy-Cross method to solve for pipe flows in a network.</p></a></li>
<li><a href='#manningc'><p>Solves the Manning Equation for gravity flow in a circular pipe</p></a></li>
<li><a href='#manningt'><p>Solves the Manning Equation for water flow in an open channel</p></a></li>
<li><a href='#moody'><p>Creates a Moody diagram with optional manually added points</p></a></li>
<li><a href='#operpoint'><p>Uses input pump and system curves to find the operating point</p>
for a pump and create a plot.</a></li>
<li><a href='#pumpcurve'><p>Fits a polynomial curve to three or more points from a pump characteristic</p>
curve to be used in solving for an operating point of the pump in a
piping system.</a></li>
<li><a href='#sequent_depth'><p>Solves the Momentum Equation for sequent (or conjugate) depth in a trapezoidal channel</p></a></li>
<li><a href='#spec_energy_trap'><p>Creates a specific energy diagram for a trapezoidal channel</p></a></li>
<li><a href='#systemcurve'><p>Creates a system curve for a piping system using the static head and</p>
a coefficient.</a></li>
<li><a href='#water_table'><p>Tabulates into a tibble the basic water properties: density, dynamic and kinematic</p>
viscosity, saturation vapor pressure, surface tension, and bulk modulus.</a></li>
<li><a href='#waterprops'><p>Functions to calculate water properties: density, specific weight, dynamic and</p>
kinematic viscosity, saturation vapor pressure, surface tension, and bulk modulus.</a></li>
<li><a href='#xc_circle'><p>Creates a cross-section plot for a partially filled pipe</p></a></li>
<li><a href='#xc_trap'><p>Creates a cross-section plot for an open channel</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Basic Pipe and Open Channel Hydraulics</td>
</tr>
<tr>
<td>Version:</td>
<td>0.7.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Ed Maurer [aut, cre], Irucka Embry [aut, ctb] (iemisc code)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Ed Maurer &lt;emaurer@scu.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions for basic hydraulic calculations related to 
    water flow in circular pipes both flowing full (under pressure), and 
    partially full (gravity flow), and trapezoidal open channels. For 
    pressure flow this includes friction loss calculations by solving 
    the Darcy-Weisbach equation for head loss, flow or diameter, 
    plotting a Moody diagram, matching a pump characteristic curve to a system 
    curve, and solving for flows in a pipe network using the Hardy-Cross method. 
    The Darcy-Weisbach friction factor is calculated using the Colebrook 
    (or Colebrook-White equation), the basis of the Moody diagram, the original 
    citation being Colebrook (1939) &lt;<a href="https://doi.org/10.1680%2Fijoti.1939.13150">doi:10.1680/ijoti.1939.13150</a>&gt;. For gravity 
    flow, the Manning equation is used, again solving for missing parameters. 
    The derivation of and solutions using the Darcy-Weisbach equation and the
    Manning equation are outlined in many fluid mechanics texts such as 
    Finnemore and Maurer (2024, ISBN:978-1-264-78729-6). Some gradually- and 
    rapidly-varied flow functions are included. For the Manning equation
    solutions, this package uses modifications of original code from the 'iemisc' 
    package by Irucka Embry.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/EdM44/hydraulics">https://github.com/EdM44/hydraulics</a>,
<a href="https://edm44.github.io/hydraulics/">https://edm44.github.io/hydraulics/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.6.0)</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, grid, gtools, pracma, purrr, reshape2, stats, tibble,
units</td>
</tr>
<tr>
<td>Suggests:</td>
<td>formatdown, kableExtra, knitr, rmarkdown</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr, rmarkdown</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-06 02:31:40 UTC; emaurer</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-06 13:10:08 UTC</td>
</tr>
</table>
<hr>
<h2 id='atmos_table'>Tabulates into a tibble some properties of the standard atmosphere: temperature, 
density, and pressure.</h2><span id='topic+atmos_table'></span>

<h3>Description</h3>

<p>Tabulates into a tibble some properties of the standard atmosphere: temperature, 
density, and pressure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atmos_table(units = c("SI", "Eng"), ret_units = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atmos_table_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
<tr><td><code id="atmos_table_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is TRUE]</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
atmos_table(units = 'SI')

</code></pre>

<hr>
<h2 id='atmosprops'>Functions to calculate ICAO standard atmospheric properties: temperature, 
density, and pressure.</h2><span id='topic+atmosprops'></span><span id='topic+atmtemp'></span><span id='topic+atmpres'></span><span id='topic+atmdens'></span>

<h3>Description</h3>

<p>Functions to calculate ICAO standard atmospheric properties: temperature, 
density, and pressure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>atmtemp(alt = NULL, units = NULL, ret_units = FALSE)

atmpres(alt = NULL, units = NULL, ret_units = FALSE)

atmdens(alt = NULL, units = NULL, ret_units = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="atmosprops_+3A_alt">alt</code></td>
<td>
<p>the altitude (above mean sea level). If excluded, sea level is assumed [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="atmosprops_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
<tr><td><code id="atmosprops_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the temperature of air for the standard atmosphere for the
atmtemp function [<code class="reqn">^{\circ}C</code> or <code class="reqn">^{\circ}F</code>]
</p>
<p>the absolute pressure of air for the standard atmosphere for the
atmpres function [<code class="reqn">N m^{-2}</code> or <code class="reqn">lbf ft^{-2}</code>]
</p>
<p>the density of air for the standard atmosphere for the
atmdens function [<code class="reqn">{kg}\,{m^{-3}}</code> or <code class="reqn">{slug}\,{ft^{-3}}</code>]
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Find standard atmospheric temperature at altitude 8000 m
atmtemp(alt = 8000, units = 'SI')

#Find standard atmospheric pressure assuming default altitude of zero (sea-level)
atmpres(units = 'Eng', ret_units = TRUE)

#Find standard atmospheric density at altitude 15000 ft 
atmdens(alt = 15000, units = 'Eng')

</code></pre>

<hr>
<h2 id='colebrook'>Calculates the Darcy-Weisbach Friction Factor f</h2><span id='topic+colebrook'></span><span id='topic+velocity'></span><span id='topic+reynolds_number'></span>

<h3>Description</h3>

<p>This function calculates the Darcy-Weisbach friction factor
and is only provided in this package for use with water in circular pipes
while the equation is technically valid for any liquid or channel.
As with many parts of this package, techniques and formatting
were drawn from Irucka Embry's iemisc package, which includes some
methods with similar functionality. Two utility functions are included for velocity 
and Reynolds Number.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>velocity(D = NULL, Q = NULL)

reynolds_number(V = NULL, D = NULL, nu = NULL)

colebrook(ks, V, D, nu)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="colebrook_+3A_d">D</code></td>
<td>
<p>numeric vector that contains the pipe diameter [<code class="reqn">m</code> or <code class="reqn">ft</code>]
which should be D &gt;=0.0025 m (0.0082 ft).</p>
</td></tr>
<tr><td><code id="colebrook_+3A_q">Q</code></td>
<td>
<p>(for velocity function only) numeric vector that contains the flow rate
[<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="colebrook_+3A_v">V</code></td>
<td>
<p>numeric vector that contains the average Velocity of flow in the pipe,
equal to flow divided by area, <code class="reqn">\frac{Q}{A}</code> [<code class="reqn">m\,s^{-1}</code> or <code class="reqn">ft\,s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="colebrook_+3A_nu">nu</code></td>
<td>
<p>numeric vector that contains the kinematic viscosity of water,
[<code class="reqn">m^2 s^{-1}</code> or <code class="reqn">ft^2 s^{-1}</code>]. Computed with a utility function in water_properties.R:
kvisc(T=T, units=['SI' or 'Eng'])</p>
</td></tr>
<tr><td><code id="colebrook_+3A_ks">ks</code></td>
<td>
<p>numeric vector that contains the 'equivalent sand roughness height
sand roughness height. Units should be consistent with other input [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Colebrook-White equation was developed to estimate the Darcy-Weisbach friction factor
for commercial pipes under turbulent flow conditions. It is recommended for pipe diameters greater 
than 2.5 mm (0.1 inch).  The equation is: </p>
<p style="text-align: center;"><code class="reqn">\frac{1}{\sqrt{f}} = -2\log\left(\frac{\frac{ks}{D}}{3.7} + \frac{2.51}{Re\sqrt{f}}\right)</code>
</p>

<p>where <code class="reqn">Re = \frac{VD}{nu}</code> is the unitless Reynolds Number.
</p>


<h3>Value</h3>

<p>f Returns a numeric vector containing the Darcy-Weisbach friction
factor
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>See Also</h3>

<p><code><a href="#topic+kvisc">kvisc</a></code> for kinematic viscosity, <code><a href="#topic+velocity">velocity</a></code> for
calculating <code class="reqn">V=\frac{Q}{A}</code>, <code><a href="#topic+reynolds_number">reynolds_number</a></code> for Reynolds number
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# A Type 1 problem (solve for hf): US units
D &lt;- 20/12   #diameter of 20 inches
Q &lt;- 4       #flow in ft^3/s
T &lt;- 60      #water temperature in F
ks &lt;- 0.0005 #pipe roughness in ft

f &lt;- colebrook(ks=ks,V=velocity(D,Q), D=D, nu=kvisc(T=T, units="Eng"))

</code></pre>

<hr>
<h2 id='darcyweisbach'>Solves the Darcy-Weisbach Equation for the either head loss (hf),
flow rate (Q), diameter (D), or roughness height (ks).</h2><span id='topic+darcyweisbach'></span>

<h3>Description</h3>

<p>This function solves the Darcy-Weisbach friction loss equation
for with water in circular pipes. the function solves for
either head loss (hf), flow rate (Q), diameter (D),or roughness height,
(ks) whichever is missing (not included as an argument).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>darcyweisbach(
  Q = NULL,
  D = NULL,
  hf = NULL,
  L = NULL,
  ks = NULL,
  nu = NULL,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="darcyweisbach_+3A_q">Q</code></td>
<td>
<p>numeric vector that contains the flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_d">D</code></td>
<td>
<p>numeric vector that contains the pipe diameter [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_hf">hf</code></td>
<td>
<p>numeric vector that contains the head loss through the pipe section [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_l">L</code></td>
<td>
<p>numeric vector that contains the pipe length [<code class="reqn">m</code> or <code class="reqn">ft</code>],</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_ks">ks</code></td>
<td>
<p>numeric vector that contains the equivalent sand roughness height.
Units should be consistent with other input [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_nu">nu</code></td>
<td>
<p>numeric vector that contains the kinematic viscosity of water,
[<code class="reqn">m^2 s^{-1}</code> or <code class="reqn">ft^2 s^{-1}</code>].</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package</p>
</td></tr>
<tr><td><code id="darcyweisbach_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Darcy-Weisbach equation was developed to estimate the head loss, <code class="reqn">h_f</code>, due to friction over 
a length of pipe. For circular pipes it is expressed as: 
</p>
<p style="text-align: center;"><code class="reqn">h_f = \frac{fL}{D}\frac{V^2}{2g} = \frac{8fL}{\pi^{2}gD^{5}}Q^{2}</code>
</p>

<p>where <code class="reqn">f</code> is the friction factor (calculated with the <code>colebrook</code> function and <code class="reqn">g</code>
is the gravitational acceleration (<code class="reqn">9.81\frac{m}{s^2}</code> or <code class="reqn">32.2\frac{ft}{s^2}</code>).
</p>


<h3>Value</h3>

<p>Returns a list including the missing parameter (hf, Q, D, or ks):
</p>

<ul>
<li><p> Q - flow rate.
</p>
</li>
<li><p> V - flow velocity.
</p>
</li>
<li><p> L - pipe length.
</p>
</li>
<li><p> hf - head loss due to friction
</p>
</li>
<li><p> f - Darcy-Weisbach friction factor
</p>
</li>
<li><p> ks - roughness height
</p>
</li>
<li><p> Re - Reynolds number
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+colebrook">colebrook</a></code> for friction factor calculation
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Type 2 (solving for flow rate, Q): SI Units
D &lt;- .5
L &lt;- 10
hf &lt;- 0.006*L
T &lt;- 20
ks &lt;- 0.000046
darcyweisbach(D = D, hf = hf, L = L, ks = ks, nu = kvisc(T=T, units='SI'), units = c('SI'))

#Type 3 (solving for diameter, D): Eng (US) units
Q &lt;- 37.5     #flow in ft^3/s
L &lt;- 8000     #pipe length in ft
hf &lt;- 215     #head loss due to friction, in ft
T &lt;- 68       #water temperature, F
ks &lt;- 0.0008  #pipe roughness, ft
darcyweisbach(Q = Q, hf = hf, L = L, ks = ks, nu = kvisc(T=T, units='Eng'), units = c('Eng'))

</code></pre>

<hr>
<h2 id='direct_step'>Uses the direct step method to find the distance between two known depths
in a trapezoidal channel</h2><span id='topic+direct_step'></span>

<h3>Description</h3>

<p>This function applies the direct step method for a gradually-varying water 
surface profile for flow in an open channel with a trapezoidal shape.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>direct_step(
  So = NULL,
  n = NULL,
  Q = NULL,
  y1 = NULL,
  y2 = NULL,
  b = NULL,
  m = NULL,
  nsteps = 1,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="direct_step_+3A_so">So</code></td>
<td>
<p>numeric channel bed slope [unitless]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_n">n</code></td>
<td>
<p>numeric vector that contains the Manning roughness coefficient</p>
</td></tr>
<tr><td><code id="direct_step_+3A_q">Q</code></td>
<td>
<p>numeric vector that contains the flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_y1">y1</code></td>
<td>
<p>numeric vector that contains the initial water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_y2">y2</code></td>
<td>
<p>numeric vector that contains the final water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_b">b</code></td>
<td>
<p>numeric vector that contains the channel bottom width [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_m">m</code></td>
<td>
<p>numeric vector that contains the side slope of the channel (m:1 H:V) [unitless]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_nsteps">nsteps</code></td>
<td>
<p>integer of the number of calculation steps between y1 and y2 [unitless]</p>
</td></tr>
<tr><td><code id="direct_step_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package.</p>
</td></tr>
<tr><td><code id="direct_step_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The direct step method applies the energy equation to gradually-varied 
open channel flow conditions, assuming each increment is approximately uniform.
This function works with a trapezoidal channel shape. The water depths at two 
locations are input with channel geometry and flow rate, and the distance between
the two locations, <code class="reqn">{\Delta}X</code>, is calculated: 
</p>
<p style="text-align: center;"><code class="reqn">{\Delta}X = \frac{E_1 - E_2}{S_f-S_o}</code>
</p>

<p>where <code class="reqn">E_1</code> and  <code class="reqn">E_2</code> are the specific energy values at the locations 
of <code class="reqn">y_1</code> and  <code class="reqn">y_2</code>,  <code class="reqn">S_f</code> is the slope of the energy grade line, 
and <code class="reqn">S_o</code> is the slope of the channel bed.
</p>


<h3>Value</h3>

<p>Returns a data frame (tibble) with the columns:
</p>

<ul>
<li><p> x - cumulative distance from position of y1
</p>
</li>
<li><p> z - elevation of the channel bed at location x
</p>
</li>
<li><p> y - depth of the water at location x
</p>
</li>
<li><p> A - cross-sectional area at location x
</p>
</li>
<li><p> Sf - slope of the energy grade line at location x
</p>
</li>
<li><p> E - specific energy at location x
</p>
</li>
<li><p> Fr - Froude number at location x
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Solving for profile between depths 3.1 ft and 3.4 ft in a rectangular channel
#Flow of 140 ft^3/s, bottom width = 6 ft:
direct_step(So=0.0015, n=0.013, Q=140, y1=3.1, y2=3.4, b=6, m=0, nsteps=2, units="Eng")

</code></pre>

<hr>
<h2 id='hardycross'>Applies the Hardy-Cross method to solve for pipe flows in a network.</h2><span id='topic+hardycross'></span>

<h3>Description</h3>

<p>This function uses the Hardy-Cross method to iteratively solve the
equations for conservation of mass and energy in a water pipe network.
The input consists of a data frame with the pipe characteristics and lists 
of the pipes in each loop (listed in a clockwise direction) and the initial
guesses of flows in each pipe (positive flows are in a clockwise direction).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hardycross(
  dfpipes = dfpipes,
  loops = loops,
  Qs = Qs,
  n_iter = 1,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="hardycross_+3A_dfpipes">dfpipes</code></td>
<td>
<p>data frame with the pipe data. Format is described above, but must contain a column named _ID_.</p>
</td></tr>
<tr><td><code id="hardycross_+3A_loops">loops</code></td>
<td>
<p>integer list defining pipes in each loop of the network.</p>
</td></tr>
<tr><td><code id="hardycross_+3A_qs">Qs</code></td>
<td>
<p>numeric list of initial flows for each pipe in each loop [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="hardycross_+3A_n_iter">n_iter</code></td>
<td>
<p>integer identifying the number of iterations to perform.</p>
</td></tr>
<tr><td><code id="hardycross_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
<tr><td><code id="hardycross_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned for pipe flows are of 
class <code>units</code> with units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame with the pipe data must contain a pipe ID column with 
the pipe numbers used in the loops input list. There are three options for 
input column of the pipe roughness data frame:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <strong>Column Name</strong> </td><td style="text-align: left;"> <strong>Approach for Determining K</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
  ks </td><td style="text-align: left;"> f calculated using Colebrook equation, K using Darcy-Weisbach </td>
</tr>
<tr>
 <td style="text-align: left;">
  f </td><td style="text-align: left;"> f treated as fixed, K calculated using Darcy-Weisbach </td>
</tr>
<tr>
 <td style="text-align: left;">
  K </td><td style="text-align: left;"> K treated as fixed
  </td>
</tr>

</table>

<p>In the case where absolute pipe roughness, <code class="reqn">ks</code> (in m or ft), is input, 
the input pipe data frame must also include columns for the length, <code class="reqn">L</code> and
diameter, <code class="reqn">D</code>, (both in m or ft) so <code class="reqn">K</code> can be calculated. In this case, 
a new <code class="reqn">f</code> and <code class="reqn">K</code> are calculated at each iteration, the final values of 
which are included in the output. If input <code class="reqn">K</code> or <code class="reqn">f</code> columns are provided, values 
for <code class="reqn">ks</code> are ignored. If an input <code class="reqn">K</code> column is provided, <code class="reqn">ks</code> and <code class="reqn">f</code> are 
ignored. If the Colebrook equation is used to determine <code class="reqn">f</code>, a water 
temperature of <code class="reqn">20^{o}C</code> or <code class="reqn">68^{o}F</code> is used.
</p>
<p>The number of iterations to perform may be specified with the n_iter input
value, but execution stops if the average flow adjustment becomes smaller 
than 1 percent of the average flow in all pipes.
</p>
<p>The Darcy-Weisbach equation is used to estimate the head loss in each
pipe segment, expressed in a condensed form as <code class="reqn">h_f = KQ^{2}</code>
where: </p>
<p style="text-align: center;"><code class="reqn">K = \frac{8fL}{\pi^{2}gD^{5}}</code>
</p>
  
<p>If needed, the friction factor <code class="reqn">f</code> is calculated using the Colebrook 
equation. The flow adjustment in each loop is calculated at each iteration as: 
</p>
<p style="text-align: center;"><code class="reqn">\Delta{Q_i} = -\frac{\sum_{j=1}^{p_i} K_{ij}Q_j|Q_j|}{\sum_{j=1}^{p_i} 2K_{ij}Q_j^2}</code>
</p>

<p>where <code class="reqn">i</code> is the loop number, <code class="reqn">j</code> is the pipe number, <code class="reqn">p_i</code> is the number of 
pipes in loop <code class="reqn">i</code> and <code class="reqn">\Delta{Q_i}</code> is the flow adjustment to be applied 
to each pipe in loop <code class="reqn">i</code> for the next iteration.
</p>


<h3>Value</h3>

<p>Returns a list of two data frames:
</p>

<ul>
<li><p> dfloops - the final flow magnitude and direction (clockwise positive) for each loop and pipe
</p>
</li>
<li><p> dfpipes - the input pipe data frame, with additional columns including final Q
</p>
</li></ul>



<h3>See Also</h3>

<p><code><a href="#topic+colebrook">colebrook</a></code>, <code><a href="#topic+darcyweisbach">darcyweisbach</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#              A----------B --&gt; 0.5m^3/s
#              |\   (4)   |
#              | \        |
#              |  \       |
#              |   \(2)   |
#              |    \     |(5)
#              |(1)  \    |
#              |      \   |
#              |       \  |
#              |        \ |
#              |   (3)   \|
# 0.5m^3/s --&gt; C----------D

#Input pipe characteristics data frame. With K given other columns not needed
dfpipes &lt;- data.frame(
ID = c(1,2,3,4,5),                     #pipe ID
K = c(200,2500,500,800,300)            #resistance used in hf=KQ^2
)
loops &lt;- list(c(1,2,3),c(2,4,5))
Qs &lt;- list(c(0.3,0.1,-0.2),c(-0.1,0.2,-0.3))
hardycross(dfpipes = dfpipes, loops = loops, Qs = Qs, n_iter = 1, units = "SI")

</code></pre>

<hr>
<h2 id='manningc'>Solves the Manning Equation for gravity flow in a circular pipe</h2><span id='topic+manningc'></span>

<h3>Description</h3>

<p>This function solves the Manning equation for water flow in a circular pipe 
at less than full. Uniform flow conditions are assumed, so that the pipe slope 
is equal to the slope of the water surface and the energy grade line. This is a 
modification of the code prepared by Irucka Embry in his iemisc package.
The iemisc::manningcirc function was adapted here for more limited cases
commonly used in classroom exercises, additional checks were included to ensure
the pipe is flowing less than full, and a cross-section figure is also
available. The iemisc::manningcirc and iemisc::manningcircy functions were
combined into a single function. Manning n supplied is assumed to be that for
full pipe flow; an optional argument may be supplied to account for n varying 
with depth.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manningc(
  Q = NULL,
  n = NULL,
  Sf = NULL,
  y = NULL,
  d = NULL,
  y_d = NULL,
  n_var = FALSE,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manningc_+3A_q">Q</code></td>
<td>
<p>numeric vector that contains the flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="manningc_+3A_n">n</code></td>
<td>
<p>numeric vector that contains the Manning roughness coefficient (for full flow or fixed).</p>
</td></tr>
<tr><td><code id="manningc_+3A_sf">Sf</code></td>
<td>
<p>numeric vector that contains the slope of the pipe [unitless]</p>
</td></tr>
<tr><td><code id="manningc_+3A_y">y</code></td>
<td>
<p>numeric vector that contains the water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="manningc_+3A_d">d</code></td>
<td>
<p>numeric vector that contains the pipe diameter [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="manningc_+3A_y_d">y_d</code></td>
<td>
<p>numeric vector that contains the ratio of depth to diameter [unitless]</p>
</td></tr>
<tr><td><code id="manningc_+3A_n_var">n_var</code></td>
<td>
<p>If set to TRUE the value of n for full flow is adjusted with depth. [Default is FALSE]</p>
</td></tr>
<tr><td><code id="manningc_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package]</p>
</td></tr>
<tr><td><code id="manningc_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The possible applications of this function for solving the Manning equation
for circular pipes are:
</p>

<table>
<tr>
 <td style="text-align: left;">
  <strong>Given</strong> </td><td style="text-align: left;"> <strong>Solve for</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
  y_d, Q, Sf, n </td><td style="text-align: left;"> d </td>
</tr>
<tr>
 <td style="text-align: left;">
  d, Sf, Q, n </td><td style="text-align: left;"> y </td>
</tr>
<tr>
 <td style="text-align: left;">
  y, d, Q, n </td><td style="text-align: left;"> Sf </td>
</tr>
<tr>
 <td style="text-align: left;">
  y, d, Sf, n </td><td style="text-align: left;"> Q </td>
</tr>
<tr>
 <td style="text-align: left;">
  d, Q, Sf, y </td><td style="text-align: left;"> n
</td>
</tr>

</table>

<p>The Manning equation (also known as the Strickler equation) describes flow conditions in
an open channel under uniform flow conditions. It is often expressed as: 
</p>
<p style="text-align: center;"><code class="reqn">Q = A\frac{C}{n}{R}^{\frac{2}{3}}{S_f}^{\frac{1}{2}}</code>
</p>

<p>where <code class="reqn">C</code> is 1.0 for SI units and 1.49 for Eng (U.S. Customary) units. Critical depth is 
defined by the relation (at critical conditions):
</p>
<p style="text-align: center;"><code class="reqn">\frac{Q^{2}B}{g\,A^{3}}=1</code>
</p>

<p>where <code class="reqn">B</code> is the top width of the water surface. Since B equals zero for a full pipe, critical 
depth is set to the pipe diameter <code class="reqn">d</code> if the flow <code class="reqn">Q</code> exceeds a value that would produce a 
critical flow at <code class="reqn">\frac{y}{d}=0.99</code>.
</p>


<h3>Value</h3>

<p>Returns a list including the missing parameter:
</p>

<ul>
<li><p> Q - flow rate
</p>
</li>
<li><p> V - flow velocity
</p>
</li>
<li><p> A - cross-sectional area of flow
</p>
</li>
<li><p> P - wetted perimeter
</p>
</li>
<li><p> R - hydraulic radius (A/P)
</p>
</li>
<li><p> y - flow depth
</p>
</li>
<li><p> d - pipe diameter
</p>
</li>
<li><p> Sf - slope
</p>
</li>
<li><p> n - Manning's roughness (for full flow, or as adjusted if n_var is TRUE)
</p>
</li>
<li><p> yc - critical depth
</p>
</li>
<li><p> Fr - Froude number
</p>
</li>
<li><p> Re - Reynolds number
</p>
</li>
<li><p> Qf - Full pipe flow rate
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer, Irucka Embry
</p>


<h3>See Also</h3>

<p><code><a href="#topic+xc_circle">xc_circle</a></code> for a cross-section diagram of the circular channel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Solving for flow rate, Q: SI Units
manningc(d = 0.6, n = 0.013, Sf = 1./400., y = 0.24, units = "SI")
#returns 0.1 m3/s

#Solving for Sf, if d=600 mm and pipe is to flow half full
manningc(d = 0.6, Q = 0.17, n = 0.013, y = 0.3, units = "SI")
#returns required slope of 0.003

#Solving for diameter, d when given y_d): Eng (US) units
manningc(Q = 83.5, n = 0.015, Sf = 0.0002, y_d = 0.9, units = "Eng")
#returns 7.0 ft required diameter

#Solving for depth, y when given Q: SI units
manningc(Q=0.01, n=0.013, Sf=0.001, d = 0.2, units="SI")
#returns depth  y = 0.158 m, critical depth, yc = 0.085 m

#Solving for depth, y when given Q: SI units, and n variable with depth
manningc(Q=0.01, n=0.013, Sf=0.001, d = 0.2, n_var = TRUE, units="SI")
#returns depth  y = 0.174 m, critical depth, yc = 0.085 m

</code></pre>

<hr>
<h2 id='manningt'>Solves the Manning Equation for water flow in an open channel</h2><span id='topic+manningt'></span>

<h3>Description</h3>

<p>This function solves the Manning equation for water flow in an open 
channel with a trapezoidal shape.  Uniform flow conditions are assumed, 
so that the channel slope is equal to the slope of the water surface 
and the energy grade line. This is a modification of the code prepared 
by Irucka Embry in his iemisc package. Specifically the
iemisc::manningtrap, iemisc::manningrect, and iemisc::manningtri were combined
and adapted here for cases commonly used in classroom exercises. Some
auxiliary variables in the iemisc code are not included here (shear stress, and
specific energy), as these can be calculated separately. A cross-section figure is also
available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>manningt(
  Q = NULL,
  n = NULL,
  m = NULL,
  Sf = NULL,
  y = NULL,
  b = NULL,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="manningt_+3A_q">Q</code></td>
<td>
<p>numeric vector that contains the flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="manningt_+3A_n">n</code></td>
<td>
<p>numeric vector that contains the Manning roughness coefficient</p>
</td></tr>
<tr><td><code id="manningt_+3A_m">m</code></td>
<td>
<p>numeric vector that contains the side slope of the channel (m:1 H:V) [unitless]</p>
</td></tr>
<tr><td><code id="manningt_+3A_sf">Sf</code></td>
<td>
<p>numeric vector that contains the slope of the channel [unitless]</p>
</td></tr>
<tr><td><code id="manningt_+3A_y">y</code></td>
<td>
<p>numeric vector that contains the water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="manningt_+3A_b">b</code></td>
<td>
<p>numeric vector that contains the channel bottom width [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="manningt_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package.</p>
</td></tr>
<tr><td><code id="manningt_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Manning equation characterizes open channel flow conditions under uniform flow conditions: 
</p>
<p style="text-align: center;"><code class="reqn">Q = A\frac{C}{n}{R}^{\frac{2}{3}}{S_f}^{\frac{1}{2}}</code>
</p>

<p>where <code class="reqn">C</code> is 1.0 for SI units and 1.49 for Eng (U.S. Customary) units. Using the geometric relationships 
for hydraulic radius and cross-sectional area of a trapezoid, it takes the form:
</p>
<p style="text-align: center;"><code class="reqn">Q=\frac{C}{n}{\frac{\left(by+my^2\right)^{\frac{5}{3}}}{\left(b+2y\sqrt{1+m^2}\right)^\frac{2}{3}}}{S_f}^{\frac{1}{2}}</code>
</p>

<p>Critical depth is defined by the relation (at critical conditions):
</p>
<p style="text-align: center;"><code class="reqn">\frac{Q^{2}B}{g\,A^{3}}=1</code>
</p>

<p>where <code class="reqn">B</code> is the top width of the water surface. For a given Q, m, n, and Sf, the most
hydraulically efficient channel is found by maximizing R, which can be done by setting 
in the Manning equation <code class="reqn">\frac{\partial R}{\partial y}=0</code>. This produces:
</p>
<p style="text-align: center;"><code class="reqn">y_{opt} = 2^{\frac{1}{4}}\left(\frac{Qn}{C\left(2\sqrt{1+m^2}-m\right)S_f^{\frac{1}{2}}}\right)^{\frac{3}{8}}</code>
</p>

<p style="text-align: center;"><code class="reqn">b_{opt} = 2y_{opt}\left(\sqrt{1+m^2}-m\right)</code>
</p>



<h3>Value</h3>

<p>Returns a list including the missing parameter:
</p>

<ul>
<li><p> Q - flow rate
</p>
</li>
<li><p> V - flow velocity
</p>
</li>
<li><p> A - cross-sectional area of flow
</p>
</li>
<li><p> P - wetted perimeter
</p>
</li>
<li><p> R - hydraulic radius
</p>
</li>
<li><p> y - flow depth (normal depth)
</p>
</li>
<li><p> b - channel bottom width
</p>
</li>
<li><p> m - channel side slope
</p>
</li>
<li><p> Sf - slope
</p>
</li>
<li><p> B - top width of water surface
</p>
</li>
<li><p> n - Manning's roughness
</p>
</li>
<li><p> yc - critical depth
</p>
</li>
<li><p> Fr - Froude number
</p>
</li>
<li><p> Re - Reynolds number
</p>
</li>
<li><p> bopt - optimal bottom width (returned if solving for b)
</p>
</li>
<li><p> yopt - optimal water depth (returned if solving for y)
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer, Irucka Embry
</p>


<h3>See Also</h3>

<p><code><a href="#topic+spec_energy_trap">spec_energy_trap</a></code> for specific energy diagram and <code><a href="#topic+xc_trap">xc_trap</a></code> 
for a cross-section diagram of the trapezoidal channel
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Solving for flow rate, Q, trapezoidal channel: SI Units
manningt(n = 0.013, m = 2, Sf = 0.0005, y = 1.83, b = 3, units = "SI")
#returns Q=22.2 m3/s

#Solving for roughness, n, rectangular channel: Eng units
manningt(Q = 14.56, m = 0, Sf = 0.0004, y = 2.0, b = 4, units = "Eng")
#returns Manning n of 0.016

#Solving for depth, y, triangular channel: SI units
manningt(Q = 1.0, n = 0.011, m = 1, Sf = 0.0065, b = 0, units = "SI")
#returns 0.6 m normal flow depth

</code></pre>

<hr>
<h2 id='moody'>Creates a Moody diagram with optional manually added points</h2><span id='topic+moody'></span>

<h3>Description</h3>

<p>This function plots a standard Moody diagram, and allows additional
points to be added by including arguments Re and f.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>moody(Re = NULL, f = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="moody_+3A_re">Re</code></td>
<td>
<p>(optional) numeric vector that contains the Reynolds numbers of points to be
manually added</p>
</td></tr>
<tr><td><code id="moody_+3A_f">f</code></td>
<td>
<p>(optional) numeric vector (same length as Re) that contains the Darcy-Weisbach
friction factors corresponding to the points to be manually added</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a Moody diagram, with the optional added (Re, f) points
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Draw canonical Moody diagram
moody()

# Draw Moody diagram plotting two additional points
Re = c(10000, 100000)
f = c(0.04, 0.03)
moody( Re = Re, f = f )


</code></pre>

<hr>
<h2 id='operpoint'>Uses input pump and system curves to find the operating point
for a pump and create a plot.</h2><span id='topic+operpoint'></span>

<h3>Description</h3>

<p>Uses input pump and system curves to find the operating point
for a pump and create a plot.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>operpoint(pcurve = NULL, scurve = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="operpoint_+3A_pcurve">pcurve</code></td>
<td>
<p>A pumpcurve object</p>
</td></tr>
<tr><td><code id="operpoint_+3A_scurve">scurve</code></td>
<td>
<p>A systemcurve object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list including:
</p>

<ul>
<li><p> Qop - flow at the operating point [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]
</p>
</li>
<li><p> hop - head at the operating point [<code class="reqn">m</code> or <code class="reqn">ft</code>]
</p>
</li>
<li><p> p - a plot object of the curves
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>See Also</h3>

<p><code><a href="#topic+pumpcurve">pumpcurve</a></code> and <code><a href="#topic+systemcurve">systemcurve</a></code> for input object preparation
</p>

<hr>
<h2 id='pumpcurve'>Fits a polynomial curve to three or more points from a pump characteristic
curve to be used in solving for an operating point of the pump in a 
piping system.</h2><span id='topic+pumpcurve'></span>

<h3>Description</h3>

<p>Fits a polynomial curve to three or more points from a pump characteristic
curve. This allows solving for an operating point of the pump in a 
piping system. A portion of this is based on
https://github.com/PhDMeiwp/basicTrendline/blob/master/R/trendline.R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pumpcurve(Q = NULL, h = NULL, eq = "poly1", units = c("SI", "Eng"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pumpcurve_+3A_q">Q</code></td>
<td>
<p>Numeric vector of flow rates for selected points on the pump curve [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="pumpcurve_+3A_h">h</code></td>
<td>
<p>Numeric vector of heads for selected points on the pump curve [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="pumpcurve_+3A_eq">eq</code></td>
<td>
<p>Character vector identifying the for of equation to fit (see details)</p>
</td></tr>
<tr><td><code id="pumpcurve_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The form of the equation fit to the input points may be one of the 
following, as determined by the <code>eq</code> input parameter.
</p>

<table>
<tr>
 <td style="text-align: left;">
  <strong>eq</strong> </td><td style="text-align: left;"> <strong>equation form</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
  poly1 </td><td style="text-align: left;"> <code class="reqn">h = a + {b}{Q} + {c}{Q}^2</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  poly2 </td><td style="text-align: left;"> <code class="reqn">h = a + {c}{Q}^2</code> </td>
</tr>
<tr>
 <td style="text-align: left;">
  poly3 </td><td style="text-align: left;"> <code class="reqn">h = h_{shutoff} + {c}{Q}^2</code>
  </td>
</tr>

</table>

<p>where <code class="reqn">h_{shutoff}</code> is the head on the pump curve associated with 
<code class="reqn">Q=0</code>. The shutoff head at <code class="reqn">Q=0</code> should be included in the input
vectors if the <code>poly3</code> equation form is to be used.
</p>


<h3>Value</h3>

<p>Returns an object of class <code>pumpcurve</code> consisting of a list including:
</p>

<ul>
<li><p> curve - a function defining the curve that is fit to the data
</p>
</li>
<li><p> eqn - a character vector of the equation for the curve
</p>
</li>
<li><p> r2 - the coefficient of determination for the curve fit, <code class="reqn">R^2</code>
</p>
</li>
<li><p> p - a plot object of the fit curve
</p>
</li>
<li><p> units - the units system passed to the function
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Input in Eng units - use \code{units} package for easy unit conversion
qgpm &lt;- units::set_units(c(0, 5000, 7850), gallons/minute)
qcfs &lt;- units::set_units(qgpm, ft^3/s)
hft &lt;- c(81, 60, 20) #units are already in ft so setting units is optional
pumpcurve(Q = qcfs, h = hft, eq = "poly2", units = "Eng")

</code></pre>

<hr>
<h2 id='sequent_depth'>Solves the Momentum Equation for sequent (or conjugate) depth in a trapezoidal channel</h2><span id='topic+sequent_depth'></span>

<h3>Description</h3>

<p>This function solves the Momentum equation for water flow in an open 
channel with a trapezoidal shape and determines the sequent (conjugate) depth.
This is the flow depth either upstream or downstream of a hydraulic jump, 
whichever is not provided as input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sequent_depth(
  Q = NULL,
  b = NULL,
  y = NULL,
  m = NULL,
  units = c("SI", "Eng"),
  ret_units = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="sequent_depth_+3A_q">Q</code></td>
<td>
<p>numeric vector that contains the flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="sequent_depth_+3A_b">b</code></td>
<td>
<p>numeric vector that contains the channel bottom width [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="sequent_depth_+3A_y">y</code></td>
<td>
<p>numeric vector that contains the water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="sequent_depth_+3A_m">m</code></td>
<td>
<p>numeric vector that contains the side slope of the channel (m:1 H:V) [unitless]</p>
</td></tr>
<tr><td><code id="sequent_depth_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package.</p>
</td></tr>
<tr><td><code id="sequent_depth_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The Momentum equation for open channel flow conditions in a trapezoidal channel: 
</p>
<p style="text-align: center;"><code class="reqn">M = \frac{by^2}{2}+\frac{my^3}{3}+\frac{Q^2}{gy\left(b+my\right)}</code>
</p>

<p>where <code class="reqn">C</code> is 1.0 for SI units and 1.49 for Eng (U.S. Customary) units. 
The momentum function is assumed to be the same on both sides of a hydraulic
jump, allowing the determination of the sequent depth.
</p>


<h3>Value</h3>

<p>Returns a list including:
</p>

<ul>
<li><p> y - input depth
</p>
</li>
<li><p> y_seq - sequent depth
</p>
</li>
<li><p> yc - critical depth
</p>
</li>
<li><p> Fr - Froude number for input depth
</p>
</li>
<li><p> Fr_seq - Froude number for sequent depth
</p>
</li>
<li><p> E - specific energy for input depth
</p>
</li>
<li><p> E_seq - specific energy for sequent depth
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Solving for sequent depth: SI Units
#Flow of 0.2 m^3/s, bottom width = 0.5 m, Depth = 0.1 m, side slope = 1:1
sequent_depth(Q=0.2,b=0.5,y=0.1,m=1,units = "SI", ret_units = TRUE)

</code></pre>

<hr>
<h2 id='spec_energy_trap'>Creates a specific energy diagram for a trapezoidal channel</h2><span id='topic+spec_energy_trap'></span>

<h3>Description</h3>

<p>This function plots a specific energy diagram of a trapezoidal
(including rectangular and triangular) channel, with annotation of
critical depth and minimum specific energy.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>spec_energy_trap(
  Q = NULL,
  b = NULL,
  m = NULL,
  y = NULL,
  scale = 3,
  units = c("SI", "Eng")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="spec_energy_trap_+3A_q">Q</code></td>
<td>
<p>flow rate [<code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code>]</p>
</td></tr>
<tr><td><code id="spec_energy_trap_+3A_b">b</code></td>
<td>
<p>bottom width [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="spec_energy_trap_+3A_m">m</code></td>
<td>
<p>side slope (H:1) [unitless]</p>
</td></tr>
<tr><td><code id="spec_energy_trap_+3A_y">y</code></td>
<td>
<p>depth(s) of flow (a numeric vector of length &lt;= 2) [<code class="reqn">m</code> or <code class="reqn">ft</code>] (optional)</p>
</td></tr>
<tr><td><code id="spec_energy_trap_+3A_scale">scale</code></td>
<td>
<p>multiplier (of yc) for axis scales (default is 3)</p>
</td></tr>
<tr><td><code id="spec_energy_trap_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Specific Energy, E, is the energy, expressed as a head (i.e., the mechanical energy 
per unit weight of the water, with units of length) relative to the channel bottom.
It is calculated as: 
</p>
<p style="text-align: center;"><code class="reqn">E = y+\alpha\frac{Q^{2}}{2g\,A^{2}} = y+\alpha\frac{V^{2}}{2g}</code>
</p>

<p>where <code class="reqn">y</code> is flow depth, <code class="reqn">A</code> is the cross-sectional flow area, <code class="reqn">{V}=\frac{Q}{A}</code>, and 
and <code class="reqn">\alpha</code> is a kinetic energy correction factor to account for non-uniform velocities across 
the cross-section;  <code class="reqn">\alpha=1.0</code> in this function (as is commonly assumed).
</p>


<h3>Value</h3>

<p>a specific energy diagram
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Draw a specific energy diagram for a cross-section with flow 1, width 2, side slope 3:1 (H:V)
spec_energy_trap(Q = 1.0, b = 2.0, m = 3.0, scale = 4, units = "SI")

# Draw the same specific energy diagram adding lines for depths, y = 0.5 and 0.8 m
spec_energy_trap(Q = 1.0, b = 2.0, m = 3.0, scale = 4, y = c(0.5, 0.8), units = "SI")

</code></pre>

<hr>
<h2 id='systemcurve'>Creates a system curve for a piping system using the static head and 
a coefficient.</h2><span id='topic+systemcurve'></span>

<h3>Description</h3>

<p>Creates a system curve for a piping system using the static head and 
a coefficient.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>systemcurve(hs = NULL, K = NULL, units = c("SI", "Eng"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="systemcurve_+3A_hs">hs</code></td>
<td>
<p>Numeric value of the static head [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="systemcurve_+3A_k">K</code></td>
<td>
<p>Numeric value of the coefficient in the equation <code class="reqn">h = hs + {K}{Q}^2</code>
where Q has units of <code class="reqn">m^3 s^{-1}</code> or <code class="reqn">ft^3 s^{-1}</code></p>
</td></tr>
<tr><td><code id="systemcurve_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns an object of class <code>systemcurve</code> consisting of a list including:
</p>

<ul>
<li><p> curve - a function defining the system curve
</p>
</li>
<li><p> eqn - a character vector of the equation for the curve
</p>
</li>
<li><p> units - the units system passed to the function
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Input in Eng units. Coefficient can be calculated manually or using 
#other package functions for friction loss in a pipe system using \eqn{Q=1}
ans &lt;- darcyweisbach(Q = 1,D = 20/12, L = 3884, ks = 0.0005, nu = 1.23e-5, units = "Eng")
systemcurve(hs = 30, K = ans$hf, units = "Eng")

</code></pre>

<hr>
<h2 id='water_table'>Tabulates into a tibble the basic water properties: density, dynamic and kinematic 
viscosity, saturation vapor pressure, surface tension, and bulk modulus.</h2><span id='topic+water_table'></span>

<h3>Description</h3>

<p>Tabulates into a tibble the basic water properties: density, dynamic and kinematic 
viscosity, saturation vapor pressure, surface tension, and bulk modulus.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>water_table(units = c("SI", "Eng"), ret_units = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="water_table_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package</p>
</td></tr>
<tr><td><code id="water_table_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is TRUE]</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
water_table(units = 'SI')

</code></pre>

<hr>
<h2 id='waterprops'>Functions to calculate water properties: density, specific weight, dynamic and 
kinematic viscosity, saturation vapor pressure, surface tension, and bulk modulus.</h2><span id='topic+waterprops'></span><span id='topic+dvisc'></span><span id='topic+dens'></span><span id='topic+specwt'></span><span id='topic+kvisc'></span><span id='topic+svp'></span><span id='topic+surf_tension'></span><span id='topic+Ev'></span>

<h3>Description</h3>

<p>This function calculates water properties that are used in other functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dvisc(T = NULL, units = NULL, ret_units = FALSE)

dens(T = NULL, units = NULL, ret_units = FALSE)

specwt(T = NULL, units = NULL, ret_units = FALSE)

kvisc(T = NULL, units = NULL, ret_units = FALSE)

svp(T = NULL, units = NULL, ret_units = FALSE)

surf_tension(T = NULL, units = NULL, ret_units = FALSE)

Ev(T = NULL, units = NULL, ret_units = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waterprops_+3A_t">T</code></td>
<td>
<p>the water temperature [<code class="reqn">^{\circ}C</code> or <code class="reqn">^{\circ}F</code>]</p>
</td></tr>
<tr><td><code id="waterprops_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units. This is used for compatibility with iemisc package</p>
</td></tr>
<tr><td><code id="waterprops_+3A_ret_units">ret_units</code></td>
<td>
<p>If set to TRUE the value(s) returned are of class <code>units</code> with
units attached to the value. [Default is FALSE]</p>
</td></tr>
</table>


<h3>Value</h3>

<p>rho, the density of water for the
dens function [<code class="reqn">{kg}\,{m^{-3}}</code> or <code class="reqn">{slug}\,{ft^{-3}}</code>]
</p>
<p>spwt, the specific weight of water for the
specwt function [<code class="reqn">{N}\,{m^{-3}}</code> or <code class="reqn">{lbf}\,{ft^{-3}}</code>]
</p>
<p>mu, the dynamic viscosity of water for the
dvisc function [<code class="reqn">{N}\,{s}\,{m^{-2}}</code> or <code class="reqn">{lbf}\,{s}\,{ft^{-2}}</code>]
</p>
<p>nu, the kinematic viscosity of water for the
kvisc function [<code class="reqn">m^2 s^{-1}</code> or <code class="reqn">ft^2 s^{-1}</code>].
</p>
<p>svp, the saturation vapor pressure of water for the
svp function [<code class="reqn">N m^{-2}</code> or <code class="reqn">lbf ft^{-2}</code>].
</p>
<p>surf_tension, the surface tension of water for the
surf_tension function [<code class="reqn">N m^{-1}</code> or <code class="reqn">lbf ft^{-1}</code>].
</p>
<p>Ev, the bulk modulus of elasticity of water for the
Ev function [<code class="reqn">N m^{-2}</code> or <code class="reqn">lbf ft^{-2}</code>].
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#Find kinematic viscocity for water temperature of 55 F
nu = kvisc(T = 55, units = 'Eng')

#Find kinematic viscocity assuming default water temperature of 68 F
nu = kvisc(units = 'Eng')

#Find water density for water temperature of 25 C
rho = dens(T = 25, units = 'SI')

#Find saturation vapor pressure for water temperature of 10 C
vps = svp(T = 10, units = 'SI')

#Find surface tension for water temperature of 10 C
s_tens = surf_tension(T = 10, units = 'SI')

</code></pre>

<hr>
<h2 id='xc_circle'>Creates a cross-section plot for a partially filled pipe</h2><span id='topic+xc_circle'></span>

<h3>Description</h3>

<p>This function plots a cross-section of a circular pipe, shaded as filled
to the level indicated by the depth and diameter values passed to it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xc_circle(y = NULL, d = NULL, units = c("SI", "Eng"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xc_circle_+3A_y">y</code></td>
<td>
<p>water depth [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="xc_circle_+3A_d">d</code></td>
<td>
<p>pipe diameter [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="xc_circle_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cross-section diagram
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Draw a cross-section with diameter 1.0 and depth 0.7
xc_circle(y = 0.7, d = 1.0, units = "SI")

</code></pre>

<hr>
<h2 id='xc_trap'>Creates a cross-section plot for an open channel</h2><span id='topic+xc_trap'></span>

<h3>Description</h3>

<p>This function plots a cross-section of a  (trapezoid, rectangle, triangle), 
shaded as filled to the level indicated by the values passed to it.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>xc_trap(y = NULL, b = NULL, m = NULL, units = c("SI", "Eng"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="xc_trap_+3A_y">y</code></td>
<td>
<p>water depth  [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="xc_trap_+3A_b">b</code></td>
<td>
<p>bottom width  [<code class="reqn">m</code> or <code class="reqn">ft</code>]</p>
</td></tr>
<tr><td><code id="xc_trap_+3A_m">m</code></td>
<td>
<p>side slope (H:1)</p>
</td></tr>
<tr><td><code id="xc_trap_+3A_units">units</code></td>
<td>
<p>character vector that contains the system of units [options are
<code>SI</code> for International System of Units and <code>Eng</code> for English (US customary)
units.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a cross-section diagram
</p>


<h3>Author(s)</h3>

<p>Ed Maurer
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Draw a cross-section with depth 1, width 2, side slope 3:1 (H:V)
xc_trap(y = 1.0, b = 2.0, m = 3.0, units = "SI")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
