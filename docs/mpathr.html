<!DOCTYPE html><html lang="en-US"><head><title>Help for package mpathr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mpathr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#mpathr-package'><p>mpathr: Easily Handling Data from the ‘m-Path’ Platform</p></a></li>
<li><a href='#.mpath_locale'><p>Locale to be used for m-Path data</p></a></li>
<li><a href='#example_data'><p>Example m-path data</p></a></li>
<li><a href='#is_opened_in_excel'><p>Check if an m-Path CSV file was opened in Excel</p></a></li>
<li><a href='#mpath_example'><p>Get path to m-Path example data</p></a></li>
<li><a href='#plot_response_rate'><p>Plots response rate per day (and per participant)</p></a></li>
<li><a href='#read_meta_data'><p>Read m-Path meta data</p></a></li>
<li><a href='#read_mpath'><p>Read m-Path data</p></a></li>
<li><a href='#response_rate'><p>Calculate response rate</p></a></li>
<li><a href='#timestamps_to_datetime'><p>Convert m-Path timestamps to a date time format</p></a></li>
<li><a href='#write_mpath'><p>Write m-Path data to a CSV file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Easily Handling Data from the ‘m-Path’ Platform</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides tools for importing and cleaning Experience Sampling
    Method (ESM) data collected via the 'm-Path' platform. The goal is
    to provide with a few utility functions to be able to read and perform
    some common operations in ESM data collected through the 'm-Path'
    platform (<a href="https://m-path.io/landing/">https://m-path.io/landing/</a>). Functions include raw data
    handling, format standardization, and basic data checks, as well as to
    calculate the response rate in data from ESM studies.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://m-path.io">https://m-path.io</a>, <a href="https://github.com/m-path-io/mpathr">https://github.com/m-path-io/mpathr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/m-path-io/mpathr/issues">https://github.com/m-path-io/mpathr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, dplyr, ggplot2, jsonlite, lifecycle, lubridate, readr,
rlang, tidyr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-22 12:01:44 UTC; u0134047</td>
</tr>
<tr>
<td>Author:</td>
<td>Merijn Mestdagh <a href="https://orcid.org/0000-0001-5077-861X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Lara Navarrete [aut],
  Koen Niemeijer <a href="https://orcid.org/0000-0002-0816-534X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  m-Path Software [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Merijn Mestdagh &lt;merijn.mestdagh@m-path.io&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-22 13:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='mpathr-package'>mpathr: Easily Handling Data from the ‘m-Path’ Platform</h2><span id='topic+mpathr'></span><span id='topic+mpathr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides tools for importing and cleaning Experience Sampling Method (ESM) data collected via the 'm-Path' platform. The goal is to provide with a few utility functions to be able to read and perform some common operations in ESM data collected through the 'm-Path' platform (<a href="https://m-path.io/landing/">https://m-path.io/landing/</a>). Functions include raw data handling, format standardization, and basic data checks, as well as to calculate the response rate in data from ESM studies.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Merijn Mestdagh <a href="mailto:merijn.mestdagh@m-path.io">merijn.mestdagh@m-path.io</a> (<a href="https://orcid.org/0000-0001-5077-861X">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Lara Navarrete <a href="mailto:larann901@gmail.com">larann901@gmail.com</a>
</p>
</li>
<li><p> Koen Niemeijer <a href="mailto:koen.niemeijer@kuleuven.be">koen.niemeijer@kuleuven.be</a> (<a href="https://orcid.org/0000-0002-0816-534X">ORCID</a>)
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> m-Path Software [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://m-path.io">https://m-path.io</a>
</p>
</li>
<li> <p><a href="https://github.com/m-path-io/mpathr">https://github.com/m-path-io/mpathr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/m-path-io/mpathr/issues">https://github.com/m-path-io/mpathr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='.mpath_locale'>Locale to be used for m-Path data</h2><span id='topic+.mpath_locale'></span>

<h3>Description</h3>

<p>Hard coded locale to be used for 'm-Path' data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.mpath_locale
</code></pre>


<h3>Format</h3>

<p>An object of class <code>locale</code> of length 7.
</p>


<h3>Value</h3>

<p>Return a locale to be used in <code><a href="readr.html#topic+read_delim">readr::read_delim()</a></code> or friends.
</p>

<hr>
<h2 id='example_data'>Example m-path data</h2><span id='topic+example_data'></span>

<h3>Description</h3>

<p>Contains the preprocessed example data for an m-path research study.
</p>
<p>In the study, 20 participants completed 11 beeps over the course of 10 days.
The study consisted of:
</p>

<ul>
<li><p> An intake questionnaire, that participants answered at the study's start.
</p>
</li>
<li><p> A main questionnaire (10 times per day), where participants answered
questions about their emotions and context at the time.
</p>
</li>
<li><p> An evening questionnaire (once, at the end of the day),
about their emotions and activities throughout the day.
</p>
</li></ul>

<p>Each row corresponds to one beep sent during the study.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>example_data
</code></pre>


<h3>Format</h3>

<p>A data frame with 1980 rows and 47 columns:
</p>

<dl>
<dt>participant</dt><dd><p>Participant identifier.</p>
</dd>
<dt>code</dt><dd><p>Code the participants used to sign up for the study.</p>
</dd>
<dt>questionnaire</dt><dd><p>The questionnaire that participants answered
in that beep (it can be the main or the evening questionnaire).</p>
</dd>
<dt>scheduled</dt><dd><p>Time stamp for when the notification was scheduled for,
in unix time.</p>
</dd>
<dt>sent</dt><dd><p>Time stamp for when the notification was sent, in unix time.</p>
</dd>
<dt>start</dt><dd><p>Time stamp for when the notification was answered,
in unix time.
If the notification was never answered, this value is an NA.</p>
</dd>
<dt>stop</dt><dd><p>Time stamp for when the notification was completed,
in unix time.
If the notification was never answered, this value is an NA.</p>
</dd>
<dt>phone_server_offset</dt><dd><p>The difference between the phone time
and the server time.</p>
</dd>
<dt>obs_n</dt><dd><p>Observation number for each participant.
Goes from 1 (first observation), to 110 (last observation of the study).</p>
</dd>
<dt>day_n</dt><dd><p>Day number of the study, for the participant.
Goes from 1 to 10.</p>
</dd>
<dt>obs_n_day</dt><dd><p>Observation number within the day (for each participant).
Goes from 1 to 11.</p>
</dd>
<dt>answered</dt><dd><p>Logical, whether the beep was answered or not.</p>
</dd>
<dt>bpm_day</dt><dd><p>Average heart rate per day.
Note that unlike the rest of the variables,
this corresponds to simulated data.</p>
</dd>
<dt>gender</dt><dd><p>Participant's gender.
1 means 'Male', 2 means 'Female', 3 'Other'.</p>
</dd>
<dt>gender_string</dt><dd><p>Participant's gender, as a string.</p>
</dd>
<dt>age</dt><dd><p>Participant's age in years.</p>
</dd>
<dt>life_satisfaction</dt><dd><p>Composite variable corresponding to participant's
life satisfaction according to the Satisfaction With Life Scale (SWLS).</p>
</dd>
<dt>neuroticism</dt><dd><p>Composite variable corresponding to participant's
neuroticism according to the Big Five Inventory (BFI).</p>
</dd>
<dt>slider_happy</dt><dd><p>Participants' self-reported happiness
at the time of the beep.
From 0 (not happy at all) to 100 (very happy).</p>
</dd>
<dt>slider_sad</dt><dd><p>Participants' self-reported sadness
at the time of the beep.
From 0 (not sad at all) to 100 (very sad).</p>
</dd>
<dt>slider_angry</dt><dd><p>Participants' self-reported anger
at the time of the beep.
From 0 (not angry at all) to 100 (very angry).</p>
</dd>
<dt>slider_relaxed</dt><dd><p>Participants' self-reported relaxation
at the time of the beep.
From 0 (not relaxed at all) to 100 (very relaxed).</p>
</dd>
<dt>slider_anxious</dt><dd><p>Participants' self-reported anxiety
at the time of the beep.
From 0 (not anxious at all) to 100 (very anxious).</p>
</dd>
<dt>slider_energetic</dt><dd><p>Participants' self-reported energy
at the time of the beep.
From 0 (not energetic at all) to 100 (very energetic).</p>
</dd>
<dt>slider_tired</dt><dd><p>Participants' self-reported tiredness
at the time of the beep.
From 0 (not tired at all) to 100 (very tired).</p>
</dd>
<dt>location_index</dt><dd><p>Index corresponding to the participant's answer
to the question &quot;Where are you now?&quot;,
from a list of multiple options.</p>
</dd>
<dt>location_string</dt><dd><p>Text corresponding to the participant's selected
location at the time of the beep.</p>
</dd>
<dt>company_index</dt><dd><p>Index corresponding to the participant's answer to the
question &quot;With whom are you right now?&quot;, from a list of multiple options.</p>
</dd>
<dt>company_string</dt><dd><p>Text corresponding to the participant's selected
company at the time of the beep.</p>
</dd>
<dt>activity_index</dt><dd><p>Index corresponding to the participant's answer to
the question &quot;What are you doing now?&quot;, from a list of multiple options.</p>
</dd>
<dt>activity_string</dt><dd><p>Text corresponding to the participant's selected
activity at the time of the beep.</p>
</dd>
<dt>step_count</dt><dd><p>Step count between the previous answered beep and the
current beep</p>
</dd>
<dt>evening_slider_happy</dt><dd><p>Participants' happiness during the day,
from 0 (not happy at all) to 100 (very happy).</p>
</dd>
<dt>evening_slider_sad</dt><dd><p>Participants' sadness during the day,
from 0 (not sad at all) to 100 (very sad).</p>
</dd>
<dt>evening_slider_angry</dt><dd><p>Participants' anger during the day,
from 0 (not angry at all) to 100 (very angry).</p>
</dd>
<dt>evening_slider_relaxed</dt><dd><p>Participants' relaxation during the day,
from 0 (not relaxed at all) to 100 (very relaxed).</p>
</dd>
<dt>evening_slider_anxious</dt><dd><p>Participants' anxiety during the day,
from 0 (not anxious at all) to 100 (very anxious).</p>
</dd>
<dt>evening_slider_energetic</dt><dd><p>Participants' energy during the day,
from 0 (not energetic at all) to 100 (very energetic).</p>
</dd>
<dt>evening_slider_tired</dt><dd><p>Participants' tiredness during the day,
from 0 (not tired at all) to 100 (very tired).</p>
</dd>
<dt>evening_stressful</dt><dd><p>Participant's answer to whether something
stressful had happened during the day. 1 means 'yes', 0 means 'no'.</p>
</dd>
<dt>evening_positive</dt><dd><p>Participant's answer to whether something
positive had happened during the day. 1 means 'yes', 0 means 'no'.</p>
</dd>
<dt>positive_description</dt><dd><p>Explanation of the positive event
(if participants responded 'yes' to the previous question).</p>
</dd>
<dt>stressful_description</dt><dd><p>Explanation of the stressful event
(if participants responded 'yes' to the previous question).</p>
</dd>
<dt>evening_activity_index</dt><dd><p>Index corresponding to the participant's
answer(s) to the question &quot;What activities did you do today?&quot;,
from a list of multiple options.</p>
</dd>
<dt>evening_activity_string</dt><dd><p>Text corresponding to the participant's
selected activities during the day.</p>
</dd>
<dt>delay_start_min</dt><dd><p>Delay in minutes between the scheduled beep and the
time the participants started the beep.</p>
</dd>
<dt>delay_end_min</dt><dd><p>Time in minutes the participants took to fill in
the beep (difference between the columns start and stop).</p>
</dd>
</dl>


<hr>
<h2 id='is_opened_in_excel'>Check if an m-Path CSV file was opened in Excel</h2><span id='topic+is_opened_in_excel'></span>

<h3>Description</h3>

<p>This function checks if an m-Path data file has previously been opened in Excel, in which case
the whole file is wrapped in quotation marks. Actual quotation marks will then also be quoted,
which is why we can't simply remove the outer quotes. Also, this function takes a single string
as input (the first line of the file) instead of the file itself, because this would mean the
file would have to be read twice. One time for this function, and then another time to get the
column names.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_opened_in_excel(line, call = rlang::caller_env())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_opened_in_excel_+3A_line">line</code></td>
<td>
<p>The first line of the file to check if it was opened in Excel.</p>
</td></tr>
<tr><td><code id="is_opened_in_excel_+3A_call">call</code></td>
<td>
<p>The environment from which the function was called to display in the error message.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns <code>TRUE</code> if the line is opened by Excel, otherwise an error informing the user of
this problem.
</p>

<hr>
<h2 id='mpath_example'>Get path to m-Path example data</h2><span id='topic+mpath_example'></span>

<h3>Description</h3>

<p>This function provides an easy way to access the m-Path example files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mpath_example(file = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mpath_example_+3A_file">file</code></td>
<td>
<p>the name of the file to be accessed. If <code>NULL</code>, the function
will return a list of all the example files.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string with the path to the m-Path example data
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: access 'example_basic.csv' data

mpath_example('example_basic.csv') # returns the full path to the file
'example_basic.csv'

# Example 2: list all the example files

mpath_example() # returns the example files as a vector

</code></pre>

<hr>
<h2 id='plot_response_rate'>Plots response rate per day (and per participant)</h2><span id='topic+plot_response_rate'></span>

<h3>Description</h3>

<p>This function returns a ggplot object with the response rate per day (x axis) and
participant (color). Note that instead of using calendar dates, the function returns a plot
grouped by the day inside the study for the participant.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_response_rate(data, valid_col, participant_col, time_col)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_response_rate_+3A_data">data</code></td>
<td>
<p>data frame with data</p>
</td></tr>
<tr><td><code id="plot_response_rate_+3A_valid_col">valid_col</code></td>
<td>
<p>name of the column that stores whether the beep
was answered or not</p>
</td></tr>
<tr><td><code id="plot_response_rate_+3A_participant_col">participant_col</code></td>
<td>
<p>name of the column that stores the participant id
(or equivalent)</p>
</td></tr>
<tr><td><code id="plot_response_rate_+3A_time_col">time_col</code></td>
<td>
<p>name of the column that stores the time of the beep</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a ggplot object with the response rate per day (x axis)
and participant (color)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(example_data)

# make plot with plot_response_rate
plot_response_rate(data = example_data,
time_col = sent,
participant_col = participant,
valid_col = answered)
# The resulting ggplot object can be formatted using ggplot2 functions (see ggplot2
# documentation).

</code></pre>

<hr>
<h2 id='read_meta_data'>Read m-Path meta data</h2><span id='topic+read_meta_data'></span>

<h3>Description</h3>

<p>Internal function to read the meta data file for an m-Path file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_meta_data(meta_data, warn_changed_columns = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_meta_data_+3A_meta_data">meta_data</code></td>
<td>
<p>A string with the path to the meta data file.</p>
</td></tr>
<tr><td><code id="read_meta_data_+3A_warn_changed_columns">warn_changed_columns</code></td>
<td>
<p>Warn if the question text, type of question, or type of answer has
changed during the study. Default is <code>TRUE</code> and may print up to 50 warnings.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble</a> with the contents of the meta data file.
</p>

<hr>
<h2 id='read_mpath'>Read m-Path data</h2><span id='topic+read_mpath'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>This function reads an m-Path CSV file into a <a href="tibble.html#topic+tibble">tibble</a>, an extension of a
<code>data.frame</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_mpath(file, meta_data, warn_changed_columns = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_mpath_+3A_file">file</code></td>
<td>
<p>A string with the path to the m-Path file.</p>
</td></tr>
<tr><td><code id="read_mpath_+3A_meta_data">meta_data</code></td>
<td>
<p>A string with the path to the meta data file.</p>
</td></tr>
<tr><td><code id="read_mpath_+3A_warn_changed_columns">warn_changed_columns</code></td>
<td>
<p>Warn if the question text, type of question, or type of answer has
changed during the study. Default is <code>TRUE</code> and may print up to 50 warnings.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that this function has been tested with the meta data version v.1.1, so it is
advised to use that version of the meta data. In the m-Path dashboard, change the version in
'Export data' &gt; &quot;export version&quot;.
</p>


<h3>Value</h3>

<p>A <a href="tibble.html#topic+tibble">tibble</a> with the m-Path data.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+write_mpath">write_mpath()</a></code> for saving the data back to a CSV file.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# We can use the function mpath_examples to get the path to the example data
basic_path &lt;- mpath_example(file ="example_basic.csv")
meta_path &lt;- mpath_example("example_meta.csv")

data &lt;- read_mpath(file = basic_path,
                meta_data = meta_path)

</code></pre>

<hr>
<h2 id='response_rate'>Calculate response rate</h2><span id='topic+response_rate'></span>

<h3>Description</h3>

<p>Calculate response rate
</p>


<h3>Usage</h3>

<pre><code class='language-R'>response_rate(
  data,
  valid_col,
  participant_col,
  time_col = NULL,
  period_start = NULL,
  period_end = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="response_rate_+3A_data">data</code></td>
<td>
<p>data frame with data</p>
</td></tr>
<tr><td><code id="response_rate_+3A_valid_col">valid_col</code></td>
<td>
<p>name of the column that stores whether the beep
was answered or not</p>
</td></tr>
<tr><td><code id="response_rate_+3A_participant_col">participant_col</code></td>
<td>
<p>name of the column that stores the participant id
(or equivalent)</p>
</td></tr>
<tr><td><code id="response_rate_+3A_time_col">time_col</code></td>
<td>
<p>optional: name of the column that stores the time of the
beep, as a 'POSIXct' object.</p>
</td></tr>
<tr><td><code id="response_rate_+3A_period_start">period_start</code></td>
<td>
<p>string representing the starting date to
calculate response rates (optional). Accepts dates in the following
formats: <code>yyyy-mm-dd</code> or<code>yyyy/mm/dd</code>.</p>
</td></tr>
<tr><td><code id="response_rate_+3A_period_end">period_end</code></td>
<td>
<p>period end to calculate response rates (optional).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data frame with the response rate for each participant, and the number of beeps used to
calculate the response rate
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Example 1: calculate response rates for the whole study
# Get example data
data(example_data)

# Calculate response rate for each participant

# We don't specify time_col, period_start or period_end.
# Response rates will be based on all the participant's data
response_rate &lt;- response_rate(data = example_data,
                               valid_col = answered,
                               participant_col = participant)

# Example 2: calculate response rates for a specific time period
data(example_data)

# Calculate response rate for each participant between dates
response_rate &lt;- response_rate(data = example_data,
                               valid_col = answered,
                               participant_col = participant,
                               time_col = sent,
                               period_start = '2024-05-15',
                               period_end = '2024-05-31')

# Get participants with a response rate below 0.5
response_rate[response_rate$response_rate &lt; 0.5,]

</code></pre>

<hr>
<h2 id='timestamps_to_datetime'>Convert m-Path timestamps to a date time format</h2><span id='topic+timestamps_to_datetime'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="../help/figures/lifecycle-stable.svg" alt='[Stable]' /></a>
</p>
<p>m-Path timestamps are based on the participant's local time zone, and when converted to R
datetime format, they may display as UTC. This function allows for the conversion of m-Path
timestamps to datetime, and optionally allows for the specification of a UTC offset or a forced
time zone.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>timestamps_to_datetime(x, tz_offset = NULL, force_tz = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="timestamps_to_datetime_+3A_x">x</code></td>
<td>
<p>A vector of timestamps to be transformed to datetime.</p>
</td></tr>
<tr><td><code id="timestamps_to_datetime_+3A_tz_offset">tz_offset</code></td>
<td>
<p>A numeric value to be added to the timestamps before transforming to datetime.
This is typically derived from the <code>timeZoneOffset</code> column from m-Path data. This is only
useful when you want to compare timestamps in an absolute manner or link it to external data
sources.</p>
</td></tr>
<tr><td><code id="timestamps_to_datetime_+3A_force_tz">force_tz</code></td>
<td>
<p>A string specifying the time zone to force the timestamps to. This is useful when
the data is to be compared to other data sources that are in a different time zone. Note that
this will not change the actual time of the timestamp, but only the time zone that is
displayed. The <code>lubridate</code> package is required to be installed for this argument to work.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Timestamps in m-Path, like those in <code>timeStampScheduled</code> and <code>timeStampStart</code>, are a variation on
UNIX timestamps, defined as the number of seconds since January 1, 1970, at 00:00:00. However,
unlike standard UNIX timestamps (which use UTC), m-Path timestamps are based on the participant's
local time zone. When converted to <code>R</code> datetime format, they may display as UTC, which could lead
to confusion. This typically isn't an issue when analyzing ESM data within the participant's
local context, but it can affect comparisons with other data sources. For accurate
cross-referencing with other data, consider specifying the UTC offset to correctly adjust for the
participant’s local time. Alternatively, you can force the timestamps to display in a specific
time zone using the <code>force_tz</code> argument.
</p>


<h3>Value</h3>

<p>A vector of <code>POSIXct</code> objects representing the timestamps in the UTC time zone. The time
zone may differ if <code>force_tz</code> is specified.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- read_mpath(
  mpath_example("example_basic.csv"),
  mpath_example("example_meta.csv")
)[1:10,]

# The most common use case for this function: Convert
# `timeStampStart` to datetime. Remember that these are in the
# local time zone, but R displays them as being in UTC.
timestamps_to_datetime(data$timeStampStart)

# Convert `timeStampStop` to datetime, but as being the correct
# value in UTC.
timestamps_to_datetime(
  x = data$timeStampStop,
  tz_offset = data$timeZoneOffset
)

# Let's convert `timeStampSent` to datetime, but this time we want to
# force the time zone to be in "America/New_York" as we know all
# participants were in this time zone and so we can link with other
# data that is also in New York's time zone.
timestamps_to_datetime(
  x = data$timeStampSent,
  force_tz = "America/New_York"
)
</code></pre>

<hr>
<h2 id='write_mpath'>Write m-Path data to a CSV file</h2><span id='topic+write_mpath'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
</p>
<p>Save a data frame or tibble to a CSV file in the same format as the downloaded data from the
m-Path website. This function is useful when you have made modifications to the original data
and would like to save it in the same format. Note that reading back the data using
<code><a href="#topic+read_mpath">read_mpath()</a></code> may not always work, as the data may no longer be in line with the meta data of
the original data file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>write_mpath(x, file, .progress = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="write_mpath_+3A_x">x</code></td>
<td>
<p>A data frame or tibble to write to disk.</p>
</td></tr>
<tr><td><code id="write_mpath_+3A_file">file</code></td>
<td>
<p>File or connection to write to.</p>
</td></tr>
<tr><td><code id="write_mpath_+3A_.progress">.progress</code></td>
<td>
<p>Logical indicating whether to show a progress bar. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Even though saving a data frame to a CSV file may seem trivial, there are several issues that
need to be addressed when saving m-Path data. The main issue is that m-Path data contains list
columns that need to be &quot;collapsed&quot; to a single string before they can be saved to a CSV file.
This function collapses most list columns to a single string using <code><a href="base.html#topic+paste">paste()</a></code> with commas as a
delimiter of the values. However, for columns that contain strings, this is not possible as the
strings themselves may contains commas as well. To address this, the function converts all
character columns to JSON strings using <code><a href="jsonlite.html#topic+fromJSON">jsonlite::toJSON()</a></code> before saving them to disk.
</p>
<p>While <code>write_mpath()</code> aims to provide a similar CSV file as the m-Path dashboard, we cannot
provide any guarantees that the data can be read back using <code><a href="#topic+read_mpath">read_mpath()</a></code>, especially when the
data has been modified. If you want to save the data to use it at a later point in R (even when
transferring it to another computer), we recommend using <code><a href="base.html#topic+saveRDS">saveRDS()</a></code> or <code><a href="base.html#topic+save">save()</a></code> instead.
</p>
<p>Note that the resulting data file may not exactly be equal to the original, even if it was not
modified after reading it with <code><a href="#topic+read_mpath">read_mpath()</a></code>. The main reason is that CSV files from the m-Path
dashboard do not contain all necessary file delimiters corresponding to the number of rows in the
data. This function, however, does contain the correct number of file delimiters which makes the
files slightly bigger compared to the original file.
</p>


<h3>Value</h3>

<p>Returns <code>x</code> invisibly.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+read_mpath">read_mpath()</a></code> to read m-Path data into R.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data &lt;- read_mpath(
  mpath_example("example_basic.csv"),
  mpath_example("example_meta.csv")
)

write_mpath(data, "data.csv")

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
