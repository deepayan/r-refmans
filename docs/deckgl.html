<!DOCTYPE html><html><head><title>Help for package deckgl</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {deckgl}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#add_arc_layer'><p>Add an arc layer to the deckgl widget</p></a></li>
<li><a href='#add_basemap'><p>Add a basemap to the deckgl widget</p></a></li>
<li><a href='#add_bitmap_layer'><p>Add a bitmap layer to the deckgl widget</p></a></li>
<li><a href='#add_column_layer'><p>Add a column layer to the deckgl widget</p></a></li>
<li><a href='#add_contour_layer'><p>Add a contour layer to the deckgl widget</p></a></li>
<li><a href='#add_control'><p>Add a control to the widget</p></a></li>
<li><a href='#add_data'><p>Add JavaScript data file</p></a></li>
<li><a href='#add_geojson_layer'><p>Add a geojson layer to the deckgl widget</p></a></li>
<li><a href='#add_great_circle_layer'><p>Add a great circle layer to the deckgl widget</p></a></li>
<li><a href='#add_grid_cell_layer'><p>Add a grid cell layer to the deckgl widget</p></a></li>
<li><a href='#add_grid_layer'><p>Add a grid layer to the deckgl widget</p></a></li>
<li><a href='#add_h3_cluster_layer'><p>Add a h3 cluster layer to the deckgl widget</p></a></li>
<li><a href='#add_h3_hexagon_layer'><p>Add a h3 hexagon layer to the deckgl widget</p></a></li>
<li><a href='#add_heatmap_layer'><p>Add a heatmap layer to the deckgl widget</p></a></li>
<li><a href='#add_hexagon_layer'><p>Add a hexagon layer to the deckgl widget</p></a></li>
<li><a href='#add_icon_layer'><p>Add an icon layer to the deckgl widget</p></a></li>
<li><a href='#add_json_editor'><p>Add a JSON-editor to the deckgl widget</p></a></li>
<li><a href='#add_layer'><p>Add any kind of layer to the deckgl widget</p></a></li>
<li><a href='#add_legend'><p>Add a legend to the deckgl widget</p></a></li>
<li><a href='#add_legend_pal'><p>Add a legend to the deckgl widget using a palette func</p></a></li>
<li><a href='#add_line_layer'><p>Add a line layer to the deckgl widget</p></a></li>
<li><a href='#add_mapbox_basemap'><p>Add a basemap from mapbox to the deckgl widget</p></a></li>
<li><a href='#add_path_layer'><p>Add a path layer to the deckgl widget</p></a></li>
<li><a href='#add_point_cloud_layer'><p>Add a point cloud layer to the deckgl widget</p></a></li>
<li><a href='#add_polygon_layer'><p>Add a polygon layer to the deckgl widget</p></a></li>
<li><a href='#add_raster_tile_layer'><p>Add a raster tile layer to the deckgl widget</p></a></li>
<li><a href='#add_scatterplot_layer'><p>Add a scatterplot layer to the deckgl widget</p></a></li>
<li><a href='#add_screen_grid_layer'><p>Add a screen grid layer to the deckgl widget</p></a></li>
<li><a href='#add_source'><p>Add a data source to the deckgl widget</p></a></li>
<li><a href='#add_source_as_dep'><p>Add source as JavaScript dep</p></a></li>
<li><a href='#add_text_layer'><p>Add a text layer to the deckgl widget</p></a></li>
<li><a href='#bart_segments'><p>bart segments</p></a></li>
<li><a href='#bart_stations'><p>bart stations</p></a></li>
<li><a href='#deckgl'><p>Create a deckgl widget</p></a></li>
<li><a href='#deckgl_proxy'><p>Create a deckgl proxy object</p></a></li>
<li><a href='#deckgl-shiny'><p>Shiny bindings for deckgl</p></a></li>
<li><a href='#does_it_work'><p>Check if everything works fine</p></a></li>
<li><a href='#encode_icon_atlas'><p>Encode atlas image to base64</p></a></li>
<li><a href='#get_color_to_rgb_array'><p>Create a getColor data accessor</p></a></li>
<li><a href='#get_data'><p>Get data</p></a></li>
<li><a href='#get_first_element'><p>Create a data accessor retrieving the first element of an array</p></a></li>
<li><a href='#get_last_element'><p>Create a data accessor retrieving the last element of an array</p></a></li>
<li><a href='#get_position'><p>Create a getPosition data accessor</p></a></li>
<li><a href='#get_property'><p>Create a data accessor</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#set_view_state'><p>Set the view state of the map</p></a></li>
<li><a href='#sf_bike_parking'><p>sf bike parking</p></a></li>
<li><a href='#update_deckgl'><p>Send commands to a deckgl instance in a <code>Shiny</code> app</p></a></li>
<li><a href='#use_carto_style'><p>Use a Carto style</p></a></li>
<li><a href='#use_contour_definition'><p>Create a contour definition</p></a></li>
<li><a href='#use_default_icon_properties'><p>Use default icon properties</p></a></li>
<li><a href='#use_icon_definition'><p>Create an icon definition on an atlas image</p></a></li>
<li><a href='#use_tooltip'><p>Create a tooltip property</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>An R Interface to 'deck.gl'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.0</td>
</tr>
<tr>
<td>Date:</td>
<td>2023-02-19</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Stefan Kuethe &lt;crazycapivara@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Makes 'deck.gl' <a href="https://deck.gl/">https://deck.gl/</a>, a WebGL-powered open-source JavaScript framework
  for visual exploratory data analysis of large datasets, available within R via the 'htmlwidgets' package.
  Furthermore, it supports basemaps from 'mapbox' <a href="https://www.mapbox.com/">https://www.mapbox.com/</a> via
  'mapbox-gl-js' <a href="https://github.com/mapbox/mapbox-gl-js">https://github.com/mapbox/mapbox-gl-js</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/crazycapivara/deckgl/">https://github.com/crazycapivara/deckgl/</a>,
<a href="https://crazycapivara.github.io/deckgl/">https://crazycapivara.github.io/deckgl/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/crazycapivara/deckgl/issues/">https://github.com/crazycapivara/deckgl/issues/</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>htmlwidgets, htmltools, magrittr, base64enc, yaml, jsonlite,
readr, tibble</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, rprojroot, sf, scales,
RColorBrewer, shiny</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-02-19 20:07:28 UTC; gabbo</td>
</tr>
<tr>
<td>Author:</td>
<td>Stefan Kuethe [aut, cre]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-02-19 20:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='add_arc_layer'>Add an arc layer to the deckgl widget</h2><span id='topic+add_arc_layer'></span>

<h3>Description</h3>

<p>The <code>ArcLayer</code> renders raised arcs joining pairs of source and target points,
specified as latitude/longitude coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_arc_layer(deckgl, data = NULL, properties = list(), ..., id = "arc-layer")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_arc_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_arc_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_arc_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_arc_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_arc_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/arc-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/arc-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("bart_segments")

properties &lt;- list(
  getWidth = 12,
  getSourcePosition = ~from_lng + from_lat,
  getTargetPosition = ~to_lng + to_lat,
  getSourceColor = "@=[Math.sqrt(inbound), 140, 0]",
  getTargetColor = "@=[Math.sqrt(outbound), 140, 0]",
  tooltip = use_tooltip(
    html = "{{from_name}} to {{to_name}}",
    style = "background: steelBlue; border-radius: 5px;"
  )
)

deck &lt;- deckgl(zoom = 10, pitch = 35) %&gt;%
  add_arc_layer(data = bart_segments, properties = properties) %&gt;%
  add_control("Arc Layer", "top-left") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_basemap'>Add a basemap to the deckgl widget</h2><span id='topic+add_basemap'></span>

<h3>Description</h3>

<p>Add a basemap to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_basemap(deckgl, style = use_carto_style(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_basemap_+3A_deckgl">deckgl</code></td>
<td>
<p>deckgl widget</p>
</td></tr>
<tr><td><code id="add_basemap_+3A_style">style</code></td>
<td>
<p>The style definition of the map conforming to the Mapbox Style Specification.</p>
</td></tr>
<tr><td><code id="add_basemap_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>

<hr>
<h2 id='add_bitmap_layer'>Add a bitmap layer to the deckgl widget</h2><span id='topic+add_bitmap_layer'></span>

<h3>Description</h3>

<p>Add a bitmap layer to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_bitmap_layer(
  deckgl,
  image = NULL,
  properties = list(),
  ...,
  id = "h3-hexagon-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_bitmap_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_bitmap_layer_+3A_image">image</code></td>
<td>
<p>image</p>
</td></tr>
<tr><td><code id="add_bitmap_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_bitmap_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_bitmap_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>image &lt;- paste0(
  "https://raw.githubusercontent.com/",
  "uber-common/deck.gl-data/master/",
  "website/sf-districts.png"
)
bounds &lt;- c(-122.5190, 37.7045, -122.355, 37.829)

deck &lt;- deckgl() %&gt;%
  add_bitmap_layer(image = image, bounds = bounds) %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_column_layer'>Add a column layer to the deckgl widget</h2><span id='topic+add_column_layer'></span>

<h3>Description</h3>

<p>The <code>ColumnLayer</code> can be used to render a heatmap of vertical cylinders.
It renders a tesselated regular polygon centered at each given position (a &quot;disk&quot;), and extrude it in 3d.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_column_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "column-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_column_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_column_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_column_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_column_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_column_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/column-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/column-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hexagon_centroids &lt;- system.file("sample-data/centroids.csv", package = "deckgl") %&gt;%
  read.csv()

deck &lt;- deckgl(zoom = 11, pitch = 35) %&gt;%
  add_column_layer(
    data = hexagon_centroids,
    diskResolution = 12,
    getPosition = ~lng + lat,
    getElevation = ~value,
    getFillColor = "@=[48, 128, value * 255, 255]",
    elevationScale = 5000,
    radius = 250,
    extruded = TRUE,
    tooltip = "Value: {{value}}"
  ) %&gt;%
  add_control("Column Layer", "bottom-left") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_contour_layer'>Add a contour layer to the deckgl widget</h2><span id='topic+add_contour_layer'></span>

<h3>Description</h3>

<p>The <code>ContourLayer</code> renders contour lines for a given threshold and cell size.
Internally it implements <a href="https://en.wikipedia.org/wiki/Marching_squares">Marching Squares</a> algorithm to generate contour line segments
and feeds them into <code>LineLayer</code> to render lines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_contour_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "contour-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_contour_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_contour_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_contour_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_contour_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_contour_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/contour-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/contour-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr contour-layer
data("sf_bike_parking")

contours &lt;- list(
  use_contour_definition(
    threshold = 1,
    color = c(255, 0, 0),
    stroke_width = 2
  ),
  use_contour_definition(
    threshold = 5,
    color = c(0, 255, 0),
    stroke_width = 3
  ),
  use_contour_definition(
    threshold = 15,
    color = c(0, 0, 255),
    stroke_width = 5
  )
)

properties &lt;- list(
  contours = contours,
  cellSize = 200,
  elevationScale = 4,
  getPosition = ~lng + lat
)

deck &lt;- deckgl(zoom = 10.5, pitch = 30) %&gt;%
  add_contour_layer(data = sf_bike_parking, properties = properties) %&gt;%
  add_control("Contour Layer") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_control'>Add a control to the widget</h2><span id='topic+add_control'></span>

<h3>Description</h3>

<p>Add a control to the widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_control(deckgl, html, pos = "top-right", style = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_control_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_control_+3A_html">html</code></td>
<td>
<p>The <code>innerHTML</code> of the element.</p>
</td></tr>
<tr><td><code id="add_control_+3A_pos">pos</code></td>
<td>
<p>The position of the control. Possible values are <code>top-left</code>, <code>top-right</code>,
<code>bottom-right</code> and <code>bottom-left</code>.</p>
</td></tr>
<tr><td><code id="add_control_+3A_style">style</code></td>
<td>
<p>A <code>cssText</code> string that will modefiy the default style of the element.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>deck &lt;- deckgl() %&gt;%
  add_basemap() %&gt;%
  add_control(
    "&lt;h1&gt;Blank Base Map&lt;/h1&gt;",
    pos = "top-right",
    style = "background: #004080; color: white;"
  )

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_data'>Add JavaScript data file</h2><span id='topic+add_data'></span>

<h3>Description</h3>

<p>EXPERIMENTAL
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_data(deckgl, data, var_name = "thanksForAllTheFish")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_data_+3A_deckgl">deckgl</code></td>
<td>
<p>deckgl widget</p>
</td></tr>
<tr><td><code id="add_data_+3A_data">data</code></td>
<td>
<p>data object</p>
</td></tr>
<tr><td><code id="add_data_+3A_var_name">var_name</code></td>
<td>
<p>JavaScript variable name used to make the data available</p>
</td></tr>
</table>

<hr>
<h2 id='add_geojson_layer'>Add a geojson layer to the deckgl widget</h2><span id='topic+add_geojson_layer'></span>

<h3>Description</h3>

<p>The <code>GeoJsonLayer</code> takes in <a href="https://geojson.org">GeoJson</a> formatted data
and renders it as interactive polygons, lines and points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_geojson_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "geojson-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_geojson_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_geojson_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_geojson_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_geojson_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_geojson_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/geojson-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/geojson-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>geojson &lt;- paste0(
  "https://raw.githubusercontent.com/",
  "uber-common/deck.gl-data/",
  "master/website/bart.geo.json"
)

deck &lt;- deckgl(zoom = 10, pickingRadius = 5) %&gt;%
  add_geojson_layer(
    data = geojson,
    filled = TRUE,
    extruded = TRUE,
    getRadius = 100,
    lineWidthScale = 20,
    lineWidthMinPixels = 2,
    getLineWidth = 1,
    getLineColor = "@=properties.color || 'green'",
    getFillColor = c(160, 160, 180, 200),
    getElevation = 30,
    tooltip = JS("object =&gt; object.properties.name || object.properties.station")
  ) %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_great_circle_layer'>Add a great circle layer to the deckgl widget</h2><span id='topic+add_great_circle_layer'></span>

<h3>Description</h3>

<p>The <code>GreatCircleLayer</code> is a variation of the <code>ArcLayer</code>.
It renders flat arcs along the great circle joining pairs of source
and target points, specified as latitude/longitude coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_great_circle_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "great-circle-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_great_circle_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_great_circle_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_great_circle_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_great_circle_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_great_circle_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/great-circle-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/great-circle-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr great-circle-layer
data("bart_segments")

properties &lt;- list(
  pickable = TRUE,
  getWidth = 12,
  getSourcePosition = ~from_lng + from_lat,
  getTargetPosition = ~to_lng + to_lat,
  getSourceColor = JS("d =&gt; [Math.sqrt(d.inbound), 140, 0]"),
  getTargetColor = JS("d =&gt; [Math.sqrt(d.outbound), 140, 0]"),
  getTooltip = "{{from_name}} to {{to_name}}"
)

deck &lt;- deckgl(zoom = 10, pitch = 35) %&gt;%
  add_great_circle_layer(data = bart_segments, properties = properties) %&gt;%
  add_control("Great Circle Layer") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_grid_cell_layer'>Add a grid cell layer to the deckgl widget</h2><span id='topic+add_grid_cell_layer'></span>

<h3>Description</h3>

<p>The <code>GridCellLayer</code> can render a grid-based heatmap.
It is a variation of the <code>ColumnLayer</code>. It takes the constant width / height of all cells and top-left coordinate of each cell.
The grid cells can be given a height using the <code>getElevation</code> accessor.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_grid_cell_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "grid-cell-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_grid_cell_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_grid_cell_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_grid_cell_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_grid_cell_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_grid_cell_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/grid-cell-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/grid-cell-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hexagon_centroids &lt;- system.file("sample-data/centroids.csv", package = "deckgl") %&gt;%
  read.csv()

deck &lt;- deckgl(zoom = 11, pitch = 35) %&gt;%
  add_grid_cell_layer(
    data = hexagon_centroids,
    getPosition = ~lng + lat,
    getElevation = ~value,
    getFillColor = "@=[48, 128, value * 255, 255]",
    elevationScale = 5000,
    cellSize = 250,
    extruded = TRUE,
    tooltip = "{{value}}"
  ) %&gt;%
  add_mapbox_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_grid_layer'>Add a grid layer to the deckgl widget</h2><span id='topic+add_grid_layer'></span>

<h3>Description</h3>

<p>The <code>GridLayer</code> renders a grid heatmap based on an array of points. It takes the constant size all each cell, projects points into cells.
The color and height of the cell is scaled by number of points it contains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_grid_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "grid-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_grid_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_grid_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_grid_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_grid_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_grid_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/grid-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/grid-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("sf_bike_parking")

properties &lt;- list(
  filter = "spaces &gt; 4",
  visible = TRUE,
  extruded = TRUE,
  cellSize = 200,
  elevationScale = 4,
  getPosition = "@=[lng, lat]", #~lng + lat,
  colorRange = RColorBrewer::brewer.pal(6, "YlOrRd"),
  tooltip = "{{position.0}}, {{position.1}}&lt;br/&gt;Count: {{count}}"
)

deck &lt;- deckgl(zoom = 11, pitch = 45, bearing = 35, element_id = "grid-layer") %&gt;%
  add_source("sf-bike-parking", sf_bike_parking) %&gt;%
  add_grid_layer(
    source = "sf-bike-parking",
    properties = properties
  ) %&gt;%
  add_control("Grid Layer") %&gt;%
  add_basemap() %&gt;%
  add_json_editor(wrap = 50, maxLines = 23)

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_h3_cluster_layer'>Add a h3 cluster layer to the deckgl widget</h2><span id='topic+add_h3_cluster_layer'></span>

<h3>Description</h3>

<p>Add a h3 cluster layer to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_h3_cluster_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "h3-cluster-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_h3_cluster_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_h3_cluster_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_h3_cluster_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_h3_cluster_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_h3_cluster_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/h3-cluster-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/h3-cluster-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr h3-cluster-layer
data_url &lt;- paste0(
  "https://raw.githubusercontent.com/uber-common/deck.gl-data/",
  "master/website/sf.h3clusters.json"
)
# sample_data &lt;- jsonlite::fromJSON(data_url, simplifyDataFrame = FALSE)
sample_data &lt;- data_url

properties &lt;- list(
  stroked = TRUE,
  filled = TRUE,
  extruded = FALSE,
  getHexagons = ~hexIds,
  getFillColor = JS("d =&gt; [255, (1 - d.mean / 500) * 255, 0]"),
  getLineColor = c(255, 255, 255),
  lineWidthMinPixels = 2,
  getTooltip = ~mean
)

deck &lt;- deckgl(zoom = 10.5, pitch = 20) %&gt;%
  add_h3_cluster_layer(data = sample_data, properties = properties) %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_h3_hexagon_layer'>Add a h3 hexagon layer to the deckgl widget</h2><span id='topic+add_h3_hexagon_layer'></span>

<h3>Description</h3>

<p>Add a h3 hexagon layer to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_h3_hexagon_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "h3-hexagon-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_h3_hexagon_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_h3_hexagon_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_h3_hexagon_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_h3_hexagon_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_h3_hexagon_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/h3-hexagon-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/h3-hexagon-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr h3-hexagon-layer-layer
h3_cells &lt;- system.file("sample-data/h3-cells.csv", package = "deckgl") %&gt;%
  read.csv()

properties &lt;- list(
  getHexagon = ~h3_index,
  getFillColor =JS("d =&gt; [255, (1 - d.count / 500) * 255, 0]"),
  getElevation = ~count,
  elevationScale = 20,
  getTooltip = "{{h3_index}}: {{count}}"
)

deck &lt;- deckgl(zoom = 11, pitch = 35) %&gt;%
  add_h3_hexagon_layer(data = h3_cells, properties = properties) %&gt;%
  add_control("H3 Hexagon Layer") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_heatmap_layer'>Add a heatmap layer to the deckgl widget</h2><span id='topic+add_heatmap_layer'></span>

<h3>Description</h3>

<p>The <code>HeatmapLayer</code> can be used to visualize spatial distribution of data.
It internally implements Gaussian Kernel Density Estimation to render heatmaps.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_heatmap_layer(
  deckgl,
  id = "heatmap-layer",
  data = NULL,
  properties = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_heatmap_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_heatmap_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/heatmap-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/heatmap-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr heatmap-layer
data("sf_bike_parking")

map &lt;- deckgl() %&gt;%
  add_heatmap_layer(
    data = sf_bike_parking,
    getPosition = ~lng + lat,
    getWeight = ~spaces
  ) %&gt;%
  add_basemap()

if (interactive()) map
</code></pre>

<hr>
<h2 id='add_hexagon_layer'>Add a hexagon layer to the deckgl widget</h2><span id='topic+add_hexagon_layer'></span>

<h3>Description</h3>

<p>The <code>HexagonLayer</code> renders a hexagon heatmap based on an array of points. It takes the radius of hexagon bin, projects points into hexagon bins.
The color and height of the hexagon is scaled by number of points it contains.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_hexagon_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "hexagon-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_hexagon_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_hexagon_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_hexagon_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_hexagon_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_hexagon_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/hexagon-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/hexagon-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr hexagon-layer
data("sf_bike_parking")

properties &lt;- list(
  extruded = TRUE,
  radius = 200,
  elevationScale = 4,
  getPosition = ~lng + lat,
  colorRange = RColorBrewer::brewer.pal(6, "Oranges"),
  tooltip = "
    &lt;p&gt;{{position.0}}, {{position.1}}&lt;p&gt;
    &lt;p&gt;Count: {{points.length}}&lt;/p&gt;
    &lt;p&gt;{{#points}}&lt;div&gt;{{address}}&lt;/div&gt;{{/points}}&lt;/p&gt;
  ",
  onClick = JS("obj =&gt; console.log(obj)"),
  autoHighlight = TRUE
)

deck &lt;- deckgl(zoom = 11, pitch = 45, bearing = 35) %&gt;%
  add_hexagon_layer(data = sf_bike_parking, properties = properties) %&gt;%
  add_control("Hexagon Layer", "top-left") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_icon_layer'>Add an icon layer to the deckgl widget</h2><span id='topic+add_icon_layer'></span>

<h3>Description</h3>

<p>The <code>IconLayer</code> renders raster icons at given coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_icon_layer(
  deckgl,
  data = NULL,
  properties = use_default_icon_properties(),
  ...,
  id = "icon-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_icon_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_icon_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_icon_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_icon_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_icon_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/icon-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/icon-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr icon-layer
data("bart_stations")

properties &lt;- list(
  iconAtlas = encode_icon_atlas(),
  iconMapping = list(marker = use_icon_definition()),
  sizeScale = 10,
  getPosition = ~lng + lat,
  getIcon = JS("d =&gt; 'marker'"),
  getSize = 5,
  getColor = JS("d =&gt; [Math.sqrt(d.exits), 140, 0]"),
  getTooltip = "{{name}}&lt;br/&gt;{{address}}"
)

deck &lt;- deckgl(zoom = 10, pitch = 45) %&gt;%
  add_icon_layer(data = bart_stations, properties = properties) %&gt;%
  add_control("Icon Layer") %&gt;%
  add_basemap()

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_json_editor'>Add a JSON-editor to the deckgl widget</h2><span id='topic+add_json_editor'></span>

<h3>Description</h3>

<p>Adds a <code>Ace</code>-editor in JSON mode to the map to interact with the layers of your <code>deck</code> instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_json_editor(deckgl, ..., style = "width: 40%;", theme = "idle_fingers")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_json_editor_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_json_editor_+3A_...">...</code></td>
<td>
<p>Optional args that are passed to the editor. See <a href="https://github.com/ajaxorg/ace/wiki/Configuring-Ace">https://github.com/ajaxorg/ace/wiki/Configuring-Ace</a>
for a list of available options.</p>
</td></tr>
<tr><td><code id="add_json_editor_+3A_style">style</code></td>
<td>
<p>A <code>cssText</code> string that will modefiy the default style of the container that holds
the editor.</p>
</td></tr>
<tr><td><code id="add_json_editor_+3A_theme">theme</code></td>
<td>
<p>The name of the theme used by the editor.</p>
</td></tr>
</table>

<hr>
<h2 id='add_layer'>Add any kind of layer to the deckgl widget</h2><span id='topic+add_layer'></span>

<h3>Description</h3>

<p>Generic function to add any kind of layer to the deckgl widget.
Usually you will not use this one but any of the <code>add_*_layer</code> functions instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_layer(
  deckgl,
  class_name,
  data = NULL,
  properties = list(),
  ...,
  id = "hopeful-hopper",
  tooltip = NULL,
  source = NULL,
  filter = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_class_name">class_name</code></td>
<td>
<p>The name of the JavaScript layer class, e. g. <code>ScatterplotLayer</code>.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_tooltip">tooltip</code></td>
<td>
<p>A tooltip template that defines what should be displayed when the mouse enters an object.
You can also pass a list with the properties <code>html</code> and <code>style</code>. See also <code><a href="#topic+use_tooltip">use_tooltip</a></code>.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_source">source</code></td>
<td>
<p>The ID of the data source. See <code><a href="#topic+add_source">add_source</a></code>.</p>
</td></tr>
<tr><td><code id="add_layer_+3A_filter">filter</code></td>
<td>
<p>A filter expression that is applied to the data object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A deckgl widget object.
</p>

<hr>
<h2 id='add_legend'>Add a legend to the deckgl widget</h2><span id='topic+add_legend'></span>

<h3>Description</h3>

<p>Add a legend to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_legend(
  deckgl,
  colors,
  labels,
  title = NULL,
  pos = "top-right",
  style = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_legend_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_colors">colors</code></td>
<td>
<p>The colors of the legend items.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_labels">labels</code></td>
<td>
<p>The labels corresponding to the colors of the legend items.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_title">title</code></td>
<td>
<p>The title of the legend.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_pos">pos</code></td>
<td>
<p>The position of the control. Possible values are <code>top-left</code>, <code>top-right</code>,
<code>bottom-right</code> and <code>bottom-left</code>.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_style">style</code></td>
<td>
<p>A <code>cssText</code> string that will modefiy the default style of the element.</p>
</td></tr>
<tr><td><code id="add_legend_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>

<hr>
<h2 id='add_legend_pal'>Add a legend to the deckgl widget using a palette func</h2><span id='topic+add_legend_pal'></span>

<h3>Description</h3>

<p>Add a legend to the deckgl widget using a palette func
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_legend_pal(deckgl, pal, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_legend_pal_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_legend_pal_+3A_pal">pal</code></td>
<td>
<p>A palette function that is used to create the
legend elements (colors and labels) automatically.</p>
</td></tr>
<tr><td><code id="add_legend_pal_+3A_...">...</code></td>
<td>
<p>Parameters that are passed to <code><a href="#topic+add_legend">add_legend</a></code>.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="scales.html#topic+col_numeric">col_numeric</a></code> et cetera for how to create a palette function.
</p>

<hr>
<h2 id='add_line_layer'>Add a line layer to the deckgl widget</h2><span id='topic+add_line_layer'></span>

<h3>Description</h3>

<p>The <code>LineLayer</code> renders flat lines joining pairs of source and target points,
specified as latitude/longitude coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_line_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "line-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_line_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_line_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/line-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/line-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr line-layer
data("bart_segments")

properties &lt;- list(
  pickable = TRUE,
  getWidth = 12,
  getSourcePosition = ~from_lng + from_lat,
  getTargetPosition = ~to_lng + to_lat,
  getColor = JS("d =&gt; [Math.sqrt(d.inbound + d.outbound), 140, 0]"),
  tooltip = "{{from_name}}} to {{to_name}}"
)

deck &lt;- deckgl(zoom = 10, pitch = 20) %&gt;%
  add_line_layer(data = bart_segments, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Line Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_mapbox_basemap'>Add a basemap from mapbox to the deckgl widget</h2><span id='topic+add_mapbox_basemap'></span>

<h3>Description</h3>

<p>Add a basemap from mapbox to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_mapbox_basemap(
  deckgl,
  style = "mapbox://styles/mapbox/light-v9",
  token = Sys.getenv("MAPBOX_API_TOKEN")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_mapbox_basemap_+3A_deckgl">deckgl</code></td>
<td>
<p>deckgl widget</p>
</td></tr>
<tr><td><code id="add_mapbox_basemap_+3A_style">style</code></td>
<td>
<p>map style</p>
</td></tr>
<tr><td><code id="add_mapbox_basemap_+3A_token">token</code></td>
<td>
<p>mapbox API access token</p>
</td></tr>
</table>


<h3>Value</h3>

<p>deckgl widget
</p>

<hr>
<h2 id='add_path_layer'>Add a path layer to the deckgl widget</h2><span id='topic+add_path_layer'></span>

<h3>Description</h3>

<p>The <code>PathLayer</code> takes in lists of coordinate points and renders them as extruded lines with mitering.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_path_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "path-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_path_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_path_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_path_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_path_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_path_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/path-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/path-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>sample_data &lt;- paste0(
  "https://raw.githubusercontent.com/",
  "uber-common/deck.gl-data/",
  "master/website/bart-lines.json"
)

properties &lt;- list(
  pickable = TRUE,
  widthScale = 20,
  widthMinPixels = 2,
  getPath = ~path,
  getColor = ~color,
  getWidth = 5,
  tooltip = ~name
)

deck &lt;- deckgl(pitch = 25, zoom = 10.5) %&gt;%
  add_path_layer(data = sample_data, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Path Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_point_cloud_layer'>Add a point cloud layer to the deckgl widget</h2><span id='topic+add_point_cloud_layer'></span>

<h3>Description</h3>

<p>The <code>PointCloudLayer</code> takes in points with 3d positions, normals and colors and renders them as spheres with a certain radius.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_point_cloud_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "point-cloud-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_point_cloud_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_point_cloud_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_point_cloud_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_point_cloud_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_point_cloud_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/point-cloud-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/point-cloud-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr point-cloud-layer
sample_data &lt;- paste0(
  "https://raw.githubusercontent.com/",
  "uber-common/deck.gl-data/",
  "master/website/pointcloud.json"
)

properties &lt;- list(
  pickable = TRUE,
  coordinateSystem = JS("deck.COORDINATE_SYSTEM.METER_OFFSETS"),
  coordinateOrigin = c(-122.4, 37.74),
  pointSize = 4,
  getPosition = ~position,
  getNormal = ~normal,
  getColor = ~color,
  lightSettings = list(),
  tooltip = "{{position.0}}, {{position.1}}"
)

deck &lt;- deckgl(pitch = 45, zoom = 10.5) %&gt;%
  add_point_cloud_layer(data = sample_data, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Point Cloud Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_polygon_layer'>Add a polygon layer to the deckgl widget</h2><span id='topic+add_polygon_layer'></span>

<h3>Description</h3>

<p>The <code>PolygonLayer</code> renders filled and/or stroked polygons.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_polygon_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "polygon-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_polygon_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_polygon_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_polygon_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_polygon_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_polygon_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/polygon-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/polygon-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr polygon-layer
sample_data &lt;- paste0(
  "https://raw.githubusercontent.com/",
  "uber-common/deck.gl-data/",
  "master/website/sf-zipcodes.json"
)

properties &lt;- list(
  pickable = TRUE,
  stroked = TRUE,
  filled = TRUE,
  wireframe = TRUE,
  lineWidthMinPixels = 1,
  getPolygon = ~contour,
  getElevation = JS("d =&gt; d.population / d.area / 10"),
  getFillColor = JS("d =&gt; [d.population / d.area / 60, 140, 0]"),
  getLineColor = c(80, 80, 80),
  getLineWidth = 1,
  tooltip = "{{zipcode}}&lt;br/&gt;Population: {{population}}"
)

deck &lt;- deckgl(zoom = 11, pitch = 25) %&gt;%
  add_polygon_layer(data = sample_data, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Polygon Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_raster_tile_layer'>Add a raster tile layer to the deckgl widget</h2><span id='topic+add_raster_tile_layer'></span>

<h3>Description</h3>

<p>EXPERIMENTAL, see <a href="https://deck.gl/#/examples/core-layers/tile-layer">https://deck.gl/#/examples/core-layers/tile-layer</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_raster_tile_layer(
  deckgl,
  id = "raster-tiles",
  tileServer = "https://c.tile.openstreetmap.org/",
  properties = list(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_raster_tile_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_raster_tile_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
<tr><td><code id="add_raster_tile_layer_+3A_tileserver">tileServer</code></td>
<td>
<p>base url of the tile server</p>
</td></tr>
<tr><td><code id="add_raster_tile_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_raster_tile_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr raster-tile-layer
tile_servers &lt;- list(
  osm = "https://a.tile.openstreetmap.org/",
  carto_light = "https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/",
  carto_dark = "https://cartodb-basemaps-a.global.ssl.fastly.net/dark_all/",
  stamen_toner = "http://a.tile.stamen.com/toner/"
)

deck &lt;- deckgl() %&gt;%
  add_raster_tile_layer(
    tileServer = tile_servers$osm,
    pickable = TRUE,
    autoHighlight = TRUE,
    highlightColor = c(60, 60, 60, 40)
  )

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_scatterplot_layer'>Add a scatterplot layer to the deckgl widget</h2><span id='topic+add_scatterplot_layer'></span>

<h3>Description</h3>

<p>The <code>ScatterplotLayer</code> takes in paired latitude and longitude coordinated points
and renders them as circles with a certain radius.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_scatterplot_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "scatterplot-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_scatterplot_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_scatterplot_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_scatterplot_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_scatterplot_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_scatterplot_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/scatterplot-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/scatterplot-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("bart_stations")

properties &lt;- list(
  getPosition = ~lng + lat,
  getRadius = "@=Math.sqrt(exits)", #JS("data =&gt; Math.sqrt(data.exits)"),
  radiusScale = 6,
  getFillColor = "@=code === 'LF' ? 'white': 'red'", #c(255, 140, 20),
  tooltip = "{{name}}"
)

deck &lt;- deckgl(zoom = 10.5, pitch = 35) %&gt;%
  add_scatterplot_layer(data = bart_stations, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Scatterplot Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_screen_grid_layer'>Add a screen grid layer to the deckgl widget</h2><span id='topic+add_screen_grid_layer'></span>

<h3>Description</h3>

<p>The <code>ScreenGridLayer</code> takes in an array of latitude and longitude coordinated points,
aggregates them into histogram bins and renders as a grid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_screen_grid_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "screen-grid-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_screen_grid_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_screen_grid_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_screen_grid_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_screen_grid_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_screen_grid_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/screen-grid-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/screen-grid-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr screen-grid-layer
data("sf_bike_parking")

properties &lt;- list(
  opacity = 0.8,
  cellSizePixels = 50,
  colorRange = RColorBrewer::brewer.pal(6, "Blues"),
  getPosition = ~lng + lat,
  getWeight = ~spaces
)

deck &lt;- deckgl() %&gt;%
  add_screen_grid_layer(data = sf_bike_parking, properties = properties) %&gt;%
  add_basemap() %&gt;%
  add_control("Screen Grid Layer")

if (interactive()) deck
</code></pre>

<hr>
<h2 id='add_source'>Add a data source to the deckgl widget</h2><span id='topic+add_source'></span>

<h3>Description</h3>

<p>Add a data source to the deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_source(deckgl, id, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_source_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_source_+3A_id">id</code></td>
<td>
<p>The unique id of the source.</p>
</td></tr>
<tr><td><code id="add_source_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data("bart_stations")

deckgl() %&gt;%
  add_source("bart-stations", bart_stations) %&gt;%
  add_scatterplot_layer(
    source = "bart-stations",
    getPosition = ~lng + lat,
    getFillColor = "steelblue",
    getRadius = 50,
    radiusScale = 6
  ) %&gt;%
  add_text_layer(
    source = "bart-stations",
    getPosition = ~lng + lat,
    getText = ~name,
    getSize = 15,
    sizeScale = 1.5,
    getColor = "white"
  ) %&gt;%
  add_basemap()
</code></pre>

<hr>
<h2 id='add_source_as_dep'>Add source as JavaScript dep</h2><span id='topic+add_source_as_dep'></span>

<h3>Description</h3>

<p>Add source as JavaScript dep
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_source_as_dep(deckgl, id, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_source_as_dep_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_source_as_dep_+3A_id">id</code></td>
<td>
<p>The unique id of the source.</p>
</td></tr>
<tr><td><code id="add_source_as_dep_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
</table>

<hr>
<h2 id='add_text_layer'>Add a text layer to the deckgl widget</h2><span id='topic+add_text_layer'></span>

<h3>Description</h3>

<p>The <code>TextLayer</code> renders text labels on the map using texture mapping.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_text_layer(
  deckgl,
  data = NULL,
  properties = list(),
  ...,
  id = "text-layer"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_text_layer_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="add_text_layer_+3A_data">data</code></td>
<td>
<p>The url to fetch data from or a data object.</p>
</td></tr>
<tr><td><code id="add_text_layer_+3A_properties">properties</code></td>
<td>
<p>A named list of properties with names corresponding to the properties defined
in the <a href="https://deck.gl/#/documentation/deckgl-api-reference">deckgl-api-reference</a>
for the given layer class. The <code>properties</code> parameter can also be an empty list. In this case
all props must be passed as named arguments.</p>
</td></tr>
<tr><td><code id="add_text_layer_+3A_...">...</code></td>
<td>
<p>Named arguments that will be added to the <code>properties</code> object. Identical parameters
are overwritten.</p>
</td></tr>
<tr><td><code id="add_text_layer_+3A_id">id</code></td>
<td>
<p>The unique id of the layer.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/layers/text-layer">https://deck.gl/#/documentation/deckgl-api-reference/layers/text-layer</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## @knitr text-layer
data("bart_stations")

deck &lt;- deckgl(zoom = 10, pitch = 35) %&gt;%
  add_text_layer(
    data = bart_stations,
    pickable = TRUE,
    getPosition = ~lng + lat,
    getText = ~name,
    getSize = 15,
    getAngle = 0,
    getTextAnchor = "middle",
    getAlignmentBaseline = "center",
    tooltip = "{{name}}&lt;br/&gt;{{address}}"
  ) %&gt;%
  add_basemap(use_carto_style("voyager"))

if (interactive()) deck
</code></pre>

<hr>
<h2 id='bart_segments'>bart segments</h2><span id='topic+bart_segments'></span>

<h3>Description</h3>

<p>bart segments
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bart_segments
</code></pre>


<h3>Format</h3>

<p>tibble with 45 rows and 8 variables:
</p>

<dl>
<dt>inbound</dt><dd><p>number of inbound trips</p>
</dd>
<dt>outbound</dt><dd><p>number of outbound trips</p>
</dd>
<dt>from_name</dt><dd><p>name of source station </p>
</dd>
<dt>from_lng</dt><dd><p>longitude of source station</p>
</dd>
<dt>from_lat</dt><dd><p>latitude of source station</p>
</dd>
<dt>to_name</dt><dd><p>name of target station</p>
</dd>
<dt>to_lng</dt><dd><p>longitude of target station</p>
</dd>
<dt>to_lat</dt><dd><p>latitude of target station</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-segments.json">https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-segments.json</a>
</p>

<hr>
<h2 id='bart_stations'>bart stations</h2><span id='topic+bart_stations'></span>

<h3>Description</h3>

<p>bart stations
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bart_stations
</code></pre>


<h3>Format</h3>

<p>tibble with 44 rows and 7 variables:
</p>

<dl>
<dt>name</dt><dd><p>station name</p>
</dd>
<dt>code</dt><dd><p>two-letter station code</p>
</dd>
<dt>address</dt><dd><p>address</p>
</dd>
<dt>entries</dt><dd><p>number of entries</p>
</dd>
<dt>exits</dt><dd><p>number of exits</p>
</dd>
<dt>lng</dt><dd><p>longitude</p>
</dd>
<dt>lat</dt><dd><p>latitude</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-stations.json">https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/bart-stations.json</a>
</p>

<hr>
<h2 id='deckgl'>Create a deckgl widget</h2><span id='topic+deckgl'></span>

<h3>Description</h3>

<p>Create a deckgl widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deckgl(
  latitude = 37.8,
  longitude = -122.45,
  zoom = 12,
  pitch = 0,
  bearing = 0,
  initial_view_state = NULL,
  views = NULL,
  width = NULL,
  height = NULL,
  element_id = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deckgl_+3A_latitude">latitude</code></td>
<td>
<p>The latitude of the initial view state.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_longitude">longitude</code></td>
<td>
<p>The longitude of the initial view state.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_zoom">zoom</code></td>
<td>
<p>The zoom level of the initial view state.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_pitch">pitch</code></td>
<td>
<p>The pitch of the initial view state.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_bearing">bearing</code></td>
<td>
<p>The bearing of the initial view state.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_initial_view_state">initial_view_state</code></td>
<td>
<p>The initial view state.
If set, other view state arguments (<code>longitude</code>, <code>latidude</code> et cetera) are ignored.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_views">views</code></td>
<td>
<p>A single <code>View</code>, or an array of <code>View</code> instances.
If not supplied, a single <code>MapView</code> will be created.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_width">width</code></td>
<td>
<p>The width of the widget.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_height">height</code></td>
<td>
<p>The height of the widget.</p>
</td></tr>
<tr><td><code id="deckgl_+3A_element_id">element_id</code></td>
<td>
<p>The explicit id of the widget (usually not needed).</p>
</td></tr>
<tr><td><code id="deckgl_+3A_...">...</code></td>
<td>
<p>Optional properties that are passed to the <code>deck</code> instance.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>deckgl widget
</p>


<h3>See Also</h3>

<p><a href="https://deck.gl/#/documentation/deckgl-api-reference/deck">https://deck.gl/#/documentation/deckgl-api-reference/deck</a> for optional properties
that can be passed to the <code>deck</code> instance.
</p>

<hr>
<h2 id='deckgl_proxy'>Create a deckgl proxy object</h2><span id='topic+deckgl_proxy'></span>

<h3>Description</h3>

<p>Creates a deckgl-like object that can be used to update a deckgl object that has already been rendered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deckgl_proxy(shinyId, session = shiny::getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deckgl_proxy_+3A_shinyid">shinyId</code></td>
<td>
<p>single-element character vector indicating the output ID of the
deck to modify</p>
</td></tr>
<tr><td><code id="deckgl_proxy_+3A_session">session</code></td>
<td>
<p>the <code>Shiny</code> session object to which the deckgl widget belongs;
usually the default value will suffice.</p>
</td></tr>
</table>

<hr>
<h2 id='deckgl-shiny'>Shiny bindings for deckgl</h2><span id='topic+deckgl-shiny'></span><span id='topic+deckglOutput'></span><span id='topic+renderDeckgl'></span>

<h3>Description</h3>

<p>Output and render functions for using deckgl within Shiny
applications and interactive Rmd documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>deckglOutput(outputId, width = "100%", height = "400px")

renderDeckgl(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="deckgl-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="deckgl-shiny_+3A_width">width</code>, <code id="deckgl-shiny_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like <code>'100%'</code>,
<code>'400px'</code>, <code>'auto'</code>) or a number, which will be coerced to a
string and have <code>'px'</code> appended.</p>
</td></tr>
<tr><td><code id="deckgl-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a deckgl</p>
</td></tr>
<tr><td><code id="deckgl-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="deckgl-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>

<hr>
<h2 id='does_it_work'>Check if everything works fine</h2><span id='topic+does_it_work'></span>

<h3>Description</h3>

<p>Check if everything works fine
</p>


<h3>Usage</h3>

<pre><code class='language-R'>does_it_work(token = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="does_it_work_+3A_token">token</code></td>
<td>
<p>mapbox API access token</p>
</td></tr>
</table>

<hr>
<h2 id='encode_icon_atlas'>Encode atlas image to base64</h2><span id='topic+encode_icon_atlas'></span>

<h3>Description</h3>

<p>Encode atlas image to base64
</p>


<h3>Usage</h3>

<pre><code class='language-R'>encode_icon_atlas(filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="encode_icon_atlas_+3A_filename">filename</code></td>
<td>
<p>The filename of the atlas image.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>base64 encoded atlas image
</p>

<hr>
<h2 id='get_color_to_rgb_array'>Create a getColor data accessor</h2><span id='topic+get_color_to_rgb_array'></span>

<h3>Description</h3>

<p>Creates a JS method to retrieve the color of each object.
The method parses the HEX color property of the data object to an rgb color array.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_color_to_rgb_array(color_property)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_color_to_rgb_array_+3A_color_property">color_property</code></td>
<td>
<p>property name of data object containing the HEX color</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JavaScript code evaluated on the client-side
</p>

<hr>
<h2 id='get_data'>Get data</h2><span id='topic+get_data'></span>

<h3>Description</h3>

<p>EXPERIMENTAL, usually used in conjunction with <a href="#topic+add_data">add_data</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data(var_name = "thanksForAllTheFish")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_data_+3A_var_name">var_name</code></td>
<td>
<p>JavaScript variable name</p>
</td></tr>
</table>

<hr>
<h2 id='get_first_element'>Create a data accessor retrieving the first element of an array</h2><span id='topic+get_first_element'></span>

<h3>Description</h3>

<p>Create a data accessor retrieving the first element of an array
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_first_element(property_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_first_element_+3A_property_name">property_name</code></td>
<td>
<p>property name of data object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JavaScript code evaluated on the client-side
</p>

<hr>
<h2 id='get_last_element'>Create a data accessor retrieving the last element of an array</h2><span id='topic+get_last_element'></span>

<h3>Description</h3>

<p>Create a data accessor retrieving the last element of an array
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_last_element(property_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_last_element_+3A_property_name">property_name</code></td>
<td>
<p>property name of data object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JavaScript code evaluated on the client-side
</p>

<hr>
<h2 id='get_position'>Create a getPosition data accessor</h2><span id='topic+get_position'></span>

<h3>Description</h3>

<p>Creates a JS method to retrieve the position of each object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_position(latitude = NULL, longitude = NULL, coordinates = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_position_+3A_latitude">latitude</code></td>
<td>
<p>latitude property of data object</p>
</td></tr>
<tr><td><code id="get_position_+3A_longitude">longitude</code></td>
<td>
<p>longitude property of data object</p>
</td></tr>
<tr><td><code id="get_position_+3A_coordinates">coordinates</code></td>
<td>
<p>coordinates property of data object
(in this case <code>latitude</code> and <code>longitude</code> parameters are ignored)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JavaScript code evaluated on the client-side
</p>

<hr>
<h2 id='get_property'>Create a data accessor</h2><span id='topic+get_property'></span>

<h3>Description</h3>

<p>Creates a JS method to retrieve a given property of each object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_property(property_name)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_property_+3A_property_name">property_name</code></td>
<td>
<p>property name of data object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JavaScript code evaluated on the client-side
</p>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic+JS'></span><span id='topic+onRender'></span><span id='topic++25+3E+25'></span><span id='topic++25+3C+3E+25'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>htmlwidgets</dt><dd><p><code><a href="htmlwidgets.html#topic+JS">JS</a></code>, <code><a href="htmlwidgets.html#topic+onRender">onRender</a></code></p>
</dd>
<dt>magrittr</dt><dd><p><code><a href="magrittr.html#topic+compound">%&lt;&gt;%</a></code>, <code><a href="magrittr.html#topic+pipe">%&gt;%</a></code></p>
</dd>
</dl>

<hr>
<h2 id='set_view_state'>Set the view state of the map</h2><span id='topic+set_view_state'></span>

<h3>Description</h3>

<p>Set the view state of the map
</p>


<h3>Usage</h3>

<pre><code class='language-R'>set_view_state(
  deckgl,
  latitude = 37.8,
  longitude = -122.45,
  zoom = 12,
  pitch = 0,
  bearing = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="set_view_state_+3A_deckgl">deckgl</code></td>
<td>
<p>A deckgl widget object.</p>
</td></tr>
<tr><td><code id="set_view_state_+3A_latitude">latitude</code></td>
<td>
<p>The latitude of the view state.</p>
</td></tr>
<tr><td><code id="set_view_state_+3A_longitude">longitude</code></td>
<td>
<p>The longitude of the view state.</p>
</td></tr>
<tr><td><code id="set_view_state_+3A_zoom">zoom</code></td>
<td>
<p>The zoom level of the view state.</p>
</td></tr>
<tr><td><code id="set_view_state_+3A_pitch">pitch</code></td>
<td>
<p>The pitch of the view state.</p>
</td></tr>
<tr><td><code id="set_view_state_+3A_bearing">bearing</code></td>
<td>
<p>The bearing of the view state.</p>
</td></tr>
</table>

<hr>
<h2 id='sf_bike_parking'>sf bike parking</h2><span id='topic+sf_bike_parking'></span>

<h3>Description</h3>

<p>sf bike parking
</p>


<h3>Usage</h3>

<pre><code class='language-R'>sf_bike_parking
</code></pre>


<h3>Format</h3>

<p>tibble with 2520 rows and 5 variables:
</p>

<dl>
<dt>address</dt><dd><p>address</p>
</dd>
<dt>racks</dt><dd><p>number of racks</p>
</dd>
<dt>spaces</dt><dd><p>number of spaces</p>
</dd>
<dt>lng</dt><dd><p>longitude</p>
</dd>
<dt>lat</dt><dd><p>latidude</p>
</dd>
</dl>



<h3>Source</h3>

<p><a href="https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/sf-bike-parking.json">https://raw.githubusercontent.com/uber-common/deck.gl-data/master/website/sf-bike-parking.json</a>
</p>

<hr>
<h2 id='update_deckgl'>Send commands to a deckgl instance in a <code>Shiny</code> app</h2><span id='topic+update_deckgl'></span>

<h3>Description</h3>

<p>Send commands to a deckgl instance in a <code>Shiny</code> app
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_deckgl(proxy, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_deckgl_+3A_proxy">proxy</code></td>
<td>
<p>deckgl proxy object</p>
</td></tr>
<tr><td><code id="update_deckgl_+3A_...">...</code></td>
<td>
<p>unused</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><a href="#topic+deckgl_proxy">deckgl_proxy</a>
</p>

<hr>
<h2 id='use_carto_style'>Use a Carto style</h2><span id='topic+use_carto_style'></span>

<h3>Description</h3>

<p>Use a Carto style
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_carto_style(theme = "dark-matter")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_carto_style_+3A_theme">theme</code></td>
<td>
<p>The theme of the style, <code>dark-matter</code>, <code>positron</code> or <code>voyager</code>.</p>
</td></tr>
</table>

<hr>
<h2 id='use_contour_definition'>Create a contour definition</h2><span id='topic+use_contour_definition'></span>

<h3>Description</h3>

<p>Create a contour definition
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_contour_definition(
  threshold = 1,
  color = c(255, 255, 255),
  stroke_width = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_contour_definition_+3A_threshold">threshold</code></td>
<td>
<p>The threshold value used in contour generation.</p>
</td></tr>
<tr><td><code id="use_contour_definition_+3A_color">color</code></td>
<td>
<p>The RGB color array used to render contour lines.</p>
</td></tr>
<tr><td><code id="use_contour_definition_+3A_stroke_width">stroke_width</code></td>
<td>
<p>The width of the contour lines in pixels.</p>
</td></tr>
</table>

<hr>
<h2 id='use_default_icon_properties'>Use default icon properties</h2><span id='topic+use_default_icon_properties'></span>

<h3>Description</h3>

<p>Returns icon properties with default values for <code>iconAtlas</code>, <code>iconMapping</code>
and <code>getIcon</code>, so that the default icon is used.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_default_icon_properties(
  sizeScale = 15,
  getSize = 5,
  getColor = c(240, 140, 0)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_default_icon_properties_+3A_sizescale">sizeScale</code></td>
<td>
<p>icon size multiplier</p>
</td></tr>
<tr><td><code id="use_default_icon_properties_+3A_getsize">getSize</code></td>
<td>
<p>height of each object (in pixels),
if a number is provided, it is used as the size for all objects,
if a function is provided, it is called on each object to retrieve its size</p>
</td></tr>
<tr><td><code id="use_default_icon_properties_+3A_getcolor">getColor</code></td>
<td>
<p>rgba color of each object,
if an array is provided, it is used as the color for all objects
if a function is provided, it is called on each object to retrieve its color</p>
</td></tr>
</table>

<hr>
<h2 id='use_icon_definition'>Create an icon definition on an atlas image</h2><span id='topic+use_icon_definition'></span>

<h3>Description</h3>

<p>Create an icon definition on an atlas image
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_icon_definition(
  x = 0,
  y = 0,
  width = 128,
  height = 128,
  anchor_x = (width/2),
  anchor_y = 128,
  mask = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_icon_definition_+3A_x">x</code></td>
<td>
<p>The x position of the icon on the atlas image.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_y">y</code></td>
<td>
<p>The y position of the icon on the atlas image.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_width">width</code></td>
<td>
<p>The width of the icon on the atlas image.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_height">height</code></td>
<td>
<p>The height of the icon on the atlas image.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_anchor_x">anchor_x</code></td>
<td>
<p>The horizontal position of the icon anchor.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_anchor_y">anchor_y</code></td>
<td>
<p>the vertical position of the icon anchor.</p>
</td></tr>
<tr><td><code id="use_icon_definition_+3A_mask">mask</code></td>
<td>
<p>whether icon is treated as a transparency mask,
if <code>TRUE</code>, user defined color is applied,
if <code>FALSE</code>, pixel color from the image is applied</p>
</td></tr>
</table>

<hr>
<h2 id='use_tooltip'>Create a tooltip property</h2><span id='topic+use_tooltip'></span>

<h3>Description</h3>

<p>Create a tooltip property
</p>


<h3>Usage</h3>

<pre><code class='language-R'>use_tooltip(html, style, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="use_tooltip_+3A_html">html</code></td>
<td>
<p>The <code>innerHTML</code> of the element.</p>
</td></tr>
<tr><td><code id="use_tooltip_+3A_style">style</code></td>
<td>
<p>A <code>cssText</code> string that will modefiy the default style of the element.</p>
</td></tr>
<tr><td><code id="use_tooltip_+3A_...">...</code></td>
<td>
<p>not used</p>
</td></tr>
</table>


<h3>Tooltip template Syntax</h3>

<p>The tooltip string is a <em>mustache</em> template in which variable names are identified
by the double curly brackets (<em>mustache</em> tags) that surround them. The variable names available to the
template are given by deck.gls <code>pickingInfo.object</code> and vary by layer.
</p>


<h3>See Also</h3>

<p><a href="https://github.com/janl/mustache.js">mustache</a> for a complete syntax overwiew.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("bart_segments")

props &lt;- list(
  tooltip = use_tooltip(
    html = "{{from_name}} to {{to_name}}",
    style = "background: steelBlue; border-radius: 5px;"
  )
)

# The picking object of the hexagon layer offers
# a property that contains the list of points of the hexagon.
# You can iterate over this list as shown below.
data("sf_bike_parking")

html = "
  &lt;p&gt;{{position.0}}, {{position.1}}&lt;p&gt;
  &lt;p&gt;Count: {{points.length}}&lt;/p&gt;
  &lt;p&gt;{{#points}}&lt;div&gt;{{address}}&lt;/div&gt;{{/points}}&lt;/p&gt;
"
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
