<!DOCTYPE html><html><head><title>Help for package LeafArea</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {LeafArea}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#eximg'><p>Utility function</p></a></li>
<li><a href='#find.ij'><p>Checking a path to ImageJ</p></a></li>
<li><a href='#LeafArea-package'><p>LeafArea: Rapid digital image analysis of leaf area</p></a></li>
<li><a href='#leafdata'><p>LeafArea default data</p></a></li>
<li><a href='#readtext.ij'><p>File management</p></a></li>
<li><a href='#resmerge.ij'><p>File management</p></a></li>
<li><a href='#run.ij'><p>Automated leaf area analysis</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Rapid Digital Image Analysis of Leaf Area</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.8</td>
</tr>
<tr>
<td>Date:</td>
<td>2019-07-03</td>
</tr>
<tr>
<td>Author:</td>
<td>Masatoshi Katabuchi &lt;mattocci27@gmail.com&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Masatoshi Katabuchi &lt;mattocci27@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An interface for the image processing program 'ImageJ', which
    allows a rapid digital image analysis for particle sizes. This package includes
    function to write an 'ImageJ' macro which is optimized for a leaf area analysis by
    default.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, utils</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>ImageJ (&gt;=1.48), ij.jar (see
http://imagej.nih.gov/ij/), Java (&gt;=1.6.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/mattocci27/LeafArea/issues">https://github.com/mattocci27/LeafArea/issues</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mattocci27/LeafArea">https://github.com/mattocci27/LeafArea</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2019-07-03 08:33:49 UTC; mattocci</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2019-07-03 09:01:43 UTC</td>
</tr>
</table>
<hr>
<h2 id='eximg'>Utility function</h2><span id='topic+eximg'></span>

<h3>Description</h3>

<p>Exports sample image files to R temporary directory and returns a path to the sample image files. This function is only used in the example of <code><a href="#topic+run.ij">run.ij</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eximg()
</code></pre>


<h3>Value</h3>

<p>Jpeg files to the R temporary directory and a path to the sample image files.
</p>


<h3>Author(s)</h3>

<p>Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+run.ij">run.ij</a></code> which this function wraps
</p>

<hr>
<h2 id='find.ij'>Checking a path to ImageJ</h2><span id='topic+find.ij'></span>

<h3>Description</h3>

<p>Check if ImageJ is installed in the correct directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>find.ij(ostype = .Platform$OS.type)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="find.ij_+3A_ostype">ostype</code></td>
<td>
<p>the Operating system types.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When ImageJ, including ij.jar and Java, is not installed in the common location, users need to specify the path to ImageJ in <code><a href="#topic+run.ij">run.ij</a></code>.
</p>


<h3>Value</h3>

<p>A path for ImageJ application. On unix this will always be 
&quot;/Applications/ImageJ/&quot;. On Windows this will always be &quot;C:\Program Files\ImageJ\&quot;.
</p>


<h3>Author(s)</h3>

<p>Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>

<hr>
<h2 id='LeafArea-package'>LeafArea: Rapid digital image analysis of leaf area</h2><span id='topic+LeafArea'></span><span id='topic+LeafArea-package'></span>

<h3>Description</h3>

<p>The package LeafArea allows one to conveniently run ImageJ software within R. The package provides a user-friendly, automated tool for measuring leaf area from digital images. For more information on ImageJ, see the ImageJ User Guide, which is available <a href="http://imagej.nih.gov/ij/">http://imagej.nih.gov/ij/</a>.
</p>


<h3>Details</h3>

<p>The key function in this package is <code><a href="#topic+run.ij">run.ij</a></code>, which analyzes multiple leaf images in the target directory and generates multiple data frame objects that include leaf area from each leaf image, and then processes and combines these data frame objects into a single data frame object that is convenient for subsequent analyses.
</p>
<p>If ImageJ fails to recognize leaf images, users can manually guide the image analysis for particular images through ImageJ GUI (See the ImageJ user guide 30.1 Measure...[m], <a href="http://imagej.nih.gov/ij/docs/guide/user-guide.pdf">http://imagej.nih.gov/ij/docs/guide/user-guide.pdf</a>). The results for these manually-analyzed images will still be handled by the file management function <code><a href="#topic+resmerge.ij">resmerge.ij</a></code>.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>


<h3>References</h3>

<p>Rasband, W.S., ImageJ, U. S. National Institutes of Health, Bethesda, Maryland, USA,  <a href="http://imagej.nih.gov/ij/">http://imagej.nih.gov/ij/</a>, 1997-2014.
</p>
<p>Schneider, C.A., Rasband, W.S., Eliceiri, K.W. &quot;NIH Image to ImageJ: 25 years of image analysis&quot;. Nature Methods 9, 671-675, 2012.
</p>
<p>Abramoff, M.D., Magalhaes, P.J., Ram, S.J. &quot;Image Processing with ImageJ&quot;.
Biophotonics International, volume 11, issue 7, pp. 36-42, 2004. (This article is available <a href="https://www.researchgate.net/publication/228334776_Image_Processing_with_Image">https://www.researchgate.net/publication/228334776_Image_Processing_with_Image</a>.)
#'
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/mattocci27/LeafArea">https://github.com/mattocci27/LeafArea</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/mattocci27/LeafArea/issues">https://github.com/mattocci27/LeafArea/issues</a>
</p>
</li></ul>


<hr>
<h2 id='leafdata'>LeafArea default data</h2><span id='topic+leafdata'></span>

<h3>Description</h3>

<p>Analyzed leaf area data for example
</p>


<h3>Usage</h3>

<pre><code class='language-R'>leafdata
</code></pre>


<h3>Format</h3>

<p>A list with six data frames, A1-01.jpeg.txt, A1-02.jpeg.txt, A123-01.jpeg.txt, A123-02.jpeg.txt, A2.jpeg.txt and A300-1.jpeg.txt. The first column is the identity of image, the second column is the area of the image (cm2) and the thrid column is the perimeter of the image (cm).</p>

<hr>
<h2 id='readtext.ij'>File management</h2><span id='topic+readtext.ij'></span>

<h3>Description</h3>

<p>Read multiple tab-delimited text files with a leaf area and perimeter value (one text file for each original JPEG image file) generated by ImageJ.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readtext.ij(path)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readtext.ij_+3A_path">path</code></td>
<td>
<p>Path to the target directory</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data frame of leaf area for each image
</p>
<table>
<tr><td><code>area</code></td>
<td>
<p>Leaf area of the image (cm2)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+run.ij">run.ij</a></code>, <code><a href="#topic+resmerge.ij">resmerge.ij</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#prepare example files
data(leafdata)
tf &lt;- paste(tempdir(), "/", sep = "")
for (i in 1:7){
	write.table(leafdata[[i]],paste(tf,names(leafdata)[i],sep=""),sep="\t")
}

#list of files
list.files(tf)

readtext.ij(tf)

unlink(list.files(tf))
</code></pre>

<hr>
<h2 id='resmerge.ij'>File management</h2><span id='topic+resmerge.ij'></span>

<h3>Description</h3>

<p>File management function. The output file contains sample names in the first column and total leaf area (cm2) of the sample (e.g., one individual plant or one ramet) in the second column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resmerge.ij(path, prefix = "\\.|-")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="resmerge.ij_+3A_path">path</code></td>
<td>
<p>Path to the target directory</p>
</td></tr>
<tr><td><code id="resmerge.ij_+3A_prefix">prefix</code></td>
<td>
<p>Regular expression to manage file names</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of total leaf area for each sample
</p>
<table>
<tr><td><code>sample</code></td>
<td>
<p>Name of sample</p>
</td></tr>
<tr><td><code>total.leaf.area</code></td>
<td>
<p>Total leaf area of the sample (cm2)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>#prepare example files
data(leafdata)
tf &lt;- paste(tempdir(),"/",sep="")
for (i in 1:7){
	write.table(leafdata[[i]],paste(tf,names(leafdata)[i],sep=""),sep="\t")
}

#list of files
list.files(tf)

#combine multiple tab-delimited text files with a leaf area value
#(one text file for each original JPEG image file) that share the same
#filename 'prefix', defined as the part of the filename preceding the first
#hyphen (-) or period (.).
resmerge.ij(tf)

#combine multiple tab-delimited text files with a leaf area value
#(one text file for each original JPEG image file) that share the same
#filename 'prefix', defined as the part of the filename preceding the first
#'.txt'.
resmerge.ij(tf, prefix = ".txt")

unlink(list.files(tf))
</code></pre>

<hr>
<h2 id='run.ij'>Automated leaf area analysis</h2><span id='topic+run.ij'></span>

<h3>Description</h3>

<p>Analyzes leaf area in the target directory automatically, and returns a 
data frame that contains sample names in the first column and total leaf 
area (cm2) of the sample (e.g., one individual plant or one ramet) in the 
second column. Note that 'run.ij' does not count the number of leaves in 
each image; therefore if the user requires the number of leaves per image, 
the user must record these values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>run.ij(path.imagej = NULL, set.memory = 4, set.directory,
  distance.pixel = 826, known.distance = 21, trim.pixel = 20,
  low.circ = 0, upper.circ = 1, low.size = 0.7,
  upper.size = "Infinity", prefix = "\\.|-", log = F,
  check.image = F, save.image = F)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="run.ij_+3A_path.imagej">path.imagej</code></td>
<td>
<p>Path to ImageJ. Default uses C:/Program Files/ImageJ 
for Windows, and /Applications/ImageJ for Mac. Linux always needs to 
specify the path to ImageJ</p>
</td></tr>
<tr><td><code id="run.ij_+3A_set.memory">set.memory</code></td>
<td>
<p>Set memory (GB) for image analysis (default = 4).</p>
</td></tr>
<tr><td><code id="run.ij_+3A_set.directory">set.directory</code></td>
<td>
<p>Set directory that contains leaf images. For example, 
when the directory named 'leaf_data' is on desktop of Mac, the path can be 
specified as: set.directory = '~/Desktop/leaf_data'. For Windows: 
set.directory = 'C:/Users/&lt;users name&gt;/Desktop/leaf_data'. No default. The 
path to the target directory that contains leaf images should always be 
specified. Note that spaces in file or directory names are not allowed.</p>
</td></tr>
<tr><td><code id="run.ij_+3A_distance.pixel">distance.pixel</code></td>
<td>
<p>Number of pixels for the known distance. When leaf 
images were captured in A4 image size with 100 ppi, the pixel density is 
roughly equal to 826 pixels per 21 cm. In this case, the calibration scale 
can be specified as distance.pixel = 826, known.distance = 21.</p>
</td></tr>
<tr><td><code id="run.ij_+3A_known.distance">known.distance</code></td>
<td>
<p>Known distance (cm). See distance.pixel.</p>
</td></tr>
<tr><td><code id="run.ij_+3A_trim.pixel">trim.pixel</code></td>
<td>
<p>Number of pixels removed from edges in the analysis. The 
edges of images are often shaded, which can affect image analysis (i.e., 
ImageJ may recognize the shaded area as leaf area). The edges of images can 
be removed by specifying the number of pixels (default = 20).</p>
</td></tr>
<tr><td><code id="run.ij_+3A_low.circ">low.circ</code></td>
<td>
<p>Lower limit for circularity for the image analysis. When 
the user wants to remove angular objects (e.g., cut petioles, square papers 
for scale) from the images, the analyzed lower limit of circularity can be 
increased (default = 0).</p>
</td></tr>
<tr><td><code id="run.ij_+3A_upper.circ">upper.circ</code></td>
<td>
<p>Upper limit for circularity for the image analysis 
(default = 1). See low.circ.</p>
</td></tr>
<tr><td><code id="run.ij_+3A_low.size">low.size</code></td>
<td>
<p>Lower limit for size for the image analysis. Leaf images 
often contain dirt and dust. To prevent dust from affecting the image analysis, 
the lower limit of analyzed size can be increased (default = 0.7).</p>
</td></tr>
<tr><td><code id="run.ij_+3A_upper.size">upper.size</code></td>
<td>
<p>Upper limit for size for the image analysis (default = 
Infinity').</p>
</td></tr>
<tr><td><code id="run.ij_+3A_prefix">prefix</code></td>
<td>
<p>Regular expression to manage file names. The 'run.ij' combines 
the leaf area of all images that share the same filename 'prefix', defined 
as the part of the filename preceding the first hyphen (-) or period (.) 
that may occur (no hyphen or period is required). For example, the areas of 
leaf images named A123-1.jpeg, A123-2.jpeg, and A123-3.jpeg would be 
combined into a single total leaf area (A123). This feature allows the user 
to treat multiple images as belonging to a single sample, if desired 
(default = '\\.|-').</p>
</td></tr>
<tr><td><code id="run.ij_+3A_log">log</code></td>
<td>
<p>Should mean leaf areas of each single image kept? 
(default = FALSE)</p>
</td></tr>
<tr><td><code id="run.ij_+3A_check.image">check.image</code></td>
<td>
<p>Whether to display analyzed images by using ImageJ 
software (default = FALSE). When you choose check.image = TRUE, press any 
keys to close ImageJ. Note that when check.image = TRUE, the analysis would 
take considerable time. Note this option may only work on R console.</p>
</td></tr>
<tr><td><code id="run.ij_+3A_save.image">save.image</code></td>
<td>
<p>Whether to save analyzed images (default = FALSE).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame of total leaf area for each sample.
</p>
<table>
<tr><td><code>sample</code></td>
<td>
<p>Name of sample</p>
</td></tr>
<tr><td><code>total.leaf.area</code></td>
<td>
<p>Total leaf area of the sample (cm2)</p>
</td></tr>
</table>
<p>If you choose log= T, the 'run.ij' function also returns a list of 
data frames of leaf area for each image.
</p>
<table>
<tr><td><code>area</code></td>
<td>
<p>Area of the sample (cm2)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Masatoshi Katabuchi <a href="mailto:mattocci27@gmail.com">mattocci27@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+resmerge.ij">resmerge.ij</a></code>, <code><a href="#topic+readtext.ij">readtext.ij</a></code>, <code><a href="#topic+eximg">eximg</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># As long as ImageJ application, including `ij.jar` and java, is installed 
# in the following directory,
# you do not have to specify the path to ImageJ
# /Applications/ImageJ &lt;Mac&gt;
# C:/Program Files/ImageJ &lt;Windows&gt;
# Linux always needs to specify the path to the directory that contains `ij.jar`.
# For example, path = "~/ImageJ"

# prepare the target directory that contains example image files
ex.dir &lt;- eximg()
list.files(ex.dir)

#run automated images analysis
run.ij(set.directory = ex.dir, save.image = TRUE)

# note: in this example, analyzed images are exported to a temporary
# directory, which will be eventually deleted.
# If you choose your home directory as the target directory,
# analyzed images will be exported to it.
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
