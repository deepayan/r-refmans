<!DOCTYPE html><html lang="en"><head><title>Help for package RadEro</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {RadEro}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#RadEro'><p>RadEro: Physically Based Compartmental Model for 137Cs Analysis and Soil Redistribution Rates Estimation</p></a></li>
<li><a href='#plot'><p>Plot of experimental and simulated profile inventories</p></a></li>
<li><a href='#RadEro_example'><p>Copy Example Files from Package Data Directory to a Specified Directory</p></a></li>
<li><a href='#RadEro_run'><p>Starts conversion model for soil redistribution</p></a></li>
<li><a href='#resample_config'><p>Resample Configuration Data</p></a></li>
<li><a href='#resample_data'><p>Resample Input Data</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Cs-137 Conversion Model</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-11-18</td>
</tr>
<tr>
<td>Description:</td>
<td>A straightforward model to estimate soil migration rates across various soil contexts. 
	Based on the compartmental, vertically-resolved, physically-based mass balance model of Soto and Navas (2004) 
	&lt;<a href="https://doi.org/10.1016%2Fj.jaridenv.2004.02.003">doi:10.1016/j.jaridenv.2004.02.003</a>&gt; and Soto and Navas (2008) &lt;<a href="https://doi.org/10.1016%2Fj.radmeas.2008.02.024">doi:10.1016/j.radmeas.2008.02.024</a>&gt;.
	'RadEro' provides a user-friendly interface in R, utilizing input data such as 137Cs inventories and parameters directly derived 
	from soil samples (e.g., fine fraction density, effective volume) to accurately capture the 137Cs distribution within the soil profile. 
	The model simulates annual 137Cs fallout, radioactive decay, and vertical diffusion, with the diffusion coefficient calculated 
	from 137Cs reference inventory profiles. Additionally, it allows users to input custom parameters as calibration coefficients. 
	The RadEro user manual and protocol, including detailed instructions on how to format input data and configuration files, can be found at the following link: <a href="https://github.com/eead-csic-eesa/RadEro">https://github.com/eead-csic-eesa/RadEro</a>.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.3.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Rcpp (&ge; 1.0.11), dplyr (&ge; 1.1.4), roxygen2 (&ge; 7.2.3),
usethis (&ge; 2.2.2), jsonlite (&ge; 1.8.7), data.table (&ge;
1.14.8), devtools (&ge; 2.4.5), ggplot2 (&ge; 3.4.4), patchwork (&ge;
1.1.3), utils (&ge; 4.3.1), stats (&ge; 4.3.1)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-11-18 16:01:34 UTC; artur</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Arturo Catala [aut, cre],
  Borja Latorre [aut, ctb, cph],
  Leticia Gaspar [aut],
  Ana Navas [aut],
  Dave Gamble [ctb] (Author of the cJSON.h library)</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Arturo Catala &lt;radero@eead.csic.es&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-11-18 23:50:25 UTC</td>
</tr>
</table>
<hr>
<h2 id='RadEro'>RadEro: Physically Based Compartmental Model for 137Cs Analysis and Soil Redistribution Rates Estimation</h2><span id='topic+RadEro-package'></span><span id='topic+RadEro'></span>

<h3>Description</h3>

<p>RadEro is a straightforward model to estimate soil migration rates across various soil contexts. Building on the compartmental, vertically-resolved, physically-based mass balance model of Soto and Navas (2004, 2008), RadEro is accessible as a user-friendly R package. Input data, including 137Cs inventories and parameters directly derived from soil samples (e.g., fine fraction density, effective volume), accurately capture 137Cs distribution within the soil profile. The model simulates annual 137Cs fallout, radioactive decay, and vertical diffusion, using a diffusion coefficient derived from 137Cs reference inventory profiles. RadEro also accommodates user-defined parameters as calibration coefficients. The package, code, and test data are openly accessible for widespread use.
</p>


<h3>Value</h3>

<p>A &quot;results&quot; folder containing for each analyzed profile: a) ID_plot.png: Experimental (blue) and simulated (red) inventory depth profile plots; b) ID_tempfile: Experimental inventory (Bq /kg1) per cell unit in the defined profile depth; c) results.txt: Summary file with columns for ID, migration rate (e), erosion rate (m), diffusion coefficients (k and kv), total experimental inventory, and total simulated inventory; d) Additionally, a &quot;temp&quot; folder for advanced users is created for each profile, containing configuration and inventory files related to individual analyses.
</p>


<h3>Author(s)</h3>


<ul>
<li><p> Arturo Catala (<a href="https://orcid.org/0009-0008-7996-1870">ORCID</a>)
</p>
</li>
<li><p> Borja Latorre (<a href="https://orcid.org/0000-0002-6720-3326">ORCID</a>)
</p>
</li>
<li><p> Leticia Gaspar (<a href="https://orcid.org/0000-0002-3473-7110">ORCID</a>)
</p>
</li>
<li><p> Ana Navas (<a href="https://orcid.org/0000-0002-4724-7532">ORCID</a>)
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li> <p><a href="https://github.com/eead-csic-eesa/RadEro">GitHub repository</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>

# Step 1: RadEro requires a specific structure for data and configuration files.
# The "RadEro_examples" function creates sample files (.csv and .js)
# in the specified output directory.

RadEro_example()
# These files can be used as templates for user projects.

# Step 2: Run the model with the example files and define the output directory.

RadEro_run(data = "input-data_example.csv",
           config = "input-config_example.js")


</code></pre>

<hr>
<h2 id='plot'>Plot of experimental and simulated profile inventories</h2><span id='topic+plot'></span>

<h3>Description</h3>

<p>The &quot;plot&quot; function generates two plots for each profile defined in the input data: one representing the experimental inventory and the other representing the simulated inventory. This function is automatically executed when you run RadEro_run. It creates a &quot;results&quot; folder in the current directory if it does not already exist.
</p>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plot_+3A_data1">data1</code></td>
<td>
<p>Character. Read input data in CSV format.</p>
</td></tr>
<tr><td><code id="plot_+3A_data2">data2</code></td>
<td>
<p>Filtered values of data1 for the current 'id'.</p>
</td></tr>
<tr><td><code id="plot_+3A_dir1">dir1</code></td>
<td>
<p>directory. Temporary working directory where the '_num.txt' and '_exp.txt' files were created.</p>
</td></tr>
<tr><td><code id="plot_+3A_dir2">dir2</code></td>
<td>
<p>directory. Current working directory.</p>
</td></tr>
<tr><td><code id="plot_+3A_axismaxvalue">AxisMaxValue</code></td>
<td>
<p>daximum value to determine the x axis limit. Only used if the user wants to escalate all the simulated profiles .</p>
</td></tr>
<tr><td><code id="plot_+3A_cell_value">cell_value</code></td>
<td>
<p>Unit cell size in meters.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;results&quot; folder in &quot;dir2&quot; containing &quot;n&quot; plots saved as PNG files, where &quot;n&quot; corresponds to the number of &quot;id&quot; entries defined in &quot;data2&quot;. Additionally, a summary TXT file is saved in the results folder.
</p>

<hr>
<h2 id='RadEro_example'>Copy Example Files from Package Data Directory to a Specified Directory</h2><span id='topic+RadEro_example'></span>

<h3>Description</h3>

<p>This function copies example files (e.g., .js and .csv) from the &quot;data&quot; directory of the package to a specified working directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RadEro_example(target_dir = NULL, overwrite = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RadEro_example_+3A_target_dir">target_dir</code></td>
<td>
<p>The path to the directory where the files will be copied.</p>
</td></tr>
<tr><td><code id="RadEro_example_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Whether to overwrite the files if they already exist in the target directory (default is TRUE).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function uses &quot;system.file()&quot; to locate the example files within the package's &quot;data&quot; directory and copies them to a directory of your choice using &quot;file.copy()&quot;.
</p>


<h3>Value</h3>

<p>This function generates two template files in the specified directory: one for data input and another for configuration input. These templates serve as examples, demonstrating how to construct and format the input files.
</p>

<hr>
<h2 id='RadEro_run'>Starts conversion model for soil redistribution</h2><span id='topic+RadEro_run'></span>

<h3>Description</h3>

<p>Initiates the model based on the Cs137 inventory data from soil profiles according to the specified configuration in the working directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RadEro_run(data, config, AxisMaxValue = NULL, output_dir = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RadEro_run_+3A_data">data</code></td>
<td>
<p>A data frame containing the Cs137 inventory data from soil profiles. It must be located in the working directory.</p>
</td></tr>
<tr><td><code id="RadEro_run_+3A_config">config</code></td>
<td>
<p>A list or configuration file that defines the parameters for the model run. It must be located in the working directory.</p>
</td></tr>
<tr><td><code id="RadEro_run_+3A_axismaxvalue">AxisMaxValue</code></td>
<td>
<p>Optional. A numeric value specifying the maximum value for the axes in the plot. Defaults to NULL.</p>
</td></tr>
<tr><td><code id="RadEro_run_+3A_output_dir">output_dir</code></td>
<td>
<p>The directory where the output files will be saved. Defaults to a temporary directory.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A &quot;results&quot; folder containing for each analyzed profile: a) ID_plot.png: Experimental (blue) and simulated (red) inventory depth profile plots; b) ID_tempfile: Experimental inventory (Bq/kg) per cell unit in the defined profile depth; c) results.txt: Summary file with columns for ID, migration rate (e), erosion rate (m), diffusion coefficients (k and kv), total experimental inventory, and total simulated inventory; d) Additionally, a &quot;temp&quot; folder for advanced users is created for each profile, containing configuration and inventory files related to individual analyses.
</p>

<hr>
<h2 id='resample_config'>Resample Configuration Data</h2><span id='topic+resample_config'></span>

<h3>Description</h3>

<p>&quot;resample_config&quot; adjusts and modifies a input configuration file based on the input data. The function resamples, filters and restructures data according to the parameters passed in the configuration file. It also interacts with a directory specified by the user for output.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resample_config(data2, config1, dir1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resample_config_+3A_data2">data2</code></td>
<td>
<p>Input data by ID. The input data to be resampled or transformed.</p>
</td></tr>
<tr><td><code id="resample_config_+3A_config1">config1</code></td>
<td>
<p>Input configuration. Configuration details that dictate how the data should be processed, including resampling methods, filters, and other transformation rules.</p>
</td></tr>
<tr><td><code id="resample_config_+3A_dir1">dir1</code></td>
<td>
<p>Temporal directory. Path to the folder where output config file should be saved.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes three arguments: a dataset (&quot;data2&quot;), a configuration object (&quot;config1&quot;), and a directory path (&quot;dir1&quot;). The function applies resampling methods to the data as specified by &quot;config1&quot;. The resampled data is typically saved to the provided directory.
</p>


<h3>Value</h3>

<p>A modified version of &quot;config1&quot; named &quot;_config.js&quot; that will be read by the C model.
</p>

<hr>
<h2 id='resample_data'>Resample Input Data</h2><span id='topic+resample_data'></span>

<h3>Description</h3>

<p>&quot;resample_data&quot; processes the data based on predefined rules before being read by the C model, and saves the output in a specified directory.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resample_data(data2, dir1)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resample_data_+3A_data2">data2</code></td>
<td>
<p>Input data by ID. The input dataset to be resampled or transformed.</p>
</td></tr>
<tr><td><code id="resample_data_+3A_dir1">dir1</code></td>
<td>
<p>Temporal directory. Path to the folder where the resampled data will be saved.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function takes two arguments: a dataset (&quot;data2&quot;) and the temporal directory path (&quot;dir1&quot;).
</p>


<h3>Value</h3>

<p>A resampled version of &quot;data2&quot; named &quot;_exp.txt&quot; saved in the directory specified by &quot;dir1.&quot;
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
