<!DOCTYPE html><html><head><title>Help for package tableeasy</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tableeasy}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#div_custom'><p>Split a Variable by Custom Values</p></a></li>
<li><a href='#div_quantile'><p>Split a Variable by Quantile Statistics</p></a></li>
<li><a href='#ensure_factor'><p>Ensure Factor Variable in Data Set</p></a></li>
<li><a href='#smooth_curve'><p>Smooth Curve</p></a></li>
<li><a href='#table1'><p>Table 1</p></a></li>
<li><a href='#table2'><p>Table 2</p></a></li>
<li><a href='#table3'><p>Table 3</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Tables of Clinical Study</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.2</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates some tables of clinical study. 'Table 1' is created by table1() to describe baseline characteristics, which is essential in every clinical study. Created by table2(), the function of 'Table 2' is to explore influence factors. And 'Table 3' created by table3() is able to make stratified analysis.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>Imports:</td>
<td>survival, stats, lmtest, mgcv, nortest, tableone</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-04-08 01:04:00 UTC; mac</td>
</tr>
<tr>
<td>Author:</td>
<td>Jian Hang Zheng [aut, cre],
  Yong Qi Chen [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jian Hang Zheng &lt;1040854241@qq.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-04-08 02:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='div_custom'>Split a Variable by Custom Values</h2><span id='topic+div_custom'></span>

<h3>Description</h3>

<p>Split a continuous variable by custom values. Converts a continuous variable to a categorical variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>div_custom(var, div, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="div_custom_+3A_var">var</code></td>
<td>
<p>A string. A variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="div_custom_+3A_div">div</code></td>
<td>
<p>A numeric vector. The variable can be split into at least two levels by custom values.</p>
</td></tr>
<tr><td><code id="div_custom_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##
div_custom(var = 'age',div = c(40,60),data = pbc)
</code></pre>

<hr>
<h2 id='div_quantile'>Split a Variable by Quantile Statistics</h2><span id='topic+div_quantile'></span>

<h3>Description</h3>

<p>Split a continuous variable by quantile statistics. Converts a continuous variable to a categorical variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>div_quantile(var, div, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="div_quantile_+3A_var">var</code></td>
<td>
<p>A string. A variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="div_quantile_+3A_div">div</code></td>
<td>
<p>A positive integer greater than 1 or a vector of integers. If a positive integer greater than 1, it is the number of factor levels when the variable is split by quantile statistics. If a vector of integers, it is the strategy of grouping x by quantile statistics and then merging groups.</p>
</td></tr>
<tr><td><code id="div_quantile_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A factor variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##
div_quantile(var = 'age', div = 5, data = pbc)
div_quantile(var = 'age', div = c(2,3), data = pbc)
</code></pre>

<hr>
<h2 id='ensure_factor'>Ensure Factor Variable in Data Set</h2><span id='topic+ensure_factor'></span>

<h3>Description</h3>

<p>Ensure that factor variables in data set are of the correct type.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ensure_factor(data, execute = FALSE, threshold_factor = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ensure_factor_+3A_data">data</code></td>
<td>
<p>A data frame.</p>
</td></tr>
<tr><td><code id="ensure_factor_+3A_execute">execute</code></td>
<td>
<p>Bool, default <code>= FALSE</code>. If TRUE, then output data frame.</p>
</td></tr>
<tr><td><code id="ensure_factor_+3A_threshold_factor">threshold_factor</code></td>
<td>
<p>An integer, default <code>= 5</code>. Criteria to judge as factor type. When a variable has more than <code>threshold_factor</code> unique values, it is considered continuous.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list containing data frame and description.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##
ensure_factor(pbc)

ensure_factor(pbc,execute=TRUE)[['message']]
pbc_exe &lt;- ensure_factor(pbc,execute=TRUE)[['data']]
</code></pre>

<hr>
<h2 id='smooth_curve'>Smooth Curve</h2><span id='topic+smooth_curve'></span>

<h3>Description</h3>

<p>Draw smooth curves. The four regression methods include general linear regression, logistic regression, conditional logistic regression and cox proportional hazards regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>smooth_curve(
  x,
  y,
  data,
  y_time = NULL,
  strata = NULL,
  adj = c(),
  fx = FALSE,
  k = c(),
  split_var = NULL,
  div = c()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="smooth_curve_+3A_x">x</code></td>
<td>
<p>A string. The independent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_y">y</code></td>
<td>
<p>A string. The dependent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_y_time">y_time</code></td>
<td>
<p>A string. The survival time variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_strata">strata</code></td>
<td>
<p>A string. The paired variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_adj">adj</code></td>
<td>
<p>A vector of strings, default = <code>c()</code>. Moderator variables to be summarized given as a character vector.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_fx">fx</code></td>
<td>
<p>Bool, default <code>= FALSE</code>.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_k">k</code></td>
<td>
<p>A vector of integers, default <code>= c()</code>. Degree of freedom, It only works when <code>fx = TRUE</code>.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_split_var">split_var</code></td>
<td>
<p>A string, default <code>= NULL</code>. The split variables to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="smooth_curve_+3A_div">div</code></td>
<td>
<p>A numeric vector, default <code>= c()</code>. It only works when split_var is a continuous variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object about smooth curve.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##The censored data is not discussed here
pbc_full &lt;- subset(pbc,status!=0)
pbc_full$status &lt;- pbc_full$status-1
## Make categorical variables factors
varsToFactor &lt;- c('status','trt','ascites','hepato','spiders','edema','stage','sex')
pbc_full[varsToFactor] &lt;- lapply(pbc_full[varsToFactor], factor)

## Moderator variables
adj_pbc &lt;- c('age','alk.phos','ast')

## Smooth curve of General linear regression:
gam &lt;- smooth_curve(x='albumin',
                    y='bili',
                    adj=adj_pbc,
                    data=pbc_full)
plot(gam$gam,se=TRUE,rug=TRUE,shift=gam$shift)


## Smooth curve of logistic regression:
gam &lt;- smooth_curve(x = 'albumin',
                    y = 'status',
                    adj = adj_pbc,
                    split_var ='age',
                    div = c(45),
                    data = pbc_full)
plot(gam$gam[[1]],se=FALSE,rug=TRUE,xlim=c(2,4.5),ylab = 'Adjusted ln ORs for death')
oldpar &lt;- par(new=TRUE)
plot(gam$gam[[2]],se=FALSE,rug=TRUE,xlim=c(2,4.5),ylab = 'Adjusted ln ORs for death',lty=2)
on.exit(par(oldpar))

## Smooth curve of conditional logistic regression:
pbc_full &lt;- data.frame(pbc_full,'ytime'=1)
gam &lt;- smooth_curve(x ='albumin',
                    y_time = 'ytime',
                    y = 'status',
                    adj = adj_pbc,
                    strata = 'trt',
                    data = pbc_full)

termplot(gam,term =c(1),col.term ="black",col.se = "black",se=TRUE,rug=FALSE,
           ylab="Log ORs for death")

## Smooth curve of Cox proportional hazards regression:
gam &lt;- smooth_curve(x ='albumin',
                    y_time = 'time',
                    y = 'status',
                    adj = adj_pbc,
                    data = pbc_full)
termplot(gam,term =c(1),col.term ="black",col.se = "black",se=TRUE,rug=FALSE)
</code></pre>

<hr>
<h2 id='table1'>Table 1</h2><span id='topic+table1'></span>

<h3>Description</h3>

<p>Create an object summarizing all baseline variables ( both continuous and categorical ). The function is improved on the basis of tableone::CreateTableOne to become more convenient to use.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table1(
  var,
  strata,
  data,
  normal = c("age", "bmi", "sbp", "dbp"),
  catDigits = 1,
  contDigits = 1,
  pDigits = 3,
  showAllLevels = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table1_+3A_var">var</code></td>
<td>
<p>A vector of strings. Variables to be summarized given as a character vector.</p>
</td></tr>
<tr><td><code id="table1_+3A_strata">strata</code></td>
<td>
<p>A vector of strings. Stratifying (grouping) variable name(s) given as a character vector.</p>
</td></tr>
<tr><td><code id="table1_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
<tr><td><code id="table1_+3A_normal">normal</code></td>
<td>
<p>A vector of strings, default <code>= c("age", "bmi", "sbp", "dbp")</code>. Show the mean and standard deviation of some variables.</p>
</td></tr>
<tr><td><code id="table1_+3A_catdigits">catDigits</code></td>
<td>
<p>An integer, Number of decimal places in the table of continuous variables.</p>
</td></tr>
<tr><td><code id="table1_+3A_contdigits">contDigits</code></td>
<td>
<p>An integer, Number of decimal places in the table of categorical variables.</p>
</td></tr>
<tr><td><code id="table1_+3A_pdigits">pDigits</code></td>
<td>
<p>An integer, Number of decimal places in the table of p values.</p>
</td></tr>
<tr><td><code id="table1_+3A_showalllevels">showAllLevels</code></td>
<td>
<p>Bool, default <code>= FALSE</code>. If TRUE, the table contains all levels of categorical variables.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object describing baseline characteristics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
## Make categorical variables factors
varsToFactor &lt;- c('status','trt','ascites','hepato','spiders','edema','stage','sex')
pbc[varsToFactor] &lt;- lapply(pbc[varsToFactor], factor)
##Table 1
table1(var=c('age','albumin','alk.phos','ast','edema','ascites','bili','chol'),strata='trt',pbc)
</code></pre>

<hr>
<h2 id='table2'>Table 2</h2><span id='topic+table2'></span>

<h3>Description</h3>

<p>' Table 2 ' was created through regression analysis to research influence factor. The four regression methods include general linear regression, logistic regression, conditional logistic regression and cox proportional hazards regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table2(
  x,
  y,
  data,
  y_time = NULL,
  strata = NULL,
  adj = c(),
  div = list(),
  div_num = list(),
  ref = c(),
  ref_num = c(),
  continuous = FALSE,
  case = 2,
  method = "general",
  outformat = 2
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table2_+3A_x">x</code></td>
<td>
<p>A string. The independent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="table2_+3A_y">y</code></td>
<td>
<p>A string. The dependent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="table2_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
<tr><td><code id="table2_+3A_y_time">y_time</code></td>
<td>
<p>A string. The survival time variable to be summarized given as a string. It only works when <code>method = "cox"</code>.</p>
</td></tr>
<tr><td><code id="table2_+3A_strata">strata</code></td>
<td>
<p>A string. The paired variable to be summarized given as a string. It only works when <code>method = "con_logistic"</code>.</p>
</td></tr>
<tr><td><code id="table2_+3A_adj">adj</code></td>
<td>
<p>A vector of strings, default = <code>c()</code>. Moderator variables to be summarized given as a character vector.</p>
</td></tr>
<tr><td><code id="table2_+3A_div">div</code></td>
<td>
<p>A list containing Positive int greater than 1 or integer vector, If a positive integer greater than 1, it is the number of factor levels when x is split by quantile statistics. If a vector of integers, it is the strategy of grouping x by quantile statistics and then merging groups.</p>
</td></tr>
<tr><td><code id="table2_+3A_div_num">div_num</code></td>
<td>
<p>A list containing numeric vectors, Elements in the list are custom values, and x can be split into at least two levels by elements in the list.</p>
</td></tr>
<tr><td><code id="table2_+3A_ref">ref</code></td>
<td>
<p>A vector of integers. The control level of factor levels when x is split by quantile statistics.</p>
</td></tr>
<tr><td><code id="table2_+3A_ref_num">ref_num</code></td>
<td>
<p>A vector of integers. The control level of factor levels when x is split by custom values.</p>
</td></tr>
<tr><td><code id="table2_+3A_continuous">continuous</code></td>
<td>
<p>Bool, default <code>= FALSE</code>. If default, then does not output the result when the independent variable is regarded as a continuous variable.</p>
</td></tr>
<tr><td><code id="table2_+3A_case">case</code></td>
<td>
<p>A vector of integers, default <code>= 2</code>. The case level of y.</p>
</td></tr>
<tr><td><code id="table2_+3A_method">method</code></td>
<td>
<p>(<code>"general"</code>, <code>"logistic"</code>, <code>"con_logistic"</code>, <code>"cox"</code>), default <code>= "general"</code>.</p>
</td></tr>
<tr><td><code id="table2_+3A_outformat">outformat</code></td>
<td>
<p><code>1</code> or <code>2</code>, default <code>= 2</code>, Output format. It only works when <code>method = "general"</code>. The table ouput mean(sd) when <code>outformat=1</code> and ouput median(IQR) when <code>outformat=2</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object researching influence factor.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##The censored data is not discussed here
pbc_full &lt;- subset(pbc,status!=0)
pbc_full$status &lt;- pbc_full$status-1
## Make categorical variables factors
varsToFactor &lt;- c('status','trt','ascites','hepato','spiders','edema','stage','sex')
pbc_full[varsToFactor] &lt;- lapply(pbc_full[varsToFactor], factor)

## Moderator variables
adj_pbc &lt;- c('age','alk.phos','ast')

## General linear regression:
table2(x = 'albumin', y = 'bili',
       adj = c(), data = pbc_full,
       div = list(5,c(2,3)), div_num = list(c(3.2,4)),
       ref = c(2,1), ref_num = c(2),
       outformat = 2)

## Logistic regression:
table2(x ='albumin', y = 'status',
       adj = adj_pbc, data = pbc_full,
       div = list(5,c(2,3)),
       method ='logistic')

## Conditional logistic regression:
table2(x = 'albumin', y = 'status', strata = 'trt',
       adj = adj_pbc, data = pbc_full,
       div = list(5,c(2,3)),
       method = 'con_logistic')

## Cox proportional hazards regression:
table2(x = 'albumin', y = 'status', y_time = 'time',
       adj = adj_pbc, data = pbc_full,
       div = list(5,c(2,3)),
       method = 'cox')
</code></pre>

<hr>
<h2 id='table3'>Table 3</h2><span id='topic+table3'></span>

<h3>Description</h3>

<p>Creates 'Table 3' which is about stratified analysis. The three regression methods include general linear regression, logistic regression and cox proportional hazards regression.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>table3(
  x,
  y,
  data,
  split_var,
  y_time = NULL,
  adj = c(),
  split_div = list(),
  outformat = 4,
  method = "general"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="table3_+3A_x">x</code></td>
<td>
<p>A string. The independent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="table3_+3A_y">y</code></td>
<td>
<p>A string. The dependent variable to be summarized given as a string.</p>
</td></tr>
<tr><td><code id="table3_+3A_data">data</code></td>
<td>
<p>A data frame in which these variables exist.</p>
</td></tr>
<tr><td><code id="table3_+3A_split_var">split_var</code></td>
<td>
<p>A vector of strings. Strata variables to be summarized given as a character vector.</p>
</td></tr>
<tr><td><code id="table3_+3A_y_time">y_time</code></td>
<td>
<p>A string. The survival time variable to be summarized given as a string. It only works when <code>method = "cox"</code>.</p>
</td></tr>
<tr><td><code id="table3_+3A_adj">adj</code></td>
<td>
<p>A vector of strings, default = <code>c()</code>. Moderator variables to be summarized given as a character vector.</p>
</td></tr>
<tr><td><code id="table3_+3A_split_div">split_div</code></td>
<td>
<p>A list containing numeric vectors or a vector of integers that are summarized given as a string, default <code>= list()</code>. If default, it represents the strata variables are split by median or it is itself a categorical variable. If the element of list is a numeric vector, it represents the strata variables are split by custom values. And if the element of list is a vector of integers that are summarized given as a string, it represents the strata variables are split by quantile statistics.</p>
</td></tr>
<tr><td><code id="table3_+3A_outformat">outformat</code></td>
<td>
<p><code>1</code> or <code>2</code> or <code>3</code> or <code>4</code>, default <code>= 4</code>. Output format.</p>
</td></tr>
<tr><td><code id="table3_+3A_method">method</code></td>
<td>
<p>(<code>"general"</code>, <code>"logistic"</code>, <code>"cox"</code>), default <code>= "general"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object about stratified analysis.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Load Mayo Clinic Primary Biliary Cirrhosis Data
library(survival)
library(tableeasy)
data(pbc)
## Check variables
head(pbc)
##The censored data is not discussed here
pbc_full &lt;- subset(pbc,status!=0)
pbc_full$status &lt;- pbc_full$status-1
## Make categorical variables factors
varsToFactor &lt;- c('status','trt','ascites','hepato','spiders','edema','stage','sex')
pbc_full[varsToFactor] &lt;- lapply(pbc_full[varsToFactor], factor)

## Moderator variables
adj_pbc &lt;- c('age','alk.phos','ast')
## Converts the continuous variables named 'albumin' to a categorical variable named 'albumin_2'.
albumin_2 &lt;- div_quantile('albumin',div = c(2),pbc_full)
pbc_full &lt;- data.frame(pbc_full,'albumin_2' = albumin_2)

## General linear regression:
table3(x = 'albumin_2', y = 'bili',
       adj = c(), data = pbc_full,
       split_var = c('age','alk.phos','ast','trt'), split_div = list(),
       outformat = 1)

## Logistic regression:
table3(x = 'albumin_2', y = 'status',
       adj = adj_pbc, data = pbc_full,
       split_var = c('age','alk.phos','ast','trt'), split_div = list(c('2','3'),c('3')),
       outformat = 2,method = 'logistic')

## Cox proportional hazards regression:
table3(x = 'albumin_2',y = 'status',y_time = 'time',
       adj = adj_pbc,data = pbc_full,
       split_var = c('age','alk.phos','ast','trt'), split_div = list(c(45),c(1500,1700),c(),c()),
       outformat = 3,method = 'cox')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
