<!DOCTYPE html><html><head><title>Help for package oppr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {oppr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#+25T+26gt+3B+25'><p>Tee operator</p></a></li>
<li><a href='#action_names'><p>Action names</p></a></li>
<li><a href='#add_absolute_targets'><p>Add absolute targets</p></a></li>
<li><a href='#add_binary_decisions'><p>Add binary decisions</p></a></li>
<li><a href='#add_default_solver'><p>Add a default solver</p></a></li>
<li><a href='#add_feature_weights'><p>Add feature weights</p></a></li>
<li><a href='#add_gurobi_solver'><p>Add a <span class="pkg">Gurobi</span> solver</p></a></li>
<li><a href='#add_heuristic_solver'><p>Add a heuristic solver</p></a></li>
<li><a href='#add_locked_in_constraints'><p>Add locked in constraints</p></a></li>
<li><a href='#add_locked_out_constraints'><p>Add locked out constraints</p></a></li>
<li><a href='#add_lpsolveapi_solver'><p>Add a lp_solve solver with <span class="pkg">lpSolveAPI</span></p></a></li>
<li><a href='#add_lsymphony_solver'><p>Add a SYMPHONY solver with <span class="pkg">lpsymphony</span></p></a></li>
<li><a href='#add_manual_locked_constraints'><p>Add manually specified locked constraints</p></a></li>
<li><a href='#add_manual_targets'><p>Add manual targets</p></a></li>
<li><a href='#add_max_phylo_div_objective'><p>Add maximum phylogenetic diversity objective</p></a></li>
<li><a href='#add_max_richness_objective'><p>Add maximum richness objective</p></a></li>
<li><a href='#add_max_targets_met_objective'><p>Add maximum targets met objective</p></a></li>
<li><a href='#add_min_set_objective'><p>Add minimum set objective</p></a></li>
<li><a href='#add_random_solver'><p>Add a random solver</p></a></li>
<li><a href='#add_relative_targets'><p>Add relative targets</p></a></li>
<li><a href='#add_rsymphony_solver'><p>Add a SYMPHONY solver with <span class="pkg">Rsymphony</span></p></a></li>
<li><a href='#array_parameters'><p>Array parameters</p></a></li>
<li><a href='#ArrayParameter-class'><p>Array parameter prototype</p></a></li>
<li><a href='#as.Id'><p>Coerce object to another object</p></a></li>
<li><a href='#as.list.OptimizationProblem'><p>Convert <code>OptimizationProblem</code> to list</p></a></li>
<li><a href='#branch_matrix'><p>Branch matrix</p></a></li>
<li><a href='#Collection-class'><p>Collection prototype</p></a></li>
<li><a href='#compile'><p>Compile a problem</p></a></li>
<li><a href='#Constraint-class'><p>Constraint prototype</p></a></li>
<li><a href='#constraints'><p>Project prioritization problem constraints</p></a></li>
<li><a href='#Decision-class'><p>Decision prototype</p></a></li>
<li><a href='#decisions'><p>Specify the type of decisions</p></a></li>
<li><a href='#feature_names'><p>Feature names</p></a></li>
<li><a href='#is.Id'><p>Is it?</p></a></li>
<li><a href='#matrix_parameters'><p>Matrix parameters</p></a></li>
<li><a href='#misc_parameter'><p>Miscellaneous parameter</p></a></li>
<li><a href='#MiscParameter-class'><p>Miscellaneous parameter prototype</p></a></li>
<li><a href='#new_id'><p>Identifier</p></a></li>
<li><a href='#new_optimization_problem'><p>Optimization problem</p></a></li>
<li><a href='#new_waiver'><p>Waiver</p></a></li>
<li><a href='#number_of_actions'><p>Number of actions</p></a></li>
<li><a href='#number_of_features'><p>Number of features</p></a></li>
<li><a href='#number_of_projects'><p>Number of projects</p></a></li>
<li><a href='#Objective-class'><p>Objective prototype</p></a></li>
<li><a href='#objectives'><p>Problem objective</p></a></li>
<li><a href='#oppr'><p>oppr: Optimal Project Prioritization</p></a></li>
<li><a href='#OptimizationProblem-class'><p>Optimization problem class</p></a></li>
<li><a href='#OptimizationProblem-methods'><p>Optimization problem methods</p></a></li>
<li><a href='#Parameter-class'><p>Parameter class</p></a></li>
<li><a href='#parameters'><p>Parameters</p></a></li>
<li><a href='#Parameters-class'><p>Parameters class</p></a></li>
<li><a href='#plot_feature_persistence'><p>Plot a bar plot to visualize a project prioritization</p></a></li>
<li><a href='#plot_phylo_persistence'><p>Plot a phylogram to visualize a project prioritization</p></a></li>
<li><a href='#plot.ProjectProblem'><p>Plot a solution to a project prioritization problem</p></a></li>
<li><a href='#pproto'><p>Create a new <code>pproto</code> object</p></a></li>
<li><a href='#print'><p>Print</p></a></li>
<li><a href='#problem'><p>Project prioritization problem</p></a></li>
<li><a href='#project_cost_effectiveness'><p>Project cost effectiveness</p></a></li>
<li><a href='#project_names'><p>Project names</p></a></li>
<li><a href='#ProjectModifier-class'><p>Conservation problem modifier prototype</p></a></li>
<li><a href='#ProjectProblem-class'><p>Project problem class</p></a></li>
<li><a href='#replacement_costs'><p>Replacement cost</p></a></li>
<li><a href='#scalar_parameters'><p>Scalar parameters</p></a></li>
<li><a href='#ScalarParameter-class'><p>Scalar parameter prototype</p></a></li>
<li><a href='#show'><p>Show</p></a></li>
<li><a href='#sim_data'><p>Simulated data</p></a></li>
<li><a href='#simulate_ppp_data'><p>Simulate data for the 'Project Prioritization Protocol'</p></a></li>
<li><a href='#simulate_ptm_data'><p>Simulate data for 'Priority threat management'</p></a></li>
<li><a href='#solution_statistics'><p>Solution statistics</p></a></li>
<li><a href='#solve'><p>Solve</p></a></li>
<li><a href='#Solver-class'><p>Solver prototype</p></a></li>
<li><a href='#solvers'><p>Problem solvers</p></a></li>
<li><a href='#Target-class'><p>Target prototype</p></a></li>
<li><a href='#targets'><p>Targets</p></a></li>
<li><a href='#tibble-methods'><p>Manipulate tibbles</p></a></li>
<li><a href='#Weight-class'><p>Weight prototype</p></a></li>
<li><a href='#weights'><p>Weights</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.4</td>
</tr>
<tr>
<td>Title:</td>
<td>Optimal Project Prioritization</td>
</tr>
<tr>
<td>Description:</td>
<td>A decision support tool for prioritizing conservation projects.
    Prioritizations can be developed by maximizing expected feature richness,
    expected phylogenetic diversity, the number of features that meet
    persistence targets, or identifying a set of projects that meet persistence
    targets for minimal cost. Constraints (e.g. lock in specific actions) and
    feature weights can also be specified to further customize prioritizations.
    After defining a project prioritization problem, solutions can be obtained
    using exact algorithms, heuristic algorithms, or random processes. In
    particular, it is recommended to install the 'Gurobi' optimizer (available
    from <a href="https://www.gurobi.com">https://www.gurobi.com</a>) because it can identify optimal solutions
    very quickly. Finally, methods are provided for comparing different
    prioritizations and evaluating their benefits. For more information, see
    Hanson et al. (2019) &lt;<a href="https://doi.org/10.1111%2F2041-210X.13264">doi:10.1111/2041-210X.13264</a>&gt;.</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, methods, stats, Matrix, magrittr (&ge; 1.5), uuid (&ge;
0.1.2), proto (&ge; 1.0.0), cli (&ge; 1.0.1), assertthat (&ge;
0.2.0), tibble (&ge; 2.0.0), ape (&ge; 5.2), tidytree (&ge; 0.3.3),
ggplot2 (&ge; 3.0.0), viridisLite (&ge; 0.3.0), lpSolveAPI (&ge;
5.5.2.0.17), withr (&ge; 2.4.1),</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat (&ge; 2.0.0), knitr (&ge; 1.20), roxygen2 (&ge; 6.1.0),
rmarkdown (&ge; 1.10), gurobi (&ge; 8.0.0), Rsymphony (&ge; 0.1.28),
ggtree (&ge; 2.4.2), lpsymphony (&ge; 1.10.0), shiny (&ge; 1.2.0),
rhandsontable (&ge; 0.3.7), tidyr (&ge; 0.8.2)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.4.0)</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp (&ge; 0.12.19), RcppArmadillo (&ge; 0.9.100.5.0),
RcppProgress (&ge; 0.4.1)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>C++11</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://prioritizr.github.io/oppr/">https://prioritizr.github.io/oppr/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/prioritizr/oppr/issues">https://github.com/prioritizr/oppr/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.1</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>Collate:</td>
<td>'internal.R' 'pproto.R' 'Parameter-proto.R'
'ArrayParameter-proto.R' 'MiscParameter-proto.R'
'Parameters-proto.R' 'ScalarParameter-proto.R' 'parameters.R'
'waiver.R' 'ProjectModifier-proto.R' 'Constraint-proto.R'
'Collection-proto.R' 'Decision-proto.R' 'Id.R'
'Objective-proto.R' 'OptimizationProblem-proto.R'
'OptimizationProblem-methods.R' 'ProjectProblem-proto.R'
'RcppExports.R' 'Solver-proto.R' 'Target-proto.R'
'Weight-proto.R' 'action_names.R' 'add_absolute_targets.R'
'add_binary_decisions.R' 'add_default_solver.R'
'add_feature_weights.R' 'add_gurobi_solver.R'
'add_heuristic_solver.R' 'add_locked_in_constraints.R'
'add_locked_out_constraints.R' 'add_lpsolveapi_solver.R'
'add_lpsymphony_solver.R' 'tbl_df.R' 'add_manual_targets.R'
'add_manual_locked_constraints.R'
'add_max_phylo_div_objective.R' 'star_phylogeny.R'
'add_max_richness_objective.R'
'add_max_targets_met_objective.R' 'add_min_set_objective.R'
'add_random_solver.R' 'add_relative_targets.R'
'add_rsymphony_solver.R' 'branch_matrix.R' 'compile.R'
'constraints.R' 'data.R' 'decisions.R' 'feature_names.R'
'magrittr-operators.R' 'misc.R' 'new_optimization_problem.R'
'number_of_actions.R' 'number_of_features.R'
'number_of_projects.R' 'objectives.R' 'package.R'
'solution_statistics.R' 'plot.R' 'plot_feature_persistence.R'
'plot_phylo_persistence.R' 'predefined_optimization_problem.R'
'print.R' 'problem.R' 'project_cost_effectiveness.R'
'project_names.R' 'rake_phylogeny.R' 'replacement_costs.R'
'show.R' 'simulate_ppp_data.R' 'simulate_ptm_data.R' 'solve.R'
'solvers.R' 'targets.R' 'weights.R' 'zzz.R'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-09-07 01:16:45 UTC; jeff</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeffrey O Hanson <a href="https://orcid.org/0000-0002-4716-6134"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Richard Schuster <a href="https://orcid.org/0000-0003-3191-7869"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Matthew Strimas-Mackey
    <a href="https://orcid.org/0000-0001-8929-7776"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Joseph R Bennett <a href="https://orcid.org/0000-0002-3901-9513"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeffrey O Hanson &lt;jeffrey.hanson@uqconnect.edu.au&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-09-08 11:00:24 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span><span id='topic+pipe'></span>

<h3>Description</h3>

<p>This package uses the pipe operator (<code style="white-space: pre;">&#8288;%&gt;%&#8288;</code>) to express nested code
as a series of imperative procedures.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code>, <code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>An object and a function.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="magrittr.html#topic+pipe">magrittr::%&gt;%()</a></code>, <code><a href="#topic+tee">tee()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(500)

# generate 100 random numbers and calculate the mean
mean(runif(100))

# reset the seed
set.seed(500)

# repeat the previous procedure but use the pipe operator instead of nesting
# function calls inside each other.
runif(100) %&gt;% mean()

</code></pre>

<hr>
<h2 id='+25T+26gt+3B+25'>Tee operator</h2><span id='topic++25T+3E+25'></span><span id='topic+tee'></span>

<h3>Description</h3>

<p>This package uses the &quot;tee&quot; operator (<code style="white-space: pre;">&#8288;%T&gt;%&#8288;</code>) to modify objects.
</p>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25T+2B26gt+2B3B+2B25_+3A_lhs">lhs</code>, <code id="+2B25T+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>An object and a function.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="magrittr.html#topic+tee">magrittr::%T&gt;%()</a></code>, <code><a href="#topic+pipe">pipe()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the tee operator returns the left-hand side of the result and can be
# useful when dealing with mutable objects. In this example we want
# to use the function "f" to modify the object "e" and capture the
# result

# create an empty environment
e &lt;- new.env()

# create a function to modify an environment and return NULL
f &lt;- function(x) {x$a &lt;- 5; return(NULL)}

# if we use the pipe operator we won't capture the result since "f"()
# returns a NULL
e2 &lt;- e %&gt;% f()
print(e2)

# but if we use the tee operator then the result contains a copy of "e"
e3 &lt;- e %T&gt;% f()
print(e3)

</code></pre>

<hr>
<h2 id='action_names'>Action names</h2><span id='topic+action_names'></span><span id='topic+action_names+2CProjectProblem-method'></span>

<h3>Description</h3>

<p>Extract the names of the actions in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>action_names(x)

## S4 method for signature 'ProjectProblem'
action_names(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="action_names_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> action names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print action names
action_names(p)
</code></pre>

<hr>
<h2 id='add_absolute_targets'>Add absolute targets</h2><span id='topic+add_absolute_targets'></span><span id='topic+add_absolute_targets+2CProjectProblem+2Cnumeric-method'></span><span id='topic+add_absolute_targets+2CProjectProblem+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Set targets for a project prioritization <code><a href="#topic+problem">problem()</a></code> by
specifying exactly what probability of persistence is required
for each feature. For instance, setting an absolute target of 10%
(i.e. <code>0.1</code>) corresponds to a threshold 10% probability of persisting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_absolute_targets(x, targets)

## S4 method for signature 'ProjectProblem,numeric'
add_absolute_targets(x, targets)

## S4 method for signature 'ProjectProblem,character'
add_absolute_targets(x, targets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_absolute_targets_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_absolute_targets_+3A_targets">targets</code></td>
<td>
<p>Object that specifies the targets for each feature. See the
Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Targets are used to specify the minimum probability of persistence
for each feature in solutions. For minimum set objectives
(i.e. <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>, these targets
specify the minimum probability of persistence required for each species
in the solution. And for budget constrained objectives that use targets
(i.e.<code><a href="#topic+add_max_targets_met_objective">add_max_targets_met_objective()</a></code>), these targets
specify the minimum threshold probability of persistence that needs to be
achieved to count the benefits for conserving these species.
Please note that attempting to solve problems with objectives that require
targets without specifying targets will throw an error.
</p>
<p>The targets for a problem can be specified in several different ways:
</p>

<dl>
<dt><code>numeric</code></dt><dd><p><code>vector</code> of target values for each feature.
The order of the target values should correspond to the order
of the features in the data used to create the argument to <code>x</code>.
Additionally, for convenience, this type of argument can be a single
value to assign the same target to each feature.</p>
</dd>
<dt><code>character</code></dt><dd><p>specifying the name of column in the
feature data (i.e. the argument to <code>features</code> in the
<code><a href="#topic+problem">problem()</a></code> function) that contains the persistence targets.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with minimum set objective and targets that require each
# feature to have a 30% chance of persisting into the future
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_absolute_targets(0.3) %&gt;%
      add_binary_decisions()

# print problem
print(p1)

# build problem with minimum set objective and specify targets that require
# different levels of persistence for each feature
p2 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_absolute_targets(c(0.1, 0.2, 0.3, 0.4, 0.5)) %&gt;%
      add_binary_decisions()

# print problem
print(p2)

# add a column name to the feature data with targets
sim_features$target &lt;- c(0.1, 0.2, 0.3, 0.4, 0.5)

# build problem with minimum set objective and specify targets using
# column name in the feature data
p3 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_absolute_targets("target") %&gt;%
      add_binary_decisions()

# print problem
print(p3)

## Not run: 
# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)

# print solutions
print(s1)
print(s2)
print(s3)

# plot solutions
plot(p1, s1)
plot(p2, s2)
plot(p3, s3)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_binary_decisions'>Add binary decisions</h2><span id='topic+add_binary_decisions'></span>

<h3>Description</h3>

<p>Add a binary decision to a project prioritization <code><a href="#topic+problem">problem()</a></code>.
This is the conventional decision of either prioritizing funding
for a management action or not.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_binary_decisions(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_binary_decisions_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Project prioritization problems involve making decisions about
how funding will be allocated to management actions.
Only a single decision should be added to a <code>ProjectProblem</code> object.
If no decision is added to a problem then this decision type will
be used by default. Currently, this is the only supported decision type.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the decisions
added to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+decisions">decisions</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective, $200 budget, and
# binary decisions
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_default_solver'>Add a default solver</h2><span id='topic+add_default_solver'></span>

<h3>Description</h3>

<p>Identify the best solver currently installed on the system and specify that
it should be used to solve a project prioritization <code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_default_solver(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_default_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_default_solver_+3A_...">...</code></td>
<td>
<p>arguments passed to the solver.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Ranked from best to worst, the solvers that can be used are:
<span class="pkg">gurobi</span>, (<code><a href="#topic+add_gurobi_solver">add_gurobi_solver()</a></code>),
<span class="pkg">Rsymphony</span> (<code><a href="#topic+add_rsymphony_solver">add_rsymphony_solver()</a></code>), <span class="pkg">lpsymphony</span>
(<code><a href="#topic+add_lpsymphony_solver">add_lpsymphony_solver()</a></code>), and <span class="pkg">lpSolveAPI</span>
(<code><a href="#topic+add_lpsolveapi_solver">add_lpsolveapi_solver()</a></code>). This function does not consider
solvers that generate solutions using heuristic algorithms (i.e.
<code><a href="#topic+add_heuristic_solver">add_heuristic_solver()</a></code>) or random processes
(i.e. <code><a href="#topic+add_random_solver">add_random_solver()</a></code>) because they cannot provide
any guarantees on solution quality.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_feature_weights'>Add feature weights</h2><span id='topic+add_feature_weights'></span><span id='topic+add_feature_weights+2CProjectProblem+2Cnumeric-method'></span><span id='topic+add_feature_weights+2CProjectProblem+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Set weights for conserving features in a project prioritization
<code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_feature_weights(x, weights)

## S4 method for signature 'ProjectProblem,numeric'
add_feature_weights(x, weights)

## S4 method for signature 'ProjectProblem,character'
add_feature_weights(x, weights)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_feature_weights_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_feature_weights_+3A_weights">weights</code></td>
<td>
<p>Object that specifies the weights for each feature. See the
Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Weights are used to specify the relative importance for
maintaining the persistence of specific features. For budget constrained
problems (e.g. <code><a href="#topic+add_max_richness_objective">add_max_richness_objective()</a></code>), these
weights
could be used to specify which features are more important than other
features according to evolutionary or cultural metrics. Specifically,
features with a higher weight value are considered more important. It is
generally best to ensure that the feature weights range between 0.0001 and
10,000 to reduce the time required to solve problems using exact
algorithm solvers. As a consequence, you might have to rescale the feature
weights if the largest or smallest values occur outside this range
(excluding zeros). If you want to ensure that certain features conserved
in the solutions, it is strongly recommended to lock in the actions for
these features instead of setting really high weights for these features.
Please note that a warning will be thrown if you attempt to solve
problems with weights when an objective has been specified that does
not use weights. Currently, all objectives&mdash;except for the minimum
set objective (i.e. <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>)&mdash;can use weights.
</p>
<p>The weights for a problem can be specified in several different ways:
</p>

<dl>
<dt><code>numeric</code></dt><dd><p><code>vector</code> of weight values for each feature.</p>
</dd>
<dt><code>character</code></dt><dd><p>specifying the name of column in the
feature data (i.e. the argument to <code>features</code> in the
<code><a href="#topic+problem">problem()</a></code> function) that contains the weights.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+weights">weights</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print feature data
print(sim_features)

# build problem with maximum richness objective, $300 budget, and no weights
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
              "name", "success", "name", "cost", "name") %&gt;%
      add_max_richness_objective(budget = 200) %&gt;%
      add_binary_decisions()

# print problem
print(p1)

# build another problem, and specify feature weights using the values in the
# "weight" column of the sim_features table by specifying the column
# name "weight"
p2 &lt;- p1 %&gt;%
      add_feature_weights("weight")

# print problem
print(p2)

# build another problem, and specify feature weights using the
# values in the "weight column of the sim_features table, but
# actually input the values rather than specifying the column name
# "weights" column of the sim_features table
p3 &lt;- p1 %&gt;%
      add_feature_weights(sim_features$weight)

# print problem
print(p3)

## Not run: 
# solve the problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)

# print solutions
print(s1)
print(s2)
print(s3)

# plot solutions
plot(p1, s1)
plot(p2, s2)
plot(p3, s3)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_gurobi_solver'>Add a <span class="pkg">Gurobi</span> solver</h2><span id='topic+add_gurobi_solver'></span>

<h3>Description</h3>

<p>Specify that the <em>Gurobi</em> software should be used to solve a
project prioritization <code><a href="#topic+problem">problem()</a></code>. This function can also be
used to customize the behavior of the solver. In addition to the
<em>Gurobi</em> software suite, it also requires the <span class="pkg">gurobi</span> package to
be installed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_gurobi_solver(
  x,
  gap = 0,
  number_solutions = 1,
  solution_pool_method = 2,
  time_limit = .Machine$integer.max,
  presolve = 2,
  threads = 1,
  first_feasible = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_gurobi_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_gap">gap</code></td>
<td>
<p><code>numeric</code> gap to optimality. This gap is relative
and expresses the acceptable deviance from the optimal objective.
For example, a value of 0.01 will result in the solver stopping when
it has found a solution within 1% of optimality.
Additionally, a value of 0 will result in the solver stopping
when it has found an optimal solution.
The default value is 0.1 (i.e. 10% from optimality).</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_number_solutions">number_solutions</code></td>
<td>
<p><code>integer</code> number of solutions desired.
Defaults to 1. Note that the number of returned solutions can sometimes
be less than the argument to <code>number_solutions</code> depending on the
argument to <code>solution_pool_method</code>, for example if 100
solutions are requested but only 10 unique solutions exist, then only 10
solutions will be returned.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_solution_pool_method">solution_pool_method</code></td>
<td>
<p><code>numeric</code> search method identifier that
determines how multiple solutions should be generated. Available search
modes for generating a portfolio of solutions include: <code>0</code>
recording all solutions identified whilst trying to find
a solution that is within the specified optimality gap, <code>1</code> finding
one solution within the optimality gap and a number of additional
solutions that are of any level of quality (such that the total number of
solutions is equal to <code>number_solutions</code>), and <code>2</code> finding a
specified number of solutions that are nearest to optimality. For more
information, see the <em>Gurobi</em> manual (i.e. <a href="https://www.gurobi.com/documentation/8.0/refman/poolsearchmode.html#parameter:PoolSearchMode">https://www.gurobi.com/documentation/8.0/refman/poolsearchmode.html#parameter:PoolSearchMode</a>). Defaults to 2.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_time_limit">time_limit</code></td>
<td>
<p><code>numeric</code> time limit in seconds to run the optimizer.
The solver will return the current best solution when this time limit is
exceeded.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_presolve">presolve</code></td>
<td>
<p><code>integer</code> number indicating how intensively the
solver should try to simplify the problem before solving it. The default
value of 2 indicates to that the solver should be very aggressive in
trying to simplify the problem.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_threads">threads</code></td>
<td>
<p><code>integer</code> number of threads to use for the
optimization algorithm. The default value of 1 will result in only
one thread being used.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_first_feasible">first_feasible</code></td>
<td>
<p><code>logical</code> should the first feasible solution be
be returned? If <code>first_feasible</code> is set to <code>TRUE</code>, the solver
will return the first solution it encounters that meets all the
constraints, regardless of solution quality. Note that the first feasible
solution is not an arbitrary solution, rather it is derived from the
relaxed solution, and is therefore often reasonably close to optimality.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="add_gurobi_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="https://www.gurobi.com"><em>Gurobi</em></a> is a
state-of-the-art commercial optimization software with an R package
interface. It is by far the fastest of the solvers supported by this
package, however, it is also the only solver that is not freely
available. That said, licenses are available to academics at no cost. The
<span class="pkg">gurobi</span> package is distributed with the <em>Gurobi</em> software suite.
This solver uses the <span class="pkg">gurobi</span> package to solve problems.
</p>
<p>To install the <span class="pkg">gurobi</span> package, the
<a href="https://www.gurobi.com">Gurobi</a> optimization suite will first need to
be installed (see instructions for <a href="https://www.gurobi.com/documentation/8.1/quickstart_linux/software_installation_guid.html">Linux</a>,
<a href="https://www.gurobi.com/documentation/8.1/quickstart_mac/software_installation_guid.html">Mac OSX</a>, and
<a href="https://www.gurobi.com/documentation/8.1/quickstart_windows/software_installation_guid.html">Windows</a> operating systems). Although
<a href="https://www.gurobi.com">Gurobi</a> is a commercial software, academics
can obtain a
<a href="https://www.gurobi.com/downloads/end-user-license-agreement-academic/">special license for no cost</a>. After installing the
<a href="https://www.gurobi.com">Gurobi</a> optimization suite, the <span class="pkg">gurobi</span>
package can then be installed (see instructions for <a href="https://www.gurobi.com/documentation/8.1/quickstart_linux/r_installing_the_r_package.html">Linux</a>,
<a href="https://www.gurobi.com/documentation/8.1/quickstart_mac/r_installing_the_r_package.html">Mac OSX</a>, and
<a href="https://www.gurobi.com/documentation/8.1/quickstart_windows/r_installing_the_r_package.html">Windows</a> operating systems).
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data(sim_projects, sim_features, sim_actions)

# build problem
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

# build another problem, and specify the Gurobi solver
p2 &lt;- p1 %&gt;%
      add_gurobi_solver()

# print problem
print(p2)

# solve problem
s2 &lt;- solve(p2)

# print solution
print(s2)

# plot solution
plot(p2, s2)

# build another problem and obtain multiple solutions
# note that this problem doesn't have 100 unique solutions so
# the solver won't return 100 solutions
p3 &lt;- p1 %&gt;%
      add_gurobi_solver(number_solutions = 100)

# print problem
print(p3)

# solve problem
s3 &lt;- solve(p3)

# print solutions
print(s3)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_heuristic_solver'>Add a heuristic solver</h2><span id='topic+add_heuristic_solver'></span>

<h3>Description</h3>

<p>Specify that solutions should be generated using a backwards step-wise
heuristic algorithm (inspired by Cabeza <em>et al.</em> 2004,
Korte &amp; Vygen 2000, Probert <em>et al.</em> 2016). Ideally,
solutions should be generated using exact algorithm solvers (e.g.
<code><a href="#topic+add_rsymphony_solver">add_rsymphony_solver()</a></code> or <code><a href="#topic+add_gurobi_solver">add_gurobi_solver()</a></code>)
because they are guaranteed to identify optimal solutions (Rodrigues &amp; Gaston
2002).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_heuristic_solver(
  x,
  number_solutions = 1,
  initial_sweep = TRUE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_heuristic_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_heuristic_solver_+3A_number_solutions">number_solutions</code></td>
<td>
<p><code>integer</code> number of solutions desired.
Defaults to 1. Note that the number of returned solutions can sometimes
be less than the argument to <code>number_solutions</code> depending on the
argument to <code>solution_pool_method</code>, for example if 100
solutions are requested but only 10 unique solutions exist, then only 10
solutions will be returned.</p>
</td></tr>
<tr><td><code id="add_heuristic_solver_+3A_initial_sweep">initial_sweep</code></td>
<td>
<p><code>logical</code> value indicating if projects and
actions which exceed the budget should be automatically excluded
prior to running the backwards heuristic. This step prevents
projects which exceed the budget, and so would never be selected in
the final solution, from biasing the cost-sharing calculations.
However, previous algorithms for project prioritization have not
used this step (e.g. Probert <em>et al.</em> 2016).
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="add_heuristic_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The heuristic algorithm used to generate solutions is described
below. It is heavily inspired by the cost-sharing backwards heuristic
algorithm conventionally used to guide the prioritization of species
recovery projects (Probert <em>et al.</em> 2016).
</p>

<ol>
<li><p> All actions and projects are initially selected for funding.
</p>
</li>
<li><p> A set of rules are then used to deselect actions and projects
based on locked constraints (if any). Specifically, (i) actions which are
which are locked out are deselected, and (ii) projects which are
associated with actions that are locked out are also deselected.
</p>
</li>
<li><p> If the argument to <code>initial_sweep</code> is <code>TRUE</code>, then a set of
rules are then used to deselect actions and projects
based on budgetary constraints (if present). Specifically, (i) actions
which exceed the budget are deselected, (ii) projects which are
associated with a set of actions that exceed the budget are deselected,
and (iii) actions which are not associated with any project (excepting
locked in actions) are also deselected.
</p>
</li>
<li><p> If the objective function is to maximize biodiversity subject
to budgetary constraints (e.g. <code><a href="#topic+add_max_richness_objective">add_max_richness_objective()</a></code>)
then go to step 5. Otherwise, if the objective is to minimize cost
subject to biodiversity constraints (i.e.
<code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>) then go to step 7.
</p>
</li>
<li><p> The next step is repeated until (i) the number of desired
solutions is obtained, and (ii) the total cost of the remaining
actions that are selected for funding is within the budget. After both of
these conditions are met, the algorithm is terminated.
</p>
</li>
<li><p> Each of the remaining projects that are currently selected for
funding are evaluated according to how much the performance of the
solution decreases when the project is deselected for funding, relative to
the cost of the project not shared by other remaining projects. This can
be expressed mathematically as:
</p>
<p style="text-align: center;"><code class="reqn">B_j = \frac{V(J) - V(J - j)}{C_j}</code>
</p>

<p>Where <code class="reqn">J</code> is the set of remaining projects currently
selected for funding (indexed by <code class="reqn">j</code>), <code class="reqn">B_j</code> is the benefit
associated with funding project <code class="reqn">j</code>, <code class="reqn">V(J)</code> is the objective
value associated with the solution where all remaining projects are
funded, <code class="reqn">V(J - j)</code> is the objective value associated with the
solution where all remaining projects except for project <code class="reqn">j</code> are
funded, and <code class="reqn">C_j</code> is the sum cost of all of the actions
associated with project <code class="reqn">j</code>&mdash;excluding locked in actions&mdash;with the
cost of each action divided by the total number of remaining
projects that share the action (e.g. if two projects both share a $100
action, then this action contributes $50 to the overall cost of each
project).
</p>
<p>The project with the smallest benefit (i.e. <code class="reqn">B_j</code> value) is then
deselected for funding. In cases where multiple projects have
the same benefit (<code class="reqn">B_j</code>) value, the project with the greatest overall
cost (including actions which are shared among multiple remaining
projects) is deselected.
</p>
</li>
<li><p> The next step is repeated until (i) the number of desired
solutions is obtained or (ii) no action can be deselected for funding
without the probability of any feature expecting to persist falling below
its target probability of persistence. After one or both of
these conditions are met, the algorithm is terminated.
</p>
</li>
<li><p> Each of the remaining projects that are currently selected for
funding are evaluated according to how much the performance of the
solution decreases when the project is deselected for funding, relative to
the cost of the project not shared by other remaining projects. This can
be expressed mathematically as:
</p>
<p style="text-align: center;"><code class="reqn">B_j = \frac{\big(\sum_{f}^{F} P_f(J) - T_f \big) -
   \big( \sum_{f}^{F} P_f(J - j) - T_f \big)}{C_j}</code>
</p>

<p>Where <code class="reqn">F</code> is the set of features (indexed by <code class="reqn">f</code>),
<code class="reqn">T_f</code> is the target for feature <code class="reqn">f</code>, <code class="reqn">P</code> is the set of
remaining projects that are selected for funding (indexed by <code class="reqn">j</code>),
<code class="reqn">C_j</code> is the cost of all of the actions
associated with project <code class="reqn">j</code>&mdash;excluding locked in actions&mdash;and
accounting for shared costs among remaining projects (e.g. if two
projects both share a $100 action, then this action contributes $50 to
the overall cost of each project), <code class="reqn">B_p</code> is the benefit
associated with funding project <code class="reqn">p</code>, <code class="reqn">P(J)</code> is probability
that each feature is expected to persist when the remaining projects
(<code class="reqn">J</code>) are funded, and <code class="reqn">P(J - j)</code> is the probability that
each feature is expected to persist when all the remaining projects except
for action <code class="reqn">j</code> are funded.
</p>
<p>The project with the smallest benefit (i.e. <code class="reqn">B_j</code> value) is then
deselected for funding. In cases where multiple projects have
the same <code class="reqn">B_j</code> value, the project with the greatest overall cost
(including actions which are shared among multiple remaining projects)
is deselected.
</p>
</li></ol>



<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>References</h3>

<p>Rodrigues AS &amp; Gaston KJ (2002) Optimisation in reserve selection
procedures&mdash;why not? <em>Biological Conservation</em>, <strong>107</strong>,
123&ndash;129.
</p>
<p>Cabeza M, Araujo MB, Wilson RJ, Thomas CD, Cowley MJ &amp; Moilanen A (2004)
Combining probabilities of occurrence with spatial reserve design.
<em>Journal of Applied Ecology</em>, <strong>41</strong>, 252&ndash;262.
</p>
<p>Korte B &amp; Vygen J (2000)
<em>Combinatorial Optimization. Theory and Algorithms</em>. Springer-Verlag,
Berlin, Germany.
</p>
<p>Probert W, Maloney RF, Mellish B, and Joseph L (2016)
Project Prioritisation Protocol (PPP).
Formerly available at <a href="https://github.com/p-robot">https://github.com/p-robot</a>
(copy available at <a href="https://github.com/jeffreyhanson/ppp">https://github.com/jeffreyhanson/ppp</a>).
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load ggplot2 package for making plots
library(ggplot2)

# load data
data(sim_projects, sim_features, sim_actions)

# build problem with heuristic solver and $200
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_heuristic_solver()

# print problem
print(p1)

## Not run: 
# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution
plot(p1, s1)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_locked_in_constraints'>Add locked in constraints</h2><span id='topic+add_locked_in_constraints'></span><span id='topic+add_locked_in_constraints+2CProjectProblem+2Cnumeric-method'></span><span id='topic+add_locked_in_constraints+2CProjectProblem+2Clogical-method'></span><span id='topic+add_locked_in_constraints+2CProjectProblem+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Add constraints to a project prioritization <code><a href="#topic+problem">problem()</a></code> to ensure
that specific actions are prioritized for funding in the solution. For
example, it may be desirable to lock in actions for conserving culturally or
taxonomically important species.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_locked_in_constraints(x, locked_in)

## S4 method for signature 'ProjectProblem,numeric'
add_locked_in_constraints(x, locked_in)

## S4 method for signature 'ProjectProblem,logical'
add_locked_in_constraints(x, locked_in)

## S4 method for signature 'ProjectProblem,character'
add_locked_in_constraints(x, locked_in)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_locked_in_constraints_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_locked_in_constraints_+3A_locked_in">locked_in</code></td>
<td>
<p>Object that determines which planning units that should be
locked in. See the Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The locked actions can be specified in several different
ways:
</p>

<dl>
<dt><code>integer</code></dt><dd><p><code>vector</code> of indices pertaining to which
actions should be locked in the solution (i.e. row numbers of the
actions in the argument to <code>actions</code> in <code><a href="#topic+problem">problem()</a></code>).</p>
</dd>
<dt><code>logical</code></dt><dd><p><code>vector</code> containing <code>logical</code>
(i.e. <code>TRUE</code> and/or <code>FALSE</code> values) that indicate which
actions should be locked in the solution. These <code>logical</code>
values should correspond to each row in the argument to <code>actions</code>
in <code><a href="#topic+problem">problem()</a></code>).</p>
</dd>
<dt><code>character</code></dt><dd><p>column name that indicates if actions
units should be locked in the solution. This argument
should  denote a column in the argument to <code>actions</code>
in <code><a href="#topic+problem">problem()</a></code> which contains <code>logical</code>
(i.e. <code>TRUE</code> and/or <code>FALSE</code> values) to indicate
which actions should be locked.</p>
</dd>
</dl>



<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the constraints
added to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print action data
print(sim_actions)

# build problem with maximum richness objective and $150 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 150) %&gt;%
     add_binary_decisions()

# print problem
print(p1)

# build another problem, and lock in the 3rd action using numeric inputs
p2 &lt;- p1 %&gt;%
      add_locked_in_constraints(c(3))

# print problem
print(p2)

# build another problem, and lock in the actions using logical inputs from
# the sim_actions table
p3 &lt;- p1 %&gt;%
      add_locked_in_constraints(sim_actions$locked_in)

# print problem
print(p3)

# build another problem, and lock in the actions using the column name
# "locked_in" in the sim_actions table
# the sim_actions table
p4 &lt;- p1 %&gt;%
      add_locked_in_constraints("locked_in")

# print problem
print(p4)

## Not run: 
# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)
s4 &lt;- solve(p4)

# print the actions selected for funding in each of the solutions
print(s1[, sim_actions$name])
print(s2[, sim_actions$name])
print(s3[, sim_actions$name])
print(s4[, sim_actions$name])

## End(Not run)
</code></pre>

<hr>
<h2 id='add_locked_out_constraints'>Add locked out constraints</h2><span id='topic+add_locked_out_constraints'></span><span id='topic+add_locked_out_constraints+2CProjectProblem+2Cnumeric-method'></span><span id='topic+add_locked_out_constraints+2CProjectProblem+2Clogical-method'></span><span id='topic+add_locked_out_constraints+2CProjectProblem+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Add constraints to a project prioritization <code><a href="#topic+problem">problem()</a></code> to ensure
that specific actions are not prioritized for funding in the solution. For
example, it may be desirable to lock out specific actions to examine their
importance to the optimal funding scheme.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_locked_out_constraints(x, locked_out)

## S4 method for signature 'ProjectProblem,numeric'
add_locked_out_constraints(x, locked_out)

## S4 method for signature 'ProjectProblem,logical'
add_locked_out_constraints(x, locked_out)

## S4 method for signature 'ProjectProblem,character'
add_locked_out_constraints(x, locked_out)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_locked_out_constraints_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_locked_out_constraints_+3A_locked_out">locked_out</code></td>
<td>
<p>Object that determines which planning units that should be
locked out. See the Details section for more information.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# update "locked_out" column to lock out action "F2_action"
sim_actions$locked_out &lt;- c(FALSE, TRUE, FALSE, FALSE, FALSE, FALSE)

# print action data
print(sim_actions)

# build problem with maximum richness objective and $150 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 150) %&gt;%
     add_binary_decisions()

# print problem
print(p1)

# build another problem, and lock out the second action using numeric inputs
p2 &lt;- p1 %&gt;%
      add_locked_out_constraints(c(2))

# print problem
print(p2)

# build another problem, and lock out the actions using logical inputs
# (i.e. TRUE/FALSE values) from the sim_actions table
p3 &lt;- p1 %&gt;%
      add_locked_out_constraints(sim_actions$locked_out)

# print problem
print(p3)

# build another problem, and lock out the actions using the column name
# "locked_out" in the sim_actions table
# the sim_actions table
p4 &lt;- p1 %&gt;%
      add_locked_out_constraints("locked_out")

# print problem
print(p4)

## Not run: 
# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)
s4 &lt;- solve(p4)

# print the actions selected for funding in each of the solutions
print(s1[, sim_actions$name])
print(s2[, sim_actions$name])
print(s3[, sim_actions$name])
print(s4[, sim_actions$name])

## End(Not run)
</code></pre>

<hr>
<h2 id='add_lpsolveapi_solver'>Add a lp_solve solver with <span class="pkg">lpSolveAPI</span></h2><span id='topic+add_lpsolveapi_solver'></span>

<h3>Description</h3>

<p>Specify that the <em>lp_solve</em> software should be used to solve a
project prioritization <code><a href="#topic+problem">problem()</a></code> using the <span class="pkg">lpSolveAPI</span>
package. This function can also be used to customize the behavior of the
solver. It requires the <span class="pkg">lpSolveAPI</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_lpsolveapi_solver(x, gap = 0, presolve = FALSE, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_lpsolveapi_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_lpsolveapi_solver_+3A_gap">gap</code></td>
<td>
<p><code>numeric</code> gap to optimality. This gap is relative
and expresses the acceptable deviance from the optimal objective.
For example, a value of 0.01 will result in the solver stopping when
it has found a solution within 1% of optimality.
Additionally, a value of 0 will result in the solver stopping
when it has found an optimal solution.
The default value is 0.1 (i.e. 10% from optimality).</p>
</td></tr>
<tr><td><code id="add_lpsolveapi_solver_+3A_presolve">presolve</code></td>
<td>
<p><code>logical</code> indicating if attempts to should be made
to simplify the optimization problem (<code>TRUE</code>) or not (<code>FALSE</code>).
Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="add_lpsolveapi_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="http://lpsolve.sourceforge.net/5.5/"><em>lp_solve</em></a> is an
open-source integer programming solver.
Although this solver is the slowest currently supported solver,
it is also the only exact algorithm solver that can be installed on all
operating systems without any manual installation steps. This solver is
provided so that
users can try solving small project prioritization problems, without
needing to install additional software. When solve moderate or large
project prioritization problems, consider using
<code><a href="#topic+add_gurobi_solver">add_gurobi_solver()</a></code>.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with lpSolveAPI solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_lpsolveapi_solver()

# print problem
print(p)

# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)
</code></pre>

<hr>
<h2 id='add_lsymphony_solver'>Add a SYMPHONY solver with <span class="pkg">lpsymphony</span></h2><span id='topic+add_lsymphony_solver'></span><span id='topic+add_lpsymphony_solver'></span>

<h3>Description</h3>

<p>Specify that the <em>SYMPHONY</em> software should be used to solve a
project prioritization <code><a href="#topic+problem">problem()</a></code> using the <span class="pkg">lpsymphony</span>
package. This function can also be used to customize the behavior of the
solver. It requires the <span class="pkg">lpsymphony</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_lpsymphony_solver(
  x,
  gap = 0,
  time_limit = .Machine$integer.max,
  first_feasible = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_lsymphony_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_lsymphony_solver_+3A_gap">gap</code></td>
<td>
<p><code>numeric</code> gap to optimality. This gap is relative
and expresses the acceptable deviance from the optimal objective.
For example, a value of 0.01 will result in the solver stopping when
it has found a solution within 1% of optimality.
Additionally, a value of 0 will result in the solver stopping
when it has found an optimal solution.
The default value is 0.1 (i.e. 10% from optimality).</p>
</td></tr>
<tr><td><code id="add_lsymphony_solver_+3A_time_limit">time_limit</code></td>
<td>
<p><code>numeric</code> time limit in seconds to run the optimizer.
The solver will return the current best solution when this time limit is
exceeded.</p>
</td></tr>
<tr><td><code id="add_lsymphony_solver_+3A_first_feasible">first_feasible</code></td>
<td>
<p><code>logical</code> should the first feasible solution be
be returned? If <code>first_feasible</code> is set to <code>TRUE</code>, the solver
will return the first solution it encounters that meets all the
constraints, regardless of solution quality. Note that the first feasible
solution is not an arbitrary solution, rather it is derived from the
relaxed solution, and is therefore often reasonably close to optimality.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="add_lsymphony_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a> is an
open-source integer programming solver that is part of the Computational
Infrastructure for Operations Research (COIN-OR) project, an initiative
to promote development of open-source tools for operations research (a
field that includes linear programming). The <span class="pkg">lpsymphony</span> package is
distributed through
<a href="https://doi.org/doi:10.18129/B9.bioc.lpsymphony">Bioconductor</a>.
This functionality is provided because the <span class="pkg">lpsymphony</span> package may
be easier to install to install on Windows and Mac OSX systems than the
<span class="pkg">Rsymphony</span> package.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data(sim_projects, sim_features, sim_actions)

# build problem with lpsymphony solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_lpsymphony_solver()

# print problem
print(p)

# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_manual_locked_constraints'>Add manually specified locked constraints</h2><span id='topic+add_manual_locked_constraints'></span><span id='topic+add_manual_locked_constraints+2CProjectProblem+2Cdata.frame-method'></span><span id='topic+add_manual_locked_constraints+2CProjectProblem+2Ctbl_df-method'></span>

<h3>Description</h3>

<p>Add constraints to a project prioritization <code><a href="#topic+problem">problem()</a></code> to ensure
that solutions fund (or do not fund) specific actions. This function offers
more fine-grained control than the <code><a href="#topic+add_locked_in_constraints">add_locked_in_constraints()</a></code>
and <code><a href="#topic+add_locked_out_constraints">add_locked_out_constraints()</a></code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_manual_locked_constraints(x, locked)

## S4 method for signature 'ProjectProblem,data.frame'
add_manual_locked_constraints(x, locked)

## S4 method for signature 'ProjectProblem,tbl_df'
add_manual_locked_constraints(x, locked)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_manual_locked_constraints_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_manual_locked_constraints_+3A_locked">locked</code></td>
<td>
<p><code>data.frame</code> or <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object. See
the Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The argument to <code>locked</code> must contain the following fields
(columns):
</p>

<dl>
<dt><code>"action"</code></dt><dd><p><code>character</code> action name.</p>
</dd>
<dt><code>"status"</code></dt><dd><p><code>numeric</code> values indicating if actions should
be funded (with a value of 1) or not (with a value of zero).</p>
</dd>
</dl>



<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the constraints
added to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)


# create data frame with locked statuses
status &lt;- data.frame(action = sim_actions$name[1:2],
                     status = c(0, 1))

# print locked statuses
print(status)

# build problem with minimum set objective and targets that require each
# feature to have a 30% chance of persisting into the future
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_richness_objective(budget = 500) %&gt;%
      add_manual_locked_constraints(status) %&gt;%
      add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

## End(Not run)

</code></pre>

<hr>
<h2 id='add_manual_targets'>Add manual targets</h2><span id='topic+add_manual_targets'></span><span id='topic+add_manual_targets-method'></span><span id='topic+add_manual_targets+2CProjectProblem+2Cdata.frame-method'></span><span id='topic+add_manual_targets+2CProjectProblem+2Ctbl_df-method'></span>

<h3>Description</h3>

<p>Set targets for a project prioritization <code><a href="#topic+problem">problem()</a></code> by manually
specifying all the required information for each target. This function
is useful because it can be used to customize all aspects of a target. For
most cases, targets can be specified using the
<code><a href="#topic+add_absolute_targets">add_absolute_targets()</a></code> and <code><a href="#topic+add_relative_targets">add_relative_targets()</a></code>
functions. However, this function can be used to mix absolute and
relative targets for different features.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_manual_targets(x, targets)

## S4 method for signature 'ProjectProblem,data.frame'
add_manual_targets(x, targets)

## S4 method for signature 'ProjectProblem,tbl_df'
add_manual_targets(x, targets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_manual_targets_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_manual_targets_+3A_targets">targets</code></td>
<td>
<p><code>data.frame</code> or <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object. See
the Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Targets are used to specify the minimum probability of persistence
for each feature in solutions. For minimum set objectives
(i.e. <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>, these targets
specify the minimum probability of persistence required for each species
in the solution. And for budget constrained objectives that use targets
(i.e. <code><a href="#topic+add_max_targets_met_objective">add_max_targets_met_objective()</a></code>), these targets
specify the minimum threshold probability of persistence that needs to be
achieved to count the benefits for conserving these species.
Please note that attempting to solve problems with objectives that require
targets without specifying targets will throw an error.
</p>
<p>The <code>targets</code> argument should contain the following columns:
</p>

<dl>
<dt><code>"feature"</code></dt><dd><p><code>character</code> name of features in argument
to <code>x</code>.</p>
</dd>
<dt><code>"type"</code></dt><dd><p><code>character</code> describing the type of target.
Acceptable values include <code>"absolute"</code> and <code>"relative"</code>.
These values correspond to <code><a href="#topic+add_absolute_targets">add_absolute_targets()</a></code>,
and <code><a href="#topic+add_relative_targets">add_relative_targets()</a></code> respectively.</p>
</dd>
<dt><code>"sense"</code></dt><dd><p><code>character</code> sense of the target. The
only acceptable value currently supported is: <code>"&gt;="</code>. This field
(column) is optional and if it is missing then target senses will
default to <code>"&gt;="</code> values.</p>
</dd>
<dt><code>"target"</code></dt><dd><p><code>numeric</code> target threshold.</p>
</dd>
</dl>



<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the targets added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)


# create data frame with targets
targets &lt;- data.frame(feature = sim_features$name,
                      type = "absolute",
                      target = 0.1)

# print targets
print(targets)

# build problem with minimum set objective and targets that require each
# feature to have a 30% chance of persisting into the future
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_manual_targets(targets) %&gt;%
      add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_max_phylo_div_objective'>Add maximum phylogenetic diversity objective</h2><span id='topic+add_max_phylo_div_objective'></span>

<h3>Description</h3>

<p>Set the objective of a project prioritization <code><a href="#topic+problem">problem()</a></code> to
maximize the phylogenetic diversity that is expected to persist into the
future, whilst ensuring that the cost of the solution is within a
pre-specified budget (Bennett <em>et al.</em> 2014, Faith 2008).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_max_phylo_div_objective(x, budget, tree)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_max_phylo_div_objective_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_max_phylo_div_objective_+3A_budget">budget</code></td>
<td>
<p><code>numeric</code> budget for funding actions.</p>
</td></tr>
<tr><td><code id="add_max_phylo_div_objective_+3A_tree">tree</code></td>
<td>
<p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> phylogenetic tree describing the
evolutionary relationships between the features. Note that the
argument to <code>tree</code> must contain every feature, and only the
features, present in the argument to <code>x</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A problem objective is used to specify the overall goal of the
project prioritization problem.
Here, the maximum phylogenetic diversity objective seeks to find the set
of actions that maximizes the expected amount of evolutionary history
that is expected to persist into the future given the evolutionary
relationships between the features (e.g. populations, species).
Let <code class="reqn">I</code> represent the set of conservation actions (indexed by
<code class="reqn">i</code>). Let <code class="reqn">C_i</code> denote the cost for funding action <code class="reqn">i</code>, and
let <code class="reqn">m</code> denote the maximum expenditure (i.e. the budget). Also,
let <code class="reqn">F</code> represent each feature (indexed by <code class="reqn">f</code>), <code class="reqn">W_f</code>
represent the weight for each feature <code class="reqn">f</code> (defaults to zero for
each feature unless specified otherwise), and <code class="reqn">E_f</code>
denote the probability that each feature will go extinct given the funded
conservation projects.
</p>
<p>To describe the
evolutionary relationships between the features <code class="reqn">f \in F</code>,
consider a phylogenetic tree that contains features <code class="reqn">f \in F</code>
with branches of known lengths. This tree can be described using
mathematical notation by letting <code class="reqn">B</code> represent the branches (indexed by
<code class="reqn">b</code>) with lengths <code class="reqn">L_b</code> and letting <code class="reqn">T_{bf}</code> indicate which
features <code class="reqn">f \in F</code> are associated with which phylogenetic
branches <code class="reqn">b \in B</code> using zeros and ones. Ideally, the set of
features <code class="reqn">F</code> would contain all of the species in the study
area&mdash;including non-threatened species&mdash;to fully account for the benefits
for funding different actions.
</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let <code class="reqn">J</code> denote the set of conservation projects
(indexed by <code class="reqn">j</code>), and let <code class="reqn">A_{ij}</code> denote which actions
<code class="reqn">i \in I</code> comprise each conservation project
<code class="reqn">j \in J</code> using zeros and ones. Next, let <code class="reqn">P_j</code> represent
the probability of project <code class="reqn">j</code> being successful if it is funded. Also,
let <code class="reqn">B_{fj}</code> denote the enhanced probability that each feature
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
will persist if all of the actions that comprise project <code class="reqn">j</code> are funded
and that project is allocated to feature <code class="reqn">f</code>.
For convenience,
let <code class="reqn">Q_{fj}</code> denote the actual probability that each
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
is expected to persist if the project is funded. If the argument
to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
<code>TRUE</code>, and this is the default behavior, then
<code class="reqn">Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)</code>, where <code>n</code> corresponds to the
baseline &quot;do nothing&quot; project. This means that the probability
of a feature persisting if a project is allocated to a feature
depends on (i) the probability of the project succeeding, (ii) the
probability of the feature persisting if the project does not fail,
and (iii) the probability of the feature persisting even if the project
fails. Otherwise, if the argument is set to <code>FALSE</code>, then
<code class="reqn">Q_{fj} = P_{j} \times B_{fj}</code>.
</p>
<p>The binary control variables <code class="reqn">X_i</code> in this problem indicate whether
each project <code class="reqn">i \in I</code> is funded or not. The decision
variables in this problem are the <code class="reqn">Y_{j}</code>, <code class="reqn">Z_{fj}</code>, <code class="reqn">E_f</code>,
and <code class="reqn">R_b</code> variables.
Specifically, the binary <code class="reqn">Y_{j}</code> variables indicate if project <code class="reqn">j</code>
is funded or not based on which actions are funded; the binary
<code class="reqn">Z_{fj}</code> variables indicate if project <code class="reqn">j</code> is used to manage
feature <code class="reqn">f</code> or not; the semi-continuous <code class="reqn">E_f</code> variables
denote the probability that feature <code class="reqn">f</code> will go extinct; and
the semi-continuous <code class="reqn">R_b</code> variables denote the probability that
phylogenetic branch <code class="reqn">b</code> will remain in the future.
</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten features, let <code class="reqn">F</code>
represent the set of ten features and also the number ten).
</p>
<p style="text-align: center;"><code class="reqn">
  \mathrm{Maximize} \space (\sum_{b = 0}^{B} L_b R_b) + \sum_{f}^{F}
  (1 - E_f) W_f \space \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to} \space
  \sum_{i = 0}^{I} C_i \leq m \space \mathrm{(eqn \space 1b)} \\
  R_b = 1 - \prod_{f = 0}^{F} ifelse(T_{bf} == 1, \space E_f, \space
  1) \space \forall \space b \in B \space \mathrm{(eqn \space 1c)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1d)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1e)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1f)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1g)} \\
  E_{f}, R_{b} \geq 0, E_{f}, R_{b} \leq 1 \space \forall \space b \in B
   \space f \in F \space \mathrm{(eqn \space 1h)} \\
  X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j \in J, f
  \in F \space \mathrm{(eqn \space 1i)}
  </code>
</p>

<p>The objective (eqn 1a) is to maximize the expected phylogenetic diversity
(Faith 2008) plus the probability each feature will remain multiplied
by their weights (noting that the feature weights default to zero).
Constraint (eqn 1b) limits the maximum expenditure (i.e.
ensures that the cost of the funded actions do not exceed the budget).
Constraints (eqn 1c) calculate the probability that each branch
(including tips that correspond to a single feature) will go extinct
according to the probability that the features which share a given
branch will go extinct.
Constraints (eqn 1d) calculate the probability that each feature
will go extinct according to their allocated project.
Constraints (eqn 1e) ensure that feature can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1f) state that each
feature can only be allocated to a single project. Constraints (eqn 1g)
ensure that a project cannot be funded unless all of its actions are funded.
Constraints (eqns 1h) ensure that the probability variables
(<code class="reqn">E_f</code>) are bounded between zero and one. Constraints (eqns 1i) ensure
that the action funding (<code class="reqn">X_i</code>), project funding (<code class="reqn">Y_j</code>), and
project allocation (<code class="reqn">Z_{fj}</code>) variables are binary.
</p>
<p>Although this formulation is a mixed integer quadratically constrained
programming problem (due to eqn 1c), it can be approximated using
linear terms and then solved using commercial mixed integer programming
solvers. This can be achieved by substituting the product of the feature
extinction probabilities (eqn 1c) with the sum of the log feature extinction
probabilities and using piecewise linear approximations (described in
Hillier &amp; Price 2005 pp. 390&ndash;392) to approximate the exponent of this term.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the objective
added to it.
</p>


<h3>References</h3>

<p>Bennett JR, Elliott G, Mellish B, Joseph LN, Tulloch AI,
Probert WJ, Di Fonzo MMI, Monks JM, Possingham HP &amp; Maloney R (2014)
Balancing phylogenetic diversity
and species numbers in conservation prioritization, using a case study of
threatened species in New Zealand. <em>Biological Conservation</em>,
<strong>174</strong>: 47&ndash;54.
</p>
<p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461&ndash;1470.
</p>
<p>Hillier FS &amp; Price CC (2005) <em>International series in operations
research &amp; management science</em>. Springer.
</p>


<h3>See Also</h3>

<p><a href="#topic+objectives">objectives</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions, sim_tree)

# plot tree
plot(sim_tree)

# build problem with maximum phylogenetic diversity objective and $200 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_phylo_div_objective(budget = 200, tree = sim_tree) %&gt;%
      add_binary_decisions()

## Not run: 
# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution
plot(p1, s1)

# build another problem that includes feature weights
p2 &lt;- p1 %&gt;%
      add_feature_weights("weight")

# solve problem with feature weights
s2 &lt;- solve(p2)

# print solution based on feature weights
print(s2)

# plot solution based on feature weights
plot(p2, s2)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_max_richness_objective'>Add maximum richness objective</h2><span id='topic+add_max_richness_objective'></span>

<h3>Description</h3>

<p>Set the objective of a project prioritization <code><a href="#topic+problem">problem()</a></code> to
maximize the total number of features that are expected to persist, whilst
ensuring that the cost of the solution is within a pre-specified budget
(Joseph, Maloney &amp; Possingham 2009). This objective is conceptually similar
to maximizing species richness in a study area. Furthermore, weights can
also be used to specify the relative importance of conserving specific
features (see <code><a href="#topic+add_feature_weights">add_feature_weights()</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_max_richness_objective(x, budget)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_max_richness_objective_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_max_richness_objective_+3A_budget">budget</code></td>
<td>
<p><code>numeric</code> budget for funding actions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A problem objective is used to specify the overall goal of the
project prioritization problem.
Here, the maximum richness objective seeks to find the set of actions that
maximizes the total number of features  (e.g. populations, species,
ecosystems) that is expected to persist within a pre-specified budget.
Let <code class="reqn">I</code> represent the set of conservation actions (indexed by
<code class="reqn">i</code>). Let <code class="reqn">C_i</code> denote the cost for funding action <code class="reqn">i</code>, and
let <code class="reqn">m</code> denote the maximum expenditure (i.e. the budget). Also,
let <code class="reqn">F</code> represent each feature (indexed by <code class="reqn">f</code>), <code class="reqn">W_f</code>
represent the weight for each feature <code class="reqn">f</code> (defaults to one for
each feature unless specified otherwise), and <code class="reqn">E_f</code> denote the
probability that each feature will go extinct given the funded
conservation projects.
</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let <code class="reqn">J</code> denote the set of conservation projects
(indexed by <code class="reqn">j</code>), and let <code class="reqn">A_{ij}</code> denote which actions
<code class="reqn">i \in I</code> comprise each conservation project
<code class="reqn">j \in J</code> using zeros and ones. Next, let <code class="reqn">P_j</code> represent
the probability of project <code class="reqn">j</code> being successful if it is funded. Also,
let <code class="reqn">B_{fj}</code> denote the probability that each feature
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
will persist if all of the actions that comprise project <code class="reqn">j</code> are funded
and that project is allocated to feature <code class="reqn">f</code>. For convenience,
let <code class="reqn">Q_{fj}</code> denote the actual probability that each
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
is expected to persist if the project is funded. If the argument
to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
<code>TRUE</code>, and this is the default behavior, then
<code class="reqn">Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)</code>, where <code>n</code> corresponds to the
baseline &quot;do nothing&quot; project. This means that the probability
of a feature persisting if a project is allocated to a feature
depends on (i) the probability of the project succeeding, (ii) the
probability of the feature persisting if the project does not fail,
and (iii) the probability of the feature persisting even if the project
fails. Otherwise, if the argument is set to <code>FALSE</code>, then
<code class="reqn">Q_{fj} = P_{j} \times B_{fj}</code>.
</p>
<p>The binary control variables <code class="reqn">X_i</code> in this problem indicate whether
each project <code class="reqn">i \in I</code> is funded or not. The decision
variables in this problem are the <code class="reqn">Y_{j}</code>, <code class="reqn">Z_{fj}</code>, and <code class="reqn">E_f</code>
variables.
Specifically, the binary <code class="reqn">Y_{j}</code> variables indicate if project <code class="reqn">j</code>
is funded or not based on which actions are funded; the binary
<code class="reqn">Z_{fj}</code> variables indicate if project <code class="reqn">j</code> is used to manage
feature <code class="reqn">f</code> or not; and the semi-continuous <code class="reqn">E_f</code> variables
denote the probability that feature <code class="reqn">f</code> will go extinct.
</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten features, let <code class="reqn">F</code>
represent the set of ten features and also the number ten).
</p>
<p style="text-align: center;"><code class="reqn">
  \mathrm{Maximize} \space \sum_{f = 0}^{F} (1 - E_f) W_f \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to} \sum_{i = 0}^{I} C_i \leq m \space
  \mathrm{(eqn \space 1b)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1c)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1d)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1e)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1f)} \\
  E_{f} \geq 0, E_{f} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1g)} \\
  X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j \in J, f
  \in F \space \mathrm{(eqn \space 1h)}
  </code>
</p>

<p>The objective (eqn 1a) is to maximize the weighted persistence of all the
species. Constraint (eqn 1b) limits the maximum expenditure (i.e. ensures
that the cost of the funded actions do not exceed the budget).
Constraints (eqn 1c) calculate the probability that each feature
will go extinct according to their allocated project.
Constraints (eqn 1d) ensure that feature can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1e) state that each
feature can only be allocated to a single project. Constraints (eqn 1f)
ensure that a project cannot be funded unless all of its actions are funded.
Constraints (eqns 1g) ensure that the probability variables
(<code class="reqn">E_f</code>) are bounded between zero and one. Constraints (eqns 1h) ensure
that the action funding (<code class="reqn">X_i</code>), project funding (<code class="reqn">Y_j</code>), and project
allocation (<code class="reqn">Z_{fj}</code>) variables are binary.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the objective
added to it.
</p>


<h3>References</h3>

<p>Joseph LN, Maloney RF &amp; Possingham HP (2009) Optimal allocation of
resources among threatened species: A project prioritization protocol.
<em>Conservation Biology</em>, <strong>23</strong>, 328&ndash;338.
</p>


<h3>See Also</h3>

<p><a href="#topic+objectives">objectives</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective and $300 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution
plot(p1, s1)

## End(Not run)

# build another problem that includes feature weights
p2 &lt;- p1 %&gt;%
     add_feature_weights("weight")

## Not run: 
# solve problem with feature weights
s2 &lt;- solve(p2)

# print solution based on feature weights
print(s2)

# plot solution based on feature weights
plot(p2, s2)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_max_targets_met_objective'>Add maximum targets met objective</h2><span id='topic+add_max_targets_met_objective'></span>

<h3>Description</h3>

<p>Set the objective of a project prioritization <code><a href="#topic+problem">problem()</a></code> to
maximize the total number of persistence targets met for the features, whilst
ensuring that the cost of the solution is within a pre-specified budget
(Chades <em>et al.</em> 2015). In some project prioritization exercises,
decision makers may have a target level of persistence for each feature
(e.g. a 90% persistence target corresponding to a 90% chance for the
features persisting into the future). In such exercises, the decision makers
do not perceive any benefit when a target is not met (e.g. if a feature
has a persistence target of 90% and a solution only secures a 70% chance
of persistence then no benefit is accrued for that feature) or when a target
is surpassed (e.g. if a feature has a persistence target of 50%, then a
solution which
secures a 95% chance of persistence will accrue the same benefit as a
solution which secures a 50% chance of persistence). Furthermore, weights
can also be used to specify the relative importance of meeting targets
for specific features (see <code><a href="#topic+add_feature_weights">add_feature_weights()</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_max_targets_met_objective(x, budget)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_max_targets_met_objective_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_max_targets_met_objective_+3A_budget">budget</code></td>
<td>
<p><code>numeric</code> budget for funding actions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A problem objective is used to specify the overall goal of the
project prioritization problem.
Here, the maximum targets met objective seeks to find the set of actions
that maximizes the total number of features (e.g. populations, species,
ecosystems) that have met their persistence targets within a
pre-specified budget. Let <code class="reqn">I</code> represent the set of conservation
actions (indexed by <code class="reqn">i</code>). Let <code class="reqn">C_i</code> denote the cost for funding
action <code class="reqn">i</code>, and let <code class="reqn">m</code> denote the maximum expenditure (i.e. the
budget). Also, let <code class="reqn">F</code> represent each feature (indexed by <code class="reqn">f</code>),
<code class="reqn">W_f</code> represent the weight for each feature <code class="reqn">f</code> (defaults to one
for each feature unless specified otherwise), <code class="reqn">T_f</code> represent the
persistence target for each feature <code class="reqn">f</code>, and <code class="reqn">E_f</code> denote the
probability that each feature will go extinct given the funded
conservation projects.
</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let <code class="reqn">J</code> denote the set of conservation projects
(indexed by <code class="reqn">j</code>), and let <code class="reqn">A_{ij}</code> denote which actions
<code class="reqn">i \in I</code> comprise each conservation project
<code class="reqn">j \in J</code> using zeros and ones. Next, let <code class="reqn">P_j</code> represent
the probability of project <code class="reqn">j</code> being successful if it is funded. Also,
let <code class="reqn">B_{fj}</code> denote the enhanced probability that each feature
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
will persist if all of the actions that comprise project <code class="reqn">j</code> are funded
and that project is allocated to feature <code class="reqn">f</code>.
For convenience,
let <code class="reqn">Q_{fj}</code> denote the actual probability that each
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
is expected to persist if the project is funded. If the argument
to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
<code>TRUE</code>, and this is the default behavior, then
<code class="reqn">Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)</code>, where <code>n</code> corresponds to the
baseline &quot;do nothing&quot; project. This means that the probability
of a feature persisting if a project is allocated to a feature
depends on (i) the probability of the project succeeding, (ii) the
probability of the feature persisting if the project does not fail,
and (iii) the probability of the feature persisting even if the project
fails. Otherwise, if the argument is set to <code>FALSE</code>, then
<code class="reqn">Q_{fj} = P_{j} \times B_{fj}</code>.
</p>
<p>The binary control variables <code class="reqn">X_i</code> in this problem indicate whether
each project <code class="reqn">i \in I</code> is funded or not. The decision
variables in this problem are the <code class="reqn">Y_{j}</code>, <code class="reqn">Z_{fj}</code>, <code class="reqn">E_f</code>,
and <code class="reqn">G_f</code> variables.
Specifically, the binary <code class="reqn">Y_{j}</code> variables indicate if project <code class="reqn">j</code>
is funded or not based on which actions are funded; the binary
<code class="reqn">Z_{fj}</code> variables indicate if project <code class="reqn">j</code> is used to manage
feature <code class="reqn">f</code> or not; the semi-continuous <code class="reqn">E_f</code> variables
denote the probability that feature <code class="reqn">f</code> will go extinct; and the
<code class="reqn">G_f</code> variables indicate if the persistence target for feature
<code class="reqn">f</code> is met.
</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten features, let <code class="reqn">F</code>
represent the set of ten features and also the number ten).
</p>
<p style="text-align: center;"><code class="reqn">
  \mathrm{Maximize} \space \sum_{f = 0}^{F} G_f W_f \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to}
  \sum_{i = 0}^{I} C_i \leq m \space \mathrm{(eqn \space 1b)} \\
  G_f (1 - E_f) \geq T_f \space \forall \space f \in F \space
  \mathrm{(eqn \space 1c)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1d)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1e)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1f)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1g)} \\
  E_{f} \geq 0, E_{f} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1h)} \\
  G_{f}, X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j
  \in J, f \in F \space \mathrm{(eqn \space 1i)}
  </code>
</p>

<p>The objective (eqn 1a) is to maximize the weighted total number of the
features that have their persistence targets met.
Constraints (eqn 1b) calculate which persistence targets have been met.
Constraint (eqn 1c) limits the maximum expenditure (i.e. ensures
that the cost of the funded actions do not exceed the budget).
Constraints (eqn 1d) calculate the probability that each feature
will go extinct according to their allocated project.
Constraints (eqn 1e) ensure that feature can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1f) state that each
feature can only be allocated to a single project. Constraints (eqn 1g)
ensure that a project cannot be funded unless all of its actions are funded.
Constraints (eqns 1h) ensure that the probability variables
(<code class="reqn">E_f</code>) are bounded between zero and one. Constraints (eqns 1i) ensure
that the target met (<code class="reqn">G_f</code>), action funding (<code class="reqn">X_i</code>), project funding
(<code class="reqn">Y_j</code>), and project allocation (<code class="reqn">Z_{fj}</code>) variables are binary.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the objective
added to it.
</p>


<h3>References</h3>

<p>Chades I, Nicol S, van Leeuwen S, Walters B, Firn J, Reeson A, Martin TG &amp;
Carwardine J (2015) Benefits of integrating complementarity into priority
threat management. <em>Conservation Biology</em>, <strong>29</strong>, 525&ndash;536.
</p>


<h3>See Also</h3>

<p><a href="#topic+objectives">objectives</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the ggplot2 R package to customize plot
library(ggplot2)

# load data
data(sim_projects, sim_features, sim_actions)

# manually adjust feature weights
sim_features$weight &lt;- c(8, 2, 6, 3, 1)

# build problem with maximum targets met objective, a $200 budget,
# targets that require each feature to have a 20% chance of persisting into
# the future, and zero cost actions locked in
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_targets_met_objective(budget = 200) %&gt;%
      add_absolute_targets(0.2) %&gt;%
      add_locked_in_constraints(which(sim_actions$cost &lt; 1e-5)) %&gt;%
      add_binary_decisions()

## Not run: 
# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution, and add a dashed line to indicate the feature targets
# we can see the three features meet the targets under the baseline
# scenario, and the project for F5 was prioritized for funding
# so that its probability of persistence meets the target
plot(p1, s1) +
geom_hline(yintercept = 0.2, linetype = "dashed")

## End(Not run)

# build another problem that includes feature weights
p2 &lt;- p1 %&gt;%
      add_feature_weights("weight")

## Not run: 
# solve problem
s2 &lt;- solve(p2)

# print solution
print(s2)

# plot solution, and add a dashed line to indicate the feature targets
# we can see that adding weights to the problem has changed the solution
# specifically, the projects for the feature F3 is now funded
# to enhance its probability of persistence
plot(p2, s2) +
geom_hline(yintercept = 0.2, linetype = "dashed")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_min_set_objective'>Add minimum set objective</h2><span id='topic+add_min_set_objective'></span>

<h3>Description</h3>

<p>Set the objective of a project prioritization <code><a href="#topic+problem">problem()</a></code> to
minimize the cost of the solution whilst ensuring that all targets are met.
This objective is conceptually similar to that used in <em>Marxan</em>
(Ball, Possingham &amp; Watts 2009).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_min_set_objective(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_min_set_objective_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A problem objective is used to specify the overall goal of the
project prioritization problem.
Here, the minimum set objective seeks to find the set of actions that
minimizes the overall cost of the prioritization, while ensuring that the
funded projects meet a set of persistence targets for the conservation
features (e.g. populations, species, ecosystems). Let <code class="reqn">I</code> represent
the set of conservation actions (indexed by <code class="reqn">i</code>). Let <code class="reqn">C_i</code> denote
the cost for funding action <code class="reqn">i</code>. Also, let <code class="reqn">F</code> represent each
feature (indexed by <code class="reqn">f</code>), <code class="reqn">T_f</code> represent the persistence target
for feature <code class="reqn">f</code>, and <code class="reqn">E_f</code> denote the probability that each
feature will go extinct given the funded conservation projects.
</p>
<p>To guide the prioritization, the conservation actions are organized into
conservation projects. Let <code class="reqn">J</code> denote the set of conservation projects
(indexed by <code class="reqn">j</code>), and let <code class="reqn">A_{ij}</code> denote which actions
<code class="reqn">i \in I</code> comprise each conservation project
<code class="reqn">j \in J</code> using zeros and ones. Next, let <code class="reqn">P_j</code> represent
the probability of project <code class="reqn">j</code> being successful if it is funded. Also,
let <code class="reqn">B_{fj}</code> denote the enhanced probability that each feature
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
will persist if all of the actions that comprise project <code class="reqn">j</code> are funded
and that project is allocated to feature <code class="reqn">f</code>.
For convenience,
let <code class="reqn">Q_{fj}</code> denote the actual probability that each
<code class="reqn">f \in F</code> associated with the project <code class="reqn">j \in J</code>
is expected to persist if the project is funded. If the argument
to <code>adjust_for_baseline</code> in the <code>problem</code> function was set to
<code>TRUE</code>, and this is the default behavior, then
<code class="reqn">Q_{fj} = (P_{j} \times B_{fj}) + \bigg(\big(1 - (P_{j} B_{fj})\big)
  \times (P_{n} \times B_{fn})\bigg)</code>, where <code>n</code> corresponds to the
baseline &quot;do nothing&quot; project. This means that the probability
of a feature persisting if a project is allocated to a feature
depends on (i) the probability of the project succeeding, (ii) the
probability of the feature persisting if the project does not fail,
and (iii) the probability of the feature persisting even if the project
fails. Otherwise, if the argument is set to <code>FALSE</code>, then
<code class="reqn">Q_{fj} = P_{j} \times B_{fj}</code>.
</p>
<p>The binary control variables <code class="reqn">X_i</code> in this problem indicate whether
each project <code class="reqn">i \in I</code> is funded or not. The decision
variables in this problem are the <code class="reqn">Y_{j}</code>, <code class="reqn">Z_{fj}</code>, and <code class="reqn">E_f</code>
variables.
Specifically, the binary <code class="reqn">Y_{j}</code> variables indicate if project <code class="reqn">j</code>
is funded or not based on which actions are funded; the binary
<code class="reqn">Z_{fj}</code> variables indicate if project <code class="reqn">j</code> is used to manage
feature <code class="reqn">f</code> or not; and the semi-continuous <code class="reqn">E_f</code> variables
denote the probability that feature <code class="reqn">f</code> will go extinct.
</p>
<p>Now that we have defined all the data and variables, we can formulate
the problem. For convenience, let the symbol used to denote each set also
represent its cardinality (e.g. if there are ten features, let <code class="reqn">F</code>
represent the set of ten features and also the number ten).
</p>
<p style="text-align: center;"><code class="reqn">
  \mathrm{Minimize} \space \sum_{i = 0}^{I} C_i X_i \space
  \mathrm{(eqn \space 1a)} \\
  \mathrm{Subject \space to} \space  \\
  (1 - E_f) \geq T_f \space \forall f \in F \space
  \mathrm{(eqn \space 1b)} \\
  E_f = 1 - \sum_{j = 0}^{J} Z_{fj} Q_{fj} \space \forall \space f \in F
  \space \mathrm{(eqn \space 1c)} \\
  Z_{fj} \leq Y_{j} \space \forall \space j \in J \space \mathrm{(eqn \space
  1d)} \\
  \sum_{j = 0}^{J} Z_{fj} \times \mathrm{ceil}(Q_{fj}) = 1 \space \forall
  \space f \in F \space \mathrm{(eqn \space 1e)} \\
  A_{ij} Y_{j} \leq X_{i} \space \forall \space i \in I, j \in J \space
  \mathrm{(eqn \space 1f)} \\
  E_{f} \geq 0, E_{f} \leq 1 \space \forall \space b \in B \space
  \mathrm{(eqn \space 1g)} \\
  X_{i}, Y_{j}, Z_{fj} \in [0, 1] \space \forall \space i \in I, j \in J, f
  \in F \space \mathrm{(eqn \space 1h)}
  </code>
</p>

<p>The objective (eqn 1a) is to minimize the cost of the funded actions.
Constraints (eqn 1b) ensure that the persistence targets are met.
Constraints (eqn 1c) calculate the probability that each feature
will go extinct according to their allocated project.
Constraints (eqn 1d) ensure that feature can only be allocated to projects
that have all of their actions funded. Constraints (eqn 1e) state that each
feature can only be allocated to a single project. Constraints (eqn 1f)
ensure that a project cannot be funded unless all of its actions are
funded. Constraints (eqns 1g) ensure that the probability variables
(<code class="reqn">E_f</code>) are bounded between zero and one. Constraints (eqns 1h) ensure
that the action funding (<code class="reqn">X_i</code>), project funding (<code class="reqn">Y_j</code>), and
project allocation (<code class="reqn">Z_{fj}</code>) variables are binary.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the objective
added to it.
</p>


<h3>References</h3>

<p>Ball IR, Possingham HP &amp; Watts M (2009) Marxan and relatives: software for
spatial conservation prioritisation.
<em>Spatial conservation prioritisation: Quantitative methods and
computational tools</em>, 185-195.
</p>


<h3>See Also</h3>

<p><a href="#topic+objectives">objectives</a>, <a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load the ggplot2 R package to customize plot
library(ggplot2)

# load data
data(sim_projects, sim_features, sim_actions)

# build problem with minimum set objective and targets that require each
# feature to have a 30% chance of persisting into the future
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_absolute_targets(0.3) %&gt;%
      add_binary_decisions()

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution, and add a dashed line to indicate the feature targets
plot(p, s) +
geom_hline(yintercept = 0.3, linetype = "dashed")

## End(Not run)
</code></pre>

<hr>
<h2 id='add_random_solver'>Add a random solver</h2><span id='topic+add_random_solver'></span>

<h3>Description</h3>

<p>Specify that solutions should be generated using random processes. Although
prioritizations should be developed using optimization routines,
a portfolio of randomly generated solutions can be useful for evaluating
the effectiveness of solutions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_random_solver(x, number_solutions = 1, verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_random_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_random_solver_+3A_number_solutions">number_solutions</code></td>
<td>
<p><code>integer</code> number of solutions desired.
Defaults to 1. Note that the number of returned solutions can sometimes
be less than the argument to <code>number_solutions</code> depending on the
argument to <code>solution_pool_method</code>, for example if 100
solutions are requested but only 10 unique solutions exist, then only 10
solutions will be returned.</p>
</td></tr>
<tr><td><code id="add_random_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The algorithm used to randomly generate solutions depends on the
the objective specified for the project prioritization
<code><a href="#topic+problem">problem()</a></code>.
</p>
<p>For objectives which maximize benefit subject to budgetary constraints
(e.g. <code><a href="#topic+add_max_richness_objective">add_max_richness_objective()</a></code>):
</p>

<ol>
<li><p> All locked in and zero-cost actions are initially
selected for funding (excepting actions which are locked out).
</p>
</li>
<li><p> A project&mdash;and all of its associated actions&mdash;is randomly selected
for funding (excepting projects associated with locked out actions,
and projects which would cause the budget to be exceeded when added
to the existing set of selected actions).
</p>
</li>
<li><p> The previous step is repeated until no more projects can be
selected for funding without the total cost of the prioritized actions
exceeding the budget.
</p>
</li></ol>

<p>For objectives which minimize cost subject to biodiversity constraints
(i.e. <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>:
</p>

<ol>
<li><p> All locked in and zero-cost actions are initially
selected for funding (excepting actions which are locked out).
</p>
</li>
<li><p> A project&mdash;and all of its associated actions&mdash;is randomly selected
for funding (excepting projects associated with locked out actions,
and projects which would cause the budget to be exceeded when added
to the existing set of selected actions).
</p>
</li>
<li><p> The previous step is repeated until all of the persistence targets
are met.
</p>
</li></ol>



<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with random solver, and generate 100 random solutions
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_random_solver(number_solutions = 100)

# print problem
print(p1)

# solve problem
s1 &lt;- solve(p1)

# print solutions
print(s1)

# plot first random solution
plot(p1, s1)

# plot histogram of the objective values for the random solutions
hist(s1$obj, xlab = "Expected richness", xlim = c(0, 2.5),
     main = "Histogram of random solutions")

# since the objective values don't tell us much about the quality of the
# solutions, we can find the optimal solution and calculate how different
# each of the random solutions is from optimality

## Not run: 
# find the optimal objective value using an exact algorithms solver
s2 &lt;- p1 %&gt;%
      add_default_solver() %&gt;%
      solve()

# create new column in s1 with percent difference from optimality
s1$optimality_diff &lt;- ((s2$obj - s1$obj) / s1$obj) * 100

# plot histogram showing the quality of the random solutions
# higher numbers indicate worse solutions
hist(s1$optimality_diff, xlab = "Difference from optimality (%)",
     main = "Histogram of random solutions", xlim = c(0, 50))

## End(Not run)
</code></pre>

<hr>
<h2 id='add_relative_targets'>Add relative targets</h2><span id='topic+add_relative_targets'></span><span id='topic+add_relative_targets+2CProjectProblem+2Cnumeric-method'></span><span id='topic+add_relative_targets+2CProjectProblem+2Ccharacter-method'></span>

<h3>Description</h3>

<p>Set targets for a project prioritization <code><a href="#topic+problem">problem()</a></code> as a proportion
(between 0 and 1) of the maximum probability of
persistence associated with the best project for feature. For instance,
if the best project for a feature has an 80% probability of persisting,
setting a 50% (i.e. <code>0.5</code>) relative target will correspond to a 40%
threshold probability of persisting.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_relative_targets(x, targets)

## S4 method for signature 'ProjectProblem,numeric'
add_relative_targets(x, targets)

## S4 method for signature 'ProjectProblem,character'
add_relative_targets(x, targets)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_relative_targets_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_relative_targets_+3A_targets">targets</code></td>
<td>
<p>Object that specifies the targets for each feature. See the
Details section for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Targets are used to specify the minimum probability of persistence
for each feature in solutions. For minimum set objectives
(i.e. <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>, these targets
specify the minimum probability of persistence required for each species
in the solution. And for budget constrained objectives that use targets
(i.e.<code><a href="#topic+add_max_targets_met_objective">add_max_targets_met_objective()</a></code>), these targets
specify the minimum threshold probability of persistence that needs to be
achieved to count the benefits for conserving these species.
Please note that attempting to solve problems with objectives that require
targets without specifying targets will throw an error.
</p>
<p>The targets for a problem can be specified in several different ways:
</p>

<dl>
<dt><code>numeric</code></dt><dd><p><code>vector</code> of target values for each feature.
The order of the target values should correspond to the order
of the features in the data used to create the argument to <code>x</code>.
Additionally, for convenience, this type of argument can be a single
value to assign the same target to each feature.</p>
</dd>
<dt><code>character</code></dt><dd><p>specifying the name of column in the
feature data (i.e. the argument to <code>features</code> in the
<code><a href="#topic+problem">problem()</a></code> function) that contains the persistence targets.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with minimum set objective and targets that require each
# feature to have a level of persistence that is greater than or equal to
# 70% of the best project for conserving it
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_relative_targets(0.7) %&gt;%
      add_binary_decisions()

# print problem
print(p1)

# build problem with minimum set objective and specify targets that require
# different levels of persistence for each feature
p2 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_relative_targets(c(0.2, 0.3, 0.4, 0.5, 0.6)) %&gt;%
      add_binary_decisions()

# print problem
print(p2)

# add a column name to the feature data with targets
sim_features$target &lt;- c(0.2, 0.3, 0.4, 0.5, 0.6)

# build problem with minimum set objective and specify targets using
# column name in the feature data
p3 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_relative_targets("target") %&gt;%
      add_binary_decisions()

## Not run: 
# print problem
print(p3)

# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)

# print solutions
print(s1)
print(s2)
print(s3)

# plot solutions
plot(p1, s1)
plot(p2, s2)
plot(p3, s3)

## End(Not run)
</code></pre>

<hr>
<h2 id='add_rsymphony_solver'>Add a SYMPHONY solver with <span class="pkg">Rsymphony</span></h2><span id='topic+add_rsymphony_solver'></span>

<h3>Description</h3>

<p>Specify that the <em>SYMPHONY</em> software should be used to solve a
project prioritization <code><a href="#topic+problem">problem()</a></code> using the <span class="pkg">Rsymphony</span>
package. This function can also be used to customize the behavior of the
solver. It requires the <span class="pkg">Rsymphony</span> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>add_rsymphony_solver(
  x,
  gap = 0,
  time_limit = .Machine$integer.max,
  first_feasible = FALSE,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="add_rsymphony_solver_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="add_rsymphony_solver_+3A_gap">gap</code></td>
<td>
<p><code>numeric</code> gap to optimality. This gap is relative
and expresses the acceptable deviance from the optimal objective.
For example, a value of 0.01 will result in the solver stopping when
it has found a solution within 1% of optimality.
Additionally, a value of 0 will result in the solver stopping
when it has found an optimal solution.
The default value is 0.1 (i.e. 10% from optimality).</p>
</td></tr>
<tr><td><code id="add_rsymphony_solver_+3A_time_limit">time_limit</code></td>
<td>
<p><code>numeric</code> time limit in seconds to run the optimizer.
The solver will return the current best solution when this time limit is
exceeded.</p>
</td></tr>
<tr><td><code id="add_rsymphony_solver_+3A_first_feasible">first_feasible</code></td>
<td>
<p><code>logical</code> should the first feasible solution be
be returned? If <code>first_feasible</code> is set to <code>TRUE</code>, the solver
will return the first solution it encounters that meets all the
constraints, regardless of solution quality. Note that the first feasible
solution is not an arbitrary solution, rather it is derived from the
relaxed solution, and is therefore often reasonably close to optimality.
Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="add_rsymphony_solver_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code> should information be printed while solving
optimization problems?</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a> is an
open-source integer programming solver that is part of the Computational
Infrastructure for Operations Research (COIN-OR) project, an initiative
to promote development of open-source tools for operations research (a
field that includes linear programming). The <span class="pkg">Rsymphony</span> package
provides an interface to COIN-OR and is available on <em>CRAN</em>.
This solver uses the <span class="pkg">Rsymphony</span> package to solve problems.
</p>


<h3>Value</h3>

<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object with the solver added
to it.
</p>


<h3>See Also</h3>

<p><a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data(sim_projects, sim_features, sim_actions)

# build problem with Rsymphony solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_rsymphony_solver()

# print problem
print(p)

# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='array_parameters'>Array parameters</h2><span id='topic+array_parameters'></span><span id='topic+proportion_parameter_array'></span><span id='topic+binary_parameter_array'></span><span id='topic+integer_parameter_array'></span><span id='topic+numeric_parameter_array'></span>

<h3>Description</h3>

<p>Create parameters that consist of multiple numbers. If an attempt is made
to create a parameter with conflicting settings then an error will be thrown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proportion_parameter_array(name, value, label)

binary_parameter_array(name, value, label)

integer_parameter_array(
  name,
  value,
  label,
  lower_limit = rep(as.integer(-.Machine$integer.max), length(value)),
  upper_limit = rep(as.integer(.Machine$integer.max), length(value))
)

numeric_parameter_array(
  name,
  value,
  label,
  lower_limit = rep(.Machine$double.xmin, length(value)),
  upper_limit = rep(.Machine$double.xmax, length(value))
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="array_parameters_+3A_name">name</code></td>
<td>
<p><code>character</code> name of parameter.</p>
</td></tr>
<tr><td><code id="array_parameters_+3A_value">value</code></td>
<td>
<p><code>vector</code> of values.</p>
</td></tr>
<tr><td><code id="array_parameters_+3A_label">label</code></td>
<td>
<p><code>character</code> <code>vector</code> of labels for each value.</p>
</td></tr>
<tr><td><code id="array_parameters_+3A_lower_limit">lower_limit</code></td>
<td>
<p><code>vector</code> of values denoting the minimum acceptable
value for each element in <code>value</code>. Defaults to the
smallest possible number on the system.</p>
</td></tr>
<tr><td><code id="array_parameters_+3A_upper_limit">upper_limit</code></td>
<td>
<p><code>vector</code> of values denoting the maximum acceptable
value for each element in <code>value</code>. Defaults to the
largest  possible number on the system.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Below is a list of parameter generating functions and a brief
description of each.
</p>

<dl>
<dt>proportion_parameter_array</dt><dd><p>a parameter that consists of multiple
<code>numeric</code> values that are between zero and one.</p>
</dd>
<dt>binary_parameter_array</dt><dd><p>a parameter that consists of multiple
<code>integer</code> values that are either zero or one.</p>
</dd>
<dt>integer_parameter_array</dt><dd><p>a parameter that consists of multiple
<code>integer</code> values.</p>
</dd>
<dt>numeric_parameter_array</dt><dd><p>a parameter that consists of multiple
<code>numeric</code> values.</p>
</dd>
</dl>



<h3>Value</h3>

<p><a href="#topic+ArrayParameter-class">ArrayParameter</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># proportion parameter array
p1 &lt;- proportion_parameter_array('prop_array', c(0.1, 0.2, 0.3),
                                 letters[1:3])
print(p1) # print it
p1$get() # get value
p1$id # get id
invalid &lt;- data.frame(value = 1:3, row.names=letters[1:3]) # invalid values
p1$validate(invalid) # check invalid input is invalid
valid &lt;- data.frame(value = c(0.4, 0.5, 0.6), row.names=letters[1:3]) # valid
p1$validate(valid) # check valid input is valid
p1$set(valid) # change value to valid input
print(p1)

# binary parameter array
p2 &lt;- binary_parameter_array('bin_array', c(0L, 1L, 0L), letters[1:3])
print(p2) # print it
p2$get() # get value
p2$id # get id
invalid &lt;- data.frame(value = 1:3, row.names=letters[1:3]) # invalid values
p2$validate(invalid) # check invalid input is invalid
valid &lt;- data.frame(value = c(0L, 0L, 0L), row.names=letters[1:3]) # valid
p2$validate(valid) # check valid input is valid
p2$set(valid) # change value to valid input
print(p2)

# integer parameter array
p3 &lt;- integer_parameter_array('int_array', c(1:3), letters[1:3])
print(p3) # print it
p3$get() # get value
p3$id # get id
invalid &lt;- data.frame(value = rnorm(3), row.names=letters[1:3]) # invalid
p3$validate(invalid) # check invalid input is invalid
valid &lt;- data.frame(value = 5:7, row.names=letters[1:3]) # valid
p3$validate(valid) # check valid input is valid
p3$set(valid) # change value to valid input
print(p3)

# numeric parameter array
p4 &lt;- numeric_parameter_array('dbl_array', c(0.1, 4, -5), letters[1:3])
print(p4) # print it
p4$get() # get value
p4$id # get id
invalid &lt;- data.frame(value = c(NA, 1, 2), row.names=letters[1:3]) # invalid
p4$validate(invalid) # check invalid input is invalid
valid &lt;- data.frame(value = c(1, 2, 3), row.names=letters[1:3]) # valid
p4$validate(valid) # check valid input is valid
p4$set(valid) # change value to valid input
print(p4)

# numeric parameter array with lower bounds
p5 &lt;- numeric_parameter_array('b_dbl_array', c(0.1, 4, -5), letters[1:3],
                              lower_limit=c(0, 1, 2))
print(p5) # print it
p5$get() # get value
p5$id# get id
invalid &lt;- data.frame(value = c(-1, 5, 5), row.names=letters[1:3]) # invalid
p5$validate(invalid) # check invalid input is invalid
valid &lt;- data.frame(value = c(0, 1, 2), row.names=letters[1:3]) # valid
p5$validate(valid) # check valid input is valid
p5$set(valid) # change value to valid input
print(p5)

</code></pre>

<hr>
<h2 id='ArrayParameter-class'>Array parameter prototype</h2><span id='topic+ArrayParameter-class'></span><span id='topic+ArrayParameter'></span>

<h3>Description</h3>

<p>This prototype is used to represent a parameter has multiple values. Each
value is has a label to differentiate values. <strong>Only experts should
interact directly with this prototype.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$id</dt><dd><p><code>character</code> identifier for parameter.</p>
</dd>
<dt>$name</dt><dd><p><code>character</code> name of parameter.</p>
</dd>
<dt>$value</dt><dd><p><code>numeric</code> <code>vector</code> of values.</p>
</dd>
<dt>$label</dt><dd><p><code>character</code> <code>vector</code> of names for each value.</p>
</dd>
<dt>$default</dt><dd><p><code>numeric</code> <code>vector</code> of default values.</p>
</dd>
<dt>$length</dt><dd><p><code>integer</code> number of values.</p>
</dd>
<dt>$class</dt><dd><p><code>character</code> class of values.</p>
</dd>
<dt>$lower_limit</dt><dd><p><code>numeric</code> <code>vector</code> specifying the minimum
permitted values.</p>
</dd>
<dt>$upper_limit</dt><dd><p><code>numeric</code> <code>vector</code> specifying the maximum
permitted values.</p>
</dd>
<dt>$widget</dt><dd><p><code>function</code> used to construct a
<code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> interface for modifying values.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$validate(tbl)</code>
</p>
<p><code>x$get()</code>
</p>
<p><code>x$set(tbl)</code>
</p>
<p><code>x$reset()</code>
</p>
<p><code>x$render(...)</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>tbl</dt><dd><p><code><a href="base.html#topic+data.frame">data.frame()</a></code> containing new parameter values with
row names indicating the labels and a column called &quot;values&quot;
containing the new parameter values.</p>
</dd>
<dt>...</dt><dd><p>arguments passed to function in <code>widget</code> field.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p><code>character</code> representation of object.</p>
</dd>
<dt>validate</dt><dd><p>check if a proposed new set of parameters are valid.</p>
</dd>
<dt>get</dt><dd><p>return a <code><a href="base.html#topic+data.frame">base::data.frame()</a></code> containing the
parameter values.</p>
</dd>
<dt>set</dt><dd><p>update the parameter values using a
<code><a href="base.html#topic+data.frame">base::data.frame()</a></code>.</p>
</dd>
<dt>reset</dt><dd><p>update the parameter values to be the default values.</p>
</dd>
<dt>render</dt><dd><p>create a <code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> widget to modify
parameter values.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+ScalarParameter-class">ScalarParameter</a>, <a href="#topic+Parameter-class">Parameter</a>.
</p>

<hr>
<h2 id='as.Id'>Coerce object to another object</h2><span id='topic+as.Id'></span><span id='topic+as.Id.character'></span><span id='topic+as'></span><span id='topic+as.list.Parameters'></span>

<h3>Description</h3>

<p>Coerce an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as.Id(x, ...)

## S3 method for class 'character'
as.Id(x, ...)

## S3 method for class 'Parameters'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.Id_+3A_x">x</code></td>
<td>
<p>Object.</p>
</td></tr>
<tr><td><code id="as.Id_+3A_...">...</code></td>
<td>
<p>unused arguments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An Object.
</p>

<hr>
<h2 id='as.list.OptimizationProblem'>Convert <code>OptimizationProblem</code> to list</h2><span id='topic+as.list.OptimizationProblem'></span>

<h3>Description</h3>

<p>Convert <code>OptimizationProblem</code> to list
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'OptimizationProblem'
as.list(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as.list.OptimizationProblem_+3A_x">x</code></td>
<td>
<p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
<tr><td><code id="as.list.OptimizationProblem_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code><a href="base.html#topic+list">list()</a></code> object.
</p>

<hr>
<h2 id='branch_matrix'>Branch matrix</h2><span id='topic+branch_matrix'></span><span id='topic+branch_matrix.default'></span><span id='topic+branch_matrix.phylo'></span>

<h3>Description</h3>

<p>Phylogenetic trees depict the evolutionary relationships between different
species. Each branch in a phylogenetic tree represents a period of
evolutionary history. Species that are connected to the same branch
share the same period of evolutionary history represented by the branch.
This function creates
a matrix that shows which species are connected with which branches. In
other words, it creates a matrix that shows which periods of evolutionary
history each species has experienced.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>branch_matrix(x, ...)

## Default S3 method:
branch_matrix(x, ...)

## S3 method for class 'phylo'
branch_matrix(x, assert_validity = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="branch_matrix_+3A_x">x</code></td>
<td>
<p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> tree object.</p>
</td></tr>
<tr><td><code id="branch_matrix_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
<tr><td><code id="branch_matrix_+3A_assert_validity">assert_validity</code></td>
<td>
<p><code>logical</code> value (i.e. <code>TRUE</code> or <code>FALSE</code>
indicating if the argument to <code>x</code> should be checked for validity.
Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> sparse matrix object. Each row
corresponds to a different species. Each column corresponds to a different
branch. Species that inherit from a given branch are indicated with a one.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load Matrix package to plot matrices
library(Matrix)

# load data
data(sim_tree)

# generate species by branch matrix
m &lt;- branch_matrix(sim_tree)

# plot data
par(mfrow = c(1,2))
plot(sim_tree, main = "phylogeny")
image(m, main = "branch matrix")

</code></pre>

<hr>
<h2 id='Collection-class'>Collection prototype</h2><span id='topic+Collection-class'></span><span id='topic+Collection'></span>

<h3>Description</h3>

<p>This prototype represents a collection of
<a href="#topic+ProjectModifier-class">ProjectModifier</a> objects.
</p>


<h3>Fields</h3>


<dl>
<dt>$...</dt><dd><p><a href="#topic+ProjectModifier-class">ProjectModifier</a> objects stored
in the collection.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$ids()</code>
</p>
<p><code>x$length()</code>
</p>
<p><code>x$add</code>
</p>
<p><code>x$remove(id)</code>
</p>
<p><code>x$get_parameter(id)</code>
</p>
<p><code>x$set_parameter(id, value)</code>
</p>
<p><code>x$render_parameter(id)</code>
</p>
<p><code>x$render_all_parameters()</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>id</dt><dd><p><code>id</code> object.</p>
</dd>
<dt>value</dt><dd><p>any object.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p><code>character</code> representation of object.</p>
</dd>
<dt>ids</dt><dd><p><code>character</code> ids for objects inside collection.</p>
</dd>
<dt>length</dt><dd><p><code>integer</code> number of objects inside collection.</p>
</dd>
<dt>add</dt><dd><p>add <a href="#topic+ProjectModifier-class">ProjectModifier</a> object.</p>
</dd>
<dt>remove</dt><dd><p>remove an item from the collection.</p>
</dd>
<dt>get_parameter</dt><dd><p>retrieve the value of a parameter in the object
using an <code>id</code> object.</p>
</dd>
<dt>set_parameter</dt><dd><p>change the value of a parameter in the object
to a new object.</p>
</dd>
<dt>render_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify the
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_parameters</dt><dd><p>generate a <code><a href="shiny.html#topic+reexports">shiny::div()</a></code>
containing all the parameters&quot; widgets.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+Constraint-class">Constraint</a>.
</p>

<hr>
<h2 id='compile'>Compile a problem</h2><span id='topic+compile'></span><span id='topic+compile.ProjectProblem'></span>

<h3>Description</h3>

<p>Compile a project prioritization <code><a href="#topic+problem">problem()</a></code> into a general
purpose format for optimization.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compile(x, ...)

## S3 method for class 'ProjectProblem'
compile(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="compile_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="compile_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function might be useful for those interested in understanding
how their project prioritization <code><a href="#topic+problem">problem()</a></code> is expressed
as a mathematical problem. However, if the problem just needs to
be solved, then the <code><a href="#topic+solve">solve()</a></code> function should be used instead.
</p>


<h3>Value</h3>

<p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective, $200 budget, and
# binary decisions
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

# print problem
print(p)

# compile problem
o &lt;- compile(p)

# print compiled problem
print(o)
</code></pre>

<hr>
<h2 id='Constraint-class'>Constraint prototype</h2><span id='topic+Constraint-class'></span><span id='topic+Constraint'></span>

<h3>Description</h3>

<p>This prototype is used to represent the constraints used when making a
prioritization. <strong>This prototype represents a recipe, to actually
add constraints to a planning problem, see the help page on
<a href="#topic+constraints">constraints</a>. Only experts should use this class directly.</strong> This
prototype inherits from the <a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>


<h3>See Also</h3>

<p><a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>

<hr>
<h2 id='constraints'>Project prioritization problem constraints</h2><span id='topic+constraints'></span>

<h3>Description</h3>

<p>A constraint can be added to a project prioritization <code><a href="#topic+problem">problem()</a></code>
to ensure that solutions exhibit a specific characteristic.
</p>


<h3>Details</h3>

<p>The following constraints can be added to a project prioritization
<code><a href="#topic+problem">problem()</a></code>:
</p>

<dl>
<dt><code><a href="#topic+add_locked_in_constraints">add_locked_in_constraints()</a></code></dt><dd><p>Add constraints to ensure
that certain actions are prioritized for funding.</p>
</dd>
<dt><code><a href="#topic+add_locked_out_constraints">add_locked_out_constraints()</a></code></dt><dd><p>Add constraints to ensure
that certain actions are not prioritized for funding.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+decisions">decisions</a>, <a href="#topic+objectives">objectives</a>,
<code><a href="#topic+problem">problem()</a></code>, <a href="#topic+solvers">solvers</a>, <a href="#topic+targets">targets</a>,
<a href="#topic+weights">weights</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective and $150 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 150) %&gt;%
     add_binary_decisions()

# print problem
print(p1)

# build another problem, and lock in the third action
p2 &lt;- p1 %&gt;%
      add_locked_in_constraints(c(3))

# print problem
print(p2)

# build another problem, and lock out the second action
p3 &lt;- p1 %&gt;%
      add_locked_out_constraints(c(2))

# print problem
print(p3)

## Not run: 
# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)
s3 &lt;- solve(p3)

# print the actions selected for funding in each of the solutions
print(s1[, sim_actions$name])
print(s2[, sim_actions$name])
print(s3[, sim_actions$name])

## End(Not run)
</code></pre>

<hr>
<h2 id='Decision-class'>Decision prototype</h2><span id='topic+Decision-class'></span><span id='topic+Decision'></span>

<h3>Description</h3>

<p>This prototype  used to represent the type of decision that is made
when prioritizing planning units. <strong>This prototype represents
a recipe to make a decision, to actually specify
the type of decision in a planning problem, see the help page on
<a href="#topic+decisions">decisions</a>. Only experts should use this class directly.</strong>
This class inherits from the <a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>


<h3>See Also</h3>

<p><a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>

<hr>
<h2 id='decisions'>Specify the type of decisions</h2><span id='topic+decisions'></span>

<h3>Description</h3>

<p>Project prioritization problems involve making decisions about
how funding will be allocated to management actions.
</p>


<h3>Details</h3>

<p>Please note that only one type of decision is currently supported:
</p>

<dl>
<dt><code><a href="#topic+add_binary_decisions">add_binary_decisions()</a></code></dt><dd>
<p>This is the conventional type of decision where management actions are
either prioritized for funding or not.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>, <a href="#topic+objectives">objectives</a>,
<code><a href="#topic+problem">problem()</a></code>, <a href="#topic+solvers">solvers</a>, <a href="#topic+targets">targets</a>,
<a href="#topic+weights">weights</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective, $200 budget, and
# binary decisions
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='feature_names'>Feature names</h2><span id='topic+feature_names'></span><span id='topic+feature_names+2CProjectProblem-method'></span>

<h3>Description</h3>

<p>Extract the names of the features in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>feature_names(x)

## S4 method for signature 'ProjectProblem'
feature_names(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="feature_names_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> feature names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print feature names
feature_names(p)
</code></pre>

<hr>
<h2 id='is.Id'>Is it?</h2><span id='topic+is.Id'></span><span id='topic+is.Waiver'></span><span id='topic+is'></span>

<h3>Description</h3>

<p>Test if an object inherits from a class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is.Id(x)

is.Waiver(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is.Id_+3A_x">x</code></td>
<td>
<p>Object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>logical</code> indicating if it inherits from the class.
</p>

<hr>
<h2 id='matrix_parameters'>Matrix parameters</h2><span id='topic+matrix_parameters'></span><span id='topic+numeric_matrix_parameter'></span><span id='topic+binary_matrix_parameter'></span>

<h3>Description</h3>

<p>Create a parameter that represents a matrix object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>numeric_matrix_parameter(
  name,
  value,
  lower_limit = .Machine$double.xmin,
  upper_limit = .Machine$double.xmax,
  symmetric = FALSE
)

binary_matrix_parameter(name, value, symmetric = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="matrix_parameters_+3A_name">name</code></td>
<td>
<p><code>character</code> name of parameter.</p>
</td></tr>
<tr><td><code id="matrix_parameters_+3A_value">value</code></td>
<td>
<p><code>matrix</code> object.</p>
</td></tr>
<tr><td><code id="matrix_parameters_+3A_lower_limit">lower_limit</code></td>
<td>
<p><code>numeric</code> values denoting the minimum acceptable
value in the matrix. Defaults to the smallest possible number on the
system.</p>
</td></tr>
<tr><td><code id="matrix_parameters_+3A_upper_limit">upper_limit</code></td>
<td>
<p><code>numeric</code> values denoting the maximum acceptable
value in the matrix. Defaults to the smallest possible number on the
system.</p>
</td></tr>
<tr><td><code id="matrix_parameters_+3A_symmetric">symmetric</code></td>
<td>
<p><code>logical</code> must the must be matrix be symmetric?
Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+MiscParameter-class">MiscParameter</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create matrix
m &lt;- matrix(runif(9), ncol = 3)
colnames(m) &lt;- letters[1:3]
rownames(m) &lt;- letters[1:3]

# create a numeric matrix parameter
p1 &lt;- numeric_matrix_parameter("m", m)
print(p1) # print it
p1$get() # get value
p1$id # get id
p1$validate(m[, -1]) # check if parameter can be updated
p1$set(m + 1) # set parameter to new values
p1$print() # print it again

# create a binary matrix parameter
m &lt;- matrix(round(runif(9)), ncol = 3)
colnames(m) &lt;- letters[1:3]
rownames(m) &lt;- letters[1:3]

# create a binary matrix parameter
p2 &lt;- binary_matrix_parameter("m", m)
print(p2) # print it
p2$get() # get value
p2$id # get id
p2$validate(m[, -1]) # check if parameter can be updated
p2$set(m + 1) # set parameter to new values
p2$print() # print it again
</code></pre>

<hr>
<h2 id='misc_parameter'>Miscellaneous parameter</h2><span id='topic+misc_parameter'></span>

<h3>Description</h3>

<p>Create a parameter that consists of a miscellaneous object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>misc_parameter(name, value, validator, widget)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="misc_parameter_+3A_name">name</code></td>
<td>
<p><code>character</code> name of parameter.</p>
</td></tr>
<tr><td><code id="misc_parameter_+3A_value">value</code></td>
<td>
<p>object.</p>
</td></tr>
<tr><td><code id="misc_parameter_+3A_validator">validator</code></td>
<td>
<p><code>function</code> to validate changes to the parameter. This
function must have a single argument and return either <code>TRUE</code> or
<code>FALSE</code> depending on if the argument is valid candidate for the
parameter.</p>
</td></tr>
<tr><td><code id="misc_parameter_+3A_widget">widget</code></td>
<td>
<p><code>function</code> to render a <code>shiny</code> widget. This function
should must have a single argument that accepts a valid object and return
a <code>shiny.tag</code> or <code>shiny.tag.list</code> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+MiscParameter-class">MiscParameter</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(iris, mtcars)

# create table parameter can that can be updated to any other object
p1 &lt;- misc_parameter("tbl", iris,
                     function(x) TRUE,
                     function(id, x) structure(id, .Class = "shiny.tag"))
print(p1) # print it
p1$get() # get value
p1$id # get id
p1$validate(mtcars) # check if parameter can be updated
p1$set(mtcars) # set parameter to mtcars
p1$print() # print it again

# create table parameter with validation function that requires
# all values in the first column to be less then 200 and that the
# parameter have the same column names as the iris data set
p2 &lt;- misc_parameter("tbl2", iris,
                     function(x) all(names(x) %in% names(iris)) &amp;&amp;
                                 all(x[[1]] &lt; 200),
                     function(id, x) structure(id, .Class = "shiny.tag"))
print(p2) # print it
p2$get() # get value
p2$id # get id
p2$validate(mtcars) # check if parameter can be updated
iris2 &lt;- iris; iris2[1,1] &lt;- 300 # create updated iris data set
p2$validate(iris2) # check if parameter can be updated
iris3 &lt;- iris; iris2[1,1] &lt;- 100 # create updated iris data set
p2$set(iris3) # set parameter to iris3
p2$print() # print it again

</code></pre>

<hr>
<h2 id='MiscParameter-class'>Miscellaneous parameter prototype</h2><span id='topic+MiscParameter-class'></span><span id='topic+MiscParameter'></span>

<h3>Description</h3>

<p>This prototype is used to represent a parameter that can be any object.
<strong>Only experts should interact directly with this prototype.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$id</dt><dd><p><code>character</code> identifier for parameter.</p>
</dd>
<dt>$name</dt><dd><p><code>character</code> name of parameter.</p>
</dd>
<dt>$value</dt><dd><p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object.</p>
</dd>
<dt>$validator</dt><dd><p><code>list</code> object containing a <code>function</code> that
is used to validate changes to the parameter.</p>
</dd>
<dt>$widget</dt><dd><p><code>list</code> object containing a <code>function</code> used to
construct a <em>shiny</em> interface for modifying values.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$validate(x)</code>
</p>
<p><code>x$get()</code>
</p>
<p><code>x$set(x)</code>
</p>
<p><code>x$reset()</code>
</p>
<p><code>x$render(...)</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>x</dt><dd><p>object used to set a new parameter value.</p>
</dd>
<dt>...</dt><dd><p>arguments passed to <code style="white-space: pre;">&#8288;$widget&#8288;</code>.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>validate</dt><dd><p>check if a proposed new parameter is valid.</p>
</dd>
<dt>get</dt><dd><p>extract the parameter value.</p>
</dd>
<dt>set</dt><dd><p>update the parameter value.</p>
</dd>
<dt>reset</dt><dd><p>update the parameter value to be the default value.</p>
</dd>
<dt>render</dt><dd><p>create a <code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> widget to modify
parameter values.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+Parameter-class">Parameter</a>.
</p>

<hr>
<h2 id='new_id'>Identifier</h2><span id='topic+new_id'></span><span id='topic+Id'></span>

<h3>Description</h3>

<p>Generate a new unique identifier.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_id()
</code></pre>


<h3>Details</h3>

<p>Identifiers are made using the <code><a href="uuid.html#topic+UUIDgenerate">uuid::UUIDgenerate()</a></code>.
</p>


<h3>Value</h3>

<p><code>Id</code> object.
</p>


<h3>See Also</h3>

<p><code><a href="uuid.html#topic+UUIDgenerate">uuid::UUIDgenerate()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create new id
i &lt;- new_id()

# print id
print(i)

# convert to character
as.character(i)

# check if it is an Id object
is.Id(i)

</code></pre>

<hr>
<h2 id='new_optimization_problem'>Optimization problem</h2><span id='topic+new_optimization_problem'></span>

<h3>Description</h3>

<p>Generate a new empty <a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_optimization_problem()
</code></pre>


<h3>Value</h3>

<p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+OptimizationProblem-methods">OptimizationProblem-methods()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create empty OptimizationProblem object
x &lt;- new_optimization_problem()

# print new object
print(x)
</code></pre>

<hr>
<h2 id='new_waiver'>Waiver</h2><span id='topic+new_waiver'></span>

<h3>Description</h3>

<p>Create a <code>waiver</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_waiver()
</code></pre>


<h3>Details</h3>

<p>This object is used to represent that the user has not manually
specified a setting, and so defaults should be used. By explicitly
using a <code>new_waiver()</code>, this means that <code>NULL</code> objects can be a
valid setting. The use of a &quot;waiver&quot; object was inspired by the
<code>ggplot2</code> package.
</p>


<h3>Value</h3>

<p><code>object</code> of class <code>Waiver</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create new waiver object
w &lt;- new_waiver()

# print object
print(w)

# is it a waiver object?
is.Waiver(w)

</code></pre>

<hr>
<h2 id='number_of_actions'>Number of actions</h2><span id='topic+number_of_actions'></span><span id='topic+number_of_actions+2CProjectProblem-method'></span><span id='topic+number_of_actions+2COptimizationProblem-method'></span>

<h3>Description</h3>

<p>Extract the number of actions in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>number_of_actions(x)

## S4 method for signature 'ProjectProblem'
number_of_actions(x)

## S4 method for signature 'OptimizationProblem'
number_of_actions(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="number_of_actions_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> or
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>integer</code> number of actions.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print number of actions
number_of_actions(p)
</code></pre>

<hr>
<h2 id='number_of_features'>Number of features</h2><span id='topic+number_of_features'></span><span id='topic+number_of_features+2CProjectProblem-method'></span><span id='topic+number_of_features+2COptimizationProblem-method'></span>

<h3>Description</h3>

<p>Extract the number of features in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>number_of_features(x)

## S4 method for signature 'ProjectProblem'
number_of_features(x)

## S4 method for signature 'OptimizationProblem'
number_of_features(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="number_of_features_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> or
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>integer</code> number of features.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print number of features
number_of_features(p)
</code></pre>

<hr>
<h2 id='number_of_projects'>Number of projects</h2><span id='topic+number_of_projects'></span><span id='topic+number_of_projects+2CProjectProblem-method'></span><span id='topic+number_of_projects+2COptimizationProblem-method'></span>

<h3>Description</h3>

<p>Extract the number of projects in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>number_of_projects(x)

## S4 method for signature 'ProjectProblem'
number_of_projects(x)

## S4 method for signature 'OptimizationProblem'
number_of_projects(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="number_of_projects_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> or
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>integer</code> number of projects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print number of projects
number_of_projects(p)
</code></pre>

<hr>
<h2 id='Objective-class'>Objective prototype</h2><span id='topic+Objective-class'></span><span id='topic+Objective'></span>

<h3>Description</h3>

<p>This prototype is used to represent an objective that can be added to a
<a href="#topic+ProjectProblem-class">ProjectProblem</a> object. <strong>This prototype
represents a recipe to make an objective, to actually add an objective to a
planning  problem: see <a href="#topic+objectives">objectives</a>. Only experts should use this
class directly.</strong>
</p>

<hr>
<h2 id='objectives'>Problem objective</h2><span id='topic+objectives'></span>

<h3>Description</h3>

<p>An objective is used to specify the overall goal of a project prioritization
<code><a href="#topic+problem">problem()</a></code>. All project prioritization problems involve
minimizing or maximizing some kind of objective. For instance, the decision
maker may require a funding scheme that maximizes the total number of
species that are expected to persist into the future whilst ensuring that
the total cost of the funded actions does not exceed a budget.
Alternatively, the planner may require a solution that ensures that
each species meets a target level of persistence whilst minimizing the cost
of  the funded actions. A project prioritization
<code><a href="#topic+problem">problem()</a></code> <strong>must</strong> have a specified objective before it can
be solved, and attempting to solve a problem which does not have
a specified objective will throw an error.
</p>


<h3>Details</h3>

<p>The following objectives can be added to a conservation planning
<code><a href="#topic+problem">problem()</a></code>:
</p>

<dl>
<dt><code><a href="#topic+add_max_richness_objective">add_max_richness_objective()</a></code></dt><dd>
<p>Maximize the total number of features that are expected to persist,
whilst ensuring that the cost of the solution is within a pre-specified
budget (Joseph, Maloney &amp; Possingham 2009).</p>
</dd>
<dt><code><a href="#topic+add_max_targets_met_objective">add_max_targets_met_objective()</a></code></dt><dd>
<p>Maximize the total number of persistence targets met for the features,
whilst ensuring that the cost of the solution is within a pre-specified
budget (Chades <em>et al.</em> 2015).</p>
</dd>
<dt><code><a href="#topic+add_max_phylo_div_objective">add_max_phylo_div_objective()</a></code></dt><dd>
<p>Maximize the phylogenetic diversity that is expected to persist into the
future, whilst ensuring that the cost of the solution is within a
pre-specified budget (Bennett <em>et al.</em> 2014, Faith 2008).</p>
</dd>
<dt><code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code></dt><dd>
<p>Minimize the cost of the solution whilst ensuring that all targets are
met. This objective is conceptually similar to that used in <em>Marxan</em>
(Ball, Possingham &amp; Watts 2009).</p>
</dd>
</dl>



<h3>References</h3>

<p>Ball IR, Possingham HP &amp; Watts M (2009) Marxan and relatives: software for
spatial conservation prioritisation.
<em>Spatial conservation prioritisation: Quantitative methods and
computational tools</em>, 185-195.
</p>
<p>Bennett JR, Elliott G, Mellish B, Joseph LN, Tulloch AI,
Probert WJ, Di Fonzo MMI, Monks JM, Possingham HP &amp; Maloney R (2014)
Balancing phylogenetic diversity
and species numbers in conservation prioritization, using a case study of
threatened species in New Zealand. <em>Biological Conservation</em>,
<strong>174</strong>: 47&ndash;54.
</p>
<p>Chades I, Nicol S, van Leeuwen S, Walters B, Firn J, Reeson A, Martin TG &amp;
Carwardine J (2015) Benefits of integrating complementarity into priority
threat management. <em>Conservation Biology</em>, <strong>29</strong>, 525&ndash;536.
</p>
<p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461&ndash;1470.
</p>
<p>Joseph LN, Maloney RF &amp; Possingham HP (2009) Optimal allocation of
resources among threatened species: A project prioritization protocol.
<em>Conservation Biology</em>, <strong>23</strong>, 328&ndash;338.
</p>


<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>, <a href="#topic+decisions">decisions</a>,
<code><a href="#topic+problem">problem()</a></code>, <a href="#topic+solvers">solvers</a>, <a href="#topic+targets">targets</a>,
<a href="#topic+weights">weights</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions, sim_tree)

# build problem with maximum richness objective and $200 budget
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s1 &lt;- solve(p1)

# print solution
print(s1)

# plot solution
plot(p1, s1)

## End(Not run)

# build problem with maximum phylogenetic diversity objective and $200 budget
p2 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_phylo_div_objective(budget = 200, tree = sim_tree) %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s2 &lt;- solve(p2)

# print solution
print(s2)

# plot solution
plot(p2, s2)

## End(Not run)
# build problem with maximum targets met objective, $200 budget, and
# 40% persistence targets
p3 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_targets_met_objective(budget = 200) %&gt;%
     add_absolute_targets(0.4) %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s3 &lt;- solve(p3)

# print solution
print(s3)

# plot solution
plot(p3, s3)

## End(Not run)

# build problem with minimum set objective, $200 budget, and 40%
# persistence targets
p4 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_min_set_objective() %&gt;%
     add_absolute_targets(0.4) %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s4 &lt;- solve(p4)

# print solution
print(s4)

# plot solution
plot(p4, s4)

## End(Not run)
</code></pre>

<hr>
<h2 id='oppr'>oppr: Optimal Project Prioritization</h2><span id='topic+oppr'></span>

<h3>Description</h3>

<p>The <span class="pkg">oppr</span> <em>R</em> package a decision support tool for prioritizing
conservation projects. Prioritizations can be developed by maximizing
expected feature richness, expected
phylogenetic diversity, the number of features that meet persistence
targets, or identifying a set of projects that meet persistence targets
for minimal cost. Constraints (e.g. lock in
specific actions) and feature weights can also be specified to further
customize prioritizations. After defining a project prioritization
problem, solutions can be obtained using exact algorithms, heuristic
algorithms, or random processes. In particular, it is recommended to
install the 'Gurobi' optimizer (available from
<a href="https://www.gurobi.com">https://www.gurobi.com</a>)
because it can identify optimal solutions very quickly. Finally, methods
are provided for comparing different prioritizations and evaluating their
benefits.
</p>


<h3>Installation</h3>

<p>To make the most of this package, the <a href="https://bioconductor.org/packages/release/bioc/html/ggtree.html"><span class="pkg">ggtree</span></a> and
<a href="https://www.gurobi.com/documentation/8.1/refman/r_api_overview.html"><span class="pkg">gurobi</span></a> R packages will need to be installed.
Since the <a href="https://bioconductor.org/packages/release/bioc/html/ggtree.html"><span class="pkg">ggtree</span></a> package is exclusively available
at <a href="https://bioconductor.org">Bioconductor</a>&mdash;and is not available on
<a href="https://cran.r-project.org/">The Comprehensive R Archive Network</a>&mdash;please
execute the following command to install it:
<code style="white-space: pre;">&#8288;source("https://bioconductor.org/biocLite.R");biocLite("ggtree")&#8288;</code>.
If the installation process fails, please consult the
<a href="https://bioconductor.org/packages/release/bioc/html/ggtree.html">package's online documentation</a>. To install the <span class="pkg">gurobi</span> package, the
<a href="https://www.gurobi.com">Gurobi</a> optimization suite will first need to
be installed (see instructions for <a href="https://www.gurobi.com/documentation/8.1/quickstart_linux/software_installation_guid.html">Linux</a>,
<a href="https://www.gurobi.com/documentation/8.1/quickstart_mac/software_installation_guid.html">Mac OSX</a>, and
<a href="https://www.gurobi.com/documentation/8.1/quickstart_windows/software_installation_guid.html">Windows</a> operating systems). Although
<a href="https://www.gurobi.com">Gurobi</a> is a commercial software, academics
can obtain a
<a href="https://www.gurobi.com/downloads/end-user-license-agreement-academic/">special license for no cost</a>. After installing the
<a href="https://www.gurobi.com">Gurobi</a> optimization suite, the <span class="pkg">gurobi</span>
package can then be installed (see instructions for <a href="https://www.gurobi.com/documentation/8.1/quickstart_linux/r_installing_the_r_package.html">Linux</a>,
<a href="https://www.gurobi.com/documentation/8.1/quickstart_mac/r_installing_the_r_package.html">Mac OSX</a>, and
<a href="https://www.gurobi.com/documentation/8.1/quickstart_windows/r_installing_the_r_package.html">Windows</a> operating systems).
</p>


<h3>See Also</h3>

<p>Please refer to the package vignette for more information and worked
examples. This can be accessed using the code
<code>vignette("oppr")</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print project data
print(sim_projects)

# print action data
print(sim_features)

# print feature data
print(sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print output
print(s)

# print which actions are funded in the solution
s[, sim_actions$name, drop = FALSE]

# print the expected probability of persistence for each feature
# if the solution were implemented
s[, sim_features$name, drop = FALSE]

# visualize solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='OptimizationProblem-class'>Optimization problem class</h2><span id='topic+OptimizationProblem-class'></span><span id='topic+OptimizationProblem'></span>

<h3>Description</h3>

<p>The <code>OptimizationProblem</code> class is used to represent an optimization
problem. Data are stored in memory and accessed using an external pointer.
<strong>Only experts should interact with this class directly.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$ptr</dt><dd><p><code>externalptr</code> object.</p>
</dd>
<dt>$data</dt><dd><p><code>list</code> object.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$ncol()</code>
</p>
<p><code>x$nrow()</code>
</p>
<p><code>x$ncell()</code>
</p>
<p><code>x$modelsense()</code>
</p>
<p><code>x$vtype()</code>
</p>
<p><code>x$obj()</code>
</p>
<p><code>x$pwlobj()</code>
</p>
<p><code>x$A()</code>
</p>
<p><code>x$rhs()</code>
</p>
<p><code>x$sense()</code>
</p>
<p><code>x$lb()</code>
</p>
<p><code>x$ub()</code>
</p>
<p><code>x$number_of_projects()</code>
</p>
<p><code>x$number_of_actions()</code>
</p>
<p><code>x$number_of_features()</code>
</p>
<p><code>x$number_of_branches()</code>
</p>
<p><code>x$row_ids()</code>
</p>
<p><code>x$col_ids()</code>
</p>
<p><code>x$get_data()</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>ptr</dt><dd><p><code>externalptr</code> object.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p><code>character</code> representation of object.</p>
</dd>
<dt>ncol</dt><dd><p><code>integer</code> number of columns (variables) in model matrix.</p>
</dd>
<dt>nrow</dt><dd><p><code>integer</code> number of rows (constraints) in model matrix.</p>
</dd>
<dt>ncell</dt><dd><p><code>integer</code> number of cells in model matrix.</p>
</dd>
<dt>modelsense</dt><dd><p><code>character</code> model sense.</p>
</dd>
<dt>vtype</dt><dd><p><code>character</code> vector of variable types.</p>
</dd>
<dt>obj</dt><dd><p><code>numeric</code> vector containing the linear components of the
objective function.</p>
</dd>
<dt>pwlobj</dt><dd><p><code>list</code> object containing the piece-wise linear components
of the objective function.</p>
</dd>
<dt>A</dt><dd><p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> model matrix </p>
</dd>
<dt>rhs</dt><dd><p><code>numeric</code> vector of right-hand-side constraints.</p>
</dd>
<dt>sense</dt><dd><p><code>character</code> vector of constraint senses.</p>
</dd>
<dt>lb</dt><dd><p><code>numeric</code> vector of lower bounds for each decision variable.</p>
</dd>
<dt>ub</dt><dd><p><code>numeric</code> vector of upper bounds for each decision variable.</p>
</dd>
<dt>number_of_projects</dt><dd><p><code>integer</code> number of projects in the problem.</p>
</dd>
<dt>number_of_actions</dt><dd><p><code>integer</code> number of actions in the problem.</p>
</dd>
<dt>number_of_features</dt><dd><p><code>integer</code> number of features in the problem.</p>
</dd>
<dt>number_of_branches</dt><dd><p><code>integer</code> number of phylogenetic branches in
the problem.</p>
</dd>
<dt>col_ids</dt><dd><p><code>character</code> names describing each decision variable
(column) in the model matrix.</p>
</dd>
<dt>row_ids</dt><dd><p><code>character</code> names describing each constraint (row) in
in the model matrix.</p>
</dd>
<dt>get_data</dt><dd><p><code>list</code> containing additional data.</p>
</dd>
</dl>


<hr>
<h2 id='OptimizationProblem-methods'>Optimization problem methods</h2><span id='topic+OptimizationProblem-methods'></span><span id='topic+nrow'></span><span id='topic+ncol'></span><span id='topic+ncell'></span><span id='topic+modelsense'></span><span id='topic+vtype'></span><span id='topic+obj'></span><span id='topic+pwlobj'></span><span id='topic+A'></span><span id='topic+rhs'></span><span id='topic+sense'></span><span id='topic+lb'></span><span id='topic+ub'></span><span id='topic+col_ids'></span><span id='topic+row_ids'></span><span id='topic+get_data'></span><span id='topic+number_of_branches'></span><span id='topic+ncell+2COptimizationProblem-method'></span><span id='topic+A+2COptimizationProblem-method'></span><span id='topic+col_ids+2COptimizationProblem-method'></span><span id='topic+lb+2COptimizationProblem-method'></span><span id='topic+modelsense+2COptimizationProblem-method'></span><span id='topic+ncol+2COptimizationProblem-method'></span><span id='topic+nrow+2COptimizationProblem-method'></span><span id='topic+obj+2COptimizationProblem-method'></span><span id='topic+pwlobj+2COptimizationProblem-method'></span><span id='topic+rhs+2COptimizationProblem-method'></span><span id='topic+row_ids+2COptimizationProblem-method'></span><span id='topic+sense+2COptimizationProblem-method'></span><span id='topic+ub+2COptimizationProblem-method'></span><span id='topic+vtype+2COptimizationProblem-method'></span><span id='topic+number_of_branches+2COptimizationProblem-method'></span><span id='topic+get_data+2COptimizationProblem-method'></span>

<h3>Description</h3>

<p>These functions are used to access data from an
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nrow(x)

## S4 method for signature 'OptimizationProblem'
nrow(x)

ncol(x)

## S4 method for signature 'OptimizationProblem'
ncol(x)

ncell(x)

## S4 method for signature 'OptimizationProblem'
ncell(x)

modelsense(x)

## S4 method for signature 'OptimizationProblem'
modelsense(x)

vtype(x)

## S4 method for signature 'OptimizationProblem'
vtype(x)

obj(x)

## S4 method for signature 'OptimizationProblem'
obj(x)

pwlobj(x)

## S4 method for signature 'OptimizationProblem'
pwlobj(x)

A(x)

## S4 method for signature 'OptimizationProblem'
A(x)

rhs(x)

## S4 method for signature 'OptimizationProblem'
rhs(x)

sense(x)

## S4 method for signature 'OptimizationProblem'
sense(x)

lb(x)

## S4 method for signature 'OptimizationProblem'
lb(x)

ub(x)

## S4 method for signature 'OptimizationProblem'
ub(x)

col_ids(x)

## S4 method for signature 'OptimizationProblem'
col_ids(x)

row_ids(x)

## S4 method for signature 'OptimizationProblem'
row_ids(x)

number_of_branches(x)

## S4 method for signature 'OptimizationProblem'
number_of_branches(x)

get_data(x)

## S4 method for signature 'OptimizationProblem'
get_data(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="OptimizationProblem-methods_+3A_x">x</code></td>
<td>
<p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functions return the following data:
</p>

<dl>
<dt>nrow</dt><dd><p><code>integer</code> number of rows (constraints).</p>
</dd>
<dt>ncol</dt><dd><p><code>integer</code> number of columns (decision variables).</p>
</dd>
<dt>ncell</dt><dd><p><code>integer</code> number of cells.</p>
</dd>
<dt>modelsense</dt><dd><p><code>character</code> describing if the problem is to be
maximized (<code>"max"</code>) or minimized (<code>"min"</code>).</p>
</dd>
<dt>vtype</dt><dd><p><code>character</code> describing the type of each decision variable:
binary (<code>"B"</code>), semi-continuous (<code>"S"</code>), or continuous
(<code>"C"</code>)</p>
</dd>
<dt>obj</dt><dd><p><code>numeric</code> vector defining the linear components of the
objective function.</p>
</dd>
<dt>pwlobj</dt><dd><p><code>list</code> object defining the piece-wise linear components
of the objective function.</p>
</dd>
<dt>A</dt><dd><p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> matrix object defining the
problem matrix.</p>
</dd>
<dt>rhs</dt><dd><p><code>numeric</code> vector with right-hand-side linear constraints</p>
</dd>
<dt>sense</dt><dd><p><code>character</code> vector with the senses of the linear
constraints (<code>"&lt;="</code>, <code>"&gt;="</code>, <code>"="</code>).</p>
</dd>
<dt>lb</dt><dd><p><code>numeric</code> lower bound for each decision variable. Missing data
values (<code>NA</code>) indicate no lower bound for a given variable.</p>
</dd>
<dt>ub</dt><dd><p><code>numeric</code> upper bounds for each decision variable. Missing
data values (<code>NA</code>) indicate no upper bound for a given variable.</p>
</dd>
<dt>number_of_projects</dt><dd><p><code>integer</code> number of projects in the problem.</p>
</dd>
<dt>number_of_actions</dt><dd><p><code>integer</code> number of actions in the problem.</p>
</dd>
<dt>number_of_features</dt><dd><p><code>integer</code> number of features in the problem.</p>
</dd>
<dt>number_of_branches</dt><dd><p><code>integer</code> number of phylogenetic branches in
the problem.</p>
</dd>
</dl>



<h3>Value</h3>

<p><code>list</code>, <a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a>, <code>numeric</code>
vector, <code>numeric</code> vector, or scalar <code>integer</code> depending on the
method used.
</p>

<hr>
<h2 id='Parameter-class'>Parameter class</h2><span id='topic+Parameter-class'></span><span id='topic+Parameter'></span>

<h3>Description</h3>

<p>This class is used to represent a parameter that has multiple values. Each
value has a different label to differentiate values. <strong>Only experts
should interact directly with this class.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$id</dt><dd><p><code><a href="#topic+Id">Id()</a></code> identifier for parameter.</p>
</dd>
<dt>$name</dt><dd><p><code>character</code> name of parameter.</p>
</dd>
<dt>$value</dt><dd><p><code>numeric</code> <code>vector</code> of values.</p>
</dd>
<dt>$default</dt><dd><p><code>numeric</code> <code>vector</code> of default values.</p>
</dd>
<dt>$class</dt><dd><p><code>character</code> name of the class that the values inherit
from (e.g. <code>"integer"</code>.</p>
</dd>
<dt>$lower_limit</dt><dd><p><code>numeric</code> <code>vector</code> specifying the minimum
permitted value for each element in <code style="white-space: pre;">&#8288;$value&#8288;</code>.</p>
</dd>
<dt>$upper_limit</dt><dd><p><code>numeric</code> <code>vector</code> specifying the maximum
permitted value for each element in <code style="white-space: pre;">&#8288;$value&#8288;</code>.</p>
</dd>
<dt>$widget</dt><dd><p><code>function</code> used to construct a
<code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> interface for modifying values.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$reset()</code>
</p>


<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>reset</dt><dd><p>change the parameter values to be the default values.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+ScalarParameter-class">ScalarParameter</a>.
</p>

<hr>
<h2 id='parameters'>Parameters</h2><span id='topic+parameters'></span>

<h3>Description</h3>

<p>Create a new collection of <code>Parameter</code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parameters(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parameters_+3A_...">...</code></td>
<td>
<p><a href="#topic+Parameter-class">Parameter</a> objects.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><a href="#topic+Parameters-class">Parameters</a> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+array_parameters">array_parameters()</a></code>, <code><a href="#topic+scalar_parameters">scalar_parameters()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create two Parameter objects
p1 &lt;- binary_parameter("parameter one", 1)
print(p1)

p2 &lt;- numeric_parameter("parameter two", 5)
print(p2)

# store Parameter objects in a Parameters object
p &lt;- parameters(p1, p2)
print(p)

</code></pre>

<hr>
<h2 id='Parameters-class'>Parameters class</h2><span id='topic+Parameters-class'></span><span id='topic+Parameters'></span>

<h3>Description</h3>

<p>This class represents a collection of <a href="#topic+Parameter-class">Parameter</a> objects.
It provides methods for accessing, updating, and rendering the parameters
stored inside it.
</p>


<h3>Fields</h3>


<dl>
<dt>$parameters</dt><dd><p><code>list</code> object containing
<a href="#topic+Parameter-class">Parameter</a> objects.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$names()</code>
</p>
<p><code>x$ids()</code>
</p>
<p><code>x$length()</code>
</p>
<p><code>x$get(id)</code>
</p>
<p><code>x$set(id, value)</code>
</p>
<p><code>x$add(p)</code>
</p>
<p><code>x$render(id)</code>
</p>
<p><code>x$render_all()</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>id</dt><dd><p><code><a href="#topic+Id">Id()</a></code> object.</p>
</dd>
<dt>p</dt><dd><p><a href="#topic+Parameter-class">Parameter</a> object.</p>
</dd>
<dt>value</dt><dd><p>any object.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p><code>character</code> representation of object.</p>
</dd>
<dt>names</dt><dd><p>return <code>character</code> names of parameters.</p>
</dd>
<dt>ids</dt><dd><p>return <code>character</code> parameter unique identifiers.</p>
</dd>
<dt>length</dt><dd><p>return <code>integer</code> number of parameters in object.</p>
</dd>
<dt>get</dt><dd><p>retrieve the value of a parameter in the object
using an <code>Id</code> object.</p>
</dd>
<dt>set</dt><dd><p>change the value of a parameter in the object
to a new object.</p>
</dd>
<dt>render</dt><dd><p>generate a <em>shiny</em> widget to modify the
the value of a parameter (specified by argument <code>Id</code>).</p>
</dd>
<dt>render_all</dt><dd><p>generate a <code><a href="shiny.html#topic+reexports">shiny::div()</a></code>
containing all the parameters&quot; widgets.</p>
</dd>
</dl>


<hr>
<h2 id='plot_feature_persistence'>Plot a bar plot to visualize a project prioritization</h2><span id='topic+plot_feature_persistence'></span>

<h3>Description</h3>

<p>Create a bar plot to visualize how likely features are to persist into
the future under a solution to a project prioritization <code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_feature_persistence(
  x,
  solution,
  n = 1,
  symbol_hjust = 0.007,
  return_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_feature_persistence_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
<tr><td><code id="plot_feature_persistence_+3A_solution">solution</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p>
</td></tr>
<tr><td><code id="plot_feature_persistence_+3A_n">n</code></td>
<td>
<p><code>integer</code> solution number to visualize.
Since each row in the argument to <code>solutions</code> corresponds to a
different solution, this argument should correspond to a row in
the argument to <code>solutions</code>. Defaults to 1.</p>
</td></tr>
<tr><td><code id="plot_feature_persistence_+3A_symbol_hjust">symbol_hjust</code></td>
<td>
<p><code>numeric</code> horizontal adjustment parameter to
manually align the asterisks and dashes in the plot. Defaults to
<code>0.007</code>. Increasing this parameter will shift the symbols further
right. Please note that this parameter may require some tweaking
to produce visually appealing publication quality plots.</p>
</td></tr>
<tr><td><code id="plot_feature_persistence_+3A_return_data">return_data</code></td>
<td>
<p><code>logical</code> should the underlying data used to create
the plot be returned instead of the plot? Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>In this plot, each bar corresponds to a different feature.
The length of each bar indicates the probability that a given feature
will persist into the future, and the color of each bar indicates
the weight for a given feature.
Features that directly benefit from at least a single completely funded
project with a non-zero cost are depicted with an asterisk symbol.
Additionally, features that indirectly benefit from funded
projects&mdash;because they are associated with partially funded
projects that have non-zero costs and share actions with at least one
completely funded project&mdash;are depicted with an open circle symbol.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code> object, or a
<code><a href="tibble.html#topic+tbl_df-class">tibble::tbl_df()</a></code> object if <code>return_data</code> is
<code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(500)

# load the ggplot2 R package to customize plots
library(ggplot2)

# load data
data(sim_projects, sim_features, sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_richness_objective(budget = 400) %&gt;%
      add_feature_weights("weight") %&gt;%
      add_binary_decisions() %&gt;%
      add_heuristic_solver(n = 10)

## Not run: 
# solve problem
s &lt;- solve(p)

# plot the first solution
plot(p, s)

# plot the second solution
plot(p, s, n = 2)

# since this function returns a ggplot2 plot object, we can customize the
# appearance of the plot using standard ggplot2 commands!
# for example, we can add a title
plot(p, s) + ggtitle("solution")

# we can also obtain the raw plotting data using return_data=TRUE
plot_data &lt;- plot(p, s, return_data = TRUE)
print(plot_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot_phylo_persistence'>Plot a phylogram to visualize a project prioritization</h2><span id='topic+plot_phylo_persistence'></span>

<h3>Description</h3>

<p>Create a plot showing a phylogenetic tree (i.e. a &quot;phylogram&quot;) to visualize
the probability that phylogenetic branches are expected to persist
into the future under a solution to a project prioritization <code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_phylo_persistence(
  x,
  solution,
  n = 1,
  symbol_hjust = 0.007,
  return_data = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_phylo_persistence_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
<tr><td><code id="plot_phylo_persistence_+3A_solution">solution</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p>
</td></tr>
<tr><td><code id="plot_phylo_persistence_+3A_n">n</code></td>
<td>
<p><code>integer</code> solution number to visualize.
Since each row in the argument to <code>solutions</code> corresponds to a
different solution, this argument should correspond to a row in
the argument to <code>solutions</code>. Defaults to 1.</p>
</td></tr>
<tr><td><code id="plot_phylo_persistence_+3A_symbol_hjust">symbol_hjust</code></td>
<td>
<p><code>numeric</code> horizontal adjustment parameter to
manually align the asterisks and dashes in the plot. Defaults to
<code>0.007</code>. Increasing this parameter will shift the symbols further
right. Please note that this parameter may require some tweaking
to produce visually appealing publication quality plots.</p>
</td></tr>
<tr><td><code id="plot_phylo_persistence_+3A_return_data">return_data</code></td>
<td>
<p><code>logical</code> should the underlying data used to create
the plot be returned instead of the plot? Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function requires the <span class="pkg">ggtree</span> (Yu <em>et al.</em> 2017).
Since this package is distributed exclusively
through <a href="https://bioconductor.org">Bioconductor</a>, and is not
available on the
<a href="https://cran.r-project.org/">Comprehensive R Archive Network</a>,
please execute the following commands to install it:
</p>
<div class="sourceCode"><pre>if (!require(remotes)) install.packages("remotes")
remotes::install_bioc("ggtree")
</pre></div>
<p>If the installation process fails, please consult the package's
<a href="https://bioconductor.org/packages/release/bioc/html/ggtree.html">online documentation</a>.
</p>
<p>In this plot, each phylogenetic branch is colored according to probability
that it is expected to persist into the future (see Faith 2008).
Features that directly benefit from at least a single
completely funded project with a non-zero cost are depicted with an
asterisk symbol. Additionally, features that indirectly benefit from funded
projects&mdash;because they are associated with partially funded projects that
have non-zero costs and share actions with at least one completely funded
project&mdash;are depicted with an open circle symbol.
</p>


<h3>Value</h3>

<p>A <code>ggtree::ggtree()</code> object, or a
<code><a href="tidytree.html#topic+treedata">tidytree::treedata()</a></code> object if <code>return_data</code> is
<code>TRUE</code>.
</p>


<h3>References</h3>

<p>Faith DP (2008) Threatened species and the potential loss of
phylogenetic diversity: conservation scenarios based on estimated extinction
probabilities and phylogenetic risk analysis. <em>Conservation Biology</em>,
<strong>22</strong>: 1461&ndash;1470.
</p>
<p>Yu G, Smith DK, Zhu H, Guan Y, &amp; Lam TTY (2017) ggtree: an
R package for visualization and annotation of phylogenetic trees with their
covariates and other associated data. <em>Methods in Ecology and
Evolution</em>, <strong>8</strong>: 28&ndash;36.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(500)

# load the ggplot2 R package to customize plots
library(ggplot2)

data(sim_projects, sim_features, sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_phylo_div_objective(budget = 400, sim_tree) %&gt;%
     add_binary_decisions() %&gt;%
     add_heuristic_solver(number_solutions = 10)

## Not run: 
# solve problem
s &lt;- solve(p)

# plot the first solution
plot(p, s)

# plot the second solution
plot(p, s, n = 2)

# since this function returns a ggplot2 plot object, we can customize the
# appearance of the plot using standard ggplot2 commands!
# for example, we can add a title
plot(p, s) + ggtitle("solution")

# we could also also set the minimum and maximum values in the color ramp to
# correspond to those in the data, rather than being capped at 0 and 1
plot(p, s) +
scale_color_gradientn(name = "Probability of\npersistence",
                      colors = viridisLite::inferno(150, begin = 0,
                                                    end = 0.9,
                                                    direction = -1)) +
ggtitle("solution")

# we could also change the color ramp
plot(p, s) +
scale_color_gradient(name = "Probability of\npersistence",
                     low = "red", high = "black") +
ggtitle("solution")

# we could even hide the legend if desired
plot(p, s) +
scale_color_gradient(name = "Probability of\npersistence",
                     low = "red", high = "black") +
theme(legend.position = "hide") +
ggtitle("solution")

# we can also obtain the raw plotting data using return_data=TRUE
plot_data &lt;- plot(p, s, return_data = TRUE)
print(plot_data)

## End(Not run)
</code></pre>

<hr>
<h2 id='plot.ProjectProblem'>Plot a solution to a project prioritization problem</h2><span id='topic+plot.ProjectProblem'></span>

<h3>Description</h3>

<p>Create a plot to visualize how well a solution to a project prioritization
<code><a href="#topic+problem">problem()</a></code> will maintain biodiversity.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ProjectProblem'
plot(x, solution, n = 1, symbol_hjust = 0.007, return_data = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot.ProjectProblem_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
<tr><td><code id="plot.ProjectProblem_+3A_solution">solution</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p>
</td></tr>
<tr><td><code id="plot.ProjectProblem_+3A_n">n</code></td>
<td>
<p><code>integer</code> solution number to visualize.
Since each row in the argument to <code>solutions</code> corresponds to a
different solution, this argument should correspond to a row in
the argument to <code>solutions</code>. Defaults to 1.</p>
</td></tr>
<tr><td><code id="plot.ProjectProblem_+3A_symbol_hjust">symbol_hjust</code></td>
<td>
<p><code>numeric</code> horizontal adjustment parameter to
manually align the asterisks and dashes in the plot. Defaults to
<code>0.007</code>. Increasing this parameter will shift the symbols further
right. Please note that this parameter may require some tweaking
to produce visually appealing publication quality plots.</p>
</td></tr>
<tr><td><code id="plot.ProjectProblem_+3A_return_data">return_data</code></td>
<td>
<p><code>logical</code> should the underlying data used to create
the plot be returned instead of the plot? Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot.ProjectProblem_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The type of plot that this function creates depends on the
problem objective. If the problem objective contains phylogenetic data,
then this function plots a phylogenetic tree where each branch
is colored according to its probability of persistence. Otherwise,
if the problem does not contain phylogenetic data, then this function
creates a bar plot where each bar corresponds to a different feature.
The height of the bars indicate each feature's probability of
persistence, and the width of the bars indicate each feature's weight.
</p>
<p>Features that directly benefit from at least a single
completely funded project with a non-zero cost are depicted with an
asterisk symbol. Additionally, features that indirectly benefit from funded
projects&mdash;because they are associated with partially funded projects that
have non-zero costs and share actions with at least one funded
project&mdash;are depicted with an open circle symbol.
</p>


<h3>Value</h3>

<p>A <code><a href="ggplot2.html#topic+ggplot">ggplot()</a></code> object.
</p>


<h3>See Also</h3>

<p>This function is essentially a wrapper for
<code><a href="#topic+plot_feature_persistence">plot_feature_persistence()</a></code> and
<code><a href="#topic+plot_phylo_persistence">plot_phylo_persistence()</a></code>, so refer to the documentation
for these functions for more information.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem without phylogenetic data
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_richness_objective(budget = 400) %&gt;%
      add_feature_weights("weight") %&gt;%
      add_binary_decisions()

## Not run: 
# solve problem without phylogenetic data
s1 &lt;- solve(p1)

# visualize solution without phylogenetic data
plot(p1, s1)

## End(Not run)

# build problem with phylogenetic data
p2 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_max_phylo_div_objective(budget = 400, sim_tree) %&gt;%
      add_binary_decisions()

## Not run: 
# solve problem with phylogenetic data
s2 &lt;- solve(p2)

# visualize solution with phylogenetic data
plot(p2, s2)

## End(Not run)
</code></pre>

<hr>
<h2 id='pproto'>Create a new <code>pproto</code> object</h2><span id='topic+pproto'></span>

<h3>Description</h3>

<p>Construct a new object with <code>pproto</code>. This object system is inspired
from the <code>ggproto</code> system used in the <code>ggplot2</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pproto(`_class` = NULL, `_inherit` = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pproto_+3A__class">_class</code></td>
<td>
<p>Class name to assign to the object. This is stored as the class
attribute of the object. This is optional: if <code>NULL</code> (the default),
no class name will be added to the object.</p>
</td></tr>
<tr><td><code id="pproto_+3A__inherit">_inherit</code></td>
<td>
<p><code>pproto</code> object to inherit from. If <code>NULL</code>, don&quot;t
inherit from any object.</p>
</td></tr>
<tr><td><code id="pproto_+3A_...">...</code></td>
<td>
<p>A list of members to add to the new <code>pproto</code> object.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>Adder &lt;- pproto("Adder",
  x = 0,
  add = function(self, n) {
    self$x &lt;- self$x + n
    self$x
  }
)

Adder$add(10)
Adder$add(10)

Abacus &lt;- pproto("Abacus", Adder,
  subtract = function(self, n) {
    self$x &lt;- self$x - n
    self$x
  }
)
Abacus$add(10)
Abacus$subtract(10)

</code></pre>

<hr>
<h2 id='print'>Print</h2><span id='topic+print'></span><span id='topic+print+2CId-method'></span><span id='topic+print+2Ctbl_df-method'></span><span id='topic+print.ProjectProblem'></span><span id='topic+print.ProjectModifier'></span><span id='topic+print.Id'></span><span id='topic+print.OptimizationProblem'></span><span id='topic+print.ScalarParameter'></span><span id='topic+print.ArrayParameter'></span><span id='topic+print.Solver'></span>

<h3>Description</h3>

<p>Display information about an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'ProjectProblem'
print(x, ...)

## S3 method for class 'ProjectModifier'
print(x, ...)

## S3 method for class 'Id'
print(x, ...)

## S4 method for signature 'Id'
print(x)

## S3 method for class 'OptimizationProblem'
print(x, ...)

## S3 method for class 'ScalarParameter'
print(x, ...)

## S3 method for class 'ArrayParameter'
print(x, ...)

## S3 method for class 'Solver'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>Any object.</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p>not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+print">base::print()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>a &lt;- 1:4
print(a)
</code></pre>

<hr>
<h2 id='problem'>Project prioritization problem</h2><span id='topic+problem'></span>

<h3>Description</h3>

<p>Create a project prioritization problem. This function is used to
specify the underlying data used in a prioritization problem: the projects,
the management actions, and the features that need
to be conserved (e.g. species, ecosystems). After constructing this
<code>ProjectProblem-class</code> object,
it can be customized using <a href="#topic+objectives">objectives</a>, <a href="#topic+targets">targets</a>,
<a href="#topic+weights">weights</a>, <a href="#topic+constraints">constraints</a>, <a href="#topic+decisions">decisions</a> and
<a href="#topic+solvers">solvers</a>. After building the problem, the
<code><a href="#topic+solve">solve()</a></code> function can be used to identify solutions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>problem(
  projects,
  actions,
  features,
  project_name_column,
  project_success_column,
  action_name_column,
  action_cost_column,
  feature_name_column,
  adjust_for_baseline = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="problem_+3A_projects">projects</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing project data. Here, each row
should correspond to a different project and columns should contain data
that correspond to each project. This object should contain data that
denote (i)
the name of each project (specified in the argument to
<code>project_name_column</code>), (ii) the
probability that each project will succeed if all of its actions are funded
(specified in the argument to <code>project_success_column</code>), (iii)
the enhanced probability that each feature will persist if it
is funded (using a column for each feature),
and (iv) and which actions are associated with which projects
(using a column for each action). This object
must have a baseline project, with a zero cost value, that represents the
probability that each feature will persist if no other conservation
project is funded.
Since each feature is assigned the greatest probability of persistence
given the funded projects in a solution, the combined benefits of multiple
projects can be encoded by creating additional projects that represent
&quot;combined projects&quot;. For instance, a habitat restoration project might
cost $100 and mean that a feature has a 40% chance of persisting, and
a pest eradication project might cost $50 and mean that a feature has a
60% chance of persisting. Due to non-linear effects, funding both of these
projects might mean that a species has a 90% chance of persistence.
This can be accounted for by creating a third project, representing the
funding of both projects, which costs $150 and provides a 90% chance
of persistence.</p>
</td></tr>
<tr><td><code id="problem_+3A_actions">actions</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code>
table containing the action data. Here, each row should correspond to a
different action and columns should contain data that correspond to
each action. At a minimum, this object should contain data that denote (i)
the name of each action (specified in the argument to
<code>action_name_column</code>), (ii) the cost of each action (specified in the
argument to <code>action_cost_column</code>). Optionally, it may also contain
data that indicate actions should be (iii) locked in or (iv) locked
out (see <code><a href="#topic+add_locked_in_constraints">add_locked_in_constraints()</a></code> and
<code><a href="#topic+add_locked_out_constraints">add_locked_out_constraints()</a></code>). It should also contain a
zero-cost baseline action that is associated with the baseline project.</p>
</td></tr>
<tr><td><code id="problem_+3A_features">features</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code>
table containing the feature data. Here, each row should correspond
to a different feature and columns should contain data that correspond
to each feature. At a minimum, this object should contain data that denote
(i) the name of each feature (specified in the argument to
<code>feature_name_column</code>). Optionally, it may also contain (ii) the
weight for each feature or (iii) persistence targets for each feature.</p>
</td></tr>
<tr><td><code id="problem_+3A_project_name_column">project_name_column</code></td>
<td>
<p><code>character</code> name of column that contains
the name for each conservation project. This argument corresponds to the
<code>projects</code> table. Note that the project names must not contain any
duplicates or missing values.</p>
</td></tr>
<tr><td><code id="problem_+3A_project_success_column">project_success_column</code></td>
<td>
<p><code>character</code> name of column that
indicates the probability that each project will succeed. This argument
corresponds to the argument to <code>projects</code> table. This column must have
<code>numeric</code> values which range between zero and one. No missing values
are permitted.</p>
</td></tr>
<tr><td><code id="problem_+3A_action_name_column">action_name_column</code></td>
<td>
<p><code>character</code> name of column that contains
the name for each management action. This argument corresponds to the
<code>actions</code> table. Note that the project names must not contain any
duplicates or missing values.</p>
</td></tr>
<tr><td><code id="problem_+3A_action_cost_column">action_cost_column</code></td>
<td>
<p><code>character</code> name of column that
indicates the cost for funding each action. This argument corresponds
to the argument to <code>actions</code> table. This column must have
<code>numeric</code> values which are equal to or greater than zero. No missing
values are permitted.</p>
</td></tr>
<tr><td><code id="problem_+3A_feature_name_column">feature_name_column</code></td>
<td>
<p><code>character</code> name of the column that contains
the name for each feature. This argument corresponds to the
<code>feature</code> table. Note that the feature names must not contain any
duplicates or missing values.</p>
</td></tr>
<tr><td><code id="problem_+3A_adjust_for_baseline">adjust_for_baseline</code></td>
<td>
<p><code>logical</code> should the probability of
features persisting when projects are funded be adjusted to account for the
probability of features persisting under the baseline &quot;do nothing&quot;
scenario in the event that the funded projects fail to succeed?
This should always be <code>TRUE</code>, except when funding a project
means that the baseline &quot;do nothing&quot; scenario does not apply if a funded
project fails. Defaults to <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A project prioritization problem has actions, projects,
and features. Features are the biological entities that need to
be conserved (e.g. species, populations, ecosystems). Actions are
real-world management actions that can be implemented to enhance
biodiversity (e.g. habitat restoration, monitoring, pest eradication). Each
action should have a known cost, and this usually means that each
action should have a defined spatial extent and time period (though this
is not necessary). Conservation projects are groups of management actions
(they can also comprise a singular action too), and each project is
associated with a probability of success if all of its associated actions
are funded. To determine which projects should be funded, each project is
associated with an probability of persistence for the
features that they benefit. These values should indicate the
probability that each feature will persist if only that project funded
and not the additional benefit relative to the baseline project. Missing
(<code>NA</code>) values should be used to indicate which projects do not
enhance the probability of certain features.
</p>
<p>The goal of a project prioritization exercise is then to identify which
management actions&mdash;and as a consequence which conservation
projects&mdash;should be funded. Broadly speaking, the goal
of an optimization problem is to minimize (or maximize) an objective
function given a set of control variables and decision variables that are
subject to a series of constraints. In the context of project
prioritization problems, the
objective is usually some measure of utility (e.g. the net
probability of each feature persisting into the future), the
control variables determine which actions should be funded or not,
the decision variables contain additional information needed to
ensure correct calculations,  and the
constraints impose limits such as the total budget available for funding
management actions. For more information on the mathematical
formulations used in this package, please refer to the manual entries for
the available objectives (listed in <a href="#topic+objectives">objectives</a>).
</p>


<h3>Value</h3>

<p>A new <a href="#topic+ProjectProblem-class">ProjectProblem</a> object.
</p>


<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>, <a href="#topic+decisions">decisions</a>,
<a href="#topic+objectives">objectives</a>, <a href="#topic+solvers">solvers</a>, <a href="#topic+targets">targets</a>,
<a href="#topic+weights">weights</a>, <code><a href="#topic+solution_statistics">solution_statistics()</a></code>,
<code><a href="#topic+plot.ProjectProblem">plot.ProjectProblem()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print project data
print(sim_projects)

# print action data
print(sim_features)

# print feature data
print(sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print output
print(s)

# print which actions are funded in the solution
s[, sim_actions$name, drop = FALSE]

# print the expected probability of persistence for each feature
# if the solution were implemented
s[, sim_features$name, drop = FALSE]

# visualize solution
plot(p, s)

## End(Not run)
</code></pre>

<hr>
<h2 id='project_cost_effectiveness'>Project cost effectiveness</h2><span id='topic+project_cost_effectiveness'></span>

<h3>Description</h3>

<p>Calculate the individual cost-effectiveness of each conservation project
in a project prioritization <code><a href="#topic+problem">problem()</a></code>
(Joseph, Maloney &amp; Possingham 2009).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_cost_effectiveness(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_cost_effectiveness_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that project cost-effectiveness cannot be calculated for
problems with minimum set objectives because the objective function
for these problems is to minimize cost and not maximize some measure
of biodiversity persistence.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the following
columns:
</p>

<dl>
<dt><code>"project"</code></dt><dd><p><code>character</code> name of each project</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost of each project.</p>
</dd>
<dt><code>"benefit"</code></dt><dd><p><code>numeric</code> benefit for each project. For a
given project, this is calculated as the difference between (i) the
objective value for a solution containing all of the management actions
associated with the project and all zero cost actions, and (ii) the
objective value for a solution containing the baseline project.</p>
</dd>
<dt><code>"ce"</code></dt><dd><p><code>numeric</code> cost-effectiveness of each project.
For a given project, this is calculated as the difference between the
the benefit for the project and the benefit for the baseline project,
divided by the cost of the project. Note that the baseline
project will have a <code>NaN</code> value because it has a zero cost.</p>
</dd>
<dt><code>"rank"</code></dt><dd><p><code>numeric</code> rank for each project according to
is cost-effectiveness value. The project with a rank of one is the
most cost-effective project. Ties are accommodated using averages.</p>
</dd>
</dl>



<h3>References</h3>

<p>Joseph LN, Maloney RF &amp; Possingham HP (2009) Optimal allocation of
resources among threatened species: A project prioritization protocol.
<em>Conservation Biology</em>, <strong>23</strong>, 328&ndash;338.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+solution_statistics">solution_statistics()</a></code>, <code><a href="#topic+replacement_costs">replacement_costs()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print project data
print(sim_projects)

# print action data
print(sim_features)

# print feature data
print(sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# print problem
print(p)

# calculate cost-effectiveness of each project
pce &lt;- project_cost_effectiveness(p)

# print project costs, benefits, and cost-effectiveness values
print(pce)

# plot histogram of cost-effectiveness values
hist(pce$ce, xlab = "Cost effectiveness", main = "")
</code></pre>

<hr>
<h2 id='project_names'>Project names</h2><span id='topic+project_names'></span><span id='topic+project_names+2CProjectProblem-method'></span>

<h3>Description</h3>

<p>Extract the names of the projects in an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>project_names(x)

## S4 method for signature 'ProjectProblem'
project_names(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="project_names_+3A_x">x</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>character</code> project names.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with default solver
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions() %&gt;%
     add_default_solver()

# print problem
print(p)

# print project names
project_names(p)
</code></pre>

<hr>
<h2 id='ProjectModifier-class'>Conservation problem modifier prototype</h2><span id='topic+ProjectModifier-class'></span><span id='topic+ProjectModifier'></span>

<h3>Description</h3>

<p>This super-prototype is used to represent prototypes that in turn are used to
modify a <a href="#topic+ProjectProblem-class">ProjectProblem</a> object. Specifically, the
<a href="#topic+Constraint-class">Constraint</a>, <a href="#topic+Decision-class">Decision</a>,
<a href="#topic+Objective-class">Objective</a>, and <a href="#topic+Target-class">Target</a> prototypes
inherit from this class. <strong>Only experts should interact with
this class directly because changes to these class will have profound and
far reaching effects.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$name</dt><dd><p><code>character</code> name of object.</p>
</dd>
<dt>$parameters</dt><dd><p><code>list</code> object used to customize the modifier.</p>
</dd>
<dt>$data</dt><dd><p><code>list</code> object with data.</p>
</dd>
<dt>$compressed_formulation</dt><dd><p><code>logical</code> can this constraint be applied
to the compressed version of the conservation planning problem?. Defaults
to <code>TRUE</code>.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$get_data(name)</code>
</p>
<p><code>x$set_data(name, value)</code>
</p>
<p><code>x$calculate(cp)</code>
</p>
<p><code>x$output()</code>
</p>
<p><code>x$apply(op,cp)</code>
</p>
<p><code>x$get_parameter(id)</code>
</p>
<p><code>x$get_all_parameters()</code>
</p>
<p><code>x$set_parameter(id, value)</code>
</p>
<p><code>x$render_parameter(id)</code>
</p>
<p><code>x$render_all_parameter()</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>name</dt><dd><p><code>character</code> name for object</p>
</dd>
<dt>value</dt><dd><p>any object</p>
</dd>
<dt>id</dt><dd><p><code>id</code> or <code>name</code> of parameter</p>
</dd>
<dt>cp</dt><dd><p><a href="#topic+ProjectProblem-class">ProjectProblem</a> object</p>
</dd>
<dt>op</dt><dd><p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p>return <code>character</code> representation of the object.</p>
</dd>
<dt>get_data</dt><dd><p>return an object stored in the <code>data</code> field with
the corresponding <code>name</code>. If the object is not present in the
<code>data</code> field, a <code>waiver</code> object is returned.</p>
</dd>
<dt>set_data</dt><dd><p>store an object stored in the <code>data</code> field with
the corresponding name. If an object with that name already
exists then the object is overwritten.</p>
</dd>
<dt>calculate</dt><dd><p><code>function</code> used to perform preliminary calculations
and store the data so that they can be reused later without
performing the same calculations multiple times. Data can be stored
in the <code>data</code> slot of the input <code>ProjectModifier</code> or
<code>ProjectProblem</code> objects.</p>
</dd>
<dt>output</dt><dd><p><code>function</code> used to generate an output from the object.
This method is only used for <a href="#topic+Target-class">Target</a> objects.</p>
</dd>
<dt>apply</dt><dd><p><code>function</code> used to apply the modifier to an
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.
This is used by <a href="#topic+Constraint-class">Constraint</a>,
<a href="#topic+Decision-class">Decision</a>, and <a href="#topic+Objective-class">Objective</a> objects.</p>
</dd>
<dt>get_parameter</dt><dd><p>retrieve the value of a parameter.</p>
</dd>
<dt>get_all_parameters</dt><dd><p>generate <code>list</code> containing all the
parameters.</p>
</dd>
<dt>set_parameter</dt><dd><p>change the value of a parameter to new value.</p>
</dd>
<dt>render_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify the
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_parameters</dt><dd><p>generate a <code><a href="shiny.html#topic+reexports">shiny::div()</a></code>
containing all the parameters&quot; widgets.</p>
</dd>
</dl>


<hr>
<h2 id='ProjectProblem-class'>Project problem class</h2><span id='topic+ProjectProblem-class'></span><span id='topic+ProjectProblem'></span>

<h3>Description</h3>

<p>Project problem class
</p>


<h3>Description</h3>

<p>This class is used to represent project prioritization problems. A
project prioritization problem has actions, projects,
and features. Features are the biological entities that need to
be conserved (e.g. species, populations, ecosystems). Actions are
real-world management actions that can be implemented for conservation
purposes (e.g. habitat restoration, monitoring, pest eradication). Each
action should have a known cost, and this usually means that each
action should have a defined spatial extent and time period (though this
is not necessary). Conservation projects are groups of management actions
(they can also comprise a singular action too), and each project is
associated with a probability of success if all of its associated actions
are funded. To determine which projects should be funded, each project is
associated with an probability of persistence for the
features that they benefit. These values should indicate the
probability that each feature will persist if only that project funded
and not the additional benefit relative to the baseline project. Missing
(<code>NA</code>) values should be used to indicate which projects do not
enhance the probability of certain features.
</p>
<p>Given these data, a project prioritization problem involves making a
decision about which actions should be funded or not&mdash;and in turn, which
projects should be funded or not&mdash;to maximize or minimize a specific
objective whilst meeting specific constraints. The objective for a project
prioritization problem will <em>always</em> pertain to the probability that
features are expected to persist. For example, an objective for a project
prioritization problem could be to maximize the maximize the total amount of
species that are expected to persist, or minimize the total cost of the
funded actions subject to constraints which ensure that each feature meets a
target level of persistence. The constraints in a project prioritization
problem can be used to specify additional requirements (e.g. certain
actions must be funded). Finally, a project prioritization problem&mdash;unlike
an optimization problem&mdash;also requires a method to solve the problem.
<strong>This class represents a planning problem, to actually build and then
solve a planning problem, use the <code><a href="#topic+problem">problem()</a></code> function. Only
experts should use this class directly.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$data</dt><dd><p><code>list</code> object containing data.</p>
</dd>
<dt>$objective</dt><dd><p><a href="#topic+Objective-class">Objective</a> object used to represent how
the targets relate to the solution.</p>
</dd>
<dt>$decisions</dt><dd><p><a href="#topic+Decision-class">Decision</a> object used to represent the
type of decision made on planning units.</p>
</dd>
<dt>$targets</dt><dd><p><a href="#topic+Target-class">Target</a> object used to represent
representation targets for features.</p>
</dd>
<dt>$weights</dt><dd><p><a href="#topic+Weight-class">Weight</a> object used to represent
feature weights.</p>
</dd>
<dt>$constraints</dt><dd><p><a href="#topic+Collection-class">Collection</a> object used to represent
additional <a href="#topic+constraints">constraints</a> that the problem is subject to.</p>
</dd>
<dt>$solver</dt><dd><p><a href="#topic+Solver-class">Solver</a> object used to solve the problem.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$get_data(name)</code>
</p>
<p><code>x$set_data(name, value)</code>
</p>
<p><code>number_of_actions()</code>
</p>
<p><code>number_of_projects()</code>
</p>
<p><code>number_of_features()</code>
</p>
<p><code>action_names()</code>
</p>
<p><code>project_names()</code>
</p>
<p><code>feature_names()</code>
</p>
<p><code>feature_weights()</code>
</p>
<p><code>feature_phylogeny()</code>
</p>
<p><code>action_costs()</code>
</p>
<p><code>project_costs()</code>
</p>
<p><code>project_success_probabilities()</code>
</p>
<p><code>pf_matrix()</code>
</p>
<p><code>epf_matrix()</code>
</p>
<p><code>pa_matrix()</code>
</p>
<p><code>x$add_objective(obj)</code>
</p>
<p><code>x$add_decisions(dec)</code>
</p>
<p><code>x$add_constraint(con)</code>
</p>
<p><code>x$add_solver(sol)</code>
</p>
<p><code>x$add_targets(targ)</code>
</p>
<p><code>x$add_weights(wt)</code>
</p>
<p><code>x$get_constraint_parameter(id)</code>
</p>
<p><code>x$set_constraint_parameter(id, value)</code>
</p>
<p><code>x$render_constraint_parameter(id)</code>
</p>
<p><code>x$render_all_constraint_parameters()</code>
</p>
<p><code>x$get_objective_parameter(id)</code>
</p>
<p><code>x$set_objective_parameter(id, value)</code>
</p>
<p><code>x$render_objective_parameter(id)</code>
</p>
<p><code>x$render_all_objective_parameters()</code>
</p>
<p><code>x$get_solver_parameter(id)</code>
</p>
<p><code>x$set_solver_parameter(id, value)</code>
</p>
<p><code>x$render_solver_parameter(id)</code>
</p>
<p><code>x$render_all_solver_parameters()</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>name</dt><dd><p><code>character</code> name for object.</p>
</dd>
<dt>value</dt><dd><p>an object.</p>
</dd>
<dt>obj</dt><dd><p><a href="#topic+Objective-class">Objective</a> object.</p>
</dd>
<dt>wt</dt><dd><p><a href="#topic+Weight-class">Weight</a> object.</p>
</dd>
<dt>dec</dt><dd><p><a href="#topic+Decision-class">Decision</a> object.</p>
</dd>
<dt>con</dt><dd><p><a href="#topic+Constraint-class">Constraint</a> object.</p>
</dd>
<dt>sol</dt><dd><p><a href="#topic+Solver-class">Solver</a> object.</p>
</dd>
<dt>targ</dt><dd><p><a href="#topic+Target-class">Target</a> object.</p>
</dd>
<dt>wt</dt><dd><p><a href="#topic+Weight-class">Weight</a> object.</p>
</dd>
<dt>id</dt><dd><p><code>Id</code> object that refers to a specific parameter.</p>
</dd>
<dt>value</dt><dd><p>object that the parameter value should become.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p>return <code>character</code> representation of the object.</p>
</dd>
<dt>get_data</dt><dd><p>return an object stored in the <code>data</code> field with
the corresponding <code>name</code>. If the object is not present in the
<code>data</code> field, a <code>waiver</code> object is returned.</p>
</dd>
<dt>set_data</dt><dd><p>store an object stored in the <code>data</code> field with
the corresponding name. If an object with that name already
exists then the object is overwritten.</p>
</dd>
<dt>number_of_actions</dt><dd><p><code>integer</code> number of actions.</p>
</dd>
<dt>number_of_projects</dt><dd><p><code>integer</code> number of projects.</p>
</dd>
<dt>number_of_features</dt><dd><p><code>integer</code> number of features.</p>
</dd>
<dt>action_names</dt><dd><p><code>character</code> names of actions in the problem.</p>
</dd>
<dt>project_names</dt><dd><p><code>character</code> names of projects in the problem.</p>
</dd>
<dt>feature_names</dt><dd><p><code>character</code> names of features in the problem.</p>
</dd>
<dt>feature_weights</dt><dd><p><code>character</code> feature weights.</p>
</dd>
<dt>feature_phylogeny</dt><dd><p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> phylogenetic tree object.</p>
</dd>
<dt>action_costs</dt><dd><p><code>numeric</code> costs for each action.</p>
</dd>
<dt>project_costs</dt><dd><p><code>numeric</code> costs for each project.</p>
</dd>
<dt>project_success_probabilities</dt><dd><p><code>numeric</code> probability that
each project will succeed.</p>
</dd>
<dt>pf_matrix</dt><dd>
<p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> object denoting the enhanced
probability that features will persist if different projects are funded.</p>
</dd>
<dt>epf_matrix</dt><dd>
<p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> object denoting the enhanced
probability that features is expected to persist if different projects are
funded. This is calculated as the <code>pf_matrix</code> multiplied by the
project success probabilities.</p>
</dd>
<dt>pa_matrix</dt><dd>
<p><a href="Matrix.html#topic+dgCMatrix-class">Matrix::dgCMatrix</a> object indicating which actions are
associated with which projects.</p>
</dd>
<dt>feature_targets</dt><dd><p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> with feature targets.</p>
</dd>
<dt>add_objective</dt><dd><p>return a new  <a href="#topic+ProjectProblem-class">ProjectProblem</a>
with the objective added to it.</p>
</dd>
<dt>add_decisions</dt><dd><p>return a new <a href="#topic+ProjectProblem-class">ProjectProblem</a>
object with the decision added to it.</p>
</dd>
<dt>add_solver</dt><dd><p>return a new <a href="#topic+ProjectProblem-class">ProjectProblem</a> object
with the solver added to it.</p>
</dd>
<dt>add_constraint</dt><dd><p>return a new <a href="#topic+ProjectProblem-class">ProjectProblem</a>
object with the constraint added to it.</p>
</dd>
<dt>add_targets</dt><dd><p>return a copy with the targets added to the problem.</p>
</dd>
<dt>get_constraint_parameter</dt><dd><p>get the value of a parameter (specified by
argument <code>id</code>) used in one of the constraints in the object.</p>
</dd>
<dt>set_constraint_parameter</dt><dd><p>set the value of a parameter (specified by
argument <code>id</code>) used in one of the constraints in the object to
<code>value</code>.</p>
</dd>
<dt>render_constraint_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_constraint_parameters</dt><dd><p>generate a <em>shiny</em> <code>div</code>
containing all the parameters' widgets.</p>
</dd>
<dt>get_objective_parameter</dt><dd><p>get the value of a parameter (specified by
argument <code>id</code>) used in the object's objective.</p>
</dd>
<dt>set_objective_parameter</dt><dd><p>set the value of a parameter (specified by
argument <code>id</code>) used in the object's objective to <code>value</code>.</p>
</dd>
<dt>render_objective_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_objective_parameters</dt><dd><p>generate a <em>shiny</em> <code>div</code>
containing all the parameters' widgets.</p>
</dd>
<dt>get_weight_parameter</dt><dd><p>get the value of a parameter (specified by
argument <code>id</code>) used in the object's weights.</p>
</dd>
<dt>set_weight_parameter</dt><dd><p>set the value of a parameter (specified by
argument <code>id</code>) used in the object's weights to <code>value</code>.</p>
</dd>
<dt>render_weight_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_weight_parameters</dt><dd><p>generate a <em>shiny</em> <code>div</code>
containing all the parameters' widgets.</p>
</dd>
<dt>get_solver_parameter</dt><dd><p>get the value of a parameter (specified by
argument <code>id</code>) used in the object's solver.</p>
</dd>
<dt>set_solver_parameter</dt><dd><p>set the value of a parameter (specified by
argument <code>id</code>) used in the object's solver to <code>value</code>.</p>
</dd>
<dt>render_solver_parameter</dt><dd><p>generate a <em>shiny</em> widget to modify
the value of a parameter (specified by argument <code>id</code>).</p>
</dd>
<dt>render_all_solver_parameters</dt><dd><p>generate a <em>shiny</em> <code>div</code>
containing all the parameters' widgets.</p>
</dd>
</dl>


<hr>
<h2 id='replacement_costs'>Replacement cost</h2><span id='topic+replacement_costs'></span>

<h3>Description</h3>

<p>Calculate the replacement cost for priority actions in a project
prioritization <code><a href="#topic+problem">problem()</a></code> (Moilanen <em>et al.</em> 2009). Actions associated
with larger replacement cost values are more irreplaceable, and may
need to be implemented sooner than actions with lower replacement cost
values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replacement_costs(x, solution, n = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replacement_costs_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
<tr><td><code id="replacement_costs_+3A_solution">solution</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p>
</td></tr>
<tr><td><code id="replacement_costs_+3A_n">n</code></td>
<td>
<p><code>integer</code> solution number to calculate replacement cost values.
Since each row in the argument to <code>solutions</code> corresponds to a
different solution, this argument should correspond to a row in
the argument to <code>solutions</code>. Defaults to 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Replacement cost values are calculated for each priority action
specified in the solution. Missing (<code>NA</code>) values are assigned to
actions which are not selected for funding in the specified solution.
For a given action, its replacement cost is calculated by
(i) calculating the objective value for the optimal solution to
the argument to <code>x</code>, (ii) calculating the objective value for the
optimal solution to the argument to <code>x</code> with the given action locked
out, (iii) calculating the difference between the two objective
values, (iv) the problem has an objective which aims to minimize
the objective value (only <code><a href="#topic+add_min_set_objective">add_min_set_objective()</a></code>, then
the resulting value is multiplied by minus one so that larger values
always indicate actions with greater irreplaceability. Please note this
function can take a long time to complete
for large problems since it involves re-solving the problem for every
action selected for funding.
</p>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the following
columns:
</p>

<dl>
<dt><code>"action"</code></dt><dd><p><code>character</code> name of each action.</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost of each solution when each
action is locked out.</p>
</dd>
<dt><code>"obj"</code></dt><dd><p><code>numeric</code> objective value of each solution when
each action is locked out. This is calculated using the objective
function defined for the argument to <code>x</code>.</p>
</dd>
<dt><code>"rep_cost"</code></dt><dd><p><code>numeric</code> replacement cost for each
action. Greater values indicate greater irreplaceability. Missing
(<code>NA</code>) values are assigned to actions which are not selected for
funding in the specified solution, infinite (<code>Inf</code>) values are
assigned to to actions which are required to meet feasibility
constraints, and negative values mean that superior solutions than
the specified solution exist.</p>
</dd>
</dl>



<h3>References</h3>

<p>Moilanen A, Arponen A, Stokland JN &amp; Cabeza M (2009) Assessing replacement
cost of conservation areas: how does habitat loss influence priorities?
<em>Biological Conservation</em>, <strong>142</strong>, 575&ndash;585.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+solution_statistics">solution_statistics()</a></code>,
<code><a href="#topic+project_cost_effectiveness">project_cost_effectiveness()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective and $400 budget
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# solve problem
s &lt;- solve(p)

# print solution
print(s)

# calculate replacement cost values
r &lt;- replacement_costs(p, s)

# print output
print(r)

# plot histogram of replacement costs,
# with this objective, greater values indicate greater irreplaceability
hist(r$rep_cost, xlab = "Replacement cost", main = "")

## End(Not run)
</code></pre>

<hr>
<h2 id='scalar_parameters'>Scalar parameters</h2><span id='topic+scalar_parameters'></span><span id='topic+proportion_parameter'></span><span id='topic+binary_parameter'></span><span id='topic+integer_parameter'></span><span id='topic+numeric_parameter'></span>

<h3>Description</h3>

<p>These functions are used to create parameters that consist of a single
number. Parameters have a name, a value, a defined range of acceptable
values, a default value, a class, and a <code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> widget for
modifying them. If values are supplied to a parameter that are unacceptable
then an error is thrown.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>proportion_parameter(name, value)

binary_parameter(name, value)

integer_parameter(
  name,
  value,
  lower_limit = as.integer(-.Machine$integer.max),
  upper_limit = as.integer(.Machine$integer.max)
)

numeric_parameter(
  name,
  value,
  lower_limit = .Machine$double.xmin,
  upper_limit = .Machine$double.xmax
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="scalar_parameters_+3A_name">name</code></td>
<td>
<p><code>character</code> name of parameter.</p>
</td></tr>
<tr><td><code id="scalar_parameters_+3A_value">value</code></td>
<td>
<p><code>integer</code> or <code>double</code> value depending on the
parameter.</p>
</td></tr>
<tr><td><code id="scalar_parameters_+3A_lower_limit">lower_limit</code></td>
<td>
<p><code>integer</code> or <code>double</code> value representing
the smallest acceptable value for <code>value</code>. Defaults to
the smallest possible number on the system.</p>
</td></tr>
<tr><td><code id="scalar_parameters_+3A_upper_limit">upper_limit</code></td>
<td>
<p><code>integer</code> or <code>double</code> value representing
the largest acceptable value for <code>value</code>. Defaults to
the largest possible number on the system.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Below is a list of parameter generating functions and a brief
description of each.
</p>

<dl>
<dt>proportion_parameter</dt><dd><p>A parameter that is a <code>double</code> and bounded
between zero and one.</p>
</dd>
<dt>integer_parameter</dt><dd><p>A parameter that is a <code>integer</code>.</p>
</dd>
<dt>numeric_parameter</dt><dd><p>A parameter that is a <code>double</code>.</p>
</dd>
<dt>binary_parameter</dt><dd><p>A parameter that is restricted to <code>integer</code>
values of zero or one.</p>
</dd>
</dl>



<h3>Value</h3>

<p><a href="#topic+ScalarParameter-class">ScalarParameter</a> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># proportion parameter
p1 &lt;- proportion_parameter('prop', 0.5) # create new object
print(p1) # print it
p1$get() # get value
p1$id # get id
p1$validate(5) # check if 5 is a validate input
p1$validate(0.1) # check if 0.1 is a validate input
p1$set(0.1) # change value to 0.1
print(p1)

# binary parameter
p2 &lt;- binary_parameter('bin', 0) # create new object
print(p2) # print it
p2$get() # get value
p2$id # get id
p2$validate(5) # check if 5 is a validate input
p2$validate(1L) # check if 1L is a validate input
p2$set(1L) # change value to 1L
print(p1) # print it again

# integer parameter
p3 &lt;- integer_parameter('int', 5L) # create new object
print(p3) # print it
p3$get() # get value
p3$id # get id
p3$validate(5.6) # check if 5.6 is a validate input
p3$validate(2L) # check if 2L is a validate input
p3$set(2L) # change value to 2L
print(p3) # print it again

# numeric parameter
p4 &lt;- numeric_parameter('dbl', -7.6) # create new object
print(p4) # print it
p4$get() # get value
p4$id # get id
p4$validate(NA) # check if NA is a validate input
p4$validate(8.9) # check if 8.9 is a validate input
p4$set(8.9) # change value to 8.9
print(p4) # print it again

# numeric parameter with lower bounds
p5 &lt;- numeric_parameter('bdbl', 6, lower_limit=0) # create new object
print(p5) # print it
p5$get() # get value
p5$id # get id
p5$validate(-10) # check if -10 is a validate input
p5$validate(90) # check if 90 is a validate input
p5$set(90) # change value to 8.9
print(p5) # print it again

</code></pre>

<hr>
<h2 id='ScalarParameter-class'>Scalar parameter prototype</h2><span id='topic+ScalarParameter-class'></span><span id='topic+ScalarParameter'></span>

<h3>Description</h3>

<p>This prototype is used to represent a parameter has a single value.
<strong>Only experts should interact directly with this prototype.</strong>
</p>


<h3>Fields</h3>


<dl>
<dt>$id</dt><dd><p><code>character</code> identifier for parameter.</p>
</dd>
<dt>$name</dt><dd><p><code>character</code> name of parameter.</p>
</dd>
<dt>$value</dt><dd><p><code>numeric</code> scalar value.</p>
</dd>
<dt>$default</dt><dd><p><code>numeric</code> scalar default value.</p>
</dd>
<dt>$class</dt><dd><p><code>character</code> name of the class that <code style="white-space: pre;">&#8288;$value&#8288;</code> should
inherit from (e.g. <code>integer</code>).</p>
</dd>
<dt>$lower_limit</dt><dd><p><code>numeric</code> scalar value that is the minimum value
that <code style="white-space: pre;">&#8288;$value&#8288;</code> is permitted to be.</p>
</dd>
<dt>$upper_limit</dt><dd><p><code>numeric</code> scalar value that is the maximum value
that <code style="white-space: pre;">&#8288;$value&#8288;</code> is permitted to be.</p>
</dd>
<dt>$widget</dt><dd><p><code>function</code> used to construct a
<code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> interface for modifying values.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$validate(x)</code>
</p>
<p><code>x$get()</code>
</p>
<p><code>x$set(x)</code>
</p>
<p><code>x$reset()</code>
</p>
<p><code>x$render(...)</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>x</dt><dd><p>object used to set a new parameter value.</p>
</dd>
<dt>...</dt><dd><p>arguments passed to <code style="white-space: pre;">&#8288;$widget&#8288;</code>.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>validate</dt><dd><p>check if a proposed new set of parameters are valid.</p>
</dd>
<dt>get</dt><dd><p>extract the parameter value.</p>
</dd>
<dt>set</dt><dd><p>update the parameter value.</p>
</dd>
<dt>reset</dt><dd><p>update the parameter value to be the default value.</p>
</dd>
<dt>render</dt><dd><p>create a <code><a href="shiny.html#topic+shiny-package">shiny::shiny()</a></code> widget to modify
parameter values.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+Parameter-class">Parameter</a>, <a href="#topic+ArrayParameter-class">ArrayParameter</a>.
</p>

<hr>
<h2 id='show'>Show</h2><span id='topic+show'></span><span id='topic+show+2CProjectProblem-method'></span><span id='topic+show+2CProjectModifier-method'></span><span id='topic+show+2COptimizationProblem-method'></span><span id='topic+show+2CId-method'></span><span id='topic+show+2CParameter-method'></span><span id='topic+show+2CSolver-method'></span>

<h3>Description</h3>

<p>Display information about an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'ProjectModifier'
show(x)

## S4 method for signature 'ProjectProblem'
show(x)

## S4 method for signature 'Id'
show(x)

## S4 method for signature 'OptimizationProblem'
show(x)

## S4 method for signature 'Parameter'
show(x)

## S4 method for signature 'Solver'
show(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_+3A_x">x</code></td>
<td>
<p>Any object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p><code><a href="methods.html#topic+show">methods::show()</a></code>.
</p>

<hr>
<h2 id='sim_data'>Simulated data</h2><span id='topic+sim_data'></span><span id='topic+sim_projects'></span><span id='topic+sim_actions'></span><span id='topic+sim_features'></span><span id='topic+sim_tree'></span>

<h3>Description</h3>

<p>Simulated data for prioritizing conservation projects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(sim_actions)

data(sim_projects)

data(sim_features)

data(sim_tree)
</code></pre>


<h3>Format</h3>


<dl>
<dt>sim_projects</dt><dd><p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object.</p>
</dd>
<dt>sim_actions</dt><dd><p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object.</p>
</dd>
<dt>sim_features</dt><dd><p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object.</p>
</dd>
<dt>sim_tree</dt><dd><p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> object.</p>
</dd>
</dl>



<h3>Details</h3>

<p>The data set contains the following objects:
</p>

<dl>
<dt><code>sim_projects</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object containing
data for six simulated conservation projects. Each row corresponds to a
different project and each column contains information about the
projects. This table contains the following columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each project.</p>
</dd>
<dt><code>"success"</code></dt><dd><p><code>numeric</code> probability of each project
succeeding if it is funded.</p>
</dd>
<dt><code>"F1"</code> ... <code>"F5"</code></dt><dd><p><code>numeric</code> columns for each
feature (i.e. <code>"F1"</code>, <code>"F2"</code>, <code>"F3"</code>, <code>"F4"</code>,
<code>"F5"</code>, indicating the enhanced probability that each
feature will survive if it funded. Missing values (<code>NA</code>)
indicate that a feature does not benefit from a project being
funded.</p>
</dd>
<dt><code>"F1_action"</code> ... <code>"F5_action"</code></dt><dd><p><code>logical</code>
columns for each action, ranging from <code>"F1_action"</code> to
<code>"F5_action"</code> indicating if
an action is associated with a project (<code>TRUE</code>) or not
(<code>FALSE</code>).</p>
</dd>
<dt><code>"baseline_action"</code></dt><dd><p><code>logical</code>
column indicating if a project is associated with the baseline
action (<code>TRUE</code>) or not (<code>FALSE</code>). This action is only
associated with the baseline project.</p>
</dd>
</dl>

</dd>
<dt><code>sim_actions</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object containing
data for six simulated actions. Each row corresponds to a
different action and each column contains information about the
actions. This table contains the following columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each action.</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost for each action.</p>
</dd>
<dt><code>"locked_in"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked into the solution.</p>
</dd>
<dt><code>"locked_out"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked out of the solution.</p>
</dd>
</dl>

</dd>
<dt><code>sim_features</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object containing
data for five simulated features. Each row corresponds to a
different feature and each column contains information about the
features. This table contains the following columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each feature.</p>
</dd>
<dt><code>"weight"</code></dt><dd><p><code>numeric</code> weight for each feature.</p>
</dd>
</dl>

</dd>
<dt>tree</dt><dd><p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> phylogenetic tree for the features.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_actions, sim_features, sim_tree)

# print project data
print(sim_projects)
# print action data
print(sim_actions)

# print feature data
print(sim_features)
# plot phylogenetic tree
plot(sim_tree)

</code></pre>

<hr>
<h2 id='simulate_ppp_data'>Simulate data for the 'Project Prioritization Protocol'</h2><span id='topic+simulate_ppp_data'></span>

<h3>Description</h3>

<p>Simulate data for developing project prioritizations. Here, data are
simulated such that each feature has its own conservation project,
similar to species-based prioritizations (e.g. Bennett <em>et al.</em> 2014).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_ppp_data(
  number_features,
  cost_mean = 100,
  cost_sd = 5,
  success_min_probability = 0.7,
  success_max_probability = 0.99,
  funded_min_persistence_probability = 0.5,
  funded_max_persistence_probability = 0.9,
  baseline_min_persistence_probability = 0.01,
  baseline_max_persistence_probability = 0.4,
  locked_in_proportion = 0,
  locked_out_proportion = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_ppp_data_+3A_number_features">number_features</code></td>
<td>
<p><code>numeric</code> number of features.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_cost_mean">cost_mean</code></td>
<td>
<p><code>numeric</code> average cost for the actions. Defaults to
<code>100</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_cost_sd">cost_sd</code></td>
<td>
<p><code>numeric</code> standard deviation in action costs. Defaults
to <code>5</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_success_min_probability">success_min_probability</code></td>
<td>
<p><code>numeric</code> minimum probability of the
projects succeeding if they are funded. Defaults to <code>0.7</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_success_max_probability">success_max_probability</code></td>
<td>
<p><code>numeric</code> maximum probability of the
projects succeeding if they are funded. Defaults to <code>0.99</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_funded_min_persistence_probability">funded_min_persistence_probability</code></td>
<td>
<p><code>numeric</code> minimum probability
of the features persisting if projects are funded and successful.
Defaults to <code>0.5</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_funded_max_persistence_probability">funded_max_persistence_probability</code></td>
<td>
<p><code>numeric</code> maximum probability
of the features persisting if projects are funded and successful.
Defaults to <code>0.9</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_baseline_min_persistence_probability">baseline_min_persistence_probability</code></td>
<td>
<p><code>numeric</code> minimum
probability of the features persisting if only the baseline project
is funded. Defaults to <code>0.01</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_baseline_max_persistence_probability">baseline_max_persistence_probability</code></td>
<td>
<p><code>numeric</code> maximum
probability of the features persisting if only the baseline project is
funded. Defaults to <code>0.4</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_locked_in_proportion">locked_in_proportion</code></td>
<td>
<p><code>numeric</code> of actions that are locked
into the solution. Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="simulate_ppp_data_+3A_locked_out_proportion">locked_out_proportion</code></td>
<td>
<p><code>numeric</code> of actions that are locked
into the solution. Defaults to <code>0</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The simulated data set will contain one conservation project for
each features, and also a &quot;baseline&quot; (do nothing) project to reflect
features' persistence when their conservation project is not
funded. Each conservation project is associated with a single action, and
no conservation projects share any actions. Specifically, the data are
simulated as follows:
</p>

<ol>
<li><p> A conservation project is created for each feature, and each
project is associated with its own single action.
</p>
</li>
<li><p> Cost data for each action are simulated using a normal
distribution and the <code>cost_mean</code> and <code>cost_sd</code> arguments.
</p>
</li>
<li><p> A set proportion of the actions are randomly set to be locked
in and out of the solutions using the <code>locked_in_proportion</code> and
<code>locked_out_proportion</code> arguments.
</p>
</li>
<li><p> The probability of each project succeeding if its action is funded
is simulated by drawing probabilities from a uniform distribution with
the upper and lower bounds set as the <code>success_min_probability</code>
and <code>success_max_probability</code> arguments.
</p>
</li>
<li><p> The probability of each feature persisting if its project is funded
and is successful is simulated by drawing probabilities from a uniform
distribution with the upper and lower bounds set as the
<code>funded_min_persistence_probability</code> and
<code>funded_max_persistence_probability</code> arguments.
</p>
</li>
<li><p> An additional project is created which represents the &quot;baseline&quot;
(do nothing) scenario. The probability of each feature persisting
when managed under this project is simulated by drawing probabilities
from a uniform distribution with the upper and lower bounds
set as the <code>baseline_min_persistence_probability</code>
and <code>baseline_max_persistence_probability</code> arguments.
</p>
</li>
<li><p> A phylogenetic tree is simulated for the features using
<code><a href="ape.html#topic+rtree">ape::rcoal()</a></code>.
</p>
</li>
<li><p> Feature data are created from the phylogenetic tree. The
weights are calculated as the amount of evolutionary history
that has elapsed between each feature and its last common ancestor.
</p>
</li></ol>



<h3>Value</h3>

<p>A <code>list</code> object containing the elements:
</p>

<dl>
<dt><code>"projects"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation projects. It contains the following
columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each project.</p>
</dd>
<dt><code>"success"</code></dt><dd><p><code>numeric</code> probability of each project
succeeding if it is funded.</p>
</dd>
<dt><code>"F1"</code> ... <code>"FN"</code></dt><dd><p><code>numeric</code> columns for each
feature, ranging from <code>"F1"</code> to <code>"FN"</code> where <code>N</code>
is the number of features, indicating the enhanced probability that
each feature will persist if it funded. Missing values (<code>NA</code>)
indicate that a feature does not benefit from a project being
funded.</p>
</dd>
<dt><code>"F1_action"</code> ... <code>"FN_action"</code></dt><dd><p><code>logical</code>
columns for each action, ranging from <code>"F1_action"</code> to
<code>"FN_action"</code> where <code>N</code> is
the number of actions (equal to the number of features in this
simulated data), indicating if an action is associated with a
project (<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</dd>
<dt><code>"baseline_action"</code></dt><dd><p><code>logical</code>
column indicating if a project is associated with the baseline
action (<code>TRUE</code>) or not (<code>FALSE</code>). This action is only
associated with the baseline project.</p>
</dd>
</dl>

</dd>
<dt><code>"actions"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation actions. It contains the following
columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each action.</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost for each action.</p>
</dd>
<dt><code>"locked_in"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked into the solution.</p>
</dd>
<dt><code>"locked_out"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked out of the solution.</p>
</dd>
</dl>

</dd>
<dt><code>"features"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation features (e.g. species). It contains the
following columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each feature.</p>
</dd>
<dt><code>"weight"</code></dt><dd><p><code>numeric</code> weight for each feature.
For each feature, this is calculated as the amount of time that
elapsed between the present and the features' last common ancestor.
In other words, the weights are calculated as the unique amount
of evolutionary history that each feature has experienced.</p>
</dd>
</dl>

</dd>
<dt>&quot;tree&quot;</dt><dd><p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> phylogenetic tree for the
features.</p>
</dd>
</dl>



<h3>References</h3>

<p>Bennett JR, Elliott G, Mellish B, Joseph LN, Tulloch AI,
Probert WJ, ... &amp; Maloney R (2014) Balancing phylogenetic diversity
and species numbers in conservation prioritization, using a case study of
threatened species in New Zealand. <em>Biological Conservation</em>,
<strong>174</strong>: 47&ndash;54.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simulate_ptm_data">simulate_ptm_data()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a simulated data set
s &lt;- simulate_ppp_data(number_features = 5,
                       cost_mean = 100,
                       cost_sd = 5,
                       success_min_probability = 0.7,
                       success_max_probability = 0.99,
                       funded_min_persistence_probability = 0.5,
                       funded_max_persistence_probability = 0.9,
                       baseline_min_persistence_probability = 0.01,
                       baseline_max_persistence_probability = 0.4,
                       locked_in_proportion = 0.01,
                       locked_out_proportion = 0.01)

# print data set
print(s)

</code></pre>

<hr>
<h2 id='simulate_ptm_data'>Simulate data for 'Priority threat management'</h2><span id='topic+simulate_ptm_data'></span>

<h3>Description</h3>

<p>Simulate data for developing project prioritizations for a priority threat
management exercise (Carwardine <em>et al.</em> 2019). Here, data are
simulated for a pre-specified number of features, actions, and projects.
Features can benefit from multiple projects, and different projects can
share actions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulate_ptm_data(
  number_projects,
  number_actions,
  number_features,
  cost_mean = 100,
  cost_sd = 5,
  success_min_probability = 0.7,
  success_max_probability = 0.99,
  funded_min_persistence_probability = 0.5,
  funded_max_persistence_probability = 0.9,
  baseline_min_persistence_probability = 0.01,
  baseline_max_persistence_probability = 0.4,
  locked_in_proportion = 0,
  locked_out_proportion = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulate_ptm_data_+3A_number_projects">number_projects</code></td>
<td>
<p><code>numeric</code> number of projects. Note that this
does not include the baseline project.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_number_actions">number_actions</code></td>
<td>
<p><code>numeric</code> number of actions. Note that this
does not include the baseline action.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_number_features">number_features</code></td>
<td>
<p><code>numeric</code> number of features.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_cost_mean">cost_mean</code></td>
<td>
<p><code>numeric</code> average cost for the actions. Defaults to
<code>100</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_cost_sd">cost_sd</code></td>
<td>
<p><code>numeric</code> standard deviation in action costs. Defaults
to <code>5</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_success_min_probability">success_min_probability</code></td>
<td>
<p><code>numeric</code> minimum probability of the
projects succeeding if they are funded. Defaults to <code>0.7</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_success_max_probability">success_max_probability</code></td>
<td>
<p><code>numeric</code> maximum probability of the
projects succeeding if they are funded. Defaults to <code>0.99</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_funded_min_persistence_probability">funded_min_persistence_probability</code></td>
<td>
<p><code>numeric</code> minimum probability
of the features persisting if projects are funded and successful.
Defaults to <code>0.5</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_funded_max_persistence_probability">funded_max_persistence_probability</code></td>
<td>
<p><code>numeric</code> maximum probability
of the features persisting if projects are funded and successful.
Defaults to <code>0.9</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_baseline_min_persistence_probability">baseline_min_persistence_probability</code></td>
<td>
<p><code>numeric</code> minimum
probability of the features persisting if only the baseline project
is funded. Defaults to <code>0.01</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_baseline_max_persistence_probability">baseline_max_persistence_probability</code></td>
<td>
<p><code>numeric</code> maximum
probability of the features persisting if only the baseline project is
funded. Defaults to <code>0.4</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_locked_in_proportion">locked_in_proportion</code></td>
<td>
<p><code>numeric</code> of actions that are locked
into the solution. Defaults to <code>0</code>.</p>
</td></tr>
<tr><td><code id="simulate_ptm_data_+3A_locked_out_proportion">locked_out_proportion</code></td>
<td>
<p><code>numeric</code> of actions that are locked
into the solution. Defaults to <code>0</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The simulated data set will contain one conservation project for
each features, and also a &quot;baseline&quot; (do nothing) project to reflect
features' persistence when their conservation project is not
funded. Each conservation project is associated with a single action, and
no conservation projects share any actions. Specifically, the data are
simulated as follows:
</p>

<ol>
<li><p> A specified number of conservation projects, features, and
management actions are created.
</p>
</li>
<li><p> Cost data for each action are simulated using a normal
distribution and the <code>cost_mean</code> and <code>cost_sd</code> arguments.
</p>
</li>
<li><p> A set proportion of the actions are randomly set to be locked
in and out of the solutions using the <code>locked_in_proportion</code> and
<code>locked_out_proportion</code> arguments.
</p>
</li>
<li><p> The probability of each project succeeding if its action is funded
is simulated by drawing probabilities from a uniform distribution with
the upper and lower bounds set as the <code>success_min_probability</code>
and <code>success_max_probability</code> arguments.
</p>
</li>
<li><p> The probability of each feature persisting if various projects
are funded and is successful is simulated by drawing probabilities
from a uniform distribution with the upper and lower bounds set as the
<code>funded_min_persistence_probability</code> and
<code>funded_max_persistence_probability</code> arguments. To prevent
</p>
</li>
<li><p> An additional project is created which represents the &quot;baseline&quot;
(do nothing) scenario. The probability of each feature persisting
when managed under this project is simulated by drawing probabilities
from a uniform distribution with the upper and lower bounds
set as the <code>baseline_min_persistence_probability</code>
and <code>baseline_max_persistence_probability</code> arguments.
</p>
</li>
<li><p> A phylogenetic tree is simulated for the features using
<code><a href="ape.html#topic+rtree">ape::rcoal()</a></code>.
</p>
</li>
<li><p> Feature data are created from the phylogenetic tree. The
weights are calculated as the amount of evolutionary history
that has elapsed between each feature and its last common ancestor.
</p>
</li></ol>



<h3>Value</h3>

<p>A <code>list</code> object containing the elements:
</p>

<dl>
<dt><code>"projects"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation projects. It contains the following
columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each project.</p>
</dd>
<dt><code>"success"</code></dt><dd><p><code>numeric</code> probability of each project
succeeding if it is funded.</p>
</dd>
<dt><code>"F1"</code> ... <code>"FN"</code></dt><dd><p><code>numeric</code> columns for each
feature, ranging from <code>"F1"</code> to <code>"FN"</code> where <code>N</code>
is the number of features, indicating the enhanced probability that
each feature will persist if it funded. Missing values (<code>NA</code>)
indicate that a feature does not benefit from a project being
funded.</p>
</dd>
<dt><code>"F1_action"</code> ... <code>"FN_action"</code></dt><dd><p><code>logical</code>
columns for each action, ranging from <code>"F1_action"</code> to
<code>"FN_action"</code> where <code>N</code> is
the number of actions (equal to the number of features in this
simulated data), indicating if an action is associated with a
project (<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</dd>
<dt><code>"baseline_action"</code></dt><dd><p><code>logical</code>
column indicating if a project is associated with the baseline
action (<code>TRUE</code>) or not (<code>FALSE</code>). This action is only
associated with the baseline project.</p>
</dd>
</dl>

</dd>
<dt><code>"actions"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation actions. It contains the following
columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each action.</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost for each action.</p>
</dd>
<dt><code>"locked_in"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked into the solution.</p>
</dd>
<dt><code>"locked_out"</code></dt><dd><p><code>logical</code> indicating if certain
actions should be locked out of the solution.</p>
</dd>
</dl>

</dd>
<dt><code>"features"</code></dt><dd><p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> containing
the data for the conservation features (e.g. species). It contains the
following columns:
</p>

<dl>
<dt><code>"name"</code></dt><dd><p><code>character</code> name for each feature.</p>
</dd>
<dt><code>"weight"</code></dt><dd><p><code>numeric</code> weight for each feature.
For each feature, this is calculated as the amount of time that
elapsed between the present and the features' last common ancestor.
In other words, the weights are calculated as the unique amount
of evolutionary history that each feature has experienced.</p>
</dd>
</dl>

</dd>
<dt>&quot;tree&quot;</dt><dd><p><code><a href="ape.html#topic+read.tree">ape::phylo()</a></code> phylogenetic tree for the
features.</p>
</dd>
</dl>



<h3>References</h3>

<p>Carwardine J, Martin TG, Firn J, Ponce-Reyes P, Nicol S, Reeson A,
Grantham HS, Stratford D, Kehoe L, Chades I (2019) Priority Threat
Management for biodiversity conservation: A handbook.
<em>Journal of Applied Ecology</em>, <strong>56</strong>: 481&ndash;490.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simulate_ppp_data">simulate_ppp_data()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create a simulated data set
s &lt;- simulate_ptm_data(number_projects = 6,
                       number_actions = 8,
                       number_features = 5,
                       cost_mean = 100,
                       cost_sd = 5,
                       success_min_probability = 0.7,
                       success_max_probability = 0.99,
                       funded_min_persistence_probability = 0.5,
                       funded_max_persistence_probability = 0.9,
                       baseline_min_persistence_probability = 0.01,
                       baseline_max_persistence_probability = 0.4,
                       locked_in_proportion = 0.01,
                       locked_out_proportion = 0.01)

# print data set
print(s)

</code></pre>

<hr>
<h2 id='solution_statistics'>Solution statistics</h2><span id='topic+solution_statistics'></span>

<h3>Description</h3>

<p>Calculate statistics describing a solution to a project prioritization
<code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solution_statistics(x, solution)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solution_statistics_+3A_x">x</code></td>
<td>
<p>project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</td></tr>
<tr><td><code id="solution_statistics_+3A_solution">solution</code></td>
<td>
<p><code><a href="base.html#topic+data.frame">base::data.frame()</a></code> or
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the solutions. Here,
rows correspond to different solutions and columns correspond to
different actions. Each column in the argument to <code>solution</code> should
be named according to a different action in <code>x</code>.
Cell values indicate if an action is funded in a given solution or not,
and should be either zero or one. Arguments to <code>solution</code> can
contain additional columns, and they will be ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table containing the following
columns:
</p>

<dl>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> cost of each solution.</p>
</dd>
<dt><code>"obj"</code></dt><dd><p><code>numeric</code> objective value for each solution.
This is calculated using the objective function defined for the
argument to <code>x</code>.</p>
</dd>
<dt><code>x$project_names()</code></dt><dd><p><code>numeric</code> column for each
project indicating if it was completely funded (with a value of 1)
or not (with a value of 0).</p>
</dd>
<dt><code>x$feature_names()</code></dt><dd><p><code>numeric</code> column for each
feature indicating the probability that it will persist into
the future given each solution.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+objectives">objectives</a>, <code><a href="#topic+replacement_costs">replacement_costs()</a></code>,
<code><a href="#topic+project_cost_effectiveness">project_cost_effectiveness()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print project data
print(sim_projects)

# print action data
print(sim_features)

# print feature data
print(sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# print problem
print(p)

# create a table with some solutions
solutions &lt;- data.frame(F1_action =       c(0, 1, 1),
                        F2_action =       c(0, 1, 0),
                        F3_action =       c(0, 1, 1),
                        F4_action =       c(0, 1, 0),
                        F5_action =       c(0, 1, 1),
                        baseline_action = c(1, 1, 1))

# print the solutions
# the first solution only has the baseline action funded
# the second solution has every action funded
# the third solution has only some actions funded
print(solutions)

# calculate statistics
solution_statistics(p, solutions)
</code></pre>

<hr>
<h2 id='solve'>Solve</h2><span id='topic+solve'></span><span id='topic+solve+2COptimizationProblem+2CSolver-method'></span><span id='topic+solve+2CProjectProblem+2Cmissing-method'></span>

<h3>Description</h3>

<p>Solve a conservation planning <code><a href="#topic+problem">problem()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'OptimizationProblem,Solver'
solve(a, b, ...)

## S4 method for signature 'ProjectProblem,missing'
solve(a, b, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solve_+3A_a">a</code></td>
<td>
<p><a href="#topic+ProjectProblem-class">ProjectProblem</a> or an
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</td></tr>
<tr><td><code id="solve_+3A_b">b</code></td>
<td>
<p><a href="#topic+Solver-class">Solver</a> object. Not used if <code>a</code> is an
<a href="#topic+ProjectProblem-class">ProjectProblem</a> object.</p>
</td></tr>
<tr><td><code id="solve_+3A_...">...</code></td>
<td>
<p>arguments passed to <code><a href="#topic+compile">compile()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The type of object returned from this function depends on the
argument to <code>a</code>. If the argument to <code>a</code> is an
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object, then the
solution is returned as a <code>list</code> containing the prioritization and
additional information (e.g. run time, solver status). On the other hand,
if the argument
to <code>a</code> is an <a href="#topic+ProjectProblem-class">ProjectProblem</a> object,
then a <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> table object will be returned. In this
table, each row row corresponds to a different solution and each column
describes a different property or result associated with each solution:
</p>

<dl>
<dt><code>"solution"</code></dt><dd><p><code>integer</code> solution identifier.</p>
</dd>
<dt><code>"status"</code></dt><dd><p><code>character</code> describing each solution.
For example, is the solution optimal, suboptimal, or was it returned
because the solver ran out of time?</p>
</dd>
<dt><code>"obj"</code></dt><dd><p><code>numeric</code> objective value for each solution.
This is calculated using the objective function defined for the
argument to <code>x</code>.</p>
</dd>
<dt><code>"cost"</code></dt><dd><p><code>numeric</code> total cost associated with each
solution.</p>
</dd>
<dt><code>x$action_names()</code></dt><dd><p><code>numeric</code> column for each action
indicating if they were funded in each solution or not.</p>
</dd>
<dt><code>x$project_names()</code></dt><dd><p><code>numeric</code> column for each
project indicating if it was completely funded (with a value of 1)
or not (with a value of 0).</p>
</dd>
<dt><code>x$feature_names()</code></dt><dd><p><code>numeric</code> column for each
feature indicating the probability that it will persist into
the future given each solution.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><code><a href="#topic+problem">problem()</a></code>, <code><a href="#topic+solution_statistics">solution_statistics()</a></code>,
<a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# print project data
print(sim_projects)

# print action data
print(sim_features)

# print feature data
print(sim_actions)

# build problem
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 400) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

# print problem
print(p)

## Not run: 
# solve problem
s &lt;- solve(p)

# print output
print(s)

# print the solver status
print(s$obj)

# print the objective value
print(s$obj)

# print the solution cost
print(s$cost)

# print which actions are funded in the solution
s[, sim_actions$name, drop = FALSE]

# print the expected probability of persistence for each feature
# if the solution were implemented
s[, sim_features$name, drop = FALSE]

## End(Not run)
</code></pre>

<hr>
<h2 id='Solver-class'>Solver prototype</h2><span id='topic+Solver-class'></span><span id='topic+Solver'></span><span id='topic+GurobiSolver-class'></span><span id='topic+HeuristicSolver-class'></span><span id='topic+LpsolveapiSolver-class'></span><span id='topic+LpsymphonySolver-class'></span><span id='topic+RandomSolver-class'></span><span id='topic+RsymphonySolver-class'></span>

<h3>Description</h3>

<p>This prototype is used to generate objects that represent methods for solving
optimization problems. <strong>This class represents a recipe to
create solver and and is only recommended for use by expert users. To
customize the method used to solve optimization problems, please see the
help page on <a href="#topic+solvers">solvers</a></strong>.
</p>


<h3>Fields</h3>


<dl>
<dt>$name</dt><dd><p><code>character</code> name of solver.</p>
</dd>
<dt>$parameters</dt><dd><p><code>Parameters</code> object with parameters used to customize
the the solver.</p>
</dd>
<dt>$solve</dt><dd><p><code>function</code> used to solve a
<a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</dd>
</dl>



<h3>Usage</h3>

<p><code>x$print()</code>
</p>
<p><code>x$show()</code>
</p>
<p><code>x$repr()</code>
</p>
<p><code>x$solve(op)</code>
</p>


<h3>Arguments</h3>


<dl>
<dt>x</dt><dd><p><a href="#topic+Solver-class">Solver</a> object.</p>
</dd>
<dt>op</dt><dd><p><a href="#topic+OptimizationProblem-class">OptimizationProblem</a> object.</p>
</dd>
</dl>



<h3>Details</h3>


<dl>
<dt>print</dt><dd><p>print the object.</p>
</dd>
<dt>show</dt><dd><p>show the object.</p>
</dd>
<dt>repr</dt><dd><p><code>character</code> representation of object.</p>
</dd>
<dt>solve</dt><dd><p>solve an <a href="#topic+OptimizationProblem-class">OptimizationProblem</a> using this
object.</p>
</dd>
</dl>


<hr>
<h2 id='solvers'>Problem solvers</h2><span id='topic+solvers'></span>

<h3>Description</h3>

<p>Specify the software and configuration used to solve a project prioritization
<code><a href="#topic+problem">problem()</a></code>. By default, the best available exact algorithm
solver will be used.
</p>


<h3>Details</h3>

<p>The following solvers can be used to find solutions for a
project prioritization <code><a href="#topic+problem">problem()</a></code>:
</p>

<dl>
<dt><code><a href="#topic+add_default_solver">add_default_solver()</a></code></dt><dd><p>This solver uses the best software
currently installed on the system.</p>
</dd>
<dt><code><a href="#topic+add_gurobi_solver">add_gurobi_solver()</a></code></dt><dd>
<p><a href="https://www.gurobi.com"><em>Gurobi</em></a>
is a state-of-the-art commercial optimization software with an R package
interface. It is by far the fastest solver that can be used by
this package, however, it is also the only solver that is not freely
available. That said, licenses are available to academics at no cost. The
<span class="pkg">gurobi</span> package is distributed with the <em>Gurobi</em> software
suite. This solver uses the <span class="pkg">gurobi</span> package to solve problems.</p>
</dd>
<dt><code><a href="#topic+add_rsymphony_solver">add_rsymphony_solver()</a></code></dt><dd>
<p><a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a> is an
open-source integer programming solver that is part of the Computational
Infrastructure for Operations Research (COIN-OR) project, an initiative
to promote development of open-source tools for operations research (a
field that includes linear programming). The <span class="pkg">Rsymphony</span> package
provides an interface to COIN-OR and is available on CRAN. This solver
uses the <span class="pkg">Rsymphony</span> package to solve problems.</p>
</dd>
<dt><code><a href="#topic+add_lpsymphony_solver">add_lpsymphony_solver()</a></code></dt><dd><p>The <span class="pkg">lpsymphony</span> package
provides a different interface to the COIN-OR software suite. Unlike the
<span class="pkg">Rsymhpony</span> package, the <span class="pkg">lpsymphony</span> package is distributed
through
<a href="https://doi.org/doi:10.18129/B9.bioc.lpsymphony">Bioconductor</a>.
The <span class="pkg">lpsymphony</span> package may be easier to install on Windows or
Max OSX systems than the <span class="pkg">Rsymphony</span> package.</p>
</dd>
<dt><code><a href="#topic+add_lpsolveapi_solver">add_lpsolveapi_solver()</a></code></dt><dd>
<p><a href="http://lpsolve.sourceforge.net/5.5/"><em>lp_solve</em></a> is an
open-source integer programming solver. The <span class="pkg">lpSolveAPI</span> package
provides an interface to this solver and is available on CRAN.
Although this solver is the slowest currently supported solver,
it is also the only exact algorithm solver that can be installed on all
operating systems without any manual installation steps.</p>
</dd>
<dt><code><a href="#topic+add_heuristic_solver">add_heuristic_solver()</a></code></dt><dd><p>Generate solutions using
a backwards heuristic algorithm. Although these types of algorithms have
conventionally been used to solve project prioritization problems,
they are extremely unlikely to identify optimal solutions and provide
no guarantees concerning solution quality.</p>
</dd>
<dt><code><a href="#topic+add_random_solver">add_random_solver()</a></code></dt><dd><p>Generate solutions by
randomly funding actions. This can be useful when evaluating the
performance of a funding scheme&mdash;though it is strongly recommended
to evaluate the performance of a funding scheme by comparing it
to an optimal solution identified using exact algorithms (e.g.
<code><a href="#topic+add_gurobi_solver">add_gurobi_solver()</a></code>, <code><a href="#topic+add_rsymphony_solver">add_rsymphony_solver()</a></code>).</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>,  <a href="#topic+decisions">decisions</a>,
<a href="#topic+objectives">objectives</a>, <code><a href="#topic+problem">problem()</a></code>, <a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_binary_decisions()

# build another problem, with the default solver
p2 &lt;- p1 %&gt;%
      add_default_solver()

# build another problem, with the gurobi solver
## Not run: 
p3 &lt;- p1 %&gt;%
      add_gurobi_solver()

## End(Not run)

# build another problem, with the Rsympony solver
## Not run: 
p4 &lt;- p1 %&gt;%
      add_rsymphony_solver()

## End(Not run)

# build another problem, with the lpsymphony solver
## Not run: 
p5 &lt;- p1 %&gt;%
      add_lpsymphony_solver()

## End(Not run)

# build another problem, with the lpSolveAPI solver
p6 &lt;- p1 %&gt;%
      add_lpsolveapi_solver()

# build another problem, with the heuristic solver
p7 &lt;- p1 %&gt;%
      add_heuristic_solver()

# build another problem, with the random solver
p8 &lt;- p1 %&gt;%
      add_random_solver()

## Not run: 
# generate solutions using each of the solvers
s &lt;- rbind(solve(p2), solve(p3), solve(p4), solve(p5), solve(p6), solve(p7),
           solve(p8))
s$solver &lt;- c("default", "gurobi", "Rsymphony", "lpsymphony", "lpSolveAPI",
              "heuristic", "random")

# print solutions
print(as.data.frame(s))

## End(Not run)
</code></pre>

<hr>
<h2 id='Target-class'>Target prototype</h2><span id='topic+Target-class'></span><span id='topic+Target'></span>

<h3>Description</h3>

<p>This prototype is used to represent the targets used when making a
prioritization. This prototype inherits from the
<a href="#topic+ProjectModifier-class">ProjectModifier</a>. <strong>This class represents a
recipe, to actually add targets to a planning problem, see the help page on
<a href="#topic+targets">targets</a>. Only experts should use this class directly.</strong>
</p>


<h3>See Also</h3>

<p><a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>

<hr>
<h2 id='targets'>Targets</h2><span id='topic+targets'></span>

<h3>Description</h3>

<p>Targets are used to specify the minimum probability of persistence required
for each feature. Please note that only some objectives require
targets, and attempting to solve a problem that requires targets will throw
an error if targets are not supplied, and attempting to solve a problem that
does not require targets will throw a warning if targets are supplied.
</p>


<h3>Details</h3>

<p>The following functions can be used to specify targets for a
project prioritization <code><a href="#topic+problem">problem()</a></code>:
</p>

<dl>
<dt><code><a href="#topic+add_relative_targets">add_relative_targets()</a></code></dt><dd>
<p>Set targets as a proportion (between 0 and 1) of the maximum probability
of persistence associated with the best project for each feature. For
instance, if the best project for a feature has an 80% probability of
persisting, setting a 50% (i.e. <code>0.5</code>) relative target will
correspond to a 40% threshold probability of persisting.</p>
</dd>
<dt><code><a href="#topic+add_absolute_targets">add_absolute_targets()</a></code></dt><dd>
<p>Set targets by specifying exactly what probability of persistence is
required for each feature. For instance, setting an absolute target of
10% (i.e. <code>0.1</code>) corresponds to a threshold 10% probability of
persisting.</p>
</dd>
<dt><code><a href="#topic+add_manual_targets">add_manual_targets()</a></code></dt><dd>
<p>Set targets by manually specifying all the required information for each
target.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>, <a href="#topic+decisions">decisions</a>,
<a href="#topic+objectives">objectives</a>, <code><a href="#topic+problem">problem()</a></code>,
<a href="#topic+solvers">solvers</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with minimum set objective and targets that require each
# feature to have a 30% chance of persisting into the future
p1 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_absolute_targets(0.3) %&gt;%
      add_binary_decisions()

# print problem
print(p1)

# build problem with minimum set objective and targets that require each
# feature to have a level of persistence that is greater than or equal to
# 30% of the best project for conserving it
p2 &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
      add_min_set_objective() %&gt;%
      add_relative_targets(0.3) %&gt;%
      add_binary_decisions()

# print problem
print(p2)

## Not run: 
# solve problems
s1 &lt;- solve(p1)
s2 &lt;- solve(p2)

# print solutions
print(s1)
print(s2)

# plot solutions
plot(p1, s1)
plot(p2, s2)

## End(Not run)
</code></pre>

<hr>
<h2 id='tibble-methods'>Manipulate tibbles</h2><span id='topic+tibble-methods'></span><span id='topic+nrow+2Ctbl_df-method'></span><span id='topic+ncol+2Ctbl_df-method'></span><span id='topic+as.list+2Ctbl_df-method'></span>

<h3>Description</h3>

<p>Assorted functions for manipulating <code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> objects.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'tbl_df'
nrow(x)

## S4 method for signature 'tbl_df'
ncol(x)

## S4 method for signature 'tbl_df'
as.list(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tibble-methods_+3A_x">x</code></td>
<td>
<p><code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The following methods are provided from manipulating
<code><a href="tibble.html#topic+tibble">tibble::tibble()</a></code> objects.
</p>

<dl>
<dt>nrow</dt><dd><p>extract <code>integer</code> number of rows.</p>
</dd>
<dt>ncol</dt><dd><p>extract <code>integer</code> number of columns.</p>
</dd>
<dt>as.list</dt><dd><p>convert to a <code>list</code>.</p>
</dd>
<dt>print</dt><dd><p>print the object.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># load tibble package
require(tibble)

# make tibble
a &lt;- tibble(value = seq_len(5))

# number of rows
nrow(a)

# number of columns
ncol(a)

# convert to list
as.list(a)
</code></pre>

<hr>
<h2 id='Weight-class'>Weight prototype</h2><span id='topic+Weight-class'></span><span id='topic+Weight'></span>

<h3>Description</h3>

<p>This prototype is used to represent the weights used when making a
prioritization. This prototype inherits from the
<a href="#topic+ProjectModifier-class">ProjectModifier</a>. <strong>This class represents a
recipe, to actually add targets to a planning problem, see the help page on
<a href="#topic+weights">weights</a>. Only experts should use this class directly.</strong>
</p>


<h3>See Also</h3>

<p><a href="#topic+ProjectModifier-class">ProjectModifier</a>.
</p>

<hr>
<h2 id='weights'>Weights</h2><span id='topic+weights'></span>

<h3>Description</h3>

<p>Weights are used to specify the relative importance for specific
features persisting into the future. Please note that only some
objectives require weights, and attempting to solve a problem that does not
require weights will throw a warning and the weights will be ignored.
</p>


<h3>Details</h3>

<p>Currently, only one function can be used to specify weights:
</p>

<dl>
<dt><code><a href="#topic+add_feature_weights">add_feature_weights()</a></code></dt><dd>
<p>Set feature weights for a project prioritization <code><a href="#topic+problem">problem()</a></code>.</p>
</dd>
</dl>



<h3>See Also</h3>

<p><a href="#topic+constraints">constraints</a>, <a href="#topic+decisions">decisions</a>,
<a href="#topic+objectives">objectives</a>, <code><a href="#topic+problem">problem()</a></code>,
<a href="#topic+solvers">solvers</a>, <a href="#topic+targets">targets</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># load data
data(sim_projects, sim_features, sim_actions)

# build problem with maximum richness objective, $300 budget, and
# feature weights
p &lt;- problem(sim_projects, sim_actions, sim_features,
             "name", "success", "name", "cost", "name") %&gt;%
     add_max_richness_objective(budget = 200) %&gt;%
     add_feature_weights("weight") %&gt;%
     add_binary_decisions()

## Not run: 
# solve problem
s &lt;- solve(p)

# print solution
print(s)

# plot solution
plot(p, s)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
