<!DOCTYPE html><html lang="en"><head><title>Help for package picker</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {picker}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#picker'><p>Render a Picker Widget</p></a></li>
<li><a href='#picker_proxy'><p>Create a picker proxy object</p></a></li>
<li><a href='#picker-shiny'><p>Shiny bindings for picker</p></a></li>
<li><a href='#update_picker'><p>Send commands to a picker instance in a <code>Shiny</code> app</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Pick Data Points from a Deck.gl Scatterplot</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.6</td>
</tr>
<tr>
<td>Description:</td>
<td>Performant interactive scatterplot for ~ 1 million points. Zoom, pan,
    and pick points. Includes tooltips, labels, a grid overlay, legend, and
    coupled interactions across multiple plots.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.2</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hms-dbmi/picker">https://github.com/hms-dbmi/picker</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hms-dbmi/picker/issues">https://github.com/hms-dbmi/picker/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>htmlwidgets (&ge; 1.5.3)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>shiny, scales</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-03-30 17:26:11 UTC; alex</td>
</tr>
<tr>
<td>Author:</td>
<td>Alex Pickering [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alex Pickering &lt;alexvpickering@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-03-31 07:30:07 UTC</td>
</tr>
</table>
<hr>
<h2 id='picker'>Render a Picker Widget</h2><span id='topic+picker'></span>

<h3>Description</h3>

<p>Render a Picker Widget
</p>


<h3>Usage</h3>

<pre><code class='language-R'>picker(
  coords,
  colors,
  labels,
  title = NULL,
  label_coords = NULL,
  polygons = NULL,
  point_color_polygons = NULL,
  show_controls = TRUE,
  grid_legend_items = NULL,
  scale_legend_props = NULL,
  scatter_props = NULL,
  deck_props = NULL,
  text_props = NULL,
  polygon_props = NULL,
  xrange = NULL,
  yrange = NULL,
  xaxs = 0.04,
  yaxs = 0.04,
  width = NULL,
  height = NULL,
  elementId = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="picker_+3A_coords">coords</code></td>
<td>
<p>data.frame with two columns. First has x, second has y coordinates.</p>
</td></tr>
<tr><td><code id="picker_+3A_colors">colors</code></td>
<td>
<p>vector of hex colors, one for each row of <code>coords</code>.</p>
</td></tr>
<tr><td><code id="picker_+3A_labels">labels</code></td>
<td>
<p>vector of point labels used for tooltips on hover.</p>
</td></tr>
<tr><td><code id="picker_+3A_title">title</code></td>
<td>
<p>character string to show in top left of plot.</p>
</td></tr>
<tr><td><code id="picker_+3A_label_coords">label_coords</code></td>
<td>
<p>data.frame with three columns 'x', 'y', and 'label'. Used for text layer.</p>
</td></tr>
<tr><td><code id="picker_+3A_polygons">polygons</code></td>
<td>
<p>data.frame containing at minimum columns 'x1', 'x2', 'y1', 'y2',
that define the polygons to draw and 'color' that defines the color.</p>
</td></tr>
<tr><td><code id="picker_+3A_point_color_polygons">point_color_polygons</code></td>
<td>
<p>character, a color to make points when polygons are shown e.g. <code>'white'</code>.</p>
</td></tr>
<tr><td><code id="picker_+3A_show_controls">show_controls</code></td>
<td>
<p>Should control panel be shown? Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="picker_+3A_grid_legend_items">grid_legend_items</code></td>
<td>
<p>list of lists with <code>color</code> hex for legend
square and <code>label</code> for legend items. Only visible for grid display.</p>
</td></tr>
<tr><td><code id="picker_+3A_scale_legend_props">scale_legend_props</code></td>
<td>
<p>optional props to render a gradient scale legend.
For example: <code>list(colorHigh = 'red', colorLow = 'gray', high = 4, low = 0)</code></p>
</td></tr>
<tr><td><code id="picker_+3A_scatter_props">scatter_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/scatterplot-layer/">ScatterplotLayer</a>.</p>
</td></tr>
<tr><td><code id="picker_+3A_deck_props">deck_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/core/deck/">Deck</a> instance.</p>
</td></tr>
<tr><td><code id="picker_+3A_text_props">text_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/text-layer/">TextLayer</a>.</p>
</td></tr>
<tr><td><code id="picker_+3A_polygon_props">polygon_props</code></td>
<td>
<p>Props passed to deck.gl <a href="https://deck.gl/docs/api-reference/layers/polygon-layer/">PolygonLayer</a>.</p>
</td></tr>
<tr><td><code id="picker_+3A_xrange">xrange</code></td>
<td>
<p>range of x-values. Default is <code>range(coords[,1])</code>.</p>
</td></tr>
<tr><td><code id="picker_+3A_yrange">yrange</code></td>
<td>
<p>range of y-values. Default is <code>range(coords[,2])</code>.</p>
</td></tr>
<tr><td><code id="picker_+3A_xaxs">xaxs</code></td>
<td>
<p>the fraction to extend <code>xrange</code> on either side. Default is 0.04.</p>
</td></tr>
<tr><td><code id="picker_+3A_yaxs">yaxs</code></td>
<td>
<p>the fraction to extend <code>yrange</code> on either side. Default is 0.04.</p>
</td></tr>
<tr><td><code id="picker_+3A_width">width</code></td>
<td>
<p>width of htmlwidget.</p>
</td></tr>
<tr><td><code id="picker_+3A_height">height</code></td>
<td>
<p>height of htmlwidget.</p>
</td></tr>
<tr><td><code id="picker_+3A_elementid">elementId</code></td>
<td>
<p>id of htmlwidget.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>renders html widget
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (interactive()) {
  library(shiny)
  library(picker)

  # load example data
  load(system.file('extdata/pbmcs.rda', package = 'picker'))

  # setup gradient scale legend
  scale_legend_props &lt;- list(
    colorHigh = 'blue',
    colorLow = '#f5f5f5',
    high = round(max(exp)),
    low = min(exp))

  text_props &lt;- list()

  # get colors for gene expression
  exp &lt;- scales::rescale(exp, c(0, 1))
  expression_colors &lt;- scales::seq_gradient_pal('#f5f5f5', 'blue')(exp)

  # legend to show when grid is visible
  grid_legend_items = list(
    list(color = '#FF0000', label = '\U2191'),
    list(color = '#0000FF', label = '\U2193'),
    list(color = '#989898', label = 'p \U003C .05'),
    list(color = '#EAEAEA', label = 'p \U2265 .05')
  )

  ui = shinyUI(fluidPage(
    tags$head(tags$style(".picker {border: 1px solid #ddd; margin: 20px 0;}")),
    shiny::column(
      width = 6,
      pickerOutput('clusters', width = '100%', height = '400px'),
      pickerOutput('expression', width = '100%', height = '400px'),
      verbatimTextOutput('selected')
    )
  ))

  server = function(input, output) {

    # show selected output
    output$selected &lt;- renderPrint({
      input$clusters_selected_points
    })

    # coordinate views (zoom/pan)
    clusters_proxy &lt;- picker_proxy('clusters')
    observeEvent(input$expression_view_state, {
      update_picker(clusters_proxy, input$expression_view_state)
    })

    expression_proxy &lt;- picker_proxy('expression')
    observeEvent(input$clusters_view_state, {
      update_picker(expression_proxy, input$clusters_view_state)
    })

    # change title between grid/scatterplot
    observeEvent(input$clusters_show_grid, {
      title &lt;- ifelse(input$clusters_show_grid, '\U0394 CELLS', '')
      update_picker(clusters_proxy, title = title)
    })


    # render pickers
    output$clusters &lt;- renderPicker(
      picker(
        coords,
        cluster_colors,
        labels,
        label_coords = label_coords,
        polygons = polygons,
        text_props = text_props,
        point_color_polygons = 'white',
        grid_legend_items = grid_legend_items)
    )

    output$expression &lt;- renderPicker(
      picker(coords,
             expression_colors,
             labels,
             show_controls = FALSE,
             scale_legend_props = scale_legend_props)
    )
  }

  shinyApp(ui = ui, server = server, options = list(launch.browser = TRUE))
}
</code></pre>

<hr>
<h2 id='picker_proxy'>Create a picker proxy object</h2><span id='topic+picker_proxy'></span>

<h3>Description</h3>

<p>Creates a picker-like object that can be used to update a picker object that has already been rendered.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>picker_proxy(shinyId, session = shiny::getDefaultReactiveDomain())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="picker_proxy_+3A_shinyid">shinyId</code></td>
<td>
<p>single-element character vector indicating the output ID of the
deck to modify</p>
</td></tr>
<tr><td><code id="picker_proxy_+3A_session">session</code></td>
<td>
<p>the <code>Shiny</code> session object to which the picker widget belongs;
usually the default value will suffice.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>picker_proxy</code> object that can be updated with <code>update_picker</code>.
</p>


<h3>See Also</h3>

<p><a href="#topic+update_picker">update_picker</a>
</p>

<hr>
<h2 id='picker-shiny'>Shiny bindings for picker</h2><span id='topic+picker-shiny'></span><span id='topic+pickerOutput'></span><span id='topic+renderPicker'></span>

<h3>Description</h3>

<p>Output and render functions for using picker within Shiny
applications and interactive Rmd documents.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pickerOutput(outputId, width = "100%", height = "400px")

renderPicker(expr, env = parent.frame(), quoted = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="picker-shiny_+3A_outputid">outputId</code></td>
<td>
<p>output variable to read from</p>
</td></tr>
<tr><td><code id="picker-shiny_+3A_width">width</code>, <code id="picker-shiny_+3A_height">height</code></td>
<td>
<p>Must be a valid CSS unit (like <code>'100%'</code>,
<code>'400px'</code>, <code>'auto'</code>) or a number, which will be coerced to a
string and have <code>'px'</code> appended.</p>
</td></tr>
<tr><td><code id="picker-shiny_+3A_expr">expr</code></td>
<td>
<p>An expression that generates a picker</p>
</td></tr>
<tr><td><code id="picker-shiny_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>.</p>
</td></tr>
<tr><td><code id="picker-shiny_+3A_quoted">quoted</code></td>
<td>
<p>Is <code>expr</code> a quoted expression (with <code>quote()</code>)? This
is useful if you want to save an expression in a variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An output or render function that enables the use of the widget
within Shiny applications.
</p>

<hr>
<h2 id='update_picker'>Send commands to a picker instance in a <code>Shiny</code> app</h2><span id='topic+update_picker'></span>

<h3>Description</h3>

<p>Send commands to a picker instance in a <code>Shiny</code> app
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_picker(
  proxy,
  view_state = NULL,
  colors = NULL,
  labels = NULL,
  label_coords = NULL,
  polygons = NULL,
  show_grid = NULL,
  title = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="update_picker_+3A_proxy">proxy</code></td>
<td>
<p>picker proxy object created by <code>picker_proxy</code>.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_view_state">view_state</code></td>
<td>
<p>view state from other picker input (optional).</p>
</td></tr>
<tr><td><code id="update_picker_+3A_colors">colors</code></td>
<td>
<p>vector of hex colors, one for each row of <code>coords</code>.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_labels">labels</code></td>
<td>
<p>vector of point labels used for tooltips on hover.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_label_coords">label_coords</code></td>
<td>
<p>data.frame with three columns 'x', 'y', and 'label'. Used for text layer.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_polygons">polygons</code></td>
<td>
<p>data.frame containing at minimum columns 'x1', 'x2', 'y1', 'y2',
that define the polygons to draw and 'color' that defines the color.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_show_grid">show_grid</code></td>
<td>
<p>set to <code>TRUE</code> to turn on grid layer.</p>
</td></tr>
<tr><td><code id="update_picker_+3A_title">title</code></td>
<td>
<p>character string to show in top left of plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The original <code>proxy</code> object. Called for side effects.
</p>


<h3>See Also</h3>

<p><a href="#topic+picker_proxy">picker_proxy</a>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
