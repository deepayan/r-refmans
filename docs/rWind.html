<!DOCTYPE html><html><head><title>Help for package rWind</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rWind}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rWind-package'><p>Download, edit and include wind and sea currents data in ecological and evolutionary analysis</p></a></li>
<li><a href='#arrowDir'><p>Arrow direction fitting for Arrowhead function from &quot;shape&quot; package</p></a></li>
<li><a href='#cost.FMGS'><p>Compute flow-based cost or conductance</p></a></li>
<li><a href='#flow.dispersion_int'><p>Compute flow-based cost or conductance</p></a></li>
<li><a href='#seaOscar.dl'><p>OSCAR Sea currents data download</p></a></li>
<li><a href='#tidy'><p>Transforming a rWind_series object into a data.frame</p></a></li>
<li><a href='#uv2ds'><p>Transform U and V components in direction and speed and vice versa</p></a></li>
<li><a href='#wind.data'><p>Wind data example</p></a></li>
<li><a href='#wind.dl'><p>Wind-data download</p></a></li>
<li><a href='#wind.dl_2'><p>Wind-data download</p></a></li>
<li><a href='#wind.fit_int'><p>wind.fit_int</p></a></li>
<li><a href='#wind.mean'><p>Wind-data mean</p></a></li>
<li><a href='#wind.series'><p>Wind series example</p></a></li>
<li><a href='#wind2raster'><p>Wind-data to raster file</p></a></li>
<li><a href='#wind2raster_int'><p>Wind-data to raster file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download, Edit and Include Wind and Sea Currents Data in
Ecological and Evolutionary Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.7</td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jabiologo/rWind/issues">https://github.com/jabiologo/rWind/issues</a></td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Javier Fernández-López &lt;jflopez.bio@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Tools for download and manage surface wind and sea currents data from the Global Forecasting System <a href="https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast">https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast</a> and to compute connectivity between locations.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://allthiswasfield.blogspot.com.es/">http://allthiswasfield.blogspot.com.es/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>raster (&ge; 2.5-8), gdistance, Matrix, lubridate</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, rmarkdown, knitr</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.4)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-10-18 21:14:35 UTC; javifl</td>
</tr>
<tr>
<td>Author:</td>
<td>Javier Fernández-López [aut, cre],
  Klaus Schliep [aut],
  Yurena Arjona [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-10-19 16:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rWind-package'>Download, edit and include wind and sea currents data in ecological and evolutionary analysis</h2><span id='topic+rWind-package'></span><span id='topic+rWind'></span>

<h3>Description</h3>

<p>rWind contain tools for downloading, editing and transforming wind and sea currents data from
Global Forecast System (GFS) and Ocean Surface Current Analyses Real-time (OSCAR). It also allows to use wind and sea currents data to compute the
minimum cost path from wind speed and direction to perform
connectivity analysis.
</p>


<h3>Details</h3>

<p>The complete list of functions can be displayed with <code>library(help =
rWind)</code>. For more information, please check:
http://allthiswasfield.blogspot.com.es/
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López
</p>
<p>Klaus Schliep
</p>
<p>Yurena Arjona
</p>
<p>Maintainer: Javier Fernández-López <a href="mailto:jflopez.bio@gmail.com">jflopez.bio@gmail.com</a>
</p>

<hr>
<h2 id='arrowDir'>Arrow direction fitting for Arrowhead function from &quot;shape&quot; package</h2><span id='topic+arrowDir'></span>

<h3>Description</h3>

<p>arrowDir adapts wind direction value to be used by Arrowhead function from
&quot;shape&quot; package to plot wind direction for each coordinate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>arrowDir(W)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="arrowDir_+3A_w">W</code></td>
<td>
<p>An object of class <code>rWind</code> or a data.frame which should content
a column named &quot;dir&quot;.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Angle argument of Arrowhead function from &quot;shape&quot; package needs to be fed
in an anti-clockwise way, relative to x-axis, in degrees 0,360. arrowDir
function adapts wind direction provided by wind.fit (clockwise, relative to
y-axis ) to requirements of Arrowhead.
</p>


<h3>Value</h3>

<p>A vector with angles for each arrow to be plotted by Arrowhead.
</p>


<h3>Note</h3>

<p>arrowDir function works always together with Arrowhead function from
&quot;shape&quot; package.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López
</p>


<h3>References</h3>

<p>Karline Soetaert (2017). shape: Functions for Plotting Graphical
Shapes, Colors. R package version 1.4.3.
https://CRAN.R-project.org/package=shape
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wind.data)

# Create a vector with wind direction (angles) adapted
alpha &lt;- arrowDir(wind.data)
## Not run: 
# Now, you can plot wind direction with Arrowhead function from shapes package
# Load "shape package
require(shape)
plot(wind.data$lon, wind.data$lat, type = "n")
Arrowhead(wind.data$lon, wind.data$lat,
  angle = alpha,
  arr.length = 0.1, arr.type = "curved"
)

## End(Not run)

</code></pre>

<hr>
<h2 id='cost.FMGS'>Compute flow-based cost or conductance</h2><span id='topic+cost.FMGS'></span><span id='topic+flow.dispersion'></span>

<h3>Description</h3>

<p><code>flow.dispersion</code> computes movement conductance through a flow either, sea
or wind currents. It implements the formula described in Felícisimo et al.
2008:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cost.FMGS(wind.direction, wind.speed, target, type = "active")

flow.dispersion(x, fun = cost.FMGS, output = "transitionLayer", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cost.FMGS_+3A_wind.direction">wind.direction</code></td>
<td>
<p>A vector or scalar containing wind directions.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_wind.speed">wind.speed</code></td>
<td>
<p>A vector or scalar containing wind speeds.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_target">target</code></td>
<td>
<p>direction of the target cell</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_type">type</code></td>
<td>
<p>Could be either &quot;passive&quot; or &quot;active&quot;.In &quot;passive&quot; mode,
movement against flow direction is not allowed (deviations from the wind
direction higher than 90). In &quot;active&quot; mode, the movement can go against flow
direction, by increasing the cost.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_x">x</code></td>
<td>
<p>RasterStack object with layers obtained from wind2raster
function (&quot;rWind&quot; package) with direction and speed flow values.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_fun">fun</code></td>
<td>
<p>A function to compute the cost to move between cells. The default
is <code>cost.FMGS</code> from Felicísimo et al. (2008), see details.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_output">output</code></td>
<td>
<p>This argument allows to select different kinds of output. &quot;raw&quot;
mode creates a matrix (class &quot;dgCMatrix&quot;) with transition costs between all
cells in the raster. &quot;transitionLayer&quot; creates a TransitionLayer object with
conductance values to be used with &quot;gdistance&quot; package.</p>
</td></tr>
<tr><td><code id="cost.FMGS_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cost=(1/Speed)*(HorizontalFactor)
</p>
<p>being HorizontalFactor a &quot;function that incrementally penalized angular
deviations from the wind direction&quot; (Felicísimo et al. 2008).
</p>


<h3>Value</h3>

<p>In &quot;transitionLayer&quot; output, the function returns conductance values
(1/cost)to move between all cells in a raster having into account flow speed
and direction obtained from wind.fit function(&quot;rWind&quot; package). As wind or
sea currents implies directionality, flow.dispersion produces an anisotropic
conductance matrix (asymmetric). Conductance values are used later to built a
TransitionLayer object from &quot;gdistance&quot; package.
</p>
<p>In &quot;raw&quot; output, flow.dispersion creates a sparse Matrix with cost values.
</p>


<h3>Note</h3>

<p>Note that for large data sets, it could take a while. For large study
areas is strongly advised perform the analysis in a remote computer or a
cluster.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López; Klaus Schliep; Yurena Arjona
</p>


<h3>References</h3>

<p>Felicísimo, Á. M., Muñoz, J., &amp; González-Solis, J. (2008). Ocean surface
winds drive dynamics of transoceanic aerial movements. PLoS One, 3(8),
e2928.
</p>
<p>Jacob van Etten (2017). R Package gdistance: Distances and Routes on
Geographical Grids. Journal of Statistical Software, 76(13), 1-21.
doi:10.18637/jss.v076.i13
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
require(gdistance)

data(wind.data)

wind &lt;- wind2raster(wind.data)

Conductance &lt;- flow.dispersion(wind, type = "passive")

transitionMatrix(Conductance)
image(transitionMatrix(Conductance))
</code></pre>

<hr>
<h2 id='flow.dispersion_int'>Compute flow-based cost or conductance</h2><span id='topic+flow.dispersion_int'></span>

<h3>Description</h3>

<p>flow.dispersion_int computes movement conductance through a flow either, sea
or wind currents. It implements the formula described in Felícisimo et al.
2008:
</p>


<h3>Usage</h3>

<pre><code class='language-R'>flow.dispersion_int(stack, fun = cost.FMGS, output = "transitionLayer", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="flow.dispersion_int_+3A_stack">stack</code></td>
<td>
<p>RasterStack object with layers obtained from wind2raster
function (&quot;rWind&quot; package) with direction and speed flow values.</p>
</td></tr>
<tr><td><code id="flow.dispersion_int_+3A_fun">fun</code></td>
<td>
<p>A function to compute the cost to move between cells. The default
is <code>cost.FMGS</code> from Felicísimo et al. (2008), see details.</p>
</td></tr>
<tr><td><code id="flow.dispersion_int_+3A_output">output</code></td>
<td>
<p>This argument allows to select different kinds of output. &quot;raw&quot;
mode creates a matrix (class &quot;dgCMatrix&quot;) with transition costs between all
cells in the raster. &quot;transitionLayer&quot; creates a TransitionLayer object with
conductance values to be used with &quot;gdistance&quot; package.</p>
</td></tr>
<tr><td><code id="flow.dispersion_int_+3A_...">...</code></td>
<td>
<p>Further arguments passed to or from other methods.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Cost=(1/Speed)*(HorizontalFactor)
</p>
<p>being HorizontalFactor a &quot;function that incrementally penalized angular
deviations from the wind direction&quot; (Felicísimo et al. 2008).
</p>


<h3>Value</h3>

<p>In &quot;transitionLayer&quot; output, the function returns conductance values
(1/cost)to move between all cells in a raster having into account flow speed
and direction obtained from wind.fit function(&quot;rWind&quot; package). As wind or
sea currents implies directionality, flow.dispersion produces an anisotropic
conductance matrix (asymmetric). Conductance values are used later to built a
TransitionLayer object from &quot;gdistance&quot; package.
</p>
<p>In &quot;raw&quot; output, flow.dispersion creates a sparse Matrix with cost values.
</p>


<h3>Note</h3>

<p>Note that for large data sets, it could take a while. For large study
areas is strongly advised perform the analysis in a remote computer or a
cluster.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López; Klaus Schliep; Yurena Arjona
</p>


<h3>References</h3>

<p>Felicísimo, Á. M., Muñoz, J., &amp; González-Solis, J. (2008). Ocean surface
winds drive dynamics of transoceanic aerial movements. PLoS One, 3(8),
e2928.
</p>
<p>Jacob van Etten (2017). R Package gdistance: Distances and Routes on
Geographical Grids. Journal of Statistical Software, 76(13), 1-21.
doi:10.18637/jss.v076.i13
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(wind.data)
wind &lt;- wind2raster(wind.data)
Conductance &lt;- flow.dispersion(wind, type = "passive")
## Not run: 
require(gdistance)
transitionMatrix(Conductance)
image(transitionMatrix(Conductance))

## End(Not run)
</code></pre>

<hr>
<h2 id='seaOscar.dl'>OSCAR Sea currents data download</h2><span id='topic+seaOscar.dl'></span>

<h3>Description</h3>

<p>seaOscar.dl downloads sea currents data from the Ocean Surface Current Analyses Real-time (OSCAR)
(https://coastwatch.pfeg.noaa.gov/erddap/info/jplOscar_LonPM180/index.html).
Geospatial resolution is 0.33 degrees and sea currents are calculated for
15 m depth. CAUTION: OSCAR database has no data between 0 and 20 longitude
degrees. You can use SCUD database instead (coming soon...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seaOscar.dl(
  yyyy,
  mm,
  dd,
  lon1,
  lon2,
  lat1,
  lat2,
  type = "read-data",
  trace = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="seaOscar.dl_+3A_yyyy">yyyy</code></td>
<td>
<p>Selected year.</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_mm">mm</code></td>
<td>
<p>Selected month.</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_dd">dd</code></td>
<td>
<p>Selected day.</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_lon1">lon1</code></td>
<td>
<p>Western longitude</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_lon2">lon2</code></td>
<td>
<p>Eastern longitude</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_lat1">lat1</code></td>
<td>
<p>Northern latitude</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_lat2">lat2</code></td>
<td>
<p>Southern latitude</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_type">type</code></td>
<td>
<p>Output type. &quot;read-data&quot; is selected by default, creating an R
object. If you choose &quot;csv&quot;, seaOscar.dl create a a CSV file in your working
directory named &quot;oscar_yyyy_mm_dd.csv&quot;.</p>
</td></tr>
<tr><td><code id="seaOscar.dl_+3A_trace">trace</code></td>
<td>
<p>if trace = 1 (by default) track downloaded files</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output type is determined by type=&quot;csv&quot; or type=&quot;read-data&quot;. If
type=&quot;csv&quot; is selected, the function creates a &quot;sea_yyyy_mm_dd.csv&quot; file
that is downloaded at the work directory. If type=&quot;read-data&quot; is selected,
an R object (data.frame) is created.
</p>


<h3>Value</h3>

<p>&quot;rWind&quot; and &quot;data.frame&quot; class object or .csv file with U and V
vector  components and sea current direction and speed for each coordinate
in the study area defined by lon1/lon2 and lat1/lat2.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>References</h3>

<p>http://www.digital-geography.com/cloud-gis-getting-weather-data/#.WDOWmbV1DCL
</p>
<p>https://coastwatch.pfeg.noaa.gov/erddap/info/jplOscar_LonPM180/index.html
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl_2">wind.dl_2</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download sea currents for Galapagos Islands
## Not run: 

seaOscar.dl(2015, 1, 1, -93, -88, 2, -3)

## End(Not run)

</code></pre>

<hr>
<h2 id='tidy'>Transforming a rWind_series object into a data.frame</h2><span id='topic+tidy'></span><span id='topic+tidy.rWind_series'></span>

<h3>Description</h3>

<p>The output of tidy is always a data.frame. It is therefore suited for further
manipulation by packages like dplyr, reshape2, ggplot2 and ggvis.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy(x, ...)

## S3 method for class 'rWind_series'
tidy(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_+3A_x">x</code></td>
<td>
<p>An object to be converted into a tidy data.frame</p>
</td></tr>
<tr><td><code id="tidy_+3A_...">...</code></td>
<td>
<p>extra arguments</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>data(wind.series)
df &lt;- tidy(wind.series)
head(df)
## Not run: 
# use the tidyverse
library(dplyr)
mean_speed &lt;- tidy(wind.series) %&gt;%
  group_by(lat, lon) %&gt;%
  summarise(speed = mean(speed))
wind_average2 &lt;- wind.mean(wind.series)
all.equal(wind_average2$speed, mean_speed$speed)

## End(Not run)
</code></pre>

<hr>
<h2 id='uv2ds'>Transform U and V components in direction and speed and vice versa</h2><span id='topic+uv2ds'></span><span id='topic+ds2uv'></span>

<h3>Description</h3>

<p>Transform U and V components in direction and speed and vice versa
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uv2ds(u, v)

ds2uv(d, s)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uv2ds_+3A_u">u</code></td>
<td>
<p>U component.</p>
</td></tr>
<tr><td><code id="uv2ds_+3A_v">v</code></td>
<td>
<p>U component.</p>
</td></tr>
<tr><td><code id="uv2ds_+3A_d">d</code></td>
<td>
<p>direction (degrees).</p>
</td></tr>
<tr><td><code id="uv2ds_+3A_s">s</code></td>
<td>
<p>speed (m/s).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>&quot;uv2ds&quot; returns a matrix with direction and speed values
</p>
<p>&quot;ds2uv&quot; returns a matrix with U and V values
</p>


<h3>Note</h3>

<p>Multiple U and V values can be processed. &quot;dir&quot; denotes where the
wind/sea current is going (toward), not from where is coming.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.mean">wind.mean</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
(ds &lt;- uv2ds(c(1, 1, 3, 1), c(1, 1.7, 3, 1)))
ds2uv(ds[, 1], ds[, 2])
</code></pre>

<hr>
<h2 id='wind.data'>Wind data example</h2><span id='topic+wind.data'></span>

<h3>Description</h3>

<p>This is an example of wind data obtained with wind.dl function for the
Iberian Peninsula coordinates on 12/February/2015 at 00:00 (UTC)
</p>


<h3>Format</h3>

<p>A list with one data.frame with 651 observations on the following 7
variables:
</p>
 <dl>
<dt>list(&quot;time (UTC)&quot;)</dt><dd><p>a numeric with selected time of wind
data </p>
</dd> <dt>list(&quot;latitude (degrees_north)&quot;)</dt><dd><p>a numeric with latitude values
</p>
</dd> <dt>list(&quot;longitude (degrees_east)&quot;)</dt><dd><p>a numeric with longitude values </p>
</dd>
<dt>list(&quot;ugrd10m (m s-1)&quot;)</dt><dd><p>a numeric with U component of wind data </p>
</dd>
<dt>list(&quot;vgrd10m (m s-1)&quot;)</dt><dd><p>a numeric with V component of wind data </p>
</dd>
<dt>list(&quot;dir&quot;)</dt><dd><p>a numeric with direction of wind data </p>
</dd>
<dt>list(&quot;speed&quot;)</dt><dd><p>a numeric with speed of wind data </p>
</dd> </dl>



<h3>Details</h3>

<p>This data set is the result of:
</p>
<p><code>wind.data &lt;- wind.dl(2015,2,12,0,-10,5,35,45)</code>
</p>


<h3>Source</h3>

<p>http://allthiswasfield.blogspot.com.es/2016/12/rwind-r-package-released.html
</p>


<h3>References</h3>

<p>http://oos.soest.hawaii.edu/erddap/info/NCEP_Global_Best/index.html
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(wind.data)
str(wind.data)
head(wind.data[[1]])
</code></pre>

<hr>
<h2 id='wind.dl'>Wind-data download</h2><span id='topic+wind.dl'></span><span id='topic+read.rWind'></span>

<h3>Description</h3>

<p>wind.dl downloads wind data from the Global Forecast System (GFS) of the
USA's National Weather Service (NWS)
(https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast).
Wind data are taken from NOAA/NCEP Global Forecast System (GFS) Atmospheric
Model collection. Geospatial resolution is 0.5 degrees (approximately 50 km),
and wind is calculated for Earth surface, at 10 m. More metadata
information:
https://pae-paha.pacioos.hawaii.edu/erddap/griddap/ncep_global.graph
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind.dl(
  yyyy,
  mm,
  dd,
  tt,
  lon1,
  lon2,
  lat1,
  lat2,
  type = "read-data",
  trace = 1
)

read.rWind(file)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind.dl_+3A_yyyy">yyyy</code></td>
<td>
<p>Selected year.</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_mm">mm</code></td>
<td>
<p>Selected month.</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_dd">dd</code></td>
<td>
<p>Selected day.</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_tt">tt</code></td>
<td>
<p>Selected time. There are currently several options at the GFS
database: 00:00 - 03:00 - 06:00 - 09:00 - 12:00 - 15:00 - 18:00 - 21:00
(UTC).</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_lon1">lon1</code></td>
<td>
<p>Western longitude</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_lon2">lon2</code></td>
<td>
<p>Eastern longitude</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_lat1">lat1</code></td>
<td>
<p>Southern latitude</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_lat2">lat2</code></td>
<td>
<p>Northern latitude</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_type">type</code></td>
<td>
<p>Output type. &quot;read-data&quot; is selected by default, creating an R
object. If you choose &quot;csv&quot;, wind.dl create a a CSV file in your working
directory named &quot;wind_yyyy_mm_dd_tt.csv&quot;.</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_trace">trace</code></td>
<td>
<p>if trace = 1 (by default) track downloaded files</p>
</td></tr>
<tr><td><code id="wind.dl_+3A_file">file</code></td>
<td>
<p>file name of the saved &quot;.csv&quot; files.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The output type is determined by type=&quot;csv&quot; or type=&quot;read-data&quot;. If
type=&quot;csv&quot; is selected, the function creates a &quot;wind_yyyy_mm_dd_tt.csv&quot; file
that is downloaded at the work directory. If type=&quot;read-data&quot; is selected,
an R object (data.frame) is created.
</p>


<h3>Value</h3>

<p>&quot;rWind&quot; and &quot;data.frame&quot; class object or .csv file with U and V
vector  components and wind direction and speed for each coordinate
in the study area defined by lon1/lon2 and lat1/lat2.
</p>


<h3>Note</h3>

<p>Longitude coordinate are provided by GFS dataset in 0/360 notation
and transformed internally into -180/180. Wind &quot;dir&quot; denotes where the
wind is going (toward), not from where is coming.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>References</h3>

<p>http://www.digital-geography.com/cloud-gis-getting-weather-data/#.WDOWmbV1DCL
</p>
<p>https://pae-paha.pacioos.hawaii.edu/erddap/griddap/ncep_global.graph
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl_2">wind.dl_2</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download wind for Iberian Peninsula region at 2015, February 12, 00:00
## Not run: 

wind.dl(2015, 2, 12, 0, -10, 5, 35, 45)

## End(Not run)

</code></pre>

<hr>
<h2 id='wind.dl_2'>Wind-data download</h2><span id='topic+wind.dl_2'></span><span id='topic++5B+5B.rWind_series'></span>

<h3>Description</h3>

<p>wind.dl_2 downloads time-series wind data from the Global Forecast System
(GFS) of the USA's National Weather Service (NWS)
(https://www.ncei.noaa.gov/products/weather-climate-models/global-forecast).
Wind data are taken from NOAA/NCEP Global Forecast System (GFS) Atmospheric
Model collection. Geospatial resolution is 0.5 degrees (approximately 50 km),
and wind is calculated for Earth surface, at 10 m. More metadata
information:
http://oos.soest.hawaii.edu/erddap/info/NCEP_Global_Best/index.html
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind.dl_2(time, lon1, lon2, lat1, lat2, type = "read-data", trace = 1)

## S3 method for class 'rWind_series'
x[[i, exact = TRUE]]
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind.dl_2_+3A_time">time</code></td>
<td>
<p>a scalar or vector of POSIXt or Date objects or an character
which can transformed into those, see example below.
There are currently these options at the GFS database for the hours:
00:00 - 03:00 - 06:00 - 09:00 - 12:00 - 15:00 - 18:00 - 21:00 (UTC) (TO).</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_lon1">lon1</code></td>
<td>
<p>Western longitude</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_lon2">lon2</code></td>
<td>
<p>Eastern longitude</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_lat1">lat1</code></td>
<td>
<p>Southern latitude</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_lat2">lat2</code></td>
<td>
<p>Northern latitude</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_type">type</code></td>
<td>
<p>Output type. &quot;read-data&quot; is selected by default, creating an R
object. If you choose &quot;csv&quot;, wind.dl create a a CSV file in your work
directory named &quot;wind_yyyy_mm_dd_tt.csv&quot;.</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_trace">trace</code></td>
<td>
<p>if trace = 1 (by default) track downloaded files</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_x">x</code></td>
<td>
<p>object from which to extract element(s).</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_i">i</code></td>
<td>
<p>indices specifying elements to extract.</p>
</td></tr>
<tr><td><code id="wind.dl_2_+3A_exact">exact</code></td>
<td>
<p>Controls possible partial matching (not used yet).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To get the same format as wind.dl, you should run <code>tidy</code> function from
wind.dl_2 output.
The output type is determined by type=&quot;csv&quot; or type=&quot;read-data&quot;. If
type=&quot;csv&quot; is selected, the function creates a &quot;wind_yyyy_mm_dd_tt.csv&quot; file
that is downloaded at the work directory. If type=&quot;read-data&quot; is selected,
an <code>rWind_series</code> object is created.
</p>


<h3>Value</h3>

<p>an object of class <code>rWind_series</code> or .csv file/s with
U and V vector components and wind direction and speed for each coordinate
in the study area defined by lon1/lon2 and lat1/lat2.
</p>


<h3>Note</h3>

<p>wind.dl_2 requires two dates that represent the boundaries of the time
lapse to download wind series data.
U and V vector components allow you to create wind averages or tendencies
for each coordinate at the study area. Longitude coordinates are
provided by GFS dataset in 0/360 notation and transformed internally into
-180/180. &quot;dir&quot; denotes where the
wind/sea current is going (toward), not from where is coming.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>References</h3>

<p>http://www.digital-geography.com/cloud-gis-getting-weather-data/#.WDOWmbV1DCL
</p>
<p>http://oos.soest.hawaii.edu/erddap/griddap/NCEP_Global_Best.graph
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.mean">wind.mean</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>,
<code><a href="#topic+wind.dl">wind.dl</a></code>, <code><a href="lubridate.html#topic+as_datetime">as_datetime</a></code>, <code><a href="base.html#topic+as.POSIXct">as.POSIXct</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Download wind for Iberian Peninsula region at 2015, February 12, 00:00
## Not run: 

wind.dl_2("2018/3/15 9:00:00", -10, 5, 35, 45)

library(lubridate)
dt &lt;- seq(ymd_hms(paste(2018, 1, 1, 00, 00, 00, sep = "-")),
  ymd_hms(paste(2018, 1, 2, 21, 00, 00, sep = "-")),
  by = "3 hours"
)
ww &lt;- wind.dl_2(dt, -10, 5, 35, 45)
tidy(ww)

## End(Not run)

</code></pre>

<hr>
<h2 id='wind.fit_int'>wind.fit_int</h2><span id='topic+wind.fit_int'></span>

<h3>Description</h3>

<p>wind.fit_int is used internally by wind.dl to transform downloaded data from
GFS. wind.fit_int applies trigonometry tools to transform U and V vector wind
components in wind direction and speed features. It also transforms 0-360
longitude notation obtained from GFS data into -180/180 longitude notation.
Moreover, it cleans dates names and sorts the data by latitude.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind.fit_int(tmpx)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind.fit_int_+3A_x">X</code></td>
<td>
<p>downloaded data by wind.dl function from &quot;rWind&quot; package.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame
</p>


<h3>Note</h3>

<p>This function is used internally by wind.dl
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>References</h3>

<p>https://en.wikipedia.org/wiki/Cross_product
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>, <code><a href="#topic+wind.mean">wind.mean</a></code>,
<code><a href="#topic+wind2raster">wind2raster</a></code>
</p>

<hr>
<h2 id='wind.mean'>Wind-data mean</h2><span id='topic+wind.mean'></span>

<h3>Description</h3>

<p>wind.mean computes the mean (average) wind speed and wind direction of a time
series dataset of winds of the same region.
Summaries of time series are not trivial to compute. We compute the
arithmetic mean for the wind speed.
The direction as the circular mean, see
<a href="https://en.wikipedia.org/wiki/Circular_mean">https://en.wikipedia.org/wiki/Circular_mean</a>
for more details. The U and V components are afterwards transformed from
these values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind.mean(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind.mean_+3A_x">x</code></td>
<td>
<p>An object of class <code>rWind_series</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <code>rWind</code>, which is a <code>data.frame</code>
</p>


<h3>Note</h3>

<p>For large time series, it could take a while.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>References</h3>

<p>https://en.wikipedia.org/wiki/Cross_product
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(wind.series)
wind_average &lt;- wind.mean(wind.series)
</code></pre>

<hr>
<h2 id='wind.series'>Wind series example</h2><span id='topic+wind.series'></span>

<h3>Description</h3>

<p>This is an example of a wind series data obtained with wind.dl function
for New Zealand area on 3/January/2015 at all the available times:
00:00 - 03:00 - 06:00 - 09:00 - 12:00 - 15:00 - 18:00 - 21:00 (UTC)
</p>


<h3>Format</h3>

<p>The format is an rWind list of 8 data.frame. Each data.frame contain
961 observations on the following 7 variables:
</p>
 <dl>
<dt>list(&quot;time (UTC)&quot;)</dt><dd><p>a factor with selected time of wind
data </p>
</dd> <dt>list(&quot;latitude (degrees_north)&quot;)</dt><dd><p>a factor with latitude values
</p>
</dd> <dt>list(&quot;longitude (degrees_east)&quot;)</dt><dd><p>a factor with longitude values </p>
</dd>
<dt>list(&quot;ugrd10m (m s-1)&quot;)</dt><dd><p>a factor with U component of wind data </p>
</dd>
<dt>list(&quot;vgrd10m (m s-1)&quot;)</dt><dd><p>a factor with V component of wind data </p>
</dd>
<dt>list(&quot;dir&quot;)</dt><dd><p>a numeric with direction of wind data </p>
</dd>
<dt>list(&quot;speed&quot;)</dt><dd><p>a numeric with speed of wind data </p>
</dd> </dl>



<h3>Details</h3>

<p>This data set is the result of:
</p>
<p><code>library(lubridate)</code>
<code>dt &lt;- seq(ymd_h(paste(2015,1,3,00, sep="-")),</code>
<code>          ymd_h(paste(2015,1,3,21, sep="-")),by="3 hours")</code>
<code>wind.series &lt;- wind.dl_2(dt, 164, 179, -48, -33)</code>
</p>


<h3>Source</h3>

<p>http://allthiswasfield.blogspot.com.es/2016/12/rwind-r-package-released.html
</p>


<h3>References</h3>

<p>http://oos.soest.hawaii.edu/erddap/info/NCEP_Global_Best/index.html
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(wind.series)
str(tidy(wind.series))
</code></pre>

<hr>
<h2 id='wind2raster'>Wind-data to raster file</h2><span id='topic+wind2raster'></span>

<h3>Description</h3>

<p>wind2raster crates a raster stack (gridded) with 2 layers: wind speed and
wind direction for an object of <code>rWind</code>.
Latitude and longitude values are used to locate raster file and to create
raster using rasterFromXYZ function from raster package. If the input file is
a list of wind data created by wind.dl, a list of raster stacks will be
returned
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind2raster(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind2raster_+3A_x">x</code></td>
<td>
<p>an &quot;rWind list&quot; obtained by wind.fit</p>
</td></tr>
</table>


<h3>Details</h3>

<p>WGS84 datum (non-projected) CRS is selected by default to build the raster
file.
</p>


<h3>Value</h3>

<p>A raster stack or a list of raster stacks representing wind direction
and speed.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(wind.data)

# Create raster stack from the downloaded data with wind directon and speed
# layers

wind2raster(wind.data)
</code></pre>

<hr>
<h2 id='wind2raster_int'>Wind-data to raster file</h2><span id='topic+wind2raster_int'></span>

<h3>Description</h3>

<p>wind2raster_int crates a raster file (gridded) from a data.frame created by
wind.fit function from &quot;rWind&quot; package. Latitude and longitude values are used
to locate raster file and create raster resolution using rasterFromXYZ
function from raster package. As raster files only can store one field of
information, you should choose between direction (by default, type=&quot;dir&quot;)
and speed (type=&quot;speed&quot;) to be represented by the new raster file.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>wind2raster_int(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="wind2raster_int_+3A_x">x</code></td>
<td>
<p>an object of class <code>rWind</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>WGS84 datum (non-projected) CRS is selected by default to build the raster
file.
</p>


<h3>Value</h3>

<p>A raster file representing wind direction, wind speed or both of the
study area.
</p>


<h3>Author(s)</h3>

<p>Javier Fernández-López (jflopez.bio@gmail.com)
</p>


<h3>See Also</h3>

<p><code><a href="#topic+wind.dl">wind.dl</a></code>, <code><a href="#topic+wind2raster">wind2raster</a></code>
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
