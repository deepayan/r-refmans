<!DOCTYPE html><html lang="en"><head><title>Help for package rosmium</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {rosmium}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#rosmium'><p>rosmium: Bindings for Osmium Tool</p></a></li>
<li><a href='#assert_osmium_is_installed'><p>Assert Osmium is installed</p></a></li>
<li><a href='#extract'><p>Create geographical extracts from an OSM file</p></a></li>
<li><a href='#file_formats'><p>Supported file formats</p></a></li>
<li><a href='#show_content'><p>Show the content of an OSM file</p></a></li>
<li><a href='#tags_filter'><p>Filter objects matching specified keys/tags</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Bindings for 'Osmium Tool'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Allows one to use 'Osmium Tool'
    (<a href="https://osmcode.org/osmium-tool/">https://osmcode.org/osmium-tool/</a>) from R. 'Osmium' is a
    multipurpose command line tool that enables one to manipulate and
    analyze OpenStreetMap files through several different commands.
    Currently, this package does not aim to offer functions that cover the
    entire 'Osmium' API, instead making available functions that wrap only
    a very limited set of its features.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ipeagit.github.io/rosmium/">https://ipeagit.github.io/rosmium/</a>,
<a href="https://github.com/ipeaGIT/rosmium">https://github.com/ipeaGIT/rosmium</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ipeaGIT/rosmium/issues">https://github.com/ipeaGIT/rosmium/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, geojsonsf, processx, sf, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-27 14:53:17 UTC; dhersz</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel Herszenhut <a href="https://orcid.org/0000-0001-8066-1105"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel Herszenhut &lt;dhersz@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-27 17:30:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='rosmium'>rosmium: Bindings for Osmium Tool</h2><span id='topic+rosmium'></span><span id='topic+_PACKAGE'></span><span id='topic+rosmium-package'></span>

<h3>Description</h3>

<p>Allows one to use Osmium Tool from R. Osmium is a multipurpose command line
tool that enables one to manipulate and analyze OpenStreetMap (OSM) files
through several different commands. Currently, this package does not aim to
offer functions that cover the entirety of Osmium’s API, instead making
available functions that wrap only a very limited set of Osmium’s features.
</p>


<h3>Usage</h3>

<p>Please check the vignette for more on the package usage:
</p>

<ul>
<li><p> Introductino to rosmium: R bindings for Osmium Tool. Run
<code>vignette("rosmium")</code> or check it on the
<a href="https://ipeagit.github.io/rosmium/articles/rosmium.html">website</a>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Daniel Herszenhut <a href="mailto:dhersz@gmail.com">dhersz@gmail.com</a> (<a href="https://orcid.org/0000-0001-8066-1105">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ipeagit.github.io/rosmium/">https://ipeagit.github.io/rosmium/</a>
</p>
</li>
<li> <p><a href="https://github.com/ipeaGIT/rosmium">https://github.com/ipeaGIT/rosmium</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ipeaGIT/rosmium/issues">https://github.com/ipeaGIT/rosmium/issues</a>
</p>
</li></ul>


<hr>
<h2 id='assert_osmium_is_installed'>Assert Osmium is installed</h2><span id='topic+assert_osmium_is_installed'></span>

<h3>Description</h3>

<p>Asserts Osmium is installed, throwing an error otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>assert_osmium_is_installed()
</code></pre>


<h3>Value</h3>

<p>Throws an error if Osmium is not installed, invisibly returns <code>TRUE</code>
otherwise.
</p>

<hr>
<h2 id='extract'>Create geographical extracts from an OSM file</h2><span id='topic+extract'></span>

<h3>Description</h3>

<p>Creates geographical extracts from an OSM data file or an OSM history file.
The geographical extent can be given either as a bounding box or as a
(multi)polygon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract(
  input_path,
  extent,
  output_path,
  strategy = c("complete_ways", "smart", "simple"),
  overwrite = FALSE,
  echo_cmd = FALSE,
  echo = TRUE,
  spinner = TRUE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_+3A_input_path">input_path</code></td>
<td>
<p>A string. The path to the OSM data/history file whose
extent should be extracted from. Please see <a href="#topic+file_formats">file_formats</a> for a list of
supported file formats.</p>
</td></tr>
<tr><td><code id="extract_+3A_extent">extent</code></td>
<td>
<p>Either a <code>POLYGON</code> or a <code>MULTIPOLYGON</code> <code>sf</code> object with only
one feature or a <code>bbox</code> object, created by <a href="sf.html#topic+st_bbox">sf::st_bbox</a>.</p>
</td></tr>
<tr><td><code id="extract_+3A_output_path">output_path</code></td>
<td>
<p>A string. The path to the file where the output should be
written to. Please see <a href="#topic+file_formats">file_formats</a> for a list of supported file formats.</p>
</td></tr>
<tr><td><code id="extract_+3A_strategy">strategy</code></td>
<td>
<p>A string. The strategy to use when creating the extract.
Available strategies are <code>"complete_ways"</code>, <code>"smart"</code> and <code>"simple"</code>.
Defaults to <code>"complete_ways"</code>. Please see the &quot;Strategies&quot; section for a
description of each one of them.</p>
</td></tr>
<tr><td><code id="extract_+3A_overwrite">overwrite</code></td>
<td>
<p>A logical. Whether existing files should be overwritten by
the output. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="extract_+3A_echo_cmd">echo_cmd</code></td>
<td>
<p>A logical. Whether to print the Osmium command generated by
the function call to the screen. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="extract_+3A_echo">echo</code></td>
<td>
<p>A logical. Whether to print the standard output and error
generated by the Osmium call to the screen. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="extract_+3A_spinner">spinner</code></td>
<td>
<p>A logical. Whether to show a reassuring spinner while the
Osmium call is being executed. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="extract_+3A_verbose">verbose</code></td>
<td>
<p>A logical. Whether to display detailed information on the
running command. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The normalized path to the output file.
</p>


<h3>Strategies</h3>

<p>Different strategies can be used when creating extracts. Depending on the
strategy, different objects will end up in the extracts. The strategies
differ in how much memory they need and how often they need to read the input
file. The choice of strategy depends on how you want to use the generated
extracts and how much memory and time you have.
</p>

<ul>
<li> <p><code>"simple"</code> - runs in a single pass. The extract will contain all nodes
inside the region and all ways referencing those nodes, as well as all
relations referencing any nodes or ways already included. Ways crossing the
region boundary will not be reference-complete. Relations will not be
reference-complete. This strategy is fast, because it reads the input only
once, but the result is not enough for most use cases. This strategy will not
work for history files.
</p>
</li>
<li> <p><code>"complete_ways"</code> - runs in two passes. The extract will contain all nodes
inside the region and all ways referencing those nodes, as well as all nodes
referenced by those ways. The extract will also contain all relations
referenced by nodes inside the region or ways already included and,
recursively, their parent relations. The ways are reference-complete, but the
relations are not.
</p>
</li>
<li> <p><code>"smart"</code> - runs in three passes. The extract will contain all nodes inside
the region and all ways referencing those nodes, as well as all nodes
referenced by those ways. The extract will also contain all relations
referenced by nodes inside the region or ways already included and,
recursively, their parent relations. The extract will also contain all nodes
and ways (and the nodes they reference) referenced by relations tagged
&quot;type=multipolygon&quot; directly referencing any nodes in the region or ways
referencing nodes in the region. The ways are reference-complete, and all
multipolygon relations referencing nodes in the regions or ways that have
nodes in the region are reference-complete. Other relations are not
reference-complete.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
pbf_path &lt;- system.file("extdata/cur.osm.pbf", package = "rosmium")

file.size(pbf_path)

# buffering the pbf bounding box 4000 meters inward and using the result
# extent to extract the osm data inside it. transforming the crs because
# inward buffers only work with projected crs

lines &lt;- sf::st_read(pbf_path, layer = "lines", quiet = TRUE)
bbox &lt;- sf::st_bbox(lines)
bbox_polygon &lt;- sf::st_as_sf(sf::st_as_sfc(bbox))
smaller_bbox_poly &lt;- sf::st_buffer(
  sf::st_transform(bbox_polygon, 5880),
  -4000
)
smaller_bbox_poly &lt;- sf::st_transform(smaller_bbox_poly, 4326)

output_path &lt;- extract(
  pbf_path,
  smaller_bbox_poly,
  tempfile(fileext = ".osm.pbf")
)

file.size(output_path)

</code></pre>

<hr>
<h2 id='file_formats'>Supported file formats</h2><span id='topic+file_formats'></span>

<h3>Description</h3>

<p>Please note that most of this documentation has been adapted from Osmium
documentation. Please see
<a href="https://docs.osmcode.org/osmium/latest/osmium-file-formats.html">https://docs.osmcode.org/osmium/latest/osmium-file-formats.html</a> for the
original documentation.
</p>


<h4>File types</h4>

<p>OSM uses three types of files for its main data:
</p>

<ul>
<li><p> Data files: these are the most common files. They contain the OSM data from
a specific point in time. At most one version of every object (node, way or
relation) is contained in this file. Deleted objects are not in this file.
The usual suffix used is <code>.osm</code>.
</p>
</li>
<li><p> History files: these files contain not only the current version of an
object, but their history too. So for any object (node, way or relation)
there can be zero or more versions in this file. Deleted objects can also be
in this file. The usual suffix used is <code>.osm</code> or <code>.osh</code>. Because sometimes
the same suffix is used as for normal data files (<code>.osm</code>) and because there
is no clear indicator in the header, it is not always clear what type of file
you have in front of you.
</p>
</li>
<li><p> Change files: sometimes called <em>diff files</em> or <em>replication diffs</em>, these
files contain the changes between one state of the OSM database and another
state. Change files can contains several versions of an object and also
deleted objects. The usual suffix used is <code>.osc</code>.
</p>
</li></ul>

<p>All these files have in common that they contain OSM objects (nodes, ways
and relations). History files and change files can contain several versions
of the same object and also deleted objects; data files can't.
</p>
<p>Where possible, Osmium commands can handle all file types. For some commands
only some file types make sense.
</p>



<h4>Formats</h4>

<p>Osmium supports all major OSM file formats plus some more. These are:
</p>

<ul>
<li><p> The classical XML format in the variants <code>.osm</code> (for data files), <code>.osh</code>
(for data files with history) and <code>.osc</code> (for change files).
</p>
</li>
<li><p> The PBF binary format (usually with suffix <code>.osm.pbf</code> or just <code>.pbf</code>).
</p>
</li>
<li><p> The OPL format (usually with suffix <code>.osm.opl</code> or just <code>.opl</code>).
</p>
</li>
<li><p> The O5M/O5C format (usually with suffix <code>.o5m</code> or <code>.o5c</code>) (reading only).
</p>
</li>
<li><p> The &quot;debug&quot; format (usually with suffix <code>.osm.debug</code>) (writing only).
</p>
</li></ul>

<p>In addition, files in all formats except PBF can be compressed using <em>gzip</em>
or <em>bzip2</em> (add <code>.gz</code> or <code>.bz2</code> suffixes, respectively - e.g.
<code>data.osm.bz2</code>).
</p>


<hr>
<h2 id='show_content'>Show the content of an OSM file</h2><span id='topic+show_content'></span>

<h3>Description</h3>

<p>Displays the content of an OSM file either in <code>.html</code>, <code>.xml</code> or <code>.opl</code>
format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_content(
  input_path,
  output_format = c("html", "opl", "xml"),
  object_type = c("all", "node", "way", "relation", "changeset"),
  echo_cmd = FALSE,
  spinner = TRUE,
  preview = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="show_content_+3A_input_path">input_path</code></td>
<td>
<p>A string. The path to the OSM file whose content should be
shown. Please see <a href="#topic+file_formats">file_formats</a> for a list of supported file formats.</p>
</td></tr>
<tr><td><code id="show_content_+3A_output_format">output_format</code></td>
<td>
<p>A string. The format in which the content should be
shown. Either <code>"html"</code>, <code>"opl"</code> or <code>"xml"</code>. Please note that the <code>"html"</code>
option, although the most human readable format, results in large files
that may be very slow to open and inspect, depending on the size of the
input file.</p>
</td></tr>
<tr><td><code id="show_content_+3A_object_type">object_type</code></td>
<td>
<p>A character vector. The object types that should be
included in the output. Please note that using <code>"all"</code> is a simple way of
passing all other available types (<code>"node"</code>, <code>"way"</code>, <code>"relation"</code> and
<code>"changeset"</code>).</p>
</td></tr>
<tr><td><code id="show_content_+3A_echo_cmd">echo_cmd</code></td>
<td>
<p>A logical. Whether to print the Osmium command generated by
the function call to the screen. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="show_content_+3A_spinner">spinner</code></td>
<td>
<p>A logical. Whether to show a reassuring spinner while the
Osmium call is being executed. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="show_content_+3A_preview">preview</code></td>
<td>
<p>A logical. Whether to open the temporary file in which the
content of the OSM file was saved.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The path to the temporary file in which the OSM file content was
saved.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pbf_path &lt;- system.file("extdata/cur.osm.pbf", package = "rosmium")

small_pbf &lt;- tags_filter(
  pbf_path,
  "note",
  tempfile(fileext = "osm.pbf"),
  omit_referenced = TRUE
)

# both function calls below result in outputs with the same object types

show_content(small_pbf, object_type = "all")
show_content(
  small_pbf,
  object_type = c("node", "way", "relation", "changeset")
)

# only show nodes and ways

show_content(small_pbf, object_type = c("node", "way"))

# display all objects in xml format

show_content(small_pbf, output_format = "xml")

</code></pre>

<hr>
<h2 id='tags_filter'>Filter objects matching specified keys/tags</h2><span id='topic+tags_filter'></span>

<h3>Description</h3>

<p>Get objects matching at least one of the specified expressions from the input
and write them to the output. All objects matching the expressions will be
kept in the output, and objects referenced by them will also be added to the
output (unless <code>omit_referenced = TRUE</code>). Objects will be written out in the
order they are found in the input. Please note that the function will only
work correctly on history files if <code>omit_referenced</code> is <code>TRUE</code>, and it cannot
be used on change files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tags_filter(
  input_path,
  filters,
  output_path,
  invert_match = FALSE,
  omit_referenced = FALSE,
  remove_tags = FALSE,
  overwrite = FALSE,
  echo_cmd = FALSE,
  echo = TRUE,
  spinner = TRUE,
  verbose = FALSE,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tags_filter_+3A_input_path">input_path</code></td>
<td>
<p>A string. The path to the OSM data/history file to which
the filters should be applied. Please see <a href="#topic+file_formats">file_formats</a> for a list of
supported file formats.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_filters">filters</code></td>
<td>
<p>A string. The filter expressions that should be applied to the
input file. Please see the &quot;Filter expressions&quot; section for a description
of the filter expression format.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_output_path">output_path</code></td>
<td>
<p>A string. The path to the file where the output should be
written to. Please see <a href="#topic+file_formats">file_formats</a> for a list of supported file formats.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_invert_match">invert_match</code></td>
<td>
<p>A logical. Whether to invert the sense of matching - i.e.
to exclude objects with matching tags. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_omit_referenced">omit_referenced</code></td>
<td>
<p>A logical. Whether to omit the nodes referenced from
matching ways and members referenced from matching relations. Defaults to
<code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_remove_tags">remove_tags</code></td>
<td>
<p>A logical. Whether to remove tags from objects that are
not matching the filter expression but are included to complete references
(nodes in ways and members of relations). Defaults to <code>FALSE</code>. Please note
that if an object is both matching the filter and used as a reference it
will keep its tags.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_overwrite">overwrite</code></td>
<td>
<p>A logical. Whether existing files should be overwritten by
the output. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_echo_cmd">echo_cmd</code></td>
<td>
<p>A logical. Whether to print the Osmium command generated by
the function call to the screen. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_echo">echo</code></td>
<td>
<p>A logical. Whether to print the standard output and error
generated by the Osmium call to the screen. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_spinner">spinner</code></td>
<td>
<p>A logical. Whether to show a reassuring spinner while the
Osmium call is being executed. Defaults to <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_verbose">verbose</code></td>
<td>
<p>A logical. Whether to display detailed information on the
running command. Defaults to <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="tags_filter_+3A_progress">progress</code></td>
<td>
<p>A logical. Whether to display a progress bar while running
the command. Defaults to <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The normalized path to the output file.
</p>


<h3>Filter expressions</h3>

<p>A filter expression specifies a tag or tags that should be found in the data
and the type of object (node, way or relation) that should be matched.
</p>
<p>The object type(s) comes first, then a slash (/) and then the rest of the
expression. Object types are specified as 'n' (for nodes), 'w' (for ways),
'r' (for relations) and 'a' (for areas - closed ways with 4 or more nodes and
relations with <code>type=multipolygon</code> or <code>type=boundary</code> tag). Any combination
of them can be used. If the object type is not specified, the expression
matches all object types.
</p>
<p>Some examples:
</p>

<ul>
<li> <p><code>n/amenity</code> - matches all nodes with the key &quot;amenity&quot;.
</p>
</li>
<li> <p><code>nw/highway</code> - matches all nodes or ways with the key &quot;highway&quot;.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;/note&#8288;</code> - matches objects of any type with the key &quot;note&quot;.
</p>
</li>
<li> <p><code>note</code> - matches objects of any type with the key &quot;note&quot;.
</p>
</li>
<li> <p><code>w/highway=primary</code> - matches all ways with the key &quot;highway&quot; and value
&quot;primary&quot;.
</p>
</li>
<li> <p><code>w/highway!=primary</code> - matches all ways with the key &quot;highway&quot; and a value
other than &quot;primary&quot;.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;r/type=multipolygon,boundary&#8288;</code> - matches all relations with key &quot;type&quot; and
value &quot;multipolygon&quot; or &quot;boundary&quot;.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;w/name,name:de=Kastanienallee,Kastanienstrasse&#8288;</code> - matches any way with a
&quot;name&quot; or &quot;name:de&quot; tag with the value &quot;Kastanienallee&quot; or
&quot;Kastanienstrasse&quot;.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;n/addr:*&#8288;</code> - matches all nodes with any key starting with &quot;addr:&quot;
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;n/name=*Paris&#8288;</code> - matches all nodes with a name that contains the word
&quot;Paris&quot;.
</p>
</li>
<li> <p><code>a/building</code> - matches any closed ways with 4 or more nodes or relations
tagged &quot;building&quot;. Relations must also have a tag &quot;type=multipolygon&quot; or
&quot;type=boundary&quot;.
</p>
</li></ul>

<p>If there is no equal sign (&quot;=&quot;) in the expression, only keys are matched and
values can be anything. If there is an equal sign (&quot;=&quot;) in the expression,
the key is to the left and the value to the right. An exclamation sign (&quot;!&quot;)
before the equal sign means: a tag with that key, but not the value(s) to the
right of the equal sign. A leading or trailing asterisk (&quot;*&quot;) can be used for
substring or prefix matching, respectively. Commas (&quot;,&quot;) can be used to
separate several keys or values.
</p>
<p>All filter expressions are case-sensitive. There is no way to escape the
special characters such as &quot;=&quot;, &quot;<em>&quot; and &quot;,&quot;. You can not mix
comma-expressions and &quot;</em>&quot;-expressions.
</p>
<p>The specified filter expressions are matched in the order they are given. To
achieve best performance, put expressions expected to match more often first.
</p>
<p>Area matches (with leading &quot;a/&quot;) do not check whether the matched object is a
valid (multi)polygon, they only check whether an object might possibly be
turned into a (multi)polygon. This is the case for all closed ways (where the
first and last node are the same) with 4 or more nodes and for all relations
that have an additional &quot;type=multipolygon&quot; or &quot;type=boundary&quot; tag.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
pbf_path &lt;- system.file("extdata/cur.osm.pbf", package = "rosmium")

# get all amenity nodes
output &lt;- tags_filter(pbf_path, "n/amenity", tempfile(fileext = ".osm.pbf"))
nodes &lt;- sf::st_read(output, layer = "points", quiet = TRUE)
head(nodes$other_tags)

# get all objects (nodes, ways or relations) with an addr:* tag
output &lt;- tags_filter(
  pbf_path,
  "addr:*",
  tempfile(fileext = ".osm.pbf"),
  omit_referenced = TRUE
)
nodes &lt;- sf::st_read(output, layer = "points", quiet = TRUE)
head(nodes$other_tags)

# get all nodes and ways with a highway tag and all relations tagged with
# type=restriction plus all referenced objects
output &lt;- tags_filter(
  pbf_path,
  "nw/highway r/type=restriction",
  tempfile(fileext = ".osm.pbf")
)
ways &lt;- sf::st_read(output, layer = "lines", quiet = TRUE)
head(ways$highway)
relations &lt;- sf::st_read(output, layer = "other_relations", quiet = TRUE)
head(relations$other_tags)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
