<!DOCTYPE html><html><head><title>Help for package soilDB</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {soilDB}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#soilDB-package'><p>Soil Database Interface</p></a></li>
<li><a href='#.get_SRI_gdb_names'><p>matching helper</p></a></li>
<li><a href='#createSSURGO'><p>Create a SQLite database or GeoPackage from one or more SSURGO Exports</p></a></li>
<li><a href='#createStaticNASIS'><p>Create a memory or file-based instance of NASIS database</p></a></li>
<li><a href='#dbConnectNASIS'><p>Create local NASIS database connection</p></a></li>
<li><a href='#dbQueryNASIS'><p>Query a NASIS DBIConnection</p></a></li>
<li><a href='#downloadSSURGO'><p>Get SSURGO ZIP files from Web Soil Survey 'Download Soils Data'</p></a></li>
<li><a href='#estimateColorMixture'><p>Estimate color mixtures using weighted average of CIELAB color coordinates</p></a></li>
<li><a href='#estimateSTR'><p>Estimate Soil Temperature Regime</p></a></li>
<li><a href='#fetchKSSL'><p>Get Kellogg Soil Survey Laboratory Data from SoilWeb snapshot</p></a></li>
<li><a href='#fetchLDM'><p>Query data from Kellogg Soil Survey Laboratory Data Mart via Soil Data Access or local SQLite snapshot</p></a></li>
<li><a href='#fetchNASIS'><p>Get a pedon or component data <code>SoilProfileCollection</code> from NASIS</p></a></li>
<li><a href='#fetchNASISLabData'><p>Get NCSS Pedon laboratory data from NASIS</p></a></li>
<li><a href='#fetchNASISWebReport'><p>Get component tables from NASIS Web Reports</p></a></li>
<li><a href='#fetchOSD'><p>Get Official Series Descriptions and summaries from SoilWeb API</p></a></li>
<li><a href='#fetchPedonPC'><p>Get a SoilProfileCollection from a PedonPC v.5 database</p></a></li>
<li><a href='#fetchRaCA'><p>Get Rapid Carbon Assessment (RaCA) data</p></a></li>
<li><a href='#fetchSCAN'><p>Get Daily Climate Data from USDA-NRCS SCAN (Soil Climate Analysis Network) Stations</p></a></li>
<li><a href='#fetchSDA_spatial'><p>Get Spatial Data from Soil Data Access by <code>mukey</code>, <code>nationalmusym</code> or <code>areasymbol</code></p></a></li>
<li><a href='#fetchSoilGrids'><p>Get SoilGrids 2.0 Property Estimates for Points or Spatial Extent</p></a></li>
<li><a href='#fetchSRI'><p>Fetch Soil Inventory Resource (SRI) for USFS Region 6</p></a></li>
<li><a href='#fetchVegdata'><p>Get vegetation plot data from local NASIS database</p></a></li>
<li><a href='#filter_geochem'><p>Filter KSSL Geochemical Table</p></a></li>
<li><a href='#format_SQL_in_statement'><p>Format vector of values into a string suitable for an SQL <code>IN</code> statement.</p></a></li>
<li><a href='#get_colors_from_NASIS_db'><p>Get Soil Color Data from a local NASIS Database</p></a></li>
<li><a href='#get_colors_from_pedon_db'><p>Get Soil Color Data from a PedonPC Database</p></a></li>
<li><a href='#get_comonth_from_NASIS_db'><p>Get component month data from a local NASIS Database</p></a></li>
<li><a href='#get_component_data_from_NASIS_db'><p>Get component data from a local NASIS Database</p></a></li>
<li><a href='#get_component_from_GDB'><p>Get a SoilProfileCollection from a SSURGO file geodatabase</p></a></li>
<li><a href='#get_component_from_SDA'><p>Get SSURGO/STATSGO2 Mapunit Data from Soil Data Access</p></a></li>
<li><a href='#get_cosoilmoist_from_NASIS'><p>Get the Component Soil Moisture Tables</p></a></li>
<li><a href='#get_ecosite_history_from_NASIS_db'><p>Get Site Ecological Site History</p></a></li>
<li><a href='#get_EDIT_ecoclass_by_geoUnit'><p>Get Ecological Dynamics Information Tool (EDIT) ecological sites by catalog (ESD/ESG) and MLRA</p></a></li>
<li><a href='#get_extended_data_from_NASIS_db'><p>Get accessory tables and summaries from a local NASIS Database</p></a></li>
<li><a href='#get_extended_data_from_pedon_db'><p>Get accessory tables and summaries from a local pedonPC Database</p></a></li>
<li><a href='#get_hz_data_from_NASIS_db'><p>Get Horizon Data from a local NASIS Database</p></a></li>
<li><a href='#get_hz_data_from_pedon_db'><p>Get Horizon Data from a PedonPC Database</p></a></li>
<li><a href='#get_lablayer_data_from_NASIS_db'><p>Get lab pedon layer data from a local NASIS Database</p></a></li>
<li><a href='#get_labpedon_data_from_NASIS_db'><p>Get lab pedon data from a local NASIS Database</p></a></li>
<li><a href='#get_mapunit_from_NASIS'><p>Get Legend, Mapunit and Legend Mapunit Area Overlap Tables</p></a></li>
<li><a href='#get_NASIS_metadata'><p>Get NASIS Metadata (Domain, Column and Choice Lists)</p></a></li>
<li><a href='#get_NASIS_table_key_by_name'><p>Get a NASIS table key by type and table name</p></a></li>
<li><a href='#get_NASIS_table_metadata'><p>Get NASIS Table Metadata (Table and Column Descriptions)</p></a></li>
<li><a href='#get_NASIS_table_name_by_purpose'><p>Get NASIS 7 Physical Table Names</p></a></li>
<li><a href='#get_NOAA_GHCND'><p>Get Global Historical Climatology Network Daily (GHCND) data from NOAA API</p></a></li>
<li><a href='#get_NOAA_stations_nearXY'><p>Get NOAA station data near a given latitude and longitude</p></a></li>
<li><a href='#get_OSD'><p>Get Official Series Description Data from JSON, HTML or TXT sources</p></a></li>
<li><a href='#get_RMF_from_NASIS_db'><p>Get RMF data from local NASIS</p></a></li>
<li><a href='#get_SDA_coecoclass'><p>Get mapunit ecological sites from Soil Data Access</p></a></li>
<li><a href='#get_SDA_cosurfmorph'><p>Get Geomorphic/Surface Morphometry Data from Soil Data Access</p></a></li>
<li><a href='#get_SDA_hydric'><p>Get map unit hydric soils information from Soil Data Access</p></a></li>
<li><a href='#get_SDA_interpretation'><p>Get map unit interpretations from Soil Data Access by rule name</p></a></li>
<li><a href='#get_SDA_metrics'><p>Get Soil Data Access, Lab Data Mart and Web Soil Survey Usage Metrics</p></a></li>
<li><a href='#get_SDA_muaggatt'><p>Get map unit aggregate attribute information from Soil Data Access</p></a></li>
<li><a href='#get_SDA_pmgroupname'><p>Get map unit parent material group information from Soil Data Access</p></a></li>
<li><a href='#get_SDA_property'><p>Get map unit properties from Soil Data Access</p></a></li>
<li><a href='#get_SDV_legend_elements'><p>Get Soil Data Viewer Attribute Information</p></a></li>
<li><a href='#get_site_data_from_NASIS_db'><p>Get Site Data from a local NASIS Database</p></a></li>
<li><a href='#get_site_data_from_pedon_db'><p>Get Site Data from a PedonPC Database</p></a></li>
<li><a href='#get_soilseries_from_NASIS'><p>Get records from the Series Classification (SC) database</p></a></li>
<li><a href='#get_SRI'><p>Get Soil Inventory Resource (SRI) for USFS Region 6</p></a></li>
<li><a href='#get_SRI_layers'><p>Get SRI Layers</p></a></li>
<li><a href='#get_text_notes_from_NASIS_db'><p>Get text note data from a local NASIS Database</p></a></li>
<li><a href='#get_veg_data_from_NASIS_db'><p>Get vegetation data from a local NASIS Database</p></a></li>
<li><a href='#get_veg_from_AK_Site'><p>Get Vegetation Data from an AK Site Database</p></a></li>
<li><a href='#get_veg_from_MT_veg_db'><p>Get Site and Plot-level Data from a Montana RangeDB database</p></a></li>
<li><a href='#get_veg_from_NPS_PLOTS_db'><p>Get Vegetation Data from an NPS PLOTS Database</p></a></li>
<li><a href='#get_veg_other_from_MT_veg_db'><p>Get cover composition data from a Montana RangeDB database</p></a></li>
<li><a href='#get_veg_species_from_MT_veg_db'><p>Get species-level Data from a Montana RangeDB database</p></a></li>
<li><a href='#getHzErrorsNASIS'><p>Get Logic Errors in NASIS/PedonPC Pedon Horizon</p></a></li>
<li><a href='#ISSR800.wcs'><p>Get 800m gridded soil properties from SoilWeb ISSR-800 Web Coverage Service (WCS)</p></a></li>
<li><a href='#KSSL_VG_model'><p>Develop a Water Retention Curve from KSSL Data</p></a></li>
<li><a href='#loafercreek'><p>Example <code>SoilProfilecollection</code> Objects Returned by <code>fetchNASIS</code>.</p></a></li>
<li><a href='#local_NASIS_defined'><p>Check for presence of <code>nasis_local</code> ODBC data source</p></a></li>
<li><a href='#make_EDIT_service_URL'><p>Make Ecological Dynamics Interpretive Tool (EDIT) web services URL</p></a></li>
<li><a href='#makeChunks'><p>Generate chunk labels for splitting data</p></a></li>
<li><a href='#metadata'><p>NASIS 7 Metadata</p></a></li>
<li><a href='#mukey.wcs'><p>Get Map Unit Key (<code>mukey</code>) grid from SoilWeb Web Coverage Service (WCS)</p></a></li>
<li><a href='#NASIS_table_column_keys'><p>NASIS 7 Tables, Columns and Foreign Keys</p></a></li>
<li><a href='#NASISChoiceList'><p>Work with NASIS Choice Lists</p></a></li>
<li><a href='#NASISDomainsAsFactor'><p>Get/Set Options for Encoding NASIS Domains as Factors</p></a></li>
<li><a href='#OSDquery'><p>Search full text of Official Series Description on SoilWeb</p></a></li>
<li><a href='#parseWebReport'><p>Parse contents of a web report, based on supplied arguments.</p></a></li>
<li><a href='#processSDA_WKT'><p>Post-process Well-Known Text from Soil Data Access</p></a></li>
<li><a href='#ROSETTA'><p>Query USDA-ARS ROSETTA Model API</p></a></li>
<li><a href='#SCAN_SNOTEL_metadata'><p>Get SCAN and SNOTEL Station Metadata</p></a></li>
<li><a href='#SDA_query'><p>Query Soil Data Access</p></a></li>
<li><a href='#SDA_spatialQuery'><p>Query Soil Data Access by spatial intersection with supplied geometry</p></a></li>
<li><a href='#seriesExtent'><p>Retrieve Soil Series Extent Maps from SoilWeb</p></a></li>
<li><a href='#siblings'><p>Get &quot;siblings&quot; and &quot;cousins&quot; for a given soil series</p></a></li>
<li><a href='#simplifyArtifactData'><p>Simplify Coarse Fraction Data</p></a></li>
<li><a href='#simplifyColorData'><p>Simplify Color Data by ID</p></a></li>
<li><a href='#soilColor.wcs'><p>Get 30m or 270m gridded soil soil color data from SoilWeb Web Coverage Service (WCS)</p></a></li>
<li><a href='#soilDB.env'><p>Get the soilDB environment used for storing error messages and quality control output</p></a></li>
<li><a href='#SoilWeb_spatial_query'><p>Get SSURGO Data via Spatial Query</p></a></li>
<li><a href='#STRplot'><p>Graphical Description of US Soil Taxonomy Soil Temperature Regimes</p></a></li>
<li><a href='#summarizeSoilTemperature'><p>Get data from Henry Mount Soil Temperature and Water Database</p></a></li>
<li><a href='#taxaExtent'><p>Get SoilWeb 800m Major Component Soil Taxonomy Grids</p></a></li>
<li><a href='#uncode'><p>Convert coded values returned from NASIS and SDA queries into human-readable values</p></a></li>
<li><a href='#us_ss_timeline'><p>Timeline of US Published Soil Surveys</p></a></li>
<li><a href='#waterDayYear'><p>Compute Water Day and Year</p></a></li>
<li><a href='#WCS_details'><p>Web Coverage Services Details</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Soil Database Interface</td>
</tr>
<tr>
<td>Version:</td>
<td>2.8.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Dylan Beaudette [aut],
  Jay Skovlin [aut],
  Stephen Roecker [aut],
  Andrew Brown [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Andrew Brown &lt;andrew.g.brown@usda.gov&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A collection of functions for reading soil data from U.S. Department of Agriculture Natural Resources Conservation Service (USDA-NRCS) and National Cooperative Soil Survey (NCSS) databases.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>grDevices, graphics, stats, utils, methods, aqp (&ge; 2.0.2),
data.table, DBI, curl</td>
</tr>
<tr>
<td>Suggests:</td>
<td>jsonlite, xml2, httr, rvest, odbc, RSQLite, sf, wk, terra,
raster, knitr, rmarkdown, testthat</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ncss-tech.github.io/soilDB/">https://ncss-tech.github.io/soilDB/</a>,
<a href="https://ncss-tech.github.io/AQP/">https://ncss-tech.github.io/AQP/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ncss-tech/soilDB/issues">https://github.com/ncss-tech/soilDB/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>false</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-09 18:35:48 UTC; Andrew.G.Brown</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-09 23:50:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='soilDB-package'>Soil Database Interface</h2><span id='topic+soilDB-package'></span><span id='topic+soilDB'></span>

<h3>Description</h3>

<p>A collection of functions for reading soil data from U.S. Department of Agriculture Natural Resources Conservation Service (USDA-NRCS) and National Cooperative Soil Survey (NCSS) databases
</p>


<h3>Details</h3>

<p>This package provides methods for extracting soils information from local NASIS databases (MS
SQL Server), local PedonPC and AKSite databases (MS Access format), Soil Data Access, and
other soil-related web services.
</p>


<h3>Author(s)</h3>

<p>J.M. Skovlin, D.E. Beaudette, S.M Roecker, A.G. Brown
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchNASIS">fetchNASIS</a>, <a href="#topic+SDA_query">SDA_query</a>, <a href="#topic+loafercreek">loafercreek</a></code>
</p>

<hr>
<h2 id='.get_SRI_gdb_names'>matching helper</h2><span id='topic+.get_SRI_gdb_names'></span>

<h3>Description</h3>

<p>matching helper
</p>


<h3>Usage</h3>

<pre><code class='language-R'>.get_SRI_gdb_names(gdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id=".get_SRI_gdb_names_+3A_gdb">gdb</code></td>
<td>
<p>A character.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A gdb character.
</p>

<hr>
<h2 id='createSSURGO'>Create a SQLite database or GeoPackage from one or more SSURGO Exports</h2><span id='topic+createSSURGO'></span>

<h3>Description</h3>

<p>Create a SQLite database or GeoPackage from one or more SSURGO Exports
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSSURGO(
  filename,
  exdir,
  pattern = NULL,
  include_spatial = TRUE,
  overwrite = FALSE,
  header = FALSE,
  quiet = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createSSURGO_+3A_filename">filename</code></td>
<td>
<p>Output file name (e.g. <code>'db.sqlite'</code> or <code>'db.gpkg'</code>)</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_exdir">exdir</code></td>
<td>
<p>Path containing containing SSURGO spatial (.shp) and tabular (.txt) files.</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_pattern">pattern</code></td>
<td>
<p>Character. Optional regular expression to use to filter subdirectories of <code>exdir</code>. Default: <code>NULL</code> will search all subdirectories for SSURGO export files.</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_include_spatial">include_spatial</code></td>
<td>
<p>Logical. Include spatial data layers in database? Default: <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Overwrite existing layers? Default <code>FALSE</code> will append to existing tables/layers.</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_header">header</code></td>
<td>
<p>Logical. Passed to <code>read.delim()</code> for reading pipe-delimited (<code>|</code>) text files containing tabular data.</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Suppress messages and other output from database read/write operations?</p>
</td></tr>
<tr><td><code id="createSSURGO_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>write_sf()</code> for writing spatial layers.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Character. Vector of layer/table names in <code>filename</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 downloadSSURGO("areasymbol IN ('CA067', 'CA077', 'CA632')", destdir = "SSURGO_test")
 createSSURGO("test.gpkg", "SSURGO_test")

## End(Not run)
</code></pre>

<hr>
<h2 id='createStaticNASIS'>Create a memory or file-based instance of NASIS database</h2><span id='topic+createStaticNASIS'></span>

<h3>Description</h3>

<p>Create a memory or file-based instance of NASIS database for selected
tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createStaticNASIS(
  tables = NULL,
  new_names = NULL,
  SS = TRUE,
  dsn = NULL,
  output_path = NULL,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createStaticNASIS_+3A_tables">tables</code></td>
<td>
<p>Character vector of target tables. Default: <code>NULL</code> is whatever tables are listed by <code>DBI::dbListTables</code> for the connection typ being used.</p>
</td></tr>
<tr><td><code id="createStaticNASIS_+3A_new_names">new_names</code></td>
<td>
<p>Optional: new table names (should match length of vector of matching <code>tables</code> in <code>dsn</code>)</p>
</td></tr>
<tr><td><code id="createStaticNASIS_+3A_ss">SS</code></td>
<td>
<p>Logical. Include &quot;selected set&quot; tables (ending with suffix <code>"_View_1"</code>). Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="createStaticNASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to SQLite database containing NASIS table structure; or a <code>DBIConnection</code>. Default: <code>NULL</code></p>
</td></tr>
<tr><td><code id="createStaticNASIS_+3A_output_path">output_path</code></td>
<td>
<p>Optional: path to new/existing SQLite database to write tables to. Default: <code>NULL</code> returns table results as named list.</p>
</td></tr>
<tr><td><code id="createStaticNASIS_+3A_verbose">verbose</code></td>
<td>
<p>Show error messages from attempts to dump individual tables? Default <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list of results from calling <code>dbQueryNASIS</code> for all
columns in each NASIS table.
</p>

<hr>
<h2 id='dbConnectNASIS'>Create local NASIS database connection</h2><span id='topic+dbConnectNASIS'></span><span id='topic+NASIS'></span>

<h3>Description</h3>

<p>Create a connection to a local NASIS database with <code>DBI</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbConnectNASIS(dsn = NULL)

NASIS(dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dbConnectNASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to SQLite database containing NASIS table
structure; Default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>DBIConnection</code> object, as returned by
<code>DBI::dbConnect()</code>. If <code>dsn</code> is a <code>DBIConnection</code>, the attribute <code>isUserDefined</code> of the result is set to <code>TRUE</code>. If the <code>DBIConnection</code> is created by the internal NASIS connection process, <code>isUserDefined</code> is set to <code>FALSE.</code>
</p>

<hr>
<h2 id='dbQueryNASIS'>Query a NASIS DBIConnection</h2><span id='topic+dbQueryNASIS'></span>

<h3>Description</h3>

<p>Send queries to a NASIS DBIConnection
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dbQueryNASIS(conn, q, close = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="dbQueryNASIS_+3A_conn">conn</code></td>
<td>
<p>A <code>DBIConnection</code> object, as returned by <code>DBI::dbConnect()</code>.</p>
</td></tr>
<tr><td><code id="dbQueryNASIS_+3A_q">q</code></td>
<td>
<p>A statement to execute using <code>DBI::dbGetQuery</code>; or a (named) vector containing multiple statements to evaluate separately</p>
</td></tr>
<tr><td><code id="dbQueryNASIS_+3A_close">close</code></td>
<td>
<p>Close connection after query? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="dbQueryNASIS_+3A_...">...</code></td>
<td>
<p>Additional arguments to <code>DBI::dbGetQuery</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Result of <code>DBI::dbGetQuery</code>
</p>

<hr>
<h2 id='downloadSSURGO'>Get SSURGO ZIP files from Web Soil Survey 'Download Soils Data'</h2><span id='topic+downloadSSURGO'></span>

<h3>Description</h3>

<p>Download ZIP files containing spatial (ESRI shapefile) and tabular (TXT) files with standard SSURGO format; optionally including the corresponding SSURGO Template Database with <code>include_template=TRUE</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadSSURGO(
  WHERE = NULL,
  areasymbols = NULL,
  destdir = tempdir(),
  exdir = destdir,
  include_template = FALSE,
  db = c("SSURGO", "STATSGO"),
  extract = TRUE,
  remove_zip = FALSE,
  overwrite = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadSSURGO_+3A_where">WHERE</code></td>
<td>
<p>A SQL <code>WHERE</code> clause expression used to filter records in <code>sacatalog</code> table. Alternately <code>WHERE</code> can be any spatial object supported by <code>SDA_spatialQuery()</code> for defining the target extent.</p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_areasymbols">areasymbols</code></td>
<td>
<p>Character vector of soil survey area symbols e.g. <code>c("CA067", "CA077")</code>. Used in lieu of <code>WHERE</code> argument.</p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_destdir">destdir</code></td>
<td>
<p>Directory to download ZIP files into. Default <code>tempdir()</code>.</p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_exdir">exdir</code></td>
<td>
<p>Directory to extract ZIP archives into. May be a directory that does not yet exist. Each ZIP file will extract to a folder labeled with <code>areasymbol</code> in this directory. Default: <code>destdir</code></p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_include_template">include_template</code></td>
<td>
<p>Include the (possibly state-specific) MS Access template database? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_db">db</code></td>
<td>
<p>Either <code>"SSURGO"</code> (default; detailed soil map) or <code>"STATSGO"</code> (general soil map).</p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_extract">extract</code></td>
<td>
<p>Logical. Extract ZIP files to <code>exdir</code>? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_remove_zip">remove_zip</code></td>
<td>
<p>Logical. Remove ZIP files after extracting? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_overwrite">overwrite</code></td>
<td>
<p>Logical. Overwrite by re-extracting if directory already exists? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="downloadSSURGO_+3A_quiet">quiet</code></td>
<td>
<p>Logical. Passed to <code>curl::curl_download()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To specify the Soil Survey Areas you would like to obtain data you use a <code>WHERE</code> clause for query of <code>sacatalog</code> table such as <code>areasymbol = 'CA067'</code>, <code>"areasymbol IN ('CA628', 'CA067')"</code> or  <code style="white-space: pre;">&#8288;areasymbol LIKE 'CT%'&#8288;</code>.
</p>
<p>When <code>db="STATSGO"</code> the <code>WHERE</code> argument is not supported. Allowed <code>areasymbols</code> include <code>"US"</code> and two-letter state codes e.g. <code>"WY"</code> for the Wyoming general soils map.
</p>
<p>Pipe-delimited TXT files are found in <em>/tabular/</em> folder extracted from a SSURGO ZIP. The files are named for tables in the SSURGO schema. There is no header / the files do not have column names. See the <em>Soil Data Access Tables and Columns Report</em>: <a href="https://sdmdataaccess.nrcs.usda.gov/documents/TablesAndColumnsReport.pdf">https://sdmdataaccess.nrcs.usda.gov/documents/TablesAndColumnsReport.pdf</a> for details on tables, column names and metadata including the default sequence of columns used in TXT files. The function returns a <code>try-error</code> if the <code>WHERE</code>/<code>areasymbols</code> arguments result in
</p>
<p>Several ESRI shapefiles are found in the <em>/spatial/</em> folder extracted from a SSURGO ZIP. These have prefix <code>soilmu_</code> (mapunit), <code>soilsa_</code> (survey area), <code>soilsf_</code> (special features). There will also be a TXT file with prefix <code>soilsf_</code> describing any special features. Shapefile names then have an <code>a_</code> (polygon), <code>l_</code> (line), <code>p_</code> (point) followed by the soil survey area symbol.
</p>


<h3>Value</h3>

<p>Character. Paths to downloaded ZIP files (invisibly). May not exist if <code>remove_zip = TRUE</code>.
</p>

<hr>
<h2 id='estimateColorMixture'>Estimate color mixtures using weighted average of CIELAB color coordinates</h2><span id='topic+estimateColorMixture'></span>

<h3>Description</h3>

<p>Estimate color mixtures using weighted average of CIELAB color coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimateColorMixture(x, wt = "pct", backTransform = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimateColorMixture_+3A_x">x</code></td>
<td>
<p>data.frame, typically from NASIS containing at least CIE LAB ('L', 'A', 'B') and some kind of weight</p>
</td></tr>
<tr><td><code id="estimateColorMixture_+3A_wt">wt</code></td>
<td>
<p>fractional weights, usually area of hz face</p>
</td></tr>
<tr><td><code id="estimateColorMixture_+3A_backtransform">backTransform</code></td>
<td>
<p>logical, should the mixed sRGB representation of soil color be transformed to closest Munsell chips? This is performed by <code><a href="aqp.html#topic+col2Munsell">aqp::col2Munsell()</a></code> default: <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing estimated color mixture
</p>


<h3>Note</h3>

<p>See <code><a href="aqp.html#topic+mixMunsell">aqp::mixMunsell()</a></code> for a more realistic (but slower) simulation of subtractive mixing of pigments. An efficient replacement for this function (wt. mean in CIELAB coordinates) is implemented in <code>aqp::mixMunsell(..., mixingMethod = 'estimate')</code>.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>

<hr>
<h2 id='estimateSTR'>Estimate Soil Temperature Regime</h2><span id='topic+estimateSTR'></span>

<h3>Description</h3>

<p>Estimate soil temperature regime (STR) based on mean annual soil temperature
(MAST), mean summer temperature (MSST), mean winter soil temperature (MWST),
presence of O horizons, saturated conditions, and presence of permafrost.
Several assumptions are made when O horizon or saturation are undefined.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimateSTR(
  mast,
  mean.summer,
  mean.winter,
  O.hz = NA,
  saturated = NA,
  permafrost = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="estimateSTR_+3A_mast">mast</code></td>
<td>
<p>vector of mean annual soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="estimateSTR_+3A_mean.summer">mean.summer</code></td>
<td>
<p>vector of mean summer soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="estimateSTR_+3A_mean.winter">mean.winter</code></td>
<td>
<p>vector of mean winter soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="estimateSTR_+3A_o.hz">O.hz</code></td>
<td>
<p>logical vector of O horizon presence / absence</p>
</td></tr>
<tr><td><code id="estimateSTR_+3A_saturated">saturated</code></td>
<td>
<p>logical vector of seasonal saturation</p>
</td></tr>
<tr><td><code id="estimateSTR_+3A_permafrost">permafrost</code></td>
<td>
<p>logical vector of permafrost presence / absence</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="http://ncss-tech.github.io/AQP/soilDB/STR-eval.html">Soil Temperature Regime Evaluation Tutorial</a>
</p>


<h3>Value</h3>

<p>Vector of soil temperature regimes.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>Soil Survey Staff. 2015. Illustrated guide to soil taxonomy.
U.S. Department of Agriculture, Natural Resources Conservation Service,
National Soil Survey Center, Lincoln, Nebraska.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+STRplot">STRplot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# simple example
estimateSTR(mast=17, mean.summer = 22, mean.winter = 12)


</code></pre>

<hr>
<h2 id='fetchKSSL'>Get Kellogg Soil Survey Laboratory Data from SoilWeb snapshot</h2><span id='topic+fetchKSSL'></span>

<h3>Description</h3>

<p>Download soil characterization and morphologic data via BBOX, MLRA, or soil
series name query, from the KSSL database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchKSSL(
  series = NA,
  bbox = NA,
  mlra = NA,
  pedlabsampnum = NA,
  pedon_id = NA,
  pedon_key = NA,
  returnMorphologicData = FALSE,
  returnGeochemicalData = FALSE,
  simplifyColors = FALSE,
  progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchKSSL_+3A_series">series</code></td>
<td>
<p>vector of soil series names, case insensitive</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_bbox">bbox</code></td>
<td>
<p>a single bounding box in WGS84 geographic coordinates e.g.
<code>c(-120, 37, -122, 38)</code></p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_mlra">mlra</code></td>
<td>
<p>vector of MLRA IDs, e.g. &quot;18&quot; or &quot;22A&quot;</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_pedlabsampnum">pedlabsampnum</code></td>
<td>
<p>vector of KSSL pedon lab sample number</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_pedon_id">pedon_id</code></td>
<td>
<p>vector of user pedon ID</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_pedon_key">pedon_key</code></td>
<td>
<p>vector of KSSL internal pedon ID</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_returnmorphologicdata">returnMorphologicData</code></td>
<td>
<p>logical, optionally request basic morphologic
data, see details section</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_returngeochemicaldata">returnGeochemicalData</code></td>
<td>
<p>logical, optionally request geochemical,
optical and XRD/thermal data, see details section</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_simplifycolors">simplifyColors</code></td>
<td>
<p>logical, simplify colors (from morphologic data) and
join with horizon data</p>
</td></tr>
<tr><td><code id="fetchKSSL_+3A_progress">progress</code></td>
<td>
<p>logical, optionally give progress when iterating over
multiple requests</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is an experimental interface to a subset for the most commonly used
data from a snapshot of KSSL (lab characterization) and NASIS (morphologic)
data.
</p>
<p>Series-queries are case insensitive. Series name is based on the &quot;correlated
as&quot; field (from KSSL snapshot) when present.  The &quot;sampled as&quot;
classification was promoted to &quot;correlated as&quot; if the &quot;correlated as&quot;
classification was missing.
</p>
<p>When <code>returnMorphologicData</code> is TRUE, the resulting object is a list.
The standard output from <code>fetchKSSL</code> (<code>SoilProfileCollection</code>
object) is stored in the named element &quot;SPC&quot;. The additional elements are
basic morphologic data: soil color, rock fragment volume, pores, structure,
and redoximorphic features. There is a 1:many relationship between the
horizon data in &quot;SPC&quot; and the additional dataframes in <code>morph</code>. See
examples for ideas on how to &quot;flatten&quot; these tables.
</p>
<p>When <code>returnGeochemicalData</code> is TRUE, the resulting object is a list.
The standard output from <code>fetchKSSL</code> (<code>SoilProfileCollection</code>
object) is stored in the named element &quot;SPC&quot;. The additional elements are
geochemical and mineralogy analysis tables, specifically:
geochemical/elemental analyses &quot;geochem&quot;, optical mineralogy &quot;optical&quot;, and
X-ray diffraction / thermal &quot;xrd_thermal&quot;. <code>returnGeochemicalData</code> will
include additional dataframes <code>geochem</code>, <code>optical</code>, and
<code>xrd_thermal</code> in list result.
</p>
<p>Setting <code>simplifyColors=TRUE</code> will automatically flatten the soil color
data and join to horizon level attributes.
</p>
<p>Function arguments (<code>series</code>, <code>mlra</code>, etc.) are fully vectorized
except for <code>bbox</code>.
</p>


<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object when
<code>returnMorphologicData</code> is FALSE, otherwise a list.
</p>


<h3>Note</h3>

<p>SoilWeb maintains a snapshot of these KSSL and NASIS data. The SoilWeb
snapshot was developed using methods described here:
<a href="https://github.com/dylanbeaudette/process-kssl-snapshot">https://github.com/dylanbeaudette/process-kssl-snapshot</a>. Please use
the link below for the live data.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>References</h3>

<p><a href="http://ncsslabdatamart.sc.egov.usda.gov/">http://ncsslabdatamart.sc.egov.usda.gov/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchOSD">fetchOSD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


    library(aqp)

    # search by series name
    s &lt;- fetchKSSL(series='auburn')

    # search by bounding-box
    # s &lt;- fetchKSSL(bbox=c(-120, 37, -122, 38))

    # how many pedons
    length(s)

    # plot
    plotSPC(s, name='hzn_desgn', max.depth=150)

    ##
    ## morphologic data
    ##

    # get lab and morphologic data
    s &lt;- fetchKSSL(series='auburn', returnMorphologicData = TRUE)

    # extract SPC
    pedons &lt;- s$SPC

   # if (requireNamespace("farver")) {
   #   ## automatically simplify color data (requires farver)
   #   s &lt;- fetchKSSL(series='auburn', returnMorphologicData = TRUE, simplifyColors=TRUE)
   #   # check
   #   par(mar=c(0,0,0,0))
   #   plot(pedons, color='moist_soil_color', print.id=FALSE)
   # }


</code></pre>

<hr>
<h2 id='fetchLDM'>Query data from Kellogg Soil Survey Laboratory Data Mart via Soil Data Access or local SQLite snapshot</h2><span id='topic+fetchLDM'></span>

<h3>Description</h3>

<p>LDM model diagram: <a href="https://jneme910.github.io/Lab_Data_Mart_Documentation/Documents/SDA_KSSL_Data_model.html">https://jneme910.github.io/Lab_Data_Mart_Documentation/Documents/SDA_KSSL_Data_model.html</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchLDM(
  x = NULL,
  what = "pedlabsampnum",
  bycol = "pedon_key",
  tables = c("lab_physical_properties", "lab_chemical_properties",
    "lab_calculations_including_estimates_and_default_values", "lab_rosetta_Key"),
  WHERE = NULL,
  chunk.size = 1000,
  ntries = 3,
  layer_type = c("horizon", "layer", "reporting layer"),
  area_type = c("ssa", "country", "state", "county", "mlra", "nforest", "npark"),
  prep_code = c("S", ""),
  analyzed_size_frac = c("&lt;2 mm", ""),
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchLDM_+3A_x">x</code></td>
<td>
<p>A vector of values to find in column specified by <code>what</code>, default <code>NULL</code> uses no constraints on <code>what</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_what">what</code></td>
<td>
<p>A single column name from tables: <code>lab_combine_nasis_ncss</code>, <code>lab_webmap</code>, <code>lab_site</code>, <code>lab_pedon</code> or <code>lab_area</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_bycol">bycol</code></td>
<td>
<p>A single column name from <code>lab_layer</code> used for processing chunks; default: <code>"pedon_key"</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_tables">tables</code></td>
<td>
<p>A vector of table names; Default is <code>"lab_physical_properties"</code>, <code>"lab_chemical_properties"</code>, <code>"lab_calculations_including_estimates_and_default_values"</code>, and <code>"lab_rosetta_Key"</code>. May also include one or more of: <code>"lab_mir"</code>, <code>"lab_mineralogy_glass_count"</code>, <code>"lab_major_and_trace_elements_and_oxides"</code>, <code>"lab_xray_and_thermal"</code> but it will be necessary to select appropriate <code>prep_code</code> and <code>analyzed_size_frac</code> for your analysis (see <em>Details</em>).</p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_where">WHERE</code></td>
<td>
<p>character. A custom SQL WHERE clause, which overrides <code>x</code>, <code>what</code>, and <code>bycol</code>, such as <code style="white-space: pre;">&#8288;CASE WHEN corr_name IS NOT NULL THEN LOWER(corr_name) ELSE LOWER(samp_name) END = 'musick'&#8288;</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_chunk.size">chunk.size</code></td>
<td>
<p>Number of pedons per chunk (for queries that may exceed <code>maxJsonLength</code>)</p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_ntries">ntries</code></td>
<td>
<p>Number of tries (times to halve <code>chunk.size</code>) before returning <code>NULL</code>; default <code>3</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_layer_type">layer_type</code></td>
<td>
<p>Default: <code>"horizon"</code>, <code>"layer"</code>, and <code>"reporting layer"</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_area_type">area_type</code></td>
<td>
<p>Default: <code>"ssa"</code> (Soil Survey Area). Other options include (choose one): <code>"country"</code>, <code>"state"</code>, <code>"county"</code>, <code>"mlra"</code> (Major Land Resource Area), <code>"nforest"</code> (National Forest), <code>"npark"</code> (National Park)</p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_prep_code">prep_code</code></td>
<td>
<p>Default: <code>"S"</code> and <code>""</code>. May also include one or more of: <code>"F"</code>, <code>"HM"</code>, <code>"HM_SK"</code> <code>"GP"</code>, <code>"M"</code>, <code>"N"</code>, or <code>"S"</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_analyzed_size_frac">analyzed_size_frac</code></td>
<td>
<p>Default: <code>"&lt;2 mm"</code> and <code>""</code>. May also include one or more of: <code>"&lt;0.002 mm"</code>, <code>"0.02-0.05 mm"</code>, <code>"0.05-0.1 mm"</code>, <code>"0.1-0.25 mm"</code>, <code>"0.25-0.5 mm"</code>, <code>"0.5-1 mm"</code>, <code>"1-2 mm"</code>, <code>"0.02-2 mm"</code>, <code>"0.05-2 mm"</code></p>
</td></tr>
<tr><td><code id="fetchLDM_+3A_dsn">dsn</code></td>
<td>
<p>Data source name; either a path to a SQLite database, an open DBIConnection or (default) <code>NULL</code> (to use <code>soilDB::SDA_query</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the <code>chunk.size</code> parameter is set too large and the Soil Data Access request fails, the algorithm will re-try the query with a smaller (halved) <code>chunk.size</code> argument. This will be attempted up to 3 times before returning <code>NULL</code>
</p>
<p>Currently the <code>lab_area</code> tables are joined only for the &quot;Soil Survey Area&quot; related records.
</p>
<p>When requesting data from <code>"lab_major_and_trace_elements_and_oxides"</code>, <code>"lab_mineralogy_glass_count"</code>, or <code>"lab_xray_and_thermal"</code> multiple preparation codes (<code>prep_code</code>) or size fractions (<code>analyzed_size_frac</code>) are possible. The default behavior of <code>fetchLDM()</code> is to attempt to return a topologically valid (minimal overlaps) <em>SoilProfileCollection</em>. This is achieved by setting <code>prep_code="S"</code> (&quot;sieved&quot;) and <code>analyzed_size_frac="&lt;2 mm"</code>. You may specify alternate or additional preparation codes or fractions as needed, but note that this may cause &quot;duplication&quot; of some layers where measurements were made with different preparation or on fractionated samples
</p>


<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> for a successful query, a <code>try-error</code> if no site/pedon locations can be found or <code>NULL</code> for an empty <code>lab_layer</code> (within sites/pedons) result
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
  # fetch by ssa_key
  res &lt;- fetchLDM(8297, what = "ssa_key")

  # physical properties correlated as taxonomic subgroup "Typic Argialbolls"
  res &lt;- fetchLDM(x = "Typic Argialbolls", 
                  what = "corr_taxsubgrp", 
                  tables = "lab_physical_properties")

  # fetch by area_code (SSA only)  
  res &lt;- fetchLDM("CA630", what = "area_code")

## End(Not run)

</code></pre>

<hr>
<h2 id='fetchNASIS'>Get a pedon or component data <code>SoilProfileCollection</code> from NASIS</h2><span id='topic+fetchNASIS'></span><span id='topic+get_phorizon_from_NASIS_db'></span><span id='topic+get_phfmp_from_NASIS_db'></span><span id='topic+get_concentrations_from_NASIS_db'></span>

<h3>Description</h3>

<p>Fetch commonly used site/pedon/horizon or mapunit component data from NASIS,
returned as a <code>SoilProfileCollection</code> object.
</p>
<p>This function imports data from NASIS into R as a <code>SoilProfileCollection</code> object.
It &quot;flattens&quot; NASIS pedon and component tables, including their child tables, into several
more manageable data frames. Primarily these functions access the local NASIS database using
an ODBC connection. The <code>dsn</code> argument allows you to specify a path or <code>DBIConnection</code>
to an SQLite database. The argument <code>from = "pedon_report"</code>, data can be read
from the NASIS Report 'fetchNASIS', from either text file or URL (specified as <code>url</code>). The primary purpose
of <code>fetchNASIS(from = "pedon_report")</code> is importing datasets larger than 8000+
pedons/components.
</p>
<p>The value of <code>nullFragsAreZero</code> will have a significant impact on the
rock fragment fractions returned by fetchNASIS. Set <code>nullFragsAreZero = FALSE</code> in those cases where there are many data-gaps and NULL rock
fragment values should be interpreted as NULL. Set
<code>nullFragsAreZero = TRUE</code> in those cases where NULL rock
fragment values should be interpreted as 0.
</p>
<p>This function attempts to do most of the boilerplate work when extracting
site/pedon/horizon or component data from a local NASIS database. Pedon IDs
that are missing horizon data, or have errors in their horizonation are printed on the
console. Pedons with combination horizons (e.g. B/C) are erroneously marked
as errors due to the way in which they are stored in NASIS as two
overlapping horizon records.
</p>
<p>Tutorials:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/soilDB/articles/fetchNASIS.html">fetchNASIS Columns</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/fetchNASIS-mini-tutorial.html">fetchNASIS Pedons Tutorial</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/NASIS-component-data.html">fetchNASIS Components Tutorial</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>fetchNASIS(
  from = "pedons",
  url = NULL,
  SS = TRUE,
  rmHzErrors = FALSE,
  nullFragsAreZero = TRUE,
  soilColorState = "moist",
  mixColors = TRUE,
  lab = FALSE,
  fill = FALSE,
  dropAdditional = TRUE,
  dropNonRepresentative = TRUE,
  duplicates = FALSE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_concentrations_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_phfmp_from_NASIS_db(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchNASIS_+3A_from">from</code></td>
<td>
<p>determines what objects should fetched? Default: <code>'pedons'</code>. Alternately, <code>'components'</code>, or <code>'pedon_report'</code>.</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_url">url</code></td>
<td>
<p>string specifying the url for the NASIS pedon_report (default:
<code>NULL</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_rmhzerrors">rmHzErrors</code></td>
<td>
<p>should pedons with horizon depth errors be removed from
the results? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should fragment volumes of <code>NULL</code> be interpreted as <code>0</code>?
(default: <code>TRUE</code>), see details</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_soilcolorstate">soilColorState</code></td>
<td>
<p>Used only for <code>from = 'pedons'</code>; which colors should be used to generate the convenience field <code>soil_color</code>? (<code>'moist'</code> or <code>'dry'</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_mixcolors">mixColors</code></td>
<td>
<p>should mixed colors be calculated (Default: <code>TRUE</code>) where multiple colors are populated for the same moisture state in a horizon? <code>FALSE</code> takes the dominant color for each horizon moist/dry state.</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_lab">lab</code></td>
<td>
<p>should the <code>phlabresults</code> child table be fetched with site/pedon/horizon data (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_fill">fill</code></td>
<td>
<p>include pedon or component records without horizon data in result? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_dropadditional">dropAdditional</code></td>
<td>
<p>Used only for <code>from='components'</code> with <code>duplicates = TRUE</code>. Prevent &quot;duplication&quot; of <code>mustatus == "additional"</code>  mapunits? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_dropnonrepresentative">dropNonRepresentative</code></td>
<td>
<p>Used only for <code>from='components'</code> with <code>duplicates = TRUE</code>. Prevent &quot;duplication&quot; of non-representative data mapunits? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_duplicates">duplicates</code></td>
<td>
<p>Used only for <code>from='components'</code>. Duplicate components for all instances of use (i.e. one for each legend data mapunit is used on; optionally for additional mapunits, and/or non-representative data mapunits?). This will include columns from <code>get_component_correlation_data_from_NASIS_db()</code> that identify which legend(s) a component is used on.</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="fetchNASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object
</p>


<h3>Author(s)</h3>

<p>D. E. Beaudette, J. M. Skovlin, S.M. Roecker, A.G. Brown
</p>


<h3>See Also</h3>

<p><code>get_component_data_from_NASIS()</code>
</p>

<hr>
<h2 id='fetchNASISLabData'>Get NCSS Pedon laboratory data from NASIS</h2><span id='topic+fetchNASISLabData'></span>

<h3>Description</h3>

<p>Fetch KSSL laboratory pedon/horizon layer data from a local NASIS database,
return as a SoilProfileCollection object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchNASISLabData(SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchNASISLabData_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)#'</p>
</td></tr>
<tr><td><code id="fetchNASISLabData_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function currently works only on Windows, and requires a 'nasis_local'
ODBC connection.
</p>


<h3>Value</h3>

<p>a SoilProfileCollection object
</p>


<h3>Author(s)</h3>

<p>J.M. Skovlin and D.E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_labpedon_data_from_NASIS_db">get_labpedon_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='fetchNASISWebReport'>Get component tables from NASIS Web Reports</h2><span id='topic+fetchNASISWebReport'></span><span id='topic+get_project_from_NASISWebReport'></span><span id='topic+get_progress_from_NASISWebReport'></span><span id='topic+get_project_correlation_from_NASISWebReport'></span><span id='topic+get_legend_from_NASISWebReport'></span><span id='topic+get_mapunit_from_NASISWebReport'></span><span id='topic+get_projectmapunit_from_NASISWebReport'></span><span id='topic+get_projectmapunit2_from_NASISWebReport'></span><span id='topic+get_component_from_NASISWebReport'></span><span id='topic+get_chorizon_from_NASISWebReport'></span><span id='topic+get_cosoilmoist_from_NASISWebReport'></span><span id='topic+get_sitesoilmoist_from_NASISWebReport'></span><span id='topic+get_lmuaoverlap_from_NASISWebReport'></span>

<h3>Description</h3>

<p>Get component tables from NASIS Web Reports
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchNASISWebReport(
  projectname,
  rmHzErrors = FALSE,
  fill = FALSE,
  stringsAsFactors = NULL
)

get_component_from_NASISWebReport(projectname, stringsAsFactors = NULL)

get_chorizon_from_NASISWebReport(
  projectname,
  fill = FALSE,
  stringsAsFactors = NULL
)

get_legend_from_NASISWebReport(
  mlraoffice,
  areasymbol,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_lmuaoverlap_from_NASISWebReport(
  areasymbol,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_mapunit_from_NASISWebReport(
  areasymbol,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_projectmapunit_from_NASISWebReport(projectname, stringsAsFactors = NULL)

get_projectmapunit2_from_NASISWebReport(
  mlrassoarea,
  fiscalyear,
  projectname,
  stringsAsFactors = NULL
)

get_project_from_NASISWebReport(mlrassoarea, fiscalyear)

get_progress_from_NASISWebReport(mlrassoarea, fiscalyear, projecttypename)

get_project_correlation_from_NASISWebReport(
  mlrassoarea,
  fiscalyear,
  projectname
)

get_cosoilmoist_from_NASISWebReport(
  projectname,
  impute = TRUE,
  stringsAsFactors = NULL
)

get_sitesoilmoist_from_NASISWebReport(usiteid)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchNASISWebReport_+3A_projectname">projectname</code></td>
<td>
<p>text string vector of project names to be inserted into a
SQL WHERE clause (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_rmhzerrors">rmHzErrors</code></td>
<td>
<p>should pedons with horizonation errors be removed from the
results? (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_fill">fill</code></td>
<td>
<p>should rows with missing component ids be removed (default: <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_mlraoffice">mlraoffice</code></td>
<td>
<p>text string value identifying the MLRA Regional Soil
Survey Office group name inserted into a SQL WHERE clause (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_areasymbol">areasymbol</code></td>
<td>
<p>text string value identifying the area symbol (e.g.
<code>IN001</code> or <code style="white-space: pre;">&#8288;IN%&#8288;</code>) inserted into a SQL WHERE clause (default: <code>NA</code>)
<code>NULL</code> (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_droplevels">droplevels</code></td>
<td>
<p>logical: indicating whether to drop unused levels in
classifying factors. This is useful when a class has large number of unused
classes, which can waste space in tables and figures.</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_mlrassoarea">mlrassoarea</code></td>
<td>
<p>text string value identifying the MLRA Soil Survey Office
areasymbol symbol inserted into a SQL WHERE clause (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_fiscalyear">fiscalyear</code></td>
<td>
<p>text string value identifying the fiscal year inserted
into a SQL WHERE clause (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_projecttypename">projecttypename</code></td>
<td>
<p>text string value identifying the project type name
inserted into a SQL WHERE clause (default: <code>NA</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_impute">impute</code></td>
<td>
<p>replace missing (i.e. <code>NULL</code>) values with <code>"Not_Populated"</code> for
categorical data, or the &quot;RV&quot; for numeric data or <code>201</code> cm if the &quot;RV&quot; is also
<code>NULL</code> (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="fetchNASISWebReport_+3A_usiteid">usiteid</code></td>
<td>
<p>character: User Site IDs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame or list with the results.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>

<hr>
<h2 id='fetchOSD'>Get Official Series Descriptions and summaries from SoilWeb API</h2><span id='topic+fetchOSD'></span>

<h3>Description</h3>

<p>This function fetches a variety of data associated with named soil series, extracted from the USDA-NRCS Official Series Description text files and detailed soil survey (SSURGO). These data are updated quarterly and made available via SoilWeb. Set <code>extended = TRUE</code> and see the <code>soilweb.metadata</code> list element for information on when the source data were last updated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchOSD(soils, colorState = "moist", extended = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchOSD_+3A_soils">soils</code></td>
<td>
<p>a character vector of named soil series; case-insensitive</p>
</td></tr>
<tr><td><code id="fetchOSD_+3A_colorstate">colorState</code></td>
<td>
<p>color state for horizon soil color visualization: &quot;moist&quot; or &quot;dry&quot;</p>
</td></tr>
<tr><td><code id="fetchOSD_+3A_extended">extended</code></td>
<td>
<p>if <code>TRUE</code> additional soil series summary data are returned, see details</p>
</td></tr>
</table>


<h3>Details</h3>



<ul>
<li><p><a href="https://ncss-tech.github.io/AQP/soilDB/soil-series-query-functions.html">overview of all soil series query functions</a>
</p>
</li>
<li><p><a href="https://ncss-tech.github.io/AQP/soilDB/competing-series.html">competing soil series</a>
</p>
</li>
<li><p><a href="https://ncss-tech.github.io/AQP/soilDB/siblings.html">siblings</a>
</p>
</li></ul>

<p>The standard set of &quot;site&quot; and &quot;horizon&quot; data are returned as a <code>SoilProfileCollection</code> object (<code>extended = FALSE</code>). The &quot;extended&quot; suite of summary data can be requested by setting <code>extended = TRUE</code>. The resulting object will be a <code>list</code> with the following elements:
</p>

<dl>
<dt>SPC</dt><dd><p><code>SoilProfileCollection</code> containing standards &quot;site&quot; and &quot;horizon&quot; data</p>
</dd>
<dt>competing</dt><dd><p>competing soil series from the SC database snapshot</p>
</dd>
<dt>geog_assoc_soils</dt><dd><p>geographically associated soils, extracted from named section in the OSD</p>
</dd>
<dt>geomcomp</dt><dd><p>empirical probabilities for geomorphic component, derived from the current SSURGO snapshot</p>
</dd>
<dt>hillpos</dt><dd><p>empirical probabilities for hillslope position, derived from the current SSURGO snapshot</p>
</dd>
<dt>mtnpos</dt><dd><p>empirical probabilities for mountain slope position, derived from the current SSURGO snapshot</p>
</dd>
<dt>terrace</dt><dd><p>empirical probabilities for river terrace position, derived from the current SSURGO snapshot</p>
</dd>
<dt>flats</dt><dd><p>empirical probabilities for flat landscapes, derived from the current SSURGO snapshot</p>
</dd>
<dt>shape_across</dt><dd><p>empirical probabilities for surface shape (across-slope) from the current SSURGO snapshot</p>
</dd>
<dt>shape_down</dt><dd><p>empirical probabilities for surface shape (down-slope) from the current SSURGO snapshot</p>
</dd>
<dt>pmkind</dt><dd><p>empirical probabilities for parent material kind, derived from the current SSURGO snapshot</p>
</dd>
<dt>pmorigin</dt><dd><p>empirical probabilities for parent material origin, derived from the current SSURGO snapshot</p>
</dd>
<dt>mlra</dt><dd><p>empirical MLRA membership values, derived from the current SSURGO snapshot</p>
</dd>
<dt>ecoclassid</dt><dd><p>area cross-tabulation of ecoclassid by soil series name, derived from the current SSURGO snapshot, major components only</p>
</dd>
<dt>climate</dt><dd><p>experimental climate summaries from PRISM stack (CONUS only)</p>
</dd>
<dt>NCCPI</dt><dd><p>select quantiles of NCCPI and Irrigated NCCPI, derived from the current SSURGO snapshot</p>
</dd>
<dt>metadata</dt><dd><p>metadata associated with SoilWeb cached summaries</p>
</dd>
</dl>

<p>When using <code>extended = TRUE</code>, there are a couple of scenarios in which series morphology contained in <code>SPC</code> do not fully match records in the associated series summary tables (e.g. <code>competing</code>).
</p>

<dl>
<dt>1. A query for soil series that exist entirely outside of CONUS (e.g. PALAU).</dt><dd><p> - Climate summaries are empty <code>data.frames</code> because these summaries are currently generated from PRISM. We are working on a solution that uses DAYMET.</p>
</dd>
<dt>2. A query for data within CONUS, but OSD morphology missing due to parsing error (e.g. formatting, typos).</dt><dd><p> - Extended summaries are present but morphology missing from <code>SPC</code>. A warning is issued.</p>
</dd>
</dl>

<p>These last two cases are problematic for analysis that makes use of morphology and extended data, such as outlined in this tutorial on <a href="https://ncss-tech.github.io/AQP/soilDB/competing-series.html">competing soil series</a>.
</p>



<h3>Value</h3>

<p>a <code>SoilProfileCollection</code> object containing basic soil morphology and taxonomic information.
</p>


<h3>Note</h3>

<p>Requests to the SoilWeb API are split into batches of 100 series names from <code>soils</code> via <code><a href="#topic+makeChunks">makeChunks()</a></code>.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G. Brown
</p>


<h3>References</h3>

<p>USDA-NRCS OSD search tools: <a href="https://soilseries.sc.egov.usda.gov/">https://soilseries.sc.egov.usda.gov/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+OSDquery">OSDquery()</a></code>, <code><a href="#topic+siblings">siblings()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


  library(aqp)
  # soils of interest
  s.list &lt;- c('musick', 'cecil', 'drummer', 'amador', 'pentz',
              'reiff', 'san joaquin', 'montpellier', 'grangeville', 'pollasky', 'ramona')

  # fetch and convert data into an SPC
  s.moist &lt;- fetchOSD(s.list, colorState='moist')
  s.dry &lt;- fetchOSD(s.list, colorState='dry')

  # plot profiles
  # moist soil colors
  par(mar=c(0,0,0,0), mfrow=c(2,1))
  plot(s.moist, name='hzname',
       cex.names=0.85, axis.line.offset=-4)
  plot(s.dry, name='hzname',
       cex.names=0.85, axis.line.offset=-4)

  # extended mode: return a list with SPC + summary tables
  x &lt;- fetchOSD(s.list, extended = TRUE, colorState = 'dry')

  par(mar=c(0,0,1,1))
  plot(x$SPC)
  str(x, 1)


</code></pre>

<hr>
<h2 id='fetchPedonPC'>Get a SoilProfileCollection from a PedonPC v.5 database</h2><span id='topic+fetchPedonPC'></span><span id='topic+getHzErrorsPedonPC'></span>

<h3>Description</h3>

<p>Fetch commonly used site/horizon data from a version 5.x PedonPC database, return as a SoilProfileCollection object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchPedonPC(dsn)

getHzErrorsPedonPC(dsn, strict = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchPedonPC_+3A_dsn">dsn</code></td>
<td>
<p>The path to a PedonPC version 6.x database</p>
</td></tr>
<tr><td><code id="fetchPedonPC_+3A_strict">strict</code></td>
<td>
<p>Use &quot;strict&quot; horizon error checking? Default: <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a SoilProfileCollection class object
</p>


<h3>Note</h3>

<p>This function attempts to do most of the boilerplate work when
extracting site/horizon data from a PedonPC or local NASIS database. Pedons
that have errors in their horizonation are excluded from the returned
object, however, their IDs are printed on the console. See
<code><a href="#topic+getHzErrorsPedonPC">getHzErrorsPedonPC</a></code> for a simple approach to identifying pedons
with problematic horizonation. Records from the 'taxhistory' table are
selected based on 1) most recent record, or 2) record with the least amount
of missing data.
</p>


<h3>Author(s)</h3>

<p>D. E. Beaudette and J. M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>
</p>

<hr>
<h2 id='fetchRaCA'>Get Rapid Carbon Assessment (RaCA) data</h2><span id='topic+fetchRaCA'></span>

<h3>Description</h3>

<p><strong>NOTICE:</strong> The SoilWeb snapshot of the RaCA data has been deprecated. The latest version of the data, including values measured by the Kellogg Soil Survey Laboratory, and supporting documentation, are available here: <a href="https://www.nrcs.usda.gov/resources/data-and-reports/rapid-carbon-assessment-raca">https://www.nrcs.usda.gov/resources/data-and-reports/rapid-carbon-assessment-raca</a>. Download link on National Agricultural Library Ag Data Commons: <a href="https://data.nal.usda.gov/dataset/rapid-carbon-assessment-raca">https://data.nal.usda.gov/dataset/rapid-carbon-assessment-raca</a>
</p>
<p>Get Rapid Carbon Assessment (RaCA) data by state, geographic bounding-box, RaCA site ID, or soil series query from the SoilWeb API. This interface to the data was an experimental delivery service that does not include the latest soil organic carbon (SOC) measurements.
</p>
<p>Please use <a href="https://data.nal.usda.gov/dataset/rapid-carbon-assessment-raca">current RaCA distribution</a> if you need lab <em>measured</em> SOC rather than SOC estimated by VNIR.
</p>
<p>This interface will be updated sometime calendar year 2022 to include the latest soil morphology, taxonomic classification, and measured SOC values. More detailed coordinates for sample sites should also be available.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchRaCA(
  series = NULL,
  bbox = NULL,
  state = NULL,
  rcasiteid = NULL,
  get.vnir = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchRaCA_+3A_series">series</code></td>
<td>
<p>a soil series name; case-insensitive</p>
</td></tr>
<tr><td><code id="fetchRaCA_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in WGS84 geographic coordinates e.g. <code>c(-120, 37, -122, 38)</code>, constrained to a 5-degree block</p>
</td></tr>
<tr><td><code id="fetchRaCA_+3A_state">state</code></td>
<td>
<p>a two-letter US state abbreviation; case-insensitive</p>
</td></tr>
<tr><td><code id="fetchRaCA_+3A_rcasiteid">rcasiteid</code></td>
<td>
<p>a RaCA site id (e.g. 'C1609C01')</p>
</td></tr>
<tr><td><code id="fetchRaCA_+3A_get.vnir">get.vnir</code></td>
<td>
<p>logical, should associated VNIR spectra be downloaded? (see details)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The VNIR spectra associated with RaCA data are quite large (each gzip-compressed VNIR spectra record is about 6.6kb), so requests for these data are disabled by default. Note that VNIR spectra can only be queried by soil series or geographic BBOX.
</p>


<h3>Value</h3>



<dl>
<dt><code>pedons</code>:</dt><dd><p>a <code>SoilProfileCollection</code> object containing site/pedon/horizon data</p>
</dd>
<dt><code>trees</code>:</dt><dd><p>a <code>data.frame</code> object containing tree DBH and height</p>
</dd>
<dt><code>veg</code>:</dt><dd><p>a <code>data.frame</code> object containing plant species</p>
</dd>
<dt><code>stock</code>:</dt><dd><p>a <code>data.frame</code> object containing carbon quantities (stocks) at standardized depths</p>
</dd>
<dt><code>sample</code>:</dt><dd><p>a <code>data.frame</code> object containing sample-level bulk density and soil organic carbon values</p>
</dd>
<dt><code>spectra</code>:</dt><dd><p>a numeric <code>matrix</code> containing VNIR reflectance spectra from 350&ndash;2500 nm</p>
</dd>
</dl>




<h3>Author(s)</h3>

<p>D.E. Beaudette, USDA-NRCS staff
</p>


<h3>References</h3>


<p><a href="https://data.nal.usda.gov/dataset/rapid-carbon-assessment-raca">https://data.nal.usda.gov/dataset/rapid-carbon-assessment-raca</a>

</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchOSD">fetchOSD</a></code>
</p>

<hr>
<h2 id='fetchSCAN'>Get Daily Climate Data from USDA-NRCS SCAN (Soil Climate Analysis Network) Stations</h2><span id='topic+fetchSCAN'></span><span id='topic+SCAN_sensor_metadata'></span><span id='topic+SCAN_site_metadata'></span>

<h3>Description</h3>

<p>Query soil/climate data from USDA-NRCS SCAN Stations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchSCAN(
  site.code = NULL,
  year = NULL,
  report = "SCAN",
  timeseries = c("Daily", "Hourly"),
  ...
)

SCAN_sensor_metadata(site.code)

SCAN_site_metadata(site.code = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchSCAN_+3A_site.code">site.code</code></td>
<td>
<p>a vector of site codes. If <code>NULL</code> <code>SCAN_site_metadata()</code> returns metadata for all SCAN sites.</p>
</td></tr>
<tr><td><code id="fetchSCAN_+3A_year">year</code></td>
<td>
<p>a vector of years</p>
</td></tr>
<tr><td><code id="fetchSCAN_+3A_report">report</code></td>
<td>
<p>report name, single value only; default <code>'SCAN'</code>, other example options include individual sensor codes, e.g. <code>'SMS'</code> for Soil Moisture Storage, <code>'TEMP'</code> for temperature</p>
</td></tr>
<tr><td><code id="fetchSCAN_+3A_timeseries">timeseries</code></td>
<td>
<p>either <code>'Daily'</code> or <code>'Hourly'</code></p>
</td></tr>
<tr><td><code id="fetchSCAN_+3A_...">...</code></td>
<td>
<p>additional arguments. May include <code>intervalType</code>, <code>format</code>, <code>sitenum</code>, <code>interval</code>, <code>year</code>, <code>month</code>. Presence of additional arguments bypasses default batching functionality provided in the function and submits a 'raw' request to the API form.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Possible above and below ground sensor types include: 'SMS' (soil moisture), 'STO' (soil temperature), 'SAL' (salinity), 'TAVG' (daily average air temperature), 'TMIN' (daily minimum air temperature), 'TMAX' (daily maximum air temperature), 'PRCP' (daily precipitation), 'PREC' (daily precipitation), 'SNWD' (snow depth), 'WTEQ' (snow water equivalent),'WDIRV' (wind direction), 'WSPDV' (wind speed), 'LRADT' (solar radiation/langley total).
</p>
<p>This function converts below-ground sensor depth from inches to cm. All temperature values are reported as degrees C. Precipitation, snow depth, and snow water content are reported as <em>inches</em>.
</p>


<h4>SCAN Sensors</h4>

<p>All Soil Climate Analysis Network (SCAN) sensor measurements are reported hourly.</p>

<table>
<tr>
 <td style="text-align: left;">
   Element Measured </td><td style="text-align: left;"> Sensor Type </td><td style="text-align: left;"> Precision </td>
</tr>
<tr>
 <td style="text-align: left;">
   Air Temperature </td><td style="text-align: left;"> Shielded thermistor </td><td style="text-align: left;"> 0.1 degrees C </td>
</tr>
<tr>
 <td style="text-align: left;">
   Barometric Pressure </td><td style="text-align: left;"> Silicon capacitive pressure sensor </td><td style="text-align: left;"> 1% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Precipitation </td><td style="text-align: left;"> Storage-type gage or tipping bucket </td><td style="text-align: left;"> Storage: 0.1 inches; </td>
</tr>
<tr>
 <td style="text-align: left;">
   Relative Humidity </td><td style="text-align: left;"> Thin film capacitance-type sensor </td><td style="text-align: left;"> 1% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Snow Depth </td><td style="text-align: left;"> Sonic sensor (not on all stations) </td><td style="text-align: left;"> 0.5 inches </td>
</tr>
<tr>
 <td style="text-align: left;">
   Snow Water Content </td><td style="text-align: left;"> Snow pillow device and a pressure transducer (not on all stations) </td><td style="text-align: left;"> 0.1 inches </td>
</tr>
<tr>
 <td style="text-align: left;">
   Soil Moisture </td><td style="text-align: left;"> Dielectric constant measuring device. Typical measurements are at 2", 4", 8", 20", and 40" where possible. </td><td style="text-align: left;"> 0.50% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Soil Temperature </td><td style="text-align: left;"> Encapsulated thermistor. Typical measurements are at 2", 4", 8", 20", and 40" where possible. </td><td style="text-align: left;"> 0.1 degrees C </td>
</tr>
<tr>
 <td style="text-align: left;">
   Solar Radiation </td><td style="text-align: left;"> Pyranometer </td><td style="text-align: left;"> 0.01 watts per meter </td>
</tr>
<tr>
 <td style="text-align: left;">
   Wind Speed and Direction </td><td style="text-align: left;"> Propellor-type anemometer </td><td style="text-align: left;"> Speed: 0.1 miles per hour; Direction: 1 degree </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>SNOTEL Sensors</h4>

<p>All Snow Telemetry (SNOTEL) sensor measurements are reported daily.</p>

<table>
<tr>
 <td style="text-align: left;">
   Element Measured </td><td style="text-align: left;"> Sensor Type </td><td style="text-align: left;"> Precision </td>
</tr>
<tr>
 <td style="text-align: left;">
   Air Temperature </td><td style="text-align: left;"> Shielded thermistor </td><td style="text-align: left;"> 0.1 degrees C </td>
</tr>
<tr>
 <td style="text-align: left;">
   Barometric Pressure </td><td style="text-align: left;"> Silicon capacitive pressure sensor </td><td style="text-align: left;"> 1% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Precipitation </td><td style="text-align: left;"> Storage-type gage or tipping bucket </td><td style="text-align: left;"> Storage: 0.1 inches; Tipping bucket: 0.01 inches </td>
</tr>
<tr>
 <td style="text-align: left;">
   Relative Humidity </td><td style="text-align: left;"> Thin film capacitance-type sensor </td><td style="text-align: left;"> 1% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Snow Depth </td><td style="text-align: left;"> Sonic sensor </td><td style="text-align: left;"> 0.5 inches </td>
</tr>
<tr>
 <td style="text-align: left;">
   Snow Water Content </td><td style="text-align: left;"> Snow pillow device and a pressure transducer </td><td style="text-align: left;"> 0.1 inches </td>
</tr>
<tr>
 <td style="text-align: left;">
   Soil Moisture </td><td style="text-align: left;"> Dielectric constant measuring device. Typical measurements are at 2", 4", 8", 20", and 40" where possible. </td><td style="text-align: left;"> 0.50% </td>
</tr>
<tr>
 <td style="text-align: left;">
   Soil Temperature </td><td style="text-align: left;"> Encapsulated thermistor. Typical measurements are at 2", 4", 8", 20", and 40" where possible. </td><td style="text-align: left;"> 0.1 degrees C </td>
</tr>
<tr>
 <td style="text-align: left;">
   Solar Radiation </td><td style="text-align: left;"> Pyranometer </td><td style="text-align: left;"> 0.01 watts per meter </td>
</tr>
<tr>
 <td style="text-align: left;">
   Wind Speed and Direction </td><td style="text-align: left;"> Propellor-type anemometer </td><td style="text-align: left;"> Speed: 0.1 miles per hour; Direction: 1 degree </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>See the <a href="http://ncss-tech.github.io/AQP/soilDB/fetchSCAN-demo.html">fetchSCAN tutorial</a> for additional usage and visualization examples.
</p>



<h3>Value</h3>

<p>a <code>list</code> of <code>data.frame</code> objects, where each element name is a sensor type, plus a <code>metadata</code> table; different <code>report</code> types change the types of sensor data returned. <code>SCAN_sensor_metadata()</code> and <code>SCAN_site_metadata()</code> return a <code>data.frame</code>. <code>NULL</code> on bad request.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G. Brown
</p>


<h3>References</h3>

<p>See the <a href="https://www.nrcs.usda.gov/resources/data-and-reports/soil-climate-analysis-network">Soil Climate Analysis Network</a> home page for more information on the SCAN program,  and links to other associated programs such as SNOTEL, at the National Weather and Climate Center. You can get information on available web services, as well as interactive maps of snow water equivalent, precipitation and streamflow.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
    # get data
    x &lt;- try(fetchSCAN(site.code=c(356, 2072), year=c(2015, 2016)))
    str(x)

    # get sensor metadata
    m &lt;- SCAN_sensor_metadata(site.code=c(356, 2072))

    # get site metadata
    m &lt;- SCAN_site_metadata(site.code=c(356, 2072))

    # get hourly data (396315 records)
    # x &lt;- try(fetchSCAN(site.code=c(356, 2072), year=c(2015, 2016), timeseries = "Hourly"))

## End(Not run)
</code></pre>

<hr>
<h2 id='fetchSDA_spatial'>Get Spatial Data from Soil Data Access by <code>mukey</code>, <code>nationalmusym</code> or <code>areasymbol</code></h2><span id='topic+fetchSDA_spatial'></span>

<h3>Description</h3>

<p>This method facilitates queries to Soil Data Access (SDA) mapunit and survey area geometry. Queries are generated based on map unit key (<code>mukey</code>) and national map unit symbol (<code>nationalmusym</code>) for <code>mupolygon</code> (SSURGO) or <code>gsmmupolygon</code> (STATSGO) geometry OR legend key (<code>lkey</code>) and area symbols (<code>areasymbol</code>) for <code>sapolygon</code> (Soil Survey Area; SSA) geometry).
</p>
<p>A Soil Data Access query returns geometry and key identifying information about the map unit or area of interest. Additional columns from the map unit or legend table can be included; see <code>add.fields</code> argument.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchSDA_spatial(
  x,
  by.col = "mukey",
  method = "feature",
  geom.src = "mupolygon",
  db = "SSURGO",
  add.fields = NULL,
  chunk.size = 10,
  verbose = TRUE,
  as_Spatial = getOption("soilDB.return_Spatial", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchSDA_spatial_+3A_x">x</code></td>
<td>
<p>A vector of map unit keys (<code>mukey</code>) or national map unit symbols (<code>nmusym</code>) for <code>mupolygon</code> geometry OR legend keys (<code>lkey</code>) or soil survey area symbols (<code>areasymbol</code>) for <code>sapolygon</code> geometry. If <code>geom.src="mlrapolygon"</code> then <code>x</code> refers to <code>MLRARSYM</code> (major land resource area symbols).</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_by.col">by.col</code></td>
<td>
<p>Column name containing map unit identifier <code>"mukey"</code>, <code>"nmusym"</code>/<code>"nationalmusym"</code>, or <code>"ecoclassid"</code> for <code>geom.src</code> <code>mupolygon</code> OR <code>"areasymbol"</code>, <code>"areaname"</code>, <code>"mlraoffice"</code>, <code>"mouagncyresp"</code> for <code>geom.src</code> <code>sapolygon</code>; default is determined by <code>is.numeric(x)</code> <code>TRUE</code> for <code>mukey</code> or <code>lkey</code> and <code>nationalmusym</code> or <code>areasymbol</code> otherwise.</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_method">method</code></td>
<td>
<p>geometry result type: <code>"feature"</code> returns polygons, <code>"bbox"</code> returns the bounding box of each polygon (via <code>STEnvelope()</code>), <code>"point"</code> returns a single point (via <code>STPointOnSurface()</code>) within each polygon, <code>"extent"</code> returns an aggregate bounding box (the extent of all polygons, <code>geometry::EnvelopeAggregate()</code>) ), <code>"convexhull"</code> (<code>geometry::ConvexHullAggregate()</code>) returns the aggregate convex hull around all polygons, <code>"union"</code> (<code>geometry::UnionAggregate()</code>) and <code>"collection"</code> (<code>geometry::CollectionAggregate()</code>) return a <code>MULTIPOLYGON</code> or a <code>GEOMETRYCOLLECTION</code>, respectively, for each <code>mukey</code>, <code>nationalmusym</code>, or <code>areasymbol </code>. In the case of the latter four aggregation methods, the groups for aggregation depend on <code>by.col</code> (default by <code>"mukey"</code>).</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_geom.src">geom.src</code></td>
<td>
<p>Either <code>mupolygon</code> (map unit polygons), <code>sapolygon</code> (soil survey area boundary polygons), or <code>mlrapolygon</code> (major land resource area boundary polygons)</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_db">db</code></td>
<td>
<p>Default: <code>"SSURGO"</code>. When <code>geom.src</code> is <code>mupolygon</code>, use STATSGO polygon geometry instead of SSURGO by setting <code>db = "STATSGO"</code></p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_add.fields">add.fields</code></td>
<td>
<p>Column names from <code>mapunit</code> or <code>legend</code> table to add to result. Must specify parent table name as the prefix before column name e.g. <code>mapunit.muname</code>.</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_chunk.size">chunk.size</code></td>
<td>
<p>Number of values of <code>x</code> to process per query. Necessary for large results. Default: <code>10</code></p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_verbose">verbose</code></td>
<td>
<p>Print messages?</p>
</td></tr>
<tr><td><code id="fetchSDA_spatial_+3A_as_spatial">as_Spatial</code></td>
<td>
<p>Return sp classes? e.g. <code>Spatial*DataFrame</code>. Default: <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function automatically &quot;chunks&quot; the input vector (using <code>makeChunks()</code>) of map unit identifiers to minimize the likelihood of exceeding the SDA data request size. The number of chunks varies with the <code>chunk.size</code> setting and the length of your input vector. If you are working with many map units and/or large extents, you may need to decrease this number in order to have more chunks.
</p>
<p>Querying regions with complex mapping may require smaller <code>chunk.size</code>. Numerically adjacent IDs in the input vector may share common qualities (say, all from same soil survey area or region) which could cause specific chunks to perform &quot;poorly&quot; (slow or error) no matter what the chunk size is. Shuffling the order of the inputs using <code>sample()</code> may help to eliminate problems related to this, depending on how you obtained your set of MUKEY/nationalmusym to query. One could feasibly use <code>muacres</code> as a heuristic to adjust for total acreage within chunks.
</p>
<p>Note that STATSGO data are fetched where <code>CLIPAREASYMBOL = 'US'</code> to avoid duplicating state and national subsets of the geometry.
</p>
<p>A prototype interface, <code>geom.src="mlrapolygon"</code>, is provided for obtaining Major Land Resource Area (MLRA) polygon
boundaries. When using this geometry source <code>x</code> is a vector of <code>MLRARSYM</code> (MLRA Symbols). The geometry source is
the MLRA Geographic Database v5.2 (2022) which is not (yet) part of Soil Data Access. Instead of SDA, GDAL utilities
are used to read a zipped ESRI Shapefile from a remote URL: <a href="https://www.nrcs.usda.gov/sites/default/files/2022-10/MLRA_52_2022.zip">https://www.nrcs.usda.gov/sites/default/files/2022-10/MLRA_52_2022.zip</a>.
Therefore, most additional <code>fetchSDA_spatial()</code> arguments are <em>not</em> currently supported for the MLRA geometry source.
In the future a <code>mlrapolygon</code> table may be added to SDA (analogous to  <code>mupolygon</code> and <code>sapolygon</code>),
and the function will be updated accordingly at that time.
</p>


<h3>Value</h3>

<p>an <code>sf</code> data.frame corresponding to SDA spatial data for all symbols requested. If <code>as_Spatial=TRUE</code> returns a <code>Spatial*DataFrame</code> from the sp package via <code>sf::as_Spatial()</code> for backward compatibility. Default result contains geometry with attribute table containing unique feature ID, symbol and area symbol plus additional fields in result specified with <code>add.fields</code>.
</p>


<h3>Author(s)</h3>

<p>Andrew G. Brown, Dylan E. Beaudette
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

 
    # get spatial data for a single mukey
    single.mukey &lt;- try(fetchSDA_spatial(x = "2924882"))

    # demonstrate fetching full extent (multi-mukey) of national musym
    full.extent.nmusym &lt;- try(fetchSDA_spatial(x = "2x8l5", by = "nmusym"))

    # compare extent of nmusym to single mukey within it
    if (!inherits(single.mukey, 'try-error') &amp;&amp; 
        !inherits(full.extent.nmusym, 'try-error')) {
        
        if (requireNamespace("sf")) {
      
         plot(sf::st_geometry(full.extent.nmusym), col = "RED", border = 0)
         plot(sf::st_geometry(single.mukey), add = TRUE, col = "BLUE", border = 0)
       
        }
        
    }

    # demo adding a field (`muname`) to attribute table of result
    head(try(fetchSDA_spatial(x = "2x8l5", by="nmusym", add.fields="muname")))


</code></pre>

<hr>
<h2 id='fetchSoilGrids'>Get SoilGrids 2.0 Property Estimates for Points or Spatial Extent</h2><span id='topic+fetchSoilGrids'></span>

<h3>Description</h3>

<p>This function obtains <a href="https://soilgrids.org">SoilGrids 2.0</a> properties information (250m raster resolution) given a <code>data.frame</code> containing site IDs, latitudes and longitudes, or a spatial extent.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchSoilGrids(
  x,
  loc.names = c("id", "lat", "lon"),
  depth_intervals = c("0-5", "5-15", "15-30", "30-60", "60-100", "100-200"),
  variables = c("bdod", "cec", "cfvo", "clay", "nitrogen", "phh2o", "sand", "silt",
    "soc", "ocd", "wv0010", "wv0033", "wv1500"),
  grid = FALSE,
  filename = NULL,
  overwrite = TRUE,
  target_resolution = c(250, 250),
  summary_type = c("Q0.05", "Q0.5", "Q0.95", "mean"),
  ...,
  verbose = FALSE,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchSoilGrids_+3A_x">x</code></td>
<td>
<p>A <code>data.frame</code> containing 3 columns referring to site ID, latitude and longitude. Or a spatial (sf, terra) object for which a bounding box can be calculated when <code>grid=TRUE</code>.</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_loc.names">loc.names</code></td>
<td>
<p>Optional: Column names referring to site ID, latitude and longitude. Default: <code>c("id", "lat", "lon")</code></p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_depth_intervals">depth_intervals</code></td>
<td>
<p>Default: <code>"0-5"</code>, <code>"5-15"</code>, <code>"15-30"</code>, <code>"30-60"</code>, <code>"60-100"</code>, <code>"100-200"</code></p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_variables">variables</code></td>
<td>
<p>Default: <code>"bdod"</code>, <code>"cec"</code>, <code>"cfvo"</code>, <code>"clay"</code>, <code>"nitrogen"</code>, <code>"phh2o"</code>, <code>"sand"</code>, <code>"silt"</code>, <code>"soc"</code>, <code>"ocd"</code>, <code>"wv0010"</code>, <code>"wv0033"</code>, <code>"wv1500"</code>. Optionally <code>"ocs"</code> (only for 0 to 30 cm interval).</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_grid">grid</code></td>
<td>
<p>Download subset of SoilGrids Cloud Optimized GeoTIFF? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_filename">filename</code></td>
<td>
<p>Only used when <code>grid=TRUE</code>. If <code>NULL</code> defaults to an in-memory raster, or temporary file if result does not fit in memory.</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_overwrite">overwrite</code></td>
<td>
<p>Only used when <code>grid=TRUE</code>. Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_target_resolution">target_resolution</code></td>
<td>
<p>Only used when <code>grid=TRUE</code>. Default: <code>c(250, 250)</code> (250m x 250m pixels)</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_summary_type">summary_type</code></td>
<td>
<p>Only used when <code>grid=TRUE</code>. One or more of <code>"Q0.05"</code>, <code>"Q0.5"</code>, <code>"Q0.95"</code>, <code>"mean"</code>; these are summary statistics that
correspond to 5th, 50th, 95th percentiles, and mean value for selected <code>variables</code>.</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to <code>terra::writeRaster()</code> when <code>grid=TRUE</code>.</p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_verbose">verbose</code></td>
<td>
<p>Print messages? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="fetchSoilGrids_+3A_progress">progress</code></td>
<td>
<p>logical, give progress when iterating over multiple requests; Default: <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>SoilGrids API and maps return values as whole (integer) numbers to minimize the storage space used. These values are converted by to produce conventional units by 'fetchSoilGrids()&ldquo;
</p>


<h4>Properties</h4>


<table>
<tr>
 <td style="text-align: left;">
   Name </td><td style="text-align: left;"> Description </td><td style="text-align: left;"> Mapped units </td><td style="text-align: right;"> Conversion factor </td><td style="text-align: left;"> Conventional units </td>
</tr>
<tr>
 <td style="text-align: left;">
   bdod </td><td style="text-align: left;"> Bulk density of the fine earth fraction </td><td style="text-align: left;"> cg/cm^3 </td><td style="text-align: right;"> 100 </td><td style="text-align: left;"> kg/dm^3 </td>
</tr>
<tr>
 <td style="text-align: left;">
   cec </td><td style="text-align: left;"> Cation Exchange Capacity of the soil </td><td style="text-align: left;"> mmol(c)/kg </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> cmol(c)/kg </td>
</tr>
<tr>
 <td style="text-align: left;">
   cfvo </td><td style="text-align: left;"> Volumetric fraction of coarse fragments (&gt; 2 mm) </td><td style="text-align: left;"> cm^3/dm^3 (vol per mil) </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> cm^3/100cm^3 (vol%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   clay </td><td style="text-align: left;"> Proportion of clay particles (&lt; 0.002 mm) in the fine earth fraction </td><td style="text-align: left;"> g/kg </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> g/100g (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   nitrogen </td><td style="text-align: left;"> Total nitrogen (N) </td><td style="text-align: left;"> cg/kg </td><td style="text-align: right;"> 100 </td><td style="text-align: left;"> g/kg </td>
</tr>
<tr>
 <td style="text-align: left;">
   phh2o </td><td style="text-align: left;"> Soil pH </td><td style="text-align: left;"> pH*10 </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> pH </td>
</tr>
<tr>
 <td style="text-align: left;">
   sand </td><td style="text-align: left;"> Proportion of sand particles (&gt; 0.05 mm) in the fine earth fraction </td><td style="text-align: left;"> g/kg </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> g/100g (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   silt </td><td style="text-align: left;"> Proportion of silt particles (= 0.002 mm and = 0.05 mm) in the fine earth fraction </td><td style="text-align: left;"> g/kg </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> g/100g (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   soc </td><td style="text-align: left;"> Soil organic carbon content in the fine earth fraction </td><td style="text-align: left;"> dg/kg </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> g/kg </td>
</tr>
<tr>
 <td style="text-align: left;">
   ocd </td><td style="text-align: left;"> Organic carbon density </td><td style="text-align: left;"> hg/m^3 </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> kg/m^3 </td>
</tr>
<tr>
 <td style="text-align: left;">
   ocs </td><td style="text-align: left;"> Organic carbon stocks (0-30cm depth interval only) </td><td style="text-align: left;"> t/ha </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> kg/m^2 </td>
</tr>
<tr>
 <td style="text-align: left;">
   wv0010 </td><td style="text-align: left;"> Volumetric Water Content at 10kPa </td><td style="text-align: left;"> 0.1 v% or 1 mm/m </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> volume (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   wv0033 </td><td style="text-align: left;"> Volumetric Water Content at 33kPa </td><td style="text-align: left;"> 0.1 v% or 1 mm/m </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> volume (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
   wv1500 </td><td style="text-align: left;"> Volumetric Water Content at 1500kPa </td><td style="text-align: left;"> 0.1 v% or 1 mm/m </td><td style="text-align: right;"> 10 </td><td style="text-align: left;"> volume (%) </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>SoilGrids predictions are made for the six standard depth intervals specified in the GlobalSoilMap IUSS working group and its specifications. The default depth
intervals returned are (in centimeters): <code>"0-5"</code>, <code>"5-15"</code>, <code>"15-30"</code>, <code>"30-60"</code>, <code>"60-100"</code>, <code>"100-200"</code> for the properties <code>"bdod"</code>, <code>"cec"</code>, <code>"cfvo"</code>,
<code>"clay"</code>, <code>"nitrogen"</code>, <code>"phh2o"</code>, <code>"sand"</code>, <code>"silt"</code>, <code>"soc"</code>, <code>"ocd"</code>, <code>"wv0010"</code>, <code>"wv0033"</code>, <code>"wv1500"</code>&ndash;each with 5th, 50th, 95th, mean and uncertainty values. Soil organic carbon stocks (0-30cm) (<code>variables="ocs"</code>) are returned only for <code>depth_intervals="0-30"</code>. The uncertainty values are the ratio
between the inter-quantile range (90% prediction interval width) and the median : <code>(Q0.95-Q0.05)/Q0.50.</code> All values are converted from &quot;mapped&quot; to &quot;conventional&quot;
based on above table conversion factors. Point data requests are made through <code>"properties/query"</code> endpoint of the <a href="https://www.isric.org/explore/soilgrids/faq-soilgrids">SoilGrids v2.0 REST API</a>.
Please check ISRIC's data policy, disclaimer and citation: <a href="https://www.isric.org/about/data-policy">https://www.isric.org/about/data-policy</a>.
</p>
<p>Find out more information about the SoilGrids and GlobalSoilMap products here:
</p>

<ul>
<li> <p><a href="https://www.isric.org/explore/soilgrids/faq-soilgrids">https://www.isric.org/explore/soilgrids/faq-soilgrids</a>
</p>
</li>
<li> <p><a href="https://www.isric.org/sites/default/files/GlobalSoilMap_specifications_december_2015_2.pdf">https://www.isric.org/sites/default/files/GlobalSoilMap_specifications_december_2015_2.pdf</a>
</p>
</li></ul>




<h3>Value</h3>

<p>A SoilProfileCollection or SpatRaster when <code>grid=TRUE</code>
</p>


<h3>Author(s)</h3>

<p>Andrew G. Brown
</p>


<h3>References</h3>


<ul>
<li> <p><strong>Common soil chemical and physical properties:</strong>
Poggio, L., de Sousa, L. M., Batjes, N. H., Heuvelink, G. B. M., Kempen, B., Ribeiro, E., and Rossiter, D.: SoilGrids 2.0: producing soil information for the globe with quantified spatial uncertainty, SOIL, 7, 217–240, 2021. DOI: <a href="https://doi.org/10.5194/soil-7-217-2021">doi:10.5194/soil-7-217-2021</a>
</p>
</li>
<li> <p><strong>Soil water content at different pressure heads:</strong>
Turek, M.E.,  Poggio, L., Batjes, N. H., Armindo, R. A.,  de Jong van Lier, Q.,  de Sousa, L.M.,  Heuvelink, G. B. M. : Global mapping of volumetric water retention at 100, 330 and 15000 cm suction using the WoSIS database, International Soil and Water Conservation Research, 11-2, 225-239, 2023. DOI: <a href="https://doi.org/10.1016/j.iswcr.2022.08.001">doi:10.1016/j.iswcr.2022.08.001</a>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
  library(aqp)
  
  your.points &lt;- data.frame(id  = c("A", "B"), 
                           lat = c(37.9, 38.1), 
                           lon = c(-120.3, -121.5), 
                           stringsAsFactors = FALSE)
  x &lt;- try(fetchSoilGrids(your.points))
 
  if (!inherits(x, 'try-error'))
   aqp::plotSPC(x, name = NA, color = "socQ50")
 
  # organic carbon stocks use 0-30cm interval
  y &lt;- try(fetchSoilGrids(your.points[1, ], 
                          depth_interval = c("0-5", "0-30", "5-15", "15-30"),
                          variables = c("soc", "bdod", "ocd", "ocs")))
                          
  # extract horizons from a SoilProfileCollection where horizon 2 overlaps 1, 3, and 4
  h &lt;- aqp::horizons(y)
  
  # "ocs" (organic carbon stock 0-30cm interval)
  h[2, ]
  
  h$thickness_meters &lt;- ((h$hzdepb - h$hzdept) / 100)

  # estimate "ocs" from modeled organic carbon and bulk density in 0-5, 5-15, 15-30 intervals
  #  (sum the product of soc, bdod, and thickness in meters)
  #  (1 gram per cubic decimeter = 1 kilogram per cubic meter)
  sum(h$socmean * h$bdodmean * h$thickness_meters, na.rm = TRUE)
  
  # estimate "ocs" from modeled organic carbon density in 0-5, 5-15, 15-30 intervals
  #  (sum the product of "ocd" and thickness in meters)
  sum(h$ocdmean * h$thickness_meters, na.rm = TRUE)
 

## End(Not run)

</code></pre>

<hr>
<h2 id='fetchSRI'>Fetch Soil Inventory Resource (SRI) for USFS Region 6</h2><span id='topic+fetchSRI'></span>

<h3>Description</h3>

<p>This is a higher level wrapper around the <a href="#topic+get_SRI">get_SRI</a> and <a href="#topic+get_SRI_layers">get_SRI_layers</a>
functions. This function can fetch multiple File Geodatabases (GDB) and returns all the layers within the GDB.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchSRI(gdb, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchSRI_+3A_gdb">gdb</code></td>
<td>
<p>A <code>character</code> vector of the GDB(s), e.g. <code>'Deschutes'</code>.</p>
</td></tr>
<tr><td><code id="fetchSRI_+3A_...">...</code></td>
<td>
<p>Arguments to pass to <a href="#topic+get_SRI">get_SRI</a>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list.
</p>


<h3>Author(s)</h3>

<p>Josh Erickson
</p>


<h3>See Also</h3>

<p><code>get_SRI()</code> <code>get_SRI_layers()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# fetch Willamette and Winema SRI

sri &lt;- fetchSRI(gdb = c('will', 'win'), quiet = TRUE)


## End(Not run)
</code></pre>

<hr>
<h2 id='fetchVegdata'>Get vegetation plot data from local NASIS database</h2><span id='topic+fetchVegdata'></span><span id='topic+get_vegplot_from_NASIS_db'></span><span id='topic+get_vegplot_location_from_NASIS_db'></span><span id='topic+get_vegplot_species_from_NASIS_db'></span><span id='topic+get_vegplot_textnote_from_NASIS_db'></span><span id='topic+get_vegplot_transect_from_NASIS_db'></span><span id='topic+get_vegplot_transpecies_from_NASIS_db'></span><span id='topic+get_vegplot_tree_si_details_from_NASIS_db'></span><span id='topic+get_vegplot_tree_si_summary_from_NASIS_db'></span><span id='topic+get_vegplot_trhi_from_NASIS_db'></span><span id='topic+get_vegplot_transpoints_from_NASIS_db'></span><span id='topic+get_vegplot_prodquadrats_from_NASIS_db'></span><span id='topic+get_vegplot_speciesbasalarea_from_NASIS'></span>

<h3>Description</h3>

<p>Get vegetation plot data from local NASIS database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetchVegdata(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)

get_vegplot_from_NASIS_db(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)

get_vegplot_location_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_trhi_from_NASIS_db(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)

get_vegplot_species_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_transect_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_transpecies_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_transpoints_from_NASIS_db(SS = TRUE, dsn = NULL)

get_vegplot_prodquadrats_from_NASIS_db(SS = TRUE, dsn = NULL)

get_vegplot_tree_si_summary_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_speciesbasalarea_from_NASIS(SS = TRUE, dsn = NULL)

get_vegplot_tree_si_details_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_vegplot_textnote_from_NASIS_db(
  SS = TRUE,
  fixLineEndings = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="fetchVegdata_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="fetchVegdata_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="fetchVegdata_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
<tr><td><code id="fetchVegdata_+3A_fixlineendings">fixLineEndings</code></td>
<td>
<p>Replace <code>'\r\n'</code> with <code>'\n'</code>; Default: <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A named list containing: &quot;vegplot&quot;, &quot;vegplotlocation&quot;, &quot;vegplotrhi&quot;, &quot;vegplotspecies&quot;, &quot;vegtransect&quot;, &quot;vegtransplantsum&quot;, 'vegsiteindexsum', &quot;vegsiteindexdet&quot;, and  &quot;vegplottext&quot; tables
</p>

<hr>
<h2 id='filter_geochem'>Filter KSSL Geochemical Table</h2><span id='topic+filter_geochem'></span>

<h3>Description</h3>

<p>A function to subset KSSL &quot;geochem&quot; / elemental analysis result table to obtain rows/columns based on: column name, preparation code, major / trace element method.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter_geochem(
  geochem,
  columns = NULL,
  prep_code = NULL,
  major_element_method = NULL,
  trace_element_method = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="filter_geochem_+3A_geochem">geochem</code></td>
<td>
<p>geochemical data, as returned by fetchKSSL</p>
</td></tr>
<tr><td><code id="filter_geochem_+3A_columns">columns</code></td>
<td>
<p>Column name(s) to include in result</p>
</td></tr>
<tr><td><code id="filter_geochem_+3A_prep_code">prep_code</code></td>
<td>
<p>Character vector of prep code(s) to include in result.</p>
</td></tr>
<tr><td><code id="filter_geochem_+3A_major_element_method">major_element_method</code></td>
<td>
<p>Character vector of major element method(s) to include in result.</p>
</td></tr>
<tr><td><code id="filter_geochem_+3A_trace_element_method">trace_element_method</code></td>
<td>
<p>Character vector of trace element method(s) to include in result.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame, subset according to the constraints specified in arguments.
</p>


<h3>Author(s)</h3>

<p>Andrew G. Brown.
</p>

<hr>
<h2 id='format_SQL_in_statement'>Format vector of values into a string suitable for an SQL <code>IN</code> statement.</h2><span id='topic+format_SQL_in_statement'></span>

<h3>Description</h3>

<p>Concatenate a vector to SQL <code>IN</code>-compatible syntax: <code>letters[1:3]</code> becomes <code>('a','b','c')</code>. Values in <code>x</code> are first passed through <code>unique()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>format_SQL_in_statement(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format_SQL_in_statement_+3A_x">x</code></td>
<td>
<p>A character vector.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector (unit length) containing concatenated group syntax for use in SQL <code>IN</code>, with unique value found in <code>x</code>.
</p>


<h3>Note</h3>

<p>Only <code>character</code> output is supported.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>format_SQL_in_statement(c(2648889L, 2648890L))
</code></pre>

<hr>
<h2 id='get_colors_from_NASIS_db'>Get Soil Color Data from a local NASIS Database</h2><span id='topic+get_colors_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get, format, mix, and return color data from a NASIS database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_colors_from_NASIS_db(SS = TRUE, mixColors = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_colors_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from Selected Set in NASIS or from the entire local
database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_colors_from_NASIS_db_+3A_mixcolors">mixColors</code></td>
<td>
<p>should mixed colors be calculated (Default: <code>TRUE</code>) where multiple colors are populated for the same moisture state in a horizon? <code>FALSE</code> takes the dominant color based on <code>colorpct</code> or first record based on horizon ID (<code>phiid</code>) sorting for &quot;moist&quot; and &quot;dry&quot; state. Pedon Horizon Color records without a moisture state populated are ignored.</p>
</td></tr>
<tr><td><code id="get_colors_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the results.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+simplifyColorData">simplifyColorData</a></code>,
<code><a href="#topic+get_hz_data_from_NASIS_db">get_hz_data_from_NASIS_db</a></code>,
<code><a href="#topic+get_site_data_from_NASIS_db">get_site_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='get_colors_from_pedon_db'>Get Soil Color Data from a PedonPC Database</h2><span id='topic+get_colors_from_pedon_db'></span>

<h3>Description</h3>

<p>Get, format, mix, and return color data from a PedonPC database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_colors_from_pedon_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_colors_from_pedon_db_+3A_dsn">dsn</code></td>
<td>
<p>The path to a 'pedon.mdb' database.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with the results.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette and Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>,
<code><a href="#topic+get_site_data_from_pedon_db">get_site_data_from_pedon_db</a></code>
</p>

<hr>
<h2 id='get_comonth_from_NASIS_db'>Get component month data from a local NASIS Database</h2><span id='topic+get_comonth_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get component month data from a local NASIS Database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_comonth_from_NASIS_db(
  SS = TRUE,
  fill = FALSE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_comonth_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>get data from the currently loaded Selected Set in NASIS or from
the entire local database (default: TRUE)</p>
</td></tr>
<tr><td><code id="get_comonth_from_NASIS_db_+3A_fill">fill</code></td>
<td>
<p>should missing &quot;month&quot; rows in the comonth table be filled with
NA (FALSE)</p>
</td></tr>
<tr><td><code id="get_comonth_from_NASIS_db_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_comonth_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the results.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchNASIS">fetchNASIS</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
  # query text note data
  cm &lt;- try(get_comonth_from_NASIS_db())

  # show structure of component month data
  str(cm)
}


</code></pre>

<hr>
<h2 id='get_component_data_from_NASIS_db'>Get component data from a local NASIS Database</h2><span id='topic+get_component_data_from_NASIS_db'></span><span id='topic+get_component_diaghz_from_NASIS_db'></span><span id='topic+get_component_restrictions_from_NASIS_db'></span><span id='topic+get_component_correlation_data_from_NASIS_db'></span><span id='topic+get_component_cogeomorph_data_from_NASIS_db'></span><span id='topic+get_component_cogeomorph_data_from_NASIS_db2'></span><span id='topic+get_component_copm_data_from_NASIS_db'></span><span id='topic+get_component_esd_data_from_NASIS_db'></span><span id='topic+get_component_otherveg_data_from_NASIS_db'></span><span id='topic+get_copedon_from_NASIS_db'></span><span id='topic+get_component_horizon_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get component data from a local NASIS Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_component_data_from_NASIS_db(
  SS = TRUE,
  nullFragsAreZero = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_component_diaghz_from_NASIS_db(SS = TRUE, dsn = NULL)

get_component_restrictions_from_NASIS_db(SS = TRUE, dsn = NULL)

get_component_correlation_data_from_NASIS_db(
  SS = TRUE,
  dropAdditional = TRUE,
  dropNotRepresentative = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_component_cogeomorph_data_from_NASIS_db(SS = TRUE, dsn = NULL)

get_component_cogeomorph_data_from_NASIS_db2(SS = TRUE, dsn = NULL)

get_component_copm_data_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_component_esd_data_from_NASIS_db(
  SS = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)

get_component_otherveg_data_from_NASIS_db(SS = TRUE, dsn = NULL)

get_copedon_from_NASIS_db(SS = TRUE, dsn = NULL)

get_component_horizon_data_from_NASIS_db(
  SS = TRUE,
  fill = FALSE,
  dsn = NULL,
  nullFragsAreZero = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should surface fragment cover percentages of NULL be interpreted as 0? (default: TRUE)</p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_dropadditional">dropAdditional</code></td>
<td>
<p>Remove map units with &quot;additional&quot; status? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_dropnotrepresentative">dropNotRepresentative</code></td>
<td>
<p>Remove non-representative data map units? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_component_data_from_NASIS_db_+3A_fill">fill</code></td>
<td>
<p>Return a single minimal (NA-filled) horizon for components with no horizon records? Default <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code>
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette, Stephen Roecker, and Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchNASIS">fetchNASIS</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
 # query text note data
 fc &lt;- try(get_component_data_from_NASIS_db())

 # show structure of component data returned
 str(fc)
}


</code></pre>

<hr>
<h2 id='get_component_from_GDB'>Get a SoilProfileCollection from a SSURGO file geodatabase</h2><span id='topic+get_component_from_GDB'></span><span id='topic+get_legend_from_GDB'></span><span id='topic+get_mapunit_from_GDB'></span><span id='topic+fetchGDB'></span>

<h3>Description</h3>

<p>Functions to load and flatten commonly used tables and from SSURGO file
geodatabases, and create soil profile collection objects (SPC).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_component_from_GDB(
  dsn = "gNATSGO_CONUS.gdb",
  WHERE = NULL,
  childs = FALSE,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_legend_from_GDB(
  dsn = "gNATSGO_CONUS.gdb",
  WHERE = NULL,
  droplevels = TRUE,
  stringsAsFactors = NULL,
  stats = FALSE
)

get_mapunit_from_GDB(
  dsn = "gNATSGO_CONUS.gdb",
  WHERE = NULL,
  droplevels = TRUE,
  stringsAsFactors = NULL,
  stats = FALSE
)

fetchGDB(
  dsn = "gNATSGO_CONUS.gdb",
  WHERE = NULL,
  childs = FALSE,
  droplevels = TRUE,
  stringsAsFactors = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_component_from_GDB_+3A_dsn">dsn</code></td>
<td>
<p>data source name (interpretation varies by driver - for some
drivers, dsn is a file name, but may also be a folder, or contain the name
and access credentials of a database); in case of GeoJSON, dsn may be the
character string holding the geojson data. It can also be an open database
connection.</p>
</td></tr>
<tr><td><code id="get_component_from_GDB_+3A_where">WHERE</code></td>
<td>
<p>text string formatted as an SQL WHERE clause (default: FALSE)</p>
</td></tr>
<tr><td><code id="get_component_from_GDB_+3A_childs">childs</code></td>
<td>
<p>logical; if FALSE parent material and geomorphic child tables
are not flattened and appended</p>
</td></tr>
<tr><td><code id="get_component_from_GDB_+3A_droplevels">droplevels</code></td>
<td>
<p>logical: indicating whether to drop unused levels in
classifying factors. This is useful when a class has large number of unused
classes, which can waste space in tables and figures.</p>
</td></tr>
<tr><td><code id="get_component_from_GDB_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_component_from_GDB_+3A_stats">stats</code></td>
<td>
<p>Return statistics (number of mapunit keys per legend; number of components, major components per mapunit, total and hydric component percentage)? Default: <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions return data from SSURGO file geodatabases with the use of a
simple text string that formatted as an SQL WHERE clause (e.g. <code>WHERE =
"areasymbol = 'IN001'"</code>. Any columns within the target table can be
specified (except for fetchGDB() which currently can only target one table
(e.g. legend, mapunit or component) at a time with the WHERE clause).
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> or <code>SoilProfileCollection</code> object.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


## replace `dsn` with path to your own geodatabase (SSURGO OR gNATSGO)
##
##
##  download CONUS gNATSGO from here:
##    https://nrcs.app.box.com/v/soils/folder/191790828371
##
# dsn &lt;- "D:/geodata/soils/gNATSGO_CONUS.gdb"

# le &lt;- get_legend_from_GDB(dsn = dsn, WHERE = "areasymbol LIKE '%'")

# mu &lt;- get_mapunit_from_GDB(dsn = dsn, WHERE = "muname LIKE 'Miami%'")

# co &lt;- get_component_from_GDB(dsn, WHERE = "compname = 'Miami'
#                              AND majcompflag = 'Yes'", childs = FALSE)

# f_in_GDB &lt;- fetchGDB(WHERE = "areasymbol LIKE 'IN%'")



</code></pre>

<hr>
<h2 id='get_component_from_SDA'>Get SSURGO/STATSGO2 Mapunit Data from Soil Data Access</h2><span id='topic+get_component_from_SDA'></span><span id='topic+get_cointerp_from_SDA'></span><span id='topic+get_legend_from_SDA'></span><span id='topic+get_lmuaoverlap_from_SDA'></span><span id='topic+get_mapunit_from_SDA'></span><span id='topic+get_chorizon_from_SDA'></span><span id='topic+fetchSDA'></span><span id='topic+get_cosoilmoist_from_SDA'></span>

<h3>Description</h3>

<p>Functions to download and flatten commonly used tables and from Soil Data
Access, and create soil profile collection objects (SPC).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_component_from_SDA(
  WHERE = NULL,
  duplicates = FALSE,
  childs = TRUE,
  droplevels = TRUE,
  nullFragsAreZero = TRUE,
  stringsAsFactors = NULL
)

get_cointerp_from_SDA(
  WHERE = NULL,
  mrulename = NULL,
  duplicates = FALSE,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_legend_from_SDA(WHERE = NULL, droplevels = TRUE, stringsAsFactors = NULL)

get_lmuaoverlap_from_SDA(
  WHERE = NULL,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_mapunit_from_SDA(WHERE = NULL, droplevels = TRUE, stringsAsFactors = NULL)

get_chorizon_from_SDA(
  WHERE = NULL,
  duplicates = FALSE,
  childs = TRUE,
  nullFragsAreZero = TRUE,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

fetchSDA(
  WHERE = NULL,
  duplicates = FALSE,
  childs = TRUE,
  nullFragsAreZero = TRUE,
  rmHzErrors = FALSE,
  droplevels = TRUE,
  stringsAsFactors = NULL
)

get_cosoilmoist_from_SDA(
  WHERE = NULL,
  duplicates = FALSE,
  impute = TRUE,
  stringsAsFactors = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_component_from_SDA_+3A_where">WHERE</code></td>
<td>
<p>text string formatted as an SQL WHERE clause (default: FALSE)</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_duplicates">duplicates</code></td>
<td>
<p>logical; if TRUE a record is returned for each unique
mukey (may be many per nationalmusym)</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_childs">childs</code></td>
<td>
<p>logical; if FALSE parent material and geomorphic child tables
are not flattened and appended</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_droplevels">droplevels</code></td>
<td>
<p>logical: indicating whether to drop unused levels in
classifying factors. This is useful when a class has large number of unused
classes, which can waste space in tables and figures.</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should fragment volumes of NULL be interpreted as 0?
(default: TRUE), see details</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_mrulename">mrulename</code></td>
<td>
<p>character. Interpretation rule names</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_rmhzerrors">rmHzErrors</code></td>
<td>
<p>should pedons with horizonation errors be removed from the
results? (default: FALSE)</p>
</td></tr>
<tr><td><code id="get_component_from_SDA_+3A_impute">impute</code></td>
<td>
<p>replace missing (i.e. <code>NULL</code>) values with <code>"Not_Populated"</code> for categorical data, or the &quot;RV&quot; for numeric data or <code>201</code> cm if the &quot;RV&quot; is also<code>NULL</code> (default: <code>TRUE</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions return data from Soil Data Access with the use of a simple
text string that formatted as an SQL WHERE clause (e.g. <code>WHERE =
"areasymbol = 'IN001'"</code>. All functions are SQL queries that wrap around
<code>SDAquery()</code> and format the data for analysis.
</p>
<p>Beware SDA includes the data for both SSURGO and STATSGO2. The
<code>areasymbol</code> for STATSGO2 is <code>US</code>. For just SSURGO, include
<code>WHERE = "areareasymbol != 'US'"</code>.
</p>
<p>If the duplicates argument is set to TRUE, duplicate components are
returned. This is not necessary with data returned from NASIS, which has one
unique national map unit. SDA has duplicate map national map units, one for
each legend it exists in.
</p>
<p>The value of <code>nullFragsAreZero</code> will have a significant impact on the
rock fragment fractions returned by <code>fetchSDA</code>. Set
<code>nullFragsAreZero = FALSE</code> in those cases where there are many
data-gaps and NULL rock fragment values should be interpreted as NULLs. Set
<code>nullFragsAreZero = TRUE</code> in those cases where NULL rock fragment
values should be interpreted as 0.
</p>
<p>Additional examples can be found in the <a href="http://ncss-tech.github.io/AQP/soilDB/SDA-tutorial.html">Soil Data Access (SDA) Tutorial</a>
</p>


<h3>Value</h3>

<p>A data.frame or SoilProfileCollection object.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>


<h3>See Also</h3>

<p><a href="#topic+SDA_query">SDA_query</a>
</p>

<hr>
<h2 id='get_cosoilmoist_from_NASIS'>Get the Component Soil Moisture Tables</h2><span id='topic+get_cosoilmoist_from_NASIS'></span>

<h3>Description</h3>

<p>Read and flatten the component soil moisture month tables from a local NASIS
Database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_cosoilmoist_from_NASIS(
  SS = TRUE,
  impute = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_cosoilmoist_from_NASIS_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_cosoilmoist_from_NASIS_+3A_impute">impute</code></td>
<td>
<p>replace missing (i.e. <code>NULL</code>) values with <code>"Not_Populated"</code> for
categorical data, or the &quot;RV&quot; for numeric data or <code>201</code> cm if the &quot;RV&quot; is also
<code>NULL</code> (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_cosoilmoist_from_NASIS_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_cosoilmoist_from_NASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The component soil moisture tables within NASIS house monthly data on
flooding, ponding, and soil moisture status. The soil moisture status is
used to specify the water table depth for components (e.g. <code>status ==
"Moist"</code>).
</p>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Author(s)</h3>

<p>S.M. Roecker
</p>


<h3>See Also</h3>

<p><a href="#topic+fetchNASIS">fetchNASIS</a>, <a href="#topic+get_cosoilmoist_from_NASISWebReport">get_cosoilmoist_from_NASISWebReport</a>,
<a href="#topic+get_cosoilmoist_from_SDA">get_cosoilmoist_from_SDA</a>, <code>get_comonth_from_SDA</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
 # load cosoilmoist (e.g. water table data)
 test &lt;- try(get_cosoilmoist_from_NASIS())

 # inspect
 if(!inherits(test, 'try-error')) {
   head(test)
 }
}

</code></pre>

<hr>
<h2 id='get_ecosite_history_from_NASIS_db'>Get Site Ecological Site History</h2><span id='topic+get_ecosite_history_from_NASIS_db'></span>

<h3>Description</h3>

<p>Gets the Site Ecological Site History data from local NASIS database. Used by <code><a href="#topic+get_extended_data_from_NASIS_db">get_extended_data_from_NASIS_db()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ecosite_history_from_NASIS_db(best = TRUE, SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ecosite_history_from_NASIS_db_+3A_best">best</code></td>
<td>
<p>Should the &quot;best&quot; ecological site correlation be chosen? Creates field called <code>es_selection_method</code> with <code>"most recent"</code> or <code>"least missing data"</code> for resolving many:1 relationships in site history.</p>
</td></tr>
<tr><td><code id="get_ecosite_history_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>Use selected set? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_ecosite_history_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Path to SQLite data source, or a <code>DBIConnection</code> to database with NASIS schema.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code>, or <code>NULL</code> on error
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_extended_data_from_NASIS_db">get_extended_data_from_NASIS_db()</a></code>
</p>

<hr>
<h2 id='get_EDIT_ecoclass_by_geoUnit'>Get Ecological Dynamics Information Tool (EDIT) ecological sites by catalog (ESD/ESG) and MLRA</h2><span id='topic+get_EDIT_ecoclass_by_geoUnit'></span>

<h3>Description</h3>

<p>Data are accessed via Ecological Dynamics Interpretive Tool (EDIT) web services: https://edit.jornada.nmsu.edu/resources/esd. <code>geoUnit</code> refers to MLRA codes, possibly with a leading zero and trailing &quot;X&quot; for two digit MLRA symbols.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_EDIT_ecoclass_by_geoUnit(geoUnit, catalog = c("esd", "esg"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_EDIT_ecoclass_by_geoUnit_+3A_geounit">geoUnit</code></td>
<td>
<p>A character vector of <code>geoUnit</code> codes e.g. <code>c("018X","022A")</code> for MLRAs 18 and 22A.</p>
</td></tr>
<tr><td><code id="get_EDIT_ecoclass_by_geoUnit_+3A_catalog">catalog</code></td>
<td>
<p>Catalog ID. One of: <code>"esd"</code> or <code>"esg"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> containing: <code>geoUnit</code>, <code>id</code>, <code>legacyId</code>, <code>name</code>. <code>NULL</code> if no result.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
   get_EDIT_ecoclass_by_geoUnit(c("018X","022A"))

## End(Not run)
</code></pre>

<hr>
<h2 id='get_extended_data_from_NASIS_db'>Get accessory tables and summaries from a local NASIS Database</h2><span id='topic+get_extended_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get accessory tables and summaries from a local NASIS Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_extended_data_from_NASIS_db(
  SS = TRUE,
  nullFragsAreZero = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_extended_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>get data from the currently loaded Selected Set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_extended_data_from_NASIS_db_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should fragment volumes of NULL be interpreted as 0?
(default: TRUE), see details</p>
</td></tr>
<tr><td><code id="get_extended_data_from_NASIS_db_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_extended_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the results.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_NASIS_db">get_hz_data_from_NASIS_db</a></code>,
<code><a href="#topic+get_site_data_from_NASIS_db">get_site_data_from_NASIS_db</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


if(local_NASIS_defined()) {
 # query extended data
 e &lt;- try(get_extended_data_from_NASIS_db())

 # show contents of extended data
 str(e)
}



</code></pre>

<hr>
<h2 id='get_extended_data_from_pedon_db'>Get accessory tables and summaries from a local pedonPC Database</h2><span id='topic+get_extended_data_from_pedon_db'></span>

<h3>Description</h3>

<p>Get accessory tables and summaries from a local pedonPC Database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_extended_data_from_pedon_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_extended_data_from_pedon_db_+3A_dsn">dsn</code></td>
<td>
<p>The path to a 'pedon.mdb' database.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the results.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>,
<code><a href="#topic+get_site_data_from_pedon_db">get_site_data_from_pedon_db</a></code>
</p>

<hr>
<h2 id='get_hz_data_from_NASIS_db'>Get Horizon Data from a local NASIS Database</h2><span id='topic+get_hz_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get horizon-level data from a local NASIS database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_hz_data_from_NASIS_db(
  SS = TRUE,
  fill = FALSE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_hz_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from Selected Set in NASIS or from the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_hz_data_from_NASIS_db_+3A_fill">fill</code></td>
<td>
<p>include pedons without horizon data in result? default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="get_hz_data_from_NASIS_db_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_hz_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Note</h3>

<p><code>NULL</code> total rock fragment values are assumed to represent an <em>absence</em> of rock fragments, and set to 0.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_NASIS_db">get_hz_data_from_NASIS_db</a></code>, <code><a href="#topic+get_site_data_from_NASIS_db">get_site_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='get_hz_data_from_pedon_db'>Get Horizon Data from a PedonPC Database</h2><span id='topic+get_hz_data_from_pedon_db'></span>

<h3>Description</h3>

<p>Get horizon-level data from a PedonPC database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_hz_data_from_pedon_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_hz_data_from_pedon_db_+3A_dsn">dsn</code></td>
<td>
<p>The path to a 'pedon.mdb' database.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Note</h3>

<p>NULL total rock fragment values are assumed to represent an <em>absence</em>
of rock fragments, and set to 0.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette and Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_colors_from_pedon_db">get_colors_from_pedon_db</a></code>,
<code><a href="#topic+get_site_data_from_pedon_db">get_site_data_from_pedon_db</a></code>
</p>

<hr>
<h2 id='get_lablayer_data_from_NASIS_db'>Get lab pedon layer data from a local NASIS Database</h2><span id='topic+get_lablayer_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get lab pedon layer-level (horizon-level) data from a local NASIS database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_lablayer_data_from_NASIS_db(SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_lablayer_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_lablayer_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Note</h3>

<p>This function queries KSSL laboratory site/horizon data from a local
NASIS database from the lab layer data table.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_labpedon_data_from_NASIS_db">get_labpedon_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='get_labpedon_data_from_NASIS_db'>Get lab pedon data from a local NASIS Database</h2><span id='topic+get_labpedon_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get lab pedon-level data from a local NASIS database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_labpedon_data_from_NASIS_db(SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_labpedon_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: TRUE)</p>
</td></tr>
<tr><td><code id="get_labpedon_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function currently works only on Windows, and requires a 'nasis_local'
ODBC connection.
</p>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Note</h3>

<p>This function queries KSSL laboratory site/horizon data from a local
NASIS database from the lab pedon data table.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_lablayer_data_from_NASIS_db">get_lablayer_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='get_mapunit_from_NASIS'>Get Legend, Mapunit and Legend Mapunit Area Overlap Tables</h2><span id='topic+get_mapunit_from_NASIS'></span><span id='topic+get_legend_from_NASIS'></span><span id='topic+get_lmuaoverlap_from_NASIS'></span><span id='topic+get_projectmapunit_from_NASIS'></span>

<h3>Description</h3>

<p>Get Legend, Mapunit and Legend Mapunit Area Overlap Tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_mapunit_from_NASIS(
  SS = TRUE,
  repdmu = TRUE,
  droplevels = TRUE,
  stringsAsFactors = NULL,
  areatypename = c("Non-MLRA Soil Survey Area", "MLRA Soil Survey Area"),
  dsn = NULL
)

get_legend_from_NASIS(
  SS = TRUE,
  droplevels = TRUE,
  stringsAsFactors = NULL,
  areatypename = c("Non-MLRA Soil Survey Area", "MLRA Soil Survey Area"),
  dsn = NULL
)

get_lmuaoverlap_from_NASIS(
  SS = TRUE,
  droplevels = TRUE,
  stringsAsFactors = NULL,
  areatypename = c("Non-MLRA Soil Survey Area", "MLRA Soil Survey Area"),
  dsn = NULL
)

get_projectmapunit_from_NASIS(SS = TRUE, stringsAsFactors = NULL, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_mapunit_from_NASIS_+3A_ss">SS</code></td>
<td>
<p>Fetch data from the currently loaded selected set in NASIS or from the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_mapunit_from_NASIS_+3A_repdmu">repdmu</code></td>
<td>
<p>Return only &quot;representative&quot; data mapunits? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_mapunit_from_NASIS_+3A_droplevels">droplevels</code></td>
<td>
<p>Drop unused levels from <code>farmlndcl</code> and other factor levels from NASIS domains?</p>
</td></tr>
<tr><td><code id="get_mapunit_from_NASIS_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_mapunit_from_NASIS_+3A_areatypename">areatypename</code></td>
<td>
<p>Used for <code>get_legend_from_NASIS()</code>. Default: <code>c('Non-MLRA Soil Survey Area', 'MLRA Soil Survey Area')</code></p>
</td></tr>
<tr><td><code id="get_mapunit_from_NASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>

<hr>
<h2 id='get_NASIS_metadata'>Get NASIS Metadata (Domain, Column and Choice Lists)</h2><span id='topic+get_NASIS_metadata'></span><span id='topic+get_NASIS_column_metadata'></span>

<h3>Description</h3>

<p>Retrieve a table containing domain and column names with choice list labels/names/sequences/values from the NASIS 7 metadata tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NASIS_metadata(dsn = NULL, include_description = FALSE)

get_NASIS_column_metadata(
  x,
  what = "ColumnPhysicalName",
  include_description = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NASIS_metadata_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td></tr>
<tr><td><code id="get_NASIS_metadata_+3A_include_description">include_description</code></td>
<td>
<p>Include &quot;ChoiceDescription&quot; column? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="get_NASIS_metadata_+3A_x">x</code></td>
<td>
<p>character vector to match in NASIS metadata</p>
</td></tr>
<tr><td><code id="get_NASIS_metadata_+3A_what">what</code></td>
<td>
<p>Column to match <code>x</code> against. Default <code>"ColumnPhysicalName"</code>; alternate options include <code>"DomainID"</code>, <code>"DomainName"</code>, <code>"DomainRanked"</code>, <code>"DisplayLabel"</code>, <code>"ChoiceSequence"</code>, <code>"ChoiceValue"</code>, <code>"ChoiceName"</code>, <code>"ChoiceLabel"</code>, <code>"ChoiceObsolete"</code>, <code>"ChoiceDescription"</code>, <code>"ColumnLogicalName"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These data are derived from the MetadataDomainDetail, MetadataDomainMaster, and MetadataTableColumn tables and help with mapping between values stored in the NASIS database and human-readable values. The human-readable values align with the values returned in public facing interfaces such as SSURGO via Soil Data Access and NASIS Web Reports. The data in these tables can also be used to create <em>ordered</em> factors where options for levels of a particular data element follow a logical <code>ChoiceSequence</code>.
</p>
<p>If a local NASIS instance is set up, and this is the first time <code>get_NASIS_metadata()</code> has been called, the metadata will be obtained from the NASIS local database. Subsequent runs in the same session will use a copy of the data object <code>NASIS.metadata</code> cached in <code>soilDB.env</code> which can be accessed with <code>get_soilDB_env()$NASIS.metadata</code>.
</p>
<p>For users without a local NASIS instance, a cached copy of the NASIS metadata are used <code>(data/metadata.rda)</code>.
</p>
<p>See <code>?soilDB::metadata</code> for additional details.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> containing DomainID, DomainName, DomainRanked, DisplayLabel, ChoiceSequence, ChoiceValue, ChoiceName, ChoiceLabel, ChoiceObsolete, ColumnPhysicalName, ColumnLogicalName and optionally ChoiceDescription when <code>include_description=TRUE</code>.
</p>
<p>a <code>data.frame</code> containing selected NASIS metadata sorted first on <code>DomainID</code> and then on <code>ChoiceSequence</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_NASIS_metadata()
get_NASIS_column_metadata("texcl")
</code></pre>

<hr>
<h2 id='get_NASIS_table_key_by_name'>Get a NASIS table key by type and table name</h2><span id='topic+get_NASIS_table_key_by_name'></span><span id='topic+get_NASIS_fkey_by_name'></span><span id='topic+get_NASIS_pkeyref_by_name'></span><span id='topic+get_NASIS_pkey_by_name'></span>

<h3>Description</h3>

<p>Get a NASIS table key by type and table name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NASIS_table_key_by_name(
  tables,
  keycol = c("all", "fkey", "pkeyref", "pkey")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NASIS_table_key_by_name_+3A_tables">tables</code></td>
<td>
<p>character vector of table names</p>
</td></tr>
<tr><td><code id="get_NASIS_table_key_by_name_+3A_keycol">keycol</code></td>
<td>
<p>One of: &quot;fkey&quot; the foreign key; &quot;pkeyref&quot; the primary key referenced by the foreign key, or &quot;pkey&quot; the primary key.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The key column name for the specified table name
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_NASIS_table_key_by_name(c("site","phorizon_View_1","not_a_table"))

## End(Not run)#' 
</code></pre>

<hr>
<h2 id='get_NASIS_table_metadata'>Get NASIS Table Metadata (Table and Column Descriptions)</h2><span id='topic+get_NASIS_table_metadata'></span>

<h3>Description</h3>

<p>Retrieve a table containing table and column names with descriptions, help text, units of measure, etc. from NASIS 7 metadata tables.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NASIS_table_metadata(
  table = NULL,
  column = NULL,
  what.table = "TablePhysicalName",
  what.column = "ColumnPhysicalName",
  query_string = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NASIS_table_metadata_+3A_table">table</code></td>
<td>
<p>Character vector of table identifiers to match. Default <code>NULL</code> for &quot;all tables&quot; (no constraint)</p>
</td></tr>
<tr><td><code id="get_NASIS_table_metadata_+3A_column">column</code></td>
<td>
<p>Character vector of column identifiers to match. Default <code>NULL</code> for &quot;all columns&quot; (in selected tables, if any, otherwise no constraint)</p>
</td></tr>
<tr><td><code id="get_NASIS_table_metadata_+3A_what.table">what.table</code></td>
<td>
<p>Column to match <code>table</code> against. Default: <code>TablePhysicalName</code>.</p>
</td></tr>
<tr><td><code id="get_NASIS_table_metadata_+3A_what.column">what.column</code></td>
<td>
<p>Column to match <code>column</code> against. Default: <code>ColumnPhysicalName</code>.</p>
</td></tr>
<tr><td><code id="get_NASIS_table_metadata_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character containing query that would be sent to NASIS.</p>
</td></tr>
<tr><td><code id="get_NASIS_table_metadata_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These data are derived from the MetadataTable and MetadataTableColumn tables and describe the expected contents of standard NASIS tables and columns.
</p>
<p>For NASIS choice lists based on domain and column names see <code>get_NASIS_metadata()</code> and <code>NASISChoiceList()</code>. This function (<code>get_NASIS_table_metadata()</code>) is intended for higher-level description of the expected contents of a NASIS database instance, rather than the codes/specific values used within columns.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code>
</p>


<h3>See Also</h3>

<p><code>get_NASIS_metadata()</code> <code>NASISChoiceList()</code> <code>uncode()</code> <code>code()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (local_NASIS_defined())
 str(get_NASIS_table_metadata())
</code></pre>

<hr>
<h2 id='get_NASIS_table_name_by_purpose'>Get NASIS 7 Physical Table Names</h2><span id='topic+get_NASIS_table_name_by_purpose'></span>

<h3>Description</h3>

<p>Method generalizing concepts of NASIS 7 data model to group tables by &quot;purpose.&quot; Most of our more complex queries rely on tables from one or more purposes, so individual higher-level functions might call a function like this to identify the relevant tables from a data source.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NASIS_table_name_by_purpose(
  purpose = c("metadata", "lookup", "nasis", "site", "pedon", "transect", "component",
    "vegetation", "project", "techsoilservice", "area", "soilseries", "legend",
    "mapunit", "datamapunit"),
  SS = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NASIS_table_name_by_purpose_+3A_purpose">purpose</code></td>
<td>
<p>character. One or more of: &quot;metadata&quot;, &quot;lookup&quot;, &quot;nasis&quot;, &quot;site&quot;, &quot;pedon&quot;, &quot;transect&quot;, &quot;component&quot;, &quot;vegetation&quot;, &quot;project&quot;, &quot;techsoilservice&quot;, &quot;area&quot;, &quot;soilseries&quot;, &quot;legend&quot;, &quot;mapunit&quot;, &quot;datamapunit&quot;</p>
</td></tr>
<tr><td><code id="get_NASIS_table_name_by_purpose_+3A_ss">SS</code></td>
<td>
<p>append &quot;_View_1&quot; on appropriate tables? Default: FALSE</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character vector of table names
</p>


<h3>See Also</h3>

<p>createStaticNASIS
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# get the "site" table names
get_NASIS_table_name_by_purpose("site")

# get the pedon table names
get_NASIS_table_name_by_purpose("pedon", SS = TRUE)

# metadata and lookup not affected by SS argument, but site and pedon are
get_NASIS_table_name_by_purpose(c("metadata", "lookup",
                                   "site", "pedon"), SS = TRUE)

## End(Not run)

</code></pre>

<hr>
<h2 id='get_NOAA_GHCND'>Get Global Historical Climatology Network Daily (GHCND) data from NOAA API</h2><span id='topic+get_NOAA_GHCND'></span>

<h3>Description</h3>

<p>Obtain daily climatic summary data for a set of station IDs, years, and datatypes.
</p>
<p>Note that typically results from the NOAA API are limited to 1000 records. However, by &quot;chunking&quot; up data into individual station<em>year</em>datatypeid combinations, record results generally do not exceed 365 records for daily summaries.
</p>
<p>In order to use this function, you must obtain an API token from this website: https://www.ncdc.noaa.gov/cdo-web/token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NOAA_GHCND(stations, years, datatypeids, apitoken)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NOAA_GHCND_+3A_stations">stations</code></td>
<td>
<p>Station ID (e.g. <code>GHCND:USC00388786</code>)</p>
</td></tr>
<tr><td><code id="get_NOAA_GHCND_+3A_years">years</code></td>
<td>
<p>One or more years (e.g. 2017:2020)</p>
</td></tr>
<tr><td><code id="get_NOAA_GHCND_+3A_datatypeids">datatypeids</code></td>
<td>
<p>One or more NOAA GHCND data type IDs (e.g <code>c("PRCP","SNOW")</code>)</p>
</td></tr>
<tr><td><code id="get_NOAA_GHCND_+3A_apitoken">apitoken</code></td>
<td>
<p>API key token for NOAA NCDC web services (https://www.ncdc.noaa.gov/cdo-web/token)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing the GHCND data requested (limit 1000 records)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#' ## in order to use this function, you must obtain an API token from this website:
##  https://www.ncdc.noaa.gov/cdo-web/token

# get_NOAA_GHCND(c("GHCND:USC00388786", "GHCND:USC00388787"),
#                years = 2017:2020,
#                datatypeids = c("PRCP","SNOW"),
#                apitoken = "yourtokenhere")

</code></pre>

<hr>
<h2 id='get_NOAA_stations_nearXY'>Get NOAA station data near a given latitude and longitude</h2><span id='topic+get_NOAA_stations_nearXY'></span>

<h3>Description</h3>

<p>Query the NOAA API to get station data (limit 1000 records) near a point. Default extent is plus or minus 0.5 degrees (bounding box) (with <code>bbox = 1</code>) around the specified point [lat, lng].
</p>
<p>In order to use this function, you must obtain an API token from this website: https://www.ncdc.noaa.gov/cdo-web/token
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_NOAA_stations_nearXY(lat, lng, apitoken, bbox = 1, crs = "EPSG:4326")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_NOAA_stations_nearXY_+3A_lat">lat</code></td>
<td>
<p>Latitude or Y coordinate in <code>crs</code></p>
</td></tr>
<tr><td><code id="get_NOAA_stations_nearXY_+3A_lng">lng</code></td>
<td>
<p>Longitude or X coordinate in <code>crs</code></p>
</td></tr>
<tr><td><code id="get_NOAA_stations_nearXY_+3A_apitoken">apitoken</code></td>
<td>
<p>API key token for NOAA NCDC web service</p>
</td></tr>
<tr><td><code id="get_NOAA_stations_nearXY_+3A_bbox">bbox</code></td>
<td>
<p>Optional: Dimension of the bounding box centered at <code>lat</code>, <code>lng</code>.</p>
</td></tr>
<tr><td><code id="get_NOAA_stations_nearXY_+3A_crs">crs</code></td>
<td>
<p>Coordinate Reference System. Default <code>"EPSG:4326"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>data.frame containing station information for all stations within a bounding box around <code>lat</code>, <code>lng</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## in order to use this function, you must obtain an API token from this website:
##  https://www.ncdc.noaa.gov/cdo-web/token

# stations &lt;- get_NOAA_stations_nearXY(lat = 37, lng = -120,
#                                      apitoken = "yourtokenhere")

</code></pre>

<hr>
<h2 id='get_OSD'>Get Official Series Description Data from JSON, HTML or TXT sources</h2><span id='topic+get_OSD'></span><span id='topic+get_OSD_JSON'></span>

<h3>Description</h3>

<p>Get Official Series Description Data from JSON, HTML or TXT sources
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_OSD(
  series,
  base_url = NULL,
  result = c("json", "html", "txt"),
  fix_ocr_errors = FALSE,
  verbose = FALSE
)

get_OSD_JSON(series, base_url = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_OSD_+3A_series">series</code></td>
<td>
<p>A character vector of Official Series names e.g. <code>"Chewacla"</code></p>
</td></tr>
<tr><td><code id="get_OSD_+3A_base_url">base_url</code></td>
<td>
<p>Optional: alternate JSON/HTML/TXT repository path. Default: <code>NULL</code> uses <code>"https://github.com/ncss-tech/SoilKnowledgeBase"</code> for <code>result="json"</code></p>
</td></tr>
<tr><td><code id="get_OSD_+3A_result">result</code></td>
<td>
<p>Select <code>"json"</code>, <code>"html"</code>, or <code>"txt"</code> output</p>
</td></tr>
<tr><td><code id="get_OSD_+3A_fix_ocr_errors">fix_ocr_errors</code></td>
<td>
<p>Default: <code>FALSE</code>; Applies only to <code>result='json'</code>. Convert clear cases of Optical Character Recognition (OCR) errors to likely actual values.</p>
</td></tr>
<tr><td><code id="get_OSD_+3A_verbose">verbose</code></td>
<td>
<p>Print errors and warning messages related to HTTP requests? Default: <code>FALSE</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default <code>base_url</code> for <code>result="json"</code> is to JSON files stored in a GitHub repository  that is regularly updated from the official source of Series Descriptions. Using format: <code style="white-space: pre;">&#8288;https://raw.githubusercontent.com/ncss-tech/SoilKnowledgeBase/main/inst/extdata/OSD/{LETTER}/{SERIES}.json&#8288;</code> for JSON. And <code style="white-space: pre;">&#8288;"https://soilseriesdesc.sc.egov.usda.gov/OSD_Docs/{LETTER}/{SERIES}.html&#8288;</code> is for <code>result="html"</code> (official source).
</p>
<p><code>fix_ocr_errors</code> by default is turned off (<code>FALSE</code>). When <code>TRUE</code>, assume that in color data hue/value/chroma lowercase &quot;L&quot; (<code>"l"</code>) is a 1, and a capital &quot;O&quot; is interpreted as zero. Also, in horizon designations assume lowercase &quot;L&quot; is a <code>1</code>, and a string that starts with <code>0</code> starts with the capital letter <code>"O"</code>.
</p>


<h3>Value</h3>

<p>For JSON result: A <code>data.frame</code> with 1 row per series, and 1 column per &quot;section&quot; in the OSD as defined in National Soil Survey Handbook. For TXT or HTML result a list of character vectors containing OSD text with 1 element per series and one value per line.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


  series &lt;- c("Musick", "Hector", "Chewacla")
  get_OSD(series)

</code></pre>

<hr>
<h2 id='get_RMF_from_NASIS_db'>Get RMF data from local NASIS</h2><span id='topic+get_RMF_from_NASIS_db'></span>

<h3>Description</h3>

<p>Prepare a list of <code>data.frame</code> objects with data from the &quot;phrdxfeatures&quot; and &quot;phredoxfcolor&quot; tables. These tables are related by &quot;phrdxfiid&quot; column, and related to horizon data via &quot;phiid&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_RMF_from_NASIS_db(SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_RMF_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>logical, limit query to the selected set</p>
</td></tr>
<tr><td><code id="get_RMF_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>optional path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>list</code> with two <code>data.frame</code> objects:
</p>

<ul>
<li> <p><code>RMF</code>: contents of &quot;phrdxfeatures&quot; table, often &gt;1 row per horizon
</p>
</li>
<li> <p><code>RMF_colors</code>: contents of &quot;phredoxfcolor&quot;, usually &gt;1 row per record in &quot;phrdxfeatures&quot;
</p>
</li></ul>


<hr>
<h2 id='get_SDA_coecoclass'>Get mapunit ecological sites from Soil Data Access</h2><span id='topic+get_SDA_coecoclass'></span>

<h3>Description</h3>

<p>Get mapunit ecological sites from Soil Data Access
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_coecoclass(
  method = "None",
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  query_string = FALSE,
  ecoclasstypename = c("NRCS Rangeland Site", "NRCS Forestland Site"),
  ecoclassref = "Ecological Site Description Database",
  not_rated_value = "Not assigned",
  miscellaneous_areas = TRUE,
  include_minors = TRUE,
  threshold = 0,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_coecoclass_+3A_method">method</code></td>
<td>
<p>aggregation method. One of: <code>"Dominant Component"</code>, <code>"Dominant Condition"</code>, <code>"All"</code> or <code>"None"</code> (default). If <code>method="all"</code> multiple numbered columns represent site composition within each map unit e.g. <code>site1...</code>, <code>site2...</code>. If <code>method="none"</code> is selected one row will be returned per <em>component</em>; in all other cases one row will be returned per <em>map unit</em>.</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code>, <code>mapunit</code>, <code>component</code> or <code>coecosite</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code></p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_ecoclasstypename">ecoclasstypename</code></td>
<td>
<p>Default: <code>c("NRCS Rangeland Site", "NRCS Forestland Site")</code>. If <code>NULL</code> no constraint on <code>ecoclasstypename</code> is used in the query.</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_ecoclassref">ecoclassref</code></td>
<td>
<p>Default: <code>"Ecological Site Description Database"</code>. If <code>NULL</code> no constraint on <code>ecoclassref</code> is used in the query.</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_not_rated_value">not_rated_value</code></td>
<td>
<p>Default: <code>"Not assigned"</code></p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_miscellaneous_areas">miscellaneous_areas</code></td>
<td>
<p>logical. Include miscellaneous areas (non-soil components)?</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_include_minors">include_minors</code></td>
<td>
<p>logical. Include minor components? Default: <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_threshold">threshold</code></td>
<td>
<p>integer. Default: <code>0</code>. Minimum combined component percentage (RV) for inclusion of a mapunit's ecological site in wide-format tabular summary. Used only for <code>method="all"</code>.</p>
</td></tr>
<tr><td><code id="get_SDA_coecoclass_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When <code>method="Dominant Condition"</code> an additional field <code>ecoclasspct_r</code> is returned in the result
with the sum of <code>comppct_r</code> that have the dominant condition <code>ecoclassid</code>. The component with the greatest
<code>comppct_r</code> is returned for the <code>component</code> and <code>coecosite</code> level information.
</p>
<p>Note that if there are multiple <code>coecoclasskey</code> per <code>ecoclassid</code> there may be more than one record per component.
</p>

<hr>
<h2 id='get_SDA_cosurfmorph'>Get Geomorphic/Surface Morphometry Data from Soil Data Access</h2><span id='topic+get_SDA_cosurfmorph'></span>

<h3>Description</h3>

<p>Get Geomorphic/Surface Morphometry Data from Soil Data Access or a local SSURGO data source and summarize by counts and proportions (&quot;probabilities&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_cosurfmorph(
  table = c("cosurfmorphgc", "cosurfmorphhpp", "cosurfmorphss", "cosurfmorphmr"),
  by = "compname",
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  miscellaneous_areas = FALSE,
  db = c("SSURGO", "STATSGO"),
  dsn = NULL,
  query_string = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_cosurfmorph_+3A_table">table</code></td>
<td>
<p>Target table to summarize. Default: <code>"cosurfmorphgc"</code> (3D Geomorphic Component). Alternate choices include <code>cosurfmorphhpp</code> (2D Hillslope Position), <code>cosurfmorphss</code> (Surface Shape), and  <code>cosurfmorphmr</code> (Microrelief).</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_by">by</code></td>
<td>
<p>Grouping variable. Default: <code>"compname"</code></p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_areasymbols">areasymbols</code></td>
<td>
<p>A vector of soil survey area symbols (e.g. <code>'CA067'</code>)</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_mukeys">mukeys</code></td>
<td>
<p>A vector of map unit keys (e.g. <code>466627</code>)</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_where">WHERE</code></td>
<td>
<p>WHERE clause added to SQL query. For example: <code>areasymbol = 'CA067'</code></p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_miscellaneous_areas">miscellaneous_areas</code></td>
<td>
<p>Include miscellaneous areas  (non-soil components) in results? Default: <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_db">db</code></td>
<td>
<p>Either <code>'SSURGO'</code> (default) or <code>'STATSGO'</code>. If <code>'SSURGO'</code> is specified <code>areasymbol = 'US'</code> records are excluded. If <code>'STATSGO'</code> only <code>areasymbol = 'US'</code> records are included.</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SSURGO database SQLite database. Default <code>NULL</code> uses Soil Data Access.</p>
</td></tr>
<tr><td><code id="get_SDA_cosurfmorph_+3A_query_string">query_string</code></td>
<td>
<p>Return query instead of sending to Soil Data Access / local database. Default: <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Default <code>table="cosurfmorphgc"</code> summarizes columns <code>geomposmntn</code>, <code>geomposhill</code>, <code>geomposflats</code>, and <code>geompostrce</code>.
<code>table="cosurfmorphhpp"</code> summarizes <code>"hillslopeprof"</code>,  <code>table="cosurfmorphss"</code> summarizes <code>shapeacross</code> and <code>shapedown</code>, and <code>table="cosurfmorphmr"</code> summarizes <code>geomicrorelief</code>.
</p>
<p>Queries are a generalization of now-deprecated functions from sharpshootR package by Dylan Beaudette: <code>geomPosMountainProbability()</code>, <code>geomPosHillProbability()</code>, <code>surfaceShapeProbability()</code>, <code>hillslopeProbability()</code>
</p>
<p>Similar summaries of SSURGO component surface morphometry data by series name can be found in <code>fetchOSD(, extended=TRUE)</code> or downloaded from <a href="https://github.com/ncss-tech/SoilWeb-data">https://github.com/ncss-tech/SoilWeb-data</a>
Full component data including surface morphometry summaries at the &quot;site&quot; level can be obtained with <code>fetchSDA()</code>.
</p>


<h3>Value</h3>

<p>a <code>data.frame</code> containing the grouping variable (<code>by</code>) and tabular summaries of counts and proportions of geomorphic records.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette, Andrew G. Brown
</p>


<h3>See Also</h3>

<p><code>fetchSDA()</code> <code>get_SDA_pmgroupname()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
 # Summarize by 3D geomorphic components by component name (default `by='compname'`)
 get_SDA_cosurfmorph(WHERE = "areasymbol = 'CA630'")

 # Whole Soil Survey Area summary (using `by = 'areasymbol'`)
 get_SDA_cosurfmorph(by = 'areasymbol', WHERE = "areasymbol = 'CA630'")

 # 2D Hillslope Position summary(using `table = 'cosurfmorphhpp'`)
 get_SDA_cosurfmorph('cosurfmorphhpp', WHERE = "areasymbol = 'CA630'")

 # Surface Shape summary (using `table = 'cosurfmorphss'`)
 get_SDA_cosurfmorph('cosurfmorphss', WHERE = "areasymbol = 'CA630'")

 # Microrelief summary (using `table = 'cosurfmorphmr'`)
 get_SDA_cosurfmorph('cosurfmorphmr', WHERE = "areasymbol = 'CA630'")

## End(Not run)
</code></pre>

<hr>
<h2 id='get_SDA_hydric'>Get map unit hydric soils information from Soil Data Access</h2><span id='topic+get_SDA_hydric'></span>

<h3>Description</h3>

<p>Assess the hydric soils composition of a map unit.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_hydric(
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  method = "MAPUNIT",
  query_string = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_hydric_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_hydric_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_hydric_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code>, <code>mapunit</code>, or <code>component</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code></p>
</td></tr>
<tr><td><code id="get_SDA_hydric_+3A_method">method</code></td>
<td>
<p>One of: <code>"Mapunit"</code>, <code>"Dominant Component"</code>, <code>"Dominant Condition"</code>, <code>"None"</code></p>
</td></tr>
<tr><td><code id="get_SDA_hydric_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_hydric_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The default classes for <code>method="MAPUNIT"</code> are as follows:
</p>

<ul>
<li> <p><code>'Nonhydric'</code> - no hydric components
</p>
</li>
<li> <p><code>'Hydric'</code> - all hydric components
</p>
</li>
<li> <p><code>'Predominantly Hydric'</code> - hydric component percentage is 50% or more
</p>
</li>
<li> <p><code>'Partially Hydric'</code> - one or more of the major components is hydric
</p>
</li>
<li> <p><code>'Predominantly Nonhydric'</code> - hydric component percentage is less than 50%
</p>
</li></ul>

<p>The default result will also include the following summaries of component percentages: <code>total_comppct</code>, <code>hydric_majors</code> and <code>hydric_inclusions</code>.
</p>
<p>Default <code>method</code> <code>"Mapunit"</code> produces aggregate summaries of all components in the mapunit. Use <code>"Dominant Component"</code> and <code>"Dominant Condition"</code> to get the dominant component (highest percentage) or dominant hydric condition (similar conditions aggregated across components), respectively. Use <code>"None"</code> for no aggregation (one record per component).
</p>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek, Chad Ferguson, Andrew Brown
</p>

<hr>
<h2 id='get_SDA_interpretation'>Get map unit interpretations from Soil Data Access by rule name</h2><span id='topic+get_SDA_interpretation'></span>

<h3>Description</h3>

<p>Get map unit interpretations from Soil Data Access by rule name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_interpretation(
  rulename,
  method = c("Dominant Component", "Dominant Condition", "Weighted Average", "None"),
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  query_string = FALSE,
  not_rated_value = NA_real_,
  wide_reason = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_interpretation_+3A_rulename">rulename</code></td>
<td>
<p>character vector of interpretation rule names (matching <code>mrulename</code> in <code>cointerp</code> table)</p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_method">method</code></td>
<td>
<p>aggregation method. One of: &quot;Dominant Component&quot;, &quot;Dominant Condition&quot;, &quot;Weighted Average&quot;, &quot;None&quot;. If &quot;None&quot; is selected one row will be returned per component, otherwise one row will be returned per map unit.</p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code>, <code>mapunit</code>, or <code>component</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code></p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_not_rated_value">not_rated_value</code></td>
<td>
<p>used where rating class is &quot;Not Rated&quot;. Default: <code>NA_real_</code></p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_wide_reason">wide_reason</code></td>
<td>
<p>Default: <code>FALSE</code>; if  <code>TRUE</code> apply post-processing to all columns with prefix <code>"reason_"</code> to create additional columns for sub-rule ratings.</p>
</td></tr>
<tr><td><code id="get_SDA_interpretation_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Rule Names in <code>cointerp</code> table</h4>


<ul>
<li><p> AGR - Avocado Root Rot Hazard (CA)
</p>
</li>
<li><p> AGR - California Revised Storie Index (CA)
</p>
</li>
<li><p> AGR - Hops Site Suitability (WA)
</p>
</li>
<li><p> AGR - Map Unit Cropland Productivity (MN)
</p>
</li>
<li><p> AGR - Nitrate Leaching Potential, Nonirrigated (WA)
</p>
</li>
<li><p> AGR - No Till (TX)
</p>
</li>
<li><p> AGR - Pesticide Loss Potential-Soil Surface Runoff (NE)
</p>
</li>
<li><p> AGR - Ridge Till (TX)
</p>
</li>
<li><p> AGR - Selenium Leaching Potential (CO)
</p>
</li>
<li><p> AGR - Water Erosion Potential (NE)
</p>
</li>
<li><p> AGR - Wind Erosion Potential (TX)
</p>
</li>
<li><p> AGR - Winter Wheat Yield (MT)
</p>
</li>
<li><p> AGR-Pesticide and Nutrient Runoff Potential (ND)
</p>
</li>
<li><p> AGR-Rooting Depth (ND)
</p>
</li>
<li><p> American Wine Grape Varieties Site Desirability (Long)
</p>
</li>
<li><p> American Wine Grape Varieties Site Desirability (Medium)
</p>
</li>
<li><p> American Wine Grape Varieties Site Desirability (Very Long)
</p>
</li>
<li><p> AWM - Animal Mortality Disposal (Catastrophic) (MO)
</p>
</li>
<li><p> AWM - Irrigation Disposal of Wastewater (OH)
</p>
</li>
<li><p> AWM - Irrigation Disposal of Wastewater (VT)s
</p>
</li>
<li><p> AWM - Land Application of Municipal Biosolids, summer (OR)
</p>
</li>
<li><p> AWM - Manure and Food Processing Waste (MD)
</p>
</li>
<li><p> AWM - Manure and Food Processing Waste (OH)
</p>
</li>
<li><p> AWM - Overland Flow Process Treatment of Wastewater (VT)
</p>
</li>
<li><p> AWM - Rapid Infil Disposal of Wastewater (DE)
</p>
</li>
<li><p> AWM - Sensitive Soil Features (MN)
</p>
</li>
<li><p> AWM - Sensitive Soil Features (WI)
</p>
</li>
<li><p> BLM - Fencing
</p>
</li>
<li><p> BLM - Fire Damage Susceptibility
</p>
</li>
<li><p> BLM - Mechanical Treatment, Rolling Drum
</p>
</li>
<li><p> BLM - Rangeland Drill
</p>
</li>
<li><p> BLM - Rangeland Seeding, Colorado Plateau Ecoregion
</p>
</li>
<li><p> BLM - Rangeland Seeding, Great Basin Ecoregion
</p>
</li>
<li><p> BLM-Reclamation Suitability (MT)
</p>
</li>
<li><p> CLASS RULE - Depth to lithic bedrock (5 classes) (NPS)
</p>
</li>
<li><p> CLASS RULE - Soil Inorganic Carbon kg/m2 to 2m (NPS)
</p>
</li>
<li><p> CLASS RULE - Soil Organic Carbon kg/m2 to 2m (NPS)
</p>
</li>
<li><p> CLR-pastureland limitation (IN)
</p>
</li>
<li><p> Commodity Crop Productivity Index (Soybeans) (TN)
</p>
</li>
<li><p> CPI - Alfalfa Hay, NIRR - Palouse, Northern Rocky Mtns. (WA)
</p>
</li>
<li><p> CPI - Barley, IRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Grass Hay, IRR - Klamath Valleys and Basins (OR)
</p>
</li>
<li><p> CPI - Small Grains, IRR - Snake River Plains (ID)
</p>
</li>
<li><p> CPI - Wheat, IRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CZSS - Salinization due to Coastal Saltwater Inundation (CT)
</p>
</li>
<li><p> DHS - Catastrophic Event, Large Animal Mortality, Burial
</p>
</li>
<li><p> DHS - Catastrophic Mortality, Large Animal Disposal, Pit
</p>
</li>
<li><p> DHS - Catastrophic Mortality, Large Animal Disposal, Trench
</p>
</li>
<li><p> DHS - Potential for Radioactive Bioaccumulation
</p>
</li>
<li><p> DHS - Potential for Radioactive Sequestration
</p>
</li>
<li><p> DHS - Suitability for Composting Medium and Final Cover
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (AK)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (ID)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (OH)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (VT)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (WA)
</p>
</li>
<li><p> ENG - Construction Materials; Roadfill (OH)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (OR)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (WA)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (GA)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (MD)
</p>
</li>
<li><p> ENG - Daily Cover for Landfill
</p>
</li>
<li><p> ENG - Daily Cover for Landfill (AK)
</p>
</li>
<li><p> ENG - Disposal Field Suitability Class (NJ)
</p>
</li>
<li><p> ENG - Dwellings W/O Basements (OH)
</p>
</li>
<li><p> ENG - Dwellings with Basements (AK)
</p>
</li>
<li><p> ENG - Large Animal Disposal, Pit (CT)
</p>
</li>
<li><p> ENG - Lawn, landscape, golf fairway (CT)
</p>
</li>
<li><p> ENG - Lined Retention Systems
</p>
</li>
<li><p> ENG - Local Roads and Streets (OH)
</p>
</li>
<li><p> ENG - On-Site Waste Water Absorption Fields (MO)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (MD)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (TX)
</p>
</li>
<li><p> ENG - Septic Tank, Gravity Disposal (TX)
</p>
</li>
<li><p> ENG - Sewage Lagoons
</p>
</li>
<li><p> ENG - Small Commercial Buildings (OH)
</p>
</li>
<li><p> ENG - Soil Potential Ratings of SSDS (CT)
</p>
</li>
<li><p> FOR (USFS) - Road Construction/Maintenance (Natural Surface)
</p>
</li>
<li><p> FOR - Compaction Potential (WA)
</p>
</li>
<li><p> FOR - Conservation Tree/Shrub Groups (MT)
</p>
</li>
<li><p> FOR - Damage by Fire (OH)
</p>
</li>
<li><p> FOR - General Harvest Season (VT)
</p>
</li>
<li><p> FOR - Hand Planting Suitability
</p>
</li>
<li><p> FOR - Hand Planting Suitability, MO13 (DE)
</p>
</li>
<li><p> FOR - Hand Planting Suitability, MO13 (MD)
</p>
</li>
<li><p> FOR - Log Landing Suitability
</p>
</li>
<li><p> FOR - Log Landing Suitability (ME)
</p>
</li>
<li><p> FOR - Log Landing Suitability (VT)
</p>
</li>
<li><p> FOR - Log Landing Suitability (WA)
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability (CT)
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability, MO13 (MD)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Deep)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Deep) (DE)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Surface) (DE)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Surface) (MI)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation; Surface (ME)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard, Road/Trail, Spring Thaw (AK)
</p>
</li>
<li><p> FOR - Potential Seedling Mortality (PIA)
</p>
</li>
<li><p> FOR - Potential Seedling Mortality(ME)
</p>
</li>
<li><p> FOR - Puddling Hazard
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (ME)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (WA)
</p>
</li>
<li><p> FOR - Soil Rutting Hazard (OH)
</p>
</li>
<li><p> FOR - Soil Sustainability Forest Biomass Harvesting (CT)
</p>
</li>
<li><p> FOR - White Oak Suitability (MO)
</p>
</li>
<li><p> FOR-Biomass Harvest (WI)
</p>
</li>
<li><p> FOTG - Indiana Corn Yield Calculation (IN)
</p>
</li>
<li><p> GRL - Excavations to 24 inches for Plastic Pipelines (TX)
</p>
</li>
<li><p> GRL - Fencing, 24 inch Post Depth (MT)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 100) (NV)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 40) (NV)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 60) (NV)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 80) (NV)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C &gt;= 160) (NV)
</p>
</li>
<li><p> GRL - Rangeland Planting by Mechanical Seeding (TX)
</p>
</li>
<li><p> GRL - Rangeland Root Plowing (TX)
</p>
</li>
<li><p> Hybrid Wine Grape Varieties Site Desirability (Long)
</p>
</li>
<li><p> Low Pressure Pipe Septic System (DE)
</p>
</li>
<li><p> MIL - Bivouac Areas (DOD)
</p>
</li>
<li><p> MIL - Excavations Crew-Served Weapon Fighting Position (DOD)
</p>
</li>
<li><p> MIL - Excavations for Individual Fighting Position (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 1 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 2 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 4 1-pass wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 4 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 6 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 7 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 7 dry season (DOD)
</p>
</li>
<li><p> NCCPI - Irrigated National Commodity Crop Productivity Index
</p>
</li>
<li><p> Nitrogen Loss Potential (ND)
</p>
</li>
<li><p> Potential Windthrow Hazard (TN)
</p>
</li>
<li><p> REC - Foot and ATV Trails (AK)
</p>
</li>
<li><p> REC - Playgrounds (AK)
</p>
</li>
<li><p> Reclamation Suitability (ND)
</p>
</li>
<li><p> RSK-risk assessment for manure application (OH)
</p>
</li>
<li><p> SAS - CMECS Substrate Origin
</p>
</li>
<li><p> SAS - CMECS Substrate Subclass/Group/Subgroup
</p>
</li>
<li><p> SAS - Mooring Anchor - Deadweight
</p>
</li>
<li><p> Septic System A/B Soil System (Alternate) (PA)
</p>
</li>
<li><p> Septic System CO-OP RFS III w/Spray Irrigation (PA)
</p>
</li>
<li><p> Septic System Dual Field Trench (conventional) (WV)
</p>
</li>
<li><p> Septic System Elevated Field (alternative) (WV)
</p>
</li>
<li><p> Septic System In Ground Trench (conventional) (PA)
</p>
</li>
<li><p> Septic System In Ground Trench (conventional) (WV)
</p>
</li>
<li><p> AGR - Filter Strips (TX)
</p>
</li>
<li><p> AGR - Hops Site Suitability (ID)
</p>
</li>
<li><p> AGR - Mulch Till (TX)
</p>
</li>
<li><p> AGR - Nitrate Leaching Potential, Nonirrigated (MT)
</p>
</li>
<li><p> AGR - Nitrate Leaching Potential, Nonirrigated (WV)
</p>
</li>
<li><p> AGR - No Till (VT)
</p>
</li>
<li><p> AGR - Oats Yield (MT)
</p>
</li>
<li><p> AGR - Pesticide Loss Potential-Leaching
</p>
</li>
<li><p> AGR - Pesticide Loss Potential-Leaching (NE)
</p>
</li>
<li><p> AGR - Rutting Hazard =&lt; 10,000 Pounds per Wheel (TX)
</p>
</li>
<li><p> AGR - S. Highbush Blueberry Suitability MLRA 153 (SC)
</p>
</li>
<li><p> AGR - Wind Erosion Potential (NE)
</p>
</li>
<li><p> AGR-Available Water Capacity (ND)
</p>
</li>
<li><p> AGR-Physical Limitations (ND)
</p>
</li>
<li><p> AGR-Sodicity (ND)
</p>
</li>
<li><p> AGR-Surface Crusting (ND)
</p>
</li>
<li><p> AGR-Wind Erosion (ND)
</p>
</li>
<li><p> AWM - Irrigation Disposal of Wastewater (DE)
</p>
</li>
<li><p> AWM - Land App of Municipal Sewage Sludge (DE)
</p>
</li>
<li><p> AWM - Land App of Municipal Sewage Sludge (MD)
</p>
</li>
<li><p> AWM - Land Application of Milk (CT)
</p>
</li>
<li><p> AWM - Land Application of Municipal Biosolids, spring (OR)
</p>
</li>
<li><p> AWM - Land Application of Municipal Sewage Sludge
</p>
</li>
<li><p> AWM - Land Application of Municipal Sewage Sludge (OH)
</p>
</li>
<li><p> AWM - Land Application of Municipal Sewage Sludge (VT)
</p>
</li>
<li><p> AWM - Large Animal Disposal, Pit (MN)
</p>
</li>
<li><p> AWM - Manure and Food Processing Waste
</p>
</li>
<li><p> AWM - Manure and Food Processing Waste (VT)
</p>
</li>
<li><p> AWM - Rapid Infil Disposal of Wastewater (MD)
</p>
</li>
<li><p> AWM - Rapid Infiltration Disposal of Wastewater (VT)
</p>
</li>
<li><p> AWM - Slow Rate Process Treatment of Wastewater (VT)
</p>
</li>
<li><p> BLM - Chaining Suitability
</p>
</li>
<li><p> BLM - Fugitive Dust Resistance
</p>
</li>
<li><p> BLM - Soil Restoration Potential
</p>
</li>
<li><p> BLM - Yellow Star-thistle Invasion Susceptibility
</p>
</li>
<li><p> CLASS RULE - Depth to non-lithic bedrock (5 classes) (NPS)
</p>
</li>
<li><p> CLR-cropland limitation for corn and soybeans (IN)
</p>
</li>
<li><p> Commodity Crop Productivity Index (Corn) (WI)
</p>
</li>
<li><p> CPI - Grass Hay, NIRR - Klamath Valleys and Basins (OR)
</p>
</li>
<li><p> CPI - Potatoes Productivity Index (AK)
</p>
</li>
<li><p> CPI - Potatoes, IRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Small Grains, NIRR - Palouse Prairies (ID)
</p>
</li>
<li><p> DHS - Emergency Animal Mortality Disposal by Shallow Burial
</p>
</li>
<li><p> DHS - Rubble and Debris Disposal, Large-Scale Event
</p>
</li>
<li><p> ENG - Aquifer Assessment - 7081 (MN)
</p>
</li>
<li><p> ENG - Construction Materials - Gravel Source (MN)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (MI)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (OR)
</p>
</li>
<li><p> ENG - Construction Materials; Reclamation
</p>
</li>
<li><p> ENG - Construction Materials; Reclamation (OH)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (AK)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (ID)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (IN)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (OH)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (WA)
</p>
</li>
<li><p> ENG - Ground-based Solar Arrays, Soil-based Anchor Systems
</p>
</li>
<li><p> ENG - Local Roads and Streets
</p>
</li>
<li><p> ENG - New Ohio Septic Rating (OH)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Trench) (OH)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (AK)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (DE)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (NY)
</p>
</li>
<li><p> ENG - Sewage Lagoons (OH)
</p>
</li>
<li><p> ENG - Shallow Excavations (AK)
</p>
</li>
<li><p> ENG - Shallow Excavations (MI)
</p>
</li>
<li><p> ENG - Unpaved Local Roads and Streets
</p>
</li>
<li><p> FOR - Black Walnut Suitability Index (MO)
</p>
</li>
<li><p> FOR - Conservation Tree and Shrub Groups (TX)
</p>
</li>
<li><p> FOR - Construction Limitations - Haul Roads/Log Landing (OH)
</p>
</li>
<li><p> FOR - Construction Limitations For Haul Roads (MI)
</p>
</li>
<li><p> FOR - Hand Planting Suitability (ME)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (MD)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (OH)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (VT)
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability (ME)
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability, MO13 (DE)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard (Off-Road/Off-Trail)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard (Road/Trail) (PIA)
</p>
</li>
<li><p> FOR - Potential Seedling Mortality (VT)
</p>
</li>
<li><p> FOR - Potential Windthrow Hazard (NY)
</p>
</li>
<li><p> FOR - Potential Windthrow Hazard (VT)
</p>
</li>
<li><p> FOR - Puddling Potential (WA)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (OH)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (OR)
</p>
</li>
<li><p> FOR - Rutting Hazard by Season
</p>
</li>
<li><p> FOR - Shortleaf pine littleleaf disease susceptibility
</p>
</li>
<li><p> FOR - Soil Compactibility Risk
</p>
</li>
<li><p> FOR - Soil Rutting Hazard (ME)
</p>
</li>
<li><p> FOR - Windthrow Hazard
</p>
</li>
<li><p> FOR-Construction Limitations for Haul Roads/Log Landings(ME)
</p>
</li>
<li><p> FOTG - Indiana Slippage Potential (IN)
</p>
</li>
<li><p> Gravity Full Depth Septic System (DE)
</p>
</li>
<li><p> GRL - Fencing, Post Depth =&lt;36 inches
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 50) (NV)
</p>
</li>
<li><p> GRL - Ranch Access Roads (TX)
</p>
</li>
<li><p> GRL - Rangeland Roller Chopping (TX)
</p>
</li>
<li><p> Ground Penetrating Radar Penetration
</p>
</li>
<li><p> Ground-based Solar Arrays_bedrock(ME)
</p>
</li>
<li><p> Ground-based Solar Arrays_bedrock_slope_ballast(ME)
</p>
</li>
<li><p> Hybrid Wine Grape Varieties Site Desirability (Short)
</p>
</li>
<li><p> ISDH Septic Tank Interpretation (IN)
</p>
</li>
<li><p> Land Application of Municipal Sewage Sludge (PA)
</p>
</li>
<li><p> MIL - Helicopter Landing Zones (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 2 1-pass wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 5 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 5 dry season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 7 1-pass wet season (DOD)
</p>
</li>
<li><p> NCCPI - National Commodity Crop Productivity Index (Ver 3.0)
</p>
</li>
<li><p> REC - Camp and Picnic Areas (AK)
</p>
</li>
<li><p> REC - Picnic Areas (CT)
</p>
</li>
<li><p> REC - Playgrounds (CT)
</p>
</li>
<li><p> SAS - CMECS Substrate Subclass
</p>
</li>
<li><p> Septic System Drip Irrigation (Alternate) (PA)
</p>
</li>
<li><p> Septic System Free Access Sand Filter w/Drip Irrigation (PA)
</p>
</li>
<li><p> Septic System In Ground Bed (conventional) (PA)
</p>
</li>
<li><p> Septic System Peat Based Option1 (UV &amp; At-Grade Bed)Alt (PA)
</p>
</li>
<li><p> Septic System Peat Sys Opt3 w/Subsurface Sand Filter (PA)
</p>
</li>
<li><p> Septic System Sand Mound Bed or Trench (PA)
</p>
</li>
<li><p> Septic System Shallow Placement Pressure Dosed (Alt.) (PA)
</p>
</li>
<li><p> SOH - Aggregate Stability (ND)
</p>
</li>
<li><p> SOH - Agricultural Organic Soil Subsidence
</p>
</li>
<li><p> SOH - Dynamic Soil Properties Response to Biochar
</p>
</li>
<li><p> SOH - Organic Matter Depletion
</p>
</li>
<li><p> SOIL HEALTH ASSESSMENT (NJ)
</p>
</li>
<li><p> URB - Commercial Brick Bldg; w/Reinforced Concrete Slab (TX)
</p>
</li>
<li><p> URB - Reinforced Concrete Slab (TX)
</p>
</li>
<li><p> URB/REC - Camp Areas
</p>
</li>
<li><p> URB/REC - Camp Areas (OH)
</p>
</li>
<li><p> URB/REC - Off-Road Motorcycle Trails (OH)
</p>
</li>
<li><p> URB/REC - Paths and Trails (OH)
</p>
</li>
<li><p> URB/REC - Picnic Areas
</p>
</li>
<li><p> URB/REC - Playgrounds
</p>
</li>
<li><p> URB/REC - Playgrounds (GA)
</p>
</li>
<li><p> Vinifera Wine Grape Site Desirability (Short to Medium)
</p>
</li>
<li><p> WLF - Irr. Domestic Grasses &amp; Legumes for Food &amp; Cover (TX)
</p>
</li>
<li><p> WLF - Upland Coniferous Trees (TX)
</p>
</li>
<li><p> WLF - Upland Deciduous Trees (TX)
</p>
</li>
<li><p> WLF - Upland Desertic Shrubs &amp; Trees (TX)
</p>
</li>
<li><p> WLF - Upland Native Herbaceous Plants (TX)
</p>
</li>
<li><p> WLF - Upland Shrubs &amp; Vines (TX)
</p>
</li>
<li><p> WLF-Soil Suitability - Karner Blue Butterfly (WI)
</p>
</li>
<li><p> WMS - Drainage (IL)
</p>
</li>
<li><p> WMS - Drainage - (MI)
</p>
</li>
<li><p> WMS - Embankments, Dikes, and Levees
</p>
</li>
<li><p> WMS - Embankments, Dikes, and Levees (OH)
</p>
</li>
<li><p> WMS - Grassed Waterways - (MI)
</p>
</li>
<li><p> AGR - Air Quality; PM10 (TX)
</p>
</li>
<li><p> AGR - Air Quality; PM2_5 (TX)
</p>
</li>
<li><p> AGR - Aronia Berry Suitability (SD)
</p>
</li>
<li><p> AGR - Farmland of Statewide Importance (TX)
</p>
</li>
<li><p> AGR - Index for alfalfa hay, irrigated (NV)
</p>
</li>
<li><p> AGR - Nitrate Leaching Potential, Nonirrigated (MA)
</p>
</li>
<li><p> AGR - Rangeland Grass/Herbaceous Productivity Index (TX)
</p>
</li>
<li><p> AGR - Rutting Hazard &gt; 10,000 Pounds per Wheel (TX)
</p>
</li>
<li><p> AGR - Water Erosion Potential (TX)
</p>
</li>
<li><p> AGR - Wine Grape Site Suitability (WA)
</p>
</li>
<li><p> AGR-Natural Fertility (ND)
</p>
</li>
<li><p> AGR-Subsurface Salinity (ND)
</p>
</li>
<li><p> AWM - Filter Group (OH)
</p>
</li>
<li><p> AWM - Irrigation Disposal of Wastewater
</p>
</li>
<li><p> AWM - Land Application of Dry and Slurry Manure (TX)
</p>
</li>
<li><p> AWM - Land Application of Municipal Biosolids, winter (OR)
</p>
</li>
<li><p> AWM - Overland Flow Process Treatment of Wastewater
</p>
</li>
<li><p> AWM - Rapid Infiltration Disposal of Wastewater
</p>
</li>
<li><p> AWM - Vegetated Treatment Area (PIA)
</p>
</li>
<li><p> AWM - Waste Field Storage Area (VT)
</p>
</li>
<li><p> BLM - Mechanical Treatment, Shredder
</p>
</li>
<li><p> BLM - Medusahead Invasion Susceptibility
</p>
</li>
<li><p> BLM - Soil Compaction Resistance
</p>
</li>
<li><p> Capping Fill Gravity Septic System (DE)
</p>
</li>
<li><p> CLASS RULE - Depth to any bedrock kind (5 classes) (NPS)
</p>
</li>
<li><p> CPI - Alfalfa Hay, IRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Alfalfa Hay, IRR - Klamath Valley and Basins (OR)
</p>
</li>
<li><p> CPI - Alfalfa Hay, IRR - Snake River Plains (ID)
</p>
</li>
<li><p> CPI - Alfalfa Hay, NIRR- Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Grass Hay, NIRR - Palouse, Northern Rocky Mtns. (WA)
</p>
</li>
<li><p> CPI - Small Grains Productivity Index (AK)
</p>
</li>
<li><p> DHS - Catastrophic Event, Large Animal Mortality, Incinerate
</p>
</li>
<li><p> DHS - Emergency Land Disposal of Milk
</p>
</li>
<li><p> DHS - Site for Composting Facility - Subsurface
</p>
</li>
<li><p> DHS - Suitability for Clay Liner Material
</p>
</li>
<li><p> ENG - Cohesive Soil Liner (MN)
</p>
</li>
<li><p> ENG - Construction Materials - Sand Source (MN)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (CT)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (NY)
</p>
</li>
<li><p> ENG - Construction Materials; Reclamation (DE)
</p>
</li>
<li><p> ENG - Construction Materials; Roadfill
</p>
</li>
<li><p> ENG - Construction Materials; Roadfill (AK)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (NY)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (VT)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (AK)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (DE)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (MI)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (OR)
</p>
</li>
<li><p> ENG - Conventional On-Site Septic Systems (TN)
</p>
</li>
<li><p> ENG - Deep Infiltration Systems
</p>
</li>
<li><p> ENG - Disposal Field Gravity (DE)
</p>
</li>
<li><p> ENG - Dwellings With Basements (OH)
</p>
</li>
<li><p> ENG - Ground-based Solar Arrays, Ballast Anchor Systems
</p>
</li>
<li><p> ENG - Large Animal Disposal, Trench (CT)
</p>
</li>
<li><p> ENG - Lawn, Landscape, Golf Fairway (MI)
</p>
</li>
<li><p> ENG - Lawn, Landscape, Golf Fairway (VT)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Area) (OH)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Trench)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Trench) (AK)
</p>
</li>
<li><p> ENG - Septage Application - Surface (MN)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields - At-Grade (MN)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields - Mound (MN)
</p>
</li>
<li><p> ENG - Septic Tank Leaching Chamber (TX)
</p>
</li>
<li><p> ENG - Septic Tank, Subsurface Drip Irrigation (TX)
</p>
</li>
<li><p> ENG - Shallow Excavations
</p>
</li>
<li><p> ENG - Shallow Infiltration Systems
</p>
</li>
<li><p> ENG - Small Commercial Buildings
</p>
</li>
<li><p> ENG - Soil Potential of Road Salt Applications (CT)
</p>
</li>
<li><p> ENG - Source of Caliche (TX)
</p>
</li>
<li><p> ENG - Stormwater Management / Ponds (NY)
</p>
</li>
<li><p> ENG - Unlined Retention Systems
</p>
</li>
<li><p> Farm and Garden Composting Facility - Surface
</p>
</li>
<li><p> FOR - Biomass Harvest (MA)
</p>
</li>
<li><p> FOR - Black Walnut Suitability Index (KS)
</p>
</li>
<li><p> FOR - Displacement Potential (WA)
</p>
</li>
<li><p> FOR - Drought Vulnerable Soils
</p>
</li>
<li><p> FOR - General Harvest Season (ME)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Deep) (MD)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Surface)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation; Deep (CT)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard (Road/Trail)
</p>
</li>
<li><p> FOR - Potential Fire Damage Hazard
</p>
</li>
<li><p> FOR - Potential Seedling Mortality
</p>
</li>
<li><p> FOR - Potential Seedling Mortality (MI)
</p>
</li>
<li><p> FOR - Potential Windthrow Hazard (ME)
</p>
</li>
<li><p> FOR - Potential Windthrow Hazard (MI)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (ID)
</p>
</li>
<li><p> FOR - Rutting Hazard by Month
</p>
</li>
<li><p> FOR - Windthrow Hazard (WA)
</p>
</li>
<li><p> FOTG - NLI Interp Calculation - (IN)
</p>
</li>
<li><p> Fragile Soil Index
</p>
</li>
<li><p> GRL - Juniper Encroachment Potential (NM)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 20) (NV)
</p>
</li>
<li><p> GRL - Pasture and Hayland SG (OH)
</p>
</li>
<li><p> GRL - Rangeland Prescribed Burning (TX)
</p>
</li>
<li><p> GRL - Rangeland Soil Seed Bank Suitability (NM)
</p>
</li>
<li><p> GRL-FSG-NP-W (MT)
</p>
</li>
<li><p> GRL-SHSI Soil Health Sustainability Index (MT)
</p>
</li>
<li><p> Ground-based Solar Arrays_saturationt(ME)
</p>
</li>
<li><p> Ground-based Solar Arrays_slope(ME)
</p>
</li>
<li><p> Inland Wetlands (CT)
</p>
</li>
<li><p> IRR-restrictive features for irrigation (OH)
</p>
</li>
<li><p> MIL - Excavations for Vehicle Fighting Position (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 1 1-pass wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 2 dry season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 3 50-passes wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 6 1-pass wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 6 dry season (DOD)
</p>
</li>
<li><p> Muscadine Wine Grape Site Desirability (Very Long)
</p>
</li>
<li><p> NCCPI - NCCPI Cotton Submodel (II)
</p>
</li>
<li><p> Permafrost Sensitivity (AK)
</p>
</li>
<li><p> Pressure Dose Capping Fill Septic System (DE)
</p>
</li>
<li><p> REC - Camp Areas (CT)
</p>
</li>
<li><p> REC - Off-Road Motorcycle Trails (CT)
</p>
</li>
<li><p> SAS - CMECS Substrate Class
</p>
</li>
<li><p> SAS - CMECS Substrate Subclass/Group
</p>
</li>
<li><p> SAS - Eelgrass Restoration Suitability
</p>
</li>
<li><p> SAS - Land Utilization of Dredged Materials
</p>
</li>
<li><p> SAS - Northern Quahog (Hard Clam) Habitat Suitability
</p>
</li>
<li><p> Septic System At Grade Shallow Field (alternative) (WV)
</p>
</li>
<li><p> Septic System At-Grade Bed (Alternate) (PA)
</p>
</li>
<li><p> Septic System CO-OP RFS III w/Drip Irrigation (PA)
</p>
</li>
<li><p> Septic System Drip Irrigation (alternative) (WV)
</p>
</li>
<li><p> Septic System Free Access Sand Filterw/Spray Irrigation (PA)
</p>
</li>
<li><p> Septic System Peat Based Option1 w/At-Grade Bed (Alt.) (PA)
</p>
</li>
<li><p> Septic System Spray Irrigation (PA)
</p>
</li>
<li><p> Septic System Steep Slope Sand Mound (Alternate) (PA)
</p>
</li>
<li><p> Shallow Infiltration Systems
</p>
</li>
<li><p> SOH - Organic Matter Depletion Potential, Irrigated (CA)
</p>
</li>
<li><p> SOH - Soil Surface Sealing
</p>
</li>
<li><p> TROP - Plantains Productivity
</p>
</li>
<li><p> URB/REC - Camp Areas (GA)
</p>
</li>
<li><p> URB/REC - Camp Areas (MI)
</p>
</li>
<li><p> URB/REC - Golf Fairways (OH)
</p>
</li>
<li><p> URB/REC - Off-Road Motorcycle Trails
</p>
</li>
<li><p> URB/REC - Paths and Trails (MI)
</p>
</li>
<li><p> URB/REC - Playgrounds (OH)
</p>
</li>
<li><p> Vinifera Wine Grape Site Desirability (Long to Medium)
</p>
</li>
<li><p> WLF - Chufa for Turkey Forage (LA)
</p>
</li>
<li><p> WLF - Food Plots for Upland Wildlife &lt; 2 Acres (TX)
</p>
</li>
<li><p> WLF - Freshwater Wetland Plants (TX)
</p>
</li>
<li><p> WLF - Irrigated Saline Water Wetland Plants (TX)
</p>
</li>
<li><p> WLF - Riparian Herbaceous Plants (TX)
</p>
</li>
<li><p> WLF - Riparian Shrubs, Vines, &amp; Trees (TX)
</p>
</li>
<li><p> WLF - Saline Water Wetland Plants (TX)
</p>
</li>
<li><p> WLF - Upland Mixed Deciduous &amp; Coniferous Trees (TX)
</p>
</li>
<li><p> WMS - Constructing Grassed Waterways (TX)
</p>
</li>
<li><p> WMS - Constructing Terraces and Diversions (OH)
</p>
</li>
<li><p> WMS - Embankments, Dikes, and Levees (VT)
</p>
</li>
<li><p> WMS - Irrigation, Sprinkler (close spaced outlet drops)
</p>
</li>
<li><p> WMS - Irrigation, Sprinkler (general)
</p>
</li>
<li><p> WMS - Pond Reservoir Area (GA)
</p>
</li>
<li><p> WMS-Subsurface Water Management, Installation (ND)
</p>
</li>
<li><p> WMS-Subsurface Water Management, Outflow Quality (ND)
</p>
</li>
<li><p> AGR - Barley Yield (MT)
</p>
</li>
<li><p> AGR - Conventional Tillage (TX)
</p>
</li>
<li><p> AGR - Grape non-irrigated (MO)
</p>
</li>
<li><p> AGR - Industrial Hemp for Fiber and Seed Production
</p>
</li>
<li><p> AGR - Nitrate Leaching Potential, Irrigated (WA)
</p>
</li>
<li><p> AGR - Pasture hayland (MO)
</p>
</li>
<li><p> AGR - Pesticide Loss Potential-Soil Surface Runoff
</p>
</li>
<li><p> AGR - Prime Farmland (TX)
</p>
</li>
<li><p> AGR - Spring Wheat Yield (MT)
</p>
</li>
<li><p> AGR-Agronomic Concerns (ND)
</p>
</li>
<li><p> AGR-Pesticide and Nutrient Leaching Potential, NIRR (ND)
</p>
</li>
<li><p> AGR-Surface Salinity (ND)
</p>
</li>
<li><p> AGR-Water Erosion Potential (ND)
</p>
</li>
<li><p> Alaska Exempt Wetland Potential (AK)
</p>
</li>
<li><p> American Wine Grape Varieties Site Desirability (Short)
</p>
</li>
<li><p> AWM - Irrigation Disposal of Wastewater (MD)
</p>
</li>
<li><p> AWM - Manure and Food Processing Waste (DE)
</p>
</li>
<li><p> AWM - Manure Stacking - Site Evaluation (TX)
</p>
</li>
<li><p> AWM - Phosphorus Management (TX)
</p>
</li>
<li><p> AWM - Slow Rate Process Treatment of Wastewater
</p>
</li>
<li><p> BLM - Pygmy Rabbit Habitat Potential
</p>
</li>
<li><p> BLM - Rangeland Tillage
</p>
</li>
<li><p> BLM - Site Degradation Susceptibility
</p>
</li>
<li><p> CA Prime Farmland (CA)
</p>
</li>
<li><p> CLASS RULE - Depth to root limiting layer (5 classes) (NPS)
</p>
</li>
<li><p> Commodity Crop Productivity Index (Corn) (TN)
</p>
</li>
<li><p> CPI - Alfalfa Hay, NIRR - Palouse, Northern Rocky Mtns. (ID)
</p>
</li>
<li><p> CPI - Barley, NIRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Grass Hay, IRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Grass Hay, NIRR - Palouse, Northern Rocky Mtns. (ID)
</p>
</li>
<li><p> CPI - Potatoes, IRR - Snake River Plains (ID)
</p>
</li>
<li><p> CPI - Small Grains, NIRR - Palouse Prairies (OR)
</p>
</li>
<li><p> CPI - Small Grains, NIRR - Palouse Prairies (WA)
</p>
</li>
<li><p> CPI - Small Grains, NIRR - Snake River Plains (ID)
</p>
</li>
<li><p> CPI - Wheat, NIRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Wild Hay, NIRR - Eastern Idaho Plateaus (ID)
</p>
</li>
<li><p> CPI - Wild Hay, NIRR - Palouse, Northern Rocky Mtns. (ID)
</p>
</li>
<li><p> CPI - Wild Hay, NIRR - Palouse, Northern Rocky Mtns. (WA)
</p>
</li>
<li><p> Deep Infiltration Systems
</p>
</li>
<li><p> DHS - Site for Composting Facility - Surface
</p>
</li>
<li><p> Elevated Sand Mound Septic System (DE)
</p>
</li>
<li><p> ENG - Animal Disposal by Composting (Catastrophic) (WV)
</p>
</li>
<li><p> ENG - Application of Municipal Sludge (TX)
</p>
</li>
<li><p> ENG - Closed-Loop Horizontal Geothermal Heat Pump (CT)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (IN)
</p>
</li>
<li><p> ENG - Construction Materials; Gravel Source (NE)
</p>
</li>
<li><p> ENG - Construction Materials; Reclamation (MD)
</p>
</li>
<li><p> ENG - Construction Materials; Reclamation (MI)
</p>
</li>
<li><p> ENG - Construction Materials; Roadfill (GA)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (CT)
</p>
</li>
<li><p> ENG - Construction Materials; Sand Source (GA)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (ID)
</p>
</li>
<li><p> ENG - Construction Materials; Topsoil (OH)
</p>
</li>
<li><p> ENG - Daily Cover for Landfill (OH)
</p>
</li>
<li><p> ENG - Disposal Field (NJ)
</p>
</li>
<li><p> ENG - Disposal Field Type Inst (NJ)
</p>
</li>
<li><p> ENG - Dwellings W/O Basements
</p>
</li>
<li><p> ENG - Dwellings With Basements
</p>
</li>
<li><p> ENG - Dwellings without Basements (AK)
</p>
</li>
<li><p> ENG - Lawn and Landscape (OH)
</p>
</li>
<li><p> ENG - Lawn, Landscape, Golf Fairway
</p>
</li>
<li><p> ENG - Local Roads and Streets (AK)
</p>
</li>
<li><p> ENG - Local Roads and Streets (GA)
</p>
</li>
<li><p> ENG - On-Site Waste Water Lagoons (MO)
</p>
</li>
<li><p> ENG - Pier Beam Building Foundations (TX)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Area)
</p>
</li>
<li><p> ENG - Sanitary Landfill (Area) (AK)
</p>
</li>
<li><p> ENG - Septage Application - Incorporation or Injection (MN)
</p>
</li>
<li><p> ENG - Septic System; Disinfection, Surface Application (TX)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (FL)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields (OH)
</p>
</li>
<li><p> ENG - Septic Tank Absorption Fields - Trench (MN)
</p>
</li>
<li><p> ENG - Sewage Lagoons (AK)
</p>
</li>
<li><p> ENG - Shallow Excavations (OH)
</p>
</li>
<li><p> ENG - Soil Suitability for SLAMM Marsh Migration (CT)
</p>
</li>
<li><p> ENG - Stormwater Management / Infiltration (NY)
</p>
</li>
<li><p> ENG - Stormwater Management / Wetlands (NY)
</p>
</li>
<li><p> FOR - Black Walnut Suitability (WI)
</p>
</li>
<li><p> FOR - Black Walnut Suitability (WV)
</p>
</li>
<li><p> FOR - Construction Limitations for Haul Roads/Log Landings
</p>
</li>
<li><p> FOR - Displacement Hazard
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (DE)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (ME)
</p>
</li>
<li><p> FOR - Harvest Equipment Operability (MI)
</p>
</li>
<li><p> FOR - Log Landing Suitability (ID)
</p>
</li>
<li><p> FOR - Log Landing Suitability (MI)
</p>
</li>
<li><p> FOR - Log Landing Suitability (OR)
</p>
</li>
<li><p> FOR - Mechanical Planting Suitability (OH)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Surface) (MD)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation (Surface) (OH)
</p>
</li>
<li><p> FOR - Mechanical Site Preparation; Surface (CT)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard (Off-Road/Off-Trail) (MI)
</p>
</li>
<li><p> FOR - Potential Erosion Hazard (Off-Road/Off-Trail) (OH)
</p>
</li>
<li><p> FOR - Potential Seedling Mortality (FL)
</p>
</li>
<li><p> FOR - Potential Seedling Mortality (OH)
</p>
</li>
<li><p> FOR - Road Suitability (Natural Surface) (VT)
</p>
</li>
<li><p> FOR - Soil Rutting Hazard
</p>
</li>
<li><p> FOTG - Indiana Soy Bean Yield Calculation (IN)
</p>
</li>
<li><p> FOTG - Indiana Wheat Yield Calculation (IN)
</p>
</li>
<li><p> FOTG - NLI report Calculation - (IN)
</p>
</li>
<li><p> GRL - Fencing, Post Depth =&lt;24 inches
</p>
</li>
<li><p> GRL - Fencing, Post Depth Less Than 24 inches (TX)
</p>
</li>
<li><p> GRL - Fencing, Post Depth Less Than 36 inches (TX)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 10) (NV)
</p>
</li>
<li><p> GRL - NV range seeding (Wind C = 30) (NV)
</p>
</li>
<li><p> GRL - Rangeland Chaining (TX)
</p>
</li>
<li><p> GRL - Rangeland Disking (TX)
</p>
</li>
<li><p> GRL - Rangeland Dozing/Grubbing (TX)
</p>
</li>
<li><p> GRL - Utah Juniper Encroachment Potential
</p>
</li>
<li><p> GRL - Western Juniper Encroachment Potential (OR)
</p>
</li>
<li><p> Ground-based Solar Arrays_bedrock_slope_anchor(ME)
</p>
</li>
<li><p> Ground-based Solar Arrays_saturation_flooding_Frost(ME)
</p>
</li>
<li><p> Hybrid Wine Grape Varieties Site Desirability (Medium)
</p>
</li>
<li><p> Lined Retention Systems
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 1 dry season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 3 1-pass wet season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 3 dry season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 4 dry season (DOD)
</p>
</li>
<li><p> MIL - Trafficability Veh. Type 5 1-pass wet season (DOD)
</p>
</li>
<li><p> NCCPI - NCCPI Corn Submodel (I)
</p>
</li>
<li><p> NCCPI - NCCPI Small Grains Submodel (II)
</p>
</li>
<li><p> NCCPI - NCCPI Soybeans Submodel (I)
</p>
</li>
<li><p> Peony Flowers Site Suitability (AK)
</p>
</li>
<li><p> Pressure Dose Full Depth Septic System (DE)
</p>
</li>
<li><p> REC - Camp Areas; Primitive (AK)
</p>
</li>
<li><p> REC - Paths and Trails (CT)
</p>
</li>
<li><p> Salinity Risk Index (ND)
</p>
</li>
<li><p> SAS - Eastern Oyster Habitat Restoration Suitability
</p>
</li>
<li><p> SAS - Mooring Anchor - Mushroom
</p>
</li>
<li><p> Septic System CO-OP RFS III w/At-Grade Bed (PA)
</p>
</li>
<li><p> Septic System Free Access Sand Filter w/At-Grade Bed (PA)
</p>
</li>
<li><p> Septic System Modified Subsurface Sand Filter (Alt.) (PA)
</p>
</li>
<li><p> Septic System Shallow In Ground Trench (conventional) (WV)
</p>
</li>
<li><p> Septic System Subsurface Sand Filter Bed (conventional) (PA)
</p>
</li>
<li><p> Septic System Subsurface Sand Filter Trench (standard) (PA)
</p>
</li>
<li><p> SOH - Limitations for Aerobic Soil Organisms
</p>
</li>
<li><p> URB - Concrete Driveways and Sidewalks (TX)
</p>
</li>
<li><p> URB - Dwellings on Concrete Slab (TX)
</p>
</li>
<li><p> URB - Lawns and Ornamental Plantings (TX)
</p>
</li>
<li><p> URB/REC - Paths and Trails
</p>
</li>
<li><p> URB/REC - Paths and Trails (GA)
</p>
</li>
<li><p> URB/REC - Playgrounds (MI)
</p>
</li>
<li><p> Vinifera Wine Grape Site Desirability (Long)
</p>
</li>
<li><p> WLF - Crawfish Aquaculture (TX)
</p>
</li>
<li><p> WLF - Desertic Herbaceous Plants (TX)
</p>
</li>
<li><p> WLF - Gopher Tortoise Burrowing Suitability
</p>
</li>
<li><p> WLF - Grain &amp; Seed Crops for Food and Cover (TX)
</p>
</li>
<li><p> WMS - Constructing Grassed Waterways (OH)
</p>
</li>
<li><p> WMS - Irrigation, Surface (graded)
</p>
</li>
<li><p> WMS - Subsurface Drains - Installation (VT)
</p>
</li>
<li><p> WMS - Subsurface Water Management, System Performance
</p>
</li>
<li><p> WMS - Surface Drains (TX)
</p>
</li>
<li><p> WMS - Surface Irrigation Intake Family (TX)
</p>
</li>
<li><p> Septic System Low Pressure Pipe (alternative) (WV)
</p>
</li>
<li><p> Septic System Mound (alternative) (WV)
</p>
</li>
<li><p> Septic System Peat Based Option2 w/Spray Irrigation (PA)
</p>
</li>
<li><p> Septic System Steep Slope Mound (alternative) (WV)
</p>
</li>
<li><p> SOH - Concentration of Salts- Soil Surface
</p>
</li>
<li><p> SOH - Soil Susceptibility to Compaction
</p>
</li>
<li><p> Soil Habitat for Saprophyte Stage of Coccidioides
</p>
</li>
<li><p> Unlined Retention Systems
</p>
</li>
<li><p> URB - Commercial Metal Bldg; w/Reinforced Concrete Slab (TX)
</p>
</li>
<li><p> URB/REC - Picnic Areas (GA)
</p>
</li>
<li><p> URB/REC - Picnic Areas (MI)
</p>
</li>
<li><p> URB/REC - Picnic Areas (OH)
</p>
</li>
<li><p> Vinifera Wine Grape Site Desirability (Short)
</p>
</li>
<li><p> WLF - Burrowing Mammals &amp; Reptiles (TX)
</p>
</li>
<li><p> WLF - Desert Tortoise (CA)
</p>
</li>
<li><p> WLF - Domestic Grasses &amp; Legumes for Food and Cover (TX)
</p>
</li>
<li><p> WLF - Irrigated Grain &amp; Seed Crops for Food &amp; Cover (TX)
</p>
</li>
<li><p> WMS - Excavated Ponds (Aquifer-fed)
</p>
</li>
<li><p> WMS - Excavated Ponds (Aquifer-fed) (VT)
</p>
</li>
<li><p> WMS - Irrigation, General
</p>
</li>
<li><p> WMS - Irrigation, Micro (above ground)
</p>
</li>
<li><p> WMS - Irrigation, Micro (above ground) (VT)
</p>
</li>
<li><p> WMS - Irrigation, Micro (subsurface drip)
</p>
</li>
<li><p> WMS - Irrigation, Sprinkler (general) (VT)
</p>
</li>
<li><p> WMS - Pond Reservoir Area
</p>
</li>
<li><p> WMS - Pond Reservoir Area (OH)
</p>
</li>
<li><p> WMS - Subsurface Water Management, System Installation
</p>
</li>
<li><p> WMS - Constructing Terraces &amp; Diversions (TX)
</p>
</li>
<li><p> WMS - Drainage (OH)
</p>
</li>
<li><p> WMS - Excavated Ponds (Aquifer-fed) (OH)
</p>
</li>
<li><p> WMS - Grape Production with Drip Irrigation (TX)
</p>
</li>
<li><p> WMS - Irrigation, Micro (subsurface drip) (VT)
</p>
</li>
<li><p> WMS - Irrigation, Surface (level)
</p>
</li>
<li><p> WMS - Pond Reservoir Area (MI)
</p>
</li>
<li><p> WMS - Pond Reservoir Area (VT)
</p>
</li>
<li><p> WMS - Sprinkler Irrigation (MT)
</p>
</li>
<li><p> WMS - Sprinkler Irrigation RDC (IL)
</p>
</li>
<li><p> WMS - Subsurface Drains - Performance (VT)
</p>
</li>
<li><p> WMS - Subsurface Water Management, Outflow Quality
</p>
</li>
<li><p> WMS - Surface Water Management, System
</p>
</li>
<li><p> WMS-Subsurface Water Management, Performance (ND)
</p>
</li></ul>




<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek, Chad Ferguson, Andrew Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


  # get two forestry interpretations for CA630
  get_SDA_interpretation(c("FOR - Potential Seedling Mortality",
                           "FOR - Road Suitability (Natural Surface)"),
                         method = "Dominant Condition",
                         areasymbols = "CA630")

</code></pre>

<hr>
<h2 id='get_SDA_metrics'>Get Soil Data Access, Lab Data Mart and Web Soil Survey Usage Metrics</h2><span id='topic+get_SDA_metrics'></span>

<h3>Description</h3>

<p>Obtain pre-calculated tabular reports of usage, activities, areas of interest (AOI), exports, ecological sites, ratings and reports for specific areas, times and intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_metrics(query_name, query_frequency, query_year, state = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_metrics_+3A_query_name">query_name</code></td>
<td>
<p>One or more of: <code>'LDM_Usage'</code>, <code>'SDA_Usage'</code>, <code>'wss_ActivityCounts'</code>, <code>'wss_AOIDefinition'</code>, <code>'wss_AOISizeRange'</code>, <code>'wss_ExportCounts'</code>, <code>'wss_PrintableOutput'</code>, <code>'wss_top100AOIs'</code>, <code>'wss_top100Ecologicalsites'</code>, <code>'wss_top100ratings'</code>, <code>'wss_top100reports'</code></p>
</td></tr>
<tr><td><code id="get_SDA_metrics_+3A_query_frequency">query_frequency</code></td>
<td>
<p>One or more of: <code>'M'</code>, <code>'CY'</code>, <code>'FY'</code></p>
</td></tr>
<tr><td><code id="get_SDA_metrics_+3A_query_year">query_year</code></td>
<td>
<p>Integer. One or more years e.g. <code>2020:2021</code></p>
</td></tr>
<tr><td><code id="get_SDA_metrics_+3A_state">state</code></td>
<td>
<p>Optional: State abbreviation; Default: <code>NULL</code> uses <code>"xnational"</code> for all states.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code> containing query results
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
get_SDA_metrics('SDA_Usage', 'CY', 2019:2021)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_SDA_muaggatt'>Get map unit aggregate attribute information from Soil Data Access</h2><span id='topic+get_SDA_muaggatt'></span>

<h3>Description</h3>

<p>Get map unit aggregate attribute information from Soil Data Access
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_muaggatt(
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  query_string = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_muaggatt_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_muaggatt_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_muaggatt_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code>, <code>mapunit</code>, or <code>muaggatt</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code></p>
</td></tr>
<tr><td><code id="get_SDA_muaggatt_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_muaggatt_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek, Chad Ferguson, Andrew Brown
</p>

<hr>
<h2 id='get_SDA_pmgroupname'>Get map unit parent material group information from Soil Data Access</h2><span id='topic+get_SDA_pmgroupname'></span>

<h3>Description</h3>

<p>Get map unit parent material group information from Soil Data Access
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_pmgroupname(
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  method = "DOMINANT COMPONENT",
  simplify = TRUE,
  miscellaneous_areas = FALSE,
  query_string = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_pmgroupname_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code>, <code>mapunit</code>, <code>component</code>, or <code>copmgrp</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code></p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_method">method</code></td>
<td>
<p>One of: <code>"Dominant Component"</code>, <code>"Dominant Condition"</code>, <code>"None"</code></p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_simplify">simplify</code></td>
<td>
<p>logical; group into generalized parent material groups? Default <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_miscellaneous_areas">miscellaneous_areas</code></td>
<td>
<p>Include miscellaneous areas  (non-soil components) in results? Default: <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_pmgroupname_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Default <code>method</code> is <code>"Dominant Component"</code> to get the dominant component (highest percentage). Use <code>"Dominant Condition"</code> or dominant parent material condition (similar conditions aggregated across components). Use <code>"None"</code> for no aggregation (one record per component).
</p>


<h3>Value</h3>

<p>a data.frame
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek, Chad Ferguson, Andrew Brown
</p>

<hr>
<h2 id='get_SDA_property'>Get map unit properties from Soil Data Access</h2><span id='topic+get_SDA_property'></span>

<h3>Description</h3>

<p>Get map unit properties from Soil Data Access
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDA_property(
  property,
  method = c("Dominant Component (Category)", "Weighted Average", "Min/Max",
    "Dominant Component (Numeric)", "Dominant Condition", "None"),
  areasymbols = NULL,
  mukeys = NULL,
  WHERE = NULL,
  top_depth = 0,
  bottom_depth = 200,
  FUN = NULL,
  include_minors = FALSE,
  miscellaneous_areas = FALSE,
  query_string = FALSE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDA_property_+3A_property">property</code></td>
<td>
<p>character vector of labels from property dictionary tables (see details) OR physical column names from <code>component</code> or <code>chorizon</code> table.</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_method">method</code></td>
<td>
<p>one of: &quot;Dominant Component (Category)&quot;, &quot;Dominant Component (Numeric)&quot;, &quot;Weighted Average&quot;, &quot;MIN&quot;, &quot;MAX&quot;, &quot;Dominant Condition&quot;, or &quot;None&quot;. If &quot;None&quot; is selected, the number of rows returned will depend on whether a component or horizon level property was selected, otherwise the result will be 1:1 with the number of map units.</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_areasymbols">areasymbols</code></td>
<td>
<p>vector of soil survey area symbols</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_mukeys">mukeys</code></td>
<td>
<p>vector of map unit keys</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_where">WHERE</code></td>
<td>
<p>character containing SQL WHERE clause specified in terms of fields in <code>legend</code> or <code>mapunit</code> tables, used in lieu of <code>mukeys</code> or <code>areasymbols</code>. With aggregation method <code>"NONE"</code> the WHERE clause may additionally contain logic for columns from the <code>component</code> and <code>chorizon</code> table.</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_top_depth">top_depth</code></td>
<td>
<p>Default: <code>0</code> (centimeters); a numeric value for upper boundary (top depth) used only for method=&quot;Weighted Average&quot;, &quot;Dominant Component (Numeric)&quot;, and &quot;MIN/MAX&quot;</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_bottom_depth">bottom_depth</code></td>
<td>
<p>Default: <code>200</code> (centimeters); a numeric value for lower boundary (bottom depth) used only for method=&quot;Weighted Average&quot;, &quot;Dominant Component (Numeric)&quot;, and &quot;MIN/MAX&quot;</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_fun">FUN</code></td>
<td>
<p>Optional: character representing SQL aggregation function either &quot;MIN&quot; or &quot;MAX&quot; used only for method=&quot;min/max&quot;; this argument is calculated internally if you specify <code>method="MIN"</code> or <code>method="MAX"</code></p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_include_minors">include_minors</code></td>
<td>
<p>Include minor components in &quot;Weighted Average&quot; or &quot;MIN/MAX&quot; results? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_miscellaneous_areas">miscellaneous_areas</code></td>
<td>
<p>Include miscellaneous areas  (non-soil components) in results? Default: <code>FALSE</code>. Now works with all <code>method</code> types)</p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="get_SDA_property_+3A_dsn">dsn</code></td>
<td>
<p>Path to local SQLite database or a DBIConnection object. If <code>NULL</code> (default) use Soil Data Access API via <code>SDA_query()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The <code>property</code> argument refers to one of the property names or columns specified in the tables below. Note that <code>property</code> can be specified as either a character vector of labeled properties, such as <code>"Bulk Density 0.33 bar H2O - Rep Value"</code>, OR physical column names such as <code>"dbthirdbar_r"</code>. To get &quot;low&quot; and &quot;high&quot; values for a particular property, replace the <code style="white-space: pre;">&#8288;_r&#8288;</code> with <code style="white-space: pre;">&#8288;_l&#8288;</code> or <code style="white-space: pre;">&#8288;_h&#8288;</code> in the physical column name; for example <code>property = c("dbthirdbar_l","dbthirdbar_r","dbthirdbar_h")</code>. You can view exhaustive lists of component and component horizon level properties in the Soil Data Access <a href="https://sdmdataaccess.sc.egov.usda.gov/documents/TablesAndColumnsReport.pdf">&quot;Tables and Columns Report&quot;</a>.
</p>


<h4>Selected Component-level Properties</h4>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Property (Component)</strong> </td><td style="text-align: left;"> <strong>Column</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   Range Production - Favorable Year </td><td style="text-align: left;"> rsprod_h </td>
</tr>
<tr>
 <td style="text-align: left;">
   Range Production - Normal Year </td><td style="text-align: left;"> rsprod_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Range Production - Unfavorable Year </td><td style="text-align: left;"> rsprod_l </td>
</tr>
<tr>
 <td style="text-align: left;">
   Corrosion of Steel </td><td style="text-align: left;"> corsteel </td>
</tr>
<tr>
 <td style="text-align: left;">
   Corrosion of Concrete </td><td style="text-align: left;"> corcon </td>
</tr>
<tr>
 <td style="text-align: left;">
   Drainage Class </td><td style="text-align: left;"> drainagecl </td>
</tr>
<tr>
 <td style="text-align: left;">
   Hydrologic Group </td><td style="text-align: left;"> hydgrp </td>
</tr>
<tr>
 <td style="text-align: left;">
   Taxonomic Class Name </td><td style="text-align: left;"> taxclname </td>
</tr>
<tr>
 <td style="text-align: left;">
   Taxonomic Order </td><td style="text-align: left;"> taxorder </td>
</tr>
<tr>
 <td style="text-align: left;">
   Taxonomic Suborder </td><td style="text-align: left;"> taxsuborder </td>
</tr>
<tr>
 <td style="text-align: left;">
   Taxonomic Temperature Regime </td><td style="text-align: left;"> taxtempregime </td>
</tr>
<tr>
 <td style="text-align: left;">
   Wind Erodibility Group </td><td style="text-align: left;"> weg </td>
</tr>
<tr>
 <td style="text-align: left;">
   Wind Erodibility Index </td><td style="text-align: left;"> wei </td>
</tr>
<tr>
 <td style="text-align: left;">
   t Factor </td><td style="text-align: left;"> tfact </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h4>Selected Horizon-level Properties</h4>


<table>
<tr>
 <td style="text-align: left;">
   <strong>Property (Horizon)</strong> </td><td style="text-align: left;"> <strong>Column</strong> </td>
</tr>
<tr>
 <td style="text-align: left;">
   0.1 bar H2O - Rep Value </td><td style="text-align: left;"> wtenthbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   0.33 bar H2O - Rep Value </td><td style="text-align: left;"> wthirdbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   15 bar H2O - Rep Value </td><td style="text-align: left;"> wfifteenbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Available Water Capacity - Rep Value </td><td style="text-align: left;"> awc_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bray 1 Phosphate - Rep Value </td><td style="text-align: left;"> pbray1_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bulk Density 0.1 bar H2O - Rep Value </td><td style="text-align: left;"> dbtenthbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bulk Density 0.33 bar H2O - Rep Value </td><td style="text-align: left;"> dbthirdbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bulk Density 15 bar H2O - Rep Value </td><td style="text-align: left;"> dbfifteenbar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Bulk Density oven dry - Rep Value </td><td style="text-align: left;"> dbovendry_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   CaCO3 Clay - Rep Value </td><td style="text-align: left;"> claysizedcarb_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Calcium Carbonate - Rep Value </td><td style="text-align: left;"> caco3_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Cation Exchange Capacity - Rep Value </td><td style="text-align: left;"> cec7_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Coarse Sand - Rep Value </td><td style="text-align: left;"> sandco_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Coarse Silt - Rep Value </td><td style="text-align: left;"> siltco_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Effective Cation Exchange Capacity - Rep Value </td><td style="text-align: left;"> ecec_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Electrial Conductivity 1:5 by volume - Rep Value </td><td style="text-align: left;"> ec15_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Electrical Conductivity - Rep Value </td><td style="text-align: left;"> ec_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Exchangeable Sodium Percentage - Rep Value </td><td style="text-align: left;"> esp_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Extract Aluminum - Rep Value </td><td style="text-align: left;"> extral_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Extractable Acidity - Rep Value </td><td style="text-align: left;"> extracid_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Fine Sand - Rep Value </td><td style="text-align: left;"> sandfine_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Fine Silt - Rep Value </td><td style="text-align: left;"> siltfine_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Free Iron - Rep Value </td><td style="text-align: left;"> freeiron_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Gypsum - Rep Value </td><td style="text-align: left;"> gypsum_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Kf </td><td style="text-align: left;"> kffact </td>
</tr>
<tr>
 <td style="text-align: left;">
   Ki </td><td style="text-align: left;"> kifact </td>
</tr>
<tr>
 <td style="text-align: left;">
   Kr </td><td style="text-align: left;"> krfact </td>
</tr>
<tr>
 <td style="text-align: left;">
   Kw </td><td style="text-align: left;"> kwfact </td>
</tr>
<tr>
 <td style="text-align: left;">
   LEP - Rep Value </td><td style="text-align: left;"> lep_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Liquid Limit - Rep Value </td><td style="text-align: left;"> ll_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Medium Sand - Rep Value </td><td style="text-align: left;"> sandmed_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Organic Matter - Rep Value </td><td style="text-align: left;"> om_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Oxalate Aluminum - Rep Value </td><td style="text-align: left;"> aloxalate_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Oxalate Iron - Rep Value </td><td style="text-align: left;"> feoxalate_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Oxalate Phosphate - Rep Value </td><td style="text-align: left;"> poxalate_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Plasticity Index - Rep Value </td><td style="text-align: left;"> pi_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Rock Fragments 3 - 10 inches - Rep Value </td><td style="text-align: left;"> frag3to10_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Rock Fragments &gt; 10 inches - Rep Value </td><td style="text-align: left;"> fraggt10_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Rubbed Fiber % - Rep Value </td><td style="text-align: left;"> fiberrubbedpct_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Satiated H2O - Rep Value </td><td style="text-align: left;"> wsatiated_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Saturated Hydraulic Conductivity - Rep Value </td><td style="text-align: left;"> ksat_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Sodium Adsorption Ratio - Rep Value </td><td style="text-align: left;"> sar_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Sum of Bases - Rep Value </td><td style="text-align: left;"> sumbases_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Total Clay - Rep Value </td><td style="text-align: left;"> claytotal_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Total Phosphate - Rep Value </td><td style="text-align: left;"> ptotal_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Total Sand - Rep Value </td><td style="text-align: left;"> sandtotal_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Total Silt - Rep Value </td><td style="text-align: left;"> silttotal_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Unrubbed Fiber % - Rep Value </td><td style="text-align: left;"> fiberunrubbedpct_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Very Coarse Sand - Rep Value </td><td style="text-align: left;"> sandvc_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Very Fine Sand - Rep Value </td><td style="text-align: left;"> sandvf_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   Water Soluble Phosphate - Rep Value </td><td style="text-align: left;"> ph2osoluble_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   no. 10 sieve - Rep Value </td><td style="text-align: left;"> sieveno10_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   no. 200 sieve - Rep Value </td><td style="text-align: left;"> sieveno200_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   no. 4 sieve - Rep Value </td><td style="text-align: left;"> sieveno4_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   no. 40 sieve - Rep Value </td><td style="text-align: left;"> sieveno40_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   pH .01M CaCl2 - Rep Value </td><td style="text-align: left;"> ph01mcacl2_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   pH 1:1 water - Rep Value </td><td style="text-align: left;"> ph1to1h2o_r </td>
</tr>
<tr>
 <td style="text-align: left;">
   pH Oxidized - Rep Value </td><td style="text-align: left;"> phoxidized_r </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>




<h3>Value</h3>

<p>a data.frame with result
</p>


<h3>Author(s)</h3>

<p>Jason Nemecek, Chad Ferguson, Andrew Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>



 # get 1/3 bar bulk density [0,25] centimeter depth weighted average from dominant component
 get_SDA_property(property = c("dbthirdbar_l","dbthirdbar_r","dbthirdbar_h"),
                  method = "Dominant Component (Numeric)",
                  areasymbols = "CA630",
                  top_depth = 0,
                  bottom_depth = 25)


</code></pre>

<hr>
<h2 id='get_SDV_legend_elements'>Get Soil Data Viewer Attribute Information</h2><span id='topic+get_SDV_legend_elements'></span>

<h3>Description</h3>

<p>Get Soil Data Viewer Attribute Information
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SDV_legend_elements(
  WHERE,
  alpha = 255,
  notratedcolor = rgb(1, 1, 1, 0),
  simplify = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SDV_legend_elements_+3A_where">WHERE</code></td>
<td>
<p>WHERE clause for query of Soil Data Access <code>sdvattribute</code> table</p>
</td></tr>
<tr><td><code id="get_SDV_legend_elements_+3A_alpha">alpha</code></td>
<td>
<p>transparency value applied in calculation of hexadecimal color. Default: <code>255</code> (opaque).</p>
</td></tr>
<tr><td><code id="get_SDV_legend_elements_+3A_notratedcolor">notratedcolor</code></td>
<td>
<p>Used to add 'Not rated' color entries where applicable. Default: <code>"#FFFFFF00"</code> (transparent white).</p>
</td></tr>
<tr><td><code id="get_SDV_legend_elements_+3A_simplify">simplify</code></td>
<td>
<p>Return a data.frame when <code>WHERE</code> is length 1? Return a list with 1 element per legend when <code>WHERE</code> is length &gt; <code>1</code>? Default: <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with a data.frame element for each element of <code>where</code> containing <code>"attributekey"</code>, <code>"attributename"</code>, <code>"attributetype"</code>, <code>"attributetablename"</code>, <code>"attributecolumnname"</code>, <code>"attributedescription"</code>, <code>"nasisrulename"</code>, <code>"label"</code>, <code>"order"</code>, <code>"value"</code>, <code>"lower_value"</code>, <code>"upper_value"</code>,<code>"red"</code>, <code>"green"</code>, <code>"blue"</code> and <code>"hex"</code> columns.
</p>

<hr>
<h2 id='get_site_data_from_NASIS_db'>Get Site Data from a local NASIS Database</h2><span id='topic+get_site_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get site-level data from a local NASIS database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_site_data_from_NASIS_db(
  SS = TRUE,
  nullFragsAreZero = TRUE,
  stringsAsFactors = NULL,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_site_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>fetch data from Selected Set in NASIS or from the entire local
database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_site_data_from_NASIS_db_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should surface fragment cover percentages of NULL be interpreted as 0? (default: TRUE)</p>
</td></tr>
<tr><td><code id="get_site_data_from_NASIS_db_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_site_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>When multiple &quot;site bedrock&quot; entries are present, only the shallowest is
returned by this function.
</p>


<h3>Value</h3>

<p>A data.frame
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_NASIS_db">get_hz_data_from_NASIS_db</a></code>
</p>

<hr>
<h2 id='get_site_data_from_pedon_db'>Get Site Data from a PedonPC Database</h2><span id='topic+get_site_data_from_pedon_db'></span>

<h3>Description</h3>

<p>Get site-level data from a PedonPC database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_site_data_from_pedon_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_site_data_from_pedon_db_+3A_dsn">dsn</code></td>
<td>
<p>The path to a 'pedon.mdb' database.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette and Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>,
<code><a href="#topic+get_veg_from_AK_Site">get_veg_from_AK_Site</a></code>,
</p>

<hr>
<h2 id='get_soilseries_from_NASIS'>Get records from the Series Classification (SC) database</h2><span id='topic+get_soilseries_from_NASIS'></span><span id='topic+get_soilseries_from_NASISWebReport'></span><span id='topic+get_competing_soilseries_from_NASIS'></span>

<h3>Description</h3>

<p>These functions return records from the Series Classification (SC) database, either
from the local NASIS database (all series) or via web report (named series
only).
</p>
<p><code style="white-space: pre;">&#8288;get_competing_soilseries_from_NASIS():&#8288;</code> Get Soil Series from NASIS Matching Taxonomic Class Name
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_soilseries_from_NASIS(
  stringsAsFactors = NULL,
  dsn = NULL,
  delimiter = " over "
)

get_soilseries_from_NASISWebReport(soils, stringsAsFactors = NULL)

get_competing_soilseries_from_NASIS(x, what = "taxclname", dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_soilseries_from_NASIS_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="get_soilseries_from_NASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: <code>NULL</code></p>
</td></tr>
<tr><td><code id="get_soilseries_from_NASIS_+3A_delimiter">delimiter</code></td>
<td>
<p><em>character</em>. Used to collapse <code>taxminalogy</code> records where multiple values are used to describe strongly contrasting control sections. Default <code>" over "</code> creates combination mineralogy classes as they would be used in the family name.</p>
</td></tr>
<tr><td><code id="get_soilseries_from_NASIS_+3A_soils">soils</code></td>
<td>
<p>A vector of soil series names</p>
</td></tr>
<tr><td><code id="get_soilseries_from_NASIS_+3A_x">x</code></td>
<td>
<p>Taxonomic Class Name (or other field specified by <code>what</code>) to match, use <code style="white-space: pre;">&#8288;%&#8288;</code> for wildcard</p>
</td></tr>
<tr><td><code id="get_soilseries_from_NASIS_+3A_what">what</code></td>
<td>
<p>Column name to match <code>x</code> against, default: <code>'taxclname'</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>data.frame</code>
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>

<hr>
<h2 id='get_SRI'>Get Soil Inventory Resource (SRI) for USFS Region 6</h2><span id='topic+get_SRI'></span>

<h3>Description</h3>

<p>This function calls ECOSHARE (zip files) to get Soil Inventory Resource (SRI) data for USFS Region 6. These
datasets contain both spatial and non-spatial data in the form of a File Geodatabase (GDB).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SRI(gdb, layers = "MapUnits", quiet = FALSE, simplify = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SRI_+3A_gdb">gdb</code></td>
<td>
<p>A <code>character</code> of the GDB, e.g. <code>'Deschutes'</code>.</p>
</td></tr>
<tr><td><code id="get_SRI_+3A_layers">layers</code></td>
<td>
<p>A <code>character</code> of the layer(s) within the GDB, e.g. <code>'MapUnits'</code> (default).</p>
</td></tr>
<tr><td><code id="get_SRI_+3A_quiet">quiet</code></td>
<td>
<p>A <code>logical</code>; suppress info on name, driver, size and spatial reference, or signaling no or multiple layers.</p>
</td></tr>
<tr><td><code id="get_SRI_+3A_simplify">simplify</code></td>
<td>
<p>A <code>logical</code>; whether to return a simplified list (<code>data.frame</code> or <code>sf</code>) if length(layers) == 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Due to the fact that many Region 6 Forests do not have NRCS SSURGO surveys (at a scale of 1:24,000, these are the highest-resolution soils data generally available), Region 6 initiated a project in 2012 to bring these legacy SRI soils data into digital databases to facilitate their use in regional planning activities.  The datasets available on this page are the results of that effort.
</p>
<p>The SRI were originally compiled in 20 volumes, with the original year of publication ranging from 1969 to 1979. The Gifford-Pinchot SRI was redone following the eruption of Mt Saint Helens, and that version was published in 1992. The Olympic NF also produced two versions, the original version being published in 1969, with an update in 1982. The Colville National Forest was the only Region 6 forest that did not compile a SRI.
</p>
<p>The data are organized into one single regional GDB, together with twenty individual forest-level GDBs.  The regional database contains polygons from all twenty SRIs together with a common set of attributes for the two or three soil layers delineated in the individual mapping unit descriptions, such as texture, depth, color, rock content, etc.  In general, the regional database contains physical soil attributes that could be compiled more or less completely and consistently across all forests. The individual forest-level databases contain the polygons for each individual SRI, together with various tables of management interpretations and laboratory data, together with a variety of miscellaneous tables.  The information contained in these forest-level databases varies widely from forest to forest, which is why they were not merged into a regional view.  Full metadata are included with each database, and scans of the original SRI volumes are provided for reference as well.  A Forest Service General Technical Report that fully describes the available data is currently in preparation.
</p>
<p>The GDB's currently available:
</p>

<ul>
<li>  <p><strong>Region6</strong>
</p>
</li>
<li>  <p><strong>Deschutes</strong>
</p>
</li>
<li> <p><strong>Fremont</strong>
</p>
</li>
<li> <p><strong>GiffordPinchot</strong>
</p>
</li>
<li> <p><strong>Malheur</strong>
</p>
</li>
<li> <p><strong>MtBaker</strong>
</p>
</li>
<li>  <p><strong>MtHood</strong>
</p>
</li>
<li>  <p><strong>Ochoco</strong>
</p>
</li>
<li> <p><strong>Okanogan</strong>
</p>
</li>
<li> <p><strong>Olympic</strong>
</p>
</li>
<li> <p><strong>RogueRiver</strong>
</p>
</li>
<li> <p><strong>Siskiyou</strong>
</p>
</li>
<li>  <p><strong>Siuslaw</strong>
</p>
</li>
<li> <p><strong>Umatilla</strong>
</p>
</li>
<li> <p><strong>Umpqua</strong>
</p>
</li>
<li> <p><strong>WallowaWhitman</strong>
</p>
</li>
<li>  <p><strong>Wenatchee</strong>
</p>
</li>
<li> <p><strong>Willamette</strong>
</p>
</li>
<li> <p><strong>Winema</strong>
</p>
</li></ul>



<h3>Value</h3>

<p>An <code>sf</code> or <code>data.frame</code> object.
</p>


<h3>Note</h3>

<p>Please use <code><a href="#topic+get_SRI_layers">get_SRI_layers</a></code> to get the layer id information needed for the layer argument. This will
help with joining <code>sf</code> and <code>data.frame</code> objects.
</p>


<h3>Author(s)</h3>

<p>Josh Erickson
</p>


<h3>See Also</h3>

<p><code>get_SRI_layers()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 

# get Deschutes SRI
sri_deschutes &lt;- get_SRI('Deschutes')

# get multiple layers in a list

sri_deschutes_multiple &lt;- get_SRI(gdb = 'Deschutes',
layers = c('MapUnits', 'ErosionAndHydro', 'SampleSites_MaterialsTesting'))


## End(Not run)


</code></pre>

<hr>
<h2 id='get_SRI_layers'>Get SRI Layers</h2><span id='topic+get_SRI_layers'></span>

<h3>Description</h3>

<p>Get SRI Layers
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_SRI_layers(gdb)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_SRI_layers_+3A_gdb">gdb</code></td>
<td>
<p>A <code>character</code> of the GDB, e.g. <code>'Deschutes'</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of metadata about the GDB
</p>


<h3>Note</h3>

<p>Refer to <code><a href="#topic+get_SRI">get_SRI</a></code> for information on File Geodatabase (GDB) availability.
</p>


<h3>Author(s)</h3>

<p>Josh Erickson
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
sri_layers &lt;- get_SRI_layers('Willamette')

## End(Not run)

</code></pre>

<hr>
<h2 id='get_text_notes_from_NASIS_db'>Get text note data from a local NASIS Database</h2><span id='topic+get_text_notes_from_NASIS_db'></span><span id='topic+get_mutext_from_NASIS_db'></span><span id='topic+get_cotext_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get text note data from a local NASIS Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_text_notes_from_NASIS_db(SS = TRUE, fixLineEndings = TRUE, dsn = NULL)

get_mutext_from_NASIS_db(SS = TRUE, fixLineEndings = TRUE, dsn = NULL)

get_cotext_from_NASIS_db(SS = TRUE, fixLineEndings = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_text_notes_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>get data from the currently loaded Selected Set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_text_notes_from_NASIS_db_+3A_fixlineendings">fixLineEndings</code></td>
<td>
<p>convert line endings from <code style="white-space: pre;">&#8288;\r\n&#8288;</code> to <code style="white-space: pre;">&#8288;\n&#8288;</code></p>
</td></tr>
<tr><td><code id="get_text_notes_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> with the results.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette and Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>,
<code><a href="#topic+get_site_data_from_pedon_db">get_site_data_from_pedon_db</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
 # query text note data
 t &lt;- try(get_text_notes_from_NASIS_db())

 # show contents text note data, includes: siteobs, site, pedon, horizon level text notes data.
 str(t)

 # view text categories for site text notes
 if(!inherits(t, 'try-error')) {
  table(t$site_text$textcat)
 }
}


</code></pre>

<hr>
<h2 id='get_veg_data_from_NASIS_db'>Get vegetation data from a local NASIS Database</h2><span id='topic+get_veg_data_from_NASIS_db'></span>

<h3>Description</h3>

<p>Get vegetation data from a local NASIS Database. Result includes two data.frames corresponding to the &quot;Plot Plant Inventory&quot; and &quot;Vegetation Transect&quot; child tables of &quot;Vegetation Plot&quot;.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_data_from_NASIS_db(SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_data_from_NASIS_db_+3A_ss">SS</code></td>
<td>
<p>get data from the currently loaded Selected Set in NASIS or from
the entire local database (default: <code>TRUE</code>)</p>
</td></tr>
<tr><td><code id="get_veg_data_from_NASIS_db_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of data.frame
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin and Dylan E. Beaudette
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
 # query text note data
 v &lt;- try(get_veg_from_NASIS_db())

 # show contents veg data returned
 str(v)
}


</code></pre>

<hr>
<h2 id='get_veg_from_AK_Site'>Get Vegetation Data from an AK Site Database</h2><span id='topic+get_veg_from_AK_Site'></span>

<h3>Description</h3>

<p>Get Vegetation Data from an AK Site Database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_from_AK_Site(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_from_AK_Site_+3A_dsn">dsn</code></td>
<td>
<p>file path the the AK Site access database</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with vegetation data in long format, linked to site ID.
</p>


<h3>Author(s)</h3>

<p>Dylan E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_hz_data_from_pedon_db">get_hz_data_from_pedon_db</a></code>,
<code><a href="#topic+get_site_data_from_pedon_db">get_site_data_from_pedon_db</a></code>
</p>

<hr>
<h2 id='get_veg_from_MT_veg_db'>Get Site and Plot-level Data from a Montana RangeDB database</h2><span id='topic+get_veg_from_MT_veg_db'></span>

<h3>Description</h3>

<p>Get Site and Plot-level data from a Montana RangeDB database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_from_MT_veg_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_from_MT_veg_db_+3A_dsn">dsn</code></td>
<td>
<p>The name of the Montana RangeDB front-end database connection
(see details).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_veg_species_from_MT_veg_db">get_veg_species_from_MT_veg_db</a></code>,
<code><a href="#topic+get_veg_other_from_MT_veg_db">get_veg_other_from_MT_veg_db</a></code>
</p>

<hr>
<h2 id='get_veg_from_NPS_PLOTS_db'>Get Vegetation Data from an NPS PLOTS Database</h2><span id='topic+get_veg_from_NPS_PLOTS_db'></span>

<h3>Description</h3>

<p>Used to extract species, stratum, and cover vegetation data from a backend
NPS PLOTS Database.  Currently works for any Microsoft Access database with
an .mdb file format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_from_NPS_PLOTS_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_from_NPS_PLOTS_db_+3A_dsn">dsn</code></td>
<td>
<p>file path to the NPS PLOTS access database on your system.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame with vegetation data in a long format with linkage to
NRCS soil pedon data via the site_id key field.
</p>


<h3>Note</h3>

<p>This function currently only works on Windows.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin
</p>

<hr>
<h2 id='get_veg_other_from_MT_veg_db'>Get cover composition data from a Montana RangeDB database</h2><span id='topic+get_veg_other_from_MT_veg_db'></span>

<h3>Description</h3>

<p>Get cover composition data from a Montana RangeDB database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_other_from_MT_veg_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_other_from_MT_veg_db_+3A_dsn">dsn</code></td>
<td>
<p>The name of the Montana RangeDB front-end database connection
(see details).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_veg_from_MT_veg_db">get_veg_from_MT_veg_db</a></code>,
<code><a href="#topic+get_veg_species_from_MT_veg_db">get_veg_species_from_MT_veg_db</a></code>
</p>

<hr>
<h2 id='get_veg_species_from_MT_veg_db'>Get species-level Data from a Montana RangeDB database</h2><span id='topic+get_veg_species_from_MT_veg_db'></span>

<h3>Description</h3>

<p>Get species-level data from a Montana RangeDB database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_veg_species_from_MT_veg_db(dsn)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_veg_species_from_MT_veg_db_+3A_dsn">dsn</code></td>
<td>
<p>The name of the Montana RangeDB front-end database connection
(see details).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame.
</p>


<h3>Author(s)</h3>

<p>Jay M. Skovlin
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get_veg_from_MT_veg_db">get_veg_from_MT_veg_db</a></code>,
<code><a href="#topic+get_veg_other_from_MT_veg_db">get_veg_other_from_MT_veg_db</a></code>
</p>

<hr>
<h2 id='getHzErrorsNASIS'>Get Logic Errors in NASIS/PedonPC Pedon Horizon</h2><span id='topic+getHzErrorsNASIS'></span>

<h3>Description</h3>

<p>Get Logic Errors in NASIS/PedonPC Pedon Horizon
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getHzErrorsNASIS(strict = TRUE, SS = TRUE, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getHzErrorsNASIS_+3A_strict">strict</code></td>
<td>
<p>how strict should horizon boundaries be checked for
consistency: TRUE=more | FALSE=less</p>
</td></tr>
<tr><td><code id="getHzErrorsNASIS_+3A_ss">SS</code></td>
<td>
<p>fetch data from the currently loaded selected set in NASIS or from
the entire local database (default: TRUE)</p>
</td></tr>
<tr><td><code id="getHzErrorsNASIS_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data.frame containing problematic records with columns:
'peiid','pedon_id','hzdept','hzdepb','hzname'
</p>

<hr>
<h2 id='ISSR800.wcs'>Get 800m gridded soil properties from SoilWeb ISSR-800 Web Coverage Service (WCS)</h2><span id='topic+ISSR800.wcs'></span>

<h3>Description</h3>

<p>Intermediate-scale gridded (800m) soil property and interpretation maps from aggregated SSURGO and STATSGO data. These maps were developed by USDA-NRCS-SPSD staff in collaboration with UCD-LAWR. Originally for educational use and <a href="https://casoilresource.lawr.ucdavis.edu/soil-properties/">interactive thematic maps</a>, these data are a suitable alternative to gridded STATSGO-derived thematic soil maps. The full size grids can be <a href="https://casoilresource.lawr.ucdavis.edu/soil-properties/download.php">downloaded here</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ISSR800.wcs(aoi, var, res = 800, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ISSR800.wcs_+3A_aoi">aoi</code></td>
<td>
<p>area of interest (AOI) defined using a <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code> or <code>bbox</code> object, OR a <code>list</code>, see details</p>
</td></tr>
<tr><td><code id="ISSR800.wcs_+3A_var">var</code></td>
<td>
<p>ISSR-800 grid name (case insensitive), see details</p>
</td></tr>
<tr><td><code id="ISSR800.wcs_+3A_res">res</code></td>
<td>
<p>grid resolution, units of meters. The native resolution of ISSR-800 grids (this WCS) is 800m.</p>
</td></tr>
<tr><td><code id="ISSR800.wcs_+3A_quiet">quiet</code></td>
<td>
<p>logical, passed to <code>curl::curl_download</code> to enable / suppress URL and progress bar for download.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>aoi</code> should be specified as a <code>SpatRaster</code>, <code>Spatial*</code>, <code>RasterLayer</code>, <code>SpatRaster</code>/<code>SpatVector</code>, <code>sf</code>, <code>sfc</code>, or <code>bbox</code> object or a <code>list</code> containing:
</p>

<dl>
<dt><code>aoi</code></dt><dd><p>bounding-box specified as (xmin, ymin, xmax, ymax) e.g. c(-114.16, 47.65, -114.08, 47.68)</p>
</dd>
<dt><code>crs</code></dt><dd><p>coordinate reference system of BBOX, e.g. 'OGC:CRS84' (EPSG:4326, WGS84 Longitude/Latitude)</p>
</dd>
</dl>

<p>The WCS query is parameterized using a rectangular extent derived from the above AOI specification, after conversion to the native CRS (EPSG:5070) of the ISSR-800 grids.
</p>
<p>Variables available from this WCS can be queried using <code>WCS_details(wcs = 'ISSR800')</code>.
</p>


<h3>Value</h3>

<p>A SpatRaster (or RasterLayer) object containing indexed map unit keys and associated raster attribute table or a try-error if request fails. By default, spatial classes from the <code>terra</code> package are returned. If the input object class is from the <code>raster</code> or <code>sp</code> packages a RasterLayer is returned.
</p>


<h3>Note</h3>

<p>There are still some issues to be resolved related to the encoding of NA Variables with a natural zero (e.g. SAR) have 0 set to NA.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(terra)

# see WCS_details() for variable options
WCS_details(wcs = 'ISSR800')

# get wind erodibility group
res &lt;- ISSR800.wcs(list(aoi = c(-116, 35, -115.5, 35.5), crs = "EPSG:4326"), 
                   var = 'weg', res = 800)
plot(res)

## End(Not run)
</code></pre>

<hr>
<h2 id='KSSL_VG_model'>Develop a Water Retention Curve from KSSL Data</h2><span id='topic+KSSL_VG_model'></span>

<h3>Description</h3>

<p>Water retention curve modeling via van Genuchten model and KSSL data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>KSSL_VG_model(VG_params, phi_min = 10^-6, phi_max = 10^8, pts = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="KSSL_VG_model_+3A_vg_params">VG_params</code></td>
<td>
<p><code>data.frame</code> or <code>list</code> object with the parameters of the van Genuchten model, see details</p>
</td></tr>
<tr><td><code id="KSSL_VG_model_+3A_phi_min">phi_min</code></td>
<td>
<p>lower limit for water potential in kPa</p>
</td></tr>
<tr><td><code id="KSSL_VG_model_+3A_phi_max">phi_max</code></td>
<td>
<p>upper limit for water potential in kPa</p>
</td></tr>
<tr><td><code id="KSSL_VG_model_+3A_pts">pts</code></td>
<td>
<p>number of points to include in estimated water retention curve</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function was developed to work with measured or estimated parameters of the <a href="https://en.wikipedia.org/wiki/Water_retention_curve">van Genuchten model</a>, as generated by the <a href="https://www.ars.usda.gov/pacific-west-area/riverside-ca/agricultural-water-efficiency-and-salinity-research-unit/docs/model/rosetta-model/">Rosetta model</a>. As such, <code>VG_params</code> should have the following format and conventions:
</p>

<dl>
<dt>theta_r</dt><dd><p>saturated water content, values should be in the range of {0, 1}</p>
</dd>
<dt>theta_s</dt><dd><p>residual water content, values should be in the range of {0, 1}</p>
</dd>
<dt>alpha</dt><dd><p>related to the inverse of the air entry suction, function expects log10-transformed values with units of 1/cm</p>
</dd>
<dt>npar</dt><dd><p>index of pore size distribution, function expects log10-transformed values (dimensionless)</p>
</dd>
</dl>



<h3>Value</h3>

<p>A list with the following components:
</p>

<dl>
<dt>VG_curve</dt><dd><p>estimated water retention curve: paired estimates of water potential (phi) and water content (theta)</p>
</dd>
<dt>VG_function</dt><dd><p>spline function for converting water potential (phi, units of kPa) to estimated volumetric water content (theta, units of percent, range: {0, 1})</p>
</dd>
<dt>VG_inverse_function</dt><dd><p>spline function for converting volumetric water content (theta, units of percent, range: {0, 1}) to estimated water potential (phi, units of kPa)</p>
</dd>
</dl>



<h3>Note</h3>

<p>A practical example is given in the <a href="http://ncss-tech.github.io/AQP/soilDB/fetchSCAN-demo.html">fetchSCAN tutorial</a>.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p><a href="https://en.wikipedia.org/wiki/Water_retention_curve">water retention curve estimation</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# basic example
d &lt;- data.frame(
  theta_r = 0.0337216, 
  theta_s = 0.4864061, 
  alpha = -1.581517, 
  npar = 0.1227247
)

vg &lt;- KSSL_VG_model(d)

str(vg)

</code></pre>

<hr>
<h2 id='loafercreek'>Example <code>SoilProfilecollection</code> Objects Returned by <code>fetchNASIS</code>.</h2><span id='topic+loafercreek'></span><span id='topic+gopheridge'></span><span id='topic+mineralKing'></span>

<h3>Description</h3>

<p>Several examples of soil profile collections returned by
<code>fetchNASIS(from='pedons')</code> as <code>SoilProfileCollection</code> objects.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>



# load example dataset
  data("gopheridge")

  # what kind of object is this?
  class(gopheridge)

  # how many profiles?
  length(gopheridge)

  # there are 60 profiles, this calls for a split plot
  par(mar=c(0,0,0,0), mfrow=c(2,1))

  # plot soil colors
  plot(gopheridge[1:30, ], name='hzname', color='soil_color')
  plot(gopheridge[31:60, ], name='hzname', color='soil_color')

  # need a larger top margin for legend
  par(mar=c(0,0,4,0), mfrow=c(2,1))
  # generate colors based on clay content
  plot(gopheridge[1:30, ], name='hzname', color='clay')
  plot(gopheridge[31:60, ], name='hzname', color='clay')

  # single row and no labels
  par(mar=c(0,0,0,0), mfrow=c(1,1))
  # plot soils sorted by depth to contact
  plot(gopheridge, name='', print.id=FALSE, plot.order=order(gopheridge$bedrckdepth))

  # plot first 10 profiles
  plot(gopheridge[1:10, ], name='hzname', color='soil_color', label='pedon_id', id.style='side')

  # add rock fragment data to plot:
  addVolumeFraction(gopheridge[1:10, ], colname='total_frags_pct')

  # add diagnostic horizons
  addDiagnosticBracket(gopheridge[1:10, ], kind='argillic horizon', col='red', offset=-0.4)

  ## loafercreek
  data("loafercreek")
  # plot first 10 profiles
  plot(loafercreek[1:10, ], name='hzname', color='soil_color', label='pedon_id', id.style='side')

  # add rock fragment data to plot:
  addVolumeFraction(loafercreek[1:10, ], colname='total_frags_pct')

  # add diagnostic horizons
  addDiagnosticBracket(loafercreek[1:10, ], kind='argillic horizon', col='red', offset=-0.4)


</code></pre>

<hr>
<h2 id='local_NASIS_defined'>Check for presence of <code>nasis_local</code> ODBC data source</h2><span id='topic+local_NASIS_defined'></span>

<h3>Description</h3>

<p>Check for presence of a NASIS data source. This function <em>always</em> returns <code>FALSE</code> when the <code>odbc</code> package is not available (regardless of whether you have an ODBC data source properly set up).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>local_NASIS_defined(dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="local_NASIS_defined_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database, or a DBIConnection, containing NASIS table structure; default: NULL</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If <code>dsn</code> is specified as a character vector it is assumed to refer to a SQLite data source. The result will be <code>TRUE</code> or <code>FALSE</code> depending on the result of <code>RSQLite::dbCanConnect()</code>.
</p>
<p>If <code>dsn</code> is specified as a <code>DBIConnection</code> the function returns the value of <code>DBI::dbExistsTable("MetadataDomainMaster")</code>
</p>


<h3>Value</h3>

<p>logical
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

if(local_NASIS_defined()) {
  # use fetchNASIS or some other lower-level fetch function
} else {
  message('could not find `nasis_local` ODBC data source')
}

</code></pre>

<hr>
<h2 id='make_EDIT_service_URL'>Make Ecological Dynamics Interpretive Tool (EDIT) web services URL</h2><span id='topic+make_EDIT_service_URL'></span>

<h3>Description</h3>

<p>Construct a URL for Ecological Dynamics Interpretive Tool (EDIT) web services (<code style="white-space: pre;">&#8288;https://edit.jornada.nmsu.edu/services/...&#8288;</code>) to return PDF, TXT or JSON results.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_EDIT_service_URL(
  src = c("descriptions", "downloads", "plant-community-tables", "models", "keys"),
  catalog = c("esd", "esg"),
  geoUnit = NULL,
  ecoclass = NULL,
  landuse = NULL,
  state = NULL,
  community = NULL,
  key = NULL,
  endpoint = NULL,
  querystring = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_EDIT_service_URL_+3A_src">src</code></td>
<td>
<p>One of: <code>descriptions</code>, <code>downloads</code>, <code>plant-community-tables</code>, <code>models</code>, <code>keys</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_catalog">catalog</code></td>
<td>
<p>Catalog ID. One of: <code>esd</code> or <code>esg</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_geounit">geoUnit</code></td>
<td>
<p>Geographic unit ID. For example: <code style="white-space: pre;">&#8288;022A&#8288;</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_ecoclass">ecoclass</code></td>
<td>
<p>Ecological class ID. For example: <code>F022AX101CA</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_landuse">landuse</code></td>
<td>
<p>Optional: Used only for <code>src = "plant-community-tables"</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_state">state</code></td>
<td>
<p>Optional: Used only for <code>src = "plant-community-tables"</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_community">community</code></td>
<td>
<p>Optional: Used only for <code>src = "plant-community-tables"</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_key">key</code></td>
<td>
<p>Optional: Key number. All keys will be returned if not specified.</p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_endpoint">endpoint</code></td>
<td>
<p>Optional: Specific endpoint e.g. <code>overview.json</code>, <code>class-list.json</code>, <code>soil-features.json</code></p>
</td></tr>
<tr><td><code id="make_EDIT_service_URL_+3A_querystring">querystring</code></td>
<td>
<p>Optional: Additional request parameters specified as a query string <code>?param1=value&amp;param2=value</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the following official EDIT developer resources to see which endpoints are available for Ecological Site Description (ESD) or Ecological Site Group (ESG) catalogs:
</p>

<ul>
<li> <p><a href="https://edit.jornada.nmsu.edu/resources/esd">https://edit.jornada.nmsu.edu/resources/esd</a>
</p>
</li>
<li> <p><a href="https://edit.jornada.nmsu.edu/resources/esg">https://edit.jornada.nmsu.edu/resources/esg</a>
</p>
</li></ul>



<h3>Value</h3>

<p>A character vector containing URLs with specified parameters. This function is vectorized.
</p>


<h3>See Also</h3>

<p>get_EDIT_ecoclass_by_geoUnit
</p>


<h3>Examples</h3>

<pre><code class='language-R'># url for all geoUnit keys as PDF
make_EDIT_service_URL(src = "descriptions",
                      catalog = "esd",
                      geoUnit = "039X")

# url for a single key within geoUnit as PDF
make_EDIT_service_URL(src = "descriptions",
                      catalog = "esd",
                      geoUnit = "039X",
                      key = "1")

# query for "full" description in JSON
desc &lt;-  make_EDIT_service_URL(src = "descriptions",
                               catalog = "esd",
                               geoUnit = "039X",
                               endpoint = "R039XA109AZ.json")

# query for "overview"
desc_ov &lt;- make_EDIT_service_URL(src = "descriptions",
                                 catalog = "esd",
                                 geoUnit = "039X",
                                 ecoclass = "R039XA109AZ",
                                 endpoint = "overview.json")

# query for specific section, e.g. "water features"
desc_wf &lt;- make_EDIT_service_URL(src = "descriptions",
                                 catalog = "esd",
                                 geoUnit = "039X",
                                 ecoclass = "R039XA109AZ",
                                 endpoint = "water-features.json")

# construct the URLs -- that is a query essentially
# then download the result with read_json

#full &lt;- jsonlite::read_json(desc)
#overview &lt;- jsonlite::read_json(desc_ov)
#waterfeature &lt;- jsonlite::read_json(desc_wf)

</code></pre>

<hr>
<h2 id='makeChunks'>Generate chunk labels for splitting data</h2><span id='topic+makeChunks'></span>

<h3>Description</h3>

<p>Generate chunk labels for splitting data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>makeChunks(ids, size = 100)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="makeChunks_+3A_ids">ids</code></td>
<td>
<p>vector of IDs</p>
</td></tr>
<tr><td><code id="makeChunks_+3A_size">size</code></td>
<td>
<p>chunk (group) size</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# split the lowercase alphabet into 2 chunks

aggregate(letters,
          by = list(makeChunks(letters, size=13)),
          FUN = paste0, collapse=",")

</code></pre>

<hr>
<h2 id='metadata'>NASIS 7 Metadata</h2><span id='topic+metadata'></span>

<h3>Description</h3>

<p>NASIS 7 Metadata from MetadataDomainDetail, MetadataDomainMaster, and MetadataTableColumn tables
</p>


<h3>Format</h3>

<p>A <code>data.frame</code> with the following columns:
</p>

<ul>
<li> <p><code>DomainID</code> - Integer. ID that uniquely identifies a domain in a data model, not just within a database.
</p>
</li>
<li> <p><code>DomainName</code> - Character. Domain Name.
</p>
</li>
<li> <p><code>DomainRanked</code> - Integer. Is domain ranked? <code>0</code> = No; <code>1</code> = Yes
</p>
</li>
<li> <p><code>DisplayLabel</code> - Character. Domain Display Label.
</p>
</li>
<li> <p><code>ChoiceSequence</code> - Integer. Order or sequence of Choices.
</p>
</li>
<li> <p><code>ChoiceValue</code> - Integer. Value of choice level.
</p>
</li>
<li> <p><code>ChoiceName</code> - Character. Name of choice level.
</p>
</li>
<li> <p><code>ChoiceLabel</code> - Character. Label of choice level.
</p>
</li>
<li> <p><code>ChoiceObsolete</code> - Integer. Is choice level obsolete? <code>0</code> = No; <code>1</code> = Yes
</p>
</li>
<li> <p><code>ColumnPhysicalName</code> - Character. Physical column name.
</p>
</li>
<li> <p><code>ColumnLogicalName</code> - Character. Logical column name.
</p>
</li></ul>


<hr>
<h2 id='mukey.wcs'>Get Map Unit Key (<code>mukey</code>) grid from SoilWeb Web Coverage Service (WCS)</h2><span id='topic+mukey.wcs'></span>

<h3>Description</h3>

<p>Download chunks of the gNATSGO, gSSURGO, RSS, and STATSGO2 map unit key grid via bounding-box from the SoilWeb WCS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mukey.wcs(
  aoi,
  db = c("gNATSGO", "gSSURGO", "RSS", "STATSGO", "PR_SSURGO", "HI_SSURGO"),
  res = 30,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mukey.wcs_+3A_aoi">aoi</code></td>
<td>
<p>area of interest (AOI) defined using either a <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code> or <code>bbox</code> object, or a <code>list</code>, see details</p>
</td></tr>
<tr><td><code id="mukey.wcs_+3A_db">db</code></td>
<td>
<p>name of the gridded map unit key grid to access, should be either 'gNATSGO', 'gSSURGO', 'STATSGO', 'HI_SSURGO', or 'PR_SSURGO' (case insensitive)</p>
</td></tr>
<tr><td><code id="mukey.wcs_+3A_res">res</code></td>
<td>
<p>grid resolution, units of meters. The native resolution of gNATSGO and gSSURGO (this WCS) is 30m; STATSGO (this WCS) is 300m; and Raster Soil Surveys (RSS) are at 10m resolution. If <code>res</code> is not specified the native resolution of the source is used.</p>
</td></tr>
<tr><td><code id="mukey.wcs_+3A_quiet">quiet</code></td>
<td>
<p>logical, passed to <code>curl::curl_download</code> to enable / suppress URL and progress bar for download.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>aoi</code> should be specified as one of: <code>SpatRaster</code>, <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code>, <code>bbox</code> object, OR a <code>list</code> containing:
</p>

<dl>
<dt><code>aoi</code></dt><dd><p>bounding-box specified as (xmin, ymin, xmax, ymax) e.g. c(-114.16, 47.65, -114.08, 47.68)</p>
</dd>
<dt><code>crs</code></dt><dd><p>coordinate reference system of BBOX, e.g. 'OGC:CRS84' (EPSG:4326, WGS84 Longitude/Latitude)</p>
</dd>
</dl>

<p>The WCS query is parameterized using a rectangular extent derived from the above AOI specification, after conversion to the native CRS (EPSG:5070) of the WCS grids.
</p>
<p>Databases available from this WCS can be queried using <code>WCS_details(wcs = 'mukey')</code>.
</p>


<h3>Value</h3>

<p>A SpatRaster (or RasterLayer) object containing indexed map unit keys and associated raster attribute table or a try-error if request fails. By default, spatial classes from the <code>terra</code> package are returned. If the input object class is from the <code>raster</code> or <code>sp</code> packages a RasterLayer is returned.
</p>


<h3>Note</h3>

<p>The gNATSGO grid includes raster soil survey map unit keys which are not in SDA.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(terra)

res &lt;- mukey.wcs(list(aoi = c(-116.7400, 35.2904, -116.7072, 35.3026), crs = "EPSG:4326"),
                 db = 'gNATSGO', res = 30) 
  
m &lt;- unique(values(res))

prp &lt;- setNames(
  get_SDA_property(
    c("ph1to1h2o_r", "claytotal_r"),
    "weighted average",
    mukeys = m,
    top_depth = 0,
    bottom_depth = 25,
    include_minors = TRUE,
    miscellaneous_areas = FALSE
  )[, c("mukey", "ph1to1h2o_r", "claytotal_r")],
  c("ID",    "pH1to1_0to25", "clay_0to25")
)

levels(res) &lt;- prp
res2 &lt;- catalyze(res)
res2

plot(res2[['pH1to1_0to25']])

## End(Not run)
</code></pre>

<hr>
<h2 id='NASIS_table_column_keys'>NASIS 7 Tables, Columns and Foreign Keys</h2><span id='topic+NASIS_table_column_keys'></span>

<h3>Description</h3>

<p>This dataset contains NASIS 7 Tables, Columns and Foreign Keys
</p>

<hr>
<h2 id='NASISChoiceList'>Work with NASIS Choice Lists</h2><span id='topic+NASISChoiceList'></span>

<h3>Description</h3>

<p>Create (ordered) factors and interchange between choice names, values and labels for lists of input vectors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NASISChoiceList(
  x = NULL,
  colnames = names(x),
  what = "ColumnPhysicalName",
  choice = c("ChoiceName", "ChoiceValue", "ChoiceLabel"),
  obsolete = FALSE,
  factor = TRUE,
  droplevels = FALSE,
  ordered = TRUE,
  simplify = TRUE,
  dsn = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NASISChoiceList_+3A_x">x</code></td>
<td>
<p>A named list of vectors to use as input for NASIS Choice List lookup</p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_colnames">colnames</code></td>
<td>
<p>vector of values of the column specified by <code>what</code>. E.g. <code>colnames="texcl"</code> for <code>what="ColumnPhysicalName"</code>. Default: <code>names(x)</code> (if x is named)</p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_what">what</code></td>
<td>
<p>passed to <code>get_NASIS_column_metadata()</code>; Column to match <code>x</code> against. Default <code>"ColumnPhysicalName"</code>; alternate options include <code>"DomainID"</code>, <code>"DomainName"</code>, <code>"DomainRanked"</code>, <code>"DisplayLabel"</code>, <code>"ChoiceSequence"</code>, <code>"ChoiceValue"</code>, <code>"ChoiceName"</code>, <code>"ChoiceLabel"</code>, <code>"ChoiceObsolete"</code>, <code>"ChoiceDescription"</code>, <code>"ColumnLogicalName"</code></p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_choice">choice</code></td>
<td>
<p>one of: <code>"ChoiceName"</code>, <code>"ChoiceValue"</code>, or <code>"ChoiceLabel"</code></p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_obsolete">obsolete</code></td>
<td>
<p>Include &quot;obsolete&quot; choices? Default: <code>FALSE</code></p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_factor">factor</code></td>
<td>
<p>Convert result to factor? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_droplevels">droplevels</code></td>
<td>
<p>Drop unused factor levels? Default: <code>TRUE</code> (used only when <code>factor=TRUE</code>)</p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_ordered">ordered</code></td>
<td>
<p>Should the result be an ordered factor? Default: <code>TRUE</code> (use <em>only</em> if <code>DomainRanked</code> is true for all choices)</p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_simplify">simplify</code></td>
<td>
<p>Should list result with length 1 be reduced to a single vector? Default: <code>TRUE</code></p>
</td></tr>
<tr><td><code id="NASISChoiceList_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS table structure; default: NULL</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list of &quot;choices&quot; based on the input <code>x</code> that have been converted to a consistent target set of levels (specified by <code>choice</code>) via NASIS 7 metadata.
</p>
<p>When <code>factor=TRUE</code> the result is a factor, possibly ordered when <code>ordered=TRUE</code> and the target domain is a &quot;ranked&quot; domain (i.e. <code>ChoiceSequence</code> has logical meaning).
</p>
<p>When <code>factor=FALSE</code> the result is a character or numeric vector. Numeric vectors are always returned when <code>choice</code> is <code>"ChoiceValue"</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
NASISChoiceList(1:3, "texcl")

NASISChoiceList(1:3, "pondfreqcl")

NASISChoiceList("Clay loam", "texcl", choice = "ChoiceValue")

NASISChoiceList("Silty clay loam", "texcl", choice = "ChoiceName")
</code></pre>

<hr>
<h2 id='NASISDomainsAsFactor'>Get/Set Options for Encoding NASIS Domains as Factors</h2><span id='topic+NASISDomainsAsFactor'></span>

<h3>Description</h3>

<p>Set package option <code>soilDB.NASIS.DomainsAsFactor</code> for returning coded NASIS domains as factors.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>NASISDomainsAsFactor(x = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="NASISDomainsAsFactor_+3A_x">x</code></td>
<td>
<p>logical; default <code>FALSE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>logical, result of <code>getOption("soilDB.NASIS.DomainsAsFactor")</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
NASISDomansAsFactor(TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='OSDquery'>Search full text of Official Series Description on SoilWeb</h2><span id='topic+OSDquery'></span>

<h3>Description</h3>

<p>This is the R interface to <a href="https://casoilresource.lawr.ucdavis.edu/osd-search/">OSD search by Section</a> and <a href="https://casoilresource.lawr.ucdavis.edu/osd-search/search-entire-osd.php">OSD Search</a> APIs provided by SoilWeb.
</p>
<p>OSD records are searched with the <a href="https://www.postgresql.org/docs/9.5/textsearch.html">PostgreSQL fulltext indexing</a> and query system (<a href="https://www.postgresql.org/docs/9.5/datatype-textsearch.html">syntax details</a>). Each search field (except for the &quot;brief narrative&quot; and MLRA) corresponds with a section header in an OSD. The results may not include every OSD due to formatting errors and typos. Results are scored based on the number of times search terms match words in associated sections.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>OSDquery(
  everything = NULL,
  mlra = "",
  taxonomic_class = "",
  typical_pedon = "",
  brief_narrative = "",
  ric = "",
  use_and_veg = "",
  competing_series = "",
  geog_location = "",
  geog_assoc_soils = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="OSDquery_+3A_everything">everything</code></td>
<td>
<p>search entire OSD text (default is NULL), <code>mlra</code> may also be specified, all other arguments are ignored</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_mlra">mlra</code></td>
<td>
<p>a comma-delimited string of MLRA to search ('17,18,22A')</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_taxonomic_class">taxonomic_class</code></td>
<td>
<p>search family level classification</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_typical_pedon">typical_pedon</code></td>
<td>
<p>search typical pedon section</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_brief_narrative">brief_narrative</code></td>
<td>
<p>search brief narrative</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_ric">ric</code></td>
<td>
<p>search range in characteristics section</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_use_and_veg">use_and_veg</code></td>
<td>
<p>search use and vegetation section</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_competing_series">competing_series</code></td>
<td>
<p>search competing series section</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_geog_location">geog_location</code></td>
<td>
<p>search geographic setting section</p>
</td></tr>
<tr><td><code id="OSDquery_+3A_geog_assoc_soils">geog_assoc_soils</code></td>
<td>
<p>search geographically associated soils section</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <a href="https://casoilresource.lawr.ucdavis.edu/osd-search/">this webpage</a> for more information.
</p>

<ul>
<li><p> family level taxa are derived from SC database, not parsed OSD records
</p>
</li>
<li><p> MLRA are derived via spatial intersection (SSURGO x MLRA polygons)
</p>
</li>
<li><p> MLRA-filtering is only possible for series used in the current SSURGO snapshot (component name)
</p>
</li>
<li><p> logical AND: &amp;
</p>
</li>
<li><p> logical OR: |
</p>
</li>
<li><p> wildcard, e.g. rhy-something rhy:*
</p>
</li>
<li><p> search terms with spaces need doubled single quotes: &rdquo;san joaquin&rdquo;
</p>
</li>
<li><p> combine search terms into a single expression: (grano:* | granite)
</p>
</li></ul>

<p>Related documentation can be found in the following tutorials
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/soil-series-query-functions.html">overview of all soil series query functions</a>
</p>
</li>
<li> <p><a href="https://ncss-tech.github.io/AQP/soilDB/competing-series.html">competing soil series</a>
</p>
</li>
<li> <p><a href="https://ncss-tech.github.io/AQP/soilDB/siblings.html">siblings</a>
</p>
</li></ul>



<h3>Value</h3>

<p>a <code>data.frame</code> object containing soil series names that match patterns supplied as arguments.
</p>


<h3>Note</h3>

<p>SoilWeb maintains a snapshot of the Official Series Description data.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>USDA-NRCS OSD search tools: <a href="https://soilseries.sc.egov.usda.gov/">https://soilseries.sc.egov.usda.gov/</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchOSD">fetchOSD</a>, <a href="#topic+siblings">siblings</a>, <a href="#topic+fetchOSD">fetchOSD</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>



  # find all series that list Pardee as a geographically associated soil.
  s &lt;- OSDquery(geog_assoc_soils = 'pardee')

  # get data for these series
  x &lt;- fetchOSD(s$series, extended = TRUE, colorState = 'dry')

  # simple figure
  par(mar=c(0,0,1,1))
  plot(x$SPC)


</code></pre>

<hr>
<h2 id='parseWebReport'>Parse contents of a web report, based on supplied arguments.</h2><span id='topic+parseWebReport'></span>

<h3>Description</h3>

<p>Parse contents of a web report, based on supplied arguments.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parseWebReport(url, args, index = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parseWebReport_+3A_url">url</code></td>
<td>
<p>Base URL to a LIMS/NASIS web report.</p>
</td></tr>
<tr><td><code id="parseWebReport_+3A_args">args</code></td>
<td>
<p>List of named arguments to send to report, see details.</p>
</td></tr>
<tr><td><code id="parseWebReport_+3A_index">index</code></td>
<td>
<p>Integer index specifying the table to return, or, NULL for a
list of tables</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Report argument names can be inferred by inspection of the HTML source
associated with any given web report.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> object in the case of a single integer <code>index</code>, otherwise a <code>list</code>
</p>


<h3>Note</h3>

<p>Most web reports are for internal use only.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and S.M. Roecker
</p>

<hr>
<h2 id='processSDA_WKT'>Post-process Well-Known Text from Soil Data Access</h2><span id='topic+processSDA_WKT'></span>

<h3>Description</h3>

<p>This is a helper function commonly used with <code>SDA_query</code> to extract
WKT (well-known text) representation of geometry to an <code>sf</code> or <code>sp</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>processSDA_WKT(d, g = "geom", crs = 4326, p4s = NULL, as_sf = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="processSDA_WKT_+3A_d">d</code></td>
<td>
<p><code>data.frame</code> returned by <code>SDA_query</code>, containing WKT representation of geometry</p>
</td></tr>
<tr><td><code id="processSDA_WKT_+3A_g">g</code></td>
<td>
<p>name of column in <code>d</code> containing WKT geometry</p>
</td></tr>
<tr><td><code id="processSDA_WKT_+3A_crs">crs</code></td>
<td>
<p>CRS definition (e.g. an EPSG code). Default <code>4326</code> for WGS84 Geographic Coordinate System</p>
</td></tr>
<tr><td><code id="processSDA_WKT_+3A_p4s">p4s</code></td>
<td>
<p>Deprecated: PROJ4 CRS definition</p>
</td></tr>
<tr><td><code id="processSDA_WKT_+3A_as_sf">as_sf</code></td>
<td>
<p>Return an <code>sf</code> <code>data.frame</code>? If <code>FALSE</code> return a <code style="white-space: pre;">&#8288;Spatial*&#8288;</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The SDA website can be found at <a href="https://sdmdataaccess.nrcs.usda.gov">https://sdmdataaccess.nrcs.usda.gov</a>.
See the <a href="http://ncss-tech.github.io/AQP/soilDB/SDA-tutorial.html">SDA Tutorial</a> for detailed examples.
</p>
<p>The SDA website can be found at <a href="https://sdmdataaccess.nrcs.usda.gov">https://sdmdataaccess.nrcs.usda.gov</a>. See the <a href="http://ncss-tech.github.io/AQP/soilDB/SDA-tutorial.html">SDA Tutorial</a> for detailed examples.
</p>


<h3>Value</h3>

<p>An <code>sf</code> object or if <code>as_sf</code> is <code>FALSE</code> a <code style="white-space: pre;">&#8288;Spatial*&#8288;</code> object.
</p>


<h3>Note</h3>

<p>This function requires the <code>sf</code> package.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G. Brown
</p>

<hr>
<h2 id='ROSETTA'>Query USDA-ARS ROSETTA Model API</h2><span id='topic+ROSETTA'></span>

<h3>Description</h3>

<p>A simple interface to the <a href="https://www.ars.usda.gov/pacific-west-area/riverside-ca/agricultural-water-efficiency-and-salinity-research-unit/docs/model/rosetta-model/">ROSETTA model</a> for predicting hydraulic parameters from soil properties. The ROSETTA API was developed by Dr. Todd Skaggs (USDA-ARS) and links to the work of Zhang and Schaap, (2017). See the <a href="http://ncss-tech.github.io/AQP/soilDB/ROSETTA-API.html">related tutorial</a> for additional examples.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ROSETTA(
  x,
  vars,
  v = c("1", "2", "3"),
  include.sd = FALSE,
  chunkSize = 10000,
  conf = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ROSETTA_+3A_x">x</code></td>
<td>
<p>a <code>data.frame</code> of required soil properties, may contain other columns, see details</p>
</td></tr>
<tr><td><code id="ROSETTA_+3A_vars">vars</code></td>
<td>
<p>character vector of column names in <code>x</code> containing relevant soil property values, see details</p>
</td></tr>
<tr><td><code id="ROSETTA_+3A_v">v</code></td>
<td>
<p>ROSETTA model version number: '1', '2', or '3', see details and references.</p>
</td></tr>
<tr><td><code id="ROSETTA_+3A_include.sd">include.sd</code></td>
<td>
<p>logical, include bootstrap standard deviation for estimated parameters</p>
</td></tr>
<tr><td><code id="ROSETTA_+3A_chunksize">chunkSize</code></td>
<td>
<p>number of records per API call</p>
</td></tr>
<tr><td><code id="ROSETTA_+3A_conf">conf</code></td>
<td>
<p>configuration passed to <code>httr::POST()</code> such as <code>verbose()</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Soil properties supplied in <code>x</code> must be described, in order, via <code>vars</code> argument. The API does not use the names but column ordering must follow: sand, silt, clay, bulk density, volumetric water content at 33kPa (1/3 bar), and volumetric water content at 1500kPa (15 bar).
</p>
<p>The ROSETTA model relies on a minimum of 3 soil properties, with increasing (expected) accuracy as additional properties are included:
</p>

<ul>
<li><p> required, sand, silt, clay: USDA soil texture separates (percentages) that sum to 100\
</p>
</li>
<li><p> optional, bulk density (any moisture basis): mass per volume after accounting for &gt;2mm fragments, units of gm/cm3
</p>
</li>
<li><p> optional, volumetric water content at 33 kPa: roughly &quot;field capacity&quot; for most soils, units of cm^3/cm^3
</p>
</li>
<li><p> optional, volumetric water content at 1500 kPa: roughly &quot;permanent wilting point&quot; for most plants, units of cm^3/cm^3
</p>
</li></ul>

<p>The Rosetta pedotransfer function predicts five parameters for the van Genuchten model of unsaturated soil hydraulic properties
</p>

<ul>
<li><p> theta_r : residual volumetric water content
</p>
</li>
<li><p> theta_s : saturated volumetric water content
</p>
</li>
<li><p> log10(alpha) : retention shape parameter <code style="white-space: pre;">&#8288;[log10(1/cm)]&#8288;</code>
</p>
</li>
<li><p> log10(npar) : retention shape parameter
</p>
</li>
<li><p> log10(ksat) : saturated hydraulic conductivity <code style="white-space: pre;">&#8288;[log10(cm/d)]&#8288;</code>
</p>
</li></ul>

<p>Column names not specified in <code>vars</code> are retained in the output.
</p>
<p>Three versions of the ROSETTA model are available, selected using <code>v = 1</code>, <code>v = 2</code>, or <code>v = 3</code>.
</p>

<ul>
<li><p> version 1 - Schaap, M.G., F.J. Leij, and M.Th. van Genuchten. 2001. ROSETTA: a computer program for estimating soil hydraulic parameters with hierarchical pedotransfer functions. Journal of Hydrology 251(3-4): 163-176. doi: <a href="https://doi.org/10.1016/S0022-1694%2801%2900466-8">doi:10.1016/S0022-1694(01)00466-8</a>.
</p>
</li>
<li><p> version 2 - Schaap, M.G., A. Nemes, and M.T. van Genuchten. 2004. Comparison of Models for Indirect Estimation of Water Retention and Available Water in Surface Soils. Vadose Zone Journal 3(4): 1455-1463. doi: <a href="https://doi.org/10.2136/vzj2004.1455">doi:10.2136/vzj2004.1455</a>.
</p>
</li>
<li><p> version 3 - Zhang, Y., and M.G. Schaap. 2017. Weighted recalibration of the Rosetta pedotransfer model with improved estimates of hydraulic parameter distributions and summary statistics (Rosetta3). Journal of Hydrology 547: 39-53. doi: <a href="https://doi.org/10.1016/j.jhydrol.2017.01.004">doi:10.1016/j.jhydrol.2017.01.004</a>.
</p>
</li></ul>



<h3>Author(s)</h3>

<p>D.E. Beaudette, Todd Skaggs (ARS), Richard Reid
</p>


<h3>References</h3>

<p>Consider using the interactive version, with copy/paste functionality at: <a href="https://www.handbook60.org/rosetta">https://www.handbook60.org/rosetta</a>.
</p>
<p>Rosetta Model Home Page: <a href="https://www.ars.usda.gov/pacific-west-area/riverside-ca/agricultural-water-efficiency-and-salinity-research-unit/docs/model/rosetta-model/">https://www.ars.usda.gov/pacific-west-area/riverside-ca/agricultural-water-efficiency-and-salinity-research-unit/docs/model/rosetta-model/</a>.
</p>
<p>Python ROSETTA model: <a href="https://pypi.org/project/rosetta-soil/">https://pypi.org/project/rosetta-soil/</a>.
</p>
<p>Yonggen Zhang, Marcel G. Schaap. 2017. Weighted recalibration of the Rosetta pedotransfer model with improved estimates of hydraulic parameter distributions and summary statistics (Rosetta3). Journal of Hydrology. 547: 39-53. <a href="https://doi.org/10.1016/j.jhydrol.2017.01.004">doi:10.1016/j.jhydrol.2017.01.004</a>.
</p>
<p>Kosugi, K. 1999. General model for unsaturated hydraulic conductivity for soils with lognormal pore-size distribution. Soil Sci. Soc. Am. J. 63:270-277.
</p>
<p>Mualem, Y. 1976. A new model predicting the hydraulic conductivity of unsaturated porous media. Water Resour. Res. 12:513-522.
</p>
<p>Schaap, M.G. and W. Bouten. 1996. Modeling water retention curves of sandy soils using neural networks. Water Resour. Res. 32:3033-3040.
</p>
<p>Schaap, M.G., Leij F.J. and van Genuchten M.Th. 1998. Neural network analysis for hierarchical prediction of soil water retention and saturated hydraulic conductivity. Soil Sci. Soc. Am. J. 62:847-855.
</p>
<p>Schaap, M.G., and F.J. Leij, 1998. Database Related Accuracy and Uncertainty of Pedotransfer Functions, Soil Science 163:765-779.
</p>
<p>Schaap, M.G., F.J. Leij and M. Th. van Genuchten. 1999. A bootstrap-neural network approach to predict soil hydraulic parameters. In: van Genuchten, M.Th., F.J. Leij, and L. Wu (eds), Proc. Int. Workshop, Characterization and Measurements of the Hydraulic Properties of Unsaturated Porous Media, pp 1237-1250, University of California, Riverside, CA.
</p>
<p>Schaap, M.G., F.J. Leij, 1999, Improved prediction of unsaturated hydraulic conductivity with the Mualem-van Genuchten, Submitted to Soil Sci. Soc. Am. J.
</p>
<p>van Genuchten, M.Th. 1980. A closed-form equation for predicting the hydraulic conductivity of unsaturated soils. Soil Sci. Am. J. 44:892-898.
</p>
<p>Schaap, M.G., F.J. Leij, and M.Th. van Genuchten. 2001. ROSETTA: a computer program for estimating soil hydraulic parameters with hierarchical pedotransfer functions. Journal of Hydrology 251(3-4): 163-176. doi: <a href="https://doi.org/10.1016/S0022-1694%2801%2900466-8">doi:10.1016/S0022-1694(01)00466-8</a>.
</p>
<p>Schaap, M.G., A. Nemes, and M.T. van Genuchten. 2004. Comparison of Models for Indirect Estimation of Water Retention and Available Water in Surface Soils. Vadose Zone Journal 3(4): 1455-1463. doi: <a href="https://doi.org/10.2136/vzj2004.1455">doi:10.2136/vzj2004.1455</a>.
</p>
<p>Zhang, Y., and M.G. Schaap. 2017. Weighted recalibration of the Rosetta pedotransfer model with improved estimates of hydraulic parameter distributions and summary statistics (Rosetta3). Journal of Hydrology 547: 39-53. doi: <a href="https://doi.org/10.1016/j.jhydrol.2017.01.004">doi:10.1016/j.jhydrol.2017.01.004</a>.
</p>

<hr>
<h2 id='SCAN_SNOTEL_metadata'>Get SCAN and SNOTEL Station Metadata</h2><span id='topic+SCAN_SNOTEL_metadata'></span><span id='topic+state_FIPS_codes'></span>

<h3>Description</h3>

<p>These data have been compiled from several sources and represent a
progressive effort to organize SCAN/SNOTEL station metadata. Therefore, some
records may be missing or incorrect.
</p>


<h3>Format</h3>

<p>A data frame with 1092 observations on the following 12 variables.
</p>
 <dl>
<dt>list(&quot;Name&quot;)</dt><dd><p>station name</p>
</dd> <dt>list(&quot;Site&quot;)</dt><dd><p>station ID</p>
</dd>
<dt>list(&quot;State&quot;)</dt><dd><p>state</p>
</dd> <dt>list(&quot;Network&quot;)</dt><dd><p>sensor network: SCAN /
SNOTEL</p>
</dd> <dt>list(&quot;County&quot;)</dt><dd><p>county</p>
</dd> <dt>list(&quot;Elevation_ft&quot;)</dt><dd><p>station
elevation in feet</p>
</dd> <dt>list(&quot;Latitude&quot;)</dt><dd><p>latitude of station</p>
</dd>
<dt>list(&quot;Longitude&quot;)</dt><dd><p>longitude of station</p>
</dd> <dt>list(&quot;HUC&quot;)</dt><dd><p>associated
watershed</p>
</dd> <dt>list(&quot;climstanm&quot;)</dt><dd><p>climate station name (TODO: remove this
column)</p>
</dd> <dt>list(&quot;upedonid&quot;)</dt><dd><p>associated user pedon ID</p>
</dd>
<dt>list(&quot;pedlabsampnum&quot;)</dt><dd><p>associated lab sample ID</p>
</dd> </dl>


<hr>
<h2 id='SDA_query'>Query Soil Data Access</h2><span id='topic+SDA_query'></span>

<h3>Description</h3>

<p>Submit a query to the Soil Data Access (SDA) REST/JSON web-service and return the results as a data.frame. There is a 100,000 record limit and 32Mb JSON serializer limit, per query. Queries should contain a WHERE statement or JOIN condition to limit the number of rows affected / returned. Consider wrapping calls to <code>SDA_query</code> in a function that can iterate over logical chunks (e.g. areasymbol, mukey, cokey, etc.). The function <code>makeChunks</code> can help with such iteration.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDA_query(q)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDA_query_+3A_q">q</code></td>
<td>
<p>A valid T-SQL query surrounded by double quotes</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The SDA website can be found at <a href="https://sdmdataaccess.nrcs.usda.gov">https://sdmdataaccess.nrcs.usda.gov</a> and query examples can be found at <a href="https://sdmdataaccess.nrcs.usda.gov/QueryHelp.aspx">https://sdmdataaccess.nrcs.usda.gov/QueryHelp.aspx</a>. A library of query examples can be found at <a href="https://nasis.sc.egov.usda.gov/NasisReportsWebSite/limsreport.aspx?report_name=SDA-SQL_Library_Home">https://nasis.sc.egov.usda.gov/NasisReportsWebSite/limsreport.aspx?report_name=SDA-SQL_Library_Home</a>.
</p>
<p>SSURGO (detailed soil survey) and STATSGO (generalized soil survey) data are stored together within SDA. This means that queries that don't specify an area symbol may result in a mixture of SSURGO and STATSGO records. See the examples below and the <a href="http://ncss-tech.github.io/AQP/soilDB/SDA-tutorial.html">SDA Tutorial</a> for details.
</p>


<h3>Value</h3>

<p>a data.frame result (<code>NULL</code> if empty, try-error on error)
</p>


<h3>Note</h3>

<p>This function requires the <code>httr</code>, <code>jsonlite</code>, and <code>xml2</code> packages
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SDA_spatialQuery">SDA_spatialQuery</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


  ## get SSURGO export date for all soil survey areas in California
  # there is no need to filter STATSGO
  # because we are filtering on SSURGO area symbols
  q &lt;- "SELECT areasymbol, saverest FROM sacatalog WHERE areasymbol LIKE 'CA%';"
  x &lt;- SDA_query(q)
  head(x)


  ## get SSURGO component data associated with the
  ## Amador series / major component only
  # this query must explicitly filter out STATSGO data
  q &lt;- "SELECT cokey, compname, comppct_r FROM legend
    INNER JOIN mapunit mu ON mu.lkey = legend.lkey
    INNER JOIN component co ON mu.mukey = co.mukey
    WHERE legend.areasymbol != 'US' AND compname = 'Amador';"

  res &lt;- SDA_query(q)
  str(res)

  ## get component-level data for a specific soil survey area (Yolo county, CA)
  # there is no need to filter STATSGO because the query contains
  # an implicit selection of SSURGO data by areasymbol
  q &lt;- "SELECT
    component.mukey, cokey, comppct_r, compname, taxclname,
    taxorder, taxsuborder, taxgrtgroup, taxsubgrp
    FROM legend
    INNER JOIN mapunit ON mapunit.lkey = legend.lkey
    LEFT OUTER JOIN component ON component.mukey = mapunit.mukey
    WHERE legend.areasymbol = 'CA113' ;"

  res &lt;- SDA_query(q)
  str(res)

  ## get tabular data based on result from spatial query
  # there is no need to filter STATSGO because
  # SDA_Get_Mukey_from_intersection_with_WktWgs84() implies SSURGO
  p &lt;- wk::as_wkt(wk::rct(-120.9, 37.7, -120.8, 37.8))
  q &lt;- paste0("SELECT mukey, cokey, compname, comppct_r FROM component
      WHERE mukey IN (SELECT DISTINCT mukey FROM
      SDA_Get_Mukey_from_intersection_with_WktWgs84('", p,
       "')) ORDER BY mukey, cokey, comppct_r DESC")

   x &lt;- SDA_query(q)
   str(x)

</code></pre>

<hr>
<h2 id='SDA_spatialQuery'>Query Soil Data Access by spatial intersection with supplied geometry</h2><span id='topic+SDA_spatialQuery'></span>

<h3>Description</h3>

<p>Query SDA (SSURGO / STATSGO) records via spatial intersection with supplied geometries. Input can be SpatialPoints, SpatialLines, or SpatialPolygons objects with a valid CRS. Map unit keys, overlapping polygons, or the spatial intersection of <code>geom</code> + SSURGO / STATSGO polygons can be returned. See details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SDA_spatialQuery(
  geom,
  what = "mukey",
  geomIntersection = FALSE,
  db = c("SSURGO", "STATSGO", "SAPOLYGON"),
  byFeature = FALSE,
  idcol = "gid",
  query_string = FALSE,
  as_Spatial = getOption("soilDB.return_Spatial", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SDA_spatialQuery_+3A_geom">geom</code></td>
<td>
<p>an <code>sf</code> or <code style="white-space: pre;">&#8288;Spatial*&#8288;</code> object, with valid CRS. May contain multiple features.</p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_what">what</code></td>
<td>
<p>a character vector specifying what to return. <code>'mukey'</code>: <code>data.frame</code> with intersecting map unit keys and names, <code>'mupolygon'</code> overlapping or intersecting map unit polygons from selected database, <code>'areasymbol'</code>: <code>data.frame</code> with intersecting soil survey areas, <code>'sapolygon'</code>: overlapping or intersecting soil survey area polygons (SSURGO only)</p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_geomintersection">geomIntersection</code></td>
<td>
<p>logical; <code>FALSE</code>: overlapping map unit polygons returned, <code>TRUE</code>: intersection of <code>geom</code> + map unit polygons is returned.</p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_db">db</code></td>
<td>
<p>a character vector identifying the Soil Geographic Databases (<code>'SSURGO'</code> or <code>'STATSGO'</code>) to query. Option <var>STATSGO</var> works with <code>what = "mukey"</code> and <code>what = "mupolygon"</code>.</p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_byfeature">byFeature</code></td>
<td>
<p>Iterate over features, returning a combined data.frame where each feature is uniquely identified by value in <code>idcol</code>. Default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_idcol">idcol</code></td>
<td>
<p>Unique IDs used for individual features when <code>byFeature = TRUE</code>; Default <code>"gid"</code></p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_query_string">query_string</code></td>
<td>
<p>Default: <code>FALSE</code>; if <code>TRUE</code> return a character string containing query that would be sent to SDA via <code>SDA_query</code></p>
</td></tr>
<tr><td><code id="SDA_spatialQuery_+3A_as_spatial">as_Spatial</code></td>
<td>
<p>Return sp classes? e.g. <code>Spatial*DataFrame</code>. Default: <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Queries for map unit keys are always more efficient vs. queries for overlapping or intersecting (i.e. least efficient) features. <code>geom</code> is converted to GCS / WGS84 as needed. Map unit keys are always returned when using <code>what = "mupolygon"</code>.
</p>
<p>SSURGO (detailed soil survey, typically 1:24,000 scale) and STATSGO (generalized soil survey, 1:250,000 scale) data are stored together within SDA. This means that queries that don't specify an area symbol may result in a mixture of SSURGO and STATSGO records. See the examples below and the <a href="http://ncss-tech.github.io/AQP/soilDB/SDA-tutorial.html">SDA Tutorial</a> for details.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> if <code>what = 'mukey'</code>, otherwise an <code>sf</code> object. A <code>try-error</code> in the event the request cannot be made or if there is an error in the query.
</p>


<h3>Note</h3>

<p>Row-order is not preserved across features in <code>geom</code> and returned object. Use <code>byFeature</code> argument to iterate over features and return results that are 1:1 with the inputs. Polygon area in acres is computed server-side when <code>what = 'mupolygon'</code> and <code>geomIntersection = TRUE</code>.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G. Brown, D.R. Schlaepfer
</p>


<h3>See Also</h3>

<p><code><a href="#topic+SDA_query">SDA_query</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  if (requireNamespace("aqp") &amp;&amp; requireNamespace("sf")) {

    library(aqp)
    library(sf)

    ## query at a point

    # example point
    p &lt;- sf::st_as_sf(data.frame(x = -119.72330,
                                 y = 36.92204),
                      coords = c('x', 'y'),
                      crs = 4326)

    # query map unit records at this point
    res &lt;- SDA_spatialQuery(p, what = 'mukey')

    # convert results into an SQL "IN" statement
    # useful when there are multiple intersecting records
    mu.is &lt;- format_SQL_in_statement(res$mukey)

    # composite SQL WHERE clause
    sql &lt;- sprintf("mukey IN %s", mu.is)

    # get commonly used map unit / component / chorizon records
    # as a SoilProfileCollection object
    # request that results contain `mukey` with `duplicates = TRUE`
    x &lt;- fetchSDA(sql, duplicates = TRUE)

    # safely set texture class factor levels
    # by making a copy of this column
    # this will save in lieu of textures in the original
    # `texture` column
    horizons(x)$texture.class &lt;- factor(x$texture, levels = SoilTextureLevels())

    # graphical depiction of the result
    plotSPC(x,
            color = 'texture.class',
            label = 'compname',
            name = 'hzname',
            cex.names = 1,
            width = 0.25,
            plot.depth.axis = FALSE,
            hz.depths = TRUE,
            name.style = 'center-center')

    ## query mukey + geometry that intersect with a bounding box

    # define a bounding box: xmin, xmax, ymin, ymax
    #
    #         +-------------------(ymax, xmax)
    #         |                        |
    #         |                        |
    #     (ymin, xmin) ----------------+
    b &lt;- c(-119.747629, -119.67935, 36.912019, 36.944987)

    # convert bounding box to WKT
    bbox.sp &lt;- sf::st_as_sf(wk::rct(
      xmin = b[1], xmax = b[2], ymin = b[3], ymax = b[4],
      crs = sf::st_crs(4326)
    ))

    # results contain associated map unit keys (mukey)
    # return SSURGO polygons, after intersection with provided BBOX
    ssurgo.geom &lt;- SDA_spatialQuery(
      bbox.sp,
      what = 'mupolygon',
      db = 'SSURGO',
      geomIntersection = TRUE
    )

    # return STATSGO polygons, after intersection with provided BBOX
    statsgo.geom &lt;- SDA_spatialQuery(
      bbox.sp,
      what = 'mupolygon',
      db = 'STATSGO',
      geomIntersection = TRUE
    )

    # inspect results
    par(mar = c(0,0,3,1))
    plot(sf::st_geometry(ssurgo.geom), border = 'royalblue')
    plot(sf::st_geometry(statsgo.geom), lwd = 2, border = 'firebrick', add = TRUE)
    plot(sf::st_geometry(bbox.sp), lwd = 3, add = TRUE)
    legend(
      x = 'topright',
      legend = c('BBOX', 'STATSGO', 'SSURGO'),
      lwd = c(3, 2, 1),
      col = c('black', 'firebrick', 'royalblue'),
    )

    # quick reminder that STATSGO map units often contain many components
    # format an SQL IN statement using the first STATSGO mukey
    mu.is &lt;- format_SQL_in_statement(statsgo.geom$mukey[1])

    # composite SQL WHERE clause
    sql &lt;- sprintf("mukey IN %s", mu.is)

    # get commonly used map unit / component / chorizon records
    # as a SoilProfileCollection object
    x &lt;- fetchSDA(sql)

    # tighter figure margins
    par(mar = c(0,0,3,1))

    # organize component sketches by national map unit symbol
    # color horizons via awc
    # adjust legend title
    # add alternate label (vertical text) containing component percent
    # move horizon names into the profile sketches
    # make profiles wider
    aqp::groupedProfilePlot(x,
                            groups = 'nationalmusym',
                            label = 'compname',
                            color = 'awc_r',
                            col.label = 'Available Water Holding Capacity (cm / cm)',
                            alt.label = 'comppct_r',
                            name.style = 'center-center',
                            width = 0.3
    )

    mtext(
      'STATSGO (1:250,000) map units contain a lot of components!',
      side = 1,
      adj = 0,
      line = -1.5,
      at = 0.25,
      font = 4
    )
  }

## End(Not run)
</code></pre>

<hr>
<h2 id='seriesExtent'>Retrieve Soil Series Extent Maps from SoilWeb</h2><span id='topic+seriesExtent'></span>

<h3>Description</h3>

<p>This function downloads a generalized representations of a soil series extent from SoilWeb, derived from the current SSURGO snapshot. Data can be returned as vector outlines (<code>sf</code> object) or gridded representation of area proportion falling within 800m cells (<code>SpatRaster</code> object). Gridded series extent data are only available in CONUS. Vector representations are returned with a GCS/WGS84 coordinate reference system and raster representations are returned with an Albers Equal Area / NAD83 coordinate reference system (<code>EPSG:5070</code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>seriesExtent(
  s,
  type = c("vector", "raster"),
  timeout = 60,
  as_Spatial = getOption("soilDB.return_Spatial", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="seriesExtent_+3A_s">s</code></td>
<td>
<p>a soil series name, case-insensitive</p>
</td></tr>
<tr><td><code id="seriesExtent_+3A_type">type</code></td>
<td>
<p>series extent representation, <code>'vector'</code>: results in an <code>sf</code> object and <code>'raster'</code> results in a <code>SpatRaster</code> object</p>
</td></tr>
<tr><td><code id="seriesExtent_+3A_timeout">timeout</code></td>
<td>
<p>time that we are willing to wait for a response, in seconds</p>
</td></tr>
<tr><td><code id="seriesExtent_+3A_as_spatial">as_Spatial</code></td>
<td>
<p>Return sp (<code>SpatialPolygonsDataFrame</code>) / raster (<code>RasterLayer</code>) classes? Default: <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An R spatial object, class depending on <code>type</code> and <code>as_Spatial</code> arguments
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p><a href="https://casoilresource.lawr.ucdavis.edu/see/">https://casoilresource.lawr.ucdavis.edu/see/</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
  
  # specify a soil series name
  s &lt;- 'magnor'
  
  # return an sf object
  x &lt;- seriesExtent(s, type = 'vector')
  
  # return a terra SpatRasters
  y &lt;- seriesExtent(s, type = 'raster')
  
  library(terra)
  if (!is.null(x) &amp;&amp; !is.null(y)) {
    x &lt;- terra::vect(x)
    # note that CRS are different
    terra::crs(x)
    terra::crs(y)
  
    # transform vector representation to CRS of raster
    x &lt;- terra::project(x, terra::crs(y))
  
    # graphical comparison
    par(mar = c(1, 1 , 1, 3))
    plot(y, axes = FALSE)
    plot(x, add = TRUE)
  }

## End(Not run)
</code></pre>

<hr>
<h2 id='siblings'>Get &quot;siblings&quot; and &quot;cousins&quot; for a given soil series</h2><span id='topic+siblings'></span>

<h3>Description</h3>

<p>Look up siblings and cousins for a given soil series from the current fiscal year SSURGO snapshot via SoilWeb.
</p>
<p>The siblings of any given soil series are defined as those soil components (major and minor) that share a parent map unit with the named series (as a major component). Component names are filtered using a snapshot of the Soil Classification database to ensure that only valid soil series names are included. Cousins are siblings of siblings. Data are sourced from SoilWeb which maintains a copy of the current SSURGO snapshot. Visualizations of soil &quot;siblings&quot;-related concepts can be found in the &quot;Sibling Summary&quot; tab of Soil Data Explorer app: <a href="https://casoilresource.lawr.ucdavis.edu/sde/">https://casoilresource.lawr.ucdavis.edu/sde/</a>.
</p>
<p>Additional resources:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/soil-series-query-functions.html">Soil Series Query Functions</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/siblings.html">Soil &quot;Siblings&quot; Tutorial</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/presentations/beaudette-soil-networks-2019-www.pdf">SSSA 2019 Presentation - Mapping Soilscapes Using Soil Co-Occurrence Networks</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>siblings(s, only.major = FALSE, component.data = FALSE, cousins = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="siblings_+3A_s">s</code></td>
<td>
<p>character vector, the name of a single soil series, case-insensitive.</p>
</td></tr>
<tr><td><code id="siblings_+3A_only.major">only.major</code></td>
<td>
<p>logical, should only return siblings that are major components</p>
</td></tr>
<tr><td><code id="siblings_+3A_component.data">component.data</code></td>
<td>
<p>logical, should component data for siblings (and optionally cousins) be returned?</p>
</td></tr>
<tr><td><code id="siblings_+3A_cousins">cousins</code></td>
<td>
<p>logical, should siblings-of-siblings (cousins) be returned?</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>list</code> containing:
</p>

<ul>
<li><p> sib: <code>data.frame</code> containing siblings, major component flag, and number of co-occurrences
</p>
</li>
<li><p> sib.data: <code>data.frame</code> containing sibling component data (only when <code>component.data = TRUE</code>)
</p>
</li>
<li><p> cousins: <code>data.frame</code> containing cousins, major component flag, and number of co-occurrences (only when <code>cousins = TRUE</code>)
</p>
</li>
<li><p> cousin.data: <code>data.frame</code> containing cousin component data (only when <code style="white-space: pre;">&#8288;cousins = TRUE, component.data = TRUE&#8288;</code>)
</p>
</li></ul>



<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>O'Geen, A., Walkinshaw, M. and Beaudette, D. (2017), SoilWeb: A Multifaceted Interface to Soil Survey Information. Soil Science Society of America Journal, 81: 853-862. <a href="https://doi.org/10.2136/sssaj2016.11.0386n">doi:10.2136/sssaj2016.11.0386n</a>
</p>


<h3>See Also</h3>

<p><a href="#topic+OSDquery">OSDquery</a>, <a href="#topic+siblings">siblings</a>, <a href="#topic+fetchOSD">fetchOSD</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>


    # basic usage
    x &lt;- siblings('zook')
    x$sib
    
    # restrict to siblings that are major components
    # e.g. the most likely siblings
    x &lt;- siblings('zook', only.major = TRUE)
    x$sib

</code></pre>

<hr>
<h2 id='simplifyArtifactData'>Simplify Coarse Fraction Data</h2><span id='topic+simplifyArtifactData'></span><span id='topic+simplifyFragmentData'></span>

<h3>Description</h3>

<p>Simplify multiple coarse fraction (&gt;2mm) records by horizon.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simplifyArtifactData(
  art,
  id.var,
  vol.var = "huartvol",
  nullFragsAreZero = nullFragsAreZero,
  ...
)

simplifyFragmentData(
  rf,
  id.var,
  vol.var = "fragvol",
  prefix = "frag",
  nullFragsAreZero = TRUE,
  msg = "rock fragment volume",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simplifyArtifactData_+3A_art">art</code></td>
<td>
<p>a <code>data.frame</code> object, typically returned from NASIS, see details</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_id.var">id.var</code></td>
<td>
<p>character vector with the name of the column containing an ID
that is unique among all horizons in <code>rf</code></p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_vol.var">vol.var</code></td>
<td>
<p>character vector with the name of the column containing the coarse fragment volume. Default <code>"fragvol"</code> or <code style="white-space: pre;">&#8288;"huartvol&#8288;</code>&quot;.</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_nullfragsarezero">nullFragsAreZero</code></td>
<td>
<p>should fragment volumes of NULL be interpreted as 0? (default: <code>TRUE</code>), see details</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_...">...</code></td>
<td>
<p>Additional arguments passed to sieving function (e.g. <code>sieves</code> a named numeric containing sieve size thresholds with class name)</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_rf">rf</code></td>
<td>
<p>a <code>data.frame</code> object, typically returned from NASIS, see
details</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_prefix">prefix</code></td>
<td>
<p>a character vector prefix for input</p>
</td></tr>
<tr><td><code id="simplifyArtifactData_+3A_msg">msg</code></td>
<td>
<p>Identifier of data being summarized. Default is <code>"rock fragment volume"</code> but this routine is also used for <code>"surface fragment cover"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is mainly intended for processing of NASIS pedon/component
data which contains multiple coarse fragment descriptions per horizon.
<code>simplifyFragmentData</code> will &quot;sieve out&quot; coarse fragments into the USDA
classes, split into hard and para- fragments. Likewise, <code>simplifyArtifactData</code> will sieve out human artifacts, and split total volume into &quot;cohesive&quot;, &quot;penetrable&quot;, &quot;innocuous&quot;, and &quot;persistent&quot;.
</p>
<p>These functions can be applied to data sources other than NASIS by careful use of the <code>id.var</code> and <code>vol.var</code> arguments.
</p>

<ul>
<li> <p><code>rf</code> must contain rock or other fragment volumes in the column &quot;fragvol&quot; (or be specified with <code>vol.var</code>), fragment size (mm) in columns &quot;fragsize_l&quot;, &quot;fragsize_r&quot;, &quot;fragsize_h&quot;, fragment cementation class in &quot;fraghard&quot; and flat/non-flat in &quot;fragshp&quot;.
</p>
</li>
<li> <p><code>art</code> must contain artifact volumes in the column &quot;huartvol&quot; (or be specified with <code>vol.var</code>), fragment size (mm) in columns &quot;huartsize_l&quot;, &quot;huartsize_r&quot;, &quot;huartsize_h&quot;, artifact cementation class in &quot;huarthard&quot; and flat/non-flat in &quot;huartshp&quot;.
</p>
</li></ul>

<p>Examples:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/KSSL-demo.html">KSSL data</a>
</p>
</li></ul>



<h3>Author(s)</h3>

<p>D.E. Beaudette, A.G Brown
</p>

<hr>
<h2 id='simplifyColorData'>Simplify Color Data by ID</h2><span id='topic+simplifyColorData'></span>

<h3>Description</h3>

<p>Simplify multiple Munsell color observations associated with each horizon.
</p>
<p>This function is mainly intended for the processing of NASIS pedon/horizon
data which may or may not contain multiple colors per horizon/moisture
status combination. <code>simplifyColorData</code> will &quot;mix&quot; multiple colors
associated with horizons in <code>d</code>, according to IDs specified by
<code>id.var</code>, using &quot;weights&quot; (area percentages) specified by the <code>wt</code>
argument to <code>mix_and_clean_colors</code>.
</p>
<p>Note that this function doesn't actually simulate the mixture of pigments on
a surface, rather, &quot;mixing&quot; is approximated via weighted average in the
CIELAB colorspace.
</p>
<p>The <code>simplifyColorData</code> function can be applied to data sources other
than NASIS by careful use of the <code>id.var</code> and <code>wt</code> arguments.
However, <code>d</code> must contain Munsell colors split into columns named
&quot;colorhue&quot;, &quot;colorvalue&quot;, and &quot;colorchroma&quot;. In addition, the moisture state
(&quot;Dry&quot; or &quot;Moist&quot;) must be specified in a column named &quot;colormoistst&quot;.
</p>
<p>The <code>mix_and_clean_colors</code> function can be applied to arbitrary data
sources as long as <code>x</code> contains sRGB coordinates in columns named &quot;r&quot;,
&quot;g&quot;, and &quot;b&quot;. This function should be applied to chunks of rows within which
color mixtures make sense.
</p>
<p>Examples:
</p>

<ul>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/KSSL-demo.html">KSSL data</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/mixing-soil-color-data.html">soil color mixing tutorial</a>
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>simplifyColorData(d, id.var = "phiid", wt = "colorpct", bt = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simplifyColorData_+3A_d">d</code></td>
<td>
<p>a <code>data.frame</code> object, typically returned from NASIS, see
details</p>
</td></tr>
<tr><td><code id="simplifyColorData_+3A_id.var">id.var</code></td>
<td>
<p>character vector with the name of the column containing an ID
that is unique among all horizons in <code>d</code></p>
</td></tr>
<tr><td><code id="simplifyColorData_+3A_wt">wt</code></td>
<td>
<p>a character vector with the name of the column containing color
weights for mixing</p>
</td></tr>
<tr><td><code id="simplifyColorData_+3A_bt">bt</code></td>
<td>
<p>logical, should the mixed sRGB representation of soil color be
transformed to closest Munsell chips? This is performed by <code><a href="aqp.html#topic+col2Munsell">aqp::col2Munsell()</a></code></p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>

<hr>
<h2 id='soilColor.wcs'>Get 30m or 270m gridded soil soil color data from SoilWeb Web Coverage Service (WCS)</h2><span id='topic+soilColor.wcs'></span>

<h3>Description</h3>

<p>Moist soil colors, 2022.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soilColor.wcs(aoi, var, res = 270, quiet = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="soilColor.wcs_+3A_aoi">aoi</code></td>
<td>
<p>area of interest (AOI) defined using a <code>Spatial*</code>, <code>RasterLayer</code>, <code>sf</code>, <code>sfc</code> or <code>bbox</code> object, OR a <code>list</code>, see details</p>
</td></tr>
<tr><td><code id="soilColor.wcs_+3A_var">var</code></td>
<td>
<p>soil color grid name (case insensitive), see details</p>
</td></tr>
<tr><td><code id="soilColor.wcs_+3A_res">res</code></td>
<td>
<p>grid resolution, units of meters, typically '270', or '30', depending on <code>var</code>. See details.</p>
</td></tr>
<tr><td><code id="soilColor.wcs_+3A_quiet">quiet</code></td>
<td>
<p>logical, passed to <code>curl::curl_download</code> to enable / suppress URL and progress bar for download.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>aoi</code> should be specified as a <code>SpatRaster</code>, <code>Spatial*</code>, <code>RasterLayer</code>, <code>SpatRaster</code>/<code>SpatVector</code>, <code>sf</code>, <code>sfc</code>, or <code>bbox</code> object or a <code>list</code> containing:
</p>

<dl>
<dt><code>aoi</code></dt><dd><p>bounding-box specified as (xmin, ymin, xmax, ymax) e.g. c(-114.16, 47.65, -114.08, 47.68)</p>
</dd>
<dt><code>crs</code></dt><dd><p>coordinate reference system of BBOX, e.g. 'OGC:CRS84' (EPSG:4326, WGS84 Longitude/Latitude)</p>
</dd>
</dl>

<p>The WCS query is parameterized using a rectangular extent derived from the above AOI specification, after conversion to the native CRS (EPSG:5070) of the soil color grids.
</p>
<p>Variables available from this WCS can be queried using <code>WCS_details(wcs = 'soilColor')</code>. The full resolution version of the soil color grids use a <code>hr</code> suffix, e.g. 'sc025cm_hr'.
</p>


<h3>Value</h3>

<p>A SpatRaster (or RasterLayer) object containing indexed map unit keys and associated raster attribute table or a try-error if request fails. By default, spatial classes from the <code>terra</code> package are returned. If the input object class is from the <code>raster</code> or <code>sp</code> packages a RasterLayer is returned.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(terra)

# see WCS_details() for variable options
WCS_details(wcs = 'soilColor')

# moist soil color at 25cm, 270m version
res &lt;- soilColor.wcs(list(aoi = c(-116, 35, -115.5, 35.5), crs = "EPSG:4326"), 
                   var = 'sc025cm', res = 270)

# note colors and other metadata are stored
# in raster attribute table
plot(res, col = cats(res)[[1]]$col, axes = FALSE, legend = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='soilDB.env'>Get the soilDB environment used for storing error messages and quality control output</h2><span id='topic+soilDB.env'></span><span id='topic+get_soilDB_env'></span>

<h3>Description</h3>

<p>The soilDB package uses an environment to store variables that are created as side effects of various data access and processing routines.
<code>get_soilDB_env()</code> provides a method to access this environment from the global (user) environment.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>soilDB.env

get_soilDB_env()
</code></pre>


<h3>Format</h3>

<p>An object of class <code>environment</code> of length 0.
</p>


<h3>Value</h3>

<p>a <code>environment</code> object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_soilDB_env()
</code></pre>

<hr>
<h2 id='SoilWeb_spatial_query'>Get SSURGO Data via Spatial Query</h2><span id='topic+SoilWeb_spatial_query'></span>

<h3>Description</h3>

<p>Get SSURGO Data via Spatial Query to SoilWeb
</p>
<p>Data are currently available from SoilWeb. These data are a snapshot of the
&quot;official&quot; data. The snapshot date is encoded in the &quot;soilweb_last_update&quot;
column in the function return value. Planned updates to this function will
include a switch to determine the data source: &quot;official&quot; data via USDA-NRCS
servers, or a &quot;snapshot&quot; via SoilWeb.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>SoilWeb_spatial_query(
  bbox = NULL,
  coords = NULL,
  what = "mapunit",
  source = "soilweb"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SoilWeb_spatial_query_+3A_bbox">bbox</code></td>
<td>
<p>a bounding box in WGS84 geographic coordinates, see examples</p>
</td></tr>
<tr><td><code id="SoilWeb_spatial_query_+3A_coords">coords</code></td>
<td>
<p>a coordinate pair in WGS84 geographic coordinates, see
examples</p>
</td></tr>
<tr><td><code id="SoilWeb_spatial_query_+3A_what">what</code></td>
<td>
<p>data to query, currently ignored</p>
</td></tr>
<tr><td><code id="SoilWeb_spatial_query_+3A_source">source</code></td>
<td>
<p>the data source, currently ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The data returned from this function will depend on the query style.
See examples below.
</p>


<h3>Note</h3>

<p>SDA now supports spatial queries, consider using <code><a href="#topic+SDA_spatialQuery">SDA_spatialQuery()</a></code> instead.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>Examples</h3>

<pre><code class='language-R'>



    # query by bbox
    SoilWeb_spatial_query(bbox=c(-122.05, 37, -122, 37.05))
    
    # query by coordinate pair
    SoilWeb_spatial_query(coords=c(-121, 38))


</code></pre>

<hr>
<h2 id='STRplot'>Graphical Description of US Soil Taxonomy Soil Temperature Regimes</h2><span id='topic+STRplot'></span>

<h3>Description</h3>

<p>Graphical Description of US Soil Taxonomy Soil Temperature Regimes
</p>


<h3>Usage</h3>

<pre><code class='language-R'>STRplot(mast, msst, mwst, permafrost = FALSE, pt.cex = 2.75, leg.cex = 0.85)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="STRplot_+3A_mast">mast</code></td>
<td>
<p>single value or vector of mean annual soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="STRplot_+3A_msst">msst</code></td>
<td>
<p>single value or vector of mean summer soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="STRplot_+3A_mwst">mwst</code></td>
<td>
<p>single value of mean winter soil temperature (deg C)</p>
</td></tr>
<tr><td><code id="STRplot_+3A_permafrost">permafrost</code></td>
<td>
<p>logical: permafrost presence / absence</p>
</td></tr>
<tr><td><code id="STRplot_+3A_pt.cex">pt.cex</code></td>
<td>
<p>symbol size</p>
</td></tr>
<tr><td><code id="STRplot_+3A_leg.cex">leg.cex</code></td>
<td>
<p>legend size</p>
</td></tr>
</table>


<h3>Details</h3>

<p><a href="http://ncss-tech.github.io/AQP/soilDB/STR-eval.html">Soil Temperature Regime Evaluation Tutorial</a>
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>References</h3>

<p>Soil Survey Staff. 2015. Illustrated guide to soil taxonomy.
U.S. Department of Agriculture, Natural Resources Conservation Service,
National Soil Survey Center, Lincoln, Nebraska.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+estimateSTR">estimateSTR</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
par(mar=c(4,1,0,1))
STRplot(mast = 0:25, msst = 10, mwst = 1)
</code></pre>

<hr>
<h2 id='summarizeSoilTemperature'>Get data from Henry Mount Soil Temperature and Water Database</h2><span id='topic+summarizeSoilTemperature'></span><span id='topic+month2season'></span><span id='topic+fetchHenry'></span>

<h3>Description</h3>

<p>This function is a front-end to the REST query functionality of the Henry
Mount Soil Temperature and Water Database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarizeSoilTemperature(soiltemp.data)

month2season(x)

fetchHenry(
  what = "all",
  usersiteid = NULL,
  project = NULL,
  sso = NULL,
  gran = "day",
  start.date = NULL,
  stop.date = NULL,
  pad.missing.days = TRUE,
  soiltemp.summaries = TRUE,
  tz = ""
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarizeSoilTemperature_+3A_soiltemp.data">soiltemp.data</code></td>
<td>
<p>A <code>data.frame</code> containing soil temperature data</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_x">x</code></td>
<td>
<p>character vector containing month abbreviation e.g. <code>c('Jun', 'Dec', 'Sep')</code></p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_what">what</code></td>
<td>
<p>type of data to return: 'sensors': sensor metadata only |
'soiltemp': sensor metadata + soil temperature data | 'soilVWC': sensor
metadata + soil moisture data | 'airtemp': sensor metadata + air temperature
data | 'waterlevel': sensor metadata + water level data |'all': sensor
metadata + all sensor data</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_usersiteid">usersiteid</code></td>
<td>
<p>(optional) filter results using a NASIS user site ID</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_project">project</code></td>
<td>
<p>(optional) filter results using a project ID</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_sso">sso</code></td>
<td>
<p>(optional) filter results using a soil survey office code</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_gran">gran</code></td>
<td>
<p>data granularity: &quot;hour&quot; (if available), &quot;day&quot;, &quot;week&quot;, &quot;month&quot;, &quot;year&quot;; returned data
are averages</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_start.date">start.date</code></td>
<td>
<p>(optional) starting date filter</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_stop.date">stop.date</code></td>
<td>
<p>(optional) ending date filter</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_pad.missing.days">pad.missing.days</code></td>
<td>
<p>should missing data (&quot;day&quot; granularity) be filled
with NA? see details</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_soiltemp.summaries">soiltemp.summaries</code></td>
<td>
<p>should soil temperature (&quot;day&quot; granularity only)
be summarized? see details</p>
</td></tr>
<tr><td><code id="summarizeSoilTemperature_+3A_tz">tz</code></td>
<td>
<p>Used for custom timezone. Default <code>""</code> is current locale</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Filling missing days with NA is useful for computing and index of how
complete the data are, and for estimating (mostly) unbiased MAST and
seasonal mean soil temperatures. Summaries are computed by first averaging
over Julian day, then averaging over all days of the year (MAST) or just
those days that occur within &quot;summer&quot; or &quot;winter&quot;. This approach makes it
possible to estimate summaries in the presence of missing data. The quality
of summaries should be weighted by the number of &quot;functional years&quot; (number
of years with non-missing data after combining data by Julian day) and
&quot;complete years&quot; (number of years of data with &gt;= 365 days of non-missing
data).
</p>
<p>See:
</p>

<ul>
<li> <p><a href="http://soilmap2-1.lawr.ucdavis.edu/henry/">Henry Mount Soil Climate Database</a>
</p>
</li>
<li> <p><a href="http://ncss-tech.github.io/AQP/soilDB/Henry-demo.html"><code>fetchHenry</code> Tutorial</a>
</p>
</li></ul>



<h3>Value</h3>

<p>a list containing: </p>
<table>
<tr><td><code>sensors</code></td>
<td>
<p>a <code>sf</code> <code>data.frame</code>
object containing site-level information</p>
</td></tr> <tr><td><code>soiltemp</code></td>
<td>
<p>a
<code>data.frame</code> object containing soil temperature timeseries data</p>
</td></tr>
<tr><td><code>soilVWC</code></td>
<td>
<p>a <code>data.frame</code> object containing soil moisture
timeseries data</p>
</td></tr> <tr><td><code>airtemp</code></td>
<td>
<p>a <code>data.frame</code> object containing air
temperature timeseries data</p>
</td></tr> <tr><td><code>waterlevel</code></td>
<td>
<p>a <code>data.frame</code> object
containing water level timeseries data</p>
</td></tr>
</table>


<h3>Note</h3>

<p>This function and the back-end database are very much a work in
progress.
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>See Also</h3>

<p><code><a href="#topic+fetchSCAN">fetchSCAN</a></code>
</p>

<hr>
<h2 id='taxaExtent'>Get SoilWeb 800m Major Component Soil Taxonomy Grids</h2><span id='topic+taxaExtent'></span>

<h3>Description</h3>

<p>This function downloads a generalized representation of the geographic extent of any single taxon from the top 4 levels of Soil Taxonomy, or taxa matching a given formative element used in Great Group or subgroup taxa. Data are provided by SoilWeb, ultimately sourced from the current SSURGO snapshot. Data are returned as <code>raster</code> objects representing area proportion falling within 800m cells. Currently area proportions are based on major components only. Data are only available in CONUS and returned using an Albers Equal Area / NAD83(2011) coordinate reference system (EPSG: 5070).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>taxaExtent(
  x,
  level = c("order", "suborder", "greatgroup", "subgroup"),
  formativeElement = FALSE,
  timeout = 60,
  as_Spatial = getOption("soilDB.return_Spatial", default = FALSE)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="taxaExtent_+3A_x">x</code></td>
<td>
<p>single taxon label (e.g. <code>haploxeralfs</code>) or formative element (e.g. <code>pale</code>), case-insensitive</p>
</td></tr>
<tr><td><code id="taxaExtent_+3A_level">level</code></td>
<td>
<p>the taxonomic level within the top 4 tiers of Soil Taxonomy, one of <code>'order'</code>, <code>'suborder'</code>, <code>'greatgroup'</code>, <code>'subgroup'</code></p>
</td></tr>
<tr><td><code id="taxaExtent_+3A_formativeelement">formativeElement</code></td>
<td>
<p>logical, search using formative elements instead of taxon label</p>
</td></tr>
<tr><td><code id="taxaExtent_+3A_timeout">timeout</code></td>
<td>
<p>time that we are willing to wait for a response, in seconds</p>
</td></tr>
<tr><td><code id="taxaExtent_+3A_as_spatial">as_Spatial</code></td>
<td>
<p>Return raster (<code>RasterLayer</code>) classes? Default: <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See the <a href="https://ncss-tech.github.io/AQP/soilDB/taxa-extent.html">Geographic Extent of Soil Taxa</a> tutorial for more detailed examples.
</p>


<h4>Taxon Queries</h4>

<p>Taxon labels can be conveniently extracted from the <code>"ST_unique_list"</code> sample data, provided by the <a href="https://github.com/ncss-tech/SoilTaxonomy">SoilTaxonomy package</a>.
</p>



<h4>Formative Element Queries</h4>



<h5>Greatgroup:</h5>

<p>The following labels are used to access taxa containing the following formative elements (in parentheses)
</p>

<ul>
<li><p> acr: (acro/acr) extreme weathering
</p>
</li>
<li><p> alb: (alb) presence of an albic horizon
</p>
</li>
<li><p> anhy: (anhy) very dry
</p>
</li>
<li><p> anthra: (anthra) presence of an anthropic epipedon
</p>
</li>
<li><p> aqu: (aqui/aqu) wetness
</p>
</li>
<li><p> argi: (argi) presence of an argillic horizon
</p>
</li>
<li><p> calci: (calci) presence of a calcic horizon
</p>
</li>
<li><p> cry: (cryo/cry) cryic STR
</p>
</li>
<li><p> dur: (duri/dur) presence of a duripan
</p>
</li>
<li><p> dystr: (dystro/dystr) low base saturation
</p>
</li>
<li><p> endo: (endo) ground water table
</p>
</li>
<li><p> epi: (epi) perched water table
</p>
</li>
<li><p> eutr: (eutro/eutr) high base saturation
</p>
</li>
<li><p> ferr: (ferr) presence of Fe
</p>
</li>
<li><p> fibr: (fibr) least decomposed stage
</p>
</li>
<li><p> fluv: (fluv) flood plain
</p>
</li>
<li><p> fol: (fol) mass of leaves
</p>
</li>
<li><p> fragi: (fragi) presence of a fragipan
</p>
</li>
<li><p> fragloss: (fragloss) presence of a fragipan and glossic horizon
</p>
</li>
<li><p> frasi: (frasi) not salty
</p>
</li>
<li><p> fulv: (fulvi/fulv) dark brown with organic carbon
</p>
</li>
<li><p> glac: (glac) presence of ice lenses
</p>
</li>
<li><p> gloss: (glosso/gloss) presence of a glossic horizon
</p>
</li>
<li><p> gypsi: (gypsi) presence of a gypsic horizon
</p>
</li>
<li><p> hal: (hal) salty
</p>
</li>
<li><p> hemi: (hemi) intermediate decomposition
</p>
</li>
<li><p> hist: (histo/hist) organic soil material
</p>
</li>
<li><p> hum: (humi/hum) presence of organic carbon
</p>
</li>
<li><p> hydr: (hydro/hydr) presence of water
</p>
</li>
<li><p> kandi: (kandi) presence of a kandic horizon
</p>
</li>
<li><p> kanhap: (kanhaplo/kanhap) thin kandic horizon
</p>
</li>
<li><p> luvi: (luvi) illuvial organic material
</p>
</li>
<li><p> melan: (melano/melan) presence of a melanic epipedon
</p>
</li>
<li><p> moll: (molli/moll) presence of a mollic epipedon
</p>
</li>
<li><p> natr: (natri/natr) presence of a natric horizon
</p>
</li>
<li><p> pale: (pale) excessive development
</p>
</li>
<li><p> petr: (petro/petr) petrocalcic horizon
</p>
</li>
<li><p> plac: (plac) presence of a thin pan
</p>
</li>
<li><p> plagg: (plagg) presence of a plaggen epipedon
</p>
</li>
<li><p> plinth: (plinth) presence of plinthite
</p>
</li>
<li><p> psamm: (psammo/psamm) sandy texture
</p>
</li>
<li><p> quartzi: (quartzi) high quartz content
</p>
</li>
<li><p> rhod: (rhodo/rhod) dark red colors
</p>
</li>
<li><p> sal: (sali/sal) presence of a salic horizon
</p>
</li>
<li><p> sapr: (sapr) most decomposed stage
</p>
</li>
<li><p> sombri: (sombri) presence of a sombric horizon
</p>
</li>
<li><p> sphagno: (sphagno) presence of sphagnum moss
</p>
</li>
<li><p> sulf: (sulfo/sulfi/sulf) presence of sulfides or their oxidation products
</p>
</li>
<li><p> torri: (torri) torric/aridic SMR
</p>
</li>
<li><p> ud: (udi/ud) udic SMR
</p>
</li>
<li><p> umbr: (umbri/umbr) presence of an umbric epipedon
</p>
</li>
<li><p> ust: (usti/ust) ustic SMR
</p>
</li>
<li><p> verm: (verm) wormy, or mixed by animals
</p>
</li>
<li><p> vitr: (vitri/vitr) presence of glass
</p>
</li>
<li><p> xer: (xero/xer) xeric SMR
</p>
</li></ul>




<h5>Subgroup:</h5>

<p>The following labels are used to access taxa containing the following formative elements (in parenthesis).
</p>

<ul>
<li><p> abruptic: (abruptic) abrupt textural change
</p>
</li>
<li><p> acric: (acric) low apparent CEC
</p>
</li>
<li><p> aeric: (aeric) more aeration than typic subgroup
</p>
</li>
<li><p> albaquic: (albaquic) presence of albic minerals, wetter than typic subgroup
</p>
</li>
<li><p> albic: (albic) presence of albic minerals
</p>
</li>
<li><p> alfic: (alfic) presence of an argillic or kandic horizon
</p>
</li>
<li><p> alic: (alic) high extractable Al content
</p>
</li>
<li><p> anionic: (anionic) low CEC or positively charged
</p>
</li>
<li><p> anthraquic: (anthraquic) human controlled flooding as in paddy rice culture
</p>
</li>
<li><p> anthropic: (anthropic) an anthropic epipedon
</p>
</li>
<li><p> aquic: (aquic) wetter than typic subgroup
</p>
</li>
<li><p> arenic: (arenic) 50-100cm sandy textured surface
</p>
</li>
<li><p> argic: (argic) argillic horizon
</p>
</li>
<li><p> aridic: (aridic) more aridic than typic subgroup
</p>
</li>
<li><p> calcic: (calcic) presence of a calcic horizon
</p>
</li>
<li><p> chromic: (chromic) high chroma colors
</p>
</li>
<li><p> cumulic: (cumulic) thickened epipedon
</p>
</li>
<li><p> duric: (duric) presence of a duripan
</p>
</li>
<li><p> durinodic: (durinodic) presence of durinodes
</p>
</li>
<li><p> dystric: (dystric) lower base saturation percentage
</p>
</li>
<li><p> entic: (entic) minimal surface/subsurface development
</p>
</li>
<li><p> eutric: (eutric) higher base saturation percentage
</p>
</li>
<li><p> fibric: (fibric) &gt;25cm of fibric material
</p>
</li>
<li><p> fluvaquentic: (fluvaquentic) wetter than typic subgroup, evidence of stratification
</p>
</li>
<li><p> fragiaquic: (fragiaquic) presence of fragic properties, wetter than typic subgroup
</p>
</li>
<li><p> fragic: (fragic) presence of fragic properties
</p>
</li>
<li><p> glacic: (glacic) presence of ice lenses or wedges
</p>
</li>
<li><p> glossaquic: (glossaquic) interfingered horizon boundaries, wetter than typic subgroup
</p>
</li>
<li><p> glossic: (glossic) interfingered horizon boundaries
</p>
</li>
<li><p> grossarenic: (grossarenic) &gt;100cm sandy textured surface
</p>
</li>
<li><p> gypsic: (gypsic) presence of gypsic horizon
</p>
</li>
<li><p> halic: (halic) salty
</p>
</li>
<li><p> haplic: (haplic) central theme of subgroup concept
</p>
</li>
<li><p> hemic: (hemic) &gt;25cm of hemic organic material
</p>
</li>
<li><p> humic: (humic) higher organic matter content
</p>
</li>
<li><p> hydric: (hydric) presence of water
</p>
</li>
<li><p> kandic: (kandic) low activity clay present
</p>
</li>
<li><p> lamellic: (lamellic) presence of lamellae
</p>
</li>
<li><p> leptic: (leptic) thinner than typic subgroup
</p>
</li>
<li><p> limnic: (limnic) presence of a limnic layer
</p>
</li>
<li><p> lithic: (lithic) shallow lithic contact present
</p>
</li>
<li><p> natric: (natric) presence of sodium
</p>
</li>
<li><p> nitric: (nitric) presence of nitrate salts
</p>
</li>
<li><p> ombroaquic: (ombroaquic) surface wetness
</p>
</li>
<li><p> oxyaquic: (oxyaquic) water saturated but not reduced
</p>
</li>
<li><p> pachic: (pachic) epipedon thicker than typic subgroup
</p>
</li>
<li><p> petrocalcic: (petrocalcic) presence of a petrocalcic horizon
</p>
</li>
<li><p> petroferric: (petroferric) presence of petroferric contact
</p>
</li>
<li><p> petrogypsic: (petrogypsic) presence of a petrogypsic horizon
</p>
</li>
<li><p> petronodic: (petronodic) presence of concretions and/or nodules
</p>
</li>
<li><p> placic: (placic) presence of a placic horizon
</p>
</li>
<li><p> plinthic: (plinthic) presence of plinthite
</p>
</li>
<li><p> rhodic: (rhodic) darker red colors than typic subgroup
</p>
</li>
<li><p> ruptic: (ruptic) intermittent horizon
</p>
</li>
<li><p> salic: (salic) presence of a salic horizon
</p>
</li>
<li><p> sapric: (sapric) &gt;25cm of sapric organic material
</p>
</li>
<li><p> sodic: (sodic) high exchangeable Na content
</p>
</li>
<li><p> sombric: (sombric) presence of a sombric horizon
</p>
</li>
<li><p> sphagnic: (sphagnic) sphagnum organic material
</p>
</li>
<li><p> sulfic: (sulfic) presence of sulfides
</p>
</li>
<li><p> terric: (terric) mineral substratum within 1 meter
</p>
</li>
<li><p> thapto: (thaptic/thapto) presence of a buried soil horizon
</p>
</li>
<li><p> turbic: (turbic) evidence of cryoturbation
</p>
</li>
<li><p> udic: (udic) more humid than typic subgroup
</p>
</li>
<li><p> umbric: (umbric) presence of an umbric epipedon
</p>
</li>
<li><p> ustic: (ustic) more ustic than typic subgroup
</p>
</li>
<li><p> vermic: (vermic) animal mixed material
</p>
</li>
<li><p> vitric: (vitric) presence of glassy material
</p>
</li>
<li><p> xanthic: (xanthic) more yellow than typic subgroup
</p>
</li>
<li><p> xeric: (xeric) more xeric than typic subgroup
</p>
</li></ul>





<h3>Value</h3>

<p>a <code>SpatRaster</code> object (or <code>RasterLayer</code> when <code>as_Spatial=TRUE</code>)
</p>


<h3>Author(s)</h3>

<p>D.E. Beaudette and A.G. Brown
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## Not run: 
  library(terra)
  
  # soil order
  taxa &lt;- 'vertisols'
  x &lt;- taxaExtent(taxa, level = 'order')
  
  # suborder
  taxa &lt;- 'ustalfs'
  x &lt;- taxaExtent(taxa, level = 'suborder')
  
  # greatgroup
  taxa &lt;- 'haplohumults'
  x &lt;- taxaExtent(taxa, level = 'greatgroup')
  
  # subgroup
  taxa &lt;- 'Typic Haploxerepts'
  x &lt;- taxaExtent(taxa, level = 'subgroup')
  
  # greatgroup formative element
  taxa &lt;- 'psamm'
  x &lt;- taxaExtent(taxa, level = 'greatgroup', formativeElement = TRUE)
  
  # subgroup formative element
  taxa &lt;- 'abruptic'
  x &lt;- taxaExtent(taxa, level = 'subgroup', formativeElement = TRUE)
  
  # coarsen for faster plotting
  a &lt;- terra::aggregate(x, fact = 5, na.rm = TRUE)
  
  # quick evaluation of the result
  terra::plot(a, axes = FALSE)

## End(Not run)
</code></pre>

<hr>
<h2 id='uncode'>Convert coded values returned from NASIS and SDA queries into human-readable values</h2><span id='topic+uncode'></span><span id='topic+code'></span>

<h3>Description</h3>

<p>These functions convert the coded values returned from NASIS or SDA to
factors (e.g. 1 = Alfisols) using the metadata tables from NASIS. For SDA
the metadata is pulled from a static snapshot in the soilDB package
(/data/metadata.rda).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uncode(
  df,
  invert = FALSE,
  db = "NASIS",
  droplevels = FALSE,
  stringsAsFactors = NULL,
  dsn = NULL
)

code(df, db = NULL, droplevels = FALSE, stringsAsFactors = NULL, dsn = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uncode_+3A_df">df</code></td>
<td>
<p>data.frame</p>
</td></tr>
<tr><td><code id="uncode_+3A_invert">invert</code></td>
<td>
<p>converts the code labels back to their coded values (<code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="uncode_+3A_db">db</code></td>
<td>
<p>label specifying the soil database the data is coming from, which
indicates whether or not to query metadata from local NASIS database
(&quot;NASIS&quot;) or use soilDB-local snapshot (&quot;LIMS&quot; or &quot;SDA&quot;)</p>
</td></tr>
<tr><td><code id="uncode_+3A_droplevels">droplevels</code></td>
<td>
<p>logical: indicating whether to drop unused levels in
classifying factors. This is useful when a class has large number of unused
classes, which can waste space in tables and figures.</p>
</td></tr>
<tr><td><code id="uncode_+3A_stringsasfactors">stringsAsFactors</code></td>
<td>
<p>deprecated</p>
</td></tr>
<tr><td><code id="uncode_+3A_dsn">dsn</code></td>
<td>
<p>Optional: path to local SQLite database containing NASIS
table structure; default: <code>NULL</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>These functions convert the coded values returned from NASIS into their
plain text representation. It duplicates the functionality of the CODELABEL
function found in NASIS. This function is primarily intended to be used
internally by other soilDB R functions, in order to minimize the need to
manually convert values.
</p>
<p>The function works by iterating through the column names in a data frame and
looking up whether they match any of the ColumnPhysicalNames found in the
metadata domain tables. If matches are found then the columns coded values
are converted to their corresponding factor levels. Therefore it is not
advisable to reuse column names from NASIS unless the contents match the
range of values and format found in NASIS. Otherwise uncode() will convert
their values to NA.
</p>
<p>When data is being imported from NASIS, the metadata tables are sourced
directly from NASIS. When data is being imported from SDA or the NASIS Web
Reports, the metadata is pulled from a static snapshot in the soilDB
package.
</p>
<p>Set <code>options(soilDB.NASIS.skip_uncode = TRUE)</code> to bypass decoding logic; for instance when using soilDB NASIS functions with custom NASIS snapshots that have already been decoded.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> with the results.
</p>


<h3>Author(s)</h3>

<p>Stephen Roecker
</p>


<h3>Examples</h3>

<pre><code class='language-R'># convert column name `fraghard` (fragment hardness) codes to labels
uncode(data.frame(fraghard = 1:10))

# convert column name `fragshp` (fragment shape) labels to codes
code(data.frame(fragshp = c("flat", "nonflat")))
</code></pre>

<hr>
<h2 id='us_ss_timeline'>Timeline of US Published Soil Surveys</h2><span id='topic+us_ss_timeline'></span>

<h3>Description</h3>

<p>This dataset contains the years of each US Soil Survey was published.
</p>


<h3>Format</h3>

<p>A data.frame with 5209 observations on the following 5 variables.
</p>

<ul>
<li> <p><code>"ssa"</code>: Soil Survey name, a character vector
</p>
</li>
<li> <p><code>"year"</code>: Year of publication, a numeric vector
</p>
</li>
<li> <p><code>"pdf"</code>: Does a manuscript PDF document exist? a logical vector
</p>
</li>
<li> <p><code>"state"</code>: State abbreviation, a character vector
</p>
</li></ul>



<h3>Details</h3>

<p>This data was web scraped from the NRCS Soils Website. The scraping
procedure and a example plot are included in the examples section below.
</p>


<h3>Source</h3>

<p>https://www.nrcs.usda.gov/wps/portal/nrcs/soilsurvey/soils/survey/state/
</p>

<hr>
<h2 id='waterDayYear'>Compute Water Day and Year</h2><span id='topic+waterDayYear'></span>

<h3>Description</h3>

<p>Compute &quot;water&quot; day and year, based on the end of the typical or legal dry
season. This is September 30 in California.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>waterDayYear(d, end = "09-30", format = "%Y-%m-%d", tz = "UTC")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="waterDayYear_+3A_d">d</code></td>
<td>
<p>anything the can be safely converted to <code>POSIXlt</code></p>
</td></tr>
<tr><td><code id="waterDayYear_+3A_end">end</code></td>
<td>
<p>&quot;MM-DD&quot; notation for end of water year</p>
</td></tr>
<tr><td><code id="waterDayYear_+3A_format">format</code></td>
<td>
<p>Used in POSIXlt conversion. Default <code>"%Y-%m-%d"</code></p>
</td></tr>
<tr><td><code id="waterDayYear_+3A_tz">tz</code></td>
<td>
<p>Used in POSIXlt conversion for custom timezone. Default is <code>"UTC"</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function doesn't know about leap-years. Probably worth checking.
</p>


<h3>Value</h3>

<p>A <code>data.frame</code> object with the following </p>
<table>
<tr><td><code>wy</code></td>
<td>
<p>the &quot;water
year&quot;</p>
</td></tr> <tr><td><code>wd</code></td>
<td>
<p>the &quot;water day&quot;</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>D.E. Beaudette
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# try it
waterDayYear('2019-01-01')

</code></pre>

<hr>
<h2 id='WCS_details'>Web Coverage Services Details</h2><span id='topic+WCS_details'></span>

<h3>Description</h3>

<p>List variables or databases provided by soilDB web coverage service (WCS) abstraction. These lists will be expanded in future versions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>WCS_details(wcs = c("mukey", "ISSR800", "soilColor"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="WCS_details_+3A_wcs">wcs</code></td>
<td>
<p>a WCS label ('mukey', 'ISSR800', or 'soilColor')</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a <code>data.frame</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
WCS_details(wcs = 'ISSR800')
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
