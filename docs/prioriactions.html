<!DOCTYPE html><html><head><title>Help for package prioriactions</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {prioriactions}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#data-class'><p>Data class</p></a></li>
<li><a href='#evalBlm'><p>Evaluate multiple blm values</p></a></li>
<li><a href='#evalBudget'><p>Evaluate multiple budget values</p></a></li>
<li><a href='#evalTarget'><p>Evaluate multiple target values</p></a></li>
<li><a href='#getActions'><p>Extract action information</p></a></li>
<li><a href='#getConnectivityPenalty'><p>Extract connectivity penalty values</p></a></li>
<li><a href='#getCost'><p>Extract cost values</p></a></li>
<li><a href='#getModelInfo'><p>Extract general information about mathematical model</p></a></li>
<li><a href='#getPerformance'><p>Extract general information about solution</p></a></li>
<li><a href='#getPotentialBenefit'><p>Extract potential benefit of features</p></a></li>
<li><a href='#getSolutionBenefit'><p>Extract benefit values</p></a></li>
<li><a href='#inputData'><p>Creates the multi-action planning problem</p></a></li>
<li><a href='#optimizationProblem-class'><p>Optimization problem class</p></a></li>
<li><a href='#portfolio-class'><p>Portfolio class</p></a></li>
<li><a href='#print'><p>Print</p></a></li>
<li><a href='#prioriactions'><p>Create and solve multi-actions planning problems</p></a></li>
<li><a href='#problem'><p>Create mathematical model</p></a></li>
<li><a href='#show'><p>Show</p></a></li>
<li><a href='#simData'><p>Simulated multi-action planning data</p></a></li>
<li><a href='#solution-class'><p>Solution class</p></a></li>
<li><a href='#solve'><p>Solve mathematical models</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>0.5.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Multi-Action Conservation Planning</td>
</tr>
<tr>
<td>Description:</td>
<td>This uses a mixed integer mathematical programming (MIP)
        approach for building and solving multi-action planning problems, 
        where the goal is to find an optimal combination of management actions that
        abate threats, in an efficient way while accounting for spatial aspects. 
        Thus, optimizing the connectivity and conservation effectiveness of 
        the prioritized units and of the deployed actions. The package is capable of 
        handling different commercial (gurobi, CPLEX) and non-commercial (symphony, CBC) MIP solvers. 
        Gurobi optimization solver can be installed using comprehensive instructions in 
        the 'gurobi' installation vignette of the prioritizr package (available in 
        <a href="https://prioritizr.net/articles/gurobi_installation_guide.html">https://prioritizr.net/articles/gurobi_installation_guide.html</a>). Instead, 'CPLEX'
        optimization solver can be obtain from IBM CPLEX web page (available here 
        <a href="https://www.ibm.com/es-es/products/ilog-cplex-optimization-studio">https://www.ibm.com/es-es/products/ilog-cplex-optimization-studio</a>). Additionally, 
        the 'rcbc' R package (available at
    <a href="https://github.com/dirkschumacher/rcbc">https://github.com/dirkschumacher/rcbc</a>) can be used to obtain solutions
    using the CBC optimization software (<a href="https://github.com/coin-or/Cbc">https://github.com/coin-or/Cbc</a>). Methods used in the 
        package refers to Salgado-Rojas et al. (2020) &lt;<a href="https://doi.org/10.1016%2Fj.ecolmodel.2019.108901">doi:10.1016/j.ecolmodel.2019.108901</a>&gt;,
        Beyer et al. (2016) &lt;<a href="https://doi.org/10.1016%2Fj.ecolmodel.2016.02.005">doi:10.1016/j.ecolmodel.2016.02.005</a>&gt;, Cattarino et al. (2015)
        &lt;<a href="https://doi.org/10.1371%2Fjournal.pone.0128027">doi:10.1371/journal.pone.0128027</a>&gt; and Watts et al. (2009) &lt;<a href="https://doi.org/10.1016%2Fj.envsoft.2009.06.005">doi:10.1016/j.envsoft.2009.06.005</a>&gt;. 
        See the prioriactions website for more information, documentations and examples.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat (&ge; 0.2.0), Matrix, proto, magrittr, tidyr, dplyr,
Rcpp, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, gurobi (&ge; 9.0), Rcplex, roxygen2, rcbc, Rsymphony (&ge;
0.1-31), rmarkdown, testthat (&ge; 3.0.0), raster, tmap, sp,
viridis, markdown, data.table, purrr, readr, slam, tibble,
methods, reshape2</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp, RcppArmadillo (&ge; 0.10.1.0.0), BH</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL (&ge; 2)]</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://prioriactions.github.io/prioriactions/">https://prioriactions.github.io/prioriactions/</a>,
<a href="https://github.com/prioriactions/prioriactions">https://github.com/prioriactions/prioriactions</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/prioriactions/prioriactions/issues">https://github.com/prioriactions/prioriactions/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Collate:</td>
<td>'RcppExports.R' 'internal.R' 'data-class.R' 'writeOutputs.R'
'optimizationProblem-class.R' 'presolve.R' 'evalBlm.R'
'problem_modifier.R' 'evalBudget.R' 'evalTarget.R'
'getActions.R' 'getConnectivityPenalty.R' 'getCost.R'
'getModelInfo.R' 'getPerformance.R' 'getPotentialBenefit.R'
'getSolutionBenefit.R' 'inputData.R' 'package.R'
'portfolio-class.R' 'print.R' 'problem.R' 'show.R' 'simData.R'
'solution-class.R' 'solve.R' 'utils-pipe.R' 'zzz.R'</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-13 10:41:29 UTC; josesalgr</td>
</tr>
<tr>
<td>Author:</td>
<td>Jose Salgado-Rojas [aut, cre],
  Irlanda Ceballos-Fuentealba [aut],
  Virgilio Hermoso [aut],
  Eduardo Alvarez-Miranda [aut],
  Jordi Garcia-Gonzalo [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jose Salgado-Rojas &lt;jose.salgroj@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-13 12:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code style="white-space: pre;">&#8288;magrittr::[\%&gt;\%][magrittr::pipe]&#8288;</code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='data-class'>Data class</h2><span id='topic+data-class'></span><span id='topic+Data'></span>

<h3>Description</h3>

<p>This class is used to represent data of the instances of the corresponding
multi-action planning problem. It includes several methods for retrieving the information
of the instance (such as the spatial allocation of threats and species, the cost
of management actions or the structure of the spatial connectivity across
the area where the planning is carried out. This class is created using the
<code><a href="#topic+inputData">inputData()</a></code> function.
</p>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Fields</h3>


<dl>
<dt>data</dt><dd><p><code>list</code> object containing data.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>getActionsAmount():</dt><dd>
<p><code>integer</code>. Number of possible actions.</p>
</dd>
<dt>getData(<code>character</code> name):</dt><dd>
<p><code><a href="base.html#topic+data.frame">data.frame()</a></code>. Object stored in the <code>data</code> field with the corresponding <code>name</code>.
The argument <code>name</code> indicates the name of arguments of the
<code>problem</code> function (&quot;pu&quot;, &quot;features&quot;, &quot;dist_features&quot;, &quot;threats&quot;,
&quot;dist_threats&quot;, &quot;sensitivity&quot;
or &quot;boundary&quot;).</p>
</dd>
<dt>getFeatureAmount():</dt><dd>
<p><code>integer</code>. Number of features.</p>
</dd>
<dt>getFeatureNames():</dt><dd>
<p><code>character</code>. Names of features.</p>
</dd>
<dt>getMonitoringCosts():</dt><dd>
<p><code>numeric</code> <code><a href="base.html#topic+vector">vector()</a></code>. Cost of monitoring each planning unit.</p>
</dd>
<dt>getPlanningUnitsAmount():</dt><dd>
<p><code>integer</code>. Number of planning units.</p>
</dd>
<dt>getActionCosts():</dt><dd>
<p><code>numeric</code> <code><a href="base.html#topic+vector">vector()</a></code>. Cost of actions each planning unit and threat.</p>
</dd>
<dt>getThreatNames():</dt><dd>
<p><code>character</code>. Names of threats.</p>
</dd>
<dt>getThreatsAmount():</dt><dd>
<p><code>integer</code>. Number of threats.</p>
</dd>
<dt>print():</dt><dd>
<p>Print basic information of the data instance.</p>
</dd>
<dt>show():</dt><dd>
<p>Call print method.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## set seed for reproducibility
set.seed(14)

## Set prioriactions path
prioriactions_path &lt;- system.file("extdata/example_input/", package = "prioriactions")

## Load in planning unit data
pu_data &lt;- data.table::fread(paste0(prioriactions_path,"/pu.dat"),
                             data.table = FALSE)
head(pu_data)

## Load in feature data
features_data &lt;- data.table::fread(paste0(prioriactions_path,"/features.dat"),
                                   data.table = FALSE)
head(features_data)

## Load in planning unit vs feature data
dist_features_data &lt;- data.table::fread(paste0(prioriactions_path,"/dist_features.dat"),
                                        data.table = FALSE)
head(dist_features_data)

## Load in the threats data
threats_data &lt;- data.table::fread(paste0(prioriactions_path,"/threats.dat"),
                                  data.table = FALSE)
head(threats_data)

## Load in the threats distribution data
dist_threats_data &lt;- data.table::fread(paste0(prioriactions_path,"/dist_threats.dat"),
                                       data.table = FALSE)
head(dist_threats_data)

## Load in the sensitivity data
sensitivity_data &lt;- data.table::fread(paste0(prioriactions_path,"/sensitivity.dat"),
                                      data.table = FALSE)
head(sensitivity_data)

## Load in the boundary data
boundary_data &lt;- data.table::fread(paste0(prioriactions_path,"/boundary.dat"),
                                   data.table = FALSE)
head(boundary_data)

## Create instance
problem_data &lt;- inputData(
  pu = pu_data, features = features_data, dist_features = dist_features_data,
  dist_threats = dist_threats_data, threats = threats_data, sensitivity = sensitivity_data,
  boundary = boundary_data
)

## Summary
print(problem_data)

## Use class methods
problem_data$getData("features")

problem_data$getFeatureAmount()

problem_data$getFeatureNames()

problem_data$getMonitoringCosts()

problem_data$getPlanningUnitsAmount()

problem_data$getActionCosts()

problem_data$getThreatNames()

problem_data$getThreatsAmount()

problem_data$print()
</code></pre>

<hr>
<h2 id='evalBlm'>Evaluate multiple blm values</h2><span id='topic+evalBlm'></span>

<h3>Description</h3>

<p>Return one solution per instance for different values of blm. Like
<code>prioriactions()</code> function, it inherits all arguments from <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalBlm(values = c(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evalBlm_+3A_values">values</code></td>
<td>
<p><code>numeric</code>. Values of blm to verify. More than one value is needed.</p>
</td></tr>
<tr><td><code id="evalBlm_+3A_...">...</code></td>
<td>
<p>arguments inherited from <code>inputData()</code>, <code>problem()</code>
and <code>solve()</code> functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>evalblm()</code> creates and solves multiple instances, of the corresponding
multi-actions planning problem, for different values of blm. Alternatively, this
could be obtained by executing function <code>prioriactions()</code> or by steps the <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code> functions; using, in each run, different blm values.
However, the <code>evalblm()</code> function has two advantages with
respect to this manual approach: : 1)
it is more efficient to create the models (this is because the model is created
just once and, at each iteration, only the blm values are updated); and 2) the
output is a portfolio object, which allows
obtaining information about the group of solutions (including all <em>get</em> functions).
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+portfolio-class">portfolio</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Create model and solve
port &lt;- evalBlm(pu = sim_pu_data, features = sim_features_data,
                dist_features = sim_dist_features_data,
                threats = sim_threats_data,
                dist_threats = sim_dist_threats_data,
                sensitivity = sim_sensitivity_data,
                boundary = sim_boundary_data,
                values = c(0.0, 0.01, 0.02, 0.03),
                model_type = "minimizeCosts",
                time_limit = 50,
                output_file = FALSE,
                cores = 2)

getConnectivityPenalty(port)


</code></pre>

<hr>
<h2 id='evalBudget'>Evaluate multiple budget values</h2><span id='topic+evalBudget'></span>

<h3>Description</h3>

<p>Return one solution per instance for different values of budgets. This
function assumes that the <em>maximizeBenefits</em> option is being used (note that
the <em>minimizeCosts</em> option does not require setting a maximum budget). Like
<code>prioriactions()</code> function, it inherits all arguments from <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalBudget(values = c(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evalBudget_+3A_values">values</code></td>
<td>
<p><code>numeric</code>. Values of budget to verify. More than one value is
needed.</p>
</td></tr>
<tr><td><code id="evalBudget_+3A_...">...</code></td>
<td>
<p>arguments inherited from <code>inputData()</code>, <code>problem()</code>,
and <code>solve()</code> functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>evalBudget()</code> creates and solves multiple instances, of the corresponding
multi-actions planning problem, for different values of maximum budgets. Alternatively, this
could be obtained by executing function <code>prioriactions()</code> or by steps the <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code> functions; using, in each run, different budgets values.
However, the <code>evalBudget()</code> function has two advantages with
respect to this manual approach: : 1)
it is more efficient to create the models (this is because the model is created
just once and, at each iteration, only the budget values are updated); and 2) the
output is a portfolio object, which allows
obtaining information about the group of solutions (including all <em>get</em> functions).
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+portfolio-class">portfolio</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Create model and solve
port &lt;- evalBudget(pu = sim_pu_data, features = sim_features_data,
                dist_features = sim_dist_features_data,
                threats = sim_threats_data,
                dist_threats = sim_dist_threats_data,
                sensitivity = sim_sensitivity_data,
                boundary = sim_boundary_data,
                values = c(1, 10, 50, 100),
                time_limit = 50,
                output_file = FALSE,
                cores = 2)

getSolutionBenefit(port)


</code></pre>

<hr>
<h2 id='evalTarget'>Evaluate multiple target values</h2><span id='topic+evalTarget'></span>

<h3>Description</h3>

<p>Return one solution per instance for different targets values. This
function assumes that the <em>minimizeCosts</em> model is being used. As well as the
<code>prioriactions()</code> function, it inherits all arguments from <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>evalTarget(values = c(), ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="evalTarget_+3A_values">values</code></td>
<td>
<p><code>numeric</code>. Proportion of maximum value of benefits to verify (both
recovery and conservation benefits). This information can be obtained with
<code>getPotentialBenefit()</code> function. More than one value is needed.</p>
</td></tr>
<tr><td><code id="evalTarget_+3A_...">...</code></td>
<td>
<p>arguments inherited from <code>inputData()</code>, <code>problem()</code>,
and <code>solve()</code> functions.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>evalTarget()</code> creates and solves multiple instances, of the corresponding
multi-actions planning problem, for different proportions of maximum benefit values
as target values. It is assumed that the same proportion is applied for the maximum
benefit in recovery and conservation. Alternatively, this
could be obtained by executing function <code>prioriactions()</code> or by steps the <code>inputData()</code>,
<code>problem()</code> and <code>solve()</code> functions; using, in each run, different targets values.
However, the <code>evalTarget()</code> function has two advantages with
respect to this manual approach: : 1)
it is more efficient to create the models (this is because the model is created
just once and, at each iteration, only the target values are updated); and 2) the
output is a portfolio object, which allows
obtaining information about the group of solutions (including all <em>get</em> functions).
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+portfolio-class">portfolio</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Create model and solve
port &lt;- evalTarget(pu = sim_pu_data, features = sim_features_data,
                dist_features = sim_dist_features_data,
                threats = sim_threats_data,
                dist_threats = sim_dist_threats_data,
                sensitivity = sim_sensitivity_data,
                boundary = sim_boundary_data,
                values = c(0.1, 0.3, 0.5),
                time_limit = 50,
                output_file = FALSE,
                cores = 2)

getCost(port)


</code></pre>

<hr>
<h2 id='getActions'>Extract action information</h2><span id='topic+getActions'></span>

<h3>Description</h3>

<p>Returns the spatial deployment of the actions for each planning unit of
the corresponding solution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getActions(x, format = "wide")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getActions_+3A_x">x</code></td>
<td>
<p><a href="#topic+solution-class">solution</a> or <a href="#topic+portfolio-class">portfolio</a> object.</p>
</td></tr>
<tr><td><code id="getActions_+3A_format">format</code></td>
<td>
<p><code>character</code>. Output format of the action matrix; <code>wide</code> format
shows one column per action, while <code>large</code> format shows four columns: solution_name, pu,
action and solution.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getActions()</code> function assumes that actions can be of three types:
</p>

<ol>
<li> <p><strong>to abate specific threats</strong>: these actions have the <em>id</em> corresponding
to the threat to be abate.
</p>
</li>
<li> <p><strong>to conservation</strong>: that indicates if the planning unit is selected to
conservative any feature that is not threatened.
</p>
</li>
<li> <p><strong>to connectivity</strong>: that indicates if the planning
unit is selected only by connectivity (i.e. without performing conservation actions
or actions against a threat in said unit).
</p>
</li></ol>



<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 2, output_file = FALSE, cores = 2)

# get actions information in large format
actions &lt;- getActions(s, format = "large")
head(actions)

# get actions information in wide format
actions &lt;- getActions(s, format = "wide")
head(actions)


</code></pre>

<hr>
<h2 id='getConnectivityPenalty'>Extract connectivity penalty values</h2><span id='topic+getConnectivityPenalty'></span>

<h3>Description</h3>

<p>Provides the connectivity penalty value for all actions and planning units in a solution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getConnectivityPenalty(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getConnectivityPenalty_+3A_x">x</code></td>
<td>
<p><a href="#topic+solution-class">solution</a> or <a href="#topic+portfolio-class">portfolio</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The connectivity penalty among is calculated as the sum of all
connectivity penalties by each action and planning unit in the solution. This can be expressed
mathematically for a set of planning units
<code class="reqn">I</code> indexed by <code class="reqn">i</code> and <code class="reqn">j</code>, and
a set of threats <code class="reqn">K</code> indexed by <code class="reqn">k</code> as:
</p>
<p style="text-align: center;"><code class="reqn">
\sum_{k \in K}\sum_{i \in I_k}\sum_{j \in I_k} x_{ik} (1 - x_{jk})cv_{ij}
</code>
</p>

<p>Where, <code class="reqn">x_{ik}</code> is the decisions variable that specify
whether an action has been selected to abate threat <code class="reqn">k</code> in planning unit
<code class="reqn">i</code> (1) or not (0), <code class="reqn">cv_{ij}</code> is the connectivity penalty that applies
when a solution contains planning unit <code class="reqn">i</code> but not <code class="reqn">j</code> o viceversa.
</p>
<p>Note that there is an action per threat, so it is assumed that the index of
the threat coincides with the index of the action used to abate it.
</p>


<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 0.03)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 2, output_file = FALSE, cores = 2)

# get connectivity penalty values
getConnectivityPenalty(s)


</code></pre>

<hr>
<h2 id='getCost'>Extract cost values</h2><span id='topic+getCost'></span>

<h3>Description</h3>

<p>Provides the sum of costs to actions and monitoring applied in a solution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getCost(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getCost_+3A_x">x</code></td>
<td>
<p><a href="#topic+solution-class">solution</a> or <a href="#topic+portfolio-class">portfolio</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The cost value is calculated as the sum of all the individual costs
of actions and monitoring carried out in each of the planning units. This can be expressed
mathematically for a set of planning units
<code class="reqn">I</code> indexed by <code class="reqn">i</code>, and
a set of threats <code class="reqn">K</code> indexed by <code class="reqn">k</code> as:
</p>
<p style="text-align: center;"><code class="reqn">
actions = \sum_{i \in I}\sum_{k \in K_i} x_{ik} c_{ik}
</code>
</p>

<p style="text-align: center;"><code class="reqn">
monitoring = \sum_{i \in I} x_{i \cdot} c^{'}_{i}
</code>
</p>

<p>Where, <code class="reqn">x_{ik}</code> is the decisions variable that specify
whether an action has been selected to abate threat <code class="reqn">k</code> in planning unit
<code class="reqn">i</code> (1) or not (0), <code class="reqn">c_{ik}</code> is the action cost to abate threat <code class="reqn">k</code>
in planning unit <code class="reqn">i</code> and  <code class="reqn">c^{'}_{i}</code> is the monitoring cost of
planning unit <code class="reqn">i</code>. The cost of monitoring is applied to all planning units
where some type of action has been selected (conservation action, to abate threats
or connectivity).
</p>
<p>Note that there is an action per threat, so it is assumed that the index of
the threat coincides with the index of the action used to abate it.
</p>


<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 2, output_file = FALSE, cores = 2)

## Get costs
getCost(s)

</code></pre>

<hr>
<h2 id='getModelInfo'>Extract general information about mathematical model</h2><span id='topic+getModelInfo'></span>

<h3>Description</h3>

<p>Provides general information about the mathematical model.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getModelInfo(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getModelInfo_+3A_x">x</code></td>
<td>
<p><a href="#topic+optimizationProblem-class">optimizationProblem</a>, <a href="#topic+solution-class">solution</a> or <a href="#topic+portfolio-class">portfolio</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getModelInfo()</code> function returns five specific fields:
</p>

<ol>
<li> <p><strong>solution_name</strong>: indicates the name of the solution, by default is <em>sol</em>.
</p>
</li>
<li> <p><strong>model_sense</strong>: returns the optimization sense (i.e., it indicates whether the
objective function is minimized or maximize).
</p>
</li>
<li> <p><strong>n_constraints</strong>: returns the number of constraints in the corresponding
mathematical optimization model.
</p>
</li>
<li> <p><strong>n_variables</strong>: returns the number of variables in the corresponding
mathematical optimization model.
</p>
</li>
<li> <p><strong>size</strong>: returns the size of the constraints' coefficients matrix A
number of constraints and number of variables).
</p>
</li></ol>



<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 1)

# get model information
getModelInfo(problem_model)

</code></pre>

<hr>
<h2 id='getPerformance'>Extract general information about solution</h2><span id='topic+getPerformance'></span>

<h3>Description</h3>

<p>Provides general information about the process of solving.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPerformance(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPerformance_+3A_x">x</code></td>
<td>
<p><a href="#topic+solution-class">solution</a> or <a href="#topic+portfolio-class">portfolio</a> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>getPerformance()</code> function returns five specific fields:
</p>

<ol>
<li> <p><strong>solution_name</strong>: indicates the name of the solution, by default is <em>sol</em>.
</p>
</li>
<li> <p><strong>objective_value</strong>: indicates the value of the objective function of a given solution.
This value depends on the type of model solved (more information in the <code>problem()</code> function).
</p>
</li>
<li> <p><strong>gap</strong>: returns the relative MIP optimality gap of a solution. It is measured as
the ratio between the objective function induced by the best known (primal solution)
integer solution and the objective function induced by the best node in the search
tree (dual solution).
</p>
</li>
<li> <p><strong>solving_time</strong>: indicates the solving time of mathematical model.
</p>
</li>
<li> <p><strong>status</strong>: provides the status of solver at the end of the optimization period.
This can have six states:
</p>
</li></ol>


<ul>
<li> <p><em>Optimal solution (according to gap tolerance)</em> : When the resolution of the model stop when
the quality of the solution (gap) is less than or equal to gap_limit (parameter of the <code>solve()</code> function).
</p>
</li>
<li> <p><em>No solution (model was proven to be infeasible or unbounded)</em>: When the model is infeasible.
</p>
</li>
<li> <p><em>Feasible solution (according to time limit)</em>: When the resolution of the model stops when a
time_limit has been reached finding a feasible solution (parameter of the <code>solve()</code> function).
</p>
</li>
<li> <p><em>No solution (according to time limit)</em>: When the resolution of the model stops when a time_limit
has been reached without finding a feasible solution (parameter of the <code>solve()</code> function).
</p>
</li>
<li> <p><em>First feasible solution</em>: When the resolution of the model stops when it has found the first
feasible solution (solution_limit = TRUE parameter in <code>solve()</code> function).
</p>
</li>
<li> <p><em>No solution information is available</em>: For any other case.
</p>
</li></ul>



<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 1)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 2, output_file = FALSE, cores = 2)

# get solution gap
getPerformance(s)


</code></pre>

<hr>
<h2 id='getPotentialBenefit'>Extract potential benefit of features</h2><span id='topic+getPotentialBenefit'></span>

<h3>Description</h3>

<p>Provides the maximum values of benefits to achieve
for each feature given a set of data inputs.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPotentialBenefit(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPotentialBenefit_+3A_x">x</code></td>
<td>
<p><code>data-class</code> object.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a given feature <code class="reqn">s</code>, let <code class="reqn">I_s</code> be the set of planning units associated with <code class="reqn">s</code>,
let <code class="reqn">r_{is}</code> is the amount of feature <code class="reqn">s</code> in planning unit <code class="reqn">i</code>, let <code class="reqn">K_{s}</code> be the
set of threats associated with <code class="reqn">s</code>, and let <code class="reqn">K_{i}</code> be the set of threats associated with <code class="reqn">i</code>.
The local benefit associated with <code class="reqn">s</code> in a unit <code class="reqn">i</code> is given by:
</p>
<p style="text-align: center;"><code class="reqn">
b_{is} = p_{is} r_{is} \\
b_{is} = \frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
</code>
</p>

<p>Where <code class="reqn">x_{ik}</code> is a decision variable such that <code class="reqn">x_{ik} = 1</code> if an
action againts threat <code class="reqn">k</code> is applied in unit <code class="reqn">i</code>, and <code class="reqn">x_{ik} = 0</code>, otherwise.
This expression for the probability of persistence of the feature (<code class="reqn">p_{is}</code>)
is defined only for the cases where we work with values of binary intensities
(presence or absence of threats). See the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a>
vignette to know the work with continuous intensities.
</p>
<p>While the total benefit is calculated as the sum of the local benefits per feature:
</p>
<p style="text-align: center;"><code class="reqn">
b_{s} = \sum_{i \in I_{s}}\frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
</code>
</p>

<p>Since the potential benefit is being calculated, all variables <code class="reqn">x_{ik}</code> are assumed to be equal
to 1; that is, all possible actions are carried out, and only those that have a <strong>lock-out</strong>
status are kept out of the planning (see <code>inputData()</code> function for more information).
</p>


<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Get maximum benefits to obtain
getPotentialBenefit(problem_data)

</code></pre>

<hr>
<h2 id='getSolutionBenefit'>Extract benefit values</h2><span id='topic+getSolutionBenefit'></span>

<h3>Description</h3>

<p>Returns the total benefit induced by the corresponding solution. The
total benefit is computed as the sum of the benefits obtained, for all features, across
all the units in the planning area.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getSolutionBenefit(x, type = "total")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getSolutionBenefit_+3A_x">x</code></td>
<td>
<p><code>Solution-class</code> or <code>Portfolio-class</code>.</p>
</td></tr>
<tr><td><code id="getSolutionBenefit_+3A_type">type</code></td>
<td>
<p><code>character</code>. Output format of the benefits matrix; <code>total</code> shows
the total benefit by feature, while <code>local</code> format shows the benefit achieved per feature and planning unit.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For a given feature <code class="reqn">s</code>, let <code class="reqn">I_s</code> be the set of planning units associated with <code class="reqn">s</code>,
let <code class="reqn">r_{is}</code> is the amount of feature <code class="reqn">s</code> in planning unit <code class="reqn">i</code>, let <code class="reqn">K_{s}</code> be the
set of threats associated with <code class="reqn">s</code>, and let <code class="reqn">K_{i}</code> be the set of threats associated with <code class="reqn">i</code>.
The local benefit associated with <code class="reqn">s</code> in a unit <code class="reqn">i</code> is given by:
</p>
<p style="text-align: center;"><code class="reqn">
b_{is} = p_{is} r_{is} \\
b_{is} = \frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
</code>
</p>

<p>Where <code class="reqn">x_{ik}</code> is a decision variable such that <code class="reqn">x_{ik} = 1</code> if an
action againts threat <code class="reqn">k</code> is applied in unit <code class="reqn">i</code>, and <code class="reqn">x_{ik} = 0</code>, otherwise.
This expression for the probability of persistence of the feature (<code class="reqn">p_{is}</code>)
is defined only for the cases where we work with values of binary intensities
(presence or absence of threats). See the <a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a>
vignette to know the work with continuous intensities.
</p>
<p>While the total benefit is calculated as the sum of the local benefits per feature:
</p>
<p style="text-align: center;"><code class="reqn">
b_{s} = \sum_{i \in I_{s}}\frac{ \sum_{k \in K_i \cap K_s}{x_{ik}}}{|K_i \cap K_s|} r_{is}
</code>
</p>



<h3>Value</h3>

<p><a href="base.html#topic+data.frame">data.frame</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Get maximum benefits to obtain
getPotentialBenefit(problem_data)

## Create optimization model
problem_model &lt;- problem(x = problem_data)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 2, output_file = FALSE, cores = 2)

# get local benefits of solution
local_benefit &lt;- getSolutionBenefit(s, type = "local")
head(local_benefit)

# get total benefits of solution
total_benefit &lt;- getSolutionBenefit(s, type = "total")
head(total_benefit)


</code></pre>

<hr>
<h2 id='inputData'>Creates the multi-action planning problem</h2><span id='topic+inputData'></span><span id='topic+inputData+2Cdata.frame+2Cdata.frame+2Cdata.frame+2Cdata.frame+2Cdata.frame-method'></span>

<h3>Description</h3>

<p>Create the <a href="#topic+data-class">data</a> object with information about the multi-action
conservation planning problem. This function is used to specify all the data
that defines the spatial prioritization problem (planning units data, feature
data, threats data, and their spatial distributions.)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inputData(pu, features, dist_features, threats, dist_threats, ...)

## S4 method for signature 
## 'data.frame,data.frame,data.frame,data.frame,data.frame'
inputData(
  pu,
  features,
  dist_features,
  threats,
  dist_threats,
  sensitivity = NULL,
  boundary = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inputData_+3A_pu">pu</code></td>
<td>
<p>Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies the planning units (PU)
of the corresponding instance and their corresponding monitoring cost and status. Each
row corresponds to a different planning unit. This file is inherited from the
<em>pu.dat</em> in <em>Marxan</em>. It must contain the following columns:
</p>

<dl>
<dt><code>id</code></dt><dd><p><code>integer</code> unique identifier for each planning unit.</p>
</dd>
<dt><code>monitoring_cost</code></dt><dd><p><code>numeric</code> cost of including each planning unit in the reserve system.</p>
</dd>
<dt><code>status</code></dt><dd><p><code>integer</code> (<strong>optional</strong>) value that indicate if each planning unit
should be available to be selected (0), <em>locked-in</em> (2) as part of the
solution, or <em>locked-out</em> (3) and excluded from the solution.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="inputData_+3A_features">features</code></td>
<td>
<p>Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies the conservation
features to consider in the optimization problem. Each row corresponds to a different
feature. This file is inherited from marxan's <em>spec.dat</em>.
</p>
<p>The <code>prioriactions</code> package supports two types of purposes when optimizing: focus on
recovery of features threatened (through the <strong>recovery target</strong>), where only
take into account benefits when taking action against threats and there is no benefit
when selecting planning units where the features are not threatened;
or include the benefits of the features sites where they are not threatened
(through the <strong>conservation target</strong>).
</p>
<p>Note that by default only information on recovery targets is necessary,
while conservation targets equal to zero are assumed. The maximum values of
benefits to achieve both recovery and conservation per feature can be verified
with the <code>getPotentialBenefit()</code> function.
For more information on the implications of these targets in the solutions see
the <a href="https://prioriactions.github.io/prioriactions/articles/objectives.html">recovery</a>
vignette.
</p>
<p>This file must contain
the following columns:
</p>

<dl>
<dt><code>id</code></dt><dd><p><code>integer</code> unique identifier for each conservation feature.</p>
</dd>
<dt><code>target_recovery</code></dt><dd><p><code>numeric</code> amount of recovery target to achieve for each conservation feature.
This field is <strong>required</strong> if a <code>minimizeCosts</code> model is used.</p>
</dd>
<dt><code>target_conservation</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) amount of conservation target to achieve
for each conservation feature.
This field is used only if a model of the type <code>minimizeCosts</code> is applied.</p>
</dd>
<dt><code>name</code></dt><dd><p><code>character</code> (<strong>optional</strong>) name for each conservation feature.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="inputData_+3A_dist_features">dist_features</code></td>
<td>
<p>Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies the spatial
distribution of conservation features across planning units. Each row corresponds
to a combination of planning unit and feature. This file is inherited from marxan's
<em>puvspr.dat</em>. It must contain the following columns:
</p>

<dl>
<dt><code>pu</code></dt><dd><p><code>integer</code> <em>id</em> of a planning unit where the conservation feature
listed on the same row occurs.</p>
</dd>
<dt><code>feature</code></dt><dd><p><code>integer</code> <em>id</em> of each conservation feature.</p>
</dd>
<dt><code>amount</code></dt><dd><p><code>numeric</code> amount of the feature in the planning unit. Set
to 1 to work with presence/absence.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="inputData_+3A_threats">threats</code></td>
<td>
<p>Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies the threats to consider in
the optimization exercise. Each row corresponds to a different threats. It must contain
the following columns:
</p>

<dl>
<dt><code>id</code></dt><dd><p><code>integer</code> unique identifier for each threat.</p>
</dd>
<dt><code>blm_actions</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) penalty of connectivity between threats.
Default is 0.</p>
</dd>
<dt><code>name</code></dt><dd><p><code>character</code> (<strong>optional</strong>) name for each threat.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="inputData_+3A_dist_threats">dist_threats</code></td>
<td>
<p>Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies the spatial
distribution of threats across planning units. Each row corresponds
to a combination of planning unit and threat. It must contain the following
columns:
</p>

<dl>
<dt><code>pu</code></dt><dd><p><code>integer</code> <em>id</em> of a planning unit where the threat listed on the
same row occurs.</p>
</dd>
<dt><code>threat</code></dt><dd><p><code>integer</code> <em>id</em> of each threat.</p>
</dd>
<dt><code>amount</code></dt><dd><p><code>numeric</code> amount of the threat in the planning unit. Set
to 1 to work with presence/absence. Continuous amount values require
that feature sensitivities to threats be established (more info in
<a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a>
vignette).</p>
</dd>
<dt><code>action_cost</code></dt><dd><p><code>numeric</code> cost of an action to abate the threat
in each planning unit.</p>
</dd>
<dt><code>status</code></dt><dd><p><code>integer</code> (<strong>optional</strong>) value that indicates if each action
to abate the threat is available to be selected (0), <em>locked-in</em> (2)
as part of the solution, or <em>locked-out</em> (3) and therefore excluded from the solution.</p>
</dd>
</dl>
</td></tr>
<tr><td><code id="inputData_+3A_...">...</code></td>
<td>
<p>Unused arguments, reserved for future expansion.</p>
</td></tr>
<tr><td><code id="inputData_+3A_sensitivity">sensitivity</code></td>
<td>
<p>(<strong>optional</strong>) Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies
the sensitivity of each feature to each threat. Each row corresponds
to a combination of feature and threat. If not informed, all features
are assumed to be sensitive to all threats.
</p>
<p>Sensitivity can be parameterized in two ways: <strong>binary</strong>; the feature is
sensitive or not, or <strong>continuous</strong>; with response curves of the probability of
persistence of the features to threats. For the first case, it is only necessary
to indicate the ids of the threats and the respective features sensitive to them.
In the second case, the response can be parameterized through four values: <em><code class="reqn">\delta_1</code></em>, <em><code class="reqn">\delta_2</code></em>, <em><code class="reqn">\delta_3</code></em>
and <em><code class="reqn">\delta_4</code></em>. See
<a href="https://prioriactions.github.io/prioriactions/articles/sensitivities.html">sensitivities</a>
vignette for more information on continuous sensitivities. Then, the sensitivity input must contain the following columns:
</p>

<dl>
<dt><code>feature</code></dt><dd><p><code>integer</code> <em>id</em> of each conservation feature.</p>
</dd>
<dt><code>threat</code></dt><dd><p><code>integer</code> <em>id</em> of each threat.</p>
</dd>
<dt><code>delta1</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) the minimum intensity of the threat at
which the features probability of persistence starts to decline. The more
sensitive the feature is to the threat, the lowest this value will be. Default
is 0.</p>
</dd>
<dt><code>delta2</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) the value of intensity of the threat
over which the feature has a probability of persistence of 0. If it is not
established,it is assumed as the <strong>maximum value of the threat across all planning units</strong>
in the study area.
Note that this might overestimate the sensitivity of features to threats,
as they will only be assumed to disappear from planning units if the
threats reach the maximum intensity value in the study area.</p>
</dd>
<dt><code>delta3</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) minimum probability of persistence of a
features when a threat reaches its maximum intensity value. Default is 0.</p>
</dd>
<dt><code>delta4</code></dt><dd><p><code>numeric</code> (<strong>optional</strong>) maximum probability of persistence of a
features in absence threats. Default is 1.</p>
</dd>
</dl>

<p>Note that optional parameters <em>delta1</em>, <em>delta2</em>, <em>delta3</em> and <em>delta4</em> can be provided independently.</p>
</td></tr>
<tr><td><code id="inputData_+3A_boundary">boundary</code></td>
<td>
<p>(<strong>optional</strong>) Object of class <code><a href="base.html#topic+data.frame">data.frame()</a></code> that specifies
the spatial relationship between pair of planning units. Each row corresponds
to a combination of planning unit. This file is inherited from marxan's
<em>bound.dat</em>. It must contain the following columns:
</p>

<dl>
<dt><code>id1</code></dt><dd><p><code>integer</code> <em>id</em> of each planning unit.</p>
</dd>
<dt><code>id2</code></dt><dd><p><code>integer</code> <em>id</em> of each planning unit.</p>
</dd>
<dt><code>boundary</code></dt><dd><p><code>numeric</code> penalty applied in the objective function
when only one of the planning units is present in the solution.</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+data-class">data</a>.
</p>


<h3>References</h3>


<ul>
<li><p> Ball I, Possingham H, Watts, M. <em>Marxan and relatives: software for spatial
conservation prioritization</em>. Spatial conservation prioritisation: quantitative
methods and computational tools 2009.
</p>
</li></ul>



<h3>See Also</h3>

<p>For more information on the correct format for <em>Marxan</em> input data, see the
<a href="https://marxansolutions.org">official <em>Marxan</em> website</a> and Ball <em>et al.</em> (2009).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## set seed for reproducibility
set.seed(14)

## Set prioriactions path
prioriactions_path &lt;- system.file("extdata/example_input/", package = "prioriactions")

## Load in planning unit data
pu_data &lt;- data.table::fread(paste0(prioriactions_path,"/pu.dat"),
                             data.table = FALSE)
head(pu_data)

## Load in feature data
features_data &lt;- data.table::fread(paste0(prioriactions_path,"/features.dat"),
                                   data.table = FALSE)
head(features_data)

## Load in planning unit vs feature data
dist_features_data &lt;- data.table::fread(paste0(prioriactions_path,"/dist_features.dat"),
                                        data.table = FALSE)
head(dist_features_data)

## Load in the threats data
threats_data &lt;- data.table::fread(paste0(prioriactions_path,"/threats.dat"),
                                  data.table = FALSE)
head(threats_data)

## Load in the threats distribution data
dist_threats_data &lt;- data.table::fread(paste0(prioriactions_path,"/dist_threats.dat"),
                                       data.table = FALSE)
head(dist_threats_data)

## Load in the sensitivity data
sensitivity_data &lt;- data.table::fread(paste0(prioriactions_path,"/sensitivity.dat"),
                                      data.table = FALSE)
head(sensitivity_data)

## Load in the boundary data
boundary_data &lt;- data.table::fread(paste0(prioriactions_path,"/boundary.dat"),
                                   data.table = FALSE)
head(boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Summary
print(problem_data)

</code></pre>

<hr>
<h2 id='optimizationProblem-class'>Optimization problem class</h2><span id='topic+optimizationProblem-class'></span><span id='topic+OptimizationProblem'></span>

<h3>Description</h3>

<p>This class encodes the corresponding optimization model. It is created
using <code>problem()</code> function.
</p>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Fields</h3>


<dl>
<dt>$data</dt><dd><p><code>list</code> object containing data
of the mathematical model.</p>
</dd>
<dt>$ConservationClass</dt><dd><p>object of class
<code><a href="#topic+data-class">data-class()</a></code> that contains the data input.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>getData(<code>character</code> name)</dt><dd>
<p><code><a href="base.html#topic+vector">vector()</a></code>. Object stored in the <code>data</code> field with the
corresponding <code>name</code>. The data correspond to the different parts of
the mathematical model. The argument <code>name</code> can be made to the
following: &quot;obj&quot;, &quot;rhs&quot;, &quot;sense&quot;, &quot;vtype&quot;, &quot;A&quot;, &quot;bounds&quot; or &quot;modelsense&quot;.</p>
</dd>
<dt>getDataList()</dt><dd>
<p><code><a href="base.html#topic+list">list()</a></code> of
<code><a href="base.html#topic+vector">vector()</a></code>. Object stored in the <code>data</code>. It contains all information relative
to the mathematical model, such as &quot;obj&quot;, &quot;rhs&quot;, etc.</p>
</dd>
<dt>print()</dt><dd>
<p>Print basic information of the optimization model.</p>
</dd>
<dt>show()</dt><dd>
<p>Call print method.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'># set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 1)

## Use class methods
head(problem_model$getData("obj"))

problem_model$print()
</code></pre>

<hr>
<h2 id='portfolio-class'>Portfolio class</h2><span id='topic+portfolio-class'></span><span id='topic+Portfolio'></span>

<h3>Description</h3>

<p>This class encodes for the solutions obtained when solving
multiple instances. This includes several methods
to obtain information about both the optimization process and the solution associated with
the planning units and conservation actions. It is created using the <em>eval</em> functions
(e.g. <code>evalTarget()</code> or <code>evalBudget()</code>).
</p>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Fields</h3>


<dl>
<dt>$data</dt><dd>
<p><code>list</code>. Object containing data on the results of the optimization process.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>getNames()</dt><dd>
<p><code>character</code>. Label indicating the name of solutions.</p>
</dd>
<dt>print()</dt><dd>
<p>Print basic information of the model solution.</p>
</dd>
<dt>show()</dt><dd>
<p>Call print method.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Create model and solve
port &lt;- evalBlm(pu = sim_pu_data, features = sim_features_data,
                dist_features = sim_dist_features_data,
                threats = sim_threats_data,
                dist_threats = sim_dist_threats_data,
                sensitivity = sim_sensitivity_data,
                boundary = sim_boundary_data,
                values = c(0.0, 0.01, 0.02, 0.03),
                model_type = "minimizeCosts",
                time_limit = 50,
                output_file = FALSE, cores = 2)

## Use class methods
port$getNames()

port$print()

</code></pre>

<hr>
<h2 id='print'>Print</h2><span id='topic+print'></span><span id='topic+print.Data'></span><span id='topic+print.OptimizationProblem'></span><span id='topic+print.Solution'></span><span id='topic+print.Portfolio'></span>

<h3>Description</h3>

<p>Displays information about an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'Data'
print(x, ...)

## S3 method for class 'OptimizationProblem'
print(x, ...)

## S3 method for class 'Solution'
print(x, ...)

## S3 method for class 'Portfolio'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_+3A_x">x</code></td>
<td>
<p>Any object.</p>
</td></tr>
<tr><td><code id="print_+3A_...">...</code></td>
<td>
<p>Not used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>None.
</p>


<h3>See Also</h3>

<p><code><a href="base.html#topic+print">base::print()</a></code>.
</p>

<hr>
<h2 id='prioriactions'>Create and solve multi-actions planning problems</h2><span id='topic+prioriactions'></span>

<h3>Description</h3>

<p>Create and solve a multi-actions planning problem. It can be used
instead of following the sequence of the <code>inputData()</code>, <code>problem()</code>
and <code>solve()</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prioriactions(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prioriactions_+3A_...">...</code></td>
<td>
<p>arguments inherited from <code>inputData()</code>, <code>problem()</code> and <code>solve()</code> functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An object of class <a href="#topic+solution-class">solution</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## This example uses input files included into package.

## set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
s &lt;- prioriactions(pu = sim_pu_data, features = sim_features_data,
                dist_features = sim_dist_features_data,
                threats = sim_threats_data,
                dist_threats = sim_dist_threats_data,
                sensitivity = sim_sensitivity_data,
                boundary = sim_boundary_data,
                model_type = "minimizeCosts",
                time_limit = 50,
                output_file = FALSE,
                cores = 2)

print(s)

</code></pre>

<hr>
<h2 id='problem'>Create mathematical model</h2><span id='topic+problem'></span>

<h3>Description</h3>

<p>Create an optimization model for the multi-action conservation
planning problem, following the mathematical formulations used in
Salgado-Rojas <em>et al.</em> (2020).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>problem(
  x,
  model_type = "minimizeCosts",
  budget = 0,
  blm = 0,
  curve = 1,
  segments = 3
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="problem_+3A_x">x</code></td>
<td>
<p><a href="#topic+data-class">data</a> object. Data used in a problem of
prioritization of multiple conservation actions. This object must be created using the
<code><a href="#topic+problem">problem()</a></code> function.</p>
</td></tr>
<tr><td><code id="problem_+3A_model_type">model_type</code></td>
<td>
<p><code>character</code>. Name of the type of model to create. With two possible values:
<code>minimizeCosts</code> and <code>maximizeBenefits</code>.</p>
</td></tr>
<tr><td><code id="problem_+3A_budget">budget</code></td>
<td>
<p><code>numeric</code>. Maximum budget allowed. This field is used only if a
model of the type <code>maximizeBenefits</code> is applied.</p>
</td></tr>
<tr><td><code id="problem_+3A_blm">blm</code></td>
<td>
<p><code>numeric</code>. Weight factor applied to the sum of connectivity penalties
for missed connections in a solution, similar to Boundary Length Modifier (BLM) in <em>Marxan</em>. This argument
only has an effect when the <code>boundary</code> is available.</p>
</td></tr>
<tr><td><code id="problem_+3A_curve">curve</code></td>
<td>
<p><code>integer</code>. Type of continuous curve used to represent benefit expression. It can
be a linear (<code>1</code>), quadratic (<code>2</code>) or cubic (<code>3</code>) function.
See <strong>Details</strong> for more information.</p>
</td></tr>
<tr><td><code id="problem_+3A_segments">segments</code></td>
<td>
<p><code>integer</code>. Number of segments (<code>1</code>, <code>2</code>, <code>3</code>, <code>4</code> or <code>5</code>) used to approximate the non-linear
expression (<code>curve</code>) in the calculate benefits. See <strong>Details</strong> for more information.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently the problem function allows you to create two types of mathematical programming models:
</p>

<dl>
<dt><strong>minimize cost (minimizeCosts)</strong>:</dt><dd><p> This model seeks to find the set of actions that
minimizes the overall planning costs, while meeting a set of representation targets
for the conservation features.
</p>
<p>This model can be expressed mathematically for a set of planning units
<code class="reqn">I</code> indexed by <code class="reqn">i</code> a set of features <code class="reqn">S</code> indexed by <code class="reqn">s</code>, and
a set of threats <code class="reqn">K</code> indexed by <code class="reqn">k</code> as:
</p>
<p style="text-align: center;"><code class="reqn">
\min \space \sum_{i \in I}\sum_{k \in K_i} x_{ik} c_{ik} + \sum_{i \in I} x_{i \cdot} c'_{i} + blm \cdot connectivity\\
\mathit{s.t.} \\
\sum_{i \in I_s} p_{is} r_{is} \geq t_s \space \forall \space s \in S
</code>
</p>

<p>Where, <code class="reqn">x_{ik}</code> is a decisions variable that specifies whether an action to abate
threat <code class="reqn">k</code> in planning unit <code class="reqn">i</code> has been selected (1) or not (0), <code class="reqn">c_{ik}</code>
is the cost of the action to abate the threat <code class="reqn">k</code> in the planning unit <code class="reqn">i</code>,
<code class="reqn">c'_{i}</code> is the monitoring cost of planning unit <code class="reqn">i</code>,
<code class="reqn">p_{is}</code> is the probability of persistence of the feature <code class="reqn">s</code> in the planning unit <code class="reqn">i</code>
(ranging between 0 and 1), <code class="reqn">r_{is}</code> is the amount of
feature <code class="reqn">s</code> in planning unit <code class="reqn">i</code>. <code class="reqn">t_s</code> is the <strong>recovery target</strong> for feature <code class="reqn">s</code>.
In the case of working with <strong>conservation target</strong>, the following constraint is necessary:
</p>
<p style="text-align: center;"><code class="reqn">
\sum_{i \in I_s: |K_{s} \cap K_{i}| \neq 0} z_{is} r_{is} \geq t'_s \space \forall \space s \in S
</code>
</p>

<p>With, <code class="reqn">z_{is}</code>  as the probability of persistence by conservation of the feature s in the planning unit i
(ranging between 0 and 1). It is only present when there is no spatial co-occurrence between
a feature and its threats (i.e. <code class="reqn">|K_{s} \cap K_{i}| \neq 0</code>). In the case of binary threat
intensities it is assumed as 1.  <code class="reqn">t'_s</code> is the
<strong>conservation target</strong> for feature <code class="reqn">s</code>.
</p>
</dd>
<dt><strong>maximize benefits (maximizeBenefits)</strong>:</dt><dd><p> The maximize benefits model seeks
to find the set of actions that maximizes the sum of benefits of
all features, while the cost of performing actions and monitoring does not exceed a certain budget.
Using the terminology presented above, this model can be expressed mathematically as:
</p>
<p style="text-align: center;"><code class="reqn">
\max \space \sum_{i \in I}\sum_{s \in S_i} b_{is} - blm \cdot connectivity\\
\mathit{s.t.} \\
\sum_{i \in I} \sum_{k \in K_i} x_{ik} c_{ik} + \sum_{i \in I} x_{i \cdot} c'_{i} \leq budget
</code>
</p>

</dd></dl>

<p>Where <code class="reqn">b_{is}</code> is the benefit of the feature <code class="reqn">s</code> in a planning unit <code class="reqn">i</code> and it
is calculated by multiplying the probability of persistence of the feature in the
unit by its corresponding amount, i.e., <code class="reqn">b_{is} = p_{is} r_{is}</code>. When we talk about
recovering, the probability of persistence is a measure of the number of actions taken against the threats that
affect said feature. For more information on its calculation, see the
<code>getSolutionBenefit()</code> or <code>getPotentialBenefit()</code> functions references.
</p>
<p>As a way of including the risk associated with calculating our probability of
persistence of the features and in turn, avoiding that many low probabilities
of persistence end up reaching the proposed targets, is that we add the <code>curve</code>
parameter. That incorporates an exponent (values of 1: linear, 2: quadratic
or 3: cubic) to the calculation of the probability of persistence. Thus penalizing
the low probabilities in the sum of the benefits achieved.
Since <code>prioriactions</code> works with linear models, we use a piecewise linearization strategy to
work with non-linear curves in <code class="reqn">b_{is}</code>. The <code>segments</code> parameter indicates how well the expression
approximates the curved used in <code class="reqn">b_{is}</code>. A higher number implies a better
approximation but increases the resolution complexity. Note that for a linear curve
(<code>curve</code> = 1) it is not necessary to set a <code>segment</code> parameter.
</p>
<p>Parameters <code>blm</code> and <code>blm_actions</code> allow controlling the spatial connectivity
of the selected units and of the deployed actions, respectively (similar to BLM in Marxan).
</p>


<h3>Value</h3>

<p>An object of class <a href="#topic+optimizationProblem-class">optimizationProblem</a>.
</p>


<h3>See Also</h3>

<p>For more information regarding the arguments
<code>curve</code> and <code>segments</code>, see the supplementary material
of Salgado-Rojas <em>et al.</em> (2020)..
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## This example uses input files included into package.

## set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create minimizeCosts model
model_min &lt;- problem(x = problem_data, blm = 1, model_type = "minimizeCosts")

#' ## Create maximazeBenefits model
model_max &lt;- problem(x = problem_data, model_type = "maximizeBenefits", budget = 100)
</code></pre>

<hr>
<h2 id='show'>Show</h2><span id='topic+show'></span><span id='topic+show+2CData-method'></span><span id='topic+show+2COptimizationProblem-method'></span><span id='topic+show+2CSolution-method'></span><span id='topic+show+2CPortfolio-method'></span>

<h3>Description</h3>

<p>Display information about an object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Data'
show(x)

## S4 method for signature 'OptimizationProblem'
show(x)

## S4 method for signature 'Portfolio'
show(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="show_+3A_x">x</code></td>
<td>
<p>Any object.</p>
</td></tr>
</table>


<h3>See Also</h3>

<p><code><a href="methods.html#topic+show">methods::show()</a></code>.
</p>

<hr>
<h2 id='simData'>Simulated multi-action planning data</h2><span id='topic+simData'></span><span id='topic+sim_pu_data'></span><span id='topic+sim_features_data'></span><span id='topic+sim_dist_features_data'></span><span id='topic+sim_threats_data'></span><span id='topic+sim_dist_threats_data'></span><span id='topic+sim_sensitivity_data'></span><span id='topic+sim_boundary_data'></span>

<h3>Description</h3>

<p>Simulated data for making prioritizations.
</p>

<dl>
<dt><code>sim_pu_data</code></dt><dd><p>Planning units are represented as tabular data.</p>
</dd>
<dt><code>sim_features_data</code></dt><dd><p>Features are represented as tabular data.</p>
</dd>
<dt><code>sim_dist_features_data</code></dt><dd><p>The simulated distribution of four features.</p>
</dd>
<dt><code>sim_threats_data</code></dt><dd><p>Threats are represented as tabular data.</p>
</dd>
<dt><code>sim_dist_threats_data</code></dt><dd><p>The simulated threats of two threats.</p>
</dd>
<dt><code>sim_sensitivity_data</code></dt><dd><p>Sensitivity of features to threats as tabular data.</p>
</dd>
<dt><code>sim_boundary_data</code></dt><dd><p>Boundary data between one hundred planning units.</p>
</dd>
</dl>



<h3>Usage</h3>

<pre><code class='language-R'>data(sim_pu_data)

data(sim_features_data)

data(sim_dist_features_data)

data(sim_threats_data)

data(sim_dist_threats_data)

data(sim_sensitivity_data)

data(sim_boundary_data)
</code></pre>


<h3>Format</h3>


<dl>
<dt>sim_pu_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_features_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_dist_features_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_threats_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_dist_threats_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_sensitivity_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
<dt>sim_boundary_data</dt><dd><p><a href="base.html#topic+data.frame">data.frame</a>
object.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

# plot examples
library(raster)
r &lt;- raster::raster(ncol=10, nrow=10, xmn=0, xmx=10, ymn=0, ymx=10)

# plot cost of pu's
values(r) &lt;- sim_pu_data$monitoring_cost
plot(r)

# plot feature distribution of feature 1
features &lt;- tidyr::spread(data = sim_dist_features_data, key = feature, value = amount, fill = 0)
values(r) &lt;- features$'1'
plot(r)

## End(Not run)
</code></pre>

<hr>
<h2 id='solution-class'>Solution class</h2><span id='topic+solution-class'></span><span id='topic+Solution'></span>

<h3>Description</h3>

<p>This class is used to represent the solution of the MIP (Mixed-Integer Programming) model.
This includes several methods
to obtain information about both the optimization process and the solution associated with
the planning units and actions. It is created using the <code><a href="#topic+solve">solve()</a></code>
function.
</p>


<h3>Value</h3>

<p>No return value.
</p>


<h3>Fields</h3>


<dl>
<dt>$data</dt><dd>
<p><code>list</code>. Object containing data on the results of the optimization process.</p>
</dd>
</dl>



<h3>Methods</h3>


<dl>
<dt>print()</dt><dd>
<p>Print basic information of the model solution.</p>
</dd>
<dt>show()</dt><dd>
<p>Call print method.</p>
</dd>
</dl>



<h3>Examples</h3>

<pre><code class='language-R'>
# set seed for reproducibility
set.seed(14)

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 1)

## Solve the optimization model
s &lt;- solve(a = problem_model, time_limit = 5, output_file = FALSE, cores = 2)

## Use class methods

s$print()


</code></pre>

<hr>
<h2 id='solve'>Solve mathematical models</h2><span id='topic+solve'></span>

<h3>Description</h3>

<p>Solves the optimization model associated with the multi-action
conservation planning problem. This function is used to solve
the mathematical model created by the <code>problem()</code> function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>solve(
  a,
  solver = "",
  gap_limit = 0,
  time_limit = .Machine$integer.max,
  solution_limit = FALSE,
  cores = 2,
  verbose = TRUE,
  name_output_file = "output",
  output_file = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="solve_+3A_a">a</code></td>
<td>
<p><a href="#topic+optimizationProblem-class">optimizationProblem</a> object. Optimization model created
for the problem of prioritization of multiple conservation actions. This object must be
created using the <code>problem()</code> function.</p>
</td></tr>
<tr><td><code id="solve_+3A_solver">solver</code></td>
<td>
<p><code>string</code>. Name of solver to use to
solve the model. The following solvers are supported:
<a href="https://www.gurobi.com/"><code>"gurobi"</code></a>(requires the <span class="pkg">gurobi</span> package),
<a href="https://www.ibm.com/es-es/products/ilog-cplex-optimization-studio"><code>"cplex"</code></a>(requires the <span class="pkg">Rcplex</span> package),
<a href="https://github.com/coin-or/Cbc"><code>"cbc"</code></a>(requires the <span class="pkg">rcbc</span> package) and
<a href="https://github.com/coin-or/SYMPHONY"><code>"symphony"</code></a>(requires the <span class="pkg">Rsymphony</span> package).
We recommend using gurobi (for more information on how to obtain an academic license
<a href="https://prioritizr.net/articles/gurobi_installation_guide.html">here</a>).</p>
</td></tr>
<tr><td><code id="solve_+3A_gap_limit">gap_limit</code></td>
<td>
<p><code>numeric</code>. Value between 0 and 1 that represents the gap
to optimality, i.e., a relative number that cause the optimizer to
terminate when the difference between the upper and lower objective
function bounds is less than the gap times the upper bound. For example, a
value of 0.01 will result in the optimizer stopping when the difference
between the bounds is 1 percent of the upper bound. Default is 0.0.</p>
</td></tr>
<tr><td><code id="solve_+3A_time_limit">time_limit</code></td>
<td>
<p><code>numeric</code>. Time limit to run the optimizer (in seconds).
The solver will return the current best solution when this time limit is exceeded.
Default is the maximum integer number of your machine.</p>
</td></tr>
<tr><td><code id="solve_+3A_solution_limit">solution_limit</code></td>
<td>
<p><code>logical</code>. Indicates if the solution process
should be stopped after the first feasible solution is found (<code>TRUE</code>),
or not (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="solve_+3A_cores">cores</code></td>
<td>
<p><code>integer</code>. Number of parallel cores to use in the machine to solve the problem.</p>
</td></tr>
<tr><td><code id="solve_+3A_verbose">verbose</code></td>
<td>
<p><code>logical</code>. Indicates if the solver information is displayed while
solving the optimization model (<code>TRUE</code>), or if it is not displayed (<code>FALSE</code>).</p>
</td></tr>
<tr><td><code id="solve_+3A_name_output_file">name_output_file</code></td>
<td>
<p><code>string</code>. Prefix of all output names.</p>
</td></tr>
<tr><td><code id="solve_+3A_output_file">output_file</code></td>
<td>
<p><code>logical</code>. Indicates if the outputs are exported as .csv files (<code>TRUE</code>),
or they are not exported (<code>FALSE</code>). Currently, 5 files are exported. The
distribution of actions in the solution, the distribution of the selected
planning units, the benefits achieved by the features, the parameters used,
and the optimization engine log.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The solvers supported by the <code><a href="#topic+solve">solve()</a></code> function are
described below. </p>

<dl>
<dt><code style="white-space: pre;">&#8288;Gurobi solver&#8288;</code></dt><dd> <p><a href="https://www.gurobi.com/"><em>Gurobi</em></a> is a
state-of-the-art commercial optimization software with an R package
interface. It is by far the fastest of the solvers available in this
package, however, also this solver is not freely available.
That said, licenses are available to academics at no cost. The <span class="pkg">gurobi</span>
package is distributed with the <em>Gurobi</em> software suite. This solver
uses the <span class="pkg">gurobi</span> package to solve problems.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;CPLEX solver&#8288;</code></dt><dd>
<p><a href="https://www.ibm.com/es-es/products/ilog-cplex-optimization-studio"><em>cplex</em></a> is a
state-of-the-art commercial optimization software with an R package
interface. Like Gurobi, it is not freely accessible, but we can obtain academic
licenses. We recommend using this solver if the Gurobi solver is not available.
Licenses are available for the IBM CPLEX software to academics at no cost
<a href="https://www.ibm.com/products/ilog-cplex-optimization-studio">here</a>. This solver uses the
<span class="pkg">Rcplex</span> package to solve problems.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;CBC solver&#8288;</code></dt><dd>
<p><a href="https://github.com/coin-or/Cbc"><em>CBC</em></a> is an
open-source mixed integer linear programming solver written in C++. It is part of the
Computational Infrastructure for Operations Research (COIN-OR) project
interface. <span class="pkg">rcbc</span> package to solve problems is now available only on Github.
Please ensure that you closely adhere to the detailed installation instructions provided
<a href="https://github.com/dirkschumacher/rcbc">here</a> for proper setup.</p>
</dd>
<dt><code style="white-space: pre;">&#8288;Symphony solver&#8288;</code></dt><dd>
<p><a href="https://github.com/coin-or/SYMPHONY"><em>SYMPHONY</em></a> is an
open-source integer programming solver that is part of the Computational
Infrastructure for Operations Research (COIN-OR) project, an initiative to
promote development of open-source tools for operations research (a field
that includes linear programming). The <span class="pkg">Rsymphony</span> package provides an
interface to COIN-OR and is available on CRAN. This solver uses the
<span class="pkg">Rsymphony</span> package to solve problems.</p>
</dd></dl>



<h3>Value</h3>

<p>An object of class <a href="#topic+solution-class">solution</a>.
</p>


<h3>See Also</h3>

<p>For more information on how to install and obtain an academic
license of the Gurobi solver, see the <em>Gurobi installation guide</em>,
which can be found online at
<a href="https://prioritizr.net/articles/gurobi_installation_guide.html">prioritizr vignette</a>.
Just like Gurobi, cplex needs an academic licence to work. Details about how to install
the cplex solver, see the <a href="https://www.ibm.com/products/ilog-cplex-optimization-studio">webpage IBM CPLEX</a>.
Once installed, see the <em><span class="pkg">Rcplex</span> installation guide</em>, which can be found online at
<a href="https://github.com/cran/Rcplex/blob/master/inst/INSTALL">Rcplex package</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
## This example uses input files included into package.

## Load data
data(sim_pu_data, sim_features_data, sim_dist_features_data,
sim_threats_data, sim_dist_threats_data, sim_sensitivity_data,
sim_boundary_data)

## Create data instance
problem_data &lt;- inputData(
  pu = sim_pu_data, features = sim_features_data, dist_features = sim_dist_features_data,
  threats = sim_threats_data, dist_threats = sim_dist_threats_data,
  sensitivity = sim_sensitivity_data, boundary = sim_boundary_data
)

## Create optimization model
problem_model &lt;- problem(x = problem_data, blm = 1)

## Solve the optimization model using a gap_limit and gurobi solver
## NOTE: The Gurobi solver must be previously installed and must have a valid license!
s1 &lt;- solve(a = problem_model, solver = "gurobi", gap_limit = 0.01, output_file = FALSE, cores = 2)

print(s1)

## Solve the optimization model using a gap_limit and symphony solver
s2 &lt;- solve(a = problem_model,
            solver = "symphony",
            gap_limit = 0.01,
            output_file = FALSE,
            cores = 2)

print(s2)

## Solve the optimization model using a time_limit and gurobi solver
s3 &lt;- solve(a = problem_model, solver = "gurobi", time_limit = 10, output_file = FALSE, cores = 2)

print(s3)

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
