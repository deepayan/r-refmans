<!DOCTYPE html><html lang="en"><head><title>Help for package Characterization</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Characterization}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Characterization-package'><p>Characterization: Implement Descriptive Studies Using the Common Data Model</p></a></li>
<li><a href='#cleanIncremental'><p>Removes csv files from folders that have not been marked as completed</p>
and removes the record of the execution file</a></li>
<li><a href='#cleanNonIncremental'><p>Removes csv files from the execution folder as there should be no csv files</p>
when running in non-incremental model</a></li>
<li><a href='#computeDechallengeRechallengeAnalyses'><p>Compute dechallenge rechallenge study</p></a></li>
<li><a href='#computeRechallengeFailCaseSeriesAnalyses'><p>Compute fine the subjects that fail the dechallenge rechallenge study</p></a></li>
<li><a href='#computeTimeToEventAnalyses'><p>Compute time to event study</p></a></li>
<li><a href='#createAggregateCovariateSettings'><p>Create aggregate covariate study settings</p></a></li>
<li><a href='#createCharacterizationSettings'><p>Create the settings for a large scale characterization study</p></a></li>
<li><a href='#createCharacterizationTables'><p>Create the results tables to store characterization results into a database</p></a></li>
<li><a href='#createDechallengeRechallengeSettings'><p>Create dechallenge rechallenge study settings</p></a></li>
<li><a href='#createDuringCovariateSettings'><p>Create during covariate settings</p></a></li>
<li><a href='#createSqliteDatabase'><p>Create an sqlite database connection</p></a></li>
<li><a href='#createTimeToEventSettings'><p>Create time to event study settings</p></a></li>
<li><a href='#exampleOmopConnectionDetails'><p>create a connection detail for an example GI Bleed dataset from Eunomia</p></a></li>
<li><a href='#getDbDuringCovariateData'><p>Extracts covariates that occur during a cohort</p></a></li>
<li><a href='#insertResultsToDatabase'><p>Upload the results into a result database</p></a></li>
<li><a href='#loadCharacterizationSettings'><p>Load the characterization settings previously saved as a json file</p></a></li>
<li><a href='#runCharacterizationAnalyses'><p>execute a large-scale characterization study</p></a></li>
<li><a href='#saveCharacterizationSettings'><p>Save the characterization settings as a json</p></a></li>
<li><a href='#viewCharacterization'><p>viewCharacterization - Interactively view the characterization results</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Implement Descriptive Studies Using the Common Data Model</td>
</tr>
<tr>
<td>Version:</td>
<td>2.1.3</td>
</tr>
<tr>
<td>Date:</td>
<td>2025-2-26</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jenna Reps &lt;jreps@its.jnj.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>An end-to-end framework that enables users to implement various descriptive studies for a given set of target and outcome cohorts for data mapped to the Observational Medical Outcomes Partnership Common Data Model.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://ohdsi.github.io/Characterization/">https://ohdsi.github.io/Characterization/</a>,
<a href="https://github.com/OHDSI/Characterization">https://github.com/OHDSI/Characterization</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/OHDSI/Characterization/issues">https://github.com/OHDSI/Characterization/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>Andromeda, DatabaseConnector (&ge; 6.3.1), FeatureExtraction (&ge;
3.6.0), SqlRender (&ge; 1.9.0), ParallelLogger (&ge; 3.0.0),
ResultModelManager, checkmate, dplyr, readr, rlang</td>
</tr>
<tr>
<td>Suggests:</td>
<td>devtools, testthat, kableExtra, knitr, markdown, rmarkdown,
OhdsiShinyAppBuilder, shiny, withr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2025-02-27 18:21:44 UTC; jreps</td>
</tr>
<tr>
<td>Author:</td>
<td>Jenna Reps [aut, cre],
  Patrick Ryan [aut],
  Chris Knoll [aut]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2025-03-04 12:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='Characterization-package'>Characterization: Implement Descriptive Studies Using the Common Data Model</h2><span id='topic+Characterization'></span><span id='topic+Characterization-package'></span>

<h3>Description</h3>

<p>An end-to-end framework that enables users to implement various descriptive studies for a given set of target and outcome cohorts for data mapped to the Observational Medical Outcomes Partnership Common Data Model.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Jenna Reps <a href="mailto:jreps@its.jnj.com">jreps@its.jnj.com</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Patrick Ryan <a href="mailto:ryan@ohdsi.org">ryan@ohdsi.org</a>
</p>
</li>
<li><p> Chris Knoll <a href="mailto:knoll@ohdsi.org">knoll@ohdsi.org</a>
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://ohdsi.github.io/Characterization/">https://ohdsi.github.io/Characterization/</a>
</p>
</li>
<li> <p><a href="https://github.com/OHDSI/Characterization">https://github.com/OHDSI/Characterization</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/OHDSI/Characterization/issues">https://github.com/OHDSI/Characterization/issues</a>
</p>
</li></ul>


<hr>
<h2 id='cleanIncremental'>Removes csv files from folders that have not been marked as completed
and removes the record of the execution file</h2><span id='topic+cleanIncremental'></span>

<h3>Description</h3>

<p>Removes csv files from folders that have not been marked as completed
and removes the record of the execution file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanIncremental(executionFolder, ignoreWhenEmpty = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanIncremental_+3A_executionfolder">executionFolder</code></td>
<td>
<p>The folder that has the execution files</p>
</td></tr>
<tr><td><code id="cleanIncremental_+3A_ignorewhenempty">ignoreWhenEmpty</code></td>
<td>
<p>When TRUE, if there are no incremental logs then nothing is run</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the settings
</p>


<h3>See Also</h3>

<p>Other Incremental: 
<code><a href="#topic+cleanNonIncremental">cleanNonIncremental</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
cleanIncremental(
  file.path(tempdir(), 'incremental'),
  ignoreWhenEmpty = TRUE
)


</code></pre>

<hr>
<h2 id='cleanNonIncremental'>Removes csv files from the execution folder as there should be no csv files
when running in non-incremental model</h2><span id='topic+cleanNonIncremental'></span>

<h3>Description</h3>

<p>Removes csv files from the execution folder as there should be no csv files
when running in non-incremental model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleanNonIncremental(executionFolder)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cleanNonIncremental_+3A_executionfolder">executionFolder</code></td>
<td>
<p>The folder that has the execution files</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the settings
</p>


<h3>See Also</h3>

<p>Other Incremental: 
<code><a href="#topic+cleanIncremental">cleanIncremental</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code

cleanNonIncremental(file.path(tempdir(), 'incremental'))

</code></pre>

<hr>
<h2 id='computeDechallengeRechallengeAnalyses'>Compute dechallenge rechallenge study</h2><span id='topic+computeDechallengeRechallengeAnalyses'></span>

<h3>Description</h3>

<p>Compute dechallenge rechallenge study
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeDechallengeRechallengeAnalyses(
  connectionDetails = NULL,
  targetDatabaseSchema,
  targetTable,
  outcomeDatabaseSchema = targetDatabaseSchema,
  outcomeTable = targetTable,
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema"),
  settings,
  databaseId = "database 1",
  outputFolder,
  minCellCount = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>An object of type 'connectionDetails' as created using the
[DatabaseConnector::createConnectionDetails()] function.</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_targetdatabaseschema">targetDatabaseSchema</code></td>
<td>
<p>Schema name where your target cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_targettable">targetTable</code></td>
<td>
<p>Name of the target cohort table.</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_outcomedatabaseschema">outcomeDatabaseSchema</code></td>
<td>
<p>Schema name where your outcome cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_outcometable">outcomeTable</code></td>
<td>
<p>Name of the outcome cohort table.</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>Some database platforms like Oracle and Impala do not truly support temp tables.
To emulate temp tables, provide a schema with write privileges where temp tables
can be created</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_settings">settings</code></td>
<td>
<p>The settings for the timeToEvent study</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_databaseid">databaseId</code></td>
<td>
<p>An identifier for the database (string)</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_outputfolder">outputFolder</code></td>
<td>
<p>A directory to save the results as csv files</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum cell value to display, values less than this will be replaced by -1</p>
</td></tr>
<tr><td><code id="computeDechallengeRechallengeAnalyses_+3A_...">...</code></td>
<td>
<p>extra inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>Andromeda::andromeda()</code> object containing the dechallenge rechallenge results
</p>


<h3>See Also</h3>

<p>Other DechallengeRechallenge: 
<code><a href="#topic+computeRechallengeFailCaseSeriesAnalyses">computeRechallengeFailCaseSeriesAnalyses</a>()</code>,
<code><a href="#topic+createDechallengeRechallengeSettings">createDechallengeRechallengeSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
conDet &lt;- exampleOmopConnectionDetails()

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

computeDechallengeRechallengeAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  settings = drSet,
  outputFolder = tempdir()
)


</code></pre>

<hr>
<h2 id='computeRechallengeFailCaseSeriesAnalyses'>Compute fine the subjects that fail the dechallenge rechallenge study</h2><span id='topic+computeRechallengeFailCaseSeriesAnalyses'></span>

<h3>Description</h3>

<p>Compute fine the subjects that fail the dechallenge rechallenge study
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeRechallengeFailCaseSeriesAnalyses(
  connectionDetails = NULL,
  targetDatabaseSchema,
  targetTable,
  outcomeDatabaseSchema = targetDatabaseSchema,
  outcomeTable = targetTable,
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema"),
  settings,
  databaseId = "database 1",
  showSubjectId = FALSE,
  outputFolder,
  minCellCount = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>An object of type 'connectionDetails' as created using the
[DatabaseConnector::createConnectionDetails()] function.</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_targetdatabaseschema">targetDatabaseSchema</code></td>
<td>
<p>Schema name where your target cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_targettable">targetTable</code></td>
<td>
<p>Name of the target cohort table.</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_outcomedatabaseschema">outcomeDatabaseSchema</code></td>
<td>
<p>Schema name where your outcome cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_outcometable">outcomeTable</code></td>
<td>
<p>Name of the outcome cohort table.</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>Some database platforms like Oracle and Impala do not truly support temp tables.
To emulate temp tables, provide a schema with write privileges where temp tables
can be created</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_settings">settings</code></td>
<td>
<p>The settings for the timeToEvent study</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_databaseid">databaseId</code></td>
<td>
<p>An identifier for the database (string)</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_showsubjectid">showSubjectId</code></td>
<td>
<p>if F then subject_ids are hidden (recommended if sharing results)</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_outputfolder">outputFolder</code></td>
<td>
<p>A directory to save the results as csv files</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum cell value to display, values less than this will be replaced by -1</p>
</td></tr>
<tr><td><code id="computeRechallengeFailCaseSeriesAnalyses_+3A_...">...</code></td>
<td>
<p>extra inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>Andromeda::andromeda()</code> object with the case series details of the failed rechallenge
</p>


<h3>See Also</h3>

<p>Other DechallengeRechallenge: 
<code><a href="#topic+computeDechallengeRechallengeAnalyses">computeDechallengeRechallengeAnalyses</a>()</code>,
<code><a href="#topic+createDechallengeRechallengeSettings">createDechallengeRechallengeSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
conDet &lt;- exampleOmopConnectionDetails()

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

computeRechallengeFailCaseSeriesAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  settings = drSet,
  outputFolder = tempdir()
)

</code></pre>

<hr>
<h2 id='computeTimeToEventAnalyses'>Compute time to event study</h2><span id='topic+computeTimeToEventAnalyses'></span>

<h3>Description</h3>

<p>Compute time to event study
</p>


<h3>Usage</h3>

<pre><code class='language-R'>computeTimeToEventAnalyses(
  connectionDetails = NULL,
  targetDatabaseSchema,
  targetTable,
  outcomeDatabaseSchema = targetDatabaseSchema,
  outcomeTable = targetTable,
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema"),
  cdmDatabaseSchema,
  settings,
  databaseId = "database 1",
  outputFolder,
  minCellCount = 0,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="computeTimeToEventAnalyses_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>An object of type 'connectionDetails' as created using the
[DatabaseConnector::createConnectionDetails()] function.</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_targetdatabaseschema">targetDatabaseSchema</code></td>
<td>
<p>Schema name where your target cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_targettable">targetTable</code></td>
<td>
<p>Name of the target cohort table.</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_outcomedatabaseschema">outcomeDatabaseSchema</code></td>
<td>
<p>Schema name where your outcome cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_outcometable">outcomeTable</code></td>
<td>
<p>Name of the outcome cohort table.</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>Some database platforms like Oracle and Impala do not truly support temp tables.
To emulate temp tables, provide a schema with write privileges where temp tables
can be created</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_cdmdatabaseschema">cdmDatabaseSchema</code></td>
<td>
<p>The database schema containing the OMOP CDM data</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_settings">settings</code></td>
<td>
<p>The settings for the timeToEvent study</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_databaseid">databaseId</code></td>
<td>
<p>An identifier for the database (string)</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_outputfolder">outputFolder</code></td>
<td>
<p>A directory to save the results as csv files</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum cell value to display, values less than this will be replaced by -1</p>
</td></tr>
<tr><td><code id="computeTimeToEventAnalyses_+3A_...">...</code></td>
<td>
<p>extra inputs</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code>Andromeda::andromeda()</code> object containing the time to event results.
</p>


<h3>See Also</h3>

<p>Other TimeToEvent: 
<code><a href="#topic+createTimeToEventSettings">createTimeToEventSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code

conDet &lt;- exampleOmopConnectionDetails()

tteSet &lt;- createTimeToEventSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

result &lt;- computeTimeToEventAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  cdmDatabaseSchema = 'main',
  settings = tteSet,
  outputFolder = file.path(tempdir(), 'tte')
)



</code></pre>

<hr>
<h2 id='createAggregateCovariateSettings'>Create aggregate covariate study settings</h2><span id='topic+createAggregateCovariateSettings'></span>

<h3>Description</h3>

<p>Create aggregate covariate study settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createAggregateCovariateSettings(
  targetIds,
  outcomeIds,
  minPriorObservation = 0,
  outcomeWashoutDays = 0,
  riskWindowStart = 1,
  startAnchor = "cohort start",
  riskWindowEnd = 365,
  endAnchor = "cohort start",
  covariateSettings = FeatureExtraction::createCovariateSettings(useDemographicsGender =
    TRUE, useDemographicsAge = TRUE, useDemographicsAgeGroup = TRUE, useDemographicsRace
    = TRUE, useDemographicsEthnicity = TRUE, useDemographicsIndexYear = TRUE,
    useDemographicsIndexMonth = TRUE, useDemographicsTimeInCohort = TRUE,
    useDemographicsPriorObservationTime = TRUE, useDemographicsPostObservationTime =
    TRUE, useConditionGroupEraLongTerm = TRUE, useDrugGroupEraOverlapping = TRUE,
    useDrugGroupEraLongTerm = TRUE, useProcedureOccurrenceLongTerm = TRUE, 
    
    useMeasurementLongTerm = TRUE, useObservationLongTerm = TRUE,
    useDeviceExposureLongTerm = TRUE, useVisitConceptCountLongTerm = TRUE,
    useConditionGroupEraShortTerm = TRUE, useDrugGroupEraShortTerm = TRUE,
    useProcedureOccurrenceShortTerm = TRUE, useMeasurementShortTerm = TRUE,
    useObservationShortTerm = TRUE, useDeviceExposureShortTerm = TRUE,
    useVisitConceptCountShortTerm = TRUE, endDays = 0, longTermStartDays = -365,
    shortTermStartDays = -30),
  caseCovariateSettings = createDuringCovariateSettings(useConditionGroupEraDuring =
    TRUE, useDrugGroupEraDuring = TRUE, useProcedureOccurrenceDuring = TRUE,
    useDeviceExposureDuring = TRUE, useMeasurementDuring = TRUE, useObservationDuring =
    TRUE, useVisitConceptCountDuring = TRUE),
  casePreTargetDuration = 365,
  casePostOutcomeDuration = 365,
  extractNonCaseCovariates = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createAggregateCovariateSettings_+3A_targetids">targetIds</code></td>
<td>
<p>A list of cohortIds for the target cohorts</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_outcomeids">outcomeIds</code></td>
<td>
<p>A list of cohortIds for the outcome cohorts</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_minpriorobservation">minPriorObservation</code></td>
<td>
<p>The minimum time (in days) in the database a patient in the target cohorts must be observed prior to index</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_outcomewashoutdays">outcomeWashoutDays</code></td>
<td>
<p>Patients with the outcome within outcomeWashout days prior to index are excluded from the risk factor analysis</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_riskwindowstart">riskWindowStart</code></td>
<td>
<p>The start of the risk window (in days) relative to the 'startAnchor'.</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_startanchor">startAnchor</code></td>
<td>
<p>The anchor point for the start of the risk window. Can be '&quot;cohort start&quot;'
or '&quot;cohort end&quot;'.</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_riskwindowend">riskWindowEnd</code></td>
<td>
<p>The end of the risk window (in days) relative to the 'endAnchor'.</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_endanchor">endAnchor</code></td>
<td>
<p>The anchor point for the end of the risk window. Can be '&quot;cohort start&quot;'
or '&quot;cohort end&quot;'.</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_covariatesettings">covariateSettings</code></td>
<td>
<p>An object created using <code>FeatureExtraction::createCovariateSettings</code></p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_casecovariatesettings">caseCovariateSettings</code></td>
<td>
<p>An object created using <code>createDuringCovariateSettings</code></p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_casepretargetduration">casePreTargetDuration</code></td>
<td>
<p>The number of days prior to case index we use for FeatureExtraction</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_casepostoutcomeduration">casePostOutcomeDuration</code></td>
<td>
<p>The number of days prior to case index we use for FeatureExtraction</p>
</td></tr>
<tr><td><code id="createAggregateCovariateSettings_+3A_extractnoncasecovariates">extractNonCaseCovariates</code></td>
<td>
<p>Whether to extract aggregate covariates and counts for patients in the targets and outcomes in addition to the cases</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the settings
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
aggregateSetting &lt;- createAggregateCovariateSettings(
  targetIds = c(1,2),
  outcomeIds = c(3),
  minPriorObservation = 365,
  outcomeWashoutDays = 90,
  riskWindowStart = 1,
  startAnchor = "cohort start",
  riskWindowEnd = 365,
  endAnchor = "cohort start",
  casePreTargetDuration = 365,
  casePostOutcomeDuration = 365
)

</code></pre>

<hr>
<h2 id='createCharacterizationSettings'>Create the settings for a large scale characterization study</h2><span id='topic+createCharacterizationSettings'></span>

<h3>Description</h3>

<p>This function creates a list of settings for different characterization studies
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createCharacterizationSettings(
  timeToEventSettings = NULL,
  dechallengeRechallengeSettings = NULL,
  aggregateCovariateSettings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createCharacterizationSettings_+3A_timetoeventsettings">timeToEventSettings</code></td>
<td>
<p>A list of timeToEvent settings</p>
</td></tr>
<tr><td><code id="createCharacterizationSettings_+3A_dechallengerechallengesettings">dechallengeRechallengeSettings</code></td>
<td>
<p>A list of dechallengeRechallenge settings</p>
</td></tr>
<tr><td><code id="createCharacterizationSettings_+3A_aggregatecovariatesettings">aggregateCovariateSettings</code></td>
<td>
<p>A list of aggregateCovariate settings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Specify one or more timeToEvent, dechallengeRechallenge and aggregateCovariate settings
</p>


<h3>Value</h3>

<p>Returns the connection to the sqlite database
</p>


<h3>See Also</h3>

<p>Other LargeScale: 
<code><a href="#topic+loadCharacterizationSettings">loadCharacterizationSettings</a>()</code>,
<code><a href="#topic+runCharacterizationAnalyses">runCharacterizationAnalyses</a>()</code>,
<code><a href="#topic+saveCharacterizationSettings">saveCharacterizationSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

</code></pre>

<hr>
<h2 id='createCharacterizationTables'>Create the results tables to store characterization results into a database</h2><span id='topic+createCharacterizationTables'></span>

<h3>Description</h3>

<p>This function executes a large set of SQL statements to create tables that can store results
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createCharacterizationTables(
  connectionDetails,
  resultSchema,
  targetDialect = "postgresql",
  deleteExistingTables = TRUE,
  createTables = TRUE,
  tablePrefix = "c_",
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createCharacterizationTables_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>The connectionDetails to a database created by using the
function <code>createConnectDetails</code> in the
<code>DatabaseConnector</code> package.</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_resultschema">resultSchema</code></td>
<td>
<p>The name of the database schema that the result tables will be created.</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_targetdialect">targetDialect</code></td>
<td>
<p>The database management system being used</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_deleteexistingtables">deleteExistingTables</code></td>
<td>
<p>If true any existing tables matching the Characterization result tables names will be deleted</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_createtables">createTables</code></td>
<td>
<p>If true the Characterization result tables will be created</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_tableprefix">tablePrefix</code></td>
<td>
<p>A string appended to the Characterization result tables</p>
</td></tr>
<tr><td><code id="createCharacterizationTables_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>The temp schema used when the database management system is oracle</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function can be used to create (or delete) Characterization result tables
</p>


<h3>Value</h3>

<p>Returns NULL but creates the required tables into the specified database schema.
</p>


<h3>See Also</h3>

<p>Other Database: 
<code><a href="#topic+createSqliteDatabase">createSqliteDatabase</a>()</code>,
<code><a href="#topic+insertResultsToDatabase">insertResultsToDatabase</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># create sqlite database
charResultDbCD &lt;- createSqliteDatabase()

# create database results tables
createCharacterizationTables(
   connectionDetails = charResultDbCD,
   resultSchema = 'main'
 )

</code></pre>

<hr>
<h2 id='createDechallengeRechallengeSettings'>Create dechallenge rechallenge study settings</h2><span id='topic+createDechallengeRechallengeSettings'></span>

<h3>Description</h3>

<p>Create dechallenge rechallenge study settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createDechallengeRechallengeSettings(
  targetIds,
  outcomeIds,
  dechallengeStopInterval = 30,
  dechallengeEvaluationWindow = 30
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createDechallengeRechallengeSettings_+3A_targetids">targetIds</code></td>
<td>
<p>A list of cohortIds for the target cohorts</p>
</td></tr>
<tr><td><code id="createDechallengeRechallengeSettings_+3A_outcomeids">outcomeIds</code></td>
<td>
<p>A list of cohortIds for the outcome cohorts</p>
</td></tr>
<tr><td><code id="createDechallengeRechallengeSettings_+3A_dechallengestopinterval">dechallengeStopInterval</code></td>
<td>
<p>An integer specifying the how much time to add to the cohort_end when determining whether the event starts during cohort and ends after</p>
</td></tr>
<tr><td><code id="createDechallengeRechallengeSettings_+3A_dechallengeevaluationwindow">dechallengeEvaluationWindow</code></td>
<td>
<p>An integer specifying the period of time after the cohort_end when you cannot see an outcome for a dechallenge success</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A list with the settings
</p>


<h3>See Also</h3>

<p>Other DechallengeRechallenge: 
<code><a href="#topic+computeDechallengeRechallengeAnalyses">computeDechallengeRechallengeAnalyses</a>()</code>,
<code><a href="#topic+computeRechallengeFailCaseSeriesAnalyses">computeRechallengeFailCaseSeriesAnalyses</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)


</code></pre>

<hr>
<h2 id='createDuringCovariateSettings'>Create during covariate settings</h2><span id='topic+createDuringCovariateSettings'></span>

<h3>Description</h3>

<p>Create during covariate settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createDuringCovariateSettings(
  useConditionOccurrenceDuring = FALSE,
  useConditionOccurrencePrimaryInpatientDuring = FALSE,
  useConditionEraDuring = FALSE,
  useConditionGroupEraDuring = FALSE,
  useDrugExposureDuring = FALSE,
  useDrugEraDuring = FALSE,
  useDrugGroupEraDuring = FALSE,
  useProcedureOccurrenceDuring = FALSE,
  useDeviceExposureDuring = FALSE,
  useMeasurementDuring = FALSE,
  useObservationDuring = FALSE,
  useVisitCountDuring = FALSE,
  useVisitConceptCountDuring = FALSE,
  includedCovariateConceptIds = c(),
  addDescendantsToInclude = FALSE,
  excludedCovariateConceptIds = c(),
  addDescendantsToExclude = FALSE,
  includedCovariateIds = c()
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createDuringCovariateSettings_+3A_useconditionoccurrenceduring">useConditionOccurrenceDuring</code></td>
<td>
<p>One covariate per condition in the
condition_occurrence table starting between
cohort start and cohort end. (analysis ID 109)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_useconditionoccurrenceprimaryinpatientduring">useConditionOccurrencePrimaryInpatientDuring</code></td>
<td>
<p>One covariate per condition observed as
a primary diagnosis in an inpatient
setting in the condition_occurrence table starting between
cohort start and cohort end. (analysis ID 110)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_useconditioneraduring">useConditionEraDuring</code></td>
<td>
<p>One covariate per condition in the condition_era table
starting between cohort start and cohort end.
(analysis ID 217)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_useconditiongrouperaduring">useConditionGroupEraDuring</code></td>
<td>
<p>One covariate per condition era rolled
up to groups in the condition_era table
starting between cohort start and cohort end.
(analysis ID 218)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usedrugexposureduring">useDrugExposureDuring</code></td>
<td>
<p>One covariate per drug in the drug_exposure table between cohort start and end.
(analysisId 305)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usedrugeraduring">useDrugEraDuring</code></td>
<td>
<p>One covariate per drug in the drug_era table between cohort start and end.
(analysis ID 417)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usedruggrouperaduring">useDrugGroupEraDuring</code></td>
<td>
<p>One covariate per drug rolled up to ATC groups in the drug_era table between cohort start and end.
(analysis ID 418)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_useprocedureoccurrenceduring">useProcedureOccurrenceDuring</code></td>
<td>
<p>One covariate per procedure in the procedure_occurrence table between cohort start and end.
(analysis ID 505)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usedeviceexposureduring">useDeviceExposureDuring</code></td>
<td>
<p>One covariate per device in the device exposure table starting between cohort start and end.
(analysis ID 605)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usemeasurementduring">useMeasurementDuring</code></td>
<td>
<p>One covariate per measurement in the measurement table between cohort start and end.
(analysis ID 713)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_useobservationduring">useObservationDuring</code></td>
<td>
<p>One covariate per observation in the observation table between cohort start and end.
(analysis ID 805)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usevisitcountduring">useVisitCountDuring</code></td>
<td>
<p>The number of visits observed between cohort start and end.
(analysis ID 926)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_usevisitconceptcountduring">useVisitConceptCountDuring</code></td>
<td>
<p>The number of visits observed between cohort start and end, stratified by visit concept ID.
(analysis ID 927)</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_includedcovariateconceptids">includedCovariateConceptIds</code></td>
<td>
<p>A list of concept IDs that should be
used to construct covariates.</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_adddescendantstoinclude">addDescendantsToInclude</code></td>
<td>
<p>Should descendant concept IDs be added
to the list of concepts to include?</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_excludedcovariateconceptids">excludedCovariateConceptIds</code></td>
<td>
<p>A list of concept IDs that should NOT be
used to construct covariates.</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_adddescendantstoexclude">addDescendantsToExclude</code></td>
<td>
<p>Should descendant concept IDs be added
to the list of concepts to exclude?</p>
</td></tr>
<tr><td><code id="createDuringCovariateSettings_+3A_includedcovariateids">includedCovariateIds</code></td>
<td>
<p>A list of covariate IDs that should be
restricted to.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>creates an object specifying how during covariates should be constructed from data in the CDM model.
</p>


<h3>Value</h3>

<p>An object of type <code>covariateSettings</code>, to be used in other functions.
</p>


<h3>See Also</h3>

<p>Other CovariateSetting: 
<code><a href="#topic+getDbDuringCovariateData">getDbDuringCovariateData</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>settings &lt;- createDuringCovariateSettings(
  useConditionOccurrenceDuring = TRUE,
  useConditionOccurrencePrimaryInpatientDuring = FALSE,
  useConditionEraDuring = FALSE,
  useConditionGroupEraDuring = FALSE
)

</code></pre>

<hr>
<h2 id='createSqliteDatabase'>Create an sqlite database connection</h2><span id='topic+createSqliteDatabase'></span>

<h3>Description</h3>

<p>This function creates a connection to an sqlite database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createSqliteDatabase(sqliteLocation = tempdir())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createSqliteDatabase_+3A_sqlitelocation">sqliteLocation</code></td>
<td>
<p>The location of the sqlite database</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function creates a sqlite database and connection
</p>


<h3>Value</h3>

<p>Returns the connection detail object to the sqlite database
</p>


<h3>See Also</h3>

<p>Other Database: 
<code><a href="#topic+createCharacterizationTables">createCharacterizationTables</a>()</code>,
<code><a href="#topic+insertResultsToDatabase">insertResultsToDatabase</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
charResultDbCD &lt;- createSqliteDatabase()


</code></pre>

<hr>
<h2 id='createTimeToEventSettings'>Create time to event study settings</h2><span id='topic+createTimeToEventSettings'></span>

<h3>Description</h3>

<p>Create time to event study settings
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createTimeToEventSettings(targetIds, outcomeIds)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="createTimeToEventSettings_+3A_targetids">targetIds</code></td>
<td>
<p>A list of cohortIds for the target cohorts</p>
</td></tr>
<tr><td><code id="createTimeToEventSettings_+3A_outcomeids">outcomeIds</code></td>
<td>
<p>A list of cohortIds for the outcome cohorts</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An list with the time to event settings
</p>


<h3>See Also</h3>

<p>Other TimeToEvent: 
<code><a href="#topic+computeTimeToEventAnalyses">computeTimeToEventAnalyses</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code

tteSet &lt;- createTimeToEventSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)


</code></pre>

<hr>
<h2 id='exampleOmopConnectionDetails'>create a connection detail for an example GI Bleed dataset from Eunomia</h2><span id='topic+exampleOmopConnectionDetails'></span>

<h3>Description</h3>

<p>This returns an object of class 'ConnectionDetails' that lets you connect via 'DatabaseConnector::connect()' to the example database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exampleOmopConnectionDetails(exdir = tempdir())
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="exampleOmopConnectionDetails_+3A_exdir">exdir</code></td>
<td>
<p>a directory to unzip the example OMOP database into.  Default is tempdir().</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Finds the location of the example database in the package and calls 'DatabaseConnector::createConnectionDetails' to create a 'ConnectionDetails' object for connecting to the database.
</p>


<h3>Value</h3>

<p>An object of class 'ConnectionDetails' with the details to connect to the example OHDSI OMOP CDM database
</p>


<h3>Examples</h3>

<pre><code class='language-R'>conDet &lt;- exampleOmopConnectionDetails()

connectionHandler &lt;- ResultModelManager::ConnectionHandler$new(conDet)

</code></pre>

<hr>
<h2 id='getDbDuringCovariateData'>Extracts covariates that occur during a cohort</h2><span id='topic+getDbDuringCovariateData'></span>

<h3>Description</h3>

<p>Extracts covariates that occur during a cohort
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDbDuringCovariateData(
  connection,
  oracleTempSchema = NULL,
  cdmDatabaseSchema,
  cdmVersion = "5",
  cohortTable = "#cohort_person",
  rowIdField = "subject_id",
  aggregated = TRUE,
  cohortIds = c(-1),
  covariateSettings,
  minCharacterizationMean = 0,
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getDbDuringCovariateData_+3A_connection">connection</code></td>
<td>
<p>The database connection</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_oracletempschema">oracleTempSchema</code></td>
<td>
<p>The temp schema if using oracle</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_cdmdatabaseschema">cdmDatabaseSchema</code></td>
<td>
<p>The schema of the OMOP CDM data</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_cdmversion">cdmVersion</code></td>
<td>
<p>version of the OMOP CDM data</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_cohorttable">cohortTable</code></td>
<td>
<p>the table name that contains the target population cohort</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_rowidfield">rowIdField</code></td>
<td>
<p>string representing the unique identifier in the target population cohort</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_aggregated">aggregated</code></td>
<td>
<p>whether the covariate should be aggregated</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_cohortids">cohortIds</code></td>
<td>
<p>cohort id for the target cohort</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_covariatesettings">covariateSettings</code></td>
<td>
<p>settings for the covariate cohorts and time periods</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_mincharacterizationmean">minCharacterizationMean</code></td>
<td>
<p>the minimum value for a covariate to be extracted</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>Some database platforms like Oracle and Impala do not truly support temp tables.
To emulate temp tables, provide a schema with write privileges where temp tables
can be created</p>
</td></tr>
<tr><td><code id="getDbDuringCovariateData_+3A_...">...</code></td>
<td>
<p>additional arguments from FeatureExtraction</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The user specifies a what during covariates they want and this executes them using FE
</p>


<h3>Value</h3>

<p>A 'FeatureExtraction' covariateData object containing the during covariates based on user settings
</p>


<h3>See Also</h3>

<p>Other CovariateSetting: 
<code><a href="#topic+createDuringCovariateSettings">createDuringCovariateSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
conDet &lt;- exampleOmopConnectionDetails()
connection &lt;- DatabaseConnector::connect(conDet)

settings &lt;- createDuringCovariateSettings(
  useConditionOccurrenceDuring = TRUE,
  useConditionOccurrencePrimaryInpatientDuring = FALSE,
  useConditionEraDuring = FALSE,
  useConditionGroupEraDuring = FALSE
)

duringData &lt;- getDbDuringCovariateData(
  connection &lt;- connection,
  cdmDatabaseSchema = 'main',
  cohortIds = 1,
  covariateSettings = settings,
  cohortTable = 'cohort'
)

</code></pre>

<hr>
<h2 id='insertResultsToDatabase'>Upload the results into a result database</h2><span id='topic+insertResultsToDatabase'></span>

<h3>Description</h3>

<p>This function uploads results in csv format into a result database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>insertResultsToDatabase(
  connectionDetails,
  schema,
  resultsFolder,
  tablePrefix = "",
  csvTablePrefix = "c_"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="insertResultsToDatabase_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>The connection details to the result database</p>
</td></tr>
<tr><td><code id="insertResultsToDatabase_+3A_schema">schema</code></td>
<td>
<p>The schema for the result database</p>
</td></tr>
<tr><td><code id="insertResultsToDatabase_+3A_resultsfolder">resultsFolder</code></td>
<td>
<p>The folder containing the csv results</p>
</td></tr>
<tr><td><code id="insertResultsToDatabase_+3A_tableprefix">tablePrefix</code></td>
<td>
<p>A prefix to append to the result tables for the characterization results</p>
</td></tr>
<tr><td><code id="insertResultsToDatabase_+3A_csvtableprefix">csvTablePrefix</code></td>
<td>
<p>The prefix added to the csv results - default is 'c_'</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Calls ResultModelManager uploadResults function to upload the csv files
</p>


<h3>Value</h3>

<p>Returns the connection to the sqlite database
</p>


<h3>See Also</h3>

<p>Other Database: 
<code><a href="#topic+createCharacterizationTables">createCharacterizationTables</a>()</code>,
<code><a href="#topic+createSqliteDatabase">createSqliteDatabase</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# generate results into resultsFolder
conDet &lt;- exampleOmopConnectionDetails()

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

runCharacterizationAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  outcomeDatabaseSchema = 'main',
  outcomeTable = 'cohort',
  cdmDatabaseSchema = 'main',
  characterizationSettings = cSet,
  outputDirectory = tempdir()
)

# create sqlite database
charResultDbCD &lt;- createSqliteDatabase()

# create database results tables
createCharacterizationTables(
   connectionDetails = charResultDbCD,
   resultSchema = 'main'
 )

# insert results
insertResultsToDatabase(
 connectionDetails = charResultDbCD,
 schema = 'main',
 resultsFolder = tempdir()
)


</code></pre>

<hr>
<h2 id='loadCharacterizationSettings'>Load the characterization settings previously saved as a json file</h2><span id='topic+loadCharacterizationSettings'></span>

<h3>Description</h3>

<p>This function converts the json file back into an R object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadCharacterizationSettings(fileName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="loadCharacterizationSettings_+3A_filename">fileName</code></td>
<td>
<p>The location of the the json settings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Input the directory containing the 'characterizationSettings.json' file and load the settings into R
</p>


<h3>Value</h3>

<p>Returns the json settings as an R object
</p>


<h3>See Also</h3>

<p>Other LargeScale: 
<code><a href="#topic+createCharacterizationSettings">createCharacterizationSettings</a>()</code>,
<code><a href="#topic+runCharacterizationAnalyses">runCharacterizationAnalyses</a>()</code>,
<code><a href="#topic+saveCharacterizationSettings">saveCharacterizationSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example code

setPath &lt;- file.path(tempdir(), 'charSet.json')

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

saveCharacterizationSettings(
  settings = cSet,
  fileName = setPath
)

setting &lt;- loadCharacterizationSettings(setPath)


</code></pre>

<hr>
<h2 id='runCharacterizationAnalyses'>execute a large-scale characterization study</h2><span id='topic+runCharacterizationAnalyses'></span>

<h3>Description</h3>

<p>Specify the database connection containing the CDM data, the cohort database schemas/tables,
the characterization settings and the directory to save the results to
</p>


<h3>Usage</h3>

<pre><code class='language-R'>runCharacterizationAnalyses(
  connectionDetails,
  targetDatabaseSchema,
  targetTable,
  outcomeDatabaseSchema,
  outcomeTable,
  tempEmulationSchema = getOption("sqlRenderTempEmulationSchema"),
  cdmDatabaseSchema,
  characterizationSettings,
  outputDirectory,
  executionPath = file.path(outputDirectory, "execution"),
  csvFilePrefix = "c_",
  databaseId = "1",
  showSubjectId = FALSE,
  minCellCount = 0,
  incremental = TRUE,
  threads = 1,
  minCharacterizationMean = 0.01
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="runCharacterizationAnalyses_+3A_connectiondetails">connectionDetails</code></td>
<td>
<p>The connection details to the database containing the OMOP CDM data</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_targetdatabaseschema">targetDatabaseSchema</code></td>
<td>
<p>Schema name where your target cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_targettable">targetTable</code></td>
<td>
<p>Name of the target cohort table.</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_outcomedatabaseschema">outcomeDatabaseSchema</code></td>
<td>
<p>Schema name where your outcome cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_outcometable">outcomeTable</code></td>
<td>
<p>Name of the outcome cohort table.</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_tempemulationschema">tempEmulationSchema</code></td>
<td>
<p>Some database platforms like Oracle and Impala do not truly support temp tables.
To emulate temp tables, provide a schema with write privileges where temp tables
can be created</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_cdmdatabaseschema">cdmDatabaseSchema</code></td>
<td>
<p>The schema with the OMOP CDM data</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_characterizationsettings">characterizationSettings</code></td>
<td>
<p>The study settings created using <code>createCharacterizationSettings</code></p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_outputdirectory">outputDirectory</code></td>
<td>
<p>The location to save the final csv files to</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_executionpath">executionPath</code></td>
<td>
<p>The location where intermediate results are saved to</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_csvfileprefix">csvFilePrefix</code></td>
<td>
<p>A string to append the csv files in the outputDirectory</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_databaseid">databaseId</code></td>
<td>
<p>The unique identifier for the cdm database</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_showsubjectid">showSubjectId</code></td>
<td>
<p>Whether to include subjectId of failed rechallenge case series or hide</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_mincellcount">minCellCount</code></td>
<td>
<p>The minimum count value that is calculated</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_incremental">incremental</code></td>
<td>
<p>If TRUE then skip previously executed analyses that completed</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_threads">threads</code></td>
<td>
<p>The number of threads to use when running aggregate covariates</p>
</td></tr>
<tr><td><code id="runCharacterizationAnalyses_+3A_mincharacterizationmean">minCharacterizationMean</code></td>
<td>
<p>The minimum mean threshold to extract when running aggregate covariates</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The results of the characterization will be saved into an sqlite database inside the
specified saveDirectory
</p>


<h3>Value</h3>

<p>Multiple csv files in the outputDirectory.
</p>


<h3>See Also</h3>

<p>Other LargeScale: 
<code><a href="#topic+createCharacterizationSettings">createCharacterizationSettings</a>()</code>,
<code><a href="#topic+loadCharacterizationSettings">loadCharacterizationSettings</a>()</code>,
<code><a href="#topic+saveCharacterizationSettings">saveCharacterizationSettings</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
conDet &lt;- exampleOmopConnectionDetails()

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

runCharacterizationAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  outcomeDatabaseSchema = 'main',
  outcomeTable = 'cohort',
  cdmDatabaseSchema = 'main',
  characterizationSettings = cSet,
  outputDirectory = tempdir()
)

</code></pre>

<hr>
<h2 id='saveCharacterizationSettings'>Save the characterization settings as a json</h2><span id='topic+saveCharacterizationSettings'></span>

<h3>Description</h3>

<p>This function converts the settings into a json object and saves it
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveCharacterizationSettings(settings, fileName)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="saveCharacterizationSettings_+3A_settings">settings</code></td>
<td>
<p>An object of class characterizationSettings created using <code>createCharacterizationSettings</code></p>
</td></tr>
<tr><td><code id="saveCharacterizationSettings_+3A_filename">fileName</code></td>
<td>
<p>The location to save the json settings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Input the characterization settings and output a json file to a file named 'characterizationSettings.json' inside the saveDirectory
</p>


<h3>Value</h3>

<p>Returns the location of the directory containing the json settings
</p>


<h3>See Also</h3>

<p>Other LargeScale: 
<code><a href="#topic+createCharacterizationSettings">createCharacterizationSettings</a>()</code>,
<code><a href="#topic+loadCharacterizationSettings">loadCharacterizationSettings</a>()</code>,
<code><a href="#topic+runCharacterizationAnalyses">runCharacterizationAnalyses</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

saveCharacterizationSettings(
  settings = cSet,
  fileName = file.path(tempdir(), 'cSet.json')
)

</code></pre>

<hr>
<h2 id='viewCharacterization'>viewCharacterization - Interactively view the characterization results</h2><span id='topic+viewCharacterization'></span>

<h3>Description</h3>

<p>This is a shiny app for viewing interactive plots and tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>viewCharacterization(resultFolder, cohortDefinitionSet = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="viewCharacterization_+3A_resultfolder">resultFolder</code></td>
<td>
<p>The location of the csv results</p>
</td></tr>
<tr><td><code id="viewCharacterization_+3A_cohortdefinitionset">cohortDefinitionSet</code></td>
<td>
<p>The cohortDefinitionSet extracted using webAPI</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Input is the output of ...
</p>


<h3>Value</h3>

<p>Opens a shiny app for interactively viewing the results
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
conDet &lt;- exampleOmopConnectionDetails()

drSet &lt;- createDechallengeRechallengeSettings(
  targetIds = c(1,2),
  outcomeIds = 3
)

cSet &lt;- createCharacterizationSettings(
  dechallengeRechallengeSettings = drSet
)

runCharacterizationAnalyses(
  connectionDetails = conDet,
  targetDatabaseSchema = 'main',
  targetTable = 'cohort',
  outcomeDatabaseSchema = 'main',
  outcomeTable = 'cohort',
  cdmDatabaseSchema = 'main',
  characterizationSettings = cSet,
  outputDirectory = file.path(tempdir(),'view')
)

viewCharacterization(
  resultFolder = file.path(tempdir(),'view')
)


</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
