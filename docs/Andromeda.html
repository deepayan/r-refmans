<!DOCTYPE html><html><head><title>Help for package Andromeda</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {Andromeda}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#Andromeda-package'><p>Andromeda: Asynchronous Disk-Based Representation of Massive Data</p></a></li>
<li><a href='#andromeda'><p>Create an Andromeda object</p></a></li>
<li><a href='#Andromeda-class'><p>The Andromeda class</p></a></li>
<li><a href='#appendToTable'><p>Append to an Andromeda table</p></a></li>
<li><a href='#batchApply'><p>Apply a function to batches of data in an Andromeda table</p></a></li>
<li><a href='#batchTest'><p>Apply a boolean test to batches of data in an Andromeda table and terminate early</p></a></li>
<li><a href='#copyAndromeda'><p>Copy Andromeda</p></a></li>
<li><a href='#createIndex'><p>Create an index on one or more columns in an Andromeda table</p></a></li>
<li><a href='#getAndromedaTempDiskSpace'><p>Get the available disk space in Andromeda temp</p></a></li>
<li><a href='#groupApply'><p>Apply a function to groups of data in an Andromeda table</p></a></li>
<li><a href='#isAndromeda'><p>Check whether an object is an Andromeda object</p></a></li>
<li><a href='#isAndromedaTable'><p>Is the object an Andromeda table?</p></a></li>
<li><a href='#isValidAndromeda'><p>Check whether an Andromeda object is still valid</p></a></li>
<li><a href='#listIndices'><p>List all indices on an Andromeda table</p></a></li>
<li><a href='#loadAndromeda'><p>Load Andromeda from file</p></a></li>
<li><a href='#names.tbl_Andromeda'><p>Get the column names of an Andromeda table</p></a></li>
<li><a href='#names&lt;-,Andromeda-method'><p>Set table names in an Andromeda object</p></a></li>
<li><a href='#names&lt;-.tbl_Andromeda'><p>Set column names of an Andromeda table</p></a></li>
<li><a href='#removeIndex'><p>Removes an index from an Andromeda table</p></a></li>
<li><a href='#restoreDate'><p>Restore dates</p></a></li>
<li><a href='#restorePosixct'><p>Restore timestamps</p></a></li>
<li><a href='#saveAndromeda'><p>Save Andromeda to file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Asynchronous Disk-Based Representation of Massive Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.6.6</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-03-21</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Martijn Schuemie &lt;schuemie@ohdsi.org&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Storing very large data objects on a local drive, while still making it possible to manipulate the data in an efficient manner.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/OHDSI/Andromeda">https://github.com/OHDSI/Andromeda</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/OHDSI/Andromeda/issues">https://github.com/OHDSI/Andromeda/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>dplyr</td>
</tr>
<tr>
<td>Imports:</td>
<td>RSQLite, DBI, zip, methods, dbplyr, tidyselect, cli, rlang,
pillar, hms</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, stringr, knitr, rmarkdown, tibble, rJava,
rcmdcheck, arrow</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-21 10:32:29 UTC; schuemie</td>
</tr>
<tr>
<td>Author:</td>
<td>Adam Black [aut],
  Egill Fridgeirsson [aut],
  Martijn Schuemie [aut, cre],
  Marc A. Suchard [aut],
  Observational Health Data Science and Informatics [cph]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-21 11:30:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='Andromeda-package'>Andromeda: Asynchronous Disk-Based Representation of Massive Data</h2><span id='topic+Andromeda-package'></span>

<h3>Description</h3>

<p>Storing very large data objects on a local drive, while still making it possible to manipulate the data in an efficient manner.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Martijn Schuemie <a href="mailto:schuemie@ohdsi.org">schuemie@ohdsi.org</a>
</p>
<p>Authors:
</p>

<ul>
<li><p> Adam Black <a href="mailto:black@ohdsi.org">black@ohdsi.org</a>
</p>
</li>
<li><p> Egill Fridgeirsson <a href="mailto:e.fridgeirsson@erasmusmc.nl">e.fridgeirsson@erasmusmc.nl</a>
</p>
</li>
<li><p> Marc A. Suchard <a href="mailto:msuchard@ucla.edu">msuchard@ucla.edu</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Observational Health Data Science and Informatics [copyright holder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/OHDSI/Andromeda">https://github.com/OHDSI/Andromeda</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/OHDSI/Andromeda/issues">https://github.com/OHDSI/Andromeda/issues</a>
</p>
</li></ul>


<hr>
<h2 id='andromeda'>Create an Andromeda object</h2><span id='topic+andromeda'></span>

<h3>Description</h3>

<p>By default the <code>Andromeda</code> object is created in the systems temporary file location. You can override
this by specifying a folder using <code>options(andromedaTempFolder = "c:/andromedaTemp")</code>, where
<code>"c:/andromedaTemp"</code> is the folder to create the Andromeda objects in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>andromeda(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="andromeda_+3A_...">...</code></td>
<td>
<p>Named objects. See details for what objects are valid. If no objects are provided, an
empty Andromeda is returned.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Valid objects are data frames, <code>Andromeda</code> tables, or any other <code><a href="dplyr.html#topic+dplyr">dplyr</a></code> table.
</p>


<h3>Value</h3>

<p>Returns an <code><a href="#topic+Andromeda">Andromeda</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars, iris = iris)

names(andr)
# [1] 'cars' 'iris'

andr$cars %&gt;% filter(speed &gt; 10) %&gt;% collect()
# # A tibble: 41 x 2 
# speed dist 
# &lt;dbl&gt; &lt;dbl&gt; 
# 1 11 17 
# ...

close(andr)

</code></pre>

<hr>
<h2 id='Andromeda-class'>The Andromeda class</h2><span id='topic+Andromeda-class'></span><span id='topic+Andromeda'></span><span id='topic+show+2CAndromeda-method'></span><span id='topic++24+2CAndromeda-method'></span><span id='topic++24+3C-+2CAndromeda-method'></span><span id='topic++5B+5B+3C-+2CAndromeda-method'></span><span id='topic++5B+5B+2CAndromeda-method'></span><span id='topic+names+2CAndromeda-method'></span><span id='topic+length+2CAndromeda-method'></span><span id='topic+close+2CAndromeda-method'></span>

<h3>Description</h3>

<p>The <code>Andromeda</code> class is an S4 object.
</p>
<p>This class provides the ability to work with data objects in R that are too large to fit in memory. Instead,
these objects are stored on disk. This is slower than working from memory, but may be the only viable option.
</p>
<p>Show the names of the tables in an Andromeda object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 method for signature 'Andromeda'
show(object)

## S4 method for signature 'Andromeda'
x$name

## S4 replacement method for signature 'Andromeda'
x$name &lt;- value

## S4 replacement method for signature 'Andromeda'
x[[i]] &lt;- value

## S4 method for signature 'Andromeda'
x[[i]]

## S4 method for signature 'Andromeda'
names(x)

## S4 method for signature 'Andromeda'
length(x)

## S4 method for signature 'Andromeda'
close(con, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="Andromeda-class_+3A_object">object</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> object.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_x">x</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> object.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_name">name</code></td>
<td>
<p>The name of a table in the <code><a href="#topic+Andromeda">Andromeda</a></code> object.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_value">value</code></td>
<td>
<p>A data frame, <code><a href="#topic+Andromeda">Andromeda</a></code> table, or other 'DBI' table.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_i">i</code></td>
<td>
<p>The name of a table in the <code><a href="#topic+Andromeda">Andromeda</a></code> object.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_con">con</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> object.</p>
</td></tr>
<tr><td><code id="Andromeda-class_+3A_...">...</code></td>
<td>
<p>Included for compatibility with generic <code>close()</code> method.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of names.
</p>


<h3>Tables</h3>

<p>An <code>Andromeda</code> object has zero, one or more tables. The list of table names can be retrieved using the <code><a href="base.html#topic+names">names()</a></code>
method. Tables can be accessed using the dollar sign syntax, e.g. <code>andromeda$myTable</code>, or double-square-bracket
syntax, e.g. <code>andromeda[["myTable"]]</code>
</p>


<h3>Permanence</h3>

<p>To mimic the behavior of in-memory objects, when working with data in <code>Andromeda</code> the data is stored in a
temporary location on the disk. You can modify the data as you can see fit, and when needed can save the data
to a permanent location. Later this data can be loaded to a temporary location again and be read and modified,
while keeping the saved data as is.
</p>


<h3>Inheritance</h3>

<p>The <code>Andromeda</code> inherits directly from <code>SQLiteConnection.</code> As such, it can be used as if it is a <code>SQLiteConnection</code>.
<code><a href="RSQLite.html#topic+RSQLite">RSQLite</a></code> is an R wrapper around 'SQLite', a low-weight but very powerful single-user SQL database that can run
from a single file on the local file system.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+andromeda">andromeda()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars, iris = iris)

names(andr)
# [1] 'cars' 'iris'

close(andr)

</code></pre>

<hr>
<h2 id='appendToTable'>Append to an Andromeda table</h2><span id='topic+appendToTable'></span>

<h3>Description</h3>

<p>Append a data frame, Andromeda table, or result of a query on an <code><a href="#topic+Andromeda">Andromeda</a></code> table to an existing
<code><a href="#topic+Andromeda">Andromeda</a></code> table.
</p>
<p>If data from another <code><a href="#topic+Andromeda">Andromeda</a></code> is appended, a batch-wise copy process is used, which will be slower
than when appending data from within the same <code><a href="#topic+Andromeda">Andromeda</a></code> object.
</p>
<p><strong>Important</strong>: columns are appended based on column name, not on column order. The column names should
therefore be identical (but not necessarily in the same order).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>appendToTable(tbl, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="appendToTable_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table. This must be a base table (i.e. it cannot be a query result).</p>
</td></tr>
<tr><td><code id="appendToTable_+3A_data">data</code></td>
<td>
<p>The data to append. This can be either a data.frame or another Andromeda table.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns no value. Executed for the side-effect of appending the data to the table.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)
nrow(andr$cars)
# [1] 50

appendToTable(andr$cars, cars)
nrow(andr$cars)
# [1] 100

appendToTable(andr$cars, andr$cars %&gt;% filter(speed &gt; 10))
nrow(andr$cars)
# [1] 182

close(andr)

</code></pre>

<hr>
<h2 id='batchApply'>Apply a function to batches of data in an Andromeda table</h2><span id='topic+batchApply'></span>

<h3>Description</h3>

<p>Apply a function to batches of data in an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchApply(tbl, fun, ..., batchSize = 1e+05, progressBar = FALSE, safe = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchApply_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
<tr><td><code id="batchApply_+3A_fun">fun</code></td>
<td>
<p>A function where the first argument is a data frame.</p>
</td></tr>
<tr><td><code id="batchApply_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to fun.</p>
</td></tr>
<tr><td><code id="batchApply_+3A_batchsize">batchSize</code></td>
<td>
<p>Number of rows to fetch at a time.</p>
</td></tr>
<tr><td><code id="batchApply_+3A_progressbar">progressBar</code></td>
<td>
<p>Show a progress bar?</p>
</td></tr>
<tr><td><code id="batchApply_+3A_safe">safe</code></td>
<td>
<p>Create a copy of tbl first? Allows writing to the same Andromeda as being
read from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is similar to the <code><a href="base.html#topic+lapply">lapply()</a></code> function, in that it applies a function to sets of
data. In this case, the data is batches of data from an <code><a href="#topic+Andromeda">Andromeda</a></code> table. Each batch will be
presented to the function as a data frame.
</p>


<h3>Value</h3>

<p>Invisibly returns a list of objects, where each object is the output of the user-supplied function
applied to a batch
</p>


<h3>See Also</h3>

<p><code><a href="#topic+groupApply">groupApply()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

fun &lt;- function(x) {
  return(nrow(x))
}

result &lt;- batchApply(andr$cars, fun, batchSize = 25)

result
# [[1]] 
# [1] 25 
# 
# [[2]] 
# [1] 25

close(andr)

</code></pre>

<hr>
<h2 id='batchTest'>Apply a boolean test to batches of data in an Andromeda table and terminate early</h2><span id='topic+batchTest'></span>

<h3>Description</h3>

<p>Apply a boolean test to batches of data in an Andromeda table and terminate early
</p>


<h3>Usage</h3>

<pre><code class='language-R'>batchTest(tbl, fun, ..., batchSize = 1e+05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="batchTest_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
<tr><td><code id="batchTest_+3A_fun">fun</code></td>
<td>
<p>A function where the first argument is a data frame and returns a logical value.</p>
</td></tr>
<tr><td><code id="batchTest_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to <code>fun</code>.</p>
</td></tr>
<tr><td><code id="batchTest_+3A_batchsize">batchSize</code></td>
<td>
<p>Number of rows to fetch at a time.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function applies a boolean test function to sets of
data and terminates at the first <code>FALSE</code>.
</p>


<h3>Value</h3>

<p>Returns <code>FALSE</code> if any of the calls to the user-supplied function returned <code>FALSE</code>, else returns <code>TRUE</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

fun &lt;- function(x) {
  is.unsorted(x %&gt;% select(speed) %&gt;% collect())   
}

result &lt;- batchTest(andr$cars, fun, batchSize = 25)

result
# [1] FALSE 

close(andr)

</code></pre>

<hr>
<h2 id='copyAndromeda'>Copy Andromeda</h2><span id='topic+copyAndromeda'></span>

<h3>Description</h3>

<p>Creates a complete copy of an <code><a href="#topic+Andromeda">Andromeda</a></code> object. Object attributes are not copied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>copyAndromeda(andromeda)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="copyAndromeda_+3A_andromeda">andromeda</code></td>
<td>
<p>The <code><a href="#topic+Andromeda">Andromeda</a></code> object to copy.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The copied <code><a href="#topic+Andromeda">Andromeda</a></code> object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars, iris = iris)

andr2 &lt;- copyAndromeda(andr)

names(andr2)
# [1] 'cars' 'iris'

close(andr)
close(andr2)

</code></pre>

<hr>
<h2 id='createIndex'>Create an index on one or more columns in an Andromeda table</h2><span id='topic+createIndex'></span>

<h3>Description</h3>

<p>Create an index on one or more columns in an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>createIndex(tbl, columnNames, unique = FALSE, indexName = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="createIndex_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
<tr><td><code id="createIndex_+3A_columnnames">columnNames</code></td>
<td>
<p>A vector of column names (character) on which the index is to be created.</p>
</td></tr>
<tr><td><code id="createIndex_+3A_unique">unique</code></td>
<td>
<p>Should values in the column(s) be enforced to be unique?</p>
</td></tr>
<tr><td><code id="createIndex_+3A_indexname">indexName</code></td>
<td>
<p>The name of the index. If not provided, a random name will be generated.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Indices can speed up subsequent queries that use the indexed columns, but can take time to create,
and will take additional space on the drive.
</p>


<h3>Value</h3>

<p>Invisibly returns the input table.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+listIndices">listIndices()</a></code>, <code><a href="#topic+removeIndex">removeIndex()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

createIndex(andr$cars, "speed")

# Will be faster now that speed is indexed:
andr$cars %&gt;%
  filter(speed == 10) %&gt;%
  collect()

close(andr)

</code></pre>

<hr>
<h2 id='getAndromedaTempDiskSpace'>Get the available disk space in Andromeda temp</h2><span id='topic+getAndromedaTempDiskSpace'></span>

<h3>Description</h3>

<p>Attempts to determine how much disk space is still available in the Andromeda temp folder.
This function uses Java, so will only work if the <code>rJava</code> package is installed.
</p>
<p>By default the Andromeda temp folder is located in the system temp space, but the location
can be altered using <code>options(andromedaTempFolder = "c:/andromedaTemp")</code>, where
<code>"c:/andromedaTemp"</code> is the folder to create the Andromeda objects in.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAndromedaTempDiskSpace(andromeda = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getAndromedaTempDiskSpace_+3A_andromeda">andromeda</code></td>
<td>
<p>Optional: provide an <a href="#topic+Andromeda">Andromeda</a> object for which to get the available disk
space. Normally all <a href="#topic+Andromeda">Andromeda</a> objects use the same temp folder, but the user
could have altered it.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The number of bytes of available disk space in the Andromeda temp folder. Returns NA
if unable to determine the amount of available disk space, for example because <code>rJava</code>
is not installed, or because the user doesn't have the rights to query the available
disk space.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get the number of available gigabytes:
getAndromedaTempDiskSpace() / 1024^3
#123.456

</code></pre>

<hr>
<h2 id='groupApply'>Apply a function to groups of data in an Andromeda table</h2><span id='topic+groupApply'></span>

<h3>Description</h3>

<p>Apply a function to groups of data in an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>groupApply(
  tbl,
  groupVariable,
  fun,
  ...,
  batchSize = 1e+05,
  progressBar = FALSE,
  safe = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="groupApply_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
<tr><td><code id="groupApply_+3A_groupvariable">groupVariable</code></td>
<td>
<p>The variable to group by</p>
</td></tr>
<tr><td><code id="groupApply_+3A_fun">fun</code></td>
<td>
<p>A function where the first argument is a data frame.</p>
</td></tr>
<tr><td><code id="groupApply_+3A_...">...</code></td>
<td>
<p>Additional parameters passed to fun.</p>
</td></tr>
<tr><td><code id="groupApply_+3A_batchsize">batchSize</code></td>
<td>
<p>Number of rows fetched from the table at a time. This is not the number of
rows to which the function will be applied. Included mostly for testing
purposes.</p>
</td></tr>
<tr><td><code id="groupApply_+3A_progressbar">progressBar</code></td>
<td>
<p>Show a progress bar?</p>
</td></tr>
<tr><td><code id="groupApply_+3A_safe">safe</code></td>
<td>
<p>Create a copy of <code>tbl</code> first? Allows writing to the same Andromeda as being
read from.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function applies a function to groups of data. The groups are identified by unique values of
the <code>groupVariable</code>, which must be a variable in the table.
</p>


<h3>Value</h3>

<p>Invisibly returns a list of objects, where each object is the output of the user-supplied function
applied to a group.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+batchApply">batchApply()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

fun &lt;- function(x) {
  return(tibble::tibble(speed = x$speed[1], meanDist = mean(x$dist)))
}

result &lt;- groupApply(andr$cars, "speed", fun)
result &lt;- bind_rows(result)
result
# # A tibble: 19 x 2 
# speed meanDist 
# &lt;dbl&gt; &lt;dbl&gt; 
# 1 4 6 
# 2 7 13 
# 3 8 16 
# ...

close(andr)

</code></pre>

<hr>
<h2 id='isAndromeda'>Check whether an object is an Andromeda object</h2><span id='topic+isAndromeda'></span>

<h3>Description</h3>

<p>Check whether an object is an Andromeda object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isAndromeda(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isAndromeda_+3A_x">x</code></td>
<td>
<p>The object to check.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checks whether an object is an Andromeda object.
</p>


<h3>Value</h3>

<p>A logical value.
</p>

<hr>
<h2 id='isAndromedaTable'>Is the object an Andromeda table?</h2><span id='topic+isAndromedaTable'></span>

<h3>Description</h3>

<p>Is the object an Andromeda table?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isAndromedaTable(tbl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isAndromedaTable_+3A_tbl">tbl</code></td>
<td>
<p>A reference to an Andromeda table</p>
</td></tr>
</table>


<h3>Value</h3>

<p>TRUE or FALSE
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
andr &lt;- andromeda(cars = cars)
isAndromedaTable(andr$cars)
close(andr)

## End(Not run)
</code></pre>

<hr>
<h2 id='isValidAndromeda'>Check whether an Andromeda object is still valid</h2><span id='topic+isValidAndromeda'></span>

<h3>Description</h3>

<p>Check whether an Andromeda object is still valid
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isValidAndromeda(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="isValidAndromeda_+3A_x">x</code></td>
<td>
<p>The Andromeda object to check.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Checks whether an Andromeda object is still valid, or whether it has been closed.
</p>


<h3>Value</h3>

<p>A logical value.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars, iris = iris)

isValidAndromeda(andr)
# TRUE

close(andr)

isValidAndromeda(andr)
# FALSE

</code></pre>

<hr>
<h2 id='listIndices'>List all indices on an Andromeda table</h2><span id='topic+listIndices'></span>

<h3>Description</h3>

<p>List all indices on an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>listIndices(tbl)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="listIndices_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Lists any indices that may have been created using the  <code><a href="#topic+createIndex">createIndex()</a></code> function.
</p>


<h3>Value</h3>

<p>Returns a tibble listing the indices, indexed columns, and whether the index is unique.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex()</a></code>, <code><a href="#topic+removeIndex">removeIndex()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

createIndex(andr$cars, "speed")

listIndices(andr$cars)
# # A tibble: 1 x 5
# indexSequenceId indexName                unique columnSequenceId columnName
#           &lt;int&gt; &lt;chr&gt;                    &lt;lgl&gt;             &lt;int&gt; &lt;chr&gt;     
#1              0 idx_ocy8we9j2i7ld0rshgb4 FALSE                 0 speed           

close(andr)

</code></pre>

<hr>
<h2 id='loadAndromeda'>Load Andromeda from file</h2><span id='topic+loadAndromeda'></span>

<h3>Description</h3>

<p>Load Andromeda from file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>loadAndromeda(fileName)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="loadAndromeda_+3A_filename">fileName</code></td>
<td>
<p>The path where the object was saved using <code><a href="#topic+saveAndromeda">saveAndromeda()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> object.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+saveAndromeda">saveAndromeda()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># For this example we create an Andromeda object and save it to
# a temporary file locationL
fileName &lt;- tempfile()
andr &lt;- andromeda(cars = cars)
saveAndromeda(andr, fileName)

# Using loadAndromeda to load the object back:
andr &lt;- loadAndromeda(fileName)

# Don't forget to close Andromeda when you are done:
close(andr)

# Cleaning up the file used in this example:
unlink(fileName)

</code></pre>

<hr>
<h2 id='names.tbl_Andromeda'>Get the column names of an Andromeda table</h2><span id='topic+names.tbl_Andromeda'></span>

<h3>Description</h3>

<p>Get the column names of an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'tbl_Andromeda'
names(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="names.tbl_Andromeda_+3A_x">x</code></td>
<td>
<p>An table in an Andromeda object</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A character vector of column names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)
names(andr$cars)
# [1] "speed" "dist"
close(andr)
</code></pre>

<hr>
<h2 id='names+26lt+3B-+2CAndromeda-method'>Set table names in an Andromeda object</h2><span id='topic+names+3C-+2CAndromeda-method'></span>

<h3>Description</h3>

<p>names(andromedaObject) must be set to a character vector with length equal to the number of
tables in the andromeda object (i.e. length(andromedaObject)). The user is
responsible for setting valid table names (e.g. not using SQL keywords or numbers as names)
This function treats Andromeda table names as case insensitive so if the only difference
between the new names and old names is the case then the names will not be changed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S4 replacement method for signature 'Andromeda'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="names+2B26lt+2B3B-+2B2CAndromeda-method_+3A_x">x</code></td>
<td>
<p>An Andromeda object</p>
</td></tr>
<tr><td><code id="names+2B26lt+2B3B-+2B2CAndromeda-method_+3A_value">value</code></td>
<td>
<p>A character vector with the same length as the number of tables in x</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars, iris = iris)
names(andr) &lt;- c("CARS", "IRIS")
names(andr)
# [1] "CARS" "IRIS"
close(andr)

</code></pre>

<hr>
<h2 id='names+26lt+3B-.tbl_Andromeda'>Set column names of an Andromeda table</h2><span id='topic+names+3C-.tbl_Andromeda'></span>

<h3>Description</h3>

<p>Set column names of an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 replacement method for class 'tbl_Andromeda'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="names+2B26lt+2B3B-.tbl_Andromeda_+3A_x">x</code></td>
<td>
<p>A reference to a table in an andromeda object. (see examples)</p>
</td></tr>
<tr><td><code id="names+2B26lt+2B3B-.tbl_Andromeda_+3A_value">value</code></td>
<td>
<p>A character vector of new names that must have length equal to the number of columns in the table.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)
names(andr$cars) &lt;- toupper(names(andr$cars))
names(andr$cars)
# [1] "SPEED" "DIST" 
close(andr)
</code></pre>

<hr>
<h2 id='removeIndex'>Removes an index from an Andromeda table</h2><span id='topic+removeIndex'></span>

<h3>Description</h3>

<p>Removes an index from an Andromeda table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>removeIndex(tbl, columnNames = NULL, indexName = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="removeIndex_+3A_tbl">tbl</code></td>
<td>
<p>An <code><a href="#topic+Andromeda">Andromeda</a></code> table (or any other 'DBI' table).</p>
</td></tr>
<tr><td><code id="removeIndex_+3A_columnnames">columnNames</code></td>
<td>
<p>A vector of column names (character) on which the index was created. If not
provided, then the <code>indexName</code> argument must be provided.</p>
</td></tr>
<tr><td><code id="removeIndex_+3A_indexname">indexName</code></td>
<td>
<p>The name of the index. If not provided, the <code>columnNames</code> argument must be
provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Remove an index created using the <code><a href="#topic+createIndex">createIndex()</a></code> function. Either the index name or the column
names on which the index was created must be provided.
</p>


<h3>Value</h3>

<p>Invisibly returns the input table.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+createIndex">createIndex()</a></code>, <code><a href="#topic+listIndices">listIndices()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

createIndex(andr$cars, "speed")

# Will be faster now that speed is indexed:
andr$cars %&gt;%
  filter(speed == 10) %&gt;%
  collect()
  
removeIndex(andr$cars, "speed")

close(andr)

</code></pre>

<hr>
<h2 id='restoreDate'>Restore dates</h2><span id='topic+restoreDate'></span>

<h3>Description</h3>

<p>Restores dates that were converted by Andromeda to numeric values back to dates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restoreDate(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restoreDate_+3A_x">x</code></td>
<td>
<p>A numeric vector representing dates.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of type <code>Date</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+restorePosixct">restorePosixct()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>myData &lt;- data.frame(startDate = as.Date(c("2000-01-01", "2001-01-31", "2004-12-31")))
andr &lt;- andromeda(myData = myData)

andr$myData %&gt;% 
  collect() %&gt;%
  mutate(startDate = restoreDate(startDate))
# # A tibble: 3 x 1
# startDate 
# &lt;date&gt;    
# 1 2000-01-01
# 2 2001-01-31
# 3 2004-12-31

close(andr)

</code></pre>

<hr>
<h2 id='restorePosixct'>Restore timestamps</h2><span id='topic+restorePosixct'></span>

<h3>Description</h3>

<p>Restores datetimes that were converted by Andromeda to numeric values back to datetimes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>restorePosixct(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="restorePosixct_+3A_x">x</code></td>
<td>
<p>A numeric vector representing timestamps</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A vector of type <code>POSIXct</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+restoreDate">restoreDate()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>myData &lt;- data.frame(startTime = as.POSIXct(c("2000-01-01 10:00", 
                                              "2001-01-31 11:00", 
                                              "2004-12-31 12:00")))
andr &lt;- andromeda(myData = myData)

andr$myData %&gt;% 
  collect() %&gt;%
  mutate(startTime = restorePosixct(startTime))
# # A tibble: 3 x 1
# startTime          
# &lt;dttm&gt;             
# 1 2000-01-01 10:00:00
# 2 2001-01-31 11:00:00
# 3 2004-12-31 12:00:00

close(andr)

</code></pre>

<hr>
<h2 id='saveAndromeda'>Save Andromeda to file</h2><span id='topic+saveAndromeda'></span>

<h3>Description</h3>

<p>Saves the <code><a href="#topic+Andromeda">Andromeda</a></code> object in a zipped file. Note that by default the <code><a href="#topic+Andromeda">Andromeda</a></code> object is
automatically closed by saving it to disk. This is due to a limitation of the underlying technology
('RSQLite'). To keep the connection open, use <code>maintainConnection = TRUE</code>. This will first
create a temporary copy of the <code><a href="#topic+Andromeda">Andromeda</a></code> object. Note that this can be substantially slower.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>saveAndromeda(
  andromeda,
  fileName,
  maintainConnection = FALSE,
  overwrite = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="saveAndromeda_+3A_andromeda">andromeda</code></td>
<td>
<p>An object of class <code><a href="#topic+Andromeda">Andromeda</a></code>.</p>
</td></tr>
<tr><td><code id="saveAndromeda_+3A_filename">fileName</code></td>
<td>
<p>The path where the object will be written.</p>
</td></tr>
<tr><td><code id="saveAndromeda_+3A_maintainconnection">maintainConnection</code></td>
<td>
<p>Should the connection be maintained after saving? If <code>FALSE</code>, the
Andromeda object will be invalid after this operation, but saving will
be faster.</p>
</td></tr>
<tr><td><code id="saveAndromeda_+3A_overwrite">overwrite</code></td>
<td>
<p>If the file exists, should it be overwritten? If <code>FALSE</code> and the file
exists, an error will be thrown.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns no value. Executed for the side-effect of saving the object to disk.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+loadAndromeda">loadAndromeda</a></code>
</p>
<p><code><a href="#topic+loadAndromeda">loadAndromeda()</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>andr &lt;- andromeda(cars = cars)

# For this example we'll use a temporary file location:
fileName &lt;- tempfile()

saveAndromeda(andr, fileName)

# Cleaning up the file used in this example:
unlink(fileName)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
