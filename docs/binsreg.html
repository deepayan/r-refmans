<!DOCTYPE html><html lang="en"><head><title>Help for package binsreg</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {binsreg}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#binsreg-package'><p>Binsreg Package Document</p></a></li>
<li><a href='#binsglm'><p>Data-Driven Binscatter Generalized Linear Regression with Robust Inference Procedures and Plots</p></a></li>
<li><a href='#binspwc'><p>Data-Driven Pairwise Group Comparison using Binscatter Methods</p></a></li>
<li><a href='#binsqreg'><p>Data-Driven Binscatter Quantile Regression with Robust Inference Procedures and Plots</p></a></li>
<li><a href='#binsreg'><p>Data-Driven Binscatter Least Squares Regression with Robust Inference Procedures and Plots</p></a></li>
<li><a href='#binsregselect'><p>Data-Driven IMSE-Optimal Partitioning/Binning Selection for Binscatter</p></a></li>
<li><a href='#binstest'><p>Data-Driven Nonparametric Shape Restriction and Parametric Model Specification Testing using Binscatter</p></a></li>
<li><a href='#print.CCFFbinsglm'><p>Internal function.</p></a></li>
<li><a href='#print.CCFFbinspwc'><p>Internal function.</p></a></li>
<li><a href='#print.CCFFbinsqreg'><p>Internal function.</p></a></li>
<li><a href='#print.CCFFbinsreg'><p>Internal function.</p></a></li>
<li><a href='#print.CCFFbinsregselect'><p>Internal function.</p></a></li>
<li><a href='#print.CCFFbinstest'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinsglm'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinspwc'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinsqreg'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinsreg'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinsregselect'><p>Internal function.</p></a></li>
<li><a href='#summary.CCFFbinstest'><p>Internal function.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Binscatter Estimation and Inference</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-07-23</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1</td>
</tr>
<tr>
<td>Author:</td>
<td>Matias D. Cattaneo, Richard K. Crump, Max H. Farrell, Yingjie Feng</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Yingjie Feng &lt;fengyingjiepku@gmail.com&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides tools for statistical analysis using the binscatter methods developed by Cattaneo, Crump, Farrell and Feng (2024a) &lt;<a href="https://doi.org/10.48550%2FarXiv.1902.09608">doi:10.48550/arXiv.1902.09608</a>&gt;, Cattaneo, Crump, Farrell and Feng (2024b) <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf</a> and Cattaneo, Crump, Farrell and Feng (2024c) &lt;<a href="https://doi.org/10.48550%2FarXiv.1902.09615">doi:10.48550/arXiv.1902.09615</a>&gt;. Binscatter provides a flexible way of describing the relationship between two variables based on partitioning/binning of the independent variable of interest. binsreg(), binsqreg() and binsglm() implement binscatter least squares regression, quantile regression and generalized linear regression respectively, with particular focus on constructing binned scatter plots. They also implement robust (pointwise and uniform) inference of regression functions and derivatives thereof. binstest() implements hypothesis testing procedures for parametric functional forms of and nonparametric shape restrictions on the regression function. binspwc() implements hypothesis testing procedures for pairwise group comparison of binscatter estimators. binsregselect() implements data-driven procedures for selecting the number of bins for binscatter estimation. All the commands allow for covariate adjustment, smoothness restrictions and clustering.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Imports:</td>
<td>ggplot2, sandwich, quantreg, splines, matrixStats</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-23 12:48:23 UTC; yjfeng</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-23 14:30:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='binsreg-package'>Binsreg Package Document</h2><span id='topic+binsreg-package'></span>

<h3>Description</h3>

<p>Binscatter provides a flexible, yet parsimonious way of visualizing and summarizing large data sets
and has been a popular methodology in applied microeconomics and other social sciences. The binsreg package provides tools for
statistical analysis using the binscatter methods developed in
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
<code><a href="#topic+binsreg">binsreg</a></code> implements binscatter least squares regression with robust inference and plots, including
curve estimation, pointwise confidence intervals and uniform confidence band.
<code><a href="#topic+binsqreg">binsqreg</a></code> implements binscatter quantile regression with robust inference and plots, including
curve estimation, pointwise confidence intervals and uniform confidence band.
<code><a href="#topic+binsglm">binsglm</a></code> implements binscatter generalized linear regression with robust inference and plots, including
curve estimation, pointwise confidence intervals and uniform confidence band.
<code><a href="#topic+binstest">binstest</a></code> implements binscatter-based hypothesis testing procedures for parametric specifications
of and shape restrictions on the unknown function of interest.
<code><a href="#topic+binspwc">binspwc</a></code> implements hypothesis testing procedures for pairwise group comparison of binscatter estimators and plots confidence
bands for the difference in binscatter parameters between each pair of groups.
<code><a href="#topic+binsregselect">binsregselect</a></code> implements data-driven number of bins selectors for binscatter
implementation using either quantile-spaced or evenly-spaced binning/partitioning.
All the commands allow for covariate adjustment, smoothness restrictions, and clustering,
among other features.
</p>
<p>The companion software article,
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a>,
provides further implementation details and empirical illustration. For related Stata, R and Python packages
useful for nonparametric data analysis and statistical inference, visit
<a href="https://nppackages.github.io/">https://nppackages.github.io/</a>.
</p>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>

<hr>
<h2 id='binsglm'>Data-Driven Binscatter Generalized Linear Regression with Robust Inference Procedures and Plots</h2><span id='topic+binsglm'></span>

<h3>Description</h3>

<p><code>binsglm</code> implements binscatter generalized linear regression with robust inference procedures and plots, following the
results in <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
Binscatter provides a flexible way to describe the relationship between two variables, after
possibly adjusting for other covariates, based on partitioning/binning of the independent variable of interest.
The main purpose of this function is to generate binned scatter plots with curve estimation with robust pointwise confidence intervals and
uniform confidence band. If the binning scheme is not set by the user, the companion function
<code><a href="#topic+binsregselect">binsregselect</a></code> is used to implement binscatter in a data-driven way. Hypothesis testing about the function of interest can be conducted via the companion
function <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binsglm(y, x, w = NULL, data = NULL, at = NULL, family = gaussian(),
  deriv = 0, nolink = F, dots = NULL, dotsgrid = 0, dotsgridmean = T,
  line = NULL, linegrid = 20, ci = NULL, cigrid = 0, cigridmean = T,
  cb = NULL, cbgrid = 20, polyreg = NULL, polyreggrid = 20,
  polyregcigrid = 0, by = NULL, bycolors = NULL, bysymbols = NULL,
  bylpatterns = NULL, legendTitle = NULL, legendoff = F, nbins = NULL,
  binspos = "qs", binsmethod = "dpi", nbinsrot = NULL, pselect = NULL,
  sselect = NULL, samebinsby = F, randcut = NULL, nsims = 500,
  simsgrid = 20, simsseed = NULL, vce = "HC1", cluster = NULL,
  asyvar = F, level = 95, noplot = F, dfcheck = c(20, 30),
  masspoints = "on", weights = NULL, subset = NULL, plotxrange = NULL,
  plotyrange = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binsglm_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables in the model.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_at">at</code></td>
<td>
<p>value of <code>w</code> at which the estimated function is evaluated.  The default is <code>at="mean"</code>, which corresponds to
the mean of <code>w</code>. Other options are: <code>at="median"</code> for the median of <code>w</code>, <code>at="zero"</code> for a vector of zeros.
<code>at</code> can also be a vector of the same length as the number of columns of <code>w</code> (if <code>w</code> is a matrix) or a data frame containing the same variables as specified in <code>w</code> (when
<code>data</code> is specified). Note that when <code>at="mean"</code> or <code>at="median"</code>, all factor variables (if specified) are excluded from the evaluation (set as zero).</p>
</td></tr>
<tr><td><code id="binsglm_+3A_family">family</code></td>
<td>
<p>a description of the error distribution and link function to be used in the generalized linear model. (See <code><a href="stats.html#topic+family">family</a></code> for details of family functions.)</p>
</td></tr>
<tr><td><code id="binsglm_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself. If <code>nolink=FALSE</code>, <code>deriv</code> cannot be greater than 1.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_nolink">nolink</code></td>
<td>
<p>if true, the function within the inverse link function is reported instead of the conditional mean function for the outcome.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_dots">dots</code></td>
<td>
<p>a vector or a logical value. If <code>dots=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with
<code>s</code> smoothness constraints is used for point estimation and plotting as &quot;dots&quot;.
The default is <code>dots=c(0,0)</code>, which corresponds to piecewise constant (canonical binscatter).
If <code>dots=T</code>, the default <code>dots=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code> selection
is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>dots=F</code> is specified, the dots are not included in the plot.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_dotsgrid">dotsgrid</code></td>
<td>
<p>number of dots within each bin to be plotted. Given the choice, these dots are point estimates
evaluated over an evenly-spaced grid within each bin. The default is <code>dotsgrid=0</code>, and only
the point estimates at the mean of <code>x</code> within each bin are presented.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_dotsgridmean">dotsgridmean</code></td>
<td>
<p>If true, the dots corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. By default, they are presented, i.e., <code>dotsgridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_line">line</code></td>
<td>
<p>a vector or a logical value. If <code>line=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
is used for plotting as a &quot;line&quot;. If <code>line=T</code> is specified, <code>line=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>line=F</code> or <code>line=NULL</code> is specified, the line is not included in the plot.  The default is <code>line=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_linegrid">linegrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>line=c(p,s)</code> option. The default is <code>linegrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for fitting/plotting the line.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_ci">ci</code></td>
<td>
<p>a vector or a logical value. If <code>ci=c(p,s)</code> a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing confidence intervals. If <code>ci=T</code> is specified, <code>ci=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>ci=F</code> or <code>ci=NULL</code> is specified, the confidence intervals are not included in the plot.  The default is <code>ci=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_cigrid">cigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>ci=c(p,s)</code> option. The default is <code>cigrid=1</code>, which corresponds to 1
evenly-spaced evaluation point within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_cigridmean">cigridmean</code></td>
<td>
<p>If true, the confidence intervals corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. The default is <code>cigridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_cb">cb</code></td>
<td>
<p>a vector or a logical value. If <code>cb=c(p,s)</code>, a the piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing the confidence band. If the option <code>cb=T</code> is specified, <code>cb=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>cb=F</code> or <code>cb=NULL</code> is specified, the confidence band is not included in the plot. The default is <code>cb=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_cbgrid">cbgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>cb=c(p,s)</code> option. The default is <code>cbgrid=20</code>, which corresponds
to 20 evenly-spaced evaluation points within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_polyreg">polyreg</code></td>
<td>
<p>degree of a global polynomial regression model for plotting. By default, this fit is not included
in the plot unless explicitly specified. Recommended specification is <code>polyreg=3</code>, which
adds a cubic (global) polynomial fit of the regression function of interest to the binned scatter plot.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_polyreggrid">polyreggrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>polyreg=p</code> option. The default is <code>polyreggrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for confidence
interval construction.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_polyregcigrid">polyregcigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for constructing
confidence intervals based on polynomial regression set by the <code>polyreg=p</code> option.
The default is <code>polyregcigrid=0</code>, which corresponds to not plotting confidence
intervals for the global polynomial regression approximation.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_by">by</code></td>
<td>
<p>a vector containing the group indicator for subgroup analysis; both numeric and string variables
are supported. When <code>by</code> is specified, <code>binsreg</code> implements estimation and inference for each subgroup
separately, but produces a common binned scatter plot. By default, the binning structure is selected for each
subgroup separately, but see the option <code>samebinsby</code> below for imposing a common binning structure across subgroups.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_bycolors">bycolors</code></td>
<td>
<p>an ordered list of colors for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_bysymbols">bysymbols</code></td>
<td>
<p>an ordered list of symbols for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_bylpatterns">bylpatterns</code></td>
<td>
<p>an ordered list of line patterns for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_legendtitle">legendTitle</code></td>
<td>
<p>String, title of legend.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_legendoff">legendoff</code></td>
<td>
<p>If true, no legend is added.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_nbins">nbins</code></td>
<td>
<p>number of bins for partitioning/binning of <code>x</code>.  If <code>nbins=T</code> or <code>nbins=NULL</code> (default) is specified, the number
of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> in a data-driven, optimal way whenever possible.
If a vector with more than one number is specified, the number of bins is selected within this vector via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots. The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other options are <code>"es"</code> for evenly-spaced binning, or
a vector for manual specification of the positions of inner knots (which must be within the range of
<code>x</code>).</p>
</td></tr>
<tr><td><code id="binsglm_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
Piecewise polynomials of the selected optimal degree <code>p</code> are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials of degree <code>p+1</code> are used to construct confidence intervals
or confidence band if <code>ci=T</code> or <code>cb=T</code> is specified.
<em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>nbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
Piecewise polynomials with the selected optimal <code>s</code> smoothness constraints are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials with <code>s+1</code> constraints are used to construct
confidence intervals or confidence band if <code>ci=T</code> or <code>cb=T</code> is
specified.  If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the piecewise polynomial
with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_samebinsby">samebinsby</code></td>
<td>
<p>if true, a common partitioning/binning structure across all subgroups specified by the option <code>by</code> is forced.
The knots positions are selected according to the option <code>binspos</code> and using the full sample. If <code>nbins</code>
is not specified, then the number of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> and
using the full sample.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1.  By default, <code>max(5000, 0.01n)</code> observations
are used if the samples size <code>n&gt;5000</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_nsims">nsims</code></td>
<td>
<p>number of random draws for constructing confidence bands. The default is
<code>nsims=500</code>, which corresponds to 500 draws from a standard Gaussian random vector of size
<code>[(p+1)*J - (J-1)*s]</code>. Setting at least <code>nsims=2000</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum operation needed to construct confidence bands. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum operator.
Setting at least <code>simsgrid=50</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_simsseed">simsseed</code></td>
<td>
<p>seed for simulation.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_vce">vce</code></td>
<td>
<p>Procedure to compute the variance-covariance matrix estimator. Options are
</p>

<ul>
<li> <p><code>"const"</code> homoskedastic variance estimator.
</p>
</li>
<li> <p><code>"HC0"</code> heteroskedasticity-robust plug-in residuals variance estimator
without weights.
</p>
</li>
<li> <p><code>"HC1"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc1 weights. Default.
</p>
</li>
<li> <p><code>"HC2"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc2 weights.
</p>
</li>
<li> <p><code>"HC3"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc3 weights.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsglm_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_asyvar">asyvar</code></td>
<td>
<p>if true, the standard error of the nonparametric component is computed and the uncertainty related to control
variables is omitted. Default is <code>asyvar=FALSE</code>, that is, the uncertainty related to control variables is taken into account.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_level">level</code></td>
<td>
<p>nominal confidence level for confidence interval and confidence band estimation. Default is <code>level=95</code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_noplot">noplot</code></td>
<td>
<p>if true, no plot produced.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different stat models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsglm_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_subset">subset</code></td>
<td>
<p>optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_plotxrange">plotxrange</code></td>
<td>
<p>a vector. <code>plotxrange=c(min, max)</code> specifies a range of the x-axis for binscatter plot. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_plotyrange">plotyrange</code></td>
<td>
<p>a vector. <code>plotyrange=c(min, max)</code> specifies a range of the y-axis for binscatter plot. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binsglm_+3A_...">...</code></td>
<td>
<p>optional arguments used by <code><a href="stats.html#topic+glm">glm</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>bins_plot</code></td>
<td>
<p>A <code>ggplot</code> object for binscatter plot.</p>
</td></tr>
<tr><td><code>data.plot</code></td>
<td>
<p>A list containing data for plotting. Each item is a sublist of data frames for each group. Each sublist may contain the following data frames:
</p>

<ul>
<li> <p><code>data.dots</code> Data for dots. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.line</code> Data for line. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.ci</code> Data for CI. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>ci.l</code> and <code>ci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.cb</code> Data for CB. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>cb.l</code> and <code>cb.r</code>, left and right boundaries of the confidence band.
</p>
</li>
<li> <p><code>data.poly</code> Data for polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and
<code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.polyci</code> Data for confidence intervals based on polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>polyci.l</code> and <code>polyci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.bin</code> Data for the binning structure. It contains: <code>bin.id</code>, ID for each bin;
<code>left.endpoint</code> and <code>right.endpoint</code>, left and right endpoints of each bin.</p>
</li></ul>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>cval.by</code></td>
<td>
<p>A vector of critical values for constructing confidence band for each group.</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as <code>N.by</code> (total sample size for each group),
<code>Ndist.by</code> (number of distinct values in <code>x</code> for each group), <code>Nclust.by</code> (number of clusters for each group),
and <code>nbins.by</code> (number of bins for each group), and <code>byvals</code> (number of distinct values in <code>by</code>).
The degree and smoothness of polynomials for dots, line, confidence intervals and confidence band for each group are saved
in <code>dots</code>, <code>line</code>, <code>ci</code>, and <code>cb</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsregselect">binsregselect</a></code>, <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); d &lt;- 1*(runif(500)&lt;=x)
 ## Binned scatterplot
 binsglm(d, x, family=binomial())
</code></pre>

<hr>
<h2 id='binspwc'>Data-Driven Pairwise Group Comparison using Binscatter Methods</h2><span id='topic+binspwc'></span>

<h3>Description</h3>

<p><code>binspwc</code> implements hypothesis testing procedures for pairwise group comparison of binscatter estimators
and plots confidence bands for the difference in binscatter parameters between each pair of groups, following the
results in <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
If the binning scheme is not set by the user, the companion function
<code><a href="#topic+binsregselect">binsregselect</a></code> is used to implement binscatter in a data-driven way. Binned scatter plots based on different methods
can be constructed using the companion functions <code><a href="#topic+binsreg">binsreg</a></code>, <code><a href="#topic+binsqreg">binsqreg</a></code> or <code><a href="#topic+binsglm">binsglm</a></code>.
Hypothesis testing for parametric functional forms of and shape restrictions on the regression function of interest can
be conducted via the companion function <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binspwc(y, x, w = NULL, data = NULL, estmethod = "reg",
  family = gaussian(), quantile = NULL, deriv = 0, at = NULL,
  nolink = F, by = NULL, pwc = NULL, testtype = "two-sided",
  lp = Inf, bins = NULL, bynbins = NULL, binspos = "qs",
  pselect = NULL, sselect = NULL, binsmethod = "dpi", nbinsrot = NULL,
  samebinsby = FALSE, randcut = NULL, nsims = 500, simsgrid = 20,
  simsseed = NULL, vce = NULL, cluster = NULL, asyvar = F,
  dfcheck = c(20, 30), masspoints = "on", weights = NULL,
  subset = NULL, numdist = NULL, numclust = NULL, estmethodopt = NULL,
  plot = FALSE, dotsngrid = 0, plotxrange = NULL, plotyrange = NULL,
  colors = NULL, symbols = NULL, level = 95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binspwc_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables used in the model.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_estmethod">estmethod</code></td>
<td>
<p>estimation method. The default is <code>estmethod="reg"</code> for tests based on binscatter least squares regression. Other options are <code>"qreg"</code> for quantile regression and <code>"glm"</code> for generalized linear regression. If <code>estmethod="glm"</code>, the option <code>family</code> must be specified.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_family">family</code></td>
<td>
<p>a description of the error distribution and link function to be used in the generalized linear model when <code>estmethod="glm"</code>. (See <code><a href="stats.html#topic+family">family</a></code> for details of family functions.)</p>
</td></tr>
<tr><td><code id="binspwc_+3A_quantile">quantile</code></td>
<td>
<p>the quantile to be estimated. A number strictly between 0 and 1.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_at">at</code></td>
<td>
<p>value of <code>w</code> at which the estimated function is evaluated.  The default is <code>at="mean"</code>, which corresponds to
the mean of <code>w</code>. Other options are: <code>at="median"</code> for the median of <code>w</code>, <code>at="zero"</code> for a vector of zeros.
<code>at</code> can also be a vector of the same length as the number of columns of <code>w</code> (if <code>w</code> is a matrix) or a data frame containing the same variables as specified in <code>w</code> (when
<code>data</code> is specified). Note that when <code>at="mean"</code> or <code>at="median"</code>, all factor variables (if specified) are excluded from the evaluation (set as zero).</p>
</td></tr>
<tr><td><code id="binspwc_+3A_nolink">nolink</code></td>
<td>
<p>if true, the function within the inverse link function is reported instead of the conditional mean function for the outcome.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_by">by</code></td>
<td>
<p>a vector containing the group indicator for subgroup analysis; both numeric and string variables
are supported. When <code>by</code> is specified, <code>binsreg</code> implements estimation and inference for each subgroup
separately, but produces a common binned scatter plot. By default, the binning structure is selected for each
subgroup separately, but see the option <code>samebinsby</code> below for imposing a common binning structure across subgroups.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_pwc">pwc</code></td>
<td>
<p>a vector or a logical value. If <code>pwc=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with <code>s</code>
smoothness constraints is used for testing the difference between groups.
If <code>pwc=T</code> or <code>pwc=NULL</code> (default) is specified, <code>pwc=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code> selection
is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).</p>
</td></tr>
<tr><td><code id="binspwc_+3A_testtype">testtype</code></td>
<td>
<p>type of pairwise comparison test. The default is <code>testtype="two-sided"</code>, which corresponds to a two-sided test of the form <code>H0: mu_1(x)=mu_2(x)</code>.
Other options are: <code>testtype="left"</code> for the one-sided test form <code>H0: mu_1(x)&lt;=mu_2(x)</code> and <code>testtype="right"</code> for the one-sided test of the form <code>H0: mu_1(x)&gt;=mu_2(x)</code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_lp">lp</code></td>
<td>
<p>an Lp metric used for pairwise comparison tests. The default is <code>lp=Inf</code>, which
corresponds to the sup-norm of the t-statistic. Other options are <code>lp=q</code> for a positive number <code>q&gt;=1</code>.
Note that <code>lp=Inf</code> (&quot;sup-norm&quot;) has to be used for one-sided tests (<code>testtype="left"</code> or <code>testtype="right"</code>).</p>
</td></tr>
<tr><td><code id="binspwc_+3A_bins">bins</code></td>
<td>
<p>A vector. If <code>bins=c(p,s)</code>, it sets the piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
for data-driven (IMSE-optimal) selection of the partitioning/binning scheme. The default is <code>bins=c(0,0)</code>, which corresponds to the piecewise constant.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_bynbins">bynbins</code></td>
<td>
<p>a vector of the number of bins for partitioning/binning of <code>x</code>, which is applied to the binscatter estimation for each group.
If a single number is specified, it is applied to the estimation for all groups.
If <code>bynbins=T</code> or <code>bynbins=NULL</code> (default), the number of bins is selected via the companion function <code><a href="#topic+binsregselect">binsregselect</a></code>
in a data-driven way whenever possible.
<em>Note:</em> If a vector with more than one number is supplied, it is understood as the number of bins applied to binscatter estimation
for each subgroup rather than the range for selecting the number of bins.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots. The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other options are <code>"es"</code> for evenly-spaced binning, or
a vector for manual specification of the positions of inner knots (which must be within the range of <code>x</code>).</p>
</td></tr>
<tr><td><code id="binspwc_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
If the selected optimal degree is <code>p</code>, then piecewise polynomials of degree <code>p+1</code> are used to
conduct pairwise group comparison. <em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>bynbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
If the selected optimal smoothness is <code>s</code>, then piecewise polynomials with <code>s+1</code> smoothness constraints
are used to conduct pairwise group comparison.
If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the
piecewise polynomial with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_samebinsby">samebinsby</code></td>
<td>
<p>if true, a common partitioning/binning structure across all subgroups specified by the option <code>by</code> is forced.
The knots positions are selected according to the option <code>binspos</code> and using the full sample. If <code>nbins</code>
is not specified, then the number of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> and
using the full sample.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1. By default, <code>max(5000, 0.01n)</code> observations
are used if the samples size <code>n&gt;5000</code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_nsims">nsims</code></td>
<td>
<p>number of random draws for hypothesis testing. The default is
<code>nsims=500</code>, which corresponds to 500 draws from a standard Gaussian random vector of size
<code>[(p+1)*J - (J-1)*s]</code>. Setting at least <code>nsims=2000</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum (infimum or Lp metric) operation needed to construct hypothesis testing
procedures. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum (infimum or Lp metric) operator.
Setting at least <code>simsgrid=50</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_simsseed">simsseed</code></td>
<td>
<p>seed for simulation.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_vce">vce</code></td>
<td>
<p>procedure to compute the variance-covariance matrix estimator. For least squares regression and generalized linear regression, the allowed options are the same as that for <code><a href="#topic+binsreg">binsreg</a></code> or <code><a href="#topic+binsqreg">binsqreg</a></code>.
For quantile regression, the allowed options are the same as that for <code><a href="#topic+binsqreg">binsqreg</a></code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_asyvar">asyvar</code></td>
<td>
<p>if true, the standard error of the nonparametric component is computed and the uncertainty related to control
variables is omitted. Default is <code>asyvar=FALSE</code>, that is, the uncertainty related to control variables is taken into account.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different stat models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binspwc_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_subset">subset</code></td>
<td>
<p>optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_numdist">numdist</code></td>
<td>
<p>number of distinct values for selection. Used to speed up computation.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_numclust">numclust</code></td>
<td>
<p>number of clusters for selection. Used to speed up computation.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_estmethodopt">estmethodopt</code></td>
<td>
<p>a list of optional arguments used by <code><a href="quantreg.html#topic+rq">rq</a></code> (for quantile regression) or <code><a href="stats.html#topic+glm">glm</a></code> (for fitting generalized linear models).</p>
</td></tr>
<tr><td><code id="binspwc_+3A_plot">plot</code></td>
<td>
<p>if true, the confidence bands for all pairwise group comparisons (the difference between each pair of groups) are plotted.
The degree and smoothness of polynomials used to construct the bands are the same as those specified for testing. The default is <code>plot=F</code>, i.e.,
no plot is generated.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_dotsngrid">dotsngrid</code></td>
<td>
<p>number of dots to be added to the plot for confidence bands. Given the choice, these dots are point estimates of the difference between groups
evaluated over an evenly-spaced grid within the common support of all groups. The default is <code>dotsngrid=0</code>, i.e., no point estimates
are added. Whenever possible, the degree and smoothness of the polynomial for these point estimates are the same as those for selecting the number of bins;
otherwise, the degree and smoothness specified for testing are used.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_plotxrange">plotxrange</code></td>
<td>
<p>a vector. <code>plotxrange=c(min, max)</code> specifies a range of the x-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_plotyrange">plotyrange</code></td>
<td>
<p>a vector. <code>plotyrange=c(min, max)</code> specifies a range of the y-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_colors">colors</code></td>
<td>
<p>an ordered list of colors for plotting the difference between each pair of groups.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_symbols">symbols</code></td>
<td>
<p>an ordered list of symbols for plotting the difference between each pair of groups.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_level">level</code></td>
<td>
<p>nominal confidence level for confidence band estimation. Default is <code>level=95</code>.</p>
</td></tr>
<tr><td><code id="binspwc_+3A_...">...</code></td>
<td>
<p>optional arguments to control bootstrapping if <code>estmethod="qreg"</code> and <code>vce="boot"</code>. See <code><a href="quantreg.html#topic+boot.rq">boot.rq</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>stat</code></td>
<td>
<p>A matrix. Each row corresponds to the comparison between two groups. The first column is the test statistic. The second and third columns give the corresponding group numbers.
The null hypothesis is <code>mu_i(x)&lt;=mu_j(x)</code>, <code>mu_i(x)=mu_j(x)</code>, or <code>mu_i(x)&gt;=mu_j(x)</code> for group i (given in the second column) and group j (given in the third column).
The group number corresponds to the list of group names given by <code>opt$byvals</code>.</p>
</td></tr>
<tr><td><code>pval</code></td>
<td>
<p>A vector of p-values for all pairwise group comparisons.</p>
</td></tr>
<tr><td><code>bins_plot</code></td>
<td>
<p>A <code>ggplot</code> object for confidence bands plot.</p>
</td></tr>
<tr><td><code>data.plot</code></td>
<td>
<p>A list containing data for plotting. Each item is a sublist of data frames for comparison between each pair of groups. Each sublist may contain the following data frames:
</p>

<ul>
<li> <p><code>data.dots</code> Data for dots. It contains: <code>pair</code>, the name for the pair of groups; <code>x</code>, evaluation points; <code>diff.fit</code>, point estimates of the group difference;
</p>
</li>
<li> <p><code>data.cb</code> Data for confidence bands. It contains: <code>pair</code>, the name for the pair of groups; <code>x</code>, evaluation points; <code>cb.fit</code>, point estimates of the group difference;
<code>cb.se</code>, standard errors; <code>cb.l</code> and <code>cb.r</code>, left and right boundaries of the confidence band.
</p>
</li></ul>

</td></tr>
<tr><td><code>cval.cb</code></td>
<td>
<p>A vector of critical values for all pairwise group comparisons.</p>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE expansion, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE expansion, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE expansion, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE expansion, DPI selection.</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as <code>N.by</code> (total sample size for each group),
<code>Ndist.by</code> (number of distinct values in <code>x</code> for each group), <code>Nclust.by</code> (number of clusters for each group),
and <code>nbins.by</code> (number of bins for each group), and <code>byvals</code> (number of distinct values in <code>by</code>).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsreg">binsreg</a></code>, <code><a href="#topic+binsqreg">binsqreg</a></code>, <code><a href="#topic+binsglm">binsglm</a></code>, <code><a href="#topic+binsregselect">binsregselect</a></code>, <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); y &lt;- sin(x)+rnorm(500); t &lt;- 1*(runif(500)&gt;0.5)
 ## Binned scatterplot
 binspwc(y,x, by=t)
</code></pre>

<hr>
<h2 id='binsqreg'>Data-Driven Binscatter Quantile Regression with Robust Inference Procedures and Plots</h2><span id='topic+binsqreg'></span>

<h3>Description</h3>

<p><code>binsqreg</code> implements binscatter quantile regression with robust inference procedures and plots, following the
results in <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
Binscatter provides a flexible way to describe the quantile relationship between two variables, after
possibly adjusting for other covariates, based on partitioning/binning of the independent variable of interest.
The main purpose of this function is to generate binned scatter plots with curve estimation with robust pointwise confidence intervals and
uniform confidence band.  If the binning scheme is not set by the user, the companion function
<code><a href="#topic+binsregselect">binsregselect</a></code> is used to implement binscatter in a data-driven way. Hypothesis testing about the function of interest
can be conducted via the companion function <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binsqreg(y, x, w = NULL, data = NULL, at = NULL, quantile = 0.5,
  deriv = 0, dots = NULL, dotsgrid = 0, dotsgridmean = T,
  line = NULL, linegrid = 20, ci = NULL, cigrid = 0, cigridmean = T,
  cb = NULL, cbgrid = 20, polyreg = NULL, polyreggrid = 20,
  polyregcigrid = 0, by = NULL, bycolors = NULL, bysymbols = NULL,
  bylpatterns = NULL, legendTitle = NULL, legendoff = F, nbins = NULL,
  binspos = "qs", binsmethod = "dpi", nbinsrot = NULL, pselect = NULL,
  sselect = NULL, samebinsby = F, randcut = NULL, nsims = 500,
  simsgrid = 20, simsseed = NULL, vce = "nid", cluster = NULL,
  asyvar = F, level = 95, noplot = F, dfcheck = c(20, 30),
  masspoints = "on", weights = NULL, subset = NULL, plotxrange = NULL,
  plotyrange = NULL, qregopt = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binsqreg_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables in the model.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_at">at</code></td>
<td>
<p>value of <code>w</code> at which the estimated function is evaluated.  The default is <code>at="mean"</code>, which corresponds to
the mean of <code>w</code>. Other options are: <code>at="median"</code> for the median of <code>w</code>, <code>at="zero"</code> for a vector of zeros.
<code>at</code> can also be a vector of the same length as the number of columns of <code>w</code> (if <code>w</code> is a matrix) or a data frame containing the same variables as specified in <code>w</code> (when
<code>data</code> is specified). Note that when <code>at="mean"</code> or <code>at="median"</code>, all factor variables (if specified) are excluded from the evaluation (set as zero).</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_quantile">quantile</code></td>
<td>
<p>the quantile to be estimated. A number strictly between 0 and 1.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_dots">dots</code></td>
<td>
<p>a vector or a logical value. If <code>dots=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with
<code>s</code> smoothness constraints is used for point estimation and plotting as &quot;dots&quot;.
The default is <code>dots=c(0,0)</code>, which corresponds to piecewise constant (canonical binscatter).
If <code>dots=T</code>, the default <code>dots=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code> selection
is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>dots=F</code> is specified, the dots are not included in the plot.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_dotsgrid">dotsgrid</code></td>
<td>
<p>number of dots within each bin to be plotted. Given the choice, these dots are point estimates
evaluated over an evenly-spaced grid within each bin. The default is <code>dotsgrid=0</code>, and only
the point estimates at the mean of <code>x</code> within each bin are presented.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_dotsgridmean">dotsgridmean</code></td>
<td>
<p>If true, the dots corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. By default, they are presented, i.e., <code>dotsgridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_line">line</code></td>
<td>
<p>a vector or a logical value. If <code>line=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
is used for plotting as a &quot;line&quot;. If <code>line=T</code> is specified, <code>line=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>line=F</code> or <code>line=NULL</code> is specified, the line is not included in the plot.  The default is <code>line=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_linegrid">linegrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>line=c(p,s)</code> option. The default is <code>linegrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for fitting/plotting the line.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_ci">ci</code></td>
<td>
<p>a vector or a logical value. If <code>ci=c(p,s)</code> a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing confidence intervals. If <code>ci=T</code> is specified, <code>ci=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>ci=F</code> or <code>ci=NULL</code> is specified, the confidence intervals are not included in the plot.  The default is <code>ci=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_cigrid">cigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>ci=c(p,s)</code> option. The default is <code>cigrid=1</code>, which corresponds to 1
evenly-spaced evaluation point within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_cigridmean">cigridmean</code></td>
<td>
<p>If true, the confidence intervals corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. The default is <code>cigridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_cb">cb</code></td>
<td>
<p>a vector or a logical value. If <code>cb=c(p,s)</code>, a the piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing the confidence band. If the option <code>cb=T</code> is specified, <code>cb=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>cb=F</code> or <code>cb=NULL</code> is specified, the confidence band is not included in the plot. The default is <code>cb=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_cbgrid">cbgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>cb=c(p,s)</code> option. The default is <code>cbgrid=20</code>, which corresponds
to 20 evenly-spaced evaluation points within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_polyreg">polyreg</code></td>
<td>
<p>degree of a global polynomial regression model for plotting. By default, this fit is not included
in the plot unless explicitly specified. Recommended specification is <code>polyreg=3</code>, which
adds a cubic (global) polynomial fit of the regression function of interest to the binned scatter plot.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_polyreggrid">polyreggrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>polyreg=p</code> option. The default is <code>polyreggrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for confidence
interval construction.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_polyregcigrid">polyregcigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for constructing
confidence intervals based on polynomial regression set by the <code>polyreg=p</code> option.
The default is <code>polyregcigrid=0</code>, which corresponds to not plotting confidence
intervals for the global polynomial regression approximation.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_by">by</code></td>
<td>
<p>a vector containing the group indicator for subgroup analysis; both numeric and string variables
are supported. When <code>by</code> is specified, <code>binsreg</code> implements estimation and inference for each subgroup
separately, but produces a common binned scatter plot. By default, the binning structure is selected for each
subgroup separately, but see the option <code>samebinsby</code> below for imposing a common binning structure across subgroups.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_bycolors">bycolors</code></td>
<td>
<p>an ordered list of colors for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_bysymbols">bysymbols</code></td>
<td>
<p>an ordered list of symbols for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_bylpatterns">bylpatterns</code></td>
<td>
<p>an ordered list of line patterns for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_legendtitle">legendTitle</code></td>
<td>
<p>String, title of legend.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_legendoff">legendoff</code></td>
<td>
<p>If true, no legend is added.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_nbins">nbins</code></td>
<td>
<p>number of bins for partitioning/binning of <code>x</code>.  If <code>nbins=T</code> or <code>nbins=NULL</code> (default) is specified, the number
of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> in a data-driven, optimal way whenever possible.
If a vector with more than one number is specified, the number of bins is selected within this vector via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots. The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other options are <code>"es"</code> for evenly-spaced binning, or
a vector for manual specification of the positions of inner knots (which must be within the range of
<code>x</code>).</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
Piecewise polynomials of the selected optimal degree <code>p</code> are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials of degree <code>p+1</code> are used to construct confidence intervals
or confidence band if <code>ci=T</code> or <code>cb=T</code> is specified.
<em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>nbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
Piecewise polynomials with the selected optimal <code>s</code> smoothness constraints are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials with <code>s+1</code> constraints are used to construct
confidence intervals or confidence band if <code>ci=T</code> or <code>cb=T</code> is
specified.  If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the piecewise polynomial
with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_samebinsby">samebinsby</code></td>
<td>
<p>if true, a common partitioning/binning structure across all subgroups specified by the option <code>by</code> is forced.
The knots positions are selected according to the option <code>binspos</code> and using the full sample. If <code>nbins</code>
is not specified, then the number of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> and
using the full sample.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1.  By default, <code>max(5000, 0.01n)</code> observations
are used if the samples size <code>n&gt;5000</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_nsims">nsims</code></td>
<td>
<p>number of random draws for constructing confidence bands. The default is
<code>nsims=500</code>, which corresponds to 500 draws from a standard Gaussian random vector of size
<code>[(p+1)*J - (J-1)*s]</code>. Setting at least <code>nsims=2000</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum operation needed to construct confidence bands. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum operator.
Setting at least <code>simsgrid=50</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_simsseed">simsseed</code></td>
<td>
<p>seed for simulation.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_vce">vce</code></td>
<td>
<p>Procedure to compute the variance-covariance matrix estimator (see <code><a href="quantreg.html#topic+summary.rq">summary.rq</a></code> for more details). Options are
</p>

<ul>
<li> <p><code>"iid"</code> which presumes that the errors are iid and computes an estimate of the asymptotic covariance matrix as in KB(1978).
</p>
</li>
<li> <p><code>"nid"</code> which presumes local (in quantile) linearity of the the conditional quantile functions and computes a Huber sandwich estimate using a local estimate of the sparsity.
</p>
</li>
<li> <p><code>"ker"</code> which uses a kernel estimate of the sandwich as proposed by Powell (1991).
</p>
</li>
<li> <p><code>"boot"</code> which implements one of several possible bootstrapping alternatives for estimating standard errors including a variate of the wild bootstrap for clustered response. See <code><a href="quantreg.html#topic+boot.rq">boot.rq</a></code> for further details.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsqreg_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_asyvar">asyvar</code></td>
<td>
<p>if true, the standard error of the nonparametric component is computed and the uncertainty related to control
variables is omitted. Default is <code>asyvar=FALSE</code>, that is, the uncertainty related to control variables is taken into account.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_level">level</code></td>
<td>
<p>nominal confidence level for confidence interval and confidence band estimation. Default is <code>level=95</code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_noplot">noplot</code></td>
<td>
<p>if true, no plot produced.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different statistical models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsqreg_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_subset">subset</code></td>
<td>
<p>optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_plotxrange">plotxrange</code></td>
<td>
<p>a vector. <code>plotxrange=c(min, max)</code> specifies a range of the x-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_plotyrange">plotyrange</code></td>
<td>
<p>a vector. <code>plotyrange=c(min, max)</code> specifies a range of the y-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_qregopt">qregopt</code></td>
<td>
<p>a list of optional arguments used by <code><a href="quantreg.html#topic+rq">rq</a></code>.</p>
</td></tr>
<tr><td><code id="binsqreg_+3A_...">...</code></td>
<td>
<p>optional arguments to control bootstrapping. See <code><a href="quantreg.html#topic+boot.rq">boot.rq</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>bins_plot</code></td>
<td>
<p>A <code>ggplot</code> object for binscatter plot.</p>
</td></tr>
<tr><td><code>data.plot</code></td>
<td>
<p>A list containing data for plotting. Each item is a sublist of data frames for each group. Each sublist may contain the following data frames:
</p>

<ul>
<li> <p><code>data.dots</code> Data for dots. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.line</code> Data for line. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.ci</code> Data for CI. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>ci.l</code> and <code>ci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.cb</code> Data for CB. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>cb.l</code> and <code>cb.r</code>, left and right boundaries of the confidence band.
</p>
</li>
<li> <p><code>data.poly</code> Data for polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and
<code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.polyci</code> Data for confidence intervals based on polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>polyci.l</code> and <code>polyci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.bin</code> Data for the binning structure. It contains: <code>bin.id</code>, ID for each bin;
<code>left.endpoint</code> and <code>right.endpoint</code>, left and right endpoints of each bin.</p>
</li></ul>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>cval.by</code></td>
<td>
<p>A vector of critical values for constructing confidence band for each group.</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as <code>N.by</code> (total sample size for each group),
<code>Ndist.by</code> (number of distinct values in <code>x</code> for each group), <code>Nclust.by</code> (number of clusters for each group),
and <code>nbins.by</code> (number of bins for each group), and <code>byvals</code> (number of distinct values in <code>by</code>).
The degree and smoothness of polynomials for dots, line, confidence intervals and confidence band for each group are saved
in <code>dots</code>, <code>line</code>, <code>ci</code>, and <code>cb</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsregselect">binsregselect</a></code>, <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); y &lt;- sin(x)+rnorm(500)
 ## Binned scatterplot
 binsqreg(y,x)
</code></pre>

<hr>
<h2 id='binsreg'>Data-Driven Binscatter Least Squares Regression with Robust Inference Procedures and Plots</h2><span id='topic+binsreg'></span>

<h3>Description</h3>

<p><code>binsreg</code> implements binscatter least squares regression with robust inference procedures and plots, following the
results in <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
Binscatter provides a flexible way to describe the mean relationship between two variables, after
possibly adjusting for other covariates, based on partitioning/binning of the independent variable of interest.
The main purpose of this function is to generate binned scatter plots with curve estimation with robust pointwise confidence intervals and
uniform confidence band.  If the binning scheme is not set by the user, the companion function
<code><a href="#topic+binsregselect">binsregselect</a></code> is used to implement binscatter in a data-driven (optimal)
way. Hypothesis testing about the regression function can be conducted via the companion
function <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binsreg(y, x, w = NULL, data = NULL, at = NULL, deriv = 0,
  dots = NULL, dotsgrid = 0, dotsgridmean = T, line = NULL,
  linegrid = 20, ci = NULL, cigrid = 0, cigridmean = T, cb = NULL,
  cbgrid = 20, polyreg = NULL, polyreggrid = 20, polyregcigrid = 0,
  by = NULL, bycolors = NULL, bysymbols = NULL, bylpatterns = NULL,
  legendTitle = NULL, legendoff = F, nbins = NULL, binspos = "qs",
  binsmethod = "dpi", nbinsrot = NULL, pselect = NULL, sselect = NULL,
  samebinsby = F, randcut = NULL, nsims = 500, simsgrid = 20,
  simsseed = NULL, vce = "HC1", cluster = NULL, asyvar = F,
  level = 95, noplot = F, dfcheck = c(20, 30), masspoints = "on",
  weights = NULL, subset = NULL, plotxrange = NULL, plotyrange = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binsreg_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables used in the model.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_at">at</code></td>
<td>
<p>value of <code>w</code> at which the estimated function is evaluated.  The default is <code>at="mean"</code>, which corresponds to
the mean of <code>w</code>. Other options are: <code>at="median"</code> for the median of <code>w</code>, <code>at="zero"</code> for a vector of zeros.
<code>at</code> can also be a vector of the same length as the number of columns of <code>w</code> (if <code>w</code> is a matrix) or a data frame containing the same variables as specified in <code>w</code> (when
<code>data</code> is specified). Note that when <code>at="mean"</code> or <code>at="median"</code>, all factor variables (if specified) are excluded from the evaluation (set as zero).</p>
</td></tr>
<tr><td><code id="binsreg_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_dots">dots</code></td>
<td>
<p>a vector or a logical value. If <code>dots=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with
<code>s</code> smoothness constraints is used for point estimation and plotting as &quot;dots&quot;.
The default is <code>dots=c(0,0)</code>, which corresponds to piecewise constant (canonical binscatter).
If <code>dots=T</code>, the default <code>dots=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code> selection
is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>dots=F</code> is specified, the dots are not included in the plot.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_dotsgrid">dotsgrid</code></td>
<td>
<p>number of dots within each bin to be plotted. Given the choice, these dots are point estimates
evaluated over an evenly-spaced grid within each bin. The default is <code>dotsgrid=0</code>, and only
the point estimates at the mean of <code>x</code> within each bin are presented.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_dotsgridmean">dotsgridmean</code></td>
<td>
<p>If true, the dots corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. By default, they are presented, i.e., <code>dotsgridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_line">line</code></td>
<td>
<p>a vector or a logical value. If <code>line=c(p,s)</code>, a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
is used for plotting as a &quot;line&quot;. If <code>line=T</code> is specified, <code>line=c(0,0)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>line=F</code> or <code>line=NULL</code> is specified, the line is not included in the plot.  The default is <code>line=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_linegrid">linegrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>line=c(p,s)</code> option. The default is <code>linegrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for fitting/plotting the line.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_ci">ci</code></td>
<td>
<p>a vector or a logical value. If <code>ci=c(p,s)</code> a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing confidence intervals. If <code>ci=T</code> is specified, <code>ci=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>ci=F</code> or <code>ci=NULL</code> is specified, the confidence intervals are not included in the plot.  The default is <code>ci=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_cigrid">cigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>ci=c(p,s)</code> option. The default is <code>cigrid=1</code>, which corresponds to 1
evenly-spaced evaluation point within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_cigridmean">cigridmean</code></td>
<td>
<p>If true, the confidence intervals corresponding to the point estimates evaluated at the mean of <code>x</code> within each bin
are presented. The default is <code>cigridmean=T</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_cb">cb</code></td>
<td>
<p>a vector or a logical value. If <code>cb=c(p,s)</code>, a the piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used for
constructing the confidence band. If the option <code>cb=T</code> is specified, <code>cb=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).
If <code>cb=F</code> or <code>cb=NULL</code> is specified, the confidence band is not included in the plot. The default is <code>cb=NULL</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_cbgrid">cbgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of the point
estimate set by the <code>cb=c(p,s)</code> option. The default is <code>cbgrid=20</code>, which corresponds
to 20 evenly-spaced evaluation points within each bin for confidence interval construction.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_polyreg">polyreg</code></td>
<td>
<p>degree of a global polynomial regression model for plotting. By default, this fit is not included
in the plot unless explicitly specified. Recommended specification is <code>polyreg=3</code>, which
adds a cubic (global) polynomial fit of the regression function of interest to the binned scatter plot.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_polyreggrid">polyreggrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the point estimate set by the <code>polyreg=p</code> option. The default is <code>polyreggrid=20</code>,
which corresponds to 20 evenly-spaced evaluation points within each bin for confidence
interval construction.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_polyregcigrid">polyregcigrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for constructing
confidence intervals based on polynomial regression set by the <code>polyreg=p</code> option.
The default is <code>polyregcigrid=0</code>, which corresponds to not plotting confidence
intervals for the global polynomial regression approximation.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_by">by</code></td>
<td>
<p>a vector containing the group indicator for subgroup analysis; both numeric and string variables
are supported. When <code>by</code> is specified, <code>binsreg</code> implements estimation and inference for each subgroup
separately, but produces a common binned scatter plot. By default, the binning structure is selected for each
subgroup separately, but see the option <code>samebinsby</code> below for imposing a common binning structure across subgroups.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_bycolors">bycolors</code></td>
<td>
<p>an ordered list of colors for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_bysymbols">bysymbols</code></td>
<td>
<p>an ordered list of symbols for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_bylpatterns">bylpatterns</code></td>
<td>
<p>an ordered list of line patterns for plotting each subgroup series defined by the option <code>by</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_legendtitle">legendTitle</code></td>
<td>
<p>String, title of legend.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_legendoff">legendoff</code></td>
<td>
<p>If true, no legend is added.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_nbins">nbins</code></td>
<td>
<p>number of bins for partitioning/binning of <code>x</code>.  If <code>nbins=T</code> or <code>nbins=NULL</code> (default) is specified, the number
of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> in a data-driven, optimal way whenever possible.
If a vector with more than one number is specified, the number of bins is selected within this vector via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots. The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other options are <code>"es"</code> for evenly-spaced binning, or
a vector for manual specification of the positions of inner knots (which must be within the range of <code>x</code>).</p>
</td></tr>
<tr><td><code id="binsreg_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
Piecewise polynomials of the selected optimal degree <code>p</code> are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials of degree <code>p+1</code> are used to construct confidence intervals
or confidence band if <code>ci=T</code> or <code>cb=T</code> is specified.
<em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>nbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
Piecewise polynomials with the selected optimal <code>s</code> smoothness constraints are used to construct dots or line
if <code>dots=T</code> or <code>line=T</code> is specified,
whereas piecewise polynomials with <code>s+1</code> constraints are used to construct
confidence intervals or confidence band if <code>ci=T</code> or <code>cb=T</code> is
specified.  If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the piecewise polynomial
with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_samebinsby">samebinsby</code></td>
<td>
<p>if true, a common partitioning/binning structure across all subgroups specified by the option <code>by</code> is forced.
The knots positions are selected according to the option <code>binspos</code> and using the full sample. If <code>nbins</code>
is not specified, then the number of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> and
using the full sample.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1.  By default, <code>max(5000, 0.01n)</code> observations
are used if the samples size <code>n&gt;5000</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_nsims">nsims</code></td>
<td>
<p>number of random draws for constructing confidence bands. The default is
<code>nsims=500</code>, which corresponds to 500 draws from a standard Gaussian random vector of size
<code>[(p+1)*J - (J-1)*s]</code>. Setting at least <code>nsims=2000</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum operation needed to construct confidence bands. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum operator.
Setting at least <code>simsgrid=50</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_simsseed">simsseed</code></td>
<td>
<p>seed for simulation.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_vce">vce</code></td>
<td>
<p>Procedure to compute the variance-covariance matrix estimator. Options are
</p>

<ul>
<li> <p><code>"const"</code> homoskedastic variance estimator.
</p>
</li>
<li> <p><code>"HC0"</code> heteroskedasticity-robust plug-in residuals variance estimator
without weights.
</p>
</li>
<li> <p><code>"HC1"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc1 weights. Default.
</p>
</li>
<li> <p><code>"HC2"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc2 weights.
</p>
</li>
<li> <p><code>"HC3"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc3 weights.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsreg_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_asyvar">asyvar</code></td>
<td>
<p>If true, the standard error of the nonparametric component is computed and the uncertainty related to control
variables is omitted. Default is <code>asyvar=FALSE</code>, that is, the uncertainty related to control variables is taken into account.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_level">level</code></td>
<td>
<p>nominal confidence level for confidence interval and confidence band estimation. Default is <code>level=95</code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_noplot">noplot</code></td>
<td>
<p>if true, no plot produced.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different statistical models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsreg_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_subset">subset</code></td>
<td>
<p>Optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_plotxrange">plotxrange</code></td>
<td>
<p>a vector. <code>plotxrange=c(min, max)</code> specifies a range of the x-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
<tr><td><code id="binsreg_+3A_plotyrange">plotyrange</code></td>
<td>
<p>a vector. <code>plotyrange=c(min, max)</code> specifies a range of the y-axis for plotting. Observations outside the range are dropped in the plot.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>bins_plot</code></td>
<td>
<p>A <code>ggplot</code> object for binscatter plot.</p>
</td></tr>
<tr><td><code>data.plot</code></td>
<td>
<p>A list containing data for plotting. Each item is a sublist of data frames for each group. Each sublist may contain the following data frames:
</p>

<ul>
<li> <p><code>data.dots</code> Data for dots. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.line</code> Data for line. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and <code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.ci</code> Data for CI. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>ci.l</code> and <code>ci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.cb</code> Data for CB. It contains: <code>x</code>, evaluation points; <code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>cb.l</code> and <code>cb.r</code>, left and right boundaries of the confidence band.
</p>
</li>
<li> <p><code>data.poly</code> Data for polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin; and
<code>fit</code>, fitted values.
</p>
</li>
<li> <p><code>data.polyci</code> Data for confidence intervals based on polynomial regression. It contains: <code>x</code>, evaluation points;
<code>bin</code>, the indicator of bins;
<code>isknot</code>, indicator of inner knots; <code>mid</code>, midpoint of each bin;
<code>polyci.l</code> and <code>polyci.r</code>, left and right boundaries of each confidence intervals.
</p>
</li>
<li> <p><code>data.bin</code> Data for the binning structure. It contains: <code>bin.id</code>, ID for each bin;
<code>left.endpoint</code> and <code>right.endpoint</code>, left and right endpoints of each bin.</p>
</li></ul>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>cval.by</code></td>
<td>
<p>A vector of critical values for constructing confidence band for each group.</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as <code>N.by</code> (total sample size for each group),
<code>Ndist.by</code> (number of distinct values in <code>x</code> for each group), <code>Nclust.by</code> (number of clusters for each group),
and <code>nbins.by</code> (number of bins for each group), and <code>byvals</code> (number of distinct values in <code>by</code>).
The degree and smoothness of polynomials for dots, line, confidence intervals and confidence band for each group are saved
in <code>dots</code>, <code>line</code>, <code>ci</code>, and <code>cb</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsregselect">binsregselect</a></code>, <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); y &lt;- sin(x)+rnorm(500)
 ## Binned scatterplot
 binsreg(y,x)
</code></pre>

<hr>
<h2 id='binsregselect'>Data-Driven IMSE-Optimal Partitioning/Binning Selection for Binscatter</h2><span id='topic+binsregselect'></span>

<h3>Description</h3>

<p><code>binsregselect</code> implements data-driven procedures for selecting the number of bins for binscatter
estimation. The selected number is optimal in minimizing integrated mean squared error (IMSE).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binsregselect(y, x, w = NULL, data = NULL, deriv = 0, bins = NULL,
  pselect = NULL, sselect = NULL, binspos = "qs", nbins = NULL,
  binsmethod = "dpi", nbinsrot = NULL, simsgrid = 20, savegrid = F,
  vce = "HC1", useeffn = NULL, randcut = NULL, cluster = NULL,
  dfcheck = c(20, 30), masspoints = "on", weights = NULL,
  subset = NULL, norotnorm = F, numdist = NULL, numclust = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binsregselect_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables used in the model.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_bins">bins</code></td>
<td>
<p>a vector. <code>bins=c(p,s)</code> set a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
for data-driven (IMSE-optimal) selection of the partitioning/binning scheme. By default, the function sets
<code>bins=c(0,0)</code>, which corresponds to piecewise constant (canonical binscatter).</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
<em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>nbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the
piecewise polynomial with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots.  The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other option is <code>binspos="es"</code> for evenly-spaced binning.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_nbins">nbins</code></td>
<td>
<p>number of bins for degree/smoothness selection. If <code>nbins=T</code> or <code>nbins=NULL</code> (default) is specified,
the function selects the number of bins instead, given the specified degree and smoothness.
If a vector with more than one number is specified, the command selects the number of bins within this vector.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum (infimum or Lp metric) operation needed to construct confidence bands and hypothesis testing
procedures. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum (infimum or Lp metric) operator.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_savegrid">savegrid</code></td>
<td>
<p>if true, a data frame produced containing grid.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_vce">vce</code></td>
<td>
<p>procedure to compute the variance-covariance matrix estimator. Options are
</p>

<ul>
<li> <p><code>"const"</code> homoskedastic variance estimator.
</p>
</li>
<li> <p><code>"HC0"</code> heteroskedasticity-robust plug-in residuals variance estimator
without weights.
</p>
</li>
<li> <p><code>"HC1"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc1 weights. Default.
</p>
</li>
<li> <p><code>"HC2"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc2 weights.
</p>
</li>
<li> <p><code>"HC3"</code> heteroskedasticity-robust plug-in residuals variance estimator
with hc3 weights.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsregselect_+3A_useeffn">useeffn</code></td>
<td>
<p>effective sample size to be used when computing the (IMSE-optimal) number of bins. This option
is useful for extrapolating the optimal number of bins to larger (or smaller) datasets than
the one used to compute it.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different statistical models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binsregselect_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_subset">subset</code></td>
<td>
<p>optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_norotnorm">norotnorm</code></td>
<td>
<p>if true, a uniform density rather than normal density used for ROT selection.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_numdist">numdist</code></td>
<td>
<p>number of distinct values for selection. Used to speed up computation.</p>
</td></tr>
<tr><td><code id="binsregselect_+3A_numclust">numclust</code></td>
<td>
<p>number of clusters for selection. Used to speed up computation.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>nbinsrot.poly</code></td>
<td>
<p>ROT number of bins, unregularized.</p>
</td></tr>
<tr><td><code>nbinsrot.regul</code></td>
<td>
<p>ROT number of bins, regularized.</p>
</td></tr>
<tr><td><code>nbinsrot.uknot</code></td>
<td>
<p>ROT number of bins, unique knots.</p>
</td></tr>
<tr><td><code>nbinsdpi</code></td>
<td>
<p>DPI number of bins.</p>
</td></tr>
<tr><td><code>nbinsdpi.uknot</code></td>
<td>
<p>DPI number of bins, unique knots.</p>
</td></tr>
<tr><td><code>prot.poly</code></td>
<td>
<p>ROT degree of polynomials, unregularized.</p>
</td></tr>
<tr><td><code>prot.regul</code></td>
<td>
<p>ROT degree of polynomials, regularized.</p>
</td></tr>
<tr><td><code>prot.uknot</code></td>
<td>
<p>ROT degree of polynomials, unique knots.</p>
</td></tr>
<tr><td><code>pdpi</code></td>
<td>
<p>DPI degree of polynomials.</p>
</td></tr>
<tr><td><code>pdpi.uknot</code></td>
<td>
<p>DPI degree of polynomials, unique knots.</p>
</td></tr>
<tr><td><code>srot.poly</code></td>
<td>
<p>ROT number of smoothness constraints, unregularized.</p>
</td></tr>
<tr><td><code>srot.regul</code></td>
<td>
<p>ROT number of smoothness constraints, regularized.</p>
</td></tr>
<tr><td><code>srot.uknot</code></td>
<td>
<p>ROT number of smoothness constraints, unique knots.</p>
</td></tr>
<tr><td><code>sdpi</code></td>
<td>
<p>DPI number of smoothness constraints.</p>
</td></tr>
<tr><td><code>sdpi.uknot</code></td>
<td>
<p>DPI number of smoothness constraints, unique knots.</p>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE expansion, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE expansion, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE expansion, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE expansion, DPI selection.</p>
</td></tr>
<tr><td><code>int.result</code></td>
<td>
<p>Intermediate results, including a matrix of degree and smoothness (<code>deg_mat</code>),
the selected numbers of bins (<code>vec.nbinsrot.poly</code>,<code>vec.nbinsrot.regul</code>,
<code>vec.nbinsrot.uknot</code>, <code>vec.nbinsdpi</code>, <code>vec.nbinsdpi.uknot</code>),
and the bias and variance constants in IMSE (<code>vec.imse.b.rot</code>,
<code>vec.imse.v.rot</code>, <code>vec.imse.b.dpi</code>, <code>vec.imse.v.dpi</code>)
under each rule (ROT or DPI), corresponding to each pair of degree and smoothness
(each row in <code>deg_mat</code>).</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as total sample size <code>n</code>,
number of distinct values <code>Ndist</code> in <code>x</code>, and number of clusters <code>Nclust</code>.</p>
</td></tr>
<tr><td><code>data.grid</code></td>
<td>
<p>A data frame containing grid.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsreg">binsreg</a></code>, <code><a href="#topic+binstest">binstest</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); y &lt;- sin(x)+rnorm(500)
 est &lt;- binsregselect(y,x)
 summary(est)
</code></pre>

<hr>
<h2 id='binstest'>Data-Driven Nonparametric Shape Restriction and Parametric Model Specification Testing using Binscatter</h2><span id='topic+binstest'></span>

<h3>Description</h3>

<p><code>binstest</code> implements binscatter-based hypothesis testing procedures for parametric functional
forms of and nonparametric shape restrictions on the regression function of interest, following the results
in <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">Cattaneo, Crump, Farrell and Feng (2024a)</a> and
<a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Cattaneo, Crump, Farrell and Feng (2024b)</a>.
If the binning scheme is not set by the user,
the companion function <code><a href="#topic+binsregselect">binsregselect</a></code> is used to implement binscatter in a
data-driven way and inference procedures are based on robust bias correction.
Binned scatter plots based on different methods can be constructed using the companion functions <code><a href="#topic+binsreg">binsreg</a></code>,
<code><a href="#topic+binsqreg">binsqreg</a></code> or <code><a href="#topic+binsglm">binsglm</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>binstest(y, x, w = NULL, data = NULL, estmethod = "reg",
  family = gaussian(), quantile = NULL, deriv = 0, at = NULL,
  nolink = F, testmodel = NULL, testmodelparfit = NULL,
  testmodelpoly = NULL, testshape = NULL, testshapel = NULL,
  testshaper = NULL, testshape2 = NULL, lp = Inf, bins = NULL,
  nbins = NULL, pselect = NULL, sselect = NULL, binspos = "qs",
  binsmethod = "dpi", nbinsrot = NULL, randcut = NULL, nsims = 500,
  simsgrid = 20, simsseed = NULL, vce = NULL, cluster = NULL,
  asyvar = F, dfcheck = c(20, 30), masspoints = "on", weights = NULL,
  subset = NULL, numdist = NULL, numclust = NULL, estmethodopt = NULL,
  ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="binstest_+3A_y">y</code></td>
<td>
<p>outcome variable. A vector.</p>
</td></tr>
<tr><td><code id="binstest_+3A_x">x</code></td>
<td>
<p>independent variable of interest. A vector.</p>
</td></tr>
<tr><td><code id="binstest_+3A_w">w</code></td>
<td>
<p>control variables. A matrix, a vector or a <code><a href="stats.html#topic+formula">formula</a></code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_data">data</code></td>
<td>
<p>an optional data frame containing variables used in the model.</p>
</td></tr>
<tr><td><code id="binstest_+3A_estmethod">estmethod</code></td>
<td>
<p>estimation method. The default is <code>estmethod="reg"</code> for tests based on binscatter least squares regression. Other options are <code>"qreg"</code> for quantile regression and <code>"glm"</code> for generalized linear regression. If <code>estmethod="glm"</code>, the option <code>family</code> must be specified.</p>
</td></tr>
<tr><td><code id="binstest_+3A_family">family</code></td>
<td>
<p>a description of the error distribution and link function to be used in the generalized linear model when <code>estmethod="glm"</code>. (See <code><a href="stats.html#topic+family">family</a></code> for details of family functions.)</p>
</td></tr>
<tr><td><code id="binstest_+3A_quantile">quantile</code></td>
<td>
<p>the quantile to be estimated. A number strictly between 0 and 1.</p>
</td></tr>
<tr><td><code id="binstest_+3A_deriv">deriv</code></td>
<td>
<p>derivative order of the regression function for estimation, testing and plotting.
The default is <code>deriv=0</code>, which corresponds to the function itself.</p>
</td></tr>
<tr><td><code id="binstest_+3A_at">at</code></td>
<td>
<p>value of <code>w</code> at which the estimated function is evaluated.  The default is <code>at="mean"</code>, which corresponds to
the mean of <code>w</code>. Other options are: <code>at="median"</code> for the median of <code>w</code>, <code>at="zero"</code> for a vector of zeros.
<code>at</code> can also be a vector of the same length as the number of columns of <code>w</code> (if <code>w</code> is a matrix) or a data frame containing the same variables as specified in <code>w</code> (when
<code>data</code> is specified). Note that when <code>at="mean"</code> or <code>at="median"</code>, all factor variables (if specified) are excluded from the evaluation (set as zero).</p>
</td></tr>
<tr><td><code id="binstest_+3A_nolink">nolink</code></td>
<td>
<p>if true, the function within the inverse link function is reported instead of the conditional mean function for the outcome.</p>
</td></tr>
<tr><td><code id="binstest_+3A_testmodel">testmodel</code></td>
<td>
<p>a vector or a logical value. It sets the degree of polynomial and the number of smoothness constraints for parametric model specification
testing. If <code>testmodel=c(p,s)</code> is specified, a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used.
If <code>testmodel=T</code> or <code>testmodel=NULL</code> (default) is specified, <code>testmodel=c(1,1)</code> is used unless the degree <code>p</code> or the smoothness <code>s</code>
selection is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).</p>
</td></tr>
<tr><td><code id="binstest_+3A_testmodelparfit">testmodelparfit</code></td>
<td>
<p>a data frame or matrix which contains the evaluation grid and fitted values of the model(s) to be
tested against.  The column contains a series of evaluation points
at which the binscatter model and the parametric model of interest are compared with
each other.  Each parametric model is represented by other columns, which must
contain the fitted values at the corresponding evaluation points.</p>
</td></tr>
<tr><td><code id="binstest_+3A_testmodelpoly">testmodelpoly</code></td>
<td>
<p>degree of a global polynomial model to be tested against.</p>
</td></tr>
<tr><td><code id="binstest_+3A_testshape">testshape</code></td>
<td>
<p>a vector or a logical value. It sets the degree of polynomial and the number of smoothness constraints for nonparametric shape restriction
testing. If <code>testshape=c(p,s)</code> is specified, a piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints is used.
If <code>testshape=T</code> or <code>testshape=NULL</code> (default) is specified, <code>testshape=c(1,1)</code> is used unless the degree <code>p</code> or smoothness <code>s</code> selection
is requested via the option <code>pselect</code> or <code>sselect</code> (see more details in the explanation of <code>pselect</code> and <code>sselect</code>).</p>
</td></tr>
<tr><td><code id="binstest_+3A_testshapel">testshapel</code></td>
<td>
<p>a vector of null boundary values for hypothesis testing. Each number <code>a</code> in the vector
corresponds to one boundary of a one-sided hypothesis test to the left of the form
<code>H0: sup_x mu(x)&lt;=a</code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_testshaper">testshaper</code></td>
<td>
<p>a vector of null boundary values for hypothesis testing. Each number <code>a</code> in the vector
corresponds to one boundary of a one-sided hypothesis test to the right of the form
<code>H0: inf_x mu(x)&gt;=a</code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_testshape2">testshape2</code></td>
<td>
<p>a vector of null boundary values for hypothesis testing. Each number <code>a</code> in the vector
corresponds to one boundary of a two-sided hypothesis test of the form
<code>H0: sup_x |mu(x)-a|=0</code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_lp">lp</code></td>
<td>
<p>an Lp metric used for parametric model specification testing and/or shape restriction testing. The default is <code>lp=Inf</code>, which
corresponds to the sup-norm of the t-statistic. Other options are <code>lp=q</code> for a positive number <code>q&gt;=1</code>. Note that
<code>lp=Inf</code> (&quot;sup-norm&quot;) has to be used for testing one-sided shape restrictions.</p>
</td></tr>
<tr><td><code id="binstest_+3A_bins">bins</code></td>
<td>
<p>a vector. If <code>bins=c(p,s)</code>, it sets the piecewise polynomial of degree <code>p</code> with <code>s</code> smoothness constraints
for data-driven (IMSE-optimal) selection of the partitioning/binning scheme.
The default is <code>bins=c(0,0)</code>, which corresponds to the piecewise constant.</p>
</td></tr>
<tr><td><code id="binstest_+3A_nbins">nbins</code></td>
<td>
<p>number of bins for partitioning/binning of <code>x</code>.  If <code>nbins=T</code> or <code>nbins=NULL</code> (default) is specified, the number
of bins is selected via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code> in a data-driven, optimal way whenever possible.
If a vector with more than one number is specified, the number of bins is selected within this vector via the companion command <code><a href="#topic+binsregselect">binsregselect</a></code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_pselect">pselect</code></td>
<td>
<p>vector of numbers within which the degree of polynomial <code>p</code> for point estimation is selected.
If the selected optimal degree is <code>p</code>, then piecewise polynomials of degree
<code>p+1</code> are used to conduct testing for nonparametric shape restrictions or parametric model specifications.
<em>Note:</em> To implement the degree or smoothness selection, in addition to <code>pselect</code> or <code>sselect</code>,
<code>nbins=#</code> must be specified.</p>
</td></tr>
<tr><td><code id="binstest_+3A_sselect">sselect</code></td>
<td>
<p>vector of numbers within which the number of smoothness constraints <code>s</code> for point estimation is selected.
If the selected optimal smoothness is <code>s</code>, then piecewise polynomials of <code>s+1</code> smoothness constraints
are used to conduct testing for nonparametric shape restrictions or parametric model specifications.
If not specified, for each value <code>p</code> supplied in the option <code>pselect</code>, only the piecewise polynomial
with the maximum smoothness is considered, i.e., <code>s=p</code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_binspos">binspos</code></td>
<td>
<p>position of binning knots. The default is <code>binspos="qs"</code>, which corresponds to quantile-spaced
binning (canonical binscatter).  The other options are <code>"es"</code> for evenly-spaced binning, or
a vector for manual specification of the positions of inner knots (which must be within the range of
<code>x</code>).</p>
</td></tr>
<tr><td><code id="binstest_+3A_binsmethod">binsmethod</code></td>
<td>
<p>method for data-driven selection of the number of bins. The default is <code>binsmethod="dpi"</code>,
which corresponds to the IMSE-optimal direct plug-in rule.  The other option is: <code>"rot"</code>
for rule of thumb implementation.</p>
</td></tr>
<tr><td><code id="binstest_+3A_nbinsrot">nbinsrot</code></td>
<td>
<p>initial number of bins value used to construct the DPI number of bins selector.
If not specified, the data-driven ROT selector is used instead.</p>
</td></tr>
<tr><td><code id="binstest_+3A_randcut">randcut</code></td>
<td>
<p>upper bound on a uniformly distributed variable used to draw a subsample for bins/degree/smoothness selection.
Observations for which <code>runif()&lt;=#</code> are used. # must be between 0 and 1. By default, <code>max(5000, 0.01n)</code> observations
are used if the samples size <code>n&gt;5000</code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_nsims">nsims</code></td>
<td>
<p>number of random draws for hypothesis testing. The default is
<code>nsims=500</code>, which corresponds to 500 draws from a standard Gaussian random vector of size
<code>[(p+1)*J - (J-1)*s]</code>. Setting at least <code>nsims=2000</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binstest_+3A_simsgrid">simsgrid</code></td>
<td>
<p>number of evaluation points of an evenly-spaced grid within each bin used for evaluation of
the supremum (infimum or Lp metric) operation needed to construct hypothesis testing
procedures. The default is <code>simsgrid=20</code>, which corresponds to 20 evenly-spaced
evaluation points within each bin for approximating the supremum (infimum or Lp metric) operator.
Setting at least <code>simsgrid=50</code> is recommended to obtain the final results.</p>
</td></tr>
<tr><td><code id="binstest_+3A_simsseed">simsseed</code></td>
<td>
<p>seed for simulation.</p>
</td></tr>
<tr><td><code id="binstest_+3A_vce">vce</code></td>
<td>
<p>procedure to compute the variance-covariance matrix estimator. For least squares regression and generalized linear regression, the allowed options are the same as that for <code><a href="#topic+binsreg">binsreg</a></code> or <code><a href="#topic+binsqreg">binsqreg</a></code>.
For quantile regression, the allowed options are the same as that for <code><a href="#topic+binsqreg">binsqreg</a></code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_cluster">cluster</code></td>
<td>
<p>cluster ID. Used for compute cluster-robust standard errors.</p>
</td></tr>
<tr><td><code id="binstest_+3A_asyvar">asyvar</code></td>
<td>
<p>if true, the standard error of the nonparametric component is computed and the uncertainty related to control
variables is omitted. Default is <code>asyvar=FALSE</code>, that is, the uncertainty related to control variables is taken into account.</p>
</td></tr>
<tr><td><code id="binstest_+3A_dfcheck">dfcheck</code></td>
<td>
<p>adjustments for minimum effective sample size checks, which take into account number of unique
values of <code>x</code> (i.e., number of mass points), number of clusters, and degrees of freedom of
the different stat models considered. The default is <code>dfcheck=c(20, 30)</code>.
See <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Cattaneo, Crump, Farrell and Feng (2024c)</a> for more details.</p>
</td></tr>
<tr><td><code id="binstest_+3A_masspoints">masspoints</code></td>
<td>
<p>how mass points in <code>x</code> are handled. Available options:
</p>

<ul>
<li> <p><code>"on"</code> all mass point and degrees of freedom checks are implemented. Default.
</p>
</li>
<li> <p><code>"noadjust"</code> mass point checks and the corresponding effective sample size adjustments are omitted.
</p>
</li>
<li> <p><code>"nolocalcheck"</code> within-bin mass point and degrees of freedom checks are omitted.
</p>
</li>
<li> <p><code>"off"</code> &quot;noadjust&quot; and &quot;nolocalcheck&quot; are set simultaneously.
</p>
</li>
<li> <p><code>"veryfew"</code> forces the function to proceed as if <code>x</code> has only a few number of mass points (i.e., distinct values).
In other words, forces the function to proceed as if the mass point and degrees of freedom checks were failed.
</p>
</li></ul>
</td></tr>
<tr><td><code id="binstest_+3A_weights">weights</code></td>
<td>
<p>an optional vector of weights to be used in the fitting process. Should be <code>NULL</code> or
a numeric vector. For more details, see <code><a href="stats.html#topic+lm">lm</a></code>.</p>
</td></tr>
<tr><td><code id="binstest_+3A_subset">subset</code></td>
<td>
<p>optional rule specifying a subset of observations to be used.</p>
</td></tr>
<tr><td><code id="binstest_+3A_numdist">numdist</code></td>
<td>
<p>number of distinct values for selection. Used to speed up computation.</p>
</td></tr>
<tr><td><code id="binstest_+3A_numclust">numclust</code></td>
<td>
<p>number of clusters for selection. Used to speed up computation.</p>
</td></tr>
<tr><td><code id="binstest_+3A_estmethodopt">estmethodopt</code></td>
<td>
<p>a list of optional arguments used by <code><a href="quantreg.html#topic+rq">rq</a></code> (for quantile regression) or <code><a href="stats.html#topic+glm">glm</a></code> (for fitting generalized linear models).</p>
</td></tr>
<tr><td><code id="binstest_+3A_...">...</code></td>
<td>
<p>optional arguments to control bootstrapping if <code>estmethod="qreg"</code> and <code>vce="boot"</code>. See <code><a href="quantreg.html#topic+boot.rq">boot.rq</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>testshapeL</code></td>
<td>
<p>Results for <code>testshapel</code>, including: <code>testvalL</code>, null boundary values;
<code>stat.shapeL</code>, test statistics; and <code>pval.shapeL</code>, p-value.</p>
</td></tr>
<tr><td><code>testshapeR</code></td>
<td>
<p>Results for <code>testshaper</code>, including: <code>testvalR</code>, null boundary values;
<code>stat.shapeR</code>, test statistics; and <code>pval.shapeR</code>, p-value.</p>
</td></tr>
<tr><td><code>testshape2</code></td>
<td>
<p>Results for <code>testshape2</code>, including: <code>testval2</code>, null boundary values;
<code>stat.shape2</code>, test statistics; and <code>pval.shape2</code>, p-value.</p>
</td></tr>
<tr><td><code>testpoly</code></td>
<td>
<p>Results for <code>testmodelpoly</code>, including: <code>testpoly</code>, the degree of global polynomial;
<code>stat.poly</code>, test statistic; <code>pval.poly</code>, p-value.</p>
</td></tr>
<tr><td><code>testmodel</code></td>
<td>
<p>Results for <code>testmodelparfit</code>, including: <code>stat.model</code>, test statistics;
<code>pval.model</code>, p-values.</p>
</td></tr>
<tr><td><code>imse.var.rot</code></td>
<td>
<p>Variance constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.bsq.rot</code></td>
<td>
<p>Bias constant in IMSE, ROT selection.</p>
</td></tr>
<tr><td><code>imse.var.dpi</code></td>
<td>
<p>Variance constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>imse.bsq.dpi</code></td>
<td>
<p>Bias constant in IMSE, DPI selection.</p>
</td></tr>
<tr><td><code>opt</code></td>
<td>
<p> A list containing options passed to the function, as well as total sample size <code>n</code>,
number of distinct values <code>Ndist</code> in <code>x</code>, number of clusters <code>Nclust</code>, and
number of bins <code>nbins</code>.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Matias D. Cattaneo, Princeton University, Princeton, NJ. <a href="mailto:cattaneo@princeton.edu">cattaneo@princeton.edu</a>.
</p>
<p>Richard K. Crump, Federal Reserve Bank of New York, New York, NY. <a href="mailto:richard.crump@ny.frb.org">richard.crump@ny.frb.org</a>.
</p>
<p>Max H. Farrell, UC Santa Barbara, Santa Barbara, CA. <a href="mailto:mhfarrell@gmail.com">mhfarrell@gmail.com</a>.
</p>
<p>Yingjie Feng (maintainer), Tsinghua University, Beijing, China. <a href="mailto:fengyingjiepku@gmail.com">fengyingjiepku@gmail.com</a>.
</p>


<h3>References</h3>

<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024a: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_AER.pdf">On Binscatter</a>. American Economic Review 114(5): 1488-1514.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024b: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_NonlinearBinscatter.pdf">Nonlinear Binscatter Methods</a>. Working Paper.
</p>
<p>Cattaneo, M. D., R. K. Crump, M. H. Farrell, and Y. Feng. 2024c: <a href="https://nppackages.github.io/references/Cattaneo-Crump-Farrell-Feng_2024_Stata.pdf">Binscatter Regressions</a>. Working Paper.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+binsreg">binsreg</a></code>, <code><a href="#topic+binsqreg">binsqreg</a></code>, <code><a href="#topic+binsglm">binsglm</a></code>, <code><a href="#topic+binsregselect">binsregselect</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> x &lt;- runif(500); y &lt;- sin(x)+rnorm(500)
 est &lt;- binstest(y,x, testmodelpoly=1)
 summary(est)
</code></pre>

<hr>
<h2 id='print.CCFFbinsglm'>Internal function.</h2><span id='topic+print.CCFFbinsglm'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsglm'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinsglm_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinsglm</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='print.CCFFbinspwc'>Internal function.</h2><span id='topic+print.CCFFbinspwc'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinspwc'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinspwc_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinspwc</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='print.CCFFbinsqreg'>Internal function.</h2><span id='topic+print.CCFFbinsqreg'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsqreg'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinsqreg_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinsqreg</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='print.CCFFbinsreg'>Internal function.</h2><span id='topic+print.CCFFbinsreg'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsreg'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinsreg_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinsreg</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='print.CCFFbinsregselect'>Internal function.</h2><span id='topic+print.CCFFbinsregselect'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsregselect'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinsregselect_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinsregselect</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='print.CCFFbinstest'>Internal function.</h2><span id='topic+print.CCFFbinstest'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinstest'
print(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="print.CCFFbinstest_+3A_x">x</code></td>
<td>
<p>Class <code>CCFFbinstest</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinsglm'>Internal function.</h2><span id='topic+summary.CCFFbinsglm'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsglm'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinsglm_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinsglm</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinspwc'>Internal function.</h2><span id='topic+summary.CCFFbinspwc'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinspwc'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinspwc_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinspwc</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinsqreg'>Internal function.</h2><span id='topic+summary.CCFFbinsqreg'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsqreg'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinsqreg_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinsqreg</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinsreg'>Internal function.</h2><span id='topic+summary.CCFFbinsreg'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsreg'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinsreg_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinsreg</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinsregselect'>Internal function.</h2><span id='topic+summary.CCFFbinsregselect'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinsregselect'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinsregselect_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinsregselect</code> objects.</p>
</td></tr>
</table>

<hr>
<h2 id='summary.CCFFbinstest'>Internal function.</h2><span id='topic+summary.CCFFbinstest'></span>

<h3>Description</h3>

<p>Internal function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'CCFFbinstest'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="summary.CCFFbinstest_+3A_object">object</code></td>
<td>
<p>Class <code>CCFFbinstest</code> objects.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
