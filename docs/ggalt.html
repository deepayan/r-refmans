<!DOCTYPE html><html lang="en"><head><title>Help for package ggalt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ggalt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ggalt'><p>Extra Geoms, Stats, Coords, Scales &amp; Fonts for 'ggplot2'</p></a></li>
<li><a href='#absoluteGrob'><p>Absolute grob</p></a></li>
<li><a href='#annotate_textp'><p>Text annotations in plot coordinate system</p></a></li>
<li><a href='#byte_format'><p>Bytes formatter: convert to byte measurement and display symbol.</p></a></li>
<li><a href='#coord_proj'><p>Similar to <code>coord_map</code> but uses the PROJ.4 library/package for projection</p>
transformation</a></li>
<li><a href='#CoordProj'><p>Geom Proto</p></a></li>
<li><a href='#fortify.table'><p>Fortify contingency tables</p></a></li>
<li><a href='#geom_bkde'><p>Display a smooth density estimate.</p></a></li>
<li><a href='#geom_bkde2d'><p>Contours from a 2d density estimate.</p></a></li>
<li><a href='#geom_cartogram'><p>Map polygons layer enabling the display of show statistical information</p></a></li>
<li><a href='#geom_dumbbell'><p>Dumbell charts</p></a></li>
<li><a href='#geom_encircle'><p>Automatically enclose points in a polygon</p></a></li>
<li><a href='#geom_lollipop'><p>Lollipop charts</p></a></li>
<li><a href='#geom_stateface'><p>Use ProPublica's StateFace font in ggplot2 plots</p></a></li>
<li><a href='#geom_xspline'><p>Connect control points/observations with an X-spline</p></a></li>
<li><a href='#geom_xspline2'><p>Alternative implemenation for connecting  control points/observations</p>
with an X-spline</a></li>
<li><a href='#GeomCartogram'><p>Geom Cartogram</p></a></li>
<li><a href='#load_stateface'><p>Load stateface font</p></a></li>
<li><a href='#plotly_helpers'><p>Plotly helpers</p></a></li>
<li><a href='#show_stateface'><p>Show location of StateFace font</p></a></li>
<li><a href='#stat_ash'><p>Compute and display a univariate averaged shifted histogram (polynomial kernel)</p></a></li>
<li><a href='#stat_stepribbon'><p>Step ribbon statistic</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Extra Coordinate Systems, 'Geoms', Statistical Transformations,
Scales and Fonts for 'ggplot2'</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4.0</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bob Rudis &lt;bob@rud.is&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>A compendium of new geometries, coordinate systems, statistical 
    transformations, scales and fonts for 'ggplot2', including splines, 1d and 2d densities, 
    univariate average shifted histograms, a new map coordinate system based on the 
    'PROJ.4'-library along with geom_cartogram() that mimics the original functionality of 
    geom_map(), formatters for "bytes", a stat_stepribbon() function, increased 'plotly'
    compatibility and the 'StateFace' open source font 'ProPublica'. Further new 
    functionality includes lollipop charts, dumbbell charts, the ability to encircle
    points and coordinate-system-based text annotations.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/AGPL-3">AGPL</a> + file LICENSE</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hrbrmstr/ggalt">https://github.com/hrbrmstr/ggalt</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hrbrmstr/ggalt/issues">https://github.com/hrbrmstr/ggalt/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0), ggplot2 (&ge; 2.2.1)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, gridExtra, knitr, rmarkdown, ggthemes, reshape2</td>
</tr>
<tr>
<td>Imports:</td>
<td>utils, graphics, grDevices, dplyr, RColorBrewer, KernSmooth,
proj4, scales, grid, gtable, ash, maps, MASS, extrafont,
tibble, plotly (&ge; 3.4.1)</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>6.0.0</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Collate:</td>
<td>'annotate_textp.r' 'coord_proj.r' 'formatters.r' 'fortify.r'
'geom2plotly.r' 'geom_ash.r' 'geom_bkde.r' 'geom_bkde2d.r'
'geom_dumbbell.R' 'geom_cartogram.r' 'geom_encircle.r'
'geom_lollipop.r' 'geom_table.r' 'geom_twoway_bar.r'
'geom_xspline.r' 'geom_xspline2.r' 'stat-stepribbon.r'
'ggalt-package.r' 'grob_absolute.r' 'guide_axis.r'
'stateface.r' 'utils.r' 'zzz.r'</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2017-02-14 18:43:58 UTC; bob</td>
</tr>
<tr>
<td>Author:</td>
<td>Bob Rudis [aut, cre],
  Ben Bolker [aut, ctb] (Encircling &amp; additional splines),
  Ben Marwick [ctb] (General codebase cleanup),
  Jan Schulz [aut, ctb] (Annotations),
  Rosen Matev [ctb] (Original annotate_textp implementation on
    stackoverflow),
  ProPublica [dtc] (StateFace font)</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2017-02-15 18:16:00</td>
</tr>
</table>
<hr>
<h2 id='ggalt'>Extra Geoms, Stats, Coords, Scales &amp; Fonts for 'ggplot2'</h2><span id='topic+ggalt'></span><span id='topic+ggalt-package'></span>

<h3>Description</h3>

<p>A package containing additional geoms, coords, stats, scales &amp; fonts
for ggplot2 2.0+
</p>


<h3>Author(s)</h3>

<p>Bob Rudis (@hrbrmstr)
</p>

<hr>
<h2 id='absoluteGrob'>Absolute grob</h2><span id='topic+absoluteGrob'></span>

<h3>Description</h3>

<p>This grob has fixed dimensions and position.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>absoluteGrob(grob, width = NULL, height = NULL, xmin = NULL,
  ymin = NULL, vp = NULL)
</code></pre>


<h3>Details</h3>

<p>It's still experimental
</p>

<hr>
<h2 id='annotate_textp'>Text annotations in plot coordinate system</h2><span id='topic+annotate_textp'></span>

<h3>Description</h3>

<p>Annotates the plot with text. Compared to <code>annotate("text",...)</code>, the
placement of the annotations is specified in plot coordinates (from 0 to 1)
instead of data coordinates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>annotate_textp(label, x, y, facets = NULL, hjust = 0, vjust = 0,
  color = "black", alpha = NA, family = theme_get()$text$family,
  size = theme_get()$text$size, fontface = 1, lineheight = 1,
  box_just = ifelse(c(x, y) &lt; 0.5, 0, 1), margin = unit(size/2, "pt"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="annotate_textp_+3A_label">label</code></td>
<td>
<p>text annotation to be placed on the plot</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_x">x</code>, <code id="annotate_textp_+3A_y">y</code></td>
<td>
<p>positions of the individual annotations, in plot coordinates
(0..1) instead of data coordinates!</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_facets">facets</code></td>
<td>
<p>facet positions of the individual annotations</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_hjust">hjust</code>, <code id="annotate_textp_+3A_vjust">vjust</code></td>
<td>
<p>horizontal and vertical justification of the text relative
to the bounding box</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_color">color</code></td>
<td>
<p>alpha, family, size, fontface, lineheight font properties</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_alpha">alpha</code>, <code id="annotate_textp_+3A_family">family</code>, <code id="annotate_textp_+3A_size">size</code>, <code id="annotate_textp_+3A_fontface">fontface</code>, <code id="annotate_textp_+3A_lineheight">lineheight</code></td>
<td>
<p>standard aesthetic customizations</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_box_just">box_just</code></td>
<td>
<p>placement of the bounding box for the text relative to x,y
coordinates. Per default, the box is placed to the center of the plot. Be
aware that parts of the box which are outside of the visible region of the
plot will not be shown.</p>
</td></tr>
<tr><td><code id="annotate_textp_+3A_margin">margin</code></td>
<td>
<p>margins of the bounding box</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>p &lt;- ggplot(mtcars, aes(x = wt, y = mpg)) + geom_point()
p &lt;- p + geom_smooth(method = "lm", se = FALSE)
p + annotate_textp(x = 0.9, y = 0.35, label="A relative linear\nrelationship", hjust=1, color="red")
</code></pre>

<hr>
<h2 id='byte_format'>Bytes formatter: convert to byte measurement and display symbol.</h2><span id='topic+byte_format'></span><span id='topic+Kb'></span><span id='topic+Mb'></span><span id='topic+Gb'></span><span id='topic+bytes'></span>

<h3>Description</h3>

<p>Bytes formatter: convert to byte measurement and display symbol.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>byte_format(symbol = "auto", units = "binary")

Kb(x)

Mb(x)

Gb(x)

bytes(x, symbol = "auto", units = c("binary", "si"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="byte_format_+3A_symbol">symbol</code></td>
<td>
<p>byte symbol to use. If &quot;<code>auto</code>&quot; the symbol used will be
determined by the maximum value of <code>x</code>. Valid symbols are
&quot;<code>b</code>&quot;, &quot;<code>K</code>&quot;, &quot;<code>Mb</code>&quot;, &quot;<code>Gb</code>&quot;, &quot;<code>Tb</code>&quot;, &quot;<code>Pb</code>&quot;,
&quot;<code>Eb</code>&quot;, &quot;<code>Zb</code>&quot;, and &quot;<code>Yb</code>&quot;, along with their upper case
equivalents and &quot;<code>iB</code>&quot; equivalents.</p>
</td></tr>
<tr><td><code id="byte_format_+3A_units">units</code></td>
<td>
<p>which unit base to use, &quot;<code>binary</code>&quot; (1024 base) or
&quot;<code>si</code>&quot; (1000 base) for ISI units.</p>
</td></tr>
<tr><td><code id="byte_format_+3A_x">x</code></td>
<td>
<p>a numeric vector to format</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a function with three parameters, <code>x</code>, a numeric vector that
returns a character vector, <code>symbol</code> the byte symbol (e.g. &quot;<code>Kb</code>&quot;)
desired and the measurement <code>units</code> (traditional <code>binary</code> or
<code>si</code> for ISI metric units).
</p>


<h3>References</h3>

<p>Units of Information (Wikipedia) :
<a href="http://en.wikipedia.org/wiki/Units_of_information">http://en.wikipedia.org/wiki/Units_of_information</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>byte_format()(sample(3000000000, 10))
bytes(sample(3000000000, 10))
Kb(sample(3000000000, 10))
Mb(sample(3000000000, 10))
Gb(sample(3000000000, 10))
</code></pre>

<hr>
<h2 id='coord_proj'>Similar to <code>coord_map</code> but uses the PROJ.4 library/package for projection
transformation</h2><span id='topic+coord_proj'></span>

<h3>Description</h3>

<p>The representation of a portion of the earth, which is approximately
spherical, onto a flat 2D plane requires a projection. This is what
<code>coord_proj</code> does, using the <code>proj4::project()</code> function from
the <code>proj4</code> package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>coord_proj(proj = NULL, inverse = FALSE, degrees = TRUE,
  ellps.default = "sphere", xlim = NULL, ylim = NULL)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="coord_proj_+3A_proj">proj</code></td>
<td>
<p>projection definition. If left <code>NULL</code> will default to
a Robinson projection</p>
</td></tr>
<tr><td><code id="coord_proj_+3A_inverse">inverse</code></td>
<td>
<p>if <code>TRUE</code> inverse projection is performed (from a
cartographic projection into lat/long), otherwise projects from
lat/long into a cartographic projection.</p>
</td></tr>
<tr><td><code id="coord_proj_+3A_degrees">degrees</code></td>
<td>
<p>if <code>TRUE</code> then the lat/long data is assumed to be in
degrees, otherwise in radians</p>
</td></tr>
<tr><td><code id="coord_proj_+3A_ellps.default">ellps.default</code></td>
<td>
<p>default ellipsoid that will be added if no datum or
ellipsoid parameter is specified in proj. Older versions of PROJ.4
didn't require a datum (and used sphere by default), but 4.5.0 and
higher always require a datum or an ellipsoid. Set to  <code>NA</code> if no
datum should be added to proj (e.g. if you specify an ellipsoid
directly).</p>
</td></tr>
<tr><td><code id="coord_proj_+3A_xlim">xlim</code></td>
<td>
<p>manually specify x limits (in degrees of longitude)</p>
</td></tr>
<tr><td><code id="coord_proj_+3A_ylim">ylim</code></td>
<td>
<p>manually specify y limits (in degrees of latitude)</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>coord_proj()</code> using the Winkel-Tripel projection:
</p>
<p><img src="../help/figures/coordproj01.png" width="100%" alt="Figure: coordproj01.png" />

</p>



<h3>Note</h3>

<p>It is recommended that you use <code>geom_cartogram</code> with this coordinate system
</p>
<p>When <code>inverse</code> is <code>FALSE</code> <code>coord_proj</code> makes a fairly
large assumption that the coordinates being transformed are within
-180:180 (longitude) and -90:90 (latitude). As such, it truncates
all longitude &amp; latitude input to fit within these ranges. More updates
to this new <code>coord_</code> are planned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# World in Winkel-Tripel

# U.S.A. Albers-style
usa &lt;- world[world$region == "USA",]
usa &lt;- usa[!(usa$subregion %in% c("Alaska", "Hawaii")),]

gg &lt;- ggplot()
gg &lt;- gg + geom_cartogram(data=usa, map=usa,
                    aes(x=long, y=lat, map_id=region))
gg &lt;- gg + coord_proj(
             paste0("+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=37.5 +lon_0=-96",
                    " +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs"))
gg

# Showcase Greenland (properly)
greenland &lt;- world[world$region == "Greenland",]

gg &lt;- ggplot()
gg &lt;- gg + geom_cartogram(data=greenland, map=greenland,
                    aes(x=long, y=lat, map_id=region))
gg &lt;- gg + coord_proj(
             paste0("+proj=stere +lat_0=90 +lat_ts=70 +lon_0=-45 +k=1 +x_0=0",
                    " +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"))
gg

## End(Not run)
</code></pre>

<hr>
<h2 id='CoordProj'>Geom Proto</h2><span id='topic+CoordProj'></span><span id='topic+StatAsh'></span><span id='topic+GeomBkde'></span><span id='topic+StatBkde'></span><span id='topic+GeomBkde2d'></span><span id='topic+StatBkde2d'></span><span id='topic+GeomDumbbell'></span><span id='topic+GeomEncircle'></span><span id='topic+GeomLollipop'></span><span id='topic+GeomXspline'></span><span id='topic+StatXspline'></span><span id='topic+GeomXSpline2'></span><span id='topic+StatStepribbon'></span><span id='topic+GeomStateface'></span>

<h3>Description</h3>

<p>Geom Proto
</p>
<p>Geom Proto
</p>
<p>Geom Proto
</p>
<p>Geom Proto
</p>
<p>Geom Proto
</p>


<h3>References</h3>

<p><a href="https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs">https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs</a>
</p>

<hr>
<h2 id='fortify.table'>Fortify contingency tables</h2><span id='topic+fortify.table'></span>

<h3>Description</h3>

<p>Fortify contingency tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'table'
fortify(model, data, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="fortify.table_+3A_model">model</code></td>
<td>
<p>the contingency table</p>
</td></tr>
<tr><td><code id="fortify.table_+3A_data">data</code></td>
<td>
<p>data (unused)</p>
</td></tr>
<tr><td><code id="fortify.table_+3A_...">...</code></td>
<td>
<p>(unused)</p>
</td></tr>
</table>

<hr>
<h2 id='geom_bkde'>Display a smooth density estimate.</h2><span id='topic+geom_bkde'></span><span id='topic+stat_bkde'></span>

<h3>Description</h3>

<p>A kernel density estimate, useful for displaying the distribution of
variables with underlying smoothness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_bkde(mapping = NULL, data = NULL, stat = "bkde",
  position = "identity", bandwidth = NULL, range.x = NULL,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE, ...)

stat_bkde(mapping = NULL, data = NULL, geom = "area",
  position = "stack", kernel = "normal", canonical = FALSE,
  bandwidth = NULL, gridsize = 410, range.x = NULL, truncate = TRUE,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_bkde_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_bandwidth">bandwidth</code></td>
<td>
<p>the kernel bandwidth smoothing parameter. see
<code><a href="KernSmooth.html#topic+bkde">bkde</a></code> for details. If <code>NULL</code>,
it will be computed for you but will most likely not yield optimal
results.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_range.x">range.x</code></td>
<td>
<p>vector containing the minimum and maximum values of x at which
to compute the estimate. see <code><a href="KernSmooth.html#topic+bkde">bkde</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_geom">geom</code>, <code id="geom_bkde_+3A_stat">stat</code></td>
<td>
<p>Use to override the default connection between
<code>geom_bkde</code> and <code>stat_bkde</code>.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_kernel">kernel</code></td>
<td>
<p>character string which determines the smoothing kernel. see
<code><a href="KernSmooth.html#topic+bkde">bkde</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_canonical">canonical</code></td>
<td>
<p>logical flag: if TRUE, canonically scaled kernels are used.
see <code><a href="KernSmooth.html#topic+bkde">bkde</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_gridsize">gridsize</code></td>
<td>
<p>the number of equally spaced points at which to estimate the
density. see <code><a href="KernSmooth.html#topic+bkde">bkde</a></code> for details.</p>
</td></tr>
<tr><td><code id="geom_bkde_+3A_truncate">truncate</code></td>
<td>
<p>logical flag: if TRUE, data with x values outside the range
specified by range.x are ignored. see <code><a href="KernSmooth.html#topic+bkde">bkde</a></code>
for details</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>geom_bkde()</code>:
</p>
<p><img src="../help/figures/geombkde01.png" width="100%" alt="Figure: geombkde01.png" />

</p>



<h3>Aesthetics</h3>

<p><code>geom_bkde</code> understands the following aesthetics (required aesthetics
are in bold):
</p>

<ul>
<li> <p><strong><code>x</code></strong>
</p>
</li>
<li> <p><strong><code>y</code></strong>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>color</code>
</p>
</li>
<li> <p><code>fill</code>
</p>
</li>
<li> <p><code>linetype</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li></ul>



<h3>Computed variables</h3>


<dl>
<dt>density</dt><dd><p>density estimate</p>
</dd>
<dt>count</dt><dd><p>density * number of points - useful for stacked density
plots</p>
</dd>
<dt>scaled</dt><dd><p>density estimate, scaled to maximum of 1</p>
</dd>
</dl>



<h3>See Also</h3>

<p>See <code><a href="ggplot2.html#topic+geom_histogram">geom_histogram</a></code>, <code><a href="ggplot2.html#topic+geom_freqpoly">geom_freqpoly</a></code> for
other methods of displaying continuous distribution.
See <code><a href="ggplot2.html#topic+geom_violin">geom_violin</a></code> for a compact density display.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(geyser, package="MASS")

ggplot(geyser, aes(x=duration)) +
  stat_bkde(alpha=1/2)

ggplot(geyser, aes(x=duration)) +
  geom_bkde(alpha=1/2)

ggplot(geyser, aes(x=duration)) +
 stat_bkde(bandwidth=0.25)

ggplot(geyser, aes(x=duration)) +
  geom_bkde(bandwidth=0.25)
</code></pre>

<hr>
<h2 id='geom_bkde2d'>Contours from a 2d density estimate.</h2><span id='topic+geom_bkde2d'></span><span id='topic+stat_bkde2d'></span>

<h3>Description</h3>

<p>Contours from a 2d density estimate.
</p>
<p>Perform a 2D kernel density estimation using <code>bkde2D</code> and display the
results with contours. This can be useful for dealing with overplotting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_bkde2d(mapping = NULL, data = NULL, stat = "bkde2d",
  position = "identity", bandwidth = NULL, range.x = NULL,
  lineend = "butt", contour = TRUE, linejoin = "round", linemitre = 1,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE, ...)

stat_bkde2d(mapping = NULL, data = NULL, geom = "density2d",
  position = "identity", contour = TRUE, bandwidth = NULL,
  grid_size = c(51, 51), range.x = NULL, truncate = TRUE, na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_bkde2d_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_bandwidth">bandwidth</code></td>
<td>
<p>the kernel bandwidth smoothing parameter. see
<code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code> for details. If <code>NULL</code>,
it will be computed for you but will most likely not yield optimal
results. see <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_range.x">range.x</code></td>
<td>
<p>a list containing two vectors, where each vector contains the
minimum and maximum values of x at which to compute the estimate for
each direction. see <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_lineend">lineend</code></td>
<td>
<p>Line end style (round, butt, square)</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_contour">contour</code></td>
<td>
<p>If <code>TRUE</code>, contour the results of the 2d density
estimation</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_linejoin">linejoin</code></td>
<td>
<p>Line join style (round, mitre, bevel)</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_linemitre">linemitre</code></td>
<td>
<p>Line mitre limit (number greater than 1)</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_geom">geom</code></td>
<td>
<p>default geom to use with this stat</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_grid_size">grid_size</code></td>
<td>
<p>vector containing the number of equally spaced points in each
direction over which the density is to be estimated. see
<code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code> for details</p>
</td></tr>
<tr><td><code id="geom_bkde2d_+3A_truncate">truncate</code></td>
<td>
<p>logical flag: if TRUE, data with x values outside the range
specified by range.x are ignored. see <code><a href="KernSmooth.html#topic+bkde2D">bkde2D</a></code>
for details</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>geom_bkde2d()</code>:
</p>
<p><img src="../help/figures/geombkde2d01.png" width="100%" alt="Figure: geombkde2d01.png" />

</p>



<h3>Computed variables</h3>

<p>Same as <code><a href="ggplot2.html#topic+stat_contour">stat_contour</a></code>
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_contour">geom_contour</a></code> for contour drawing geom,
<code><a href="ggplot2.html#topic+stat_sum">stat_sum</a></code> for another way of dealing with overplotting
</p>


<h3>Examples</h3>

<pre><code class='language-R'>m &lt;- ggplot(faithful, aes(x = eruptions, y = waiting)) +
       geom_point() +
       xlim(0.5, 6) +
       ylim(40, 110)

m + geom_bkde2d(bandwidth=c(0.5, 4))

m + stat_bkde2d(bandwidth=c(0.5, 4), aes(fill = ..level..), geom = "polygon")

# If you map an aesthetic to a categorical variable, you will get a
# set of contours for each value of that variable
set.seed(4393)
dsmall &lt;- diamonds[sample(nrow(diamonds), 1000), ]
d &lt;- ggplot(dsmall, aes(x, y)) +
       geom_bkde2d(bandwidth=c(0.5, 0.5), aes(colour = cut))
d

# If we turn contouring off, we can use use geoms like tiles:
d + stat_bkde2d(bandwidth=c(0.5, 0.5), geom = "raster",
                aes(fill = ..density..), contour = FALSE)

# Or points:
d + stat_bkde2d(bandwidth=c(0.5, 0.5), geom = "point",
                aes(size = ..density..),  contour = FALSE)
</code></pre>

<hr>
<h2 id='geom_cartogram'>Map polygons layer enabling the display of show statistical information</h2><span id='topic+geom_cartogram'></span>

<h3>Description</h3>

<p>This replicates the old behaviour of <code>geom_map()</code>, enabling specifying of
<code>x</code> and <code>y</code> aesthetics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_cartogram(mapping = NULL, data = NULL, stat = "identity", ..., map,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_cartogram_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_map">map</code></td>
<td>
<p>Data frame that contains the map coordinates.  This will
typically be created using <code><a href="ggplot2.html#topic+fortify">fortify</a></code> on a spatial object.
It must contain columns <code>x</code>, <code>long</code> or <code>longitude</code>,
<code>y</code>, <code>lat</code> or <code>latitude</code> and <code>region</code> or <code>id</code>.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_cartogram_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
</table>


<h3>Aesthetics</h3>

<p><code>geom_cartogram</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><code>map_id</code>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>colour</code>
</p>
</li>
<li> <p><code>fill</code>
</p>
</li>
<li> <p><code>group</code>
</p>
</li>
<li> <p><code>linetype</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li>
<li> <p><code>x</code>
</p>
</li>
<li> <p><code>y</code>
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# When using geom_polygon, you will typically need two data frames:
# one contains the coordinates of each polygon (positions),  and the
# other the values associated with each polygon (values).  An id
# variable links the two together

ids &lt;- factor(c("1.1", "2.1", "1.2", "2.2", "1.3", "2.3"))

values &lt;- data.frame(
  id = ids,
  value = c(3, 3.1, 3.1, 3.2, 3.15, 3.5)
)

positions &lt;- data.frame(
  id = rep(ids, each = 4),
  x = c(2, 1, 1.1, 2.2, 1, 0, 0.3, 1.1, 2.2, 1.1, 1.2, 2.5, 1.1, 0.3,
  0.5, 1.2, 2.5, 1.2, 1.3, 2.7, 1.2, 0.5, 0.6, 1.3),
  y = c(-0.5, 0, 1, 0.5, 0, 0.5, 1.5, 1, 0.5, 1, 2.1, 1.7, 1, 1.5,
  2.2, 2.1, 1.7, 2.1, 3.2, 2.8, 2.1, 2.2, 3.3, 3.2)
)

ggplot() +
  geom_cartogram(aes(x, y, map_id = id), map = positions, data=positions)

ggplot() +
  geom_cartogram(aes(x, y, map_id = id), map = positions, data=positions) +
  geom_cartogram(data=values, map=positions, aes(fill = value, map_id=id))

ggplot() +
  geom_cartogram(aes(x, y, map_id = id), map = positions, data=positions) +
  geom_cartogram(data=values, map=positions, aes(fill = value, map_id=id)) +
  ylim(0, 3)

# Better example
crimes &lt;- data.frame(state = tolower(rownames(USArrests)), USArrests)
crimesm &lt;- reshape2::melt(crimes, id = 1)

if (require(maps)) {

  states_map &lt;- map_data("state")

  ggplot() +
    geom_cartogram(aes(long, lat, map_id = region), map = states_map, data=states_map) +
    geom_cartogram(aes(fill = Murder, map_id = state), map=states_map, data=crimes)

  last_plot() + coord_map("polyconic")

  ggplot() +
    geom_cartogram(aes(long, lat, map_id=region), map = states_map, data=states_map) +
    geom_cartogram(aes(fill = value, map_id=state), map = states_map, data=crimesm) +
    coord_map("polyconic") +
    facet_wrap( ~ variable)
}

## End(Not run)
</code></pre>

<hr>
<h2 id='geom_dumbbell'>Dumbell charts</h2><span id='topic+geom_dumbbell'></span>

<h3>Description</h3>

<p>The dumbbell geom is used to create dumbbell charts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_dumbbell(mapping = NULL, data = NULL, ..., colour_x = NULL,
  size_x = NULL, colour_xend = NULL, size_xend = NULL,
  dot_guide = FALSE, dot_guide_size = NULL, dot_guide_colour = NULL,
  na.rm = FALSE, show.legend = NA, inherit.aes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_dumbbell_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_colour_x">colour_x</code></td>
<td>
<p>the colour of the start point</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_size_x">size_x</code></td>
<td>
<p>the size of the start point</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_colour_xend">colour_xend</code></td>
<td>
<p>the colour of the end point</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_size_xend">size_xend</code></td>
<td>
<p>the size of the end point</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_dot_guide">dot_guide</code></td>
<td>
<p>if <code>TRUE</code>, a leading dotted line will be placed before the left-most dumbbell point</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_dot_guide_size">dot_guide_size</code>, <code id="geom_dumbbell_+3A_dot_guide_colour">dot_guide_colour</code></td>
<td>
<p>singe-value aesthetics for <code>dot_guide</code></p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code> (the default), removes missing values with
a warning.  If <code>TRUE</code> silently removes missing values.</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_dumbbell_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Dumbbell dot plots — dot plots with two or more series of data — are an
alternative to the clustered bar chart or slope graph.
</p>


<h3>Aesthetics</h3>

<p><code>geom_segment</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><code><strong>x</strong></code>
</p>
</li>
<li> <p><code><strong>y</strong></code>
</p>
</li>
<li> <p><code><strong>xend</strong></code>
</p>
</li>
<li> <p><code><strong>yend</strong></code>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>colour</code>
</p>
</li>
<li> <p><code>group</code>
</p>
</li>
<li> <p><code>linetype</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li></ul>




<h3>Examples</h3>

<pre><code class='language-R'>library(ggplot2)

df &lt;- data.frame(trt=LETTERS[1:5], l=c(20, 40, 10, 30, 50), r=c(70, 50, 30, 60, 80))

ggplot(df, aes(y=trt, x=l, xend=r)) +
  geom_dumbbell(size=3, color="#e3e2e1",
                colour_x = "#5b8124", colour_xend = "#bad744",
                dot_guide=TRUE, dot_guide_size=0.25) +
  labs(x=NULL, y=NULL, title="ggplot2 geom_dumbbell with dot guide") +
  theme_minimal() +
  theme(panel.grid.major.x=element_line(size=0.05))
</code></pre>

<hr>
<h2 id='geom_encircle'>Automatically enclose points in a polygon</h2><span id='topic+geom_encircle'></span>

<h3>Description</h3>

<p>Automatically enclose points in a polygon
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_encircle(mapping = NULL, data = NULL, stat = "identity",
  position = "identity", na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_encircle_+3A_mapping">mapping</code></td>
<td>
<p>mapping</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_data">data</code></td>
<td>
<p>data</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_stat">stat</code></td>
<td>
<p>stat</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_position">position</code></td>
<td>
<p>position</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_na.rm">na.rm</code></td>
<td>
<p>na.rm</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_show.legend">show.legend</code></td>
<td>
<p>show.legend</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>inherit.aes</p>
</td></tr>
<tr><td><code id="geom_encircle_+3A_...">...</code></td>
<td>
<p>dots</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>geom_encircle()</code>:
</p>
<p><img src="../help/figures/geomencircle01.png" width="100%" alt="Figure: geomencircle01.png" />

</p>



<h3>Value</h3>

<p>adds a circle around the specified points
</p>


<h3>Author(s)</h3>

<p>Ben Bolker
</p>


<h3>Examples</h3>

<pre><code class='language-R'>d &lt;- data.frame(x=c(1,1,2),y=c(1,2,2)*100)

gg &lt;- ggplot(d,aes(x,y))
gg &lt;- gg + scale_x_continuous(expand=c(0.5,1))
gg &lt;- gg + scale_y_continuous(expand=c(0.5,1))

gg + geom_encircle(s_shape=1, expand=0) + geom_point()

gg + geom_encircle(s_shape=1, expand=0.1, colour="red") + geom_point()

gg + geom_encircle(s_shape=0.5, expand=0.1, colour="purple") + geom_point()

gg + geom_encircle(data=subset(d, x==1), colour="blue", spread=0.02) +
  geom_point()

gg +geom_encircle(data=subset(d, x==2), colour="cyan", spread=0.04) +
  geom_point()

gg &lt;- ggplot(mpg, aes(displ, hwy))
gg + geom_encircle(data=subset(mpg, hwy&gt;40)) + geom_point()
gg + geom_encircle(aes(group=manufacturer)) + geom_point()
gg + geom_encircle(aes(group=manufacturer,fill=manufacturer),alpha=0.4)+
       geom_point()
gg + geom_encircle(aes(group=manufacturer,colour=manufacturer))+
       geom_point()

ss &lt;- subset(mpg,hwy&gt;31 &amp; displ&lt;2)

gg + geom_encircle(data=ss, colour="blue", s_shape=0.9, expand=0.07) +
  geom_point() + geom_point(data=ss, colour="blue")
</code></pre>

<hr>
<h2 id='geom_lollipop'>Lollipop charts</h2><span id='topic+geom_lollipop'></span>

<h3>Description</h3>

<p>The lollipop geom is used to create lollipop charts.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_lollipop(mapping = NULL, data = NULL, ..., horizontal = FALSE,
  point.colour = NULL, point.size = NULL, na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_lollipop_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_horizontal">horizontal</code></td>
<td>
<p><code>horizontal</code> is <code>FALSE</code> (the default), the function
will draw the lollipops up from the X axis (i.e. it will set <code>xend</code>
to <code>x</code> &amp; <code>yend</code> to <code>0</code>). If <code>TRUE</code>, it wiill set
<code>yend</code> to <code>y</code> &amp; <code>xend</code> to <code>0</code>). Make sure you map the
<code>x</code> &amp; <code>y</code> aesthetics accordingly. This parameter helps avoid
the need for <code>coord_flip()</code>.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_point.colour">point.colour</code></td>
<td>
<p>the colour of the point</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_point.size">point.size</code></td>
<td>
<p>the size of the point</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code> (the default), removes missing values with
a warning.  If <code>TRUE</code> silently removes missing values.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_lollipop_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Lollipop charts are the creation of Andy Cotgreave going back to 2011. They
are a combination of a thin segment, starting at with a dot at the top and are a
suitable alternative to or replacement for bar charts.
</p>
<p>Use the <code>horizontal</code> parameter to abate the need for <code>coord_flip()</code>
(see the <code>Arguments</code> section for details).
</p>

<p>A sample of the output from <code>geom_lollipop()</code>:
</p>
<p><img src="../help/figures/geomlollipop01.png" width="100%" alt="Figure: geomlollipop01.png" />

</p>



<h3>Aesthetics</h3>

<p><code>geom_point</code> understands the following aesthetics (required aesthetics are in bold):
</p>

<ul>
<li> <p><code><strong>x</strong></code>
</p>
</li>
<li> <p><code><strong>y</strong></code>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>colour</code>
</p>
</li>
<li> <p><code>fill</code>
</p>
</li>
<li> <p><code>group</code>
</p>
</li>
<li> <p><code>shape</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li>
<li> <p><code>stroke</code>
</p>
</li></ul>




<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- data.frame(trt=LETTERS[1:10],
                 value=seq(100, 10, by=-10))

ggplot(df, aes(trt, value)) + geom_lollipop()

ggplot(df, aes(value, trt)) + geom_lollipop(horizontal=TRUE)
</code></pre>

<hr>
<h2 id='geom_stateface'>Use ProPublica's StateFace font in ggplot2 plots</h2><span id='topic+geom_stateface'></span>

<h3>Description</h3>

<p>The <code>label</code> parameter can be either a 2-letter state abbreviation
or a full state name. <code>geom_stateface()</code> will take care of the
translation to StateFace font glyph characters.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_stateface(mapping = NULL, data = NULL, stat = "identity",
  position = "identity", ..., parse = FALSE, nudge_x = 0, nudge_y = 0,
  check_overlap = FALSE, na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_stateface_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_stat">stat</code></td>
<td>
<p>The statistical transformation to use on the data for this
layer, as a string.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_parse">parse</code></td>
<td>
<p>If TRUE, the labels will be parsed into expressions and
displayed as described in ?plotmath</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_nudge_x">nudge_x</code>, <code id="geom_stateface_+3A_nudge_y">nudge_y</code></td>
<td>
<p>Horizontal and vertical adjustment to nudge l
abels by. Useful for offsetting text from points, particularly
on discrete scales.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_check_overlap">check_overlap</code></td>
<td>
<p>If <code>TRUE</code>, text that overlaps previous text in the
same layer will not be plotted.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_stateface_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The package will also take care of loading the StateFace font for
PDF and other devices, but to use it with the on-screen ggplot2
device, you'll need to install the font on your system.
</p>
<p><code>ggalt</code> ships with a copy of the StateFace TTF font. You can
run <code>show_stateface()</code> to get the filesystem location and then
load the font manually from there.
</p>

<p>A sample of the output from <code>geom_stateface()</code>:
</p>
<p><img src="../help/figures/geomstateface01.png" width="100%" alt="Figure: geomstateface01.png" />

</p>



<h3>See Also</h3>

<p>Other StateFace operations: <code><a href="#topic+load_stateface">load_stateface</a></code>,
<code><a href="#topic+show_stateface">show_stateface</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ggplot2)
library(ggalt)

# Run show_stateface() to see the location of the TTF StateFace font
# You need to install it for it to work

set.seed(1492)
dat &lt;- data.frame(state=state.abb,
                  x=sample(100, 50),
                  y=sample(100, 50),
                  col=sample(c("#b2182b", "#2166ac"), 50, replace=TRUE),
                  sz=sample(6:15, 50, replace=TRUE),
                  stringsAsFactors=FALSE)
gg &lt;- ggplot(dat, aes(x=x, y=y))
gg &lt;- gg + geom_stateface(aes(label=state, color=col, size=sz))
gg &lt;- gg + scale_color_identity()
gg &lt;- gg + scale_size_identity()
gg

## End(Not run)
</code></pre>

<hr>
<h2 id='geom_xspline'>Connect control points/observations with an X-spline</h2><span id='topic+geom_xspline'></span><span id='topic+stat_xspline'></span>

<h3>Description</h3>

<p>Draw an X-spline, a curve drawn relative to control points/observations.
Patterned after <code>geom_line</code> in that it orders the points by <code>x</code>
first before computing the splines.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_xspline(mapping = NULL, data = NULL, stat = "xspline",
  position = "identity", na.rm = TRUE, show.legend = NA,
  inherit.aes = TRUE, spline_shape = -0.25, open = TRUE,
  rep_ends = TRUE, ...)

stat_xspline(mapping = NULL, data = NULL, geom = "line",
  position = "identity", na.rm = TRUE, show.legend = NA,
  inherit.aes = TRUE, spline_shape = -0.25, open = TRUE,
  rep_ends = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_xspline_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_spline_shape">spline_shape</code></td>
<td>
<p>A numeric vector of values between -1 and 1, which
control the shape of the spline relative to the control points.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_open">open</code></td>
<td>
<p>A logical value indicating whether the spline is an open or a
closed shape.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_rep_ends">rep_ends</code></td>
<td>
<p>For open X-splines, a logical value indicating whether the
first and last control points should be replicated for drawing the
curve. Ignored for closed X-splines.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
<tr><td><code id="geom_xspline_+3A_geom">geom</code>, <code id="geom_xspline_+3A_stat">stat</code></td>
<td>
<p>Use to override the default connection between
<code>geom_xspline</code> and <code>stat_xspline</code>.</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>geom_xspline()</code>:
</p>
<p><img src="../help/figures/geomxspline01.png" width="100%" alt="Figure: geomxspline01.png" />

</p>

<p>An X-spline is a line drawn relative to control points. For each control
point, the line may pass through (interpolate) the control point or it may
only approach (approximate) the control point; the behaviour is determined
by a shape parameter for each control point.
</p>
<p>If the shape parameter is greater than zero, the spline approximates the
control points (and is very similar to a cubic B-spline when the shape is
1). If the shape parameter is less than zero, the spline interpolates the
control points (and is very similar to a Catmull-Rom spline when the shape
is -1). If the shape parameter is 0, the spline forms a sharp corner at that
control point.
</p>
<p>For open X-splines, the start and end control points must have a shape of
0 (and non-zero values are silently converted to zero).
</p>
<p>For open X-splines, by default the start and end control points are
replicated before the curve is drawn. A curve is drawn between (interpolating
or approximating) the second and third of each set of four control points,
so this default behaviour ensures that the resulting curve starts at the
first control point you have specified and ends at the last control point.
The default behaviour can be turned off via the repEnds argument.
</p>


<h3>Aesthetics</h3>

<p><code>geom_xspline</code> understands the following aesthetics (required aesthetics
are in bold):
</p>

<ul>
<li> <p><strong><code>x</code></strong>
</p>
</li>
<li> <p><strong><code>y</code></strong>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>color</code>
</p>
</li>
<li> <p><code>linetype</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li></ul>



<h3>Computed variables</h3>


<ul>
<li><p>x
</p>
</li>
<li><p>y
</p>
</li></ul>



<h3>References</h3>

<p>Blanc, C. and Schlick, C. (1995), &quot;X-splines : A Spline Model
Designed for the End User&quot;, in <em>Proceedings of SIGGRAPH 95</em>,
pp. 377-386. <a href="http://dept-info.labri.fr/~schlick/DOC/sig1.html">http://dept-info.labri.fr/~schlick/DOC/sig1.html</a>
</p>


<h3>See Also</h3>

<p><code><a href="ggplot2.html#topic+geom_line">geom_line</a></code>: Connect observations (x order);
<code><a href="ggplot2.html#topic+geom_path">geom_path</a></code>: Connect observations;
<code><a href="ggplot2.html#topic+geom_polygon">geom_polygon</a></code>: Filled paths (polygons);
<code><a href="ggplot2.html#topic+geom_segment">geom_segment</a></code>: Line segments;
<code><a href="graphics.html#topic+xspline">xspline</a></code>;
<code><a href="grid.html#topic+grid.xspline">grid.xspline</a></code>
</p>
<p>Other xspline implementations: <code><a href="#topic+geom_xspline2">geom_xspline2</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>set.seed(1492)
dat &lt;- data.frame(x=c(1:10, 1:10, 1:10),
                  y=c(sample(15:30, 10), 2*sample(15:30, 10),
                      3*sample(15:30, 10)),
                  group=factor(c(rep(1, 10), rep(2, 10), rep(3, 10)))
)

ggplot(dat, aes(x, y, group=group, color=group)) +
  geom_point() +
  geom_line()

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point() +
  geom_line() +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(spline_shape=-0.4, size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(spline_shape=0.4, size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(spline_shape=1, size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(spline_shape=0, size=0.5)

ggplot(dat, aes(x, y, group=group, color=factor(group))) +
  geom_point(color="black") +
  geom_smooth(se=FALSE, linetype="dashed", size=0.5) +
  geom_xspline(spline_shape=-1, size=0.5)
</code></pre>

<hr>
<h2 id='geom_xspline2'>Alternative implemenation for connecting  control points/observations
with an X-spline</h2><span id='topic+geom_xspline2'></span>

<h3>Description</h3>

<p>Alternative implemenation for connecting  control points/observations
with an X-spline
</p>


<h3>Usage</h3>

<pre><code class='language-R'>geom_xspline2(mapping = NULL, data = NULL, stat = "identity",
  position = "identity", na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="geom_xspline2_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_stat">stat</code></td>
<td>
<p>Use to override the default connection between
<code>geom_xspline</code> and <code>stat_xspline</code>.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="geom_xspline2_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>creates a spline curve
</p>


<h3>Author(s)</h3>

<p>Ben Bolker
</p>


<h3>See Also</h3>

<p>Other xspline implementations: <code><a href="#topic+geom_xspline">geom_xspline</a></code>
</p>

<hr>
<h2 id='GeomCartogram'>Geom Cartogram</h2><span id='topic+GeomCartogram'></span>

<h3>Description</h3>

<p>Geom Cartogram
</p>

<hr>
<h2 id='load_stateface'>Load stateface font</h2><span id='topic+load_stateface'></span>

<h3>Description</h3>

<p>Makes the ProPublica StateFace font available to PDF, PostScript,
et. al. devices.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>load_stateface()
</code></pre>


<h3>See Also</h3>

<p>Other StateFace operations: <code><a href="#topic+geom_stateface">geom_stateface</a></code>,
<code><a href="#topic+show_stateface">show_stateface</a></code>
</p>

<hr>
<h2 id='plotly_helpers'>Plotly helpers</h2><span id='topic+plotly_helpers'></span><span id='topic+to_basic.GeomXspline'></span><span id='topic+to_basic.GeomBkde2d'></span><span id='topic+to_basic.GeomStateface'></span>

<h3>Description</h3>

<p>Helper functions to make it easier to automatically create plotly charts
</p>


<h3>Usage</h3>

<pre><code class='language-R'>to_basic.GeomXspline(data, prestats_data, layout, params, p, ...)

to_basic.GeomBkde2d(data, prestats_data, layout, params, p, ...)

to_basic.GeomStateface(data, prestats_data, layout, params, p, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotly_helpers_+3A_data">data</code>, <code id="plotly_helpers_+3A_prestats_data">prestats_data</code>, <code id="plotly_helpers_+3A_layout">layout</code>, <code id="plotly_helpers_+3A_params">params</code>, <code id="plotly_helpers_+3A_p">p</code>, <code id="plotly_helpers_+3A_...">...</code></td>
<td>
<p>plotly interface parameters</p>
</td></tr>
</table>

<hr>
<h2 id='show_stateface'>Show location of StateFace font</h2><span id='topic+show_stateface'></span>

<h3>Description</h3>

<p>Displays the path to the StateFace font. For the font to work
in the on-screen plot device for ggplot2, you need to install
the font on your system
</p>


<h3>Usage</h3>

<pre><code class='language-R'>show_stateface()
</code></pre>


<h3>See Also</h3>

<p>Other StateFace operations: <code><a href="#topic+geom_stateface">geom_stateface</a></code>,
<code><a href="#topic+load_stateface">load_stateface</a></code>
</p>

<hr>
<h2 id='stat_ash'>Compute and display a univariate averaged shifted histogram (polynomial kernel)</h2><span id='topic+stat_ash'></span>

<h3>Description</h3>

<p>See <code><a href="ash.html#topic+bin1">bin1</a></code> &amp; <code><a href="ash.html#topic+ash1">ash1</a></code> for more information.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_ash(mapping = NULL, data = NULL, geom = "area", position = "stack",
  ab = NULL, nbin = 50, m = 5, kopt = c(2, 2), na.rm = FALSE,
  show.legend = NA, inherit.aes = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_ash_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_geom">geom</code></td>
<td>
<p>Use to override the default Geom</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_ab">ab</code></td>
<td>
<p>half-open interval for bins <em>[a,b)</em>. If no value is specified,
the range of x is stretched by <code>5%</code> at each end and used the
interval.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_nbin">nbin</code></td>
<td>
<p>number of bins desired. Default <code>50</code>.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_m">m</code></td>
<td>
<p>integer smoothing parameter; Default <code>5</code>.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_kopt">kopt</code></td>
<td>
<p>vector of length 2 specifying the kernel, which is proportional
to <em>( 1 - abs(i/m)^kopt(1) )i^kopt(2)</em>; (2,2)=biweight (default);
(0,0)=uniform; (1,0)=triangle; (2,1)=Epanechnikov; (2,3)=triweight.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="stat_ash_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
</table>


<h3>Details</h3>


<p>A sample of the output from <code>stat_ash()</code>:
</p>
<p><img src="../help/figures/statash01.png" width="100%" alt="Figure: statash01.png" />

</p>



<h3>Aesthetics</h3>

<p><code>geom_ash</code> understands the following aesthetics (required aesthetics
are in bold):
</p>

<ul>
<li> <p><strong><code>x</code></strong>
</p>
</li>
<li> <p><code>alpha</code>
</p>
</li>
<li> <p><code>color</code>
</p>
</li>
<li> <p><code>fill</code>
</p>
</li>
<li> <p><code>linetype</code>
</p>
</li>
<li> <p><code>size</code>
</p>
</li></ul>



<h3>Computed variables</h3>


<dl>
<dt><code>density</code></dt><dd><p>ash density estimate</p>
</dd>
</dl>



<h3>References</h3>

<p>David Scott (1992), <em>&quot;Multivariate Density Estimation,&quot;</em>
John Wiley, (chapter 5 in particular).<br />
<br />
B. W. Silverman (1986), <em>&quot;Density Estimation for Statistics
and Data Analysis,&quot;</em> Chapman &amp; Hall.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># compare
library(gridExtra)
set.seed(1492)
dat &lt;- data.frame(x=rnorm(100))
grid.arrange(ggplot(dat, aes(x)) + stat_ash(),
             ggplot(dat, aes(x)) + stat_bkde(),
             ggplot(dat, aes(x)) + stat_density(),
             nrow=3)

cols &lt;- RColorBrewer::brewer.pal(3, "Dark2")
ggplot(dat, aes(x)) +
  stat_ash(alpha=1/2, fill=cols[3]) +
  stat_bkde(alpha=1/2, fill=cols[2]) +
  stat_density(alpha=1/2, fill=cols[1]) +
  geom_rug() +
  labs(x=NULL, y="density/estimate") +
  scale_x_continuous(expand=c(0,0)) +
  theme_bw() +
  theme(panel.grid=element_blank()) +
  theme(panel.border=element_blank())
</code></pre>

<hr>
<h2 id='stat_stepribbon'>Step ribbon statistic</h2><span id='topic+stat_stepribbon'></span>

<h3>Description</h3>

<p>Provides stairstep values for ribbon plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>stat_stepribbon(mapping = NULL, data = NULL, geom = "ribbon",
  position = "identity", na.rm = FALSE, show.legend = NA,
  inherit.aes = TRUE, direction = "hv", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="stat_stepribbon_+3A_mapping">mapping</code></td>
<td>
<p>Set of aesthetic mappings created by <code><a href="ggplot2.html#topic+aes">aes</a></code> or
<code><a href="ggplot2.html#topic+aes_">aes_</a></code>. If specified and <code>inherit.aes = TRUE</code> (the
default), it is combined with the default mapping at the top level of the
plot. You must supply <code>mapping</code> if there is no plot mapping.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_data">data</code></td>
<td>
<p>The data to be displayed in this layer. There are three
options:
</p>
<p>If <code>NULL</code>, the default, the data is inherited from the plot
data as specified in the call to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>.
</p>
<p>A <code>data.frame</code>, or other object, will override the plot
data. All objects will be fortified to produce a data frame. See
<code><a href="ggplot2.html#topic+fortify">fortify</a></code> for which variables will be created.
</p>
<p>A <code>function</code> will be called with a single argument,
the plot data. The return value must be a <code>data.frame.</code>, and
will be used as the layer data.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_geom">geom</code></td>
<td>
<p>which geom to use; defaults to &quot;<code>ribbon</code>&quot;</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_position">position</code></td>
<td>
<p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_na.rm">na.rm</code></td>
<td>
<p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_show.legend">show.legend</code></td>
<td>
<p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_inherit.aes">inherit.aes</code></td>
<td>
<p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="ggplot2.html#topic+borders">borders</a></code>.</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_direction">direction</code></td>
<td>
<p><code>hv</code> for horizontal-veritcal steps, 'vh&ldquo; for
vertical-horizontal steps</p>
</td></tr>
<tr><td><code id="stat_stepribbon_+3A_...">...</code></td>
<td>
<p>other arguments passed on to <code><a href="ggplot2.html#topic+layer">layer</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>color = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p>
</td></tr>
</table>


<h3>References</h3>

<p><a href="https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs">https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/9cFWHaH1CPs</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 1:10
df &lt;- data.frame(x=x, y=x+10, ymin=x+7, ymax=x+12)

gg &lt;- ggplot(df, aes(x, y))
gg &lt;- gg + geom_ribbon(aes(ymin=ymin, ymax=ymax),
                       stat="stepribbon", fill="#b2b2b2")
gg &lt;- gg + geom_step(color="#2b2b2b")
gg

gg &lt;- ggplot(df, aes(x, y))
gg &lt;- gg + geom_ribbon(aes(ymin=ymin, ymax=ymax),
                       stat="stepribbon", fill="#b2b2b2",
                       direction="hv")
gg &lt;- gg + geom_step(color="#2b2b2b")
gg
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
