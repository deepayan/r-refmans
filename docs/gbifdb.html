<!DOCTYPE html><html lang="en-US"><head><title>Help for package gbifdb</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {gbifdb}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#gbifdb-package'><p>gbifdb: High Performance Interface to 'GBIF'</p></a></li>
<li><a href='#gbif_dir'><p>Default storage location</p></a></li>
<li><a href='#gbif_download'><p>Download GBIF data using minioclient</p></a></li>
<li><a href='#gbif_example_data'><p>Return a path to the directory containing GBIF example parquet data</p></a></li>
<li><a href='#gbif_local'><p>Local connection to a downloaded GBIF Parquet database</p></a></li>
<li><a href='#gbif_remote'><p>gbif remote</p></a></li>
<li><a href='#gbif_version'><p>Get the latest gbif version string</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>1.0.0</td>
</tr>
<tr>
<td>Title:</td>
<td>High Performance Interface to 'GBIF'</td>
</tr>
<tr>
<td>Description:</td>
<td>A high performance interface to the Global Biodiversity
  Information Facility, 'GBIF'.  In contrast to 'rgbif', which can
  access small subsets of 'GBIF' data through web-based queries to
  a central server, 'gbifdb' provides enhanced performance for R users
  performing large-scale analyses on servers and cloud computing
  providers, providing full support for arbitrary 'SQL' or 'dplyr'
  operations on the complete 'GBIF' data tables (now over 1 billion
  records, and over a terabyte in size). 'gbifdb' accesses a copy
  of the 'GBIF' data in 'parquet' format, which is already readily
  available in commercial computing clouds such as the Amazon Open
  Data portal and the Microsoft Planetary Computer, or can be 
  accessed directly without downloading, or downloaded
  to any server with suitable bandwidth and storage space.
  The high-performance techniques for local and remote access 
  are described in <a href="https://duckdb.org/why_duckdb">https://duckdb.org/why_duckdb</a>
  and <a href="https://arrow.apache.org/docs/r/articles/fs.html">https://arrow.apache.org/docs/r/articles/fs.html</a> respectively.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>true</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>arrow (&ge; 8.0.0), dplyr, duckdbfs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling, dbplyr, testthat (&ge; 3.0.0), covr, knitr,
rmarkdown, minioclient</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://docs.ropensci.org/gbifdb/">https://docs.ropensci.org/gbifdb/</a>,
<a href="https://github.com/ropensci/gbifdb">https://github.com/ropensci/gbifdb</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ropensci/gbifdb">https://github.com/ropensci/gbifdb</a></td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-10-19 19:47:13 UTC; cboettig</td>
</tr>
<tr>
<td>Author:</td>
<td>Carl Boettiger <a href="https://orcid.org/0000-0002-1642-628X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Carl Boettiger &lt;cboettig@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-10-19 20:30:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='gbifdb-package'>gbifdb: High Performance Interface to 'GBIF'</h2><span id='topic+gbifdb'></span><span id='topic+gbifdb-package'></span>

<h3>Description</h3>

<p>A high performance interface to the Global Biodiversity Information Facility, 'GBIF'. In contrast to 'rgbif', which can access small subsets of 'GBIF' data through web-based queries to a central server, 'gbifdb' provides enhanced performance for R users performing large-scale analyses on servers and cloud computing providers, providing full support for arbitrary 'SQL' or 'dplyr' operations on the complete 'GBIF' data tables (now over 1 billion records, and over a terabyte in size). 'gbifdb' accesses a copy of the 'GBIF' data in 'parquet' format, which is already readily available in commercial computing clouds such as the Amazon Open Data portal and the Microsoft Planetary Computer, or can be accessed directly without downloading, or downloaded to any server with suitable bandwidth and storage space. The high-performance techniques for local and remote access are described in <a href="https://duckdb.org/why_duckdb">https://duckdb.org/why_duckdb</a> and <a href="https://arrow.apache.org/docs/r/articles/fs.html">https://arrow.apache.org/docs/r/articles/fs.html</a> respectively.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Carl Boettiger <a href="mailto:cboettig@gmail.com">cboettig@gmail.com</a> (<a href="https://orcid.org/0000-0002-1642-628X">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://docs.ropensci.org/gbifdb/">https://docs.ropensci.org/gbifdb/</a>
</p>
</li>
<li> <p><a href="https://github.com/ropensci/gbifdb">https://github.com/ropensci/gbifdb</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/ropensci/gbifdb">https://github.com/ropensci/gbifdb</a>
</p>
</li></ul>


<hr>
<h2 id='gbif_dir'>Default storage location</h2><span id='topic+gbif_dir'></span>

<h3>Description</h3>

<p>Default location can be set with the env var GBIF_HOME,
otherwise will use the default provided by <code><a href="tools.html#topic+userdir">tools::R_user_dir()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_dir()
</code></pre>


<h3>Value</h3>

<p>path to the gbif home directory directory
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gbif_dir()
</code></pre>

<hr>
<h2 id='gbif_download'>Download GBIF data using minioclient</h2><span id='topic+gbif_download'></span>

<h3>Description</h3>

<p>Sync a local directory with selected release of the AWS copy of GBIF
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_download(
  version = gbif_version(),
  dir = gbif_dir(),
  bucket = gbif_default_bucket(),
  region = ""
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbif_download_+3A_version">version</code></td>
<td>
<p>Release date (YYYY-MM-DD) which should be synced. Will
detect latest version by default.</p>
</td></tr>
<tr><td><code id="gbif_download_+3A_dir">dir</code></td>
<td>
<p>path to local directory where parquet files should be stored.
Fine to leave at default, see <code><a href="#topic+gbif_dir">gbif_dir()</a></code>.</p>
</td></tr>
<tr><td><code id="gbif_download_+3A_bucket">bucket</code></td>
<td>
<p>Name of the regional S3 bucket desired.
Default is &quot;gbif-open-data-us-east-1&quot;. Select a bucket closer to your
compute location for improved performance, e.g. European researchers may
prefer &quot;gbif-open-data-eu-central-1&quot; etc.</p>
</td></tr>
<tr><td><code id="gbif_download_+3A_region">region</code></td>
<td>
<p>bucket region (usually ignored? Just set the bucket appropriately)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sync parquet files from GBIF public data catalog,
https://registry.opendata.aws/gbif/.
</p>
<p>Note that data can also be found on the Microsoft Cloud,
https://planetarycomputer.microsoft.com/dataset/gbif
</p>
<p>Also, some users may prefer to download this data using an alternative
interface or work on a cloud-host machine where data is already available.
Note, these data include all CC0 and CC-BY licensed data in GBIF that have
coordinates which passed automated quality checks,
see <a href="https://github.com/gbif/occurrence/blob/master/aws-public-data.md">https://github.com/gbif/occurrence/blob/master/aws-public-data.md</a>.
</p>


<h3>Value</h3>

<p>logical indicating success or failure.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
gbif_download()

</code></pre>

<hr>
<h2 id='gbif_example_data'>Return a path to the directory containing GBIF example parquet data</h2><span id='topic+gbif_example_data'></span>

<h3>Description</h3>

<p>Return a path to the directory containing GBIF example parquet data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_example_data()
</code></pre>


<h3>Details</h3>

<p>example data is taken from the first 1000 rows of the
2011-11-01 release of the parquet data.
</p>


<h3>Value</h3>

<p>path to the example occurrence data installed with the package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>gbif_example_data()
</code></pre>

<hr>
<h2 id='gbif_local'>Local connection to a downloaded GBIF Parquet database</h2><span id='topic+gbif_local'></span>

<h3>Description</h3>

<p>Local connection to a downloaded GBIF Parquet database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_local(
  dir = gbif_parquet_dir(version = gbif_version(local = TRUE)),
  tblname = "gbif",
  backend = c("arrow", "duckdb"),
  safe = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbif_local_+3A_dir">dir</code></td>
<td>
<p>location of downloaded GBIF parquet files</p>
</td></tr>
<tr><td><code id="gbif_local_+3A_tblname">tblname</code></td>
<td>
<p>name for the database table</p>
</td></tr>
<tr><td><code id="gbif_local_+3A_backend">backend</code></td>
<td>
<p>choose duckdb or arrow.</p>
</td></tr>
<tr><td><code id="gbif_local_+3A_safe">safe</code></td>
<td>
<p>logical. Should we exclude columns <code>mediatype</code>
and <code>issue</code>? (default <code>TRUE</code>).
varchar datatype on these columns substantially slows downs queries.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A summary of this GBIF data, along with column meanings can be found at
<a href="https://github.com/gbif/occurrence/blob/master/aws-public-data.md">https://github.com/gbif/occurrence/blob/master/aws-public-data.md</a>
</p>


<h3>Value</h3>

<p>a remote tibble <code>tbl_sql</code> class object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

gbif &lt;- gbif_local(gbif_example_data())

</code></pre>

<hr>
<h2 id='gbif_remote'>gbif remote</h2><span id='topic+gbif_remote'></span>

<h3>Description</h3>

<p>Connect to GBIF remote directly. Can be much faster than downloading
for one-off use or when using the package from a server in the same region
as the data. See Details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_remote(
  version = gbif_version(),
  bucket = gbif_default_bucket(),
  safe = TRUE,
  unset_aws = getOption("gbif_unset_aws", TRUE),
  endpoint_override = Sys.getenv("AWS_S3_ENDPOINT", "s3.amazonaws.com"),
  backend = c("arrow", "duckdb"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbif_remote_+3A_version">version</code></td>
<td>
<p>GBIF snapshot date</p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_bucket">bucket</code></td>
<td>
<p>GBIF bucket name (including region). A default can also be set using
the option <code>gbif_default_bucket</code>, see <a href="base.html#topic+options">options</a>.</p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_safe">safe</code></td>
<td>
<p>logical, default TRUE.  Should we exclude columns <code>mediatype</code> and <code>issue</code>?
varchar datatype on these columns substantially slows downs queries.</p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_unset_aws">unset_aws</code></td>
<td>
<p>Unset AWS credentials?  GBIF is provided in a public bucket,
so credentials are not needed, but having a AWS_ACCESS_KEY_ID or other AWS
environmental variables set can cause the connection to fail.  By default,
this will unset any set environmental variables for the duration of the R session.
This behavior can also be turned off globally by setting the option
<code>gbif_unset_aws</code> to FALSE (e.g. to use an alternative network endpoint)</p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_endpoint_override">endpoint_override</code></td>
<td>
<p>optional parameter to <code><a href="arrow.html#topic+s3_bucket">arrow::s3_bucket()</a></code></p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_backend">backend</code></td>
<td>
<p>duckdb or arrow</p>
</td></tr>
<tr><td><code id="gbif_remote_+3A_...">...</code></td>
<td>
<p>additional parameters passed to the <code><a href="arrow.html#topic+s3_bucket">arrow::s3_bucket()</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>Query performance is dramatically improved in queries that return only
a subset of columns. Consider using explicit <code>select()</code> commands to return only
the columns you need.
</p>
<p>A summary of this GBIF data, along with column meanings can be found at
<a href="https://github.com/gbif/occurrence/blob/master/aws-public-data.md">https://github.com/gbif/occurrence/blob/master/aws-public-data.md</a>
</p>


<h3>Value</h3>

<p>a remote tibble <code>tbl_sql</code> class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

gbif &lt;- gbif_remote()
gbif()

</code></pre>

<hr>
<h2 id='gbif_version'>Get the latest gbif version string</h2><span id='topic+gbif_version'></span>

<h3>Description</h3>

<p>Can also return latest locally downloaded version, or list all versions
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gbif_version(
  local = FALSE,
  dir = gbif_dir(),
  bucket = gbif_default_bucket(),
  all = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gbif_version_+3A_local">local</code></td>
<td>
<p>Search only local versions? logical, default <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="gbif_version_+3A_dir">dir</code></td>
<td>
<p>local directory (<code><a href="#topic+gbif_dir">gbif_dir()</a></code>)</p>
</td></tr>
<tr><td><code id="gbif_version_+3A_bucket">bucket</code></td>
<td>
<p>Which remote bucket (region) should be checked</p>
</td></tr>
<tr><td><code id="gbif_version_+3A_all">all</code></td>
<td>
<p>show all versions? (logical, default <code>FALSE</code>)</p>
</td></tr>
<tr><td><code id="gbif_version_+3A_...">...</code></td>
<td>
<p>additional arguments to <a href="arrow.html#topic+s3_bucket">arrow::s3_bucket</a></p>
</td></tr>
</table>


<h3>Details</h3>

<p>A default version can be set using option <code>gbif_default_version</code>
</p>


<h3>Value</h3>

<p>latest available gbif version, string
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Latest local version available:
gbif_version(local=TRUE)
## default version
options(gbif_default_version="2021-01-01")
gbif_version()

## Latest online version available:
gbif_version()
## All online versions:
gbif_version(all=TRUE)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
