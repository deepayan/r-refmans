<!DOCTYPE html><html><head><title>Help for package SNSFdatasets</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {SNSFdatasets}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#SNSFdatasets'>
<p>Download Datasets from the Swiss National Science Foundation</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Download Datasets from the Swiss National Science Foundation
(SNF, FNS, SNSF)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-01-31</td>
</tr>
<tr>
<td>Description:</td>
<td>Download and read datasets from the Swiss National
     Science Foundation (SNF, FNS, SNSF; <a href="https://snf.ch">https://snf.ch</a>).  The
     package is lightweight and without dependencies.  Downloaded
     data can optionally be cached, to avoid repeated downloads of
     the same files.  There are also utilities for comparing
     different versions of datasets, i.e. to report added, removed
     and changed entries.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://enricoschumann.net/R/packages/SNSFdatasets/">http://enricoschumann.net/R/packages/SNSFdatasets/</a> ,
<a href="https://git.sr.ht/~enricoschumann/SNSFdatasets">https://git.sr.ht/~enricoschumann/SNSFdatasets</a> ,
<a href="https://github.com/enricoschumann/SNSFdatasets">https://github.com/enricoschumann/SNSFdatasets</a></td>
</tr>
<tr>
<td>LazyLoad:</td>
<td>yes</td>
</tr>
<tr>
<td>ByteCompile:</td>
<td>yes</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-31 17:24:19 UTC; es19</td>
</tr>
<tr>
<td>Author:</td>
<td>Silvia Martens <a href="https://orcid.org/0009-0001-7554-3195"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Enrico Schumann <a href="https://orcid.org/0000-0001-7601-6576"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Enrico Schumann &lt;es@enricoschumann.net&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-31 17:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='SNSFdatasets'>
Download Datasets from the Swiss National Science Foundation
</h2><span id='topic+SNSFdatasets-package'></span><span id='topic+SNSFdatasets'></span><span id='topic+compare_datasets'></span><span id='topic+fetch_datasets'></span><span id='topic+read_dataset'></span>

<h3>Description</h3>


<p>Download datasets from the Swiss National Science Foundation
(<abbr><span class="acronym">SNF</span></abbr>, <abbr><span class="acronym">FNS</span></abbr>, <abbr><span class="acronym">SNSF</span></abbr>) in
<abbr><span class="acronym">CSV</span></abbr> format.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fetch_datasets(dataset,
               dest.dir = NULL,
               detect.dates = TRUE, ...)

compare_datasets(filename.old, filename.new,
                 match.column = "GrantNumber", ...)

read_dataset(filename, detect.dates = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SNSFdatasets_+3A_dataset">dataset</code></td>
<td>

<p>a character vector. When of length greater than one,
datasets are only downloaded, but not read.  Currently
supported are:
</p>

<ul>
<li><p><code>Grant</code>
</p>
</li>
<li><p><code>GrantWithAbstracts</code>
</p>
</li>
<li><p><code>Person</code>
</p>
</li>
<li><p><code>OutputdataScientificPublication</code>
</p>
</li>
<li><p><code>OutputdataUseInspired</code>
</p>
</li>
<li><p><code>OutputdataPublicCommunication</code>
</p>
</li>
<li><p><code>OutputdataCollaboration</code>
</p>
</li>
<li><p><code>OutputdataAcademicEvent</code>
</p>
</li>
<li><p><code>OutputdataAward</code>
</p>
</li>
<li><p><code>OutputdataDataSet</code>
</p>
</li>
<li><p><code>OutputdataKnowledgeTransferEvent</code>
</p>
</li></ul>

</td></tr>
<tr><td><code id="SNSFdatasets_+3A_dest.dir">dest.dir</code></td>
<td>

<p>a directory; if <code>NULL</code>, a <code><a href="base.html#topic+tempdir">tempdir</a></code> is used
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_detect.dates">detect.dates</code></td>
<td>

<p>logical: if <code>TRUE</code>, columns consisting of entries
such as <code>2000-10-31T00:00:00Z</code> are converted to
<code><a href="base.html#topic+Date">Date</a></code>; empty rows in such columns are ignored
and become <code><a href="base.html#topic+NA">NA</a></code>
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_filename.old">filename.old</code></td>
<td>

<p>string: the filename
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_filename.new">filename.new</code></td>
<td>

<p>string: the filename
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_filename">filename</code></td>
<td>

<p>string: the filename
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_match.column">match.column</code></td>
<td>

<p>string: the name of the column to use for matching
entries in old and new file
</p>
</td></tr>
<tr><td><code id="SNSFdatasets_+3A_...">...</code></td>
<td>

<p>arguments to be passed to <code><a href="utils.html#topic+download.file">download.file</a></code> (for
<code>fetch_datasets</code>)
</p>
</td></tr>
</table>


<h3>Details</h3>


<p><code>fetch_datasets</code> downloads datasets in <abbr><span class="acronym">CSV</span></abbr>
format from the <abbr><span class="acronym">SNSF</span></abbr>'s website and stores them,
with a date prefix, in directory <code>dest.dir</code>.  If the
latter is <code>NULL</code>, a temporary directory is used
(through <code><a href="base.html#topic+tempdir">tempdir</a></code>); but much better is to use a
more-persistent storage location.  If a file with today's
date exists in <code>dest.dir</code>, that file is read, and
nothing is downloaded.  If more than one <code>dataset</code> is
specified, those files are downloaded (if not current in
<code>dest.dir</code>) but not read.
</p>
<p>For downloading, function <code><a href="utils.html#topic+download.file">download.file</a></code> is
used.  If it fails, <code>fetch_datasets</code> returns
<code>NULL</code>.  Settings can be passed via ... .  See
<code><a href="utils.html#topic+download.file">download.file</a></code> for options; in particular, see
the hints about <code>timeout</code>.
</p>
<p><code>compare_datasets</code> will match old and new
dataset via the specified <code>match.column</code> and report
</p>

<ul>
<li><p> added lines (in new, but not in old file),
</p>
</li>
<li><p> removed lines (in old, but not in new file), and
</p>
</li>
<li><p> changed lines (in both files, but with differing content).
</p>
</li></ul>

<p><code>read_dataset</code> is a simple wrapper of
<code><a href="utils.html#topic+read.table">read.table</a></code> with appropriate settings.
</p>


<h3>Value</h3>


<p>A <code><a href="base.html#topic+data.frame">data.frame</a></code> for <code>fetch_datasets</code> and
<code>read_dataset</code>. For <code>compare_datasets</code>, a
<code><a href="base.html#topic+list">list</a></code> of three components named <code>added</code>,
<code>removed</code> and <code>changed</code>.
</p>


<h3>Author(s)</h3>

<p>Silvia Martens and Enrico Schumann
</p>


<h3>References</h3>


<p><a href="https://data.snf.ch/datasets">https://data.snf.ch/datasets</a>
</p>


<h3>See Also</h3>


<p><code><a href="utils.html#topic+download.file">download.file</a></code>; <code><a href="base.html#topic+options">options</a></code>
(<code>timeout</code>, in particular)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

## requires internet connection, and file may be large
dataset &lt;- "OutputdataAward"

SNSF.dir  &lt;- tempdir()  ## This is just an example.
                        ## In practice it's much more useful to
                        ## store files in a persistant location,
                        ## such as '~/Downloads/SNSFdatasets'.

data &lt;- fetch_datasets(dataset = dataset, dest.dir = SNSF.dir)

## all award titles
table(data[["Award_Title"]])

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
