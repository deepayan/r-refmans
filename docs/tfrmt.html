<!DOCTYPE html><html><head><title>Help for package tfrmt</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {tfrmt}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#%&gt;%'><p>Pipe operator</p></a></li>
<li><a href='#apply_frmt'><p>Apply formatting</p></a></li>
<li><a href='#as_json'><p>Convert tfrmt elements</p></a></li>
<li><a href='#big_n_structure'><p>Big N Structure</p></a></li>
<li><a href='#body_plan'><p>Table Body Plan</p></a></li>
<li><a href='#cleaned_data_to_gt'><p>Do all the formatting for the GT</p></a></li>
<li><a href='#col_plan'><p>Define the Column Plan &amp; Span Structures</p></a></li>
<li><a href='#col_style_plan'><p>Column Style Plan</p></a></li>
<li><a href='#col_style_structure'><p>Column Style Structure</p></a></li>
<li><a href='#data_ae'><p>Adverse Events Analysis Results Data</p></a></li>
<li><a href='#data_demog'><p>Demography Analysis Results Data</p></a></li>
<li><a href='#data_efficacy'><p>Efficacy Analysis Results Data</p></a></li>
<li><a href='#data_labs'><p>Labs Analysis Results Data</p></a></li>
<li><a href='#display_row_frmts'><p>Display formatting applied to each row</p></a></li>
<li><a href='#display_val_frmts'><p>Display formatted values</p></a></li>
<li><a href='#element_block'><p>Element block</p></a></li>
<li><a href='#element_row_grp_loc'><p>Element Row Group Location</p></a></li>
<li><a href='#footnote_plan'><p>Footnote Plan</p></a></li>
<li><a href='#footnote_structure'><p>Footnote Structure</p></a></li>
<li><a href='#frmt'><p>Table Value Formatting</p></a></li>
<li><a href='#frmt_structure'><p>Format Structure Object</p></a></li>
<li><a href='#is_frmt'><p>Check if input is a frmt</p></a></li>
<li><a href='#json_to_tfrmt'><p>json to tfrmt</p></a></li>
<li><a href='#layer_tfrmt'><p>Layer tfrmt objects together</p></a></li>
<li><a href='#make_mock_data'><p>Make mock data for display shells</p></a></li>
<li><a href='#page_plan'><p>Page Plan</p></a></li>
<li><a href='#page_structure'><p>Page structure</p></a></li>
<li><a href='#param_set'><p>Set custom parameter-level significant digits rounding</p></a></li>
<li><a href='#print_mock_gt'><p>Print mock table to GT</p></a></li>
<li><a href='#print_to_ggplot'><p>Print to ggplot</p></a></li>
<li><a href='#print_to_gt'><p>Print to gt</p></a></li>
<li><a href='#row_grp_plan'><p>Row Group Plan</p></a></li>
<li><a href='#row_grp_structure'><p>Row Group Structure Object</p></a></li>
<li><a href='#tfrmt'><p>Table Format</p></a></li>
<li><a href='#tfrmt_n_pct'><p>N Percent Template</p></a></li>
<li><a href='#tfrmt_sigdig'><p>Create tfrmt object from significant digits spec</p></a></li>
<li><a href='#tfrmt_to_json'><p>Print to JSON</p></a></li>
<li><a href='#update_group'><p>Remap group values in a tfrmt</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Applies Display Metadata to Analysis Results Datasets</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.1</td>
</tr>
<tr>
<td>Description:</td>
<td>Creates a framework to store and apply display metadata to Analysis
    Results Datasets (ARDs). The use of 'tfrmt' allows users to define table 
    format and styling without the data, and later apply the format to the data.</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (&ge; 2)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, testthat (&ge; 3.0.0), knitr, rmarkdown, patchwork,
survival, ggfortify</td>
</tr>
<tr>
<td>Imports:</td>
<td>magrittr, dplyr, purrr, rlang, stringr, stringi, tidyr, gt (&ge;
0.6.0), tidyselect, forcats, tibble, ggplot2, jsonlite, glue</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://GSK-Biostatistics.github.io/tfrmt/">https://GSK-Biostatistics.github.io/tfrmt/</a>,
<a href="https://github.com/GSK-Biostatistics/tfrmt">https://github.com/GSK-Biostatistics/tfrmt</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/GSK-Biostatistics/tfrmt/issues">https://github.com/GSK-Biostatistics/tfrmt/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-03-15 18:54:16 UTC; bkrouse</td>
</tr>
<tr>
<td>Author:</td>
<td>Becca Krouse [aut, cre],
  Christina Fillmore
    <a href="https://orcid.org/0000-0003-0595-2302"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  GlaxoSmithKline Research &amp; Development Limited [cph, fnd],
  Atorus Research LLC [cph, fnd],
  Ellis Hughes <a href="https://orcid.org/0000-0003-0637-4436"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Karima Ahmad <a href="https://orcid.org/0000-0002-8784-1712"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Shannon Haughton [aut]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Becca Krouse &lt;becca.z.krouse@gsk.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-03-15 19:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the magrittr placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the magrittr semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='apply_frmt'>Apply formatting</h2><span id='topic+apply_frmt'></span><span id='topic+apply_frmt.frmt'></span><span id='topic+apply_frmt.frmt_combine'></span><span id='topic+apply_frmt.frmt_when'></span>

<h3>Description</h3>

<p>Apply formatting
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_frmt(frmt_def, .data, value, mock = FALSE, ...)

## S3 method for class 'frmt'
apply_frmt(frmt_def, .data, value, mock = FALSE, ...)

## S3 method for class 'frmt_combine'
apply_frmt(
  frmt_def,
  .data,
  value,
  mock = FALSE,
  param,
  column,
  label,
  group,
  ...
)

## S3 method for class 'frmt_when'
apply_frmt(frmt_def, .data, value, mock = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_frmt_+3A_frmt_def">frmt_def</code></td>
<td>
<p>formatting to be applied</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_.data">.data</code></td>
<td>
<p>data, but only what is getting changed</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_value">value</code></td>
<td>
<p>value symbol should only be one</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_mock">mock</code></td>
<td>
<p>Logical value is this is for a mock or not. By default <code>FALSE</code></p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_...">...</code></td>
<td>
<p>additional arguments for methods</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_param">param</code></td>
<td>
<p>param column as a quosure</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_column">column</code></td>
<td>
<p>column columns as a list of quosures</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_label">label</code></td>
<td>
<p>label column as a quosure</p>
</td></tr>
<tr><td><code id="apply_frmt_+3A_group">group</code></td>
<td>
<p>group column as a list of quosures</p>
</td></tr>
</table>


<h3>Value</h3>

<p>formatted dataset
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(tibble)
library(dplyr)
# Set up data
df &lt;- tibble(x = c(20.12,34.54,12.34))

apply_frmt(
 frmt_def = frmt("XX.X"),
 .data=df,
 value=quo(x))

</code></pre>

<hr>
<h2 id='as_json'>Convert tfrmt elements</h2><span id='topic+as_json'></span>

<h3>Description</h3>

<p>This collection of functions is used to create a json or json ready objects.
While primarily intended for internal use these functions can be used externally
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_json(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_json_+3A_x">x</code></td>
<td>
<p>tfrmt or tfrmt element</p>
</td></tr>
</table>


<h3>Value</h3>

<p>as_json.tfrmt() will return a json object all other methods will
return a list that is cleaned so it can be directly converted to a json
object
</p>

<hr>
<h2 id='big_n_structure'>Big N Structure</h2><span id='topic+big_n_structure'></span>

<h3>Description</h3>

<p>Big N structure allows you to specify which values should become the subject totals (&quot;big N&quot; values)
and how they should be formatted in the table's column labels. Values are specified by providing
the value(s) of the <code>param</code> column for which the values are big N's.
This will remove these from the body of the table and place them into columns
matching the values in the column column(s). The default formatting is <code>N = xx</code>,
on its own line, but that can be changed by providing a different <code>frmt()</code> to
<code>n_frmt</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>big_n_structure(param_val, n_frmt = frmt("\nN = xx"), by_page = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="big_n_structure_+3A_param_val">param_val</code></td>
<td>
<p>row value(s) of the parameter column for which the values
are big n's</p>
</td></tr>
<tr><td><code id="big_n_structure_+3A_n_frmt">n_frmt</code></td>
<td>
<p><code><a href="#topic+frmt">frmt()</a></code> to control the formatting of the big n's</p>
</td></tr>
<tr><td><code id="big_n_structure_+3A_by_page">by_page</code></td>
<td>
<p>Option to include different big Ns for each group-defined set of pages (defined by any variables set to &quot;.default&quot; in the <code>page_plan</code>). Default is <code>FALSE</code>, meaning only the overall Ns are applied</p>
</td></tr>
</table>


<h3>Value</h3>

<p>big_n_structure object
</p>


<h3>See Also</h3>

<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/big_ns.html">Link to related article</a>
</p>

<hr>
<h2 id='body_plan'>Table Body Plan</h2><span id='topic+body_plan'></span>

<h3>Description</h3>

<p>Define the formatting of the body contents of the table through a series of
frmt_structures. Structures get applied in order from bottom up, so the last
added structure is the first applied.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>body_plan(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="body_plan_+3A_...">...</code></td>
<td>
<p>list of frmt_structures defining the body formatting</p>
</td></tr>
</table>


<h3>Value</h3>

<p>body_plan object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+frmt_structure">frmt_structure()</a></code> defines which rows the formats will be applied
to, and <code><a href="#topic+frmt">frmt()</a></code>, <code><a href="#topic+frmt_combine">frmt_combine()</a></code>, and <code><a href="#topic+frmt_when">frmt_when()</a></code> define the format
semantics.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/body_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  tfrmt_spec&lt;- tfrmt(
      title = "Table Title",
      body_plan = body_plan(
        frmt_structure(
          group_val = c("group1"),
          label_val = ".default",
          frmt("XXX")
        )
      )
     )

</code></pre>

<hr>
<h2 id='cleaned_data_to_gt'>Do all the formatting for the GT</h2><span id='topic+cleaned_data_to_gt'></span><span id='topic+cleaned_data_to_gt.list'></span><span id='topic+cleaned_data_to_gt.default'></span>

<h3>Description</h3>

<p>Do all the formatting for the GT
</p>
<p>Apply formatting to a list of tables
</p>
<p>Apply formatting to a single table
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cleaned_data_to_gt(.data, tfrmt, .unicode_ws)

## S3 method for class 'list'
cleaned_data_to_gt(.data, tfrmt, .unicode_ws)

## Default S3 method:
cleaned_data_to_gt(.data, tfrmt, .unicode_ws)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="cleaned_data_to_gt_+3A_.data">.data</code></td>
<td>
<p>cleaned dataset</p>
</td></tr>
<tr><td><code id="cleaned_data_to_gt_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt</p>
</td></tr>
<tr><td><code id="cleaned_data_to_gt_+3A_.unicode_ws">.unicode_ws</code></td>
<td>
<p>Whether to convert white space to unicode in preparation for output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>gt_group object
</p>
<p>GT object
</p>

<hr>
<h2 id='col_plan'>Define the Column Plan &amp; Span Structures</h2><span id='topic+col_plan'></span><span id='topic+span_structure'></span>

<h3>Description</h3>

<p>Using &lt;<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>&gt; expressions and a series
span_structures, define the order of the columns. The selection follows &quot;last
selected&quot; principals, meaning columns are moved to the <em>last</em> selection as
opposed to preserving the first location.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_plan(..., .drop = FALSE)

span_structure(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col_plan_+3A_...">...</code></td>
<td>
<p>For a col_plan and span_structure,
&lt;<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>&gt; arguments, unquoted expressions
separated by commas, and span_structures. span_structures must have the
arguments named to match the name the column in the input data has to identify the correct columns. See the examples</p>
</td></tr>
<tr><td><code id="col_plan_+3A_.drop">.drop</code></td>
<td>
<p>Boolean. Should un-listed columns be dropped from the data.
Defaults to FALSE.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Column Selection</h4>

<p>When col_plan gets applied and is used to create the output table, the
underlying logic sorts out which column specifically is being selected. If a column
is selected twice, the <em>last</em> instance in which the column is selected will be
the location it gets rendered.
</p>
<p>Avoid beginning the <code>col_plan()</code> column selection with a deselection (i.e.
<code>col_plan(-col1)</code>, <code>col_plan(-starts_with("value")))</code>. This will
result in the table preserving all columns not &quot;de-selected&quot; in the
statement, and the order of the columns not changed. It is preferred when
creating the <code>col_plan()</code> to identify all the columns planned on
preserving in the order they are wished to appear, or if
&lt;<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>&gt; arguments - such as
<code><a href="dplyr.html#topic+everything">everything</a></code>- are used, identify the de-selection after
the positive-selection.
</p>
<p>Alternatively, once the gt table is produced, use the
<code><a href="gt.html#topic+cols_hide">cols_hide</a></code> function to remove un-wanted columns.
</p>



<h3>Value</h3>

<p>col_plan object
</p>
<p>span_structure object
</p>


<h3>Images</h3>

<p>Here are some example outputs:
</p>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-span_structure-cropped.jpg" alt ="Example of a dataset being turned into a table with spanning columns" style="width:100%;">



<h3>See Also</h3>

<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/col_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
library(dplyr)

## select col_1 as the first column, remove col_last, then create spanning
## structures that have multiple levels
##
## examples also assume the tfrmt has the column argument set to c(c1, c2, c3)
##
spanning_col_plan_ex &lt;- col_plan(
 col_1,
 -col_last,
 span_structure(
   c1 = "Top Label Level 1",
   c2 = "Second Label Level 1.1",
   c3 = c(col_3, col_4)
 ),
 span_structure(
   c1 = "Top Label Level 1",
   c2 = "Second Label Level 1.2",
   c3 = starts_with("B")
   ),
 span_structure(
   c1 = "Top Label Level 1",
   c3 = col_5
 ),
 span_structure(
   c2 = "Top Label Level 2",
   c3 = c(col_6, col_7)
 )
)

## select my_col_1 as the first column, then
## rename col_2 to new_col_1 and put as the
## second column, then select the rest of the columns
renaming_col_plan_ex &lt;- col_plan(
   my_col_1,
   new_col_1 = col_2,
   everything()
 )

renaming_col_plan_ex2 &lt;- col_plan(
   my_col_1,
   new_col_1 = col_2,
   span_structure(
    c1 = c(`My Favorite span name` = "Top Label Level 1"),
    c3 = c(`the results column` = col_5)
   )
 )

</code></pre>

<hr>
<h2 id='col_style_plan'>Column Style Plan</h2><span id='topic+col_style_plan'></span>

<h3>Description</h3>

<p>Define how the columns of the table body should be aligned, whether left,
right or on a specific character(s).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_style_plan(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col_style_plan_+3A_...">...</code></td>
<td>
<p>series of col_style_structure objects</p>
</td></tr>
</table>


<h3>Value</h3>

<p>col_style_plan object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+col_style_structure">col_style_structure()</a></code> for more information on how to specify how to and which columns to align.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/col_style_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 plan &lt;- col_style_plan(
    col_style_structure(col = "my_var", align = "left", width = 100),
    col_style_structure(col = vars(four), align = "right"),
    col_style_structure(col = vars(two, three), align = c(".", ",", " "))
   )



</code></pre>

<hr>
<h2 id='col_style_structure'>Column Style Structure</h2><span id='topic+col_style_structure'></span>

<h3>Description</h3>

<p>Column Style Structure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>col_style_structure(
  col,
  align = NULL,
  type = c("char", "pos"),
  width = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="col_style_structure_+3A_col">col</code></td>
<td>
<p>Column value to align on from <code>column</code> variable. May be a quoted
or unquoted column name, a tidyselect semantic, or a span_structure.</p>
</td></tr>
<tr><td><code id="col_style_structure_+3A_align">align</code></td>
<td>
<p>Alignment to be applied to column. Defaults to <code>left</code> alignment. See details for acceptable values.</p>
</td></tr>
<tr><td><code id="col_style_structure_+3A_type">type</code></td>
<td>
<p>Type of alignment: &quot;char&quot; or &quot;pos&quot;, for character alignment (default), and positional alignment, respectively. Positional alignment allows for aligning over multiple positions in the column.</p>
</td></tr>
<tr><td><code id="col_style_structure_+3A_width">width</code></td>
<td>
<p>Width to apply to the column in number of characters. Acceptable values include a
numeric value, or a character string of a number.</p>
</td></tr>
<tr><td><code id="col_style_structure_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Supports alignment and width setting of data value columns (values found in the <code>column</code> column). Row group and label columns are left-aligned by default. Acceptable input values for <code>align</code> differ by type = &quot;char&quot; or &quot;pos&quot;:
</p>


<h4>Character alignment (type = &quot;char&quot;):</h4>


<ul>
<li><p> &quot;left&quot; for left alignment
</p>
</li>
<li><p> &quot;right&quot; for right alignment&quot;
</p>
</li>
<li><p> supply a vector of character(s) to align on. If more than
one character is provided, alignment will be based on the first occurrence
of any of the characters. For alignment based on white space, leading white
spaces will be ignored.
</p>
</li></ul>




<h4>Positional alignment (type = &quot;pos&quot;):</h4>

<p>supply a vector of strings covering all formatted cell values, with numeric values represented as x's. These values can be created manually or obtained by utilizing the helper <code>display_val_frmts()</code>. Alignment positions will be represented by vertical bars. For example, with starting values: c(&quot;12.3&quot;, &quot;(5%)&quot;, &quot;2.35 (10.23)&quot;) we can align all of the first sets of decimals and parentheses by providing align = c(&quot;xx|.x&quot;, &quot;||(x%)&quot;, &quot;x|.xx |&quot;)
</p>



<h3>Value</h3>

<p>col_style_structure object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+col_style_plan">col_style_plan()</a></code> for more information on how to combine
col_style_structure()'s together to form a plan.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/col_style_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
 plan &lt;- col_style_plan(
    col_style_structure(col = "my_var",
                        align = c("xx| |(xx%)",
                                  "xx|.x |(xx.x - xx.x)"),
                        type = "pos", width = 100),
    col_style_structure(col = vars(four), align = "right", width = 200),
    col_style_structure(col = vars(two, three), align = c(".", ",", " ")),
    col_style_structure(col = c(two, three), width = 25),
    col_style_structure(col = two, width = 25),
    col_style_structure(col = span_structure(span = value, col = val2),
                        width = 25)
   )

</code></pre>

<hr>
<h2 id='data_ae'>Adverse Events Analysis Results Data</h2><span id='topic+data_ae'></span>

<h3>Description</h3>

<p>A dataset containing the results needed for an AE table. Using the
CDISC pilot data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_ae
</code></pre>


<h3>Format</h3>

<p>A data frame with 2,794 rows and 8 variables:
</p>

<dl>
<dt>AEBODSYS</dt><dd><p>highest level row labels: System Organ Class</p>
</dd>
<dt>AETERM</dt><dd><p>more specific row labels: Preferred Term</p>
</dd>
<dt>col2</dt><dd><p>higher level column names (spanners)</p>
</dd>
<dt>col1</dt><dd><p>lower level column names</p>
</dd>
<dt>param</dt><dd><p>parameter to explain each value</p>
</dd>
<dt>value</dt><dd><p>values to put in a table</p>
</dd>
<dt>ord1</dt><dd><p>controls ordering</p>
</dd>
<dt>ord2</dt><dd><p>more ordering controls</p>
</dd>
</dl>


<hr>
<h2 id='data_demog'>Demography Analysis Results Data</h2><span id='topic+data_demog'></span>

<h3>Description</h3>

<p>A dataset containing the results needed for a demography table. Using the
CDISC pilot data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_demog
</code></pre>


<h3>Format</h3>

<p>A data frame with 386 rows and 7 variables:
</p>

<dl>
<dt>rowlbl1</dt><dd><p>highest level row labels</p>
</dd>
<dt>rowlbl2</dt><dd><p>more specific row labels</p>
</dd>
<dt>param</dt><dd><p>parameter to explain each value</p>
</dd>
<dt>grp</dt><dd><p>grouping column used to distinguish continuous and categorical</p>
</dd>
<dt>ord1</dt><dd><p>controls ordering</p>
</dd>
<dt>ord2</dt><dd><p>more ordering controls</p>
</dd>
<dt>column</dt><dd><p>column names</p>
</dd>
<dt>value</dt><dd><p>values to put in a table</p>
</dd>
</dl>


<hr>
<h2 id='data_efficacy'>Efficacy Analysis Results Data</h2><span id='topic+data_efficacy'></span>

<h3>Description</h3>

<p>A dataset containing the results needed for an Efficacy table. Using the
CDISC pilot data for ADAS-Cog(11).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_efficacy
</code></pre>


<h3>Format</h3>

<p>A data frame with 70 rows and 7 variables:
</p>

<dl>
<dt>group</dt><dd><p>highest level row labels</p>
</dd>
<dt>label</dt><dd><p>more specific row labels</p>
</dd>
<dt>column</dt><dd><p>column names</p>
</dd>
<dt>param</dt><dd><p>parameter to explain each value</p>
</dd>
<dt>value</dt><dd><p>values to put in a table</p>
</dd>
<dt>ord1</dt><dd><p>controls ordering</p>
</dd>
<dt>ord2</dt><dd><p>more ordering controls</p>
</dd>
</dl>


<hr>
<h2 id='data_labs'>Labs Analysis Results Data</h2><span id='topic+data_labs'></span>

<h3>Description</h3>

<p>A dataset containing the results needed for an labs results table. Using the
CDISC pilot data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data_labs
</code></pre>


<h3>Format</h3>

<p>A data frame with 4,950 rows and 7 variables:
</p>

<dl>
<dt>group1</dt><dd><p>highest level row labels: Lab value class</p>
</dd>
<dt>group2</dt><dd><p>more specific row labels: Lab parameter</p>
</dd>
<dt>rowlbl</dt><dd><p>most specific row labels: Study visit</p>
</dd>
<dt>col1</dt><dd><p>higher level column names (spanners)</p>
</dd>
<dt>col2</dt><dd><p>lower level column names</p>
</dd>
<dt>param</dt><dd><p>parameter to explain each value</p>
</dd>
<dt>value</dt><dd><p>values to put in a table</p>
</dd>
<dt>ord1</dt><dd><p>controls ordering</p>
</dd>
<dt>ord2</dt><dd><p>more ordering controls</p>
</dd>
<dt>ord3</dt><dd><p>more ordering controls</p>
</dd>
</dl>


<hr>
<h2 id='display_row_frmts'>Display formatting applied to each row</h2><span id='topic+display_row_frmts'></span>

<h3>Description</h3>

<p>Used when debugging formatting, it is an easy way to allow you to see which
formats are applied to each row in your dataset.
</p>
<p>Used when debugging formatting, it is an easy way to allow you to see which
formats are applied to each row in your dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>display_row_frmts(tfrmt, .data, convert_to_txt = TRUE)

display_row_frmts(tfrmt, .data, convert_to_txt = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="display_row_frmts_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt object to apply to the data</p>
</td></tr>
<tr><td><code id="display_row_frmts_+3A_.data">.data</code></td>
<td>
<p>Data to apply the tfrmt to</p>
</td></tr>
<tr><td><code id="display_row_frmts_+3A_convert_to_txt">convert_to_txt</code></td>
<td>
<p>Logical value converting formatting to text, by default
<code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>formatted tibble
</p>
<p>formatted tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'> library(dplyr)
 library(tidyr)

 tfrmt_spec &lt;- tfrmt(
 label = label,
 column = column,
 param = param,
 value=value,
 body_plan = body_plan(
   frmt_structure(group_val = ".default", label_val = ".default",
                  frmt_combine(
                    "{count} {percent}",
                    count = frmt("xxx"),
                    percent = frmt_when("==100"~ frmt(""),
                                        "==0"~ "",
                                        "TRUE" ~ frmt("(xx.x%)"))))
 ))

 # Create data
 df &lt;- crossing(label = c("label 1", "label 2"),
                column = c("placebo", "trt1"),
                param = c("count", "percent")) %&gt;%
   mutate(value=c(24,19,2400/48,1900/38,5,1,500/48,100/38))

 display_row_frmts(tfrmt_spec,df)
 library(dplyr)
 library(tidyr)

 tfrmt_spec &lt;- tfrmt(
 label = label,
 column = column,
 param = param,
 value=value,
 body_plan = body_plan(
   frmt_structure(group_val = ".default", label_val = ".default",
                  frmt_combine(
                    "{count} {percent}",
                    count = frmt("xxx"),
                    percent = frmt_when("==100"~ frmt(""),
                                        "==0"~ "",
                                        "TRUE" ~ frmt("(xx.x%)"))))
 ))

 # Create data
 df &lt;- crossing(label = c("label 1", "label 2"),
                column = c("placebo", "trt1"),
                param = c("count", "percent")) %&gt;%
   mutate(value=c(24,19,2400/48,1900/38,5,1,500/48,100/38))

 display_row_frmts(tfrmt_spec,df)
</code></pre>

<hr>
<h2 id='display_val_frmts'>Display formatted values</h2><span id='topic+display_val_frmts'></span>

<h3>Description</h3>

<p>A helper for creating positional-alignment specifications for the col_style_plan.
Returns all unique formatted values to appear in the column(s) specified. Numeric values are represented by x's.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>display_val_frmts(tfrmt, .data, mock = FALSE, col = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="display_val_frmts_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt object to apply to the data</p>
</td></tr>
<tr><td><code id="display_val_frmts_+3A_.data">.data</code></td>
<td>
<p>Data to apply the tfrmt to</p>
</td></tr>
<tr><td><code id="display_val_frmts_+3A_mock">mock</code></td>
<td>
<p>Mock table? TRUE or FALSE (default)</p>
</td></tr>
<tr><td><code id="display_val_frmts_+3A_col">col</code></td>
<td>
<p>Column value to align on from <code>column</code> variable. May be a quoted
or unquoted column name, a tidyselect semantic, or a span_structure.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>text representing character vector of formatted values to be copied and modified in the col_style_plan
</p>


<h3>Examples</h3>

<pre><code class='language-R'> tf_spec &lt;- tfrmt(
 group = c(rowlbl1,grp),
 label = rowlbl2,
 column = column,
 param = param,
 value = value,
 sorting_cols = c(ord1, ord2),
 body_plan = body_plan(
 frmt_structure(group_val = ".default", label_val = ".default", frmt_combine("{n} ({pct} %)",
                                                                             n = frmt("xxx"),
                                                                             pct = frmt("xx.x"))),
 frmt_structure(group_val = ".default", label_val = "n", frmt("xxx")),
 frmt_structure(group_val = ".default", label_val = c("Mean", "Median", "Min","Max"),
                             frmt("xxx.x")),
 frmt_structure(group_val = ".default", label_val = "SD", frmt("xxx.xx")),
 frmt_structure(group_val = ".default", label_val = ".default",
                            p = frmt_when("&gt;0.99" ~ "&gt;0.99",
                                          "&lt;0.15" ~ "&lt;0.15",
                                          TRUE ~ frmt("x.xxx", missing = "")))
))

 display_val_frmts(tf_spec, data_demog, col = vars(everything()))
 display_val_frmts(tf_spec, data_demog, col = "p-value")
</code></pre>

<hr>
<h2 id='element_block'>Element block</h2><span id='topic+element_block'></span>

<h3>Description</h3>

<p>Element block
</p>


<h3>Usage</h3>

<pre><code class='language-R'>element_block(post_space = c(NULL, " ", "-"), fill = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="element_block_+3A_post_space">post_space</code></td>
<td>
<p>Values to show in a new line created after the group block</p>
</td></tr>
<tr><td><code id="element_block_+3A_fill">fill</code></td>
<td>
<p>Whether to recycle the value of <code>post_space</code> to match width of the data. Defaults to <code>TRUE</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>element block object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+row_grp_plan">row_grp_plan()</a></code> for more details on how to group row group
structures, <code><a href="#topic+row_grp_structure">row_grp_structure()</a></code> for more details on how to specify row group
structures, <code><a href="#topic+element_row_grp_loc">element_row_grp_loc()</a></code> for more details on how to
specify whether row group titles span the entire table or collapse.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_spec &lt;- tfrmt(
  group = grp1,
  label = label,
  param = param,
  value = value,
  column = column,
  row_grp_plan = row_grp_plan(
    row_grp_structure(group_val = ".default", element_block(post_space = "   "))
  ),
  body_plan = body_plan(
    frmt_structure(group_val = ".default", label_val = ".default", frmt("xx"))
  )
)
</code></pre>

<hr>
<h2 id='element_row_grp_loc'>Element Row Group Location</h2><span id='topic+element_row_grp_loc'></span>

<h3>Description</h3>

<p>Element Row Group Location
</p>


<h3>Usage</h3>

<pre><code class='language-R'>element_row_grp_loc(
  location = c("indented", "spanning", "column", "noprint", "gtdefault"),
  indent = "  "
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="element_row_grp_loc_+3A_location">location</code></td>
<td>
<p>Location of the row group labels. Specifying 'indented'
combines all group and label variables into a single column with each
sub-group indented under its parent. 'spanning' and 'column' retain the
highest level group variable in its own column and combine all remaining
group and label variables into a single column with sub-groups indented. The
highest level group column will either be printed as a spanning header or in
its own column in the gt. The 'noprint' option allows the user to suppress
group values from being printed. Finally, the 'gtdefault' option allows
users to use the 'gt' defaults for styling multiple group columns.</p>
</td></tr>
<tr><td><code id="element_row_grp_loc_+3A_indent">indent</code></td>
<td>
<p>A string of the number of spaces you want to indent</p>
</td></tr>
</table>


<h3>Value</h3>

<p>element_row_grp_loc object
</p>


<h3>Images</h3>

<p>Here are some example outputs:
</p>
 <img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-row_group_plan-cropped.jpg" alt="Examples showing the difference between the row group locations" style="width:100%;"> 


<h3>See Also</h3>

<p><code><a href="#topic+row_grp_plan">row_grp_plan()</a></code> for more details on how to group row group
structures, <code><a href="#topic+row_grp_structure">row_grp_structure()</a></code> for more details on how to specify row
group structures, <code><a href="#topic+element_block">element_block()</a></code> for more details on how to specify
spacing between each group.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/row_grp_plan.html">Link
to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_spec &lt;- tfrmt(
  group = c(grp1, grp2),
  label = label,
  param = param,
  value = value,
  column = column,
  row_grp_plan = row_grp_plan(label_loc = element_row_grp_loc(location = "noprint")),
  body_plan = body_plan(
    frmt_structure(group_val = ".default", label_val = ".default", frmt("xx"))
  )
)

</code></pre>

<hr>
<h2 id='footnote_plan'>Footnote Plan</h2><span id='topic+footnote_plan'></span>

<h3>Description</h3>

<p>Defining the location and content of footnotes with a series of footnote
structures. Each structure is a footnote and can be applied in multiple locations.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>footnote_plan(..., marks = c("numbers", "letters", "standard", "extended"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="footnote_plan_+3A_...">...</code></td>
<td>
<p>a series of <code><a href="#topic+footnote_structure">footnote_structure()</a></code> separated by commas</p>
</td></tr>
<tr><td><code id="footnote_plan_+3A_marks">marks</code></td>
<td>
<p>type of marks required for footnotes, properties inherited from
tab_footnote in 'gt'. Available options are &quot;numbers&quot;, &quot;letters&quot;,
&quot;standard&quot; and &quot;extended&quot; (standard for a traditional set of 4 symbols,
extended for 6 symbols). The default option is set to &quot;numbers&quot;.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>footnote plan object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Adds a footnote indicated by letters rather than numbers to Group 1
footnote_plan &lt;- footnote_plan(
    footnote_structure(footnote_text = "Source Note", group_val = "Group 1"),
    marks="letters")

# Adds a footnote to the 'Placebo' column
footnote_plan &lt;- footnote_plan(
    footnote_structure(footnote_text = "footnote", column_val = "Placebo"),
    marks="numbers")

</code></pre>

<hr>
<h2 id='footnote_structure'>Footnote Structure</h2><span id='topic+footnote_structure'></span>

<h3>Description</h3>

<p>Footnote Structure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>footnote_structure(
  footnote_text,
  column_val = NULL,
  group_val = NULL,
  label_val = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="footnote_structure_+3A_footnote_text">footnote_text</code></td>
<td>
<p>string with text for footnote</p>
</td></tr>
<tr><td><code id="footnote_structure_+3A_column_val">column_val</code></td>
<td>
<p>string or a named list of strings which represent the column to apply the footnote to</p>
</td></tr>
<tr><td><code id="footnote_structure_+3A_group_val">group_val</code></td>
<td>
<p>string or a named list of strings which represent the value of group to apply the footnote to</p>
</td></tr>
<tr><td><code id="footnote_structure_+3A_label_val">label_val</code></td>
<td>
<p>string which represents the value of label to apply the footnote to</p>
</td></tr>
</table>


<h3>Value</h3>

<p>footnote structure object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Adds a source note aka a footnote without a symbol in the table
footnote_structure &lt;- footnote_structure(footnote_text = "Source Note")

# Adds a footnote to the 'Placebo' column
footnote_structure &lt;- footnote_structure(footnote_text = "Text",
                               column_val = "Placebo")

# Adds a footnote to either 'Placebo' or 'Treatment groups' depending on which
# which is last to appear in the column vector
footnote_structure &lt;- footnote_structure(footnote_text = "Text",
      column_val = list(col1 = "Placebo", col2= "Treatment groups"))

# Adds a footnote to the 'Adverse Event' label
footnote_structure &lt;- footnote_structure("Text", label_val = "Adverse Event")
</code></pre>

<hr>
<h2 id='frmt'>Table Value Formatting</h2><span id='topic+frmt'></span><span id='topic+frmt_combine'></span><span id='topic+frmt_when'></span>

<h3>Description</h3>

<p>These functions provide an abstracted way to approach to define formatting of table
contents. By defining in this way, the formats can be
layered to be more specific and general cell styling can be done first.
</p>
<p><code>frmt()</code> is the base definition of a format. This defines spacing, rounding,
and missing behaviour.
</p>
<p><code>frmt_combine()</code> is used when two or more rows need to be combined into a
single cell in the table. Each of the rows needs to have a defined <code>frmt()</code>
and need to share a label.
</p>
<p><code>frmt_when()</code> is used when a rows format behaviour is dependent on the value itself and is written similarly to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>.
The left hand side of the equation is a <code>"TRUE"</code>for the default case or the right hand side of a boolean expression <code>"&gt;50"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>frmt(expression, missing = NULL, scientific = NULL, transform = NULL, ...)

frmt_combine(expression, ..., missing = NULL)

frmt_when(..., missing = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="frmt_+3A_expression">expression</code></td>
<td>
<p>this is the string representing the intended format. See details: expression for more a detailed description.</p>
</td></tr>
<tr><td><code id="frmt_+3A_missing">missing</code></td>
<td>
<p>when a value is missing that is intended to be formatted, what value to place. See details: missing for more a detailed description.</p>
</td></tr>
<tr><td><code id="frmt_+3A_scientific">scientific</code></td>
<td>
<p>a string representing the intended scientific notation to be appended to the expression. Ex. &quot;e^XX&quot; or &quot; x10^XX&quot;.</p>
</td></tr>
<tr><td><code id="frmt_+3A_transform">transform</code></td>
<td>
<p>this is what should happen to the value prior to formatting,
It should be a formula or function. Ex. <code>~.*100</code>if you want to convert a
percent from a decimal prior to rounding</p>
</td></tr>
<tr><td><code id="frmt_+3A_...">...</code></td>
<td>
<p>See details: <code>...</code> for a detailed description.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>expression</h4>


<ul>
<li> <p><code>frmt()</code> All numbers are represented by &quot;x&quot;. Any additional character are
printed as-is. If additional X's present to the left of the decimal point
than the value, they will be represented as spaces.
</p>
</li>
<li> <p><code>frmt_combine()</code> defines how the parameters will be combined as a
<code>glue::glue()</code> statement. Parameters need to be equal to the values in the
param column and defined in the expression as <code>"{param1} {param2}"</code>.
</p>
</li></ul>




<h4>missing</h4>


<ul>
<li> <p><code>frmt()</code> Value to enter when the value is missing. When NULL, the value
is &quot;&quot;.
</p>
</li>
<li> <p><code>frmt_combine()</code> defines how when all values to be combined are missing.
When NULL the value is &quot;&quot;.
</p>
</li></ul>




<h4>...</h4>


<ul>
<li> <p><code>frmt()</code> These dots are for future extensions and must be
empty.
</p>
</li>
<li> <p><code>frmt_combine()</code> accepts named arguments defining the <code>frmt()</code> to
be applied to which parameters before being combined.
</p>
</li>
<li> <p><code>frmt_when()</code>accepts a series of equations separated by commas, similar
to <code><a href="dplyr.html#topic+case_when">dplyr::case_when()</a></code>. The left hand side of the equation is a <code>"TRUE"</code>for the
default case or the right hand side of a boolean expression <code>"&gt;50"</code>. The
right hand side of the equation is the <code>frmt()</code> to apply when the left
side evaluates to <code>TRUE</code>.
</p>
</li></ul>




<h3>Value</h3>

<p>frmt object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+body_plan">body_plan()</a></code> combines the frmt_structures to be applied to the
table body, and <code><a href="#topic+frmt_structure">frmt_structure()</a></code> defines which rows the formats will be applied
to.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/body_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
frmt("XXX %")

frmt("XX.XXX")

frmt("xx.xx", scientific = "x10^xx")

frmt_combine(
 "{param1} {param2}",
 param1 = frmt("XXX %"),
 param2 = frmt("XX.XXX")
)

frmt_when(
  "&gt;3" ~ frmt("(X.X%)"),
  "&lt;=3" ~ frmt("Undetectable")
  )

frmt_when(
  "==100"~ frmt(""),
  "==0"~ "",
  "TRUE" ~ frmt("(XXX.X%)")
  )

</code></pre>

<hr>
<h2 id='frmt_structure'>Format Structure Object</h2><span id='topic+frmt_structure'></span>

<h3>Description</h3>

<p>Function needed to create a frmt_structure object, which is a building block
of <code><a href="#topic+body_plan">body_plan()</a></code>. This specifies the rows the format will be applied to.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>frmt_structure(group_val = ".default", label_val = ".default", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="frmt_structure_+3A_group_val">group_val</code></td>
<td>
<p>A string or a named list of strings which represent the
value of group should be when the given frmt is implemented</p>
</td></tr>
<tr><td><code id="frmt_structure_+3A_label_val">label_val</code></td>
<td>
<p>A string which represent the value of label should be when
the given frmt is implemented</p>
</td></tr>
<tr><td><code id="frmt_structure_+3A_...">...</code></td>
<td>
<p>either a <code><a href="#topic+frmt">frmt()</a></code>, <code><a href="#topic+frmt_combine">frmt_combine()</a></code>, or a <code><a href="#topic+frmt_when">frmt_when()</a></code> object.
This can be named to also specify the parameter value</p>
</td></tr>
</table>


<h3>Value</h3>

<p>frmt_structure object
</p>


<h3>Images</h3>

<p>Here are some example outputs:

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-frmts.jpg" alt = "Example comparing fmt, frmt_combine, and frmt_when" style="width:100%;">

</p>


<h3>See Also</h3>

<p><code><a href="#topic+body_plan">body_plan()</a></code> combines the frmt_structures to be applied to the
table body, and <code><a href="#topic+frmt">frmt()</a></code>, <code><a href="#topic+frmt_combine">frmt_combine()</a></code>, and <code><a href="#topic+frmt_when">frmt_when()</a></code> define the
format semantics.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/body_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
sample_structure &lt;- frmt_structure(
          group_val = c("group1"),
          label_val = ".default",
          frmt("XXX")
        )
## multiple group columns
sample_structure &lt;- frmt_structure(
          group_val = list(grp_col1 = "group1", grp_col2 = "subgroup3"),
          label_val = ".default",
          frmt("XXX")
        )

</code></pre>

<hr>
<h2 id='is_frmt'>Check if input is a frmt</h2><span id='topic+is_frmt'></span><span id='topic+is_frmt_combine'></span><span id='topic+is_frmt_when'></span><span id='topic+is_frmt_structure'></span><span id='topic+is_row_grp_structure'></span>

<h3>Description</h3>

<p>Check if input is a frmt
</p>
<p>Check if input is a frmt_combine
</p>
<p>Check if input is a frmt_when
</p>
<p>Check if input is a frmt_structure
</p>
<p>Check if input is a row_grp_structure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_frmt(x)

is_frmt_combine(x)

is_frmt_when(x)

is_frmt_structure(x)

is_row_grp_structure(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="is_frmt_+3A_x">x</code></td>
<td>
<p>Object to check</p>
</td></tr>
</table>


<h3>Value</h3>

<p>'TRUE' if yes, 'FALSE' if no
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x1 &lt;- frmt("XXX.XX")
is_frmt(x1)

x2 &lt;- frmt_combine("XXX %","XX,XXX")
is_frmt_combine(x2)

x2 &lt;- frmt_when(
"&gt;3" ~ frmt("(X.X%)"),
"&lt;=3" ~ frmt("Undetectable")
)
is_frmt_when(x2)

x3 &lt;- frmt_structure(
 group_val = c("group1"),
 label_val = ".default",
frmt("XXX")
)
is_frmt_structure(x3)

x4 &lt;- row_grp_structure(group_val = c("A","C"), element_block(post_space = "---"))
is_row_grp_structure(x4)

</code></pre>

<hr>
<h2 id='json_to_tfrmt'>json to tfrmt</h2><span id='topic+json_to_tfrmt'></span>

<h3>Description</h3>

<p>Reader to read JSON files/objects into tfrmt objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>json_to_tfrmt(path = NULL, json = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="json_to_tfrmt_+3A_path">path</code></td>
<td>
<p>location of the json file to read in</p>
</td></tr>
<tr><td><code id="json_to_tfrmt_+3A_json">json</code></td>
<td>
<p>json object to read in. By default this is null. This function
will read in json object preferentially. So if both a path and a json
object are supplied the json object will be read in.</p>
</td></tr>
</table>

<hr>
<h2 id='layer_tfrmt'>Layer tfrmt objects together</h2><span id='topic+layer_tfrmt'></span>

<h3>Description</h3>

<p>Provide utility for layering tfrmt objects together. If both tfrmt's have
values, it will preferentially choose the second tfrmt by default. This is an
alternative to piping together tfrmt's
</p>


<h3>Usage</h3>

<pre><code class='language-R'>layer_tfrmt(x, y, ..., join_body_plans = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="layer_tfrmt_+3A_x">x</code>, <code id="layer_tfrmt_+3A_y">y</code></td>
<td>
<p>tfrmt objects that need to be combined</p>
</td></tr>
<tr><td><code id="layer_tfrmt_+3A_...">...</code></td>
<td>
<p>arguments passed to layer_tfrmt_arg functions for combining different tfrmt elements</p>
</td></tr>
<tr><td><code id="layer_tfrmt_+3A_join_body_plans">join_body_plans</code></td>
<td>
<p>should the <code>body_plans</code> be combined, or just keep styling in y. See details: join_body_plans for more details.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>join_body_plan</h4>

<p>When combining two body_plans, the body plans will stack together, first the
body plan from x tfrmt then y tfrmt. This means that frmt_structures in y
will take priority over those in x.
</p>
<p>Combining two tfrmt with large body_plans can lead to slow table evaluation.
Consider setting <code>join_body_plan</code> to <code>FALSE</code>. Only the y <code>body_plan</code> will be
preserved.
</p>



<h3>Value</h3>

<p>tfrmt object
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_1 &lt;- tfrmt(title = "title1")

tfrmt_2 &lt;- tfrmt(title = "title2",subtitle = "subtitle2")

layered_table_format &lt;- layer_tfrmt(tfrmt_1, tfrmt_2)

</code></pre>

<hr>
<h2 id='make_mock_data'>Make mock data for display shells</h2><span id='topic+make_mock_data'></span>

<h3>Description</h3>

<p>Make mock data for display shells
</p>


<h3>Usage</h3>

<pre><code class='language-R'>make_mock_data(tfrmt, .default = 1:3, n_cols = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="make_mock_data_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt object</p>
</td></tr>
<tr><td><code id="make_mock_data_+3A_.default">.default</code></td>
<td>
<p>Number of unique levels to create for group/label values set
to &quot;.default&quot;</p>
</td></tr>
<tr><td><code id="make_mock_data_+3A_n_cols">n_cols</code></td>
<td>
<p>Number of columns in the output table (not including
group/label variables). If not supplied it will default to using the
<code>col_plan</code> from the <code>tfrmt</code>. If neither are available it will use 3.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tibble containing mock data
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value,
  body_plan = body_plan(
    frmt_structure(group_val=".default", label_val=".default", frmt("xx.x"))
    )
  )

make_mock_data(tfrmt_spec)

</code></pre>

<hr>
<h2 id='page_plan'>Page Plan</h2><span id='topic+page_plan'></span>

<h3>Description</h3>

<p>Defining the location and/or frequency of page splits with a series of
page_structure's and the row_every_n argument, respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>page_plan(
  ...,
  note_loc = c("noprint", "preheader", "subtitle", "source_note"),
  max_rows = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="page_plan_+3A_...">...</code></td>
<td>
<p>a series of <code><a href="#topic+page_structure">page_structure()</a></code> separated by commas</p>
</td></tr>
<tr><td><code id="page_plan_+3A_note_loc">note_loc</code></td>
<td>
<p>Location of the note describing each table's subset value(s).
Useful if the <code>page_structure</code> contains only &quot;.default&quot; values (meaning the
table is split by every unique level of a grouping variable), and that
variable is dropped in the col_plan. <code>preheader</code> only available for rtf output.</p>
</td></tr>
<tr><td><code id="page_plan_+3A_max_rows">max_rows</code></td>
<td>
<p>Option to set a maximum number of rows per page. Takes a numeric value.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>page_plan object
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # use of page_struct
 page_plan(
    page_structure(group_val = "grp1", label_val = "lbl1")
 )

 # use of #  rows
 page_plan(
    max_rows = 5
 )


</code></pre>

<hr>
<h2 id='page_structure'>Page structure</h2><span id='topic+page_structure'></span>

<h3>Description</h3>

<p>Page structure
</p>


<h3>Usage</h3>

<pre><code class='language-R'>page_structure(group_val = NULL, label_val = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="page_structure_+3A_group_val">group_val</code></td>
<td>
<p>string or a named list of strings which represent the value of group to split after.
Set to &quot;.default&quot; if the split should occur after every unique value of the variable.</p>
</td></tr>
<tr><td><code id="page_structure_+3A_label_val">label_val</code></td>
<td>
<p>string which represents the value of label to split after.
Set to &quot;.default&quot; if the split should occur after every unique value of
the variable.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>page structure object
</p>


<h3>Examples</h3>

<pre><code class='language-R'># split page after every unique level of the grouping variable
 page_structure(group_val = ".default", label_val = NULL)

 # split page after specific levels
 page_structure(group_val = "grp1", label_val = "lbl3")
</code></pre>

<hr>
<h2 id='param_set'>Set custom parameter-level significant digits rounding</h2><span id='topic+param_set'></span>

<h3>Description</h3>

<p>Set custom parameter-level significant digits rounding
</p>


<h3>Usage</h3>

<pre><code class='language-R'>param_set(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="param_set_+3A_...">...</code></td>
<td>
<p>Series of name-value pairs, optionally formatted using
<code>glue::glue()</code> syntax (note <code>glue</code> syntax is required for combined
parameters).The name represents the parameter and the value represents the number of places to round the parameter to.
For combined parameters (e.g., <code>"{min}, {max}"</code>), value should
be a vector of the same length (e.g., c(1,1)).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Type <code>param_set()</code> in console to view package defaults. Use of the
function will add to the defaults and/or override included defaults of the
same name. For values that are integers, use <code>NA</code> so no decimal places will
be added.
</p>


<h3>Value</h3>

<p>list of default parameter-level significant digits rounding
</p>


<h3>Examples</h3>

<pre><code class='language-R'># View included defaults
param_set()

# Update the defaults
param_set("{mean} ({sd})" = c(2,3), "pct" = 1)

# Separate mean and SD to different lines
param_set("mean" = 2, "sd" = 3)

# Add formatting using the glue syntax
param_set("{pct} %" = 1)

</code></pre>

<hr>
<h2 id='print_mock_gt'>Print mock table to GT</h2><span id='topic+print_mock_gt'></span>

<h3>Description</h3>

<p>Print mock table to GT
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_mock_gt(
  tfrmt,
  .data = NULL,
  .default = 1:3,
  n_cols = NULL,
  .unicode_ws = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_mock_gt_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt the mock table will be based off of</p>
</td></tr>
<tr><td><code id="print_mock_gt_+3A_.data">.data</code></td>
<td>
<p>Optional data. If this is missing, group values, labels values
and parameter values will be estimated based on the tfrmt</p>
</td></tr>
<tr><td><code id="print_mock_gt_+3A_.default">.default</code></td>
<td>
<p>sequence to replace the default values if a dataset isn't
provided</p>
</td></tr>
<tr><td><code id="print_mock_gt_+3A_n_cols">n_cols</code></td>
<td>
<p>the number of columns. This will only be used if mock data isn't
provided. If not supplied, it will default to using the <code>col_plan</code> from the
<code>tfrmt</code>. If neither are available it will use 3.</p>
</td></tr>
<tr><td><code id="print_mock_gt_+3A_.unicode_ws">.unicode_ws</code></td>
<td>
<p>Whether to convert white space to unicode in preparation for output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stylized gt object
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>
  # Create tfrmt specification
  tfrmt_spec &lt;- tfrmt( label = label, column =
  column, param = param, body_plan = body_plan( frmt_structure(group_val =
  ".default", label_val = ".default", frmt_combine( "{count} {percent}",
  count = frmt("xxx"), percent = frmt_when("==100"~ frmt(""), "==0"~ "",
  "TRUE" ~ frmt("(xx.x%)")))) ))

  # Print mock table using default
  print_mock_gt(tfrmt = tfrmt_spec)

</pre></div>
 <img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_print_mock_gt1.png" alt = "Simple 3 by 3 table without values" style="width:50%;"> 
<div class="sourceCode r"><pre>  # Create mock data
  df &lt;- crossing(label = c("label 1", "label 2",
  "label 3"), column = c("placebo", "trt1", "trt2"), param = c("count",
  "percent"))

  # Print mock table using mock data
  print_mock_gt(tfrmt_spec, df)

</pre></div>
 <img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_print_mock_gt2.png" alt = "Simple 3 by 3 table without values, but with column names" style="width:50%;"> 

<hr>
<h2 id='print_to_ggplot'>Print to ggplot</h2><span id='topic+print_to_ggplot'></span>

<h3>Description</h3>

<p>Print to ggplot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_to_ggplot(tfrmt, .data, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_to_ggplot_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt object that will dictate the structure of the ggplot object</p>
</td></tr>
<tr><td><code id="print_to_ggplot_+3A_.data">.data</code></td>
<td>
<p>Data to style in order to make the ggplot object</p>
</td></tr>
<tr><td><code id="print_to_ggplot_+3A_...">...</code></td>
<td>
<p>Inputs to geom_text to modify the style of the table body</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stylized ggplot object
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>
# Create data
risk&lt;-tibble(time=c(rep(c(0,1000,2000,3000),3)),
            label=c(rep("Obs",4),rep("Lev",4),rep("Lev+5FU",4)),
            value=c(630,372,256,11,620,360,266,8,608,425,328,14),
            param=rep("n",12))

table&lt;-tfrmt(
 label = label ,
 column = time,
 param = param,
 value = value) %&gt;%
  print_to_ggplot(risk)

table

</pre></div>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_print_to_ggplot.png" alt="Simple table to stack with a KM-plot" style="width:50%;">


<hr>
<h2 id='print_to_gt'>Print to gt</h2><span id='topic+print_to_gt'></span>

<h3>Description</h3>

<p>Print to gt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_to_gt(tfrmt, .data, .unicode_ws = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_to_gt_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt object that will dictate the structure of the table</p>
</td></tr>
<tr><td><code id="print_to_gt_+3A_.data">.data</code></td>
<td>
<p>Data to style in order to make the table</p>
</td></tr>
<tr><td><code id="print_to_gt_+3A_.unicode_ws">.unicode_ws</code></td>
<td>
<p>Whether to convert white space to unicode in preparation for output</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a stylized gt object
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>library(dplyr)
# Create tfrmt specification
tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value,
  body_plan = body_plan(
    frmt_structure(group_val = ".default", label_val = ".default",
                   frmt_combine(
                     "{count} {percent}",
                     count = frmt("xxx"),
                     percent = frmt_when("==100"~ frmt(""),
                                         "==0"~ "",
                                         "TRUE" ~ frmt("(xx.x%)"))))
  ))

# Create data
df &lt;- crossing(label = c("label 1", "label 2"),
               column = c("placebo", "trt1"),
               param = c("count", "percent")) %&gt;%
      mutate(value=c(24,19,2400/48,1900/38,5,1,500/48,100/38))

print_to_gt(tfrmt_spec,df)

</pre></div>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_print_to_gt.png" alt = "2 by 2 table with labels down the side and placebo and trt1 across the top" style="width:50%;">


<hr>
<h2 id='row_grp_plan'>Row Group Plan</h2><span id='topic+row_grp_plan'></span>

<h3>Description</h3>

<p>Define the look of the table groups on the output. This function allows you to
add spaces after blocks and allows you to control how the groups are viewed
whether they span the entire table or are nested as a column.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>row_grp_plan(..., label_loc = element_row_grp_loc(location = "indented"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="row_grp_plan_+3A_...">...</code></td>
<td>
<p>Row group structure objects separated by commas</p>
</td></tr>
<tr><td><code id="row_grp_plan_+3A_label_loc">label_loc</code></td>
<td>
<p><code><a href="#topic+element_row_grp_loc">element_row_grp_loc()</a></code> object specifying location</p>
</td></tr>
</table>


<h3>Value</h3>

<p>row_grp_plan object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+row_grp_structure">row_grp_structure()</a></code> for more details on how to specify row group
structures, <code><a href="#topic+element_block">element_block()</a></code> for more details on how to specify spacing
between each group, <code><a href="#topic+element_row_grp_loc">element_row_grp_loc()</a></code> for more details on how to
specify whether row group titles span the entire table or collapse.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/row_grp_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

  ## single grouping variable example
  sample_grp_plan &lt;- row_grp_plan(
    row_grp_structure(group_val = c("A","C"), element_block(post_space = "---")),
    row_grp_structure(group_val = c("B"), element_block(post_space = " ")),
    label_loc = element_row_grp_loc(location = "column")
  )

  ## example with multiple grouping variables
  sample_grp_plan &lt;- row_grp_plan(
     row_grp_structure(group_val = list(grp1 = "A", grp2 = "b"), element_block(post_space = " ")),
     label_loc = element_row_grp_loc(location = "spanning")
     )

</code></pre>

<hr>
<h2 id='row_grp_structure'>Row Group Structure Object</h2><span id='topic+row_grp_structure'></span>

<h3>Description</h3>

<p>Function needed to create a row_grp_structure object, which is a building block
of <code><a href="#topic+row_grp_plan">row_grp_plan()</a></code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>row_grp_structure(group_val = ".default", element_block)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="row_grp_structure_+3A_group_val">group_val</code></td>
<td>
<p>A string or a named list of strings which represent the
value of group should be when the given frmt is implemented</p>
</td></tr>
<tr><td><code id="row_grp_structure_+3A_element_block">element_block</code></td>
<td>
<p>element_block() object to define the block styling</p>
</td></tr>
</table>


<h3>Value</h3>

<p>row_grp_structure object
</p>


<h3>See Also</h3>

<p><code><a href="#topic+row_grp_plan">row_grp_plan()</a></code> for more details on how to group row group
structures, <code><a href="#topic+element_block">element_block()</a></code> for more details on how to specify spacing
between each group.
</p>
<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/row_grp_plan.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## single grouping variable example
row_grp_structure(group_val = c("A","C"), element_block(post_space = "---"))

## example with multiple grouping variables
row_grp_structure(group_val = list(grp1 = "A", grp2 = "b"), element_block(post_space = " "))

</code></pre>

<hr>
<h2 id='tfrmt'>Table Format</h2><span id='topic+tfrmt'></span>

<h3>Description</h3>

<p>tfrmt, or &quot;table format&quot; is a way to pre-define the non-data components of
your tables, and how the data will be handled once added: i.e. title,
footers, headers, span headers, and cell formats. In addition, tfrmt's can be
layered, building from one table format to the next. For cases where only one
value can be used, the newly defined tfrmt accepts the latest tfrmt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tfrmt(
  tfrmt_obj,
  group = vars(),
  label = quo(),
  param = quo(),
  value = quo(),
  column = vars(),
  title,
  subtitle,
  row_grp_plan,
  body_plan,
  col_style_plan,
  col_plan,
  sorting_cols,
  big_n,
  footnote_plan,
  page_plan,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tfrmt_+3A_tfrmt_obj">tfrmt_obj</code></td>
<td>
<p>a tfrmt object to base this new format off of</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_group">group</code></td>
<td>
<p>what are the grouping vars of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_label">label</code></td>
<td>
<p>what is the label column of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_param">param</code></td>
<td>
<p>what is the param column of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_value">value</code></td>
<td>
<p>what is the value column of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_column">column</code></td>
<td>
<p>what is the column names column in the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_title">title</code></td>
<td>
<p>title of the table</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_subtitle">subtitle</code></td>
<td>
<p>subtitle of the table</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_row_grp_plan">row_grp_plan</code></td>
<td>
<p>plan of the row groups blocking. Takes a <code><a href="#topic+row_grp_plan">row_grp_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_body_plan">body_plan</code></td>
<td>
<p>combination and formatting of the input data. Takes a <code><a href="#topic+body_plan">body_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_col_style_plan">col_style_plan</code></td>
<td>
<p>how to style columns including alignment (left, right, character) and width. Takes a <code><a href="#topic+col_style_plan">col_style_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_col_plan">col_plan</code></td>
<td>
<p>a col_plan object which is used to select, rename, and nest
columns. Takes a <code><a href="#topic+col_plan">col_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_sorting_cols">sorting_cols</code></td>
<td>
<p>which columns determine sorting of output</p>
</td></tr>
<tr><td><code id="tfrmt_+3A_big_n">big_n</code></td>
<td>
<p>how to format subject totals (&quot;big Ns&quot;) for inclusion in the column labels. Takes a <code><a href="#topic+big_n_structure">big_n_structure()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_footnote_plan">footnote_plan</code></td>
<td>
<p>footnotes to be added to the table. Takes a <code><a href="#topic+footnote_plan">footnote_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_page_plan">page_plan</code></td>
<td>
<p>pagination splits to be applied to the table. Takes a <code><a href="#topic+page_plan">page_plan()</a></code></p>
</td></tr>
<tr><td><code id="tfrmt_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>NSE and Argument Evaluation</h4>


<ul>
<li><p> tfrmt allows users to pass <code>vars</code>, <code>quo</code>, and unquoted expressions to a
variety of arguments, such as <code>group</code>, <code>label</code>, <code>param</code>, <code>value</code>,
<code>column</code>, and <code>sorting_cols</code>. Users accustomed to tidyverse semantics
should be familiar with this behaviour. However, there is an important
behaviour difference between tfrmt and normal tidyverse functions. Because
the data are not a part of tfrmt, it does not know when a value being
passed to it is intended to be an unquoted expression representing a column
name or an object from the environment. As such, it preferentially uses the
value from the environment over preserving the entry as an expression. For
example, if you have an object &quot;my_object&quot; in your
environment with the value &quot;Hello world&quot;, and try to create a tfrmt as
<code>tfrmt(column = my_object)</code>, it will take the value of &quot;my_object&quot; over
assuming the column argument is an unquoted expression and view the entry
to <code>column</code> as &quot;Hello World&quot;. To pass &quot;my_object&quot; to tfrmt as a column name, use
quotes around the value: <code>tfrmt(columnn = "my_object")</code>.
</p>
</li>
<li><p> Additionally, unquoted expressions that match <code>tfrmt</code>'s other
argument names can cause unexpected results. It is recommended
to put quotes around the value as such:
<code>tfrmt(label = "group")</code>. In this case, the quoting will prevent <code>tfrmt</code>
from assigning its <code>group</code> input value to the <code>label</code> value.
</p>
</li></ul>




<h3>Value</h3>

<p>tfrmt object
</p>


<h3>Images</h3>

<p>Here are some example outputs:

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/main/images/tfrmt-groups-three-cols-cropped.jpg" alt ="Example showing no groups, one group and two groups" style="width:100%;">

</p>


<h3>See Also</h3>

<p><a href="https://gsk-biostatistics.github.io/tfrmt/articles/building_blocks.html">Link to related article</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value)

tfrmt_spec &lt;- tfrmt(
  label = label,
  column = column,
  param = param,
  value=value,
# Set the formatting for values
  body_plan = body_plan(
    frmt_structure(
      group_val = ".default",
      label_val = ".default",
      frmt_combine("{n} {pct}",
           n = frmt("xxx"),
           pct = frmt_when(
                "==100" ~ "(100%)",
                "==0" ~ "",
                TRUE ~ frmt("(xx.x %)")
                )
           )
    )
  ),
# Specify column styling plan
  col_style_plan = col_style_plan(
    col_style_structure(col = vars(everything()), align = c(".",","," "))
  ))

tfrmt_spec &lt;- tfrmt(
  group = group,
  label = label,
  column = column,
  param = param,
  value=value,
  sorting_cols = c(ord1, ord2),
  # specify value formatting
  body_plan = body_plan(
    frmt_structure(
      group_val = ".default",
      label_val = ".default",
      frmt_combine("{n} {pct}",
           n = frmt("xxx"),
           pct = frmt_when(
                "==100" ~ "(100%)",
                "==0" ~ "",
                TRUE ~ frmt("(xx.x %)")
                )
           )
    ),
    frmt_structure(
        group_val = ".default",
        label_val = "n",
        frmt("xxx")
   ),
    frmt_structure(
        group_val = ".default",
        label_val = c("Mean", "Median", "Min","Max"),
        frmt("xxx.x")
     ),
    frmt_structure(
        group_val = ".default",
        label_val = "SD",
        frmt("xxx.xx")
    ),
    frmt_structure(
        group_val = ".default",
        label_val = ".default",
        p = frmt("")
    ),
    frmt_structure(
        group_val = ".default",
        label_val = c("n","&lt;65 yrs","&lt;12 months","&lt;25"),
        p = frmt_when(
            "&gt;0.99" ~ "&gt;0.99",
            "&lt;0.001" ~ "&lt;0.001",
            TRUE ~ frmt("x.xxx", missing = "")
        )
    )
  ),
  # remove extra cols
  col_plan = col_plan(-grp,
                      -starts_with("ord") ),
  # Specify column styling plan
  col_style_plan = col_style_plan(
    col_style_structure(col = vars(everything()), align = c(".",","," "))
  ),

  # Specify row group plan
  row_grp_plan = row_grp_plan(
    row_grp_structure(
         group_val = ".default",
         element_block(post_space = " ")
    ),
    label_loc = element_row_grp_loc(location = "column")
  )

)


</code></pre>

<hr>
<h2 id='tfrmt_n_pct'>N Percent Template</h2><span id='topic+tfrmt_n_pct'></span>

<h3>Description</h3>

<p>This function creates an tfrmt for an n % table, so count based table. The
parameter values for n and percent can be provided (by default it will assume
<code>n</code> and <code>pct</code>). Additionally the <code>frmt_when</code> for formatting the percent can
be specified. By default 100% and 0% will not appear and everything between
99% and 100% and 0% and 1% will be rounded using greater than (&gt;) and less
than (&lt;) signs respectively.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tfrmt_n_pct(
  n = "n",
  pct = "pct",
  pct_frmt_when = frmt_when("==100" ~ frmt(""), "&gt;99" ~ frmt("(&gt;99%)"), "==0" ~ "", "&lt;1"
    ~ frmt("(&lt;1%)"), "TRUE" ~ frmt("(xx.x%)")),
  tfrmt_obj = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tfrmt_n_pct_+3A_n">n</code></td>
<td>
<p>name of count (n) value in the parameter column</p>
</td></tr>
<tr><td><code id="tfrmt_n_pct_+3A_pct">pct</code></td>
<td>
<p>name of percent (pct) value in the parameter column</p>
</td></tr>
<tr><td><code id="tfrmt_n_pct_+3A_pct_frmt_when">pct_frmt_when</code></td>
<td>
<p>formatting to be used on the the percent values</p>
</td></tr>
<tr><td><code id="tfrmt_n_pct_+3A_tfrmt_obj">tfrmt_obj</code></td>
<td>
<p>an optional tfrmt object to layer</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tfrmt object
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>print_mock_gt(tfrmt_n_pct())
</pre></div>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_n_percent.png" alt="3 by 3 table" style="width:50%;">


<hr>
<h2 id='tfrmt_sigdig'>Create tfrmt object from significant digits spec</h2><span id='topic+tfrmt_sigdig'></span>

<h3>Description</h3>

<p>This function creates a tfrmt based on significant digits specifications for
group/label values. The input data spec provided to <code>sigdig_df</code> will contain
group/label value specifications. <code>tfrmt_sigdig</code> assumes that these columns
are group columns unless otherwise specified. The user may optionally choose
to pass the names of the group and/or label columns as arguments to the
function.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tfrmt_sigdig(
  sigdig_df,
  group = vars(),
  label = quo(),
  param_defaults = param_set(),
  missing = NULL,
  tfrmt_obj = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tfrmt_sigdig_+3A_sigdig_df">sigdig_df</code></td>
<td>
<p>data frame containing significant digits formatting spec.
Has 1 record per group/label value, and columns for relevant group and/or
label variables, as well as a numeric column <code>sigdig</code> containing the
significant digits rounding to be applied in addition to the default. If
unique group/label values are represented in multiple rows, this will
result in only one of the <code>sigdig</code> values being carried through in
implementation.</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_group">group</code></td>
<td>
<p>what are the grouping vars of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_label">label</code></td>
<td>
<p>what is the label column of the input dataset</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_param_defaults">param_defaults</code></td>
<td>
<p>Option to override or add to default parameters.</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_missing">missing</code></td>
<td>
<p>missing option to be included in all <code>frmt</code>s</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_tfrmt_obj">tfrmt_obj</code></td>
<td>
<p>an optional tfrmt object to layer</p>
</td></tr>
<tr><td><code id="tfrmt_sigdig_+3A_...">...</code></td>
<td>
<p>These dots are for future extensions and must be empty.</p>
</td></tr>
</table>


<h3>Details</h3>



<h4>Formats covered</h4>

<p>Currently covers specifications for <code>frmt</code> and
<code>frmt_combine</code>. <code>frmt_when</code> not supported and must be supplied in additional
<code>tfrmt</code> that is layered on.
</p>



<h4>Group/label variables</h4>

<p>If the group/label variables are not provided to the arguments, the body_plan
will be constructed from the input data with the following behaviour:
</p>

<ul>
<li><p> If no group or label are supplied, it will be assumed that all columns in the input
data are group columns.
</p>
</li>
<li><p> If a label variable is provided, but nothing is
specified for group, any leftover columns (i.e. not matching <code>sigdig</code> or the
supplied label variable name) in the input data will be assumed to be group
columns.
</p>
</li>
<li><p> If any group variable is provided, any leftover columns (i.e. not
matching <code>sigdig</code> or the supplied group/label variable) will be disregarded.
</p>
</li></ul>




<h3>Value</h3>

<p><code>tfrmt</code> object with a <code>body_plan</code> constructed based on the
significant digits data spec and param-level significant digits defaults.
</p>


<h3>Examples</h3>

<div class="sourceCode r"><pre>sig_input &lt;- tibble::tribble(
  ~group1,   ~group2, ~sigdig,
  "CHEMISTRY",   ".default", 3,
  "CHEMISTRY",   "ALBUMIN",  1,
  "CHEMISTRY",   "CALCIUM",   1,
  ".default",    ".default",  2
)

# Subset data for the example
data &lt;- dplyr::filter(data_labs, group2 == "BASOPHILS", col1 %in% c("Placebo", "Xanomeline Low Dose"))
tfrmt_sigdig(sigdig_df = sig_input,
             group = vars(group1, group2),
             label = rowlbl,
             param_defaults = param_set("[{n}]" = NA)) %&gt;%
  tfrmt(column = vars(col1, col2),
        param = param,
        value = value,
        sorting_cols = vars(ord1, ord2, ord3),
        col_plan = col_plan(-starts_with("ord"))) %&gt;%
  print_to_gt(.data = data)
</pre></div>

<img src="https://raw.githubusercontent.com/GSK-Biostatistics/tfrmt/master/images/example_sigdig.png" alt="Table of Hematology, which are rounded for visits baseline to week 26" style="width:100%;">


<hr>
<h2 id='tfrmt_to_json'>Print to JSON</h2><span id='topic+tfrmt_to_json'></span>

<h3>Description</h3>

<p>Print to JSON
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tfrmt_to_json(tfrmt, path = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tfrmt_to_json_+3A_tfrmt">tfrmt</code></td>
<td>
<p>tfrmt to print</p>
</td></tr>
<tr><td><code id="tfrmt_to_json_+3A_path">path</code></td>
<td>
<p>file path to save JSON to. If not provided the JSON will just print to the console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>JSON
</p>


<h3>Examples</h3>

<pre><code class='language-R'>tfrmt(
  label = label,
  column = column,
  param = param,
  value=value) %&gt;%
  tfrmt_to_json()

</code></pre>

<hr>
<h2 id='update_group'>Remap group values in a tfrmt</h2><span id='topic+update_group'></span>

<h3>Description</h3>

<p>Remap group values in a tfrmt
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update_group(tfrmt, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update_group_+3A_tfrmt">tfrmt</code></td>
<td>
<p>a <code>tfrmt</code></p>
</td></tr>
<tr><td><code id="update_group_+3A_...">...</code></td>
<td>
<p>Use new_name = old_name to rename selected variables</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>tfrmt</code> with the <code>group</code> variables updated in all places
</p>
<p>tfrmt object with updated groups#'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tfrmt_spec &lt;- tfrmt(
    group = c(group1, group2),
    body_plan  = body_plan(
      frmt_structure(
         group_val = list(group2 = "value"),
         label_val = ".default",
         frmt("XXX")
         ),
     frmt_structure(
         group_val = list(group1 = "value", group2 = "value"),
         label_val = ".default",
         frmt("XXX")
       )
    ))

tfrmt_spec %&gt;%
  update_group(New_Group = group1)

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
