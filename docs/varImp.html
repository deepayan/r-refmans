<!DOCTYPE html><html lang="en"><head><title>Help for package varImp</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {varImp}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#varImp'><p>varImp</p></a></li>
<li><a href='#varImpACC'><p>varImpACC</p></a></li>
<li><a href='#varImpAUC'><p>varImpAUC</p></a></li>
<li><a href='#varImpRanger'><p>varImpRanger</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>RF Variable Importance for Arbitrary Measures</td>
</tr>
<tr>
<td>Version:</td>
<td>0.4</td>
</tr>
<tr>
<td>Description:</td>
<td>Computes the random forest variable importance (VIMP) for the conditional inference random forest (cforest) of the 'party' package. Includes a function (varImp) that computes the VIMP for arbitrary measures from the 'measures' package. For calculating the VIMP regarding the measures accuracy and AUC two extra functions exist (varImpACC and varImpAUC).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.0), measures, party, stats</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-05-15</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, ranger</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-05-23 08:01:54 UTC; philipp</td>
</tr>
<tr>
<td>Author:</td>
<td>Philipp Probst [aut, cre],
  Silke Janitza [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Philipp Probst &lt;philipp_probst@gmx.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-05-23 09:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='varImp'>varImp</h2><span id='topic+varImp'></span>

<h3>Description</h3>

<p>Computes the variable importance for arbitrary measures from the 'measures' package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varImp(
  object,
  mincriterion = 0,
  conditional = FALSE,
  threshold = 0.2,
  nperm = 1,
  OOB = TRUE,
  pre1.0_0 = conditional,
  measure = "multiclass.Brier",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varImp_+3A_object">object</code></td>
<td>
<p>An object as returned by cforest.</p>
</td></tr>
<tr><td><code id="varImp_+3A_mincriterion">mincriterion</code></td>
<td>
<p>The value of the test statistic or 1 - p-value that must be exceeded in order to include a 
split in the computation of the importance. The default mincriterion = 0 guarantees that all splits are included.</p>
</td></tr>
<tr><td><code id="varImp_+3A_conditional">conditional</code></td>
<td>
<p>a logical determining whether unconditional or conditional computation of the importance is performed.</p>
</td></tr>
<tr><td><code id="varImp_+3A_threshold">threshold</code></td>
<td>
<p>The threshold value for (1 - p-value) of the association between the variable of interest and a 
covariate, which must be exceeded inorder to include the covariate in the conditioning scheme for the variable of 
interest (only relevant if conditional = TRUE). A threshold value of zero includes all covariates.</p>
</td></tr>
<tr><td><code id="varImp_+3A_nperm">nperm</code></td>
<td>
<p>The number of permutations performed.</p>
</td></tr>
<tr><td><code id="varImp_+3A_oob">OOB</code></td>
<td>
<p>A logical determining whether the importance is computed from the out-of-bag sample or the learning 
sample (not suggested).</p>
</td></tr>
<tr><td><code id="varImp_+3A_pre1.0_0">pre1.0_0</code></td>
<td>
<p>Prior to party version 1.0-0, the actual data values were permuted according to the original 
permutation importance suggested by Breiman (2001). Now the assignments to child nodes of splits in the variable 
of interest are permuted as described by Hapfelmeier et al. (2012), which allows for missing values in the 
explanatory variables and is more efficient wrt memory consumption and computing time. This method does not 
apply to conditional variable importances.</p>
</td></tr>
<tr><td><code id="varImp_+3A_measure">measure</code></td>
<td>
<p>The name of the measure of the 'measures' package that should be used for the variable importance calculation.</p>
</td></tr>
<tr><td><code id="varImp_+3A_...">...</code></td>
<td>
<p>Further arguments (like positive or negativ class) that are needed by the measure.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Many measures have not been tested for the usefulness of random forests variable importance. Use at your own risk.
</p>


<h3>Value</h3>

<p>Vector with computed permutation importance for each variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># multiclass case
data(iris)
iris.cf = cforest(Species ~ ., data = iris, control = cforest_unbiased(mtry = 2, ntree = 50))
set.seed(123)
vimp = varImp(object = iris.cf, measure = "multiclass.Brier")
vimp
</code></pre>

<hr>
<h2 id='varImpACC'>varImpACC</h2><span id='topic+varImpACC'></span>

<h3>Description</h3>

<p>Computes the variable importance regarding the accuracy (ACC).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varImpACC(
  object,
  mincriterion = 0,
  conditional = FALSE,
  threshold = 0.2,
  nperm = 1,
  OOB = TRUE,
  pre1.0_0 = conditional
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varImpACC_+3A_object">object</code></td>
<td>
<p>An object as returned by cforest.</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_mincriterion">mincriterion</code></td>
<td>
<p>The value of the test statistic or 1 - p-value that must be exceeded in order to include a 
split in the computation of the importance. The default mincriterion = 0 guarantees that all splits are included.</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_conditional">conditional</code></td>
<td>
<p>The value of the test statistic or 1 - p-value that must be exceeded in order to include a split 
in the computation of the importance. The default mincriterion = 0 guarantees that all splits are included.</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_threshold">threshold</code></td>
<td>
<p>The threshold value for (1 - p-value) of the association between the variable of interest and a 
covariate, which must be exceeded inorder to include the covariate in the conditioning scheme for the variable of 
interest (only relevant if conditional = TRUE). A threshold value of zero includes all covariates.</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_nperm">nperm</code></td>
<td>
<p>The number of permutations performed.</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_oob">OOB</code></td>
<td>
<p>A logical determining whether the importance is computed from the out-of-bag sample or the learning 
sample (not suggested).</p>
</td></tr>
<tr><td><code id="varImpACC_+3A_pre1.0_0">pre1.0_0</code></td>
<td>
<p>Prior to party version 1.0-0, the actual data values were permuted according to the original 
permutation importance suggested by Breiman (2001). Now the assignments to child nodes of splits in the variable 
of interest are permuted as described by Hapfelmeier et al. (2012), which allows for missing values in the 
explanatory variables and is more efficient wrt memory consumption and computing time. This method does not 
apply to conditional variable importances.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with computed permutation importance for each variable
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(iris)
iris2 = iris
iris2$Species = factor(iris$Species == "versicolor")
iris.cf = cforest(Species ~ ., data = iris2,control = cforest_unbiased(mtry = 2, ntree = 50))
set.seed(123)
a = varImpACC(object = iris.cf)

</code></pre>

<hr>
<h2 id='varImpAUC'>varImpAUC</h2><span id='topic+varImpAUC'></span>

<h3>Description</h3>

<p>Computes the variable importance regarding the AUC. Bindings are not taken into account in the AUC definition as they did 
not provide as good results as the version without bindings in the paper of Janitza et. al (2013) (see References section).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varImpAUC(
  object,
  mincriterion = 0,
  conditional = FALSE,
  threshold = 0.2,
  nperm = 1,
  OOB = TRUE,
  pre1.0_0 = conditional
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varImpAUC_+3A_object">object</code></td>
<td>
<p>An object as returned by cforest.</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_mincriterion">mincriterion</code></td>
<td>
<p>The value of the test statistic or 1 - p-value that must be exceeded in order to include a 
split in the computation of the importance. The default mincriterion = 0 guarantees that all splits are included.</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_conditional">conditional</code></td>
<td>
<p>The value of the test statistic or 1 - p-value that must be exceeded in order to include a split 
in the computation of the importance. The default mincriterion = 0 guarantees that all splits are included.</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_threshold">threshold</code></td>
<td>
<p>The threshold value for (1 - p-value) of the association between the variable of interest and a 
covariate, which must be exceeded inorder to include the covariate in the conditioning scheme for the variable of 
interest (only relevant if conditional = TRUE). A threshold value of zero includes all covariates.</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_nperm">nperm</code></td>
<td>
<p>The number of permutations performed.</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_oob">OOB</code></td>
<td>
<p>A logical determining whether the importance is computed from the out-of-bag sample or the learning 
sample (not suggested).</p>
</td></tr>
<tr><td><code id="varImpAUC_+3A_pre1.0_0">pre1.0_0</code></td>
<td>
<p>Prior to party version 1.0-0, the actual data values were permuted according to the original 
permutation importance suggested by Breiman (2001). Now the assignments to child nodes of splits in the variable 
of interest are permuted as described by Hapfelmeier et al. (2012), which allows for missing values in the 
explanatory variables and is more efficient wrt memory consumption and computing time. This method does not 
apply to conditional variable importances.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For using the original AUC definition and multiclass AUC you can use the varImp function and specify the particular measure.
</p>


<h3>Value</h3>

<p>Vector with computed permutation importance for each variable
</p>


<h3>References</h3>

<p>https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-14-119
</p>


<h3>Examples</h3>

<pre><code class='language-R'> 
# multiclass case
data(iris)
iris2 = iris
iris2$Species = factor(iris$Species == "versicolor")
iris.cf = cforest(Species ~ ., data = iris2,control = cforest_unbiased(mtry = 2, ntree = 50))
set.seed(123)
varImpAUC(object = iris.cf)
</code></pre>

<hr>
<h2 id='varImpRanger'>varImpRanger</h2><span id='topic+varImpRanger'></span>

<h3>Description</h3>

<p>Computes the variable importance for ranger models and for arbitrary measures from the 'measures' package.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>varImpRanger(object, data, target, nperm = 1, measure = "multiclass.Brier")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="varImpRanger_+3A_object">object</code></td>
<td>
<p>An object as returned by cforest. <code><a href="ranger.html#topic+ranger">ranger</a></code> with option <code>keep.inbag = TRUE</code>.</p>
</td></tr>
<tr><td><code id="varImpRanger_+3A_data">data</code></td>
<td>
<p>Original data that was used for training the random forest.</p>
</td></tr>
<tr><td><code id="varImpRanger_+3A_target">target</code></td>
<td>
<p>Target variable as used in the trained model.</p>
</td></tr>
<tr><td><code id="varImpRanger_+3A_nperm">nperm</code></td>
<td>
<p>The number of permutations performed.</p>
</td></tr>
<tr><td><code id="varImpRanger_+3A_measure">measure</code></td>
<td>
<p>The name of the measure of the 'measures' package that should be used for the variable importance calculation.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Vector with computed permutation importance for each variable.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(ranger)
iris.rg = ranger(Species ~ ., data = iris, keep.inbag = TRUE, probability = TRUE)
vimp.ranger = varImpRanger(object = iris.rg, data = iris, target = "Species")
vimp.ranger

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
