<!DOCTYPE html><html><head><title>Help for package fplot</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {fplot}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#export_graph_start'><p>Graph export with garanteed text size</p></a></li>
<li><a href='#fit.off'><p>Closes the current plotting device and shows the result in the viewer</p></a></li>
<li><a href='#fplot-package'><p>Aggregate/conditional graphs and automatic layout using formulas</p></a></li>
<li><a href='#pdf_fit'><p>PDF export with guaranteed text size</p></a></li>
<li><a href='#plot_box'><p>Boxplots with possibly moderators</p></a></li>
<li><a href='#plot_distr'><p>Plot distributions, possibly conditional</p></a></li>
<li><a href='#plot_lines'><p>Display means conditionnally on some other values</p></a></li>
<li><a href='#png_fit'><p>PNG export with guaranteed text size</p></a></li>
<li><a href='#setFplot_dict'><p>Sets/gets the dictionary used in <code>fplot</code></p></a></li>
<li><a href='#setFplot_distr'><p>Sets the defaults of plot_distr</p></a></li>
<li><a href='#setFplot_page'><p>Sets the target page size for figure exporting</p></a></li>
<li><a href='#us_pub_econ'><p>Publication data sample</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Automatic Distribution Graphs Using Formulas</td>
</tr>
<tr>
<td>Version:</td>
<td>1.1.0</td>
</tr>
<tr>
<td>Imports:</td>
<td>stats, graphics, utils, Formula, Rcpp, grDevices, dreamerr(&ge;
1.1.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, fixest, pdftools</td>
</tr>
<tr>
<td>LinkingTo:</td>
<td>Rcpp</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.5.0), data.table</td>
</tr>
<tr>
<td>Description:</td>
<td>Easy way to plot regular/weighted/conditional distributions by using formulas. The core of the package concerns distribution plots which are automatic: the many options are tailored to the data at hand to offer the nicest and most meaningful graphs possible &ndash; with no/minimum user input. Further provide functions to plot conditional trends and box plots. See <a href="https://lrberge.github.io/fplot/">https://lrberge.github.io/fplot/</a> for more information.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-08-24 14:56:16 UTC; lrberge</td>
</tr>
<tr>
<td>Author:</td>
<td>Laurent Berge [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Laurent Berge &lt;laurent.berge@u-bordeaux.fr&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-08-24 16:20:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='export_graph_start'>Graph export with garanteed text size</h2><span id='topic+export_graph_start'></span><span id='topic+export_graph_end'></span>

<h3>Description</h3>

<p>This function facilitates graph exportation by taking into account the final
destination of the graph (typically a document) and allowing the user to use
point size, an intuitive unit
in written documents, as the graph scaler. Once located in the final document, the text of the graph
at the default size will be at the defined point size.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>export_graph_start(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  res = 300,
  type = NULL,
  ...
)

export_graph_end()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="export_graph_start_+3A_file">file</code></td>
<td>
<p>Character scalar. The name of the file in which to save the graph.
If the argument type is <code>NULL</code>, the type of file is deduced from the extension.
If your file extension is different from your file type, you need to use the
argument <code>type</code>.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_pt">pt</code></td>
<td>
<p>The size of the text, in pt, once the figure is inserted in your final document.
The default is 10. This means that all text appearing in the plot with <code>cex = 1</code>
will appear with 10pt-sized fonts in your document.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_width">width</code></td>
<td>
<p>The width of the graph, expressed in percentage of the width of
the body-text of the document in which it will be inserted. Default is 1, which means
that the graph will take 100% of the text width. It can also be equal to a character
of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the following units
are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code> (text width),
<code>"ph"</code> (page height), <code>"th"</code> (text height).
Absolute sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_height">height</code></td>
<td>
<p>Numeric between 0 and 1 or character scalar. The height of the graph,
expressed in percentage of the height of the body-text of the document in which it
will be inserted. Default is missing, and the height is determined by the other
argument <code>w2h</code>. This argument should range between 0 and 1. It can also be
equal to a character of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the
following units are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code>
(text width), <code>"ph"</code> (page height), <code>"th"</code> (text height). Absolute
sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_w2h">w2h</code></td>
<td>
<p>Numeric scalar. Used to determine the height of the figure based on
the width. By default it is equal to <code>1.75</code> which means that the graph
will be 1.75 larger than tall. Note that when argument <code>sideways = TRUE</code>,
the default for the height becomes <code style="white-space: pre;">&#8288;90%&#8288;</code>.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_h2w">h2w</code></td>
<td>
<p>Numeric scalar, default is missing. Used to determine the aspectr ratio of the figure.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_sideways">sideways</code></td>
<td>
<p>Logical, defaults to <code>FALSE</code>. If the figure will be placed in
landscape in the final document, then <code>sideways</code> should be equal to <code>TRUE</code>.
If TRUE, then the argument <code>width</code> now refers to the height of the text, and the
argument <code>height</code> to its width.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_res">res</code></td>
<td>
<p>Numeric, the resolution in ppi. Default is 300.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_type">type</code></td>
<td>
<p>Character scalar, default is <code>NULL</code>. The type of file to be created.
If <code>NULL</code>, the default, then the type of file is deduced from the extension.</p>
</td></tr>
<tr><td><code id="export_graph_start_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to <code><a href="grDevices.html#topic+png">bmp</a></code>,
<code><a href="grDevices.html#topic+png">png</a></code>, <code><a href="grDevices.html#topic+png">jpeg</a></code>, or
<code><a href="grDevices.html#topic+png">tiff</a></code>. For example: <code>antialias</code>, <code>bg</code>, etc.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To export a ggplot2 graph, remember that you need to <strong>print</strong> it!
</p>
<div class="sourceCode"><pre>library(ggplot2)
data = data.frame(x = c(1, 2, 3, 4, 5), y = c(2, 4, 6, 8, 10))

# NOT GOOD
export_graph_start("test.pdf")
ggplot(data, aes(x, y)) +
  geom_point(color = "#54BF98") +
  geom_line(color = "#d34661")
export_graph_end()

# GOOD
my_graph = ggplot(data, aes(x, y)) +
             geom_point(color = "#54BF98") +
             geom_line(color = "#d34661")

export_graph_start("test.pdf")
print(my_graph)
export_graph_end()
</pre></div>
<p>When the function <code>export_graph_end()</code> is called, the resulting exported graph
is displayed in the Viewer. The viewer function is found with
<code>getOption("viewer")</code> and should work on RStudio and VSCode (with the R extension).
</p>


<h3>Value</h3>

<p>These functions do not return anything in R. <code>export_graph_start</code> creates a
file linked to the R graphics engine, in which subsequent plots are saved.
<code>export_graph_end</code> closes the connection and the file.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>export_graph_end()</code>: Ends the connection to the current export and creates the file.
</p>
</li></ul>


<h3>Setting the page size</h3>

<p>You can set the page size with the function <code><a href="#topic+setFplot_page">setFplot_page</a></code>,
which defines the size of the page and its margins to deduce the size of the body
of the text in which the figures will be inserted. By default the page is considered
to be US-letter with <em>normal</em> margins (not too big nor thin).
</p>
<p>It is important to set the page size appropriately to have a final plotting-text size
guaranteed once the figure is inserted in the document.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>The tool to set the page size and the exporting defaults: <code><a href="#topic+setFplot_page">setFplot_page</a></code>.
Exporting functions <code><a href="#topic+pdf_fit">pdf_fit</a></code>, <code><a href="#topic+pdf_fit">png_fit</a></code>,
<code><a href="#topic+pdf_fit">jpeg_fit</a></code>.
</p>
<p>The functions <code><a href="#topic+export_graph_start">export_graph_start()</a></code> and <code><a href="#topic+export_graph_end">export_graph_end()</a></code> provide similar features.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
tmpFile = file.path(tempdir(), "png_examples.pdf")

# we start the exportation
export_graph_start(tmpFile, pt = 8)

plot(1, 1, type = "n", ann = FALSE)
text(1, 1, "This text will be displayed in 8pt.")

# the line below closes the connection and displays the 
# graph in the viewer pane if appropritate
export_graph_end()

</code></pre>

<hr>
<h2 id='fit.off'>Closes the current plotting device and shows the result in the viewer</h2><span id='topic+fit.off'></span>

<h3>Description</h3>

<p><em>This function is deprecated: Please use the functions <code><a href="#topic+export_graph_start">export_graph_start()</a></code>
and <code><a href="#topic+export_graph_end">export_graph_end()</a></code> instead.</em>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>fit.off()
</code></pre>


<h3>Details</h3>

<p>To be used in combination with <code><a href="#topic+pdf_fit">pdf_fit</a></code> or <code><a href="#topic+png_fit">png_fit</a></code>
when exporting images. It performs exactly the same thing as <code>dev.off()</code> but additionaly
shows the resulting graph in the viewer pane provided you're using RStudio.
</p>
<p>To view the results of PDF exports, the function <code>pdf_convert</code> from package <code>pdftools</code>
is used to convert the PDF files into images &ndash; so you need to have installed
<code>pdftools</code> to make it work.
</p>
<p>In PDFs, only the first page will be viewed.
</p>


<h3>Value</h3>

<p>This function does not return anything in R. It closes the connection between the
R graphics engine and a file that has been defined via one of the functions:
pdf_fitpng_fit
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>The tool to set the page size and the exporting defaults: <code><a href="#topic+setFplot_page">setFplot_page</a></code>.
Exporting functions <code><a href="#topic+pdf_fit">pdf_fit</a></code>, <code><a href="#topic+pdf_fit">png_fit</a></code>,
<code><a href="#topic+pdf_fit">jpeg_fit</a></code>.
</p>
<p>The functions <code><a href="#topic+export_graph_start">export_graph_start()</a></code> and <code><a href="#topic+export_graph_end">export_graph_end()</a></code> provide similar features.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Exportation example
# The functions pdf_fit, png_fit, etc, guarantee the right
#  point size of the texts present in the graph.
# But you must give the exact size the graph will take in your final document.
# =&gt; first use the function setFplot_page, default is:
# setFplot_page(page = "us", margins = "normal")
# By default the graph takes 100% of the text width

data(us_pub_econ)

tmpFile = file.path(tempdir(), "DISTR -- institutions.png")

png_fit(tmpFile)
plot_distr(~institution, us_pub_econ)
fit.off()

# What's the consequence of increasing the point size of the text?
png_fit(tmpFile, pt = 15)
plot_distr(~institution, us_pub_econ)
fit.off()


</code></pre>

<hr>
<h2 id='fplot-package'>Aggregate/conditional graphs and automatic layout using formulas</h2><span id='topic+fplot'></span><span id='topic+fplot-package'></span>

<h3>Description</h3>

<p><span class="pkg">fplot</span> provides automatic plotting of common graphs (distributions, lines, bar plots and boxplots). The syntax uses formulas, allowing aggregate/conditional/weighted graphs with minimum efforts. The many arguments are automatically adjusted to the data in order to provide the nicest and most meaningful graphs.
</p>


<h3>Details</h3>

<p>The core functions is <code><a href="#topic+plot_distr">plot_distr</a></code> to draw distributions.
Two other graphical functions are provided for convenience: <code><a href="#topic+plot_lines">plot_lines</a></code> to represent the (usually temporal) evolution of some variables, and <code><a href="#topic+plot_box">plot_box</a></code> to easily represent conditional boxplots.
</p>
<p>It also integrates tools to easily export graphs: <code><a href="#topic+pdf_fit">pdf_fit</a></code> and <code><a href="#topic+png_fit">png_fit</a></code>. In these functions, instead of providing the size of the graphics, you instead give the point size that the text should have in the final document&ndash;because an exported graph usually ends up in a document. You can set the size of your document with the function <code><a href="#topic+setFplot_page">setFplot_page</a></code>. If you use the function <code><a href="#topic+fit.off">fit.off</a></code> to close the connection, you will also see how the export looks like in the Viewer pane.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Laurent Berge <a href="mailto:laurent.berge@u-bordeaux.fr">laurent.berge@u-bordeaux.fr</a>
</p>

<hr>
<h2 id='pdf_fit'>PDF export with guaranteed text size</h2><span id='topic+pdf_fit'></span>

<h3>Description</h3>

<p>(<em>This function is deprecated: Please use the functions <code><a href="#topic+export_graph_start">export_graph_start()</a></code>
and <code><a href="#topic+export_graph_end">export_graph_end()</a></code> instead.</em>)
This function is an alternative to <code><a href="grDevices.html#topic+pdf">pdf</a></code>, it makes it easy
to export figures of appropriate size that should end up in a document. Instead
of providing the height and width of the figure, you provide the fraction of the
text-width the figure should take, and the target font-size at which the plotting
text should be rendered. The size of the plotting text, once the figure is
in the final document, is guaranteed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pdf_fit(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pdf_fit_+3A_file">file</code></td>
<td>
<p>The name of the file to which export the figure.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_pt">pt</code></td>
<td>
<p>The size of the text, in pt, once the figure is inserted in your final document.
The default is 10. This means that all text appearing in the plot with <code>cex = 1</code>
will appear with 10pt-sized fonts in your document.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_width">width</code></td>
<td>
<p>The width of the graph, expressed in percentage of the width of
the body-text of the document in which it will be inserted. Default is 1, which means
that the graph will take 100% of the text width. It can also be equal to a character
of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the following units
are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code> (text width),
<code>"ph"</code> (page height), <code>"th"</code> (text height).
Absolute sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_height">height</code></td>
<td>
<p>Numeric between 0 and 1 or character scalar. The height of the graph,
expressed in percentage of the height of the body-text of the document in which it
will be inserted. Default is missing, and the height is determined by the other
argument <code>w2h</code>. This argument should range between 0 and 1. It can also be
equal to a character of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the
following units are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code>
(text width), <code>"ph"</code> (page height), <code>"th"</code> (text height). Absolute
sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_w2h">w2h</code></td>
<td>
<p>Numeric scalar. Used to determine the height of the figure based on
the width. By default it is equal to <code>1.75</code> which means that the graph
will be 1.75 larger than tall. Note that when argument <code>sideways = TRUE</code>,
the default for the height becomes <code style="white-space: pre;">&#8288;90%&#8288;</code>.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_h2w">h2w</code></td>
<td>
<p>Numeric scalar, default is missing. Used to determine the aspectr ratio of the figure.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_sideways">sideways</code></td>
<td>
<p>Logical, defaults to <code>FALSE</code>. If the figure will be placed in
landscape in the final document, then <code>sideways</code> should be equal to <code>TRUE</code>.
If TRUE, then the argument <code>width</code> now refers to the height of the text, and the
argument <code>height</code> to its width.</p>
</td></tr>
<tr><td><code id="pdf_fit_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to <code><a href="grDevices.html#topic+pdf">pdf</a></code>.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>If you use <code><a href="#topic+fit.off">fit.off</a></code> instead of <code>dev.off</code> to close the graph,
the resulting graph will be displayed in the viewer pane. So you don't have to open
the document to see how it looks.
</p>
<p>To export a ggplot2 graph, remember that you need to <strong>print</strong> it!
</p>
<div class="sourceCode"><pre>library(ggplot2)
data = data.frame(x = c(1, 2, 3, 4, 5), y = c(2, 4, 6, 8, 10))

# NOT GOOD
pdf_fit("test.pdf")
ggplot(data, aes(x, y)) +
  geom_point(color = "#54BF98") +
  geom_line(color = "#d34661")
fit.off()

# GOOD
my_graph = ggplot(data, aes(x, y)) +
             geom_point(color = "#54BF98") +
             geom_line(color = "#d34661")

pdf_fit("test.pdf")
print(my_graph)
fit.off()
</pre></div>


<h3>Value</h3>

<p>This function does not return anything. It connects the output of the R graphics
engine to a file.
</p>


<h3>Setting the page size</h3>

<p>You can set the page size with the function <code><a href="#topic+setFplot_page">setFplot_page</a></code>,
which defines the size of the page and its margins to deduce the size of the body
of the text in which the figures will be inserted. By default the page is considered
to be US-letter with <em>normal</em> margins (not too big nor thin).
</p>
<p>It is important to set the page size appropriately to have a final plotting-text size
guaranteed once the figure is inserted in the document.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>To set the geometry and the defaults: <code><a href="#topic+setFplot_page">setFplot_page</a></code>.
To close the graph and display it on the viewer pane: <code><a href="#topic+fit.off">fit.off</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# This function creates figures made to be inserted
# in a Latex document (US-letter with "normal" margins)
# By default, the figures should take 100% of the
# text width. If so, the size of the text in the figures
# will be exact.

# You need pdftools and knitr to display PDFs in the viewer pane with fit.off
if(require(pdftools) &amp;&amp; require(knitr)){

  tmpFile = file.path(tempdir(), "pdf_examples.pdf")

  pdf_fit(tmpFile, pt = 8)
  plot(1, 1, type = "n", ann = FALSE)
  text(1, 1, "This text will be displayed in 8pt.")
  fit.off()

  pdf_fit(tmpFile, pt = 12)
  plot(1, 1, type = "n", ann = FALSE)
  text(1, 1, "This text will be displayed in 12pt.")
  fit.off()

  pdf_fit(tmpFile, pt = 12, sideways = TRUE)
  plot(1, 1, type = "n", ann = FALSE)
  text(1, 1, "This text will be displayed in 12pt if in sideways.")
  fit.off()

  # If we reduce the end plot width but keep font size constant
  # this will lead to a very big font as compared to the plot
  pdf_fit(tmpFile, pt = 8, width = "50%")
  plot(1, 1, type = "n", ann = FALSE)
  text(1, 1, "This text will be displayed in 8pt\nif in 50% of the text width.")
  fit.off()
}






</code></pre>

<hr>
<h2 id='plot_box'>Boxplots with possibly moderators</h2><span id='topic+plot_box'></span>

<h3>Description</h3>

<p>This function allows to draw a boxplot, with possibly separating different moderators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_box(
  fml,
  data,
  case,
  moderator,
  inCol,
  outCol = "black",
  density = -1,
  lty = 1,
  pch = 18,
  addLegend = TRUE,
  legend_options = list(),
  lwd = 2,
  outlier,
  dict = NULL,
  dict_case,
  dict_moderator,
  order_case,
  order_moderator,
  addMean,
  mean.col = "darkred",
  mean.pch = 18,
  mean.cex = 2,
  mod.title = TRUE,
  labels.tilted,
  trunc = 20,
  trunc.method = "auto",
  line.max,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_box_+3A_fml">fml</code></td>
<td>
<p>A numeric vector or a formula of the type: <code>vars ~ moderator_1 | moderator_2</code>. Note that if a formula is provided then the argument &lsquo;data&rsquo; must be provided. You can plot several variables, if you don't want a moderator, use 1 instead: e.g. <code>plot_box(Petal.Width +Petal.Length ~ 1, iris)</code>. You can plot all numeric variables from a data set using <code>"."</code>: <code>plot_box(. ~ 1, iris)</code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_data">data</code></td>
<td>
<p>A data.frame/data.table containing the relevant information.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_case">case</code></td>
<td>
<p>When argument fml is a vector, this argument can receive a vector of cases.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_moderator">moderator</code></td>
<td>
<p>When argument fml is a vector, this argument can receive a vector of moderators.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_incol">inCol</code></td>
<td>
<p>A vector of colors that will be used for within the boxes.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_outcol">outCol</code></td>
<td>
<p>The color of the outer box. Default is black.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_density">density</code></td>
<td>
<p>The density of lines within the boxes. By default it is equal to -1, which means the boxes are filled with color.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_lty">lty</code></td>
<td>
<p>The type of lines for the border of the boxes. Default is 1 (solid line).</p>
</td></tr>
<tr><td><code id="plot_box_+3A_pch">pch</code></td>
<td>
<p>The patch of the outliers. Default is 18.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_addlegend">addLegend</code></td>
<td>
<p>Default is <code>TRUE</code>. Should a legend be added at the top of the graph is there is more than one moderator?</p>
</td></tr>
<tr><td><code id="plot_box_+3A_legend_options">legend_options</code></td>
<td>
<p>A list. Other options to be passed to <code>legend</code> which
concerns the legend for the moderator.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_lwd">lwd</code></td>
<td>
<p>The width of the lines making the boxes. Default is 2.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_outlier">outlier</code></td>
<td>
<p>Default is <code>TRUE</code>. Should the outliers be displayed?</p>
</td></tr>
<tr><td><code id="plot_box_+3A_dict">dict</code></td>
<td>
<p>A dictionnary to rename the variables names in the axes and legend.
Should be a named vector. By default it s the value of <code>getFplot_dict()</code>,
which you can set with the function <code><a href="#topic+setFplot_dict">setFplot_dict</a></code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_dict_case">dict_case</code></td>
<td>
<p>A named character vector. If provided, it changes the values of the variable &lsquo;case&rsquo; to the ones contained in the vector <code>dict_case</code>. Example: I want to change my variable named &quot;a&quot; to &quot;Australia&quot; and &quot;b&quot; to &quot;Brazil&quot;, then I used <code>dict=c(a="Australia",b="Brazil")</code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_dict_moderator">dict_moderator</code></td>
<td>
<p>A named character vector. If provided, it changes the values of the variable &lsquo;moderator&rsquo; to the ones contained in the vector <code>dict_moderator</code>. Example: I want to change my variable named &quot;a&quot; to &quot;Australia&quot; and &quot;b&quot; to &quot;Brazil&quot;, then I used <code>dict=c(a="Australia",b="Brazil")</code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_order_case">order_case</code></td>
<td>
<p>Character vector. This element is used if the user wants the &lsquo;case&rsquo; values to be ordered in a certain way. This should be a regular expression (see <code><a href="base.html#topic+regex">regex</a></code> help for more info). There can be more than one regular expression. The variables satisfying the first regular expression will be placed first, then the order follows the sequence of regular expressions.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_order_moderator">order_moderator</code></td>
<td>
<p>Character vector. This element is used if the user wants the &lsquo;moderator&rsquo; values to be ordered in a certain way. This should be a regular expression (see <code><a href="base.html#topic+regex">regex</a></code> help for more info). There can be more than one regular expression. The variables satisfying the first regular expression will be placed first, then the order follows the sequence of regular expressions.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_addmean">addMean</code></td>
<td>
<p>Whether to add the average for each boxplot. Default is true.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_mean.col">mean.col</code></td>
<td>
<p>The color of the mean. Default is darkred.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_mean.pch">mean.pch</code></td>
<td>
<p>The patch of the mean, default is 18.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_mean.cex">mean.cex</code></td>
<td>
<p>The cex of the mean, default is 2.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_mod.title">mod.title</code></td>
<td>
<p>Character scalar. The title of the legend in case there is a
moderator. You can set it to <code>TRUE</code> (the default) to display the moderator
name. To display no title, set it to <code>NULL</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_labels.tilted">labels.tilted</code></td>
<td>
<p>Whether there should be tilted labels. Default is <code>FALSE</code>
except when the data is split by moderators (see <code>mod.method</code>).</p>
</td></tr>
<tr><td><code id="plot_box_+3A_trunc">trunc</code></td>
<td>
<p>If the main variable is a character, its values are truncaded to
<code>trunc</code> characters. Default is 20. You can set the truncation method with
the argument <code>trunc.method</code>.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_trunc.method">trunc.method</code></td>
<td>
<p>If the elements of the x-axis need to be truncated, this
is the truncation method. It can be &quot;auto&quot;, &quot;right&quot; or &quot;mid&quot;.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_line.max">line.max</code></td>
<td>
<p>Option for the x-axis, how far should the labels go. Default is 1 for normal labels, 2 for tilted labels.</p>
</td></tr>
<tr><td><code id="plot_box_+3A_...">...</code></td>
<td>
<p>Other parameters to be passed to <code>plot</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly returns the coordinates of the x-axis.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Simple iris boxplot
plot(1:10)

# All numeric variables
plot_box(. ~ 1, iris)

# All numeric variable / splitting by species
plot_box(. ~ Species, iris)

# idem but with renaming
plot_box(. ~ Species, iris, dict = c(Species="Iris species",
         setosa="SETOSA", Petal.Width="Width (Petal)"))

# Now using two moderators
base = iris
base$period = sample(1:4, 150, TRUE)

plot_box(Petal.Length ~ period | Species, base)





</code></pre>

<hr>
<h2 id='plot_distr'>Plot distributions, possibly conditional</h2><span id='topic+plot_distr'></span>

<h3>Description</h3>

<p>This function plots distributions of items (a bit like an histogram) which can
be easily conditioned over.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_distr(
  fml,
  data,
  moderator,
  weight,
  sorted,
  log,
  nbins,
  bin.size,
  legend_options = list(),
  top,
  yaxis.show = TRUE,
  yaxis.num,
  col,
  border = "black",
  mod.method,
  within,
  total,
  mod.select,
  mod.NA = FALSE,
  at_5,
  labels.tilted,
  other,
  cumul = FALSE,
  plot = TRUE,
  sep,
  centered = TRUE,
  weight.fun,
  int.categorical,
  dict = NULL,
  mod.title = TRUE,
  labels.angle,
  cex.axis,
  trunc = 20,
  trunc.method = "auto",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_distr_+3A_fml">fml</code></td>
<td>
<p>A formula or a vector. If a formula, it must be of the type:
<code>weights ~ var | moderator</code>. If there are no moderator nor weights, you
can use directly a vector, or use a one-sided formula <code>fml = ~var</code>. You
can use multiple variables as weights, if so, you cannot use moderators at the
same time. See examples.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_data">data</code></td>
<td>
<p>A data.frame: data set containing the variables in the formula.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_moderator">moderator</code></td>
<td>
<p>Optional, only if argument <code>fml</code> is a vector. A vector
of moderators.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_weight">weight</code></td>
<td>
<p>Optional, only if argument <code>fml</code> is a vector. A vector of
(positive) weights.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_sorted">sorted</code></td>
<td>
<p>Logical: should the first elements displayed be the most frequent?
By default this is the case except for numeric values put to log or to integers.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_log">log</code></td>
<td>
<p>Logical, only used when the data is numeric. If <code>TRUE</code>, then
the data is put to logarithm beforehand. By default numeric values are put to
log if the log variation exceeds 3.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_nbins">nbins</code></td>
<td>
<p>Maximum number of items displayed. The default depends on the number
of moderator cases. When there is no moderator, the default is 15, augmented
to 20 if there are less than 20 cases.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_bin.size">bin.size</code></td>
<td>
<p>Only used for numeric values. If provided, it creates bins of
observations of size <code>bin.size</code>. It creates bins by default for numeric non-integer data.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_legend_options">legend_options</code></td>
<td>
<p>A list. Other options to be passed to <code>legend</code> which
concerns the legend for the moderator.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_top">top</code></td>
<td>
<p>What to display on the top of the bars. Can be equal to &quot;frac&quot; (for
shares), &quot;nb&quot; or &quot;none&quot;. The default depends on the type of the plot. To disable
it you can also set it to <code>FALSE</code> or the empty string.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_yaxis.show">yaxis.show</code></td>
<td>
<p>Whether the y-axis should be displayed, default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_yaxis.num">yaxis.num</code></td>
<td>
<p>Whether the y-axis should display regular numbers instead of
frequencies in percentage points. By default it shows numbers only when the data
is weighted with a different function than the sum. For conditionnal distributions,
a numeric y-axis can be displayed only when <code>mod.method = "sideTotal"</code>,
<code>mod.method = "splitTotal"</code> or <code>mod.method = "stack"</code>, since for the
within distributions it does not make sense (because the data is rescaled for each moderator).</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_col">col</code></td>
<td>
<p>A vector of colors, default is close to paired. You can also use &ldquo;set1&rdquo;
or &ldquo;paired&rdquo;.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_border">border</code></td>
<td>
<p>Outer color of the bars. Defaults is <code>"black"</code>. Use <code>NA</code>
to remove the borders.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_mod.method">mod.method</code></td>
<td>
<p>A character scalar: either i) &ldquo;split&rdquo;, the default for
categorical data, ii) &ldquo;side&rdquo;, the default for data in logarithmic form
or numeric data, or iii) &ldquo;stack&rdquo;. This is only used when there is more
ù than one moderator. If <code>"split"</code>: there is one separate histogram for each
moderator case. If <code>"side"</code>: moderators are represented side by side for
each value of the variable. If <code>"stack"</code>: the bars of the moderators are
stacked onto each other, the bar heights representing the distribution in the
total population. You can use the other arguments <code>within</code> and <code>total</code>
to say whether the distributions should be within each moderator or over the
total distribution.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_within">within</code></td>
<td>
<p>Logical, default is missing. Whether the distributions should be
scaled to reflect the distribution within each moderator value. By default it
is <code>TRUE</code> if <code>mod.method</code> is different from <code>"stack"</code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_total">total</code></td>
<td>
<p>Logical, default is missing. Whether the distributions should be
scaled to reflect the total distribution (and not the distribution within each
moderator value). By default it is <code>TRUE</code> only if <code>mod.method="stack"</code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_mod.select">mod.select</code></td>
<td>
<p>Which moderators to select. By default the top 3 moderators
in terms of frequency (or in terms of weight value if there's a weight) are displayed.
If provided, it must be a vector of moderator values whose length cannot be greater
than 5. Alternatively, you can put an integer between 1 and 5. This argument
also accepts regular expressions.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_mod.na">mod.NA</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If <code>TRUE</code>, and if the moderator
contains <code>NA</code> values, all <code>NA</code> values from the moderator will be treated
as a regular case: allows to display the distribution for missing values.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_at_5">at_5</code></td>
<td>
<p>Equal to <code>FALSE</code>, <code>"roman"</code> or <code>"line"</code>. When plotting
categorical variables, adds a small Roman number under every 5 bars
(<code>at_5 = "roman"</code>), or draws a thick axis line every 5 bars (<code>at_5 = "line"</code>).
Helps to get the rank of the bars. The default depends on the type of data &ndash;
Not implemented when there is a moderator.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_labels.tilted">labels.tilted</code></td>
<td>
<p>Whether there should be tilted labels. Default is <code>FALSE</code>
except when the data is split by moderators (see <code>mod.method</code>).</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_other">other</code></td>
<td>
<p>Logical. Should there be a last column counting for the observations
not displayed? Default is <code>TRUE</code> except when the data is split.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_cumul">cumul</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If <code>TRUE</code>, then the cumulative
distribution is plotted.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_plot">plot</code></td>
<td>
<p>Logical, default is <code>TRUE</code>. If <code>FALSE</code> nothing is plotted,
only the data is returned.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_sep">sep</code></td>
<td>
<p>Positive number. The separation space between the bars. The scale
depends on the type of graph.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_centered">centered</code></td>
<td>
<p>Logical, default is <code>TRUE</code>. For numeric data only and when
<code>sorted=FALSE</code>, whether the histogram should be centered on the mode.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_weight.fun">weight.fun</code></td>
<td>
<p>A function, by default it is <code>sum</code>. Aggregate function
to be applied to the weight with respect to variable and the moderator. See examples.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_int.categorical">int.categorical</code></td>
<td>
<p>Logical. Whether integers should be treated as categorical
variables. By default they are treated as categorical only when their range is
small (i.e. smaller than 1000).</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_dict">dict</code></td>
<td>
<p>A dictionnary to rename the variables names in the axes and legend.
Should be a named vector. By default it s the value of <code>getFplot_dict()</code>,
which you can set with the function <code><a href="#topic+setFplot_dict">setFplot_dict</a></code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_mod.title">mod.title</code></td>
<td>
<p>Character scalar. The title of the legend in case there is a
moderator. You can set it to <code>TRUE</code> (the default) to display the moderator
name. To display no title, set it to <code>NULL</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_labels.angle">labels.angle</code></td>
<td>
<p>Only if the labels of the x-axis are tilted. The angle of the tilt.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_cex.axis">cex.axis</code></td>
<td>
<p>Cex value to be passed to biased labels. By defaults, it finds
automatically the right value.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_trunc">trunc</code></td>
<td>
<p>If the main variable is a character, its values are truncaded to
<code>trunc</code> characters. Default is 20. You can set the truncation method with
the argument <code>trunc.method</code>.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_trunc.method">trunc.method</code></td>
<td>
<p>If the elements of the x-axis need to be truncated, this
is the truncation method. It can be &quot;auto&quot;, &quot;right&quot; or &quot;mid&quot;.</p>
</td></tr>
<tr><td><code id="plot_distr_+3A_...">...</code></td>
<td>
<p>Other elements to be passed to plot.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Most default values can be modified with the function <code><a href="#topic+setFplot_distr">setFplot_distr</a></code>.
</p>


<h3>Value</h3>

<p>This function returns <em>invisibly</em> the output data.table containing the processed data
used for plotting. With the argument <code>plot = FALSE</code>, only the data is returned.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>See Also</h3>

<p>To plot temporal evolutions: <code><a href="#topic+plot_lines">plot_lines</a></code>. For boxplot: <code><a href="#topic+plot_box">plot_box</a></code>.
To export graphs: <code><a href="#topic+pdf_fit">pdf_fit</a></code>, <code><a href="#topic+png_fit">png_fit</a></code>,
<code><a href="#topic+fit.off">fit.off</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Data on publications from U.S. institutions
data(us_pub_econ)

# 0) Let's set a dictionary for a better display of variables
setFplot_dict(c(institution = "U.S. Institution", jnl_top_25p = "Top 25% Pub.",
                jnl_top_5p = "Top 5% Pub.", Frequency = "Publications"))

# 1) Let's plot the distribution of publications by institutions:
plot_distr(~institution, us_pub_econ)

# When there is only the variable, you can use a vector instead:
plot_distr(us_pub_econ$institution)

# 2) Now the production of institution weighted by journal quality
plot_distr(jnl_top_5p ~ institution, us_pub_econ)

# You can plot several variables:
plot_distr(1 + jnl_top_25p + jnl_top_5p ~ institution, us_pub_econ)

# 3) Let's plot the journal distribution for the top 3 institutions

# We can get the data from the previous graph
graph_data = plot_distr(jnl_top_5p ~ institution, us_pub_econ, plot = FALSE)
# And then select the top universities
top3_instit = graph_data$x[1:3]
top5_instit = graph_data$x[1:5] # we'll use it later

# Now the distribution of journals
plot_distr(~ journal | institution, us_pub_econ[institution %in% top3_instit])
# Alternatively, you can use the argument mod.select:
plot_distr(~ journal | institution, us_pub_econ, mod.select = top3_instit)

# 3') Same graph as before with "other" column, 5 institutions
plot_distr(~ journal | institution, us_pub_econ,
           mod.select = top5_instit, other = TRUE)

#
# Example with continuous data
#

# regular histogram
plot_distr(iris$Sepal.Length)

# now splitting by species:
plot_distr(~ Sepal.Length | Species, iris)

# idem but the three distr. are separated:
plot_distr(~ Sepal.Length | Species, iris, mod.method = "split")

# Now the three are stacked
plot_distr(~ Sepal.Length | Species, iris, mod.method = "stack")



</code></pre>

<hr>
<h2 id='plot_lines'>Display means conditionnally on some other values</h2><span id='topic+plot_lines'></span>

<h3>Description</h3>

<p>The typical use of this function is to represents trends of average along some
categorical variable.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plot_lines(
  fml,
  data,
  time,
  moderator,
  mod.select,
  mod.NA = TRUE,
  smoothing_window = 0,
  fun,
  col = "set1",
  lty = 1,
  pch = c(19, 17, 15, 8, 5, 4, 3, 1),
  legend_options = list(),
  pt.cex = 2,
  lwd = 2,
  dict = NULL,
  mod.title = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plot_lines_+3A_fml">fml</code></td>
<td>
<p>A formula of the type <code>variable ~ time | moderator</code>. Note that
the moderator is optional. Can also be a vector representing the elements of
the variable If a formula is provided, then you must add the argument &lsquo;data&rsquo;.
You can use multiple variables. If so, you cannot use a moderator at the same time.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_data">data</code></td>
<td>
<p>Data frame containing the variables of the formula. Used only if the
argument &lsquo;fml&rsquo; is a formula.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_time">time</code></td>
<td>
<p>Only if argument &lsquo;fml&rsquo; is a vector. It should be the vector
of &lsquo;time&rsquo; identifiers to average over.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_moderator">moderator</code></td>
<td>
<p>Only if argument &lsquo;fml&rsquo; is a vector. It should be a vector
of conditional values to average over. This is an optional parameter.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_mod.select">mod.select</code></td>
<td>
<p>Which moderators to select. By default the top 5 moderators
in terms of frequency (or in terms of the value of fun in case of identical
frequencies) are displayed. If provided, it must be a vector of moderator values
whose length cannot be greater than 10. Alternatively, you can put an integer between 1 and 10.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_mod.na">mod.NA</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If <code>TRUE</code>, and if the moderator
contains <code>NA</code> values, all <code>NA</code> values from the moderator will be treated
as a regular case: allows to display the distribution for missing values.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_smoothing_window">smoothing_window</code></td>
<td>
<p>Default is 0. The number of time periods to average over.
Note that if it is provided the new value for each period is the average of
the current period and the <code>smoothing_window</code> time periods before and after.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_fun">fun</code></td>
<td>
<p>Function to apply when aggregating the values on the time variable.
Default is <code>mean</code>.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_col">col</code></td>
<td>
<p>The colors. Either a vector or a keyword (&ldquo;Set1&rdquo; or &ldquo;paired&rdquo;).
By default those are the &ldquo;Set1&rdquo; colors colorBrewer. This argument is
used only if there is a moderator.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_lty">lty</code></td>
<td>
<p>The line types, in the case there are more than one moderator.
By default it is equal to 1 (ie no difference between moderators).</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_pch">pch</code></td>
<td>
<p>The form types of the points, in the case there are more than one
moderator. By default it is equal to \8codec(19, 17, 15, 8, 5, 4, 3, 1).</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_legend_options">legend_options</code></td>
<td>
<p>A list containing additional parameters for the function
<code><a href="graphics.html#topic+legend">legend</a></code> &ndash; only concerns the moderator. Note that you can
set the additionnal arguments <code>trunc</code> and <code>trunc.method</code> which relates
to the number of characters to show and the truncation method. By default the
algorithm truncates automatically when needed.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_pt.cex">pt.cex</code></td>
<td>
<p>Default to 2. The <code>cex</code> of the points.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_lwd">lwd</code></td>
<td>
<p>Default to 2. The width of the lines.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_dict">dict</code></td>
<td>
<p>A dictionnary to rename the variables names in the axes and legend.
Should be a named vector. By default it s the value of <code>getFplot_dict()</code>,
which you can set with the function <code><a href="#topic+setFplot_dict">setFplot_dict</a></code>.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_mod.title">mod.title</code></td>
<td>
<p>Character scalar. The title of the legend in case there is a
moderator. You can set it to <code>TRUE</code> (the default) to display the moderator
name. To display no title, set it to <code>NULL</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="plot_lines_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to the function <code>plot</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function returns <em>invisibly</em> the output data.table containing the processed data
used for plotting.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(airquality)

plot_lines(Ozone ~ Day, airquality)

plot_lines(Ozone ~ Day | Month, airquality)

plot_lines(Ozone ~ Month | cut(Day, 8), airquality)


</code></pre>

<hr>
<h2 id='png_fit'>PNG export with guaranteed text size</h2><span id='topic+png_fit'></span><span id='topic+tiff_fit'></span><span id='topic+jpeg_fit'></span><span id='topic+bmp_fit'></span>

<h3>Description</h3>

<p>(<em>This function is deprecated: Please use the functions <code><a href="#topic+export_graph_start">export_graph_start()</a></code>
and <code><a href="#topic+export_graph_end">export_graph_end()</a></code> instead.</em>)
This is an alternative to <code><a href="grDevices.html#topic+png">png</a></code> and others. It makes it
easy to export figures that should end up in documents. Instead of providing the
height and width of the figure, you provide the fraction of the text-width the figure
should take, and the target font-size at which the plotting text should be rendered.
The size of the plotting text, once the figure is in the final document, is guaranteed.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>png_fit(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  res = 300,
  ...
)

tiff_fit(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  res = 300,
  ...
)

jpeg_fit(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  res = 300,
  ...
)

bmp_fit(
  file,
  pt = 10,
  width = 1,
  height,
  w2h = 1.75,
  h2w,
  sideways = FALSE,
  res = 300,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="png_fit_+3A_file">file</code></td>
<td>
<p>The name of the file to which export the figure.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_pt">pt</code></td>
<td>
<p>The size of the text, in pt, once the figure is inserted in your final document.
The default is 10. This means that all text appearing in the plot with <code>cex = 1</code>
will appear with 10pt-sized fonts in your document.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_width">width</code></td>
<td>
<p>The width of the graph, expressed in percentage of the width of
the body-text of the document in which it will be inserted. Default is 1, which means
that the graph will take 100% of the text width. It can also be equal to a character
of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the following units
are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code> (text width),
<code>"ph"</code> (page height), <code>"th"</code> (text height).
Absolute sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_height">height</code></td>
<td>
<p>Numeric between 0 and 1 or character scalar. The height of the graph,
expressed in percentage of the height of the body-text of the document in which it
will be inserted. Default is missing, and the height is determined by the other
argument <code>w2h</code>. This argument should range between 0 and 1. It can also be
equal to a character of the type <code>"100%"</code> or <code>"80%"</code>. Alternatively, the
following units are valid. Relative sizes: <code>"pw"</code> (page width), <code>"tw"</code>
(text width), <code>"ph"</code> (page height), <code>"th"</code> (text height). Absolute
sizes: <code>"in"</code>, <code>"cm"</code>, and <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_w2h">w2h</code></td>
<td>
<p>Numeric scalar. Used to determine the height of the figure based on
the width. By default it is equal to <code>1.75</code> which means that the graph
will be 1.75 larger than tall. Note that when argument <code>sideways = TRUE</code>,
the default for the height becomes <code style="white-space: pre;">&#8288;90%&#8288;</code>.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_h2w">h2w</code></td>
<td>
<p>Numeric scalar, default is missing. Used to determine the aspectr ratio of the figure.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_sideways">sideways</code></td>
<td>
<p>Logical, defaults to <code>FALSE</code>. If the figure will be placed in
landscape in the final document, then <code>sideways</code> should be equal to <code>TRUE</code>.
If TRUE, then the argument <code>width</code> now refers to the height of the text, and the
argument <code>height</code> to its width.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_res">res</code></td>
<td>
<p>Numeric, the resolution in ppi. Default is 300.</p>
</td></tr>
<tr><td><code id="png_fit_+3A_...">...</code></td>
<td>
<p>Other arguments to be passed to <code><a href="grDevices.html#topic+png">bmp</a></code>,
<code><a href="grDevices.html#topic+png">png</a></code>, <code><a href="grDevices.html#topic+png">jpeg</a></code>, or
<code><a href="grDevices.html#topic+png">tiff</a></code>. For example: <code>antialias</code>, <code>bg</code>, etc.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>This function does not return anything. It connects the output of the R graphics
engine to a file.
</p>


<h3>Setting the page size</h3>

<p>You can set the page size with the function <code><a href="#topic+setFplot_page">setFplot_page</a></code>,
which defines the size of the page and its margins to deduce the size of the body
of the text in which the figures will be inserted. By default the page is considered
to be US-letter with <em>normal</em> margins (not too big nor thin).
</p>
<p>It is important to set the page size appropriately to have a final plotting-text size
guaranteed once the figure is inserted in the document.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# This function creates figures made to be inserted
# in a Latex document (US-letter with "normal" margins)
# By default, the figures should take 100% of the
# text width. If so, the size of the text in the figures
# will be exact.

tmpFile = file.path(tempdir(), "png_examples.png")

png_fit(tmpFile, pt = 8)
plot(1, 1, type = "n", ann = FALSE)
text(1, 1, "This text will be displayed in 8pt.")
fit.off()

png_fit(tmpFile, pt = 12)
plot(1, 1, type = "n", ann = FALSE)
text(1, 1, "This text will be displayed in 12pt.")
fit.off()

png_fit(tmpFile, pt = 12, sideways = TRUE)
plot(1, 1, type = "n", ann = FALSE)
text(1, 1, "This text will be displayed in 12pt if in sideways.")
fit.off()

# If we reduce the end plot width but keep font size constant
# this will lead to a very big font as compared to the plot
png_fit(tmpFile, pt = 8, width = "50%")
plot(1, 1, type = "n", ann = FALSE)
text(1, 1, "This text will be displayed in 8pt\nif the graph is 50% of the text width.")
fit.off()

</code></pre>

<hr>
<h2 id='setFplot_dict'>Sets/gets the dictionary used in <code>fplot</code></h2><span id='topic+setFplot_dict'></span><span id='topic+getFplot_dict'></span>

<h3>Description</h3>

<p>Sets/gets the default dictionary used to rename the axes/moderator variables
in the functions of the package <code>fplot</code>. The dictionaries are used to relabel
variables (usually towards a fancier, more explicit formatting) that can be useful
not to explicitly use the arguments xlab/ylab when exporting graphs. By setting
the dictionary with <code>setFplot_dict</code>, you can avoid providing the argument
<code>dict</code> in <code>fplot</code> functions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setFplot_dict(dict)

getFplot_dict
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setFplot_dict_+3A_dict">dict</code></td>
<td>
<p>A named character vector. E.g. to change my variable named &quot;us_md&quot;
and &quot;state&quot; to (resp.) &quot;$ miilion&quot; and &quot;U.S. state&quot;, then use
<code>dict = c(us_md="$ million", state = "U.S. state")</code>.</p>
</td></tr>
</table>


<h3>Format</h3>

<p>An object of class <code>function</code> of length 1.
</p>


<h3>Details</h3>

<p>This function stores a named vector in the option &quot;fplot_dict&quot;.
The dictionary is automatically accessed by all <code>fplot</code> functions.
</p>


<h3>Value</h3>

<p>The function <code>setFplot_dict()</code> does not return anything, it only sets an option after checking
the format of the arguments.
</p>
<p>The function <code>getFplot_dict()</code> returns a named vector representing the
dictionary set in <code>setFplot_dict()</code>.
</p>


<h3>Author(s)</h3>

<p>Laurent Berge
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
data(airquality)
setFplot_dict(c(Ozone = "Ozone (ppb)"))
plot_distr(Ozone ~ Month, airquality, weight.fun = mean)

</code></pre>

<hr>
<h2 id='setFplot_distr'>Sets the defaults of plot_distr</h2><span id='topic+setFplot_distr'></span><span id='topic+getFplot_distr'></span>

<h3>Description</h3>

<p>The default values of most arguments of <code><a href="#topic+plot_distr">plot_distr</a></code> can be
set with <code>setFplot_distr</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setFplot_distr(
  sorted,
  log,
  top,
  yaxis.num,
  col,
  border = "black",
  mod.method,
  within,
  total,
  at_5,
  labels.tilted,
  other,
  cumul = FALSE,
  centered = TRUE,
  weight.fun,
  int.categorical,
  dict = NULL,
  mod.title = TRUE,
  labels.angle,
  cex.axis,
  trunc = 20,
  trunc.method = "auto",
  reset = FALSE
)

getFplot_distr()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setFplot_distr_+3A_sorted">sorted</code></td>
<td>
<p>Logical: should the first elements displayed be the most frequent?
By default this is the case except for numeric values put to log or to integers.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_log">log</code></td>
<td>
<p>Logical, only used when the data is numeric. If <code>TRUE</code>, then
the data is put to logarithm beforehand. By default numeric values are put to
log if the log variation exceeds 3.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_top">top</code></td>
<td>
<p>What to display on the top of the bars. Can be equal to &quot;frac&quot; (for
shares), &quot;nb&quot; or &quot;none&quot;. The default depends on the type of the plot. To disable
it you can also set it to <code>FALSE</code> or the empty string.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_yaxis.num">yaxis.num</code></td>
<td>
<p>Whether the y-axis should display regular numbers instead of
frequencies in percentage points. By default it shows numbers only when the data
is weighted with a different function than the sum. For conditionnal distributions,
a numeric y-axis can be displayed only when <code>mod.method = "sideTotal"</code>,
<code>mod.method = "splitTotal"</code> or <code>mod.method = "stack"</code>, since for the
within distributions it does not make sense (because the data is rescaled for each moderator).</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_col">col</code></td>
<td>
<p>A vector of colors, default is close to paired. You can also use &ldquo;set1&rdquo;
or &ldquo;paired&rdquo;.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_border">border</code></td>
<td>
<p>Outer color of the bars. Defaults is <code>"black"</code>. Use <code>NA</code>
to remove the borders.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_mod.method">mod.method</code></td>
<td>
<p>A character scalar: either i) &ldquo;split&rdquo;, the default for
categorical data, ii) &ldquo;side&rdquo;, the default for data in logarithmic form
or numeric data, or iii) &ldquo;stack&rdquo;. This is only used when there is more
ù than one moderator. If <code>"split"</code>: there is one separate histogram for each
moderator case. If <code>"side"</code>: moderators are represented side by side for
each value of the variable. If <code>"stack"</code>: the bars of the moderators are
stacked onto each other, the bar heights representing the distribution in the
total population. You can use the other arguments <code>within</code> and <code>total</code>
to say whether the distributions should be within each moderator or over the
total distribution.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_within">within</code></td>
<td>
<p>Logical, default is missing. Whether the distributions should be
scaled to reflect the distribution within each moderator value. By default it
is <code>TRUE</code> if <code>mod.method</code> is different from <code>"stack"</code>.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_total">total</code></td>
<td>
<p>Logical, default is missing. Whether the distributions should be
scaled to reflect the total distribution (and not the distribution within each
moderator value). By default it is <code>TRUE</code> only if <code>mod.method="stack"</code>.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_at_5">at_5</code></td>
<td>
<p>Equal to <code>FALSE</code>, <code>"roman"</code> or <code>"line"</code>. When plotting
categorical variables, adds a small Roman number under every 5 bars
(<code>at_5 = "roman"</code>), or draws a thick axis line every 5 bars (<code>at_5 = "line"</code>).
Helps to get the rank of the bars. The default depends on the type of data &ndash;
Not implemented when there is a moderator.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_labels.tilted">labels.tilted</code></td>
<td>
<p>Whether there should be tilted labels. Default is <code>FALSE</code>
except when the data is split by moderators (see <code>mod.method</code>).</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_other">other</code></td>
<td>
<p>Logical. Should there be a last column counting for the observations
not displayed? Default is <code>TRUE</code> except when the data is split.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_cumul">cumul</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. If <code>TRUE</code>, then the cumulative
distribution is plotted.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_centered">centered</code></td>
<td>
<p>Logical, default is <code>TRUE</code>. For numeric data only and when
<code>sorted=FALSE</code>, whether the histogram should be centered on the mode.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_weight.fun">weight.fun</code></td>
<td>
<p>A function, by default it is <code>sum</code>. Aggregate function
to be applied to the weight with respect to variable and the moderator. See examples.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_int.categorical">int.categorical</code></td>
<td>
<p>Logical. Whether integers should be treated as categorical
variables. By default they are treated as categorical only when their range is
small (i.e. smaller than 1000).</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_dict">dict</code></td>
<td>
<p>A dictionnary to rename the variables names in the axes and legend.
Should be a named vector. By default it s the value of <code>getFplot_dict()</code>,
which you can set with the function <code><a href="#topic+setFplot_dict">setFplot_dict</a></code>.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_mod.title">mod.title</code></td>
<td>
<p>Character scalar. The title of the legend in case there is a
moderator. You can set it to <code>TRUE</code> (the default) to display the moderator
name. To display no title, set it to <code>NULL</code> or <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_labels.angle">labels.angle</code></td>
<td>
<p>Only if the labels of the x-axis are tilted. The angle of the tilt.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_cex.axis">cex.axis</code></td>
<td>
<p>Cex value to be passed to biased labels. By defaults, it finds
automatically the right value.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_trunc">trunc</code></td>
<td>
<p>If the main variable is a character, its values are truncaded to
<code>trunc</code> characters. Default is 20. You can set the truncation method with
the argument <code>trunc.method</code>.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_trunc.method">trunc.method</code></td>
<td>
<p>If the elements of the x-axis need to be truncated, this
is the truncation method. It can be &quot;auto&quot;, &quot;right&quot; or &quot;mid&quot;.</p>
</td></tr>
<tr><td><code id="setFplot_distr_+3A_reset">reset</code></td>
<td>
<p>Logical scalar, default is <code>FALSE</code>. Whether the defaults should be reset.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The function <code>setFplot_distr()</code> does not return anything, it only sets the default
parameters for the function <code><a href="#topic+plot_distr">plot_distr()</a></code>.
</p>
<p>The function <code>getFplot_distr()</code> returns a named list containing the arguments
that have been set with the function <code>setFplot_distr()</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+plot_distr">plot_distr</a></code>, <code><a href="#topic+pdf_fit">pdf_fit</a></code>, <code><a href="#topic+fit.off">fit.off</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Changing the default color set for plot_distr only
my_col = c("#36688D", "#F3CD05", "#F49F05", "#F18904", "#BDA589")

setFplot_distr(col = my_col, mod.method = "split", border = NA)

plot_distr(~ Petal.Length | Species, iris)

# Back to normal
setFplot_distr(reset = TRUE)

plot_distr(~ Petal.Length | Species, iris)



</code></pre>

<hr>
<h2 id='setFplot_page'>Sets the target page size for figure exporting</h2><span id='topic+setFplot_page'></span><span id='topic+getFplot_page'></span>

<h3>Description</h3>

<p>Tha package <code>fplot</code> offers some functions (e.g. <code><a href="#topic+pdf_fit">pdf_fit</a></code>
or <code><a href="#topic+png_fit">png_fit</a></code>) to export figures, with a guarantee to obtain
the desired point size for the plotting text. The function <code>setFplot_page</code>
sets the target page size (once and for all). This is important for the accuracy
of the export, although the default values should be working well most of the time.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setFplot_page(
  page = "us",
  margins = "normal",
  units = "tw",
  pt = 10,
  w2h = 1.75,
  reset = FALSE
)

getFplot_page()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setFplot_page_+3A_page">page</code></td>
<td>
<p>What is the page size of the document? Can be equal to &quot;us&quot; (for
US letter, the default) or &quot;a4&quot;. Can also be a numeric vector of length 2 giving
the width and the height of the page in <strong>inches</strong>. Or can be a character string
of the type: <code>"8.5in,11in"</code> where the width and height are separated with
a comma, note that only centimeters (cm), inches (in) and pixels (px) are accepted
as units&ndash;further: you can use the unit only once.</p>
</td></tr>
<tr><td><code id="setFplot_page_+3A_margins">margins</code></td>
<td>
<p>The bottom/left/top/right margins of the page. This is used to
obtain the dimension of the body of the text. Can be equal to &quot;normal&quot; (default,
which corresponds to 2cm/2.5cm/2cm/2.5cm), or to &quot;thin&quot; (1.5/1/1/1cm). Can be
a numeric vector of length 1: then all margins are the same given size in <strong>inches</strong>.
</p>
<p>Can also be a numeric vector of length 2 or 4: 2 means first bottom/top margins,
then left/right margins; 4 is bottom/left/top/right margins, in inches. Last,
it can be a character vector of the type <code>"2,2.5,2,2.5cm"</code> with the margins
separated by a comma or a slash, and at least one unit appearing: either <code>cm</code>,
<code>in</code> or <code>px</code>.</p>
</td></tr>
<tr><td><code id="setFplot_page_+3A_units">units</code></td>
<td>
<p>The default units when using the functions <code><a href="#topic+pdf_fit">pdf_fit</a></code>,
<code><a href="#topic+png_fit">png_fit</a></code>, etc. Defaults to <code>"tw"</code> (text width) which
is a fraction of the size of the text. Alternatives can be <code>"pw"</code> (page
width), and <code>"in"</code>, <code>"cm"</code>, <code>"px"</code>.</p>
</td></tr>
<tr><td><code id="setFplot_page_+3A_pt">pt</code></td>
<td>
<p>The size of the text, in pt, once the figure is inserted in your final document.
The default is 10. This means that all text appearing in the plot with <code>cex = 1</code>
will appear with 10pt-sized fonts in your document.</p>
</td></tr>
<tr><td><code id="setFplot_page_+3A_w2h">w2h</code></td>
<td>
<p>Numeric scalar. Used to determine the height of the figure based on
the width. By default it is equal to <code>1.75</code> which means that the graph
will be 1.75 larger than tall. Note that when argument <code>sideways = TRUE</code>,
the default for the height becomes <code style="white-space: pre;">&#8288;90%&#8288;</code>.</p>
</td></tr>
<tr><td><code id="setFplot_page_+3A_reset">reset</code></td>
<td>
<p>Logical, default is <code>FALSE</code>. Whether arguments should be reset
to default before applying modifications.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function sets the option &quot;fplot_export_opts&quot; after parsing the arguments.
This option is then automatically accessed by the functions used to export graphs
<code><a href="#topic+export_graph_start">export_graph_start()</a></code>.
</p>


<h3>Value</h3>

<p>The function <code>setFplot_page()</code> does not return anything. It sets an
R option containing the page parameters.
</p>
<p>The function <code>getFplot_page()</code> returns the named list of page parameters which has been set
in <code>setFplot_page()</code>.
</p>


<h3>See Also</h3>

<p>Exporting functions: <code><a href="#topic+pdf_fit">pdf_fit</a></code>, <code><a href="#topic+png_fit">png_fit</a></code>.
The function closing the connection and showing the obtained graph in the viewer:
<code><a href="#topic+fit.off">fit.off</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#
# How to set the page size
#

# All examples below provide the same page size
setFplot_page(page = "us")
setFplot_page(page = "8.5in, 11in")
setFplot_page(page = "8.5/11in")
setFplot_page(page = c(8.5, 11))

# All examples below provide the same margins
setFplot_page(margins = "normal")
setFplot_page(margins = "2cm, 2.5cm, 2cm, 2.5cm")
setFplot_page(margins = "2/2.5/2/2.5cm")
setFplot_page(margins = c(2, 2.5) / 2.54) # cm to in
setFplot_page(margins = c(2, 2.5, 2, 2.5) / 2.54)

</code></pre>

<hr>
<h2 id='us_pub_econ'>Publication data sample</h2><span id='topic+us_pub_econ'></span>

<h3>Description</h3>

<p>This data reports the publications of U.S. institutions in the field of economics between 1985 and 1990.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(us_pub_econ)
</code></pre>


<h3>Format</h3>

<p><code>us_pub_econ</code> is a data table with 30,756 observations and 6 variables.
</p>

<ul>
<li><p>paper_id: Numeric identifier of the publication.
</p>
</li>
<li><p>year: Year of publication.
</p>
</li>
<li><p>institution: Institution of the authors of the publication.
</p>
</li>
<li><p>journal: Journal/conference name.
</p>
</li>
<li><p>jnl_top_25p: 0/1 variable of whether the journal belongs to the top 25% in terms of average cites.
</p>
</li>
<li><p>jnl_top_5p: 0/1 variable of whether the journal belongs to the top 5% in terms of average cites.
</p>
</li></ul>



<h3>Source</h3>

<p>The source is Microsoft Academic Graph (see reference).
</p>


<h3>References</h3>

<p>Arnab Sinha, Zhihong Shen, Yang Song, Hao Ma, Darrin Eide, Bo-June (Paul) Hsu, and Kuansan Wang. 2015. An Overview of Microsoft Academic Service (MAS) and Applications. In Proceedings of the 24th International Conference on World Wide Web (WWW '15 Companion). ACM, New York, NY, USA, 243-246.
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
