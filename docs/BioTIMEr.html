<!DOCTYPE html><html lang="en-GB"><head><title>Help for package BioTIMEr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BioTIMEr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BioTIMEr-package'><p>BioTIMEr: Tools to Use and Explore the 'BioTIME' Database</p></a></li>
<li><a href='#BTsubset_data'><p>BioTIME subset</p></a></li>
<li><a href='#BTsubset_meta'><p>BioTIME subset metadata</p></a></li>
<li><a href='#getAlpha'><p>Alpha</p></a></li>
<li><a href='#getAlphaMetrics'><p>Alpha diversity metrics</p></a></li>
<li><a href='#getBeta'><p>Beta</p></a></li>
<li><a href='#getBetaMetrics'><p>Beta diversity metrics</p></a></li>
<li><a href='#getLinearRegressions'><p>Get Linear Regressions BioTIME</p></a></li>
<li><a href='#gridding'><p>gridding BioTIME data</p></a></li>
<li><a href='#plotSlopes'><p>Plot slopes BioTIME</p></a></li>
<li><a href='#rarefysamples'><p>Rarefy BioTIME data</p>
Applies sample-based rarefaction to standardise the number of samples per year
within a cell-level time series.</a></li>
<li><a href='#resampling'><p>Rarefy BioTIME data to an equal number of samples per year</p></a></li>
<li><a href='#scale_color_biotime'><p>Scale construction for ggplot use</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Tools to Use and Explore the 'BioTIME' Database</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.3</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Alban Sagouis &lt;alban.sagouis@idiv.de&gt;</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/bioTIMEHub/BioTIMEr">https://github.com/bioTIMEHub/BioTIMEr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/bioTIMEHub/BioTIMEr/issues">https://github.com/bioTIMEHub/BioTIMEr/issues</a></td>
</tr>
<tr>
<td>Description:</td>
<td>The 'BioTIME' database was first published in 
    2018 and inspired ideas, questions, project and research
    article. To make it even more accessible, an R package 
    was created.
    The 'BioTIMEr' package provides tools designed to interact with the
    'BioTIME' database. The functions provided include the 'BioTIME' recommended
    methods for preparing (gridding and rarefaction) time series data, a
    selection of standard biodiversity metrics (including species richness,
    numerical abundance and exponential Shannon) alongside examples on how to
    display change over time. It also includes a sample subset of both the query
    and meta data, the full versions of which are freely available on the 'BioTIME'
    website <a href="https://biotime.st-andrews.ac.uk/home.php">https://biotime.st-andrews.ac.uk/home.php</a>.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, tidyr, ggplot2, vegan, dggridR (&ge; 3.1.0), checkmate</td>
</tr>
<tr>
<td>Suggests:</td>
<td>maps, knitr, rmarkdown, formatR, testthat (&ge; 3.0.0), vdiffr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-30 14:27:39 UTC; as80fywe</td>
</tr>
<tr>
<td>Author:</td>
<td>Alban Sagouis <a href="https://orcid.org/0000-0002-3827-1063"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Faye Moyes <a href="https://orcid.org/0000-0001-9687-0593"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Inês S. Martins <a href="https://orcid.org/0000-0003-4328-7286"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, rev],
  Shane A. Blowes <a href="https://orcid.org/0000-0001-6310-3670"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Viviana Brambilla <a href="https://orcid.org/0000-0002-0560-4693"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Cher F. Y. Chow <a href="https://orcid.org/0000-0002-1020-8409"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Ada Fontrodona-Eslava
    <a href="https://orcid.org/0000-0001-7275-7174"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb],
  Laura Antão <a href="https://orcid.org/0000-0001-6612-9366"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [ctb,
    rev],
  Jonathan M. Chase <a href="https://orcid.org/0000-0001-5580-4303"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [fnd],
  Maria Dornelas <a href="https://orcid.org/0000-0003-2077-7055"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [fnd, cph],
  Anne E. Magurran <a href="https://orcid.org/0000-0002-0036-2795"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [fnd],
  European Research Council grant AdG BioTIME 250189 [fnd],
  European Research Council grant PoC BioCHANGE 727440 [fnd],
  European Research Council grant AdG MetaCHANGE 101098020 [fnd],
  The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021
    [fnd]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-31 04:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='BioTIMEr-package'>BioTIMEr: Tools to Use and Explore the 'BioTIME' Database</h2><span id='topic+BioTIMEr'></span><span id='topic+BioTIMEr-package'></span>

<h3>Description</h3>

<p>The BioTIMEr package is developed in GitHub
(https://github.com/bioTIMEHub/BioTIMEr). To see the preferable citation of
the package, type citation(&quot;BioTIMEr&quot;). The associated vignette includes an introduction
to the functions, how to apply them as well as some hints on how to
quantify and visualise temporal biodiversity change for a given BioTIME dataset.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Alban Sagouis <a href="mailto:alban.sagouis@idiv.de">alban.sagouis@idiv.de</a> (<a href="https://orcid.org/0000-0002-3827-1063">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Faye Moyes (<a href="https://orcid.org/0000-0001-9687-0593">ORCID</a>)
</p>
</li>
<li><p> Inês S. Martins (<a href="https://orcid.org/0000-0003-4328-7286">ORCID</a>) [reviewer]
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> Shane A. Blowes (<a href="https://orcid.org/0000-0001-6310-3670">ORCID</a>) [contributor]
</p>
</li>
<li><p> Viviana Brambilla (<a href="https://orcid.org/0000-0002-0560-4693">ORCID</a>) [contributor]
</p>
</li>
<li><p> Cher F. Y. Chow (<a href="https://orcid.org/0000-0002-1020-8409">ORCID</a>) [contributor]
</p>
</li>
<li><p> Ada Fontrodona-Eslava (<a href="https://orcid.org/0000-0001-7275-7174">ORCID</a>) [contributor]
</p>
</li>
<li><p> Laura Antão (<a href="https://orcid.org/0000-0001-6612-9366">ORCID</a>) [contributor, reviewer]
</p>
</li>
<li><p> Jonathan M. Chase (<a href="https://orcid.org/0000-0001-5580-4303">ORCID</a>) [funder]
</p>
</li>
<li><p> Maria Dornelas (<a href="https://orcid.org/0000-0003-2077-7055">ORCID</a>) [funder, copyright holder]
</p>
</li>
<li><p> Anne E. Magurran (<a href="https://orcid.org/0000-0002-0036-2795">ORCID</a>) [funder]
</p>
</li>
<li><p> European Research Council grant AdG BioTIME 250189 [funder]
</p>
</li>
<li><p> European Research Council grant PoC BioCHANGE 727440 [funder]
</p>
</li>
<li><p> European Research Council grant AdG MetaCHANGE 101098020 [funder]
</p>
</li>
<li><p> The Leverhulme Centre for Anthropocene Biodiversity grant RC-2018-021 [funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/bioTIMEHub/BioTIMEr">https://github.com/bioTIMEHub/BioTIMEr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/bioTIMEHub/BioTIMEr/issues">https://github.com/bioTIMEHub/BioTIMEr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='BTsubset_data'>BioTIME subset</h2><span id='topic+BTsubset_data'></span>

<h3>Description</h3>

<p>A subset of data from BioTIME temporal surveys.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BTsubset_data
</code></pre>


<h3>Format</h3>

<p>## 'BTsubset_data'
A data frame with 81,084 rows and 17 columns:
</p>

<dl>
<dt>ID_ALL_RAW_DATA</dt><dd><p>Unique BioTIME identifier for record</p>
</dd>
<dt>ABUNDANCE</dt><dd><p>Double representing the abundance for the record (see metadata for details of ABUNDANCE_TYPE</p>
</dd>
<dt>BIOMASS</dt><dd><p>Double representing the biomass for the record (see metadata for details of BIOMASS_TYPE</p>
</dd>
<dt>ID_SPECIES</dt><dd><p>Unique identifier linking to the species table</p>
</dd>
<dt>SAMPLE_DESC</dt><dd><p>Concatenation of variables comprising unique sampling event</p>
</dd>
<dt>PLOT</dt><dd><p>Name or identifier of plot field, only used for fixed plots such as forest quadrats</p>
</dd>
<dt>LATITUDE</dt><dd><p>Latitude of record</p>
</dd>
<dt>LONGITUDE</dt><dd><p>Longitude of record</p>
</dd>
<dt>DEPTH</dt><dd><p>Depth or elevation of record if available</p>
</dd>
<dt>DAY</dt><dd><p>Numerical day of record</p>
</dd>
<dt>MONTH</dt><dd><p>Numerical value of month for record, i.e. January=1</p>
</dd>
<dt>YEAR</dt><dd><p>Year of record</p>
</dd>
<dt>STUDY_ID</dt><dd><p>BioTIME study unique identifier</p>
</dd>
<dt>newID</dt><dd><p>Validated species identifier key</p>
</dd>
<dt>valid_name</dt><dd><p>Highest taxonomic resolution of individual, preferred is genus and species</p>
</dd>
<dt>resolution</dt><dd><p>Level of resolution, i.e. 'species' represented by genus and species</p>
</dd>
<dt>taxon</dt><dd><p>Higher level taxonomic grouping, i.e. Fish</p>
</dd>
</dl>



<h3>Source</h3>

<p>&lt;https://biotime.st-andrews.ac.uk/download.php&gt;
</p>

<hr>
<h2 id='BTsubset_meta'>BioTIME subset metadata</h2><span id='topic+BTsubset_meta'></span>

<h3>Description</h3>

<p>A subset of the metadata from BioTIME
</p>


<h3>Usage</h3>

<pre><code class='language-R'>BTsubset_meta
</code></pre>


<h3>Format</h3>

<p>## 'BTsubset_meta'
A data frame with 12 rows and 25 columns:
</p>

<dl>
<dt>STUDY_ID</dt><dd><p>BioTIME study unique identifier</p>
</dd>
<dt>REALM</dt><dd><p>Realm of study location, i.e. Marine</p>
</dd>
<dt>CLIMATE</dt><dd><p>Climate of study location, i.e. Temperate</p>
</dd>
<dt>HABITAT</dt><dd><p>Habitat of study location, i.e. Rivers</p>
</dd>
<dt>PROTECTED_AREA</dt><dd><p>binary variable indicating if the study is within a protected area</p>
</dd>
<dt>BIOME_MAP</dt><dd><p>Biome of study location (taken from the WWF biomes, i.e. Temperate broadleaf and mixed forests</p>
</dd>
<dt>TAXA</dt><dd><p>High level taxonomic identity of study species, i.e. Fish</p>
</dd>
<dt>ORGANISMS</dt><dd><p>More detailed information on taxonomy, i.e. woody plants</p>
</dd>
<dt>TITLE</dt><dd><p>Title of study as identified in original source</p>
</dd>
<dt>AB_BIO</dt><dd><p>A, B or AB to designate abundance only, biomass only or both</p>
</dd>
<dt>DATA_POINTS</dt><dd><p>Number of unique data points in study, e.g. 10 data points spanning 15 years = 10</p>
</dd>
<dt>START_YEAR</dt><dd><p>first year of study</p>
</dd>
<dt>END_YEAR</dt><dd><p>last year of study</p>
</dd>
<dt>CENT_LAT</dt><dd><p>Central latitude taken from the convex hull around all study coordinates</p>
</dd>
<dt>CENT_LONG</dt><dd><p>Central longitude taken from the convex hull around all study coordinates</p>
</dd>
<dt>NUMBER_OF_SPECIES</dt><dd><p>Number of distinct species in study</p>
</dd>
<dt>NUMBER_OF_SAMPLES</dt><dd><p>Number of distinct samples in study</p>
</dd>
<dt>NUMBER_LAT_LONG</dt><dd><p>Number of distinct geographic coordinates in study</p>
</dd>
<dt>TOTAL</dt><dd><p>Total number of records in study</p>
</dd>
<dt>GRAIN_SQ_KM</dt><dd><p>Grain size in km2, i.e. size of forest plots</p>
</dd>
<dt>AREA_SQ_KM</dt><dd><p>total area of study in km2</p>
</dd>
<dt>DATE_STUDY_ADDED</dt><dd><p>Date that the study was added to the database</p>
</dd>
<dt>ABUNDANCE_TYPE</dt><dd><p>Type of abundance, i.e. count</p>
</dd>
<dt>BIOMASS_TYPE</dt><dd><p>Type of biomass, i.e. weight</p>
</dd>
<dt>SAMPLE_DESC</dt><dd><p>concatenation of descriptors comprising the unique sampling event</p>
</dd>
</dl>



<h3>Source</h3>

<p>&lt;https://biotime.st-andrews.ac.uk/download.php&gt;
</p>

<hr>
<h2 id='getAlpha'>Alpha</h2><span id='topic+getAlpha'></span>

<h3>Description</h3>

<p>Alpha
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAlpha(x, id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAlpha_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) First column has to be year and following columns
contain species abundances.</p>
</td></tr>
<tr><td><code id="getAlpha_+3A_id">id</code></td>
<td>
<p>(<code>character</code>) One assemblageID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A data frame with results for S (species richness), N (numerical abundance),
maximum N per year per assemblage, Shannon, Exponential Shannon, Simpson,
Inverse Simpson, PIE (probability of intraspecific encounter) and
McNaughton's Dominance.
</p>

<hr>
<h2 id='getAlphaMetrics'>Alpha diversity metrics</h2><span id='topic+getAlphaMetrics'></span>

<h3>Description</h3>

<p>Calculates a set of standard alpha diversity metrics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getAlphaMetrics(x, measure)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getAlphaMetrics_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME data table in the format of the output of the
<code><a href="#topic+gridding">gridding</a></code> function and/or <code><a href="#topic+resampling">resampling</a></code> function.</p>
</td></tr>
<tr><td><code id="getAlphaMetrics_+3A_measure">measure</code></td>
<td>
<p>(<code>character</code>) chosen currency defined by a single column name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function <code>getAlphaMetrics</code> computes nine alpha diversity metrics for
a given community data frame, where <code>measure</code> is a character input
specifying the abundance or biomass field used for the calculations. For each
row of the data frame with data, <code>getAlphaMetrics</code> calculates
the following metrics:
</p>
<p>- Species richness (<code>S</code>) as the total number of species in each year with currency &gt; 0.
</p>
<p>- Numerical abundance (<code>N</code>) as the total currency (sum) in each year
(either total abundance or total biomass).
</p>
<p>- Maximum Numerical abundance (maxN) as the highest currency value reported in each year.
</p>
<p>- Shannon or Shannon–Weaver index is calculated as <code class="reqn">\sum_{i}p_{i}log_{b}p_{i}</code>, where <code class="reqn">p_{i}</code> is the proportional abundance of species i and b is the base of the logarithm (natural logarithms), while exponential Shannon is given by <code>exp(Shannon)</code>.
</p>
<p>- Simpson's index is calculated as <code class="reqn">1-sum(p_{i}^{2})</code>, while Inverse Simpson as <code class="reqn">1/sum(p_{i}^{2})</code>.
</p>
<p>- McNaughton's Dominance is calculated as the sum of the pi of the two most abundant species.
</p>
<p>- Probability of intraspecific encounter or PIE is calculated as <code class="reqn">\left(\frac{N}{N-1}\right)\left(1-\sum_{i=1}^{S}\pi_{i}^{2}\right)</code>.
</p>
<p>Note that the input data frame needs to be in the format of the output of the
<code><a href="#topic+gridding">gridding</a></code> function and/or <code><a href="#topic+resampling">resampling</a></code> functions,
which includes keeping the default BioTIME data column names. If such columns
are not found an error is issued and the computations are halted.
</p>


<h3>Value</h3>

<p>Returns a data frame with results for species richness (<code>S</code>), numerical
abundance (<code>N</code>), maximum numerical abundance (<code>maxN</code>), Shannon Index (<code>Shannon</code>),
Exponential Shannon (<code>expShannon</code>), Simpson's Index (Simpson), Inverse Simpson
(<code>InvSimpson</code>), Probability of intraspecific encounter (<code>PIE</code>) and McNaughton's
Dominance (<code>DomMc</code>) for each year and <code>assemblageID</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  x &lt;- data.frame(
    resamp = 1L,
    YEAR = rep(rep(2010:2015, each = 4), times = 4),
    Species = c(replicate(n = 8L, sample(letters, 24L, replace = FALSE))),
    ABUNDANCE = rpois(24 * 8, 10),
    assemblageID = rep(LETTERS[1L:8L], each = 24)
  )
  res &lt;- getAlphaMetrics(x, measure = "ABUNDANCE")
</code></pre>

<hr>
<h2 id='getBeta'>Beta</h2><span id='topic+getBeta'></span>

<h3>Description</h3>

<p>Beta
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBeta(x, id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBeta_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) First column has to be year and following columns
contain species abundances.</p>
</td></tr>
<tr><td><code id="getBeta_+3A_id">id</code></td>
<td>
<p>(<code>character</code>) One assemblageID</p>
</td></tr>
</table>


<h3>Value</h3>

<p>getBeta returns a data.frame with three beta diversity dissimilarity
metrics
</p>

<hr>
<h2 id='getBetaMetrics'>Beta diversity metrics</h2><span id='topic+getBetaMetrics'></span>

<h3>Description</h3>

<p>Calculates a set of standard beta diversity metrics
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getBetaMetrics(x, measure)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getBetaMetrics_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME data table in the format of the output of the
<code><a href="#topic+gridding">gridding</a></code> function and/or <code><a href="#topic+resampling">resampling</a></code> functions.</p>
</td></tr>
<tr><td><code id="getBetaMetrics_+3A_measure">measure</code></td>
<td>
<p>(<code>character</code>) chosen currency defined by a single column name.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function getBetaMetrics computes three beta diversity metrics for a given community data frame, where <code>measure</code> is a character input specifying the abundance or biomass field used for the calculations. <code>getBetaMetrics</code> calls the <code><a href="vegan.html#topic+vegdist">vegdist</a></code> function which calculates for each row the following metrics: Jaccard dissimilarity (<code>method = "jaccard"</code>), Morisita-Horn dissimilarity (<code>method = "horn"</code>) and Bray-Curtis dissimilarity (<code>method = "bray"</code>). Here, the dissimilarity metrics are calculated against the baseline year of each assemblage time series i.e.
the first year of each time series.
Note that the input data frame needs to be in the format of the output of the
<code><a href="#topic+gridding">gridding</a></code> and/or <code><a href="#topic+resampling">resampling</a></code> functions, which includes keeping the default BioTIME data column names. If such columns are not found an error is
issued and the computations are halted.
</p>


<h3>Value</h3>

<p>Returns a <code>data.frame</code> with results for Jaccard dissimilarity (<code>JaccardDiss</code>), Morisita-Horn dissimilarity (<code>MorisitaHornDiss</code>), and Bray-Curtis dissimilarity (<code>BrayCurtsDiss</code>) for each year and <code>assemblageID</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- data.frame(
  resamp = 1L,
  YEAR = rep(rep(2010:2015, each = 4), times = 4),
  Species = c(replicate(
   n = 8L,
   sample(letters, 24L, replace = FALSE))),
  ABUNDANCE = rpois(24 * 8, 10),
  assemblageID = rep(LETTERS[1L:8L], each = 24)
  )

res &lt;- getBetaMetrics(x, measure = "ABUNDANCE")
</code></pre>

<hr>
<h2 id='getLinearRegressions'>Get Linear Regressions BioTIME</h2><span id='topic+getLinearRegressions'></span>

<h3>Description</h3>

<p>Fits linear regression models to <code><a href="#topic+getAlphaMetrics">getAlphaMetrics</a></code> or <code><a href="#topic+getBetaMetrics">getBetaMetrics</a></code> outputs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getLinearRegressions(x, divType, pThreshold = 0.05)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="getLinearRegressions_+3A_x">x</code></td>
<td>
<p>('data.frame') BioTIME data table in the format of the output of  <code><a href="#topic+getAlphaMetrics">getAlphaMetrics</a></code> or <code><a href="#topic+getBetaMetrics">getBetaMetrics</a></code>
functions</p>
</td></tr>
<tr><td><code id="getLinearRegressions_+3A_divtype">divType</code></td>
<td>
<p>('character') string specifying the nature of the metrics in
the data; either 'divType = &quot;alpha&quot;' or 'divType = &quot;beta&quot;' are supported</p>
</td></tr>
<tr><td><code id="getLinearRegressions_+3A_pthreshold">pThreshold</code></td>
<td>
<p>('numeric') P-value threshold for statistical significance</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function 'getLinearRegressions' fits simple linear regression models
(see <code><a href="stats.html#topic+lm">lm</a></code> for details) for a given output ('data') of
either <code><a href="#topic+getAlphaMetrics">getAlphaMetrics</a></code> or <code><a href="#topic+getBetaMetrics">getBetaMetrics</a></code> function.
'divType' needs to be specified in agreement with x.
The typical model has the form 'metric ~ year'. Note that assemblages with
less than 3 time points and/or single species time series are removed.
</p>


<h3>Value</h3>

<p>Returns a single long 'data.frame' with results of linear regressions
(slope, p-value, significance, intercept) for each 'assemblageID'.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library(BioTIMEr)
  x &lt;- data.frame(
    resamp = 1L,
    YEAR = rep(rep(2010:2015, each = 4), times = 4),
    Species = c(replicate(n = 8L * 6L, sample(letters[1L:10L], 4L, replace = FALSE))),
    ABUNDANCE = rpois(24 * 8, 10),
    assemblageID = rep(LETTERS[1L:8L], each = 24)
  )
  alpham &lt;- getAlphaMetrics(x, "ABUNDANCE")
  getLinearRegressions(x = alpham, divType = "alpha", pThreshold = 0.01)
  betam &lt;- getBetaMetrics(x = x, "ABUNDANCE")
  getLinearRegressions(x = betam, divType = "beta")

</code></pre>

<hr>
<h2 id='gridding'>gridding BioTIME data</h2><span id='topic+gridding'></span>

<h3>Description</h3>

<p>grids BioTIME data into a discrete global grid based on the
location of the samples (latitude/longitude).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>gridding(meta, btf, res = 12, resByData = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="gridding_+3A_meta">meta</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME metadata.</p>
</td></tr>
<tr><td><code id="gridding_+3A_btf">btf</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME data.</p>
</td></tr>
<tr><td><code id="gridding_+3A_res">res</code></td>
<td>
<p>(<code>integer</code>) cell resolution. Must be in the range [0,30]. Larger values
represent finer resolutions. Default: 12 (~96 sq km). Passed to
<code><a href="dggridR.html#topic+dgconstruct">dgconstruct</a></code>.</p>
</td></tr>
<tr><td><code id="gridding_+3A_resbydata">resByData</code></td>
<td>
<p>(<code>logical</code>) FALSE by default. If TRUE, the function
<code><a href="dggridR.html#topic+dg_closest_res_to_area">dg_closest_res_to_area</a></code> is called to adapt 'res' to
the data extent.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Each BioTIME study contains distinct samples which were collected with a consistent
methodology over time, and each with unique coordinates and date.
These samples can be fixed plots (i.e. SL or
'single-location' studies where measures are taken from a set of specific
georeferenced sites at any given time) or wide-ranging surveys, transects,
tows, and so on (i.e. ML or 'multi-location' studies where measures are taken
from multiple sampling locations over large extents that may or may not align
from year to year,
see <code>runResampling</code>. <code>gridding</code> is a function designed to deal with the issue
of varying spatial extent between studies by using a global grid of hexagonal cells
derived from <code><a href="dggridR.html#topic+dgconstruct">dgconstruct</a></code> and assigning the individual
samples to the cells across the grid based on its latitude and
longitude. Specifically, each sample is assigned
a different combination of study ID and grid cell resulting in a unique
identifier for each assemblage time series within each cell
(assemblageID). This allows for the integrity of each study and each sample
to be maintained, while large extent studies are split into local time series
at the grid cell level. By default meta represents a long form data frame
containing the data information for BioTIME studies and <code>btf</code> is a data frame
containing long form data from a main BioTIME query (see Example). <code>res</code>
defines the global grid cell resolution, thus determining the size of the
cells (see <code>vignette("dggridR")</code>). <code>res = 12</code> was found to be the most
appropriate value when working on the whole BioTIME database(corresponding
to ~96 km2 cell area), but the user can define their own grid resolution
(e.g. <code>res = 14</code>, or when <code>resbyData = TRUE</code> allow the function to find the
best <code>res</code> based on the average study extent.
</p>


<h3>Value</h3>

<p>Returns a <code>'data.frame'</code>, with selected columns from the
<code>btf</code> and <code>meta</code> data frames, an extra integer column called
<code>'cell'</code> and two character columns called 'StudyMethod' and 'assemblageID'
(concatenation of <code>study_ID</code> and <code>cell</code>).
</p>


<h3>Examples</h3>

<pre><code class='language-R'>  library(BioTIMEr)
  gridded_data &lt;- gridding(BTsubset_meta, BTsubset_data)

</code></pre>

<hr>
<h2 id='plotSlopes'>Plot slopes BioTIME</h2><span id='topic+plotSlopes'></span><span id='topic+themeBioTIME'></span>

<h3>Description</h3>

<p>Plot slopes BioTIME
</p>
<p>ggplot2 theme for BioTIME plots
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotSlopes(x, metric, cols, taxa, method, assemblageID, divType)

themeBioTIME(lp, fontSize, colx, coly)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="plotSlopes_+3A_x">x</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_metric">metric</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_cols">cols</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_taxa">taxa</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_method">method</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_assemblageid">assemblageID</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_divtype">divType</code></td>
<td>
<p>Parameter description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_lp">lp</code></td>
<td>
<p>description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_fontsize">fontSize</code></td>
<td>
<p>description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_colx">colx</code></td>
<td>
<p>description</p>
</td></tr>
<tr><td><code id="plotSlopes_+3A_coly">coly</code></td>
<td>
<p>description</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A plot
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
fig1 &lt;- ggplot2::ggplot() +
          themeBioTIME("none", 12, "black", "grey90")

</code></pre>

<hr>
<h2 id='rarefysamples'>Rarefy BioTIME data
Applies sample-based rarefaction to standardise the number of samples per year
within a cell-level time series.</h2><span id='topic+rarefysamples'></span>

<h3>Description</h3>

<p>Rarefy BioTIME data
Applies sample-based rarefaction to standardise the number of samples per year
within a cell-level time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rarefysamples(x, measure, resamps)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rarefysamples_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME gridded data to be resampled (in the format of
the output of the <code><a href="#topic+gridding">gridding</a></code> function).</p>
</td></tr>
<tr><td><code id="rarefysamples_+3A_measure">measure</code></td>
<td>
<p>(<code>character</code>) currency to be retained during the sample-based
rarefaction. Can be either defined by a single column name or a vector of
two or more column names.</p>
</td></tr>
<tr><td><code id="rarefysamples_+3A_resamps">resamps</code></td>
<td>
<p>(<code>integer</code>) number of repetitions. Default is 1.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a single long form data frame containing the total currency
of interest (sum) for each species in each year.
</p>

<hr>
<h2 id='resampling'>Rarefy BioTIME data to an equal number of samples per year</h2><span id='topic+resampling'></span>

<h3>Description</h3>

<p>Takes the output of <code><a href="#topic+gridding">gridding</a></code> and applies sample-based rarefaction to
standardise the number of samples per year within each cell-level time series
(i.e. assemblageID).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resampling(x, measure, resamps = 1L, conservative = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resampling_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>) BioTIME gridded data to be resampled (in the format of
the output of the <code><a href="#topic+gridding">gridding</a></code> function).</p>
</td></tr>
<tr><td><code id="resampling_+3A_measure">measure</code></td>
<td>
<p>(<code>character</code>) currency to be retained during the sample-based
rarefaction. Can be either defined by a single column name or a vector of
two or more column names.</p>
</td></tr>
<tr><td><code id="resampling_+3A_resamps">resamps</code></td>
<td>
<p>(<code>integer</code>) number of repetitions. Default is 1.</p>
</td></tr>
<tr><td><code id="resampling_+3A_conservative">conservative</code></td>
<td>
<p>(<code>logical</code>). <code>FALSE</code> by default. If <code>TRUE</code>,
whenever a <code>NA</code>
is found in the measure field(s), the whole sample is removed instead of the
missing observations only.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Sample-based rarefaction prevents temporal variation in sampling effort from
affecting diversity estimates (see Gotelli N.J., Colwell R.K. 2001 Quantifying biodiversity: procedures and pitfalls in the measurement and comparison of species richness. Ecology Letters 4(4), 379-391) by selecting an equal number of samples across all years in a time series.
<code>resampling</code> counts the number of unique samples taken in each year (sampling effort),
identifies the minimum number of samples across all years, and then uses this minimum to
randomly resample each year down to that number. Thus, standardising the
sampling effort between years,
standard biodiversity metrics can be calculated based on an equal number of
samples (e.g. using <code><a href="#topic+getAlphaMetrics">getAlphaMetrics</a></code>, <code><a href="#topic+getAlphaMetrics">getAlphaMetrics</a></code>).
<code>measure</code> is a <code>character</code>
input specifying the chosen currency to be used during the sample-based
rarefaction. It can be a single column name or a vector of two or more column
names - e.g. for BioTIME, <code>measure="ABUNDANCE"</code>, <code>measure="BIOMASS"</code>
or <code>measure = c("ABUNDANCE", "BIOMASS")</code>.
</p>
<p>By default, any observations with <code>NA</code> within the currency field(s) are
removed. You can choose to remove the full sample where such observations are
present by setting <code>conservative</code> to <code>TRUE</code>. <code>resamps</code> can be used to define
multiple iterations, effectively creating multiple alternative datasets
as in each iteration different samples will be randomly selected for the
years where number of samples &gt; minimum.
Note that the function always returns a single data frame, i.e. if <code>resamps</code> &gt; 1,
the returned data frame is the result of individual data frames concatenated
together, one from each iteration identified by a numerical
unique identifier 1:resamps.
</p>


<h3>Value</h3>

<p>Returns a single long form <code>data.frame</code> containing the total currency
or currencies of interest (sum) for each species in each year within each
rarefied time series (i.e. <code>assemblageID</code>). An extra integer column called
<code>resamp</code> indicates the specific iteration.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
  library(BioTIMEr)
  set.seed(42)
  x &lt;- gridding(BTsubset_meta, BTsubset_data)
  resampling(x, measure = "BIOMASS")
  resampling(x, measure = "ABUNDANCE")
  resampling(x, measure = c("ABUNDANCE","BIOMASS"))


</code></pre>

<hr>
<h2 id='scale_color_biotime'>Scale construction for ggplot use</h2><span id='topic+scale_color_biotime'></span><span id='topic+scale_colour_biotime'></span><span id='topic+scale_fill_biotime'></span>

<h3>Description</h3>

<p>Scale construction for ggplot use
</p>
<p>Scale construction for filling in ggplot
</p>


<h3>Usage</h3>

<pre><code class='language-R'>scale_color_biotime(palette = "realms", discrete = TRUE, reverse = FALSE, ...)

scale_colour_biotime(palette = "realms", discrete = TRUE, reverse = FALSE, ...)

scale_fill_biotime(palette = "realms", discrete = TRUE, reverse = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="scale_color_biotime_+3A_palette">palette</code></td>
<td>
<p>One of: 'realms', 'gradient', 'cool', 'warm', default to 'realms'.</p>
</td></tr>
<tr><td><code id="scale_color_biotime_+3A_discrete">discrete</code></td>
<td>
<p>See Details. default to 'FALSE'</p>
</td></tr>
<tr><td><code id="scale_color_biotime_+3A_reverse">reverse</code></td>
<td>
<p>Default to 'FALSE'</p>
</td></tr>
<tr><td><code id="scale_color_biotime_+3A_...">...</code></td>
<td>
<p>Passed to <code><a href="ggplot2.html#topic+discrete_scale">discrete_scale</a></code> or <code><a href="ggplot2.html#topic+scale_color_gradient">scale_color_gradient</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>USAGE NOTE: Remember to change these arguments when plotting colours continuously.
</p>


<h3>Value</h3>

<p>If <code>discrete</code> is <code>TRUE</code>, the function returns a colour palette produced by 
<code><a href="ggplot2.html#topic+discrete_scale">discrete_scale</a></code> and if <code>discrete</code> is <code>FALSE</code>, the function
returns a colour palette produced by <code><a href="ggplot2.html#topic+scale_color_gradient">scale_color_gradient</a></code>.
</p>
<p>If <code>discrete</code> is <code>TRUE</code>, the function returns a colour palette produced by 
<code><a href="ggplot2.html#topic+discrete_scale">discrete_scale</a></code> and if <code>discrete</code> is <code>FALSE</code>, the function
returns a colour palette produced by <code><a href="ggplot2.html#topic+scale_color_gradient">scale_color_gradient</a></code>.
</p>


<h3>Author(s)</h3>

<p>Cher F. Y. Chow
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
