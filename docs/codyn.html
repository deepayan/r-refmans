<!DOCTYPE html><html lang="en"><head><title>Help for package codyn</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {codyn}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#codyn-package'><p>Community Dynamics Metrics</p></a></li>
<li><a href='#abundance_change'><p>Species Abundance Changes</p></a></li>
<li><a href='#abundance_difference'><p>Abundance Differences</p></a></li>
<li><a href='#collins08'><p>Konza data from Collins et al. 2008</p></a></li>
<li><a href='#community_diversity'><p>Community Diversity</p></a></li>
<li><a href='#community_stability'><p>Community Stability</p></a></li>
<li><a href='#community_structure'><p>Community Structure</p></a></li>
<li><a href='#confint.cyclic_shift'><p>Confidence Intervals from a Cyclic Shift Permutation</p></a></li>
<li><a href='#curve_change'><p>Curve Change</p></a></li>
<li><a href='#curve_difference'><p>Curve Difference</p></a></li>
<li><a href='#cyclic_shift'><p>Cyclic Shift Permutations</p></a></li>
<li><a href='#knz_001d'><p>Data from Konza Prairie, watershed 001d</p></a></li>
<li><a href='#mean_rank_shift'><p>Mean Rank Shifts</p></a></li>
<li><a href='#multivariate_change'><p>Using dissimilarity-based measures to calculate changes in composition</p>
and dispersion</a></li>
<li><a href='#multivariate_difference'><p>Using dissimilarity-based measures to calculate differences in</p>
composition and dispersion between pairs of treatments at a single time
point</a></li>
<li><a href='#pplots'><p>Phosphorus plots data from Avolio et al. 2014</p></a></li>
<li><a href='#RAC_change'><p>Rank Abundance Curve Changes</p></a></li>
<li><a href='#RAC_difference'><p>Rank Abundance Curve Differences</p></a></li>
<li><a href='#rank_shift'><p>Mean Rank Shifts</p></a></li>
<li><a href='#rate_change'><p>Rate of community change over successive time intervals</p></a></li>
<li><a href='#rate_change_interval'><p>Differences in community composition over successive time lag intervals</p></a></li>
<li><a href='#synchrony'><p>Species synchrony</p></a></li>
<li><a href='#turnover'><p>Species Turnover</p></a></li>
<li><a href='#variance_ratio'><p>Variance Ratio</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Community Dynamics Metrics</td>
</tr>
<tr>
<td>Version:</td>
<td>2.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-11-30</td>
</tr>
<tr>
<td>Description:</td>
<td>Univariate and multivariate temporal and spatial diversity indices, 
    rank abundance curves, and community stability measures. The functions 
    implement measures that are either explicitly temporal and include the 
    option to calculate them over multiple replicates, or spatial and include 
    the option to calculate them over multiple time points. Functions fall into 
    five categories: static diversity indices, temporal diversity indices, 
    spatial diversity indices, rank abundance curves, and community stability 
    measures. The diversity indices are temporal and spatial analogs to 
    traditional diversity indices. Specifically, the package includes functions 
    to calculate community richness, evenness and diversity at a given point in 
    space and time. In addition, it contains functions to calculate species 
    turnover, mean rank shifts, and lags in community similarity between two 
    time points. Details of the methods are available in
    Hallett et al. (2016) &lt;<a href="https://doi.org/10.1111%2F2041-210X.12569">doi:10.1111/2041-210X.12569</a>&gt; and Avolio 
    et al. (2019) &lt;<a href="https://doi.org/10.1002%2Fecs2.2881">doi:10.1002/ecs2.2881</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.2.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>assertthat, stats, permute, vegan</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat, knitr, ggplot2, pillar, reshape2, devtools, dplyr,
rmarkdown</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License (== 2.0)</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/NCEAS/codyn/">https://github.com/NCEAS/codyn/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/NCEAS/codyn/issues">https://github.com/NCEAS/codyn/issues</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-12-01 03:16:55 UTC; jones</td>
</tr>
<tr>
<td>Author:</td>
<td>Lauren Hallett <a href="https://orcid.org/0000-0002-0718-0257"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Meghan L. Avolio <a href="https://orcid.org/0000-0002-2649-9159"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Ian T. Carroll <a href="https://orcid.org/0000-0002-3616-810X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Sydney K. Jones [aut],
  A. Andrew M. MacDonald
    <a href="https://orcid.org/0000-0003-1162-169X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Dan F. B. Flynn <a href="https://orcid.org/0000-0002-2978-5257"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Peter Slaughter <a href="https://orcid.org/0000-0002-2192-403X"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Julie Ripplinger <a href="https://orcid.org/0000-0002-2771-6637"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Scott L. Collins <a href="https://orcid.org/0000-0002-0193-2892"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Corinna Gries <a href="https://orcid.org/0000-0002-9091-6543"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut],
  Matthew B. Jones <a href="https://orcid.org/0000-0003-0077-4738"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Matthew B. Jones &lt;jones@nceas.ucsb.edu&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-12-01 07:40:06 UTC</td>
</tr>
</table>
<hr>
<h2 id='codyn-package'>Community Dynamics Metrics</h2><span id='topic+codyn-package'></span>

<h3>Description</h3>

<p>Univariate and multivariate temporal and spatial diversity indices, rank abundance curves, and community stability metrics for ecologists.
</p>


<h3>Details</h3>

<p>The functions in <code>codyn</code> implement metrics that are either explicitly temporal and include the option to  calculate them over multiple replicates, or spatial and include the option to calculate them over multiple time points.
Functions fall into five categories: static diversity indices, temporal diversity indices, spatial diversity indices, rank abundance curves, and community stability metrics.
The diversity indices in <code>codyn</code> are temporal and spatial analogs to traditional diversity indices.
Specifically, <code>codyn</code> includes functions to calculate community richness, evenness and diversity at a given point in space and time. In addition, <code>codyn</code> contains functions to calculate species turnover, mean rank shifts, and lags in community similarity between two time points. For the components of rank abundance curves, the shape of the rank abundance curve, species abundances and multivariate metrics of community composition, <code>codyn</code> contains functions to calculate these metrics either between time points or a single time point between two paired replicates.
The community stability metrics in <code>codyn</code> calculate overall stability and patterns of species covariance and synchrony over time.
Finally, <code>codyn</code> contains vignettes that describe methods and reproduce figures from published papers to help users contextualize and apply functions to their own data.
Work on this package was supported by National Science Foundation grant #1262458 to the National Center for Ecological Analysis and Synthesis (NCEAS), the University of Wisconsin, and the University of New Mexico, and a SESYNC Synthesis Postdoctoral Fellowship to MLA.
</p>


<h3>Functions</h3>


<ul>
<li><p><code><a href="#topic+turnover">turnover</a></code>: Calculates species turnover between time periods
</p>
</li>
<li><p><code><a href="#topic+rank_shift">rank_shift</a></code>: Calculates the mean relative change in species rank abundances
</p>
</li>
<li><p><code><a href="#topic+rate_change">rate_change</a></code>: Calculates the rate change in a community over time
</p>
</li>
<li><p><code><a href="#topic+rate_change_interval">rate_change_interval</a></code>: Produces a data frame containing differences in species composition between samples at increasing time intervals
</p>
</li>
<li><p><code><a href="#topic+community_stability">community_stability</a></code>: Calculates community stability over time
</p>
</li>
<li><p><code><a href="#topic+variance_ratio">variance_ratio</a></code>: Computes the ratio of the variance of aggregate species abundances in a community 
</p>
</li>
<li><p><code><a href="#topic+synchrony">synchrony</a></code>: Calculates the degree synchrony in species abundances
</p>
</li>
<li><p><code><a href="#topic+cyclic_shift">temporal_torus_translation</a></code>: Calculates a test statistic on a null ecological community created via cyclic shifts. <code>confint</code> provides mean and confidence intervals of this null distribution
</p>
</li>
<li><p><code><a href="#topic+community_structure">community_structure</a></code>: Calculates richness and evenness (using specified metric) for a replicate
</p>
</li>
<li><p><code><a href="#topic+community_diversity">community_diversity</a></code>: Calculates diversity (using specified metric) for a replicate
</p>
</li>
<li><p><code><a href="#topic+RAC_change">RAC_change</a></code>:Calculates changes in species richness, evenness, species' ranks, gain, and losses for a replicate over time
</p>
</li>
<li><p><code><a href="#topic+abundance_change">abundance_change</a></code>: For each species in a replicate, calculates changes in abundance over time
</p>
</li>
<li><p><code><a href="#topic+curve_change">curve_change</a></code>: Calculates changes in the shape of the RAC curve for each replicate over time
</p>
</li>
<li><p><code><a href="#topic+multivariate_change">multivariate_change</a></code>: Calculates changes in community composition and dispersion over time
</p>
</li>
<li><p><code><a href="#topic+RAC_difference">RAC_difference</a></code>: Calculates differences in species richness, evenness, species' ranks, shared species between paired samples at a single point in time
</p>
</li>
<li><p><code><a href="#topic+abundance_difference">abundance_difference</a></code>: Calculates differences in abundance for each species in paired samples at a single point in time
</p>
</li>
<li><p><code><a href="#topic+curve_difference">curve_difference</a></code>: Calculates differences in the shape of the RAC between paired samples at a single point in time
</p>
</li>
<li><p><code><a href="#topic+multivariate_difference">multivariate_difference</a></code>: Calculates differences in community composition and dispersion of all replicates between treatments at a single point in time
</p>
</li></ul>



<h3>Author(s)</h3>


<ul>
<li><p>Lauren Hallett <a href="mailto:lauren.m.hallett@gmail.com">lauren.m.hallett@gmail.com</a>
</p>
</li>
<li><p>Meghan L. Avolio <a href="mailto:meghan.avolio@jhu.edu">meghan.avolio@jhu.edu</a>
</p>
</li>
<li><p>Ian T. Carroll <a href="mailto:icarroll@sesync.org">icarroll@sesync.org</a>
</p>
</li>
<li><p>Sydney K. Jones <a href="mailto:syd@sevilleta.unm.edu">syd@sevilleta.unm.edu</a>
</p>
</li>
<li><p>A. Andrew A. MacDonald <a href="mailto:aammacdonald@gmail.com">aammacdonald@gmail.com</a>
</p>
</li>
<li><p>Dan F. B. Flynn <a href="mailto:flynn@fas.harvard.edu">flynn@fas.harvard.edu</a>
</p>
</li>
<li><p>Peter Slaughter <a href="mailto:slaughter@nceas.ucsb.edu">slaughter@nceas.ucsb.edu</a>
</p>
</li>
<li><p>Julie Ripplinger <a href="mailto:julie.ripplinger@asu.edu">julie.ripplinger@asu.edu</a>
</p>
</li>
<li><p>Scott L. Collins <a href="mailto:scollins@sevilleta.unm.edu">scollins@sevilleta.unm.edu</a>
</p>
</li>
<li><p>Corinna Gries <a href="mailto:cgries@wisc.edu">cgries@wisc.edu</a>
</p>
</li>
<li><p>Matthew B. Jones <a href="mailto:jones@nceas.ucsb.edu">jones@nceas.ucsb.edu</a>
</p>
</li></ul>


<hr>
<h2 id='abundance_change'>Species Abundance Changes</h2><span id='topic+abundance_change'></span>

<h3>Description</h3>

<p>Calculates the abundance change for species in a replicate
between two time points. Changes are on abundance values provided, if
relative data is used, then changes in relative abundance will be
calculated.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>abundance_change(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NULL,
  reference.time = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="abundance_change_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species, and abundance columns and an
optional columns of replicates.</p>
</td></tr>
<tr><td><code id="abundance_change_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column.</p>
</td></tr>
<tr><td><code id="abundance_change_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="abundance_change_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="abundance_change_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column. If specified,
replicate must be unique within the dataset and cannot be nested within
treatments or blocks.</p>
</td></tr>
<tr><td><code id="abundance_change_+3A_reference.time">reference.time</code></td>
<td>
<p>The name of the optional time point that all other time
points should be compared to (e.g. the first year of data). If not
specified, each comparison is between consecutive time points (the first
and second year, second and third year, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The abundance_change function returns a data frame with a subset of
the following columns:
</p>

<ul>
<li><p>replicate.var: A column with the specified replicate.var, if it is
specified.
</p>
</li>
<li><p>time.var: A column with the specified time.var and a second column,
with '2' appended to the name. Time is subtracted from time2
</p>
</li>
<li><p>species.var: A column with the specified species.var.
</p>
</li>
<li><p>change: A numeric column of the change in abundance between  time
points. A positive value occurs when a species increases in abundance over
time, and a negative value when a species decreases in abundance over time.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# Without replicates
df &lt;- subset(pplots, plot == 25)
abundance_change(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 time.var = "year")

# With replicates
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(6, 25, 32))
abundance_change(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 replicate.var = "plot",
                 time.var = "year")
                 
# With reference year
df &lt;- subset(pplots, year &lt; 2005 &amp; plot %in% c(6, 25, 32))
abundance_change(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 replicate.var = "plot",
                 time.var = "year",
                 reference.time = 2002)
</code></pre>

<hr>
<h2 id='abundance_difference'>Abundance Differences</h2><span id='topic+abundance_difference'></span>

<h3>Description</h3>

<p>Calculates the abundance difference for species between two
samples. Differences are on abundance values provided, if relative data is
used, then differences in relative abundance will be calculated. There are
three ways differences can be calculated. 1) Between treatments within a
block (note: block.var and treatment.var need to be specified). 2) Between
treatments, pooling all replicates into a single species pool (note: pool =
TRUE, treatment.var needs to be specified, and block.var = NULL). 3) All
pairwise combinations between all replicates (note: block.var = NULL, pool
= FALSE and specifying treatment.var is optional. If treatment.var is
specified, the treatment that each replicate belongs to will also be listed
in the output).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>abundance_difference(
  df,
  time.var = NULL,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var = NULL,
  pool = FALSE,
  block.var = NULL,
  reference.treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="abundance_difference_+3A_df">df</code></td>
<td>
<p>A data frame containing a species, abundance, and replicate columns
and optional time, treatment, and block columns.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_treatment.var">treatment.var</code></td>
<td>
<p>The name of the optional treatment column.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_pool">pool</code></td>
<td>
<p>An argument to allow abundance values to be pooled within a
treatment. The default value is &quot;FALSE&quot;, a value of &quot;TRUE&quot; averages
abundance of each species within a treatment at a given time point.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_block.var">block.var</code></td>
<td>
<p>The name of the optional block column.</p>
</td></tr>
<tr><td><code id="abundance_difference_+3A_reference.treatment">reference.treatment</code></td>
<td>
<p>The name of the optional treatment that all other
treatments will be compared to (e.g. only controls will be compared to all
other treatments). If not specified all pairwise treatment comparisons will
be made.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The abundance_difference function returns a data frame with a subset
of the following columns:
</p>

<ul>
<li><p>species.var: A column that has same name and type as the species.var
column.
</p>
</li>
<li><p>difference: A numeric column of the abundance differences between
the two samples being compared (replicates or treatments). A numeric column
of the change in abundance between consecutive timepoints. A positive value
occurs when a species has greater abundance in replicate.var2 than in
replicate.var and/or in treatment.var2 than in treatment.var.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, represents the first replicate being compared. Note, a
replicate column will be returned only when pool = FALSE or block.var =
NULL.
</p>
</li>
<li><p>replicate.var2: A column that has the same type as the replicate.var
column, and is named replicate.var with a 2 appended to it, represents the
second replicate being compared. Note, a replicate.var column will be
returned only when pool = FALSE and block.var = NULL.
</p>
</li>
<li><p>time.var: A column that has the same name and type as the time.var
column, if time.var is specified.
</p>
</li>
<li><p>treatment.var: A column that has same name and type as the
treatment.var column, represents the first treatment being compared. A
treatment.var column will be returned when pool = TRUE, block.var is
specified, or treatment.var is specified.
</p>
</li>
<li><p>treatment.var2: A column that has the same type as the treatment.var
column, and is named treatment.var with a 2 appended to it, represents the
second treatment being compared. A treatment.var column will be returned
when pool = TRUE, block.var is specified, or treatment.var is specified.
</p>
</li>
<li><p>block.var: A column that has same name and type as the block.var
column, if block.var is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# With block and no time
df &lt;- subset(pplots, year == 2002 &amp; block &lt; 3)
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     treatment.var = "treatment",
                     block.var = "block",
                     replicate.var = "plot")

# With blocks and time
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     treatment.var = "treatment",
                     block.var = "block",
                     replicate.var = "plot",
                     time.var = "year")

# With blocks, time and reference treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     treatment.var = "treatment",
                     block.var = "block",
                     replicate.var = "plot",
                     time.var = "year",
                     reference.treatment = "N1P0")

# Pooling by treatment with time
df &lt;- subset(pplots, year &lt; 2004)
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     treatment.var = "treatment",
                     pool = TRUE,
                     replicate.var = "plot",
                     time.var = "year")

# All pairwise replicates with treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     replicate.var = "plot",
                     time.var = "year",
                     treatment.var = "treatment")

# All pairwise replicates without treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
abundance_difference(df = df,
                     species.var = "species",
                     abundance.var = "relative_cover",
                     replicate.var = "plot",
                     time.var = "year")
</code></pre>

<hr>
<h2 id='collins08'>Konza data from Collins et al. 2008</h2><span id='topic+collins08'></span>

<h3>Description</h3>

<p>A dataset of tallgrass prairie plant composition at one annually burned and one unburned
site over time at the Konza Prairie LTER, Manhattan Kansas (Collins et al. 2008).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(collins08)
</code></pre>


<h3>Format</h3>

<p>A data frame with 2058 rows and 4 variables
</p>


<h3>Details</h3>

<p>A data frame containing a column for replicate, year, species and abundance:
</p>

<ul>
<li><p> replicate: A factor column of spatial replicates with two levels (&quot;annually burned&quot; and &quot;unburned&quot;)
</p>
</li>
<li><p> year: An integer column of sampling time points
</p>
</li>
<li><p> species: A factor column of species sampled
</p>
</li>
<li><p> abundance: A numeric column of abundance values
</p>
</li></ul>



<h3>Source</h3>

<p>Collins, Scott L., Katharine N. Suding, Elsa E. Cleland, Michael Batty, Steven C. Pennings, Katherine L. Gross, James B. Grace, Laura Gough, Joe E. Fargione, and Christopher M. Clark. (2008) &quot;Rank clocks and plant community dynamics.&quot; Ecology 89, no. 12: 3534-41.
</p>

<hr>
<h2 id='community_diversity'>Community Diversity</h2><span id='topic+community_diversity'></span>

<h3>Description</h3>

<p>Calculates Shannon's or Inverse Simpson's diversity of a
community, but only one measure of diversity can be calculated at a time and
must be specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>community_diversity(
  df,
  time.var = NULL,
  abundance.var,
  replicate.var = NULL,
  metric = c("Shannon", "InverseSimpson")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="community_diversity_+3A_df">df</code></td>
<td>
<p>A data frame containing species and abundance columns and optional
columns of time and/or replicate.</p>
</td></tr>
<tr><td><code id="community_diversity_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column</p>
</td></tr>
<tr><td><code id="community_diversity_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="community_diversity_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column. If specified,
replicate must be unique within the dataset and cannot be nested within
treatments or blocks.</p>
</td></tr>
<tr><td><code id="community_diversity_+3A_metric">metric</code></td>
<td>
<p>The diversity measure to return:
</p>

<ul>
<li><p>&quot;Shannon&quot;: The default measure, calculates Shannon's diversity.
</p>
</li>
<li><p>&quot;InverseSimpson&quot;: Calculates inverse of Simpson's diversity.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>The community_diversity function returns a data frame with the
following attributes:
</p>

<ul>
<li><p>time.var: A column that has the same name and type as the time.var
column, if time.var is specified.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, if replicate.var is specified.
</p>
</li>
<li><p>Shannon: A numeric column of Shannon's diversity if metric =
&quot;Shannon&quot;
</p>
</li>
<li><p>InverseSimpson: A numeric column of the inverse of Simpson's
diversity if metric = &quot;InverseSimpson&quot;
</p>
</li></ul>



<h3>References</h3>

<p>Magurran, A.E. 2004. Measuring Biological Diversity. Blackwell
Publishing, Malden MA, USA.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
#Example with both time and replicates
df &lt;- subset(pplots, plot == 25 | plot == 6)
community_diversity(df,
                    time.var="year", 
                    replicate.var = "plot", 
                    abundance.var = "relative_cover") # for Shannon's diversity measure

df &lt;- subset(pplots, plot == 25 | plot == 6)
community_diversity(df, 
                    time.var="year", 
                    replicate.var = "plot", 
                    abundance.var = "relative_cover", 
                    metric = "InverseSimpson") # for Inverse of Simpson's diversity measure

#Example with no replicates
df &lt;- subset(pplots, plot == 25)
community_diversity(df,
                    time.var="year", 
                    abundance.var = "relative_cover") # for Shannon's diversity measure
                    
#Example with no time or replicate
df &lt;- subset(pplots, plot == 25 &amp; year == 2002)
community_diversity(df,
                    abundance.var = "relative_cover") # for Shannon's diversity measure
</code></pre>

<hr>
<h2 id='community_stability'>Community Stability</h2><span id='topic+community_stability'></span>

<h3>Description</h3>

<p>Calculates the stability of the overall community over time as
the temporal mean / temporal standard deviation of aggregate species
abundances (Tilman 1999).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>community_stability(df, time.var, abundance.var, replicate.var = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="community_stability_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an
optional column of replicates</p>
</td></tr>
<tr><td><code id="community_stability_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="community_stability_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="community_stability_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and
abundance; time.var, species.var and abundance.var are used to indicate which
columns contain those variables. If multiple replicates are included in the
data frame, that column should be specified with replicate.var. Each
replicate should reflect a single experimental unit - there should be a
single community represented within each time point and replicate.
</p>


<h3>Value</h3>

<p>The community_stability function returns a numeric stability value
unless a replication column is specified in the input data frame. If
replication is specified, the function returns a data frame with the
following columns:
</p>

<ul>
<li><p>stability: A numeric column with the stability values.
</p>
</li>
<li><p>replicate.var: A column that shares the same name and type as the
replicate.var column in the input data frame.
</p>
</li></ul>



<h3>References</h3>

<p>Tilman, D. &quot;The Ecological Consequences of Changes in Biodiversity: A Search
for General Principles.&quot; Ecology 80, no. 5 (July 1999): 1455-74.
doi:10.1890/0012-9658(1999)080[1455:TECOCI]2.0.CO;2.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(knz_001d)
community_stability(knz_001d[knz_001d$subplot=="A_1",], 
                     time.var = "year", 
                     abundance.var = "abundance") # for one subplot
community_stability(knz_001d,
                     time.var = "year", 
                     abundance.var = "abundance",
                     replicate.var = "subplot") # across all subplots
</code></pre>

<hr>
<h2 id='community_structure'>Community Structure</h2><span id='topic+community_structure'></span>

<h3>Description</h3>

<p>Calculates species richness and evenness of a community.
Evenness may be calculated as Simpson's (1/D/S), EQ, or Evar, but only one
metric of evenness can be calculated at a time and must be specified.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>community_structure(
  df,
  time.var = NULL,
  abundance.var,
  replicate.var = NULL,
  metric = c("Evar", "SimpsonEvenness", "EQ")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="community_structure_+3A_df">df</code></td>
<td>
<p>A data frame containing species and abundance columns and optional
columns of time and/or replicate.</p>
</td></tr>
<tr><td><code id="community_structure_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column</p>
</td></tr>
<tr><td><code id="community_structure_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="community_structure_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column. If specified,
replicate must be unique within the dataset and cannot be nested within
treatments or blocks.</p>
</td></tr>
<tr><td><code id="community_structure_+3A_metric">metric</code></td>
<td>
<p>The measure of evenness to return:
</p>

<ul>
<li><p>&quot;Evar&quot;: The default measure, calculates evenness as Evar from Smith and
Wilson 1996
</p>
</li>
<li><p>&quot;SimpsonEvenness&quot;: Calculates Simpson's evenness
</p>
</li>
<li><p>&quot;EQ&quot;: Calculates evenness as EQ from Smith and Wilson 1996
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>The community_structure function returns a data frame with the
following attributes:
</p>

<ul>
<li><p>time.var: A column that has the same name and type as the time.var
column, if time.var is specified.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, if specified.
</p>
</li>
<li><p>richness: A numeric column of species richness
</p>
</li>
<li><p>Evar: A numeric column of Evar if evenness = &quot;Evar&quot;
</p>
</li>
<li><p>EQ: A numeric column of EQ if evenness = &quot;EQ&quot;
</p>
</li>
<li><p>SimpsonEvenness: A numeric column of Simpson's evenness if evenness =
&quot;SimpsonEveness&quot;
</p>
</li></ul>



<h3>References</h3>

<p>Smith, B. and Wilson, J. B. 1996. A consumer's guide to evenness
indices. Oikos 76: 70-82.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
#Example with both time and replicates
df &lt;- subset(pplots, plot == 25 | plot == 6)
community_structure(df, 
                    time.var="year", 
                    replicate.var = "plot", 
                    abundance.var = "relative_cover") # for Evar evenness measure

df &lt;- subset(pplots, plot == 25 | plot == 6)
community_structure(df,
                    time.var="year", 
                    replicate.var = "plot", 
                    abundance.var = "relative_cover", 
                    metric = "SimpsonEvenness") # for Simpson's evenness measure

#Example with no replicates
df &lt;- subset(pplots, plot == 25)
community_structure(df, 
                    time.var="year", 
                    abundance.var = "relative_cover",
                    metric = "EQ") # for EQ evenness measure

#Example with only a single time point and no replicates
df &lt;- subset(pplots, plot == 25 &amp; year == 2002)
community_structure(df, 
                    abundance.var = "relative_cover") # for Evar evenness measure
</code></pre>

<hr>
<h2 id='confint.cyclic_shift'>Confidence Intervals from a Cyclic Shift Permutation</h2><span id='topic+confint.cyclic_shift'></span>

<h3>Description</h3>

<p>Calculates confidence intervals for the S3 object produced by <code>cyclic_shift</code>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'cyclic_shift'
confint(object, parm = "out", level = 0.95, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="confint.cyclic_shift_+3A_object">object</code></td>
<td>
<p>An object of class <code>cyclic_shift</code></p>
</td></tr>
<tr><td><code id="confint.cyclic_shift_+3A_parm">parm</code></td>
<td>
<p>which parameter is to be given a confidence interval. At present there is only one option: the mean of the null distribution. Defaults to &quot;out&quot;, referring to the null distribution in objects of class <code>cyclic_shift</code>.</p>
</td></tr>
<tr><td><code id="confint.cyclic_shift_+3A_level">level</code></td>
<td>
<p>the confidence level required.</p>
</td></tr>
<tr><td><code id="confint.cyclic_shift_+3A_...">...</code></td>
<td>
<p>further arguments to <code>quantile</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>A dataframe with the following columns:
</p>

<ul>
<li><p>lowerCI: A numeric column with the lowest confidence interval value.
</p>
</li>
<li><p>upperCI: A numeric column with the highest confidence interval value.
</p>
</li>
<li><p>nullMean: A numeric column with the average value of the specified test statistic when calculated on a null community.
</p>
</li></ul>



<h3>References</h3>

<p>Hallett, Lauren M., Joanna S. Hsu, Elsa E. Cleland, Scott L. Collins, Timothy L. Dickson, Emily C. Farrer, Laureano A. Gherardi, et al. &quot;Biotic Mechanisms of Community Stability Shift along a Precipitation Gradient.&quot; Ecology 95, no. 6 (2014): 1693-1700.
</p>
<p>Harms, Kyle E., Richard Condit, Stephen P. Hubbell, and Robin B. Foster. &quot;Habitat Associations of Trees and Shrubs in a 50-Ha Neotropical Forest Plot.&quot; Journal of Ecology 89, no. 6 (2001): 947-59.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate a covariance matrix on a null community
data(knz_001d)
a1_cyclic &lt;- cyclic_shift(subset(knz_001d, subplot == "A_1"),
                   time.var = "year",
                   species.var = "species",
                   abundance.var = "abundance",
                   FUN = cov,
                   bootnumber = 10)

# Return CI on a1_cyclic
confint(a1_cyclic)
</code></pre>

<hr>
<h2 id='curve_change'>Curve Change</h2><span id='topic+curve_change'></span>

<h3>Description</h3>

<p>Calculates the area difference between two rank abundance curves
between two time periods. If replicate is specified, it must be measured in
both time points, otherwise it will be dropped for that time period
comparison.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>curve_change(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NULL,
  reference.time = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="curve_change_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species, and abundance columns and an
optional columns of replicates.</p>
</td></tr>
<tr><td><code id="curve_change_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column.</p>
</td></tr>
<tr><td><code id="curve_change_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="curve_change_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="curve_change_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column. If specified,
replicate must be unique within the dataset and cannot be nested within
treatments or blocks.</p>
</td></tr>
<tr><td><code id="curve_change_+3A_reference.time">reference.time</code></td>
<td>
<p>The name of the optional time point that all other time
points should be compared to (e.g. the first year of data). If not
specified, each comparison is between consecutive time points (the first
and second year, second and third year, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The curve_change function returns a data frame with the following
attributes:
</p>

<ul>
<li><p>time.var: A column with the specified time.var and a second column,
with '2' appended to the name. Time is subtracted from time2.
</p>
</li>
<li><p>curve_change: A numeric column of the change in curves between time
points.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, if specified.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# Without replicates
df &lt;- subset(pplots, plot == 25)
curve_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           time.var = "year")

# With replicates
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(6, 25, 32))
curve_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           replicate.var = "plot",
           time.var = "year")
           
# With reference year
df &lt;- subset(pplots, year &lt; 2005 &amp; plot %in% c(6, 25, 32))
curve_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           replicate.var = "plot",
           time.var = "year",
           reference.time = 2002)
</code></pre>

<hr>
<h2 id='curve_difference'>Curve Difference</h2><span id='topic+curve_difference'></span>

<h3>Description</h3>

<p>Calculates the area difference between two rank abundance
curves. There are three ways differences can be calculated. 1) Between all
treatments within a block (note: block.var and treatment.var need to be
specified. 2) Between treatments, pooling all replicates into a single
species pool (note: pool = TRUE, treatment.var needs to be specified, and
block.var = NULL. 3) All pairwise combinations between all replicates
(note:block.var = NULL, pool = FALSE and specifying treatment.var is
optional. If treatment.var is specified, the treatment that each replicate
belongs to will also be listed in the output).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>curve_difference(
  df,
  time.var = NULL,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var = NULL,
  pool = FALSE,
  block.var = NULL,
  reference.treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="curve_difference_+3A_df">df</code></td>
<td>
<p>A data frame containing a species, abundance, and replicate columns
and optional time, treatment, and block columns.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_treatment.var">treatment.var</code></td>
<td>
<p>The name of the optional treatment column.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_pool">pool</code></td>
<td>
<p>An argument to allow abundance values to be pooled within a
treatment. The default value is &quot;FALSE&quot;, a value of &quot;TRUE&quot; averages
abundance of each species within a treatment at a given time point.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_block.var">block.var</code></td>
<td>
<p>The name of the optional block column.</p>
</td></tr>
<tr><td><code id="curve_difference_+3A_reference.treatment">reference.treatment</code></td>
<td>
<p>The name of the optional treatment that all other
treatments will be compared to (e.g. only controls will be compared to all
other treatments). If not specified all pairwise treatment comparisons will
be made.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The curve_difference function returns a data frame with the following attributes:
</p>

<ul>
<li><p>curve_diff: A numeric column of the area difference in curves between the two samples being compared (replicates or treatments).
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the replicate.var column, represents the first replicate being compared. Note, a replicate column will be returned only when pool is FALSE or block.var = NULL.
</p>
</li>
<li><p>replicate.var2: A column that has the same type as the replicate.var column, and is named replicate.var with a 2 appended to it, represents the second replicate being compared. Note, a replicate.var column will be returned only when pool is FALSE and block.var = NULL.
</p>
</li>
<li><p>time.var: A column that has the same name and type as the time.var column, if time.var is specified.
</p>
</li>
<li><p>treatment.var: A column that has same name and type as the treatment.var column, represents the first treatment being compared. A treatment.var column will be returned when pool is TRUE or block.var is specified, or treatment.var is specified.
</p>
</li>
<li><p>treatment.var2: A column that has the same type as the treatment.var column, and is named treatment.var with a 2 appended to it, represents the second treatment being compared. A treatment.var column will be returned when pool is TRUE or block.var is specified, or treatment.var is specified.
</p>
</li>
<li><p>block.var: A column that has same name and type as the block.var column, if block.var is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# With block and no time
df &lt;- subset(pplots, year == 2002 &amp; block &lt; 3)
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 treatment.var = "treatment",
                 block.var = "block",
                 replicate.var = "plot")

# With blocks and time
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 treatment.var = "treatment",
                 block.var = "block",
                 replicate.var = "plot",
                 time.var = "year")

# With blocks, time, and reference treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 treatment.var = "treatment",
                 block.var = "block",
                 replicate.var = "plot",
                 time.var = "year",
                 reference.treatment = "N1P0")

# Pooling by treatment with time
df &lt;- subset(pplots, year &lt; 2004)
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 treatment.var = "treatment",
                 pool = TRUE,
                 replicate.var = "plot",
                 time.var = "year")

# All pairwise replicates with treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 replicate.var = "plot",
                 time.var = "year",
                 treatment.var = "treatment")

# All pairwise replicates without treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
curve_difference(df = df,
                 species.var = "species",
                 abundance.var = "relative_cover",
                 replicate.var = "plot",
                 time.var = "year")
</code></pre>

<hr>
<h2 id='cyclic_shift'>Cyclic Shift Permutations</h2><span id='topic+cyclic_shift'></span><span id='topic+temporal_torus_translation'></span>

<h3>Description</h3>

<p>Performs a user-specified function on a null ecological community created via cyclic shift permutations (Harms et al. 2001, Hallett et al. 2014).
The null community is formed by randomly selected different starting years for the time series of each species.
This generates a null community matrix in which species abundances vary independently but within-species autocorrelation is maintained.
The user-specified function must require a species x time input.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>cyclic_shift(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NA,
  FUN,
  bootnumber
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="cyclic_shift_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Defaults to <code>NA</code>, indicating no replicates (i.e., data are from a single plot).</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_fun">FUN</code></td>
<td>
<p>A function to calculate on the null community</p>
</td></tr>
<tr><td><code id="cyclic_shift_+3A_bootnumber">bootnumber</code></td>
<td>
<p>Number of null simulations to run</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
</p>


<h3>Value</h3>

<p>The cyclic_shift function returns an S3 object of class &quot;cyclic_shift&quot; and parameter &quot;out&quot;.
The length of the &quot;out&quot; parameter is the number of null iterations as specified by bootnumber.
If multiple replicates are specified, null values are averaged among replicates for each iteration, but a different cyclic shift permutation is applied to each replicate within an iteration.
</p>


<h3>References</h3>

<p>Hallett, Lauren M., Joanna S. Hsu, Elsa E. Cleland, Scott L. Collins, Timothy L. Dickson, Emily C. Farrer, Laureano A. Gherardi, et al. &quot;Biotic Mechanisms of Community Stability Shift along a Precipitation Gradient.&quot; Ecology 95, no. 6 (2014): 1693-1700.
</p>
<p>Harms, Kyle E., Richard Condit, Stephen P. Hubbell, and Robin B. Foster. &quot;Habitat Associations of Trees and Shrubs in a 50-Ha Neotropical Forest Plot.&quot; Journal of Ecology 89, no. 6 (2001): 947-59.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Calculate a covariance matrix on a null community
data(knz_001d)
a1_cyclic &lt;- cyclic_shift(subset(knz_001d, subplot == "A_1"),
                   time.var = "year",
                   species.var = "species",
                   abundance.var = "abundance",
                   FUN = cov,
                   bootnumber = 10)
</code></pre>

<hr>
<h2 id='knz_001d'>Data from Konza Prairie, watershed 001d</h2><span id='topic+knz_001d'></span>

<h3>Description</h3>

<p>Plant composition within multiple replicates at an annually burned tallgrass
prairie site in the Konza Prairie LTER, Manhattan KS (Watershed 001d).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(knz_001d)
</code></pre>


<h3>Format</h3>

<p>A data frame with 8768 rows and 4 variables
</p>


<h3>Details</h3>

<p>A data frame containing a column for species, year, subplot and abundance:
</p>

<ul>
<li><p> species: A factor column of species sampled
</p>
</li>
<li><p> year: An integer column of sampling time points
</p>
</li>
<li><p> subplot: A factor column of spatial replicates with 20 levels
</p>
</li>
<li><p> abundance: A numeric column of abundance values
</p>
</li></ul>



<h3>Source</h3>

<p>Konza Prairie LTER Dataset ID: PVC02, watershed 1D
</p>
<p>Collins, S. L. (2000) Disturbance frequency and community stability in native tallgrass prairie. American Naturalist 155:311-325.
</p>

<hr>
<h2 id='mean_rank_shift'>Mean Rank Shifts</h2><span id='topic+mean_rank_shift'></span>

<h3>Description</h3>

<p>A measure of the relative change in species rank abundances, which indicates shifts in relative abundances over time (Collins et al. 2008).
Mean rank shifts are calculated as the average difference in species' ranks between consecutive time periods, among species that are present across the entire time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mean_rank_shift(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = as.character(NA)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="mean_rank_shift_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="mean_rank_shift_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="mean_rank_shift_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="mean_rank_shift_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="mean_rank_shift_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>


<h3>Value</h3>

<p>mean_rank_shift returns a data frame with the following columns:
</p>

<ul>
<li><p>time.var_pair: A factor column that returns the two time periods being compared, separated by a dash. The name of this column is the same as the time.var column in the input dataframe followed by &quot;_pair&quot;.
</p>
</li>
<li><p>MRS: A numeric column with the mean rank shift values.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the replicate.var column, if replication is specified.
</p>
</li></ul>


<hr>
<h2 id='multivariate_change'>Using dissimilarity-based measures to calculate changes in composition
and dispersion</h2><span id='topic+multivariate_change'></span>

<h3>Description</h3>

<p>Calculates the changes in composition and dispersion based off a
Bray-Curtis dissimilarity matrix. Composition change is the pairwise
distance between centroids of compared time periods and ranges from 0-1,
where identical communities give 0 and completely different
communities give 1. Dispersion change is the difference between time periods in
the dispersion of replicates, i.e. the average distance between a replicate
and its centroid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multivariate_change(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var = NULL,
  reference.time = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multivariate_change_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species, abundance and replicate
columns and an optional column of treatment.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_treatment.var">treatment.var</code></td>
<td>
<p>The name of the optional treatment column.</p>
</td></tr>
<tr><td><code id="multivariate_change_+3A_reference.time">reference.time</code></td>
<td>
<p>The name of the optional time point that all other time
points should be compared to (e.g. the first year of data). If not
specified, each comparison is between consecutive time points (the first
and second year, second and third year, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The multivariate_change function returns a data frame with the
following attributes:
</p>

<ul>
<li><p>time.var: A column with the specified time.var and a second column,
with '2' appended to the name. Time is subtracted from time2 for dispersion
change.
</p>
</li>
<li><p>composition_change: A numeric column that is the distance
between the centroids of two time points, or NA if a real distance
could not be calculated.
</p>
</li>
<li><p>dispersion_change: A numeric column that is the difference in the
average dispersion of the replicates around the centroid for the two time
periods. A negative value indicates replicates are converging over time
(there is less dispersion at time period 2 than time period 1) and a
positive value indicates replicates are diverging over time (there is more
dispersion at time period 2 than time period 1.
</p>
</li>
<li><p>treatment.var: A column that has same name and type as the
treatment.var column, if treatment.var is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. 2015; Avolio et al. Submitted, Marti Anderson et al. 2006.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# With treatment
multivariate_change(pplots,
                    time.var="year",
                    replicate.var = "plot",
                    treatment.var = "treatment",
                    species.var = "species",
                    abundance.var = "relative_cover")
# In each year there are 6 replicates and there are 4 years of data for 3
# time comparisons, thus 24 total observations in each treatment.

# With treatment and reference year
multivariate_change(pplots,
                    time.var="year",
                    replicate.var = "plot",
                    treatment.var = "treatment",
                    species.var = "species",
                    abundance.var = "relative_cover",
                    reference.time = 2002)
# In each year there are 6 replicates and there are 4 years of data for 3
# time comparisons, thus 24 total observations in each treatment.

# Without treatment
df &lt;- subset(pplots, treatment == "N1P0")
multivariate_change(df,
                    time.var="year",
                    replicate.var = "plot",
                    species.var = "species",
                    abundance.var = "relative_cover")
# In each year there are 6 replicates and there are 4 years of data for 3
# time comparisons, thus 24 total observations.

</code></pre>

<hr>
<h2 id='multivariate_difference'>Using dissimilarity-based measures to calculate differences in
composition and dispersion between pairs of treatments at a single time
point</h2><span id='topic+multivariate_difference'></span>

<h3>Description</h3>

<p>Calculates the difference in composition and dispersion between
treatments based off a Bray-Curtis dissimilarity matrix at a single point
in time. Composition difference is the pairwise distance between centroids
of compared treatments and ranges from 0-1, where identical communities
give 0 and completely different communities give 1. Dispersion difference
is the difference between treatments in the dispersion of replicates, i.e.
the average distance between a replicate and its centroid.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>multivariate_difference(
  df,
  time.var = NULL,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var,
  reference.treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="multivariate_difference_+3A_df">df</code></td>
<td>
<p>A data frame containing a species, abundance, replicate, and
treatment columns and optional time column.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_treatment.var">treatment.var</code></td>
<td>
<p>The name of the treatment column.</p>
</td></tr>
<tr><td><code id="multivariate_difference_+3A_reference.treatment">reference.treatment</code></td>
<td>
<p>The name of the optional treatment that all other
treatments will be compared to (e.g. only controls will be compared to all
other treatments). If not specified all pairwise treatment comparisons will
be made.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The multivariate_difference function returns a data frame with the
following attributes:
</p>

<ul>
<li><p>treatment.var: A column that has same name and type as the
treatment.var column, if treatment.var is specified.
</p>
</li>
<li><p>treatment.var2: A column that has the same type as the treatment.var
column, and is named treatment.var with a 2 appended to it.
</p>
</li>
<li><p>composition_diff: A numeric column that is the euclidean distance
between the centroids of two treatments at a single point in time.
</p>
</li>
<li><p>abs_dispersion_diff: A numeric column that is the absolute value of
the difference in the average dispersion of the replicates around the
centroid for the two treatments.
</p>
</li>
<li><p>trt_greater_disp: A column that has same type as the treatment.var
column, and specifies which of the two  treatments has greater dispersion.
</p>
</li>
<li><p>time.var: A characteristic column that has the same name and type as
the time.var column, if specified.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted, Avolio et al. 2015, Marti Anderson et al. 2006
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# Without time
df &lt;- subset(pplots, year == 2002)
multivariate_difference(df,
                        replicate.var = "plot",
                        treatment.var = "treatment",
                        species.var = "species",
                        abundance.var = "relative_cover")
# There are 6 replicates for each of three treatments, thus 18 total
# observations.

# Without time and with reference treatment
df &lt;- subset(pplots, year == 2002)
multivariate_difference(df,
                        replicate.var = "plot",
                        treatment.var = "treatment",
                        species.var = "species",
                        abundance.var = "relative_cover",
                        reference.treatment = "N1P0")
# There are 6 replicates for each of three treatments, thus 18 total
# observations.

# With time
multivariate_difference(pplots,
                        time.var = "year",
                        replicate.var = "plot",
                        species.var = "species",
                        abundance.var = "relative_cover",
                        treatment.var = "treatment")
# In each year there are 6 replicates for each of three treatments, for a
# total of 18 observations.
</code></pre>

<hr>
<h2 id='pplots'>Phosphorus plots data from Avolio et al. 2014</h2><span id='topic+pplots'></span>

<h3>Description</h3>

<p>A dataset of tallgrass prairie plant composition in a nitrogen and phosphorus addition experiment at Konza Prairie, Manhattan Kansas (Avolio et al. 2014). This dataset is a subset of the full dataset.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(pplots)
</code></pre>


<h3>Format</h3>

<p>A data frame with 1232 rows and 6 variables
</p>


<h3>Details</h3>

<p>A data frame containing a column for replicate, year, species, abundance, block and treatment :
</p>

<ul>
<li><p> plot: An integer column of spatial replicates with 18 levels (6-48)
</p>
</li>
<li><p> year: An integer column of sampling time points
</p>
</li>
<li><p> species: A factor column of species sampled
</p>
</li>
<li><p> relative_cover: A numeric column of relative cover values
</p>
</li>
<li><p> block: An integer column of dummy blocking variable, grouping treatment plots into blocks
</p>
</li>
<li><p> treatment: A factor column of nitrogen and phosphorus treatments applied to the plots
</p>
</li></ul>



<h3>Source</h3>

<p>Avolio, ML, Koerner, S, La Pierre, K, Wilcox, K, Wilson, GTW, Smith, MD, Collins, S. 2014. Changes in plant community composition, not diversity, to a decade of nitrogen and phosphorus additions drive changes in aboveground productivity in a tallgrass prairie. Journal of Ecology. 102: 1649-1660.
</p>

<hr>
<h2 id='RAC_change'>Rank Abundance Curve Changes</h2><span id='topic+RAC_change'></span>

<h3>Description</h3>

<p>Calculates change of the five aspects of rank abundance curves
(richness, evenness, rank, species gains, and species losses) for a
replicate between two time points.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RAC_change(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NULL,
  reference.time = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RAC_change_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species, and abundance columns and an
optional columns of replicates.</p>
</td></tr>
<tr><td><code id="RAC_change_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column.</p>
</td></tr>
<tr><td><code id="RAC_change_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="RAC_change_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="RAC_change_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column. If specified,
replicate must be unique within the dataset and cannot be nested within
treatments or blocks.</p>
</td></tr>
<tr><td><code id="RAC_change_+3A_reference.time">reference.time</code></td>
<td>
<p>The name of the optional time point that all other time
points should be compared to (e.g. the first year of data). If not
specified, each comparison is between consecutive time points (the first
and second year, second and third year, etc.)</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The RAC_change function returns a data frame with a subset of the
following columns:
</p>

<ul>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, if replicate.var is specified.
</p>
</li>
<li><p>time.var: A column with the specified time.var and a second column,
with '2' appended to the name. Time is subtracted from time2.
</p>
</li>
<li><p>richness_change: A numeric column that is the change in richness
between the two time periods for a replicate divided by the total number of
unique species in both time periods. A positive value occurs when a there is
an increase in species richness over time, and a negative value when there
is a decreases in species richness over  time.
</p>
</li>
<li><p>evenness_change: A numeric column that is the change in
evenness(measured with Evar) between the two time periods for a replicate. A
positive value occurs when evenness  increases over time, and a negative
value when evenness decreases in over time.
</p>
</li>
<li><p>rank_change: A numeric column that is the absolute value of the
average change in species ranks between the two time periods for a replicate
divided by the total number of unique species in both time periods. Species
that are not present in both time periods are given the S+1 rank in the
sample it is absent in, where S is the number of species in that sample.
</p>
</li>
<li><p>gains: A numeric column of the number of species that are present at
time period 2 that were not present at time period 1 for a replicate divided
by the total number of unique species in both time periods. This is
equivalent to the turnover function with metric = &quot;appearances&quot;.
</p>
</li>
<li><p>losses: A numeric column of the number of species that are not
present at time period 2 but were  present at time period 1 for a replicate
divided by the total number of unique species in both time periods. This is
equivalent to the turnover function with metric = &quot;disappearance&quot;.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# Without replicates
df &lt;- subset(pplots, plot == 25)
RAC_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           time.var = "year")

# With replicates
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(6, 25, 32))
RAC_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           replicate.var = "plot",
           time.var = "year")
           
# With reference year
df &lt;- subset(pplots, year &lt; 2005 &amp; plot %in% c(6, 25, 32))
RAC_change(df = df,
           species.var = "species",
           abundance.var = "relative_cover",
           replicate.var = "plot",
           time.var = "year",
           reference.time = 2002)

</code></pre>

<hr>
<h2 id='RAC_difference'>Rank Abundance Curve Differences</h2><span id='topic+RAC_difference'></span>

<h3>Description</h3>

<p>Calculates differences between two samples for four comparable
aspects of rank abundance curves (richness, evenness, rank, species
composition). There are three ways differences can be calculated. 1)
Between treatments within a block (note: block.var and treatment.var need
to be specified). 2) Between treatments, pooling all replicates into a
single species pool (note: pool = TRUE, treatment.var needs to be
specified, and block.var will be NULL). 3) All pairwise combinations
between all replicates (note: block.var = NULL, pool = FALSE and specifying
treatment.var is optional. If treatment.var is specified, the treatment
that each replicate belongs to will also be listed in the output).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>RAC_difference(
  df,
  time.var = NULL,
  species.var,
  abundance.var,
  replicate.var,
  treatment.var = NULL,
  pool = FALSE,
  block.var = NULL,
  reference.treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="RAC_difference_+3A_df">df</code></td>
<td>
<p>A data frame containing a species, abundance, and replicate columns
and optional time, treatment, and block columns.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_time.var">time.var</code></td>
<td>
<p>The name of the optional time column.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the replicate column. Replicate identifiers
must be unique within the dataset and cannot be nested within treatments or
blocks.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_treatment.var">treatment.var</code></td>
<td>
<p>The name of the optional treatment column.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_pool">pool</code></td>
<td>
<p>An argument to allow abundance values to be pooled within a
treatment. The default value is &quot;FALSE&quot;, a value of &quot;TRUE&quot; averages
abundance of each species within a treatment at a given time point.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_block.var">block.var</code></td>
<td>
<p>The name of the optional block column.</p>
</td></tr>
<tr><td><code id="RAC_difference_+3A_reference.treatment">reference.treatment</code></td>
<td>
<p>The name of the optional treatment that all other
treatments will be compared to (e.g. only controls will be compared to all
other treatments). If not specified all pairwise treatment comparisons will
be made.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The RAC_difference function returns a data frame with the following
attributes:
</p>

<ul>
<li><p>time.var: A column that has the same name and type as the time.var
column, if time.var is specified.
</p>
</li>
<li><p>block.var: A column that has same name and type as the block.var
column, if block.var is specified.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the
replicate.var column, represents the first replicate being compared. Note, a
replicate column will be returned only when pool is FALSE or block.var =
NULL.
</p>
</li>
<li><p>replicate.var2: A column that has the same type as the replicate.var
column, and is named replicate.var with a 2 appended to it, represents the
second replicate being compared. Note, a replicate.var column will be
returned only when pool is FALSE and block.var = NULL.
</p>
</li>
<li><p>treatment.var: A column that has the same name and type as the
treatment.var column, represents the first treatment being compared. A
treatment.var column will be returned when pool is TRUE or block.var is
present, or treatment.var is specified.
</p>
</li>
<li><p>treatment.var2: A column that has the same type as the treatment.var
column, and is named treatment.var with a 2 appended to it, represents the
second treatment being compared. A treatment.var column will be returned
when pool is TRUE or block.var is present, or treatment.var is specified.
</p>
</li>
<li><p>richness_diff: A numeric column that is the difference between the
compared samples (treatments or replicates) in species richness divided by
the total number of unique species in both samples. A positive value occurs
when there is greater species richness in replicate.var2 than replicate.var
or treatment.var2 than treatment.var.
</p>
</li>
<li><p>evenness_diff: A numeric column of the difference between the
compared samples (treatments or replicates) in evenness (measured by Evar).
A positive value occurs when there is greater evenness in replicate.var2
than replicate.var or treatment.var2 than treatment.var.
</p>
</li>
<li><p>rank_diff: A numeric column of the absolute value of average
difference between the compared samples (treatments or replicates) in
species' ranks divided by the total number of unique species in both
samples.Species that are not present in both samples are given the S+1 rank
in the sample it is absent in, where S is the number of species in that
sample.
</p>
</li>
<li><p>species_diff: A numeric column of the number of species that are
different between the compared samples (treatments or replicates) divided by
the total number of species in both samples. This is equivalent to the
Jaccard Index.
</p>
</li></ul>



<h3>References</h3>

<p>Avolio et al. Submitted
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(pplots)
# With block and no time
df &lt;- subset(pplots, year == 2002 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot")

# With blocks and time
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot",
               time.var = "year")

# With blocks, time and reference treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; block &lt; 3)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               block.var = "block",
               replicate.var = "plot",
               time.var = "year",
               reference.treatment = "N1P0")

# Pooling by treatment with time
df &lt;- subset(pplots, year &lt; 2004)
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               treatment.var = 'treatment',
               pool = TRUE,
               replicate.var = "plot",
               time.var = "year")

# All pairwise replicates with treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               replicate.var = "plot",
               time.var = "year",
               treatment.var = "treatment")

# All pairwise replicates without treatment
df &lt;- subset(pplots, year &lt; 2004 &amp; plot %in% c(21, 25, 32))
RAC_difference(df = df,
               species.var = "species",
               abundance.var = "relative_cover",
               replicate.var = "plot",
               time.var = "year")
</code></pre>

<hr>
<h2 id='rank_shift'>Mean Rank Shifts</h2><span id='topic+rank_shift'></span>

<h3>Description</h3>

<p>A measure of the relative change in species rank abundances, which indicates shifts in relative abundances over time (Collins et al. 2008).
Mean rank shifts are calculated as the average difference in species' ranks between consecutive time periods, among species that are present across the entire time series.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rank_shift(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = as.character(NA)
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rank_shift_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="rank_shift_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="rank_shift_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="rank_shift_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="rank_shift_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>


<h3>Value</h3>

<p>rank_shift returns a data frame with the following columns:
</p>

<ul>
<li><p>time.var_pair: A factor column that returns the two time periods being compared, separated by a dash. The name of this column is the same as the time.var column in the input dataframe followed by &quot;_pair&quot;.
</p>
</li>
<li><p>MRS: A numeric column with the mean rank shift values.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the replicate.var column, if replication is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Collins, Scott L., Katharine N. Suding, Elsa E. Cleland, Michael Batty, Steven C. Pennings, Katherine L. Gross, James B. Grace, Laura Gough, Joe E. Fargione, and Christopher M. Clark.  (2008) &quot;Rank clocks and plant community dynamics.&quot; Ecology 89, no. 12: 3534-41.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> # Calculate mean rank shifts within replicates
 data(knz_001d)

 myoutput &lt;- rank_shift(knz_001d,
                     time.var = "year",
                     species.var = "species",
                     abundance.var = "abundance",
                     replicate.var = "subplot")

 # Calculate mean rank shifts for a data frame with no replication

 myoutput_singlerep &lt;- rank_shift(subset(knz_001d, subplot=="A_1"),
                           time.var = "year",
                           species.var = "species",
                           abundance.var = "abundance")
</code></pre>

<hr>
<h2 id='rate_change'>Rate of community change over successive time intervals</h2><span id='topic+rate_change'></span>

<h3>Description</h3>

<p>Calculates the slope of the differences in species composition within a community over increasing time
intervals, which provides a  measures of the rate of directional change in community composition.
Differences in species composition are characterized by Euclidean distances,
which are calculated on pair-wise communities across the entire time series.
For example, a data set with six time intervals will have distance values for five one-year time lags
(year 1 vs year 2, year 2 vs year 3 ...),
four two-year time lags (year 1 vs year 3, year 2 vs year 4 ...) and so forth.
These distance values are regressed against the time lag interval.
The slope of the regression line is reported as an indication of the rate and direction of compositional change in the community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rate_change(df, time.var, species.var, abundance.var, replicate.var = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rate_change_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="rate_change_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="rate_change_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="rate_change_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="rate_change_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>
<p>The <code>rate_change</code> function uses linear regression to relate Euclidean distances to time lag intervals.
It is recommended that fit of this relationship be verified using <code>rate_change_interval</code>,
which returns the full set of community distance values and associated time lag intervals.
</p>


<h3>Value</h3>

<p>The <code>rate_change</code> function returns a numeric rate change value unless a replication column is specified in the input data frame.
If replication is specified, the function returns a data frame with the following attributes:
</p>

<ul>
<li><p>rate_change: A numeric column with the synchrony values.
</p>
</li>
<li><p>replicate.var: A column that shares the same name and type as the replicate.var column in the input data frame.
</p>
</li></ul>



<h3>References</h3>

<p>Collins, S. L., Micheli, F. and Hartt, L. 2000. A method to determine rates and patterns of variability in ecological communities. - Oikos 91: 285-293.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(knz_001d)
rate_change(knz_001d[knz_001d$subplot=="A_1",],
                       time.var = "year", 
                       species.var = "species",
                       abundance.var = "abundance") # for one subplot
                       
rate_change(knz_001d, 
             time.var = "year", 
             species.var = "species",
             abundance.var = "abundance",
             replicate.var = "subplot") # across all subplots
</code></pre>

<hr>
<h2 id='rate_change_interval'>Differences in community composition over successive time lag intervals</h2><span id='topic+rate_change_interval'></span>

<h3>Description</h3>

<p>Calculates the differences in species composition within a community over increasing time
intervals. Differences in species composition are characterized by Euclidean distances,
which are calculated on pair-wise communities across the entire time series.
For example, a data set with 6 time intervals will have distance values for five one-year time lags
(year 1 vs year 2, year 2 vs year 3 ...),
4 two-year time lags (year 1 vs year 3, year 2 vs year 4 ...) and so forth.
Returns the full set of community distance values and associated time lag intervals.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>rate_change_interval(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="rate_change_interval_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="rate_change_interval_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="rate_change_interval_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="rate_change_interval_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="rate_change_interval_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The <code>rate_change_interval</code> function returns a data frame with the following attributes:
</p>

<ul>
<li><p>interval: A numeric column containing the interval length between time periods.
</p>
</li>
<li><p>distance: A numeric column containing the Euclidean distances.
</p>
</li>
<li><p>replicate.var: A column that shares the same name and type as the replicate.var column in the input data frame.
</p>
</li></ul>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>


<h3>References</h3>

<p>Collins, S. L., Micheli, F. and Hartt, L. 2000. A method to determine rates and patterns of variability in ecological communities. - Oikos 91: 285-293.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(knz_001d)
rate_change_interval(knz_001d[knz_001d$subplot=="A_1",], 
                     time.var = "year", 
                     species.var = "species",
                     abundance.var = "abundance") # for one subplot
                     
                     
rate_change_interval(knz_001d, 
                     time.var = "year", 
                     species.var = "species",
                     abundance.var = "abundance",
                      replicate.var = "subplot") # across all subplots
</code></pre>

<hr>
<h2 id='synchrony'>Species synchrony</h2><span id='topic+synchrony'></span>

<h3>Description</h3>

<p>Calculates the degree synchrony in species abundances within a community over time.
Includes the option for two different synchrony metrics. The first, developed by Loreau and de Mazancourt (2008), compares the variance of the aggregated community with the variance of individual components.
The second, developed by Gross et al. (2014), compares the average correlation of each individual species with the rest of the aggregated community.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>synchrony(
  df,
  time.var,
  species.var,
  abundance.var,
  metric = "Loreau",
  replicate.var = NA
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="synchrony_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="synchrony_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="synchrony_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="synchrony_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="synchrony_+3A_metric">metric</code></td>
<td>
<p>The synchrony metric to return:
</p>

<ul>
<li><p>&quot;Loreau&quot;: The default metric, calculates synchrony following Loreau and de Mazancourt (2008).
</p>
</li>
<li><p>&quot;Gross&quot;: Calculates synchrony following Gross et al. (2014).
</p>
</li></ul>
</td></tr>
<tr><td><code id="synchrony_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>


<h3>Value</h3>

<p>The <code>synchrony</code> function returns a numeric synchrony value unless a replication column is specified in the input data frame.
If replication is specified, the function returns a data frame with the following attributes:
</p>

<ul>
<li><p>synchrony: A numeric column with the synchrony values.
</p>
</li>
<li><p>replicate.var: A column that shares the same name and type as the replicate.var column in the input data frame.
</p>
</li></ul>



<h3>References</h3>

<p>Gross, Kevin, Bradley J. Cardinale, Jeremy W. Fox, Andrew Gonzalez, Michel Loreau, H. Wayne Polley, Peter B. Reich, and Jasper van Ruijven. (2014) &quot;Species richness and the temporal stability of biomass production: A new analysis of recent biodiversity experiments.&quot; The American Naturalist 183, no. 1: 1-12. doi:10.1086/673915.
</p>
<p>Loreau, Michel, and Claire de Mazancourt. (2008) &quot;Species synchrony and its drivers: Neutral and nonneutral community dynamics in fluctuating environments.&quot; The American Naturalist 172, no. 2: E48-66. doi:10.1086/589746.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(knz_001d)
synchrony(knz_001d[knz_001d$subplot=="A_1",],
                     time.var = "year", 
                     species.var = "species",
                     abundance.var = "abundance") # for one subplot
## Not run: 
synchrony(knz_001d, 
             time.var = "year", 
             species.var = "species",
             abundance.var = "abundance",
             replicate.var = "subplot") # across all subplots
             
synchrony(knz_001d,  
             time.var = "year", 
             species.var = "species",
             abundance.var = "abundance",
             replicate.var = "subplot", 
             metric="Gross") # With Gross et al. (2014) metric.

## End(Not run)
</code></pre>

<hr>
<h2 id='turnover'>Species Turnover</h2><span id='topic+turnover'></span>

<h3>Description</h3>

<p>Computes species turnover between time periods as the proportion of species either gained or lost relative to the total number of species observed across both time periods.
Includes an option to compute turnover as just the proportion of species gained (i.e., &quot;appearances&quot;) or lost (i.e., &quot;disappearances&quot;).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>turnover(
  df,
  time.var,
  species.var,
  abundance.var,
  replicate.var = NA,
  metric = "total"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="turnover_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="turnover_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="turnover_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="turnover_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="turnover_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the optional replicate column</p>
</td></tr>
<tr><td><code id="turnover_+3A_metric">metric</code></td>
<td>
<p>The turnover metric to return:
</p>

<ul>
<li><p>total: The default metric, calculates summed appearances and disappearances relative to total species richness across both time periods.
</p>
</li>
<li><p>appearance: Calculates the number of species that appeared in the second time period relative to total species richness across both time periods.
</p>
</li>
<li><p>disappearance: Calculates the number of species that disappeared in the second time period relative to total species richness across both time periods.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance; time.var, species.var and abundance.var are used to indicate which columns contain those variables.
If multiple replicates are included in the data frame, that column should be specified with replicate.var. Each replicate should reflect a single experimental unit - there must be a single abundance value per species within each time point and replicate.
</p>


<h3>Value</h3>

<p>The turnover function returns a data frame with the following attributes:
</p>

<ul>
<li><p>turnover: A numeric column with the turnover values. The name of this column is the same as the specified metric (default is &quot;total&quot;).
</p>
</li>
<li><p>time.var: A column containing the second time point; the name and type of this column is the same as the time.var column in the input dataframe.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the replicate.var column, if replication is specified.
</p>
</li></ul>



<h3>References</h3>

<p>Cleland, Elsa E., Scott L. Collins, Timothy L. Dickson, Emily C. Farrer, Katherine L. Gross, Laureano A. Gherardi, Lauren M. Hallett, et al. (2013) &quot;Sensitivity of grassland plant community composition to spatial vs. temporal variation in precipitation.&quot; Ecology 94, no. 8: 1687-96.
</p>


<h3>Examples</h3>

<pre><code class='language-R'> data(knz_001d)

 # Calculate relative total turnover within replicates
 total.res &lt;- turnover(df=knz_001d,  
               time.var = "year", 
               species.var = "species",
               abundance.var = "abundance", 
               replicate.var="subplot")
 
 # Calculate relative species appearances within replicates
 appear.res &lt;- turnover(df=knz_001d, 
               time.var = "year", 
               species.var = "species",
               abundance.var = "abundance",  
               replicate.var="subplot", 
               metric="appearance")
 
 # Calculate relative species disappearances within replicates
 disappear.res &lt;- turnover(df=knz_001d, 
               time.var = "year", 
               species.var = "species",
               abundance.var = "abundance", 
               replicate.var="subplot", 
               metric="disappearance")
 
</code></pre>

<hr>
<h2 id='variance_ratio'>Variance Ratio</h2><span id='topic+variance_ratio'></span>

<h3>Description</h3>

<p>Computes the ratio of the variance of aggregate species abundances
in a community to the sum of the variances of individual, component species. A
variance ratio = 1 indicates that species do not covary, a variance ratio &gt; 1
indicates predominately positive covariance among species and a variance
ratio &lt; 1 indicates predominately negative covariance (Schluter 1984).
</p>
<p>Includes a cyclic shift null modeling option to test if the variance ratio significantly
differs from 1. The null community is created by randomly selecting different
starting points for each species' time series, which generates a community in
which species abundances vary independently but within-species autocorrelation
is maintained (Hallett et al. 2014). This randomization is repeated a user-specific
number of times and confidence intervals are reported for the resultant null
distribution of variance ratios. If the dataframe includes multiple replicates,
the variance ratios for the actual and null communities are averaged within each
iteration unless specified otherwise.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>variance_ratio(
  df,
  time.var,
  species.var,
  abundance.var,
  bootnumber,
  replicate.var = NA,
  average.replicates = TRUE,
  level = 0.95,
  li,
  ui
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="variance_ratio_+3A_df">df</code></td>
<td>
<p>A data frame containing time, species and abundance columns and an optional column of replicates</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_time.var">time.var</code></td>
<td>
<p>The name of the time column</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_species.var">species.var</code></td>
<td>
<p>The name of the species column</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_abundance.var">abundance.var</code></td>
<td>
<p>The name of the abundance column</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_bootnumber">bootnumber</code></td>
<td>
<p>The number of null model iterations used to calculated confidence intervals</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_replicate.var">replicate.var</code></td>
<td>
<p>The name of the (optional) replicate column</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_average.replicates">average.replicates</code></td>
<td>
<p>If true returns the variance ratio and CIs averaged</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_level">level</code></td>
<td>
<p>The confidence level for the null mean</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_li">li</code></td>
<td>
<p>(deprecated) lower confidence interval</p>
</td></tr>
<tr><td><code id="variance_ratio_+3A_ui">ui</code></td>
<td>
<p>(deprecated) upper confidence interval
across replicates; if false returns the variance ratio and CI for each replicate. Defaults to true.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The input data frame needs to contain columns for time, species and abundance;
time.var, species.var and abundance.var are used to indicate which columns
contain those variables. If multiple replicates are included in the data frame,
that column should be specified with replicate.var. Each replicate should
reflect a single experimental unit - there must be a single abundance value
per species within each time point and replicate.
</p>
<p>Null model confidence intervals default to the standard lowest 2.5% and
upper 97.5% of the null distribution, typically these do not need to be change,
but they can be user-modified to set more stringent CIs.
@references
Hallett, Lauren M., Joanna S. Hsu, Elsa E. Cleland, Scott L. Collins,
Timothy L. Dickson, Emily C. Farrer, Laureano A. Gherardi, et al. (2014)
&quot;Biotic Mechanisms of Community Stability Shift along a Precipitation Gradient.&quot;
Ecology 95, no. 6: 1693-1700. doi: 10.1890/13-0895.1
</p>
<p>Schluter, Dolph. (1984) &quot;A Variance Test for Detecting Species Associations,
with Some Example Applications.&quot; Ecology 65, no. 3: 998-1005. doi:10.2307/1938071.
</p>


<h3>Value</h3>

<p>The variance_ratio function returns a data frame with the following attributes:
</p>

<ul>
<li><p>VR: A numeric column with the actual variance ratio value.
</p>
</li>
<li><p>lowerCI: A numeric column with the lowest confidence interval value.
</p>
</li>
<li><p>upperCI: A numeric column with the highest confidence interval value.
</p>
</li>
<li><p>nullmean: A numeric column with the average null variance ratio value.
</p>
</li>
<li><p>replicate.var: A column that has same name and type as the replicate.var column, if replication is specified.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'> data(knz_001d)

 # Calculate the variance ratio and CIs averaged within replicates
 # Here the null model is repeated once, for final use it is recommended to set a
 # large bootnumber (eg, 10000)

 res_averagedreplicates &lt;- variance_ratio(knz_001d,
               time.var = "year",
               species.var = "species",
               abundance.var = "abundance",
               bootnumber = 1,
               replicate = "subplot")

 #Calculate the variance ratio and CIs for each replicate

 res_withinreplicates &lt;- variance_ratio(knz_001d,
               time.var = "year",
               species.var = "species",
               abundance.var = "abundance",
               bootnumber = 1,
               replicate = "subplot",
               average.replicates = FALSE)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
