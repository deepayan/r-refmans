<!DOCTYPE html><html><head><title>Help for package ProfoundData</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {ProfoundData}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#ProfoundData-package'><p>Overview of the functions in the ProfoundData package</p></a></li>
<li><a href='#browseData'><p>A browse database function</p></a></li>
<li><a href='#downloadDatabase'><p>Downloads the PROFOUND database</p></a></li>
<li><a href='#getData'><p>A function to extract data</p></a></li>
<li><a href='#getDB'><p>A function to return information of the database connection</p></a></li>
<li><a href='#getPanels'><p>getPanels</p></a></li>
<li><a href='#plotData'><p>A function to plot data</p></a></li>
<li><a href='#queryDB'><p>A function to query the database</p></a></li>
<li><a href='#reportDB'><p>A function report data</p></a></li>
<li><a href='#setDB'><p>A function to set the connection to the database</p></a></li>
<li><a href='#summarizeData'><p>A function to summarize data from the database</p></a></li>
<li><a href='#writeSim2netCDF'><p>A function to write netCDF-files</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Downloading and Exploring Data from the PROFOUND Database</td>
</tr>
<tr>
<td>Version:</td>
<td>0.2.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2020-03-13</td>
</tr>
<tr>
<td>Description:</td>
<td>Provides an R interface for the PROFOUND database &lt;<a href="https://doi.org/10.5880%2FPIK.2019.008">doi:10.5880/PIK.2019.008</a>&gt;. The 
    PROFOUND database contains a wide range of data  to evaluate vegetation models and simulate climate 
    impacts at the forest stand scale. It includes 9 forest sites across Europe, and provides for them a site 
    description as well as soil, climate, CO2, Nitrogen deposition, tree-level, forest stand-level 
    and remote sensing data. Moreover, for a subset of 5 sites, also time series of carbon fluxes, 
    energy balances and soil water are available. </td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.1.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>methods (&ge; 3.3.2), sqldf (&ge; 0.4-10), DBI (&ge; 0.5-1), RSQLite
(&ge; 1.1-2), RNetCDF (&ge; 1.9-1), settings (&ge; 0.2.4), zoo (&ge;
1.7-14), tcltk</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr (&ge; 1.15.1), rmarkdown (&ge; 1.3), R.rsp (&ge; 0.40.0),
testthat (&ge; 1.0.2), BayesianTools</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>R.rsp</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://cost-fp1304-profound.github.io/ProfoundData/">https://cost-fp1304-profound.github.io/ProfoundData/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData/issues">https://github.com/COST-FP1304-PROFOUND/ProfoundData/issues</a></td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2.9000</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2020-03-29 17:49:31 UTC; florian</td>
</tr>
<tr>
<td>Author:</td>
<td>Ramiro Silveyra Gonzalez [aut],
  Christopher Reyer [aut],
  Mahnken Mats [aut],
  Florian Hartig <a href="https://orcid.org/0000-0002-6255-9059"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Friedrich Bohn [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Florian Hartig &lt;florian.hartig@biologie.uni-regensburg.de&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2020-03-30 16:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='ProfoundData-package'>Overview of the functions in the ProfoundData package</h2><span id='topic+ProfoundData-package'></span><span id='topic+ProfoundData'></span>

<h3>Description</h3>

<p>The ProfoundData R package provides functions to explore, visualize and get data from the PROFOUND database.  The development of the PROFOUND database and the ProfoundData R package was faciliated by COST Action FP1304 PROFOUND.
</p>
<p>A brief description of the PROFOUND database is avalaible in the vignette 'PROFOUNDdatabase' (
you can open it by running this command: <code>vignette('PROFOUNDdatabase')</code>).
</p>
<p>Note: before you can use the package, you need to download the database via <code><a href="#topic+downloadDatabase">downloadDatabase</a></code> and
register the database location via <code><a href="#topic+setDB">setDB</a></code>
</p>
<p>Below is a list of the package's functions grouped by theme. See the package
vignette for more information and examples (<code>vignette('ProfoundData')</code>).
</p>


<h3>I. Browse the database</h3>

<p>Functions to explore the database.
</p>

<ul>
<li> <p><code><a href="#topic+browseData">browseData</a></code> To check
</p>

<ul>
<li><p>  available sites
</p>
</li>
<li><p>  available datasets
</p>
</li>
<li><p>  available variables for a dataset
</p>
</li>
<li><p>  available datasets for a site
</p>
</li>
<li><p>  database version
</p>
</li>
<li><p>  metadata
</p>
</li>
<li><p>  policy
</p>
</li>
<li><p>  source
</p>
</li>
<li><p>  site description
</p>
</li></ul>

</li>
<li> <p><code><a href="#topic+summarizeData">summarizeData</a></code> To obtain
</p>

<ul>
<li><p>  data overviews
</p>
</li>
<li><p>  data summaries
</p>
</li></ul>

</li></ul>



<h3>II. Extract data</h3>

<p>Functions to extract data. Data can be extracted for one site and one dataset at a time.
</p>

<ul>
<li> <p><code><a href="#topic+getData">getData</a></code> To extract data
</p>
</li></ul>



<h3>III. Visualize data</h3>

<p>Functions to plot data from the database.
</p>

<ul>
<li> <p><code><a href="#topic+plotData">plotData</a></code> To plot data
</p>
</li></ul>



<h3>IV. Utilities</h3>

<p>Miscellanous
</p>

<ul>
<li> <p><code><a href="#topic+downloadDatabase">downloadDatabase</a></code> To download the database
</p>
</li>
<li> <p><code><a href="#topic+setDB">setDB</a></code> To set the connection to the database
</p>
</li>
<li> <p><code><a href="#topic+getDB">getDB</a></code> To retrieve the filepath to the database
</p>
</li>
<li> <p><code><a href="#topic+queryDB">queryDB</a></code> To pass self-defined queries
</p>
</li>
<li> <p><code><a href="#topic+reportDB">reportDB</a></code> To create a site-by-site report of the database
</p>
</li>
<li> <p><code><a href="#topic+writeSim2netCDF">writeSim2netCDF</a></code> To write netCDF-files
</p>
</li></ul>



<h3>Author(s)</h3>

<p>Except where indicated otherwise, the functions in this package were written by Ramiro Silveyra Gonzalez, Christopher Reyer, Florian Hartig and Mahnken. Ramiro Silveyra Gonzalez was the main developer of the package. Florian Hartig is currently the maintainer.
</p>

<hr>
<h2 id='browseData'>A browse database function</h2><span id='topic+browseData'></span>

<h3>Description</h3>

<p>A function to provide information on available data in the
PROFOUND database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>browseData(
  dataset = NULL,
  site = NULL,
  location = NULL,
  variables = FALSE,
  collapse = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="browseData_+3A_dataset">dataset</code></td>
<td>
<p>a character string providing the name of the dataset (optional).</p>
</td></tr>
<tr><td><code id="browseData_+3A_site">site</code></td>
<td>
<p>a character string providing the name of the site (optional).</p>
</td></tr>
<tr><td><code id="browseData_+3A_location">location</code></td>
<td>
<p>deprecated argument. Please use site instead.</p>
</td></tr>
<tr><td><code id="browseData_+3A_variables">variables</code></td>
<td>
<p>a boolean indicating whether to return the variables of a dataset,
instead of the available sites.</p>
</td></tr>
<tr><td><code id="browseData_+3A_collapse">collapse</code></td>
<td>
<p>a boolean indicating whether to return the compact (TRUE) or the extended (FALSE)
data overview, if neither site nor dataset are passed to the function.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Besides providing information on available data, this function allows
to access the database metadata, policy,  data sources and site descriptions.
</p>


<h3>Value</h3>


<ul>
<li><p> if no arguments,  an overview of available data
</p>
</li>
<li><p>  if metadata, the requested metadata
</p>
</li>
<li><p>  if dataset and variables, available variables for a dataset
</p>
</li>
<li><p>  if dataset, available sites for the dataset
</p>
</li>
<li><p>  if site, available datasets for a site
</p>
</li>
<li><p>  if site and dataset,  returns an integer. Availability is coded as 0 = no available and 1 = available.
This is the quickest option to check availability.
</p>
</li></ul>



<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
# See available data of the database
overview &lt;- browseData()
# Hint: If *collapse* FALSE, full version of the overview table
overview &lt;- browseData(collapse = FALSE)

# Available datasets
tables &lt;- browseData(dataset = "DATASETS")

# Available variables for a given dataset
variables &lt;- browseData(dataset = "CLIMATE_LOCAL", variables = TRUE)

# Available sites for a given dataset
available &lt;- browseData(dataset = "CLIMATE_LOCAL")

# Available datasets for a given site
available &lt;- browseData(site ="le_bray")

# Whether a dataset is available for a specific site
available &lt;- browseData(site ="le_bray", dataset = "CLIMATE_LOCAL")

# See version history
version &lt;- browseData(dataset = "VERSION")

# See metadata
metadata &lt;- browseData(dataset = "METADATA_DATASETS")
metadata &lt;- browseData(dataset = "METADATA_CLIMATE_LOCAL")

# See metadata of a specific site
metadata &lt;- browseData(dataset = "METADATA_TREE", site = "solling_spruce")

# See data source
source &lt;- browseData(dataset = "SOURCE")

# See data source of a specific site
source &lt;- browseData(dataset = "SOURCE", site = "solling_spruce")

# See data policy
source &lt;- browseData(dataset = "POLICY")

# See data policy of a specific site
policy &lt;- browseData(dataset = "POLICY", site = "solling_spruce")

## End(Not run)
</code></pre>

<hr>
<h2 id='downloadDatabase'>Downloads the PROFOUND database</h2><span id='topic+downloadDatabase'></span>

<h3>Description</h3>

<p>This function downloads the PROFOUND database
</p>


<h3>Usage</h3>

<pre><code class='language-R'>downloadDatabase(location = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="downloadDatabase_+3A_location">location</code></td>
<td>
<p>file system location to store the database. If not provide, the function will use the current working directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This is a convenience function to quickly download the PROFOUND database. The function will query you to ask about the path to store the databse, and will return a string with the location, for use in setDB
</p>


<h3>Value</h3>

<p>a string with the location of the sql database
</p>


<h3>Author(s)</h3>

<p>Florian Hartig
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getDB">getDB</a></code>, <code><a href="#topic+setDB">setDB</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  
# For downloading the data, use 
dbfile &lt;- downloadDatabase(location = tempdir())

# Set the connection using the setDB function
setDB(dbfile)

# check if database is available
getDB()

## End(Not run)
</code></pre>

<hr>
<h2 id='getData'>A function to extract data</h2><span id='topic+getData'></span>

<h3>Description</h3>

<p>A function to extract datasets for a site
from the PROFOUND database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getData(
  dataset,
  site = NULL,
  location = NULL,
  forcingDataset = NULL,
  forcingCondition = NULL,
  species = NULL,
  variables = NULL,
  period = NULL,
  collapse = TRUE,
  quality = NULL,
  decreasing = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getData_+3A_dataset">dataset</code></td>
<td>
<p>a character string providing the name of a dataset.</p>
</td></tr>
<tr><td><code id="getData_+3A_site">site</code></td>
<td>
<p>a character string providing the name of a site.</p>
</td></tr>
<tr><td><code id="getData_+3A_location">location</code></td>
<td>
<p>deprecated argument. Please use site instead.</p>
</td></tr>
<tr><td><code id="getData_+3A_forcingdataset">forcingDataset</code></td>
<td>
<p>a character string providing the name of a forcingDataset.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="getData_+3A_forcingcondition">forcingCondition</code></td>
<td>
<p>a character string providing the name of a forcingCondition.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="getData_+3A_species">species</code></td>
<td>
<p>a character string providing the species name or species id.</p>
</td></tr>
<tr><td><code id="getData_+3A_variables">variables</code></td>
<td>
<p>a character array holding the variables to be plotted. Default  is all variables.</p>
</td></tr>
<tr><td><code id="getData_+3A_period">period</code></td>
<td>
<p>a character array with either start or start and end of the subset.
It must have the format &quot;YYYY-MM-DD&quot;, or c(&quot;YYYY-MM-DD&quot;, &quot;YYYY-MM-DD&quot;).</p>
</td></tr>
<tr><td><code id="getData_+3A_collapse">collapse</code></td>
<td>
<p>a boolean indicating whether the returned data should be a
single data frame (TRUE) or a list of data frames (FALSE). Relevant when downloading SOIL and ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="getData_+3A_quality">quality</code></td>
<td>
<p>a number indicating the quality threshold to be used. Default is none.</p>
</td></tr>
<tr><td><code id="getData_+3A_decreasing">decreasing</code></td>
<td>
<p>a boolean indicating whether the quality threshold should be applied up- or downwards.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>When using quality, please be aware that the threshold value is included
in the returned data. Thresholding works by removing data values that are greater
(decreasing = TRUE) or smaller (decreasing = FALSE) than the given value.
The quality parameter is only relevant for datasets that have quality flags. These are
ATMOSPHERICHEATCONDUCTION, SOILTS, FLUX, METEOROLOGICAL, and CLIMATE LOCAL. Please
check the metadata of each dataset before using this parameter.
</p>


<h3>Value</h3>

<p>a data frame or a list of data frames, depending on collapse.
</p>


<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
# Get SITES data
sites &lt;- getData(dataset =  "SITES")

# Get SITES data of a specific site
site &lt;- getData(dataset =  "SITES", site = "soro")

# Get SITEDESCRIPTION
sites &lt;- getData(dataset =  "SITEDESCRIPTION")

# Get SITEDESCRIPTION of a specific site
site &lt;- getData(dataset =  "SITEDESCRIPTION", site = "lebray")

# Get any dataset for a site
data &lt;- getData(dataset =  "CLIMATE_LOCAL", site = "soro")

# Get ISIMIP datasets as a list with data frames
data &lt;- getData(dataset ="CLIMATE_ISIMIP2A", site = "soro", collapse = TRUE)
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site = "soro", collapse = TRUE)
data &lt;- getData(dataset ="NDEPOSITION_ISIMIP2B", site = "soro", collapse = TRUE)

# Get ISIMIP datasets as an unique data frame
data &lt;- getData(dataset ="CLIMATE_ISIMIP2A", site = "soro", collapse = FALSE)
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site = "soro", collapse = FALSE)
data &lt;- getData(dataset ="NDEPOSITION_ISIMIP2B", site = "soro", collapse = FALSE)

# Get SOIL data. Collapse FALSE is recommended.
data &lt;- getData(dataset ="SOIL", site = "soro", collapse = FALSE)

# Get specific forcing datasets and/or forcing conditions
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site ="soro",
                 forcingDataset="GFDLESM2M", forcingCondition ="rcp2p6")
# which is equivalent to
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B_GFDLESM2M_rcp2p6", site ="soro")

# Specify variables
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site ="soro",
                forcingDataset="GFDLESM2M", forcingCondition ="rcp2p6",
                variables = "p_mm")
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site ="soro",
                forcingDataset="GFDLESM2M", forcingCondition ="rcp2p6",
                variables = c("tmax_degC","p_mm"))

# Specify species
data &lt;- getData(dataset ="TREE", site ="hyytiala", species = "Pinus sylvestris")
data &lt;- getData(dataset ="TREE", site ="hyytiala", species = "pisy")
data &lt;- getData(dataset ="STAND", site ="hyytiala", species = "Picea abies")
data &lt;- getData(dataset ="STAND", site ="hyytiala", species = "piab")

# Specify period
data &lt;- getData(dataset ="CLIMATE_ISIMIP2B", site ="soro",
                forcingDataset="GFDLESM2M", forcingCondition ="rcp2p6",
                period = c("2006-01-01","2006-12-31"))

# Specify quality
data &lt;- getData(dataset = "CLIMATE_LOCAL", site = "soro",
                quality = 1, decreasing = FALSE)
data &lt;- getData(dataset = "FLUX", site = "soro",
                quality = 0, decreasing = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='getDB'>A function to return information of the database connection</h2><span id='topic+getDB'></span>

<h3>Description</h3>

<p>A function to return the filepath to the database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getDB()
</code></pre>


<h3>Value</h3>

<p>a character string with the filepath to the database
</p>


<h3>Author(s)</h3>

<p>Ramiro Silveyra Gonzalez
</p>


<h3>See Also</h3>

<p><code><a href="#topic+setDB">setDB</a></code>, <code><a href="#topic+downloadDatabase">downloadDatabase</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  
# For downloading the data, use 
dbfile &lt;- downloadDatabase(location = tempdir())

# Set the connection using the setDB function
setDB(dbfile)

# check if database is available
getDB()

## End(Not run)
</code></pre>

<hr>
<h2 id='getPanels'>getPanels</h2><span id='topic+getPanels'></span>

<h3>Description</h3>

<p>Calculates the argument x for par(mfrow = x) for a desired number of panels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>getPanels(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="getPanels_+3A_x">x</code></td>
<td>
<p>the desired number of panels</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Florian Hartig
</p>

<hr>
<h2 id='plotData'>A function to plot data</h2><span id='topic+plotData'></span>

<h3>Description</h3>

<p>A function to plot data of a site
from the PROFOUND database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>plotData(
  dataset,
  site,
  location = NULL,
  forcingDataset = NULL,
  forcingCondition = NULL,
  species = NULL,
  variables = NULL,
  period = NULL,
  aggregated = NULL,
  FUN = mean,
  automaticPanels = T,
  quality = NULL,
  decreasing = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="plotData_+3A_dataset">dataset</code></td>
<td>
<p>a character string providing the name of a dataset</p>
</td></tr>
<tr><td><code id="plotData_+3A_site">site</code></td>
<td>
<p>a character string providing the name of a site.</p>
</td></tr>
<tr><td><code id="plotData_+3A_location">location</code></td>
<td>
<p>deprecated argument. Please use site instead.</p>
</td></tr>
<tr><td><code id="plotData_+3A_forcingdataset">forcingDataset</code></td>
<td>
<p>a character string providing the name of a forcingDataset.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="plotData_+3A_forcingcondition">forcingCondition</code></td>
<td>
<p>a character string providing the name of a forcingCondition.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="plotData_+3A_species">species</code></td>
<td>
<p>a character string providing the species name or species id.</p>
</td></tr>
<tr><td><code id="plotData_+3A_variables">variables</code></td>
<td>
<p>a character array holding the variables to be plotted. Default  is all variables.</p>
</td></tr>
<tr><td><code id="plotData_+3A_period">period</code></td>
<td>
<p>a character array with either start or start and end of the subset.
It must have the format &quot;YYYY-MM-DD&quot;, or c(&quot;YYYY-MM-DD&quot;, &quot;YYYY-MM-DD&quot;).</p>
</td></tr>
<tr><td><code id="plotData_+3A_aggregated">aggregated</code></td>
<td>
<p>a boolean indicating whether data should be aggregated for display.
Possible values are date, day, month and year.</p>
</td></tr>
<tr><td><code id="plotData_+3A_fun">FUN</code></td>
<td>
<p>a function to use for aggregating the data</p>
</td></tr>
<tr><td><code id="plotData_+3A_automaticpanels">automaticPanels</code></td>
<td>
<p>a boolean indicating whether the function automatically creates panels</p>
</td></tr>
<tr><td><code id="plotData_+3A_quality">quality</code></td>
<td>
<p>a number indicating the quality threshold to be used. Default is none.</p>
</td></tr>
<tr><td><code id="plotData_+3A_decreasing">decreasing</code></td>
<td>
<p>a boolean indicating whether the quality threshold should be applied up- or downwards</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plotting is not supported for the following datasets: OVERVIEW, SITES, SOIL(more). The aggregation of data
relies on the function <code><a href="stats.html#topic+aggregate">aggregate</a></code> for <code><a href="zoo.html#topic+zoo">zoo</a></code> objects. The FUN parameter
is passed to FUN from <code><a href="stats.html#topic+aggregate">aggregate</a></code>. Please check the help files of  <code><a href="stats.html#topic+aggregate">aggregate</a></code>
for further information. For handling NAs we recommend to pass self-defined functions (see examples).
</p>


<h3>Value</h3>

<p>plots for the specified dataset, site and variables
</p>


<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
# Normal plotting
plotData(dataset = "CLIMATE_LOCAL", site = "le_bray", automaticPanels = TRUE)
plotData(dataset = "TREE", site = "solling_beech",   automaticPanels = TRUE)
plotData(dataset = "CLIMATE_LOCAL", site = "le_bray", automaticPanels = FALSE)
plotData(dataset = "TREE", site = "solling_beech",   automaticPanels = FALSE)

# Plot specific forcing datasets and conditions
plotData(dataset ="CLIMATE_ISIMIP2B", site ="soro", forcingDataset="GFDLESM2M",
         forcingCondition ="rcp2p6", automaticPanels = TRUE)

# Plot specific variables
plotData(dataset ="CLIMATE_ISIMIP2B",site ="soro", forcingDataset="GFDLESM2M",
         forcingCondition ="rcp2p6", variables = "p_mm")
plotData(dataset ="TREE",site ="solling_beech", variables = "dbh1_cm")

# Plot specific species
plotData(dataset ="TREE", site ="hyytiala", species = "Pinus sylvestris",
         automaticPanels = TRUE)

# Plot specific period
plotData(dataset = "CLIMATE_LOCAL", site =  "soro",
         period = c("2011-01-01","2012-12-31"))

# Set quality threshold
plotData(dataset = "CLIMATE_LOCAL", site = "soro",
         period = c("2011-01-01","2012-12-31"), quality = 1, decreasing = FALSE)
plotData(dataset = "FLUX", site = "soro", period = c("2011-01-01","2012-12-31"),
         quality = 0, decreasing = TRUE)

# Plot aggregated data
plotData(dataset = "CLIMATE_ISIMIP2B", site ="soro",  forcingDataset= "GFDLESM2M",
         forcingCondition="rcp2p6", variables = "tmax_degC",
         period = c("2020-01-01", "2022-01-01"),
         aggregate = "month", FUN =median)
plotData(dataset = "CLIMATE_ISIMIP2B", site ="soro",  forcingDataset= "GFDLESM2M",
         forcingCondition="rcp2p6", variables = "p_mm",
         period = c("2020-01-01", "2022-01-01"),
         aggregate = "month", FUN =sum)

# Plot aggregated data with self-defined function. In this case, compare month
# mean temperature of one year to mean of all period
data &lt;- getData(dataset = "CLIMATE_ISIMIP2B", site ="soro",  forcingDataset= "GFDLESM2M",
                forcingCondition="rcp2p6", variables = "tmax_degC")
meanTemperature &lt;- mean(data$tmax_degC, na.rm = TRUE)
difference &lt;- function(x) {mean(x, na.rm = TRUE) -meanTemperature}

plotData(dataset = "CLIMATE_ISIMIP2B", site ="soro",  forcingDataset= "GFDLESM2M",
         forcingCondition="rcp2p6", variables = "tmax_degC",
         period = c("2020-01-01", "2021-01-01"),
         aggregate = "month", FUN =difference)
abline(h = 0, col = "red")

## End(Not run)
</code></pre>

<hr>
<h2 id='queryDB'>A function to query the database</h2><span id='topic+queryDB'></span>

<h3>Description</h3>

<p>A queryDB function to perform self-defined queries on the PROFOUND database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>queryDB(queryItem)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="queryDB_+3A_queryitem">queryItem</code></td>
<td>
<p>a character string providing the query</p>
</td></tr>
</table>


<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
# Basic query
overview &lt;- queryDB("SELECT * FROM OVERVIEW")
tree &lt;- queryDB("SELECT * FROM TREE")

# Site name or site_id
myQuery &lt;- queryDB("SELECT date, tmax_degC FROM CLIMATE_LOCAL WHERE site == 'hyytiala'")
myQuery &lt;- queryDB("SELECT date, tmax_degC FROM CLIMATE_LOCAL_12")

# Tree species
myQuery &lt;- queryDB("SELECT  * FROM TREE WHERE species == 'Picea abies'")
myQuery &lt;- queryDB("SELECT  * FROM TREE_piab")

# Specify variables
myQuery &lt;- queryDB("SELECT date, tmax_degC FROM CLIMATE_LOCAL WHERE
                   tmax_degC &gt; 20 AND site == 'hyytiala' AND year == 2010")

## End(Not run)
</code></pre>

<hr>
<h2 id='reportDB'>A function report data</h2><span id='topic+reportDB'></span>

<h3>Description</h3>

<p>This functions creates a site-by-site report of all avalaible data
in the PROFOUND database. The summary is created with a rmarkdown document, which
is rendered and saved as a html document.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>reportDB(outDir = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="reportDB_+3A_outdir">outDir</code></td>
<td>
<p>a character string indicating the output directory in which the
html file will be saved. If no value is provided, the working directory will be
used as output directory.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Please note that creating the report it might take several minutes.
</p>


<h3>Value</h3>

<p>a html file with the database report
</p>


<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
reportDB(outDir = tempdir())

## End(Not run)
</code></pre>

<hr>
<h2 id='setDB'>A function to set the connection to the database</h2><span id='topic+setDB'></span>

<h3>Description</h3>

<p>A setDB funtion to  create a database connection object
</p>


<h3>Usage</h3>

<pre><code class='language-R'>setDB(db_name = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="setDB_+3A_db_name">db_name</code></td>
<td>
<p>a character string providing the absolute path to the PROFOUND database.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+getDB">getDB</a></code>, <code><a href="#topic+downloadDatabase">downloadDatabase</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  
# For downloading the data, use 
dbfile &lt;- downloadDatabase(location = tempdir())

# Set the connection using the setDB function
setDB(dbfile)

# check if database is available
getDB()

## End(Not run)
</code></pre>

<hr>
<h2 id='summarizeData'>A function to summarize data from the database</h2><span id='topic+summarizeData'></span>

<h3>Description</h3>

<p>This function allows to summarize datasets for a site
from the PROFOUND database.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarizeData(
  dataset,
  site,
  location = NULL,
  forcingDataset = NULL,
  forcingCondition = NULL,
  by = "year",
  period = NULL,
  mode = "data"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarizeData_+3A_dataset">dataset</code></td>
<td>
<p>a character string providing the name of a climatic dataset
(CLIMATE_LOCAL, CLIMATE_ISIMIP, ...) or the tree dataset.(change this you )</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_site">site</code></td>
<td>
<p>a character string providing the name of a site.</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_location">location</code></td>
<td>
<p>deprecated argument. Please use site instead.</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_forcingdataset">forcingDataset</code></td>
<td>
<p>a character string providing the name of a forcingDataset.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_forcingcondition">forcingCondition</code></td>
<td>
<p>a character string providing the name of a forcingCondition.
Only relevant for ISIMIP datasets.</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_by">by</code></td>
<td>
<p>a character string indicating how to summarize the data. Currently supports
by year and total. The latter refers to the entire available period.</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_period">period</code></td>
<td>
<p>a character array with either start or start and end of the subset.
It must have the format &quot;YYYY-MM-DD&quot;, or c(&quot;YYYY-MM-DD&quot;, &quot;YYYY-MM-DD&quot;).</p>
</td></tr>
<tr><td><code id="summarizeData_+3A_mode">mode</code></td>
<td>
<p>a character string indicating whether to display the data summary (data) or an overview (overview).</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function is under development and has limited functionality. At the
moment, it is possible to summarize daily climate datasets and tree data.
</p>
<p>Data are summarized by years. Radiation and precipitation are provided as total yearly
values, while the rest of climatic values are year mean values.  For ISIMIP datasets a summary for whole
period will be returned if the dataset comprises more than one forcing dataset and one forcing condition.
</p>


<h3>Value</h3>

<p>a data frame with the summary values
</p>


<h3>Summary values</h3>

<p>Summary is calculated by year
</p>

<ul>
<li><p> Climatic datasets
</p>

<ul>
<li><p>  p_mm and rad_Jcm2day are total yearly values
</p>
</li>
<li><p>  tmax_degC,  tmean_degC, tmin_degC, relhum_percent, airpress_hPa  and wind_ms are mean yearly values
</p>
</li></ul>

</li>
<li><p> TREE dataset
</p>

<ul>
<li><p> density_treeha is the number of tree per ha
</p>
</li>
<li><p> dbhArit_cm is the arithmetic mean diameter
</p>
</li>
<li><p> dbhBa_cm is the average diameter weighted by basal area calculated as dbhBA = (ba1*dbh1 + ba2*dbh2 + ... + bak*dbhk) / (ba1 + ba2+ ... + bak), where bai and dbhi are the basal area and dbh, respectively, of the tree i, and  i = 1, 2, . . , k
</p>
</li>
<li><p> dbhDQ_cm is the mean squared diameter or quadratic mean diameter calculated as dbhDQ = sqrt( (dbh1^2 + dbh2^2+ ... + dbhk^2) / N),  where dbhi is the diameter at breast height of tree i,   i = 1, 2, . . , k, N is the total number of trees, and sqrt is the square root
</p>
</li>
<li><p> heightArith_m is the arithmetic mean height
</p>
</li>
<li><p> heightArith_m is the average height weighted by basal area or Loreys height calculated as heightBA = (ba1*h1 + ba2*h2 + ... + bak*hk) / (ba1 + ba2+ ... + bak), where bai and hi are the basal area and height, respectively, of the tree i, and  i = 1, 2, . . , k
</p>
</li>
<li><p> heightBA_m
</p>
</li>
<li><p> ba_m2 is the basal area per hectare
</p>
</li></ul>

</li></ul>



<h3>Note</h3>

<p>To report errors in the package or the data, please use the issue tracker
in the GitHub repository of ProfoundData <a href="https://github.com/COST-FP1304-PROFOUND/ProfoundData">https://github.com/COST-FP1304-PROFOUND/ProfoundData</a>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example requires that a sql DB is registered via setDB(dbfile)
# when run without a registered DB, you will get a file query (depending on OS)

## Not run: 
# Summarize by years
data &lt;-summarizeData(dataset =  "TREE", site = "bily_kriz", by = "year",
                     mode = "data")
data &lt;-summarizeData(dataset =  "CLIMATE_LOCAL", site = "bily_kriz", by = "year",
                     mode = "data")
data &lt;-summarizeData(dataset =  "CLIMATE_ISIMIP2A", site = "bily_kriz", by = "year",
                     mode = "data")

# Specify forcing dataset or condition
data &lt;-summarizeData(dataset ="CLIMATE_ISIMIP2B", site ="soro",
                     forcingDataset="GFDLESM2M", forcingCondition ="rcp2p6")


# Summarize total period
data &lt;-summarizeData(dataset =  "TREE", site = "bily_kriz", by = "total",
                     mode = "data")
data &lt;-summarizeData(dataset =  "CLIMATE_LOCAL", site = "bily_kriz", by = "total",
                     mode = "data")

# Summarize overview
data &lt;-summarizeData(dataset =  "CLIMATE_LOCAL", site = "bily_kriz", mode = "overview")
data &lt;-summarizeData(dataset =  "FLUX", site = "bily_kriz", mode = "overview")
data &lt;-summarizeData(dataset =  "TREE", site = "bily_kriz", mode = "overview")
data &lt;-summarizeData(dataset =  "STAND", site = "bily_kriz", mode = "overview")

## End(Not run)
</code></pre>

<hr>
<h2 id='writeSim2netCDF'>A function to write netCDF-files</h2><span id='topic+writeSim2netCDF'></span>

<h3>Description</h3>

<p>This function transforms simulation results into netCDF files following the ISIMIP2 protocol
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeSim2netCDF(
  df,
  comment1 = NA,
  comment2 = NA,
  institution = "PIK",
  contact = "isi-mip@pik-potsdam.de",
  modelname = "formind",
  GCM = "hadgem",
  RCP = "rcp85",
  ses = "nat",
  ss = "co2const",
  region = "Kroof",
  start = "1980",
  folder = "ISI-MIP"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeSim2netCDF_+3A_df">df</code></td>
<td>
<p>A data.frame containing in the first three columns longitude latitude
and time. These columns are followed by columns containing the output variables.
The columns have to be named with the output variable name as required by the 2B
protocol. See table 21.</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_comment1">comment1</code></td>
<td>
<p>Optional comment regarding your simulation</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_comment2">comment2</code></td>
<td>
<p>Optional comment regarding your simulation</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_institution">institution</code></td>
<td>
<p>Your institution</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_contact">contact</code></td>
<td>
<p>Your mail address</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_modelname">modelname</code></td>
<td>
<p>The name of the used forest model</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_gcm">GCM</code></td>
<td>
<p>The climate model which created the used climate time series</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_rcp">RCP</code></td>
<td>
<p>The RCP scenario</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_ses">ses</code></td>
<td>
<p>The scenario describing forest management. UMsoc equals the &quot;nat&quot;
settings and histsoc and 2005soc equal the &quot;man&quot; settings in the ISIMIP2a
protocol. Default value: &quot;nat&quot;.</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_ss">ss</code></td>
<td>
<p>&quot;co2&quot; for all experiments other than the sensitivity experiments
for which 2005co2 is explicitly written.  Note: even models in which CO2 has
no effect should use the co2 identifier relevant to the experiment.  Default
value: &quot;co2const&quot;.</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_region">region</code></td>
<td>
<p>the region or site of the simulation</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_start">start</code></td>
<td>
<p>the start year of the simulation. Default value: 1980.</p>
</td></tr>
<tr><td><code id="writeSim2netCDF_+3A_folder">folder</code></td>
<td>
<p>The folder in which all netCDF files will be written</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function transforms your simulation output data frame into several netCDF
-files and writes them into the indicated folder using the naming convention of
the ISIMIP2(B)-protocol (https://www.isimip.org/protocol/). Units and long names
of variables (table 21) will be created automatically.
</p>


<h3>Author(s)</h3>

<p>Friedrich J. Bohn
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Produce sample data 
df &lt;- data.frame(lat = rep(20, 10),
                 lon = rep(30, 10),
                 time = seq(1920, 2010, 10),
                 dbh_total = c(10:19),
                 nee_total = rnorm(10, -0.5, 0.25),
                 evap = rnorm(10, 0.001, 0.0001),
                 cwood_fasy = seq(40, 85, 5))

# Convert multi-variable data.frame into single-variable netCDFs using ISIMIP naming conventions
writeSim2netCDF(df = df,
                comment1 = NA,
                comment2 = NA,
                institution = 'PIK',
                contact = 'isi-mip@pik-potsdam.de',
                modelname = "formind",
                GCM = "hadgem",
                RCP = "rcp85",
                ses = "nat",
                ss = "co2const",
                region = "Kroof",
                start = '1920',
                folder = tempdir())
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
