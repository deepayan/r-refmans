<!DOCTYPE html><html lang="en"><head><title>Help for package hubUtils</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {hubUtils}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#as_model_out_tbl'><p>Convert model output to a <code>model_out_tbl</code> class object.</p></a></li>
<li><a href='#check_deprecated_schema'><p>Check whether a config file is using a deprecated schema</p></a></li>
<li><a href='#extract_schema_version'><p>Extract the schema version from a schema <code>id</code> or config <code>schema_version</code> property</p>
character string</a></li>
<li><a href='#get_config_tid'><p>Get the name of the output type id column based on the schema version</p></a></li>
<li><a href='#get_round_idx'><p>Utilities for accessing round ID metadata</p></a></li>
<li><a href='#get_round_model_tasks'><p>Get the model tasks for a given round</p></a></li>
<li><a href='#get_round_task_id_names'><p>Get task ID names for a given round</p></a></li>
<li><a href='#get_schema'><p>Download a schema</p></a></li>
<li><a href='#get_schema_url'><p>Get the JSON schema download URL for a given config file version</p></a></li>
<li><a href='#get_schema_valid_versions'><p>Get a vector of valid schema version</p></a></li>
<li><a href='#get_schema_version_latest'><p>Get the latest schema version</p></a></li>
<li><a href='#get_task_id_names'><p>Get hub task IDs</p></a></li>
<li><a href='#hub_con_output'><p>Example Hub model output data</p></a></li>
<li><a href='#is_v3_config'><p>Is config list representation using v3.0.0 schema?</p></a></li>
<li><a href='#is_v3_config_file'><p>Is config file using v3.0.0 schema?</p></a></li>
<li><a href='#is_v3_hub'><p>Is hub configured using v3.0.0 schema?</p></a></li>
<li><a href='#model_id_merge'><p>Merge/Split model output tbl <code>model_id</code> column</p></a></li>
<li><a href='#read_config'><p>Read a hub config file into R</p></a></li>
<li><a href='#read_config_file'><p>Read a JSON config file from a path</p></a></li>
<li><a href='#std_colnames'><p>Hubverse model output standard column names</p></a></li>
<li><a href='#validate_model_out_tbl'><p>Validate a <code>model_out_tbl</code> object.</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Version:</td>
<td>0.1.7</td>
</tr>
<tr>
<td>Title:</td>
<td>Core 'hubverse' Utilities</td>
</tr>
<tr>
<td>Description:</td>
<td>Core set of low-level utilities common across the 
  'hubverse'. Used to interact with 'hubverse' schema, Hub configuration files 
  and model outputs and designed to be primarily used internally by other 
  'hubverse' packages. See Reich et al. (2022) &lt;<a href="https://doi.org/10.2105%2FAJPH.2022.306831">doi:10.2105/AJPH.2022.306831</a>&gt; 
  for an overview of Collaborative Hubs.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/hubverse-org/hubUtils">https://github.com/hubverse-org/hubUtils</a>,
<a href="https://hubverse-org.github.io/hubUtils/">https://hubverse-org.github.io/hubUtils/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/hubverse-org/hubUtils/issues">https://github.com/hubverse-org/hubUtils/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 2.10)</td>
</tr>
<tr>
<td>Imports:</td>
<td>checkmate, cli, curl, fs, gh, glue, jsonlite, lifecycle,
magrittr, memoise, purrr, rlang, stringr, tibble, utils</td>
</tr>
<tr>
<td>Suggests:</td>
<td>arrow (&ge; 17.0.0), dplyr, knitr, rmarkdown, testthat (&ge;
3.2.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>hubverse-org/hubStyle</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.2</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-09-18 12:31:07 UTC; Anna</td>
</tr>
<tr>
<td>Author:</td>
<td>Anna Krystalli <a href="https://orcid.org/0000-0002-2378-4915"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Li Shandross [ctb],
  Nicholas G. Reich <a href="https://orcid.org/0000-0003-3503-9899"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb],
  Evan L. Ray [ctb],
  Consortium of Infectious Disease Modeling Hubs [cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Anna Krystalli &lt;annakrystalli@googlemail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-09-18 14:00:01 UTC</td>
</tr>
</table>
<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic+pipe">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_lhs">lhs</code></td>
<td>
<p>A value or the <code>magrittr</code> placeholder.</p>
</td></tr>
<tr><td><code id="+2B25+2B26gt+2B3B+2B25_+3A_rhs">rhs</code></td>
<td>
<p>A function call using the <code>magrittr</code> semantics.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The result of calling <code>rhs(lhs)</code>.
</p>

<hr>
<h2 id='as_model_out_tbl'>Convert model output to a <code>model_out_tbl</code> class object.</h2><span id='topic+as_model_out_tbl'></span>

<h3>Description</h3>

<p>Convert model output to a <code>model_out_tbl</code> class object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_model_out_tbl(
  tbl,
  model_id_col = NULL,
  output_type_col = NULL,
  output_type_id_col = NULL,
  value_col = NULL,
  sep = "-",
  trim_to_task_ids = FALSE,
  hub_con = NULL,
  task_id_cols = NULL,
  remove_empty = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_model_out_tbl_+3A_tbl">tbl</code></td>
<td>
<p>a <code>data.frame</code> or <code>tibble</code> of model output data returned from a query
to a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_model_id_col">model_id_col</code></td>
<td>
<p>character string. If a <code>model_id</code> column does not
already exist in <code>tbl</code>, the <code>tbl</code> column name containing <code>model_id</code> data.
Alternatively, if both a <code>team_abbr</code> and a <code>model_abbr</code> column exist, these will
be merged automatically to create a single <code>model_id</code> column.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_output_type_col">output_type_col</code></td>
<td>
<p>character string. If an <code>output_type</code> column does not
already exist in <code>tbl</code>, the <code>tbl</code> column name containing <code>output_type</code> data.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_output_type_id_col">output_type_id_col</code></td>
<td>
<p>character string. If an <code>output_type_id</code> column does not
already exist in <code>tbl</code>, the <code>tbl</code> column name containing <code>output_type_id</code> data.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_value_col">value_col</code></td>
<td>
<p>character string. If a <code>value</code> column does not
already exist in <code>tbl</code>, the <code>tbl</code> column name containing <code>value</code> data.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_sep">sep</code></td>
<td>
<p>character string. Character used as separator when concatenating
<code>team_abbr</code> and <code>model_abbr</code> column values into a single <code>model_id</code> string. Only
applicable if <code>model_id</code> column not present and <code>team_abbr</code> and <code>model_abbr</code> columns are.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_trim_to_task_ids">trim_to_task_ids</code></td>
<td>
<p>logical. Whether to trim <code>tbl</code> to task ID columns only. Task ID
columns can be specified by providing a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code> class object to <code>hub_con</code> or
manually through <code>task_id_cols</code>.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_hub_con">hub_con</code></td>
<td>
<p>a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code> class object. Only used if
<code>trim_to_task_ids = TRUE</code> and tasks IDs should be determined from the hub config.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_task_id_cols">task_id_cols</code></td>
<td>
<p>a character vector of column names. Only used if
<code>trim_to_task_ids = TRUE</code> to manually specify task ID columns to retain.
Overrides <code>hub_con</code> argument if provided.</p>
</td></tr>
<tr><td><code id="as_model_out_tbl_+3A_remove_empty">remove_empty</code></td>
<td>
<p>Logical. Whether to remove columns containing only <code>NA</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>model_out_tbl</code> class object.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_model_out_tbl(hub_con_output)
</code></pre>

<hr>
<h2 id='check_deprecated_schema'>Check whether a config file is using a deprecated schema</h2><span id='topic+check_deprecated_schema'></span>

<h3>Description</h3>

<p>Function compares the current schema version in a config file to a valid version,
If config file version deprecated compared to valid version, the function
issues a lifecycle warning to prompt user to upgrade.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_deprecated_schema(
  config_version,
  config,
  valid_version = "v2.0.0",
  hubutils_version = "0.0.0.9010"
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="check_deprecated_schema_+3A_config_version">config_version</code></td>
<td>
<p>Character string of the schema version.</p>
</td></tr>
<tr><td><code id="check_deprecated_schema_+3A_config">config</code></td>
<td>
<p>List representation of config file.</p>
</td></tr>
<tr><td><code id="check_deprecated_schema_+3A_valid_version">valid_version</code></td>
<td>
<p>Character string of minimum valid schema version.</p>
</td></tr>
<tr><td><code id="check_deprecated_schema_+3A_hubutils_version">hubutils_version</code></td>
<td>
<p>The version of the hubUtils package in which deprecation of
the schema version below <code>valid_version</code> is introduced.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Invisibly, <code>TRUE</code> if the schema version is deprecated, <code>FALSE</code> otherwise.
Primarily used for the side effect of issuing a lifecycle warning.
</p>

<hr>
<h2 id='extract_schema_version'>Extract the schema version from a schema <code>id</code> or config <code>schema_version</code> property
character string</h2><span id='topic+extract_schema_version'></span>

<h3>Description</h3>

<p>Extract the schema version from a schema <code>id</code> or config <code>schema_version</code> property
character string
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract_schema_version(id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract_schema_version_+3A_id">id</code></td>
<td>
<p>A schema <code>id</code> or config <code>schema_version</code> property character string.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The schema version number as a character string.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>extract_schema_version("schema_version: v1.0.0")
</code></pre>

<hr>
<h2 id='get_config_tid'>Get the name of the output type id column based on the schema version</h2><span id='topic+get_config_tid'></span>

<h3>Description</h3>

<p>Version can be provided either directly through the <code>config_version</code> argument
or extracted from a <code>config_tasks</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_config_tid(config_version, config_tasks)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_config_tid_+3A_config_version">config_version</code></td>
<td>
<p>Character string of the schema version.</p>
</td></tr>
<tr><td><code id="get_config_tid_+3A_config_tasks">config_tasks</code></td>
<td>
<p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code>
object or function <code><a href="#topic+read_config">read_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>character string of the name of the output type id column
</p>


<h3>Examples</h3>

<pre><code class='language-R'>get_config_tid("v1.0.0")
get_config_tid("v2.0.0")
</code></pre>

<hr>
<h2 id='get_round_idx'>Utilities for accessing round ID metadata</h2><span id='topic+get_round_idx'></span><span id='topic+get_round_ids'></span>

<h3>Description</h3>

<p>Utilities for accessing round ID metadata
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_round_idx(config_tasks, round_id)

get_round_ids(
  config_tasks,
  flatten = c("all", "model_task", "task_id", "none")
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_round_idx_+3A_config_tasks">config_tasks</code></td>
<td>
<p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code>
object or function <code><a href="#topic+read_config">read_config()</a></code>.</p>
</td></tr>
<tr><td><code id="get_round_idx_+3A_round_id">round_id</code></td>
<td>
<p>Character string. Round identifier. If the round is set to
<code>round_id_from_variable: true</code>, IDs are values of the task ID defined in the
round's <code>round_id</code> property of <code>config_tasks</code>.
Otherwise should match round's <code>round_id</code> value in config. Ignored if hub
contains only a single round.</p>
</td></tr>
<tr><td><code id="get_round_idx_+3A_flatten">flatten</code></td>
<td>
<p>Character. Whether and how much to flatten output.
</p>

<ul>
<li> <p><code>"all"</code>: Complete flattening.
Returns a character vector of unique round IDs across all rounds.
</p>
</li>
<li> <p><code>"model_task"</code>: Flatten model tasks.
Returns a list with an element for each round.
Each round element contains a character vector of unique round IDs
across all round model tasks.
Only applicable if <code>round_id_from_variable</code> is <code>TRUE</code>.
</p>
</li>
<li> <p><code>"task_id"</code>: Flatten task ID.
Returns a nested list with an element for each round.
Each round element contains a list with an element for each model task.
Each model task element contains a character vector of unique round IDs.
across <code>required</code> and <code>optional</code> properties.
Only applicable if <code>round_id_from_variable</code> is <code>TRUE</code>
</p>
</li>
<li> <p><code>"none"</code>: No flattening.
If <code>round_id_from_variable</code> is <code>TRUE</code>,
returns a nested list with an element for each round.
Each round element contains a nested element for each model task.
Each model task element contains a nested list of <code>required</code> and <code>optional</code>
character vectors of round IDs.
If <code>round_id_from_variable</code> is <code>FALSE</code>,a list with a round ID for each round
is returned.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>the integer index of the element in <code>config_tasks$rounds</code> that a
character round identifier maps to
</p>
<p>a list or character vector of hub round IDs
</p>

<ul>
<li><p> A character vector is returned only if <code>flatten = "all"</code>
</p>
</li>
<li><p> A list is returned otherwise (see <code>flatten</code> for more details)
</p>
</li></ul>



<h3>Functions</h3>


<ul>
<li> <p><code>get_round_idx()</code>: Get an integer index of the element in
<code>config_tasks$rounds</code> that a character round identifier maps to.
</p>
</li>
<li> <p><code>get_round_ids()</code>: Get a list or character vector of hub round IDs.
For each round, if <code>round_id_from_variable</code> is <code>TRUE</code>, round IDs returned are
the values of the task ID defined in the <code>round_id</code> property. Otherwise, if
<code>round_id_from_variable</code> is <code>FALSE</code>, the value of the <code>round_id</code> property is
returned.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>config_tasks &lt;- read_config(
  hub_path = system.file("testhubs/simple", package = "hubUtils")
)
# Get round IDs
get_round_ids(config_tasks)
get_round_ids(config_tasks, flatten = "model_task")
get_round_ids(config_tasks, flatten = "task_id")
get_round_ids(config_tasks, flatten = "none")
# Get round integer index using a round_id
get_round_idx(config_tasks, "2022-10-01")
get_round_idx(config_tasks, "2022-10-29")
</code></pre>

<hr>
<h2 id='get_round_model_tasks'>Get the model tasks for a given round</h2><span id='topic+get_round_model_tasks'></span>

<h3>Description</h3>

<p>Get the model tasks for a given round
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_round_model_tasks(config_tasks, round_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_round_model_tasks_+3A_config_tasks">config_tasks</code></td>
<td>
<p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code>
object or function <code><a href="#topic+read_config">read_config()</a></code>.</p>
</td></tr>
<tr><td><code id="get_round_model_tasks_+3A_round_id">round_id</code></td>
<td>
<p>Character string. Round identifier. If the round is set to
<code>round_id_from_variable: true</code>, IDs are values of the task ID defined in the
round's <code>round_id</code> property of <code>config_tasks</code>.
Otherwise should match round's <code>round_id</code> value in config. Ignored if hub
contains only a single round.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list representation of model tasks for a given round.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hub_path &lt;- system.file("testhubs/simple", package = "hubUtils")
config_tasks &lt;- read_config(hub_path, "tasks")
get_round_model_tasks(config_tasks, round_id = "2022-10-08")
get_round_model_tasks(config_tasks, round_id = "2022-10-15")
</code></pre>

<hr>
<h2 id='get_round_task_id_names'>Get task ID names for a given round</h2><span id='topic+get_round_task_id_names'></span>

<h3>Description</h3>

<p>Get task ID names for a given round
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_round_task_id_names(config_tasks, round_id)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_round_task_id_names_+3A_config_tasks">config_tasks</code></td>
<td>
<p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code>
object or function <code><a href="#topic+read_config">read_config()</a></code>.</p>
</td></tr>
<tr><td><code id="get_round_task_id_names_+3A_round_id">round_id</code></td>
<td>
<p>Character string. Round identifier. If the round is set to
<code>round_id_from_variable: true</code>, IDs are values of the task ID defined in the
round's <code>round_id</code> property of <code>config_tasks</code>.
Otherwise should match round's <code>round_id</code> value in config. Ignored if hub
contains only a single round.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of task ID names
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hub_path &lt;- system.file("testhubs/simple", package = "hubUtils")
config_tasks &lt;- read_config(hub_path, "tasks")
get_round_task_id_names(config_tasks, round_id = "2022-10-08")
get_round_task_id_names(config_tasks, round_id = "2022-10-15")
</code></pre>

<hr>
<h2 id='get_schema'>Download a schema</h2><span id='topic+get_schema'></span>

<h3>Description</h3>

<p>Download a schema
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_schema(schema_url)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_schema_+3A_schema_url">schema_url</code></td>
<td>
<p>The download URL for a given config schema version.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Contents of the JSON schema as a character string.
</p>


<h3>See Also</h3>

<p>Other functions supporting config file validation: 
<code><a href="#topic+get_schema_url">get_schema_url</a>()</code>,
<code><a href="#topic+get_schema_valid_versions">get_schema_valid_versions</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
schema_url &lt;- get_schema_url(config = "tasks", version = "v0.0.0.9")
get_schema(schema_url)

</code></pre>

<hr>
<h2 id='get_schema_url'>Get the JSON schema download URL for a given config file version</h2><span id='topic+get_schema_url'></span>

<h3>Description</h3>

<p>Get the JSON schema download URL for a given config file version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_schema_url(config = c("tasks", "admin", "model"), version, branch = "main")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_schema_url_+3A_config">config</code></td>
<td>
<p>Name of config file to validate. One of <code>"tasks"</code> or <code>"admin"</code>.</p>
</td></tr>
<tr><td><code id="get_schema_url_+3A_version">version</code></td>
<td>
<p>A valid version of hubverse
<a href="https://github.com/hubverse-org/schemas">schema</a>
(e.g. <code>"v0.0.1"</code>).</p>
</td></tr>
<tr><td><code id="get_schema_url_+3A_branch">branch</code></td>
<td>
<p>The branch of the hubverse
<a href="https://github.com/hubverse-org/schemas">schemas repository</a>
from which to fetch schema. Defaults to <code>"main"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The JSON schema download URL for a given config file version.
</p>


<h3>See Also</h3>

<p>Other functions supporting config file validation: 
<code><a href="#topic+get_schema">get_schema</a>()</code>,
<code><a href="#topic+get_schema_valid_versions">get_schema_valid_versions</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
get_schema_url(config = "tasks", version = "v0.0.0.9")

</code></pre>

<hr>
<h2 id='get_schema_valid_versions'>Get a vector of valid schema version</h2><span id='topic+get_schema_valid_versions'></span>

<h3>Description</h3>

<p>Get a vector of valid schema version
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_schema_valid_versions(branch = "main")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_schema_valid_versions_+3A_branch">branch</code></td>
<td>
<p>The branch of the hubverse
<a href="https://github.com/hubverse-org/schemas">schemas repository</a>
from which to fetch schema. Defaults to <code>"main"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of valid versions of hubverse
<a href="https://github.com/hubverse-org/schemas">schema</a>.
</p>


<h3>See Also</h3>

<p>Other functions supporting config file validation: 
<code><a href="#topic+get_schema">get_schema</a>()</code>,
<code><a href="#topic+get_schema_url">get_schema_url</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
get_schema_valid_versions()

</code></pre>

<hr>
<h2 id='get_schema_version_latest'>Get the latest schema version</h2><span id='topic+get_schema_version_latest'></span>

<h3>Description</h3>

<p>Get the latest schema version from the schema repository if &quot;latest&quot; requested
(default) or ignore if specific version provided.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_schema_version_latest(schema_version = "latest", branch = "main")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_schema_version_latest_+3A_schema_version">schema_version</code></td>
<td>
<p>A character vector. Either &quot;latest&quot; or a valid schema version.</p>
</td></tr>
<tr><td><code id="get_schema_version_latest_+3A_branch">branch</code></td>
<td>
<p>The branch of the hubverse
<a href="https://github.com/hubverse-org/schemas">schemas repository</a>
from which to fetch schema. Defaults to <code>"main"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a schema version string. If <code>schema_version</code> is &quot;latest&quot;, the latest schema
version from the schema repository. If specific version provided to <code>schema_version</code>, the same version is returned.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Get the latest version of the schema

get_schema_version_latest()
get_schema_version_latest(schema_version = "v1.0.0")

</code></pre>

<hr>
<h2 id='get_task_id_names'>Get hub task IDs</h2><span id='topic+get_task_id_names'></span>

<h3>Description</h3>

<p>Get hub task IDs
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_task_id_names(config_tasks)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get_task_id_names_+3A_config_tasks">config_tasks</code></td>
<td>
<p>a list version of the content's of a hub's <code>tasks.json</code>
config file, accessed through the <code>"config_tasks"</code> attribute of a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code>
object or function <code><a href="#topic+read_config">read_config()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character vector of all unique task ID names across all rounds.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>hub_path &lt;- system.file("testhubs/simple", package = "hubUtils")
config_tasks &lt;- read_config(hub_path, "tasks")
get_task_id_names(config_tasks)
</code></pre>

<hr>
<h2 id='hub_con_output'>Example Hub model output data</h2><span id='topic+hub_con_output'></span>

<h3>Description</h3>

<p>A subset of model output data accessed using <code>hubData</code> from the simple example
hub contained in the <code>hubUtils</code> package. The subset consists of <code>"quantile"</code> output
type data for <code>"US"</code> location and the most recent forecast date.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>hub_con_output
</code></pre>


<h3>Format</h3>

<p>A <code>tbl</code> with 92 rows and 8 columns:
</p>

<ul>
<li> <p><code>forecast_date</code>: Origin date of the forecast.
</p>
</li>
<li> <p><code>horizon</code>: Forecast horizon relative to the <code>forecast_date</code>.
</p>
</li>
<li> <p><code>target</code>: Target variable.
</p>
</li>
<li> <p><code>location</code>: Location of the forecast.
</p>
</li>
<li> <p><code>output_type</code>: Output type of forecast.
</p>
</li>
<li> <p><code>output_type_id</code>: Forecast output type level/identifier. In this case,
quantile level.
</p>
</li>
<li> <p><code>value</code>: Forecast value.
</p>
</li>
<li> <p><code>model_id</code>: Model identifier.
</p>
</li></ul>


<hr>
<h2 id='is_v3_config'>Is config list representation using v3.0.0 schema?</h2><span id='topic+is_v3_config'></span>

<h3>Description</h3>

<p>Is config list representation using v3.0.0 schema?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_v3_config(config)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_v3_config_+3A_config">config</code></td>
<td>
<p>List representation of the JSON config file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical, whether the config list representation is using v3.0.0 schema.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>config &lt;- read_config_file(
  system.file("config", "tasks.json", package = "hubUtils")
)
is_v3_config(config)
</code></pre>

<hr>
<h2 id='is_v3_config_file'>Is config file using v3.0.0 schema?</h2><span id='topic+is_v3_config_file'></span>

<h3>Description</h3>

<p>Is config file using v3.0.0 schema?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_v3_config_file(config_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_v3_config_file_+3A_config_path">config_path</code></td>
<td>
<p>Path to the config file.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical, whether the config file is using v3.0.0 schema.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>config_path &lt;- system.file("config", "tasks.json", package = "hubUtils")
is_v3_config_file(config_path)
</code></pre>

<hr>
<h2 id='is_v3_hub'>Is hub configured using v3.0.0 schema?</h2><span id='topic+is_v3_hub'></span>

<h3>Description</h3>

<p>Is hub configured using v3.0.0 schema?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>is_v3_hub(hub_path, config = c("tasks", "admin"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="is_v3_hub_+3A_hub_path">hub_path</code></td>
<td>
<p>Either a character string path to a local Modeling Hub directory
or an object of class <code style="white-space: pre;">&#8288;&lt;SubTreeFileSystem&gt;&#8288;</code> created using functions <code><a href="arrow.html#topic+s3_bucket">arrow::s3_bucket()</a></code>
or <code><a href="arrow.html#topic+gs_bucket">arrow::gs_bucket()</a></code> by providing a string S3 or GCS bucket name or path to a
Modeling Hub directory stored in the cloud.
For more details consult the
<a href="https://arrow.apache.org/docs/r/articles/fs.html">Using cloud storage (S3, GCS)</a>
in the <code>arrow</code> package.</p>
</td></tr>
<tr><td><code id="is_v3_hub_+3A_config">config</code></td>
<td>
<p>Name of config file to validate. One of <code>"tasks"</code> or <code>"admin"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Logical, whether the hub is configured using v3.0.0 schema.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>is_v3_hub(hub_path = system.file("testhubs", "flusight", package = "hubUtils"))
</code></pre>

<hr>
<h2 id='model_id_merge'>Merge/Split model output tbl <code>model_id</code> column</h2><span id='topic+model_id_merge'></span><span id='topic+model_id_split'></span>

<h3>Description</h3>

<p>Merge/Split model output tbl <code>model_id</code> column
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_id_merge(tbl, sep = "-")

model_id_split(tbl, sep = "-")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="model_id_merge_+3A_tbl">tbl</code></td>
<td>
<p>a <code>data.frame</code> or <code>tibble</code> of model output data returned from a query
to a <code style="white-space: pre;">&#8288;&lt;hub_connection&gt;&#8288;</code> object.</p>
</td></tr>
<tr><td><code id="model_id_merge_+3A_sep">sep</code></td>
<td>
<p>character string. Character used as separator when concatenating
<code>team_abbr</code> and <code>model_abbr</code> values into a single <code>model_id</code> string or splitting
<code>model_id</code> into component <code>team_abbr</code> and <code>model_abbr</code>. When splitting, if
multiple instances of the separator exist in a <code>model_id</code> stringing,
splitting occurs occurs on the first instance.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>tbl</code> with either <code>team_abbr</code> and <code>model_abbr</code> merged into a single <code>model_id</code>
column or <code>model_id</code> split into columns <code>team_abbr</code> and <code>model_abbr</code>.
</p>
<p>a <a href="tibble.html#topic+tibble">tibble</a> with <code>model_id</code> column split into separate
<code>team_abbr</code> and <code>model_abbr</code> columns
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>model_id_merge()</code>: merge <code>team_abbr</code> and <code>model_abbr</code> into a single
<code>model_id</code> column.
</p>
</li>
<li> <p><code>model_id_split()</code>: split <code>model_id</code> column into separate <code>team_abbr</code>
and <code>model_abbr</code> columns.
</p>
</li></ul>


<h3>Examples</h3>

<pre><code class='language-R'>tbl_split &lt;- model_id_split(hub_con_output)
tbl_split

# Merge model_id
tbl_merged &lt;- model_id_merge(tbl_split)
tbl_merged

# Split / Merge using custom separator
tbl_sep &lt;- hub_con_output
tbl_sep$model_id &lt;- gsub("-", "_", tbl_sep$model_id)
tbl_sep &lt;- model_id_split(tbl_sep, sep = "_")
tbl_sep
tbl_sep &lt;- model_id_merge(tbl_sep, sep = "_")
tbl_sep
</code></pre>

<hr>
<h2 id='read_config'>Read a hub config file into R</h2><span id='topic+read_config'></span>

<h3>Description</h3>

<p>Read a hub config file into R
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_config(hub_path, config = c("tasks", "admin", "model-metadata-schema"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_config_+3A_hub_path">hub_path</code></td>
<td>
<p>Either a character string path to a local Modeling Hub directory
or an object of class <code style="white-space: pre;">&#8288;&lt;SubTreeFileSystem&gt;&#8288;</code> created using functions <code><a href="arrow.html#topic+s3_bucket">arrow::s3_bucket()</a></code>
or <code><a href="arrow.html#topic+gs_bucket">arrow::gs_bucket()</a></code> by providing a string S3 or GCS bucket name or path to a
Modeling Hub directory stored in the cloud.
For more details consult the
<a href="https://arrow.apache.org/docs/r/articles/fs.html">Using cloud storage (S3, GCS)</a>
in the <code>arrow</code> package.</p>
</td></tr>
<tr><td><code id="read_config_+3A_config">config</code></td>
<td>
<p>Name of config file to validate. One of <code>"tasks"</code> or <code>"admin"</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The contents of the config as an R list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Read config files from local hub
hub_path &lt;- system.file("testhubs/simple", package = "hubUtils")
read_config(hub_path, "tasks")
read_config(hub_path, "admin")


# Read config file from AWS S3 bucket hub
hub_path &lt;- arrow::s3_bucket("hubverse/hubutils/testhubs/simple/")
read_config(hub_path, "admin")

</code></pre>

<hr>
<h2 id='read_config_file'>Read a JSON config file from a path</h2><span id='topic+read_config_file'></span>

<h3>Description</h3>

<p>Read a JSON config file from a path
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read_config_file(config_path)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="read_config_file_+3A_config_path">config_path</code></td>
<td>
<p>path to JSON config file</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a list representation of the JSON config file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>read_config_file(system.file("config", "tasks.json", package = "hubUtils"))
</code></pre>

<hr>
<h2 id='std_colnames'>Hubverse model output standard column names</h2><span id='topic+std_colnames'></span>

<h3>Description</h3>

<p>A named character string of standard column names used in hubverse model output data files.
The terms currently used for standard column names in the hubverse are English.
In future, however, this could be expanded to provide the basis for hub
terminology localisation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>std_colnames
</code></pre>


<h3>Format</h3>

<p>An object of class <code>character</code> of length 4.
</p>

<hr>
<h2 id='validate_model_out_tbl'>Validate a <code>model_out_tbl</code> object.</h2><span id='topic+validate_model_out_tbl'></span>

<h3>Description</h3>

<p>Validate a <code>model_out_tbl</code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_model_out_tbl(tbl)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_model_out_tbl_+3A_tbl">tbl</code></td>
<td>
<p>a <code>model_out_tbl</code> S3 class object.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>If valid, returns a <code>model_out_tbl</code> class object. Otherwise, throws an
error.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>md_out &lt;- as_model_out_tbl(hub_con_output)
validate_model_out_tbl(md_out)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
