<!DOCTYPE html><html lang="en"><head><title>Help for package DCL</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {DCL}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#DCL-package'>
<p>Claims Reserving under the Double Chain Ladder Model</p></a></li>
<li><a href='#Aggregate'><p>Switch to a higher level of aggregation</p></a></li>
<li><a href='#bdcl.estimation'><p>Parameter estimation - DCL model using the BDCL method</p></a></li>
<li><a href='#clm'><p>Classical Chain Ladder Method</p></a></li>
<li><a href='#dcl.boot'><p>Bootstrap distribution: the full cashflow</p></a></li>
<li><a href='#dcl.boot.prior'><p>Bootstrap distribution (the full cashflow) adding prior knowledge</p></a></li>
<li><a href='#dcl.estimation'><p>Parameter estimation - Double Chain Ladder model</p></a></li>
<li><a href='#dcl.predict'>
<p>Pointwise predictions (RBNS/IBNR split)</p></a></li>
<li><a href='#dcl.predict.prior'><p>Pointwise predictions (RBNS/IBNR split) adding prior knowledge</p></a></li>
<li><a href='#extract.prior'><p>Extracting information about zero-claims and severity inflation</p></a></li>
<li><a href='#get.cumulative'><p>Cumulative triangle</p></a></li>
<li><a href='#get.incremental'><p>Incremental triangle</p></a></li>
<li><a href='#idcl.estimation'><p>Parameter estimation - DCL model reproducing the incurred reserve.</p></a></li>
<li><a href='#ItriangleBDCL'>
<p>Incurred data (BDCL example)</p></a></li>
<li><a href='#NpaidPrior'><p>Number of non-zero payments (adding prior knowledge example)</p></a></li>
<li><a href='#NtriangleBDCL'>
<p>Number of reported claims (BDCL example)</p></a></li>
<li><a href='#NtriangleDCL'>
<p>Number of reported claims (DCL example)</p></a></li>
<li><a href='#NtrianglePrior'><p>Number of reported claims (adding prior knowledge example)</p></a></li>
<li><a href='#Plot.cashflow'><p>Plotting the full cashflow (bootstrap distribution)</p></a></li>
<li><a href='#Plot.clm.par'><p>Plotting the estimated chain ladder parameters</p></a></li>
<li><a href='#Plot.dcl.par'><p>Plotting the estimated parameters in the DCL model</p></a></li>
<li><a href='#Plot.triangle'><p>Plotting an incremental run-off triangle</p></a></li>
<li><a href='#validating.incurred'><p>Back-test: testing against the experience</p></a></li>
<li><a href='#XtriangleBDCL'>
<p>Paid data (BDCL example)</p></a></li>
<li><a href='#XtriangleDCL'>
<p>Paid data (DCL example)</p></a></li>
<li><a href='#XtrianglePrior'><p>Paid data (adding prior knowledge example)</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Claims Reserving under the Double Chain Ladder Model</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.2</td>
</tr>
<tr>
<td>Date:</td>
<td>2022-05-05</td>
</tr>
<tr>
<td>Depends:</td>
<td>lattice, latticeExtra</td>
</tr>
<tr>
<td>Author:</td>
<td>Maria Dolores Martinez-Miranda, Jens Perch Nielsen and Richard Verrall </td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Maria Dolores Martinez-Miranda &lt;mmiranda@ugr.es&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Statistical modelling and forecasting in claims reserving in non-life insurance under the Double Chain Ladder framework by Martinez-Miranda, Nielsen and Verrall (2012).</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a></td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2022-05-05 16:05:57 UTC; Usuario</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2022-05-05 16:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='DCL-package'>
Claims Reserving under the Double Chain Ladder Model
</h2><span id='topic+DCL-package'></span><span id='topic+DCL'></span>

<h3>Description</h3>

<p>This package provides functions for statistical modelling and forecasting in claims reserving in 
non-life insurance under the Double Chain Ladder framework by Martinez-Miranda, Nielsen and Verrall (2012).  
Using specific functions, the user will be able generate plots to visualize and gain intuition about the data (run-off triangles), 
break down classical chain ladder under the DCL model, visualize the underlying delay function and the inflation, 
introduce expert knowledge about the severity inflation, the zero-claims etc. Besides a validation exercise can be performed through a back-test on the data.  
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> DCL</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.1.0</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2013-10-24</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL-2
</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>
<p>Maintainer: Maria Dolores Martinez-Miranda &lt;mmiranda@ugr.es&gt;
</p>


<h3>References</h3>

<p>Martinez-Miranda M.D., Nielsen B, Nielsen J.P and Verrall, R. (2011) Cash flow simulation for a model of outstanding liabilities based on claim amounts and claim numbers. <em>Astin Bulletin</em>, 41/1, 107-129.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North American Actuarial Journal</em>, 17(2), 101-113.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.
</p>
<p>See more at http://www.cassknowledge.com/research/article/double-chain-ladder-cass-knowledge
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
data(XtriangleDCL)

# Classical chain ladder parameters
my.clm.par&lt;-clm(XtriangleDCL)
Plot.clm.par(my.clm.par)

# Estimation of the DCL parameters (break-down of the chain ladder parameters)
my.dcl.par&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)
Plot.dcl.par(my.dcl.par)

# DCL Predictions by diagonals (future calendar years)
# Splitting the chain ladder reserve into RBNR and IBNR claims (ignoring the tail)
preds.dcl.diag&lt;-dcl.predict(my.dcl.par,Model=0,Tail=FALSE,num.dec=0)

# Full cashflow considering the tail (only the variance process)
# Below only B=200 simulations for faster calculations in the example
boot1&lt;-dcl.boot(dcl.par=my.dcl.par,Ntriangle=NtriangleDCL,boot.type=1,B=200)
Plot.cashflow(boot1)

</code></pre>

<hr>
<h2 id='Aggregate'>Switch to a higher level of aggregation
</h2><span id='topic+Aggregate'></span>

<h3>Description</h3>

<p> From the input run-off triangle (weekly, monthly, quarterly, etc.) the function creates another triangle on a higher level of aggregation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Aggregate(triangle, freq = 4)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Aggregate_+3A_triangle">triangle</code></td>
<td>
<p>The original run-off (incremental) triangle. It should be a squared matrix (let denote by m its dimension m).
</p>
</td></tr>
<tr><td><code id="Aggregate_+3A_freq">freq</code></td>
<td>
<p>The frequency to be considered in the aggregation. The default value is 4, to be used to construct a yearly run-off triangle from a quarterly <code>triangle</code></p>
</td></tr></table>
<p>. 
</p>


<h3>Details</h3>

<p>If the input triangle does not consist of complete periods (for example a quarterly triangle with only three quarters in the last year), then the last (lower level) periods will been removed to get full aggregated periods.
</p>


<h3>Value</h3>

<p>A run-off triangle in the specified higher level of aggregation.
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.incremental">get.incremental</a></code>,<code><a href="#topic+get.cumulative">get.cumulative</a></code>,<code><a href="#topic+Plot.triangle">Plot.triangle</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## A dummy example: a run-off triangle with 5*4=20 quarters
m&lt;-20
my.square&lt;-matrix(1,m,m)
# Now my.triangle is a quarterly triangle (the upper left triangle from my.square)
my.triangle&lt;-my.square
my.triangle[row(my.square)+col(my.square)&gt;(m+1)]&lt;-NA
my.yearly.triangle&lt;-Aggregate(my.triangle)
list(original=my.triangle,yearly=my.yearly.triangle)

</code></pre>

<hr>
<h2 id='bdcl.estimation'>Parameter estimation - DCL model using the BDCL method</h2><span id='topic+bdcl.estimation'></span>

<h3>Description</h3>

<p>Estimate the parameters in the Double Chain Ladder model (delay parameters, severity mean and variance) using the Double Chain Ladder method with a Bornhuetter-Ferguson adjustment. The Bornhuetter-Ferguson tecnhique is applied to stabilise the underwriting inflation parameters using incurred data
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bdcl.estimation( Xtriangle , Ntriangle , Itriangle , adj = 1 , 
   Tables=TRUE , num.dec=4 , n.cal=NA , Fj.X=NA , Fj.N=NA , Fj.I=NA) 
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bdcl.estimation_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))</p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_itriangle">Itriangle</code></td>
<td>

<p>The incurred triangle. It should be a matrix with incurred data located in the upper triangle. It is an incremental run-off triangle with the same dimension as <code>Xtriangle</code>  (both in the same aggregation level (quarters, years,etc.)) </p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_adj">adj</code></td>
<td>
<p>Method to adjust the estimated delay parameters for the distributional model. It should be 1 (default value) or 2. See more in details below.</p>
</td></tr> 
<tr><td><code id="bdcl.estimation_+3A_tables">Tables</code></td>
<td>
<p>Logical. If TRUE (default) it is showed a table with the estimated parameters.</p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables (if Tables=TRUE).</p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="bdcl.estimation_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="bdcl.estimation_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr> 
<tr><td><code id="bdcl.estimation_+3A_fj.i">Fj.I</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Itriangle</code>. </p>
</td></tr> 
</table>


<h3>Details</h3>

<p>Two model are estimated in the double chain ladder framework as with the <code>dcl.estimation</code> function. In this case the inflation parameter (<code>inflat</code>) is estimated from the incurred triangle (see BF adjustment in the description of the BDCL method in Martinez-Miranda, Nielsen and Verrall 2013). The predicted reserve using these estimates 
is different from the incurred reserve. If you want to
reproduce exactly the incurred reserve (by splitting it into its RBNS and IBNR components) then use the function <code>idcl.estimation</code>.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>pi.delay</code></td>
<td>
<p>General delay parameters</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>Mean severity factor</p>
</td></tr>
<tr><td><code>inflat</code></td>
<td>
<p>Underwriting severity inflation (BDCL inflation)</p>
</td></tr>
<tr><td><code>inflat.DCL</code></td>
<td>
<p>Underwriting severity inflation  (DCL inflation)</p>
</td></tr>
<tr><td><code>pj</code></td>
<td>
<p>Delay probabilities (under a Multinomial assumption)</p>
</td></tr>
<tr><td><code>mu.adj</code></td>
<td>
<p>Adjusted mean factor corresponding to the <code>pj</code> parameters</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>Variance severity factor</p>
</td></tr>
<tr><td><code>phi</code></td>
<td>
<p>Overdispersion parameter used to derive the estimate <code>sigma2</code></p>
</td></tr>
<tr><td><code>Ey</code></td>
<td>
<p>Severity mean for each underwriting period</p>
</td></tr>
<tr><td><code>Vy</code></td>
<td>
<p>Severity variance for each underwriting period</p>
</td></tr>
<tr><td><code>adj</code></td>
<td>
<p>Type of adjusted used to derive the <code>pj</code> probabilities</p>
</td></tr>
<tr><td><code>alpha.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>beta.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>Nhat</code></td>
<td>
<p>The chain ladder preditions (counts triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>beta.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>Xhat</code></td>
<td>
<p>The chain ladder preditions (paid triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha.I</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Incurred triangle (Itriangle)</p>
</td></tr>
<tr><td><code>beta.I</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Incurred triangle (Itriangle)</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.incremental">get.incremental</a></code>, <code><a href="#topic+Plot.dcl.par">Plot.dcl.par</a></code>, <code><a href="#topic+dcl.predict">dcl.predict</a></code>, 
<code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>,  <code><a href="#topic+clm">clm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Reproducing the data analysis in the paper by Martinez-Miranda, Nielsen and Verrall (2013) 
data(NtriangleBDCL)
data(XtriangleBDCL)
data(ItriangleBDCL)

my.bdcl.par&lt;-bdcl.estimation(XtriangleBDCL,NtriangleBDCL,ItriangleBDCL)
# Parameters shown in Table 1
Plot.dcl.par(my.bdcl.par,type.inflat='BDCL')
# BDCL Predictions by diagonals (future calendar years)
preds.bdcl.diag&lt;-dcl.predict(my.bdcl.par,NtriangleBDCL,num.dec=0)
</code></pre>

<hr>
<h2 id='clm'>Classical Chain Ladder Method</h2><span id='topic+clm'></span>

<h3>Description</h3>

<p>Provide the classical chain ladder output consisting of the development (forward) factors and the predictions in the full square. Besides it provides the estimated parameters under the (over-dispersion) Poisson model for the double chain ladder estimation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>clm( triangle , n.cal = NA , Fj = NA )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="clm_+3A_triangle">triangle</code></td>
<td>

<p>The loss triangle. It should be a matrix with the observed counts (number of reported claims, number of payments etc.), aggregated payments or incurred data, located in the upper triangle. The lower triangle should consist of missing (NA) or zero values.</p>
</td></tr>
<tr><td><code id="clm_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="clm_+3A_fj">Fj</code></td>
<td>
<p>Optional. A vector with lentgth m-1 (m being the dimension of the triangle) with the development factors to calculate the chain ladder estimates. See more details below. </p>
</td></tr>
</table>


<h3>Details</h3>

<p>By default <code>Fj=NA</code> and then classical chain ladder with the common calculation of the development factors (or using the most recent calendars -if 0&lt;<code>n.cal</code>&lt;m is provided), is performed. By specifying a valid vector with the development factors (it should has lenght equal to m-1), the user is allowed to use his own values in the algorithm. If valid values are specified for both <code>n.cal</code> and <code>Fj</code>, the first one (<code>n.cal</code>) will be ignored and the given development factors will be used in the calculations.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>triangle.hat</code></td>
<td>
<p>A matrix with dimension m having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model (see for example Verrall (1991) for a formal definition)</p>
</td></tr>
<tr><td><code>beta</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model (Verrall 1991)</p>
</td></tr>
<tr><td><code>Fj</code></td>
<td>
<p>Development (forward) factors</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Verrall, R. (1991) Chain ladder and Maximum Likelihood. <em>Journal of the Institute of Actuaries</em> 118, 489-499.
</p>


<h3>See Also</h3>

 
<p><code><a href="#topic+get.incremental">get.incremental</a></code>, <code><a href="#topic+Plot.clm.par">Plot.clm.par</a></code>, <code><a href="#topic+Plot.triangle">Plot.triangle</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
clm.N&lt;-clm(NtriangleDCL)
# The alpha's
clm.N$alpha
# The beta's
clm.N$beta
# The development factors
clm.N$Fj
# Plotting the parameters and the dev. factors
Plot.clm.par(clm.N)
# The predictions
Nhat&lt;-clm.N$triangle.hat
Plot.triangle(Nhat,Histogram=TRUE)

## Trying variations from classical chain ladder
# Try CLM only using the more recent 2 calendars in the development
# factors calculation
clm(NtriangleDCL,n.cal=2)

# Try CLM providing a vector with given development factors
my.Fj&lt;-c(1.4,1.1,1.0,1.1,1.1,1.0,1.0,1.0,1.1)
clm(NtriangleDCL,Fj=my.Fj)

</code></pre>

<hr>
<h2 id='dcl.boot'>Bootstrap distribution: the full cashflow</h2><span id='topic+dcl.boot'></span>

<h3>Description</h3>

<p>Provide the distribution of the IBNR, RBNS and total (RBNS+IBRN) reserves by calendar years and rows using  
bootstrapping.</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcl.boot( dcl.par , sigma2 , Ntriangle , boot.type = 2 , B = 999 , 
  Tail = TRUE , summ.by = "diag" , Tables = TRUE , num.dec = 2 , n.cal = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcl.boot_+3A_dcl.par">dcl.par</code></td>
<td>
<p>A list object with the estimated parameters: the value returned by the functions <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code> or <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_sigma2">sigma2</code></td>
<td>
<p>Optional. The variance of the individual payments in the first underwriting period.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should be the same triangle used to get the value passed by the argument  <code>dcl.par</code>.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_boot.type">boot.type</code></td>
<td>
<p>Choose between values 1, to provide only the variance process, or 2 (default), to take into account the uncertainty of the parameters.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_b">B</code></td>
<td>
<p>The number of simulations in the bootstrap algorithm. The defaul value is 999.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_tail">Tail</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) the tail is provided.
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_summ.by">summ.by</code></td>
<td>
<p>A character value such as <code>"diag"</code>, <code>"row"</code> or <code>"cell"</code>. 
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is showed a table with the summary (mean, standard deviation, 1%, 5%, 50%, 95%, 99%) of the distribution of the outstanding liabilities in the future calendar periods (if <code>summ.by="diag"</code>) or by underwriting period (if <code>summ.by="row"</code>). 
</p>
</td></tr> 
<tr><td><code id="dcl.boot_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables. Used only if <code>Tables=TRUE</code>
</p>
</td></tr>
<tr><td><code id="dcl.boot_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
</table>


<h3>Details</h3>

<p>If the calculated severity variance using the function <code><a href="#topic+dcl.estimation">dcl.estimation</a></code> is not a valid estimate then it is recommended to provide directly this value through the argument <code>sigma2</code>. It can be calculated using the function <code><a href="stats.html#topic+var">var</a></code> applied to a pilot sample of individual payments observed in the first underwriting period.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>array.rbns.boot</code></td>
<td>
<p>An array with dimensions (m,2m-1,B) (m being the dimension of the input triangles in DCL). Each <code>array.rbns.boot[,,b]</code> is a matrix, with m rows and 2m-1 columns, having the bootstrapped outstanding RBNS numbers as the entries (for b=1,...,B).</p>
</td></tr>
<tr><td><code>Mat.rbns</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.rbns[b,]</code> is a vector with elements being the outstanding liabilities for RBNS claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>array.ibnr.boot</code></td>
<td>
<p>An array with dimensions (m,2m-1,B) (m being the dimension of the input triangles in DCL). Each <code>array.ibnr.boot[,,b]</code> is a matrix, with m rows and 2m-1 columns, having the bootstrapped outstanding IBNR numbers as the entries (for b=1,...,B).</p>
</td></tr>
<tr><td><code>Mat.ibnr</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.ibnr[b,]</code> is a vector with elements being the outstanding liabilities for IBNR claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Mat.total</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.total[b,]</code> is a vector with elements being the outstanding liabilities for total(=RBNS+IBNR) claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>summ.rbns</code></td>
<td>
<p>A dataframe with the summary of the RBNS distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
<tr><td><code>summ.ibnr</code></td>
<td>
<p>A dataframe with the summary of the IBNR distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
<tr><td><code>summ.total</code></td>
<td>
<p>A dataframe with the summary of the total(=RBNS+IBNR) distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>If <code>boot.type=2</code> the function will take some time to perform the calculations. It increases with the dimension of the triangles and the specified number of simulations <code>B</code>.
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Plot.cashflow">Plot.cashflow</a></code>, <code><a href="#topic+dcl.boot.prior">dcl.boot.prior</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Results described in the data application by Martinez-Miranda, Nielsen and Verrall (2012)
data(NtriangleDCL)
data(XtriangleDCL)

# Estimation of the DCL parameters
est&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)

# Full cashflow considering the tail (only the variance process)
# Below only B=200 simulations to be faster in the example
boot1&lt;-dcl.boot(dcl.par=est,Ntriangle=NtriangleDCL,boot.type=1,B=200)
Plot.cashflow(boot1)

# Full cashflow with tail and taking into account the parameters uncertainty
# and B=999 simulations. Do not run it unless you can wait about one minute
# boot2&lt;-dcl.boot(dcl.par=est,Ntriangle=NtriangleDCL,boot.type=2)
# Plot.cashflow(boot2)
</code></pre>

<hr>
<h2 id='dcl.boot.prior'>Bootstrap distribution (the full cashflow) adding prior knowledge</h2><span id='topic+dcl.boot.prior'></span>

<h3>Description</h3>

<p>Provide the distribution of the IBNR, RBNS and total (RBNS+IBRN) reserves by calendar years and rows using  
bootstrapping.</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcl.boot.prior( Xtriangle , Ntriangle , sigma2 , mu , inflat.i , inflat.j , Qi , 
    Model = 2 , adj = 1 , boot.type = 2, B = 999 ,  
    Tail = TRUE , summ.by = "diag", Tables = TRUE, num.dec = 2 , n.cal = NA ,
    Fj.X = NA , Fj.N = NA )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcl.boot.prior_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_sigma2">sigma2</code></td>
<td>
<p>Optional. The variance of the individual payments in the first underwriting period.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_mu">mu</code></td>
<td>
<p>Optional. The mean of the individual payments in the first underwriting period.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_inflat.i">inflat.i</code></td>
<td>
<p>Optional. A vector with dimension m (the dimension of the input triangles) specifying the severity inflation in the underwriting direction. 
</p>
</td></tr>  
<tr><td><code id="dcl.boot.prior_+3A_inflat.j">inflat.j</code></td>
<td>
<p>Optional. A vector with dimension m specifying the severity inflation in the development direction. If not specified it will be assumed to be 1 and then the severity mean not depending on the development period.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_qi">Qi</code></td>
<td>
<p>Optional. A vector with dimension m specifying the probability of zero-claims for each underwriting period. If not specified then it will be assumed no zero-payments.
</p>
</td></tr> 
<tr><td><code id="dcl.boot.prior_+3A_model">Model</code></td>
<td>
<p>Possible values are 0, 1 or 2 (default).  See <code><a href="#topic+dcl.estimation">dcl.estimation</a></code> for more in details.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_adj">adj</code></td>
<td>
<p>Method to adjust the estimated delay parameters for the distributional model. It should be 1 (default value) or 2. See <code><a href="#topic+dcl.estimation">dcl.estimation</a></code> for more details.</p>
</td></tr> 
<tr><td><code id="dcl.boot.prior_+3A_boot.type">boot.type</code></td>
<td>
<p>Choose between values 1, to provide only the variance process, or 2 (default), to take into account the uncertainty of the parameters.</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_b">B</code></td>
<td>
<p>The number of simulations in the bootstrap algorithm. The defaul value is 999.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_tail">Tail</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) the tail is provided.
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_summ.by">summ.by</code></td>
<td>
<p>A character value such as <code>"diag"</code>, <code>"row"</code> or <code>"cell"</code>. 
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is showed a table with the summary (mean, standard deviation, 1%, 5%, 50%, 95%, 99%) of the distribution of the outstanding liabilities in the future calendar periods (if <code>summ.by="diag"</code>) or by underwriting period (if <code>summ.by="row"</code>). 
</p>
</td></tr> 
<tr><td><code id="dcl.boot.prior_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables. Used only if <code>Tables=TRUE</code>
</p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="dcl.boot.prior_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="dcl.boot.prior_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr> 
</table>


<h3>Details</h3>

<p> If proper values are provided for the arguments <code>sigma2</code>, <code>mu</code>, <code>inflat.i</code>, <code>inflat.j</code> and <code>Qi</code> then, they will be considered fixed as prior knowledge. Otherwise, if not specified, <code>inflat.j</code> will be assumed to be a vector of ones, <code>Qi</code> a vector of zeros, and the rest will be estimated using <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>array.rbns.boot</code></td>
<td>
<p>An array with dimensions (m,2m-1,B) (m being the dimension of the input triangles in DCL). Each <code>array.rbns.boot[,,b]</code> is a matrix, with m rows and 2m-1 columns, having the bootstrapped outstanding RBNS numbers as the entries (for b=1,...,B).</p>
</td></tr>
<tr><td><code>Mat.rbns</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.rbns[b,]</code> is a vector with elements being the outstanding liabilities for RBNS claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>array.ibnr.boot</code></td>
<td>
<p>An array with dimensions (m,2m-1,B) (m being the dimension of the input triangles in DCL). Each <code>array.ibnr.boot[,,b]</code> is a matrix, with m rows and 2m-1 columns, having the bootstrapped outstanding IBNR numbers as the entries (for b=1,...,B).</p>
</td></tr>
<tr><td><code>Mat.ibnr</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.ibnr[b,]</code> is a vector with elements being the outstanding liabilities for IBNR claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Mat.total</code></td>
<td>
<p>A matrix with B rows and 2m columns. Each <code>Mat.total[b,]</code> is a vector with elements being the outstanding liabilities for total(=RBNS+IBNR) claims in the future calendar periods (sums by diagonals), and last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>summ.rbns</code></td>
<td>
<p>A dataframe with the summary of the RBNS distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
<tr><td><code>summ.ibnr</code></td>
<td>
<p>A dataframe with the summary of the IBNR distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
<tr><td><code>summ.total</code></td>
<td>
<p>A dataframe with the summary of the total(=RBNS+IBNR) distribution. Only if <code>Tables=TRUE</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>If <code>boot.type=2</code> the function will take some time to perform the calculations. It increases with the dimension of the triangles and the specified number of simulations <code>B</code>.
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Plot.cashflow">Plot.cashflow</a></code>, <code><a href="#topic+dcl.boot">dcl.boot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Data application by in Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013)
data(NtrianglePrior)
data(NpaidPrior)
data(XtrianglePrior)

## Extract information about zero-claims and severity dev. inflation
my.priors&lt;-extract.prior(XtrianglePrior,NpaidPrior,NtrianglePrior,Plots=FALSE)
my.inflat.j&lt;-my.priors$inflat.j
my.Qi&lt;-my.priors$Qi

## Bootstrap cashflow incorporating prior knowledge about
##      severity inflation and zero claims
# Only variance process
# Below only B=200 simulations for a fast example
dist.priorC.I&lt;-dcl.boot.prior(NtrianglePrior,XtrianglePrior,
  inflat.j=my.inflat.j,Qi=my.Qi,adj=2,Tail=FALSE,boot.type=1,B=200)
Plot.cashflow(dist.priorC.I)

## Try to compare with DCL with no prior knowledge: 
# Only variance process
# dist.dcl.I&lt;-dcl.boot.prior(NtrianglePrior,XtrianglePrior,adj=2,
#    Tail=FALSE,boot.type=1)
# Plot.cashflow(dist.dcl.I)
</code></pre>

<hr>
<h2 id='dcl.estimation'>Parameter estimation - Double Chain Ladder model</h2><span id='topic+dcl.estimation'></span>

<h3>Description</h3>

<p>Compute the estimated parameters in the model (delay parameters, severity underwriting inflation, severity mean and variance) using the Double Chain Ladder method. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcl.estimation( Xtriangle , Ntriangle , adj = 1 , Tables = TRUE , 
   num.dec = 4 , n.cal = NA , Fj.X=NA , Fj.N=NA )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcl.estimation_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="dcl.estimation_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))</p>
</td></tr>
<tr><td><code id="dcl.estimation_+3A_adj">adj</code></td>
<td>
<p>Method to adjust the estimated delay parameters for the distributional model. It should be 1 (default value) or 2. See more in details below.</p>
</td></tr> 
<tr><td><code id="dcl.estimation_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is showed a table with the estimated parameters.</p>
</td></tr>
<tr><td><code id="dcl.estimation_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables (if <code>Tables=TRUE</code>).</p>
</td></tr>
<tr><td><code id="dcl.estimation_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="dcl.estimation_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="dcl.estimation_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr>  
</table>


<h3>Details</h3>

<p>Two models are estimated in the double chain ladder framework (Martinez-Miranda, Nielsen and Verrall 2012). 
</p>
<p>The basic DCL model only makes assumption on the first moments  (see assumptions M1-M3 in Section 2 of the paper). From the two input triangles (<code>Ntriangle</code>,<code>Xtriangle</code>) the parameters involved in this model are estimated: <code>pi.delay</code> (delay parameters  that could be negative values and/or sum up above 1, by solving the linear system (7) in Section 3), <code>mu</code> (mean of the individual payments in the first underwriting period,  from expression (9)), <code>inflat</code> (the underwriting severity mean inflation, from expression (8)), <code>alpha.N</code> and <code>beta.N</code> (the chain ladder parameters in the (OD)Poisson model for <code>Ntriangle</code> from expressions (10)-(12)). Using the estimated parameters in this simpler model the predicted outstanding numbers (calculated from equations (14) and (15)) are exactly the classical chain ladder predictions (see Theorem 1 in pp. 67). 
</p>
<p>The second model is a distributional model (assumptions D1-D4 in Section 5) which allows to provide the full cash-flow. In this model the parameters are adjusted to match with the assumptions: <code>pj</code> are delay probabilities resulting from adjusting the general parameters <code>pi.delay</code> (defined in expressions (21)-(22)), <code>mu.adj</code> is the corresponding adjusted mean factor and <code>sigma2</code> is the variance factor (in expression (24)). The function <code>dcl.estimation</code> suggest two different adjustments of the general <code>pi.delay</code>, the user should choose the adjustment which does not modify substantially the IBNR/RBNS split in the basic model (M1-M3), see Martinez-Miranda, Nielsen, Verrall and W|thrich (2013) for a discussion.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>pi.delay</code></td>
<td>
<p>General delay parameters</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>Mean severity factor</p>
</td></tr>
<tr><td><code>inflat</code></td>
<td>
<p>Underwriting severity inflation</p>
</td></tr>
<tr><td><code>pj</code></td>
<td>
<p>Delay probabilities (under a Multinomial assumption)</p>
</td></tr>
<tr><td><code>mu.adj</code></td>
<td>
<p>Adjusted mean factor corresponding to the <code>pj</code> parameters</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>Variance severity factor</p>
</td></tr>
<tr><td><code>phi</code></td>
<td>
<p>Overdispersion parameter used to derive the estimate <code>sigma2</code></p>
</td></tr>
<tr><td><code>Ey</code></td>
<td>
<p>Severity mean for each underwriting period</p>
</td></tr>
<tr><td><code>Vy</code></td>
<td>
<p>Severity variance for each underwriting period</p>
</td></tr>
<tr><td><code>adj</code></td>
<td>
<p>Type of adjusted used to derive the <code>pj</code> probabilities</p>
</td></tr>
<tr><td><code>alpha.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>beta.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>Nhat</code></td>
<td>
<p>The chain ladder preditions (counts triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>beta.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>Xhat</code></td>
<td>
<p>The chain ladder preditions (paid triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and W|thrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Plot.dcl.par">Plot.dcl.par</a></code>, <code><a href="#topic+dcl.predict">dcl.predict</a></code>,
<code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>, <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>,  <code><a href="#topic+clm">clm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
data(XtriangleDCL)
# Estimation of the DCL parameters described in Martinez-Miranda, Nielsen and Verrall (2012)
est1&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)
Plot.dcl.par(est1)
# Compare two possible adjustmets to get distributional parameters
# est1 with adj=1
pj.1&lt;-est1$pj
pi.delay&lt;-est1$pi.delay
est2&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL,adj=2,Tables=FALSE)
pj.2&lt;-est2$pj
data.frame(pi.delay=pi.delay,pj.adj.1=pj.1,pj.adj.2=pj.2)
</code></pre>

<hr>
<h2 id='dcl.predict'>
Pointwise predictions (RBNS/IBNR split)</h2><span id='topic+dcl.predict'></span>

<h3>Description</h3>

<p>Pointwise predictions by calendar years and rows of the outstanding liabilities. The predictions are splitted between RBNS and IBNR claims.</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcl.predict( dcl.par , Ntriangle , Model = 2 , Tail = TRUE , 
  Tables = TRUE , summ.by="diag", num.dec = 2 )                     
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcl.predict_+3A_dcl.par">dcl.par</code></td>
<td>
<p>A list object with the estimated parameters: the value returned by the functions <code>dcl.estimation</code>, <code>bdcl.estimation</code> or <code>idcl.estimation</code>.
</p>
</td></tr>
<tr><td><code id="dcl.predict_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>Optional. The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as the <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.)) used to derive <code>dcl.par</code></p>
</td></tr>
<tr><td><code id="dcl.predict_+3A_model">Model</code></td>
<td>
<p>Possible values are 0, 1 or 2 (default). See more details below.
</p>
</td></tr>
<tr><td><code id="dcl.predict_+3A_tail">Tail</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) the tail is provided.
</p>
</td></tr>
<tr><td><code id="dcl.predict_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is shown a table with the predicted outstanding liabilities in the future calendar periods (<code>summ.by="diag"</code>) or by underwriting period (<code>summ.by="row"</code>). 
</p>
</td></tr>  
<tr><td><code id="dcl.predict_+3A_summ.by">summ.by</code></td>
<td>
<p>A character value such as <code>"diag"</code>, <code>"row"</code> or <code>"cell"</code>. 
</p>
</td></tr>
<tr><td><code id="dcl.predict_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables. Used only if <code>Tables=TRUE</code>
</p>
</td></tr> 
</table>


<h3>Details</h3>

<p>If <code>Model=0</code> or <code>Model=1</code> then the predictions are calculated using the DCL model parameters in assumptions M1-M3 (general delay parameters, see Martinez-Miranda, Nielsen and Verrall 2012). If <code>Model=2</code> the adjusted delay probabilities (distributional model D1-D4) are considered. By choosing <code>Model=0</code> the predictions are calculated ignoring the observed counts in <code>Ntriangle</code> (also if the <code>Ntriangle</code> is not specified). It should be specified to reproduce get the IBNR/RBNS split of classical paid chain ladder. 
</p>
<p>Choose <code>summ.by="diag"</code> to calculate the predicted outstanding liabilities in the future calendar periods (diagonal sums), <code>summ.by="row"</code> for sums by underwriting periods (row sums);  or <code>summ.by="cell"</code> to get only the the individual cell predictions.  
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>Xrbns</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding RBNS numbers as the entries.</p>
</td></tr>
<tr><td><code>Drbns</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for RBNS claims in the future calendar periods (sums by diagonals). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Rrbns</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for RBNS claims at each underwriting period (sums by rows). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Xibnr</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding IBNR numbers as the entries.</p>
</td></tr>
<tr><td><code>Dibnr</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for IBNR claims in the future calendar periods (sums by diagonals). The last value is the IBNR reserve (overall sum).</p>
</td></tr>
<tr><td><code>Ribnr</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for IBNR claims at each underwriting period (sums by rows). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Xtotal</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding total (=RBNS+IBNR) numbers as the entries.</p>
</td></tr>
<tr><td><code>Dtotal</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for  all  claims in the future calendar periods (sums by diagonals). The last value is the  total (=RBNS+IBNR) reserve (overall sum).</p>
</td></tr>
<tr><td><code>Rtotal</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for all claims at each underwriting period (sums by rows). The last value is the total (=RBNS+IBNR)  reserve (overall sum).</p>
</td></tr>  
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and W|thrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>, <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>, <code><a href="#topic+dcl.predict.prior">dcl.predict.prior</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Data application by in Martinez-Miranda, Nielsen and Verrall (2012)

data(NtriangleDCL)
data(XtriangleDCL)

# Estimation of the DCL parameters described 
est&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)

# with general delay parameters and ignoring Ntriangle to reproduce exactly chain ladder
pred1&lt;-dcl.predict(dcl.par=est,Model=1,Tail=FALSE)

# with Modeled parameters (distributional Model) and ignoring Ntriangle
pred2&lt;-dcl.predict(dcl.par=est,Model=2,Tail=FALSE)

# with Modeled parameters (distributional Model) using observed Ntriangle
pred3&lt;-dcl.predict(dcl.par=est,Ntriangle=NtriangleDCL,Model=2,Tail=FALSE)

# providing the Tail, with Modeled parameters (distributional Model)
pred4&lt;-dcl.predict(dcl.par=est,Ntriangle=NtriangleDCL,Model=2,Tail=TRUE)

</code></pre>

<hr>
<h2 id='dcl.predict.prior'>Pointwise predictions (RBNS/IBNR split) adding prior knowledge</h2><span id='topic+dcl.predict.prior'></span>

<h3>Description</h3>

<p>Pointwise predictions by calendar years and rows of the outstanding liabilities. The predictions are splitted between RBNS and IBNR claims.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>dcl.predict.prior( Ntriangle , Xtriangle , inflat.i , inflat.j , Qi , 
  Model = 2, adj = 2, Tail = FALSE, Tables = TRUE, 
  summ.by = "diag", num.dec = 2 )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="dcl.predict.prior_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>Optional. The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as the <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.)) used to derive <code>dcl.par</code>
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_inflat.i">inflat.i</code></td>
<td>
<p>Optional. A vector with dimension m (the dimension of the input triangles) specifying the severity inflation in the underwriting direction. If not specified it will be estimated using <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_inflat.j">inflat.j</code></td>
<td>
<p>Optional. A vector with dimension m specifying the severity inflation in the development direction. If not specified it will be assumed to be 1 and then the severity mean not depending on the development period.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_qi">Qi</code></td>
<td>
<p>Optional. A vector with dimension m specifying the probability of zero-claims for each underwriting period. If not specified then it will be assumed no zero-payments.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_model">Model</code></td>
<td>
<p>Possible values are 0, 1 or 2 (default).  See <code><a href="#topic+dcl.estimation">dcl.estimation</a></code> for more in details.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_adj">adj</code></td>
<td>
<p>Method to adjust the estimated delay parameters for the distributional model. It should be 1 (default value) or 2. See <code><a href="#topic+dcl.estimation">dcl.estimation</a></code> for more in details.
</p>
</td></tr> 
<tr><td><code id="dcl.predict.prior_+3A_tail">Tail</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) the tail is provided.
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is showed a table with the predicted outstanding liabilities in the future calendar periods (<code>summ.by="diag"</code>) or by underwriting period (<code>summ.by="row"</code>). 
</p>
</td></tr>  
<tr><td><code id="dcl.predict.prior_+3A_summ.by">summ.by</code></td>
<td>
<p>A character value such as <code>"diag"</code>, <code>"row"</code> or <code>"cell"</code>. 
</p>
</td></tr>
<tr><td><code id="dcl.predict.prior_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables. Used only if <code>Tables=TRUE</code>
</p>
</td></tr> 
</table>


<h3>Details</h3>

<p>The predictions are calculated under the first moment assumptions in the DCL model (see M1-M3) in Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012). In this case the severity mean is specified as 
</p>
<p><code> inflat.i * (1-Qi) * inflat.j * mu</code> 
</p>
<p>where <code>inflat.i</code>, <code>Qi</code>, <code>inflat.j</code> and <code>mu</code> are prior information specified by the user. With this specification, the prediction formula consists of the expectation (conditional expectation -if <code>Ntriangle</code> is given and <code>Model=0</code>) of the future (RBNS/IBNR) aggregated payments. See formulas (8)-(9) in the paper.
</p>
<p>If the prior information is not  provided the function will return the DCL predictions as <code><a href="#topic+dcl.predict">dcl.predict</a></code>. The information about <code>Qi</code>, <code>inflat.j</code> can be extracted through DCL using <code><a href="#topic+extract.prior">extract.prior</a></code>.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>Xrbns</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding RBNS numbers as the entries.</p>
</td></tr>
<tr><td><code>Drbns</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for RBNS claims in the future calendar periods (sums by diagonals). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Rrbns</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for RBNS claims at each underwriting period (sums by rows). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Xibnr</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding IBNR numbers as the entries.</p>
</td></tr>
<tr><td><code>Dibnr</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for IBNR claims in the future calendar periods (sums by diagonals). The last value is the IBNR reserve (overall sum).</p>
</td></tr>
<tr><td><code>Ribnr</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for IBNR claims at each underwriting period (sums by rows). The last value is the RBNS reserve (overall sum).</p>
</td></tr>
<tr><td><code>Xtotal</code></td>
<td>
<p>A matrix with dimension m by 2m-1 (m being the dimension of the input triangles in DCL) having the outstanding total (=RBNS+IBNR) numbers as the entries.</p>
</td></tr>
<tr><td><code>Dtotal</code></td>
<td>
<p>A vector with dimension 2m-1 with elements being the outstanding liabilities for  all  claims in the future calendar periods (sums by diagonals). The last value is the  total (=RBNS+IBNR) reserve (overall sum).</p>
</td></tr>
<tr><td><code>Rtotal</code></td>
<td>
<p>A vector with dimension m with elements being the outstanding liabilities for all claims at each underwriting period (sums by rows). The last value is the total (=RBNS+IBNR)  reserve (overall sum).</p>
</td></tr>  
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>, <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>, <code><a href="#topic+dcl.predict">dcl.predict</a></code>,<code><a href="#topic+extract.prior">extract.prior</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Data application by in Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013)
data(NtrianglePrior)
data(NpaidPrior)
data(XtrianglePrior)

Ntriangle&lt;-NtrianglePrior
Xtriangle&lt;-XtrianglePrior
Npaid&lt;-NpaidPrior

## Extract information about zero-claims and severity dev. inflation
my.priors&lt;-extract.prior(Xtriangle,Npaid,Ntriangle)
my.inflat.j&lt;-my.priors$inflat.j
my.Qi&lt;-my.priors$Qi

# Reproducing the poinwise predicions (tables 3,4,5) in the paper
# Note: in the paper we did not use Ntriangle in the predictions 
# when modelling the predictions are slightly different

## Prior A: only using development year inflation
m&lt;-nrow(Ntriangle)
preds.prior.A.gen&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=my.inflat.j,Qi=rep(0,m),Model=0,adj=1,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)

preds.prior.A.mod&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=my.inflat.j,Qi=rep(0,m),Model=2,adj=2,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)

## Prior B: only using zero claims inflation
preds.prior.B.gen&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=rep(1,m),Qi=my.Qi,Model=0,adj=1,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)

preds.prior.B.mod&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=rep(1,m),Qi=my.Qi,Model=2,adj=2,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)

## Prior C: only using development inflation and zero claims inflation
preds.prior.C.gen&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=my.inflat.j,Qi=my.Qi,Model=0,adj=1,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)

preds.prior.C.mod&lt;-dcl.predict.prior(Ntriangle,Xtriangle,
          inflat.j=my.inflat.j,Qi=my.Qi,Model=2,adj=2,
          Tail=FALSE,Tables=TRUE,summ.by="diag",num.dec=2)
</code></pre>

<hr>
<h2 id='extract.prior'>Extracting information about zero-claims and severity inflation
</h2><span id='topic+extract.prior'></span>

<h3>Description</h3>

<p>A way of extracting information about zero-claims and severity development inflation through the DCL method applied to two counts triangles: number of payments and number of reported claims. 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>extract.prior(Xtriangle, Npaid, Ntriangle, Plots = TRUE , n.cal = NA ,
  Fj.X = NA , Fj.N = NA , Fj.Npaid = NA )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="extract.prior_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.
</p>
</td></tr>
<tr><td><code id="extract.prior_+3A_npaid">Npaid</code></td>
<td>

<p>A run-off (incremental) triangle with the number of payments. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))
</p>
</td></tr>
<tr><td><code id="extract.prior_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))
</p>
</td></tr>
<tr><td><code id="extract.prior_+3A_plots">Plots</code></td>
<td>
<p>Logical. If TRUE (default) it is showed a two by one plot showing the extracted severity inflation in the development direction and the probability of zero-claims for each underwriting period.
</p>
</td></tr>
<tr><td><code id="extract.prior_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="extract.prior_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="extract.prior_+3A_fj.npaid">Fj.Npaid</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Npaid</code>. </p>
</td></tr> 
<tr><td><code id="extract.prior_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr>   
</table>


<h3>Details</h3>

<p>The function implements the strategy proposed in the paper by Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013) to extract information for additional triangles (see &quot;Section 5: An example showing how other data can be used to provide prior information in practice&quot;). The derived severity inflation <code>inflat.j</code> does not extend to the tail. If you want provide the tail, by using <code><a href="#topic+dcl.predict.prior">dcl.predict.prior</a></code>, the vector  should be extended to have dimension 2m-1, otherwise the tail will be not provided (as was done in the cited paper).
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>inflat.j</code></td>
<td>
<p>A vector with dimension m with the extracted severity inflation in the development direction.</p>
</td></tr>
<tr><td><code>Qi</code></td>
<td>
<p>A vector with dimension m with the extracted probability of zero-claims for undewriting period.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.predict.prior">dcl.predict.prior</a></code>, <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Data application in Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013)
data(NtrianglePrior)
data(NpaidPrior)
data(XtrianglePrior)

extract.prior(XtrianglePrior,NpaidPrior,NtrianglePrior)

</code></pre>

<hr>
<h2 id='get.cumulative'>Cumulative triangle
</h2><span id='topic+get.cumulative'></span>

<h3>Description</h3>

<p>Switch from an incremental to a cumulative triangle
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.cumulative( triangle )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.cumulative_+3A_triangle">triangle</code></td>
<td>

<p>An incremental run-off triangle
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The cumulative triangle
</p>


<h3>Note</h3>

<p>The methods in this the DCL package works normally on incremental triangles 
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.incremental">get.incremental</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
get.cumulative(NtriangleDCL)
</code></pre>

<hr>
<h2 id='get.incremental'>Incremental triangle
</h2><span id='topic+get.incremental'></span>

<h3>Description</h3>

<p>Switch from an cumulative to an incremental triangle
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get.incremental( triangle )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="get.incremental_+3A_triangle">triangle</code></td>
<td>

<p>A cumulative run-off triangle
</p>
</td></tr>
</table>


<h3>Value</h3>

<p>The incremental triangle
</p>


<h3>Note</h3>

<p>The methods in this the DCL package works normally on incremental triangles 
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.cumulative">get.cumulative</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
Ntriangle.cum&lt;-get.cumulative(NtriangleDCL)
get.incremental(Ntriangle.cum)
</code></pre>

<hr>
<h2 id='idcl.estimation'>Parameter estimation - DCL model reproducing the incurred reserve.</h2><span id='topic+idcl.estimation'></span>

<h3>Description</h3>

<p>Estimate the parameters in the Double Chain Ladder model model: delay parameters, severity mean and variance. The inflation parameter is corrected using the incurred data to provide the incurred cashflow.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>idcl.estimation( Xtriangle , Ntriangle , Itriangle , adj = 1 , 
    Tables = TRUE , num.dec = 4 , n.cal = NA , 
    Fj.X = NA , Fj.N = NA , Fj.I = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="idcl.estimation_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="idcl.estimation_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))</p>
</td></tr>
<tr><td><code id="idcl.estimation_+3A_itriangle">Itriangle</code></td>
<td>

<p>The incurred triangle. It should be a matrix with incurred data located in the upper triangle. It is an incremental run-off triangle with the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.)) </p>
</td></tr>
<tr><td><code id="idcl.estimation_+3A_adj">adj</code></td>
<td>
<p>Method to adjust the estimated delay parameters for the distributional model. It should be 1 (default value) or 2. See more in details below.</p>
</td></tr> 
<tr><td><code id="idcl.estimation_+3A_tables">Tables</code></td>
<td>
<p>Logical. If TRUE (default) it is showed a table with the estimated parameters.</p>
</td></tr>
<tr><td><code id="idcl.estimation_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables (if Tables=TRUE).</p>
</td></tr> 
<tr><td><code id="idcl.estimation_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="idcl.estimation_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="idcl.estimation_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr> 
<tr><td><code id="idcl.estimation_+3A_fj.i">Fj.I</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Itriangle</code>. </p>
</td></tr> 
</table>


<h3>Details</h3>

<p>Two model are estimated in the double chain ladder framework as with the <code>dcl.estimation</code> function. In this case the DCL inflation parameter estimated by <code>dcl.estimation</code> from <code>Ntriangle</code> and <code>Xtriangle</code> is adjusted so that the derived predicted reserve is equal to the incurred reserve. Use this estimation method if you want the RBNS/IBNR  split the incurred reserve and the incurred full cashflow.
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>pi.delay</code></td>
<td>
<p>General delay parameters</p>
</td></tr>
<tr><td><code>mu</code></td>
<td>
<p>Mean severity factor</p>
</td></tr>
<tr><td><code>inflat</code></td>
<td>
<p>Underwriting severity inflation (BDCL inflation)</p>
</td></tr>
<tr><td><code>inflat.DCL</code></td>
<td>
<p>Underwriting severity inflation  (DCL inflation)</p>
</td></tr>
<tr><td><code>pj</code></td>
<td>
<p>Delay probabilities (under a Multinomial assumption)</p>
</td></tr>
<tr><td><code>mu.adj</code></td>
<td>
<p>Adjusted mean factor corresponding to the <code>pj</code> parameters</p>
</td></tr>
<tr><td><code>sigma2</code></td>
<td>
<p>Variance severity factor</p>
</td></tr>
<tr><td><code>phi</code></td>
<td>
<p>Overdispersion parameter used to derive the estimate <code>sigma2</code></p>
</td></tr>
<tr><td><code>Ey</code></td>
<td>
<p>Severity mean for each underwriting period</p>
</td></tr>
<tr><td><code>Vy</code></td>
<td>
<p>Severity variance for each underwriting period</p>
</td></tr>
<tr><td><code>adj</code></td>
<td>
<p>Type of adjusted used to derive the <code>pj</code> probabilities</p>
</td></tr>
<tr><td><code>alpha.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>beta.N</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Counts triangle (Ntriangle)</p>
</td></tr>
<tr><td><code>Nhat</code></td>
<td>
<p>The chain ladder preditions (counts triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>beta.X</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Paid triangle (Xtriangle)</p>
</td></tr>
<tr><td><code>Xhat</code></td>
<td>
<p>The chain ladder preditions (paid triangle). It is a matrix having the chain ladder predictions in the future (lower triangle) and the fitted values in the past (upper triangle).</p>
</td></tr>
<tr><td><code>alpha.I</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Incurred triangle (Itriangle)</p>
</td></tr>
<tr><td><code>beta.I</code></td>
<td>
<p>Underwriting chain ladder parameter in the (OD)-Poisson model. Incurred triangle (Itriangle)</p>
</td></tr>
<tr><td><code>CL.I.i</code></td>
<td>
<p>Outstanding incurred numbers (row sums of the lower predicted triangle) from classical chain ladder on the incurred triangle.</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>, 17(2), 101-113.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+Plot.dcl.par">Plot.dcl.par</a></code>, <code><a href="#topic+dcl.predict">dcl.predict</a></code>,
<code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleBDCL)
data(XtriangleBDCL)
data(ItriangleBDCL)

my.idcl.par&lt;-idcl.estimation(XtriangleBDCL,NtriangleBDCL,ItriangleBDCL)
# Parameters 
Plot.dcl.par(my.idcl.par,type.inflat='IDCL')
# IDCL Predictions by diagonals (future calendar years)
preds.idcl.diag&lt;-dcl.predict(my.idcl.par,NtriangleBDCL,num.dec=0)

# Comparing with the BDCL method  
my.bdcl.par&lt;-bdcl.estimation(XtriangleBDCL,NtriangleBDCL,ItriangleBDCL)
# Parameters shown in Table 1
Plot.dcl.par(my.bdcl.par,type.inflat='BDCL')
# BDCL Predictions by diagonals (future calendar years)
preds.bdcl.diag&lt;-dcl.predict(my.bdcl.par,NtriangleBDCL,num.dec=0)

</code></pre>

<hr>
<h2 id='ItriangleBDCL'>
Incurred data (BDCL example)
</h2><span id='topic+ItriangleBDCL'></span>

<h3>Description</h3>

<p>Real motor data from a major insurer. 
It is a yearly run-off (incremental) triangle consisting of the incurred data during 19 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen and Verrall (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(ItriangleBDCL)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 19 by 19: 19 undewriting years and 19 development years.
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Fergusson. <em>North American Actuarial Journal</em>, 17(2), 101-113.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(ItriangleBDCL)
data(XtriangleBDCL)
m&lt;-nrow(XtriangleBDCL)

clm.I&lt;-clm(ItriangleBDCL)
alpha.I&lt;-clm.I$alpha
# The total paid for each accident year in the past
Ri.X&lt;-rowSums(XtriangleBDCL,na.rm=TRUE)
# Incurred outstanding numbers
Ri.CL.incurred&lt;-alpha.I-Ri.X
Total.CL.incurred&lt;- sum(Ri.CL.incurred,na.rm=TRUE)

## Compare with CL on paid data
clm.X&lt;-clm(XtriangleBDCL)
Xhat&lt;-as.matrix(clm.X$triangle.hat)
Ri.CL.paid&lt;-rowSums(Xhat)-rowSums(XtriangleBDCL,na.rm=TRUE)
Total.CL.paid&lt;- sum(Ri.CL.paid,na.rm=TRUE)

# the predictions by rows
data.frame(underw.year=c(1:m,"Total"),CLM.paid=c(Ri.CL.paid,Total.CL.paid),
           CLM.incurred=round(c(Ri.CL.incurred,Total.CL.incurred),4))

# now the predictions by diagonals
inflat.factor&lt;-Ri.CL.incurred/Ri.CL.paid
inflat.factor[Ri.CL.paid==0]&lt;-1
# the lower triangle from incurred chain ladder is defined as:
Ihat&lt;-Xhat
for (i in 1:m) Ihat[i,]&lt;-Xhat[i,]*inflat.factor[i]
# now the sums by diagonals
Diag.CL.paid&lt;-sapply(split(Xhat, row(Xhat)+col(Xhat)), sum, na.rm=TRUE)
Dclm.paid&lt;-c(Diag.CL.paid[-(1:m)])
Total.CL.paid&lt;- sum(Dclm.paid,na.rm=TRUE)
Dclm.paid&lt;-c(Dclm.paid,Total.CL.paid)

Diag.CL.inc&lt;-sapply(split(Ihat, row(Ihat)+col(Ihat)), sum, na.rm=TRUE)
Dclm.inc&lt;-c(Diag.CL.inc[-(1:m)])
Total.CL.inc&lt;- sum(Dclm.inc,na.rm=TRUE)
Dclm.inc&lt;-c(Dclm.inc,Total.CL.inc)

# A table with the chain ladder predictions (paid and incurred data)
data.frame(Future.years=c(1:(m-1),'Tot.'),
    clm.paid=round(Dclm.paid),clm.incurred=round(Dclm.inc))
</code></pre>

<hr>
<h2 id='NpaidPrior'>Number of non-zero payments (adding prior knowledge example)
</h2><span id='topic+NpaidPrior'></span>

<h3>Description</h3>

<p>It is a yearly run-off (incremental) triangle consisting of the number of non-zero payments during 14 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(NpaidPrior)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 14 by 14: 14 undewriting years and 14 development years.
</p>


<h3>Source</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NpaidPrior)
Plot.triangle(NpaidPrior)

</code></pre>

<hr>
<h2 id='NtriangleBDCL'>
Number of reported claims (BDCL example)
</h2><span id='topic+NtriangleBDCL'></span>

<h3>Description</h3>

<p>Real motor data from a major insurer. 
It is a yearly run-off (incremental) triangle consisting of the number of reported claims during 19 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen and Verrall (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(NtriangleBDCL)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 19 by 19: 19 undewriting years and 19 development years.
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Fergusson. <em>North American Actuarial Journal</em>, 17(2), 101-113.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleBDCL)

Plot.triangle(NtriangleBDCL, Histogram=TRUE)
Plot.triangle(NtriangleBDCL)

# Classical chain ladder method
clm(NtriangleBDCL)
</code></pre>

<hr>
<h2 id='NtriangleDCL'>
Number of reported claims (DCL example)
</h2><span id='topic+NtriangleDCL'></span>

<h3>Description</h3>

<p>Real motor data from a major insurer. 
It is a yearly run-off (incremental) triangle consisting of the number of reported claims during 10 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen and Verrall (2012).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(NtriangleDCL)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 10 by 10: 10 undewriting years and 10 development years.
</p>


<h3>Source</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)

Plot.triangle(NtriangleDCL, Histogram=TRUE)
Plot.triangle(NtriangleDCL)

# Classical chain ladder method
clm(NtriangleDCL)
</code></pre>

<hr>
<h2 id='NtrianglePrior'>Number of reported claims (adding prior knowledge example)
</h2><span id='topic+NtrianglePrior'></span>

<h3>Description</h3>

<p>It is a yearly run-off (incremental) triangle consisting of the number of reported claims during 14 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(NtrianglePrior)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 14 by 14: 14 undewriting years and 14 development years.
</p>


<h3>Source</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>.
In press.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtrianglePrior)

Plot.triangle(NtrianglePrior, Histogram=TRUE)
Plot.triangle(NtrianglePrior)

# Classical chain ladder method
clm(NtrianglePrior)
</code></pre>

<hr>
<h2 id='Plot.cashflow'>Plotting the full cashflow (bootstrap distribution)
</h2><span id='topic+Plot.cashflow'></span>

<h3>Description</h3>

<p>Provide histograms and boxplots of the RBNS, IBNR and total(=RBNS+IBNR) cashflows. The boxplots corresponds to the distribution of the outstanding liabities in the future calendar periods. The histograms show the distribution of the reserve (overall total).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Plot.cashflow( cashflow )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Plot.cashflow_+3A_cashflow">cashflow</code></td>
<td>
<p>A list object returned by the function <code><a href="#topic+dcl.boot">dcl.boot</a></code> or <code><a href="#topic+dcl.boot.prior">dcl.boot.prior</a></code>.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The cashflow should be derived by specifying the parameter <code>summ.by="diag"</code> in the function <code><a href="#topic+dcl.boot">dcl.boot</a></code> or <code><a href="#topic+dcl.boot.prior">dcl.boot.prior</a></code>.
</p>


<h3>Value</h3>

<p> No returned value.</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>, 17(2), 101-113.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>. In press.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.boot">dcl.boot</a></code>, <code><a href="#topic+dcl.boot.prior">dcl.boot.prior</a></code>, <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Results described in the data application by Martinez-Miranda, Nielsen and Verrall (2012)
data(NtriangleDCL)
data(XtriangleDCL)

# Estimation of the DCL parameters
est&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)
# Full cashflow considering the tail (only variance process)
# Below only B=200 simulations for a fast example
boot1&lt;-dcl.boot(dcl.par=est,Ntriangle=NtriangleDCL,boot.type=1,B=200)
Plot.cashflow(boot1)
</code></pre>

<hr>
<h2 id='Plot.clm.par'>Plotting the estimated chain ladder parameters
</h2><span id='topic+Plot.clm.par'></span>

<h3>Description</h3>

<p>Show a plot with the estimates of the chain ladder parameters and the development factors 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Plot.clm.par( clm.par )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Plot.clm.par_+3A_clm.par">clm.par</code></td>
<td>
<p>A list object with the estimated chain ladder parameters: the value returned by the functions <code>clm</code>.
</p>
</td></tr>
</table>


<h3>Value</h3>

<p> No returned value
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+clm">clm</a></code>, <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+Plot.triangle">Plot.triangle</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
my.clm.par&lt;-clm(NtriangleDCL)

Plot.clm.par(my.clm.par)
</code></pre>

<hr>
<h2 id='Plot.dcl.par'>Plotting the estimated parameters in the DCL model
</h2><span id='topic+Plot.dcl.par'></span>

<h3>Description</h3>

<p>Show a two by two plot with the estimated parameters in the Double Chain Ladder model 
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Plot.dcl.par( dcl.par , type.inflat = 'DCL' )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Plot.dcl.par_+3A_dcl.par">dcl.par</code></td>
<td>
<p>A list object with the estimated parameters: the value returned by the functions <code>dcl.estimation</code>, <code>bdcl.estimation</code> or <code>idcl.estimation</code>.
</p>
</td></tr>
<tr><td><code id="Plot.dcl.par_+3A_type.inflat">type.inflat</code></td>
<td>
<p>Method used to estimate the inflation . Possible values are: 'DCL' (default) if it was used <code>dcl.estimation</code>, 'BDCL' if  <code>bdcl.estimation</code>, and
'IDCL' if <code>idcl.estimation</code> </p>
</td></tr>
</table>


<h3>Value</h3>

<p> No returned value
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>, 17(2), 101-113.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>, <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleDCL)
data(XtriangleDCL)

# Estimation of the DCL parameters described in Martinez-Miranda, Nielsen and Verrall (2012)
my.dcl.par&lt;-dcl.estimation(XtriangleDCL,NtriangleDCL)
Plot.dcl.par(my.dcl.par)
</code></pre>

<hr>
<h2 id='Plot.triangle'>Plotting an incremental run-off triangle
</h2><span id='topic+Plot.triangle'></span>

<h3>Description</h3>

<p>Graphical representaion of an incremental run-off triangle.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>Plot.triangle( triangle , Histogram = FALSE , tit='' )
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="Plot.triangle_+3A_triangle">triangle</code></td>
<td>

<p>The loss incremental triangle. It should be a matrix with the observed counts (number of reported claims, number of payments etc.), payments or incurred data, located in the upper triangle. The lower triangle consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="Plot.triangle_+3A_histogram">Histogram</code></td>
<td>
<p>Logical. If TRUE then a histogram representing the triangle is shown. If FALSE (default) then a classical representation of the triangle is shown, this is, a matplot of the row sums from both incremental and cummulative triangle. </p>
</td></tr>
<tr><td><code id="Plot.triangle_+3A_tit">tit</code></td>
<td>
<p>Character. Title to be added to the plot</p>
</td></tr>
</table>


<h3>Details</h3>

<p> A histogram representation of the histogram is consistent with the run-off triangles of counts such as the number of reported claims, number of payments, etc. See Martinez-Miranda, Nielsen, Sperlich and Verrall (2013) for a further explanation.
</p>


<h3>Value</h3>

<p>No returned value</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>
<p>Martinez-Miranda M.D., Nielsen, J.P., Sperlich, S., Verrall, R. (2013). Continuous Chain Ladder: Reformulating and generalizing a classical insurance problem. Experts Systems with Applications, 40(14), 5588-5603.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+get.incremental">get.incremental</a></code>, <code><a href="#topic+clm">clm</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Plotting a counts triangle (number of reported claims)
data(NtriangleDCL)
Plot.triangle(NtriangleDCL, Histogram=TRUE,tit=expression(paste('Counts: ',N[ij])))
# Classical CL predictions
clm.N&lt;-clm(NtriangleDCL)
Nhat&lt;-clm.N$triangle.hat
# Compare the original histogram with the CL projections
Plot.triangle(Nhat, Histogram=TRUE,tit='CL Predictions')

## Plotting a paid triangle (number of reported claims)
data(XtriangleDCL)
Plot.triangle(XtriangleDCL)
</code></pre>

<hr>
<h2 id='validating.incurred'>Back-test: testing against the experience
</h2><span id='topic+validating.incurred'></span>

<h3>Description</h3>

<p>A back-test to validate incurred reserve (IDCL) against paid reserve (DCL) or the paid with a Bornhuetter-Fergusson adjustment (BDCL). The validation strategy consists of: (1) Cut ncut=1,2,. diagonals from the observed paid triangle. (2) Apply the three methods (DCL, BDCL and IDCL), and (3) compare forecasts and actual values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validating.incurred( ncut = 0 , Xtriangle , Ntriangle , Itriangle , 
  Model = 0 , Plot.box = TRUE , Tables = TRUE , num.dec = 4 , 
  n.cal = NA , Fj.X = NA , Fj.N = NA , Fj.I = NA)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validating.incurred_+3A_ncut">ncut</code></td>
<td>
<p>The number of last periods (diagonals) to cut from the paid triangle. The default value is 0 (see details below).
</p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_xtriangle">Xtriangle</code></td>
<td>

<p>The paid run-off triangle: incremental aggregated payments. It should be a matrix with incremental aggregated  payments located in the upper triangle and the lower triangle  consisting in missing or zero values.</p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_ntriangle">Ntriangle</code></td>
<td>

<p>The counts data triangle: incremental number of reported claims. It should be a matrix with the observed counts located in the upper triangle and the lower triangle  consisting in missing or zero values. It should has the same dimension as <code>Xtriangle</code> (both in the same aggregation level (quarters, years,etc.))</p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_itriangle">Itriangle</code></td>
<td>

<p>The incurred triangle. It should be a matrix with incurred data located in the upper triangle. It is an incremental run-off triangle with the same dimension as <code>Xtriangle</code>  (both in the same aggregation level (quarters, years,etc.)) </p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_model">Model</code></td>
<td>
<p>Possible values are 0, 1 or 2 (default). See more details below.
</p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_plot.box">Plot.box</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is shown a boxplot of the errors in the cells predictions. 
</p>
</td></tr> 
<tr><td><code id="validating.incurred_+3A_tables">Tables</code></td>
<td>
<p>Logical. If <code>TRUE</code> (default) it is shown a table with the errors in the cells, diagonals and overall total predicion. 
</p>
</td></tr> 
<tr><td><code id="validating.incurred_+3A_num.dec">num.dec</code></td>
<td>
<p>Number of decimal places used to report numbers in the tables. Used only if <code>Tables=TRUE</code>.
</p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_n.cal">n.cal</code></td>
<td>
<p>Integer specifying the number of most recent calendars which will be used to calculate the development factors. By default <code>n.cal=NA</code> and all the observed calendars    are used (classical chain ladder). </p>
</td></tr>
<tr><td><code id="validating.incurred_+3A_fj.x">Fj.X</code></td>
<td>
<p>Optional vector with lentgth m-1 (m being the dimension of the triangles) with the development factors to calculate the chain ladder estimates from <code>Xtriangle</code>. See more details in <code><a href="#topic+clm">clm</a></code>.</p>
</td></tr> 
<tr><td><code id="validating.incurred_+3A_fj.n">Fj.N</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Ntriangle</code>. </p>
</td></tr> 
<tr><td><code id="validating.incurred_+3A_fj.i">Fj.I</code></td>
<td>
<p>Optional vector with lentgth m-1 with the development factors to calculate the chain ladder estimates from <code>Itriangle</code>. </p>
</td></tr> 
</table>


<h3>Details</h3>

<p>If <code>ncut=0</code> the test is not computed but a plot showing the difference among the three methods is shown. It is recommended to start with this step to have some insight about the problem. Note that the first part in the IDCL inflation is usually very volatile since no many outstanding liabitities arise from the first underwriting periods. 
</p>
<p>The predicion errors provided through the value <code>pe.vector</code> are calculated as follow:
</p>
<p>For individual cells: <code>pe.cells =  sum(ce.dif^2) / sum(ce.obs^2) </code>
</p>
<p>with <code>ce.dif</code> being the vector with the differences between the predicted cells and the actual cells (<code>ce.obs</code>).
</p>
<p>For diagonals: <code>pe.diags =  sum(ca.dif^2) / sum(ca.obs^2) </code>
</p>
<p>with <code>ca.dif</code> being the vector with the differences between the predicted calendars and the actual calendars (<code>ca.obs</code>).
</p>
<p>For the total reserve: <code>pe.tot =  sum(tot.dif^2) / sum(tot.obs^2)</code> 
</p>
<p>with <code>tot.dif</code> the absolute difference between the predicted reserve and the actual reserve (tot.obs).
</p>


<h3>Value</h3>

<table role = "presentation">
<tr><td><code>pe.vector</code></td>
<td>
<p>A vector (length 10) with elements being (in the following order): <code>ncut</code>, the averaged errors predicing cells by  DCL, BDCL and IDCL (see <code>pe.cells</code> in Details above), the three averaged errors by predicing diagonals (<code>pe.diags</code>), and the three errors by predicting the overal total (<code>pe.tot</code>).</p>
</td></tr>
<tr><td><code>Xdif</code></td>
<td>
<p>A matrix with the individual cells errors (see <code>ce.dif</code> in Details above) for each method (by columns)</p>
</td></tr> 
<tr><td><code>Inflat.DCL</code></td>
<td>
<p>The estimated underwriting DCL inflation using <code><a href="#topic+dcl.estimation">dcl.estimation</a></code>. Only provided if <code>ncut=0</code>.</p>
</td></tr>
<tr><td><code>Inflat.BDCL</code></td>
<td>
<p>The estimated underwriting BDCL inflation using <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>. Only provided if <code>ncut=0</code>.</p>
</td></tr>
<tr><td><code>Inflat.IDCL</code></td>
<td>
<p>The estimated underwriting IDCL inflation using <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>. Only provided if <code>ncut=0</code>.</p>
</td></tr>
</table>


<h3>Note</h3>

<p>To validate classical chain ladder on paid data against classical chain ladder on incurred data it should be used <code>Model=0</code> (see <code><a href="#topic+dcl.predict">dcl.predict</a></code>) for more details. 
</p>


<h3>Author(s)</h3>

<p>M.D. Martinez-Miranda, J.P. Nielsen and R. Verrall
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Ferguson. <em>North Americal Actuarial Journal</em>, 17(2), 101-113.
</p>
<p>Martinez-Miranda M.D., Nielsen, J.P., Sperlich, S., Verrall, R. (2013). Continuous Chain Ladder: Reformulating and generalizing a classical insurance problem. Experts Systems with Applications, 40(14), 5588-5603.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+dcl.estimation">dcl.estimation</a></code>, <code><a href="#topic+bdcl.estimation">bdcl.estimation</a></code>,  <code><a href="#topic+idcl.estimation">idcl.estimation</a></code>, ,<code><a href="#topic+dcl.predict">dcl.predict</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(NtriangleBDCL)
data(XtriangleBDCL)
data(ItriangleBDCL)

Ntriangle&lt;-NtriangleBDCL
Xtriangle&lt;-XtriangleBDCL
Itriangle&lt;-ItriangleBDCL
## First compare the three methods to be validated (three different inflations)
validating.incurred(ncut=0,Xtriangle,Ntriangle,Itriangle)

## Now perform a backtest cutting up to four calendars backward
test.res&lt;-matrix(NA,4,10)
par(mfrow=c(2,2),cex.axis=0.9,cex.main=1)
par(mar=c(1.5,1.5,1.5,1.5),oma=c(1,0.5,0.5,0.2),mgp=c(3,0.5,0)) 
for (i in 1:4)
{
  res&lt;-validating.incurred(ncut=i,Xtriangle,Ntriangle,Itriangle,Tables=FALSE)
  test.res[i,]&lt;-as.numeric(res$pe.vector)
}
test.res&lt;-as.data.frame(test.res)
names(test.res)&lt;-c("num.cut","pe.point.DCL","pe.point.BDCL","pe.point.IDCL",
"pe.calendar.DCL","pe.calendar.BDCL","pe.calendar.IDCL",
"pe.total.DCL","pe.total.BDCL","pe.total.IDCL")
print(test.res)
</code></pre>

<hr>
<h2 id='XtriangleBDCL'>
Paid data (BDCL example)
</h2><span id='topic+XtriangleBDCL'></span>

<h3>Description</h3>

<p>Real motor data from a major insurer. 
It is a run-off (incremental) triangle consisting of the aggregated payments during 19 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen and Verrall (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(XtriangleBDCL)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 19 by 19: 19 undewriting years and 19 development years.
</p>


<h3>References</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2013) Double Chain Ladder and Bornhuetter-Fergusson. <em>North American Actuarial Journal</em>, 17(2), 101-113.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(XtriangleBDCL)

Plot.triangle(XtriangleBDCL)
# Classical chain ladder method
clm(XtriangleBDCL)
</code></pre>

<hr>
<h2 id='XtriangleDCL'>
Paid data (DCL example)
</h2><span id='topic+XtriangleDCL'></span>

<h3>Description</h3>

<p>Real motor data from a major insurer. 
It is a yearly run-off (incremental) triangle consisting of the aggregated payments during 10 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen and Verrall (2012).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(XtriangleDCL)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 10 by 10: 10 undewriting years and 10 development years.
</p>


<h3>Source</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P. and Verrall, R. (2012) Double Chain Ladder. <em>Astin Bulletin</em>, 42/1, 59-76.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(XtriangleDCL)
Plot.triangle(XtriangleDCL)
# Classical chain ladder method
clm(XtriangleDCL)
</code></pre>

<hr>
<h2 id='XtrianglePrior'>Paid data (adding prior knowledge example)
</h2><span id='topic+XtrianglePrior'></span>

<h3>Description</h3>

<p>It is a run-off (incremental) triangle consisting of the aggregated payments during 19 years. These data were used in the empirical illustration provided by Martinez-Miranda, Nielsen, Verrall and Wuthrich (2013).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(XtrianglePrior)</code></pre>


<h3>Format</h3>

<p>Matrix with dimension 14 by 14: 14 undewriting years and 14 development years.
</p>


<h3>Source</h3>

<p>Martinez-Miranda, M.D., Nielsen, J.P., Verrall, R. and Wuthrich, M.V. (2013) Double Chain Ladder, Claims Development Inflation and Zero Claims. <em>Scandinavian Actuarial Journal</em>.
In press.</p>


<h3>Examples</h3>

<pre><code class='language-R'>data(XtrianglePrior)

Plot.triangle(XtrianglePrior)
# Classical chain ladder method
clm(XtrianglePrior)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
