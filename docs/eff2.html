<!DOCTYPE html><html lang="en"><head><title>Help for package eff2</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {eff2}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#eff2'><p>eff2: efficient least squares for estimating total causal effects</p></a></li>
<li><a href='#estimateEffect'><p>Estimate the total causal effect</p></a></li>
<li><a href='#ex1'><p>An example of 10 variables simulated from a linear SEM</p></a></li>
<li><a href='#isIdentified'><p>Check if a total causal effect is identified</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Efficient Least Squares for Total Causal Effects</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.2</td>
</tr>
<tr>
<td>Author:</td>
<td>Richard Guo <a href="https://orcid.org/0000-0002-2081-7398"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut,
    cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Richard Guo &lt;ricguo@uw.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Estimate a total causal effect from observational data under 
    linearity and causal sufficiency. The observational data is supposed to 
    be generated from a linear structural equation model (SEM) with independent 
    and additive noise. The underlying causal DAG associated the SEM is required
    to be known up to a maximally oriented partially directed graph (MPDAG), 
    which is a general class of graphs consisting of both directed and 
    undirected edges, including CPDAGs (i.e., essential graphs) and DAGs. Such
    graphs are usually obtained with structure learning algorithms with added 
    background knowledge. The program is able to estimate every identified 
    effect, including single and multiple treatment variables. Moreover, the 
    resulting estimate has the minimal asymptotic covariance (and hence 
    shortest confidence intervals) among all estimators that are based on the 
    sample covariance. </td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/richardkwo/eff2">https://github.com/richardkwo/eff2</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/richardkwo/eff2/issues">https://github.com/richardkwo/eff2/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>pcalg (&ge; 2.6), RBGL, igraph</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, testthat, qgraph</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-01-26 22:13:19 UTC; ricguo</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-01-26 22:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='eff2'>eff2: efficient least squares for estimating total causal effects</h2><span id='topic+eff2'></span><span id='topic+eff2-package'></span>

<h3>Description</h3>

<p>Estimate a total causal effect from observational data under
linearity and causal sufficiency. The observational data is supposed to be
generated from a linear structural equation model (SEM) with independent
and additive noise. The underlying causal DAG associated the SEM is required
to be known up to a maximally oriented partially directed graph (MPDAG),
which is a general class of graphs consisting of both directed and
undirected edges, including CPDAGs (i.e., essential graphs) and DAGs. Such
graphs are usually obtained with structure learning algorithms with added
background knowledge. The program is able to estimate every identified
effect, including single and multiple treatment variables. Moreover, the
resulting estimate has the minimal asymptotic covariance (and hence
shortest confidence intervals) among all estimators that are based on the
sample covariance.
</p>


<h3>Details</h3>

<p>Use <code><a href="#topic+estimateEffect">estimateEffect</a></code> to estimate a total effect.
</p>
<p>Use <code><a href="#topic+isIdentified">isIdentified</a></code> to determine if a total effect can be
identified.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Richard Guo <a href="mailto:ricguo@uw.edu">ricguo@uw.edu</a> (<a href="https://orcid.org/0000-0002-2081-7398">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/richardkwo/eff2">https://github.com/richardkwo/eff2</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/richardkwo/eff2/issues">https://github.com/richardkwo/eff2/issues</a>
</p>
</li></ul>


<hr>
<h2 id='estimateEffect'>Estimate the total causal effect</h2><span id='topic+estimateEffect'></span>

<h3>Description</h3>

<p>Estimate the total causal effect of x on y with iterated least squares.
The resulting estimate has the minimal asymptotic covariance among all least
squares estimators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>estimateEffect(data, x, y, amat, bootstrap = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="estimateEffect_+3A_data">data</code></td>
<td>
<p>a data frame consisting of iid observational data</p>
</td></tr>
<tr><td><code id="estimateEffect_+3A_x">x</code></td>
<td>
<p>(integer) positions of treatment variables in the adjacency matrix;
can be a singleton (single treatment) or a vector (multiple treatments)</p>
</td></tr>
<tr><td><code id="estimateEffect_+3A_y">y</code></td>
<td>
<p>(integer) position of the outcome variable in the adjacency matrix</p>
</td></tr>
<tr><td><code id="estimateEffect_+3A_amat">amat</code></td>
<td>
<p>adjacency matrix representing a DAG, CPDAG or MPDAG</p>
</td></tr>
<tr><td><code id="estimateEffect_+3A_bootstrap">bootstrap</code></td>
<td>
<p>If <code>TRUE</code>, will estimate the standard error covariance with
bootstrap (default: <code>FALSE</code>)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Adjacency matrix <code>amat</code> represents the graphical information of the
underlying causal DAG (directed acyclic graph). The causal DAG should be
contained by the graph represented by <code>amat</code>, which can be a DAG, CPDAG
(essential graph), or more generally, an MPDAG (maximally oriented partially
directed acyclic graph).
</p>
<p>Matrix <code>amat</code> is coded with the convention of <code><a href="pcalg.html#topic+amatType">amatType</a></code>:
</p>

<ul>
<li> <p><code>amat[i,j]=0</code> and <code>amat[j,i]=1</code> means <code>i-&gt;j</code>
</p>
</li>
<li> <p><code>amat[i,j]=1</code> and <code>amat[j,i]=0</code> means <code>i&lt;-j</code>
</p>
</li>
<li> <p><code>amat[i,j]=1</code> and <code>amat[j,i]=1</code> means <code>i--j</code>
</p>
</li>
<li> <p><code>amat[i,j]=0</code> and <code>amat[j,i]=0</code> means <code>i  j</code>
</p>
</li></ul>

<p><code>amat</code> can be learned from observational data with a structure learning
algorithm; see <code><a href="pcalg.html#topic+pc">pc</a></code>, <code><a href="pcalg.html#topic+ges">ges</a></code>
and <code><a href="pcalg.html#topic+LINGAM">LINGAM</a></code>. Additional background knowledge can also be
incorporated with <code><a href="pcalg.html#topic+addBgKnowledge">addBgKnowledge</a></code>.
</p>


<h3>Value</h3>

<p>A vector of the same length as <code>x</code>. If <code>bootstrap=TRUE</code>,
return a list of <code>(effect, se.cov)</code>.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+isIdentified">isIdentified</a></code> is called for determining if an effect can be
identified. See also <code><a href="pcalg.html#topic+adjustment">adjustment</a></code>, <code><a href="pcalg.html#topic+ida">ida</a></code>,
and <code><a href="pcalg.html#topic+jointIda">jointIda</a></code> for other estimators.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ex1")
result &lt;- estimateEffect(ex1$data, c(5,3), 7, ex1$amat.cpdag, bootstrap=TRUE)
print(result$effect)
print(result$effect - 1.96 * sqrt(diag(result$se.cov)))
print(result$effect + 1.96 * sqrt(diag(result$se.cov)))
# compare with truth
print(ex1$true.effects)

## Not run: 
# throws an error because the effect is not identified
estimateEffect(ex1$data, 3, 7, ex1$amat.cpdag)

## End(Not run)
</code></pre>

<hr>
<h2 id='ex1'>An example of 10 variables simulated from a linear SEM</h2><span id='topic+ex1'></span>

<h3>Description</h3>

<p>An example of 10 variables simulated from a linear SEM
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ex1
</code></pre>


<h3>Format</h3>

<p>A list containing:
</p>

<dl>
<dt>x</dt><dd><p>treatment variables</p>
</dd>
<dt>y</dt><dd><p>outcome variable</p>
</dd>
<dt>true.effects</dt><dd><p>the true total effect of x on y</p>
</dd>
<dt>B</dt><dd><p>the coefficient matrix of the SEM</p>
</dd>
<dt>amat.dag</dt><dd><p>the adjacency matrix of the causal DAG</p>
</dd>
<dt>amat.cpdag</dt><dd><p>the adjacency matrix of the CPDAG of the causal DAG,
representing the Markov equivalence class of the DAG.</p>
</dd>
<dt>data</dt><dd><p>500 iid samples generated under student-t errors</p>
</dd>
</dl>


<hr>
<h2 id='isIdentified'>Check if a total causal effect is identified</h2><span id='topic+isIdentified'></span>

<h3>Description</h3>

<p>The total causal effect from x to y is identified if and only if there is
no possibly causal path from x to y that starts with an undirected edge.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>isIdentified(amat, x, y, type = "pdag")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="isIdentified_+3A_amat">amat</code></td>
<td>
<p>adjacency matrix. See <code><a href="#topic+estimateEffect">estimateEffect</a></code>
for its coding.</p>
</td></tr>
<tr><td><code id="isIdentified_+3A_x">x</code></td>
<td>
<p>(integer) positions of treatment variables in the adjacency matrix</p>
</td></tr>
<tr><td><code id="isIdentified_+3A_y">y</code></td>
<td>
<p>(integer) positions of outcome variables in the adjacency matrix</p>
</td></tr>
<tr><td><code id="isIdentified_+3A_type">type</code></td>
<td>
<p>string specifying the type of graph of <code>amat</code>. It can be
DAG (<code>type='dag'</code>) or MPDAG/CPDAG (<code>type='pdag'</code>).</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>TRUE</code> if identified, <code>FALSE</code> if not.
</p>


<h3>References</h3>

<p>Emilija Perkovic. Identifying causal effects in maximally oriented
partially directed acyclic graphs.
In <em>Uncertainty in Artificial Intelligence (UAI)</em>, 2020.
</p>


<h3>See Also</h3>

<p><code><a href="#topic+estimateEffect">estimateEffect</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>data("ex1")
# identified
isIdentified(ex1$amat.cpdag, c(3, 5), 7)
# not identified
isIdentified(ex1$amat.cpdag, 3, 7)
isIdentified(ex1$amat.cpdag, c(3, 5), 10)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
