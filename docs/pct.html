<!DOCTYPE html><html><head><title>Help for package pct</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {pct}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#desire_lines_leeds'><p>Cycle route desire lines for Leeds</p></a></li>
<li><a href='#get_centroids_ew'><p>Download MSOA centroids for England and Wales</p></a></li>
<li><a href='#get_desire_lines'><p>Desire lines</p></a></li>
<li><a href='#get_od'><p>Get origin destination data from the 2011 Census</p></a></li>
<li><a href='#get_pct'><p>Generic function to get regional data from the PCT</p></a></li>
<li><a href='#get_pct_centroids'><p>Get centroid results from the PCT</p></a></li>
<li><a href='#get_pct_lines'><p>Get desire lines results from the PCT</p></a></li>
<li><a href='#get_pct_rnet'><p>Get route network results from the PCT</p></a></li>
<li><a href='#get_pct_routes_fast'><p>Get fast road network results from the PCT</p></a></li>
<li><a href='#get_pct_routes_quiet'><p>Get quiet road network results from the PCT</p></a></li>
<li><a href='#get_pct_zones'><p>Get zone results from the PCT</p></a></li>
<li><a href='#leeds_uber_sample'><p>Top 15 min mean journy times within Leeds from Uber</p></a></li>
<li><a href='#mode_names'><p>Mode names in the Census</p></a></li>
<li><a href='#model_pcycle_pct_2020'><p>Model cycling levels as a function of explanatory variables</p></a></li>
<li><a href='#od_leeds'><p>Example OD data for Leeds</p></a></li>
<li><a href='#pct_regions'><p>PCT regions from www.pct.bike</p></a></li>
<li><a href='#pct_regions_lookup'><p>Lookup table matching PCT regions to local authorities</p></a></li>
<li><a href='#rnet_leeds'><p>Route network for Leeds</p></a></li>
<li><a href='#routes_fast_leeds'><p>Fastest cycle routes for the desire_lines_leeds</p></a></li>
<li><a href='#santiago_lines'><p>Desire lines in central Santiago</p></a></li>
<li><a href='#santiago_od'><p>OD data in central Santiago</p></a></li>
<li><a href='#santiago_routes_cs'><p>200 cycle routes in central Santiago, Chile</p></a></li>
<li><a href='#santiago_zones'><p>Zones in central Santiago</p></a></li>
<li><a href='#uptake_pct_godutch'><p>Calculate cycling uptake for UK 'Go Dutch' scenario</p></a></li>
<li><a href='#uptake_pct_govtarget'><p>Calculate cycling uptake for UK 'Government Target' scenario</p></a></li>
<li><a href='#wight_lines_30'><p>Desire lines from the PCT for the Isle of Wight</p></a></li>
<li><a href='#wight_od'><p>Official origin-destination data for the Isle of Wight</p></a></li>
<li><a href='#wight_routes_30'><p>Cycle route data for the Isle of Wight</p></a></li>
<li><a href='#wight_zones'><p>Zones and centroid data from the PCT for the Isle of Wight</p></a></li>
<li><a href='#zones_leeds'><p>Zone data for Leeds</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Propensity to Cycle Tool</td>
</tr>
<tr>
<td>Version:</td>
<td>0.9.9</td>
</tr>
<tr>
<td>Description:</td>
<td>Functions and example data to teach and
  increase the reproducibility of the methods and code underlying 
  the Propensity to Cycle Tool (PCT), a research project and web application 
  hosted at <a href="https://www.pct.bike/">https://www.pct.bike/</a>. 
  For an academic paper on the methods,
  see Lovelace et al (2017) &lt;<a href="https://doi.org/10.5198%2Fjtlu.2016.862">doi:10.5198/jtlu.2016.862</a>&gt;.</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://itsleeds.github.io/pct/">https://itsleeds.github.io/pct/</a>, <a href="https://github.com/ITSLeeds/pct">https://github.com/ITSLeeds/pct</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/ITSLeeds/pct/issues">https://github.com/ITSLeeds/pct/issues</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Imports:</td>
<td>boot, stplanr (&ge; 0.2.8), readr, sf, crul</td>
</tr>
<tr>
<td>Suggests:</td>
<td>covr, curl, dplyr, ggplot2, knitr, leaflet, pbapply, remotes,
rmarkdown, testthat, tmap, bookdown</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-05-19 21:03:07 UTC; robin</td>
</tr>
<tr>
<td>Author:</td>
<td>Robin Lovelace <a href="https://orcid.org/0000-0001-5679-6536"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Layik Hama <a href="https://orcid.org/0000-0003-1912-4890"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut],
  Nathanael Sheehan <a href="https://orcid.org/0000-0002-2779-0976"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [ctb]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Robin Lovelace &lt;rob00x@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-05-19 21:20:03 UTC</td>
</tr>
</table>
<hr>
<h2 id='desire_lines_leeds'>Cycle route desire lines for Leeds</h2><span id='topic+desire_lines_leeds'></span>

<h3>Description</h3>

<p>Cycle route desire lines for Leeds
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
desire_lines_leeds
</code></pre>

<hr>
<h2 id='get_centroids_ew'>Download MSOA centroids for England and Wales</h2><span id='topic+get_centroids_ew'></span>

<h3>Description</h3>

<p>Downloads and processes data on where people live in England and Wales.
See <a href="https://geoportal.statistics.gov.uk/datasets/b0a6d8a3dc5d4718b3fd62c548d60f81_0">geoportal.statistics.gov.uk</a>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_centroids_ew()
</code></pre>

<hr>
<h2 id='get_desire_lines'>Desire lines</h2><span id='topic+get_desire_lines'></span>

<h3>Description</h3>

<p>This function generates &quot;desire lines&quot; from census 2011 data.
By default gets all desire lines from census in region, but
can get the top <code>n</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_desire_lines(region = NULL, n = NULL, omit_intrazonal = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_desire_lines_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_desire_lines_+3A_n">n</code></td>
<td>
<p>top n number of destinations with most trips in the 2011 census
within the <code>region</code>.</p>
</td></tr>
<tr><td><code id="get_desire_lines_+3A_omit_intrazonal">omit_intrazonal</code></td>
<td>
<p>should intrazonal OD pairs be omited from result?
<code>FALSE</code> by default.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>
if(curl::has_internet()) {
desire_lines = get_desire_lines("wight")
plot(desire_lines)
intra_zonal = desire_lines$geo_code1 == desire_lines$geo_code2
plot(desire_lines[intra_zonal, ])
}

</code></pre>

<hr>
<h2 id='get_od'>Get origin destination data from the 2011 Census</h2><span id='topic+get_od'></span>

<h3>Description</h3>

<p>This function downloads a .csv file representing movement
between MSOA zones in England and Wales.
By default it returns national data, but
<code>region</code> can be set to subset the output to a specific
local authority or region.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_od(
  region = NULL,
  n = NULL,
  type = "within",
  omit_intrazonal = FALSE,
  base_url = paste0("https://s3-eu-west-1.amazonaws.com/",
    "statistics.digitalresources.jisc.ac.uk", "/dkan/files/FLOW/"),
  filename = "wu03ew_v2",
  u = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_od_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_od_+3A_n">n</code></td>
<td>
<p>top n number of destinations with most trips in the 2011 census
within the <code>region</code>.</p>
</td></tr>
<tr><td><code id="get_od_+3A_type">type</code></td>
<td>
<p>the type of subsetting: one of <code>from</code>, <code>to</code> or <code>within</code>, specifying how
the od dataset should be subset in relation to the <code>region</code>.</p>
</td></tr>
<tr><td><code id="get_od_+3A_omit_intrazonal">omit_intrazonal</code></td>
<td>
<p>should intrazonal OD pairs be omited from result?
<code>FALSE</code> by default.</p>
</td></tr>
<tr><td><code id="get_od_+3A_base_url">base_url</code></td>
<td>
<p>the base url where the OD dataset is stored</p>
</td></tr>
<tr><td><code id="get_od_+3A_filename">filename</code></td>
<td>
<p>the name of the file to download, if not the default MSOA level
data.</p>
</td></tr>
<tr><td><code id="get_od_+3A_u">u</code></td>
<td>
<p>full url of file to download</p>
</td></tr>
</table>


<h3>Details</h3>

<p>OD datasets available include wu03uk_v3
and others listed on the Wicid website.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
get_od("wight", n = 3)
get_od()
get_od(filename = "wu03uk_v3")
u = "https://www.nomisweb.co.uk/output/census/2011/wf02ew_oa.zip"
# get_od(u = u)

</code></pre>

<hr>
<h2 id='get_pct'>Generic function to get regional data from the PCT</h2><span id='topic+get_pct'></span>

<h3>Description</h3>

<p>This function gets data generated for the Propensity to Cycle Tool
project and returns objects in the modern <code>sf</code> class.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct(
  base_url = "https://github.com/npct/pct-outputs-regional-notR/raw/master",
  purpose = "commute",
  geography = "lsoa",
  region = NULL,
  layer = NULL,
  extension = ".geojson",
  national = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_+3A_base_url">base_url</code></td>
<td>
<p>Where the data is stored.</p>
</td></tr>
<tr><td><code id="get_pct_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_+3A_layer">layer</code></td>
<td>
<p>The PCT layer of interest, <code>z</code>, <code>c</code>, <code>l</code>, <code>rf</code>, <code>rq</code> or <code>rnet</code>
for zones, centroids, desire lines, routes (fast or quiet) and route networks, respectively</p>
</td></tr>
<tr><td><code id="get_pct_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
<tr><td><code id="get_pct_+3A_national">national</code></td>
<td>
<p>Download nationwide data? <code>FALSE</code> by default</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rf = get_pct(region = "isle-of-wight", layer = "rf")
names(rf)[1:20]
vars_to_plot = 10:13
plot(rf[vars_to_plot])
z = get_pct(region = "isle-of-wight", layer = "z")
rf = get_pct(region = "west-yorkshire", layer = "rf")
z_all = get_pct(layer = "z", national = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_centroids'>Get centroid results from the PCT</h2><span id='topic+get_pct_centroids'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets centroid data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_centroids(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_centroids_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_centroids_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_centroids_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_centroids_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
c = get_pct_centroids("isle-of-wight")
plot(c)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_lines'>Get desire lines results from the PCT</h2><span id='topic+get_pct_lines'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets l (lines) data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_lines(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_lines_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_lines_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_lines_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_lines_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
l = get_pct_lines("isle-of-wight")
plot(l)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_rnet'>Get route network results from the PCT</h2><span id='topic+get_pct_rnet'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets route road network data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_rnet(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_rnet_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_rnet_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_rnet_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_rnet_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
rnet =  get_pct_rnet("isle-of-wight")
plot(rnet)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_routes_fast'>Get fast road network results from the PCT</h2><span id='topic+get_pct_routes_fast'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets rf data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_routes_fast(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_routes_fast_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_routes_fast_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_routes_fast_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_routes_fast_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
rf = get_pct_routes_fast("isle-of-wight")
plot(rf)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_routes_quiet'>Get quiet road network results from the PCT</h2><span id='topic+get_pct_routes_quiet'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets rq data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_routes_quiet(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_routes_quiet_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_routes_quiet_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_routes_quiet_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_routes_quiet_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
rq =  get_pct_routes_quiet("isle-of-wight")
plot(rq)

## End(Not run)
</code></pre>

<hr>
<h2 id='get_pct_zones'>Get zone results from the PCT</h2><span id='topic+get_pct_zones'></span>

<h3>Description</h3>

<p>Wrapper around <code style="white-space: pre;">&#8288;[get_pct()]&#8288;</code> that gets zone data from the PCT.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_pct_zones(
  region = NULL,
  purpose = "commute",
  geography = "lsoa",
  extension = ".geojson"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_pct_zones_+3A_region">region</code></td>
<td>
<p>The PCT region or local authority to download data from (e.g. <code>west-yorkshire</code> or <code>Leeds</code>).
See <code>View(pct_regions_lookup)</code> for a full list of possible region names.</p>
</td></tr>
<tr><td><code id="get_pct_zones_+3A_purpose">purpose</code></td>
<td>
<p>Trip purpose (typically <code>school</code> or <code>commute</code>)</p>
</td></tr>
<tr><td><code id="get_pct_zones_+3A_geography">geography</code></td>
<td>
<p>Geographic resolution of outputs, <code>msoa</code> or <code>lsoa</code> (the default)</p>
</td></tr>
<tr><td><code id="get_pct_zones_+3A_extension">extension</code></td>
<td>
<p>The type of file to download (only <code>.geojson</code> supported at present)</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# don't test to reduce build times
z = get_pct_zones("isle-of-wight")
plot(z)

## End(Not run)
</code></pre>

<hr>
<h2 id='leeds_uber_sample'>Top 15 min mean journy times within Leeds from Uber</h2><span id='topic+leeds_uber_sample'></span>

<h3>Description</h3>

<p>Data downloaded 4th March 2019.
According to Uber, the dataset is from:
1/1/2018 - 1/31/2018 (Every day, Daily Average)
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
leeds_uber_sample
</code></pre>

<hr>
<h2 id='mode_names'>Mode names in the Census</h2><span id='topic+mode_names'></span>

<h3>Description</h3>

<p>And conversion into R-friendly versions
</p>


<h3>Examples</h3>

<pre><code class='language-R'>mode_names
</code></pre>

<hr>
<h2 id='model_pcycle_pct_2020'>Model cycling levels as a function of explanatory variables</h2><span id='topic+model_pcycle_pct_2020'></span>

<h3>Description</h3>

<p>Model cycling levels as a function of explanatory variables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>model_pcycle_pct_2020(pcycle, distance, gradient, weights)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="model_pcycle_pct_2020_+3A_pcycle">pcycle</code></td>
<td>
<p>The proportion of trips by bike, e.g. 0.1, meaning 10%</p>
</td></tr>
<tr><td><code id="model_pcycle_pct_2020_+3A_distance">distance</code></td>
<td>
<p>Vector distance numeric values of routes in km
(switches to km if more than 100).</p>
</td></tr>
<tr><td><code id="model_pcycle_pct_2020_+3A_gradient">gradient</code></td>
<td>
<p>Vector gradient numeric values of routes.</p>
</td></tr>
<tr><td><code id="model_pcycle_pct_2020_+3A_weights">weights</code></td>
<td>
<p>The weights used in the model, typically the total number of people per OD pair</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># l = get_pct_lines(region = "isle-of-wight")
# l = get_pct_lines(region = "cambridgeshire")
l = wight_lines_pct
pcycle = l$bicycle / l$all
pcycle_dutch = l$dutch_slc / l$all
m1 = model_pcycle_pct_2020(
  pcycle,
  distance = l$rf_dist_km,
  gradient = l$rf_avslope_perc - 0.78,
  weights = l$all
  )
m2 = model_pcycle_pct_2020(
  pcycle_dutch, distance = l$rf_dist_km,
  gradient = l$rf_avslope_perc - 0.78,
  weights = l$all
)
m3 = model_pcycle_pct_2020(
  pcycle_dutch, distance = l$rf_dist_km,
  gradient = l$rf_avslope_perc - 0.78,
  weights = rep(1, nrow(l))
)
m1
plot(l$rf_dist_km, pcycle, cex = l$all / 100, ylim = c(0, 0.5))
points(l$rf_dist_km, m1$fitted.values, col = "red")
points(l$rf_dist_km, m2$fitted.values, col = "blue")
points(l$rf_dist_km, pcycle_dutch, col = "green")
cor(l$dutch_slc, m2$fitted.values * l$all)^2 # 95% captured
# identical means:
mean(l$dutch_slc)
mean(m2$fitted.values * l$all)
pct_coefficients_2020 = c(
  alpha = -4.018 + 2.550,
  d1 = -0.6369 -0.08036,
  d2 = 1.988,
  d3 = 0.008775,
  h1 = -0.2555,
  i1 = 0.02006,
  i2 = -0.1234
)
pct_coefficients_2020
m2$coef
plot(pct_coefficients_2020, m2$coeff)
cor(pct_coefficients_2020, m2$coeff)^2
cor(pct_coefficients_2020, m3$coeff)^2 # explains 95%+ variability in params
</code></pre>

<hr>
<h2 id='od_leeds'>Example OD data for Leeds</h2><span id='topic+od_leeds'></span>

<h3>Description</h3>

<p><code>od_leeds</code> contains the 100 most travelled work desire lines in Leeds,
according to the 2011 Census.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
od_leeds
</code></pre>

<hr>
<h2 id='pct_regions'>PCT regions from www.pct.bike</h2><span id='topic+pct_regions'></span>

<h3>Description</h3>

<p>See data-raw folder for generation code
</p>


<h3>Examples</h3>

<pre><code class='language-R'>pct_regions
</code></pre>

<hr>
<h2 id='pct_regions_lookup'>Lookup table matching PCT regions to local authorities</h2><span id='topic+pct_regions_lookup'></span>

<h3>Description</h3>

<p>For matching pct_regions object with local authority names in England and Wales.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
names(pct_regions_lookup)
head(pct_regions_lookup)
</code></pre>

<hr>
<h2 id='rnet_leeds'>Route network for Leeds</h2><span id='topic+rnet_leeds'></span>

<h3>Description</h3>

<p>Route network for Leeds
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
rnet_leeds
</code></pre>

<hr>
<h2 id='routes_fast_leeds'>Fastest cycle routes for the desire_lines_leeds</h2><span id='topic+routes_fast_leeds'></span>

<h3>Description</h3>

<p>Fastest cycle routes for the desire_lines_leeds
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
routes_fast_leeds
</code></pre>

<hr>
<h2 id='santiago_lines'>Desire lines in central Santiago</h2><span id='topic+santiago_lines'></span>

<h3>Description</h3>

<p>See https://github.com/pedalea/pctSantiago folder for generation code
</p>


<h3>Examples</h3>

<pre><code class='language-R'># u = "https://github.com/pedalea/pctSantiago/releases/download/0.0.1/od_agg_zone_sub.Rds"
# download.file(u, destfile = "od_agg_zone_sub.Rds")
# desire_lines = readRDS("od_agg_zone_sub.Rds")
santiago_zones
</code></pre>

<hr>
<h2 id='santiago_od'>OD data in central Santiago</h2><span id='topic+santiago_od'></span>

<h3>Description</h3>

<p>See https://github.com/pedalea/pctSantiago folder for generation code
</p>


<h3>Examples</h3>

<pre><code class='language-R'># u = "https://github.com/pedalea/pctSantiago/releases/download/0.0.1/santiago_od.Rds"
# download.file(u, destfile = "santiago_od.Rds", mode = "wb")
# santiago_od = readRDS("santiago_od.Rds")
santiago_od
</code></pre>

<hr>
<h2 id='santiago_routes_cs'>200 cycle routes in central Santiago, Chile</h2><span id='topic+santiago_routes_cs'></span>

<h3>Description</h3>

<p>This data was obtained using code shown in the
International application of the PCT methods
<a href="https://itsleeds.github.io/pct/articles/pct-international.html">vignette</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
names(santiago_routes_cs)
head(santiago_routes_cs)
plot(santiago_routes_cs)
</code></pre>

<hr>
<h2 id='santiago_zones'>Zones in central Santiago</h2><span id='topic+santiago_zones'></span>

<h3>Description</h3>

<p>See https://github.com/pedalea/pctSantiago folder for generation code
</p>


<h3>Examples</h3>

<pre><code class='language-R'># u = "https://github.com/pedalea/pctSantiago/releases/download/0.0.1/z_centre.Rds"
# download.file(u, destfile = "z_centre.Rds", mode = "wb")
# santiago_zones = readRDS("z_centre.Rds")
santiago_zones
</code></pre>

<hr>
<h2 id='uptake_pct_godutch'>Calculate cycling uptake for UK 'Go Dutch' scenario</h2><span id='topic+uptake_pct_godutch'></span>

<h3>Description</h3>

<p>This function implements the uptake model described in the original
Propensity to Cycle Tool paper (Lovelace et al. 2017):
https://doi.org/10.5198/jtlu.2016.862
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uptake_pct_godutch(
  distance,
  gradient,
  alpha = -3.959 + 2.523,
  d1 = -0.5963 - 0.07626,
  d2 = 1.866,
  d3 = 0.00805,
  h1 = -0.271,
  i1 = 0.009394,
  i2 = -0.05135,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uptake_pct_godutch_+3A_distance">distance</code></td>
<td>
<p>Vector distance numeric values of routes in km
(switches to km if more than 100).</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_gradient">gradient</code></td>
<td>
<p>Vector gradient numeric values of routes.</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_alpha">alpha</code></td>
<td>
<p>The intercept</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_d1">d1</code></td>
<td>
<p>Distance term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_d2">d2</code></td>
<td>
<p>Distance term 2</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_d3">d3</code></td>
<td>
<p>Distance term 3</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_h1">h1</code></td>
<td>
<p>Hilliness term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_i1">i1</code></td>
<td>
<p>Distance-hilliness interaction term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_i2">i2</code></td>
<td>
<p>Distance-hilliness interaction term 2</p>
</td></tr>
<tr><td><code id="uptake_pct_godutch_+3A_verbose">verbose</code></td>
<td>
<p>Print messages? <code>FALSE</code> by default.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See <code><a href="#topic+uptake_pct_govtarget">uptake_pct_govtarget()</a></code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># https://www.jtlu.org/index.php/jtlu/article/download/862/1381/4359
# Equation 1B:
distance = 15
gradient = 2
logit = -3.959 + 2.523 +
  ((-0.5963 - 0.07626) * distance) +
  (1.866 * sqrt(distance)) +
  (0.008050 * distance^2) +
  (-0.2710 * gradient) +
  (0.009394 * distance * gradient) +
  (-0.05135 * sqrt(distance) * gradient)
logit
# Result: -3.144098

pcycle = exp(logit) / (1 + exp(logit))
# Result: 0.04132445
boot::inv.logit(logit)
uptake_pct_godutch(distance, gradient,
  alpha = -3.959 + 2.523, d1 = -0.5963 - 0.07626,
  d2 = 1.866, d3 = 0.008050, h1 = -0.2710, i1 = 0.009394, i2 = -0.05135
)
# these are the default values
uptake_pct_godutch(distance, gradient)
l = routes_fast_leeds
pcycle_scenario = uptake_pct_godutch(l$length, l$av_incline)
plot(l$length, pcycle_scenario)
</code></pre>

<hr>
<h2 id='uptake_pct_govtarget'>Calculate cycling uptake for UK 'Government Target' scenario</h2><span id='topic+uptake_pct_govtarget'></span><span id='topic+uptake_pct_govtarget_2020'></span><span id='topic+uptake_pct_godutch_2020'></span><span id='topic+uptake_pct_ebike_2020'></span><span id='topic+uptake_pct_govtarget_school2'></span><span id='topic+uptake_pct_godutch_school2'></span>

<h3>Description</h3>

<p>Uptake model that takes distance and hilliness and returns
a percentage of trips that could be made by cycling along a desire line
under scenarios of change. Source: appendix of pct paper, hosted at:
<a href="https://www.jtlu.org/index.php/jtlu/article/download/862/1381/4359">www.jtlu.org</a>
which states that: &quot;To  estimate  cycling  potential,the  Propensity  to  Cycle  Tool  (PCT)  was
designed  to  use  the  best available  geographically  disaggregated
data  sources  on  travel  patterns.&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>uptake_pct_govtarget(
  distance,
  gradient,
  alpha = -3.959,
  d1 = -0.5963,
  d2 = 1.866,
  d3 = 0.00805,
  h1 = -0.271,
  i1 = 0.009394,
  i2 = -0.05135,
  verbose = FALSE
)

uptake_pct_govtarget_2020(
  distance,
  gradient,
  alpha = -4.018,
  d1 = -0.6369,
  d2 = 1.988,
  d3 = 0.008775,
  h1 = -0.2555,
  h2 = -0.78,
  i1 = 0.02006,
  i2 = -0.1234,
  verbose = FALSE
)

uptake_pct_godutch_2020(
  distance,
  gradient,
  alpha = -4.018 + 2.55,
  d1 = -0.6369 - 0.08036,
  d2 = 1.988,
  d3 = 0.008775,
  h1 = -0.2555,
  h2 = -0.78,
  i1 = 0.02006,
  i2 = -0.1234,
  verbose = FALSE
)

uptake_pct_ebike_2020(
  distance,
  gradient,
  alpha = -4.018 + 2.55,
  d1 = -0.6369 - 0.08036 + 0.05509,
  d2 = 1.988,
  d3 = 0.008775 - 0.000295,
  h1 = -0.2555 + 0.1812,
  h2 = -0.78,
  i1 = 0.02006,
  i2 = -0.1234,
  verbose = FALSE
)

uptake_pct_govtarget_school2(
  distance,
  gradient,
  alpha = -7.178,
  d1 = -1.87,
  d2 = 5.961,
  h1 = -0.529,
  h2 = -0.63,
  verbose = FALSE
)

uptake_pct_godutch_school2(
  distance,
  gradient,
  alpha = -7.178 + 3.574,
  d1 = -1.87 + 0.3438,
  d2 = 5.961,
  h1 = -0.529,
  h2 = -0.63,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="uptake_pct_govtarget_+3A_distance">distance</code></td>
<td>
<p>Vector distance numeric values of routes in km
(switches to km if more than 100).</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_gradient">gradient</code></td>
<td>
<p>Vector gradient numeric values of routes.</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_alpha">alpha</code></td>
<td>
<p>The intercept</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_d1">d1</code></td>
<td>
<p>Distance term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_d2">d2</code></td>
<td>
<p>Distance term 2</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_d3">d3</code></td>
<td>
<p>Distance term 3</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_h1">h1</code></td>
<td>
<p>Hilliness term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_i1">i1</code></td>
<td>
<p>Distance-hilliness interaction term 1</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_i2">i2</code></td>
<td>
<p>Distance-hilliness interaction term 2</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_verbose">verbose</code></td>
<td>
<p>Print messages? <code>FALSE</code> by default.</p>
</td></tr>
<tr><td><code id="uptake_pct_govtarget_+3A_h2">h2</code></td>
<td>
<p>Hilliness term 2</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The functional form of the cycling uptake model used in the PCT is as follows:
(Source: <a href="https://npct.github.io/pct-shiny/regions_www/www/static/03a_manual/pct-bike-eng-user-manual-c1.pdf">npct.github.io</a>)
</p>
<div class="sourceCode"><pre>logit (pcycle) = -3.959 +   # alpha
  (-0.5963 * distance) +    # d1
  (1.866 * distancesqrt) +  # d2
  (0.008050 * distancesq) + # d3
  (-0.2710 * gradient) +    # h1
  (0.009394 * distance * gradient) +  # i1
  (-0.05135 * distancesqrt *gradient) # i2

pcycle = exp ([logit (pcycle)]) / (1 + (exp([logit(pcycle)])
</pre></div>
<p><code>uptake_pct_govtarget_2020()</code> and
<code>uptake_pct_godutch_2020()</code>
approximate the uptake models used in the updated 2020 release of
the PCT results.
</p>
<p>If the <code>distance</code> parameter is greater than 100, it is assumed that it is in m.
If for some reason you want to model cycling uptake associated with trips with
distances of less than 100 m, convert the distances to km first.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>distance = 15
gradient = 2
logit_pcycle = -3.959 + # alpha
  (-0.5963 * distance) + # d1
  (1.866 * sqrt(distance)) + # d2
  (0.008050 * distance^2) + # d3
  (-0.2710 * gradient) + # h1
  (0.009394 * distance * gradient) + # i1
  (-0.05135 * sqrt(distance) * gradient) # i2
boot::inv.logit(logit_pcycle)
uptake_pct_govtarget(15, 2)
l = routes_fast_leeds
pcycle_scenario = uptake_pct_govtarget(l$length, l$av_incline)
pcycle_scenario_2020 = uptake_pct_govtarget_2020(l$length, l$av_incline)
plot(l$length, pcycle_scenario, ylim = c(0, 0.2))
points(l$length, pcycle_scenario_2020, col = "blue")

# compare with published PCT data:
## Not run: 
l_pct_2020 = get_pct_lines(region = "isle-of-wight")
# test for another region:
# l_pct_2020 = get_pct_lines(region = "west-yorkshire")
l_pct_2020$rf_avslope_perc[1:5]
l_pct_2020$rf_dist_km[1:5]
govtarget_slc = uptake_pct_govtarget(
  distance = l_pct_2020$rf_dist_km,
  gradient = l_pct_2020$rf_avslope_perc
) * l_pct_2020$all + l_pct_2020$bicycle
govtarget_slc_2020 = uptake_pct_govtarget_2020(
  distance = l_pct_2020$rf_dist_km,
  gradient = l_pct_2020$rf_avslope_perc
) * l_pct_2020$all + l_pct_2020$bicycle
mean(l_pct_2020$govtarget_slc)
mean(govtarget_slc)
mean(govtarget_slc_2020)
godutch_slc = uptake_pct_godutch(
  distance = l_pct_2020$rf_dist_km,
  gradient = l_pct_2020$rf_avslope_perc
) * l_pct_2020$all + l_pct_2020$bicycle
godutch_slc_2020 = uptake_pct_godutch_2020(
  distance = l_pct_2020$rf_dist_km,
  gradient = l_pct_2020$rf_avslope_perc
) * l_pct_2020$all + l_pct_2020$bicycle
mean(l_pct_2020$dutch_slc)
mean(godutch_slc)
mean(godutch_slc_2020)

## End(Not run)
# Take an origin destination (OD) pair between an LSOA centroid and a
# secondary school. In this OD pair, 30 secondary school children travel, of
# whom 3 currently cycle. The fastest route distance is 3.51 km and the
# gradient is 1.11%. The
# gradient as centred on Dutch hilliness levels is 1.11 â€“ 0.63 = 0.48%.
# The observed number of cyclists is 2. ... Modelled baseline= 30 * .0558 = 1.8.
uptake_pct_govtarget_school2(3.51, 1.11)
# pcycle = exp ([logit (pcycle)])/(1 + (exp([logit(pcycle)]))).
# pcycle = exp(1.953)/(1 + exp(1.953)) = .8758, or 87.58%.
uptake_pct_godutch_school2(3.51, 1.11)
</code></pre>

<hr>
<h2 id='wight_lines_30'>Desire lines from the PCT for the Isle of Wight</h2><span id='topic+wight_lines_30'></span><span id='topic+wight_lines_pct'></span>

<h3>Description</h3>

<p>This data was obtained using code shown in the introductory
<a href="https://itsleeds.github.io/pct/articles/pct.html">pct package vignette</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>names(wight_lines_30)
plot(wight_lines_30)
</code></pre>

<hr>
<h2 id='wight_od'>Official origin-destination data for the Isle of Wight</h2><span id='topic+wight_od'></span>

<h3>Description</h3>

<p>This data was obtained using code shown in the introductory
<a href="https://itsleeds.github.io/pct/articles/pct.html">pct package vignette</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>names(wight_od)
head(wight_od)
</code></pre>

<hr>
<h2 id='wight_routes_30'>Cycle route data for the Isle of Wight</h2><span id='topic+wight_routes_30'></span><span id='topic+wight_rnet'></span><span id='topic+wight_routes_30_cs'></span>

<h3>Description</h3>

<p>This data was obtained using code shown in the introductory
<a href="https://itsleeds.github.io/pct/articles/pct.html">pct package vignette</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
names(wight_routes_30)
head(wight_routes_30)
plot(wight_routes_30)
</code></pre>

<hr>
<h2 id='wight_zones'>Zones and centroid data from the PCT for the Isle of Wight</h2><span id='topic+wight_zones'></span><span id='topic+wight_centroids'></span>

<h3>Description</h3>

<p>This data was obtained using code shown in the introductory
<a href="https://itsleeds.github.io/pct/articles/pct.html">pct package vignette</a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
names(wight_lines_30)
plot(wight_lines_30)
</code></pre>

<hr>
<h2 id='zones_leeds'>Zone data for Leeds</h2><span id='topic+zones_leeds'></span>

<h3>Description</h3>

<p>Zones in Leeds
</p>


<h3>Examples</h3>

<pre><code class='language-R'># see data-raw folder for generation code
zones_leeds
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
