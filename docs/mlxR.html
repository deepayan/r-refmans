<!DOCTYPE html><html><head><title>Help for package mlxR</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {mlxR}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#catplotmlx'><p>Plot Categorical Longitudinal Data</p></a></li>
<li><a href='#exposure'><p>Computation of AUC, Cmax and Cmin</p></a></li>
<li><a href='#ggplotmlx'><p>mlxR wrapper for ggplot</p></a></li>
<li><a href='#initMlxR'><p>Initialize mlxR library</p></a></li>
<li><a href='#inlineDataFrame'><p>inline data frame</p></a></li>
<li><a href='#inlineModel'><p>inline model</p></a></li>
<li><a href='#kmplotmlx'><p>Kaplan Meier plot</p></a></li>
<li><a href='#lixoft.read.table'><p>Read Lixoft@ files</p></a></li>
<li><a href='#mlxplore'><p>Explore and visualize models</p></a></li>
<li><a href='#monolix2simulx'><p>Convert a Monolix Project  into an executable for the simulator  Simulx</p></a></li>
<li><a href='#pkmodel'><p>Easy simulation of PK models</p>
</p>
<p>Easy simulation of basic PK models</p>
</p>
<p>See http://simulx.webpopix.org/mlxr/pkmodel/ for more details.</p></a></li>
<li><a href='#prctilemlx'><p>Percentiles of the empiricial distribution of longitudinal data</p></a></li>
<li><a href='#read.vector'><p>Reads  a table into a vector</p></a></li>
<li><a href='#readDatamlx'><p>Read formatted data file</p></a></li>
<li><a href='#shinymlx'><p>Automatic code generation for Shiny applications</p></a></li>
<li><a href='#simpopmlx'><p>Population parameters simulation</p></a></li>
<li><a href='#simulx'><p>Simulation of mixed effects models and longitudinal data</p></a></li>
<li><a href='#statmlx'><p>Summary of data</p></a></li>
<li><a href='#writeDatamlx'><p>Write formatted data file</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Version:</td>
<td>4.2.0</td>
</tr>
<tr>
<td>Title:</td>
<td>Simulation of Longitudinal Data</td>
</tr>
<tr>
<td>Description:</td>
<td>Simulation and visualization of complex
    models for longitudinal data. The models are encoded using the model coding
    language 'Mlxtran' and automatically converted into C++ codes. 
    That allows one to implement very easily complex ODE-based models and complex 
    statistical models, including mixed effects models, for continuous, count, 
    categorical, and time-to-event data.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="http://simulx.webpopix.org">http://simulx.webpopix.org</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/MarcLavielle/mlxR/issues">https://github.com/MarcLavielle/mlxR/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.0.1), ggplot2</td>
</tr>
<tr>
<td>Suggests:</td>
<td>XML, Rcpp (&ge; 0.11.3), reshape2, gridExtra, shiny</td>
</tr>
<tr>
<td>Imports:</td>
<td>tools, methods, graphics, grDevices, utils, stats</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/BSD-2-Clause">BSD_2_clause</a> + file LICENSE</td>
</tr>
<tr>
<td>Copyright:</td>
<td>Inria</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.1.0</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Marc Lavielle &lt;Marc.Lavielle@inria.fr&gt;</td>
</tr>
<tr>
<td>Collate:</td>
<td>'apiTools.R' 'apiManager.R' 'mlxComputeRCleaner.R'
'mlxComputeRLibraryBuilder.R' 'addFieldsFromHeader.R'
'catplotmlx.R' 'commentModel.R' 'convertmlx.R' 'exposure.R'
'generateModelFromPkModel.R' 'ggplotmlx.R' 'hformat.R'
'hgdata.R' 'inlineDataFrame.R' 'inlineModel.R' 'isfield.R'
'kmplotmlx.R' 'mlxplore.R' 'monolix2simulx.R' 'pkmodel.R'
'prctilemlx.R' 'processing_monolix.R' 'processing_setting.R'
'processing_target.R' 'readVector.R' 'readdatamlx.R'
'shinymlx.R' 'simpopmlx.R' 'simulR.R' 'simulx.R' 'statmlx.R'
'stoolsmlx.R' 'toolsmlx.R' 'translateIOV.R' 'translateIOVind.R'
'uuid.R' 'writeDatamlx.R'</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2021-01-19 12:53:48 UTC; Marc</td>
</tr>
<tr>
<td>Author:</td>
<td>Marc Lavielle [aut, cre],
  Esther Ilinca [ctb],
  Raphael Kuate [ctb]</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2021-01-19 13:10:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='catplotmlx'>Plot Categorical Longitudinal Data</h2><span id='topic+catplotmlx'></span>

<h3>Description</h3>

<p>Plot the empirical distribution of categorical longitudinal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>catplotmlx(
  r,
  col = NULL,
  breaks = NULL,
  plot = TRUE,
  color = "#194280",
  group = NULL,
  facet = TRUE,
  labels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="catplotmlx_+3A_r">r</code></td>
<td>
<p>a data frame with a column &lsquo;<span class="samp">&#8288;id&#8288;</span>&rsquo;, a column &lsquo;<span class="samp">&#8288;time&#8288;</span>&rsquo;, 
a column with values and possibly Hk[ja column &lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_col">col</code></td>
<td>
<p>a vector of 3 column numbers: (&lsquo;<span class="samp">&#8288;id&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;time/x&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;y&#8288;</span>&rsquo;. Default = c(1, 2,3).</p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_breaks">breaks</code></td>
<td>
<p>one of:
</p>

<ul>
<li><p> a vector giving the breakpoints,
</p>
</li>
<li><p> a single number giving the number of segments.
</p>
</li></ul>
</td></tr>
<tr><td><code id="catplotmlx_+3A_plot">plot</code></td>
<td>
<p>if <code>TRUE</code> the empirical distribution is displayed, if <code>FALSE</code>
the values are returned</p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_color">color</code></td>
<td>
<p>a color to be used for the plots (default=&quot;#194280&quot;)</p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_group">group</code></td>
<td>
<p>variable to be used for defining groups (by default, &lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo; is used when it exists)</p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_facet">facet</code></td>
<td>
<p>makes subplots for different groups if <code>TRUE</code></p>
</td></tr>
<tr><td><code id="catplotmlx_+3A_labels">labels</code></td>
<td>
<p>vector of strings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/catplotmlx/ for more details.
</p>


<h3>Value</h3>

<p>a ggplot object if <code>plot=TRUE</code> ; otherwise, a list with fields:
</p>

<ul>
<li><p> color a vector of colors used for the plot 
</p>
</li>
<li><p> y a data frame with the values of the empirical distribution computed at each time point
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  catModel &lt;- inlineModel("
  [LONGITUDINAL]
  input =  {a,b}
  EQUATION:
  lp1=a-b*t
  lp2=a-b*t/2
  DEFINITION:
  y = {type=categorical, categories={1,2,3}, 
  logit(P(y&lt;=1))=lp1, logit(P(y&lt;=2))=lp2}
  ")
  
  y.out  &lt;- list(name='y', time=seq(0, 100, by=4))

  Ng  &lt;- 1000
  g1 &lt;- list(size=Ng, parameter=c(a=6,b=0.2))
  res &lt;- simulx(model=catModel, output=y.out, group=g1)
  catplotmlx(res$y)
  catplotmlx(res$y, breaks=seq(-2,102,by=8), color="purple") 
  catplotmlx(res$y, breaks=5, color="#490917") 
  
  g2 &lt;- list(size=Ng, parameter=c(a=10,b=0.2))
  res &lt;- simulx(model=catModel, output=y.out, group=list(g1,g2))
  catplotmlx(res$y) 
  catplotmlx(res$y, group="none")
  
  g3 &lt;- list(size=Ng, parameter=c(a=6,b=0.4))
  g4 &lt;- list(size=Ng, parameter=c(a=10,b=0.4))
  res &lt;- simulx(model=catModel, output=y.out, group=list(g1,g2,g3,g4))
  catplotmlx(res$y)
   
  cov &lt;- data.frame(id=levels(res$y$id), a=rep(c(6,10,6,10),each=Ng), 
                    b=rep(c(0.2,0.2,0.4,0.4),each=Ng))
  catplotmlx(res$y, group=cov) 

## End(Not run)
</code></pre>

<hr>
<h2 id='exposure'>Computation of AUC, Cmax and Cmin</h2><span id='topic+exposure'></span>

<h3>Description</h3>

<p>Compute the area under the curve, the maximum and minimum values of a function of time over a given interval or at steady state
</p>


<h3>Usage</h3>

<pre><code class='language-R'>exposure(
  model = NULL,
  output = NULL,
  group = NULL,
  treatment = NULL,
  parameter = NULL,
  data = NULL,
  project = NULL,
  settings = NULL,
  regressor = NULL,
  varlevel = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="exposure_+3A_model">model</code></td>
<td>
<p>a <code>Mlxtran</code> model used for the simulation</p>
</td></tr>
<tr><td><code id="exposure_+3A_output">output</code></td>
<td>
<p>a list  with fields: 
</p>

<ul>
<li> <p><code>name</code>: a vector of output names
</p>
</li>
<li> <p><code>time</code>: = 'steady.state' 
</p>
</li>
<li> <p><code>ntp</code>: number of time points used for computing the exposure (default=100) 
</p>
</li>
<li> <p><code>tol</code>: tolerance number, between 0 and 1, for approximating steaty-state  (default=0.01) 
</p>
</li>
<li> <p><code>ngc</code>: number of doses used for estimating the convergence rate to steaty-state  (default=5) 
</p>
</li></ul>
</td></tr>
<tr><td><code id="exposure_+3A_group">group</code></td>
<td>
<p>a list, or a list of lists, with fields: 
</p>

<ul>
<li> <p><code>size</code> : size of the group (default=1),
</p>
</li>
<li> <p><code>level</code> : level(s) of randomization,
</p>
</li>
<li> <p><code>parameter</code> : if different parameters per group are defined,
</p>
</li>
<li> <p><code>output</code> : if different outputs per group are defined,
</p>
</li>
<li> <p><code>treatment</code> : if different treatements per group are defined,
</p>
</li>
<li> <p><code>regressor</code> : if different regression variables per group are defined.
</p>
</li></ul>
</td></tr>
<tr><td><code id="exposure_+3A_treatment">treatment</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>tfd</code> : time of first dose (default=0),
</p>
</li>
<li> <p><code>ii</code> : inter dose interval (mandatory),
</p>
</li>
<li> <p><code>amount</code> : the amount for each dose,
</p>
</li>
<li> <p><code>rate</code> : the infusion rate  (default=<code>Inf</code>),
</p>
</li>
<li> <p><code>tinf</code> : the time of infusion  (default=0),
</p>
</li>
<li> <p><code>type</code> : the type of input (default=1),
</p>
</li>
<li> <p><code>target</code> : the target compartment (default=NULL). 
</p>
</li></ul>
</td></tr>
<tr><td><code id="exposure_+3A_parameter">parameter</code></td>
<td>
<p>a vector of parameters with their names and values</p>
</td></tr>
<tr><td><code id="exposure_+3A_data">data</code></td>
<td>
<p>a list</p>
</td></tr>
<tr><td><code id="exposure_+3A_project">project</code></td>
<td>
<p>the name of a Monolix project</p>
</td></tr>
<tr><td><code id="exposure_+3A_settings">settings</code></td>
<td>
<p>a list of optional settings
</p>

<ul>
<li> <p><code>result.file</code> : name of the datafile where the simulated data is written (string),
</p>
</li>
<li> <p><code>seed</code> : initialization of the random number generator (integer),
</p>
</li>
<li> <p><code>load.design</code> : TRUE/FALSE (if load.design is not defined, a test is automatically performed to check if a new design has been defined),
</p>
</li>
<li> <p><code>data.in</code> : TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>id.out</code>  : add columns id (when N=1) and group (when #group=1), TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>Nmax</code> : maximum group size used in a single call of mlxCompute (default=100)
</p>
</li></ul>
</td></tr>
<tr><td><code id="exposure_+3A_regressor">regressor</code></td>
<td>
<p>a list, or a list of lists, with fields
</p>

<ul>
<li> <p><code>name</code> : a vector of regressor names,
</p>
</li>
<li> <p><code>time</code> : a vector of times,
</p>
</li>
<li> <p><code>value</code> : a vector of values.
</p>
</li></ul>
</td></tr>
<tr><td><code id="exposure_+3A_varlevel">varlevel</code></td>
<td>
<p>a list, or a list of lists, with fields
</p>

<ul>
<li> <p><code>name</code> : a vector of names of variability levels,
</p>
</li>
<li> <p><code>time</code> : a vector of times that define the occasions.
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>Input arguments are the input arguments of Simulx (http://simulx.webpopix.org)
</p>
<p>Specific input arguments can be also used for computing the exposure at steady state,
i.e. after the administration of an &quot;infinite&quot; number of doses.              
See http://simulx.webpopix.org/exposure/ for more details.
</p>


<h3>Value</h3>

<p>A list of data frames. One data frame per output is created with columns <code>id</code> (if number of subject &gt;1),
<code>group</code> (if number of groups &gt;1), <code>t1</code> (beginning of time interval), <code>t2</code> (end of time interval),
<code>step</code> (time step), <code>auc</code> (area under the curve), <code>tmax</code> (time of maximum value), <code>cmax</code> (maximum value),
<code>tmin</code> (time of minimum value), <code>cmin</code> (minimum value).
</p>

<hr>
<h2 id='ggplotmlx'>mlxR wrapper for ggplot</h2><span id='topic+ggplotmlx'></span>

<h3>Description</h3>

<p>mlxR wrapper around <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code> with a custom theme
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ggplotmlx(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ggplotmlx_+3A_...">...</code></td>
<td>
<p>parameters passed to <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>see <code><a href="ggplot2.html#topic+ggplot">ggplot</a></code>
</p>

<hr>
<h2 id='initMlxR'>Initialize mlxR library</h2><span id='topic+initMlxR'></span>

<h3>Description</h3>

<p>Initialize mlxR library
</p>


<h3>Usage</h3>

<pre><code class='language-R'>initMlxR(path = NULL, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="initMlxR_+3A_path">path</code></td>
<td>
<p>(<em>character</em>) [optional] Path to installation directory of the Lixoft suite.
If mlxR library is not already loaded and no path is given, the directory written in the lixoft.ini file is used for initialization.</p>
</td></tr>
<tr><td><code id="initMlxR_+3A_...">...</code></td>
<td>
<p>[optional] Extra arguments passed to lixoftConnectors package when mlxR is used with a version of Lixoft(/@) software suite higher or equal to 2019R1.
</p>

<ul>
<li> <p><code>force</code> (<em>bool</em>) [optional] Should mlxR initialization overpass lixoftConnectors software switch security or not. Equals FALSE by default.
</p>
</li></ul>
</td></tr>
</table>


<h3>Value</h3>

<p>A list:
</p>

<ul>
<li> <p><code>software</code>: the software that is used (should be monolix with Rsmlx)
</p>
</li>
<li> <p><code>path</code>: the path to MonolixSuite
</p>
</li>
<li> <p><code>version</code>: the version of MonolixSuite that is used
</p>
</li>
<li> <p><code>status</code>: boolean equaling TRUE if the initialization has been successful.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
initMlxR(path = "/path/to/lixoftRuntime/")

## End(Not run)
</code></pre>

<hr>
<h2 id='inlineDataFrame'>inline data frame</h2><span id='topic+inlineDataFrame'></span>

<h3>Description</h3>

<p>utility function to inline creation of a data frame
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inlineDataFrame(str, header = TRUE, colClasses = NA, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inlineDataFrame_+3A_str">str</code></td>
<td>
<p>text representation of the data frame</p>
</td></tr>
<tr><td><code id="inlineDataFrame_+3A_header">header</code></td>
<td>
<p>see <code><a href="utils.html#topic+read.table">read.table</a></code></p>
</td></tr>
<tr><td><code id="inlineDataFrame_+3A_colclasses">colClasses</code></td>
<td>
<p>see <code><a href="utils.html#topic+read.table">read.table</a></code></p>
</td></tr>
<tr><td><code id="inlineDataFrame_+3A_...">...</code></td>
<td>
<p>see <code><a href="utils.html#topic+read.table">read.table</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='inlineModel'>inline model</h2><span id='topic+inlineModel'></span>

<h3>Description</h3>

<p>Define a model &quot;inline&quot;
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inlineModel(str, filename = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="inlineModel_+3A_str">str</code></td>
<td>
<p>model</p>
</td></tr>
<tr><td><code id="inlineModel_+3A_filename">filename</code></td>
<td>
<p>name of the temporary model file</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A temporary model file <code>filename</code> is created.  Default name is <code>"tempModel.txt"</code>. 
<code>filename="random"</code> generates a random name.
</p>


<h3>Value</h3>

<p>A Shiny app with files ui.R, server.R and model.txt
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
myModel1 &lt;- inlineModel("
[LONGITUDINAL]
EQUATION:
f = 10*exp(-0.2*t)
")

print(myModel1)

r &lt;- simulx(model=myModel1, output=list(name="f", time=0:100))

myModel2 &lt;- inlineModel("
[LONGITUDINAL]
EQUATION:
f = 10*exp(-0.2*t)
", filename="random")

print(myModel2)

## End(Not run)
</code></pre>

<hr>
<h2 id='kmplotmlx'>Kaplan Meier plot</h2><span id='topic+kmplotmlx'></span>

<h3>Description</h3>

<p>Plot empirical survival functions using the Kaplan Meier estimate.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>kmplotmlx(
  r,
  index = 1,
  level = NULL,
  time = NULL,
  cens = TRUE,
  plot = TRUE,
  color = "#e05969",
  group = NULL,
  facet = TRUE,
  labels = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="kmplotmlx_+3A_r">r</code></td>
<td>
<p>a data frame with a column &lsquo;<span class="samp">&#8288;id&#8288;</span>&rsquo;, a column &lsquo;<span class="samp">&#8288;time&#8288;</span>&rsquo;, 
a column with values and possibly a column &lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo;.</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_index">index</code></td>
<td>
<p>an integer: <code>index=k</code> means that the survival function for the k-th event is displayed. 
Default is <code>index=1</code>.</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_level">level</code></td>
<td>
<p>a number between 0 and 1:  confidence interval level.</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_time">time</code></td>
<td>
<p>a vector of time points where the survival function is evaluated.</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_cens">cens</code></td>
<td>
<p>if <code>TRUE</code> right censoring times are diplayed.</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_plot">plot</code></td>
<td>
<p>if <code>TRUE</code> the estimated survival function is displayed, if <code>FALSE</code>
the values are returned</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_color">color</code></td>
<td>
<p>color to be used for the plots (default=&quot;#e05969&quot;)</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_group">group</code></td>
<td>
<p>variable to be used for defining groups (by default, &lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo; is used when it exists)</p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_facet">facet</code></td>
<td>
<p>makes subplots for different groups if <code>TRUE</code></p>
</td></tr>
<tr><td><code id="kmplotmlx_+3A_labels">labels</code></td>
<td>
<p>vector of strings</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/kmplotmlx/ for more details.
</p>


<h3>Value</h3>

<p>a ggplot object if <code>plot=TRUE</code> ; otherwise, a list with fields:
</p>

<ul>
<li> <p><code>surv</code> a data frame with columns  <code>T</code> (time), <code>S</code> (survival), possibly <code>(S1, S2)</code> (confidence interval) and possibly <code>group</code> 
</p>
</li>
<li> <p><code>cens</code> a data frame with columns  <code>T0</code> (time), <code>S0</code> (survival) and possibly <code>group</code> 
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
tteModel1 &lt;- inlineModel("
  [LONGITUDINAL]
  input = {beta,lambda}  
  EQUATION:
  h=(beta/lambda)*(t/lambda)^(beta-1)
  DEFINITION:
  e = {type=event, maxEventNumber=1, rightCensoringTime=70, hazard=h}
  ")

  p1   &lt;- c(beta=2.5,lambda=50)
  e    &lt;- list(name='e', time=0)
  res1 &lt;- simulx(model=tteModel1, parameter=p1, output=e, group=list(size=100))
  pl1  &lt;- kmplotmlx(res1$e,level=0.95)
  print(pl1)

  p2   &lt;- c(beta=2,lambda=45)
  g1   &lt;- list(size=50, parameter=p1)
  g2   &lt;- list(size=100, parameter=p2)
  res2 &lt;- simulx(model=tteModel1, output=e, group=list(g1,g2))
  pl2  &lt;- kmplotmlx(res2$e)
  print(pl2)

## End(Not run)
</code></pre>

<hr>
<h2 id='lixoft.read.table'>Read Lixoft@ files</h2><span id='topic+lixoft.read.table'></span>

<h3>Description</h3>

<p>Utility function to read Lixoft@ formated input/output files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lixoft.read.table(file, sep = "", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="lixoft.read.table_+3A_file">file</code></td>
<td>
<p>file path of the file to read</p>
</td></tr>
<tr><td><code id="lixoft.read.table_+3A_sep">sep</code></td>
<td>
<p>separator</p>
</td></tr>
<tr><td><code id="lixoft.read.table_+3A_...">...</code></td>
<td>
<p>see <code><a href="utils.html#topic+read.table">read.table</a></code></p>
</td></tr>
</table>

<hr>
<h2 id='mlxplore'>Explore and visualize models</h2><span id='topic+mlxplore'></span>

<h3>Description</h3>

<p>Explore and visualize &lsquo;<span class="samp">&#8288;Mlxtran&#8288;</span>&rsquo; models 
with the &lsquo;<span class="samp">&#8288;Mlxplore&#8288;</span>&rsquo; software.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>mlxplore(
  model,
  parameter = NULL,
  output = NULL,
  group = NULL,
  treatment = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="mlxplore_+3A_model">model</code></td>
<td>
<p>a <code>Mlxtran</code> model</p>
</td></tr>
<tr><td><code id="mlxplore_+3A_parameter">parameter</code></td>
<td>
<p>a vector of parameters with their names and values</p>
</td></tr>
<tr><td><code id="mlxplore_+3A_output">output</code></td>
<td>
<p>a list with fields: 
</p>

<ul>
<li> <p><code>name</code>: a vector of output names
</p>
</li>
<li> <p><code>time</code>: a vector of times 
</p>
</li></ul>
</td></tr>
<tr><td><code id="mlxplore_+3A_group">group</code></td>
<td>
<p>a list with unique field: 
</p>

<ul>
<li> <p><code>treatment</code> : a list,
</p>
</li></ul>
</td></tr>
<tr><td><code id="mlxplore_+3A_treatment">treatment</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>time</code> : a vector of input times,
</p>
</li>
<li> <p><code>amount</code> : a scalar or a vector of amounts,
</p>
</li>
<li> <p><code>rate</code> : a scalar or a vector of infusion rates (default=<code>Inf</code>),
</p>
</li>
<li> <p><code>type</code> : the type of input (default=1),
</p>
</li>
<li> <p><code>target</code> : the target compartment (default=NULL). 
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/mlxplore/ for more details.
</p>

<hr>
<h2 id='monolix2simulx'>Convert a Monolix Project  into an executable for the simulator  Simulx</h2><span id='topic+monolix2simulx'></span>

<h3>Description</h3>

<p>Convert a Monolix Project  into an executable for the simulator  Simulx
</p>


<h3>Usage</h3>

<pre><code class='language-R'>monolix2simulx(
  project,
  parameter = NULL,
  group = NULL,
  open = FALSE,
  r.data = TRUE,
  fim = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="monolix2simulx_+3A_project">project</code></td>
<td>
<p>: the name of a Monolix project</p>
</td></tr>
<tr><td><code id="monolix2simulx_+3A_parameter">parameter</code></td>
<td>
<p>: string $(NameOfTypeOfParameter), the type of specific parameters to use 
example: &quot;mode&quot;, &quot;mean&quot;...</p>
</td></tr>
<tr><td><code id="monolix2simulx_+3A_group">group</code></td>
<td>
<p>: a list with the number of subjects</p>
</td></tr>
<tr><td><code id="monolix2simulx_+3A_open">open</code></td>
<td>
<p>: load the R script created if <code>open=TRUE</code></p>
</td></tr>
<tr><td><code id="monolix2simulx_+3A_r.data">r.data</code></td>
<td>
<p>: read the data if <code>r.data=TRUE</code></p>
</td></tr>
<tr><td><code id="monolix2simulx_+3A_fim">fim</code></td>
<td>
<p>: Fisher information matrix</p>
</td></tr>
</table>


<h3>Value</h3>

<p>creates a folder projectNameR  containing files : 
</p>

<ul>
<li> <p><code>projectName.R</code> :  executable R code for the simulator,
</p>
</li>
<li> <p><code>treatment.txt</code> :  contains the treatment informations,
</p>
</li>
<li> <p><code>populationParameter.txt</code> : contains the  population parameters estimated from Monolix,
</p>
</li>
<li> <p><code>individualParameter.txt</code> : contains the  individual parameters (mode/mean) estimated from Monolix (if used for the simulation),
</p>
</li>
<li> <p><code>individualCovariate.txt</code> : contains the individual covariates,
</p>
</li>
<li> <p><code>originalId.txt</code> : contains the original id's when group is used with a different size than the original one,
</p>
</li>
<li> <p><code>outputi.txt</code> : contains the output number i informations (time, id),
</p>
</li>
<li> <p><code>$(NameOfTypeOfParameter)s.txt</code> : contains the specific parameter used.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
project.file &lt;- 'monolixRuns/theophylline1_project.mlxtran'  #relative path
monolix2simulx(project=project.file,open=TRUE)
monolix2simulx(project=project.file,parameter=list("mean",c(a=0, b=0)),open=TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='pkmodel'>Easy simulation of PK models
Easy simulation of basic PK models
See http://simulx.webpopix.org/mlxr/pkmodel/ for more details.</h2><span id='topic+pkmodel'></span>

<h3>Description</h3>

<p>Easy simulation of PK models
</p>
<p>Easy simulation of basic PK models
</p>
<p>See http://simulx.webpopix.org/mlxr/pkmodel/ for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>pkmodel(time, treatment, parameter)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="pkmodel_+3A_time">time</code></td>
<td>
<p>a vector</p>
</td></tr>
<tr><td><code id="pkmodel_+3A_treatment">treatment</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>time</code> : a vector of input times,
</p>
</li>
<li> <p><code>amount</code> : a scalar or a vector of amounts,
</p>
</li>
<li> <p><code>rate</code> : a scalar or a vector of infusion rates (default=<code>Inf</code>),
</p>
</li>
<li> <p><code>tinf</code> : a scalar or a vector of infusion times (default=0),
</p>
</li></ul>
</td></tr>
<tr><td><code id="pkmodel_+3A_parameter">parameter</code></td>
<td>
<p>vector of parameters with their names and values</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'>   
## Not run: 
  adm &lt;- list(time=c(2,14,20), amount=40)
  p   &lt;- c(V=8, Cl=0.5,k12=0.3, k21=0.2)
  t   &lt;- seq(0, 30, by=0.1)
  
  res   &lt;- pkmodel(time = t, treatment = adm, parameter = p)
  
  print(ggplot(data=res, aes(x=time, y=cc)) + geom_line(size=1) +
    xlab("time (h)") + ylab("concentration (mg/L)"))
  
  adm &lt;- list(time = c(1,23,37,45), amount = c(1,0.5,2,0.3))
  p &lt;- c(Mtt=5, Ktr=1, ka=0.5, V=10, Vm=1, Km=0.6, p=0.5)
  t &lt;- seq(0, 80, by=0.1)
  
  res &lt;- pkmodel(t,adm,p)
  
  print(ggplot(data=res, aes(x=time, y=cc)) + geom_line(size=1) +
    xlab("time (h)") + ylab("concentration (mg/L)"))
  
  adm &lt;- list( time = 2, amount = 40)
  
  p &lt;- inlineDataFrame("
  id   ka   V    Cl
  1   0.5   4     1
  2     1   6     1
  3   1.5   6   1.5
  ")
  
  t &lt;- seq(0, 30, by=0.1)
  
  res &lt;- pkmodel(t,adm,p)
  
  print(ggplot(data=res, aes(x=time, y=cc, colour=id)) + geom_line(size=1) +
    xlab("time (h)") + ylab("concentration (mg/L)"))   
  adm &lt;- list(time=seq(2, 100, by=24), amount=40, rate=5)
  p &lt;- c(V=8, Cl=0.5, k12=0.3, k21=0.2, ke0=0.2)
  t &lt;- seq(0, 50, by=0.1)
  
  res &lt;- pkmodel(t,adm,p)
  
  if( require("reshape2") ){
    r &lt;- melt(res, id='time', variable.name='c')
    print(ggplot(r, aes(time,value)) + geom_line(aes(colour = c),size=1) +
            ylab('concentration') + guides(colour=guide_legend(title=NULL)) +
            theme(legend.position=c(.9, .8)))
  } 

## End(Not run)
</code></pre>

<hr>
<h2 id='prctilemlx'>Percentiles of the empiricial distribution of longitudinal data</h2><span id='topic+prctilemlx'></span>

<h3>Description</h3>

<p>Compute and display percentiles of the empiricial distribution of longitudinal data.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>prctilemlx(
  r,
  col = NULL,
  number = 8,
  level = 80,
  plot = TRUE,
  color = "#9a35ff",
  group = NULL,
  facet = TRUE,
  labels = NULL,
  band = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="prctilemlx_+3A_r">r</code></td>
<td>
<p>a data frame with a column &lsquo;<span class="samp">&#8288;id&#8288;</span>&rsquo;, a column &lsquo;<span class="samp">&#8288;time&#8288;</span>&rsquo; and a column with values.
The times should be the same for each individual.</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_col">col</code></td>
<td>
<p>a vector with the three column indexes for &lsquo;<span class="samp">&#8288;id&#8288;</span>&rsquo;, &lsquo;<span class="samp">&#8288;time/x&#8288;</span>&rsquo; and &lsquo;<span class="samp">&#8288;y&#8288;</span>&rsquo;. Default = c(1, 2,3).</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_number">number</code></td>
<td>
<p>the number of intervals (i.e. the number of percentiles minus 1).</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_level">level</code></td>
<td>
<p>the largest interval (i.e. the difference between the lowest and the highest percentile).</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_plot">plot</code></td>
<td>
<p>if <code>TRUE</code> the empirical distribution is displayed, if <code>FALSE</code>
the values are returned</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_color">color</code></td>
<td>
<p>a color to be used for the plots (default=&quot;#9a35ff&quot;)</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_group">group</code></td>
<td>
<p>variable to be used for defining groups (by default, &lsquo;<span class="samp">&#8288;group&#8288;</span>&rsquo; is used when it exists)</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_facet">facet</code></td>
<td>
<p>makes subplots for different groups if <code>TRUE</code></p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_labels">labels</code></td>
<td>
<p>vector of strings</p>
</td></tr>
<tr><td><code id="prctilemlx_+3A_band">band</code></td>
<td>
<p>is deprecated (use number and level instead) ; a list with two fields
</p>

<ul>
<li> <p><code>number</code> the number of intervals (i.e. the number of percentiles minus 1).
</p>
</li>
<li> <p><code>level</code> the largest interval (i.e. the difference between the lowest and the highest percentile).
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/prctilemlx/ for more details.
</p>


<h3>Value</h3>

<p>a ggplot object if <code>plot=TRUE</code> ; otherwise, a list with fields:
</p>

<ul>
<li><p> proba a vector of probabilities of length <code>band$number+1</code> 
</p>
</li>
<li><p> color a vector of colors used for the plot of length <code>band$number</code>
</p>
</li>
<li><p> y a data frame with the values of the empirical percentiles computed at each time point
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
  myModel &lt;- inlineModel("
  [LONGITUDINAL]
  input = {ka, V, Cl}
  EQUATION:
  C = pkmodel(ka,V,Cl)
  
  [INDIVIDUAL]
  input = {ka_pop, V_pop, Cl_pop, omega_ka, omega_V, omega_Cl}
  DEFINITION:
  ka = {distribution=lognormal, reference=ka_pop, sd=omega_ka}
  V  = {distribution=lognormal, reference=V_pop,  sd=omega_V }
  Cl = {distribution=lognormal, reference=Cl_pop, sd=omega_Cl}
  ")
  
  N=2000
  
  pop.param   &lt;- c(
    ka_pop  = 1,    omega_ka  = 0.5,
    V_pop   = 10,   omega_V   = 0.4,
    Cl_pop  = 1,    omega_Cl  = 0.3)
    
  res &lt;- simulx(model     = myModel,
                parameter = pop.param,
                treatment = list(time=0, amount=100),
                group     = list(size=N, level='individual'),
                output    = list(name='C', time=seq(0,24,by=0.1)))
  # res$C is a data.frame with 2000x241=482000 rows and 3 columns
  head(res$C)
  # we can display the empirical percentiles of C using the default 
  # settings (i.e. percentiles of order 10%, 20%, ... 90%)
  prctilemlx(res$C)
  # The 3 quartiles (i.e. percentiles of order 25%, 50% and 75%) are displayed by 
  # selecting a 50% interval splitted into 2 subintervals
  prctilemlx(res$C, number=2, level=50)
  # A one 90% interval can be displayed using only one interval
  prctilemlx(res$C, number=1, level=90)
  # or 75 subintervals in order to better represent the continuous distribution 
  # of the data within this interval
  prctilemlx(res$C, number=75, level=90)
  # prctilemlx produces a ggplot object that can be modified
  pl &lt;- prctilemlx(res$C, number=4, level=80) 
  pl + ylab("concentration") + ggtitle("predictive distribution")
  # The percentiles are not plotted by setting plot=FALSE
  pr.out &lt;- prctilemlx(res$C, number=4, level=80, plot=FALSE)
  print(pr.out$proba)
  print(pr.out$color)
  print(pr.out$y[1:5,])

## End(Not run)
</code></pre>

<hr>
<h2 id='read.vector'>Reads  a table into a vector</h2><span id='topic+read.vector'></span>

<h3>Description</h3>

<p>Reads  a table into a vector
</p>


<h3>Usage</h3>

<pre><code class='language-R'>read.vector(f, header = FALSE, sep = "", quote = "\"'")
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="read.vector_+3A_f">f</code></td>
<td>
<p>: the table</p>
</td></tr>
<tr><td><code id="read.vector_+3A_header">header</code></td>
<td>
<p>: bool, use the header or not</p>
</td></tr>
<tr><td><code id="read.vector_+3A_sep">sep</code></td>
<td>
<p>: the separator</p>
</td></tr>
<tr><td><code id="read.vector_+3A_quote">quote</code></td>
<td>
<p>: the quote character</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the vector
</p>

<hr>
<h2 id='readDatamlx'>Read formatted data file</h2><span id='topic+readDatamlx'></span>

<h3>Description</h3>

<p>Read data in a Monolix/NONMEM format
</p>


<h3>Usage</h3>

<pre><code class='language-R'>readDatamlx(
  project = NULL,
  data = NULL,
  out.data = FALSE,
  nbSSDoses = 10,
  obs.rows = FALSE,
  error.iov = FALSE,
  filter = NULL,
  datafile = NULL,
  header = NULL,
  infoProject = NULL,
  addl.ss = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="readDatamlx_+3A_project">project</code></td>
<td>
<p>a Monolix project</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_data">data</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>dataFile</code>: path of a formatted data file
</p>
</li>
<li> <p><code>headerTypes</code>: a vector of strings
</p>
</li></ul>
</td></tr>
<tr><td><code id="readDatamlx_+3A_out.data">out.data</code></td>
<td>
<p>TRUE/FALSE (default=FALSE) returns the original data as a table and some information about the Monolix project</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_nbssdoses">nbSSDoses</code></td>
<td>
<p>number of additional doses to use for steady-state (default=10)</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_obs.rows">obs.rows</code></td>
<td>
<p>a list of observation indexes</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_error.iov">error.iov</code></td>
<td>
<p>TRUE/FALSE (default=TRUE) returns an error message if occasions are overlapping</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_filter">filter</code></td>
<td>
<p>filter to apply to the data (string)</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_datafile">datafile</code></td>
<td>
<p>(deprecated) a formatted data file</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_header">header</code></td>
<td>
<p>(deprecated) a vector of strings</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_infoproject">infoProject</code></td>
<td>
<p>(deprecated) an xmlfile</p>
</td></tr>
<tr><td><code id="readDatamlx_+3A_addl.ss">addl.ss</code></td>
<td>
<p>(deprecated) number of additional doses to use for steady-state  (default=10)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/readdatamlx/ for more details.
</p>


<h3>Value</h3>

<p>A list of data frames
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
# using a Monolix project:
d &lt;- readDatamlx(project='projects/warfarinPK.mlxtran')


# using a data file:
warfarinPK &lt;- list(dataFile = "data/warfarinPK.csv",
                   headerTypes = c("id", "time", "observation", "amount", 
                                   "contcov", "contcov", "catcov"),
                   administration = "oral")
d &lt;- readDatamlx(data=warfarinPK)


## End(Not run)
</code></pre>

<hr>
<h2 id='shinymlx'>Automatic code generation for Shiny applications</h2><span id='topic+shinymlx'></span>

<h3>Description</h3>

<p>Creates a Shiny application for longitudinal data model
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shinymlx(
  model,
  parameter = NULL,
  output = NULL,
  treatment = NULL,
  regressor = NULL,
  group = NULL,
  data = NULL,
  appname = "shinymlxApp",
  style = "basic",
  settings = NULL,
  title = " "
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shinymlx_+3A_model">model</code></td>
<td>
<p>a <code>Mlxtran</code> model used for the simulation</p>
</td></tr>
<tr><td><code id="shinymlx_+3A_parameter">parameter</code></td>
<td>
<p>a vector, or a list of shiny widgets</p>
</td></tr>
<tr><td><code id="shinymlx_+3A_output">output</code></td>
<td>
<p>a list - or a list of lists - with fields: 
</p>

<ul>
<li> <p><code>name</code>: a vector of output names
</p>
</li>
<li> <p><code>time</code>: a vector of times, or a vector (min, max, step)
</p>
</li></ul>
</td></tr>
<tr><td><code id="shinymlx_+3A_treatment">treatment</code></td>
<td>
<p>a list with fields 
</p>

<ul>
<li> <p><code>tfd</code> : first time of dose,
</p>
</li>
<li> <p><code>amount</code> : amount,
</p>
</li>
<li> <p><code>nd</code> : number of doses,
</p>
</li>
<li> <p><code>ii</code> : interdose interval,
</p>
</li>
<li> <p><code>type</code> : the type of input,
</p>
</li></ul>

<p>Input argument of Simulx can also be used,  i.e. a list with fields <code>time</code>, 
<code>amount</code>, <code>rate</code>, <code>tinf</code>, <code>type</code>, <code>target</code>.</p>
</td></tr>
<tr><td><code id="shinymlx_+3A_regressor">regressor</code></td>
<td>
<p>a list, or a list of lists, with fields
</p>

<ul>
<li> <p><code>name</code> : a vector of regressor names,
</p>
</li>
<li> <p><code>time</code> : a vector of times,
</p>
</li>
<li> <p><code>value</code> : a vector of values.
</p>
</li></ul>
</td></tr>
<tr><td><code id="shinymlx_+3A_group">group</code></td>
<td>
<p>a list, or a list of lists, with fields: 
</p>

<ul>
<li> <p><code>size</code> : size of the group (default=1),
</p>
</li>
<li> <p><code>level</code> : level(s) of randomization,
</p>
</li>
<li> <p><code>parameter</code> : if different parameters per group are defined,
</p>
</li>
<li> <p><code>output</code> : if different outputs per group are defined,
</p>
</li>
<li> <p><code>treatment</code> : if different treatements per group are defined,
</p>
</li>
<li> <p><code>regressor</code> : if different regression variables per group are defined.
</p>
</li></ul>
</td></tr>
<tr><td><code id="shinymlx_+3A_data">data</code></td>
<td>
<p>data to display with the plot (either a data frame or the name of a file)</p>
</td></tr>
<tr><td><code id="shinymlx_+3A_appname">appname</code></td>
<td>
<p>the name of the application (and possibly its path)</p>
</td></tr>
<tr><td><code id="shinymlx_+3A_style">style</code></td>
<td>
<p>the style of the Shiny app
</p>

<ul>
<li> <p><code>"basic"</code>: basic Shiny app with a single side bar (default)
</p>
</li>
<li> <p><code>"navbar1"</code>: navigation bar and tabPanels (including outputs)
</p>
</li>
<li> <p><code>"navbar2"</code>: navigation bar and tabPanels (outputs separated)
</p>
</li>
<li> <p><code>"dashboard1"</code> : Shiny dashboard,
</p>
</li></ul>
</td></tr>
<tr><td><code id="shinymlx_+3A_settings">settings</code></td>
<td>
<p>a list of settings
</p>

<ul>
<li> <p><code>"tabstyle"</code> : look of the tabs c(&quot;tabs&quot;,&quot;pills&quot;),
</p>
</li>
<li> <p><code>"select.x"</code> : display the list of variables available for the x-axis c(TRUE,FALSE),
</p>
</li>
<li> <p><code>"select.y"</code> : display the list of variables available for the y-axis c(TRUE,FALSE),
</p>
</li>
<li> <p><code>"select.log"</code> : log scale option c(TRUE,FALSE),
</p>
</li>
<li> <p><code>"select.ref"</code> : reference curves option c(TRUE,FALSE)
</p>
</li></ul>
</td></tr>
<tr><td><code id="shinymlx_+3A_title">title</code></td>
<td>
<p>the title of the application</p>
</td></tr>
</table>


<h3>Details</h3>

<p>shinymlx automatically generates files ui.R and server.R required 
for a Shiny application.
</p>
<p>Elements of <code>parameters</code> and <code>treatment</code> can be either scalars or lists.
A scalar automatically generates a slider with default minimum and maximum values and default step. 
A list may contain the type of widget (&quot;slider&quot;, &quot;select&quot;, &quot;numeric&quot;) and the settings defining the widget: 
(value, min, max, step) for <code>slider</code>, (selected, choices) for <code>select</code> and
value for <code>numeric</code>.
</p>
<p>See http://simulx.webpopix.org/mlxr/shinymlx/ for more details.
</p>


<h3>Value</h3>

<p>A Shiny app with files ui.R, server.R and model.txt
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
library(mlxR)
PKPDmodel &lt;- inlineModel("
[LONGITUDINAL] 
input={ka,V,Cl,Imax,IC50,S0,kout}
EQUATION:
C     = pkmodel(ka, V, Cl)
E_0   = S0 
ddt_E = kout*((1-Imax*C/(C+IC50))*S0- E)  
")

p1  &lt;- c(ka=0.5, V=10, Cl=1)
p2  &lt;- c(Imax=0.5, IC50=0.03, S0=100, kout=0.1)
adm &lt;- list(tfd=5, nd=15, ii=12, amount=1)
f1  &lt;- list(name = 'C', time = seq(0, 250, by=1))
f2  &lt;- list(name = 'E', time = seq(0, 250, by=1))
f   &lt;- list(f1, f2)

shinymlx(model=PKPDmodel, treatment=adm, parameter=list(p1,p2), output=f,
         style="dashboard1")

#------------------------------------------------------------------------
p1 &lt;- list(
  ka    = list(widget="slider", value=0.5, min=0.1, max=2,  step=0.1),
  V     = list(widget="slider", value=10,  min=2,   max=20, step=2),
  Cl    = list(widget="slider", value=1,   min=0.1, max=2,  step=0.1)
)  
adm &lt;- list(
  tfd    = list(widget="slider", value=5,  min=0, max=100, step=5),
  nd     = list(widget="numeric", value=15),
  ii     = list(widget="select", selected=12, choices=c(3,6,12,18,24)),
  amount = list(widget="slider", value=40, min=0, max=50, step=5)
)
s &lt;- list(select.x=FALSE, select.y=FALSE)
shinymlx(model=PKPDmodel, treatment=adm, parameter=list(p1,p2), output=f, 
         style="navbar1", settings=s)

## End(Not run)
</code></pre>

<hr>
<h2 id='simpopmlx'>Population parameters simulation</h2><span id='topic+simpopmlx'></span>

<h3>Description</h3>

<p>Draw population parameters using the covariance matrix of the estimates.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simpopmlx(
  n = 1,
  project = NULL,
  fim = "needed",
  parameter = NULL,
  corr = NULL,
  kw.max = 100
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simpopmlx_+3A_n">n</code></td>
<td>
<p>the number of vectors of population parameters (default = 1),</p>
</td></tr>
<tr><td><code id="simpopmlx_+3A_project">project</code></td>
<td>
<p>a Monolix project, assuming that the Fisher information Matrix was estimated by Monolix.</p>
</td></tr>
<tr><td><code id="simpopmlx_+3A_fim">fim</code></td>
<td>
<p>the Fisher Information Matrix estimated by Monolix. fim=&quot;sa&quot;, &quot;lin&quot; (default=&quot;sa&quot;)</p>
</td></tr>
<tr><td><code id="simpopmlx_+3A_parameter">parameter</code></td>
<td>
<p>a data frame with a column &lsquo;<span class="samp">&#8288;pop.param&#8288;</span>&rsquo; (no default), a column &lsquo;<span class="samp">&#8288;sd&#8288;</span>&rsquo; (no default), 
possibly a column &lsquo;<span class="samp">&#8288;trans&#8288;</span>&rsquo; (default ='N') and possibly columns &lsquo;<span class="samp">&#8288;lim.a&#8288;</span>&rsquo; (default=0) and
&lsquo;<span class="samp">&#8288;lim.b&#8288;</span>&rsquo; (default=1). Only when project is not used.</p>
</td></tr>
<tr><td><code id="simpopmlx_+3A_corr">corr</code></td>
<td>
<p>correlation matrix of the population parameters (default = identity). Only when project is not used.</p>
</td></tr>
<tr><td><code id="simpopmlx_+3A_kw.max">kw.max</code></td>
<td>
<p>maximum number of trials for generating a positive definite covariance matrix (default = 100)</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/simpopmlx/ for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
project.file &lt;- 'monolixRuns/theophylline1_project.mlxtran'  #relative path
pop1 &lt;- simpopmlx(n=3, project=project.file)

## End(Not run)
</code></pre>

<hr>
<h2 id='simulx'>Simulation of mixed effects models and longitudinal data</h2><span id='topic+simulx'></span>

<h3>Description</h3>

<p>Compute predictions and sample data from <code>Mlxtran</code> and <code>R</code> models
</p>


<h3>Usage</h3>

<pre><code class='language-R'>simulx(
  model = NULL,
  parameter = NULL,
  output = NULL,
  treatment = NULL,
  regressor = NULL,
  varlevel = NULL,
  group = NULL,
  data = NULL,
  project = NULL,
  nrep = 1,
  npop = NULL,
  fim = NULL,
  result.folder = NULL,
  result.file = NULL,
  stat.f = "statmlx",
  addlines = NULL,
  settings = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="simulx_+3A_model">model</code></td>
<td>
<p>a <code>Mlxtran</code>, or <code>R</code> model used for the simulation</p>
</td></tr>
<tr><td><code id="simulx_+3A_parameter">parameter</code></td>
<td>
<p>a vector of parameters with their names and values</p>
</td></tr>
<tr><td><code id="simulx_+3A_output">output</code></td>
<td>
<p>a list (or list of lists) with fields: 
</p>

<ul>
<li> <p><code>name</code>: a vector of output names
</p>
</li>
<li> <p><code>time</code>: a vector of times (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>lloq</code>: lower limit of quantification (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>uloq</code>: upper limit of quantification (only for the longitudinal outputs)
</p>
</li>
<li> <p><code>limit</code>: lower bound of the censoring interval (only for the longitudinal outputs)
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_treatment">treatment</code></td>
<td>
<p>a list with fields
</p>

<ul>
<li> <p><code>time</code> : a vector of input times,
</p>
</li>
<li> <p><code>amount</code> : a scalar or a vector of amounts,
</p>
</li>
<li> <p><code>rate</code> : a scalar or a vector of infusion rates (default=<code>Inf</code>),
</p>
</li>
<li> <p><code>tinf</code> : a scalar or a vector of infusion times (default=0),
</p>
</li>
<li> <p><code>type</code> : the type of input (default=1),
</p>
</li>
<li> <p><code>target</code> : the target compartment (default=NULL). 
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_regressor">regressor</code></td>
<td>
<p>a list, or a list of lists, with fields
</p>

<ul>
<li> <p><code>name</code> : a vector of regressor names,
</p>
</li>
<li> <p><code>time</code> : a vector of times,
</p>
</li>
<li> <p><code>value</code> : a vector of values.
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_varlevel">varlevel</code></td>
<td>
<p>(IOV supported by mlxR &gt;= 3.2.2) a list (or a dataframe) with fields: 
</p>

<ul>
<li> <p><code>name</code> : name of the variable which defines the occasions,
</p>
</li>
<li> <p><code>time</code> : a vector of times (beginnings of occasions) ,
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_group">group</code></td>
<td>
<p>a list, or a list of lists, with fields: 
</p>

<ul>
<li> <p><code>size</code> : size of the group (default=1),
</p>
</li>
<li> <p><code>level</code> : level(s) of randomization,
</p>
</li>
<li> <p><code>parameter</code> : if different parameters per group are defined,
</p>
</li>
<li> <p><code>output</code> : if different outputs per group are defined,
</p>
</li>
<li> <p><code>treatment</code> : if different treatements per group are defined,
</p>
</li>
<li> <p><code>regressor</code> : if different regression variables per group are defined.
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_data">data</code></td>
<td>
<p>a list (output of simulx when settings$data.in==TRUE)</p>
</td></tr>
<tr><td><code id="simulx_+3A_project">project</code></td>
<td>
<p>the name of a Monolix project</p>
</td></tr>
<tr><td><code id="simulx_+3A_nrep">nrep</code></td>
<td>
<p>number of replicates</p>
</td></tr>
<tr><td><code id="simulx_+3A_npop">npop</code></td>
<td>
<p>number of population parameters to draw randomly</p>
</td></tr>
<tr><td><code id="simulx_+3A_fim">fim</code></td>
<td>
<p>a string with the Fisher Information Matrix to be used</p>
</td></tr>
<tr><td><code id="simulx_+3A_result.folder">result.folder</code></td>
<td>
<p>the name of the folder where the outputs of simulx should be stored</p>
</td></tr>
<tr><td><code id="simulx_+3A_result.file">result.file</code></td>
<td>
<p>the name of the single file where the outputs of simulx should be saved</p>
</td></tr>
<tr><td><code id="simulx_+3A_stat.f">stat.f</code></td>
<td>
<p>a R function for computing some summary (mean, quantiles, survival,...) of the simulated data. Default = &quot;statmlx&quot;.</p>
</td></tr>
<tr><td><code id="simulx_+3A_addlines">addlines</code></td>
<td>
<p>a list with fields: 
</p>

<ul>
<li> <p><code>section</code>: a string (default = &quot;[LONGITUDINAL]&quot;),
</p>
</li>
<li> <p><code>block</code>: a string (default = &quot;EQUATION:&quot;),
</p>
</li>
<li> <p><code>formula</code>: string, or vector of strings, to be inserted .
</p>
</li></ul>
</td></tr>
<tr><td><code id="simulx_+3A_settings">settings</code></td>
<td>
<p>a list of optional settings
</p>

<ul>
<li> <p><code>seed</code> : initialization of the random number generator (integer),
</p>
</li>
<li> <p><code>load.design</code> : TRUE/FALSE (if load.design is not defined, a test is automatically performed to check if a new design has been defined),
</p>
</li>
<li> <p><code>data.in</code> : TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>id.out</code>  : add columns id (when N=1) and group (when #group=1), TRUE/FALSE (default=FALSE)
</p>
</li>
<li> <p><code>kw.max</code> : maximum number of trials for generating a positive definite covariance matrix (default = 100) 
</p>
</li>
<li> <p><code>sep</code> : the field separator character (default = &quot;,&quot;) 
</p>
</li>
<li> <p><code>digits</code> : number of decimal digits in output files (default = 5) 
</p>
</li>
<li> <p><code>disp.iter</code> : TRUE/FALSE (default = FALSE) display replicate and population numbers
</p>
</li>
<li> <p><code>replacement</code> : TRUE/FALSE (default = FALSE) sample id's with/without replacement
</p>
</li>
<li> <p><code>out.trt</code> : TRUE/FALSE (default = TRUE) output of simulx includes treatment
</p>
</li>
<li> <p><code>format.original</code> : TRUE/FALSE (default = FALSE) with a Monolix project, write data in result.file using the original format of the data file
</p>
</li></ul>
</td></tr>
</table>


<h3>Details</h3>

<p>simulx takes advantage of the modularity of hierarchical models for simulating 
different components of a model: models for population parameters, individual 
covariates, individual parameters and longitudinal data.
</p>
<p>Furthermore, <code>simulx</code> allows to draw different types of longitudinal data, 
including continuous, count, categorical, and time-to-event data.
</p>
<p>The models are encoded using either the model coding language &lsquo;<span class="samp">&#8288;Mlxtran&#8288;</span>&rsquo;, or &lsquo;<span class="samp">&#8288;R&#8288;</span>&rsquo;. 
&lsquo;<span class="samp">&#8288;Mlxtran&#8288;</span>&rsquo; models are automatically converted into C++ codes, 
compiled on the fly and linked to R using the &lsquo;<span class="samp">&#8288;Rcpp&#8288;</span>&rsquo; package. 
That allows one to implement very easily complex models and to take advantage 
of the numerical sovers used by the C++ &lsquo;<span class="samp">&#8288;mlxLibrary&#8288;</span>&rsquo;.
</p>
<p>See http://simulx.webpopix.org for more details.
</p>


<h3>Value</h3>

<p>A list of data frames. Each data frame is an output of simulx
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
myModel &lt;- inlineModel("
[LONGITUDINAL]
input = {A, k, c, a}
EQUATION:
t0    = 0 
f_0   = A
ddt_f = -k*f/(c+f)
DEFINITION:
y = {distribution=normal, prediction=f, sd=a}
[INDIVIDUAL]
input = {k_pop, omega}
DEFINITION:
k = {distribution=lognormal, prediction=k_pop, sd=omega}
")
f &lt;- list(name='f', time=seq(0, 30, by=0.1))
y &lt;- list(name='y', time=seq(0, 30, by=2))
res &lt;- simulx(model     = 'model/home.txt', 
              parameter = c(A=100, k_pop=6, omega=0.3, c=10, a=2), 
              output    = list(f,y,"k"),
              group     = list(size=4, level='individual'))

plot(ggplotmlx() + geom_line(data=res$f, aes(x=time, y=f, colour=id)) +
     geom_point(data=res$y, aes(x=time, y=y, colour=id)))
print(res$parameter)

## End(Not run)

</code></pre>

<hr>
<h2 id='statmlx'>Summary of data</h2><span id='topic+statmlx'></span>

<h3>Description</h3>

<p>Compute statistical summaries (mean, quantile, variance, survival rate,...)
</p>


<h3>Usage</h3>

<pre><code class='language-R'>statmlx(r, FUN = "mean", probs = c(0.05, 0.5, 0.95), surv.time = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="statmlx_+3A_r">r</code></td>
<td>
<p>a data frame</p>
</td></tr>
<tr><td><code id="statmlx_+3A_fun">FUN</code></td>
<td>
<p>a string, or a vector of strings, with the name of the functions to apply to the result of the simulation</p>
</td></tr>
<tr><td><code id="statmlx_+3A_probs">probs</code></td>
<td>
<p>a vector of quantiles  between 0 and 1. Only used when &quot;quantile&quot; has been defined in <code>FUN</code></p>
</td></tr>
<tr><td><code id="statmlx_+3A_surv.time">surv.time</code></td>
<td>
<p>a scalar or a vector of times. Only used when &quot;event&quot; has been defined in <code>type</code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/stamlx for more details.
</p>


<h3>Value</h3>

<p>A data frame.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
modelPK &lt;- inlineModel("
[LONGITUDINAL] 
input={V,Cl,alpha, beta,b}

EQUATION:
C = pkmodel(V, Cl)
h = alpha*exp(beta*C)
g = b*C

DEFINITION:
y = {distribution=normal, prediction=C, sd=g}
e = {type=event, maxEventNumber=1, rightCensoringTime=30, hazard=h}

[INDIVIDUAL]
input={V_pop,Cl_pop,omega_V,omega_Cl}

DEFINITION:
V     = {distribution=lognormal,   prediction=V_pop,    sd=omega_V}
Cl    = {distribution=lognormal,   prediction=Cl_pop,   sd=omega_Cl}
")

adm  &lt;- list(amount=100, time=0)
p &lt;- c(V_pop=10, Cl_pop=1, omega_V=0.2, omega_Cl=0.2, alpha=0.02, beta=0.1, b=0.1)
out.y &lt;- list(name=c('y'), time=seq(0,to=25,by=5))
out.e &lt;- list(name=c('e'), time=0)
out.p &lt;- c("V", "Cl")
out   &lt;- list(out.y, out.e, out.p)
g &lt;- list(size=100, level='individual')
res1 &lt;- simulx(model=modelPK, treatment=adm, parameter=p, output=out, group=g)

statmlx(res1$parameter, FUN = "mean", probs = c(0.05, 0.5, 0.95))
statmlx(res1$parameter, FUN = "quantile", probs = c(0.05, 0.5, 0.95))
statmlx(res1$parameter, FUN = c("sd", "quantile"), probs = c(0.05, 0.95))
statmlx(res1$y, FUN = c("mean", "sd", "quantile"), probs = c(0.05, 0.95))
statmlx(res1$e, surv.time=c(10,20))

res2 &lt;- simulx(model=modelPK, treatment=adm, parameter=p, output=out, group=g, nrep=3)
statmlx(res2$parameter, FUN = c("sd", "quantile"), probs = c(0.05, 0.95))
statmlx(res2$y, FUN = c("mean", "sd", "quantile"), probs = c(0.05, 0.95))
statmlx(res2$e, surv.time=c(10,20,30))

## End(Not run)
</code></pre>

<hr>
<h2 id='writeDatamlx'>Write formatted data file</h2><span id='topic+writeDatamlx'></span>

<h3>Description</h3>

<p>Write data contained in a list of dataframes in a single file (NONMEM/Monolix format)
or in several files as tables
</p>


<h3>Usage</h3>

<pre><code class='language-R'>writeDatamlx(
  r,
  result.file = NULL,
  result.folder = NULL,
  sep = ",",
  ext = NULL,
  digits = 5,
  app.file = F,
  app.dir = F,
  project = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="writeDatamlx_+3A_r">r</code></td>
<td>
<p>a list of dataframes</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_result.file">result.file</code></td>
<td>
<p>a string with the name of the file</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_result.folder">result.folder</code></td>
<td>
<p>a string with the name of the folder</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_sep">sep</code></td>
<td>
<p>(default = &quot;,&quot;)</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_ext">ext</code></td>
<td>
<p>a string with the extension of the file names</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_digits">digits</code></td>
<td>
<p>(default = 5)</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_app.file">app.file</code></td>
<td>
<p>TRUE/FALSE (default=FALSE) append to file</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_app.dir">app.dir</code></td>
<td>
<p>TRUE/FALSE (default=FALSE) append to dir</p>
</td></tr>
<tr><td><code id="writeDatamlx_+3A_project">project</code></td>
<td>
<p>A Monolix project</p>
</td></tr>
</table>


<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/writedatamlx/ for more details.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
modelPK &lt;- inlineModel("
[LONGITUDINAL]
input = {V, Cl, a1}
EQUATION:
Cc = pkmodel(V, Cl)
DEFINITION:
y1 ={distribution=lognormal, prediction=Cc, sd=a1}
")
adm  &lt;- list(amount=100, time=seq(0,50,by=12))
p &lt;- c(V=10, Cl=1, a1=0.1)
y1 &lt;- list(name=c('y1'), time=seq(5,to=50,by=5))
res &lt;- simulx(model=modelPK, treatment=adm, parameter=p, output=y1)
writeDatamlx(res, result.file="res.csv")
writeDatamlx(res, result.file="res.txt", sep="\t")
writeDatamlx(res, result.folder="res")

## End(Not run)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
