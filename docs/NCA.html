<!DOCTYPE html><html><head><title>Help for package NCA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {NCA}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#NCA-package'><p>Necessary Condition Analysis</p></a></li>
<li><a href='#ceilings'><p>a set of all available ceiling techniques</p></a></li>
<li><a href='#line.colors'><p>a set defining the line colors for the plots</p></a></li>
<li><a href='#line.types'><p>a set defining the line types for the plots</p></a></li>
<li><a href='#line.width'><p>parameter defining the width of the lines in the plots</p></a></li>
<li><a href='#nca'><p>Run a basic NCA analyses on a data set</p></a></li>
<li><a href='#nca_analysis'><p>Run NCA analyses on a data set</p></a></li>
<li><a href='#nca_outliers'><p>Outlier detection</p></a></li>
<li><a href='#nca_output'><p>display the result of the NCA analysis</p></a></li>
<li><a href='#nca_power'><p>Function to evaluate power</p></a></li>
<li><a href='#nca_random'><p>generating random data that meets necessity</p></a></li>
<li><a href='#nca.example'><p>NCA example data with 2 independent and 1 dependent variables</p></a></li>
<li><a href='#nca.example2'><p>NCA example data with 3 independent and 1 dependent variables</p></a></li>
<li><a href='#point.color'><p>parameter defining the point color in the plots</p></a></li>
<li><a href='#point.type'><p>parameter defining the plotting symbol in the plots</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Necessary Condition Analysis</td>
</tr>
<tr>
<td>Version:</td>
<td>4.0.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-02-23</td>
</tr>
<tr>
<td>Author:</td>
<td>Jan Dul &lt;jdul@rsm.nl&gt;</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Govert Buijs &lt;buijs@rsm.nl&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Performs a Necessary Condition Analysis (NCA). (Dul, J. 2016. Necessary Condition Analysis (NCA). &rdquo;Logic and Methodology of 'Necessary but not Sufficient' causality." Organizational Research Methods 19(1), 10-52) &lt;<a href="https://doi.org/10.1177%2F1094428115584005">doi:10.1177/1094428115584005</a>&gt;.
  NCA identifies necessary (but not sufficient) conditions in datasets, where x causes (e.g. precedes) y. Instead of drawing a regression line &rdquo;through the middle of the data&rdquo; in an xy-plot, NCA draws the ceiling line. The ceiling line y = f(x) separates the area with observations from the area without observations.
  (Nearly) all observations are below the ceiling line: y &lt;= f(x). The empty zone is in the upper left hand corner of the xy-plot (with the convention that the x-axis is &rdquo;horizontal&rdquo; and the y-axis is &rdquo;vertical&rdquo; and that values increase &rdquo;upwards&rdquo; and &rdquo;to the right&rdquo;). The ceiling line is a (piecewise) linear non-decreasing line: a linear step function or a straight line. It indicates which level of x (e.g. an effort or input) is necessary but not sufficient for a (desired) level of y (e.g. good performance or output). A quick start guide for using this package can be found here: <a href="https://repub.eur.nl/pub/78323/">https://repub.eur.nl/pub/78323/</a> or <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2624981">https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2624981</a>.</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://www.erim.eur.nl/necessary-condition-analysis/">https://www.erim.eur.nl/necessary-condition-analysis/</a></td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.5.0)</td>
</tr>
<tr>
<td>Imports:</td>
<td>gplots, quantreg, KernSmooth, lpSolve, ggplot2, doParallel,
foreach, iterators, plotly, truncnorm</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Suggests:</td>
<td>testthat</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-22 12:46:06 UTC; govert</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-23 09:30:15 UTC</td>
</tr>
</table>
<hr>
<h2 id='NCA-package'>Necessary Condition Analysis</h2><span id='topic+NCA-package'></span>

<h3>Description</h3>

<p>The NCA package implements Necessary Condition Analysis (NCA) as developed by Dul (2016). For running the NCA package a data file (e.g., mydata.csv, which contains the input data) must be available. An example data file (presented in above article) is included in the package. The user must load the data and call the nca function.</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package:  </td><td style="text-align: left;"> NCA</td>
</tr>
<tr>
 <td style="text-align: left;">
Type:     </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version:  </td><td style="text-align: left;"> 4.0.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date:     </td><td style="text-align: left;"> 2024-02-23</td>
</tr>
<tr>
 <td style="text-align: left;">
License:  </td><td style="text-align: left;"> GPL (&gt;= 3)</td>
</tr>

</table>



<h3>Author(s)</h3>

<p>Author: Jan Dul <a href="mailto:jdul@rsm.nl">jdul@rsm.nl</a><br />
Maintainer: Govert Buijs <a href="mailto:buijs@rsm.nl">buijs@rsm.nl</a>
</p>


<h3>References</h3>

<p>Dul, J. 2016. Necessary Condition Analysis (NCA).Logic and methodology of 'necessary but not sufficient' causality.
Organizational Research Methods 19(1), 10-52. doi: <a href="https://doi.org/10.1177/1094428115584005">10.1177/1094428115584005</a><br />
Dul, J. (2020). Conducting Necessary Condition Analysis. Sage publishers. ISBN: 9781526460141.
<a href="https://uk.sagepub.com/en-gb/eur/conducting-necessary-condition-analysis-for-business-and-management-students/book262898">https://uk.sagepub.com/en-gb/eur/conducting-necessary-condition-analysis-for-business-and-management-students/book262898</a><br />
Dul, J., van der Laan, E., &amp; Kuik, R. (2020). A statistical significance test for Necessary Condition Analysis. Organizational Research Methods, 23(2), 385-395.
doi: <a href="https://doi.org/10.1177/1094428118795272">10.1177/1094428118795272</a>
</p>


<h3>See Also</h3>

<p><code><a href="#topic+nca_analysis">nca_analysis</a></code>, <code><a href="#topic+nca_output">nca_output</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A more detailed guide can be found here : https://repub.eur.nl/pub/78323/
# or https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2624981

# Load data from a CSV file with header and row names:
data &lt;- read.csv('mydata.csv', row.names=1)
# Or load and rename the example dataset
data(nca.example)
data &lt;- nca.example

# Run NCA with the dataset and name the analysis 'model'.
# Specify the independent (cause) and dependent (effect) variables by column index or name
# More than 1 independent variables can be specified with a vector
model &lt;- nca_analysis(data, c(1, 2), 3)

# A quick summary of the analysis can be displayed by 'model'
model

# A full summary of the analysis is shown by nca_output (see documentation for more options)
nca_output(model)

# The results of the analysis is a list of 6 items :
# - plots (1 for each independent variable)
# - summaries (1 for each independent variable)
# - bottleneck tables (1 for each ceiling technique)
# - peers (1 dataframe for each independent variable)
# - tests (1 list for each independent variabl)
# - test.time (total time to run all tests)
names(model)

# The first item contains the graphical outputs for each independent variable
# This is not really useful to humans
model$plots[[1]]

# The seconds item contains a list with the summaries for the independent variables
model$summaries[[1]]

# The third item contains a list with the bottleneck tables, one for each ceiling technique
model$bottlenecks$cr_fdh

# The fourth item shows the peers, for each independent variable
model$peers$Individualism

# For the fifth and sixth item, the test.rep needs to be larger than 0
# for performing the statistical test
# Optionally the p_confidence (default 0.95) and the p_threshold (default 0) can be set
model &lt;- nca_analysis(data, c(1, 2), 3, test.rep=100)

# The fifth item shows the tests for each independent variable
# This is not really useful to humans
model$tests$Individualism

# The last item shows the total time needed to perform the analysis.
# For large values of test.rep the test may take long.  
model$test.time
</code></pre>

<hr>
<h2 id='ceilings'>a set of all available ceiling techniques</h2><span id='topic+ceilings'></span>

<h3>Description</h3>

<p>Ceilings to use for the <code><a href="#topic+nca">nca</a></code> or <code><a href="#topic+nca_analysis">nca_analysis</a></code> methods <br />
&gt; nca(data, c(1, 2), 3, ceilings=c('ols', 'ce_fdh', 'cr_fdh'))
</p>
<p>Note that the ols regression line is not a ceiling but is included as a reference. 
</p>

<table>
<tr>
 <td style="text-align: left;">
<b>Ceiling Technique</b> </td><td style="text-align: left;"> <b>Name</b></td>
</tr>
<tr>
 <td style="text-align: left;">

<b>cols</b>         </td><td style="text-align: left;"> Corrected Ordinary Least Squares                 </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>qr</b>           </td><td style="text-align: left;"> Quantile Regression                              </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>ce_vrs</b>       </td><td style="text-align: left;"> Ceiling Envelopment with Varying Return to Scale </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>cr_vrs</b>       </td><td style="text-align: left;"> Ceiling Regression with Varying Return to Scale  </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>ce_fdh</b>       </td><td style="text-align: left;"> Ceiling Envelopment with Free Disposal Hull      </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>cr_fdh</b>       </td><td style="text-align: left;"> Ceiling Regression with Free Disposal Hull       </td>
</tr>
<tr>
 <td style="text-align: left;">
<b>c_lp</b>         </td><td style="text-align: left;"> Ceiling Linear Programming                       </td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Note: The SFA and LH ceiling lines are deprecated (discontinued) from version 3.2.0
</p>

<hr>
<h2 id='line.colors'>a set defining the line colors for the plots</h2><span id='topic+line.colors'></span>

<h3>Description</h3>

<p>Set before calling nca_output<br />
&gt; line.colors['ce_fdh'] &lt;- 'blue'<br /><br />
Reset one line color by setting it to NULL<br />
&gt; line.colors['ce_fdh'] &lt;- NULL<br /><br />
Reset all line colors by setting line.colors to NULL<br />
&gt; line.colors &lt;- NULL
</p>


<h3>Format</h3>

<p>This is a list with default line colors for each ceiling technique
</p>

<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ols</b>         </td><td style="text-align: left;"> 'green'          </td><td style="text-align: left;"> <b>c_lp</b>        </td><td style="text-align: left;"> 'blue'</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>cols</b>        </td><td style="text-align: left;"> 'darkgreen'      </td><td style="text-align: left;"> <b>qr</b>          </td><td style="text-align: left;"> 'lightpink'</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ce_vrs</b>      </td><td style="text-align: left;"> 'orchid4'        </td><td style="text-align: left;"> <b>cr_vrs</b>      </td><td style="text-align: left;"> 'violet'</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ce_fdh</b>      </td><td style="text-align: left;"> 'red'            </td><td style="text-align: left;"> <b>cr_fdh</b>      </td><td style="text-align: left;"> 'orange'</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<hr>
<h2 id='line.types'>a set defining the line types for the plots</h2><span id='topic+line.types'></span>

<h3>Description</h3>

<p>Set before calling nca_output<br />
&gt; line.types['ce_fdh'] &lt;- 1<br /><br />
Reset one line type by setting it to NULL<br />
&gt; line.types['ce_fdh'] &lt;- NULL<br /><br />
Reset all line types by setting line.types to NULL<br />
&gt; line.types &lt;- NULL
</p>


<h3>Format</h3>

<p>This is a list with default line types for each ceiling technique
</p>

<table>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ols</b>         </td><td style="text-align: left;"> 1</td><td style="text-align: left;"> <b>c_lp</b>        </td><td style="text-align: left;"> 2</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>cols</b>        </td><td style="text-align: left;"> 3</td><td style="text-align: left;"> <b>qr</b>          </td><td style="text-align: left;"> 4</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ce_vrs</b>      </td><td style="text-align: left;"> 5</td><td style="text-align: left;"> <b>cr_vrs</b>      </td><td style="text-align: left;"> 1</td>
</tr>
<tr>
 <td style="text-align: left;">
</td><td style="text-align: left;"> <b>ce_fdh</b>      </td><td style="text-align: left;"> 6</td><td style="text-align: left;"> <b>cr_fdh</b>      </td><td style="text-align: left;"> 1</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>


<hr>
<h2 id='line.width'>parameter defining the width of the lines in the plots</h2><span id='topic+line.width'></span>

<h3>Description</h3>

<p>This will be used for the <b>lwd</b> parameter of the plot, default is 1.5.<br />
Set before calling nca_output<br />
&gt; line.width &lt;- 5
</p>

<hr>
<h2 id='nca'>Run a basic NCA analyses on a data set</h2><span id='topic+nca'></span>

<h3>Description</h3>

<p>Run a basic NCA analyses on a data set</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca(data, x, y, ceilings=c('ols', 'ce_fdh', 'cr_fdh'))</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_+3A_data">data</code></td>
<td>
<p>dataframe with columns of the variables</p>
</td></tr>
<tr><td><code id="nca_+3A_x">x</code></td>
<td>
<p>collection of the columns with the independent variables</p>
</td></tr>
<tr><td><code id="nca_+3A_y">y</code></td>
<td>
<p>index or name of the column with the dependent variable</p>
</td></tr>
<tr><td><code id="nca_+3A_ceilings">ceilings</code></td>
<td>
<p>vector with the ceiling techniques to include in this analysis</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a list with 3 items (see examples for further explanation):
</p>
<table>
<tr><td><code>plots</code></td>
<td>
<p>A list of plot-data for each x-y combination</p>
</td></tr>
<tr><td><code>summaries</code></td>
<td>
<p>A list of dataframes with the summaries for each x-y combination</p>
</td></tr>
<tr><td><code>bottlenecks</code></td>
<td>
<p>A list of dataframes with a bottleneck table for each ceiling technique</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load the data
data(nca.example)
data &lt;- nca.example

# Basic NCA analysis
# Independent variables in the first 2 columns, dependent variable in the third column
# This shows scatter plot(s) with the ceiling lines and the effect size(s) on the console
nca(data, c(1, 2), 3)

# Columns can be selected by name as well
nca(data, c('Individualism', 'Risk taking'), 'Innovation performance')

# Define the ceiling techniques via the ceilings parameter
nca(data, c(1, 2), 3, ceilings=c('ols', 'ce_vrs'))
# These are the available ceiling techniques
print(ceilings)
</code></pre>

<hr>
<h2 id='nca_analysis'>Run NCA analyses on a data set</h2><span id='topic+nca_analysis'></span>

<h3>Description</h3>

<p>Run multiple types of NCA analyses on a dataset</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_analysis(data, x, y, ceilings=c('ols', 'ce_fdh', 'cr_fdh'),
             corner=NULL, flip.x=FALSE, flip.y=FALSE, scope=NULL,
             bottleneck.x='percentage.range', bottleneck.y='percentage.range',
             steps=10, step.size=NULL, cutoff=0, qr.tau=0.95,
             effect_aggregation = 1, test.rep=0,
             test.p_confidence=0.95, test.p_threshold=0.05)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_analysis_+3A_data">data</code></td>
<td>
<p>dataframe with columns of the variables</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_x">x</code></td>
<td>
<p>index or name (or a vector of those) with independent variable(s) x</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_y">y</code></td>
<td>
<p>index or name of the column with the dependent variable y</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_ceilings">ceilings</code></td>
<td>
<p>vector with the ceiling techniques to include in this analysis</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_corner">corner</code></td>
<td>
<p>either an integer or a vector of integers, indicating the corner to analyze, see Details</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_flip.x">flip.x</code></td>
<td>
<p>reverse the direction of the independent variables<br />
Use either a boolean for all independent variables, or a vector with the same length as x</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_flip.y">flip.y</code></td>
<td>
<p>reverse the direction of the dependent variables, boolean</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_scope">scope</code></td>
<td>
<p>a theoretical scope in list format : (x.low, x.high, y.low, y.high), see Details</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_bottleneck.x">bottleneck.x</code></td>
<td>
<p>options for displaying the independent variables in the bottleneck table<br />
'percentage.range' to display the percentage of range between min(x) and max(x)<br />
'percentage.max' to display the percentage of max(x)<br />
'actual' to display the actual values<br />
'percentile' to display the percentiles<br />
Using percentage.max with negative values might yield counterintuitive results.</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_bottleneck.y">bottleneck.y</code></td>
<td>
<p>options for displaying the dependent variables in the bottleneck table. <br /> See bottleneck.x</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_steps">steps</code></td>
<td>
<p>this argument accepts 2 types : <br /> - an integer (number of steps in the bottleneck table) <br /> - a list of values (used as Y values in the bottleneck table). <br /> Only useful if step.size is not defined.</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_step.size">step.size</code></td>
<td>
<p>define the step size in the bottleneck table.<br />
The user will be warned if the stepsize does not fit the Y range.<br />
Defaults to null for using steps.</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_cutoff">cutoff</code></td>
<td>
<p>display calculated x,y values that are lower/higher than lowest/highest observed x,y values in the bottleneck table as:<br />
0 : NN (not necessary) and NA (not available)<br /> 1 : NN (not necessary) and highest observed values<br /> 2 : calculated values</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_qr.tau">qr.tau</code></td>
<td>
<p>define the qr tau (between 0 and 1) for the quantile regression ceiling technique, default 0.95</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_effect_aggregation">effect_aggregation</code></td>
<td>
<p>define the corners to aggregate into the effect size. 1 is upper-left and is always selected, 2 is upper-right, 3 is lower-left and 4 is lower-right</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_test.rep">test.rep</code></td>
<td>
<p>number of resamples in the statistical approximate permutation test. For test.rep = 0 no statistical test is performed</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_test.p_confidence">test.p_confidence</code></td>
<td>
<p>confidence level of the estimated p-value. <br />
Is used to calculate the p-accuracy for a given number of resamples (test.rep), default 0.95.</p>
</td></tr>
<tr><td><code id="nca_analysis_+3A_test.p_threshold">test.p_threshold</code></td>
<td>
<p>define the threshold significance level in the returned plot of the statistical test, default 0.05</p>
</td></tr></table>
<p><br />
</p>


<h3>Details</h3>

<p><b>Corners</b><br />
Corner 1 is the upper-left corner and corner 2 is the upper-right corner.
These two corners are used for an analysis of the necessity of the presence/high level
if x (corner = 1 ) or the absence/low level if x (corner = 2) for the presence/high level
of y, respectively.<br />
Corner 3 is the lower-left corner and corner 4 is the lower-right corner.
These two corners are used for an analysis of the necessity of the presence/high level
of x (corner = 3 ) or the absence/low level if x (corner = 4) for the absence/low level
of y, respectively.<br />
By default the upper left corner is analysed for all independent variables and corner
is not defined. If corner is defined, flip.x and flip.y are ignored.
<br />
<br />
<b>Scope</b><br />
By default, the theoretical scope is not defined and the empirical scope is used based on the minimum and maximum observed values of x and y.
</p>


<h3>Value</h3>

<p>Returns a list of 6 items (see examples for further explanation):
</p>
<table>
<tr><td><code>plots</code></td>
<td>
<p>A list of plot-data for each x-y combination</p>
</td></tr>
<tr><td><code>summaries</code></td>
<td>
<p>A list of dataframes with the summaries for each x-y combination</p>
</td></tr>
<tr><td><code>bottlenecks</code></td>
<td>
<p>A list of dataframes with a bottleneck table for each ceiling technique</p>
</td></tr>
<tr><td><code>peers</code></td>
<td>
<p>A list of ceilings, with a list of peers for each independent variable.
Peers are corner points of the CE-FDH ceiling line (e.g., the northwest-corners points for corner = 1)</p>
</td></tr>
<tr><td><code>tests</code></td>
<td>
<p>The results of the test for each independent variable (not human friendly, use nca_output)</p>
</td></tr>
<tr><td><code>test.time</code></td>
<td>
<p>The total time needed to run the tests for all independent variables</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Load the data
data(nca.example)
data &lt;- nca.example

# Basic NCA analysis, with independent variables in the first 2 columns
# and the dependent variable in the third column
model &lt;- nca_analysis(data, c(1, 2), 3)

# Use nca_output to show the summaries (see nca_output documentation for more options)
nca_output(model)

# Columns can be selected by name as well
model &lt;- nca_analysis(data, c('Individualism', 'Risk taking'), 'Innovation performance')

# Define the ceiling techniques via the ceilings parameter, see 'ceilings' for all types
model &lt;- nca_analysis(data, c(1, 2), 3, ceilings=c('ce_fdh', 'ce_vrs'))

# These are the available ceiling techniques
print(ceilings)

# By default the upper-left corner is analysed. With the corner argument for each
# independent variable a different corner can be selected. Select corner 1 or 2
# for an analysis of necessary conditions for the presence/high level of the
# dependent variable, and corner 3 or 4 for an analysis of necessary conditions for
# the absence/low level of the dependent variable. It is not possible to combine
# corner 1 or 2 with corner 3 or 4 in the same analysis as different outcomes are analysed.
# This analyses the upper right corner for the first independent variable
# and the upper left corner for the second independent variable:
model &lt;- nca_analysis(data, c(1, 2), 3, corner=c(2, 1))

# Alternatively, for using the upper right corner(s), 'flip' the x variables
model &lt;- nca_analysis(data, c(1, 2), 3, flip.x=TRUE)

# It is also possible to flip a single x variable
model &lt;- nca_analysis(data, c(1, 2), 3, flip.x=c(TRUE, FALSE))

# Flip the y variable if the lower corners need analysing
model &lt;- nca_analysis(data, c(1, 2), 3, flip.x=c(TRUE, FALSE), flip.y=TRUE)

# Use a theoretical scope instead of the (calculated) empirical scope
model &lt;- nca_analysis(data, c(1, 2), 3, scope=c(0, 120, 0, 240))

# Display the peers for a ceiling and an independent variable
print(model$peers$ce_fdh$Individualism)

# By default, the bottleneck tables use percentages of the range for the x and y values.
# Using the percentage of the max value is also possible
model &lt;- nca_analysis(data, c(1, 2), 3, bottleneck.y='percentage.max')

# Use the actual values, in this case the x-value
model &lt;- nca_analysis(data, c(1, 2), 3, bottleneck.x='actual')

# Use percentile, in this case for the y-values
model &lt;- nca_analysis(data, c(1, 2), 3, bottleneck.y='percentile')

# Any combination is possible
model &lt;- nca_analysis(data, c(1, 2), 3, bottleneck.x='actual', bottleneck.y='percentile')

# The number of steps is adjustible via the steps parameter
model &lt;- nca_analysis(data, c(1, 2), 3, steps=20)

# The steps parameter also accepts a list of values
# These are interpreted as actual or percentage / percentile depending on bottleneck.y
model &lt;- nca_analysis(data, c(1, 2), 3, steps=seq(50, 120, 10))

# Or via the step.size parameter, this ignores the steps parameter
model &lt;- nca_analysis(data, c(1, 2), 3, step.size=5)

# If the ceiling line crosses the X = Xmax line at a point C below Y = Ymax,
# for Y &lt; Yc &lt; Ymax, the corresponding X in the bottleneck table is displayed as 'NA'
# It is also possible to display them as Xmax
model &lt;- nca_analysis(data, c(1, 2), 3, cutoff=1)

# or as the calculated value on the ceiling line
model &lt;- nca_analysis(data, c(1, 2), 3, cutoff=2)

# To run tests, the test.rep needs to be larger than 0
# Optionally the p_confidence (default 0.95) and the p_threshold (default 0) can be set
model &lt;- nca_analysis(data, c(1), 3, test.rep=1000, test.p_confidence=0.9, test.p_threshold=0.05)

# The output of the tests can be shown via nca_output with test=TRUE
nca_output(model, test=TRUE)
</code></pre>

<hr>
<h2 id='nca_outliers'>Outlier detection</h2><span id='topic+nca_outliers'></span>

<h3>Description</h3>

<p>Detect outliers on the dataset.</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_outliers(data, x, y, ceiling = NULL,
corner = NULL, flip.x = FALSE, flip.y = FALSE, scope=NULL,
k = 1, min.dif = 1e-2, max.results = 25, plotly=FALSE, condensed = FALSE)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_outliers_+3A_data">data</code></td>
<td>
<p>Dataframe with columns of the variables</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_x">x</code></td>
<td>
<p>Index or name of the column with the independent variable</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_y">y</code></td>
<td>
<p>Index or name of the column with the dependent variable</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_ceiling">ceiling</code></td>
<td>
<p>Name of the ceiling technique to be used.
If not provided, the default ceilings (CE_FDH) will be used</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_corner">corner</code></td>
<td>
<p>either an integer or a vector of integers, indicating the corner to analyze, see Details</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_flip.x">flip.x</code></td>
<td>
<p>reverse the direction of the independent variables<br />
Use either a boolean for all independent variables, or a vector with the same length as x</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_flip.y">flip.y</code></td>
<td>
<p>reverse the direction of the dependent variables, boolean</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_scope">scope</code></td>
<td>
<p>a theoretical scope in list format : (x.low, x.high, y.low, y.high), see nca_analysis</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_k">k</code></td>
<td>
<p>use combinations of observations, default is 1 (single observations)</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_min.dif">min.dif</code></td>
<td>
<p>set the threshold for the minimum dif.rel to be considered as outlier, default is 1e-2</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_max.results">max.results</code></td>
<td>
<p>only show the first 'max.results' outliers, default is 25</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_plotly">plotly</code></td>
<td>
<p>If true shows the interactive scatter plot(s), one for each independent variable.<br />
In RStudio the plots are shown in the Viewer window. See Details.</p>
</td></tr>
<tr><td><code id="nca_outliers_+3A_condensed">condensed</code></td>
<td>
<p>If true and k &gt; 1, hide outlier combinations for which the effect size is<br />
not increased compared to the effect size of single elements of that combination. (default FALSE)</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Outliers</strong><br />
The potential outliers are displayed with the original effects size and the
effect size if this outlier is removed. The absolute and relative differences
between both effect sizes is also shown.
The table also displays if a point is a ceiling zone outlier or a scope outlier.
</p>
<p><strong>Plotly</strong><br />
The plot highlights the potential outliers.
The names, relative difference and XY coordinates of all points pop up when moving the pointer over the plot.
The toolbar allows several actions such as zoom and selection of parts of the plot.
<br />
<br />
</p>


<h3>Examples</h3>

<pre><code class='language-R'># A basic example of the nca_outliers command:
data(nca.example)
outliers &lt;- nca_outliers(nca.example, 1, 3)

# This prints the outlier table
print(outliers)

# Plotly displays a scatterplot with the outliers
nca_outliers(nca.example, 1, 3, plotly = TRUE)

# Test for combinations of observations
# Useful to detect clusters of observations as possible outliers
nca_outliers(nca.example, 1, 3, k = 2)

# Just like the nca_analysis command, nca_outliers accept both flip and corner arguments
nca_outliers(nca.example, 1, 3, corner=3)

# It is possible to define the maximum number of results (default is 25)
nca_outliers(nca.example, 1, 3, max.results=5)

# Do no show possible outliers where the abs(dif.rel) is smaller than min.dif
nca_outliers(nca.example, 1, 3, min.dif=10)

# If k &gt; 1, the effect size of a single observation might not change
# when paired with another observation, e.g. dif.rel of Obs1 == dif.rel of Obs1+Obs2.
# The example below hides combinations of Japan with Portugal, Greece, etc.
nca_outliers(nca.example, 1, 3, k = 2, condensed = TRUE)
</code></pre>

<hr>
<h2 id='nca_output'>display the result of the NCA analysis</h2><span id='topic+nca_output'></span>

<h3>Description</h3>

<p>Show the plots, NCA summaries and bottleneck tables of a NCA analysis.</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_output(model, plots=TRUE, plotly=FALSE, bottlenecks=FALSE,
           summaries=TRUE, test=FALSE, pdf=FALSE, path=NULL, selection = NULL)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_output_+3A_model">model</code></td>
<td>
<p>Displays output of the nca or nca_analysis command</p>
</td></tr>
<tr><td><code id="nca_output_+3A_plots">plots</code></td>
<td>
<p>If true (default) show the scatter plot(s), one  for each independent variable.<br />
In Rstudio the plots are shown the Plots window.</p>
</td></tr>
<tr><td><code id="nca_output_+3A_plotly">plotly</code></td>
<td>
<p>If true shows the interactive scatter plot(s), one for each independent variable.<br />
In RStudio the plots are shown in the Viewer window. See Details.</p>
</td></tr>
<tr><td><code id="nca_output_+3A_bottlenecks">bottlenecks</code></td>
<td>
<p>If true displays the bottleneck table(s) in the Console window, one table for each ceiling line</p>
</td></tr>
<tr><td><code id="nca_output_+3A_summaries">summaries</code></td>
<td>
<p>If true shows the summaries for each independent variable in the Console window, see Details</p>
</td></tr>
<tr><td><code id="nca_output_+3A_test">test</code></td>
<td>
<p>If true shows the result of the statistical sigificance test (if present), see Details</p>
</td></tr>
<tr><td><code id="nca_output_+3A_pdf">pdf</code></td>
<td>
<p>If true exports the output to a pdf file, except for the plotly plot</p>
</td></tr>
<tr><td><code id="nca_output_+3A_path">path</code></td>
<td>
<p>Optional path for the output file(s)</p>
</td></tr>
<tr><td><code id="nca_output_+3A_selection">selection</code></td>
<td>
<p>Optionally selects the independent variables for inclusion in the output.<br />
For example, only the plots for the selected independent variable are shown.<br />
In the bottleneck table the required levels of only the selected independent variables for given levels of Y are shown.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><strong>Plotly</strong><br />
The plot highlights the points that construct the ceiling line ('peers').
The names and XY coordinates of all points pop up when moving the pointer over the plot.
The toolbar allows several actions such as zoom and selection of parts of the plot. Optionally subgroups of points can be labeled.
<br />
<br />
<b>Summaries</b><br />
The output starts with 6 lines of basic information (&quot;global&quot;) about the dataset (&quot;Number of observations&quot;, &quot;Scope&quot;, &quot;Xmin&quot;, &quot;Xmax&quot;, &quot;Ymin&quot;, and &quot;Ymax&quot;).
&quot;Scope&quot; refers to the empirical area of possible x-y combinations, given the minimum and maximum observed x and y values.<br />
The next 11 lines present the NCA parameters (&quot;param&quot;, see below) for each of the selected ceiling techniques (the defaults techniques are ce_fdh and cr_fdh).<br />
<br />
The 11 printed NCA parameters are:<br />
- <em>Ceiling zone</em>, which is the size of the &quot;empty&quot; area in the upper-left corner<br />
- <em>Effect size</em>, which is the ceiling zone divided by the scope<br />
- <em># above</em>, which is the number of observations that are above the ceiling line and hence in the &quot;empty&quot; ceiling zone<br />
- <em>c-accuracy</em>, which is the number of observations on or below the ceiling line divided by the total number of observations and multiplied by 100 percent<br />
- <em>Fit</em>, which relates to the &quot;closeness&quot; of the selected ceiling line to the ce_fdh ceiling line<br />
- <em>Slope</em> and <em>Intercept</em>, which are the slope and the intercept of the straight ceiling line (no values are printed if the ceiling line is not a straight line, but a step function)<br />
- <em>Abs. ineff.</em>, which is the total xy-space where x does not constrain y, and y is not constrained by x<br />
- <em>Rel. ineff.</em>, which is the total xy-space where x does not constrain y, and y is not constrained by x as percentage of the scope<br />
- <em>Condition ineff.</em>, which is the condition inefficiency that indicates for which range of x (as a percentage of the total range) x does not constrain y (i.e., there is no ceiling line in that x-range)<br />
- <em>Outcome ineff.</em>, which is the outcome efficiency that indicates for which range of y (as a percentage of the total range of y) y is not constrained by x (i.e., there is no ceiling line in that y-range)
<br />
<br />
<b>Test</b><br />
NCA's statistical test is a randomness test to evaluate if the observed effect size may be a random result of unrelated X and Y variables
</p>


<h3>Examples</h3>

<pre><code class='language-R'># Use the result of the nca command:
data(nca.example)
data &lt;- nca.example
model &lt;- nca_analysis(data, c(1, 2), 3)

# Show the full summaries in the Console window
nca_output(model)

# Suppress the summaries and display the plots
nca_output(model, plots=TRUE, summaries=FALSE)

# Display the plots via Plotly
nca_output(model, plotly=TRUE, summaries=FALSE)

# Label the observation of the Plotly plot by using a vector of names (no more than 5).
# For example label the observations in nca.example
labels &lt;- c('Australia', 'Europe', 'Europe', 'North America', 'Europe', 'Europe',
'Europe', 'Europe', 'Europe', 'Europe', 'Europe', 'Europe', 'Europe', 'Asia',
'North America', 'Europe', 'Australia', 'Europe', 'Europe', 'Europe', 'Europe',
'Asia', 'Europe', 'Europe', 'Europe', 'Europe', 'Europe', 'North America')
nca_output(model, plotly=labels, summaries=FALSE)

# Suppress the summaries and display the bottlenecks
nca_output(model, bottlenecks=TRUE, summaries=FALSE)

# Show the results of the statistical significance test (p-value)
# Make sure to set test.rep in nca_analysis
nca_output(model, test=TRUE)

# Show all five
nca_output(model, plots=TRUE, plotly=TRUE, bottlenecks=TRUE, test=TRUE)

# Per independent variable, export plots and summaries to PDF files,
# and export all the bottleneck tables to a single PDF file
nca_output(model, plots=TRUE, bottlenecks=TRUE, pdf=TRUE)

# Use the path option to export to an existing directory
outdir &lt;- '/tmp' 
nca_output(model, plots=TRUE, pdf=TRUE, path=outdir)

# Limit the output to a selection of independent variables by name
nca_output(model, plots=TRUE, selection=c("Individualism"))

# Or by column index, in both cases the order matters
nca_output(model, plots=TRUE, selection=c(2, 1))
</code></pre>

<hr>
<h2 id='nca_power'>Function to evaluate power</h2><span id='topic+nca_power'></span>

<h3>Description</h3>

<p>Function to evaluate power,
test if a sample size is large enough to detect necessity.</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_power(n = c(20, 50, 100), effect = 0.10, slope = 1, ceiling = "ce_fdh",
p = 0.05, distribution.x = "uniform", distribution.y = "uniform", rep = 100,
test.rep = 200)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_power_+3A_n">n</code></td>
<td>
<p>Number of datapoints to generate, either an integer or a vector of integers.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_effect">effect</code></td>
<td>
<p>Effect size of the generated datasets.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_slope">slope</code></td>
<td>
<p>Slope of the line.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_ceiling">ceiling</code></td>
<td>
<p>Ceiling technique to use for this analysis</p>
</td></tr>
<tr><td><code id="nca_power_+3A_p">p</code></td>
<td>
<p>Targeted confidence level</p>
</td></tr>
<tr><td><code id="nca_power_+3A_distribution.x">distribution.x</code></td>
<td>
<p>Distribution type(s) for X, &quot;uniform&quot; (default) or &quot;normal&quot;.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_distribution.y">distribution.y</code></td>
<td>
<p>Distribution type(s) for Y, &quot;uniform&quot; (default) or &quot;normal&quot;.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_rep">rep</code></td>
<td>
<p>Number of analyses done per iteration.</p>
</td></tr>
<tr><td><code id="nca_power_+3A_test.rep">test.rep</code></td>
<td>
<p>Number of resamples in the statistical approximate permutation test.
For test.rep = 0 no statistical test is performed</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Simple example
## Not run: results &lt;- nca_power()

print(results)
</code></pre>

<hr>
<h2 id='nca_random'>generating random data that meets necessity</h2><span id='topic+nca_random'></span>

<h3>Description</h3>

<p>Generate N datapoints, with 'normal' or 'uniform' distributions for X and Y</p>


<h3>Usage</h3>

<pre><code class='language-R'>nca_random(n, intercepts, slopes, corner=1,
                  distribution.x = "uniform", distribution.y = "uniform",
                  mean.x = 0.5, mean.y = 0.5, sd.x = 0.2, sd.y = 0.2)</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nca_random_+3A_n">n</code></td>
<td>
<p>Number of observations to generate, should be an integer &gt; 1.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_intercepts">intercepts</code></td>
<td>
<p>The intercept or a vector of intercepts of the line.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_slopes">slopes</code></td>
<td>
<p>The slope or a vector if slopes of the line.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_corner">corner</code></td>
<td>
<p>Define which corner should be empty, default is 1 (upper left).</p>
</td></tr>
<tr><td><code id="nca_random_+3A_distribution.x">distribution.x</code></td>
<td>
<p>Type of the distribution for X, &quot;uniform&quot; (default) or &quot;normal&quot;.<br />
The latter is a truncated normal distribution.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_distribution.y">distribution.y</code></td>
<td>
<p>Type of the distribution for Y, &quot;uniform&quot; (default) or &quot;normal&quot;.<br />
The latter is a truncated normal distribution.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_mean.x">mean.x</code></td>
<td>
<p>Distribution Mean of X (default 0.5), ignored distribution.x == &quot;uniform&quot;.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_mean.y">mean.y</code></td>
<td>
<p>Distribution Mean of Y (default 0.5), ignored distribution.y == &quot;uniform&quot;.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_sd.x">sd.x</code></td>
<td>
<p>Distribution SD of X (default 0.2), ignored distribution.x == &quot;uniform&quot;.</p>
</td></tr>
<tr><td><code id="nca_random_+3A_sd.y">sd.y</code></td>
<td>
<p>Distribution SD of Y (default 0.2), ignored distribution.y == &quot;uniform&quot;.</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Generate a uniform dataset, default for X and Y
data &lt;- nca_random(100, 0, 1)

# It is also possible to generate a dataset with multiple independent variables,
# by supplying vectors for the intercepts and slopes
data &lt;- nca_random(100, c(0, 0.25), c(1, 0.75))
# Single values will be repeated to complement a vector  
data &lt;- nca_random(100, c(0, 0.25), 1)

# The default is an empty space in the upper left corner.
# A different corner can be selected with the corner argument
data &lt;- nca_random(100, 0, 1, corner=4)

# Generate a dataset with a normal distribution for X and a uniform distribution for Y
data &lt;- nca_random(100, 0, 1, distribution.x = "normal", distribution.y = "uniform")

# Generate a dataset with a normal distribution for X and Y, with adjusted MEAN
data &lt;- nca_random(100, 0, 1, distribution.x = "normal", distribution.y = "normal",
                   mean.x = 0.75, mean.y = 0.75)

# Generate a dataset with a normal distribution for X and Y, with adjusted SD
data &lt;- nca_random(100, 0, 1, distribution.x = "normal",
                   distribution.y = "normal", sd.x = 0.1, sd.y = 0.1)
</code></pre>

<hr>
<h2 id='nca.example'>NCA example data with 2 independent and 1 dependent variables</h2><span id='topic+nca.example'></span>

<h3>Description</h3>

<p>This data set has Individualism and Risk taking	as independent variables,
and Innovation performance as the dependent variable for 28 countries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nca.example)</code></pre>


<h3>Format</h3>

<p>A matrix containing 28 observations, incl. headers and row names.</p>

<hr>
<h2 id='nca.example2'>NCA example data with 3 independent and 1 dependent variables</h2><span id='topic+nca.example2'></span>

<h3>Description</h3>

<p>This data set has Contractual detail, Goodwill trust, and Competence trust
as independent variables, and Innovation as dependent variable for 48 buyer-supplier relationships.
See Table 2 in: Van der Valk, W., Sumo, R., Dul, J., &amp; Schroeder, R. G. (2016).
When are contracts and trust necessary for innovation in buyer-supplier relationships?
A necessary condition analysis.
Journal of Purchasing and Supply Management, 22(4), 266-277.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>data(nca.example2)</code></pre>


<h3>Format</h3>

<p>A matrix containing 48 observations, incl. headers.</p>

<hr>
<h2 id='point.color'>parameter defining the point color in the plots</h2><span id='topic+point.color'></span>

<h3>Description</h3>

<p>This will be used for the <b>col</b> parameters of the plots, default is blue.<br />
Set before calling nca_output<br />
&gt; point.color &lt;- red
</p>

<hr>
<h2 id='point.type'>parameter defining the plotting symbol in the plots</h2><span id='topic+point.type'></span>

<h3>Description</h3>

<p>This will be used for the <b>pch</b> parameter of the plots, default is 21.<br />
Set before calling nca_output<br />
&gt; point.type &lt;- 22<br /><br />
See <a href="http://www.sthda.com/english/wiki/r-plot-pch-symbols-the-different-point-shapes-available-in-r">
http://www.sthda.com/english/wiki/r-plot-pch-symbols-the-different-point-shapes-available-in-r</a> for more symbols
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
