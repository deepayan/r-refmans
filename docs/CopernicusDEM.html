<!DOCTYPE html><html lang="en"><head><title>Help for package CopernicusDEM</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {CopernicusDEM}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#aoi_geom_save_tif_matches'><p>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file</p></a></li>
<li><a href='#compute_elapsed_time'><p>elapsed time in hours &amp; minutes &amp; seconds</p></a></li>
<li><a href='#create_VRT_from_dir'><p>Create a Virtual Raster (VRT) file from .tif files</p></a></li>
<li><a href='#inner_elapsed_time'><p>inner function of 'compute_elapsed_time'</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Copernicus Digital Elevation Models</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>Date:</td>
<td>2024-12-09</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/mlampros/CopernicusDEM">https://github.com/mlampros/CopernicusDEM</a></td>
</tr>
<tr>
<td>Description:</td>
<td>Copernicus Digital Elevation Model datasets (DEM) of 90 and 30 meters resolution using the 'awscli' command line tool. The Copernicus (DEM) is included in the Registry of Open Data on 'AWS (Amazon Web Services)' and represents the surface of the Earth including buildings, infrastructure and vegetation.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></td>
</tr>
<tr>
<td>Copyright:</td>
<td>inst/COPYRIGHTS.pdf</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>SystemRequirements:</td>
<td>awscli: apt install -y awscli (deb), aws-configure:
aws configure (deb)</td>
</tr>
<tr>
<td>Depends:</td>
<td>R(&ge; 3.5)</td>
</tr>
<tr>
<td>Imports:</td>
<td>glue, sf, utils, doParallel, foreach</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.0</td>
</tr>
<tr>
<td>Suggests:</td>
<td>rmarkdown, knitr, data.table, fitbitViz, mapview, terra</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-12-09 12:32:34 UTC; lampros</td>
</tr>
<tr>
<td>Author:</td>
<td>Lampros Mouselimis
    <a href="https://orcid.org/0000-0002-8024-1546"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a> [aut, cre]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Lampros Mouselimis &lt;mouselimislampros@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-12-09 13:40:18 UTC</td>
</tr>
</table>
<hr>
<h2 id='aoi_geom_save_tif_matches'>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file</h2><span id='topic+aoi_geom_save_tif_matches'></span>

<h3>Description</h3>

<p>Download the elevation .tif files that intersect either with an input sf (simple features) object or with a .geojson file
</p>


<h3>Usage</h3>

<pre><code class='language-R'>aoi_geom_save_tif_matches(
  sf_or_file,
  dir_save_tifs,
  resolution = 90,
  crs_value = 4326,
  threads = parallel::detectCores(),
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="aoi_geom_save_tif_matches_+3A_sf_or_file">sf_or_file</code></td>
<td>
<p>either an 'sf'(simple features) object or a .geojson file specifying the AOI (Area of Interest) for which the Digital Elevation Models (DEM) files should be downloaded</p>
</td></tr>
<tr><td><code id="aoi_geom_save_tif_matches_+3A_dir_save_tifs">dir_save_tifs</code></td>
<td>
<p>a valid path to a directory where the .tif files should be saved</p>
</td></tr>
<tr><td><code id="aoi_geom_save_tif_matches_+3A_resolution">resolution</code></td>
<td>
<p>an integer value specifying the elevation resolution. The Copernicus Digital ELevation Models (DEM) currently include 90 and 30 meter resolution data</p>
</td></tr>
<tr><td><code id="aoi_geom_save_tif_matches_+3A_crs_value">crs_value</code></td>
<td>
<p>an integer value specifying the Coordinates Reference System (CRS) value of the Digital ELevation Models (DEM) which is by default 4326</p>
</td></tr>
<tr><td><code id="aoi_geom_save_tif_matches_+3A_threads">threads</code></td>
<td>
<p>an integer that specifies the number of threads to use in parallel when downloading the .tif files</p>
</td></tr>
<tr><td><code id="aoi_geom_save_tif_matches_+3A_verbose">verbose</code></td>
<td>
<p>a boolean. If TRUE then information will be printed out in the console</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Download Computation time: Based on a sample of 90 meter resolution images that I downloaded each file was approximately 5 MB which means in total I had to download 130 GB of
data (in case I intended to download all 20.000 files of the land areas worldwide). Therefore it is wise to download data based on the intersection of the input Area of Interest (AOI)
and an existing tile-grid of the Digital Elevation Model (DEM)
</p>
<p>The 30 meter resolution .tif images are bigger in size but visually better (approximate image size of 1.7 MB compared to 13 MB). The time to download 90 meter resolution data is approximately
20 seconds compared to 1 minute and 10 seconds of the 30 meter resolution data (for a sample use case)
</p>


<h3>Value</h3>

<p>a list object of length 2
</p>


<h3>References</h3>

<p>https://registry.opendata.aws/copernicus-dem/
</p>
<p>https://copernicus-dem-30m.s3.amazonaws.com/readme.html
</p>
<p>https://spacedata.copernicus.eu/en/web/guest/collections/copernicus-digital-elevation-model/
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

#.......................................
# create a directory to save the .tif
# files based on a Well Known Text (WKT)
# of a sample Area of Interest (AOI)
#.......................................

DIR_SAVE = file.path(Sys.getenv('HOME'), 'DIR_SAVE_DEM')
if (!dir.exists(DIR_SAVE)) dir.create(DIR_SAVE)

WKT='POLYGON((61.5234 27.0591, 63.6328 27.0591, 63.6328 28.1495, 61.5234 28.1495, 61.5234 27.0591))'

sf_obj = sf::st_as_sfc(WKT, crs = 4326)
sf_obj = sf::st_make_valid(sf_obj)

#.............
# 90 meter DEM
#.............

save_matches = CopernicusDEM::aoi_geom_save_tif_matches(sf_or_file = sf_obj,
                                                        dir_save_tifs = DIR_SAVE,
                                                        resolution = 90,
                                                        crs_value = 4326,
                                                        threads = parallel::detectCores(),
                                                        verbose = TRUE)

#.............
# 30 meter DEM
#.............

save_matches = CopernicusDEM::aoi_geom_save_tif_matches(sf_or_file = sf_obj,
                                                        dir_save_tifs = DIR_SAVE,
                                                        resolution = 30,
                                                        crs_value = 4326,
                                                        threads = parallel::detectCores(),
                                                        verbose = TRUE)

## End(Not run)
</code></pre>

<hr>
<h2 id='compute_elapsed_time'>elapsed time in hours &amp; minutes &amp; seconds</h2><span id='topic+compute_elapsed_time'></span>

<h3>Description</h3>

<p>elapsed time in hours &amp; minutes &amp; seconds
</p>


<h3>Usage</h3>

<pre><code class='language-R'>compute_elapsed_time(time_start)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="compute_elapsed_time_+3A_time_start">time_start</code></td>
<td>
<p>a numeric value specifying the start time</p>
</td></tr>
</table>


<h3>Value</h3>

<p>It does not return a value but only prints the time in form of a character string in the R session
</p>

<hr>
<h2 id='create_VRT_from_dir'>Create a Virtual Raster (VRT) file from .tif files</h2><span id='topic+create_VRT_from_dir'></span>

<h3>Description</h3>

<p>Create a Virtual Raster (VRT) file from .tif files
</p>


<h3>Usage</h3>

<pre><code class='language-R'>create_VRT_from_dir(
  dir_tifs,
  output_path_VRT,
  file_extension = ".tif",
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="create_VRT_from_dir_+3A_dir_tifs">dir_tifs</code></td>
<td>
<p>a valid path to a directory where the .tif files are saved</p>
</td></tr>
<tr><td><code id="create_VRT_from_dir_+3A_output_path_vrt">output_path_VRT</code></td>
<td>
<p>a valid path to a file where the Virtual Raster (VRT) will be saved</p>
</td></tr>
<tr><td><code id="create_VRT_from_dir_+3A_file_extension">file_extension</code></td>
<td>
<p>a character string specifying the image file extension from which the .vrt file will be built</p>
</td></tr>
<tr><td><code id="create_VRT_from_dir_+3A_verbose">verbose</code></td>
<td>
<p>a boolean. If TRUE then information will be printed out in the console</p>
</td></tr>
</table>


<h3>Value</h3>

<p>it doesn't return an object but it saves the output to a file
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 

#.........................................................
# create a directory to save the .tif files and a
# Well Known Text (WKT) of a sample Area of Interest (AOI)
#.........................................................

DIR_SAVE = file.path(Sys.getenv('HOME'), 'DIR_SAVE_DEM')
if (!dir.exists(DIR_SAVE)) dir.create(DIR_SAVE)

WKT='POLYGON((61.5234 27.0591, 63.6328 27.0591, 63.6328 28.1495, 61.5234 28.1495, 61.5234 27.0591))'

sf_obj = sf::st_as_sfc(WKT, crs = 4326)
sf_obj = sf::st_make_valid(sf_obj)

#......................
# download 90 meter DEM
#......................

save_matches = CopernicusDEM::aoi_geom_save_tif_matches(sf_or_file = sf_obj,
                                                        dir_save_tifs = DIR_SAVE,
                                                        resolution = 90,
                                                        crs_value = 4326,
                                                        threads = parallel::detectCores(),
                                                        verbose = TRUE)

#........................................
# create a Virtual Raster (VRT) file from
# the 90 meter downloaded .tif files
#........................................

VRT_out = as.character(glue::glue("{DIR_SAVE}.vrt"))

res_vrt = CopernicusDEM::create_VRT_from_dir(dir_tifs = DIR_SAVE,
                                             output_path_VRT = VRT_out,
                                             verbose = TRUE)

#......................................................
# load the saved VRT file as raster (which might
# consist of multiple files, i.e. a mosaic) and plot it
#......................................................

rst = raster::raster(VRT_out)
sp::plot(rst)


## End(Not run)
</code></pre>

<hr>
<h2 id='inner_elapsed_time'>inner function of 'compute_elapsed_time'</h2><span id='topic+inner_elapsed_time'></span>

<h3>Description</h3>

<p>inner function of 'compute_elapsed_time'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inner_elapsed_time(secs, estimated = FALSE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="inner_elapsed_time_+3A_secs">secs</code></td>
<td>
<p>a numeric value specifying the seconds</p>
</td></tr>
<tr><td><code id="inner_elapsed_time_+3A_estimated">estimated</code></td>
<td>
<p>a boolean. If TRUE then the output label becomes the 'Estimated time'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a character string showing the estimated or elapsed time
</p>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
