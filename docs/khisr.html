<!DOCTYPE html><html><head><title>Help for package khisr</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {khisr}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#khisr-package'><p>khisr: An R Client to Retrieve Data from DHIS2</p></a></li>
<li><a href='#+25+26gt+3B+25'><p>Pipe operator</p></a></li>
<li><a href='#analytics-dimension'><p>Analytics Data Dimensions</p></a></li>
<li><a href='#get_analytics'><p>Retrieves Disaggregated Analytics Data from a DHIS2 Server</p></a></li>
<li><a href='#get_analytics_by_level'><p>Retrieves Analytics Table Data</p></a></li>
<li><a href='#get_data_elements_with_category_options'><p>Get Data Elements with Category Options</p></a></li>
<li><a href='#get_data_sets_by_level'><p>Retrieves Data Set Reporting Rate Metrics</p></a></li>
<li><a href='#get_metadata'><p>Get Metadata from a DHIS2 Instance</p></a></li>
<li><a href='#get_organisations_by_level'><p>Get Organisations by Level</p></a></li>
<li><a href='#khis_base_url'><p>Produces the Configured DHIS2 API Base URI</p></a></li>
<li><a href='#khis_cred'><p>Sets DHIS2 Credentials</p></a></li>
<li><a href='#khis_cred_clear'><p>Clear the Credentials from Memory</p></a></li>
<li><a href='#khis_has_cred'><p>Are There Credentials on Hand?</p></a></li>
<li><a href='#khis_username'><p>Produces the Configured Username</p></a></li>
<li><a href='#khisr-configuration'><p>khisr Configuration</p></a></li>
<li><a href='#metadata-filter'><p>Metadata Filter</p></a></li>
<li><a href='#metadata-helpers'><p>DHIS2 Metadata Helper Functions</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>An R Client to Retrieve Data from DHIS2</td>
</tr>
<tr>
<td>Description:</td>
<td>
    Provides a user-friendly interface for interacting with the District Health 
    Information Software 2 (DHIS2) instance. It streamlines data retrieval, 
    empowering researchers, analysts, and healthcare professionals to obtain and 
    utilize data efficiently.</td>
</tr>
<tr>
<td>Version:</td>
<td>1.0.5</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://khisr.damurka.com">https://khisr.damurka.com</a>, <a href="https://github.com/damurka/khisr">https://github.com/damurka/khisr</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/damurka/khisr/issues">https://github.com/damurka/khisr/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 3.3)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli, curl, dplyr, httr2, janitor, jsonlite, lifecycle,
lubridate, magrittr, purrr, rlang, stringr, tidyr, utils, withr</td>
</tr>
<tr>
<td>Suggests:</td>
<td>knitr, rmarkdown, spelling, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-GB</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-06-27 13:57:23 UTC; Murage</td>
</tr>
<tr>
<td>Author:</td>
<td>David Kariuki <a href="https://orcid.org/0009-0003-6159-1107"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre, cph]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>David Kariuki &lt;hello@damurka.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-06-27 14:30:05 UTC</td>
</tr>
</table>
<hr>
<h2 id='khisr-package'>khisr: An R Client to Retrieve Data from DHIS2</h2><span id='topic+khisr'></span><span id='topic+khisr-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Provides a user-friendly interface for interacting with the District Health Information Software 2 (DHIS2) instance. It streamlines data retrieval, empowering researchers, analysts, and healthcare professionals to obtain and utilize data efficiently.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: David Kariuki <a href="mailto:hello@damurka.com">hello@damurka.com</a> (<a href="https://orcid.org/0009-0003-6159-1107">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://khisr.damurka.com">https://khisr.damurka.com</a>
</p>
</li>
<li> <p><a href="https://github.com/damurka/khisr">https://github.com/damurka/khisr</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/damurka/khisr/issues">https://github.com/damurka/khisr/issues</a>
</p>
</li></ul>


<hr>
<h2 id='+25+26gt+3B+25'>Pipe operator</h2><span id='topic++25+3E+25'></span>

<h3>Description</h3>

<p>See <code>magrittr::<a href="magrittr.html#topic++25+3E+25">%&gt;%</a></code> for details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>lhs %&gt;% rhs
</code></pre>


<h3>Value</h3>

<p>Forwards objects on the left had side into a function or call expression.
</p>

<hr>
<h2 id='analytics-dimension'>Analytics Data Dimensions</h2><span id='topic+analytics-dimension'></span><span id='topic+analytics_dimension'></span><span id='topic++25.d+25'></span><span id='topic++25.f+25'></span>

<h3>Description</h3>

<p>Constructs a dimensions expression for analytics queries based on specified
property, operator, and values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>analytics_dimension(property, operator, values)

operator %.d% values

operator %.f% values
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="analytics-dimension_+3A_property">property</code></td>
<td>
<p>A character string representing whether its dimension or filter.
It only accepts <code>'dimension'</code>, <code>'filter'</code>.</p>
</td></tr>
<tr><td><code id="analytics-dimension_+3A_operator">operator</code></td>
<td>
<p>A character string representing the property to filter on (e.g.,
<code>'dx'</code>, <code>'pe'</code>, <code>'ou'</code>).</p>
</td></tr>
<tr><td><code id="analytics-dimension_+3A_values">values</code></td>
<td>
<p>A vector of values or semi-colon separated string items.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>DHIS2 organizes data using multiple dimensions, each with a unique identifier
and a set of items that represent specific data points within that dimension.
</p>

<ul>
<li><p> Data elements (dx): Indicators, data set reporting rate metrics, data element
operands, program indicators, program data elements, program attributes,
validation rules.
</p>
</li>
<li><p> Periods (pe): ISO periods (e.g., 202401) and relative periods (e.g., LAST_WEEK).
</p>
</li>
<li><p> Organisation unit hierarchy (ou): Specific health facilities, districts, countries,
and keywords for user location or its sub-units.
</p>
</li>
<li><p> Category option combinations (co): Category option combo identifiers.
</p>
</li>
<li><p> Attribute option combinations (ao): Category option combo identifiers.
</p>
</li>
<li><p> Categories: Category option identifiers.
</p>
</li>
<li><p> Data element group sets: Data element group identifiers.
</p>
</li>
<li><p> Organisation unit group sets: Organisation unit group identifiers.
</p>
</li></ul>

<p>The infix operator used for filter and dimension includes:
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%.d%&#8288;</code>: Infix operator for constructing dimension filters. Equivalent to
calling <code>analytics_dimension("dimension", ...)</code>.
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.f%&#8288;</code>: Infix operator for constructing filter filters. Equivalent to calling
<code>analytics_dimension("filter", ...)</code>.
</p>
</li></ul>



<h3>Value</h3>

<p>A spliced list with filter in the format property=operator:value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Create a dimension for data element "DE_1234"
analytics_dimension('dimension', "dx", "DE_1234")

# Equivalent to the expression above
dx %.d% "DE_1234"

# Create a filter dimension for the period of January 2024
pe %.f% "202401"

# Create filter dimension for periods "202401" and "202402":
analytics_dimension("filter", "pe", c("202401", "202402"))

</code></pre>

<hr>
<h2 id='get_analytics'>Retrieves Disaggregated Analytics Data from a DHIS2 Server</h2><span id='topic+get_analytics'></span>

<h3>Description</h3>

<p><code>get_analytics()</code> retrieves disaggregated data from DHIS2 analytics tables for a
specified period and data element(s), without performing any aggregation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_analytics(
  ...,
  return_type = c("uid", "name"),
  retry = 2,
  verbosity = 0,
  timeout = 60
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_analytics_+3A_...">...</code></td>
<td>
<p>One or more <code><a href="#topic+analytics_dimension">analytics_dimension()</a></code> parameters in key-value pairs.
These define the analytics query, including data elements, periods, and organization units.</p>
</td></tr>
<tr><td><code id="get_analytics_+3A_return_type">return_type</code></td>
<td>
<p>Optional argument specifying the return format for identifiers.
defaults to <code>'uid'</code>. Choose <code>'name'</code> for human readable labels.</p>
</td></tr>
<tr><td><code id="get_analytics_+3A_retry">retry</code></td>
<td>
<p>Number of times to retry the API call in case of failure (defaults to 2).</p>
</td></tr>
<tr><td><code id="get_analytics_+3A_verbosity">verbosity</code></td>
<td>
<p>Level of HTTP information to print during the call:
</p>

<ul>
<li><p> 0: No output
</p>
</li>
<li><p> 1: Show headers
</p>
</li>
<li><p> 2: Show headers and bodies
</p>
</li>
<li><p> 3: Show headers, bodies, and CURL status message.
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_analytics_+3A_timeout">timeout</code></td>
<td>
<p>Maximum number of seconds to wait for the API response.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Retrieves data directly from DHIS2 analytics tables.
</p>
</li>
<li><p> Allows specifying analytics dimensions, return format for identifiers, retry
attempts, and logging verbosity.
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble with detailed information
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Clinical Breast Examination data elements
# XEX93uLsAm2 = CBE Abnormal
# cXe64Yk0QMY = CBE Normal
element_id &lt;- c('cXe64Yk0QMY', 'XEX93uLsAm2')

# Download data from February 2023 to current date
data &lt;- get_analytics(dx %.d% element_id, pe %.d% 'LAST_MONTH')
data

</code></pre>

<hr>
<h2 id='get_analytics_by_level'>Retrieves Analytics Table Data</h2><span id='topic+get_analytics_by_level'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<code>get_analytics_by_level()</code> fetches data from the DHIS2 analytics tables for a
given period and data element(s), without performing any aggregation.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_analytics_by_level(
  element_ids,
  start_date,
  end_date = NULL,
  level = 1,
  org_ids = NULL,
  ...,
  call = caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_analytics_by_level_+3A_element_ids">element_ids</code></td>
<td>
<p>Required vector of data element IDs for which to retrieve data.</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_start_date">start_date</code></td>
<td>
<p>Required start date to retrieve data. It is required and in the format <code>YYYY-MM-dd</code>.</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_end_date">end_date</code></td>
<td>
<p>Optional ending date for data retrieval (default is the current date).</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_level">level</code></td>
<td>
<p>The desired organisation level of data (default: level 1)</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_org_ids">org_ids</code></td>
<td>
<p>Optional list of organization units IDs to be filtered.</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_...">...</code></td>
<td>
<p>Other options that can be passed onto DHIS2 API.</p>
</td></tr>
<tr><td><code id="get_analytics_by_level_+3A_call">call</code></td>
<td>
<p>The caller environment.</p>
</td></tr>
</table>


<h3>Details</h3>


<ul>
<li><p> Retrieves data directly from DHIS2 analytics tables.
</p>
</li>
<li><p> Supports optional arguments for providing organization lists, data elements, and categories.
</p>
</li>
<li><p> Allows specifying DHIS2 session objects, retry attempts, and logging verbosity.
</p>
</li></ul>



<h3>Value</h3>

<p>A tibble with detailed information, including:
</p>

<ul>
<li><p> Geographical identifiers (country, subnational, district, facility, depending on level)
</p>
</li>
<li><p> Reporting period (month, year, fiscal year)
</p>
</li>
<li><p> Data element names
</p>
</li>
<li><p> Category options
</p>
</li>
<li><p> Reported values
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+get_organisations_by_level">get_organisations_by_level()</a></code> for getting the organisations units
</p>
</li>
<li> <p><code><a href="#topic+get_data_elements_with_category_options">get_data_elements_with_category_options()</a></code> for retrieving the data elements
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# Clinical Breast Examination data elements
# XEX93uLsAm2 = CBE Abnormal
# cXe64Yk0QMY = CBE Normal
element_id = c('cXe64Yk0QMY', 'XEX93uLsAm2')

# Download data from February 2023 to current date
data &lt;- get_analytics_by_level(element_ids = element_id,
                               start_date = '2023-02-01')
data

</code></pre>

<hr>
<h2 id='get_data_elements_with_category_options'>Get Data Elements with Category Options</h2><span id='topic+get_data_elements_with_category_options'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<code>get_data_elements_with_category_options()</code> fetches data elements metadata with the
category options from the DHIS2 API server.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data_elements_with_category_options(
  element_ids,
  auth = NULL,
  call = caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_data_elements_with_category_options_+3A_element_ids">element_ids</code></td>
<td>
<p>The data element identifiers whose details being retrieved</p>
</td></tr>
<tr><td><code id="get_data_elements_with_category_options_+3A_auth">auth</code></td>
<td>
<p>The authentication object</p>
</td></tr>
<tr><td><code id="get_data_elements_with_category_options_+3A_call">call</code></td>
<td>
<p>The caller environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the following columns:
</p>

<ul>
<li><p> element_id - The unique identifier for the data element.
</p>
</li>
<li><p> element    - The name of the data element.
</p>
</li>
<li><p> category   - The category options for the elements
</p>
</li>
<li><p> category_id - The unique identifier for the category options
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>

# Fetch the data element metadata for particular element id
elements &lt;- get_data_elements_with_category_options('htFuvGJRW1X')
elements

</code></pre>

<hr>
<h2 id='get_data_sets_by_level'>Retrieves Data Set Reporting Rate Metrics</h2><span id='topic+get_data_sets_by_level'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<code>get_data_sets_by_level()</code> fetches the data set reporting metrics. The metric
can be REPORTING_RATE, REPORTING_RATE_ON_TIME, ACTUAL_REPORTS, ACTUAL_REPORTS_ON_TIME, EXPECTED_REPORTS.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_data_sets_by_level(
  dataset_ids,
  start_date,
  end_date = NULL,
  level = 1,
  org_ids = NULL,
  ...,
  call = caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_data_sets_by_level_+3A_dataset_ids">dataset_ids</code></td>
<td>
<p>Required vector of data sets IDs for which to retrieve data. Required.</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_start_date">start_date</code></td>
<td>
<p>Optional start date to retrieve data. It is required and in the format <code>YYYY-MM-dd</code>.</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_end_date">end_date</code></td>
<td>
<p>Optional ending date for data retrieval (default is the current date).</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_level">level</code></td>
<td>
<p>Required desired organisation level of data (default: level 1) .</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_org_ids">org_ids</code></td>
<td>
<p>Optional list of organization units IDs to be filtered.</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_...">...</code></td>
<td>
<p>Other options that can be passed onto DHIS2 API.</p>
</td></tr>
<tr><td><code id="get_data_sets_by_level_+3A_call">call</code></td>
<td>
<p>The caller environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble with detailed information, including:
</p>

<ul>
<li><p> Geographical identifiers (country, subnational, district, facility, depending on level)
</p>
</li>
<li><p> Reporting period (month, year, fiscal year)
</p>
</li>
<li><p> The reporting metric can be REPORTING_RATE, REPORTING_RATE_ON_TIME, ACTUAL_REPORTS, ACTUAL_REPORTS_ON_TIME, EXPECTED_REPORTS.
</p>
</li></ul>



<h3>See Also</h3>


<ul>
<li> <p><code><a href="#topic+get_organisations_by_level">get_organisations_by_level()</a></code> for getting the organisations units
</p>
</li>
<li> <p><code><a href="#topic+get_data_sets">get_data_sets()</a></code> for retrieving the data sets
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>
# The MoH 745 Cancer Screening Program Monthly Summary Form
dataset_id = c('WWh5hbCmvND')

# Download data from February 2023 to current date
data &lt;- get_data_sets_by_level(dataset_ids = dataset_id,
                               start_date = '2023-02-01')
data

</code></pre>

<hr>
<h2 id='get_metadata'>Get Metadata from a DHIS2 Instance</h2><span id='topic+get_metadata'></span>

<h3>Description</h3>

<p><code>get_metadata</code> retrieves metadata for a specified endpoint of a DHIS2 instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_metadata(
  endpoint,
  ...,
  fields = c("id", "name"),
  retry = 2,
  verbosity = 0,
  timeout = 60,
  call = caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_metadata_+3A_endpoint">endpoint</code></td>
<td>
<p>The DHIS2 API endpoint for the metadata of interest
(e.g., <code>dataElements</code>, <code>organisationUnits</code> endpoints).</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_...">...</code></td>
<td>
<p>One or more <code><a href="#topic+metadata_filter">metadata_filter()</a></code> parameters in key-value pairs.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_fields">fields</code></td>
<td>
<p>The specific columns to be returned in the data frame.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_retry">retry</code></td>
<td>
<p>Number of times to retry the API call in case of failure
(defaults to 2).</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_verbosity">verbosity</code></td>
<td>
<p>Level of HTTP information to print during the call:
</p>

<ul>
<li><p> 0: No output
</p>
</li>
<li><p> 1: Show headers
</p>
</li>
<li><p> 2: Show headers and bodies
</p>
</li>
<li><p> 3: Show headers, bodies, and CURL status message.
</p>
</li></ul>
</td></tr>
<tr><td><code id="get_metadata_+3A_timeout">timeout</code></td>
<td>
<p>Maximum number of seconds to wait for the DHIS2 API response.</p>
</td></tr>
<tr><td><code id="get_metadata_+3A_call">call</code></td>
<td>
<p>The caller environment</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the DHIS2 metadata response.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Get the categories metadata
get_metadata('categories')

# Get the datasets metadata with fields 'id,name,organisationUnits' and filter
# only the datasets with id 'WWh5hbCmvND'
get_metadata('dataSets',
             fields = 'id,name,organisationUnits[id,name,path]',
             id %.eq% 'WWh5hbCmvND')

# Get data elements filtered by dataElementGroups id
get_metadata('dataElements',
             dataElementGroups.id %.eq% 'IXd7DXxZqzL',
             fields = ':all')

</code></pre>

<hr>
<h2 id='get_organisations_by_level'>Get Organisations by Level</h2><span id='topic+get_organisations_by_level'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a>
<code>get_organisations_by_level()</code> is an experimental function that retrieves
the organisation units along with their parent units.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_organisations_by_level(
  level = 1,
  org_ids = NULL,
  auth = NULL,
  call = caller_env()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_organisations_by_level_+3A_level">level</code></td>
<td>
<p>An integer specifying the desired organisation level (default level 1).</p>
</td></tr>
<tr><td><code id="get_organisations_by_level_+3A_org_ids">org_ids</code></td>
<td>
<p>Optional. A vector of organisation identifiers whose details
are being retrieved.</p>
</td></tr>
<tr><td><code id="get_organisations_by_level_+3A_auth">auth</code></td>
<td>
<p>Optional. The authentication object</p>
</td></tr>
<tr><td><code id="get_organisations_by_level_+3A_call">call</code></td>
<td>
<p>The call environment.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the organisation units and their parent units up
to the specified level.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Fetch all the organisation units metadata
organisations &lt;- get_organisations_by_level(level = 2)
organisations

</code></pre>

<hr>
<h2 id='khis_base_url'>Produces the Configured DHIS2 API Base URI</h2><span id='topic+khis_base_url'></span>

<h3>Description</h3>

<p>Produces the Configured DHIS2 API Base URI
</p>


<h3>Usage</h3>

<pre><code class='language-R'>khis_base_url(auth = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="khis_base_url_+3A_auth">auth</code></td>
<td>
<p>The AuthCred credentials</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the DHIS2 base URI
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
    # Set the credentials
    khis_cred(username = 'DHIS2 username',
              password = 'DHIS2 password',
              base_url = 'https://dhis2-instance/api')

    # View the DHIS2 instance API expect 'https://dhis2-instance/api'
    khis_base_url()

    # Clear credentials
    khis_cred_clear()

## End(Not run)
</code></pre>

<hr>
<h2 id='khis_cred'>Sets DHIS2 Credentials</h2><span id='topic+khis_cred'></span>

<h3>Description</h3>

<p><code>khis_cred()</code> sets the credentials for accessing a DHIS2 instance.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>khis_cred(
  config_path = NULL,
  username = NULL,
  password = NULL,
  base_url = deprecated()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="khis_cred_+3A_config_path">config_path</code></td>
<td>
<p>An optional path to a configuration file containing username
and password. This is considered more secure than providing credentials directly
in code.</p>
</td></tr>
<tr><td><code id="khis_cred_+3A_username">username</code></td>
<td>
<p>The DHIS2 username. Only required if configuration file not
provided.</p>
</td></tr>
<tr><td><code id="khis_cred_+3A_password">password</code></td>
<td>
<p>The DHIS2 password. Only required if configuration file not
provided.</p>
</td></tr>
<tr><td><code id="khis_cred_+3A_base_url">base_url</code></td>
<td>
<p>The base URL of the DHIS2 instance. Only required if
configuration file not provided.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>This function allows you to set the credentials for interacting with a DHIS2
server. You can either provide the username and password directly (less secure)
or specify a path to a configuration file containing these credentials. Using
a configuration file is recommended for improved security as it prevents
credentials from being stored directly in your code.
</p>


<h3>Value</h3>

<p>No return value
</p>


<h3>See Also</h3>

<p>Other credential functions: 
<code><a href="#topic+khis_cred_clear">khis_cred_clear</a>()</code>,
<code><a href="#topic+khis_has_cred">khis_has_cred</a>()</code>,
<code><a href="#topic+khis_username">khis_username</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
    # Option 1: Using a configuration file (recommended)
    # Assuming a configuration file named "credentials.json":
    khis_cred(config_path = "path/to/credentials.json")

    # Option 2: Providing credentials directly (less secure)
    khis_cred(username = "your_username",
              password = "your_password",
              base_url='https://dhis2-instance/api')

## End(Not run)
</code></pre>

<hr>
<h2 id='khis_cred_clear'>Clear the Credentials from Memory</h2><span id='topic+khis_cred_clear'></span>

<h3>Description</h3>

<p>Clear the Credentials from Memory
</p>


<h3>Usage</h3>

<pre><code class='language-R'>khis_cred_clear()
</code></pre>


<h3>Value</h3>

<p>No return value
</p>


<h3>See Also</h3>

<p>Other credential functions: 
<code><a href="#topic+khis_cred">khis_cred</a>()</code>,
<code><a href="#topic+khis_has_cred">khis_has_cred</a>()</code>,
<code><a href="#topic+khis_username">khis_username</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
#khis_cred_clear()
</code></pre>

<hr>
<h2 id='khis_has_cred'>Are There Credentials on Hand?</h2><span id='topic+khis_has_cred'></span>

<h3>Description</h3>

<p>Are There Credentials on Hand?
</p>


<h3>Usage</h3>

<pre><code class='language-R'>khis_has_cred(auth = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="khis_has_cred_+3A_auth">auth</code></td>
<td>
<p>The AuthCred credentials</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a boolean value indicating if the credentials are available
</p>


<h3>See Also</h3>

<p>Other credential functions: 
<code><a href="#topic+khis_cred">khis_cred</a>()</code>,
<code><a href="#topic+khis_cred_clear">khis_cred_clear</a>()</code>,
<code><a href="#topic+khis_username">khis_username</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
    # Set the credentials
    khis_cred(username = 'DHIS2 username',
              password = 'DHIS2 password',
              base_url='https://dhis2-instance/api')

    # Check if credentials available. Expect TRUE
    khis_has_cred()

    # Clear credentials
    khis_cred_clear()

    # Check if credentials available. Expect FALSE
    khis_has_cred()

## End(Not run)
</code></pre>

<hr>
<h2 id='khis_username'>Produces the Configured Username</h2><span id='topic+khis_username'></span>

<h3>Description</h3>

<p>Produces the Configured Username
</p>


<h3>Usage</h3>

<pre><code class='language-R'>khis_username(auth = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="khis_username_+3A_auth">auth</code></td>
<td>
<p>The AuthCred credentials</p>
</td></tr>
</table>


<h3>Value</h3>

<p>the username of the user credentials
</p>


<h3>See Also</h3>

<p>Other credential functions: 
<code><a href="#topic+khis_cred">khis_cred</a>()</code>,
<code><a href="#topic+khis_cred_clear">khis_cred_clear</a>()</code>,
<code><a href="#topic+khis_has_cred">khis_has_cred</a>()</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
    # Set the credentials
    khis_cred(username = 'DHIS2 username',
              password = 'DHIS2 password',
              base_url ='https://dhis2-instance/api')

    # View the username expect 'DHIS2 username'
    khis_username()

    # Clear credentials
    khis_cred_clear()

    # View the username expect 'NULL'
    khis_username()

## End(Not run)
</code></pre>

<hr>
<h2 id='khisr-configuration'>khisr Configuration</h2><span id='topic+khisr-configuration'></span><span id='topic+with_khis_quiet'></span><span id='topic+local_khis_quiet'></span>

<h3>Description</h3>

<p>Some aspects of khisr behaviour can be controlled via an option.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>with_khis_quiet(code)

local_khis_quiet(env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="khisr-configuration_+3A_code">code</code></td>
<td>
<p>Code to execute quietly</p>
</td></tr>
<tr><td><code id="khisr-configuration_+3A_env">env</code></td>
<td>
<p>The environment to use for scoping</p>
</td></tr>
</table>


<h3>Value</h3>

<p>No return value, called for side effects
</p>
<p>No return value, called for side effects
</p>
<p>No return value, called for side effects
</p>


<h3>Messages</h3>

<p>The <code>khis_quiet</code> option can be used to suppress messages form khisr. By
default, khisr always messages, i.e. it is <em>not</em> quiet.
</p>
<p>set <code>khis_quiet</code> to <code>TRUE</code> to suppress message, by one of these means,
in order of decreasing scope:
</p>

<ul>
<li><p> Put <code>options(khis_quiet = TRUE)</code> in the start-up file, such as <code>.Rprofile</code>,
or  in your R script.
</p>
</li>
<li><p> Use <code>local_khis_quiet()</code> to silence khisr in a specific scope.
</p>
</li>
<li><p> Use <code>with_khis_quite</code> to run small bit of code silently.
</p>
</li></ul>

<p><code>local_khis_quiet</code> and <code>with_khis</code> follow the conventions of the
<a href="https://withr.r-lib.org">withr</a> package.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
    # message: "The credentials have been set."
    khis_cred(username = 'username',
              password = 'password',
              base_url = 'https://dhis2-instance/api')

    # suppress messages for a small amount of code
    with_khis_quiet(
        khis_cred(username = 'username',
                  password = 'password',
                  base_url = 'https://dhis2-instance/api')
    )

## End(Not run)

## Not run: 
    # message: "The credentials have been set."
    khis_cred(username = 'username',
              password = 'password',
              base_url = 'https://dhis2-instance/api')

    # suppress messages for a in a specific scope
    local_khis_quiet()

    # no message
    khis_cred(username = 'username',
              password = 'password',
              base_url = 'https://dhis2-instance/api')

    # clear credentials
    khis_cred_clear()

## End(Not run)
</code></pre>

<hr>
<h2 id='metadata-filter'>Metadata Filter</h2><span id='topic+metadata-filter'></span><span id='topic+metadata_filter'></span><span id='topic++25.eq+25'></span><span id='topic++25.ieq+25'></span><span id='topic++25.~eq+25'></span><span id='topic++25.ne+25'></span><span id='topic++25.Like+25'></span><span id='topic++25.~Like+25'></span><span id='topic++25.+5ELike+25'></span><span id='topic++25.~+5ELike+25'></span><span id='topic++25.Like+24+25'></span><span id='topic++25.~Like+24+25'></span><span id='topic++25.like+25'></span><span id='topic++25.~like+25'></span><span id='topic++25.+5Elike+25'></span><span id='topic++25.~+5Elike+25'></span><span id='topic++25.like+24+25'></span><span id='topic++25.~like+24+25'></span><span id='topic++25.gt+25'></span><span id='topic++25.ge+25'></span><span id='topic++25.lt+25'></span><span id='topic++25.le+25'></span><span id='topic++25.token+25'></span><span id='topic++25.~token+25'></span><span id='topic++25.in+25'></span><span id='topic++25.~in+25'></span>

<h3>Description</h3>

<p>Formats a metadata filter to DHIS 2 comparison operators.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>metadata_filter(property, operator, values, call = caller_env())

property %.eq% values

property %.ieq% values

property %.~eq% values

property %.ne% values

property %.Like% values

property %.~Like% values

property %.^Like% values

property %.~^Like% values

property %.Like$% values

property %.~Like$% values

property %.like% values

property %.~like% values

property %.^like% values

property %.~^like% values

property %.like$% values

property %.~like$% values

property %.gt% values

property %.ge% values

property %.lt% values

property %.le% values

property %.token% values

property %.~token% values

property %.in% values

property %.~in% values
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metadata-filter_+3A_property">property</code></td>
<td>
<p>The property on the metadata you want to filter on</p>
</td></tr>
<tr><td><code id="metadata-filter_+3A_operator">operator</code></td>
<td>
<p>The comparison operator you want to perform</p>
</td></tr>
<tr><td><code id="metadata-filter_+3A_values">values</code></td>
<td>
<p>The value to check against</p>
</td></tr>
<tr><td><code id="metadata-filter_+3A_call">call</code></td>
<td>
<p>description</p>
</td></tr>
</table>


<h3>Details</h3>

<p>To filter the metadata there are several filter operations that can be applied
to the returned list of metadata. The format of the filter itself is
straight-forward and follows the pattern property:operator:value, where
property is the property on the metadata you want to filter on, operator is
the comparison operator you want to perform and value is the value to check
against (not all operators require value). To view the operator see
<a href="https://docs.dhis2.org/en/develop/using-the-api/dhis-core-version-master/metadata.html#webapi_metadata_object_filter">DHIS 2 Operator</a>
</p>

<ul>
<li> <p><code style="white-space: pre;">&#8288;%.eq%&#8288;</code>        - Equality
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.ieq%&#8288;</code>       - Case insensitive string, match exact
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~eq%&#8288;</code>       - Inequality
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.ne%&#8288;</code>        - Inequality
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.Like%&#8288;</code>      - Case sensitive string, match anywhere
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~Like%&#8288;</code>     - Case sensitive string, not match anywhere
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.^Like%&#8288;</code>     - Case sensitive string, match start
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~^Like%&#8288;</code>    - Case sensitive string, not match start
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.Like$%&#8288;</code>     - Case sensitive string, match end
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~Like$%&#8288;</code>    - Case sensitive string, not match end
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.like%&#8288;</code>      - Case insensitive string, match anywhere
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~like%&#8288;</code>     - Case insensitive string, not match anywhere
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288; %.^like%&#8288;</code>    - Case insensitive string, match start
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~^like%&#8288;</code>    - Case insensitive string, not match start
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.like$%&#8288;</code>     - Case insensitive string, match end
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~like$%&#8288;</code>    - Case insensitive string, not match end
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.gt%&#8288;</code>        - Greater than
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.ge%&#8288;</code>        - Greater than or equal
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.lt%&#8288;</code>        - Less than
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.le%&#8288;</code>        - Less than or equal
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.token%&#8288;</code>     - Match on multiple tokens in search property
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~token%&#8288;</code>    - Not match on multiple tokens in search property
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.in%&#8288;</code>        - Find objects matching 1 or more values
</p>
</li>
<li> <p><code style="white-space: pre;">&#8288;%.~in%&#8288;</code>       - Find objects not matching 1 or more values
</p>
</li></ul>



<h3>Value</h3>

<p>A spliced list with filter in the format property:operator:value
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
# Generate an equality filter
id %.eq% 'element_id'

# Finding multiple ids
'id' %.in% c('id1', 'id2', 'id3')

# Get all data elements which have a data set with id ID1
'dataSetElements.dataSet.id' %.eq% 'ID1'

# get data elements which are members of the ANC data element group
'dataElementGroups.id' %.eq% 'qfxEYY9xAl6'

# Get data elements which have any option set
metadata_filter('optionSet', '!null', NULL)

</code></pre>

<hr>
<h2 id='metadata-helpers'>DHIS2 Metadata Helper Functions</h2><span id='topic+metadata-helpers'></span><span id='topic+get_categories'></span><span id='topic+get_category_combos'></span><span id='topic+get_category_option_combos'></span><span id='topic+get_category_option_group_sets'></span><span id='topic+get_category_option_groups'></span><span id='topic+get_category_options'></span><span id='topic+get_data_element_group_sets'></span><span id='topic+get_data_element_groups'></span><span id='topic+get_data_elements'></span><span id='topic+get_data_sets'></span><span id='topic+get_user_groups'></span><span id='topic+get_indicator_group_sets'></span><span id='topic+get_indicator_groups'></span><span id='topic+get_indicators'></span><span id='topic+get_option_group_sets'></span><span id='topic+get_option_groups'></span><span id='topic+get_option_sets'></span><span id='topic+get_options'></span><span id='topic+get_organisation_unit_groupsets'></span><span id='topic+get_organisation_unit_groups'></span><span id='topic+get_organisation_units'></span><span id='topic+get_organisation_unit_levels'></span><span id='topic+get_dimensions'></span><span id='topic+get_period_types'></span><span id='topic+get_user_profile'></span>

<h3>Description</h3>

<p>These functions simplify retrieving data from specific DHIS2 API endpoints
using <code><a href="#topic+get_metadata">get_metadata()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_categories(...)

get_category_combos(...)

get_category_option_combos(...)

get_category_option_group_sets(...)

get_category_option_groups(...)

get_category_options(...)

get_data_element_group_sets(...)

get_data_element_groups(...)

get_data_elements(...)

get_data_sets(...)

get_user_groups(...)

get_indicator_group_sets(...)

get_indicator_groups(...)

get_indicators(...)

get_option_group_sets(...)

get_option_groups(...)

get_option_sets(...)

get_options(...)

get_organisation_unit_groupsets(...)

get_organisation_unit_groups(...)

get_organisation_units(...)

get_organisation_unit_levels(...)

get_dimensions(...)

get_period_types(...)

get_user_profile()
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="metadata-helpers_+3A_...">...</code></td>
<td>

<p>Arguments passed on to <code><a href="#topic+get_metadata">get_metadata</a></code>
</p>

<dl>
<dt><code>fields</code></dt><dd><p>The specific columns to be returned in the data frame.</p>
</dd>
<dt><code>retry</code></dt><dd><p>Number of times to retry the API call in case of failure
(defaults to 2).</p>
</dd>
<dt><code>verbosity</code></dt><dd><p>Level of HTTP information to print during the call:
</p>

<ul>
<li><p> 0: No output
</p>
</li>
<li><p> 1: Show headers
</p>
</li>
<li><p> 2: Show headers and bodies
</p>
</li>
<li><p> 3: Show headers, bodies, and CURL status message.
</p>
</li></ul>
</dd>
<dt><code>timeout</code></dt><dd><p>Maximum number of seconds to wait for the DHIS2 API response.</p>
</dd>
<dt><code>call</code></dt><dd><p>The caller environment</p>
</dd>
</dl>
</td></tr>
</table>


<h3>Value</h3>

<p>A tibble containing the DHIS2 metadata response.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>

# Get all organisation units
get_organisation_units()

# Get all data elements
get_data_elements()

# Get data elements by element ids
get_data_elements(id %.in% c('VR7vdS7P0Gb', 'gQro1y7Rsbq'))

# Get datasets by name with the word 'MOH 705'
get_data_sets(name %.like% 'MOH 705')

</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
