<!DOCTYPE html><html><head><title>Help for package webutils</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {webutils}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#demo_httpuv'><p>Demo multipart parser with httpuv</p></a></li>
<li><a href='#demo_rhttpd'><p>Demo multipart parser with rhttpd</p></a></li>
<li><a href='#parse_http'><p>Parse http request</p></a></li>
<li><a href='#parse_multipart'><p>Parse a multipart/form-data request</p></a></li>
<li><a href='#parse_query'><p>Parse query string</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Utility Functions for Developing Web Applications</td>
</tr>
<tr>
<td>Version:</td>
<td>1.2.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Jeroen Ooms</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Jeroen Ooms &lt;jeroen@berkeley.edu&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Parses http request data in application/json, multipart/form-data, 
    or application/x-www-form-urlencoded format. Includes example of hosting
    and parsing html form data in R using either 'httpuv' or 'Rhttpd'.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file LICENSE</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://jeroen.r-universe.dev/webutils">https://jeroen.r-universe.dev/webutils</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/jeroen/webutils/issues">https://github.com/jeroen/webutils/issues</a></td>
</tr>
<tr>
<td>Imports:</td>
<td>curl (&ge; 2.5), jsonlite</td>
</tr>
<tr>
<td>Suggests:</td>
<td>httpuv, testthat</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.0.2</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>yes</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2023-11-24 11:34:37 UTC; jeroen</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2023-11-24 12:00:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='demo_httpuv'>Demo multipart parser with httpuv</h2><span id='topic+demo_httpuv'></span>

<h3>Description</h3>

<p>Starts the httpuv web server and hosts a simple form including a file
upload to demo the multipart parser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_httpuv(port = 9359)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="demo_httpuv_+3A_port">port</code></td>
<td>
<p>which port number to run the http server</p>
</td></tr>
</table>


<h3>See Also</h3>

<p>Other demo: 
<code><a href="#topic+demo_rhttpd">demo_rhttpd</a>()</code>
</p>

<hr>
<h2 id='demo_rhttpd'>Demo multipart parser with rhttpd</h2><span id='topic+demo_rhttpd'></span>

<h3>Description</h3>

<p>Starts the Rhttpd web server and hosts a simple form including a file
upload to demo the multipart parser.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>demo_rhttpd()
</code></pre>


<h3>See Also</h3>

<p>Other demo: 
<code><a href="#topic+demo_httpuv">demo_httpuv</a>()</code>
</p>

<hr>
<h2 id='parse_http'>Parse http request</h2><span id='topic+parse_http'></span>

<h3>Description</h3>

<p>Parse the body of a http request, based on the <code>Content-Type</code> request
header. Currently supports the three most important content types:
<code>application/x-www-form-urlencoded</code> (<code><a href="#topic+parse_query">parse_query</a></code>),
<code>multipart/form-data</code> (<code><a href="#topic+parse_multipart">parse_multipart</a></code>) and
<code>application/json</code> (<code><a href="jsonlite.html#topic+fromJSON">fromJSON</a></code>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_http(body, content_type, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_http_+3A_body">body</code></td>
<td>
<p>request body of the http request</p>
</td></tr>
<tr><td><code id="parse_http_+3A_content_type">content_type</code></td>
<td>
<p>content-type http request header as specified by the client</p>
</td></tr>
<tr><td><code id="parse_http_+3A_...">...</code></td>
<td>
<p>additional arguments passed to parser function</p>
</td></tr>
</table>


<h3>Examples</h3>

<pre><code class='language-R'># Parse json encoded payload:
parse_http('{"foo":123, "bar":true}', 'application/json')

# Parse url-encoded payload
parse_http("foo=1%2B1%3D2&amp;bar=yin%26yang", "application/x-www-form-urlencoded")

## Not run: use demo app to parse multipart/form-data payload
demo_rhttpd()

## End(Not run)
</code></pre>

<hr>
<h2 id='parse_multipart'>Parse a multipart/form-data request</h2><span id='topic+parse_multipart'></span>

<h3>Description</h3>

<p>Parse a multipart/form-data request, which is usually generated from a HTML form
submission. The parameters can include both text values as well as binary files.
They can be distinguished from the presence of a <code>filename</code> attribute.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_multipart(body, boundary)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_multipart_+3A_body">body</code></td>
<td>
<p>body of the HTTP request. Must be raw or character vector.</p>
</td></tr>
<tr><td><code id="parse_multipart_+3A_boundary">boundary</code></td>
<td>
<p>boundary string as specified in the <code>Content-Type</code> request header.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>A multipart/form-data request consists of a single body which contains one or more
values plus meta-data, separated using a boundary string. This boundary string
is chosen by the client (e.g. the browser) and specified in the <code>Content-Type</code>
header of the HTTP request. There is no escaping; it is up to the client to choose
a boundary string that does not appear in one of the values.
</p>
<p>The parser is written in pure R, but still pretty fast because it uses the regex
engine.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: example form
demo_rhttpd()

## End(Not run)
</code></pre>

<hr>
<h2 id='parse_query'>Parse query string</h2><span id='topic+parse_query'></span>

<h3>Description</h3>

<p>Parse http parameters from a query string. This includes unescaping
of url-encoded values.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>parse_query(query)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="parse_query_+3A_query">query</code></td>
<td>
<p>a url-encoded query string</p>
</td></tr>
</table>


<h3>Details</h3>

<p>For http GET requests, the query string is specified
in the URL after the question mark. For http POST or PUT requests, the query
string can be used in the request body when the <code>Content-Type</code> header
is set to <code>application/x-www-form-urlencoded</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>q &lt;- "foo=1%2B1%3D2&amp;bar=yin%26yang"
parse_query(q)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
