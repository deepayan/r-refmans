<!DOCTYPE html><html lang="en"><head><title>Help for package BlandAltmanLeh</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {BlandAltmanLeh}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#BlandAltmanLeh-package'>
<p>(Slightly extended) Bland-Altman plots</p>
BlandAltmanLeh</a></li>
<li><a href='#bland.altman.PEFR'><p>PEFR Data from Bland JM and Altman DG 1986</p></a></li>
<li><a href='#bland.altman.plot'><p>Produce Bland-Altman Plot</p>
</p>
<p>Bland-AltmanPlots for assessing agreement between two measuring methods or</p>
repeatability (test-retest agreement) of measurements. Using either base graphics
or ggplot2.</a></li>
<li><a href='#bland.altman.stats'><p>Calculate statistics for Bland-Altman-Plot</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Type:</td>
<td>Package</td>
</tr>
<tr>
<td>Title:</td>
<td>Plots (Slightly Extended) Bland-Altman Plots</td>
</tr>
<tr>
<td>Version:</td>
<td>0.3.1</td>
</tr>
<tr>
<td>Date:</td>
<td>2015-12-20</td>
</tr>
<tr>
<td>Author:</td>
<td>Bernhard Lehnert</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Bernhard Lehnert &lt;bernhard.lehnert@uni-greifswald.de&gt;</td>
</tr>
<tr>
<td>Description:</td>
<td>Bland-Altman Plots using either base graphics or ggplot2,
    augmented with confidence intervals, with detailed return values and
    a sunflowerplot option for data with ties.</td>
</tr>
<tr>
<td>Suggests:</td>
<td>ggplot2, knitr, ggExtra</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-2">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a> [expanded from: GPL]</td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>5.0.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2015-12-23 13:34:58 UTC; Bernhard</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2015-12-23 23:32:17</td>
</tr>
</table>
<hr>
<h2 id='BlandAltmanLeh-package'>
(Slightly extended) Bland-Altman plots
BlandAltmanLeh
</h2><span id='topic+BlandAltmanLeh-package'></span><span id='topic+BlandAltmanLeh'></span>

<h3>Description</h3>

<p>Bland-Altman Plots for assessing agreement between two methods of clinical
measurement and returning associated statistics. Plots are optionally extended
by confidence intervals as described in &quot;J. Martin Bland, Douglas 
G. Altman (1986): Statistical Methods For Assessing Agreement Between Two Methods Of
Clinical Measurement&quot; but not included in the graphics of that publication.
Either base graphics or ggplot2 can be used.
</p>


<h3>Details</h3>


<table>
<tr>
 <td style="text-align: left;">
Package: </td><td style="text-align: left;"> BlandAltmanLeh</td>
</tr>
<tr>
 <td style="text-align: left;">
Type: </td><td style="text-align: left;"> Package</td>
</tr>
<tr>
 <td style="text-align: left;">
Version: </td><td style="text-align: left;"> 0.3.1</td>
</tr>
<tr>
 <td style="text-align: left;">
Date: </td><td style="text-align: left;"> 2015-12-23</td>
</tr>
<tr>
 <td style="text-align: left;">
License: </td><td style="text-align: left;"> GPL</td>
</tr>
<tr>
 <td style="text-align: left;">
</td>
</tr>

</table>

<p>Bland Altman plots are a diagnostic tool for assessing the agreement between
two methods of measurement or assessing retest reliability from two measurements.
This package offers plots in base and ggplot2 graphics as well as detailed
descriptive statistics, thus supporting the construction of individual plots
based on Bland Altman plots. Bland and Altman describe a way for constructing  
confidence intervals. This package computes these confidence intervals and 
includes them into the plots. It also invents the Sunflower-Bland-Altman plot
for data with ties.
</p>


<h3>Author(s)</h3>

<p>Bernhard Lehnert
</p>
<p>Maintainer: Bernhard K. Lehnert &lt;bernhard.lehnert@uni-greifswald.de&gt;
</p>


<h3>References</h3>

<p>Bland JM, Altman DG, Statistical Methods For Assessing Agreement Between Two 
Methods Of Clinical Measurement, Lancet, 1986; 307-310.
</p>
<p>Altman DG, Bland JM, Measurement in medicine: the analysis of method comparison
studies, The Statistician 1983; 32, 307-317.
</p>
<p>Vaz S et al., The Case for Using the Repeatability Coeffcient When Calculating
Test-Retest Reliability, PLOS ONE, Sept. 2013, Vol 8, Issue 9.
</p>


<h3>See Also</h3>

 <p><code><a href="#topic+bland.altman.plot">bland.altman.plot</a>,<a href="#topic+bland.altman.stats">bland.altman.stats</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simple basic Bland Altman plot
a &lt;- rnorm(40,30,10)
b &lt;- 1.01*a + rnorm(40)
bland.altman.plot(a,b, xlab="mean", ylab="difference")

# to get all the data for further analysis
bland.altman.plot(a,b, xlab="mean", ylab="difference", silent=FALSE)

# to include confidence intervals into the plot
bland.altman.plot(a,b, xlab="mean", ylab="difference", conf.int=.95)

# to plot in ggplot2
bland.altman.plot(a,b, graph.sys="ggplot2")

# to mark ties in a Sunflower-Bland-Altman plot
a &lt;- sample(1:5, 40, replace=TRUE)
b &lt;- rep(c(1,2,3,3,5,5,5,5),5)
bland.altman.plot(a, b, sunflower=TRUE)
 
</code></pre>

<hr>
<h2 id='bland.altman.PEFR'>PEFR Data from Bland JM and Altman DG 1986</h2><span id='topic+bland.altman.PEFR'></span>

<h3>Description</h3>

<p>Peak expiratory flow data from 17 members of Bland's family, taken with two 
different instruments, each twice. This data is for explanatory use only.
Columns 1 and 2 were measured with the &quot;Wright&quot; peak flow meter, columns 3
and 4 with the &quot;Mini Wright&quot; peak flow meter. 
These are the data behind fig. 1, fig. 2 and fig. 6 of the original paper and
these can be easily reconstructed
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bland.altman.PEFR
</code></pre>


<h3>Format</h3>

<p>An object of class <code>data.frame</code> with 17 rows and 4 columns.</p>


<h3>Examples</h3>

<pre><code class='language-R'># this is what fig. 1. would have looked like in R:
x &lt;- bland.altman.PEFR[["bigger.first"]]
y &lt;- bland.altman.PEFR[["smaller.first"]]
plot(x,y, xlab="PEFR by large meter",ylab="PEFR by mini meter", 
     xlim=c(0,800), ylim=c(0,800))
abline(0,1)
</code></pre>

<hr>
<h2 id='bland.altman.plot'>Produce Bland-Altman Plot
Bland-AltmanPlots for assessing agreement between two measuring methods or
repeatability (test-retest agreement) of measurements. Using either base graphics
or ggplot2.</h2><span id='topic+bland.altman.plot'></span>

<h3>Description</h3>

<p>Produce Bland-Altman Plot
</p>
<p>Bland-AltmanPlots for assessing agreement between two measuring methods or
repeatability (test-retest agreement) of measurements. Using either base graphics
or ggplot2.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bland.altman.plot(group1, group2, two = 1.96, mode = 1,
  graph.sys = "base", conf.int = 0, silent = TRUE, sunflower = FALSE,
  geom_count = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bland.altman.plot_+3A_group1">group1</code></td>
<td>
<p>Measurements with first method or first measurement</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_group2">group2</code></td>
<td>
<p>Measurements with second method or second measurement</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_two">two</code></td>
<td>
<p>Lines are drawn &quot;two&quot; standard deviations from mean differences.
This defaults to 1.96 for proper 95 percent confidence interval estimation
but can be set to 2.0 for better agreement with e. g. the Bland Altman publication.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_mode">mode</code></td>
<td>
<p>if 1 then difference group1 minus group2 is used, if 2 then
group2 minus group1 is used. Defaults to 1.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_graph.sys">graph.sys</code></td>
<td>
<p>Graphing system within R. This defaults to &quot;base&quot; but can be
one out of <code>c("base", "ggplot2")</code>, providing ggplot2 is installed.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_conf.int">conf.int</code></td>
<td>
<p>Defaults to 0 which draws the usual Bland Altman plot which 
contains no confidence intervalls. Change to .95 for 95 percent confidence
intervalls to be drawn.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_silent">silent</code></td>
<td>
<p>logical. If graph.sys==&quot;base&quot; and silent==TRUE then no return value. 
If graph.sys==&quot;base&quot; and silent==FALSE then returns statistics.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_sunflower">sunflower</code></td>
<td>
<p>logical. If TRUE, the plot will be based on a sunflower plot
and ties will be marked accordingly. Try with data with ties. Works only with
<code>graph.sys=="base"</code>.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_geom_count">geom_count</code></td>
<td>
<p>logical. If TRUE, the dots will get larger the more frequent
given pair is. Use in presence of ties. Works only with
<code>graph.sys=="ggplot2"</code> version &gt;=2.0.0.</p>
</td></tr>
<tr><td><code id="bland.altman.plot_+3A_...">...</code></td>
<td>
<p>passed on to graphics functions if <code>graph.sys=="base"</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Depends on graphic system chosen. In case of &quot;base&quot; depending on whether
silent==TRUE. If silent==TRUE then no returns. If silent==FALSE than returns
list of statistics as returned by <code>bland.altman.stats()</code>. In case the 
graphics system is &quot;ggplot2&quot; than the graphic object is returned so that it 
can be printed or altered.
</p>


<h3>Author(s)</h3>

<p>Bernhard Lehnert &lt;bernhard.lehnert@uni-greifswald.de&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bland.altman.stats">bland.altman.stats</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bland.altman.plot(rnorm(20), rnorm(20), xlab="mean measurement", 
                  ylab="differences", main="Example plot")
                  
bland.altman.plot(rnorm(20), 2+.8*rnorm(20), xlab="mean measurement", 
                  ylab="differences", conf.int=.95)
                  
bland.altman.plot(rnorm(200), 2+.8*rnorm(200), xlab="mean measurement", 
                  ylab="differences", conf.int=.95)
                  
# this is what fig.2 in Bland&amp;Altman1986 would have looked like
PEFR1 &lt;- bland.altman.PEFR[,1]
PEFR2 &lt;- bland.altman.PEFR[,3]
bland.altman.plot(PEFR1, PEFR2, silent=TRUE, xlim=c(0,800),
                  xlab="Average PEFR by two meters",
                  ylab="Difference in PEFR (large-mini)")

# and this is the same but with additional 95 percent CIs
data(bland.altman.PEFR)
bland.altman.plot(PEFR1, PEFR2, silent=TRUE, conf.int=.95, xlim=c(0,800))
                  
# an example with many ties and the 'sunflower'-option
a &lt;- rep(c(1,1,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,5,6,6),2)
b &lt;- rep(c(1,1,1,2,2,2,3,1,4,2,5,3,3,3,3,3),3)
bland.altman.plot(a,b,sunflower=TRUE, xlab="Mean",ylab="Difference",
                  main="discrete values lead to ties")
                  
library(ggplot2)
a &lt;- bland.altman.plot(rnorm(20), rnorm(20), graph.sys="ggplot2", conf.int=.9)
print(a + xlab("you can change this later") + ggtitle("Title goes here"))                  
</code></pre>

<hr>
<h2 id='bland.altman.stats'>Calculate statistics for Bland-Altman-Plot</h2><span id='topic+bland.altman.stats'></span>

<h3>Description</h3>

<p>Does the computation for Bland Altman plots. This will usually be called from
graphic functions like <code>bland.altman.plot</code> but will be usefull for 
customized plot (see examples for color coded BA plot). Offers symmetric 
confidence intervalls for bias and upper and lower limits.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bland.altman.stats(group1, group2, two = 1.96, mode = 1, conf.int = 0.95)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="bland.altman.stats_+3A_group1">group1</code></td>
<td>
<p>vector of numerics to be compared to group2</p>
</td></tr>
<tr><td><code id="bland.altman.stats_+3A_group2">group2</code></td>
<td>
<p>vector of numerics to be compared to group1</p>
</td></tr>
<tr><td><code id="bland.altman.stats_+3A_two">two</code></td>
<td>
<p>numeric defines how many standard deviations from mean are to be 
computed, defaults to 1.96 as this gives proper 95 percent CI. However, in the
original publication a factor of 2 is used.</p>
</td></tr>
<tr><td><code id="bland.altman.stats_+3A_mode">mode</code></td>
<td>
<p>if 1 then difference group1 minus group2 is used, if 2 then
group2 minus group1 is used. Defaults to 1.</p>
</td></tr>
<tr><td><code id="bland.altman.stats_+3A_conf.int">conf.int</code></td>
<td>
<p>usefull</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>means</code> vector of means, i. e. data for the x axis
</p>
<p><code>diffs</code> vector of differences, i. e. data for the y axis
</p>
<p><code>groups</code> data.frame containing pairwise complete cases of group1 and 
group2. NAs are removed.
</p>
<p><code>based.on</code> count of pairwise complete cases in groups
</p>
<p><code>lower.limit</code> lower limit for BA plot
</p>
<p><code>mean.diffs</code> mean of differences, also called 'bias'
</p>
<p><code>upper.limit</code> upper limit for BA plot
</p>
<p><code>lines</code> vector containing y values where to draw horizontal 
lines, i. e. mean of differences minus &quot;two&quot; standard deviations, mean of 
differences and mean of differences plus &quot;two&quot; standard deviations (i. e.
<code>c(lower.limit, mean.diffs, upper.limit</code>). This is convenient for 
printing.
</p>
<p><code>CI.lines</code> vector of confidence intervalls for the values of 
lines (based on the assumption of normal distribution of differences 
<code>diffs</code>).
</p>
<p><code>two</code> the argument 'two'
</p>
<p><code>critical.diff</code> critical difference, i. e. 'two' times standard 
deviation of differences, equals half the difference of lower.limit and 
upper.limit
</p>


<h3>Author(s)</h3>

<p>Bernhard Lehnert &lt;bernhard.lehnert@uni-greifswald.de&gt;
</p>


<h3>See Also</h3>

<p><code><a href="#topic+bland.altman.plot">bland.altman.plot</a></code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'># simple calculation of stats:
a &lt;- rnorm(20)
b &lt;- jitter(a)
print(bland.altman.stats(a, b))
print(bland.altman.stats(a, b)$critical.diff)

# drawing Bland-Altman-Plot with color coding sex:
example.data &lt;- data.frame(sex = gl(2,6,labels=c("f","m")),
                 m1 = c(16,10,14,18,16,15,18,19,14,11,11,17),
                 m2 = c(18, 9,15,19,19,13,19,20,14,11,13,17))
ba &lt;- bland.altman.stats(example.data$m1, example.data$m2)
plot(ba$means, ba$diffs, col=example.data$sex, ylim=c(-4,4))
abline(h=ba$lines, lty=2)
              
# compute 95%-CIs for the bias and upper and lower limits of PEFR data as 
# in Bland&amp;Altman 1986
bland.altman.stats(bland.altman.PEFR[,1],bland.altman.PEFR[,3])$CI.lines
# apparently wrong results? CAVE: Bland&amp;Altman are using two=2, thus
bland.altman.stats(bland.altman.PEFR[,1],bland.altman.PEFR[,3], two=2)$CI.lines
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
