<!DOCTYPE html><html><head><title>Help for package cards</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {cards}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#adam'><p>Example ADaM Data</p></a></li>
<li><a href='#alias_as_fmt_fn'><p>Convert Alias to Function</p></a></li>
<li><a href='#apply_fmt_fn'><p>Apply Formatting Functions</p></a></li>
<li><a href='#ard_attributes'><p>ARD Attributes</p></a></li>
<li><a href='#ard_categorical'><p>Categorical ARD Statistics</p></a></li>
<li><a href='#ard_complex'><p>Complex ARD Summaries</p></a></li>
<li><a href='#ard_continuous'><p>Continuous ARD Statistics</p></a></li>
<li><a href='#ard_dichotomous'><p>Dichotomous ARD Statistics</p></a></li>
<li><a href='#ard_hierarchical'><p>Hierarchical ARD Statistics</p></a></li>
<li><a href='#ard_missing'><p>Missing ARD Statistics</p></a></li>
<li><a href='#ard_stack'><p>Stack ARDs</p></a></li>
<li><a href='#as_nested_list'><p>ARD as Nested List</p></a></li>
<li><a href='#bind_ard'><p>Bind ARDs</p></a></li>
<li><a href='#cards-package'><p>cards: Analysis Results Data</p></a></li>
<li><a href='#check_ard_structure'><p>Check ARD Structure</p></a></li>
<li><a href='#check_pkg_installed'><p>Check Package Installation</p></a></li>
<li><a href='#default_stat_labels'><p>Defaults for Statistical Arguments</p></a></li>
<li><a href='#eval_capture_conditions'><p>Evaluate and Capture Conditions</p></a></li>
<li><a href='#get_ard_statistics'><p>ARD Statistics as List</p></a></li>
<li><a href='#label_cards'><p>Generate Formatting Function</p></a></li>
<li><a href='#maximum_variable_value'><p>Maximum Value</p></a></li>
<li><a href='#nest_for_ard'><p>ARD Nesting</p></a></li>
<li><a href='#print_ard_conditions'><p>Print ARD Condition Messages</p></a></li>
<li><a href='#print.card'><p>Print</p></a></li>
<li><a href='#process_selectors'><p>Process tidyselectors</p></a></li>
<li><a href='#reexports'><p>Objects exported from other packages</p></a></li>
<li><a href='#replace_null_statistic'><p>Replace NULL Statistics with Specified Value</p></a></li>
<li><a href='#round5'><p>Rounding of Numbers</p></a></li>
<li><a href='#selectors'><p>ARD Selectors</p></a></li>
<li><a href='#shuffle_ard'><p>Shuffle ARD</p></a></li>
<li><a href='#summary_functions'><p>Summary Functions</p></a></li>
<li><a href='#syntax'><p>Selecting Syntax</p></a></li>
<li><a href='#tidy_ard_order'><p>Standard Order of ARD</p></a></li>
<li><a href='#tidy_as_ard'><p>Build ARD from Tidier</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Analysis Results Data</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Description:</td>
<td>Construct Clinical Data Interchange Standards Consortium
    (CDISC) compliant Analysis Results Data objects. These objects are
    used and re-used to construct summary tables, visualizations, and
    written reports. The package also exports utilities for working with
    these objects and creating new Analysis Results Data objects.</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://github.com/insightsengineering/cards">https://github.com/insightsengineering/cards</a>,
<a href="https://insightsengineering.github.io/cards/">https://insightsengineering.github.io/cards/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/insightsengineering/cards/issues">https://github.com/insightsengineering/cards/issues</a></td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1)</td>
</tr>
<tr>
<td>Imports:</td>
<td>cli (&ge; 3.6.1), dplyr (&ge; 1.1.2), glue (&ge; 1.6.2), rlang (&ge;
1.1.1), tidyr (&ge; 1.3.0), tidyselect (&ge; 1.2.0)</td>
</tr>
<tr>
<td>Suggests:</td>
<td>spelling (&ge; 2.2.0), testthat (&ge; 3.2.0), withr (&ge; 3.0.0)</td>
</tr>
<tr>
<td>Config/Needs/website:</td>
<td>rmarkdown, jsonlite, yaml, gtsummary,
insightsengineering/nesttemplate</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>Config/testthat/parallel:</td>
<td>true</td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>Language:</td>
<td>en-US</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.3.1</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-02-23 19:34:31 UTC; sjobergd</td>
</tr>
<tr>
<td>Author:</td>
<td>Daniel D. Sjoberg <a href="https://orcid.org/0000-0003-0862-2018"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre],
  Becca Krouse [aut],
  F. Hoffmann-La Roche AG [cph, fnd]</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Daniel D. Sjoberg &lt;danield.sjoberg@gmail.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-02-26 16:50:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='adam'>Example ADaM Data</h2><span id='topic+adam'></span><span id='topic+ADSL'></span><span id='topic+ADAE'></span><span id='topic+ADTTE'></span>

<h3>Description</h3>

<p>Data frame imported from the <a href="https://github.com/cdisc-org/sdtm-adam-pilot-project">CDISC SDTM/ADaM Pilot Project</a>
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ADSL

ADAE

ADTTE
</code></pre>


<h3>Format</h3>

<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 254 rows and 48 columns.
</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 1191 rows and 55 columns.
</p>
<p>An object of class <code>tbl_df</code> (inherits from <code>tbl</code>, <code>data.frame</code>) with 254 rows and 26 columns.
</p>

<hr>
<h2 id='alias_as_fmt_fn'>Convert Alias to Function</h2><span id='topic+alias_as_fmt_fn'></span>

<h3>Description</h3>

<p>Accepted aliases are non-negative integers and strings.
</p>
<p>The integers are converted to functions that round the statistics
to the number of decimal places to match the integer.
</p>
<p>The formatting strings come in the form <code>"xx"</code>, <code>"xx.x"</code>, <code>"xx.x%"</code>, etc.
The number of <code>x</code>s that appear after the decimal place indicate the number of
decimal places the statistics will be rounded to.
The number of <code>x</code>s that appear before the decimal place indicate the leading
spaces that are added to the result.
If the string ends in <code>"%"</code>, results are scaled by 100 before rounding.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>alias_as_fmt_fn(x, call = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="alias_as_fmt_fn_+3A_x">x</code></td>
<td>
<p>(<code>integer</code>, <code>string</code>, or <code>function</code>)<br />
a non-negative integer, string alias, or function</p>
</td></tr>
<tr><td><code id="alias_as_fmt_fn_+3A_call">call</code></td>
<td>
<p>(<code>environment</code>)<br />
frame for error messaging. Default is <code><a href="base.html#topic+parent.frame">parent.frame()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>alias_as_fmt_fn(1)
alias_as_fmt_fn("xx.x")
</code></pre>

<hr>
<h2 id='apply_fmt_fn'>Apply Formatting Functions</h2><span id='topic+apply_fmt_fn'></span>

<h3>Description</h3>

<p>Apply the formatting functions to each of the raw statistics.
Function aliases are converted to functions using <code><a href="#topic+alias_as_fmt_fn">alias_as_fmt_fn()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>apply_fmt_fn(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="apply_fmt_fn_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_continuous(ADSL, variables = "AGE") |&gt;
  apply_fmt_fn()
</code></pre>

<hr>
<h2 id='ard_attributes'>ARD Attributes</h2><span id='topic+ard_attributes'></span>

<h3>Description</h3>

<p>Add variable attributes to an ARD data frame.
</p>

<ul>
<li><p> The <code>label</code> attribute will be added for all columns, and when no label
is specified and no label has been set for a column using the <code style="white-space: pre;">&#8288;label=&#8288;</code> argument,
the column name will be placed in the label statistic.
</p>
</li>
<li><p> The <code>class</code> attribute will also be returned for all columns.
</p>
</li>
<li><p> Any other attribute returned by <code>attributes()</code> will also be added, e.g. factor levels.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ard_attributes(data, variables = everything(), label = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_attributes_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_attributes_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
variables to include</p>
</td></tr>
<tr><td><code id="ard_attributes_+3A_label">label</code></td>
<td>
<p>(named <code>list</code>)<br />
named list of variable labels, e.g. <code>list(cyl = "No. Cylinders")</code>.
Default is <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>df &lt;- dplyr::tibble(var1 = letters, var2 = LETTERS)
attr(df$var1, "label") &lt;- "Lowercase Letters"

ard_attributes(df, variables = everything())
</code></pre>

<hr>
<h2 id='ard_categorical'>Categorical ARD Statistics</h2><span id='topic+ard_categorical'></span>

<h3>Description</h3>

<p>Compute Analysis Results Data (ARD) for categorical summary statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_categorical(
  data,
  variables,
  by = dplyr::group_vars(data),
  strata = NULL,
  statistic = everything() ~ categorical_summary_fns(),
  denominator = NULL,
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_categorical_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to include in summaries. Default is <code>everything()</code>.</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_by">by</code>, <code id="ard_categorical_+3A_strata">strata</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to tabulate by/stratify by for tabulation.
Arguments are similar, but with an important distinction:
</p>
<p><code>by</code>: results are tabulated by <strong>all combinations</strong> of the columns specified,
including unobserved combinations and unobserved factor levels.
</p>
<p><code>strata</code>: results are tabulated by <strong>all <em>observed</em> combinations</strong> of the
columns specified.
</p>
<p>Arguments may be used in conjunction with one another.</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code>list(mpg = categorical_summary_fns())</code>.</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_denominator">denominator</code></td>
<td>
<p>(<code>data.frame</code>, <code>integer</code>)<br />
Specify this <em>optional</em> argument to change the denominator,
e.g. the <code>"N"</code> statistic. Default is <code>NULL</code>. See below for details.</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_categorical_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(n = "n", p = "pct")</code> or
<code>everything() ~ list(n ~ "n", p ~ "pct")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Denominators</h3>

<p>By default, the <code>ard_categorical()</code> function returns the statistics <code>"n"</code>, <code>"N"</code>, and
<code>"p"</code>, where little <code>"n"</code> are the counts for the variable levels, and big <code>"N"</code> is
the number of non-missing observations. The default calculation for the
percentage is merely <code>p = n/N</code>.
</p>
<p>However, it is sometimes necessary to provide a different <code>"N"</code> to use
as the denominator in this calculation. For example, in a calculation
of the rates of various observed adverse events, you may need to update the
denominator to the number of enrolled subjects.
</p>
<p>In such cases, use the <code>denominator</code> argument to specify a new definition
of <code>"N"</code>, and subsequently <code>"p"</code>.
The argument expects one of the following inputs:
</p>

<ul>
<li><p> a data frame. Any columns in the data frame that overlap with the <code>by</code>/<code>strata</code>
columns will be used to calculate the new <code>"N"</code>.
</p>
</li>
<li><p> an integer. This single integer will be used as the new <code>"N"</code>
</p>
</li>
<li><p> a string: one of <code>"column"</code>, <code>"row"</code>, or <code>"cell"</code>. <code>"column"</code> is equivalent
to <code>denominator=NULL</code>. <code>"row"</code> gives 'row' percentages where <code>by</code>/<code>strata</code>
columns are the 'top' of a cross table, and the variables are the rows.
<code>"cell"</code> gives percentages where the denominator is the number of non-missing
rows in the source data frame.
</p>
</li>
<li><p> a structured data frame. The data frame will include columns from <code>by</code>/<code>strata</code>.
The last column must be named <code>"...ard_N..."</code>. The integers in this column will
be used as the updated <code>"N"</code> in the calculations.
</p>
</li></ul>



<h3>Examples</h3>

<pre><code class='language-R'>ard_categorical(ADSL, by = "ARM", variables = "AGEGR1")

ADSL |&gt;
  dplyr::group_by(ARM) |&gt;
  ard_categorical(
    variables = "AGEGR1",
    statistic = everything() ~ categorical_summary_fns("n")
  )
</code></pre>

<hr>
<h2 id='ard_complex'>Complex ARD Summaries</h2><span id='topic+ard_complex'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a><br />
Function is similar to <code><a href="#topic+ard_continuous">ard_continuous()</a></code>, but allows for more complex
summaries. While <code>ard_continuous(statistic)</code> only allows for a univariable
function, <code>ard_complex(statistic)</code> can handle more complex data summaries.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_complex(
  data,
  variables,
  by = dplyr::group_vars(data),
  strata = NULL,
  statistic,
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_complex_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_complex_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to include in summaries. Default is <code>everything()</code>.</p>
</td></tr>
<tr><td><code id="ard_complex_+3A_by">by</code>, <code id="ard_complex_+3A_strata">strata</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to tabulate by/stratify by for summary statistic
calculation. Arguments are similar, but with an important distinction:
</p>
<p><code>by</code>: results are calculated for <strong>all combinations</strong> of the columns specified,
including unobserved combinations and unobserved factor levels.
</p>
<p><code>strata</code>: results are calculated for <strong>all <em>observed</em> combinations</strong> of the
columns specified.
</p>
<p>Arguments may be used in conjunction with one another.</p>
</td></tr>
<tr><td><code id="ard_complex_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
The form of the statistics argument is identical to <code>ard_continuous(statistic)</code>
argument, except the summary function <em>must</em> accept the following arguments:
</p>

<ul>
<li> <p><code>x</code>: a vector
</p>
</li>
<li> <p><code>data</code>: the data frame that has been subset such that the <code>by</code>/<code>strata</code> columns
and rows in which <code>"variable"</code> is <code>NA</code> have been removed.
</p>
</li>
<li> <p><code>data_full</code>: the full data frame
</p>
</li>
<li> <p><code>by</code>: character vector of the <code>by</code> variables
</p>
</li>
<li> <p><code>strata</code>: character vector of the <code>strata</code> variables
It is unlikely any one function will need <em>all</em> of the above elements,
and it's recommended the function passed accepts <code>...</code> so that any unused
arguments will be properly ignored. The <code>...</code> also allows this function
to perhaps be updated in the future with more passed arguments. For example,
if one needs a second variable from the data frame, the function inputs
may look like: <code>foo(x, data, ...)</code>
</p>
</li></ul>
</td></tr>
<tr><td><code id="ard_complex_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_complex_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(mean = "Mean", sd = "SD")</code> or
<code>everything() ~ list(mean ~ "Mean", sd ~ "SD")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example how to mimic behavior of `ard_continuous()`
ard_complex(
  ADSL,
  by = "ARM",
  variables = "AGE",
  statistic = list(AGE = list(mean = \(x, ...) mean(x)))
)

# return the grand mean and the mean within the `by` group
grand_mean &lt;- function(data, data_full, variable, ...) {
  list(
    mean = mean(data[[variable]], na.rm = TRUE),
    grand_mean = mean(data_full[[variable]], na.rm = TRUE)
  )
}

ADSL |&gt;
  dplyr::group_by(ARM) |&gt;
  ard_complex(
    variables = "AGE",
    statistic = list(AGE = list(means = grand_mean))
  )
</code></pre>

<hr>
<h2 id='ard_continuous'>Continuous ARD Statistics</h2><span id='topic+ard_continuous'></span>

<h3>Description</h3>

<p>Compute Analysis Results Data (ARD) for simple continuous summary statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_continuous(
  data,
  variables,
  by = dplyr::group_vars(data),
  strata = NULL,
  statistic = everything() ~ continuous_summary_fns(),
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_continuous_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_continuous_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to include in summaries. Default is <code>everything()</code>.</p>
</td></tr>
<tr><td><code id="ard_continuous_+3A_by">by</code>, <code id="ard_continuous_+3A_strata">strata</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to tabulate by/stratify by for summary statistic
calculation. Arguments are similar, but with an important distinction:
</p>
<p><code>by</code>: results are calculated for <strong>all combinations</strong> of the columns specified,
including unobserved combinations and unobserved factor levels.
</p>
<p><code>strata</code>: results are calculated for <strong>all <em>observed</em> combinations</strong> of the
columns specified.
</p>
<p>Arguments may be used in conjunction with one another.</p>
</td></tr>
<tr><td><code id="ard_continuous_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) mean(x)))&#8288;</code>.
</p>
<p>The value assigned to each variable must also be a named list, where the names
are used to reference a function and the element is the function object.
Typically, this function will return a scalar statistic, but a function that
returns a named list of results is also acceptable, e.g.
<code>list(conf.low = -1, conf.high = 1)</code>. However, when errors occur, the messaging
will be less clear in this setting.</p>
</td></tr>
<tr><td><code id="ard_continuous_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_continuous_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(mean = "Mean", sd = "SD")</code> or
<code>everything() ~ list(mean ~ "Mean", sd ~ "SD")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_continuous(ADSL, by = "ARM", variables = "AGE")

# if a single function returns a named list, the named
# results will be placed in the resulting ARD
ADSL |&gt;
  dplyr::group_by(ARM) |&gt;
  ard_continuous(
    variables = "AGE",
    statistic =
      ~ list(conf.int = \(x) t.test(x)[["conf.int"]] |&gt;
        as.list() |&gt;
        setNames(c("conf.low", "conf.high")))
  )
</code></pre>

<hr>
<h2 id='ard_dichotomous'>Dichotomous ARD Statistics</h2><span id='topic+ard_dichotomous'></span>

<h3>Description</h3>

<p>Compute Analysis Results Data (ARD) for dichotomous summary statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_dichotomous(
  data,
  variables,
  by = dplyr::group_vars(data),
  strata = NULL,
  value = maximum_variable_value(data[variables]),
  statistic = everything() ~ categorical_summary_fns(),
  denominator = NULL,
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_dichotomous_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to include in summaries. Default is <code>everything()</code>.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_by">by</code>, <code id="ard_dichotomous_+3A_strata">strata</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to tabulate by/stratify by for tabulation.
Arguments are similar, but with an important distinction:
</p>
<p><code>by</code>: results are tabulated by <strong>all combinations</strong> of the columns specified,
including unobserved combinations and unobserved factor levels.
</p>
<p><code>strata</code>: results are tabulated by <strong>all <em>observed</em> combinations</strong> of the
columns specified.
</p>
<p>Arguments may be used in conjunction with one another.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_value">value</code></td>
<td>
<p>(named <code>list</code>)<br />
named list of dichotomous values to tabulate. Default is <code>maximum_variable_value(data)</code>,
which returns the largest/last value after a sort.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code>list(mpg = categorical_summary_fns())</code>.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_denominator">denominator</code></td>
<td>
<p>(<code>data.frame</code>, <code>integer</code>)<br />
Specify this <em>optional</em> argument to change the denominator,
e.g. the <code>"N"</code> statistic. Default is <code>NULL</code>. See below for details.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_dichotomous_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(n = "n", p = "pct")</code> or
<code>everything() ~ list(n ~ "n", p ~ "pct")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_dichotomous(mtcars, by = vs, variables = c(cyl, am), value = list(cyl = 4))

mtcars |&gt;
  dplyr::group_by(vs) |&gt;
  ard_dichotomous(
    variables = c(cyl, am),
    value = list(cyl = 4),
    statistic = ~ categorical_summary_fns("p")
  )
</code></pre>

<hr>
<h2 id='ard_hierarchical'>Hierarchical ARD Statistics</h2><span id='topic+ard_hierarchical'></span><span id='topic+ard_hierarchical_count'></span>

<h3>Description</h3>

<p>Performs hierarchical or nested tabulations, e.g. tabulates AE terms
nested within AE system organ class.
</p>

<ul>
<li> <p><code>ard_hierarchical()</code> includes summaries for the last variable listed
in the <code>variables</code> argument, nested within the other variables included.
</p>
</li>
<li> <p><code>ard_hierarchical_count()</code> includes summaries for <em>all</em> variables
listed in the <code>variables</code> argument each summary nested within the preceding
variables, e.g. <code>variables=c(AESOC, AETERM)</code> summarizes <code>AETERM</code> nested
in <code>AESOC</code>, and also summarizes the counts of <code>AESOC</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>ard_hierarchical(
  data,
  variables,
  by = dplyr::group_vars(data),
  statistic = everything() ~ categorical_summary_fns(),
  denominator = NULL,
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)

ard_hierarchical_count(
  data,
  variables,
  by = dplyr::group_vars(data),
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_hierarchical_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
variables to perform the nested/hierarchical tabulations within.</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_by">by</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
variables to perform tabulations by. All combinations of the variables
specified here appear in results. Default is <code>dplyr::group_vars(data)</code>.</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code>list(mpg = categorical_summary_fns())</code>.</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_denominator">denominator</code></td>
<td>
<p>(<code>data.frame</code>, <code>integer</code>)<br />
Specify this <em>optional</em> argument to change the denominator,
e.g. the <code>"N"</code> statistic. Default is <code>NULL</code>. See below for details.</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_hierarchical_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(n = "n", p = "pct")</code> or
<code>everything() ~ list(n ~ "n", p ~ "pct")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_hierarchical(
  data = ADAE,
  variables = c(AESOC, AETERM),
  by = c(TRTA, AESEV),
  denominator = ADSL |&gt; dplyr::rename(TRTA = ARM)
)

ard_hierarchical_count(
  data = ADAE,
  variables = c(AESOC, AETERM),
  by = TRTA
)
</code></pre>

<hr>
<h2 id='ard_missing'>Missing ARD Statistics</h2><span id='topic+ard_missing'></span>

<h3>Description</h3>

<p>Compute Analysis Results Data (ARD) for statistics related to data missingness.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_missing(
  data,
  variables,
  by = dplyr::group_vars(data),
  statistic = everything() ~ missing_summary_fns(),
  fmt_fn = NULL,
  stat_label = everything() ~ default_stat_labels()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_missing_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_missing_+3A_variables">variables</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to include in summaries. Default is <code>everything()</code>.</p>
</td></tr>
<tr><td><code id="ard_missing_+3A_by">by</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
results are tabulated by <strong>all combinations</strong> of the columns specified.</p>
</td></tr>
<tr><td><code id="ard_missing_+3A_statistic">statistic</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) mean(x)))&#8288;</code>.
</p>
<p>The value assigned to each variable must also be a named list, where the names
are used to reference a function and the element is the function object.
Typically, this function will return a scalar statistic, but a function that
returns a named list of results is also acceptable, e.g.
<code>list(conf.low = -1, conf.high = 1)</code>. However, when errors occur, the messaging
will be less clear in this setting.</p>
</td></tr>
<tr><td><code id="ard_missing_+3A_fmt_fn">fmt_fn</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas,
or a single formula where the list element is a named list of functions
(or the RHS of a formula),
e.g. <code style="white-space: pre;">&#8288;list(mpg = list(mean = \(x) round(x, digits = 2) |&gt; as.character))&#8288;</code>.</p>
</td></tr>
<tr><td><code id="ard_missing_+3A_stat_label">stat_label</code></td>
<td>
<p>(<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, a list of formulas, or a single formula where
the list element is either a named list or a list of formulas defining the
statistic labels, e.g. <code>everything() ~ list(mean = "Mean", sd = "SD")</code> or
<code>everything() ~ list(mean ~ "Mean", sd ~ "SD")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_missing(ADSL, by = "ARM", variables = "AGE")

ADSL |&gt;
  dplyr::group_by(ARM) |&gt;
  ard_missing(
    variables = "AGE",
    statistic = ~ missing_summary_fns("N_miss")
  )
</code></pre>

<hr>
<h2 id='ard_stack'>Stack ARDs</h2><span id='topic+ard_stack'></span>

<h3>Description</h3>

<p>Stack multiple ARD calls sharing common input <code>data</code> and <code>by</code> variables.
Optionally incorporate additional information on represented variables (i.e.
big N's, missingness, attributes) and/or tidy for use in displays with
<code>shuffle_ard()</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ard_stack(
  data,
  by = NULL,
  ...,
  .overall = FALSE,
  .missing = FALSE,
  .attributes = FALSE,
  .shuffle = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="ard_stack_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_by">by</code></td>
<td>
<p>(<code><a href="dplyr.html#topic+dplyr_tidy_select">tidy-select</a></code>)<br />
columns to tabulate by in the series of ARD function calls</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_...">...</code></td>
<td>
<p>(<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>)<br />
Series of ARD function calls to be run and stacked</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_.overall">.overall</code></td>
<td>
<p>(<code>logical</code>)<br /> logical indicating whether overall statistics
should be calculated (i.e. re-run all <code style="white-space: pre;">&#8288;ard_*()&#8288;</code> calls with <code>by=NULL</code>).
Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_.missing">.missing</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to include the results of <code>ard_missing()</code> for all
variables represented in the ARD. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_.attributes">.attributes</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to include the results of <code>ard_attributes()</code> for all
variables represented in the ARD. Default is <code>FALSE</code>.</p>
</td></tr>
<tr><td><code id="ard_stack_+3A_.shuffle">.shuffle</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to perform <code>shuffle_ard()</code> on the final result.
Default is <code>FALSE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a transformed ARD data frame (of class 'card' if <code>.shuffle = FALSE</code>)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_stack(
  data = ADSL,
  by = "ARM",
  ard_categorical(variables = "AGEGR1"),
  ard_continuous(variables = "AGE")
)

ard_stack(
  data = ADSL,
  by = "ARM",
  ard_categorical(variables = "AGEGR1"),
  ard_continuous(variables = "AGE"),
  .shuffle = TRUE
)

</code></pre>

<hr>
<h2 id='as_nested_list'>ARD as Nested List</h2><span id='topic+as_nested_list'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a><br />
Convert ARDs to nested lists.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_nested_list(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_nested_list_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a nested list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_continuous(mtcars, by = "cyl", variables = c("mpg", "hp")) |&gt;
  as_nested_list()
</code></pre>

<hr>
<h2 id='bind_ard'>Bind ARDs</h2><span id='topic+bind_ard'></span>

<h3>Description</h3>

<p>Wrapper for <code>dplyr::bind_rows()</code> with additional checks
for duplicated statistics.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bind_ard(..., .update = FALSE, .order = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="bind_ard_+3A_...">...</code></td>
<td>
<p>(<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>)<br />
ARDs to combine. Each argument can either be an ARD,
or a list of ARDs. Columns are matched by name, and any missing
columns will be filled with <code>NA</code>.</p>
</td></tr>
<tr><td><code id="bind_ard_+3A_.update">.update</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to update duplicate ARD statistics.
Default is <code>FALSE</code>. If a statistic type is repeated and <code>.update=TRUE</code>,
the more recently added statistics will be retained, and the others omitted.</p>
</td></tr>
<tr><td><code id="bind_ard_+3A_.order">.order</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to order the rows of the stacked ARDs, allowing
statistics that share common group and variable values to appear in
consecutive rows. Default is <code>FALSE</code>. Ordering will be based on the order
of the group/variable values prior to stacking.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard &lt;- ard_categorical(ADSL, by = "ARM", variables = "AGEGR1")

bind_ard(ard, ard, .update = TRUE)
</code></pre>

<hr>
<h2 id='cards-package'>cards: Analysis Results Data</h2><span id='topic+cards'></span><span id='topic+cards-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Construct Clinical Data Interchange Standards Consortium (CDISC) compliant Analysis Results Data objects. These objects are used and re-used to construct summary tables, visualizations, and written reports. The package also exports utilities for working with these objects and creating new Analysis Results Data objects.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Daniel D. Sjoberg <a href="mailto:danield.sjoberg@gmail.com">danield.sjoberg@gmail.com</a> (<a href="https://orcid.org/0000-0003-0862-2018">ORCID</a>)
</p>
<p>Authors:
</p>

<ul>
<li><p> Becca Krouse <a href="mailto:becca.z.krouse@gsk.com">becca.z.krouse@gsk.com</a>
</p>
</li></ul>

<p>Other contributors:
</p>

<ul>
<li><p> F. Hoffmann-La Roche AG [copyright holder, funder]
</p>
</li></ul>



<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/insightsengineering/cards">https://github.com/insightsengineering/cards</a>
</p>
</li>
<li> <p><a href="https://insightsengineering.github.io/cards/">https://insightsengineering.github.io/cards/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/insightsengineering/cards/issues">https://github.com/insightsengineering/cards/issues</a>
</p>
</li></ul>


<hr>
<h2 id='check_ard_structure'>Check ARD Structure</h2><span id='topic+check_ard_structure'></span>

<h3>Description</h3>

<p>Function tests the structure and returns notes when object does not
conform to expected structure.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>check_ard_structure(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_ard_structure_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card' (invisible)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_continuous(ADSL, variables = "AGE") |&gt;
  dplyr::select(-warning, -error) |&gt;
  check_ard_structure()
</code></pre>

<hr>
<h2 id='check_pkg_installed'>Check Package Installation</h2><span id='topic+check_pkg_installed'></span><span id='topic+is_pkg_installed'></span><span id='topic+get_pkg_dependencies'></span><span id='topic+get_min_version_required'></span>

<h3>Description</h3>


<ul>
<li> <p><code>check_pkg_installed()</code>: checks whether a package is installed and
returns an error or <code>FALSE</code> if not available. If a package search is provided,
the function will check whether a minimum version of a package is required.
</p>
</li>
<li> <p><code>get_pkg_dependencies()</code> returns a tibble with all
dependencies of a specific package.
</p>
</li>
<li> <p><code>get_min_version_required()</code> will return, if any, the minimum version
of <code>pkg</code> required by <code>reference_pkg</code>, <code>NULL</code> if no minimum version required.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>check_pkg_installed(pkg, reference_pkg = "cards", call = parent.frame())

is_pkg_installed(pkg, reference_pkg = "cards", call = parent.frame())

get_pkg_dependencies(reference_pkg = "cards", lib.loc = NULL)

get_min_version_required(pkg, reference_pkg = "cards", lib.loc = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="check_pkg_installed_+3A_pkg">pkg</code></td>
<td>
<p>(<code>string</code>)<br />
name of required package</p>
</td></tr>
<tr><td><code id="check_pkg_installed_+3A_reference_pkg">reference_pkg</code></td>
<td>
<p>(<code>string</code>)<br />
name of the package the function will search for a minimum required version from.</p>
</td></tr>
<tr><td><code id="check_pkg_installed_+3A_call">call</code></td>
<td>
<p>(<code>environment</code>)<br />
frame for error messaging. Default is <code><a href="base.html#topic+parent.frame">parent.frame()</a></code>.</p>
</td></tr>
<tr><td><code id="check_pkg_installed_+3A_lib.loc">lib.loc</code></td>
<td>
<p>(<code>path</code>)<br />
location of <code>R</code> library trees to search through, see <code><a href="utils.html#topic+packageDescription">utils::packageDescription()</a></code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>check_pkg_installed()</code> returns a logical or error, <code>get_min_version_required()</code>
returns <code>NULL</code> or a string with the minimum version required, <code>get_pkg_dependencies()</code>
returns a tibble.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>check_pkg_installed("dplyr")

is_pkg_installed("dplyr")

get_pkg_dependencies()

get_min_version_required("dplyr")
</code></pre>

<hr>
<h2 id='default_stat_labels'>Defaults for Statistical Arguments</h2><span id='topic+default_stat_labels'></span>

<h3>Description</h3>

<p>Returns a named list of statistics labels
</p>


<h3>Usage</h3>

<pre><code class='language-R'>default_stat_labels()
</code></pre>


<h3>Value</h3>

<p>named list
</p>


<h3>Examples</h3>

<pre><code class='language-R'># stat labels
default_stat_labels()
</code></pre>

<hr>
<h2 id='eval_capture_conditions'>Evaluate and Capture Conditions</h2><span id='topic+eval_capture_conditions'></span>

<h3>Description</h3>

<p>Evaluates an expression while also capturing error and warning conditions.
Function always returns a named list <code>list(result=, warning=, error=)</code>.
If there are no errors or warnings, those elements will be <code>NULL</code>.
If there is an error, the result element will be <code>NULL</code>.
</p>
<p>Messages are neither saved nor printed to the console.
</p>
<p>Evaluation is done via <code><a href="rlang.html#topic+eval_tidy">eval_tidy()</a></code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>eval_capture_conditions(expr, data = NULL, env = caller_env())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="eval_capture_conditions_+3A_expr">expr</code></td>
<td>
<p>An <a href="rlang.html#topic+topic-defuse">expression</a> or
<a href="rlang.html#topic+topic-quosure">quosure</a> to evaluate.</p>
</td></tr>
<tr><td><code id="eval_capture_conditions_+3A_data">data</code></td>
<td>
<p>A data frame, or named list or vector. Alternatively, a
data mask created with <code><a href="rlang.html#topic+as_data_mask">as_data_mask()</a></code> or
<code><a href="rlang.html#topic+new_data_mask">new_data_mask()</a></code>. Objects in <code>data</code> have priority over those in
<code>env</code>. See the section about data masking.</p>
</td></tr>
<tr><td><code id="eval_capture_conditions_+3A_env">env</code></td>
<td>
<p>The environment in which to evaluate <code>expr</code>. This
environment is not applicable for quosures because they have
their own environments.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named list
</p>


<h3>Examples</h3>

<pre><code class='language-R'># function executes without error or warning
eval_capture_conditions(letters[1:2])

# an error is thrown
eval_capture_conditions(stop("Example Error!"))

# if more than one warning is returned, all are saved
eval_capture_conditions({
  warning("Warning 1")
  warning("Warning 2")
  letters[1:2]
})

# messages are not printed to the console
eval_capture_conditions({
  message("A message!")
  letters[1:2]
})
</code></pre>

<hr>
<h2 id='get_ard_statistics'>ARD Statistics as List</h2><span id='topic+get_ard_statistics'></span>

<h3>Description</h3>

<p>Returns the statistics from an ARD as a named list.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>get_ard_statistics(x, ..., .column = "stat", .attributes = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="get_ard_statistics_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
<tr><td><code id="get_ard_statistics_+3A_...">...</code></td>
<td>
<p>(<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>)<br />
optional arguments indicating rows to subset of the ARD.
For example, to return only rows where the column <code>"AGEGR1"</code> is <code>"65-80"</code>,
pass <code>AGEGR1 %in% "65-80"</code>.</p>
</td></tr>
<tr><td><code id="get_ard_statistics_+3A_.column">.column</code></td>
<td>
<p>(<code>string</code>)<br />
string indicating the column that will be returned in the list.
Default is <code>"statistic"</code></p>
</td></tr>
<tr><td><code id="get_ard_statistics_+3A_.attributes">.attributes</code></td>
<td>
<p>(<code>character</code>)<br />
character vector of column names that will be returned
in the list as attributes.
Default is <code>NULL</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>named list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard &lt;- ard_categorical(ADSL, by = "ARM", variables = "AGEGR1")

get_ard_statistics(
  ard,
  group1_level %in% "Placebo",
  variable_level %in% "65-80",
  .attributes = "stat_label"
)
</code></pre>

<hr>
<h2 id='label_cards'>Generate Formatting Function</h2><span id='topic+label_cards'></span>

<h3>Description</h3>

<p>Returns a function with the requested rounding and scaling schema.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>label_cards(digits = 1, scale = 1, width = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="label_cards_+3A_digits">digits</code></td>
<td>
<p>(<code>integer</code>)<br />
a non-negative integer specifying the number of decimal places
round statistics to</p>
</td></tr>
<tr><td><code id="label_cards_+3A_scale">scale</code></td>
<td>
<p>(<code>numeric</code>)<br />
a scalar real number. Before rounding, the input will be scaled by
this quantity</p>
</td></tr>
<tr><td><code id="label_cards_+3A_width">width</code></td>
<td>
<p>(<code>integer</code>)<br />
a non-negative integer specifying the minimum width of the
returned formatted values</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a function
</p>


<h3>Examples</h3>

<pre><code class='language-R'>label_cards(2)(pi)
label_cards(1, scale = 100)(pi)
label_cards(2, width = 5)(pi)
</code></pre>

<hr>
<h2 id='maximum_variable_value'>Maximum Value</h2><span id='topic+maximum_variable_value'></span>

<h3>Description</h3>

<p>For each column in the passed data frame, the function returns a named list
with the value being the largest/last element after a sort.
For factors, the last level is returned, and for logical vectors <code>TRUE</code> is returned.
This is used as the default value in <code>ard_dichotomous(value)</code> if not specified by
the user.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>maximum_variable_value(data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="maximum_variable_value_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a named list
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ADSL[c("AGEGR1", "BMIBLGR1")] |&gt; maximum_variable_value()
</code></pre>

<hr>
<h2 id='nest_for_ard'>ARD Nesting</h2><span id='topic+nest_for_ard'></span>

<h3>Description</h3>

<p>This function is similar to <code><a href="tidyr.html#topic+nest">tidyr::nest()</a></code>, except that it retains
rows for unobserved combinations (and unobserved factor levels) of by
variables, and unobserved combinations of stratifying variables.
</p>
<p>The levels are wrapped in lists so they can be stacked with other types
of different classes.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>nest_for_ard(
  data,
  by = NULL,
  strata = NULL,
  key = "data",
  rename_columns = TRUE,
  list_columns = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="nest_for_ard_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="nest_for_ard_+3A_by">by</code>, <code id="nest_for_ard_+3A_strata">strata</code></td>
<td>
<p>(<code>character</code>)<br />
columns to nest by/stratify by. Arguments are similar,
but with an important distinction:
</p>
<p><code>by</code>: data frame is nested by <strong>all combinations</strong> of the columns specified,
including unobserved combinations and unobserved factor levels.
</p>
<p><code>strata</code>: data frame is nested by <strong>all <em>observed</em> combinations</strong> of the
columns specified.
</p>
<p>Arguments may be used in conjunction with one another.</p>
</td></tr>
<tr><td><code id="nest_for_ard_+3A_key">key</code></td>
<td>
<p>(<code>string</code>)<br />
the name of the new column with the nested data frame. Default is <code>"data"</code>.</p>
</td></tr>
<tr><td><code id="nest_for_ard_+3A_rename_columns">rename_columns</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to rename the <code>by</code> and <code>strata</code> variables.
Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="nest_for_ard_+3A_list_columns">list_columns</code></td>
<td>
<p>(<code>logical</code>)<br />
logical indicating whether to put levels of <code>by</code> and
<code>strata</code> columns in a list. Default is <code>TRUE</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a nested tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>nest_for_ard(
  data =
    ADAE |&gt;
      dplyr::left_join(ADSL[c("USUBJID", "ARM")], by = "USUBJID") |&gt;
      dplyr::filter(AOCCSFL %in% "Y"),
  by = "ARM",
  strata = "AESOC"
)
</code></pre>

<hr>
<h2 id='print_ard_conditions'>Print ARD Condition Messages</h2><span id='topic+print_ard_conditions'></span>

<h3>Description</h3>

<p>Function parses the errors and warnings observed while calculating the
statistics requested in the ARD and prints them to the console as messages.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>print_ard_conditions(x, call = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print_ard_conditions_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
<tr><td><code id="print_ard_conditions_+3A_call">call</code></td>
<td>
<p>(<code>environment</code>)<br />
frame for error messaging. Default is <code>NULL</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>returns invisible if check is successful, throws all condition messages if not.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_continuous(
  ADSL,
  by = ARM,
  variables = AGE
) |&gt;
  print_ard_conditions()
</code></pre>

<hr>
<h2 id='print.card'>Print</h2><span id='topic+print.card'></span>

<h3>Description</h3>

<p>Print method for objects of class 'card'
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'card'
print(x, n = NULL, columns = c("auto", "all"), n_col = 6L, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="print.card_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
object of class 'card'</p>
</td></tr>
<tr><td><code id="print.card_+3A_n">n</code></td>
<td>
<p>(<code>integer</code>)<br />
integer specifying the number of rows to print</p>
</td></tr>
<tr><td><code id="print.card_+3A_columns">columns</code></td>
<td>
<p>(<code>string</code>)<br />
string indicating whether to print a selected number of columns or all.</p>
</td></tr>
<tr><td><code id="print.card_+3A_n_col">n_col</code></td>
<td>
<p>(<code>integer</code>)<br />
some columns are removed when there are more than a threshold of
columns present. This argument sets that threshold. Default is <code>6L</code>.</p>
</td></tr>
<tr><td><code id="print.card_+3A_...">...</code></td>
<td>
<p>(<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>)<br />
not used</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card' (invisibly)
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard_categorical(ADSL, variables = AGEGR1) |&gt;
  print()
</code></pre>

<hr>
<h2 id='process_selectors'>Process tidyselectors</h2><span id='topic+process_selectors'></span><span id='topic+process_formula_selectors'></span><span id='topic+fill_formula_selectors'></span><span id='topic+compute_formula_selector'></span><span id='topic+check_list_elements'></span><span id='topic+cards_select'></span>

<h3>Description</h3>

<p>Functions process tidyselect arguments passed to functions in the cards package.
The processed values are saved to the calling environment, by default.
</p>

<ul>
<li> <p><code>process_selectors()</code>: the arguments will be processed with tidyselect and
converted to a vector of character column names.
</p>
</li>
<li> <p><code>process_formula_selectors()</code>: for arguments that expect named lists or
lists of formulas (where the LHS of the formula is a tidyselector). This
function processes these inputs and returns a named list. If a name is
repeated, the last entry is kept.
</p>
</li>
<li> <p><code>fill_formula_selectors()</code>: when users override the default argument values,
it can be important to ensure that each column from a data frame is assigned
a value. This function checks that each column in <code>data</code> has an assigned
value, and if not, fills the value in with the default value passed here.
</p>
</li>
<li> <p><code>compute_formula_selector()</code>: used in <code>process_formula_selectors()</code> to
evaluate a single argument.
</p>
</li>
<li> <p><code>check_list_elements()</code>: used to check the class/type/values of the list
elements, primarily those processed with <code>process_formula_selectors()</code>.
</p>
</li>
<li> <p><code>cards_select()</code>: wraps <code>tidyselect::eval_select() |&gt; names()</code>, and returns
better contextual messaging when errors occur.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>process_selectors(data, ..., env = caller_env())

process_formula_selectors(
  data,
  ...,
  env = caller_env(),
  include_env = FALSE,
  allow_empty = TRUE
)

fill_formula_selectors(data, ..., env = caller_env())

compute_formula_selector(
  data,
  x,
  arg_name = caller_arg(x),
  env = caller_env(),
  strict = TRUE,
  include_env = FALSE,
  allow_empty = TRUE
)

check_list_elements(
  x,
  predicate,
  error_msg = NULL,
  env = rlang::caller_env(),
  arg_name = rlang::caller_arg(x)
)

cards_select(expr, data, ..., arg_name = NULL, .call = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="process_selectors_+3A_data">data</code></td>
<td>
<p>(<code>data.frame</code>)<br />
a data frame</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_...">...</code></td>
<td>
<p>(<code><a href="rlang.html#topic+dyn-dots">dynamic-dots</a></code>)<br />
named arguments where the value of the argument is processed with tidyselect.
</p>

<ul>
<li> <p><code>process_selectors()</code>: the values are tidyselect-compatible selectors
</p>
</li>
<li> <p><code>process_formula_selectors()</code>: the values are named lists, list of formulas
a combination of both, or a single formula. Users may pass <code>~value</code> as a
shortcut for <code>everything() ~ value</code>.
</p>
</li>
<li> <p><code>check_list_elements()</code>: named arguments where the name matches an existing
list in the <code>env</code> environment, and the value is a predicate function
to test each element of the list, e.g. each element must be a string or
a function.
</p>
</li></ul>
</td></tr>
<tr><td><code id="process_selectors_+3A_env">env</code></td>
<td>
<p>(<code>environment</code>)<br />
env to save the results to. Default is the calling environment.</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_include_env">include_env</code></td>
<td>
<p>(<code>logical</code>)<br />
whether to include the environment from the formula object in the returned
named list. Default is <code>FALSE</code></p>
</td></tr>
<tr><td><code id="process_selectors_+3A_allow_empty">allow_empty</code></td>
<td>
<p>(<code>logical</code>)<br />
Logical indicating whether empty result is acceptable while process
formula-list selectors. Default is <code>TRUE</code>.</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_x">x</code></td>
<td>

<ul>
<li> <p><code>compute_formula_selector()</code>: (<code><a href="#topic+syntax">formula-list-selector</a></code>)<br />
a named list, list of formulas, or a single formula that will be
converted to a named list.
</p>
</li>
<li> <p><code>check_list_elements()</code>: (named <code>list</code>)<br />
a named list
</p>
</li></ul>
</td></tr>
<tr><td><code id="process_selectors_+3A_arg_name">arg_name</code></td>
<td>
<p>(<code>string</code>)<br />
the name of the argument being processed. Used
in error messaging. Default is <code>caller_arg(x)</code>.</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_strict">strict</code></td>
<td>
<p>(<code>logical</code>)<br />
whether to throw an error if a variable doesn't exist in the reference data
(passed to <code><a href="tidyselect.html#topic+eval_select">tidyselect::eval_select()</a></code>)</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_predicate">predicate</code></td>
<td>
<p>(<code>function</code>)<br />
a predicate function that returns <code>TRUE</code> or <code>FALSE</code></p>
</td></tr>
<tr><td><code id="process_selectors_+3A_error_msg">error_msg</code></td>
<td>
<p>(<code>character</code>)<br />
a character vector that will
be used in error messaging when mis-specified arguments are passed. Elements
<code>"{arg_name}"</code> and <code>"{variable}"</code> are available using glue syntax for messaging.</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_expr">expr</code></td>
<td>
<p>(<code>expression</code>)<br />
Defused R code describing a selection according to the tidyselect syntax.</p>
</td></tr>
<tr><td><code id="process_selectors_+3A_.call">.call</code></td>
<td>
<p>(<code>environment</code>)<br />
calling environment used for error messaging.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>process_selectors()</code>, <code>fill_formula_selectors()</code>, <code>process_formula_selectors()</code>
and <code>check_list_elements()</code> return NULL. <code>compute_formula_selector()</code> returns a
named list.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>example_env &lt;- rlang::new_environment()

process_selectors(ADSL, variables = starts_with("TRT"), env = example_env)
get(x = "variables", envir = example_env)

fill_formula_selectors(ADSL, env = example_env)

process_formula_selectors(
  ADSL,
  statistic = list(starts_with("TRT") ~ mean, TRTSDT = min),
  env = example_env
)
get(x = "statistic", envir = example_env)

check_list_elements(
  get(x = "statistic", envir = example_env),
  predicate = function(x) !is.null(x),
  error_msg = c(
    "Error in the argument {.arg {arg_name}} for variable {.val {variable}}.",
    "i" = "Value must be a named list of functions."
  )
)

# process one list
compute_formula_selector(ADSL, x = starts_with("U") ~ 1L)
</code></pre>

<hr>
<h2 id='reexports'>Objects exported from other packages</h2><span id='topic+reexports'></span><span id='topic++25+3E+25'></span><span id='topic+starts_with'></span><span id='topic+ends_with'></span><span id='topic+contains'></span><span id='topic+matches'></span><span id='topic+num_range'></span><span id='topic+all_of'></span><span id='topic+any_of'></span><span id='topic+everything'></span><span id='topic+where'></span><span id='topic+last_col'></span><span id='topic+one_of'></span><span id='topic+vars'></span>

<h3>Description</h3>

<p>These objects are imported from other packages. Follow the links
below to see their documentation.
</p>

<dl>
<dt>dplyr</dt><dd><p><code><a href="dplyr.html#topic+reexports">%&gt;%</a></code>, <code><a href="dplyr.html#topic+reexports">all_of</a></code>, <code><a href="dplyr.html#topic+reexports">any_of</a></code>, <code><a href="dplyr.html#topic+reexports">contains</a></code>, <code><a href="dplyr.html#topic+reexports">ends_with</a></code>, <code><a href="dplyr.html#topic+reexports">everything</a></code>, <code><a href="dplyr.html#topic+reexports">last_col</a></code>, <code><a href="dplyr.html#topic+reexports">matches</a></code>, <code><a href="dplyr.html#topic+reexports">num_range</a></code>, <code><a href="dplyr.html#topic+reexports">one_of</a></code>, <code><a href="dplyr.html#topic+reexports">starts_with</a></code>, <code><a href="dplyr.html#topic+vars">vars</a></code>, <code><a href="dplyr.html#topic+reexports">where</a></code></p>
</dd>
</dl>

<hr>
<h2 id='replace_null_statistic'>Replace NULL Statistics with Specified Value</h2><span id='topic+replace_null_statistic'></span>

<h3>Description</h3>

<p>When a statistical summary function errors, the <code>"statistic"</code> column will be
<code>NULL</code>. It is, however, sometimes useful to replace these values with a
non-<code>NULL</code> value, e.g. <code>NA</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>replace_null_statistic(x, value = NA, rows = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="replace_null_statistic_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
<tr><td><code id="replace_null_statistic_+3A_value">value</code></td>
<td>
<p>(usually a <code>scalar</code>)<br />
The value to replace <code>NULL</code> values with. Default is <code>NA</code>.</p>
</td></tr>
<tr><td><code id="replace_null_statistic_+3A_rows">rows</code></td>
<td>
<p>(<code><a href="rlang.html#topic+args_data_masking">data-masking</a></code>)<br />
Expression that return a logical value, and are defined in terms of the variables in <code>.data</code>.
Only rows for which the condition evaluates to <code>TRUE</code> are replaced.
Default is <code>TRUE</code>, which applies to all rows.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'># the quantile functions error because the input is character, while the median function returns NA
data.frame(x = rep_len(NA_character_, 10)) |&gt;
  ard_continuous(
    variables = x,
    statistic = ~ continuous_summary_fns(c("median", "p25", "p75"))
  ) |&gt;
  replace_null_statistic(rows = !is.null(error))
</code></pre>

<hr>
<h2 id='round5'>Rounding of Numbers</h2><span id='topic+round5'></span>

<h3>Description</h3>

<p>Rounds the values in its first argument to the specified number of
decimal places (default 0). Importantly, <code>round5()</code> <strong>does not</strong> use Base R's
&quot;round to even&quot; default. Standard rounding methods are implemented, for example,
<code>round5(0.5) = 1</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>round5(x, digits = 0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="round5_+3A_x">x</code></td>
<td>
<p>(<code>numeric</code>)<br />
a numeric vector</p>
</td></tr>
<tr><td><code id="round5_+3A_digits">digits</code></td>
<td>
<p>(<code>integer</code>)<br />
integer indicating the number of decimal places</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Function inspired by <code>janitor::round_half_up()</code>.
</p>


<h3>Value</h3>

<p>a numeric vector
</p>


<h3>Examples</h3>

<pre><code class='language-R'>x &lt;- 0:4 / 2
round5(x) |&gt; setNames(x)

# compare results to Base R
round(x) |&gt; setNames(x)
</code></pre>

<hr>
<h2 id='selectors'>ARD Selectors</h2><span id='topic+selectors'></span><span id='topic+all_ard_groups'></span><span id='topic+all_ard_variables'></span>

<h3>Description</h3>

<p>These selection helpers match variables according to a given pattern.
</p>

<ul>
<li> <p><code>all_ard_groups()</code>: Use this function in dplyr selecting environments, such
as <code><a href="dplyr.html#topic+select">dplyr::select()</a></code>. Function selects grouping columns, e.g. columns
named <code>"group##"</code> or <code>"group##_level"</code>.
</p>
</li>
<li> <p><code>all_ard_variables()</code>: Use this function in dplyr selecting environments, such
as <code>dplyr::select()</code>. Function selects variables columns, e.g. columns
named <code>"variable"</code> or <code>"variable_level"</code>.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>all_ard_groups(types = c("names", "levels"))

all_ard_variables(types = c("names", "levels"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="selectors_+3A_types">types</code></td>
<td>
<p>(<code>character</code>)<br />
type(s) of columns to select. <code>"names"</code> selects the columns variable name columns,
and <code>"levels"</code> selects the level columns. Default is <code>c("names", "levels")</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>tidyselect output
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ard &lt;- ard_categorical(ADSL, by = "ARM", variables = "AGEGR1")

ard |&gt; dplyr::select(all_ard_groups())
ard |&gt; dplyr::select(all_ard_variables())
</code></pre>

<hr>
<h2 id='shuffle_ard'>Shuffle ARD</h2><span id='topic+shuffle_ard'></span>

<h3>Description</h3>

<p>This function ingests an ARD object and shuffles the information to prepare for analysis.
Helpful for streamlining across multiple ARDs. Combines each group/group_level into 1
column, back fills missing grouping values from the variable levels where possible, and
optionally trims statistics-level metadata.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>shuffle_ard(x, trim = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="shuffle_ard_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
<tr><td><code id="shuffle_ard_+3A_trim">trim</code></td>
<td>
<p>(<code>logical</code>)<br />
logical representing whether or not to trim away statistic-level metadata and filter
only on numeric statistic values.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>a tibble
</p>


<h3>Examples</h3>

<pre><code class='language-R'>bind_ard(
  ard_categorical(ADSL, by = "ARM", variables = "AGEGR1"),
  ard_categorical(ADSL, variables = "ARM")
) |&gt;
  shuffle_ard()
</code></pre>

<hr>
<h2 id='summary_functions'>Summary Functions</h2><span id='topic+summary_functions'></span><span id='topic+continuous_summary_fns'></span><span id='topic+categorical_summary_fns'></span><span id='topic+missing_summary_fns'></span>

<h3>Description</h3>


<ul>
<li> <p><code>continuous_summary_fns()</code> returns a named list of summary functions
for continuous variables. Some functions include slight modifications to
their base equivalents. For example, the <code>min()</code> and <code>max()</code> functions
return <code>NA</code> instead of <code>Inf</code> when an empty vector is passed.
Statistics <code>"p25"</code> and <code>"p75"</code> are calculated with <code>quantile(type = 2)</code>,
which matches
<a href="https://psiaims.github.io/CAMIS/Comp/r-sas-summary-stats.html">SAS's default value</a>.
</p>
</li>
<li> <p><code>categorical_summary_fns()</code> returns a named list of summary statistics for
categorical variables. Options are <code>"n"</code>, <code>"N"</code>, and <code>"p"</code>. If a user requests, for
example, only <code>"p"</code>, the function will return <code>"n"</code> and <code>"N"</code> as well, since they are
needed to calculate <code>"p"</code>. These statistics will be stored as a vector within the
<code>tabulation</code> list element.
</p>
</li>
<li> <p><code>missing_summary_fns()</code> returns a named list of summary functions suitable
for variable-level summaries, such as number and rate of missing data.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>continuous_summary_fns(
  summaries = c("N", "mean", "sd", "median", "p25", "p75", "min", "max"),
  other_stats = NULL
)

categorical_summary_fns(summaries = c("n", "p", "N"), other_stats = NULL)

missing_summary_fns(
  summaries = c("N_obs", "N_miss", "N_nonmiss", "p_miss", "p_nonmiss")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summary_functions_+3A_summaries">summaries</code></td>
<td>
<p>(<code>character</code>)<br />
a character vector of results to include in output.
</p>

<ul>
<li> <p><code>continuous_summary_fns()</code>: Select one or more from
'N', 'mean', 'sd', 'median', 'p25', 'p75', 'min', 'max'.
</p>
</li>
<li> <p><code>categorical_summary_fns()</code>: Select one or more from
'n', 'p', 'N'.
</p>
</li>
<li> <p><code>missing_summary_fns()</code>: Select one or more from
'N_obs', 'N_miss', 'N_nonmiss', 'p_miss', 'p_nonmiss'.
</p>
</li></ul>
</td></tr>
<tr><td><code id="summary_functions_+3A_other_stats">other_stats</code></td>
<td>
<p>(named <code>list</code>)<br />
named list of other statistic functions to supplement the pre-programmed functions.</p>
</td></tr>
</table>


<h3>Value</h3>

<p><code>continuous_summary_fns()</code> and <code>missing_summary_fns()</code> return a named list of summary
functions, <code>categorical_summary_fns()</code> returns a named list of summary statistics.
</p>


<h3>Examples</h3>

<pre><code class='language-R'># continuous variable summaries
ard_continuous(
  ADSL,
  variables = "AGE",
  statistic = ~ continuous_summary_fns(c("N", "median"))
)

# categorical variable summaries
ard_categorical(
  ADSL,
  variables = "AGEGR1",
  statistic = ~ categorical_summary_fns(c("n", "N"))
)

# summary for rates of missing data
ard_missing(
  ADSL,
  variables = c("AGE", "AGEGR1"),
  statistic = ~ missing_summary_fns()
)
</code></pre>

<hr>
<h2 id='syntax'>Selecting Syntax</h2><span id='topic+syntax'></span>

<h3>Description</h3>

<p>Selecting Syntax
</p>


<h3>Selectors</h3>

<p>The cards package also utilizes selectors: selectors from the tidyselect
package and custom selectors. Review their help files for details.
</p>

<ul>
<li> <p><strong>tidy selectors</strong>
</p>
<p><code><a href="#topic+everything">everything()</a></code>, <code><a href="#topic+all_of">all_of()</a></code>, <code><a href="#topic+any_of">any_of()</a></code>, <code><a href="#topic+starts_with">starts_with()</a></code>, <code><a href="#topic+ends_with">ends_with()</a></code>,
<code><a href="#topic+contains">contains()</a></code>, <code><a href="#topic+matches">matches()</a></code>, <code><a href="#topic+num_range">num_range()</a></code>, <code><a href="#topic+last_col">last_col()</a></code>
</p>
</li>
<li> <p><strong>cards selectors</strong>
</p>
<p><code><a href="#topic+all_ard_groups">all_ard_groups()</a></code>, <code><a href="#topic+all_ard_variables">all_ard_variables()</a></code>
</p>
</li></ul>



<h3>Formula and List Selectors</h3>

<p>Some arguments in the cards package accept list and
formula notation, e.g. <code>ard_continuous(statistic=)</code>.
Below enumerates a few tips and shortcuts for using the list and formulas.
</p>

<ol>
<li> <p><strong>List of Formulas</strong>
</p>
<p>Typical usage includes a list of formulas, where the LHS is a variable
name or a selector.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = list(age ~ list(N = \(x) length(x)), starts_with("a") ~ list(mean = mean)))
</pre></div>
</li>
<li> <p><strong>Named List</strong>
</p>
<p>You may also pass a named list; however, the tidyselect selectors
are not supported with this syntax.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = list(age = list(N = \(x) length(x))))
</pre></div>
</li>
<li> <p><strong>Hybrid Named List/List of Formulas</strong>
</p>
<p>You can pass a combination of formulas and named elements.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = list(age = list(N = \(x) length(x)), starts_with("a") ~ list(mean = mean)))
</pre></div>
</li>
<li> <p><strong>Shortcuts</strong>
</p>
<p>You can pass a single formula, which is equivalent to passing the formula
in a list.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = starts_with("a") ~ list(mean = mean)
</pre></div>
<p>As a shortcut to select all variables, you can omit the LHS of the formula.
The two calls below are equivalent.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = ~list(N = \(x) length(x)))
ard_continuous(statistic = everything() ~ list(N = \(x) length(x)))
</pre></div>
</li>
<li> <p><strong>Combination Selectors</strong>
</p>
<p>Selectors can be combined using the <code>c()</code> function.
</p>
<div class="sourceCode r"><pre>ard_continuous(statistic = c(everything(), -age) ~ list(N = \(x) length(x)))
</pre></div>
</li></ol>


<hr>
<h2 id='tidy_ard_order'>Standard Order of ARD</h2><span id='topic+tidy_ard_order'></span><span id='topic+tidy_ard_column_order'></span><span id='topic+tidy_ard_row_order'></span>

<h3>Description</h3>

<p>ARD functions for relocating columns and rows to the standard order.
</p>

<ul>
<li> <p><code>tidy_ard_column_order()</code> relocates columns of the ARD to the standard order.
</p>
</li>
<li> <p><code>tidy_ard_row_order()</code> orders rows of ARD according to variables, groups, and
strata, while retaining the order of the input ARD.
</p>
</li></ul>



<h3>Usage</h3>

<pre><code class='language-R'>tidy_ard_column_order(x)

tidy_ard_row_order(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_ard_order_+3A_x">x</code></td>
<td>
<p>(<code>data.frame</code>)<br />
an ARD data frame of class 'card'</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'># order columns
ard &lt;-
  dplyr::bind_rows(
    ard_continuous(mtcars, variables = "mpg"),
    ard_continuous(mtcars, variables = "mpg", by = "cyl")
  )

tidy_ard_column_order(ard) |&gt;
  tidy_ard_row_order()
</code></pre>

<hr>
<h2 id='tidy_as_ard'>Build ARD from Tidier</h2><span id='topic+tidy_as_ard'></span>

<h3>Description</h3>

<p>Function converts a model's one-row tidy data frame into an ARD structure.
The tidied data frame must have been constructed with
<code><a href="#topic+eval_capture_conditions">eval_capture_conditions()</a></code>.
</p>
<p>This function is primarily for developers and few consistency checks have
been included.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>tidy_as_ard(
  lst_tidy,
  tidy_result_names,
  fun_args_to_record = character(0L),
  formals = list(),
  passed_args = list(),
  lst_ard_columns
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="tidy_as_ard_+3A_lst_tidy">lst_tidy</code></td>
<td>
<p>(named <code>list</code>)<br />
list of tidied results constructed with <code><a href="#topic+eval_capture_conditions">eval_capture_conditions()</a></code>,
e.g. <code>eval_capture_conditions(t.test(mtcars$mpg ~ mtcars$am) |&gt; broom::tidy())</code>.</p>
</td></tr>
<tr><td><code id="tidy_as_ard_+3A_tidy_result_names">tidy_result_names</code></td>
<td>
<p>(<code>character</code>)<br />
character vector of column names expected by the
tidier method. This is used to construct blank results in the event of an error.</p>
</td></tr>
<tr><td><code id="tidy_as_ard_+3A_fun_args_to_record">fun_args_to_record</code></td>
<td>
<p>(<code>character</code>)<br />
character vector of function argument names that are added to the ARD.</p>
</td></tr>
<tr><td><code id="tidy_as_ard_+3A_formals">formals</code></td>
<td>
<p>(<code>pairlist</code>)<br />
the results from <code>formals()</code>, e.g. <code>formals(fisher.test)</code>.
This is used to get the default argument values from unspecified arguments.</p>
</td></tr>
<tr><td><code id="tidy_as_ard_+3A_passed_args">passed_args</code></td>
<td>
<p>(named <code>list</code>)<br />
named list of additional arguments passed to the modeling function.</p>
</td></tr>
<tr><td><code id="tidy_as_ard_+3A_lst_ard_columns">lst_ard_columns</code></td>
<td>
<p>(named <code>list</code>)<br />
named list of values that will be added to the ARD data frame.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>an ARD data frame of class 'card'
</p>


<h3>Examples</h3>

<pre><code class='language-R'># example how one may create a fisher.test() ARD function
my_ard_fishertest &lt;- function(data, by, variable, ...) {
  # perform fisher test and format results -----------------------------------
  lst_tidy_fisher &lt;-
    eval_capture_conditions(
      # this manipulation is similar to `fisher.test(...) |&gt; broom::tidy()`
      stats::fisher.test(x = data[[variable]], y = data[[by]], ...)[c("p.value", "method")] |&gt;
        as.data.frame()
    )

  # build ARD ------------------------------------------------------------------
  tidy_as_ard(
    lst_tidy = lst_tidy_fisher,
    tidy_result_names = c("p.value", "method"),
    fun_args_to_record =
      c(
        "workspace", "hybrid", "hybridPars", "control", "or",
        "conf.int", "conf.level", "simulate.p.value", "B"
      ),
    formals = formals(stats::fisher.test),
    passed_args = dots_list(...),
    lst_ard_columns = list(group1 = by, variable = variable, context = "fishertest")
  )
}

my_ard_fishertest(mtcars, by = "am", variable = "vs")
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
