<!DOCTYPE html><html lang="en"><head><title>Help for package csquares</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {csquares}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#csquares-package'><p>csquares: Concise Spatial Query and Representation System (c-Squares)</p></a></li>
<li><a href='#as_csquares'><p>Convert lon-lat coordinates into c-square codes</p></a></li>
<li><a href='#drop_csquares'><p>Drop c-square information from object</p></a></li>
<li><a href='#expand_wildcards'><p>Expand c-squares with wildcards to all matching c-squares</p></a></li>
<li><a href='#format.csquares'><p>Basic csquares methods</p></a></li>
<li><a href='#ices_centroids'><p>Get ICES geometries</p></a></li>
<li><a href='#ices_columns'><p>Valid ICES rectangle columns</p></a></li>
<li><a href='#in_csquares'><p>Match c-squares against other c-squares (with wildcards)</p></a></li>
<li><a href='#join'><p>Join <code>csquares</code> objects using tidyverse conventions</p></a></li>
<li><a href='#new_csquares'><p>Create a c-squares raster from a bounding box</p></a></li>
<li><a href='#orca'><p>Killer whale realm</p></a></li>
<li><a href='#resample_csquares'><p>Resample csquares to a different resolution</p></a></li>
<li><a href='#st_as_sf'><p>Create a simple features object from c-squares</p></a></li>
<li><a href='#st_as_stars.csquares'><p>Coerce csqaures object into a stars object</p></a></li>
<li><a href='#tidyverse'><p>Tidyverse methods for csquares objects (drop the 'csquares'-suffix)</p></a></li>
<li><a href='#validate_csquares'><p>Test if a csquares object is valid</p></a></li>
<li><a href='#vctrs'><p>vctrs methods for csquares objects</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table role='presentation'>
<tr>
<td>Title:</td>
<td>Concise Spatial Query and Representation System (c-Squares)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.1.0</td>
</tr>
<tr>
<td>Author:</td>
<td>Pepijn de Vries <a href="https://orcid.org/0000-0002-7961-6646"><img alt="ORCID iD"  src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Description:</td>
<td>Encode and decode c-squares, from and to simple feature (sf)
    or spatiotemporal arrays (stars) objects. Use c-squares codes to quickly
    join or query spatial data.</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, methods, purrr, rlang, sf, stars, stringr, tidyr,
tidyselect, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, DiagrammeR, DiagrammeRsvg, ggplot2, htmltools, knitr,
lifecycle, rmarkdown, rnaturalearth, rnaturalearthdata,
testthat (&ge; 3.0.0), xml2</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Collate:</td>
<td>'helpers.R' 'as_csquares.R' 'as_stars.R' 'csquares-package.R'
'csquares_methods.R' 'drop.R' 'expand.R' 'ices.R' 'in.R'
'init.R' 'joins_tidy.R' 'new_csquares.R' 'orca.R' 'resample.R'
'tidyverse.R' 'st_as_sf.R' 'validate.R' 'vctrs.R'</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pepijn-devries.github.io/csquares/">https://pepijn-devries.github.io/csquares/</a>,
<a href="https://github.com/pepijn-devries/csquares/">https://github.com/pepijn-devries/csquares/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pepijn-devries/csquares/issues">https://github.com/pepijn-devries/csquares/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-08-29 14:52:01 UTC; vries171</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pepijn de Vries &lt;pepijn.devries@outlook.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-08-29 22:40:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='csquares-package'>csquares: Concise Spatial Query and Representation System (c-Squares)</h2><span id='topic+csquares'></span><span id='topic+csquares-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Encode and decode c-squares, from and to simple feature (sf) or spatiotemporal arrays (stars) objects. Use c-squares codes to quickly join or query spatial data.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Pepijn de Vries <a href="mailto:pepijn.devries@outlook.com">pepijn.devries@outlook.com</a> (<a href="https://orcid.org/0000-0002-7961-6646">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pepijn-devries.github.io/csquares/">https://pepijn-devries.github.io/csquares/</a>
</p>
</li>
<li> <p><a href="https://github.com/pepijn-devries/csquares/">https://github.com/pepijn-devries/csquares/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pepijn-devries/csquares/issues">https://github.com/pepijn-devries/csquares/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as_csquares'>Convert lon-lat coordinates into c-square codes</h2><span id='topic+as_csquares'></span><span id='topic+as_csquares.default'></span><span id='topic+as_csquares.character'></span><span id='topic+as_csquares.numeric'></span><span id='topic+as_csquares.data.frame'></span><span id='topic+as_csquares.sf'></span><span id='topic+as_csquares.sfc'></span><span id='topic+as_csquares.stars'></span>

<h3>Description</h3>

<p>Takes WGS84 longitude and latitude coordinates and finds the closest matching c-squares
for a given resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_csquares(x, resolution, csquares, ...)

## Default S3 method:
as_csquares(x, resolution, csquares, ...)

## S3 method for class 'character'
as_csquares(x, resolution, csquares, validate = TRUE, ...)

## S3 method for class 'numeric'
as_csquares(x, resolution = 1, csquares, ...)

## S3 method for class 'data.frame'
as_csquares(x, resolution = 1, csquares, ...)

## S3 method for class 'sf'
as_csquares(x, resolution = 1, csquares, ..., use_centroids = TRUE)

## S3 method for class 'sfc'
as_csquares(x, resolution = 1, csquares, ..., use_centroids = TRUE)

## S3 method for class 'stars'
as_csquares(x, resolution = 1, csquares, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="as_csquares_+3A_x">x</code></td>
<td>
<p>An object to be coerced to a <code>csquares</code> object. <code>x</code> can be a vector of <code>character</code> strings
representing c-squares code. It can also be a <code>numeric</code> <code>matrix</code> with two columns
containing the x and y coordinates. <code>x</code> can also be a simple features object
(<code><a href="sf.html#topic+st_as_sf">sf</a></code>) or a spatial arrays object (<code><a href="stars.html#topic+st_as_stars">stars</a></code>).</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_resolution">resolution</code></td>
<td>
<p>Resolution (in WGS84 degrees) to be used for creating c-squares codes.
As per c-square specifications, the resolution should be 10 or less, yet greater than 0.
It should be a tenfold of 1 or 5. Valid resolutions are therefore: 10, 5, 1, 0.5, 0.1, etc.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_csquares">csquares</code></td>
<td>
<p>If <code>x</code> is not a vector of <code>character</code> strings (but for instance a <code>data.frame</code>),
the <code>csquares</code> argument should specify the name of the element of <code>x</code> containing the c-square
codes as <code>character</code> strings.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_...">...</code></td>
<td>
<p>Currently ignored</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_validate">validate</code></td>
<td>
<p>A <code>logical</code> value indicating whether the created object needs to be validated.
Defaults to <code>TRUE</code>. Validation can be time-consuming so set to <code>FALSE</code> to save computing time.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_use_centroids">use_centroids</code></td>
<td>
<p>In case <code>x</code> is a simple features object and <code>use_centroids</code> is <code>TRUE</code>,
the centroid of each geometry is used for deriving c-squares. If it is <code>FALSE</code> all coordinates
in the geometry are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>csquares</code> object that contains c-squares codes.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_csquares(cbind(x = 5.2399066, y = 52.7155812), resolution = 1)
orca_csq &lt;- as_csquares(orca, csquares = "csquares")
</code></pre>

<hr>
<h2 id='drop_csquares'>Drop c-square information from object</h2><span id='topic+drop_csquares'></span>

<h3>Description</h3>

<p>Drops c-square data from an object, but keeps the parent class of the object
intact. You cannot deselect the csquare column from a <code>csquares</code> object as this
will render the object invalid. Use <code>drop_csquares</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_csquares(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="drop_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> from which the c-square information
needs to be dropped.</p>
</td></tr>
<tr><td><code id="drop_csquares_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a copy of <code>x</code> inheriting its parent classes but with out
csquares info.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>csq &lt;- as_csquares("1000")
drop_csquares(csq)

csq &lt;-
  data.frame(csquares = "1000", foo = "bar") |&gt;
  as_csquares(csquares = "csquares")

drop_csquares(csq)
</code></pre>

<hr>
<h2 id='expand_wildcards'>Expand c-squares with wildcards to all matching c-squares</h2><span id='topic+expand_wildcards'></span>

<h3>Description</h3>

<p>The asterisk (*) can be used as a wildcard, for a compact
notation of csquares. <code>expand_wildcards</code> will replace all
wild cards with valid combinations of values and expands
the compact notation to an explicit notation without
wildcards.
Check out <code>vignette("wildcards")</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_wildcards(x, csquares, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="expand_wildcards_+3A_x">x</code></td>
<td>
<p>A <code>character</code> string containing csquares codes with
wildcards (asterisk character); or a <code>data.frame</code> that contains
a column with csquares codes with wildcards</p>
</td></tr>
<tr><td><code id="expand_wildcards_+3A_csquares">csquares</code></td>
<td>
<p>When <code>x</code> is <code>data.frame</code> this argument should
specify the column name that contains the csquares codes with wildcards.</p>
</td></tr>
<tr><td><code id="expand_wildcards_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>csquares</code> object with full notation
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>expand_wildcards("1000:*")
expand_wildcards("1000:***")
expand_wildcards("1000:1**")
expand_wildcards("1000:***:*")
expand_wildcards(c("1000:*", "1000:***", "1000:1**", "1000:***:*"))

expand_wildcards(data.frame(csq = "1000:*", foo = "bar"), csquares = "csq")
</code></pre>

<hr>
<h2 id='format.csquares'>Basic csquares methods</h2><span id='topic+format.csquares'></span><span id='topic+print.csquares'></span><span id='topic+as.character.csquares'></span><span id='topic+summary.csquares'></span><span id='topic+as.data.frame.csquares'></span><span id='topic+c.csquares'></span><span id='topic+rbind.csquares'></span><span id='topic+cbind.csquares'></span><span id='topic++5B.csquares'></span><span id='topic++5B+5B.csquares'></span><span id='topic++24.csquares'></span><span id='topic++5B+3C-.csquares'></span><span id='topic++5B+5B+3C-.csquares'></span><span id='topic++24+3C-.csquares'></span><span id='topic+merge.csquares'></span><span id='topic+names+3C-.csquares'></span>

<h3>Description</h3>

<p>Basic S3 methods for handling <code>csquares</code> objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'csquares'
format(x, ...)

## S3 method for class 'csquares'
print(x, short = TRUE, ...)

## S3 method for class 'csquares'
as.character(x, ...)

## S3 method for class 'csquares'
summary(object, ...)

## S3 method for class 'csquares'
as.data.frame(x, ...)

## S3 method for class 'csquares'
c(...)

## S3 method for class 'csquares'
rbind(..., deparse.level = 1)

## S3 method for class 'csquares'
cbind(..., deparse.level = 1)

## S3 method for class 'csquares'
x[i, j, ..., drop = FALSE]

## S3 method for class 'csquares'
x[[i]]

## S3 method for class 'csquares'
x$name

## S3 replacement method for class 'csquares'
x[i, j] &lt;- value

## S3 replacement method for class 'csquares'
x[[i]] &lt;- value

## S3 replacement method for class 'csquares'
x$i &lt;- value

## S3 method for class 'csquares'
merge(x, y, ...)

## S3 replacement method for class 'csquares'
names(x) &lt;- value
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="format.csquares_+3A_x">x</code>, <code id="format.csquares_+3A_object">object</code></td>
<td>
<p>A <code>csquares</code> object to be handled by the s3 methods</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_...">...</code></td>
<td>
<p>Passed on to generic methods</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_short">short</code></td>
<td>
<p><code>logical</code> option to print <code>csquares</code> <code>vctrs_vec</code>. If <code>TRUE</code> it will only print one line, if
<code>FALSE</code> it will print up to <code>options("max.print")</code> records.</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_deparse.level">deparse.level</code></td>
<td>
<p>integer controlling the construction of labels in
the case of non-matrix-like arguments (for the default method):<br />
<code>deparse.level = 0</code> constructs no labels;<br />
the default <code>deparse.level = 1</code> typically and
<code>deparse.level = 2</code> always construct labels from the argument
names, see the &lsquo;Value&rsquo; section below.</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_i">i</code>, <code id="format.csquares_+3A_j">j</code>, <code id="format.csquares_+3A_name">name</code></td>
<td>
<p>Indices/name for selecting subsets of <code>x</code></p>
</td></tr>
<tr><td><code id="format.csquares_+3A_drop">drop</code></td>
<td>
<p><code>logical</code> value indicating if unused dimensions should be dropped</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_value">value</code></td>
<td>
<p>Replacement values for a subset. a <code>csquares</code> object or a <code>character</code> string that can be coerced
to a <code>csquares</code> object</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_y">y</code></td>
<td>
<p>A <code>data.frame</code> to be merged with <code>x</code></p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns (a subsetted / formatted / modified version of) x
</p>

<hr>
<h2 id='ices_centroids'>Get ICES geometries</h2><span id='topic+ices_centroids'></span><span id='topic+ices_rectangles'></span><span id='topic+ices_to_csquares'></span><span id='topic+ices_from_csquares'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Functions to convert ICES rectangles
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ices_centroids(ices_rect)

ices_rectangles(ices_rect)

ices_to_csquares(ices_rect)

ices_from_csquares(csquares)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="ices_centroids_+3A_ices_rect">ices_rect</code></td>
<td>
<p>A <code>character</code> vector containing valid ICES rectangle codes</p>
</td></tr>
<tr><td><code id="ices_centroids_+3A_csquares">csquares</code></td>
<td>
<p>A <code>csquares</code> object, or an object that can be coerced with
<code>as_csquares()</code>.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>In case of <code>ices_centroids</code> a <code>sf::st_sf()</code> object is returned, with
<code>POINT</code> geometries representing the centroids of the ICES rectangles.
</p>
<p>In case of <code>ices_rectangles</code> a <code>sf::st_sf()</code> object is returned, with
<code>POLYGON</code> geometries representing the outline of the ICES rectangles.
</p>
<p>In case of <code>ices_to_csquares</code> a <code>csquares</code> object inheriting from  <code>sf::st_sf()</code>
is returned, the csquares code should represent the ICES rectangles.
</p>
<p>In case of <code>ices_from_csquares</code> a <code>character</code> vector is returned with
ICES rectangle codes that correspond with the csquares. The method is
fast yet crude: it only checks in which ICES rectangles the centroids of the
csquares are located. It does not check if the resolution matches. <code>NA</code> values
are returned when csquares are situated outside the area covered by ICES rectangles.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ices_rects &lt;-
  c("31F21", "31F22", "31F23", "31F24", "31F25", "31F26", "31F27", "31F28", "31F29",
    "32F2", "33F2", "34F2", "35F2",
    "31F3", "32F3", "33F3", "34F3", "35F3",
    "31F4", "32F4", "33F4", "34F4", "35F4")
ices_centroids(ices_rects)
ices_rectangles(ices_rects)
ices_csq &lt;- ices_to_csquares(ices_rects)
ices_from_csquares(ices_csq)
</code></pre>

<hr>
<h2 id='ices_columns'>Valid ICES rectangle columns</h2><span id='topic+ices_columns'></span>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt='[Experimental]' /></a> Get all valid column codes of ICES rectangles.
Note that ICES subrectangles are not compatible with csquares. For more details
see <code>vignette("ices")</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>ices_columns()
</code></pre>


<h3>Value</h3>

<p>A <code>character</code> vector with all allowed codes for the columns in ICES
rectangles.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>ices_columns()
</code></pre>

<hr>
<h2 id='in_csquares'>Match c-squares against other c-squares (with wildcards)</h2><span id='topic+in_csquares'></span>

<h3>Description</h3>

<p>Checks if csquares codes in <code>table</code> matches values in <code>x</code>. Wildcards
are allowed in <code>table</code> for this comparison. Check out <code>vignette("wildcards")</code>
for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_csquares(x, table, strict = FALSE, mode = "any", ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="in_csquares_+3A_x">x</code></td>
<td>
<p>An object of class 'csquares' that will be checked for matching
values in <code>table</code></p>
</td></tr>
<tr><td><code id="in_csquares_+3A_table">table</code></td>
<td>
<p>A <code>character</code> string representing a csquares code. The
code can contain wildcards (asterisk <code>*</code> and percentage <code style="white-space: pre;">&#8288;%&#8288;</code> characters,
both having identical meaning). Any symbol in <code>x</code> will result in a positive match
against the wildcard. <code>table</code> can also be of class <code>csquares</code>, but these
objects cannot contain wildcards.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_strict">strict</code></td>
<td>
<p>When set to <code>FALSE</code>, a match is positive when the start
of <code>x</code>, matches against values in <code>table</code>, even when <code>x</code> has a higher resolution.
When set to <code>TRUE</code>, a match is only positive when the resolution of <code>x</code> and
<code>table</code> is identical.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_mode">mode</code></td>
<td>
<p>Two modes are allowed: <code>"all"</code> and <code>"any"</code>. When an element of
<code>x</code> consists of multiple raster cells, it the mode will determine whether
a match is positive or not. In case of <code>"all"</code>, all raster cells in the element
of <code>x</code> need to match with the cells in <code>table</code>, for a positive match. In
case of <code>"any"</code>, any match will do.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of <code>logical</code> values with the same number of
elements or rows as <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

in_csquares(orca$csquares, c("3400:2", "5515:3"))
in_csquares(orca$csquares, "3400:2|5515:3")

## Percentage symbols are interpreted the same as asterisk symbols
## both are wild cards
in_csquares(orca$csquares, "1%%%:%") |&gt;
  table()

## Same as above
in_csquares(orca$csquares, "1***:*") |&gt;
  table()
 
## Also same as above
in_csquares(orca$csquares, "1***", strict = FALSE) |&gt;
  table()

## Strict interpretation results in no matches
in_csquares(orca$csquares, "1***", strict = TRUE) |&gt;
  table()

## Filter orca data to North Eastern quadrant (1***:*) only:
orca |&gt;
  filter(
    in_csquares(csquares, "1***:*")
  ) |&gt;
  nrow()

</code></pre>

<hr>
<h2 id='join'>Join <code>csquares</code> objects using tidyverse conventions</h2><span id='topic+join'></span><span id='topic+inner_join.csquares'></span><span id='topic+left_join.csquares'></span><span id='topic+right_join.csquares'></span><span id='topic+full_join.csquares'></span><span id='topic+semi_join.csquares'></span><span id='topic+anti_join.csquares'></span><span id='topic+st_join.csquares'></span>

<h3>Description</h3>

<p>When a <code>csquares</code> object inherits from class <code>data.frame</code>, you can apply tidyverse
joins to the object (<code>?dplyr::join</code>). The functions implemented here make sure that
the csquares properties are preserved. The functions should be called via the <code>dplyr</code>
generics. So load the <code>dplyr</code> package first, then call the function without the <code>.csquares</code>
suffix (see examples). When <code>x</code> inherits from <code>stars</code>, only <code>left_join</code> is supported.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>inner_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

left_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

right_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

full_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

semi_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

anti_join.csquares(x, y, by = NULL, copy = FALSE, suffix = c(".x", ".y"), ...)

st_join.csquares(x, y, join, ..., suffix = c(".x", ".y"))
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="join_+3A_x">x</code>, <code id="join_+3A_y">y</code></td>
<td>
<p>A pair of data frames, data frame extensions (e.g. a tibble), or
lazy data frames (e.g. from dbplyr or dtplyr). See <em>Methods</em>, below, for
more details.</p>
</td></tr>
<tr><td><code id="join_+3A_by">by</code></td>
<td>
<p>A join specification created with <code><a href="dplyr.html#topic+join_by">join_by()</a></code>, or a character
vector of variables to join by.
</p>
<p>If <code>NULL</code>, the default, <code style="white-space: pre;">&#8288;*_join()&#8288;</code> will perform a natural join, using all
variables in common across <code>x</code> and <code>y</code>. A message lists the variables so
that you can check they're correct; suppress the message by supplying <code>by</code>
explicitly.
</p>
<p>To join on different variables between <code>x</code> and <code>y</code>, use a <code><a href="dplyr.html#topic+join_by">join_by()</a></code>
specification. For example, <code>join_by(a == b)</code> will match <code>x$a</code> to <code>y$b</code>.
</p>
<p>To join by multiple variables, use a <code><a href="dplyr.html#topic+join_by">join_by()</a></code> specification with
multiple expressions. For example, <code>join_by(a == b, c == d)</code> will match
<code>x$a</code> to <code>y$b</code> and <code>x$c</code> to <code>y$d</code>. If the column names are the same between
<code>x</code> and <code>y</code>, you can shorten this by listing only the variable names, like
<code>join_by(a, c)</code>.
</p>
<p><code><a href="dplyr.html#topic+join_by">join_by()</a></code> can also be used to perform inequality, rolling, and overlap
joins. See the documentation at <a href="dplyr.html#topic+join_by">?join_by</a> for details on
these types of joins.
</p>
<p>For simple equality joins, you can alternatively specify a character vector
of variable names to join by. For example, <code>by = c("a", "b")</code> joins <code>x$a</code>
to <code>y$a</code> and <code>x$b</code> to <code>y$b</code>. If variable names differ between <code>x</code> and <code>y</code>,
use a named character vector like <code>by = c("x_a" = "y_a", "x_b" = "y_b")</code>.
</p>
<p>To perform a cross-join, generating all combinations of <code>x</code> and <code>y</code>, see
<code><a href="dplyr.html#topic+cross_join">cross_join()</a></code>.</p>
</td></tr>
<tr><td><code id="join_+3A_copy">copy</code></td>
<td>
<p>If <code>x</code> and <code>y</code> are not from the same data source,
and <code>copy</code> is <code>TRUE</code>, then <code>y</code> will be copied into the
same src as <code>x</code>.  This allows you to join tables across srcs, but
it is a potentially expensive operation so you must opt into it.</p>
</td></tr>
<tr><td><code id="join_+3A_suffix">suffix</code></td>
<td>
<p>If there are non-joined duplicate variables in <code>x</code> and
<code>y</code>, these suffixes will be added to the output to disambiguate them.
Should be a character vector of length 2.</p>
</td></tr>
<tr><td><code id="join_+3A_...">...</code></td>
<td>
<p>Other parameters passed onto methods.</p>
</td></tr>
<tr><td><code id="join_+3A_join">join</code></td>
<td>
<p>geometry predicate function with the same profile as <a href="sf.html#topic+st_intersects">st_intersects</a>; see details</p>
</td></tr>
</table>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
if (requireNamespace(c("sf", "dplyr"))) {
  library(csquares)
  library(sf)
  library(dplyr)
  orca_sf &lt;- orca |&gt; as_csquares(csquares = "csquares") |&gt; st_as_sf()
  right_table &lt;- data.frame(csquares = c("1000:1", "1004:1"), foo = "bar")
  
  orca_join &lt;- left_join (orca_sf, right_table, by = "csquares")
  orca_join &lt;- right_join(orca_sf, right_table, by = "csquares")
  orca_join &lt;- inner_join(orca_sf, right_table, by = "csquares")
  orca_join &lt;- anti_join (orca_sf, right_table, by = "csquares")
  orca_join &lt;- semi_join (orca_sf, right_table, by = "csquares")
  orca_grid &lt;- new_csquares(orca_sf, 5)
  orca_grid &lt;- left_join(orca_grid, orca, by = "csquares")
}

</code></pre>

<hr>
<h2 id='new_csquares'>Create a c-squares raster from a bounding box</h2><span id='topic+new_csquares'></span>

<h3>Description</h3>

<p>Creates a spatial raster (<code><a href="stars.html#topic+st_as_stars">stars</a></code>) with c-square codes for a specified bounding box,
using a specified resolution. The raster will be conform c-squares specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_csquares(x, resolution = 1, crs = 4326)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="new_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="sf.html#topic+st_bbox">bbox</a></code> or an object that can be coerced to a <code>bbox</code>.
It defines the bounding box for the c-squares grid created by this function.</p>
</td></tr>
<tr><td><code id="new_csquares_+3A_resolution">resolution</code></td>
<td>
<p>Resolution (in WGS84 degrees) to be used for creating c-squares codes.
As per c-square specifications, the resolution should be 10 or less, yet greater than 0.
It should be a tenfold of 1 or 5. Valid resolutions are therefore: 10, 5, 1, 0.5, 0.1, etc.</p>
</td></tr>
<tr><td><code id="new_csquares_+3A_crs">crs</code></td>
<td>
<p>The projection to be used for the created grid. By default it is WGS84 (EPSG:4326).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="stars.html#topic+st_as_stars">stars</a></code> and <code>csquares</code> object based on the provided bounding box and
resolution.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
nc &lt;- st_read(system.file("shape/nc.shp", package = "sf"))
new_csquares(nc)
</code></pre>

<hr>
<h2 id='orca'>Killer whale realm</h2><span id='topic+orca'></span>

<h3>Description</h3>

<p>Killer whale realm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>orca
</code></pre>


<h3>Format</h3>



<h4><code>orca</code></h4>

<p>The <code>orca</code> object is a Killer whale realm data set extracted from the data as provided
by Costello (2017) and published by Costello <em>et al.</em> (2017).
It is a data frame with 2,058 rows and two columns:
</p>

<dl>
<dt>csquares</dt><dd><p>c-squares codes indicating spatial grid cells</p>
</dd>
<dt>orcinus_orca</dt><dd><p><code>logical</code> values indicating whether the corresponding c-squares
grid cell belongs to the killer whales (Orcinus orca) biogeographic realm or not.</p>
</dd>
</dl>




<h3>References</h3>


<ul>
<li><p> Costello, M.J. (2017); University of Auckland <a href="https://doi.org/10.17608/k6.auckland.5086654">doi:10.17608/k6.auckland.5086654</a>
Licence <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
</p>
</li>
<li><p> Costello M.J., Tsai P., Wong P.S., Cheung A.K.L, Basher Z. &amp; Chaudhary C. (2017);
&quot;Marine biogeographic realms and species endemicity&quot; Nature Communications 8, 1057
<a href="https://doi.org/10.1038/s41467-017-01121-2">doi:10.1038/s41467-017-01121-2</a>
</p>
</li></ul>


<hr>
<h2 id='resample_csquares'>Resample csquares to a different resolution</h2><span id='topic+resample_csquares'></span>

<h3>Description</h3>

<p>Resample csquares objects to higher or lower resolutions.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>resample_csquares(x, method = "target", ..., resolution, magnitude = 1L)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="resample_csquares_+3A_x">x</code></td>
<td>
<p>A <code>csquares</code> object to be resampled to a different resolution</p>
</td></tr>
<tr><td><code id="resample_csquares_+3A_method">method</code></td>
<td>
<p>Method for determining the resolution of the resulting csquares.
Should be one of <code>"target"</code>, <code>"min"</code>, <code>"max"</code>, <code>"up"</code>, or <code>"down"</code>.
<code>"target"</code> will resample <code>x</code> to the level specified with <code>resolution</code></p>
</td></tr>
<tr><td><code id="resample_csquares_+3A_...">...</code></td>
<td>
<p>When <code>x</code> inherits the <code>stars</code> class and the resulting object has
a lower resolution than <code>x</code>, the dots are passed on to <code>dplyr::summarise()</code>.
This allows you to summarise columns to the lower resolution.</p>
</td></tr>
<tr><td><code id="resample_csquares_+3A_resolution">resolution</code></td>
<td>
<p>Resolution (in WGS84 degrees) to be used for creating c-squares codes.
As per c-square specifications, the resolution should be 10 or less, yet greater than 0.
It should be a tenfold of 1 or 5. Valid resolutions are therefore: 10, 5, 1, 0.5, 0.1, etc.</p>
</td></tr>
<tr><td><code id="resample_csquares_+3A_magnitude">magnitude</code></td>
<td>
<p>When <code>method == "up"</code> or <code>"down"</code>, this parameter specifies
the number of steps to increase or decrease the resolution. Should be a positive
integer.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>A <code>csquares</code> object based on <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>csq    &lt;- as_csquares(c("1000", "5000:2|5000:100", "3000:100:100"))
csq_df &lt;- as_csquares(data.frame(csq = csq, foobar = letters[1:3]), csquares = "csq")

## Resample csquares based on the one with the lowest resolution:
resample_csquares(csq,    "min")

## Resample csquares to a specific resolution
resample_csquares(csq,    "target", resolution = 5)

## Same, but applied to a csquares object inheriting from a data.frame
resample_csquares(csq_df, "target", resolution = 5)

## Same, but applied to a csquares object inheriting the `sf` class
## Note that the geometry is updated based on the resampled csquares
if (requireNamespace("sf")) {
  library(sf)
  csq_sf &lt;- st_as_sf(csq_df)
  resample_csquares(csq_sf, "target", resolution = 5)
}

## Resample csquares one step down.
resample_csquares(csq,    "down")
resample_csquares(csq_df, "down")

if (requireNamespace(c("dplyr", "stars"))) {
  ## Csquares objects can inherit from the stars class as well.
  ## These too can be resampled. But additional columns need
  ## to be summarised when the resulting resolution is lower
  ## than the original:
  g &lt;-
    sf::st_bbox(c(xmin = 4.0, xmax = 6.5, ymin = 52.5, ymax = 53), crs = 4326) |&gt;
      new_csquares(resolution = 0.1) |&gt;
      ## add a column with some random positive numbers:
      dplyr::mutate(random = .data$csquares |&gt; length() |&gt; rnorm() |&gt; exp())

  ## Resample stars object to lower resolution
  g_sum &lt;- resample_csquares(g, resolution = 10, random = sum(random, na.rm = TRUE))

  ## And back to a higher resolution (note that you have lost information as it was summarised
  ## in the previous step)
  resample_csquares(g_sum, "up", random = sum(random, na.rm = TRUE))
}
</code></pre>

<hr>
<h2 id='st_as_sf'>Create a simple features object from c-squares</h2><span id='topic+st_as_sf'></span><span id='topic+st_as_sf.csquares'></span><span id='topic+st_as_sfc'></span><span id='topic+st_as_sfc.csquares'></span>

<h3>Description</h3>

<p>Converts a <code>character</code> string of c-squares in a spatially explicit simple features object
(<code><a href="sf.html#topic+sf">sf</a></code>. It can also convert <code>data.frame</code>s with a column of c-squares codes to
an <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_as_sf.csquares(x, ..., use_geometry = TRUE)

st_as_sfc.csquares(x, ..., use_geometry = TRUE)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_as_sf_+3A_x">x</code></td>
<td>
<p>A <code>vector</code> of <code>character</code> strings. Each element should hold a valid
c-square code. <code>x</code> can also be a <code>data.frame</code> with a column of c-square codes.
(Note that wildcard characters are not supported)</p>
</td></tr>
<tr><td><code id="st_as_sf_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
<tr><td><code id="st_as_sf_+3A_use_geometry">use_geometry</code></td>
<td>
<p>If <code>use_geometry</code> is <code>TRUE</code> and <code>x</code> inherits a spatial feature,
its geometry will be used to cast the object. This is much faster than its alternative
when <code>use_geometry</code> is <code>FALSE</code>. In the latter case, the c-square codes are first translated
into explicit spatial information. The latter is more reliable as it does not rely on
the assumption that the geometry of <code>x</code> corresponds with the csquares codes in the object.
In short: use <code>TRUE</code> for speed, use <code>FALSE</code> for reliability.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>In case of <code>st_as_sfc.csquares</code> a list of geometries (<code><a href="sf.html#topic+sfc">sfc</a></code>,
(MULTI)POLYGONS) is returned. In case of <code>st_as_sf.csquares</code> an object of class
(<code><a href="sf.html#topic+sf">sf</a></code>) is returned.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
st_as_sfc(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
st_as_sf(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
</code></pre>

<hr>
<h2 id='st_as_stars.csquares'>Coerce csqaures object into a stars object</h2><span id='topic+st_as_stars.csquares'></span>

<h3>Description</h3>

<p>Take a <code>csquares</code> object created with <a href="#topic+new_csquares">new_csquares</a> or <a href="#topic+as_csquares">as_csquares</a> and
coerce it to a spatiotemporal array (<a href="stars.html#topic+st_as_stars">stars</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_as_stars.csquares(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="st_as_stars.csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> created with <a href="#topic+new_csquares">new_csquares</a> or <a href="#topic+as_csquares">as_csquares</a></p>
</td></tr>
<tr><td><code id="st_as_stars.csquares_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a spatiotemporal array (<a href="stars.html#topic+st_as_stars">stars</a>) object based on <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(stars)
st_as_stars(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
st_as_stars(as_csquares(orca, csquares = "csquares"))
</code></pre>

<hr>
<h2 id='tidyverse'>Tidyverse methods for csquares objects (drop the 'csquares'-suffix)</h2><span id='topic+tidyverse'></span><span id='topic+filter.csquares'></span><span id='topic+select.csquares'></span><span id='topic+as_tibble.csquares'></span><span id='topic+arrange.csquares'></span><span id='topic+group_by.csquares'></span><span id='topic+ungroup.csquares'></span><span id='topic+rowwise.csquares'></span><span id='topic+mutate.csquares'></span><span id='topic+rename.csquares'></span><span id='topic+rename_with.csquares'></span><span id='topic+slice.csquares'></span><span id='topic+distinct.csquares'></span><span id='topic+summarise.csquares'></span><span id='topic+pivot_longer.csquares'></span><span id='topic+pivot_wider.csquares'></span><span id='topic+group_split.csquares'></span><span id='topic+nest.csquares'></span><span id='topic+unite.csquares'></span><span id='topic+unnest.csquares'></span><span id='topic+unnest.csquares_nested'></span><span id='topic+drop_na.csquares'></span>

<h3>Description</h3>

<p>Tidyverse methods for <code>csquares</code> objects that inherit from <code>data.frame</code>, <code>tibble</code>, <code>sf</code>, or
in some cases <code>stars</code>. Load the tidyverse package containing the generic implementation (<code>dplyr</code> or <code>tidyr</code>),
and call the function without the <code>.csquares</code> suffix.
See examples and <code>vignette("tidy")</code> for more details. The methods implemented here ensure that the <code>csquare</code> class is preserved.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>filter.csquares(.data, ..., .dots)

select.csquares(.data, ...)

as_tibble.csquares(x, ...)

arrange.csquares(.data, ..., .dots)

group_by.csquares(.data, ..., add = FALSE)

ungroup.csquares(.data, ...)

rowwise.csquares(.data, ...)

mutate.csquares(.data, ..., .dots)

rename.csquares(.data, ...)

rename_with.csquares(.data, .fn, .cols, ...)

slice.csquares(.data, ..., .dots)

distinct.csquares(.data, ..., .keep_all = FALSE)

summarise.csquares(.data, ..., .dots)

pivot_longer.csquares(
  data,
  cols,
  ...,
  cols_vary = "fastest",
  names_to = "name",
  names_prefix = NULL,
  names_sep = NULL,
  names_pattern = NULL,
  names_ptypes = NULL,
  names_transform = NULL,
  names_repair = "check_unique",
  values_to = "value",
  values_drop_na = FALSE,
  values_ptypes = NULL,
  values_transform = NULL
)

pivot_wider.csquares(
  data,
  ...,
  id_cols = NULL,
  id_expand = FALSE,
  names_from = NULL,
  names_prefix = "",
  names_sep = "_",
  names_glue = NULL,
  names_sort = FALSE,
  names_vary = "fastest",
  names_expand = FALSE,
  names_repair = "check_unique",
  values_from = NULL,
  values_fill = NULL,
  values_fn = NULL,
  unused_fn = NULL
)

group_split.csquares(.tbl, ..., .keep = TRUE)

nest.csquares(.data, ...)

unite.csquares(data, col, ..., sep = "_", remove = TRUE)

unnest.csquares(data, ..., .preserve = NULL)

unnest.csquares_nested(data, cols, ...)

drop_na.csquares(x, ...)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="tidyverse_+3A_.data">.data</code>, <code id="tidyverse_+3A_...">...</code>, <code id="tidyverse_+3A_.dots">.dots</code>, <code id="tidyverse_+3A_data">data</code>, <code id="tidyverse_+3A_x">x</code>, <code id="tidyverse_+3A_add">add</code>, <code id="tidyverse_+3A_.fn">.fn</code>, <code id="tidyverse_+3A_.cols">.cols</code>, <code id="tidyverse_+3A_.keep_all">.keep_all</code>, <code id="tidyverse_+3A_cols">cols</code>, <code id="tidyverse_+3A_cols_vary">cols_vary</code>, <code id="tidyverse_+3A_names_to">names_to</code>, <code id="tidyverse_+3A_names_prefix">names_prefix</code>, <code id="tidyverse_+3A_names_sep">names_sep</code>, <code id="tidyverse_+3A_names_pattern">names_pattern</code>, <code id="tidyverse_+3A_names_ptypes">names_ptypes</code>, <code id="tidyverse_+3A_names_transform">names_transform</code>, <code id="tidyverse_+3A_names_repair">names_repair</code>, <code id="tidyverse_+3A_values_to">values_to</code>, <code id="tidyverse_+3A_values_drop_na">values_drop_na</code>, <code id="tidyverse_+3A_values_ptypes">values_ptypes</code>, <code id="tidyverse_+3A_values_transform">values_transform</code>, <code id="tidyverse_+3A_id_cols">id_cols</code>, <code id="tidyverse_+3A_id_expand">id_expand</code>, <code id="tidyverse_+3A_names_from">names_from</code>, <code id="tidyverse_+3A_names_glue">names_glue</code>, <code id="tidyverse_+3A_names_sort">names_sort</code>, <code id="tidyverse_+3A_names_vary">names_vary</code>, <code id="tidyverse_+3A_names_expand">names_expand</code>, <code id="tidyverse_+3A_values_from">values_from</code>, <code id="tidyverse_+3A_values_fill">values_fill</code>, <code id="tidyverse_+3A_values_fn">values_fn</code>, <code id="tidyverse_+3A_unused_fn">unused_fn</code>, <code id="tidyverse_+3A_.tbl">.tbl</code>, <code id="tidyverse_+3A_.keep">.keep</code>, <code id="tidyverse_+3A_col">col</code>, <code id="tidyverse_+3A_sep">sep</code>, <code id="tidyverse_+3A_remove">remove</code>, <code id="tidyverse_+3A_.preserve">.preserve</code></td>
<td>
<p>Passed to tidyverse generic methods. Consult their documentation.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Note that the implementation of <code>summarise.csquares</code> has changed since version 0.0.5.002, to better
reflect the <code>dplyr</code> generic implementation. To get results similar to the earlier implementation please
use <code>resample_csquares()</code>.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>if (requireNamespace(c("dplyr", "tidyr"))) {
  library(dplyr)
  library(tidyr)
  
  ## Create a csquares object from the orca dataset:
  orca_csq &lt;- as_csquares(orca, csquares = "csquares")
  
  ## Filter values that belong to the killer whale realm:
  orca2 &lt;- filter(orca_csq, orcinus_orca == TRUE)
  
  ## Mutate the object to hold information on the quadrant:
  orca_csq &lt;- mutate(orca_csq, quadrant = csquares |&gt; as.character() |&gt; substr(1,1))
  
  ## Select the quadrant column:
  orca2 &lt;- select(orca_csq, quadrant)
  
  ## Convert it into a tibble:
  orca_csq &lt;- as_tibble(orca_csq)
  
  ## Arrange by quadrant:
  orca2 &lt;- arrange(orca_csq, quadrant)
  
  ## Group by quadrant:
  orca_csq &lt;- group_by(orca_csq, quadrant)
  
  ## Summarise per quadrant:
  summarise(orca_csq, realm_frac = sum(orcinus_orca)/n())
  
  #' Introduce a group split:
  orca2 &lt;- group_split(orca_csq)
  
  ## Ungroup the object:
  orca_csq &lt;- ungroup(orca_csq)
  
  ## Take a slice of the first three rows:
  slice(orca_csq, 1:3)
  
  ## Take a sample of 10 rows with replacement:
  slice_sample(orca_csq, n = 10, replace = TRUE)
  
  ## Rename a column:
  rename(orca_csq, quad = "quadrant")
  rename_with(orca_csq, toupper, starts_with("quad"))
  
  ## Distinct will remove any duplicated rows:
  orca_csq[c(1, 1, 1),] |&gt; distinct()
  
  ## Pivot to a wide format:
  pivot_wider(orca_csq, names_from = "quadrant", values_from = "orcinus_orca")
  pivot_wider(orca_csq, names_from = "orcinus_orca", values_from = "orcinus_orca",
              id_cols = "quadrant", values_fn = length)
  
  ## Pivot to a long format (note that you can't pivot the csquares column to long)
  tibble(csq = "1000", a = 1, b = 2, d = 3) |&gt;
    as_csquares(csquares = "csq") |&gt;
    pivot_longer(c("a", "b", "d"), names_to = "letter", values_to = "numeric")
  
  ## Unite two columns into one:
  unite(orca_csq, "quad_realm", any_of(c("quadrant", "orcinus_orca")))
  
  ## As the csquares column gets nested in the example below,
  ## the resulting object is no longer of class csquares:
  orca_nest &lt;- nest(orca_csq, nested_data = c("csquares", "orcinus_orca"))
  
  ## Unnest it:
  unnest(orca_nest, "nested_data")
}

</code></pre>

<hr>
<h2 id='validate_csquares'>Test if a csquares object is valid</h2><span id='topic+validate_csquares'></span>

<h3>Description</h3>

<p>Tests if a <code>csquares</code> object is correctly specified and can be translated into valid coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_csquares(x)
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="validate_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> to be evaluated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>logical</code> value indicating whether the <code>csquares</code> object is valid or not.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>validate_csquares(
  as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1")
)
</code></pre>

<hr>
<h2 id='vctrs'>vctrs methods for csquares objects</h2><span id='topic+vctrs'></span><span id='topic+vec_cast.csquares'></span><span id='topic+vec_cast.csquares.csquares'></span><span id='topic+vec_cast.csquares.character'></span><span id='topic+vec_cast.csquares.default'></span><span id='topic+vec_ptype2.csquares'></span><span id='topic+vec_ptype2.csquares.character'></span><span id='topic+vec_ptype2.csquares.csquares'></span><span id='topic+vec_ptype2.csquares.default'></span>

<h3>Description</h3>

<p>Implementations to support csquare vctrs operations. There is no need to call these functions directly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>vec_cast.csquares(x, to, ...)

## S3 method for class 'csquares'
vec_cast.csquares(x, to, ...)

## S3 method for class 'character'
vec_cast.csquares(x, to, ...)

## Default S3 method:
vec_cast.csquares(x, to, ...)

vec_ptype2.csquares(x, y, ...)

## S3 method for class 'character'
vec_ptype2.csquares(x, y, ...)

## S3 method for class 'csquares'
vec_ptype2.csquares(x, y, ...)

## Default S3 method:
vec_ptype2.csquares(x, y, ..., x_arg = "x", y_arg = "y")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="vctrs_+3A_x">x</code>, <code id="vctrs_+3A_y">y</code></td>
<td>
<p>Vector types.</p>
</td></tr>
<tr><td><code id="vctrs_+3A_to">to</code></td>
<td>
<p>Types to cast to. If NULL, <code>x</code> will be returned as is.</p>
</td></tr>
<tr><td><code id="vctrs_+3A_...">...</code></td>
<td>
<p>Ignored.</p>
</td></tr>
<tr><td><code id="vctrs_+3A_x_arg">x_arg</code>, <code id="vctrs_+3A_y_arg">y_arg</code></td>
<td>
<p>Argument names for <code>x</code> and <code>y</code>.</p>
</td></tr>
</table>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
