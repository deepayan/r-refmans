<!DOCTYPE html><html><head><title>Help for package csquares</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R-nav.css" />
</head><body><div class="container"><nav class="package" aria-label="Topic Navigation">
<div class="dropdown-menu">
<h1>Package {csquares}</h1>
<h2>Contents</h2>
<ul class="menu">
<li><a href='#csquares-package'><p>csquares: Concise Spatial Query and Representation System (c-Squares)</p></a></li>
<li><a href='#as_csquares'><p>Convert lon-lat coordinates into c-square codes</p></a></li>
<li><a href='#drop_csquares'><p>Drop c-square information from object</p></a></li>
<li><a href='#expand_wildcards'><p>Expand c-squares with wildcards to all matching c-squares</p></a></li>
<li><a href='#format.csquares'><p>Basic csquares methods</p></a></li>
<li><a href='#in_csquares'><p>Match c-squares against other c-squares (with wildcards)</p></a></li>
<li><a href='#new_csquares'><p>Create a c-squares raster from a bounding box</p></a></li>
<li><a href='#orca'><p>Killer whale realm</p></a></li>
<li><a href='#st_as_sf'><p>Create a simple features object from c-squares</p></a></li>
<li><a href='#st_as_stars.csquares'><p>Coerce csqaures object into a stars object</p></a></li>
<li><a href='#summarise'><p>Summarise c-square data to a lower resolution</p></a></li>
<li><a href='#validate_csquares'><p>Test if a csquares object is valid</p></a></li>
</ul>
</div>
<hr>
</nav>
<main>
<table>
<tr>
<td>Title:</td>
<td>Concise Spatial Query and Representation System (c-Squares)</td>
</tr>
<tr>
<td>Version:</td>
<td>0.0.5</td>
</tr>
<tr>
<td>Author:</td>
<td>Pepijn de Vries <a href="https://orcid.org/0000-0002-7961-6646"><img alt="ORCID iD"src="https://cloud.R-project.org/web/orcid.svg" style="width:16px; height:16px; margin-left:4px; margin-right:4px; vertical-align:middle" /></a>
    [aut, cre]</td>
</tr>
<tr>
<td>Description:</td>
<td>Encode and decode c-squares, from and to simple feature (sf)
    or spatiotemporal arrays (stars) objects. Use c-squares codes to quickly
    join or query spatial data.</td>
</tr>
<tr>
<td>Imports:</td>
<td>dplyr, methods, purrr, rlang, sf, stars, stringr, tidyr,
tidyselect, vctrs</td>
</tr>
<tr>
<td>Suggests:</td>
<td>curl, ggplot2, knitr, rmarkdown, testthat (&ge; 3.0.0)</td>
</tr>
<tr>
<td>License:</td>
<td><a href="https://www.r-project.org/Licenses/GPL-3">GPL (&ge; 3)</a></td>
</tr>
<tr>
<td>Encoding:</td>
<td>UTF-8</td>
</tr>
<tr>
<td>RoxygenNote:</td>
<td>7.2.3</td>
</tr>
<tr>
<td>Depends:</td>
<td>R (&ge; 4.1.0)</td>
</tr>
<tr>
<td>LazyData:</td>
<td>true</td>
</tr>
<tr>
<td>Collate:</td>
<td>'helpers.R' 'as_csquares.R' 'as_stars.R' 'csquares-package.R'
'csquares_methods.R' 'drop.R' 'expand.R' 'in.R' 'init.R'
'new_csquares.R' 'orca.R' 'st_as_sf.R' 'summarise.R'
'tidyverse.R' 'validate.R'</td>
</tr>
<tr>
<td>Config/testthat/edition:</td>
<td>3</td>
</tr>
<tr>
<td>URL:</td>
<td><a href="https://pepijn-devries.github.io/csquares/">https://pepijn-devries.github.io/csquares/</a>,
<a href="https://github.com/pepijn-devries/csquares/">https://github.com/pepijn-devries/csquares/</a></td>
</tr>
<tr>
<td>BugReports:</td>
<td><a href="https://github.com/pepijn-devries/csquares/issues">https://github.com/pepijn-devries/csquares/issues</a></td>
</tr>
<tr>
<td>VignetteBuilder:</td>
<td>knitr</td>
</tr>
<tr>
<td>NeedsCompilation:</td>
<td>no</td>
</tr>
<tr>
<td>Packaged:</td>
<td>2024-07-05 08:52:23 UTC; vries171</td>
</tr>
<tr>
<td>Maintainer:</td>
<td>Pepijn de Vries &lt;pepijn.devries@outlook.com&gt;</td>
</tr>
<tr>
<td>Repository:</td>
<td>CRAN</td>
</tr>
<tr>
<td>Date/Publication:</td>
<td>2024-07-05 11:20:02 UTC</td>
</tr>
</table>
<hr>
<h2 id='csquares-package'>csquares: Concise Spatial Query and Representation System (c-Squares)</h2><span id='topic+csquares'></span><span id='topic+csquares-package'></span>

<h3>Description</h3>

<p><img src="../help/figures/logo.png" style='float: right' alt='logo' width='120' />
</p>
<p>Encode and decode c-squares, from and to simple feature (sf) or spatiotemporal arrays (stars) objects. Use c-squares codes to quickly join or query spatial data.
</p>


<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Pepijn de Vries <a href="mailto:pepijn.devries@outlook.com">pepijn.devries@outlook.com</a> (<a href="https://orcid.org/0000-0002-7961-6646">ORCID</a>)
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://pepijn-devries.github.io/csquares/">https://pepijn-devries.github.io/csquares/</a>
</p>
</li>
<li> <p><a href="https://github.com/pepijn-devries/csquares/">https://github.com/pepijn-devries/csquares/</a>
</p>
</li>
<li><p> Report bugs at <a href="https://github.com/pepijn-devries/csquares/issues">https://github.com/pepijn-devries/csquares/issues</a>
</p>
</li></ul>


<hr>
<h2 id='as_csquares'>Convert lon-lat coordinates into c-square codes</h2><span id='topic+as_csquares'></span><span id='topic+as_csquares.default'></span><span id='topic+as_csquares.character'></span><span id='topic+as_csquares.numeric'></span><span id='topic+as_csquares.data.frame'></span><span id='topic+as_csquares.sf'></span><span id='topic+as_csquares.stars'></span>

<h3>Description</h3>

<p>Takes WGS84 longitude and latitude coordinates and finds the closest matching c-squares
for a given resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>as_csquares(x, resolution, csquares, ...)

## Default S3 method:
as_csquares(x, resolution, csquares, ...)

## S3 method for class 'character'
as_csquares(x, resolution, csquares, validate = TRUE, ...)

## S3 method for class 'numeric'
as_csquares(x, resolution = 1, csquares, ...)

## S3 method for class 'data.frame'
as_csquares(x, resolution = 1, csquares, ...)

## S3 method for class 'sf'
as_csquares(x, resolution = 1, csquares, ..., use_centroids = TRUE)

## S3 method for class 'stars'
as_csquares(x, resolution = 1, csquares, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="as_csquares_+3A_x">x</code></td>
<td>
<p>An object to be coerced to a <code>csquares</code> object. <code>x</code> can be a vector of <code>character</code> strings
representing c-squares code. It can also be a <code>numeric</code> <code>matrix</code> with two columns
containing the x and y coordinates. <code>x</code> can also be a simple features object
(<code><a href="sf.html#topic+st_as_sf">sf</a></code>) or a spatial arrays object (<code><a href="stars.html#topic+st_as_stars">stars</a></code>).</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_resolution">resolution</code></td>
<td>
<p>Resolution (in WGS84 degrees) to be used for creating c-squares codes.
As per c-square specifications, the resolution should be 10 or less, yet greater than 0.
It should be a tenfold of 1 or 5. Valid resolutions are therefore: 10, 5, 1, 0.5, 0.1, etc.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_csquares">csquares</code></td>
<td>
<p>If <code>x</code> is not a vector of <code>character</code> strings (but for instance a <code>data.frame</code>),
the <code>csquares</code> argument should specify the name of the element of <code>x</code> containing the c-square
codes as <code>character</code> strings.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_...">...</code></td>
<td>
<p>Currently ignored</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_validate">validate</code></td>
<td>
<p>A <code>logical</code> value indicating whether the created object needs to be validated.
Defaults to <code>TRUE</code>. Validation can be time-consuming so set to <code>FALSE</code> to save computing time.</p>
</td></tr>
<tr><td><code id="as_csquares_+3A_use_centroids">use_centroids</code></td>
<td>
<p>In case <code>x</code> is a simple features object and <code>use_centroids</code> is <code>TRUE</code>,
the centroid of each geometry is used for deriving c-squares. If it is <code>FALSE</code> all coordinates
in the geometry are used.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>csquares</code> object that contains c-squares codes.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>as_csquares(cbind(x = 5.2399066, y = 52.7155812), resolution = 1)
orca_csq &lt;- as_csquares(orca, csquares = "csquares")
</code></pre>

<hr>
<h2 id='drop_csquares'>Drop c-square information from object</h2><span id='topic+drop_csquares'></span>

<h3>Description</h3>

<p>Drops c-square data from an object, but keeps the parent class of the object
intact. You cannot deselect the csquare column from a <code>csquares</code> object as this
will render the object invalid. Use <code>drop_csquares</code> instead.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>drop_csquares(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="drop_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> from which the c-square information
needs to be dropped.</p>
</td></tr>
<tr><td><code id="drop_csquares_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a copy of <code>x</code> inheriting its parent classes but with out
csquares info.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>csq &lt;- as_csquares("1000")
drop_csquares(csq)

csq &lt;-
  data.frame(csquares = "1000", foo = "bar") |&gt;
  as_csquares(csquares = "csquares")

drop_csquares(csq)
</code></pre>

<hr>
<h2 id='expand_wildcards'>Expand c-squares with wildcards to all matching c-squares</h2><span id='topic+expand_wildcards'></span>

<h3>Description</h3>

<p>The asterisk (*) can be used as a wildcard, for a compact
notation of csquares. <code>expand_wildcards</code> will replace all
wild cards with valid combinations of values and expands
the compact notation to an explicit notation without
wildcards.
Check out <code>vignette("Wildcards")</code> for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>expand_wildcards(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="expand_wildcards_+3A_x">x</code></td>
<td>
<p>A <code>character</code> string containing csquares codes with
wildcards (asterisk character).</p>
</td></tr>
<tr><td><code id="expand_wildcards_+3A_...">...</code></td>
<td>
<p>ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>csquares</code> object with full notation
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>expand_wildcards("1000:*")
expand_wildcards("1000:***")
expand_wildcards("1000:1**")
expand_wildcards("1000:***:*")
expand_wildcards(c("1000:*", "1000:***", "1000:1**", "1000:***:*"))
</code></pre>

<hr>
<h2 id='format.csquares'>Basic csquares methods</h2><span id='topic+format.csquares'></span><span id='topic+print.csquares'></span><span id='topic+as.character.csquares'></span><span id='topic+summary.csquares'></span><span id='topic+as.data.frame.csquares'></span>

<h3>Description</h3>

<p>Basic S3 methods for <code>csquares</code> objects for formatting and printing the objects
</p>


<h3>Usage</h3>

<pre><code class='language-R'>## S3 method for class 'csquares'
format(x, ...)

## S3 method for class 'csquares'
print(x, ...)

## S3 method for class 'csquares'
as.character(x, ...)

## S3 method for class 'csquares'
summary(object, ...)

## S3 method for class 'csquares'
as.data.frame(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="format.csquares_+3A_x">x</code>, <code id="format.csquares_+3A_object">object</code></td>
<td>
<p>A <code>csquares</code> object to be handled by the s3 methods</p>
</td></tr>
<tr><td><code id="format.csquares_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns (a formatted version of) x
</p>

<hr>
<h2 id='in_csquares'>Match c-squares against other c-squares (with wildcards)</h2><span id='topic+in_csquares'></span>

<h3>Description</h3>

<p>Checks if csquares codes in <code>table</code> matches values in <code>x</code>. Wildcards
are allowed in <code>table</code> for this comparison. Check out <code>vignette("Wildcards")</code>
for more details.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>in_csquares(x, table, strict = FALSE, mode = "any", ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="in_csquares_+3A_x">x</code></td>
<td>
<p>An object of class 'csquares' that will be checked for matching
values in <code>table</code></p>
</td></tr>
<tr><td><code id="in_csquares_+3A_table">table</code></td>
<td>
<p>A <code>character</code> string representing a csquares code. The
code can contain wildcards (asterisk <code>*</code> and percentage <code style="white-space: pre;">&#8288;%&#8288;</code> characters,
both having identical meaning). Any symbol in <code>x</code> will result in a positive match
against the wildcard. <code>table</code> can also be of class <code>csquares</code>, but these
objects cannot contain wildcards.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_strict">strict</code></td>
<td>
<p>When set to <code>FALSE</code>, a match is positive when the start
of <code>x</code>, matches against values in <code>table</code>, even when <code>x</code> has a higher resolution.
When set to <code>TRUE</code>, a match is only positive when the resolution of <code>x</code> and
<code>table</code> is identical.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_mode">mode</code></td>
<td>
<p>Two modes are allowed: <code>"all"</code> and <code>"any"</code>. When an element of
<code>x</code> consists of multiple raster cells, it the mode will determine whether
a match is positive or not. In case of <code>"all"</code>, all raster cells in the element
of <code>x</code> need to match with the cells in <code>table</code>, for a positive match. In
case of <code>"any"</code>, any match will do.</p>
</td></tr>
<tr><td><code id="in_csquares_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a vector of <code>logical</code> values with the same number of
elements or rows as <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)

in_csquares(orca$csquares, c("3400:2", "5515:3"))
in_csquares(orca$csquares, "3400:2|5515:3")

## Percentage symbols are interpreted the same as asterisk symbols
## both are wild cards
in_csquares(orca$csquares, "1%%%:%") |&gt;
  table()

## Same as above
in_csquares(orca$csquares, "1***:*") |&gt;
  table()
 
## Also same as above
in_csquares(orca$csquares, "1***", strict = FALSE) |&gt;
  table()

## Strict interpretation results in no matches
in_csquares(orca$csquares, "1***", strict = TRUE) |&gt;
  table()

## Filter orca data to North Eastern quadrant (1***:*) only:
orca |&gt;
  filter(
    in_csquares(csquares, "1***:*")
  ) |&gt;
  nrow()

</code></pre>

<hr>
<h2 id='new_csquares'>Create a c-squares raster from a bounding box</h2><span id='topic+new_csquares'></span>

<h3>Description</h3>

<p>Creates a spatial raster (<code><a href="stars.html#topic+st_as_stars">stars</a></code>) with c-square codes for a specified bounding box,
using a specified resolution. The raster will be conform c-squares specifications.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>new_csquares(x, resolution = 1, crs = 4326)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="new_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code><a href="sf.html#topic+st_bbox">bbox</a></code> or an object that can be coerced to a <code>bbox</code>.
It defines the bounding box for the c-squares grid created by this function.</p>
</td></tr>
<tr><td><code id="new_csquares_+3A_resolution">resolution</code></td>
<td>
<p>Resolution (in WGS84 degrees) to be used for creating c-squares codes.
As per c-square specifications, the resolution should be 10 or less, yet greater than 0.
It should be a tenfold of 1 or 5. Valid resolutions are therefore: 10, 5, 1, 0.5, 0.1, etc.</p>
</td></tr>
<tr><td><code id="new_csquares_+3A_crs">crs</code></td>
<td>
<p>The projection to be used for the created grid. By default it is WGS84 (EPSG:4326).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code><a href="stars.html#topic+st_as_stars">stars</a></code> and <code>csquares</code> object based on the provided bounding box and
resolution.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
nc &lt;- st_read(system.file("shape/nc.shp", package = "sf"))
new_csquares(nc)
</code></pre>

<hr>
<h2 id='orca'>Killer whale realm</h2><span id='topic+orca'></span>

<h3>Description</h3>

<p>Killer whale realm
</p>


<h3>Usage</h3>

<pre><code class='language-R'>orca
</code></pre>


<h3>Format</h3>



<h4><code>orca</code></h4>

<p>The <code>orca</code> object is a Killer whale realm data set extracted from the data as provided
by Costello (2017) and published by Costello <em>et al.</em> (2017).
It is a data frame with 2,058 rows and two columns:
</p>

<dl>
<dt>csquares</dt><dd><p>c-squares codes indicating spatial grid cells</p>
</dd>
<dt>orcinus_orca</dt><dd><p><code>logical</code> values indicating whether the corresponding c-squares
grid cell belongs to the killer whales (Orcinus orca) biogeographic realm or not.</p>
</dd>
</dl>




<h3>References</h3>


<ul>
<li><p> Costello, M.J. (2017); University of Auckland <a href="https://doi.org/10.17608/k6.auckland.5086654">doi:10.17608/k6.auckland.5086654</a>
Licence <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
</p>
</li>
<li><p> Costello M.J., Tsai P., Wong P.S., Cheung A.K.L, Basher Z. &amp; Chaudhary C. (2017);
&quot;Marine biogeographic realms and species endemicity&quot; Nature Communications 8, 1057
<a href="https://doi.org/10.1038/s41467-017-01121-2">doi:10.1038/s41467-017-01121-2</a>
</p>
</li></ul>


<hr>
<h2 id='st_as_sf'>Create a simple features object from c-squares</h2><span id='topic+st_as_sf'></span><span id='topic+st_as_sf.csquares'></span><span id='topic+st_as_sfc'></span><span id='topic+st_as_sfc.csquares'></span>

<h3>Description</h3>

<p>Converts a <code>character</code> string of c-squares in a spatially explicit simple features object
(<code><a href="sf.html#topic+sf">sf</a></code>. It can also convert <code>data.frame</code>s with a column of c-squares codes to
an <code><a href="sf.html#topic+sf">sf</a></code> object.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_as_sf.csquares(x, ..., use_geometry = TRUE)

st_as_sfc.csquares(x, ..., use_geometry = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="st_as_sf_+3A_x">x</code></td>
<td>
<p>A <code>vector</code> of <code>character</code> strings. Each element should hold a valid
c-square code. <code>x</code> can also be a <code>data.frame</code> with a column of c-square codes.
(Note that wildcard characters are not supported)</p>
</td></tr>
<tr><td><code id="st_as_sf_+3A_...">...</code></td>
<td>
<p>Ignored</p>
</td></tr>
<tr><td><code id="st_as_sf_+3A_use_geometry">use_geometry</code></td>
<td>
<p>If <code>use_geometry</code> is <code>TRUE</code> and <code>x</code> inherits a spatial feature,
its geometry will be used to cast the object. This is much faster than its alternative
when <code>use_geometry</code> is <code>FALSE</code>. In the latter case, the c-square codes are first translated
into explicit spatial information. The latter is more reliable as it does not rely on
the assumption that the geometry of <code>x</code> corresponds with the csquares codes in the object.
In short: use <code>TRUE</code> for speed, use <code>FALSE</code> for reliability.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>In case of <code>st_as_sfc.csquares</code> a list of geometries (<code><a href="sf.html#topic+sfc">sfc</a></code>,
(MULTI)POLYGONS) is returned. In case of <code>st_as_sf.csquares</code> an object of class
(<code><a href="sf.html#topic+sf">sf</a></code>) is returned.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(sf)
st_as_sfc(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
st_as_sf(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
</code></pre>

<hr>
<h2 id='st_as_stars.csquares'>Coerce csqaures object into a stars object</h2><span id='topic+st_as_stars.csquares'></span>

<h3>Description</h3>

<p>Take a <code>csquares</code> object created with <a href="#topic+new_csquares">new_csquares</a> or <a href="#topic+as_csquares">as_csquares</a> and
coerce it to a spatiotemporal array (<a href="stars.html#topic+st_as_stars">stars</a>).
</p>


<h3>Usage</h3>

<pre><code class='language-R'>st_as_stars.csquares(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="st_as_stars.csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> created with <a href="#topic+new_csquares">new_csquares</a> or <a href="#topic+as_csquares">as_csquares</a></p>
</td></tr>
<tr><td><code id="st_as_stars.csquares_+3A_...">...</code></td>
<td>
<p>ignored.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a spatiotemporal array (<a href="stars.html#topic+st_as_stars">stars</a>) object based on <code>x</code>.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(stars)
st_as_stars(as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1"))
st_as_stars(as_csquares(orca, csquares = "csquares"))
</code></pre>

<hr>
<h2 id='summarise'>Summarise c-square data to a lower resolution</h2><span id='topic+summarise'></span><span id='topic+summarise.csquares'></span>

<h3>Description</h3>

<p>This function acts very much like <a href="dplyr.html#topic+summarise">dplyr::summarise</a>, but instead of using a column to group,
c-square codes are used to aggregate to a lower resolution and summarise the data to that lower
resolution.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>summarise.csquares(x, ..., .by, tiers_down = 1L)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="summarise_+3A_x">x</code></td>
<td>
<p>The object to be summarised. Can be a <code>data.frame</code>, <code><a href="sf.html#topic+sf">sf</a></code>, or
<code><a href="stars.html#topic+st_as_stars">stars</a></code> object.</p>
</td></tr>
<tr><td><code id="summarise_+3A_...">...</code></td>
<td>
<p>&lt;<code><a href="rlang.html#topic+args_data_masking">data-masking</a></code>&gt; Name-value pairs of
summary functions. The name will be the name of the variable in the result.
</p>
<p>The value can be:
</p>

<ul>
<li><p> A vector of length 1, e.g. <code>min(x)</code>, <code>n()</code>, or <code>sum(is.na(y))</code>.
</p>
</li>
<li><p> A data frame, to add multiple columns from a single expression.
</p>
</li></ul>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt='[Deprecated]' /></a> Returning values with size 0 or &gt;1 was
deprecated as of 1.1.0. Please use <code><a href="dplyr.html#topic+reframe">reframe()</a></code> for this instead.</p>
</td></tr>
<tr><td><code id="summarise_+3A_.by">.by</code></td>
<td>
<p>The column name that holds the c-squares codes that need to be aggregated.</p>
</td></tr>
<tr><td><code id="summarise_+3A_tiers_down">tiers_down</code></td>
<td>
<p>The number of tiers down from the current resolution to which you wish to
summarise. If the current resolution is 5x5 degrees, the tier down would be 10x10 degrees
(as is the case in the example below).</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns the summarised object inheriting its class from <code>x</code>
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>library(dplyr)
orca |&gt;
  as_csquares(csquares = "csquares") |&gt;
  summarise(
    .by = "csquares",
    orcinus_orca = any(na.omit(.data$orcinus_orca)))

</code></pre>

<hr>
<h2 id='validate_csquares'>Test if a csquares object is valid</h2><span id='topic+validate_csquares'></span>

<h3>Description</h3>

<p>Tests if a <code>csquares</code> object is correctly specified and can be translated into valid coordinates
</p>


<h3>Usage</h3>

<pre><code class='language-R'>validate_csquares(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="validate_csquares_+3A_x">x</code></td>
<td>
<p>An object of class <code>csquares</code> to be evaluated.</p>
</td></tr>
</table>


<h3>Value</h3>

<p>Returns a <code>logical</code> value indicating whether the <code>csquares</code> object is valid or not.
</p>


<h3>Author(s)</h3>

<p>Pepijn de Vries
</p>


<h3>Examples</h3>

<pre><code class='language-R'>validate_csquares(
  as_csquares("7500:110:3|7500:110:1|1500:110:3|1500:110:1")
)
</code></pre>

</main>

</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
</body></html>
